$(function() {
  frappe.realtime.on("toconsole", function(e) {
    e.forEach((t) => {
      console.log(t);
    });
  });
});
/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function Jb(e) {
  const t = /* @__PURE__ */ Object.create(null);
  for (const n of e.split(",")) t[n] = 1;
  return (n) => n in t;
}
const Fn = {}, su = [], po = () => {
}, UL = () => !1, G_ = (e) => e.charCodeAt(0) === 111 && e.charCodeAt(1) === 110 && // uppercase letter
(e.charCodeAt(2) > 122 || e.charCodeAt(2) < 97), Xb = (e) => e.startsWith("onUpdate:"), Ya = Object.assign, Zb = (e, t) => {
  const n = e.indexOf(t);
  n > -1 && e.splice(n, 1);
}, $L = Object.prototype.hasOwnProperty, Cn = (e, t) => $L.call(e, t), Lt = Array.isArray, lu = (e) => Q_(e) === "[object Map]", jA = (e) => Q_(e) === "[object Set]", Yt = (e) => typeof e == "function", sa = (e) => typeof e == "string", ss = (e) => typeof e == "symbol", qn = (e) => e !== null && typeof e == "object", KA = (e) => (qn(e) || Yt(e)) && Yt(e.then) && Yt(e.catch), YA = Object.prototype.toString, Q_ = (e) => YA.call(e), qL = (e) => Q_(e).slice(8, -1), GA = (e) => Q_(e) === "[object Object]", ew = (e) => sa(e) && e !== "NaN" && e[0] !== "-" && "" + parseInt(e, 10) === e, Yd = /* @__PURE__ */ Jb(
  // the leading comma is intentional so empty string "" is also included
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
), J_ = (e) => {
  const t = /* @__PURE__ */ Object.create(null);
  return (n) => t[n] || (t[n] = e(n));
}, HL = /-(\w)/g, Nr = J_(
  (e) => e.replace(HL, (t, n) => n ? n.toUpperCase() : "")
), zL = /\B([A-Z])/g, el = J_(
  (e) => e.replace(zL, "-$1").toLowerCase()
), So = J_((e) => e.charAt(0).toUpperCase() + e.slice(1)), kg = J_(
  (e) => e ? `on${So(e)}` : ""
), Ls = (e, t) => !Object.is(e, t), Wh = (e, ...t) => {
  for (let n = 0; n < e.length; n++)
    e[n](...t);
}, Cy = (e, t, n, a = !1) => {
  Object.defineProperty(e, t, {
    configurable: !0,
    enumerable: !1,
    writable: a,
    value: n
  });
}, Ay = (e) => {
  const t = parseFloat(e);
  return isNaN(t) ? e : t;
}, WL = (e) => {
  const t = sa(e) ? Number(e) : NaN;
  return isNaN(t) ? e : t;
};
let Wk;
const X_ = () => Wk || (Wk = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : typeof global < "u" ? global : {});
function Xe(e) {
  if (Lt(e)) {
    const t = {};
    for (let n = 0; n < e.length; n++) {
      const a = e[n], r = sa(a) ? GL(a) : Xe(a);
      if (r)
        for (const i in r)
          t[i] = r[i];
    }
    return t;
  } else if (sa(e) || qn(e))
    return e;
}
const jL = /;(?![^(]*\))/g, KL = /:([^]+)/, YL = /\/\*[^]*?\*\//g;
function GL(e) {
  const t = {};
  return e.replace(YL, "").split(jL).forEach((n) => {
    if (n) {
      const a = n.split(KL);
      a.length > 1 && (t[a[0].trim()] = a[1].trim());
    }
  }), t;
}
function Ie(e) {
  let t = "";
  if (sa(e))
    t = e;
  else if (Lt(e))
    for (let n = 0; n < e.length; n++) {
      const a = Ie(e[n]);
      a && (t += a + " ");
    }
  else if (qn(e))
    for (const n in e)
      e[n] && (t += n + " ");
  return t.trim();
}
function Jn(e) {
  if (!e) return null;
  let { class: t, style: n } = e;
  return t && !sa(t) && (e.class = Ie(t)), n && (e.style = Xe(n)), e;
}
const QL = "itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly", JL = /* @__PURE__ */ Jb(QL);
function QA(e) {
  return !!e || e === "";
}
const JA = (e) => !!(e && e.__v_isRef === !0), q = (e) => sa(e) ? e : e == null ? "" : Lt(e) || qn(e) && (e.toString === YA || !Yt(e.toString)) ? JA(e) ? q(e.value) : JSON.stringify(e, XA, 2) : String(e), XA = (e, t) => JA(t) ? XA(e, t.value) : lu(t) ? {
  [`Map(${t.size})`]: [...t.entries()].reduce(
    (n, [a, r], i) => (n[Sg(a, i) + " =>"] = r, n),
    {}
  )
} : jA(t) ? {
  [`Set(${t.size})`]: [...t.values()].map((n) => Sg(n))
} : ss(t) ? Sg(t) : qn(t) && !Lt(t) && !GA(t) ? String(t) : t, Sg = (e, t = "") => {
  var n;
  return (
    // Symbol.description in es2019+ so we need to cast here to pass
    // the lib: es2016 check
    ss(e) ? `Symbol(${(n = e.description) != null ? n : t})` : e
  );
};
/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let yr;
class ZA {
  constructor(t = !1) {
    this.detached = t, this._active = !0, this._on = 0, this.effects = [], this.cleanups = [], this._isPaused = !1, this.parent = yr, !t && yr && (this.index = (yr.scopes || (yr.scopes = [])).push(
      this
    ) - 1);
  }
  get active() {
    return this._active;
  }
  pause() {
    if (this._active) {
      this._isPaused = !0;
      let t, n;
      if (this.scopes)
        for (t = 0, n = this.scopes.length; t < n; t++)
          this.scopes[t].pause();
      for (t = 0, n = this.effects.length; t < n; t++)
        this.effects[t].pause();
    }
  }
  /**
   * Resumes the effect scope, including all child scopes and effects.
   */
  resume() {
    if (this._active && this._isPaused) {
      this._isPaused = !1;
      let t, n;
      if (this.scopes)
        for (t = 0, n = this.scopes.length; t < n; t++)
          this.scopes[t].resume();
      for (t = 0, n = this.effects.length; t < n; t++)
        this.effects[t].resume();
    }
  }
  run(t) {
    if (this._active) {
      const n = yr;
      try {
        return yr = this, t();
      } finally {
        yr = n;
      }
    }
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  on() {
    ++this._on === 1 && (this.prevScope = yr, yr = this);
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  off() {
    this._on > 0 && --this._on === 0 && (yr = this.prevScope, this.prevScope = void 0);
  }
  stop(t) {
    if (this._active) {
      this._active = !1;
      let n, a;
      for (n = 0, a = this.effects.length; n < a; n++)
        this.effects[n].stop();
      for (this.effects.length = 0, n = 0, a = this.cleanups.length; n < a; n++)
        this.cleanups[n]();
      if (this.cleanups.length = 0, this.scopes) {
        for (n = 0, a = this.scopes.length; n < a; n++)
          this.scopes[n].stop(!0);
        this.scopes.length = 0;
      }
      if (!this.detached && this.parent && !t) {
        const r = this.parent.scopes.pop();
        r && r !== this && (this.parent.scopes[this.index] = r, r.index = this.index);
      }
      this.parent = void 0;
    }
  }
}
function bu(e) {
  return new ZA(e);
}
function ex() {
  return yr;
}
function qa(e, t = !1) {
  yr && yr.cleanups.push(e);
}
let $n;
const Cg = /* @__PURE__ */ new WeakSet();
class tx {
  constructor(t) {
    this.fn = t, this.deps = void 0, this.depsTail = void 0, this.flags = 5, this.next = void 0, this.cleanup = void 0, this.scheduler = void 0, yr && yr.active && yr.effects.push(this);
  }
  pause() {
    this.flags |= 64;
  }
  resume() {
    this.flags & 64 && (this.flags &= -65, Cg.has(this) && (Cg.delete(this), this.trigger()));
  }
  /**
   * @internal
   */
  notify() {
    this.flags & 2 && !(this.flags & 32) || this.flags & 8 || ax(this);
  }
  run() {
    if (!(this.flags & 1))
      return this.fn();
    this.flags |= 2, jk(this), rx(this);
    const t = $n, n = qi;
    $n = this, qi = !0;
    try {
      return this.fn();
    } finally {
      ix(this), $n = t, qi = n, this.flags &= -3;
    }
  }
  stop() {
    if (this.flags & 1) {
      for (let t = this.deps; t; t = t.nextDep)
        aw(t);
      this.deps = this.depsTail = void 0, jk(this), this.onStop && this.onStop(), this.flags &= -2;
    }
  }
  trigger() {
    this.flags & 64 ? Cg.add(this) : this.scheduler ? this.scheduler() : this.runIfDirty();
  }
  /**
   * @internal
   */
  runIfDirty() {
    xy(this) && this.run();
  }
  get dirty() {
    return xy(this);
  }
}
let nx = 0, Gd, Qd;
function ax(e, t = !1) {
  if (e.flags |= 8, t) {
    e.next = Qd, Qd = e;
    return;
  }
  e.next = Gd, Gd = e;
}
function tw() {
  nx++;
}
function nw() {
  if (--nx > 0)
    return;
  if (Qd) {
    let t = Qd;
    for (Qd = void 0; t; ) {
      const n = t.next;
      t.next = void 0, t.flags &= -9, t = n;
    }
  }
  let e;
  for (; Gd; ) {
    let t = Gd;
    for (Gd = void 0; t; ) {
      const n = t.next;
      if (t.next = void 0, t.flags &= -9, t.flags & 1)
        try {
          t.trigger();
        } catch (a) {
          e || (e = a);
        }
      t = n;
    }
  }
  if (e) throw e;
}
function rx(e) {
  for (let t = e.deps; t; t = t.nextDep)
    t.version = -1, t.prevActiveLink = t.dep.activeLink, t.dep.activeLink = t;
}
function ix(e) {
  let t, n = e.depsTail, a = n;
  for (; a; ) {
    const r = a.prevDep;
    a.version === -1 ? (a === n && (n = r), aw(a), XL(a)) : t = a, a.dep.activeLink = a.prevActiveLink, a.prevActiveLink = void 0, a = r;
  }
  e.deps = t, e.depsTail = n;
}
function xy(e) {
  for (let t = e.deps; t; t = t.nextDep)
    if (t.dep.version !== t.version || t.dep.computed && (ox(t.dep.computed) || t.dep.version !== t.version))
      return !0;
  return !!e._dirty;
}
function ox(e) {
  if (e.flags & 4 && !(e.flags & 16) || (e.flags &= -17, e.globalVersion === sf) || (e.globalVersion = sf, !e.isSSR && e.flags & 128 && (!e.deps && !e._dirty || !xy(e))))
    return;
  e.flags |= 2;
  const t = e.dep, n = $n, a = qi;
  $n = e, qi = !0;
  try {
    rx(e);
    const r = e.fn(e._value);
    (t.version === 0 || Ls(r, e._value)) && (e.flags |= 128, e._value = r, t.version++);
  } catch (r) {
    throw t.version++, r;
  } finally {
    $n = n, qi = a, ix(e), e.flags &= -3;
  }
}
function aw(e, t = !1) {
  const { dep: n, prevSub: a, nextSub: r } = e;
  if (a && (a.nextSub = r, e.prevSub = void 0), r && (r.prevSub = a, e.nextSub = void 0), n.subs === e && (n.subs = a, !a && n.computed)) {
    n.computed.flags &= -5;
    for (let i = n.computed.deps; i; i = i.nextDep)
      aw(i, !0);
  }
  !t && !--n.sc && n.map && n.map.delete(n.key);
}
function XL(e) {
  const { prevDep: t, nextDep: n } = e;
  t && (t.nextDep = n, e.prevDep = void 0), n && (n.prevDep = t, e.nextDep = void 0);
}
let qi = !0;
const sx = [];
function Xo() {
  sx.push(qi), qi = !1;
}
function Zo() {
  const e = sx.pop();
  qi = e === void 0 ? !0 : e;
}
function jk(e) {
  const { cleanup: t } = e;
  if (e.cleanup = void 0, t) {
    const n = $n;
    $n = void 0;
    try {
      t();
    } finally {
      $n = n;
    }
  }
}
let sf = 0;
class ZL {
  constructor(t, n) {
    this.sub = t, this.dep = n, this.version = n.version, this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;
  }
}
class rw {
  // TODO isolatedDeclarations "__v_skip"
  constructor(t) {
    this.computed = t, this.version = 0, this.activeLink = void 0, this.subs = void 0, this.map = void 0, this.key = void 0, this.sc = 0, this.__v_skip = !0;
  }
  track(t) {
    if (!$n || !qi || $n === this.computed)
      return;
    let n = this.activeLink;
    if (n === void 0 || n.sub !== $n)
      n = this.activeLink = new ZL($n, this), $n.deps ? (n.prevDep = $n.depsTail, $n.depsTail.nextDep = n, $n.depsTail = n) : $n.deps = $n.depsTail = n, lx(n);
    else if (n.version === -1 && (n.version = this.version, n.nextDep)) {
      const a = n.nextDep;
      a.prevDep = n.prevDep, n.prevDep && (n.prevDep.nextDep = a), n.prevDep = $n.depsTail, n.nextDep = void 0, $n.depsTail.nextDep = n, $n.depsTail = n, $n.deps === n && ($n.deps = a);
    }
    return n;
  }
  trigger(t) {
    this.version++, sf++, this.notify(t);
  }
  notify(t) {
    tw();
    try {
      for (let n = this.subs; n; n = n.prevSub)
        n.sub.notify() && n.sub.dep.notify();
    } finally {
      nw();
    }
  }
}
function lx(e) {
  if (e.dep.sc++, e.sub.flags & 4) {
    const t = e.dep.computed;
    if (t && !e.dep.subs) {
      t.flags |= 20;
      for (let a = t.deps; a; a = a.nextDep)
        lx(a);
    }
    const n = e.dep.subs;
    n !== e && (e.prevSub = n, n && (n.nextSub = e)), e.dep.subs = e;
  }
}
const s_ = /* @__PURE__ */ new WeakMap(), $l = Symbol(
  ""
), Ty = Symbol(
  ""
), lf = Symbol(
  ""
);
function wr(e, t, n) {
  if (qi && $n) {
    let a = s_.get(e);
    a || s_.set(e, a = /* @__PURE__ */ new Map());
    let r = a.get(n);
    r || (a.set(n, r = new rw()), r.map = a, r.key = n), r.track();
  }
}
function zo(e, t, n, a, r, i) {
  const o = s_.get(e);
  if (!o) {
    sf++;
    return;
  }
  const l = (s) => {
    s && s.trigger();
  };
  if (tw(), t === "clear")
    o.forEach(l);
  else {
    const s = Lt(e), d = s && ew(n);
    if (s && n === "length") {
      const u = Number(a);
      o.forEach((f, h) => {
        (h === "length" || h === lf || !ss(h) && h >= u) && l(f);
      });
    } else
      switch ((n !== void 0 || o.has(void 0)) && l(o.get(n)), d && l(o.get(lf)), t) {
        case "add":
          s ? d && l(o.get("length")) : (l(o.get($l)), lu(e) && l(o.get(Ty)));
          break;
        case "delete":
          s || (l(o.get($l)), lu(e) && l(o.get(Ty)));
          break;
        case "set":
          lu(e) && l(o.get($l));
          break;
      }
  }
  nw();
}
function eF(e, t) {
  const n = s_.get(e);
  return n && n.get(t);
}
function zc(e) {
  const t = Ot(e);
  return t === e ? t : (wr(t, "iterate", lf), Ii(e) ? t : t.map(sr));
}
function Z_(e) {
  return wr(e = Ot(e), "iterate", lf), e;
}
const tF = {
  __proto__: null,
  [Symbol.iterator]() {
    return Ag(this, Symbol.iterator, sr);
  },
  concat(...e) {
    return zc(this).concat(
      ...e.map((t) => Lt(t) ? zc(t) : t)
    );
  },
  entries() {
    return Ag(this, "entries", (e) => (e[1] = sr(e[1]), e));
  },
  every(e, t) {
    return No(this, "every", e, t, void 0, arguments);
  },
  filter(e, t) {
    return No(this, "filter", e, t, (n) => n.map(sr), arguments);
  },
  find(e, t) {
    return No(this, "find", e, t, sr, arguments);
  },
  findIndex(e, t) {
    return No(this, "findIndex", e, t, void 0, arguments);
  },
  findLast(e, t) {
    return No(this, "findLast", e, t, sr, arguments);
  },
  findLastIndex(e, t) {
    return No(this, "findLastIndex", e, t, void 0, arguments);
  },
  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement
  forEach(e, t) {
    return No(this, "forEach", e, t, void 0, arguments);
  },
  includes(...e) {
    return xg(this, "includes", e);
  },
  indexOf(...e) {
    return xg(this, "indexOf", e);
  },
  join(e) {
    return zc(this).join(e);
  },
  // keys() iterator only reads `length`, no optimisation required
  lastIndexOf(...e) {
    return xg(this, "lastIndexOf", e);
  },
  map(e, t) {
    return No(this, "map", e, t, void 0, arguments);
  },
  pop() {
    return Bd(this, "pop");
  },
  push(...e) {
    return Bd(this, "push", e);
  },
  reduce(e, ...t) {
    return Kk(this, "reduce", e, t);
  },
  reduceRight(e, ...t) {
    return Kk(this, "reduceRight", e, t);
  },
  shift() {
    return Bd(this, "shift");
  },
  // slice could use ARRAY_ITERATE but also seems to beg for range tracking
  some(e, t) {
    return No(this, "some", e, t, void 0, arguments);
  },
  splice(...e) {
    return Bd(this, "splice", e);
  },
  toReversed() {
    return zc(this).toReversed();
  },
  toSorted(e) {
    return zc(this).toSorted(e);
  },
  toSpliced(...e) {
    return zc(this).toSpliced(...e);
  },
  unshift(...e) {
    return Bd(this, "unshift", e);
  },
  values() {
    return Ag(this, "values", sr);
  }
};
function Ag(e, t, n) {
  const a = Z_(e), r = a[t]();
  return a !== e && !Ii(e) && (r._next = r.next, r.next = () => {
    const i = r._next();
    return i.value && (i.value = n(i.value)), i;
  }), r;
}
const nF = Array.prototype;
function No(e, t, n, a, r, i) {
  const o = Z_(e), l = o !== e && !Ii(e), s = o[t];
  if (s !== nF[t]) {
    const f = s.apply(e, i);
    return l ? sr(f) : f;
  }
  let d = n;
  o !== e && (l ? d = function(f, h) {
    return n.call(this, sr(f), h, e);
  } : n.length > 2 && (d = function(f, h) {
    return n.call(this, f, h, e);
  }));
  const u = s.call(o, d, a);
  return l && r ? r(u) : u;
}
function Kk(e, t, n, a) {
  const r = Z_(e);
  let i = n;
  return r !== e && (Ii(e) ? n.length > 3 && (i = function(o, l, s) {
    return n.call(this, o, l, s, e);
  }) : i = function(o, l, s) {
    return n.call(this, o, sr(l), s, e);
  }), r[t](i, ...a);
}
function xg(e, t, n) {
  const a = Ot(e);
  wr(a, "iterate", lf);
  const r = a[t](...n);
  return (r === -1 || r === !1) && sw(n[0]) ? (n[0] = Ot(n[0]), a[t](...n)) : r;
}
function Bd(e, t, n = []) {
  Xo(), tw();
  const a = Ot(e)[t].apply(e, n);
  return nw(), Zo(), a;
}
const aF = /* @__PURE__ */ Jb("__proto__,__v_isRef,__isVue"), cx = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((e) => e !== "arguments" && e !== "caller").map((e) => Symbol[e]).filter(ss)
);
function rF(e) {
  ss(e) || (e = String(e));
  const t = Ot(this);
  return wr(t, "has", e), t.hasOwnProperty(e);
}
class ux {
  constructor(t = !1, n = !1) {
    this._isReadonly = t, this._isShallow = n;
  }
  get(t, n, a) {
    if (n === "__v_skip") return t.__v_skip;
    const r = this._isReadonly, i = this._isShallow;
    if (n === "__v_isReactive")
      return !r;
    if (n === "__v_isReadonly")
      return r;
    if (n === "__v_isShallow")
      return i;
    if (n === "__v_raw")
      return a === (r ? i ? hF : hx : i ? mx : fx).get(t) || // receiver is not the reactive proxy, but has the same prototype
      // this means the receiver is a user proxy of the reactive proxy
      Object.getPrototypeOf(t) === Object.getPrototypeOf(a) ? t : void 0;
    const o = Lt(t);
    if (!r) {
      let s;
      if (o && (s = tF[n]))
        return s;
      if (n === "hasOwnProperty")
        return rF;
    }
    const l = Reflect.get(
      t,
      n,
      // if this is a proxy wrapping a ref, return methods using the raw ref
      // as receiver so that we don't have to call `toRaw` on the ref in all
      // its class methods
      ga(t) ? t : a
    );
    return (ss(n) ? cx.has(n) : aF(n)) || (r || wr(t, "get", n), i) ? l : ga(l) ? o && ew(n) ? l : l.value : qn(l) ? r ? Uu(l) : oa(l) : l;
  }
}
class dx extends ux {
  constructor(t = !1) {
    super(!1, t);
  }
  set(t, n, a, r) {
    let i = t[n];
    if (!this._isShallow) {
      const s = qs(i);
      if (!Ii(a) && !qs(a) && (i = Ot(i), a = Ot(a)), !Lt(t) && ga(i) && !ga(a))
        return s ? !1 : (i.value = a, !0);
    }
    const o = Lt(t) && ew(n) ? Number(n) < t.length : Cn(t, n), l = Reflect.set(
      t,
      n,
      a,
      ga(t) ? t : r
    );
    return t === Ot(r) && (o ? Ls(a, i) && zo(t, "set", n, a) : zo(t, "add", n, a)), l;
  }
  deleteProperty(t, n) {
    const a = Cn(t, n);
    t[n];
    const r = Reflect.deleteProperty(t, n);
    return r && a && zo(t, "delete", n, void 0), r;
  }
  has(t, n) {
    const a = Reflect.has(t, n);
    return (!ss(n) || !cx.has(n)) && wr(t, "has", n), a;
  }
  ownKeys(t) {
    return wr(
      t,
      "iterate",
      Lt(t) ? "length" : $l
    ), Reflect.ownKeys(t);
  }
}
class iF extends ux {
  constructor(t = !1) {
    super(!0, t);
  }
  set(t, n) {
    return !0;
  }
  deleteProperty(t, n) {
    return !0;
  }
}
const oF = /* @__PURE__ */ new dx(), sF = /* @__PURE__ */ new iF(), lF = /* @__PURE__ */ new dx(!0);
const Iy = (e) => e, vh = (e) => Reflect.getPrototypeOf(e);
function cF(e, t, n) {
  return function(...a) {
    const r = this.__v_raw, i = Ot(r), o = lu(i), l = e === "entries" || e === Symbol.iterator && o, s = e === "keys" && o, d = r[e](...a), u = n ? Iy : t ? l_ : sr;
    return !t && wr(
      i,
      "iterate",
      s ? Ty : $l
    ), {
      // iterator protocol
      next() {
        const { value: f, done: h } = d.next();
        return h ? { value: f, done: h } : {
          value: l ? [u(f[0]), u(f[1])] : u(f),
          done: h
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function gh(e) {
  return function(...t) {
    return e === "delete" ? !1 : e === "clear" ? void 0 : this;
  };
}
function uF(e, t) {
  const n = {
    get(r) {
      const i = this.__v_raw, o = Ot(i), l = Ot(r);
      e || (Ls(r, l) && wr(o, "get", r), wr(o, "get", l));
      const { has: s } = vh(o), d = t ? Iy : e ? l_ : sr;
      if (s.call(o, r))
        return d(i.get(r));
      if (s.call(o, l))
        return d(i.get(l));
      i !== o && i.get(r);
    },
    get size() {
      const r = this.__v_raw;
      return !e && wr(Ot(r), "iterate", $l), Reflect.get(r, "size", r);
    },
    has(r) {
      const i = this.__v_raw, o = Ot(i), l = Ot(r);
      return e || (Ls(r, l) && wr(o, "has", r), wr(o, "has", l)), r === l ? i.has(r) : i.has(r) || i.has(l);
    },
    forEach(r, i) {
      const o = this, l = o.__v_raw, s = Ot(l), d = t ? Iy : e ? l_ : sr;
      return !e && wr(s, "iterate", $l), l.forEach((u, f) => r.call(i, d(u), d(f), o));
    }
  };
  return Ya(
    n,
    e ? {
      add: gh("add"),
      set: gh("set"),
      delete: gh("delete"),
      clear: gh("clear")
    } : {
      add(r) {
        !t && !Ii(r) && !qs(r) && (r = Ot(r));
        const i = Ot(this);
        return vh(i).has.call(i, r) || (i.add(r), zo(i, "add", r, r)), this;
      },
      set(r, i) {
        !t && !Ii(i) && !qs(i) && (i = Ot(i));
        const o = Ot(this), { has: l, get: s } = vh(o);
        let d = l.call(o, r);
        d || (r = Ot(r), d = l.call(o, r));
        const u = s.call(o, r);
        return o.set(r, i), d ? Ls(i, u) && zo(o, "set", r, i) : zo(o, "add", r, i), this;
      },
      delete(r) {
        const i = Ot(this), { has: o, get: l } = vh(i);
        let s = o.call(i, r);
        s || (r = Ot(r), s = o.call(i, r)), l && l.call(i, r);
        const d = i.delete(r);
        return s && zo(i, "delete", r, void 0), d;
      },
      clear() {
        const r = Ot(this), i = r.size !== 0, o = r.clear();
        return i && zo(
          r,
          "clear",
          void 0,
          void 0
        ), o;
      }
    }
  ), [
    "keys",
    "values",
    "entries",
    Symbol.iterator
  ].forEach((r) => {
    n[r] = cF(r, e, t);
  }), n;
}
function iw(e, t) {
  const n = uF(e, t);
  return (a, r, i) => r === "__v_isReactive" ? !e : r === "__v_isReadonly" ? e : r === "__v_raw" ? a : Reflect.get(
    Cn(n, r) && r in a ? n : a,
    r,
    i
  );
}
const dF = {
  get: /* @__PURE__ */ iw(!1, !1)
}, fF = {
  get: /* @__PURE__ */ iw(!1, !0)
}, mF = {
  get: /* @__PURE__ */ iw(!0, !1)
};
const fx = /* @__PURE__ */ new WeakMap(), mx = /* @__PURE__ */ new WeakMap(), hx = /* @__PURE__ */ new WeakMap(), hF = /* @__PURE__ */ new WeakMap();
function _F(e) {
  switch (e) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function pF(e) {
  return e.__v_skip || !Object.isExtensible(e) ? 0 : _F(qL(e));
}
function oa(e) {
  return qs(e) ? e : ow(
    e,
    !1,
    oF,
    dF,
    fx
  );
}
function vF(e) {
  return ow(
    e,
    !1,
    lF,
    fF,
    mx
  );
}
function Uu(e) {
  return ow(
    e,
    !0,
    sF,
    mF,
    hx
  );
}
function ow(e, t, n, a, r) {
  if (!qn(e) || e.__v_raw && !(t && e.__v_isReactive))
    return e;
  const i = pF(e);
  if (i === 0)
    return e;
  const o = r.get(e);
  if (o)
    return o;
  const l = new Proxy(
    e,
    i === 2 ? a : n
  );
  return r.set(e, l), l;
}
function cu(e) {
  return qs(e) ? cu(e.__v_raw) : !!(e && e.__v_isReactive);
}
function qs(e) {
  return !!(e && e.__v_isReadonly);
}
function Ii(e) {
  return !!(e && e.__v_isShallow);
}
function sw(e) {
  return e ? !!e.__v_raw : !1;
}
function Ot(e) {
  const t = e && e.__v_raw;
  return t ? Ot(t) : e;
}
function _x(e) {
  return !Cn(e, "__v_skip") && Object.isExtensible(e) && Cy(e, "__v_skip", !0), e;
}
const sr = (e) => qn(e) ? oa(e) : e, l_ = (e) => qn(e) ? Uu(e) : e;
function ga(e) {
  return e ? e.__v_isRef === !0 : !1;
}
function Se(e) {
  return px(e, !1);
}
function ot(e) {
  return px(e, !0);
}
function px(e, t) {
  return ga(e) ? e : new gF(e, t);
}
class gF {
  constructor(t, n) {
    this.dep = new rw(), this.__v_isRef = !0, this.__v_isShallow = !1, this._rawValue = n ? t : Ot(t), this._value = n ? t : sr(t), this.__v_isShallow = n;
  }
  get value() {
    return this.dep.track(), this._value;
  }
  set value(t) {
    const n = this._rawValue, a = this.__v_isShallow || Ii(t) || qs(t);
    t = a ? t : Ot(t), Ls(t, n) && (this._rawValue = t, this._value = a ? t : sr(t), this.dep.trigger());
  }
}
function fe(e) {
  return ga(e) ? e.value : e;
}
function yo(e) {
  return Yt(e) ? e() : fe(e);
}
const yF = {
  get: (e, t, n) => t === "__v_raw" ? e : fe(Reflect.get(e, t, n)),
  set: (e, t, n, a) => {
    const r = e[t];
    return ga(r) && !ga(n) ? (r.value = n, !0) : Reflect.set(e, t, n, a);
  }
};
function vx(e) {
  return cu(e) ? e : new Proxy(e, yF);
}
function $u(e) {
  const t = Lt(e) ? new Array(e.length) : {};
  for (const n in e)
    t[n] = gx(e, n);
  return t;
}
class bF {
  constructor(t, n, a) {
    this._object = t, this._key = n, this._defaultValue = a, this.__v_isRef = !0, this._value = void 0;
  }
  get value() {
    const t = this._object[this._key];
    return this._value = t === void 0 ? this._defaultValue : t;
  }
  set value(t) {
    this._object[this._key] = t;
  }
  get dep() {
    return eF(Ot(this._object), this._key);
  }
}
class wF {
  constructor(t) {
    this._getter = t, this.__v_isRef = !0, this.__v_isReadonly = !0, this._value = void 0;
  }
  get value() {
    return this._value = this._getter();
  }
}
function we(e, t, n) {
  return ga(e) ? e : Yt(e) ? new wF(e) : qn(e) && arguments.length > 1 ? gx(e, t, n) : Se(e);
}
function gx(e, t, n) {
  const a = e[t];
  return ga(a) ? a : new bF(e, t, n);
}
class kF {
  constructor(t, n, a) {
    this.fn = t, this.setter = n, this._value = void 0, this.dep = new rw(this), this.__v_isRef = !0, this.deps = void 0, this.depsTail = void 0, this.flags = 16, this.globalVersion = sf - 1, this.next = void 0, this.effect = this, this.__v_isReadonly = !n, this.isSSR = a;
  }
  /**
   * @internal
   */
  notify() {
    if (this.flags |= 16, !(this.flags & 8) && // avoid infinite self recursion
    $n !== this)
      return ax(this, !0), !0;
  }
  get value() {
    const t = this.dep.track();
    return ox(this), t && (t.version = this.dep.version), this._value;
  }
  set value(t) {
    this.setter && this.setter(t);
  }
}
function SF(e, t, n = !1) {
  let a, r;
  return Yt(e) ? a = e : (a = e.get, r = e.set), new kF(a, r, n);
}
const yh = {}, c_ = /* @__PURE__ */ new WeakMap();
let Pl;
function CF(e, t = !1, n = Pl) {
  if (n) {
    let a = c_.get(n);
    a || c_.set(n, a = []), a.push(e);
  }
}
function AF(e, t, n = Fn) {
  const { immediate: a, deep: r, once: i, scheduler: o, augmentJob: l, call: s } = n, d = (E) => r ? E : Ii(E) || r === !1 || r === 0 ? Wo(E, 1) : Wo(E);
  let u, f, h, g, v = !1, w = !1;
  if (ga(e) ? (f = () => e.value, v = Ii(e)) : cu(e) ? (f = () => d(e), v = !0) : Lt(e) ? (w = !0, v = e.some((E) => cu(E) || Ii(E)), f = () => e.map((E) => {
    if (ga(E))
      return E.value;
    if (cu(E))
      return d(E);
    if (Yt(E))
      return s ? s(E, 2) : E();
  })) : Yt(e) ? t ? f = s ? () => s(e, 2) : e : f = () => {
    if (h) {
      Xo();
      try {
        h();
      } finally {
        Zo();
      }
    }
    const E = Pl;
    Pl = u;
    try {
      return s ? s(e, 3, [g]) : e(g);
    } finally {
      Pl = E;
    }
  } : f = po, t && r) {
    const E = f, C = r === !0 ? 1 / 0 : r;
    f = () => Wo(E(), C);
  }
  const b = ex(), p = () => {
    u.stop(), b && b.active && Zb(b.effects, u);
  };
  if (i && t) {
    const E = t;
    t = (...C) => {
      E(...C), p();
    };
  }
  let y = w ? new Array(e.length).fill(yh) : yh;
  const S = (E) => {
    if (!(!(u.flags & 1) || !u.dirty && !E))
      if (t) {
        const C = u.run();
        if (r || v || (w ? C.some((D, P) => Ls(D, y[P])) : Ls(C, y))) {
          h && h();
          const D = Pl;
          Pl = u;
          try {
            const P = [
              C,
              // pass undefined as the old value when it's changed for the first time
              y === yh ? void 0 : w && y[0] === yh ? [] : y,
              g
            ];
            y = C, s ? s(t, 3, P) : (
              // @ts-expect-error
              t(...P)
            );
          } finally {
            Pl = D;
          }
        }
      } else
        u.run();
  };
  return l && l(S), u = new tx(f), u.scheduler = o ? () => o(S, !1) : S, g = (E) => CF(E, !1, u), h = u.onStop = () => {
    const E = c_.get(u);
    if (E) {
      if (s)
        s(E, 4);
      else
        for (const C of E) C();
      c_.delete(u);
    }
  }, t ? a ? S(!0) : y = u.run() : o ? o(S.bind(null, !0), !0) : u.run(), p.pause = u.pause.bind(u), p.resume = u.resume.bind(u), p.stop = p, p;
}
function Wo(e, t = 1 / 0, n) {
  if (t <= 0 || !qn(e) || e.__v_skip || (n = n || /* @__PURE__ */ new Set(), n.has(e)))
    return e;
  if (n.add(e), t--, ga(e))
    Wo(e.value, t, n);
  else if (Lt(e))
    for (let a = 0; a < e.length; a++)
      Wo(e[a], t, n);
  else if (jA(e) || lu(e))
    e.forEach((a) => {
      Wo(a, t, n);
    });
  else if (GA(e)) {
    for (const a in e)
      Wo(e[a], t, n);
    for (const a of Object.getOwnPropertySymbols(e))
      Object.prototype.propertyIsEnumerable.call(e, a) && Wo(e[a], t, n);
  }
  return e;
}
/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function Mf(e, t, n, a) {
  try {
    return a ? e(...a) : e();
  } catch (r) {
    ep(r, t, n);
  }
}
function zi(e, t, n, a) {
  if (Yt(e)) {
    const r = Mf(e, t, n, a);
    return r && KA(r) && r.catch((i) => {
      ep(i, t, n);
    }), r;
  }
  if (Lt(e)) {
    const r = [];
    for (let i = 0; i < e.length; i++)
      r.push(zi(e[i], t, n, a));
    return r;
  }
}
function ep(e, t, n, a = !0) {
  const r = t ? t.vnode : null, { errorHandler: i, throwUnhandledErrorInProduction: o } = t && t.appContext.config || Fn;
  if (t) {
    let l = t.parent;
    const s = t.proxy, d = `https://vuejs.org/error-reference/#runtime-${n}`;
    for (; l; ) {
      const u = l.ec;
      if (u) {
        for (let f = 0; f < u.length; f++)
          if (u[f](e, s, d) === !1)
            return;
      }
      l = l.parent;
    }
    if (i) {
      Xo(), Mf(i, null, 10, [
        e,
        s,
        d
      ]), Zo();
      return;
    }
  }
  xF(e, n, r, a, o);
}
function xF(e, t, n, a = !0, r = !1) {
  if (r)
    throw e;
  console.error(e);
}
const Mr = [];
let lo = -1;
const uu = [];
let Es = null, Zc = 0;
const yx = /* @__PURE__ */ Promise.resolve();
let u_ = null;
function Vt(e) {
  const t = u_ || yx;
  return e ? t.then(this ? e.bind(this) : e) : t;
}
function TF(e) {
  let t = lo + 1, n = Mr.length;
  for (; t < n; ) {
    const a = t + n >>> 1, r = Mr[a], i = cf(r);
    i < e || i === e && r.flags & 2 ? t = a + 1 : n = a;
  }
  return t;
}
function lw(e) {
  if (!(e.flags & 1)) {
    const t = cf(e), n = Mr[Mr.length - 1];
    !n || // fast path when the job id is larger than the tail
    !(e.flags & 2) && t >= cf(n) ? Mr.push(e) : Mr.splice(TF(t), 0, e), e.flags |= 1, bx();
  }
}
function bx() {
  u_ || (u_ = yx.then(kx));
}
function IF(e) {
  Lt(e) ? uu.push(...e) : Es && e.id === -1 ? Es.splice(Zc + 1, 0, e) : e.flags & 1 || (uu.push(e), e.flags |= 1), bx();
}
function Yk(e, t, n = lo + 1) {
  for (; n < Mr.length; n++) {
    const a = Mr[n];
    if (a && a.flags & 2) {
      if (e && a.id !== e.uid)
        continue;
      Mr.splice(n, 1), n--, a.flags & 4 && (a.flags &= -2), a(), a.flags & 4 || (a.flags &= -2);
    }
  }
}
function wx(e) {
  if (uu.length) {
    const t = [...new Set(uu)].sort(
      (n, a) => cf(n) - cf(a)
    );
    if (uu.length = 0, Es) {
      Es.push(...t);
      return;
    }
    for (Es = t, Zc = 0; Zc < Es.length; Zc++) {
      const n = Es[Zc];
      n.flags & 4 && (n.flags &= -2), n.flags & 8 || n(), n.flags &= -2;
    }
    Es = null, Zc = 0;
  }
}
const cf = (e) => e.id == null ? e.flags & 2 ? -1 : 1 / 0 : e.id;
function kx(e) {
  try {
    for (lo = 0; lo < Mr.length; lo++) {
      const t = Mr[lo];
      t && !(t.flags & 8) && (t.flags & 4 && (t.flags &= -2), Mf(
        t,
        t.i,
        t.i ? 15 : 14
      ), t.flags & 4 || (t.flags &= -2));
    }
  } finally {
    for (; lo < Mr.length; lo++) {
      const t = Mr[lo];
      t && (t.flags &= -2);
    }
    lo = -1, Mr.length = 0, wx(), u_ = null, (Mr.length || uu.length) && kx();
  }
}
let tr = null, Sx = null;
function d_(e) {
  const t = tr;
  return tr = e, Sx = e && e.type.__scopeId || null, t;
}
function x(e, t = tr, n) {
  if (!t || e._n)
    return e;
  const a = (...r) => {
    a._d && lS(-1);
    const i = d_(t);
    let o;
    try {
      o = e(...r);
    } finally {
      d_(i), a._d && lS(1);
    }
    return o;
  };
  return a._n = !0, a._c = !0, a._d = !0, a;
}
function an(e, t) {
  if (tr === null)
    return e;
  const n = rp(tr), a = e.dirs || (e.dirs = []);
  for (let r = 0; r < t.length; r++) {
    let [i, o, l, s = Fn] = t[r];
    i && (Yt(i) && (i = {
      mounted: i,
      updated: i
    }), i.deep && Wo(o), a.push({
      dir: i,
      instance: n,
      value: o,
      oldValue: void 0,
      arg: l,
      modifiers: s
    }));
  }
  return e;
}
function Al(e, t, n, a) {
  const r = e.dirs, i = t && t.dirs;
  for (let o = 0; o < r.length; o++) {
    const l = r[o];
    i && (l.oldValue = i[o].value);
    let s = l.dir[a];
    s && (Xo(), zi(s, n, 8, [
      e.el,
      l,
      e,
      t
    ]), Zo());
  }
}
const Cx = Symbol("_vte"), Ax = (e) => e.__isTeleport, Jd = (e) => e && (e.disabled || e.disabled === ""), Gk = (e) => e && (e.defer || e.defer === ""), Qk = (e) => typeof SVGElement < "u" && e instanceof SVGElement, Jk = (e) => typeof MathMLElement == "function" && e instanceof MathMLElement, Ey = (e, t) => {
  const n = e && e.to;
  return sa(n) ? t ? t(n) : null : n;
}, xx = {
  name: "Teleport",
  __isTeleport: !0,
  process(e, t, n, a, r, i, o, l, s, d) {
    const {
      mc: u,
      pc: f,
      pbc: h,
      o: { insert: g, querySelector: v, createText: w, createComment: b }
    } = d, p = Jd(t.props);
    let { shapeFlag: y, children: S, dynamicChildren: E } = t;
    if (e == null) {
      const C = t.el = w(""), D = t.anchor = w("");
      g(C, n, a), g(D, n, a);
      const P = (T, A) => {
        y & 16 && (r && r.isCE && (r.ce._teleportTarget = T), u(
          S,
          T,
          A,
          r,
          i,
          o,
          l,
          s
        ));
      }, O = () => {
        const T = t.target = Ey(t.props, v), A = Ix(T, t, w, g);
        T && (o !== "svg" && Qk(T) ? o = "svg" : o !== "mathml" && Jk(T) && (o = "mathml"), p || (P(T, A), jh(t, !1)));
      };
      p && (P(n, D), jh(t, !0)), Gk(t.props) ? (t.el.__isMounted = !1, Vr(() => {
        O(), delete t.el.__isMounted;
      }, i)) : O();
    } else {
      if (Gk(t.props) && e.el.__isMounted === !1) {
        Vr(() => {
          xx.process(
            e,
            t,
            n,
            a,
            r,
            i,
            o,
            l,
            s,
            d
          );
        }, i);
        return;
      }
      t.el = e.el, t.targetStart = e.targetStart;
      const C = t.anchor = e.anchor, D = t.target = e.target, P = t.targetAnchor = e.targetAnchor, O = Jd(e.props), T = O ? n : D, A = O ? C : P;
      if (o === "svg" || Qk(D) ? o = "svg" : (o === "mathml" || Jk(D)) && (o = "mathml"), E ? (h(
        e.dynamicChildren,
        E,
        T,
        r,
        i,
        o,
        l
      ), vw(e, t, !0)) : s || f(
        e,
        t,
        T,
        A,
        r,
        i,
        o,
        l,
        !1
      ), p)
        O ? t.props && e.props && t.props.to !== e.props.to && (t.props.to = e.props.to) : bh(
          t,
          n,
          C,
          d,
          1
        );
      else if ((t.props && t.props.to) !== (e.props && e.props.to)) {
        const V = t.target = Ey(
          t.props,
          v
        );
        V && bh(
          t,
          V,
          null,
          d,
          0
        );
      } else O && bh(
        t,
        D,
        P,
        d,
        1
      );
      jh(t, p);
    }
  },
  remove(e, t, n, { um: a, o: { remove: r } }, i) {
    const {
      shapeFlag: o,
      children: l,
      anchor: s,
      targetStart: d,
      targetAnchor: u,
      target: f,
      props: h
    } = e;
    if (f && (r(d), r(u)), i && r(s), o & 16) {
      const g = i || !Jd(h);
      for (let v = 0; v < l.length; v++) {
        const w = l[v];
        a(
          w,
          t,
          n,
          g,
          !!w.dynamicChildren
        );
      }
    }
  },
  move: bh,
  hydrate: EF
};
function bh(e, t, n, { o: { insert: a }, m: r }, i = 2) {
  i === 0 && a(e.targetAnchor, t, n);
  const { el: o, anchor: l, shapeFlag: s, children: d, props: u } = e, f = i === 2;
  if (f && a(o, t, n), (!f || Jd(u)) && s & 16)
    for (let h = 0; h < d.length; h++)
      r(
        d[h],
        t,
        n,
        2
      );
  f && a(l, t, n);
}
function EF(e, t, n, a, r, i, {
  o: { nextSibling: o, parentNode: l, querySelector: s, insert: d, createText: u }
}, f) {
  const h = t.target = Ey(
    t.props,
    s
  );
  if (h) {
    const g = Jd(t.props), v = h._lpa || h.firstChild;
    if (t.shapeFlag & 16)
      if (g)
        t.anchor = f(
          o(e),
          t,
          l(e),
          n,
          a,
          r,
          i
        ), t.targetStart = v, t.targetAnchor = v && o(v);
      else {
        t.anchor = o(e);
        let w = v;
        for (; w; ) {
          if (w && w.nodeType === 8) {
            if (w.data === "teleport start anchor")
              t.targetStart = w;
            else if (w.data === "teleport anchor") {
              t.targetAnchor = w, h._lpa = t.targetAnchor && o(t.targetAnchor);
              break;
            }
          }
          w = o(w);
        }
        t.targetAnchor || Ix(h, t, u, d), f(
          v && o(v),
          t,
          h,
          n,
          a,
          r,
          i
        );
      }
    jh(t, g);
  }
  return t.anchor && o(t.anchor);
}
const Tx = xx;
function jh(e, t) {
  const n = e.ctx;
  if (n && n.ut) {
    let a, r;
    for (t ? (a = e.el, r = e.anchor) : (a = e.targetStart, r = e.targetAnchor); a && a !== r; )
      a.nodeType === 1 && a.setAttribute("data-v-owner", n.uid), a = a.nextSibling;
    n.ut();
  }
}
function Ix(e, t, n, a) {
  const r = t.targetStart = n(""), i = t.targetAnchor = n("");
  return r[Cx] = i, e && (a(r, e), a(i, e)), i;
}
const Ps = Symbol("_leaveCb"), wh = Symbol("_enterCb");
function Ex() {
  const e = {
    isMounted: !1,
    isLeaving: !1,
    isUnmounting: !1,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  return on(() => {
    e.isMounted = !0;
  }), Ga(() => {
    e.isUnmounting = !0;
  }), e;
}
const xi = [Function, Array], Px = {
  mode: String,
  appear: Boolean,
  persisted: Boolean,
  // enter
  onBeforeEnter: xi,
  onEnter: xi,
  onAfterEnter: xi,
  onEnterCancelled: xi,
  // leave
  onBeforeLeave: xi,
  onLeave: xi,
  onAfterLeave: xi,
  onLeaveCancelled: xi,
  // appear
  onBeforeAppear: xi,
  onAppear: xi,
  onAfterAppear: xi,
  onAppearCancelled: xi
}, Ox = (e) => {
  const t = e.subTree;
  return t.component ? Ox(t.component) : t;
}, PF = {
  name: "BaseTransition",
  props: Px,
  setup(e, { slots: t }) {
    const n = cs(), a = Ex();
    return () => {
      const r = t.default && cw(t.default(), !0);
      if (!r || !r.length)
        return;
      const i = Dx(r), o = Ot(e), { mode: l } = o;
      if (a.isLeaving)
        return Tg(i);
      const s = Xk(i);
      if (!s)
        return Tg(i);
      let d = uf(
        s,
        o,
        a,
        n,
        // #11061, ensure enterHooks is fresh after clone
        (f) => d = f
      );
      s.type !== cr && Ql(s, d);
      let u = n.subTree && Xk(n.subTree);
      if (u && u.type !== cr && !Bl(s, u) && Ox(n).type !== cr) {
        let f = uf(
          u,
          o,
          a,
          n
        );
        if (Ql(u, f), l === "out-in" && s.type !== cr)
          return a.isLeaving = !0, f.afterLeave = () => {
            a.isLeaving = !1, n.job.flags & 8 || n.update(), delete f.afterLeave, u = void 0;
          }, Tg(i);
        l === "in-out" && s.type !== cr ? f.delayLeave = (h, g, v) => {
          const w = Bx(
            a,
            u
          );
          w[String(u.key)] = u, h[Ps] = () => {
            g(), h[Ps] = void 0, delete d.delayedLeave, u = void 0;
          }, d.delayedLeave = () => {
            v(), delete d.delayedLeave, u = void 0;
          };
        } : u = void 0;
      } else u && (u = void 0);
      return i;
    };
  }
};
function Dx(e) {
  let t = e[0];
  if (e.length > 1) {
    for (const n of e)
      if (n.type !== cr) {
        t = n;
        break;
      }
  }
  return t;
}
const OF = PF;
function Bx(e, t) {
  const { leavingVNodes: n } = e;
  let a = n.get(t.type);
  return a || (a = /* @__PURE__ */ Object.create(null), n.set(t.type, a)), a;
}
function uf(e, t, n, a, r) {
  const {
    appear: i,
    mode: o,
    persisted: l = !1,
    onBeforeEnter: s,
    onEnter: d,
    onAfterEnter: u,
    onEnterCancelled: f,
    onBeforeLeave: h,
    onLeave: g,
    onAfterLeave: v,
    onLeaveCancelled: w,
    onBeforeAppear: b,
    onAppear: p,
    onAfterAppear: y,
    onAppearCancelled: S
  } = t, E = String(e.key), C = Bx(n, e), D = (T, A) => {
    T && zi(
      T,
      a,
      9,
      A
    );
  }, P = (T, A) => {
    const V = A[1];
    D(T, A), Lt(T) ? T.every((M) => M.length <= 1) && V() : T.length <= 1 && V();
  }, O = {
    mode: o,
    persisted: l,
    beforeEnter(T) {
      let A = s;
      if (!n.isMounted)
        if (i)
          A = b || s;
        else
          return;
      T[Ps] && T[Ps](
        !0
        /* cancelled */
      );
      const V = C[E];
      V && Bl(e, V) && V.el[Ps] && V.el[Ps](), D(A, [T]);
    },
    enter(T) {
      let A = d, V = u, M = f;
      if (!n.isMounted)
        if (i)
          A = p || d, V = y || u, M = S || f;
        else
          return;
      let B = !1;
      const N = T[wh] = (H) => {
        B || (B = !0, H ? D(M, [T]) : D(V, [T]), O.delayedLeave && O.delayedLeave(), T[wh] = void 0);
      };
      A ? P(A, [T, N]) : N();
    },
    leave(T, A) {
      const V = String(e.key);
      if (T[wh] && T[wh](
        !0
        /* cancelled */
      ), n.isUnmounting)
        return A();
      D(h, [T]);
      let M = !1;
      const B = T[Ps] = (N) => {
        M || (M = !0, A(), N ? D(w, [T]) : D(v, [T]), T[Ps] = void 0, C[V] === e && delete C[V]);
      };
      C[V] = e, g ? P(g, [T, B]) : B();
    },
    clone(T) {
      const A = uf(
        T,
        t,
        n,
        a,
        r
      );
      return r && r(A), A;
    }
  };
  return O;
}
function Tg(e) {
  if (tp(e))
    return e = es(e), e.children = null, e;
}
function Xk(e) {
  if (!tp(e))
    return Ax(e.type) && e.children ? Dx(e.children) : e;
  if (e.component)
    return e.component.subTree;
  const { shapeFlag: t, children: n } = e;
  if (n) {
    if (t & 16)
      return n[0];
    if (t & 32 && Yt(n.default))
      return n.default();
  }
}
function Ql(e, t) {
  e.shapeFlag & 6 && e.component ? (e.transition = t, Ql(e.component.subTree, t)) : e.shapeFlag & 128 ? (e.ssContent.transition = t.clone(e.ssContent), e.ssFallback.transition = t.clone(e.ssFallback)) : e.transition = t;
}
function cw(e, t = !1, n) {
  let a = [], r = 0;
  for (let i = 0; i < e.length; i++) {
    let o = e[i];
    const l = n == null ? o.key : String(n) + String(o.key != null ? o.key : i);
    o.type === Qe ? (o.patchFlag & 128 && r++, a = a.concat(
      cw(o.children, t, l)
    )) : (t || o.type !== cr) && a.push(l != null ? es(o, { key: l }) : o);
  }
  if (r > 1)
    for (let i = 0; i < a.length; i++)
      a[i].patchFlag = -2;
  return a;
}
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function Ha(e, t) {
  return Yt(e) ? (
    // #8236: extend call and options.name access are considered side-effects
    // by Rollup, so we have to wrap it in a pure-annotated IIFE.
    Ya({ name: e.name }, t, { setup: e })
  ) : e;
}
function $r() {
  const e = cs();
  return e ? (e.appContext.config.idPrefix || "v") + "-" + e.ids[0] + e.ids[1]++ : "";
}
function Vx(e) {
  e.ids = [e.ids[0] + e.ids[2]++ + "-", 0, 0];
}
function Xd(e, t, n, a, r = !1) {
  if (Lt(e)) {
    e.forEach(
      (v, w) => Xd(
        v,
        t && (Lt(t) ? t[w] : t),
        n,
        a,
        r
      )
    );
    return;
  }
  if (du(a) && !r) {
    a.shapeFlag & 512 && a.type.__asyncResolved && a.component.subTree.component && Xd(e, t, n, a.component.subTree);
    return;
  }
  const i = a.shapeFlag & 4 ? rp(a.component) : a.el, o = r ? null : i, { i: l, r: s } = e, d = t && t.r, u = l.refs === Fn ? l.refs = {} : l.refs, f = l.setupState, h = Ot(f), g = f === Fn ? () => !1 : (v) => Cn(h, v);
  if (d != null && d !== s && (sa(d) ? (u[d] = null, g(d) && (f[d] = null)) : ga(d) && (d.value = null)), Yt(s))
    Mf(s, l, 12, [o, u]);
  else {
    const v = sa(s), w = ga(s);
    if (v || w) {
      const b = () => {
        if (e.f) {
          const p = v ? g(s) ? f[s] : u[s] : s.value;
          r ? Lt(p) && Zb(p, i) : Lt(p) ? p.includes(i) || p.push(i) : v ? (u[s] = [i], g(s) && (f[s] = u[s])) : (s.value = [i], e.k && (u[e.k] = s.value));
        } else v ? (u[s] = o, g(s) && (f[s] = o)) : w && (s.value = o, e.k && (u[e.k] = o));
      };
      o ? (b.id = -1, Vr(b, n)) : b();
    }
  }
}
X_().requestIdleCallback;
X_().cancelIdleCallback;
const du = (e) => !!e.type.__asyncLoader, tp = (e) => e.type.__isKeepAlive;
function Mx(e, t) {
  Rx(e, "a", t);
}
function uw(e, t) {
  Rx(e, "da", t);
}
function Rx(e, t, n = ur) {
  const a = e.__wdc || (e.__wdc = () => {
    let r = n;
    for (; r; ) {
      if (r.isDeactivated)
        return;
      r = r.parent;
    }
    return e();
  });
  if (np(t, a, n), n) {
    let r = n.parent;
    for (; r && r.parent; )
      tp(r.parent.vnode) && DF(a, t, n, r), r = r.parent;
  }
}
function DF(e, t, n, a) {
  const r = np(
    t,
    e,
    a,
    !0
    /* prepend */
  );
  di(() => {
    Zb(a[t], r);
  }, n);
}
function np(e, t, n = ur, a = !1) {
  if (n) {
    const r = n[e] || (n[e] = []), i = t.__weh || (t.__weh = (...o) => {
      Xo();
      const l = Lf(n), s = zi(t, n, e, o);
      return l(), Zo(), s;
    });
    return a ? r.unshift(i) : r.push(i), i;
  }
}
const ls = (e) => (t, n = ur) => {
  (!ff || e === "sp") && np(e, (...a) => t(...a), n);
}, qu = ls("bm"), on = ls("m"), dw = ls(
  "bu"
), fw = ls("u"), Ga = ls(
  "bum"
), di = ls("um"), BF = ls(
  "sp"
), VF = ls("rtg"), MF = ls("rtc");
function RF(e, t = ur) {
  np("ec", e, t);
}
const mw = "components", LF = "directives";
function Q(e, t) {
  return hw(mw, e, !0, t) || e;
}
const Lx = Symbol.for("v-ndc");
function Hu(e) {
  return sa(e) ? hw(mw, e, !1) || e : e || Lx;
}
function FF(e) {
  return hw(LF, e);
}
function hw(e, t, n = !0, a = !1) {
  const r = tr || ur;
  if (r) {
    const i = r.type;
    if (e === mw) {
      const l = kN(
        i,
        !1
      );
      if (l && (l === t || l === Nr(t) || l === So(Nr(t))))
        return i;
    }
    const o = (
      // local registration
      // check instance[type] first which is resolved for options API
      Zk(r[e] || i[e], t) || // global registration
      Zk(r.appContext[e], t)
    );
    return !o && a ? i : o;
  }
}
function Zk(e, t) {
  return e && (e[t] || e[Nr(t)] || e[So(Nr(t))]);
}
function rn(e, t, n, a) {
  let r;
  const i = n, o = Lt(e);
  if (o || sa(e)) {
    const l = o && cu(e);
    let s = !1, d = !1;
    l && (s = !Ii(e), d = qs(e), e = Z_(e)), r = new Array(e.length);
    for (let u = 0, f = e.length; u < f; u++)
      r[u] = t(
        s ? d ? l_(sr(e[u])) : sr(e[u]) : e[u],
        u,
        void 0,
        i
      );
  } else if (typeof e == "number") {
    r = new Array(e);
    for (let l = 0; l < e; l++)
      r[l] = t(l + 1, l, void 0, i);
  } else if (qn(e))
    if (e[Symbol.iterator])
      r = Array.from(
        e,
        (l, s) => t(l, s, void 0, i)
      );
    else {
      const l = Object.keys(e);
      r = new Array(l.length);
      for (let s = 0, d = l.length; s < d; s++) {
        const u = l[s];
        r[s] = t(e[u], u, s, i);
      }
    }
  else
    r = [];
  return r;
}
function dr(e, t) {
  for (let n = 0; n < t.length; n++) {
    const a = t[n];
    if (Lt(a))
      for (let r = 0; r < a.length; r++)
        e[a[r].name] = a[r].fn;
    else a && (e[a.name] = a.key ? (...r) => {
      const i = a.fn(...r);
      return i && (i.key = a.key), i;
    } : a.fn);
  }
  return e;
}
function bt(e, t, n = {}, a, r) {
  if (tr.ce || tr.parent && du(tr.parent) && tr.parent.ce)
    return t !== "default" && (n.name = t), ee(), Re(
      Qe,
      null,
      [_("slot", n, a)],
      64
    );
  let i = e[t];
  i && i._c && (i._d = !1), ee();
  const o = i && Fx(i(n)), l = n.key || // slot content array of a dynamic conditional slot may have a branch
  // key attached in the `createSlots` helper, respect that
  o && o.key, s = Re(
    Qe,
    {
      key: (l && !ss(l) ? l : `_${t}`) + // #7256 force differentiate fallback content from actual content
      ""
    },
    o || [],
    o && e._ === 1 ? 64 : -2
  );
  return !r && s.scopeId && (s.slotScopeIds = [s.scopeId + "-s"]), i && i._c && (i._d = !0), s;
}
function Fx(e) {
  return e.some((t) => wu(t) ? !(t.type === cr || t.type === Qe && !Fx(t.children)) : !0) ? e : null;
}
const Py = (e) => e ? aT(e) ? rp(e) : Py(e.parent) : null, Zd = (
  // Move PURE marker to new line to workaround compiler discarding it
  // due to type annotation
  /* @__PURE__ */ Ya(/* @__PURE__ */ Object.create(null), {
    $: (e) => e,
    $el: (e) => e.vnode.el,
    $data: (e) => e.data,
    $props: (e) => e.props,
    $attrs: (e) => e.attrs,
    $slots: (e) => e.slots,
    $refs: (e) => e.refs,
    $parent: (e) => Py(e.parent),
    $root: (e) => Py(e.root),
    $host: (e) => e.ce,
    $emit: (e) => e.emit,
    $options: (e) => $x(e),
    $forceUpdate: (e) => e.f || (e.f = () => {
      lw(e.update);
    }),
    $nextTick: (e) => e.n || (e.n = Vt.bind(e.proxy)),
    $watch: (e) => oN.bind(e)
  })
), Ig = (e, t) => e !== Fn && !e.__isScriptSetup && Cn(e, t), NF = {
  get({ _: e }, t) {
    if (t === "__v_skip")
      return !0;
    const { ctx: n, setupState: a, data: r, props: i, accessCache: o, type: l, appContext: s } = e;
    let d;
    if (t[0] !== "$") {
      const g = o[t];
      if (g !== void 0)
        switch (g) {
          case 1:
            return a[t];
          case 2:
            return r[t];
          case 4:
            return n[t];
          case 3:
            return i[t];
        }
      else {
        if (Ig(a, t))
          return o[t] = 1, a[t];
        if (r !== Fn && Cn(r, t))
          return o[t] = 2, r[t];
        if (
          // only cache other properties when instance has declared (thus stable)
          // props
          (d = e.propsOptions[0]) && Cn(d, t)
        )
          return o[t] = 3, i[t];
        if (n !== Fn && Cn(n, t))
          return o[t] = 4, n[t];
        Oy && (o[t] = 0);
      }
    }
    const u = Zd[t];
    let f, h;
    if (u)
      return t === "$attrs" && wr(e.attrs, "get", ""), u(e);
    if (
      // css module (injected by vue-loader)
      (f = l.__cssModules) && (f = f[t])
    )
      return f;
    if (n !== Fn && Cn(n, t))
      return o[t] = 4, n[t];
    if (
      // global properties
      h = s.config.globalProperties, Cn(h, t)
    )
      return h[t];
  },
  set({ _: e }, t, n) {
    const { data: a, setupState: r, ctx: i } = e;
    return Ig(r, t) ? (r[t] = n, !0) : a !== Fn && Cn(a, t) ? (a[t] = n, !0) : Cn(e.props, t) || t[0] === "$" && t.slice(1) in e ? !1 : (i[t] = n, !0);
  },
  has({
    _: { data: e, setupState: t, accessCache: n, ctx: a, appContext: r, propsOptions: i }
  }, o) {
    let l;
    return !!n[o] || e !== Fn && Cn(e, o) || Ig(t, o) || (l = i[0]) && Cn(l, o) || Cn(a, o) || Cn(Zd, o) || Cn(r.config.globalProperties, o);
  },
  defineProperty(e, t, n) {
    return n.get != null ? e._.accessCache[t] = 0 : Cn(n, "value") && this.set(e, t, n.value, null), Reflect.defineProperty(e, t, n);
  }
};
function lc() {
  return Nx().slots;
}
function UF() {
  return Nx().attrs;
}
function Nx() {
  const e = cs();
  return e.setupContext || (e.setupContext = iT(e));
}
function eS(e) {
  return Lt(e) ? e.reduce(
    (t, n) => (t[n] = null, t),
    {}
  ) : e;
}
let Oy = !0;
function $F(e) {
  const t = $x(e), n = e.proxy, a = e.ctx;
  Oy = !1, t.beforeCreate && tS(t.beforeCreate, e, "bc");
  const {
    // state
    data: r,
    computed: i,
    methods: o,
    watch: l,
    provide: s,
    inject: d,
    // lifecycle
    created: u,
    beforeMount: f,
    mounted: h,
    beforeUpdate: g,
    updated: v,
    activated: w,
    deactivated: b,
    beforeDestroy: p,
    beforeUnmount: y,
    destroyed: S,
    unmounted: E,
    render: C,
    renderTracked: D,
    renderTriggered: P,
    errorCaptured: O,
    serverPrefetch: T,
    // public API
    expose: A,
    inheritAttrs: V,
    // assets
    components: M,
    directives: B,
    filters: N
  } = t;
  if (d && qF(d, a, null), o)
    for (const te in o) {
      const de = o[te];
      Yt(de) && (a[te] = de.bind(n));
    }
  if (r) {
    const te = r.call(n, n);
    qn(te) && (e.data = oa(te));
  }
  if (Oy = !0, i)
    for (const te in i) {
      const de = i[te], Z = Yt(de) ? de.bind(n, n) : Yt(de.get) ? de.get.bind(n, n) : po, F = !Yt(de) && Yt(de.set) ? de.set.bind(n) : po, K = W({
        get: Z,
        set: F
      });
      Object.defineProperty(a, te, {
        enumerable: !0,
        configurable: !0,
        get: () => K.value,
        set: (se) => K.value = se
      });
    }
  if (l)
    for (const te in l)
      Ux(l[te], a, n, te);
  if (s) {
    const te = Yt(s) ? s.call(n) : s;
    Reflect.ownKeys(te).forEach((de) => {
      Nn(de, te[de]);
    });
  }
  u && tS(u, e, "c");
  function j(te, de) {
    Lt(de) ? de.forEach((Z) => te(Z.bind(n))) : de && te(de.bind(n));
  }
  if (j(qu, f), j(on, h), j(dw, g), j(fw, v), j(Mx, w), j(uw, b), j(RF, O), j(MF, D), j(VF, P), j(Ga, y), j(di, E), j(BF, T), Lt(A))
    if (A.length) {
      const te = e.exposed || (e.exposed = {});
      A.forEach((de) => {
        Object.defineProperty(te, de, {
          get: () => n[de],
          set: (Z) => n[de] = Z
        });
      });
    } else e.exposed || (e.exposed = {});
  C && e.render === po && (e.render = C), V != null && (e.inheritAttrs = V), M && (e.components = M), B && (e.directives = B), T && Vx(e);
}
function qF(e, t, n = po) {
  Lt(e) && (e = Dy(e));
  for (const a in e) {
    const r = e[a];
    let i;
    qn(r) ? "default" in r ? i = Gt(
      r.from || a,
      r.default,
      !0
    ) : i = Gt(r.from || a) : i = Gt(r), ga(i) ? Object.defineProperty(t, a, {
      enumerable: !0,
      configurable: !0,
      get: () => i.value,
      set: (o) => i.value = o
    }) : t[a] = i;
  }
}
function tS(e, t, n) {
  zi(
    Lt(e) ? e.map((a) => a.bind(t.proxy)) : e.bind(t.proxy),
    t,
    n
  );
}
function Ux(e, t, n, a) {
  let r = a.includes(".") ? Xx(n, a) : () => n[a];
  if (sa(e)) {
    const i = t[e];
    Yt(i) && nt(r, i);
  } else if (Yt(e))
    nt(r, e.bind(n));
  else if (qn(e))
    if (Lt(e))
      e.forEach((i) => Ux(i, t, n, a));
    else {
      const i = Yt(e.handler) ? e.handler.bind(n) : t[e.handler];
      Yt(i) && nt(r, i, e);
    }
}
function $x(e) {
  const t = e.type, { mixins: n, extends: a } = t, {
    mixins: r,
    optionsCache: i,
    config: { optionMergeStrategies: o }
  } = e.appContext, l = i.get(t);
  let s;
  return l ? s = l : !r.length && !n && !a ? s = t : (s = {}, r.length && r.forEach(
    (d) => f_(s, d, o, !0)
  ), f_(s, t, o)), qn(t) && i.set(t, s), s;
}
function f_(e, t, n, a = !1) {
  const { mixins: r, extends: i } = t;
  i && f_(e, i, n, !0), r && r.forEach(
    (o) => f_(e, o, n, !0)
  );
  for (const o in t)
    if (!(a && o === "expose")) {
      const l = HF[o] || n && n[o];
      e[o] = l ? l(e[o], t[o]) : t[o];
    }
  return e;
}
const HF = {
  data: nS,
  props: aS,
  emits: aS,
  // objects
  methods: qd,
  computed: qd,
  // lifecycle
  beforeCreate: Dr,
  created: Dr,
  beforeMount: Dr,
  mounted: Dr,
  beforeUpdate: Dr,
  updated: Dr,
  beforeDestroy: Dr,
  beforeUnmount: Dr,
  destroyed: Dr,
  unmounted: Dr,
  activated: Dr,
  deactivated: Dr,
  errorCaptured: Dr,
  serverPrefetch: Dr,
  // assets
  components: qd,
  directives: qd,
  // watch
  watch: WF,
  // provide / inject
  provide: nS,
  inject: zF
};
function nS(e, t) {
  return t ? e ? function() {
    return Ya(
      Yt(e) ? e.call(this, this) : e,
      Yt(t) ? t.call(this, this) : t
    );
  } : t : e;
}
function zF(e, t) {
  return qd(Dy(e), Dy(t));
}
function Dy(e) {
  if (Lt(e)) {
    const t = {};
    for (let n = 0; n < e.length; n++)
      t[e[n]] = e[n];
    return t;
  }
  return e;
}
function Dr(e, t) {
  return e ? [...new Set([].concat(e, t))] : t;
}
function qd(e, t) {
  return e ? Ya(/* @__PURE__ */ Object.create(null), e, t) : t;
}
function aS(e, t) {
  return e ? Lt(e) && Lt(t) ? [.../* @__PURE__ */ new Set([...e, ...t])] : Ya(
    /* @__PURE__ */ Object.create(null),
    eS(e),
    eS(t ?? {})
  ) : t;
}
function WF(e, t) {
  if (!e) return t;
  if (!t) return e;
  const n = Ya(/* @__PURE__ */ Object.create(null), e);
  for (const a in t)
    n[a] = Dr(e[a], t[a]);
  return n;
}
function qx() {
  return {
    app: null,
    config: {
      isNativeTag: UL,
      performance: !1,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let jF = 0;
function KF(e, t) {
  return function(a, r = null) {
    Yt(a) || (a = Ya({}, a)), r != null && !qn(r) && (r = null);
    const i = qx(), o = /* @__PURE__ */ new WeakSet(), l = [];
    let s = !1;
    const d = i.app = {
      _uid: jF++,
      _component: a,
      _props: r,
      _container: null,
      _context: i,
      _instance: null,
      version: CN,
      get config() {
        return i.config;
      },
      set config(u) {
      },
      use(u, ...f) {
        return o.has(u) || (u && Yt(u.install) ? (o.add(u), u.install(d, ...f)) : Yt(u) && (o.add(u), u(d, ...f))), d;
      },
      mixin(u) {
        return i.mixins.includes(u) || i.mixins.push(u), d;
      },
      component(u, f) {
        return f ? (i.components[u] = f, d) : i.components[u];
      },
      directive(u, f) {
        return f ? (i.directives[u] = f, d) : i.directives[u];
      },
      mount(u, f, h) {
        if (!s) {
          const g = d._ceVNode || _(a, r);
          return g.appContext = i, h === !0 ? h = "svg" : h === !1 && (h = void 0), e(g, u, h), s = !0, d._container = u, u.__vue_app__ = d, rp(g.component);
        }
      },
      onUnmount(u) {
        l.push(u);
      },
      unmount() {
        s && (zi(
          l,
          d._instance,
          16
        ), e(null, d._container), delete d._container.__vue_app__);
      },
      provide(u, f) {
        return i.provides[u] = f, d;
      },
      runWithContext(u) {
        const f = fu;
        fu = d;
        try {
          return u();
        } finally {
          fu = f;
        }
      }
    };
    return d;
  };
}
let fu = null;
function Nn(e, t) {
  if (ur) {
    let n = ur.provides;
    const a = ur.parent && ur.parent.provides;
    a === n && (n = ur.provides = Object.create(a)), n[e] = t;
  }
}
function Gt(e, t, n = !1) {
  const a = ur || tr;
  if (a || fu) {
    let r = fu ? fu._context.provides : a ? a.parent == null || a.ce ? a.vnode.appContext && a.vnode.appContext.provides : a.parent.provides : void 0;
    if (r && e in r)
      return r[e];
    if (arguments.length > 1)
      return n && Yt(t) ? t.call(a && a.proxy) : t;
  }
}
const Hx = {}, zx = () => Object.create(Hx), Wx = (e) => Object.getPrototypeOf(e) === Hx;
function YF(e, t, n, a = !1) {
  const r = {}, i = zx();
  e.propsDefaults = /* @__PURE__ */ Object.create(null), jx(e, t, r, i);
  for (const o in e.propsOptions[0])
    o in r || (r[o] = void 0);
  n ? e.props = a ? r : vF(r) : e.type.props ? e.props = r : e.props = i, e.attrs = i;
}
function GF(e, t, n, a) {
  const {
    props: r,
    attrs: i,
    vnode: { patchFlag: o }
  } = e, l = Ot(r), [s] = e.propsOptions;
  let d = !1;
  if (
    // always force full diff in dev
    // - #1942 if hmr is enabled with sfc component
    // - vite#872 non-sfc component used by sfc component
    (a || o > 0) && !(o & 16)
  ) {
    if (o & 8) {
      const u = e.vnode.dynamicProps;
      for (let f = 0; f < u.length; f++) {
        let h = u[f];
        if (ap(e.emitsOptions, h))
          continue;
        const g = t[h];
        if (s)
          if (Cn(i, h))
            g !== i[h] && (i[h] = g, d = !0);
          else {
            const v = Nr(h);
            r[v] = By(
              s,
              l,
              v,
              g,
              e,
              !1
            );
          }
        else
          g !== i[h] && (i[h] = g, d = !0);
      }
    }
  } else {
    jx(e, t, r, i) && (d = !0);
    let u;
    for (const f in l)
      (!t || // for camelCase
      !Cn(t, f) && // it's possible the original props was passed in as kebab-case
      // and converted to camelCase (#955)
      ((u = el(f)) === f || !Cn(t, u))) && (s ? n && // for camelCase
      (n[f] !== void 0 || // for kebab-case
      n[u] !== void 0) && (r[f] = By(
        s,
        l,
        f,
        void 0,
        e,
        !0
      )) : delete r[f]);
    if (i !== l)
      for (const f in i)
        (!t || !Cn(t, f)) && (delete i[f], d = !0);
  }
  d && zo(e.attrs, "set", "");
}
function jx(e, t, n, a) {
  const [r, i] = e.propsOptions;
  let o = !1, l;
  if (t)
    for (let s in t) {
      if (Yd(s))
        continue;
      const d = t[s];
      let u;
      r && Cn(r, u = Nr(s)) ? !i || !i.includes(u) ? n[u] = d : (l || (l = {}))[u] = d : ap(e.emitsOptions, s) || (!(s in a) || d !== a[s]) && (a[s] = d, o = !0);
    }
  if (i) {
    const s = Ot(n), d = l || Fn;
    for (let u = 0; u < i.length; u++) {
      const f = i[u];
      n[f] = By(
        r,
        s,
        f,
        d[f],
        e,
        !Cn(d, f)
      );
    }
  }
  return o;
}
function By(e, t, n, a, r, i) {
  const o = e[n];
  if (o != null) {
    const l = Cn(o, "default");
    if (l && a === void 0) {
      const s = o.default;
      if (o.type !== Function && !o.skipFactory && Yt(s)) {
        const { propsDefaults: d } = r;
        if (n in d)
          a = d[n];
        else {
          const u = Lf(r);
          a = d[n] = s.call(
            null,
            t
          ), u();
        }
      } else
        a = s;
      r.ce && r.ce._setProp(n, a);
    }
    o[
      0
      /* shouldCast */
    ] && (i && !l ? a = !1 : o[
      1
      /* shouldCastTrue */
    ] && (a === "" || a === el(n)) && (a = !0));
  }
  return a;
}
const QF = /* @__PURE__ */ new WeakMap();
function Kx(e, t, n = !1) {
  const a = n ? QF : t.propsCache, r = a.get(e);
  if (r)
    return r;
  const i = e.props, o = {}, l = [];
  let s = !1;
  if (!Yt(e)) {
    const u = (f) => {
      s = !0;
      const [h, g] = Kx(f, t, !0);
      Ya(o, h), g && l.push(...g);
    };
    !n && t.mixins.length && t.mixins.forEach(u), e.extends && u(e.extends), e.mixins && e.mixins.forEach(u);
  }
  if (!i && !s)
    return qn(e) && a.set(e, su), su;
  if (Lt(i))
    for (let u = 0; u < i.length; u++) {
      const f = Nr(i[u]);
      rS(f) && (o[f] = Fn);
    }
  else if (i)
    for (const u in i) {
      const f = Nr(u);
      if (rS(f)) {
        const h = i[u], g = o[f] = Lt(h) || Yt(h) ? { type: h } : Ya({}, h), v = g.type;
        let w = !1, b = !0;
        if (Lt(v))
          for (let p = 0; p < v.length; ++p) {
            const y = v[p], S = Yt(y) && y.name;
            if (S === "Boolean") {
              w = !0;
              break;
            } else S === "String" && (b = !1);
          }
        else
          w = Yt(v) && v.name === "Boolean";
        g[
          0
          /* shouldCast */
        ] = w, g[
          1
          /* shouldCastTrue */
        ] = b, (w || Cn(g, "default")) && l.push(f);
      }
    }
  const d = [o, l];
  return qn(e) && a.set(e, d), d;
}
function rS(e) {
  return e[0] !== "$" && !Yd(e);
}
const _w = (e) => e[0] === "_" || e === "$stable", pw = (e) => Lt(e) ? e.map(uo) : [uo(e)], JF = (e, t, n) => {
  if (t._n)
    return t;
  const a = x((...r) => pw(t(...r)), n);
  return a._c = !1, a;
}, Yx = (e, t, n) => {
  const a = e._ctx;
  for (const r in e) {
    if (_w(r)) continue;
    const i = e[r];
    if (Yt(i))
      t[r] = JF(r, i, a);
    else if (i != null) {
      const o = pw(i);
      t[r] = () => o;
    }
  }
}, Gx = (e, t) => {
  const n = pw(t);
  e.slots.default = () => n;
}, Qx = (e, t, n) => {
  for (const a in t)
    (n || !_w(a)) && (e[a] = t[a]);
}, XF = (e, t, n) => {
  const a = e.slots = zx();
  if (e.vnode.shapeFlag & 32) {
    const r = t.__;
    r && Cy(a, "__", r, !0);
    const i = t._;
    i ? (Qx(a, t, n), n && Cy(a, "_", i, !0)) : Yx(t, a);
  } else t && Gx(e, t);
}, ZF = (e, t, n) => {
  const { vnode: a, slots: r } = e;
  let i = !0, o = Fn;
  if (a.shapeFlag & 32) {
    const l = t._;
    l ? n && l === 1 ? i = !1 : Qx(r, t, n) : (i = !t.$stable, Yx(t, r)), o = t;
  } else t && (Gx(e, t), o = { default: 1 });
  if (i)
    for (const l in r)
      !_w(l) && o[l] == null && delete r[l];
}, Vr = mN;
function eN(e) {
  return tN(e);
}
function tN(e, t) {
  const n = X_();
  n.__VUE__ = !0;
  const {
    insert: a,
    remove: r,
    patchProp: i,
    createElement: o,
    createText: l,
    createComment: s,
    setText: d,
    setElementText: u,
    parentNode: f,
    nextSibling: h,
    setScopeId: g = po,
    insertStaticContent: v
  } = e, w = (ne, G, le, Y = null, Ce = null, Te = null, ie = void 0, ge = null, Pe = !!G.dynamicChildren) => {
    if (ne === G)
      return;
    ne && !Bl(ne, G) && (Y = z(ne), se(ne, Ce, Te, !0), ne = null), G.patchFlag === -2 && (Pe = !1, G.dynamicChildren = null);
    const { type: Ee, ref: Je, shapeFlag: _e } = G;
    switch (Ee) {
      case Rf:
        b(ne, G, le, Y);
        break;
      case cr:
        p(ne, G, le, Y);
        break;
      case Pg:
        ne == null && y(G, le, Y, ie);
        break;
      case Qe:
        M(
          ne,
          G,
          le,
          Y,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
        break;
      default:
        _e & 1 ? C(
          ne,
          G,
          le,
          Y,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ) : _e & 6 ? B(
          ne,
          G,
          le,
          Y,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ) : (_e & 64 || _e & 128) && Ee.process(
          ne,
          G,
          le,
          Y,
          Ce,
          Te,
          ie,
          ge,
          Pe,
          Le
        );
    }
    Je != null && Ce ? Xd(Je, ne && ne.ref, Te, G || ne, !G) : Je == null && ne && ne.ref != null && Xd(ne.ref, null, Te, ne, !0);
  }, b = (ne, G, le, Y) => {
    if (ne == null)
      a(
        G.el = l(G.children),
        le,
        Y
      );
    else {
      const Ce = G.el = ne.el;
      G.children !== ne.children && d(Ce, G.children);
    }
  }, p = (ne, G, le, Y) => {
    ne == null ? a(
      G.el = s(G.children || ""),
      le,
      Y
    ) : G.el = ne.el;
  }, y = (ne, G, le, Y) => {
    [ne.el, ne.anchor] = v(
      ne.children,
      G,
      le,
      Y,
      ne.el,
      ne.anchor
    );
  }, S = ({ el: ne, anchor: G }, le, Y) => {
    let Ce;
    for (; ne && ne !== G; )
      Ce = h(ne), a(ne, le, Y), ne = Ce;
    a(G, le, Y);
  }, E = ({ el: ne, anchor: G }) => {
    let le;
    for (; ne && ne !== G; )
      le = h(ne), r(ne), ne = le;
    r(G);
  }, C = (ne, G, le, Y, Ce, Te, ie, ge, Pe) => {
    G.type === "svg" ? ie = "svg" : G.type === "math" && (ie = "mathml"), ne == null ? D(
      G,
      le,
      Y,
      Ce,
      Te,
      ie,
      ge,
      Pe
    ) : T(
      ne,
      G,
      Ce,
      Te,
      ie,
      ge,
      Pe
    );
  }, D = (ne, G, le, Y, Ce, Te, ie, ge) => {
    let Pe, Ee;
    const { props: Je, shapeFlag: _e, transition: $e, dirs: Ze } = ne;
    if (Pe = ne.el = o(
      ne.type,
      Te,
      Je && Je.is,
      Je
    ), _e & 8 ? u(Pe, ne.children) : _e & 16 && O(
      ne.children,
      Pe,
      null,
      Y,
      Ce,
      Eg(ne, Te),
      ie,
      ge
    ), Ze && Al(ne, null, Y, "created"), P(Pe, ne, ne.scopeId, ie, Y), Je) {
      for (const It in Je)
        It !== "value" && !Yd(It) && i(Pe, It, null, Je[It], Te, Y);
      "value" in Je && i(Pe, "value", null, Je.value, Te), (Ee = Je.onVnodeBeforeMount) && io(Ee, Y, ne);
    }
    Ze && Al(ne, null, Y, "beforeMount");
    const _t = nN(Ce, $e);
    _t && $e.beforeEnter(Pe), a(Pe, G, le), ((Ee = Je && Je.onVnodeMounted) || _t || Ze) && Vr(() => {
      Ee && io(Ee, Y, ne), _t && $e.enter(Pe), Ze && Al(ne, null, Y, "mounted");
    }, Ce);
  }, P = (ne, G, le, Y, Ce) => {
    if (le && g(ne, le), Y)
      for (let Te = 0; Te < Y.length; Te++)
        g(ne, Y[Te]);
    if (Ce) {
      let Te = Ce.subTree;
      if (G === Te || eT(Te.type) && (Te.ssContent === G || Te.ssFallback === G)) {
        const ie = Ce.vnode;
        P(
          ne,
          ie,
          ie.scopeId,
          ie.slotScopeIds,
          Ce.parent
        );
      }
    }
  }, O = (ne, G, le, Y, Ce, Te, ie, ge, Pe = 0) => {
    for (let Ee = Pe; Ee < ne.length; Ee++) {
      const Je = ne[Ee] = ge ? Os(ne[Ee]) : uo(ne[Ee]);
      w(
        null,
        Je,
        G,
        le,
        Y,
        Ce,
        Te,
        ie,
        ge
      );
    }
  }, T = (ne, G, le, Y, Ce, Te, ie) => {
    const ge = G.el = ne.el;
    let { patchFlag: Pe, dynamicChildren: Ee, dirs: Je } = G;
    Pe |= ne.patchFlag & 16;
    const _e = ne.props || Fn, $e = G.props || Fn;
    let Ze;
    if (le && xl(le, !1), (Ze = $e.onVnodeBeforeUpdate) && io(Ze, le, G, ne), Je && Al(G, ne, le, "beforeUpdate"), le && xl(le, !0), (_e.innerHTML && $e.innerHTML == null || _e.textContent && $e.textContent == null) && u(ge, ""), Ee ? A(
      ne.dynamicChildren,
      Ee,
      ge,
      le,
      Y,
      Eg(G, Ce),
      Te
    ) : ie || de(
      ne,
      G,
      ge,
      null,
      le,
      Y,
      Eg(G, Ce),
      Te,
      !1
    ), Pe > 0) {
      if (Pe & 16)
        V(ge, _e, $e, le, Ce);
      else if (Pe & 2 && _e.class !== $e.class && i(ge, "class", null, $e.class, Ce), Pe & 4 && i(ge, "style", _e.style, $e.style, Ce), Pe & 8) {
        const _t = G.dynamicProps;
        for (let It = 0; It < _t.length; It++) {
          const rt = _t[It], Dt = _e[rt], en = $e[rt];
          (en !== Dt || rt === "value") && i(ge, rt, Dt, en, Ce, le);
        }
      }
      Pe & 1 && ne.children !== G.children && u(ge, G.children);
    } else !ie && Ee == null && V(ge, _e, $e, le, Ce);
    ((Ze = $e.onVnodeUpdated) || Je) && Vr(() => {
      Ze && io(Ze, le, G, ne), Je && Al(G, ne, le, "updated");
    }, Y);
  }, A = (ne, G, le, Y, Ce, Te, ie) => {
    for (let ge = 0; ge < G.length; ge++) {
      const Pe = ne[ge], Ee = G[ge], Je = (
        // oldVNode may be an errored async setup() component inside Suspense
        // which will not have a mounted element
        Pe.el && // - In the case of a Fragment, we need to provide the actual parent
        // of the Fragment itself so it can move its children.
        (Pe.type === Qe || // - In the case of different nodes, there is going to be a replacement
        // which also requires the correct parent container
        !Bl(Pe, Ee) || // - In the case of a component, it could contain anything.
        Pe.shapeFlag & 198) ? f(Pe.el) : (
          // In other cases, the parent container is not actually used so we
          // just pass the block element here to avoid a DOM parentNode call.
          le
        )
      );
      w(
        Pe,
        Ee,
        Je,
        null,
        Y,
        Ce,
        Te,
        ie,
        !0
      );
    }
  }, V = (ne, G, le, Y, Ce) => {
    if (G !== le) {
      if (G !== Fn)
        for (const Te in G)
          !Yd(Te) && !(Te in le) && i(
            ne,
            Te,
            G[Te],
            null,
            Ce,
            Y
          );
      for (const Te in le) {
        if (Yd(Te)) continue;
        const ie = le[Te], ge = G[Te];
        ie !== ge && Te !== "value" && i(ne, Te, ge, ie, Ce, Y);
      }
      "value" in le && i(ne, "value", G.value, le.value, Ce);
    }
  }, M = (ne, G, le, Y, Ce, Te, ie, ge, Pe) => {
    const Ee = G.el = ne ? ne.el : l(""), Je = G.anchor = ne ? ne.anchor : l("");
    let { patchFlag: _e, dynamicChildren: $e, slotScopeIds: Ze } = G;
    Ze && (ge = ge ? ge.concat(Ze) : Ze), ne == null ? (a(Ee, le, Y), a(Je, le, Y), O(
      // #10007
      // such fragment like `<></>` will be compiled into
      // a fragment which doesn't have a children.
      // In this case fallback to an empty array
      G.children || [],
      le,
      Je,
      Ce,
      Te,
      ie,
      ge,
      Pe
    )) : _e > 0 && _e & 64 && $e && // #2715 the previous fragment could've been a BAILed one as a result
    // of renderSlot() with no valid children
    ne.dynamicChildren ? (A(
      ne.dynamicChildren,
      $e,
      le,
      Ce,
      Te,
      ie,
      ge
    ), // #2080 if the stable fragment has a key, it's a <template v-for> that may
    //  get moved around. Make sure all root level vnodes inherit el.
    // #2134 or if it's a component root, it may also get moved around
    // as the component is being moved.
    (G.key != null || Ce && G === Ce.subTree) && vw(
      ne,
      G,
      !0
      /* shallow */
    )) : de(
      ne,
      G,
      le,
      Je,
      Ce,
      Te,
      ie,
      ge,
      Pe
    );
  }, B = (ne, G, le, Y, Ce, Te, ie, ge, Pe) => {
    G.slotScopeIds = ge, ne == null ? G.shapeFlag & 512 ? Ce.ctx.activate(
      G,
      le,
      Y,
      ie,
      Pe
    ) : N(
      G,
      le,
      Y,
      Ce,
      Te,
      ie,
      Pe
    ) : H(ne, G, Pe);
  }, N = (ne, G, le, Y, Ce, Te, ie) => {
    const ge = ne.component = gN(
      ne,
      Y,
      Ce
    );
    if (tp(ne) && (ge.ctx.renderer = Le), yN(ge, !1, ie), ge.asyncDep) {
      if (Ce && Ce.registerDep(ge, j, ie), !ne.el) {
        const Pe = ge.subTree = _(cr);
        p(null, Pe, G, le);
      }
    } else
      j(
        ge,
        ne,
        G,
        le,
        Ce,
        Te,
        ie
      );
  }, H = (ne, G, le) => {
    const Y = G.component = ne.component;
    if (dN(ne, G, le))
      if (Y.asyncDep && !Y.asyncResolved) {
        te(Y, G, le);
        return;
      } else
        Y.next = G, Y.update();
    else
      G.el = ne.el, Y.vnode = G;
  }, j = (ne, G, le, Y, Ce, Te, ie) => {
    const ge = () => {
      if (ne.isMounted) {
        let { next: _e, bu: $e, u: Ze, parent: _t, vnode: It } = ne;
        {
          const ta = Jx(ne);
          if (ta) {
            _e && (_e.el = It.el, te(ne, _e, ie)), ta.asyncDep.then(() => {
              ne.isUnmounted || ge();
            });
            return;
          }
        }
        let rt = _e, Dt;
        xl(ne, !1), _e ? (_e.el = It.el, te(ne, _e, ie)) : _e = It, $e && Wh($e), (Dt = _e.props && _e.props.onVnodeBeforeUpdate) && io(Dt, _t, _e, It), xl(ne, !0);
        const en = oS(ne), zn = ne.subTree;
        ne.subTree = en, w(
          zn,
          en,
          // parent may have changed if it's in a teleport
          f(zn.el),
          // anchor may have changed if it's in a fragment
          z(zn),
          ne,
          Ce,
          Te
        ), _e.el = en.el, rt === null && fN(ne, en.el), Ze && Vr(Ze, Ce), (Dt = _e.props && _e.props.onVnodeUpdated) && Vr(
          () => io(Dt, _t, _e, It),
          Ce
        );
      } else {
        let _e;
        const { el: $e, props: Ze } = G, { bm: _t, m: It, parent: rt, root: Dt, type: en } = ne, zn = du(G);
        xl(ne, !1), _t && Wh(_t), !zn && (_e = Ze && Ze.onVnodeBeforeMount) && io(_e, rt, G), xl(ne, !0);
        {
          Dt.ce && // @ts-expect-error _def is private
          Dt.ce._def.shadowRoot !== !1 && Dt.ce._injectChildStyle(en);
          const ta = ne.subTree = oS(ne);
          w(
            null,
            ta,
            le,
            Y,
            ne,
            Ce,
            Te
          ), G.el = ta.el;
        }
        if (It && Vr(It, Ce), !zn && (_e = Ze && Ze.onVnodeMounted)) {
          const ta = G;
          Vr(
            () => io(_e, rt, ta),
            Ce
          );
        }
        (G.shapeFlag & 256 || rt && du(rt.vnode) && rt.vnode.shapeFlag & 256) && ne.a && Vr(ne.a, Ce), ne.isMounted = !0, G = le = Y = null;
      }
    };
    ne.scope.on();
    const Pe = ne.effect = new tx(ge);
    ne.scope.off();
    const Ee = ne.update = Pe.run.bind(Pe), Je = ne.job = Pe.runIfDirty.bind(Pe);
    Je.i = ne, Je.id = ne.uid, Pe.scheduler = () => lw(Je), xl(ne, !0), Ee();
  }, te = (ne, G, le) => {
    G.component = ne;
    const Y = ne.vnode.props;
    ne.vnode = G, ne.next = null, GF(ne, G.props, Y, le), ZF(ne, G.children, le), Xo(), Yk(ne), Zo();
  }, de = (ne, G, le, Y, Ce, Te, ie, ge, Pe = !1) => {
    const Ee = ne && ne.children, Je = ne ? ne.shapeFlag : 0, _e = G.children, { patchFlag: $e, shapeFlag: Ze } = G;
    if ($e > 0) {
      if ($e & 128) {
        F(
          Ee,
          _e,
          le,
          Y,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
        return;
      } else if ($e & 256) {
        Z(
          Ee,
          _e,
          le,
          Y,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
        return;
      }
    }
    Ze & 8 ? (Je & 16 && pe(Ee, Ce, Te), _e !== Ee && u(le, _e)) : Je & 16 ? Ze & 16 ? F(
      Ee,
      _e,
      le,
      Y,
      Ce,
      Te,
      ie,
      ge,
      Pe
    ) : pe(Ee, Ce, Te, !0) : (Je & 8 && u(le, ""), Ze & 16 && O(
      _e,
      le,
      Y,
      Ce,
      Te,
      ie,
      ge,
      Pe
    ));
  }, Z = (ne, G, le, Y, Ce, Te, ie, ge, Pe) => {
    ne = ne || su, G = G || su;
    const Ee = ne.length, Je = G.length, _e = Math.min(Ee, Je);
    let $e;
    for ($e = 0; $e < _e; $e++) {
      const Ze = G[$e] = Pe ? Os(G[$e]) : uo(G[$e]);
      w(
        ne[$e],
        Ze,
        le,
        null,
        Ce,
        Te,
        ie,
        ge,
        Pe
      );
    }
    Ee > Je ? pe(
      ne,
      Ce,
      Te,
      !0,
      !1,
      _e
    ) : O(
      G,
      le,
      Y,
      Ce,
      Te,
      ie,
      ge,
      Pe,
      _e
    );
  }, F = (ne, G, le, Y, Ce, Te, ie, ge, Pe) => {
    let Ee = 0;
    const Je = G.length;
    let _e = ne.length - 1, $e = Je - 1;
    for (; Ee <= _e && Ee <= $e; ) {
      const Ze = ne[Ee], _t = G[Ee] = Pe ? Os(G[Ee]) : uo(G[Ee]);
      if (Bl(Ze, _t))
        w(
          Ze,
          _t,
          le,
          null,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
      else
        break;
      Ee++;
    }
    for (; Ee <= _e && Ee <= $e; ) {
      const Ze = ne[_e], _t = G[$e] = Pe ? Os(G[$e]) : uo(G[$e]);
      if (Bl(Ze, _t))
        w(
          Ze,
          _t,
          le,
          null,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
      else
        break;
      _e--, $e--;
    }
    if (Ee > _e) {
      if (Ee <= $e) {
        const Ze = $e + 1, _t = Ze < Je ? G[Ze].el : Y;
        for (; Ee <= $e; )
          w(
            null,
            G[Ee] = Pe ? Os(G[Ee]) : uo(G[Ee]),
            le,
            _t,
            Ce,
            Te,
            ie,
            ge,
            Pe
          ), Ee++;
      }
    } else if (Ee > $e)
      for (; Ee <= _e; )
        se(ne[Ee], Ce, Te, !0), Ee++;
    else {
      const Ze = Ee, _t = Ee, It = /* @__PURE__ */ new Map();
      for (Ee = _t; Ee <= $e; Ee++) {
        const Wn = G[Ee] = Pe ? Os(G[Ee]) : uo(G[Ee]);
        Wn.key != null && It.set(Wn.key, Ee);
      }
      let rt, Dt = 0;
      const en = $e - _t + 1;
      let zn = !1, ta = 0;
      const Na = new Array(en);
      for (Ee = 0; Ee < en; Ee++) Na[Ee] = 0;
      for (Ee = Ze; Ee <= _e; Ee++) {
        const Wn = ne[Ee];
        if (Dt >= en) {
          se(Wn, Ce, Te, !0);
          continue;
        }
        let Vn;
        if (Wn.key != null)
          Vn = It.get(Wn.key);
        else
          for (rt = _t; rt <= $e; rt++)
            if (Na[rt - _t] === 0 && Bl(Wn, G[rt])) {
              Vn = rt;
              break;
            }
        Vn === void 0 ? se(Wn, Ce, Te, !0) : (Na[Vn - _t] = Ee + 1, Vn >= ta ? ta = Vn : zn = !0, w(
          Wn,
          G[Vn],
          le,
          null,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ), Dt++);
      }
      const ba = zn ? aN(Na) : su;
      for (rt = ba.length - 1, Ee = en - 1; Ee >= 0; Ee--) {
        const Wn = _t + Ee, Vn = G[Wn], Ja = Wn + 1 < Je ? G[Wn + 1].el : Y;
        Na[Ee] === 0 ? w(
          null,
          Vn,
          le,
          Ja,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ) : zn && (rt < 0 || Ee !== ba[rt] ? K(Vn, le, Ja, 2) : rt--);
      }
    }
  }, K = (ne, G, le, Y, Ce = null) => {
    const { el: Te, type: ie, transition: ge, children: Pe, shapeFlag: Ee } = ne;
    if (Ee & 6) {
      K(ne.component.subTree, G, le, Y);
      return;
    }
    if (Ee & 128) {
      ne.suspense.move(G, le, Y);
      return;
    }
    if (Ee & 64) {
      ie.move(ne, G, le, Le);
      return;
    }
    if (ie === Qe) {
      a(Te, G, le);
      for (let _e = 0; _e < Pe.length; _e++)
        K(Pe[_e], G, le, Y);
      a(ne.anchor, G, le);
      return;
    }
    if (ie === Pg) {
      S(ne, G, le);
      return;
    }
    if (Y !== 2 && Ee & 1 && ge)
      if (Y === 0)
        ge.beforeEnter(Te), a(Te, G, le), Vr(() => ge.enter(Te), Ce);
      else {
        const { leave: _e, delayLeave: $e, afterLeave: Ze } = ge, _t = () => {
          ne.ctx.isUnmounted ? r(Te) : a(Te, G, le);
        }, It = () => {
          _e(Te, () => {
            _t(), Ze && Ze();
          });
        };
        $e ? $e(Te, _t, It) : It();
      }
    else
      a(Te, G, le);
  }, se = (ne, G, le, Y = !1, Ce = !1) => {
    const {
      type: Te,
      props: ie,
      ref: ge,
      children: Pe,
      dynamicChildren: Ee,
      shapeFlag: Je,
      patchFlag: _e,
      dirs: $e,
      cacheIndex: Ze
    } = ne;
    if (_e === -2 && (Ce = !1), ge != null && (Xo(), Xd(ge, null, le, ne, !0), Zo()), Ze != null && (G.renderCache[Ze] = void 0), Je & 256) {
      G.ctx.deactivate(ne);
      return;
    }
    const _t = Je & 1 && $e, It = !du(ne);
    let rt;
    if (It && (rt = ie && ie.onVnodeBeforeUnmount) && io(rt, G, ne), Je & 6)
      ve(ne.component, le, Y);
    else {
      if (Je & 128) {
        ne.suspense.unmount(le, Y);
        return;
      }
      _t && Al(ne, null, G, "beforeUnmount"), Je & 64 ? ne.type.remove(
        ne,
        G,
        le,
        Le,
        Y
      ) : Ee && // #5154
      // when v-once is used inside a block, setBlockTracking(-1) marks the
      // parent block with hasOnce: true
      // so that it doesn't take the fast path during unmount - otherwise
      // components nested in v-once are never unmounted.
      !Ee.hasOnce && // #1153: fast path should not be taken for non-stable (v-for) fragments
      (Te !== Qe || _e > 0 && _e & 64) ? pe(
        Ee,
        G,
        le,
        !1,
        !0
      ) : (Te === Qe && _e & 384 || !Ce && Je & 16) && pe(Pe, G, le), Y && X(ne);
    }
    (It && (rt = ie && ie.onVnodeUnmounted) || _t) && Vr(() => {
      rt && io(rt, G, ne), _t && Al(ne, null, G, "unmounted");
    }, le);
  }, X = (ne) => {
    const { type: G, el: le, anchor: Y, transition: Ce } = ne;
    if (G === Qe) {
      he(le, Y);
      return;
    }
    if (G === Pg) {
      E(ne);
      return;
    }
    const Te = () => {
      r(le), Ce && !Ce.persisted && Ce.afterLeave && Ce.afterLeave();
    };
    if (ne.shapeFlag & 1 && Ce && !Ce.persisted) {
      const { leave: ie, delayLeave: ge } = Ce, Pe = () => ie(le, Te);
      ge ? ge(ne.el, Te, Pe) : Pe();
    } else
      Te();
  }, he = (ne, G) => {
    let le;
    for (; ne !== G; )
      le = h(ne), r(ne), ne = le;
    r(G);
  }, ve = (ne, G, le) => {
    const {
      bum: Y,
      scope: Ce,
      job: Te,
      subTree: ie,
      um: ge,
      m: Pe,
      a: Ee,
      parent: Je,
      slots: { __: _e }
    } = ne;
    iS(Pe), iS(Ee), Y && Wh(Y), Je && Lt(_e) && _e.forEach(($e) => {
      Je.renderCache[$e] = void 0;
    }), Ce.stop(), Te && (Te.flags |= 8, se(ie, ne, G, le)), ge && Vr(ge, G), Vr(() => {
      ne.isUnmounted = !0;
    }, G), G && G.pendingBranch && !G.isUnmounted && ne.asyncDep && !ne.asyncResolved && ne.suspenseId === G.pendingId && (G.deps--, G.deps === 0 && G.resolve());
  }, pe = (ne, G, le, Y = !1, Ce = !1, Te = 0) => {
    for (let ie = Te; ie < ne.length; ie++)
      se(ne[ie], G, le, Y, Ce);
  }, z = (ne) => {
    if (ne.shapeFlag & 6)
      return z(ne.component.subTree);
    if (ne.shapeFlag & 128)
      return ne.suspense.next();
    const G = h(ne.anchor || ne.el), le = G && G[Cx];
    return le ? h(le) : G;
  };
  let ke = !1;
  const Me = (ne, G, le) => {
    ne == null ? G._vnode && se(G._vnode, null, null, !0) : w(
      G._vnode || null,
      ne,
      G,
      null,
      null,
      null,
      le
    ), G._vnode = ne, ke || (ke = !0, Yk(), wx(), ke = !1);
  }, Le = {
    p: w,
    um: se,
    m: K,
    r: X,
    mt: N,
    mc: O,
    pc: de,
    pbc: A,
    n: z,
    o: e
  };
  return {
    render: Me,
    hydrate: void 0,
    createApp: KF(Me)
  };
}
function Eg({ type: e, props: t }, n) {
  return n === "svg" && e === "foreignObject" || n === "mathml" && e === "annotation-xml" && t && t.encoding && t.encoding.includes("html") ? void 0 : n;
}
function xl({ effect: e, job: t }, n) {
  n ? (e.flags |= 32, t.flags |= 4) : (e.flags &= -33, t.flags &= -5);
}
function nN(e, t) {
  return (!e || e && !e.pendingBranch) && t && !t.persisted;
}
function vw(e, t, n = !1) {
  const a = e.children, r = t.children;
  if (Lt(a) && Lt(r))
    for (let i = 0; i < a.length; i++) {
      const o = a[i];
      let l = r[i];
      l.shapeFlag & 1 && !l.dynamicChildren && ((l.patchFlag <= 0 || l.patchFlag === 32) && (l = r[i] = Os(r[i]), l.el = o.el), !n && l.patchFlag !== -2 && vw(o, l)), l.type === Rf && (l.el = o.el), l.type === cr && !l.el && (l.el = o.el);
    }
}
function aN(e) {
  const t = e.slice(), n = [0];
  let a, r, i, o, l;
  const s = e.length;
  for (a = 0; a < s; a++) {
    const d = e[a];
    if (d !== 0) {
      if (r = n[n.length - 1], e[r] < d) {
        t[a] = r, n.push(a);
        continue;
      }
      for (i = 0, o = n.length - 1; i < o; )
        l = i + o >> 1, e[n[l]] < d ? i = l + 1 : o = l;
      d < e[n[i]] && (i > 0 && (t[a] = n[i - 1]), n[i] = a);
    }
  }
  for (i = n.length, o = n[i - 1]; i-- > 0; )
    n[i] = o, o = t[o];
  return n;
}
function Jx(e) {
  const t = e.subTree.component;
  if (t)
    return t.asyncDep && !t.asyncResolved ? t : Jx(t);
}
function iS(e) {
  if (e)
    for (let t = 0; t < e.length; t++)
      e[t].flags |= 8;
}
const rN = Symbol.for("v-scx"), iN = () => Gt(rN);
function Zn(e, t) {
  return gw(e, null, t);
}
function nt(e, t, n) {
  return gw(e, t, n);
}
function gw(e, t, n = Fn) {
  const { immediate: a, deep: r, flush: i, once: o } = n, l = Ya({}, n), s = t && a || !t && i !== "post";
  let d;
  if (ff) {
    if (i === "sync") {
      const g = iN();
      d = g.__watcherHandles || (g.__watcherHandles = []);
    } else if (!s) {
      const g = () => {
      };
      return g.stop = po, g.resume = po, g.pause = po, g;
    }
  }
  const u = ur;
  l.call = (g, v, w) => zi(g, u, v, w);
  let f = !1;
  i === "post" ? l.scheduler = (g) => {
    Vr(g, u && u.suspense);
  } : i !== "sync" && (f = !0, l.scheduler = (g, v) => {
    v ? g() : lw(g);
  }), l.augmentJob = (g) => {
    t && (g.flags |= 4), f && (g.flags |= 2, u && (g.id = u.uid, g.i = u));
  };
  const h = AF(e, t, l);
  return ff && (d ? d.push(h) : s && h()), h;
}
function oN(e, t, n) {
  const a = this.proxy, r = sa(e) ? e.includes(".") ? Xx(a, e) : () => a[e] : e.bind(a, a);
  let i;
  Yt(t) ? i = t : (i = t.handler, n = t);
  const o = Lf(this), l = gw(r, i.bind(a), n);
  return o(), l;
}
function Xx(e, t) {
  const n = t.split(".");
  return () => {
    let a = e;
    for (let r = 0; r < n.length && a; r++)
      a = a[n[r]];
    return a;
  };
}
const sN = (e, t) => t === "modelValue" || t === "model-value" ? e.modelModifiers : e[`${t}Modifiers`] || e[`${Nr(t)}Modifiers`] || e[`${el(t)}Modifiers`];
function lN(e, t, ...n) {
  if (e.isUnmounted) return;
  const a = e.vnode.props || Fn;
  let r = n;
  const i = t.startsWith("update:"), o = i && sN(a, t.slice(7));
  o && (o.trim && (r = n.map((u) => sa(u) ? u.trim() : u)), o.number && (r = n.map(Ay)));
  let l, s = a[l = kg(t)] || // also try camelCase event handler (#2249)
  a[l = kg(Nr(t))];
  !s && i && (s = a[l = kg(el(t))]), s && zi(
    s,
    e,
    6,
    r
  );
  const d = a[l + "Once"];
  if (d) {
    if (!e.emitted)
      e.emitted = {};
    else if (e.emitted[l])
      return;
    e.emitted[l] = !0, zi(
      d,
      e,
      6,
      r
    );
  }
}
function Zx(e, t, n = !1) {
  const a = t.emitsCache, r = a.get(e);
  if (r !== void 0)
    return r;
  const i = e.emits;
  let o = {}, l = !1;
  if (!Yt(e)) {
    const s = (d) => {
      const u = Zx(d, t, !0);
      u && (l = !0, Ya(o, u));
    };
    !n && t.mixins.length && t.mixins.forEach(s), e.extends && s(e.extends), e.mixins && e.mixins.forEach(s);
  }
  return !i && !l ? (qn(e) && a.set(e, null), null) : (Lt(i) ? i.forEach((s) => o[s] = null) : Ya(o, i), qn(e) && a.set(e, o), o);
}
function ap(e, t) {
  return !e || !G_(t) ? !1 : (t = t.slice(2).replace(/Once$/, ""), Cn(e, t[0].toLowerCase() + t.slice(1)) || Cn(e, el(t)) || Cn(e, t));
}
function oS(e) {
  const {
    type: t,
    vnode: n,
    proxy: a,
    withProxy: r,
    propsOptions: [i],
    slots: o,
    attrs: l,
    emit: s,
    render: d,
    renderCache: u,
    props: f,
    data: h,
    setupState: g,
    ctx: v,
    inheritAttrs: w
  } = e, b = d_(e);
  let p, y;
  try {
    if (n.shapeFlag & 4) {
      const E = r || a, C = E;
      p = uo(
        d.call(
          C,
          E,
          u,
          f,
          g,
          h,
          v
        )
      ), y = l;
    } else {
      const E = t;
      p = uo(
        E.length > 1 ? E(
          f,
          { attrs: l, slots: o, emit: s }
        ) : E(
          f,
          null
        )
      ), y = t.props ? l : cN(l);
    }
  } catch (E) {
    ef.length = 0, ep(E, e, 1), p = _(cr);
  }
  let S = p;
  if (y && w !== !1) {
    const E = Object.keys(y), { shapeFlag: C } = S;
    E.length && C & 7 && (i && E.some(Xb) && (y = uN(
      y,
      i
    )), S = es(S, y, !1, !0));
  }
  return n.dirs && (S = es(S, null, !1, !0), S.dirs = S.dirs ? S.dirs.concat(n.dirs) : n.dirs), n.transition && Ql(S, n.transition), p = S, d_(b), p;
}
const cN = (e) => {
  let t;
  for (const n in e)
    (n === "class" || n === "style" || G_(n)) && ((t || (t = {}))[n] = e[n]);
  return t;
}, uN = (e, t) => {
  const n = {};
  for (const a in e)
    (!Xb(a) || !(a.slice(9) in t)) && (n[a] = e[a]);
  return n;
};
function dN(e, t, n) {
  const { props: a, children: r, component: i } = e, { props: o, children: l, patchFlag: s } = t, d = i.emitsOptions;
  if (t.dirs || t.transition)
    return !0;
  if (n && s >= 0) {
    if (s & 1024)
      return !0;
    if (s & 16)
      return a ? sS(a, o, d) : !!o;
    if (s & 8) {
      const u = t.dynamicProps;
      for (let f = 0; f < u.length; f++) {
        const h = u[f];
        if (o[h] !== a[h] && !ap(d, h))
          return !0;
      }
    }
  } else
    return (r || l) && (!l || !l.$stable) ? !0 : a === o ? !1 : a ? o ? sS(a, o, d) : !0 : !!o;
  return !1;
}
function sS(e, t, n) {
  const a = Object.keys(t);
  if (a.length !== Object.keys(e).length)
    return !0;
  for (let r = 0; r < a.length; r++) {
    const i = a[r];
    if (t[i] !== e[i] && !ap(n, i))
      return !0;
  }
  return !1;
}
function fN({ vnode: e, parent: t }, n) {
  for (; t; ) {
    const a = t.subTree;
    if (a.suspense && a.suspense.activeBranch === e && (a.el = e.el), a === e)
      (e = t.vnode).el = n, t = t.parent;
    else
      break;
  }
}
const eT = (e) => e.__isSuspense;
function mN(e, t) {
  t && t.pendingBranch ? Lt(e) ? t.effects.push(...e) : t.effects.push(e) : IF(e);
}
const Qe = Symbol.for("v-fgt"), Rf = Symbol.for("v-txt"), cr = Symbol.for("v-cmt"), Pg = Symbol.for("v-stc"), ef = [];
let oi = null;
function ee(e = !1) {
  ef.push(oi = e ? null : []);
}
function hN() {
  ef.pop(), oi = ef[ef.length - 1] || null;
}
let df = 1;
function lS(e, t = !1) {
  df += e, e < 0 && oi && t && (oi.hasOnce = !0);
}
function tT(e) {
  return e.dynamicChildren = df > 0 ? oi || su : null, hN(), df > 0 && oi && oi.push(e), e;
}
function Oe(e, t, n, a, r, i) {
  return tT(
    I(
      e,
      t,
      n,
      a,
      r,
      i,
      !0
    )
  );
}
function Re(e, t, n, a, r) {
  return tT(
    _(
      e,
      t,
      n,
      a,
      r,
      !0
    )
  );
}
function wu(e) {
  return e ? e.__v_isVNode === !0 : !1;
}
function Bl(e, t) {
  return e.type === t.type && e.key === t.key;
}
const nT = ({ key: e }) => e ?? null, Kh = ({
  ref: e,
  ref_key: t,
  ref_for: n
}) => (typeof e == "number" && (e = "" + e), e != null ? sa(e) || ga(e) || Yt(e) ? { i: tr, r: e, k: t, f: !!n } : e : null);
function I(e, t = null, n = null, a = 0, r = null, i = e === Qe ? 0 : 1, o = !1, l = !1) {
  const s = {
    __v_isVNode: !0,
    __v_skip: !0,
    type: e,
    props: t,
    key: t && nT(t),
    ref: t && Kh(t),
    scopeId: Sx,
    slotScopeIds: null,
    children: n,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetStart: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag: i,
    patchFlag: a,
    dynamicProps: r,
    dynamicChildren: null,
    appContext: null,
    ctx: tr
  };
  return l ? (yw(s, n), i & 128 && e.normalize(s)) : n && (s.shapeFlag |= sa(n) ? 8 : 16), df > 0 && // avoid a block node from tracking itself
  !o && // has current parent block
  oi && // presence of a patch flag indicates this node needs patching on updates.
  // component nodes also should always be patched, because even if the
  // component doesn't need to update, it needs to persist the instance on to
  // the next vnode so that it can be properly unmounted later.
  (s.patchFlag > 0 || i & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
  // vnode should not be considered dynamic due to handler caching.
  s.patchFlag !== 32 && oi.push(s), s;
}
const _ = _N;
function _N(e, t = null, n = null, a = 0, r = null, i = !1) {
  if ((!e || e === Lx) && (e = cr), wu(e)) {
    const l = es(
      e,
      t,
      !0
      /* mergeRef: true */
    );
    return n && yw(l, n), df > 0 && !i && oi && (l.shapeFlag & 6 ? oi[oi.indexOf(e)] = l : oi.push(l)), l.patchFlag = -2, l;
  }
  if (SN(e) && (e = e.__vccOpts), t) {
    t = Ca(t);
    let { class: l, style: s } = t;
    l && !sa(l) && (t.class = Ie(l)), qn(s) && (sw(s) && !Lt(s) && (s = Ya({}, s)), t.style = Xe(s));
  }
  const o = sa(e) ? 1 : eT(e) ? 128 : Ax(e) ? 64 : qn(e) ? 4 : Yt(e) ? 2 : 0;
  return I(
    e,
    t,
    n,
    a,
    r,
    o,
    i,
    !0
  );
}
function Ca(e) {
  return e ? sw(e) || Wx(e) ? Ya({}, e) : e : null;
}
function es(e, t, n = !1, a = !1) {
  const { props: r, ref: i, patchFlag: o, children: l, transition: s } = e, d = t ? He(r || {}, t) : r, u = {
    __v_isVNode: !0,
    __v_skip: !0,
    type: e.type,
    props: d,
    key: d && nT(d),
    ref: t && t.ref ? (
      // #2078 in the case of <component :is="vnode" ref="extra"/>
      // if the vnode itself already has a ref, cloneVNode will need to merge
      // the refs so the single vnode can be set on multiple refs
      n && i ? Lt(i) ? i.concat(Kh(t)) : [i, Kh(t)] : Kh(t)
    ) : i,
    scopeId: e.scopeId,
    slotScopeIds: e.slotScopeIds,
    children: l,
    target: e.target,
    targetStart: e.targetStart,
    targetAnchor: e.targetAnchor,
    staticCount: e.staticCount,
    shapeFlag: e.shapeFlag,
    // if the vnode is cloned with extra props, we can no longer assume its
    // existing patch flag to be reliable and need to add the FULL_PROPS flag.
    // note: preserve flag for fragments since they use the flag for children
    // fast paths only.
    patchFlag: t && e.type !== Qe ? o === -1 ? 16 : o | 16 : o,
    dynamicProps: e.dynamicProps,
    dynamicChildren: e.dynamicChildren,
    appContext: e.appContext,
    dirs: e.dirs,
    transition: s,
    // These should technically only be non-null on mounted VNodes. However,
    // they *should* be copied for kept-alive vnodes. So we just always copy
    // them since them being non-null during a mount doesn't affect the logic as
    // they will simply be overwritten.
    component: e.component,
    suspense: e.suspense,
    ssContent: e.ssContent && es(e.ssContent),
    ssFallback: e.ssFallback && es(e.ssFallback),
    el: e.el,
    anchor: e.anchor,
    ctx: e.ctx,
    ce: e.ce
  };
  return s && a && Ql(
    u,
    s.clone(u)
  ), u;
}
function ae(e = " ", t = 0) {
  return _(Rf, null, e, t);
}
function ye(e = "", t = !1) {
  return t ? (ee(), Re(cr, null, e)) : _(cr, null, e);
}
function uo(e) {
  return e == null || typeof e == "boolean" ? _(cr) : Lt(e) ? _(
    Qe,
    null,
    // #3666, avoid reference pollution when reusing vnode
    e.slice()
  ) : wu(e) ? Os(e) : _(Rf, null, String(e));
}
function Os(e) {
  return e.el === null && e.patchFlag !== -1 || e.memo ? e : es(e);
}
function yw(e, t) {
  let n = 0;
  const { shapeFlag: a } = e;
  if (t == null)
    t = null;
  else if (Lt(t))
    n = 16;
  else if (typeof t == "object")
    if (a & 65) {
      const r = t.default;
      r && (r._c && (r._d = !1), yw(e, r()), r._c && (r._d = !0));
      return;
    } else {
      n = 32;
      const r = t._;
      !r && !Wx(t) ? t._ctx = tr : r === 3 && tr && (tr.slots._ === 1 ? t._ = 1 : (t._ = 2, e.patchFlag |= 1024));
    }
  else Yt(t) ? (t = { default: t, _ctx: tr }, n = 32) : (t = String(t), a & 64 ? (n = 16, t = [ae(t)]) : n = 8);
  e.children = t, e.shapeFlag |= n;
}
function He(...e) {
  const t = {};
  for (let n = 0; n < e.length; n++) {
    const a = e[n];
    for (const r in a)
      if (r === "class")
        t.class !== a.class && (t.class = Ie([t.class, a.class]));
      else if (r === "style")
        t.style = Xe([t.style, a.style]);
      else if (G_(r)) {
        const i = t[r], o = a[r];
        o && i !== o && !(Lt(i) && i.includes(o)) && (t[r] = i ? [].concat(i, o) : o);
      } else r !== "" && (t[r] = a[r]);
  }
  return t;
}
function io(e, t, n, a = null) {
  zi(e, t, 7, [
    n,
    a
  ]);
}
const pN = qx();
let vN = 0;
function gN(e, t, n) {
  const a = e.type, r = (t ? t.appContext : e.appContext) || pN, i = {
    uid: vN++,
    vnode: e,
    type: a,
    parent: t,
    appContext: r,
    root: null,
    // to be immediately set
    next: null,
    subTree: null,
    // will be set synchronously right after creation
    effect: null,
    update: null,
    // will be set synchronously right after creation
    job: null,
    scope: new ZA(
      !0
      /* detached */
    ),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: t ? t.provides : Object.create(r.provides),
    ids: t ? t.ids : ["", 0, 0],
    accessCache: null,
    renderCache: [],
    // local resolved assets
    components: null,
    directives: null,
    // resolved props and emits options
    propsOptions: Kx(a, r),
    emitsOptions: Zx(a, r),
    // emit
    emit: null,
    // to be set immediately
    emitted: null,
    // props default value
    propsDefaults: Fn,
    // inheritAttrs
    inheritAttrs: a.inheritAttrs,
    // state
    ctx: Fn,
    data: Fn,
    props: Fn,
    attrs: Fn,
    slots: Fn,
    refs: Fn,
    setupState: Fn,
    setupContext: null,
    // suspense related
    suspense: n,
    suspenseId: n ? n.pendingId : 0,
    asyncDep: null,
    asyncResolved: !1,
    // lifecycle hooks
    // not using enums here because it results in computed properties
    isMounted: !1,
    isUnmounted: !1,
    isDeactivated: !1,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  return i.ctx = { _: i }, i.root = t ? t.root : i, i.emit = lN.bind(null, i), e.ce && e.ce(i), i;
}
let ur = null;
const cs = () => ur || tr;
let m_, Vy;
{
  const e = X_(), t = (n, a) => {
    let r;
    return (r = e[n]) || (r = e[n] = []), r.push(a), (i) => {
      r.length > 1 ? r.forEach((o) => o(i)) : r[0](i);
    };
  };
  m_ = t(
    "__VUE_INSTANCE_SETTERS__",
    (n) => ur = n
  ), Vy = t(
    "__VUE_SSR_SETTERS__",
    (n) => ff = n
  );
}
const Lf = (e) => {
  const t = ur;
  return m_(e), e.scope.on(), () => {
    e.scope.off(), m_(t);
  };
}, cS = () => {
  ur && ur.scope.off(), m_(null);
};
function aT(e) {
  return e.vnode.shapeFlag & 4;
}
let ff = !1;
function yN(e, t = !1, n = !1) {
  t && Vy(t);
  const { props: a, children: r } = e.vnode, i = aT(e);
  YF(e, a, i, t), XF(e, r, n || t);
  const o = i ? bN(e, t) : void 0;
  return t && Vy(!1), o;
}
function bN(e, t) {
  const n = e.type;
  e.accessCache = /* @__PURE__ */ Object.create(null), e.proxy = new Proxy(e.ctx, NF);
  const { setup: a } = n;
  if (a) {
    Xo();
    const r = e.setupContext = a.length > 1 ? iT(e) : null, i = Lf(e), o = Mf(
      a,
      e,
      0,
      [
        e.props,
        r
      ]
    ), l = KA(o);
    if (Zo(), i(), (l || e.sp) && !du(e) && Vx(e), l) {
      if (o.then(cS, cS), t)
        return o.then((s) => {
          uS(e, s);
        }).catch((s) => {
          ep(s, e, 0);
        });
      e.asyncDep = o;
    } else
      uS(e, o);
  } else
    rT(e);
}
function uS(e, t, n) {
  Yt(t) ? e.type.__ssrInlineRender ? e.ssrRender = t : e.render = t : qn(t) && (e.setupState = vx(t)), rT(e);
}
function rT(e, t, n) {
  const a = e.type;
  e.render || (e.render = a.render || po);
  {
    const r = Lf(e);
    Xo();
    try {
      $F(e);
    } finally {
      Zo(), r();
    }
  }
}
const wN = {
  get(e, t) {
    return wr(e, "get", ""), e[t];
  }
};
function iT(e) {
  const t = (n) => {
    e.exposed = n || {};
  };
  return {
    attrs: new Proxy(e.attrs, wN),
    slots: e.slots,
    emit: e.emit,
    expose: t
  };
}
function rp(e) {
  return e.exposed ? e.exposeProxy || (e.exposeProxy = new Proxy(vx(_x(e.exposed)), {
    get(t, n) {
      if (n in t)
        return t[n];
      if (n in Zd)
        return Zd[n](e);
    },
    has(t, n) {
      return n in t || n in Zd;
    }
  })) : e.proxy;
}
function kN(e, t = !0) {
  return Yt(e) ? e.displayName || e.name : e.name || t && e.__name;
}
function SN(e) {
  return Yt(e) && "__vccOpts" in e;
}
const W = (e, t) => SF(e, t, ff);
function Co(e, t, n) {
  const a = arguments.length;
  return a === 2 ? qn(t) && !Lt(t) ? wu(t) ? _(e, null, [t]) : _(e, t) : _(e, null, t) : (a > 3 ? n = Array.prototype.slice.call(arguments, 2) : a === 3 && wu(n) && (n = [n]), _(e, t, n));
}
const CN = "3.5.17";
/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let My;
const dS = typeof window < "u" && window.trustedTypes;
if (dS)
  try {
    My = /* @__PURE__ */ dS.createPolicy("vue", {
      createHTML: (e) => e
    });
  } catch {
  }
const oT = My ? (e) => My.createHTML(e) : (e) => e, AN = "http://www.w3.org/2000/svg", xN = "http://www.w3.org/1998/Math/MathML", qo = typeof document < "u" ? document : null, fS = qo && /* @__PURE__ */ qo.createElement("template"), TN = {
  insert: (e, t, n) => {
    t.insertBefore(e, n || null);
  },
  remove: (e) => {
    const t = e.parentNode;
    t && t.removeChild(e);
  },
  createElement: (e, t, n, a) => {
    const r = t === "svg" ? qo.createElementNS(AN, e) : t === "mathml" ? qo.createElementNS(xN, e) : n ? qo.createElement(e, { is: n }) : qo.createElement(e);
    return e === "select" && a && a.multiple != null && r.setAttribute("multiple", a.multiple), r;
  },
  createText: (e) => qo.createTextNode(e),
  createComment: (e) => qo.createComment(e),
  setText: (e, t) => {
    e.nodeValue = t;
  },
  setElementText: (e, t) => {
    e.textContent = t;
  },
  parentNode: (e) => e.parentNode,
  nextSibling: (e) => e.nextSibling,
  querySelector: (e) => qo.querySelector(e),
  setScopeId(e, t) {
    e.setAttribute(t, "");
  },
  // __UNSAFE__
  // Reason: innerHTML.
  // Static content here can only come from compiled templates.
  // As long as the user only uses trusted templates, this is safe.
  insertStaticContent(e, t, n, a, r, i) {
    const o = n ? n.previousSibling : t.lastChild;
    if (r && (r === i || r.nextSibling))
      for (; t.insertBefore(r.cloneNode(!0), n), !(r === i || !(r = r.nextSibling)); )
        ;
    else {
      fS.innerHTML = oT(
        a === "svg" ? `<svg>${e}</svg>` : a === "mathml" ? `<math>${e}</math>` : e
      );
      const l = fS.content;
      if (a === "svg" || a === "mathml") {
        const s = l.firstChild;
        for (; s.firstChild; )
          l.appendChild(s.firstChild);
        l.removeChild(s);
      }
      t.insertBefore(l, n);
    }
    return [
      // first
      o ? o.nextSibling : t.firstChild,
      // last
      n ? n.previousSibling : t.lastChild
    ];
  }
}, Cs = "transition", Vd = "animation", ku = Symbol("_vtc"), sT = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: !0
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
}, lT = /* @__PURE__ */ Ya(
  {},
  Px,
  sT
), IN = (e) => (e.displayName = "Transition", e.props = lT, e), Ur = /* @__PURE__ */ IN(
  (e, { slots: t }) => Co(OF, cT(e), t)
), Tl = (e, t = []) => {
  Lt(e) ? e.forEach((n) => n(...t)) : e && e(...t);
}, mS = (e) => e ? Lt(e) ? e.some((t) => t.length > 1) : e.length > 1 : !1;
function cT(e) {
  const t = {};
  for (const M in e)
    M in sT || (t[M] = e[M]);
  if (e.css === !1)
    return t;
  const {
    name: n = "v",
    type: a,
    duration: r,
    enterFromClass: i = `${n}-enter-from`,
    enterActiveClass: o = `${n}-enter-active`,
    enterToClass: l = `${n}-enter-to`,
    appearFromClass: s = i,
    appearActiveClass: d = o,
    appearToClass: u = l,
    leaveFromClass: f = `${n}-leave-from`,
    leaveActiveClass: h = `${n}-leave-active`,
    leaveToClass: g = `${n}-leave-to`
  } = e, v = EN(r), w = v && v[0], b = v && v[1], {
    onBeforeEnter: p,
    onEnter: y,
    onEnterCancelled: S,
    onLeave: E,
    onLeaveCancelled: C,
    onBeforeAppear: D = p,
    onAppear: P = y,
    onAppearCancelled: O = S
  } = t, T = (M, B, N, H) => {
    M._enterCancelled = H, Ts(M, B ? u : l), Ts(M, B ? d : o), N && N();
  }, A = (M, B) => {
    M._isLeaving = !1, Ts(M, f), Ts(M, g), Ts(M, h), B && B();
  }, V = (M) => (B, N) => {
    const H = M ? P : y, j = () => T(B, M, N);
    Tl(H, [B, j]), hS(() => {
      Ts(B, M ? s : i), so(B, M ? u : l), mS(H) || _S(B, a, w, j);
    });
  };
  return Ya(t, {
    onBeforeEnter(M) {
      Tl(p, [M]), so(M, i), so(M, o);
    },
    onBeforeAppear(M) {
      Tl(D, [M]), so(M, s), so(M, d);
    },
    onEnter: V(!1),
    onAppear: V(!0),
    onLeave(M, B) {
      M._isLeaving = !0;
      const N = () => A(M, B);
      so(M, f), M._enterCancelled ? (so(M, h), Ry()) : (Ry(), so(M, h)), hS(() => {
        M._isLeaving && (Ts(M, f), so(M, g), mS(E) || _S(M, a, b, N));
      }), Tl(E, [M, N]);
    },
    onEnterCancelled(M) {
      T(M, !1, void 0, !0), Tl(S, [M]);
    },
    onAppearCancelled(M) {
      T(M, !0, void 0, !0), Tl(O, [M]);
    },
    onLeaveCancelled(M) {
      A(M), Tl(C, [M]);
    }
  });
}
function EN(e) {
  if (e == null)
    return null;
  if (qn(e))
    return [Og(e.enter), Og(e.leave)];
  {
    const t = Og(e);
    return [t, t];
  }
}
function Og(e) {
  return WL(e);
}
function so(e, t) {
  t.split(/\s+/).forEach((n) => n && e.classList.add(n)), (e[ku] || (e[ku] = /* @__PURE__ */ new Set())).add(t);
}
function Ts(e, t) {
  t.split(/\s+/).forEach((a) => a && e.classList.remove(a));
  const n = e[ku];
  n && (n.delete(t), n.size || (e[ku] = void 0));
}
function hS(e) {
  requestAnimationFrame(() => {
    requestAnimationFrame(e);
  });
}
let PN = 0;
function _S(e, t, n, a) {
  const r = e._endId = ++PN, i = () => {
    r === e._endId && a();
  };
  if (n != null)
    return setTimeout(i, n);
  const { type: o, timeout: l, propCount: s } = uT(e, t);
  if (!o)
    return a();
  const d = o + "end";
  let u = 0;
  const f = () => {
    e.removeEventListener(d, h), i();
  }, h = (g) => {
    g.target === e && ++u >= s && f();
  };
  setTimeout(() => {
    u < s && f();
  }, l + 1), e.addEventListener(d, h);
}
function uT(e, t) {
  const n = window.getComputedStyle(e), a = (v) => (n[v] || "").split(", "), r = a(`${Cs}Delay`), i = a(`${Cs}Duration`), o = pS(r, i), l = a(`${Vd}Delay`), s = a(`${Vd}Duration`), d = pS(l, s);
  let u = null, f = 0, h = 0;
  t === Cs ? o > 0 && (u = Cs, f = o, h = i.length) : t === Vd ? d > 0 && (u = Vd, f = d, h = s.length) : (f = Math.max(o, d), u = f > 0 ? o > d ? Cs : Vd : null, h = u ? u === Cs ? i.length : s.length : 0);
  const g = u === Cs && /\b(transform|all)(,|$)/.test(
    a(`${Cs}Property`).toString()
  );
  return {
    type: u,
    timeout: f,
    propCount: h,
    hasTransform: g
  };
}
function pS(e, t) {
  for (; e.length < t.length; )
    e = e.concat(e);
  return Math.max(...t.map((n, a) => vS(n) + vS(e[a])));
}
function vS(e) {
  return e === "auto" ? 0 : Number(e.slice(0, -1).replace(",", ".")) * 1e3;
}
function Ry() {
  return document.body.offsetHeight;
}
function ON(e, t, n) {
  const a = e[ku];
  a && (t = (t ? [t, ...a] : [...a]).join(" ")), t == null ? e.removeAttribute("class") : n ? e.setAttribute("class", t) : e.className = t;
}
const h_ = Symbol("_vod"), dT = Symbol("_vsh"), _a = {
  beforeMount(e, { value: t }, { transition: n }) {
    e[h_] = e.style.display === "none" ? "" : e.style.display, n && t ? n.beforeEnter(e) : Md(e, t);
  },
  mounted(e, { value: t }, { transition: n }) {
    n && t && n.enter(e);
  },
  updated(e, { value: t, oldValue: n }, { transition: a }) {
    !t != !n && (a ? t ? (a.beforeEnter(e), Md(e, !0), a.enter(e)) : a.leave(e, () => {
      Md(e, !1);
    }) : Md(e, t));
  },
  beforeUnmount(e, { value: t }) {
    Md(e, t);
  }
};
function Md(e, t) {
  e.style.display = t ? e[h_] : "none", e[dT] = !t;
}
const DN = Symbol(""), BN = /(^|;)\s*display\s*:/;
function VN(e, t, n) {
  const a = e.style, r = sa(n);
  let i = !1;
  if (n && !r) {
    if (t)
      if (sa(t))
        for (const o of t.split(";")) {
          const l = o.slice(0, o.indexOf(":")).trim();
          n[l] == null && Yh(a, l, "");
        }
      else
        for (const o in t)
          n[o] == null && Yh(a, o, "");
    for (const o in n)
      o === "display" && (i = !0), Yh(a, o, n[o]);
  } else if (r) {
    if (t !== n) {
      const o = a[DN];
      o && (n += ";" + o), a.cssText = n, i = BN.test(n);
    }
  } else t && e.removeAttribute("style");
  h_ in e && (e[h_] = i ? a.display : "", e[dT] && (a.display = "none"));
}
const gS = /\s*!important$/;
function Yh(e, t, n) {
  if (Lt(n))
    n.forEach((a) => Yh(e, t, a));
  else if (n == null && (n = ""), t.startsWith("--"))
    e.setProperty(t, n);
  else {
    const a = MN(e, t);
    gS.test(n) ? e.setProperty(
      el(a),
      n.replace(gS, ""),
      "important"
    ) : e[a] = n;
  }
}
const yS = ["Webkit", "Moz", "ms"], Dg = {};
function MN(e, t) {
  const n = Dg[t];
  if (n)
    return n;
  let a = Nr(t);
  if (a !== "filter" && a in e)
    return Dg[t] = a;
  a = So(a);
  for (let r = 0; r < yS.length; r++) {
    const i = yS[r] + a;
    if (i in e)
      return Dg[t] = i;
  }
  return t;
}
const bS = "http://www.w3.org/1999/xlink";
function wS(e, t, n, a, r, i = JL(t)) {
  a && t.startsWith("xlink:") ? n == null ? e.removeAttributeNS(bS, t.slice(6, t.length)) : e.setAttributeNS(bS, t, n) : n == null || i && !QA(n) ? e.removeAttribute(t) : e.setAttribute(
    t,
    i ? "" : ss(n) ? String(n) : n
  );
}
function kS(e, t, n, a, r) {
  if (t === "innerHTML" || t === "textContent") {
    n != null && (e[t] = t === "innerHTML" ? oT(n) : n);
    return;
  }
  const i = e.tagName;
  if (t === "value" && i !== "PROGRESS" && // custom elements may use _value internally
  !i.includes("-")) {
    const l = i === "OPTION" ? e.getAttribute("value") || "" : e.value, s = n == null ? (
      // #11647: value should be set as empty string for null and undefined,
      // but <input type="checkbox"> should be set as 'on'.
      e.type === "checkbox" ? "on" : ""
    ) : String(n);
    (l !== s || !("_value" in e)) && (e.value = s), n == null && e.removeAttribute(t), e._value = n;
    return;
  }
  let o = !1;
  if (n === "" || n == null) {
    const l = typeof e[t];
    l === "boolean" ? n = QA(n) : n == null && l === "string" ? (n = "", o = !0) : l === "number" && (n = 0, o = !0);
  }
  try {
    e[t] = n;
  } catch {
  }
  o && e.removeAttribute(r || t);
}
function eu(e, t, n, a) {
  e.addEventListener(t, n, a);
}
function RN(e, t, n, a) {
  e.removeEventListener(t, n, a);
}
const SS = Symbol("_vei");
function LN(e, t, n, a, r = null) {
  const i = e[SS] || (e[SS] = {}), o = i[t];
  if (a && o)
    o.value = a;
  else {
    const [l, s] = FN(t);
    if (a) {
      const d = i[t] = $N(
        a,
        r
      );
      eu(e, l, d, s);
    } else o && (RN(e, l, o, s), i[t] = void 0);
  }
}
const CS = /(?:Once|Passive|Capture)$/;
function FN(e) {
  let t;
  if (CS.test(e)) {
    t = {};
    let a;
    for (; a = e.match(CS); )
      e = e.slice(0, e.length - a[0].length), t[a[0].toLowerCase()] = !0;
  }
  return [e[2] === ":" ? e.slice(3) : el(e.slice(2)), t];
}
let Bg = 0;
const NN = /* @__PURE__ */ Promise.resolve(), UN = () => Bg || (NN.then(() => Bg = 0), Bg = Date.now());
function $N(e, t) {
  const n = (a) => {
    if (!a._vts)
      a._vts = Date.now();
    else if (a._vts <= n.attached)
      return;
    zi(
      qN(a, n.value),
      t,
      5,
      [a]
    );
  };
  return n.value = e, n.attached = UN(), n;
}
function qN(e, t) {
  if (Lt(t)) {
    const n = e.stopImmediatePropagation;
    return e.stopImmediatePropagation = () => {
      n.call(e), e._stopped = !0;
    }, t.map(
      (a) => (r) => !r._stopped && a && a(r)
    );
  } else
    return t;
}
const AS = (e) => e.charCodeAt(0) === 111 && e.charCodeAt(1) === 110 && // lowercase letter
e.charCodeAt(2) > 96 && e.charCodeAt(2) < 123, HN = (e, t, n, a, r, i) => {
  const o = r === "svg";
  t === "class" ? ON(e, a, o) : t === "style" ? VN(e, n, a) : G_(t) ? Xb(t) || LN(e, t, n, a, i) : (t[0] === "." ? (t = t.slice(1), !0) : t[0] === "^" ? (t = t.slice(1), !1) : zN(e, t, a, o)) ? (kS(e, t, a), !e.tagName.includes("-") && (t === "value" || t === "checked" || t === "selected") && wS(e, t, a, o, i, t !== "value")) : /* #11081 force set props for possible async custom element */ e._isVueCE && (/[A-Z]/.test(t) || !sa(a)) ? kS(e, Nr(t), a, i, t) : (t === "true-value" ? e._trueValue = a : t === "false-value" && (e._falseValue = a), wS(e, t, a, o));
};
function zN(e, t, n, a) {
  if (a)
    return !!(t === "innerHTML" || t === "textContent" || t in e && AS(t) && Yt(n));
  if (t === "spellcheck" || t === "draggable" || t === "translate" || t === "autocorrect" || t === "form" || t === "list" && e.tagName === "INPUT" || t === "type" && e.tagName === "TEXTAREA")
    return !1;
  if (t === "width" || t === "height") {
    const r = e.tagName;
    if (r === "IMG" || r === "VIDEO" || r === "CANVAS" || r === "SOURCE")
      return !1;
  }
  return AS(t) && sa(n) ? !1 : t in e;
}
const fT = /* @__PURE__ */ new WeakMap(), mT = /* @__PURE__ */ new WeakMap(), p_ = Symbol("_moveCb"), xS = Symbol("_enterCb"), WN = (e) => (delete e.props.mode, e), jN = /* @__PURE__ */ WN({
  name: "TransitionGroup",
  props: /* @__PURE__ */ Ya({}, lT, {
    tag: String,
    moveClass: String
  }),
  setup(e, { slots: t }) {
    const n = cs(), a = Ex();
    let r, i;
    return fw(() => {
      if (!r.length)
        return;
      const o = e.moveClass || `${e.name || "v"}-move`;
      if (!QN(
        r[0].el,
        n.vnode.el,
        o
      )) {
        r = [];
        return;
      }
      r.forEach(KN), r.forEach(YN);
      const l = r.filter(GN);
      Ry(), l.forEach((s) => {
        const d = s.el, u = d.style;
        so(d, o), u.transform = u.webkitTransform = u.transitionDuration = "";
        const f = d[p_] = (h) => {
          h && h.target !== d || (!h || /transform$/.test(h.propertyName)) && (d.removeEventListener("transitionend", f), d[p_] = null, Ts(d, o));
        };
        d.addEventListener("transitionend", f);
      }), r = [];
    }), () => {
      const o = Ot(e), l = cT(o);
      let s = o.tag || Qe;
      if (r = [], i)
        for (let d = 0; d < i.length; d++) {
          const u = i[d];
          u.el && u.el instanceof Element && (r.push(u), Ql(
            u,
            uf(
              u,
              l,
              a,
              n
            )
          ), fT.set(
            u,
            u.el.getBoundingClientRect()
          ));
        }
      i = t.default ? cw(t.default()) : [];
      for (let d = 0; d < i.length; d++) {
        const u = i[d];
        u.key != null && Ql(
          u,
          uf(u, l, a, n)
        );
      }
      return _(s, null, i);
    };
  }
}), bw = jN;
function KN(e) {
  const t = e.el;
  t[p_] && t[p_](), t[xS] && t[xS]();
}
function YN(e) {
  mT.set(e, e.el.getBoundingClientRect());
}
function GN(e) {
  const t = fT.get(e), n = mT.get(e), a = t.left - n.left, r = t.top - n.top;
  if (a || r) {
    const i = e.el.style;
    return i.transform = i.webkitTransform = `translate(${a}px,${r}px)`, i.transitionDuration = "0s", e;
  }
}
function QN(e, t, n) {
  const a = e.cloneNode(), r = e[ku];
  r && r.forEach((l) => {
    l.split(/\s+/).forEach((s) => s && a.classList.remove(s));
  }), n.split(/\s+/).forEach((l) => l && a.classList.add(l)), a.style.display = "none";
  const i = t.nodeType === 1 ? t : t.parentNode;
  i.appendChild(a);
  const { hasTransform: o } = uT(a);
  return i.removeChild(a), o;
}
const TS = (e) => {
  const t = e.props["onUpdate:modelValue"] || !1;
  return Lt(t) ? (n) => Wh(t, n) : t;
};
function JN(e) {
  e.target.composing = !0;
}
function IS(e) {
  const t = e.target;
  t.composing && (t.composing = !1, t.dispatchEvent(new Event("input")));
}
const Vg = Symbol("_assign"), XN = {
  created(e, { modifiers: { lazy: t, trim: n, number: a } }, r) {
    e[Vg] = TS(r);
    const i = a || r.props && r.props.type === "number";
    eu(e, t ? "change" : "input", (o) => {
      if (o.target.composing) return;
      let l = e.value;
      n && (l = l.trim()), i && (l = Ay(l)), e[Vg](l);
    }), n && eu(e, "change", () => {
      e.value = e.value.trim();
    }), t || (eu(e, "compositionstart", JN), eu(e, "compositionend", IS), eu(e, "change", IS));
  },
  // set value on mounted so it's after min/max for type="range"
  mounted(e, { value: t }) {
    e.value = t ?? "";
  },
  beforeUpdate(e, { value: t, oldValue: n, modifiers: { lazy: a, trim: r, number: i } }, o) {
    if (e[Vg] = TS(o), e.composing) return;
    const l = (i || e.type === "number") && !/^0\d/.test(e.value) ? Ay(e.value) : e.value, s = t ?? "";
    l !== s && (document.activeElement === e && e.type !== "range" && (a && t === n || r && e.value.trim() === s) || (e.value = s));
  }
}, ZN = ["ctrl", "shift", "alt", "meta"], e3 = {
  stop: (e) => e.stopPropagation(),
  prevent: (e) => e.preventDefault(),
  self: (e) => e.target !== e.currentTarget,
  ctrl: (e) => !e.ctrlKey,
  shift: (e) => !e.shiftKey,
  alt: (e) => !e.altKey,
  meta: (e) => !e.metaKey,
  left: (e) => "button" in e && e.button !== 0,
  middle: (e) => "button" in e && e.button !== 1,
  right: (e) => "button" in e && e.button !== 2,
  exact: (e, t) => ZN.some((n) => e[`${n}Key`] && !t.includes(n))
}, ia = (e, t) => {
  const n = e._withMods || (e._withMods = {}), a = t.join(".");
  return n[a] || (n[a] = (r, ...i) => {
    for (let o = 0; o < t.length; o++) {
      const l = e3[t[o]];
      if (l && l(r, t)) return;
    }
    return e(r, ...i);
  });
}, t3 = {
  esc: "escape",
  space: " ",
  up: "arrow-up",
  left: "arrow-left",
  right: "arrow-right",
  down: "arrow-down",
  delete: "backspace"
}, Rl = (e, t) => {
  const n = e._withKeys || (e._withKeys = {}), a = t.join(".");
  return n[a] || (n[a] = (r) => {
    if (!("key" in r))
      return;
    const i = el(r.key);
    if (t.some(
      (o) => o === i || t3[o] === i
    ))
      return e(r);
  });
}, n3 = /* @__PURE__ */ Ya({ patchProp: HN }, TN);
let ES;
function hT() {
  return ES || (ES = eN(n3));
}
const v_ = (...e) => {
  hT().render(...e);
}, a3 = (...e) => {
  const t = hT().createApp(...e), { mount: n } = t;
  return t.mount = (a) => {
    const r = i3(a);
    if (!r) return;
    const i = t._component;
    !Yt(i) && !i.render && !i.template && (i.template = r.innerHTML), r.nodeType === 1 && (r.textContent = "");
    const o = n(r, !1, r3(r));
    return r instanceof Element && (r.removeAttribute("v-cloak"), r.setAttribute("data-v-app", "")), o;
  }, t;
};
function r3(e) {
  if (e instanceof SVGElement)
    return "svg";
  if (typeof MathMLElement == "function" && e instanceof MathMLElement)
    return "mathml";
}
function i3(e) {
  return sa(e) ? document.querySelector(e) : e;
}
function Fr(e, t) {
  let n;
  function a() {
    n = bu(), n.run(() => t.length ? t(() => {
      n?.stop(), a();
    }) : t());
  }
  nt(e, (r) => {
    r && !n ? a() : r || (n?.stop(), n = void 0);
  }, {
    immediate: !0
  }), qa(() => {
    n?.stop();
  });
}
const vn = typeof window < "u", ww = vn && "IntersectionObserver" in window, o3 = vn && ("ontouchstart" in window || window.navigator.maxTouchPoints > 0), PS = vn && "EyeDropper" in window;
function OS(e, t, n) {
  s3(e, t), t.set(e, n);
}
function s3(e, t) {
  if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object");
}
function DS(e, t, n) {
  return e.set(_T(e, t), n), n;
}
function Uo(e, t) {
  return e.get(_T(e, t));
}
function _T(e, t, n) {
  if (typeof e == "function" ? e === t : e.has(t)) return arguments.length < 3 ? t : n;
  throw new TypeError("Private element is not present on this object");
}
function pT(e, t, n) {
  const a = t.length - 1;
  if (a < 0) return e === void 0 ? n : e;
  for (let r = 0; r < a; r++) {
    if (e == null)
      return n;
    e = e[t[r]];
  }
  return e == null || e[t[a]] === void 0 ? n : e[t[a]];
}
function fr(e, t) {
  if (e === t) return !0;
  if (e instanceof Date && t instanceof Date && e.getTime() !== t.getTime() || e !== Object(e) || t !== Object(t))
    return !1;
  const n = Object.keys(e);
  return n.length !== Object.keys(t).length ? !1 : n.every((a) => fr(e[a], t[a]));
}
function Jl(e, t, n) {
  return e == null || !t || typeof t != "string" ? n : e[t] !== void 0 ? e[t] : (t = t.replace(/\[(\w+)\]/g, ".$1"), t = t.replace(/^\./, ""), pT(e, t.split("."), n));
}
function Da(e, t, n) {
  if (t === !0) return e === void 0 ? n : e;
  if (t == null || typeof t == "boolean") return n;
  if (e !== Object(e)) {
    if (typeof t != "function") return n;
    const r = t(e, n);
    return typeof r > "u" ? n : r;
  }
  if (typeof t == "string") return Jl(e, t, n);
  if (Array.isArray(t)) return pT(e, t, n);
  if (typeof t != "function") return n;
  const a = t(e, n);
  return typeof a > "u" ? n : a;
}
function ho(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return Array.from({
    length: e
  }, (n, a) => t + a);
}
function ht(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "px";
  if (e == null || e === "")
    return;
  const n = Number(e);
  return isNaN(n) ? String(e) : isFinite(n) ? `${n}${t}` : void 0;
}
function mf(e) {
  return e !== null && typeof e == "object" && !Array.isArray(e);
}
function BS(e) {
  let t;
  return e !== null && typeof e == "object" && ((t = Object.getPrototypeOf(e)) === Object.prototype || t === null);
}
function kw(e) {
  if (e && "$el" in e) {
    const t = e.$el;
    return t?.nodeType === Node.TEXT_NODE ? t.nextElementSibling : t;
  }
  return e;
}
const VS = Object.freeze({
  enter: 13,
  tab: 9,
  delete: 46,
  esc: 27,
  space: 32,
  up: 38,
  down: 40,
  left: 37,
  right: 39,
  end: 35,
  home: 36,
  del: 46,
  backspace: 8,
  insert: 45,
  pageup: 33,
  pagedown: 34,
  shift: 16
}), Ly = Object.freeze({
  enter: "Enter",
  tab: "Tab",
  delete: "Delete",
  esc: "Escape",
  space: "Space",
  up: "ArrowUp",
  down: "ArrowDown",
  left: "ArrowLeft",
  right: "ArrowRight",
  end: "End",
  home: "Home",
  del: "Delete",
  backspace: "Backspace",
  insert: "Insert",
  pageup: "PageUp",
  pagedown: "PageDown",
  shift: "Shift"
});
function vT(e) {
  return Object.keys(e);
}
function Ll(e, t) {
  return t.every((n) => e.hasOwnProperty(n));
}
function tl(e, t) {
  const n = {};
  for (const a of t)
    Object.prototype.hasOwnProperty.call(e, a) && (n[a] = e[a]);
  return n;
}
function Fy(e, t, n) {
  const a = /* @__PURE__ */ Object.create(null), r = /* @__PURE__ */ Object.create(null);
  for (const i in e)
    t.some((o) => o instanceof RegExp ? o.test(i) : o === i) ? a[i] = e[i] : r[i] = e[i];
  return [a, r];
}
function la(e, t) {
  const n = {
    ...e
  };
  return t.forEach((a) => delete n[a]), n;
}
const gT = /^on[^a-z]/, Sw = (e) => gT.test(e), l3 = ["onAfterscriptexecute", "onAnimationcancel", "onAnimationend", "onAnimationiteration", "onAnimationstart", "onAuxclick", "onBeforeinput", "onBeforescriptexecute", "onChange", "onClick", "onCompositionend", "onCompositionstart", "onCompositionupdate", "onContextmenu", "onCopy", "onCut", "onDblclick", "onFocusin", "onFocusout", "onFullscreenchange", "onFullscreenerror", "onGesturechange", "onGestureend", "onGesturestart", "onGotpointercapture", "onInput", "onKeydown", "onKeypress", "onKeyup", "onLostpointercapture", "onMousedown", "onMousemove", "onMouseout", "onMouseover", "onMouseup", "onMousewheel", "onPaste", "onPointercancel", "onPointerdown", "onPointerenter", "onPointerleave", "onPointermove", "onPointerout", "onPointerover", "onPointerup", "onReset", "onSelect", "onSubmit", "onTouchcancel", "onTouchend", "onTouchmove", "onTouchstart", "onTransitioncancel", "onTransitionend", "onTransitionrun", "onTransitionstart", "onWheel"], c3 = ["ArrowUp", "ArrowDown", "ArrowRight", "ArrowLeft", "Enter", "Escape", "Tab", " "];
function u3(e) {
  return e.isComposing && c3.includes(e.key);
}
function nl(e) {
  const [t, n] = Fy(e, [gT]), a = la(t, l3), [r, i] = Fy(n, ["class", "style", "id", /^data-/]);
  return Object.assign(r, t), Object.assign(i, a), [r, i];
}
function Xn(e) {
  return e == null ? [] : Array.isArray(e) ? e : [e];
}
function d3(e, t) {
  let n = 0;
  const a = function() {
    for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++)
      i[o] = arguments[o];
    clearTimeout(n), n = setTimeout(() => e(...i), fe(t));
  };
  return a.clear = () => {
    clearTimeout(n);
  }, a.immediate = e, a;
}
function Pn(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1;
  return Math.max(t, Math.min(n, e));
}
function MS(e) {
  const t = e.toString().trim();
  return t.includes(".") ? t.length - t.indexOf(".") - 1 : 0;
}
function RS(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "0";
  return e + n.repeat(Math.max(0, t - e.length));
}
function LS(e, t) {
  return (arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "0").repeat(Math.max(0, t - e.length)) + e;
}
function f3(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  const n = [];
  let a = 0;
  for (; a < e.length; )
    n.push(e.substr(a, t)), a += t;
  return n;
}
function FS(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e3;
  if (e < t)
    return `${e} B`;
  const n = t === 1024 ? ["Ki", "Mi", "Gi"] : ["k", "M", "G"];
  let a = -1;
  for (; Math.abs(e) >= t && a < n.length - 1; )
    e /= t, ++a;
  return `${e.toFixed(1)} ${n[a]}B`;
}
function kr() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n = arguments.length > 2 ? arguments[2] : void 0;
  const a = {};
  for (const r in e)
    a[r] = e[r];
  for (const r in t) {
    const i = e[r], o = t[r];
    if (BS(i) && BS(o)) {
      a[r] = kr(i, o, n);
      continue;
    }
    if (n && Array.isArray(i) && Array.isArray(o)) {
      a[r] = n(i, o);
      continue;
    }
    a[r] = o;
  }
  return a;
}
function yT(e) {
  return e.map((t) => t.type === Qe ? yT(t.children) : t).flat();
}
function ql() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  if (ql.cache.has(e)) return ql.cache.get(e);
  const t = e.replace(/[^a-z]/gi, "-").replace(/\B([A-Z])/g, "-$1").toLowerCase();
  return ql.cache.set(e, t), t;
}
ql.cache = /* @__PURE__ */ new Map();
function au(e, t) {
  if (!t || typeof t != "object") return [];
  if (Array.isArray(t))
    return t.map((n) => au(e, n)).flat(1);
  if (t.suspense)
    return au(e, t.ssContent);
  if (Array.isArray(t.children))
    return t.children.map((n) => au(e, n)).flat(1);
  if (t.component) {
    if (Object.getOwnPropertySymbols(t.component.provides).includes(e))
      return [t.component];
    if (t.component.subTree)
      return au(e, t.component.subTree).flat(1);
  }
  return [];
}
var Wc = /* @__PURE__ */ new WeakMap(), Il = /* @__PURE__ */ new WeakMap();
class bT {
  constructor(t) {
    OS(this, Wc, []), OS(this, Il, 0), this.size = t;
  }
  get isFull() {
    return Uo(Wc, this).length === this.size;
  }
  push(t) {
    Uo(Wc, this)[Uo(Il, this)] = t, DS(Il, this, (Uo(Il, this) + 1) % this.size);
  }
  values() {
    return Uo(Wc, this).slice(Uo(Il, this)).concat(Uo(Wc, this).slice(0, Uo(Il, this)));
  }
  clear() {
    Uo(Wc, this).length = 0, DS(Il, this, 0);
  }
}
function m3(e) {
  return "touches" in e ? {
    clientX: e.touches[0].clientX,
    clientY: e.touches[0].clientY
  } : {
    clientX: e.clientX,
    clientY: e.clientY
  };
}
function Cw(e) {
  const t = oa({});
  Zn(() => {
    const a = e();
    for (const r in a)
      t[r] = a[r];
  }, {
    flush: "sync"
  });
  const n = {};
  for (const a in t)
    n[a] = we(() => t[a]);
  return n;
}
function g_(e, t) {
  return e.includes(t);
}
function wT(e) {
  return e[2].toLowerCase() + e.slice(3);
}
const nr = () => [Function, Array];
function NS(e, t) {
  return t = "on" + So(t), !!(e[t] || e[`${t}Once`] || e[`${t}Capture`] || e[`${t}OnceCapture`] || e[`${t}CaptureOnce`]);
}
function ip(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), a = 1; a < t; a++)
    n[a - 1] = arguments[a];
  if (Array.isArray(e))
    for (const r of e)
      r(...n);
  else typeof e == "function" && e(...n);
}
function hf(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
  const n = ["button", "[href]", 'input:not([type="hidden"])', "select", "textarea", "[tabindex]"].map((a) => `${a}${t ? ':not([tabindex="-1"])' : ""}:not([disabled])`).join(", ");
  return [...e.querySelectorAll(n)];
}
function kT(e, t, n) {
  let a, r = e.indexOf(document.activeElement);
  const i = t === "next" ? 1 : -1;
  do
    r += i, a = e[r];
  while ((!a || a.offsetParent == null || !(n?.(a) ?? !0)) && r < e.length && r >= 0);
  return a;
}
function Hl(e, t) {
  const n = hf(e);
  if (t == null)
    (e === document.activeElement || !e.contains(document.activeElement)) && n[0]?.focus();
  else if (t === "first")
    n[0]?.focus();
  else if (t === "last")
    n.at(-1)?.focus();
  else if (typeof t == "number")
    n[t]?.focus();
  else {
    const a = kT(n, t);
    a ? a.focus() : Hl(e, t === "next" ? "first" : "last");
  }
}
function kh(e) {
  return e == null || typeof e == "string" && e.trim() === "";
}
function ST() {
}
function Su(e, t) {
  if (!(vn && typeof CSS < "u" && typeof CSS.supports < "u" && CSS.supports(`selector(${t})`))) return null;
  try {
    return !!e && e.matches(t);
  } catch {
    return null;
  }
}
function op(e) {
  return e.some((t) => wu(t) ? t.type === cr ? !1 : t.type !== Qe || op(t.children) : !0) ? e : null;
}
function h3(e, t) {
  if (!vn || e === 0)
    return t(), () => {
    };
  const n = window.setTimeout(t, e);
  return () => window.clearTimeout(n);
}
function _3(e, t) {
  const n = e.clientX, a = e.clientY, r = t.getBoundingClientRect(), i = r.left, o = r.top, l = r.right, s = r.bottom;
  return n >= i && n <= l && a >= o && a <= s;
}
function y_() {
  const e = ot(), t = (n) => {
    e.value = n;
  };
  return Object.defineProperty(t, "value", {
    enumerable: !0,
    get: () => e.value,
    set: (n) => e.value = n
  }), Object.defineProperty(t, "el", {
    enumerable: !0,
    get: () => kw(e.value)
  }), t;
}
function Cu(e) {
  const t = e.key.length === 1, n = !e.ctrlKey && !e.metaKey && !e.altKey;
  return t && n;
}
function CT(e) {
  return typeof e == "string" || typeof e == "number" || typeof e == "boolean" || typeof e == "bigint";
}
function p3(e, t) {
  const n = e.split("").filter((a) => /[\d\-.]/.test(a)).filter((a, r, i) => r === 0 && /[-]/.test(a) || // sign allowed at the start
  a === "." && r === i.indexOf(".") || // decimal separator allowed only once
  /\d/.test(a)).join("");
  if (t === 0)
    return n.split(".")[0];
  if (t !== null && /\.\d/.test(n)) {
    const a = n.split(".");
    return [a[0], a[1].substring(0, t)].join(".");
  }
  return n;
}
function v3(e) {
  const t = {};
  for (const n in e)
    t[Nr(n)] = e[n];
  return t;
}
function g3(e) {
  const t = ["checked", "disabled"];
  return Object.fromEntries(Object.entries(e).filter((n) => {
    let [a, r] = n;
    return t.includes(a) ? !!r : r !== void 0;
  }));
}
const AT = ["top", "bottom"], y3 = ["start", "end", "left", "right"];
function Ny(e, t) {
  let [n, a] = e.split(" ");
  return a || (a = g_(AT, n) ? "start" : g_(y3, n) ? "top" : "center"), {
    side: Uy(n, t),
    align: Uy(a, t)
  };
}
function Uy(e, t) {
  return e === "start" ? t ? "right" : "left" : e === "end" ? t ? "left" : "right" : e;
}
function Mg(e) {
  return {
    side: {
      center: "center",
      top: "bottom",
      bottom: "top",
      left: "right",
      right: "left"
    }[e.side],
    align: e.align
  };
}
function Rg(e) {
  return {
    side: e.side,
    align: {
      center: "center",
      top: "bottom",
      bottom: "top",
      left: "right",
      right: "left"
    }[e.align]
  };
}
function US(e) {
  return {
    side: e.align,
    align: e.side
  };
}
function $S(e) {
  return g_(AT, e.side) ? "y" : "x";
}
class vo {
  constructor(t) {
    let {
      x: n,
      y: a,
      width: r,
      height: i
    } = t;
    this.x = n, this.y = a, this.width = r, this.height = i;
  }
  get top() {
    return this.y;
  }
  get bottom() {
    return this.y + this.height;
  }
  get left() {
    return this.x;
  }
  get right() {
    return this.x + this.width;
  }
}
function qS(e, t) {
  return {
    x: {
      before: Math.max(0, t.left - e.left),
      after: Math.max(0, e.right - t.right)
    },
    y: {
      before: Math.max(0, t.top - e.top),
      after: Math.max(0, e.bottom - t.bottom)
    }
  };
}
function xT(e) {
  return Array.isArray(e) ? new vo({
    x: e[0],
    y: e[1],
    width: 0,
    height: 0
  }) : e.getBoundingClientRect();
}
function b3(e) {
  if (e === document.documentElement)
    return visualViewport ? new vo({
      x: visualViewport.scale > 1 ? 0 : visualViewport.offsetLeft,
      y: visualViewport.scale > 1 ? 0 : visualViewport.offsetTop,
      width: visualViewport.width * visualViewport.scale,
      height: visualViewport.height * visualViewport.scale
    }) : new vo({
      x: 0,
      y: 0,
      width: document.documentElement.clientWidth,
      height: document.documentElement.clientHeight
    });
  {
    const t = e.getBoundingClientRect();
    return new vo({
      x: t.x,
      y: t.y,
      width: e.clientWidth,
      height: e.clientHeight
    });
  }
}
function Aw(e) {
  const t = e.getBoundingClientRect(), n = getComputedStyle(e), a = n.transform;
  if (a) {
    let r, i, o, l, s;
    if (a.startsWith("matrix3d("))
      r = a.slice(9, -1).split(/, /), i = Number(r[0]), o = Number(r[5]), l = Number(r[12]), s = Number(r[13]);
    else if (a.startsWith("matrix("))
      r = a.slice(7, -1).split(/, /), i = Number(r[0]), o = Number(r[3]), l = Number(r[4]), s = Number(r[5]);
    else
      return new vo(t);
    const d = n.transformOrigin, u = t.x - l - (1 - i) * parseFloat(d), f = t.y - s - (1 - o) * parseFloat(d.slice(d.indexOf(" ") + 1)), h = i ? t.width / i : e.offsetWidth + 1, g = o ? t.height / o : e.offsetHeight + 1;
    return new vo({
      x: u,
      y: f,
      width: h,
      height: g
    });
  } else
    return new vo(t);
}
function Fl(e, t, n) {
  if (typeof e.animate > "u") return {
    finished: Promise.resolve()
  };
  let a;
  try {
    a = e.animate(t, n);
  } catch {
    return {
      finished: Promise.resolve()
    };
  }
  return typeof a.finished > "u" && (a.finished = new Promise((r) => {
    a.onfinish = () => {
      r(a);
    };
  })), a;
}
const Gh = /* @__PURE__ */ new WeakMap();
function w3(e, t) {
  Object.keys(t).forEach((n) => {
    if (Sw(n)) {
      const a = wT(n), r = Gh.get(e);
      if (t[n] == null)
        r?.forEach((i) => {
          const [o, l] = i;
          o === a && (e.removeEventListener(a, l), r.delete(i));
        });
      else if (!r || ![...r].some((i) => i[0] === a && i[1] === t[n])) {
        e.addEventListener(a, t[n]);
        const i = r || /* @__PURE__ */ new Set();
        i.add([a, t[n]]), Gh.has(e) || Gh.set(e, i);
      }
    } else
      t[n] == null ? e.removeAttribute(n) : e.setAttribute(n, t[n]);
  });
}
function k3(e, t) {
  Object.keys(t).forEach((n) => {
    if (Sw(n)) {
      const a = wT(n), r = Gh.get(e);
      r?.forEach((i) => {
        const [o, l] = i;
        o === a && (e.removeEventListener(a, l), r.delete(i));
      });
    } else
      e.removeAttribute(n);
  });
}
const jc = 2.4, HS = 0.2126729, zS = 0.7151522, WS = 0.072175, S3 = 0.55, C3 = 0.58, A3 = 0.57, x3 = 0.62, Sh = 0.03, jS = 1.45, T3 = 5e-4, I3 = 1.25, E3 = 1.25, KS = 0.078, YS = 12.82051282051282, Ch = 0.06, GS = 1e-3;
function QS(e, t) {
  const n = (e.r / 255) ** jc, a = (e.g / 255) ** jc, r = (e.b / 255) ** jc, i = (t.r / 255) ** jc, o = (t.g / 255) ** jc, l = (t.b / 255) ** jc;
  let s = n * HS + a * zS + r * WS, d = i * HS + o * zS + l * WS;
  if (s <= Sh && (s += (Sh - s) ** jS), d <= Sh && (d += (Sh - d) ** jS), Math.abs(d - s) < T3) return 0;
  let u;
  if (d > s) {
    const f = (d ** S3 - s ** C3) * I3;
    u = f < GS ? 0 : f < KS ? f - f * YS * Ch : f - Ch;
  } else {
    const f = (d ** x3 - s ** A3) * E3;
    u = f > -GS ? 0 : f > -KS ? f - f * YS * Ch : f + Ch;
  }
  return u * 100;
}
function P3(e, t) {
  t = Array.isArray(t) ? t.slice(0, -1).map((n) => `'${n}'`).join(", ") + ` or '${t.at(-1)}'` : `'${t}'`;
}
const b_ = 0.20689655172413793, O3 = (e) => e > b_ ** 3 ? Math.cbrt(e) : e / (3 * b_ ** 2) + 4 / 29, D3 = (e) => e > b_ ? e ** 3 : 3 * b_ ** 2 * (e - 4 / 29);
function TT(e) {
  const t = O3, n = t(e[1]);
  return [116 * n - 16, 500 * (t(e[0] / 0.95047) - n), 200 * (n - t(e[2] / 1.08883))];
}
function IT(e) {
  const t = D3, n = (e[0] + 16) / 116;
  return [t(n + e[1] / 500) * 0.95047, t(n), t(n - e[2] / 200) * 1.08883];
}
const B3 = [[3.2406, -1.5372, -0.4986], [-0.9689, 1.8758, 0.0415], [0.0557, -0.204, 1.057]], V3 = (e) => e <= 31308e-7 ? e * 12.92 : 1.055 * e ** (1 / 2.4) - 0.055, M3 = [[0.4124, 0.3576, 0.1805], [0.2126, 0.7152, 0.0722], [0.0193, 0.1192, 0.9505]], R3 = (e) => e <= 0.04045 ? e / 12.92 : ((e + 0.055) / 1.055) ** 2.4;
function ET(e) {
  const t = Array(3), n = V3, a = B3;
  for (let r = 0; r < 3; ++r)
    t[r] = Math.round(Pn(n(a[r][0] * e[0] + a[r][1] * e[1] + a[r][2] * e[2])) * 255);
  return {
    r: t[0],
    g: t[1],
    b: t[2]
  };
}
function xw(e) {
  let {
    r: t,
    g: n,
    b: a
  } = e;
  const r = [0, 0, 0], i = R3, o = M3;
  t = i(t / 255), n = i(n / 255), a = i(a / 255);
  for (let l = 0; l < 3; ++l)
    r[l] = o[l][0] * t + o[l][1] * n + o[l][2] * a;
  return r;
}
function $y(e) {
  return !!e && /^(#|var\(--|(rgb|hsl)a?\()/.test(e);
}
function L3(e) {
  return $y(e) && !/^((rgb|hsl)a?\()?var\(--/.test(e);
}
const JS = /^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/, F3 = {
  rgb: (e, t, n, a) => ({
    r: e,
    g: t,
    b: n,
    a
  }),
  rgba: (e, t, n, a) => ({
    r: e,
    g: t,
    b: n,
    a
  }),
  hsl: (e, t, n, a) => XS({
    h: e,
    s: t,
    l: n,
    a
  }),
  hsla: (e, t, n, a) => XS({
    h: e,
    s: t,
    l: n,
    a
  }),
  hsv: (e, t, n, a) => bo({
    h: e,
    s: t,
    v: n,
    a
  }),
  hsva: (e, t, n, a) => bo({
    h: e,
    s: t,
    v: n,
    a
  })
};
function si(e) {
  if (typeof e == "number")
    return {
      r: (e & 16711680) >> 16,
      g: (e & 65280) >> 8,
      b: e & 255
    };
  if (typeof e == "string" && JS.test(e)) {
    const {
      groups: t
    } = e.match(JS), {
      fn: n,
      values: a
    } = t, r = a.split(/,\s*|\s*\/\s*|\s+/).map((i, o) => i.endsWith("%") || // unitless slv are %
    o > 0 && o < 3 && ["hsl", "hsla", "hsv", "hsva"].includes(n) ? parseFloat(i) / 100 : parseFloat(i));
    return F3[n](...r);
  } else if (typeof e == "string") {
    let t = e.startsWith("#") ? e.slice(1) : e;
    return [3, 4].includes(t.length) ? t = t.split("").map((n) => n + n).join("") : [6, 8].includes(t.length), BT(t);
  } else if (typeof e == "object") {
    if (Ll(e, ["r", "g", "b"]))
      return e;
    if (Ll(e, ["h", "s", "l"]))
      return bo(Tw(e));
    if (Ll(e, ["h", "s", "v"]))
      return bo(e);
  }
  throw new TypeError(`Invalid color: ${e == null ? e : String(e) || e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`);
}
function bo(e) {
  const {
    h: t,
    s: n,
    v: a,
    a: r
  } = e, i = (l) => {
    const s = (l + t / 60) % 6;
    return a - a * n * Math.max(Math.min(s, 4 - s, 1), 0);
  }, o = [i(5), i(3), i(1)].map((l) => Math.round(l * 255));
  return {
    r: o[0],
    g: o[1],
    b: o[2],
    a: r
  };
}
function XS(e) {
  return bo(Tw(e));
}
function Ff(e) {
  if (!e) return {
    h: 0,
    s: 1,
    v: 1,
    a: 1
  };
  const t = e.r / 255, n = e.g / 255, a = e.b / 255, r = Math.max(t, n, a), i = Math.min(t, n, a);
  let o = 0;
  r !== i && (r === t ? o = 60 * (0 + (n - a) / (r - i)) : r === n ? o = 60 * (2 + (a - t) / (r - i)) : r === a && (o = 60 * (4 + (t - n) / (r - i)))), o < 0 && (o = o + 360);
  const l = r === 0 ? 0 : (r - i) / r, s = [o, l, r];
  return {
    h: s[0],
    s: s[1],
    v: s[2],
    a: e.a
  };
}
function qy(e) {
  const {
    h: t,
    s: n,
    v: a,
    a: r
  } = e, i = a - a * n / 2, o = i === 1 || i === 0 ? 0 : (a - i) / Math.min(i, 1 - i);
  return {
    h: t,
    s: o,
    l: i,
    a: r
  };
}
function Tw(e) {
  const {
    h: t,
    s: n,
    l: a,
    a: r
  } = e, i = a + n * Math.min(a, 1 - a), o = i === 0 ? 0 : 2 - 2 * a / i;
  return {
    h: t,
    s: o,
    v: i,
    a: r
  };
}
function PT(e) {
  let {
    r: t,
    g: n,
    b: a,
    a: r
  } = e;
  return r === void 0 ? `rgb(${t}, ${n}, ${a})` : `rgba(${t}, ${n}, ${a}, ${r})`;
}
function OT(e) {
  return PT(bo(e));
}
function Ah(e) {
  const t = Math.round(e).toString(16);
  return ("00".substr(0, 2 - t.length) + t).toUpperCase();
}
function DT(e) {
  let {
    r: t,
    g: n,
    b: a,
    a: r
  } = e;
  return `#${[Ah(t), Ah(n), Ah(a), r !== void 0 ? Ah(Math.round(r * 255)) : ""].join("")}`;
}
function BT(e) {
  e = U3(e);
  let [t, n, a, r] = f3(e, 2).map((i) => parseInt(i, 16));
  return r = r === void 0 ? r : r / 255, {
    r: t,
    g: n,
    b: a,
    a: r
  };
}
function N3(e) {
  const t = BT(e);
  return Ff(t);
}
function VT(e) {
  return DT(bo(e));
}
function U3(e) {
  return e.startsWith("#") && (e = e.slice(1)), e = e.replace(/([^0-9a-f])/gi, "F"), (e.length === 3 || e.length === 4) && (e = e.split("").map((t) => t + t).join("")), e.length !== 6 && (e = RS(RS(e, 6), 8, "F")), e;
}
function $3(e, t) {
  const n = TT(xw(e));
  return n[0] = n[0] + t * 10, ET(IT(n));
}
function q3(e, t) {
  const n = TT(xw(e));
  return n[0] = n[0] - t * 10, ET(IT(n));
}
function Hy(e) {
  const t = si(e);
  return xw(t)[1];
}
function H3(e, t) {
  const n = Hy(e), a = Hy(t), r = Math.max(n, a), i = Math.min(n, a);
  return (r + 0.05) / (i + 0.05);
}
function MT(e) {
  const t = Math.abs(QS(si(0), si(e)));
  return Math.abs(QS(si(16777215), si(e))) > Math.min(t, 50) ? "#fff" : "#000";
}
function Be(e, t) {
  return (n) => Object.keys(e).reduce((a, r) => {
    const o = typeof e[r] == "object" && e[r] != null && !Array.isArray(e[r]) ? e[r] : {
      type: e[r]
    };
    return n && r in n ? a[r] = {
      ...o,
      default: n[r]
    } : a[r] = o, t && !a[r].source && (a[r].source = t), a;
  }, {});
}
const vt = Be({
  class: [String, Array, Object],
  style: {
    type: [String, Array, Object],
    default: null
  }
}, "component");
function ya(e, t) {
  const n = cs();
  if (!n)
    throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);
  return n;
}
function Ao() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "composables";
  const t = ya(e).type;
  return ql(t?.aliasName || t?.name);
}
function z3(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : ya("injectSelf");
  const {
    provides: n
  } = t;
  if (n && e in n)
    return n[e];
}
const Au = Symbol.for("vuetify:defaults");
function W3(e) {
  return Se(e);
}
function Iw() {
  const e = Gt(Au);
  if (!e) throw new Error("[Vuetify] Could not find defaults instance");
  return e;
}
function ca(e, t) {
  const n = Iw(), a = Se(e), r = W(() => {
    if (fe(t?.disabled)) return n.value;
    const o = fe(t?.scoped), l = fe(t?.reset), s = fe(t?.root);
    if (a.value == null && !(o || l || s)) return n.value;
    let d = kr(a.value, {
      prev: n.value
    });
    if (o) return d;
    if (l || s) {
      const u = Number(l || 1 / 0);
      for (let f = 0; f <= u && !(!d || !("prev" in d)); f++)
        d = d.prev;
      return d && typeof s == "string" && s in d && (d = kr(kr(d, {
        prev: d
      }), d[s])), d;
    }
    return d.prev ? kr(d.prev, d) : d;
  });
  return Nn(Au, r), r;
}
function j3(e, t) {
  return e.props && (typeof e.props[t] < "u" || typeof e.props[ql(t)] < "u");
}
function K3() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 ? arguments[1] : void 0, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Iw();
  const a = ya("useDefaults");
  if (t = t ?? a.type.name ?? a.type.__name, !t)
    throw new Error("[Vuetify] Could not determine component name");
  const r = W(() => n.value?.[e._as ?? t]), i = new Proxy(e, {
    get(s, d) {
      const u = Reflect.get(s, d);
      if (d === "class" || d === "style")
        return [r.value?.[d], u].filter((g) => g != null);
      if (j3(a.vnode, d)) return u;
      const f = r.value?.[d];
      if (f !== void 0) return f;
      const h = n.value?.global?.[d];
      return h !== void 0 ? h : u;
    }
  }), o = ot();
  Zn(() => {
    if (r.value) {
      const s = Object.entries(r.value).filter((d) => {
        let [u] = d;
        return u.startsWith(u[0].toUpperCase());
      });
      o.value = s.length ? Object.fromEntries(s) : void 0;
    } else
      o.value = void 0;
  });
  function l() {
    const s = z3(Au, a);
    Nn(Au, W(() => o.value ? kr(s?.value ?? {}, o.value) : s?.value));
  }
  return {
    props: i,
    provideSubDefaults: l
  };
}
function fi(e) {
  if (e._setup = e._setup ?? e.setup, !e.name)
    return e;
  if (e._setup) {
    e.props = Be(e.props ?? {}, e.name)();
    const t = Object.keys(e.props).filter((n) => n !== "class" && n !== "style");
    e.filterProps = function(a) {
      return tl(a, t);
    }, e.props._as = String, e.setup = function(a, r) {
      const i = Iw();
      if (!i.value) return e._setup(a, r);
      const {
        props: o,
        provideSubDefaults: l
      } = K3(a, a._as ?? e.name, i), s = e._setup(o, r);
      return l(), s;
    };
  }
  return e;
}
function We() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
  return (t) => (e ? fi : Ha)(t);
}
function Y3(e, t) {
  return t.props = e, t;
}
function xo(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "div", n = arguments.length > 2 ? arguments[2] : void 0;
  return We()({
    name: n ?? So(Nr(e.replace(/__/g, "-"))),
    props: {
      tag: {
        type: String,
        default: t
      },
      ...vt()
    },
    setup(a, r) {
      let {
        slots: i
      } = r;
      return () => Co(a.tag, {
        class: [e, a.class],
        style: a.style
      }, i.default?.());
    }
  });
}
function RT(e) {
  if (typeof e.getRootNode != "function") {
    for (; e.parentNode; ) e = e.parentNode;
    return e !== document ? null : document;
  }
  const t = e.getRootNode();
  return t !== document && t.getRootNode({
    composed: !0
  }) !== document ? null : t;
}
const _f = "cubic-bezier(0.4, 0, 0.2, 1)", G3 = "cubic-bezier(0.0, 0, 0.2, 1)", Q3 = "cubic-bezier(0.4, 0, 1, 1)";
function ZS(e, t, n) {
  return Object.keys(e).filter((a) => Sw(a) && a.endsWith(t)).reduce((a, r) => (a[r.slice(0, -t.length)] = (i) => e[r](i, n(i)), a), {});
}
function Ew(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
  for (; e; ) {
    if (t ? J3(e) : Pw(e)) return e;
    e = e.parentElement;
  }
  return document.scrollingElement;
}
function w_(e, t) {
  const n = [];
  if (t && e && !t.contains(e)) return n;
  for (; e && (Pw(e) && n.push(e), e !== t); )
    e = e.parentElement;
  return n;
}
function Pw(e) {
  if (!e || e.nodeType !== Node.ELEMENT_NODE) return !1;
  const t = window.getComputedStyle(e);
  return t.overflowY === "scroll" || t.overflowY === "auto" && e.scrollHeight > e.clientHeight;
}
function J3(e) {
  if (!e || e.nodeType !== Node.ELEMENT_NODE) return !1;
  const t = window.getComputedStyle(e);
  return ["scroll", "auto"].includes(t.overflowY);
}
function X3(e) {
  for (; e; ) {
    if (window.getComputedStyle(e).position === "fixed")
      return !0;
    e = e.offsetParent;
  }
  return !1;
}
function Ge(e) {
  const t = ya("useRender");
  t.render = e;
}
function kt(e, t, n) {
  let a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : (f) => f, r = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : (f) => f;
  const i = ya("useProxiedModel"), o = Se(e[t] !== void 0 ? e[t] : n), l = ql(t), d = W(l !== t ? () => (e[t], !!((i.vnode.props?.hasOwnProperty(t) || i.vnode.props?.hasOwnProperty(l)) && (i.vnode.props?.hasOwnProperty(`onUpdate:${t}`) || i.vnode.props?.hasOwnProperty(`onUpdate:${l}`)))) : () => (e[t], !!(i.vnode.props?.hasOwnProperty(t) && i.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));
  Fr(() => !d.value, () => {
    nt(() => e[t], (f) => {
      o.value = f;
    });
  });
  const u = W({
    get() {
      const f = e[t];
      return a(d.value ? f : o.value);
    },
    set(f) {
      const h = r(f), g = Ot(d.value ? e[t] : o.value);
      g === h || a(g) === f || (o.value = h, i?.emit(`update:${t}`, h));
    }
  });
  return Object.defineProperty(u, "externalValue", {
    get: () => d.value ? e[t] : o.value
  }), u;
}
const Z3 = {
  badge: "Badge",
  open: "Open",
  close: "Close",
  dismiss: "Dismiss",
  confirmEdit: {
    ok: "OK",
    cancel: "Cancel"
  },
  dataIterator: {
    noResultsText: "No matching records found",
    loadingText: "Loading items..."
  },
  dataTable: {
    itemsPerPageText: "Rows per page:",
    ariaLabel: {
      sortDescending: "Sorted descending.",
      sortAscending: "Sorted ascending.",
      sortNone: "Not sorted.",
      activateNone: "Activate to remove sorting.",
      activateDescending: "Activate to sort descending.",
      activateAscending: "Activate to sort ascending."
    },
    sortBy: "Sort by"
  },
  dataFooter: {
    itemsPerPageText: "Items per page:",
    itemsPerPageAll: "All",
    nextPage: "Next page",
    prevPage: "Previous page",
    firstPage: "First page",
    lastPage: "Last page",
    pageText: "{0}-{1} of {2}"
  },
  dateRangeInput: {
    divider: "to"
  },
  datePicker: {
    itemsSelected: "{0} selected",
    range: {
      title: "Select dates",
      header: "Enter dates"
    },
    title: "Select date",
    header: "Enter date",
    input: {
      placeholder: "Enter date"
    }
  },
  noDataText: "No data available",
  carousel: {
    prev: "Previous visual",
    next: "Next visual",
    ariaLabel: {
      delimiter: "Carousel slide {0} of {1}"
    }
  },
  calendar: {
    moreEvents: "{0} more",
    today: "Today"
  },
  input: {
    clear: "Clear {0}",
    prependAction: "{0} prepended action",
    appendAction: "{0} appended action",
    otp: "Please enter OTP character {0}"
  },
  fileInput: {
    counter: "{0} files",
    counterSize: "{0} files ({1} in total)"
  },
  fileUpload: {
    title: "Drag and drop files here",
    divider: "or",
    browse: "Browse Files"
  },
  timePicker: {
    am: "AM",
    pm: "PM",
    title: "Select Time"
  },
  pagination: {
    ariaLabel: {
      root: "Pagination Navigation",
      next: "Next page",
      previous: "Previous page",
      page: "Go to page {0}",
      currentPage: "Page {0}, Current page",
      first: "First page",
      last: "Last page"
    }
  },
  stepper: {
    next: "Next",
    prev: "Previous"
  },
  rating: {
    ariaLabel: {
      item: "Rating {0} of {1}"
    }
  },
  loading: "Loading...",
  infiniteScroll: {
    loadMore: "Load more",
    empty: "No more"
  },
  rules: {
    required: "This field is required",
    email: "Please enter a valid email",
    number: "This field can only contain numbers",
    integer: "This field can only contain integer values",
    capital: "This field can only contain uppercase letters",
    maxLength: "You must enter a maximum of {0} characters",
    minLength: "You must enter a minimum of {0} characters",
    strictLength: "The length of the entered field is invalid",
    exclude: "The {0} character is not allowed",
    notEmpty: "Please choose at least one value",
    pattern: "Invalid format"
  }
}, eC = "$vuetify.", tC = (e, t) => e.replace(/\{(\d+)\}/g, (n, a) => String(t[Number(a)])), LT = (e, t, n) => function(a) {
  for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
    i[o - 1] = arguments[o];
  if (!a.startsWith(eC))
    return tC(a, i);
  const l = a.replace(eC, ""), s = e.value && n.value[e.value], d = t.value && n.value[t.value];
  let u = Jl(s, l, null);
  return u || (`${a}${e.value}`, u = Jl(d, l, null)), u || (u = a), typeof u != "string" && (u = a), tC(u, i);
};
function FT(e, t) {
  return (n, a) => new Intl.NumberFormat([e.value, t.value], a).format(n);
}
function Lg(e, t, n) {
  const a = kt(e, t, e[t] ?? n.value);
  return a.value = e[t] ?? n.value, nt(n, (r) => {
    e[t] == null && (a.value = n.value);
  }), a;
}
function NT(e) {
  return (t) => {
    const n = Lg(t, "locale", e.current), a = Lg(t, "fallback", e.fallback), r = Lg(t, "messages", e.messages);
    return {
      name: "vuetify",
      current: n,
      fallback: a,
      messages: r,
      t: LT(n, a, r),
      n: FT(n, a),
      provide: NT({
        current: n,
        fallback: a,
        messages: r
      })
    };
  };
}
function e4(e) {
  const t = ot(e?.locale ?? "en"), n = ot(e?.fallback ?? "en"), a = Se({
    en: Z3,
    ...e?.messages
  });
  return {
    name: "vuetify",
    current: t,
    fallback: n,
    messages: a,
    t: LT(t, n, a),
    n: FT(t, n),
    provide: NT({
      current: t,
      fallback: n,
      messages: a
    })
  };
}
const xu = Symbol.for("vuetify:locale");
function t4(e) {
  return e.name != null;
}
function n4(e) {
  const t = e?.adapter && t4(e?.adapter) ? e?.adapter : e4(e), n = i4(t, e);
  return {
    ...t,
    ...n
  };
}
function ua() {
  const e = Gt(xu);
  if (!e) throw new Error("[Vuetify] Could not find injected locale instance");
  return e;
}
function a4(e) {
  const t = Gt(xu);
  if (!t) throw new Error("[Vuetify] Could not find injected locale instance");
  const n = t.provide(e), a = o4(n, t.rtl, e), r = {
    ...n,
    ...a
  };
  return Nn(xu, r), r;
}
function r4() {
  return {
    af: !1,
    ar: !0,
    bg: !1,
    ca: !1,
    ckb: !1,
    cs: !1,
    de: !1,
    el: !1,
    en: !1,
    es: !1,
    et: !1,
    fa: !0,
    fi: !1,
    fr: !1,
    hr: !1,
    hu: !1,
    he: !0,
    id: !1,
    it: !1,
    ja: !1,
    km: !1,
    ko: !1,
    lv: !1,
    lt: !1,
    nl: !1,
    no: !1,
    pl: !1,
    pt: !1,
    ro: !1,
    ru: !1,
    sk: !1,
    sl: !1,
    srCyrl: !1,
    srLatn: !1,
    sv: !1,
    th: !1,
    tr: !1,
    az: !1,
    uk: !1,
    vi: !1,
    zhHans: !1,
    zhHant: !1
  };
}
function i4(e, t) {
  const n = Se(t?.rtl ?? r4()), a = W(() => n.value[e.current.value] ?? !1);
  return {
    isRtl: a,
    rtl: n,
    rtlClasses: we(() => `v-locale--is-${a.value ? "rtl" : "ltr"}`)
  };
}
function o4(e, t, n) {
  const a = W(() => n.rtl ?? t.value[e.current.value] ?? !1);
  return {
    isRtl: a,
    rtl: t,
    rtlClasses: we(() => `v-locale--is-${a.value ? "rtl" : "ltr"}`)
  };
}
function Ra() {
  const e = Gt(xu);
  if (!e) throw new Error("[Vuetify] Could not find injected rtl instance");
  return {
    isRtl: e.isRtl,
    rtlClasses: e.rtlClasses
  };
}
function Nf(e) {
  const t = e.slice(-2).toUpperCase();
  switch (!0) {
    case e === "GB-alt-variant":
      return {
        firstDay: 0,
        firstWeekSize: 4
      };
    case e === "001":
      return {
        firstDay: 1,
        firstWeekSize: 1
      };
    case `AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):
      return {
        firstDay: 0,
        firstWeekSize: 1
      };
    case `AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):
      return {
        firstDay: 1,
        firstWeekSize: 1
      };
    case `AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):
      return {
        firstDay: 1,
        firstWeekSize: 4
      };
    case "AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):
      return {
        firstDay: 6,
        firstWeekSize: 1
      };
    case t === "MV":
      return {
        firstDay: 5,
        firstWeekSize: 1
      };
    case t === "PT":
      return {
        firstDay: 0,
        firstWeekSize: 4
      };
    default:
      return null;
  }
}
function s4(e, t, n) {
  const a = [];
  let r = [];
  const i = UT(e), o = $T(e), l = n ?? Nf(t)?.firstDay ?? 0, s = (i.getDay() - l + 7) % 7, d = (o.getDay() - l + 7) % 7;
  for (let u = 0; u < s; u++) {
    const f = new Date(i);
    f.setDate(f.getDate() - (s - u)), r.push(f);
  }
  for (let u = 1; u <= o.getDate(); u++) {
    const f = new Date(e.getFullYear(), e.getMonth(), u);
    r.push(f), r.length === 7 && (a.push(r), r = []);
  }
  for (let u = 1; u < 7 - d; u++) {
    const f = new Date(o);
    f.setDate(f.getDate() + u), r.push(f);
  }
  return r.length > 0 && a.push(r), a;
}
function zy(e, t, n) {
  const a = n ?? Nf(t)?.firstDay ?? 0, r = new Date(e);
  for (; r.getDay() !== a; )
    r.setDate(r.getDate() - 1);
  return r;
}
function l4(e, t) {
  const n = new Date(e), a = ((Nf(t)?.firstDay ?? 0) + 6) % 7;
  for (; n.getDay() !== a; )
    n.setDate(n.getDate() + 1);
  return n;
}
function UT(e) {
  return new Date(e.getFullYear(), e.getMonth(), 1);
}
function $T(e) {
  return new Date(e.getFullYear(), e.getMonth() + 1, 0);
}
function c4(e) {
  const t = e.split("-").map(Number);
  return new Date(t[0], t[1] - 1, t[2]);
}
const u4 = /^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;
function qT(e) {
  if (e == null) return /* @__PURE__ */ new Date();
  if (e instanceof Date) return e;
  if (typeof e == "string") {
    let t;
    if (u4.test(e))
      return c4(e);
    if (t = Date.parse(e), !isNaN(t)) return new Date(t);
  }
  return null;
}
const nC = new Date(2e3, 0, 2);
function d4(e, t) {
  const n = t ?? Nf(e)?.firstDay ?? 0;
  return ho(7).map((a) => {
    const r = new Date(nC);
    return r.setDate(nC.getDate() + n + a), new Intl.DateTimeFormat(e, {
      weekday: "narrow"
    }).format(r);
  });
}
function f4(e, t, n, a) {
  const r = qT(e) ?? /* @__PURE__ */ new Date(), i = a?.[t];
  if (typeof i == "function")
    return i(r, t, n);
  let o = {};
  switch (t) {
    case "fullDate":
      o = {
        year: "numeric",
        month: "long",
        day: "numeric"
      };
      break;
    case "fullDateWithWeekday":
      o = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric"
      };
      break;
    case "normalDate":
      const l = r.getDate(), s = new Intl.DateTimeFormat(n, {
        month: "long"
      }).format(r);
      return `${l} ${s}`;
    case "normalDateWithWeekday":
      o = {
        weekday: "short",
        day: "numeric",
        month: "short"
      };
      break;
    case "shortDate":
      o = {
        month: "short",
        day: "numeric"
      };
      break;
    case "year":
      o = {
        year: "numeric"
      };
      break;
    case "month":
      o = {
        month: "long"
      };
      break;
    case "monthShort":
      o = {
        month: "short"
      };
      break;
    case "monthAndYear":
      o = {
        month: "long",
        year: "numeric"
      };
      break;
    case "monthAndDate":
      o = {
        month: "long",
        day: "numeric"
      };
      break;
    case "weekday":
      o = {
        weekday: "long"
      };
      break;
    case "weekdayShort":
      o = {
        weekday: "short"
      };
      break;
    case "dayOfMonth":
      return new Intl.NumberFormat(n).format(r.getDate());
    case "hours12h":
      o = {
        hour: "numeric",
        hour12: !0
      };
      break;
    case "hours24h":
      o = {
        hour: "numeric",
        hour12: !1
      };
      break;
    case "minutes":
      o = {
        minute: "numeric"
      };
      break;
    case "seconds":
      o = {
        second: "numeric"
      };
      break;
    case "fullTime":
      o = {
        hour: "numeric",
        minute: "numeric"
      };
      break;
    case "fullTime12h":
      o = {
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      };
      break;
    case "fullTime24h":
      o = {
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      };
      break;
    case "fullDateTime":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric"
      };
      break;
    case "fullDateTime12h":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      };
      break;
    case "fullDateTime24h":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      };
      break;
    case "keyboardDate":
      o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit"
      };
      break;
    case "keyboardDateTime":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric"
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    case "keyboardDateTime12h":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    case "keyboardDateTime24h":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    default:
      o = i ?? {
        timeZone: "UTC",
        timeZoneName: "short"
      };
  }
  return new Intl.DateTimeFormat(n, o).format(r);
}
function m4(e, t) {
  const n = e.toJsDate(t), a = n.getFullYear(), r = LS(String(n.getMonth() + 1), 2, "0"), i = LS(String(n.getDate()), 2, "0");
  return `${a}-${r}-${i}`;
}
function h4(e) {
  const [t, n, a] = e.split("-").map(Number);
  return new Date(t, n - 1, a);
}
function _4(e, t) {
  const n = new Date(e);
  return n.setMinutes(n.getMinutes() + t), n;
}
function p4(e, t) {
  const n = new Date(e);
  return n.setHours(n.getHours() + t), n;
}
function Qh(e, t) {
  const n = new Date(e);
  return n.setDate(n.getDate() + t), n;
}
function v4(e, t) {
  const n = new Date(e);
  return n.setDate(n.getDate() + t * 7), n;
}
function g4(e, t) {
  const n = new Date(e);
  return n.setDate(1), n.setMonth(n.getMonth() + t), n;
}
function Wy(e) {
  return e.getFullYear();
}
function y4(e) {
  return e.getMonth();
}
function b4(e, t, n, a) {
  const r = Nf(t), i = n ?? r?.firstDay ?? 0, o = a ?? r?.firstWeekSize ?? 1;
  function l(g) {
    const v = new Date(g, 0, 1);
    return 7 - jy(v, zy(v, t, i), "days");
  }
  let s = Wy(e);
  const d = Qh(zy(e, t, i), 6);
  s < Wy(d) && l(s + 1) >= o && s++;
  const u = new Date(s, 0, 1), f = l(s), h = f >= o ? Qh(u, f - 7) : Qh(u, f);
  return 1 + jy(HT(e), S_(h), "weeks");
}
function w4(e) {
  return e.getDate();
}
function k4(e) {
  return new Date(e.getFullYear(), e.getMonth() + 1, 1);
}
function S4(e) {
  return new Date(e.getFullYear(), e.getMonth() - 1, 1);
}
function C4(e) {
  return e.getHours();
}
function A4(e) {
  return e.getMinutes();
}
function x4(e) {
  return new Date(e.getFullYear(), 0, 1);
}
function T4(e) {
  return new Date(e.getFullYear(), 11, 31);
}
function I4(e, t) {
  return k_(e, t[0]) && O4(e, t[1]);
}
function E4(e) {
  const t = new Date(e);
  return t instanceof Date && !isNaN(t.getTime());
}
function k_(e, t) {
  return e.getTime() > t.getTime();
}
function P4(e, t) {
  return k_(S_(e), S_(t));
}
function O4(e, t) {
  return e.getTime() < t.getTime();
}
function aC(e, t) {
  return e.getTime() === t.getTime();
}
function D4(e, t) {
  return e.getDate() === t.getDate() && e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear();
}
function B4(e, t) {
  return e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear();
}
function V4(e, t) {
  return e.getFullYear() === t.getFullYear();
}
function jy(e, t, n) {
  const a = new Date(e), r = new Date(t);
  switch (n) {
    case "years":
      return a.getFullYear() - r.getFullYear();
    case "quarters":
      return Math.floor((a.getMonth() - r.getMonth() + (a.getFullYear() - r.getFullYear()) * 12) / 4);
    case "months":
      return a.getMonth() - r.getMonth() + (a.getFullYear() - r.getFullYear()) * 12;
    case "weeks":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60 * 24 * 7));
    case "days":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60 * 24));
    case "hours":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60));
    case "minutes":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60));
    case "seconds":
      return Math.floor((a.getTime() - r.getTime()) / 1e3);
    default:
      return a.getTime() - r.getTime();
  }
}
function M4(e, t) {
  const n = new Date(e);
  return n.setHours(t), n;
}
function R4(e, t) {
  const n = new Date(e);
  return n.setMinutes(t), n;
}
function L4(e, t) {
  const n = new Date(e);
  return n.setMonth(t), n;
}
function F4(e, t) {
  const n = new Date(e);
  return n.setDate(t), n;
}
function N4(e, t) {
  const n = new Date(e);
  return n.setFullYear(t), n;
}
function S_(e) {
  return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0, 0);
}
function HT(e) {
  return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 23, 59, 59, 999);
}
class U4 {
  constructor(t) {
    this.locale = t.locale, this.formats = t.formats;
  }
  date(t) {
    return qT(t);
  }
  toJsDate(t) {
    return t;
  }
  toISO(t) {
    return m4(this, t);
  }
  parseISO(t) {
    return h4(t);
  }
  addMinutes(t, n) {
    return _4(t, n);
  }
  addHours(t, n) {
    return p4(t, n);
  }
  addDays(t, n) {
    return Qh(t, n);
  }
  addWeeks(t, n) {
    return v4(t, n);
  }
  addMonths(t, n) {
    return g4(t, n);
  }
  getWeekArray(t, n) {
    const a = n !== void 0 ? Number(n) : void 0;
    return s4(t, this.locale, a);
  }
  startOfWeek(t, n) {
    const a = n !== void 0 ? Number(n) : void 0;
    return zy(t, this.locale, a);
  }
  endOfWeek(t) {
    return l4(t, this.locale);
  }
  startOfMonth(t) {
    return UT(t);
  }
  endOfMonth(t) {
    return $T(t);
  }
  format(t, n) {
    return f4(t, n, this.locale, this.formats);
  }
  isEqual(t, n) {
    return aC(t, n);
  }
  isValid(t) {
    return E4(t);
  }
  isWithinRange(t, n) {
    return I4(t, n);
  }
  isAfter(t, n) {
    return k_(t, n);
  }
  isAfterDay(t, n) {
    return P4(t, n);
  }
  isBefore(t, n) {
    return !k_(t, n) && !aC(t, n);
  }
  isSameDay(t, n) {
    return D4(t, n);
  }
  isSameMonth(t, n) {
    return B4(t, n);
  }
  isSameYear(t, n) {
    return V4(t, n);
  }
  setMinutes(t, n) {
    return R4(t, n);
  }
  setHours(t, n) {
    return M4(t, n);
  }
  setMonth(t, n) {
    return L4(t, n);
  }
  setDate(t, n) {
    return F4(t, n);
  }
  setYear(t, n) {
    return N4(t, n);
  }
  getDiff(t, n, a) {
    return jy(t, n, a);
  }
  getWeekdays(t) {
    const n = t !== void 0 ? Number(t) : void 0;
    return d4(this.locale, n);
  }
  getYear(t) {
    return Wy(t);
  }
  getMonth(t) {
    return y4(t);
  }
  getWeek(t, n, a) {
    const r = n !== void 0 ? Number(n) : void 0;
    return b4(t, this.locale, r, a);
  }
  getDate(t) {
    return w4(t);
  }
  getNextMonth(t) {
    return k4(t);
  }
  getPreviousMonth(t) {
    return S4(t);
  }
  getHours(t) {
    return C4(t);
  }
  getMinutes(t) {
    return A4(t);
  }
  startOfDay(t) {
    return S_(t);
  }
  endOfDay(t) {
    return HT(t);
  }
  startOfYear(t) {
    return x4(t);
  }
  endOfYear(t) {
    return T4(t);
  }
}
const zT = Symbol.for("vuetify:date-options"), rC = Symbol.for("vuetify:date-adapter");
function $4(e, t) {
  const n = kr({
    adapter: U4,
    locale: {
      af: "af-ZA",
      // ar: '', # not the same value for all variants
      bg: "bg-BG",
      ca: "ca-ES",
      ckb: "",
      cs: "cs-CZ",
      de: "de-DE",
      el: "el-GR",
      en: "en-US",
      // es: '', # not the same value for all variants
      et: "et-EE",
      fa: "fa-IR",
      fi: "fi-FI",
      // fr: '', #not the same value for all variants
      hr: "hr-HR",
      hu: "hu-HU",
      he: "he-IL",
      id: "id-ID",
      it: "it-IT",
      ja: "ja-JP",
      ko: "ko-KR",
      lv: "lv-LV",
      lt: "lt-LT",
      nl: "nl-NL",
      no: "no-NO",
      pl: "pl-PL",
      pt: "pt-PT",
      ro: "ro-RO",
      ru: "ru-RU",
      sk: "sk-SK",
      sl: "sl-SI",
      srCyrl: "sr-SP",
      srLatn: "sr-SP",
      sv: "sv-SE",
      th: "th-TH",
      tr: "tr-TR",
      az: "az-AZ",
      uk: "uk-UA",
      vi: "vi-VN",
      zhHans: "zh-CN",
      zhHant: "zh-TW"
    }
  }, e);
  return {
    options: n,
    instance: WT(n, t)
  };
}
function q4(e, t, n) {
  const a = e.getDiff(e.endOfDay(n ?? t), e.startOfDay(t), "days"), r = [t];
  for (let i = 1; i < a; i++) {
    const o = e.addDays(t, i);
    r.push(o);
  }
  return n && r.push(e.endOfDay(n)), r;
}
function WT(e, t) {
  const n = oa(typeof e.adapter == "function" ? new e.adapter({
    locale: e.locale[t.current.value] ?? t.current.value,
    formats: e.formats
  }) : e.adapter);
  return nt(t.current, (a) => {
    n.locale = e.locale[a] ?? a ?? n.locale;
  }), n;
}
function Uf() {
  const e = Gt(zT);
  if (!e) throw new Error("[Vuetify] Could not find injected date options");
  const t = ua();
  return WT(e, t);
}
const sp = ["sm", "md", "lg", "xl", "xxl"], Ky = Symbol.for("vuetify:display"), iC = {
  mobileBreakpoint: "lg",
  thresholds: {
    xs: 0,
    sm: 600,
    md: 960,
    lg: 1280,
    xl: 1920,
    xxl: 2560
  }
}, H4 = function() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : iC;
  return kr(iC, e);
};
function oC(e) {
  return vn && !e ? window.innerWidth : typeof e == "object" && e.clientWidth || 0;
}
function sC(e) {
  return vn && !e ? window.innerHeight : typeof e == "object" && e.clientHeight || 0;
}
function lC(e) {
  const t = vn && !e ? window.navigator.userAgent : "ssr";
  function n(v) {
    return !!t.match(v);
  }
  const a = n(/android/i), r = n(/iphone|ipad|ipod/i), i = n(/cordova/i), o = n(/electron/i), l = n(/chrome/i), s = n(/edge/i), d = n(/firefox/i), u = n(/opera/i), f = n(/win/i), h = n(/mac/i), g = n(/linux/i);
  return {
    android: a,
    ios: r,
    cordova: i,
    electron: o,
    chrome: l,
    edge: s,
    firefox: d,
    opera: u,
    win: f,
    mac: h,
    linux: g,
    touch: o3,
    ssr: t === "ssr"
  };
}
function z4(e, t) {
  const {
    thresholds: n,
    mobileBreakpoint: a
  } = H4(e), r = ot(sC(t)), i = ot(lC(t)), o = oa({}), l = ot(oC(t));
  function s() {
    r.value = sC(), l.value = oC();
  }
  function d() {
    s(), i.value = lC();
  }
  return Zn(() => {
    const u = l.value < n.sm, f = l.value < n.md && !u, h = l.value < n.lg && !(f || u), g = l.value < n.xl && !(h || f || u), v = l.value < n.xxl && !(g || h || f || u), w = l.value >= n.xxl, b = u ? "xs" : f ? "sm" : h ? "md" : g ? "lg" : v ? "xl" : "xxl", p = typeof a == "number" ? a : n[a], y = l.value < p;
    o.xs = u, o.sm = f, o.md = h, o.lg = g, o.xl = v, o.xxl = w, o.smAndUp = !u, o.mdAndUp = !(u || f), o.lgAndUp = !(u || f || h), o.xlAndUp = !(u || f || h || g), o.smAndDown = !(h || g || v || w), o.mdAndDown = !(g || v || w), o.lgAndDown = !(v || w), o.xlAndDown = !w, o.name = b, o.height = r.value, o.width = l.value, o.mobile = y, o.mobileBreakpoint = a, o.platform = i.value, o.thresholds = n;
  }), vn && (window.addEventListener("resize", s, {
    passive: !0
  }), qa(() => {
    window.removeEventListener("resize", s);
  }, !0)), {
    ...$u(o),
    update: d,
    ssr: !!t
  };
}
const cc = Be({
  mobile: {
    type: Boolean,
    default: !1
  },
  mobileBreakpoint: [Number, String]
}, "display");
function mi() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
    mobile: null
  }, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  const n = Gt(Ky);
  if (!n) throw new Error("Could not find Vuetify display injection");
  const a = W(() => e.mobile ? !0 : typeof e.mobileBreakpoint == "number" ? n.width.value < e.mobileBreakpoint : e.mobileBreakpoint ? n.width.value < n.thresholds.value[e.mobileBreakpoint] : e.mobile === null ? n.mobile.value : !1), r = we(() => t ? {
    [`${t}--mobile`]: a.value
  } : {});
  return {
    ...n,
    displayClasses: r,
    mobile: a
  };
}
const jT = Symbol.for("vuetify:goto");
function KT() {
  return {
    container: void 0,
    duration: 300,
    layout: !1,
    offset: 0,
    easing: "easeInOutCubic",
    patterns: {
      linear: (e) => e,
      easeInQuad: (e) => e ** 2,
      easeOutQuad: (e) => e * (2 - e),
      easeInOutQuad: (e) => e < 0.5 ? 2 * e ** 2 : -1 + (4 - 2 * e) * e,
      easeInCubic: (e) => e ** 3,
      easeOutCubic: (e) => --e ** 3 + 1,
      easeInOutCubic: (e) => e < 0.5 ? 4 * e ** 3 : (e - 1) * (2 * e - 2) * (2 * e - 2) + 1,
      easeInQuart: (e) => e ** 4,
      easeOutQuart: (e) => 1 - --e ** 4,
      easeInOutQuart: (e) => e < 0.5 ? 8 * e ** 4 : 1 - 8 * --e ** 4,
      easeInQuint: (e) => e ** 5,
      easeOutQuint: (e) => 1 + --e ** 5,
      easeInOutQuint: (e) => e < 0.5 ? 16 * e ** 5 : 1 + 16 * --e ** 5
    }
  };
}
function W4(e) {
  return Ow(e) ?? (document.scrollingElement || document.body);
}
function Ow(e) {
  return typeof e == "string" ? document.querySelector(e) : kw(e);
}
function Fg(e, t, n) {
  if (typeof e == "number") return t && n ? -e : e;
  let a = Ow(e), r = 0;
  for (; a; )
    r += t ? a.offsetLeft : a.offsetTop, a = a.offsetParent;
  return r;
}
function j4(e, t) {
  return {
    rtl: t.isRtl,
    options: kr(KT(), e)
  };
}
async function cC(e, t, n, a) {
  const r = n ? "scrollLeft" : "scrollTop", i = kr(a?.options ?? KT(), t), o = a?.rtl.value, l = (typeof e == "number" ? e : Ow(e)) ?? 0, s = i.container === "parent" && l instanceof HTMLElement ? l.parentElement : W4(i.container), d = typeof i.easing == "function" ? i.easing : i.patterns[i.easing];
  if (!d) throw new TypeError(`Easing function "${i.easing}" not found.`);
  let u;
  if (typeof l == "number")
    u = Fg(l, n, o);
  else if (u = Fg(l, n, o) - Fg(s, n, o), i.layout) {
    const v = window.getComputedStyle(l).getPropertyValue("--v-layout-top");
    v && (u -= parseInt(v, 10));
  }
  u += i.offset, u = Y4(s, u, !!o, !!n);
  const f = s[r] ?? 0;
  if (u === f) return Promise.resolve(u);
  const h = performance.now();
  return new Promise((g) => requestAnimationFrame(function v(w) {
    const p = (w - h) / i.duration, y = Math.floor(f + (u - f) * d(Pn(p, 0, 1)));
    if (s[r] = y, p >= 1 && Math.abs(y - s[r]) < 10)
      return g(u);
    if (p > 2)
      return g(s[r]);
    requestAnimationFrame(v);
  }));
}
function K4() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const t = Gt(jT), {
    isRtl: n
  } = Ra();
  if (!t) throw new Error("[Vuetify] Could not find injected goto instance");
  const a = {
    ...t,
    // can be set via VLocaleProvider
    rtl: we(() => t.rtl.value || n.value)
  };
  async function r(i, o) {
    return cC(i, kr(e, o), !1, a);
  }
  return r.horizontal = async (i, o) => cC(i, kr(e, o), !0, a), r;
}
function Y4(e, t, n, a) {
  const {
    scrollWidth: r,
    scrollHeight: i
  } = e, [o, l] = e === document.scrollingElement ? [window.innerWidth, window.innerHeight] : [e.offsetWidth, e.offsetHeight];
  let s, d;
  return a ? n ? (s = -(r - o), d = 0) : (s = 0, d = r - o) : (s = 0, d = i + -l), Pn(t, s, d);
}
const G4 = {
  collapse: "mdi-chevron-up",
  complete: "mdi-check",
  cancel: "mdi-close-circle",
  close: "mdi-close",
  delete: "mdi-close-circle",
  // delete (e.g. v-chip close)
  clear: "mdi-close-circle",
  success: "mdi-check-circle",
  info: "mdi-information",
  warning: "mdi-alert-circle",
  error: "mdi-close-circle",
  prev: "mdi-chevron-left",
  next: "mdi-chevron-right",
  checkboxOn: "mdi-checkbox-marked",
  checkboxOff: "mdi-checkbox-blank-outline",
  checkboxIndeterminate: "mdi-minus-box",
  delimiter: "mdi-circle",
  // for carousel
  sortAsc: "mdi-arrow-up",
  sortDesc: "mdi-arrow-down",
  expand: "mdi-chevron-down",
  menu: "mdi-menu",
  subgroup: "mdi-menu-down",
  dropdown: "mdi-menu-down",
  radioOn: "mdi-radiobox-marked",
  radioOff: "mdi-radiobox-blank",
  edit: "mdi-pencil",
  ratingEmpty: "mdi-star-outline",
  ratingFull: "mdi-star",
  ratingHalf: "mdi-star-half-full",
  loading: "mdi-cached",
  first: "mdi-page-first",
  last: "mdi-page-last",
  unfold: "mdi-unfold-more-horizontal",
  file: "mdi-paperclip",
  plus: "mdi-plus",
  minus: "mdi-minus",
  calendar: "mdi-calendar",
  treeviewCollapse: "mdi-menu-down",
  treeviewExpand: "mdi-menu-right",
  eyeDropper: "mdi-eyedropper",
  upload: "mdi-cloud-upload",
  color: "mdi-palette"
}, Q4 = {
  // Not using mergeProps here, functional components merge props by default (?)
  component: (e) => Co(Bw, {
    ...e,
    class: "mdi"
  })
}, At = [String, Function, Object, Array], Yy = Symbol.for("vuetify:icons"), lp = Be({
  icon: {
    type: At
  },
  // Could not remove this and use makeTagProps, types complained because it is not required
  tag: {
    type: [String, Object, Function],
    required: !0
  }
}, "icon"), Gy = We()({
  name: "VComponentIcon",
  props: lp(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return () => {
      const a = e.icon;
      return _(e.tag, null, {
        default: () => [e.icon ? _(a, null, null) : n.default?.()]
      });
    };
  }
}), Dw = fi({
  name: "VSvgIcon",
  inheritAttrs: !1,
  props: lp(),
  setup(e, t) {
    let {
      attrs: n
    } = t;
    return () => _(e.tag, He(n, {
      style: null
    }), {
      default: () => [I("svg", {
        class: "v-icon__svg",
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 24 24",
        role: "img",
        "aria-hidden": "true"
      }, [Array.isArray(e.icon) ? e.icon.map((a) => Array.isArray(a) ? I("path", {
        d: a[0],
        "fill-opacity": a[1]
      }, null) : I("path", {
        d: a
      }, null)) : I("path", {
        d: e.icon
      }, null)])]
    });
  }
}), J4 = fi({
  name: "VLigatureIcon",
  props: lp(),
  setup(e) {
    return () => _(e.tag, null, {
      default: () => [e.icon]
    });
  }
}), Bw = fi({
  name: "VClassIcon",
  props: lp(),
  setup(e) {
    return () => _(e.tag, {
      class: Ie(e.icon)
    }, null);
  }
});
function X4() {
  return {
    svg: {
      component: Dw
    },
    class: {
      component: Bw
    }
  };
}
function Z4(e) {
  const t = X4(), n = e?.defaultSet ?? "mdi";
  return n === "mdi" && !t.mdi && (t.mdi = Q4), kr({
    defaultSet: n,
    sets: t,
    aliases: {
      ...G4,
      /* eslint-disable max-len */
      vuetify: ["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z", ["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z", 0.6]],
      "vuetify-outline": "svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z",
      "vuetify-play": ["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z", ["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z", 0.6]]
      /* eslint-enable max-len */
    }
  }, e);
}
const e8 = (e) => {
  const t = Gt(Yy);
  if (!t) throw new Error("Missing Vuetify Icons provide!");
  return {
    iconData: W(() => {
      const a = yo(e);
      if (!a) return {
        component: Gy
      };
      let r = a;
      if (typeof r == "string" && (r = r.trim(), r.startsWith("$") && (r = t.aliases?.[r.slice(1)])), Array.isArray(r))
        return {
          component: Dw,
          icon: r
        };
      if (typeof r != "string")
        return {
          component: Gy,
          icon: r
        };
      const i = Object.keys(t.sets).find((s) => typeof r == "string" && r.startsWith(`${s}:`)), o = i ? r.slice(i.length + 1) : r;
      return {
        component: t.sets[i ?? t.defaultSet].component,
        icon: o
      };
    })
  };
}, pf = Symbol.for("vuetify:theme"), sn = Be({
  theme: String
}, "theme");
function uC() {
  return {
    defaultTheme: "light",
    variations: {
      colors: [],
      lighten: 0,
      darken: 0
    },
    themes: {
      light: {
        dark: !1,
        colors: {
          background: "#FFFFFF",
          surface: "#FFFFFF",
          "surface-bright": "#FFFFFF",
          "surface-light": "#EEEEEE",
          "surface-variant": "#424242",
          "on-surface-variant": "#EEEEEE",
          primary: "#1867C0",
          "primary-darken-1": "#1F5592",
          secondary: "#48A9A6",
          "secondary-darken-1": "#018786",
          error: "#B00020",
          info: "#2196F3",
          success: "#4CAF50",
          warning: "#FB8C00"
        },
        variables: {
          "border-color": "#000000",
          "border-opacity": 0.12,
          "high-emphasis-opacity": 0.87,
          "medium-emphasis-opacity": 0.6,
          "disabled-opacity": 0.38,
          "idle-opacity": 0.04,
          "hover-opacity": 0.04,
          "focus-opacity": 0.12,
          "selected-opacity": 0.08,
          "activated-opacity": 0.12,
          "pressed-opacity": 0.12,
          "dragged-opacity": 0.08,
          "theme-kbd": "#212529",
          "theme-on-kbd": "#FFFFFF",
          "theme-code": "#F5F5F5",
          "theme-on-code": "#000000"
        }
      },
      dark: {
        dark: !0,
        colors: {
          background: "#121212",
          surface: "#212121",
          "surface-bright": "#ccbfd6",
          "surface-light": "#424242",
          "surface-variant": "#c8c8c8",
          "on-surface-variant": "#000000",
          primary: "#2196F3",
          "primary-darken-1": "#277CC1",
          secondary: "#54B6B2",
          "secondary-darken-1": "#48A9A6",
          error: "#CF6679",
          info: "#2196F3",
          success: "#4CAF50",
          warning: "#FB8C00"
        },
        variables: {
          "border-color": "#FFFFFF",
          "border-opacity": 0.12,
          "high-emphasis-opacity": 1,
          "medium-emphasis-opacity": 0.7,
          "disabled-opacity": 0.5,
          "idle-opacity": 0.1,
          "hover-opacity": 0.04,
          "focus-opacity": 0.12,
          "selected-opacity": 0.08,
          "activated-opacity": 0.12,
          "pressed-opacity": 0.16,
          "dragged-opacity": 0.08,
          "theme-kbd": "#212529",
          "theme-on-kbd": "#FFFFFF",
          "theme-code": "#343434",
          "theme-on-code": "#CCCCCC"
        }
      }
    },
    stylesheetId: "vuetify-theme-stylesheet"
  };
}
function t8() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : uC();
  const t = uC();
  if (!e) return {
    ...t,
    isDisabled: !0
  };
  const n = {};
  for (const [a, r] of Object.entries(e.themes ?? {})) {
    const i = r.dark || a === "dark" ? t.themes?.dark : t.themes?.light;
    n[a] = kr(i, r);
  }
  return kr(t, {
    ...e,
    themes: n
  });
}
function El(e, t, n, a) {
  e.push(`${i8(t, a)} {
`, ...n.map((r) => `  ${r};
`), `}
`);
}
function dC(e) {
  const t = e.dark ? 2 : 1, n = e.dark ? 1 : 2, a = [];
  for (const [r, i] of Object.entries(e.colors)) {
    const o = si(i);
    a.push(`--v-theme-${r}: ${o.r},${o.g},${o.b}`), r.startsWith("on-") || a.push(`--v-theme-${r}-overlay-multiplier: ${Hy(i) > 0.18 ? t : n}`);
  }
  for (const [r, i] of Object.entries(e.variables)) {
    const o = typeof i == "string" && i.startsWith("#") ? si(i) : void 0, l = o ? `${o.r}, ${o.g}, ${o.b}` : void 0;
    a.push(`--v-${r}: ${l ?? i}`);
  }
  return a;
}
function n8(e, t, n) {
  const a = {};
  if (n)
    for (const r of ["lighten", "darken"]) {
      const i = r === "lighten" ? $3 : q3;
      for (const o of ho(n[r], 1))
        a[`${e}-${r}-${o}`] = DT(i(si(t), o));
    }
  return a;
}
function a8(e, t) {
  if (!t) return {};
  let n = {};
  for (const a of t.colors) {
    const r = e[a];
    r && (n = {
      ...n,
      ...n8(a, r, t)
    });
  }
  return n;
}
function r8(e) {
  const t = {};
  for (const n of Object.keys(e)) {
    if (n.startsWith("on-") || e[`on-${n}`]) continue;
    const a = `on-${n}`, r = si(e[n]);
    t[a] = MT(r);
  }
  return t;
}
function i8(e, t) {
  if (!t) return e;
  const n = `:where(${t})`;
  return e === ":root" ? n : `${n} ${e}`;
}
function o8(e, t) {
  e && (e.innerHTML = t);
}
function s8(e, t) {
  if (!vn) return null;
  let n = document.getElementById(e);
  return n || (n = document.createElement("style"), n.id = e, n.type = "text/css", t && n.setAttribute("nonce", t), document.head.appendChild(n)), n;
}
function l8(e) {
  const t = t8(e), n = ot(t.defaultTheme), a = Se(t.themes), r = W(() => {
    const d = {};
    for (const [u, f] of Object.entries(a.value)) {
      const h = {
        ...f.colors,
        ...a8(f.colors, t.variations)
      };
      d[u] = {
        ...f,
        colors: {
          ...h,
          ...r8(h)
        }
      };
    }
    return d;
  }), i = we(() => r.value[n.value]), o = W(() => {
    const d = [];
    i.value?.dark && El(d, ":root", ["color-scheme: dark"], t.scope), El(d, ":root", dC(i.value), t.scope);
    for (const [g, v] of Object.entries(r.value))
      El(d, `.v-theme--${g}`, [`color-scheme: ${v.dark ? "dark" : "normal"}`, ...dC(v)], t.scope);
    const u = [], f = [], h = new Set(Object.values(r.value).flatMap((g) => Object.keys(g.colors)));
    for (const g of h)
      g.startsWith("on-") ? El(f, `.${g}`, [`color: rgb(var(--v-theme-${g})) !important`], t.scope) : (El(u, `.bg-${g}`, [`--v-theme-overlay-multiplier: var(--v-theme-${g}-overlay-multiplier)`, `background-color: rgb(var(--v-theme-${g})) !important`, `color: rgb(var(--v-theme-on-${g})) !important`], t.scope), El(f, `.text-${g}`, [`color: rgb(var(--v-theme-${g})) !important`], t.scope), El(f, `.border-${g}`, [`--v-border-color: var(--v-theme-${g})`], t.scope));
    return d.push(...u, ...f), d.map((g, v) => v === 0 ? g : `    ${g}`).join("");
  });
  function l(d) {
    if (t.isDisabled) return;
    const u = d._context.provides.usehead;
    if (u) {
      let f = function() {
        return {
          style: [{
            textContent: o.value,
            id: t.stylesheetId,
            nonce: t.cspNonce || !1
          }]
        };
      };
      if (u.push) {
        const h = u.push(f);
        vn && nt(o, () => {
          h.patch(f);
        });
      } else
        vn ? (u.addHeadObjs(we(f)), Zn(() => u.updateDOM())) : u.addHeadObjs(f());
    } else {
      let f = function() {
        o8(s8(t.stylesheetId, t.cspNonce), o.value);
      };
      vn ? nt(o, f, {
        immediate: !0
      }) : f();
    }
  }
  const s = we(() => t.isDisabled ? void 0 : `v-theme--${n.value}`);
  return {
    install: l,
    isDisabled: t.isDisabled,
    name: n,
    themes: a,
    current: i,
    computedThemes: r,
    themeClasses: s,
    styles: o,
    global: {
      name: n,
      current: i
    }
  };
}
function yn(e) {
  ya("provideTheme");
  const t = Gt(pf, null);
  if (!t) throw new Error("Could not find Vuetify theme injection");
  const n = we(() => e.theme ?? t.name.value), a = we(() => t.themes.value[n.value]), r = we(() => t.isDisabled ? void 0 : `v-theme--${n.value}`), i = {
    ...t,
    name: n,
    current: a,
    themeClasses: r
  };
  return Nn(pf, i), i;
}
function Vw() {
  ya("useTheme");
  const e = Gt(pf, null);
  if (!e) throw new Error("Could not find Vuetify theme injection");
  return e;
}
function Wi(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "content";
  const n = y_(), a = Se();
  if (vn) {
    const r = new ResizeObserver((i) => {
      e?.(i, r), i.length && (t === "content" ? a.value = i[0].contentRect : a.value = i[0].target.getBoundingClientRect());
    });
    Ga(() => {
      r.disconnect();
    }), nt(() => n.el, (i, o) => {
      o && (r.unobserve(o), a.value = void 0), i && r.observe(i);
    }, {
      flush: "post"
    });
  }
  return {
    resizeRef: n,
    contentRect: Uu(a)
  };
}
const vf = Symbol.for("vuetify:layout"), YT = Symbol.for("vuetify:layout-item"), fC = 1e3, GT = Be({
  overlaps: {
    type: Array,
    default: () => []
  },
  fullHeight: Boolean
}, "layout"), uc = Be({
  name: {
    type: String
  },
  order: {
    type: [Number, String],
    default: 0
  },
  absolute: Boolean
}, "layout-item");
function QT() {
  const e = Gt(vf);
  if (!e) throw new Error("[Vuetify] Could not find injected layout");
  return {
    getLayoutItem: e.getLayoutItem,
    mainRect: e.mainRect,
    mainStyles: e.mainStyles
  };
}
function dc(e) {
  const t = Gt(vf);
  if (!t) throw new Error("[Vuetify] Could not find injected layout");
  const n = e.id ?? `layout-item-${$r()}`, a = ya("useLayoutItem");
  Nn(YT, {
    id: n
  });
  const r = ot(!1);
  uw(() => r.value = !0), Mx(() => r.value = !1);
  const {
    layoutItemStyles: i,
    layoutItemScrimStyles: o
  } = t.register(a, {
    ...e,
    active: W(() => r.value ? !1 : e.active.value),
    id: n
  });
  return Ga(() => t.unregister(n)), {
    layoutItemStyles: i,
    layoutRect: t.layoutRect,
    layoutItemScrimStyles: o
  };
}
const c8 = (e, t, n, a) => {
  let r = {
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  };
  const i = [{
    id: "",
    layer: {
      ...r
    }
  }];
  for (const o of e) {
    const l = t.get(o), s = n.get(o), d = a.get(o);
    if (!l || !s || !d) continue;
    const u = {
      ...r,
      [l.value]: parseInt(r[l.value], 10) + (d.value ? parseInt(s.value, 10) : 0)
    };
    i.push({
      id: o,
      layer: u
    }), r = u;
  }
  return i;
};
function JT(e) {
  const t = Gt(vf, null), n = W(() => t ? t.rootZIndex.value - 100 : fC), a = Se([]), r = oa(/* @__PURE__ */ new Map()), i = oa(/* @__PURE__ */ new Map()), o = oa(/* @__PURE__ */ new Map()), l = oa(/* @__PURE__ */ new Map()), s = oa(/* @__PURE__ */ new Map()), {
    resizeRef: d,
    contentRect: u
  } = Wi(), f = W(() => {
    const D = /* @__PURE__ */ new Map(), P = e.overlaps ?? [];
    for (const O of P.filter((T) => T.includes(":"))) {
      const [T, A] = O.split(":");
      if (!a.value.includes(T) || !a.value.includes(A)) continue;
      const V = r.get(T), M = r.get(A), B = i.get(T), N = i.get(A);
      !V || !M || !B || !N || (D.set(A, {
        position: V.value,
        amount: parseInt(B.value, 10)
      }), D.set(T, {
        position: M.value,
        amount: -parseInt(N.value, 10)
      }));
    }
    return D;
  }), h = W(() => {
    const D = [...new Set([...o.values()].map((O) => O.value))].sort((O, T) => O - T), P = [];
    for (const O of D) {
      const T = a.value.filter((A) => o.get(A)?.value === O);
      P.push(...T);
    }
    return c8(P, r, i, l);
  }), g = W(() => !Array.from(s.values()).some((D) => D.value)), v = W(() => h.value[h.value.length - 1].layer), w = we(() => ({
    "--v-layout-left": ht(v.value.left),
    "--v-layout-right": ht(v.value.right),
    "--v-layout-top": ht(v.value.top),
    "--v-layout-bottom": ht(v.value.bottom),
    ...g.value ? void 0 : {
      transition: "none"
    }
  })), b = W(() => h.value.slice(1).map((D, P) => {
    let {
      id: O
    } = D;
    const {
      layer: T
    } = h.value[P], A = i.get(O), V = r.get(O);
    return {
      id: O,
      ...T,
      size: Number(A.value),
      position: V.value
    };
  })), p = (D) => b.value.find((P) => P.id === D), y = ya("createLayout"), S = ot(!1);
  on(() => {
    S.value = !0;
  }), Nn(vf, {
    register: (D, P) => {
      let {
        id: O,
        order: T,
        position: A,
        layoutSize: V,
        elementSize: M,
        active: B,
        disableTransitions: N,
        absolute: H
      } = P;
      o.set(O, T), r.set(O, A), i.set(O, V), l.set(O, B), N && s.set(O, N);
      const te = au(YT, y?.vnode).indexOf(D);
      te > -1 ? a.value.splice(te, 0, O) : a.value.push(O);
      const de = W(() => b.value.findIndex((se) => se.id === O)), Z = W(() => n.value + h.value.length * 2 - de.value * 2), F = W(() => {
        const se = A.value === "left" || A.value === "right", X = A.value === "right", he = A.value === "bottom", ve = M.value ?? V.value, pe = ve === 0 ? "%" : "px", z = {
          [A.value]: 0,
          zIndex: Z.value,
          transform: `translate${se ? "X" : "Y"}(${(B.value ? 0 : -(ve === 0 ? 100 : ve)) * (X || he ? -1 : 1)}${pe})`,
          position: H.value || n.value !== fC ? "absolute" : "fixed",
          ...g.value ? void 0 : {
            transition: "none"
          }
        };
        if (!S.value) return z;
        const ke = b.value[de.value];
        if (!ke) throw new Error(`[Vuetify] Could not find layout item "${O}"`);
        const Me = f.value.get(O);
        return Me && (ke[Me.position] += Me.amount), {
          ...z,
          height: se ? `calc(100% - ${ke.top}px - ${ke.bottom}px)` : M.value ? `${M.value}px` : void 0,
          left: X ? void 0 : `${ke.left}px`,
          right: X ? `${ke.right}px` : void 0,
          top: A.value !== "bottom" ? `${ke.top}px` : void 0,
          bottom: A.value !== "top" ? `${ke.bottom}px` : void 0,
          width: se ? M.value ? `${M.value}px` : void 0 : `calc(100% - ${ke.left}px - ${ke.right}px)`
        };
      }), K = W(() => ({
        zIndex: Z.value - 1
      }));
      return {
        layoutItemStyles: F,
        layoutItemScrimStyles: K,
        zIndex: Z
      };
    },
    unregister: (D) => {
      o.delete(D), r.delete(D), i.delete(D), l.delete(D), s.delete(D), a.value = a.value.filter((P) => P !== D);
    },
    mainRect: v,
    mainStyles: w,
    getLayoutItem: p,
    items: b,
    layoutRect: u,
    rootZIndex: n
  });
  const E = we(() => ["v-layout", {
    "v-layout--full-height": e.fullHeight
  }]), C = we(() => ({
    zIndex: t ? n.value : void 0,
    position: t ? "relative" : void 0,
    overflow: t ? "hidden" : void 0
  }));
  return {
    layoutClasses: E,
    layoutStyles: C,
    getLayoutItem: p,
    items: b,
    layoutRect: u,
    layoutRef: d
  };
}
function XT() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const {
    blueprint: t,
    ...n
  } = e, a = kr(t, n), {
    aliases: r = {},
    components: i = {},
    directives: o = {}
  } = a, l = bu();
  return l.run(() => {
    const s = W3(a.defaults), d = z4(a.display, a.ssr), u = l8(a.theme), f = Z4(a.icons), h = n4(a.locale), g = $4(a.date, h), v = j4(a.goTo, h);
    function w(p) {
      for (const S in o)
        p.directive(S, o[S]);
      for (const S in i)
        p.component(S, i[S]);
      for (const S in r)
        p.component(S, fi({
          ...r[S],
          name: S,
          aliasName: r[S].name
        }));
      const y = bu();
      if (y.run(() => {
        u.install(p);
      }), p.onUnmount(() => y.stop()), p.provide(Au, s), p.provide(Ky, d), p.provide(pf, u), p.provide(Yy, f), p.provide(xu, h), p.provide(zT, g.options), p.provide(rC, g.instance), p.provide(jT, v), vn && a.ssr)
        if (p.$nuxt)
          p.$nuxt.hook("app:suspense:resolve", () => {
            d.update();
          });
        else {
          const {
            mount: S
          } = p;
          p.mount = function() {
            const E = S(...arguments);
            return Vt(() => d.update()), p.mount = S, E;
          };
        }
      p.mixin({
        computed: {
          $vuetify() {
            return oa({
              defaults: Kc.call(this, Au),
              display: Kc.call(this, Ky),
              theme: Kc.call(this, pf),
              icons: Kc.call(this, Yy),
              locale: Kc.call(this, xu),
              date: Kc.call(this, rC)
            });
          }
        }
      });
    }
    function b() {
      l.stop();
    }
    return {
      install: w,
      unmount: b,
      defaults: s,
      display: d,
      theme: u,
      icons: f,
      locale: h,
      date: g,
      goTo: v
    };
  });
}
const u8 = "3.8.10";
XT.version = u8;
function Kc(e) {
  const t = this.$, n = t.parent?.provides ?? t.vnode.appContext?.provides;
  if (n && e in n)
    return n[e];
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Qy = function(e, t) {
  return Qy = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
    n.__proto__ = a;
  } || function(n, a) {
    for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (n[r] = a[r]);
  }, Qy(e, t);
};
function d8(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  Qy(e, t);
  function n() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
var Jt = function() {
  return Jt = Object.assign || function(t) {
    for (var n, a = 1, r = arguments.length; a < r; a++) {
      n = arguments[a];
      for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
    }
    return t;
  }, Jt.apply(this, arguments);
};
function C_(e, t, n) {
  for (var a = 0, r = t.length, i; a < r; a++)
    (i || !(a in t)) && (i || (i = Array.prototype.slice.call(t, 0, a)), i[a] = t[a]);
  return e.concat(i || Array.prototype.slice.call(t));
}
var lr = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, ar = Object.keys, va = Array.isArray;
typeof Promise < "u" && !lr.Promise && (lr.Promise = Promise);
function ui(e, t) {
  return typeof t != "object" || ar(t).forEach(function(n) {
    e[n] = t[n];
  }), e;
}
var Tu = Object.getPrototypeOf, f8 = {}.hasOwnProperty;
function Gr(e, t) {
  return f8.call(e, t);
}
function Iu(e, t) {
  typeof t == "function" && (t = t(Tu(e))), (typeof Reflect > "u" ? ar : Reflect.ownKeys)(t).forEach(function(n) {
    Hs(e, n, t[n]);
  });
}
var ZT = Object.defineProperty;
function Hs(e, t, n, a) {
  ZT(e, t, ui(n && Gr(n, "get") && typeof n.get == "function" ? { get: n.get, set: n.set, configurable: !0 } : { value: n, configurable: !0, writable: !0 }, a));
}
function zu(e) {
  return {
    from: function(t) {
      return e.prototype = Object.create(t.prototype), Hs(e.prototype, "constructor", e), {
        extend: Iu.bind(null, e.prototype)
      };
    }
  };
}
var m8 = Object.getOwnPropertyDescriptor;
function eI(e, t) {
  var n = m8(e, t), a;
  return n || (a = Tu(e)) && eI(a, t);
}
var h8 = [].slice;
function cp(e, t, n) {
  return h8.call(e, t, n);
}
function tI(e, t) {
  return t(e);
}
function Hd(e) {
  if (!e)
    throw new Error("Assertion Failed");
}
function nI(e) {
  lr.setImmediate ? setImmediate(e) : setTimeout(e, 0);
}
function _8(e, t) {
  return e.reduce(function(n, a, r) {
    var i = t(a, r);
    return i && (n[i[0]] = i[1]), n;
  }, {});
}
function Jo(e, t) {
  if (typeof t == "string" && Gr(e, t))
    return e[t];
  if (!t)
    return e;
  if (typeof t != "string") {
    for (var n = [], a = 0, r = t.length; a < r; ++a) {
      var i = Jo(e, t[a]);
      n.push(i);
    }
    return n;
  }
  var o = t.indexOf(".");
  if (o !== -1) {
    var l = e[t.substr(0, o)];
    return l == null ? void 0 : Jo(l, t.substr(o + 1));
  }
}
function ci(e, t, n) {
  if (!(!e || t === void 0) && !("isFrozen" in Object && Object.isFrozen(e)))
    if (typeof t != "string" && "length" in t) {
      Hd(typeof n != "string" && "length" in n);
      for (var a = 0, r = t.length; a < r; ++a)
        ci(e, t[a], n[a]);
    } else {
      var i = t.indexOf(".");
      if (i !== -1) {
        var o = t.substr(0, i), l = t.substr(i + 1);
        if (l === "")
          n === void 0 ? va(e) && !isNaN(parseInt(o)) ? e.splice(o, 1) : delete e[o] : e[o] = n;
        else {
          var s = e[o];
          (!s || !Gr(e, o)) && (s = e[o] = {}), ci(s, l, n);
        }
      } else
        n === void 0 ? va(e) && !isNaN(parseInt(t)) ? e.splice(t, 1) : delete e[t] : e[t] = n;
    }
}
function p8(e, t) {
  typeof t == "string" ? ci(e, t, void 0) : "length" in t && [].map.call(t, function(n) {
    ci(e, n, void 0);
  });
}
function aI(e) {
  var t = {};
  for (var n in e)
    Gr(e, n) && (t[n] = e[n]);
  return t;
}
var v8 = [].concat;
function rI(e) {
  return v8.apply([], e);
}
var g8 = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(rI([8, 16, 32, 64].map(function(e) {
  return ["Int", "Uint", "Float"].map(function(t) {
    return t + e + "Array";
  });
}))).filter(function(e) {
  return lr[e];
}), iI = new Set(g8.map(function(e) {
  return lr[e];
}));
function oI(e) {
  var t = {};
  for (var n in e)
    if (Gr(e, n)) {
      var a = e[n];
      t[n] = !a || typeof a != "object" || iI.has(a.constructor) ? a : oI(a);
    }
  return t;
}
function y8(e) {
  for (var t in e)
    if (Gr(e, t))
      return !1;
  return !0;
}
var tf = null;
function Xl(e) {
  tf = /* @__PURE__ */ new WeakMap();
  var t = Jy(e);
  return tf = null, t;
}
function Jy(e) {
  if (!e || typeof e != "object")
    return e;
  var t = tf.get(e);
  if (t)
    return t;
  if (va(e)) {
    t = [], tf.set(e, t);
    for (var n = 0, a = e.length; n < a; ++n)
      t.push(Jy(e[n]));
  } else if (iI.has(e.constructor))
    t = e;
  else {
    var r = Tu(e);
    t = r === Object.prototype ? {} : Object.create(r), tf.set(e, t);
    for (var i in e)
      Gr(e, i) && (t[i] = Jy(e[i]));
  }
  return t;
}
var b8 = {}.toString;
function Xy(e) {
  return b8.call(e).slice(8, -1);
}
var Zy = typeof Symbol < "u" ? Symbol.iterator : "@@iterator", w8 = typeof Zy == "symbol" ? function(e) {
  var t;
  return e != null && (t = e[Zy]) && t.apply(e);
} : function() {
  return null;
};
function Ol(e, t) {
  var n = e.indexOf(t);
  return n >= 0 && e.splice(n, 1), n >= 0;
}
var tu = {};
function jo(e) {
  var t, n, a, r;
  if (arguments.length === 1) {
    if (va(e))
      return e.slice();
    if (this === tu && typeof e == "string")
      return [e];
    if (r = w8(e)) {
      for (n = []; a = r.next(), !a.done; )
        n.push(a.value);
      return n;
    }
    if (e == null)
      return [e];
    if (t = e.length, typeof t == "number") {
      for (n = new Array(t); t--; )
        n[t] = e[t];
      return n;
    }
    return [e];
  }
  for (t = arguments.length, n = new Array(t); t--; )
    n[t] = arguments[t];
  return n;
}
var Mw = typeof Symbol < "u" ? function(e) {
  return e[Symbol.toStringTag] === "AsyncFunction";
} : function() {
  return !1;
}, k8 = [
  "Modify",
  "Bulk",
  "OpenFailed",
  "VersionChange",
  "Schema",
  "Upgrade",
  "InvalidTable",
  "MissingAPI",
  "NoSuchDatabase",
  "InvalidArgument",
  "SubTransaction",
  "Unsupported",
  "Internal",
  "DatabaseClosed",
  "PrematureCommit",
  "ForeignAwait"
], sI = [
  "Unknown",
  "Constraint",
  "Data",
  "TransactionInactive",
  "ReadOnly",
  "Version",
  "NotFound",
  "InvalidState",
  "InvalidAccess",
  "Abort",
  "Timeout",
  "QuotaExceeded",
  "Syntax",
  "DataClone"
], Rw = k8.concat(sI), S8 = {
  VersionChanged: "Database version changed by other database connection",
  DatabaseClosed: "Database has been closed",
  Abort: "Transaction aborted",
  TransactionInactive: "Transaction has already completed or failed",
  MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
};
function Wu(e, t) {
  this.name = e, this.message = t;
}
zu(Wu).from(Error).extend({
  toString: function() {
    return this.name + ": " + this.message;
  }
});
function lI(e, t) {
  return e + ". Errors: " + Object.keys(t).map(function(n) {
    return t[n].toString();
  }).filter(function(n, a, r) {
    return r.indexOf(n) === a;
  }).join(`
`);
}
function A_(e, t, n, a) {
  this.failures = t, this.failedKeys = a, this.successCount = n, this.message = lI(e, t);
}
zu(A_).from(Wu);
function ru(e, t) {
  this.name = "BulkError", this.failures = Object.keys(t).map(function(n) {
    return t[n];
  }), this.failuresByPos = t, this.message = lI(e, this.failures);
}
zu(ru).from(Wu);
var Lw = Rw.reduce(function(e, t) {
  return e[t] = t + "Error", e;
}, {}), C8 = Wu, Bt = Rw.reduce(function(e, t) {
  var n = t + "Error";
  function a(r, i) {
    this.name = n, r ? typeof r == "string" ? (this.message = "".concat(r).concat(i ? `
 ` + i : ""), this.inner = i || null) : typeof r == "object" && (this.message = "".concat(r.name, " ").concat(r.message), this.inner = r) : (this.message = S8[t] || n, this.inner = null);
  }
  return zu(a).from(C8), e[t] = a, e;
}, {});
Bt.Syntax = SyntaxError;
Bt.Type = TypeError;
Bt.Range = RangeError;
var mC = sI.reduce(function(e, t) {
  return e[t + "Error"] = Bt[t], e;
}, {});
function A8(e, t) {
  if (!e || e instanceof Wu || e instanceof TypeError || e instanceof SyntaxError || !e.name || !mC[e.name])
    return e;
  var n = new mC[e.name](t || e.message, e);
  return "stack" in e && Hs(n, "stack", { get: function() {
    return this.inner.stack;
  } }), n;
}
var up = Rw.reduce(function(e, t) {
  return ["Syntax", "Type", "Range"].indexOf(t) === -1 && (e[t + "Error"] = Bt[t]), e;
}, {});
up.ModifyError = A_;
up.DexieError = Wu;
up.BulkError = ru;
function Dn() {
}
function $f(e) {
  return e;
}
function x8(e, t) {
  return e == null || e === $f ? t : function(n) {
    return t(e(n));
  };
}
function Zl(e, t) {
  return function() {
    e.apply(this, arguments), t.apply(this, arguments);
  };
}
function T8(e, t) {
  return e === Dn ? t : function() {
    var n = e.apply(this, arguments);
    n !== void 0 && (arguments[0] = n);
    var a = this.onsuccess, r = this.onerror;
    this.onsuccess = null, this.onerror = null;
    var i = t.apply(this, arguments);
    return a && (this.onsuccess = this.onsuccess ? Zl(a, this.onsuccess) : a), r && (this.onerror = this.onerror ? Zl(r, this.onerror) : r), i !== void 0 ? i : n;
  };
}
function I8(e, t) {
  return e === Dn ? t : function() {
    e.apply(this, arguments);
    var n = this.onsuccess, a = this.onerror;
    this.onsuccess = this.onerror = null, t.apply(this, arguments), n && (this.onsuccess = this.onsuccess ? Zl(n, this.onsuccess) : n), a && (this.onerror = this.onerror ? Zl(a, this.onerror) : a);
  };
}
function E8(e, t) {
  return e === Dn ? t : function(n) {
    var a = e.apply(this, arguments);
    ui(n, a);
    var r = this.onsuccess, i = this.onerror;
    this.onsuccess = null, this.onerror = null;
    var o = t.apply(this, arguments);
    return r && (this.onsuccess = this.onsuccess ? Zl(r, this.onsuccess) : r), i && (this.onerror = this.onerror ? Zl(i, this.onerror) : i), a === void 0 ? o === void 0 ? void 0 : o : ui(a, o);
  };
}
function P8(e, t) {
  return e === Dn ? t : function() {
    return t.apply(this, arguments) === !1 ? !1 : e.apply(this, arguments);
  };
}
function Fw(e, t) {
  return e === Dn ? t : function() {
    var n = e.apply(this, arguments);
    if (n && typeof n.then == "function") {
      for (var a = this, r = arguments.length, i = new Array(r); r--; )
        i[r] = arguments[r];
      return n.then(function() {
        return t.apply(a, i);
      });
    }
    return t.apply(this, arguments);
  };
}
var wo = typeof location < "u" && /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
function cI(e, t) {
  wo = e;
}
var gf = {}, uI = 100, Nw = typeof Promise > "u" ? [] : function() {
  var e = Promise.resolve();
  if (typeof crypto > "u" || !crypto.subtle)
    return [e, Tu(e), e];
  var t = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
  return [
    t,
    Tu(t),
    e
  ];
}(), hC = Nw[0], _C = Nw[1], O8 = Nw[2], D8 = _C && _C.then, Vl = hC && hC.constructor, Uw = !!O8;
function B8() {
  queueMicrotask(M8);
}
var yf = function(e, t) {
  zd.push([e, t]), x_ && (B8(), x_ = !1);
}, eb = !0, x_ = !0, zl = [], Jh = [], tb = $f, Fs = {
  id: "global",
  global: !0,
  ref: 0,
  unhandleds: [],
  onunhandled: Dn,
  pgp: !1,
  env: {},
  finalize: Dn
}, Pt = Fs, zd = [], Wl = 0, Xh = [];
function wt(e) {
  if (typeof this != "object")
    throw new TypeError("Promises must be constructed via new");
  this._listeners = [], this._lib = !1;
  var t = this._PSD = Pt;
  if (typeof e != "function") {
    if (e !== gf)
      throw new TypeError("Not a function");
    this._state = arguments[1], this._value = arguments[2], this._state === !1 && ab(this, this._value);
    return;
  }
  this._state = null, this._value = null, ++t.ref, fI(this, e);
}
var nb = {
  get: function() {
    var e = Pt, t = T_;
    function n(a, r) {
      var i = this, o = !e.global && (e !== Pt || t !== T_), l = o && !Ws(), s = new wt(function(d, u) {
        $w(i, new dI(pC(a, e, o, l), pC(r, e, o, l), d, u, e));
      });
      return this._consoleTask && (s._consoleTask = this._consoleTask), s;
    }
    return n.prototype = gf, n;
  },
  set: function(e) {
    Hs(this, "then", e && e.prototype === gf ? nb : {
      get: function() {
        return e;
      },
      set: nb.set
    });
  }
};
Iu(wt.prototype, {
  then: nb,
  _then: function(e, t) {
    $w(this, new dI(null, null, e, t, Pt));
  },
  catch: function(e) {
    if (arguments.length === 1)
      return this.then(null, e);
    var t = arguments[0], n = arguments[1];
    return typeof t == "function" ? this.then(null, function(a) {
      return a instanceof t ? n(a) : Zh(a);
    }) : this.then(null, function(a) {
      return a && a.name === t ? n(a) : Zh(a);
    });
  },
  finally: function(e) {
    return this.then(function(t) {
      return wt.resolve(e()).then(function() {
        return t;
      });
    }, function(t) {
      return wt.resolve(e()).then(function() {
        return Zh(t);
      });
    });
  },
  timeout: function(e, t) {
    var n = this;
    return e < 1 / 0 ? new wt(function(a, r) {
      var i = setTimeout(function() {
        return r(new Bt.Timeout(t));
      }, e);
      n.then(a, r).finally(clearTimeout.bind(null, i));
    }) : this;
  }
});
typeof Symbol < "u" && Symbol.toStringTag && Hs(wt.prototype, Symbol.toStringTag, "Dexie.Promise");
Fs.env = hI();
function dI(e, t, n, a, r) {
  this.onFulfilled = typeof e == "function" ? e : null, this.onRejected = typeof t == "function" ? t : null, this.resolve = n, this.reject = a, this.psd = r;
}
Iu(wt, {
  all: function() {
    var e = jo.apply(null, arguments).map(I_);
    return new wt(function(t, n) {
      e.length === 0 && t([]);
      var a = e.length;
      e.forEach(function(r, i) {
        return wt.resolve(r).then(function(o) {
          e[i] = o, --a || t(e);
        }, n);
      });
    });
  },
  resolve: function(e) {
    if (e instanceof wt)
      return e;
    if (e && typeof e.then == "function")
      return new wt(function(n, a) {
        e.then(n, a);
      });
    var t = new wt(gf, !0, e);
    return t;
  },
  reject: Zh,
  race: function() {
    var e = jo.apply(null, arguments).map(I_);
    return new wt(function(t, n) {
      e.map(function(a) {
        return wt.resolve(a).then(t, n);
      });
    });
  },
  PSD: {
    get: function() {
      return Pt;
    },
    set: function(e) {
      return Pt = e;
    }
  },
  totalEchoes: { get: function() {
    return T_;
  } },
  newPSD: zs,
  usePSD: ec,
  scheduler: {
    get: function() {
      return yf;
    },
    set: function(e) {
      yf = e;
    }
  },
  rejectionMapper: {
    get: function() {
      return tb;
    },
    set: function(e) {
      tb = e;
    }
  },
  follow: function(e, t) {
    return new wt(function(n, a) {
      return zs(function(r, i) {
        var o = Pt;
        o.unhandleds = [], o.onunhandled = i, o.finalize = Zl(function() {
          var l = this;
          R8(function() {
            l.unhandleds.length === 0 ? r() : i(l.unhandleds[0]);
          });
        }, o.finalize), e();
      }, t, n, a);
    });
  }
});
Vl && (Vl.allSettled && Hs(wt, "allSettled", function() {
  var e = jo.apply(null, arguments).map(I_);
  return new wt(function(t) {
    e.length === 0 && t([]);
    var n = e.length, a = new Array(n);
    e.forEach(function(r, i) {
      return wt.resolve(r).then(function(o) {
        return a[i] = { status: "fulfilled", value: o };
      }, function(o) {
        return a[i] = { status: "rejected", reason: o };
      }).then(function() {
        return --n || t(a);
      });
    });
  });
}), Vl.any && typeof AggregateError < "u" && Hs(wt, "any", function() {
  var e = jo.apply(null, arguments).map(I_);
  return new wt(function(t, n) {
    e.length === 0 && n(new AggregateError([]));
    var a = e.length, r = new Array(a);
    e.forEach(function(i, o) {
      return wt.resolve(i).then(function(l) {
        return t(l);
      }, function(l) {
        r[o] = l, --a || n(new AggregateError(r));
      });
    });
  });
}), Vl.withResolvers && (wt.withResolvers = Vl.withResolvers));
function fI(e, t) {
  try {
    t(function(n) {
      if (e._state === null) {
        if (n === e)
          throw new TypeError("A promise cannot be resolved with itself.");
        var a = e._lib && ju();
        n && typeof n.then == "function" ? fI(e, function(r, i) {
          n instanceof wt ? n._then(r, i) : n.then(r, i);
        }) : (e._state = !0, e._value = n, mI(e)), a && Ku();
      }
    }, ab.bind(null, e));
  } catch (n) {
    ab(e, n);
  }
}
function ab(e, t) {
  if (Jh.push(t), e._state === null) {
    var n = e._lib && ju();
    t = tb(t), e._state = !1, e._value = t, L8(e), mI(e), n && Ku();
  }
}
function mI(e) {
  var t = e._listeners;
  e._listeners = [];
  for (var n = 0, a = t.length; n < a; ++n)
    $w(e, t[n]);
  var r = e._PSD;
  --r.ref || r.finalize(), Wl === 0 && (++Wl, yf(function() {
    --Wl === 0 && qw();
  }, []));
}
function $w(e, t) {
  if (e._state === null) {
    e._listeners.push(t);
    return;
  }
  var n = e._state ? t.onFulfilled : t.onRejected;
  if (n === null)
    return (e._state ? t.resolve : t.reject)(e._value);
  ++t.psd.ref, ++Wl, yf(V8, [n, e, t]);
}
function V8(e, t, n) {
  try {
    var a, r = t._value;
    !t._state && Jh.length && (Jh = []), a = wo && t._consoleTask ? t._consoleTask.run(function() {
      return e(r);
    }) : e(r), !t._state && Jh.indexOf(r) === -1 && F8(t), n.resolve(a);
  } catch (i) {
    n.reject(i);
  } finally {
    --Wl === 0 && qw(), --n.psd.ref || n.psd.finalize();
  }
}
function M8() {
  ec(Fs, function() {
    ju() && Ku();
  });
}
function ju() {
  var e = eb;
  return eb = !1, x_ = !1, e;
}
function Ku() {
  var e, t, n;
  do
    for (; zd.length > 0; )
      for (e = zd, zd = [], n = e.length, t = 0; t < n; ++t) {
        var a = e[t];
        a[0].apply(null, a[1]);
      }
  while (zd.length > 0);
  eb = !0, x_ = !0;
}
function qw() {
  var e = zl;
  zl = [], e.forEach(function(a) {
    a._PSD.onunhandled.call(null, a._value, a);
  });
  for (var t = Xh.slice(0), n = t.length; n; )
    t[--n]();
}
function R8(e) {
  function t() {
    e(), Xh.splice(Xh.indexOf(t), 1);
  }
  Xh.push(t), ++Wl, yf(function() {
    --Wl === 0 && qw();
  }, []);
}
function L8(e) {
  zl.some(function(t) {
    return t._value === e._value;
  }) || zl.push(e);
}
function F8(e) {
  for (var t = zl.length; t; )
    if (zl[--t]._value === e._value) {
      zl.splice(t, 1);
      return;
    }
}
function Zh(e) {
  return new wt(gf, !1, e);
}
function ra(e, t) {
  var n = Pt;
  return function() {
    var a = ju(), r = Pt;
    try {
      return js(n, !0), e.apply(this, arguments);
    } catch (i) {
      t && t(i);
    } finally {
      js(r, !1), a && Ku();
    }
  };
}
var er = { awaits: 0, echoes: 0, id: 0 }, N8 = 0, e_ = [], t_ = 0, T_ = 0, U8 = 0;
function zs(e, t, n, a) {
  var r = Pt, i = Object.create(r);
  i.parent = r, i.ref = 0, i.global = !1, i.id = ++U8, Fs.env, i.env = Uw ? {
    Promise: wt,
    PromiseProp: { value: wt, configurable: !0, writable: !0 },
    all: wt.all,
    race: wt.race,
    allSettled: wt.allSettled,
    any: wt.any,
    resolve: wt.resolve,
    reject: wt.reject
  } : {}, t && ui(i, t), ++r.ref, i.finalize = function() {
    --this.parent.ref || this.parent.finalize();
  };
  var o = ec(i, e, n, a);
  return i.ref === 0 && i.finalize(), o;
}
function Yu() {
  return er.id || (er.id = ++N8), ++er.awaits, er.echoes += uI, er.id;
}
function Ws() {
  return er.awaits ? (--er.awaits === 0 && (er.id = 0), er.echoes = er.awaits * uI, !0) : !1;
}
("" + D8).indexOf("[native code]") === -1 && (Yu = Ws = Dn);
function I_(e) {
  return er.echoes && e && e.constructor === Vl ? (Yu(), e.then(function(t) {
    return Ws(), t;
  }, function(t) {
    return Ws(), Ma(t);
  })) : e;
}
function $8(e) {
  ++T_, (!er.echoes || --er.echoes === 0) && (er.echoes = er.awaits = er.id = 0), e_.push(Pt), js(e, !0);
}
function q8() {
  var e = e_[e_.length - 1];
  e_.pop(), js(e, !1);
}
function js(e, t) {
  var n = Pt;
  if ((t ? er.echoes && (!t_++ || e !== Pt) : t_ && (!--t_ || e !== Pt)) && queueMicrotask(t ? $8.bind(null, e) : q8), e !== Pt && (Pt = e, n === Fs && (Fs.env = hI()), Uw)) {
    var a = Fs.env.Promise, r = e.env;
    (n.global || e.global) && (Object.defineProperty(lr, "Promise", r.PromiseProp), a.all = r.all, a.race = r.race, a.resolve = r.resolve, a.reject = r.reject, r.allSettled && (a.allSettled = r.allSettled), r.any && (a.any = r.any));
  }
}
function hI() {
  var e = lr.Promise;
  return Uw ? {
    Promise: e,
    PromiseProp: Object.getOwnPropertyDescriptor(lr, "Promise"),
    all: e.all,
    race: e.race,
    allSettled: e.allSettled,
    any: e.any,
    resolve: e.resolve,
    reject: e.reject
  } : {};
}
function ec(e, t, n, a, r) {
  var i = Pt;
  try {
    return js(e, !0), t(n, a, r);
  } finally {
    js(i, !1);
  }
}
function pC(e, t, n, a) {
  return typeof e != "function" ? e : function() {
    var r = Pt;
    n && Yu(), js(t, !0);
    try {
      return e.apply(this, arguments);
    } finally {
      js(r, !1), a && queueMicrotask(Ws);
    }
  };
}
function Ng(e) {
  Promise === Vl && er.echoes === 0 ? t_ === 0 ? e() : enqueueNativeMicroTask(e) : setTimeout(e, 0);
}
var Ma = wt.reject;
function rb(e, t, n, a) {
  if (!e.idbdb || !e._state.openComplete && !Pt.letThrough && !e._vip) {
    if (e._state.openComplete)
      return Ma(new Bt.DatabaseClosed(e._state.dbOpenError));
    if (!e._state.isBeingOpened) {
      if (!e._state.autoOpen)
        return Ma(new Bt.DatabaseClosed());
      e.open().catch(Dn);
    }
    return e._state.dbReadyPromise.then(function() {
      return rb(e, t, n, a);
    });
  } else {
    var r = e._createTransaction(t, n, e._dbSchema);
    try {
      r.create(), e._state.PR1398_maxLoop = 3;
    } catch (i) {
      return i.name === Lw.InvalidState && e.isOpen() && --e._state.PR1398_maxLoop > 0 ? (console.warn("Dexie: Need to reopen db"), e.close({ disableAutoOpen: !1 }), e.open().then(function() {
        return rb(e, t, n, a);
      })) : Ma(i);
    }
    return r._promise(t, function(i, o) {
      return zs(function() {
        return Pt.trans = r, a(i, o, r);
      });
    }).then(function(i) {
      if (t === "readwrite")
        try {
          r.idbtrans.commit();
        } catch {
        }
      return t === "readonly" ? i : r._completion.then(function() {
        return i;
      });
    });
  }
}
var vC = "4.0.11", Nl = "￿", ib = -1 / 0, $o = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.", _I = "String expected.", mu = [], dp = "__dbnames", Ug = "readonly", $g = "readwrite";
function tc(e, t) {
  return e ? t ? function() {
    return e.apply(this, arguments) && t.apply(this, arguments);
  } : e : t;
}
var pI = {
  type: 3,
  lower: -1 / 0,
  lowerOpen: !1,
  upper: [[]],
  upperOpen: !1
};
function xh(e) {
  return typeof e == "string" && !/\./.test(e) ? function(t) {
    return t[e] === void 0 && e in t && (t = Xl(t), delete t[e]), t;
  } : function(t) {
    return t;
  };
}
function H8() {
  throw Bt.Type();
}
function _n(e, t) {
  try {
    var n = gC(e), a = gC(t);
    if (n !== a)
      return n === "Array" ? 1 : a === "Array" ? -1 : n === "binary" ? 1 : a === "binary" ? -1 : n === "string" ? 1 : a === "string" ? -1 : n === "Date" ? 1 : a !== "Date" ? NaN : -1;
    switch (n) {
      case "number":
      case "Date":
      case "string":
        return e > t ? 1 : e < t ? -1 : 0;
      case "binary":
        return W8(yC(e), yC(t));
      case "Array":
        return z8(e, t);
    }
  } catch {
  }
  return NaN;
}
function z8(e, t) {
  for (var n = e.length, a = t.length, r = n < a ? n : a, i = 0; i < r; ++i) {
    var o = _n(e[i], t[i]);
    if (o !== 0)
      return o;
  }
  return n === a ? 0 : n < a ? -1 : 1;
}
function W8(e, t) {
  for (var n = e.length, a = t.length, r = n < a ? n : a, i = 0; i < r; ++i)
    if (e[i] !== t[i])
      return e[i] < t[i] ? -1 : 1;
  return n === a ? 0 : n < a ? -1 : 1;
}
function gC(e) {
  var t = typeof e;
  if (t !== "object")
    return t;
  if (ArrayBuffer.isView(e))
    return "binary";
  var n = Xy(e);
  return n === "ArrayBuffer" ? "binary" : n;
}
function yC(e) {
  return e instanceof Uint8Array ? e : ArrayBuffer.isView(e) ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : new Uint8Array(e);
}
var vI = function() {
  function e() {
  }
  return e.prototype._trans = function(t, n, a) {
    var r = this._tx || Pt.trans, i = this.name, o = wo && typeof console < "u" && console.createTask && console.createTask("Dexie: ".concat(t === "readonly" ? "read" : "write", " ").concat(this.name));
    function l(u, f, h) {
      if (!h.schema[i])
        throw new Bt.NotFound("Table " + i + " not part of transaction");
      return n(h.idbtrans, h);
    }
    var s = ju();
    try {
      var d = r && r.db._novip === this.db._novip ? r === Pt.trans ? r._promise(t, l, a) : zs(function() {
        return r._promise(t, l, a);
      }, { trans: r, transless: Pt.transless || Pt }) : rb(this.db, t, [this.name], l);
      return o && (d._consoleTask = o, d = d.catch(function(u) {
        return console.trace(u), Ma(u);
      })), d;
    } finally {
      s && Ku();
    }
  }, e.prototype.get = function(t, n) {
    var a = this;
    return t && t.constructor === Object ? this.where(t).first(n) : t == null ? Ma(new Bt.Type("Invalid argument to Table.get()")) : this._trans("readonly", function(r) {
      return a.core.get({ trans: r, key: t }).then(function(i) {
        return a.hook.reading.fire(i);
      });
    }).then(n);
  }, e.prototype.where = function(t) {
    if (typeof t == "string")
      return new this.db.WhereClause(this, t);
    if (va(t))
      return new this.db.WhereClause(this, "[".concat(t.join("+"), "]"));
    var n = ar(t);
    if (n.length === 1)
      return this.where(n[0]).equals(t[n[0]]);
    var a = this.schema.indexes.concat(this.schema.primKey).filter(function(u) {
      if (u.compound && n.every(function(h) {
        return u.keyPath.indexOf(h) >= 0;
      })) {
        for (var f = 0; f < n.length; ++f)
          if (n.indexOf(u.keyPath[f]) === -1)
            return !1;
        return !0;
      }
      return !1;
    }).sort(function(u, f) {
      return u.keyPath.length - f.keyPath.length;
    })[0];
    if (a && this.db._maxKey !== Nl) {
      var r = a.keyPath.slice(0, n.length);
      return this.where(r).equals(r.map(function(u) {
        return t[u];
      }));
    }
    !a && wo && console.warn("The query ".concat(JSON.stringify(t), " on ").concat(this.name, " would benefit from a ") + "compound index [".concat(n.join("+"), "]"));
    var i = this.schema.idxByName;
    function o(u, f) {
      return _n(u, f) === 0;
    }
    var l = n.reduce(function(u, f) {
      var h = u[0], g = u[1], v = i[f], w = t[f];
      return [
        h || v,
        h || !v ? tc(g, v && v.multi ? function(b) {
          var p = Jo(b, f);
          return va(p) && p.some(function(y) {
            return o(w, y);
          });
        } : function(b) {
          return o(w, Jo(b, f));
        }) : g
      ];
    }, [null, null]), s = l[0], d = l[1];
    return s ? this.where(s.name).equals(t[s.keyPath]).filter(d) : a ? this.filter(d) : this.where(n).equals("");
  }, e.prototype.filter = function(t) {
    return this.toCollection().and(t);
  }, e.prototype.count = function(t) {
    return this.toCollection().count(t);
  }, e.prototype.offset = function(t) {
    return this.toCollection().offset(t);
  }, e.prototype.limit = function(t) {
    return this.toCollection().limit(t);
  }, e.prototype.each = function(t) {
    return this.toCollection().each(t);
  }, e.prototype.toArray = function(t) {
    return this.toCollection().toArray(t);
  }, e.prototype.toCollection = function() {
    return new this.db.Collection(new this.db.WhereClause(this));
  }, e.prototype.orderBy = function(t) {
    return new this.db.Collection(new this.db.WhereClause(this, va(t) ? "[".concat(t.join("+"), "]") : t));
  }, e.prototype.reverse = function() {
    return this.toCollection().reverse();
  }, e.prototype.mapToClass = function(t) {
    var n = this, a = n.db, r = n.name;
    this.schema.mappedClass = t, t.prototype instanceof H8 && (t = function(s) {
      d8(d, s);
      function d() {
        return s !== null && s.apply(this, arguments) || this;
      }
      return Object.defineProperty(d.prototype, "db", {
        get: function() {
          return a;
        },
        enumerable: !1,
        configurable: !0
      }), d.prototype.table = function() {
        return r;
      }, d;
    }(t));
    for (var i = /* @__PURE__ */ new Set(), o = t.prototype; o; o = Tu(o))
      Object.getOwnPropertyNames(o).forEach(function(s) {
        return i.add(s);
      });
    var l = function(s) {
      if (!s)
        return s;
      var d = Object.create(t.prototype);
      for (var u in s)
        if (!i.has(u))
          try {
            d[u] = s[u];
          } catch {
          }
      return d;
    };
    return this.schema.readHook && this.hook.reading.unsubscribe(this.schema.readHook), this.schema.readHook = l, this.hook("reading", l), t;
  }, e.prototype.defineClass = function() {
    function t(n) {
      ui(this, n);
    }
    return this.mapToClass(t);
  }, e.prototype.add = function(t, n) {
    var a = this, r = this.schema.primKey, i = r.auto, o = r.keyPath, l = t;
    return o && i && (l = xh(o)(t)), this._trans("readwrite", function(s) {
      return a.core.mutate({ trans: s, type: "add", keys: n != null ? [n] : null, values: [l] });
    }).then(function(s) {
      return s.numFailures ? wt.reject(s.failures[0]) : s.lastResult;
    }).then(function(s) {
      if (o)
        try {
          ci(t, o, s);
        } catch {
        }
      return s;
    });
  }, e.prototype.update = function(t, n) {
    if (typeof t == "object" && !va(t)) {
      var a = Jo(t, this.schema.primKey.keyPath);
      return a === void 0 ? Ma(new Bt.InvalidArgument("Given object does not contain its primary key")) : this.where(":id").equals(a).modify(n);
    } else
      return this.where(":id").equals(t).modify(n);
  }, e.prototype.put = function(t, n) {
    var a = this, r = this.schema.primKey, i = r.auto, o = r.keyPath, l = t;
    return o && i && (l = xh(o)(t)), this._trans("readwrite", function(s) {
      return a.core.mutate({ trans: s, type: "put", values: [l], keys: n != null ? [n] : null });
    }).then(function(s) {
      return s.numFailures ? wt.reject(s.failures[0]) : s.lastResult;
    }).then(function(s) {
      if (o)
        try {
          ci(t, o, s);
        } catch {
        }
      return s;
    });
  }, e.prototype.delete = function(t) {
    var n = this;
    return this._trans("readwrite", function(a) {
      return n.core.mutate({ trans: a, type: "delete", keys: [t] });
    }).then(function(a) {
      return a.numFailures ? wt.reject(a.failures[0]) : void 0;
    });
  }, e.prototype.clear = function() {
    var t = this;
    return this._trans("readwrite", function(n) {
      return t.core.mutate({ trans: n, type: "deleteRange", range: pI });
    }).then(function(n) {
      return n.numFailures ? wt.reject(n.failures[0]) : void 0;
    });
  }, e.prototype.bulkGet = function(t) {
    var n = this;
    return this._trans("readonly", function(a) {
      return n.core.getMany({
        keys: t,
        trans: a
      }).then(function(r) {
        return r.map(function(i) {
          return n.hook.reading.fire(i);
        });
      });
    });
  }, e.prototype.bulkAdd = function(t, n, a) {
    var r = this, i = Array.isArray(n) ? n : void 0;
    a = a || (i ? void 0 : n);
    var o = a ? a.allKeys : void 0;
    return this._trans("readwrite", function(l) {
      var s = r.schema.primKey, d = s.auto, u = s.keyPath;
      if (u && i)
        throw new Bt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
      if (i && i.length !== t.length)
        throw new Bt.InvalidArgument("Arguments objects and keys must have the same length");
      var f = t.length, h = u && d ? t.map(xh(u)) : t;
      return r.core.mutate({ trans: l, type: "add", keys: i, values: h, wantResults: o }).then(function(g) {
        var v = g.numFailures, w = g.results, b = g.lastResult, p = g.failures, y = o ? w : b;
        if (v === 0)
          return y;
        throw new ru("".concat(r.name, ".bulkAdd(): ").concat(v, " of ").concat(f, " operations failed"), p);
      });
    });
  }, e.prototype.bulkPut = function(t, n, a) {
    var r = this, i = Array.isArray(n) ? n : void 0;
    a = a || (i ? void 0 : n);
    var o = a ? a.allKeys : void 0;
    return this._trans("readwrite", function(l) {
      var s = r.schema.primKey, d = s.auto, u = s.keyPath;
      if (u && i)
        throw new Bt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
      if (i && i.length !== t.length)
        throw new Bt.InvalidArgument("Arguments objects and keys must have the same length");
      var f = t.length, h = u && d ? t.map(xh(u)) : t;
      return r.core.mutate({ trans: l, type: "put", keys: i, values: h, wantResults: o }).then(function(g) {
        var v = g.numFailures, w = g.results, b = g.lastResult, p = g.failures, y = o ? w : b;
        if (v === 0)
          return y;
        throw new ru("".concat(r.name, ".bulkPut(): ").concat(v, " of ").concat(f, " operations failed"), p);
      });
    });
  }, e.prototype.bulkUpdate = function(t) {
    var n = this, a = this.core, r = t.map(function(l) {
      return l.key;
    }), i = t.map(function(l) {
      return l.changes;
    }), o = [];
    return this._trans("readwrite", function(l) {
      return a.getMany({ trans: l, keys: r, cache: "clone" }).then(function(s) {
        var d = [], u = [];
        t.forEach(function(h, g) {
          var v = h.key, w = h.changes, b = s[g];
          if (b) {
            for (var p = 0, y = Object.keys(w); p < y.length; p++) {
              var S = y[p], E = w[S];
              if (S === n.schema.primKey.keyPath) {
                if (_n(E, v) !== 0)
                  throw new Bt.Constraint("Cannot update primary key in bulkUpdate()");
              } else
                ci(b, S, E);
            }
            o.push(g), d.push(v), u.push(b);
          }
        });
        var f = d.length;
        return a.mutate({
          trans: l,
          type: "put",
          keys: d,
          values: u,
          updates: {
            keys: r,
            changeSpecs: i
          }
        }).then(function(h) {
          var g = h.numFailures, v = h.failures;
          if (g === 0)
            return f;
          for (var w = 0, b = Object.keys(v); w < b.length; w++) {
            var p = b[w], y = o[Number(p)];
            if (y != null) {
              var S = v[p];
              delete v[p], v[y] = S;
            }
          }
          throw new ru("".concat(n.name, ".bulkUpdate(): ").concat(g, " of ").concat(f, " operations failed"), v);
        });
      });
    });
  }, e.prototype.bulkDelete = function(t) {
    var n = this, a = t.length;
    return this._trans("readwrite", function(r) {
      return n.core.mutate({ trans: r, type: "delete", keys: t });
    }).then(function(r) {
      var i = r.numFailures, o = r.lastResult, l = r.failures;
      if (i === 0)
        return o;
      throw new ru("".concat(n.name, ".bulkDelete(): ").concat(i, " of ").concat(a, " operations failed"), l);
    });
  }, e;
}();
function qf(e) {
  var t = {}, n = function(l, s) {
    if (s) {
      for (var d = arguments.length, u = new Array(d - 1); --d; )
        u[d - 1] = arguments[d];
      return t[l].subscribe.apply(null, u), e;
    } else if (typeof l == "string")
      return t[l];
  };
  n.addEventType = i;
  for (var a = 1, r = arguments.length; a < r; ++a)
    i(arguments[a]);
  return n;
  function i(l, s, d) {
    if (typeof l == "object")
      return o(l);
    s || (s = P8), d || (d = Dn);
    var u = {
      subscribers: [],
      fire: d,
      subscribe: function(f) {
        u.subscribers.indexOf(f) === -1 && (u.subscribers.push(f), u.fire = s(u.fire, f));
      },
      unsubscribe: function(f) {
        u.subscribers = u.subscribers.filter(function(h) {
          return h !== f;
        }), u.fire = u.subscribers.reduce(s, d);
      }
    };
    return t[l] = n[l] = u, u;
  }
  function o(l) {
    ar(l).forEach(function(s) {
      var d = l[s];
      if (va(d))
        i(s, l[s][0], l[s][1]);
      else if (d === "asap")
        var u = i(s, $f, function() {
          for (var h = arguments.length, g = new Array(h); h--; )
            g[h] = arguments[h];
          u.subscribers.forEach(function(v) {
            nI(function() {
              v.apply(null, g);
            });
          });
        });
      else
        throw new Bt.InvalidArgument("Invalid event config");
    });
  }
}
function Hf(e, t) {
  return zu(t).from({ prototype: e }), t;
}
function j8(e) {
  return Hf(vI.prototype, function(n, a, r) {
    this.db = e, this._tx = r, this.name = n, this.schema = a, this.hook = e._allTables[n] ? e._allTables[n].hook : qf(null, {
      creating: [T8, Dn],
      reading: [x8, $f],
      updating: [E8, Dn],
      deleting: [I8, Dn]
    });
  });
}
function Yc(e, t) {
  return !(e.filter || e.algorithm || e.or) && (t ? e.justLimit : !e.replayFilter);
}
function qg(e, t) {
  e.filter = tc(e.filter, t);
}
function Hg(e, t, n) {
  var a = e.replayFilter;
  e.replayFilter = a ? function() {
    return tc(a(), t());
  } : t, e.justLimit = n && !a;
}
function K8(e, t) {
  e.isMatch = tc(e.isMatch, t);
}
function n_(e, t) {
  if (e.isPrimKey)
    return t.primaryKey;
  var n = t.getIndexByKeyPath(e.index);
  if (!n)
    throw new Bt.Schema("KeyPath " + e.index + " on object store " + t.name + " is not indexed");
  return n;
}
function bC(e, t, n) {
  var a = n_(e, t.schema);
  return t.openCursor({
    trans: n,
    values: !e.keysOnly,
    reverse: e.dir === "prev",
    unique: !!e.unique,
    query: {
      index: a,
      range: e.range
    }
  });
}
function Th(e, t, n, a) {
  var r = e.replayFilter ? tc(e.filter, e.replayFilter()) : e.filter;
  if (e.or) {
    var i = {}, o = function(l, s, d) {
      if (!r || r(s, d, function(h) {
        return s.stop(h);
      }, function(h) {
        return s.fail(h);
      })) {
        var u = s.primaryKey, f = "" + u;
        f === "[object ArrayBuffer]" && (f = "" + new Uint8Array(u)), Gr(i, f) || (i[f] = !0, t(l, s, d));
      }
    };
    return Promise.all([
      e.or._iterate(o, n),
      wC(bC(e, a, n), e.algorithm, o, !e.keysOnly && e.valueMapper)
    ]);
  } else
    return wC(bC(e, a, n), tc(e.algorithm, r), t, !e.keysOnly && e.valueMapper);
}
function wC(e, t, n, a) {
  var r = a ? function(o, l, s) {
    return n(a(o), l, s);
  } : n, i = ra(r);
  return e.then(function(o) {
    if (o)
      return o.start(function() {
        var l = function() {
          return o.continue();
        };
        (!t || t(o, function(s) {
          return l = s;
        }, function(s) {
          o.stop(s), l = Dn;
        }, function(s) {
          o.fail(s), l = Dn;
        })) && i(o.value, o, function(s) {
          return l = s;
        }), l();
      });
  });
}
var Y8 = function() {
  function e(t) {
    this["@@propmod"] = t;
  }
  return e.prototype.execute = function(t) {
    var n, a = this["@@propmod"];
    if (a.add !== void 0) {
      var r = a.add;
      if (va(r))
        return C_(C_([], va(t) ? t : [], !0), r).sort();
      if (typeof r == "number")
        return (Number(t) || 0) + r;
      if (typeof r == "bigint")
        try {
          return BigInt(t) + r;
        } catch {
          return BigInt(0) + r;
        }
      throw new TypeError("Invalid term ".concat(r));
    }
    if (a.remove !== void 0) {
      var i = a.remove;
      if (va(i))
        return va(t) ? t.filter(function(l) {
          return !i.includes(l);
        }).sort() : [];
      if (typeof i == "number")
        return Number(t) - i;
      if (typeof i == "bigint")
        try {
          return BigInt(t) - i;
        } catch {
          return BigInt(0) - i;
        }
      throw new TypeError("Invalid subtrahend ".concat(i));
    }
    var o = (n = a.replacePrefix) === null || n === void 0 ? void 0 : n[0];
    return o && typeof t == "string" && t.startsWith(o) ? a.replacePrefix[1] + t.substring(o.length) : t;
  }, e;
}(), G8 = function() {
  function e() {
  }
  return e.prototype._read = function(t, n) {
    var a = this._ctx;
    return a.error ? a.table._trans(null, Ma.bind(null, a.error)) : a.table._trans("readonly", t).then(n);
  }, e.prototype._write = function(t) {
    var n = this._ctx;
    return n.error ? n.table._trans(null, Ma.bind(null, n.error)) : n.table._trans("readwrite", t, "locked");
  }, e.prototype._addAlgorithm = function(t) {
    var n = this._ctx;
    n.algorithm = tc(n.algorithm, t);
  }, e.prototype._iterate = function(t, n) {
    return Th(this._ctx, t, n, this._ctx.table.core);
  }, e.prototype.clone = function(t) {
    var n = Object.create(this.constructor.prototype), a = Object.create(this._ctx);
    return t && ui(a, t), n._ctx = a, n;
  }, e.prototype.raw = function() {
    return this._ctx.valueMapper = null, this;
  }, e.prototype.each = function(t) {
    var n = this._ctx;
    return this._read(function(a) {
      return Th(n, t, a, n.table.core);
    });
  }, e.prototype.count = function(t) {
    var n = this;
    return this._read(function(a) {
      var r = n._ctx, i = r.table.core;
      if (Yc(r, !0))
        return i.count({
          trans: a,
          query: {
            index: n_(r, i.schema),
            range: r.range
          }
        }).then(function(l) {
          return Math.min(l, r.limit);
        });
      var o = 0;
      return Th(r, function() {
        return ++o, !1;
      }, a, i).then(function() {
        return o;
      });
    }).then(t);
  }, e.prototype.sortBy = function(t, n) {
    var a = t.split(".").reverse(), r = a[0], i = a.length - 1;
    function o(d, u) {
      return u ? o(d[a[u]], u - 1) : d[r];
    }
    var l = this._ctx.dir === "next" ? 1 : -1;
    function s(d, u) {
      var f = o(d, i), h = o(u, i);
      return _n(f, h) * l;
    }
    return this.toArray(function(d) {
      return d.sort(s);
    }).then(n);
  }, e.prototype.toArray = function(t) {
    var n = this;
    return this._read(function(a) {
      var r = n._ctx;
      if (r.dir === "next" && Yc(r, !0) && r.limit > 0) {
        var i = r.valueMapper, o = n_(r, r.table.core.schema);
        return r.table.core.query({
          trans: a,
          limit: r.limit,
          values: !0,
          query: {
            index: o,
            range: r.range
          }
        }).then(function(s) {
          var d = s.result;
          return i ? d.map(i) : d;
        });
      } else {
        var l = [];
        return Th(r, function(s) {
          return l.push(s);
        }, a, r.table.core).then(function() {
          return l;
        });
      }
    }, t);
  }, e.prototype.offset = function(t) {
    var n = this._ctx;
    return t <= 0 ? this : (n.offset += t, Yc(n) ? Hg(n, function() {
      var a = t;
      return function(r, i) {
        return a === 0 ? !0 : a === 1 ? (--a, !1) : (i(function() {
          r.advance(a), a = 0;
        }), !1);
      };
    }) : Hg(n, function() {
      var a = t;
      return function() {
        return --a < 0;
      };
    }), this);
  }, e.prototype.limit = function(t) {
    return this._ctx.limit = Math.min(this._ctx.limit, t), Hg(this._ctx, function() {
      var n = t;
      return function(a, r, i) {
        return --n <= 0 && r(i), n >= 0;
      };
    }, !0), this;
  }, e.prototype.until = function(t, n) {
    return qg(this._ctx, function(a, r, i) {
      return t(a.value) ? (r(i), n) : !0;
    }), this;
  }, e.prototype.first = function(t) {
    return this.limit(1).toArray(function(n) {
      return n[0];
    }).then(t);
  }, e.prototype.last = function(t) {
    return this.reverse().first(t);
  }, e.prototype.filter = function(t) {
    return qg(this._ctx, function(n) {
      return t(n.value);
    }), K8(this._ctx, t), this;
  }, e.prototype.and = function(t) {
    return this.filter(t);
  }, e.prototype.or = function(t) {
    return new this.db.WhereClause(this._ctx.table, t, this);
  }, e.prototype.reverse = function() {
    return this._ctx.dir = this._ctx.dir === "prev" ? "next" : "prev", this._ondirectionchange && this._ondirectionchange(this._ctx.dir), this;
  }, e.prototype.desc = function() {
    return this.reverse();
  }, e.prototype.eachKey = function(t) {
    var n = this._ctx;
    return n.keysOnly = !n.isMatch, this.each(function(a, r) {
      t(r.key, r);
    });
  }, e.prototype.eachUniqueKey = function(t) {
    return this._ctx.unique = "unique", this.eachKey(t);
  }, e.prototype.eachPrimaryKey = function(t) {
    var n = this._ctx;
    return n.keysOnly = !n.isMatch, this.each(function(a, r) {
      t(r.primaryKey, r);
    });
  }, e.prototype.keys = function(t) {
    var n = this._ctx;
    n.keysOnly = !n.isMatch;
    var a = [];
    return this.each(function(r, i) {
      a.push(i.key);
    }).then(function() {
      return a;
    }).then(t);
  }, e.prototype.primaryKeys = function(t) {
    var n = this._ctx;
    if (n.dir === "next" && Yc(n, !0) && n.limit > 0)
      return this._read(function(r) {
        var i = n_(n, n.table.core.schema);
        return n.table.core.query({
          trans: r,
          values: !1,
          limit: n.limit,
          query: {
            index: i,
            range: n.range
          }
        });
      }).then(function(r) {
        var i = r.result;
        return i;
      }).then(t);
    n.keysOnly = !n.isMatch;
    var a = [];
    return this.each(function(r, i) {
      a.push(i.primaryKey);
    }).then(function() {
      return a;
    }).then(t);
  }, e.prototype.uniqueKeys = function(t) {
    return this._ctx.unique = "unique", this.keys(t);
  }, e.prototype.firstKey = function(t) {
    return this.limit(1).keys(function(n) {
      return n[0];
    }).then(t);
  }, e.prototype.lastKey = function(t) {
    return this.reverse().firstKey(t);
  }, e.prototype.distinct = function() {
    var t = this._ctx, n = t.index && t.table.schema.idxByName[t.index];
    if (!n || !n.multi)
      return this;
    var a = {};
    return qg(this._ctx, function(r) {
      var i = r.primaryKey.toString(), o = Gr(a, i);
      return a[i] = !0, !o;
    }), this;
  }, e.prototype.modify = function(t) {
    var n = this, a = this._ctx;
    return this._write(function(r) {
      var i;
      if (typeof t == "function")
        i = t;
      else {
        var o = ar(t), l = o.length;
        i = function(y) {
          for (var S = !1, E = 0; E < l; ++E) {
            var C = o[E], D = t[C], P = Jo(y, C);
            D instanceof Y8 ? (ci(y, C, D.execute(P)), S = !0) : P !== D && (ci(y, C, D), S = !0);
          }
          return S;
        };
      }
      var s = a.table.core, d = s.schema.primaryKey, u = d.outbound, f = d.extractKey, h = 200, g = n.db._options.modifyChunkSize;
      g && (typeof g == "object" ? h = g[s.name] || g["*"] || 200 : h = g);
      var v = [], w = 0, b = [], p = function(y, S) {
        var E = S.failures, C = S.numFailures;
        w += y - C;
        for (var D = 0, P = ar(E); D < P.length; D++) {
          var O = P[D];
          v.push(E[O]);
        }
      };
      return n.clone().primaryKeys().then(function(y) {
        var S = Yc(a) && a.limit === 1 / 0 && (typeof t != "function" || t === zg) && {
          index: a.index,
          range: a.range
        }, E = function(C) {
          var D = Math.min(h, y.length - C);
          return s.getMany({
            trans: r,
            keys: y.slice(C, C + D),
            cache: "immutable"
          }).then(function(P) {
            for (var O = [], T = [], A = u ? [] : null, V = [], M = 0; M < D; ++M) {
              var B = P[M], N = {
                value: Xl(B),
                primKey: y[C + M]
              };
              i.call(N, N.value, N) !== !1 && (N.value == null ? V.push(y[C + M]) : !u && _n(f(B), f(N.value)) !== 0 ? (V.push(y[C + M]), O.push(N.value)) : (T.push(N.value), u && A.push(y[C + M])));
            }
            return Promise.resolve(O.length > 0 && s.mutate({ trans: r, type: "add", values: O }).then(function(H) {
              for (var j in H.failures)
                V.splice(parseInt(j), 1);
              p(O.length, H);
            })).then(function() {
              return (T.length > 0 || S && typeof t == "object") && s.mutate({
                trans: r,
                type: "put",
                keys: A,
                values: T,
                criteria: S,
                changeSpec: typeof t != "function" && t,
                isAdditionalChunk: C > 0
              }).then(function(H) {
                return p(T.length, H);
              });
            }).then(function() {
              return (V.length > 0 || S && t === zg) && s.mutate({
                trans: r,
                type: "delete",
                keys: V,
                criteria: S,
                isAdditionalChunk: C > 0
              }).then(function(H) {
                return p(V.length, H);
              });
            }).then(function() {
              return y.length > C + D && E(C + h);
            });
          });
        };
        return E(0).then(function() {
          if (v.length > 0)
            throw new A_("Error modifying one or more objects", v, w, b);
          return y.length;
        });
      });
    });
  }, e.prototype.delete = function() {
    var t = this._ctx, n = t.range;
    return Yc(t) && (t.isPrimKey || n.type === 3) ? this._write(function(a) {
      var r = t.table.core.schema.primaryKey, i = n;
      return t.table.core.count({ trans: a, query: { index: r, range: i } }).then(function(o) {
        return t.table.core.mutate({ trans: a, type: "deleteRange", range: i }).then(function(l) {
          var s = l.failures;
          l.lastResult, l.results;
          var d = l.numFailures;
          if (d)
            throw new A_("Could not delete some values", Object.keys(s).map(function(u) {
              return s[u];
            }), o - d);
          return o - d;
        });
      });
    }) : this.modify(zg);
  }, e;
}(), zg = function(e, t) {
  return t.value = null;
};
function Q8(e) {
  return Hf(G8.prototype, function(n, a) {
    this.db = e;
    var r = pI, i = null;
    if (a)
      try {
        r = a();
      } catch (d) {
        i = d;
      }
    var o = n._ctx, l = o.table, s = l.hook.reading.fire;
    this._ctx = {
      table: l,
      index: o.index,
      isPrimKey: !o.index || l.schema.primKey.keyPath && o.index === l.schema.primKey.name,
      range: r,
      keysOnly: !1,
      dir: "next",
      unique: "",
      algorithm: null,
      filter: null,
      replayFilter: null,
      justLimit: !0,
      isMatch: null,
      offset: 0,
      limit: 1 / 0,
      error: i,
      or: o.or,
      valueMapper: s !== $f ? s : null
    };
  });
}
function J8(e, t) {
  return e < t ? -1 : e === t ? 0 : 1;
}
function X8(e, t) {
  return e > t ? -1 : e === t ? 0 : 1;
}
function ri(e, t, n) {
  var a = e instanceof yI ? new e.Collection(e) : e;
  return a._ctx.error = n ? new n(t) : new TypeError(t), a;
}
function Gc(e) {
  return new e.Collection(e, function() {
    return gI("");
  }).limit(0);
}
function Z8(e) {
  return e === "next" ? function(t) {
    return t.toUpperCase();
  } : function(t) {
    return t.toLowerCase();
  };
}
function e5(e) {
  return e === "next" ? function(t) {
    return t.toLowerCase();
  } : function(t) {
    return t.toUpperCase();
  };
}
function t5(e, t, n, a, r, i) {
  for (var o = Math.min(e.length, a.length), l = -1, s = 0; s < o; ++s) {
    var d = t[s];
    if (d !== a[s])
      return r(e[s], n[s]) < 0 ? e.substr(0, s) + n[s] + n.substr(s + 1) : r(e[s], a[s]) < 0 ? e.substr(0, s) + a[s] + n.substr(s + 1) : l >= 0 ? e.substr(0, l) + t[l] + n.substr(l + 1) : null;
    r(e[s], d) < 0 && (l = s);
  }
  return o < a.length && i === "next" ? e + n.substr(e.length) : o < e.length && i === "prev" ? e.substr(0, n.length) : l < 0 ? null : e.substr(0, l) + a[l] + n.substr(l + 1);
}
function Ih(e, t, n, a) {
  var r, i, o, l, s, d, u, f = n.length;
  if (!n.every(function(w) {
    return typeof w == "string";
  }))
    return ri(e, _I);
  function h(w) {
    r = Z8(w), i = e5(w), o = w === "next" ? J8 : X8;
    var b = n.map(function(p) {
      return { lower: i(p), upper: r(p) };
    }).sort(function(p, y) {
      return o(p.lower, y.lower);
    });
    l = b.map(function(p) {
      return p.upper;
    }), s = b.map(function(p) {
      return p.lower;
    }), d = w, u = w === "next" ? "" : a;
  }
  h("next");
  var g = new e.Collection(e, function() {
    return Is(l[0], s[f - 1] + a);
  });
  g._ondirectionchange = function(w) {
    h(w);
  };
  var v = 0;
  return g._addAlgorithm(function(w, b, p) {
    var y = w.key;
    if (typeof y != "string")
      return !1;
    var S = i(y);
    if (t(S, s, v))
      return !0;
    for (var E = null, C = v; C < f; ++C) {
      var D = t5(y, S, l[C], s[C], o, d);
      D === null && E === null ? v = C + 1 : (E === null || o(E, D) > 0) && (E = D);
    }
    return b(E !== null ? function() {
      w.continue(E + u);
    } : p), !1;
  }), g;
}
function Is(e, t, n, a) {
  return {
    type: 2,
    lower: e,
    upper: t,
    lowerOpen: n,
    upperOpen: a
  };
}
function gI(e) {
  return {
    type: 1,
    lower: e,
    upper: e
  };
}
var yI = function() {
  function e() {
  }
  return Object.defineProperty(e.prototype, "Collection", {
    get: function() {
      return this._ctx.table.db.Collection;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.between = function(t, n, a, r) {
    a = a !== !1, r = r === !0;
    try {
      return this._cmp(t, n) > 0 || this._cmp(t, n) === 0 && (a || r) && !(a && r) ? Gc(this) : new this.Collection(this, function() {
        return Is(t, n, !a, !r);
      });
    } catch {
      return ri(this, $o);
    }
  }, e.prototype.equals = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return gI(t);
    });
  }, e.prototype.above = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(t, void 0, !0);
    });
  }, e.prototype.aboveOrEqual = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(t, void 0, !1);
    });
  }, e.prototype.below = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(void 0, t, !1, !0);
    });
  }, e.prototype.belowOrEqual = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(void 0, t);
    });
  }, e.prototype.startsWith = function(t) {
    return typeof t != "string" ? ri(this, _I) : this.between(t, t + Nl, !0, !0);
  }, e.prototype.startsWithIgnoreCase = function(t) {
    return t === "" ? this.startsWith(t) : Ih(this, function(n, a) {
      return n.indexOf(a[0]) === 0;
    }, [t], Nl);
  }, e.prototype.equalsIgnoreCase = function(t) {
    return Ih(this, function(n, a) {
      return n === a[0];
    }, [t], "");
  }, e.prototype.anyOfIgnoreCase = function() {
    var t = jo.apply(tu, arguments);
    return t.length === 0 ? Gc(this) : Ih(this, function(n, a) {
      return a.indexOf(n) !== -1;
    }, t, "");
  }, e.prototype.startsWithAnyOfIgnoreCase = function() {
    var t = jo.apply(tu, arguments);
    return t.length === 0 ? Gc(this) : Ih(this, function(n, a) {
      return a.some(function(r) {
        return n.indexOf(r) === 0;
      });
    }, t, Nl);
  }, e.prototype.anyOf = function() {
    var t = this, n = jo.apply(tu, arguments), a = this._cmp;
    try {
      n.sort(a);
    } catch {
      return ri(this, $o);
    }
    if (n.length === 0)
      return Gc(this);
    var r = new this.Collection(this, function() {
      return Is(n[0], n[n.length - 1]);
    });
    r._ondirectionchange = function(o) {
      a = o === "next" ? t._ascending : t._descending, n.sort(a);
    };
    var i = 0;
    return r._addAlgorithm(function(o, l, s) {
      for (var d = o.key; a(d, n[i]) > 0; )
        if (++i, i === n.length)
          return l(s), !1;
      return a(d, n[i]) === 0 ? !0 : (l(function() {
        o.continue(n[i]);
      }), !1);
    }), r;
  }, e.prototype.notEqual = function(t) {
    return this.inAnyRange([[ib, t], [t, this.db._maxKey]], { includeLowers: !1, includeUppers: !1 });
  }, e.prototype.noneOf = function() {
    var t = jo.apply(tu, arguments);
    if (t.length === 0)
      return new this.Collection(this);
    try {
      t.sort(this._ascending);
    } catch {
      return ri(this, $o);
    }
    var n = t.reduce(function(a, r) {
      return a ? a.concat([[a[a.length - 1][1], r]]) : [[ib, r]];
    }, null);
    return n.push([t[t.length - 1], this.db._maxKey]), this.inAnyRange(n, { includeLowers: !1, includeUppers: !1 });
  }, e.prototype.inAnyRange = function(t, n) {
    var a = this, r = this._cmp, i = this._ascending, o = this._descending, l = this._min, s = this._max;
    if (t.length === 0)
      return Gc(this);
    if (!t.every(function(C) {
      return C[0] !== void 0 && C[1] !== void 0 && i(C[0], C[1]) <= 0;
    }))
      return ri(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", Bt.InvalidArgument);
    var d = !n || n.includeLowers !== !1, u = n && n.includeUppers === !0;
    function f(C, D) {
      for (var P = 0, O = C.length; P < O; ++P) {
        var T = C[P];
        if (r(D[0], T[1]) < 0 && r(D[1], T[0]) > 0) {
          T[0] = l(T[0], D[0]), T[1] = s(T[1], D[1]);
          break;
        }
      }
      return P === O && C.push(D), C;
    }
    var h = i;
    function g(C, D) {
      return h(C[0], D[0]);
    }
    var v;
    try {
      v = t.reduce(f, []), v.sort(g);
    } catch {
      return ri(this, $o);
    }
    var w = 0, b = u ? function(C) {
      return i(C, v[w][1]) > 0;
    } : function(C) {
      return i(C, v[w][1]) >= 0;
    }, p = d ? function(C) {
      return o(C, v[w][0]) > 0;
    } : function(C) {
      return o(C, v[w][0]) >= 0;
    };
    function y(C) {
      return !b(C) && !p(C);
    }
    var S = b, E = new this.Collection(this, function() {
      return Is(v[0][0], v[v.length - 1][1], !d, !u);
    });
    return E._ondirectionchange = function(C) {
      C === "next" ? (S = b, h = i) : (S = p, h = o), v.sort(g);
    }, E._addAlgorithm(function(C, D, P) {
      for (var O = C.key; S(O); )
        if (++w, w === v.length)
          return D(P), !1;
      return y(O) ? !0 : (a._cmp(O, v[w][1]) === 0 || a._cmp(O, v[w][0]) === 0 || D(function() {
        h === i ? C.continue(v[w][0]) : C.continue(v[w][1]);
      }), !1);
    }), E;
  }, e.prototype.startsWithAnyOf = function() {
    var t = jo.apply(tu, arguments);
    return t.every(function(n) {
      return typeof n == "string";
    }) ? t.length === 0 ? Gc(this) : this.inAnyRange(t.map(function(n) {
      return [n, n + Nl];
    })) : ri(this, "startsWithAnyOf() only works with strings");
  }, e;
}();
function n5(e) {
  return Hf(yI.prototype, function(n, a, r) {
    if (this.db = e, this._ctx = {
      table: n,
      index: a === ":id" ? null : a,
      or: r
    }, this._cmp = this._ascending = _n, this._descending = function(i, o) {
      return _n(o, i);
    }, this._max = function(i, o) {
      return _n(i, o) > 0 ? i : o;
    }, this._min = function(i, o) {
      return _n(i, o) < 0 ? i : o;
    }, this._IDBKeyRange = e._deps.IDBKeyRange, !this._IDBKeyRange)
      throw new Bt.MissingAPI();
  });
}
function co(e) {
  return ra(function(t) {
    return bf(t), e(t.target.error), !1;
  });
}
function bf(e) {
  e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault();
}
var zf = "storagemutated", ob = "x-storagemutated-1", Ks = qf(null, zf), a5 = function() {
  function e() {
  }
  return e.prototype._lock = function() {
    return Hd(!Pt.global), ++this._reculock, this._reculock === 1 && !Pt.global && (Pt.lockOwnerFor = this), this;
  }, e.prototype._unlock = function() {
    if (Hd(!Pt.global), --this._reculock === 0)
      for (Pt.global || (Pt.lockOwnerFor = null); this._blockedFuncs.length > 0 && !this._locked(); ) {
        var t = this._blockedFuncs.shift();
        try {
          ec(t[1], t[0]);
        } catch {
        }
      }
    return this;
  }, e.prototype._locked = function() {
    return this._reculock && Pt.lockOwnerFor !== this;
  }, e.prototype.create = function(t) {
    var n = this;
    if (!this.mode)
      return this;
    var a = this.db.idbdb, r = this.db._state.dbOpenError;
    if (Hd(!this.idbtrans), !t && !a)
      switch (r && r.name) {
        case "DatabaseClosedError":
          throw new Bt.DatabaseClosed(r);
        case "MissingAPIError":
          throw new Bt.MissingAPI(r.message, r);
        default:
          throw new Bt.OpenFailed(r);
      }
    if (!this.active)
      throw new Bt.TransactionInactive();
    return Hd(this._completion._state === null), t = this.idbtrans = t || (this.db.core ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }) : a.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })), t.onerror = ra(function(i) {
      bf(i), n._reject(t.error);
    }), t.onabort = ra(function(i) {
      bf(i), n.active && n._reject(new Bt.Abort(t.error)), n.active = !1, n.on("abort").fire(i);
    }), t.oncomplete = ra(function() {
      n.active = !1, n._resolve(), "mutatedParts" in t && Ks.storagemutated.fire(t.mutatedParts);
    }), this;
  }, e.prototype._promise = function(t, n, a) {
    var r = this;
    if (t === "readwrite" && this.mode !== "readwrite")
      return Ma(new Bt.ReadOnly("Transaction is readonly"));
    if (!this.active)
      return Ma(new Bt.TransactionInactive());
    if (this._locked())
      return new wt(function(o, l) {
        r._blockedFuncs.push([function() {
          r._promise(t, n, a).then(o, l);
        }, Pt]);
      });
    if (a)
      return zs(function() {
        var o = new wt(function(l, s) {
          r._lock();
          var d = n(l, s, r);
          d && d.then && d.then(l, s);
        });
        return o.finally(function() {
          return r._unlock();
        }), o._lib = !0, o;
      });
    var i = new wt(function(o, l) {
      var s = n(o, l, r);
      s && s.then && s.then(o, l);
    });
    return i._lib = !0, i;
  }, e.prototype._root = function() {
    return this.parent ? this.parent._root() : this;
  }, e.prototype.waitFor = function(t) {
    var n = this._root(), a = wt.resolve(t);
    if (n._waitingFor)
      n._waitingFor = n._waitingFor.then(function() {
        return a;
      });
    else {
      n._waitingFor = a, n._waitingQueue = [];
      var r = n.idbtrans.objectStore(n.storeNames[0]);
      (function o() {
        for (++n._spinCount; n._waitingQueue.length; )
          n._waitingQueue.shift()();
        n._waitingFor && (r.get(-1 / 0).onsuccess = o);
      })();
    }
    var i = n._waitingFor;
    return new wt(function(o, l) {
      a.then(function(s) {
        return n._waitingQueue.push(ra(o.bind(null, s)));
      }, function(s) {
        return n._waitingQueue.push(ra(l.bind(null, s)));
      }).finally(function() {
        n._waitingFor === i && (n._waitingFor = null);
      });
    });
  }, e.prototype.abort = function() {
    this.active && (this.active = !1, this.idbtrans && this.idbtrans.abort(), this._reject(new Bt.Abort()));
  }, e.prototype.table = function(t) {
    var n = this._memoizedTables || (this._memoizedTables = {});
    if (Gr(n, t))
      return n[t];
    var a = this.schema[t];
    if (!a)
      throw new Bt.NotFound("Table " + t + " not part of transaction");
    var r = new this.db.Table(t, a, this);
    return r.core = this.db.core.table(t), n[t] = r, r;
  }, e;
}();
function r5(e) {
  return Hf(a5.prototype, function(n, a, r, i, o) {
    var l = this;
    this.db = e, this.mode = n, this.storeNames = a, this.schema = r, this.chromeTransactionDurability = i, this.idbtrans = null, this.on = qf(this, "complete", "error", "abort"), this.parent = o || null, this.active = !0, this._reculock = 0, this._blockedFuncs = [], this._resolve = null, this._reject = null, this._waitingFor = null, this._waitingQueue = null, this._spinCount = 0, this._completion = new wt(function(s, d) {
      l._resolve = s, l._reject = d;
    }), this._completion.then(function() {
      l.active = !1, l.on.complete.fire();
    }, function(s) {
      var d = l.active;
      return l.active = !1, l.on.error.fire(s), l.parent ? l.parent._reject(s) : d && l.idbtrans && l.idbtrans.abort(), Ma(s);
    });
  });
}
function sb(e, t, n, a, r, i, o) {
  return {
    name: e,
    keyPath: t,
    unique: n,
    multi: a,
    auto: r,
    compound: i,
    src: (n && !o ? "&" : "") + (a ? "*" : "") + (r ? "++" : "") + bI(t)
  };
}
function bI(e) {
  return typeof e == "string" ? e : e ? "[" + [].join.call(e, "+") + "]" : "";
}
function Hw(e, t, n) {
  return {
    name: e,
    primKey: t,
    indexes: n,
    mappedClass: null,
    idxByName: _8(n, function(a) {
      return [a.name, a];
    })
  };
}
function i5(e) {
  return e.length === 1 ? e[0] : e;
}
var wf = function(e) {
  try {
    return e.only([[]]), wf = function() {
      return [[]];
    }, [[]];
  } catch {
    return wf = function() {
      return Nl;
    }, Nl;
  }
};
function lb(e) {
  return e == null ? function() {
  } : typeof e == "string" ? o5(e) : function(t) {
    return Jo(t, e);
  };
}
function o5(e) {
  var t = e.split(".");
  return t.length === 1 ? function(n) {
    return n[e];
  } : function(n) {
    return Jo(n, e);
  };
}
function kC(e) {
  return [].slice.call(e);
}
var s5 = 0;
function nf(e) {
  return e == null ? ":id" : typeof e == "string" ? e : "[".concat(e.join("+"), "]");
}
function l5(e, t, n) {
  function a(f, h) {
    var g = kC(f.objectStoreNames);
    return {
      schema: {
        name: f.name,
        tables: g.map(function(v) {
          return h.objectStore(v);
        }).map(function(v) {
          var w = v.keyPath, b = v.autoIncrement, p = va(w), y = w == null, S = {}, E = {
            name: v.name,
            primaryKey: {
              name: null,
              isPrimaryKey: !0,
              outbound: y,
              compound: p,
              keyPath: w,
              autoIncrement: b,
              unique: !0,
              extractKey: lb(w)
            },
            indexes: kC(v.indexNames).map(function(C) {
              return v.index(C);
            }).map(function(C) {
              var D = C.name, P = C.unique, O = C.multiEntry, T = C.keyPath, A = va(T), V = {
                name: D,
                compound: A,
                keyPath: T,
                unique: P,
                multiEntry: O,
                extractKey: lb(T)
              };
              return S[nf(T)] = V, V;
            }),
            getIndexByKeyPath: function(C) {
              return S[nf(C)];
            }
          };
          return S[":id"] = E.primaryKey, w != null && (S[nf(w)] = E.primaryKey), E;
        })
      },
      hasGetAll: g.length > 0 && "getAll" in h.objectStore(g[0]) && !(typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
    };
  }
  function r(f) {
    if (f.type === 3)
      return null;
    if (f.type === 4)
      throw new Error("Cannot convert never type to IDBKeyRange");
    var h = f.lower, g = f.upper, v = f.lowerOpen, w = f.upperOpen, b = h === void 0 ? g === void 0 ? null : t.upperBound(g, !!w) : g === void 0 ? t.lowerBound(h, !!v) : t.bound(h, g, !!v, !!w);
    return b;
  }
  function i(f) {
    var h = f.name;
    function g(b) {
      var p = b.trans, y = b.type, S = b.keys, E = b.values, C = b.range;
      return new Promise(function(D, P) {
        D = ra(D);
        var O = p.objectStore(h), T = O.keyPath == null, A = y === "put" || y === "add";
        if (!A && y !== "delete" && y !== "deleteRange")
          throw new Error("Invalid operation type: " + y);
        var V = (S || E || { length: 1 }).length;
        if (S && E && S.length !== E.length)
          throw new Error("Given keys array must have same length as given values array.");
        if (V === 0)
          return D({ numFailures: 0, failures: {}, results: [], lastResult: void 0 });
        var M, B = [], N = [], H = 0, j = function(se) {
          ++H, bf(se);
        };
        if (y === "deleteRange") {
          if (C.type === 4)
            return D({ numFailures: H, failures: N, results: [], lastResult: void 0 });
          C.type === 3 ? B.push(M = O.clear()) : B.push(M = O.delete(r(C)));
        } else {
          var te = A ? T ? [E, S] : [E, null] : [S, null], de = te[0], Z = te[1];
          if (A)
            for (var F = 0; F < V; ++F)
              B.push(M = Z && Z[F] !== void 0 ? O[y](de[F], Z[F]) : O[y](de[F])), M.onerror = j;
          else
            for (var F = 0; F < V; ++F)
              B.push(M = O[y](de[F])), M.onerror = j;
        }
        var K = function(se) {
          var X = se.target.result;
          B.forEach(function(he, ve) {
            return he.error != null && (N[ve] = he.error);
          }), D({
            numFailures: H,
            failures: N,
            results: y === "delete" ? S : B.map(function(he) {
              return he.result;
            }),
            lastResult: X
          });
        };
        M.onerror = function(se) {
          j(se), K(se);
        }, M.onsuccess = K;
      });
    }
    function v(b) {
      var p = b.trans, y = b.values, S = b.query, E = b.reverse, C = b.unique;
      return new Promise(function(D, P) {
        D = ra(D);
        var O = S.index, T = S.range, A = p.objectStore(h), V = O.isPrimaryKey ? A : A.index(O.name), M = E ? C ? "prevunique" : "prev" : C ? "nextunique" : "next", B = y || !("openKeyCursor" in V) ? V.openCursor(r(T), M) : V.openKeyCursor(r(T), M);
        B.onerror = co(P), B.onsuccess = ra(function(N) {
          var H = B.result;
          if (!H) {
            D(null);
            return;
          }
          H.___id = ++s5, H.done = !1;
          var j = H.continue.bind(H), te = H.continuePrimaryKey;
          te && (te = te.bind(H));
          var de = H.advance.bind(H), Z = function() {
            throw new Error("Cursor not started");
          }, F = function() {
            throw new Error("Cursor not stopped");
          };
          H.trans = p, H.stop = H.continue = H.continuePrimaryKey = H.advance = Z, H.fail = ra(P), H.next = function() {
            var K = this, se = 1;
            return this.start(function() {
              return se-- ? K.continue() : K.stop();
            }).then(function() {
              return K;
            });
          }, H.start = function(K) {
            var se = new Promise(function(he, ve) {
              he = ra(he), B.onerror = co(ve), H.fail = ve, H.stop = function(pe) {
                H.stop = H.continue = H.continuePrimaryKey = H.advance = F, he(pe);
              };
            }), X = function() {
              if (B.result)
                try {
                  K();
                } catch (he) {
                  H.fail(he);
                }
              else
                H.done = !0, H.start = function() {
                  throw new Error("Cursor behind last entry");
                }, H.stop();
            };
            return B.onsuccess = ra(function(he) {
              B.onsuccess = X, X();
            }), H.continue = j, H.continuePrimaryKey = te, H.advance = de, X(), se;
          }, D(H);
        }, P);
      });
    }
    function w(b) {
      return function(p) {
        return new Promise(function(y, S) {
          y = ra(y);
          var E = p.trans, C = p.values, D = p.limit, P = p.query, O = D === 1 / 0 ? void 0 : D, T = P.index, A = P.range, V = E.objectStore(h), M = T.isPrimaryKey ? V : V.index(T.name), B = r(A);
          if (D === 0)
            return y({ result: [] });
          if (b) {
            var N = C ? M.getAll(B, O) : M.getAllKeys(B, O);
            N.onsuccess = function(de) {
              return y({ result: de.target.result });
            }, N.onerror = co(S);
          } else {
            var H = 0, j = C || !("openKeyCursor" in M) ? M.openCursor(B) : M.openKeyCursor(B), te = [];
            j.onsuccess = function(de) {
              var Z = j.result;
              if (!Z)
                return y({ result: te });
              if (te.push(C ? Z.value : Z.primaryKey), ++H === D)
                return y({ result: te });
              Z.continue();
            }, j.onerror = co(S);
          }
        });
      };
    }
    return {
      name: h,
      schema: f,
      mutate: g,
      getMany: function(b) {
        var p = b.trans, y = b.keys;
        return new Promise(function(S, E) {
          S = ra(S);
          for (var C = p.objectStore(h), D = y.length, P = new Array(D), O = 0, T = 0, A, V = function(H) {
            var j = H.target;
            (P[j._pos] = j.result) != null, ++T === O && S(P);
          }, M = co(E), B = 0; B < D; ++B) {
            var N = y[B];
            N != null && (A = C.get(y[B]), A._pos = B, A.onsuccess = V, A.onerror = M, ++O);
          }
          O === 0 && S(P);
        });
      },
      get: function(b) {
        var p = b.trans, y = b.key;
        return new Promise(function(S, E) {
          S = ra(S);
          var C = p.objectStore(h), D = C.get(y);
          D.onsuccess = function(P) {
            return S(P.target.result);
          }, D.onerror = co(E);
        });
      },
      query: w(s),
      openCursor: v,
      count: function(b) {
        var p = b.query, y = b.trans, S = p.index, E = p.range;
        return new Promise(function(C, D) {
          var P = y.objectStore(h), O = S.isPrimaryKey ? P : P.index(S.name), T = r(E), A = T ? O.count(T) : O.count();
          A.onsuccess = ra(function(V) {
            return C(V.target.result);
          }), A.onerror = co(D);
        });
      }
    };
  }
  var o = a(e, n), l = o.schema, s = o.hasGetAll, d = l.tables.map(function(f) {
    return i(f);
  }), u = {};
  return d.forEach(function(f) {
    return u[f.name] = f;
  }), {
    stack: "dbcore",
    transaction: e.transaction.bind(e),
    table: function(f) {
      var h = u[f];
      if (!h)
        throw new Error("Table '".concat(f, "' not found"));
      return u[f];
    },
    MIN_KEY: -1 / 0,
    MAX_KEY: wf(t),
    schema: l
  };
}
function c5(e, t) {
  return t.reduce(function(n, a) {
    var r = a.create;
    return Jt(Jt({}, n), r(n));
  }, e);
}
function u5(e, t, n, a) {
  var r = n.IDBKeyRange;
  n.indexedDB;
  var i = c5(l5(t, r, a), e.dbcore);
  return {
    dbcore: i
  };
}
function E_(e, t) {
  var n = t.db, a = u5(e._middlewares, n, e._deps, t);
  e.core = a.dbcore, e.tables.forEach(function(r) {
    var i = r.name;
    e.core.schema.tables.some(function(o) {
      return o.name === i;
    }) && (r.core = e.core.table(i), e[i] instanceof e.Table && (e[i].core = r.core));
  });
}
function P_(e, t, n, a) {
  n.forEach(function(r) {
    var i = a[r];
    t.forEach(function(o) {
      var l = eI(o, r);
      (!l || "value" in l && l.value === void 0) && (o === e.Transaction.prototype || o instanceof e.Transaction ? Hs(o, r, {
        get: function() {
          return this.table(r);
        },
        set: function(s) {
          ZT(this, r, { value: s, writable: !0, configurable: !0, enumerable: !0 });
        }
      }) : o[r] = new e.Table(r, i));
    });
  });
}
function cb(e, t) {
  t.forEach(function(n) {
    for (var a in n)
      n[a] instanceof e.Table && delete n[a];
  });
}
function d5(e, t) {
  return e._cfg.version - t._cfg.version;
}
function f5(e, t, n, a) {
  var r = e._dbSchema;
  n.objectStoreNames.contains("$meta") && !r.$meta && (r.$meta = Hw("$meta", kI("")[0], []), e._storeNames.push("$meta"));
  var i = e._createTransaction("readwrite", e._storeNames, r);
  i.create(n), i._completion.catch(a);
  var o = i._reject.bind(i), l = Pt.transless || Pt;
  zs(function() {
    if (Pt.trans = i, Pt.transless = l, t === 0)
      ar(r).forEach(function(s) {
        Ww(n, s, r[s].primKey, r[s].indexes);
      }), E_(e, n), wt.follow(function() {
        return e.on.populate.fire(i);
      }).catch(o);
    else
      return E_(e, n), h5(e, i, t).then(function(s) {
        return _5(e, s, i, n);
      }).catch(o);
  });
}
function m5(e, t) {
  wI(e._dbSchema, t), t.db.version % 10 === 0 && !t.objectStoreNames.contains("$meta") && t.db.createObjectStore("$meta").add(Math.ceil(t.db.version / 10 - 1), "version");
  var n = fp(e, e.idbdb, t);
  D_(e, e._dbSchema, t);
  for (var a = zw(n, e._dbSchema), r = function(d) {
    if (d.change.length || d.recreate)
      return console.warn("Unable to patch indexes of table ".concat(d.name, " because it has changes on the type of index or primary key.")), { value: void 0 };
    var u = t.objectStore(d.name);
    d.add.forEach(function(f) {
      wo && console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name, ".").concat(f.src)), O_(u, f);
    });
  }, i = 0, o = a.change; i < o.length; i++) {
    var l = o[i], s = r(l);
    if (typeof s == "object")
      return s.value;
  }
}
function h5(e, t, n) {
  return t.storeNames.includes("$meta") ? t.table("$meta").get("version").then(function(a) {
    return a ?? n;
  }) : wt.resolve(n);
}
function _5(e, t, n, a) {
  var r = [], i = e._versions, o = e._dbSchema = fp(e, e.idbdb, a), l = i.filter(function(d) {
    return d._cfg.version >= t;
  });
  if (l.length === 0)
    return wt.resolve();
  l.forEach(function(d) {
    r.push(function() {
      var u = o, f = d._cfg.dbschema;
      D_(e, u, a), D_(e, f, a), o = e._dbSchema = f;
      var h = zw(u, f);
      h.add.forEach(function(y) {
        Ww(a, y[0], y[1].primKey, y[1].indexes);
      }), h.change.forEach(function(y) {
        if (y.recreate)
          throw new Bt.Upgrade("Not yet support for changing primary key");
        var S = a.objectStore(y.name);
        y.add.forEach(function(E) {
          return O_(S, E);
        }), y.change.forEach(function(E) {
          S.deleteIndex(E.name), O_(S, E);
        }), y.del.forEach(function(E) {
          return S.deleteIndex(E);
        });
      });
      var g = d._cfg.contentUpgrade;
      if (g && d._cfg.version > t) {
        E_(e, a), n._memoizedTables = {};
        var v = aI(f);
        h.del.forEach(function(y) {
          v[y] = u[y];
        }), cb(e, [e.Transaction.prototype]), P_(e, [e.Transaction.prototype], ar(v), v), n.schema = v;
        var w = Mw(g);
        w && Yu();
        var b, p = wt.follow(function() {
          if (b = g(n), b && w) {
            var y = Ws.bind(null, null);
            b.then(y, y);
          }
        });
        return b && typeof b.then == "function" ? wt.resolve(b) : p.then(function() {
          return b;
        });
      }
    }), r.push(function(u) {
      var f = d._cfg.dbschema;
      p5(f, u), cb(e, [e.Transaction.prototype]), P_(e, [e.Transaction.prototype], e._storeNames, e._dbSchema), n.schema = e._dbSchema;
    }), r.push(function(u) {
      e.idbdb.objectStoreNames.contains("$meta") && (Math.ceil(e.idbdb.version / 10) === d._cfg.version ? (e.idbdb.deleteObjectStore("$meta"), delete e._dbSchema.$meta, e._storeNames = e._storeNames.filter(function(f) {
        return f !== "$meta";
      })) : u.objectStore("$meta").put(d._cfg.version, "version"));
    });
  });
  function s() {
    return r.length ? wt.resolve(r.shift()(n.idbtrans)).then(s) : wt.resolve();
  }
  return s().then(function() {
    wI(o, a);
  });
}
function zw(e, t) {
  var n = {
    del: [],
    add: [],
    change: []
  }, a;
  for (a in e)
    t[a] || n.del.push(a);
  for (a in t) {
    var r = e[a], i = t[a];
    if (!r)
      n.add.push([a, i]);
    else {
      var o = {
        name: a,
        def: i,
        recreate: !1,
        del: [],
        add: [],
        change: []
      };
      if ("" + (r.primKey.keyPath || "") != "" + (i.primKey.keyPath || "") || r.primKey.auto !== i.primKey.auto)
        o.recreate = !0, n.change.push(o);
      else {
        var l = r.idxByName, s = i.idxByName, d = void 0;
        for (d in l)
          s[d] || o.del.push(d);
        for (d in s) {
          var u = l[d], f = s[d];
          u ? u.src !== f.src && o.change.push(f) : o.add.push(f);
        }
        (o.del.length > 0 || o.add.length > 0 || o.change.length > 0) && n.change.push(o);
      }
    }
  }
  return n;
}
function Ww(e, t, n, a) {
  var r = e.db.createObjectStore(t, n.keyPath ? { keyPath: n.keyPath, autoIncrement: n.auto } : { autoIncrement: n.auto });
  return a.forEach(function(i) {
    return O_(r, i);
  }), r;
}
function wI(e, t) {
  ar(e).forEach(function(n) {
    t.db.objectStoreNames.contains(n) || (wo && console.debug("Dexie: Creating missing table", n), Ww(t, n, e[n].primKey, e[n].indexes));
  });
}
function p5(e, t) {
  [].slice.call(t.db.objectStoreNames).forEach(function(n) {
    return e[n] == null && t.db.deleteObjectStore(n);
  });
}
function O_(e, t) {
  e.createIndex(t.name, t.keyPath, { unique: t.unique, multiEntry: t.multi });
}
function fp(e, t, n) {
  var a = {}, r = cp(t.objectStoreNames, 0);
  return r.forEach(function(i) {
    for (var o = n.objectStore(i), l = o.keyPath, s = sb(bI(l), l || "", !0, !1, !!o.autoIncrement, l && typeof l != "string", !0), d = [], u = 0; u < o.indexNames.length; ++u) {
      var f = o.index(o.indexNames[u]);
      l = f.keyPath;
      var h = sb(f.name, l, !!f.unique, !!f.multiEntry, !1, l && typeof l != "string", !1);
      d.push(h);
    }
    a[i] = Hw(i, s, d);
  }), a;
}
function v5(e, t, n) {
  e.verno = t.version / 10;
  var a = e._dbSchema = fp(e, t, n);
  e._storeNames = cp(t.objectStoreNames, 0), P_(e, [e._allTables], ar(a), a);
}
function g5(e, t) {
  var n = fp(e, e.idbdb, t), a = zw(n, e._dbSchema);
  return !(a.add.length || a.change.some(function(r) {
    return r.add.length || r.change.length;
  }));
}
function D_(e, t, n) {
  for (var a = n.db.objectStoreNames, r = 0; r < a.length; ++r) {
    var i = a[r], o = n.objectStore(i);
    e._hasGetAll = "getAll" in o;
    for (var l = 0; l < o.indexNames.length; ++l) {
      var s = o.indexNames[l], d = o.index(s).keyPath, u = typeof d == "string" ? d : "[" + cp(d).join("+") + "]";
      if (t[i]) {
        var f = t[i].idxByName[u];
        f && (f.name = s, delete t[i].idxByName[u], t[i].idxByName[s] = f);
      }
    }
  }
  typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && lr.WorkerGlobalScope && lr instanceof lr.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604 && (e._hasGetAll = !1);
}
function kI(e) {
  return e.split(",").map(function(t, n) {
    t = t.trim();
    var a = t.replace(/([&*]|\+\+)/g, ""), r = /^\[/.test(a) ? a.match(/^\[(.*)\]$/)[1].split("+") : a;
    return sb(a, r || null, /\&/.test(t), /\*/.test(t), /\+\+/.test(t), va(r), n === 0);
  });
}
var y5 = function() {
  function e() {
  }
  return e.prototype._parseStoresSpec = function(t, n) {
    ar(t).forEach(function(a) {
      if (t[a] !== null) {
        var r = kI(t[a]), i = r.shift();
        if (i.unique = !0, i.multi)
          throw new Bt.Schema("Primary key cannot be multi-valued");
        r.forEach(function(o) {
          if (o.auto)
            throw new Bt.Schema("Only primary key can be marked as autoIncrement (++)");
          if (!o.keyPath)
            throw new Bt.Schema("Index must have a name and cannot be an empty string");
        }), n[a] = Hw(a, i, r);
      }
    });
  }, e.prototype.stores = function(t) {
    var n = this.db;
    this._cfg.storesSource = this._cfg.storesSource ? ui(this._cfg.storesSource, t) : t;
    var a = n._versions, r = {}, i = {};
    return a.forEach(function(o) {
      ui(r, o._cfg.storesSource), i = o._cfg.dbschema = {}, o._parseStoresSpec(r, i);
    }), n._dbSchema = i, cb(n, [n._allTables, n, n.Transaction.prototype]), P_(n, [n._allTables, n, n.Transaction.prototype, this._cfg.tables], ar(i), i), n._storeNames = ar(i), this;
  }, e.prototype.upgrade = function(t) {
    return this._cfg.contentUpgrade = Fw(this._cfg.contentUpgrade || Dn, t), this;
  }, e;
}();
function b5(e) {
  return Hf(y5.prototype, function(n) {
    this.db = e, this._cfg = {
      version: n,
      storesSource: null,
      dbschema: {},
      tables: {},
      contentUpgrade: null
    };
  });
}
function jw(e, t) {
  var n = e._dbNamesDB;
  return n || (n = e._dbNamesDB = new ji(dp, {
    addons: [],
    indexedDB: e,
    IDBKeyRange: t
  }), n.version(1).stores({ dbnames: "name" })), n.table("dbnames");
}
function Kw(e) {
  return e && typeof e.databases == "function";
}
function w5(e) {
  var t = e.indexedDB, n = e.IDBKeyRange;
  return Kw(t) ? Promise.resolve(t.databases()).then(function(a) {
    return a.map(function(r) {
      return r.name;
    }).filter(function(r) {
      return r !== dp;
    });
  }) : jw(t, n).toCollection().primaryKeys();
}
function k5(e, t) {
  var n = e.indexedDB, a = e.IDBKeyRange;
  !Kw(n) && t !== dp && jw(n, a).put({ name: t }).catch(Dn);
}
function S5(e, t) {
  var n = e.indexedDB, a = e.IDBKeyRange;
  !Kw(n) && t !== dp && jw(n, a).delete(t).catch(Dn);
}
function ub(e) {
  return zs(function() {
    return Pt.letThrough = !0, e();
  });
}
function C5() {
  var e = !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent);
  if (!e || !indexedDB.databases)
    return Promise.resolve();
  var t;
  return new Promise(function(n) {
    var a = function() {
      return indexedDB.databases().finally(n);
    };
    t = setInterval(a, 100), a();
  }).finally(function() {
    return clearInterval(t);
  });
}
var Wg;
function Yw(e) {
  return !("from" in e);
}
var Rr = function(e, t) {
  if (this)
    ui(this, arguments.length ? { d: 1, from: e, to: arguments.length > 1 ? t : e } : { d: 0 });
  else {
    var n = new Rr();
    return e && "d" in e && ui(n, e), n;
  }
};
Iu(Rr.prototype, (Wg = {
  add: function(e) {
    return B_(this, e), this;
  },
  addKey: function(e) {
    return kf(this, e, e), this;
  },
  addKeys: function(e) {
    var t = this;
    return e.forEach(function(n) {
      return kf(t, n, n);
    }), this;
  },
  hasKey: function(e) {
    var t = V_(this).next(e).value;
    return t && _n(t.from, e) <= 0 && _n(t.to, e) >= 0;
  }
}, Wg[Zy] = function() {
  return V_(this);
}, Wg));
function kf(e, t, n) {
  var a = _n(t, n);
  if (!isNaN(a)) {
    if (a > 0)
      throw RangeError();
    if (Yw(e))
      return ui(e, { from: t, to: n, d: 1 });
    var r = e.l, i = e.r;
    if (_n(n, e.from) < 0)
      return r ? kf(r, t, n) : e.l = { from: t, to: n, d: 1, l: null, r: null }, SC(e);
    if (_n(t, e.to) > 0)
      return i ? kf(i, t, n) : e.r = { from: t, to: n, d: 1, l: null, r: null }, SC(e);
    _n(t, e.from) < 0 && (e.from = t, e.l = null, e.d = i ? i.d + 1 : 1), _n(n, e.to) > 0 && (e.to = n, e.r = null, e.d = e.l ? e.l.d + 1 : 1);
    var o = !e.r;
    r && !e.l && B_(e, r), i && o && B_(e, i);
  }
}
function B_(e, t) {
  function n(a, r) {
    var i = r.from, o = r.to, l = r.l, s = r.r;
    kf(a, i, o), l && n(a, l), s && n(a, s);
  }
  Yw(t) || n(e, t);
}
function A5(e, t) {
  var n = V_(t), a = n.next();
  if (a.done)
    return !1;
  for (var r = a.value, i = V_(e), o = i.next(r.from), l = o.value; !a.done && !o.done; ) {
    if (_n(l.from, r.to) <= 0 && _n(l.to, r.from) >= 0)
      return !0;
    _n(r.from, l.from) < 0 ? r = (a = n.next(l.from)).value : l = (o = i.next(r.from)).value;
  }
  return !1;
}
function V_(e) {
  var t = Yw(e) ? null : { s: 0, n: e };
  return {
    next: function(n) {
      for (var a = arguments.length > 0; t; )
        switch (t.s) {
          case 0:
            if (t.s = 1, a)
              for (; t.n.l && _n(n, t.n.from) < 0; )
                t = { up: t, n: t.n.l, s: 1 };
            else
              for (; t.n.l; )
                t = { up: t, n: t.n.l, s: 1 };
          case 1:
            if (t.s = 2, !a || _n(n, t.n.to) <= 0)
              return { value: t.n, done: !1 };
          case 2:
            if (t.n.r) {
              t.s = 3, t = { up: t, n: t.n.r, s: 0 };
              continue;
            }
          case 3:
            t = t.up;
        }
      return { done: !0 };
    }
  };
}
function SC(e) {
  var t, n, a = (((t = e.r) === null || t === void 0 ? void 0 : t.d) || 0) - (((n = e.l) === null || n === void 0 ? void 0 : n.d) || 0), r = a > 1 ? "r" : a < -1 ? "l" : "";
  if (r) {
    var i = r === "r" ? "l" : "r", o = Jt({}, e), l = e[r];
    e.from = l.from, e.to = l.to, e[r] = l[r], o[r] = l[i], e[i] = o, o.d = CC(o);
  }
  e.d = CC(e);
}
function CC(e) {
  var t = e.r, n = e.l;
  return (t ? n ? Math.max(t.d, n.d) : t.d : n ? n.d : 0) + 1;
}
function mp(e, t) {
  return ar(t).forEach(function(n) {
    e[n] ? B_(e[n], t[n]) : e[n] = oI(t[n]);
  }), e;
}
function Gw(e, t) {
  return e.all || t.all || Object.keys(e).some(function(n) {
    return t[n] && A5(t[n], e[n]);
  });
}
var jl = {}, jg = {}, Kg = !1;
function Eh(e, t) {
  mp(jg, e), Kg || (Kg = !0, setTimeout(function() {
    Kg = !1;
    var n = jg;
    jg = {}, Qw(n, !1);
  }, 0));
}
function Qw(e, t) {
  t === void 0 && (t = !1);
  var n = /* @__PURE__ */ new Set();
  if (e.all)
    for (var a = 0, r = Object.values(jl); a < r.length; a++) {
      var i = r[a];
      AC(i, e, n, t);
    }
  else
    for (var o in e) {
      var l = /^idb\:\/\/(.*)\/(.*)\//.exec(o);
      if (l) {
        var s = l[1], d = l[2], i = jl["idb://".concat(s, "/").concat(d)];
        i && AC(i, e, n, t);
      }
    }
  n.forEach(function(u) {
    return u();
  });
}
function AC(e, t, n, a) {
  for (var r = [], i = 0, o = Object.entries(e.queries.query); i < o.length; i++) {
    for (var l = o[i], s = l[0], d = l[1], u = [], f = 0, h = d; f < h.length; f++) {
      var g = h[f];
      Gw(t, g.obsSet) ? g.subscribers.forEach(function(p) {
        return n.add(p);
      }) : a && u.push(g);
    }
    a && r.push([s, u]);
  }
  if (a)
    for (var v = 0, w = r; v < w.length; v++) {
      var b = w[v], s = b[0], u = b[1];
      e.queries.query[s] = u;
    }
}
function x5(e) {
  var t = e._state, n = e._deps.indexedDB;
  if (t.isBeingOpened || e.idbdb)
    return t.dbReadyPromise.then(function() {
      return t.dbOpenError ? Ma(t.dbOpenError) : e;
    });
  t.isBeingOpened = !0, t.dbOpenError = null, t.openComplete = !1;
  var a = t.openCanceller, r = Math.round(e.verno * 10), i = !1;
  function o() {
    if (t.openCanceller !== a)
      throw new Bt.DatabaseClosed("db.open() was cancelled");
  }
  var l = t.dbReadyResolve, s = null, d = !1, u = function() {
    return new wt(function(f, h) {
      if (o(), !n)
        throw new Bt.MissingAPI();
      var g = e.name, v = t.autoSchema || !r ? n.open(g) : n.open(g, r);
      if (!v)
        throw new Bt.MissingAPI();
      v.onerror = co(h), v.onblocked = ra(e._fireOnBlocked), v.onupgradeneeded = ra(function(w) {
        if (s = v.transaction, t.autoSchema && !e._options.allowEmptyDB) {
          v.onerror = bf, s.abort(), v.result.close();
          var b = n.deleteDatabase(g);
          b.onsuccess = b.onerror = ra(function() {
            h(new Bt.NoSuchDatabase("Database ".concat(g, " doesnt exist")));
          });
        } else {
          s.onerror = co(h);
          var p = w.oldVersion > Math.pow(2, 62) ? 0 : w.oldVersion;
          d = p < 1, e.idbdb = v.result, i && m5(e, s), f5(e, p / 10, s, h);
        }
      }, h), v.onsuccess = ra(function() {
        s = null;
        var w = e.idbdb = v.result, b = cp(w.objectStoreNames);
        if (b.length > 0)
          try {
            var p = w.transaction(i5(b), "readonly");
            if (t.autoSchema)
              v5(e, w, p);
            else if (D_(e, e._dbSchema, p), !g5(e, p) && !i)
              return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."), w.close(), r = w.version + 1, i = !0, f(u());
            E_(e, p);
          } catch {
          }
        mu.push(e), w.onversionchange = ra(function(y) {
          t.vcFired = !0, e.on("versionchange").fire(y);
        }), w.onclose = ra(function(y) {
          e.on("close").fire(y);
        }), d && k5(e._deps, g), f();
      }, h);
    }).catch(function(f) {
      switch (f?.name) {
        case "UnknownError":
          if (t.PR1398_maxLoop > 0)
            return t.PR1398_maxLoop--, console.warn("Dexie: Workaround for Chrome UnknownError on open()"), u();
          break;
        case "VersionError":
          if (r > 0)
            return r = 0, u();
          break;
      }
      return wt.reject(f);
    });
  };
  return wt.race([
    a,
    (typeof navigator > "u" ? wt.resolve() : C5()).then(u)
  ]).then(function() {
    return o(), t.onReadyBeingFired = [], wt.resolve(ub(function() {
      return e.on.ready.fire(e.vip);
    })).then(function f() {
      if (t.onReadyBeingFired.length > 0) {
        var h = t.onReadyBeingFired.reduce(Fw, Dn);
        return t.onReadyBeingFired = [], wt.resolve(ub(function() {
          return h(e.vip);
        })).then(f);
      }
    });
  }).finally(function() {
    t.openCanceller === a && (t.onReadyBeingFired = null, t.isBeingOpened = !1);
  }).catch(function(f) {
    t.dbOpenError = f;
    try {
      s && s.abort();
    } catch {
    }
    return a === t.openCanceller && e._close(), Ma(f);
  }).finally(function() {
    t.openComplete = !0, l();
  }).then(function() {
    if (d) {
      var f = {};
      e.tables.forEach(function(h) {
        h.schema.indexes.forEach(function(g) {
          g.name && (f["idb://".concat(e.name, "/").concat(h.name, "/").concat(g.name)] = new Rr(-1 / 0, [[[]]]));
        }), f["idb://".concat(e.name, "/").concat(h.name, "/")] = f["idb://".concat(e.name, "/").concat(h.name, "/:dels")] = new Rr(-1 / 0, [[[]]]);
      }), Ks(zf).fire(f), Qw(f, !0);
    }
    return e;
  });
}
function db(e) {
  var t = function(o) {
    return e.next(o);
  }, n = function(o) {
    return e.throw(o);
  }, a = i(t), r = i(n);
  function i(o) {
    return function(l) {
      var s = o(l), d = s.value;
      return s.done ? d : !d || typeof d.then != "function" ? va(d) ? Promise.all(d).then(a, r) : a(d) : d.then(a, r);
    };
  }
  return i(t)();
}
function T5(e, t, n) {
  var a = arguments.length;
  if (a < 2)
    throw new Bt.InvalidArgument("Too few arguments");
  for (var r = new Array(a - 1); --a; )
    r[a - 1] = arguments[a];
  n = r.pop();
  var i = rI(r);
  return [e, i, n];
}
function SI(e, t, n, a, r) {
  return wt.resolve().then(function() {
    var i = Pt.transless || Pt, o = e._createTransaction(t, n, e._dbSchema, a);
    o.explicit = !0;
    var l = {
      trans: o,
      transless: i
    };
    if (a)
      o.idbtrans = a.idbtrans;
    else
      try {
        o.create(), o.idbtrans._explicit = !0, e._state.PR1398_maxLoop = 3;
      } catch (f) {
        return f.name === Lw.InvalidState && e.isOpen() && --e._state.PR1398_maxLoop > 0 ? (console.warn("Dexie: Need to reopen db"), e.close({ disableAutoOpen: !1 }), e.open().then(function() {
          return SI(e, t, n, null, r);
        })) : Ma(f);
      }
    var s = Mw(r);
    s && Yu();
    var d, u = wt.follow(function() {
      if (d = r.call(o, o), d)
        if (s) {
          var f = Ws.bind(null, null);
          d.then(f, f);
        } else typeof d.next == "function" && typeof d.throw == "function" && (d = db(d));
    }, l);
    return (d && typeof d.then == "function" ? wt.resolve(d).then(function(f) {
      return o.active ? f : Ma(new Bt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"));
    }) : u.then(function() {
      return d;
    })).then(function(f) {
      return a && o._resolve(), o._completion.then(function() {
        return f;
      });
    }).catch(function(f) {
      return o._reject(f), Ma(f);
    });
  });
}
function Ph(e, t, n) {
  for (var a = va(e) ? e.slice() : [e], r = 0; r < n; ++r)
    a.push(t);
  return a;
}
function I5(e) {
  return Jt(Jt({}, e), { table: function(t) {
    var n = e.table(t), a = n.schema, r = {}, i = [];
    function o(w, b, p) {
      var y = nf(w), S = r[y] = r[y] || [], E = w == null ? 0 : typeof w == "string" ? 1 : w.length, C = b > 0, D = Jt(Jt({}, p), { name: C ? "".concat(y, "(virtual-from:").concat(p.name, ")") : p.name, lowLevelIndex: p, isVirtual: C, keyTail: b, keyLength: E, extractKey: lb(w), unique: !C && p.unique });
      if (S.push(D), D.isPrimaryKey || i.push(D), E > 1) {
        var P = E === 2 ? w[0] : w.slice(0, E - 1);
        o(P, b + 1, p);
      }
      return S.sort(function(O, T) {
        return O.keyTail - T.keyTail;
      }), D;
    }
    var l = o(a.primaryKey.keyPath, 0, a.primaryKey);
    r[":id"] = [l];
    for (var s = 0, d = a.indexes; s < d.length; s++) {
      var u = d[s];
      o(u.keyPath, 0, u);
    }
    function f(w) {
      var b = r[nf(w)];
      return b && b[0];
    }
    function h(w, b) {
      return {
        type: w.type === 1 ? 2 : w.type,
        lower: Ph(w.lower, w.lowerOpen ? e.MAX_KEY : e.MIN_KEY, b),
        lowerOpen: !0,
        upper: Ph(w.upper, w.upperOpen ? e.MIN_KEY : e.MAX_KEY, b),
        upperOpen: !0
      };
    }
    function g(w) {
      var b = w.query.index;
      return b.isVirtual ? Jt(Jt({}, w), { query: {
        index: b.lowLevelIndex,
        range: h(w.query.range, b.keyTail)
      } }) : w;
    }
    var v = Jt(Jt({}, n), { schema: Jt(Jt({}, a), { primaryKey: l, indexes: i, getIndexByKeyPath: f }), count: function(w) {
      return n.count(g(w));
    }, query: function(w) {
      return n.query(g(w));
    }, openCursor: function(w) {
      var b = w.query.index, p = b.keyTail, y = b.isVirtual, S = b.keyLength;
      if (!y)
        return n.openCursor(w);
      function E(C) {
        function D(O) {
          O != null ? C.continue(Ph(O, w.reverse ? e.MAX_KEY : e.MIN_KEY, p)) : w.unique ? C.continue(C.key.slice(0, S).concat(w.reverse ? e.MIN_KEY : e.MAX_KEY, p)) : C.continue();
        }
        var P = Object.create(C, {
          continue: { value: D },
          continuePrimaryKey: {
            value: function(O, T) {
              C.continuePrimaryKey(Ph(O, e.MAX_KEY, p), T);
            }
          },
          primaryKey: {
            get: function() {
              return C.primaryKey;
            }
          },
          key: {
            get: function() {
              var O = C.key;
              return S === 1 ? O[0] : O.slice(0, S);
            }
          },
          value: {
            get: function() {
              return C.value;
            }
          }
        });
        return P;
      }
      return n.openCursor(g(w)).then(function(C) {
        return C && E(C);
      });
    } });
    return v;
  } });
}
var E5 = {
  stack: "dbcore",
  name: "VirtualIndexMiddleware",
  level: 1,
  create: I5
};
function Jw(e, t, n, a) {
  return n = n || {}, a = a || "", ar(e).forEach(function(r) {
    if (!Gr(t, r))
      n[a + r] = void 0;
    else {
      var i = e[r], o = t[r];
      if (typeof i == "object" && typeof o == "object" && i && o) {
        var l = Xy(i), s = Xy(o);
        l !== s ? n[a + r] = t[r] : l === "Object" ? Jw(i, o, n, a + r + ".") : i !== o && (n[a + r] = t[r]);
      } else i !== o && (n[a + r] = t[r]);
    }
  }), ar(t).forEach(function(r) {
    Gr(e, r) || (n[a + r] = t[r]);
  }), n;
}
function Xw(e, t) {
  return t.type === "delete" ? t.keys : t.keys || t.values.map(e.extractKey);
}
var P5 = {
  stack: "dbcore",
  name: "HooksMiddleware",
  level: 2,
  create: function(e) {
    return Jt(Jt({}, e), { table: function(t) {
      var n = e.table(t), a = n.schema.primaryKey, r = Jt(Jt({}, n), { mutate: function(i) {
        var o = Pt.trans, l = o.table(t).hook, s = l.deleting, d = l.creating, u = l.updating;
        switch (i.type) {
          case "add":
            if (d.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "put":
            if (d.fire === Dn && u.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "delete":
            if (s.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "deleteRange":
            if (s.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return h(i);
            }, !0);
        }
        return n.mutate(i);
        function f(v) {
          var w = Pt.trans, b = v.keys || Xw(a, v);
          if (!b)
            throw new Error("Keys missing");
          return v = v.type === "add" || v.type === "put" ? Jt(Jt({}, v), { keys: b }) : Jt({}, v), v.type !== "delete" && (v.values = C_([], v.values)), v.keys && (v.keys = C_([], v.keys)), O5(n, v, b).then(function(p) {
            var y = b.map(function(S, E) {
              var C = p[E], D = { onerror: null, onsuccess: null };
              if (v.type === "delete")
                s.fire.call(D, S, C, w);
              else if (v.type === "add" || C === void 0) {
                var P = d.fire.call(D, S, v.values[E], w);
                S == null && P != null && (S = P, v.keys[E] = S, a.outbound || ci(v.values[E], a.keyPath, S));
              } else {
                var O = Jw(C, v.values[E]), T = u.fire.call(D, O, S, C, w);
                if (T) {
                  var A = v.values[E];
                  Object.keys(T).forEach(function(V) {
                    Gr(A, V) ? A[V] = T[V] : ci(A, V, T[V]);
                  });
                }
              }
              return D;
            });
            return n.mutate(v).then(function(S) {
              for (var E = S.failures, C = S.results, D = S.numFailures, P = S.lastResult, O = 0; O < b.length; ++O) {
                var T = C ? C[O] : b[O], A = y[O];
                T == null ? A.onerror && A.onerror(E[O]) : A.onsuccess && A.onsuccess(
                  v.type === "put" && p[O] ? v.values[O] : T
                );
              }
              return { failures: E, results: C, numFailures: D, lastResult: P };
            }).catch(function(S) {
              return y.forEach(function(E) {
                return E.onerror && E.onerror(S);
              }), Promise.reject(S);
            });
          });
        }
        function h(v) {
          return g(v.trans, v.range, 1e4);
        }
        function g(v, w, b) {
          return n.query({ trans: v, values: !1, query: { index: a, range: w }, limit: b }).then(function(p) {
            var y = p.result;
            return f({ type: "delete", keys: y, trans: v }).then(function(S) {
              return S.numFailures > 0 ? Promise.reject(S.failures[0]) : y.length < b ? { failures: [], numFailures: 0, lastResult: void 0 } : g(v, Jt(Jt({}, w), { lower: y[y.length - 1], lowerOpen: !0 }), b);
            });
          });
        }
      } });
      return r;
    } });
  }
};
function O5(e, t, n) {
  return t.type === "add" ? Promise.resolve([]) : e.getMany({ trans: t.trans, keys: n, cache: "immutable" });
}
function CI(e, t, n) {
  try {
    if (!t || t.keys.length < e.length)
      return null;
    for (var a = [], r = 0, i = 0; r < t.keys.length && i < e.length; ++r)
      _n(t.keys[r], e[i]) === 0 && (a.push(n ? Xl(t.values[r]) : t.values[r]), ++i);
    return a.length === e.length ? a : null;
  } catch {
    return null;
  }
}
var D5 = {
  stack: "dbcore",
  level: -1,
  create: function(e) {
    return {
      table: function(t) {
        var n = e.table(t);
        return Jt(Jt({}, n), { getMany: function(a) {
          if (!a.cache)
            return n.getMany(a);
          var r = CI(a.keys, a.trans._cache, a.cache === "clone");
          return r ? wt.resolve(r) : n.getMany(a).then(function(i) {
            return a.trans._cache = {
              keys: a.keys,
              values: a.cache === "clone" ? Xl(i) : i
            }, i;
          });
        }, mutate: function(a) {
          return a.type !== "add" && (a.trans._cache = null), n.mutate(a);
        } });
      }
    };
  }
};
function AI(e, t) {
  return e.trans.mode === "readonly" && !!e.subscr && !e.trans.explicit && e.trans.db._options.cache !== "disabled" && !t.schema.primaryKey.outbound;
}
function xI(e, t) {
  switch (e) {
    case "query":
      return t.values && !t.unique;
    case "get":
      return !1;
    case "getMany":
      return !1;
    case "count":
      return !1;
    case "openCursor":
      return !1;
  }
}
var B5 = {
  stack: "dbcore",
  level: 0,
  name: "Observability",
  create: function(e) {
    var t = e.schema.name, n = new Rr(e.MIN_KEY, e.MAX_KEY);
    return Jt(Jt({}, e), { transaction: function(a, r, i) {
      if (Pt.subscr && r !== "readonly")
        throw new Bt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Pt.querier));
      return e.transaction(a, r, i);
    }, table: function(a) {
      var r = e.table(a), i = r.schema, o = i.primaryKey, l = i.indexes, s = o.extractKey, d = o.outbound, u = o.autoIncrement && l.filter(function(v) {
        return v.compound && v.keyPath.includes(o.keyPath);
      }), f = Jt(Jt({}, r), { mutate: function(v) {
        var w, b, p = v.trans, y = v.mutatedParts || (v.mutatedParts = {}), S = function(B) {
          var N = "idb://".concat(t, "/").concat(a, "/").concat(B);
          return y[N] || (y[N] = new Rr());
        }, E = S(""), C = S(":dels"), D = v.type, P = v.type === "deleteRange" ? [v.range] : v.type === "delete" ? [v.keys] : v.values.length < 50 ? [Xw(o, v).filter(function(B) {
          return B;
        }), v.values] : [], O = P[0], T = P[1], A = v.trans._cache;
        if (va(O)) {
          E.addKeys(O);
          var V = D === "delete" || O.length === T.length ? CI(O, A) : null;
          V || C.addKeys(O), (V || T) && V5(S, i, V, T);
        } else if (O) {
          var M = {
            from: (w = O.lower) !== null && w !== void 0 ? w : e.MIN_KEY,
            to: (b = O.upper) !== null && b !== void 0 ? b : e.MAX_KEY
          };
          C.add(M), E.add(M);
        } else
          E.add(n), C.add(n), i.indexes.forEach(function(B) {
            return S(B.name).add(n);
          });
        return r.mutate(v).then(function(B) {
          return O && (v.type === "add" || v.type === "put") && (E.addKeys(B.results), u && u.forEach(function(N) {
            for (var H = v.values.map(function(Z) {
              return N.extractKey(Z);
            }), j = N.keyPath.findIndex(function(Z) {
              return Z === o.keyPath;
            }), te = 0, de = B.results.length; te < de; ++te)
              H[te][j] = B.results[te];
            S(N.name).addKeys(H);
          })), p.mutatedParts = mp(p.mutatedParts || {}, y), B;
        });
      } }), h = function(v) {
        var w, b, p = v.query, y = p.index, S = p.range;
        return [
          y,
          new Rr((w = S.lower) !== null && w !== void 0 ? w : e.MIN_KEY, (b = S.upper) !== null && b !== void 0 ? b : e.MAX_KEY)
        ];
      }, g = {
        get: function(v) {
          return [o, new Rr(v.key)];
        },
        getMany: function(v) {
          return [o, new Rr().addKeys(v.keys)];
        },
        count: h,
        query: h,
        openCursor: h
      };
      return ar(g).forEach(function(v) {
        f[v] = function(w) {
          var b = Pt.subscr, p = !!b, y = AI(Pt, r) && xI(v, w), S = y ? w.obsSet = {} : b;
          if (p) {
            var E = function(V) {
              var M = "idb://".concat(t, "/").concat(a, "/").concat(V);
              return S[M] || (S[M] = new Rr());
            }, C = E(""), D = E(":dels"), P = g[v](w), O = P[0], T = P[1];
            if (v === "query" && O.isPrimaryKey && !w.values ? D.add(T) : E(O.name || "").add(T), !O.isPrimaryKey)
              if (v === "count")
                D.add(n);
              else {
                var A = v === "query" && d && w.values && r.query(Jt(Jt({}, w), { values: !1 }));
                return r[v].apply(this, arguments).then(function(V) {
                  if (v === "query") {
                    if (d && w.values)
                      return A.then(function(H) {
                        var j = H.result;
                        return C.addKeys(j), V;
                      });
                    var M = w.values ? V.result.map(s) : V.result;
                    w.values ? C.addKeys(M) : D.addKeys(M);
                  } else if (v === "openCursor") {
                    var B = V, N = w.values;
                    return B && Object.create(B, {
                      key: {
                        get: function() {
                          return D.addKey(B.primaryKey), B.key;
                        }
                      },
                      primaryKey: {
                        get: function() {
                          var H = B.primaryKey;
                          return D.addKey(H), H;
                        }
                      },
                      value: {
                        get: function() {
                          return N && C.addKey(B.primaryKey), B.value;
                        }
                      }
                    });
                  }
                  return V;
                });
              }
          }
          return r[v].apply(this, arguments);
        };
      }), f;
    } });
  }
};
function V5(e, t, n, a) {
  function r(i) {
    var o = e(i.name || "");
    function l(d) {
      return d != null ? i.extractKey(d) : null;
    }
    var s = function(d) {
      return i.multiEntry && va(d) ? d.forEach(function(u) {
        return o.addKey(u);
      }) : o.addKey(d);
    };
    (n || a).forEach(function(d, u) {
      var f = n && l(n[u]), h = a && l(a[u]);
      _n(f, h) !== 0 && (f != null && s(f), h != null && s(h));
    });
  }
  t.indexes.forEach(r);
}
function xC(e, t, n) {
  if (n.numFailures === 0)
    return t;
  if (t.type === "deleteRange")
    return null;
  var a = t.keys ? t.keys.length : "values" in t && t.values ? t.values.length : 1;
  if (n.numFailures === a)
    return null;
  var r = Jt({}, t);
  return va(r.keys) && (r.keys = r.keys.filter(function(i, o) {
    return !(o in n.failures);
  })), "values" in r && va(r.values) && (r.values = r.values.filter(function(i, o) {
    return !(o in n.failures);
  })), r;
}
function M5(e, t) {
  return t.lower === void 0 ? !0 : t.lowerOpen ? _n(e, t.lower) > 0 : _n(e, t.lower) >= 0;
}
function R5(e, t) {
  return t.upper === void 0 ? !0 : t.upperOpen ? _n(e, t.upper) < 0 : _n(e, t.upper) <= 0;
}
function Yg(e, t) {
  return M5(e, t) && R5(e, t);
}
function TC(e, t, n, a, r, i) {
  if (!n || n.length === 0)
    return e;
  var o = t.query.index, l = o.multiEntry, s = t.query.range, d = a.schema.primaryKey, u = d.extractKey, f = o.extractKey, h = (o.lowLevelIndex || o).extractKey, g = n.reduce(function(v, w) {
    var b = v, p = [];
    if (w.type === "add" || w.type === "put")
      for (var y = new Rr(), S = w.values.length - 1; S >= 0; --S) {
        var E = w.values[S], C = u(E);
        if (!y.hasKey(C)) {
          var D = f(E);
          (l && va(D) ? D.some(function(V) {
            return Yg(V, s);
          }) : Yg(D, s)) && (y.addKey(C), p.push(E));
        }
      }
    switch (w.type) {
      case "add": {
        var P = new Rr().addKeys(t.values ? v.map(function(V) {
          return u(V);
        }) : v);
        b = v.concat(t.values ? p.filter(function(V) {
          var M = u(V);
          return P.hasKey(M) ? !1 : (P.addKey(M), !0);
        }) : p.map(function(V) {
          return u(V);
        }).filter(function(V) {
          return P.hasKey(V) ? !1 : (P.addKey(V), !0);
        }));
        break;
      }
      case "put": {
        var O = new Rr().addKeys(w.values.map(function(V) {
          return u(V);
        }));
        b = v.filter(
          function(V) {
            return !O.hasKey(t.values ? u(V) : V);
          }
        ).concat(
          t.values ? p : p.map(function(V) {
            return u(V);
          })
        );
        break;
      }
      case "delete":
        var T = new Rr().addKeys(w.keys);
        b = v.filter(function(V) {
          return !T.hasKey(t.values ? u(V) : V);
        });
        break;
      case "deleteRange":
        var A = w.range;
        b = v.filter(function(V) {
          return !Yg(u(V), A);
        });
        break;
    }
    return b;
  }, e);
  return g === e ? e : (g.sort(function(v, w) {
    return _n(h(v), h(w)) || _n(u(v), u(w));
  }), t.limit && t.limit < 1 / 0 && (g.length > t.limit ? g.length = t.limit : e.length === t.limit && g.length < t.limit && (r.dirty = !0)), i ? Object.freeze(g) : g);
}
function IC(e, t) {
  return _n(e.lower, t.lower) === 0 && _n(e.upper, t.upper) === 0 && !!e.lowerOpen == !!t.lowerOpen && !!e.upperOpen == !!t.upperOpen;
}
function L5(e, t, n, a) {
  if (e === void 0)
    return t !== void 0 ? -1 : 0;
  if (t === void 0)
    return 1;
  var r = _n(e, t);
  if (r === 0) {
    if (n && a)
      return 0;
    if (n)
      return 1;
    if (a)
      return -1;
  }
  return r;
}
function F5(e, t, n, a) {
  if (e === void 0)
    return t !== void 0 ? 1 : 0;
  if (t === void 0)
    return -1;
  var r = _n(e, t);
  if (r === 0) {
    if (n && a)
      return 0;
    if (n)
      return -1;
    if (a)
      return 1;
  }
  return r;
}
function N5(e, t) {
  return L5(e.lower, t.lower, e.lowerOpen, t.lowerOpen) <= 0 && F5(e.upper, t.upper, e.upperOpen, t.upperOpen) >= 0;
}
function U5(e, t, n, a) {
  var r = jl["idb://".concat(e, "/").concat(t)];
  if (!r)
    return [];
  var i = r.queries[n];
  if (!i)
    return [null, !1, r, null];
  var o = a.query ? a.query.index.name : null, l = i[o || ""];
  if (!l)
    return [null, !1, r, null];
  switch (n) {
    case "query":
      var s = l.find(function(f) {
        return f.req.limit === a.limit && f.req.values === a.values && IC(f.req.query.range, a.query.range);
      });
      if (s)
        return [
          s,
          !0,
          r,
          l
        ];
      var d = l.find(function(f) {
        var h = "limit" in f.req ? f.req.limit : 1 / 0;
        return h >= a.limit && (a.values ? f.req.values : !0) && N5(f.req.query.range, a.query.range);
      });
      return [d, !1, r, l];
    case "count":
      var u = l.find(function(f) {
        return IC(f.req.query.range, a.query.range);
      });
      return [u, !!u, r, l];
  }
}
function $5(e, t, n, a) {
  e.subscribers.add(n), a.addEventListener("abort", function() {
    e.subscribers.delete(n), e.subscribers.size === 0 && q5(e, t);
  });
}
function q5(e, t) {
  setTimeout(function() {
    e.subscribers.size === 0 && Ol(t, e);
  }, 3e3);
}
var H5 = {
  stack: "dbcore",
  level: 0,
  name: "Cache",
  create: function(e) {
    var t = e.schema.name, n = Jt(Jt({}, e), { transaction: function(a, r, i) {
      var o = e.transaction(a, r, i);
      if (r === "readwrite") {
        var l = new AbortController(), s = l.signal, d = function(u) {
          return function() {
            if (l.abort(), r === "readwrite") {
              for (var f = /* @__PURE__ */ new Set(), h = 0, g = a; h < g.length; h++) {
                var v = g[h], w = jl["idb://".concat(t, "/").concat(v)];
                if (w) {
                  var b = e.table(v), p = w.optimisticOps.filter(function(N) {
                    return N.trans === o;
                  });
                  if (o._explicit && u && o.mutatedParts)
                    for (var y = 0, S = Object.values(w.queries.query); y < S.length; y++)
                      for (var E = S[y], C = 0, D = E.slice(); C < D.length; C++) {
                        var P = D[C];
                        Gw(P.obsSet, o.mutatedParts) && (Ol(E, P), P.subscribers.forEach(function(N) {
                          return f.add(N);
                        }));
                      }
                  else if (p.length > 0) {
                    w.optimisticOps = w.optimisticOps.filter(function(N) {
                      return N.trans !== o;
                    });
                    for (var O = 0, T = Object.values(w.queries.query); O < T.length; O++)
                      for (var E = T[O], A = 0, V = E.slice(); A < V.length; A++) {
                        var P = V[A];
                        if (P.res != null && o.mutatedParts)
                          if (u && !P.dirty) {
                            var M = Object.isFrozen(P.res), B = TC(P.res, P.req, p, b, P, M);
                            P.dirty ? (Ol(E, P), P.subscribers.forEach(function(j) {
                              return f.add(j);
                            })) : B !== P.res && (P.res = B, P.promise = wt.resolve({ result: B }));
                          } else
                            P.dirty && Ol(E, P), P.subscribers.forEach(function(j) {
                              return f.add(j);
                            });
                      }
                  }
                }
              }
              f.forEach(function(N) {
                return N();
              });
            }
          };
        };
        o.addEventListener("abort", d(!1), {
          signal: s
        }), o.addEventListener("error", d(!1), {
          signal: s
        }), o.addEventListener("complete", d(!0), {
          signal: s
        });
      }
      return o;
    }, table: function(a) {
      var r = e.table(a), i = r.schema.primaryKey, o = Jt(Jt({}, r), { mutate: function(l) {
        var s = Pt.trans;
        if (i.outbound || s.db._options.cache === "disabled" || s.explicit || s.idbtrans.mode !== "readwrite")
          return r.mutate(l);
        var d = jl["idb://".concat(t, "/").concat(a)];
        if (!d)
          return r.mutate(l);
        var u = r.mutate(l);
        return (l.type === "add" || l.type === "put") && (l.values.length >= 50 || Xw(i, l).some(function(f) {
          return f == null;
        })) ? u.then(function(f) {
          var h = Jt(Jt({}, l), { values: l.values.map(function(v, w) {
            var b;
            if (f.failures[w])
              return v;
            var p = !((b = i.keyPath) === null || b === void 0) && b.includes(".") ? Xl(v) : Jt({}, v);
            return ci(p, i.keyPath, f.results[w]), p;
          }) }), g = xC(d, h, f);
          d.optimisticOps.push(g), queueMicrotask(function() {
            return l.mutatedParts && Eh(l.mutatedParts);
          });
        }) : (d.optimisticOps.push(l), l.mutatedParts && Eh(l.mutatedParts), u.then(function(f) {
          if (f.numFailures > 0) {
            Ol(d.optimisticOps, l);
            var h = xC(d, l, f);
            h && d.optimisticOps.push(h), l.mutatedParts && Eh(l.mutatedParts);
          }
        }), u.catch(function() {
          Ol(d.optimisticOps, l), l.mutatedParts && Eh(l.mutatedParts);
        })), u;
      }, query: function(l) {
        var s;
        if (!AI(Pt, r) || !xI("query", l))
          return r.query(l);
        var d = ((s = Pt.trans) === null || s === void 0 ? void 0 : s.db._options.cache) === "immutable", u = Pt, f = u.requery, h = u.signal, g = U5(t, a, "query", l), v = g[0], w = g[1], b = g[2], p = g[3];
        if (v && w)
          v.obsSet = l.obsSet;
        else {
          var y = r.query(l).then(function(S) {
            var E = S.result;
            if (v && (v.res = E), d) {
              for (var C = 0, D = E.length; C < D; ++C)
                Object.freeze(E[C]);
              Object.freeze(E);
            } else
              S.result = Xl(E);
            return S;
          }).catch(function(S) {
            return p && v && Ol(p, v), Promise.reject(S);
          });
          v = {
            obsSet: l.obsSet,
            promise: y,
            subscribers: /* @__PURE__ */ new Set(),
            type: "query",
            req: l,
            dirty: !1
          }, p ? p.push(v) : (p = [v], b || (b = jl["idb://".concat(t, "/").concat(a)] = {
            queries: {
              query: {},
              count: {}
            },
            objs: /* @__PURE__ */ new Map(),
            optimisticOps: [],
            unsignaledParts: {}
          }), b.queries.query[l.query.index.name || ""] = p);
        }
        return $5(v, p, f, h), v.promise.then(function(S) {
          return {
            result: TC(S.result, l, b?.optimisticOps, r, v, d)
          };
        });
      } });
      return o;
    } });
    return n;
  }
};
function Oh(e, t) {
  return new Proxy(e, {
    get: function(n, a, r) {
      return a === "db" ? t : Reflect.get(n, a, r);
    }
  });
}
var ji = function() {
  function e(t, n) {
    var a = this;
    this._middlewares = {}, this.verno = 0;
    var r = e.dependencies;
    this._options = n = Jt({
      addons: e.addons,
      autoOpen: !0,
      indexedDB: r.indexedDB,
      IDBKeyRange: r.IDBKeyRange,
      cache: "cloned"
    }, n), this._deps = {
      indexedDB: n.indexedDB,
      IDBKeyRange: n.IDBKeyRange
    };
    var i = n.addons;
    this._dbSchema = {}, this._versions = [], this._storeNames = [], this._allTables = {}, this.idbdb = null, this._novip = this;
    var o = {
      dbOpenError: null,
      isBeingOpened: !1,
      onReadyBeingFired: null,
      openComplete: !1,
      dbReadyResolve: Dn,
      dbReadyPromise: null,
      cancelOpen: Dn,
      openCanceller: null,
      autoSchema: !0,
      PR1398_maxLoop: 3,
      autoOpen: n.autoOpen
    };
    o.dbReadyPromise = new wt(function(s) {
      o.dbReadyResolve = s;
    }), o.openCanceller = new wt(function(s, d) {
      o.cancelOpen = d;
    }), this._state = o, this.name = t, this.on = qf(this, "populate", "blocked", "versionchange", "close", { ready: [Fw, Dn] }), this.on.ready.subscribe = tI(this.on.ready.subscribe, function(s) {
      return function(d, u) {
        e.vip(function() {
          var f = a._state;
          if (f.openComplete)
            f.dbOpenError || wt.resolve().then(d), u && s(d);
          else if (f.onReadyBeingFired)
            f.onReadyBeingFired.push(d), u && s(d);
          else {
            s(d);
            var h = a;
            u || s(function g() {
              h.on.ready.unsubscribe(d), h.on.ready.unsubscribe(g);
            });
          }
        });
      };
    }), this.Collection = Q8(this), this.Table = j8(this), this.Transaction = r5(this), this.Version = b5(this), this.WhereClause = n5(this), this.on("versionchange", function(s) {
      s.newVersion > 0 ? console.warn("Another connection wants to upgrade database '".concat(a.name, "'. Closing db now to resume the upgrade.")) : console.warn("Another connection wants to delete database '".concat(a.name, "'. Closing db now to resume the delete request.")), a.close({ disableAutoOpen: !1 });
    }), this.on("blocked", function(s) {
      !s.newVersion || s.newVersion < s.oldVersion ? console.warn("Dexie.delete('".concat(a.name, "') was blocked")) : console.warn("Upgrade '".concat(a.name, "' blocked by other connection holding version ").concat(s.oldVersion / 10));
    }), this._maxKey = wf(n.IDBKeyRange), this._createTransaction = function(s, d, u, f) {
      return new a.Transaction(s, d, u, a._options.chromeTransactionDurability, f);
    }, this._fireOnBlocked = function(s) {
      a.on("blocked").fire(s), mu.filter(function(d) {
        return d.name === a.name && d !== a && !d._state.vcFired;
      }).map(function(d) {
        return d.on("versionchange").fire(s);
      });
    }, this.use(D5), this.use(H5), this.use(B5), this.use(E5), this.use(P5);
    var l = new Proxy(this, {
      get: function(s, d, u) {
        if (d === "_vip")
          return !0;
        if (d === "table")
          return function(h) {
            return Oh(a.table(h), l);
          };
        var f = Reflect.get(s, d, u);
        return f instanceof vI ? Oh(f, l) : d === "tables" ? f.map(function(h) {
          return Oh(h, l);
        }) : d === "_createTransaction" ? function() {
          var h = f.apply(this, arguments);
          return Oh(h, l);
        } : f;
      }
    });
    this.vip = l, i.forEach(function(s) {
      return s(a);
    });
  }
  return e.prototype.version = function(t) {
    if (isNaN(t) || t < 0.1)
      throw new Bt.Type("Given version is not a positive number");
    if (t = Math.round(t * 10) / 10, this.idbdb || this._state.isBeingOpened)
      throw new Bt.Schema("Cannot add version when database is open");
    this.verno = Math.max(this.verno, t);
    var n = this._versions, a = n.filter(function(r) {
      return r._cfg.version === t;
    })[0];
    return a || (a = new this.Version(t), n.push(a), n.sort(d5), a.stores({}), this._state.autoSchema = !1, a);
  }, e.prototype._whenReady = function(t) {
    var n = this;
    return this.idbdb && (this._state.openComplete || Pt.letThrough || this._vip) ? t() : new wt(function(a, r) {
      if (n._state.openComplete)
        return r(new Bt.DatabaseClosed(n._state.dbOpenError));
      if (!n._state.isBeingOpened) {
        if (!n._state.autoOpen) {
          r(new Bt.DatabaseClosed());
          return;
        }
        n.open().catch(Dn);
      }
      n._state.dbReadyPromise.then(a, r);
    }).then(t);
  }, e.prototype.use = function(t) {
    var n = t.stack, a = t.create, r = t.level, i = t.name;
    i && this.unuse({ stack: n, name: i });
    var o = this._middlewares[n] || (this._middlewares[n] = []);
    return o.push({ stack: n, create: a, level: r ?? 10, name: i }), o.sort(function(l, s) {
      return l.level - s.level;
    }), this;
  }, e.prototype.unuse = function(t) {
    var n = t.stack, a = t.name, r = t.create;
    return n && this._middlewares[n] && (this._middlewares[n] = this._middlewares[n].filter(function(i) {
      return r ? i.create !== r : a ? i.name !== a : !1;
    })), this;
  }, e.prototype.open = function() {
    var t = this;
    return ec(
      Fs,
      function() {
        return x5(t);
      }
    );
  }, e.prototype._close = function() {
    var t = this._state, n = mu.indexOf(this);
    if (n >= 0 && mu.splice(n, 1), this.idbdb) {
      try {
        this.idbdb.close();
      } catch {
      }
      this.idbdb = null;
    }
    t.isBeingOpened || (t.dbReadyPromise = new wt(function(a) {
      t.dbReadyResolve = a;
    }), t.openCanceller = new wt(function(a, r) {
      t.cancelOpen = r;
    }));
  }, e.prototype.close = function(t) {
    var n = t === void 0 ? { disableAutoOpen: !0 } : t, a = n.disableAutoOpen, r = this._state;
    a ? (r.isBeingOpened && r.cancelOpen(new Bt.DatabaseClosed()), this._close(), r.autoOpen = !1, r.dbOpenError = new Bt.DatabaseClosed()) : (this._close(), r.autoOpen = this._options.autoOpen || r.isBeingOpened, r.openComplete = !1, r.dbOpenError = null);
  }, e.prototype.delete = function(t) {
    var n = this;
    t === void 0 && (t = { disableAutoOpen: !0 });
    var a = arguments.length > 0 && typeof arguments[0] != "object", r = this._state;
    return new wt(function(i, o) {
      var l = function() {
        n.close(t);
        var s = n._deps.indexedDB.deleteDatabase(n.name);
        s.onsuccess = ra(function() {
          S5(n._deps, n.name), i();
        }), s.onerror = co(o), s.onblocked = n._fireOnBlocked;
      };
      if (a)
        throw new Bt.InvalidArgument("Invalid closeOptions argument to db.delete()");
      r.isBeingOpened ? r.dbReadyPromise.then(l) : l();
    });
  }, e.prototype.backendDB = function() {
    return this.idbdb;
  }, e.prototype.isOpen = function() {
    return this.idbdb !== null;
  }, e.prototype.hasBeenClosed = function() {
    var t = this._state.dbOpenError;
    return t && t.name === "DatabaseClosed";
  }, e.prototype.hasFailed = function() {
    return this._state.dbOpenError !== null;
  }, e.prototype.dynamicallyOpened = function() {
    return this._state.autoSchema;
  }, Object.defineProperty(e.prototype, "tables", {
    get: function() {
      var t = this;
      return ar(this._allTables).map(function(n) {
        return t._allTables[n];
      });
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.transaction = function() {
    var t = T5.apply(this, arguments);
    return this._transaction.apply(this, t);
  }, e.prototype._transaction = function(t, n, a) {
    var r = this, i = Pt.trans;
    (!i || i.db !== this || t.indexOf("!") !== -1) && (i = null);
    var o = t.indexOf("?") !== -1;
    t = t.replace("!", "").replace("?", "");
    var l, s;
    try {
      if (s = n.map(function(u) {
        var f = u instanceof r.Table ? u.name : u;
        if (typeof f != "string")
          throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
        return f;
      }), t == "r" || t === Ug)
        l = Ug;
      else if (t == "rw" || t == $g)
        l = $g;
      else
        throw new Bt.InvalidArgument("Invalid transaction mode: " + t);
      if (i) {
        if (i.mode === Ug && l === $g)
          if (o)
            i = null;
          else
            throw new Bt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
        i && s.forEach(function(u) {
          if (i && i.storeNames.indexOf(u) === -1)
            if (o)
              i = null;
            else
              throw new Bt.SubTransaction("Table " + u + " not included in parent transaction.");
        }), o && i && !i.active && (i = null);
      }
    } catch (u) {
      return i ? i._promise(null, function(f, h) {
        h(u);
      }) : Ma(u);
    }
    var d = SI.bind(null, this, l, s, i, a);
    return i ? i._promise(l, d, "lock") : Pt.trans ? ec(Pt.transless, function() {
      return r._whenReady(d);
    }) : this._whenReady(d);
  }, e.prototype.table = function(t) {
    if (!Gr(this._allTables, t))
      throw new Bt.InvalidTable("Table ".concat(t, " does not exist"));
    return this._allTables[t];
  }, e;
}(), z5 = typeof Symbol < "u" && "observable" in Symbol ? Symbol.observable : "@@observable", W5 = function() {
  function e(t) {
    this._subscribe = t;
  }
  return e.prototype.subscribe = function(t, n, a) {
    return this._subscribe(!t || typeof t == "function" ? { next: t, error: n, complete: a } : t);
  }, e.prototype[z5] = function() {
    return this;
  }, e;
}(), M_;
try {
  M_ = {
    indexedDB: lr.indexedDB || lr.mozIndexedDB || lr.webkitIndexedDB || lr.msIndexedDB,
    IDBKeyRange: lr.IDBKeyRange || lr.webkitIDBKeyRange
  };
} catch {
  M_ = { indexedDB: null, IDBKeyRange: null };
}
function j5(e) {
  var t = !1, n, a = new W5(function(r) {
    var i = Mw(e);
    function o(p) {
      var y = ju();
      try {
        i && Yu();
        var S = zs(e, p);
        return i && (S = S.finally(Ws)), S;
      } finally {
        y && Ku();
      }
    }
    var l = !1, s, d = {}, u = {}, f = {
      get closed() {
        return l;
      },
      unsubscribe: function() {
        l || (l = !0, s && s.abort(), h && Ks.storagemutated.unsubscribe(w));
      }
    };
    r.start && r.start(f);
    var h = !1, g = function() {
      return Ng(b);
    };
    function v() {
      return Gw(u, d);
    }
    var w = function(p) {
      mp(d, p), v() && g();
    }, b = function() {
      if (!(l || !M_.indexedDB)) {
        d = {};
        var p = {};
        s && s.abort(), s = new AbortController();
        var y = {
          subscr: p,
          signal: s.signal,
          requery: g,
          querier: e,
          trans: null
        }, S = o(y);
        Promise.resolve(S).then(function(E) {
          t = !0, n = E, !(l || y.signal.aborted) && (d = {}, u = p, !y8(u) && !h && (Ks(zf, w), h = !0), Ng(function() {
            return !l && r.next && r.next(E);
          }));
        }, function(E) {
          t = !1, ["DatabaseClosedError", "AbortError"].includes(E?.name) || l || Ng(function() {
            l || r.error && r.error(E);
          });
        });
      }
    };
    return setTimeout(g, 0), f;
  });
  return a.hasValue = function() {
    return t;
  }, a.getValue = function() {
    return n;
  }, a;
}
var Ml = ji;
Iu(Ml, Jt(Jt({}, up), {
  delete: function(e) {
    var t = new Ml(e, { addons: [] });
    return t.delete();
  },
  exists: function(e) {
    return new Ml(e, { addons: [] }).open().then(function(t) {
      return t.close(), !0;
    }).catch("NoSuchDatabaseError", function() {
      return !1;
    });
  },
  getDatabaseNames: function(e) {
    try {
      return w5(Ml.dependencies).then(e);
    } catch {
      return Ma(new Bt.MissingAPI());
    }
  },
  defineClass: function() {
    function e(t) {
      ui(this, t);
    }
    return e;
  },
  ignoreTransaction: function(e) {
    return Pt.trans ? ec(Pt.transless, e) : e();
  },
  vip: ub,
  async: function(e) {
    return function() {
      try {
        var t = db(e.apply(this, arguments));
        return !t || typeof t.then != "function" ? wt.resolve(t) : t;
      } catch (n) {
        return Ma(n);
      }
    };
  },
  spawn: function(e, t, n) {
    try {
      var a = db(e.apply(n, t || []));
      return !a || typeof a.then != "function" ? wt.resolve(a) : a;
    } catch (r) {
      return Ma(r);
    }
  },
  currentTransaction: {
    get: function() {
      return Pt.trans || null;
    }
  },
  waitFor: function(e, t) {
    var n = wt.resolve(typeof e == "function" ? Ml.ignoreTransaction(e) : e).timeout(t || 6e4);
    return Pt.trans ? Pt.trans.waitFor(n) : n;
  },
  Promise: wt,
  debug: {
    get: function() {
      return wo;
    },
    set: function(e) {
      cI(e);
    }
  },
  derive: zu,
  extend: ui,
  props: Iu,
  override: tI,
  Events: qf,
  on: Ks,
  liveQuery: j5,
  extendObservabilitySet: mp,
  getByKeyPath: Jo,
  setByKeyPath: ci,
  delByKeyPath: p8,
  shallowClone: aI,
  deepClone: Xl,
  getObjectDiff: Jw,
  cmp: _n,
  asap: nI,
  minKey: ib,
  addons: [],
  connections: mu,
  errnames: Lw,
  dependencies: M_,
  cache: jl,
  semVer: vC,
  version: vC.split(".").map(function(e) {
    return parseInt(e);
  }).reduce(function(e, t, n) {
    return e + t / Math.pow(10, n * 2);
  })
}));
Ml.maxKey = wf(Ml.dependencies.IDBKeyRange);
typeof dispatchEvent < "u" && typeof addEventListener < "u" && (Ks(zf, function(e) {
  if (!Ms) {
    var t;
    t = new CustomEvent(ob, {
      detail: e
    }), Ms = !0, dispatchEvent(t), Ms = !1;
  }
}), addEventListener(ob, function(e) {
  var t = e.detail;
  Ms || Zw(t);
}));
function Zw(e) {
  var t = Ms;
  try {
    Ms = !0, Ks.storagemutated.fire(e), Qw(e, !0);
  } finally {
    Ms = t;
  }
}
var Ms = !1, Ds, fb = function() {
};
typeof BroadcastChannel < "u" && (fb = function() {
  Ds = new BroadcastChannel(ob), Ds.onmessage = function(e) {
    return e.data && Zw(e.data);
  };
}, fb(), typeof Ds.unref == "function" && Ds.unref(), Ks(zf, function(e) {
  Ms || Ds.postMessage(e);
}));
typeof addEventListener < "u" && (addEventListener("pagehide", function(e) {
  if (!ji.disableBfCache && e.persisted) {
    wo && console.debug("Dexie: handling persisted pagehide"), Ds?.close();
    for (var t = 0, n = mu; t < n.length; t++) {
      var a = n[t];
      a.close({ disableAutoOpen: !1 });
    }
  }
}), addEventListener("pageshow", function(e) {
  !ji.disableBfCache && e.persisted && (wo && console.debug("Dexie: handling persisted pageshow"), fb(), Zw({ all: new Rr(-1 / 0, [[]]) }));
}));
wt.rejectionMapper = A8;
cI(wo);
const TI = 6048e5, K5 = 864e5, Y5 = 6e4, II = 36e5, G5 = 1e3, EC = Symbol.for("constructDateFrom");
function On(e, t) {
  return typeof e == "function" ? e(t) : e && typeof e == "object" && EC in e ? e[EC](t) : e instanceof Date ? new e.constructor(t) : new Date(t);
}
function Ft(e, t) {
  return On(t || e, e);
}
function Ti(e, t, n) {
  const a = Ft(e, n?.in);
  return isNaN(t) ? On(n?.in || e, NaN) : (t && a.setDate(a.getDate() + t), a);
}
function Hi(e, t, n) {
  const a = Ft(e, n?.in);
  if (isNaN(t)) return On(e, NaN);
  if (!t)
    return a;
  const r = a.getDate(), i = On(e, a.getTime());
  i.setMonth(a.getMonth() + t + 1, 0);
  const o = i.getDate();
  return r >= o ? i : (a.setFullYear(
    i.getFullYear(),
    i.getMonth(),
    r
  ), a);
}
function EI(e, t, n) {
  const {
    years: a = 0,
    months: r = 0,
    weeks: i = 0,
    days: o = 0,
    hours: l = 0,
    minutes: s = 0,
    seconds: d = 0
  } = t, u = Ft(e, n?.in), f = r || a ? Hi(u, r + a * 12) : u, h = o || i ? Ti(f, o + i * 7) : f, g = s + l * 60, w = (d + g * 60) * 1e3;
  return On(e, +h + w);
}
function Q5(e, t, n) {
  return On(e, +Ft(e) + t);
}
function J5(e, t, n) {
  return Q5(e, t * II);
}
let X5 = {};
function fc() {
  return X5;
}
function Ki(e, t) {
  const n = fc(), a = t?.weekStartsOn ?? t?.locale?.options?.weekStartsOn ?? n.weekStartsOn ?? n.locale?.options?.weekStartsOn ?? 0, r = Ft(e, t?.in), i = r.getDay(), o = (i < a ? 7 : 0) + i - a;
  return r.setDate(r.getDate() - o), r.setHours(0, 0, 0, 0), r;
}
function Eu(e, t) {
  return Ki(e, { ...t, weekStartsOn: 1 });
}
function PI(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = On(n, 0);
  r.setFullYear(a + 1, 0, 4), r.setHours(0, 0, 0, 0);
  const i = Eu(r), o = On(n, 0);
  o.setFullYear(a, 0, 4), o.setHours(0, 0, 0, 0);
  const l = Eu(o);
  return n.getTime() >= i.getTime() ? a + 1 : n.getTime() >= l.getTime() ? a : a - 1;
}
function R_(e) {
  const t = Ft(e), n = new Date(
    Date.UTC(
      t.getFullYear(),
      t.getMonth(),
      t.getDate(),
      t.getHours(),
      t.getMinutes(),
      t.getSeconds(),
      t.getMilliseconds()
    )
  );
  return n.setUTCFullYear(t.getFullYear()), +e - +n;
}
function Wf(e, ...t) {
  const n = On.bind(
    null,
    t.find((a) => typeof a == "object")
  );
  return t.map(n);
}
function PC(e, t) {
  const n = Ft(e, t?.in);
  return n.setHours(0, 0, 0, 0), n;
}
function OI(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  ), i = PC(a), o = PC(r), l = +i - R_(i), s = +o - R_(o);
  return Math.round((l - s) / K5);
}
function Z5(e, t) {
  const n = PI(e, t), a = On(e, 0);
  return a.setFullYear(n, 0, 4), a.setHours(0, 0, 0, 0), Eu(a);
}
function eU(e, t, n) {
  return Hi(e, t * 3, n);
}
function e0(e, t, n) {
  return Hi(e, t * 12, n);
}
function OC(e, t) {
  const n = +Ft(e) - +Ft(t);
  return n < 0 ? -1 : n > 0 ? 1 : n;
}
function DI(e) {
  return e instanceof Date || typeof e == "object" && Object.prototype.toString.call(e) === "[object Date]";
}
function af(e) {
  return !(!DI(e) && typeof e != "number" || isNaN(+Ft(e)));
}
function DC(e, t) {
  const n = Ft(e, t?.in);
  return Math.trunc(n.getMonth() / 3) + 1;
}
function tU(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  );
  return a.getFullYear() - r.getFullYear();
}
function nU(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  ), i = OC(a, r), o = Math.abs(tU(a, r));
  a.setFullYear(1584), r.setFullYear(1584);
  const l = OC(a, r) === -i, s = i * (o - +l);
  return s === 0 ? 0 : s;
}
function BI(e, t) {
  const [n, a] = Wf(e, t.start, t.end);
  return { start: n, end: a };
}
function VI(e, t) {
  const { start: n, end: a } = BI(t?.in, e);
  let r = +n > +a;
  const i = r ? +n : +a, o = r ? a : n;
  o.setHours(0, 0, 0, 0);
  let l = 1;
  const s = [];
  for (; +o <= i; )
    s.push(On(n, o)), o.setDate(o.getDate() + l), o.setHours(0, 0, 0, 0);
  return r ? s.reverse() : s;
}
function Ul(e, t) {
  const n = Ft(e, t?.in), a = n.getMonth(), r = a - a % 3;
  return n.setMonth(r, 1), n.setHours(0, 0, 0, 0), n;
}
function aU(e, t) {
  const { start: n, end: a } = BI(t?.in, e);
  let r = +n > +a;
  const i = r ? +Ul(n) : +Ul(a);
  let o = Ul(r ? a : n), l = 1;
  const s = [];
  for (; +o <= i; )
    s.push(On(n, o)), o = eU(o, l);
  return r ? s.reverse() : s;
}
function rU(e, t) {
  const n = Ft(e, t?.in);
  return n.setDate(1), n.setHours(0, 0, 0, 0), n;
}
function MI(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear();
  return n.setFullYear(a + 1, 0, 0), n.setHours(23, 59, 59, 999), n;
}
function Sf(e, t) {
  const n = Ft(e, t?.in);
  return n.setFullYear(n.getFullYear(), 0, 1), n.setHours(0, 0, 0, 0), n;
}
function RI(e, t) {
  const n = fc(), a = t?.weekStartsOn ?? t?.locale?.options?.weekStartsOn ?? n.weekStartsOn ?? n.locale?.options?.weekStartsOn ?? 0, r = Ft(e, t?.in), i = r.getDay(), o = (i < a ? -7 : 0) + 6 - (i - a);
  return r.setDate(r.getDate() + o), r.setHours(23, 59, 59, 999), r;
}
function BC(e, t) {
  const n = Ft(e, t?.in), a = n.getMonth(), r = a - a % 3 + 3;
  return n.setMonth(r, 0), n.setHours(23, 59, 59, 999), n;
}
const iU = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
}, oU = (e, t, n) => {
  let a;
  const r = iU[e];
  return typeof r == "string" ? a = r : t === 1 ? a = r.one : a = r.other.replace("{{count}}", t.toString()), n?.addSuffix ? n.comparison && n.comparison > 0 ? "in " + a : a + " ago" : a;
};
function Gg(e) {
  return (t = {}) => {
    const n = t.width ? String(t.width) : e.defaultWidth;
    return e.formats[n] || e.formats[e.defaultWidth];
  };
}
const sU = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
}, lU = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
}, cU = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
}, uU = {
  date: Gg({
    formats: sU,
    defaultWidth: "full"
  }),
  time: Gg({
    formats: lU,
    defaultWidth: "full"
  }),
  dateTime: Gg({
    formats: cU,
    defaultWidth: "full"
  })
}, dU = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
}, fU = (e, t, n, a) => dU[e];
function Rd(e) {
  return (t, n) => {
    const a = n?.context ? String(n.context) : "standalone";
    let r;
    if (a === "formatting" && e.formattingValues) {
      const o = e.defaultFormattingWidth || e.defaultWidth, l = n?.width ? String(n.width) : o;
      r = e.formattingValues[l] || e.formattingValues[o];
    } else {
      const o = e.defaultWidth, l = n?.width ? String(n.width) : e.defaultWidth;
      r = e.values[l] || e.values[o];
    }
    const i = e.argumentCallback ? e.argumentCallback(t) : t;
    return r[i];
  };
}
const mU = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
}, hU = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
}, _U = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
}, pU = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
}, vU = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
}, gU = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
}, yU = (e, t) => {
  const n = Number(e), a = n % 100;
  if (a > 20 || a < 10)
    switch (a % 10) {
      case 1:
        return n + "st";
      case 2:
        return n + "nd";
      case 3:
        return n + "rd";
    }
  return n + "th";
}, bU = {
  ordinalNumber: yU,
  era: Rd({
    values: mU,
    defaultWidth: "wide"
  }),
  quarter: Rd({
    values: hU,
    defaultWidth: "wide",
    argumentCallback: (e) => e - 1
  }),
  month: Rd({
    values: _U,
    defaultWidth: "wide"
  }),
  day: Rd({
    values: pU,
    defaultWidth: "wide"
  }),
  dayPeriod: Rd({
    values: vU,
    defaultWidth: "wide",
    formattingValues: gU,
    defaultFormattingWidth: "wide"
  })
};
function Ld(e) {
  return (t, n = {}) => {
    const a = n.width, r = a && e.matchPatterns[a] || e.matchPatterns[e.defaultMatchWidth], i = t.match(r);
    if (!i)
      return null;
    const o = i[0], l = a && e.parsePatterns[a] || e.parsePatterns[e.defaultParseWidth], s = Array.isArray(l) ? kU(l, (f) => f.test(o)) : (
      // [TODO] -- I challenge you to fix the type
      wU(l, (f) => f.test(o))
    );
    let d;
    d = e.valueCallback ? e.valueCallback(s) : s, d = n.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      n.valueCallback(d)
    ) : d;
    const u = t.slice(o.length);
    return { value: d, rest: u };
  };
}
function wU(e, t) {
  for (const n in e)
    if (Object.prototype.hasOwnProperty.call(e, n) && t(e[n]))
      return n;
}
function kU(e, t) {
  for (let n = 0; n < e.length; n++)
    if (t(e[n]))
      return n;
}
function SU(e) {
  return (t, n = {}) => {
    const a = t.match(e.matchPattern);
    if (!a) return null;
    const r = a[0], i = t.match(e.parsePattern);
    if (!i) return null;
    let o = e.valueCallback ? e.valueCallback(i[0]) : i[0];
    o = n.valueCallback ? n.valueCallback(o) : o;
    const l = t.slice(r.length);
    return { value: o, rest: l };
  };
}
const CU = /^(\d+)(th|st|nd|rd)?/i, AU = /\d+/i, xU = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
}, TU = {
  any: [/^b/i, /^(a|c)/i]
}, IU = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
}, EU = {
  any: [/1/i, /2/i, /3/i, /4/i]
}, PU = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
}, OU = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
}, DU = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
}, BU = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
}, VU = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
}, MU = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
}, RU = {
  ordinalNumber: SU({
    matchPattern: CU,
    parsePattern: AU,
    valueCallback: (e) => parseInt(e, 10)
  }),
  era: Ld({
    matchPatterns: xU,
    defaultMatchWidth: "wide",
    parsePatterns: TU,
    defaultParseWidth: "any"
  }),
  quarter: Ld({
    matchPatterns: IU,
    defaultMatchWidth: "wide",
    parsePatterns: EU,
    defaultParseWidth: "any",
    valueCallback: (e) => e + 1
  }),
  month: Ld({
    matchPatterns: PU,
    defaultMatchWidth: "wide",
    parsePatterns: OU,
    defaultParseWidth: "any"
  }),
  day: Ld({
    matchPatterns: DU,
    defaultMatchWidth: "wide",
    parsePatterns: BU,
    defaultParseWidth: "any"
  }),
  dayPeriod: Ld({
    matchPatterns: VU,
    defaultMatchWidth: "any",
    parsePatterns: MU,
    defaultParseWidth: "any"
  })
}, LI = {
  code: "en-US",
  formatDistance: oU,
  formatLong: uU,
  formatRelative: fU,
  localize: bU,
  match: RU,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};
function LU(e, t) {
  const n = Ft(e, t?.in);
  return OI(n, Sf(n)) + 1;
}
function t0(e, t) {
  const n = Ft(e, t?.in), a = +Eu(n) - +Z5(n);
  return Math.round(a / TI) + 1;
}
function n0(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = fc(), i = t?.firstWeekContainsDate ?? t?.locale?.options?.firstWeekContainsDate ?? r.firstWeekContainsDate ?? r.locale?.options?.firstWeekContainsDate ?? 1, o = On(t?.in || e, 0);
  o.setFullYear(a + 1, 0, i), o.setHours(0, 0, 0, 0);
  const l = Ki(o, t), s = On(t?.in || e, 0);
  s.setFullYear(a, 0, i), s.setHours(0, 0, 0, 0);
  const d = Ki(s, t);
  return +n >= +l ? a + 1 : +n >= +d ? a : a - 1;
}
function FU(e, t) {
  const n = fc(), a = t?.firstWeekContainsDate ?? t?.locale?.options?.firstWeekContainsDate ?? n.firstWeekContainsDate ?? n.locale?.options?.firstWeekContainsDate ?? 1, r = n0(e, t), i = On(t?.in || e, 0);
  return i.setFullYear(r, 0, a), i.setHours(0, 0, 0, 0), Ki(i, t);
}
function a0(e, t) {
  const n = Ft(e, t?.in), a = +Ki(n, t) - +FU(n, t);
  return Math.round(a / TI) + 1;
}
function En(e, t) {
  const n = e < 0 ? "-" : "", a = Math.abs(e).toString().padStart(t, "0");
  return n + a;
}
const As = {
  // Year
  y(e, t) {
    const n = e.getFullYear(), a = n > 0 ? n : 1 - n;
    return En(t === "yy" ? a % 100 : a, t.length);
  },
  // Month
  M(e, t) {
    const n = e.getMonth();
    return t === "M" ? String(n + 1) : En(n + 1, 2);
  },
  // Day of the month
  d(e, t) {
    return En(e.getDate(), t.length);
  },
  // AM or PM
  a(e, t) {
    const n = e.getHours() / 12 >= 1 ? "pm" : "am";
    switch (t) {
      case "a":
      case "aa":
        return n.toUpperCase();
      case "aaa":
        return n;
      case "aaaaa":
        return n[0];
      case "aaaa":
      default:
        return n === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(e, t) {
    return En(e.getHours() % 12 || 12, t.length);
  },
  // Hour [0-23]
  H(e, t) {
    return En(e.getHours(), t.length);
  },
  // Minute
  m(e, t) {
    return En(e.getMinutes(), t.length);
  },
  // Second
  s(e, t) {
    return En(e.getSeconds(), t.length);
  },
  // Fraction of second
  S(e, t) {
    const n = t.length, a = e.getMilliseconds(), r = Math.trunc(
      a * Math.pow(10, n - 3)
    );
    return En(r, t.length);
  }
}, Qc = {
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
}, VC = {
  // Era
  G: function(e, t, n) {
    const a = e.getFullYear() > 0 ? 1 : 0;
    switch (t) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return n.era(a, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return n.era(a, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return n.era(a, { width: "wide" });
    }
  },
  // Year
  y: function(e, t, n) {
    if (t === "yo") {
      const a = e.getFullYear(), r = a > 0 ? a : 1 - a;
      return n.ordinalNumber(r, { unit: "year" });
    }
    return As.y(e, t);
  },
  // Local week-numbering year
  Y: function(e, t, n, a) {
    const r = n0(e, a), i = r > 0 ? r : 1 - r;
    if (t === "YY") {
      const o = i % 100;
      return En(o, 2);
    }
    return t === "Yo" ? n.ordinalNumber(i, { unit: "year" }) : En(i, t.length);
  },
  // ISO week-numbering year
  R: function(e, t) {
    const n = PI(e);
    return En(n, t.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(e, t) {
    const n = e.getFullYear();
    return En(n, t.length);
  },
  // Quarter
  Q: function(e, t, n) {
    const a = Math.ceil((e.getMonth() + 1) / 3);
    switch (t) {
      // 1, 2, 3, 4
      case "Q":
        return String(a);
      // 01, 02, 03, 04
      case "QQ":
        return En(a, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return n.ordinalNumber(a, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return n.quarter(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return n.quarter(a, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return n.quarter(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(e, t, n) {
    const a = Math.ceil((e.getMonth() + 1) / 3);
    switch (t) {
      // 1, 2, 3, 4
      case "q":
        return String(a);
      // 01, 02, 03, 04
      case "qq":
        return En(a, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return n.ordinalNumber(a, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return n.quarter(a, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return n.quarter(a, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return n.quarter(a, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(e, t, n) {
    const a = e.getMonth();
    switch (t) {
      case "M":
      case "MM":
        return As.M(e, t);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return n.ordinalNumber(a + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return n.month(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return n.month(a, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return n.month(a, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(e, t, n) {
    const a = e.getMonth();
    switch (t) {
      // 1, 2, ..., 12
      case "L":
        return String(a + 1);
      // 01, 02, ..., 12
      case "LL":
        return En(a + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return n.ordinalNumber(a + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return n.month(a, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return n.month(a, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return n.month(a, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(e, t, n, a) {
    const r = a0(e, a);
    return t === "wo" ? n.ordinalNumber(r, { unit: "week" }) : En(r, t.length);
  },
  // ISO week of year
  I: function(e, t, n) {
    const a = t0(e);
    return t === "Io" ? n.ordinalNumber(a, { unit: "week" }) : En(a, t.length);
  },
  // Day of the month
  d: function(e, t, n) {
    return t === "do" ? n.ordinalNumber(e.getDate(), { unit: "date" }) : As.d(e, t);
  },
  // Day of year
  D: function(e, t, n) {
    const a = LU(e);
    return t === "Do" ? n.ordinalNumber(a, { unit: "dayOfYear" }) : En(a, t.length);
  },
  // Day of week
  E: function(e, t, n) {
    const a = e.getDay();
    switch (t) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return n.day(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return n.day(a, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return n.day(a, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return n.day(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(e, t, n, a) {
    const r = e.getDay(), i = (r - a.weekStartsOn + 8) % 7 || 7;
    switch (t) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(i);
      // Padded numerical value
      case "ee":
        return En(i, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return n.ordinalNumber(i, { unit: "day" });
      case "eee":
        return n.day(r, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return n.day(r, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return n.day(r, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return n.day(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(e, t, n, a) {
    const r = e.getDay(), i = (r - a.weekStartsOn + 8) % 7 || 7;
    switch (t) {
      // Numerical value (same as in `e`)
      case "c":
        return String(i);
      // Padded numerical value
      case "cc":
        return En(i, t.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return n.ordinalNumber(i, { unit: "day" });
      case "ccc":
        return n.day(r, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return n.day(r, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return n.day(r, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return n.day(r, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(e, t, n) {
    const a = e.getDay(), r = a === 0 ? 7 : a;
    switch (t) {
      // 2
      case "i":
        return String(r);
      // 02
      case "ii":
        return En(r, t.length);
      // 2nd
      case "io":
        return n.ordinalNumber(r, { unit: "day" });
      // Tue
      case "iii":
        return n.day(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return n.day(a, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return n.day(a, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return n.day(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(e, t, n) {
    const r = e.getHours() / 12 >= 1 ? "pm" : "am";
    switch (t) {
      case "a":
      case "aa":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(e, t, n) {
    const a = e.getHours();
    let r;
    switch (a === 12 ? r = Qc.noon : a === 0 ? r = Qc.midnight : r = a / 12 >= 1 ? "pm" : "am", t) {
      case "b":
      case "bb":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(e, t, n) {
    const a = e.getHours();
    let r;
    switch (a >= 17 ? r = Qc.evening : a >= 12 ? r = Qc.afternoon : a >= 4 ? r = Qc.morning : r = Qc.night, t) {
      case "B":
      case "BB":
      case "BBB":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(e, t, n) {
    if (t === "ho") {
      let a = e.getHours() % 12;
      return a === 0 && (a = 12), n.ordinalNumber(a, { unit: "hour" });
    }
    return As.h(e, t);
  },
  // Hour [0-23]
  H: function(e, t, n) {
    return t === "Ho" ? n.ordinalNumber(e.getHours(), { unit: "hour" }) : As.H(e, t);
  },
  // Hour [0-11]
  K: function(e, t, n) {
    const a = e.getHours() % 12;
    return t === "Ko" ? n.ordinalNumber(a, { unit: "hour" }) : En(a, t.length);
  },
  // Hour [1-24]
  k: function(e, t, n) {
    let a = e.getHours();
    return a === 0 && (a = 24), t === "ko" ? n.ordinalNumber(a, { unit: "hour" }) : En(a, t.length);
  },
  // Minute
  m: function(e, t, n) {
    return t === "mo" ? n.ordinalNumber(e.getMinutes(), { unit: "minute" }) : As.m(e, t);
  },
  // Second
  s: function(e, t, n) {
    return t === "so" ? n.ordinalNumber(e.getSeconds(), { unit: "second" }) : As.s(e, t);
  },
  // Fraction of second
  S: function(e, t) {
    return As.S(e, t);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(e, t, n) {
    const a = e.getTimezoneOffset();
    if (a === 0)
      return "Z";
    switch (t) {
      // Hours and optional minutes
      case "X":
        return RC(a);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return Dl(a);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return Dl(a, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Hours and optional minutes
      case "x":
        return RC(a);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return Dl(a);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return Dl(a, ":");
    }
  },
  // Timezone (GMT)
  O: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + MC(a, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + Dl(a, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + MC(a, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + Dl(a, ":");
    }
  },
  // Seconds timestamp
  t: function(e, t, n) {
    const a = Math.trunc(+e / 1e3);
    return En(a, t.length);
  },
  // Milliseconds timestamp
  T: function(e, t, n) {
    return En(+e, t.length);
  }
};
function MC(e, t = "") {
  const n = e > 0 ? "-" : "+", a = Math.abs(e), r = Math.trunc(a / 60), i = a % 60;
  return i === 0 ? n + String(r) : n + String(r) + t + En(i, 2);
}
function RC(e, t) {
  return e % 60 === 0 ? (e > 0 ? "-" : "+") + En(Math.abs(e) / 60, 2) : Dl(e, t);
}
function Dl(e, t = "") {
  const n = e > 0 ? "-" : "+", a = Math.abs(e), r = En(Math.trunc(a / 60), 2), i = En(a % 60, 2);
  return n + r + t + i;
}
const LC = (e, t) => {
  switch (e) {
    case "P":
      return t.date({ width: "short" });
    case "PP":
      return t.date({ width: "medium" });
    case "PPP":
      return t.date({ width: "long" });
    case "PPPP":
    default:
      return t.date({ width: "full" });
  }
}, FI = (e, t) => {
  switch (e) {
    case "p":
      return t.time({ width: "short" });
    case "pp":
      return t.time({ width: "medium" });
    case "ppp":
      return t.time({ width: "long" });
    case "pppp":
    default:
      return t.time({ width: "full" });
  }
}, NU = (e, t) => {
  const n = e.match(/(P+)(p+)?/) || [], a = n[1], r = n[2];
  if (!r)
    return LC(e, t);
  let i;
  switch (a) {
    case "P":
      i = t.dateTime({ width: "short" });
      break;
    case "PP":
      i = t.dateTime({ width: "medium" });
      break;
    case "PPP":
      i = t.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      i = t.dateTime({ width: "full" });
      break;
  }
  return i.replace("{{date}}", LC(a, t)).replace("{{time}}", FI(r, t));
}, mb = {
  p: FI,
  P: NU
}, UU = /^D+$/, $U = /^Y+$/, qU = ["D", "DD", "YY", "YYYY"];
function NI(e) {
  return UU.test(e);
}
function UI(e) {
  return $U.test(e);
}
function hb(e, t, n) {
  const a = HU(e, t, n);
  if (console.warn(a), qU.includes(e)) throw new RangeError(a);
}
function HU(e, t, n) {
  const a = e[0] === "Y" ? "years" : "days of the month";
  return `Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}
const zU = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, WU = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, jU = /^'([^]*?)'?$/, KU = /''/g, YU = /[a-zA-Z]/;
function go(e, t, n) {
  const a = fc(), r = n?.locale ?? a.locale ?? LI, i = n?.firstWeekContainsDate ?? n?.locale?.options?.firstWeekContainsDate ?? a.firstWeekContainsDate ?? a.locale?.options?.firstWeekContainsDate ?? 1, o = n?.weekStartsOn ?? n?.locale?.options?.weekStartsOn ?? a.weekStartsOn ?? a.locale?.options?.weekStartsOn ?? 0, l = Ft(e, n?.in);
  if (!af(l))
    throw new RangeError("Invalid time value");
  let s = t.match(WU).map((u) => {
    const f = u[0];
    if (f === "p" || f === "P") {
      const h = mb[f];
      return h(u, r.formatLong);
    }
    return u;
  }).join("").match(zU).map((u) => {
    if (u === "''")
      return { isToken: !1, value: "'" };
    const f = u[0];
    if (f === "'")
      return { isToken: !1, value: GU(u) };
    if (VC[f])
      return { isToken: !0, value: u };
    if (f.match(YU))
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + f + "`"
      );
    return { isToken: !1, value: u };
  });
  r.localize.preprocessor && (s = r.localize.preprocessor(l, s));
  const d = {
    firstWeekContainsDate: i,
    weekStartsOn: o,
    locale: r
  };
  return s.map((u) => {
    if (!u.isToken) return u.value;
    const f = u.value;
    (!n?.useAdditionalWeekYearTokens && UI(f) || !n?.useAdditionalDayOfYearTokens && NI(f)) && hb(f, t, String(e));
    const h = VC[f[0]];
    return h(l, f, r.localize, d);
  }).join("");
}
function GU(e) {
  const t = e.match(jU);
  return t ? t[1].replace(KU, "'") : e;
}
function QU(e, t) {
  return Ft(e, t?.in).getDay();
}
function JU(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = n.getMonth(), i = On(n, 0);
  return i.setFullYear(a, r + 1, 0), i.setHours(0, 0, 0, 0), i.getDate();
}
function XU() {
  return Object.assign({}, fc());
}
function ts(e, t) {
  return Ft(e, t?.in).getHours();
}
function ZU(e, t) {
  const n = Ft(e, t?.in).getDay();
  return n === 0 ? 7 : n;
}
function Ys(e, t) {
  return Ft(e, t?.in).getMinutes();
}
function fn(e, t) {
  return Ft(e, t?.in).getMonth();
}
function Pu(e) {
  return Ft(e).getSeconds();
}
function Kt(e, t) {
  return Ft(e, t?.in).getFullYear();
}
function nc(e, t) {
  return +Ft(e) > +Ft(t);
}
function Ou(e, t) {
  return +Ft(e) < +Ft(t);
}
function iu(e, t) {
  return +Ft(e) == +Ft(t);
}
function e$(e, t) {
  const n = t$(t) ? new t(0) : On(t, 0);
  return n.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), n.setHours(
    e.getHours(),
    e.getMinutes(),
    e.getSeconds(),
    e.getMilliseconds()
  ), n;
}
function t$(e) {
  return typeof e == "function" && e.prototype?.constructor === e;
}
const n$ = 10;
class $I {
  subPriority = 0;
  validate(t, n) {
    return !0;
  }
}
class a$ extends $I {
  constructor(t, n, a, r, i) {
    super(), this.value = t, this.validateValue = n, this.setValue = a, this.priority = r, i && (this.subPriority = i);
  }
  validate(t, n) {
    return this.validateValue(t, this.value, n);
  }
  set(t, n, a) {
    return this.setValue(t, n, this.value, a);
  }
}
class r$ extends $I {
  priority = n$;
  subPriority = -1;
  constructor(t, n) {
    super(), this.context = t || ((a) => On(n, a));
  }
  set(t, n) {
    return n.timestampIsSet ? t : On(t, e$(t, this.context));
  }
}
class wn {
  run(t, n, a, r) {
    const i = this.parse(t, n, a, r);
    return i ? {
      setter: new a$(
        i.value,
        this.validate,
        this.set,
        this.priority,
        this.subPriority
      ),
      rest: i.rest
    } : null;
  }
  validate(t, n, a) {
    return !0;
  }
}
class i$ extends wn {
  priority = 140;
  parse(t, n, a) {
    switch (n) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return a.era(t, { width: "abbreviated" }) || a.era(t, { width: "narrow" });
      // A, B
      case "GGGGG":
        return a.era(t, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return a.era(t, { width: "wide" }) || a.era(t, { width: "abbreviated" }) || a.era(t, { width: "narrow" });
    }
  }
  set(t, n, a) {
    return n.era = a, t.setFullYear(a, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["R", "u", "t", "T"];
}
const Ba = {
  month: /^(1[0-2]|0?\d)/,
  // 0 to 12
  date: /^(3[0-1]|[0-2]?\d)/,
  // 0 to 31
  dayOfYear: /^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,
  // 0 to 366
  week: /^(5[0-3]|[0-4]?\d)/,
  // 0 to 53
  hour23h: /^(2[0-3]|[0-1]?\d)/,
  // 0 to 23
  hour24h: /^(2[0-4]|[0-1]?\d)/,
  // 0 to 24
  hour11h: /^(1[0-1]|0?\d)/,
  // 0 to 11
  hour12h: /^(1[0-2]|0?\d)/,
  // 0 to 12
  minute: /^[0-5]?\d/,
  // 0 to 59
  second: /^[0-5]?\d/,
  // 0 to 59
  singleDigit: /^\d/,
  // 0 to 9
  twoDigits: /^\d{1,2}/,
  // 0 to 99
  threeDigits: /^\d{1,3}/,
  // 0 to 999
  fourDigits: /^\d{1,4}/,
  // 0 to 9999
  anyDigitsSigned: /^-?\d+/,
  singleDigitSigned: /^-?\d/,
  // 0 to 9, -0 to -9
  twoDigitsSigned: /^-?\d{1,2}/,
  // 0 to 99, -0 to -99
  threeDigitsSigned: /^-?\d{1,3}/,
  // 0 to 999, -0 to -999
  fourDigitsSigned: /^-?\d{1,4}/
  // 0 to 9999, -0 to -9999
}, fo = {
  basicOptionalMinutes: /^([+-])(\d{2})(\d{2})?|Z/,
  basic: /^([+-])(\d{2})(\d{2})|Z/,
  basicOptionalSeconds: /^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,
  extended: /^([+-])(\d{2}):(\d{2})|Z/,
  extendedOptionalSeconds: /^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/
};
function Va(e, t) {
  return e && {
    value: t(e.value),
    rest: e.rest
  };
}
function pa(e, t) {
  const n = t.match(e);
  return n ? {
    value: parseInt(n[0], 10),
    rest: t.slice(n[0].length)
  } : null;
}
function mo(e, t) {
  const n = t.match(e);
  if (!n)
    return null;
  if (n[0] === "Z")
    return {
      value: 0,
      rest: t.slice(1)
    };
  const a = n[1] === "+" ? 1 : -1, r = n[2] ? parseInt(n[2], 10) : 0, i = n[3] ? parseInt(n[3], 10) : 0, o = n[5] ? parseInt(n[5], 10) : 0;
  return {
    value: a * (r * II + i * Y5 + o * G5),
    rest: t.slice(n[0].length)
  };
}
function qI(e) {
  return pa(Ba.anyDigitsSigned, e);
}
function Aa(e, t) {
  switch (e) {
    case 1:
      return pa(Ba.singleDigit, t);
    case 2:
      return pa(Ba.twoDigits, t);
    case 3:
      return pa(Ba.threeDigits, t);
    case 4:
      return pa(Ba.fourDigits, t);
    default:
      return pa(new RegExp("^\\d{1," + e + "}"), t);
  }
}
function L_(e, t) {
  switch (e) {
    case 1:
      return pa(Ba.singleDigitSigned, t);
    case 2:
      return pa(Ba.twoDigitsSigned, t);
    case 3:
      return pa(Ba.threeDigitsSigned, t);
    case 4:
      return pa(Ba.fourDigitsSigned, t);
    default:
      return pa(new RegExp("^-?\\d{1," + e + "}"), t);
  }
}
function r0(e) {
  switch (e) {
    case "morning":
      return 4;
    case "evening":
      return 17;
    case "pm":
    case "noon":
    case "afternoon":
      return 12;
    case "am":
    case "midnight":
    case "night":
    default:
      return 0;
  }
}
function HI(e, t) {
  const n = t > 0, a = n ? t : 1 - t;
  let r;
  if (a <= 50)
    r = e || 100;
  else {
    const i = a + 50, o = Math.trunc(i / 100) * 100, l = e >= i % 100;
    r = e + o - (l ? 100 : 0);
  }
  return n ? r : 1 - r;
}
function zI(e) {
  return e % 400 === 0 || e % 4 === 0 && e % 100 !== 0;
}
class o$ extends wn {
  priority = 130;
  incompatibleTokens = ["Y", "R", "u", "w", "I", "i", "e", "c", "t", "T"];
  parse(t, n, a) {
    const r = (i) => ({
      year: i,
      isTwoDigitYear: n === "yy"
    });
    switch (n) {
      case "y":
        return Va(Aa(4, t), r);
      case "yo":
        return Va(
          a.ordinalNumber(t, {
            unit: "year"
          }),
          r
        );
      default:
        return Va(Aa(n.length, t), r);
    }
  }
  validate(t, n) {
    return n.isTwoDigitYear || n.year > 0;
  }
  set(t, n, a) {
    const r = t.getFullYear();
    if (a.isTwoDigitYear) {
      const o = HI(
        a.year,
        r
      );
      return t.setFullYear(o, 0, 1), t.setHours(0, 0, 0, 0), t;
    }
    const i = !("era" in n) || n.era === 1 ? a.year : 1 - a.year;
    return t.setFullYear(i, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
}
class s$ extends wn {
  priority = 130;
  parse(t, n, a) {
    const r = (i) => ({
      year: i,
      isTwoDigitYear: n === "YY"
    });
    switch (n) {
      case "Y":
        return Va(Aa(4, t), r);
      case "Yo":
        return Va(
          a.ordinalNumber(t, {
            unit: "year"
          }),
          r
        );
      default:
        return Va(Aa(n.length, t), r);
    }
  }
  validate(t, n) {
    return n.isTwoDigitYear || n.year > 0;
  }
  set(t, n, a, r) {
    const i = n0(t, r);
    if (a.isTwoDigitYear) {
      const l = HI(
        a.year,
        i
      );
      return t.setFullYear(
        l,
        0,
        r.firstWeekContainsDate
      ), t.setHours(0, 0, 0, 0), Ki(t, r);
    }
    const o = !("era" in n) || n.era === 1 ? a.year : 1 - a.year;
    return t.setFullYear(o, 0, r.firstWeekContainsDate), t.setHours(0, 0, 0, 0), Ki(t, r);
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "Q",
    "q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "i",
    "t",
    "T"
  ];
}
class l$ extends wn {
  priority = 130;
  parse(t, n) {
    return L_(n === "R" ? 4 : n.length, t);
  }
  set(t, n, a) {
    const r = On(t, 0);
    return r.setFullYear(a, 0, 4), r.setHours(0, 0, 0, 0), Eu(r);
  }
  incompatibleTokens = [
    "G",
    "y",
    "Y",
    "u",
    "Q",
    "q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "e",
    "c",
    "t",
    "T"
  ];
}
class c$ extends wn {
  priority = 130;
  parse(t, n) {
    return L_(n === "u" ? 4 : n.length, t);
  }
  set(t, n, a) {
    return t.setFullYear(a, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["G", "y", "Y", "R", "w", "I", "i", "e", "c", "t", "T"];
}
class u$ extends wn {
  priority = 120;
  parse(t, n, a) {
    switch (n) {
      // 1, 2, 3, 4
      case "Q":
      case "QQ":
        return Aa(n.length, t);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return a.ordinalNumber(t, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return a.quarter(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return a.quarter(t, {
          width: "wide",
          context: "formatting"
        }) || a.quarter(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 4;
  }
  set(t, n, a) {
    return t.setMonth((a - 1) * 3, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class d$ extends wn {
  priority = 120;
  parse(t, n, a) {
    switch (n) {
      // 1, 2, 3, 4
      case "q":
      case "qq":
        return Aa(n.length, t);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return a.ordinalNumber(t, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return a.quarter(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return a.quarter(t, {
          width: "wide",
          context: "standalone"
        }) || a.quarter(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 4;
  }
  set(t, n, a) {
    return t.setMonth((a - 1) * 3, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "Q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class f$ extends wn {
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "L",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
  priority = 110;
  parse(t, n, a) {
    const r = (i) => i - 1;
    switch (n) {
      // 1, 2, ..., 12
      case "M":
        return Va(
          pa(Ba.month, t),
          r
        );
      // 01, 02, ..., 12
      case "MM":
        return Va(Aa(2, t), r);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return Va(
          a.ordinalNumber(t, {
            unit: "month"
          }),
          r
        );
      // Jan, Feb, ..., Dec
      case "MMM":
        return a.month(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.month(t, { width: "narrow", context: "formatting" });
      // J, F, ..., D
      case "MMMMM":
        return a.month(t, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return a.month(t, { width: "wide", context: "formatting" }) || a.month(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.month(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.setMonth(a, 1), t.setHours(0, 0, 0, 0), t;
  }
}
class m$ extends wn {
  priority = 110;
  parse(t, n, a) {
    const r = (i) => i - 1;
    switch (n) {
      // 1, 2, ..., 12
      case "L":
        return Va(
          pa(Ba.month, t),
          r
        );
      // 01, 02, ..., 12
      case "LL":
        return Va(Aa(2, t), r);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return Va(
          a.ordinalNumber(t, {
            unit: "month"
          }),
          r
        );
      // Jan, Feb, ..., Dec
      case "LLL":
        return a.month(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.month(t, { width: "narrow", context: "standalone" });
      // J, F, ..., D
      case "LLLLL":
        return a.month(t, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return a.month(t, { width: "wide", context: "standalone" }) || a.month(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.month(t, { width: "narrow", context: "standalone" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.setMonth(a, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "M",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
function h$(e, t, n) {
  const a = Ft(e, n?.in), r = a0(a, n) - t;
  return a.setDate(a.getDate() - r * 7), Ft(a, n?.in);
}
class _$ extends wn {
  priority = 100;
  parse(t, n, a) {
    switch (n) {
      case "w":
        return pa(Ba.week, t);
      case "wo":
        return a.ordinalNumber(t, { unit: "week" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 53;
  }
  set(t, n, a, r) {
    return Ki(h$(t, a, r), r);
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "i",
    "t",
    "T"
  ];
}
function p$(e, t, n) {
  const a = Ft(e, n?.in), r = t0(a, n) - t;
  return a.setDate(a.getDate() - r * 7), a;
}
class v$ extends wn {
  priority = 100;
  parse(t, n, a) {
    switch (n) {
      case "I":
        return pa(Ba.week, t);
      case "Io":
        return a.ordinalNumber(t, { unit: "week" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 53;
  }
  set(t, n, a) {
    return Eu(p$(t, a));
  }
  incompatibleTokens = [
    "y",
    "Y",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "e",
    "c",
    "t",
    "T"
  ];
}
const g$ = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], y$ = [
  31,
  29,
  31,
  30,
  31,
  30,
  31,
  31,
  30,
  31,
  30,
  31
];
class b$ extends wn {
  priority = 90;
  subPriority = 1;
  parse(t, n, a) {
    switch (n) {
      case "d":
        return pa(Ba.date, t);
      case "do":
        return a.ordinalNumber(t, { unit: "date" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    const a = t.getFullYear(), r = zI(a), i = t.getMonth();
    return r ? n >= 1 && n <= y$[i] : n >= 1 && n <= g$[i];
  }
  set(t, n, a) {
    return t.setDate(a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class w$ extends wn {
  priority = 90;
  subpriority = 1;
  parse(t, n, a) {
    switch (n) {
      case "D":
      case "DD":
        return pa(Ba.dayOfYear, t);
      case "Do":
        return a.ordinalNumber(t, { unit: "date" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    const a = t.getFullYear();
    return zI(a) ? n >= 1 && n <= 366 : n >= 1 && n <= 365;
  }
  set(t, n, a) {
    return t.setMonth(0, a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "E",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
function i0(e, t, n) {
  const a = fc(), r = n?.weekStartsOn ?? n?.locale?.options?.weekStartsOn ?? a.weekStartsOn ?? a.locale?.options?.weekStartsOn ?? 0, i = Ft(e, n?.in), o = i.getDay(), s = (t % 7 + 7) % 7, d = 7 - r, u = t < 0 || t > 6 ? t - (o + d) % 7 : (s + d) % 7 - (o + d) % 7;
  return Ti(i, u, n);
}
class k$ extends wn {
  priority = 90;
  parse(t, n, a) {
    switch (n) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // T
      case "EEEEE":
        return a.day(t, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // Tuesday
      case "EEEE":
      default:
        return a.day(t, { width: "wide", context: "formatting" }) || a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = i0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["D", "i", "e", "c", "t", "T"];
}
class S$ extends wn {
  priority = 90;
  parse(t, n, a, r) {
    const i = (o) => {
      const l = Math.floor((o - 1) / 7) * 7;
      return (o + r.weekStartsOn + 6) % 7 + l;
    };
    switch (n) {
      // 3
      case "e":
      case "ee":
        return Va(Aa(n.length, t), i);
      // 3rd
      case "eo":
        return Va(
          a.ordinalNumber(t, {
            unit: "day"
          }),
          i
        );
      // Tue
      case "eee":
        return a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // T
      case "eeeee":
        return a.day(t, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // Tuesday
      case "eeee":
      default:
        return a.day(t, { width: "wide", context: "formatting" }) || a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = i0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "E",
    "i",
    "c",
    "t",
    "T"
  ];
}
class C$ extends wn {
  priority = 90;
  parse(t, n, a, r) {
    const i = (o) => {
      const l = Math.floor((o - 1) / 7) * 7;
      return (o + r.weekStartsOn + 6) % 7 + l;
    };
    switch (n) {
      // 3
      case "c":
      case "cc":
        return Va(Aa(n.length, t), i);
      // 3rd
      case "co":
        return Va(
          a.ordinalNumber(t, {
            unit: "day"
          }),
          i
        );
      // Tue
      case "ccc":
        return a.day(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
      // T
      case "ccccc":
        return a.day(t, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
      // Tuesday
      case "cccc":
      default:
        return a.day(t, { width: "wide", context: "standalone" }) || a.day(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = i0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "E",
    "i",
    "e",
    "t",
    "T"
  ];
}
function A$(e, t, n) {
  const a = Ft(e, n?.in), r = ZU(a, n), i = t - r;
  return Ti(a, i, n);
}
class x$ extends wn {
  priority = 90;
  parse(t, n, a) {
    const r = (i) => i === 0 ? 7 : i;
    switch (n) {
      // 2
      case "i":
      case "ii":
        return Aa(n.length, t);
      // 2nd
      case "io":
        return a.ordinalNumber(t, { unit: "day" });
      // Tue
      case "iii":
        return Va(
          a.day(t, {
            width: "abbreviated",
            context: "formatting"
          }) || a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // T
      case "iiiii":
        return Va(
          a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // Tu
      case "iiiiii":
        return Va(
          a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // Tuesday
      case "iiii":
      default:
        return Va(
          a.day(t, {
            width: "wide",
            context: "formatting"
          }) || a.day(t, {
            width: "abbreviated",
            context: "formatting"
          }) || a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 7;
  }
  set(t, n, a) {
    return t = A$(t, a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "Y",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "E",
    "e",
    "c",
    "t",
    "T"
  ];
}
class T$ extends wn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "a":
      case "aa":
      case "aaa":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaaa":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(r0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["b", "B", "H", "k", "t", "T"];
}
class I$ extends wn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "b":
      case "bb":
      case "bbb":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbbb":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(r0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "B", "H", "k", "t", "T"];
}
class E$ extends wn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "B":
      case "BB":
      case "BBB":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBBB":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(r0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "t", "T"];
}
class P$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "h":
        return pa(Ba.hour12h, t);
      case "ho":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 12;
  }
  set(t, n, a) {
    const r = t.getHours() >= 12;
    return r && a < 12 ? t.setHours(a + 12, 0, 0, 0) : !r && a === 12 ? t.setHours(0, 0, 0, 0) : t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["H", "K", "k", "t", "T"];
}
class O$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "H":
        return pa(Ba.hour23h, t);
      case "Ho":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 23;
  }
  set(t, n, a) {
    return t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "h", "K", "k", "t", "T"];
}
class D$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "K":
        return pa(Ba.hour11h, t);
      case "Ko":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.getHours() >= 12 && a < 12 ? t.setHours(a + 12, 0, 0, 0) : t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["h", "H", "k", "t", "T"];
}
class B$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "k":
        return pa(Ba.hour24h, t);
      case "ko":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 24;
  }
  set(t, n, a) {
    const r = a <= 24 ? a % 24 : a;
    return t.setHours(r, 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "h", "H", "K", "t", "T"];
}
class V$ extends wn {
  priority = 60;
  parse(t, n, a) {
    switch (n) {
      case "m":
        return pa(Ba.minute, t);
      case "mo":
        return a.ordinalNumber(t, { unit: "minute" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 59;
  }
  set(t, n, a) {
    return t.setMinutes(a, 0, 0), t;
  }
  incompatibleTokens = ["t", "T"];
}
class M$ extends wn {
  priority = 50;
  parse(t, n, a) {
    switch (n) {
      case "s":
        return pa(Ba.second, t);
      case "so":
        return a.ordinalNumber(t, { unit: "second" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 59;
  }
  set(t, n, a) {
    return t.setSeconds(a, 0), t;
  }
  incompatibleTokens = ["t", "T"];
}
class R$ extends wn {
  priority = 30;
  parse(t, n) {
    const a = (r) => Math.trunc(r * Math.pow(10, -n.length + 3));
    return Va(Aa(n.length, t), a);
  }
  set(t, n, a) {
    return t.setMilliseconds(a), t;
  }
  incompatibleTokens = ["t", "T"];
}
class L$ extends wn {
  priority = 10;
  parse(t, n) {
    switch (n) {
      case "X":
        return mo(
          fo.basicOptionalMinutes,
          t
        );
      case "XX":
        return mo(fo.basic, t);
      case "XXXX":
        return mo(
          fo.basicOptionalSeconds,
          t
        );
      case "XXXXX":
        return mo(
          fo.extendedOptionalSeconds,
          t
        );
      case "XXX":
      default:
        return mo(fo.extended, t);
    }
  }
  set(t, n, a) {
    return n.timestampIsSet ? t : On(
      t,
      t.getTime() - R_(t) - a
    );
  }
  incompatibleTokens = ["t", "T", "x"];
}
class F$ extends wn {
  priority = 10;
  parse(t, n) {
    switch (n) {
      case "x":
        return mo(
          fo.basicOptionalMinutes,
          t
        );
      case "xx":
        return mo(fo.basic, t);
      case "xxxx":
        return mo(
          fo.basicOptionalSeconds,
          t
        );
      case "xxxxx":
        return mo(
          fo.extendedOptionalSeconds,
          t
        );
      case "xxx":
      default:
        return mo(fo.extended, t);
    }
  }
  set(t, n, a) {
    return n.timestampIsSet ? t : On(
      t,
      t.getTime() - R_(t) - a
    );
  }
  incompatibleTokens = ["t", "T", "X"];
}
class N$ extends wn {
  priority = 40;
  parse(t) {
    return qI(t);
  }
  set(t, n, a) {
    return [On(t, a * 1e3), { timestampIsSet: !0 }];
  }
  incompatibleTokens = "*";
}
class U$ extends wn {
  priority = 20;
  parse(t) {
    return qI(t);
  }
  set(t, n, a) {
    return [On(t, a), { timestampIsSet: !0 }];
  }
  incompatibleTokens = "*";
}
const $$ = {
  G: new i$(),
  y: new o$(),
  Y: new s$(),
  R: new l$(),
  u: new c$(),
  Q: new u$(),
  q: new d$(),
  M: new f$(),
  L: new m$(),
  w: new _$(),
  I: new v$(),
  d: new b$(),
  D: new w$(),
  E: new k$(),
  e: new S$(),
  c: new C$(),
  i: new x$(),
  a: new T$(),
  b: new I$(),
  B: new E$(),
  h: new P$(),
  H: new O$(),
  K: new D$(),
  k: new B$(),
  m: new V$(),
  s: new M$(),
  S: new R$(),
  X: new L$(),
  x: new F$(),
  t: new N$(),
  T: new U$()
}, q$ = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, H$ = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, z$ = /^'([^]*?)'?$/, W$ = /''/g, j$ = /\S/, K$ = /[a-zA-Z]/;
function _b(e, t, n, a) {
  const r = () => On(a?.in || n, NaN), i = XU(), o = a?.locale ?? i.locale ?? LI, l = a?.firstWeekContainsDate ?? a?.locale?.options?.firstWeekContainsDate ?? i.firstWeekContainsDate ?? i.locale?.options?.firstWeekContainsDate ?? 1, s = a?.weekStartsOn ?? a?.locale?.options?.weekStartsOn ?? i.weekStartsOn ?? i.locale?.options?.weekStartsOn ?? 0;
  if (!t)
    return e ? r() : Ft(n, a?.in);
  const d = {
    firstWeekContainsDate: l,
    weekStartsOn: s,
    locale: o
  }, u = [new r$(a?.in, n)], f = t.match(H$).map((b) => {
    const p = b[0];
    if (p in mb) {
      const y = mb[p];
      return y(b, o.formatLong);
    }
    return b;
  }).join("").match(q$), h = [];
  for (let b of f) {
    !a?.useAdditionalWeekYearTokens && UI(b) && hb(b, t, e), !a?.useAdditionalDayOfYearTokens && NI(b) && hb(b, t, e);
    const p = b[0], y = $$[p];
    if (y) {
      const { incompatibleTokens: S } = y;
      if (Array.isArray(S)) {
        const C = h.find(
          (D) => S.includes(D.token) || D.token === p
        );
        if (C)
          throw new RangeError(
            `The format string mustn't contain \`${C.fullToken}\` and \`${b}\` at the same time`
          );
      } else if (y.incompatibleTokens === "*" && h.length > 0)
        throw new RangeError(
          `The format string mustn't contain \`${b}\` and any other token at the same time`
        );
      h.push({ token: p, fullToken: b });
      const E = y.run(
        e,
        b,
        o.match,
        d
      );
      if (!E)
        return r();
      u.push(E.setter), e = E.rest;
    } else {
      if (p.match(K$))
        throw new RangeError(
          "Format string contains an unescaped latin alphabet character `" + p + "`"
        );
      if (b === "''" ? b = "'" : p === "'" && (b = Y$(b)), e.indexOf(b) === 0)
        e = e.slice(b.length);
      else
        return r();
    }
  }
  if (e.length > 0 && j$.test(e))
    return r();
  const g = u.map((b) => b.priority).sort((b, p) => p - b).filter((b, p, y) => y.indexOf(b) === p).map(
    (b) => u.filter((p) => p.priority === b).sort((p, y) => y.subPriority - p.subPriority)
  ).map((b) => b[0]);
  let v = Ft(n, a?.in);
  if (isNaN(+v)) return r();
  const w = {};
  for (const b of g) {
    if (!b.validate(v, d))
      return r();
    const p = b.set(v, w, d);
    Array.isArray(p) ? (v = p[0], Object.assign(w, p[1])) : v = p;
  }
  return v;
}
function Y$(e) {
  return e.match(z$)[1].replace(W$, "'");
}
function FC(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  );
  return +Ul(a) == +Ul(r);
}
function WI(e, t, n) {
  return Ti(e, -t, n);
}
function jI(e, t, n) {
  const a = Ft(e, n?.in), r = a.getFullYear(), i = a.getDate(), o = On(e, 0);
  o.setFullYear(r, t, 15), o.setHours(0, 0, 0, 0);
  const l = JU(o);
  return a.setMonth(t, Math.min(i, l)), a;
}
function Bn(e, t, n) {
  let a = Ft(e, n?.in);
  return isNaN(+a) ? On(e, NaN) : (t.year != null && a.setFullYear(t.year), t.month != null && (a = jI(a, t.month)), t.date != null && a.setDate(t.date), t.hours != null && a.setHours(t.hours), t.minutes != null && a.setMinutes(t.minutes), t.seconds != null && a.setSeconds(t.seconds), t.milliseconds != null && a.setMilliseconds(t.milliseconds), a);
}
function G$(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setHours(t), a;
}
function KI(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setMilliseconds(t), a;
}
function Q$(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setMinutes(t), a;
}
function YI(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setSeconds(t), a;
}
function _o(e, t, n) {
  const a = Ft(e, n?.in);
  return isNaN(+a) ? On(e, NaN) : (a.setFullYear(t), a);
}
function Du(e, t, n) {
  return Hi(e, -t, n);
}
function J$(e, t, n) {
  const {
    years: a = 0,
    months: r = 0,
    weeks: i = 0,
    days: o = 0,
    hours: l = 0,
    minutes: s = 0,
    seconds: d = 0
  } = t, u = Du(e, r + a * 12, n), f = WI(u, o + i * 7, n), h = s + l * 60, v = (d + h * 60) * 1e3;
  return On(e, +f - v);
}
function GI(e, t, n) {
  return e0(e, -t, n);
}
function Gu() {
  const e = UF();
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img",
      ...e
    },
    [
      I("path", {
        d: "M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"
      }),
      I("path", {
        d: "M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      I("path", {
        d: "M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      I("path", {
        d: "M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"
      })
    ]
  );
}
Gu.compatConfig = {
  MODE: 3
};
function QI() {
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      I("path", {
        d: "M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"
      }),
      I("path", {
        d: "M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
QI.compatConfig = {
  MODE: 3
};
function o0() {
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      I("path", {
        d: "M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
o0.compatConfig = {
  MODE: 3
};
function s0() {
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      I("path", {
        d: "M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"
      })
    ]
  );
}
s0.compatConfig = {
  MODE: 3
};
function l0() {
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      I("path", {
        d: "M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"
      }),
      I("path", {
        d: "M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      })
    ]
  );
}
l0.compatConfig = {
  MODE: 3
};
function c0() {
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      I("path", {
        d: "M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
c0.compatConfig = {
  MODE: 3
};
function u0() {
  return ee(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      I("path", {
        d: "M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
u0.compatConfig = {
  MODE: 3
};
const Yr = (e, t) => t ? new Date(e.toLocaleString("en-US", { timeZone: t })) : new Date(e), d0 = (e, t, n) => pb(e, t, n) || ut(), X$ = (e, t, n) => {
  const a = t.dateInTz ? Yr(new Date(e), t.dateInTz) : ut(e);
  return n ? rr(a, !0) : a;
}, pb = (e, t, n) => {
  if (!e) return null;
  const a = n ? rr(ut(e), !0) : ut(e);
  return t ? t.exactMatch ? X$(e, t, n) : Yr(a, t.timezone) : a;
}, Z$ = (e) => {
  const t = new Date(e.getFullYear(), 0, 1).getTimezoneOffset();
  return e.getTimezoneOffset() < t;
}, eq = (e, t) => {
  if (!e) return 0;
  const n = /* @__PURE__ */ new Date(), a = new Date(n.toLocaleString("en-US", { timeZone: "UTC" })), r = new Date(n.toLocaleString("en-US", { timeZone: e })), i = (Z$(t ?? r) ? r : t ?? r).getTimezoneOffset() / 60;
  return (+a - +r) / (1e3 * 60 * 60) - i;
};
var Li = /* @__PURE__ */ ((e) => (e.month = "month", e.year = "year", e))(Li || {}), Fi = /* @__PURE__ */ ((e) => (e.top = "top", e.bottom = "bottom", e))(Fi || {}), Kl = /* @__PURE__ */ ((e) => (e.header = "header", e.calendar = "calendar", e.timePicker = "timePicker", e))(Kl || {}), br = /* @__PURE__ */ ((e) => (e.month = "month", e.year = "year", e.calendar = "calendar", e.time = "time", e.minutes = "minutes", e.hours = "hours", e.seconds = "seconds", e))(br || {});
const tq = ["timestamp", "date", "iso"];
var Br = /* @__PURE__ */ ((e) => (e.up = "up", e.down = "down", e.left = "left", e.right = "right", e))(Br || {}), Gn = /* @__PURE__ */ ((e) => (e.arrowUp = "ArrowUp", e.arrowDown = "ArrowDown", e.arrowLeft = "ArrowLeft", e.arrowRight = "ArrowRight", e.enter = "Enter", e.space = " ", e.esc = "Escape", e.tab = "Tab", e.home = "Home", e.end = "End", e.pageUp = "PageUp", e.pageDown = "PageDown", e))(Gn || {}), hu = /* @__PURE__ */ ((e) => (e.MONTH_AND_YEAR = "MM-yyyy", e.YEAR = "yyyy", e.DATE = "dd-MM-yyyy", e))(hu || {});
function NC(e) {
  return (t) => {
    const n = new Intl.DateTimeFormat(e, {
      weekday: "short",
      timeZone: "UTC"
    }).format(/* @__PURE__ */ new Date(`2017-01-0${t}T00:00:00+00:00`));
    return e === "ar" ? n.slice(2, 5) : n.slice(0, 2);
  };
}
function nq(e) {
  return (t) => go(Yr(/* @__PURE__ */ new Date(`2017-01-0${t}T00:00:00+00:00`), "UTC"), "EEEEEE", { locale: e });
}
const aq = (e, t, n) => {
  const a = [1, 2, 3, 4, 5, 6, 7];
  let r;
  if (e !== null)
    try {
      r = a.map(nq(e));
    } catch {
      r = a.map(NC(t));
    }
  else
    r = a.map(NC(t));
  const i = r.slice(0, n), o = r.slice(n + 1, r.length);
  return [r[n]].concat(...o).concat(...i);
}, f0 = (e, t, n) => {
  const a = [];
  for (let r = +e[0]; r <= +e[1]; r++)
    a.push({ value: +r, text: eE(r, t) });
  return n ? a.reverse() : a;
}, JI = (e, t, n) => {
  const a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((i) => {
    const o = i < 10 ? `0${i}` : i;
    return /* @__PURE__ */ new Date(`2017-${o}-01T00:00:00+00:00`);
  });
  if (e !== null)
    try {
      const i = n === "long" ? "LLLL" : "LLL";
      return a.map((o, l) => {
        const s = go(Yr(o, "UTC"), i, { locale: e });
        return {
          text: s.charAt(0).toUpperCase() + s.substring(1),
          value: l
        };
      });
    } catch {
    }
  const r = new Intl.DateTimeFormat(t, { month: n, timeZone: "UTC" });
  return a.map((i, o) => {
    const l = r.format(i);
    return {
      text: l.charAt(0).toUpperCase() + l.substring(1),
      value: o
    };
  });
}, rq = (e) => [12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11][e], $a = (e) => {
  const t = fe(e);
  return t != null && t.$el ? t?.$el : t;
}, iq = (e) => ({ type: "dot", ...e ?? {} }), XI = (e) => Array.isArray(e) ? !!e[0] && !!e[1] : !1, m0 = {
  prop: (e) => `"${e}" prop must be enabled!`,
  dateArr: (e) => `You need to use array as "model-value" binding in order to support "${e}"`
}, Za = (e) => e, UC = (e) => e === 0 ? e : !e || isNaN(+e) ? null : +e, $C = (e) => e === null, ZI = (e) => {
  if (e)
    return [...e.querySelectorAll("input, button, select, textarea, a[href]")][0];
}, oq = (e) => {
  const t = [], n = (a) => a.filter((r) => r);
  for (let a = 0; a < e.length; a += 3) {
    const r = [e[a], e[a + 1], e[a + 2]];
    t.push(n(r));
  }
  return t;
}, Cf = (e, t, n) => {
  const a = n != null, r = t != null;
  if (!a && !r) return !1;
  const i = +n, o = +t;
  return a && r ? +e > i || +e < o : a ? +e > i : r ? +e < o : !1;
}, Bu = (e, t) => oq(e).map((n) => n.map((a) => {
  const { active: r, disabled: i, isBetween: o, highlighted: l } = t(a);
  return {
    ...a,
    active: r,
    disabled: i,
    className: {
      dp__overlay_cell_active: r,
      dp__overlay_cell: !r,
      dp__overlay_cell_disabled: i,
      dp__overlay_cell_pad: !0,
      dp__overlay_cell_active_disabled: i && r,
      dp__cell_in_between: o,
      "dp--highlighted": l
    }
  };
})), Ns = (e, t, n = !1) => {
  e && t.allowStopPropagation && (n && e.stopImmediatePropagation(), e.stopPropagation());
}, sq = () => [
  "a[href]",
  "area[href]",
  "input:not([disabled]):not([type='hidden'])",
  "select:not([disabled])",
  "textarea:not([disabled])",
  "button:not([disabled])",
  "[tabindex]:not([tabindex='-1'])",
  "[data-datepicker-instance]"
].join(", ");
function lq(e, t) {
  let n = [...document.querySelectorAll(sq())];
  n = n.filter((r) => !e.contains(r) || r.hasAttribute("data-datepicker-instance"));
  const a = n.indexOf(e);
  if (a >= 0 && (t ? a - 1 >= 0 : a + 1 <= n.length))
    return n[a + (t ? -1 : 1)];
}
const vb = (e, t) => e?.querySelector(`[data-dp-element="${t}"]`), eE = (e, t) => new Intl.NumberFormat(t, { useGrouping: !1, style: "decimal" }).format(e), h0 = (e, t) => go(e, t ?? hu.DATE), Qg = (e) => Array.isArray(e), F_ = (e, t, n) => t.get(h0(e, n)), cq = (e, t) => e ? t ? t instanceof Map ? !!F_(e, t) : t(ut(e)) : !1 : !0, Lr = (e, t, n = !1, a) => {
  if (e.key === Gn.enter || e.key === Gn.space)
    return n && e.preventDefault(), t();
  if (a) return a(e);
}, uq = () => "ontouchstart" in window || navigator.maxTouchPoints > 0, tE = (e, t) => e ? hu.MONTH_AND_YEAR : t ? hu.YEAR : hu.DATE, nE = (e) => e < 10 ? `0${e}` : e, qC = (e, t, n, a, r, i) => {
  const o = _b(e, t.slice(0, e.length), /* @__PURE__ */ new Date(), { locale: i });
  return af(o) && DI(o) ? a || r ? o : Bn(o, {
    hours: +n.hours,
    minutes: +n?.minutes,
    seconds: +n?.seconds,
    milliseconds: 0
  }) : null;
}, dq = (e, t, n, a, r, i) => {
  const o = Array.isArray(n) ? n[0] : n;
  if (typeof t == "string")
    return qC(e, t, o, a, r, i);
  if (Array.isArray(t)) {
    let l = null;
    for (const s of t)
      if (l = qC(e, s, o, a, r, i), l)
        break;
    return l;
  }
  return typeof t == "function" ? t(e) : null;
}, ut = (e) => e ? new Date(e) : /* @__PURE__ */ new Date(), fq = (e, t, n) => {
  if (t) {
    const r = (e.getMonth() + 1).toString().padStart(2, "0"), i = e.getDate().toString().padStart(2, "0"), o = e.getHours().toString().padStart(2, "0"), l = e.getMinutes().toString().padStart(2, "0"), s = n ? e.getSeconds().toString().padStart(2, "0") : "00";
    return `${e.getFullYear()}-${r}-${i}T${o}:${l}:${s}.000Z`;
  }
  const a = Date.UTC(
    e.getUTCFullYear(),
    e.getUTCMonth(),
    e.getUTCDate(),
    e.getUTCHours(),
    e.getUTCMinutes(),
    e.getUTCSeconds()
  );
  return new Date(a).toISOString();
}, rr = (e, t) => {
  const n = ut(JSON.parse(JSON.stringify(e))), a = Bn(n, { hours: 0, minutes: 0, seconds: 0, milliseconds: 0 });
  return t ? rU(a) : a;
}, Us = (e, t, n, a) => {
  let r = e ? ut(e) : ut();
  return (t || t === 0) && (r = G$(r, +t)), (n || n === 0) && (r = Q$(r, +n)), (a || a === 0) && (r = YI(r, +a)), KI(r, 0);
}, Sa = (e, t) => !e || !t ? !1 : Ou(rr(e), rr(t)), mn = (e, t) => !e || !t ? !1 : iu(rr(e), rr(t)), Oa = (e, t) => !e || !t ? !1 : nc(rr(e), rr(t)), Af = (e, t, n) => e != null && e[0] && e != null && e[1] ? Oa(n, e[0]) && Sa(n, e[1]) : e != null && e[0] && t ? Oa(n, e[0]) && Sa(n, t) || Sa(n, e[0]) && Oa(n, t) : !1, Ui = (e) => {
  const t = Bn(new Date(e), { date: 1 });
  return rr(t);
}, Jg = (e, t, n) => t && (n || n === 0) ? Object.fromEntries(
  ["hours", "minutes", "seconds"].map((a) => a === t ? [a, n] : [a, isNaN(+e[a]) ? void 0 : +e[a]])
) : {
  hours: isNaN(+e.hours) ? void 0 : +e.hours,
  minutes: isNaN(+e.minutes) ? void 0 : +e.minutes,
  seconds: isNaN(+e.seconds) ? void 0 : +e.seconds
}, Yl = (e) => ({
  hours: ts(e),
  minutes: Ys(e),
  seconds: Pu(e)
}), aE = (e, t) => {
  if (t) {
    const n = Kt(ut(t));
    if (n > e) return 12;
    if (n === e) return fn(ut(t));
  }
}, rE = (e, t) => {
  if (t) {
    const n = Kt(ut(t));
    return n < e ? -1 : n === e ? fn(ut(t)) : void 0;
  }
}, Vu = (e) => {
  if (e) return Kt(ut(e));
}, iE = (e, t) => {
  const n = Oa(e, t) ? t : e, a = Oa(t, e) ? t : e;
  return VI({ start: n, end: a });
}, mq = (e) => {
  const t = Hi(e, 1);
  return { month: fn(t), year: Kt(t) };
}, Ho = (e, t) => {
  const n = Ki(e, { weekStartsOn: +t }), a = RI(e, { weekStartsOn: +t });
  return [n, a];
}, oE = (e, t) => {
  const n = {
    hours: ts(ut()),
    minutes: Ys(ut()),
    seconds: t ? Pu(ut()) : 0
  };
  return Object.assign(n, e);
}, Rs = (e, t, n) => [Bn(ut(e), { date: 1 }), Bn(ut(), { month: t, year: n, date: 1 })], Yo = (e, t, n) => {
  let a = e ? ut(e) : ut();
  return (t || t === 0) && (a = jI(a, t)), n && (a = _o(a, n)), a;
}, sE = (e, t, n, a, r) => {
  if (!a || r && !t || !r && !n) return !1;
  const i = r ? Hi(e, 1) : Du(e, 1), o = [fn(i), Kt(i)];
  return r ? !_q(...o, t) : !hq(...o, n);
}, hq = (e, t, n) => Sa(...Rs(n, e, t)) || mn(...Rs(n, e, t)), _q = (e, t, n) => Oa(...Rs(n, e, t)) || mn(...Rs(n, e, t)), lE = (e, t, n, a, r, i, o) => {
  if (typeof t == "function" && !o) return t(e);
  const l = n ? { locale: n } : void 0;
  return Array.isArray(e) ? `${go(e[0], i, l)}${r && !e[1] ? "" : a}${e[1] ? go(e[1], i, l) : ""}` : go(e, i, l);
}, Jc = (e) => {
  if (e) return null;
  throw new Error(m0.prop("partial-range"));
}, Dh = (e, t) => {
  if (t) return e();
  throw new Error(m0.prop("range"));
}, gb = (e) => Array.isArray(e) ? af(e[0]) && (e[1] ? af(e[1]) : !0) : e ? af(e) : !1, pq = (e, t) => Bn(t ?? ut(), {
  hours: +e.hours || 0,
  minutes: +e.minutes || 0,
  seconds: +e.seconds || 0
}), Xg = (e, t, n, a) => {
  if (!e) return !0;
  if (a) {
    const r = n === "max" ? Ou(e, t) : nc(e, t), i = { seconds: 0, milliseconds: 0 };
    return r || iu(Bn(e, i), Bn(t, i));
  }
  return n === "max" ? e.getTime() <= t.getTime() : e.getTime() >= t.getTime();
}, Zg = (e, t, n) => e ? pq(e, t) : ut(n ?? t), HC = (e, t, n, a, r) => {
  if (Array.isArray(a)) {
    const o = Zg(e, a[0], t), l = Zg(e, a[1], t);
    return Xg(a[0], o, n, !!t) && Xg(a[1], l, n, !!t) && r;
  }
  const i = Zg(e, a, t);
  return Xg(a, i, n, !!t) && r;
}, ey = (e) => Bn(ut(), Yl(e)), vq = (e, t, n) => {
  if (e instanceof Map) {
    const a = `${nE(n + 1)}-${t}`;
    return e.size ? e.has(a) : !1;
  }
  return typeof e == "function" ? e(rr(Bn(ut(), { month: n, year: t }), !0)) : !1;
}, gq = (e, t, n) => {
  if (e instanceof Map) {
    const a = `${nE(n + 1)}-${t}`;
    return e.size ? e.has(a) : !0;
  }
  return !0;
}, cE = (e, t, n) => typeof e == "function" ? e({ month: t, year: n }) : !!e.months.find((a) => a.month === t && a.year === n), _0 = (e, t) => typeof e == "function" ? e(t) : e.years.includes(t), yb = (e) => `dp-${go(e, "yyyy-MM-dd")}`, zC = (e, t) => {
  const n = WI(rr(t), e), a = Ti(rr(t), e);
  return { before: n, after: a };
}, Fd = oa({
  menuFocused: !1,
  shiftKeyInMenu: !1
}), uE = () => {
  const e = (n) => {
    Fd.menuFocused = n;
  }, t = (n) => {
    Fd.shiftKeyInMenu !== n && (Fd.shiftKeyInMenu = n);
  };
  return {
    control: W(() => ({ shiftKeyInMenu: Fd.shiftKeyInMenu, menuFocused: Fd.menuFocused })),
    setMenuFocused: e,
    setShiftKey: t
  };
}, Yn = oa({
  monthYear: [],
  calendar: [],
  time: [],
  actionRow: [],
  selectionGrid: [],
  timePicker: {
    0: [],
    1: []
  },
  monthPicker: []
}), ty = Se(null), Bh = Se(!1), ny = Se(!1), ay = Se(!1), ry = Se(!1), gr = Se(0), Pa = Se(0), al = () => {
  const e = W(() => Bh.value ? [...Yn.selectionGrid, Yn.actionRow].filter((f) => f.length) : ny.value ? [
    ...Yn.timePicker[0],
    ...Yn.timePicker[1],
    ry.value ? [] : [ty.value],
    Yn.actionRow
  ].filter((f) => f.length) : ay.value ? [...Yn.monthPicker, Yn.actionRow] : [Yn.monthYear, ...Yn.calendar, Yn.time, Yn.actionRow].filter((f) => f.length)), t = (f) => {
    gr.value = f ? gr.value + 1 : gr.value - 1;
    let h = null;
    e.value[Pa.value] && (h = e.value[Pa.value][gr.value]), !h && e.value[Pa.value + (f ? 1 : -1)] ? (Pa.value = Pa.value + (f ? 1 : -1), gr.value = f ? 0 : e.value[Pa.value].length - 1) : h || (gr.value = f ? gr.value - 1 : gr.value + 1);
  }, n = (f) => {
    Pa.value === 0 && !f || Pa.value === e.value.length && f || (Pa.value = f ? Pa.value + 1 : Pa.value - 1, e.value[Pa.value] ? e.value[Pa.value] && !e.value[Pa.value][gr.value] && gr.value !== 0 && (gr.value = e.value[Pa.value].length - 1) : Pa.value = f ? Pa.value - 1 : Pa.value + 1);
  }, a = (f) => {
    let h = null;
    e.value[Pa.value] && (h = e.value[Pa.value][gr.value]), h ? h.focus({ preventScroll: !Bh.value }) : gr.value = f ? gr.value - 1 : gr.value + 1;
  }, r = () => {
    t(!0), a(!0);
  }, i = () => {
    t(!1), a(!1);
  }, o = () => {
    n(!1), a(!0);
  }, l = () => {
    n(!0), a(!0);
  }, s = (f, h) => {
    Yn[h] = f;
  }, d = (f, h) => {
    Yn[h] = f;
  }, u = () => {
    gr.value = 0, Pa.value = 0;
  };
  return {
    buildMatrix: s,
    buildMultiLevelMatrix: d,
    setTimePickerBackRef: (f) => {
      ty.value = f;
    },
    setSelectionGrid: (f) => {
      Bh.value = f, u(), f || (Yn.selectionGrid = []);
    },
    setTimePicker: (f, h = !1) => {
      ny.value = f, ry.value = h, u(), f || (Yn.timePicker[0] = [], Yn.timePicker[1] = []);
    },
    setTimePickerElements: (f, h = 0) => {
      Yn.timePicker[h] = f;
    },
    arrowRight: r,
    arrowLeft: i,
    arrowUp: o,
    arrowDown: l,
    clearArrowNav: () => {
      Yn.monthYear = [], Yn.calendar = [], Yn.time = [], Yn.actionRow = [], Yn.selectionGrid = [], Yn.timePicker[0] = [], Yn.timePicker[1] = [], Bh.value = !1, ny.value = !1, ry.value = !1, ay.value = !1, u(), ty.value = null;
    },
    setMonthPicker: (f) => {
      ay.value = f, u();
    },
    refSets: Yn
    // exposed for testing
  };
}, WC = (e) => ({
  menuAppearTop: "dp-menu-appear-top",
  menuAppearBottom: "dp-menu-appear-bottom",
  open: "dp-slide-down",
  close: "dp-slide-up",
  next: "calendar-next",
  previous: "calendar-prev",
  vNext: "dp-slide-up",
  vPrevious: "dp-slide-down",
  ...e ?? {}
}), yq = (e) => ({
  toggleOverlay: "Toggle overlay",
  menu: "Datepicker menu",
  input: "Datepicker input",
  openTimePicker: "Open time picker",
  closeTimePicker: "Close time Picker",
  incrementValue: (t) => `Increment ${t}`,
  decrementValue: (t) => `Decrement ${t}`,
  openTpOverlay: (t) => `Open ${t} overlay`,
  amPmButton: "Switch AM/PM mode",
  openYearsOverlay: "Open years overlay",
  openMonthsOverlay: "Open months overlay",
  nextMonth: "Next month",
  prevMonth: "Previous month",
  nextYear: "Next year",
  prevYear: "Previous year",
  day: void 0,
  weekDay: void 0,
  clearInput: "Clear value",
  calendarIcon: "Calendar icon",
  timePicker: "Time picker",
  monthPicker: (t) => `Month picker${t ? " overlay" : ""}`,
  yearPicker: (t) => `Year picker${t ? " overlay" : ""}`,
  timeOverlay: (t) => `${t} overlay`,
  ...e ?? {}
}), jC = (e) => e ? typeof e == "boolean" ? e ? 2 : 0 : +e >= 2 ? +e : 2 : 0, bq = (e) => {
  const t = typeof e == "object" && e, n = {
    static: !0,
    solo: !1
  };
  if (!e) return { ...n, count: jC(!1) };
  const a = t ? e : {}, r = t ? a.count ?? !0 : e, i = jC(r);
  return Object.assign(n, a, { count: i });
}, wq = (e, t, n) => e || (typeof n == "string" ? n : t), kq = (e) => typeof e == "boolean" ? e ? WC({}) : !1 : WC(e), Sq = (e) => {
  const t = {
    enterSubmit: !0,
    tabSubmit: !0,
    openMenu: "open",
    selectOnFocus: !1,
    rangeSeparator: " - ",
    escClose: !0
  };
  return typeof e == "object" ? { ...t, ...e ?? {}, enabled: !0 } : { ...t, enabled: e };
}, Cq = (e) => ({
  months: [],
  years: [],
  times: { hours: [], minutes: [], seconds: [] },
  ...e ?? {}
}), Aq = (e) => ({
  showSelect: !0,
  showCancel: !0,
  showNow: !1,
  showPreview: !0,
  ...e ?? {}
}), xq = (e) => {
  const t = { input: !1 };
  return typeof e == "object" ? { ...t, ...e ?? {}, enabled: !0 } : {
    enabled: e,
    ...t
  };
}, Tq = (e) => ({ allowStopPropagation: !0, closeOnScroll: !1, modeHeight: 255, allowPreventDefault: !1, closeOnClearValue: !0, closeOnAutoApply: !0, noSwipe: !1, keepActionRow: !1, onClickOutside: void 0, tabOutClosesMenu: !0, arrowLeft: void 0, keepViewOnOffsetClick: !1, timeArrowHoldThreshold: 0, shadowDom: !1, mobileBreakpoint: 600, setDateOnMenuClose: !1, ...e ?? {} }), Iq = (e) => {
  const t = {
    dates: Array.isArray(e) ? e.map((n) => ut(n)) : [],
    years: [],
    months: [],
    quarters: [],
    weeks: [],
    weekdays: [],
    options: { highlightDisabled: !1 }
  };
  return typeof e == "function" ? e : { ...t, ...e ?? {} };
}, Eq = (e) => typeof e == "object" ? {
  type: e?.type ?? "local",
  hideOnOffsetDates: e?.hideOnOffsetDates ?? !1
} : {
  type: e,
  hideOnOffsetDates: !1
}, Pq = (e) => {
  const t = {
    noDisabledRange: !1,
    showLastInRange: !0,
    minMaxRawRange: !1,
    partialRange: !0,
    disableTimeRangeValidation: !1,
    maxRange: void 0,
    minRange: void 0,
    autoRange: void 0,
    fixedStart: !1,
    fixedEnd: !1
  };
  return typeof e == "object" ? { enabled: !0, ...t, ...e } : {
    enabled: e,
    ...t
  };
}, Oq = (e) => e ? typeof e == "string" ? {
  timezone: e,
  exactMatch: !1,
  dateInTz: void 0,
  emitTimezone: void 0,
  convertModel: !0
} : {
  timezone: e.timezone,
  exactMatch: e.exactMatch ?? !1,
  dateInTz: e.dateInTz ?? void 0,
  emitTimezone: e.emitTimezone ?? void 0,
  convertModel: e.convertModel ?? !0
} : { timezone: void 0, exactMatch: !1, emitTimezone: void 0 }, iy = (e, t, n, a) => new Map(
  e.map((r) => {
    const i = d0(r, t, a);
    return [h0(i, n), i];
  })
), Dq = (e, t) => e.length ? new Map(
  e.map((n) => {
    const a = d0(n.date, t);
    return [h0(a, hu.DATE), n];
  })
) : null, Bq = (e) => {
  var t;
  const n = tE(e.isMonthPicker, e.isYearPicker);
  return {
    minDate: pb(e.minDate, e.timezone, e.isSpecific),
    maxDate: pb(e.maxDate, e.timezone, e.isSpecific),
    disabledDates: Qg(e.disabledDates) ? iy(e.disabledDates, e.timezone, n, e.isSpecific) : e.disabledDates,
    allowedDates: Qg(e.allowedDates) ? iy(e.allowedDates, e.timezone, n, e.isSpecific) : null,
    highlight: typeof e.highlight == "object" && Qg((t = e.highlight) == null ? void 0 : t.dates) ? iy(e.highlight.dates, e.timezone, n) : e.highlight,
    markers: Dq(e.markers, e.timezone)
  };
}, Vq = (e) => typeof e == "boolean" ? { enabled: e, dragSelect: !0, limit: null } : {
  enabled: !!e,
  limit: e.limit ? +e.limit : null,
  dragSelect: e.dragSelect ?? !0
}, Mq = (e) => ({
  ...Object.fromEntries(
    Object.keys(e).map((t) => {
      const n = t, a = e[n], r = typeof e[n] == "string" ? { [a]: !0 } : Object.fromEntries(a.map((i) => [i, !0]));
      return [t, r];
    })
  )
}), da = (e) => {
  const t = () => {
    const D = e.enableSeconds ? ":ss" : "", P = e.enableMinutes ? ":mm" : "";
    return e.is24 ? `HH${P}${D}` : `hh${P}${D} aa`;
  }, n = () => {
    var D;
    return e.format ? e.format : e.monthPicker ? "MM/yyyy" : e.timePicker ? t() : e.weekPicker ? `${((D = b.value) == null ? void 0 : D.type) === "iso" ? "II" : "ww"}-RR` : e.yearPicker ? "yyyy" : e.quarterPicker ? "QQQ/yyyy" : e.enableTimePicker ? `MM/dd/yyyy, ${t()}` : "MM/dd/yyyy";
  }, a = (D) => oE(D, e.enableSeconds), r = () => E.value.enabled ? e.startTime && Array.isArray(e.startTime) ? [a(e.startTime[0]), a(e.startTime[1])] : null : e.startTime && !Array.isArray(e.startTime) ? a(e.startTime) : null, i = W(() => bq(e.multiCalendars)), o = W(() => r()), l = W(() => yq(e.ariaLabels)), s = W(() => Cq(e.filters)), d = W(() => kq(e.transitions)), u = W(() => Aq(e.actionRow)), f = W(
    () => wq(e.previewFormat, e.format, n())
  ), h = W(() => Sq(e.textInput)), g = W(() => xq(e.inline)), v = W(() => Tq(e.config)), w = W(() => Iq(e.highlight)), b = W(() => Eq(e.weekNumbers)), p = W(() => Oq(e.timezone)), y = W(() => Vq(e.multiDates)), S = W(
    () => Bq({
      minDate: e.minDate,
      maxDate: e.maxDate,
      disabledDates: e.disabledDates,
      allowedDates: e.allowedDates,
      highlight: w.value,
      markers: e.markers,
      timezone: p.value,
      isSpecific: e.monthPicker || e.yearPicker || e.quarterPicker,
      isMonthPicker: e.monthPicker,
      isYearPicker: e.yearPicker
    })
  ), E = W(() => Pq(e.range)), C = W(() => Mq(e.ui));
  return {
    defaultedTransitions: d,
    defaultedMultiCalendars: i,
    defaultedStartTime: o,
    defaultedAriaLabels: l,
    defaultedFilters: s,
    defaultedActionRow: u,
    defaultedPreviewFormat: f,
    defaultedTextInput: h,
    defaultedInline: g,
    defaultedConfig: v,
    defaultedHighlight: w,
    defaultedWeekNumbers: b,
    defaultedRange: E,
    propDates: S,
    defaultedTz: p,
    defaultedMultiDates: y,
    defaultedUI: C,
    getDefaultPattern: n,
    getDefaultStartTime: r,
    handleEventPropagation: (D) => {
      v.value.allowStopPropagation && D.stopPropagation(), v.value.allowPreventDefault && D.preventDefault();
    }
  };
}, Rq = (e, t, n) => {
  const a = Se(), { defaultedTextInput: r, defaultedRange: i, defaultedTz: o, defaultedMultiDates: l, getDefaultPattern: s } = da(t), d = Se(""), u = we(t, "format"), f = we(t, "formatLocale");
  nt(
    a,
    () => {
      typeof t.onInternalModelChange == "function" && e("internal-model-change", a.value, pe(!0));
    },
    { deep: !0 }
  ), nt(i, (z, ke) => {
    z.enabled !== ke.enabled && (a.value = null);
  }), nt(u, () => {
    de();
  });
  const h = (z) => o.value.timezone && o.value.convertModel ? Yr(z, o.value.timezone) : z, g = (z) => {
    if (o.value.timezone && o.value.convertModel) {
      const ke = eq(o.value.timezone, z);
      return J5(z, ke);
    }
    return z;
  }, v = (z, ke, Me = !1) => lE(
    z,
    t.format,
    t.formatLocale,
    r.value.rangeSeparator,
    t.modelAuto,
    ke ?? s(),
    Me
  ), w = (z) => z ? t.modelType ? F(z) : {
    hours: ts(z),
    minutes: Ys(z),
    seconds: t.enableSeconds ? Pu(z) : 0
  } : null, b = (z) => t.modelType ? F(z) : { month: fn(z), year: Kt(z) }, p = (z) => Array.isArray(z) ? l.value.enabled ? z.map((ke) => y(ke, _o(ut(), ke))) : Dh(
    () => [
      _o(ut(), z[0]),
      z[1] ? _o(ut(), z[1]) : Jc(i.value.partialRange)
    ],
    i.value.enabled
  ) : _o(ut(), +z), y = (z, ke) => (typeof z == "string" || typeof z == "number") && t.modelType ? Z(z) : ke, S = (z) => Array.isArray(z) ? [
    y(
      z[0],
      Us(null, +z[0].hours, +z[0].minutes, z[0].seconds)
    ),
    y(
      z[1],
      Us(null, +z[1].hours, +z[1].minutes, z[1].seconds)
    )
  ] : y(z, Us(null, z.hours, z.minutes, z.seconds)), E = (z) => {
    const ke = Bn(ut(), { date: 1 });
    return Array.isArray(z) ? l.value.enabled ? z.map((Me) => y(Me, Yo(ke, +Me.month, +Me.year))) : Dh(
      () => [
        y(z[0], Yo(ke, +z[0].month, +z[0].year)),
        y(
          z[1],
          z[1] ? Yo(ke, +z[1].month, +z[1].year) : Jc(i.value.partialRange)
        )
      ],
      i.value.enabled
    ) : y(z, Yo(ke, +z.month, +z.year));
  }, C = (z) => {
    if (Array.isArray(z))
      return z.map((ke) => Z(ke));
    throw new Error(m0.dateArr("multi-dates"));
  }, D = (z) => {
    if (Array.isArray(z) && i.value.enabled) {
      const ke = z[0], Me = z[1];
      return [
        ut(Array.isArray(ke) ? ke[0] : null),
        Array.isArray(Me) && Me.length ? ut(Me[0]) : null
      ];
    }
    return ut(z[0]);
  }, P = (z) => t.modelAuto ? Array.isArray(z) ? [Z(z[0]), Z(z[1])] : t.autoApply ? [Z(z)] : [Z(z), null] : Array.isArray(z) ? Dh(
    () => z[1] ? [
      Z(z[0]),
      z[1] ? Z(z[1]) : Jc(i.value.partialRange)
    ] : [Z(z[0])],
    i.value.enabled
  ) : Z(z), O = () => {
    Array.isArray(a.value) && i.value.enabled && a.value.length === 1 && a.value.push(Jc(i.value.partialRange));
  }, T = () => {
    const z = a.value;
    return [
      F(z[0]),
      z[1] ? F(z[1]) : Jc(i.value.partialRange)
    ];
  }, A = () => Array.isArray(a.value) ? a.value[1] ? T() : F(Za(a.value[0])) : [], V = () => (a.value || []).map((z) => F(z)), M = (z = !1) => (z || O(), t.modelAuto ? A() : l.value.enabled ? V() : Array.isArray(a.value) ? Dh(() => T(), i.value.enabled) : F(Za(a.value))), B = (z) => !z || Array.isArray(z) && !z.length ? null : t.timePicker ? S(Za(z)) : t.monthPicker ? E(Za(z)) : t.yearPicker ? p(Za(z)) : l.value.enabled ? C(Za(z)) : t.weekPicker ? D(Za(z)) : P(Za(z)), N = (z) => {
    const ke = B(z);
    gb(Za(ke)) ? (a.value = Za(ke), de()) : (a.value = null, d.value = "");
  }, H = () => {
    const z = (ke) => go(ke, r.value.format);
    return `${z(a.value[0])} ${r.value.rangeSeparator} ${a.value[1] ? z(a.value[1]) : ""}`;
  }, j = () => n.value && a.value ? Array.isArray(a.value) ? H() : go(a.value, r.value.format) : v(a.value), te = () => a.value ? l.value.enabled ? a.value.map((z) => v(z)).join("; ") : r.value.enabled && typeof r.value.format == "string" ? j() : v(a.value) : "", de = () => {
    !t.format || typeof t.format == "string" || r.value.enabled && typeof r.value.format == "string" ? d.value = te() : d.value = t.format(a.value);
  }, Z = (z) => {
    if (t.utc) {
      const ke = new Date(z);
      return t.utc === "preserve" ? new Date(ke.getTime() + ke.getTimezoneOffset() * 6e4) : ke;
    }
    return t.modelType ? tq.includes(t.modelType) ? h(new Date(z)) : t.modelType === "format" && (typeof t.format == "string" || !t.format) ? h(
      _b(z, s(), /* @__PURE__ */ new Date(), { locale: f.value })
    ) : h(
      _b(z, t.modelType, /* @__PURE__ */ new Date(), { locale: f.value })
    ) : h(new Date(z));
  }, F = (z) => z ? t.utc ? fq(z, t.utc === "preserve", t.enableSeconds) : t.modelType ? t.modelType === "timestamp" ? +g(z) : t.modelType === "iso" ? g(z).toISOString() : t.modelType === "format" && (typeof t.format == "string" || !t.format) ? v(g(z)) : v(g(z), t.modelType, !0) : g(z) : "", K = (z, ke = !1, Me = !1) => {
    if (Me) return z;
    if (e("update:model-value", z), o.value.emitTimezone && ke) {
      const Le = Array.isArray(z) ? z.map((ce) => Yr(Za(ce), o.value.emitTimezone)) : Yr(Za(z), o.value.emitTimezone);
      e("update:model-timezone-value", Le);
    }
  }, se = (z) => Array.isArray(a.value) ? l.value.enabled ? a.value.map((ke) => z(ke)) : [
    z(a.value[0]),
    a.value[1] ? z(a.value[1]) : Jc(i.value.partialRange)
  ] : z(Za(a.value)), X = () => {
    if (Array.isArray(a.value)) {
      const z = Ho(a.value[0], t.weekStart), ke = a.value[1] ? Ho(a.value[1], t.weekStart) : [];
      return [z.map((Me) => ut(Me)), ke.map((Me) => ut(Me))];
    }
    return Ho(a.value, t.weekStart).map((z) => ut(z));
  }, he = (z, ke) => K(Za(se(z)), !1, ke), ve = (z) => {
    const ke = X();
    return z ? ke : e("update:model-value", X());
  }, pe = (z = !1) => (z || de(), t.monthPicker ? he(b, z) : t.timePicker ? he(w, z) : t.yearPicker ? he(Kt, z) : t.weekPicker ? ve(z) : K(M(z), !0, z));
  return {
    inputValue: d,
    internalModelValue: a,
    checkBeforeEmit: () => a.value ? i.value.enabled ? i.value.partialRange ? a.value.length >= 1 : a.value.length === 2 : !!a.value : !1,
    parseExternalModelValue: N,
    formatInputValue: de,
    emitModelValue: pe
  };
}, Lq = (e, t) => {
  const { defaultedFilters: n, propDates: a } = da(e), { validateMonthYearInRange: r } = rl(e), i = (u, f) => {
    let h = u;
    return n.value.months.includes(fn(h)) ? (h = f ? Hi(u, 1) : Du(u, 1), i(h, f)) : h;
  }, o = (u, f) => {
    let h = u;
    return n.value.years.includes(Kt(h)) ? (h = f ? e0(u, 1) : GI(u, 1), o(h, f)) : h;
  }, l = (u, f = !1) => {
    const h = Bn(ut(), { month: e.month, year: e.year });
    let g = u ? Hi(h, 1) : Du(h, 1);
    e.disableYearSelect && (g = _o(g, e.year));
    let v = fn(g), w = Kt(g);
    n.value.months.includes(v) && (g = i(g, u), v = fn(g), w = Kt(g)), n.value.years.includes(w) && (g = o(g, u), w = Kt(g)), r(v, w, u, e.preventMinMaxNavigation) && s(v, w, f);
  }, s = (u, f, h) => {
    t("update-month-year", { month: u, year: f, fromNav: h });
  }, d = W(() => (u) => sE(
    Bn(ut(), { month: e.month, year: e.year }),
    a.value.maxDate,
    a.value.minDate,
    e.preventMinMaxNavigation,
    u
  ));
  return { handleMonthYearChange: l, isDisabled: d, updateMonthYear: s };
}, hp = {
  multiCalendars: { type: [Boolean, Number, String, Object], default: void 0 },
  modelValue: { type: [String, Date, Array, Object, Number], default: null },
  modelType: { type: String, default: null },
  position: { type: String, default: "center" },
  dark: { type: Boolean, default: !1 },
  format: {
    type: [String, Function],
    default: () => null
  },
  autoPosition: { type: [Boolean, String], default: !0 },
  altPosition: { type: Function, default: null },
  transitions: { type: [Boolean, Object], default: !0 },
  formatLocale: { type: Object, default: null },
  utc: { type: [Boolean, String], default: !1 },
  ariaLabels: { type: Object, default: () => ({}) },
  offset: { type: [Number, String], default: 10 },
  hideNavigation: { type: Array, default: () => [] },
  timezone: { type: [String, Object], default: null },
  vertical: { type: Boolean, default: !1 },
  disableMonthYearSelect: { type: Boolean, default: !1 },
  disableYearSelect: { type: Boolean, default: !1 },
  dayClass: {
    type: Function,
    default: null
  },
  yearRange: { type: Array, default: () => [1900, 2100] },
  enableTimePicker: { type: Boolean, default: !0 },
  autoApply: { type: Boolean, default: !1 },
  disabledDates: { type: [Array, Function], default: () => [] },
  monthNameFormat: { type: String, default: "short" },
  startDate: { type: [Date, String], default: null },
  startTime: { type: [Object, Array], default: null },
  hideOffsetDates: { type: Boolean, default: !1 },
  noToday: { type: Boolean, default: !1 },
  disabledWeekDays: { type: Array, default: () => [] },
  allowedDates: { type: Array, default: null },
  nowButtonLabel: { type: String, default: "Now" },
  markers: { type: Array, default: () => [] },
  escClose: { type: Boolean, default: !0 },
  spaceConfirm: { type: Boolean, default: !0 },
  monthChangeOnArrows: { type: Boolean, default: !0 },
  presetDates: { type: Array, default: () => [] },
  flow: { type: Array, default: () => [] },
  partialFlow: { type: Boolean, default: !1 },
  preventMinMaxNavigation: { type: Boolean, default: !1 },
  reverseYears: { type: Boolean, default: !1 },
  weekPicker: { type: Boolean, default: !1 },
  filters: { type: Object, default: () => ({}) },
  arrowNavigation: { type: Boolean, default: !1 },
  highlight: {
    type: [Function, Object],
    default: null
  },
  teleport: { type: [Boolean, String, Object], default: null },
  teleportCenter: { type: Boolean, default: !1 },
  locale: { type: String, default: "en-Us" },
  weekNumName: { type: String, default: "W" },
  weekStart: { type: [Number, String], default: 1 },
  weekNumbers: {
    type: [String, Function, Object],
    default: null
  },
  monthChangeOnScroll: { type: [Boolean, String], default: !0 },
  dayNames: {
    type: [Function, Array],
    default: null
  },
  monthPicker: { type: Boolean, default: !1 },
  customProps: { type: Object, default: null },
  yearPicker: { type: Boolean, default: !1 },
  modelAuto: { type: Boolean, default: !1 },
  selectText: { type: String, default: "Select" },
  cancelText: { type: String, default: "Cancel" },
  previewFormat: {
    type: [String, Function],
    default: () => ""
  },
  multiDates: { type: [Object, Boolean], default: !1 },
  ignoreTimeValidation: { type: Boolean, default: !1 },
  minDate: { type: [Date, String], default: null },
  maxDate: { type: [Date, String], default: null },
  minTime: { type: Object, default: null },
  maxTime: { type: Object, default: null },
  name: { type: String, default: null },
  placeholder: { type: String, default: "" },
  hideInputIcon: { type: Boolean, default: !1 },
  clearable: { type: Boolean, default: !0 },
  alwaysClearable: { type: Boolean, default: !1 },
  state: { type: Boolean, default: null },
  required: { type: Boolean, default: !1 },
  autocomplete: { type: String, default: "off" },
  timePicker: { type: Boolean, default: !1 },
  enableSeconds: { type: Boolean, default: !1 },
  is24: { type: Boolean, default: !0 },
  noHoursOverlay: { type: Boolean, default: !1 },
  noMinutesOverlay: { type: Boolean, default: !1 },
  noSecondsOverlay: { type: Boolean, default: !1 },
  hoursGridIncrement: { type: [String, Number], default: 1 },
  minutesGridIncrement: { type: [String, Number], default: 5 },
  secondsGridIncrement: { type: [String, Number], default: 5 },
  hoursIncrement: { type: [Number, String], default: 1 },
  minutesIncrement: { type: [Number, String], default: 1 },
  secondsIncrement: { type: [Number, String], default: 1 },
  range: { type: [Boolean, Object], default: !1 },
  uid: { type: String, default: null },
  disabled: { type: Boolean, default: !1 },
  readonly: { type: Boolean, default: !1 },
  inline: { type: [Boolean, Object], default: !1 },
  textInput: { type: [Boolean, Object], default: !1 },
  sixWeeks: { type: [Boolean, String], default: !1 },
  actionRow: { type: Object, default: () => ({}) },
  focusStartDate: { type: Boolean, default: !1 },
  disabledTimes: { type: [Function, Array], default: void 0 },
  timePickerInline: { type: Boolean, default: !1 },
  calendar: { type: Function, default: null },
  config: { type: Object, default: void 0 },
  quarterPicker: { type: Boolean, default: !1 },
  yearFirst: { type: Boolean, default: !1 },
  loading: { type: Boolean, default: !1 },
  onInternalModelChange: { type: [Function, Object], default: null },
  enableMinutes: { type: Boolean, default: !0 },
  ui: { type: Object, default: () => ({}) }
}, Yi = {
  ...hp,
  shadow: { type: Boolean, default: !1 },
  flowStep: { type: Number, default: 0 },
  internalModelValue: { type: [Date, Array], default: null },
  noOverlayFocus: { type: Boolean, default: !1 },
  collapse: { type: Boolean, default: !1 },
  menuWrapRef: { type: Object, default: null },
  getInputRect: { type: Function, default: () => ({}) },
  isTextInputDate: { type: Boolean, default: !1 },
  isMobile: { type: Boolean, default: void 0 }
}, Fq = ["title"], Nq = ["disabled"], Uq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "ActionRow",
  props: {
    menuMount: { type: Boolean, default: !1 },
    calendarWidth: { type: Number, default: 0 },
    ...Yi
  },
  emits: ["close-picker", "select-date", "select-now", "invalid-select"],
  setup(e, { emit: t }) {
    const n = t, a = e, {
      defaultedActionRow: r,
      defaultedPreviewFormat: i,
      defaultedMultiCalendars: o,
      defaultedTextInput: l,
      defaultedInline: s,
      defaultedRange: d,
      defaultedMultiDates: u
    } = da(a), { isTimeValid: f, isMonthValid: h } = rl(a), { buildMatrix: g } = al(), v = Se(null), w = Se(null), b = Se(!1), p = Se({}), y = Se(null), S = Se(null);
    on(() => {
      a.arrowNavigation && g([$a(v), $a(w)], "actionRow"), E(), window.addEventListener("resize", E);
    }), di(() => {
      window.removeEventListener("resize", E);
    });
    const E = () => {
      b.value = !1, setTimeout(() => {
        var N, H;
        const j = (N = y.value) == null ? void 0 : N.getBoundingClientRect(), te = (H = S.value) == null ? void 0 : H.getBoundingClientRect();
        j && te && (p.value.maxWidth = `${te.width - j.width - 20}px`), b.value = !0;
      }, 0);
    }, C = W(() => d.value.enabled && !d.value.partialRange && a.internalModelValue ? a.internalModelValue.length === 2 : !0), D = W(
      () => !f.value(a.internalModelValue) || !h.value(a.internalModelValue) || !C.value
    ), P = () => {
      const N = i.value;
      return a.timePicker || a.monthPicker, N(Za(a.internalModelValue));
    }, O = () => {
      const N = a.internalModelValue;
      return o.value.count > 0 ? `${T(N[0])} - ${T(N[1])}` : [T(N[0]), T(N[1])];
    }, T = (N) => lE(
      N,
      i.value,
      a.formatLocale,
      l.value.rangeSeparator,
      a.modelAuto,
      i.value
    ), A = W(() => !a.internalModelValue || !a.menuMount ? "" : typeof i.value == "string" ? Array.isArray(a.internalModelValue) ? a.internalModelValue.length === 2 && a.internalModelValue[1] ? O() : u.value.enabled ? a.internalModelValue.map((N) => `${T(N)}`) : a.modelAuto ? `${T(a.internalModelValue[0])}` : `${T(a.internalModelValue[0])} -` : T(a.internalModelValue) : P()), V = () => u.value.enabled ? "; " : " - ", M = W(
      () => Array.isArray(A.value) ? A.value.join(V()) : A.value
    ), B = () => {
      f.value(a.internalModelValue) && h.value(a.internalModelValue) && C.value ? n("select-date") : n("invalid-select");
    };
    return (N, H) => (ee(), Oe("div", {
      ref_key: "actionRowRef",
      ref: S,
      class: "dp__action_row"
    }, [
      N.$slots["action-row"] ? bt(N.$slots, "action-row", Jn(He({ key: 0 }, {
        internalModelValue: N.internalModelValue,
        disabled: D.value,
        selectDate: () => N.$emit("select-date"),
        closePicker: () => N.$emit("close-picker")
      }))) : (ee(), Oe(Qe, { key: 1 }, [
        fe(r).showPreview ? (ee(), Oe("div", {
          key: 0,
          class: "dp__selection_preview",
          title: M.value,
          style: Xe(p.value)
        }, [
          N.$slots["action-preview"] && b.value ? bt(N.$slots, "action-preview", {
            key: 0,
            value: N.internalModelValue
          }) : ye("", !0),
          !N.$slots["action-preview"] && b.value ? (ee(), Oe(Qe, { key: 1 }, [
            ae(q(M.value), 1)
          ], 64)) : ye("", !0)
        ], 12, Fq)) : ye("", !0),
        I("div", {
          ref_key: "actionBtnContainer",
          ref: y,
          class: "dp__action_buttons",
          "data-dp-element": "action-row"
        }, [
          N.$slots["action-buttons"] ? bt(N.$slots, "action-buttons", {
            key: 0,
            value: N.internalModelValue
          }) : ye("", !0),
          N.$slots["action-buttons"] ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
            !fe(s).enabled && fe(r).showCancel ? (ee(), Oe("button", {
              key: 0,
              ref_key: "cancelButtonRef",
              ref: v,
              type: "button",
              class: "dp__action_button dp__action_cancel",
              onClick: H[0] || (H[0] = (j) => N.$emit("close-picker")),
              onKeydown: H[1] || (H[1] = (j) => fe(Lr)(j, () => N.$emit("close-picker")))
            }, q(N.cancelText), 545)) : ye("", !0),
            fe(r).showNow ? (ee(), Oe("button", {
              key: 1,
              type: "button",
              class: "dp__action_button dp__action_cancel",
              onClick: H[2] || (H[2] = (j) => N.$emit("select-now")),
              onKeydown: H[3] || (H[3] = (j) => fe(Lr)(j, () => N.$emit("select-now")))
            }, q(N.nowButtonLabel), 33)) : ye("", !0),
            fe(r).showSelect ? (ee(), Oe("button", {
              key: 2,
              ref_key: "selectButtonRef",
              ref: w,
              type: "button",
              class: "dp__action_button dp__action_select",
              disabled: D.value,
              "data-test-id": "select-button",
              onKeydown: H[4] || (H[4] = (j) => fe(Lr)(j, () => B())),
              onClick: B
            }, q(N.selectText), 41, Nq)) : ye("", !0)
          ], 64))
        ], 512)
      ], 64))
    ], 512));
  }
}), $q = ["role", "aria-label", "tabindex"], qq = { class: "dp__selection_grid_header" }, Hq = ["aria-selected", "aria-disabled", "data-test-id", "onClick", "onKeydown", "onMouseover"], zq = ["aria-label"], jf = /* @__PURE__ */ Ha({
  __name: "SelectionOverlay",
  props: {
    items: {},
    type: {},
    isLast: { type: Boolean },
    arrowNavigation: { type: Boolean },
    skipButtonRef: { type: Boolean },
    headerRefs: {},
    hideNavigation: {},
    escClose: { type: Boolean },
    useRelative: { type: Boolean },
    height: {},
    textInput: { type: [Boolean, Object] },
    config: {},
    noOverlayFocus: { type: Boolean },
    focusValue: {},
    menuWrapRef: {},
    ariaLabels: {},
    overlayLabel: {}
  },
  emits: ["selected", "toggle", "reset-flow", "hover-value"],
  setup(e, { expose: t, emit: n }) {
    const { setSelectionGrid: a, buildMultiLevelMatrix: r, setMonthPicker: i } = al(), o = n, l = e, { defaultedAriaLabels: s, defaultedTextInput: d, defaultedConfig: u, handleEventPropagation: f } = da(
      l
    ), { hideNavigationButtons: h } = vp(), g = Se(!1), v = Se(null), w = Se(null), b = Se([]), p = Se(), y = Se(null), S = Se(0), E = Se(null);
    dw(() => {
      v.value = null;
    }), on(() => {
      Vt().then(() => M()), l.noOverlayFocus || D(), C(!0);
    }), di(() => C(!1));
    const C = (X) => {
      var he;
      l.arrowNavigation && ((he = l.headerRefs) != null && he.length ? i(X) : a(X));
    }, D = () => {
      var X;
      const he = $a(w);
      he && (d.value.enabled || (v.value ? (X = v.value) == null || X.focus({ preventScroll: !0 }) : he.focus({ preventScroll: !0 })), g.value = he.clientHeight < he.scrollHeight);
    }, P = W(
      () => ({
        dp__overlay: !0,
        "dp--overlay-absolute": !l.useRelative,
        "dp--overlay-relative": l.useRelative
      })
    ), O = W(
      () => l.useRelative ? { height: `${l.height}px`, width: "var(--dp-menu-min-width)" } : void 0
    ), T = W(() => ({
      dp__overlay_col: !0
    })), A = W(
      () => ({
        dp__btn: !0,
        dp__button: !0,
        dp__overlay_action: !0,
        dp__over_action_scroll: g.value,
        dp__button_bottom: l.isLast
      })
    ), V = W(() => {
      var X, he;
      return {
        dp__overlay_container: !0,
        dp__container_flex: ((X = l.items) == null ? void 0 : X.length) <= 6,
        dp__container_block: ((he = l.items) == null ? void 0 : he.length) > 6
      };
    });
    nt(
      () => l.items,
      () => M(!1),
      { deep: !0 }
    );
    const M = (X = !0) => {
      Vt().then(() => {
        const he = $a(v), ve = $a(w), pe = $a(y), z = $a(E), ke = pe ? pe.getBoundingClientRect().height : 0;
        ve && (ve.getBoundingClientRect().height ? S.value = ve.getBoundingClientRect().height - ke : S.value = u.value.modeHeight - ke), he && z && X && (z.scrollTop = he.offsetTop - z.offsetTop - (S.value / 2 - he.getBoundingClientRect().height) - ke);
      });
    }, B = (X) => {
      X.disabled || o("selected", X.value);
    }, N = () => {
      o("toggle"), o("reset-flow");
    }, H = (X) => {
      l.escClose && (N(), f(X));
    }, j = (X, he, ve, pe) => {
      X && ((he.active || he.value === l.focusValue) && (v.value = X), l.arrowNavigation && (Array.isArray(b.value[ve]) ? b.value[ve][pe] = X : b.value[ve] = [X], te()));
    }, te = () => {
      var X, he;
      const ve = (X = l.headerRefs) != null && X.length ? [l.headerRefs].concat(b.value) : b.value.concat([l.skipButtonRef ? [] : [y.value]]);
      r(Za(ve), (he = l.headerRefs) != null && he.length ? "monthPicker" : "selectionGrid");
    }, de = (X) => {
      l.arrowNavigation || Ns(X, u.value, !0);
    }, Z = (X) => {
      p.value = X, o("hover-value", X);
    }, F = () => {
      if (N(), !l.isLast) {
        const X = vb(l.menuWrapRef ?? null, "action-row");
        if (X) {
          const he = ZI(X);
          he?.focus();
        }
      }
    }, K = (X) => {
      switch (X.key) {
        case Gn.esc:
          return H(X);
        case Gn.arrowLeft:
          return de(X);
        case Gn.arrowRight:
          return de(X);
        case Gn.arrowUp:
          return de(X);
        case Gn.arrowDown:
          return de(X);
        default:
          return;
      }
    }, se = (X) => {
      if (X.key === Gn.enter) return N();
      if (X.key === Gn.tab) return F();
    };
    return t({ focusGrid: D }), (X, he) => {
      var ve;
      return ee(), Oe("div", {
        ref_key: "gridWrapRef",
        ref: w,
        class: Ie(P.value),
        style: Xe(O.value),
        role: X.useRelative ? void 0 : "dialog",
        "aria-label": X.overlayLabel,
        tabindex: X.useRelative ? void 0 : "0",
        onKeydown: K,
        onClick: he[0] || (he[0] = ia(() => {
        }, ["prevent"]))
      }, [
        I("div", {
          ref_key: "containerRef",
          ref: E,
          class: Ie(V.value),
          style: Xe({ "--dp-overlay-height": `${S.value}px` }),
          role: "grid"
        }, [
          I("div", qq, [
            bt(X.$slots, "header")
          ]),
          X.$slots.overlay ? bt(X.$slots, "overlay", { key: 0 }) : (ee(!0), Oe(Qe, { key: 1 }, rn(X.items, (pe, z) => (ee(), Oe("div", {
            key: z,
            class: Ie(["dp__overlay_row", { dp__flex_row: X.items.length >= 3 }]),
            role: "row"
          }, [
            (ee(!0), Oe(Qe, null, rn(pe, (ke, Me) => (ee(), Oe("div", {
              key: ke.value,
              ref_for: !0,
              ref: (Le) => j(Le, ke, z, Me),
              role: "gridcell",
              class: Ie(T.value),
              "aria-selected": ke.active || void 0,
              "aria-disabled": ke.disabled || void 0,
              tabindex: "0",
              "data-test-id": ke.text,
              onClick: ia((Le) => B(ke), ["prevent"]),
              onKeydown: (Le) => fe(Lr)(Le, () => B(ke), !0),
              onMouseover: (Le) => Z(ke.value)
            }, [
              I("div", {
                class: Ie(ke.className)
              }, [
                X.$slots.item ? bt(X.$slots, "item", {
                  key: 0,
                  item: ke
                }) : ye("", !0),
                X.$slots.item ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
                  ae(q(ke.text), 1)
                ], 64))
              ], 2)
            ], 42, Hq))), 128))
          ], 2))), 128))
        ], 6),
        X.$slots["button-icon"] ? an((ee(), Oe("button", {
          key: 0,
          ref_key: "toggleButton",
          ref: y,
          type: "button",
          "aria-label": (ve = fe(s)) == null ? void 0 : ve.toggleOverlay,
          class: Ie(A.value),
          tabindex: "0",
          onClick: N,
          onKeydown: se
        }, [
          bt(X.$slots, "button-icon")
        ], 42, zq)), [
          [_a, !fe(h)(X.hideNavigation, X.type)]
        ]) : ye("", !0)
      ], 46, $q);
    };
  }
}), Wq = ["data-dp-mobile"], _p = /* @__PURE__ */ Ha({
  __name: "InstanceWrap",
  props: {
    multiCalendars: {},
    stretch: { type: Boolean },
    collapse: { type: Boolean },
    isMobile: { type: Boolean }
  },
  setup(e) {
    const t = e, n = W(
      () => t.multiCalendars > 0 ? [...Array(t.multiCalendars).keys()] : [0]
    ), a = W(() => ({
      dp__instance_calendar: t.multiCalendars > 0
    }));
    return (r, i) => (ee(), Oe("div", {
      class: Ie({
        dp__menu_inner: !r.stretch,
        "dp--menu--inner-stretched": r.stretch,
        dp__flex_display: r.multiCalendars > 0,
        "dp--flex-display-collapsed": r.collapse
      }),
      "data-dp-mobile": r.isMobile
    }, [
      (ee(!0), Oe(Qe, null, rn(n.value, (o, l) => (ee(), Oe("div", {
        key: o,
        class: Ie(a.value)
      }, [
        bt(r.$slots, "default", {
          instance: o,
          index: l
        })
      ], 2))), 128))
    ], 10, Wq));
  }
}), jq = ["data-dp-element", "aria-label", "aria-disabled"], rf = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "ArrowBtn",
  props: {
    ariaLabel: {},
    elName: {},
    disabled: { type: Boolean }
  },
  emits: ["activate", "set-ref"],
  setup(e, { emit: t }) {
    const n = t, a = Se(null);
    return on(() => n("set-ref", a)), (r, i) => (ee(), Oe("button", {
      ref_key: "elRef",
      ref: a,
      type: "button",
      "data-dp-element": r.elName,
      class: "dp__btn dp--arrow-btn-nav",
      tabindex: "0",
      "aria-label": r.ariaLabel,
      "aria-disabled": r.disabled || void 0,
      onClick: i[0] || (i[0] = (o) => r.$emit("activate")),
      onKeydown: i[1] || (i[1] = (o) => fe(Lr)(o, () => r.$emit("activate"), !0))
    }, [
      I("span", {
        class: Ie(["dp__inner_nav", { dp__inner_nav_disabled: r.disabled }])
      }, [
        bt(r.$slots, "default")
      ], 2)
    ], 40, jq));
  }
}), Kq = ["aria-label", "data-test-id"], dE = /* @__PURE__ */ Ha({
  __name: "YearModePicker",
  props: {
    ...Yi,
    showYearPicker: { type: Boolean, default: !1 },
    items: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    isDisabled: { type: Function, default: () => !1 }
  },
  emits: ["toggle-year-picker", "year-select", "handle-year"],
  setup(e, { emit: t }) {
    const n = t, a = e, { showRightIcon: r, showLeftIcon: i } = vp(), { defaultedConfig: o, defaultedMultiCalendars: l, defaultedAriaLabels: s, defaultedTransitions: d, defaultedUI: u } = da(a), { showTransition: f, transitionName: h } = Kf(d), g = Se(!1), v = (p = !1, y) => {
      g.value = !g.value, n("toggle-year-picker", { flow: p, show: y });
    }, w = (p) => {
      g.value = !1, n("year-select", p);
    }, b = (p = !1) => {
      n("handle-year", p);
    };
    return (p, y) => {
      var S, E, C, D, P;
      return ee(), Oe(Qe, null, [
        I("div", {
          class: Ie(["dp--year-mode-picker", { "dp--hidden-el": g.value }])
        }, [
          fe(i)(fe(l), e.instance) ? (ee(), Re(rf, {
            key: 0,
            ref: "mpPrevIconRef",
            "aria-label": (S = fe(s)) == null ? void 0 : S.prevYear,
            disabled: e.isDisabled(!1),
            class: Ie((E = fe(u)) == null ? void 0 : E.navBtnPrev),
            onActivate: y[0] || (y[0] = (O) => b(!1))
          }, {
            default: x(() => [
              p.$slots["arrow-left"] ? bt(p.$slots, "arrow-left", { key: 0 }) : ye("", !0),
              p.$slots["arrow-left"] ? ye("", !0) : (ee(), Re(fe(o0), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled", "class"])) : ye("", !0),
          I("button", {
            ref: "mpYearButtonRef",
            class: "dp__btn dp--year-select",
            type: "button",
            "aria-label": `${e.year}-${(C = fe(s)) == null ? void 0 : C.openYearsOverlay}`,
            "data-test-id": `year-mode-btn-${e.instance}`,
            onClick: y[1] || (y[1] = () => v(!1)),
            onKeydown: y[2] || (y[2] = Rl(() => v(!1), ["enter"]))
          }, [
            p.$slots.year ? bt(p.$slots, "year", {
              key: 0,
              year: e.year
            }) : ye("", !0),
            p.$slots.year ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
              ae(q(e.year), 1)
            ], 64))
          ], 40, Kq),
          fe(r)(fe(l), e.instance) ? (ee(), Re(rf, {
            key: 1,
            ref: "mpNextIconRef",
            "aria-label": (D = fe(s)) == null ? void 0 : D.nextYear,
            disabled: e.isDisabled(!0),
            class: Ie((P = fe(u)) == null ? void 0 : P.navBtnNext),
            onActivate: y[3] || (y[3] = (O) => b(!0))
          }, {
            default: x(() => [
              p.$slots["arrow-right"] ? bt(p.$slots, "arrow-right", { key: 0 }) : ye("", !0),
              p.$slots["arrow-right"] ? ye("", !0) : (ee(), Re(fe(s0), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled", "class"])) : ye("", !0)
        ], 2),
        _(Ur, {
          name: fe(h)(e.showYearPicker),
          css: fe(f)
        }, {
          default: x(() => {
            var O, T;
            return [
              e.showYearPicker ? (ee(), Re(jf, {
                key: 0,
                items: e.items,
                "text-input": p.textInput,
                "esc-close": p.escClose,
                config: p.config,
                "is-last": p.autoApply && !fe(o).keepActionRow,
                "hide-navigation": p.hideNavigation,
                "aria-labels": p.ariaLabels,
                "overlay-label": (T = (O = fe(s)) == null ? void 0 : O.yearPicker) == null ? void 0 : T.call(O, !0),
                type: "year",
                onToggle: v,
                onSelected: y[4] || (y[4] = (A) => w(A))
              }, dr({
                "button-icon": x(() => [
                  p.$slots["calendar-icon"] ? bt(p.$slots, "calendar-icon", { key: 0 }) : ye("", !0),
                  p.$slots["calendar-icon"] ? ye("", !0) : (ee(), Re(fe(Gu), { key: 1 }))
                ]),
                _: 2
              }, [
                p.$slots["year-overlay-value"] ? {
                  name: "item",
                  fn: x(({ item: A }) => [
                    bt(p.$slots, "year-overlay-value", {
                      text: A.text,
                      value: A.value
                    })
                  ]),
                  key: "0"
                } : void 0
              ]), 1032, ["items", "text-input", "esc-close", "config", "is-last", "hide-navigation", "aria-labels", "overlay-label"])) : ye("", !0)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ], 64);
    };
  }
}), p0 = (e, t, n) => {
  if (t.value && Array.isArray(t.value))
    if (t.value.some((a) => mn(e, a))) {
      const a = t.value.filter((r) => !mn(r, e));
      t.value = a.length ? a : null;
    } else (n && +n > t.value.length || !n) && t.value.push(e);
  else
    t.value = [e];
}, v0 = (e, t, n) => {
  let a = e.value ? e.value.slice() : [];
  return a.length === 2 && a[1] !== null && (a = []), a.length ? (Sa(t, a[0]) ? a.unshift(t) : a[1] = t, n("range-end", t)) : (a = [t], n("range-start", t)), a;
}, pp = (e, t, n, a) => {
  e && (e[0] && e[1] && n && t("auto-apply"), e[0] && !e[1] && a && n && t("auto-apply"));
}, fE = (e) => {
  Array.isArray(e.value) && e.value.length <= 2 && e.range ? e.modelValue.value = e.value.map((t) => Yr(ut(t), e.timezone)) : Array.isArray(e.value) || (e.modelValue.value = Yr(ut(e.value), e.timezone));
}, mE = (e, t, n, a) => Array.isArray(t.value) && (t.value.length === 2 || t.value.length === 1 && a.value.partialRange) ? a.value.fixedStart && (Oa(e, t.value[0]) || mn(e, t.value[0])) ? [t.value[0], e] : a.value.fixedEnd && (Sa(e, t.value[1]) || mn(e, t.value[1])) ? [e, t.value[1]] : (n("invalid-fixed-range", e), t.value) : [], hE = ({
  multiCalendars: e,
  range: t,
  highlight: n,
  propDates: a,
  calendars: r,
  modelValue: i,
  props: o,
  filters: l,
  year: s,
  month: d,
  emit: u
}) => {
  const f = W(() => f0(o.yearRange, o.locale, o.reverseYears)), h = Se([!1]), g = W(() => (A, V) => {
    const M = Bn(Ui(/* @__PURE__ */ new Date()), {
      month: d.value(A),
      year: s.value(A)
    }), B = V ? MI(M) : Sf(M);
    return sE(
      B,
      a.value.maxDate,
      a.value.minDate,
      o.preventMinMaxNavigation,
      V
    );
  }), v = () => Array.isArray(i.value) && e.value.solo && i.value[1], w = () => {
    for (let A = 0; A < e.value.count; A++)
      if (A === 0)
        r.value[A] = r.value[0];
      else if (A === e.value.count - 1 && v())
        r.value[A] = {
          month: fn(i.value[1]),
          year: Kt(i.value[1])
        };
      else {
        const V = Bn(ut(), r.value[A - 1]);
        r.value[A] = { month: fn(V), year: Kt(e0(V, 1)) };
      }
  }, b = (A) => {
    if (!A) return w();
    const V = Bn(ut(), r.value[A]);
    return r.value[0].year = Kt(GI(V, e.value.count - 1)), w();
  }, p = (A, V) => {
    const M = nU(V, A);
    return t.value.showLastInRange && M > 1 ? V : A;
  }, y = (A) => o.focusStartDate || e.value.solo ? A[0] : A[1] ? p(A[0], A[1]) : A[0], S = () => {
    if (i.value) {
      const A = Array.isArray(i.value) ? y(i.value) : i.value;
      r.value[0] = { month: fn(A), year: Kt(A) };
    }
  }, E = () => {
    S(), e.value.count && w();
  };
  nt(i, (A, V) => {
    o.isTextInputDate && JSON.stringify(A ?? {}) !== JSON.stringify(V ?? {}) && E();
  }), on(() => {
    E();
  });
  const C = (A, V) => {
    r.value[V].year = A, u("update-month-year", { instance: V, year: A, month: r.value[V].month }), e.value.count && !e.value.solo && b(V);
  }, D = W(() => (A) => Bu(f.value, (V) => {
    var M;
    const B = s.value(A) === V.value, N = Cf(
      V.value,
      Vu(a.value.minDate),
      Vu(a.value.maxDate)
    ) || ((M = l.value.years) == null ? void 0 : M.includes(s.value(A))), H = _0(n.value, V.value);
    return { active: B, disabled: N, highlighted: H };
  })), P = (A, V) => {
    C(A, V), T(V);
  }, O = (A, V = !1) => {
    if (!g.value(A, V)) {
      const M = V ? s.value(A) + 1 : s.value(A) - 1;
      C(M, A);
    }
  }, T = (A, V = !1, M) => {
    V || u("reset-flow"), M !== void 0 ? h.value[A] = M : h.value[A] = !h.value[A], h.value[A] ? u("overlay-toggle", { open: !0, overlay: br.year }) : (u("overlay-closed"), u("overlay-toggle", { open: !1, overlay: br.year }));
  };
  return {
    isDisabled: g,
    groupedYears: D,
    showYearPicker: h,
    selectYear: C,
    toggleYearPicker: T,
    handleYearSelect: P,
    handleYear: O
  };
}, Yq = (e, t) => {
  const {
    defaultedMultiCalendars: n,
    defaultedAriaLabels: a,
    defaultedTransitions: r,
    defaultedConfig: i,
    defaultedRange: o,
    defaultedHighlight: l,
    propDates: s,
    defaultedTz: d,
    defaultedFilters: u,
    defaultedMultiDates: f
  } = da(e), h = () => {
    e.isTextInputDate && E(Kt(ut(e.startDate)), 0);
  }, { modelValue: g, year: v, month: w, calendars: b } = Yf(e, t, h), p = W(() => JI(e.formatLocale, e.locale, e.monthNameFormat)), y = Se(null), { checkMinMaxRange: S } = rl(e), {
    selectYear: E,
    groupedYears: C,
    showYearPicker: D,
    toggleYearPicker: P,
    handleYearSelect: O,
    handleYear: T,
    isDisabled: A
  } = hE({
    modelValue: g,
    multiCalendars: n,
    range: o,
    highlight: l,
    calendars: b,
    year: v,
    propDates: s,
    month: w,
    filters: u,
    props: e,
    emit: t
  });
  on(() => {
    e.startDate && (g.value && e.focusStartDate || !g.value) && E(Kt(ut(e.startDate)), 0);
  });
  const V = (he) => he ? { month: fn(he), year: Kt(he) } : { month: null, year: null }, M = () => g.value ? Array.isArray(g.value) ? g.value.map((he) => V(he)) : V(g.value) : V(), B = (he, ve) => {
    const pe = b.value[he], z = M();
    return Array.isArray(z) ? z.some((ke) => ke.year === pe?.year && ke.month === ve) : pe?.year === z.year && ve === z.month;
  }, N = (he, ve, pe) => {
    var z, ke;
    const Me = M();
    return Array.isArray(Me) ? v.value(ve) === ((z = Me[pe]) == null ? void 0 : z.year) && he === ((ke = Me[pe]) == null ? void 0 : ke.month) : !1;
  }, H = (he, ve) => {
    if (o.value.enabled) {
      const pe = M();
      if (Array.isArray(g.value) && Array.isArray(pe)) {
        const z = N(he, ve, 0) || N(he, ve, 1), ke = Yo(Ui(ut()), he, v.value(ve));
        return Af(g.value, y.value, ke) && !z;
      }
      return !1;
    }
    return !1;
  }, j = W(() => (he) => Bu(p.value, (ve) => {
    var pe;
    const z = B(he, ve.value), ke = Cf(
      ve.value,
      aE(v.value(he), s.value.minDate),
      rE(v.value(he), s.value.maxDate)
    ) || vq(s.value.disabledDates, v.value(he), ve.value) || ((pe = u.value.months) == null ? void 0 : pe.includes(ve.value)) || !gq(s.value.allowedDates, v.value(he), ve.value), Me = H(ve.value, he), Le = cE(l.value, ve.value, v.value(he));
    return { active: z, disabled: ke, isBetween: Me, highlighted: Le };
  })), te = (he, ve) => Yo(Ui(ut()), he, v.value(ve)), de = (he, ve) => {
    const pe = g.value ? g.value : Ui(/* @__PURE__ */ new Date());
    g.value = Yo(pe, he, v.value(ve)), t("auto-apply"), t("update-flow-step");
  }, Z = (he, ve) => {
    const pe = te(he, ve);
    o.value.fixedEnd || o.value.fixedStart ? g.value = mE(pe, g, t, o) : g.value ? S(pe, g.value) && (g.value = v0(g, te(he, ve), t)) : g.value = [te(he, ve)], Vt().then(() => {
      pp(g.value, t, e.autoApply, e.modelAuto);
    });
  }, F = (he, ve) => {
    p0(te(he, ve), g, f.value.limit), t("auto-apply", !0);
  }, K = (he, ve) => (b.value[ve].month = he, X(ve, b.value[ve].year, he), f.value.enabled ? F(he, ve) : o.value.enabled ? Z(he, ve) : de(he, ve)), se = (he, ve) => {
    E(he, ve), X(ve, he, null);
  }, X = (he, ve, pe) => {
    let z = pe;
    if (!z && z !== 0) {
      const ke = M();
      z = Array.isArray(ke) ? ke[he].month : ke.month;
    }
    t("update-month-year", { instance: he, year: ve, month: z });
  };
  return {
    groupedMonths: j,
    groupedYears: C,
    year: v,
    isDisabled: A,
    defaultedMultiCalendars: n,
    defaultedAriaLabels: a,
    defaultedTransitions: r,
    defaultedConfig: i,
    showYearPicker: D,
    modelValue: g,
    presetDate: (he, ve) => {
      fE({
        value: he,
        modelValue: g,
        range: o.value.enabled,
        timezone: ve ? void 0 : d.value.timezone
      }), t("auto-apply");
    },
    setHoverDate: (he, ve) => {
      y.value = te(he, ve);
    },
    selectMonth: K,
    selectYear: se,
    toggleYearPicker: P,
    handleYearSelect: O,
    handleYear: T,
    getModelMonthYear: M
  };
}, Gq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "MonthPicker",
  props: {
    ...Yi
  },
  emits: [
    "update:internal-model-value",
    "overlay-closed",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year",
    "update-flow-step",
    "mount",
    "invalid-fixed-range",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = lc(), i = li(r, "yearMode"), o = e;
    on(() => {
      o.shadow || a("mount", null);
    });
    const {
      groupedMonths: l,
      groupedYears: s,
      year: d,
      isDisabled: u,
      defaultedMultiCalendars: f,
      defaultedConfig: h,
      showYearPicker: g,
      modelValue: v,
      presetDate: w,
      setHoverDate: b,
      selectMonth: p,
      selectYear: y,
      toggleYearPicker: S,
      handleYearSelect: E,
      handleYear: C,
      getModelMonthYear: D
    } = Yq(o, a);
    return t({ getSidebarProps: () => ({
      modelValue: v,
      year: d,
      getModelMonthYear: D,
      selectMonth: p,
      selectYear: y,
      handleYear: C
    }), presetDate: w, toggleYearPicker: (P) => S(0, P) }), (P, O) => (ee(), Re(_p, {
      "multi-calendars": fe(f).count,
      collapse: P.collapse,
      stretch: "",
      "is-mobile": P.isMobile
    }, {
      default: x(({ instance: T }) => [
        P.$slots["top-extra"] ? bt(P.$slots, "top-extra", {
          key: 0,
          value: P.internalModelValue
        }) : ye("", !0),
        P.$slots["month-year"] ? bt(P.$slots, "month-year", Jn(He({ key: 1 }, {
          year: fe(d),
          months: fe(l)(T),
          years: fe(s)(T),
          selectMonth: fe(p),
          selectYear: fe(y),
          instance: T
        }))) : (ee(), Re(jf, {
          key: 2,
          items: fe(l)(T),
          "arrow-navigation": P.arrowNavigation,
          "is-last": P.autoApply && !fe(h).keepActionRow,
          "esc-close": P.escClose,
          height: fe(h).modeHeight,
          config: P.config,
          "no-overlay-focus": !!(P.noOverlayFocus || P.textInput),
          "use-relative": "",
          type: "month",
          onSelected: (A) => fe(p)(A, T),
          onHoverValue: (A) => fe(b)(A, T)
        }, dr({
          header: x(() => [
            _(dE, He(P.$props, {
              items: fe(s)(T),
              instance: T,
              "show-year-picker": fe(g)[T],
              year: fe(d)(T),
              "is-disabled": (A) => fe(u)(T, A),
              onHandleYear: (A) => fe(C)(T, A),
              onYearSelect: (A) => fe(E)(A, T),
              onToggleYearPicker: (A) => fe(S)(T, A?.flow, A?.show)
            }), dr({ _: 2 }, [
              rn(fe(i), (A, V) => ({
                name: A,
                fn: x((M) => [
                  bt(P.$slots, A, Jn(Ca(M)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          _: 2
        }, [
          P.$slots["month-overlay-value"] ? {
            name: "item",
            fn: x(({ item: A }) => [
              bt(P.$slots, "month-overlay-value", {
                text: A.text,
                value: A.value
              })
            ]),
            key: "0"
          } : void 0
        ]), 1032, ["items", "arrow-navigation", "is-last", "esc-close", "height", "config", "no-overlay-focus", "onSelected", "onHoverValue"]))
      ]),
      _: 3
    }, 8, ["multi-calendars", "collapse", "is-mobile"]));
  }
}), Qq = (e, t) => {
  const n = () => {
    e.isTextInputDate && (u.value = Kt(ut(e.startDate)));
  }, { modelValue: a } = Yf(e, t, n), r = Se(null), { defaultedHighlight: i, defaultedMultiDates: o, defaultedFilters: l, defaultedRange: s, propDates: d } = da(e), u = Se();
  on(() => {
    e.startDate && (a.value && e.focusStartDate || !a.value) && (u.value = Kt(ut(e.startDate)));
  });
  const f = (p) => Array.isArray(a.value) ? a.value.some((y) => Kt(y) === p) : a.value ? Kt(a.value) === p : !1, h = (p) => s.value.enabled && Array.isArray(a.value) ? Af(a.value, r.value, b(p)) : !1, g = (p) => d.value.allowedDates instanceof Map ? d.value.allowedDates.size ? d.value.allowedDates.has(`${p}`) : !1 : !0, v = (p) => d.value.disabledDates instanceof Map ? d.value.disabledDates.size ? d.value.disabledDates.has(`${p}`) : !1 : !0, w = W(() => Bu(f0(e.yearRange, e.locale, e.reverseYears), (p) => {
    const y = f(p.value), S = Cf(
      p.value,
      Vu(d.value.minDate),
      Vu(d.value.maxDate)
    ) || l.value.years.includes(p.value) || !g(p.value) || v(p.value), E = h(p.value) && !y, C = _0(i.value, p.value);
    return { active: y, disabled: S, isBetween: E, highlighted: C };
  })), b = (p) => _o(Ui(Sf(/* @__PURE__ */ new Date())), p);
  return {
    groupedYears: w,
    modelValue: a,
    focusYear: u,
    setHoverValue: (p) => {
      r.value = _o(Ui(/* @__PURE__ */ new Date()), p);
    },
    selectYear: (p) => {
      var y;
      if (t("update-month-year", { instance: 0, year: p }), o.value.enabled)
        return a.value ? Array.isArray(a.value) && (((y = a.value) == null ? void 0 : y.map((S) => Kt(S))).includes(p) ? a.value = a.value.filter((S) => Kt(S) !== p) : a.value.push(_o(rr(ut()), p))) : a.value = [_o(rr(Sf(ut())), p)], t("auto-apply", !0);
      s.value.enabled ? (a.value = v0(a, b(p), t), Vt().then(() => {
        pp(a.value, t, e.autoApply, e.modelAuto);
      })) : (a.value = b(p), t("auto-apply"));
    }
  };
}, Jq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "YearPicker",
  props: {
    ...Yi
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { groupedYears: i, modelValue: o, focusYear: l, selectYear: s, setHoverValue: d } = Qq(r, a), { defaultedConfig: u } = da(r);
    return t({ getSidebarProps: () => ({
      modelValue: o,
      selectYear: s
    }) }), (f, h) => (ee(), Oe("div", null, [
      f.$slots["top-extra"] ? bt(f.$slots, "top-extra", {
        key: 0,
        value: f.internalModelValue
      }) : ye("", !0),
      f.$slots["month-year"] ? bt(f.$slots, "month-year", Jn(He({ key: 1 }, {
        years: fe(i),
        selectYear: fe(s)
      }))) : (ee(), Re(jf, {
        key: 2,
        items: fe(i),
        "is-last": f.autoApply && !fe(u).keepActionRow,
        height: fe(u).modeHeight,
        config: f.config,
        "no-overlay-focus": !!(f.noOverlayFocus || f.textInput),
        "focus-value": fe(l),
        type: "year",
        "use-relative": "",
        onSelected: fe(s),
        onHoverValue: fe(d)
      }, dr({ _: 2 }, [
        f.$slots["year-overlay-value"] ? {
          name: "item",
          fn: x(({ item: g }) => [
            bt(f.$slots, "year-overlay-value", {
              text: g.text,
              value: g.value
            })
          ]),
          key: "0"
        } : void 0
      ]), 1032, ["items", "is-last", "height", "config", "no-overlay-focus", "focus-value", "onSelected", "onHoverValue"]))
    ]));
  }
}), Xq = {
  key: 0,
  class: "dp__time_input"
}, Zq = ["data-compact", "data-collapsed"], e6 = ["data-test-id", "aria-label", "onKeydown", "onClick", "onMousedown"], t6 = ["aria-label", "disabled", "data-test-id", "onKeydown", "onClick"], n6 = ["data-test-id", "aria-label", "onKeydown", "onClick", "onMousedown"], a6 = { key: 0 }, r6 = ["aria-label", "data-compact"], i6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "TimeInput",
  props: {
    hours: { type: Number, default: 0 },
    minutes: { type: Number, default: 0 },
    seconds: { type: Number, default: 0 },
    closeTimePickerBtn: { type: Object, default: null },
    order: { type: Number, default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: { type: Function, default: () => !1 },
    ...Yi
  },
  emits: [
    "set-hours",
    "set-minutes",
    "update:hours",
    "update:minutes",
    "update:seconds",
    "reset-flow",
    "mounted",
    "overlay-closed",
    "overlay-opened",
    "am-pm-change"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { setTimePickerElements: i, setTimePickerBackRef: o } = al(), {
      defaultedAriaLabels: l,
      defaultedTransitions: s,
      defaultedFilters: d,
      defaultedConfig: u,
      defaultedRange: f,
      defaultedMultiCalendars: h
    } = da(r), { transitionName: g, showTransition: v } = Kf(s), w = oa({
      hours: !1,
      minutes: !1,
      seconds: !1
    }), b = Se("AM"), p = Se(null), y = Se([]), S = Se(), E = Se(!1);
    on(() => {
      a("mounted");
    });
    const C = (Y) => Bn(/* @__PURE__ */ new Date(), {
      hours: Y.hours,
      minutes: Y.minutes,
      seconds: r.enableSeconds ? Y.seconds : 0,
      milliseconds: 0
    }), D = W(
      () => (Y) => Z(Y, r[Y]) || O(Y, r[Y])
    ), P = W(() => ({ hours: r.hours, minutes: r.minutes, seconds: r.seconds })), O = (Y, Ce) => f.value.enabled && !f.value.disableTimeRangeValidation ? !r.validateTime(Y, Ce) : !1, T = (Y, Ce) => {
      if (f.value.enabled && !f.value.disableTimeRangeValidation) {
        const Te = Ce ? +r[`${Y}Increment`] : -+r[`${Y}Increment`], ie = r[Y] + Te;
        return !r.validateTime(Y, ie);
      }
      return !1;
    }, A = W(() => (Y) => !he(+r[Y] + +r[`${Y}Increment`], Y) || T(Y, !0)), V = W(() => (Y) => !he(+r[Y] - +r[`${Y}Increment`], Y) || T(Y, !1)), M = (Y, Ce) => EI(Bn(ut(), Y), Ce), B = (Y, Ce) => J$(Bn(ut(), Y), Ce), N = W(
      () => ({
        dp__time_col: !0,
        dp__time_col_block: !r.timePickerInline,
        dp__time_col_reg_block: !r.enableSeconds && r.is24 && !r.timePickerInline,
        dp__time_col_reg_inline: !r.enableSeconds && r.is24 && r.timePickerInline,
        dp__time_col_reg_with_button: !r.enableSeconds && !r.is24,
        dp__time_col_sec: r.enableSeconds && r.is24,
        dp__time_col_sec_with_button: r.enableSeconds && !r.is24
      })
    ), H = W(
      () => r.timePickerInline && f.value.enabled && !h.value.count
    ), j = W(() => {
      const Y = [{ type: "hours" }];
      return r.enableMinutes && Y.push({ type: "", separator: !0 }, {
        type: "minutes"
      }), r.enableSeconds && Y.push({ type: "", separator: !0 }, {
        type: "seconds"
      }), Y;
    }), te = W(() => j.value.filter((Y) => !Y.separator)), de = W(() => (Y) => {
      if (Y === "hours") {
        const Ce = Le(+r.hours);
        return { text: Ce < 10 ? `0${Ce}` : `${Ce}`, value: Ce };
      }
      return { text: r[Y] < 10 ? `0${r[Y]}` : `${r[Y]}`, value: r[Y] };
    }), Z = (Y, Ce) => {
      var Te;
      if (!r.disabledTimesConfig) return !1;
      const ie = r.disabledTimesConfig(r.order, Y === "hours" ? Ce : void 0);
      return ie[Y] ? !!((Te = ie[Y]) != null && Te.includes(Ce)) : !0;
    }, F = (Y, Ce) => Ce !== "hours" || b.value === "AM" ? Y : Y + 12, K = (Y) => {
      const Ce = r.is24 ? 24 : 12, Te = Y === "hours" ? Ce : 60, ie = +r[`${Y}GridIncrement`], ge = Y === "hours" && !r.is24 ? ie : 0, Pe = [];
      for (let Ee = ge; Ee < Te; Ee += ie)
        Pe.push({ value: r.is24 ? Ee : F(Ee, Y), text: Ee < 10 ? `0${Ee}` : `${Ee}` });
      return Y === "hours" && !r.is24 && Pe.unshift({ value: b.value === "PM" ? 12 : 0, text: "12" }), Bu(Pe, (Ee) => ({ active: !1, disabled: d.value.times[Y].includes(Ee.value) || !he(Ee.value, Y) || Z(Y, Ee.value) || O(Y, Ee.value) }));
    }, se = (Y) => Y >= 0 ? Y : 59, X = (Y) => Y >= 0 ? Y : 23, he = (Y, Ce) => {
      const Te = r.minTime ? C(Jg(r.minTime)) : null, ie = r.maxTime ? C(Jg(r.maxTime)) : null, ge = C(
        Jg(
          P.value,
          Ce,
          Ce === "minutes" || Ce === "seconds" ? se(Y) : X(Y)
        )
      );
      return Te && ie ? (Ou(ge, ie) || iu(ge, ie)) && (nc(ge, Te) || iu(ge, Te)) : Te ? nc(ge, Te) || iu(ge, Te) : ie ? Ou(ge, ie) || iu(ge, ie) : !0;
    }, ve = (Y) => r[`no${Y[0].toUpperCase() + Y.slice(1)}Overlay`], pe = (Y) => {
      ve(Y) || (w[Y] = !w[Y], w[Y] ? (E.value = !0, a("overlay-opened", Y)) : (E.value = !1, a("overlay-closed", Y)));
    }, z = (Y) => Y === "hours" ? ts : Y === "minutes" ? Ys : Pu, ke = () => {
      S.value && clearTimeout(S.value);
    }, Me = (Y, Ce = !0, Te) => {
      const ie = Ce ? M : B, ge = Ce ? +r[`${Y}Increment`] : -+r[`${Y}Increment`];
      he(+r[Y] + ge, Y) && a(
        `update:${Y}`,
        z(Y)(ie({ [Y]: +r[Y] }, { [Y]: +r[`${Y}Increment`] }))
      ), !(Te != null && Te.keyboard) && u.value.timeArrowHoldThreshold && (S.value = setTimeout(() => {
        Me(Y, Ce);
      }, u.value.timeArrowHoldThreshold));
    }, Le = (Y) => r.is24 ? Y : (Y >= 12 ? b.value = "PM" : b.value = "AM", rq(Y)), ce = () => {
      b.value === "PM" ? (b.value = "AM", a("update:hours", r.hours - 12)) : (b.value = "PM", a("update:hours", r.hours + 12)), a("am-pm-change", b.value);
    }, ne = (Y) => {
      w[Y] = !0;
    }, G = (Y, Ce, Te) => {
      if (Y && r.arrowNavigation) {
        Array.isArray(y.value[Ce]) ? y.value[Ce][Te] = Y : y.value[Ce] = [Y];
        const ie = y.value.reduce(
          (ge, Pe) => Pe.map((Ee, Je) => [...ge[Je] || [], Pe[Je]]),
          []
        );
        o(r.closeTimePickerBtn), p.value && (ie[1] = ie[1].concat(p.value)), i(ie, r.order);
      }
    }, le = (Y, Ce) => (pe(Y), a(`update:${Y}`, Ce));
    return t({ openChildCmp: ne }), (Y, Ce) => {
      var Te;
      return Y.disabled ? ye("", !0) : (ee(), Oe("div", Xq, [
        (ee(!0), Oe(Qe, null, rn(j.value, (ie, ge) => {
          var Pe, Ee, Je;
          return ee(), Oe("div", {
            key: ge,
            class: Ie(N.value),
            "data-compact": H.value && !Y.enableSeconds,
            "data-collapsed": H.value && Y.enableSeconds
          }, [
            ie.separator ? (ee(), Oe(Qe, { key: 0 }, [
              E.value ? ye("", !0) : (ee(), Oe(Qe, { key: 0 }, [
                ae(":")
              ], 64))
            ], 64)) : (ee(), Oe(Qe, { key: 1 }, [
              I("button", {
                ref_for: !0,
                ref: (_e) => G(_e, ge, 0),
                type: "button",
                class: Ie({
                  dp__btn: !0,
                  dp__inc_dec_button: !Y.timePickerInline,
                  dp__inc_dec_button_inline: Y.timePickerInline,
                  dp__tp_inline_btn_top: Y.timePickerInline,
                  dp__inc_dec_button_disabled: A.value(ie.type),
                  "dp--hidden-el": E.value
                }),
                "data-test-id": `${ie.type}-time-inc-btn-${r.order}`,
                "aria-label": (Pe = fe(l)) == null ? void 0 : Pe.incrementValue(ie.type),
                tabindex: "0",
                onKeydown: (_e) => fe(Lr)(_e, () => Me(ie.type, !0, { keyboard: !0 }), !0),
                onClick: (_e) => fe(u).timeArrowHoldThreshold ? void 0 : Me(ie.type, !0),
                onMousedown: (_e) => fe(u).timeArrowHoldThreshold ? Me(ie.type, !0) : void 0,
                onMouseup: ke
              }, [
                r.timePickerInline ? (ee(), Oe(Qe, { key: 1 }, [
                  Y.$slots["tp-inline-arrow-up"] ? bt(Y.$slots, "tp-inline-arrow-up", { key: 0 }) : (ee(), Oe(Qe, { key: 1 }, [
                    Ce[2] || (Ce[2] = I("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1)),
                    Ce[3] || (Ce[3] = I("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1))
                  ], 64))
                ], 64)) : (ee(), Oe(Qe, { key: 0 }, [
                  Y.$slots["arrow-up"] ? bt(Y.$slots, "arrow-up", { key: 0 }) : ye("", !0),
                  Y.$slots["arrow-up"] ? ye("", !0) : (ee(), Re(fe(c0), { key: 1 }))
                ], 64))
              ], 42, e6),
              I("button", {
                ref_for: !0,
                ref: (_e) => G(_e, ge, 1),
                type: "button",
                "aria-label": `${de.value(ie.type).text}-${(Ee = fe(l)) == null ? void 0 : Ee.openTpOverlay(ie.type)}`,
                class: Ie({
                  dp__time_display: !0,
                  dp__time_display_block: !Y.timePickerInline,
                  dp__time_display_inline: Y.timePickerInline,
                  "dp--time-invalid": D.value(ie.type),
                  "dp--time-overlay-btn": !D.value(ie.type),
                  "dp--hidden-el": E.value
                }),
                disabled: ve(ie.type),
                tabindex: "0",
                "data-test-id": `${ie.type}-toggle-overlay-btn-${r.order}`,
                onKeydown: (_e) => fe(Lr)(_e, () => pe(ie.type), !0),
                onClick: (_e) => pe(ie.type)
              }, [
                Y.$slots[ie.type] ? bt(Y.$slots, ie.type, {
                  key: 0,
                  text: de.value(ie.type).text,
                  value: de.value(ie.type).value
                }) : ye("", !0),
                Y.$slots[ie.type] ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
                  ae(q(de.value(ie.type).text), 1)
                ], 64))
              ], 42, t6),
              I("button", {
                ref_for: !0,
                ref: (_e) => G(_e, ge, 2),
                type: "button",
                class: Ie({
                  dp__btn: !0,
                  dp__inc_dec_button: !Y.timePickerInline,
                  dp__inc_dec_button_inline: Y.timePickerInline,
                  dp__tp_inline_btn_bottom: Y.timePickerInline,
                  dp__inc_dec_button_disabled: V.value(ie.type),
                  "dp--hidden-el": E.value
                }),
                "data-test-id": `${ie.type}-time-dec-btn-${r.order}`,
                "aria-label": (Je = fe(l)) == null ? void 0 : Je.decrementValue(ie.type),
                tabindex: "0",
                onKeydown: (_e) => fe(Lr)(_e, () => Me(ie.type, !1, { keyboard: !0 }), !0),
                onClick: (_e) => fe(u).timeArrowHoldThreshold ? void 0 : Me(ie.type, !1),
                onMousedown: (_e) => fe(u).timeArrowHoldThreshold ? Me(ie.type, !1) : void 0,
                onMouseup: ke
              }, [
                r.timePickerInline ? (ee(), Oe(Qe, { key: 1 }, [
                  Y.$slots["tp-inline-arrow-down"] ? bt(Y.$slots, "tp-inline-arrow-down", { key: 0 }) : (ee(), Oe(Qe, { key: 1 }, [
                    Ce[4] || (Ce[4] = I("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1)),
                    Ce[5] || (Ce[5] = I("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1))
                  ], 64))
                ], 64)) : (ee(), Oe(Qe, { key: 0 }, [
                  Y.$slots["arrow-down"] ? bt(Y.$slots, "arrow-down", { key: 0 }) : ye("", !0),
                  Y.$slots["arrow-down"] ? ye("", !0) : (ee(), Re(fe(u0), { key: 1 }))
                ], 64))
              ], 42, n6)
            ], 64))
          ], 10, Zq);
        }), 128)),
        Y.is24 ? ye("", !0) : (ee(), Oe("div", a6, [
          Y.$slots["am-pm-button"] ? bt(Y.$slots, "am-pm-button", {
            key: 0,
            toggle: ce,
            value: b.value
          }) : ye("", !0),
          Y.$slots["am-pm-button"] ? ye("", !0) : (ee(), Oe("button", {
            key: 1,
            ref_key: "amPmButton",
            ref: p,
            type: "button",
            class: "dp__pm_am_button",
            role: "button",
            "aria-label": (Te = fe(l)) == null ? void 0 : Te.amPmButton,
            tabindex: "0",
            "data-compact": H.value,
            onClick: ce,
            onKeydown: Ce[0] || (Ce[0] = (ie) => fe(Lr)(ie, () => ce(), !0))
          }, q(b.value), 41, r6))
        ])),
        (ee(!0), Oe(Qe, null, rn(te.value, (ie, ge) => (ee(), Re(Ur, {
          key: ge,
          name: fe(g)(w[ie.type]),
          css: fe(v)
        }, {
          default: x(() => {
            var Pe, Ee;
            return [
              w[ie.type] ? (ee(), Re(jf, {
                key: 0,
                items: K(ie.type),
                "is-last": Y.autoApply && !fe(u).keepActionRow,
                "esc-close": Y.escClose,
                type: ie.type,
                "text-input": Y.textInput,
                config: Y.config,
                "arrow-navigation": Y.arrowNavigation,
                "aria-labels": Y.ariaLabels,
                "overlay-label": (Ee = (Pe = fe(l)).timeOverlay) == null ? void 0 : Ee.call(Pe, ie.type),
                onSelected: (Je) => le(ie.type, Je),
                onToggle: (Je) => pe(ie.type),
                onResetFlow: Ce[1] || (Ce[1] = (Je) => Y.$emit("reset-flow"))
              }, dr({
                "button-icon": x(() => [
                  Y.$slots["clock-icon"] ? bt(Y.$slots, "clock-icon", { key: 0 }) : ye("", !0),
                  Y.$slots["clock-icon"] ? ye("", !0) : (ee(), Re(Hu(Y.timePickerInline ? fe(Gu) : fe(l0)), { key: 1 }))
                ]),
                _: 2
              }, [
                Y.$slots[`${ie.type}-overlay-value`] ? {
                  name: "item",
                  fn: x(({ item: Je }) => [
                    bt(Y.$slots, `${ie.type}-overlay-value`, {
                      text: Je.text,
                      value: Je.value
                    })
                  ]),
                  key: "0"
                } : void 0,
                Y.$slots[`${ie.type}-overlay-header`] ? {
                  name: "header",
                  fn: x(() => [
                    bt(Y.$slots, `${ie.type}-overlay-header`, {
                      toggle: () => pe(ie.type)
                    })
                  ]),
                  key: "1"
                } : void 0
              ]), 1032, ["items", "is-last", "esc-close", "type", "text-input", "config", "arrow-navigation", "aria-labels", "overlay-label", "onSelected", "onToggle"])) : ye("", !0)
            ];
          }),
          _: 2
        }, 1032, ["name", "css"]))), 128))
      ]));
    };
  }
}), o6 = ["data-dp-mobile"], s6 = ["aria-label", "tabindex"], l6 = ["role", "aria-label", "tabindex"], c6 = ["aria-label"], _E = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePicker",
  props: {
    hours: { type: [Number, Array], default: 0 },
    minutes: { type: [Number, Array], default: 0 },
    seconds: { type: [Number, Array], default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: {
      type: Function,
      default: () => !1
    },
    ...Yi
  },
  emits: [
    "update:hours",
    "update:minutes",
    "update:seconds",
    "mount",
    "reset-flow",
    "overlay-opened",
    "overlay-closed",
    "am-pm-change"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { buildMatrix: i, setTimePicker: o } = al(), l = lc(), { defaultedTransitions: s, defaultedAriaLabels: d, defaultedTextInput: u, defaultedConfig: f, defaultedRange: h } = da(r), { transitionName: g, showTransition: v } = Kf(s), { hideNavigationButtons: w } = vp(), b = Se(null), p = Se(null), y = Se([]), S = Se(null), E = Se(!1);
    on(() => {
      a("mount"), !r.timePicker && r.arrowNavigation ? i([$a(b.value)], "time") : o(!0, r.timePicker);
    });
    const C = W(() => h.value.enabled && r.modelAuto ? XI(r.internalModelValue) : !0), D = Se(!1), P = (Z) => ({
      hours: Array.isArray(r.hours) ? r.hours[Z] : r.hours,
      minutes: Array.isArray(r.minutes) ? r.minutes[Z] : r.minutes,
      seconds: Array.isArray(r.seconds) ? r.seconds[Z] : r.seconds
    }), O = W(() => {
      const Z = [];
      if (h.value.enabled)
        for (let F = 0; F < 2; F++)
          Z.push(P(F));
      else
        Z.push(P(0));
      return Z;
    }), T = (Z, F = !1, K = "") => {
      F || a("reset-flow"), D.value = Z, a(Z ? "overlay-opened" : "overlay-closed", br.time), r.arrowNavigation && o(Z), Vt(() => {
        K !== "" && y.value[0] && y.value[0].openChildCmp(K);
      });
    }, A = W(() => ({
      dp__btn: !0,
      dp__button: !0,
      dp__button_bottom: r.autoApply && !f.value.keepActionRow
    })), V = li(l, "timePicker"), M = (Z, F, K) => h.value.enabled ? F === 0 ? [Z, O.value[1][K]] : [O.value[0][K], Z] : Z, B = (Z) => {
      a("update:hours", Z);
    }, N = (Z) => {
      a("update:minutes", Z);
    }, H = (Z) => {
      a("update:seconds", Z);
    }, j = () => {
      if (S.value && !u.value.enabled && !r.noOverlayFocus) {
        const Z = ZI(S.value);
        Z && Z.focus({ preventScroll: !0 });
      }
    }, te = (Z) => {
      E.value = !1, a("overlay-closed", Z);
    }, de = (Z) => {
      E.value = !0, a("overlay-opened", Z);
    };
    return t({ toggleTimePicker: T }), (Z, F) => {
      var K;
      return ee(), Oe("div", {
        class: "dp--tp-wrap",
        "data-dp-mobile": Z.isMobile
      }, [
        !Z.timePicker && !Z.timePickerInline ? an((ee(), Oe("button", {
          key: 0,
          ref_key: "openTimePickerBtn",
          ref: b,
          type: "button",
          class: Ie({ ...A.value, "dp--hidden-el": D.value }),
          "aria-label": (K = fe(d)) == null ? void 0 : K.openTimePicker,
          tabindex: Z.noOverlayFocus ? void 0 : 0,
          "data-test-id": "open-time-picker-btn",
          onKeydown: F[0] || (F[0] = (se) => fe(Lr)(se, () => T(!0))),
          onClick: F[1] || (F[1] = (se) => T(!0))
        }, [
          Z.$slots["clock-icon"] ? bt(Z.$slots, "clock-icon", { key: 0 }) : ye("", !0),
          Z.$slots["clock-icon"] ? ye("", !0) : (ee(), Re(fe(l0), { key: 1 }))
        ], 42, s6)), [
          [_a, !fe(w)(Z.hideNavigation, "time")]
        ]) : ye("", !0),
        _(Ur, {
          name: fe(g)(D.value),
          css: fe(v) && !Z.timePickerInline
        }, {
          default: x(() => {
            var se, X;
            return [
              D.value || Z.timePicker || Z.timePickerInline ? (ee(), Oe("div", {
                key: 0,
                ref_key: "overlayRef",
                ref: S,
                role: Z.timePickerInline ? void 0 : "dialog",
                class: Ie({
                  dp__overlay: !Z.timePickerInline,
                  "dp--overlay-absolute": !r.timePicker && !Z.timePickerInline,
                  "dp--overlay-relative": r.timePicker
                }),
                style: Xe(Z.timePicker ? { height: `${fe(f).modeHeight}px` } : void 0),
                "aria-label": (se = fe(d)) == null ? void 0 : se.timePicker,
                tabindex: Z.timePickerInline ? void 0 : 0
              }, [
                I("div", {
                  class: Ie(
                    Z.timePickerInline ? "dp__time_picker_inline_container" : "dp__overlay_container dp__container_flex dp__time_picker_overlay_container"
                  ),
                  style: { display: "flex" }
                }, [
                  Z.$slots["time-picker-overlay"] ? bt(Z.$slots, "time-picker-overlay", {
                    key: 0,
                    hours: e.hours,
                    minutes: e.minutes,
                    seconds: e.seconds,
                    setHours: B,
                    setMinutes: N,
                    setSeconds: H
                  }) : ye("", !0),
                  Z.$slots["time-picker-overlay"] ? ye("", !0) : (ee(), Oe("div", {
                    key: 1,
                    class: Ie(Z.timePickerInline ? "dp__flex" : "dp__overlay_row dp__flex_row")
                  }, [
                    (ee(!0), Oe(Qe, null, rn(O.value, (he, ve) => an((ee(), Re(i6, He({
                      key: ve,
                      ref_for: !0
                    }, {
                      ...Z.$props,
                      order: ve,
                      hours: he.hours,
                      minutes: he.minutes,
                      seconds: he.seconds,
                      closeTimePickerBtn: p.value,
                      disabledTimesConfig: e.disabledTimesConfig,
                      disabled: ve === 0 ? fe(h).fixedStart : fe(h).fixedEnd
                    }, {
                      ref_for: !0,
                      ref_key: "timeInputRefs",
                      ref: y,
                      "validate-time": (pe, z) => e.validateTime(pe, M(z, ve, pe)),
                      "onUpdate:hours": (pe) => B(M(pe, ve, "hours")),
                      "onUpdate:minutes": (pe) => N(M(pe, ve, "minutes")),
                      "onUpdate:seconds": (pe) => H(M(pe, ve, "seconds")),
                      onMounted: j,
                      onOverlayClosed: te,
                      onOverlayOpened: de,
                      onAmPmChange: F[2] || (F[2] = (pe) => Z.$emit("am-pm-change", pe))
                    }), dr({ _: 2 }, [
                      rn(fe(V), (pe, z) => ({
                        name: pe,
                        fn: x((ke) => [
                          bt(Z.$slots, pe, He({ ref_for: !0 }, ke))
                        ])
                      }))
                    ]), 1040, ["validate-time", "onUpdate:hours", "onUpdate:minutes", "onUpdate:seconds"])), [
                      [_a, ve === 0 ? !0 : C.value]
                    ])), 128))
                  ], 2)),
                  !Z.timePicker && !Z.timePickerInline ? an((ee(), Oe("button", {
                    key: 2,
                    ref_key: "closeTimePickerBtn",
                    ref: p,
                    type: "button",
                    class: Ie({ ...A.value, "dp--hidden-el": E.value }),
                    "aria-label": (X = fe(d)) == null ? void 0 : X.closeTimePicker,
                    tabindex: "0",
                    onKeydown: F[3] || (F[3] = (he) => fe(Lr)(he, () => T(!1))),
                    onClick: F[4] || (F[4] = (he) => T(!1))
                  }, [
                    Z.$slots["calendar-icon"] ? bt(Z.$slots, "calendar-icon", { key: 0 }) : ye("", !0),
                    Z.$slots["calendar-icon"] ? ye("", !0) : (ee(), Re(fe(Gu), { key: 1 }))
                  ], 42, c6)), [
                    [_a, !fe(w)(Z.hideNavigation, "time")]
                  ]) : ye("", !0)
                ], 2)
              ], 14, l6)) : ye("", !0)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ], 8, o6);
    };
  }
}), pE = (e, t, n, a) => {
  const { defaultedRange: r } = da(e), i = (S, E) => Array.isArray(t[S]) ? t[S][E] : t[S], o = (S) => e.enableSeconds ? Array.isArray(t.seconds) ? t.seconds[S] : t.seconds : 0, l = (S, E) => S ? E !== void 0 ? Us(S, i("hours", E), i("minutes", E), o(E)) : Us(S, t.hours, t.minutes, o()) : YI(ut(), o(E)), s = (S, E) => {
    t[S] = E;
  }, d = W(() => e.modelAuto && r.value.enabled ? Array.isArray(n.value) ? n.value.length > 1 : !1 : r.value.enabled), u = (S, E) => {
    const C = Object.fromEntries(
      Object.keys(t).map((D) => D === S ? [D, E] : [D, t[D]].slice())
    );
    if (d.value && !r.value.disableTimeRangeValidation) {
      const D = (O) => n.value ? Us(
        n.value[O],
        C.hours[O],
        C.minutes[O],
        C.seconds[O]
      ) : null, P = (O) => KI(n.value[O], 0);
      return !(mn(D(0), D(1)) && (nc(D(0), P(1)) || Ou(D(1), P(0))));
    }
    return !0;
  }, f = (S, E) => {
    u(S, E) && (s(S, E), a && a());
  }, h = (S) => {
    f("hours", S);
  }, g = (S) => {
    f("minutes", S);
  }, v = (S) => {
    f("seconds", S);
  }, w = (S, E, C, D) => {
    E && h(S), !E && !C && g(S), C && v(S), n.value && D(n.value);
  }, b = (S) => {
    if (S) {
      const E = Array.isArray(S), C = E ? [+S[0].hours, +S[1].hours] : +S.hours, D = E ? [+S[0].minutes, +S[1].minutes] : +S.minutes, P = E ? [+S[0].seconds, +S[1].seconds] : +S.seconds;
      s("hours", C), s("minutes", D), e.enableSeconds && s("seconds", P);
    }
  }, p = (S, E) => {
    const C = {
      hours: Array.isArray(t.hours) ? t.hours[S] : t.hours,
      disabledArr: []
    };
    return (E || E === 0) && (C.hours = E), Array.isArray(e.disabledTimes) && (C.disabledArr = r.value.enabled && Array.isArray(e.disabledTimes[S]) ? e.disabledTimes[S] : e.disabledTimes), C;
  }, y = W(() => (S, E) => {
    var C;
    if (Array.isArray(e.disabledTimes)) {
      const { disabledArr: D, hours: P } = p(S, E), O = D.filter((T) => +T.hours === P);
      return ((C = O[0]) == null ? void 0 : C.minutes) === "*" ? { hours: [P], minutes: void 0, seconds: void 0 } : {
        hours: [],
        minutes: O?.map((T) => +T.minutes) ?? [],
        seconds: O?.map((T) => T.seconds ? +T.seconds : void 0) ?? []
      };
    }
    return { hours: [], minutes: [], seconds: [] };
  });
  return {
    setTime: s,
    updateHours: h,
    updateMinutes: g,
    updateSeconds: v,
    getSetDateTime: l,
    updateTimeValues: w,
    getSecondsValue: o,
    assignStartTime: b,
    validateTime: u,
    disabledTimesConfig: y
  };
}, u6 = (e, t) => {
  const n = () => {
    e.isTextInputDate && E();
  }, { modelValue: a, time: r } = Yf(e, t, n), { defaultedStartTime: i, defaultedRange: o, defaultedTz: l } = da(e), { updateTimeValues: s, getSetDateTime: d, setTime: u, assignStartTime: f, disabledTimesConfig: h, validateTime: g } = pE(e, r, a, v);
  function v() {
    t("update-flow-step");
  }
  const w = (D) => {
    const { hours: P, minutes: O, seconds: T } = D;
    return { hours: +P, minutes: +O, seconds: T ? +T : 0 };
  }, b = () => {
    if (e.startTime) {
      if (Array.isArray(e.startTime)) {
        const P = w(e.startTime[0]), O = w(e.startTime[1]);
        return [Bn(ut(), P), Bn(ut(), O)];
      }
      const D = w(e.startTime);
      return Bn(ut(), D);
    }
    return o.value.enabled ? [null, null] : null;
  }, p = () => {
    if (o.value.enabled) {
      const [D, P] = b();
      a.value = [
        Yr(d(D, 0), l.value.timezone),
        Yr(d(P, 1), l.value.timezone)
      ];
    } else
      a.value = Yr(d(b()), l.value.timezone);
  }, y = (D) => Array.isArray(D) ? [Yl(ut(D[0])), Yl(ut(D[1]))] : [Yl(D ?? ut())], S = (D, P, O) => {
    u("hours", D), u("minutes", P), u("seconds", e.enableSeconds ? O : 0);
  }, E = () => {
    const [D, P] = y(a.value);
    return o.value.enabled ? S(
      [D.hours, P.hours],
      [D.minutes, P.minutes],
      [D.seconds, P.seconds]
    ) : S(D.hours, D.minutes, D.seconds);
  };
  on(() => {
    if (!e.shadow)
      return f(i.value), a.value ? E() : p();
  });
  const C = () => {
    Array.isArray(a.value) ? a.value = a.value.map((D, P) => D && d(D, P)) : a.value = d(a.value), t("time-update");
  };
  return {
    modelValue: a,
    time: r,
    disabledTimesConfig: h,
    updateTime: (D, P = !0, O = !1) => {
      s(D, P, O, C);
    },
    validateTime: g
  };
}, d6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePickerSolo",
  props: {
    ...Yi
  },
  emits: [
    "update:internal-model-value",
    "time-update",
    "am-pm-change",
    "mount",
    "reset-flow",
    "update-flow-step",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = lc(), o = li(i, "timePicker"), l = Se(null), { time: s, modelValue: d, disabledTimesConfig: u, updateTime: f, validateTime: h } = u6(r, a);
    return on(() => {
      r.shadow || a("mount", null);
    }), t({ getSidebarProps: () => ({
      modelValue: d,
      time: s,
      updateTime: f
    }), toggleTimePicker: (g, v = !1, w = "") => {
      var b;
      (b = l.value) == null || b.toggleTimePicker(g, v, w);
    } }), (g, v) => (ee(), Re(_p, {
      "multi-calendars": 0,
      stretch: "",
      "is-mobile": g.isMobile
    }, {
      default: x(() => [
        _(_E, He({
          ref_key: "tpRef",
          ref: l
        }, g.$props, {
          hours: fe(s).hours,
          minutes: fe(s).minutes,
          seconds: fe(s).seconds,
          "internal-model-value": g.internalModelValue,
          "disabled-times-config": fe(u),
          "validate-time": fe(h),
          "onUpdate:hours": v[0] || (v[0] = (w) => fe(f)(w)),
          "onUpdate:minutes": v[1] || (v[1] = (w) => fe(f)(w, !1)),
          "onUpdate:seconds": v[2] || (v[2] = (w) => fe(f)(w, !1, !0)),
          onAmPmChange: v[3] || (v[3] = (w) => g.$emit("am-pm-change", w)),
          onResetFlow: v[4] || (v[4] = (w) => g.$emit("reset-flow")),
          onOverlayClosed: v[5] || (v[5] = (w) => g.$emit("overlay-toggle", { open: !1, overlay: w })),
          onOverlayOpened: v[6] || (v[6] = (w) => g.$emit("overlay-toggle", { open: !0, overlay: w }))
        }), dr({ _: 2 }, [
          rn(fe(o), (w, b) => ({
            name: w,
            fn: x((p) => [
              bt(g.$slots, w, Jn(Ca(p)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"])
      ]),
      _: 3
    }, 8, ["is-mobile"]));
  }
}), f6 = { class: "dp--header-wrap" }, m6 = {
  key: 0,
  class: "dp__month_year_wrap"
}, h6 = { key: 0 }, _6 = { class: "dp__month_year_wrap" }, p6 = ["data-dp-element", "aria-label", "data-test-id", "onClick", "onKeydown"], v6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DpHeader",
  props: {
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    instance: { type: Number, default: 0 },
    years: { type: Array, default: () => [] },
    months: { type: Array, default: () => [] },
    ...Yi
  },
  emits: ["update-month-year", "mount", "reset-flow", "overlay-closed", "overlay-opened"],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      defaultedTransitions: i,
      defaultedAriaLabels: o,
      defaultedMultiCalendars: l,
      defaultedFilters: s,
      defaultedConfig: d,
      defaultedHighlight: u,
      propDates: f,
      defaultedUI: h
    } = da(r), { transitionName: g, showTransition: v } = Kf(i), { buildMatrix: w } = al(), { handleMonthYearChange: b, isDisabled: p, updateMonthYear: y } = Lq(r, a), { showLeftIcon: S, showRightIcon: E } = vp(), C = Se(!1), D = Se(!1), P = Se(!1), O = Se([null, null, null, null]);
    on(() => {
      a("mount");
    });
    const T = (X) => ({
      get: () => r[X],
      set: (he) => {
        const ve = X === Li.month ? Li.year : Li.month;
        a("update-month-year", { [X]: he, [ve]: r[ve] }), X === Li.month ? te(!0) : de(!0);
      }
    }), A = W(T(Li.month)), V = W(T(Li.year)), M = W(() => (X) => ({
      month: r.month,
      year: r.year,
      items: X === Li.month ? r.months : r.years,
      instance: r.instance,
      updateMonthYear: y,
      toggle: X === Li.month ? te : de
    })), B = W(() => r.months.find((he) => he.value === r.month) || { text: "", value: 0 }), N = W(() => Bu(r.months, (X) => {
      const he = r.month === X.value, ve = Cf(
        X.value,
        aE(r.year, f.value.minDate),
        rE(r.year, f.value.maxDate)
      ) || s.value.months.includes(X.value), pe = cE(u.value, X.value, r.year);
      return { active: he, disabled: ve, highlighted: pe };
    })), H = W(() => Bu(r.years, (X) => {
      const he = r.year === X.value, ve = Cf(
        X.value,
        Vu(f.value.minDate),
        Vu(f.value.maxDate)
      ) || s.value.years.includes(X.value), pe = _0(u.value, X.value);
      return { active: he, disabled: ve, highlighted: pe };
    })), j = (X, he, ve) => {
      ve !== void 0 ? X.value = ve : X.value = !X.value, X.value ? (P.value = !0, a("overlay-opened", he)) : (P.value = !1, a("overlay-closed", he));
    }, te = (X = !1, he) => {
      Z(X), j(C, br.month, he);
    }, de = (X = !1, he) => {
      Z(X), j(D, br.year, he);
    }, Z = (X) => {
      X || a("reset-flow");
    }, F = (X, he) => {
      r.arrowNavigation && (O.value[he] = $a(X), w(O.value, "monthYear"));
    }, K = W(() => {
      var X, he, ve, pe, z, ke;
      return [
        {
          type: Li.month,
          index: 1,
          toggle: te,
          modelValue: A.value,
          updateModelValue: (Me) => A.value = Me,
          text: B.value.text,
          showSelectionGrid: C.value,
          items: N.value,
          ariaLabel: (X = o.value) == null ? void 0 : X.openMonthsOverlay,
          overlayLabel: ((ve = (he = o.value).monthPicker) == null ? void 0 : ve.call(he, !0)) ?? void 0
        },
        {
          type: Li.year,
          index: 2,
          toggle: de,
          modelValue: V.value,
          updateModelValue: (Me) => V.value = Me,
          text: eE(r.year, r.locale),
          showSelectionGrid: D.value,
          items: H.value,
          ariaLabel: (pe = o.value) == null ? void 0 : pe.openYearsOverlay,
          overlayLabel: ((ke = (z = o.value).yearPicker) == null ? void 0 : ke.call(z, !0)) ?? void 0
        }
      ];
    }), se = W(() => r.disableYearSelect ? [K.value[0]] : r.yearFirst ? [...K.value].reverse() : K.value);
    return t({
      toggleMonthPicker: te,
      toggleYearPicker: de,
      handleMonthYearChange: b
    }), (X, he) => {
      var ve, pe, z, ke, Me, Le;
      return ee(), Oe("div", f6, [
        X.$slots["month-year"] ? (ee(), Oe("div", m6, [
          bt(X.$slots, "month-year", Jn(Ca({
            month: e.month,
            year: e.year,
            months: e.months,
            years: e.years,
            updateMonthYear: fe(y),
            handleMonthYearChange: fe(b),
            instance: e.instance,
            isDisabled: fe(p)
          })))
        ])) : (ee(), Oe(Qe, { key: 1 }, [
          X.$slots["top-extra"] ? (ee(), Oe("div", h6, [
            bt(X.$slots, "top-extra", { value: X.internalModelValue })
          ])) : ye("", !0),
          I("div", _6, [
            fe(S)(fe(l), e.instance) && !X.vertical ? (ee(), Re(rf, {
              key: 0,
              "aria-label": (ve = fe(o)) == null ? void 0 : ve.prevMonth,
              disabled: fe(p)(!1),
              class: Ie((pe = fe(h)) == null ? void 0 : pe.navBtnPrev),
              "el-name": "action-prev",
              onActivate: he[0] || (he[0] = (ce) => fe(b)(!1, !0)),
              onSetRef: he[1] || (he[1] = (ce) => F(ce, 0))
            }, {
              default: x(() => [
                X.$slots["arrow-left"] ? bt(X.$slots, "arrow-left", { key: 0 }) : ye("", !0),
                X.$slots["arrow-left"] ? ye("", !0) : (ee(), Re(fe(o0), { key: 1 }))
              ]),
              _: 3
            }, 8, ["aria-label", "disabled", "class"])) : ye("", !0),
            I("div", {
              class: Ie(["dp__month_year_wrap", {
                dp__year_disable_select: X.disableYearSelect
              }])
            }, [
              (ee(!0), Oe(Qe, null, rn(se.value, (ce, ne) => (ee(), Oe(Qe, {
                key: ce.type
              }, [
                I("button", {
                  ref_for: !0,
                  ref: (G) => F(G, ne + 1),
                  type: "button",
                  "data-dp-element": `overlay-${ce.type}`,
                  class: Ie(["dp__btn dp__month_year_select", { "dp--hidden-el": P.value }]),
                  "aria-label": `${ce.text}-${ce.ariaLabel}`,
                  "data-test-id": `${ce.type}-toggle-overlay-${e.instance}`,
                  onClick: ce.toggle,
                  onKeydown: (G) => fe(Lr)(G, () => ce.toggle(), !0)
                }, [
                  X.$slots[ce.type] ? bt(X.$slots, ce.type, {
                    key: 0,
                    text: ce.text,
                    value: r[ce.type]
                  }) : ye("", !0),
                  X.$slots[ce.type] ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
                    ae(q(ce.text), 1)
                  ], 64))
                ], 42, p6),
                _(Ur, {
                  name: fe(g)(ce.showSelectionGrid),
                  css: fe(v)
                }, {
                  default: x(() => [
                    ce.showSelectionGrid ? (ee(), Re(jf, {
                      key: 0,
                      items: ce.items,
                      "arrow-navigation": X.arrowNavigation,
                      "hide-navigation": X.hideNavigation,
                      "is-last": X.autoApply && !fe(d).keepActionRow,
                      "skip-button-ref": !1,
                      config: X.config,
                      type: ce.type,
                      "header-refs": [],
                      "esc-close": X.escClose,
                      "menu-wrap-ref": X.menuWrapRef,
                      "text-input": X.textInput,
                      "aria-labels": X.ariaLabels,
                      "overlay-label": ce.overlayLabel,
                      onSelected: ce.updateModelValue,
                      onToggle: ce.toggle
                    }, dr({
                      "button-icon": x(() => [
                        X.$slots["calendar-icon"] ? bt(X.$slots, "calendar-icon", { key: 0 }) : ye("", !0),
                        X.$slots["calendar-icon"] ? ye("", !0) : (ee(), Re(fe(Gu), { key: 1 }))
                      ]),
                      _: 2
                    }, [
                      X.$slots[`${ce.type}-overlay-value`] ? {
                        name: "item",
                        fn: x(({ item: G }) => [
                          bt(X.$slots, `${ce.type}-overlay-value`, {
                            text: G.text,
                            value: G.value
                          })
                        ]),
                        key: "0"
                      } : void 0,
                      X.$slots[`${ce.type}-overlay`] ? {
                        name: "overlay",
                        fn: x(() => [
                          bt(X.$slots, `${ce.type}-overlay`, He({ ref_for: !0 }, M.value(ce.type)))
                        ]),
                        key: "1"
                      } : void 0,
                      X.$slots[`${ce.type}-overlay-header`] ? {
                        name: "header",
                        fn: x(() => [
                          bt(X.$slots, `${ce.type}-overlay-header`, {
                            toggle: ce.toggle
                          })
                        ]),
                        key: "2"
                      } : void 0
                    ]), 1032, ["items", "arrow-navigation", "hide-navigation", "is-last", "config", "type", "esc-close", "menu-wrap-ref", "text-input", "aria-labels", "overlay-label", "onSelected", "onToggle"])) : ye("", !0)
                  ]),
                  _: 2
                }, 1032, ["name", "css"])
              ], 64))), 128))
            ], 2),
            fe(S)(fe(l), e.instance) && X.vertical ? (ee(), Re(rf, {
              key: 1,
              "aria-label": (z = fe(o)) == null ? void 0 : z.prevMonth,
              "el-name": "action-prev",
              disabled: fe(p)(!1),
              class: Ie((ke = fe(h)) == null ? void 0 : ke.navBtnPrev),
              onActivate: he[2] || (he[2] = (ce) => fe(b)(!1, !0))
            }, {
              default: x(() => [
                X.$slots["arrow-up"] ? bt(X.$slots, "arrow-up", { key: 0 }) : ye("", !0),
                X.$slots["arrow-up"] ? ye("", !0) : (ee(), Re(fe(c0), { key: 1 }))
              ]),
              _: 3
            }, 8, ["aria-label", "disabled", "class"])) : ye("", !0),
            fe(E)(fe(l), e.instance) ? (ee(), Re(rf, {
              key: 2,
              ref: "rightIcon",
              "el-name": "action-next",
              disabled: fe(p)(!0),
              "aria-label": (Me = fe(o)) == null ? void 0 : Me.nextMonth,
              class: Ie((Le = fe(h)) == null ? void 0 : Le.navBtnNext),
              onActivate: he[3] || (he[3] = (ce) => fe(b)(!0, !0)),
              onSetRef: he[4] || (he[4] = (ce) => F(ce, X.disableYearSelect ? 2 : 3))
            }, {
              default: x(() => [
                X.$slots[X.vertical ? "arrow-down" : "arrow-right"] ? bt(X.$slots, X.vertical ? "arrow-down" : "arrow-right", { key: 0 }) : ye("", !0),
                X.$slots[X.vertical ? "arrow-down" : "arrow-right"] ? ye("", !0) : (ee(), Re(Hu(X.vertical ? fe(u0) : fe(s0)), { key: 1 }))
              ]),
              _: 3
            }, 8, ["disabled", "aria-label", "class"])) : ye("", !0)
          ])
        ], 64))
      ]);
    };
  }
}), g6 = {
  class: "dp__calendar_header",
  role: "row"
}, y6 = {
  key: 0,
  class: "dp__calendar_header_item",
  role: "gridcell"
}, b6 = ["aria-label"], w6 = {
  key: 0,
  class: "dp__calendar_item dp__week_num",
  role: "gridcell"
}, k6 = { class: "dp__cell_inner" }, S6 = ["id", "aria-pressed", "aria-disabled", "aria-label", "tabindex", "data-test-id", "onClick", "onTouchend", "onKeydown", "onMouseenter", "onMouseleave", "onMousedown"], C6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DpCalendar",
  props: {
    mappedDates: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    ...Yi
  },
  emits: [
    "select-date",
    "set-hover-date",
    "handle-scroll",
    "mount",
    "handle-swipe",
    "handle-space",
    "tooltip-open",
    "tooltip-close"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { buildMultiLevelMatrix: i } = al(), {
      defaultedTransitions: o,
      defaultedConfig: l,
      defaultedAriaLabels: s,
      defaultedMultiCalendars: d,
      defaultedWeekNumbers: u,
      defaultedMultiDates: f,
      defaultedUI: h
    } = da(r), g = Se(null), v = Se({
      bottom: "",
      left: "",
      transform: ""
    }), w = Se([]), b = Se(null), p = Se(!0), y = Se(""), S = Se({ startX: 0, endX: 0, startY: 0, endY: 0 }), E = Se([]), C = Se({ left: "50%" }), D = Se(!1), P = W(() => r.calendar ? r.calendar(r.mappedDates) : r.mappedDates), O = W(() => r.dayNames ? Array.isArray(r.dayNames) ? r.dayNames : r.dayNames(r.locale, +r.weekStart) : aq(r.formatLocale, r.locale, +r.weekStart));
    on(() => {
      a("mount", { cmp: "calendar", refs: w }), l.value.noSwipe || b.value && (b.value.addEventListener("touchstart", F, { passive: !1 }), b.value.addEventListener("touchend", K, { passive: !1 }), b.value.addEventListener("touchmove", se, { passive: !1 })), r.monthChangeOnScroll && b.value && b.value.addEventListener("wheel", ve, { passive: !1 });
    }), di(() => {
      l.value.noSwipe || b.value && (b.value.removeEventListener("touchstart", F), b.value.removeEventListener("touchend", K), b.value.removeEventListener("touchmove", se)), r.monthChangeOnScroll && b.value && b.value.removeEventListener("wheel", ve);
    });
    const T = (ce) => ce ? r.vertical ? "vNext" : "next" : r.vertical ? "vPrevious" : "previous", A = (ce, ne) => {
      if (r.transitions) {
        const G = rr(Yo(ut(), r.month, r.year));
        y.value = Oa(rr(Yo(ut(), ce, ne)), G) ? o.value[T(!0)] : o.value[T(!1)], p.value = !1, Vt(() => {
          p.value = !0;
        });
      }
    }, V = W(
      () => ({
        ...h.value.calendar ?? {}
      })
    ), M = W(() => (ce) => {
      const ne = iq(ce);
      return {
        dp__marker_dot: ne.type === "dot",
        dp__marker_line: ne.type === "line"
      };
    }), B = W(() => (ce) => mn(ce, g.value)), N = W(() => ({
      dp__calendar: !0,
      dp__calendar_next: d.value.count > 0 && r.instance !== 0
    })), H = W(() => (ce) => r.hideOffsetDates ? ce.current : !0), j = async (ce, ne) => {
      const { width: G, height: le } = ce.getBoundingClientRect();
      g.value = ne.value;
      let Y = { left: `${G / 2}px` }, Ce = -50;
      if (await Vt(), E.value[0]) {
        const { left: Te, width: ie } = E.value[0].getBoundingClientRect();
        Te < 0 && (Y = { left: "0" }, Ce = 0, C.value.left = `${G / 2}px`), window.innerWidth < Te + ie && (Y = { right: "0" }, Ce = 0, C.value.left = `${ie - G / 2}px`);
      }
      v.value = {
        bottom: `${le}px`,
        ...Y,
        transform: `translateX(${Ce}%)`
      };
    }, te = async (ce, ne, G) => {
      var le, Y, Ce;
      const Te = $a(w.value[ne][G]);
      Te && ((le = ce.marker) != null && le.customPosition && (Ce = (Y = ce.marker) == null ? void 0 : Y.tooltip) != null && Ce.length ? v.value = ce.marker.customPosition(Te) : await j(Te, ce), a("tooltip-open", ce.marker));
    }, de = async (ce, ne, G) => {
      var le, Y;
      if (D.value && f.value.enabled && f.value.dragSelect)
        return a("select-date", ce);
      if (a("set-hover-date", ce), (Y = (le = ce.marker) == null ? void 0 : le.tooltip) != null && Y.length) {
        if (r.hideOffsetDates && !ce.current) return;
        await te(ce, ne, G);
      }
    }, Z = (ce) => {
      g.value && (g.value = null, v.value = JSON.parse(JSON.stringify({ bottom: "", left: "", transform: "" })), a("tooltip-close", ce.marker));
    }, F = (ce) => {
      S.value.startX = ce.changedTouches[0].screenX, S.value.startY = ce.changedTouches[0].screenY;
    }, K = (ce) => {
      S.value.endX = ce.changedTouches[0].screenX, S.value.endY = ce.changedTouches[0].screenY, X();
    }, se = (ce) => {
      r.vertical && !r.inline && ce.preventDefault();
    }, X = () => {
      const ce = r.vertical ? "Y" : "X";
      Math.abs(S.value[`start${ce}`] - S.value[`end${ce}`]) > 10 && a("handle-swipe", S.value[`start${ce}`] > S.value[`end${ce}`] ? "right" : "left");
    }, he = (ce, ne, G) => {
      ce && (Array.isArray(w.value[ne]) ? w.value[ne][G] = ce : w.value[ne] = [ce]), r.arrowNavigation && i(w.value, "calendar");
    }, ve = (ce) => {
      r.monthChangeOnScroll && (ce.preventDefault(), a("handle-scroll", ce));
    }, pe = (ce) => u.value.type === "local" ? a0(ce.value, { weekStartsOn: +r.weekStart }) : u.value.type === "iso" ? t0(ce.value) : typeof u.value.type == "function" ? u.value.type(ce.value) : "", z = (ce) => {
      const ne = ce[0];
      return u.value.hideOnOffsetDates ? ce.some((G) => G.current) ? pe(ne) : "" : pe(ne);
    }, ke = (ce, ne, G = !0) => {
      !G && uq() || (!f.value.enabled || l.value.allowPreventDefault) && (Ns(ce, l.value), a("select-date", ne));
    }, Me = (ce) => {
      Ns(ce, l.value);
    }, Le = (ce) => {
      f.value.enabled && f.value.dragSelect ? (D.value = !0, a("select-date", ce)) : f.value.enabled && a("select-date", ce);
    };
    return t({ triggerTransition: A }), (ce, ne) => (ee(), Oe("div", {
      class: Ie(N.value)
    }, [
      I("div", {
        ref_key: "calendarWrapRef",
        ref: b,
        class: Ie(V.value),
        role: "grid"
      }, [
        I("div", g6, [
          ce.weekNumbers ? (ee(), Oe("div", y6, q(ce.weekNumName), 1)) : ye("", !0),
          (ee(!0), Oe(Qe, null, rn(O.value, (G, le) => {
            var Y, Ce;
            return ee(), Oe("div", {
              key: le,
              class: "dp__calendar_header_item",
              role: "gridcell",
              "data-test-id": "calendar-header",
              "aria-label": (Ce = (Y = fe(s)) == null ? void 0 : Y.weekDay) == null ? void 0 : Ce.call(Y, le)
            }, [
              ce.$slots["calendar-header"] ? bt(ce.$slots, "calendar-header", {
                key: 0,
                day: G,
                index: le
              }) : ye("", !0),
              ce.$slots["calendar-header"] ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
                ae(q(G), 1)
              ], 64))
            ], 8, b6);
          }), 128))
        ]),
        ne[2] || (ne[2] = I("div", { class: "dp__calendar_header_separator" }, null, -1)),
        _(Ur, {
          name: y.value,
          css: !!ce.transitions
        }, {
          default: x(() => [
            p.value ? (ee(), Oe("div", {
              key: 0,
              class: "dp__calendar",
              role: "rowgroup",
              onMouseleave: ne[1] || (ne[1] = (G) => D.value = !1)
            }, [
              (ee(!0), Oe(Qe, null, rn(P.value, (G, le) => (ee(), Oe("div", {
                key: le,
                class: "dp__calendar_row",
                role: "row"
              }, [
                ce.weekNumbers ? (ee(), Oe("div", w6, [
                  I("div", k6, q(z(G.days)), 1)
                ])) : ye("", !0),
                (ee(!0), Oe(Qe, null, rn(G.days, (Y, Ce) => {
                  var Te, ie, ge;
                  return ee(), Oe("div", {
                    id: fe(yb)(Y.value),
                    ref_for: !0,
                    ref: (Pe) => he(Pe, le, Ce),
                    key: Ce + le,
                    role: "gridcell",
                    class: "dp__calendar_item",
                    "aria-pressed": (Y.classData.dp__active_date || Y.classData.dp__range_start || Y.classData.dp__range_start) ?? void 0,
                    "aria-disabled": Y.classData.dp__cell_disabled || void 0,
                    "aria-label": (ie = (Te = fe(s)) == null ? void 0 : Te.day) == null ? void 0 : ie.call(Te, Y),
                    tabindex: !Y.current && ce.hideOffsetDates ? void 0 : 0,
                    "data-test-id": fe(yb)(Y.value),
                    onClick: ia((Pe) => ke(Pe, Y), ["prevent"]),
                    onTouchend: (Pe) => ke(Pe, Y, !1),
                    onKeydown: (Pe) => fe(Lr)(Pe, () => ce.$emit("select-date", Y)),
                    onMouseenter: (Pe) => de(Y, le, Ce),
                    onMouseleave: (Pe) => Z(Y),
                    onMousedown: (Pe) => Le(Y),
                    onMouseup: ne[0] || (ne[0] = (Pe) => D.value = !1)
                  }, [
                    I("div", {
                      class: Ie(["dp__cell_inner", Y.classData])
                    }, [
                      ce.$slots.day && H.value(Y) ? bt(ce.$slots, "day", {
                        key: 0,
                        day: +Y.text,
                        date: Y.value
                      }) : ye("", !0),
                      ce.$slots.day ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
                        ae(q(Y.text), 1)
                      ], 64)),
                      Y.marker && H.value(Y) ? (ee(), Oe(Qe, { key: 2 }, [
                        ce.$slots.marker ? bt(ce.$slots, "marker", {
                          key: 0,
                          marker: Y.marker,
                          day: +Y.text,
                          date: Y.value
                        }) : (ee(), Oe("div", {
                          key: 1,
                          class: Ie(M.value(Y.marker)),
                          style: Xe(Y.marker.color ? { backgroundColor: Y.marker.color } : {})
                        }, null, 6))
                      ], 64)) : ye("", !0),
                      B.value(Y.value) ? (ee(), Oe("div", {
                        key: 3,
                        ref_for: !0,
                        ref_key: "activeTooltip",
                        ref: E,
                        class: "dp__marker_tooltip",
                        style: Xe(v.value)
                      }, [
                        (ge = Y.marker) != null && ge.tooltip ? (ee(), Oe("div", {
                          key: 0,
                          class: "dp__tooltip_content",
                          onClick: Me
                        }, [
                          (ee(!0), Oe(Qe, null, rn(Y.marker.tooltip, (Pe, Ee) => (ee(), Oe("div", {
                            key: Ee,
                            class: "dp__tooltip_text"
                          }, [
                            ce.$slots["marker-tooltip"] ? bt(ce.$slots, "marker-tooltip", {
                              key: 0,
                              tooltip: Pe,
                              day: Y.value
                            }) : ye("", !0),
                            ce.$slots["marker-tooltip"] ? ye("", !0) : (ee(), Oe(Qe, { key: 1 }, [
                              I("div", {
                                class: "dp__tooltip_mark",
                                style: Xe(Pe.color ? { backgroundColor: Pe.color } : {})
                              }, null, 4),
                              I("div", null, q(Pe.text), 1)
                            ], 64))
                          ]))), 128)),
                          I("div", {
                            class: "dp__arrow_bottom_tp",
                            style: Xe(C.value)
                          }, null, 4)
                        ])) : ye("", !0)
                      ], 4)) : ye("", !0)
                    ], 2)
                  ], 40, S6);
                }), 128))
              ]))), 128))
            ], 32)) : ye("", !0)
          ]),
          _: 3
        }, 8, ["name", "css"])
      ], 2)
    ], 2));
  }
}), KC = (e) => Array.isArray(e), A6 = (e, t, n, a) => {
  const r = Se([]), i = Se(/* @__PURE__ */ new Date()), o = Se(), l = () => K(e.isTextInputDate), { modelValue: s, calendars: d, time: u, today: f } = Yf(e, t, l), {
    defaultedMultiCalendars: h,
    defaultedStartTime: g,
    defaultedRange: v,
    defaultedConfig: w,
    defaultedTz: b,
    propDates: p,
    defaultedMultiDates: y
  } = da(e), { validateMonthYearInRange: S, isDisabled: E, isDateRangeAllowed: C, checkMinMaxRange: D } = rl(e), { updateTimeValues: P, getSetDateTime: O, setTime: T, assignStartTime: A, validateTime: V, disabledTimesConfig: M } = pE(e, u, s, a), B = W(
    () => (xe) => d.value[xe] ? d.value[xe].month : 0
  ), N = W(
    () => (xe) => d.value[xe] ? d.value[xe].year : 0
  ), H = (xe) => !w.value.keepViewOnOffsetClick || xe ? !0 : !o.value, j = (xe, ze, ft, it = !1) => {
    var je, st;
    H(it) && (d.value[xe] || (d.value[xe] = { month: 0, year: 0 }), d.value[xe].month = $C(ze) ? (je = d.value[xe]) == null ? void 0 : je.month : ze, d.value[xe].year = $C(ft) ? (st = d.value[xe]) == null ? void 0 : st.year : ft);
  }, te = () => {
    e.autoApply && t("select-date");
  }, de = () => {
    g.value && A(g.value);
  };
  on(() => {
    e.shadow || (s.value || (ne(), de()), K(!0), e.focusStartDate && e.startDate && ne());
  });
  const Z = W(() => {
    var xe;
    return (xe = e.flow) != null && xe.length && !e.partialFlow ? e.flowStep === e.flow.length : !0;
  }), F = () => {
    e.autoApply && Z.value && t("auto-apply", e.partialFlow ? e.flowStep !== e.flow.length : !1);
  }, K = (xe = !1) => {
    if (s.value)
      return Array.isArray(s.value) ? (r.value = s.value, ke(xe)) : he(s.value, xe);
    if (h.value.count && xe && !e.startDate)
      return X(ut(), xe);
  }, se = () => Array.isArray(s.value) && v.value.enabled ? fn(s.value[0]) === fn(s.value[1] ?? s.value[0]) : !1, X = (xe = /* @__PURE__ */ new Date(), ze = !1) => {
    if ((!h.value.count || !h.value.static || ze) && j(0, fn(xe), Kt(xe)), h.value.count && (!s.value || se() || !h.value.solo) && (!h.value.solo || ze))
      for (let ft = 1; ft < h.value.count; ft++) {
        const it = Bn(ut(), { month: B.value(ft - 1), year: N.value(ft - 1) }), je = EI(it, { months: 1 });
        d.value[ft] = { month: fn(je), year: Kt(je) };
      }
  }, he = (xe, ze) => {
    X(xe), T("hours", ts(xe)), T("minutes", Ys(xe)), T("seconds", Pu(xe)), h.value.count && ze && ce();
  }, ve = (xe) => {
    if (h.value.count) {
      if (h.value.solo) return 0;
      const ze = fn(xe[0]), ft = fn(xe[1]);
      return Math.abs(ft - ze) < h.value.count ? 0 : 1;
    }
    return 1;
  }, pe = (xe, ze) => {
    xe[1] && v.value.showLastInRange ? X(xe[ve(xe)], ze) : X(xe[0], ze);
    const ft = (it, je) => [
      it(xe[0]),
      xe[1] ? it(xe[1]) : u[je][1]
    ];
    T("hours", ft(ts, "hours")), T("minutes", ft(Ys, "minutes")), T("seconds", ft(Pu, "seconds"));
  }, z = (xe, ze) => {
    if ((v.value.enabled || e.weekPicker) && !y.value.enabled)
      return pe(xe, ze);
    if (y.value.enabled && ze) {
      const ft = xe[xe.length - 1];
      return he(ft, ze);
    }
  }, ke = (xe) => {
    const ze = s.value;
    z(ze, xe), h.value.count && h.value.solo && ce();
  }, Me = (xe, ze) => {
    const ft = Bn(ut(), { month: B.value(ze), year: N.value(ze) }), it = xe < 0 ? Hi(ft, 1) : Du(ft, 1);
    S(fn(it), Kt(it), xe < 0, e.preventMinMaxNavigation) && (j(ze, fn(it), Kt(it)), t("update-month-year", { instance: ze, month: fn(it), year: Kt(it) }), h.value.count && !h.value.solo && Le(ze), n());
  }, Le = (xe) => {
    for (let ze = xe - 1; ze >= 0; ze--) {
      const ft = Du(Bn(ut(), { month: B.value(ze + 1), year: N.value(ze + 1) }), 1);
      j(ze, fn(ft), Kt(ft));
    }
    for (let ze = xe + 1; ze <= h.value.count - 1; ze++) {
      const ft = Hi(Bn(ut(), { month: B.value(ze - 1), year: N.value(ze - 1) }), 1);
      j(ze, fn(ft), Kt(ft));
    }
  }, ce = () => {
    if (Array.isArray(s.value) && s.value.length === 2) {
      const xe = ut(
        ut(s.value[1] ? s.value[1] : Hi(s.value[0], 1))
      ), [ze, ft] = [fn(s.value[0]), Kt(s.value[0])], [it, je] = [fn(s.value[1]), Kt(s.value[1])];
      (ze !== it || ze === it && ft !== je) && h.value.solo && j(1, fn(xe), Kt(xe));
    } else s.value && !Array.isArray(s.value) && (j(0, fn(s.value), Kt(s.value)), X(ut()));
  }, ne = () => {
    e.startDate && (j(0, fn(ut(e.startDate)), Kt(ut(e.startDate))), h.value.count && Le(0));
  }, G = (xe, ze) => {
    if (e.monthChangeOnScroll) {
      const ft = (/* @__PURE__ */ new Date()).getTime() - i.value.getTime(), it = Math.abs(xe.deltaY);
      let je = 500;
      it > 1 && (je = 100), it > 100 && (je = 0), ft > je && (i.value = /* @__PURE__ */ new Date(), Me(e.monthChangeOnScroll !== "inverse" ? -xe.deltaY : xe.deltaY, ze));
    }
  }, le = (xe, ze, ft = !1) => {
    e.monthChangeOnArrows && e.vertical === ft && Y(xe, ze);
  }, Y = (xe, ze) => {
    Me(xe === "right" ? -1 : 1, ze);
  }, Ce = (xe) => {
    if (p.value.markers)
      return F_(xe.value, p.value.markers);
  }, Te = (xe, ze) => {
    switch (e.sixWeeks === !0 ? "append" : e.sixWeeks) {
      case "prepend":
        return [!0, !1];
      case "center":
        return [xe == 0, !0];
      case "fair":
        return [xe == 0 || ze > xe, !0];
      case "append":
        return [!1, !1];
      default:
        return [!1, !1];
    }
  }, ie = (xe, ze, ft, it) => {
    if (e.sixWeeks && xe.length < 6) {
      const je = 6 - xe.length, st = (ze.getDay() + 7 - it) % 7, pt = 6 - (ft.getDay() + 7 - it) % 7, [xa, Ua] = Te(st, pt);
      for (let _r = 1; _r <= je; _r++)
        if (Ua ? !!(_r % 2) == xa : xa) {
          const Wa = xe[0].days[0], Qi = ge(Ti(Wa.value, -7), fn(ze));
          xe.unshift({ days: Qi });
        } else {
          const Wa = xe[xe.length - 1], Qi = Wa.days[Wa.days.length - 1], sl = ge(Ti(Qi.value, 1), fn(ze));
          xe.push({ days: sl });
        }
    }
    return xe;
  }, ge = (xe, ze) => {
    const ft = ut(xe), it = [];
    for (let je = 0; je < 7; je++) {
      const st = Ti(ft, je), pt = fn(st) !== ze;
      it.push({
        text: e.hideOffsetDates && pt ? "" : st.getDate(),
        value: st,
        current: !pt,
        classData: {}
      });
    }
    return it;
  }, Pe = (xe, ze) => {
    const ft = [], it = new Date(ze, xe), je = new Date(ze, xe + 1, 0), st = e.weekStart, pt = Ki(it, { weekStartsOn: st }), xa = (Ua) => {
      const _r = ge(Ua, xe);
      if (ft.push({ days: _r }), !ft[ft.length - 1].days.some(
        (Wa) => mn(rr(Wa.value), rr(je))
      )) {
        const Wa = Ti(Ua, 7);
        xa(Wa);
      }
    };
    return xa(pt), ie(ft, it, je, st);
  }, Ee = (xe) => {
    const ze = Us(ut(xe.value), u.hours, u.minutes, rt());
    t("date-update", ze), y.value.enabled ? p0(ze, s, y.value.limit) : s.value = ze, a(), Vt().then(() => {
      F();
    });
  }, Je = (xe) => v.value.noDisabledRange ? iE(r.value[0], xe).some((ze) => E(ze)) : !1, _e = () => {
    r.value = s.value ? s.value.slice() : [], r.value.length === 2 && !(v.value.fixedStart || v.value.fixedEnd) && (r.value = []);
  }, $e = (xe, ze) => {
    const ft = [
      ut(xe.value),
      Ti(ut(xe.value), +v.value.autoRange)
    ];
    C(ft) ? (ze && Ze(xe.value), r.value = ft) : t("invalid-date", xe.value);
  }, Ze = (xe) => {
    const ze = fn(ut(xe)), ft = Kt(ut(xe));
    if (j(0, ze, ft), h.value.count > 0)
      for (let it = 1; it < h.value.count; it++) {
        const je = mq(
          Bn(ut(xe), { year: N.value(it - 1), month: B.value(it - 1) })
        );
        j(it, je.month, je.year);
      }
  }, _t = (xe) => {
    if (Je(xe.value) || !D(xe.value, s.value, v.value.fixedStart ? 0 : 1))
      return t("invalid-date", xe.value);
    r.value = mE(ut(xe.value), s, t, v);
  }, It = (xe, ze) => {
    if (_e(), v.value.autoRange) return $e(xe, ze);
    if (v.value.fixedStart || v.value.fixedEnd) return _t(xe);
    r.value[0] ? D(ut(xe.value), s.value) && !Je(xe.value) ? Sa(ut(xe.value), ut(r.value[0])) ? (r.value.unshift(ut(xe.value)), t("range-end", r.value[0])) : (r.value[1] = ut(xe.value), t("range-end", r.value[1])) : (e.autoApply && t("auto-apply-invalid", xe.value), t("invalid-date", xe.value)) : (r.value[0] = ut(xe.value), t("range-start", r.value[0]));
  }, rt = (xe = !0) => e.enableSeconds ? Array.isArray(u.seconds) ? xe ? u.seconds[0] : u.seconds[1] : u.seconds : 0, Dt = (xe) => {
    r.value[xe] = Us(
      r.value[xe],
      u.hours[xe],
      u.minutes[xe],
      rt(xe !== 1)
    );
  }, en = () => {
    var xe, ze;
    r.value[0] && r.value[1] && +((xe = r.value) == null ? void 0 : xe[0]) > +((ze = r.value) == null ? void 0 : ze[1]) && (r.value.reverse(), t("range-start", r.value[0]), t("range-end", r.value[1]));
  }, zn = () => {
    r.value.length && (r.value[0] && !r.value[1] ? Dt(0) : (Dt(0), Dt(1), a()), en(), s.value = r.value.slice(), pp(r.value, t, e.autoApply, e.modelAuto));
  }, ta = (xe, ze = !1) => {
    if (E(xe.value) || !xe.current && e.hideOffsetDates) return t("invalid-date", xe.value);
    if (o.value = JSON.parse(JSON.stringify(xe)), !v.value.enabled) return Ee(xe);
    KC(u.hours) && KC(u.minutes) && !y.value.enabled && (It(xe, ze), zn());
  }, Na = (xe, ze) => {
    var ft;
    j(xe, ze.month, ze.year, !0), h.value.count && !h.value.solo && Le(xe), t("update-month-year", { instance: xe, month: ze.month, year: ze.year }), n(h.value.solo ? xe : void 0);
    const it = (ft = e.flow) != null && ft.length ? e.flow[e.flowStep] : void 0;
    !ze.fromNav && (it === br.month || it === br.year) && a();
  }, ba = (xe, ze) => {
    fE({
      value: xe,
      modelValue: s,
      range: v.value.enabled,
      timezone: ze ? void 0 : b.value.timezone
    }), te(), e.multiCalendars && Vt().then(() => K(!0));
  }, Wn = () => {
    const xe = d0(ut(), b.value);
    !v.value.enabled && !y.value.enabled ? s.value = xe : s.value && Array.isArray(s.value) && s.value[0] ? y.value.enabled ? s.value = [...s.value, xe] : s.value = Sa(xe, s.value[0]) ? [xe, s.value[0]] : [s.value[0], xe] : s.value = [xe], te();
  }, Vn = () => {
    if (Array.isArray(s.value))
      if (y.value.enabled) {
        const xe = Ja();
        s.value[s.value.length - 1] = O(xe);
      } else
        s.value = s.value.map((xe, ze) => xe && O(xe, ze));
    else
      s.value = O(s.value);
    t("time-update");
  }, Ja = () => Array.isArray(s.value) && s.value.length ? s.value[s.value.length - 1] : null;
  return {
    calendars: d,
    modelValue: s,
    month: B,
    year: N,
    time: u,
    disabledTimesConfig: M,
    today: f,
    validateTime: V,
    getCalendarDays: Pe,
    getMarker: Ce,
    handleScroll: G,
    handleSwipe: Y,
    handleArrow: le,
    selectDate: ta,
    updateMonthYear: Na,
    presetDate: ba,
    selectCurrentDate: Wn,
    updateTime: (xe, ze = !0, ft = !1) => {
      P(xe, ze, ft, Vn);
    },
    assignMonthAndYear: X,
    setStartTime: de
  };
}, x6 = { key: 0 }, T6 = /* @__PURE__ */ Ha({
  __name: "DatePicker",
  props: {
    ...Yi
  },
  emits: [
    "tooltip-open",
    "tooltip-close",
    "mount",
    "update:internal-model-value",
    "update-flow-step",
    "reset-flow",
    "auto-apply",
    "focus-menu",
    "select-date",
    "range-start",
    "range-end",
    "invalid-fixed-range",
    "time-update",
    "am-pm-change",
    "time-picker-open",
    "time-picker-close",
    "recalculate-position",
    "update-month-year",
    "auto-apply-invalid",
    "date-update",
    "invalid-date",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      calendars: i,
      month: o,
      year: l,
      modelValue: s,
      time: d,
      disabledTimesConfig: u,
      today: f,
      validateTime: h,
      getCalendarDays: g,
      getMarker: v,
      handleArrow: w,
      handleScroll: b,
      handleSwipe: p,
      selectDate: y,
      updateMonthYear: S,
      presetDate: E,
      selectCurrentDate: C,
      updateTime: D,
      assignMonthAndYear: P,
      setStartTime: O
    } = A6(r, a, se, X), T = lc(), { setHoverDate: A, getDayClassData: V, clearHoverDate: M } = z6(s, r), { defaultedMultiCalendars: B } = da(r), N = Se([]), H = Se([]), j = Se(null), te = li(T, "calendar"), de = li(T, "monthYear"), Z = li(T, "timePicker"), F = (G) => {
      r.shadow || a("mount", G);
    };
    nt(
      i,
      () => {
        r.shadow || setTimeout(() => {
          a("recalculate-position");
        }, 0);
      },
      { deep: !0 }
    ), nt(
      B,
      (G, le) => {
        G.count - le.count > 0 && P();
      },
      { deep: !0 }
    );
    const K = W(() => (G) => g(o.value(G), l.value(G)).map((le) => ({
      ...le,
      days: le.days.map((Y) => (Y.marker = v(Y), Y.classData = V(Y), Y))
    })));
    function se(G) {
      var le;
      G || G === 0 ? (le = H.value[G]) == null || le.triggerTransition(o.value(G), l.value(G)) : H.value.forEach((Y, Ce) => Y.triggerTransition(o.value(Ce), l.value(Ce)));
    }
    function X() {
      a("update-flow-step");
    }
    const he = (G, le = !1) => {
      y(G, le), r.spaceConfirm && a("select-date");
    }, ve = (G, le, Y = 0) => {
      var Ce;
      (Ce = N.value[Y]) == null || Ce.toggleMonthPicker(G, le);
    }, pe = (G, le, Y = 0) => {
      var Ce;
      (Ce = N.value[Y]) == null || Ce.toggleYearPicker(G, le);
    }, z = (G, le, Y) => {
      var Ce;
      (Ce = j.value) == null || Ce.toggleTimePicker(G, le, Y);
    }, ke = (G, le) => {
      var Y;
      if (!r.range) {
        const Ce = s.value ? s.value : f, Te = le ? new Date(le) : Ce, ie = G ? Ki(Te, { weekStartsOn: 1 }) : RI(Te, { weekStartsOn: 1 });
        y({
          value: ie,
          current: fn(Te) === o.value(0),
          text: "",
          classData: {}
        }), (Y = document.getElementById(yb(ie))) == null || Y.focus();
      }
    }, Me = (G) => {
      var le;
      (le = N.value[0]) == null || le.handleMonthYearChange(G, !0);
    }, Le = (G) => {
      S(0, { month: o.value(0), year: l.value(0) + (G ? 1 : -1), fromNav: !0 });
    }, ce = (G, le) => {
      G === br.time && a(`time-picker-${le ? "open" : "close"}`), a("overlay-toggle", { open: le, overlay: G });
    }, ne = (G) => {
      a("overlay-toggle", { open: !1, overlay: G }), a("focus-menu");
    };
    return t({
      clearHoverDate: M,
      presetDate: E,
      selectCurrentDate: C,
      toggleMonthPicker: ve,
      toggleYearPicker: pe,
      toggleTimePicker: z,
      handleArrow: w,
      updateMonthYear: S,
      getSidebarProps: () => ({
        modelValue: s,
        month: o,
        year: l,
        time: d,
        updateTime: D,
        updateMonthYear: S,
        selectDate: y,
        presetDate: E
      }),
      changeMonth: Me,
      changeYear: Le,
      selectWeekDate: ke,
      setStartTime: O
    }), (G, le) => (ee(), Oe(Qe, null, [
      _(_p, {
        "multi-calendars": fe(B).count,
        collapse: G.collapse,
        "is-mobile": G.isMobile
      }, {
        default: x(({ instance: Y, index: Ce }) => [
          G.disableMonthYearSelect ? ye("", !0) : (ee(), Re(v6, He({
            key: 0,
            ref: (Te) => {
              Te && (N.value[Ce] = Te);
            },
            months: fe(JI)(G.formatLocale, G.locale, G.monthNameFormat),
            years: fe(f0)(G.yearRange, G.locale, G.reverseYears),
            month: fe(o)(Y),
            year: fe(l)(Y),
            instance: Y
          }, G.$props, {
            onMount: le[0] || (le[0] = (Te) => F(fe(Kl).header)),
            onResetFlow: le[1] || (le[1] = (Te) => G.$emit("reset-flow")),
            onUpdateMonthYear: (Te) => fe(S)(Y, Te),
            onOverlayClosed: ne,
            onOverlayOpened: le[2] || (le[2] = (Te) => G.$emit("overlay-toggle", { open: !0, overlay: Te }))
          }), dr({ _: 2 }, [
            rn(fe(de), (Te, ie) => ({
              name: Te,
              fn: x((ge) => [
                bt(G.$slots, Te, Jn(Ca(ge)))
              ])
            }))
          ]), 1040, ["months", "years", "month", "year", "instance", "onUpdateMonthYear"])),
          _(C6, He({
            ref: (Te) => {
              Te && (H.value[Ce] = Te);
            },
            "mapped-dates": K.value(Y),
            month: fe(o)(Y),
            year: fe(l)(Y),
            instance: Y
          }, G.$props, {
            onSelectDate: (Te) => fe(y)(Te, Y !== 1),
            onHandleSpace: (Te) => he(Te, Y !== 1),
            onSetHoverDate: le[3] || (le[3] = (Te) => fe(A)(Te)),
            onHandleScroll: (Te) => fe(b)(Te, Y),
            onHandleSwipe: (Te) => fe(p)(Te, Y),
            onMount: le[4] || (le[4] = (Te) => F(fe(Kl).calendar)),
            onResetFlow: le[5] || (le[5] = (Te) => G.$emit("reset-flow")),
            onTooltipOpen: le[6] || (le[6] = (Te) => G.$emit("tooltip-open", Te)),
            onTooltipClose: le[7] || (le[7] = (Te) => G.$emit("tooltip-close", Te))
          }), dr({ _: 2 }, [
            rn(fe(te), (Te, ie) => ({
              name: Te,
              fn: x((ge) => [
                bt(G.$slots, Te, Jn(Ca({ ...ge })))
              ])
            }))
          ]), 1040, ["mapped-dates", "month", "year", "instance", "onSelectDate", "onHandleSpace", "onHandleScroll", "onHandleSwipe"])
        ]),
        _: 3
      }, 8, ["multi-calendars", "collapse", "is-mobile"]),
      G.enableTimePicker ? (ee(), Oe("div", x6, [
        G.$slots["time-picker"] ? bt(G.$slots, "time-picker", Jn(He({ key: 0 }, { time: fe(d), updateTime: fe(D) }))) : (ee(), Re(_E, He({
          key: 1,
          ref_key: "timePickerRef",
          ref: j
        }, G.$props, {
          hours: fe(d).hours,
          minutes: fe(d).minutes,
          seconds: fe(d).seconds,
          "internal-model-value": G.internalModelValue,
          "disabled-times-config": fe(u),
          "validate-time": fe(h),
          onMount: le[8] || (le[8] = (Y) => F(fe(Kl).timePicker)),
          "onUpdate:hours": le[9] || (le[9] = (Y) => fe(D)(Y)),
          "onUpdate:minutes": le[10] || (le[10] = (Y) => fe(D)(Y, !1)),
          "onUpdate:seconds": le[11] || (le[11] = (Y) => fe(D)(Y, !1, !0)),
          onResetFlow: le[12] || (le[12] = (Y) => G.$emit("reset-flow")),
          onOverlayClosed: le[13] || (le[13] = (Y) => ce(Y, !1)),
          onOverlayOpened: le[14] || (le[14] = (Y) => ce(Y, !0)),
          onAmPmChange: le[15] || (le[15] = (Y) => G.$emit("am-pm-change", Y))
        }), dr({ _: 2 }, [
          rn(fe(Z), (Y, Ce) => ({
            name: Y,
            fn: x((Te) => [
              bt(G.$slots, Y, Jn(Ca(Te)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"]))
      ])) : ye("", !0)
    ], 64));
  }
}), I6 = (e, t) => {
  const n = Se(), {
    defaultedMultiCalendars: a,
    defaultedConfig: r,
    defaultedHighlight: i,
    defaultedRange: o,
    propDates: l,
    defaultedFilters: s,
    defaultedMultiDates: d
  } = da(e), { modelValue: u, year: f, month: h, calendars: g } = Yf(e, t), { isDisabled: v } = rl(e), { selectYear: w, groupedYears: b, showYearPicker: p, isDisabled: y, toggleYearPicker: S, handleYearSelect: E, handleYear: C } = hE({
    modelValue: u,
    multiCalendars: a,
    range: o,
    highlight: i,
    calendars: g,
    propDates: l,
    month: h,
    year: f,
    filters: s,
    props: e,
    emit: t
  }), D = (H, j) => [H, j].map((te) => go(te, "MMMM", { locale: e.formatLocale })).join("-"), P = W(() => (H) => u.value ? Array.isArray(u.value) ? u.value.some((j) => FC(H, j)) : FC(u.value, H) : !1), O = (H) => {
    if (o.value.enabled) {
      if (Array.isArray(u.value)) {
        const j = mn(H, u.value[0]) || mn(H, u.value[1]);
        return Af(u.value, n.value, H) && !j;
      }
      return !1;
    }
    return !1;
  }, T = (H, j) => H.quarter === DC(j) && H.year === Kt(j), A = (H) => typeof i.value == "function" ? i.value({ quarter: DC(H), year: Kt(H) }) : !!i.value.quarters.find((j) => T(j, H)), V = W(() => (H) => {
    const j = Bn(/* @__PURE__ */ new Date(), { year: f.value(H) });
    return aU({
      start: Sf(j),
      end: MI(j)
    }).map((te) => {
      const de = Ul(te), Z = BC(te), F = v(te), K = O(de), se = A(de);
      return {
        text: D(de, Z),
        value: de,
        active: P.value(de),
        highlighted: se,
        disabled: F,
        isBetween: K
      };
    });
  }), M = (H) => {
    p0(H, u, d.value.limit), t("auto-apply", !0);
  }, B = (H) => {
    u.value = v0(u, H, t), pp(u.value, t, e.autoApply, e.modelAuto);
  }, N = (H) => {
    u.value = H, t("auto-apply");
  };
  return {
    defaultedConfig: r,
    defaultedMultiCalendars: a,
    groupedYears: b,
    year: f,
    isDisabled: y,
    quarters: V,
    showYearPicker: p,
    modelValue: u,
    setHoverDate: (H) => {
      n.value = H;
    },
    selectYear: w,
    selectQuarter: (H, j, te) => {
      if (!te)
        return g.value[j].month = fn(BC(H)), d.value.enabled ? M(H) : o.value.enabled ? B(H) : N(H);
    },
    toggleYearPicker: S,
    handleYearSelect: E,
    handleYear: C
  };
}, E6 = { class: "dp--quarter-items" }, P6 = ["data-test-id", "disabled", "onClick", "onMouseover"], O6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "QuarterPicker",
  props: {
    ...Yi
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "overlay-closed",
    "auto-apply",
    "range-start",
    "range-end",
    "overlay-toggle",
    "update-month-year"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = lc(), o = li(i, "yearMode"), {
      defaultedMultiCalendars: l,
      defaultedConfig: s,
      groupedYears: d,
      year: u,
      isDisabled: f,
      quarters: h,
      modelValue: g,
      showYearPicker: v,
      setHoverDate: w,
      selectQuarter: b,
      toggleYearPicker: p,
      handleYearSelect: y,
      handleYear: S
    } = I6(r, a);
    return t({ getSidebarProps: () => ({
      modelValue: g,
      year: u,
      selectQuarter: b,
      handleYearSelect: y,
      handleYear: S
    }) }), (E, C) => (ee(), Re(_p, {
      "multi-calendars": fe(l).count,
      collapse: E.collapse,
      stretch: "",
      "is-mobile": E.isMobile
    }, {
      default: x(({ instance: D }) => [
        I("div", {
          class: "dp-quarter-picker-wrap",
          style: Xe({ minHeight: `${fe(s).modeHeight}px` })
        }, [
          E.$slots["top-extra"] ? bt(E.$slots, "top-extra", {
            key: 0,
            value: E.internalModelValue
          }) : ye("", !0),
          I("div", null, [
            _(dE, He(E.$props, {
              items: fe(d)(D),
              instance: D,
              "show-year-picker": fe(v)[D],
              year: fe(u)(D),
              "is-disabled": (P) => fe(f)(D, P),
              onHandleYear: (P) => fe(S)(D, P),
              onYearSelect: (P) => fe(y)(P, D),
              onToggleYearPicker: (P) => fe(p)(D, P?.flow, P?.show)
            }), dr({ _: 2 }, [
              rn(fe(o), (P, O) => ({
                name: P,
                fn: x((T) => [
                  bt(E.$slots, P, Jn(Ca(T)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          I("div", E6, [
            (ee(!0), Oe(Qe, null, rn(fe(h)(D), (P, O) => (ee(), Oe("div", { key: O }, [
              I("button", {
                type: "button",
                class: Ie(["dp--qr-btn", {
                  "dp--qr-btn-active": P.active,
                  "dp--qr-btn-between": P.isBetween,
                  "dp--qr-btn-disabled": P.disabled,
                  "dp--highlighted": P.highlighted
                }]),
                "data-test-id": P.value,
                disabled: P.disabled,
                onClick: (T) => fe(b)(P.value, D, P.disabled),
                onMouseover: (T) => fe(w)(P.value)
              }, [
                E.$slots.quarter ? bt(E.$slots, "quarter", {
                  key: 0,
                  value: P.value,
                  text: P.text
                }) : (ee(), Oe(Qe, { key: 1 }, [
                  ae(q(P.text), 1)
                ], 64))
              ], 42, P6)
            ]))), 128))
          ])
        ], 4)
      ]),
      _: 3
    }, 8, ["multi-calendars", "collapse", "is-mobile"]));
  }
}), vE = (e, t) => {
  const n = Se(0);
  on(() => {
    a(), window.addEventListener("resize", a, { passive: !0 });
  }), di(() => {
    window.removeEventListener("resize", a);
  });
  const a = () => {
    n.value = window.document.documentElement.clientWidth;
  };
  return {
    isMobile: W(
      () => n.value <= e.value.mobileBreakpoint && !t ? !0 : void 0
    )
  };
}, D6 = ["id", "tabindex", "role", "aria-label"], B6 = {
  key: 0,
  class: "dp--menu-load-container"
}, V6 = {
  key: 1,
  class: "dp--menu-header"
}, M6 = ["data-dp-mobile"], R6 = {
  key: 0,
  class: "dp__sidebar_left"
}, L6 = ["data-dp-mobile"], F6 = ["data-test-id", "data-dp-mobile", "onClick", "onKeydown"], N6 = {
  key: 2,
  class: "dp__sidebar_right"
}, U6 = {
  key: 3,
  class: "dp__action_extra"
}, YC = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerMenu",
  props: {
    ...hp,
    shadow: { type: Boolean, default: !1 },
    openOnTop: { type: Boolean, default: !1 },
    internalModelValue: { type: [Date, Array], default: null },
    noOverlayFocus: { type: Boolean, default: !1 },
    collapse: { type: Boolean, default: !1 },
    getInputRect: { type: Function, default: () => ({}) },
    isTextInputDate: { type: Boolean, default: !1 }
  },
  emits: [
    "close-picker",
    "select-date",
    "auto-apply",
    "time-update",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "update:internal-model-value",
    "recalculate-position",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "auto-apply-invalid",
    "date-update",
    "invalid-date",
    "overlay-toggle",
    "menu-blur"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = Se(null), o = W(() => {
      const { openOnTop: _e, ...$e } = r;
      return {
        ...$e,
        isMobile: b.value,
        flowStep: B.value,
        menuWrapRef: i.value
      };
    }), { setMenuFocused: l, setShiftKey: s, control: d } = uE(), u = lc(), { defaultedTextInput: f, defaultedInline: h, defaultedConfig: g, defaultedUI: v, handleEventPropagation: w } = da(r), { isMobile: b } = vE(g, r.shadow), p = Se(null), y = Se(0), S = Se(null), E = Se(!1), C = Se(null), D = Se(!1), P = (_e) => {
      D.value = !0, g.value.allowPreventDefault && _e.preventDefault(), Ns(_e, g.value, !0);
    };
    on(() => {
      if (!r.shadow) {
        E.value = !0, O(), window.addEventListener("resize", O);
        const _e = $a(i);
        _e && !f.value.enabled && !h.value.enabled && (l(!0), F()), _e && (_e.addEventListener("pointerdown", P), _e.addEventListener("mousedown", P));
      }
      document.addEventListener("mousedown", Je);
    }), di(() => {
      window.removeEventListener("resize", O), document.removeEventListener("mousedown", Je);
      const _e = $a(i);
      _e && (_e.removeEventListener("pointerdown", P), _e.removeEventListener("mousedown", P));
    });
    const O = () => {
      const _e = $a(S);
      _e && (y.value = _e.getBoundingClientRect().width);
    }, { arrowRight: T, arrowLeft: A, arrowDown: V, arrowUp: M } = al(), { flowStep: B, updateFlowStep: N, childMount: H, resetFlow: j, handleFlow: te } = W6(r, a, C), de = W(() => r.monthPicker ? Gq : r.yearPicker ? Jq : r.timePicker ? d6 : r.quarterPicker ? O6 : T6), Z = W(() => {
      var _e;
      if (g.value.arrowLeft) return g.value.arrowLeft;
      const $e = (_e = i.value) == null ? void 0 : _e.getBoundingClientRect(), Ze = r.getInputRect();
      return Ze?.width < y?.value && Ze?.left <= ($e?.left ?? 0) ? `${Ze?.width / 2}px` : Ze?.right >= ($e?.right ?? 0) && Ze?.width < y?.value ? `${y?.value - Ze?.width / 2}px` : "50%";
    }), F = () => {
      const _e = $a(i);
      _e && _e.focus({ preventScroll: !0 });
    }, K = W(() => {
      var _e;
      return ((_e = C.value) == null ? void 0 : _e.getSidebarProps()) || {};
    }), se = () => {
      r.openOnTop && a("recalculate-position");
    }, X = li(u, "action"), he = W(() => r.monthPicker || r.yearPicker ? li(u, "monthYear") : r.timePicker ? li(u, "timePicker") : li(u, "shared")), ve = W(() => r.openOnTop ? "dp__arrow_bottom" : "dp__arrow_top"), pe = W(() => ({
      dp__menu_disabled: r.disabled,
      dp__menu_readonly: r.readonly,
      "dp-menu-loading": r.loading
    })), z = W(
      () => ({
        dp__menu: !0,
        dp__menu_index: !h.value.enabled,
        dp__relative: h.value.enabled,
        ...v.value.menu ?? {}
      })
    ), ke = (_e) => {
      Ns(_e, g.value, !0);
    }, Me = (_e) => {
      r.escClose && (a("close-picker"), w(_e));
    }, Le = (_e) => {
      if (r.arrowNavigation) {
        if (_e === Br.up) return M();
        if (_e === Br.down) return V();
        if (_e === Br.left) return A();
        if (_e === Br.right) return T();
      } else _e === Br.left || _e === Br.up ? Y("handleArrow", Br.left, 0, _e === Br.up) : Y("handleArrow", Br.right, 0, _e === Br.down);
    }, ce = (_e) => {
      s(_e.shiftKey), !r.disableMonthYearSelect && _e.code === Gn.tab && _e.target.classList.contains("dp__menu") && d.value.shiftKeyInMenu && (_e.preventDefault(), Ns(_e, g.value, !0), a("close-picker"));
    }, ne = () => {
      F(), a("time-picker-close");
    }, G = (_e) => {
      var $e, Ze, _t;
      ($e = C.value) == null || $e.toggleTimePicker(!1, !1), (Ze = C.value) == null || Ze.toggleMonthPicker(!1, !1, _e), (_t = C.value) == null || _t.toggleYearPicker(!1, !1, _e);
    }, le = (_e, $e = 0) => {
      var Ze, _t, It;
      return _e === "month" ? (Ze = C.value) == null ? void 0 : Ze.toggleMonthPicker(!1, !0, $e) : _e === "year" ? (_t = C.value) == null ? void 0 : _t.toggleYearPicker(!1, !0, $e) : _e === "time" ? (It = C.value) == null ? void 0 : It.toggleTimePicker(!0, !1) : G($e);
    }, Y = (_e, ...$e) => {
      var Ze, _t;
      (Ze = C.value) != null && Ze[_e] && ((_t = C.value) == null || _t[_e](...$e));
    }, Ce = () => {
      Y("selectCurrentDate");
    }, Te = (_e, $e) => {
      Y("presetDate", yo(_e), $e);
    }, ie = () => {
      Y("clearHoverDate");
    }, ge = (_e, $e) => {
      Y("updateMonthYear", _e, $e);
    }, Pe = (_e, $e) => {
      _e.preventDefault(), Le($e);
    }, Ee = (_e) => {
      var $e, Ze, _t;
      if (ce(_e), _e.key === Gn.home || _e.key === Gn.end)
        return Y(
          "selectWeekDate",
          _e.key === Gn.home,
          _e.target.getAttribute("id")
        );
      switch ((_e.key === Gn.pageUp || _e.key === Gn.pageDown) && (_e.shiftKey ? (Y("changeYear", _e.key === Gn.pageUp), ($e = vb(i.value, "overlay-year")) == null || $e.focus()) : (Y("changeMonth", _e.key === Gn.pageUp), (Ze = vb(i.value, _e.key === Gn.pageUp ? "action-prev" : "action-next")) == null || Ze.focus()), _e.target.getAttribute("id") && ((_t = i.value) == null || _t.focus({ preventScroll: !0 }))), _e.key) {
        case Gn.esc:
          return Me(_e);
        case Gn.arrowLeft:
          return Pe(_e, Br.left);
        case Gn.arrowRight:
          return Pe(_e, Br.right);
        case Gn.arrowUp:
          return Pe(_e, Br.up);
        case Gn.arrowDown:
          return Pe(_e, Br.down);
        default:
          return;
      }
    }, Je = (_e) => {
      var $e;
      h.value.enabled && !h.value.input && !(($e = i.value) != null && $e.contains(_e.target)) && D.value && (D.value = !1, a("menu-blur"));
    };
    return t({
      updateMonthYear: ge,
      switchView: le,
      handleFlow: te,
      onValueCleared: () => {
        var _e, $e;
        ($e = (_e = C.value) == null ? void 0 : _e.setStartTime) == null || $e.call(_e);
      }
    }), (_e, $e) => {
      var Ze, _t, It;
      return ee(), Oe("div", {
        id: _e.uid ? `dp-menu-${_e.uid}` : void 0,
        ref_key: "dpMenuRef",
        ref: i,
        tabindex: fe(h).enabled ? void 0 : "0",
        role: fe(h).enabled ? void 0 : "dialog",
        "aria-label": (Ze = _e.ariaLabels) == null ? void 0 : Ze.menu,
        class: Ie(z.value),
        style: Xe({ "--dp-arrow-left": Z.value }),
        onMouseleave: ie,
        onClick: ke,
        onKeydown: Ee
      }, [
        (_e.disabled || _e.readonly) && fe(h).enabled || _e.loading ? (ee(), Oe("div", {
          key: 0,
          class: Ie(pe.value)
        }, [
          _e.loading ? (ee(), Oe("div", B6, $e[19] || ($e[19] = [
            I("span", { class: "dp--menu-loader" }, null, -1)
          ]))) : ye("", !0)
        ], 2)) : ye("", !0),
        _e.$slots["menu-header"] ? (ee(), Oe("div", V6, [
          bt(_e.$slots, "menu-header")
        ])) : ye("", !0),
        !fe(h).enabled && !_e.teleportCenter ? (ee(), Oe("div", {
          key: 2,
          class: Ie(ve.value)
        }, null, 2)) : ye("", !0),
        I("div", {
          ref_key: "innerMenuRef",
          ref: S,
          class: Ie({
            dp__menu_content_wrapper: ((_t = _e.presetDates) == null ? void 0 : _t.length) || !!_e.$slots["left-sidebar"] || !!_e.$slots["right-sidebar"],
            "dp--menu-content-wrapper-collapsed": e.collapse && (((It = _e.presetDates) == null ? void 0 : It.length) || !!_e.$slots["left-sidebar"] || !!_e.$slots["right-sidebar"])
          }),
          "data-dp-mobile": fe(b),
          style: Xe({ "--dp-menu-width": `${y.value}px` })
        }, [
          _e.$slots["left-sidebar"] ? (ee(), Oe("div", R6, [
            bt(_e.$slots, "left-sidebar", Jn(Ca(K.value)))
          ])) : ye("", !0),
          _e.presetDates.length ? (ee(), Oe("div", {
            key: 1,
            class: Ie({ "dp--preset-dates-collapsed": e.collapse, "dp--preset-dates": !0 }),
            "data-dp-mobile": fe(b)
          }, [
            (ee(!0), Oe(Qe, null, rn(_e.presetDates, (rt, Dt) => (ee(), Oe(Qe, { key: Dt }, [
              rt.slot ? bt(_e.$slots, rt.slot, {
                key: 0,
                presetDate: Te,
                label: rt.label,
                value: rt.value
              }) : (ee(), Oe("button", {
                key: 1,
                type: "button",
                style: Xe(rt.style || {}),
                class: Ie(["dp__btn dp--preset-range", { "dp--preset-range-collapsed": e.collapse }]),
                "data-test-id": rt.testId ?? void 0,
                "data-dp-mobile": fe(b),
                onClick: ia((en) => Te(rt.value, rt.noTz), ["prevent"]),
                onKeydown: (en) => fe(Lr)(en, () => Te(rt.value, rt.noTz), !0)
              }, q(rt.label), 47, F6))
            ], 64))), 128))
          ], 10, L6)) : ye("", !0),
          I("div", {
            ref_key: "calendarWrapperRef",
            ref: p,
            class: "dp__instance_calendar",
            role: "document"
          }, [
            (ee(), Re(Hu(de.value), He({
              ref_key: "dynCmpRef",
              ref: C
            }, o.value, {
              "flow-step": fe(B),
              onMount: fe(H),
              onUpdateFlowStep: fe(N),
              onResetFlow: fe(j),
              onFocusMenu: F,
              onSelectDate: $e[0] || ($e[0] = (rt) => _e.$emit("select-date")),
              onDateUpdate: $e[1] || ($e[1] = (rt) => _e.$emit("date-update", rt)),
              onTooltipOpen: $e[2] || ($e[2] = (rt) => _e.$emit("tooltip-open", rt)),
              onTooltipClose: $e[3] || ($e[3] = (rt) => _e.$emit("tooltip-close", rt)),
              onAutoApply: $e[4] || ($e[4] = (rt) => _e.$emit("auto-apply", rt)),
              onRangeStart: $e[5] || ($e[5] = (rt) => _e.$emit("range-start", rt)),
              onRangeEnd: $e[6] || ($e[6] = (rt) => _e.$emit("range-end", rt)),
              onInvalidFixedRange: $e[7] || ($e[7] = (rt) => _e.$emit("invalid-fixed-range", rt)),
              onTimeUpdate: $e[8] || ($e[8] = (rt) => _e.$emit("time-update")),
              onAmPmChange: $e[9] || ($e[9] = (rt) => _e.$emit("am-pm-change", rt)),
              onTimePickerOpen: $e[10] || ($e[10] = (rt) => _e.$emit("time-picker-open", rt)),
              onTimePickerClose: ne,
              onRecalculatePosition: se,
              onUpdateMonthYear: $e[11] || ($e[11] = (rt) => _e.$emit("update-month-year", rt)),
              onAutoApplyInvalid: $e[12] || ($e[12] = (rt) => _e.$emit("auto-apply-invalid", rt)),
              onInvalidDate: $e[13] || ($e[13] = (rt) => _e.$emit("invalid-date", rt)),
              onOverlayToggle: $e[14] || ($e[14] = (rt) => _e.$emit("overlay-toggle", rt)),
              "onUpdate:internalModelValue": $e[15] || ($e[15] = (rt) => _e.$emit("update:internal-model-value", rt))
            }), dr({ _: 2 }, [
              rn(he.value, (rt, Dt) => ({
                name: rt,
                fn: x((en) => [
                  bt(_e.$slots, rt, Jn(Ca({ ...en })))
                ])
              }))
            ]), 1040, ["flow-step", "onMount", "onUpdateFlowStep", "onResetFlow"]))
          ], 512),
          _e.$slots["right-sidebar"] ? (ee(), Oe("div", N6, [
            bt(_e.$slots, "right-sidebar", Jn(Ca(K.value)))
          ])) : ye("", !0),
          _e.$slots["action-extra"] ? (ee(), Oe("div", U6, [
            _e.$slots["action-extra"] ? bt(_e.$slots, "action-extra", {
              key: 0,
              selectCurrentDate: Ce
            }) : ye("", !0)
          ])) : ye("", !0)
        ], 14, M6),
        !_e.autoApply || fe(g).keepActionRow ? (ee(), Re(Uq, He({
          key: 3,
          "menu-mount": E.value
        }, o.value, {
          "calendar-width": y.value,
          onClosePicker: $e[16] || ($e[16] = (rt) => _e.$emit("close-picker")),
          onSelectDate: $e[17] || ($e[17] = (rt) => _e.$emit("select-date")),
          onInvalidSelect: $e[18] || ($e[18] = (rt) => _e.$emit("invalid-select")),
          onSelectNow: Ce
        }), dr({ _: 2 }, [
          rn(fe(X), (rt, Dt) => ({
            name: rt,
            fn: x((en) => [
              bt(_e.$slots, rt, Jn(Ca({ ...en })))
            ])
          }))
        ]), 1040, ["menu-mount", "calendar-width"])) : ye("", !0)
      ], 46, D6);
    };
  }
});
var nu = /* @__PURE__ */ ((e) => (e.center = "center", e.left = "left", e.right = "right", e))(nu || {});
const $6 = ({
  menuRef: e,
  menuRefInner: t,
  inputRef: n,
  pickerWrapperRef: a,
  inline: r,
  emit: i,
  props: o,
  slots: l
}) => {
  const { defaultedConfig: s } = da(o), d = Se({}), u = Se(!1), f = Se({
    top: "0",
    left: "0"
  }), h = Se(!1), g = we(o, "teleportCenter");
  nt(g, () => {
    f.value = JSON.parse(JSON.stringify({})), C();
  });
  const v = (j) => {
    if (o.teleport) {
      const te = j.getBoundingClientRect();
      return {
        left: te.left + window.scrollX,
        top: te.top + window.scrollY
      };
    }
    return { top: 0, left: 0 };
  }, w = (j, te) => {
    f.value.left = `${j + te - d.value.width}px`;
  }, b = (j) => {
    f.value.left = `${j}px`;
  }, p = (j, te) => {
    o.position === nu.left && b(j), o.position === nu.right && w(j, te), o.position === nu.center && (f.value.left = `${j + te / 2 - d.value.width / 2}px`);
  }, y = (j) => {
    const { width: te, height: de } = j.getBoundingClientRect(), { top: Z, left: F } = v(j);
    return { top: +Z, left: +F, width: te, height: de };
  }, S = () => {
    f.value.left = "50%", f.value.top = "50%", f.value.transform = "translate(-50%, -50%)", f.value.position = "fixed", delete f.value.opacity;
  }, E = () => {
    const j = $a(n);
    f.value = o.altPosition(j);
  }, C = (j = !0) => {
    var te;
    if (!r.value.enabled) {
      if (g.value) return S();
      if (o.altPosition !== null) return E();
      if (j) {
        const de = o.teleport ? (te = t.value) == null ? void 0 : te.$el : e.value;
        de && (d.value = de.getBoundingClientRect()), i("recalculate-position");
      }
      return M();
    }
  }, D = ({ inputEl: j, left: te, width: de }) => {
    window.screen.width > 768 && !u.value && p(te, de), T(j);
  }, P = (j) => {
    const { top: te, left: de, height: Z, width: F } = y(j);
    f.value.top = `${Z + te + +o.offset}px`, h.value = !1, u.value || (f.value.left = `${de + F / 2 - d.value.width / 2}px`), D({ inputEl: j, left: de, width: F });
  }, O = (j) => {
    const { top: te, left: de, width: Z } = y(j);
    f.value.top = `${te - +o.offset - d.value.height}px`, h.value = !0, D({ inputEl: j, left: de, width: Z });
  }, T = (j) => {
    if (o.autoPosition) {
      const { left: te, width: de } = y(j), { left: Z, right: F } = d.value;
      if (!u.value) {
        if (Math.abs(Z) !== Math.abs(F)) {
          if (Z <= 0)
            return u.value = !0, b(te);
          if (F >= document.documentElement.clientWidth)
            return u.value = !0, w(te, de);
        }
        return p(te, de);
      }
    }
  }, A = () => {
    const j = $a(n);
    if (j) {
      if (o.autoPosition === Fi.top) return Fi.top;
      if (o.autoPosition === Fi.bottom) return Fi.bottom;
      const { height: te } = d.value, { top: de, height: Z } = j.getBoundingClientRect(), F = window.innerHeight - de - Z, K = de;
      return te <= F ? Fi.bottom : te > F && te <= K ? Fi.top : F >= K ? Fi.bottom : Fi.top;
    }
    return Fi.bottom;
  }, V = (j) => A() === Fi.bottom ? P(j) : O(j), M = () => {
    const j = $a(n);
    if (j)
      return o.autoPosition ? V(j) : P(j);
  }, B = function(j) {
    if (j) {
      const te = j.scrollHeight > j.clientHeight, de = window.getComputedStyle(j).overflowY.indexOf("hidden") !== -1;
      return te && !de;
    }
    return !0;
  }, N = function(j) {
    return !j || j === document.body || j.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? window : B(j) ? j : N(
      j.assignedSlot && s.value.shadowDom ? j.assignedSlot.parentNode : j.parentNode
    );
  }, H = (j) => {
    if (j)
      switch (o.position) {
        case nu.left:
          return { left: 0, transform: "translateX(0)" };
        case nu.right:
          return { left: `${j.width}px`, transform: "translateX(-100%)" };
        default:
          return { left: `${j.width / 2}px`, transform: "translateX(-50%)" };
      }
    return {};
  };
  return {
    openOnTop: h,
    menuStyle: f,
    xCorrect: u,
    setMenuPosition: C,
    getScrollableParent: N,
    shadowRender: (j, te, de) => {
      var Z, F, K;
      const se = document.createElement("div"), X = (Z = $a(n)) == null ? void 0 : Z.getBoundingClientRect();
      se.setAttribute("id", "dp--temp-container");
      const he = (F = a.value) != null && F.clientWidth ? a.value : document.body;
      he.append(se);
      const ve = H(X), pe = s.value.shadowDom ? Object.keys(l).filter(
        (ke) => ["right-sidebar", "left-sidebar", "top-extra", "action-extra"].includes(ke)
      ) : Object.keys(l), z = Co(
        te,
        {
          ...de,
          shadow: !0,
          style: { opacity: 0, position: "absolute", ...ve }
        },
        Object.fromEntries(pe.map((ke) => [ke, l[ke]]))
      );
      j != null && (z.appContext = j.appContext), v_(z, se), d.value = (K = z.el) == null ? void 0 : K.getBoundingClientRect(), v_(null, se), he.removeChild(se);
    }
  };
}, xs = [
  { name: "clock-icon", use: ["time", "calendar", "shared"] },
  { name: "arrow-left", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-right", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-up", use: ["time", "calendar", "month-year", "shared"] },
  { name: "arrow-down", use: ["time", "calendar", "month-year", "shared"] },
  { name: "calendar-icon", use: ["month-year", "time", "calendar", "shared", "year-mode"] },
  { name: "day", use: ["calendar", "shared"] },
  { name: "month-overlay-value", use: ["calendar", "month-year", "shared"] },
  { name: "year-overlay-value", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "year-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay-header", use: ["month-year", "shared"] },
  { name: "year-overlay-header", use: ["month-year", "shared"] },
  { name: "hours-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "hours-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "hours", use: ["calendar", "time", "shared"] },
  { name: "minutes", use: ["calendar", "time", "shared"] },
  { name: "month", use: ["calendar", "month-year", "shared"] },
  { name: "year", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "action-buttons", use: ["action"] },
  { name: "action-preview", use: ["action"] },
  { name: "calendar-header", use: ["calendar", "shared"] },
  { name: "marker-tooltip", use: ["calendar", "shared"] },
  { name: "action-extra", use: ["menu"] },
  { name: "time-picker-overlay", use: ["calendar", "time", "shared"] },
  { name: "am-pm-button", use: ["calendar", "time", "shared"] },
  { name: "left-sidebar", use: ["menu"] },
  { name: "right-sidebar", use: ["menu"] },
  { name: "month-year", use: ["month-year", "shared"] },
  { name: "time-picker", use: ["menu", "shared"] },
  { name: "action-row", use: ["action"] },
  { name: "marker", use: ["calendar", "shared"] },
  { name: "quarter", use: ["shared"] },
  { name: "top-extra", use: ["shared", "month-year"] },
  { name: "tp-inline-arrow-up", use: ["shared", "time"] },
  { name: "tp-inline-arrow-down", use: ["shared", "time"] },
  { name: "menu-header", use: ["menu"] }
], q6 = [{ name: "trigger" }, { name: "input-icon" }, { name: "clear-icon" }, { name: "dp-input" }], H6 = {
  all: () => xs,
  monthYear: () => xs.filter((e) => e.use.includes("month-year")),
  input: () => q6,
  timePicker: () => xs.filter((e) => e.use.includes("time")),
  action: () => xs.filter((e) => e.use.includes("action")),
  calendar: () => xs.filter((e) => e.use.includes("calendar")),
  menu: () => xs.filter((e) => e.use.includes("menu")),
  shared: () => xs.filter((e) => e.use.includes("shared")),
  yearMode: () => xs.filter((e) => e.use.includes("year-mode"))
}, li = (e, t, n) => {
  const a = [];
  return H6[t]().forEach((r) => {
    e[r.name] && a.push(r.name);
  }), n != null && n.length && n.forEach((r) => {
    r.slot && a.push(r.slot);
  }), a;
}, Kf = (e) => {
  const t = W(() => (a) => e.value ? a ? e.value.open : e.value.close : ""), n = W(() => (a) => e.value ? a ? e.value.menuAppearTop : e.value.menuAppearBottom : "");
  return { transitionName: t, showTransition: !!e.value, menuTransition: n };
}, Yf = (e, t, n) => {
  const { defaultedRange: a, defaultedTz: r } = da(e), i = ut(Yr(ut(), r.value.timezone)), o = Se([{ month: fn(i), year: Kt(i) }]), l = (h) => {
    const g = {
      hours: ts(i),
      minutes: Ys(i),
      seconds: 0
    };
    return a.value.enabled ? [g[h], g[h]] : g[h];
  }, s = oa({
    hours: l("hours"),
    minutes: l("minutes"),
    seconds: l("seconds")
  });
  nt(
    a,
    (h, g) => {
      h.enabled !== g.enabled && (s.hours = l("hours"), s.minutes = l("minutes"), s.seconds = l("seconds"));
    },
    { deep: !0 }
  );
  const d = W({
    get: () => e.internalModelValue,
    set: (h) => {
      !e.readonly && !e.disabled && t("update:internal-model-value", h);
    }
  }), u = W(
    () => (h) => o.value[h] ? o.value[h].month : 0
  ), f = W(
    () => (h) => o.value[h] ? o.value[h].year : 0
  );
  return nt(
    d,
    (h, g) => {
      n && JSON.stringify(h ?? {}) !== JSON.stringify(g ?? {}) && n();
    },
    { deep: !0 }
  ), {
    calendars: o,
    time: s,
    modelValue: d,
    month: u,
    year: f,
    today: i
  };
}, z6 = (e, t) => {
  const {
    defaultedMultiCalendars: n,
    defaultedMultiDates: a,
    defaultedUI: r,
    defaultedHighlight: i,
    defaultedTz: o,
    propDates: l,
    defaultedRange: s
  } = da(t), { isDisabled: d } = rl(t), u = Se(null), f = Se(Yr(/* @__PURE__ */ new Date(), o.value.timezone)), h = (z) => {
    !z.current && t.hideOffsetDates || (u.value = z.value);
  }, g = () => {
    u.value = null;
  }, v = (z) => Array.isArray(e.value) && s.value.enabled && e.value[0] && u.value ? z ? Oa(u.value, e.value[0]) : Sa(u.value, e.value[0]) : !0, w = (z, ke) => {
    const Me = () => e.value ? ke ? e.value[0] || null : e.value[1] : null, Le = e.value && Array.isArray(e.value) ? Me() : null;
    return mn(ut(z.value), Le);
  }, b = (z) => {
    const ke = Array.isArray(e.value) ? e.value[0] : null;
    return z ? !Sa(u.value ?? null, ke) : !0;
  }, p = (z, ke = !0) => (s.value.enabled || t.weekPicker) && Array.isArray(e.value) && e.value.length === 2 ? t.hideOffsetDates && !z.current ? !1 : mn(ut(z.value), e.value[ke ? 0 : 1]) : s.value.enabled ? w(z, ke) && b(ke) || mn(z.value, Array.isArray(e.value) ? e.value[0] : null) && v(ke) : !1, y = (z, ke) => {
    if (Array.isArray(e.value) && e.value[0] && e.value.length === 1) {
      const Me = mn(z.value, u.value);
      return ke ? Oa(e.value[0], z.value) && Me : Sa(e.value[0], z.value) && Me;
    }
    return !1;
  }, S = (z) => !e.value || t.hideOffsetDates && !z.current ? !1 : s.value.enabled ? t.modelAuto && Array.isArray(e.value) ? mn(z.value, e.value[0] ? e.value[0] : f.value) : !1 : a.value.enabled && Array.isArray(e.value) ? e.value.some((ke) => mn(ke, z.value)) : mn(z.value, e.value ? e.value : f.value), E = (z) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        if (t.hideOffsetDates && !z.current) return !1;
        const ke = Ti(u.value, +s.value.autoRange), Me = Ho(ut(u.value), t.weekStart);
        return t.weekPicker ? mn(Me[1], ut(z.value)) : mn(ke, ut(z.value));
      }
      return !1;
    }
    return !1;
  }, C = (z) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        const ke = Ti(u.value, +s.value.autoRange);
        if (t.hideOffsetDates && !z.current) return !1;
        const Me = Ho(ut(u.value), t.weekStart);
        return t.weekPicker ? Oa(z.value, Me[0]) && Sa(z.value, Me[1]) : Oa(z.value, u.value) && Sa(z.value, ke);
      }
      return !1;
    }
    return !1;
  }, D = (z) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        if (t.hideOffsetDates && !z.current) return !1;
        const ke = Ho(ut(u.value), t.weekStart);
        return t.weekPicker ? mn(ke[0], z.value) : mn(u.value, z.value);
      }
      return !1;
    }
    return !1;
  }, P = (z) => Af(e.value, u.value, z.value), O = () => t.modelAuto && Array.isArray(t.internalModelValue) ? !!t.internalModelValue[0] : !1, T = () => t.modelAuto ? XI(t.internalModelValue) : !0, A = (z) => {
    if (t.weekPicker) return !1;
    const ke = s.value.enabled ? !p(z) && !p(z, !1) : !0;
    return !d(z.value) && !S(z) && !(!z.current && t.hideOffsetDates) && ke;
  }, V = (z) => s.value.enabled ? t.modelAuto ? O() && S(z) : !1 : S(z), M = (z) => i.value ? cq(z.value, l.value.highlight) : !1, B = (z) => {
    const ke = d(z.value);
    return ke && (typeof i.value == "function" ? !i.value(z.value, ke) : !i.value.options.highlightDisabled);
  }, N = (z) => {
    var ke;
    return typeof i.value == "function" ? i.value(z.value) : (ke = i.value.weekdays) == null ? void 0 : ke.includes(z.value.getDay());
  }, H = (z) => (s.value.enabled || t.weekPicker) && (!(n.value.count > 0) || z.current) && T() && !(!z.current && t.hideOffsetDates) && !S(z) ? P(z) : !1, j = (z) => {
    if (Array.isArray(e.value) && e.value.length === 1) {
      const { before: ke, after: Me } = zC(+s.value.maxRange, e.value[0]);
      return Ou(z.value, ke) || nc(z.value, Me);
    }
    return !1;
  }, te = (z) => {
    if (Array.isArray(e.value) && e.value.length === 1) {
      const { before: ke, after: Me } = zC(+s.value.minRange, e.value[0]);
      return Af([ke, Me], e.value[0], z.value);
    }
    return !1;
  }, de = (z) => s.value.enabled && (s.value.maxRange || s.value.minRange) ? s.value.maxRange && s.value.minRange ? j(z) || te(z) : s.value.maxRange ? j(z) : te(z) : !1, Z = (z) => {
    const { isRangeStart: ke, isRangeEnd: Me } = X(z), Le = s.value.enabled ? ke || Me : !1;
    return {
      dp__cell_offset: !z.current,
      dp__pointer: !t.disabled && !(!z.current && t.hideOffsetDates) && !d(z.value) && !de(z),
      dp__cell_disabled: d(z.value) || de(z),
      dp__cell_highlight: !B(z) && (M(z) || N(z)) && !V(z) && !Le && !D(z) && !(H(z) && t.weekPicker) && !Me,
      dp__cell_highlight_active: !B(z) && (M(z) || N(z)) && V(z),
      dp__today: !t.noToday && mn(z.value, f.value) && z.current,
      "dp--past": Sa(z.value, f.value),
      "dp--future": Oa(z.value, f.value)
    };
  }, F = (z) => ({
    dp__active_date: V(z),
    dp__date_hover: A(z)
  }), K = (z) => {
    if (e.value && !Array.isArray(e.value)) {
      const ke = Ho(e.value, t.weekStart);
      return {
        ...ve(z),
        dp__range_start: mn(ke[0], z.value),
        dp__range_end: mn(ke[1], z.value),
        dp__range_between_week: Oa(z.value, ke[0]) && Sa(z.value, ke[1])
      };
    }
    return {
      ...ve(z)
    };
  }, se = (z) => {
    if (e.value && Array.isArray(e.value)) {
      const ke = Ho(e.value[0], t.weekStart), Me = e.value[1] ? Ho(e.value[1], t.weekStart) : [];
      return {
        ...ve(z),
        dp__range_start: mn(ke[0], z.value) || mn(Me[0], z.value),
        dp__range_end: mn(ke[1], z.value) || mn(Me[1], z.value),
        dp__range_between_week: Oa(z.value, ke[0]) && Sa(z.value, ke[1]) || Oa(z.value, Me[0]) && Sa(z.value, Me[1]),
        dp__range_between: Oa(z.value, ke[1]) && Sa(z.value, Me[0])
      };
    }
    return {
      ...ve(z)
    };
  }, X = (z) => {
    const ke = n.value.count > 0 ? z.current && p(z) && T() : p(z) && T(), Me = n.value.count > 0 ? z.current && p(z, !1) && T() : p(z, !1) && T();
    return { isRangeStart: ke, isRangeEnd: Me };
  }, he = (z) => {
    const { isRangeStart: ke, isRangeEnd: Me } = X(z);
    return {
      dp__range_start: ke,
      dp__range_end: Me,
      dp__range_between: H(z),
      dp__date_hover: mn(z.value, u.value) && !ke && !Me && !t.weekPicker,
      dp__date_hover_start: y(z, !0),
      dp__date_hover_end: y(z, !1)
    };
  }, ve = (z) => ({
    ...he(z),
    dp__cell_auto_range: C(z),
    dp__cell_auto_range_start: D(z),
    dp__cell_auto_range_end: E(z)
  }), pe = (z) => s.value.enabled ? s.value.autoRange ? ve(z) : t.modelAuto ? { ...F(z), ...he(z) } : t.weekPicker ? se(z) : he(z) : t.weekPicker ? K(z) : F(z);
  return {
    setHoverDate: h,
    clearHoverDate: g,
    getDayClassData: (z) => t.hideOffsetDates && !z.current ? {} : {
      ...Z(z),
      ...pe(z),
      [t.dayClass ? t.dayClass(z.value, t.internalModelValue) : ""]: !0,
      ...r.value.calendarCell ?? {}
    }
  };
}, rl = (e) => {
  const { defaultedFilters: t, defaultedRange: n, propDates: a, defaultedMultiDates: r } = da(e), i = (N) => a.value.disabledDates ? typeof a.value.disabledDates == "function" ? a.value.disabledDates(ut(N)) : !!F_(N, a.value.disabledDates) : !1, o = (N) => a.value.maxDate ? e.yearPicker ? Kt(N) > Kt(a.value.maxDate) : Oa(N, a.value.maxDate) : !1, l = (N) => a.value.minDate ? e.yearPicker ? Kt(N) < Kt(a.value.minDate) : Sa(N, a.value.minDate) : !1, s = (N) => {
    const H = o(N), j = l(N), te = i(N), de = t.value.months.map((X) => +X).includes(fn(N)), Z = e.disabledWeekDays.length ? e.disabledWeekDays.some((X) => +X === QU(N)) : !1, F = g(N), K = Kt(N), se = K < +e.yearRange[0] || K > +e.yearRange[1];
    return !(H || j || te || de || se || Z || F);
  }, d = (N, H) => Sa(...Rs(a.value.minDate, N, H)) || mn(...Rs(a.value.minDate, N, H)), u = (N, H) => Oa(...Rs(a.value.maxDate, N, H)) || mn(...Rs(a.value.maxDate, N, H)), f = (N, H, j) => {
    let te = !1;
    return a.value.maxDate && j && u(N, H) && (te = !0), a.value.minDate && !j && d(N, H) && (te = !0), te;
  }, h = (N, H, j, te) => {
    let de = !1;
    return te && (a.value.minDate || a.value.maxDate) ? a.value.minDate && a.value.maxDate ? de = f(N, H, j) : (a.value.minDate && d(N, H) || a.value.maxDate && u(N, H)) && (de = !0) : de = !0, de;
  }, g = (N) => Array.isArray(a.value.allowedDates) && !a.value.allowedDates.length ? !0 : a.value.allowedDates ? !F_(N, a.value.allowedDates, tE(e.monthPicker, e.yearPicker)) : !1, v = (N) => !s(N), w = (N) => n.value.noDisabledRange ? !VI({ start: N[0], end: N[1] }).some((H) => v(H)) : !0, b = (N) => {
    if (N) {
      const H = Kt(N);
      return H >= +e.yearRange[0] && H <= e.yearRange[1];
    }
    return !0;
  }, p = (N, H) => !!(Array.isArray(N) && N[H] && (n.value.maxRange || n.value.minRange) && b(N[H])), y = (N, H, j = 0) => {
    if (p(H, j) && b(N)) {
      const te = OI(N, H[j]), de = iE(H[j], N), Z = de.length === 1 ? 0 : de.filter((K) => v(K)).length, F = Math.abs(te) - (n.value.minMaxRawRange ? 0 : Z);
      if (n.value.minRange && n.value.maxRange)
        return F >= +n.value.minRange && F <= +n.value.maxRange;
      if (n.value.minRange) return F >= +n.value.minRange;
      if (n.value.maxRange) return F <= +n.value.maxRange;
    }
    return !0;
  }, S = () => !e.enableTimePicker || e.monthPicker || e.yearPicker || e.ignoreTimeValidation, E = (N) => Array.isArray(N) ? [N[0] ? ey(N[0]) : null, N[1] ? ey(N[1]) : null] : ey(N), C = (N, H, j) => N.find(
    (te) => +te.hours === ts(H) && te.minutes === "*" ? !0 : +te.minutes === Ys(H) && +te.hours === ts(H)
  ) && j, D = (N, H, j) => {
    const [te, de] = N, [Z, F] = H;
    return !C(te, Z, j) && !C(de, F, j) && j;
  }, P = (N, H) => {
    const j = Array.isArray(H) ? H : [H];
    return Array.isArray(e.disabledTimes) ? Array.isArray(e.disabledTimes[0]) ? D(e.disabledTimes, j, N) : !j.some((te) => C(e.disabledTimes, te, N)) : N;
  }, O = (N, H) => {
    const j = Array.isArray(H) ? [Yl(H[0]), H[1] ? Yl(H[1]) : void 0] : Yl(H), te = !e.disabledTimes(j);
    return N && te;
  }, T = (N, H) => e.disabledTimes ? Array.isArray(e.disabledTimes) ? P(H, N) : O(H, N) : H, A = (N) => {
    let H = !0;
    if (!N || S()) return !0;
    const j = !a.value.minDate && !a.value.maxDate ? E(N) : N;
    return (e.maxTime || a.value.maxDate) && (H = HC(
      e.maxTime,
      a.value.maxDate,
      "max",
      Za(j),
      H
    )), (e.minTime || a.value.minDate) && (H = HC(
      e.minTime,
      a.value.minDate,
      "min",
      Za(j),
      H
    )), T(N, H);
  }, V = (N) => {
    if (!e.monthPicker) return !0;
    let H = !0;
    const j = ut(Ui(N));
    if (a.value.minDate && a.value.maxDate) {
      const te = ut(Ui(a.value.minDate)), de = ut(Ui(a.value.maxDate));
      return Oa(j, te) && Sa(j, de) || mn(j, te) || mn(j, de);
    }
    if (a.value.minDate) {
      const te = ut(Ui(a.value.minDate));
      H = Oa(j, te) || mn(j, te);
    }
    if (a.value.maxDate) {
      const te = ut(Ui(a.value.maxDate));
      H = Sa(j, te) || mn(j, te);
    }
    return H;
  }, M = W(() => (N) => !e.enableTimePicker || e.ignoreTimeValidation ? !0 : A(N)), B = W(() => (N) => e.monthPicker ? Array.isArray(N) && (n.value.enabled || r.value.enabled) ? !N.filter((H) => !V(H)).length : V(N) : !0);
  return {
    isDisabled: v,
    validateDate: s,
    validateMonthYearInRange: h,
    isDateRangeAllowed: w,
    checkMinMaxRange: y,
    isValidTime: A,
    isTimeValid: M,
    isMonthValid: B
  };
}, vp = () => {
  const e = W(() => (a, r) => a?.includes(r)), t = W(() => (a, r) => a.count ? a.solo ? !0 : r === 0 : !0), n = W(() => (a, r) => a.count ? a.solo ? !0 : r === a.count - 1 : !0);
  return { hideNavigationButtons: e, showLeftIcon: t, showRightIcon: n };
}, W6 = (e, t, n) => {
  const a = Se(0), r = oa({
    [Kl.timePicker]: !e.enableTimePicker || e.timePicker || e.monthPicker,
    [Kl.calendar]: !1,
    [Kl.header]: !1
  }), i = W(() => e.monthPicker || e.timePicker), o = (f) => {
    var h;
    if ((h = e.flow) != null && h.length) {
      if (!f && i.value) return u();
      r[f] = !0, Object.keys(r).filter((g) => !r[g]).length || u();
    }
  }, l = () => {
    var f, h;
    (f = e.flow) != null && f.length && a.value !== -1 && (a.value += 1, t("flow-step", a.value), u()), ((h = e.flow) == null ? void 0 : h.length) === a.value && Vt().then(() => s());
  }, s = () => {
    a.value = -1;
  }, d = (f, h, ...g) => {
    var v, w;
    e.flow[a.value] === f && n.value && ((w = (v = n.value)[h]) == null || w.call(v, ...g));
  }, u = (f = 0) => {
    f && (a.value += f), d(br.month, "toggleMonthPicker", !0), d(br.year, "toggleYearPicker", !0), d(br.calendar, "toggleTimePicker", !1, !0), d(br.time, "toggleTimePicker", !0, !0);
    const h = e.flow[a.value];
    (h === br.hours || h === br.minutes || h === br.seconds) && d(h, "toggleTimePicker", !0, !0, h);
  };
  return { childMount: o, updateFlowStep: l, resetFlow: s, handleFlow: u, flowStep: a };
}, j6 = {
  key: 1,
  class: "dp__input_wrap"
}, K6 = ["id", "name", "inputmode", "placeholder", "disabled", "readonly", "required", "value", "autocomplete", "aria-label", "aria-disabled", "aria-invalid"], Y6 = {
  key: 2,
  class: "dp--clear-btn"
}, G6 = ["aria-label"], Q6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerInput",
  props: {
    isMenuOpen: { type: Boolean, default: !1 },
    inputValue: { type: String, default: "" },
    ...hp
  },
  emits: [
    "clear",
    "open",
    "update:input-value",
    "set-input-date",
    "close",
    "select-date",
    "set-empty-date",
    "toggle",
    "focus-prev",
    "focus",
    "blur",
    "real-blur",
    "text-input"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      defaultedTextInput: i,
      defaultedAriaLabels: o,
      defaultedInline: l,
      defaultedConfig: s,
      defaultedRange: d,
      defaultedMultiDates: u,
      defaultedUI: f,
      getDefaultPattern: h,
      getDefaultStartTime: g
    } = da(r), { checkMinMaxRange: v } = rl(r), w = Se(), b = Se(null), p = Se(!1), y = Se(!1), S = W(
      () => ({
        dp__pointer: !r.disabled && !r.readonly && !i.value.enabled,
        dp__disabled: r.disabled,
        dp__input_readonly: !i.value.enabled,
        dp__input: !0,
        dp__input_icon_pad: !r.hideInputIcon,
        dp__input_valid: typeof r.state == "boolean" ? r.state : !1,
        dp__input_invalid: typeof r.state == "boolean" ? !r.state : !1,
        dp__input_focus: p.value || r.isMenuOpen,
        dp__input_reg: !i.value.enabled,
        ...f.value.input ?? {}
      })
    ), E = () => {
      a("set-input-date", null), r.clearable && r.autoApply && (a("set-empty-date"), w.value = null);
    }, C = (K) => {
      const se = g();
      return dq(
        K,
        i.value.format ?? h(),
        se ?? oE({}, r.enableSeconds),
        r.inputValue,
        y.value,
        r.formatLocale
      );
    }, D = (K) => {
      const { rangeSeparator: se } = i.value, [X, he] = K.split(`${se}`);
      if (X) {
        const ve = C(X.trim()), pe = he ? C(he.trim()) : void 0;
        if (nc(ve, pe)) return;
        const z = ve && pe ? [ve, pe] : [ve];
        v(pe, z, 0) && (w.value = ve ? z : null);
      }
    }, P = () => {
      y.value = !0;
    }, O = (K) => {
      if (d.value.enabled)
        D(K);
      else if (u.value.enabled) {
        const se = K.split(";");
        w.value = se.map((X) => C(X.trim())).filter((X) => X);
      } else
        w.value = C(K);
    }, T = (K) => {
      var se;
      const X = typeof K == "string" ? K : (se = K.target) == null ? void 0 : se.value;
      X !== "" ? (i.value.openMenu && !r.isMenuOpen && a("open"), O(X), a("set-input-date", w.value)) : E(), y.value = !1, a("update:input-value", X), a("text-input", K, w.value);
    }, A = (K) => {
      i.value.enabled ? (O(K.target.value), i.value.enterSubmit && gb(w.value) && r.inputValue !== "" ? (a("set-input-date", w.value, !0), w.value = null) : i.value.enterSubmit && r.inputValue === "" && (w.value = null, a("clear"))) : B(K);
    }, V = (K, se) => {
      i.value.enabled && i.value.tabSubmit && !se && O(K.target.value), i.value.tabSubmit && gb(w.value) && r.inputValue !== "" ? (a("set-input-date", w.value, !0, !0), w.value = null) : i.value.tabSubmit && r.inputValue === "" && (w.value = null, a("clear", !0));
    }, M = () => {
      p.value = !0, a("focus"), Vt().then(() => {
        var K;
        i.value.enabled && i.value.selectOnFocus && ((K = b.value) == null || K.select());
      });
    }, B = (K) => {
      if (Ns(K, s.value, !0), i.value.enabled && i.value.openMenu && !l.value.input) {
        if (i.value.openMenu === "open" && !r.isMenuOpen) return a("open");
        if (i.value.openMenu === "toggle") return a("toggle");
      } else i.value.enabled || a("toggle");
    }, N = () => {
      a("real-blur"), p.value = !1, (!r.isMenuOpen || l.value.enabled && l.value.input) && a("blur"), r.autoApply && i.value.enabled && w.value && !r.isMenuOpen && (a("set-input-date", w.value), a("select-date"), w.value = null);
    }, H = (K) => {
      Ns(K, s.value, !0), a("clear");
    }, j = () => {
      a("close");
    }, te = (K) => {
      if (K.key === "Tab" && V(K), K.key === "Enter" && A(K), K.key === "Escape" && i.value.escClose && j(), !i.value.enabled) {
        if (K.code === "Tab") return;
        K.preventDefault();
      }
    }, de = () => {
      var K;
      (K = b.value) == null || K.focus({ preventScroll: !0 });
    }, Z = (K) => {
      w.value = K;
    }, F = (K) => {
      K.key === Gn.tab && V(K, !0);
    };
    return t({
      focusInput: de,
      setParsedDate: Z
    }), (K, se) => {
      var X, he, ve;
      return ee(), Oe("div", { onClick: B }, [
        K.$slots.trigger && !K.$slots["dp-input"] && !fe(l).enabled ? bt(K.$slots, "trigger", { key: 0 }) : ye("", !0),
        !K.$slots.trigger && (!fe(l).enabled || fe(l).input) ? (ee(), Oe("div", j6, [
          K.$slots["dp-input"] && !K.$slots.trigger && (!fe(l).enabled || fe(l).enabled && fe(l).input) ? bt(K.$slots, "dp-input", {
            key: 0,
            value: e.inputValue,
            isMenuOpen: e.isMenuOpen,
            onInput: T,
            onEnter: A,
            onTab: V,
            onClear: H,
            onBlur: N,
            onKeypress: te,
            onPaste: P,
            onFocus: M,
            openMenu: () => K.$emit("open"),
            closeMenu: () => K.$emit("close"),
            toggleMenu: () => K.$emit("toggle")
          }) : ye("", !0),
          K.$slots["dp-input"] ? ye("", !0) : (ee(), Oe("input", {
            key: 1,
            id: K.uid ? `dp-input-${K.uid}` : void 0,
            ref_key: "inputRef",
            ref: b,
            "data-test-id": "dp-input",
            name: K.name,
            class: Ie(S.value),
            inputmode: fe(i).enabled ? "text" : "none",
            placeholder: K.placeholder,
            disabled: K.disabled,
            readonly: K.readonly,
            required: K.required,
            value: e.inputValue,
            autocomplete: K.autocomplete,
            "aria-label": (X = fe(o)) == null ? void 0 : X.input,
            "aria-disabled": K.disabled || void 0,
            "aria-invalid": K.state === !1 ? !0 : void 0,
            onInput: T,
            onBlur: N,
            onFocus: M,
            onKeypress: te,
            onKeydown: se[0] || (se[0] = (pe) => te(pe)),
            onPaste: P
          }, null, 42, K6)),
          I("div", {
            onClick: se[3] || (se[3] = (pe) => a("toggle"))
          }, [
            K.$slots["input-icon"] && !K.hideInputIcon ? (ee(), Oe("span", {
              key: 0,
              class: "dp__input_icon",
              onClick: se[1] || (se[1] = (pe) => a("toggle"))
            }, [
              bt(K.$slots, "input-icon")
            ])) : ye("", !0),
            !K.$slots["input-icon"] && !K.hideInputIcon && !K.$slots["dp-input"] ? (ee(), Re(fe(Gu), {
              key: 1,
              "aria-label": (he = fe(o)) == null ? void 0 : he.calendarIcon,
              class: "dp__input_icon dp__input_icons",
              onClick: se[2] || (se[2] = (pe) => a("toggle"))
            }, null, 8, ["aria-label"])) : ye("", !0)
          ]),
          K.$slots["clear-icon"] && (K.alwaysClearable || e.inputValue && K.clearable && !K.disabled && !K.readonly) ? (ee(), Oe("span", Y6, [
            bt(K.$slots, "clear-icon", { clear: H })
          ])) : ye("", !0),
          !K.$slots["clear-icon"] && (K.alwaysClearable || K.clearable && e.inputValue && !K.disabled && !K.readonly) ? (ee(), Oe("button", {
            key: 3,
            "aria-label": (ve = fe(o)) == null ? void 0 : ve.clearInput,
            class: "dp--clear-btn",
            type: "button",
            onKeydown: se[4] || (se[4] = (pe) => fe(Lr)(pe, () => H(pe), !0, F)),
            onClick: se[5] || (se[5] = ia((pe) => H(pe), ["prevent"]))
          }, [
            _(fe(QI), {
              class: "dp__input_icons",
              "data-test-id": "clear-icon"
            })
          ], 40, G6)) : ye("", !0)
        ])) : ye("", !0)
      ]);
    };
  }
}), J6 = typeof window < "u" ? window : void 0, oy = () => {
}, X6 = (e) => ex() ? (qa(e), !0) : !1, Z6 = (e, t, n, a) => {
  if (!e) return oy;
  let r = oy;
  const i = nt(
    () => fe(e),
    (l) => {
      r(), l && (l.removeEventListener(t, n), l.addEventListener(t, n, a), r = () => {
        l.removeEventListener(t, n, a), r = oy;
      });
    },
    { immediate: !0, flush: "post" }
  ), o = () => {
    i(), r();
  };
  return X6(o), o;
}, eH = (e, t, n, a = {}) => {
  const { window: r = J6, event: i = "pointerdown" } = a;
  return r ? Z6(r, i, (o) => {
    const l = $a(e), s = $a(t);
    !l || !s || l === o.target || o.composedPath().includes(l) || o.composedPath().includes(s) || n(o);
  }, { passive: !0 }) : void 0;
}, tH = ["data-dp-mobile"], nH = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "VueDatePicker",
  props: {
    ...hp
  },
  emits: [
    "update:model-value",
    "update:model-timezone-value",
    "text-submit",
    "closed",
    "cleared",
    "open",
    "focus",
    "blur",
    "internal-model-change",
    "recalculate-position",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "date-update",
    "invalid-date",
    "overlay-toggle",
    "text-input"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = lc(), o = Se(!1), l = we(r, "modelValue"), s = we(r, "timezone"), d = Se(null), u = Se(null), f = Se(null), h = Se(!1), g = Se(null), v = Se(!1), w = Se(!1), b = Se(!1), p = Se(!1), { setMenuFocused: y, setShiftKey: S } = uE(), { clearArrowNav: E } = al(), { validateDate: C, isValidTime: D } = rl(r), {
      defaultedTransitions: P,
      defaultedTextInput: O,
      defaultedInline: T,
      defaultedConfig: A,
      defaultedRange: V,
      defaultedMultiDates: M
    } = da(r), { menuTransition: B, showTransition: N } = Kf(P), { isMobile: H } = vE(A), j = cs();
    on(() => {
      z(r.modelValue), Vt().then(() => {
        if (!T.value.enabled) {
          const je = X(g.value);
          je?.addEventListener("scroll", Te), window?.addEventListener("resize", ie);
        }
      }), T.value.enabled && (o.value = !0), window?.addEventListener("keyup", ge), window?.addEventListener("keydown", Pe);
    }), di(() => {
      if (!T.value.enabled) {
        const je = X(g.value);
        je?.removeEventListener("scroll", Te), window?.removeEventListener("resize", ie);
      }
      window?.removeEventListener("keyup", ge), window?.removeEventListener("keydown", Pe);
    });
    const te = li(i, "all", r.presetDates), de = li(i, "input");
    nt(
      [l, s],
      () => {
        z(l.value);
      },
      { deep: !0 }
    );
    const { openOnTop: Z, menuStyle: F, xCorrect: K, setMenuPosition: se, getScrollableParent: X, shadowRender: he } = $6({
      menuRef: d,
      menuRefInner: u,
      inputRef: f,
      pickerWrapperRef: g,
      inline: T,
      emit: a,
      props: r,
      slots: i
    }), {
      inputValue: ve,
      internalModelValue: pe,
      parseExternalModelValue: z,
      emitModelValue: ke,
      formatInputValue: Me,
      checkBeforeEmit: Le
    } = Rq(a, r, h), ce = W(
      () => ({
        dp__main: !0,
        dp__theme_dark: r.dark,
        dp__theme_light: !r.dark,
        dp__flex_display: T.value.enabled,
        "dp--flex-display-collapsed": b.value,
        dp__flex_display_with_input: T.value.input
      })
    ), ne = W(() => r.dark ? "dp__theme_dark" : "dp__theme_light"), G = W(() => r.teleport ? {
      to: typeof r.teleport == "boolean" ? "body" : r.teleport,
      disabled: !r.teleport || T.value.enabled
    } : {}), le = W(() => ({ class: "dp__outer_menu_wrap" })), Y = W(() => T.value.enabled && (r.timePicker || r.monthPicker || r.yearPicker || r.quarterPicker)), Ce = () => {
      var je, st;
      return ((st = (je = f.value) == null ? void 0 : je.$el) == null ? void 0 : st.getBoundingClientRect()) ?? { width: 0, left: 0, right: 0 };
    }, Te = () => {
      o.value && (A.value.closeOnScroll ? Dt() : se());
    }, ie = () => {
      var je;
      o.value && se();
      const st = ((je = u.value) == null ? void 0 : je.$el.getBoundingClientRect().width) ?? 0;
      b.value = document.body.offsetWidth <= st;
    }, ge = (je) => {
      je.key === "Tab" && !T.value.enabled && !r.teleport && A.value.tabOutClosesMenu && (g.value.contains(document.activeElement) || Dt()), w.value = je.shiftKey;
    }, Pe = (je) => {
      w.value = je.shiftKey;
    }, Ee = () => {
      !r.disabled && !r.readonly && (he(j, YC, r), se(!1), o.value = !0, o.value && a("open"), o.value || rt(), z(r.modelValue));
    }, Je = () => {
      var je, st;
      ve.value = "", rt(), (je = u.value) == null || je.onValueCleared(), (st = f.value) == null || st.setParsedDate(null), a("update:model-value", null), a("update:model-timezone-value", null), a("cleared"), A.value.closeOnClearValue && Dt();
    }, _e = () => {
      const je = pe.value;
      return !je || !Array.isArray(je) && C(je) ? !0 : Array.isArray(je) ? M.value.enabled || je.length === 2 && C(je[0]) && C(je[1]) ? !0 : V.value.partialRange && !r.timePicker ? C(je[0]) : !1 : !1;
    }, $e = () => {
      Le() && _e() ? (ke(), Dt()) : a("invalid-select", pe.value);
    }, Ze = (je) => {
      _t(), ke(), A.value.closeOnAutoApply && !je && Dt();
    }, _t = () => {
      f.value && O.value.enabled && f.value.setParsedDate(pe.value);
    }, It = (je = !1) => {
      r.autoApply && D(pe.value) && _e() && (V.value.enabled && Array.isArray(pe.value) ? (V.value.partialRange || pe.value.length === 2) && Ze(je) : Ze(je));
    }, rt = () => {
      O.value.enabled || (pe.value = null);
    }, Dt = (je = !1) => {
      var st, pt;
      je && pe.value && A.value.setDateOnMenuClose && $e(), T.value.enabled || (o.value && (o.value = !1, K.value = !1, y(!1), S(!1), E(), a("closed"), ve.value && z(l.value)), rt(), a("blur"), (pt = (st = u.value) == null ? void 0 : st.$el) == null || pt.remove());
    }, en = (je, st, pt = !1) => {
      if (!je) {
        pe.value = null;
        return;
      }
      const xa = Array.isArray(je) ? !je.some((_r) => !C(_r)) : C(je), Ua = D(je);
      xa && Ua ? (p.value = !0, pe.value = je, st ? (v.value = pt, $e(), a("text-submit")) : r.autoApply && It(), Vt().then(() => {
        p.value = !1;
      })) : a("invalid-date", je);
    }, zn = () => {
      r.autoApply && D(pe.value) && ke(), _t();
    }, ta = () => o.value ? Dt() : Ee(), Na = (je) => {
      pe.value = je;
    }, ba = () => {
      O.value.enabled && (h.value = !0, Me()), a("focus");
    }, Wn = () => {
      if (O.value.enabled && (h.value = !1, z(r.modelValue), v.value)) {
        const je = lq(g.value, w.value);
        je?.focus();
      }
      a("blur");
    }, Vn = (je) => {
      u.value && u.value.updateMonthYear(0, {
        month: UC(je.month),
        year: UC(je.year)
      });
    }, Ja = (je) => {
      z(je ?? r.modelValue);
    }, xe = (je, st) => {
      var pt;
      (pt = u.value) == null || pt.switchView(je, st);
    }, ze = (je, st) => A.value.onClickOutside ? A.value.onClickOutside(je, st) : Dt(!0), ft = (je = 0) => {
      var st;
      (st = u.value) == null || st.handleFlow(je);
    }, it = () => d;
    return eH(
      d,
      f,
      (je) => ze(_e, je)
    ), t({
      closeMenu: Dt,
      selectDate: $e,
      clearValue: Je,
      openMenu: Ee,
      onScroll: Te,
      formatInputValue: Me,
      // exposed for testing purposes
      updateInternalModelValue: Na,
      // modify internal modelValue
      setMonthYear: Vn,
      parseModel: Ja,
      switchView: xe,
      toggleMenu: ta,
      handleFlow: ft,
      getDpWrapMenuRef: it
    }), (je, st) => (ee(), Oe("div", {
      ref_key: "pickerWrapperRef",
      ref: g,
      class: Ie(ce.value),
      "data-datepicker-instance": "",
      "data-dp-mobile": fe(H)
    }, [
      _(Q6, He({
        ref_key: "inputRef",
        ref: f,
        "input-value": fe(ve),
        "onUpdate:inputValue": st[0] || (st[0] = (pt) => ga(ve) ? ve.value = pt : null),
        "is-menu-open": o.value
      }, je.$props, {
        onClear: Je,
        onOpen: Ee,
        onSetInputDate: en,
        onSetEmptyDate: fe(ke),
        onSelectDate: $e,
        onToggle: ta,
        onClose: Dt,
        onFocus: ba,
        onBlur: Wn,
        onRealBlur: st[1] || (st[1] = (pt) => h.value = !1),
        onTextInput: st[2] || (st[2] = (pt) => je.$emit("text-input", pt))
      }), dr({ _: 2 }, [
        rn(fe(de), (pt, xa) => ({
          name: pt,
          fn: x((Ua) => [
            bt(je.$slots, pt, Jn(Ca(Ua)))
          ])
        }))
      ]), 1040, ["input-value", "is-menu-open", "onSetEmptyDate"]),
      (ee(), Re(Hu(je.teleport ? Tx : "div"), Jn(Ca(G.value)), {
        default: x(() => [
          _(Ur, {
            name: fe(B)(fe(Z)),
            css: fe(N) && !fe(T).enabled
          }, {
            default: x(() => [
              o.value ? (ee(), Oe("div", He({
                key: 0,
                ref_key: "dpWrapMenuRef",
                ref: d
              }, le.value, {
                class: { "dp--menu-wrapper": !fe(T).enabled },
                style: fe(T).enabled ? void 0 : fe(F)
              }), [
                _(YC, He({
                  ref_key: "dpMenuRef",
                  ref: u
                }, je.$props, {
                  "internal-model-value": fe(pe),
                  "onUpdate:internalModelValue": st[3] || (st[3] = (pt) => ga(pe) ? pe.value = pt : null),
                  class: { [ne.value]: !0, "dp--menu-wrapper": je.teleport },
                  "open-on-top": fe(Z),
                  "no-overlay-focus": Y.value,
                  collapse: b.value,
                  "get-input-rect": Ce,
                  "is-text-input-date": p.value,
                  onClosePicker: Dt,
                  onSelectDate: $e,
                  onAutoApply: It,
                  onTimeUpdate: zn,
                  onFlowStep: st[4] || (st[4] = (pt) => je.$emit("flow-step", pt)),
                  onUpdateMonthYear: st[5] || (st[5] = (pt) => je.$emit("update-month-year", pt)),
                  onInvalidSelect: st[6] || (st[6] = (pt) => je.$emit("invalid-select", fe(pe))),
                  onAutoApplyInvalid: st[7] || (st[7] = (pt) => je.$emit("invalid-select", pt)),
                  onInvalidFixedRange: st[8] || (st[8] = (pt) => je.$emit("invalid-fixed-range", pt)),
                  onRecalculatePosition: fe(se),
                  onTooltipOpen: st[9] || (st[9] = (pt) => je.$emit("tooltip-open", pt)),
                  onTooltipClose: st[10] || (st[10] = (pt) => je.$emit("tooltip-close", pt)),
                  onTimePickerOpen: st[11] || (st[11] = (pt) => je.$emit("time-picker-open", pt)),
                  onTimePickerClose: st[12] || (st[12] = (pt) => je.$emit("time-picker-close", pt)),
                  onAmPmChange: st[13] || (st[13] = (pt) => je.$emit("am-pm-change", pt)),
                  onRangeStart: st[14] || (st[14] = (pt) => je.$emit("range-start", pt)),
                  onRangeEnd: st[15] || (st[15] = (pt) => je.$emit("range-end", pt)),
                  onDateUpdate: st[16] || (st[16] = (pt) => je.$emit("date-update", pt)),
                  onInvalidDate: st[17] || (st[17] = (pt) => je.$emit("invalid-date", pt)),
                  onOverlayToggle: st[18] || (st[18] = (pt) => je.$emit("overlay-toggle", pt)),
                  onMenuBlur: st[19] || (st[19] = (pt) => je.$emit("blur"))
                }), dr({ _: 2 }, [
                  rn(fe(te), (pt, xa) => ({
                    name: pt,
                    fn: x((Ua) => [
                      bt(je.$slots, pt, Jn(Ca({ ...Ua })))
                    ])
                  }))
                ]), 1040, ["internal-model-value", "class", "open-on-top", "no-overlay-focus", "collapse", "is-text-input-date", "onRecalculatePosition"])
              ], 16)) : ye("", !0)
            ]),
            _: 3
          }, 8, ["name", "css"])
        ]),
        _: 3
      }, 16))
    ], 10, tH));
  }
}), g0 = /* @__PURE__ */ (() => {
  const e = nH;
  return e.install = (t) => {
    t.component("Vue3DatePicker", e);
  }, e;
})(), aH = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: g0
}, Symbol.toStringTag, { value: "Module" }));
Object.entries(aH).forEach(([e, t]) => {
  e !== "default" && (g0[e] = t);
});
function rH(e) {
  return { all: e = e || /* @__PURE__ */ new Map(), on: function(t, n) {
    var a = e.get(t);
    a ? a.push(n) : e.set(t, [n]);
  }, off: function(t, n) {
    var a = e.get(t);
    a && (n ? a.splice(a.indexOf(n) >>> 0, 1) : e.set(t, []));
  }, emit: function(t, n) {
    var a = e.get(t);
    a && a.slice().map(function(r) {
      r(n);
    }), (a = e.get("*")) && a.slice().map(function(r) {
      r(t, n);
    });
  } };
}
const iH = {
  install: (e, t) => {
    e.config.globalProperties.__ = window.__, e.config.globalProperties.frappe = window.frappe, e.config.globalProperties.eventBus = rH();
  }
}, oH = {
  install(e, { vuetify: t }) {
    const n = document.documentElement, a = () => {
      const l = n.getAttribute("data-theme-mode") || "light";
      return l === "automatic" ? window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" : l;
    }, r = Se(a());
    t.theme.global.name.value = r.value, new MutationObserver(() => {
      r.value = a(), t.theme.global.name.value = r.value;
    }).observe(n, { attributes: !0, attributeFilter: ["data-theme-mode", "data-theme"] });
    const o = () => {
      const s = (n.getAttribute("data-theme-mode") || "light") === "dark" ? "light" : "dark";
      n.setAttribute("data-theme-mode", s), window.frappe?.ui?.set_theme ? window.frappe.ui.set_theme(s) : n.setAttribute("data-theme", s), window.frappe?.xcall && window.frappe.xcall("frappe.core.doctype.user.user.switch_theme", {
        theme: s.charAt(0).toUpperCase() + s.slice(1)
      }).catch(() => {
      });
    };
    e.config.globalProperties.$theme = {
      get current() {
        return r.value;
      },
      toggle: o,
      isDark: r
    };
  }
}, sH = Be({
  ...vt(),
  ...GT({
    fullHeight: !0
  }),
  ...sn()
}, "VApp"), lH = We()({
  name: "VApp",
  props: sH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = yn(e), {
      layoutClasses: r,
      getLayoutItem: i,
      items: o,
      layoutRef: l
    } = JT(e), {
      rtlClasses: s
    } = Ra();
    return Ge(() => I("div", {
      ref: l,
      class: Ie(["v-application", a.themeClasses.value, r.value, s.value, e.class]),
      style: Xe([e.style])
    }, [I("div", {
      class: "v-application__wrap"
    }, [n.default?.()])])), {
      getLayoutItem: i,
      items: o,
      theme: a
    };
  }
}), qt = Be({
  tag: {
    type: [String, Object, Function],
    default: "div"
  }
}, "tag"), gE = Be({
  text: String,
  ...vt(),
  ...qt()
}, "VToolbarTitle"), y0 = We()({
  name: "VToolbarTitle",
  props: gE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = !!(n.default || n.text || e.text);
      return _(e.tag, {
        class: Ie(["v-toolbar-title", e.class]),
        style: Xe(e.style)
      }, {
        default: () => [a && I("div", {
          class: "v-toolbar-title__placeholder"
        }, [n.text ? n.text() : e.text, n.default?.()])]
      });
    }), {};
  }
}), cH = Be({
  disabled: Boolean,
  group: Boolean,
  hideOnLeave: Boolean,
  leaveAbsolute: Boolean,
  mode: String,
  origin: String
}, "transition");
function hi(e, t, n) {
  return We()({
    name: e,
    props: cH({
      mode: n,
      origin: t
    }),
    setup(a, r) {
      let {
        slots: i
      } = r;
      const o = {
        onBeforeEnter(l) {
          a.origin && (l.style.transformOrigin = a.origin);
        },
        onLeave(l) {
          if (a.leaveAbsolute) {
            const {
              offsetTop: s,
              offsetLeft: d,
              offsetWidth: u,
              offsetHeight: f
            } = l;
            l._transitionInitialStyles = {
              position: l.style.position,
              top: l.style.top,
              left: l.style.left,
              width: l.style.width,
              height: l.style.height
            }, l.style.position = "absolute", l.style.top = `${s}px`, l.style.left = `${d}px`, l.style.width = `${u}px`, l.style.height = `${f}px`;
          }
          a.hideOnLeave && l.style.setProperty("display", "none", "important");
        },
        onAfterLeave(l) {
          if (a.leaveAbsolute && l?._transitionInitialStyles) {
            const {
              position: s,
              top: d,
              left: u,
              width: f,
              height: h
            } = l._transitionInitialStyles;
            delete l._transitionInitialStyles, l.style.position = s || "", l.style.top = d || "", l.style.left = u || "", l.style.width = f || "", l.style.height = h || "";
          }
        }
      };
      return () => {
        const l = a.group ? bw : Ur;
        return Co(l, {
          name: a.disabled ? "" : e,
          css: !a.disabled,
          ...a.group ? void 0 : {
            mode: a.mode
          },
          ...a.disabled ? {} : o
        }, i.default);
      };
    }
  });
}
function yE(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "in-out";
  return We()({
    name: e,
    props: {
      mode: {
        type: String,
        default: n
      },
      disabled: Boolean,
      group: Boolean
    },
    setup(a, r) {
      let {
        slots: i
      } = r;
      const o = a.group ? bw : Ur;
      return () => Co(o, {
        name: a.disabled ? "" : e,
        css: !a.disabled,
        // mode: props.mode, // TODO: vuejs/vue-next#3104
        ...a.disabled ? {} : t
      }, i.default);
    }
  });
}
function bE() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  const n = (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1) ? "width" : "height", a = Nr(`offset-${n}`);
  return {
    onBeforeEnter(o) {
      o._parent = o.parentNode, o._initialStyle = {
        transition: o.style.transition,
        overflow: o.style.overflow,
        [n]: o.style[n]
      };
    },
    onEnter(o) {
      const l = o._initialStyle;
      if (!l) return;
      o.style.setProperty("transition", "none", "important"), o.style.overflow = "hidden";
      const s = `${o[a]}px`;
      o.style[n] = "0", o.offsetHeight, o.style.transition = l.transition, e && o._parent && o._parent.classList.add(e), requestAnimationFrame(() => {
        o.style[n] = s;
      });
    },
    onAfterEnter: i,
    onEnterCancelled: i,
    onLeave(o) {
      o._initialStyle = {
        transition: "",
        overflow: o.style.overflow,
        [n]: o.style[n]
      }, o.style.overflow = "hidden", o.style[n] = `${o[a]}px`, o.offsetHeight, requestAnimationFrame(() => o.style[n] = "0");
    },
    onAfterLeave: r,
    onLeaveCancelled: r
  };
  function r(o) {
    e && o._parent && o._parent.classList.remove(e), i(o);
  }
  function i(o) {
    if (!o._initialStyle) return;
    const l = o._initialStyle[n];
    o.style.overflow = o._initialStyle.overflow, l != null && (o.style[n] = l), delete o._initialStyle;
  }
}
const uH = Be({
  target: [Object, Array]
}, "v-dialog-transition"), sy = /* @__PURE__ */ new WeakMap(), gp = We()({
  name: "VDialogTransition",
  props: uH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = {
      onBeforeEnter(r) {
        r.style.pointerEvents = "none", r.style.visibility = "hidden";
      },
      async onEnter(r, i) {
        await new Promise((g) => requestAnimationFrame(g)), await new Promise((g) => requestAnimationFrame(g)), r.style.visibility = "";
        const o = QC(e.target, r), {
          x: l,
          y: s,
          sx: d,
          sy: u,
          speed: f
        } = o;
        sy.set(r, o);
        const h = Fl(r, [{
          transform: `translate(${l}px, ${s}px) scale(${d}, ${u})`,
          opacity: 0
        }, {}], {
          duration: 225 * f,
          easing: G3
        });
        GC(r)?.forEach((g) => {
          Fl(g, [{
            opacity: 0
          }, {
            opacity: 0,
            offset: 0.33
          }, {}], {
            duration: 225 * 2 * f,
            easing: _f
          });
        }), h.finished.then(() => i());
      },
      onAfterEnter(r) {
        r.style.removeProperty("pointer-events");
      },
      onBeforeLeave(r) {
        r.style.pointerEvents = "none";
      },
      async onLeave(r, i) {
        await new Promise((g) => requestAnimationFrame(g));
        let o;
        !sy.has(r) || Array.isArray(e.target) || e.target.offsetParent || e.target.getClientRects().length ? o = QC(e.target, r) : o = sy.get(r);
        const {
          x: l,
          y: s,
          sx: d,
          sy: u,
          speed: f
        } = o;
        Fl(r, [{}, {
          transform: `translate(${l}px, ${s}px) scale(${d}, ${u})`,
          opacity: 0
        }], {
          duration: 125 * f,
          easing: Q3
        }).finished.then(() => i()), GC(r)?.forEach((g) => {
          Fl(g, [{}, {
            opacity: 0,
            offset: 0.2
          }, {
            opacity: 0
          }], {
            duration: 125 * 2 * f,
            easing: _f
          });
        });
      },
      onAfterLeave(r) {
        r.style.removeProperty("pointer-events");
      }
    };
    return () => e.target ? _(Ur, He({
      name: "dialog-transition"
    }, a, {
      css: !1
    }), n) : _(Ur, {
      name: "dialog-transition"
    }, n);
  }
});
function GC(e) {
  const t = e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;
  return t && [...t];
}
function QC(e, t) {
  const n = xT(e), a = Aw(t), [r, i] = getComputedStyle(t).transformOrigin.split(" ").map((p) => parseFloat(p)), [o, l] = getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");
  let s = n.left + n.width / 2;
  o === "left" || l === "left" ? s -= n.width / 2 : (o === "right" || l === "right") && (s += n.width / 2);
  let d = n.top + n.height / 2;
  o === "top" || l === "top" ? d -= n.height / 2 : (o === "bottom" || l === "bottom") && (d += n.height / 2);
  const u = n.width / a.width, f = n.height / a.height, h = Math.max(1, u, f), g = u / h || 0, v = f / h || 0, w = a.width * a.height / (window.innerWidth * window.innerHeight), b = w > 0.12 ? Math.min(1.5, (w - 0.12) * 10 + 1) : 1;
  return {
    x: s - (r + a.left),
    y: d - (i + a.top),
    sx: g,
    sy: v,
    speed: b
  };
}
const dH = hi("fab-transition", "center center", "out-in"), fH = hi("dialog-bottom-transition"), mH = hi("dialog-top-transition"), xf = hi("fade-transition"), b0 = hi("scale-transition"), hH = hi("scroll-x-transition"), _H = hi("scroll-x-reverse-transition"), pH = hi("scroll-y-transition"), vH = hi("scroll-y-reverse-transition"), gH = hi("slide-x-transition"), yH = hi("slide-x-reverse-transition"), w0 = hi("slide-y-transition"), bH = hi("slide-y-reverse-transition"), yp = yE("expand-transition", bE()), k0 = yE("expand-x-transition", bE("", !0)), wH = Be({
  defaults: Object,
  disabled: Boolean,
  reset: [Number, String],
  root: [Boolean, String],
  scoped: Boolean
}, "VDefaultsProvider"), Wt = We(!1)({
  name: "VDefaultsProvider",
  props: wH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      defaults: a,
      disabled: r,
      reset: i,
      root: o,
      scoped: l
    } = $u(e);
    return ca(a, {
      reset: i,
      root: o,
      scoped: l,
      disabled: r
    }), () => n.default?.();
  }
}), La = Be({
  height: [Number, String],
  maxHeight: [Number, String],
  maxWidth: [Number, String],
  minHeight: [Number, String],
  minWidth: [Number, String],
  width: [Number, String]
}, "dimension");
function Fa(e) {
  return {
    dimensionStyles: W(() => {
      const n = {}, a = ht(e.height), r = ht(e.maxHeight), i = ht(e.maxWidth), o = ht(e.minHeight), l = ht(e.minWidth), s = ht(e.width);
      return a != null && (n.height = a), r != null && (n.maxHeight = r), i != null && (n.maxWidth = i), o != null && (n.minHeight = o), l != null && (n.minWidth = l), s != null && (n.width = s), n;
    })
  };
}
function kH(e) {
  return {
    aspectStyles: W(() => {
      const t = Number(e.aspectRatio);
      return t ? {
        paddingBottom: String(1 / t * 100) + "%"
      } : void 0;
    })
  };
}
const wE = Be({
  aspectRatio: [String, Number],
  contentClass: null,
  inline: Boolean,
  ...vt(),
  ...La()
}, "VResponsive"), bb = We()({
  name: "VResponsive",
  props: wE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      aspectStyles: a
    } = kH(e), {
      dimensionStyles: r
    } = Fa(e);
    return Ge(() => I("div", {
      class: Ie(["v-responsive", {
        "v-responsive--inline": e.inline
      }, e.class]),
      style: Xe([r.value, e.style])
    }, [I("div", {
      class: "v-responsive__sizer",
      style: Xe(a.value)
    }, null), n.additional?.(), n.default && I("div", {
      class: Ie(["v-responsive__content", e.contentClass])
    }, [n.default()])])), {};
  }
});
function S0(e) {
  return Cw(() => {
    const t = yo(e), n = [], a = {};
    if (t.background)
      if ($y(t.background)) {
        if (a.backgroundColor = t.background, !t.text && L3(t.background)) {
          const r = si(t.background);
          if (r.a == null || r.a === 1) {
            const i = MT(r);
            a.color = i, a.caretColor = i;
          }
        }
      } else
        n.push(`bg-${t.background}`);
    return t.text && ($y(t.text) ? (a.color = t.text, a.caretColor = t.text) : n.push(`text-${t.text}`)), {
      colorClasses: n,
      colorStyles: a
    };
  });
}
function mr(e) {
  const {
    colorClasses: t,
    colorStyles: n
  } = S0(() => ({
    text: yo(e)
  }));
  return {
    textColorClasses: t,
    textColorStyles: n
  };
}
function An(e) {
  const {
    colorClasses: t,
    colorStyles: n
  } = S0(() => ({
    background: yo(e)
  }));
  return {
    backgroundColorClasses: t,
    backgroundColorStyles: n
  };
}
const Hn = Be({
  rounded: {
    type: [Boolean, Number, String],
    default: void 0
  },
  tile: Boolean
}, "rounded");
function fa(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    roundedClasses: W(() => {
      const a = ga(e) ? e.value : e.rounded, r = ga(e) ? e.value : e.tile, i = [];
      if (a === !0 || a === "")
        i.push(`${t}--rounded`);
      else if (typeof a == "string" || a === 0)
        for (const o of String(a).split(" "))
          i.push(`rounded-${o}`);
      else (r || a === !1) && i.push("rounded-0");
      return i;
    })
  };
}
const Gi = Be({
  transition: {
    type: null,
    default: "fade-transition",
    validator: (e) => e !== !0
  }
}, "transition"), Sr = (e, t) => {
  let {
    slots: n
  } = t;
  const {
    transition: a,
    disabled: r,
    group: i,
    ...o
  } = e, {
    component: l = i ? bw : Ur,
    ...s
  } = mf(a) ? a : {};
  let d;
  return mf(a) ? d = He(s, g3({
    disabled: r,
    group: i
  }), o) : d = He({
    name: r || !a ? "" : a
  }, o), Co(l, d, n);
};
function SH(e, t) {
  if (!ww) return;
  const n = t.modifiers || {}, a = t.value, {
    handler: r,
    options: i
  } = typeof a == "object" ? a : {
    handler: a,
    options: {}
  }, o = new IntersectionObserver(function() {
    let l = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], s = arguments.length > 1 ? arguments[1] : void 0;
    const d = e._observe?.[t.instance.$.uid];
    if (!d) return;
    const u = l.some((f) => f.isIntersecting);
    r && (!n.quiet || d.init) && (!n.once || u || d.init) && r(u, l, s), u && n.once ? kE(e, t) : d.init = !0;
  }, i);
  e._observe = Object(e._observe), e._observe[t.instance.$.uid] = {
    init: !1,
    observer: o
  }, o.observe(e);
}
function kE(e, t) {
  const n = e._observe?.[t.instance.$.uid];
  n && (n.observer.unobserve(e), delete e._observe[t.instance.$.uid]);
}
const ns = {
  mounted: SH,
  unmounted: kE
}, SE = Be({
  absolute: Boolean,
  alt: String,
  cover: Boolean,
  color: String,
  draggable: {
    type: [Boolean, String],
    default: void 0
  },
  eager: Boolean,
  gradient: String,
  lazySrc: String,
  options: {
    type: Object,
    // For more information on types, navigate to:
    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    default: () => ({
      root: void 0,
      rootMargin: void 0,
      threshold: void 0
    })
  },
  sizes: String,
  src: {
    type: [String, Object],
    default: ""
  },
  crossorigin: String,
  referrerpolicy: String,
  srcset: String,
  position: String,
  ...wE(),
  ...vt(),
  ...Hn(),
  ...Gi()
}, "VImg"), as = We()({
  name: "VImg",
  directives: {
    vIntersect: ns
  },
  props: SE(),
  emits: {
    loadstart: (e) => !0,
    load: (e) => !0,
    error: (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      roundedClasses: o
    } = fa(e), l = ya("VImg"), s = ot(""), d = Se(), u = ot(e.eager ? "loading" : "idle"), f = ot(), h = ot(), g = W(() => e.src && typeof e.src == "object" ? {
      src: e.src.src,
      srcset: e.srcset || e.src.srcset,
      lazySrc: e.lazySrc || e.src.lazySrc,
      aspect: Number(e.aspectRatio || e.src.aspect || 0)
    } : {
      src: e.src,
      srcset: e.srcset,
      lazySrc: e.lazySrc,
      aspect: Number(e.aspectRatio || 0)
    }), v = W(() => g.value.aspect || f.value / h.value || 0);
    nt(() => e.src, () => {
      w(u.value !== "idle");
    }), nt(v, (M, B) => {
      !M && B && d.value && E(d.value);
    }), qu(() => w());
    function w(M) {
      if (!(e.eager && M) && !(ww && !M && !e.eager)) {
        if (u.value = "loading", g.value.lazySrc) {
          const B = new Image();
          B.src = g.value.lazySrc, E(B, null);
        }
        g.value.src && Vt(() => {
          n("loadstart", d.value?.currentSrc || g.value.src), setTimeout(() => {
            if (!l.isUnmounted)
              if (d.value?.complete) {
                if (d.value.naturalWidth || p(), u.value === "error") return;
                v.value || E(d.value, null), u.value === "loading" && b();
              } else
                v.value || E(d.value), y();
          });
        });
      }
    }
    function b() {
      l.isUnmounted || (y(), E(d.value), u.value = "loaded", n("load", d.value?.currentSrc || g.value.src));
    }
    function p() {
      l.isUnmounted || (u.value = "error", n("error", d.value?.currentSrc || g.value.src));
    }
    function y() {
      const M = d.value;
      M && (s.value = M.currentSrc || M.src);
    }
    let S = -1;
    Ga(() => {
      clearTimeout(S);
    });
    function E(M) {
      let B = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;
      const N = () => {
        if (clearTimeout(S), l.isUnmounted) return;
        const {
          naturalHeight: H,
          naturalWidth: j
        } = M;
        H || j ? (f.value = j, h.value = H) : !M.complete && u.value === "loading" && B != null ? S = window.setTimeout(N, B) : (M.currentSrc.endsWith(".svg") || M.currentSrc.startsWith("data:image/svg+xml")) && (f.value = 1, h.value = 1);
      };
      N();
    }
    const C = we(() => ({
      "v-img__img--cover": e.cover,
      "v-img__img--contain": !e.cover
    })), D = () => {
      if (!g.value.src || u.value === "idle") return null;
      const M = I("img", {
        class: Ie(["v-img__img", C.value]),
        style: {
          objectPosition: e.position
        },
        crossorigin: e.crossorigin,
        src: g.value.src,
        srcset: g.value.srcset,
        alt: e.alt,
        referrerpolicy: e.referrerpolicy,
        draggable: e.draggable,
        sizes: e.sizes,
        ref: d,
        onLoad: b,
        onError: p
      }, null), B = a.sources?.();
      return _(Sr, {
        transition: e.transition,
        appear: !0
      }, {
        default: () => [an(B ? I("picture", {
          class: "v-img__picture"
        }, [B, M]) : M, [[_a, u.value === "loaded"]])]
      });
    }, P = () => _(Sr, {
      transition: e.transition
    }, {
      default: () => [g.value.lazySrc && u.value !== "loaded" && I("img", {
        class: Ie(["v-img__img", "v-img__img--preload", C.value]),
        style: {
          objectPosition: e.position
        },
        crossorigin: e.crossorigin,
        src: g.value.lazySrc,
        alt: e.alt,
        referrerpolicy: e.referrerpolicy,
        draggable: e.draggable
      }, null)]
    }), O = () => a.placeholder ? _(Sr, {
      transition: e.transition,
      appear: !0
    }, {
      default: () => [(u.value === "loading" || u.value === "error" && !a.error) && I("div", {
        class: "v-img__placeholder"
      }, [a.placeholder()])]
    }) : null, T = () => a.error ? _(Sr, {
      transition: e.transition,
      appear: !0
    }, {
      default: () => [u.value === "error" && I("div", {
        class: "v-img__error"
      }, [a.error()])]
    }) : null, A = () => e.gradient ? I("div", {
      class: "v-img__gradient",
      style: {
        backgroundImage: `linear-gradient(${e.gradient})`
      }
    }, null) : null, V = ot(!1);
    {
      const M = nt(v, (B) => {
        B && (requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            V.value = !0;
          });
        }), M());
      });
    }
    return Ge(() => {
      const M = bb.filterProps(e);
      return an(_(bb, He({
        class: ["v-img", {
          "v-img--absolute": e.absolute,
          "v-img--booting": !V.value
        }, r.value, o.value, e.class],
        style: [{
          width: ht(e.width === "auto" ? f.value : e.width)
        }, i.value, e.style]
      }, M, {
        aspectRatio: v.value,
        "aria-label": e.alt,
        role: e.alt ? "img" : void 0
      }), {
        additional: () => I(Qe, null, [_(D, null, null), _(P, null, null), _(A, null, null), _(O, null, null), _(T, null, null)]),
        default: a.default
      }), [[ns, {
        handler: w,
        options: e.options
      }, null, {
        once: !0
      }]]);
    }), {
      currentSrc: s,
      image: d,
      state: u,
      naturalWidth: f,
      naturalHeight: h
    };
  }
}), Qr = Be({
  border: [Boolean, Number, String]
}, "border");
function _i(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    borderClasses: W(() => {
      const a = e.border;
      return a === !0 || a === "" ? `${t}--border` : typeof a == "string" || a === 0 ? String(a).split(" ").map((r) => `border-${r}`) : [];
    })
  };
}
const za = Be({
  elevation: {
    type: [Number, String],
    validator(e) {
      const t = parseInt(e);
      return !isNaN(t) && t >= 0 && // Material Design has a maximum elevation of 24
      // https://material.io/design/environment/elevation.html#default-elevations
      t <= 24;
    }
  }
}, "elevation");
function ir(e) {
  return {
    elevationClasses: we(() => {
      const n = ga(e) ? e.value : e.elevation;
      return n == null ? [] : [`elevation-${n}`];
    })
  };
}
const CH = [null, "prominent", "default", "comfortable", "compact"], CE = Be({
  absolute: Boolean,
  collapse: Boolean,
  color: String,
  density: {
    type: String,
    default: "default",
    validator: (e) => CH.includes(e)
  },
  extended: Boolean,
  extensionHeight: {
    type: [Number, String],
    default: 48
  },
  flat: Boolean,
  floating: Boolean,
  height: {
    type: [Number, String],
    default: 64
  },
  image: String,
  title: String,
  ...Qr(),
  ...vt(),
  ...za(),
  ...Hn(),
  ...qt({
    tag: "header"
  }),
  ...sn()
}, "VToolbar"), wb = We()({
  name: "VToolbar",
  props: CE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.color), {
      borderClasses: i
    } = _i(e), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e), {
      themeClasses: s
    } = yn(e), {
      rtlClasses: d
    } = Ra(), u = ot(!!(e.extended || n.extension?.())), f = W(() => parseInt(Number(e.height) + (e.density === "prominent" ? Number(e.height) : 0) - (e.density === "comfortable" ? 8 : 0) - (e.density === "compact" ? 16 : 0), 10)), h = W(() => u.value ? parseInt(Number(e.extensionHeight) + (e.density === "prominent" ? Number(e.extensionHeight) : 0) - (e.density === "comfortable" ? 4 : 0) - (e.density === "compact" ? 8 : 0), 10) : 0);
    return ca({
      VBtn: {
        variant: "text"
      }
    }), Ge(() => {
      const g = !!(e.title || n.title), v = !!(n.image || e.image), w = n.extension?.();
      return u.value = !!(e.extended || w), _(e.tag, {
        class: Ie(["v-toolbar", {
          "v-toolbar--absolute": e.absolute,
          "v-toolbar--collapse": e.collapse,
          "v-toolbar--flat": e.flat,
          "v-toolbar--floating": e.floating,
          [`v-toolbar--density-${e.density}`]: !0
        }, a.value, i.value, o.value, l.value, s.value, d.value, e.class]),
        style: Xe([r.value, e.style])
      }, {
        default: () => [v && I("div", {
          key: "image",
          class: "v-toolbar__image"
        }, [n.image ? _(Wt, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              cover: !0,
              src: e.image
            }
          }
        }, n.image) : _(as, {
          key: "image-img",
          cover: !0,
          src: e.image
        }, null)]), _(Wt, {
          defaults: {
            VTabs: {
              height: ht(f.value)
            }
          }
        }, {
          default: () => [I("div", {
            class: "v-toolbar__content",
            style: {
              height: ht(f.value)
            }
          }, [n.prepend && I("div", {
            class: "v-toolbar__prepend"
          }, [n.prepend?.()]), g && _(y0, {
            key: "title",
            text: e.title
          }, {
            text: n.title
          }), n.default?.(), n.append && I("div", {
            class: "v-toolbar__append"
          }, [n.append?.()])])]
        }), _(Wt, {
          defaults: {
            VTabs: {
              height: ht(h.value)
            }
          }
        }, {
          default: () => [_(yp, null, {
            default: () => [u.value && I("div", {
              class: "v-toolbar__extension",
              style: {
                height: ht(h.value)
              }
            }, [w])]
          })]
        })]
      });
    }), {
      contentHeight: f,
      extensionHeight: h
    };
  }
}), AH = Be({
  scrollTarget: {
    type: String
  },
  scrollThreshold: {
    type: [String, Number],
    default: 300
  }
}, "scroll");
function xH(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  const {
    canScroll: n
  } = t;
  let a = 0, r = 0;
  const i = Se(null), o = ot(0), l = ot(0), s = ot(0), d = ot(!1), u = ot(!1), f = W(() => Number(e.scrollThreshold)), h = W(() => Pn((f.value - o.value) / f.value || 0)), g = () => {
    const v = i.value;
    if (!v || n && !n.value) return;
    a = o.value, o.value = "window" in v ? v.pageYOffset : v.scrollTop;
    const w = v instanceof Window ? document.documentElement.scrollHeight : v.scrollHeight;
    if (r !== w) {
      r = w;
      return;
    }
    u.value = o.value < a, s.value = Math.abs(o.value - f.value);
  };
  return nt(u, () => {
    l.value = l.value || o.value;
  }), nt(d, () => {
    l.value = 0;
  }), on(() => {
    nt(() => e.scrollTarget, (v) => {
      const w = v ? document.querySelector(v) : window;
      w && w !== i.value && (i.value?.removeEventListener("scroll", g), i.value = w, i.value.addEventListener("scroll", g, {
        passive: !0
      }));
    }, {
      immediate: !0
    });
  }), Ga(() => {
    i.value?.removeEventListener("scroll", g);
  }), n && nt(n, g, {
    immediate: !0
  }), {
    scrollThreshold: f,
    currentScroll: o,
    currentThreshold: s,
    isScrollActive: d,
    scrollRatio: h,
    // required only for testing
    // probably can be removed
    // later (2 chars chlng)
    isScrollingUp: u,
    savedScroll: l
  };
}
function mc() {
  const e = ot(!1);
  return on(() => {
    window.requestAnimationFrame(() => {
      e.value = !0;
    });
  }), {
    ssrBootStyles: we(() => e.value ? void 0 : {
      transition: "none !important"
    }),
    isBooted: Uu(e)
  };
}
const TH = Be({
  scrollBehavior: String,
  modelValue: {
    type: Boolean,
    default: !0
  },
  location: {
    type: String,
    default: "top",
    validator: (e) => ["top", "bottom"].includes(e)
  },
  ...CE(),
  ...uc(),
  ...AH(),
  height: {
    type: [Number, String],
    default: 64
  }
}, "VAppBar"), IH = We()({
  name: "VAppBar",
  props: TH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Se(), r = kt(e, "modelValue"), i = W(() => {
      const y = new Set(e.scrollBehavior?.split(" ") ?? []);
      return {
        hide: y.has("hide"),
        fullyHide: y.has("fully-hide"),
        inverted: y.has("inverted"),
        collapse: y.has("collapse"),
        elevate: y.has("elevate"),
        fadeImage: y.has("fade-image")
        // shrink: behavior.has('shrink'),
      };
    }), o = W(() => {
      const y = i.value;
      return y.hide || y.fullyHide || y.inverted || y.collapse || y.elevate || y.fadeImage || // behavior.shrink ||
      !r.value;
    }), {
      currentScroll: l,
      scrollThreshold: s,
      isScrollingUp: d,
      scrollRatio: u
    } = xH(e, {
      canScroll: o
    }), f = we(() => i.value.hide || i.value.fullyHide), h = W(() => e.collapse || i.value.collapse && (i.value.inverted ? u.value > 0 : u.value === 0)), g = W(() => e.flat || i.value.fullyHide && !r.value || i.value.elevate && (i.value.inverted ? l.value > 0 : l.value === 0)), v = W(() => i.value.fadeImage ? i.value.inverted ? 1 - u.value : u.value : void 0), w = W(() => {
      if (i.value.hide && i.value.inverted) return 0;
      const y = a.value?.contentHeight ?? 0, S = a.value?.extensionHeight ?? 0;
      return f.value ? l.value < s.value || i.value.fullyHide ? y + S : y : y + S;
    });
    Fr(() => !!e.scrollBehavior, () => {
      Zn(() => {
        f.value ? i.value.inverted ? r.value = l.value > s.value : r.value = d.value || l.value < s.value : r.value = !0;
      });
    });
    const {
      ssrBootStyles: b
    } = mc(), {
      layoutItemStyles: p
    } = dc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: we(() => e.location),
      layoutSize: w,
      elementSize: ot(void 0),
      active: r,
      absolute: we(() => e.absolute)
    });
    return Ge(() => {
      const y = wb.filterProps(e);
      return _(wb, He({
        ref: a,
        class: ["v-app-bar", {
          "v-app-bar--bottom": e.location === "bottom"
        }, e.class],
        style: [{
          ...p.value,
          "--v-toolbar-image-opacity": v.value,
          height: void 0,
          ...b.value
        }, e.style]
      }, y, {
        collapse: h.value,
        flat: g.value
      }), n);
    }), {};
  }
}), EH = [null, "default", "comfortable", "compact"], Qa = Be({
  density: {
    type: String,
    default: "default",
    validator: (e) => EH.includes(e)
  }
}, "density");
function Ar(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    densityClasses: we(() => `${t}--density-${e.density}`)
  };
}
const PH = ["elevated", "flat", "tonal", "outlined", "text", "plain"];
function il(e, t) {
  return I(Qe, null, [e && I("span", {
    key: "overlay",
    class: Ie(`${t}__overlay`)
  }, null), I("span", {
    key: "underlay",
    class: Ie(`${t}__underlay`)
  }, null)]);
}
const Pi = Be({
  color: String,
  variant: {
    type: String,
    default: "elevated",
    validator: (e) => PH.includes(e)
  }
}, "variant");
function hc(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  const n = we(() => {
    const {
      variant: i
    } = yo(e);
    return `${t}--variant-${i}`;
  }), {
    colorClasses: a,
    colorStyles: r
  } = S0(() => {
    const {
      variant: i,
      color: o
    } = yo(e);
    return {
      [["elevated", "flat"].includes(i) ? "background" : "text"]: o
    };
  });
  return {
    colorClasses: a,
    colorStyles: r,
    variantClasses: n
  };
}
const AE = Be({
  baseColor: String,
  divided: Boolean,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...Hn(),
  ...qt(),
  ...sn(),
  ...Pi()
}, "VBtnGroup"), kb = We()({
  name: "VBtnGroup",
  props: AE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      densityClasses: r
    } = Ar(e), {
      borderClasses: i
    } = _i(e), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e);
    ca({
      VBtn: {
        height: "auto",
        baseColor: we(() => e.baseColor),
        color: we(() => e.color),
        density: we(() => e.density),
        flat: !0,
        variant: we(() => e.variant)
      }
    }), Ge(() => _(e.tag, {
      class: Ie(["v-btn-group", {
        "v-btn-group--divided": e.divided
      }, a.value, i.value, r.value, o.value, l.value, e.class]),
      style: Xe(e.style)
    }, n));
  }
}), _c = Be({
  modelValue: {
    type: null,
    default: void 0
  },
  multiple: Boolean,
  mandatory: [Boolean, String],
  max: Number,
  selectedClass: String,
  disabled: Boolean
}, "group"), pc = Be({
  value: null,
  disabled: Boolean,
  selectedClass: String
}, "group-item");
function vc(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0;
  const a = ya("useGroupItem");
  if (!a)
    throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");
  const r = $r();
  Nn(Symbol.for(`${t.description}:id`), r);
  const i = Gt(t, null);
  if (!i) {
    if (!n) return i;
    throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`);
  }
  const o = we(() => e.value), l = W(() => !!(i.disabled.value || e.disabled));
  i.register({
    id: r,
    value: o,
    disabled: l
  }, a), Ga(() => {
    i.unregister(r);
  });
  const s = W(() => i.isSelected(r)), d = W(() => i.items.value[0].id === r), u = W(() => i.items.value[i.items.value.length - 1].id === r), f = W(() => s.value && [i.selectedClass.value, e.selectedClass]);
  return nt(s, (h) => {
    a.emit("group:selected", {
      value: h
    });
  }, {
    flush: "sync"
  }), {
    id: r,
    isSelected: s,
    isFirst: d,
    isLast: u,
    toggle: () => i.select(r, !s.value),
    select: (h) => i.select(r, h),
    selectedClass: f,
    value: o,
    disabled: l,
    group: i
  };
}
function ol(e, t) {
  let n = !1;
  const a = oa([]), r = kt(e, "modelValue", [], (h) => h == null ? [] : xE(a, Xn(h)), (h) => {
    const g = DH(a, h);
    return e.multiple ? g : g[0];
  }), i = ya("useGroup");
  function o(h, g) {
    const v = h, w = Symbol.for(`${t.description}:id`), p = au(w, i?.vnode).indexOf(g);
    fe(v.value) == null && (v.value = p, v.useIndexAsValue = !0), p > -1 ? a.splice(p, 0, v) : a.push(v);
  }
  function l(h) {
    if (n) return;
    s();
    const g = a.findIndex((v) => v.id === h);
    a.splice(g, 1);
  }
  function s() {
    const h = a.find((g) => !g.disabled);
    h && e.mandatory === "force" && !r.value.length && (r.value = [h.id]);
  }
  on(() => {
    s();
  }), Ga(() => {
    n = !0;
  }), fw(() => {
    for (let h = 0; h < a.length; h++)
      a[h].useIndexAsValue && (a[h].value = h);
  });
  function d(h, g) {
    const v = a.find((w) => w.id === h);
    if (!(g && v?.disabled))
      if (e.multiple) {
        const w = r.value.slice(), b = w.findIndex((y) => y === h), p = ~b;
        if (g = g ?? !p, p && e.mandatory && w.length <= 1 || !p && e.max != null && w.length + 1 > e.max) return;
        b < 0 && g ? w.push(h) : b >= 0 && !g && w.splice(b, 1), r.value = w;
      } else {
        const w = r.value.includes(h);
        if (e.mandatory && w || !w && !g) return;
        r.value = g ?? !w ? [h] : [];
      }
  }
  function u(h) {
    if (e.multiple, r.value.length) {
      const g = r.value[0], v = a.findIndex((p) => p.id === g);
      let w = (v + h) % a.length, b = a[w];
      for (; b.disabled && w !== v; )
        w = (w + h) % a.length, b = a[w];
      if (b.disabled) return;
      r.value = [a[w].id];
    } else {
      const g = a.find((v) => !v.disabled);
      g && (r.value = [g.id]);
    }
  }
  const f = {
    register: o,
    unregister: l,
    selected: r,
    select: d,
    disabled: we(() => e.disabled),
    prev: () => u(a.length - 1),
    next: () => u(1),
    isSelected: (h) => r.value.includes(h),
    selectedClass: we(() => e.selectedClass),
    items: we(() => a),
    getItemIndex: (h) => OH(a, h)
  };
  return Nn(t, f), f;
}
function OH(e, t) {
  const n = xE(e, [t]);
  return n.length ? e.findIndex((a) => a.id === n[0]) : -1;
}
function xE(e, t) {
  const n = [];
  return t.forEach((a) => {
    const r = e.find((o) => fr(a, o.value)), i = e[a];
    r?.value != null ? n.push(r.id) : i != null && n.push(i.id);
  }), n;
}
function DH(e, t) {
  const n = [];
  return t.forEach((a) => {
    const r = e.findIndex((i) => i.id === a);
    if (~r) {
      const i = e[r];
      n.push(i.value != null ? i.value : r);
    }
  }), n;
}
const C0 = Symbol.for("vuetify:v-btn-toggle"), BH = Be({
  ...AE(),
  ..._c()
}, "VBtnToggle"), VH = We()({
  name: "VBtnToggle",
  props: BH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isSelected: a,
      next: r,
      prev: i,
      select: o,
      selected: l
    } = ol(e, C0);
    return Ge(() => {
      const s = kb.filterProps(e);
      return _(kb, He({
        class: ["v-btn-toggle", e.class]
      }, s, {
        style: e.style
      }), {
        default: () => [n.default?.({
          isSelected: a,
          next: r,
          prev: i,
          select: o,
          selected: l
        })]
      });
    }), {
      next: r,
      prev: i,
      select: o
    };
  }
}), MH = ["x-small", "small", "default", "large", "x-large"], To = Be({
  size: {
    type: [String, Number],
    default: "default"
  }
}, "size");
function Qu(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return Cw(() => {
    const n = e.size;
    let a, r;
    return g_(MH, n) ? a = `${t}--size-${n}` : n && (r = {
      width: ht(n),
      height: ht(n)
    }), {
      sizeClasses: a,
      sizeStyles: r
    };
  });
}
const RH = Be({
  color: String,
  disabled: Boolean,
  start: Boolean,
  end: Boolean,
  icon: At,
  opacity: [String, Number],
  ...vt(),
  ...To(),
  ...qt({
    tag: "i"
  }),
  ...sn()
}, "VIcon"), pn = We()({
  name: "VIcon",
  props: RH(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = ot(), {
      themeClasses: i
    } = Vw(), {
      iconData: o
    } = e8(() => r.value || e.icon), {
      sizeClasses: l
    } = Qu(e), {
      textColorClasses: s,
      textColorStyles: d
    } = mr(() => e.color);
    return Ge(() => {
      const u = a.default?.();
      u && (r.value = yT(u).filter((h) => h.type === Rf && h.children && typeof h.children == "string")[0]?.children);
      const f = !!(n.onClick || n.onClickOnce);
      return _(o.value.component, {
        tag: e.tag,
        icon: o.value.icon,
        class: Ie(["v-icon", "notranslate", i.value, l.value, s.value, {
          "v-icon--clickable": f,
          "v-icon--disabled": e.disabled,
          "v-icon--start": e.start,
          "v-icon--end": e.end
        }, e.class]),
        style: Xe([{
          "--v-icon-opacity": e.opacity
        }, l.value ? void 0 : {
          fontSize: ht(e.size),
          height: ht(e.size),
          width: ht(e.size)
        }, d.value, e.style]),
        role: f ? "button" : void 0,
        "aria-hidden": !f,
        tabindex: f ? e.disabled ? -1 : 0 : void 0
      }, {
        default: () => [u]
      });
    }), {};
  }
});
function Gf(e, t) {
  const n = Se(), a = ot(!1);
  if (ww) {
    const r = new IntersectionObserver((i) => {
      a.value = !!i.find((o) => o.isIntersecting);
    }, t);
    qa(() => {
      r.disconnect();
    }), nt(n, (i, o) => {
      o && (r.unobserve(o), a.value = !1), i && r.observe(i);
    }, {
      flush: "post"
    });
  }
  return {
    intersectionRef: n,
    isIntersecting: a
  };
}
const LH = Be({
  bgColor: String,
  color: String,
  indeterminate: [Boolean, String],
  modelValue: {
    type: [Number, String],
    default: 0
  },
  rotate: {
    type: [Number, String],
    default: 0
  },
  width: {
    type: [Number, String],
    default: 4
  },
  ...vt(),
  ...To(),
  ...qt({
    tag: "div"
  }),
  ...sn()
}, "VProgressCircular"), Mu = We()({
  name: "VProgressCircular",
  props: LH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = 20, r = 2 * Math.PI * a, i = Se(), {
      themeClasses: o
    } = yn(e), {
      sizeClasses: l,
      sizeStyles: s
    } = Qu(e), {
      textColorClasses: d,
      textColorStyles: u
    } = mr(() => e.color), {
      textColorClasses: f,
      textColorStyles: h
    } = mr(() => e.bgColor), {
      intersectionRef: g,
      isIntersecting: v
    } = Gf(), {
      resizeRef: w,
      contentRect: b
    } = Wi(), p = we(() => Pn(parseFloat(e.modelValue), 0, 100)), y = we(() => Number(e.width)), S = we(() => s.value ? Number(e.size) : b.value ? b.value.width : Math.max(y.value, 32)), E = we(() => a / (1 - y.value / S.value) * 2), C = we(() => y.value / S.value * E.value), D = we(() => ht((100 - p.value) / 100 * r));
    return Zn(() => {
      g.value = i.value, w.value = i.value;
    }), Ge(() => _(e.tag, {
      ref: i,
      class: Ie(["v-progress-circular", {
        "v-progress-circular--indeterminate": !!e.indeterminate,
        "v-progress-circular--visible": v.value,
        "v-progress-circular--disable-shrink": e.indeterminate === "disable-shrink"
      }, o.value, l.value, d.value, e.class]),
      style: Xe([s.value, u.value, e.style]),
      role: "progressbar",
      "aria-valuemin": "0",
      "aria-valuemax": "100",
      "aria-valuenow": e.indeterminate ? void 0 : p.value
    }, {
      default: () => [I("svg", {
        style: {
          transform: `rotate(calc(-90deg + ${Number(e.rotate)}deg))`
        },
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: `0 0 ${E.value} ${E.value}`
      }, [I("circle", {
        class: Ie(["v-progress-circular__underlay", f.value]),
        style: Xe(h.value),
        fill: "transparent",
        cx: "50%",
        cy: "50%",
        r: a,
        "stroke-width": C.value,
        "stroke-dasharray": r,
        "stroke-dashoffset": 0
      }, null), I("circle", {
        class: "v-progress-circular__overlay",
        fill: "transparent",
        cx: "50%",
        cy: "50%",
        r: a,
        "stroke-width": C.value,
        "stroke-dasharray": r,
        "stroke-dashoffset": D.value
      }, null)]), n.default && I("div", {
        class: "v-progress-circular__content"
      }, [n.default({
        value: p.value
      })])]
    })), {};
  }
}), JC = {
  center: "center",
  top: "bottom",
  bottom: "top",
  left: "right",
  right: "left"
}, us = Be({
  location: String
}, "location");
function gc(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1, n = arguments.length > 2 ? arguments[2] : void 0;
  const {
    isRtl: a
  } = Ra();
  return {
    locationStyles: W(() => {
      if (!e.location) return {};
      const {
        side: i,
        align: o
      } = Ny(e.location.split(" ").length > 1 ? e.location : `${e.location} center`, a.value);
      function l(d) {
        return n ? n(d) : 0;
      }
      const s = {};
      return i !== "center" && (t ? s[JC[i]] = `calc(100% - ${l(i)}px)` : s[i] = 0), o !== "center" ? t ? s[JC[o]] = `calc(100% - ${l(o)}px)` : s[o] = 0 : (i === "center" ? s.top = s.left = "50%" : s[{
        top: "left",
        bottom: "left",
        left: "top",
        right: "top"
      }[i]] = "50%", s.transform = {
        top: "translateX(-50%)",
        bottom: "translateX(-50%)",
        left: "translateY(-50%)",
        right: "translateY(-50%)",
        center: "translate(-50%, -50%)"
      }[i]), s;
    })
  };
}
const FH = Be({
  absolute: Boolean,
  active: {
    type: Boolean,
    default: !0
  },
  bgColor: String,
  bgOpacity: [Number, String],
  bufferValue: {
    type: [Number, String],
    default: 0
  },
  bufferColor: String,
  bufferOpacity: [Number, String],
  clickable: Boolean,
  color: String,
  height: {
    type: [Number, String],
    default: 4
  },
  indeterminate: Boolean,
  max: {
    type: [Number, String],
    default: 100
  },
  modelValue: {
    type: [Number, String],
    default: 0
  },
  opacity: [Number, String],
  reverse: Boolean,
  stream: Boolean,
  striped: Boolean,
  roundedBar: Boolean,
  ...vt(),
  ...us({
    location: "top"
  }),
  ...Hn(),
  ...qt(),
  ...sn()
}, "VProgressLinear"), bp = We()({
  name: "VProgressLinear",
  props: FH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      isRtl: r,
      rtlClasses: i
    } = Ra(), {
      themeClasses: o
    } = yn(e), {
      locationStyles: l
    } = gc(e), {
      textColorClasses: s,
      textColorStyles: d
    } = mr(() => e.color), {
      backgroundColorClasses: u,
      backgroundColorStyles: f
    } = An(() => e.bgColor || e.color), {
      backgroundColorClasses: h,
      backgroundColorStyles: g
    } = An(() => e.bufferColor || e.bgColor || e.color), {
      backgroundColorClasses: v,
      backgroundColorStyles: w
    } = An(() => e.color), {
      roundedClasses: b
    } = fa(e), {
      intersectionRef: p,
      isIntersecting: y
    } = Gf(), S = W(() => parseFloat(e.max)), E = W(() => parseFloat(e.height)), C = W(() => Pn(parseFloat(e.bufferValue) / S.value * 100, 0, 100)), D = W(() => Pn(parseFloat(a.value) / S.value * 100, 0, 100)), P = W(() => r.value !== e.reverse), O = W(() => e.indeterminate ? "fade-transition" : "slide-x-transition"), T = vn && window.matchMedia?.("(forced-colors: active)").matches;
    function A(V) {
      if (!p.value) return;
      const {
        left: M,
        right: B,
        width: N
      } = p.value.getBoundingClientRect(), H = P.value ? N - V.clientX + (B - N) : V.clientX - M;
      a.value = Math.round(H / N * S.value);
    }
    return Ge(() => _(e.tag, {
      ref: p,
      class: Ie(["v-progress-linear", {
        "v-progress-linear--absolute": e.absolute,
        "v-progress-linear--active": e.active && y.value,
        "v-progress-linear--reverse": P.value,
        "v-progress-linear--rounded": e.rounded,
        "v-progress-linear--rounded-bar": e.roundedBar,
        "v-progress-linear--striped": e.striped
      }, b.value, o.value, i.value, e.class]),
      style: Xe([{
        bottom: e.location === "bottom" ? 0 : void 0,
        top: e.location === "top" ? 0 : void 0,
        height: e.active ? ht(E.value) : 0,
        "--v-progress-linear-height": ht(E.value),
        ...e.absolute ? l.value : {}
      }, e.style]),
      role: "progressbar",
      "aria-hidden": e.active ? "false" : "true",
      "aria-valuemin": "0",
      "aria-valuemax": e.max,
      "aria-valuenow": e.indeterminate ? void 0 : Math.min(parseFloat(a.value), S.value),
      onClick: e.clickable && A
    }, {
      default: () => [e.stream && I("div", {
        key: "stream",
        class: Ie(["v-progress-linear__stream", s.value]),
        style: {
          ...d.value,
          [P.value ? "left" : "right"]: ht(-E.value),
          borderTop: `${ht(E.value / 2)} dotted`,
          opacity: parseFloat(e.bufferOpacity),
          top: `calc(50% - ${ht(E.value / 4)})`,
          width: ht(100 - C.value, "%"),
          "--v-progress-linear-stream-to": ht(E.value * (P.value ? 1 : -1))
        }
      }, null), I("div", {
        class: Ie(["v-progress-linear__background", T ? void 0 : u.value]),
        style: Xe([f.value, {
          opacity: parseFloat(e.bgOpacity),
          width: e.stream ? 0 : void 0
        }])
      }, null), I("div", {
        class: Ie(["v-progress-linear__buffer", T ? void 0 : h.value]),
        style: Xe([g.value, {
          opacity: parseFloat(e.bufferOpacity),
          width: ht(C.value, "%")
        }])
      }, null), _(Ur, {
        name: O.value
      }, {
        default: () => [e.indeterminate ? I("div", {
          class: "v-progress-linear__indeterminate"
        }, [["long", "short"].map((V) => I("div", {
          key: V,
          class: Ie(["v-progress-linear__indeterminate", V, T ? void 0 : v.value]),
          style: Xe(w.value)
        }, null))]) : I("div", {
          class: Ie(["v-progress-linear__determinate", T ? void 0 : v.value]),
          style: Xe([w.value, {
            width: ht(D.value, "%")
          }])
        }, null)]
      }), n.default && I("div", {
        class: "v-progress-linear__content"
      }, [n.default({
        value: D.value,
        buffer: C.value
      })])]
    })), {};
  }
}), wp = Be({
  loading: [Boolean, String]
}, "loader");
function Qf(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    loaderClasses: we(() => ({
      [`${t}--loading`]: e.loading
    }))
  };
}
function Jf(e, t) {
  let {
    slots: n
  } = t;
  return I("div", {
    class: Ie(`${e.name}__loader`)
  }, [n.default?.({
    color: e.color,
    isActive: e.active
  }) || _(bp, {
    absolute: e.absolute,
    active: e.active,
    color: e.color,
    height: "2",
    indeterminate: !0
  }, null)]);
}
const NH = ["static", "relative", "fixed", "absolute", "sticky"], Ju = Be({
  position: {
    type: String,
    validator: (
      /* istanbul ignore next */
      (e) => NH.includes(e)
    )
  }
}, "position");
function Xu(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    positionClasses: we(() => e.position ? `${t}--${e.position}` : void 0)
  };
}
function UH() {
  const e = ya("useRoute");
  return W(() => e?.proxy?.$route);
}
function TE() {
  return ya("useRouter")?.proxy?.$router;
}
function Xf(e, t) {
  const n = Hu("RouterLink"), a = we(() => !!(e.href || e.to)), r = W(() => a?.value || NS(t, "click") || NS(e, "click"));
  if (typeof n == "string" || !("useLink" in n)) {
    const u = we(() => e.href);
    return {
      isLink: a,
      isClickable: r,
      href: u,
      linkProps: oa({
        href: u
      })
    };
  }
  const i = n.useLink({
    to: we(() => e.to || ""),
    replace: we(() => e.replace)
  }), o = W(() => e.to ? i : void 0), l = UH(), s = W(() => o.value ? e.exact ? l.value ? o.value.isExactActive?.value && fr(o.value.route.value.query, l.value.query) : o.value.isExactActive?.value ?? !1 : o.value.isActive?.value ?? !1 : !1), d = W(() => e.to ? o.value?.route.value.href : e.href);
  return {
    isLink: a,
    isClickable: r,
    isActive: s,
    route: o.value?.route,
    navigate: o.value?.navigate,
    href: d,
    linkProps: oa({
      href: d,
      "aria-current": we(() => s.value ? "page" : void 0)
    })
  };
}
const Zf = Be({
  href: String,
  replace: Boolean,
  to: [String, Object],
  exact: Boolean
}, "router");
let ly = !1;
function $H(e, t) {
  let n = !1, a, r;
  vn && e?.beforeEach && (Vt(() => {
    window.addEventListener("popstate", i), a = e.beforeEach((o, l, s) => {
      ly ? n ? t(s) : s() : setTimeout(() => n ? t(s) : s()), ly = !0;
    }), r = e?.afterEach(() => {
      ly = !1;
    });
  }), qa(() => {
    window.removeEventListener("popstate", i), a?.(), r?.();
  }));
  function i(o) {
    o.state?.replaced || (n = !0, setTimeout(() => n = !1));
  }
}
function qH(e, t) {
  nt(() => e.isActive?.value, (n) => {
    e.isLink.value && n != null && t && Vt(() => {
      t(n);
    });
  }, {
    immediate: !0
  });
}
const Sb = Symbol("rippleStop"), HH = 80;
function XC(e, t) {
  e.style.transform = t, e.style.webkitTransform = t;
}
function Cb(e) {
  return e.constructor.name === "TouchEvent";
}
function IE(e) {
  return e.constructor.name === "KeyboardEvent";
}
const zH = function(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, a = 0, r = 0;
  if (!IE(e)) {
    const f = t.getBoundingClientRect(), h = Cb(e) ? e.touches[e.touches.length - 1] : e;
    a = h.clientX - f.left, r = h.clientY - f.top;
  }
  let i = 0, o = 0.3;
  t._ripple?.circle ? (o = 0.15, i = t.clientWidth / 2, i = n.center ? i : i + Math.sqrt((a - i) ** 2 + (r - i) ** 2) / 4) : i = Math.sqrt(t.clientWidth ** 2 + t.clientHeight ** 2) / 2;
  const l = `${(t.clientWidth - i * 2) / 2}px`, s = `${(t.clientHeight - i * 2) / 2}px`, d = n.center ? l : `${a - i}px`, u = n.center ? s : `${r - i}px`;
  return {
    radius: i,
    scale: o,
    x: d,
    y: u,
    centerX: l,
    centerY: s
  };
}, N_ = {
  /* eslint-disable max-statements */
  show(e, t) {
    let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (!t?._ripple?.enabled)
      return;
    const a = document.createElement("span"), r = document.createElement("span");
    a.appendChild(r), a.className = "v-ripple__container", n.class && (a.className += ` ${n.class}`);
    const {
      radius: i,
      scale: o,
      x: l,
      y: s,
      centerX: d,
      centerY: u
    } = zH(e, t, n), f = `${i * 2}px`;
    r.className = "v-ripple__animation", r.style.width = f, r.style.height = f, t.appendChild(a);
    const h = window.getComputedStyle(t);
    h && h.position === "static" && (t.style.position = "relative", t.dataset.previousPosition = "static"), r.classList.add("v-ripple__animation--enter"), r.classList.add("v-ripple__animation--visible"), XC(r, `translate(${l}, ${s}) scale3d(${o},${o},${o})`), r.dataset.activated = String(performance.now()), requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        r.classList.remove("v-ripple__animation--enter"), r.classList.add("v-ripple__animation--in"), XC(r, `translate(${d}, ${u}) scale3d(1,1,1)`);
      });
    });
  },
  hide(e) {
    if (!e?._ripple?.enabled) return;
    const t = e.getElementsByClassName("v-ripple__animation");
    if (t.length === 0) return;
    const n = t[t.length - 1];
    if (n.dataset.isHiding) return;
    n.dataset.isHiding = "true";
    const a = performance.now() - Number(n.dataset.activated), r = Math.max(250 - a, 0);
    setTimeout(() => {
      n.classList.remove("v-ripple__animation--in"), n.classList.add("v-ripple__animation--out"), setTimeout(() => {
        e.getElementsByClassName("v-ripple__animation").length === 1 && e.dataset.previousPosition && (e.style.position = e.dataset.previousPosition, delete e.dataset.previousPosition), n.parentNode?.parentNode === e && e.removeChild(n.parentNode);
      }, 300);
    }, r);
  }
};
function EE(e) {
  return typeof e > "u" || !!e;
}
function Tf(e) {
  const t = {}, n = e.currentTarget;
  if (!(!n?._ripple || n._ripple.touched || e[Sb])) {
    if (e[Sb] = !0, Cb(e))
      n._ripple.touched = !0, n._ripple.isTouch = !0;
    else if (n._ripple.isTouch) return;
    if (t.center = n._ripple.centered || IE(e), n._ripple.class && (t.class = n._ripple.class), Cb(e)) {
      if (n._ripple.showTimerCommit) return;
      n._ripple.showTimerCommit = () => {
        N_.show(e, n, t);
      }, n._ripple.showTimer = window.setTimeout(() => {
        n?._ripple?.showTimerCommit && (n._ripple.showTimerCommit(), n._ripple.showTimerCommit = null);
      }, HH);
    } else
      N_.show(e, n, t);
  }
}
function ZC(e) {
  e[Sb] = !0;
}
function ii(e) {
  const t = e.currentTarget;
  if (t?._ripple) {
    if (window.clearTimeout(t._ripple.showTimer), e.type === "touchend" && t._ripple.showTimerCommit) {
      t._ripple.showTimerCommit(), t._ripple.showTimerCommit = null, t._ripple.showTimer = window.setTimeout(() => {
        ii(e);
      });
      return;
    }
    window.setTimeout(() => {
      t._ripple && (t._ripple.touched = !1);
    }), N_.hide(t);
  }
}
function PE(e) {
  const t = e.currentTarget;
  t?._ripple && (t._ripple.showTimerCommit && (t._ripple.showTimerCommit = null), window.clearTimeout(t._ripple.showTimer));
}
let If = !1;
function OE(e) {
  !If && (e.keyCode === VS.enter || e.keyCode === VS.space) && (If = !0, Tf(e));
}
function DE(e) {
  If = !1, ii(e);
}
function BE(e) {
  If && (If = !1, ii(e));
}
function VE(e, t, n) {
  const {
    value: a,
    modifiers: r
  } = t, i = EE(a);
  if (i || N_.hide(e), e._ripple = e._ripple ?? {}, e._ripple.enabled = i, e._ripple.centered = r.center, e._ripple.circle = r.circle, mf(a) && a.class && (e._ripple.class = a.class), i && !n) {
    if (r.stop) {
      e.addEventListener("touchstart", ZC, {
        passive: !0
      }), e.addEventListener("mousedown", ZC);
      return;
    }
    e.addEventListener("touchstart", Tf, {
      passive: !0
    }), e.addEventListener("touchend", ii, {
      passive: !0
    }), e.addEventListener("touchmove", PE, {
      passive: !0
    }), e.addEventListener("touchcancel", ii), e.addEventListener("mousedown", Tf), e.addEventListener("mouseup", ii), e.addEventListener("mouseleave", ii), e.addEventListener("keydown", OE), e.addEventListener("keyup", DE), e.addEventListener("blur", BE), e.addEventListener("dragstart", ii, {
      passive: !0
    });
  } else !i && n && ME(e);
}
function ME(e) {
  e.removeEventListener("mousedown", Tf), e.removeEventListener("touchstart", Tf), e.removeEventListener("touchend", ii), e.removeEventListener("touchmove", PE), e.removeEventListener("touchcancel", ii), e.removeEventListener("mouseup", ii), e.removeEventListener("mouseleave", ii), e.removeEventListener("keydown", OE), e.removeEventListener("keyup", DE), e.removeEventListener("dragstart", ii), e.removeEventListener("blur", BE);
}
function WH(e, t) {
  VE(e, t, !1);
}
function jH(e) {
  delete e._ripple, ME(e);
}
function KH(e, t) {
  if (t.value === t.oldValue)
    return;
  const n = EE(t.oldValue);
  VE(e, t, n);
}
const Cr = {
  mounted: WH,
  unmounted: jH,
  updated: KH
}, kp = Be({
  active: {
    type: Boolean,
    default: void 0
  },
  activeColor: String,
  baseColor: String,
  symbol: {
    type: null,
    default: C0
  },
  flat: Boolean,
  icon: [Boolean, String, Function, Object],
  prependIcon: At,
  appendIcon: At,
  block: Boolean,
  readonly: Boolean,
  slim: Boolean,
  stacked: Boolean,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...pc(),
  ...wp(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...Zf(),
  ...To(),
  ...qt({
    tag: "button"
  }),
  ...sn(),
  ...Pi({
    variant: "elevated"
  })
}, "VBtn"), un = We()({
  name: "VBtn",
  props: kp(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      borderClasses: i
    } = _i(e), {
      densityClasses: o
    } = Ar(e), {
      dimensionStyles: l
    } = Fa(e), {
      elevationClasses: s
    } = ir(e), {
      loaderClasses: d
    } = Qf(e), {
      locationStyles: u
    } = gc(e), {
      positionClasses: f
    } = Xu(e), {
      roundedClasses: h
    } = fa(e), {
      sizeClasses: g,
      sizeStyles: v
    } = Qu(e), w = vc(e, e.symbol, !1), b = Xf(e, n), p = W(() => e.active !== void 0 ? e.active : b.isLink.value ? b.isActive?.value : w?.isSelected.value), y = we(() => p.value ? e.activeColor ?? e.color : e.color), S = W(() => ({
      color: w?.isSelected.value && (!b.isLink.value || b.isActive?.value) || !w || b.isActive?.value ? y.value ?? e.baseColor : e.baseColor,
      variant: e.variant
    })), {
      colorClasses: E,
      colorStyles: C,
      variantClasses: D
    } = hc(S), P = W(() => w?.disabled.value || e.disabled), O = we(() => e.variant === "elevated" && !(e.disabled || e.flat || e.border)), T = W(() => {
      if (!(e.value === void 0 || typeof e.value == "symbol"))
        return Object(e.value) === e.value ? JSON.stringify(e.value, null, 0) : e.value;
    });
    function A(V) {
      P.value || b.isLink.value && (V.metaKey || V.ctrlKey || V.shiftKey || V.button !== 0 || n.target === "_blank") || (b.navigate?.(V), w?.toggle());
    }
    return qH(b, w?.select), Ge(() => {
      const V = b.isLink.value ? "a" : e.tag, M = !!(e.prependIcon || a.prepend), B = !!(e.appendIcon || a.append), N = !!(e.icon && e.icon !== !0);
      return an(_(V, He({
        type: V === "a" ? void 0 : "button",
        class: ["v-btn", w?.selectedClass.value, {
          "v-btn--active": p.value,
          "v-btn--block": e.block,
          "v-btn--disabled": P.value,
          "v-btn--elevated": O.value,
          "v-btn--flat": e.flat,
          "v-btn--icon": !!e.icon,
          "v-btn--loading": e.loading,
          "v-btn--readonly": e.readonly,
          "v-btn--slim": e.slim,
          "v-btn--stacked": e.stacked
        }, r.value, i.value, E.value, o.value, s.value, d.value, f.value, h.value, g.value, D.value, e.class],
        style: [C.value, l.value, u.value, v.value, e.style],
        "aria-busy": e.loading ? !0 : void 0,
        disabled: P.value || void 0,
        tabindex: e.loading || e.readonly ? -1 : void 0,
        onClick: A,
        value: T.value
      }, b.linkProps), {
        default: () => [il(!0, "v-btn"), !e.icon && M && I("span", {
          key: "prepend",
          class: "v-btn__prepend"
        }, [a.prepend ? _(Wt, {
          key: "prepend-defaults",
          disabled: !e.prependIcon,
          defaults: {
            VIcon: {
              icon: e.prependIcon
            }
          }
        }, a.prepend) : _(pn, {
          key: "prepend-icon",
          icon: e.prependIcon
        }, null)]), I("span", {
          class: "v-btn__content",
          "data-no-activator": ""
        }, [!a.default && N ? _(pn, {
          key: "content-icon",
          icon: e.icon
        }, null) : _(Wt, {
          key: "content-defaults",
          disabled: !N,
          defaults: {
            VIcon: {
              icon: e.icon
            }
          }
        }, {
          default: () => [a.default?.() ?? q(e.text)]
        })]), !e.icon && B && I("span", {
          key: "append",
          class: "v-btn__append"
        }, [a.append ? _(Wt, {
          key: "append-defaults",
          disabled: !e.appendIcon,
          defaults: {
            VIcon: {
              icon: e.appendIcon
            }
          }
        }, a.append) : _(pn, {
          key: "append-icon",
          icon: e.appendIcon
        }, null)]), !!e.loading && I("span", {
          key: "loader",
          class: "v-btn__loader"
        }, [a.loader?.() ?? _(Mu, {
          color: typeof e.loading == "boolean" ? void 0 : e.loading,
          indeterminate: !0,
          width: "2"
        }, null)])]
      }), [[Cr, !P.value && e.ripple, "", {
        center: !!e.icon
      }]]);
    }), {
      group: w
    };
  }
}), YH = Be({
  ...kp({
    icon: "$menu",
    variant: "text"
  })
}, "VAppBarNavIcon"), GH = We()({
  name: "VAppBarNavIcon",
  props: YH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(un, He(e, {
      class: ["v-app-bar-nav-icon"]
    }), n)), {};
  }
}), QH = We()({
  name: "VAppBarTitle",
  props: gE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(y0, He(e, {
      class: "v-app-bar-title"
    }), n)), {};
  }
}), RE = xo("v-alert-title"), JH = ["success", "info", "warning", "error"], XH = Be({
  border: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || ["top", "end", "bottom", "start"].includes(e)
  },
  borderColor: String,
  closable: Boolean,
  closeIcon: {
    type: At,
    default: "$close"
  },
  closeLabel: {
    type: String,
    default: "$vuetify.close"
  },
  icon: {
    type: [Boolean, String, Function, Object],
    default: null
  },
  modelValue: {
    type: Boolean,
    default: !0
  },
  prominent: Boolean,
  title: String,
  text: String,
  type: {
    type: String,
    validator: (e) => JH.includes(e)
  },
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...qt(),
  ...sn(),
  ...Pi({
    variant: "flat"
  })
}, "VAlert"), ZH = We()({
  name: "VAlert",
  props: XH(),
  emits: {
    "click:close": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), i = we(() => {
      if (e.icon !== !1)
        return e.type ? e.icon ?? `$${e.type}` : e.icon;
    }), {
      themeClasses: o
    } = yn(e), {
      colorClasses: l,
      colorStyles: s,
      variantClasses: d
    } = hc(() => ({
      color: e.color ?? e.type,
      variant: e.variant
    })), {
      densityClasses: u
    } = Ar(e), {
      dimensionStyles: f
    } = Fa(e), {
      elevationClasses: h
    } = ir(e), {
      locationStyles: g
    } = gc(e), {
      positionClasses: v
    } = Xu(e), {
      roundedClasses: w
    } = fa(e), {
      textColorClasses: b,
      textColorStyles: p
    } = mr(() => e.borderColor), {
      t: y
    } = ua(), S = we(() => ({
      "aria-label": y(e.closeLabel),
      onClick(E) {
        r.value = !1, n("click:close", E);
      }
    }));
    return () => {
      const E = !!(a.prepend || i.value), C = !!(a.title || e.title), D = !!(a.close || e.closable);
      return r.value && _(e.tag, {
        class: Ie(["v-alert", e.border && {
          "v-alert--border": !!e.border,
          [`v-alert--border-${e.border === !0 ? "start" : e.border}`]: !0
        }, {
          "v-alert--prominent": e.prominent
        }, o.value, l.value, u.value, h.value, v.value, w.value, d.value, e.class]),
        style: Xe([s.value, f.value, g.value, e.style]),
        role: "alert"
      }, {
        default: () => [il(!1, "v-alert"), e.border && I("div", {
          key: "border",
          class: Ie(["v-alert__border", b.value]),
          style: Xe(p.value)
        }, null), E && I("div", {
          key: "prepend",
          class: "v-alert__prepend"
        }, [a.prepend ? _(Wt, {
          key: "prepend-defaults",
          disabled: !i.value,
          defaults: {
            VIcon: {
              density: e.density,
              icon: i.value,
              size: e.prominent ? 44 : 28
            }
          }
        }, a.prepend) : _(pn, {
          key: "prepend-icon",
          density: e.density,
          icon: i.value,
          size: e.prominent ? 44 : 28
        }, null)]), I("div", {
          class: "v-alert__content"
        }, [C && _(RE, {
          key: "title"
        }, {
          default: () => [a.title?.() ?? e.title]
        }), a.text?.() ?? e.text, a.default?.()]), a.append && I("div", {
          key: "append",
          class: "v-alert__append"
        }, [a.append()]), D && I("div", {
          key: "close",
          class: "v-alert__close"
        }, [a.close ? _(Wt, {
          key: "close-defaults",
          defaults: {
            VBtn: {
              icon: e.closeIcon,
              size: "x-small",
              variant: "text"
            }
          }
        }, {
          default: () => [a.close?.({
            props: S.value
          })]
        }) : _(un, He({
          key: "close-btn",
          icon: e.closeIcon,
          size: "x-small",
          variant: "text"
        }, S.value), null)])]
      });
    };
  }
}), ez = Be({
  start: Boolean,
  end: Boolean,
  icon: At,
  image: String,
  text: String,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...Hn(),
  ...To(),
  ...qt(),
  ...sn(),
  ...Pi({
    variant: "flat"
  })
}, "VAvatar"), Ei = We()({
  name: "VAvatar",
  props: ez(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      borderClasses: r
    } = _i(e), {
      colorClasses: i,
      colorStyles: o,
      variantClasses: l
    } = hc(e), {
      densityClasses: s
    } = Ar(e), {
      roundedClasses: d
    } = fa(e), {
      sizeClasses: u,
      sizeStyles: f
    } = Qu(e);
    return Ge(() => _(e.tag, {
      class: Ie(["v-avatar", {
        "v-avatar--start": e.start,
        "v-avatar--end": e.end
      }, a.value, r.value, i.value, s.value, d.value, u.value, l.value, e.class]),
      style: Xe([o.value, f.value, e.style])
    }, {
      default: () => [n.default ? _(Wt, {
        key: "content-defaults",
        defaults: {
          VImg: {
            cover: !0,
            src: e.image
          },
          VIcon: {
            icon: e.icon
          }
        }
      }, {
        default: () => [n.default()]
      }) : e.image ? _(as, {
        key: "image",
        src: e.image,
        alt: "",
        cover: !0
      }, null) : e.icon ? _(pn, {
        key: "icon",
        icon: e.icon
      }, null) : e.text, il(!1, "v-avatar")]
    })), {};
  }
}), tz = Be({
  text: String,
  onClick: nr(),
  ...vt(),
  ...sn()
}, "VLabel"), Zu = We()({
  name: "VLabel",
  props: tz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => I("label", {
      class: Ie(["v-label", {
        "v-label--clickable": !!e.onClick
      }, e.class]),
      style: Xe(e.style),
      onClick: e.onClick
    }, [e.text, n.default?.()])), {};
  }
}), LE = Symbol.for("vuetify:selection-control-group"), A0 = Be({
  color: String,
  disabled: {
    type: Boolean,
    default: null
  },
  defaultsTarget: String,
  error: Boolean,
  id: String,
  inline: Boolean,
  falseIcon: At,
  trueIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  multiple: {
    type: Boolean,
    default: null
  },
  name: String,
  readonly: {
    type: Boolean,
    default: null
  },
  modelValue: null,
  type: String,
  valueComparator: {
    type: Function,
    default: fr
  },
  ...vt(),
  ...Qa(),
  ...sn()
}, "SelectionControlGroup"), nz = Be({
  ...A0({
    defaultsTarget: "VSelectionControl"
  })
}, "VSelectionControlGroup"), FE = We()({
  name: "VSelectionControlGroup",
  props: nz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), r = $r(), i = we(() => e.id || `v-selection-control-group-${r}`), o = we(() => e.name || i.value), l = /* @__PURE__ */ new Set();
    return Nn(LE, {
      modelValue: a,
      forceUpdate: () => {
        l.forEach((s) => s());
      },
      onForceUpdate: (s) => {
        l.add(s), qa(() => {
          l.delete(s);
        });
      }
    }), ca({
      [e.defaultsTarget]: {
        color: we(() => e.color),
        disabled: we(() => e.disabled),
        density: we(() => e.density),
        error: we(() => e.error),
        inline: we(() => e.inline),
        modelValue: a,
        multiple: we(() => !!e.multiple || e.multiple == null && Array.isArray(a.value)),
        name: o,
        falseIcon: we(() => e.falseIcon),
        trueIcon: we(() => e.trueIcon),
        readonly: we(() => e.readonly),
        ripple: we(() => e.ripple),
        type: we(() => e.type),
        valueComparator: we(() => e.valueComparator)
      }
    }), Ge(() => I("div", {
      class: Ie(["v-selection-control-group", {
        "v-selection-control-group--inline": e.inline
      }, e.class]),
      style: Xe(e.style),
      role: e.type === "radio" ? "radiogroup" : void 0
    }, [n.default?.()])), {};
  }
}), Sp = Be({
  label: String,
  baseColor: String,
  trueValue: null,
  falseValue: null,
  value: null,
  ...vt(),
  ...A0()
}, "VSelectionControl");
function az(e) {
  const t = Gt(LE, void 0), {
    densityClasses: n
  } = Ar(e), a = kt(e, "modelValue"), r = W(() => e.trueValue !== void 0 ? e.trueValue : e.value !== void 0 ? e.value : !0), i = W(() => e.falseValue !== void 0 ? e.falseValue : !1), o = W(() => !!e.multiple || e.multiple == null && Array.isArray(a.value)), l = W({
    get() {
      const g = t ? t.modelValue.value : a.value;
      return o.value ? Xn(g).some((v) => e.valueComparator(v, r.value)) : e.valueComparator(g, r.value);
    },
    set(g) {
      if (e.readonly) return;
      const v = g ? r.value : i.value;
      let w = v;
      o.value && (w = g ? [...Xn(a.value), v] : Xn(a.value).filter((b) => !e.valueComparator(b, r.value))), t ? t.modelValue.value = w : a.value = w;
    }
  }), {
    textColorClasses: s,
    textColorStyles: d
  } = mr(() => {
    if (!(e.error || e.disabled))
      return l.value ? e.color : e.baseColor;
  }), {
    backgroundColorClasses: u,
    backgroundColorStyles: f
  } = An(() => l.value && !e.error && !e.disabled ? e.color : e.baseColor), h = W(() => l.value ? e.trueIcon : e.falseIcon);
  return {
    group: t,
    densityClasses: n,
    trueValue: r,
    falseValue: i,
    model: l,
    textColorClasses: s,
    textColorStyles: d,
    backgroundColorClasses: u,
    backgroundColorStyles: f,
    icon: h
  };
}
const Gs = We()({
  name: "VSelectionControl",
  directives: {
    vRipple: Cr
  },
  inheritAttrs: !1,
  props: Sp(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      group: r,
      densityClasses: i,
      icon: o,
      model: l,
      textColorClasses: s,
      textColorStyles: d,
      backgroundColorClasses: u,
      backgroundColorStyles: f,
      trueValue: h
    } = az(e), g = $r(), v = ot(!1), w = ot(!1), b = Se(), p = we(() => e.id || `input-${g}`), y = we(() => !e.disabled && !e.readonly);
    r?.onForceUpdate(() => {
      b.value && (b.value.checked = l.value);
    });
    function S(P) {
      y.value && (v.value = !0, Su(P.target, ":focus-visible") !== !1 && (w.value = !0));
    }
    function E() {
      v.value = !1, w.value = !1;
    }
    function C(P) {
      P.stopPropagation();
    }
    function D(P) {
      if (!y.value) {
        b.value && (b.value.checked = l.value);
        return;
      }
      e.readonly && r && Vt(() => r.forceUpdate()), l.value = P.target.checked;
    }
    return Ge(() => {
      const P = a.label ? a.label({
        label: e.label,
        props: {
          for: p.value
        }
      }) : e.label, [O, T] = nl(n), A = I("input", He({
        ref: b,
        checked: l.value,
        disabled: !!e.disabled,
        id: p.value,
        onBlur: E,
        onFocus: S,
        onInput: D,
        "aria-disabled": !!e.disabled,
        "aria-label": e.label,
        type: e.type,
        value: h.value,
        name: e.name,
        "aria-checked": e.type === "checkbox" ? l.value : void 0
      }, T), null);
      return I("div", He({
        class: ["v-selection-control", {
          "v-selection-control--dirty": l.value,
          "v-selection-control--disabled": e.disabled,
          "v-selection-control--error": e.error,
          "v-selection-control--focused": v.value,
          "v-selection-control--focus-visible": w.value,
          "v-selection-control--inline": e.inline
        }, i.value, e.class]
      }, O, {
        style: e.style
      }), [I("div", {
        class: Ie(["v-selection-control__wrapper", s.value]),
        style: Xe(d.value)
      }, [a.default?.({
        backgroundColorClasses: u,
        backgroundColorStyles: f
      }), an(I("div", {
        class: Ie(["v-selection-control__input"])
      }, [a.input?.({
        model: l,
        textColorClasses: s,
        textColorStyles: d,
        backgroundColorClasses: u,
        backgroundColorStyles: f,
        inputNode: A,
        icon: o.value,
        props: {
          onFocus: S,
          onBlur: E,
          id: p.value
        }
      }) ?? I(Qe, null, [o.value && _(pn, {
        key: "icon",
        icon: o.value
      }, null), A])]), [[Cr, e.ripple && [!e.disabled && !e.readonly, null, ["center", "circle"]]]])]), P && _(Zu, {
        for: p.value,
        onClick: C
      }, {
        default: () => [P]
      })]);
    }), {
      isFocused: v,
      input: b
    };
  }
}), NE = Be({
  indeterminate: Boolean,
  indeterminateIcon: {
    type: At,
    default: "$checkboxIndeterminate"
  },
  ...Sp({
    falseIcon: "$checkboxOff",
    trueIcon: "$checkboxOn"
  })
}, "VCheckboxBtn"), rs = We()({
  name: "VCheckboxBtn",
  props: NE(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:indeterminate": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "indeterminate"), r = kt(e, "modelValue");
    function i(s) {
      a.value && (a.value = !1);
    }
    const o = we(() => a.value ? e.indeterminateIcon : e.falseIcon), l = we(() => a.value ? e.indeterminateIcon : e.trueIcon);
    return Ge(() => {
      const s = la(Gs.filterProps(e), ["modelValue"]);
      return _(Gs, He(s, {
        modelValue: r.value,
        "onUpdate:modelValue": [(d) => r.value = d, i],
        class: ["v-checkbox-btn", e.class],
        style: e.style,
        type: "checkbox",
        falseIcon: o.value,
        trueIcon: l.value,
        "aria-checked": a.value ? "mixed" : void 0
      }), n);
    }), {};
  }
});
function UE(e) {
  const {
    t
  } = ua();
  function n(a) {
    let {
      name: r,
      color: i,
      ...o
    } = a;
    const l = {
      prepend: "prependAction",
      prependInner: "prependAction",
      append: "appendAction",
      appendInner: "appendAction",
      clear: "clear"
    }[r], s = e[`onClick:${r}`];
    function d(f) {
      f.key !== "Enter" && f.key !== " " || (f.preventDefault(), f.stopPropagation(), ip(s, new PointerEvent("click", f)));
    }
    const u = s && l ? t(`$vuetify.input.${l}`, e.label ?? "") : void 0;
    return _(pn, He({
      icon: e[`${r}Icon`],
      "aria-label": u,
      onClick: s,
      onKeydown: d,
      color: i
    }, o), null);
  }
  return {
    InputIcon: n
  };
}
const rz = Be({
  active: Boolean,
  color: String,
  messages: {
    type: [Array, String],
    default: () => []
  },
  ...vt(),
  ...Gi({
    transition: {
      component: w0,
      leaveAbsolute: !0,
      group: !0
    }
  })
}, "VMessages"), $E = We()({
  name: "VMessages",
  props: rz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = W(() => Xn(e.messages)), {
      textColorClasses: r,
      textColorStyles: i
    } = mr(() => e.color);
    return Ge(() => _(Sr, {
      transition: e.transition,
      tag: "div",
      class: Ie(["v-messages", r.value, e.class]),
      style: Xe([i.value, e.style])
    }, {
      default: () => [e.active && a.value.map((o, l) => I("div", {
        class: "v-messages__message",
        key: `${l}-${a.value}`
      }, [n.message ? n.message({
        message: o
      }) : o]))]
    })), {};
  }
}), em = Be({
  focused: Boolean,
  "onUpdate:focused": nr()
}, "focus");
function ds(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  const n = kt(e, "focused"), a = we(() => ({
    [`${t}--focused`]: n.value
  }));
  function r() {
    n.value = !0;
  }
  function i() {
    n.value = !1;
  }
  return {
    focusClasses: a,
    isFocused: n,
    focus: r,
    blur: i
  };
}
const qE = Symbol.for("vuetify:form"), iz = Be({
  disabled: Boolean,
  fastFail: Boolean,
  readonly: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  validateOn: {
    type: String,
    default: "input"
  }
}, "form");
function oz(e) {
  const t = kt(e, "modelValue"), n = we(() => e.disabled), a = we(() => e.readonly), r = ot(!1), i = Se([]), o = Se([]);
  async function l() {
    const u = [];
    let f = !0;
    o.value = [], r.value = !0;
    for (const h of i.value) {
      const g = await h.validate();
      if (g.length > 0 && (f = !1, u.push({
        id: h.id,
        errorMessages: g
      })), !f && e.fastFail) break;
    }
    return o.value = u, r.value = !1, {
      valid: f,
      errors: o.value
    };
  }
  function s() {
    i.value.forEach((u) => u.reset());
  }
  function d() {
    i.value.forEach((u) => u.resetValidation());
  }
  return nt(i, () => {
    let u = 0, f = 0;
    const h = [];
    for (const g of i.value)
      g.isValid === !1 ? (f++, h.push({
        id: g.id,
        errorMessages: g.errorMessages
      })) : g.isValid === !0 && u++;
    o.value = h, t.value = f > 0 ? !1 : u === i.value.length ? !0 : null;
  }, {
    deep: !0,
    flush: "post"
  }), Nn(qE, {
    register: (u) => {
      let {
        id: f,
        vm: h,
        validate: g,
        reset: v,
        resetValidation: w
      } = u;
      i.value.some((b) => b.id === f), i.value.push({
        id: f,
        validate: g,
        reset: v,
        resetValidation: w,
        vm: _x(h),
        isValid: null,
        errorMessages: []
      });
    },
    unregister: (u) => {
      i.value = i.value.filter((f) => f.id !== u);
    },
    update: (u, f, h) => {
      const g = i.value.find((v) => v.id === u);
      g && (g.isValid = f, g.errorMessages = h);
    },
    isDisabled: n,
    isReadonly: a,
    isValidating: r,
    isValid: t,
    items: i,
    validateOn: we(() => e.validateOn)
  }), {
    errors: o,
    isDisabled: n,
    isReadonly: a,
    isValidating: r,
    isValid: t,
    items: i,
    validate: l,
    reset: s,
    resetValidation: d
  };
}
function tm(e) {
  const t = Gt(qE, null);
  return {
    ...t,
    isReadonly: W(() => !!(e?.readonly ?? t?.isReadonly.value)),
    isDisabled: W(() => !!(e?.disabled ?? t?.isDisabled.value))
  };
}
const sz = Symbol.for("vuetify:rules");
function lz(e) {
  const t = Gt(sz, null);
  return t ? t(e) : we(e);
}
const HE = Be({
  disabled: {
    type: Boolean,
    default: null
  },
  error: Boolean,
  errorMessages: {
    type: [Array, String],
    default: () => []
  },
  maxErrors: {
    type: [Number, String],
    default: 1
  },
  name: String,
  label: String,
  readonly: {
    type: Boolean,
    default: null
  },
  rules: {
    type: Array,
    default: () => []
  },
  modelValue: null,
  validateOn: String,
  validationValue: null,
  ...em()
}, "validation");
function zE(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao(), n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : $r();
  const a = kt(e, "modelValue"), r = W(() => e.validationValue === void 0 ? a.value : e.validationValue), i = tm(e), o = lz(() => e.rules), l = Se([]), s = ot(!0), d = W(() => !!(Xn(a.value === "" ? null : a.value).length || Xn(r.value === "" ? null : r.value).length)), u = W(() => e.errorMessages?.length ? Xn(e.errorMessages).concat(l.value).slice(0, Math.max(0, Number(e.maxErrors))) : l.value), f = W(() => {
    let E = (e.validateOn ?? i.validateOn?.value) || "input";
    E === "lazy" && (E = "input lazy"), E === "eager" && (E = "input eager");
    const C = new Set(E?.split(" ") ?? []);
    return {
      input: C.has("input"),
      blur: C.has("blur") || C.has("input") || C.has("invalid-input"),
      invalidInput: C.has("invalid-input"),
      lazy: C.has("lazy"),
      eager: C.has("eager")
    };
  }), h = W(() => e.error || e.errorMessages?.length ? !1 : e.rules.length ? s.value ? l.value.length || f.value.lazy ? null : !0 : !l.value.length : !0), g = ot(!1), v = W(() => ({
    [`${t}--error`]: h.value === !1,
    [`${t}--dirty`]: d.value,
    [`${t}--disabled`]: i.isDisabled.value,
    [`${t}--readonly`]: i.isReadonly.value
  })), w = ya("validation"), b = W(() => e.name ?? fe(n));
  qu(() => {
    i.register?.({
      id: b.value,
      vm: w,
      validate: S,
      reset: p,
      resetValidation: y
    });
  }), Ga(() => {
    i.unregister?.(b.value);
  }), on(async () => {
    f.value.lazy || await S(!f.value.eager), i.update?.(b.value, h.value, u.value);
  }), Fr(() => f.value.input || f.value.invalidInput && h.value === !1, () => {
    nt(r, () => {
      if (r.value != null)
        S();
      else if (e.focused) {
        const E = nt(() => e.focused, (C) => {
          C || S(), E();
        });
      }
    });
  }), Fr(() => f.value.blur, () => {
    nt(() => e.focused, (E) => {
      E || S();
    });
  }), nt([h, u], () => {
    i.update?.(b.value, h.value, u.value);
  });
  async function p() {
    a.value = null, await Vt(), await y();
  }
  async function y() {
    s.value = !0, f.value.lazy ? l.value = [] : await S(!f.value.eager);
  }
  async function S() {
    let E = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
    const C = [];
    g.value = !0;
    for (const D of o.value) {
      if (C.length >= Number(e.maxErrors ?? 1))
        break;
      const O = await (typeof D == "function" ? D : () => D)(r.value);
      if (O !== !0) {
        if (O !== !1 && typeof O != "string") {
          console.warn(`${O} is not a valid value. Rule functions must return boolean true or a string.`);
          continue;
        }
        C.push(O || "");
      }
    }
    return l.value = C, g.value = !1, s.value = E, l.value;
  }
  return {
    errorMessages: u,
    isDirty: d,
    isDisabled: i.isDisabled,
    isReadonly: i.isReadonly,
    isPristine: s,
    isValid: h,
    isValidating: g,
    reset: p,
    resetValidation: y,
    validate: S,
    validationClasses: v
  };
}
const fs = Be({
  id: String,
  appendIcon: At,
  baseColor: String,
  centerAffix: {
    type: Boolean,
    default: !0
  },
  color: String,
  glow: Boolean,
  iconColor: [Boolean, String],
  prependIcon: At,
  hideDetails: [Boolean, String],
  hideSpinButtons: Boolean,
  hint: String,
  persistentHint: Boolean,
  messages: {
    type: [Array, String],
    default: () => []
  },
  direction: {
    type: String,
    default: "horizontal",
    validator: (e) => ["horizontal", "vertical"].includes(e)
  },
  "onClick:prepend": nr(),
  "onClick:append": nr(),
  ...vt(),
  ...Qa(),
  ...tl(La(), ["maxWidth", "minWidth", "width"]),
  ...sn(),
  ...HE()
}, "VInput"), hr = We()({
  name: "VInput",
  props: {
    ...fs()
  },
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a,
      emit: r
    } = t;
    const {
      densityClasses: i
    } = Ar(e), {
      dimensionStyles: o
    } = Fa(e), {
      themeClasses: l
    } = yn(e), {
      rtlClasses: s
    } = Ra(), {
      InputIcon: d
    } = UE(e), u = $r(), f = W(() => e.id || `input-${u}`), h = W(() => `${f.value}-messages`), {
      errorMessages: g,
      isDirty: v,
      isDisabled: w,
      isReadonly: b,
      isPristine: p,
      isValid: y,
      isValidating: S,
      reset: E,
      resetValidation: C,
      validate: D,
      validationClasses: P
    } = zE(e, "v-input", f), O = W(() => ({
      id: f,
      messagesId: h,
      isDirty: v,
      isDisabled: w,
      isReadonly: b,
      isPristine: p,
      isValid: y,
      isValidating: S,
      reset: E,
      resetValidation: C,
      validate: D
    })), T = we(() => e.error || e.disabled ? void 0 : e.focused ? e.color : e.baseColor), A = we(() => {
      if (e.iconColor)
        return e.iconColor === !0 ? T.value : e.iconColor;
    }), V = W(() => e.errorMessages?.length || !p.value && g.value.length ? g.value : e.hint && (e.persistentHint || e.focused) ? e.hint : e.messages);
    return Ge(() => {
      const M = !!(a.prepend || e.prependIcon), B = !!(a.append || e.appendIcon), N = V.value.length > 0, H = !e.hideDetails || e.hideDetails === "auto" && (N || !!a.details);
      return I("div", {
        class: Ie(["v-input", `v-input--${e.direction}`, {
          "v-input--center-affix": e.centerAffix,
          "v-input--focused": e.focused,
          "v-input--glow": e.glow,
          "v-input--hide-spin-buttons": e.hideSpinButtons
        }, i.value, l.value, s.value, P.value, e.class]),
        style: Xe([o.value, e.style])
      }, [M && I("div", {
        key: "prepend",
        class: "v-input__prepend"
      }, [a.prepend?.(O.value), e.prependIcon && _(d, {
        key: "prepend-icon",
        name: "prepend",
        color: A.value
      }, null)]), a.default && I("div", {
        class: "v-input__control"
      }, [a.default?.(O.value)]), B && I("div", {
        key: "append",
        class: "v-input__append"
      }, [e.appendIcon && _(d, {
        key: "append-icon",
        name: "append",
        color: A.value
      }, null), a.append?.(O.value)]), H && I("div", {
        id: h.value,
        class: "v-input__details",
        role: "alert",
        "aria-live": "polite"
      }, [_($E, {
        active: N,
        messages: V.value
      }, {
        message: a.message
      }), a.details?.(O.value)])]);
    }), {
      reset: E,
      resetValidation: C,
      validate: D,
      isValid: y,
      errorMessages: g
    };
  }
}), cz = Be({
  ...fs(),
  ...la(NE(), ["inline"])
}, "VCheckbox"), uz = We()({
  name: "VCheckbox",
  inheritAttrs: !1,
  props: cz(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:focused": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), {
      isFocused: i,
      focus: o,
      blur: l
    } = ds(e), s = $r();
    return Ge(() => {
      const [d, u] = nl(n), f = hr.filterProps(e), h = rs.filterProps(e);
      return _(hr, He({
        class: ["v-checkbox", e.class]
      }, d, f, {
        modelValue: r.value,
        "onUpdate:modelValue": (g) => r.value = g,
        id: e.id || `checkbox-${s}`,
        focused: i.value,
        style: e.style
      }), {
        ...a,
        default: (g) => {
          let {
            id: v,
            messagesId: w,
            isDisabled: b,
            isReadonly: p,
            isValid: y
          } = g;
          return _(rs, He(h, {
            id: v.value,
            "aria-describedby": w.value,
            disabled: b.value,
            readonly: p.value
          }, u, {
            error: y.value === !1,
            modelValue: r.value,
            "onUpdate:modelValue": (S) => r.value = S,
            onFocus: o,
            onBlur: l
          }), a);
        }
      });
    }), {};
  }
});
function dz(e) {
  let {
    selectedElement: t,
    containerElement: n,
    isRtl: a,
    isHorizontal: r
  } = e;
  const i = Ef(r, n), o = WE(r, a, n), l = Ef(r, t), s = jE(r, t), d = l * 0.4;
  return o > s ? s - d : o + i < s + l ? s - i + l + d : o;
}
function fz(e) {
  let {
    selectedElement: t,
    containerElement: n,
    isHorizontal: a
  } = e;
  const r = Ef(a, n), i = jE(a, t), o = Ef(a, t);
  return i - r / 2 + o / 2;
}
function eA(e, t) {
  return t?.[e ? "scrollWidth" : "scrollHeight"] || 0;
}
function mz(e, t) {
  return t?.[e ? "clientWidth" : "clientHeight"] || 0;
}
function WE(e, t, n) {
  if (!n)
    return 0;
  const {
    scrollLeft: a,
    offsetWidth: r,
    scrollWidth: i
  } = n;
  return e ? t ? i - r + a : a : n.scrollTop;
}
function Ef(e, t) {
  return t?.[e ? "offsetWidth" : "offsetHeight"] || 0;
}
function jE(e, t) {
  return t?.[e ? "offsetLeft" : "offsetTop"] || 0;
}
const KE = Symbol.for("vuetify:v-slide-group"), x0 = Be({
  centerActive: Boolean,
  direction: {
    type: String,
    default: "horizontal"
  },
  symbol: {
    type: null,
    default: KE
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  prevIcon: {
    type: At,
    default: "$prev"
  },
  showArrows: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || ["always", "desktop", "mobile"].includes(e)
  },
  ...vt(),
  ...cc({
    mobile: null
  }),
  ...qt(),
  ..._c({
    selectedClass: "v-slide-group-item--active"
  })
}, "VSlideGroup"), Pf = We()({
  name: "VSlideGroup",
  props: x0(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isRtl: a
    } = Ra(), {
      displayClasses: r,
      mobile: i
    } = mi(e), o = ol(e, e.symbol), l = ot(!1), s = ot(0), d = ot(0), u = ot(0), f = W(() => e.direction === "horizontal"), {
      resizeRef: h,
      contentRect: g
    } = Wi(), {
      resizeRef: v,
      contentRect: w
    } = Wi(), b = K4(), p = W(() => ({
      container: h.el,
      duration: 200,
      easing: "easeOutQuart"
    })), y = W(() => o.selected.value.length ? o.items.value.findIndex((K) => K.id === o.selected.value[0]) : -1), S = W(() => o.selected.value.length ? o.items.value.findIndex((K) => K.id === o.selected.value[o.selected.value.length - 1]) : -1);
    if (vn) {
      let K = -1;
      nt(() => [o.selected.value, g.value, w.value, f.value], () => {
        cancelAnimationFrame(K), K = requestAnimationFrame(() => {
          if (g.value && w.value) {
            const se = f.value ? "width" : "height";
            d.value = g.value[se], u.value = w.value[se], l.value = d.value + 1 < u.value;
          }
          if (y.value >= 0 && v.el) {
            const se = v.el.children[S.value];
            C(se, e.centerActive);
          }
        });
      });
    }
    const E = ot(!1);
    function C(K, se) {
      let X = 0;
      se ? X = fz({
        containerElement: h.el,
        isHorizontal: f.value,
        selectedElement: K
      }) : X = dz({
        containerElement: h.el,
        isHorizontal: f.value,
        isRtl: a.value,
        selectedElement: K
      }), D(X);
    }
    function D(K) {
      if (!vn || !h.el) return;
      const se = Ef(f.value, h.el), X = WE(f.value, a.value, h.el);
      if (!(eA(f.value, h.el) <= se || // Prevent scrolling by only a couple of pixels, which doesn't look smooth
      Math.abs(K - X) < 16)) {
        if (f.value && a.value && h.el) {
          const {
            scrollWidth: ve,
            offsetWidth: pe
          } = h.el;
          K = ve - pe - K;
        }
        f.value ? b.horizontal(K, p.value) : b(K, p.value);
      }
    }
    function P(K) {
      const {
        scrollTop: se,
        scrollLeft: X
      } = K.target;
      s.value = f.value ? X : se;
    }
    function O(K) {
      if (E.value = !0, !(!l.value || !v.el)) {
        for (const se of K.composedPath())
          for (const X of v.el.children)
            if (X === se) {
              C(X);
              return;
            }
      }
    }
    function T(K) {
      E.value = !1;
    }
    let A = !1;
    function V(K) {
      !A && !E.value && !(K.relatedTarget && v.el?.contains(K.relatedTarget)) && H(), A = !1;
    }
    function M() {
      A = !0;
    }
    function B(K) {
      if (!v.el) return;
      function se(X) {
        K.preventDefault(), H(X);
      }
      f.value ? K.key === "ArrowRight" ? se(a.value ? "prev" : "next") : K.key === "ArrowLeft" && se(a.value ? "next" : "prev") : K.key === "ArrowDown" ? se("next") : K.key === "ArrowUp" && se("prev"), K.key === "Home" ? se("first") : K.key === "End" && se("last");
    }
    function N(K, se) {
      if (!K) return;
      let X = K;
      do
        X = X?.[se === "next" ? "nextElementSibling" : "previousElementSibling"];
      while (X?.hasAttribute("disabled"));
      return X;
    }
    function H(K) {
      if (!v.el) return;
      let se;
      if (!K)
        se = hf(v.el)[0];
      else if (K === "next") {
        if (se = N(v.el.querySelector(":focus"), K), !se) return H("first");
      } else if (K === "prev") {
        if (se = N(v.el.querySelector(":focus"), K), !se) return H("last");
      } else K === "first" ? (se = v.el.firstElementChild, se?.hasAttribute("disabled") && (se = N(se, "next"))) : K === "last" && (se = v.el.lastElementChild, se?.hasAttribute("disabled") && (se = N(se, "prev")));
      se && se.focus({
        preventScroll: !0
      });
    }
    function j(K) {
      const se = f.value && a.value ? -1 : 1, X = (K === "prev" ? -se : se) * d.value;
      let he = s.value + X;
      if (f.value && a.value && h.el) {
        const {
          scrollWidth: ve,
          offsetWidth: pe
        } = h.el;
        he += ve - pe;
      }
      D(he);
    }
    const te = W(() => ({
      next: o.next,
      prev: o.prev,
      select: o.select,
      isSelected: o.isSelected
    })), de = W(() => {
      switch (e.showArrows) {
        // Always show arrows on desktop & mobile
        case "always":
          return !0;
        // Always show arrows on desktop
        case "desktop":
          return !i.value;
        // Show arrows on mobile when overflowing.
        // This matches the default 2.2 behavior
        case !0:
          return l.value || Math.abs(s.value) > 0;
        // Always show on mobile
        case "mobile":
          return i.value || l.value || Math.abs(s.value) > 0;
        // https://material.io/components/tabs#scrollable-tabs
        // Always show arrows when
        // overflowed on desktop
        default:
          return !i.value && (l.value || Math.abs(s.value) > 0);
      }
    }), Z = W(() => Math.abs(s.value) > 1), F = W(() => {
      if (!h.value) return !1;
      const K = eA(f.value, h.el), se = mz(f.value, h.el);
      return K - se - Math.abs(s.value) > 1;
    });
    return Ge(() => _(e.tag, {
      class: Ie(["v-slide-group", {
        "v-slide-group--vertical": !f.value,
        "v-slide-group--has-affixes": de.value,
        "v-slide-group--is-overflowing": l.value
      }, r.value, e.class]),
      style: Xe(e.style),
      tabindex: E.value || o.selected.value.length ? -1 : 0,
      onFocus: V
    }, {
      default: () => [de.value && I("div", {
        key: "prev",
        class: Ie(["v-slide-group__prev", {
          "v-slide-group__prev--disabled": !Z.value
        }]),
        onMousedown: M,
        onClick: () => Z.value && j("prev")
      }, [n.prev?.(te.value) ?? _(xf, null, {
        default: () => [_(pn, {
          icon: a.value ? e.nextIcon : e.prevIcon
        }, null)]
      })]), I("div", {
        key: "container",
        ref: h,
        class: "v-slide-group__container",
        onScroll: P
      }, [I("div", {
        ref: v,
        class: "v-slide-group__content",
        onFocusin: O,
        onFocusout: T,
        onKeydown: B
      }, [n.default?.(te.value)])]), de.value && I("div", {
        key: "next",
        class: Ie(["v-slide-group__next", {
          "v-slide-group__next--disabled": !F.value
        }]),
        onMousedown: M,
        onClick: () => F.value && j("next")
      }, [n.next?.(te.value) ?? _(xf, null, {
        default: () => [_(pn, {
          icon: a.value ? e.prevIcon : e.nextIcon
        }, null)]
      })])]
    })), {
      selected: o.selected,
      scrollTo: j,
      scrollOffset: s,
      focus: H,
      hasPrev: Z,
      hasNext: F
    };
  }
}), YE = Symbol.for("vuetify:v-chip-group"), hz = Be({
  baseColor: String,
  column: Boolean,
  filter: Boolean,
  valueComparator: {
    type: Function,
    default: fr
  },
  ...x0(),
  ...vt(),
  ..._c({
    selectedClass: "v-chip--selected"
  }),
  ...qt(),
  ...sn(),
  ...Pi({
    variant: "tonal"
  })
}, "VChipGroup"), _z = We()({
  name: "VChipGroup",
  props: hz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      isSelected: r,
      select: i,
      next: o,
      prev: l,
      selected: s
    } = ol(e, YE);
    return ca({
      VChip: {
        baseColor: we(() => e.baseColor),
        color: we(() => e.color),
        disabled: we(() => e.disabled),
        filter: we(() => e.filter),
        variant: we(() => e.variant)
      }
    }), Ge(() => {
      const d = Pf.filterProps(e);
      return _(Pf, He(d, {
        class: ["v-chip-group", {
          "v-chip-group--column": e.column
        }, a.value, e.class],
        style: e.style
      }), {
        default: () => [n.default?.({
          isSelected: r,
          select: i,
          next: o,
          prev: l,
          selected: s.value
        })]
      });
    }), {};
  }
}), pz = Be({
  activeClass: String,
  appendAvatar: String,
  appendIcon: At,
  baseColor: String,
  closable: Boolean,
  closeIcon: {
    type: At,
    default: "$delete"
  },
  closeLabel: {
    type: String,
    default: "$vuetify.close"
  },
  draggable: Boolean,
  filter: Boolean,
  filterIcon: {
    type: At,
    default: "$complete"
  },
  label: Boolean,
  link: {
    type: Boolean,
    default: void 0
  },
  pill: Boolean,
  prependAvatar: String,
  prependIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  modelValue: {
    type: Boolean,
    default: !0
  },
  onClick: nr(),
  onClickOnce: nr(),
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...pc(),
  ...Hn(),
  ...Zf(),
  ...To(),
  ...qt({
    tag: "span"
  }),
  ...sn(),
  ...Pi({
    variant: "tonal"
  })
}, "VChip"), ed = We()({
  name: "VChip",
  directives: {
    vRipple: Cr
  },
  props: pz(),
  emits: {
    "click:close": (e) => !0,
    "update:modelValue": (e) => !0,
    "group:selected": (e) => !0,
    click: (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      t: i
    } = ua(), {
      borderClasses: o
    } = _i(e), {
      densityClasses: l
    } = Ar(e), {
      elevationClasses: s
    } = ir(e), {
      roundedClasses: d
    } = fa(e), {
      sizeClasses: u
    } = Qu(e), {
      themeClasses: f
    } = yn(e), h = kt(e, "modelValue"), g = vc(e, YE, !1), v = Xf(e, n), w = we(() => e.link !== !1 && v.isLink.value), b = W(() => !e.disabled && e.link !== !1 && (!!g || e.link || v.isClickable.value)), p = we(() => ({
      "aria-label": i(e.closeLabel),
      disabled: e.disabled,
      onClick(P) {
        P.preventDefault(), P.stopPropagation(), h.value = !1, a("click:close", P);
      }
    })), {
      colorClasses: y,
      colorStyles: S,
      variantClasses: E
    } = hc(() => ({
      color: !g || g.isSelected.value ? e.color ?? e.baseColor : e.baseColor,
      variant: e.variant
    }));
    function C(P) {
      a("click", P), b.value && (v.navigate?.(P), g?.toggle());
    }
    function D(P) {
      (P.key === "Enter" || P.key === " ") && (P.preventDefault(), C(P));
    }
    return () => {
      const P = v.isLink.value ? "a" : e.tag, O = !!(e.appendIcon || e.appendAvatar), T = !!(O || r.append), A = !!(r.close || e.closable), V = !!(r.filter || e.filter) && g, M = !!(e.prependIcon || e.prependAvatar), B = !!(M || r.prepend);
      return h.value && an(_(P, He({
        class: ["v-chip", {
          "v-chip--disabled": e.disabled,
          "v-chip--label": e.label,
          "v-chip--link": b.value,
          "v-chip--filter": V,
          "v-chip--pill": e.pill,
          [`${e.activeClass}`]: e.activeClass && v.isActive?.value
        }, f.value, o.value, y.value, l.value, s.value, d.value, u.value, E.value, g?.selectedClass.value, e.class],
        style: [S.value, e.style],
        disabled: e.disabled || void 0,
        draggable: e.draggable,
        tabindex: b.value ? 0 : void 0,
        onClick: C,
        onKeydown: b.value && !w.value && D
      }, v.linkProps), {
        default: () => [il(b.value, "v-chip"), V && _(k0, {
          key: "filter"
        }, {
          default: () => [an(I("div", {
            class: "v-chip__filter"
          }, [r.filter ? _(Wt, {
            key: "filter-defaults",
            disabled: !e.filterIcon,
            defaults: {
              VIcon: {
                icon: e.filterIcon
              }
            }
          }, r.filter) : _(pn, {
            key: "filter-icon",
            icon: e.filterIcon
          }, null)]), [[_a, g.isSelected.value]])]
        }), B && I("div", {
          key: "prepend",
          class: "v-chip__prepend"
        }, [r.prepend ? _(Wt, {
          key: "prepend-defaults",
          disabled: !M,
          defaults: {
            VAvatar: {
              image: e.prependAvatar,
              start: !0
            },
            VIcon: {
              icon: e.prependIcon,
              start: !0
            }
          }
        }, r.prepend) : I(Qe, null, [e.prependIcon && _(pn, {
          key: "prepend-icon",
          icon: e.prependIcon,
          start: !0
        }, null), e.prependAvatar && _(Ei, {
          key: "prepend-avatar",
          image: e.prependAvatar,
          start: !0
        }, null)])]), I("div", {
          class: "v-chip__content",
          "data-no-activator": ""
        }, [r.default?.({
          isSelected: g?.isSelected.value,
          selectedClass: g?.selectedClass.value,
          select: g?.select,
          toggle: g?.toggle,
          value: g?.value.value,
          disabled: e.disabled
        }) ?? q(e.text)]), T && I("div", {
          key: "append",
          class: "v-chip__append"
        }, [r.append ? _(Wt, {
          key: "append-defaults",
          disabled: !O,
          defaults: {
            VAvatar: {
              end: !0,
              image: e.appendAvatar
            },
            VIcon: {
              end: !0,
              icon: e.appendIcon
            }
          }
        }, r.append) : I(Qe, null, [e.appendIcon && _(pn, {
          key: "append-icon",
          end: !0,
          icon: e.appendIcon
        }, null), e.appendAvatar && _(Ei, {
          key: "append-avatar",
          end: !0,
          image: e.appendAvatar
        }, null)])]), A && I("button", He({
          key: "close",
          class: "v-chip__close",
          type: "button",
          "data-testid": "close-chip"
        }, p.value), [r.close ? _(Wt, {
          key: "close-defaults",
          defaults: {
            VIcon: {
              icon: e.closeIcon,
              size: "x-small"
            }
          }
        }, r.close) : _(pn, {
          key: "close-icon",
          icon: e.closeIcon,
          size: "x-small"
        }, null)])]
      }), [[Cr, b.value && e.ripple, null]]);
    };
  }
}), Ab = Symbol.for("vuetify:list");
function GE() {
  const e = Gt(Ab, {
    hasPrepend: ot(!1),
    updateHasPrepend: () => null
  }), t = {
    hasPrepend: ot(!1),
    updateHasPrepend: (n) => {
      n && (t.hasPrepend.value = n);
    }
  };
  return Nn(Ab, t), e;
}
function QE() {
  return Gt(Ab, null);
}
const T0 = (e) => {
  const t = {
    activate: (n) => {
      let {
        id: a,
        value: r,
        activated: i
      } = n;
      return a = Ot(a), e && !r && i.size === 1 && i.has(a) || (r ? i.add(a) : i.delete(a)), i;
    },
    in: (n, a, r) => {
      let i = /* @__PURE__ */ new Set();
      if (n != null)
        for (const o of Xn(n))
          i = t.activate({
            id: o,
            value: !0,
            activated: new Set(i),
            children: a,
            parents: r
          });
      return i;
    },
    out: (n) => Array.from(n)
  };
  return t;
}, JE = (e) => {
  const t = T0(e);
  return {
    activate: (a) => {
      let {
        activated: r,
        id: i,
        ...o
      } = a;
      i = Ot(i);
      const l = r.has(i) ? /* @__PURE__ */ new Set([i]) : /* @__PURE__ */ new Set();
      return t.activate({
        ...o,
        id: i,
        activated: l
      });
    },
    in: (a, r, i) => {
      let o = /* @__PURE__ */ new Set();
      if (a != null) {
        const l = Xn(a);
        l.length && (o = t.in(l.slice(0, 1), r, i));
      }
      return o;
    },
    out: (a, r, i) => t.out(a, r, i)
  };
}, vz = (e) => {
  const t = T0(e);
  return {
    activate: (a) => {
      let {
        id: r,
        activated: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.activate({
        id: r,
        activated: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, gz = (e) => {
  const t = JE(e);
  return {
    activate: (a) => {
      let {
        id: r,
        activated: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.activate({
        id: r,
        activated: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, yz = {
  open: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (n) {
      const i = /* @__PURE__ */ new Set();
      i.add(t);
      let o = r.get(t);
      for (; o != null; )
        i.add(o), o = r.get(o);
      return i;
    } else
      return a.delete(t), a;
  },
  select: () => null
}, XE = {
  open: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (n) {
      let i = r.get(t);
      for (a.add(t); i != null && i !== t; )
        a.add(i), i = r.get(i);
      return a;
    } else
      a.delete(t);
    return a;
  },
  select: () => null
}, bz = {
  open: XE.open,
  select: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (!n) return a;
    const i = [];
    let o = r.get(t);
    for (; o != null; )
      i.push(o), o = r.get(o);
    return new Set(i);
  }
}, I0 = (e) => {
  const t = {
    select: (n) => {
      let {
        id: a,
        value: r,
        selected: i
      } = n;
      if (a = Ot(a), e && !r) {
        const o = Array.from(i.entries()).reduce((l, s) => {
          let [d, u] = s;
          return u === "on" && l.push(d), l;
        }, []);
        if (o.length === 1 && o[0] === a) return i;
      }
      return i.set(a, r ? "on" : "off"), i;
    },
    in: (n, a, r) => {
      const i = /* @__PURE__ */ new Map();
      for (const o of n || [])
        t.select({
          id: o,
          value: !0,
          selected: i,
          children: a,
          parents: r
        });
      return i;
    },
    out: (n) => {
      const a = [];
      for (const [r, i] of n.entries())
        i === "on" && a.push(r);
      return a;
    }
  };
  return t;
}, ZE = (e) => {
  const t = I0(e);
  return {
    select: (a) => {
      let {
        selected: r,
        id: i,
        ...o
      } = a;
      i = Ot(i);
      const l = r.has(i) ? /* @__PURE__ */ new Map([[i, r.get(i)]]) : /* @__PURE__ */ new Map();
      return t.select({
        ...o,
        id: i,
        selected: l
      });
    },
    in: (a, r, i) => a?.length ? t.in(a.slice(0, 1), r, i) : /* @__PURE__ */ new Map(),
    out: (a, r, i) => t.out(a, r, i)
  };
}, wz = (e) => {
  const t = I0(e);
  return {
    select: (a) => {
      let {
        id: r,
        selected: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.select({
        id: r,
        selected: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, kz = (e) => {
  const t = ZE(e);
  return {
    select: (a) => {
      let {
        id: r,
        selected: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.select({
        id: r,
        selected: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, eP = (e) => {
  const t = {
    select: (n) => {
      let {
        id: a,
        value: r,
        selected: i,
        children: o,
        parents: l
      } = n;
      a = Ot(a);
      const s = new Map(i), d = [a];
      for (; d.length; ) {
        const f = d.shift();
        i.set(Ot(f), r ? "on" : "off"), o.has(f) && d.push(...o.get(f));
      }
      let u = Ot(l.get(a));
      for (; u; ) {
        const f = o.get(u), h = f.every((v) => i.get(Ot(v)) === "on"), g = f.every((v) => !i.has(Ot(v)) || i.get(Ot(v)) === "off");
        i.set(u, h ? "on" : g ? "off" : "indeterminate"), u = Ot(l.get(u));
      }
      return e && !r && Array.from(i.entries()).reduce((h, g) => {
        let [v, w] = g;
        return w === "on" && h.push(v), h;
      }, []).length === 0 ? s : i;
    },
    in: (n, a, r) => {
      let i = /* @__PURE__ */ new Map();
      for (const o of n || [])
        i = t.select({
          id: o,
          value: !0,
          selected: i,
          children: a,
          parents: r
        });
      return i;
    },
    out: (n, a) => {
      const r = [];
      for (const [i, o] of n.entries())
        o === "on" && !a.has(i) && r.push(i);
      return r;
    }
  };
  return t;
}, Sz = (e) => {
  const t = eP(e);
  return {
    select: t.select,
    in: t.in,
    out: (a, r, i) => {
      const o = [];
      for (const [l, s] of a.entries())
        if (s === "on") {
          if (i.has(l)) {
            const d = i.get(l);
            if (a.get(d) === "on") continue;
          }
          o.push(l);
        }
      return o;
    }
  };
}, Of = Symbol.for("vuetify:nested"), tP = {
  id: ot(),
  root: {
    register: () => null,
    unregister: () => null,
    parents: Se(/* @__PURE__ */ new Map()),
    children: Se(/* @__PURE__ */ new Map()),
    open: () => null,
    openOnSelect: () => null,
    activate: () => null,
    select: () => null,
    activatable: Se(!1),
    selectable: Se(!1),
    opened: Se(/* @__PURE__ */ new Set()),
    activated: Se(/* @__PURE__ */ new Set()),
    selected: Se(/* @__PURE__ */ new Map()),
    selectedValues: Se([]),
    getPath: () => []
  }
}, Cz = Be({
  activatable: Boolean,
  selectable: Boolean,
  activeStrategy: [String, Function, Object],
  selectStrategy: [String, Function, Object],
  openStrategy: [String, Object],
  opened: null,
  activated: null,
  selected: null,
  mandatory: Boolean
}, "nested"), Az = (e) => {
  let t = !1;
  const n = Se(/* @__PURE__ */ new Map()), a = Se(/* @__PURE__ */ new Map()), r = kt(e, "opened", e.opened, (v) => new Set(v), (v) => [...v.values()]), i = W(() => {
    if (typeof e.activeStrategy == "object") return e.activeStrategy;
    if (typeof e.activeStrategy == "function") return e.activeStrategy(e.mandatory);
    switch (e.activeStrategy) {
      case "leaf":
        return vz(e.mandatory);
      case "single-leaf":
        return gz(e.mandatory);
      case "independent":
        return T0(e.mandatory);
      case "single-independent":
      default:
        return JE(e.mandatory);
    }
  }), o = W(() => {
    if (typeof e.selectStrategy == "object") return e.selectStrategy;
    if (typeof e.selectStrategy == "function") return e.selectStrategy(e.mandatory);
    switch (e.selectStrategy) {
      case "single-leaf":
        return kz(e.mandatory);
      case "leaf":
        return wz(e.mandatory);
      case "independent":
        return I0(e.mandatory);
      case "single-independent":
        return ZE(e.mandatory);
      case "trunk":
        return Sz(e.mandatory);
      case "classic":
      default:
        return eP(e.mandatory);
    }
  }), l = W(() => {
    if (typeof e.openStrategy == "object") return e.openStrategy;
    switch (e.openStrategy) {
      case "list":
        return bz;
      case "single":
        return yz;
      case "multiple":
      default:
        return XE;
    }
  }), s = kt(e, "activated", e.activated, (v) => i.value.in(v, n.value, a.value), (v) => i.value.out(v, n.value, a.value)), d = kt(e, "selected", e.selected, (v) => o.value.in(v, n.value, a.value), (v) => o.value.out(v, n.value, a.value));
  Ga(() => {
    t = !0;
  });
  function u(v) {
    const w = [];
    let b = v;
    for (; b != null; )
      w.unshift(b), b = a.value.get(b);
    return w;
  }
  const f = ya("nested"), h = /* @__PURE__ */ new Set(), g = {
    id: ot(),
    root: {
      opened: r,
      activatable: we(() => e.activatable),
      selectable: we(() => e.selectable),
      activated: s,
      selected: d,
      selectedValues: W(() => {
        const v = [];
        for (const [w, b] of d.value.entries())
          b === "on" && v.push(w);
        return v;
      }),
      register: (v, w, b) => {
        if (h.has(v)) {
          u(v).map(String).join(" -> "), u(w).concat(v).map(String).join(" -> ");
          return;
        } else
          h.add(v);
        w && v !== w && a.value.set(v, w), b && n.value.set(v, []), w != null && n.value.set(w, [...n.value.get(w) || [], v]);
      },
      unregister: (v) => {
        if (t) return;
        h.delete(v), n.value.delete(v);
        const w = a.value.get(v);
        if (w) {
          const b = n.value.get(w) ?? [];
          n.value.set(w, b.filter((p) => p !== v));
        }
        a.value.delete(v);
      },
      open: (v, w, b) => {
        f.emit("click:open", {
          id: v,
          value: w,
          path: u(v),
          event: b
        });
        const p = l.value.open({
          id: v,
          value: w,
          opened: new Set(r.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        p && (r.value = p);
      },
      openOnSelect: (v, w, b) => {
        const p = l.value.select({
          id: v,
          value: w,
          selected: new Map(d.value),
          opened: new Set(r.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        p && (r.value = p);
      },
      select: (v, w, b) => {
        f.emit("click:select", {
          id: v,
          value: w,
          path: u(v),
          event: b
        });
        const p = o.value.select({
          id: v,
          value: w,
          selected: new Map(d.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        p && (d.value = p), g.root.openOnSelect(v, w, b);
      },
      activate: (v, w, b) => {
        if (!e.activatable)
          return g.root.select(v, !0, b);
        f.emit("click:activate", {
          id: v,
          value: w,
          path: u(v),
          event: b
        });
        const p = i.value.activate({
          id: v,
          value: w,
          activated: new Set(s.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        if (p.size !== s.value.size)
          s.value = p;
        else {
          for (const y of p)
            if (!s.value.has(y)) {
              s.value = p;
              return;
            }
          for (const y of s.value)
            if (!p.has(y)) {
              s.value = p;
              return;
            }
        }
      },
      children: n,
      parents: a,
      getPath: u
    }
  };
  return Nn(Of, g), g.root;
}, nP = (e, t) => {
  const n = Gt(Of, tP), a = Symbol("nested item"), r = W(() => yo(e) ?? a), i = {
    ...n,
    id: r,
    open: (o, l) => n.root.open(r.value, o, l),
    openOnSelect: (o, l) => n.root.openOnSelect(r.value, o, l),
    isOpen: W(() => n.root.opened.value.has(r.value)),
    parent: W(() => n.root.parents.value.get(r.value)),
    activate: (o, l) => n.root.activate(r.value, o, l),
    isActivated: W(() => n.root.activated.value.has(Ot(r.value))),
    select: (o, l) => n.root.select(r.value, o, l),
    isSelected: W(() => n.root.selected.value.get(Ot(r.value)) === "on"),
    isIndeterminate: W(() => n.root.selected.value.get(Ot(r.value)) === "indeterminate"),
    isLeaf: W(() => !n.root.children.value.get(r.value)),
    isGroupActivator: n.isGroupActivator
  };
  return qu(() => {
    !n.isGroupActivator && n.root.register(r.value, n.id.value, t);
  }), Ga(() => {
    !n.isGroupActivator && n.root.unregister(r.value);
  }), t && Nn(Of, i), i;
}, xz = () => {
  const e = Gt(Of, tP);
  Nn(Of, {
    ...e,
    isGroupActivator: !0
  });
}, Tz = fi({
  name: "VListGroupActivator",
  setup(e, t) {
    let {
      slots: n
    } = t;
    return xz(), () => n.default?.();
  }
}), Iz = Be({
  /* @deprecated */
  activeColor: String,
  baseColor: String,
  color: String,
  collapseIcon: {
    type: At,
    default: "$collapse"
  },
  expandIcon: {
    type: At,
    default: "$expand"
  },
  rawId: [String, Number],
  prependIcon: At,
  appendIcon: At,
  fluid: Boolean,
  subgroup: Boolean,
  title: String,
  value: null,
  ...vt(),
  ...qt()
}, "VListGroup"), xb = We()({
  name: "VListGroup",
  props: Iz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isOpen: a,
      open: r,
      id: i
    } = nP(() => e.value, !0), o = W(() => `v-list-group--id-${String(e.rawId ?? i.value)}`), l = QE(), {
      isBooted: s
    } = mc();
    function d(g) {
      ["INPUT", "TEXTAREA"].includes(g.target?.tagName) || r(!a.value, g);
    }
    const u = W(() => ({
      onClick: d,
      class: "v-list-group__header",
      id: o.value
    })), f = W(() => a.value ? e.collapseIcon : e.expandIcon), h = W(() => ({
      VListItem: {
        active: a.value,
        activeColor: e.activeColor,
        baseColor: e.baseColor,
        color: e.color,
        prependIcon: e.prependIcon || e.subgroup && f.value,
        appendIcon: e.appendIcon || !e.subgroup && f.value,
        title: e.title,
        value: e.value
      }
    }));
    return Ge(() => _(e.tag, {
      class: Ie(["v-list-group", {
        "v-list-group--prepend": l?.hasPrepend.value,
        "v-list-group--fluid": e.fluid,
        "v-list-group--subgroup": e.subgroup,
        "v-list-group--open": a.value
      }, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.activator && _(Wt, {
        defaults: h.value
      }, {
        default: () => [_(Tz, null, {
          default: () => [n.activator({
            props: u.value,
            isOpen: a.value
          })]
        })]
      }), _(Sr, {
        transition: {
          component: yp
        },
        disabled: !s.value
      }, {
        default: () => [an(I("div", {
          class: "v-list-group__items",
          role: "group",
          "aria-labelledby": o.value
        }, [n.default?.()]), [[_a, a.value]])]
      })]
    })), {
      isOpen: a
    };
  }
}), Ez = Be({
  opacity: [Number, String],
  ...vt(),
  ...qt()
}, "VListItemSubtitle"), aP = We()({
  name: "VListItemSubtitle",
  props: Ez(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(e.tag, {
      class: Ie(["v-list-item-subtitle", e.class]),
      style: Xe([{
        "--v-list-item-subtitle-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), rP = xo("v-list-item-title"), Pz = Be({
  active: {
    type: Boolean,
    default: void 0
  },
  activeClass: String,
  /* @deprecated */
  activeColor: String,
  appendAvatar: String,
  appendIcon: At,
  baseColor: String,
  disabled: Boolean,
  lines: [Boolean, String],
  link: {
    type: Boolean,
    default: void 0
  },
  nav: Boolean,
  prependAvatar: String,
  prependIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  slim: Boolean,
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  value: null,
  onClick: nr(),
  onClickOnce: nr(),
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...Hn(),
  ...Zf(),
  ...qt(),
  ...sn(),
  ...Pi({
    variant: "text"
  })
}, "VListItem"), is = We()({
  name: "VListItem",
  directives: {
    vRipple: Cr
  },
  props: Pz(),
  emits: {
    click: (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a,
      emit: r
    } = t;
    const i = Xf(e, n), o = W(() => e.value === void 0 ? i.href.value : e.value), {
      activate: l,
      isActivated: s,
      select: d,
      isOpen: u,
      isSelected: f,
      isIndeterminate: h,
      isGroupActivator: g,
      root: v,
      parent: w,
      openOnSelect: b,
      id: p
    } = nP(o, !1), y = QE(), S = W(() => e.active !== !1 && (e.active || i.isActive?.value || (v.activatable.value ? s.value : f.value))), E = we(() => e.link !== !1 && i.isLink.value), C = W(() => !!y && (v.selectable.value || v.activatable.value || e.value != null)), D = W(() => !e.disabled && e.link !== !1 && (e.link || i.isClickable.value || C.value)), P = we(() => e.rounded || e.nav), O = we(() => e.color ?? e.activeColor), T = we(() => ({
      color: S.value ? O.value ?? e.baseColor : e.baseColor,
      variant: e.variant
    }));
    nt(() => i.isActive?.value, (he) => {
      he && A();
    }), qu(() => {
      i.isActive?.value && A();
    });
    function A() {
      w.value != null && v.open(w.value, !0), b(!0);
    }
    const {
      themeClasses: V
    } = yn(e), {
      borderClasses: M
    } = _i(e), {
      colorClasses: B,
      colorStyles: N,
      variantClasses: H
    } = hc(T), {
      densityClasses: j
    } = Ar(e), {
      dimensionStyles: te
    } = Fa(e), {
      elevationClasses: de
    } = ir(e), {
      roundedClasses: Z
    } = fa(P), F = we(() => e.lines ? `v-list-item--${e.lines}-line` : void 0), K = W(() => ({
      isActive: S.value,
      select: d,
      isOpen: u.value,
      isSelected: f.value,
      isIndeterminate: h.value
    }));
    function se(he) {
      r("click", he), !["INPUT", "TEXTAREA"].includes(he.target?.tagName) && D.value && (i.navigate?.(he), !g && (v.activatable.value ? l(!s.value, he) : (v.selectable.value || e.value != null) && d(!f.value, he)));
    }
    function X(he) {
      const ve = he.target;
      ["INPUT", "TEXTAREA"].includes(ve.tagName) || (he.key === "Enter" || he.key === " ") && (he.preventDefault(), he.target.dispatchEvent(new MouseEvent("click", he)));
    }
    return Ge(() => {
      const he = E.value ? "a" : e.tag, ve = a.title || e.title != null, pe = a.subtitle || e.subtitle != null, z = !!(e.appendAvatar || e.appendIcon), ke = !!(z || a.append), Me = !!(e.prependAvatar || e.prependIcon), Le = !!(Me || a.prepend);
      return y?.updateHasPrepend(Le), e.activeColor && P3("active-color", ["color", "base-color"]), an(_(he, He({
        class: ["v-list-item", {
          "v-list-item--active": S.value,
          "v-list-item--disabled": e.disabled,
          "v-list-item--link": D.value,
          "v-list-item--nav": e.nav,
          "v-list-item--prepend": !Le && y?.hasPrepend.value,
          "v-list-item--slim": e.slim,
          [`${e.activeClass}`]: e.activeClass && S.value
        }, V.value, M.value, B.value, j.value, de.value, F.value, Z.value, H.value, e.class],
        style: [N.value, te.value, e.style],
        tabindex: D.value ? y ? -2 : 0 : void 0,
        "aria-selected": C.value ? v.activatable.value ? s.value : v.selectable.value ? f.value : S.value : void 0,
        onClick: se,
        onKeydown: D.value && !E.value && X
      }, i.linkProps), {
        default: () => [il(D.value || S.value, "v-list-item"), Le && I("div", {
          key: "prepend",
          class: "v-list-item__prepend"
        }, [a.prepend ? _(Wt, {
          key: "prepend-defaults",
          disabled: !Me,
          defaults: {
            VAvatar: {
              density: e.density,
              image: e.prependAvatar
            },
            VIcon: {
              density: e.density,
              icon: e.prependIcon
            },
            VListItemAction: {
              start: !0
            }
          }
        }, {
          default: () => [a.prepend?.(K.value)]
        }) : I(Qe, null, [e.prependAvatar && _(Ei, {
          key: "prepend-avatar",
          density: e.density,
          image: e.prependAvatar
        }, null), e.prependIcon && _(pn, {
          key: "prepend-icon",
          density: e.density,
          icon: e.prependIcon
        }, null)]), I("div", {
          class: "v-list-item__spacer"
        }, null)]), I("div", {
          class: "v-list-item__content",
          "data-no-activator": ""
        }, [ve && _(rP, {
          key: "title"
        }, {
          default: () => [a.title?.({
            title: e.title
          }) ?? q(e.title)]
        }), pe && _(aP, {
          key: "subtitle"
        }, {
          default: () => [a.subtitle?.({
            subtitle: e.subtitle
          }) ?? q(e.subtitle)]
        }), a.default?.(K.value)]), ke && I("div", {
          key: "append",
          class: "v-list-item__append"
        }, [a.append ? _(Wt, {
          key: "append-defaults",
          disabled: !z,
          defaults: {
            VAvatar: {
              density: e.density,
              image: e.appendAvatar
            },
            VIcon: {
              density: e.density,
              icon: e.appendIcon
            },
            VListItemAction: {
              end: !0
            }
          }
        }, {
          default: () => [a.append?.(K.value)]
        }) : I(Qe, null, [e.appendIcon && _(pn, {
          key: "append-icon",
          density: e.density,
          icon: e.appendIcon
        }, null), e.appendAvatar && _(Ei, {
          key: "append-avatar",
          density: e.density,
          image: e.appendAvatar
        }, null)]), I("div", {
          class: "v-list-item__spacer"
        }, null)])]
      }), [[Cr, D.value && e.ripple]]);
    }), {
      activate: l,
      isActivated: s,
      isGroupActivator: g,
      isSelected: f,
      list: y,
      select: d,
      root: v,
      id: p,
      link: i
    };
  }
}), Oz = Be({
  color: String,
  inset: Boolean,
  sticky: Boolean,
  title: String,
  ...vt(),
  ...qt()
}, "VListSubheader"), iP = We()({
  name: "VListSubheader",
  props: Oz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      textColorClasses: a,
      textColorStyles: r
    } = mr(() => e.color);
    return Ge(() => {
      const i = !!(n.default || e.title);
      return _(e.tag, {
        class: Ie(["v-list-subheader", {
          "v-list-subheader--inset": e.inset,
          "v-list-subheader--sticky": e.sticky
        }, a.value, e.class]),
        style: Xe([{
          textColorStyles: r
        }, e.style])
      }, {
        default: () => [i && I("div", {
          class: "v-list-subheader__text"
        }, [n.default?.() ?? e.title])]
      });
    }), {};
  }
}), Dz = Be({
  color: String,
  inset: Boolean,
  length: [Number, String],
  opacity: [Number, String],
  thickness: [Number, String],
  vertical: Boolean,
  ...vt(),
  ...sn()
}, "VDivider"), Go = We()({
  name: "VDivider",
  props: Dz(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      textColorClasses: i,
      textColorStyles: o
    } = mr(() => e.color), l = W(() => {
      const s = {};
      return e.length && (s[e.vertical ? "height" : "width"] = ht(e.length)), e.thickness && (s[e.vertical ? "borderRightWidth" : "borderTopWidth"] = ht(e.thickness)), s;
    });
    return Ge(() => {
      const s = I("hr", {
        class: Ie([{
          "v-divider": !0,
          "v-divider--inset": e.inset,
          "v-divider--vertical": e.vertical
        }, r.value, i.value, e.class]),
        style: Xe([l.value, o.value, {
          "--v-border-opacity": e.opacity
        }, e.style]),
        "aria-orientation": !n.role || n.role === "separator" ? e.vertical ? "vertical" : "horizontal" : void 0,
        role: `${n.role || "separator"}`
      }, null);
      return a.default ? I("div", {
        class: Ie(["v-divider__wrapper", {
          "v-divider__wrapper--vertical": e.vertical,
          "v-divider__wrapper--inset": e.inset
        }])
      }, [s, I("div", {
        class: "v-divider__content"
      }, [a.default()]), s]) : s;
    }), {};
  }
}), Bz = Be({
  items: Array,
  returnObject: Boolean
}, "VListChildren"), oP = We()({
  name: "VListChildren",
  props: Bz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return GE(), () => n.default?.() ?? e.items?.map((a) => {
      let {
        children: r,
        props: i,
        type: o,
        raw: l
      } = a;
      if (o === "divider")
        return n.divider?.({
          props: i
        }) ?? _(Go, i, null);
      if (o === "subheader")
        return n.subheader?.({
          props: i
        }) ?? _(iP, i, null);
      const s = {
        subtitle: n.subtitle ? (u) => n.subtitle?.({
          ...u,
          item: l
        }) : void 0,
        prepend: n.prepend ? (u) => n.prepend?.({
          ...u,
          item: l
        }) : void 0,
        append: n.append ? (u) => n.append?.({
          ...u,
          item: l
        }) : void 0,
        title: n.title ? (u) => n.title?.({
          ...u,
          item: l
        }) : void 0
      }, d = xb.filterProps(i);
      return r ? _(xb, He(d, {
        value: e.returnObject ? l : i?.value,
        rawId: i?.value
      }), {
        activator: (u) => {
          let {
            props: f
          } = u;
          const h = {
            ...i,
            ...f,
            value: e.returnObject ? l : i.value
          };
          return n.header ? n.header({
            props: h
          }) : _(is, h, s);
        },
        default: () => _(oP, {
          items: r,
          returnObject: e.returnObject
        }, n)
      }) : n.item ? n.item({
        props: i
      }) : _(is, He(i, {
        value: e.returnObject ? l : i.value
      }), s);
    });
  }
}), sP = Be({
  items: {
    type: Array,
    default: () => []
  },
  itemTitle: {
    type: [String, Array, Function],
    default: "title"
  },
  itemValue: {
    type: [String, Array, Function],
    default: "value"
  },
  itemChildren: {
    type: [Boolean, String, Array, Function],
    default: "children"
  },
  itemProps: {
    type: [Boolean, String, Array, Function],
    default: "props"
  },
  returnObject: Boolean,
  valueComparator: Function
}, "list-items");
function Bs(e, t) {
  const n = Da(t, e.itemTitle, t), a = Da(t, e.itemValue, n), r = Da(t, e.itemChildren), i = e.itemProps === !0 ? typeof t == "object" && t != null && !Array.isArray(t) ? "children" in t ? la(t, ["children"]) : t : void 0 : Da(t, e.itemProps), o = {
    title: n,
    value: a,
    ...i
  };
  return {
    title: String(o.title ?? ""),
    value: o.value,
    props: o,
    children: Array.isArray(r) ? lP(e, r) : void 0,
    raw: t
  };
}
function lP(e, t) {
  const n = tl(e, ["itemTitle", "itemValue", "itemChildren", "itemProps", "returnObject", "valueComparator"]), a = [];
  for (const r of t)
    a.push(Bs(n, r));
  return a;
}
function E0(e) {
  const t = W(() => lP(e, e.items)), n = W(() => t.value.some((l) => l.value === null)), a = ot(/* @__PURE__ */ new Map()), r = ot([]);
  Zn(() => {
    const l = t.value, s = /* @__PURE__ */ new Map(), d = [];
    for (let u = 0; u < l.length; u++) {
      const f = l[u];
      if (CT(f.value) || f.value === null) {
        let h = s.get(f.value);
        h || (h = [], s.set(f.value, h)), h.push(f);
      } else
        d.push(f);
    }
    a.value = s, r.value = d;
  });
  function i(l) {
    const s = a.value, d = t.value, u = r.value, f = n.value, h = e.returnObject, g = !!e.valueComparator, v = e.valueComparator || fr, w = tl(e, ["itemTitle", "itemValue", "itemChildren", "itemProps", "returnObject", "valueComparator"]), b = [];
    e: for (const p of l) {
      if (!f && p === null) continue;
      if (h && typeof p == "string") {
        b.push(Bs(w, p));
        continue;
      }
      const y = s.get(p);
      if (g || !y) {
        for (const S of g ? d : u)
          if (v(p, S.value)) {
            b.push(S);
            continue e;
          }
        b.push(Bs(w, p));
        continue;
      }
      b.push(...y);
    }
    return b;
  }
  function o(l) {
    return e.returnObject ? l.map((s) => {
      let {
        raw: d
      } = s;
      return d;
    }) : l.map((s) => {
      let {
        value: d
      } = s;
      return d;
    });
  }
  return {
    items: t,
    transformIn: i,
    transformOut: o
  };
}
function Vz(e, t) {
  const n = Da(t, e.itemType, "item"), a = CT(t) ? t : Da(t, e.itemTitle), r = Da(t, e.itemValue, void 0), i = Da(t, e.itemChildren), o = e.itemProps === !0 ? la(t, ["children"]) : Da(t, e.itemProps), l = {
    title: a,
    value: r,
    ...o
  };
  return {
    type: n,
    title: l.title,
    value: l.value,
    props: l,
    children: n === "item" && i ? cP(e, i) : void 0,
    raw: t
  };
}
function cP(e, t) {
  const n = [];
  for (const a of t)
    n.push(Vz(e, a));
  return n;
}
function Mz(e) {
  return {
    items: W(() => cP(e, e.items))
  };
}
const Rz = Be({
  baseColor: String,
  /* @deprecated */
  activeColor: String,
  activeClass: String,
  bgColor: String,
  disabled: Boolean,
  expandIcon: At,
  collapseIcon: At,
  lines: {
    type: [Boolean, String],
    default: "one"
  },
  slim: Boolean,
  nav: Boolean,
  "onClick:open": nr(),
  "onClick:select": nr(),
  "onUpdate:opened": nr(),
  ...Cz({
    selectStrategy: "single-leaf",
    openStrategy: "list"
  }),
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  itemType: {
    type: String,
    default: "type"
  },
  ...sP(),
  ...Hn(),
  ...qt(),
  ...sn(),
  ...Pi({
    variant: "text"
  })
}, "VList"), Cp = We()({
  name: "VList",
  props: Rz(),
  emits: {
    "update:selected": (e) => !0,
    "update:activated": (e) => !0,
    "update:opened": (e) => !0,
    "click:open": (e) => !0,
    "click:activate": (e) => !0,
    "click:select": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      items: a
    } = Mz(e), {
      themeClasses: r
    } = yn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.bgColor), {
      borderClasses: l
    } = _i(e), {
      densityClasses: s
    } = Ar(e), {
      dimensionStyles: d
    } = Fa(e), {
      elevationClasses: u
    } = ir(e), {
      roundedClasses: f
    } = fa(e), {
      children: h,
      open: g,
      parents: v,
      select: w,
      getPath: b
    } = Az(e), p = we(() => e.lines ? `v-list--${e.lines}-line` : void 0), y = we(() => e.activeColor), S = we(() => e.baseColor), E = we(() => e.color);
    GE(), ca({
      VListGroup: {
        activeColor: y,
        baseColor: S,
        color: E,
        expandIcon: we(() => e.expandIcon),
        collapseIcon: we(() => e.collapseIcon)
      },
      VListItem: {
        activeClass: we(() => e.activeClass),
        activeColor: y,
        baseColor: S,
        color: E,
        density: we(() => e.density),
        disabled: we(() => e.disabled),
        lines: we(() => e.lines),
        nav: we(() => e.nav),
        slim: we(() => e.slim),
        variant: we(() => e.variant)
      }
    });
    const C = ot(!1), D = Se();
    function P(B) {
      C.value = !0;
    }
    function O(B) {
      C.value = !1;
    }
    function T(B) {
      !C.value && !(B.relatedTarget && D.value?.contains(B.relatedTarget)) && M();
    }
    function A(B) {
      const N = B.target;
      if (!(!D.value || ["INPUT", "TEXTAREA"].includes(N.tagName))) {
        if (B.key === "ArrowDown")
          M("next");
        else if (B.key === "ArrowUp")
          M("prev");
        else if (B.key === "Home")
          M("first");
        else if (B.key === "End")
          M("last");
        else
          return;
        B.preventDefault();
      }
    }
    function V(B) {
      C.value = !0;
    }
    function M(B) {
      if (D.value)
        return Hl(D.value, B);
    }
    return Ge(() => _(e.tag, {
      ref: D,
      class: Ie(["v-list", {
        "v-list--disabled": e.disabled,
        "v-list--nav": e.nav,
        "v-list--slim": e.slim
      }, r.value, i.value, l.value, s.value, u.value, p.value, f.value, e.class]),
      style: Xe([o.value, d.value, e.style]),
      tabindex: e.disabled ? -1 : 0,
      role: "listbox",
      "aria-activedescendant": void 0,
      onFocusin: P,
      onFocusout: O,
      onFocus: T,
      onKeydown: A,
      onMousedown: V
    }, {
      default: () => [_(oP, {
        items: a.value,
        returnObject: e.returnObject
      }, n)]
    })), {
      open: g,
      select: w,
      focus: M,
      children: h,
      parents: v,
      getPath: b
    };
  }
}), Lz = xo("v-list-img"), Fz = Be({
  start: Boolean,
  end: Boolean,
  ...vt(),
  ...qt()
}, "VListItemAction"), Nz = We()({
  name: "VListItemAction",
  props: Fz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(e.tag, {
      class: Ie(["v-list-item-action", {
        "v-list-item-action--start": e.start,
        "v-list-item-action--end": e.end
      }, e.class]),
      style: Xe(e.style)
    }, n)), {};
  }
}), Uz = Be({
  start: Boolean,
  end: Boolean,
  ...vt(),
  ...qt()
}, "VListItemMedia"), $z = We()({
  name: "VListItemMedia",
  props: Uz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(e.tag, {
      class: Ie(["v-list-item-media", {
        "v-list-item-media--start": e.start,
        "v-list-item-media--end": e.end
      }, e.class]),
      style: Xe(e.style)
    }, n)), {};
  }
});
function cy(e, t) {
  return {
    x: e.x + t.x,
    y: e.y + t.y
  };
}
function qz(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y
  };
}
function tA(e, t) {
  if (e.side === "top" || e.side === "bottom") {
    const {
      side: n,
      align: a
    } = e, r = a === "left" ? 0 : a === "center" ? t.width / 2 : a === "right" ? t.width : a, i = n === "top" ? 0 : n === "bottom" ? t.height : n;
    return cy({
      x: r,
      y: i
    }, t);
  } else if (e.side === "left" || e.side === "right") {
    const {
      side: n,
      align: a
    } = e, r = n === "left" ? 0 : n === "right" ? t.width : n, i = a === "top" ? 0 : a === "center" ? t.height / 2 : a === "bottom" ? t.height : a;
    return cy({
      x: r,
      y: i
    }, t);
  }
  return cy({
    x: t.width / 2,
    y: t.height / 2
  }, t);
}
const uP = {
  static: Wz,
  // specific viewport position, usually centered
  connected: Kz
  // connected to a certain element
}, Hz = Be({
  locationStrategy: {
    type: [String, Function],
    default: "static",
    validator: (e) => typeof e == "function" || e in uP
  },
  location: {
    type: String,
    default: "bottom"
  },
  origin: {
    type: String,
    default: "auto"
  },
  offset: [Number, String, Array]
}, "VOverlay-location-strategies");
function zz(e, t) {
  const n = Se({}), a = Se();
  vn && Fr(() => !!(t.isActive.value && e.locationStrategy), (l) => {
    nt(() => e.locationStrategy, l), qa(() => {
      window.removeEventListener("resize", r), visualViewport?.removeEventListener("resize", i), visualViewport?.removeEventListener("scroll", o), a.value = void 0;
    }), window.addEventListener("resize", r, {
      passive: !0
    }), visualViewport?.addEventListener("resize", i, {
      passive: !0
    }), visualViewport?.addEventListener("scroll", o, {
      passive: !0
    }), typeof e.locationStrategy == "function" ? a.value = e.locationStrategy(t, e, n)?.updateLocation : a.value = uP[e.locationStrategy](t, e, n)?.updateLocation;
  });
  function r(l) {
    a.value?.(l);
  }
  function i(l) {
    a.value?.(l);
  }
  function o(l) {
    a.value?.(l);
  }
  return {
    contentStyles: n,
    updateLocation: a
  };
}
function Wz() {
}
function jz(e, t) {
  const n = Aw(e);
  return t ? n.x += parseFloat(e.style.right || 0) : n.x -= parseFloat(e.style.left || 0), n.y -= parseFloat(e.style.top || 0), n;
}
function Kz(e, t, n) {
  (Array.isArray(e.target.value) || X3(e.target.value)) && Object.assign(n.value, {
    position: "fixed",
    top: 0,
    [e.isRtl.value ? "right" : "left"]: 0
  });
  const {
    preferredAnchor: r,
    preferredOrigin: i
  } = Cw(() => {
    const p = Ny(t.location, e.isRtl.value), y = t.origin === "overlap" ? p : t.origin === "auto" ? Mg(p) : Ny(t.origin, e.isRtl.value);
    return p.side === y.side && p.align === Rg(y).align ? {
      preferredAnchor: US(p),
      preferredOrigin: US(y)
    } : {
      preferredAnchor: p,
      preferredOrigin: y
    };
  }), [o, l, s, d] = ["minWidth", "minHeight", "maxWidth", "maxHeight"].map((p) => W(() => {
    const y = parseFloat(t[p]);
    return isNaN(y) ? 1 / 0 : y;
  })), u = W(() => {
    if (Array.isArray(t.offset))
      return t.offset;
    if (typeof t.offset == "string") {
      const p = t.offset.split(" ").map(parseFloat);
      return p.length < 2 && p.push(0), p;
    }
    return typeof t.offset == "number" ? [t.offset, 0] : [0, 0];
  });
  let f = !1, h = -1;
  const g = new bT(4), v = new ResizeObserver(() => {
    if (!f) return;
    if (requestAnimationFrame((y) => {
      y !== h && g.clear(), requestAnimationFrame((S) => {
        h = S;
      });
    }), g.isFull) {
      const y = g.values();
      if (fr(y.at(-1), y.at(-3)))
        return;
    }
    const p = b();
    p && g.push(p.flipped);
  });
  nt([e.target, e.contentEl], (p, y) => {
    let [S, E] = p, [C, D] = y;
    C && !Array.isArray(C) && v.unobserve(C), S && !Array.isArray(S) && v.observe(S), D && v.unobserve(D), E && v.observe(E);
  }, {
    immediate: !0
  }), qa(() => {
    v.disconnect();
  });
  let w = new vo({
    x: 0,
    y: 0,
    width: 0,
    height: 0
  });
  function b() {
    if (f = !1, requestAnimationFrame(() => f = !0), !e.target.value || !e.contentEl.value) return;
    (Array.isArray(e.target.value) || e.target.value.offsetParent || e.target.value.getClientRects().length) && (w = xT(e.target.value));
    const p = jz(e.contentEl.value, e.isRtl.value), y = w_(e.contentEl.value), S = 12;
    y.length || (y.push(document.documentElement), e.contentEl.value.style.top && e.contentEl.value.style.left || (p.x -= parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x") || 0), p.y -= parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y") || 0)));
    const E = y.reduce((B, N) => {
      const H = b3(N);
      return B ? new vo({
        x: Math.max(B.left, H.left),
        y: Math.max(B.top, H.top),
        width: Math.min(B.right, H.right) - Math.max(B.left, H.left),
        height: Math.min(B.bottom, H.bottom) - Math.max(B.top, H.top)
      }) : H;
    }, void 0);
    E.x += S, E.y += S, E.width -= S * 2, E.height -= S * 2;
    let C = {
      anchor: r.value,
      origin: i.value
    };
    function D(B) {
      const N = new vo(p), H = tA(B.anchor, w), j = tA(B.origin, N);
      let {
        x: te,
        y: de
      } = qz(H, j);
      switch (B.anchor.side) {
        case "top":
          de -= u.value[0];
          break;
        case "bottom":
          de += u.value[0];
          break;
        case "left":
          te -= u.value[0];
          break;
        case "right":
          te += u.value[0];
          break;
      }
      switch (B.anchor.align) {
        case "top":
          de -= u.value[1];
          break;
        case "bottom":
          de += u.value[1];
          break;
        case "left":
          te -= u.value[1];
          break;
        case "right":
          te += u.value[1];
          break;
      }
      return N.x += te, N.y += de, N.width = Math.min(N.width, s.value), N.height = Math.min(N.height, d.value), {
        overflows: qS(N, E),
        x: te,
        y: de
      };
    }
    let P = 0, O = 0;
    const T = {
      x: 0,
      y: 0
    }, A = {
      x: !1,
      y: !1
    };
    let V = -1;
    for (; !(V++ > 10); ) {
      const {
        x: B,
        y: N,
        overflows: H
      } = D(C);
      P += B, O += N, p.x += B, p.y += N;
      {
        const j = $S(C.anchor), te = H.x.before || H.x.after, de = H.y.before || H.y.after;
        let Z = !1;
        if (["x", "y"].forEach((F) => {
          if (F === "x" && te && !A.x || F === "y" && de && !A.y) {
            const K = {
              anchor: {
                ...C.anchor
              },
              origin: {
                ...C.origin
              }
            }, se = F === "x" ? j === "y" ? Rg : Mg : j === "y" ? Mg : Rg;
            K.anchor = se(K.anchor), K.origin = se(K.origin);
            const {
              overflows: X
            } = D(K);
            (X[F].before <= H[F].before && X[F].after <= H[F].after || X[F].before + X[F].after < (H[F].before + H[F].after) / 2) && (C = K, Z = A[F] = !0);
          }
        }), Z) continue;
      }
      H.x.before && (P += H.x.before, p.x += H.x.before), H.x.after && (P -= H.x.after, p.x -= H.x.after), H.y.before && (O += H.y.before, p.y += H.y.before), H.y.after && (O -= H.y.after, p.y -= H.y.after);
      {
        const j = qS(p, E);
        T.x = E.width - j.x.before - j.x.after, T.y = E.height - j.y.before - j.y.after, P += j.x.before, p.x += j.x.before, O += j.y.before, p.y += j.y.before;
      }
      break;
    }
    const M = $S(C.anchor);
    return Object.assign(n.value, {
      "--v-overlay-anchor-origin": `${C.anchor.side} ${C.anchor.align}`,
      transformOrigin: `${C.origin.side} ${C.origin.align}`,
      // transform: `translate(${pixelRound(x)}px, ${pixelRound(y)}px)`,
      top: ht(uy(O)),
      left: e.isRtl.value ? void 0 : ht(uy(P)),
      right: e.isRtl.value ? ht(uy(-P)) : void 0,
      minWidth: ht(M === "y" ? Math.min(o.value, w.width) : o.value),
      maxWidth: ht(nA(Pn(T.x, o.value === 1 / 0 ? 0 : o.value, s.value))),
      maxHeight: ht(nA(Pn(T.y, l.value === 1 / 0 ? 0 : l.value, d.value)))
    }), {
      available: T,
      contentBox: p,
      flipped: A
    };
  }
  return nt(() => [r.value, i.value, t.offset, t.minWidth, t.minHeight, t.maxWidth, t.maxHeight], () => b()), Vt(() => {
    const p = b();
    if (!p) return;
    const {
      available: y,
      contentBox: S
    } = p;
    S.height > y.y && requestAnimationFrame(() => {
      b(), requestAnimationFrame(() => {
        b();
      });
    });
  }), {
    updateLocation: b
  };
}
function uy(e) {
  return Math.round(e * devicePixelRatio) / devicePixelRatio;
}
function nA(e) {
  return Math.ceil(e * devicePixelRatio) / devicePixelRatio;
}
let Tb = !0;
const U_ = [];
function Yz(e) {
  !Tb || U_.length ? (U_.push(e), Ib()) : (Tb = !1, e(), Ib());
}
let aA = -1;
function Ib() {
  cancelAnimationFrame(aA), aA = requestAnimationFrame(() => {
    const e = U_.shift();
    e && e(), U_.length ? Ib() : Tb = !0;
  });
}
const dP = {
  none: null,
  close: Jz,
  block: Xz,
  reposition: Zz
}, Gz = Be({
  scrollStrategy: {
    type: [String, Function],
    default: "block",
    validator: (e) => typeof e == "function" || e in dP
  }
}, "VOverlay-scroll-strategies");
function Qz(e, t) {
  if (!vn) return;
  let n;
  Zn(async () => {
    n?.stop(), t.isActive.value && e.scrollStrategy && (n = bu(), await new Promise((a) => setTimeout(a)), n.active && n.run(() => {
      typeof e.scrollStrategy == "function" ? e.scrollStrategy(t, e, n) : dP[e.scrollStrategy]?.(t, e, n);
    }));
  }), qa(() => {
    n?.stop();
  });
}
function Jz(e) {
  function t(n) {
    e.isActive.value = !1;
  }
  fP(e.targetEl.value ?? e.contentEl.value, t);
}
function Xz(e, t) {
  const n = e.root.value?.offsetParent, a = [.../* @__PURE__ */ new Set([...w_(e.targetEl.value, t.contained ? n : void 0), ...w_(e.contentEl.value, t.contained ? n : void 0)])].filter((o) => !o.classList.contains("v-overlay-scroll-blocked")), r = window.innerWidth - document.documentElement.offsetWidth, i = ((o) => Pw(o) && o)(n || document.documentElement);
  i && e.root.value.classList.add("v-overlay--scroll-blocked"), a.forEach((o, l) => {
    o.style.setProperty("--v-body-scroll-x", ht(-o.scrollLeft)), o.style.setProperty("--v-body-scroll-y", ht(-o.scrollTop)), o !== document.documentElement && o.style.setProperty("--v-scrollbar-offset", ht(r)), o.classList.add("v-overlay-scroll-blocked");
  }), qa(() => {
    a.forEach((o, l) => {
      const s = parseFloat(o.style.getPropertyValue("--v-body-scroll-x")), d = parseFloat(o.style.getPropertyValue("--v-body-scroll-y")), u = o.style.scrollBehavior;
      o.style.scrollBehavior = "auto", o.style.removeProperty("--v-body-scroll-x"), o.style.removeProperty("--v-body-scroll-y"), o.style.removeProperty("--v-scrollbar-offset"), o.classList.remove("v-overlay-scroll-blocked"), o.scrollLeft = -s, o.scrollTop = -d, o.style.scrollBehavior = u;
    }), i && e.root.value.classList.remove("v-overlay--scroll-blocked");
  });
}
function Zz(e, t, n) {
  let a = !1, r = -1, i = -1;
  function o(l) {
    Yz(() => {
      const s = performance.now();
      e.updateLocation.value?.(l), a = (performance.now() - s) / (1e3 / 60) > 2;
    });
  }
  i = (typeof requestIdleCallback > "u" ? (l) => l() : requestIdleCallback)(() => {
    n.run(() => {
      fP(e.targetEl.value ?? e.contentEl.value, (l) => {
        a ? (cancelAnimationFrame(r), r = requestAnimationFrame(() => {
          r = requestAnimationFrame(() => {
            o(l);
          });
        })) : o(l);
      });
    });
  }), qa(() => {
    typeof cancelIdleCallback < "u" && cancelIdleCallback(i), cancelAnimationFrame(r);
  });
}
function fP(e, t) {
  const n = [document, ...w_(e)];
  n.forEach((a) => {
    a.addEventListener("scroll", t, {
      passive: !0
    });
  }), qa(() => {
    n.forEach((a) => {
      a.removeEventListener("scroll", t);
    });
  });
}
const Eb = Symbol.for("vuetify:v-menu"), P0 = Be({
  closeDelay: [Number, String],
  openDelay: [Number, String]
}, "delay");
function O0(e, t) {
  let n = () => {
  };
  function a(o) {
    n?.();
    const l = Number(o ? e.openDelay : e.closeDelay);
    return new Promise((s) => {
      n = h3(l, () => {
        t?.(o), s(o);
      });
    });
  }
  function r() {
    return a(!0);
  }
  function i() {
    return a(!1);
  }
  return {
    clearDelay: n,
    runOpenDelay: r,
    runCloseDelay: i
  };
}
const eW = Be({
  target: [String, Object],
  activator: [String, Object],
  activatorProps: {
    type: Object,
    default: () => ({})
  },
  openOnClick: {
    type: Boolean,
    default: void 0
  },
  openOnHover: Boolean,
  openOnFocus: {
    type: Boolean,
    default: void 0
  },
  closeOnContentClick: Boolean,
  ...P0()
}, "VOverlay-activator");
function tW(e, t) {
  let {
    isActive: n,
    isTop: a,
    contentEl: r
  } = t;
  const i = ya("useActivator"), o = Se();
  let l = !1, s = !1, d = !0;
  const u = W(() => e.openOnFocus || e.openOnFocus == null && e.openOnHover), f = W(() => e.openOnClick || e.openOnClick == null && !e.openOnHover && !u.value), {
    runOpenDelay: h,
    runCloseDelay: g
  } = O0(e, (O) => {
    O === (e.openOnHover && l || u.value && s) && !(e.openOnHover && n.value && !a.value) && (n.value !== O && (d = !0), n.value = O);
  }), v = Se(), w = {
    onClick: (O) => {
      O.stopPropagation(), o.value = O.currentTarget || O.target, n.value || (v.value = [O.clientX, O.clientY]), n.value = !n.value;
    },
    onMouseenter: (O) => {
      O.sourceCapabilities?.firesTouchEvents || (l = !0, o.value = O.currentTarget || O.target, h());
    },
    onMouseleave: (O) => {
      l = !1, g();
    },
    onFocus: (O) => {
      Su(O.target, ":focus-visible") !== !1 && (s = !0, O.stopPropagation(), o.value = O.currentTarget || O.target, h());
    },
    onBlur: (O) => {
      s = !1, O.stopPropagation(), g();
    }
  }, b = W(() => {
    const O = {};
    return f.value && (O.onClick = w.onClick), e.openOnHover && (O.onMouseenter = w.onMouseenter, O.onMouseleave = w.onMouseleave), u.value && (O.onFocus = w.onFocus, O.onBlur = w.onBlur), O;
  }), p = W(() => {
    const O = {};
    if (e.openOnHover && (O.onMouseenter = () => {
      l = !0, h();
    }, O.onMouseleave = () => {
      l = !1, g();
    }), u.value && (O.onFocusin = () => {
      s = !0, h();
    }, O.onFocusout = () => {
      s = !1, g();
    }), e.closeOnContentClick) {
      const T = Gt(Eb, null);
      O.onClick = () => {
        n.value = !1, T?.closeParents();
      };
    }
    return O;
  }), y = W(() => {
    const O = {};
    return e.openOnHover && (O.onMouseenter = () => {
      d && (l = !0, d = !1, h());
    }, O.onMouseleave = () => {
      l = !1, g();
    }), O;
  });
  nt(a, (O) => {
    O && (e.openOnHover && !l && (!u.value || !s) || u.value && !s && (!e.openOnHover || !l)) && !r.value?.contains(document.activeElement) && (n.value = !1);
  }), nt(n, (O) => {
    O || setTimeout(() => {
      v.value = void 0;
    });
  }, {
    flush: "post"
  });
  const S = y_();
  Zn(() => {
    S.value && Vt(() => {
      o.value = S.el;
    });
  });
  const E = y_(), C = W(() => e.target === "cursor" && v.value ? v.value : E.value ? E.el : mP(e.target, i) || o.value), D = W(() => Array.isArray(C.value) ? void 0 : C.value);
  let P;
  return nt(() => !!e.activator, (O) => {
    O && vn ? (P = bu(), P.run(() => {
      nW(e, i, {
        activatorEl: o,
        activatorEvents: b
      });
    })) : P && P.stop();
  }, {
    flush: "post",
    immediate: !0
  }), qa(() => {
    P?.stop();
  }), {
    activatorEl: o,
    activatorRef: S,
    target: C,
    targetEl: D,
    targetRef: E,
    activatorEvents: b,
    contentEvents: p,
    scrimEvents: y
  };
}
function nW(e, t, n) {
  let {
    activatorEl: a,
    activatorEvents: r
  } = n;
  nt(() => e.activator, (s, d) => {
    if (d && s !== d) {
      const u = l(d);
      u && o(u);
    }
    s && Vt(() => i());
  }, {
    immediate: !0
  }), nt(() => e.activatorProps, () => {
    i();
  }), qa(() => {
    o();
  });
  function i() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : l(), d = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.activatorProps;
    s && w3(s, He(r.value, d));
  }
  function o() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : l(), d = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.activatorProps;
    s && k3(s, He(r.value, d));
  }
  function l() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : e.activator;
    const d = mP(s, t);
    return a.value = d?.nodeType === Node.ELEMENT_NODE ? d : void 0, a.value;
  }
}
function mP(e, t) {
  if (!e) return;
  let n;
  if (e === "parent") {
    let a = t?.proxy?.$el?.parentNode;
    for (; a?.hasAttribute("data-no-activator"); )
      a = a.parentNode;
    n = a;
  } else typeof e == "string" ? n = document.querySelector(e) : "$el" in e ? n = e.$el : n = e;
  return n;
}
function hP() {
  if (!vn) return ot(!1);
  const {
    ssr: e
  } = mi();
  if (e) {
    const t = ot(!1);
    return on(() => {
      t.value = !0;
    }), t;
  } else
    return ot(!0);
}
const D0 = Be({
  eager: Boolean
}, "lazy");
function B0(e, t) {
  const n = ot(!1), a = we(() => n.value || e.eager || t.value);
  nt(t, () => n.value = !0);
  function r() {
    e.eager || (n.value = !1);
  }
  return {
    isBooted: n,
    hasContent: a,
    onAfterLeave: r
  };
}
function yc() {
  const t = ya("useScopeId").vnode.scopeId;
  return {
    scopeId: t ? {
      [t]: ""
    } : void 0
  };
}
const rA = Symbol.for("vuetify:stack"), Nd = oa([]);
function aW(e, t, n) {
  const a = ya("useStack"), r = !n, i = Gt(rA, void 0), o = oa({
    activeChildren: /* @__PURE__ */ new Set()
  });
  Nn(rA, o);
  const l = ot(Number(yo(t)));
  Fr(e, () => {
    const u = Nd.at(-1)?.[1];
    l.value = u ? u + 10 : Number(yo(t)), r && Nd.push([a.uid, l.value]), i?.activeChildren.add(a.uid), qa(() => {
      if (r) {
        const f = Ot(Nd).findIndex((h) => h[0] === a.uid);
        Nd.splice(f, 1);
      }
      i?.activeChildren.delete(a.uid);
    });
  });
  const s = ot(!0);
  r && Zn(() => {
    const u = Nd.at(-1)?.[0] === a.uid;
    setTimeout(() => s.value = u);
  });
  const d = we(() => !o.activeChildren.size);
  return {
    globalTop: Uu(s),
    localTop: d,
    stackStyles: we(() => ({
      zIndex: l.value
    }))
  };
}
function rW(e) {
  return {
    teleportTarget: W(() => {
      const n = e();
      if (n === !0 || !vn) return;
      const a = n === !1 ? document.body : typeof n == "string" ? document.querySelector(n) : n;
      if (a == null)
        return;
      let r = [...a.children].find((i) => i.matches(".v-overlay-container"));
      return r || (r = document.createElement("div"), r.className = "v-overlay-container", a.appendChild(r)), r;
    })
  };
}
function iW() {
  return !0;
}
function _P(e, t, n) {
  if (!e || pP(e, n) === !1) return !1;
  const a = RT(t);
  if (typeof ShadowRoot < "u" && a instanceof ShadowRoot && a.host === e.target) return !1;
  const r = (typeof n.value == "object" && n.value.include || (() => []))();
  return r.push(t), !r.some((i) => i?.contains(e.target));
}
function pP(e, t) {
  return (typeof t.value == "object" && t.value.closeConditional || iW)(e);
}
function oW(e, t, n) {
  const a = typeof n.value == "function" ? n.value : n.value.handler;
  e.shadowTarget = e.target, t._clickOutside.lastMousedownWasOutside && _P(e, t, n) && setTimeout(() => {
    pP(e, n) && a && a(e);
  }, 0);
}
function iA(e, t) {
  const n = RT(e);
  t(document), typeof ShadowRoot < "u" && n instanceof ShadowRoot && t(n);
}
const Pb = {
  // [data-app] may not be found
  // if using bind, inserted makes
  // sure that the root element is
  // available, iOS does not support
  // clicks on body
  mounted(e, t) {
    const n = (r) => oW(r, e, t), a = (r) => {
      e._clickOutside.lastMousedownWasOutside = _P(r, e, t);
    };
    iA(e, (r) => {
      r.addEventListener("click", n, !0), r.addEventListener("mousedown", a, !0);
    }), e._clickOutside || (e._clickOutside = {
      lastMousedownWasOutside: !1
    }), e._clickOutside[t.instance.$.uid] = {
      onClick: n,
      onMousedown: a
    };
  },
  beforeUnmount(e, t) {
    e._clickOutside && (iA(e, (n) => {
      if (!n || !e._clickOutside?.[t.instance.$.uid]) return;
      const {
        onClick: a,
        onMousedown: r
      } = e._clickOutside[t.instance.$.uid];
      n.removeEventListener("click", a, !0), n.removeEventListener("mousedown", r, !0);
    }), delete e._clickOutside[t.instance.$.uid]);
  }
};
function sW(e) {
  const {
    modelValue: t,
    color: n,
    ...a
  } = e;
  return _(Ur, {
    name: "fade-transition",
    appear: !0
  }, {
    default: () => [e.modelValue && I("div", He({
      class: ["v-overlay__scrim", e.color.backgroundColorClasses.value],
      style: e.color.backgroundColorStyles.value
    }, a), null)]
  });
}
const nm = Be({
  absolute: Boolean,
  attach: [Boolean, String, Object],
  closeOnBack: {
    type: Boolean,
    default: !0
  },
  contained: Boolean,
  contentClass: null,
  contentProps: null,
  disabled: Boolean,
  opacity: [Number, String],
  noClickAnimation: Boolean,
  modelValue: Boolean,
  persistent: Boolean,
  scrim: {
    type: [Boolean, String],
    default: !0
  },
  zIndex: {
    type: [Number, String],
    default: 2e3
  },
  ...eW(),
  ...vt(),
  ...La(),
  ...D0(),
  ...Hz(),
  ...Gz(),
  ...sn(),
  ...Gi()
}, "VOverlay"), ko = We()({
  name: "VOverlay",
  directives: {
    vClickOutside: Pb
  },
  inheritAttrs: !1,
  props: {
    _disableGlobalStack: Boolean,
    ...nm()
  },
  emits: {
    "click:outside": (e) => !0,
    "update:modelValue": (e) => !0,
    keydown: (e) => !0,
    afterEnter: () => !0,
    afterLeave: () => !0
  },
  setup(e, t) {
    let {
      slots: n,
      attrs: a,
      emit: r
    } = t;
    const i = ya("VOverlay"), o = Se(), l = Se(), s = Se(), d = kt(e, "modelValue"), u = W({
      get: () => d.value,
      set: (z) => {
        z && e.disabled || (d.value = z);
      }
    }), {
      themeClasses: f
    } = yn(e), {
      rtlClasses: h,
      isRtl: g
    } = Ra(), {
      hasContent: v,
      onAfterLeave: w
    } = B0(e, u), b = An(() => typeof e.scrim == "string" ? e.scrim : null), {
      globalTop: p,
      localTop: y,
      stackStyles: S
    } = aW(u, () => e.zIndex, e._disableGlobalStack), {
      activatorEl: E,
      activatorRef: C,
      target: D,
      targetEl: P,
      targetRef: O,
      activatorEvents: T,
      contentEvents: A,
      scrimEvents: V
    } = tW(e, {
      isActive: u,
      isTop: y,
      contentEl: s
    }), {
      teleportTarget: M
    } = rW(() => {
      const z = e.attach || e.contained;
      if (z) return z;
      const ke = E?.value?.getRootNode() || i.proxy?.$el?.getRootNode();
      return ke instanceof ShadowRoot ? ke : !1;
    }), {
      dimensionStyles: B
    } = Fa(e), N = hP(), {
      scopeId: H
    } = yc();
    nt(() => e.disabled, (z) => {
      z && (u.value = !1);
    });
    const {
      contentStyles: j,
      updateLocation: te
    } = zz(e, {
      isRtl: g,
      contentEl: s,
      target: D,
      isActive: u
    });
    Qz(e, {
      root: o,
      contentEl: s,
      targetEl: P,
      isActive: u,
      updateLocation: te
    });
    function de(z) {
      r("click:outside", z), e.persistent ? he() : u.value = !1;
    }
    function Z(z) {
      return u.value && p.value && // If using scrim, only close if clicking on it rather than anything opened on top
      (!e.scrim || z.target === l.value || z instanceof MouseEvent && z.shadowTarget === l.value);
    }
    vn && nt(u, (z) => {
      z ? window.addEventListener("keydown", F) : window.removeEventListener("keydown", F);
    }, {
      immediate: !0
    }), Ga(() => {
      vn && window.removeEventListener("keydown", F);
    });
    function F(z) {
      z.key === "Escape" && p.value && (s.value?.contains(document.activeElement) || r("keydown", z), e.persistent ? he() : (u.value = !1, s.value?.contains(document.activeElement) && E.value?.focus()));
    }
    function K(z) {
      z.key === "Escape" && !p.value || r("keydown", z);
    }
    const se = TE();
    Fr(() => e.closeOnBack, () => {
      $H(se, (z) => {
        p.value && u.value ? (z(!1), e.persistent ? he() : u.value = !1) : z();
      });
    });
    const X = Se();
    nt(() => u.value && (e.absolute || e.contained) && M.value == null, (z) => {
      if (z) {
        const ke = Ew(o.value);
        ke && ke !== document.scrollingElement && (X.value = ke.scrollTop);
      }
    });
    function he() {
      e.noClickAnimation || s.value && Fl(s.value, [{
        transformOrigin: "center"
      }, {
        transform: "scale(1.03)"
      }, {
        transformOrigin: "center"
      }], {
        duration: 150,
        easing: _f
      });
    }
    function ve() {
      r("afterEnter");
    }
    function pe() {
      w(), r("afterLeave");
    }
    return Ge(() => I(Qe, null, [n.activator?.({
      isActive: u.value,
      targetRef: O,
      props: He({
        ref: C
      }, T.value, e.activatorProps)
    }), N.value && v.value && _(Tx, {
      disabled: !M.value,
      to: M.value
    }, {
      default: () => [I("div", He({
        class: ["v-overlay", {
          "v-overlay--absolute": e.absolute || e.contained,
          "v-overlay--active": u.value,
          "v-overlay--contained": e.contained
        }, f.value, h.value, e.class],
        style: [S.value, {
          "--v-overlay-opacity": e.opacity,
          top: ht(X.value)
        }, e.style],
        ref: o,
        onKeydown: K
      }, H, a), [_(sW, He({
        color: b,
        modelValue: u.value && !!e.scrim,
        ref: l
      }, V.value), null), _(Sr, {
        appear: !0,
        persisted: !0,
        transition: e.transition,
        target: D.value,
        onAfterEnter: ve,
        onAfterLeave: pe
      }, {
        default: () => [an(I("div", He({
          ref: s,
          class: ["v-overlay__content", e.contentClass],
          style: [B.value, j.value]
        }, A.value, e.contentProps), [n.default?.({
          isActive: u
        })]), [[_a, u.value], [Pb, {
          handler: de,
          closeConditional: Z,
          include: () => [E.value]
        }]])]
      })])]
    })])), {
      activatorEl: E,
      scrimEl: l,
      target: D,
      animateClick: he,
      contentEl: s,
      globalTop: p,
      localTop: y,
      updateLocation: te
    };
  }
}), dy = Symbol("Forwarded refs");
function fy(e, t) {
  let n = e;
  for (; n; ) {
    const a = Reflect.getOwnPropertyDescriptor(n, t);
    if (a) return a;
    n = Object.getPrototypeOf(n);
  }
}
function pi(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), a = 1; a < t; a++)
    n[a - 1] = arguments[a];
  return e[dy] = n, new Proxy(e, {
    get(r, i) {
      if (Reflect.has(r, i))
        return Reflect.get(r, i);
      if (!(typeof i == "symbol" || i.startsWith("$") || i.startsWith("__"))) {
        for (const o of n)
          if (o.value && Reflect.has(o.value, i)) {
            const l = Reflect.get(o.value, i);
            return typeof l == "function" ? l.bind(o.value) : l;
          }
      }
    },
    has(r, i) {
      if (Reflect.has(r, i))
        return !0;
      if (typeof i == "symbol" || i.startsWith("$") || i.startsWith("__")) return !1;
      for (const o of n)
        if (o.value && Reflect.has(o.value, i))
          return !0;
      return !1;
    },
    set(r, i, o) {
      if (Reflect.has(r, i))
        return Reflect.set(r, i, o);
      if (typeof i == "symbol" || i.startsWith("$") || i.startsWith("__")) return !1;
      for (const l of n)
        if (l.value && Reflect.has(l.value, i))
          return Reflect.set(l.value, i, o);
      return !1;
    },
    getOwnPropertyDescriptor(r, i) {
      const o = Reflect.getOwnPropertyDescriptor(r, i);
      if (o) return o;
      if (!(typeof i == "symbol" || i.startsWith("$") || i.startsWith("__"))) {
        for (const l of n) {
          if (!l.value) continue;
          const s = fy(l.value, i) ?? ("_" in l.value ? fy(l.value._?.setupState, i) : void 0);
          if (s) return s;
        }
        for (const l of n) {
          const s = l.value && l.value[dy];
          if (!s) continue;
          const d = s.slice();
          for (; d.length; ) {
            const u = d.shift(), f = fy(u.value, i);
            if (f) return f;
            const h = u.value && u.value[dy];
            h && d.push(...h);
          }
        }
      }
    }
  });
}
const vP = Be({
  // TODO
  // disableKeys: Boolean,
  id: String,
  submenu: Boolean,
  ...la(nm({
    closeDelay: 250,
    closeOnContentClick: !0,
    locationStrategy: "connected",
    location: void 0,
    openDelay: 300,
    scrim: !1,
    scrollStrategy: "reposition",
    transition: {
      component: gp
    }
  }), ["absolute"])
}, "VMenu"), Ru = We()({
  name: "VMenu",
  props: vP(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      scopeId: r
    } = yc(), {
      isRtl: i
    } = Ra(), o = $r(), l = we(() => e.id || `v-menu-${o}`), s = Se(), d = Gt(Eb, null), u = ot(/* @__PURE__ */ new Set());
    Nn(Eb, {
      register() {
        u.value.add(o);
      },
      unregister() {
        u.value.delete(o);
      },
      closeParents(b) {
        setTimeout(() => {
          !u.value.size && !e.persistent && (b == null || s.value?.contentEl && !_3(b, s.value.contentEl)) && (a.value = !1, d?.closeParents());
        }, 40);
      }
    }), Ga(() => {
      d?.unregister(), document.removeEventListener("focusin", f);
    }), uw(() => a.value = !1);
    async function f(b) {
      const p = b.relatedTarget, y = b.target;
      await Vt(), a.value && p !== y && s.value?.contentEl && // We're the topmost menu
      s.value?.globalTop && // It isn't the document or the menu body
      ![document, s.value.contentEl].includes(y) && // It isn't inside the menu body
      !s.value.contentEl.contains(y) && hf(s.value.contentEl)[0]?.focus();
    }
    nt(a, (b) => {
      b ? (d?.register(), vn && document.addEventListener("focusin", f, {
        once: !0
      })) : (d?.unregister(), vn && document.removeEventListener("focusin", f));
    }, {
      immediate: !0
    });
    function h(b) {
      d?.closeParents(b);
    }
    function g(b) {
      if (!e.disabled)
        if (b.key === "Tab" || b.key === "Enter" && !e.closeOnContentClick) {
          if (b.key === "Enter" && (b.target instanceof HTMLTextAreaElement || b.target instanceof HTMLInputElement && b.target.closest("form"))) return;
          b.key === "Enter" && b.preventDefault(), kT(hf(s.value?.contentEl, !1), b.shiftKey ? "prev" : "next", (y) => y.tabIndex >= 0) || (a.value = !1, s.value?.activatorEl?.focus());
        } else e.submenu && b.key === (i.value ? "ArrowRight" : "ArrowLeft") && (a.value = !1, s.value?.activatorEl?.focus());
    }
    function v(b) {
      if (e.disabled) return;
      const p = s.value?.contentEl;
      p && a.value ? b.key === "ArrowDown" ? (b.preventDefault(), b.stopImmediatePropagation(), Hl(p, "next")) : b.key === "ArrowUp" ? (b.preventDefault(), b.stopImmediatePropagation(), Hl(p, "prev")) : e.submenu && (b.key === (i.value ? "ArrowRight" : "ArrowLeft") ? a.value = !1 : b.key === (i.value ? "ArrowLeft" : "ArrowRight") && (b.preventDefault(), Hl(p, "first"))) : (e.submenu ? b.key === (i.value ? "ArrowLeft" : "ArrowRight") : ["ArrowDown", "ArrowUp"].includes(b.key)) && (a.value = !0, b.preventDefault(), setTimeout(() => setTimeout(() => v(b))));
    }
    const w = W(() => He({
      "aria-haspopup": "menu",
      "aria-expanded": String(a.value),
      "aria-controls": l.value,
      onKeydown: v
    }, e.activatorProps));
    return Ge(() => {
      const b = ko.filterProps(e);
      return _(ko, He({
        ref: s,
        id: l.value,
        class: ["v-menu", e.class],
        style: e.style
      }, b, {
        modelValue: a.value,
        "onUpdate:modelValue": (p) => a.value = p,
        absolute: !0,
        activatorProps: w.value,
        location: e.location ?? (e.submenu ? "end" : "bottom"),
        "onClick:outside": h,
        onKeydown: g
      }, r), {
        activator: n.activator,
        default: function() {
          for (var p = arguments.length, y = new Array(p), S = 0; S < p; S++)
            y[S] = arguments[S];
          return _(Wt, {
            root: "VMenu"
          }, {
            default: () => [n.default?.(...y)]
          });
        }
      });
    }), pi({
      id: l,
      ΨopenChildren: u
    }, s);
  }
}), lW = Be({
  active: Boolean,
  disabled: Boolean,
  max: [Number, String],
  value: {
    type: [Number, String],
    default: 0
  },
  ...vt(),
  ...Gi({
    transition: {
      component: w0
    }
  })
}, "VCounter"), Ap = We()({
  name: "VCounter",
  functional: !0,
  props: lW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = we(() => e.max ? `${e.value} / ${e.max}` : String(e.value));
    return Ge(() => _(Sr, {
      transition: e.transition
    }, {
      default: () => [an(I("div", {
        class: Ie(["v-counter", {
          "text-error": e.max && !e.disabled && parseFloat(e.value) > parseFloat(e.max)
        }, e.class]),
        style: Xe(e.style)
      }, [n.default ? n.default({
        counter: a.value,
        max: e.max,
        value: e.value
      }) : a.value]), [[_a, e.active]])]
    })), {};
  }
}), cW = Be({
  floating: Boolean,
  ...vt()
}, "VFieldLabel"), Wd = We()({
  name: "VFieldLabel",
  props: cW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(Zu, {
      class: Ie(["v-field-label", {
        "v-field-label--floating": e.floating
      }, e.class]),
      style: Xe(e.style),
      "aria-hidden": e.floating || void 0
    }, n)), {};
  }
}), uW = ["underlined", "outlined", "filled", "solo", "solo-inverted", "solo-filled", "plain"], am = Be({
  appendInnerIcon: At,
  bgColor: String,
  clearable: Boolean,
  clearIcon: {
    type: At,
    default: "$clear"
  },
  active: Boolean,
  centerAffix: {
    type: Boolean,
    default: void 0
  },
  color: String,
  baseColor: String,
  dirty: Boolean,
  disabled: {
    type: Boolean,
    default: null
  },
  glow: Boolean,
  error: Boolean,
  flat: Boolean,
  iconColor: [Boolean, String],
  label: String,
  persistentClear: Boolean,
  prependInnerIcon: At,
  reverse: Boolean,
  singleLine: Boolean,
  variant: {
    type: String,
    default: "filled",
    validator: (e) => uW.includes(e)
  },
  "onClick:clear": nr(),
  "onClick:appendInner": nr(),
  "onClick:prependInner": nr(),
  ...vt(),
  ...wp(),
  ...Hn(),
  ...sn()
}, "VField"), Qs = We()({
  name: "VField",
  inheritAttrs: !1,
  props: {
    id: String,
    ...em(),
    ...am()
  },
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      themeClasses: i
    } = yn(e), {
      loaderClasses: o
    } = Qf(e), {
      focusClasses: l,
      isFocused: s,
      focus: d,
      blur: u
    } = ds(e), {
      InputIcon: f
    } = UE(e), {
      roundedClasses: h
    } = fa(e), {
      rtlClasses: g
    } = Ra(), v = we(() => e.dirty || e.active), w = we(() => !!(e.label || r.label)), b = we(() => !e.singleLine && w.value), p = $r(), y = W(() => e.id || `input-${p}`), S = we(() => `${y.value}-messages`), E = Se(), C = Se(), D = Se(), P = W(() => ["plain", "underlined"].includes(e.variant)), O = W(() => e.error || e.disabled ? void 0 : v.value && s.value ? e.color : e.baseColor), T = W(() => {
      if (!(!e.iconColor || e.glow && !s.value))
        return e.iconColor === !0 ? O.value : e.iconColor;
    }), {
      backgroundColorClasses: A,
      backgroundColorStyles: V
    } = An(() => e.bgColor), {
      textColorClasses: M,
      textColorStyles: B
    } = mr(O);
    nt(v, (j) => {
      if (b.value) {
        const te = E.value.$el, de = C.value.$el;
        requestAnimationFrame(() => {
          const Z = Aw(te), F = de.getBoundingClientRect(), K = F.x - Z.x, se = F.y - Z.y - (Z.height / 2 - F.height / 2), X = F.width / 0.75, he = Math.abs(X - Z.width) > 1 ? {
            maxWidth: ht(X)
          } : void 0, ve = getComputedStyle(te), pe = getComputedStyle(de), z = parseFloat(ve.transitionDuration) * 1e3 || 150, ke = parseFloat(pe.getPropertyValue("--v-field-label-scale")), Me = pe.getPropertyValue("color");
          te.style.visibility = "visible", de.style.visibility = "hidden", Fl(te, {
            transform: `translate(${K}px, ${se}px) scale(${ke})`,
            color: Me,
            ...he
          }, {
            duration: z,
            easing: _f,
            direction: j ? "normal" : "reverse"
          }).finished.then(() => {
            te.style.removeProperty("visibility"), de.style.removeProperty("visibility");
          });
        });
      }
    }, {
      flush: "post"
    });
    const N = W(() => ({
      isActive: v,
      isFocused: s,
      controlRef: D,
      blur: u,
      focus: d
    }));
    function H(j) {
      j.target !== document.activeElement && j.preventDefault();
    }
    return Ge(() => {
      const j = e.variant === "outlined", te = !!(r["prepend-inner"] || e.prependInnerIcon), de = !!(e.clearable || r.clear) && !e.disabled, Z = !!(r["append-inner"] || e.appendInnerIcon || de), F = () => r.label ? r.label({
        ...N.value,
        label: e.label,
        props: {
          for: y.value
        }
      }) : e.label;
      return I("div", He({
        class: ["v-field", {
          "v-field--active": v.value,
          "v-field--appended": Z,
          "v-field--center-affix": e.centerAffix ?? !P.value,
          "v-field--disabled": e.disabled,
          "v-field--dirty": e.dirty,
          "v-field--error": e.error,
          "v-field--glow": e.glow,
          "v-field--flat": e.flat,
          "v-field--has-background": !!e.bgColor,
          "v-field--persistent-clear": e.persistentClear,
          "v-field--prepended": te,
          "v-field--reverse": e.reverse,
          "v-field--single-line": e.singleLine,
          "v-field--no-label": !F(),
          [`v-field--variant-${e.variant}`]: !0
        }, i.value, A.value, l.value, o.value, h.value, g.value, e.class],
        style: [V.value, e.style],
        onClick: H
      }, n), [I("div", {
        class: "v-field__overlay"
      }, null), _(Jf, {
        name: "v-field",
        active: !!e.loading,
        color: e.error ? "error" : typeof e.loading == "string" ? e.loading : e.color
      }, {
        default: r.loader
      }), te && I("div", {
        key: "prepend",
        class: "v-field__prepend-inner",
        onMousedown: (K) => {
          K.preventDefault(), K.stopPropagation();
        }
      }, [e.prependInnerIcon && _(f, {
        key: "prepend-icon",
        name: "prependInner",
        color: T.value
      }, null), r["prepend-inner"]?.(N.value)]), I("div", {
        class: "v-field__field",
        "data-no-activator": ""
      }, [["filled", "solo", "solo-inverted", "solo-filled"].includes(e.variant) && b.value && _(Wd, {
        key: "floating-label",
        ref: C,
        class: Ie([M.value]),
        floating: !0,
        for: y.value,
        style: Xe(B.value)
      }, {
        default: () => [F()]
      }), w.value && _(Wd, {
        key: "label",
        ref: E,
        for: y.value
      }, {
        default: () => [F()]
      }), r.default?.({
        ...N.value,
        props: {
          id: y.value,
          class: "v-field__input",
          "aria-describedby": S.value
        },
        focus: d,
        blur: u
      }) ?? I("div", {
        id: y.value,
        class: "v-field__input",
        "aria-describedby": S.value
      }, null)]), de && _(k0, {
        key: "clear"
      }, {
        default: () => [an(I("div", {
          class: "v-field__clearable",
          onMousedown: (K) => {
            K.preventDefault(), K.stopPropagation();
          }
        }, [_(Wt, {
          defaults: {
            VIcon: {
              icon: e.clearIcon
            }
          }
        }, {
          default: () => [r.clear ? r.clear({
            ...N.value,
            props: {
              onFocus: d,
              onBlur: u,
              onClick: e["onClick:clear"],
              tabindex: -1
            }
          }) : _(f, {
            name: "clear",
            onFocus: d,
            onBlur: u,
            tabindex: -1
          }, null)]
        })]), [[_a, e.dirty]])]
      }), Z && I("div", {
        key: "append",
        class: "v-field__append-inner",
        onMousedown: (K) => {
          K.preventDefault(), K.stopPropagation();
        }
      }, [r["append-inner"]?.(N.value), e.appendInnerIcon && _(f, {
        key: "append-icon",
        name: "appendInner",
        color: T.value
      }, null)]), I("div", {
        class: Ie(["v-field__outline", M.value]),
        style: Xe(B.value)
      }, [j && I(Qe, null, [I("div", {
        class: "v-field__outline__start"
      }, null), b.value && I("div", {
        class: "v-field__outline__notch"
      }, [_(Wd, {
        ref: C,
        floating: !0,
        for: y.value
      }, {
        default: () => [F()]
      })]), I("div", {
        class: "v-field__outline__end"
      }, null)]), P.value && b.value && _(Wd, {
        ref: C,
        floating: !0,
        for: y.value
      }, {
        default: () => [F()]
      })])]);
    }), {
      controlRef: D,
      fieldIconColor: T
    };
  }
});
function gP(e) {
  function t(n, a) {
    !e.autofocus || !n || a[0].target?.focus?.();
  }
  return {
    onIntersect: t
  };
}
const dW = ["color", "file", "time", "date", "datetime-local", "week", "month"], rm = Be({
  autofocus: Boolean,
  counter: [Boolean, Number, String],
  counterValue: [Number, Function],
  prefix: String,
  placeholder: String,
  persistentPlaceholder: Boolean,
  persistentCounter: Boolean,
  suffix: String,
  role: String,
  type: {
    type: String,
    default: "text"
  },
  modelModifiers: Object,
  ...fs(),
  ...am()
}, "VTextField"), os = We()({
  name: "VTextField",
  directives: {
    vIntersect: ns
  },
  inheritAttrs: !1,
  props: rm(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const i = kt(e, "modelValue"), {
      isFocused: o,
      focus: l,
      blur: s
    } = ds(e), {
      onIntersect: d
    } = gP(e), u = W(() => typeof e.counterValue == "function" ? e.counterValue(i.value) : typeof e.counterValue == "number" ? e.counterValue : (i.value ?? "").toString().length), f = W(() => {
      if (n.maxlength) return n.maxlength;
      if (!(!e.counter || typeof e.counter != "number" && typeof e.counter != "string"))
        return e.counter;
    }), h = W(() => ["plain", "underlined"].includes(e.variant)), g = Se(), v = Se(), w = Se(), b = W(() => dW.includes(e.type) || e.persistentPlaceholder || o.value || e.active);
    function p() {
      o.value || l(), Vt(() => {
        w.value !== document.activeElement && w.value?.focus();
      });
    }
    function y(D) {
      a("mousedown:control", D), D.target !== w.value && (p(), D.preventDefault());
    }
    function S(D) {
      a("click:control", D);
    }
    function E(D, P) {
      D.stopPropagation(), p(), Vt(() => {
        i.value = null, P(), ip(e["onClick:clear"], D);
      });
    }
    function C(D) {
      const P = D.target;
      if (i.value = P.value, e.modelModifiers?.trim && ["text", "search", "password", "tel", "url"].includes(e.type)) {
        const O = [P.selectionStart, P.selectionEnd];
        Vt(() => {
          P.selectionStart = O[0], P.selectionEnd = O[1];
        });
      }
    }
    return Ge(() => {
      const D = !!(r.counter || e.counter !== !1 && e.counter != null), P = !!(D || r.details), [O, T] = nl(n), {
        modelValue: A,
        ...V
      } = hr.filterProps(e), M = Qs.filterProps(e);
      return _(hr, He({
        ref: g,
        modelValue: i.value,
        "onUpdate:modelValue": (B) => i.value = B,
        class: ["v-text-field", {
          "v-text-field--prefixed": e.prefix,
          "v-text-field--suffixed": e.suffix,
          "v-input--plain-underlined": h.value
        }, e.class],
        style: e.style
      }, O, V, {
        centerAffix: !h.value,
        focused: o.value
      }), {
        ...r,
        default: (B) => {
          let {
            id: N,
            isDisabled: H,
            isDirty: j,
            isReadonly: te,
            isValid: de,
            reset: Z
          } = B;
          return _(Qs, He({
            ref: v,
            onMousedown: y,
            onClick: S,
            "onClick:clear": (F) => E(F, Z),
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"],
            role: e.role
          }, M, {
            id: N.value,
            active: b.value || j.value,
            dirty: j.value || e.dirty,
            disabled: H.value,
            focused: o.value,
            error: de.value === !1
          }), {
            ...r,
            default: (F) => {
              let {
                props: {
                  class: K,
                  ...se
                }
              } = F;
              const X = an(I("input", He({
                ref: w,
                value: i.value,
                onInput: C,
                autofocus: e.autofocus,
                readonly: te.value,
                disabled: H.value,
                name: e.name,
                placeholder: e.placeholder,
                size: 1,
                type: e.type,
                onFocus: p,
                onBlur: s
              }, se, T), null), [[ns, {
                handler: d
              }, null, {
                once: !0
              }]]);
              return I(Qe, null, [e.prefix && I("span", {
                class: "v-text-field__prefix"
              }, [I("span", {
                class: "v-text-field__prefix__text"
              }, [e.prefix])]), r.default ? I("div", {
                class: Ie(K),
                "data-no-activator": ""
              }, [r.default(), X]) : es(X, {
                class: K
              }), e.suffix && I("span", {
                class: "v-text-field__suffix"
              }, [I("span", {
                class: "v-text-field__suffix__text"
              }, [e.suffix])])]);
            }
          });
        },
        details: P ? (B) => I(Qe, null, [r.details?.(B), D && I(Qe, null, [I("span", null, null), _(Ap, {
          active: e.persistentCounter || o.value,
          value: u.value,
          max: f.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), pi({}, g, v, w);
  }
}), fW = Be({
  renderless: Boolean,
  ...vt()
}, "VVirtualScrollItem"), yP = We()({
  name: "VVirtualScrollItem",
  inheritAttrs: !1,
  props: fW(),
  emits: {
    "update:height": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      resizeRef: i,
      contentRect: o
    } = Wi(void 0, "border");
    nt(() => o.value?.height, (l) => {
      l != null && a("update:height", l);
    }), Ge(() => e.renderless ? I(Qe, null, [r.default?.({
      itemRef: i
    })]) : I("div", He({
      ref: i,
      class: ["v-virtual-scroll__item", e.class],
      style: e.style
    }, n), [r.default?.()]));
  }
}), mW = -1, hW = 1, my = 100, bP = Be({
  itemHeight: {
    type: [Number, String],
    default: null
  },
  itemKey: {
    type: [String, Array, Function],
    default: null
  },
  height: [Number, String]
}, "virtual");
function wP(e, t) {
  const n = mi(), a = ot(0);
  Zn(() => {
    a.value = parseFloat(e.itemHeight || 0);
  });
  const r = ot(0), i = ot(Math.ceil(
    // Assume 16px items filling the entire screen height if
    // not provided. This is probably incorrect but it minimises
    // the chance of ending up with empty space at the bottom.
    // The default value is set here to avoid poisoning getSize()
    (parseInt(e.height) || n.height.value) / (a.value || 16)
  ) || 1), o = ot(0), l = ot(0), s = Se(), d = Se();
  let u = 0;
  const {
    resizeRef: f,
    contentRect: h
  } = Wi();
  Zn(() => {
    f.value = s.value;
  });
  const g = W(() => s.value === document.documentElement ? n.height.value : h.value?.height || parseInt(e.height) || 0), v = W(() => !!(s.value && d.value && g.value && a.value));
  let w = Array.from({
    length: t.value.length
  }), b = Array.from({
    length: t.value.length
  });
  const p = ot(0);
  let y = -1;
  function S(F) {
    return w[F] || a.value;
  }
  const E = d3(() => {
    const F = performance.now();
    b[0] = 0;
    const K = t.value.length;
    for (let se = 1; se <= K - 1; se++)
      b[se] = (b[se - 1] || 0) + S(se - 1);
    p.value = Math.max(p.value, performance.now() - F);
  }, p), C = nt(v, (F) => {
    F && (C(), u = d.value.offsetTop, E.immediate(), j(), ~y && Vt(() => {
      vn && window.requestAnimationFrame(() => {
        de(y), y = -1;
      });
    }));
  });
  qa(() => {
    E.clear();
  });
  function D(F, K) {
    const se = w[F], X = a.value;
    a.value = X ? Math.min(a.value, K) : K, (se !== K || X !== a.value) && (w[F] = K, E());
  }
  function P(F) {
    return F = Pn(F, 0, t.value.length - 1), b[F] || 0;
  }
  function O(F) {
    return _W(b, F);
  }
  let T = 0, A = 0, V = 0;
  nt(g, (F, K) => {
    K && (j(), F < K && requestAnimationFrame(() => {
      A = 0, j();
    }));
  });
  let M = -1;
  function B() {
    if (!s.value || !d.value) return;
    const F = s.value.scrollTop, K = performance.now();
    K - V > 500 ? (A = Math.sign(F - T), u = d.value.offsetTop) : A = F - T, T = F, V = K, window.clearTimeout(M), M = window.setTimeout(N, 500), j();
  }
  function N() {
    !s.value || !d.value || (A = 0, V = 0, window.clearTimeout(M), j());
  }
  let H = -1;
  function j() {
    cancelAnimationFrame(H), H = requestAnimationFrame(te);
  }
  function te() {
    if (!s.value || !g.value) return;
    const F = T - u, K = Math.sign(A), se = Math.max(0, F - my), X = Pn(O(se), 0, t.value.length), he = F + g.value + my, ve = Pn(O(he) + 1, X + 1, t.value.length);
    if (
      // Only update the side we're scrolling towards,
      // the other side will be updated incidentally
      (K !== mW || X < r.value) && (K !== hW || ve > i.value)
    ) {
      const pe = P(r.value) - P(X), z = P(ve) - P(i.value);
      Math.max(pe, z) > my ? (r.value = X, i.value = ve) : (X <= 0 && (r.value = X), ve >= t.value.length && (i.value = ve));
    }
    o.value = P(r.value), l.value = P(t.value.length) - P(i.value);
  }
  function de(F) {
    const K = P(F);
    !s.value || F && !K ? y = F : s.value.scrollTop = K;
  }
  const Z = W(() => t.value.slice(r.value, i.value).map((F, K) => {
    const se = K + r.value;
    return {
      raw: F,
      index: se,
      key: Da(F, e.itemKey, se)
    };
  }));
  return nt(t, () => {
    w = Array.from({
      length: t.value.length
    }), b = Array.from({
      length: t.value.length
    }), E.immediate(), j();
  }, {
    deep: 1
  }), {
    calculateVisibleItems: j,
    containerRef: s,
    markerRef: d,
    computedItems: Z,
    paddingTop: o,
    paddingBottom: l,
    scrollToIndex: de,
    handleScroll: B,
    handleScrollend: N,
    handleItemResize: D
  };
}
function _W(e, t) {
  let n = e.length - 1, a = 0, r = 0, i = null, o = -1;
  if (e[n] < t)
    return n;
  for (; a <= n; )
    if (r = a + n >> 1, i = e[r], i > t)
      n = r - 1;
    else if (i < t)
      o = r, a = r + 1;
    else return i === t ? r : a;
  return o;
}
const pW = Be({
  items: {
    type: Array,
    default: () => []
  },
  renderless: Boolean,
  ...bP(),
  ...vt(),
  ...La()
}, "VVirtualScroll"), xp = We()({
  name: "VVirtualScroll",
  props: pW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = ya("VVirtualScroll"), {
      dimensionStyles: r
    } = Fa(e), {
      calculateVisibleItems: i,
      containerRef: o,
      markerRef: l,
      handleScroll: s,
      handleScrollend: d,
      handleItemResize: u,
      scrollToIndex: f,
      paddingTop: h,
      paddingBottom: g,
      computedItems: v
    } = wP(e, we(() => e.items));
    return Fr(() => e.renderless, () => {
      function w() {
        const p = (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1) ? "addEventListener" : "removeEventListener";
        o.value === document.documentElement ? (document[p]("scroll", s, {
          passive: !0
        }), document[p]("scrollend", d)) : (o.value?.[p]("scroll", s, {
          passive: !0
        }), o.value?.[p]("scrollend", d));
      }
      on(() => {
        o.value = Ew(a.vnode.el, !0), w(!0);
      }), qa(w);
    }), Ge(() => {
      const w = v.value.map((b) => _(yP, {
        key: b.key,
        renderless: e.renderless,
        "onUpdate:height": (p) => u(b.index, p)
      }, {
        default: (p) => n.default?.({
          item: b.raw,
          index: b.index,
          ...p
        })
      }));
      return e.renderless ? I(Qe, null, [I("div", {
        ref: l,
        class: "v-virtual-scroll__spacer",
        style: {
          paddingTop: ht(h.value)
        }
      }, null), w, I("div", {
        class: "v-virtual-scroll__spacer",
        style: {
          paddingBottom: ht(g.value)
        }
      }, null)]) : I("div", {
        ref: o,
        class: Ie(["v-virtual-scroll", e.class]),
        onScrollPassive: s,
        onScrollend: d,
        style: Xe([r.value, e.style])
      }, [I("div", {
        ref: l,
        class: "v-virtual-scroll__container",
        style: {
          paddingTop: ht(h.value),
          paddingBottom: ht(g.value)
        }
      }, [w])]);
    }), {
      calculateVisibleItems: i,
      scrollToIndex: f
    };
  }
});
function V0(e, t) {
  const n = ot(!1);
  let a;
  function r(l) {
    cancelAnimationFrame(a), n.value = !0, a = requestAnimationFrame(() => {
      a = requestAnimationFrame(() => {
        n.value = !1;
      });
    });
  }
  async function i() {
    await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => {
      if (n.value) {
        const s = nt(n, () => {
          s(), l();
        });
      } else l();
    });
  }
  async function o(l) {
    if (l.key === "Tab" && t.value?.focus(), !["PageDown", "PageUp", "Home", "End"].includes(l.key)) return;
    const s = e.value?.$el;
    if (!s) return;
    (l.key === "Home" || l.key === "End") && s.scrollTo({
      top: l.key === "Home" ? 0 : s.scrollHeight,
      behavior: "smooth"
    }), await i();
    const d = s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");
    if (l.key === "PageDown" || l.key === "Home") {
      const u = s.getBoundingClientRect().top;
      for (const f of d)
        if (f.getBoundingClientRect().top >= u) {
          f.focus();
          break;
        }
    } else {
      const u = s.getBoundingClientRect().bottom;
      for (const f of [...d].reverse())
        if (f.getBoundingClientRect().bottom <= u) {
          f.focus();
          break;
        }
    }
  }
  return {
    onScrollPassive: r,
    onKeydown: o
  };
}
const M0 = Be({
  chips: Boolean,
  closableChips: Boolean,
  closeText: {
    type: String,
    default: "$vuetify.close"
  },
  openText: {
    type: String,
    default: "$vuetify.open"
  },
  eager: Boolean,
  hideNoData: Boolean,
  hideSelected: Boolean,
  listProps: {
    type: Object
  },
  menu: Boolean,
  menuIcon: {
    type: At,
    default: "$dropdown"
  },
  menuProps: {
    type: Object
  },
  multiple: Boolean,
  noDataText: {
    type: String,
    default: "$vuetify.noDataText"
  },
  openOnClear: Boolean,
  itemColor: String,
  ...sP({
    itemChildren: !1
  })
}, "Select"), vW = Be({
  ...M0(),
  ...la(rm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...Gi({
    transition: {
      component: gp
    }
  })
}, "VSelect"), R0 = We()({
  name: "VSelect",
  props: vW(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), r = Se(), i = Se(), o = Se(), {
      items: l,
      transformIn: s,
      transformOut: d
    } = E0(e), u = kt(e, "modelValue", [], (F) => s(F === null ? [null] : Xn(F)), (F) => {
      const K = d(F);
      return e.multiple ? K : K[0] ?? null;
    }), f = W(() => typeof e.counterValue == "function" ? e.counterValue(u.value) : typeof e.counterValue == "number" ? e.counterValue : u.value.length), h = tm(e), g = W(() => u.value.map((F) => F.value)), v = ot(!1);
    let w = "", b = -1, p;
    const y = W(() => e.hideSelected ? l.value.filter((F) => !u.value.some((K) => (e.valueComparator || fr)(K, F))) : l.value), S = W(() => e.hideNoData && !y.value.length || h.isReadonly.value || h.isDisabled.value), E = kt(e, "menu"), C = W({
      get: () => E.value,
      set: (F) => {
        E.value && !F && i.value?.ΨopenChildren.size || F && S.value || (E.value = F);
      }
    }), D = we(() => C.value ? e.closeText : e.openText), P = W(() => ({
      ...e.menuProps,
      activatorProps: {
        ...e.menuProps?.activatorProps || {},
        "aria-haspopup": "listbox"
        // Set aria-haspopup to 'listbox'
      }
    })), O = Se(), T = V0(O, r);
    function A(F) {
      e.openOnClear && (C.value = !0);
    }
    function V() {
      S.value || (C.value = !C.value);
    }
    function M(F) {
      Cu(F) && B(F);
    }
    function B(F) {
      if (!F.key || h.isReadonly.value) return;
      ["Enter", " ", "ArrowDown", "ArrowUp", "Home", "End"].includes(F.key) && F.preventDefault(), ["Enter", "ArrowDown", " "].includes(F.key) && (C.value = !0), ["Escape", "Tab"].includes(F.key) && (C.value = !1), F.key === "Home" ? O.value?.focus("first") : F.key === "End" && O.value?.focus("last");
      const K = 1e3;
      if (!Cu(F)) return;
      const se = performance.now();
      se - p > K && (w = "", b = -1), w += F.key.toLowerCase(), p = se;
      const X = y.value;
      function he() {
        let Me = ve();
        return Me || w.at(-1) === w.at(-2) && (w = w.slice(0, -1), Me = ve(), Me) || (b = -1, Me = ve(), Me) ? Me : (w = F.key.toLowerCase(), ve());
      }
      function ve() {
        for (let Me = b + 1; Me < X.length; Me++) {
          const Le = X[Me];
          if (Le.title.toLowerCase().startsWith(w))
            return [Le, Me];
        }
      }
      const pe = he();
      if (!pe) return;
      const [z, ke] = pe;
      b = ke, O.value?.focus(ke), e.multiple || (u.value = [z]);
    }
    function N(F) {
      let K = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!F.props.disabled)
        if (e.multiple) {
          const se = u.value.findIndex((he) => (e.valueComparator || fr)(he.value, F.value)), X = K ?? !~se;
          if (~se) {
            const he = X ? [...u.value, F] : [...u.value];
            he.splice(se, 1), u.value = he;
          } else X && (u.value = [...u.value, F]);
        } else {
          const se = K !== !1;
          u.value = se ? [F] : [], Vt(() => {
            C.value = !1;
          });
        }
    }
    function H(F) {
      O.value?.$el.contains(F.relatedTarget) || (C.value = !1);
    }
    function j() {
      e.eager && o.value?.calculateVisibleItems();
    }
    function te() {
      v.value && r.value?.focus();
    }
    function de(F) {
      v.value = !0;
    }
    function Z(F) {
      if (F == null) u.value = [];
      else if (Su(r.value, ":autofill") || Su(r.value, ":-webkit-autofill")) {
        const K = l.value.find((se) => se.title === F);
        K && N(K);
      } else r.value && (r.value.value = "");
    }
    return nt(C, () => {
      if (!e.hideSelected && C.value && u.value.length) {
        const F = y.value.findIndex((K) => u.value.some((se) => (e.valueComparator || fr)(se.value, K.value)));
        vn && window.requestAnimationFrame(() => {
          F >= 0 && o.value?.scrollToIndex(F);
        });
      }
    }), nt(() => e.items, (F, K) => {
      C.value || v.value && !K.length && F.length && (C.value = !0);
    }), Ge(() => {
      const F = !!(e.chips || n.chip), K = !!(!e.hideNoData || y.value.length || n["prepend-item"] || n["append-item"] || n["no-data"]), se = u.value.length > 0, X = os.filterProps(e), he = se || !v.value && e.label && !e.persistentPlaceholder ? void 0 : e.placeholder;
      return _(os, He({
        ref: r
      }, X, {
        modelValue: u.value.map((ve) => ve.props.value).join(", "),
        "onUpdate:modelValue": Z,
        focused: v.value,
        "onUpdate:focused": (ve) => v.value = ve,
        validationValue: u.externalValue,
        counterValue: f.value,
        dirty: se,
        class: ["v-select", {
          "v-select--active-menu": C.value,
          "v-select--chips": !!e.chips,
          [`v-select--${e.multiple ? "multiple" : "single"}`]: !0,
          "v-select--selected": u.value.length,
          "v-select--selection-slot": !!n.selection
        }, e.class],
        style: e.style,
        inputmode: "none",
        placeholder: he,
        "onClick:clear": A,
        "onMousedown:control": V,
        onBlur: H,
        onKeydown: B,
        "aria-label": a(D.value),
        title: a(D.value)
      }), {
        ...n,
        default: () => I(Qe, null, [_(Ru, He({
          ref: i,
          modelValue: C.value,
          "onUpdate:modelValue": (ve) => C.value = ve,
          activator: "parent",
          contentClass: "v-select__content",
          disabled: S.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: j,
          onAfterLeave: te
        }, P.value), {
          default: () => [K && _(Cp, He({
            ref: O,
            selected: g.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (ve) => ve.preventDefault(),
            onKeydown: M,
            onFocusin: de,
            tabindex: "-1",
            "aria-live": "polite",
            "aria-label": `${e.label}-list`,
            color: e.itemColor ?? e.color
          }, T, e.listProps), {
            default: () => [n["prepend-item"]?.(), !y.value.length && !e.hideNoData && (n["no-data"]?.() ?? _(is, {
              key: "no-data",
              title: a(e.noDataText)
            }, null)), _(xp, {
              ref: o,
              renderless: !0,
              items: y.value,
              itemKey: "value"
            }, {
              default: (ve) => {
                let {
                  item: pe,
                  index: z,
                  itemRef: ke
                } = ve;
                const Me = v3(pe.props), Le = He(pe.props, {
                  ref: ke,
                  key: pe.value,
                  onClick: () => N(pe, null)
                });
                return n.item?.({
                  item: pe,
                  index: z,
                  props: Le
                }) ?? _(is, He(Le, {
                  role: "option"
                }), {
                  prepend: (ce) => {
                    let {
                      isSelected: ne
                    } = ce;
                    return I(Qe, null, [e.multiple && !e.hideSelected ? _(rs, {
                      key: pe.value,
                      modelValue: ne,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, Me.prependAvatar && _(Ei, {
                      image: Me.prependAvatar
                    }, null), Me.prependIcon && _(pn, {
                      icon: Me.prependIcon
                    }, null)]);
                  }
                });
              }
            }), n["append-item"]?.()]
          })]
        }), u.value.map((ve, pe) => {
          function z(ce) {
            ce.stopPropagation(), ce.preventDefault(), N(ve, !1);
          }
          const ke = {
            "onClick:close": z,
            onKeydown(ce) {
              ce.key !== "Enter" && ce.key !== " " || (ce.preventDefault(), ce.stopPropagation(), z(ce));
            },
            onMousedown(ce) {
              ce.preventDefault(), ce.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, Me = F ? !!n.chip : !!n.selection, Le = Me ? op(F ? n.chip({
            item: ve,
            index: pe,
            props: ke
          }) : n.selection({
            item: ve,
            index: pe
          })) : void 0;
          if (!(Me && !Le))
            return I("div", {
              key: ve.value,
              class: "v-select__selection"
            }, [F ? n.chip ? _(Wt, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: ve.title
                }
              }
            }, {
              default: () => [Le]
            }) : _(ed, He({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: ve.title,
              disabled: ve.props.disabled
            }, ke), null) : Le ?? I("span", {
              class: "v-select__selection-text"
            }, [ve.title, e.multiple && pe < u.value.length - 1 && I("span", {
              class: "v-select__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var ve = arguments.length, pe = new Array(ve), z = 0; z < ve; z++)
            pe[z] = arguments[z];
          return I(Qe, null, [n["append-inner"]?.(...pe), e.menuIcon ? _(pn, {
            class: "v-select__menu-icon",
            color: r.value?.fieldIconColor,
            icon: e.menuIcon
          }, null) : void 0]);
        }
      });
    }), pi({
      isFocused: v,
      menu: C,
      select: N
    }, r);
  }
}), gW = (e, t, n) => {
  if (e == null || t == null) return -1;
  if (!t.length) return 0;
  e = e.toString().toLocaleLowerCase(), t = t.toString().toLocaleLowerCase();
  const a = [];
  let r = e.indexOf(t);
  for (; ~r; )
    a.push([r, r + t.length]), r = e.indexOf(t, r + t.length);
  return a.length ? a : -1;
};
function hy(e, t) {
  if (!(e == null || typeof e == "boolean" || e === -1))
    return typeof e == "number" ? [[e, e + t.length]] : Array.isArray(e[0]) ? e : [e];
}
const im = Be({
  customFilter: Function,
  customKeyFilter: Object,
  filterKeys: [Array, String],
  filterMode: {
    type: String,
    default: "intersection"
  },
  noFilter: Boolean
}, "filter");
function yW(e, t, n) {
  const a = [], r = n?.default ?? gW, i = n?.filterKeys ? Xn(n.filterKeys) : !1, o = Object.keys(n?.customKeyFilter ?? {}).length;
  if (!e?.length) return a;
  e: for (let l = 0; l < e.length; l++) {
    const [s, d = s] = Xn(e[l]), u = {}, f = {};
    let h = -1;
    if ((t || o > 0) && !n?.noFilter) {
      if (typeof s == "object") {
        const w = i || Object.keys(d);
        for (const b of w) {
          const p = Da(d, b), y = n?.customKeyFilter?.[b];
          if (h = y ? y(p, t, s) : r(p, t, s), h !== -1 && h !== !1)
            y ? u[b] = hy(h, t) : f[b] = hy(h, t);
          else if (n?.filterMode === "every")
            continue e;
        }
      } else
        h = r(s, t, s), h !== -1 && h !== !1 && (f.title = hy(h, t));
      const g = Object.keys(f).length, v = Object.keys(u).length;
      if (!g && !v || n?.filterMode === "union" && v !== o && !g || n?.filterMode === "intersection" && (v !== o || !g)) continue;
    }
    a.push({
      index: l,
      matches: {
        ...f,
        ...u
      }
    });
  }
  return a;
}
function om(e, t, n, a) {
  const r = ot([]), i = ot(/* @__PURE__ */ new Map()), o = W(() => a?.transform ? fe(t).map((s) => [s, a.transform(s)]) : fe(t));
  Zn(() => {
    const s = typeof n == "function" ? n() : fe(n), d = typeof s != "string" && typeof s != "number" ? "" : String(s), u = yW(o.value, d, {
      customKeyFilter: {
        ...e.customKeyFilter,
        ...fe(a?.customKeyFilter)
      },
      default: e.customFilter,
      filterKeys: e.filterKeys,
      filterMode: e.filterMode,
      noFilter: e.noFilter
    }), f = fe(t), h = [], g = /* @__PURE__ */ new Map();
    u.forEach((v) => {
      let {
        index: w,
        matches: b
      } = v;
      const p = f[w];
      h.push(p), g.set(p.value, b);
    }), r.value = h, i.value = g;
  });
  function l(s) {
    return i.value.get(s.value);
  }
  return {
    filteredItems: r,
    filteredMatches: i,
    getMatches: l
  };
}
function kP(e, t, n) {
  return n == null || !n.length ? t : n.map((a, r) => {
    const i = r === 0 ? 0 : n[r - 1][1], o = [I("span", {
      class: Ie(`${e}__unmask`)
    }, [t.slice(i, a[0])]), I("span", {
      class: Ie(`${e}__mask`)
    }, [t.slice(a[0], a[1])])];
    return r === n.length - 1 && o.push(I("span", {
      class: Ie(`${e}__unmask`)
    }, [t.slice(a[1])])), I(Qe, null, [o]);
  });
}
const bW = Be({
  autoSelectFirst: {
    type: [Boolean, String]
  },
  clearOnSelect: Boolean,
  search: String,
  ...im({
    filterKeys: ["title"]
  }),
  ...M0(),
  ...la(rm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...Gi({
    transition: !1
  })
}, "VAutocomplete"), wW = We()({
  name: "VAutocomplete",
  props: bW(),
  emits: {
    "update:focused": (e) => !0,
    "update:search": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), r = Se(), i = ot(!1), o = ot(!0), l = ot(!1), s = Se(), d = Se(), u = ot(-1), {
      items: f,
      transformIn: h,
      transformOut: g
    } = E0(e), {
      textColorClasses: v,
      textColorStyles: w
    } = mr(() => r.value?.color), b = kt(e, "search", ""), p = kt(e, "modelValue", [], (Le) => h(Le === null ? [null] : Xn(Le)), (Le) => {
      const ce = g(Le);
      return e.multiple ? ce : ce[0] ?? null;
    }), y = W(() => typeof e.counterValue == "function" ? e.counterValue(p.value) : typeof e.counterValue == "number" ? e.counterValue : p.value.length), S = tm(e), {
      filteredItems: E,
      getMatches: C
    } = om(e, f, () => o.value ? "" : b.value), D = W(() => e.hideSelected ? E.value.filter((Le) => !p.value.some((ce) => ce.value === Le.value)) : E.value), P = W(() => !!(e.chips || n.chip)), O = W(() => P.value || !!n.selection), T = W(() => p.value.map((Le) => Le.props.value)), A = W(() => (e.autoSelectFirst === !0 || e.autoSelectFirst === "exact" && b.value === D.value[0]?.title) && D.value.length > 0 && !o.value && !l.value), V = W(() => e.hideNoData && !D.value.length || S.isReadonly.value || S.isDisabled.value), M = kt(e, "menu"), B = W({
      get: () => M.value,
      set: (Le) => {
        M.value && !Le && s.value?.ΨopenChildren.size || Le && V.value || (M.value = Le);
      }
    }), N = W(() => B.value ? e.closeText : e.openText), H = Se(), j = V0(H, r);
    function te(Le) {
      e.openOnClear && (B.value = !0), b.value = "";
    }
    function de() {
      V.value || (B.value = !0);
    }
    function Z(Le) {
      V.value || (i.value && (Le.preventDefault(), Le.stopPropagation()), B.value = !B.value);
    }
    function F(Le) {
      Le.key !== " " && Cu(Le) && r.value?.focus();
    }
    function K(Le) {
      if (S.isReadonly.value) return;
      const ce = r.value?.selectionStart, ne = p.value.length;
      if (["Enter", "ArrowDown", "ArrowUp"].includes(Le.key) && Le.preventDefault(), ["Enter", "ArrowDown"].includes(Le.key) && (B.value = !0), ["Escape"].includes(Le.key) && (B.value = !1), A.value && ["Enter", "Tab"].includes(Le.key) && !p.value.some((G) => {
        let {
          value: le
        } = G;
        return le === D.value[0].value;
      }) && Me(D.value[0]), Le.key === "ArrowDown" && A.value && H.value?.focus("next"), ["Backspace", "Delete"].includes(Le.key)) {
        if (!e.multiple && O.value && p.value.length > 0 && !b.value) return Me(p.value[0], !1);
        if (~u.value) {
          Le.preventDefault();
          const G = u.value;
          Me(p.value[u.value], !1), u.value = G >= ne - 1 ? ne - 2 : G;
        } else Le.key === "Backspace" && !b.value && (u.value = ne - 1);
        return;
      }
      if (e.multiple)
        if (Le.key === "ArrowLeft") {
          if (u.value < 0 && ce && ce > 0) return;
          const G = u.value > -1 ? u.value - 1 : ne - 1;
          if (p.value[G])
            u.value = G;
          else {
            const le = b.value?.length ?? null;
            u.value = -1, r.value?.setSelectionRange(le, le);
          }
        } else if (Le.key === "ArrowRight") {
          if (u.value < 0) return;
          const G = u.value + 1;
          p.value[G] ? u.value = G : (u.value = -1, r.value?.setSelectionRange(0, 0));
        } else ~u.value && Cu(Le) && (u.value = -1);
    }
    function se(Le) {
      if (Su(r.value, ":autofill") || Su(r.value, ":-webkit-autofill")) {
        const ce = f.value.find((ne) => ne.title === Le.target.value);
        ce && Me(ce);
      }
    }
    function X() {
      e.eager && d.value?.calculateVisibleItems();
    }
    function he() {
      i.value && (o.value = !0, r.value?.focus());
    }
    function ve(Le) {
      i.value = !0, setTimeout(() => {
        l.value = !0;
      });
    }
    function pe(Le) {
      l.value = !1;
    }
    function z(Le) {
      (Le == null || Le === "" && !e.multiple && !O.value) && (p.value = []);
    }
    const ke = ot(!1);
    function Me(Le) {
      let ce = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!(!Le || Le.props.disabled))
        if (e.multiple) {
          const ne = p.value.findIndex((le) => (e.valueComparator || fr)(le.value, Le.value)), G = ce ?? !~ne;
          if (~ne) {
            const le = G ? [...p.value, Le] : [...p.value];
            le.splice(ne, 1), p.value = le;
          } else G && (p.value = [...p.value, Le]);
          e.clearOnSelect && (b.value = "");
        } else {
          const ne = ce !== !1;
          p.value = ne ? [Le] : [], b.value = ne && !O.value ? Le.title : "", Vt(() => {
            B.value = !1, o.value = !0;
          });
        }
    }
    return nt(i, (Le, ce) => {
      Le !== ce && (Le ? (ke.value = !0, b.value = e.multiple || O.value ? "" : String(p.value.at(-1)?.props.title ?? ""), o.value = !0, Vt(() => ke.value = !1)) : (!e.multiple && b.value == null && (p.value = []), B.value = !1, (e.multiple || O.value) && (b.value = ""), u.value = -1));
    }), nt(b, (Le) => {
      !i.value || ke.value || (Le && (B.value = !0), o.value = !Le);
    }), nt(B, () => {
      if (!e.hideSelected && B.value && p.value.length) {
        const Le = D.value.findIndex((ce) => p.value.some((ne) => ce.value === ne.value));
        vn && window.requestAnimationFrame(() => {
          Le >= 0 && d.value?.scrollToIndex(Le);
        });
      }
    }), nt(() => e.items, (Le, ce) => {
      B.value || i.value && !ce.length && Le.length && (B.value = !0);
    }), Ge(() => {
      const Le = !!(!e.hideNoData || D.value.length || n["prepend-item"] || n["append-item"] || n["no-data"]), ce = p.value.length > 0, ne = os.filterProps(e);
      return _(os, He({
        ref: r
      }, ne, {
        modelValue: b.value,
        "onUpdate:modelValue": [(G) => b.value = G, z],
        focused: i.value,
        "onUpdate:focused": (G) => i.value = G,
        validationValue: p.externalValue,
        counterValue: y.value,
        dirty: ce,
        onChange: se,
        class: ["v-autocomplete", `v-autocomplete--${e.multiple ? "multiple" : "single"}`, {
          "v-autocomplete--active-menu": B.value,
          "v-autocomplete--chips": !!e.chips,
          "v-autocomplete--selection-slot": !!O.value,
          "v-autocomplete--selecting-index": u.value > -1
        }, e.class],
        style: e.style,
        readonly: S.isReadonly.value,
        placeholder: ce ? void 0 : e.placeholder,
        "onClick:clear": te,
        "onMousedown:control": de,
        onKeydown: K
      }), {
        ...n,
        default: () => I(Qe, null, [_(Ru, He({
          ref: s,
          modelValue: B.value,
          "onUpdate:modelValue": (G) => B.value = G,
          activator: "parent",
          contentClass: "v-autocomplete__content",
          disabled: V.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: X,
          onAfterLeave: he
        }, e.menuProps), {
          default: () => [Le && _(Cp, He({
            ref: H,
            selected: T.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (G) => G.preventDefault(),
            onKeydown: F,
            onFocusin: ve,
            onFocusout: pe,
            tabindex: "-1",
            "aria-live": "polite",
            color: e.itemColor ?? e.color
          }, j, e.listProps), {
            default: () => [n["prepend-item"]?.(), !D.value.length && !e.hideNoData && (n["no-data"]?.() ?? _(is, {
              key: "no-data",
              title: a(e.noDataText)
            }, null)), _(xp, {
              ref: d,
              renderless: !0,
              items: D.value,
              itemKey: "value"
            }, {
              default: (G) => {
                let {
                  item: le,
                  index: Y,
                  itemRef: Ce
                } = G;
                const Te = He(le.props, {
                  ref: Ce,
                  key: le.value,
                  active: A.value && Y === 0 ? !0 : void 0,
                  onClick: () => Me(le, null)
                });
                return n.item?.({
                  item: le,
                  index: Y,
                  props: Te
                }) ?? _(is, He(Te, {
                  role: "option"
                }), {
                  prepend: (ie) => {
                    let {
                      isSelected: ge
                    } = ie;
                    return I(Qe, null, [e.multiple && !e.hideSelected ? _(rs, {
                      key: le.value,
                      modelValue: ge,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, le.props.prependAvatar && _(Ei, {
                      image: le.props.prependAvatar
                    }, null), le.props.prependIcon && _(pn, {
                      icon: le.props.prependIcon
                    }, null)]);
                  },
                  title: () => o.value ? le.title : kP("v-autocomplete", le.title, C(le)?.title)
                });
              }
            }), n["append-item"]?.()]
          })]
        }), p.value.map((G, le) => {
          function Y(ge) {
            ge.stopPropagation(), ge.preventDefault(), Me(G, !1);
          }
          const Ce = {
            "onClick:close": Y,
            onKeydown(ge) {
              ge.key !== "Enter" && ge.key !== " " || (ge.preventDefault(), ge.stopPropagation(), Y(ge));
            },
            onMousedown(ge) {
              ge.preventDefault(), ge.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, Te = P.value ? !!n.chip : !!n.selection, ie = Te ? op(P.value ? n.chip({
            item: G,
            index: le,
            props: Ce
          }) : n.selection({
            item: G,
            index: le
          })) : void 0;
          if (!(Te && !ie))
            return I("div", {
              key: G.value,
              class: Ie(["v-autocomplete__selection", le === u.value && ["v-autocomplete__selection--selected", v.value]]),
              style: Xe(le === u.value ? w.value : {})
            }, [P.value ? n.chip ? _(Wt, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: G.title
                }
              }
            }, {
              default: () => [ie]
            }) : _(ed, He({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: G.title,
              disabled: G.props.disabled
            }, Ce), null) : ie ?? I("span", {
              class: "v-autocomplete__selection-text"
            }, [G.title, e.multiple && le < p.value.length - 1 && I("span", {
              class: "v-autocomplete__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var G = arguments.length, le = new Array(G), Y = 0; Y < G; Y++)
            le[Y] = arguments[Y];
          return I(Qe, null, [n["append-inner"]?.(...le), e.menuIcon ? _(pn, {
            class: "v-autocomplete__menu-icon",
            color: r.value?.fieldIconColor,
            icon: e.menuIcon,
            onMousedown: Z,
            onClick: ST,
            "aria-label": a(N.value),
            title: a(N.value),
            tabindex: "-1"
          }, null) : void 0]);
        }
      });
    }), pi({
      isFocused: i,
      isPristine: o,
      menu: B,
      search: b,
      filteredItems: E,
      select: Me
    }, r);
  }
}), kW = Be({
  bordered: Boolean,
  color: String,
  content: [Number, String],
  dot: Boolean,
  floating: Boolean,
  icon: At,
  inline: Boolean,
  label: {
    type: String,
    default: "$vuetify.badge"
  },
  max: [Number, String],
  modelValue: {
    type: Boolean,
    default: !0
  },
  offsetX: [Number, String],
  offsetY: [Number, String],
  textColor: String,
  ...vt(),
  ...us({
    location: "top end"
  }),
  ...Hn(),
  ...qt(),
  ...sn(),
  ...Gi({
    transition: "scale-rotate-transition"
  })
}, "VBadge"), SW = We()({
  name: "VBadge",
  inheritAttrs: !1,
  props: kW(),
  setup(e, t) {
    const {
      backgroundColorClasses: n,
      backgroundColorStyles: a
    } = An(() => e.color), {
      roundedClasses: r
    } = fa(e), {
      t: i
    } = ua(), {
      textColorClasses: o,
      textColorStyles: l
    } = mr(() => e.textColor), {
      themeClasses: s
    } = Vw(), {
      locationStyles: d
    } = gc(e, !0, (u) => (e.floating ? e.dot ? 2 : 4 : e.dot ? 8 : 12) + (["top", "bottom"].includes(u) ? Number(e.offsetY ?? 0) : ["left", "right"].includes(u) ? Number(e.offsetX ?? 0) : 0));
    return Ge(() => {
      const u = Number(e.content), f = !e.max || isNaN(u) ? e.content : u <= Number(e.max) ? u : `${e.max}+`, [h, g] = Fy(t.attrs, ["aria-atomic", "aria-label", "aria-live", "role", "title"]);
      return _(e.tag, He({
        class: ["v-badge", {
          "v-badge--bordered": e.bordered,
          "v-badge--dot": e.dot,
          "v-badge--floating": e.floating,
          "v-badge--inline": e.inline
        }, e.class]
      }, g, {
        style: e.style
      }), {
        default: () => [I("div", {
          class: "v-badge__wrapper"
        }, [t.slots.default?.(), _(Sr, {
          transition: e.transition
        }, {
          default: () => [an(I("span", He({
            class: ["v-badge__badge", s.value, n.value, r.value, o.value],
            style: [a.value, l.value, e.inline ? {} : d.value],
            "aria-atomic": "true",
            "aria-label": i(e.label, u),
            "aria-live": "polite",
            role: "status"
          }, h), [e.dot ? void 0 : t.slots.badge ? t.slots.badge?.() : e.icon ? _(pn, {
            icon: e.icon
          }, null) : f]), [[_a, e.modelValue]])]
        })])]
      });
    }), {};
  }
}), CW = Be({
  color: String,
  density: String,
  ...vt()
}, "VBannerActions"), SP = We()({
  name: "VBannerActions",
  props: CW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return ca({
      VBtn: {
        color: e.color,
        density: e.density,
        slim: !0,
        variant: "text"
      }
    }), Ge(() => I("div", {
      class: Ie(["v-banner-actions", e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), CP = xo("v-banner-text"), AW = Be({
  avatar: String,
  bgColor: String,
  color: String,
  icon: At,
  lines: String,
  stacked: Boolean,
  sticky: Boolean,
  text: String,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...cc({
    mobile: null
  }),
  ...za(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...qt(),
  ...sn()
}, "VBanner"), xW = We()({
  name: "VBanner",
  props: AW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.bgColor), {
      borderClasses: i
    } = _i(e), {
      densityClasses: o
    } = Ar(e), {
      displayClasses: l,
      mobile: s
    } = mi(e), {
      dimensionStyles: d
    } = Fa(e), {
      elevationClasses: u
    } = ir(e), {
      locationStyles: f
    } = gc(e), {
      positionClasses: h
    } = Xu(e), {
      roundedClasses: g
    } = fa(e), {
      themeClasses: v
    } = yn(e), w = we(() => e.color), b = we(() => e.density);
    ca({
      VBannerActions: {
        color: w,
        density: b
      }
    }), Ge(() => {
      const p = !!(e.text || n.text), y = !!(e.avatar || e.icon), S = !!(y || n.prepend);
      return _(e.tag, {
        class: Ie(["v-banner", {
          "v-banner--stacked": e.stacked || s.value,
          "v-banner--sticky": e.sticky,
          [`v-banner--${e.lines}-line`]: !!e.lines
        }, v.value, a.value, i.value, o.value, l.value, u.value, h.value, g.value, e.class]),
        style: Xe([r.value, d.value, f.value, e.style]),
        role: "banner"
      }, {
        default: () => [S && I("div", {
          key: "prepend",
          class: "v-banner__prepend"
        }, [n.prepend ? _(Wt, {
          key: "prepend-defaults",
          disabled: !y,
          defaults: {
            VAvatar: {
              color: w.value,
              density: b.value,
              icon: e.icon,
              image: e.avatar
            }
          }
        }, n.prepend) : _(Ei, {
          key: "prepend-avatar",
          color: w.value,
          density: b.value,
          icon: e.icon,
          image: e.avatar
        }, null)]), I("div", {
          class: "v-banner__content"
        }, [p && _(CP, {
          key: "text"
        }, {
          default: () => [n.text?.() ?? e.text]
        }), n.default?.()]), n.actions && _(SP, {
          key: "actions"
        }, n.actions)]
      });
    });
  }
}), TW = Be({
  baseColor: String,
  bgColor: String,
  color: String,
  grow: Boolean,
  mode: {
    type: String,
    validator: (e) => !e || ["horizontal", "shift"].includes(e)
  },
  height: {
    type: [Number, String],
    default: 56
  },
  active: {
    type: Boolean,
    default: !0
  },
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...Hn(),
  ...uc({
    name: "bottom-navigation"
  }),
  ...qt({
    tag: "header"
  }),
  ..._c({
    selectedClass: "v-btn--selected"
  }),
  ...sn()
}, "VBottomNavigation"), IW = We()({
  name: "VBottomNavigation",
  props: TW(),
  emits: {
    "update:active": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = Vw(), {
      borderClasses: r
    } = _i(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.bgColor), {
      densityClasses: l
    } = Ar(e), {
      elevationClasses: s
    } = ir(e), {
      roundedClasses: d
    } = fa(e), {
      ssrBootStyles: u
    } = mc(), f = W(() => Number(e.height) - (e.density === "comfortable" ? 8 : 0) - (e.density === "compact" ? 16 : 0)), h = kt(e, "active", e.active), {
      layoutItemStyles: g
    } = dc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: we(() => "bottom"),
      layoutSize: we(() => h.value ? f.value : 0),
      elementSize: f,
      active: h,
      absolute: we(() => e.absolute)
    });
    return ol(e, C0), ca({
      VBtn: {
        baseColor: we(() => e.baseColor),
        color: we(() => e.color),
        density: we(() => e.density),
        stacked: we(() => e.mode !== "horizontal"),
        variant: "text"
      }
    }, {
      scoped: !0
    }), Ge(() => _(e.tag, {
      class: Ie(["v-bottom-navigation", {
        "v-bottom-navigation--active": h.value,
        "v-bottom-navigation--grow": e.grow,
        "v-bottom-navigation--shift": e.mode === "shift"
      }, a.value, i.value, r.value, l.value, s.value, d.value, e.class]),
      style: Xe([o.value, g.value, {
        height: ht(f.value)
      }, u.value, e.style])
    }, {
      default: () => [n.default && I("div", {
        class: "v-bottom-navigation__content"
      }, [n.default()])]
    })), {};
  }
}), AP = Be({
  fullscreen: Boolean,
  retainFocus: {
    type: Boolean,
    default: !0
  },
  scrollable: Boolean,
  ...nm({
    origin: "center center",
    scrollStrategy: "block",
    transition: {
      component: gp
    },
    zIndex: 2400
  })
}, "VDialog"), Ob = We()({
  name: "VDialog",
  props: AP(),
  emits: {
    "update:modelValue": (e) => !0,
    afterEnter: () => !0,
    afterLeave: () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), {
      scopeId: i
    } = yc(), o = Se();
    function l(u) {
      const f = u.relatedTarget, h = u.target;
      if (f !== h && o.value?.contentEl && // We're the topmost dialog
      o.value?.globalTop && // It isn't the document or the dialog body
      ![document, o.value.contentEl].includes(h) && // It isn't inside the dialog body
      !o.value.contentEl.contains(h)) {
        const g = hf(o.value.contentEl);
        if (!g.length) return;
        const v = g[0], w = g[g.length - 1];
        f === v ? w.focus() : v.focus();
      }
    }
    Ga(() => {
      document.removeEventListener("focusin", l);
    }), vn && nt(() => r.value && e.retainFocus, (u) => {
      u ? document.addEventListener("focusin", l) : document.removeEventListener("focusin", l);
    }, {
      immediate: !0
    });
    function s() {
      n("afterEnter"), (e.scrim || e.retainFocus) && o.value?.contentEl && !o.value.contentEl.contains(document.activeElement) && o.value.contentEl.focus({
        preventScroll: !0
      });
    }
    function d() {
      n("afterLeave");
    }
    return nt(r, async (u) => {
      u || (await Vt(), o.value.activatorEl?.focus({
        preventScroll: !0
      }));
    }), Ge(() => {
      const u = ko.filterProps(e), f = He({
        "aria-haspopup": "dialog"
      }, e.activatorProps), h = He({
        tabindex: -1
      }, e.contentProps);
      return _(ko, He({
        ref: o,
        class: ["v-dialog", {
          "v-dialog--fullscreen": e.fullscreen,
          "v-dialog--scrollable": e.scrollable
        }, e.class],
        style: e.style
      }, u, {
        modelValue: r.value,
        "onUpdate:modelValue": (g) => r.value = g,
        "aria-modal": "true",
        activatorProps: f,
        contentProps: h,
        height: e.fullscreen ? void 0 : e.height,
        width: e.fullscreen ? void 0 : e.width,
        maxHeight: e.fullscreen ? void 0 : e.maxHeight,
        maxWidth: e.fullscreen ? void 0 : e.maxWidth,
        role: "dialog",
        onAfterEnter: s,
        onAfterLeave: d
      }, i), {
        activator: a.activator,
        default: function() {
          for (var g = arguments.length, v = new Array(g), w = 0; w < g; w++)
            v[w] = arguments[w];
          return _(Wt, {
            root: "VDialog"
          }, {
            default: () => [a.default?.(...v)]
          });
        }
      });
    }), pi({}, o);
  }
}), EW = Be({
  inset: Boolean,
  ...AP({
    transition: "bottom-sheet-transition"
  })
}, "VBottomSheet"), PW = We()({
  name: "VBottomSheet",
  props: EW(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue");
    return Ge(() => {
      const r = Ob.filterProps(e);
      return _(Ob, He(r, {
        contentClass: ["v-bottom-sheet__content", e.contentClass],
        modelValue: a.value,
        "onUpdate:modelValue": (i) => a.value = i,
        class: ["v-bottom-sheet", {
          "v-bottom-sheet--inset": e.inset
        }, e.class],
        style: e.style
      }), n);
    }), {};
  }
}), OW = Be({
  divider: [Number, String],
  ...vt()
}, "VBreadcrumbsDivider"), xP = We()({
  name: "VBreadcrumbsDivider",
  props: OW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => I("li", {
      "aria-hidden": "true",
      class: Ie(["v-breadcrumbs-divider", e.class]),
      style: Xe(e.style)
    }, [n?.default?.() ?? e.divider])), {};
  }
}), DW = Be({
  active: Boolean,
  activeClass: String,
  activeColor: String,
  color: String,
  disabled: Boolean,
  title: String,
  ...vt(),
  ...Zf(),
  ...qt({
    tag: "li"
  })
}, "VBreadcrumbsItem"), TP = We()({
  name: "VBreadcrumbsItem",
  props: DW(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    const r = Xf(e, a), i = W(() => e.active || r.isActive?.value), {
      textColorClasses: o,
      textColorStyles: l
    } = mr(() => i.value ? e.activeColor : e.color);
    return Ge(() => _(e.tag, {
      class: Ie(["v-breadcrumbs-item", {
        "v-breadcrumbs-item--active": i.value,
        "v-breadcrumbs-item--disabled": e.disabled,
        [`${e.activeClass}`]: i.value && e.activeClass
      }, o.value, e.class]),
      style: Xe([l.value, e.style]),
      "aria-current": i.value ? "page" : void 0
    }, {
      default: () => [r.isLink.value ? I("a", He({
        class: "v-breadcrumbs-item--link",
        onClick: r.navigate
      }, r.linkProps), [n.default?.() ?? e.title]) : n.default?.() ?? e.title]
    })), {};
  }
}), BW = Be({
  activeClass: String,
  activeColor: String,
  bgColor: String,
  color: String,
  disabled: Boolean,
  divider: {
    type: String,
    default: "/"
  },
  icon: At,
  items: {
    type: Array,
    default: () => []
  },
  ...vt(),
  ...Qa(),
  ...Hn(),
  ...qt({
    tag: "ul"
  })
}, "VBreadcrumbs"), VW = We()({
  name: "VBreadcrumbs",
  props: BW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.bgColor), {
      densityClasses: i
    } = Ar(e), {
      roundedClasses: o
    } = fa(e);
    ca({
      VBreadcrumbsDivider: {
        divider: we(() => e.divider)
      },
      VBreadcrumbsItem: {
        activeClass: we(() => e.activeClass),
        activeColor: we(() => e.activeColor),
        color: we(() => e.color),
        disabled: we(() => e.disabled)
      }
    });
    const l = W(() => e.items.map((s) => typeof s == "string" ? {
      item: {
        title: s
      },
      raw: s
    } : {
      item: s,
      raw: s
    }));
    return Ge(() => {
      const s = !!(n.prepend || e.icon);
      return _(e.tag, {
        class: Ie(["v-breadcrumbs", a.value, i.value, o.value, e.class]),
        style: Xe([r.value, e.style])
      }, {
        default: () => [s && I("li", {
          key: "prepend",
          class: "v-breadcrumbs__prepend"
        }, [n.prepend ? _(Wt, {
          key: "prepend-defaults",
          disabled: !e.icon,
          defaults: {
            VIcon: {
              icon: e.icon,
              start: !0
            }
          }
        }, n.prepend) : _(pn, {
          key: "prepend-icon",
          start: !0,
          icon: e.icon
        }, null)]), l.value.map((d, u, f) => {
          let {
            item: h,
            raw: g
          } = d;
          return I(Qe, null, [n.item?.({
            item: h,
            index: u
          }) ?? _(TP, He({
            key: u,
            disabled: u >= f.length - 1
          }, typeof h == "string" ? {
            title: h
          } : h), {
            default: n.title ? () => n.title?.({
              item: h,
              index: u
            }) : void 0
          }), u < f.length - 1 && _(xP, null, {
            default: n.divider ? () => n.divider?.({
              item: g,
              index: u
            }) : void 0
          })]);
        }), n.default?.()]
      });
    }), {};
  }
}), IP = We()({
  name: "VCardActions",
  props: vt(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return ca({
      VBtn: {
        slim: !0,
        variant: "text"
      }
    }), Ge(() => I("div", {
      class: Ie(["v-card-actions", e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), MW = Be({
  opacity: [Number, String],
  ...vt(),
  ...qt()
}, "VCardSubtitle"), EP = We()({
  name: "VCardSubtitle",
  props: MW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(e.tag, {
      class: Ie(["v-card-subtitle", e.class]),
      style: Xe([{
        "--v-card-subtitle-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), PP = xo("v-card-title"), RW = Be({
  appendAvatar: String,
  appendIcon: At,
  prependAvatar: String,
  prependIcon: At,
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...vt(),
  ...Qa()
}, "VCardItem"), OP = We()({
  name: "VCardItem",
  props: RW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = !!(e.prependAvatar || e.prependIcon), r = !!(a || n.prepend), i = !!(e.appendAvatar || e.appendIcon), o = !!(i || n.append), l = !!(e.title != null || n.title), s = !!(e.subtitle != null || n.subtitle);
      return I("div", {
        class: Ie(["v-card-item", e.class]),
        style: Xe(e.style)
      }, [r && I("div", {
        key: "prepend",
        class: "v-card-item__prepend"
      }, [n.prepend ? _(Wt, {
        key: "prepend-defaults",
        disabled: !a,
        defaults: {
          VAvatar: {
            density: e.density,
            image: e.prependAvatar
          },
          VIcon: {
            density: e.density,
            icon: e.prependIcon
          }
        }
      }, n.prepend) : I(Qe, null, [e.prependAvatar && _(Ei, {
        key: "prepend-avatar",
        density: e.density,
        image: e.prependAvatar
      }, null), e.prependIcon && _(pn, {
        key: "prepend-icon",
        density: e.density,
        icon: e.prependIcon
      }, null)])]), I("div", {
        class: "v-card-item__content"
      }, [l && _(PP, {
        key: "title"
      }, {
        default: () => [n.title?.() ?? q(e.title)]
      }), s && _(EP, {
        key: "subtitle"
      }, {
        default: () => [n.subtitle?.() ?? q(e.subtitle)]
      }), n.default?.()]), o && I("div", {
        key: "append",
        class: "v-card-item__append"
      }, [n.append ? _(Wt, {
        key: "append-defaults",
        disabled: !i,
        defaults: {
          VAvatar: {
            density: e.density,
            image: e.appendAvatar
          },
          VIcon: {
            density: e.density,
            icon: e.appendIcon
          }
        }
      }, n.append) : I(Qe, null, [e.appendIcon && _(pn, {
        key: "append-icon",
        density: e.density,
        icon: e.appendIcon
      }, null), e.appendAvatar && _(Ei, {
        key: "append-avatar",
        density: e.density,
        image: e.appendAvatar
      }, null)])])]);
    }), {};
  }
}), LW = Be({
  opacity: [Number, String],
  ...vt(),
  ...qt()
}, "VCardText"), DP = We()({
  name: "VCardText",
  props: LW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => _(e.tag, {
      class: Ie(["v-card-text", e.class]),
      style: Xe([{
        "--v-card-text-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), FW = Be({
  appendAvatar: String,
  appendIcon: At,
  disabled: Boolean,
  flat: Boolean,
  hover: Boolean,
  image: String,
  link: {
    type: Boolean,
    default: void 0
  },
  prependAvatar: String,
  prependIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...wp(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...Zf(),
  ...qt(),
  ...sn(),
  ...Pi({
    variant: "elevated"
  })
}, "VCard"), NW = We()({
  name: "VCard",
  directives: {
    vRipple: Cr
  },
  props: FW(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      borderClasses: i
    } = _i(e), {
      colorClasses: o,
      colorStyles: l,
      variantClasses: s
    } = hc(e), {
      densityClasses: d
    } = Ar(e), {
      dimensionStyles: u
    } = Fa(e), {
      elevationClasses: f
    } = ir(e), {
      loaderClasses: h
    } = Qf(e), {
      locationStyles: g
    } = gc(e), {
      positionClasses: v
    } = Xu(e), {
      roundedClasses: w
    } = fa(e), b = Xf(e, n);
    return Ge(() => {
      const p = e.link !== !1 && b.isLink.value, y = !e.disabled && e.link !== !1 && (e.link || b.isClickable.value), S = p ? "a" : e.tag, E = !!(a.title || e.title != null), C = !!(a.subtitle || e.subtitle != null), D = E || C, P = !!(a.append || e.appendAvatar || e.appendIcon), O = !!(a.prepend || e.prependAvatar || e.prependIcon), T = !!(a.image || e.image), A = D || O || P, V = !!(a.text || e.text != null);
      return an(_(S, He({
        class: ["v-card", {
          "v-card--disabled": e.disabled,
          "v-card--flat": e.flat,
          "v-card--hover": e.hover && !(e.disabled || e.flat),
          "v-card--link": y
        }, r.value, i.value, o.value, d.value, f.value, h.value, v.value, w.value, s.value, e.class],
        style: [l.value, u.value, g.value, e.style],
        onClick: y && b.navigate,
        tabindex: e.disabled ? -1 : void 0
      }, b.linkProps), {
        default: () => [T && I("div", {
          key: "image",
          class: "v-card__image"
        }, [a.image ? _(Wt, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              cover: !0,
              src: e.image
            }
          }
        }, a.image) : _(as, {
          key: "image-img",
          cover: !0,
          src: e.image
        }, null)]), _(Jf, {
          name: "v-card",
          active: !!e.loading,
          color: typeof e.loading == "boolean" ? void 0 : e.loading
        }, {
          default: a.loader
        }), A && _(OP, {
          key: "item",
          prependAvatar: e.prependAvatar,
          prependIcon: e.prependIcon,
          title: e.title,
          subtitle: e.subtitle,
          appendAvatar: e.appendAvatar,
          appendIcon: e.appendIcon
        }, {
          default: a.item,
          prepend: a.prepend,
          title: a.title,
          subtitle: a.subtitle,
          append: a.append
        }), V && _(DP, {
          key: "text"
        }, {
          default: () => [a.text?.() ?? e.text]
        }), a.default?.(), a.actions && _(IP, null, {
          default: a.actions
        }), il(y, "v-card")]
      }), [[Cr, y && e.ripple]]);
    }), {};
  }
}), UW = (e) => {
  const {
    touchstartX: t,
    touchendX: n,
    touchstartY: a,
    touchendY: r
  } = e, i = 0.5, o = 16;
  e.offsetX = n - t, e.offsetY = r - a, Math.abs(e.offsetY) < i * Math.abs(e.offsetX) && (e.left && n < t - o && e.left(e), e.right && n > t + o && e.right(e)), Math.abs(e.offsetX) < i * Math.abs(e.offsetY) && (e.up && r < a - o && e.up(e), e.down && r > a + o && e.down(e));
};
function $W(e, t) {
  const n = e.changedTouches[0];
  t.touchstartX = n.clientX, t.touchstartY = n.clientY, t.start?.({
    originalEvent: e,
    ...t
  });
}
function qW(e, t) {
  const n = e.changedTouches[0];
  t.touchendX = n.clientX, t.touchendY = n.clientY, t.end?.({
    originalEvent: e,
    ...t
  }), UW(t);
}
function HW(e, t) {
  const n = e.changedTouches[0];
  t.touchmoveX = n.clientX, t.touchmoveY = n.clientY, t.move?.({
    originalEvent: e,
    ...t
  });
}
function zW() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const t = {
    touchstartX: 0,
    touchstartY: 0,
    touchendX: 0,
    touchendY: 0,
    touchmoveX: 0,
    touchmoveY: 0,
    offsetX: 0,
    offsetY: 0,
    left: e.left,
    right: e.right,
    up: e.up,
    down: e.down,
    start: e.start,
    move: e.move,
    end: e.end
  };
  return {
    touchstart: (n) => $W(n, t),
    touchend: (n) => qW(n, t),
    touchmove: (n) => HW(n, t)
  };
}
function WW(e, t) {
  const n = t.value, a = n?.parent ? e.parentElement : e, r = n?.options ?? {
    passive: !0
  }, i = t.instance?.$.uid;
  if (!a || !i) return;
  const o = zW(t.value);
  a._touchHandlers = a._touchHandlers ?? /* @__PURE__ */ Object.create(null), a._touchHandlers[i] = o, vT(o).forEach((l) => {
    a.addEventListener(l, o[l], r);
  });
}
function jW(e, t) {
  const n = t.value?.parent ? e.parentElement : e, a = t.instance?.$.uid;
  if (!n?._touchHandlers || !a) return;
  const r = n._touchHandlers[a];
  vT(r).forEach((i) => {
    n.removeEventListener(i, r[i]);
  }), delete n._touchHandlers[a];
}
const $_ = {
  mounted: WW,
  unmounted: jW
}, BP = Symbol.for("vuetify:v-window"), VP = Symbol.for("vuetify:v-window-group"), Tp = Be({
  continuous: Boolean,
  nextIcon: {
    type: [Boolean, String, Function, Object],
    default: "$next"
  },
  prevIcon: {
    type: [Boolean, String, Function, Object],
    default: "$prev"
  },
  reverse: Boolean,
  showArrows: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || e === "hover"
  },
  touch: {
    type: [Object, Boolean],
    default: void 0
  },
  direction: {
    type: String,
    default: "horizontal"
  },
  modelValue: null,
  disabled: Boolean,
  selectedClass: {
    type: String,
    default: "v-window-item--active"
  },
  // TODO: mandatory should probably not be exposed but do this for now
  mandatory: {
    type: [Boolean, String],
    default: "force"
  },
  ...vt(),
  ...qt(),
  ...sn()
}, "VWindow"), ac = We()({
  name: "VWindow",
  directives: {
    vTouch: $_
  },
  props: Tp(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      isRtl: r
    } = Ra(), {
      t: i
    } = ua(), o = ol(e, VP), l = Se(), s = W(() => r.value ? !e.reverse : e.reverse), d = ot(!1), u = W(() => {
      const E = e.direction === "vertical" ? "y" : "x", D = (s.value ? !d.value : d.value) ? "-reverse" : "";
      return `v-window-${E}${D}-transition`;
    }), f = ot(0), h = Se(void 0), g = W(() => o.items.value.findIndex((E) => o.selected.value.includes(E.id)));
    nt(g, (E, C) => {
      const D = o.items.value.length, P = D - 1;
      D <= 2 ? d.value = E < C : E === P && C === 0 ? d.value = !0 : E === 0 && C === P ? d.value = !1 : d.value = E < C;
    }), Nn(BP, {
      transition: u,
      isReversed: d,
      transitionCount: f,
      transitionHeight: h,
      rootRef: l
    });
    const v = we(() => e.continuous || g.value !== 0), w = we(() => e.continuous || g.value !== o.items.value.length - 1);
    function b() {
      v.value && o.prev();
    }
    function p() {
      w.value && o.next();
    }
    const y = W(() => {
      const E = [], C = {
        icon: r.value ? e.nextIcon : e.prevIcon,
        class: `v-window__${s.value ? "right" : "left"}`,
        onClick: o.prev,
        "aria-label": i("$vuetify.carousel.prev")
      };
      E.push(v.value ? n.prev ? n.prev({
        props: C
      }) : _(un, C, null) : I("div", null, null));
      const D = {
        icon: r.value ? e.prevIcon : e.nextIcon,
        class: `v-window__${s.value ? "left" : "right"}`,
        onClick: o.next,
        "aria-label": i("$vuetify.carousel.next")
      };
      return E.push(w.value ? n.next ? n.next({
        props: D
      }) : _(un, D, null) : I("div", null, null)), E;
    }), S = W(() => e.touch === !1 ? e.touch : {
      ...{
        left: () => {
          s.value ? b() : p();
        },
        right: () => {
          s.value ? p() : b();
        },
        start: (C) => {
          let {
            originalEvent: D
          } = C;
          D.stopPropagation();
        }
      },
      ...e.touch === !0 ? {} : e.touch
    });
    return Ge(() => an(_(e.tag, {
      ref: l,
      class: Ie(["v-window", {
        "v-window--show-arrows-on-hover": e.showArrows === "hover"
      }, a.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [I("div", {
        class: "v-window__container",
        style: {
          height: h.value
        }
      }, [n.default?.({
        group: o
      }), e.showArrows !== !1 && I("div", {
        class: "v-window__controls"
      }, [y.value])]), n.additional?.({
        group: o
      })]
    }), [[$_, S.value]])), {
      group: o
    };
  }
}), KW = Be({
  color: String,
  cycle: Boolean,
  delimiterIcon: {
    type: At,
    default: "$delimiter"
  },
  height: {
    type: [Number, String],
    default: 500
  },
  hideDelimiters: Boolean,
  hideDelimiterBackground: Boolean,
  interval: {
    type: [Number, String],
    default: 6e3,
    validator: (e) => Number(e) > 0
  },
  progress: [Boolean, String],
  verticalDelimiters: [Boolean, String],
  ...Tp({
    continuous: !0,
    mandatory: "force",
    showArrows: !0
  })
}, "VCarousel"), YW = We()({
  name: "VCarousel",
  props: KW(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      t: r
    } = ua(), i = Se();
    let o = -1;
    nt(a, s), nt(() => e.interval, s), nt(() => e.cycle, (d) => {
      d ? s() : window.clearTimeout(o);
    }), on(l);
    function l() {
      !e.cycle || !i.value || (o = window.setTimeout(i.value.group.next, Number(e.interval) > 0 ? Number(e.interval) : 6e3));
    }
    function s() {
      window.clearTimeout(o), window.requestAnimationFrame(l);
    }
    return Ge(() => {
      const d = ac.filterProps(e);
      return _(ac, He({
        ref: i
      }, d, {
        modelValue: a.value,
        "onUpdate:modelValue": (u) => a.value = u,
        class: ["v-carousel", {
          "v-carousel--hide-delimiter-background": e.hideDelimiterBackground,
          "v-carousel--vertical-delimiters": e.verticalDelimiters
        }, e.class],
        style: [{
          height: ht(e.height)
        }, e.style]
      }), {
        default: n.default,
        additional: (u) => {
          let {
            group: f
          } = u;
          return I(Qe, null, [!e.hideDelimiters && I("div", {
            class: "v-carousel__controls",
            style: {
              left: e.verticalDelimiters === "left" && e.verticalDelimiters ? 0 : "auto",
              right: e.verticalDelimiters === "right" ? 0 : "auto"
            }
          }, [f.items.value.length > 0 && _(Wt, {
            defaults: {
              VBtn: {
                color: e.color,
                icon: e.delimiterIcon,
                size: "x-small",
                variant: "text"
              }
            },
            scoped: !0
          }, {
            default: () => [f.items.value.map((h, g) => {
              const v = {
                id: `carousel-item-${h.id}`,
                "aria-label": r("$vuetify.carousel.ariaLabel.delimiter", g + 1, f.items.value.length),
                class: ["v-carousel__controls__item", f.isSelected(h.id) && "v-btn--active"],
                onClick: () => f.select(h.id, !0)
              };
              return n.item ? n.item({
                props: v,
                item: h
              }) : _(un, He(h, v), null);
            })]
          })]), e.progress && _(bp, {
            class: "v-carousel__progress",
            color: typeof e.progress == "string" ? e.progress : void 0,
            modelValue: (f.getItemIndex(a.value) + 1) / f.items.value.length * 100
          }, null)]);
        },
        prev: n.prev,
        next: n.next
      });
    }), {};
  }
}), Ip = Be({
  reverseTransition: {
    type: [Boolean, String],
    default: void 0
  },
  transition: {
    type: [Boolean, String],
    default: void 0
  },
  ...vt(),
  ...pc(),
  ...D0()
}, "VWindowItem"), rc = We()({
  name: "VWindowItem",
  directives: {
    vTouch: $_
  },
  props: Ip(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(BP), r = vc(e, VP), {
      isBooted: i
    } = mc();
    if (!a || !r) throw new Error("[Vuetify] VWindowItem must be used inside VWindow");
    const o = ot(!1), l = W(() => i.value && (a.isReversed.value ? e.reverseTransition !== !1 : e.transition !== !1));
    function s() {
      !o.value || !a || (o.value = !1, a.transitionCount.value > 0 && (a.transitionCount.value -= 1, a.transitionCount.value === 0 && (a.transitionHeight.value = void 0)));
    }
    function d() {
      o.value || !a || (o.value = !0, a.transitionCount.value === 0 && (a.transitionHeight.value = ht(a.rootRef.value?.clientHeight)), a.transitionCount.value += 1);
    }
    function u() {
      s();
    }
    function f(v) {
      o.value && Vt(() => {
        !l.value || !o.value || !a || (a.transitionHeight.value = ht(v.clientHeight));
      });
    }
    const h = W(() => {
      const v = a.isReversed.value ? e.reverseTransition : e.transition;
      return l.value ? {
        name: typeof v != "string" ? a.transition.value : v,
        onBeforeEnter: d,
        onAfterEnter: s,
        onEnterCancelled: u,
        onBeforeLeave: d,
        onAfterLeave: s,
        onLeaveCancelled: u,
        onEnter: f
      } : !1;
    }), {
      hasContent: g
    } = B0(e, r.isSelected);
    return Ge(() => _(Sr, {
      transition: h.value,
      disabled: !i.value
    }, {
      default: () => [an(I("div", {
        class: Ie(["v-window-item", r.selectedClass.value, e.class]),
        style: Xe(e.style)
      }, [g.value && n.default?.()]), [[_a, r.isSelected.value]])]
    })), {
      groupItem: r
    };
  }
}), GW = Be({
  ...SE(),
  ...Ip()
}, "VCarouselItem"), QW = We()({
  name: "VCarouselItem",
  inheritAttrs: !1,
  props: GW(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    Ge(() => {
      const r = as.filterProps(e), i = rc.filterProps(e);
      return _(rc, He({
        class: ["v-carousel-item", e.class]
      }, i), {
        default: () => [_(as, He(a, r), n)]
      });
    });
  }
}), JW = xo("v-code", "code"), XW = Be({
  color: {
    type: Object
  },
  disabled: Boolean,
  dotSize: {
    type: [Number, String],
    default: 10
  },
  height: {
    type: [Number, String],
    default: 150
  },
  width: {
    type: [Number, String],
    default: 300
  },
  ...vt()
}, "VColorPickerCanvas"), ZW = fi({
  name: "VColorPickerCanvas",
  props: XW(),
  emits: {
    "update:color": (e) => !0,
    "update:position": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = ot(!1), r = Se(), i = ot(parseFloat(e.width)), o = ot(parseFloat(e.height)), l = Se({
      x: 0,
      y: 0
    }), s = W({
      get: () => l.value,
      set(b) {
        if (!r.value) return;
        const {
          x: p,
          y
        } = b;
        l.value = b, n("update:color", {
          h: e.color?.h ?? 0,
          s: Pn(p, 0, i.value) / i.value,
          v: 1 - Pn(y, 0, o.value) / o.value,
          a: e.color?.a ?? 1
        });
      }
    }), d = W(() => {
      const {
        x: b,
        y: p
      } = s.value, y = parseInt(e.dotSize, 10) / 2;
      return {
        width: ht(e.dotSize),
        height: ht(e.dotSize),
        transform: `translate(${ht(b - y)}, ${ht(p - y)})`
      };
    }), {
      resizeRef: u
    } = Wi((b) => {
      if (!u.el?.offsetParent) return;
      const {
        width: p,
        height: y
      } = b[0].contentRect;
      i.value = p, o.value = y;
    });
    function f(b, p, y) {
      const {
        left: S,
        top: E,
        width: C,
        height: D
      } = y;
      s.value = {
        x: Pn(b - S, 0, C),
        y: Pn(p - E, 0, D)
      };
    }
    function h(b) {
      b.type === "mousedown" && b.preventDefault(), !e.disabled && (g(b), window.addEventListener("mousemove", g), window.addEventListener("mouseup", v), window.addEventListener("touchmove", g), window.addEventListener("touchend", v));
    }
    function g(b) {
      if (e.disabled || !r.value) return;
      a.value = !0;
      const p = m3(b);
      f(p.clientX, p.clientY, r.value.getBoundingClientRect());
    }
    function v() {
      window.removeEventListener("mousemove", g), window.removeEventListener("mouseup", v), window.removeEventListener("touchmove", g), window.removeEventListener("touchend", v);
    }
    function w() {
      if (!r.value) return;
      const b = r.value, p = b.getContext("2d");
      if (!p) return;
      const y = p.createLinearGradient(0, 0, b.width, 0);
      y.addColorStop(0, "hsla(0, 0%, 100%, 1)"), y.addColorStop(1, `hsla(${e.color?.h ?? 0}, 100%, 50%, 1)`), p.fillStyle = y, p.fillRect(0, 0, b.width, b.height);
      const S = p.createLinearGradient(0, 0, 0, b.height);
      S.addColorStop(0, "hsla(0, 0%, 0%, 0)"), S.addColorStop(1, "hsla(0, 0%, 0%, 1)"), p.fillStyle = S, p.fillRect(0, 0, b.width, b.height);
    }
    return nt(() => e.color?.h, w, {
      immediate: !0
    }), nt(() => [i.value, o.value], (b, p) => {
      w(), l.value = {
        x: s.value.x * b[0] / p[0],
        y: s.value.y * b[1] / p[1]
      };
    }, {
      flush: "post"
    }), nt(() => e.color, () => {
      if (a.value) {
        a.value = !1;
        return;
      }
      l.value = e.color ? {
        x: e.color.s * i.value,
        y: (1 - e.color.v) * o.value
      } : {
        x: 0,
        y: 0
      };
    }, {
      deep: !0,
      immediate: !0
    }), on(() => w()), Ge(() => I("div", {
      ref: u,
      class: Ie(["v-color-picker-canvas", e.class]),
      style: Xe(e.style),
      onMousedown: h,
      onTouchstartPassive: h
    }, [I("canvas", {
      ref: r,
      width: i.value,
      height: o.value
    }, null), e.color && I("div", {
      class: Ie(["v-color-picker-canvas__dot", {
        "v-color-picker-canvas__dot--disabled": e.disabled
      }]),
      style: Xe(d.value)
    }, null)])), {};
  }
});
function ej(e, t) {
  if (t) {
    const {
      a: n,
      ...a
    } = e;
    return a;
  }
  return e;
}
function tj(e, t) {
  if (t == null || typeof t == "string") {
    const n = e.a !== 1;
    if (t?.startsWith("rgb(")) {
      const {
        r,
        g: i,
        b: o,
        a: l
      } = bo(e);
      return `rgb(${r} ${i} ${o}` + (n ? ` / ${l})` : ")");
    } else if (t?.startsWith("hsl(")) {
      const {
        h: r,
        s: i,
        l: o,
        a: l
      } = qy(e);
      return `hsl(${r} ${Math.round(i * 100)} ${Math.round(o * 100)}` + (n ? ` / ${l})` : ")");
    }
    const a = VT(e);
    return e.a === 1 ? a.slice(0, 7) : a;
  }
  if (typeof t == "object") {
    let n;
    return Ll(t, ["r", "g", "b"]) ? n = bo(e) : Ll(t, ["h", "s", "l"]) ? n = qy(e) : Ll(t, ["h", "s", "v"]) && (n = e), ej(n, !Ll(t, ["a"]) && e.a === 1);
  }
  return e;
}
const ou = {
  h: 0,
  s: 0,
  v: 0,
  a: 1
}, Db = {
  inputProps: {
    type: "number",
    min: 0
  },
  inputs: [{
    label: "R",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.r),
    getColor: (e, t) => ({
      ...e,
      r: Number(t)
    })
  }, {
    label: "G",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.g),
    getColor: (e, t) => ({
      ...e,
      g: Number(t)
    })
  }, {
    label: "B",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.b),
    getColor: (e, t) => ({
      ...e,
      b: Number(t)
    })
  }, {
    label: "A",
    max: 1,
    step: 0.01,
    getValue: (e) => {
      let {
        a: t
      } = e;
      return t != null ? Math.round(t * 100) / 100 : 1;
    },
    getColor: (e, t) => ({
      ...e,
      a: Number(t)
    })
  }],
  to: bo,
  from: Ff
}, nj = {
  ...Db,
  inputs: Db.inputs?.slice(0, 3)
}, Bb = {
  inputProps: {
    type: "number",
    min: 0
  },
  inputs: [{
    label: "H",
    max: 360,
    step: 1,
    getValue: (e) => Math.round(e.h),
    getColor: (e, t) => ({
      ...e,
      h: Number(t)
    })
  }, {
    label: "S",
    max: 1,
    step: 0.01,
    getValue: (e) => Math.round(e.s * 100) / 100,
    getColor: (e, t) => ({
      ...e,
      s: Number(t)
    })
  }, {
    label: "L",
    max: 1,
    step: 0.01,
    getValue: (e) => Math.round(e.l * 100) / 100,
    getColor: (e, t) => ({
      ...e,
      l: Number(t)
    })
  }, {
    label: "A",
    max: 1,
    step: 0.01,
    getValue: (e) => {
      let {
        a: t
      } = e;
      return t != null ? Math.round(t * 100) / 100 : 1;
    },
    getColor: (e, t) => ({
      ...e,
      a: Number(t)
    })
  }],
  to: qy,
  from: Tw
}, aj = {
  ...Bb,
  inputs: Bb.inputs.slice(0, 3)
}, MP = {
  inputProps: {
    type: "text"
  },
  inputs: [{
    label: "HEXA",
    getValue: (e) => e,
    getColor: (e, t) => t
  }],
  to: VT,
  from: N3
}, rj = {
  ...MP,
  inputs: [{
    label: "HEX",
    getValue: (e) => e.slice(0, 7),
    getColor: (e, t) => t
  }]
}, Gl = {
  rgb: nj,
  rgba: Db,
  hsl: aj,
  hsla: Bb,
  hex: rj,
  hexa: MP
}, ij = (e) => {
  let {
    label: t,
    ...n
  } = e;
  return I("div", {
    class: "v-color-picker-edit__input"
  }, [I("input", Jn(Ca(n)), null), I("span", null, [t])]);
}, oj = Be({
  color: Object,
  disabled: Boolean,
  mode: {
    type: String,
    default: "rgba",
    validator: (e) => Object.keys(Gl).includes(e)
  },
  modes: {
    type: Array,
    default: () => Object.keys(Gl),
    validator: (e) => Array.isArray(e) && e.every((t) => Object.keys(Gl).includes(t))
  },
  ...vt()
}, "VColorPickerEdit"), sj = fi({
  name: "VColorPickerEdit",
  props: oj(),
  emits: {
    "update:color": (e) => !0,
    "update:mode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = W(() => e.modes.map((i) => ({
      ...Gl[i],
      name: i
    }))), r = W(() => {
      const i = a.value.find((l) => l.name === e.mode);
      if (!i) return [];
      const o = e.color ? i.to(e.color) : null;
      return i.inputs?.map((l) => {
        let {
          getValue: s,
          getColor: d,
          ...u
        } = l;
        return {
          ...i.inputProps,
          ...u,
          disabled: e.disabled,
          value: o && s(o),
          onChange: (f) => {
            const h = f.target;
            h && n("update:color", i.from(d(o ?? i.to(ou), h.value)));
          }
        };
      });
    });
    return Ge(() => I("div", {
      class: Ie(["v-color-picker-edit", e.class]),
      style: Xe(e.style)
    }, [r.value?.map((i) => _(ij, i, null)), a.value.length > 1 && _(un, {
      icon: "$unfold",
      size: "x-small",
      variant: "plain",
      onClick: () => {
        const i = a.value.findIndex((o) => o.name === e.mode);
        n("update:mode", a.value[(i + 1) % a.value.length].name);
      }
    }, null)])), {};
  }
}), L0 = Symbol.for("vuetify:v-slider");
function Vb(e, t, n) {
  const a = n === "vertical", r = t.getBoundingClientRect(), i = "touches" in e ? e.touches[0] : e;
  return a ? i.clientY - (r.top + r.height / 2) : i.clientX - (r.left + r.width / 2);
}
function lj(e, t) {
  return "touches" in e && e.touches.length ? e.touches[0][t] : "changedTouches" in e && e.changedTouches.length ? e.changedTouches[0][t] : e[t];
}
const RP = Be({
  disabled: {
    type: Boolean,
    default: null
  },
  error: Boolean,
  readonly: {
    type: Boolean,
    default: null
  },
  max: {
    type: [Number, String],
    default: 100
  },
  min: {
    type: [Number, String],
    default: 0
  },
  step: {
    type: [Number, String],
    default: 0
  },
  thumbColor: String,
  thumbLabel: {
    type: [Boolean, String],
    default: void 0,
    validator: (e) => typeof e == "boolean" || e === "always"
  },
  thumbSize: {
    type: [Number, String],
    default: 20
  },
  showTicks: {
    type: [Boolean, String],
    default: !1,
    validator: (e) => typeof e == "boolean" || e === "always"
  },
  ticks: {
    type: [Array, Object]
  },
  tickSize: {
    type: [Number, String],
    default: 2
  },
  color: String,
  trackColor: String,
  trackFillColor: String,
  trackSize: {
    type: [Number, String],
    default: 4
  },
  direction: {
    type: String,
    default: "horizontal",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  reverse: Boolean,
  ...Hn(),
  ...za({
    elevation: 2
  }),
  ripple: {
    type: Boolean,
    default: !0
  }
}, "Slider"), LP = (e) => {
  const t = W(() => parseFloat(e.min)), n = W(() => parseFloat(e.max)), a = W(() => Number(e.step) > 0 ? parseFloat(e.step) : 0), r = W(() => Math.max(MS(a.value), MS(t.value)));
  function i(o) {
    if (o = parseFloat(o), a.value <= 0) return o;
    const l = Pn(o, t.value, n.value), s = t.value % a.value;
    let d = Math.round((l - s) / a.value) * a.value + s;
    return l > d && d + a.value > n.value && (d = n.value), parseFloat(Math.min(d, n.value).toFixed(r.value));
  }
  return {
    min: t,
    max: n,
    step: a,
    decimals: r,
    roundValue: i
  };
}, FP = (e) => {
  let {
    props: t,
    steps: n,
    onSliderStart: a,
    onSliderMove: r,
    onSliderEnd: i,
    getActiveThumb: o
  } = e;
  const {
    isRtl: l
  } = Ra(), s = we(() => t.reverse), d = W(() => t.direction === "vertical"), u = W(() => d.value !== s.value), {
    min: f,
    max: h,
    step: g,
    decimals: v,
    roundValue: w
  } = n, b = W(() => parseInt(t.thumbSize, 10)), p = W(() => parseInt(t.tickSize, 10)), y = W(() => parseInt(t.trackSize, 10)), S = W(() => (h.value - f.value) / g.value), E = we(() => t.disabled), C = W(() => t.error || t.disabled ? void 0 : t.thumbColor ?? t.color), D = W(() => t.error || t.disabled ? void 0 : t.trackColor ?? t.color), P = W(() => t.error || t.disabled ? void 0 : t.trackFillColor ?? t.color), O = ot(!1), T = ot(0), A = Se(), V = Se();
  function M(pe) {
    const z = A.value?.$el;
    if (!z) return;
    const ke = t.direction === "vertical", Me = ke ? "top" : "left", Le = ke ? "height" : "width", ce = ke ? "clientY" : "clientX", {
      [Me]: ne,
      [Le]: G
    } = z.getBoundingClientRect(), le = lj(pe, ce);
    let Y = Pn((le - ne - T.value) / G) || 0;
    return (ke ? u.value : u.value !== l.value) && (Y = 1 - Y), w(f.value + Y * (h.value - f.value));
  }
  const B = (pe) => {
    const z = M(pe);
    z != null && i({
      value: z
    }), O.value = !1, T.value = 0;
  }, N = (pe) => {
    const z = M(pe);
    V.value = o(pe), V.value && (O.value = !0, V.value.contains(pe.target) ? T.value = Vb(pe, V.value, t.direction) : (T.value = 0, z != null && r({
      value: z
    })), z != null && a({
      value: z
    }), Vt(() => V.value?.focus()));
  }, H = {
    passive: !0,
    capture: !0
  };
  function j(pe) {
    const z = M(pe);
    z != null && r({
      value: z
    });
  }
  function te(pe) {
    pe.stopPropagation(), pe.preventDefault(), B(pe), window.removeEventListener("mousemove", j, H), window.removeEventListener("mouseup", te);
  }
  function de(pe) {
    B(pe), window.removeEventListener("touchmove", j, H), pe.target?.removeEventListener("touchend", de);
  }
  function Z(pe) {
    N(pe), window.addEventListener("touchmove", j, H), pe.target?.addEventListener("touchend", de, {
      passive: !1
    });
  }
  function F(pe) {
    pe.button === 0 && (pe.preventDefault(), N(pe), window.addEventListener("mousemove", j, H), window.addEventListener("mouseup", te, {
      passive: !1
    }));
  }
  const K = (pe) => {
    const z = (pe - f.value) / (h.value - f.value) * 100;
    return Pn(isNaN(z) ? 0 : z, 0, 100);
  }, se = we(() => t.showTicks), X = W(() => se.value ? t.ticks ? Array.isArray(t.ticks) ? t.ticks.map((pe) => ({
    value: pe,
    position: K(pe),
    label: pe.toString()
  })) : Object.keys(t.ticks).map((pe) => ({
    value: parseFloat(pe),
    position: K(parseFloat(pe)),
    label: t.ticks[pe]
  })) : S.value !== 1 / 0 ? ho(S.value + 1).map((pe) => {
    const z = f.value + pe * g.value;
    return {
      value: z,
      position: K(z)
    };
  }) : [] : []), he = W(() => X.value.some((pe) => {
    let {
      label: z
    } = pe;
    return !!z;
  })), ve = {
    activeThumbRef: V,
    color: we(() => t.color),
    decimals: v,
    disabled: E,
    direction: we(() => t.direction),
    elevation: we(() => t.elevation),
    hasLabels: he,
    isReversed: s,
    indexFromEnd: u,
    min: f,
    max: h,
    mousePressed: O,
    numTicks: S,
    onSliderMousedown: F,
    onSliderTouchstart: Z,
    parsedTicks: X,
    parseMouseMove: M,
    position: K,
    readonly: we(() => t.readonly),
    rounded: we(() => t.rounded),
    roundValue: w,
    showTicks: se,
    startOffset: T,
    step: g,
    thumbSize: b,
    thumbColor: C,
    thumbLabel: we(() => t.thumbLabel),
    ticks: we(() => t.ticks),
    tickSize: p,
    trackColor: D,
    trackContainerRef: A,
    trackFillColor: P,
    trackSize: y,
    vertical: d
  };
  return Nn(L0, ve), ve;
}, cj = Be({
  focused: Boolean,
  max: {
    type: Number,
    required: !0
  },
  min: {
    type: Number,
    required: !0
  },
  modelValue: {
    type: Number,
    required: !0
  },
  position: {
    type: Number,
    required: !0
  },
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  name: String,
  ...vt()
}, "VSliderThumb"), Mb = We()({
  name: "VSliderThumb",
  directives: {
    vRipple: Cr
  },
  props: cj(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Gt(L0), {
      isRtl: i,
      rtlClasses: o
    } = Ra();
    if (!r) throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");
    const {
      min: l,
      max: s,
      thumbColor: d,
      step: u,
      disabled: f,
      thumbSize: h,
      thumbLabel: g,
      direction: v,
      isReversed: w,
      vertical: b,
      readonly: p,
      elevation: y,
      mousePressed: S,
      decimals: E,
      indexFromEnd: C
    } = r, D = W(() => f.value ? void 0 : y.value), {
      elevationClasses: P
    } = ir(D), {
      textColorClasses: O,
      textColorStyles: T
    } = mr(d), {
      pageup: A,
      pagedown: V,
      end: M,
      home: B,
      left: N,
      right: H,
      down: j,
      up: te
    } = Ly, de = [A, V, M, B, N, H, j, te], Z = W(() => u.value ? [1, 2, 3] : [1, 5, 10]);
    function F(se, X) {
      if (!de.includes(se.key)) return;
      se.preventDefault();
      const he = u.value || 0.1, ve = (s.value - l.value) / he;
      if ([N, H, j, te].includes(se.key)) {
        const z = (b.value ? [i.value ? N : H, w.value ? j : te] : C.value !== i.value ? [N, te] : [H, te]).includes(se.key) ? 1 : -1, ke = se.shiftKey ? 2 : se.ctrlKey ? 1 : 0;
        z === -1 && X === s.value && !ke && !Number.isInteger(ve) ? X = X - ve % 1 * he : X = X + z * he * Z.value[ke];
      } else if (se.key === B)
        X = l.value;
      else if (se.key === M)
        X = s.value;
      else {
        const pe = se.key === V ? 1 : -1;
        X = X - pe * he * (ve > 100 ? ve / 10 : 10);
      }
      return Math.max(e.min, Math.min(e.max, X));
    }
    function K(se) {
      const X = F(se, e.modelValue);
      X != null && a("update:modelValue", X);
    }
    return Ge(() => {
      const se = ht(C.value ? 100 - e.position : e.position, "%");
      return I("div", {
        class: Ie(["v-slider-thumb", {
          "v-slider-thumb--focused": e.focused,
          "v-slider-thumb--pressed": e.focused && S.value
        }, e.class, o.value]),
        style: Xe([{
          "--v-slider-thumb-position": se,
          "--v-slider-thumb-size": ht(h.value)
        }, e.style]),
        role: "slider",
        tabindex: f.value ? -1 : 0,
        "aria-label": e.name,
        "aria-valuemin": l.value,
        "aria-valuemax": s.value,
        "aria-valuenow": e.modelValue,
        "aria-readonly": !!p.value,
        "aria-orientation": v.value,
        onKeydown: p.value ? void 0 : K
      }, [I("div", {
        class: Ie(["v-slider-thumb__surface", O.value, P.value]),
        style: {
          ...T.value
        }
      }, null), an(I("div", {
        class: Ie(["v-slider-thumb__ripple", O.value]),
        style: Xe(T.value)
      }, null), [[Cr, e.ripple, null, {
        circle: !0,
        center: !0
      }]]), _(b0, {
        origin: "bottom center"
      }, {
        default: () => [an(I("div", {
          class: "v-slider-thumb__label-container"
        }, [I("div", {
          class: Ie(["v-slider-thumb__label", O.value])
        }, [I("div", null, [n["thumb-label"]?.({
          modelValue: e.modelValue
        }) ?? e.modelValue.toFixed(u.value ? E.value : 1)])])]), [[_a, g.value && e.focused || g.value === "always"]])]
      })]);
    }), {};
  }
}), uj = Be({
  start: {
    type: Number,
    required: !0
  },
  stop: {
    type: Number,
    required: !0
  },
  ...vt()
}, "VSliderTrack"), NP = We()({
  name: "VSliderTrack",
  props: uj(),
  emits: {},
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(L0);
    if (!a) throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");
    const {
      color: r,
      parsedTicks: i,
      rounded: o,
      showTicks: l,
      tickSize: s,
      trackColor: d,
      trackFillColor: u,
      trackSize: f,
      vertical: h,
      min: g,
      max: v,
      indexFromEnd: w
    } = a, {
      roundedClasses: b
    } = fa(o), {
      backgroundColorClasses: p,
      backgroundColorStyles: y
    } = An(u), {
      backgroundColorClasses: S,
      backgroundColorStyles: E
    } = An(d), C = W(() => `inset-${h.value ? "block" : "inline"}-${w.value ? "end" : "start"}`), D = W(() => h.value ? "height" : "width"), P = W(() => ({
      [C.value]: "0%",
      [D.value]: "100%"
    })), O = W(() => e.stop - e.start), T = W(() => ({
      [C.value]: ht(e.start, "%"),
      [D.value]: ht(O.value, "%")
    })), A = W(() => l.value ? (h.value ? i.value.slice().reverse() : i.value).map((M, B) => {
      const N = M.value !== g.value && M.value !== v.value ? ht(M.position, "%") : void 0;
      return I("div", {
        key: M.value,
        class: Ie(["v-slider-track__tick", {
          "v-slider-track__tick--filled": M.position >= e.start && M.position <= e.stop,
          "v-slider-track__tick--first": M.value === g.value,
          "v-slider-track__tick--last": M.value === v.value
        }]),
        style: {
          [C.value]: N
        }
      }, [(M.label || n["tick-label"]) && I("div", {
        class: "v-slider-track__tick-label"
      }, [n["tick-label"]?.({
        tick: M,
        index: B
      }) ?? M.label])]);
    }) : []);
    return Ge(() => I("div", {
      class: Ie(["v-slider-track", b.value, e.class]),
      style: Xe([{
        "--v-slider-track-size": ht(f.value),
        "--v-slider-tick-size": ht(s.value)
      }, e.style])
    }, [I("div", {
      class: Ie(["v-slider-track__background", S.value, {
        "v-slider-track__background--opacity": !!r.value || !u.value
      }]),
      style: {
        ...P.value,
        ...E.value
      }
    }, null), I("div", {
      class: Ie(["v-slider-track__fill", p.value]),
      style: {
        ...T.value,
        ...y.value
      }
    }, null), l.value && I("div", {
      class: Ie(["v-slider-track__ticks", {
        "v-slider-track__ticks--always-show": l.value === "always"
      }])
    }, [A.value])])), {};
  }
}), dj = Be({
  ...em(),
  ...RP(),
  ...fs(),
  modelValue: {
    type: [Number, String],
    default: 0
  }
}, "VSlider"), Rb = We()({
  name: "VSlider",
  props: dj(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    start: (e) => !0,
    end: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Se(), {
      rtlClasses: i
    } = Ra(), o = LP(e), l = kt(e, "modelValue", void 0, (D) => o.roundValue(D ?? o.min.value)), {
      min: s,
      max: d,
      mousePressed: u,
      roundValue: f,
      onSliderMousedown: h,
      onSliderTouchstart: g,
      trackContainerRef: v,
      position: w,
      hasLabels: b,
      readonly: p
    } = FP({
      props: e,
      steps: o,
      onSliderStart: () => {
        a("start", l.value);
      },
      onSliderEnd: (D) => {
        let {
          value: P
        } = D;
        const O = f(P);
        l.value = O, a("end", O);
      },
      onSliderMove: (D) => {
        let {
          value: P
        } = D;
        return l.value = f(P);
      },
      getActiveThumb: () => r.value?.$el
    }), {
      isFocused: y,
      focus: S,
      blur: E
    } = ds(e), C = W(() => w(l.value));
    return Ge(() => {
      const D = hr.filterProps(e), P = !!(e.label || n.label || n.prepend);
      return _(hr, He({
        class: ["v-slider", {
          "v-slider--has-labels": !!n["tick-label"] || b.value,
          "v-slider--focused": y.value,
          "v-slider--pressed": u.value,
          "v-slider--disabled": e.disabled
        }, i.value, e.class],
        style: e.style
      }, D, {
        focused: y.value
      }), {
        ...n,
        prepend: P ? (O) => I(Qe, null, [n.label?.(O) ?? (e.label ? _(Zu, {
          id: O.id.value,
          class: "v-slider__label",
          text: e.label
        }, null) : void 0), n.prepend?.(O)]) : void 0,
        default: (O) => {
          let {
            id: T,
            messagesId: A
          } = O;
          return I("div", {
            class: "v-slider__container",
            onMousedown: p.value ? void 0 : h,
            onTouchstartPassive: p.value ? void 0 : g
          }, [I("input", {
            id: T.value,
            name: e.name || T.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: l.value
          }, null), _(NP, {
            ref: v,
            start: 0,
            stop: C.value
          }, {
            "tick-label": n["tick-label"]
          }), _(Mb, {
            ref: r,
            "aria-describedby": A.value,
            focused: y.value,
            min: s.value,
            max: d.value,
            modelValue: l.value,
            "onUpdate:modelValue": (V) => l.value = V,
            position: C.value,
            elevation: e.elevation,
            onFocus: S,
            onBlur: E,
            ripple: e.ripple,
            name: e.name
          }, {
            "thumb-label": n["thumb-label"]
          })]);
        }
      });
    }), {};
  }
}), fj = Be({
  color: {
    type: Object
  },
  disabled: Boolean,
  hideAlpha: Boolean,
  ...vt()
}, "VColorPickerPreview"), mj = fi({
  name: "VColorPickerPreview",
  props: fj(),
  emits: {
    "update:color": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = new AbortController();
    di(() => a.abort());
    async function r() {
      if (!PS || e.disabled) return;
      const i = new window.EyeDropper();
      try {
        const o = await i.open({
          signal: a.signal
        }), l = Ff(si(o.sRGBHex));
        n("update:color", {
          ...e.color ?? ou,
          ...l
        });
      } catch {
      }
    }
    return Ge(() => I("div", {
      class: Ie(["v-color-picker-preview", {
        "v-color-picker-preview--hide-alpha": e.hideAlpha
      }, e.class]),
      style: Xe(e.style)
    }, [PS && I("div", {
      class: "v-color-picker-preview__eye-dropper",
      key: "eyeDropper"
    }, [_(un, {
      density: "comfortable",
      disabled: e.disabled,
      icon: "$eyeDropper",
      variant: "plain",
      onClick: r
    }, null)]), I("div", {
      class: "v-color-picker-preview__dot"
    }, [I("div", {
      style: {
        background: OT(e.color ?? ou)
      }
    }, null)]), I("div", {
      class: "v-color-picker-preview__sliders"
    }, [_(Rb, {
      class: "v-color-picker-preview__track v-color-picker-preview__hue",
      modelValue: e.color?.h,
      "onUpdate:modelValue": (i) => n("update:color", {
        ...e.color ?? ou,
        h: i
      }),
      step: 0,
      min: 0,
      max: 360,
      disabled: e.disabled,
      thumbSize: 14,
      trackSize: 8,
      trackFillColor: "white",
      hideDetails: !0
    }, null), !e.hideAlpha && _(Rb, {
      class: "v-color-picker-preview__track v-color-picker-preview__alpha",
      modelValue: e.color?.a ?? 1,
      "onUpdate:modelValue": (i) => n("update:color", {
        ...e.color ?? ou,
        a: i
      }),
      step: 1 / 256,
      min: 0,
      max: 1,
      disabled: e.disabled,
      thumbSize: 14,
      trackSize: 8,
      trackFillColor: "white",
      hideDetails: !0
    }, null)])])), {};
  }
}), hj = {
  base: "#f44336",
  lighten5: "#ffebee",
  lighten4: "#ffcdd2",
  lighten3: "#ef9a9a",
  lighten2: "#e57373",
  lighten1: "#ef5350",
  darken1: "#e53935",
  darken2: "#d32f2f",
  darken3: "#c62828",
  darken4: "#b71c1c",
  accent1: "#ff8a80",
  accent2: "#ff5252",
  accent3: "#ff1744",
  accent4: "#d50000"
}, _j = {
  base: "#e91e63",
  lighten5: "#fce4ec",
  lighten4: "#f8bbd0",
  lighten3: "#f48fb1",
  lighten2: "#f06292",
  lighten1: "#ec407a",
  darken1: "#d81b60",
  darken2: "#c2185b",
  darken3: "#ad1457",
  darken4: "#880e4f",
  accent1: "#ff80ab",
  accent2: "#ff4081",
  accent3: "#f50057",
  accent4: "#c51162"
}, pj = {
  base: "#9c27b0",
  lighten5: "#f3e5f5",
  lighten4: "#e1bee7",
  lighten3: "#ce93d8",
  lighten2: "#ba68c8",
  lighten1: "#ab47bc",
  darken1: "#8e24aa",
  darken2: "#7b1fa2",
  darken3: "#6a1b9a",
  darken4: "#4a148c",
  accent1: "#ea80fc",
  accent2: "#e040fb",
  accent3: "#d500f9",
  accent4: "#aa00ff"
}, vj = {
  base: "#673ab7",
  lighten5: "#ede7f6",
  lighten4: "#d1c4e9",
  lighten3: "#b39ddb",
  lighten2: "#9575cd",
  lighten1: "#7e57c2",
  darken1: "#5e35b1",
  darken2: "#512da8",
  darken3: "#4527a0",
  darken4: "#311b92",
  accent1: "#b388ff",
  accent2: "#7c4dff",
  accent3: "#651fff",
  accent4: "#6200ea"
}, gj = {
  base: "#3f51b5",
  lighten5: "#e8eaf6",
  lighten4: "#c5cae9",
  lighten3: "#9fa8da",
  lighten2: "#7986cb",
  lighten1: "#5c6bc0",
  darken1: "#3949ab",
  darken2: "#303f9f",
  darken3: "#283593",
  darken4: "#1a237e",
  accent1: "#8c9eff",
  accent2: "#536dfe",
  accent3: "#3d5afe",
  accent4: "#304ffe"
}, yj = {
  base: "#2196f3",
  lighten5: "#e3f2fd",
  lighten4: "#bbdefb",
  lighten3: "#90caf9",
  lighten2: "#64b5f6",
  lighten1: "#42a5f5",
  darken1: "#1e88e5",
  darken2: "#1976d2",
  darken3: "#1565c0",
  darken4: "#0d47a1",
  accent1: "#82b1ff",
  accent2: "#448aff",
  accent3: "#2979ff",
  accent4: "#2962ff"
}, bj = {
  base: "#03a9f4",
  lighten5: "#e1f5fe",
  lighten4: "#b3e5fc",
  lighten3: "#81d4fa",
  lighten2: "#4fc3f7",
  lighten1: "#29b6f6",
  darken1: "#039be5",
  darken2: "#0288d1",
  darken3: "#0277bd",
  darken4: "#01579b",
  accent1: "#80d8ff",
  accent2: "#40c4ff",
  accent3: "#00b0ff",
  accent4: "#0091ea"
}, wj = {
  base: "#00bcd4",
  lighten5: "#e0f7fa",
  lighten4: "#b2ebf2",
  lighten3: "#80deea",
  lighten2: "#4dd0e1",
  lighten1: "#26c6da",
  darken1: "#00acc1",
  darken2: "#0097a7",
  darken3: "#00838f",
  darken4: "#006064",
  accent1: "#84ffff",
  accent2: "#18ffff",
  accent3: "#00e5ff",
  accent4: "#00b8d4"
}, kj = {
  base: "#009688",
  lighten5: "#e0f2f1",
  lighten4: "#b2dfdb",
  lighten3: "#80cbc4",
  lighten2: "#4db6ac",
  lighten1: "#26a69a",
  darken1: "#00897b",
  darken2: "#00796b",
  darken3: "#00695c",
  darken4: "#004d40",
  accent1: "#a7ffeb",
  accent2: "#64ffda",
  accent3: "#1de9b6",
  accent4: "#00bfa5"
}, Sj = {
  base: "#4caf50",
  lighten5: "#e8f5e9",
  lighten4: "#c8e6c9",
  lighten3: "#a5d6a7",
  lighten2: "#81c784",
  lighten1: "#66bb6a",
  darken1: "#43a047",
  darken2: "#388e3c",
  darken3: "#2e7d32",
  darken4: "#1b5e20",
  accent1: "#b9f6ca",
  accent2: "#69f0ae",
  accent3: "#00e676",
  accent4: "#00c853"
}, Cj = {
  base: "#8bc34a",
  lighten5: "#f1f8e9",
  lighten4: "#dcedc8",
  lighten3: "#c5e1a5",
  lighten2: "#aed581",
  lighten1: "#9ccc65",
  darken1: "#7cb342",
  darken2: "#689f38",
  darken3: "#558b2f",
  darken4: "#33691e",
  accent1: "#ccff90",
  accent2: "#b2ff59",
  accent3: "#76ff03",
  accent4: "#64dd17"
}, Aj = {
  base: "#cddc39",
  lighten5: "#f9fbe7",
  lighten4: "#f0f4c3",
  lighten3: "#e6ee9c",
  lighten2: "#dce775",
  lighten1: "#d4e157",
  darken1: "#c0ca33",
  darken2: "#afb42b",
  darken3: "#9e9d24",
  darken4: "#827717",
  accent1: "#f4ff81",
  accent2: "#eeff41",
  accent3: "#c6ff00",
  accent4: "#aeea00"
}, xj = {
  base: "#ffeb3b",
  lighten5: "#fffde7",
  lighten4: "#fff9c4",
  lighten3: "#fff59d",
  lighten2: "#fff176",
  lighten1: "#ffee58",
  darken1: "#fdd835",
  darken2: "#fbc02d",
  darken3: "#f9a825",
  darken4: "#f57f17",
  accent1: "#ffff8d",
  accent2: "#ffff00",
  accent3: "#ffea00",
  accent4: "#ffd600"
}, Tj = {
  base: "#ffc107",
  lighten5: "#fff8e1",
  lighten4: "#ffecb3",
  lighten3: "#ffe082",
  lighten2: "#ffd54f",
  lighten1: "#ffca28",
  darken1: "#ffb300",
  darken2: "#ffa000",
  darken3: "#ff8f00",
  darken4: "#ff6f00",
  accent1: "#ffe57f",
  accent2: "#ffd740",
  accent3: "#ffc400",
  accent4: "#ffab00"
}, Ij = {
  base: "#ff9800",
  lighten5: "#fff3e0",
  lighten4: "#ffe0b2",
  lighten3: "#ffcc80",
  lighten2: "#ffb74d",
  lighten1: "#ffa726",
  darken1: "#fb8c00",
  darken2: "#f57c00",
  darken3: "#ef6c00",
  darken4: "#e65100",
  accent1: "#ffd180",
  accent2: "#ffab40",
  accent3: "#ff9100",
  accent4: "#ff6d00"
}, Ej = {
  base: "#ff5722",
  lighten5: "#fbe9e7",
  lighten4: "#ffccbc",
  lighten3: "#ffab91",
  lighten2: "#ff8a65",
  lighten1: "#ff7043",
  darken1: "#f4511e",
  darken2: "#e64a19",
  darken3: "#d84315",
  darken4: "#bf360c",
  accent1: "#ff9e80",
  accent2: "#ff6e40",
  accent3: "#ff3d00",
  accent4: "#dd2c00"
}, Pj = {
  base: "#795548",
  lighten5: "#efebe9",
  lighten4: "#d7ccc8",
  lighten3: "#bcaaa4",
  lighten2: "#a1887f",
  lighten1: "#8d6e63",
  darken1: "#6d4c41",
  darken2: "#5d4037",
  darken3: "#4e342e",
  darken4: "#3e2723"
}, Oj = {
  base: "#607d8b",
  lighten5: "#eceff1",
  lighten4: "#cfd8dc",
  lighten3: "#b0bec5",
  lighten2: "#90a4ae",
  lighten1: "#78909c",
  darken1: "#546e7a",
  darken2: "#455a64",
  darken3: "#37474f",
  darken4: "#263238"
}, Dj = {
  base: "#9e9e9e",
  lighten5: "#fafafa",
  lighten4: "#f5f5f5",
  lighten3: "#eeeeee",
  lighten2: "#e0e0e0",
  lighten1: "#bdbdbd",
  darken1: "#757575",
  darken2: "#616161",
  darken3: "#424242",
  darken4: "#212121"
}, Bj = {
  black: "#000000",
  white: "#ffffff",
  transparent: "#ffffff00"
}, Vj = {
  red: hj,
  pink: _j,
  purple: pj,
  deepPurple: vj,
  indigo: gj,
  blue: yj,
  lightBlue: bj,
  cyan: wj,
  teal: kj,
  green: Sj,
  lightGreen: Cj,
  lime: Aj,
  yellow: xj,
  amber: Tj,
  orange: Ij,
  deepOrange: Ej,
  brown: Pj,
  blueGrey: Oj,
  grey: Dj,
  shades: Bj
}, Mj = Be({
  swatches: {
    type: Array,
    default: () => Rj(Vj)
  },
  disabled: Boolean,
  color: Object,
  maxHeight: [Number, String],
  ...vt()
}, "VColorPickerSwatches");
function Rj(e) {
  return Object.keys(e).map((t) => {
    const n = e[t];
    return n.base ? [n.base, n.darken4, n.darken3, n.darken2, n.darken1, n.lighten1, n.lighten2, n.lighten3, n.lighten4, n.lighten5] : [n.black, n.white, n.transparent];
  });
}
const Lj = fi({
  name: "VColorPickerSwatches",
  props: Mj(),
  emits: {
    "update:color": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    return Ge(() => I("div", {
      class: Ie(["v-color-picker-swatches", e.class]),
      style: Xe([{
        maxHeight: ht(e.maxHeight)
      }, e.style])
    }, [I("div", null, [e.swatches.map((a) => I("div", {
      class: "v-color-picker-swatches__swatch"
    }, [a.map((r) => {
      const i = si(r), o = Ff(i), l = PT(i);
      return I("div", {
        class: "v-color-picker-swatches__color",
        onClick: () => o && n("update:color", o)
      }, [I("div", {
        style: {
          background: l
        }
      }, [e.color && fr(e.color, o) ? _(pn, {
        size: "x-small",
        icon: "$success",
        color: H3(r, "#FFFFFF") > 2 ? "white" : "black"
      }, null) : void 0])]);
    })]))])])), {};
  }
}), Fj = xo("v-picker-title"), F0 = Be({
  color: String,
  ...Qr(),
  ...vt(),
  ...La(),
  ...za(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...qt(),
  ...sn()
}, "VSheet"), Df = We()({
  name: "VSheet",
  props: F0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      borderClasses: o
    } = _i(e), {
      dimensionStyles: l
    } = Fa(e), {
      elevationClasses: s
    } = ir(e), {
      locationStyles: d
    } = gc(e), {
      positionClasses: u
    } = Xu(e), {
      roundedClasses: f
    } = fa(e);
    return Ge(() => _(e.tag, {
      class: Ie(["v-sheet", a.value, r.value, o.value, s.value, u.value, f.value, e.class]),
      style: Xe([i.value, l.value, d.value, e.style])
    }, n)), {};
  }
}), N0 = Be({
  bgColor: String,
  divided: Boolean,
  landscape: Boolean,
  title: String,
  hideHeader: Boolean,
  ...F0()
}, "VPicker"), q_ = We()({
  name: "VPicker",
  props: N0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.color);
    return Ge(() => {
      const i = Df.filterProps(e), o = !!(e.title || n.title);
      return _(Df, He(i, {
        color: e.bgColor,
        class: ["v-picker", {
          "v-picker--divided": e.divided,
          "v-picker--landscape": e.landscape,
          "v-picker--with-actions": !!n.actions
        }, e.class],
        style: e.style
      }), {
        default: () => [!e.hideHeader && I("div", {
          key: "header",
          class: Ie([a.value]),
          style: Xe([r.value])
        }, [o && _(Fj, {
          key: "picker-title"
        }, {
          default: () => [n.title?.() ?? e.title]
        }), n.header && I("div", {
          class: "v-picker__header"
        }, [n.header()])]), I("div", {
          class: "v-picker__body"
        }, [n.default?.()]), n.actions && _(Wt, {
          defaults: {
            VBtn: {
              slim: !0,
              variant: "text"
            }
          }
        }, {
          default: () => [I("div", {
            class: "v-picker__actions"
          }, [n.actions()])]
        })]
      });
    }), {};
  }
}), Nj = Be({
  canvasHeight: {
    type: [String, Number],
    default: 150
  },
  disabled: Boolean,
  dotSize: {
    type: [Number, String],
    default: 10
  },
  hideCanvas: Boolean,
  hideSliders: Boolean,
  hideInputs: Boolean,
  mode: {
    type: String,
    default: "rgba",
    validator: (e) => Object.keys(Gl).includes(e)
  },
  modes: {
    type: Array,
    default: () => Object.keys(Gl),
    validator: (e) => Array.isArray(e) && e.every((t) => Object.keys(Gl).includes(t))
  },
  showSwatches: Boolean,
  swatches: Array,
  swatchesMaxHeight: {
    type: [Number, String],
    default: 150
  },
  modelValue: {
    type: [Object, String]
  },
  ...N0({
    hideHeader: !0
  })
}, "VColorPicker"), Uj = fi({
  name: "VColorPicker",
  props: Nj(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:mode": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "mode"), r = Se(null), i = kt(e, "modelValue", void 0, (u) => {
      if (u == null || u === "") return null;
      let f;
      try {
        f = Ff(si(u));
      } catch {
        return null;
      }
      return f;
    }, (u) => u ? tj(u, e.modelValue) : null), o = W(() => i.value ? {
      ...i.value,
      h: r.value ?? i.value.h
    } : null), {
      rtlClasses: l
    } = Ra();
    let s = !0;
    nt(i, (u) => {
      if (!s) {
        s = !0;
        return;
      }
      u && (r.value = u.h);
    }, {
      immediate: !0
    });
    const d = (u) => {
      s = !1, r.value = u.h, i.value = u;
    };
    return qu(() => {
      e.modes.includes(a.value) || (a.value = e.modes[0]);
    }), ca({
      VSlider: {
        color: void 0,
        trackColor: void 0,
        trackFillColor: void 0
      }
    }), Ge(() => {
      const u = q_.filterProps(e);
      return _(q_, He(u, {
        class: ["v-color-picker", l.value, e.class],
        style: [{
          "--v-color-picker-color-hsv": OT({
            ...o.value ?? ou,
            a: 1
          })
        }, e.style]
      }), {
        ...n,
        default: () => I(Qe, null, [!e.hideCanvas && _(ZW, {
          key: "canvas",
          color: o.value,
          "onUpdate:color": d,
          disabled: e.disabled,
          dotSize: e.dotSize,
          width: e.width,
          height: e.canvasHeight
        }, null), (!e.hideSliders || !e.hideInputs) && I("div", {
          key: "controls",
          class: "v-color-picker__controls"
        }, [!e.hideSliders && _(mj, {
          key: "preview",
          color: o.value,
          "onUpdate:color": d,
          hideAlpha: !a.value.endsWith("a"),
          disabled: e.disabled
        }, null), !e.hideInputs && _(sj, {
          key: "edit",
          modes: e.modes,
          mode: a.value,
          "onUpdate:mode": (f) => a.value = f,
          color: o.value,
          "onUpdate:color": d,
          disabled: e.disabled
        }, null)]), e.showSwatches && _(Lj, {
          key: "swatches",
          color: o.value,
          "onUpdate:color": d,
          maxHeight: e.swatchesMaxHeight,
          swatches: e.swatches,
          disabled: e.disabled
        }, null)])
      });
    }), {};
  }
}), $j = Be({
  autoSelectFirst: {
    type: [Boolean, String]
  },
  clearOnSelect: {
    type: Boolean,
    default: !0
  },
  delimiters: Array,
  ...im({
    filterKeys: ["title"]
  }),
  ...M0({
    hideNoData: !0,
    returnObject: !0
  }),
  ...la(rm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...Gi({
    transition: !1
  })
}, "VCombobox"), qj = We()({
  name: "VCombobox",
  props: $j(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:search": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = ua(), i = Se(), o = ot(!1), l = ot(!0), s = ot(!1), d = Se(), u = Se(), f = ot(-1);
    let h = !1;
    const {
      items: g,
      transformIn: v,
      transformOut: w
    } = E0(e), {
      textColorClasses: b,
      textColorStyles: p
    } = mr(() => i.value?.color), y = kt(e, "modelValue", [], (ce) => v(Xn(ce)), (ce) => {
      const ne = w(ce);
      return e.multiple ? ne : ne[0] ?? null;
    }), S = tm(e), E = W(() => !!(e.chips || a.chip)), C = W(() => E.value || !!a.selection), D = ot(!e.multiple && !C.value ? y.value[0]?.title ?? "" : ""), P = W({
      get: () => D.value,
      set: (ce) => {
        if (D.value = ce ?? "", !e.multiple && !C.value && (y.value = [Bs(e, ce)]), ce && e.multiple && e.delimiters?.length) {
          const ne = ce.split(new RegExp(`(?:${e.delimiters.join("|")})+`));
          ne.length > 1 && (ne.forEach((G) => {
            G = G.trim(), G && z(Bs(e, G));
          }), D.value = "");
        }
        ce || (f.value = -1), l.value = !ce;
      }
    }), O = W(() => typeof e.counterValue == "function" ? e.counterValue(y.value) : typeof e.counterValue == "number" ? e.counterValue : e.multiple ? y.value.length : P.value.length), {
      filteredItems: T,
      getMatches: A
    } = om(e, g, () => l.value ? "" : P.value), V = W(() => e.hideSelected ? T.value.filter((ce) => !y.value.some((ne) => ne.value === ce.value)) : T.value), M = W(() => e.hideNoData && !V.value.length || S.isReadonly.value || S.isDisabled.value), B = kt(e, "menu"), N = W({
      get: () => B.value,
      set: (ce) => {
        B.value && !ce && d.value?.ΨopenChildren.size || ce && M.value || (B.value = ce);
      }
    }), H = we(() => N.value ? e.closeText : e.openText);
    nt(D, (ce) => {
      h ? Vt(() => h = !1) : o.value && !N.value && (N.value = !0), n("update:search", ce);
    }), nt(y, (ce) => {
      !e.multiple && !C.value && (D.value = ce[0]?.title ?? "");
    });
    const j = W(() => y.value.map((ce) => ce.value)), te = W(() => (e.autoSelectFirst === !0 || e.autoSelectFirst === "exact" && P.value === V.value[0]?.title) && V.value.length > 0 && !l.value && !s.value), de = Se(), Z = V0(de, i);
    function F(ce) {
      h = !0, e.openOnClear && (N.value = !0);
    }
    function K() {
      M.value || (N.value = !0);
    }
    function se(ce) {
      M.value || (o.value && (ce.preventDefault(), ce.stopPropagation()), N.value = !N.value);
    }
    function X(ce) {
      ce.key !== " " && Cu(ce) && i.value?.focus();
    }
    function he(ce) {
      if (u3(ce) || S.isReadonly.value) return;
      const ne = i.value?.selectionStart, G = y.value.length;
      if (["Enter", "ArrowDown", "ArrowUp"].includes(ce.key) && ce.preventDefault(), ["Enter", "ArrowDown"].includes(ce.key) && (N.value = !0), ["Escape"].includes(ce.key) && (N.value = !1), ["Enter", "Escape", "Tab"].includes(ce.key) && (te.value && ["Enter", "Tab"].includes(ce.key) && !y.value.some((le) => {
        let {
          value: Y
        } = le;
        return Y === V.value[0].value;
      }) && z(T.value[0]), l.value = !0), ce.key === "ArrowDown" && te.value && de.value?.focus("next"), ce.key === "Enter" && P.value && (z(Bs(e, P.value)), C.value && (D.value = "")), ["Backspace", "Delete"].includes(ce.key)) {
        if (!e.multiple && C.value && y.value.length > 0 && !P.value) return z(y.value[0], !1);
        if (~f.value) {
          ce.preventDefault();
          const le = f.value;
          z(y.value[f.value], !1), f.value = le >= G - 1 ? G - 2 : le;
        } else ce.key === "Backspace" && !P.value && (f.value = G - 1);
        return;
      }
      if (e.multiple)
        if (ce.key === "ArrowLeft") {
          if (f.value < 0 && ne && ne > 0) return;
          const le = f.value > -1 ? f.value - 1 : G - 1;
          y.value[le] ? f.value = le : (f.value = -1, i.value?.setSelectionRange(P.value.length, P.value.length));
        } else if (ce.key === "ArrowRight") {
          if (f.value < 0) return;
          const le = f.value + 1;
          y.value[le] ? f.value = le : (f.value = -1, i.value?.setSelectionRange(0, 0));
        } else ~f.value && Cu(ce) && (f.value = -1);
    }
    function ve() {
      e.eager && u.value?.calculateVisibleItems();
    }
    function pe() {
      o.value && (l.value = !0, i.value?.focus());
    }
    function z(ce) {
      let ne = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!(!ce || ce.props.disabled))
        if (e.multiple) {
          const G = y.value.findIndex((Y) => (e.valueComparator || fr)(Y.value, ce.value)), le = ne ?? !~G;
          if (~G) {
            const Y = le ? [...y.value, ce] : [...y.value];
            Y.splice(G, 1), y.value = Y;
          } else le && (y.value = [...y.value, ce]);
          e.clearOnSelect && (P.value = "");
        } else {
          const G = ne !== !1;
          y.value = G ? [ce] : [], D.value = G && !C.value ? ce.title : "", Vt(() => {
            N.value = !1, l.value = !0;
          });
        }
    }
    function ke(ce) {
      o.value = !0, setTimeout(() => {
        s.value = !0;
      });
    }
    function Me(ce) {
      s.value = !1;
    }
    function Le(ce) {
      (ce == null || ce === "" && !e.multiple && !C.value) && (y.value = []);
    }
    return nt(o, (ce, ne) => {
      if (!(ce || ce === ne) && (f.value = -1, N.value = !1, P.value)) {
        if (e.multiple) {
          z(Bs(e, P.value));
          return;
        }
        if (!C.value) return;
        y.value.some((G) => {
          let {
            title: le
          } = G;
          return le === P.value;
        }) ? D.value = "" : z(Bs(e, P.value));
      }
    }), nt(N, () => {
      if (!e.hideSelected && N.value && y.value.length) {
        const ce = V.value.findIndex((ne) => y.value.some((G) => (e.valueComparator || fr)(G.value, ne.value)));
        vn && window.requestAnimationFrame(() => {
          ce >= 0 && u.value?.scrollToIndex(ce);
        });
      }
    }), nt(() => e.items, (ce, ne) => {
      N.value || o.value && !ne.length && ce.length && (N.value = !0);
    }), Ge(() => {
      const ce = !!(!e.hideNoData || V.value.length || a["prepend-item"] || a["append-item"] || a["no-data"]), ne = y.value.length > 0, G = os.filterProps(e);
      return _(os, He({
        ref: i
      }, G, {
        modelValue: P.value,
        "onUpdate:modelValue": [(le) => P.value = le, Le],
        focused: o.value,
        "onUpdate:focused": (le) => o.value = le,
        validationValue: y.externalValue,
        counterValue: O.value,
        dirty: ne,
        class: ["v-combobox", {
          "v-combobox--active-menu": N.value,
          "v-combobox--chips": !!e.chips,
          "v-combobox--selection-slot": !!C.value,
          "v-combobox--selecting-index": f.value > -1,
          [`v-combobox--${e.multiple ? "multiple" : "single"}`]: !0
        }, e.class],
        style: e.style,
        readonly: S.isReadonly.value,
        placeholder: ne ? void 0 : e.placeholder,
        "onClick:clear": F,
        "onMousedown:control": K,
        onKeydown: he
      }), {
        ...a,
        default: () => I(Qe, null, [_(Ru, He({
          ref: d,
          modelValue: N.value,
          "onUpdate:modelValue": (le) => N.value = le,
          activator: "parent",
          contentClass: "v-combobox__content",
          disabled: M.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: ve,
          onAfterLeave: pe
        }, e.menuProps), {
          default: () => [ce && _(Cp, He({
            ref: de,
            selected: j.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (le) => le.preventDefault(),
            onKeydown: X,
            onFocusin: ke,
            onFocusout: Me,
            tabindex: "-1",
            "aria-live": "polite",
            color: e.itemColor ?? e.color
          }, Z, e.listProps), {
            default: () => [a["prepend-item"]?.(), !V.value.length && !e.hideNoData && (a["no-data"]?.() ?? _(is, {
              key: "no-data",
              title: r(e.noDataText)
            }, null)), _(xp, {
              ref: u,
              renderless: !0,
              items: V.value,
              itemKey: "value"
            }, {
              default: (le) => {
                let {
                  item: Y,
                  index: Ce,
                  itemRef: Te
                } = le;
                const ie = He(Y.props, {
                  ref: Te,
                  key: Y.value,
                  active: te.value && Ce === 0 ? !0 : void 0,
                  onClick: () => z(Y, null)
                });
                return a.item?.({
                  item: Y,
                  index: Ce,
                  props: ie
                }) ?? _(is, He(ie, {
                  role: "option"
                }), {
                  prepend: (ge) => {
                    let {
                      isSelected: Pe
                    } = ge;
                    return I(Qe, null, [e.multiple && !e.hideSelected ? _(rs, {
                      key: Y.value,
                      modelValue: Pe,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, Y.props.prependAvatar && _(Ei, {
                      image: Y.props.prependAvatar
                    }, null), Y.props.prependIcon && _(pn, {
                      icon: Y.props.prependIcon
                    }, null)]);
                  },
                  title: () => l.value ? Y.title : kP("v-combobox", Y.title, A(Y)?.title)
                });
              }
            }), a["append-item"]?.()]
          })]
        }), y.value.map((le, Y) => {
          function Ce(Pe) {
            Pe.stopPropagation(), Pe.preventDefault(), z(le, !1);
          }
          const Te = {
            "onClick:close": Ce,
            onKeydown(Pe) {
              Pe.key !== "Enter" && Pe.key !== " " || (Pe.preventDefault(), Pe.stopPropagation(), Ce(Pe));
            },
            onMousedown(Pe) {
              Pe.preventDefault(), Pe.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, ie = E.value ? !!a.chip : !!a.selection, ge = ie ? op(E.value ? a.chip({
            item: le,
            index: Y,
            props: Te
          }) : a.selection({
            item: le,
            index: Y
          })) : void 0;
          if (!(ie && !ge))
            return I("div", {
              key: le.value,
              class: Ie(["v-combobox__selection", Y === f.value && ["v-combobox__selection--selected", b.value]]),
              style: Xe(Y === f.value ? p.value : {})
            }, [E.value ? a.chip ? _(Wt, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: le.title
                }
              }
            }, {
              default: () => [ge]
            }) : _(ed, He({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: le.title,
              disabled: le.props.disabled
            }, Te), null) : ge ?? I("span", {
              class: "v-combobox__selection-text"
            }, [le.title, e.multiple && Y < y.value.length - 1 && I("span", {
              class: "v-combobox__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var le = arguments.length, Y = new Array(le), Ce = 0; Ce < le; Ce++)
            Y[Ce] = arguments[Ce];
          return I(Qe, null, [a["append-inner"]?.(...Y), (!e.hideNoData || e.items.length) && e.menuIcon ? _(pn, {
            class: "v-combobox__menu-icon",
            color: i.value?.fieldIconColor,
            icon: e.menuIcon,
            onMousedown: se,
            onClick: ST,
            "aria-label": r(H.value),
            title: r(H.value),
            tabindex: "-1"
          }, null) : void 0]);
        }
      });
    }), pi({
      isFocused: o,
      isPristine: l,
      menu: N,
      search: P,
      selectionIndex: f,
      filteredItems: T,
      select: z
    }, i);
  }
}), Hj = Be({
  modelValue: null,
  color: String,
  cancelText: {
    type: String,
    default: "$vuetify.confirmEdit.cancel"
  },
  okText: {
    type: String,
    default: "$vuetify.confirmEdit.ok"
  },
  disabled: {
    type: [Boolean, Array],
    default: void 0
  },
  hideActions: Boolean
}, "VConfirmEdit"), zj = We()({
  name: "VConfirmEdit",
  props: Hj(),
  emits: {
    cancel: () => !0,
    save: (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), i = Se();
    Zn(() => {
      i.value = structuredClone(Ot(r.value));
    });
    const {
      t: o
    } = ua(), l = W(() => fr(r.value, i.value));
    function s(w) {
      return typeof e.disabled == "boolean" ? e.disabled : Array.isArray(e.disabled) ? e.disabled.includes(w) : l.value;
    }
    const d = W(() => s("save")), u = W(() => s("cancel"));
    function f() {
      r.value = i.value, n("save", i.value);
    }
    function h() {
      i.value = structuredClone(Ot(r.value)), n("cancel");
    }
    function g(w) {
      return I(Qe, null, [_(un, He({
        disabled: u.value,
        variant: "text",
        color: e.color,
        onClick: h,
        text: o(e.cancelText)
      }, w), null), _(un, He({
        disabled: d.value,
        variant: "text",
        color: e.color,
        onClick: f,
        text: o(e.okText)
      }, w), null)]);
    }
    let v = !1;
    return Ge(() => I(Qe, null, [a.default?.({
      model: i,
      save: f,
      cancel: h,
      isPristine: l.value,
      get actions() {
        return v = !0, g;
      }
    }), !e.hideActions && !v && g()])), {
      save: f,
      cancel: h,
      isPristine: l
    };
  }
}), UP = Be({
  expandOnClick: Boolean,
  showExpand: Boolean,
  expanded: {
    type: Array,
    default: () => []
  }
}, "DataTable-expand"), $P = Symbol.for("vuetify:datatable:expanded");
function Ep(e) {
  const t = we(() => e.expandOnClick), n = kt(e, "expanded", e.expanded, (l) => new Set(l), (l) => [...l.values()]);
  function a(l, s) {
    const d = new Set(n.value);
    s ? d.add(l.value) : d.delete(l.value), n.value = d;
  }
  function r(l) {
    return n.value.has(l.value);
  }
  function i(l) {
    a(l, !r(l));
  }
  const o = {
    expand: a,
    expanded: n,
    expandOnClick: t,
    isExpanded: r,
    toggleExpand: i
  };
  return Nn($P, o), o;
}
function qP() {
  const e = Gt($P);
  if (!e) throw new Error("foo");
  return e;
}
const U0 = Be({
  groupBy: {
    type: Array,
    default: () => []
  }
}, "DataTable-group"), HP = Symbol.for("vuetify:data-table-group");
function $0(e) {
  return {
    groupBy: kt(e, "groupBy")
  };
}
function Pp(e) {
  const {
    disableSort: t,
    groupBy: n,
    sortBy: a
  } = e, r = Se(/* @__PURE__ */ new Set()), i = W(() => n.value.map((u) => ({
    ...u,
    order: u.order ?? !1
  })).concat(t?.value ? [] : a.value));
  function o(u) {
    return r.value.has(u.id);
  }
  function l(u) {
    const f = new Set(r.value);
    o(u) ? f.delete(u.id) : f.add(u.id), r.value = f;
  }
  function s(u) {
    function f(h) {
      const g = [];
      for (const v of h.items)
        "type" in v && v.type === "group" ? g.push(...f(v)) : g.push(v);
      return [...new Set(g)];
    }
    return f({
      items: u
    });
  }
  const d = {
    sortByWithGroups: i,
    toggleGroup: l,
    opened: r,
    groupBy: n,
    extractRows: s,
    isGroupOpen: o
  };
  return Nn(HP, d), d;
}
function zP() {
  const e = Gt(HP);
  if (!e) throw new Error("Missing group!");
  return e;
}
function Wj(e, t) {
  if (!e.length) return [];
  const n = /* @__PURE__ */ new Map();
  for (const a of e) {
    const r = Jl(a.raw, t);
    n.has(r) || n.set(r, []), n.get(r).push(a);
  }
  return n;
}
function WP(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "root";
  if (!t.length) return [];
  const r = Wj(e, t[0]), i = [], o = t.slice(1);
  return r.forEach((l, s) => {
    const d = t[0], u = `${a}_${d}_${s}`;
    i.push({
      depth: n,
      id: u,
      key: d,
      value: s,
      items: o.length ? WP(l, o, n + 1, u) : l,
      type: "group"
    });
  }), i;
}
function jP(e, t) {
  const n = [];
  for (const a of e)
    "type" in a && a.type === "group" ? (a.value != null && n.push(a), (t.has(a.id) || a.value == null) && n.push(...jP(a.items, t))) : n.push(a);
  return n;
}
function Op(e, t, n) {
  return {
    flatItems: W(() => {
      if (!t.value.length) return e.value;
      const r = WP(e.value, t.value.map((i) => i.key));
      return jP(r, n.value);
    })
  };
}
function Dp(e) {
  let {
    page: t,
    itemsPerPage: n,
    sortBy: a,
    groupBy: r,
    search: i
  } = e;
  const o = ya("VDataTable"), l = () => ({
    page: t.value,
    itemsPerPage: n.value,
    sortBy: a.value,
    groupBy: r.value,
    search: i.value
  });
  let s = null;
  nt(l, (d) => {
    fr(s, d) || (s && s.search !== d.search && (t.value = 1), o.emit("update:options", d), s = d);
  }, {
    deep: !0,
    immediate: !0
  });
}
const q0 = Be({
  page: {
    type: [Number, String],
    default: 1
  },
  itemsPerPage: {
    type: [Number, String],
    default: 10
  }
}, "DataTable-paginate"), KP = Symbol.for("vuetify:data-table-pagination");
function H0(e) {
  const t = kt(e, "page", void 0, (a) => Number(a ?? 1)), n = kt(e, "itemsPerPage", void 0, (a) => Number(a ?? 10));
  return {
    page: t,
    itemsPerPage: n
  };
}
function z0(e) {
  const {
    page: t,
    itemsPerPage: n,
    itemsLength: a
  } = e, r = W(() => n.value === -1 ? 0 : n.value * (t.value - 1)), i = W(() => n.value === -1 ? a.value : Math.min(a.value, r.value + n.value)), o = W(() => n.value === -1 || a.value === 0 ? 1 : Math.ceil(a.value / n.value));
  nt([t, o], () => {
    t.value > o.value && (t.value = o.value);
  });
  function l(h) {
    n.value = h, t.value = 1;
  }
  function s() {
    t.value = Pn(t.value + 1, 1, o.value);
  }
  function d() {
    t.value = Pn(t.value - 1, 1, o.value);
  }
  function u(h) {
    t.value = Pn(h, 1, o.value);
  }
  const f = {
    page: t,
    itemsPerPage: n,
    startIndex: r,
    stopIndex: i,
    pageCount: o,
    itemsLength: a,
    nextPage: s,
    prevPage: d,
    setPage: u,
    setItemsPerPage: l
  };
  return Nn(KP, f), f;
}
function jj() {
  const e = Gt(KP);
  if (!e) throw new Error("Missing pagination!");
  return e;
}
function YP(e) {
  const t = ya("usePaginatedItems"), {
    items: n,
    startIndex: a,
    stopIndex: r,
    itemsPerPage: i
  } = e, o = W(() => i.value <= 0 ? n.value : n.value.slice(a.value, r.value));
  return nt(o, (l) => {
    t.emit("update:currentItems", l);
  }, {
    immediate: !0
  }), {
    paginatedItems: o
  };
}
const Kj = {
  showSelectAll: !1,
  allSelected: () => [],
  select: (e) => {
    let {
      items: t,
      value: n
    } = e;
    return new Set(n ? [t[0]?.value] : []);
  },
  selectAll: (e) => {
    let {
      selected: t
    } = e;
    return t;
  }
}, GP = {
  showSelectAll: !0,
  allSelected: (e) => {
    let {
      currentPage: t
    } = e;
    return t;
  },
  select: (e) => {
    let {
      items: t,
      value: n,
      selected: a
    } = e;
    for (const r of t)
      n ? a.add(r.value) : a.delete(r.value);
    return a;
  },
  selectAll: (e) => {
    let {
      value: t,
      currentPage: n,
      selected: a
    } = e;
    return GP.select({
      items: n,
      value: t,
      selected: a
    });
  }
}, QP = {
  showSelectAll: !0,
  allSelected: (e) => {
    let {
      allItems: t
    } = e;
    return t;
  },
  select: (e) => {
    let {
      items: t,
      value: n,
      selected: a
    } = e;
    for (const r of t)
      n ? a.add(r.value) : a.delete(r.value);
    return a;
  },
  selectAll: (e) => {
    let {
      value: t,
      allItems: n,
      selected: a
    } = e;
    return QP.select({
      items: n,
      value: t,
      selected: a
    });
  }
}, JP = Be({
  showSelect: Boolean,
  selectStrategy: {
    type: [String, Object],
    default: "page"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  valueComparator: {
    type: Function,
    default: fr
  }
}, "DataTable-select"), XP = Symbol.for("vuetify:data-table-selection");
function Bp(e, t) {
  let {
    allItems: n,
    currentPage: a
  } = t;
  const r = kt(e, "modelValue", e.modelValue, (y) => new Set(Xn(y).map((S) => n.value.find((E) => e.valueComparator(S, E.value))?.value ?? S)), (y) => [...y.values()]), i = W(() => n.value.filter((y) => y.selectable)), o = W(() => a.value.filter((y) => y.selectable)), l = W(() => {
    if (typeof e.selectStrategy == "object") return e.selectStrategy;
    switch (e.selectStrategy) {
      case "single":
        return Kj;
      case "all":
        return QP;
      case "page":
      default:
        return GP;
    }
  }), s = ot(null);
  function d(y) {
    return Xn(y).every((S) => r.value.has(S.value));
  }
  function u(y) {
    return Xn(y).some((S) => r.value.has(S.value));
  }
  function f(y, S) {
    const E = l.value.select({
      items: y,
      value: S,
      selected: new Set(r.value)
    });
    r.value = E;
  }
  function h(y, S, E) {
    const C = [];
    if (S = S ?? a.value.findIndex((D) => D.value === y.value), e.selectStrategy !== "single" && E?.shiftKey && s.value !== null) {
      const [D, P] = [s.value, S].sort((O, T) => O - T);
      C.push(...a.value.slice(D, P + 1).filter((O) => O.selectable));
    } else
      C.push(y), s.value = S;
    f(C, !d([y]));
  }
  function g(y) {
    const S = l.value.selectAll({
      value: y,
      allItems: i.value,
      currentPage: o.value,
      selected: new Set(r.value)
    });
    r.value = S;
  }
  const v = W(() => r.value.size > 0), w = W(() => {
    const y = l.value.allSelected({
      allItems: i.value,
      currentPage: o.value
    });
    return !!y.length && d(y);
  }), b = we(() => l.value.showSelectAll), p = {
    toggleSelect: h,
    select: f,
    selectAll: g,
    isSelected: d,
    isSomeSelected: u,
    someSelected: v,
    allSelected: w,
    showSelectAll: b,
    lastSelectedIndex: s,
    selectStrategy: l
  };
  return Nn(XP, p), p;
}
function Vp() {
  const e = Gt(XP);
  if (!e) throw new Error("Missing selection!");
  return e;
}
const ZP = Be({
  sortBy: {
    type: Array,
    default: () => []
  },
  customKeySort: Object,
  multiSort: Boolean,
  mustSort: Boolean
}, "DataTable-sort"), eO = Symbol.for("vuetify:data-table-sort");
function Mp(e) {
  const t = kt(e, "sortBy"), n = we(() => e.mustSort), a = we(() => e.multiSort);
  return {
    sortBy: t,
    mustSort: n,
    multiSort: a
  };
}
function Rp(e) {
  const {
    sortBy: t,
    mustSort: n,
    multiSort: a,
    page: r
  } = e, i = (s) => {
    if (s.key == null) return;
    let d = t.value.map((f) => ({
      ...f
    })) ?? [];
    const u = d.find((f) => f.key === s.key);
    u ? u.order === "desc" ? n.value && d.length === 1 ? u.order = "asc" : d = d.filter((f) => f.key !== s.key) : u.order = "desc" : a.value ? d.push({
      key: s.key,
      order: "asc"
    }) : d = [{
      key: s.key,
      order: "asc"
    }], t.value = d, r && (r.value = 1);
  };
  function o(s) {
    return !!t.value.find((d) => d.key === s.key);
  }
  const l = {
    sortBy: t,
    toggleSort: i,
    isSorted: o
  };
  return Nn(eO, l), l;
}
function tO() {
  const e = Gt(eO);
  if (!e) throw new Error("Missing sort!");
  return e;
}
function W0(e, t, n, a) {
  const r = ua();
  return {
    sortedItems: W(() => n.value.length ? Yj(t.value, n.value, r.current.value, {
      transform: a?.transform,
      sortFunctions: {
        ...e.customKeySort,
        ...a?.sortFunctions?.value
      },
      sortRawFunctions: a?.sortRawFunctions?.value
    }) : t.value)
  };
}
function Yj(e, t, n, a) {
  const r = new Intl.Collator(n, {
    sensitivity: "accent",
    usage: "sort"
  });
  return e.map((o) => [o, a?.transform ? a.transform(o) : o]).sort((o, l) => {
    for (let s = 0; s < t.length; s++) {
      let d = !1;
      const u = t[s].key, f = t[s].order ?? "asc";
      if (f === !1) continue;
      let h = Jl(o[1], u), g = Jl(l[1], u), v = o[0].raw, w = l[0].raw;
      if (f === "desc" && ([h, g] = [g, h], [v, w] = [w, v]), a?.sortRawFunctions?.[u]) {
        const b = a.sortRawFunctions[u](v, w);
        if (b == null) continue;
        if (d = !0, b) return b;
      }
      if (a?.sortFunctions?.[u]) {
        const b = a.sortFunctions[u](h, g);
        if (b == null) continue;
        if (d = !0, b) return b;
      }
      if (!d) {
        if (h instanceof Date && g instanceof Date)
          return h.getTime() - g.getTime();
        if ([h, g] = [h, g].map((b) => b != null ? b.toString().toLocaleLowerCase() : b), h !== g)
          return kh(h) && kh(g) ? 0 : kh(h) ? -1 : kh(g) ? 1 : !isNaN(h) && !isNaN(g) ? Number(h) - Number(g) : r.compare(h, g);
      }
    }
    return 0;
  }).map((o) => {
    let [l] = o;
    return l;
  });
}
const Gj = Be({
  items: {
    type: Array,
    default: () => []
  },
  itemValue: {
    type: [String, Array, Function],
    default: "id"
  },
  itemSelectable: {
    type: [String, Array, Function],
    default: null
  },
  returnObject: Boolean
}, "DataIterator-items");
function Qj(e, t) {
  const n = e.returnObject ? t : Da(t, e.itemValue), a = Da(t, e.itemSelectable, !0);
  return {
    type: "item",
    value: n,
    selectable: a,
    raw: t
  };
}
function Jj(e, t) {
  const n = [];
  for (const a of t)
    n.push(Qj(e, a));
  return n;
}
function Xj(e) {
  return {
    items: W(() => Jj(e, e.items))
  };
}
const Zj = Be({
  search: String,
  loading: Boolean,
  ...vt(),
  ...Gj(),
  ...JP(),
  ...ZP(),
  ...q0({
    itemsPerPage: 5
  }),
  ...UP(),
  ...U0(),
  ...im(),
  ...qt(),
  ...Gi({
    transition: {
      component: xf,
      hideOnLeave: !0
    }
  })
}, "VDataIterator"), eK = We()({
  name: "VDataIterator",
  props: Zj(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:expanded": (e) => !0,
    "update:currentItems": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "groupBy"), r = we(() => e.search), {
      items: i
    } = Xj(e), {
      filteredItems: o
    } = om(e, i, r, {
      transform: (K) => K.raw
    }), {
      sortBy: l,
      multiSort: s,
      mustSort: d
    } = Mp(e), {
      page: u,
      itemsPerPage: f
    } = H0(e), {
      toggleSort: h
    } = Rp({
      sortBy: l,
      multiSort: s,
      mustSort: d,
      page: u
    }), {
      sortByWithGroups: g,
      opened: v,
      extractRows: w,
      isGroupOpen: b,
      toggleGroup: p
    } = Pp({
      groupBy: a,
      sortBy: l
    }), {
      sortedItems: y
    } = W0(e, o, g, {
      transform: (K) => K.raw
    }), {
      flatItems: S
    } = Op(y, a, v), E = we(() => S.value.length), {
      startIndex: C,
      stopIndex: D,
      pageCount: P,
      prevPage: O,
      nextPage: T,
      setItemsPerPage: A,
      setPage: V
    } = z0({
      page: u,
      itemsPerPage: f,
      itemsLength: E
    }), {
      paginatedItems: M
    } = YP({
      items: S,
      startIndex: C,
      stopIndex: D,
      itemsPerPage: f
    }), B = W(() => w(M.value)), {
      isSelected: N,
      select: H,
      selectAll: j,
      toggleSelect: te
    } = Bp(e, {
      allItems: i,
      currentPage: B
    }), {
      isExpanded: de,
      toggleExpand: Z
    } = Ep(e);
    Dp({
      page: u,
      itemsPerPage: f,
      sortBy: l,
      groupBy: a,
      search: r
    });
    const F = W(() => ({
      page: u.value,
      itemsPerPage: f.value,
      sortBy: l.value,
      pageCount: P.value,
      toggleSort: h,
      prevPage: O,
      nextPage: T,
      setPage: V,
      setItemsPerPage: A,
      isSelected: N,
      select: H,
      selectAll: j,
      toggleSelect: te,
      isExpanded: de,
      toggleExpand: Z,
      isGroupOpen: b,
      toggleGroup: p,
      items: B.value,
      groupedItems: M.value
    }));
    return Ge(() => _(e.tag, {
      class: Ie(["v-data-iterator", {
        "v-data-iterator--loading": e.loading
      }, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.header?.(F.value), _(Sr, {
        transition: e.transition
      }, {
        default: () => [e.loading ? _(Jf, {
          key: "loader",
          name: "v-data-iterator",
          active: !0
        }, {
          default: (K) => n.loader?.(K)
        }) : I("div", {
          key: "items"
        }, [M.value.length ? n.default?.(F.value) : n["no-data"]?.()])]
      }), n.footer?.(F.value)]
    })), {};
  }
});
function tK() {
  const e = Se([]);
  dw(() => e.value = []);
  function t(n, a) {
    e.value[a] = n;
  }
  return {
    refs: e,
    updateRef: t
  };
}
const nK = Be({
  activeColor: String,
  start: {
    type: [Number, String],
    default: 1
  },
  modelValue: {
    type: Number,
    default: (e) => e.start
  },
  disabled: Boolean,
  length: {
    type: [Number, String],
    default: 1,
    validator: (e) => e % 1 === 0
  },
  totalVisible: [Number, String],
  firstIcon: {
    type: At,
    default: "$first"
  },
  prevIcon: {
    type: At,
    default: "$prev"
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  lastIcon: {
    type: At,
    default: "$last"
  },
  ariaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.root"
  },
  pageAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.page"
  },
  currentPageAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.currentPage"
  },
  firstAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.first"
  },
  previousAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.previous"
  },
  nextAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.next"
  },
  lastAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.last"
  },
  ellipsis: {
    type: String,
    default: "..."
  },
  showFirstLastPage: Boolean,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...Hn(),
  ...To(),
  ...qt({
    tag: "nav"
  }),
  ...sn(),
  ...Pi({
    variant: "text"
  })
}, "VPagination"), Lb = We()({
  name: "VPagination",
  props: nK(),
  emits: {
    "update:modelValue": (e) => !0,
    first: (e) => !0,
    prev: (e) => !0,
    next: (e) => !0,
    last: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = kt(e, "modelValue"), {
      t: i,
      n: o
    } = ua(), {
      isRtl: l
    } = Ra(), {
      themeClasses: s
    } = yn(e), {
      width: d
    } = mi(), u = ot(-1);
    ca(void 0, {
      scoped: !0
    });
    const {
      resizeRef: f
    } = Wi((O) => {
      if (!O.length) return;
      const {
        target: T,
        contentRect: A
      } = O[0], V = T.querySelector(".v-pagination__list > *");
      if (!V) return;
      const M = A.width, B = V.offsetWidth + parseFloat(getComputedStyle(V).marginRight) * 2;
      u.value = w(M, B);
    }), h = W(() => parseInt(e.length, 10)), g = W(() => parseInt(e.start, 10)), v = W(() => e.totalVisible != null ? parseInt(e.totalVisible, 10) : u.value >= 0 ? u.value : w(d.value, 58));
    function w(O, T) {
      const A = e.showFirstLastPage ? 5 : 3;
      return Math.max(0, Math.floor(
        // Round to two decimal places to avoid floating point errors
        Number(((O - T * A) / T).toFixed(2))
      ));
    }
    const b = W(() => {
      if (h.value <= 0 || isNaN(h.value) || h.value > Number.MAX_SAFE_INTEGER) return [];
      if (v.value <= 0) return [];
      if (v.value === 1) return [r.value];
      if (h.value <= v.value)
        return ho(h.value, g.value);
      const O = v.value % 2 === 0, T = O ? v.value / 2 : Math.floor(v.value / 2), A = O ? T : T + 1, V = h.value - T;
      if (A - r.value >= 0)
        return [...ho(Math.max(1, v.value - 1), g.value), e.ellipsis, h.value];
      if (r.value - V >= (O ? 1 : 0)) {
        const M = v.value - 1, B = h.value - M + g.value;
        return [g.value, e.ellipsis, ...ho(M, B)];
      } else {
        const M = Math.max(1, v.value - 2), B = M === 1 ? r.value : r.value - Math.ceil(M / 2) + g.value;
        return [g.value, e.ellipsis, ...ho(M, B), e.ellipsis, h.value];
      }
    });
    function p(O, T, A) {
      O.preventDefault(), r.value = T, A && a(A, T);
    }
    const {
      refs: y,
      updateRef: S
    } = tK();
    ca({
      VPaginationBtn: {
        color: we(() => e.color),
        border: we(() => e.border),
        density: we(() => e.density),
        size: we(() => e.size),
        variant: we(() => e.variant),
        rounded: we(() => e.rounded),
        elevation: we(() => e.elevation)
      }
    });
    const E = W(() => b.value.map((O, T) => {
      const A = (V) => S(V, T);
      if (typeof O == "string")
        return {
          isActive: !1,
          key: `ellipsis-${T}`,
          page: O,
          props: {
            ref: A,
            ellipsis: !0,
            icon: !0,
            disabled: !0
          }
        };
      {
        const V = O === r.value;
        return {
          isActive: V,
          key: O,
          page: o(O),
          props: {
            ref: A,
            ellipsis: !1,
            icon: !0,
            disabled: !!e.disabled || Number(e.length) < 2,
            color: V ? e.activeColor : e.color,
            "aria-current": V,
            "aria-label": i(V ? e.currentPageAriaLabel : e.pageAriaLabel, O),
            onClick: (M) => p(M, O)
          }
        };
      }
    })), C = W(() => {
      const O = !!e.disabled || r.value <= g.value, T = !!e.disabled || r.value >= g.value + h.value - 1;
      return {
        first: e.showFirstLastPage ? {
          icon: l.value ? e.lastIcon : e.firstIcon,
          onClick: (A) => p(A, g.value, "first"),
          disabled: O,
          "aria-label": i(e.firstAriaLabel),
          "aria-disabled": O
        } : void 0,
        prev: {
          icon: l.value ? e.nextIcon : e.prevIcon,
          onClick: (A) => p(A, r.value - 1, "prev"),
          disabled: O,
          "aria-label": i(e.previousAriaLabel),
          "aria-disabled": O
        },
        next: {
          icon: l.value ? e.prevIcon : e.nextIcon,
          onClick: (A) => p(A, r.value + 1, "next"),
          disabled: T,
          "aria-label": i(e.nextAriaLabel),
          "aria-disabled": T
        },
        last: e.showFirstLastPage ? {
          icon: l.value ? e.firstIcon : e.lastIcon,
          onClick: (A) => p(A, g.value + h.value - 1, "last"),
          disabled: T,
          "aria-label": i(e.lastAriaLabel),
          "aria-disabled": T
        } : void 0
      };
    });
    function D() {
      const O = r.value - g.value;
      y.value[O]?.$el.focus();
    }
    function P(O) {
      O.key === Ly.left && !e.disabled && r.value > Number(e.start) ? (r.value = r.value - 1, Vt(D)) : O.key === Ly.right && !e.disabled && r.value < g.value + h.value - 1 && (r.value = r.value + 1, Vt(D));
    }
    return Ge(() => _(e.tag, {
      ref: f,
      class: Ie(["v-pagination", s.value, e.class]),
      style: Xe(e.style),
      role: "navigation",
      "aria-label": i(e.ariaLabel),
      onKeydown: P,
      "data-test": "v-pagination-root"
    }, {
      default: () => [I("ul", {
        class: "v-pagination__list"
      }, [e.showFirstLastPage && I("li", {
        key: "first",
        class: "v-pagination__first",
        "data-test": "v-pagination-first"
      }, [n.first ? n.first(C.value.first) : _(un, He({
        _as: "VPaginationBtn"
      }, C.value.first), null)]), I("li", {
        key: "prev",
        class: "v-pagination__prev",
        "data-test": "v-pagination-prev"
      }, [n.prev ? n.prev(C.value.prev) : _(un, He({
        _as: "VPaginationBtn"
      }, C.value.prev), null)]), E.value.map((O, T) => I("li", {
        key: O.key,
        class: Ie(["v-pagination__item", {
          "v-pagination__item--is-active": O.isActive
        }]),
        "data-test": "v-pagination-item"
      }, [n.item ? n.item(O) : _(un, He({
        _as: "VPaginationBtn"
      }, O.props), {
        default: () => [O.page]
      })])), I("li", {
        key: "next",
        class: "v-pagination__next",
        "data-test": "v-pagination-next"
      }, [n.next ? n.next(C.value.next) : _(un, He({
        _as: "VPaginationBtn"
      }, C.value.next), null)]), e.showFirstLastPage && I("li", {
        key: "last",
        class: "v-pagination__last",
        "data-test": "v-pagination-last"
      }, [n.last ? n.last(C.value.last) : _(un, He({
        _as: "VPaginationBtn"
      }, C.value.last), null)])])]
    })), {};
  }
}), j0 = Be({
  prevIcon: {
    type: At,
    default: "$prev"
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  firstIcon: {
    type: At,
    default: "$first"
  },
  lastIcon: {
    type: At,
    default: "$last"
  },
  itemsPerPageText: {
    type: String,
    default: "$vuetify.dataFooter.itemsPerPageText"
  },
  pageText: {
    type: String,
    default: "$vuetify.dataFooter.pageText"
  },
  firstPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.firstPage"
  },
  prevPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.prevPage"
  },
  nextPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.nextPage"
  },
  lastPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.lastPage"
  },
  itemsPerPageOptions: {
    type: Array,
    default: () => [{
      value: 10,
      title: "10"
    }, {
      value: 25,
      title: "25"
    }, {
      value: 50,
      title: "50"
    }, {
      value: 100,
      title: "100"
    }, {
      value: -1,
      title: "$vuetify.dataFooter.itemsPerPageAll"
    }]
  },
  showCurrentPage: Boolean
}, "VDataTableFooter"), Bf = We()({
  name: "VDataTableFooter",
  props: j0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), {
      page: r,
      pageCount: i,
      startIndex: o,
      stopIndex: l,
      itemsLength: s,
      itemsPerPage: d,
      setItemsPerPage: u
    } = jj(), f = W(() => e.itemsPerPageOptions.map((h) => typeof h == "number" ? {
      value: h,
      title: h === -1 ? a("$vuetify.dataFooter.itemsPerPageAll") : String(h)
    } : {
      ...h,
      title: isNaN(Number(h.title)) ? a(h.title) : h.title
    }));
    return Ge(() => {
      const h = Lb.filterProps(e);
      return I("div", {
        class: "v-data-table-footer"
      }, [n.prepend?.(), I("div", {
        class: "v-data-table-footer__items-per-page"
      }, [I("span", {
        "aria-label": a(e.itemsPerPageText)
      }, [a(e.itemsPerPageText)]), _(R0, {
        items: f.value,
        modelValue: d.value,
        "onUpdate:modelValue": (g) => u(Number(g)),
        density: "compact",
        variant: "outlined",
        "hide-details": !0
      }, null)]), I("div", {
        class: "v-data-table-footer__info"
      }, [I("div", null, [a(e.pageText, s.value ? o.value + 1 : 0, l.value, s.value)])]), I("div", {
        class: "v-data-table-footer__pagination"
      }, [_(Lb, He({
        modelValue: r.value,
        "onUpdate:modelValue": (g) => r.value = g,
        density: "comfortable",
        "first-aria-label": e.firstPageLabel,
        "last-aria-label": e.lastPageLabel,
        length: i.value,
        "next-aria-label": e.nextPageLabel,
        "previous-aria-label": e.prevPageLabel,
        rounded: !0,
        "show-first-last-page": !0,
        "total-visible": e.showCurrentPage ? 1 : 0,
        variant: "plain"
      }, h), null)])]);
    }), {};
  }
}), H_ = Y3({
  align: {
    type: String,
    default: "start"
  },
  fixed: Boolean,
  fixedOffset: [Number, String],
  height: [Number, String],
  lastFixed: Boolean,
  noPadding: Boolean,
  tag: String,
  width: [Number, String],
  maxWidth: [Number, String],
  nowrap: Boolean
}, (e, t) => {
  let {
    slots: n
  } = t;
  const a = e.tag ?? "td";
  return _(a, {
    tabindex: "0",
    class: Ie(["v-data-table__td", {
      "v-data-table-column--fixed": e.fixed,
      "v-data-table-column--last-fixed": e.lastFixed,
      "v-data-table-column--no-padding": e.noPadding,
      "v-data-table-column--nowrap": e.nowrap
    }, `v-data-table-column--align-${e.align}`]),
    style: {
      height: ht(e.height),
      width: ht(e.width),
      maxWidth: ht(e.maxWidth),
      left: ht(e.fixedOffset || null)
    }
  }, {
    default: () => [n.default?.()]
  });
}), aK = Be({
  headers: Array
}, "DataTable-header"), nO = Symbol.for("vuetify:data-table-headers"), aO = {
  title: "",
  sortable: !1
}, rK = {
  ...aO,
  width: 48
};
function iK() {
  const t = (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : []).map((n) => ({
    element: n,
    priority: 0
  }));
  return {
    enqueue: (n, a) => {
      let r = !1;
      for (let i = 0; i < t.length; i++)
        if (t[i].priority > a) {
          t.splice(i, 0, {
            element: n,
            priority: a
          }), r = !0;
          break;
        }
      r || t.push({
        element: n,
        priority: a
      });
    },
    size: () => t.length,
    count: () => {
      let n = 0;
      if (!t.length) return 0;
      const a = Math.floor(t[0].priority);
      for (let r = 0; r < t.length; r++)
        Math.floor(t[r].priority) === a && (n += 1);
      return n;
    },
    dequeue: () => t.shift()
  };
}
function Fb(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  if (!e.children)
    t.push(e);
  else
    for (const n of e.children)
      Fb(n, t);
  return t;
}
function rO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : /* @__PURE__ */ new Set();
  for (const n of e)
    n.key && t.add(n.key), n.children && rO(n.children, t);
  return t;
}
function oK(e) {
  if (e.key) {
    if (e.key === "data-table-group") return aO;
    if (["data-table-expand", "data-table-select"].includes(e.key)) return rK;
  }
}
function K0(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return e.children ? Math.max(t, ...e.children.map((n) => K0(n, t + 1))) : t;
}
function sK(e) {
  let t = !1;
  function n(i) {
    let o = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
    if (i)
      if (o && (i.fixed = !0), i.fixed)
        if (i.children)
          for (let l = i.children.length - 1; l >= 0; l--)
            n(i.children[l], !0);
        else
          t ? isNaN(Number(i.width)) ? (`${i.key}`, void 0) : i.minWidth = Math.max(Number(i.width) || 0, Number(i.minWidth) || 0) : i.lastFixed = !0, t = !0;
      else if (i.children)
        for (let l = i.children.length - 1; l >= 0; l--)
          n(i.children[l]);
      else
        t = !1;
  }
  for (let i = e.length - 1; i >= 0; i--)
    n(e[i]);
  function a(i) {
    let o = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
    if (!i) return o;
    if (i.children) {
      i.fixedOffset = o;
      for (const l of i.children)
        o = a(l, o);
    } else i.fixed && (i.fixedOffset = o, o += parseFloat(i.width || "0") || 0);
    return o;
  }
  let r = 0;
  for (const i of e)
    r = a(i, r);
}
function lK(e, t) {
  const n = [];
  let a = 0;
  const r = iK(e);
  for (; r.size() > 0; ) {
    let o = r.count();
    const l = [];
    let s = 1;
    for (; o > 0; ) {
      const {
        element: d,
        priority: u
      } = r.dequeue(), f = t - a - K0(d);
      if (l.push({
        ...d,
        rowspan: f ?? 1,
        colspan: d.children ? Fb(d).length : 1
      }), d.children)
        for (const h of d.children) {
          const g = u % 1 + s / Math.pow(10, a + 2);
          r.enqueue(h, a + f + g);
        }
      s += 1, o -= 1;
    }
    a += 1, n.push(l);
  }
  return {
    columns: e.map((o) => Fb(o)).flat(),
    headers: n
  };
}
function iO(e) {
  const t = [];
  for (const n of e) {
    const a = {
      ...oK(n),
      ...n
    }, r = a.key ?? (typeof a.value == "string" ? a.value : null), i = a.value ?? r ?? null, o = {
      ...a,
      key: r,
      value: i,
      sortable: a.sortable ?? (a.key != null || !!a.sort),
      children: a.children ? iO(a.children) : void 0
    };
    t.push(o);
  }
  return t;
}
function Y0(e, t) {
  const n = Se([]), a = Se([]), r = Se({}), i = Se({}), o = Se({});
  Zn(() => {
    const d = (e.headers || Object.keys(e.items[0] ?? {}).map((w) => ({
      key: w,
      title: So(w)
    }))).slice(), u = rO(d);
    t?.groupBy?.value.length && !u.has("data-table-group") && d.unshift({
      key: "data-table-group",
      title: "Group"
    }), t?.showSelect?.value && !u.has("data-table-select") && d.unshift({
      key: "data-table-select"
    }), t?.showExpand?.value && !u.has("data-table-expand") && d.push({
      key: "data-table-expand"
    });
    const f = iO(d);
    sK(f);
    const h = Math.max(...f.map((w) => K0(w))) + 1, g = lK(f, h);
    n.value = g.headers, a.value = g.columns;
    const v = g.headers.flat(1);
    for (const w of v)
      w.key && (w.sortable && (w.sort && (r.value[w.key] = w.sort), w.sortRaw && (i.value[w.key] = w.sortRaw)), w.filter && (o.value[w.key] = w.filter));
  });
  const l = {
    headers: n,
    columns: a,
    sortFunctions: r,
    sortRawFunctions: i,
    filterFunctions: o
  };
  return Nn(nO, l), l;
}
function Lp() {
  const e = Gt(nO);
  if (!e) throw new Error("Missing headers!");
  return e;
}
const oO = Be({
  color: String,
  disableSort: Boolean,
  fixedHeader: Boolean,
  multiSort: Boolean,
  sortAscIcon: {
    type: At,
    default: "$sortAsc"
  },
  sortDescIcon: {
    type: At,
    default: "$sortDesc"
  },
  headerProps: {
    type: Object
  },
  /** @deprecated */
  sticky: Boolean,
  ...cc(),
  ...wp()
}, "VDataTableHeaders"), ic = We()({
  name: "VDataTableHeaders",
  props: oO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), {
      toggleSort: r,
      sortBy: i,
      isSorted: o
    } = tO(), {
      someSelected: l,
      allSelected: s,
      selectAll: d,
      showSelectAll: u
    } = Vp(), {
      columns: f,
      headers: h
    } = Lp(), {
      loaderClasses: g
    } = Qf(e);
    function v(T, A) {
      if (!(!(e.sticky || e.fixedHeader) && !T.fixed))
        return {
          position: "sticky",
          left: T.fixed ? ht(T.fixedOffset) : void 0,
          top: e.sticky || e.fixedHeader ? `calc(var(--v-table-header-height) * ${A})` : void 0
        };
    }
    function w(T, A) {
      T.key === "Enter" && !e.disableSort && r(A);
    }
    function b(T) {
      const A = i.value.find((V) => V.key === T.key);
      return A ? A.order === "asc" ? e.sortAscIcon : e.sortDescIcon : e.sortAscIcon;
    }
    const {
      backgroundColorClasses: p,
      backgroundColorStyles: y
    } = An(() => e.color), {
      displayClasses: S,
      mobile: E
    } = mi(e), C = W(() => ({
      headers: h.value,
      columns: f.value,
      toggleSort: r,
      isSorted: o,
      sortBy: i.value,
      someSelected: l.value,
      allSelected: s.value,
      selectAll: d,
      getSortIcon: b
    })), D = W(() => ["v-data-table__th", {
      "v-data-table__th--sticky": e.sticky || e.fixedHeader
    }, S.value, g.value]), P = (T) => {
      let {
        column: A,
        x: V,
        y: M
      } = T;
      const B = A.key === "data-table-select" || A.key === "data-table-expand", N = He(e.headerProps ?? {}, A.headerProps ?? {});
      return _(H_, He({
        tag: "th",
        align: A.align,
        class: [{
          "v-data-table__th--sortable": A.sortable && !e.disableSort,
          "v-data-table__th--sorted": o(A),
          "v-data-table__th--fixed": A.fixed
        }, ...D.value],
        style: {
          width: ht(A.width),
          minWidth: ht(A.minWidth),
          maxWidth: ht(A.maxWidth),
          ...v(A, M)
        },
        colspan: A.colspan,
        rowspan: A.rowspan,
        onClick: A.sortable ? () => r(A) : void 0,
        fixed: A.fixed,
        nowrap: A.nowrap,
        lastFixed: A.lastFixed,
        noPadding: B
      }, N, {
        onKeydown: (H) => A.sortable && w(H, A)
      }), {
        default: () => {
          const H = `header.${A.key}`, j = {
            column: A,
            selectAll: d,
            isSorted: o,
            toggleSort: r,
            sortBy: i.value,
            someSelected: l.value,
            allSelected: s.value,
            getSortIcon: b
          };
          return n[H] ? n[H](j) : A.key === "data-table-select" ? n["header.data-table-select"]?.(j) ?? (u.value && _(rs, {
            modelValue: s.value,
            indeterminate: l.value && !s.value,
            "onUpdate:modelValue": d
          }, null)) : I("div", {
            class: "v-data-table-header__content"
          }, [I("span", null, [A.title]), A.sortable && !e.disableSort && _(pn, {
            key: "icon",
            class: "v-data-table-header__sort-icon",
            icon: b(A)
          }, null), e.multiSort && o(A) && I("div", {
            key: "badge",
            class: Ie(["v-data-table-header__sort-badge", ...p.value]),
            style: Xe(y.value)
          }, [i.value.findIndex((te) => te.key === A.key) + 1])]);
        }
      });
    }, O = () => {
      const T = W(() => f.value.filter((V) => V?.sortable && !e.disableSort)), A = W(() => {
        if (f.value.find((M) => M.key === "data-table-select") != null)
          return s.value ? "$checkboxOn" : l.value ? "$checkboxIndeterminate" : "$checkboxOff";
      });
      return _(H_, He({
        tag: "th",
        class: [...D.value],
        colspan: h.value.length + 1
      }, e.headerProps), {
        default: () => [I("div", {
          class: "v-data-table-header__content"
        }, [_(R0, {
          chips: !0,
          class: "v-data-table__td-sort-select",
          clearable: !0,
          density: "default",
          items: T.value,
          label: a("$vuetify.dataTable.sortBy"),
          multiple: e.multiSort,
          variant: "underlined",
          "onClick:clear": () => i.value = [],
          appendIcon: A.value,
          "onClick:append": () => d(!s.value)
        }, {
          ...n,
          chip: (V) => _(ed, {
            onClick: V.item.raw?.sortable ? () => r(V.item.raw) : void 0,
            onMousedown: (M) => {
              M.preventDefault(), M.stopPropagation();
            }
          }, {
            default: () => [V.item.title, _(pn, {
              class: Ie(["v-data-table__td-sort-icon", o(V.item.raw) && "v-data-table__td-sort-icon-active"]),
              icon: b(V.item.raw),
              size: "small"
            }, null)]
          })
        })])]
      });
    };
    Ge(() => E.value ? I("tr", null, [_(O, null, null)]) : I(Qe, null, [n.headers ? n.headers(C.value) : h.value.map((T, A) => I("tr", null, [T.map((V, M) => _(P, {
      column: V,
      x: M,
      y: A
    }, null))])), e.loading && I("tr", {
      class: "v-data-table-progress"
    }, [I("th", {
      colspan: f.value.length
    }, [_(Jf, {
      name: "v-data-table-progress",
      absolute: !0,
      active: !0,
      color: typeof e.loading == "boolean" ? void 0 : e.loading,
      indeterminate: !0
    }, {
      default: n.loader
    })])])]));
  }
}), cK = Be({
  item: {
    type: Object,
    required: !0
  }
}, "VDataTableGroupHeaderRow"), uK = We()({
  name: "VDataTableGroupHeaderRow",
  props: cK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isGroupOpen: a,
      toggleGroup: r,
      extractRows: i
    } = zP(), {
      isSelected: o,
      isSomeSelected: l,
      select: s
    } = Vp(), {
      columns: d
    } = Lp(), u = W(() => i([e.item]));
    return () => I("tr", {
      class: "v-data-table-group-header-row",
      style: {
        "--v-data-table-group-header-row-depth": e.item.depth
      }
    }, [d.value.map((f) => {
      if (f.key === "data-table-group") {
        const h = a(e.item) ? "$expand" : "$next", g = () => r(e.item);
        return n["data-table-group"]?.({
          item: e.item,
          count: u.value.length,
          props: {
            icon: h,
            onClick: g
          }
        }) ?? _(H_, {
          class: "v-data-table-group-header-row__column"
        }, {
          default: () => [_(un, {
            size: "small",
            variant: "text",
            icon: h,
            onClick: g
          }, null), I("span", null, [e.item.value]), I("span", null, [ae("("), u.value.length, ae(")")])]
        });
      }
      if (f.key === "data-table-select") {
        const h = o(u.value), g = l(u.value) && !h, v = (w) => s(u.value, w);
        return n["data-table-select"]?.({
          props: {
            modelValue: h,
            indeterminate: g,
            "onUpdate:modelValue": v
          }
        }) ?? I("td", null, [_(rs, {
          modelValue: h,
          indeterminate: g,
          "onUpdate:modelValue": v
        }, null)]);
      }
      return I("td", null, null);
    })]);
  }
}), dK = Be({
  index: Number,
  item: Object,
  cellProps: [Object, Function],
  onClick: nr(),
  onContextmenu: nr(),
  onDblclick: nr(),
  ...cc()
}, "VDataTableRow"), G0 = We()({
  name: "VDataTableRow",
  props: dK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      displayClasses: a,
      mobile: r
    } = mi(e, "v-data-table__tr"), {
      isSelected: i,
      toggleSelect: o,
      someSelected: l,
      allSelected: s,
      selectAll: d
    } = Vp(), {
      isExpanded: u,
      toggleExpand: f
    } = qP(), {
      toggleSort: h,
      sortBy: g,
      isSorted: v
    } = tO(), {
      columns: w
    } = Lp();
    Ge(() => I("tr", {
      class: Ie(["v-data-table__tr", {
        "v-data-table__tr--clickable": !!(e.onClick || e.onContextmenu || e.onDblclick)
      }, a.value]),
      onClick: e.onClick,
      onContextmenu: e.onContextmenu,
      onDblclick: e.onDblclick
    }, [e.item && w.value.map((b, p) => {
      const y = e.item, S = `item.${b.key}`, E = `header.${b.key}`, C = {
        index: e.index,
        item: y.raw,
        internalItem: y,
        value: Jl(y.columns, b.key),
        column: b,
        isSelected: i,
        toggleSelect: o,
        isExpanded: u,
        toggleExpand: f
      }, D = {
        column: b,
        selectAll: d,
        isSorted: v,
        toggleSort: h,
        sortBy: g.value,
        someSelected: l.value,
        allSelected: s.value,
        getSortIcon: () => ""
      }, P = typeof e.cellProps == "function" ? e.cellProps({
        index: C.index,
        item: C.item,
        internalItem: C.internalItem,
        value: C.value,
        column: b
      }) : e.cellProps, O = typeof b.cellProps == "function" ? b.cellProps({
        index: C.index,
        item: C.item,
        internalItem: C.internalItem,
        value: C.value
      }) : b.cellProps;
      return _(H_, He({
        align: b.align,
        class: {
          "v-data-table__td--expanded-row": b.key === "data-table-expand",
          "v-data-table__td--select-row": b.key === "data-table-select"
        },
        fixed: b.fixed,
        fixedOffset: b.fixedOffset,
        lastFixed: b.lastFixed,
        maxWidth: r.value ? void 0 : b.maxWidth,
        noPadding: b.key === "data-table-select" || b.key === "data-table-expand",
        nowrap: b.nowrap,
        width: r.value ? void 0 : b.width
      }, P, O), {
        default: () => {
          if (b.key === "data-table-select")
            return n["item.data-table-select"]?.({
              ...C,
              props: {
                disabled: !y.selectable,
                modelValue: i([y]),
                onClick: ia(() => o(y), ["stop"])
              }
            }) ?? _(rs, {
              disabled: !y.selectable,
              modelValue: i([y]),
              onClick: ia((A) => o(y, e.index, A), ["stop"])
            }, null);
          if (b.key === "data-table-expand")
            return n["item.data-table-expand"]?.({
              ...C,
              props: {
                icon: u(y) ? "$collapse" : "$expand",
                size: "small",
                variant: "text",
                onClick: ia(() => f(y), ["stop"])
              }
            }) ?? _(un, {
              icon: u(y) ? "$collapse" : "$expand",
              size: "small",
              variant: "text",
              onClick: ia(() => f(y), ["stop"])
            }, null);
          if (n[S] && !r.value) return n[S](C);
          const T = q(C.value);
          return r.value ? I(Qe, null, [I("div", {
            class: "v-data-table__td-title"
          }, [n[E]?.(D) ?? b.title]), I("div", {
            class: "v-data-table__td-value"
          }, [n[S]?.(C) ?? T])]) : T;
        }
      });
    })]));
  }
}), sO = Be({
  loading: [Boolean, String],
  loadingText: {
    type: String,
    default: "$vuetify.dataIterator.loadingText"
  },
  hideNoData: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  noDataText: {
    type: String,
    default: "$vuetify.noDataText"
  },
  rowProps: [Object, Function],
  cellProps: [Object, Function],
  ...cc()
}, "VDataTableRows"), oc = We()({
  name: "VDataTableRows",
  inheritAttrs: !1,
  props: sO(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      columns: r
    } = Lp(), {
      expandOnClick: i,
      toggleExpand: o,
      isExpanded: l
    } = qP(), {
      isSelected: s,
      toggleSelect: d
    } = Vp(), {
      toggleGroup: u,
      isGroupOpen: f
    } = zP(), {
      t: h
    } = ua(), {
      mobile: g
    } = mi(e);
    return Ge(() => e.loading && (!e.items.length || a.loading) ? I("tr", {
      class: "v-data-table-rows-loading",
      key: "loading"
    }, [I("td", {
      colspan: r.value.length
    }, [a.loading?.() ?? h(e.loadingText)])]) : !e.loading && !e.items.length && !e.hideNoData ? I("tr", {
      class: "v-data-table-rows-no-data",
      key: "no-data"
    }, [I("td", {
      colspan: r.value.length
    }, [a["no-data"]?.() ?? h(e.noDataText)])]) : I(Qe, null, [e.items.map((v, w) => {
      if (v.type === "group") {
        const y = {
          index: w,
          item: v,
          columns: r.value,
          isExpanded: l,
          toggleExpand: o,
          isSelected: s,
          toggleSelect: d,
          toggleGroup: u,
          isGroupOpen: f
        };
        return a["group-header"] ? a["group-header"](y) : _(uK, He({
          key: `group-header_${v.id}`,
          item: v
        }, ZS(n, ":group-header", () => y)), a);
      }
      const b = {
        index: w,
        item: v.raw,
        internalItem: v,
        columns: r.value,
        isExpanded: l,
        toggleExpand: o,
        isSelected: s,
        toggleSelect: d
      }, p = {
        ...b,
        props: He({
          key: `item_${v.key ?? v.index}`,
          onClick: i.value ? () => {
            o(v);
          } : void 0,
          index: w,
          item: v,
          cellProps: e.cellProps,
          mobile: g.value
        }, ZS(n, ":row", () => b), typeof e.rowProps == "function" ? e.rowProps({
          item: b.item,
          index: b.index,
          internalItem: b.internalItem
        }) : e.rowProps)
      };
      return I(Qe, {
        key: p.props.key
      }, [a.item ? a.item(p) : _(G0, p.props, a), l(v) && a["expanded-row"]?.(b)]);
    })])), {};
  }
}), lO = Be({
  fixedHeader: Boolean,
  fixedFooter: Boolean,
  height: [Number, String],
  hover: Boolean,
  ...vt(),
  ...Qa(),
  ...qt(),
  ...sn()
}, "VTable"), sc = We()({
  name: "VTable",
  props: lO(),
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      densityClasses: i
    } = Ar(e);
    return Ge(() => _(e.tag, {
      class: Ie(["v-table", {
        "v-table--fixed-height": !!e.height,
        "v-table--fixed-header": e.fixedHeader,
        "v-table--fixed-footer": e.fixedFooter,
        "v-table--has-top": !!n.top,
        "v-table--has-bottom": !!n.bottom,
        "v-table--hover": e.hover
      }, r.value, i.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.top?.(), n.default ? I("div", {
        class: "v-table__wrapper",
        style: {
          height: ht(e.height)
        }
      }, [I("table", null, [n.default()])]) : n.wrapper?.(), n.bottom?.()]
    })), {};
  }
}), fK = Be({
  items: {
    type: Array,
    default: () => []
  },
  itemValue: {
    type: [String, Array, Function],
    default: "id"
  },
  itemSelectable: {
    type: [String, Array, Function],
    default: null
  },
  rowProps: [Object, Function],
  cellProps: [Object, Function],
  returnObject: Boolean
}, "DataTable-items");
function mK(e, t, n, a) {
  const r = e.returnObject ? t : Da(t, e.itemValue), i = Da(t, e.itemSelectable, !0), o = a.reduce((l, s) => (s.key != null && (l[s.key] = Da(t, s.value)), l), {});
  return {
    type: "item",
    key: e.returnObject ? Da(t, e.itemValue) : r,
    index: n,
    value: r,
    selectable: i,
    columns: o,
    raw: t
  };
}
function hK(e, t, n) {
  return t.map((a, r) => mK(e, a, r, n));
}
function Q0(e, t) {
  return {
    items: W(() => hK(e, e.items, t.value))
  };
}
const J0 = Be({
  ...sO(),
  hideDefaultBody: Boolean,
  hideDefaultFooter: Boolean,
  hideDefaultHeader: Boolean,
  width: [String, Number],
  search: String,
  ...UP(),
  ...U0(),
  ...aK(),
  ...fK(),
  ...JP(),
  ...ZP(),
  ...oO(),
  ...lO()
}, "DataTable"), _K = Be({
  ...q0(),
  ...J0(),
  ...im(),
  ...j0()
}, "VDataTable"), pK = We()({
  name: "VDataTable",
  props: _K(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:expanded": (e) => !0,
    "update:currentItems": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = $0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = Mp(e), {
      page: s,
      itemsPerPage: d
    } = H0(e), {
      disableSort: u
    } = $u(e), {
      columns: f,
      headers: h,
      sortFunctions: g,
      sortRawFunctions: v,
      filterFunctions: w
    } = Y0(e, {
      groupBy: r,
      showSelect: we(() => e.showSelect),
      showExpand: we(() => e.showExpand)
    }), {
      items: b
    } = Q0(e, f), p = we(() => e.search), {
      filteredItems: y
    } = om(e, b, p, {
      transform: (z) => z.columns,
      customKeyFilter: w
    }), {
      toggleSort: S
    } = Rp({
      sortBy: i,
      multiSort: o,
      mustSort: l,
      page: s
    }), {
      sortByWithGroups: E,
      opened: C,
      extractRows: D,
      isGroupOpen: P,
      toggleGroup: O
    } = Pp({
      groupBy: r,
      sortBy: i,
      disableSort: u
    }), {
      sortedItems: T
    } = W0(e, y, E, {
      transform: (z) => ({
        ...z.raw,
        ...z.columns
      }),
      sortFunctions: g,
      sortRawFunctions: v
    }), {
      flatItems: A
    } = Op(T, r, C), V = W(() => A.value.length), {
      startIndex: M,
      stopIndex: B,
      pageCount: N,
      setItemsPerPage: H
    } = z0({
      page: s,
      itemsPerPage: d,
      itemsLength: V
    }), {
      paginatedItems: j
    } = YP({
      items: A,
      startIndex: M,
      stopIndex: B,
      itemsPerPage: d
    }), te = W(() => D(j.value)), {
      isSelected: de,
      select: Z,
      selectAll: F,
      toggleSelect: K,
      someSelected: se,
      allSelected: X
    } = Bp(e, {
      allItems: b,
      currentPage: te
    }), {
      isExpanded: he,
      toggleExpand: ve
    } = Ep(e);
    Dp({
      page: s,
      itemsPerPage: d,
      sortBy: i,
      groupBy: r,
      search: p
    }), ca({
      VDataTableRows: {
        hideNoData: we(() => e.hideNoData),
        noDataText: we(() => e.noDataText),
        loading: we(() => e.loading),
        loadingText: we(() => e.loadingText)
      }
    });
    const pe = W(() => ({
      page: s.value,
      itemsPerPage: d.value,
      sortBy: i.value,
      pageCount: N.value,
      toggleSort: S,
      setItemsPerPage: H,
      someSelected: se.value,
      allSelected: X.value,
      isSelected: de,
      select: Z,
      selectAll: F,
      toggleSelect: K,
      isExpanded: he,
      toggleExpand: ve,
      isGroupOpen: P,
      toggleGroup: O,
      items: te.value.map((z) => z.raw),
      internalItems: te.value,
      groupedItems: j.value,
      columns: f.value,
      headers: h.value
    }));
    return Ge(() => {
      const z = Bf.filterProps(e), ke = ic.filterProps(e), Me = oc.filterProps(e), Le = sc.filterProps(e);
      return _(sc, He({
        class: ["v-data-table", {
          "v-data-table--show-select": e.showSelect,
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, Le, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(pe.value),
        default: () => a.default ? a.default(pe.value) : I(Qe, null, [a.colgroup?.(pe.value), !e.hideDefaultHeader && I("thead", {
          key: "thead"
        }, [_(ic, ke, a)]), a.thead?.(pe.value), !e.hideDefaultBody && I("tbody", null, [a["body.prepend"]?.(pe.value), a.body ? a.body(pe.value) : _(oc, He(n, Me, {
          items: j.value
        }), a), a["body.append"]?.(pe.value)]), a.tbody?.(pe.value), a.tfoot?.(pe.value)]),
        bottom: () => a.bottom ? a.bottom(pe.value) : !e.hideDefaultFooter && I(Qe, null, [_(Go, null, null), _(Bf, z, {
          prepend: a["footer.prepend"]
        })])
      });
    }), {};
  }
}), vK = Be({
  ...la(J0(), ["hideDefaultFooter"]),
  ...U0(),
  ...bP(),
  ...im()
}, "VDataTableVirtual"), gK = We()({
  name: "VDataTableVirtual",
  props: vK(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:expanded": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = $0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = Mp(e), {
      disableSort: s
    } = $u(e), {
      columns: d,
      headers: u,
      filterFunctions: f,
      sortFunctions: h,
      sortRawFunctions: g
    } = Y0(e, {
      groupBy: r,
      showSelect: we(() => e.showSelect),
      showExpand: we(() => e.showExpand)
    }), {
      items: v
    } = Q0(e, d), w = we(() => e.search), {
      filteredItems: b
    } = om(e, v, w, {
      transform: (Le) => Le.columns,
      customKeyFilter: f
    }), {
      toggleSort: p
    } = Rp({
      sortBy: i,
      multiSort: o,
      mustSort: l
    }), {
      sortByWithGroups: y,
      opened: S,
      extractRows: E,
      isGroupOpen: C,
      toggleGroup: D
    } = Pp({
      groupBy: r,
      sortBy: i,
      disableSort: s
    }), {
      sortedItems: P
    } = W0(e, b, y, {
      transform: (Le) => ({
        ...Le.raw,
        ...Le.columns
      }),
      sortFunctions: h,
      sortRawFunctions: g
    }), {
      flatItems: O
    } = Op(P, r, S), T = W(() => E(O.value)), {
      isSelected: A,
      select: V,
      selectAll: M,
      toggleSelect: B,
      someSelected: N,
      allSelected: H
    } = Bp(e, {
      allItems: T,
      currentPage: T
    }), {
      isExpanded: j,
      toggleExpand: te
    } = Ep(e), {
      containerRef: de,
      markerRef: Z,
      paddingTop: F,
      paddingBottom: K,
      computedItems: se,
      handleItemResize: X,
      handleScroll: he,
      handleScrollend: ve,
      calculateVisibleItems: pe,
      scrollToIndex: z
    } = wP(e, O), ke = W(() => se.value.map((Le) => Le.raw));
    Dp({
      sortBy: i,
      page: ot(1),
      itemsPerPage: ot(-1),
      groupBy: r,
      search: w
    }), ca({
      VDataTableRows: {
        hideNoData: we(() => e.hideNoData),
        noDataText: we(() => e.noDataText),
        loading: we(() => e.loading),
        loadingText: we(() => e.loadingText)
      }
    });
    const Me = W(() => ({
      sortBy: i.value,
      toggleSort: p,
      someSelected: N.value,
      allSelected: H.value,
      isSelected: A,
      select: V,
      selectAll: M,
      toggleSelect: B,
      isExpanded: j,
      toggleExpand: te,
      isGroupOpen: C,
      toggleGroup: D,
      items: T.value.map((Le) => Le.raw),
      internalItems: T.value,
      groupedItems: O.value,
      columns: d.value,
      headers: u.value
    }));
    return Ge(() => {
      const Le = ic.filterProps(e), ce = oc.filterProps(e), ne = sc.filterProps(e);
      return _(sc, He({
        class: ["v-data-table", {
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, ne, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(Me.value),
        wrapper: () => I("div", {
          ref: de,
          onScrollPassive: he,
          onScrollend: ve,
          class: "v-table__wrapper",
          style: {
            height: ht(e.height)
          }
        }, [I("table", null, [a.colgroup?.(Me.value), !e.hideDefaultHeader && I("thead", {
          key: "thead"
        }, [_(ic, Le, a)]), a.thead?.(Me.value), !e.hideDefaultBody && I("tbody", {
          key: "tbody"
        }, [I("tr", {
          ref: Z,
          style: {
            height: ht(F.value),
            border: 0
          }
        }, [I("td", {
          colspan: d.value.length,
          style: {
            height: 0,
            border: 0
          }
        }, null)]), a["body.prepend"]?.(Me.value), _(oc, He(n, ce, {
          items: ke.value
        }), {
          ...a,
          item: (G) => _(yP, {
            key: G.internalItem.index,
            renderless: !0,
            "onUpdate:height": (le) => X(G.internalItem.index, le)
          }, {
            default: (le) => {
              let {
                itemRef: Y
              } = le;
              return a.item?.({
                ...G,
                itemRef: Y
              }) ?? _(G0, He(G.props, {
                ref: Y,
                key: G.internalItem.index,
                index: G.internalItem.index
              }), a);
            }
          })
        }), a["body.append"]?.(Me.value), I("tr", {
          style: {
            height: ht(K.value),
            border: 0
          }
        }, [I("td", {
          colspan: d.value.length,
          style: {
            height: 0,
            border: 0
          }
        }, null)])]), a.tbody?.(Me.value), a.tfoot?.(Me.value)])]),
        bottom: () => a.bottom?.(Me.value)
      });
    }), {
      calculateVisibleItems: pe,
      scrollToIndex: z
    };
  }
}), yK = Be({
  itemsLength: {
    type: [Number, String],
    required: !0
  },
  ...q0(),
  ...J0(),
  ...j0()
}, "VDataTableServer"), bK = We()({
  name: "VDataTableServer",
  props: yK(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:expanded": (e) => !0,
    "update:groupBy": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = $0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = Mp(e), {
      page: s,
      itemsPerPage: d
    } = H0(e), {
      disableSort: u
    } = $u(e), f = W(() => parseInt(e.itemsLength, 10)), {
      columns: h,
      headers: g
    } = Y0(e, {
      groupBy: r,
      showSelect: we(() => e.showSelect),
      showExpand: we(() => e.showExpand)
    }), {
      items: v
    } = Q0(e, h), {
      toggleSort: w
    } = Rp({
      sortBy: i,
      multiSort: o,
      mustSort: l,
      page: s
    }), {
      opened: b,
      isGroupOpen: p,
      toggleGroup: y,
      extractRows: S
    } = Pp({
      groupBy: r,
      sortBy: i,
      disableSort: u
    }), {
      pageCount: E,
      setItemsPerPage: C
    } = z0({
      page: s,
      itemsPerPage: d,
      itemsLength: f
    }), {
      flatItems: D
    } = Op(v, r, b), {
      isSelected: P,
      select: O,
      selectAll: T,
      toggleSelect: A,
      someSelected: V,
      allSelected: M
    } = Bp(e, {
      allItems: v,
      currentPage: v
    }), {
      isExpanded: B,
      toggleExpand: N
    } = Ep(e), H = W(() => S(v.value));
    Dp({
      page: s,
      itemsPerPage: d,
      sortBy: i,
      groupBy: r,
      search: we(() => e.search)
    }), Nn("v-data-table", {
      toggleSort: w,
      sortBy: i
    }), ca({
      VDataTableRows: {
        hideNoData: we(() => e.hideNoData),
        noDataText: we(() => e.noDataText),
        loading: we(() => e.loading),
        loadingText: we(() => e.loadingText)
      }
    });
    const j = W(() => ({
      page: s.value,
      itemsPerPage: d.value,
      sortBy: i.value,
      pageCount: E.value,
      toggleSort: w,
      setItemsPerPage: C,
      someSelected: V.value,
      allSelected: M.value,
      isSelected: P,
      select: O,
      selectAll: T,
      toggleSelect: A,
      isExpanded: B,
      toggleExpand: N,
      isGroupOpen: p,
      toggleGroup: y,
      items: H.value.map((te) => te.raw),
      internalItems: H.value,
      groupedItems: D.value,
      columns: h.value,
      headers: g.value
    }));
    Ge(() => {
      const te = Bf.filterProps(e), de = ic.filterProps(e), Z = oc.filterProps(e), F = sc.filterProps(e);
      return _(sc, He({
        class: ["v-data-table", {
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, F, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(j.value),
        default: () => a.default ? a.default(j.value) : I(Qe, null, [a.colgroup?.(j.value), !e.hideDefaultHeader && I("thead", {
          key: "thead",
          class: "v-data-table__thead",
          role: "rowgroup"
        }, [_(ic, de, a)]), a.thead?.(j.value), !e.hideDefaultBody && I("tbody", {
          class: "v-data-table__tbody",
          role: "rowgroup"
        }, [a["body.prepend"]?.(j.value), a.body ? a.body(j.value) : _(oc, He(n, Z, {
          items: D.value
        }), a), a["body.append"]?.(j.value)]), a.tbody?.(j.value), a.tfoot?.(j.value)]),
        bottom: () => a.bottom ? a.bottom(j.value) : !e.hideDefaultFooter && I(Qe, null, [_(Go, null, null), _(Bf, te, {
          prepend: a["footer.prepend"]
        })])
      });
    });
  }
}), wK = Be({
  fluid: {
    type: Boolean,
    default: !1
  },
  ...vt(),
  ...La(),
  ...qt()
}, "VContainer"), kK = We()({
  name: "VContainer",
  props: wK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      rtlClasses: a
    } = Ra(), {
      dimensionStyles: r
    } = Fa(e);
    return Ge(() => _(e.tag, {
      class: Ie(["v-container", {
        "v-container--fluid": e.fluid
      }, a.value, e.class]),
      style: Xe([r.value, e.style])
    }, n)), {};
  }
}), cO = sp.reduce((e, t) => (e[t] = {
  type: [Boolean, String, Number],
  default: !1
}, e), {}), uO = sp.reduce((e, t) => {
  const n = "offset" + So(t);
  return e[n] = {
    type: [String, Number],
    default: null
  }, e;
}, {}), dO = sp.reduce((e, t) => {
  const n = "order" + So(t);
  return e[n] = {
    type: [String, Number],
    default: null
  }, e;
}, {}), oA = {
  col: Object.keys(cO),
  offset: Object.keys(uO),
  order: Object.keys(dO)
};
function SK(e, t, n) {
  let a = e;
  if (!(n == null || n === !1)) {
    if (t) {
      const r = t.replace(e, "");
      a += `-${r}`;
    }
    return e === "col" && (a = "v-" + a), e === "col" && (n === "" || n === !0) || (a += `-${n}`), a.toLowerCase();
  }
}
const CK = ["auto", "start", "end", "center", "baseline", "stretch"], AK = Be({
  cols: {
    type: [Boolean, String, Number],
    default: !1
  },
  ...cO,
  offset: {
    type: [String, Number],
    default: null
  },
  ...uO,
  order: {
    type: [String, Number],
    default: null
  },
  ...dO,
  alignSelf: {
    type: String,
    default: null,
    validator: (e) => CK.includes(e)
  },
  ...vt(),
  ...qt()
}, "VCol"), xK = We()({
  name: "VCol",
  props: AK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = W(() => {
      const r = [];
      let i;
      for (i in oA)
        oA[i].forEach((l) => {
          const s = e[l], d = SK(i, l, s);
          d && r.push(d);
        });
      const o = r.some((l) => l.startsWith("v-col-"));
      return r.push({
        // Default to .v-col if no other col-{bp}-* classes generated nor `cols` specified.
        "v-col": !o || !e.cols,
        [`v-col-${e.cols}`]: e.cols,
        [`offset-${e.offset}`]: e.offset,
        [`order-${e.order}`]: e.order,
        [`align-self-${e.alignSelf}`]: e.alignSelf
      }), r;
    });
    return () => Co(e.tag, {
      class: [a.value, e.class],
      style: e.style
    }, n.default?.());
  }
}), X0 = ["start", "end", "center"], fO = ["space-between", "space-around", "space-evenly"];
function Z0(e, t) {
  return sp.reduce((n, a) => {
    const r = e + So(a);
    return n[r] = t(), n;
  }, {});
}
const TK = [...X0, "baseline", "stretch"], mO = (e) => TK.includes(e), hO = Z0("align", () => ({
  type: String,
  default: null,
  validator: mO
})), IK = [...X0, ...fO], _O = (e) => IK.includes(e), pO = Z0("justify", () => ({
  type: String,
  default: null,
  validator: _O
})), EK = [...X0, ...fO, "stretch"], vO = (e) => EK.includes(e), gO = Z0("alignContent", () => ({
  type: String,
  default: null,
  validator: vO
})), sA = {
  align: Object.keys(hO),
  justify: Object.keys(pO),
  alignContent: Object.keys(gO)
}, PK = {
  align: "align",
  justify: "justify",
  alignContent: "align-content"
};
function OK(e, t, n) {
  let a = PK[e];
  if (n != null) {
    if (t) {
      const r = t.replace(e, "");
      a += `-${r}`;
    }
    return a += `-${n}`, a.toLowerCase();
  }
}
const DK = Be({
  dense: Boolean,
  noGutters: Boolean,
  align: {
    type: String,
    default: null,
    validator: mO
  },
  ...hO,
  justify: {
    type: String,
    default: null,
    validator: _O
  },
  ...pO,
  alignContent: {
    type: String,
    default: null,
    validator: vO
  },
  ...gO,
  ...vt(),
  ...qt()
}, "VRow"), BK = We()({
  name: "VRow",
  props: DK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = W(() => {
      const r = [];
      let i;
      for (i in sA)
        sA[i].forEach((o) => {
          const l = e[o], s = OK(i, o, l);
          s && r.push(s);
        });
      return r.push({
        "v-row--no-gutters": e.noGutters,
        "v-row--dense": e.dense,
        [`align-${e.align}`]: e.align,
        [`justify-${e.justify}`]: e.justify,
        [`align-content-${e.alignContent}`]: e.alignContent
      }), r;
    });
    return () => Co(e.tag, {
      class: ["v-row", a.value, e.class],
      style: e.style
    }, n.default?.());
  }
}), yO = xo("v-spacer", "div", "VSpacer"), bO = Be({
  active: {
    type: [String, Array],
    default: void 0
  },
  controlHeight: [Number, String],
  disabled: {
    type: [Boolean, String, Array],
    default: null
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  prevIcon: {
    type: At,
    default: "$prev"
  },
  modeIcon: {
    type: At,
    default: "$subgroup"
  },
  text: String,
  viewMode: {
    type: String,
    default: "month"
  }
}, "VDatePickerControls"), Nb = We()({
  name: "VDatePickerControls",
  props: bO(),
  emits: {
    "click:year": () => !0,
    "click:month": () => !0,
    "click:prev": () => !0,
    "click:next": () => !0,
    "click:text": () => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = W(() => Array.isArray(e.disabled) ? e.disabled.includes("text") : !!e.disabled), r = W(() => Array.isArray(e.disabled) ? e.disabled.includes("mode") : !!e.disabled), i = W(() => Array.isArray(e.disabled) ? e.disabled.includes("prev") : !!e.disabled), o = W(() => Array.isArray(e.disabled) ? e.disabled.includes("next") : !!e.disabled);
    function l() {
      n("click:prev");
    }
    function s() {
      n("click:next");
    }
    function d() {
      n("click:year");
    }
    function u() {
      n("click:month");
    }
    return Ge(() => I("div", {
      class: Ie(["v-date-picker-controls"]),
      style: {
        "--v-date-picker-controls-height": ht(e.controlHeight)
      }
    }, [_(un, {
      class: "v-date-picker-controls__month-btn",
      "data-testid": "month-btn",
      disabled: a.value,
      text: e.text,
      variant: "text",
      rounded: !0,
      onClick: u
    }, null), _(un, {
      class: "v-date-picker-controls__mode-btn",
      "data-testid": "year-btn",
      disabled: r.value,
      density: "comfortable",
      icon: e.modeIcon,
      variant: "text",
      onClick: d
    }, null), _(yO, null, null), I("div", {
      class: "v-date-picker-controls__month"
    }, [_(un, {
      "data-testid": "prev-month",
      disabled: i.value,
      density: "comfortable",
      icon: e.prevIcon,
      variant: "text",
      onClick: l
    }, null), _(un, {
      "data-testid": "next-month",
      disabled: o.value,
      icon: e.nextIcon,
      density: "comfortable",
      variant: "text",
      onClick: s
    }, null)])])), {};
  }
}), VK = Be({
  appendIcon: At,
  color: String,
  header: String,
  transition: String,
  onClick: nr()
}, "VDatePickerHeader"), Ub = We()({
  name: "VDatePickerHeader",
  props: VK(),
  emits: {
    click: () => !0,
    "click:append": () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color);
    function o() {
      n("click");
    }
    function l() {
      n("click:append");
    }
    return Ge(() => {
      const s = !!(a.default || e.header), d = !!(a.append || e.appendIcon);
      return I("div", {
        class: Ie(["v-date-picker-header", {
          "v-date-picker-header--clickable": !!e.onClick
        }, r.value]),
        style: Xe(i.value),
        onClick: o
      }, [a.prepend && I("div", {
        key: "prepend",
        class: "v-date-picker-header__prepend"
      }, [a.prepend()]), s && _(Sr, {
        key: "content",
        name: e.transition
      }, {
        default: () => [I("div", {
          key: e.header,
          class: "v-date-picker-header__content"
        }, [a.default?.() ?? e.header])]
      }), d && I("div", {
        class: "v-date-picker-header__append"
      }, [a.append ? _(Wt, {
        key: "append-defaults",
        disabled: !e.appendIcon,
        defaults: {
          VBtn: {
            icon: e.appendIcon,
            variant: "text"
          }
        }
      }, {
        default: () => [a.append?.()]
      }) : _(un, {
        key: "append-btn",
        icon: e.appendIcon,
        variant: "text",
        onClick: l
      }, null)])]);
    }), {};
  }
}), MK = Be({
  allowedDates: [Array, Function],
  disabled: {
    type: Boolean,
    default: null
  },
  displayValue: null,
  modelValue: Array,
  month: [Number, String],
  max: null,
  min: null,
  showAdjacentMonths: Boolean,
  year: [Number, String],
  weekdays: {
    type: Array,
    default: () => [0, 1, 2, 3, 4, 5, 6]
  },
  weeksInMonth: {
    type: String,
    default: "dynamic"
  },
  firstDayOfWeek: {
    type: [Number, String],
    default: void 0
  }
}, "calendar");
function RK(e) {
  const t = Uf(), n = kt(e, "modelValue", [], (g) => Xn(g).map((v) => t.date(v))), a = W(() => e.displayValue ? t.date(e.displayValue) : n.value.length > 0 ? t.date(n.value[0]) : e.min ? t.date(e.min) : Array.isArray(e.allowedDates) ? t.date(e.allowedDates[0]) : t.date()), r = kt(e, "year", void 0, (g) => {
    const v = g != null ? Number(g) : t.getYear(a.value);
    return t.startOfYear(t.setYear(t.date(), v));
  }, (g) => t.getYear(g)), i = kt(e, "month", void 0, (g) => {
    const v = g != null ? Number(g) : t.getMonth(a.value), w = t.setYear(t.startOfMonth(t.date()), t.getYear(r.value));
    return t.setMonth(w, v);
  }, (g) => t.getMonth(g)), o = W(() => {
    const g = t.toJsDate(t.startOfWeek(t.date(), e.firstDayOfWeek)).getDay();
    return [0, 1, 2, 3, 4, 5, 6].map((v) => (v + g) % 7);
  }), l = W(() => {
    const g = t.getWeekArray(i.value, e.firstDayOfWeek), v = g.flat(), w = 6 * 7;
    if (e.weeksInMonth === "static" && v.length < w) {
      const b = v[v.length - 1];
      let p = [];
      for (let y = 1; y <= w - v.length; y++)
        p.push(t.addDays(b, y)), y % 7 === 0 && (g.push(p), p = []);
    }
    return g;
  });
  function s(g, v) {
    return g.filter((w) => o.value.includes(t.toJsDate(w).getDay())).map((w, b) => {
      const p = t.toISO(w), y = !t.isSameMonth(w, i.value), S = t.isSameDay(w, t.startOfMonth(i.value)), E = t.isSameDay(w, t.endOfMonth(i.value)), C = t.isSameDay(w, i.value);
      return {
        date: w,
        formatted: t.format(w, "keyboardDate"),
        isAdjacent: y,
        isDisabled: h(w),
        isEnd: E,
        isHidden: y && !e.showAdjacentMonths,
        isSame: C,
        isSelected: n.value.some((D) => t.isSameDay(w, D)),
        isStart: S,
        isToday: t.isSameDay(w, v),
        isWeekEnd: b % 7 === 6,
        isWeekStart: b % 7 === 0,
        isoDate: p,
        localized: t.format(w, "dayOfMonth"),
        month: t.getMonth(w),
        year: t.getYear(w)
      };
    });
  }
  const d = W(() => {
    const g = t.startOfWeek(a.value, e.firstDayOfWeek), v = [];
    for (let b = 0; b <= 6; b++)
      v.push(t.addDays(g, b));
    const w = t.date();
    return s(v, w);
  }), u = W(() => {
    const g = l.value.flat(), v = t.date();
    return s(g, v);
  }), f = W(() => l.value.map((g) => g.length ? t.getWeek(g[0], e.firstDayOfWeek) : null));
  function h(g) {
    if (e.disabled) return !0;
    const v = t.date(g);
    return e.min && t.isAfter(t.date(e.min), v) || e.max && t.isAfter(v, t.date(e.max)) ? !0 : Array.isArray(e.allowedDates) && e.allowedDates.length > 0 ? !e.allowedDates.some((w) => t.isSameDay(t.date(w), v)) : typeof e.allowedDates == "function" ? !e.allowedDates(v) : !e.weekdays.includes(t.toJsDate(v).getDay());
  }
  return {
    displayValue: a,
    daysInMonth: u,
    daysInWeek: d,
    genDays: s,
    model: n,
    weeksInMonth: l,
    weekDays: o,
    weekNumbers: f
  };
}
const wO = Be({
  color: String,
  hideWeekdays: Boolean,
  multiple: [Boolean, Number, String],
  showWeek: Boolean,
  transition: {
    type: String,
    default: "picker-transition"
  },
  reverseTransition: {
    type: String,
    default: "picker-reverse-transition"
  },
  ...la(MK(), ["displayValue"])
}, "VDatePickerMonth"), $b = We()({
  name: "VDatePickerMonth",
  props: wO(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:month": (e) => !0,
    "update:year": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Se(), {
      daysInMonth: i,
      model: o,
      weekNumbers: l
    } = RK(e), s = Uf(), d = ot(), u = ot(), f = ot(!1), h = we(() => f.value ? e.reverseTransition : e.transition);
    e.multiple === "range" && o.value.length > 0 && (d.value = o.value[0], o.value.length > 1 && (u.value = o.value[o.value.length - 1]));
    const g = W(() => {
      const p = ["number", "string"].includes(typeof e.multiple) ? Number(e.multiple) : 1 / 0;
      return o.value.length >= p;
    });
    nt(i, (p, y) => {
      y && (f.value = s.isBefore(p[0].date, y[0].date));
    });
    function v(p) {
      const y = s.startOfDay(p);
      if (o.value.length === 0 ? d.value = void 0 : o.value.length === 1 && (d.value = o.value[0], u.value = void 0), !d.value)
        d.value = y, o.value = [d.value];
      else if (u.value)
        d.value = p, u.value = void 0, o.value = [d.value];
      else {
        if (s.isSameDay(y, d.value)) {
          d.value = void 0, o.value = [];
          return;
        } else s.isBefore(y, d.value) ? (u.value = s.endOfDay(d.value), d.value = y) : u.value = s.endOfDay(y);
        o.value = q4(s, d.value, u.value);
      }
    }
    function w(p) {
      const y = o.value.findIndex((S) => s.isSameDay(S, p));
      if (y === -1)
        o.value = [...o.value, p];
      else {
        const S = [...o.value];
        S.splice(y, 1), o.value = S;
      }
    }
    function b(p) {
      e.multiple === "range" ? v(p) : e.multiple ? w(p) : o.value = [p];
    }
    Ge(() => I("div", {
      class: "v-date-picker-month"
    }, [e.showWeek && I("div", {
      key: "weeks",
      class: "v-date-picker-month__weeks"
    }, [!e.hideWeekdays && I("div", {
      key: "hide-week-days",
      class: "v-date-picker-month__day"
    }, [ae(" ")]), l.value.map((p) => I("div", {
      class: Ie(["v-date-picker-month__day", "v-date-picker-month__day--adjacent"])
    }, [p]))]), _(Sr, {
      name: h.value
    }, {
      default: () => [I("div", {
        ref: r,
        key: i.value[0].date?.toString(),
        class: "v-date-picker-month__days"
      }, [!e.hideWeekdays && s.getWeekdays(e.firstDayOfWeek).map((p) => I("div", {
        class: Ie(["v-date-picker-month__day", "v-date-picker-month__weekday"])
      }, [p])), i.value.map((p, y) => {
        const S = {
          props: {
            class: "v-date-picker-month__day-btn",
            color: p.isSelected || p.isToday ? e.color : void 0,
            disabled: p.isDisabled,
            icon: !0,
            ripple: !1,
            text: p.localized,
            variant: p.isSelected ? "flat" : p.isToday ? "outlined" : "text",
            onClick: () => b(p.date)
          },
          item: p,
          i: y
        };
        return g.value && !p.isSelected && (p.isDisabled = !0), I("div", {
          class: Ie(["v-date-picker-month__day", {
            "v-date-picker-month__day--adjacent": p.isAdjacent,
            "v-date-picker-month__day--hide-adjacent": p.isHidden,
            "v-date-picker-month__day--selected": p.isSelected,
            "v-date-picker-month__day--week-end": p.isWeekEnd,
            "v-date-picker-month__day--week-start": p.isWeekStart
          }]),
          "data-v-date": p.isDisabled ? void 0 : p.isoDate
        }, [(e.showAdjacentMonths || !p.isAdjacent) && (a.day?.(S) ?? _(un, S.props, null))]);
      })])]
    })]));
  }
}), kO = Be({
  color: String,
  height: [String, Number],
  min: null,
  max: null,
  modelValue: Number,
  year: Number,
  allowedMonths: [Array, Function]
}, "VDatePickerMonths"), qb = We()({
  name: "VDatePickerMonths",
  props: kO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Uf(), i = kt(e, "modelValue"), o = W(() => {
      let s = r.startOfYear(r.date());
      return e.year && (s = r.setYear(s, e.year)), ho(12).map((d) => {
        const u = r.format(s, "monthShort"), f = !!(!l(d) || e.min && r.isAfter(r.startOfMonth(r.date(e.min)), s) || e.max && r.isAfter(s, r.startOfMonth(r.date(e.max))));
        return s = r.getNextMonth(s), {
          isDisabled: f,
          text: u,
          value: d
        };
      });
    });
    Zn(() => {
      i.value = i.value ?? r.getMonth(r.date());
    });
    function l(s) {
      return Array.isArray(e.allowedMonths) && e.allowedMonths.length ? e.allowedMonths.includes(s) : typeof e.allowedMonths == "function" ? e.allowedMonths(s) : !0;
    }
    return Ge(() => I("div", {
      class: "v-date-picker-months",
      style: {
        height: ht(e.height)
      }
    }, [I("div", {
      class: "v-date-picker-months__content"
    }, [o.value.map((s, d) => {
      const u = {
        active: i.value === d,
        color: i.value === d ? e.color : void 0,
        disabled: s.isDisabled,
        rounded: !0,
        text: s.text,
        variant: i.value === s.value ? "flat" : "text",
        onClick: () => f(d)
      };
      function f(h) {
        if (i.value === h) {
          n("update:modelValue", i.value);
          return;
        }
        i.value = h;
      }
      return a.month?.({
        month: s,
        i: d,
        props: u
      }) ?? _(un, He({
        key: "month"
      }, u), null);
    })])])), {};
  }
}), SO = Be({
  color: String,
  height: [String, Number],
  min: null,
  max: null,
  modelValue: Number,
  allowedYears: [Array, Function]
}, "VDatePickerYears"), Hb = We()({
  name: "VDatePickerYears",
  props: SO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Uf(), i = kt(e, "modelValue"), o = W(() => {
      const d = r.getYear(r.date());
      let u = d - 100, f = d + 52;
      e.min && (u = r.getYear(r.date(e.min))), e.max && (f = r.getYear(r.date(e.max)));
      let h = r.startOfYear(r.date());
      return h = r.setYear(h, u), ho(f - u + 1, u).map((g) => {
        const v = r.format(h, "year");
        return h = r.setYear(h, r.getYear(h) + 1), {
          text: v,
          value: g,
          isDisabled: !s(g)
        };
      });
    });
    Zn(() => {
      i.value = i.value ?? r.getYear(r.date());
    });
    const l = y_();
    on(async () => {
      await Vt(), l.el?.focus();
    });
    function s(d) {
      return Array.isArray(e.allowedYears) && e.allowedYears.length ? e.allowedYears.includes(d) : typeof e.allowedYears == "function" ? e.allowedYears(d) : !0;
    }
    return Ge(() => I("div", {
      class: "v-date-picker-years",
      style: {
        height: ht(e.height)
      }
    }, [I("div", {
      class: "v-date-picker-years__content"
    }, [o.value.map((d, u) => {
      const f = {
        ref: i.value === d.value ? l : void 0,
        active: i.value === d.value,
        color: i.value === d.value ? e.color : void 0,
        rounded: !0,
        text: d.text,
        disabled: d.isDisabled,
        variant: i.value === d.value ? "flat" : "text",
        onClick: () => {
          if (i.value === d.value) {
            n("update:modelValue", i.value);
            return;
          }
          i.value = d.value;
        }
      };
      return a.year?.({
        year: d,
        i: u,
        props: f
      }) ?? _(un, He({
        key: "month"
      }, f), null);
    })])])), {};
  }
}), LK = Be({
  // TODO: implement in v3.5
  // calendarIcon: {
  //   type: String,
  //   default: '$calendar',
  // },
  // keyboardIcon: {
  //   type: String,
  //   default: '$edit',
  // },
  // inputMode: {
  //   type: String as PropType<'calendar' | 'keyboard'>,
  //   default: 'calendar',
  // },
  // inputText: {
  //   type: String,
  //   default: '$vuetify.datePicker.input.placeholder',
  // },
  // inputPlaceholder: {
  //   type: String,
  //   default: 'dd/mm/yyyy',
  // },
  header: {
    type: String,
    default: "$vuetify.datePicker.header"
  },
  headerColor: String,
  ...bO(),
  ...wO({
    weeksInMonth: "static"
  }),
  ...la(kO(), ["modelValue"]),
  ...la(SO(), ["modelValue"]),
  ...N0({
    title: "$vuetify.datePicker.title"
  }),
  modelValue: null
}, "VDatePicker"), FK = We()({
  name: "VDatePicker",
  props: LK(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:month": (e) => !0,
    "update:year": (e) => !0,
    // 'update:inputMode': (date: any) => true,
    "update:viewMode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Uf(), {
      t: i
    } = ua(), {
      rtlClasses: o
    } = Ra(), l = kt(e, "modelValue", void 0, (j) => Xn(j).map((te) => r.date(te)), (j) => e.multiple ? j : j[0]), s = kt(e, "viewMode"), d = W(() => {
      const j = r.date(e.min);
      return e.min && r.isValid(j) ? j : null;
    }), u = W(() => {
      const j = r.date(e.max);
      return e.max && r.isValid(j) ? j : null;
    }), f = W(() => {
      const j = r.date();
      let te = j;
      return l.value?.[0] ? te = r.date(l.value[0]) : d.value && r.isBefore(j, d.value) ? te = d.value : u.value && r.isAfter(j, u.value) && (te = u.value), te && r.isValid(te) ? te : j;
    }), h = we(() => e.headerColor ?? e.color), g = kt(e, "month"), v = W({
      get: () => Number(g.value ?? r.getMonth(r.startOfMonth(f.value))),
      set: (j) => g.value = j
    }), w = kt(e, "year"), b = W({
      get: () => Number(w.value ?? r.getYear(r.startOfYear(r.setMonth(f.value, v.value)))),
      set: (j) => w.value = j
    }), p = ot(!1), y = W(() => e.multiple && l.value.length > 1 ? i("$vuetify.datePicker.itemsSelected", l.value.length) : l.value[0] && r.isValid(l.value[0]) ? r.format(r.date(l.value[0]), "normalDateWithWeekday") : i(e.header)), S = W(() => {
      let j = r.date();
      return j = r.setDate(j, 1), j = r.setMonth(j, v.value), j = r.setYear(j, b.value), r.format(j, "monthAndYear");
    }), E = we(() => `date-picker-header${p.value ? "-reverse" : ""}-transition`), C = W(() => {
      if (e.disabled) return !0;
      const j = [];
      if (s.value !== "month")
        j.push("prev", "next");
      else {
        let te = r.date();
        if (te = r.startOfMonth(te), te = r.setMonth(te, v.value), te = r.setYear(te, b.value), d.value) {
          const de = r.addDays(r.startOfMonth(te), -1);
          r.isAfter(d.value, de) && j.push("prev");
        }
        if (u.value) {
          const de = r.addDays(r.endOfMonth(te), 1);
          r.isAfter(de, u.value) && j.push("next");
        }
      }
      return j;
    });
    function D(j, te) {
      const de = e.allowedDates;
      if (typeof de != "function") return !0;
      const Z = r.getDiff(te, j, "days");
      for (let F = 0; F < Z; F++)
        if (de(r.addDays(j, F))) return !0;
      return !1;
    }
    function P(j) {
      if (typeof e.allowedDates == "function") {
        const te = r.parseISO(`${j}-01-01`);
        return D(te, r.endOfYear(te));
      }
      if (Array.isArray(e.allowedDates) && e.allowedDates.length) {
        for (const te of e.allowedDates)
          if (r.getYear(r.date(te)) === j) return !0;
        return !1;
      }
      return !0;
    }
    function O(j) {
      if (typeof e.allowedDates == "function") {
        const te = r.parseISO(`${b.value}-${j + 1}-01`);
        return D(te, r.endOfMonth(te));
      }
      if (Array.isArray(e.allowedDates) && e.allowedDates.length) {
        for (const te of e.allowedDates)
          if (r.getYear(r.date(te)) === b.value && r.getMonth(r.date(te)) === j) return !0;
        return !1;
      }
      return !0;
    }
    function T() {
      v.value < 11 ? v.value++ : (b.value++, v.value = 0, H()), N();
    }
    function A() {
      v.value > 0 ? v.value-- : (b.value--, v.value = 11, H()), N();
    }
    function V() {
      s.value = "month";
    }
    function M() {
      s.value = s.value === "months" ? "month" : "months";
    }
    function B() {
      s.value = s.value === "year" ? "month" : "year";
    }
    function N() {
      s.value === "months" && M();
    }
    function H() {
      s.value === "year" && B();
    }
    return nt(l, (j, te) => {
      const de = Xn(te), Z = Xn(j);
      if (!Z.length) return;
      const F = r.date(de[de.length - 1]), K = r.date(Z[Z.length - 1]), se = r.getMonth(K), X = r.getYear(K);
      se !== v.value && (v.value = se, N()), X !== b.value && (b.value = X, H()), p.value = r.isBefore(F, K);
    }), Ge(() => {
      const j = q_.filterProps(e), te = Nb.filterProps(e), de = Ub.filterProps(e), Z = $b.filterProps(e), F = la(qb.filterProps(e), ["modelValue"]), K = la(Hb.filterProps(e), ["modelValue"]), se = {
        color: h.value,
        header: y.value,
        transition: E.value
      };
      return _(q_, He(j, {
        color: h.value,
        class: ["v-date-picker", `v-date-picker--${s.value}`, {
          "v-date-picker--show-week": e.showWeek
        }, o.value, e.class],
        style: e.style
      }), {
        title: () => a.title?.() ?? I("div", {
          class: "v-date-picker__title"
        }, [i(e.title)]),
        header: () => a.header ? _(Wt, {
          defaults: {
            VDatePickerHeader: {
              ...se
            }
          }
        }, {
          default: () => [a.header?.(se)]
        }) : _(Ub, He({
          key: "header"
        }, de, se, {
          onClick: s.value !== "month" ? V : void 0
        }), {
          ...a,
          default: void 0
        }),
        default: () => I(Qe, null, [_(Nb, He(te, {
          disabled: C.value,
          text: S.value,
          "onClick:next": T,
          "onClick:prev": A,
          "onClick:month": M,
          "onClick:year": B
        }), null), _(xf, {
          hideOnLeave: !0
        }, {
          default: () => [s.value === "months" ? _(qb, He({
            key: "date-picker-months"
          }, F, {
            modelValue: v.value,
            "onUpdate:modelValue": [(X) => v.value = X, N],
            min: d.value,
            max: u.value,
            year: b.value,
            allowedMonths: O
          }), null) : s.value === "year" ? _(Hb, He({
            key: "date-picker-years"
          }, K, {
            modelValue: b.value,
            "onUpdate:modelValue": [(X) => b.value = X, H],
            min: d.value,
            max: u.value,
            allowedYears: P
          }), null) : _($b, He({
            key: "date-picker-month"
          }, Z, {
            modelValue: l.value,
            "onUpdate:modelValue": (X) => l.value = X,
            month: v.value,
            "onUpdate:month": [(X) => v.value = X, N],
            year: b.value,
            "onUpdate:year": [(X) => b.value = X, H],
            min: d.value,
            max: u.value
          }), null)]
        })]),
        actions: a.actions
      });
    }), {};
  }
}), NK = Be({
  actionText: String,
  bgColor: String,
  color: String,
  icon: At,
  image: String,
  justify: {
    type: String,
    default: "center"
  },
  headline: String,
  title: String,
  text: String,
  textWidth: {
    type: [Number, String],
    default: 500
  },
  href: String,
  to: String,
  ...vt(),
  ...La(),
  ...To({
    size: void 0
  }),
  ...sn()
}, "VEmptyState"), UK = We()({
  name: "VEmptyState",
  props: NK(),
  emits: {
    "click:action": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.bgColor), {
      dimensionStyles: l
    } = Fa(e), {
      displayClasses: s
    } = mi();
    function d(u) {
      n("click:action", u);
    }
    return Ge(() => {
      const u = !!(a.actions || e.actionText), f = !!(a.headline || e.headline), h = !!(a.title || e.title), g = !!(a.text || e.text), v = !!(a.media || e.image || e.icon), w = e.size || (e.image ? 200 : 96);
      return I("div", {
        class: Ie(["v-empty-state", {
          [`v-empty-state--${e.justify}`]: !0
        }, r.value, i.value, s.value, e.class]),
        style: Xe([o.value, l.value, e.style])
      }, [v && I("div", {
        key: "media",
        class: "v-empty-state__media"
      }, [a.media ? _(Wt, {
        key: "media-defaults",
        defaults: {
          VImg: {
            src: e.image,
            height: w
          },
          VIcon: {
            size: w,
            icon: e.icon
          }
        }
      }, {
        default: () => [a.media()]
      }) : I(Qe, null, [e.image ? _(as, {
        key: "image",
        src: e.image,
        height: w
      }, null) : e.icon ? _(pn, {
        key: "icon",
        color: e.color,
        size: w,
        icon: e.icon
      }, null) : void 0])]), f && I("div", {
        key: "headline",
        class: "v-empty-state__headline"
      }, [a.headline?.() ?? e.headline]), h && I("div", {
        key: "title",
        class: "v-empty-state__title"
      }, [a.title?.() ?? e.title]), g && I("div", {
        key: "text",
        class: "v-empty-state__text",
        style: {
          maxWidth: ht(e.textWidth)
        }
      }, [a.text?.() ?? e.text]), a.default && I("div", {
        key: "content",
        class: "v-empty-state__content"
      }, [a.default()]), u && I("div", {
        key: "actions",
        class: "v-empty-state__actions"
      }, [_(Wt, {
        defaults: {
          VBtn: {
            class: "v-empty-state__action-btn",
            color: e.color ?? "surface-variant",
            href: e.href,
            text: e.actionText,
            to: e.to
          }
        }
      }, {
        default: () => [a.actions?.({
          props: {
            onClick: d
          }
        }) ?? _(un, {
          onClick: d
        }, null)]
      })])]);
    }), {};
  }
}), Vf = Symbol.for("vuetify:v-expansion-panel"), CO = Be({
  ...vt(),
  ...D0()
}, "VExpansionPanelText"), zb = We()({
  name: "VExpansionPanelText",
  props: CO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(Vf);
    if (!a) throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");
    const {
      hasContent: r,
      onAfterLeave: i
    } = B0(e, a.isSelected);
    return Ge(() => _(yp, {
      onAfterLeave: i
    }, {
      default: () => [an(I("div", {
        class: Ie(["v-expansion-panel-text", e.class]),
        style: Xe(e.style)
      }, [n.default && r.value && I("div", {
        class: "v-expansion-panel-text__wrapper"
      }, [n.default?.()])]), [[_a, a.isSelected.value]])]
    })), {};
  }
}), AO = Be({
  color: String,
  expandIcon: {
    type: At,
    default: "$expand"
  },
  collapseIcon: {
    type: At,
    default: "$collapse"
  },
  hideActions: Boolean,
  focusable: Boolean,
  static: Boolean,
  ripple: {
    type: [Boolean, Object],
    default: !1
  },
  readonly: Boolean,
  ...vt(),
  ...La()
}, "VExpansionPanelTitle"), Wb = We()({
  name: "VExpansionPanelTitle",
  directives: {
    vRipple: Cr
  },
  props: AO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(Vf);
    if (!a) throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      dimensionStyles: o
    } = Fa(e), l = W(() => ({
      collapseIcon: e.collapseIcon,
      disabled: a.disabled.value,
      expanded: a.isSelected.value,
      expandIcon: e.expandIcon,
      readonly: e.readonly
    })), s = we(() => a.isSelected.value ? e.collapseIcon : e.expandIcon);
    return Ge(() => an(I("button", {
      class: Ie(["v-expansion-panel-title", {
        "v-expansion-panel-title--active": a.isSelected.value,
        "v-expansion-panel-title--focusable": e.focusable,
        "v-expansion-panel-title--static": e.static
      }, r.value, e.class]),
      style: Xe([i.value, o.value, e.style]),
      type: "button",
      tabindex: a.disabled.value ? -1 : void 0,
      disabled: a.disabled.value,
      "aria-expanded": a.isSelected.value,
      onClick: e.readonly ? void 0 : a.toggle
    }, [I("span", {
      class: "v-expansion-panel-title__overlay"
    }, null), n.default?.(l.value), !e.hideActions && _(Wt, {
      defaults: {
        VIcon: {
          icon: s.value
        }
      }
    }, {
      default: () => [I("span", {
        class: "v-expansion-panel-title__icon"
      }, [n.actions?.(l.value) ?? _(pn, null, null)])]
    })]), [[Cr, e.ripple]])), {};
  }
}), xO = Be({
  title: String,
  text: String,
  bgColor: String,
  ...za(),
  ...pc(),
  ...Hn(),
  ...qt(),
  ...AO(),
  ...CO()
}, "VExpansionPanel"), $K = We()({
  name: "VExpansionPanel",
  props: xO(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = vc(e, Vf), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.bgColor), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e), s = we(() => a?.disabled.value || e.disabled), d = W(() => a.group.items.value.reduce((h, g, v) => (a.group.selected.value.includes(g.id) && h.push(v), h), [])), u = W(() => {
      const h = a.group.items.value.findIndex((g) => g.id === a.id);
      return !a.isSelected.value && d.value.some((g) => g - h === 1);
    }), f = W(() => {
      const h = a.group.items.value.findIndex((g) => g.id === a.id);
      return !a.isSelected.value && d.value.some((g) => g - h === -1);
    });
    return Nn(Vf, a), Ge(() => {
      const h = !!(n.text || e.text), g = !!(n.title || e.title), v = Wb.filterProps(e), w = zb.filterProps(e);
      return _(e.tag, {
        class: Ie(["v-expansion-panel", {
          "v-expansion-panel--active": a.isSelected.value,
          "v-expansion-panel--before-active": u.value,
          "v-expansion-panel--after-active": f.value,
          "v-expansion-panel--disabled": s.value
        }, l.value, r.value, e.class]),
        style: Xe([i.value, e.style])
      }, {
        default: () => [I("div", {
          class: Ie(["v-expansion-panel__shadow", ...o.value])
        }, null), _(Wt, {
          defaults: {
            VExpansionPanelTitle: {
              ...v
            },
            VExpansionPanelText: {
              ...w
            }
          }
        }, {
          default: () => [g && _(Wb, {
            key: "title"
          }, {
            default: () => [n.title ? n.title() : e.title]
          }), h && _(zb, {
            key: "text"
          }, {
            default: () => [n.text ? n.text() : e.text]
          }), n.default?.()]
        })]
      });
    }), {
      groupItem: a
    };
  }
}), qK = ["default", "accordion", "inset", "popout"], HK = Be({
  flat: Boolean,
  ..._c(),
  ...tl(xO(), ["bgColor", "collapseIcon", "color", "eager", "elevation", "expandIcon", "focusable", "hideActions", "readonly", "ripple", "rounded", "tile", "static"]),
  ...sn(),
  ...vt(),
  ...qt(),
  variant: {
    type: String,
    default: "default",
    validator: (e) => qK.includes(e)
  }
}, "VExpansionPanels"), zK = We()({
  name: "VExpansionPanels",
  props: HK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      next: a,
      prev: r
    } = ol(e, Vf), {
      themeClasses: i
    } = yn(e), o = we(() => e.variant && `v-expansion-panels--variant-${e.variant}`);
    return ca({
      VExpansionPanel: {
        bgColor: we(() => e.bgColor),
        collapseIcon: we(() => e.collapseIcon),
        color: we(() => e.color),
        eager: we(() => e.eager),
        elevation: we(() => e.elevation),
        expandIcon: we(() => e.expandIcon),
        focusable: we(() => e.focusable),
        hideActions: we(() => e.hideActions),
        readonly: we(() => e.readonly),
        ripple: we(() => e.ripple),
        rounded: we(() => e.rounded),
        static: we(() => e.static)
      }
    }), Ge(() => _(e.tag, {
      class: Ie(["v-expansion-panels", {
        "v-expansion-panels--flat": e.flat,
        "v-expansion-panels--tile": e.tile
      }, i.value, o.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.default?.({
        prev: r,
        next: a
      })]
    })), {
      next: a,
      prev: r
    };
  }
}), WK = Be({
  app: Boolean,
  appear: Boolean,
  extended: Boolean,
  layout: Boolean,
  offset: Boolean,
  modelValue: {
    type: Boolean,
    default: !0
  },
  ...la(kp({
    active: !0
  }), ["location"]),
  ...uc(),
  ...us(),
  ...Gi({
    transition: "fab-transition"
  })
}, "VFab"), jK = We()({
  name: "VFab",
  props: WK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), r = ot(56), i = Se(), {
      resizeRef: o
    } = Wi((f) => {
      f.length && (r.value = f[0].target.clientHeight);
    }), l = we(() => e.app || e.absolute), s = W(() => l.value ? e.location?.split(" ").shift() ?? "bottom" : !1), d = W(() => l.value ? e.location?.split(" ")[1] ?? "end" : !1);
    Fr(() => e.app, () => {
      const f = dc({
        id: e.name,
        order: W(() => parseInt(e.order, 10)),
        position: s,
        layoutSize: W(() => e.layout ? r.value + 24 : 0),
        elementSize: W(() => r.value + 24),
        active: W(() => e.app && a.value),
        absolute: we(() => e.absolute)
      });
      Zn(() => {
        i.value = f.layoutItemStyles.value;
      });
    });
    const u = Se();
    return Ge(() => {
      const f = un.filterProps(e);
      return I("div", {
        ref: u,
        class: Ie(["v-fab", {
          "v-fab--absolute": e.absolute,
          "v-fab--app": !!e.app,
          "v-fab--extended": e.extended,
          "v-fab--offset": e.offset,
          [`v-fab--${s.value}`]: l.value,
          [`v-fab--${d.value}`]: l.value
        }, e.class]),
        style: Xe([e.app ? {
          ...i.value
        } : {
          height: e.absolute ? "100%" : "inherit"
        }, e.style])
      }, [I("div", {
        class: "v-fab__container"
      }, [_(Sr, {
        appear: e.appear,
        transition: e.transition
      }, {
        default: () => [an(_(un, He({
          ref: o
        }, f, {
          active: void 0,
          location: void 0
        }), n), [[_a, e.active]])]
      })])]);
    }), {};
  }
});
function KK() {
  function e(n) {
    return [...n.dataTransfer?.items ?? []].filter((r) => r.kind === "file").map((r) => r.webkitGetAsEntry()).filter(Boolean).length > 0 || [...n.dataTransfer?.files ?? []].length > 0;
  }
  async function t(n) {
    const a = [], r = [...n.dataTransfer?.items ?? []].filter((i) => i.kind === "file").map((i) => i.webkitGetAsEntry()).filter(Boolean);
    if (r.length)
      for (const i of r) {
        const o = await TO(i, IO(".", i));
        a.push(...o.map((l) => l.file));
      }
    else
      a.push(...n.dataTransfer?.files ?? []);
    return a;
  }
  return {
    handleDrop: t,
    hasFilesOrFolders: e
  };
}
function TO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
  return new Promise((n, a) => {
    e.isFile ? e.file((i) => n([{
      file: i,
      path: t
    }]), a) : e.isDirectory && e.createReader().readEntries(async (i) => {
      const o = [];
      for (const l of i)
        o.push(...await TO(l, IO(t, l)));
      n(o);
    });
  });
}
function IO(e, t) {
  return t.isDirectory ? `${e}/${t.name}` : e;
}
const YK = Be({
  chips: Boolean,
  counter: Boolean,
  counterSizeString: {
    type: String,
    default: "$vuetify.fileInput.counterSize"
  },
  counterString: {
    type: String,
    default: "$vuetify.fileInput.counter"
  },
  hideInput: Boolean,
  multiple: Boolean,
  showSize: {
    type: [Boolean, Number, String],
    default: !1,
    validator: (e) => typeof e == "boolean" || [1e3, 1024].includes(Number(e))
  },
  ...fs({
    prependIcon: "$file"
  }),
  modelValue: {
    type: [Array, Object],
    default: (e) => e.multiple ? [] : null,
    validator: (e) => Xn(e).every((t) => t != null && typeof t == "object")
  },
  ...am({
    clearable: !0
  })
}, "VFileInput"), GK = We()({
  name: "VFileInput",
  inheritAttrs: !1,
  props: YK(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      t: i
    } = ua(), o = kt(e, "modelValue", e.modelValue, (H) => Xn(H), (H) => !e.multiple && Array.isArray(H) ? H[0] : H), {
      isFocused: l,
      focus: s,
      blur: d
    } = ds(e), u = W(() => typeof e.showSize != "boolean" ? e.showSize : void 0), f = W(() => (o.value ?? []).reduce((H, j) => {
      let {
        size: te = 0
      } = j;
      return H + te;
    }, 0)), h = W(() => FS(f.value, u.value)), g = W(() => (o.value ?? []).map((H) => {
      const {
        name: j = "",
        size: te = 0
      } = H;
      return e.showSize ? `${j} (${FS(te, u.value)})` : j;
    })), v = W(() => {
      const H = o.value?.length ?? 0;
      return e.showSize ? i(e.counterSizeString, H, h.value) : i(e.counterString, H);
    }), w = Se(), b = Se(), p = Se(), y = we(() => l.value || e.active), S = W(() => ["plain", "underlined"].includes(e.variant)), E = ot(!1), {
      handleDrop: C,
      hasFilesOrFolders: D
    } = KK();
    function P() {
      p.value !== document.activeElement && p.value?.focus(), l.value || s();
    }
    function O(H) {
      p.value?.click();
    }
    function T(H) {
      a("mousedown:control", H);
    }
    function A(H) {
      p.value?.click(), a("click:control", H);
    }
    function V(H) {
      H.stopPropagation(), P(), Vt(() => {
        o.value = [], ip(e["onClick:clear"], H);
      });
    }
    function M(H) {
      H.preventDefault(), H.stopImmediatePropagation(), E.value = !0;
    }
    function B(H) {
      H.preventDefault(), E.value = !1;
    }
    async function N(H) {
      if (H.preventDefault(), H.stopImmediatePropagation(), E.value = !1, !p.value || !D(H)) return;
      const j = new DataTransfer();
      for (const te of await C(H))
        j.items.add(te);
      p.value.files = j.files, p.value.dispatchEvent(new Event("change", {
        bubbles: !0
      }));
    }
    return nt(o, (H) => {
      (!Array.isArray(H) || !H.length) && p.value && (p.value.value = "");
    }), Ge(() => {
      const H = !!(r.counter || e.counter), j = !!(H || r.details), [te, de] = nl(n), {
        modelValue: Z,
        ...F
      } = hr.filterProps(e), K = Qs.filterProps(e);
      return _(hr, He({
        ref: w,
        modelValue: e.multiple ? o.value : o.value[0],
        class: ["v-file-input", {
          "v-file-input--chips": !!e.chips,
          "v-file-input--dragging": E.value,
          "v-file-input--hide": e.hideInput,
          "v-input--plain-underlined": S.value
        }, e.class],
        style: e.style,
        "onClick:prepend": O
      }, te, F, {
        centerAffix: !S.value,
        focused: l.value
      }), {
        ...r,
        default: (se) => {
          let {
            id: X,
            isDisabled: he,
            isDirty: ve,
            isReadonly: pe,
            isValid: z
          } = se;
          return _(Qs, He({
            ref: b,
            "prepend-icon": e.prependIcon,
            onMousedown: T,
            onClick: A,
            "onClick:clear": V,
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"]
          }, K, {
            id: X.value,
            active: y.value || ve.value,
            dirty: ve.value || e.dirty,
            disabled: he.value,
            focused: l.value,
            error: z.value === !1,
            onDragover: M,
            onDrop: N
          }), {
            ...r,
            default: (ke) => {
              let {
                props: {
                  class: Me,
                  ...Le
                }
              } = ke;
              return I(Qe, null, [I("input", He({
                ref: p,
                type: "file",
                readonly: pe.value,
                disabled: he.value,
                multiple: e.multiple,
                name: e.name,
                onClick: (ce) => {
                  ce.stopPropagation(), pe.value && ce.preventDefault(), P();
                },
                onChange: (ce) => {
                  if (!ce.target) return;
                  const ne = ce.target;
                  o.value = [...ne.files ?? []];
                },
                onDragleave: B,
                onFocus: P,
                onBlur: d
              }, Le, de), null), I("div", {
                class: Ie(Me)
              }, [!!o.value?.length && !e.hideInput && (r.selection ? r.selection({
                fileNames: g.value,
                totalBytes: f.value,
                totalBytesReadable: h.value
              }) : e.chips ? g.value.map((ce) => _(ed, {
                key: ce,
                size: "small",
                text: ce
              }, null)) : g.value.join(", "))])]);
            }
          });
        },
        details: j ? (se) => I(Qe, null, [r.details?.(se), H && I(Qe, null, [I("span", null, null), _(Ap, {
          active: !!o.value?.length,
          value: v.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), pi({}, w, b, p);
  }
}), QK = Be({
  app: Boolean,
  color: String,
  height: {
    type: [Number, String],
    default: "auto"
  },
  ...Qr(),
  ...vt(),
  ...za(),
  ...uc(),
  ...Hn(),
  ...qt({
    tag: "footer"
  }),
  ...sn()
}, "VFooter"), JK = We()({
  name: "VFooter",
  props: QK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Se(), {
      themeClasses: r
    } = yn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.color), {
      borderClasses: l
    } = _i(e), {
      elevationClasses: s
    } = ir(e), {
      roundedClasses: d
    } = fa(e), u = ot(32), {
      resizeRef: f
    } = Wi((g) => {
      g.length && (u.value = g[0].target.clientHeight);
    }), h = W(() => e.height === "auto" ? u.value : parseInt(e.height, 10));
    return Fr(() => e.app, () => {
      const g = dc({
        id: e.name,
        order: W(() => parseInt(e.order, 10)),
        position: we(() => "bottom"),
        layoutSize: h,
        elementSize: W(() => e.height === "auto" ? void 0 : h.value),
        active: we(() => e.app),
        absolute: we(() => e.absolute)
      });
      Zn(() => {
        a.value = g.layoutItemStyles.value;
      });
    }), Ge(() => _(e.tag, {
      ref: f,
      class: Ie(["v-footer", r.value, i.value, l.value, s.value, d.value, e.class]),
      style: Xe([o.value, e.app ? a.value : {
        height: ht(e.height)
      }, e.style])
    }, n)), {};
  }
}), XK = Be({
  ...vt(),
  ...iz()
}, "VForm"), ZK = We()({
  name: "VForm",
  props: XK(),
  emits: {
    "update:modelValue": (e) => !0,
    submit: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = oz(e), i = Se();
    function o(s) {
      s.preventDefault(), r.reset();
    }
    function l(s) {
      const d = s, u = r.validate();
      d.then = u.then.bind(u), d.catch = u.catch.bind(u), d.finally = u.finally.bind(u), a("submit", d), d.defaultPrevented || u.then((f) => {
        let {
          valid: h
        } = f;
        h && i.value?.submit();
      }), d.preventDefault();
    }
    return Ge(() => I("form", {
      ref: i,
      class: Ie(["v-form", e.class]),
      style: Xe(e.style),
      novalidate: !0,
      onReset: o,
      onSubmit: l
    }, [n.default?.(r)])), pi(r, i);
  }
}), e7 = Be({
  disabled: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  ...P0()
}, "VHover"), t7 = We()({
  name: "VHover",
  props: e7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      runOpenDelay: r,
      runCloseDelay: i
    } = O0(e, (o) => !e.disabled && (a.value = o));
    return () => n.default?.({
      isHovering: a.value,
      props: {
        onMouseenter: r,
        onMouseleave: i
      }
    });
  }
}), n7 = Be({
  color: String,
  direction: {
    type: String,
    default: "vertical",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  side: {
    type: String,
    default: "end",
    validator: (e) => ["start", "end", "both"].includes(e)
  },
  mode: {
    type: String,
    default: "intersect",
    validator: (e) => ["intersect", "manual"].includes(e)
  },
  margin: [Number, String],
  loadMoreText: {
    type: String,
    default: "$vuetify.infiniteScroll.loadMore"
  },
  emptyText: {
    type: String,
    default: "$vuetify.infiniteScroll.empty"
  },
  ...La(),
  ...qt()
}, "VInfiniteScroll"), lA = fi({
  name: "VInfiniteScrollIntersect",
  props: {
    side: {
      type: String,
      required: !0
    },
    rootMargin: String
  },
  emits: {
    intersect: (e, t) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const {
      intersectionRef: a,
      isIntersecting: r
    } = Gf();
    return nt(r, async (i) => {
      n("intersect", e.side, i);
    }), Ge(() => I("div", {
      class: "v-infinite-scroll-intersect",
      style: {
        "--v-infinite-margin-size": e.rootMargin
      },
      ref: a
    }, [ae(" ")])), {};
  }
}), a7 = We()({
  name: "VInfiniteScroll",
  props: n7(),
  emits: {
    load: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Se(), i = ot("ok"), o = ot("ok"), l = W(() => ht(e.margin)), s = ot(!1);
    function d(C) {
      if (!r.value) return;
      const D = e.direction === "vertical" ? "scrollTop" : "scrollLeft";
      r.value[D] = C;
    }
    function u() {
      if (!r.value) return 0;
      const C = e.direction === "vertical" ? "scrollTop" : "scrollLeft";
      return r.value[C];
    }
    function f() {
      if (!r.value) return 0;
      const C = e.direction === "vertical" ? "scrollHeight" : "scrollWidth";
      return r.value[C];
    }
    function h() {
      if (!r.value) return 0;
      const C = e.direction === "vertical" ? "clientHeight" : "clientWidth";
      return r.value[C];
    }
    on(() => {
      r.value && (e.side === "start" ? d(f()) : e.side === "both" && d(f() / 2 - h() / 2));
    });
    function g(C, D) {
      C === "start" ? i.value = D : C === "end" && (o.value = D);
    }
    function v(C) {
      return C === "start" ? i.value : o.value;
    }
    let w = 0;
    function b(C, D) {
      s.value = D, s.value && p(C);
    }
    function p(C) {
      if (e.mode !== "manual" && !s.value) return;
      const D = v(C);
      if (!r.value || ["empty", "loading"].includes(D)) return;
      w = f(), g(C, "loading");
      function P(O) {
        g(C, O), Vt(() => {
          O === "empty" || O === "error" || (O === "ok" && C === "start" && d(f() - w + u()), e.mode !== "manual" && Vt(() => {
            window.requestAnimationFrame(() => {
              window.requestAnimationFrame(() => {
                window.requestAnimationFrame(() => {
                  p(C);
                });
              });
            });
          }));
        });
      }
      a("load", {
        side: C,
        done: P
      });
    }
    const {
      t: y
    } = ua();
    function S(C, D) {
      if (e.side !== C && e.side !== "both") return;
      const P = () => p(C), O = {
        side: C,
        props: {
          onClick: P,
          color: e.color
        }
      };
      return D === "error" ? n.error?.(O) : D === "empty" ? n.empty?.(O) ?? I("div", null, [y(e.emptyText)]) : e.mode === "manual" ? D === "loading" ? n.loading?.(O) ?? _(Mu, {
        indeterminate: !0,
        color: e.color
      }, null) : n["load-more"]?.(O) ?? _(un, {
        variant: "outlined",
        color: e.color,
        onClick: P
      }, {
        default: () => [y(e.loadMoreText)]
      }) : n.loading?.(O) ?? _(Mu, {
        indeterminate: !0,
        color: e.color
      }, null);
    }
    const {
      dimensionStyles: E
    } = Fa(e);
    Ge(() => {
      const C = e.tag, D = e.side === "start" || e.side === "both", P = e.side === "end" || e.side === "both", O = e.mode === "intersect";
      return _(C, {
        ref: r,
        class: Ie(["v-infinite-scroll", `v-infinite-scroll--${e.direction}`, {
          "v-infinite-scroll--start": D,
          "v-infinite-scroll--end": P
        }]),
        style: Xe(E.value)
      }, {
        default: () => [I("div", {
          class: "v-infinite-scroll__side"
        }, [S("start", i.value)]), D && O && _(lA, {
          key: "start",
          side: "start",
          onIntersect: b,
          rootMargin: l.value
        }, null), n.default?.(), P && O && _(lA, {
          key: "end",
          side: "end",
          onIntersect: b,
          rootMargin: l.value
        }, null), I("div", {
          class: "v-infinite-scroll__side"
        }, [S("end", o.value)])]
      });
    });
  }
}), EO = Symbol.for("vuetify:v-item-group"), r7 = Be({
  ...vt(),
  ..._c({
    selectedClass: "v-item--selected"
  }),
  ...qt(),
  ...sn()
}, "VItemGroup"), i7 = We()({
  name: "VItemGroup",
  props: r7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      isSelected: r,
      select: i,
      next: o,
      prev: l,
      selected: s
    } = ol(e, EO);
    return () => _(e.tag, {
      class: Ie(["v-item-group", a.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.default?.({
        isSelected: r,
        select: i,
        next: o,
        prev: l,
        selected: s.value
      })]
    });
  }
}), o7 = We()({
  name: "VItem",
  props: pc(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isSelected: a,
      select: r,
      toggle: i,
      selectedClass: o,
      value: l,
      disabled: s
    } = vc(e, EO);
    return () => n.default?.({
      isSelected: a.value,
      selectedClass: o.value,
      select: r,
      toggle: i,
      value: l.value,
      disabled: s.value
    });
  }
}), s7 = xo("v-kbd", "kbd"), l7 = Be({
  ...vt(),
  ...La(),
  ...GT()
}, "VLayout"), c7 = We()({
  name: "VLayout",
  props: l7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      layoutClasses: a,
      layoutStyles: r,
      getLayoutItem: i,
      items: o,
      layoutRef: l
    } = JT(e), {
      dimensionStyles: s
    } = Fa(e);
    return Ge(() => I("div", {
      ref: l,
      class: Ie([a.value, e.class]),
      style: Xe([s.value, r.value, e.style])
    }, [n.default?.()])), {
      getLayoutItem: i,
      items: o
    };
  }
}), u7 = Be({
  position: {
    type: String,
    required: !0
  },
  size: {
    type: [Number, String],
    default: 300
  },
  modelValue: Boolean,
  ...vt(),
  ...uc()
}, "VLayoutItem"), d7 = We()({
  name: "VLayoutItem",
  props: u7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      layoutItemStyles: a
    } = dc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: we(() => e.position),
      elementSize: we(() => e.size),
      layoutSize: we(() => e.size),
      active: we(() => e.modelValue),
      absolute: we(() => e.absolute)
    });
    return () => I("div", {
      class: Ie(["v-layout-item", e.class]),
      style: Xe([a.value, e.style])
    }, [n.default?.()]);
  }
}), f7 = Be({
  modelValue: Boolean,
  options: {
    type: Object,
    // For more information on types, navigate to:
    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    default: () => ({
      root: void 0,
      rootMargin: void 0,
      threshold: void 0
    })
  },
  ...vt(),
  ...La(),
  ...qt(),
  ...Gi({
    transition: "fade-transition"
  })
}, "VLazy"), m7 = We()({
  name: "VLazy",
  directives: {
    vIntersect: ns
  },
  props: f7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Fa(e), r = kt(e, "modelValue");
    function i(o) {
      r.value || (r.value = o);
    }
    return Ge(() => an(_(e.tag, {
      class: Ie(["v-lazy", e.class]),
      style: Xe([a.value, e.style])
    }, {
      default: () => [r.value && _(Sr, {
        transition: e.transition,
        appear: !0
      }, {
        default: () => [n.default?.()]
      })]
    }), [[ns, {
      handler: i,
      options: e.options
    }, null]])), {};
  }
}), h7 = Be({
  locale: String,
  fallbackLocale: String,
  messages: Object,
  rtl: {
    type: Boolean,
    default: void 0
  },
  ...vt()
}, "VLocaleProvider"), _7 = We()({
  name: "VLocaleProvider",
  props: h7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      rtlClasses: a
    } = a4(e);
    return Ge(() => I("div", {
      class: Ie(["v-locale-provider", a.value, e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), p7 = Be({
  scrollable: Boolean,
  ...vt(),
  ...La(),
  ...qt({
    tag: "main"
  })
}, "VMain"), v7 = We()({
  name: "VMain",
  props: p7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Fa(e), {
      mainStyles: r
    } = QT(), {
      ssrBootStyles: i
    } = mc();
    return Ge(() => _(e.tag, {
      class: Ie(["v-main", {
        "v-main--scrollable": e.scrollable
      }, e.class]),
      style: Xe([r.value, i.value, a.value, e.style])
    }, {
      default: () => [e.scrollable ? I("div", {
        class: "v-main__scroller"
      }, [n.default?.()]) : n.default?.()]
    })), {};
  }
});
function g7(e) {
  let {
    rootEl: t,
    isSticky: n,
    layoutItemStyles: a
  } = e;
  const r = ot(!1), i = ot(0), o = W(() => {
    const d = typeof r.value == "boolean" ? "top" : r.value;
    return [n.value ? {
      top: "auto",
      bottom: "auto",
      height: void 0
    } : void 0, r.value ? {
      [d]: ht(i.value)
    } : {
      top: a.value.top
    }];
  });
  on(() => {
    nt(n, (d) => {
      d ? window.addEventListener("scroll", s, {
        passive: !0
      }) : window.removeEventListener("scroll", s);
    }, {
      immediate: !0
    });
  }), Ga(() => {
    window.removeEventListener("scroll", s);
  });
  let l = 0;
  function s() {
    const d = l > window.scrollY ? "up" : "down", u = t.value.getBoundingClientRect(), f = parseFloat(a.value.top ?? 0), h = window.scrollY - Math.max(0, i.value - f), g = u.height + Math.max(i.value, f) - window.scrollY - window.innerHeight, v = parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y")) || 0;
    u.height < window.innerHeight - f ? (r.value = "top", i.value = f) : d === "up" && r.value === "bottom" || d === "down" && r.value === "top" ? (i.value = window.scrollY + u.top - v, r.value = !0) : d === "down" && g <= 0 ? (i.value = 0, r.value = "bottom") : d === "up" && h <= 0 && (v ? r.value !== "top" && (i.value = -h + v + f, r.value = "top") : (i.value = u.top + h, r.value = "top")), l = window.scrollY;
  }
  return {
    isStuck: r,
    stickyStyles: o
  };
}
const y7 = 100, b7 = 20;
function cA(e) {
  return (e < 0 ? -1 : 1) * Math.sqrt(Math.abs(e)) * 1.41421356237;
}
function uA(e) {
  if (e.length < 2)
    return 0;
  if (e.length === 2)
    return e[1].t === e[0].t ? 0 : (e[1].d - e[0].d) / (e[1].t - e[0].t);
  let t = 0;
  for (let n = e.length - 1; n > 0; n--) {
    if (e[n].t === e[n - 1].t)
      continue;
    const a = cA(t), r = (e[n].d - e[n - 1].d) / (e[n].t - e[n - 1].t);
    t += (r - a) * Math.abs(r), n === e.length - 1 && (t *= 0.5);
  }
  return cA(t) * 1e3;
}
function w7() {
  const e = {};
  function t(r) {
    Array.from(r.changedTouches).forEach((i) => {
      (e[i.identifier] ?? (e[i.identifier] = new bT(b7))).push([r.timeStamp, i]);
    });
  }
  function n(r) {
    Array.from(r.changedTouches).forEach((i) => {
      delete e[i.identifier];
    });
  }
  function a(r) {
    const i = e[r]?.values().reverse();
    if (!i)
      throw new Error(`No samples for touch id ${r}`);
    const o = i[0], l = [], s = [];
    for (const d of i) {
      if (o[0] - d[0] > y7) break;
      l.push({
        t: d[0],
        d: d[1].clientX
      }), s.push({
        t: d[0],
        d: d[1].clientY
      });
    }
    return {
      x: uA(l),
      y: uA(s),
      get direction() {
        const {
          x: d,
          y: u
        } = this, [f, h] = [Math.abs(d), Math.abs(u)];
        return f > h && d >= 0 ? "right" : f > h && d <= 0 ? "left" : h > f && u >= 0 ? "down" : h > f && u <= 0 ? "up" : k7();
      }
    };
  }
  return {
    addMovement: t,
    endTouch: n,
    getVelocity: a
  };
}
function k7() {
  throw new Error();
}
function S7(e) {
  let {
    el: t,
    isActive: n,
    isTemporary: a,
    width: r,
    touchless: i,
    position: o
  } = e;
  on(() => {
    window.addEventListener("touchstart", y, {
      passive: !0
    }), window.addEventListener("touchmove", S, {
      passive: !1
    }), window.addEventListener("touchend", E, {
      passive: !0
    });
  }), Ga(() => {
    window.removeEventListener("touchstart", y), window.removeEventListener("touchmove", S), window.removeEventListener("touchend", E);
  });
  const l = W(() => ["left", "right"].includes(o.value)), {
    addMovement: s,
    endTouch: d,
    getVelocity: u
  } = w7();
  let f = !1;
  const h = ot(!1), g = ot(0), v = ot(0);
  let w;
  function b(D, P) {
    return (o.value === "left" ? D : o.value === "right" ? document.documentElement.clientWidth - D : o.value === "top" ? D : o.value === "bottom" ? document.documentElement.clientHeight - D : Xc()) - (P ? r.value : 0);
  }
  function p(D) {
    let P = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    const O = o.value === "left" ? (D - v.value) / r.value : o.value === "right" ? (document.documentElement.clientWidth - D - v.value) / r.value : o.value === "top" ? (D - v.value) / r.value : o.value === "bottom" ? (document.documentElement.clientHeight - D - v.value) / r.value : Xc();
    return P ? Pn(O) : O;
  }
  function y(D) {
    if (i.value) return;
    const P = D.changedTouches[0].clientX, O = D.changedTouches[0].clientY, T = 25, A = o.value === "left" ? P < T : o.value === "right" ? P > document.documentElement.clientWidth - T : o.value === "top" ? O < T : o.value === "bottom" ? O > document.documentElement.clientHeight - T : Xc(), V = n.value && (o.value === "left" ? P < r.value : o.value === "right" ? P > document.documentElement.clientWidth - r.value : o.value === "top" ? O < r.value : o.value === "bottom" ? O > document.documentElement.clientHeight - r.value : Xc());
    (A || V || n.value && a.value) && (w = [P, O], v.value = b(l.value ? P : O, n.value), g.value = p(l.value ? P : O), f = v.value > -20 && v.value < 80, d(D), s(D));
  }
  function S(D) {
    const P = D.changedTouches[0].clientX, O = D.changedTouches[0].clientY;
    if (f) {
      if (!D.cancelable) {
        f = !1;
        return;
      }
      const A = Math.abs(P - w[0]), V = Math.abs(O - w[1]);
      (l.value ? A > V && A > 3 : V > A && V > 3) ? (h.value = !0, f = !1) : (l.value ? V : A) > 3 && (f = !1);
    }
    if (!h.value) return;
    D.preventDefault(), s(D);
    const T = p(l.value ? P : O, !1);
    g.value = Math.max(0, Math.min(1, T)), T > 1 ? v.value = b(l.value ? P : O, !0) : T < 0 && (v.value = b(l.value ? P : O, !1));
  }
  function E(D) {
    if (f = !1, !h.value) return;
    s(D), h.value = !1;
    const P = u(D.changedTouches[0].identifier), O = Math.abs(P.x), T = Math.abs(P.y);
    (l.value ? O > T && O > 400 : T > O && T > 3) ? n.value = P.direction === ({
      left: "right",
      right: "left",
      top: "down",
      bottom: "up"
    }[o.value] || Xc()) : n.value = g.value > 0.5;
  }
  const C = W(() => h.value ? {
    transform: o.value === "left" ? `translateX(calc(-100% + ${g.value * r.value}px))` : o.value === "right" ? `translateX(calc(100% - ${g.value * r.value}px))` : o.value === "top" ? `translateY(calc(-100% + ${g.value * r.value}px))` : o.value === "bottom" ? `translateY(calc(100% - ${g.value * r.value}px))` : Xc(),
    transition: "none"
  } : void 0);
  return Fr(h, () => {
    const D = t.value?.style.transform ?? null, P = t.value?.style.transition ?? null;
    Zn(() => {
      t.value?.style.setProperty("transform", C.value?.transform || "none"), t.value?.style.setProperty("transition", C.value?.transition || null);
    }), qa(() => {
      t.value?.style.setProperty("transform", D), t.value?.style.setProperty("transition", P);
    });
  }), {
    isDragging: h,
    dragProgress: g,
    dragStyles: C
  };
}
function Xc() {
  throw new Error();
}
const C7 = ["start", "end", "left", "right", "top", "bottom"], A7 = Be({
  color: String,
  disableResizeWatcher: Boolean,
  disableRouteWatcher: Boolean,
  expandOnHover: Boolean,
  floating: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  permanent: Boolean,
  rail: {
    type: Boolean,
    default: null
  },
  railWidth: {
    type: [Number, String],
    default: 56
  },
  scrim: {
    type: [Boolean, String],
    default: !0
  },
  image: String,
  temporary: Boolean,
  persistent: Boolean,
  touchless: Boolean,
  width: {
    type: [Number, String],
    default: 256
  },
  location: {
    type: String,
    default: "start",
    validator: (e) => C7.includes(e)
  },
  sticky: Boolean,
  ...Qr(),
  ...vt(),
  ...P0(),
  ...cc({
    mobile: null
  }),
  ...za(),
  ...uc(),
  ...Hn(),
  ...qt({
    tag: "nav"
  }),
  ...sn()
}, "VNavigationDrawer"), x7 = We()({
  name: "VNavigationDrawer",
  props: A7(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:rail": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      isRtl: i
    } = Ra(), {
      themeClasses: o
    } = yn(e), {
      borderClasses: l
    } = _i(e), {
      backgroundColorClasses: s,
      backgroundColorStyles: d
    } = An(() => e.color), {
      elevationClasses: u
    } = ir(e), {
      displayClasses: f,
      mobile: h
    } = mi(e), {
      roundedClasses: g
    } = fa(e), v = TE(), w = kt(e, "modelValue", null, (F) => !!F), {
      ssrBootStyles: b
    } = mc(), {
      scopeId: p
    } = yc(), y = Se(), S = ot(!1), {
      runOpenDelay: E,
      runCloseDelay: C
    } = O0(e, (F) => {
      S.value = F;
    }), D = W(() => e.rail && e.expandOnHover && S.value ? Number(e.width) : Number(e.rail ? e.railWidth : e.width)), P = W(() => Uy(e.location, i.value)), O = we(() => e.persistent), T = W(() => !e.permanent && (h.value || e.temporary)), A = W(() => e.sticky && !T.value && P.value !== "bottom");
    Fr(() => e.expandOnHover && e.rail != null, () => {
      nt(S, (F) => a("update:rail", !F));
    }), Fr(() => !e.disableResizeWatcher, () => {
      nt(T, (F) => !e.permanent && Vt(() => w.value = !F));
    }), Fr(() => !e.disableRouteWatcher && !!v, () => {
      nt(v.currentRoute, () => T.value && (w.value = !1));
    }), nt(() => e.permanent, (F) => {
      F && (w.value = !0);
    }), e.modelValue == null && !T.value && (w.value = e.permanent || !h.value);
    const {
      isDragging: V,
      dragProgress: M
    } = S7({
      el: y,
      isActive: w,
      isTemporary: T,
      width: D,
      touchless: we(() => e.touchless),
      position: P
    }), B = W(() => {
      const F = T.value ? 0 : e.rail && e.expandOnHover ? Number(e.railWidth) : D.value;
      return V.value ? F * M.value : F;
    }), {
      layoutItemStyles: N,
      layoutItemScrimStyles: H
    } = dc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: P,
      layoutSize: B,
      elementSize: D,
      active: Uu(w),
      disableTransitions: we(() => V.value),
      absolute: W(() => (
        // eslint-disable-next-line @typescript-eslint/no-use-before-define
        e.absolute || A.value && typeof j.value != "string"
      ))
    }), {
      isStuck: j,
      stickyStyles: te
    } = g7({
      rootEl: y,
      isSticky: A,
      layoutItemStyles: N
    }), de = An(() => typeof e.scrim == "string" ? e.scrim : null), Z = W(() => ({
      ...V.value ? {
        opacity: M.value * 0.2,
        transition: "none"
      } : void 0,
      ...H.value
    }));
    return ca({
      VList: {
        bgColor: "transparent"
      }
    }), Ge(() => {
      const F = r.image || e.image;
      return I(Qe, null, [_(e.tag, He({
        ref: y,
        onMouseenter: E,
        onMouseleave: C,
        class: ["v-navigation-drawer", `v-navigation-drawer--${P.value}`, {
          "v-navigation-drawer--expand-on-hover": e.expandOnHover,
          "v-navigation-drawer--floating": e.floating,
          "v-navigation-drawer--is-hovering": S.value,
          "v-navigation-drawer--rail": e.rail,
          "v-navigation-drawer--temporary": T.value,
          "v-navigation-drawer--persistent": O.value,
          "v-navigation-drawer--active": w.value,
          "v-navigation-drawer--sticky": A.value
        }, o.value, s.value, l.value, f.value, u.value, g.value, e.class],
        style: [d.value, N.value, b.value, te.value, e.style]
      }, p, n), {
        default: () => [F && I("div", {
          key: "image",
          class: "v-navigation-drawer__img"
        }, [r.image ? _(Wt, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              alt: "",
              cover: !0,
              height: "inherit",
              src: e.image
            }
          }
        }, r.image) : _(as, {
          key: "image-img",
          alt: "",
          cover: !0,
          height: "inherit",
          src: e.image
        }, null)]), r.prepend && I("div", {
          class: "v-navigation-drawer__prepend"
        }, [r.prepend?.()]), I("div", {
          class: "v-navigation-drawer__content"
        }, [r.default?.()]), r.append && I("div", {
          class: "v-navigation-drawer__append"
        }, [r.append?.()])]
      }), _(Ur, {
        name: "fade-transition"
      }, {
        default: () => [T.value && (V.value || w.value) && !!e.scrim && I("div", He({
          class: ["v-navigation-drawer__scrim", de.backgroundColorClasses.value],
          style: [Z.value, de.backgroundColorStyles.value],
          onClick: () => {
            O.value || (w.value = !1);
          }
        }, p), null)]
      })]);
    }), {
      isStuck: j
    };
  }
}), T7 = fi({
  name: "VNoSsr",
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = hP();
    return () => a.value && n.default?.();
  }
}), I7 = 50, E7 = 500;
function P7(e) {
  let {
    toggleUpDown: t
  } = e, n = -1, a = -1;
  qa(i);
  function r(l) {
    i(), o(l), n = window.setTimeout(() => {
      a = window.setInterval(() => o(l), I7);
    }, E7);
  }
  function i() {
    window.clearTimeout(n), window.clearInterval(a);
  }
  function o(l) {
    t(l === "up");
  }
  return {
    holdStart: r,
    holdStop: i
  };
}
const O7 = Be({
  controlVariant: {
    type: String,
    default: "default"
  },
  inset: Boolean,
  hideInput: Boolean,
  modelValue: {
    type: Number,
    default: null
  },
  min: {
    type: Number,
    default: Number.MIN_SAFE_INTEGER
  },
  max: {
    type: Number,
    default: Number.MAX_SAFE_INTEGER
  },
  step: {
    type: Number,
    default: 1
  },
  precision: {
    type: Number,
    default: 0
  },
  ...la(rm(), ["modelValue", "validationValue"])
}, "VNumberInput"), D7 = We()({
  name: "VNumberInput",
  props: {
    ...O7()
  },
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Se(), {
      holdStart: r,
      holdStop: i
    } = P7({
      toggleUpDown: P
    }), o = tm(e), l = W(() => o.isDisabled.value || o.isReadonly.value), s = ot(e.focused);
    function d(F) {
      let K = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.precision;
      const se = K == null ? String(F) : F.toFixed(K);
      return s.value ? Number(se).toString() : se;
    }
    const u = kt(e, "modelValue", null, (F) => F ?? null, (F) => F == null ? F ?? null : Pn(Number(F), e.min, e.max)), f = ot(null);
    Zn(() => {
      s.value && !l.value || (u.value == null ? f.value = null : isNaN(u.value) || (f.value = d(u.value)));
    });
    const h = W({
      get: () => f.value,
      set(F) {
        F === null || F === "" ? (u.value = null, f.value = null) : !isNaN(Number(F)) && Number(F) <= e.max && Number(F) >= e.min && (u.value = Number(F), f.value = F);
      }
    }), g = W(() => l.value ? !1 : (u.value ?? 0) + e.step <= e.max), v = W(() => l.value ? !1 : (u.value ?? 0) - e.step >= e.min), w = W(() => e.hideInput ? "stacked" : e.controlVariant), b = we(() => w.value === "split" ? "$plus" : "$collapse"), p = we(() => w.value === "split" ? "$minus" : "$expand"), y = we(() => w.value === "split" ? "default" : "small"), S = we(() => w.value === "stacked" ? "auto" : "100%"), E = {
      props: {
        onClick: A,
        onPointerup: V,
        onPointerdown: M,
        onPointercancel: N
      }
    }, C = {
      props: {
        onClick: A,
        onPointerup: V,
        onPointerdown: B,
        onPointercancel: N
      }
    };
    nt(() => e.precision, () => j()), on(() => {
      H();
    });
    function D(F) {
      if (F == null) return 0;
      const K = F.toString(), se = K.indexOf(".");
      return ~se ? K.length - se : 0;
    }
    function P() {
      let F = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
      if (l.value) return;
      if (u.value == null) {
        h.value = d(Pn(0, e.min, e.max));
        return;
      }
      let K = Math.max(D(u.value), D(e.step));
      e.precision != null && (K = Math.max(K, e.precision)), F ? g.value && (h.value = d(u.value + e.step, K)) : v.value && (h.value = d(u.value - e.step, K));
    }
    function O(F) {
      if (!F.data) return;
      const K = F.target, {
        value: se,
        selectionStart: X,
        selectionEnd: he
      } = K ?? {}, ve = se ? se.slice(0, X) + F.data + se.slice(he) : F.data, pe = p3(ve, e.precision);
      /^-?(\d+(\.\d*)?|(\.\d+)|\d*|\.)$/.test(ve) || (F.preventDefault(), K.value = pe), e.precision != null && (ve.split(".")[1]?.length > e.precision && (F.preventDefault(), K.value = pe), e.precision === 0 && ve.includes(".") && (F.preventDefault(), K.value = pe));
    }
    async function T(F) {
      ["Enter", "ArrowLeft", "ArrowRight", "Backspace", "Delete", "Tab"].includes(F.key) || F.ctrlKey || ["ArrowDown", "ArrowUp"].includes(F.key) && (F.preventDefault(), H(), await Vt(), F.key === "ArrowDown" ? P(!1) : P());
    }
    function A(F) {
      F.stopPropagation();
    }
    function V(F) {
      F.currentTarget?.releasePointerCapture(F.pointerId), F.preventDefault(), F.stopPropagation(), i();
    }
    function M(F) {
      F.currentTarget?.setPointerCapture(F.pointerId), F.preventDefault(), F.stopPropagation(), r("up");
    }
    function B(F) {
      F.currentTarget?.setPointerCapture(F.pointerId), F.preventDefault(), F.stopPropagation(), r("down");
    }
    function N(F) {
      F.currentTarget?.releasePointerCapture(F.pointerId), i();
    }
    function H() {
      if (l.value || !a.value) return;
      const F = a.value.value;
      F && !isNaN(Number(F)) ? h.value = d(Pn(Number(F), e.min, e.max)) : h.value = null;
    }
    function j() {
      if (!l.value) {
        if (u.value === null || isNaN(u.value)) {
          h.value = null;
          return;
        }
        h.value = e.precision == null ? String(u.value) : u.value.toFixed(e.precision);
      }
    }
    function te() {
      if (!l.value) {
        if (u.value === null || isNaN(u.value)) {
          h.value = null;
          return;
        }
        h.value = u.value.toString();
      }
    }
    function de() {
      te();
    }
    function Z() {
      H();
    }
    return Ge(() => {
      const {
        modelValue: F,
        ...K
      } = os.filterProps(e);
      function se() {
        return n.increment ? _(Wt, {
          key: "increment-defaults",
          defaults: {
            VBtn: {
              disabled: !g.value,
              flat: !0,
              height: S.value,
              size: y.value,
              icon: b.value
            }
          }
        }, {
          default: () => [n.increment(E)]
        }) : _(un, {
          "aria-hidden": "true",
          "data-testid": "increment",
          disabled: !g.value,
          flat: !0,
          height: S.value,
          icon: b.value,
          key: "increment-btn",
          onClick: A,
          onPointerdown: M,
          onPointerup: V,
          onPointercancel: N,
          size: y.value,
          tabindex: "-1"
        }, null);
      }
      function X() {
        return n.decrement ? _(Wt, {
          key: "decrement-defaults",
          defaults: {
            VBtn: {
              disabled: !v.value,
              flat: !0,
              height: S.value,
              size: y.value,
              icon: p.value
            }
          }
        }, {
          default: () => [n.decrement(C)]
        }) : _(un, {
          "aria-hidden": "true",
          "data-testid": "decrement",
          disabled: !v.value,
          flat: !0,
          height: S.value,
          icon: p.value,
          key: "decrement-btn",
          onClick: A,
          onPointerdown: B,
          onPointerup: V,
          onPointercancel: N,
          size: y.value,
          tabindex: "-1"
        }, null);
      }
      function he() {
        return I("div", {
          class: "v-number-input__control"
        }, [X(), _(Go, {
          vertical: w.value !== "stacked"
        }, null), se()]);
      }
      function ve() {
        return !e.hideInput && !e.inset ? _(Go, {
          vertical: !0
        }, null) : void 0;
      }
      const pe = w.value === "split" ? I("div", {
        class: "v-number-input__control"
      }, [_(Go, {
        vertical: !0
      }, null), se()]) : e.reverse || w.value === "hidden" ? void 0 : I(Qe, null, [ve(), he()]), z = n["append-inner"] || pe, ke = w.value === "split" ? I("div", {
        class: "v-number-input__control"
      }, [X(), _(Go, {
        vertical: !0
      }, null)]) : e.reverse && w.value !== "hidden" ? I(Qe, null, [he(), ve()]) : void 0, Me = n["prepend-inner"] || ke;
      return _(os, He({
        ref: a
      }, K, {
        modelValue: h.value,
        "onUpdate:modelValue": (Le) => h.value = Le,
        focused: s.value,
        "onUpdate:focused": (Le) => s.value = Le,
        validationValue: u.value,
        onBeforeinput: O,
        onFocus: de,
        onBlur: Z,
        onKeydown: T,
        class: ["v-number-input", {
          "v-number-input--default": w.value === "default",
          "v-number-input--hide-input": e.hideInput,
          "v-number-input--inset": e.inset,
          "v-number-input--reverse": e.reverse,
          "v-number-input--split": w.value === "split",
          "v-number-input--stacked": w.value === "stacked"
        }, e.class],
        style: e.style,
        inputmode: "decimal"
      }), {
        ...n,
        "append-inner": z ? function() {
          for (var Le = arguments.length, ce = new Array(Le), ne = 0; ne < Le; ne++)
            ce[ne] = arguments[ne];
          return I(Qe, null, [n["append-inner"]?.(...ce), pe]);
        } : void 0,
        "prepend-inner": Me ? function() {
          for (var Le = arguments.length, ce = new Array(Le), ne = 0; ne < Le; ne++)
            ce[ne] = arguments[ne];
          return I(Qe, null, [ke, n["prepend-inner"]?.(...ce)]);
        } : void 0
      });
    }), pi({}, a);
  }
}), B7 = Be({
  autofocus: Boolean,
  divider: String,
  focusAll: Boolean,
  label: {
    type: String,
    default: "$vuetify.input.otp"
  },
  length: {
    type: [Number, String],
    default: 6
  },
  modelValue: {
    type: [Number, String],
    default: void 0
  },
  placeholder: String,
  type: {
    type: String,
    default: "number"
  },
  ...La(),
  ...em(),
  ...tl(am({
    variant: "outlined"
  }), ["baseColor", "bgColor", "class", "color", "disabled", "error", "loading", "rounded", "style", "theme", "variant"])
}, "VOtpInput"), V7 = We()({
  name: "VOtpInput",
  props: B7(),
  emits: {
    finish: (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      dimensionStyles: i
    } = Fa(e), {
      isFocused: o,
      focus: l,
      blur: s
    } = ds(e), d = kt(e, "modelValue", "", (T) => T == null ? [] : String(T).split(""), (T) => T.join("")), {
      t: u
    } = ua(), f = W(() => Number(e.length)), h = W(() => Array(f.value).fill(0)), g = Se(-1), v = Se(), w = Se([]), b = W(() => w.value[g.value]), p = bu();
    p.run(() => {
      const {
        intersectionRef: T,
        isIntersecting: A
      } = Gf();
      nt(A, (V) => {
        V && (T.value?.focus(), p.stop());
      }), Zn(() => {
        T.value = w.value[0];
      });
    });
    function y() {
      if (O(b.value.value)) {
        b.value.value = "";
        return;
      }
      const T = d.value.slice(), A = b.value.value;
      T[g.value] = A;
      let V = null;
      g.value > d.value.length ? V = d.value.length + 1 : g.value + 1 !== f.value && (V = "next"), d.value = T, V && Hl(v.value, V);
    }
    function S(T) {
      const A = d.value.slice(), V = g.value;
      let M = null;
      ["ArrowLeft", "ArrowRight", "Backspace", "Delete"].includes(T.key) && (T.preventDefault(), T.key === "ArrowLeft" ? M = "prev" : T.key === "ArrowRight" ? M = "next" : ["Backspace", "Delete"].includes(T.key) && (A[g.value] = "", d.value = A, g.value > 0 && T.key === "Backspace" ? M = "prev" : requestAnimationFrame(() => {
        w.value[V]?.select();
      })), requestAnimationFrame(() => {
        M != null && Hl(v.value, M);
      }));
    }
    function E(T, A) {
      A.preventDefault(), A.stopPropagation();
      const V = A?.clipboardData?.getData("Text").trim().slice(0, f.value) ?? "";
      O(V) || (d.value = V.split(""), w.value?.[T].blur());
    }
    function C() {
      d.value = [];
    }
    function D(T, A) {
      l(), g.value = A;
    }
    function P() {
      s(), g.value = -1;
    }
    function O(T) {
      return e.type === "number" && /[^0-9]/g.test(T);
    }
    return ca({
      VField: {
        color: we(() => e.color),
        bgColor: we(() => e.color),
        baseColor: we(() => e.baseColor),
        disabled: we(() => e.disabled),
        error: we(() => e.error),
        variant: we(() => e.variant)
      }
    }, {
      scoped: !0
    }), nt(d, (T) => {
      T.length === f.value && (g.value = f.value - 1, a("finish", T.join("")));
    }, {
      deep: !0
    }), nt(g, (T) => {
      T < 0 || Vt(() => {
        w.value[T]?.select();
      });
    }), Ge(() => {
      const [T, A] = nl(n);
      return I("div", He({
        class: ["v-otp-input", {
          "v-otp-input--divided": !!e.divider
        }, e.class],
        style: [e.style]
      }, T), [I("div", {
        ref: v,
        class: "v-otp-input__content",
        style: Xe([i.value])
      }, [h.value.map((V, M) => I(Qe, null, [e.divider && M !== 0 && I("span", {
        class: "v-otp-input__divider"
      }, [e.divider]), _(Qs, {
        focused: o.value && e.focusAll || g.value === M,
        key: M
      }, {
        ...r,
        loader: void 0,
        default: () => I("input", {
          ref: (B) => w.value[M] = B,
          "aria-label": u(e.label, M + 1),
          autofocus: M === 0 && e.autofocus,
          autocomplete: "one-time-code",
          class: Ie(["v-otp-input__field"]),
          disabled: e.disabled,
          inputmode: e.type === "number" ? "numeric" : "text",
          min: e.type === "number" ? 0 : void 0,
          maxlength: M === 0 ? f.value : "1",
          placeholder: e.placeholder,
          type: e.type === "number" ? "text" : e.type,
          value: d.value[M],
          onInput: y,
          onFocus: (B) => D(B, M),
          onBlur: P,
          onKeydown: S,
          onPaste: (B) => E(M, B)
        }, null)
      })])), I("input", He({
        class: "v-otp-input-input",
        type: "hidden"
      }, A, {
        value: d.value.join("")
      }), null), _(ko, {
        contained: !0,
        "content-class": "v-otp-input__loader",
        "model-value": !!e.loading,
        persistent: !0
      }, {
        default: () => [r.loader?.() ?? _(Mu, {
          color: typeof e.loading == "boolean" ? void 0 : e.loading,
          indeterminate: !0,
          size: "24",
          width: "2"
        }, null)]
      }), r.default?.()])]);
    }), {
      blur: () => {
        w.value?.some((T) => T.blur());
      },
      focus: () => {
        w.value?.[0].focus();
      },
      reset: C,
      isFocused: o
    };
  }
});
function M7(e) {
  return Math.floor(Math.abs(e)) * Math.sign(e);
}
const R7 = Be({
  scale: {
    type: [Number, String],
    default: 0.5
  },
  ...vt()
}, "VParallax"), L7 = We()({
  name: "VParallax",
  props: R7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      intersectionRef: a,
      isIntersecting: r
    } = Gf(), {
      resizeRef: i,
      contentRect: o
    } = Wi(), {
      height: l
    } = mi(), s = Se();
    Zn(() => {
      a.value = i.value = s.value?.$el;
    });
    let d;
    nt(r, (g) => {
      g ? (d = Ew(a.value), d = d === document.scrollingElement ? document : d, d.addEventListener("scroll", h, {
        passive: !0
      }), h()) : d.removeEventListener("scroll", h);
    }), Ga(() => {
      d?.removeEventListener("scroll", h);
    }), nt(l, h), nt(() => o.value?.height, h);
    const u = W(() => 1 - Pn(Number(e.scale)));
    let f = -1;
    function h() {
      r.value && (cancelAnimationFrame(f), f = requestAnimationFrame(() => {
        const g = (s.value?.$el).querySelector(".v-img__img");
        if (!g) return;
        const v = d instanceof Document ? document.documentElement.clientHeight : d.clientHeight, w = d instanceof Document ? window.scrollY : d.scrollTop, b = a.value.getBoundingClientRect().top + w, p = o.value.height, y = b + (p - v) / 2, S = M7((w - y) * u.value), E = Math.max(1, (u.value * (v - p) + p) / p);
        g.style.setProperty("transform", `translateY(${S}px) scale(${E})`);
      }));
    }
    return Ge(() => _(as, {
      class: Ie(["v-parallax", {
        "v-parallax--active": r.value
      }, e.class]),
      style: Xe(e.style),
      ref: s,
      cover: !0,
      onLoadstart: h,
      onLoad: h
    }, n)), {};
  }
}), F7 = Be({
  ...Sp({
    falseIcon: "$radioOff",
    trueIcon: "$radioOn"
  })
}, "VRadio"), N7 = We()({
  name: "VRadio",
  props: F7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = Gs.filterProps(e);
      return _(Gs, He(a, {
        class: ["v-radio", e.class],
        style: e.style,
        type: "radio"
      }), n);
    }), {};
  }
}), U7 = Be({
  height: {
    type: [Number, String],
    default: "auto"
  },
  ...fs(),
  ...la(A0(), ["multiple"]),
  trueIcon: {
    type: At,
    default: "$radioOn"
  },
  falseIcon: {
    type: At,
    default: "$radioOff"
  },
  type: {
    type: String,
    default: "radio"
  }
}, "VRadioGroup"), $7 = We()({
  name: "VRadioGroup",
  inheritAttrs: !1,
  props: U7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = $r(), i = W(() => e.id || `radio-group-${r}`), o = kt(e, "modelValue");
    return Ge(() => {
      const [l, s] = nl(n), d = hr.filterProps(e), u = Gs.filterProps(e), f = a.label ? a.label({
        label: e.label,
        props: {
          for: i.value
        }
      }) : e.label;
      return _(hr, He({
        class: ["v-radio-group", e.class],
        style: e.style
      }, l, d, {
        modelValue: o.value,
        "onUpdate:modelValue": (h) => o.value = h,
        id: i.value
      }), {
        ...a,
        default: (h) => {
          let {
            id: g,
            messagesId: v,
            isDisabled: w,
            isReadonly: b
          } = h;
          return I(Qe, null, [f && _(Zu, {
            id: g.value
          }, {
            default: () => [f]
          }), _(FE, He(u, {
            id: g.value,
            "aria-describedby": v.value,
            defaultsTarget: "VRadio",
            trueIcon: e.trueIcon,
            falseIcon: e.falseIcon,
            type: e.type,
            disabled: w.value,
            readonly: b.value,
            "aria-labelledby": f ? g.value : void 0,
            multiple: !1
          }, s, {
            modelValue: o.value,
            "onUpdate:modelValue": (p) => o.value = p
          }), a)]);
        }
      });
    }), {};
  }
}), q7 = Be({
  ...em(),
  ...fs(),
  ...RP(),
  strict: Boolean,
  modelValue: {
    type: Array,
    default: () => [0, 0]
  }
}, "VRangeSlider"), H7 = We()({
  name: "VRangeSlider",
  props: q7(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    end: (e) => !0,
    start: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Se(), i = Se(), o = Se(), {
      rtlClasses: l
    } = Ra();
    function s(A) {
      if (!r.value || !i.value) return;
      const V = Vb(A, r.value.$el, e.direction), M = Vb(A, i.value.$el, e.direction), B = Math.abs(V), N = Math.abs(M);
      return B < N || B === N && V < 0 ? r.value.$el : i.value.$el;
    }
    const d = LP(e), u = kt(e, "modelValue", void 0, (A) => A?.length ? A.map((V) => d.roundValue(V)) : [0, 0]), {
      activeThumbRef: f,
      hasLabels: h,
      max: g,
      min: v,
      mousePressed: w,
      onSliderMousedown: b,
      onSliderTouchstart: p,
      position: y,
      trackContainerRef: S,
      readonly: E
    } = FP({
      props: e,
      steps: d,
      onSliderStart: () => {
        a("start", u.value);
      },
      onSliderEnd: (A) => {
        let {
          value: V
        } = A;
        const M = f.value === r.value?.$el ? [V, u.value[1]] : [u.value[0], V];
        !e.strict && M[0] < M[1] && (u.value = M), a("end", u.value);
      },
      onSliderMove: (A) => {
        let {
          value: V
        } = A;
        const [M, B] = u.value;
        !e.strict && M === B && M !== v.value && (f.value = V > M ? i.value?.$el : r.value?.$el, f.value?.focus()), f.value === r.value?.$el ? u.value = [Math.min(V, B), B] : u.value = [M, Math.max(M, V)];
      },
      getActiveThumb: s
    }), {
      isFocused: C,
      focus: D,
      blur: P
    } = ds(e), O = W(() => y(u.value[0])), T = W(() => y(u.value[1]));
    return Ge(() => {
      const A = hr.filterProps(e), V = !!(e.label || n.label || n.prepend);
      return _(hr, He({
        class: ["v-slider", "v-range-slider", {
          "v-slider--has-labels": !!n["tick-label"] || h.value,
          "v-slider--focused": C.value,
          "v-slider--pressed": w.value,
          "v-slider--disabled": e.disabled
        }, l.value, e.class],
        style: e.style,
        ref: o
      }, A, {
        focused: C.value
      }), {
        ...n,
        prepend: V ? (M) => I(Qe, null, [n.label?.(M) ?? (e.label ? _(Zu, {
          class: "v-slider__label",
          text: e.label
        }, null) : void 0), n.prepend?.(M)]) : void 0,
        default: (M) => {
          let {
            id: B,
            messagesId: N
          } = M;
          return I("div", {
            class: "v-slider__container",
            onMousedown: E.value ? void 0 : b,
            onTouchstartPassive: E.value ? void 0 : p
          }, [I("input", {
            id: `${B.value}_start`,
            name: e.name || B.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: u.value[0]
          }, null), I("input", {
            id: `${B.value}_stop`,
            name: e.name || B.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: u.value[1]
          }, null), _(NP, {
            ref: S,
            start: O.value,
            stop: T.value
          }, {
            "tick-label": n["tick-label"]
          }), _(Mb, {
            ref: r,
            "aria-describedby": N.value,
            focused: C && f.value === r.value?.$el,
            modelValue: u.value[0],
            "onUpdate:modelValue": (H) => u.value = [H, u.value[1]],
            onFocus: (H) => {
              D(), f.value = r.value?.$el, g.value !== v.value && u.value[0] === u.value[1] && u.value[1] === v.value && H.relatedTarget !== i.value?.$el && (r.value?.$el.blur(), i.value?.$el.focus());
            },
            onBlur: () => {
              P(), f.value = void 0;
            },
            min: v.value,
            max: u.value[1],
            position: O.value,
            ripple: e.ripple
          }, {
            "thumb-label": n["thumb-label"]
          }), _(Mb, {
            ref: i,
            "aria-describedby": N.value,
            focused: C && f.value === i.value?.$el,
            modelValue: u.value[1],
            "onUpdate:modelValue": (H) => u.value = [u.value[0], H],
            onFocus: (H) => {
              D(), f.value = i.value?.$el, g.value !== v.value && u.value[0] === u.value[1] && u.value[0] === g.value && H.relatedTarget !== r.value?.$el && (i.value?.$el.blur(), r.value?.$el.focus());
            },
            onBlur: () => {
              P(), f.value = void 0;
            },
            min: u.value[0],
            max: g.value,
            position: T.value,
            ripple: e.ripple
          }, {
            "thumb-label": n["thumb-label"]
          })]);
        }
      });
    }), {};
  }
}), z7 = Be({
  name: String,
  itemAriaLabel: {
    type: String,
    default: "$vuetify.rating.ariaLabel.item"
  },
  activeColor: String,
  color: String,
  clearable: Boolean,
  disabled: Boolean,
  emptyIcon: {
    type: At,
    default: "$ratingEmpty"
  },
  fullIcon: {
    type: At,
    default: "$ratingFull"
  },
  halfIncrements: Boolean,
  hover: Boolean,
  length: {
    type: [Number, String],
    default: 5
  },
  readonly: Boolean,
  modelValue: {
    type: [Number, String],
    default: 0
  },
  itemLabels: Array,
  itemLabelPosition: {
    type: String,
    default: "top",
    validator: (e) => ["top", "bottom"].includes(e)
  },
  ripple: Boolean,
  ...vt(),
  ...Qa(),
  ...To(),
  ...qt(),
  ...sn()
}, "VRating"), W7 = We()({
  name: "VRating",
  props: z7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), {
      themeClasses: r
    } = yn(e), i = kt(e, "modelValue"), o = W(() => Pn(parseFloat(i.value), 0, Number(e.length))), l = W(() => ho(Number(e.length), 1)), s = W(() => l.value.flatMap((b) => e.halfIncrements ? [b - 0.5, b] : [b])), d = ot(-1), u = W(() => s.value.map((b) => {
      const p = e.hover && d.value > -1, y = o.value >= b, S = d.value >= b, C = (p ? S : y) ? e.fullIcon : e.emptyIcon, D = e.activeColor ?? e.color, P = y || S ? D : e.color;
      return {
        isFilled: y,
        isHovered: S,
        icon: C,
        color: P
      };
    })), f = W(() => [0, ...s.value].map((b) => {
      function p() {
        d.value = b;
      }
      function y() {
        d.value = -1;
      }
      function S() {
        e.disabled || e.readonly || (i.value = o.value === b && e.clearable ? 0 : b);
      }
      return {
        onMouseenter: e.hover ? p : void 0,
        onMouseleave: e.hover ? y : void 0,
        onClick: S
      };
    })), h = $r(), g = W(() => e.name ?? `v-rating-${h}`);
    function v(b) {
      let {
        value: p,
        index: y,
        showStar: S = !0
      } = b;
      const {
        onMouseenter: E,
        onMouseleave: C,
        onClick: D
      } = f.value[y + 1], P = `${g.value}-${String(p).replace(".", "-")}`, O = {
        color: u.value[y]?.color,
        density: e.density,
        disabled: e.disabled,
        icon: u.value[y]?.icon,
        ripple: e.ripple,
        size: e.size,
        variant: "plain"
      };
      return I(Qe, null, [I("label", {
        for: P,
        class: Ie({
          "v-rating__item--half": e.halfIncrements && p % 1 > 0,
          "v-rating__item--full": e.halfIncrements && p % 1 === 0
        }),
        onMouseenter: E,
        onMouseleave: C,
        onClick: D
      }, [I("span", {
        class: "v-rating__hidden"
      }, [a(e.itemAriaLabel, p, e.length)]), S ? n.item ? n.item({
        ...u.value[y],
        props: O,
        value: p,
        index: y,
        rating: o.value
      }) : _(un, He({
        "aria-label": a(e.itemAriaLabel, p, e.length)
      }, O), null) : void 0]), I("input", {
        class: "v-rating__hidden",
        name: g.value,
        id: P,
        type: "radio",
        value: p,
        checked: o.value === p,
        tabindex: -1,
        readonly: e.readonly,
        disabled: e.disabled
      }, null)]);
    }
    function w(b) {
      return n["item-label"] ? n["item-label"](b) : b.label ? I("span", null, [b.label]) : I("span", null, [ae(" ")]);
    }
    return Ge(() => {
      const b = !!e.itemLabels?.length || n["item-label"];
      return _(e.tag, {
        class: Ie(["v-rating", {
          "v-rating--hover": e.hover,
          "v-rating--readonly": e.readonly
        }, r.value, e.class]),
        style: Xe(e.style)
      }, {
        default: () => [_(v, {
          value: 0,
          index: -1,
          showStar: !1
        }, null), l.value.map((p, y) => I("div", {
          class: "v-rating__wrapper"
        }, [b && e.itemLabelPosition === "top" ? w({
          value: p,
          index: y,
          label: e.itemLabels?.[y]
        }) : void 0, I("div", {
          class: "v-rating__item"
        }, [e.halfIncrements ? I(Qe, null, [_(v, {
          value: p - 0.5,
          index: y * 2
        }, null), _(v, {
          value: p,
          index: y * 2 + 1
        }, null)]) : _(v, {
          value: p,
          index: y
        }, null)]), b && e.itemLabelPosition === "bottom" ? w({
          value: p,
          index: y,
          label: e.itemLabels?.[y]
        }) : void 0]))]
      });
    }), {};
  }
}), j7 = {
  actions: "button@2",
  article: "heading, paragraph",
  avatar: "avatar",
  button: "button",
  card: "image, heading",
  "card-avatar": "image, list-item-avatar",
  chip: "chip",
  "date-picker": "list-item, heading, divider, date-picker-options, date-picker-days, actions",
  "date-picker-options": "text, avatar@2",
  "date-picker-days": "avatar@28",
  divider: "divider",
  heading: "heading",
  image: "image",
  "list-item": "text",
  "list-item-avatar": "avatar, text",
  "list-item-two-line": "sentences",
  "list-item-avatar-two-line": "avatar, sentences",
  "list-item-three-line": "paragraph",
  "list-item-avatar-three-line": "avatar, paragraph",
  ossein: "ossein",
  paragraph: "text@3",
  sentences: "text@2",
  subtitle: "text",
  table: "table-heading, table-thead, table-tbody, table-tfoot",
  "table-heading": "chip, text",
  "table-thead": "heading@6",
  "table-tbody": "table-row-divider@6",
  "table-row-divider": "table-row, divider",
  "table-row": "text@6",
  "table-tfoot": "text@2, avatar@2",
  text: "text"
};
function K7(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  return I("div", {
    class: Ie(["v-skeleton-loader__bone", `v-skeleton-loader__${e}`])
  }, [t]);
}
function dA(e) {
  const [t, n] = e.split("@");
  return Array.from({
    length: n
  }).map(() => Fp(t));
}
function Fp(e) {
  let t = [];
  if (!e) return t;
  const n = j7[e];
  if (e !== n) {
    if (e.includes(",")) return fA(e);
    if (e.includes("@")) return dA(e);
    n.includes(",") ? t = fA(n) : n.includes("@") ? t = dA(n) : n && t.push(Fp(n));
  }
  return [K7(e, t)];
}
function fA(e) {
  return e.replace(/\s/g, "").split(",").map(Fp);
}
const Y7 = Be({
  boilerplate: Boolean,
  color: String,
  loading: Boolean,
  loadingText: {
    type: String,
    default: "$vuetify.loading"
  },
  type: {
    type: [String, Array],
    default: "ossein"
  },
  ...La(),
  ...za(),
  ...sn()
}, "VSkeletonLoader"), G7 = We()({
  name: "VSkeletonLoader",
  props: Y7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.color), {
      dimensionStyles: i
    } = Fa(e), {
      elevationClasses: o
    } = ir(e), {
      themeClasses: l
    } = yn(e), {
      t: s
    } = ua(), d = W(() => Fp(Xn(e.type).join(",")));
    return Ge(() => {
      const u = !n.default || e.loading, f = e.boilerplate || !u ? {} : {
        ariaLive: "polite",
        ariaLabel: s(e.loadingText),
        role: "alert"
      };
      return I("div", He({
        class: ["v-skeleton-loader", {
          "v-skeleton-loader--boilerplate": e.boilerplate
        }, l.value, a.value, o.value],
        style: [r.value, u ? i.value : {}]
      }, f), [u ? d.value : n.default?.()]);
    }), {};
  }
}), Q7 = We()({
  name: "VSlideGroupItem",
  props: pc(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = vc(e, KE);
    return () => n.default?.({
      isSelected: a.isSelected.value,
      select: a.select,
      toggle: a.toggle,
      selectedClass: a.selectedClass.value
    });
  }
});
function J7(e) {
  const t = ot(e());
  let n = -1;
  function a() {
    clearInterval(n);
  }
  function r() {
    a(), Vt(() => t.value = e());
  }
  function i(o) {
    const l = o ? getComputedStyle(o) : {
      transitionDuration: 0.2
    }, s = parseFloat(l.transitionDuration) * 1e3 || 200;
    if (a(), t.value <= 0) return;
    const d = performance.now();
    n = window.setInterval(() => {
      const u = performance.now() - d + s;
      t.value = Math.max(e() - u, 0), t.value <= 0 && a();
    }, s);
  }
  return qa(a), {
    clear: a,
    time: t,
    start: i,
    reset: r
  };
}
const PO = Be({
  multiLine: Boolean,
  text: String,
  timer: [Boolean, String],
  timeout: {
    type: [Number, String],
    default: 5e3
  },
  vertical: Boolean,
  ...us({
    location: "bottom"
  }),
  ...Ju(),
  ...Hn(),
  ...Pi(),
  ...sn(),
  ...la(nm({
    transition: "v-snackbar-transition"
  }), ["persistent", "noClickAnimation", "scrim", "scrollStrategy"])
}, "VSnackbar"), jb = We()({
  name: "VSnackbar",
  props: PO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      positionClasses: r
    } = Xu(e), {
      scopeId: i
    } = yc(), {
      themeClasses: o
    } = yn(e), {
      colorClasses: l,
      colorStyles: s,
      variantClasses: d
    } = hc(e), {
      roundedClasses: u
    } = fa(e), f = J7(() => Number(e.timeout)), h = Se(), g = Se(), v = ot(!1), w = ot(0), b = Se(), p = Gt(vf, void 0);
    Fr(() => !!p, () => {
      const V = QT();
      Zn(() => {
        b.value = V.mainStyles.value;
      });
    }), nt(a, S), nt(() => e.timeout, S), on(() => {
      a.value && S();
    });
    let y = -1;
    function S() {
      f.reset(), window.clearTimeout(y);
      const V = Number(e.timeout);
      if (!a.value || V === -1) return;
      const M = kw(g.value);
      f.start(M), y = window.setTimeout(() => {
        a.value = !1;
      }, V);
    }
    function E() {
      f.reset(), window.clearTimeout(y);
    }
    function C() {
      v.value = !0, E();
    }
    function D() {
      v.value = !1, S();
    }
    function P(V) {
      w.value = V.touches[0].clientY;
    }
    function O(V) {
      Math.abs(w.value - V.changedTouches[0].clientY) > 50 && (a.value = !1);
    }
    function T() {
      v.value && D();
    }
    const A = W(() => e.location.split(" ").reduce((V, M) => (V[`v-snackbar--${M}`] = !0, V), {}));
    return Ge(() => {
      const V = ko.filterProps(e), M = !!(n.default || n.text || e.text);
      return _(ko, He({
        ref: h,
        class: ["v-snackbar", {
          "v-snackbar--active": a.value,
          "v-snackbar--multi-line": e.multiLine && !e.vertical,
          "v-snackbar--timer": !!e.timer,
          "v-snackbar--vertical": e.vertical
        }, A.value, r.value, e.class],
        style: [b.value, e.style]
      }, V, {
        modelValue: a.value,
        "onUpdate:modelValue": (B) => a.value = B,
        contentProps: He({
          class: ["v-snackbar__wrapper", o.value, l.value, u.value, d.value],
          style: [s.value],
          onPointerenter: C,
          onPointerleave: D
        }, V.contentProps),
        persistent: !0,
        noClickAnimation: !0,
        scrim: !1,
        scrollStrategy: "none",
        _disableGlobalStack: !0,
        onTouchstartPassive: P,
        onTouchend: O,
        onAfterLeave: T
      }, i), {
        default: () => [il(!1, "v-snackbar"), e.timer && !v.value && I("div", {
          key: "timer",
          class: "v-snackbar__timer"
        }, [_(bp, {
          ref: g,
          color: typeof e.timer == "string" ? e.timer : "info",
          max: e.timeout,
          "model-value": f.time.value
        }, null)]), M && I("div", {
          key: "content",
          class: "v-snackbar__content",
          role: "status",
          "aria-live": "polite"
        }, [n.text?.() ?? e.text, n.default?.()]), n.actions && _(Wt, {
          defaults: {
            VBtn: {
              variant: "text",
              ripple: !1,
              slim: !0
            }
          }
        }, {
          default: () => [I("div", {
            class: "v-snackbar__actions"
          }, [n.actions({
            isActive: a
          })])]
        })],
        activator: n.activator
      });
    }), pi({}, h);
  }
}), X7 = Be({
  // TODO: Port this to Snackbar on dev
  closable: [Boolean, String],
  closeText: {
    type: String,
    default: "$vuetify.dismiss"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  ...la(PO(), ["modelValue"])
}, "VSnackbarQueue"), Z7 = We()({
  name: "VSnackbarQueue",
  props: X7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = ua(), i = ot(!1), o = ot(!1), l = ot();
    nt(() => e.modelValue.length, (h, g) => {
      !o.value && h > g && d();
    }), nt(i, (h) => {
      h && (o.value = !0);
    });
    function s() {
      e.modelValue.length ? d() : (l.value = void 0, o.value = !1);
    }
    function d() {
      const [h, ...g] = e.modelValue;
      n("update:modelValue", g), l.value = typeof h == "string" ? {
        text: h
      } : h, Vt(() => {
        i.value = !0;
      });
    }
    function u() {
      i.value = !1;
    }
    const f = W(() => ({
      color: typeof e.closable == "string" ? e.closable : void 0,
      text: r(e.closeText)
    }));
    Ge(() => {
      const h = !!(e.closable || a.actions), {
        modelValue: g,
        ...v
      } = jb.filterProps(e);
      return I(Qe, null, [o.value && !!l.value && (a.default ? _(Wt, {
        defaults: {
          VSnackbar: l.value
        }
      }, {
        default: () => [a.default({
          item: l.value
        })]
      }) : _(jb, He(v, l.value, {
        modelValue: i.value,
        "onUpdate:modelValue": (w) => i.value = w,
        onAfterLeave: s
      }), {
        text: a.text ? () => a.text?.({
          item: l.value
        }) : void 0,
        actions: h ? () => I(Qe, null, [a.actions ? _(Wt, {
          defaults: {
            VBtn: f.value
          }
        }, {
          default: () => [a.actions({
            item: l.value,
            props: {
              onClick: u
            }
          })]
        }) : _(un, He(f.value, {
          onClick: u
        }), null)]) : void 0
      }))]);
    });
  }
}), OO = Be({
  autoDraw: Boolean,
  autoDrawDuration: [Number, String],
  autoDrawEasing: {
    type: String,
    default: "ease"
  },
  color: String,
  gradient: {
    type: Array,
    default: () => []
  },
  gradientDirection: {
    type: String,
    validator: (e) => ["top", "bottom", "left", "right"].includes(e),
    default: "top"
  },
  height: {
    type: [String, Number],
    default: 75
  },
  labels: {
    type: Array,
    default: () => []
  },
  labelSize: {
    type: [Number, String],
    default: 7
  },
  lineWidth: {
    type: [String, Number],
    default: 4
  },
  id: String,
  itemValue: {
    type: String,
    default: "value"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  min: [String, Number],
  max: [String, Number],
  padding: {
    type: [String, Number],
    default: 8
  },
  showLabels: Boolean,
  smooth: [Boolean, String, Number],
  width: {
    type: [Number, String],
    default: 300
  }
}, "Line"), DO = Be({
  autoLineWidth: Boolean,
  ...OO()
}, "VBarline"), mA = We()({
  name: "VBarline",
  props: DO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = $r(), r = W(() => e.id || `barline-${a}`), i = W(() => Number(e.autoDrawDuration) || 500), o = W(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), l = W(() => parseFloat(e.lineWidth) || 4), s = W(() => Math.max(e.modelValue.length * l.value, Number(e.width))), d = W(() => ({
      minX: 0,
      maxX: s.value,
      minY: 0,
      maxY: parseInt(e.height, 10)
    })), u = W(() => e.modelValue.map((b) => Da(b, e.itemValue, b)));
    function f(b, p) {
      const {
        minX: y,
        maxX: S,
        minY: E,
        maxY: C
      } = p, D = b.length;
      let P = e.max != null ? Number(e.max) : Math.max(...b), O = e.min != null ? Number(e.min) : Math.min(...b);
      O > 0 && e.min == null && (O = 0), P < 0 && e.max == null && (P = 0);
      const T = S / D, A = (C - E) / (P - O || 1), V = C - Math.abs(O * A);
      return b.map((M, B) => {
        const N = Math.abs(A * M);
        return {
          x: y + B * T,
          y: V - N + +(M < 0) * N,
          height: N,
          value: M
        };
      });
    }
    const h = W(() => {
      const b = [], p = f(u.value, d.value), y = p.length;
      for (let S = 0; b.length < y; S++) {
        const E = p[S];
        let C = e.labels[S];
        C || (C = typeof E == "object" ? E.value : E), b.push({
          x: E.x,
          value: String(C)
        });
      }
      return b;
    }), g = W(() => f(u.value, d.value)), v = W(() => (Math.abs(g.value[0].x - g.value[1].x) - l.value) / 2), w = W(() => typeof e.smooth == "boolean" ? e.smooth ? 2 : 0 : Number(e.smooth));
    Ge(() => {
      const b = e.gradient.slice().length ? e.gradient.slice().reverse() : [""];
      return I("svg", {
        display: "block"
      }, [I("defs", null, [I("linearGradient", {
        id: r.value,
        gradientUnits: "userSpaceOnUse",
        x1: e.gradientDirection === "left" ? "100%" : "0",
        y1: e.gradientDirection === "top" ? "100%" : "0",
        x2: e.gradientDirection === "right" ? "100%" : "0",
        y2: e.gradientDirection === "bottom" ? "100%" : "0"
      }, [b.map((p, y) => I("stop", {
        offset: y / Math.max(b.length - 1, 1),
        "stop-color": p || "currentColor"
      }, null))])]), I("clipPath", {
        id: `${r.value}-clip`
      }, [g.value.map((p) => I("rect", {
        x: p.x + v.value,
        y: p.y,
        width: l.value,
        height: p.height,
        rx: w.value,
        ry: w.value
      }, [e.autoDraw && I(Qe, null, [I("animate", {
        attributeName: "y",
        from: p.y + p.height,
        to: p.y,
        dur: `${i.value}ms`,
        fill: "freeze"
      }, null), I("animate", {
        attributeName: "height",
        from: "0",
        to: p.height,
        dur: `${i.value}ms`,
        fill: "freeze"
      }, null)])]))]), o.value && I("g", {
        key: "labels",
        style: {
          textAnchor: "middle",
          dominantBaseline: "mathematical",
          fill: "currentColor"
        }
      }, [h.value.map((p, y) => I("text", {
        x: p.x + v.value + l.value / 2,
        y: parseInt(e.height, 10) - 2 + (parseInt(e.labelSize, 10) || 7 * 0.75),
        "font-size": Number(e.labelSize) || 7
      }, [n.label?.({
        index: y,
        value: p.value
      }) ?? p.value]))]), I("g", {
        "clip-path": `url(#${r.value}-clip)`,
        fill: `url(#${r.value})`
      }, [I("rect", {
        x: 0,
        y: 0,
        width: Math.max(e.modelValue.length * l.value, Number(e.width)),
        height: e.height
      }, null)])]);
    });
  }
});
function eY(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 75;
  if (e.length === 0) return "";
  const r = e.shift(), i = e[e.length - 1];
  return (n ? `M${r.x} ${a - r.x + 2} L${r.x} ${r.y}` : `M${r.x} ${r.y}`) + e.map((o, l) => {
    const s = e[l + 1], d = e[l - 1] || r, u = s && tY(s, o, d);
    if (!s || u)
      return `L${o.x} ${o.y}`;
    const f = Math.min(hA(d, o), hA(s, o)), g = f / 2 < t ? f / 2 : t, v = _A(d, o, g), w = _A(s, o, g);
    return `L${v.x} ${v.y}S${o.x} ${o.y} ${w.x} ${w.y}`;
  }).join("") + (n ? `L${i.x} ${a - r.x + 2} Z` : "");
}
function Vh(e) {
  return parseInt(e, 10);
}
function tY(e, t, n) {
  return Vh(e.x + n.x) === Vh(2 * t.x) && Vh(e.y + n.y) === Vh(2 * t.y);
}
function hA(e, t) {
  return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
}
function _A(e, t, n) {
  const a = {
    x: e.x - t.x,
    y: e.y - t.y
  }, r = Math.sqrt(a.x * a.x + a.y * a.y), i = {
    x: a.x / r,
    y: a.y / r
  };
  return {
    x: t.x + i.x * n,
    y: t.y + i.y * n
  };
}
const BO = Be({
  fill: Boolean,
  ...OO()
}, "VTrendline"), pA = We()({
  name: "VTrendline",
  props: BO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = $r(), r = W(() => e.id || `trendline-${a}`), i = W(() => Number(e.autoDrawDuration) || (e.fill ? 500 : 2e3)), o = Se(0), l = Se(null);
    function s(b, p) {
      const {
        minX: y,
        maxX: S,
        minY: E,
        maxY: C
      } = p, D = b.length, P = e.max != null ? Number(e.max) : Math.max(...b), O = e.min != null ? Number(e.min) : Math.min(...b), T = (S - y) / (D - 1), A = (C - E) / (P - O || 1);
      return b.map((V, M) => ({
        x: y + M * T,
        y: C - (V - O) * A,
        value: V
      }));
    }
    const d = W(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), u = W(() => parseFloat(e.lineWidth) || 4), f = W(() => Number(e.width)), h = W(() => {
      const b = Number(e.padding);
      return {
        minX: b,
        maxX: f.value - b,
        minY: b,
        maxY: parseInt(e.height, 10) - b
      };
    }), g = W(() => e.modelValue.map((b) => Da(b, e.itemValue, b))), v = W(() => {
      const b = [], p = s(g.value, h.value), y = p.length;
      for (let S = 0; b.length < y; S++) {
        const E = p[S];
        let C = e.labels[S];
        C || (C = typeof E == "object" ? E.value : E), b.push({
          x: E.x,
          value: String(C)
        });
      }
      return b;
    });
    nt(() => e.modelValue, async () => {
      if (await Vt(), !e.autoDraw || !l.value) return;
      const b = l.value, p = b.getTotalLength();
      e.fill ? (b.style.transformOrigin = "bottom center", b.style.transition = "none", b.style.transform = "scaleY(0)", b.getBoundingClientRect(), b.style.transition = `transform ${i.value}ms ${e.autoDrawEasing}`, b.style.transform = "scaleY(1)") : (b.style.strokeDasharray = `${p}`, b.style.strokeDashoffset = `${p}`, b.getBoundingClientRect(), b.style.transition = `stroke-dashoffset ${i.value}ms ${e.autoDrawEasing}`, b.style.strokeDashoffset = "0"), o.value = p;
    }, {
      immediate: !0
    });
    function w(b) {
      const p = typeof e.smooth == "boolean" ? e.smooth ? 8 : 0 : Number(e.smooth);
      return eY(s(g.value, h.value), p, b, parseInt(e.height, 10));
    }
    Ge(() => {
      const b = e.gradient.slice().length ? e.gradient.slice().reverse() : [""];
      return I("svg", {
        display: "block",
        "stroke-width": parseFloat(e.lineWidth) ?? 4
      }, [I("defs", null, [I("linearGradient", {
        id: r.value,
        gradientUnits: "userSpaceOnUse",
        x1: e.gradientDirection === "left" ? "100%" : "0",
        y1: e.gradientDirection === "top" ? "100%" : "0",
        x2: e.gradientDirection === "right" ? "100%" : "0",
        y2: e.gradientDirection === "bottom" ? "100%" : "0"
      }, [b.map((p, y) => I("stop", {
        offset: y / Math.max(b.length - 1, 1),
        "stop-color": p || "currentColor"
      }, null))])]), d.value && I("g", {
        key: "labels",
        style: {
          textAnchor: "middle",
          dominantBaseline: "mathematical",
          fill: "currentColor"
        }
      }, [v.value.map((p, y) => I("text", {
        x: p.x + u.value / 2 + u.value / 2,
        y: parseInt(e.height, 10) - 4 + (parseInt(e.labelSize, 10) || 7 * 0.75),
        "font-size": Number(e.labelSize) || 7
      }, [n.label?.({
        index: y,
        value: p.value
      }) ?? p.value]))]), I("path", {
        ref: l,
        d: w(e.fill),
        fill: e.fill ? `url(#${r.value})` : "none",
        stroke: e.fill ? "none" : `url(#${r.value})`
      }, null), e.fill && I("path", {
        d: w(!1),
        fill: "none",
        stroke: e.color ?? e.gradient?.[0]
      }, null)]);
    });
  }
}), nY = Be({
  type: {
    type: String,
    default: "trend"
  },
  ...DO(),
  ...BO()
}, "VSparkline"), aY = We()({
  name: "VSparkline",
  props: nY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      textColorClasses: a,
      textColorStyles: r
    } = mr(() => e.color), i = W(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), o = W(() => {
      let l = parseInt(e.height, 10);
      return i.value && (l += parseInt(e.labelSize, 10) * 1.5), l;
    });
    Ge(() => {
      const l = e.type === "trend" ? pA : mA, s = e.type === "trend" ? pA.filterProps(e) : mA.filterProps(e);
      return _(l, He({
        key: e.type,
        class: a.value,
        style: r.value,
        viewBox: `0 0 ${e.width} ${parseInt(o.value, 10)}`
      }, s), n);
    });
  }
}), rY = Be({
  ...vt(),
  ...vP({
    offset: 8,
    minWidth: 0,
    openDelay: 0,
    closeDelay: 100,
    location: "top center",
    transition: "scale-transition"
  })
}, "VSpeedDial"), iY = We()({
  name: "VSpeedDial",
  props: rY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), r = Se(), i = W(() => {
      const [l, s = "center"] = e.location?.split(" ") ?? [];
      return `${l} ${s}`;
    }), o = W(() => ({
      [`v-speed-dial__content--${i.value.replace(" ", "-")}`]: !0
    }));
    return Ge(() => {
      const l = Ru.filterProps(e);
      return _(Ru, He(l, {
        modelValue: a.value,
        "onUpdate:modelValue": (s) => a.value = s,
        class: e.class,
        style: e.style,
        contentClass: ["v-speed-dial__content", o.value, e.contentClass],
        location: i.value,
        ref: r,
        transition: "fade-transition"
      }), {
        ...n,
        default: (s) => _(Wt, {
          defaults: {
            VBtn: {
              size: "small"
            }
          }
        }, {
          default: () => [_(Sr, {
            appear: !0,
            group: !0,
            transition: e.transition
          }, {
            default: () => [n.default?.(s)]
          })]
        })
      });
    }), {};
  }
}), e1 = Symbol.for("vuetify:v-stepper"), VO = Be({
  color: String,
  disabled: {
    type: [Boolean, String],
    default: !1
  },
  prevText: {
    type: String,
    default: "$vuetify.stepper.prev"
  },
  nextText: {
    type: String,
    default: "$vuetify.stepper.next"
  }
}, "VStepperActions"), MO = We()({
  name: "VStepperActions",
  props: VO(),
  emits: {
    "click:prev": () => !0,
    "click:next": () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = ua();
    function i() {
      n("click:prev");
    }
    function o() {
      n("click:next");
    }
    return Ge(() => {
      const l = {
        onClick: i
      }, s = {
        onClick: o
      };
      return I("div", {
        class: "v-stepper-actions"
      }, [_(Wt, {
        defaults: {
          VBtn: {
            disabled: ["prev", !0].includes(e.disabled),
            text: r(e.prevText),
            variant: "text"
          }
        }
      }, {
        default: () => [a.prev?.({
          props: l
        }) ?? _(un, l, null)]
      }), _(Wt, {
        defaults: {
          VBtn: {
            color: e.color,
            disabled: ["next", !0].includes(e.disabled),
            text: r(e.nextText),
            variant: "tonal"
          }
        }
      }, {
        default: () => [a.next?.({
          props: s
        }) ?? _(un, s, null)]
      })]);
    }), {};
  }
}), RO = xo("v-stepper-header"), oY = Be({
  color: String,
  title: String,
  subtitle: String,
  complete: Boolean,
  completeIcon: {
    type: At,
    default: "$complete"
  },
  editable: Boolean,
  editIcon: {
    type: At,
    default: "$edit"
  },
  error: Boolean,
  errorIcon: {
    type: At,
    default: "$error"
  },
  icon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  rules: {
    type: Array,
    default: () => []
  }
}, "StepperItem"), sY = Be({
  ...oY(),
  ...pc()
}, "VStepperItem"), LO = We()({
  name: "VStepperItem",
  directives: {
    vRipple: Cr
  },
  props: sY(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = vc(e, e1, !0), r = W(() => a?.value.value ?? e.value), i = W(() => e.rules.every((h) => h() === !0)), o = W(() => !e.disabled && e.editable), l = W(() => !e.disabled && e.editable), s = W(() => e.error || !i.value), d = W(() => e.complete || e.rules.length > 0 && i.value), u = W(() => s.value ? e.errorIcon : d.value ? e.completeIcon : a.isSelected.value && e.editable ? e.editIcon : e.icon), f = W(() => ({
      canEdit: l.value,
      hasError: s.value,
      hasCompleted: d.value,
      title: e.title,
      subtitle: e.subtitle,
      step: r.value,
      value: e.value
    }));
    return Ge(() => {
      const h = (!a || a.isSelected.value || d.value || l.value) && !s.value && !e.disabled, g = !!(e.title != null || n.title), v = !!(e.subtitle != null || n.subtitle);
      function w() {
        a?.toggle();
      }
      return an(I("button", {
        class: Ie(["v-stepper-item", {
          "v-stepper-item--complete": d.value,
          "v-stepper-item--disabled": e.disabled,
          "v-stepper-item--error": s.value
        }, a?.selectedClass.value]),
        disabled: !e.editable,
        type: "button",
        onClick: w
      }, [o.value && il(!0, "v-stepper-item"), _(Ei, {
        key: "stepper-avatar",
        class: "v-stepper-item__avatar",
        color: h ? e.color : void 0,
        size: 24
      }, {
        default: () => [n.icon?.(f.value) ?? (u.value ? _(pn, {
          icon: u.value
        }, null) : r.value)]
      }), I("div", {
        class: "v-stepper-item__content"
      }, [g && I("div", {
        key: "title",
        class: "v-stepper-item__title"
      }, [n.title?.(f.value) ?? e.title]), v && I("div", {
        key: "subtitle",
        class: "v-stepper-item__subtitle"
      }, [n.subtitle?.(f.value) ?? e.subtitle]), n.default?.(f.value)])]), [[Cr, e.ripple && e.editable, null]]);
    }), {};
  }
}), lY = Be({
  ...la(Tp(), ["continuous", "nextIcon", "prevIcon", "showArrows", "touch", "mandatory"])
}, "VStepperWindow"), FO = We()({
  name: "VStepperWindow",
  props: lY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(e1, null), r = kt(e, "modelValue"), i = W({
      get() {
        return r.value != null || !a ? r.value : a.items.value.find((o) => a.selected.value.includes(o.id))?.value;
      },
      set(o) {
        r.value = o;
      }
    });
    return Ge(() => {
      const o = ac.filterProps(e);
      return _(ac, He({
        _as: "VStepperWindow"
      }, o, {
        modelValue: i.value,
        "onUpdate:modelValue": (l) => i.value = l,
        class: ["v-stepper-window", e.class],
        style: e.style,
        mandatory: !1,
        touch: !1
      }), n);
    }), {};
  }
}), cY = Be({
  ...Ip()
}, "VStepperWindowItem"), NO = We()({
  name: "VStepperWindowItem",
  props: cY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = rc.filterProps(e);
      return _(rc, He({
        _as: "VStepperWindowItem"
      }, a, {
        class: ["v-stepper-window-item", e.class],
        style: e.style
      }), n);
    }), {};
  }
}), uY = Be({
  altLabels: Boolean,
  bgColor: String,
  completeIcon: At,
  editIcon: At,
  editable: Boolean,
  errorIcon: At,
  hideActions: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  itemTitle: {
    type: String,
    default: "title"
  },
  itemValue: {
    type: String,
    default: "value"
  },
  nonLinear: Boolean,
  flat: Boolean,
  ...cc()
}, "Stepper"), dY = Be({
  ...uY(),
  ..._c({
    mandatory: "force",
    selectedClass: "v-stepper-item--selected"
  }),
  ...F0(),
  ...tl(VO(), ["prevText", "nextText"])
}, "VStepper"), fY = We()({
  name: "VStepper",
  props: dY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      items: a,
      next: r,
      prev: i,
      selected: o
    } = ol(e, e1), {
      displayClasses: l,
      mobile: s
    } = mi(e), {
      completeIcon: d,
      editIcon: u,
      errorIcon: f,
      color: h,
      editable: g,
      prevText: v,
      nextText: w
    } = $u(e), b = W(() => e.items.map((S, E) => {
      const C = Da(S, e.itemTitle, S), D = Da(S, e.itemValue, E + 1);
      return {
        title: C,
        value: D,
        raw: S
      };
    })), p = W(() => a.value.findIndex((S) => o.value.includes(S.id))), y = W(() => e.disabled ? e.disabled : p.value === 0 ? "prev" : p.value === a.value.length - 1 ? "next" : !1);
    return ca({
      VStepperItem: {
        editable: g,
        errorIcon: f,
        completeIcon: d,
        editIcon: u,
        prevText: v,
        nextText: w
      },
      VStepperActions: {
        color: h,
        disabled: y,
        prevText: v,
        nextText: w
      }
    }), Ge(() => {
      const S = Df.filterProps(e), E = !!(n.header || e.items.length), C = e.items.length > 0, D = !e.hideActions && !!(C || n.actions);
      return _(Df, He(S, {
        color: e.bgColor,
        class: ["v-stepper", {
          "v-stepper--alt-labels": e.altLabels,
          "v-stepper--flat": e.flat,
          "v-stepper--non-linear": e.nonLinear,
          "v-stepper--mobile": s.value
        }, l.value, e.class],
        style: e.style
      }), {
        default: () => [E && _(RO, {
          key: "stepper-header"
        }, {
          default: () => [b.value.map((P, O) => {
            let {
              raw: T,
              ...A
            } = P;
            return I(Qe, null, [!!O && _(Go, null, null), _(LO, A, {
              default: n[`header-item.${A.value}`] ?? n.header,
              icon: n.icon,
              title: n.title,
              subtitle: n.subtitle
            })]);
          })]
        }), C && _(FO, {
          key: "stepper-window"
        }, {
          default: () => [b.value.map((P) => _(NO, {
            value: P.value
          }, {
            default: () => n[`item.${P.value}`]?.(P) ?? n.item?.(P)
          }))]
        }), n.default?.({
          prev: i,
          next: r
        }), D && (n.actions?.({
          next: r,
          prev: i
        }) ?? _(MO, {
          key: "stepper-actions",
          "onClick:prev": i,
          "onClick:next": r
        }, n))]
      });
    }), {
      prev: i,
      next: r
    };
  }
}), mY = Be({
  indeterminate: Boolean,
  inset: Boolean,
  flat: Boolean,
  loading: {
    type: [Boolean, String],
    default: !1
  },
  ...fs(),
  ...Sp()
}, "VSwitch"), hY = We()({
  name: "VSwitch",
  inheritAttrs: !1,
  props: mY(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:indeterminate": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = kt(e, "indeterminate"), i = kt(e, "modelValue"), {
      loaderClasses: o
    } = Qf(e), {
      isFocused: l,
      focus: s,
      blur: d
    } = ds(e), u = Se(), f = vn && window.matchMedia("(forced-colors: active)").matches, h = we(() => typeof e.loading == "string" && e.loading !== "" ? e.loading : e.color), g = $r(), v = we(() => e.id || `switch-${g}`);
    function w() {
      r.value && (r.value = !1);
    }
    function b(p) {
      p.stopPropagation(), p.preventDefault(), u.value?.input?.click();
    }
    return Ge(() => {
      const [p, y] = nl(n), S = hr.filterProps(e), E = Gs.filterProps(e);
      return _(hr, He({
        class: ["v-switch", {
          "v-switch--flat": e.flat
        }, {
          "v-switch--inset": e.inset
        }, {
          "v-switch--indeterminate": r.value
        }, o.value, e.class]
      }, p, S, {
        modelValue: i.value,
        "onUpdate:modelValue": (C) => i.value = C,
        id: v.value,
        focused: l.value,
        style: e.style
      }), {
        ...a,
        default: (C) => {
          let {
            id: D,
            messagesId: P,
            isDisabled: O,
            isReadonly: T,
            isValid: A
          } = C;
          const V = {
            model: i,
            isValid: A
          };
          return _(Gs, He({
            ref: u
          }, E, {
            modelValue: i.value,
            "onUpdate:modelValue": [(M) => i.value = M, w],
            id: D.value,
            "aria-describedby": P.value,
            type: "checkbox",
            "aria-checked": r.value ? "mixed" : void 0,
            disabled: O.value,
            readonly: T.value,
            onFocus: s,
            onBlur: d
          }, y), {
            ...a,
            default: (M) => {
              let {
                backgroundColorClasses: B,
                backgroundColorStyles: N
              } = M;
              return I("div", {
                class: Ie(["v-switch__track", f ? void 0 : B.value]),
                style: Xe(N.value),
                onClick: b
              }, [a["track-true"] && I("div", {
                key: "prepend",
                class: "v-switch__track-true"
              }, [a["track-true"](V)]), a["track-false"] && I("div", {
                key: "append",
                class: "v-switch__track-false"
              }, [a["track-false"](V)])]);
            },
            input: (M) => {
              let {
                inputNode: B,
                icon: N,
                backgroundColorClasses: H,
                backgroundColorStyles: j
              } = M;
              return I(Qe, null, [B, I("div", {
                class: Ie(["v-switch__thumb", {
                  "v-switch__thumb--filled": N || e.loading
                }, e.inset || f ? void 0 : H.value]),
                style: Xe(e.inset ? void 0 : j.value)
              }, [a.thumb ? _(Wt, {
                defaults: {
                  VIcon: {
                    icon: N,
                    size: "x-small"
                  }
                }
              }, {
                default: () => [a.thumb({
                  ...V,
                  icon: N
                })]
              }) : _(b0, null, {
                default: () => [e.loading ? _(Jf, {
                  name: "v-switch",
                  active: !0,
                  color: A.value === !1 ? void 0 : h.value
                }, {
                  default: (te) => a.loader ? a.loader(te) : _(Mu, {
                    active: te.isActive,
                    color: te.color,
                    indeterminate: !0,
                    size: "16",
                    width: "2"
                  }, null)
                }) : N && _(pn, {
                  key: String(N),
                  icon: N,
                  size: "x-small"
                }, null)]
              })])]);
            }
          });
        }
      });
    }), {};
  }
}), _Y = Be({
  color: String,
  height: [Number, String],
  window: Boolean,
  ...vt(),
  ...za(),
  ...uc(),
  ...Hn(),
  ...qt(),
  ...sn()
}, "VSystemBar"), pY = We()({
  name: "VSystemBar",
  props: _Y(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e), {
      ssrBootStyles: s
    } = mc(), d = W(() => e.height ?? (e.window ? 32 : 24)), {
      layoutItemStyles: u
    } = dc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: ot("top"),
      layoutSize: d,
      elementSize: d,
      active: W(() => !0),
      absolute: we(() => e.absolute)
    });
    return Ge(() => _(e.tag, {
      class: Ie(["v-system-bar", {
        "v-system-bar--window": e.window
      }, a.value, r.value, o.value, l.value, e.class]),
      style: Xe([i.value, u.value, s.value, e.style])
    }, n)), {};
  }
}), t1 = Symbol.for("vuetify:v-tabs"), vY = Be({
  fixed: Boolean,
  sliderColor: String,
  hideSlider: Boolean,
  direction: {
    type: String,
    default: "horizontal"
  },
  ...la(kp({
    selectedClass: "v-tab--selected",
    variant: "text"
  }), ["active", "block", "flat", "location", "position", "symbol"])
}, "VTab"), UO = We()({
  name: "VTab",
  props: vY(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    const {
      textColorClasses: r,
      textColorStyles: i
    } = mr(() => e.sliderColor), o = Se(), l = Se(), s = W(() => e.direction === "horizontal"), d = W(() => o.value?.group?.isSelected.value ?? !1);
    function u(f) {
      let {
        value: h
      } = f;
      if (h) {
        const g = o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"), v = l.value;
        if (!g || !v) return;
        const w = getComputedStyle(g).color, b = g.getBoundingClientRect(), p = v.getBoundingClientRect(), y = s.value ? "x" : "y", S = s.value ? "X" : "Y", E = s.value ? "right" : "bottom", C = s.value ? "width" : "height", D = b[y], P = p[y], O = D > P ? b[E] - p[E] : b[y] - p[y], T = Math.sign(O) > 0 ? s.value ? "right" : "bottom" : Math.sign(O) < 0 ? s.value ? "left" : "top" : "center", V = (Math.abs(O) + (Math.sign(O) < 0 ? b[C] : p[C])) / Math.max(b[C], p[C]) || 0, M = b[C] / p[C] || 0, B = 1.5;
        Fl(v, {
          backgroundColor: [w, "currentcolor"],
          transform: [`translate${S}(${O}px) scale${S}(${M})`, `translate${S}(${O / B}px) scale${S}(${(V - 1) / B + 1})`, "none"],
          transformOrigin: Array(3).fill(T)
        }, {
          duration: 225,
          easing: _f
        });
      }
    }
    return Ge(() => {
      const f = un.filterProps(e);
      return _(un, He({
        symbol: t1,
        ref: o,
        class: ["v-tab", e.class],
        style: e.style,
        tabindex: d.value ? 0 : -1,
        role: "tab",
        "aria-selected": String(d.value),
        active: !1
      }, f, a, {
        block: e.fixed,
        maxWidth: e.fixed ? 300 : void 0,
        "onGroup:selected": u
      }), {
        ...n,
        default: () => I(Qe, null, [n.default?.() ?? e.text, !e.hideSlider && I("div", {
          ref: l,
          class: Ie(["v-tab__slider", r.value]),
          style: Xe(i.value)
        }, null)])
      });
    }), pi({}, o);
  }
}), gY = Be({
  ...la(Tp(), ["continuous", "nextIcon", "prevIcon", "showArrows", "touch", "mandatory"])
}, "VTabsWindow"), $O = We()({
  name: "VTabsWindow",
  props: gY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(t1, null), r = kt(e, "modelValue"), i = W({
      get() {
        return r.value != null || !a ? r.value : a.items.value.find((o) => a.selected.value.includes(o.id))?.value;
      },
      set(o) {
        r.value = o;
      }
    });
    return Ge(() => {
      const o = ac.filterProps(e);
      return _(ac, He({
        _as: "VTabsWindow"
      }, o, {
        modelValue: i.value,
        "onUpdate:modelValue": (l) => i.value = l,
        class: ["v-tabs-window", e.class],
        style: e.style,
        mandatory: !1,
        touch: !1
      }), n);
    }), {};
  }
}), yY = Be({
  ...Ip()
}, "VTabsWindowItem"), qO = We()({
  name: "VTabsWindowItem",
  props: yY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = rc.filterProps(e);
      return _(rc, He({
        _as: "VTabsWindowItem"
      }, a, {
        class: ["v-tabs-window-item", e.class],
        style: e.style
      }), n);
    }), {};
  }
});
function bY(e) {
  return e ? e.map((t) => mf(t) ? t : {
    text: t,
    value: t
  }) : [];
}
const wY = Be({
  alignTabs: {
    type: String,
    default: "start"
  },
  color: String,
  fixedTabs: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  stacked: Boolean,
  bgColor: String,
  grow: Boolean,
  height: {
    type: [Number, String],
    default: void 0
  },
  hideSlider: Boolean,
  sliderColor: String,
  ...x0({
    mandatory: "force",
    selectedClass: "v-tab-item--selected"
  }),
  ...Qa(),
  ...qt()
}, "VTabs"), kY = We()({
  name: "VTabs",
  props: wY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), i = W(() => bY(e.items)), {
      densityClasses: o
    } = Ar(e), {
      backgroundColorClasses: l,
      backgroundColorStyles: s
    } = An(() => e.bgColor), {
      scopeId: d
    } = yc();
    return ca({
      VTab: {
        color: we(() => e.color),
        direction: we(() => e.direction),
        stacked: we(() => e.stacked),
        fixed: we(() => e.fixedTabs),
        sliderColor: we(() => e.sliderColor),
        hideSlider: we(() => e.hideSlider)
      }
    }), Ge(() => {
      const u = Pf.filterProps(e), f = !!(a.window || e.items.length > 0);
      return I(Qe, null, [_(Pf, He(u, {
        modelValue: r.value,
        "onUpdate:modelValue": (h) => r.value = h,
        class: ["v-tabs", `v-tabs--${e.direction}`, `v-tabs--align-tabs-${e.alignTabs}`, {
          "v-tabs--fixed-tabs": e.fixedTabs,
          "v-tabs--grow": e.grow,
          "v-tabs--stacked": e.stacked
        }, o.value, l.value, e.class],
        style: [{
          "--v-tabs-height": ht(e.height)
        }, s.value, e.style],
        role: "tablist",
        symbol: t1
      }, d, n), {
        default: () => [a.default?.() ?? i.value.map((h) => a.tab?.({
          item: h
        }) ?? _(UO, He(h, {
          key: h.text,
          value: h.value
        }), {
          default: a[`tab.${h.value}`] ? () => a[`tab.${h.value}`]?.({
            item: h
          }) : void 0
        }))]
      }), f && _($O, He({
        modelValue: r.value,
        "onUpdate:modelValue": (h) => r.value = h,
        key: "tabs-window"
      }, d), {
        default: () => [i.value.map((h) => a.item?.({
          item: h
        }) ?? _(qO, {
          value: h.value
        }, {
          default: () => a[`item.${h.value}`]?.({
            item: h
          })
        })), a.window?.()]
      })]);
    }), {};
  }
}), SY = Be({
  autoGrow: Boolean,
  autofocus: Boolean,
  counter: [Boolean, Number, String],
  counterValue: Function,
  prefix: String,
  placeholder: String,
  persistentPlaceholder: Boolean,
  persistentCounter: Boolean,
  noResize: Boolean,
  rows: {
    type: [Number, String],
    default: 5,
    validator: (e) => !isNaN(parseFloat(e))
  },
  maxRows: {
    type: [Number, String],
    validator: (e) => !isNaN(parseFloat(e))
  },
  suffix: String,
  modelModifiers: Object,
  ...fs(),
  ...am()
}, "VTextarea"), CY = We()({
  name: "VTextarea",
  directives: {
    vIntersect: ns
  },
  inheritAttrs: !1,
  props: SY(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const i = kt(e, "modelValue"), {
      isFocused: o,
      focus: l,
      blur: s
    } = ds(e), {
      onIntersect: d
    } = gP(e), u = W(() => typeof e.counterValue == "function" ? e.counterValue(i.value) : (i.value || "").toString().length), f = W(() => {
      if (n.maxlength) return n.maxlength;
      if (!(!e.counter || typeof e.counter != "number" && typeof e.counter != "string"))
        return e.counter;
    }), h = Se(), g = Se(), v = ot(""), w = Se(), b = W(() => e.persistentPlaceholder || o.value || e.active);
    function p() {
      w.value !== document.activeElement && w.value?.focus(), o.value || l();
    }
    function y(V) {
      p(), a("click:control", V);
    }
    function S(V) {
      a("mousedown:control", V);
    }
    function E(V) {
      V.stopPropagation(), p(), Vt(() => {
        i.value = "", ip(e["onClick:clear"], V);
      });
    }
    function C(V) {
      const M = V.target;
      if (i.value = M.value, e.modelModifiers?.trim) {
        const B = [M.selectionStart, M.selectionEnd];
        Vt(() => {
          M.selectionStart = B[0], M.selectionEnd = B[1];
        });
      }
    }
    const D = Se(), P = Se(Number(e.rows)), O = W(() => ["plain", "underlined"].includes(e.variant));
    Zn(() => {
      e.autoGrow || (P.value = Number(e.rows));
    });
    function T() {
      e.autoGrow && Vt(() => {
        if (!D.value || !g.value) return;
        const V = getComputedStyle(D.value), M = getComputedStyle(g.value.$el), B = parseFloat(V.getPropertyValue("--v-field-padding-top")) + parseFloat(V.getPropertyValue("--v-input-padding-top")) + parseFloat(V.getPropertyValue("--v-field-padding-bottom")), N = D.value.scrollHeight, H = parseFloat(V.lineHeight), j = Math.max(parseFloat(e.rows) * H + B, parseFloat(M.getPropertyValue("--v-input-control-height"))), te = parseFloat(e.maxRows) * H + B || 1 / 0, de = Pn(N ?? 0, j, te);
        P.value = Math.floor((de - B) / H), v.value = ht(de);
      });
    }
    on(T), nt(i, T), nt(() => e.rows, T), nt(() => e.maxRows, T), nt(() => e.density, T);
    let A;
    return nt(D, (V) => {
      V ? (A = new ResizeObserver(T), A.observe(D.value)) : A?.disconnect();
    }), Ga(() => {
      A?.disconnect();
    }), Ge(() => {
      const V = !!(r.counter || e.counter || e.counterValue), M = !!(V || r.details), [B, N] = nl(n), {
        modelValue: H,
        ...j
      } = hr.filterProps(e), te = Qs.filterProps(e);
      return _(hr, He({
        ref: h,
        modelValue: i.value,
        "onUpdate:modelValue": (de) => i.value = de,
        class: ["v-textarea v-text-field", {
          "v-textarea--prefixed": e.prefix,
          "v-textarea--suffixed": e.suffix,
          "v-text-field--prefixed": e.prefix,
          "v-text-field--suffixed": e.suffix,
          "v-textarea--auto-grow": e.autoGrow,
          "v-textarea--no-resize": e.noResize || e.autoGrow,
          "v-input--plain-underlined": O.value
        }, e.class],
        style: e.style
      }, B, j, {
        centerAffix: P.value === 1 && !O.value,
        focused: o.value
      }), {
        ...r,
        default: (de) => {
          let {
            id: Z,
            isDisabled: F,
            isDirty: K,
            isReadonly: se,
            isValid: X
          } = de;
          return _(Qs, He({
            ref: g,
            style: {
              "--v-textarea-control-height": v.value
            },
            onClick: y,
            onMousedown: S,
            "onClick:clear": E,
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"]
          }, te, {
            id: Z.value,
            active: b.value || K.value,
            centerAffix: P.value === 1 && !O.value,
            dirty: K.value || e.dirty,
            disabled: F.value,
            focused: o.value,
            error: X.value === !1
          }), {
            ...r,
            default: (he) => {
              let {
                props: {
                  class: ve,
                  ...pe
                }
              } = he;
              return I(Qe, null, [e.prefix && I("span", {
                class: "v-text-field__prefix"
              }, [e.prefix]), an(I("textarea", He({
                ref: w,
                class: ve,
                value: i.value,
                onInput: C,
                autofocus: e.autofocus,
                readonly: se.value,
                disabled: F.value,
                placeholder: e.placeholder,
                rows: e.rows,
                name: e.name,
                onFocus: p,
                onBlur: s
              }, pe, N), null), [[ns, {
                handler: d
              }, null, {
                once: !0
              }]]), e.autoGrow && an(I("textarea", {
                class: Ie([ve, "v-textarea__sizer"]),
                id: `${pe.id}-sizer`,
                "onUpdate:modelValue": (z) => i.value = z,
                ref: D,
                readonly: !0,
                "aria-hidden": "true"
              }, null), [[XN, i.value]]), e.suffix && I("span", {
                class: "v-text-field__suffix"
              }, [e.suffix])]);
            }
          });
        },
        details: M ? (de) => I(Qe, null, [r.details?.(de), V && I(Qe, null, [I("span", null, null), _(Ap, {
          active: e.persistentCounter || o.value,
          value: u.value,
          max: f.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), pi({}, h, g, w);
  }
}), AY = Be({
  withBackground: Boolean,
  ...vt(),
  ...sn(),
  ...qt()
}, "VThemeProvider"), xY = We()({
  name: "VThemeProvider",
  props: AY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e);
    return () => e.withBackground ? _(e.tag, {
      class: Ie(["v-theme-provider", a.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.default?.()]
    }) : n.default?.();
  }
}), TY = Be({
  dotColor: String,
  fillDot: Boolean,
  hideDot: Boolean,
  icon: At,
  iconColor: String,
  lineColor: String,
  ...vt(),
  ...Hn(),
  ...To(),
  ...za()
}, "VTimelineDivider"), IY = We()({
  name: "VTimelineDivider",
  props: TY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      sizeClasses: a,
      sizeStyles: r
    } = Qu(e, "v-timeline-divider__dot"), {
      backgroundColorStyles: i,
      backgroundColorClasses: o
    } = An(() => e.dotColor), {
      roundedClasses: l
    } = fa(e, "v-timeline-divider__dot"), {
      elevationClasses: s
    } = ir(e), {
      backgroundColorClasses: d,
      backgroundColorStyles: u
    } = An(() => e.lineColor);
    return Ge(() => I("div", {
      class: Ie(["v-timeline-divider", {
        "v-timeline-divider--fill-dot": e.fillDot
      }, e.class]),
      style: Xe(e.style)
    }, [I("div", {
      class: Ie(["v-timeline-divider__before", d.value]),
      style: Xe(u.value)
    }, null), !e.hideDot && I("div", {
      key: "dot",
      class: Ie(["v-timeline-divider__dot", s.value, l.value, a.value]),
      style: Xe(r.value)
    }, [I("div", {
      class: Ie(["v-timeline-divider__inner-dot", o.value, l.value]),
      style: Xe(i.value)
    }, [n.default ? _(Wt, {
      key: "icon-defaults",
      disabled: !e.icon,
      defaults: {
        VIcon: {
          color: e.iconColor,
          icon: e.icon,
          size: e.size
        }
      }
    }, n.default) : _(pn, {
      key: "icon",
      color: e.iconColor,
      icon: e.icon,
      size: e.size
    }, null)])]), I("div", {
      class: Ie(["v-timeline-divider__after", d.value]),
      style: Xe(u.value)
    }, null)])), {};
  }
}), HO = Be({
  density: String,
  dotColor: String,
  fillDot: Boolean,
  hideDot: Boolean,
  hideOpposite: {
    type: Boolean,
    default: void 0
  },
  icon: At,
  iconColor: String,
  lineInset: [Number, String],
  side: {
    type: String,
    validator: (e) => e == null || ["start", "end"].includes(e)
  },
  ...vt(),
  ...La(),
  ...za(),
  ...Hn(),
  ...To(),
  ...qt()
}, "VTimelineItem"), EY = We()({
  name: "VTimelineItem",
  props: HO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Fa(e), r = ot(0), i = Se();
    return nt(i, (o) => {
      o && (r.value = o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width ?? 0);
    }, {
      flush: "post"
    }), Ge(() => I("div", {
      class: Ie(["v-timeline-item", {
        "v-timeline-item--fill-dot": e.fillDot,
        "v-timeline-item--side-start": e.side === "start",
        "v-timeline-item--side-end": e.side === "end"
      }, e.class]),
      style: Xe([{
        "--v-timeline-dot-size": ht(r.value),
        "--v-timeline-line-inset": e.lineInset ? `calc(var(--v-timeline-dot-size) / 2 + ${ht(e.lineInset)})` : ht(0)
      }, e.style])
    }, [I("div", {
      class: "v-timeline-item__body",
      style: Xe(a.value)
    }, [n.default?.()]), _(IY, {
      ref: i,
      hideDot: e.hideDot,
      icon: e.icon,
      iconColor: e.iconColor,
      size: e.size,
      elevation: e.elevation,
      dotColor: e.dotColor,
      fillDot: e.fillDot,
      rounded: e.rounded
    }, {
      default: n.icon
    }), e.density !== "compact" && I("div", {
      class: "v-timeline-item__opposite"
    }, [!e.hideOpposite && n.opposite?.()])])), {};
  }
}), PY = Be({
  align: {
    type: String,
    default: "center",
    validator: (e) => ["center", "start"].includes(e)
  },
  direction: {
    type: String,
    default: "vertical",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  justify: {
    type: String,
    default: "auto",
    validator: (e) => ["auto", "center"].includes(e)
  },
  side: {
    type: String,
    validator: (e) => e == null || ["start", "end"].includes(e)
  },
  lineThickness: {
    type: [String, Number],
    default: 2
  },
  lineColor: String,
  truncateLine: {
    type: String,
    validator: (e) => ["start", "end", "both"].includes(e)
  },
  ...tl(HO({
    lineInset: 0
  }), ["dotColor", "fillDot", "hideOpposite", "iconColor", "lineInset", "size"]),
  ...vt(),
  ...Qa(),
  ...qt(),
  ...sn()
}, "VTimeline"), OY = We()({
  name: "VTimeline",
  props: PY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      densityClasses: r
    } = Ar(e), {
      rtlClasses: i
    } = Ra();
    ca({
      VTimelineDivider: {
        lineColor: we(() => e.lineColor)
      },
      VTimelineItem: {
        density: we(() => e.density),
        dotColor: we(() => e.dotColor),
        fillDot: we(() => e.fillDot),
        hideOpposite: we(() => e.hideOpposite),
        iconColor: we(() => e.iconColor),
        lineColor: we(() => e.lineColor),
        lineInset: we(() => e.lineInset),
        size: we(() => e.size)
      }
    });
    const o = W(() => {
      const s = e.side ? e.side : e.density !== "default" ? "end" : null;
      return s && `v-timeline--side-${s}`;
    }), l = W(() => {
      const s = ["v-timeline--truncate-line-start", "v-timeline--truncate-line-end"];
      switch (e.truncateLine) {
        case "both":
          return s;
        case "start":
          return s[0];
        case "end":
          return s[1];
        default:
          return null;
      }
    });
    return Ge(() => _(e.tag, {
      class: Ie(["v-timeline", `v-timeline--${e.direction}`, `v-timeline--align-${e.align}`, `v-timeline--justify-${e.justify}`, l.value, {
        "v-timeline--inset-line": !!e.lineInset
      }, a.value, r.value, o.value, i.value, e.class]),
      style: Xe([{
        "--v-timeline-line-thickness": ht(e.lineThickness)
      }, e.style])
    }, n)), {};
  }
}), DY = Be({
  ...vt(),
  ...Pi({
    variant: "text"
  })
}, "VToolbarItems"), BY = We()({
  name: "VToolbarItems",
  props: DY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return ca({
      VBtn: {
        color: we(() => e.color),
        height: "inherit",
        variant: we(() => e.variant)
      }
    }), Ge(() => I("div", {
      class: Ie(["v-toolbar-items", e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), VY = Be({
  id: String,
  interactive: Boolean,
  text: String,
  ...la(nm({
    closeOnBack: !1,
    location: "end",
    locationStrategy: "connected",
    eager: !0,
    minWidth: 0,
    offset: 10,
    openOnClick: !1,
    openOnHover: !0,
    origin: "auto",
    scrim: !1,
    scrollStrategy: "reposition",
    transition: null
  }), ["absolute", "persistent"])
}, "VTooltip"), zO = We()({
  name: "VTooltip",
  props: VY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      scopeId: r
    } = yc(), i = $r(), o = we(() => e.id || `v-tooltip-${i}`), l = Se(), s = W(() => e.location.split(" ").length > 1 ? e.location : e.location + " center"), d = W(() => e.origin === "auto" || e.origin === "overlap" || e.origin.split(" ").length > 1 || e.location.split(" ").length > 1 ? e.origin : e.origin + " center"), u = we(() => e.transition != null ? e.transition : a.value ? "scale-transition" : "fade-transition"), f = W(() => He({
      "aria-describedby": o.value
    }, e.activatorProps));
    return Ge(() => {
      const h = ko.filterProps(e);
      return _(ko, He({
        ref: l,
        class: ["v-tooltip", {
          "v-tooltip--interactive": e.interactive
        }, e.class],
        style: e.style,
        id: o.value
      }, h, {
        modelValue: a.value,
        "onUpdate:modelValue": (g) => a.value = g,
        transition: u.value,
        absolute: !0,
        location: s.value,
        origin: d.value,
        persistent: !0,
        role: "tooltip",
        activatorProps: f.value,
        _disableGlobalStack: !0
      }, r), {
        activator: n.activator,
        default: function() {
          for (var g = arguments.length, v = new Array(g), w = 0; w < g; w++)
            v[w] = arguments[w];
          return n.default?.(...v) ?? e.text;
        }
      });
    }), pi({}, l);
  }
}), MY = We()({
  name: "VValidation",
  props: HE(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = zE(e, "validation");
    return () => n.default?.(a);
  }
}), RY = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  VAlert: ZH,
  VAlertTitle: RE,
  VApp: lH,
  VAppBar: IH,
  VAppBarNavIcon: GH,
  VAppBarTitle: QH,
  VAutocomplete: wW,
  VAvatar: Ei,
  VBadge: SW,
  VBanner: xW,
  VBannerActions: SP,
  VBannerText: CP,
  VBottomNavigation: IW,
  VBottomSheet: PW,
  VBreadcrumbs: VW,
  VBreadcrumbsDivider: xP,
  VBreadcrumbsItem: TP,
  VBtn: un,
  VBtnGroup: kb,
  VBtnToggle: VH,
  VCard: NW,
  VCardActions: IP,
  VCardItem: OP,
  VCardSubtitle: EP,
  VCardText: DP,
  VCardTitle: PP,
  VCarousel: YW,
  VCarouselItem: QW,
  VCheckbox: uz,
  VCheckboxBtn: rs,
  VChip: ed,
  VChipGroup: _z,
  VClassIcon: Bw,
  VCode: JW,
  VCol: xK,
  VColorPicker: Uj,
  VCombobox: qj,
  VComponentIcon: Gy,
  VConfirmEdit: zj,
  VContainer: kK,
  VCounter: Ap,
  VDataIterator: eK,
  VDataTable: pK,
  VDataTableFooter: Bf,
  VDataTableHeaders: ic,
  VDataTableRow: G0,
  VDataTableRows: oc,
  VDataTableServer: bK,
  VDataTableVirtual: gK,
  VDatePicker: FK,
  VDatePickerControls: Nb,
  VDatePickerHeader: Ub,
  VDatePickerMonth: $b,
  VDatePickerMonths: qb,
  VDatePickerYears: Hb,
  VDefaultsProvider: Wt,
  VDialog: Ob,
  VDialogBottomTransition: fH,
  VDialogTopTransition: mH,
  VDialogTransition: gp,
  VDivider: Go,
  VEmptyState: UK,
  VExpandTransition: yp,
  VExpandXTransition: k0,
  VExpansionPanel: $K,
  VExpansionPanelText: zb,
  VExpansionPanelTitle: Wb,
  VExpansionPanels: zK,
  VFab: jK,
  VFabTransition: dH,
  VFadeTransition: xf,
  VField: Qs,
  VFieldLabel: Wd,
  VFileInput: GK,
  VFooter: JK,
  VForm: ZK,
  VHover: t7,
  VIcon: pn,
  VImg: as,
  VInfiniteScroll: a7,
  VInput: hr,
  VItem: o7,
  VItemGroup: i7,
  VKbd: s7,
  VLabel: Zu,
  VLayout: c7,
  VLayoutItem: d7,
  VLazy: m7,
  VLigatureIcon: J4,
  VList: Cp,
  VListGroup: xb,
  VListImg: Lz,
  VListItem: is,
  VListItemAction: Nz,
  VListItemMedia: $z,
  VListItemSubtitle: aP,
  VListItemTitle: rP,
  VListSubheader: iP,
  VLocaleProvider: _7,
  VMain: v7,
  VMenu: Ru,
  VMessages: $E,
  VNavigationDrawer: x7,
  VNoSsr: T7,
  VNumberInput: D7,
  VOtpInput: V7,
  VOverlay: ko,
  VPagination: Lb,
  VParallax: L7,
  VProgressCircular: Mu,
  VProgressLinear: bp,
  VRadio: N7,
  VRadioGroup: $7,
  VRangeSlider: H7,
  VRating: W7,
  VResponsive: bb,
  VRow: BK,
  VScaleTransition: b0,
  VScrollXReverseTransition: _H,
  VScrollXTransition: hH,
  VScrollYReverseTransition: vH,
  VScrollYTransition: pH,
  VSelect: R0,
  VSelectionControl: Gs,
  VSelectionControlGroup: FE,
  VSheet: Df,
  VSkeletonLoader: G7,
  VSlideGroup: Pf,
  VSlideGroupItem: Q7,
  VSlideXReverseTransition: yH,
  VSlideXTransition: gH,
  VSlideYReverseTransition: bH,
  VSlideYTransition: w0,
  VSlider: Rb,
  VSnackbar: jb,
  VSnackbarQueue: Z7,
  VSpacer: yO,
  VSparkline: aY,
  VSpeedDial: iY,
  VStepper: fY,
  VStepperActions: MO,
  VStepperHeader: RO,
  VStepperItem: LO,
  VStepperWindow: FO,
  VStepperWindowItem: NO,
  VSvgIcon: Dw,
  VSwitch: hY,
  VSystemBar: pY,
  VTab: UO,
  VTable: sc,
  VTabs: kY,
  VTabsWindow: $O,
  VTabsWindowItem: qO,
  VTextField: os,
  VTextarea: CY,
  VThemeProvider: xY,
  VTimeline: OY,
  VTimelineItem: EY,
  VToolbar: wb,
  VToolbarItems: BY,
  VToolbarTitle: y0,
  VTooltip: zO,
  VValidation: MY,
  VVirtualScroll: xp,
  VWindow: ac,
  VWindowItem: rc
}, Symbol.toStringTag, { value: "Module" }));
function LY(e, t) {
  const n = t.modifiers || {}, a = t.value, {
    once: r,
    immediate: i,
    ...o
  } = n, l = !Object.keys(o).length, {
    handler: s,
    options: d
  } = typeof a == "object" ? a : {
    handler: a,
    options: {
      attributes: o?.attr ?? l,
      characterData: o?.char ?? l,
      childList: o?.child ?? l,
      subtree: o?.sub ?? l
    }
  }, u = new MutationObserver(function() {
    let f = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], h = arguments.length > 1 ? arguments[1] : void 0;
    s?.(f, h), r && WO(e, t);
  });
  i && s?.([], u), e._mutate = Object(e._mutate), e._mutate[t.instance.$.uid] = {
    observer: u
  }, u.observe(e, d);
}
function WO(e, t) {
  e._mutate?.[t.instance.$.uid] && (e._mutate[t.instance.$.uid].observer.disconnect(), delete e._mutate[t.instance.$.uid]);
}
const FY = {
  mounted: LY,
  unmounted: WO
};
function NY(e, t) {
  const n = t.value, a = {
    passive: !t.modifiers?.active
  };
  window.addEventListener("resize", n, a), e._onResize = Object(e._onResize), e._onResize[t.instance.$.uid] = {
    handler: n,
    options: a
  }, t.modifiers?.quiet || n();
}
function UY(e, t) {
  if (!e._onResize?.[t.instance.$.uid]) return;
  const {
    handler: n,
    options: a
  } = e._onResize[t.instance.$.uid];
  window.removeEventListener("resize", n, a), delete e._onResize[t.instance.$.uid];
}
const $Y = {
  mounted: NY,
  unmounted: UY
};
function jO(e, t) {
  const {
    self: n = !1
  } = t.modifiers ?? {}, a = t.value, r = typeof a == "object" && a.options || {
    passive: !0
  }, i = typeof a == "function" || "handleEvent" in a ? a : a.handler, o = n ? e : t.arg ? document.querySelector(t.arg) : window;
  o && (o.addEventListener("scroll", i, r), e._onScroll = Object(e._onScroll), e._onScroll[t.instance.$.uid] = {
    handler: i,
    options: r,
    // Don't reference self
    target: n ? void 0 : o
  });
}
function KO(e, t) {
  if (!e._onScroll?.[t.instance.$.uid]) return;
  const {
    handler: n,
    options: a,
    target: r = e
  } = e._onScroll[t.instance.$.uid];
  r.removeEventListener("scroll", n, a), delete e._onScroll[t.instance.$.uid];
}
function qY(e, t) {
  t.value !== t.oldValue && (KO(e, t), jO(e, t));
}
const HY = {
  mounted: jO,
  unmounted: KO,
  updated: qY
};
function zY(e, t) {
  const n = typeof e == "string" ? Q(e) : e, a = WY(n, t);
  return {
    mounted: a,
    updated: a,
    unmounted(r) {
      v_(null, r);
    }
  };
}
function WY(e, t) {
  return function(n, a, r) {
    const i = typeof t == "function" ? t(a) : t, o = a.value?.text ?? a.value ?? i?.text, l = mf(a.value) ? a.value : {}, s = () => o ?? n.textContent, d = (r.ctx === a.instance.$ ? jY(r, a.instance.$)?.provides : r.ctx?.provides) ?? a.instance.$.provides, u = Co(e, He(i, l), s);
    u.appContext = Object.assign(/* @__PURE__ */ Object.create(null), a.instance.$.appContext, {
      provides: d
    }), v_(u, n);
  };
}
function jY(e, t) {
  const n = /* @__PURE__ */ new Set(), a = (i) => {
    for (const o of i) {
      if (!o) continue;
      if (o === e || o.el && e.el && o.el === e.el)
        return !0;
      n.add(o);
      let l;
      if (o.suspense ? l = a([o.ssContent]) : Array.isArray(o.children) ? l = a(o.children) : o.component?.vnode && (l = a([o.component?.subTree])), l)
        return l;
      n.delete(o);
    }
    return !1;
  };
  if (!a([t.subTree]))
    return t;
  const r = Array.from(n).reverse();
  for (const i of r)
    if (i.component)
      return i.component;
  return t;
}
const KY = zY(zO, (e) => ({
  activator: "parent",
  location: e.arg?.replace("-", " "),
  text: typeof e.value == "boolean" ? void 0 : e.value
})), YY = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ClickOutside: Pb,
  Intersect: ns,
  Mutate: FY,
  Resize: $Y,
  Ripple: Cr,
  Scroll: HY,
  Tooltip: KY,
  Touch: $_
}, Symbol.toStringTag, { value: "Module" }));
function bc() {
  const { name: e } = mi(), t = Se(!1);
  on(() => {
    if (typeof frappe < "u" && frappe.utils && typeof frappe.utils.is_rtl == "function" && (t.value = frappe.utils.is_rtl()), !t.value) {
      const h = document.documentElement.dir || document.body.dir || "";
      t.value = h.toLowerCase() === "rtl";
    }
    if (!t.value) {
      const h = document.documentElement.lang || "", g = ["ar", "he", "fa", "ur", "ps", "sd", "ku", "dv"];
      t.value = g.some((v) => h.toLowerCase().startsWith(v));
    }
  });
  const n = W(() => ({
    direction: t.value ? "rtl" : "ltr",
    textAlign: t.value ? "right" : "left"
  })), a = (h = 0, g = 0, v = 0, w = 0) => t.value ? {
    marginLeft: `${g}px`,
    marginRight: `${h}px`,
    marginTop: `${v}px`,
    marginBottom: `${w}px`
  } : {
    marginLeft: `${h}px`,
    marginRight: `${g}px`,
    marginTop: `${v}px`,
    marginBottom: `${w}px`
  }, r = (h = 0, g = 0, v = 0, w = 0) => t.value ? {
    paddingLeft: `${g}px`,
    paddingRight: `${h}px`,
    paddingTop: `${v}px`,
    paddingBottom: `${w}px`
  } : {
    paddingLeft: `${h}px`,
    paddingRight: `${g}px`,
    paddingTop: `${v}px`,
    paddingBottom: `${w}px`
  }, i = (h = null, g = null, v = null, w = null) => {
    const b = {};
    return h !== null && g !== null ? t.value ? (b.left = `${g}px`, b.right = `${h}px`) : (b.left = `${h}px`, b.right = `${g}px`) : h !== null ? b[t.value ? "right" : "left"] = `${h}px` : g !== null && (b[t.value ? "left" : "right"] = `${g}px`), v !== null && (b.top = `${v}px`), w !== null && (b.bottom = `${w}px`), b;
  }, o = (h = "row") => t.value && h === "row" ? "row-reverse" : t.value && h === "row-reverse" ? "row" : h, l = (h = "left") => {
    if (t.value) {
      if (h === "left") return "right";
      if (h === "right") return "left";
    }
    return h;
  }, s = (h = "left") => {
    if (t.value) {
      if (h === "left") return "right";
      if (h === "right") return "left";
    }
    return h;
  }, d = (h = 0, g = 0, v = "") => `translateX(${t.value ? -h : h}px) translateY(${g}px) ${v}`.trim(), u = W(() => ({
    "rtl-layout": t.value,
    "ltr-layout": !t.value
  })), f = W(() => {
    const h = n.value, g = ["xs", "sm"].includes(e.value);
    return {
      ...h,
      // Adjust text alignment for mobile RTL
      ...g && t.value && {
        textAlign: "right"
      }
    };
  });
  return {
    // Reactive state
    isRtl: t,
    // Computed styles
    rtlStyles: n,
    rtlClasses: u,
    responsiveRtlStyles: f,
    // Helper functions
    getMarginStyle: a,
    getPaddingStyle: r,
    getPositionStyle: i,
    getFlexDirection: o,
    getTextAlign: l,
    getFloat: s,
    getTransform: d
  };
}
const YO = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7N13mB1nfTb++zszp20v2l31YlnNBQwYbHCnB0IIxQZCwi8k7xsSkpjgF0s2JVEKAUy1IYTkDT8SSAjY1AAGjAvNwbhg4ybJslVstdVqi7acOvN83z9WUmRZu9oyc56ZOffnunRd0u7ZZ+5dnT1zn5lnngGIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiCgZxHYAIpqbTzz1VCHITCwEnF51TCeM06minVDphGgnBB1QaYNqkwpyouiAIAegGUABkPz/jGZygDSdsIkRQPR//qk+gLEj/6gJZNxAhwUYF2BcoeOAc1hUR+HImEJHBRiAOAc8Mf2j/f7A5jPPrEb6QyGiGWMBIIqhDw48uigbeMuNY5apynKILBejiyBYBKAXwGIArZZjzsUQBP1QDADSD9V+FdktYnZBsMutya73LF53yHZIokbAAkBkwWa9w8sNLFvpwj8dcNao0bUQnA7IakCXA8jZzmjROCC7RMxOY2QXBLscwVYxumWib93uzSLGdkCiNGABIIrQZr3Dyw4uPt01ehZUzgTkTIieBcXpADK28yWPFgFsBZwtEH3EUWxVCR4u9vTv3CyX+bbTESUJCwBRSCbPyZeeZUSfB8FzoXgugDPQ2O/m66UCxUMQvVdU7gsc576unsMPv0POrdkORhRXLABEc3Cjqrujf+sZjrgvNNAXCvA8ABsAeLaz0TFlAA8CuFdE7xPFvSt61z1yhUhgOxhRHLAAEM3ADYPb24pGL4Ka80XlhQBegGROwmt0h6G4Ew5+Lqo/zY+69165Zk3FdigiG1gAiE7iw0NPtDvV4CIVvRSKSyB4DgDXdi4KXRnA3Sr6U0fdnxWl+t+be88ctx2KqB5YAIgAbH7kkWyhy71ARF4OkZcp9Bxwh9+IagB+IYofBq75YWXB+vt51QGlFQsANazrDj66RuG+AsAroLgUQIvlSBQ/BwH5EaA/9JG55X19p/XbDkQUFhYAahg3qro7BrZf4Kh5jUJ+C8Ba25koURTAAxC92Yh+89qeDffZDkQ0HywAlGqb9+1rKnijr1KV1wjwagDdtjNRWuiTKs43NQi+tXrh+p/x6gJKGhYASp1PPPVUoZopv1TEXA7gdeChfYreEIDvieh3xFRuvnrhsydsByI6FRYASoWPHvh1c4DCayH6RgFeCaBgOxM1rDEFvunA+Y+VvaffxiMDFFcsAJRYm1Wd/MBjLxLF7wF4C3hdPsXPIICvq+BL1/Su+7ntMETHYwGgxLnu4GPnGNW3CfBmAIts5yGaEcEWGPkPo8F/XLtowy7bcYhYACgRPjm8s6NSq75VVP8AkOfazkM0DyoiP4HBP+fH5BtciZBsYQGgWPvQwJbnOcb5IwBvBdBsOw9RyEYA3KhqPnPNwg0P2Q5DjYUFgGLnhsHtbWVf36zQKwGcaTsPUT0I5D4A/1wMWv598+LFRdt5KP1YACg2rjv42Dmq+k5A3wpIk+08RJYMAfhXY8ynOVeAosQCQFbdqOruGtj2elV5F4ALbOchipFAod+CyKd4BQFFgQWArPjIwNZWCfAHKvIXAFbazkMUb/orhVzf2Tv2n++Qc2u201A6sABQXX1o/5aV4jhXAvhDAdps5yFKEgX2QvCZbMX/56uWnTlkOw8lGwsA1cWHDj5+uqPB1QD+AIBnOw9Rwk1A9fMZT667asG6vbbDUDKxAFCkjkzsuwrA7wBwbechSpkqgK8acf/m2t7TH7cdhpKFBYAicd3BbRcZxV8K8FLbWYgaQBWCLxm4H2YRoJliAaBQXde/9QKF/DWAl9jOQtSAAkC+4hr5+/csWvOo7TAUbywAFIqPHNh+PhzzPih+03YWIoIB5OsCuXZj35onbIeheGIBoHn5aP/WZxmVD0HwKttZiOgZqqr4p0AyH3xf32n9tsNQvLAA0Jx8fO/jy3wveD+APwQn9xHF3QQgn8lmMx9+d+eqEdthKB5YAGhWPrZv2wLfxXsFeCeAnO08RDQrQ4B8OFMtfOaqZctKtsOQXSwANCM3bN+eK7YF7xLIewG0285DRPOhT6rKpk19a78qImo7DdnBAkCn9OED218jYj4JYLXtLEQUHhHcI+q86+q+Nb+wnYXqjwWApnTdwPbnahB8AiKX2M5CRJFRQL6mgfueaxavftJ2GKofFgB6ho/t27Yg8PAhKP4AgGM7DxHVxTgEf1+ayH5y86pVZdthKHosAHTMZlUnf3D7/xbo3wPosp2HiKzYKSpXbly49ru2g1C0WAAIwJHD/cb8A4DzbWchohgQfFd97095WiC9WAAa3EcGtrbCyIcB/DF4uJ+IjqPAqIh8YFXPmn+4QiSwnYfCxQLQwD7cv+UVAvlnQJbbzkJEsfYADN6xadG6u20HofDMqQCc88k7OoIhXQ2gJeQ8p5RpyowvdwsjbkZ57eocdS3x2haelduUycmbwBJIRDNjahW90e3Xd2++7MwDtsPQ/M3oxf9Zm+/sLWn5r8er/ivH/WBpOQg81Gn32+S5WNqSR08hi/ZsBlmH+ysiIlsyBQnae3Mb//G1z/qE7Sw0P9PuTdduvmNBxa/+50Cx9pKaal33vM0ZD2d2tmBxU47vUYmIYqa5y7tnZEBe/q13P4f3FkioKXeta/7y1uv2T1SuqhhT1xu9OBCc0dWM09qawTf7RETx5WZlwgT6lhv/9AXfsZ2FZu+Zu9jN6qwKbvvB3vHyy7Rex/mPyLoOnt/bgZ58pq7bJSKiuRORL2pWrrzpHecetp2FZu4Zl30tqf1oy57xUt13/nnXwSWLu7jzJyJKGFV9GyrBr6/41N0X285CM/e0IwAr33/LD/dOVF5e7xCuABcs6kJXjjt/IqIEUwU+PYHOjd+/ck3Fdhia3rEjAGv+8tYP7Juo1n3nDwDP6m7jzp+IKPlEgCtbZPiuN3zm7jNth6HpOQDwvM33Nh0sVT9Q78P+ANCZy2BFS6Hu2yUioogoznEM7r3803e/y3YUmpoDACP+8BeKfmDlLfgZXa28zI+IKH3yUHzq8k/f/Y3f+ezPOm2HoWdyztx8Y7a/XH2DjY0vyGc46Y+IKM0Ur6sFuXsvv+GeF9iOQk/n+FjwF5Wgvtf6H7WUh/6JiNJPcRqgP7v8+l9ehTovKkdTc0o138q7fwDoK2RtbZqIiOorC5GPX/7pe77925+8v8N2GAKckq9rbWw47zooeFYOPBARkT2vybi1u950/T1n2Q7S6JxyUGuzseHmDHf+REQNap0RveuKG375FttBGplTC/QZqwHWQ8ZhASAiamDNCvnyG2+4+/pLN9/h2Q7TiJzA0oZdTgMhImp4AlzZ09X8w9d95pfdtrM0Givv/omIiI7zYk/lbs4LqC8WACIisk9xmhHzi8uv/+XrbEdpFCwAREQUE9ICka9dccM977WdpBGwABARUZw4Cv3g5Tfc/YXLNz/CxWIixAJARERx9Pvomrj9LR+7d4HtIGnFAkBERHF1gZ8NfvGG6+9aYztIGrEAEBFRjMnpjjg/582EwscCQEREcdcL6O1XXH/Pq2wHSRMWACIiSoJmFf325Z/+5R/aDpIWLABERJQUHlT+7xXX/3Kz7SBpwAJARERJIiryV5ffcM/HocpF5eeBBYCIiBJIr3rjDfd8kTcSmjsWACIiSiQR/G5PV/O//9E/3ZuxnSWJWACIiCjJ3jRc0W/+/hfuyNsOkjSxPXSyvCvAsk5Fe8HAc22nISKiGHt1U8Z7+MV33vmit11wwUHbYZIiVgUg6wGvPLOKl26oobfV2I5DRETJsfqJAXfLz7f+fOWF6y8csx0mCWJTANb1BbjyJSV0N6vtKERElECre4Kuwojer3rHWSKXlW3nibtYzAE4b1UN7381d/5ERDQ/izvM6tKYfl/15pztLHFnvQCs6g7wzksryLjc+RMR0fzlMnqplvPfYgmYntUC4AjwZ5eVkfO48yciovAo9JVazn2TJWBqVgvApetqWNLJyX5ERBQ+BX5DK7kvq3KdgJOxXgCIiIiioorXa2XkP1W5YuCJrBWAribBmh6++yciomipyhtM2XxR9UauKnMcawVgRScgwnP/RERUF28x5e7/q7yB0DHWCsACXvJHRET19XZTvv1vbYeIC2sFIMuzMUREVH/vC8q3/bntEHFgfR0AIiKiulJ8yi/e/gbbMWxjASAiokbjiOi/a+lHF9oOYhMLABERNaK8gfNdrfzobNtBbGEBICKiRtVujHOzFn+4zHYQG1gAiIiokS014t2sw3d02A5SbywARETU6M4K8tpw9w1gASAiooYn0EtNOf952znqiQWAiIgIAKBvDYq3X207Rb2kfzkeNQC46iBRuAQQS+8fVAHwPiIUmQ/7xe/t8Jpe/XXbQaKWygIgfgmoDEOC0pEXCyIKnQDqNgG5DqjXFO22jA+pDEJqE0dKPVFkHIhzkw596TXS9Xvfsx0mSqk7BSCVw5CJvRC/yJ0/UZQUEL8ImdgHqY5Et52gDGf8KUh1jDt/qg81glr1G1q6cbntKFFKVwEIKpDygO0URA1HSoeAoBz+wGrgFA8AGoQ/NtF01M9ivHy36uZUHikHUlYApBLhuxAimlYUv3/ijwPGD31cohkJSn06tOY22zGikq4CEMU7ECKakUh+/4JK+GMSzYLUxi8OBr/8cds5opCqAsBz/kQWRXF+3vB3muxz/OK7dehrr7GdI2zpKgBERERh00DUP/x1Hf76CttRwsQCQEREdApi/Az8ibtUVWxnCQsLABER0UwEpYUY+urXbMcICwsAERHRTPmjr9fhm95uO0YYUnt9IxE1GGNghgeg5YlkTgjO5OB0LoBk81ZjaK0GM9wPVGN0BYY4kOYWOO0LAIngCLwqzMgAtDQ+s4mnrvt53fHZ++S0dz4Yfpj6YQEgouRTRbB/F7RctJ1k7iolBBOjcJethmQs3ZXW9xHseRww8Vt4ScsT0GoFbu/S0McODjwJLY7N5kskcA78QlVbRCSBbXMSTwEQUeJppZjsnf9RaqCHh6xt3owNx3Lnf5SOjQB+uAtDabU8253/5NeNDzcF2z92Z6hh6owFgIgST2tV2xFCY/N70VqMDvtPIfSM8/h566E9Lwx2feZPQ0xTVywARJR8iT0IezKp+mbCF6eL8NRAB3Z/Wnd9aZHtKHPBAkBERDRHWi2Lmdh1v+0cc8ECQERENA9m5GCf/8SnPmc7x2yxABBR4omTopcyce1tOgk/Rwk5Y0jfsx566h26+3NnhDJYnSTgf5uIaHqSLyBeJ4fnTpqa7G0732xt2zPiuqGvkyC5QjglwK8iGN3/i/kPVD8sAESUfF4WzoJFSHoJkOY2OK3d9rbf0gantdPa9qflOJNrAIS9EJDjwu1ZEsq4OjrUZrZ/8sYQUtUFFwIiolRw2rsgza1AuQg1EdyaOEoCSCZ/5EiG3SBO7xJIeze0WorNBQniupB8E+BGs8uSlnZ4+ebJxYbm+9xx9Y068JW10vPmx8JJFx0WACJKDfEyQEt7wo8D2Ce5PCRnd0niuvM8SDjPHYFT+xGA2N86mKcAiIiIwlQrLg+GvvIh2zFOhUcAyCKFmRiBKY5MHm40BnAcSLYAp6kDTnMHkn5Ol4gak9TGN+rw1z8nnW/YbTvLVFgAqO6CwwcRDOyEP/gktDIx5eMk2wyvexnc3lVw2/vqmJCIaH5EAwem9F0AZ9vOMhUWAKobUxxBbdcD8A/tmtHjtTqB2v6tqO3fCrdzMbKrzoXT0hVtSIoXHgCiJKtNnBUMff2dbtcbPms7yslwDgDVgaK6+wGU7vv2jHf+JwqG96F0/3dQ3fUrxGZqMkVP+B6Fks3xD39C9duttnOcDAsARcsEqGz9OWq7HwB0njtuVdSefBDlh2+D+rVw8lGsacbeojhEoTC1HEZK37Ad42RYACg6qig/egf8g0+EOmwwtAeVLXfMv1BQ/Ll5aDaWb56IZq4y+lIdufHFtmOciAWAIlPdcQ+CoT2RjB0M70P1ibsjGZviRfO90Gyb7RhE86DQWvmrtlOciCfYKBLB4FOo7X000m3U9m2B07EQ3oLYr7dB8yECLfRCs+0QfwIwPjg7kBJogY59+0+k9bX/aDvIUSwAFD5VVHfcM6OHOs1d8HpXwmnuhmRz0GoFZmII/sBOmPGhU359bed98LqXWr2DGtWJm4O6OdspiOZMgfeq3vElkcvGbWcBWAAoAv7+x2BKo9M+RrwssmteCK9nJU58N+d2LUFm2VnwB3ahuv0uqF+ZchxTGkVt/2PILN4QQnIiokgtNRX9AIBNtoMAnANAEagd2Dbt5yVbQP45vwmvZxWmPpQr8HpWIf+cV0Oy098gxd8//faIiGJD9S+0fMsa2zEAFgAKmVbGYcaHp36ACHIbLoVTmNmkLqfQhvwZL572Vp1mYgSmNDbbqERENmQV7nW2QwAsABQyf/ApTLdQj9cz+2V9nbYeeL2rp31MMPjkrMYkIrJFFb9dK9/2cts5WAAoVGZs+ol73qK1cxrXWzj915mJwTmNS0Rkg6P4pOodVufhsQBQqLQ8zaF4ceG2ze2mPm5bD+BMPdNfy7GYVEtENFNnmErwhzYDsABQqDTwp/ycZPPTnsuflgic3NTLwnJpYCJKHJW/Uf25taUuWQAoZMGUn5Fp3sHPiDPN0TJj5jc2EVH99Zpy5SpbG2cBICIisuc9On7r3M6NzhMLABERkT0txpH329gwVwKkcGiAYPQQtDb1uXg1PvxDu+a+Cb86zdg1BIf7JycLCnstESWI4B1avuN6yV/2eD03ywJA82ZGB1DZ9rNTLv+rlSIqj/44kgxaKaL86+9D8i3IrbsYbntvJNuh+FMNgGDquSixJAJxM7ZTPI0GPqDxmFsjjgc40Rd7NQFgrDx3MgHMRwG8rp4bZQGgedFaGeVHboPWyrajAJi8HLDyyK0onPtaSLbZdhyqI1Mrwh/eCxOT5+JsiePBa++D29RlNUdQHIZ/+ADUTH1Fjw1OrgWZzqWRFCVTK8Mf3gNTK4U+9iz8dnngy6/J9/zOd+q1QR4rpXnx922Nzc7/KPWrqO3j/QEaiWqA2qHdid35A5OnyGrDe2EqE9YymGoRteE9sdv5A4CpjKM2FMGKn6qoDe62vfOfjFIpfrqe22MBoHmx+WI1Ha1wYaBGopXxWO605iIoHba47RFr254JUy2GvuaHqRahwdTzi+rJVCZW+ENf+c16bY8FgOZlpjf1qTcn3247AtWR+unY+QOABvYWtZpuIa+4UBPyzydOxVEVfql+RwFYAGhevN7T6jI5Z1ZE4PVNf/MgIqI4CspjK/0DX31NPbbFSYA0a1oeRzC878ifvfFbhU8VxXu/Cbe9D27HYrgLlsEp8IgAESWAKvxg/HoAkU8GZAGgGTGlMfgHn0AwsAumGO/zhAAAExwrKdh5L5ymDrg9K+H1roZTsLb0NhHRKQXl8VW1wa+8PNP95lui3A4LAE1J/RqCwScnd/zD+wGo7UhzZoojMLsfQG33A3BaFsDrOw1e32qIl7MdjUIgXnpeysS1973EbS2CkxEn3Iw63T1GbJmcC3ADgPVRbiaG3znZZkqjqO15GH7/jnhNkAmJGT+E6vghVHfeB693NTLLzuQpgoSTXAvE8VJxJYBr8bnoFtoQjB+ytv1TcTJNEC/cAuBmm+C7GauTL0/GVMbWVQe/cn62+813RbUNFgA6xowfQm3vFvgHdwCa3Hf7M2YC+Aceg39gO9zORcgs3gC3e5ntVDQHIi4y3Svgj+yBqVVsx5kTcVx4bQvh5FqsZXCyzch0Lo31QkChE0Gme2UcFgJ6OlWYUvGfATwrqk2wABCCkf2o7voVzOiA7SiW6LH5Ak5bD7IrngO3c7HtUDRLTrYJ2d61kzuuuE1MPZUYLQXsNnXCbeqcfEcclzcCjgeJ8GojJ5NHtvf0+C0jLbJWx2/tk5aX9kcxPAtAAzPFEdR2PTCvG/SkjRkdQPmhW+B2LkZ21blwWuwuy0qzN7luvO0UyReXQlJPIi7gubZjHC9nIO8E8FdRDM5fkwak1QlUtt2J0n3f5s5/CsHwPpTu/w4q234Gjelqh0TUCPTPVH8YyY1NeASgkajCP7Ad1R33xG7CSyypwu9/Av7ALmRXPAeZpWcCIrZTEVFj6TIV93cB/FPYA/MIQIMwEyMo/fpmVLb/N3f+s2UCVHfei9L934GJ8QxpIkoplatUN4e+v2YBSDsNUN31K5Tu/68GnuQXDjM+hNIDN6O661eAxmiiEBGl3dqgcuGrwh6UBSDFtDKB0q9/gNqTDyZvVnRcGYPakw+idP/NMKVR22mIqEE46rwr9DHDHpDiITj0JEr3fZvv+iNixgdRvv878Ad22o5CRA1AoS/Ryh2hrgzIApA2alB9/JcoP3o71I/HPa7TSv0aKlt+gurjdwGGpwSIKFJiAvPHYQ7IApAi6ldQfvAW1PZtsR2lodT2bUXpwR9Aa2XbUYgozQS/H+YlgSwAKWFKYyjf/z0Ehw/YjtKQzOgASvd/F6Z02HYUIkqvdlPJvDWswVgAUsCMDqD8wPc4Kc0yLY+zhBFRtIy+M6yhuBBQwgWHdqO85SeAcpZ/HKhfRfnBHyG3/mJ4PStsx0mXoALxJzjfghrds3XwxjdJ9xVfne9ALAAJ5g/sRmUbd/6xowEqW38M6IXwelfbTpN8qpDSAKTGI1xEAKBe818CmHcB4CmAhPIPHdn58/r+eFJFZdvP4ffvsJ0k8aR0kDt/ouOIKW/Q0e8smO84LAAJ5A/sRGXLj7nzjztVVB77GfyDLAFzFpQhtTHbKYjixQQCM/638x2GBSBhguE9qGz9aXzu003TU0Vl288QDD5lO0kiSa1oOwJRLGmt+ub5jsECkCBmfBCVR3/MnX/SqKK85SdclXEu1LedgCiWJCh36Mg3XjyfMVgAEkLL4yg/fCs04AtiIhkf5Udu46Was8aySzQlU/7L+Xw5C0ACqF+Z3PlXS7aj0DxorYzKw7dC/YrtKESUBn7xAlWd836cBSDuVFHZ8jOY4ojtJBQCUxrlaRwiCocJPAx/dc73B2ABiLnaUw8hGN5jOwaFKBjZP3mLZiKi+VL/T+b6pVwIKMaCwwdQ3X2/7RgUgeqTD8Bp64Hbudh2lFTRWg2oTEBN8o6wSDYHyTfZjgEA0EoJWi3HZgqGuA4k3wy4Ee6y/Bq0XITG5fJqASRXgGTz0z5M/dKZql9sFnnbxGw3wQIQU1otobLlJzxUnFaqqGz9KQrP/S1ILh4v+klnRgdhDh1I9O+MNLfC7VsBiK0EiuDgXuhYDE85Og7c3mWQ5tbQh9axEQQD+2K5qqrT3g1nwaIpPy9qxIzk3gPgr2c99nyCUXQqj/2ck/5STmtlVB77OWLzNivB1K8lfucPADoxBjM6aG/746Px3PkDgDEIDu4Jfydtgtju/AHAHB6EFqdfDMsJqr83l7FZAGLI738cwdBe2zGoDoLhffAPPG47RvKVi4nf+R+lJXuLH2l51keR68sE0Gq4V9FouRTbnf9RWj7FcyIon6bD3+yY7bgsADGj1RKqT9xtOwbVUXXHPdBqzF94Yy42523DoPbudpiIn2PYO+uY7/wBAKea06JGjFavnu2wLAAxU3n8LqhftR2D6kj9KiqP/cJ2DCJKMMdUfmfWXxNFEJob/9AuBId2245BFgRDe+AP7LQdg4iSKqiu0MGb22bzJSwAcaEBajvvs52CLKo+cS9guNTznFibNR+FVH0z4UvHVI9ZmsE3rYHAm7hyNqOyAMREbe+jMCXe9rSRaXUCtb2P2o6RSOJlbUcIjWRz9radsbftmQr955OA7xnZmT2/1a+8ZTbDsgDEgNbKqD35kO0YFAO1Jx/i5Z9zIIVmSCEF6yk4DqSty97m2zoB17W2/VOR1o7QFwOSbC6StQVC42XgNM9wgr9fXq9644z/A7kQUAzUdj/AiX8EANCghuruB5Bb80LbURLHXbgSZnhg8lK2JF4SmM3B6eyBZCwezXA9uEtWQ4cHJlcCjAvHgTS1wmnvjmR4t28ZzPAhaGk8Ps8dASRbgNPZM+NSJho4GJG3AvjiTB7PAmCZViZQO/CY7RgUI/6Bx5BddjYk32I7SrI4DpzuPtspEk8yWUjvEtsx6kscOF29AHptJ5k/U/lfmGEB4CkAy2p7HgaScO0t1Y8qak89bDsFESWQ+rXnz/SxLAAWqV+Bf2C77RgUQ7X+7ZwLQESzJlrN6+GvnD+Tx7IAWFTb8wg04GVfdBImQG3vFtspiCiBTIAZ3SKYBcASDWrw9221HYNizN+/lZNDiWjWHFN78YweF3UQOrng4E6+uNO01K/CP7jDdgy7JL6XpBHFVlBZonrzKRc4YAGwhDP/aSYa/k6Bbt52AqLk0UAwNP67p3oYC4AFpjgCM3bIdgxKADN+CGZ8yHYMa9RrBpyM7RhEiaPiv/VUj2EBsIAz/2k2/P4Gfr6IwDQt5KkAolkSU3veqR7DAlBvGsDvf8J2CkoQv39HMu5ZHhU3B9OyDJptYxEgmim/0qYTX1803UO4EmCdBSP90FqMltik2FO/gmBkH9zOpbaj2ON40EIvtIAjS7U2cCEimiF18BwA+6f6PAtAnQWDT9mOQAkUDO5p7AJwPBEAPBJAdCqiuAjAzVN9nqcA6swfYgGg2fMHn0SD3gidiOZIoZdO93kWgDoy40PQ8rjtGJRAWik29NUARDR7AjlX9edT3uuYBaCOePif5sPn84eIZsfzK9UXTfVJFoA6CkamnItBdEpmZJ/tCESUMI6CBcA6YxBw8R+ah2D0UGNfDkhEsybQF071ORaAOjHFYcDwzn80D2pgxgZtpyCiBFHgPNUbT3rZDAtAnQSHD9qOQCkQjPJ5RESz0oZqz4aTfYIFoE4MX7gpBGaMzyMimp3AmJOeBmABqBMzMWw7AqWAGefziIhmkuUdoQAAIABJREFURwAWAKsc/qgpBMLnERHN2rkn+yCXAq4Tr3s5qlzIhebJXbDCdoT4UkUwMQRTLUITuGqi4+XgtnRDHLsvy2oCBOOHYPyK1RzHE3HgFlrh5Nsj20YwMQxTHYdqXJ47Aiebh9e84Mjy1/Nyhup3mkReUzz+gywAdZJZdhaC4f0IRvttR6GEctt7kV12lu0YsVUd2g1THrMdY84MgKA4jGzv6dZKgGqA6sHt0KBmZfvTCYrD8Fp74bX1hT52bfgpBMWR0MedL1MCTPEwsj2r51sCXJSazwbwy+M/yAJQL46H/LNfCf/gEwgO9wN+/H7BKKZcD25HH7ze08N4J5BKplpM9M7/KA1qCMYHI9nJzUQwPhTLnf9R/vgA3JYeSIinVE2tEsud/1GmVkJQPgy30DG/cRx9LlgALBKB13c6vL7TbSchSpU03WLb5qH32P8cVaFBBeIUwhsziPn3DEBrFWC+37LiOSd+iDOKiCj5YnPeNgQWv5dEzJ0I++eTgG85lBVABc898UMsAERERGmnOEv1jqcd9WcBICIiSr8cKrr6+A+wABBR8jkpmhxpcaKnJGGSaehrYTTO9xwYnHn8v1kAiCjxJNNkO0Jo3Ky978WJ+c9RHBeOlwt3zGyIEwoj4oT0nBBhASCilHEyeXgtPbZjzJuTbYLb3G1t+25zF5xss7XtT0sEXvvi0I+QiJuxdtnlTDiFdjj51rCGe1oB4GWARJQKXvtCOIVWmMoEYEKYNV1PInAyeTj5NrtrPYggu2AVTHkUplaOz9UVrgcn1wInk49keK+1F06+BaY8Hp/njgicbFOYO38AygJAROnkZJvj+w42KUQm33UWolt2N46cTFPsT4GEYK3qHZ7IZT7AUwBERESNIouKOXZDERYAIiKiBuFD1xz9O08BhM0E8If2QMtjyVhhipJNAMm3wOtaCli+ixwRxZ8DObYWPV8xQhQM7UVl28/iv542pU41k0du3UVwu5bYjkJEcWb+5wgATwGEJBjZj/Kjt3HnT1ZorYzyI7ciGN5nOwoRxZjI/xwBYAEIgwlQ2XZnfC4focakOnkEireaJqIpKMAjAGGq7X8MWhm3HYMIWi3BP/CY7RhEFF8rVDc7AAtAKPyDT9iOQHQMn49ENI0sii/uA1gA5i+owYwP2k5BdIwZH4b6VdsxiCiuxF8OsADMmymNx2e5TCIAgE5ehkpEdBIBlAUgDBpUbEcgegat8XlJRCcnRwoA1wGYJ+HiKxRHaX1eagAY33YKokRz4JwBsADMm+Tify9pajxOLmU3NQnKcEqHgIDrbBDNl3qFVwA8BTBvkm2GZFkCKD4kk4fk03NHPKlNwBnfy50/UViMaQVYAELhLlhuOwLRMZPPR4v3lA+TGkjpIHhjDaLwiJo8wAIQisyiDYCk5AWXkk1k8vmYElIbmzzvT0QhMhmABSAUTnMHMkvOsB2DCJlF6+G0dNqOEZ6A6xkQhU4D0dF/62YBCEl21bnwFqy0HYMamLdgBbKnPd92jHBxjQ2iaPiFDbwKICwiyJ1xCdz+5fD7t8MURwDDQ5cUMceFU2iHt/B0eH2rkZpz/0QULTFrWABCJfD6ToPXd5rtIERERFNzZAlPARARETWaQHtZAIiIiBqNY3p4CoCI0sGvIjh0AFqeAIKkzb8RSC4Pp6sX0tRqNYmWJ2AG+6GVMqDGapZjXA9OUyucBQsBxw1//MBHcGg/tDQen+eOOJBcAc6ChdGsOBsorwIgohRQRbBvF3RiND4v4LOi0EoJwYHd0ErJXopaBcG+3dByMT47fwAIfJixYQQHngp/bAWC/buh44fj9dxRAy1PINi3C/BrEYyvHSwARJR4WpqA1lKwZoACOjZsb/NjI/Ha8Z9AS+PQkHeGWi1ZLV2nZAKY8dEoRm5jASCixNMggndIltgsMmHvXCPhh/zz8RNwd8ko/l8kaGIBIKLk43pBNGcN+uRRybIAEBERNRo1LABERESNRtVkWACIKPEkikvDbHHtXZ0tTgKuDA/7/9pNwHPHiWBXrfBYAIgo8aTQFM2LpAWOxXUApKnF2rZnQjJZSCYf7pjZgtXSNRPSHP5zQkTddPzGEFFjcz24fcuiWSSmjpyOBZCWdmvbl6YWOF19gMTvplKSycLpWxb+/a4cB+7CZYCXCXngEIgDp2dxNAsBQZNwvIeI6NSkqRXeyvXQajl5d+IUgWTzsSgwTmcPnPauyZUA4zJD3vUm3/lH1Esk3wxv+VporRyfxYDEOfKciOp9ugoLABGlh0hE75YajONCCs22U9SXyOTpgEahEJ4CICIiajgCFgAiIqIGo2p4BICIiKjRiCBlRwDiN3GVqIFE8HLC32miaKimqwCoE8PLOIgaRRS/f/ydJopMqgoAMvYW0CBqdJoJfxGZyTF5GIAoCqkqAJptBdxwV4kiohlw89BsBAvYOBloriP8cYkaXuquAhCY5sWRvBMhopPTTAtM8+LI3qhrvhua747l6nREiSWK9C0EJA60aSHU1CB+CdCYrOpElDbiQr1CXc7Ta64Tmm078jvtAxqTFeqIkquUvgJwlJOBZjmBiCg1xOXRPaLwjKfsFAARERGdmvosAERERA3HYQEgIiJqPFplASAiImo0yjkAREREDUeFBYCIiKjhOFAWACIioobDIwBERESNR9VhASAiImo4aiZYAIiIiBqNwyMAREREjUfNYRYAIiKiRiPOIRYAIiKiBqMGh9J7N0AA6lehqbodsEDcDMRx67dJVRi/CsDUb5uRc+B42breX15NAA1qANJzG1sRF+Jl7Ww8AOALoPX7PyRKE9egmMoCEEwMwR87eOQFN2VE4OTakOlYCHEjfPFVhT96AEFxCGrStPOfJI4Lp6kTmdY+wInuQJgGNdRG9sNURlN5D3txM/Bae+A2d9dngyUH6M8AxTqWYKI06q42pa4A1A7vQzA+aDtGdFRhyodRPTiBbM9pEC8XwTYMqod2wlSL4Y8dE2oCBOOHoJUisj2nRXI0QP0KqgM7oMYPfey4mCw4+2D8CjLti6Pd2LgDPJVP00EUInt881iq5gCY8li6d/7HUeOjNrwnkrH9sYOp3vkfz9SK8Ef7Ixm7Nrw31Tv/4wXjgzDlsQg3AGAvd/5EoRAAq5duT1UB8CeGbEeoK1MtwtRKoY8bTAyHPmacBRNDoR+eN7UyTHUi1DHjzp+IsHyPeZMlgIjmz4MRWVNJVQFQv2w7Qt1pLdzvWQO/Yd61HqUaQIOQv2c+F8NViWCyn1Gg5j/9TwrnaRCdSB1TBYB0zQEwDfjLG/YEPU3fhL+ZUA0gyIQ3XgonTp5SlN9zmLP9KxXgsUeB4cFn7vAdB+hdCJy+HnA50ZDSyXF1DEhbASAiOpUtDwGHpzjNZQxwYN9kEVizob65psoTRFwmXSfSK2EoftTRIYAFgIgaSaUy9c7/eAf77RaAUgnYvmUya9RHk0SAjs7J77fQFO22KBbUkX4AYO0josZRq8zscX7N3ilFY4BHHpg8RVGPU0mqwPAQ8ND99dkeWSeueQpgASAiipeJMWBivP7bLRWBscP13y7VnYG7E2ABICKKl8oMj1KkbdtUN56rDwEsAERERI1Fg3sAFgAiIqLG4arKykt4CoCIiKiRqIdj67yzABARxUnG0i2WbW+b6kI8c+jo37kOABGlQ60G7HwcGB2ZevEcncUNBe69c+oVCD0X6F4ALD8t/EV0WtuAXB6o1Hk56VwOaGuv7zap7tTDk0f/zgJARMlnDPDgfcB4iHckLJ3iRlvjY0CxCJzxrPC2CUwWirOeDWx5GCjW6YZShSZgw9lc/rgROLr16F9ZAIgo+Q4Ph7vzn6mB/slL53K5cMdtaQOe/6LJowDVarhjnyiTBfL5aLdBseF6ev/Rv7MAEFHynerdepTKpfALwFG5/OQforBI9c6jf+UkQCJKAYt3AuUthCkpXCiWvuSho/9kASAiImoEGTMuIscaKwsAERFRAxAPe4//NwsAESWfa3E6k8epVJQQnj76tH/aykFEFJr2jsnL5+p9O9tsDmhqjmbsA3uBkRHAzGLtAkoPEaClBViyHHDCuTxTM3rn8f9mASCi5MsXgNPXA49vrV8JyGSBDWeFvxAQAGx7dLIAUGM7COBgP/CcF4TyPHOM9/3j/52uAjDFol2pJiF/02GPlxDCn+P82f6eFy2ZXJ1vbGzqd83lErBj+8zG23D21N+T5wGt7dEc/i+VuPOn/zE+BhzqB3oXzW+cjBpZ+aItx38oVQVAvCw0qNmOUV9euNcfi+MB4gBa50OpNolA3Ey4Q4b8/5IE4sVgHflsDuie5mc/PjrzsRb0AY6FUlMcr/82Kd4mQnhOZMzIiR9K1SRAt9BhO0JdiZuBm20KeVCBW2gLd8yYc/Jtk6UnzDEzBYgbgx1iHTXa719kuK4AnSiEp4R6+viJH0tXAWjqhJONaEJODGU6lkRy2NVrWzh5JKABiOMh0z7PQ2snHViQ6Vgc/rgx5WSb4DZ32Y5BRFNxcM8zP5QmIsh0r0j9OxFxM8h2r4STb41u/J7VcDIhH12IGSfThEzPaaEf/j82fr4V2e6VkY0fF06hHZnuVfbnABDRlFxXv3/ix1L3Nk8cF5muZfD8PphqEWrSMydAIBAvByfXEvmLrXhZZHtXw9SK0GoZOpvbqMaciAvJ5OGEffrkJJx8K3J962AqE1C/DLW5ZG3IxPHgZJvjce4/TaK4qoCSbb6nKF0oDm255cQPp64AHCVeFi5fmObNyTQBKT8SEDkROPkWAC22k1AStLROFnzOBaCj2trn9/UZMyLnvOMZ74ZZNYmocczmnZStMxrZHLBqDU+p0KSevsnLW+dBs7r1ZB9P7REAIqJnKDQBrgsEpzil1dpmdwe8bAXQ0QkMDwGNdmkzTXLcyedh1/x2/gAgnv70ZB9nASCixuE4kysGbntk6se4LrB6Xf0yTaW1bfIP0Tw52fJXT/ZxFgAiaiwLF0+eZx88BBj/6Z/LZCYXAMoX7GQjCltGfVnysvtP9ikWACJqPC2tk3+IUk6yZs9Un+MkQCIiopRST++e6nMsAERERCnluPjWlJ+rZxAiIiKqEwcK+N+c+tNERESUOpIPDsmqy8pTfZ6TAImo8RgzeWvgSuXpHy8UgBZeekfpYLJ673SfZwEgosYyNgo88mugMsUbo5ZW4KxzgFy+vrmIQuZ6+uXpPs8CQESNZcuDU+/8AWB8DHh8K3DmOfXLdDLGABPjgO+f+rHz4XlAcwtvQpQ2riqWN510AaCjWACIqHGUSpN/TmVoaPJmPLaWAx4ZAh59CKhV67O9TAbYcDbQ2V2f7VHkJK97Rc6ddh3pVBcA9aupuo0tIBA3A3Hc+m1SFcavACm6jS0gcLxcXV/c1QTQoIY0/RxF3OTdCnim6+qbYPK/ysb+PwiARx8EanW8B0CtNlk4zrtw8ogAJZ5m9Senekwq/6eDiUH4YwNHXnDTxym0IdO2KNoXX2NQG+1HUBqaPBSZNo4Dt6kLmda+SA99ql9D7fA+mMpYKm/vKk4GXmsP3Ba+cwyLjo9C6rnzP8qvAWOHeRQgJRwn+P9P9ZjUFYDa4X0Ixgdtx4iUKY2iWplApmf15DvZsKmiOrgTploMf+y4MAbB+CFopYjsglWRlAD1K6gO7ICeuN58iqg5UnD8MjIdS2zHSQUrO/+jbG6bwuOpLysvuf1UD0vVrA9THkv9zv8oNQH84SmXeJ4Xf7Q/3Tv/45haEf5YfyRj14b3pHrnf7xgYgimNGo7BhEBkJw+MZPHpaoA+BNDtiPUlakWYWrTzGaeo6A4HPqYcRZMDId+eN7Uyg1Too7yG+x5QxRXQcafcvnf46WqAKgf/s4w7jTkAqBBrWHetR6lGkCDcL/nxnwuzmB2PZ2arSsPKB0E8Fy5fiYPTdccAJO+SVanZEK+yiGFE9VmQjWAIBPegGmcOHkqcfmeTQAEUzyP/Vn8vvhVQKa44sZ1ops8motgXs9M5Qv2tk2hkEIwICsv3j+Tx6arABBR4xobBR7bMrnEbxh+8dOpPycCdHQB684If8XAljagtX1yRn49tbQBrVwGOelM1tw208eyABBR8tV84OEHgGrl1I8NgyowPDi5pPBzzwt//LPOAXZsB0YGwz/KdyLHBdo7gdVrefohBdxmZ0aH/wEWACJKg8ND9dv5H29sFChOAE3N4Y6bzQLrzwx3TEq/nBZl4YV3zfThqZoESEQNysbO/9i267RcL9EpSM5Me/e/E7EAEBERpYB45h9n83gWACIioqTz1MfKi6a9+9+JWACIiIgSTvPmARGZ1XXcLABElHwZi3clzCbsjoiUSm5eb5jt1/AqACJKvs6uyRJQq/OEvJZWoNAU/ri+D+x8fPJSQ5+TDMPnAK2twMrT07H2QRY1LL/wP2b7ZSwARJR8XgY469nA1keAUp3uwdDeDqw7K/xr51WBh+8HDo+EOy493dAgMDICnHt+NCWujjQf3Csis16KkwWAiNKhrQN4wQWTlwROtXjOxMTkgkEz8fwXAc4UO3cvM/knChPj3PnXiwmAA3uBVWtsJ5kXNxfMePGf47EAEFG6ZKdZS9+fxU2f8k1TF4AoVRrvRlJWlRP+886ZCpZdfONcvpSTAImI4qRBb8hFc6MF/elsZ/8fxQJARESUUG4m+Lu5fi0LABERUQJp3ozK8kumuW3l9FgAiIjixOPUrLpyE/zzzprvzufLWQCIiOKkpS26KwzomTq7bCeYG1G4nv+++QzBAkBEjWOm7/YcB7BwAQCAySMAG84CMgl+Z5oUS5YDPX22U8yJNOkuWXXZrvmMwWcYETWOfAHI5U99qV1HZ/gL/MxG1wLgvIuA0VHAr9nLkVYikysA5vK2k8yZNuHT8x0jXQXA4u+rNWG/SNl80bNI+HOcvyi/57CGFgE2nA08+mugOsUSu03NwJr1IW1wHlwvuYenKVpZrTnL9s5p8Z/jpaoAiJeFBo3VlsWbZtGTuYzneJMvko10LbIIxA33nKt4jXeDmEi/Z2/Wq5xOrf3IioGjh5+5MFAmO7mioI0FgIhmSAvBrSJXTLHc5cylqgC4hQ6YyoTtGHUjbgZONuQ1rEXgFtoRFBtnKVIn3wZIuNNhnGzzZCFtoBu5uE0d0Q3eHgADAMLqAa4HdHaHNBhRHYnCzZlNYQyVqkmAblMnnFyz7Rh1k+lYGslhV69t4eSRgAYgjodM+6JIxs50LGmYUwFOthluU4SHqz0Fehrr6B7RyUiT7pFllzwUxlipKgAQQbZrJdymTttJIiVuBtnulXDyLdGN33Na+EcXYsbJNiHbc1roh/+PjZ9rQbZrRWTjx4Vb6ECme0X0Zae7BiysAm4DnZ4iOkGQ8/8hrLHS9zbPcZDpXAqvrRemUoSa9LxrEDiQTA5OtjnyF1vxcsj2rIaplaDVElTnfbopNkRcSDYPJxN9wXHyrcj1rYOpTkBrFWhox7DtEydz5FRHHQtOlw+0+0DRBarpev9CdEqKQ97Siz8a1nDpKwBHiJuF29R4E7HC5mQKQKZgO0ayicDJtQC5aI7YNBwXQGsAID2llGhGFB8UkdCe+KzQRERE8TfmFMwXwhyQBYCIiCjuVL8g8rLDYQ7JAkBERBRv6jjOZ8MelAWAiIgoxkTxXcm/eFvY47IAEBERxVggMu9lf0+GBYCIiCi+Hvbyl90excAsAERERDGlwHUiEsnqV6ldB4CIiCjZ5Ck33/aVqEa3dgTAaGOskU5ERDQnoteJnBvZcrbWCsBwket5ExERTWHQyfmhLvxzImsFoH/c1paJiIhi75Mir4j0/vbWCsCuIWBwgnMQiYiITjDmVLKhL/xzImt7YFXgnp2urc0TERHFk+Cz0nHRcNSbsfoW/Nu/zqLiczIgERHREeNOLfPxemzIagEYLjr45v28ZS8REdEkuUFaLx6ox5asn4T/9gNZ3LWDyxEQEVHDG3Wq1bq8+wdiUAAUwKfvKOAHD2dsRyEiIrJIPiXtrxyq19asFwAACAzwr7/I42O3FLB3JBaRiIiI6kYNRp2yfLKe24zVsfd7d3v41ZMezlgc4NzlNSzvMmgvKDxeLEBERCk2UnS+fMaqS0bquc1YFQAAMAo8vNfFw3u51yciooZwsFKqbqz3Rnm8nYiIyCIB3v9fmy4cq/d2WQCIiIjs2XpwaCLSNf+nwgJARERkjb7nx5sv821smQWAiIjIjp/cdOV537O1cRYAIiKi+lMj+h6bAVgAiIiI6kyAL3/9z8+712YGFgAiIqL6KjtB8H7bIVgAiIiI6kgVH/3Ku1+4y3YOFgAiIqL6eapQzX3EdgiABYCIiKh+VN/1paufPWE7BsACQEREVB+KH930rvO+aTvGUSwARERE0atC5c9thzgeCwAREVHERPDxm/7i+dts5zgeCwAREVG09qjT/Pe2Q5zIEUsbVkvbJSIiqi95901/eua47RQncjzHsbIv9o2xsVkiIqI6km/ddOXzv2Y7xck4eVfKNjZc9FkAiIgo1Q7Dr/2Z7RBTcQqet9/Ghou+D195IoCIiNJJVd9z01Uv2ms7x1ScQsb5sY0NGwUGSzUbmyYiIora7V+78gWftx1iOk4+kL+3NRNwX9HK2QciIqIoFR04fwSRWB/mdh7+u5c8sSCf225j43snKqgEnAtAREQpovqBr1557hO2Y5yKAwBdrvcWV+p/GMA3BttGYrEkMhERURjuxqLd19sOMRMOADz0ty++r6+QvctGgF1jRYzXfBubJiIiClMJMG+/6YorAttBZuLYSoALMl0v6chmR+odwCjwy/7DqJlYnyohIiKalqpuuunK8x+1nWOmjhWA+zafW1yQkRcUPLfuU/PHaj7uGxiFcn1AIiJKIsWPvnblCz5jO8ZsPO1eAFv+7uXbV+TzL2vJeHWfnn+gWMa9B0cR8EgAERElicgwAv/tcZ/1f6KTzvzb8MEfLBoal/uHytW+egfqyHo4v68TeY/3KSIiovgTxZtufNcLbrSdY7amnfq/bvPtGw8WK389XvPz9QoEAJ4ITmsrYE1HCzLWbldEREQ0veYO77//9W3PvcB2jrk45d71eZvvbTocjFx/uFZ7w+GK31nP4xt518HKtgKWNRfQnHHruGUiIqLpZQtSa+3OLv3c65990HaWuZjV2+sNH/zBIr+WeatvzLkmQC+ghaiCnSifcUe7stn+9pw3Usg4ZRfOrFYQcjLI9qzM/r7joTOqjFQ/h0cq+PUD/bZjEM3KypUdWL6yzXYMCoEqFHDe+ZmXn/0521nmqqGOr39oYMvzHOP8N4Cs7Sw0Pzt3jODz//SA7RhEs/KSl6/CZS9ZYTsGhUBUPrBx4dq/s51jPhpqpt21PRvuU+gHbOcgIqIEE9yxsm/Nh2zHmK+GKgAAsKl33Ueh+J7tHERElEj9vgRvvUIkEav9TafhCoCIqAP3DwAcsJ2FiIgSxTiQ331fzxn7bQcJQ8MVAAC4euHpBx3I7wFIfIMjIqJ60c1X96291XaKsDRkAQCAq/vW3qqQa2znICKiRPh+qXfdB22HCFPDFgAAuKZv7ccA/JvtHEREFGu7gpr5vc0is7r8PO4augAAQKba9CcCuc92DiIiiqWSEef17126YdB2kLA1fAG4atmykhP4bwAwYDsLERHFiyjefm3vmvtt54hCwxcAAHjP4jN2G9U3A/BtZ6GZaagVrCg9knWzuIYn0I9tXLjuq7ZzRIUF4IhrF66/XYFNtnPQzBSaM7YjEM1acxOftwlyW7F3/7W2Q0SJBeA41/St+wRUv2A7B51aa1vOdgSiWWtrq+uNVWnudrgB3rxZLkv1UWEWgBOUSrl3QnGv7Rw0vaaCh96+ZtsxiGbMcQTLeCOgBJBhOPqq9yxed8h2kqixAJxg86pVZdcEbwTAW83F3JlnLbAdgWjGVq5q5ymA+KsZNW/c1LN+m+0g9cACcBLvWXzGbuOYVwMYt52Fpnb+hUuRz3u2YxDNyMUv5l0A40+vvHbh+tttp6gXFoApXNuz4T4VXAFeGRBbzU0ZXMpbq1ICnHHWApx+eqftGDS9j2/qW/852yHqiQVgGtf0rvu+KP7Edg6a2gUXLcOzzumzHYNoSgt6m/D6y9fbjkHTEODbq3rXNtxVYCwAp7Bx4bp/UeBvbOegkxMB3vim9TjvRUtsRyF6huUr2vGHf3QOT1XF292i5VTc3ne2uJ7KDKiqXNe/7fMQebvtLDS1Bx/oxy3f34GRkYrtKNTgcjkXF16yHBddugyey/dZMfZ4YJwXvXfRmoZcCZYFYIb+Se/NjBxs+w6gr7CdhabmBwbbHh3Eo48MYP++CYyNVVAqchoHRSuTcdHWkcWCBU1Yv6EbZ5zdwxn/8bffGPOiaxdt2GU7iC0sALPwkYGtrTDyEwDPsZ2F7PnOLQfxy1+N2I5Bc9S3IIs//18rbccgu8aMOJekdY3/meKxqVnY1LN+zHeCVwPYbTsLERHNSdWBvL7Rd/4AC8Csva/njP0I5DfAuwcSESWNL5Dfubpv7a22g8QBC8AcbFq8dosDfSmA1N0fmogopRSqf7yxb+3XbQeJCxaAObq6b/2DIvJSQIZtZyEioumJ4v9sWrj+87ZzxAkLwDxs7F37AFReBWDMdhYiIjo5FVy7ceG6T9rOETcsAPO0aeGauwT6G+B9A4iI4kf0g9f0rvuw7RhxxAIQgo196+90IK8DULadhYiIjvnEpt7177cdIq5YAEJydd/aWwXOawFwGToiIvs+salv3f+xHSLOWABCtLFvzS0A3gygZjsLEVED485/BlgAQrapb923VPR3ATTcjSWIiGwT6Me4858ZFoAIXNO7/kaovh6cE0BEVE+f2Ni3/mrbIZKCBSAimxau/68jcwImbGchIko90Q/ynf/ssABEaGPfmluMwWXgioFERFFRhW7ibP8595zZAAAObUlEQVTZYwGI2LWL1t2jxrkEwD7bWYiIUkYh8hfX9K2/znaQJGIBqINrFq15xEAuArDDdhYiopQIIHj7pt61N9gOklQsAHVybd/aHRp4lwHYZjsLEVHCVQC5YlPvun+zHSTJWADq6JrFq5901L0YwAO2sxARJdSIMeaVm/rWfsN2kKRjAaizqxeefjCbzV4G4E7bWYiIEma/iFx27aINP7YdJA1YACx4d+eqkVLQ+nIAbLBERDPziOe7523sXcsjqCHxbAdoVJsXLy6q6huvO/jYXwH4K9t5qPEIBAXPQWvWRbPnwXMEnuPAE8BXIDAGgQITNR/jNR8TNQMDtR2bGpL+IqjpazYtXcdLqkPEAmCRiCiAzdcd2LZHBZ8FkLGdidKtI+uht5DFgkIOXfkMPJEZf60CGKnUMFCu4lCpioFSlXWA6kBuKhWzb9u8ahVXVg0ZC0AMbFy47l8+cmDbTgi+BqDDdh5Kl7zrYEVrActa8mjJzP1XXgB05jLozGWwtr0Z5cBg70QZT46VcLjqhxeY6CjVG0p9a9+9WcTYjpJGLAAxsWnhutuuO/joC1Td7wJYazsPJV+T52J1exNWtjbBnfkb/RnLuw5WtzVhdVsTBstVbD9cxIEi74ZNoaiIyB9v7Fv3r7aDpBknAcbIxt4ztgc18yIAP7WdhZIr4zh4dncrXrZ0AVa3RbPzP1F3Povz+zrwwr5ONGfc6DdIaTYojvOKjb1r/9V2kLRjAYiZ9y7dMFgYdV4uwL/bzkLJs7Qlj5cs7caqtibM4vR+aPqasnjJkm6s72yGY2H7lHTysKP6/I09a35iO0kjYAGIoSvXrKlc3bv2bQr8DcB5VnRqrgjO7m7FuT3tyLt2f60dEazvaMFFi7rQ5PFoAM2Q4LsFTy64euH6nbajNAoWgJgSEb2mb91ficpvATJsOw/FV5Pn4tIlXVjd1mQ7ytN05jK4dEk3evJZ21Eo3hSQj5R61r72yu41o7bDNBIWgJjbuHDtd404LwDwoO0sFD+tWQ8XL+pC6zxm90cp6wheuKgDS5rztqNQDCkw6gBv2NS39hrO9K8/FoAEuLb39MdLxex5EPyL7SwUH525DC5e1Im8F+9fYweCc3vbsKK1YDsKxYgotkog51/dt+6btrM0qni/ctAxm1etKm/qXfe/Ffj/AJRs5yG7mjMezuvrQMZJxq+wQHBOdxsW80gAARDg2/mMc96mxWu32M7SyJLx6kHHXNO37otw9GIAu21nITvyroMLF3ZYn+w3WyLA83ra0c05AY2sCpF3/b/27jU4yuqMA/j/OXvJ5kYCYXcTxAuXvUAQvMCoWCoqVarI1Ha0+EHG0c6kV0ut2U2knUZnWkTbzkg/dEw7OhV1rNDqTEBLRRlExFZp1TYVRbloiwSQSwLJJtn3ffrBFS8IBnI52X3/v5l8y4f/fjj7Pnve5zynPhK/lu/77cuvbxACAKTDyVecXvd8AH+xnYWGlkBwXrgCxXnaXe8TYEa4AkV5snNBA2on1FySjsSX5cagk2VchXnqjrGTPkhF4ldBtAEAm2c8Il5Zgkhxfv+CDvkNzguP+HC2MHmCAk+4Rd3npqtjL9nOQh8bnq3D1Ce5Knrpkt1bXjYifwAw1nYmGjzlQT8SlWW2YwyIaEkRziwrxs4OtrMUuIxCb2uIJn9rOwgdizsABaCxOvmcW9Q9FYLHbGehQSLAtFHlBTVdr3ZkGV8FFDLBGyJyER/+wxdXX4ForJx6IB1J3CCi1wPYbzsPDayxpSGMzvOt/88K+gwSI0ttx6CBpwCajZuZkYrEX7Udho6PBUCBSUWSK9TxnwvBOttZaGAIBImKwnxQnlVenHenGeiE9ojK/HQ0UVdfPe2I7TB0Ylx5BahhzIR3U+H45aK6CADvZ81zNaVFKA8WZruOEcHEysIsbrxGgSd8DmpT1fFVtrNQ3xTmtwp91CB43z173lqvqg8DqLWdiU7NhIrCnqB3VlkIW/YfRlZ5MiwfKdBuRH+UjiQfsJ2FTg53AApcKhJ/taszOF1F7gNvFsw7JX4fqoKF9e7/s/zGoKa0yHYMOhWKpwJZ35QUH/55iQWABzSNG5dpiMQXCXQWgFbbeajvzigLeeK8/OllHBGcZw4KpC5dnbj6x6dNfM92GDo1LAA8JBVNbqyMdJybGx6UsZ2HvliNR2bnh4uLECikM46FTLE64MOUVDTebDsK9Q8LAI+pk+m96UhyKYyeA9X1tvPQ8QWNYEQwP0f+niwBUBUK2I5BJ9amihvS1Yl5t41O/M92GOo/FgAelQ4n30xFE5fmbhfcZzsPHauqOAjxwv5/zuhi9gEMUwpgudPr1jZUJzhsrIDwFICH5U4KPPTztm1r/Oi9F8CNtjPRxyqLvPWLuDLAr6Nh6HUD8+36aGyT7SA08LgDQFgcHd+WjiYWquAqADts56EPlefpjX+nqqxAZx3kJ+0EcGfXvuwMPvwLFwsAOqohknjaaGYKFEvAJkHryjz2izjkM2wEHBZkpT/rT6ajiaam2toe22lo8LAAoE+pr552JF2duAN+EwOwHJwdYE2RB0fkBj34mYcNwRsKd246Gr+OR/u8gauNPle6KvbfdDSx0HVxAYCNtvN4kd+Dv4YDvB3Qhv2iumhcOH52Q3TSGtthaOhwtdEJNdYkXk5F4rNytwzusJ3HK0QAn3ivAPB78DNblAXQ7HOQSFUn77texLEdiIaWt14y0inJnRZY0bRr1+oSX8ftCqQA8AaXQWQ8+iD0efNjDzVV6J/FYHE6nHzTdhiyhwUA9VnTmDGdAO5aunfL7+HKzwDcAsBbrepE+e0lEaTSkeQG20HIPr4CoJOWDid3paOJOlfMDBFtARsFiYa7VlUzPx1NXJSKJPjwJwAsAKgfGiOxf6YiyfmuiwugeMp2HiI6xg6I3DwuEp/WUB1rsR2GhhcWANRvjTWJl9PViasVOAeQFbbzEJG+K6qLittNMh2JP8gGP/o87AGgAdMQTbwG4Pqlu7deCOMuhmKe7UxE3qLviuLXnV1F9zeNG8dhXnRCLABowKWrYy8BuObuPW9+ySjuVOAy25mICtxOhSzJ7Ms+yOl91FcsAGjQNEQSLwC4/J69Wy9xXfcnAsyxnYmosMi/Ab2nMtLxWJ1M77WdhvILCwAadKlwbD2A9fe2bZnqQr4HYCGAkOVYRHlLIJsh7tL6cHxlbk4H0UljEyANmfpo8vV0NFGXNc54FfwCwAe2MxHlEYVglQpmpaLx6alIcgUf/tQf3AGgIbc4PPl9AIuXbd16V+cI95siaIBiku1cRMPUYQCPqmuWNdTEWm2HocLBAoCsuTUW6wbwUJPqw6V7tl7miv6QJweIjtoG0eZAt/O7206v3W87DBUeFgBkXZOIC2AtgLVL9r5xvnHNDwC9DpAS29mIhpgCWKtqfpOJTlydWxtEg4IFAA0rjeFJmwHctOyDrbdmsrpAoQsBXGw7F9Ega4PqH1V9zdzmp6HCAoCGpVurYu0AmgE0//L9rZMdowsBvQXAaMvRiAaKq8BzRrS5Inz4SR7jo6HGAoCGvdtrYv8B0NC0fXtTcUn3NyByCxSzAfDyWMpHO1V0uc/FA/XVye22w5B3sQCgvJEbbfoIgEfuads6wRX3ZlHcBGCM3WREX+ggBCsVsjwdjm3g8T0aDlgAUF5KRWPvAFjcpPrT0N63Zoqr10FkAYCI7WxEOY4C6wAszzjlK5vGjOkEgAbLoYg+wgKA8lquS/oFAC80tbbWh6qCVxpxFihkPoAyy/HIe3oAPCuiK/3dzpM8vkfDGQsAKhi5S1BaALQ0bd8eChVnvyLizgPwNXBngAZPtwIbjOqqrPoevaMmttd2IKK+YAFABSnXL9ACoOV+feX7B/eMmA24XwdkHoCxdtNRATgIwRqotmggsKph1IRDtgMRnSwWAFTwcsernsn9fWdJ21vjfcAcFb0GijngxUTUN9ugusqIaTmyr/d5XrtL+Y4FAHlOYzS+DbkZA/fufq3U8RXPFkfnQuRKQGO289GwcRiK9QJ9xjH+1Y2RiW/bDkQ0kFgAkKfVV087AmB17g9HdweAOYBeAaDCakAaSo5AXlVgrQHWFrXLhtx9FUQFiQUA0Sd8cnegqbU1GBptpkPMl8XFLAguBguCQtINYDOgG0XN8+pz16fCiQ7boYiGCgsAouPIveN9Mfd39+Oqvnf2vj21rNRXN/6Mkrn7DvSc1t6R5RrKE6UlPnf0qODecFVwkwp+lTkSfCXXLErkSRylStQPlz/+/ORMNxZ0djmzDx7KTt63r2dUpsft97ryGcE1Z3rv5OKm3QfQ1tX/3rpAwOjokcH2igr/2+WlgRfLyuXJNdfOXMcJfEQfYwFANMDm/mnjjO4endvV7VzU3uHU7j/QW7P/YG9Ate/PHhYAfRcqMm7liEB7xQj/tpJS/9+LQljV2V7y1811vFyH6ERYABANgdmPr6vOdvu/mnV0ZleXM+VIl3NW+2Gnqr29J+A4x/4/C4BPEwHKywPZynL/odJi33uhkK/V78ff1Pif3nTjTHbnE50CFgBEFl3x0GulPaH2WT1d7oU9Wa3t6dYJnRm3JtPpVF5QXhEy4p0l6kLRevhwtjeoB0uKfbuDAewIFJlWv+hmpyf47KZvzeRYXaIB5J1vF6I8NOfBF8/2q1yqrjsdDsapY05DViuMq6UC8Rs1JiCQgDG2ox6Xo4oeQB3XVRVk1WjG9eGAMboHfrPN8eFfAbibnr754udsZyXyEhYARAXgu+tay957/8A52u2b1KtmAhzndDgYBchIV7VcFEF1USKqRarwGzUBVf1w/YsaUTluBaECB4qjDQxipFehWTXIwGgGKt3iQzvE7fCJ75D63F3GL++IX1qzXfqPNfzlTkRERERERERERERERERERERERERENHD+D8ma6aCoLQqmAAAAAElFTkSuQmCC", nn = (e, t) => {
  const n = e.__vccOpts || e;
  for (const [a, r] of t)
    n[a] = r;
  return n;
}, GY = {
  name: "NavbarAppBar",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n,
      posLogo: YO
    };
  },
  props: {
    posProfile: {
      type: Object,
      default: () => ({})
    },
    pendingInvoices: {
      type: Number,
      deflt: 0
    },
    isDark: Boolean,
    loadingProgress: {
      type: Number,
      default: 0
    },
    loadingActive: {
      type: Boolean,
      default: !1
    },
    loadingMessage: {
      type: String,
      default: "Loading app data..."
    },
    company: {
      type: String,
      default: "POS System"
    }
  },
  computed: {
    appBarColor() {
      return this.isDark ? this.$vuetify.theme.themes.dark.colors.surface : "white";
    },
    displayName() {
      return this.posProfile && this.posProfile.name ? this.posProfile.name : frappe.session && frappe.session.user_fullname ? frappe.session.user_fullname : frappe.session && frappe.session.user ? frappe.session.user : "User";
    }
  },
  emits: ["nav-click", "go-desk", "show-offline-invoices"]
}, QY = {
  key: 0,
  class: "loading-container"
}, JY = { class: "glass-card" }, XY = { class: "loading-message" }, ZY = { class: "progress-badge" };
function eG(e, t, n, a, r, i) {
  const o = Q("v-app-bar-nav-icon"), l = Q("v-img"), s = Q("v-toolbar-title"), d = Q("v-spacer"), u = Q("v-icon"), f = Q("v-chip"), h = Q("v-badge"), g = Q("v-tooltip"), v = Q("v-btn"), w = Q("v-progress-linear"), b = Q("v-app-bar");
  return ee(), Re(b, {
    app: "",
    flat: "",
    height: "56",
    color: i.appBarColor,
    theme: n.isDark ? "dark" : "light",
    class: Ie(["navbar-enhanced elevation-2 px-2 pb-1", a.rtlClasses, a.isRtl ? "rtl-app-bar" : "ltr-app-bar"]),
    style: Xe([a.rtlStyles, { flexDirection: a.isRtl ? "row-reverse" : "row" }])
  }, {
    default: x(() => [
      I("div", {
        class: Ie(["navbar-brand-section", a.isRtl ? "rtl-brand-section" : "ltr-brand-section"])
      }, [
        _(o, {
          ref: "navIcon",
          onClick: t[0] || (t[0] = (p) => e.$emit("nav-click")),
          class: Ie(["text-secondary nav-icon", a.isRtl ? "rtl-nav-icon" : "ltr-nav-icon"])
        }, null, 8, ["class"]),
        _(l, {
          src: a.posLogo,
          alt: "POS Awesome",
          "max-width": "32",
          class: Ie(["navbar-logo", a.isRtl ? "rtl-logo" : "ltr-logo"])
        }, null, 8, ["src", "class"]),
        _(s, {
          onClick: t[1] || (t[1] = (p) => e.$emit("go-desk")),
          class: Ie(["text-h6 font-weight-bold text-primary navbar-title", a.isRtl ? "rtl-title" : "ltr-title"]),
          style: { cursor: "pointer", "text-decoration": "none" }
        }, {
          default: x(() => [
            ae(q(n.company), 1)
          ]),
          _: 1
        }, 8, ["class"])
      ], 2),
      _(d),
      I("div", {
        class: Ie(["navbar-actions-section", a.isRtl ? "rtl-actions-section" : "ltr-actions-section"])
      }, [
        bt(e.$slots, "status-indicator", {}, void 0, !0),
        bt(e.$slots, "cache-usage-meter", {}, void 0, !0),
        bt(e.$slots, "db-usage-gadget", {}, void 0, !0),
        bt(e.$slots, "cpu-gadget", {}, void 0, !0),
        I("div", {
          class: Ie(["profile-section", a.isRtl ? "rtl-profile-section" : "ltr-profile-section"])
        }, [
          _(f, {
            color: "primary",
            variant: "outlined",
            class: Ie(["profile-chip", a.isRtl ? "rtl-profile-chip" : "ltr-profile-chip"])
          }, {
            default: x(() => [
              _(u, {
                start: !a.isRtl,
                end: a.isRtl,
                class: Ie(a.isRtl ? "rtl-profile-icon" : "ltr-profile-icon")
              }, {
                default: x(() => t[3] || (t[3] = [
                  ae(" mdi-account-circle ")
                ])),
                _: 1,
                __: [3]
              }, 8, ["start", "end", "class"]),
              I("span", {
                class: Ie(a.isRtl ? "rtl-profile-text" : "ltr-profile-text")
              }, q(i.displayName), 3)
            ]),
            _: 1
          }, 8, ["class"])
        ], 2),
        _(v, {
          icon: "",
          color: "primary",
          class: Ie(["offline-invoices-btn", a.isRtl ? "rtl-offline-btn" : "ltr-offline-btn", { "has-pending": n.pendingInvoices > 0 }]),
          onClick: t[2] || (t[2] = (p) => e.$emit("show-offline-invoices"))
        }, {
          default: x(() => [
            n.pendingInvoices > 0 ? (ee(), Re(h, {
              key: 0,
              content: n.pendingInvoices,
              color: "error",
              overlap: ""
            }, {
              default: x(() => [
                _(u, null, {
                  default: x(() => t[4] || (t[4] = [
                    ae("mdi-file-document-multiple-outline")
                  ])),
                  _: 1,
                  __: [4]
                })
              ]),
              _: 1
            }, 8, ["content"])) : (ee(), Re(u, { key: 1 }, {
              default: x(() => t[5] || (t[5] = [
                ae("mdi-file-document-multiple-outline")
              ])),
              _: 1,
              __: [5]
            })),
            _(g, {
              activator: "parent",
              location: a.isRtl ? "bottom start" : "bottom end"
            }, {
              default: x(() => [
                ae(q(e.__("Offline Invoices")) + " (" + q(n.pendingInvoices) + ") ", 1)
              ]),
              _: 1
            }, 8, ["location"])
          ]),
          _: 1
        }, 8, ["class"]),
        bt(e.$slots, "menu", {}, void 0, !0)
      ], 2),
      _(Ur, { name: "loading-fade" }, {
        default: x(() => [
          n.loadingActive ? (ee(), Oe("div", QY, [
            I("div", JY, [
              I("span", XY, q(n.loadingMessage), 1),
              I("div", ZY, q(n.loadingProgress) + "%", 1)
            ]),
            _(w, {
              "model-value": n.loadingProgress,
              color: "primary",
              height: "4",
              absolute: "",
              location: "bottom",
              class: "glass-progress"
            }, null, 8, ["model-value"])
          ])) : ye("", !0)
        ]),
        _: 1
      })
    ]),
    _: 3
  }, 8, ["color", "theme", "class", "style"]);
}
const tG = /* @__PURE__ */ nn(GY, [["render", eG], ["__scopeId", "data-v-ad919662"]]), nG = {
  name: "NavbarDrawer",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  props: {
    drawer: Boolean,
    company: String,
    companyImg: String,
    items: Array,
    item: Number,
    isDark: Boolean
  },
  data() {
    return {
      mini: !1,
      drawerOpen: this.drawer,
      activeItem: this.item,
      showSport: !0
    };
  },
  computed: {
    scrimColor() {
      return this.isDark ? !0 : "rgba(255,255,255,1)";
    }
  },
  watch: {
    drawer(e) {
      this.drawerOpen = e, e && (this.mini = !1);
    },
    drawerOpen(e) {
      document.body.style.overflow = e ? "hidden" : "", this.$emit("update:drawer", e);
    },
    item(e) {
      this.activeItem = e;
    },
    activeItem(e) {
      this.$emit("update:item", e);
    }
  },
  mounted() {
  },
  methods: {
    handleMouseLeave() {
      this.drawerOpen && (clearTimeout(this._closeTimeout), this._closeTimeout = setTimeout(() => {
        this.drawerOpen = !1, this.mini = !0;
      }, 250));
    },
    changePage(e) {
      this.$emit("change-page", e), window.innerWidth < 1024 && this.closeDrawer();
    },
    closeDrawer() {
      this.drawerOpen = !1, this.mini = !0;
    }
  }
}, aG = {
  key: 0,
  class: "drawer-header"
}, rG = { class: "drawer-company" }, iG = {
  key: 1,
  class: "drawer-header-mini"
}, oG = { key: 2 };
function sG(e, t, n, a, r, i) {
  const o = Q("v-img"), l = Q("v-avatar"), s = Q("v-divider"), d = Q("v-icon"), u = Q("v-list-item-title"), f = Q("v-list-item"), h = Q("v-list"), g = Q("v-navigation-drawer");
  return ee(), Re(g, {
    modelValue: r.drawerOpen,
    "onUpdate:modelValue": t[1] || (t[1] = (v) => r.drawerOpen = v),
    rail: r.mini,
    "expand-on-hover": "",
    width: "220",
    class: Ie(["drawer-custom", { "drawer-visible": r.drawerOpen }, a.rtlClasses]),
    onMouseleave: i.handleMouseLeave,
    temporary: "",
    location: a.isRtl ? "right" : "left",
    scrim: i.scrimColor
  }, {
    default: x(() => [
      r.mini ? (ee(), Oe("div", iG, [
        _(l, { size: "40" }, {
          default: x(() => [
            _(o, {
              src: n.companyImg,
              alt: "Company logo"
            }, null, 8, ["src"])
          ]),
          _: 1
        })
      ])) : (ee(), Oe("div", aG, [
        _(l, { size: "40" }, {
          default: x(() => [
            _(o, {
              src: n.companyImg,
              alt: "Company logo"
            }, null, 8, ["src"])
          ]),
          _: 1
        }),
        I("span", rG, q(n.company), 1)
      ])),
      _(s),
      _(h, {
        density: "compact",
        nav: "",
        selected: r.activeItem,
        "onUpdate:selected": t[0] || (t[0] = (v) => r.activeItem = v),
        "selected-class": "active-item"
      }, {
        default: x(() => [
          (ee(!0), Oe(Qe, null, rn(n.items, (v, w) => (ee(), Re(f, {
            key: v.text,
            value: w,
            onClick: (b) => i.changePage(v.text),
            class: "drawer-item"
          }, {
            prepend: x(() => [
              _(d, { class: "drawer-icon" }, {
                default: x(() => [
                  ae(q(v.icon), 1)
                ]),
                _: 2
              }, 1024)
            ]),
            default: x(() => [
              _(u, { class: "drawer-item-title" }, {
                default: x(() => [
                  ae(q(v.text), 1)
                ]),
                _: 2
              }, 1024)
            ]),
            _: 2
          }, 1032, ["value", "onClick"]))), 128))
        ]),
        _: 1
      }, 8, ["selected"]),
      r.showSport ? (ee(), Oe("div", oG)) : ye("", !0)
    ]),
    _: 1
  }, 8, ["modelValue", "rail", "class", "onMouseleave", "location", "scrim"]);
}
const lG = /* @__PURE__ */ nn(nG, [["render", sG], ["__scopeId", "data-v-900e46f4"]]), cG = [
  { code: "en", name: "English", native_name: "English" },
  { code: "ar", name: "العربية", native_name: "العربية" },
  { code: "es", name: "Español", native_name: "Español" },
  { code: "pt", name: "Português", native_name: "Português" }
], uG = {
  name: "NavbarMenu",
  props: {
    posProfile: { type: Object, default: () => ({}) },
    lastInvoiceId: String,
    manualOffline: Boolean,
    networkOnline: Boolean,
    serverOnline: Boolean,
    isDark: Boolean
  },
  data() {
    return {
      showLanguageDialog: !1,
      selectedLanguage: "en",
      currentLanguage: "en",
      availableLanguages: cG,
      loading: !1,
      changing: !1,
      useWesternNumerals: !1,
      originalWesternNumerals: !1,
      notification: {
        show: !1,
        message: "",
        type: "info",
        timeout: 3e3
      }
    };
  },
  computed: {
    canChangeLanguage() {
      return (this.selectedLanguage !== this.currentLanguage || this.useWesternNumerals !== this.originalWesternNumerals) && !this.changing;
    },
    selectedLanguageName() {
      return this.availableLanguages.find((t) => t.code === this.selectedLanguage)?.name || this.selectedLanguage.toUpperCase();
    }
  },
  async mounted() {
    await this.initializeLanguage(), this.initializeWesternNumerals();
  },
  methods: {
    initializeWesternNumerals() {
      try {
        const e = localStorage.getItem("use_western_numerals");
        if (e !== null)
          this.useWesternNumerals = ["1", "true", "yes"].includes(e.toLowerCase());
        else if (window.frappe && window.frappe.boot) {
          const t = window.frappe.boot.use_western_numerals || window.frappe.boot.pos_profile?.use_western_numerals;
          typeof t < "u" && (this.useWesternNumerals = !!t);
        }
      } catch {
        this.useWesternNumerals = !1;
      }
      this.originalWesternNumerals = this.useWesternNumerals;
    },
    saveWesternPreference() {
      try {
        localStorage.setItem("use_western_numerals", this.useWesternNumerals ? "1" : "0");
      } catch {
      }
      window.frappe && window.frappe.boot && (window.frappe.boot.use_western_numerals = this.useWesternNumerals), this.showNotification(
        this.useWesternNumerals ? "Western numerals enabled" : "Western numerals disabled"
      );
    },
    async changeLanguage() {
      if (this.selectedLanguage === this.currentLanguage) {
        this.originalWesternNumerals = this.useWesternNumerals, this.showNotification("Settings updated. Reloading...", "success"), this.closeLanguageDialog(), this.$emit("clear-cache"), setTimeout(() => {
          window.location.reload();
        }, 200);
        return;
      }
      this.changing = !0;
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.utilities.set_current_user_language",
          args: { lang_code: this.selectedLanguage }
        }), t = e?.message || e;
        if (t?.success)
          this.currentLanguage = this.selectedLanguage, window.frappe && window.frappe.boot && (window.frappe.boot.lang = this.selectedLanguage), this.showNotification("Language changed successfully! Reloading...", "success"), this.closeLanguageDialog(), this.$emit("clear-cache"), setTimeout(() => {
            window.location.reload();
          }, 2e3);
        else {
          const n = t?.message || "Failed to change language";
          this.showNotification(n, "error");
        }
      } catch (e) {
        this.showNotification(
          `Failed to change language: ${e.message || "Unknown error"}`,
          "error"
        );
      } finally {
        this.changing = !1;
      }
    },
    async initializeLanguage() {
      this.loading = !0;
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.utilities.get_current_user_language"
        }), t = e?.message || e;
        t?.success && Object.assign(this, {
          availableLanguages: t.available_languages,
          currentLanguage: t.language_code,
          selectedLanguage: t.language_code
        });
      } catch (e) {
        console.error("Error initializing language:", e);
      } finally {
        this.loading = !1;
      }
    },
    closeLanguageDialog() {
      this.showLanguageDialog = !1, this.selectedLanguage = this.currentLanguage, this.originalWesternNumerals = this.useWesternNumerals;
    },
    showNotification(e, t = "info", n = 3e3) {
      Object.assign(this.notification, {
        show: !0,
        message: this.__(e),
        type: t,
        timeout: n
      });
    },
    hideNotification() {
      this.notification.show = !1;
    },
    __(e) {
      return window.__ ? window.__(e) : e;
    }
  },
  emits: [
    "close-shift",
    "print-last-invoice",
    "sync-invoices",
    "toggle-offline",
    "clear-cache",
    "show-about",
    "toggle-theme",
    "logout"
  ]
}, dG = { class: "menu-header-compact" }, fG = { class: "menu-header-text-compact" }, mG = { class: "menu-icon-wrapper-compact primary-icon" }, hG = { class: "menu-content-compact" }, _G = { class: "menu-icon-wrapper-compact secondary-icon" }, pG = { class: "menu-content-compact" }, vG = { class: "menu-icon-wrapper-compact info-icon" }, gG = { class: "menu-content-compact" }, yG = { class: "menu-icon-wrapper-compact warning-icon" }, bG = { class: "menu-content-compact" }, wG = { class: "menu-icon-wrapper-compact neutral-icon" }, kG = { class: "menu-content-compact" }, SG = { class: "menu-icon-wrapper-compact neutral-icon" }, CG = { class: "menu-content-compact" }, AG = { class: "menu-icon-wrapper-compact primary-icon" }, xG = { class: "menu-content-compact" }, TG = { class: "menu-icon-wrapper-compact info-icon" }, IG = { class: "menu-content-compact" }, EG = { class: "menu-icon-wrapper-compact danger-icon" }, PG = { class: "menu-content-compact" }, OG = { class: "text-body-2 mb-3" };
function DG(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-btn"), s = Q("v-list-item-title"), d = Q("v-list-item-subtitle"), u = Q("v-list-item"), f = Q("v-divider"), h = Q("v-list"), g = Q("v-card"), v = Q("v-menu"), w = Q("v-card-title"), b = Q("v-select"), p = Q("v-switch"), y = Q("v-alert"), S = Q("v-card-text"), E = Q("v-spacer"), C = Q("v-card-actions"), D = Q("v-dialog"), P = Q("v-snackbar");
  return ee(), Oe(Qe, null, [
    _(v, {
      "min-width": 240,
      "close-on-content-click": !0,
      location: "bottom end",
      offset: [0, 4]
    }, {
      activator: x(({ props: O }) => [
        _(l, He(O, {
          color: "primary",
          variant: "elevated",
          class: "menu-btn-compact"
        }), {
          default: x(() => [
            ae(q(i.__("Menu")) + " ", 1),
            _(o, {
              end: "",
              size: "16",
              class: "ml-1"
            }, {
              default: x(() => t[13] || (t[13] = [
                ae("mdi-menu-down")
              ])),
              _: 1,
              __: [13]
            })
          ]),
          _: 2
        }, 1040)
      ]),
      default: x(() => [
        _(g, {
          class: "menu-card-compact",
          elevation: "12"
        }, {
          default: x(() => [
            I("div", dG, [
              _(o, {
                color: "primary",
                size: "20"
              }, {
                default: x(() => t[14] || (t[14] = [
                  ae("mdi-menu")
                ])),
                _: 1,
                __: [14]
              }),
              I("span", fG, q(i.__("Actions")), 1)
            ]),
            _(h, {
              density: "compact",
              class: "menu-list-compact"
            }, {
              default: x(() => [
                n.posProfile.posa_hide_closing_shift ? ye("", !0) : (ee(), Re(u, {
                  key: 0,
                  onClick: t[0] || (t[0] = (O) => e.$emit("close-shift")),
                  class: "menu-item-compact primary-action"
                }, {
                  prepend: x(() => [
                    I("div", mG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[15] || (t[15] = [
                          ae("mdi-content-save-move-outline")
                        ])),
                        _: 1,
                        __: [15]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", hG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Close Shift")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("End current session")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                })),
                n.posProfile.posa_allow_print_last_invoice ? (ee(), Re(u, {
                  key: 1,
                  onClick: t[1] || (t[1] = (O) => e.$emit("print-last-invoice")),
                  disabled: !n.lastInvoiceId,
                  class: "menu-item-compact secondary-action"
                }, {
                  prepend: x(() => [
                    I("div", _G, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[16] || (t[16] = [
                          ae("mdi-printer")
                        ])),
                        _: 1,
                        __: [16]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", pG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Print Last Invoice")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Reprint previous transaction")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }, 8, ["disabled"])) : ye("", !0),
                _(u, {
                  onClick: t[2] || (t[2] = (O) => e.$emit("sync-invoices")),
                  class: "menu-item-compact info-action"
                }, {
                  prepend: x(() => [
                    I("div", vG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[17] || (t[17] = [
                          ae("mdi-sync")
                        ])),
                        _: 1,
                        __: [17]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", gG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Sync Offline Invoices")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Upload pending transactions")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[3] || (t[3] = (O) => e.$emit("toggle-offline")),
                  class: "menu-item-compact warning-action"
                }, {
                  prepend: x(() => [
                    I("div", yG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[18] || (t[18] = [
                          ae("mdi-wifi-off")
                        ])),
                        _: 1,
                        __: [18]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", bG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(n.manualOffline ? i.__("Go Online") : i.__("Go Offline")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(n.manualOffline ? i.__("Disable offline mode") : i.__("Work without server connection")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[4] || (t[4] = (O) => e.$emit("clear-cache")),
                  disabled: n.manualOffline || !n.networkOnline || !n.serverOnline,
                  class: "menu-item-compact neutral-action"
                }, {
                  prepend: x(() => [
                    I("div", wG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[19] || (t[19] = [
                          ae("mdi-delete-sweep-outline")
                        ])),
                        _: 1,
                        __: [19]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", kG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Clear Cache")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Remove local data and refresh")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }, 8, ["disabled"]),
                _(f, { class: "menu-section-divider-compact" }),
                _(u, {
                  onClick: t[5] || (t[5] = (O) => e.$emit("show-about")),
                  class: "menu-item-compact neutral-action"
                }, {
                  prepend: x(() => [
                    I("div", SG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[20] || (t[20] = [
                          ae("mdi-information-outline")
                        ])),
                        _: 1,
                        __: [20]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", CG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("About")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("App information")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[6] || (t[6] = (O) => r.showLanguageDialog = !0),
                  class: "menu-item-compact primary-action"
                }, {
                  prepend: x(() => [
                    I("div", AG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[21] || (t[21] = [
                          ae("mdi-translate")
                        ])),
                        _: 1,
                        __: [21]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", xG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Language")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Change interface language")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[7] || (t[7] = (O) => e.$emit("toggle-theme")),
                  class: "menu-item-compact info-action"
                }, {
                  prepend: x(() => [
                    I("div", TG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => [
                          ae(q(n.isDark ? "mdi-white-balance-sunny" : "mdi-moon-waning-crescent"), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", IG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(n.isDark ? i.__("Light Mode") : i.__("Dark Mode")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Switch theme appearance")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[8] || (t[8] = (O) => e.$emit("logout")),
                  class: "menu-item-compact danger-action"
                }, {
                  prepend: x(() => [
                    I("div", EG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[22] || (t[22] = [
                          ae("mdi-logout")
                        ])),
                        _: 1,
                        __: [22]
                      })
                    ])
                  ]),
                  default: x(() => [
                    I("div", PG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Logout")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(q(i.__("Sign out of session")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    _(D, {
      modelValue: r.showLanguageDialog,
      "onUpdate:modelValue": t[11] || (t[11] = (O) => r.showLanguageDialog = O),
      "max-width": "400",
      persistent: ""
    }, {
      default: x(() => [
        _(g, null, {
          default: x(() => [
            _(w, { class: "text-h6 d-flex align-center" }, {
              default: x(() => [
                _(o, {
                  start: "",
                  color: "primary",
                  class: "mr-2"
                }, {
                  default: x(() => t[23] || (t[23] = [
                    ae("mdi-translate")
                  ])),
                  _: 1,
                  __: [23]
                }),
                ae(" " + q(i.__("Select Language")), 1)
              ]),
              _: 1
            }),
            _(S, null, {
              default: x(() => [
                I("div", OG, q(i.__("Choose your preferred language for the POS interface")), 1),
                _(b, {
                  modelValue: r.selectedLanguage,
                  "onUpdate:modelValue": t[9] || (t[9] = (O) => r.selectedLanguage = O),
                  items: r.availableLanguages,
                  "item-title": "name",
                  "item-value": "code",
                  label: i.__("Language"),
                  variant: "outlined",
                  density: "compact",
                  loading: r.loading,
                  disabled: r.loading
                }, {
                  item: x(({ item: O, props: T }) => [
                    _(u, Jn(Ca(T)), {
                      prepend: x(() => [
                        _(o, {
                          color: O.raw.code === r.currentLanguage ? "primary" : "grey"
                        }, {
                          default: x(() => [
                            ae(q(O.raw.code === r.currentLanguage ? "mdi-check-circle" : "mdi-circle-outline"), 1)
                          ]),
                          _: 2
                        }, 1032, ["color"])
                      ]),
                      default: x(() => [
                        _(s, null, {
                          default: x(() => [
                            ae(q(O.raw.name) + " (" + q(O.raw.code.toUpperCase()) + ") ", 1)
                          ]),
                          _: 2
                        }, 1024),
                        O.raw.code !== "en" ? (ee(), Re(d, { key: 0 }, {
                          default: x(() => [
                            ae(q(O.raw.native_name), 1)
                          ]),
                          _: 2
                        }, 1024)) : ye("", !0)
                      ]),
                      _: 2
                    }, 1040)
                  ]),
                  _: 1
                }, 8, ["modelValue", "items", "label", "loading", "disabled"]),
                _(p, {
                  modelValue: r.useWesternNumerals,
                  "onUpdate:modelValue": [
                    t[10] || (t[10] = (O) => r.useWesternNumerals = O),
                    i.saveWesternPreference
                  ],
                  class: "mt-3",
                  density: "compact",
                  inset: "",
                  label: i.__("Use Western numerals")
                }, null, 8, ["modelValue", "label", "onUpdate:modelValue"]),
                r.selectedLanguage !== r.currentLanguage ? (ee(), Re(y, {
                  key: 0,
                  type: "info",
                  variant: "tonal",
                  density: "compact",
                  class: "mt-3"
                }, {
                  default: x(() => [
                    ae(q(i.__("Language will be changed to")) + ": ", 1),
                    I("strong", null, q(i.selectedLanguageName), 1)
                  ]),
                  _: 1
                })) : ye("", !0)
              ]),
              _: 1
            }),
            _(C, { class: "pa-4 pt-0" }, {
              default: x(() => [
                _(E),
                _(l, {
                  color: "grey",
                  variant: "text",
                  onClick: i.closeLanguageDialog,
                  disabled: r.changing
                }, {
                  default: x(() => [
                    ae(q(i.__("Cancel")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "disabled"]),
                _(l, {
                  color: "primary",
                  loading: r.changing,
                  disabled: !i.canChangeLanguage,
                  onClick: i.changeLanguage
                }, {
                  default: x(() => [
                    ae(q(i.__("Change Language")), 1)
                  ]),
                  _: 1
                }, 8, ["loading", "disabled", "onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    _(P, {
      modelValue: r.notification.show,
      "onUpdate:modelValue": t[12] || (t[12] = (O) => r.notification.show = O),
      timeout: r.notification.timeout,
      color: r.notification.type,
      location: "top right"
    }, {
      actions: x(() => [
        _(l, {
          color: "white",
          variant: "text",
          onClick: i.hideNotification
        }, {
          default: x(() => [
            ae(q(i.__("Close")), 1)
          ]),
          _: 1
        }, 8, ["onClick"])
      ]),
      default: x(() => [
        ae(q(r.notification.message) + " ", 1)
      ]),
      _: 1
    }, 8, ["modelValue", "timeout", "color"])
  ], 64);
}
const BG = /* @__PURE__ */ nn(uG, [["render", DG], ["__scopeId", "data-v-1b76f713"]]), VG = {
  name: "StatusIndicator",
  props: {
    networkOnline: Boolean,
    serverOnline: Boolean,
    serverConnecting: Boolean,
    isIpHost: Boolean,
    syncTotals: Object,
    cacheReady: Boolean
  },
  computed: {
    /**
     * Determines the color of the status icon based on current network and server connectivity.
     * @returns {string} A Vuetify color string ('green', 'red').
     */
    statusColor() {
      return this.serverConnecting ? "orange" : this.isIpHost ? this.networkOnline ? "green" : "red" : this.networkOnline && this.serverOnline ? "green" : this.networkOnline && !this.serverOnline ? "orange" : "red";
    },
    /**
     * Determines the Material Design Icon to display based on network and server status.
     * @returns {string} A Material Design Icon class string.
     */
    statusIcon() {
      return this.serverConnecting ? "mdi-wifi-sync" : this.isIpHost ? this.networkOnline ? "mdi-wifi" : "mdi-wifi-off" : this.networkOnline && this.serverOnline ? "mdi-wifi" : this.networkOnline && !this.serverOnline ? "mdi-wifi-strength-alert-outline" : "mdi-wifi-off";
    },
    /**
     * Provides a descriptive text for the tooltip that appears when hovering over the status icon.
     * This text is also used for the `title` attribute of the button.
     * @returns {string} A localized status message.
     */
    statusText() {
      const e = window.location.hostname, t = this.isIpHost ? "Local/IP Host" : "Domain Host";
      return this.serverConnecting ? this.__(`Connecting to server... (${t}: ${e})`) : this.networkOnline ? this.isIpHost ? this.__(`Connected to ${e}`) : this.serverOnline ? this.__(`Connected to Server (${e})`) : this.__(`Server Offline (${e})`) : this.__(`No Internet Connection (${t}: ${e})`);
    },
    /**
     * Returns a short string summarizing the last offline invoice sync results.
     */
    syncInfoText() {
      const { pending: e, synced: t, drafted: n } = this.syncTotals;
      if (!this.cacheReady)
        return this.__("Loading cache...");
      const a = e || 0, r = t || 0, i = n || 0;
      return this.networkOnline ? `To Sync: ${a} | Synced: ${r} | Draft: ${i}` : a > 0 || r > 0 || i > 0 ? `Pending: ${a} | Synced: ${r} | Draft: ${i}` : "Offline Mode";
    }
  }
}, MG = { class: "status-section-enhanced mx-1" }, RG = { class: "status-info-always-visible" }, LG = { class: "status-detail-inline" };
function FG(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-btn");
  return ee(), Oe("div", MG, [
    _(l, {
      icon: "",
      title: i.statusText,
      class: "status-btn-enhanced",
      color: i.statusColor
    }, {
      default: x(() => [
        _(o, { color: i.statusColor }, {
          default: x(() => [
            ae(q(i.statusIcon), 1)
          ]),
          _: 1
        }, 8, ["color"])
      ]),
      _: 1
    }, 8, ["title", "color"]),
    I("div", RG, [
      I("div", {
        class: Ie(["status-title-inline", {
          "status-connected": i.statusColor === "green",
          "status-offline": i.statusColor === "red"
        }])
      }, q(i.statusText), 3),
      I("div", LG, q(i.syncInfoText), 1)
    ])
  ]);
}
const NG = /* @__PURE__ */ nn(VG, [["render", FG], ["__scopeId", "data-v-d7d26c06"]]), UG = {
  name: "CacheUsageMeter",
  props: {
    cacheUsage: {
      type: Number,
      default: 0
    },
    cacheUsageLoading: {
      type: Boolean,
      default: !1
    },
    cacheUsageDetails: {
      type: Object,
      default: () => ({
        total: 0,
        indexedDB: 0,
        localStorage: 0
      })
    }
  },
  computed: {
    cacheUsageColor() {
      return this.cacheUsage < 50 ? "success" : this.cacheUsage < 80 ? "warning" : "error";
    },
    cacheBarGradient() {
      return this.cacheUsage < 50 ? "linear-gradient(90deg, #43e97b 0%, #38f9d7 100%)" : this.cacheUsage < 80 ? "linear-gradient(90deg, #f7971e 0%, #ffd200 100%)" : "linear-gradient(90deg, #f953c6 0%, #b91d73 100%)";
    }
  },
  methods: {
    refreshCacheUsage() {
      this.$emit("refresh");
    },
    formatBytes(e) {
      if (e === 0) return "0 Bytes";
      const t = 1024, n = ["Bytes", "KB", "MB", "GB"], a = Math.floor(Math.log(e) / Math.log(t));
      return parseFloat((e / Math.pow(t, a)).toFixed(2)) + " " + n[a];
    }
  }
}, $G = { class: "cache-usage-section mx-1" }, qG = { class: "cache-tooltip-content" }, HG = { class: "cache-tooltip-title" }, zG = { class: "cache-tooltip-section-title mb-1" }, WG = { class: "cache-tooltip-bar mb-2" }, jG = { class: "cache-bar-bg" }, KG = { class: "cache-bar-label-inside" }, YG = { key: 0 }, GG = { class: "cache-tooltip-section-title mb-1" }, QG = { class: "cache-tooltip-detail" }, JG = { class: "cache-tooltip-detail" }, XG = { class: "cache-tooltip-detail" }, ZG = {
  key: 1,
  class: "cache-tooltip-detail"
}, e9 = {
  key: 2,
  class: "cache-tooltip-warning"
}, t9 = { class: "cache-tooltip-tip mt-2" }, n9 = { class: "cache-tooltip-explanation mt-2" }, a9 = { class: "cache-tooltip-action mt-2" };
function r9(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-progress-circular"), s = Q("v-divider"), d = Q("v-tooltip");
  return ee(), Oe("div", $G, [
    _(d, { location: "bottom" }, {
      activator: x(({ props: u }) => [
        I("div", He(u, {
          class: "cache-meter-container",
          onClick: t[0] || (t[0] = (...f) => i.refreshCacheUsage && i.refreshCacheUsage(...f))
        }), [
          _(l, {
            "model-value": n.cacheUsage,
            color: i.cacheUsageColor,
            size: 32,
            width: 3,
            class: "cache-meter"
          }, {
            default: x(() => [
              _(o, {
                size: "16",
                color: "info"
              }, {
                default: x(() => t[1] || (t[1] = [
                  ae("mdi-database-clock")
                ])),
                _: 1,
                __: [1]
              })
            ]),
            _: 1
          }, 8, ["model-value", "color"])
        ], 16)
      ]),
      default: x(() => [
        I("div", qG, [
          I("div", HG, [
            _(o, {
              size: "14",
              color: "info",
              class: "mr-1"
            }, {
              default: x(() => t[2] || (t[2] = [
                ae("mdi-database-clock")
              ])),
              _: 1,
              __: [2]
            }),
            ae(" " + q(e.__("Cache Usage")), 1)
          ]),
          _(s, { class: "my-2" }),
          I("div", zG, q(e.__("Usage")), 1),
          I("div", WG, [
            I("div", jG, [
              I("div", {
                class: "cache-bar-fill",
                style: Xe({ width: n.cacheUsage + "%", background: i.cacheBarGradient })
              }, [
                I("span", KG, q(n.cacheUsage) + "%", 1)
              ], 4),
              t[3] || (t[3] = I("span", { class: "cache-bar-max" }, "100%", -1))
            ])
          ]),
          n.cacheUsageLoading ? (ee(), Oe("div", ZG, q(e.__("Calculating...")), 1)) : (ee(), Oe("div", YG, [
            I("div", GG, q(e.__("Breakdown")), 1),
            I("div", QG, [
              _(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: x(() => t[4] || (t[4] = [
                  ae("mdi-database-clock")
                ])),
                _: 1,
                __: [4]
              }),
              ae(q(e.__("Total Size")) + ": ", 1),
              I("b", null, q(i.formatBytes(n.cacheUsageDetails.total)), 1)
            ]),
            I("div", JG, [
              _(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: x(() => t[5] || (t[5] = [
                  ae("mdi-database")
                ])),
                _: 1,
                __: [5]
              }),
              ae(q(e.__("IndexedDB")) + ": ", 1),
              I("b", null, q(i.formatBytes(n.cacheUsageDetails.indexedDB)), 1)
            ]),
            I("div", XG, [
              _(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: x(() => t[6] || (t[6] = [
                  ae("mdi-folder")
                ])),
                _: 1,
                __: [6]
              }),
              ae(q(e.__("localStorage")) + ": ", 1),
              I("b", null, q(i.formatBytes(n.cacheUsageDetails.localStorage)), 1)
            ])
          ])),
          _(s, { class: "my-2" }),
          n.cacheUsage >= 80 ? (ee(), Oe("div", e9, [
            _(o, {
              size: "14",
              color: "error",
              class: "mr-1"
            }, {
              default: x(() => t[7] || (t[7] = [
                ae("mdi-alert")
              ])),
              _: 1,
              __: [7]
            }),
            ae(" " + q(e.__("Warning: High cache usage may affect performance.")), 1)
          ])) : ye("", !0),
          I("div", t9, [
            _(o, {
              size: "14",
              color: "primary",
              class: "mr-1"
            }, {
              default: x(() => t[8] || (t[8] = [
                ae("mdi-lightbulb-on-outline")
              ])),
              _: 1,
              __: [8]
            }),
            ae(" " + q(e.__("Tip: Clear cache regularly to free up space and keep the app fast.")), 1)
          ]),
          I("div", n9, [
            _(o, {
              size: "14",
              color: "info",
              class: "mr-1"
            }, {
              default: x(() => t[9] || (t[9] = [
                ae("mdi-database-clock")
              ])),
              _: 1,
              __: [9]
            }),
            ae(" " + q(e.__("The app stores data locally for offline use. This is called cache.")), 1)
          ]),
          I("div", a9, [
            _(o, {
              size: "14",
              class: "mr-1"
            }, {
              default: x(() => t[10] || (t[10] = [
                ae("mdi-refresh")
              ])),
              _: 1,
              __: [10]
            }),
            ae(" " + q(e.__("Click to refresh")), 1)
          ])
        ])
      ]),
      _: 1
    })
  ]);
}
const i9 = /* @__PURE__ */ nn(UG, [["render", r9], ["__scopeId", "data-v-485036e0"]]), o9 = {
  name: "AboutDialog",
  props: {
    modelValue: Boolean
  },
  data() {
    return {
      dialogOpen: this.modelValue,
      loadingAppInfo: !1,
      appInfoError: !1,
      appInfo: []
    };
  },
  watch: {
    modelValue(e) {
      this.dialogOpen = e, e && this.loadAppInfo();
    },
    dialogOpen(e) {
      this.$emit("update:modelValue", e);
    }
  },
  methods: {
    close() {
      this.dialogOpen = !1;
    },
    loadAppInfo() {
      this.loadingAppInfo = !0, this.appInfoError = !1, frappe.call({
        method: "posawesome.posawesome.api.utilities.get_app_info",
        callback: (e) => {
          this.loadingAppInfo = !1, Array.isArray(e.message.apps) ? this.appInfo = e.message.apps : this.appInfoError = !0;
        },
        error: () => {
          this.loadingAppInfo = !1, this.appInfoError = !0;
        }
      });
    }
  }
}, s9 = { class: "header-content-improved" }, l9 = { class: "header-icon-wrapper-improved" }, c9 = { class: "header-text-improved" }, u9 = { class: "header-title-improved" }, d9 = { class: "header-subtitle-improved" }, f9 = {
  key: 0,
  class: "header-stats-improved"
}, m9 = { class: "content-container-improved" }, h9 = {
  key: 0,
  class: "empty-state-improved text-center"
}, _9 = { class: "text-body-2 mt-3 mb-0" }, p9 = {
  key: 1,
  class: "empty-state-improved text-center"
}, v9 = { class: "text-body-2 mb-3" }, g9 = {
  key: 2,
  class: "apps-list-improved"
}, y9 = { class: "apps-header-improved" }, b9 = { class: "text-h6 mb-2" }, w9 = { class: "apps-grid-improved" }, k9 = { class: "app-icon-improved" }, S9 = { class: "app-details-improved" }, C9 = { class: "app-name-improved" }, A9 = { class: "app-version-improved" }, x9 = { class: "footer-info-improved" }, T9 = { class: "footer-text-improved" };
function I9(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-chip"), s = Q("v-btn"), d = Q("v-card-title"), u = Q("v-progress-circular"), f = Q("v-card-text"), h = Q("v-spacer"), g = Q("v-card-actions"), v = Q("v-card"), w = Q("v-dialog");
  return ee(), Re(w, {
    modelValue: r.dialogOpen,
    "onUpdate:modelValue": t[0] || (t[0] = (b) => r.dialogOpen = b),
    "max-width": "650",
    persistent: ""
  }, {
    default: x(() => [
      _(v, { class: "about-dialog-card-improved" }, {
        default: x(() => [
          _(d, { class: "about-header-improved pa-5" }, {
            default: x(() => [
              I("div", s9, [
                I("div", l9, [
                  _(o, {
                    size: "22",
                    class: "header-icon"
                  }, {
                    default: x(() => t[1] || (t[1] = [
                      ae("mdi-information-outline")
                    ])),
                    _: 1,
                    __: [1]
                  })
                ]),
                I("div", c9, [
                  I("h3", u9, q(e.__("About")), 1),
                  I("p", d9, q(e.__("System Information")), 1)
                ]),
                !r.loadingAppInfo && !r.appInfoError ? (ee(), Oe("div", f9, [
                  _(l, {
                    size: "small",
                    color: "primary",
                    variant: "tonal",
                    class: "status-chip-improved"
                  }, {
                    default: x(() => [
                      _(o, {
                        start: "",
                        size: "14"
                      }, {
                        default: x(() => t[2] || (t[2] = [
                          ae("mdi-application-outline")
                        ])),
                        _: 1,
                        __: [2]
                      }),
                      ae(" " + q(r.appInfo.length) + " " + q(e.__("Apps")), 1)
                    ]),
                    _: 1
                  })
                ])) : ye("", !0)
              ]),
              _(s, {
                icon: "mdi-close",
                variant: "text",
                size: "default",
                onClick: i.close,
                class: "close-btn-improved"
              }, null, 8, ["onClick"])
            ]),
            _: 1
          }),
          _(f, { class: "pa-0 white-background" }, {
            default: x(() => [
              I("div", m9, [
                r.loadingAppInfo ? (ee(), Oe("div", h9, [
                  _(u, {
                    indeterminate: "",
                    color: "primary",
                    size: "50"
                  }),
                  I("p", _9, q(e.__("Loading...")), 1)
                ])) : r.appInfoError ? (ee(), Oe("div", p9, [
                  _(o, {
                    size: "50",
                    color: "error",
                    class: "mb-3"
                  }, {
                    default: x(() => t[3] || (t[3] = [
                      ae("mdi-alert-circle-outline")
                    ])),
                    _: 1,
                    __: [3]
                  }),
                  I("p", v9, q(e.__("Error Loading Data")), 1),
                  _(s, {
                    color: "primary",
                    variant: "outlined",
                    size: "default",
                    onClick: i.loadAppInfo
                  }, {
                    default: x(() => [
                      _(o, {
                        start: "",
                        size: "18"
                      }, {
                        default: x(() => t[4] || (t[4] = [
                          ae("mdi-refresh")
                        ])),
                        _: 1,
                        __: [4]
                      }),
                      ae(" " + q(e.__("Retry")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ])) : (ee(), Oe("div", g9, [
                  I("div", y9, [
                    I("h4", b9, q(e.__("Installed Applications")), 1)
                  ]),
                  I("div", w9, [
                    (ee(!0), Oe(Qe, null, rn(r.appInfo, (b) => (ee(), Oe("div", {
                      key: b.app_name,
                      class: "app-item-improved"
                    }, [
                      I("div", k9, [
                        _(o, {
                          size: "18",
                          color: "white"
                        }, {
                          default: x(() => t[5] || (t[5] = [
                            ae("mdi-application-outline")
                          ])),
                          _: 1,
                          __: [5]
                        })
                      ]),
                      I("div", S9, [
                        I("div", C9, q(b.app_name), 1),
                        I("div", A9, "v" + q(b.installed_version), 1)
                      ])
                    ]))), 128))
                  ])
                ]))
              ])
            ]),
            _: 1
          }),
          _(g, { class: "dialog-actions-improved pa-4" }, {
            default: x(() => [
              I("div", x9, [
                I("span", T9, [
                  _(o, {
                    start: "",
                    size: "16",
                    color: "error"
                  }, {
                    default: x(() => t[6] || (t[6] = [
                      ae("mdi-heart")
                    ])),
                    _: 1,
                    __: [6]
                  }),
                  ae(" " + q(e.__("Built with Frappe")), 1)
                ])
              ]),
              _(h),
              _(s, {
                color: "primary",
                onClick: i.close,
                class: "close-btn-action-improved"
              }, {
                default: x(() => [
                  ae(q(e.__("Close")), 1)
                ]),
                _: 1
              }, 8, ["onClick"])
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["modelValue"]);
}
const E9 = /* @__PURE__ */ nn(o9, [["render", I9], ["__scopeId", "data-v-2c67391c"]]), Rt = {
  // Check if current language/layout is RTL
  isRtl() {
    if (typeof frappe < "u" && frappe.utils && typeof frappe.utils.is_rtl == "function")
      return frappe.utils.is_rtl();
    if ((document.documentElement.dir || document.body.dir || "").toLowerCase() === "rtl") return !0;
    const t = document.documentElement.lang || "";
    return ["ar", "he", "fa", "ur", "ps", "sd", "ku", "dv"].some((a) => t.toLowerCase().startsWith(a));
  },
  // Determine if user prefers Western numerals even in RTL
  useWestern() {
    try {
      const e = localStorage.getItem("use_western_numerals");
      if (e !== null)
        return ["1", "true", "yes"].includes(e.toLowerCase());
    } catch {
    }
    if (typeof frappe < "u") {
      const e = frappe.boot?.use_western_numerals || frappe.boot?.pos_profile?.use_western_numerals;
      if (typeof e < "u")
        return !!e;
    }
    return !1;
  },
  // Helper to check if Arabic numerals should be used
  shouldUseArabic() {
    return this.isRtl() && !this.useWestern();
  },
  // Convert Western numerals to Arabic-Indic numerals
  toArabicNumerals(e) {
    if (!this.shouldUseArabic()) return e;
    const t = {
      0: "٠",
      1: "١",
      2: "٢",
      3: "٣",
      4: "٤",
      5: "٥",
      6: "٦",
      7: "٧",
      8: "٨",
      9: "٩"
    };
    return String(e).replace(/[0-9]/g, (n) => t[n]);
  },
  // Convert Arabic-Indic numerals back to Western numerals for parsing
  fromArabicNumerals(e) {
    const t = {
      "٠": "0",
      "١": "1",
      "٢": "2",
      "٣": "3",
      "٤": "4",
      "٥": "5",
      "٦": "6",
      "٧": "7",
      "٨": "8",
      "٩": "9"
    };
    return String(e).replace(/[٠-٩]/g, (n) => t[n]).replace(/٬/g, ",").replace(/٫/g, ".");
  },
  // Get appropriate locale for number formatting
  getNumberLocale() {
    if (this.shouldUseArabic()) {
      const e = document.documentElement.lang || "ar";
      return e.startsWith("ar") ? "ar-SA" : e.startsWith("fa") ? "fa-IR" : "ar-SA";
    }
    return "en-US";
  }
}, Oi = {
  data() {
    return {
      float_precision: 2,
      currency_precision: 2
    };
  },
  methods: {
    flt(e, t, n, a) {
      return !t && t != 0 && (t = this.currency_precision || 2), a || (a = "Banker's Rounding (legacy)"), flt(e, t, n, a);
    },
    formatCurrency(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.currency_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    },
    formatFloat(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.float_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    },
    setFormatedCurrency(e, t, n, a = !1, r) {
      let i = r && r.target ? r.target.value : r;
      typeof i == "string" && (i = Rt.fromArabicNumerals(i), i = i.replace(/,/g, ""));
      let o = parseFloat(i);
      return isNaN(o) ? o = 0 : a && o < 0 && (o = Math.abs(o)), typeof e == "object" ? e[t] = o : this[t] = o, this.formatCurrency(o, n);
    },
    setFormatedFloat(e, t, n, a = !1, r) {
      let i = r && r.target ? r.target.value : r;
      typeof i == "string" && (i = Rt.fromArabicNumerals(i), i = i.replace(/,/g, ""));
      let o = parseFloat(i);
      return isNaN(o) ? o = 0 : a && o < 0 && (o = Math.abs(o)), typeof e == "object" ? e[t] = o : this[t] = o, this.formatFloat(o, n);
    },
    currencySymbol(e) {
      return get_currency_symbol(e);
    },
    isNumber(e) {
      const t = Rt.fromArabicNumerals(String(e));
      return /^-?(\d+|\d{1,3}(\.\d{3})*)(,\d+)?$/.test(t) || "invalid number";
    },
    // Check if a value is negative for CSS class binding
    isNegative(e) {
      if (e == null) return !1;
      const t = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      return !isNaN(t) && t < 0;
    },
    // Format currency without HTML spans (for class binding approach)
    formatCurrencyPlain(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.currency_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    },
    // Format float without HTML spans (for class binding approach)
    formatFloatPlain(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.float_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    }
  },
  mounted() {
    this.float_precision = frappe.defaults.get_default("float_precision") || 2, this.currency_precision = frappe.defaults.get_default("currency_precision") || 2;
    const e = (t) => {
      const n = t.pos_profile || t, a = parseInt(n.posa_decimal_precision);
      isNaN(a) || (this.float_precision = a, this.currency_precision = a);
    };
    this.eventBus && this.eventBus.on && (this.eventBus.on("register_pos_profile", e), this.eventBus.on("payments_register_pos_profile", e));
  }
};
let _y = Promise.resolve();
function P9(e) {
  return _y = _y.then(() => e()).catch((t) => {
    console.error("DB operation failed", t);
  }), _y;
}
async function O9(e, t = 1 / 0) {
  const n = [];
  try {
    await gt.transaction("r", gt.table(e), async () => {
      let a = 0;
      await gt.table(e).each((r) => {
        if (n.push(r), a += 1, a >= t) throw ji.IterationComplete;
      });
    });
  } catch (a) {
    a !== ji.IterationComplete && console.error("Cursor read failed", a);
  }
  return n;
}
const gt = new ji("posawesome_offline");
gt.version(7).stores({
  keyval: "&key",
  queue: "&key",
  cache: "&key",
  items: "&item_code,item_name,item_group,*barcodes,*name_keywords,*serials,*batches",
  item_prices: "&[price_list+item_code],price_list,item_code",
  customers: "&name,customer_name,mobile_no,email_id,tax_id"
}).upgrade(
  (e) => e.table("items").toCollection().modify((t) => {
    t.barcodes = Array.isArray(t.item_barcode) ? t.item_barcode.map((n) => n.barcode).filter(Boolean) : t.item_barcode ? [String(t.item_barcode)] : [], t.name_keywords = t.item_name ? t.item_name.toLowerCase().split(/\s+/).filter(Boolean) : [], t.serials = Array.isArray(t.serial_no_data) ? t.serial_no_data.map((n) => n.serial_no).filter(Boolean) : [], t.batches = Array.isArray(t.batch_no_data) ? t.batch_no_data.map((n) => n.batch_no).filter(Boolean) : [];
  })
);
const D9 = {
  offline_invoices: "queue",
  offline_customers: "queue",
  offline_payments: "queue",
  item_details_cache: "cache",
  customer_storage: "cache"
}, B9 = /* @__PURE__ */ new Set(["items", "item_details_cache", "local_stock_cache"]);
function z_(e) {
  return D9[e] || "keyval";
}
function V9(e) {
  if (!e) return !1;
  const t = e.message ? e.message.toLowerCase() : "";
  return ["VersionError", "InvalidStateError", "NotFoundError"].includes(e.name) || t.includes("corrupt");
}
async function ea() {
  try {
    return await gt.table(z_("health_check")).get("health_check"), !0;
  } catch (e) {
    console.error("IndexedDB health check failed", e);
    try {
      return gt.isOpen() && await gt.close(), console.log("Attempting to reopen IndexedDB without deleting"), await gt.open(), console.log("IndexedDB reopened successfully"), !0;
    } catch (t) {
      if (console.error("Failed to reopen IndexedDB", t), V9(t)) {
        console.log("IndexedDB appears corrupted. Recreating database...");
        try {
          return await ji.delete("posawesome_offline"), await gt.open(), console.log("IndexedDB recreated and opened successfully"), !0;
        } catch (n) {
          console.error("Failed to recreate IndexedDB", n);
        }
      }
      return !1;
    }
  }
}
let Qo = null;
function n1() {
  if (!(Qo || typeof Worker > "u"))
    try {
      const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
      try {
        Qo = new Worker(e, { type: "classic" });
      } catch {
        Qo = new Worker(e, { type: "module" });
      }
    } catch (e) {
      console.error("Failed to init persist worker", e), Qo = null;
    }
}
function GO() {
  if (Qo) {
    try {
      Qo.terminate();
    } catch (e) {
      console.error("Failed to terminate persist worker", e);
    }
    Qo = null;
  }
}
n1();
const a_ = {};
let Kb = null;
function Qie(e, t) {
  a_[e] = t, Kb || (Kb = setTimeout(M9, 100));
}
function M9() {
  const e = Object.keys(a_);
  e.length && e.forEach((t) => {
    Tt(t, a_[t]), delete a_[t];
  }), Kb = null;
}
function Tt(e, t) {
  if (ea().catch(() => {
  }), Qo) {
    let a = t;
    try {
      a = typeof structuredClone == "function" ? structuredClone(t) : JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize", e, r);
    }
    try {
      Qo.postMessage({ type: "persist", key: e, value: a });
    } catch (r) {
      console.error(`Failed to postMessage for ${e}`, r);
    }
    return;
  }
  const n = z_(e);
  if (P9(
    () => gt.table(n).put({ key: e, value: t }).catch((a) => console.error(`Failed to persist ${e}`, a))
  ), typeof localStorage < "u" && e !== "price_list_cache" && !B9.has(e))
    try {
      localStorage.setItem(`posa_${e}`, JSON.stringify(t));
    } catch (a) {
      console.error("Failed to persist", e, "to localStorage", a);
    }
}
const sm = new Promise((e) => {
  const t = async () => {
    try {
      await gt.open(), e();
    } catch (n) {
      console.error("Failed to initialize offline DB", n), e();
    }
  };
  typeof requestIdleCallback == "function" ? requestIdleCallback(t) : setTimeout(t, 0);
});
function Mh(e, t) {
  try {
    const n = Ae.uom_cache;
    let a;
    try {
      a = JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize UOMs", r), a = [];
    }
    n[e] = a, Ae.uom_cache = n, Tt("uom_cache", Ae.uom_cache);
  } catch (n) {
    console.error("Failed to cache UOMs", n);
  }
}
function vA(e) {
  try {
    return (Ae.uom_cache || {})[e] || [];
  } catch {
    return [];
  }
}
function R9(e) {
  try {
    Ae.offers_cache = e, Tt("offers_cache", Ae.offers_cache);
  } catch (t) {
    console.error("Failed to cache offers", t);
  }
}
function gA() {
  try {
    return Ae.offers_cache || [];
  } catch {
    return [];
  }
}
async function L9(e, t) {
  try {
    if (!e) return;
    await ea(), gt.isOpen() || await gt.open();
    const n = t.map((a) => ({
      price_list: e,
      item_code: a.item_code,
      rate: a.rate,
      price_list_rate: a.price_list_rate || a.rate,
      timestamp: Date.now()
    }));
    await gt.table("item_prices").bulkPut(n);
  } catch (n) {
    console.error("Failed to save price list items", n);
  }
}
async function QO(e, t = 24 * 60 * 60 * 1e3) {
  try {
    if (!e) return null;
    await ea(), gt.isOpen() || await gt.open();
    const n = Date.now(), a = await gt.table("item_prices").where("price_list").equals(e).toArray();
    if (!a.length) return null;
    const r = a.filter((d) => n - d.timestamp < t);
    if (!r.length) return null;
    const i = r.map((d) => d.item_code), o = await gt.table("items").where("item_code").anyOf(i).toArray(), l = new Map(o.map((d) => [d.item_code, d]));
    return r.map((d) => {
      const u = l.get(d.item_code);
      return u ? {
        ...u,
        rate: d.rate,
        price_list_rate: d.price_list_rate || d.rate
      } : null;
    }).filter(Boolean);
  } catch (n) {
    return console.error("Failed to get cached price list items", n), null;
  }
}
async function Lu(e = null) {
  try {
    await ea(), gt.isOpen() || await gt.open(), e ? await gt.table("item_prices").where("price_list").equals(e).delete() : await gt.table("item_prices").clear();
  } catch (t) {
    console.error("Failed to clear price list cache", t);
  }
}
function yA(e, t, n) {
  try {
    const a = Ae.item_details_cache || {}, r = a[e] || {}, i = r[t] || {};
    let o;
    try {
      o = n.map((l) => ({
        item_code: l.item_code,
        actual_qty: l.actual_qty,
        has_batch_no: l.has_batch_no,
        has_serial_no: l.has_serial_no,
        item_uoms: l.item_uoms,
        batch_no_data: l.batch_no_data,
        serial_no_data: l.serial_no_data,
        rate: l.rate,
        price_list_rate: l.price_list_rate,
        currency: l.currency
      })), o = JSON.parse(JSON.stringify(o));
    } catch (l) {
      console.error("Failed to serialize item details", l), o = [];
    }
    o.forEach((l) => {
      i[l.item_code] = {
        data: l,
        timestamp: Date.now()
      };
    }), r[t] = i, a[e] = r, Ae.item_details_cache = a, Tt("item_details_cache", Ae.item_details_cache);
  } catch (a) {
    console.error("Failed to cache item details", a);
  }
}
async function bA(e, t, n, a = 15 * 60 * 1e3) {
  try {
    const i = (Ae.item_details_cache || {})[e]?.[t] || {}, o = Date.now(), l = [], s = [];
    if (n.forEach((d) => {
      const u = i[d];
      u && o - u.timestamp < a ? l.push(u.data) : s.push(d);
    }), l.length) {
      await ea(), gt.isOpen() || await gt.open();
      const d = await gt.table("items").where("item_code").anyOf(l.map((f) => f.item_code)).toArray(), u = new Map(d.map((f) => [f.item_code, f]));
      l.forEach((f, h) => {
        const g = u.get(f.item_code) || {};
        l[h] = { ...g, ...f };
      });
    }
    return { cached: l, missing: s };
  } catch (r) {
    return console.error("Failed to get cached item details", r), { cached: [], missing: n };
  }
}
async function Ud(e) {
  try {
    await ea(), gt.isOpen() || await gt.open();
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (a) {
      console.error("Failed to serialize items", a), t = [];
    }
    t = t.map((a) => ({
      ...a,
      barcodes: Array.isArray(a.item_barcode) ? a.item_barcode.map((r) => r.barcode).filter(Boolean) : a.item_barcode ? [String(a.item_barcode)] : [],
      name_keywords: a.item_name ? a.item_name.toLowerCase().split(/\s+/).filter(Boolean) : [],
      serials: Array.isArray(a.serial_no_data) ? a.serial_no_data.map((r) => r.serial_no).filter(Boolean) : [],
      batches: Array.isArray(a.batch_no_data) ? a.batch_no_data.map((r) => r.batch_no).filter(Boolean) : []
    }));
    const n = 1e3;
    await gt.transaction("rw", gt.table("items"), async () => {
      for (let a = 0; a < t.length; a += n) {
        const r = t.slice(a, a + n);
        await gt.table("items").bulkPut(r);
      }
    });
  } catch (t) {
    console.error("Failed to save items", t);
  }
}
async function Jie() {
  try {
    return await ea(), gt.isOpen() || await gt.open(), await gt.table("items").toArray();
  } catch (e) {
    return console.error("Failed to read stored items", e), [];
  }
}
async function F9({ search: e = "", itemGroup: t = "", limit: n = 100, offset: a = 0 } = {}) {
  try {
    await ea(), gt.isOpen() || await gt.open();
    const r = e.toLowerCase();
    if (r) {
      let l = gt.table("items").where("item_code").startsWithIgnoreCase(r).or("item_name").startsWithIgnoreCase(r).or("barcodes").equalsIgnoreCase(r).or("name_keywords").startsWithIgnoreCase(r).or("serials").equalsIgnoreCase(r).or("batches").equalsIgnoreCase(r);
      if (t && t.toLowerCase() !== "all") {
        const f = t.toLowerCase();
        l = l.and((h) => h.item_group && h.item_group.toLowerCase() === f);
      }
      let s = await l.toArray();
      if (!s.length) {
        let f = gt.table("items");
        t && t.toLowerCase() !== "all" && (f = f.where("item_group").equalsIgnoreCase(t)), s = await f.filter((h) => {
          const g = h.item_name && h.item_name.toLowerCase().includes(r), v = h.item_code && h.item_code.toLowerCase().includes(r), w = Array.isArray(h.item_barcode) ? h.item_barcode.some((y) => y.barcode && y.barcode.toLowerCase() === r) : h.item_barcode && String(h.item_barcode).toLowerCase().includes(r), b = Array.isArray(h.serial_no_data) ? h.serial_no_data.some((y) => y.serial_no && y.serial_no.toLowerCase() === r) : Array.isArray(h.serials) ? h.serials.some((y) => y && y.toLowerCase() === r) : !1, p = Array.isArray(h.batch_no_data) ? h.batch_no_data.some((y) => y.batch_no && y.batch_no.toLowerCase() === r) : Array.isArray(h.batches) ? h.batches.some((y) => y && y.toLowerCase() === r) : !1;
          return g || v || w || b || p;
        }).toArray();
      }
      const d = /* @__PURE__ */ new Map();
      return s.forEach((f) => {
        d.has(f.item_code) || d.set(f.item_code, f);
      }), Array.from(d.values()).slice(a, a + n);
    }
    let i = gt.table("items");
    if (t && t.toLowerCase() !== "all" && (i = i.where("item_group").equalsIgnoreCase(t)), e) {
      const l = e.toLowerCase();
      i = i.filter((s) => {
        const d = s.item_name && s.item_name.toLowerCase().includes(l), u = s.item_code && s.item_code.toLowerCase().includes(l), f = Array.isArray(s.item_barcode) ? s.item_barcode.some((v) => v.barcode && v.barcode.toLowerCase() === l) : s.item_barcode && String(s.item_barcode).toLowerCase().includes(l), h = Array.isArray(s.serial_no_data) ? s.serial_no_data.some((v) => v.serial_no && v.serial_no.toLowerCase() === l) : Array.isArray(s.serials) ? s.serials.some((v) => v && v.toLowerCase() === l) : !1, g = Array.isArray(s.batch_no_data) ? s.batch_no_data.some((v) => v.batch_no && v.batch_no.toLowerCase() === l) : Array.isArray(s.batches) ? s.batches.some((v) => v && v.toLowerCase() === l) : !1;
        return d || u || f || h || g;
      });
    }
    return await i.offset(a).limit(n).toArray();
  } catch (r) {
    return console.error("Failed to query stored items", r), [];
  }
}
const $i = 1, Js = 1e3, Ae = {
  offline_invoices: [],
  offline_customers: [],
  offline_payments: [],
  pos_last_sync_totals: { pending: 0, synced: 0, drafted: 0 },
  uom_cache: {},
  offers_cache: [],
  customer_balance_cache: {},
  local_stock_cache: {},
  stock_cache_ready: !1,
  customer_storage: [],
  pos_opening_storage: null,
  opening_dialog_storage: null,
  sales_persons_storage: [],
  item_details_cache: {},
  tax_template_cache: {},
  translation_cache: {},
  coupons_cache: {},
  item_groups_cache: [],
  items_last_sync: null,
  customers_last_sync: null,
  // Track the current cache schema version
  cache_version: $i,
  cache_ready: !1,
  tax_inclusive: !1,
  manual_offline: !1,
  print_template: "",
  terms_and_conditions: ""
}, _u = (async () => {
  try {
    await ea();
    for (const n of Object.keys(Ae)) {
      const a = await gt.table(z_(n)).get(n);
      if (a && a.value !== void 0) {
        Ae[n] = a.value;
        continue;
      }
      if (typeof localStorage < "u") {
        const r = localStorage.getItem(`posa_${n}`);
        if (r)
          try {
            Ae[n] = JSON.parse(r);
            continue;
          } catch (i) {
            console.error("Failed to parse localStorage for", n, i);
          }
      }
    }
    const e = await gt.table(z_("cache_version")).get("cache_version");
    let t = e ? e.value : null;
    if (!t && typeof localStorage < "u") {
      const n = localStorage.getItem("posa_cache_version");
      n && (t = parseInt(n, 10));
    }
    t !== $i ? (await W_(), Ae.cache_version = $i, typeof localStorage < "u" && localStorage.setItem("posa_cache_version", $i), Tt("cache_version", $i)) : Ae.cache_version = t || $i, Ae.cache_ready = !0, Tt("cache_ready", !0);
  } catch (e) {
    console.error("Failed to initialize memory from DB", e);
  }
})();
function N9() {
  Ae.offline_invoices = [], Ae.offline_customers = [], Ae.offline_payments = [], Ae.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Tt("offline_invoices", Ae.offline_invoices), Tt("offline_customers", Ae.offline_customers), Tt("offline_payments", Ae.offline_payments), Tt("pos_last_sync_totals", Ae.pos_last_sync_totals);
}
function U9() {
  Lu(), Ae.item_details_cache = {}, Ae.uom_cache = {}, Ae.offers_cache = [], Ae.customer_balance_cache = {}, Ae.local_stock_cache = {}, Ae.stock_cache_ready = !1, Ae.coupons_cache = {}, Ae.item_groups_cache = [], Tt("item_details_cache", Ae.item_details_cache), Tt("uom_cache", Ae.uom_cache), Tt("offers_cache", Ae.offers_cache), Tt("customer_balance_cache", Ae.customer_balance_cache), Tt("local_stock_cache", Ae.local_stock_cache), Tt("stock_cache_ready", Ae.stock_cache_ready), Tt("coupons_cache", Ae.coupons_cache), Tt("item_groups_cache", Ae.item_groups_cache);
}
async function Xie() {
  try {
    return await ea(), gt.isOpen() || await gt.open(), await gt.table("items").toArray();
  } catch (e) {
    return console.error("Failed to get stored items", e), [];
  }
}
async function wA() {
  try {
    return await ea(), gt.isOpen() || await gt.open(), await gt.table("items").count();
  } catch (e) {
    return console.error("Failed to count stored items", e), 0;
  }
}
async function $9(e) {
  try {
    await ea(), gt.isOpen() || await gt.open();
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize items", n), t = [];
    }
    await gt.table("items").bulkPut(t);
  } catch (t) {
    console.error("Failed to save items", t);
  }
}
async function Rh() {
  try {
    await ea(), gt.isOpen() || await gt.open(), await gt.table("items").clear();
  } catch (e) {
    console.error("Failed to clear stored items", e);
  }
}
async function JO(e = 1 / 0, t = 0) {
  try {
    return await ea(), gt.isOpen() || await gt.open(), await gt.table("customers").offset(t).limit(e).toArray();
  } catch (n) {
    return console.error("Failed to get customers from storage", n), [];
  }
}
async function Lh(e) {
  try {
    await ea(), gt.isOpen() || await gt.open();
    const t = e.map((a) => ({
      name: a.name,
      customer_name: a.customer_name,
      mobile_no: a.mobile_no,
      email_id: a.email_id,
      primary_address: a.primary_address,
      tax_id: a.tax_id
    })), n = 1e3;
    await gt.transaction("rw", gt.table("customers"), async () => {
      for (let a = 0; a < t.length; a += n) {
        const r = t.slice(a, a + n);
        await gt.table("customers").bulkPut(r);
      }
    });
  } catch (t) {
    console.error("Failed to set customer storage", t);
  }
}
async function kA() {
  try {
    return await ea(), gt.isOpen() || await gt.open(), await gt.table("customers").count();
  } catch (e) {
    return console.error("Failed to count customers", e), 0;
  }
}
async function q9() {
  try {
    await ea(), gt.isOpen() || await gt.open(), await gt.table("customers").clear();
  } catch (e) {
    console.error("Failed to clear customer storage", e);
  }
}
function H9() {
  return Ae.items_last_sync || null;
}
function SA(e) {
  Ae.items_last_sync = e, Tt("items_last_sync", Ae.items_last_sync);
}
function py() {
  return Ae.customers_last_sync || null;
}
function Fh(e) {
  Ae.customers_last_sync = e, Tt("customers_last_sync", Ae.customers_last_sync);
}
function CA() {
  return Ae.sales_persons_storage || [];
}
function z9(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize sales persons", n), t = [];
    }
    Ae.sales_persons_storage = t, Tt("sales_persons_storage", Ae.sales_persons_storage);
  } catch (t) {
    console.error("Failed to set sales persons storage", t);
  }
}
function Fu() {
  return Ae.pos_opening_storage || null;
}
function a1(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize opening storage", n), t = {};
    }
    Ae.pos_opening_storage = t, Tt("pos_opening_storage", Ae.pos_opening_storage);
  } catch (t) {
    console.error("Failed to set opening storage", t);
  }
}
function W9() {
  try {
    Ae.pos_opening_storage = null, Tt("pos_opening_storage", Ae.pos_opening_storage);
  } catch (e) {
    console.error("Failed to clear opening storage", e);
  }
}
function j9() {
  return Ae.opening_dialog_storage || null;
}
function K9(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize opening dialog", n), t = {};
    }
    Ae.opening_dialog_storage = t, Tt("opening_dialog_storage", Ae.opening_dialog_storage);
  } catch (t) {
    console.error("Failed to set opening dialog storage", t);
  }
}
function Y9(e) {
  try {
    return (Ae.tax_template_cache || {})[e] || null;
  } catch (t) {
    return console.error("Failed to get cached tax template", t), null;
  }
}
function G9(e, t) {
  try {
    const n = Ae.tax_template_cache || {};
    let a;
    try {
      a = JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize tax template", r), a = t ? { ...t } : {};
    }
    n[e] = a, Ae.tax_template_cache = n, Tt("tax_template_cache", Ae.tax_template_cache);
  } catch (n) {
    console.error("Failed to cache tax template", n);
  }
}
function Q9() {
  try {
    return Ae.print_template || "";
  } catch (e) {
    return console.error("Failed to get print template", e), "";
  }
}
function J9(e) {
  try {
    Ae.print_template = e || "", Tt("print_template", Ae.print_template);
  } catch (t) {
    console.error("Failed to set print template", t);
  }
}
function X9() {
  try {
    return Ae.terms_and_conditions || "";
  } catch (e) {
    return console.error("Failed to get terms and conditions", e), "";
  }
}
function Z9(e) {
  try {
    Ae.terms_and_conditions = e || "", Tt("terms_and_conditions", Ae.terms_and_conditions);
  } catch (t) {
    console.error("Failed to set terms and conditions", t);
  }
}
function Zie(e) {
  try {
    return (Ae.translation_cache || {})[e] || null;
  } catch (t) {
    return console.error("Failed to get cached translations", t), null;
  }
}
function eoe(e, t) {
  try {
    const n = Ae.translation_cache || {};
    n[e] = t, Ae.translation_cache = n, Tt("translation_cache", Ae.translation_cache);
  } catch (n) {
    console.error("Failed to cache translations", n);
  }
}
function vy(e) {
  Ae.pos_last_sync_totals = e, Tt("pos_last_sync_totals", Ae.pos_last_sync_totals);
}
function eQ() {
  return Ae.pos_last_sync_totals;
}
function tQ() {
  return !!Ae.tax_inclusive;
}
function toe(e) {
  Ae.tax_inclusive = !!e, Tt("tax_inclusive", Ae.tax_inclusive);
}
function nQ() {
  return !!Ae.cache_ready;
}
function Ko() {
  return Ae.manual_offline || !1;
}
function aQ(e) {
  Ae.manual_offline = !!e, Tt("manual_offline", Ae.manual_offline);
}
function rQ() {
  aQ(!Ae.manual_offline);
}
function iQ(e = Js) {
  const t = (Ae.offline_invoices || []).length > e, n = (Ae.offline_customers || []).length > e, a = (Ae.offline_payments || []).length > e;
  return t || n || a;
}
function oQ(e = Js) {
  Array.isArray(Ae.offline_invoices) && Ae.offline_invoices.length > e && (Ae.offline_invoices.splice(0, Ae.offline_invoices.length - e), Tt("offline_invoices", Ae.offline_invoices)), Array.isArray(Ae.offline_customers) && Ae.offline_customers.length > e && (Ae.offline_customers.splice(0, Ae.offline_customers.length - e), Tt("offline_customers", Ae.offline_customers)), Array.isArray(Ae.offline_payments) && Ae.offline_payments.length > e && (Ae.offline_payments.splice(0, Ae.offline_payments.length - e), Tt("offline_payments", Ae.offline_payments));
}
async function noe() {
  try {
    await ea(), GO(), gt.isOpen() && await gt.close(), await ji.delete("posawesome_offline"), await gt.open(), n1();
  } catch (e) {
    console.error("Failed to clear IndexedDB cache", e);
  }
  typeof localStorage < "u" && Object.keys(localStorage).forEach((e) => {
    e.startsWith("posa_") && localStorage.removeItem(e);
  }), Ae.offline_invoices = [], Ae.offline_customers = [], Ae.offline_payments = [], Ae.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Ae.uom_cache = {}, Ae.offers_cache = [], Ae.coupons_cache = {}, Ae.customer_balance_cache = {}, Ae.local_stock_cache = {}, Ae.stock_cache_ready = !1, Ae.customer_storage = [], Ae.items_last_sync = null, Ae.customers_last_sync = null, Ae.pos_opening_storage = null, Ae.opening_dialog_storage = null, Ae.sales_persons_storage = [], Ae.item_details_cache = {}, Ae.tax_template_cache = {}, Ae.item_groups_cache = [], Ae.cache_version = $i, Ae.tax_inclusive = !1, Ae.manual_offline = !1, await Lu(), Tt("cache_version", $i);
}
async function W_() {
  GO(), typeof localStorage < "u" && Object.keys(localStorage).forEach((e) => {
    e.startsWith("posa_") && localStorage.removeItem(e);
  }), Ae.offline_invoices = [], Ae.offline_customers = [], Ae.offline_payments = [], Ae.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Ae.uom_cache = {}, Ae.offers_cache = [], Ae.coupons_cache = {}, Ae.customer_balance_cache = {}, Ae.local_stock_cache = {}, Ae.stock_cache_ready = !1, Ae.customer_storage = [], Ae.items_last_sync = null, Ae.customers_last_sync = null, Ae.pos_opening_storage = null, Ae.opening_dialog_storage = null, Ae.sales_persons_storage = [], Ae.item_details_cache = {}, Ae.tax_template_cache = {}, Ae.item_groups_cache = [], Ae.cache_version = $i, Ae.tax_inclusive = !1, Ae.manual_offline = !1, typeof localStorage < "u" && localStorage.setItem("posa_cache_version", $i), await Lu();
  try {
    await ji.delete("posawesome_offline"), await gt.open(), n1();
  } catch (e) {
    console.error("Failed to clear IndexedDB cache", e);
  }
  Tt("cache_version", $i);
}
async function AA() {
  try {
    await ea();
    let e = 0;
    if (typeof localStorage < "u")
      for (let i = 0; i < localStorage.length; i++) {
        const o = localStorage.key(i);
        if (o && o.startsWith("posa_")) {
          const l = localStorage.getItem(o) || "";
          e += (o.length + l.length) * 2;
        }
      }
    let t = 0;
    try {
      if (gt.isOpen())
        for (const i of gt.tables) {
          const o = await O9(i.name);
          t += o.reduce((l, s) => {
            const d = JSON.stringify(s).length * 2;
            return l + d;
          }, 0);
        }
    } catch (i) {
      console.error("Failed to calculate IndexedDB size", i);
    }
    const n = e + t, a = 50 * 1024 * 1024, r = Math.min(100, Math.round(n / a * 100));
    return {
      total: n,
      localStorage: e,
      indexedDB: t,
      percentage: r
    };
  } catch (e) {
    return console.error("Failed to estimate cache usage", e), {
      total: 0,
      localStorage: 0,
      indexedDB: 0,
      percentage: 0
    };
  }
}
async function sQ(e, t) {
  try {
    const n = Ae.local_stock_cache || {}, a = Array.isArray(e) ? e.filter((i) => !n[i.item_code]) : [];
    if (a.length === 0)
      return Ae.stock_cache_ready || (Ae.stock_cache_ready = !0, Tt("stock_cache_ready", Ae.stock_cache_ready)), console.debug("Stock cache already initialized"), console.info("Stock cache initialized with", Object.keys(n).length, "items"), !0;
    console.info("Initializing stock cache for", a.length, "new items");
    const r = await cQ(a, t);
    return r && r.length > 0 ? (r.forEach((i) => {
      i.actual_qty !== void 0 && (n[i.item_code] = {
        actual_qty: i.actual_qty,
        last_updated: (/* @__PURE__ */ new Date()).toISOString()
      });
    }), Ae.local_stock_cache = n, Ae.stock_cache_ready = !0, Tt("local_stock_cache", Ae.local_stock_cache), Tt("stock_cache_ready", Ae.stock_cache_ready), console.info("Stock cache initialized with", Object.keys(n).length, "items"), !0) : !1;
  } catch (n) {
    return console.error("Failed to initialize stock cache:", n), !1;
  }
}
function lQ() {
  return Ae.stock_cache_ready || !1;
}
function aoe(e) {
  Ae.stock_cache_ready = e, Tt("stock_cache_ready", Ae.stock_cache_ready);
}
function roe(e) {
  if (Ae.pos_opening_storage?.stock_settings?.allow_negative_stock)
    return { isValid: !0, invalidItems: [], errorMessage: "" };
  const n = Ae.local_stock_cache || {}, a = [];
  e.forEach((i) => {
    const o = i.item_code, l = Math.abs(i.qty || 0), s = n[o]?.actual_qty || 0;
    s - l < 0 && a.push({
      item_code: o,
      item_name: i.item_name || o,
      requested_qty: l,
      available_qty: s
    });
  });
  let r = "";
  if (a.length === 1) {
    const i = a[0];
    r = `Not enough stock for ${i.item_name}. You need ${i.requested_qty} but only ${i.available_qty} available.`;
  } else a.length > 1 && (r = `Insufficient stock for multiple items:
` + a.map((i) => `• ${i.item_name}: Need ${i.requested_qty}, Have ${i.available_qty}`).join(`
`));
  return {
    isValid: a.length === 0,
    invalidItems: a,
    errorMessage: r
  };
}
function XO(e) {
  try {
    const t = Ae.local_stock_cache || {};
    e.forEach((n) => {
      const a = n.item_code;
      if (t[a]) {
        const r = Math.abs(n.qty || 0);
        t[a].actual_qty = Math.max(0, t[a].actual_qty - r), t[a].last_updated = (/* @__PURE__ */ new Date()).toISOString();
      }
    }), Ae.local_stock_cache = t, Tt("local_stock_cache", Ae.local_stock_cache);
  } catch (t) {
    console.error("Failed to update local stock", t);
  }
}
function xA(e) {
  try {
    return (Ae.local_stock_cache || {})[e]?.actual_qty || null;
  } catch {
    return null;
  }
}
function gy(e) {
  try {
    const t = Ae.local_stock_cache || {};
    e.forEach((n) => {
      !n || !n.item_code || n.actual_qty !== void 0 && (t[n.item_code] = {
        actual_qty: n.actual_qty,
        last_updated: (/* @__PURE__ */ new Date()).toISOString()
      });
    }), Ae.local_stock_cache = t, Tt("local_stock_cache", Ae.local_stock_cache);
  } catch (t) {
    console.error("Failed to refresh local stock cache", t);
  }
}
function ioe() {
  Ae.local_stock_cache = {}, Tt("local_stock_cache", Ae.local_stock_cache);
}
async function cQ(e, t, n = 100) {
  const a = [];
  try {
    for (let r = 0; r < e.length; r += n) {
      const i = e.slice(r, r + n), o = await new Promise((l, s) => {
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items_details",
          args: {
            pos_profile: JSON.stringify(t),
            items_data: JSON.stringify(i)
          },
          freeze: !1,
          callback: function(d) {
            d.message ? l(d.message) : s(new Error("No response from server"));
          },
          error: function(d) {
            s(d);
          }
        });
      });
      o && a.push(...o);
    }
    return a;
  } catch (r) {
    return console.error("Failed to fetch item stock quantities:", r), null;
  }
}
function ooe(e, t) {
  try {
    const n = Ae.local_stock_cache || {};
    e.forEach((a) => {
      const r = a.item_code, i = t.find((o) => o.item_code === a.item_code);
      if (i && i.actual_qty !== void 0) {
        n[r] ? (n[r].actual_qty = i.actual_qty, n[r].last_updated = (/* @__PURE__ */ new Date()).toISOString()) : n[r] = {
          actual_qty: i.actual_qty,
          last_updated: (/* @__PURE__ */ new Date()).toISOString()
        };
        const o = Math.abs(a.qty || 0);
        n[r].actual_qty = Math.max(0, n[r].actual_qty - o);
      }
    }), Ae.local_stock_cache = n, Tt("local_stock_cache", Ae.local_stock_cache);
  } catch (n) {
    console.error("Failed to update local stock with actual quantities", n);
  }
}
function uQ() {
  return Ae.local_stock_cache || {};
}
function soe(e) {
  Ae.local_stock_cache = e || {}, Tt("local_stock_cache", Ae.local_stock_cache);
}
let yy = !1;
function dQ(e) {
  if (!e.invoice || !Array.isArray(e.invoice.items) || !e.invoice.items.length)
    throw new Error("Cart is empty. Add items before saving.");
  const t = "offline_invoices", n = Ae.offline_invoices;
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline invoice", r), r;
  }
  n.push(a), n.length > Js && n.splice(0, n.length - Js), Ae.offline_invoices = n, Tt(t, Ae.offline_invoices), e.invoice && e.invoice.items && XO(e.invoice.items);
}
function cn() {
  if (typeof window > "u")
    return Ae.manual_offline || !1;
  const { protocol: e, hostname: t, navigator: n } = window, a = n.onLine, r = typeof window.serverOnline == "boolean" ? window.serverOnline : !0, l = !/^(?:\d{1,3}\.){3}\d{1,3}$/.test(t) && !(t === "localhost" || t === "127.0.0.1");
  return Ae.manual_offline ? !0 : !a || !r;
}
function ZO() {
  return Ae.offline_invoices;
}
function fQ() {
  Ae.offline_invoices = [], Tt("offline_invoices", Ae.offline_invoices);
}
function mQ(e) {
  Array.isArray(Ae.offline_invoices) && e >= 0 && e < Ae.offline_invoices.length && (Ae.offline_invoices.splice(e, 1), Tt("offline_invoices", Ae.offline_invoices));
}
function $s() {
  return Ae.offline_invoices.length;
}
function TA(e) {
  const t = "offline_payments", n = Ae.offline_payments;
  if (e?.args?.payload?.pos_profile) {
    const r = e.args.payload.pos_profile;
    e.args.payload.pos_profile = {
      posa_use_pos_awesome_payments: r.posa_use_pos_awesome_payments,
      posa_allow_make_new_payments: r.posa_allow_make_new_payments,
      posa_allow_reconcile_payments: r.posa_allow_reconcile_payments,
      posa_allow_mpesa_reconcile_payments: r.posa_allow_mpesa_reconcile_payments,
      posa_force_server_items: r.posa_force_server_items,
      cost_center: r.cost_center,
      posa_cash_mode_of_payment: r.posa_cash_mode_of_payment,
      name: r.name
    };
  }
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline payment", r), r;
  }
  n.push(a), n.length > Js && n.splice(0, n.length - Js), Ae.offline_payments = n, Tt(t, Ae.offline_payments);
}
function hQ() {
  return Ae.offline_payments;
}
function _Q() {
  Ae.offline_payments = [], Tt("offline_payments", Ae.offline_payments);
}
function loe(e) {
  Array.isArray(Ae.offline_payments) && e >= 0 && e < Ae.offline_payments.length && (Ae.offline_payments.splice(e, 1), Tt("offline_payments", Ae.offline_payments));
}
function pQ() {
  return Ae.offline_payments.length;
}
function vQ(e) {
  const t = "offline_customers", n = Ae.offline_customers;
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline customer", r), r;
  }
  n.push(a), n.length > Js && n.splice(0, n.length - Js), Ae.offline_customers = n, Tt(t, Ae.offline_customers);
}
function gQ(e, t) {
  let n = !1;
  const a = Ae.offline_invoices || [];
  a.forEach((r) => {
    r.invoice && r.invoice.customer === e && (r.invoice.customer = t, r.invoice.customer_name && (r.invoice.customer_name = t), n = !0);
  }), n && (Ae.offline_invoices = a, Tt("offline_invoices", Ae.offline_invoices));
}
function r1() {
  return Ae.offline_customers;
}
function yQ() {
  Ae.offline_customers = [], Tt("offline_customers", Ae.offline_customers);
}
async function eD() {
  if (yy)
    return { pending: $s(), synced: 0, drafted: 0 };
  yy = !0;
  try {
    await tD();
    const e = ZO();
    if (!e.length) {
      const o = { pending: 0, synced: 0, drafted: 0 };
      return vy(o), o;
    }
    if (cn())
      return { pending: e.length, synced: 0, drafted: 0 };
    const t = [];
    let n = 0, a = 0;
    for (const o of e)
      try {
        await frappe.call({
          method: "posawesome.posawesome.api.invoices.submit_invoice",
          args: {
            invoice: o.invoice,
            data: o.data
          }
        }), n++;
      } catch (l) {
        console.error("Failed to submit invoice, saving as draft", l);
        try {
          await frappe.call({
            method: "posawesome.posawesome.api.invoices.update_invoice",
            args: { data: o.invoice }
          }), a += 1;
        } catch (s) {
          console.error("Failed to save invoice as draft", s), t.push(o);
        }
      }
    n > 0 && N9();
    const r = t.length;
    r ? (Ae.offline_invoices = t, Tt("offline_invoices", Ae.offline_invoices)) : (fQ(), n > 0 && a === 0 && U9());
    const i = { pending: r, synced: n, drafted: a };
    return vy(r || a ? i : { pending: 0, synced: 0, drafted: 0 }), i;
  } finally {
    yy = !1;
  }
}
async function tD() {
  const e = r1();
  if (!e.length)
    return { pending: 0, synced: 0 };
  if (cn())
    return { pending: e.length, synced: 0 };
  const t = [];
  let n = 0;
  for (const a of e)
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.customers.create_customer",
        args: a.args
      });
      n++, r && r.message && r.message.name && r.message.name !== a.args.customer_name && gQ(a.args.customer_name, r.message.name);
    } catch (r) {
      console.error("Failed to create customer", r), t.push(a);
    }
  return t.length ? (Ae.offline_customers = t, Tt("offline_customers", Ae.offline_customers)) : yQ(), { pending: t.length, synced: n };
}
async function bQ() {
  await tD();
  const e = hQ();
  if (!e.length)
    return { pending: 0, synced: 0 };
  if (cn())
    return { pending: e.length, synced: 0 };
  const t = [];
  let n = 0;
  for (const a of e)
    try {
      await frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: a.args
      }), n++;
    } catch (r) {
      console.error("Failed to submit payment", r), t.push(a);
    }
  return t.length ? (Ae.offline_payments = t, Tt("offline_payments", Ae.offline_payments)) : _Q(), { pending: t.length, synced: n };
}
function IA(e) {
  try {
    let t;
    try {
      t = typeof structuredClone == "function" ? structuredClone(e) : JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize item groups", n), t = [];
    }
    Ae.item_groups_cache = t, Tt("item_groups_cache", Ae.item_groups_cache);
  } catch (t) {
    console.error("Failed to cache item groups", t);
  }
}
function wQ() {
  try {
    return Ae.item_groups_cache || [];
  } catch (e) {
    return console.error("Failed to get cached item groups", e), [];
  }
}
function coe() {
  try {
    Ae.item_groups_cache = [], Tt("item_groups_cache", Ae.item_groups_cache);
  } catch (e) {
    console.error("Failed to clear item groups cache", e);
  }
}
function kQ(e, t) {
  try {
    const n = Ae.customer_balance_cache;
    n[e] = {
      balance: t,
      timestamp: Date.now()
    }, Ae.customer_balance_cache = n, Tt("customer_balance_cache", Ae.customer_balance_cache);
  } catch (n) {
    console.error("Failed to cache customer balance", n);
  }
}
function EA(e) {
  try {
    const n = (Ae.customer_balance_cache || {})[e];
    return n && Date.now() - n.timestamp < 864e5 ? n.balance : null;
  } catch (t) {
    return console.error("Failed to get cached customer balance", t), null;
  }
}
function uoe() {
  try {
    Ae.customer_balance_cache = {}, Tt("customer_balance_cache", Ae.customer_balance_cache);
  } catch (e) {
    console.error("Failed to clear customer balance cache", e);
  }
}
function SQ() {
  try {
    const e = Ae.customer_balance_cache || {}, t = Date.now(), n = {};
    Object.keys(e).forEach((a) => {
      const r = e[a];
      r && t - r.timestamp < 24 * 60 * 60 * 1e3 && (n[a] = r);
    }), Ae.customer_balance_cache = n, Tt("customer_balance_cache", Ae.customer_balance_cache);
  } catch (e) {
    console.error("Failed to clear expired customer balances", e);
  }
}
const CQ = {
  name: "OfflineInvoicesDialog",
  mixins: [Oi],
  props: {
    modelValue: Boolean,
    posProfile: {
      type: Object,
      default: () => ({})
    }
  },
  emits: ["update:modelValue", "deleted", "sync-all"],
  data() {
    return {
      dialog: this.modelValue,
      invoices: [],
      headers: [
        {
          title: this.__("Customer"),
          value: "customer",
          align: "start",
          width: "35%"
        },
        {
          title: this.__("Date"),
          value: "posting_date",
          align: "center",
          width: "20%"
        },
        {
          title: this.__("Amount"),
          value: "grand_total",
          align: "end",
          width: "25%"
        },
        {
          title: this.__("Actions"),
          value: "actions",
          align: "center",
          width: "20%",
          sortable: !1
        }
      ]
    };
  },
  watch: {
    modelValue(e) {
      this.dialog = e, e && this.loadInvoices();
    },
    dialog(e) {
      this.$emit("update:modelValue", e);
    }
  },
  methods: {
    loadInvoices() {
      this.invoices = ZO();
    },
    removeInvoice(e) {
      this.posProfile.posa_allow_delete_offline_invoice && (mQ(e), this.loadInvoices(), this.$emit("deleted", $s()));
    }
  }
}, AQ = { class: "header-content" }, xQ = { class: "header-icon-wrapper" }, TQ = { class: "header-text" }, IQ = { class: "header-title" }, EQ = { class: "header-subtitle" }, PQ = { class: "header-stats" }, OQ = {
  key: 0,
  class: "empty-state text-center py-12"
}, DQ = { class: "empty-icon-wrapper mb-4" }, BQ = { class: "text-h5 mb-3 text-grey-darken-2 font-weight-medium" }, VQ = { class: "text-body-1 text-grey-darken-1 mb-0" }, MQ = {
  key: 1,
  class: "table-container"
}, RQ = { class: "table-header mb-4" }, LQ = { class: "text-h6 text-grey-darken-2 mb-1" }, FQ = { class: "text-body-2 text-grey" }, NQ = { class: "customer-cell" }, UQ = { class: "font-weight-medium text-grey-darken-2" }, $Q = { class: "text-caption text-grey" }, qQ = { class: "amount-cell text-right" }, HQ = { class: "text-h6 font-weight-bold text-success" }, zQ = { class: "text-caption text-grey" };
function WQ(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-chip"), s = Q("v-spacer"), d = Q("v-card-title"), u = Q("v-divider"), f = Q("v-avatar"), h = Q("v-tooltip"), g = Q("v-btn"), v = Q("v-data-table"), w = Q("v-container"), b = Q("v-card-text"), p = Q("v-card-actions"), y = Q("v-card"), S = Q("v-dialog"), E = Q("v-row");
  return ee(), Re(E, { justify: "center" }, {
    default: x(() => [
      _(S, {
        modelValue: r.dialog,
        "onUpdate:modelValue": t[2] || (t[2] = (C) => r.dialog = C),
        "max-width": "1000px",
        persistent: ""
      }, {
        default: x(() => [
          _(y, { class: "pos-card offline-invoices-card" }, {
            default: x(() => [
              _(d, { class: "offline-header pa-6" }, {
                default: x(() => [
                  I("div", AQ, [
                    I("div", xQ, [
                      _(o, {
                        class: "header-icon",
                        size: "40"
                      }, {
                        default: x(() => t[3] || (t[3] = [
                          ae("mdi-file-document-multiple")
                        ])),
                        _: 1,
                        __: [3]
                      })
                    ]),
                    I("div", TQ, [
                      I("h3", IQ, q(e.__("Offline Invoices")), 1),
                      I("p", EQ, q(e.__("Manage your offline transactions")), 1),
                      I("div", PQ, [
                        r.invoices.length > 0 ? (ee(), Re(l, {
                          key: 0,
                          color: "primary",
                          variant: "flat",
                          size: "small",
                          class: "status-chip mr-2"
                        }, {
                          default: x(() => [
                            _(o, {
                              start: "",
                              size: "14"
                            }, {
                              default: x(() => t[4] || (t[4] = [
                                ae("mdi-clock-outline")
                              ])),
                              _: 1,
                              __: [4]
                            }),
                            ae(" " + q(r.invoices.length) + " " + q(e.__("Pending")), 1)
                          ]),
                          _: 1
                        })) : (ee(), Re(l, {
                          key: 1,
                          color: "success",
                          variant: "flat",
                          size: "small",
                          class: "status-chip"
                        }, {
                          default: x(() => [
                            _(o, {
                              start: "",
                              size: "14"
                            }, {
                              default: x(() => t[5] || (t[5] = [
                                ae("mdi-check-circle")
                              ])),
                              _: 1,
                              __: [5]
                            }),
                            ae(" " + q(e.__("All Synced")), 1)
                          ]),
                          _: 1
                        }))
                      ])
                    ])
                  ]),
                  _(s)
                ]),
                _: 1
              }),
              _(u, { class: "header-divider" }),
              _(b, { class: "pa-0 white-background" }, {
                default: x(() => [
                  _(w, {
                    fluid: "",
                    class: "pa-6"
                  }, {
                    default: x(() => [
                      r.invoices.length ? (ee(), Oe("div", MQ, [
                        I("div", RQ, [
                          I("h4", LQ, q(e.__("Pending Invoices")), 1),
                          I("p", FQ, q(e.__("These invoices will be synced when connection is restored")), 1)
                        ]),
                        _(v, {
                          headers: r.headers,
                          items: r.invoices,
                          class: "elevation-0 rounded-lg white-table",
                          "items-per-page": 15,
                          "items-per-page-options": [15, 25, 50]
                        }, {
                          "item.customer": x(({ item: C }) => [
                            I("div", NQ, [
                              _(f, {
                                size: "32",
                                color: "primary",
                                class: "mr-3"
                              }, {
                                default: x(() => [
                                  _(o, {
                                    size: "18",
                                    color: "white"
                                  }, {
                                    default: x(() => t[7] || (t[7] = [
                                      ae("mdi-account")
                                    ])),
                                    _: 1,
                                    __: [7]
                                  })
                                ]),
                                _: 1
                              }),
                              I("div", null, [
                                I("div", UQ, q(C.invoice.customer_name || C.invoice.customer), 1),
                                I("div", $Q, q(e.__("Customer")), 1)
                              ])
                            ])
                          ]),
                          "item.posting_date": x(({ item: C }) => [
                            _(l, {
                              size: "small",
                              color: "info",
                              variant: "tonal",
                              class: "date-chip"
                            }, {
                              default: x(() => [
                                _(o, {
                                  start: "",
                                  size: "14"
                                }, {
                                  default: x(() => t[8] || (t[8] = [
                                    ae("mdi-calendar")
                                  ])),
                                  _: 1,
                                  __: [8]
                                }),
                                ae(" " + q(C.invoice.posting_date), 1)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          "item.grand_total": x(({ item: C }) => [
                            I("div", qQ, [
                              I("div", HQ, q(e.currencySymbol(C.invoice.currency)) + " " + q(e.formatCurrency(
                                C.invoice.grand_total || C.invoice.rounded_total
                              )), 1),
                              I("div", zQ, q(e.__("Total Amount")), 1)
                            ])
                          ]),
                          "item.actions": x(({ index: C }) => [
                            n.posProfile.posa_allow_delete_offline_invoice ? (ee(), Re(g, {
                              key: 0,
                              icon: "",
                              color: "error",
                              size: "small",
                              variant: "text",
                              onClick: (D) => i.removeInvoice(C),
                              class: "delete-btn"
                            }, {
                              default: x(() => [
                                _(o, { size: "18" }, {
                                  default: x(() => t[9] || (t[9] = [
                                    ae("mdi-delete-outline")
                                  ])),
                                  _: 1,
                                  __: [9]
                                }),
                                _(h, {
                                  activator: "parent",
                                  location: "top"
                                }, {
                                  default: x(() => [
                                    ae(q(e.__("Delete Invoice")), 1)
                                  ]),
                                  _: 1
                                })
                              ]),
                              _: 2
                            }, 1032, ["onClick"])) : ye("", !0)
                          ]),
                          _: 1
                        }, 8, ["headers", "items"])
                      ])) : (ee(), Oe("div", OQ, [
                        I("div", DQ, [
                          _(o, {
                            size: "80",
                            color: "success",
                            class: "empty-icon"
                          }, {
                            default: x(() => t[6] || (t[6] = [
                              ae("mdi-check-circle-outline")
                            ])),
                            _: 1,
                            __: [6]
                          })
                        ]),
                        I("h3", BQ, q(e.__("All Caught Up!")), 1),
                        I("p", VQ, q(e.__("No offline invoices pending synchronization")), 1)
                      ]))
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(u),
              _(p, { class: "dialog-actions-container" }, {
                default: x(() => [
                  r.invoices.length > 0 ? (ee(), Re(g, {
                    key: 0,
                    theme: "dark",
                    variant: "elevated",
                    "prepend-icon": "mdi-sync",
                    onClick: t[0] || (t[0] = (C) => e.$emit("sync-all")),
                    class: "pos-action-btn sync-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      ae(q(e.__("Sync All")), 1)
                    ]),
                    _: 1
                  })) : ye("", !0),
                  _(s),
                  _(g, {
                    color: "error",
                    variant: "flat",
                    onClick: t[1] || (t[1] = (C) => r.dialog = !1),
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      _(o, { start: "" }, {
                        default: x(() => t[10] || (t[10] = [
                          ae("mdi-close-circle-outline")
                        ])),
                        _: 1,
                        __: [10]
                      }),
                      I("span", null, q(e.__("Close")), 1)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const jQ = /* @__PURE__ */ nn(CQ, [["render", WQ]]);
function KQ(e = 1e3, t = 60) {
  const n = Se(0), a = Se([]), r = Se([]), i = Se(0), o = oa({
    cores: navigator.hardwareConcurrency || 1,
    gbMemory: navigator.deviceMemory || void 0
  });
  let l = null, s = performance.now(), d = null;
  function u() {
    const w = performance.now(), b = w - s - e;
    n.value = Math.max(0, b), s = w, a.value.push(n.value), a.value.length > t && a.value.shift();
  }
  function f() {
    performance.memory && (i.value = performance.memory.usedJSHeapSize);
  }
  function h() {
    s = performance.now(), l = window.setInterval(() => {
      u(), f();
    }, e), window.PerformanceObserver && PerformanceObserver.supportedEntryTypes.includes("longtask") && (d = new PerformanceObserver((w) => {
      r.value.push(...w.getEntries()), r.value.length > t && r.value.splice(0, r.value.length - t);
    }), d.observe({ entryTypes: ["longtask"] }));
  }
  function g() {
    l !== null && (clearInterval(l), l = null), d && (d.disconnect(), d = null);
  }
  const v = () => {
    document.hidden ? g() : h();
  };
  return document.addEventListener("visibilitychange", v), di(() => {
    g(), document.removeEventListener("visibilitychange", v);
  }), h(), {
    cpuLag: n,
    history: a,
    longTasks: r,
    memoryUsage: i,
    device: o,
    stop: g
  };
}
function YQ(e = 1e4, t = 60) {
  const n = Se(null), a = Se(null), r = Se(null), i = Se(null), o = Se(null), l = Se([]), s = Se(!0), d = Se(null);
  let u = null;
  async function f() {
    s.value = !0, d.value = null;
    try {
      const h = await frappe.call({
        method: "posawesome.posawesome.api.utilities.get_server_usage"
      });
      if (h && h.message) {
        n.value = h.message.cpu_percent, a.value = h.message.memory_percent, r.value = h.message.memory_total, i.value = h.message.memory_used, o.value = h.message.memory_available;
        const g = h.message.uptime;
        l.value.push({
          cpu: n.value,
          memory: a.value,
          memoryTotal: r.value,
          memoryUsed: i.value,
          memoryAvailable: o.value,
          uptime: g
        }), l.value.length > t && l.value.shift();
      } else
        d.value = "No data from server";
    } catch (h) {
      d.value = h.message || h;
    } finally {
      s.value = !1;
    }
  }
  return f(), u = window.setInterval(f, e), di(() => {
    u && clearInterval(u);
  }), { cpu: n, memory: a, memoryTotal: r, memoryUsed: i, memoryAvailable: o, history: l, loading: s, error: d };
}
const GQ = { class: "cpu-gadget-section mx-1" }, QQ = { class: "cpu-current-lag" }, JQ = { class: "cpu-tooltip-content" }, XQ = { class: "cpu-tooltip-title" }, ZQ = { class: "cpu-tooltip-section-title mb-1" }, eJ = { class: "cpu-tooltip-peak mb-1" }, tJ = { class: "cpu-tooltip-sparkline mb-2" }, nJ = {
  width: 180,
  height: 40,
  class: "cpu-sparkline-large"
}, aJ = ["points"], rJ = ["points"], iJ = { class: "cpu-tooltip-detail" }, oJ = {
  key: 0,
  class: "cpu-tooltip-warning"
}, sJ = {
  key: 1,
  class: "cpu-tooltip-detail"
}, lJ = {
  key: 2,
  class: "cpu-tooltip-warning"
}, cJ = { key: 3 }, uJ = { class: "cpu-tooltip-detail" }, dJ = { class: "ml-2" }, fJ = { class: "cpu-tooltip-detail" }, mJ = { class: "ml-2" }, hJ = { class: "cpu-tooltip-bar" }, _J = { class: "cpu-bar-bg" }, pJ = { class: "cpu-bar-label" }, vJ = { class: "cpu-tooltip-detail" }, gJ = { class: "ml-2" }, yJ = { class: "ml-2" }, bJ = { class: "cpu-tooltip-detail" }, wJ = { class: "cpu-tooltip-section-title mb-1" }, kJ = { class: "cpu-tooltip-detail" }, SJ = { class: "cpu-tooltip-detail" }, CJ = { class: "cpu-tooltip-detail" }, AJ = {
  key: 0,
  class: "ml-2"
}, xJ = { class: "cpu-tooltip-tip mt-2" }, TJ = { class: "cpu-tooltip-explanation mt-2" }, IJ = { class: "cpu-tooltip-action mt-2" }, EJ = /* @__PURE__ */ Ha({
  __name: "ServerUsageGadget",
  setup(e) {
    const { cpuLag: t, history: n, memoryUsage: a, device: r } = KQ(1e3, 60), i = Gt("__", (T) => T), {
      cpu: o,
      memory: l,
      memoryTotal: s,
      memoryUsed: d,
      memoryAvailable: u,
      history: f,
      loading: h,
      error: g
    } = YQ(1e4, 60), v = W(() => Math.max(...f.value.map((T) => T.cpu ?? 0), 0)), w = W(() => Math.max(...f.value.map((T) => T.memory ?? 0), 0)), b = Se(null);
    nt(
      f,
      (T) => {
        T.length && T[T.length - 1].uptime != null && (b.value = T[T.length - 1].uptime);
      },
      { immediate: !0, deep: !0 }
    );
    function p(T) {
      if (T == null) return "N/A";
      const A = Math.floor(T / (3600 * 24)), V = Math.floor(T % (3600 * 24) / 3600), M = Math.floor(T % 3600 / 60);
      let B = "";
      return A > 0 && (B += `${A}d `), (V > 0 || A > 0) && (B += `${V}h `), B += `${M}m`, B.trim();
    }
    function y(T) {
      return T == null ? "N/A" : T < 1024 ? `${T} B` : T < 1024 * 1024 ? `${(T / 1024).toFixed(1)} KB` : T < 1024 * 1024 * 1024 ? `${(T / 1024 / 1024).toFixed(1)} MB` : `${(T / 1024 / 1024 / 1024).toFixed(2)} GB`;
    }
    function S(T, A, V) {
      if (!T.length) return "";
      const M = Math.max(...T, 100), B = 0, N = T.length > 1 ? A / (T.length - 1) : A;
      return T.map((H, j) => `${j * N},${V - (H - B) / (M - B || 1) * V}`).join(" ");
    }
    function E(T, A, V) {
      if (!T.length) return "";
      const M = Math.max(...T, 100), B = 0, N = T.length > 1 ? A / (T.length - 1) : A;
      let H = T.map((j, te) => `${te * N},${V - (j - B) / (M - B || 1) * V}`).join(" ");
      return H += ` ${A},${V} 0,${V}`, H;
    }
    const C = W(() => S(n.value, 180, 40)), D = W(() => E(n.value, 180, 40)), P = W(() => Math.max(...n.value, 0)), O = W(() => Math.round(Math.min(P.value, 100)));
    return (T, A) => {
      const V = Q("v-icon"), M = Q("v-divider"), B = Q("v-tooltip");
      return ee(), Oe("div", GQ, [
        _(B, { location: "bottom" }, {
          activator: x(({ props: N }) => [
            I("div", He(N, { class: "cpu-meter-container" }), [
              _(V, {
                size: "22",
                color: "primary"
              }, {
                default: x(() => A[0] || (A[0] = [
                  ae("mdi-server")
                ])),
                _: 1,
                __: [0]
              }),
              I("span", QQ, q(fe(t).toFixed(1)) + " ms", 1)
            ], 16)
          ]),
          default: x(() => [
            I("div", JQ, [
              I("div", XQ, [
                _(V, {
                  size: "16",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => A[1] || (A[1] = [
                    ae("mdi-server")
                  ])),
                  _: 1,
                  __: [1]
                }),
                ae(" " + q(fe(i)("Server Health")), 1)
              ]),
              _(M, { class: "my-2" }),
              I("div", ZQ, q(fe(i)("Server Metrics")), 1),
              I("div", eJ, [
                _(V, {
                  size: "14",
                  color: "success",
                  class: "mr-1"
                }, {
                  default: x(() => A[2] || (A[2] = [
                    ae("mdi-arrow-up-bold")
                  ])),
                  _: 1,
                  __: [2]
                }),
                ae(" " + q(fe(i)("Peak:")) + " ", 1),
                I("b", null, q(P.value.toFixed(1)) + " ms", 1),
                ae(" (" + q(O.value) + "%) ", 1)
              ]),
              I("div", tJ, [
                (ee(), Oe("svg", nJ, [
                  A[3] || (A[3] = I("defs", null, [
                    I("linearGradient", {
                      id: "cpuAreaGradient",
                      x1: "0",
                      y1: "0",
                      x2: "0",
                      y2: "1"
                    }, [
                      I("stop", {
                        offset: "0%",
                        "stop-color": "#4caf50",
                        "stop-opacity": "0.35"
                      }),
                      I("stop", {
                        offset: "100%",
                        "stop-color": "#4caf50",
                        "stop-opacity": "0"
                      })
                    ])
                  ], -1)),
                  I("polyline", {
                    points: C.value,
                    fill: "none",
                    stroke: "#4caf50",
                    "stroke-width": "2"
                  }, null, 8, aJ),
                  I("polygon", {
                    points: D.value,
                    fill: "url(#cpuAreaGradient)",
                    stroke: "none"
                  }, null, 8, rJ)
                ]))
              ]),
              I("div", iJ, [
                _(V, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => A[4] || (A[4] = [
                    ae("mdi-chip")
                  ])),
                  _: 1,
                  __: [4]
                }),
                ae(" " + q(fe(i)("Current Event Loop Lag:")) + " ", 1),
                I("b", null, q(fe(t).toFixed(1)), 1),
                A[5] || (A[5] = ae(" ms "))
              ]),
              fe(t) >= 80 ? (ee(), Oe("div", oJ, [
                _(V, {
                  size: "14",
                  color: "error",
                  class: "mr-1"
                }, {
                  default: x(() => A[6] || (A[6] = [
                    ae("mdi-alert")
                  ])),
                  _: 1,
                  __: [6]
                }),
                ae(" " + q(fe(i)("Warning: High lag may indicate heavy processing or browser slowness.")), 1)
              ])) : ye("", !0),
              fe(h) ? (ee(), Oe("div", sJ, q(fe(i)("Loading server CPU/memory usage...")), 1)) : fe(g) ? (ee(), Oe("div", lJ, q(fe(g)), 1)) : (ee(), Oe("div", cJ, [
                I("div", uJ, [
                  _(V, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => A[7] || (A[7] = [
                      ae("mdi-chip")
                    ])),
                    _: 1,
                    __: [7]
                  }),
                  ae(" " + q(fe(i)("Server CPU Usage:")) + " ", 1),
                  I("b", null, q(fe(o) !== null ? fe(o).toFixed(1) + "%" : "N/A"), 1),
                  I("span", dJ, [
                    ae(q(fe(i)("Peak Server:")) + " ", 1),
                    I("b", null, q(v.value.toFixed(1)) + "%", 1)
                  ])
                ]),
                I("div", fJ, [
                  _(V, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => A[8] || (A[8] = [
                      ae("mdi-memory")
                    ])),
                    _: 1,
                    __: [8]
                  }),
                  ae(" " + q(fe(i)("Server Memory Usage:")) + " ", 1),
                  I("b", null, q(fe(l) !== null ? fe(l).toFixed(1) + "%" : "N/A"), 1),
                  I("span", mJ, [
                    ae(q(fe(i)("Peak Memory:")) + " ", 1),
                    I("b", null, q(w.value.toFixed(1)) + "%", 1)
                  ])
                ]),
                I("div", hJ, [
                  I("div", _J, [
                    I("div", {
                      class: "cpu-bar-fill",
                      style: Xe({
                        width: (fe(l) || 0) + "%",
                        background: "linear-gradient(90deg,#1976d2 0%,#42a5f5 100%)"
                      })
                    }, null, 4)
                  ]),
                  I("span", pJ, q(fe(l) !== null ? fe(l).toFixed(1) + "%" : "N/A"), 1)
                ]),
                I("div", vJ, [
                  _(V, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => A[9] || (A[9] = [
                      ae("mdi-database")
                    ])),
                    _: 1,
                    __: [9]
                  }),
                  ae(" " + q(fe(i)("Total:")) + " ", 1),
                  I("b", null, q(y(fe(s))), 1),
                  I("span", gJ, [
                    ae(q(fe(i)("Used:")) + " ", 1),
                    I("b", null, q(y(fe(d))), 1)
                  ]),
                  I("span", yJ, [
                    ae(q(fe(i)("Available:")) + " ", 1),
                    I("b", null, q(y(fe(u))), 1)
                  ])
                ]),
                I("div", bJ, [
                  _(V, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => A[10] || (A[10] = [
                      ae("mdi-timer-outline")
                    ])),
                    _: 1,
                    __: [10]
                  }),
                  ae(" " + q(fe(i)("Server Uptime:")) + " ", 1),
                  I("b", null, q(p(b.value)), 1)
                ])
              ])),
              _(M, { class: "my-2" }),
              I("div", wJ, q(fe(i)("Client Metrics")), 1),
              I("div", kJ, [
                _(V, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => A[11] || (A[11] = [
                    ae("mdi-monitor")
                  ])),
                  _: 1,
                  __: [11]
                }),
                ae(" " + q(fe(i)("Client CPU Lag:")) + " ", 1),
                I("b", null, q(fe(t).toFixed(1)), 1),
                A[12] || (A[12] = ae(" ms "))
              ]),
              I("div", SJ, [
                _(V, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => A[13] || (A[13] = [
                    ae("mdi-memory")
                  ])),
                  _: 1,
                  __: [13]
                }),
                ae(" " + q(fe(i)("Client Memory Usage:")) + " ", 1),
                I("b", null, q(y(fe(a))), 1)
              ]),
              I("div", CJ, [
                _(V, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => A[14] || (A[14] = [
                    ae("mdi-chip")
                  ])),
                  _: 1,
                  __: [14]
                }),
                ae(" " + q(fe(i)("CPU Cores:")) + " ", 1),
                I("b", null, q(fe(r).cores), 1),
                fe(r).gbMemory ? (ee(), Oe("span", AJ, [
                  ae(q(fe(i)("Device Memory:")) + " ", 1),
                  I("b", null, q(fe(r).gbMemory) + " GB", 1)
                ])) : ye("", !0)
              ]),
              _(M, { class: "my-2" }),
              I("div", xJ, [
                _(V, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => A[15] || (A[15] = [
                    ae("mdi-lightbulb-on-outline")
                  ])),
                  _: 1,
                  __: [15]
                }),
                ae(" " + q(fe(i)("Tip: Close unused tabs or apps to reduce lag.")), 1)
              ]),
              I("div", TJ, [
                _(V, {
                  size: "14",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: x(() => A[16] || (A[16] = [
                    ae("mdi-chip")
                  ])),
                  _: 1,
                  __: [16]
                }),
                ae(" " + q(fe(i)("Event-loop lag measures how busy your browser is. Lower is better.")), 1)
              ]),
              I("div", IJ, [
                _(V, {
                  size: "14",
                  class: "mr-1"
                }, {
                  default: x(() => A[17] || (A[17] = [
                    ae("mdi-refresh")
                  ])),
                  _: 1,
                  __: [17]
                }),
                ae(" " + q(fe(i)("Updates automatically")), 1)
              ])
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
}), PJ = /* @__PURE__ */ nn(EJ, [["__scopeId", "data-v-70efd328"]]);
function OJ(e = 1e4, t = 60) {
  const n = Se(null), a = Se([]), r = Se(!0), i = Se(null);
  let o = null;
  async function l() {
    r.value = !0, i.value = null;
    try {
      const s = await frappe.call({
        method: "posawesome.posawesome.api.utilities.get_database_usage"
      });
      s && s.message ? (n.value = s.message, a.value.push(s.message), a.value.length > t && a.value.shift()) : i.value = "No data from server";
    } catch (s) {
      i.value = s.message || s;
    } finally {
      r.value = !1;
    }
  }
  return l(), o = window.setInterval(l, e), di(() => {
    o && clearInterval(o);
  }), { dbStats: n, history: a, loading: r, error: i };
}
const DJ = { class: "db-gadget-section mx-1" }, BJ = { class: "db-current-size" }, VJ = { class: "db-tooltip-content p-3 min-w-[220px]" }, MJ = { class: "db-tooltip-title flex items-center font-semibold text-[14px] mb-2" }, RJ = {
  key: 0,
  class: "db-tooltip-detail"
}, LJ = {
  key: 1,
  class: "db-tooltip-warning"
}, FJ = { key: 2 }, NJ = { class: "db-tooltip-section-title mb-1" }, UJ = { class: "db-tooltip-sparkline mb-2" }, $J = {
  width: 120,
  height: 32,
  class: "db-sparkline"
}, qJ = ["points"], HJ = { class: "db-tooltip-detail flex items-center mb-1" }, zJ = { class: "ml-2" }, WJ = { class: "db-tooltip-section-title mb-1" }, jJ = { class: "db-tooltip-detail flex items-center mb-1" }, KJ = { class: "ml-2 flex items-center" }, YJ = { class: "ml-2 flex items-center" }, GJ = { class: "db-tooltip-detail flex items-center mb-1" }, QJ = { class: "ml-2 flex items-center" }, JJ = { key: 0 }, XJ = { class: "db-tooltip-section-title mb-1 flex items-center" }, ZJ = { class: "db-top-tables ml-2" }, eX = { class: "db-tooltip-tip mt-2 flex items-center" }, tX = { class: "db-tooltip-explanation mt-2 flex items-center" }, nX = {
  __name: "DatabaseUsageGadget",
  setup(e) {
    const { dbStats: t, history: n, loading: a, error: r } = OJ(1e4, 30), i = Gt("__", (d) => d), o = W(() => l(t.value?.db_size));
    function l(d) {
      return d == null ? "N/A" : d < 1024 ? `${d} B` : d < 1024 * 1024 ? `${(d / 1024).toFixed(1)} KB` : d < 1024 * 1024 * 1024 ? `${(d / 1024 / 1024).toFixed(1)} MB` : `${(d / 1024 / 1024 / 1024).toFixed(2)} GB`;
    }
    const s = W(() => {
      const d = n.value.map((w) => w.db_size || 0), u = 120, f = 32;
      if (!d.length) return "";
      const h = Math.max(...d, 100), g = 0, v = d.length > 1 ? u / (d.length - 1) : u;
      return d.map((w, b) => `${b * v},${f - (w - g) / (h - g || 1) * f}`).join(" ");
    });
    return (d, u) => {
      const f = Q("v-icon"), h = Q("v-divider"), g = Q("v-tooltip");
      return ee(), Oe("div", DJ, [
        _(g, { location: "bottom" }, {
          activator: x(({ props: v }) => [
            I("div", He(v, { class: "db-meter-container" }), [
              _(f, {
                size: "22",
                color: "info"
              }, {
                default: x(() => u[0] || (u[0] = [
                  ae("mdi-database")
                ])),
                _: 1,
                __: [0]
              }),
              I("span", BJ, q(o.value), 1)
            ], 16)
          ]),
          default: x(() => [
            I("div", VJ, [
              I("div", MJ, [
                _(f, {
                  size: "16",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: x(() => u[1] || (u[1] = [
                    ae("mdi-database-settings")
                  ])),
                  _: 1,
                  __: [1]
                }),
                ae(" " + q(fe(i)("Database Health")), 1)
              ]),
              _(h, { class: "my-2" }),
              fe(a) ? (ee(), Oe("div", RJ, q(fe(i)("Loading database stats...")), 1)) : fe(r) ? (ee(), Oe("div", LJ, q(fe(r)), 1)) : (ee(), Oe("div", FJ, [
                I("div", NJ, q(fe(i)("Database Info")), 1),
                I("div", UJ, [
                  (ee(), Oe("svg", $J, [
                    I("polyline", {
                      points: s.value,
                      fill: "none",
                      stroke: "#1976d2",
                      "stroke-width": "2"
                    }, null, 8, qJ)
                  ]))
                ]),
                I("div", HJ, [
                  _(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: x(() => u[2] || (u[2] = [
                      ae("mdi-database-settings")
                    ])),
                    _: 1,
                    __: [2]
                  }),
                  I("b", null, q(fe(t).db_engine), 1),
                  I("span", zJ, q(fe(t).db_version), 1)
                ]),
                _(h, { class: "my-2" }),
                I("div", WJ, q(fe(i)("Usage Stats")), 1),
                I("div", jJ, [
                  _(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: x(() => u[3] || (u[3] = [
                      ae("mdi-database")
                    ])),
                    _: 1,
                    __: [3]
                  }),
                  ae(" " + q(fe(i)("Size:")) + " ", 1),
                  I("b", null, q(o.value), 1),
                  I("span", KJ, [
                    _(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: x(() => u[4] || (u[4] = [
                        ae("mdi-table")
                      ])),
                      _: 1,
                      __: [4]
                    }),
                    ae(q(fe(i)("Tables:")) + " ", 1),
                    I("b", null, q(fe(t).db_table_count), 1)
                  ]),
                  I("span", YJ, [
                    _(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: x(() => u[5] || (u[5] = [
                        ae("mdi-format-list-numbered")
                      ])),
                      _: 1,
                      __: [5]
                    }),
                    ae(q(fe(i)("Rows:")) + " ", 1),
                    I("b", null, q(fe(t).db_total_rows), 1)
                  ])
                ]),
                I("div", GJ, [
                  _(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: x(() => u[6] || (u[6] = [
                      ae("mdi-connection")
                    ])),
                    _: 1,
                    __: [6]
                  }),
                  ae(" " + q(fe(i)("Connections:")) + " ", 1),
                  I("b", null, q(fe(t).db_connections), 1),
                  I("span", QJ, [
                    _(f, {
                      size: "14",
                      color: "warning",
                      class: "mr-1"
                    }, {
                      default: x(() => u[7] || (u[7] = [
                        ae("mdi-timer-sand")
                      ])),
                      _: 1,
                      __: [7]
                    }),
                    ae(q(fe(i)("Slow Queries:")) + " ", 1),
                    I("b", null, q(fe(t).db_slow_queries), 1)
                  ])
                ]),
                _(h, { class: "my-2" }),
                fe(t).db_top_tables && fe(t).db_top_tables.length ? (ee(), Oe("div", JJ, [
                  I("div", XJ, [
                    _(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: x(() => u[8] || (u[8] = [
                        ae("mdi-database-outline")
                      ])),
                      _: 1,
                      __: [8]
                    }),
                    ae(" " + q(fe(i)("Top Tables")), 1)
                  ]),
                  I("ul", ZJ, [
                    (ee(!0), Oe(Qe, null, rn(fe(t).db_top_tables, (v) => (ee(), Oe("li", {
                      key: v.name,
                      class: "flex items-center mb-1"
                    }, [
                      _(f, {
                        size: "12",
                        color: "info",
                        class: "mr-1"
                      }, {
                        default: x(() => u[9] || (u[9] = [
                          ae("mdi-table")
                        ])),
                        _: 1,
                        __: [9]
                      }),
                      I("b", null, q(v.name), 1),
                      ae(": " + q(l(v.size)), 1)
                    ]))), 128))
                  ])
                ])) : ye("", !0)
              ])),
              _(h, { class: "my-2" }),
              I("div", eX, [
                _(f, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => u[10] || (u[10] = [
                    ae("mdi-lightbulb-on-outline")
                  ])),
                  _: 1,
                  __: [10]
                }),
                ae(" " + q(fe(i)("Tip: Monitor slow queries and table size for optimal performance.")), 1)
              ]),
              I("div", tX, [
                _(f, {
                  size: "14",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: x(() => u[11] || (u[11] = [
                    ae("mdi-database")
                  ])),
                  _: 1,
                  __: [11]
                }),
                ae(" " + q(fe(i)("Database health affects overall system speed and reliability.")), 1)
              ])
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
}, aX = /* @__PURE__ */ nn(nX, [["__scopeId", "data-v-b6c4c127"]]);
async function rX(e = []) {
  if (!(typeof localStorage > "u"))
    try {
      e.length ? e.forEach((t) => localStorage.removeItem(t)) : Object.keys(localStorage).forEach((t) => localStorage.removeItem(t)), console.log("[ClearAllCaches] localStorage cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear localStorage", t), t;
    }
}
async function iX(e = []) {
  if (!(typeof sessionStorage > "u"))
    try {
      e.length ? e.forEach((t) => sessionStorage.removeItem(t)) : sessionStorage.clear(), console.log("[ClearAllCaches] sessionStorage cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear sessionStorage", t), t;
    }
}
async function oX(e = []) {
  if (!(typeof indexedDB > "u"))
    try {
      !e.length && indexedDB.databases && (e = (await indexedDB.databases()).map((n) => n.name).filter(Boolean)), await Promise.all(
        e.map(
          (t) => new Promise((n, a) => {
            const r = indexedDB.deleteDatabase(t);
            r.onsuccess = () => n(), r.onblocked = () => n(), r.onerror = () => a(r.error);
          })
        )
      ), console.log("[ClearAllCaches] IndexedDB cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear IndexedDB", t), t;
    }
}
async function sX(e = []) {
  if (!(typeof caches > "u"))
    try {
      e.length || (e = await caches.keys()), await Promise.all(e.map((t) => caches.delete(t))), console.log("[ClearAllCaches] Cache API cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear Cache API", t), t;
    }
}
async function Yb(e = {
  confirmBeforeClear: !0,
  onSuccess: () => {
  },
  onError: () => {
  },
  specificKeys: [],
  specificDatabases: [],
  specificCaches: [],
  skipStorage: []
}) {
  const t = Object.assign(
    {
      confirmBeforeClear: !0,
      onSuccess: () => {
      },
      onError: () => {
      },
      specificKeys: [],
      specificDatabases: [],
      specificCaches: [],
      skipStorage: []
    },
    e || {}
  );
  try {
    if (t.confirmBeforeClear && typeof window < "u" && !window.confirm("Are you sure you want to clear application cache?"))
      return;
    const n = [];
    t.skipStorage.includes("localStorage") || n.push(rX(t.specificKeys)), t.skipStorage.includes("sessionStorage") || n.push(iX(t.specificKeys)), t.skipStorage.includes("indexedDB") || n.push(oX(t.specificDatabases)), t.skipStorage.includes("caches") || n.push(sX(t.specificCaches)), await Promise.all(n), t.onSuccess();
  } catch (n) {
    t.onError(n);
  }
}
typeof window < "u" && (document.addEventListener("keydown", (e) => {
  e.ctrlKey && e.shiftKey && e.code === "KeyR" && (e.preventDefault(), Yb().catch(() => {
  }));
}), document.addEventListener("DOMContentLoaded", () => {
  const e = document.getElementById("clear-cache-btn");
  e && e.addEventListener("click", () => Yb().catch(() => {
  }));
}));
const lX = {
  name: "NavBar",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  components: {
    NavbarAppBar: tG,
    NavbarDrawer: lG,
    NavbarMenu: BG,
    StatusIndicator: NG,
    CacheUsageMeter: i9,
    AboutDialog: E9,
    OfflineInvoicesDialog: jQ,
    ServerUsageGadget: PJ,
    DatabaseUsageGadget: aX
  },
  props: {
    posProfile: {
      type: Object,
      default: () => ({})
    },
    pendingInvoices: {
      type: Number,
      default: 0
    },
    lastInvoiceId: String,
    networkOnline: Boolean,
    serverOnline: Boolean,
    serverConnecting: Boolean,
    isIpHost: Boolean,
    syncTotals: {
      type: Object,
      default: () => ({ pending: 0, synced: 0, drafted: 0 })
    },
    manualOffline: Boolean,
    isDark: Boolean,
    cacheUsage: {
      type: Number,
      default: 0
    },
    cacheUsageLoading: {
      type: Boolean,
      default: !1
    },
    cacheUsageDetails: {
      type: Object,
      default: () => ({ total: 0, indexedDB: 0, localStorage: 0 })
    },
    cacheReady: Boolean,
    loadingProgress: {
      type: Number,
      default: 0
    },
    loadingActive: {
      type: Boolean,
      default: !1
    },
    loadingMessage: {
      type: String,
      default: "Loading app data..."
    }
  },
  data() {
    return {
      drawer: !1,
      mini: !0,
      item: 0,
      items: [
        { text: "POS", icon: "mdi-network-pos" },
        { text: "Payments", icon: "mdi-credit-card" }
      ],
      company: "",
      companyImg: YO,
      showAboutDialog: !1,
      showOfflineInvoices: !1,
      freeze: !1,
      freezeTitle: "",
      freezeMsg: "",
      snack: !1,
      snackText: "",
      snackColor: "success",
      snackTimeout: 3e3
    };
  },
  computed: {
    appBarColor() {
      return this.isDark ? this.$vuetify.theme.themes.dark.colors.surface : "white";
    }
  },
  mounted() {
    this.initializeNavbar(), this.eventBus && (this.eventBus.on("show_message", this.showMessage), this.eventBus.on("freeze", this.handleFreeze), this.eventBus.on("unfreeze", this.handleUnfreeze), this.eventBus.on("set_company", this.handleSetCompany));
  },
  unmounted() {
    this.eventBus && (this.eventBus.off("show_message", this.showMessage), this.eventBus.off("freeze", this.handleFreeze), this.eventBus.off("unfreeze", this.handleUnfreeze), this.eventBus.off("set_company", this.handleSetCompany));
  },
  methods: {
    initializeNavbar() {
      frappe.boot && frappe.boot.sysdefaults && frappe.boot.sysdefaults.company ? this.company = frappe.boot.sysdefaults.company : this.company = "POS System", frappe.boot && frappe.boot.website_settings && frappe.boot.website_settings.app_logo ? this.companyImg = frappe.boot.website_settings.app_logo : frappe.boot && frappe.boot.website_settings && frappe.boot.website_settings.banner_image && (this.companyImg = frappe.boot.website_settings.banner_image), this.$forceUpdate();
    },
    handleNavClick() {
      this.drawer = !this.drawer, this.$emit("nav-click");
    },
    goDesk() {
      window.location.href = "/app";
    },
    changePage(e) {
      this.$emit("change-page", e);
    },
    openCloseShift() {
      this.$emit("close-shift");
    },
    printLastInvoice() {
      this.$emit("print-last-invoice");
    },
    syncPendingInvoices() {
      this.$emit("sync-invoices");
    },
    toggleManualOffline() {
      this.$emit("toggle-offline");
    },
    async clearCache() {
      if (cn()) {
        this.showMessage({
          color: "warning",
          title: this.__("Cannot clear cache while offline")
        });
        return;
      }
      try {
        let e = null;
        typeof localStorage < "u" && (e = localStorage.getItem("use_western_numerals")), await W_(), await Yb({ confirmBeforeClear: !1 }).catch(() => {
        }), e !== null && typeof localStorage < "u" && localStorage.setItem("use_western_numerals", e), this.showMessage({
          color: "success",
          title: this.__("Cache cleared successfully")
        });
      } catch (e) {
        console.error("Failed to clear cache", e), this.showMessage({
          color: "error",
          title: this.__("Failed to clear cache")
        });
      } finally {
        setTimeout(() => location.reload(), 1e3);
      }
    },
    toggleTheme() {
      this.$emit("toggle-theme");
    },
    logOut() {
      this.$emit("logout");
    },
    refreshCacheUsage() {
      this.$emit("refresh-cache-usage");
    },
    updateAfterDelete() {
      this.$emit("update-after-delete");
    },
    showMessage(e) {
      this.snackText = e.title, this.snackColor = e.color || "success", this.snack = !0;
    },
    handleFreeze(e) {
      this.freezeTitle = e?.title || "", this.freezeMsg = e?.message || "", this.freeze = !0;
    },
    handleUnfreeze() {
      this.freeze = !1, this.freezeTitle = "", this.freezeMsg = "";
    },
    handleSetCompany(e) {
      typeof e == "string" ? this.company = e : e && e.name && (this.company = e.name, e.company_image && (this.companyImg = e.company_image));
    },
    handleMouseLeave() {
      this.drawer && (clearTimeout(this._closeTimeout), this._closeTimeout = setTimeout(() => {
        this.drawer = !1, this.mini = !0;
      }, 250));
    }
  },
  emits: [
    "nav-click",
    "change-page",
    "close-shift",
    "print-last-invoice",
    "sync-invoices",
    "toggle-offline",
    "toggle-theme",
    "logout",
    "refresh-cache-usage",
    "update-after-delete"
  ]
};
function cX(e, t, n, a, r, i) {
  const o = Q("StatusIndicator"), l = Q("CacheUsageMeter"), s = Q("ServerUsageGadget"), d = Q("DatabaseUsageGadget"), u = Q("NavbarMenu"), f = Q("NavbarAppBar"), h = Q("NavbarDrawer"), g = Q("AboutDialog"), v = Q("v-card-title"), w = Q("v-card-text"), b = Q("v-card"), p = Q("v-dialog"), y = Q("OfflineInvoicesDialog"), S = Q("v-btn"), E = Q("v-snackbar");
  return ee(), Oe("nav", {
    class: Ie(a.rtlClasses)
  }, [
    _(f, {
      "pos-profile": n.posProfile,
      "pending-invoices": n.pendingInvoices,
      "is-dark": n.isDark,
      "loading-progress": n.loadingProgress,
      "loading-active": n.loadingActive,
      "loading-message": n.loadingMessage,
      company: r.company,
      onNavClick: i.handleNavClick,
      onGoDesk: i.goDesk,
      onShowOfflineInvoices: t[1] || (t[1] = (C) => r.showOfflineInvoices = !0)
    }, {
      "status-indicator": x(() => [
        _(o, {
          "network-online": n.networkOnline,
          "server-online": n.serverOnline,
          "server-connecting": n.serverConnecting,
          "is-ip-host": n.isIpHost,
          "sync-totals": n.syncTotals,
          "cache-ready": n.cacheReady
        }, null, 8, ["network-online", "server-online", "server-connecting", "is-ip-host", "sync-totals", "cache-ready"])
      ]),
      "cache-usage-meter": x(() => [
        _(l, {
          "cache-usage": n.cacheUsage,
          "cache-usage-loading": n.cacheUsageLoading,
          "cache-usage-details": n.cacheUsageDetails,
          onRefresh: i.refreshCacheUsage
        }, null, 8, ["cache-usage", "cache-usage-loading", "cache-usage-details", "onRefresh"])
      ]),
      "cpu-gadget": x(() => [
        _(s)
      ]),
      "db-usage-gadget": x(() => [
        _(d)
      ]),
      menu: x(() => [
        _(u, {
          "pos-profile": n.posProfile,
          "last-invoice-id": n.lastInvoiceId,
          "manual-offline": n.manualOffline,
          "network-online": n.networkOnline,
          "server-online": n.serverOnline,
          "is-dark": n.isDark,
          onCloseShift: i.openCloseShift,
          onPrintLastInvoice: i.printLastInvoice,
          onSyncInvoices: i.syncPendingInvoices,
          onToggleOffline: i.toggleManualOffline,
          onClearCache: i.clearCache,
          onShowAbout: t[0] || (t[0] = (C) => r.showAboutDialog = !0),
          onToggleTheme: i.toggleTheme,
          onLogout: i.logOut
        }, null, 8, ["pos-profile", "last-invoice-id", "manual-offline", "network-online", "server-online", "is-dark", "onCloseShift", "onPrintLastInvoice", "onSyncInvoices", "onToggleOffline", "onClearCache", "onToggleTheme", "onLogout"])
      ]),
      _: 1
    }, 8, ["pos-profile", "pending-invoices", "is-dark", "loading-progress", "loading-active", "loading-message", "company", "onNavClick", "onGoDesk"]),
    _(h, {
      drawer: r.drawer,
      "onUpdate:drawer": t[2] || (t[2] = (C) => r.drawer = C),
      item: r.item,
      "onUpdate:item": t[3] || (t[3] = (C) => r.item = C),
      company: r.company,
      "company-img": r.companyImg,
      items: r.items,
      "is-dark": n.isDark,
      onChangePage: i.changePage
    }, null, 8, ["drawer", "item", "company", "company-img", "items", "is-dark", "onChangePage"]),
    _(g, {
      modelValue: r.showAboutDialog,
      "onUpdate:modelValue": t[4] || (t[4] = (C) => r.showAboutDialog = C)
    }, null, 8, ["modelValue"]),
    _(p, {
      modelValue: r.freeze,
      "onUpdate:modelValue": t[5] || (t[5] = (C) => r.freeze = C),
      persistent: "",
      "max-width": "290"
    }, {
      default: x(() => [
        _(b, null, {
          default: x(() => [
            _(v, { class: "text-h5" }, {
              default: x(() => [
                ae(q(r.freezeTitle), 1)
              ]),
              _: 1
            }),
            _(w, null, {
              default: x(() => [
                ae(q(r.freezeMsg), 1)
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    _(y, {
      modelValue: r.showOfflineInvoices,
      "onUpdate:modelValue": t[6] || (t[6] = (C) => r.showOfflineInvoices = C),
      "pos-profile": n.posProfile,
      onDeleted: i.updateAfterDelete,
      onSyncAll: i.syncPendingInvoices
    }, null, 8, ["modelValue", "pos-profile", "onDeleted", "onSyncAll"]),
    _(E, {
      modelValue: r.snack,
      "onUpdate:modelValue": t[8] || (t[8] = (C) => r.snack = C),
      timeout: r.snackTimeout,
      color: r.snackColor,
      location: a.isRtl ? "top left" : "top right"
    }, {
      actions: x(() => [
        _(S, {
          color: "white",
          variant: "text",
          onClick: t[7] || (t[7] = (C) => r.snack = !1)
        }, {
          default: x(() => [
            ae(q(e.__("Close")), 1)
          ]),
          _: 1
        })
      ]),
      default: x(() => [
        ae(q(r.snackText) + " ", 1)
      ]),
      _: 1
    }, 8, ["modelValue", "timeout", "color", "location"])
  ], 2);
}
const uX = /* @__PURE__ */ nn(lX, [["render", cX], ["__scopeId", "data-v-09e74fbc"]]);
var Nh = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function nD(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var jd = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var dX = jd.exports, PA;
function fX() {
  return PA || (PA = 1, function(e, t) {
    (function() {
      var n, a = "4.17.21", r = 200, i = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", o = "Expected a function", l = "Invalid `variable` option passed into `_.template`", s = "__lodash_hash_undefined__", d = 500, u = "__lodash_placeholder__", f = 1, h = 2, g = 4, v = 1, w = 2, b = 1, p = 2, y = 4, S = 8, E = 16, C = 32, D = 64, P = 128, O = 256, T = 512, A = 30, V = "...", M = 800, B = 16, N = 1, H = 2, j = 3, te = 1 / 0, de = 9007199254740991, Z = 17976931348623157e292, F = NaN, K = 4294967295, se = K - 1, X = K >>> 1, he = [
        ["ary", P],
        ["bind", b],
        ["bindKey", p],
        ["curry", S],
        ["curryRight", E],
        ["flip", T],
        ["partial", C],
        ["partialRight", D],
        ["rearg", O]
      ], ve = "[object Arguments]", pe = "[object Array]", z = "[object AsyncFunction]", ke = "[object Boolean]", Me = "[object Date]", Le = "[object DOMException]", ce = "[object Error]", ne = "[object Function]", G = "[object GeneratorFunction]", le = "[object Map]", Y = "[object Number]", Ce = "[object Null]", Te = "[object Object]", ie = "[object Promise]", ge = "[object Proxy]", Pe = "[object RegExp]", Ee = "[object Set]", Je = "[object String]", _e = "[object Symbol]", $e = "[object Undefined]", Ze = "[object WeakMap]", _t = "[object WeakSet]", It = "[object ArrayBuffer]", rt = "[object DataView]", Dt = "[object Float32Array]", en = "[object Float64Array]", zn = "[object Int8Array]", ta = "[object Int16Array]", Na = "[object Int32Array]", ba = "[object Uint8Array]", Wn = "[object Uint8ClampedArray]", Vn = "[object Uint16Array]", Ja = "[object Uint32Array]", xe = /\b__p \+= '';/g, ze = /\b(__p \+=) '' \+/g, ft = /(__e\(.*?\)|\b__t\)) \+\n'';/g, it = /&(?:amp|lt|gt|quot|#39);/g, je = /[&<>"']/g, st = RegExp(it.source), pt = RegExp(je.source), xa = /<%-([\s\S]+?)%>/g, Ua = /<%([\s\S]+?)%>/g, _r = /<%=([\s\S]+?)%>/g, Wa = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, Qi = /^\w*$/, sl = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, Ji = /[\\^$.*+?()[\]{}|]/g, lm = RegExp(Ji.source), wc = /^\s+/, Up = /\s/, $p = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, ll = /\{\n\/\* \[wrapped with (.+)\] \*/, td = /,? & /, cl = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, qp = /[()=,{}\[\]\/\s]/, Hp = /\\(\\)?/g, ul = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, cm = /\w*$/, zp = /^[-+]0x[0-9a-f]+$/i, kc = /^0b[01]+$/i, Wp = /^\[object .+?Constructor\]$/, dl = /^0o[0-7]+$/i, jp = /^(?:0|[1-9]\d*)$/, Sc = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, Xi = /($^)/, um = /['\n\r\u2028\u2029\\]/g, ms = "\\ud800-\\udfff", Kp = "\\u0300-\\u036f", Yp = "\\ufe20-\\ufe2f", Gp = "\\u20d0-\\u20ff", dm = Kp + Yp + Gp, Cc = "\\u2700-\\u27bf", fm = "a-z\\xdf-\\xf6\\xf8-\\xff", Qp = "\\xac\\xb1\\xd7\\xf7", Jp = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", mm = "\\u2000-\\u206f", Xp = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", fl = "A-Z\\xc0-\\xd6\\xd8-\\xde", nd = "\\ufe0e\\ufe0f", hm = Qp + Jp + mm + Xp, hs = "['’]", _m = "[" + ms + "]", jn = "[" + hm + "]", Ac = "[" + dm + "]", pm = "\\d+", Xr = "[" + Cc + "]", gm = "[" + fm + "]", ad = "[^" + ms + hm + pm + Cc + fm + fl + "]", xc = "\\ud83c[\\udffb-\\udfff]", Tc = "(?:" + Ac + "|" + xc + ")", ym = "[^" + ms + "]", ml = "(?:\\ud83c[\\udde6-\\uddff]){2}", rd = "[\\ud800-\\udbff][\\udc00-\\udfff]", Zi = "[" + fl + "]", bm = "\\u200d", id = "(?:" + gm + "|" + ad + ")", Zp = "(?:" + Zi + "|" + ad + ")", wm = "(?:" + hs + "(?:d|ll|m|re|s|t|ve))?", od = "(?:" + hs + "(?:D|LL|M|RE|S|T|VE))?", xr = Tc + "?", Ic = "[" + nd + "]?", ev = "(?:" + bm + "(?:" + [ym, ml, rd].join("|") + ")" + Ic + xr + ")*", tv = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", Di = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", km = Ic + xr + ev, nv = "(?:" + [Xr, ml, rd].join("|") + ")" + km, av = "(?:" + [ym + Ac + "?", Ac, ml, rd, _m].join("|") + ")", sd = RegExp(hs, "g"), rv = RegExp(Ac, "g"), hl = RegExp(xc + "(?=" + xc + ")|" + av + km, "g"), iv = RegExp([
        Zi + "?" + gm + "+" + wm + "(?=" + [jn, Zi, "$"].join("|") + ")",
        Zp + "+" + od + "(?=" + [jn, Zi + id, "$"].join("|") + ")",
        Zi + "?" + id + "+" + wm,
        Zi + "+" + od,
        Di,
        tv,
        pm,
        nv
      ].join("|"), "g"), ov = RegExp("[" + bm + ms + dm + nd + "]"), sv = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, lv = [
        "Array",
        "Buffer",
        "DataView",
        "Date",
        "Error",
        "Float32Array",
        "Float64Array",
        "Function",
        "Int8Array",
        "Int16Array",
        "Int32Array",
        "Map",
        "Math",
        "Object",
        "Promise",
        "RegExp",
        "Set",
        "String",
        "Symbol",
        "TypeError",
        "Uint8Array",
        "Uint8ClampedArray",
        "Uint16Array",
        "Uint32Array",
        "WeakMap",
        "_",
        "clearTimeout",
        "isFinite",
        "parseInt",
        "setTimeout"
      ], cv = -1, Mn = {};
      Mn[Dt] = Mn[en] = Mn[zn] = Mn[ta] = Mn[Na] = Mn[ba] = Mn[Wn] = Mn[Vn] = Mn[Ja] = !0, Mn[ve] = Mn[pe] = Mn[It] = Mn[ke] = Mn[rt] = Mn[Me] = Mn[ce] = Mn[ne] = Mn[le] = Mn[Y] = Mn[Te] = Mn[Pe] = Mn[Ee] = Mn[Je] = Mn[Ze] = !1;
      var xn = {};
      xn[ve] = xn[pe] = xn[It] = xn[rt] = xn[ke] = xn[Me] = xn[Dt] = xn[en] = xn[zn] = xn[ta] = xn[Na] = xn[le] = xn[Y] = xn[Te] = xn[Pe] = xn[Ee] = xn[Je] = xn[_e] = xn[ba] = xn[Wn] = xn[Vn] = xn[Ja] = !0, xn[ce] = xn[ne] = xn[Ze] = !1;
      var uv = {
        // Latin-1 Supplement block.
        À: "A",
        Á: "A",
        Â: "A",
        Ã: "A",
        Ä: "A",
        Å: "A",
        à: "a",
        á: "a",
        â: "a",
        ã: "a",
        ä: "a",
        å: "a",
        Ç: "C",
        ç: "c",
        Ð: "D",
        ð: "d",
        È: "E",
        É: "E",
        Ê: "E",
        Ë: "E",
        è: "e",
        é: "e",
        ê: "e",
        ë: "e",
        Ì: "I",
        Í: "I",
        Î: "I",
        Ï: "I",
        ì: "i",
        í: "i",
        î: "i",
        ï: "i",
        Ñ: "N",
        ñ: "n",
        Ò: "O",
        Ó: "O",
        Ô: "O",
        Õ: "O",
        Ö: "O",
        Ø: "O",
        ò: "o",
        ó: "o",
        ô: "o",
        õ: "o",
        ö: "o",
        ø: "o",
        Ù: "U",
        Ú: "U",
        Û: "U",
        Ü: "U",
        ù: "u",
        ú: "u",
        û: "u",
        ü: "u",
        Ý: "Y",
        ý: "y",
        ÿ: "y",
        Æ: "Ae",
        æ: "ae",
        Þ: "Th",
        þ: "th",
        ß: "ss",
        // Latin Extended-A block.
        Ā: "A",
        Ă: "A",
        Ą: "A",
        ā: "a",
        ă: "a",
        ą: "a",
        Ć: "C",
        Ĉ: "C",
        Ċ: "C",
        Č: "C",
        ć: "c",
        ĉ: "c",
        ċ: "c",
        č: "c",
        Ď: "D",
        Đ: "D",
        ď: "d",
        đ: "d",
        Ē: "E",
        Ĕ: "E",
        Ė: "E",
        Ę: "E",
        Ě: "E",
        ē: "e",
        ĕ: "e",
        ė: "e",
        ę: "e",
        ě: "e",
        Ĝ: "G",
        Ğ: "G",
        Ġ: "G",
        Ģ: "G",
        ĝ: "g",
        ğ: "g",
        ġ: "g",
        ģ: "g",
        Ĥ: "H",
        Ħ: "H",
        ĥ: "h",
        ħ: "h",
        Ĩ: "I",
        Ī: "I",
        Ĭ: "I",
        Į: "I",
        İ: "I",
        ĩ: "i",
        ī: "i",
        ĭ: "i",
        į: "i",
        ı: "i",
        Ĵ: "J",
        ĵ: "j",
        Ķ: "K",
        ķ: "k",
        ĸ: "k",
        Ĺ: "L",
        Ļ: "L",
        Ľ: "L",
        Ŀ: "L",
        Ł: "L",
        ĺ: "l",
        ļ: "l",
        ľ: "l",
        ŀ: "l",
        ł: "l",
        Ń: "N",
        Ņ: "N",
        Ň: "N",
        Ŋ: "N",
        ń: "n",
        ņ: "n",
        ň: "n",
        ŋ: "n",
        Ō: "O",
        Ŏ: "O",
        Ő: "O",
        ō: "o",
        ŏ: "o",
        ő: "o",
        Ŕ: "R",
        Ŗ: "R",
        Ř: "R",
        ŕ: "r",
        ŗ: "r",
        ř: "r",
        Ś: "S",
        Ŝ: "S",
        Ş: "S",
        Š: "S",
        ś: "s",
        ŝ: "s",
        ş: "s",
        š: "s",
        Ţ: "T",
        Ť: "T",
        Ŧ: "T",
        ţ: "t",
        ť: "t",
        ŧ: "t",
        Ũ: "U",
        Ū: "U",
        Ŭ: "U",
        Ů: "U",
        Ű: "U",
        Ų: "U",
        ũ: "u",
        ū: "u",
        ŭ: "u",
        ů: "u",
        ű: "u",
        ų: "u",
        Ŵ: "W",
        ŵ: "w",
        Ŷ: "Y",
        ŷ: "y",
        Ÿ: "Y",
        Ź: "Z",
        Ż: "Z",
        Ž: "Z",
        ź: "z",
        ż: "z",
        ž: "z",
        Ĳ: "IJ",
        ĳ: "ij",
        Œ: "Oe",
        œ: "oe",
        ŉ: "'n",
        ſ: "s"
      }, Sm = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      }, Cm = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
      }, dv = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029"
      }, ld = parseFloat, fv = parseInt, cd = typeof Nh == "object" && Nh && Nh.Object === Object && Nh, mv = typeof self == "object" && self && self.Object === Object && self, ja = cd || mv || Function("return this")(), ud = t && !t.nodeType && t, Eo = ud && !0 && e && !e.nodeType && e, Am = Eo && Eo.exports === ud, dd = Am && cd.process, qr = function() {
        try {
          var Fe = Eo && Eo.require && Eo.require("util").types;
          return Fe || dd && dd.binding && dd.binding("util");
        } catch {
        }
      }(), xm = qr && qr.isArrayBuffer, Tm = qr && qr.isDate, Im = qr && qr.isMap, Ec = qr && qr.isRegExp, Em = qr && qr.isSet, Pm = qr && qr.isTypedArray;
      function Tr(Fe, et, Ke) {
        switch (Ke.length) {
          case 0:
            return Fe.call(et);
          case 1:
            return Fe.call(et, Ke[0]);
          case 2:
            return Fe.call(et, Ke[0], Ke[1]);
          case 3:
            return Fe.call(et, Ke[0], Ke[1], Ke[2]);
        }
        return Fe.apply(et, Ke);
      }
      function Om(Fe, et, Ke, Ct) {
        for (var jt = -1, gn = Fe == null ? 0 : Fe.length; ++jt < gn; ) {
          var Ta = Fe[jt];
          et(Ct, Ta, Ke(Ta), Fe);
        }
        return Ct;
      }
      function Hr(Fe, et) {
        for (var Ke = -1, Ct = Fe == null ? 0 : Fe.length; ++Ke < Ct && et(Fe[Ke], Ke, Fe) !== !1; )
          ;
        return Fe;
      }
      function hv(Fe, et) {
        for (var Ke = Fe == null ? 0 : Fe.length; Ke-- && et(Fe[Ke], Ke, Fe) !== !1; )
          ;
        return Fe;
      }
      function Dm(Fe, et) {
        for (var Ke = -1, Ct = Fe == null ? 0 : Fe.length; ++Ke < Ct; )
          if (!et(Fe[Ke], Ke, Fe))
            return !1;
        return !0;
      }
      function eo(Fe, et) {
        for (var Ke = -1, Ct = Fe == null ? 0 : Fe.length, jt = 0, gn = []; ++Ke < Ct; ) {
          var Ta = Fe[Ke];
          et(Ta, Ke, Fe) && (gn[jt++] = Ta);
        }
        return gn;
      }
      function Pc(Fe, et) {
        var Ke = Fe == null ? 0 : Fe.length;
        return !!Ke && vi(Fe, et, 0) > -1;
      }
      function fd(Fe, et, Ke) {
        for (var Ct = -1, jt = Fe == null ? 0 : Fe.length; ++Ct < jt; )
          if (Ke(et, Fe[Ct]))
            return !0;
        return !1;
      }
      function Un(Fe, et) {
        for (var Ke = -1, Ct = Fe == null ? 0 : Fe.length, jt = Array(Ct); ++Ke < Ct; )
          jt[Ke] = et(Fe[Ke], Ke, Fe);
        return jt;
      }
      function to(Fe, et) {
        for (var Ke = -1, Ct = et.length, jt = Fe.length; ++Ke < Ct; )
          Fe[jt + Ke] = et[Ke];
        return Fe;
      }
      function md(Fe, et, Ke, Ct) {
        var jt = -1, gn = Fe == null ? 0 : Fe.length;
        for (Ct && gn && (Ke = Fe[++jt]); ++jt < gn; )
          Ke = et(Ke, Fe[jt], jt, Fe);
        return Ke;
      }
      function _v(Fe, et, Ke, Ct) {
        var jt = Fe == null ? 0 : Fe.length;
        for (Ct && jt && (Ke = Fe[--jt]); jt--; )
          Ke = et(Ke, Fe[jt], jt, Fe);
        return Ke;
      }
      function hd(Fe, et) {
        for (var Ke = -1, Ct = Fe == null ? 0 : Fe.length; ++Ke < Ct; )
          if (et(Fe[Ke], Ke, Fe))
            return !0;
        return !1;
      }
      var pv = _d("length");
      function vv(Fe) {
        return Fe.split("");
      }
      function gv(Fe) {
        return Fe.match(cl) || [];
      }
      function Oc(Fe, et, Ke) {
        var Ct;
        return Ke(Fe, function(jt, gn, Ta) {
          if (et(jt, gn, Ta))
            return Ct = gn, !1;
        }), Ct;
      }
      function Dc(Fe, et, Ke, Ct) {
        for (var jt = Fe.length, gn = Ke + (Ct ? 1 : -1); Ct ? gn-- : ++gn < jt; )
          if (et(Fe[gn], gn, Fe))
            return gn;
        return -1;
      }
      function vi(Fe, et, Ke) {
        return et === et ? kv(Fe, et, Ke) : Dc(Fe, Bm, Ke);
      }
      function yv(Fe, et, Ke, Ct) {
        for (var jt = Ke - 1, gn = Fe.length; ++jt < gn; )
          if (Ct(Fe[jt], et))
            return jt;
        return -1;
      }
      function Bm(Fe) {
        return Fe !== Fe;
      }
      function Vm(Fe, et) {
        var Ke = Fe == null ? 0 : Fe.length;
        return Ke ? Bc(Fe, et) / Ke : F;
      }
      function _d(Fe) {
        return function(et) {
          return et == null ? n : et[Fe];
        };
      }
      function _s(Fe) {
        return function(et) {
          return Fe == null ? n : Fe[et];
        };
      }
      function Mm(Fe, et, Ke, Ct, jt) {
        return jt(Fe, function(gn, Ta, In) {
          Ke = Ct ? (Ct = !1, gn) : et(Ke, gn, Ta, In);
        }), Ke;
      }
      function Rm(Fe, et) {
        var Ke = Fe.length;
        for (Fe.sort(et); Ke--; )
          Fe[Ke] = Fe[Ke].value;
        return Fe;
      }
      function Bc(Fe, et) {
        for (var Ke, Ct = -1, jt = Fe.length; ++Ct < jt; ) {
          var gn = et(Fe[Ct]);
          gn !== n && (Ke = Ke === n ? gn : Ke + gn);
        }
        return Ke;
      }
      function pd(Fe, et) {
        for (var Ke = -1, Ct = Array(Fe); ++Ke < Fe; )
          Ct[Ke] = et(Ke);
        return Ct;
      }
      function bv(Fe, et) {
        return Un(et, function(Ke) {
          return [Ke, Fe[Ke]];
        });
      }
      function Lm(Fe) {
        return Fe && Fe.slice(0, $m(Fe) + 1).replace(wc, "");
      }
      function Ir(Fe) {
        return function(et) {
          return Fe(et);
        };
      }
      function vd(Fe, et) {
        return Un(et, function(Ke) {
          return Fe[Ke];
        });
      }
      function _l(Fe, et) {
        return Fe.has(et);
      }
      function na(Fe, et) {
        for (var Ke = -1, Ct = Fe.length; ++Ke < Ct && vi(et, Fe[Ke], 0) > -1; )
          ;
        return Ke;
      }
      function gi(Fe, et) {
        for (var Ke = Fe.length; Ke-- && vi(et, Fe[Ke], 0) > -1; )
          ;
        return Ke;
      }
      function gd(Fe, et) {
        for (var Ke = Fe.length, Ct = 0; Ke--; )
          Fe[Ke] === et && ++Ct;
        return Ct;
      }
      var Fm = _s(uv), Kn = _s(Sm);
      function pl(Fe) {
        return "\\" + dv[Fe];
      }
      function aa(Fe, et) {
        return Fe == null ? n : Fe[et];
      }
      function Tn(Fe) {
        return ov.test(Fe);
      }
      function Nm(Fe) {
        return sv.test(Fe);
      }
      function Um(Fe) {
        for (var et, Ke = []; !(et = Fe.next()).done; )
          Ke.push(et.value);
        return Ke;
      }
      function Vc(Fe) {
        var et = -1, Ke = Array(Fe.size);
        return Fe.forEach(function(Ct, jt) {
          Ke[++et] = [jt, Ct];
        }), Ke;
      }
      function yd(Fe, et) {
        return function(Ke) {
          return Fe(et(Ke));
        };
      }
      function Bi(Fe, et) {
        for (var Ke = -1, Ct = Fe.length, jt = 0, gn = []; ++Ke < Ct; ) {
          var Ta = Fe[Ke];
          (Ta === et || Ta === u) && (Fe[Ke] = u, gn[jt++] = Ke);
        }
        return gn;
      }
      function Mc(Fe) {
        var et = -1, Ke = Array(Fe.size);
        return Fe.forEach(function(Ct) {
          Ke[++et] = Ct;
        }), Ke;
      }
      function wv(Fe) {
        var et = -1, Ke = Array(Fe.size);
        return Fe.forEach(function(Ct) {
          Ke[++et] = [Ct, Ct];
        }), Ke;
      }
      function kv(Fe, et, Ke) {
        for (var Ct = Ke - 1, jt = Fe.length; ++Ct < jt; )
          if (Fe[Ct] === et)
            return Ct;
        return -1;
      }
      function Sv(Fe, et, Ke) {
        for (var Ct = Ke + 1; Ct--; )
          if (Fe[Ct] === et)
            return Ct;
        return Ct;
      }
      function ps(Fe) {
        return Tn(Fe) ? Av(Fe) : pv(Fe);
      }
      function Zr(Fe) {
        return Tn(Fe) ? xv(Fe) : vv(Fe);
      }
      function $m(Fe) {
        for (var et = Fe.length; et-- && Up.test(Fe.charAt(et)); )
          ;
        return et;
      }
      var Cv = _s(Cm);
      function Av(Fe) {
        for (var et = hl.lastIndex = 0; hl.test(Fe); )
          ++et;
        return et;
      }
      function xv(Fe) {
        return Fe.match(hl) || [];
      }
      function Tv(Fe) {
        return Fe.match(iv) || [];
      }
      var Iv = function Fe(et) {
        et = et == null ? ja : vs.defaults(ja.Object(), et, vs.pick(ja, lv));
        var Ke = et.Array, Ct = et.Date, jt = et.Error, gn = et.Function, Ta = et.Math, In = et.Object, gs = et.RegExp, qm = et.String, L = et.TypeError, U = Ke.prototype, re = gn.prototype, me = In.prototype, Ve = et["__core-js_shared__"], qe = re.toString, Ue = me.hasOwnProperty, Ye = 0, lt = function() {
          var c = /[^.]+$/.exec(Ve && Ve.keys && Ve.keys.IE_PROTO || "");
          return c ? "Symbol(src)_1." + c : "";
        }(), mt = me.toString, St = qe.call(In), $t = ja._, Ht = gs(
          "^" + qe.call(Ue).replace(Ji, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
        ), zt = Am ? et.Buffer : n, bn = et.Symbol, Rn = et.Uint8Array, kn = zt ? zt.allocUnsafe : n, ma = yd(In.getPrototypeOf, In), dt = In.create, xt = me.propertyIsEnumerable, Ln = U.splice, wa = bn ? bn.isConcatSpreadable : n, yi = bn ? bn.iterator : n, bi = bn ? bn.toStringTag : n, vl = function() {
          try {
            var c = kl(In, "defineProperty");
            return c({}, "", {}), c;
          } catch {
          }
        }(), Hm = et.clearTimeout !== ja.clearTimeout && et.clearTimeout, UD = Ct && Ct.now !== ja.Date.now && Ct.now, $D = et.setTimeout !== ja.setTimeout && et.setTimeout, zm = Ta.ceil, Wm = Ta.floor, Ev = In.getOwnPropertySymbols, qD = zt ? zt.isBuffer : n, s1 = et.isFinite, HD = U.join, zD = yd(In.keys, In), Ka = Ta.max, pr = Ta.min, WD = Ct.now, jD = et.parseInt, l1 = Ta.random, KD = U.reverse, Pv = kl(et, "DataView"), bd = kl(et, "Map"), Ov = kl(et, "Promise"), Rc = kl(et, "Set"), wd = kl(et, "WeakMap"), kd = kl(In, "create"), jm = wd && new wd(), Lc = {}, YD = Sl(Pv), GD = Sl(bd), QD = Sl(Ov), JD = Sl(Rc), XD = Sl(wd), Km = bn ? bn.prototype : n, Sd = Km ? Km.valueOf : n, c1 = Km ? Km.toString : n;
        function oe(c) {
          if (ka(c) && !Qt(c) && !(c instanceof dn)) {
            if (c instanceof wi)
              return c;
            if (Ue.call(c, "__wrapped__"))
              return uk(c);
          }
          return new wi(c);
        }
        var Fc = /* @__PURE__ */ function() {
          function c() {
          }
          return function(m) {
            if (!ha(m))
              return {};
            if (dt)
              return dt(m);
            c.prototype = m;
            var k = new c();
            return c.prototype = n, k;
          };
        }();
        function Ym() {
        }
        function wi(c, m) {
          this.__wrapped__ = c, this.__actions__ = [], this.__chain__ = !!m, this.__index__ = 0, this.__values__ = n;
        }
        oe.templateSettings = {
          /**
           * Used to detect `data` property values to be HTML-escaped.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          escape: xa,
          /**
           * Used to detect code to be evaluated.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          evaluate: Ua,
          /**
           * Used to detect `data` property values to inject.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          interpolate: _r,
          /**
           * Used to reference the data object in the template text.
           *
           * @memberOf _.templateSettings
           * @type {string}
           */
          variable: "",
          /**
           * Used to import variables into the compiled template.
           *
           * @memberOf _.templateSettings
           * @type {Object}
           */
          imports: {
            /**
             * A reference to the `lodash` function.
             *
             * @memberOf _.templateSettings.imports
             * @type {Function}
             */
            _: oe
          }
        }, oe.prototype = Ym.prototype, oe.prototype.constructor = oe, wi.prototype = Fc(Ym.prototype), wi.prototype.constructor = wi;
        function dn(c) {
          this.__wrapped__ = c, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = K, this.__views__ = [];
        }
        function ZD() {
          var c = new dn(this.__wrapped__);
          return c.__actions__ = zr(this.__actions__), c.__dir__ = this.__dir__, c.__filtered__ = this.__filtered__, c.__iteratees__ = zr(this.__iteratees__), c.__takeCount__ = this.__takeCount__, c.__views__ = zr(this.__views__), c;
        }
        function eB() {
          if (this.__filtered__) {
            var c = new dn(this);
            c.__dir__ = -1, c.__filtered__ = !0;
          } else
            c = this.clone(), c.__dir__ *= -1;
          return c;
        }
        function tB() {
          var c = this.__wrapped__.value(), m = this.__dir__, k = Qt(c), R = m < 0, J = k ? c.length : 0, ue = m2(0, J, this.__views__), be = ue.start, De = ue.end, Ne = De - be, tt = R ? De : be - 1, at = this.__iteratees__, ct = at.length, yt = 0, Et = pr(Ne, this.__takeCount__);
          if (!k || !R && J == Ne && Et == Ne)
            return B1(c, this.__actions__);
          var Nt = [];
          e:
            for (; Ne-- && yt < Et; ) {
              tt += m;
              for (var Zt = -1, Ut = c[tt]; ++Zt < ct; ) {
                var ln = at[Zt], hn = ln.iteratee, ni = ln.type, Or = hn(Ut);
                if (ni == H)
                  Ut = Or;
                else if (!Or) {
                  if (ni == N)
                    continue e;
                  break e;
                }
              }
              Nt[yt++] = Ut;
            }
          return Nt;
        }
        dn.prototype = Fc(Ym.prototype), dn.prototype.constructor = dn;
        function gl(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.clear(); ++m < k; ) {
            var R = c[m];
            this.set(R[0], R[1]);
          }
        }
        function nB() {
          this.__data__ = kd ? kd(null) : {}, this.size = 0;
        }
        function aB(c) {
          var m = this.has(c) && delete this.__data__[c];
          return this.size -= m ? 1 : 0, m;
        }
        function rB(c) {
          var m = this.__data__;
          if (kd) {
            var k = m[c];
            return k === s ? n : k;
          }
          return Ue.call(m, c) ? m[c] : n;
        }
        function iB(c) {
          var m = this.__data__;
          return kd ? m[c] !== n : Ue.call(m, c);
        }
        function oB(c, m) {
          var k = this.__data__;
          return this.size += this.has(c) ? 0 : 1, k[c] = kd && m === n ? s : m, this;
        }
        gl.prototype.clear = nB, gl.prototype.delete = aB, gl.prototype.get = rB, gl.prototype.has = iB, gl.prototype.set = oB;
        function Po(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.clear(); ++m < k; ) {
            var R = c[m];
            this.set(R[0], R[1]);
          }
        }
        function sB() {
          this.__data__ = [], this.size = 0;
        }
        function lB(c) {
          var m = this.__data__, k = Gm(m, c);
          if (k < 0)
            return !1;
          var R = m.length - 1;
          return k == R ? m.pop() : Ln.call(m, k, 1), --this.size, !0;
        }
        function cB(c) {
          var m = this.__data__, k = Gm(m, c);
          return k < 0 ? n : m[k][1];
        }
        function uB(c) {
          return Gm(this.__data__, c) > -1;
        }
        function dB(c, m) {
          var k = this.__data__, R = Gm(k, c);
          return R < 0 ? (++this.size, k.push([c, m])) : k[R][1] = m, this;
        }
        Po.prototype.clear = sB, Po.prototype.delete = lB, Po.prototype.get = cB, Po.prototype.has = uB, Po.prototype.set = dB;
        function Oo(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.clear(); ++m < k; ) {
            var R = c[m];
            this.set(R[0], R[1]);
          }
        }
        function fB() {
          this.size = 0, this.__data__ = {
            hash: new gl(),
            map: new (bd || Po)(),
            string: new gl()
          };
        }
        function mB(c) {
          var m = sh(this, c).delete(c);
          return this.size -= m ? 1 : 0, m;
        }
        function hB(c) {
          return sh(this, c).get(c);
        }
        function _B(c) {
          return sh(this, c).has(c);
        }
        function pB(c, m) {
          var k = sh(this, c), R = k.size;
          return k.set(c, m), this.size += k.size == R ? 0 : 1, this;
        }
        Oo.prototype.clear = fB, Oo.prototype.delete = mB, Oo.prototype.get = hB, Oo.prototype.has = _B, Oo.prototype.set = pB;
        function yl(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.__data__ = new Oo(); ++m < k; )
            this.add(c[m]);
        }
        function vB(c) {
          return this.__data__.set(c, s), this;
        }
        function gB(c) {
          return this.__data__.has(c);
        }
        yl.prototype.add = yl.prototype.push = vB, yl.prototype.has = gB;
        function Vi(c) {
          var m = this.__data__ = new Po(c);
          this.size = m.size;
        }
        function yB() {
          this.__data__ = new Po(), this.size = 0;
        }
        function bB(c) {
          var m = this.__data__, k = m.delete(c);
          return this.size = m.size, k;
        }
        function wB(c) {
          return this.__data__.get(c);
        }
        function kB(c) {
          return this.__data__.has(c);
        }
        function SB(c, m) {
          var k = this.__data__;
          if (k instanceof Po) {
            var R = k.__data__;
            if (!bd || R.length < r - 1)
              return R.push([c, m]), this.size = ++k.size, this;
            k = this.__data__ = new Oo(R);
          }
          return k.set(c, m), this.size = k.size, this;
        }
        Vi.prototype.clear = yB, Vi.prototype.delete = bB, Vi.prototype.get = wB, Vi.prototype.has = kB, Vi.prototype.set = SB;
        function u1(c, m) {
          var k = Qt(c), R = !k && Cl(c), J = !k && !R && Ss(c), ue = !k && !R && !J && qc(c), be = k || R || J || ue, De = be ? pd(c.length, qm) : [], Ne = De.length;
          for (var tt in c)
            (m || Ue.call(c, tt)) && !(be && // Safari 9 has enumerable `arguments.length` in strict mode.
            (tt == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
            J && (tt == "offset" || tt == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
            ue && (tt == "buffer" || tt == "byteLength" || tt == "byteOffset") || // Skip index properties.
            Mo(tt, Ne))) && De.push(tt);
          return De;
        }
        function d1(c) {
          var m = c.length;
          return m ? c[qv(0, m - 1)] : n;
        }
        function CB(c, m) {
          return lh(zr(c), bl(m, 0, c.length));
        }
        function AB(c) {
          return lh(zr(c));
        }
        function Dv(c, m, k) {
          (k !== n && !Mi(c[m], k) || k === n && !(m in c)) && Do(c, m, k);
        }
        function Cd(c, m, k) {
          var R = c[m];
          (!(Ue.call(c, m) && Mi(R, k)) || k === n && !(m in c)) && Do(c, m, k);
        }
        function Gm(c, m) {
          for (var k = c.length; k--; )
            if (Mi(c[k][0], m))
              return k;
          return -1;
        }
        function xB(c, m, k, R) {
          return ys(c, function(J, ue, be) {
            m(R, J, k(J), be);
          }), R;
        }
        function f1(c, m) {
          return c && ao(m, Xa(m), c);
        }
        function TB(c, m) {
          return c && ao(m, jr(m), c);
        }
        function Do(c, m, k) {
          m == "__proto__" && vl ? vl(c, m, {
            configurable: !0,
            enumerable: !0,
            value: k,
            writable: !0
          }) : c[m] = k;
        }
        function Bv(c, m) {
          for (var k = -1, R = m.length, J = Ke(R), ue = c == null; ++k < R; )
            J[k] = ue ? n : mg(c, m[k]);
          return J;
        }
        function bl(c, m, k) {
          return c === c && (k !== n && (c = c <= k ? c : k), m !== n && (c = c >= m ? c : m)), c;
        }
        function ki(c, m, k, R, J, ue) {
          var be, De = m & f, Ne = m & h, tt = m & g;
          if (k && (be = J ? k(c, R, J, ue) : k(c)), be !== n)
            return be;
          if (!ha(c))
            return c;
          var at = Qt(c);
          if (at) {
            if (be = _2(c), !De)
              return zr(c, be);
          } else {
            var ct = vr(c), yt = ct == ne || ct == G;
            if (Ss(c))
              return R1(c, De);
            if (ct == Te || ct == ve || yt && !J) {
              if (be = Ne || yt ? {} : tk(c), !De)
                return Ne ? r2(c, TB(be, c)) : a2(c, f1(be, c));
            } else {
              if (!xn[ct])
                return J ? c : {};
              be = p2(c, ct, De);
            }
          }
          ue || (ue = new Vi());
          var Et = ue.get(c);
          if (Et)
            return Et;
          ue.set(c, be), Pk(c) ? c.forEach(function(Ut) {
            be.add(ki(Ut, m, k, Ut, c, ue));
          }) : Ik(c) && c.forEach(function(Ut, ln) {
            be.set(ln, ki(Ut, m, k, ln, c, ue));
          });
          var Nt = tt ? Ne ? Zv : Xv : Ne ? jr : Xa, Zt = at ? n : Nt(c);
          return Hr(Zt || c, function(Ut, ln) {
            Zt && (ln = Ut, Ut = c[ln]), Cd(be, ln, ki(Ut, m, k, ln, c, ue));
          }), be;
        }
        function IB(c) {
          var m = Xa(c);
          return function(k) {
            return m1(k, c, m);
          };
        }
        function m1(c, m, k) {
          var R = k.length;
          if (c == null)
            return !R;
          for (c = In(c); R--; ) {
            var J = k[R], ue = m[J], be = c[J];
            if (be === n && !(J in c) || !ue(be))
              return !1;
          }
          return !0;
        }
        function h1(c, m, k) {
          if (typeof c != "function")
            throw new L(o);
          return Od(function() {
            c.apply(n, k);
          }, m);
        }
        function Ad(c, m, k, R) {
          var J = -1, ue = Pc, be = !0, De = c.length, Ne = [], tt = m.length;
          if (!De)
            return Ne;
          k && (m = Un(m, Ir(k))), R ? (ue = fd, be = !1) : m.length >= r && (ue = _l, be = !1, m = new yl(m));
          e:
            for (; ++J < De; ) {
              var at = c[J], ct = k == null ? at : k(at);
              if (at = R || at !== 0 ? at : 0, be && ct === ct) {
                for (var yt = tt; yt--; )
                  if (m[yt] === ct)
                    continue e;
                Ne.push(at);
              } else ue(m, ct, R) || Ne.push(at);
            }
          return Ne;
        }
        var ys = $1(no), _1 = $1(Mv, !0);
        function EB(c, m) {
          var k = !0;
          return ys(c, function(R, J, ue) {
            return k = !!m(R, J, ue), k;
          }), k;
        }
        function Qm(c, m, k) {
          for (var R = -1, J = c.length; ++R < J; ) {
            var ue = c[R], be = m(ue);
            if (be != null && (De === n ? be === be && !ti(be) : k(be, De)))
              var De = be, Ne = ue;
          }
          return Ne;
        }
        function PB(c, m, k, R) {
          var J = c.length;
          for (k = Xt(k), k < 0 && (k = -k > J ? 0 : J + k), R = R === n || R > J ? J : Xt(R), R < 0 && (R += J), R = k > R ? 0 : Dk(R); k < R; )
            c[k++] = m;
          return c;
        }
        function p1(c, m) {
          var k = [];
          return ys(c, function(R, J, ue) {
            m(R, J, ue) && k.push(R);
          }), k;
        }
        function or(c, m, k, R, J) {
          var ue = -1, be = c.length;
          for (k || (k = g2), J || (J = []); ++ue < be; ) {
            var De = c[ue];
            m > 0 && k(De) ? m > 1 ? or(De, m - 1, k, R, J) : to(J, De) : R || (J[J.length] = De);
          }
          return J;
        }
        var Vv = q1(), v1 = q1(!0);
        function no(c, m) {
          return c && Vv(c, m, Xa);
        }
        function Mv(c, m) {
          return c && v1(c, m, Xa);
        }
        function Jm(c, m) {
          return eo(m, function(k) {
            return Ro(c[k]);
          });
        }
        function wl(c, m) {
          m = ws(m, c);
          for (var k = 0, R = m.length; c != null && k < R; )
            c = c[ro(m[k++])];
          return k && k == R ? c : n;
        }
        function g1(c, m, k) {
          var R = m(c);
          return Qt(c) ? R : to(R, k(c));
        }
        function Er(c) {
          return c == null ? c === n ? $e : Ce : bi && bi in In(c) ? f2(c) : A2(c);
        }
        function Rv(c, m) {
          return c > m;
        }
        function OB(c, m) {
          return c != null && Ue.call(c, m);
        }
        function DB(c, m) {
          return c != null && m in In(c);
        }
        function BB(c, m, k) {
          return c >= pr(m, k) && c < Ka(m, k);
        }
        function Lv(c, m, k) {
          for (var R = k ? fd : Pc, J = c[0].length, ue = c.length, be = ue, De = Ke(ue), Ne = 1 / 0, tt = []; be--; ) {
            var at = c[be];
            be && m && (at = Un(at, Ir(m))), Ne = pr(at.length, Ne), De[be] = !k && (m || J >= 120 && at.length >= 120) ? new yl(be && at) : n;
          }
          at = c[0];
          var ct = -1, yt = De[0];
          e:
            for (; ++ct < J && tt.length < Ne; ) {
              var Et = at[ct], Nt = m ? m(Et) : Et;
              if (Et = k || Et !== 0 ? Et : 0, !(yt ? _l(yt, Nt) : R(tt, Nt, k))) {
                for (be = ue; --be; ) {
                  var Zt = De[be];
                  if (!(Zt ? _l(Zt, Nt) : R(c[be], Nt, k)))
                    continue e;
                }
                yt && yt.push(Nt), tt.push(Et);
              }
            }
          return tt;
        }
        function VB(c, m, k, R) {
          return no(c, function(J, ue, be) {
            m(R, k(J), ue, be);
          }), R;
        }
        function xd(c, m, k) {
          m = ws(m, c), c = ik(c, m);
          var R = c == null ? c : c[ro(Ci(m))];
          return R == null ? n : Tr(R, c, k);
        }
        function y1(c) {
          return ka(c) && Er(c) == ve;
        }
        function MB(c) {
          return ka(c) && Er(c) == It;
        }
        function RB(c) {
          return ka(c) && Er(c) == Me;
        }
        function Td(c, m, k, R, J) {
          return c === m ? !0 : c == null || m == null || !ka(c) && !ka(m) ? c !== c && m !== m : LB(c, m, k, R, Td, J);
        }
        function LB(c, m, k, R, J, ue) {
          var be = Qt(c), De = Qt(m), Ne = be ? pe : vr(c), tt = De ? pe : vr(m);
          Ne = Ne == ve ? Te : Ne, tt = tt == ve ? Te : tt;
          var at = Ne == Te, ct = tt == Te, yt = Ne == tt;
          if (yt && Ss(c)) {
            if (!Ss(m))
              return !1;
            be = !0, at = !1;
          }
          if (yt && !at)
            return ue || (ue = new Vi()), be || qc(c) ? X1(c, m, k, R, J, ue) : u2(c, m, Ne, k, R, J, ue);
          if (!(k & v)) {
            var Et = at && Ue.call(c, "__wrapped__"), Nt = ct && Ue.call(m, "__wrapped__");
            if (Et || Nt) {
              var Zt = Et ? c.value() : c, Ut = Nt ? m.value() : m;
              return ue || (ue = new Vi()), J(Zt, Ut, k, R, ue);
            }
          }
          return yt ? (ue || (ue = new Vi()), d2(c, m, k, R, J, ue)) : !1;
        }
        function FB(c) {
          return ka(c) && vr(c) == le;
        }
        function Fv(c, m, k, R) {
          var J = k.length, ue = J, be = !R;
          if (c == null)
            return !ue;
          for (c = In(c); J--; ) {
            var De = k[J];
            if (be && De[2] ? De[1] !== c[De[0]] : !(De[0] in c))
              return !1;
          }
          for (; ++J < ue; ) {
            De = k[J];
            var Ne = De[0], tt = c[Ne], at = De[1];
            if (be && De[2]) {
              if (tt === n && !(Ne in c))
                return !1;
            } else {
              var ct = new Vi();
              if (R)
                var yt = R(tt, at, Ne, c, m, ct);
              if (!(yt === n ? Td(at, tt, v | w, R, ct) : yt))
                return !1;
            }
          }
          return !0;
        }
        function b1(c) {
          if (!ha(c) || b2(c))
            return !1;
          var m = Ro(c) ? Ht : Wp;
          return m.test(Sl(c));
        }
        function NB(c) {
          return ka(c) && Er(c) == Pe;
        }
        function UB(c) {
          return ka(c) && vr(c) == Ee;
        }
        function $B(c) {
          return ka(c) && hh(c.length) && !!Mn[Er(c)];
        }
        function w1(c) {
          return typeof c == "function" ? c : c == null ? Kr : typeof c == "object" ? Qt(c) ? C1(c[0], c[1]) : S1(c) : Hk(c);
        }
        function Nv(c) {
          if (!Pd(c))
            return zD(c);
          var m = [];
          for (var k in In(c))
            Ue.call(c, k) && k != "constructor" && m.push(k);
          return m;
        }
        function qB(c) {
          if (!ha(c))
            return C2(c);
          var m = Pd(c), k = [];
          for (var R in c)
            R == "constructor" && (m || !Ue.call(c, R)) || k.push(R);
          return k;
        }
        function Uv(c, m) {
          return c < m;
        }
        function k1(c, m) {
          var k = -1, R = Wr(c) ? Ke(c.length) : [];
          return ys(c, function(J, ue, be) {
            R[++k] = m(J, ue, be);
          }), R;
        }
        function S1(c) {
          var m = tg(c);
          return m.length == 1 && m[0][2] ? ak(m[0][0], m[0][1]) : function(k) {
            return k === c || Fv(k, c, m);
          };
        }
        function C1(c, m) {
          return ag(c) && nk(m) ? ak(ro(c), m) : function(k) {
            var R = mg(k, c);
            return R === n && R === m ? hg(k, c) : Td(m, R, v | w);
          };
        }
        function Xm(c, m, k, R, J) {
          c !== m && Vv(m, function(ue, be) {
            if (J || (J = new Vi()), ha(ue))
              HB(c, m, be, k, Xm, R, J);
            else {
              var De = R ? R(ig(c, be), ue, be + "", c, m, J) : n;
              De === n && (De = ue), Dv(c, be, De);
            }
          }, jr);
        }
        function HB(c, m, k, R, J, ue, be) {
          var De = ig(c, k), Ne = ig(m, k), tt = be.get(Ne);
          if (tt) {
            Dv(c, k, tt);
            return;
          }
          var at = ue ? ue(De, Ne, k + "", c, m, be) : n, ct = at === n;
          if (ct) {
            var yt = Qt(Ne), Et = !yt && Ss(Ne), Nt = !yt && !Et && qc(Ne);
            at = Ne, yt || Et || Nt ? Qt(De) ? at = De : Ia(De) ? at = zr(De) : Et ? (ct = !1, at = R1(Ne, !0)) : Nt ? (ct = !1, at = L1(Ne, !0)) : at = [] : Dd(Ne) || Cl(Ne) ? (at = De, Cl(De) ? at = Bk(De) : (!ha(De) || Ro(De)) && (at = tk(Ne))) : ct = !1;
          }
          ct && (be.set(Ne, at), J(at, Ne, R, ue, be), be.delete(Ne)), Dv(c, k, at);
        }
        function A1(c, m) {
          var k = c.length;
          if (k)
            return m += m < 0 ? k : 0, Mo(m, k) ? c[m] : n;
        }
        function x1(c, m, k) {
          m.length ? m = Un(m, function(ue) {
            return Qt(ue) ? function(be) {
              return wl(be, ue.length === 1 ? ue[0] : ue);
            } : ue;
          }) : m = [Kr];
          var R = -1;
          m = Un(m, Ir(Mt()));
          var J = k1(c, function(ue, be, De) {
            var Ne = Un(m, function(tt) {
              return tt(ue);
            });
            return { criteria: Ne, index: ++R, value: ue };
          });
          return Rm(J, function(ue, be) {
            return n2(ue, be, k);
          });
        }
        function zB(c, m) {
          return T1(c, m, function(k, R) {
            return hg(c, R);
          });
        }
        function T1(c, m, k) {
          for (var R = -1, J = m.length, ue = {}; ++R < J; ) {
            var be = m[R], De = wl(c, be);
            k(De, be) && Id(ue, ws(be, c), De);
          }
          return ue;
        }
        function WB(c) {
          return function(m) {
            return wl(m, c);
          };
        }
        function $v(c, m, k, R) {
          var J = R ? yv : vi, ue = -1, be = m.length, De = c;
          for (c === m && (m = zr(m)), k && (De = Un(c, Ir(k))); ++ue < be; )
            for (var Ne = 0, tt = m[ue], at = k ? k(tt) : tt; (Ne = J(De, at, Ne, R)) > -1; )
              De !== c && Ln.call(De, Ne, 1), Ln.call(c, Ne, 1);
          return c;
        }
        function I1(c, m) {
          for (var k = c ? m.length : 0, R = k - 1; k--; ) {
            var J = m[k];
            if (k == R || J !== ue) {
              var ue = J;
              Mo(J) ? Ln.call(c, J, 1) : Wv(c, J);
            }
          }
          return c;
        }
        function qv(c, m) {
          return c + Wm(l1() * (m - c + 1));
        }
        function jB(c, m, k, R) {
          for (var J = -1, ue = Ka(zm((m - c) / (k || 1)), 0), be = Ke(ue); ue--; )
            be[R ? ue : ++J] = c, c += k;
          return be;
        }
        function Hv(c, m) {
          var k = "";
          if (!c || m < 1 || m > de)
            return k;
          do
            m % 2 && (k += c), m = Wm(m / 2), m && (c += c);
          while (m);
          return k;
        }
        function tn(c, m) {
          return og(rk(c, m, Kr), c + "");
        }
        function KB(c) {
          return d1(Hc(c));
        }
        function YB(c, m) {
          var k = Hc(c);
          return lh(k, bl(m, 0, k.length));
        }
        function Id(c, m, k, R) {
          if (!ha(c))
            return c;
          m = ws(m, c);
          for (var J = -1, ue = m.length, be = ue - 1, De = c; De != null && ++J < ue; ) {
            var Ne = ro(m[J]), tt = k;
            if (Ne === "__proto__" || Ne === "constructor" || Ne === "prototype")
              return c;
            if (J != be) {
              var at = De[Ne];
              tt = R ? R(at, Ne, De) : n, tt === n && (tt = ha(at) ? at : Mo(m[J + 1]) ? [] : {});
            }
            Cd(De, Ne, tt), De = De[Ne];
          }
          return c;
        }
        var E1 = jm ? function(c, m) {
          return jm.set(c, m), c;
        } : Kr, GB = vl ? function(c, m) {
          return vl(c, "toString", {
            configurable: !0,
            enumerable: !1,
            value: pg(m),
            writable: !0
          });
        } : Kr;
        function QB(c) {
          return lh(Hc(c));
        }
        function Si(c, m, k) {
          var R = -1, J = c.length;
          m < 0 && (m = -m > J ? 0 : J + m), k = k > J ? J : k, k < 0 && (k += J), J = m > k ? 0 : k - m >>> 0, m >>>= 0;
          for (var ue = Ke(J); ++R < J; )
            ue[R] = c[R + m];
          return ue;
        }
        function JB(c, m) {
          var k;
          return ys(c, function(R, J, ue) {
            return k = m(R, J, ue), !k;
          }), !!k;
        }
        function Zm(c, m, k) {
          var R = 0, J = c == null ? R : c.length;
          if (typeof m == "number" && m === m && J <= X) {
            for (; R < J; ) {
              var ue = R + J >>> 1, be = c[ue];
              be !== null && !ti(be) && (k ? be <= m : be < m) ? R = ue + 1 : J = ue;
            }
            return J;
          }
          return zv(c, m, Kr, k);
        }
        function zv(c, m, k, R) {
          var J = 0, ue = c == null ? 0 : c.length;
          if (ue === 0)
            return 0;
          m = k(m);
          for (var be = m !== m, De = m === null, Ne = ti(m), tt = m === n; J < ue; ) {
            var at = Wm((J + ue) / 2), ct = k(c[at]), yt = ct !== n, Et = ct === null, Nt = ct === ct, Zt = ti(ct);
            if (be)
              var Ut = R || Nt;
            else tt ? Ut = Nt && (R || yt) : De ? Ut = Nt && yt && (R || !Et) : Ne ? Ut = Nt && yt && !Et && (R || !Zt) : Et || Zt ? Ut = !1 : Ut = R ? ct <= m : ct < m;
            Ut ? J = at + 1 : ue = at;
          }
          return pr(ue, se);
        }
        function P1(c, m) {
          for (var k = -1, R = c.length, J = 0, ue = []; ++k < R; ) {
            var be = c[k], De = m ? m(be) : be;
            if (!k || !Mi(De, Ne)) {
              var Ne = De;
              ue[J++] = be === 0 ? 0 : be;
            }
          }
          return ue;
        }
        function O1(c) {
          return typeof c == "number" ? c : ti(c) ? F : +c;
        }
        function ei(c) {
          if (typeof c == "string")
            return c;
          if (Qt(c))
            return Un(c, ei) + "";
          if (ti(c))
            return c1 ? c1.call(c) : "";
          var m = c + "";
          return m == "0" && 1 / c == -te ? "-0" : m;
        }
        function bs(c, m, k) {
          var R = -1, J = Pc, ue = c.length, be = !0, De = [], Ne = De;
          if (k)
            be = !1, J = fd;
          else if (ue >= r) {
            var tt = m ? null : l2(c);
            if (tt)
              return Mc(tt);
            be = !1, J = _l, Ne = new yl();
          } else
            Ne = m ? [] : De;
          e:
            for (; ++R < ue; ) {
              var at = c[R], ct = m ? m(at) : at;
              if (at = k || at !== 0 ? at : 0, be && ct === ct) {
                for (var yt = Ne.length; yt--; )
                  if (Ne[yt] === ct)
                    continue e;
                m && Ne.push(ct), De.push(at);
              } else J(Ne, ct, k) || (Ne !== De && Ne.push(ct), De.push(at));
            }
          return De;
        }
        function Wv(c, m) {
          return m = ws(m, c), c = ik(c, m), c == null || delete c[ro(Ci(m))];
        }
        function D1(c, m, k, R) {
          return Id(c, m, k(wl(c, m)), R);
        }
        function eh(c, m, k, R) {
          for (var J = c.length, ue = R ? J : -1; (R ? ue-- : ++ue < J) && m(c[ue], ue, c); )
            ;
          return k ? Si(c, R ? 0 : ue, R ? ue + 1 : J) : Si(c, R ? ue + 1 : 0, R ? J : ue);
        }
        function B1(c, m) {
          var k = c;
          return k instanceof dn && (k = k.value()), md(m, function(R, J) {
            return J.func.apply(J.thisArg, to([R], J.args));
          }, k);
        }
        function jv(c, m, k) {
          var R = c.length;
          if (R < 2)
            return R ? bs(c[0]) : [];
          for (var J = -1, ue = Ke(R); ++J < R; )
            for (var be = c[J], De = -1; ++De < R; )
              De != J && (ue[J] = Ad(ue[J] || be, c[De], m, k));
          return bs(or(ue, 1), m, k);
        }
        function V1(c, m, k) {
          for (var R = -1, J = c.length, ue = m.length, be = {}; ++R < J; ) {
            var De = R < ue ? m[R] : n;
            k(be, c[R], De);
          }
          return be;
        }
        function Kv(c) {
          return Ia(c) ? c : [];
        }
        function Yv(c) {
          return typeof c == "function" ? c : Kr;
        }
        function ws(c, m) {
          return Qt(c) ? c : ag(c, m) ? [c] : ck(Sn(c));
        }
        var XB = tn;
        function ks(c, m, k) {
          var R = c.length;
          return k = k === n ? R : k, !m && k >= R ? c : Si(c, m, k);
        }
        var M1 = Hm || function(c) {
          return ja.clearTimeout(c);
        };
        function R1(c, m) {
          if (m)
            return c.slice();
          var k = c.length, R = kn ? kn(k) : new c.constructor(k);
          return c.copy(R), R;
        }
        function Gv(c) {
          var m = new c.constructor(c.byteLength);
          return new Rn(m).set(new Rn(c)), m;
        }
        function ZB(c, m) {
          var k = m ? Gv(c.buffer) : c.buffer;
          return new c.constructor(k, c.byteOffset, c.byteLength);
        }
        function e2(c) {
          var m = new c.constructor(c.source, cm.exec(c));
          return m.lastIndex = c.lastIndex, m;
        }
        function t2(c) {
          return Sd ? In(Sd.call(c)) : {};
        }
        function L1(c, m) {
          var k = m ? Gv(c.buffer) : c.buffer;
          return new c.constructor(k, c.byteOffset, c.length);
        }
        function F1(c, m) {
          if (c !== m) {
            var k = c !== n, R = c === null, J = c === c, ue = ti(c), be = m !== n, De = m === null, Ne = m === m, tt = ti(m);
            if (!De && !tt && !ue && c > m || ue && be && Ne && !De && !tt || R && be && Ne || !k && Ne || !J)
              return 1;
            if (!R && !ue && !tt && c < m || tt && k && J && !R && !ue || De && k && J || !be && J || !Ne)
              return -1;
          }
          return 0;
        }
        function n2(c, m, k) {
          for (var R = -1, J = c.criteria, ue = m.criteria, be = J.length, De = k.length; ++R < be; ) {
            var Ne = F1(J[R], ue[R]);
            if (Ne) {
              if (R >= De)
                return Ne;
              var tt = k[R];
              return Ne * (tt == "desc" ? -1 : 1);
            }
          }
          return c.index - m.index;
        }
        function N1(c, m, k, R) {
          for (var J = -1, ue = c.length, be = k.length, De = -1, Ne = m.length, tt = Ka(ue - be, 0), at = Ke(Ne + tt), ct = !R; ++De < Ne; )
            at[De] = m[De];
          for (; ++J < be; )
            (ct || J < ue) && (at[k[J]] = c[J]);
          for (; tt--; )
            at[De++] = c[J++];
          return at;
        }
        function U1(c, m, k, R) {
          for (var J = -1, ue = c.length, be = -1, De = k.length, Ne = -1, tt = m.length, at = Ka(ue - De, 0), ct = Ke(at + tt), yt = !R; ++J < at; )
            ct[J] = c[J];
          for (var Et = J; ++Ne < tt; )
            ct[Et + Ne] = m[Ne];
          for (; ++be < De; )
            (yt || J < ue) && (ct[Et + k[be]] = c[J++]);
          return ct;
        }
        function zr(c, m) {
          var k = -1, R = c.length;
          for (m || (m = Ke(R)); ++k < R; )
            m[k] = c[k];
          return m;
        }
        function ao(c, m, k, R) {
          var J = !k;
          k || (k = {});
          for (var ue = -1, be = m.length; ++ue < be; ) {
            var De = m[ue], Ne = R ? R(k[De], c[De], De, k, c) : n;
            Ne === n && (Ne = c[De]), J ? Do(k, De, Ne) : Cd(k, De, Ne);
          }
          return k;
        }
        function a2(c, m) {
          return ao(c, ng(c), m);
        }
        function r2(c, m) {
          return ao(c, Z1(c), m);
        }
        function th(c, m) {
          return function(k, R) {
            var J = Qt(k) ? Om : xB, ue = m ? m() : {};
            return J(k, c, Mt(R, 2), ue);
          };
        }
        function Nc(c) {
          return tn(function(m, k) {
            var R = -1, J = k.length, ue = J > 1 ? k[J - 1] : n, be = J > 2 ? k[2] : n;
            for (ue = c.length > 3 && typeof ue == "function" ? (J--, ue) : n, be && Pr(k[0], k[1], be) && (ue = J < 3 ? n : ue, J = 1), m = In(m); ++R < J; ) {
              var De = k[R];
              De && c(m, De, R, ue);
            }
            return m;
          });
        }
        function $1(c, m) {
          return function(k, R) {
            if (k == null)
              return k;
            if (!Wr(k))
              return c(k, R);
            for (var J = k.length, ue = m ? J : -1, be = In(k); (m ? ue-- : ++ue < J) && R(be[ue], ue, be) !== !1; )
              ;
            return k;
          };
        }
        function q1(c) {
          return function(m, k, R) {
            for (var J = -1, ue = In(m), be = R(m), De = be.length; De--; ) {
              var Ne = be[c ? De : ++J];
              if (k(ue[Ne], Ne, ue) === !1)
                break;
            }
            return m;
          };
        }
        function i2(c, m, k) {
          var R = m & b, J = Ed(c);
          function ue() {
            var be = this && this !== ja && this instanceof ue ? J : c;
            return be.apply(R ? k : this, arguments);
          }
          return ue;
        }
        function H1(c) {
          return function(m) {
            m = Sn(m);
            var k = Tn(m) ? Zr(m) : n, R = k ? k[0] : m.charAt(0), J = k ? ks(k, 1).join("") : m.slice(1);
            return R[c]() + J;
          };
        }
        function Uc(c) {
          return function(m) {
            return md($k(Uk(m).replace(sd, "")), c, "");
          };
        }
        function Ed(c) {
          return function() {
            var m = arguments;
            switch (m.length) {
              case 0:
                return new c();
              case 1:
                return new c(m[0]);
              case 2:
                return new c(m[0], m[1]);
              case 3:
                return new c(m[0], m[1], m[2]);
              case 4:
                return new c(m[0], m[1], m[2], m[3]);
              case 5:
                return new c(m[0], m[1], m[2], m[3], m[4]);
              case 6:
                return new c(m[0], m[1], m[2], m[3], m[4], m[5]);
              case 7:
                return new c(m[0], m[1], m[2], m[3], m[4], m[5], m[6]);
            }
            var k = Fc(c.prototype), R = c.apply(k, m);
            return ha(R) ? R : k;
          };
        }
        function o2(c, m, k) {
          var R = Ed(c);
          function J() {
            for (var ue = arguments.length, be = Ke(ue), De = ue, Ne = $c(J); De--; )
              be[De] = arguments[De];
            var tt = ue < 3 && be[0] !== Ne && be[ue - 1] !== Ne ? [] : Bi(be, Ne);
            if (ue -= tt.length, ue < k)
              return Y1(
                c,
                m,
                nh,
                J.placeholder,
                n,
                be,
                tt,
                n,
                n,
                k - ue
              );
            var at = this && this !== ja && this instanceof J ? R : c;
            return Tr(at, this, be);
          }
          return J;
        }
        function z1(c) {
          return function(m, k, R) {
            var J = In(m);
            if (!Wr(m)) {
              var ue = Mt(k, 3);
              m = Xa(m), k = function(De) {
                return ue(J[De], De, J);
              };
            }
            var be = c(m, k, R);
            return be > -1 ? J[ue ? m[be] : be] : n;
          };
        }
        function W1(c) {
          return Vo(function(m) {
            var k = m.length, R = k, J = wi.prototype.thru;
            for (c && m.reverse(); R--; ) {
              var ue = m[R];
              if (typeof ue != "function")
                throw new L(o);
              if (J && !be && oh(ue) == "wrapper")
                var be = new wi([], !0);
            }
            for (R = be ? R : k; ++R < k; ) {
              ue = m[R];
              var De = oh(ue), Ne = De == "wrapper" ? eg(ue) : n;
              Ne && rg(Ne[0]) && Ne[1] == (P | S | C | O) && !Ne[4].length && Ne[9] == 1 ? be = be[oh(Ne[0])].apply(be, Ne[3]) : be = ue.length == 1 && rg(ue) ? be[De]() : be.thru(ue);
            }
            return function() {
              var tt = arguments, at = tt[0];
              if (be && tt.length == 1 && Qt(at))
                return be.plant(at).value();
              for (var ct = 0, yt = k ? m[ct].apply(this, tt) : at; ++ct < k; )
                yt = m[ct].call(this, yt);
              return yt;
            };
          });
        }
        function nh(c, m, k, R, J, ue, be, De, Ne, tt) {
          var at = m & P, ct = m & b, yt = m & p, Et = m & (S | E), Nt = m & T, Zt = yt ? n : Ed(c);
          function Ut() {
            for (var ln = arguments.length, hn = Ke(ln), ni = ln; ni--; )
              hn[ni] = arguments[ni];
            if (Et)
              var Or = $c(Ut), ai = gd(hn, Or);
            if (R && (hn = N1(hn, R, J, Et)), ue && (hn = U1(hn, ue, be, Et)), ln -= ai, Et && ln < tt) {
              var Ea = Bi(hn, Or);
              return Y1(
                c,
                m,
                nh,
                Ut.placeholder,
                k,
                hn,
                Ea,
                De,
                Ne,
                tt - ln
              );
            }
            var Ri = ct ? k : this, Fo = yt ? Ri[c] : c;
            return ln = hn.length, De ? hn = x2(hn, De) : Nt && ln > 1 && hn.reverse(), at && Ne < ln && (hn.length = Ne), this && this !== ja && this instanceof Ut && (Fo = Zt || Ed(Fo)), Fo.apply(Ri, hn);
          }
          return Ut;
        }
        function j1(c, m) {
          return function(k, R) {
            return VB(k, c, m(R), {});
          };
        }
        function ah(c, m) {
          return function(k, R) {
            var J;
            if (k === n && R === n)
              return m;
            if (k !== n && (J = k), R !== n) {
              if (J === n)
                return R;
              typeof k == "string" || typeof R == "string" ? (k = ei(k), R = ei(R)) : (k = O1(k), R = O1(R)), J = c(k, R);
            }
            return J;
          };
        }
        function Qv(c) {
          return Vo(function(m) {
            return m = Un(m, Ir(Mt())), tn(function(k) {
              var R = this;
              return c(m, function(J) {
                return Tr(J, R, k);
              });
            });
          });
        }
        function rh(c, m) {
          m = m === n ? " " : ei(m);
          var k = m.length;
          if (k < 2)
            return k ? Hv(m, c) : m;
          var R = Hv(m, zm(c / ps(m)));
          return Tn(m) ? ks(Zr(R), 0, c).join("") : R.slice(0, c);
        }
        function s2(c, m, k, R) {
          var J = m & b, ue = Ed(c);
          function be() {
            for (var De = -1, Ne = arguments.length, tt = -1, at = R.length, ct = Ke(at + Ne), yt = this && this !== ja && this instanceof be ? ue : c; ++tt < at; )
              ct[tt] = R[tt];
            for (; Ne--; )
              ct[tt++] = arguments[++De];
            return Tr(yt, J ? k : this, ct);
          }
          return be;
        }
        function K1(c) {
          return function(m, k, R) {
            return R && typeof R != "number" && Pr(m, k, R) && (k = R = n), m = Lo(m), k === n ? (k = m, m = 0) : k = Lo(k), R = R === n ? m < k ? 1 : -1 : Lo(R), jB(m, k, R, c);
          };
        }
        function ih(c) {
          return function(m, k) {
            return typeof m == "string" && typeof k == "string" || (m = Ai(m), k = Ai(k)), c(m, k);
          };
        }
        function Y1(c, m, k, R, J, ue, be, De, Ne, tt) {
          var at = m & S, ct = at ? be : n, yt = at ? n : be, Et = at ? ue : n, Nt = at ? n : ue;
          m |= at ? C : D, m &= ~(at ? D : C), m & y || (m &= -4);
          var Zt = [
            c,
            m,
            J,
            Et,
            ct,
            Nt,
            yt,
            De,
            Ne,
            tt
          ], Ut = k.apply(n, Zt);
          return rg(c) && ok(Ut, Zt), Ut.placeholder = R, sk(Ut, c, m);
        }
        function Jv(c) {
          var m = Ta[c];
          return function(k, R) {
            if (k = Ai(k), R = R == null ? 0 : pr(Xt(R), 292), R && s1(k)) {
              var J = (Sn(k) + "e").split("e"), ue = m(J[0] + "e" + (+J[1] + R));
              return J = (Sn(ue) + "e").split("e"), +(J[0] + "e" + (+J[1] - R));
            }
            return m(k);
          };
        }
        var l2 = Rc && 1 / Mc(new Rc([, -0]))[1] == te ? function(c) {
          return new Rc(c);
        } : yg;
        function G1(c) {
          return function(m) {
            var k = vr(m);
            return k == le ? Vc(m) : k == Ee ? wv(m) : bv(m, c(m));
          };
        }
        function Bo(c, m, k, R, J, ue, be, De) {
          var Ne = m & p;
          if (!Ne && typeof c != "function")
            throw new L(o);
          var tt = R ? R.length : 0;
          if (tt || (m &= -97, R = J = n), be = be === n ? be : Ka(Xt(be), 0), De = De === n ? De : Xt(De), tt -= J ? J.length : 0, m & D) {
            var at = R, ct = J;
            R = J = n;
          }
          var yt = Ne ? n : eg(c), Et = [
            c,
            m,
            k,
            R,
            J,
            at,
            ct,
            ue,
            be,
            De
          ];
          if (yt && S2(Et, yt), c = Et[0], m = Et[1], k = Et[2], R = Et[3], J = Et[4], De = Et[9] = Et[9] === n ? Ne ? 0 : c.length : Ka(Et[9] - tt, 0), !De && m & (S | E) && (m &= -25), !m || m == b)
            var Nt = i2(c, m, k);
          else m == S || m == E ? Nt = o2(c, m, De) : (m == C || m == (b | C)) && !J.length ? Nt = s2(c, m, k, R) : Nt = nh.apply(n, Et);
          var Zt = yt ? E1 : ok;
          return sk(Zt(Nt, Et), c, m);
        }
        function Q1(c, m, k, R) {
          return c === n || Mi(c, me[k]) && !Ue.call(R, k) ? m : c;
        }
        function J1(c, m, k, R, J, ue) {
          return ha(c) && ha(m) && (ue.set(m, c), Xm(c, m, n, J1, ue), ue.delete(m)), c;
        }
        function c2(c) {
          return Dd(c) ? n : c;
        }
        function X1(c, m, k, R, J, ue) {
          var be = k & v, De = c.length, Ne = m.length;
          if (De != Ne && !(be && Ne > De))
            return !1;
          var tt = ue.get(c), at = ue.get(m);
          if (tt && at)
            return tt == m && at == c;
          var ct = -1, yt = !0, Et = k & w ? new yl() : n;
          for (ue.set(c, m), ue.set(m, c); ++ct < De; ) {
            var Nt = c[ct], Zt = m[ct];
            if (R)
              var Ut = be ? R(Zt, Nt, ct, m, c, ue) : R(Nt, Zt, ct, c, m, ue);
            if (Ut !== n) {
              if (Ut)
                continue;
              yt = !1;
              break;
            }
            if (Et) {
              if (!hd(m, function(ln, hn) {
                if (!_l(Et, hn) && (Nt === ln || J(Nt, ln, k, R, ue)))
                  return Et.push(hn);
              })) {
                yt = !1;
                break;
              }
            } else if (!(Nt === Zt || J(Nt, Zt, k, R, ue))) {
              yt = !1;
              break;
            }
          }
          return ue.delete(c), ue.delete(m), yt;
        }
        function u2(c, m, k, R, J, ue, be) {
          switch (k) {
            case rt:
              if (c.byteLength != m.byteLength || c.byteOffset != m.byteOffset)
                return !1;
              c = c.buffer, m = m.buffer;
            case It:
              return !(c.byteLength != m.byteLength || !ue(new Rn(c), new Rn(m)));
            case ke:
            case Me:
            case Y:
              return Mi(+c, +m);
            case ce:
              return c.name == m.name && c.message == m.message;
            case Pe:
            case Je:
              return c == m + "";
            case le:
              var De = Vc;
            case Ee:
              var Ne = R & v;
              if (De || (De = Mc), c.size != m.size && !Ne)
                return !1;
              var tt = be.get(c);
              if (tt)
                return tt == m;
              R |= w, be.set(c, m);
              var at = X1(De(c), De(m), R, J, ue, be);
              return be.delete(c), at;
            case _e:
              if (Sd)
                return Sd.call(c) == Sd.call(m);
          }
          return !1;
        }
        function d2(c, m, k, R, J, ue) {
          var be = k & v, De = Xv(c), Ne = De.length, tt = Xv(m), at = tt.length;
          if (Ne != at && !be)
            return !1;
          for (var ct = Ne; ct--; ) {
            var yt = De[ct];
            if (!(be ? yt in m : Ue.call(m, yt)))
              return !1;
          }
          var Et = ue.get(c), Nt = ue.get(m);
          if (Et && Nt)
            return Et == m && Nt == c;
          var Zt = !0;
          ue.set(c, m), ue.set(m, c);
          for (var Ut = be; ++ct < Ne; ) {
            yt = De[ct];
            var ln = c[yt], hn = m[yt];
            if (R)
              var ni = be ? R(hn, ln, yt, m, c, ue) : R(ln, hn, yt, c, m, ue);
            if (!(ni === n ? ln === hn || J(ln, hn, k, R, ue) : ni)) {
              Zt = !1;
              break;
            }
            Ut || (Ut = yt == "constructor");
          }
          if (Zt && !Ut) {
            var Or = c.constructor, ai = m.constructor;
            Or != ai && "constructor" in c && "constructor" in m && !(typeof Or == "function" && Or instanceof Or && typeof ai == "function" && ai instanceof ai) && (Zt = !1);
          }
          return ue.delete(c), ue.delete(m), Zt;
        }
        function Vo(c) {
          return og(rk(c, n, mk), c + "");
        }
        function Xv(c) {
          return g1(c, Xa, ng);
        }
        function Zv(c) {
          return g1(c, jr, Z1);
        }
        var eg = jm ? function(c) {
          return jm.get(c);
        } : yg;
        function oh(c) {
          for (var m = c.name + "", k = Lc[m], R = Ue.call(Lc, m) ? k.length : 0; R--; ) {
            var J = k[R], ue = J.func;
            if (ue == null || ue == c)
              return J.name;
          }
          return m;
        }
        function $c(c) {
          var m = Ue.call(oe, "placeholder") ? oe : c;
          return m.placeholder;
        }
        function Mt() {
          var c = oe.iteratee || vg;
          return c = c === vg ? w1 : c, arguments.length ? c(arguments[0], arguments[1]) : c;
        }
        function sh(c, m) {
          var k = c.__data__;
          return y2(m) ? k[typeof m == "string" ? "string" : "hash"] : k.map;
        }
        function tg(c) {
          for (var m = Xa(c), k = m.length; k--; ) {
            var R = m[k], J = c[R];
            m[k] = [R, J, nk(J)];
          }
          return m;
        }
        function kl(c, m) {
          var k = aa(c, m);
          return b1(k) ? k : n;
        }
        function f2(c) {
          var m = Ue.call(c, bi), k = c[bi];
          try {
            c[bi] = n;
            var R = !0;
          } catch {
          }
          var J = mt.call(c);
          return R && (m ? c[bi] = k : delete c[bi]), J;
        }
        var ng = Ev ? function(c) {
          return c == null ? [] : (c = In(c), eo(Ev(c), function(m) {
            return xt.call(c, m);
          }));
        } : bg, Z1 = Ev ? function(c) {
          for (var m = []; c; )
            to(m, ng(c)), c = ma(c);
          return m;
        } : bg, vr = Er;
        (Pv && vr(new Pv(new ArrayBuffer(1))) != rt || bd && vr(new bd()) != le || Ov && vr(Ov.resolve()) != ie || Rc && vr(new Rc()) != Ee || wd && vr(new wd()) != Ze) && (vr = function(c) {
          var m = Er(c), k = m == Te ? c.constructor : n, R = k ? Sl(k) : "";
          if (R)
            switch (R) {
              case YD:
                return rt;
              case GD:
                return le;
              case QD:
                return ie;
              case JD:
                return Ee;
              case XD:
                return Ze;
            }
          return m;
        });
        function m2(c, m, k) {
          for (var R = -1, J = k.length; ++R < J; ) {
            var ue = k[R], be = ue.size;
            switch (ue.type) {
              case "drop":
                c += be;
                break;
              case "dropRight":
                m -= be;
                break;
              case "take":
                m = pr(m, c + be);
                break;
              case "takeRight":
                c = Ka(c, m - be);
                break;
            }
          }
          return { start: c, end: m };
        }
        function h2(c) {
          var m = c.match(ll);
          return m ? m[1].split(td) : [];
        }
        function ek(c, m, k) {
          m = ws(m, c);
          for (var R = -1, J = m.length, ue = !1; ++R < J; ) {
            var be = ro(m[R]);
            if (!(ue = c != null && k(c, be)))
              break;
            c = c[be];
          }
          return ue || ++R != J ? ue : (J = c == null ? 0 : c.length, !!J && hh(J) && Mo(be, J) && (Qt(c) || Cl(c)));
        }
        function _2(c) {
          var m = c.length, k = new c.constructor(m);
          return m && typeof c[0] == "string" && Ue.call(c, "index") && (k.index = c.index, k.input = c.input), k;
        }
        function tk(c) {
          return typeof c.constructor == "function" && !Pd(c) ? Fc(ma(c)) : {};
        }
        function p2(c, m, k) {
          var R = c.constructor;
          switch (m) {
            case It:
              return Gv(c);
            case ke:
            case Me:
              return new R(+c);
            case rt:
              return ZB(c, k);
            case Dt:
            case en:
            case zn:
            case ta:
            case Na:
            case ba:
            case Wn:
            case Vn:
            case Ja:
              return L1(c, k);
            case le:
              return new R();
            case Y:
            case Je:
              return new R(c);
            case Pe:
              return e2(c);
            case Ee:
              return new R();
            case _e:
              return t2(c);
          }
        }
        function v2(c, m) {
          var k = m.length;
          if (!k)
            return c;
          var R = k - 1;
          return m[R] = (k > 1 ? "& " : "") + m[R], m = m.join(k > 2 ? ", " : " "), c.replace($p, `{
/* [wrapped with ` + m + `] */
`);
        }
        function g2(c) {
          return Qt(c) || Cl(c) || !!(wa && c && c[wa]);
        }
        function Mo(c, m) {
          var k = typeof c;
          return m = m ?? de, !!m && (k == "number" || k != "symbol" && jp.test(c)) && c > -1 && c % 1 == 0 && c < m;
        }
        function Pr(c, m, k) {
          if (!ha(k))
            return !1;
          var R = typeof m;
          return (R == "number" ? Wr(k) && Mo(m, k.length) : R == "string" && m in k) ? Mi(k[m], c) : !1;
        }
        function ag(c, m) {
          if (Qt(c))
            return !1;
          var k = typeof c;
          return k == "number" || k == "symbol" || k == "boolean" || c == null || ti(c) ? !0 : Qi.test(c) || !Wa.test(c) || m != null && c in In(m);
        }
        function y2(c) {
          var m = typeof c;
          return m == "string" || m == "number" || m == "symbol" || m == "boolean" ? c !== "__proto__" : c === null;
        }
        function rg(c) {
          var m = oh(c), k = oe[m];
          if (typeof k != "function" || !(m in dn.prototype))
            return !1;
          if (c === k)
            return !0;
          var R = eg(k);
          return !!R && c === R[0];
        }
        function b2(c) {
          return !!lt && lt in c;
        }
        var w2 = Ve ? Ro : wg;
        function Pd(c) {
          var m = c && c.constructor, k = typeof m == "function" && m.prototype || me;
          return c === k;
        }
        function nk(c) {
          return c === c && !ha(c);
        }
        function ak(c, m) {
          return function(k) {
            return k == null ? !1 : k[c] === m && (m !== n || c in In(k));
          };
        }
        function k2(c) {
          var m = fh(c, function(R) {
            return k.size === d && k.clear(), R;
          }), k = m.cache;
          return m;
        }
        function S2(c, m) {
          var k = c[1], R = m[1], J = k | R, ue = J < (b | p | P), be = R == P && k == S || R == P && k == O && c[7].length <= m[8] || R == (P | O) && m[7].length <= m[8] && k == S;
          if (!(ue || be))
            return c;
          R & b && (c[2] = m[2], J |= k & b ? 0 : y);
          var De = m[3];
          if (De) {
            var Ne = c[3];
            c[3] = Ne ? N1(Ne, De, m[4]) : De, c[4] = Ne ? Bi(c[3], u) : m[4];
          }
          return De = m[5], De && (Ne = c[5], c[5] = Ne ? U1(Ne, De, m[6]) : De, c[6] = Ne ? Bi(c[5], u) : m[6]), De = m[7], De && (c[7] = De), R & P && (c[8] = c[8] == null ? m[8] : pr(c[8], m[8])), c[9] == null && (c[9] = m[9]), c[0] = m[0], c[1] = J, c;
        }
        function C2(c) {
          var m = [];
          if (c != null)
            for (var k in In(c))
              m.push(k);
          return m;
        }
        function A2(c) {
          return mt.call(c);
        }
        function rk(c, m, k) {
          return m = Ka(m === n ? c.length - 1 : m, 0), function() {
            for (var R = arguments, J = -1, ue = Ka(R.length - m, 0), be = Ke(ue); ++J < ue; )
              be[J] = R[m + J];
            J = -1;
            for (var De = Ke(m + 1); ++J < m; )
              De[J] = R[J];
            return De[m] = k(be), Tr(c, this, De);
          };
        }
        function ik(c, m) {
          return m.length < 2 ? c : wl(c, Si(m, 0, -1));
        }
        function x2(c, m) {
          for (var k = c.length, R = pr(m.length, k), J = zr(c); R--; ) {
            var ue = m[R];
            c[R] = Mo(ue, k) ? J[ue] : n;
          }
          return c;
        }
        function ig(c, m) {
          if (!(m === "constructor" && typeof c[m] == "function") && m != "__proto__")
            return c[m];
        }
        var ok = lk(E1), Od = $D || function(c, m) {
          return ja.setTimeout(c, m);
        }, og = lk(GB);
        function sk(c, m, k) {
          var R = m + "";
          return og(c, v2(R, T2(h2(R), k)));
        }
        function lk(c) {
          var m = 0, k = 0;
          return function() {
            var R = WD(), J = B - (R - k);
            if (k = R, J > 0) {
              if (++m >= M)
                return arguments[0];
            } else
              m = 0;
            return c.apply(n, arguments);
          };
        }
        function lh(c, m) {
          var k = -1, R = c.length, J = R - 1;
          for (m = m === n ? R : m; ++k < m; ) {
            var ue = qv(k, J), be = c[ue];
            c[ue] = c[k], c[k] = be;
          }
          return c.length = m, c;
        }
        var ck = k2(function(c) {
          var m = [];
          return c.charCodeAt(0) === 46 && m.push(""), c.replace(sl, function(k, R, J, ue) {
            m.push(J ? ue.replace(Hp, "$1") : R || k);
          }), m;
        });
        function ro(c) {
          if (typeof c == "string" || ti(c))
            return c;
          var m = c + "";
          return m == "0" && 1 / c == -te ? "-0" : m;
        }
        function Sl(c) {
          if (c != null) {
            try {
              return qe.call(c);
            } catch {
            }
            try {
              return c + "";
            } catch {
            }
          }
          return "";
        }
        function T2(c, m) {
          return Hr(he, function(k) {
            var R = "_." + k[0];
            m & k[1] && !Pc(c, R) && c.push(R);
          }), c.sort();
        }
        function uk(c) {
          if (c instanceof dn)
            return c.clone();
          var m = new wi(c.__wrapped__, c.__chain__);
          return m.__actions__ = zr(c.__actions__), m.__index__ = c.__index__, m.__values__ = c.__values__, m;
        }
        function I2(c, m, k) {
          (k ? Pr(c, m, k) : m === n) ? m = 1 : m = Ka(Xt(m), 0);
          var R = c == null ? 0 : c.length;
          if (!R || m < 1)
            return [];
          for (var J = 0, ue = 0, be = Ke(zm(R / m)); J < R; )
            be[ue++] = Si(c, J, J += m);
          return be;
        }
        function E2(c) {
          for (var m = -1, k = c == null ? 0 : c.length, R = 0, J = []; ++m < k; ) {
            var ue = c[m];
            ue && (J[R++] = ue);
          }
          return J;
        }
        function P2() {
          var c = arguments.length;
          if (!c)
            return [];
          for (var m = Ke(c - 1), k = arguments[0], R = c; R--; )
            m[R - 1] = arguments[R];
          return to(Qt(k) ? zr(k) : [k], or(m, 1));
        }
        var O2 = tn(function(c, m) {
          return Ia(c) ? Ad(c, or(m, 1, Ia, !0)) : [];
        }), D2 = tn(function(c, m) {
          var k = Ci(m);
          return Ia(k) && (k = n), Ia(c) ? Ad(c, or(m, 1, Ia, !0), Mt(k, 2)) : [];
        }), B2 = tn(function(c, m) {
          var k = Ci(m);
          return Ia(k) && (k = n), Ia(c) ? Ad(c, or(m, 1, Ia, !0), n, k) : [];
        });
        function V2(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (m = k || m === n ? 1 : Xt(m), Si(c, m < 0 ? 0 : m, R)) : [];
        }
        function M2(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (m = k || m === n ? 1 : Xt(m), m = R - m, Si(c, 0, m < 0 ? 0 : m)) : [];
        }
        function R2(c, m) {
          return c && c.length ? eh(c, Mt(m, 3), !0, !0) : [];
        }
        function L2(c, m) {
          return c && c.length ? eh(c, Mt(m, 3), !0) : [];
        }
        function F2(c, m, k, R) {
          var J = c == null ? 0 : c.length;
          return J ? (k && typeof k != "number" && Pr(c, m, k) && (k = 0, R = J), PB(c, m, k, R)) : [];
        }
        function dk(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var J = k == null ? 0 : Xt(k);
          return J < 0 && (J = Ka(R + J, 0)), Dc(c, Mt(m, 3), J);
        }
        function fk(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var J = R - 1;
          return k !== n && (J = Xt(k), J = k < 0 ? Ka(R + J, 0) : pr(J, R - 1)), Dc(c, Mt(m, 3), J, !0);
        }
        function mk(c) {
          var m = c == null ? 0 : c.length;
          return m ? or(c, 1) : [];
        }
        function N2(c) {
          var m = c == null ? 0 : c.length;
          return m ? or(c, te) : [];
        }
        function U2(c, m) {
          var k = c == null ? 0 : c.length;
          return k ? (m = m === n ? 1 : Xt(m), or(c, m)) : [];
        }
        function $2(c) {
          for (var m = -1, k = c == null ? 0 : c.length, R = {}; ++m < k; ) {
            var J = c[m];
            R[J[0]] = J[1];
          }
          return R;
        }
        function hk(c) {
          return c && c.length ? c[0] : n;
        }
        function q2(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var J = k == null ? 0 : Xt(k);
          return J < 0 && (J = Ka(R + J, 0)), vi(c, m, J);
        }
        function H2(c) {
          var m = c == null ? 0 : c.length;
          return m ? Si(c, 0, -1) : [];
        }
        var z2 = tn(function(c) {
          var m = Un(c, Kv);
          return m.length && m[0] === c[0] ? Lv(m) : [];
        }), W2 = tn(function(c) {
          var m = Ci(c), k = Un(c, Kv);
          return m === Ci(k) ? m = n : k.pop(), k.length && k[0] === c[0] ? Lv(k, Mt(m, 2)) : [];
        }), j2 = tn(function(c) {
          var m = Ci(c), k = Un(c, Kv);
          return m = typeof m == "function" ? m : n, m && k.pop(), k.length && k[0] === c[0] ? Lv(k, n, m) : [];
        });
        function K2(c, m) {
          return c == null ? "" : HD.call(c, m);
        }
        function Ci(c) {
          var m = c == null ? 0 : c.length;
          return m ? c[m - 1] : n;
        }
        function Y2(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var J = R;
          return k !== n && (J = Xt(k), J = J < 0 ? Ka(R + J, 0) : pr(J, R - 1)), m === m ? Sv(c, m, J) : Dc(c, Bm, J, !0);
        }
        function G2(c, m) {
          return c && c.length ? A1(c, Xt(m)) : n;
        }
        var Q2 = tn(_k);
        function _k(c, m) {
          return c && c.length && m && m.length ? $v(c, m) : c;
        }
        function J2(c, m, k) {
          return c && c.length && m && m.length ? $v(c, m, Mt(k, 2)) : c;
        }
        function X2(c, m, k) {
          return c && c.length && m && m.length ? $v(c, m, n, k) : c;
        }
        var Z2 = Vo(function(c, m) {
          var k = c == null ? 0 : c.length, R = Bv(c, m);
          return I1(c, Un(m, function(J) {
            return Mo(J, k) ? +J : J;
          }).sort(F1)), R;
        });
        function eV(c, m) {
          var k = [];
          if (!(c && c.length))
            return k;
          var R = -1, J = [], ue = c.length;
          for (m = Mt(m, 3); ++R < ue; ) {
            var be = c[R];
            m(be, R, c) && (k.push(be), J.push(R));
          }
          return I1(c, J), k;
        }
        function sg(c) {
          return c == null ? c : KD.call(c);
        }
        function tV(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (k && typeof k != "number" && Pr(c, m, k) ? (m = 0, k = R) : (m = m == null ? 0 : Xt(m), k = k === n ? R : Xt(k)), Si(c, m, k)) : [];
        }
        function nV(c, m) {
          return Zm(c, m);
        }
        function aV(c, m, k) {
          return zv(c, m, Mt(k, 2));
        }
        function rV(c, m) {
          var k = c == null ? 0 : c.length;
          if (k) {
            var R = Zm(c, m);
            if (R < k && Mi(c[R], m))
              return R;
          }
          return -1;
        }
        function iV(c, m) {
          return Zm(c, m, !0);
        }
        function oV(c, m, k) {
          return zv(c, m, Mt(k, 2), !0);
        }
        function sV(c, m) {
          var k = c == null ? 0 : c.length;
          if (k) {
            var R = Zm(c, m, !0) - 1;
            if (Mi(c[R], m))
              return R;
          }
          return -1;
        }
        function lV(c) {
          return c && c.length ? P1(c) : [];
        }
        function cV(c, m) {
          return c && c.length ? P1(c, Mt(m, 2)) : [];
        }
        function uV(c) {
          var m = c == null ? 0 : c.length;
          return m ? Si(c, 1, m) : [];
        }
        function dV(c, m, k) {
          return c && c.length ? (m = k || m === n ? 1 : Xt(m), Si(c, 0, m < 0 ? 0 : m)) : [];
        }
        function fV(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (m = k || m === n ? 1 : Xt(m), m = R - m, Si(c, m < 0 ? 0 : m, R)) : [];
        }
        function mV(c, m) {
          return c && c.length ? eh(c, Mt(m, 3), !1, !0) : [];
        }
        function hV(c, m) {
          return c && c.length ? eh(c, Mt(m, 3)) : [];
        }
        var _V = tn(function(c) {
          return bs(or(c, 1, Ia, !0));
        }), pV = tn(function(c) {
          var m = Ci(c);
          return Ia(m) && (m = n), bs(or(c, 1, Ia, !0), Mt(m, 2));
        }), vV = tn(function(c) {
          var m = Ci(c);
          return m = typeof m == "function" ? m : n, bs(or(c, 1, Ia, !0), n, m);
        });
        function gV(c) {
          return c && c.length ? bs(c) : [];
        }
        function yV(c, m) {
          return c && c.length ? bs(c, Mt(m, 2)) : [];
        }
        function bV(c, m) {
          return m = typeof m == "function" ? m : n, c && c.length ? bs(c, n, m) : [];
        }
        function lg(c) {
          if (!(c && c.length))
            return [];
          var m = 0;
          return c = eo(c, function(k) {
            if (Ia(k))
              return m = Ka(k.length, m), !0;
          }), pd(m, function(k) {
            return Un(c, _d(k));
          });
        }
        function pk(c, m) {
          if (!(c && c.length))
            return [];
          var k = lg(c);
          return m == null ? k : Un(k, function(R) {
            return Tr(m, n, R);
          });
        }
        var wV = tn(function(c, m) {
          return Ia(c) ? Ad(c, m) : [];
        }), kV = tn(function(c) {
          return jv(eo(c, Ia));
        }), SV = tn(function(c) {
          var m = Ci(c);
          return Ia(m) && (m = n), jv(eo(c, Ia), Mt(m, 2));
        }), CV = tn(function(c) {
          var m = Ci(c);
          return m = typeof m == "function" ? m : n, jv(eo(c, Ia), n, m);
        }), AV = tn(lg);
        function xV(c, m) {
          return V1(c || [], m || [], Cd);
        }
        function TV(c, m) {
          return V1(c || [], m || [], Id);
        }
        var IV = tn(function(c) {
          var m = c.length, k = m > 1 ? c[m - 1] : n;
          return k = typeof k == "function" ? (c.pop(), k) : n, pk(c, k);
        });
        function vk(c) {
          var m = oe(c);
          return m.__chain__ = !0, m;
        }
        function EV(c, m) {
          return m(c), c;
        }
        function ch(c, m) {
          return m(c);
        }
        var PV = Vo(function(c) {
          var m = c.length, k = m ? c[0] : 0, R = this.__wrapped__, J = function(ue) {
            return Bv(ue, c);
          };
          return m > 1 || this.__actions__.length || !(R instanceof dn) || !Mo(k) ? this.thru(J) : (R = R.slice(k, +k + (m ? 1 : 0)), R.__actions__.push({
            func: ch,
            args: [J],
            thisArg: n
          }), new wi(R, this.__chain__).thru(function(ue) {
            return m && !ue.length && ue.push(n), ue;
          }));
        });
        function OV() {
          return vk(this);
        }
        function DV() {
          return new wi(this.value(), this.__chain__);
        }
        function BV() {
          this.__values__ === n && (this.__values__ = Ok(this.value()));
          var c = this.__index__ >= this.__values__.length, m = c ? n : this.__values__[this.__index__++];
          return { done: c, value: m };
        }
        function VV() {
          return this;
        }
        function MV(c) {
          for (var m, k = this; k instanceof Ym; ) {
            var R = uk(k);
            R.__index__ = 0, R.__values__ = n, m ? J.__wrapped__ = R : m = R;
            var J = R;
            k = k.__wrapped__;
          }
          return J.__wrapped__ = c, m;
        }
        function RV() {
          var c = this.__wrapped__;
          if (c instanceof dn) {
            var m = c;
            return this.__actions__.length && (m = new dn(this)), m = m.reverse(), m.__actions__.push({
              func: ch,
              args: [sg],
              thisArg: n
            }), new wi(m, this.__chain__);
          }
          return this.thru(sg);
        }
        function LV() {
          return B1(this.__wrapped__, this.__actions__);
        }
        var FV = th(function(c, m, k) {
          Ue.call(c, k) ? ++c[k] : Do(c, k, 1);
        });
        function NV(c, m, k) {
          var R = Qt(c) ? Dm : EB;
          return k && Pr(c, m, k) && (m = n), R(c, Mt(m, 3));
        }
        function UV(c, m) {
          var k = Qt(c) ? eo : p1;
          return k(c, Mt(m, 3));
        }
        var $V = z1(dk), qV = z1(fk);
        function HV(c, m) {
          return or(uh(c, m), 1);
        }
        function zV(c, m) {
          return or(uh(c, m), te);
        }
        function WV(c, m, k) {
          return k = k === n ? 1 : Xt(k), or(uh(c, m), k);
        }
        function gk(c, m) {
          var k = Qt(c) ? Hr : ys;
          return k(c, Mt(m, 3));
        }
        function yk(c, m) {
          var k = Qt(c) ? hv : _1;
          return k(c, Mt(m, 3));
        }
        var jV = th(function(c, m, k) {
          Ue.call(c, k) ? c[k].push(m) : Do(c, k, [m]);
        });
        function KV(c, m, k, R) {
          c = Wr(c) ? c : Hc(c), k = k && !R ? Xt(k) : 0;
          var J = c.length;
          return k < 0 && (k = Ka(J + k, 0)), _h(c) ? k <= J && c.indexOf(m, k) > -1 : !!J && vi(c, m, k) > -1;
        }
        var YV = tn(function(c, m, k) {
          var R = -1, J = typeof m == "function", ue = Wr(c) ? Ke(c.length) : [];
          return ys(c, function(be) {
            ue[++R] = J ? Tr(m, be, k) : xd(be, m, k);
          }), ue;
        }), GV = th(function(c, m, k) {
          Do(c, k, m);
        });
        function uh(c, m) {
          var k = Qt(c) ? Un : k1;
          return k(c, Mt(m, 3));
        }
        function QV(c, m, k, R) {
          return c == null ? [] : (Qt(m) || (m = m == null ? [] : [m]), k = R ? n : k, Qt(k) || (k = k == null ? [] : [k]), x1(c, m, k));
        }
        var JV = th(function(c, m, k) {
          c[k ? 0 : 1].push(m);
        }, function() {
          return [[], []];
        });
        function XV(c, m, k) {
          var R = Qt(c) ? md : Mm, J = arguments.length < 3;
          return R(c, Mt(m, 4), k, J, ys);
        }
        function ZV(c, m, k) {
          var R = Qt(c) ? _v : Mm, J = arguments.length < 3;
          return R(c, Mt(m, 4), k, J, _1);
        }
        function eM(c, m) {
          var k = Qt(c) ? eo : p1;
          return k(c, mh(Mt(m, 3)));
        }
        function tM(c) {
          var m = Qt(c) ? d1 : KB;
          return m(c);
        }
        function nM(c, m, k) {
          (k ? Pr(c, m, k) : m === n) ? m = 1 : m = Xt(m);
          var R = Qt(c) ? CB : YB;
          return R(c, m);
        }
        function aM(c) {
          var m = Qt(c) ? AB : QB;
          return m(c);
        }
        function rM(c) {
          if (c == null)
            return 0;
          if (Wr(c))
            return _h(c) ? ps(c) : c.length;
          var m = vr(c);
          return m == le || m == Ee ? c.size : Nv(c).length;
        }
        function iM(c, m, k) {
          var R = Qt(c) ? hd : JB;
          return k && Pr(c, m, k) && (m = n), R(c, Mt(m, 3));
        }
        var oM = tn(function(c, m) {
          if (c == null)
            return [];
          var k = m.length;
          return k > 1 && Pr(c, m[0], m[1]) ? m = [] : k > 2 && Pr(m[0], m[1], m[2]) && (m = [m[0]]), x1(c, or(m, 1), []);
        }), dh = UD || function() {
          return ja.Date.now();
        };
        function sM(c, m) {
          if (typeof m != "function")
            throw new L(o);
          return c = Xt(c), function() {
            if (--c < 1)
              return m.apply(this, arguments);
          };
        }
        function bk(c, m, k) {
          return m = k ? n : m, m = c && m == null ? c.length : m, Bo(c, P, n, n, n, n, m);
        }
        function wk(c, m) {
          var k;
          if (typeof m != "function")
            throw new L(o);
          return c = Xt(c), function() {
            return --c > 0 && (k = m.apply(this, arguments)), c <= 1 && (m = n), k;
          };
        }
        var cg = tn(function(c, m, k) {
          var R = b;
          if (k.length) {
            var J = Bi(k, $c(cg));
            R |= C;
          }
          return Bo(c, R, m, k, J);
        }), kk = tn(function(c, m, k) {
          var R = b | p;
          if (k.length) {
            var J = Bi(k, $c(kk));
            R |= C;
          }
          return Bo(m, R, c, k, J);
        });
        function Sk(c, m, k) {
          m = k ? n : m;
          var R = Bo(c, S, n, n, n, n, n, m);
          return R.placeholder = Sk.placeholder, R;
        }
        function Ck(c, m, k) {
          m = k ? n : m;
          var R = Bo(c, E, n, n, n, n, n, m);
          return R.placeholder = Ck.placeholder, R;
        }
        function Ak(c, m, k) {
          var R, J, ue, be, De, Ne, tt = 0, at = !1, ct = !1, yt = !0;
          if (typeof c != "function")
            throw new L(o);
          m = Ai(m) || 0, ha(k) && (at = !!k.leading, ct = "maxWait" in k, ue = ct ? Ka(Ai(k.maxWait) || 0, m) : ue, yt = "trailing" in k ? !!k.trailing : yt);
          function Et(Ea) {
            var Ri = R, Fo = J;
            return R = J = n, tt = Ea, be = c.apply(Fo, Ri), be;
          }
          function Nt(Ea) {
            return tt = Ea, De = Od(ln, m), at ? Et(Ea) : be;
          }
          function Zt(Ea) {
            var Ri = Ea - Ne, Fo = Ea - tt, zk = m - Ri;
            return ct ? pr(zk, ue - Fo) : zk;
          }
          function Ut(Ea) {
            var Ri = Ea - Ne, Fo = Ea - tt;
            return Ne === n || Ri >= m || Ri < 0 || ct && Fo >= ue;
          }
          function ln() {
            var Ea = dh();
            if (Ut(Ea))
              return hn(Ea);
            De = Od(ln, Zt(Ea));
          }
          function hn(Ea) {
            return De = n, yt && R ? Et(Ea) : (R = J = n, be);
          }
          function ni() {
            De !== n && M1(De), tt = 0, R = Ne = J = De = n;
          }
          function Or() {
            return De === n ? be : hn(dh());
          }
          function ai() {
            var Ea = dh(), Ri = Ut(Ea);
            if (R = arguments, J = this, Ne = Ea, Ri) {
              if (De === n)
                return Nt(Ne);
              if (ct)
                return M1(De), De = Od(ln, m), Et(Ne);
            }
            return De === n && (De = Od(ln, m)), be;
          }
          return ai.cancel = ni, ai.flush = Or, ai;
        }
        var lM = tn(function(c, m) {
          return h1(c, 1, m);
        }), cM = tn(function(c, m, k) {
          return h1(c, Ai(m) || 0, k);
        });
        function uM(c) {
          return Bo(c, T);
        }
        function fh(c, m) {
          if (typeof c != "function" || m != null && typeof m != "function")
            throw new L(o);
          var k = function() {
            var R = arguments, J = m ? m.apply(this, R) : R[0], ue = k.cache;
            if (ue.has(J))
              return ue.get(J);
            var be = c.apply(this, R);
            return k.cache = ue.set(J, be) || ue, be;
          };
          return k.cache = new (fh.Cache || Oo)(), k;
        }
        fh.Cache = Oo;
        function mh(c) {
          if (typeof c != "function")
            throw new L(o);
          return function() {
            var m = arguments;
            switch (m.length) {
              case 0:
                return !c.call(this);
              case 1:
                return !c.call(this, m[0]);
              case 2:
                return !c.call(this, m[0], m[1]);
              case 3:
                return !c.call(this, m[0], m[1], m[2]);
            }
            return !c.apply(this, m);
          };
        }
        function dM(c) {
          return wk(2, c);
        }
        var fM = XB(function(c, m) {
          m = m.length == 1 && Qt(m[0]) ? Un(m[0], Ir(Mt())) : Un(or(m, 1), Ir(Mt()));
          var k = m.length;
          return tn(function(R) {
            for (var J = -1, ue = pr(R.length, k); ++J < ue; )
              R[J] = m[J].call(this, R[J]);
            return Tr(c, this, R);
          });
        }), ug = tn(function(c, m) {
          var k = Bi(m, $c(ug));
          return Bo(c, C, n, m, k);
        }), xk = tn(function(c, m) {
          var k = Bi(m, $c(xk));
          return Bo(c, D, n, m, k);
        }), mM = Vo(function(c, m) {
          return Bo(c, O, n, n, n, m);
        });
        function hM(c, m) {
          if (typeof c != "function")
            throw new L(o);
          return m = m === n ? m : Xt(m), tn(c, m);
        }
        function _M(c, m) {
          if (typeof c != "function")
            throw new L(o);
          return m = m == null ? 0 : Ka(Xt(m), 0), tn(function(k) {
            var R = k[m], J = ks(k, 0, m);
            return R && to(J, R), Tr(c, this, J);
          });
        }
        function pM(c, m, k) {
          var R = !0, J = !0;
          if (typeof c != "function")
            throw new L(o);
          return ha(k) && (R = "leading" in k ? !!k.leading : R, J = "trailing" in k ? !!k.trailing : J), Ak(c, m, {
            leading: R,
            maxWait: m,
            trailing: J
          });
        }
        function vM(c) {
          return bk(c, 1);
        }
        function gM(c, m) {
          return ug(Yv(m), c);
        }
        function yM() {
          if (!arguments.length)
            return [];
          var c = arguments[0];
          return Qt(c) ? c : [c];
        }
        function bM(c) {
          return ki(c, g);
        }
        function wM(c, m) {
          return m = typeof m == "function" ? m : n, ki(c, g, m);
        }
        function kM(c) {
          return ki(c, f | g);
        }
        function SM(c, m) {
          return m = typeof m == "function" ? m : n, ki(c, f | g, m);
        }
        function CM(c, m) {
          return m == null || m1(c, m, Xa(m));
        }
        function Mi(c, m) {
          return c === m || c !== c && m !== m;
        }
        var AM = ih(Rv), xM = ih(function(c, m) {
          return c >= m;
        }), Cl = y1(/* @__PURE__ */ function() {
          return arguments;
        }()) ? y1 : function(c) {
          return ka(c) && Ue.call(c, "callee") && !xt.call(c, "callee");
        }, Qt = Ke.isArray, TM = xm ? Ir(xm) : MB;
        function Wr(c) {
          return c != null && hh(c.length) && !Ro(c);
        }
        function Ia(c) {
          return ka(c) && Wr(c);
        }
        function IM(c) {
          return c === !0 || c === !1 || ka(c) && Er(c) == ke;
        }
        var Ss = qD || wg, EM = Tm ? Ir(Tm) : RB;
        function PM(c) {
          return ka(c) && c.nodeType === 1 && !Dd(c);
        }
        function OM(c) {
          if (c == null)
            return !0;
          if (Wr(c) && (Qt(c) || typeof c == "string" || typeof c.splice == "function" || Ss(c) || qc(c) || Cl(c)))
            return !c.length;
          var m = vr(c);
          if (m == le || m == Ee)
            return !c.size;
          if (Pd(c))
            return !Nv(c).length;
          for (var k in c)
            if (Ue.call(c, k))
              return !1;
          return !0;
        }
        function DM(c, m) {
          return Td(c, m);
        }
        function BM(c, m, k) {
          k = typeof k == "function" ? k : n;
          var R = k ? k(c, m) : n;
          return R === n ? Td(c, m, n, k) : !!R;
        }
        function dg(c) {
          if (!ka(c))
            return !1;
          var m = Er(c);
          return m == ce || m == Le || typeof c.message == "string" && typeof c.name == "string" && !Dd(c);
        }
        function VM(c) {
          return typeof c == "number" && s1(c);
        }
        function Ro(c) {
          if (!ha(c))
            return !1;
          var m = Er(c);
          return m == ne || m == G || m == z || m == ge;
        }
        function Tk(c) {
          return typeof c == "number" && c == Xt(c);
        }
        function hh(c) {
          return typeof c == "number" && c > -1 && c % 1 == 0 && c <= de;
        }
        function ha(c) {
          var m = typeof c;
          return c != null && (m == "object" || m == "function");
        }
        function ka(c) {
          return c != null && typeof c == "object";
        }
        var Ik = Im ? Ir(Im) : FB;
        function MM(c, m) {
          return c === m || Fv(c, m, tg(m));
        }
        function RM(c, m, k) {
          return k = typeof k == "function" ? k : n, Fv(c, m, tg(m), k);
        }
        function LM(c) {
          return Ek(c) && c != +c;
        }
        function FM(c) {
          if (w2(c))
            throw new jt(i);
          return b1(c);
        }
        function NM(c) {
          return c === null;
        }
        function UM(c) {
          return c == null;
        }
        function Ek(c) {
          return typeof c == "number" || ka(c) && Er(c) == Y;
        }
        function Dd(c) {
          if (!ka(c) || Er(c) != Te)
            return !1;
          var m = ma(c);
          if (m === null)
            return !0;
          var k = Ue.call(m, "constructor") && m.constructor;
          return typeof k == "function" && k instanceof k && qe.call(k) == St;
        }
        var fg = Ec ? Ir(Ec) : NB;
        function $M(c) {
          return Tk(c) && c >= -de && c <= de;
        }
        var Pk = Em ? Ir(Em) : UB;
        function _h(c) {
          return typeof c == "string" || !Qt(c) && ka(c) && Er(c) == Je;
        }
        function ti(c) {
          return typeof c == "symbol" || ka(c) && Er(c) == _e;
        }
        var qc = Pm ? Ir(Pm) : $B;
        function qM(c) {
          return c === n;
        }
        function HM(c) {
          return ka(c) && vr(c) == Ze;
        }
        function zM(c) {
          return ka(c) && Er(c) == _t;
        }
        var WM = ih(Uv), jM = ih(function(c, m) {
          return c <= m;
        });
        function Ok(c) {
          if (!c)
            return [];
          if (Wr(c))
            return _h(c) ? Zr(c) : zr(c);
          if (yi && c[yi])
            return Um(c[yi]());
          var m = vr(c), k = m == le ? Vc : m == Ee ? Mc : Hc;
          return k(c);
        }
        function Lo(c) {
          if (!c)
            return c === 0 ? c : 0;
          if (c = Ai(c), c === te || c === -te) {
            var m = c < 0 ? -1 : 1;
            return m * Z;
          }
          return c === c ? c : 0;
        }
        function Xt(c) {
          var m = Lo(c), k = m % 1;
          return m === m ? k ? m - k : m : 0;
        }
        function Dk(c) {
          return c ? bl(Xt(c), 0, K) : 0;
        }
        function Ai(c) {
          if (typeof c == "number")
            return c;
          if (ti(c))
            return F;
          if (ha(c)) {
            var m = typeof c.valueOf == "function" ? c.valueOf() : c;
            c = ha(m) ? m + "" : m;
          }
          if (typeof c != "string")
            return c === 0 ? c : +c;
          c = Lm(c);
          var k = kc.test(c);
          return k || dl.test(c) ? fv(c.slice(2), k ? 2 : 8) : zp.test(c) ? F : +c;
        }
        function Bk(c) {
          return ao(c, jr(c));
        }
        function KM(c) {
          return c ? bl(Xt(c), -de, de) : c === 0 ? c : 0;
        }
        function Sn(c) {
          return c == null ? "" : ei(c);
        }
        var YM = Nc(function(c, m) {
          if (Pd(m) || Wr(m)) {
            ao(m, Xa(m), c);
            return;
          }
          for (var k in m)
            Ue.call(m, k) && Cd(c, k, m[k]);
        }), Vk = Nc(function(c, m) {
          ao(m, jr(m), c);
        }), ph = Nc(function(c, m, k, R) {
          ao(m, jr(m), c, R);
        }), GM = Nc(function(c, m, k, R) {
          ao(m, Xa(m), c, R);
        }), QM = Vo(Bv);
        function JM(c, m) {
          var k = Fc(c);
          return m == null ? k : f1(k, m);
        }
        var XM = tn(function(c, m) {
          c = In(c);
          var k = -1, R = m.length, J = R > 2 ? m[2] : n;
          for (J && Pr(m[0], m[1], J) && (R = 1); ++k < R; )
            for (var ue = m[k], be = jr(ue), De = -1, Ne = be.length; ++De < Ne; ) {
              var tt = be[De], at = c[tt];
              (at === n || Mi(at, me[tt]) && !Ue.call(c, tt)) && (c[tt] = ue[tt]);
            }
          return c;
        }), ZM = tn(function(c) {
          return c.push(n, J1), Tr(Mk, n, c);
        });
        function eR(c, m) {
          return Oc(c, Mt(m, 3), no);
        }
        function tR(c, m) {
          return Oc(c, Mt(m, 3), Mv);
        }
        function nR(c, m) {
          return c == null ? c : Vv(c, Mt(m, 3), jr);
        }
        function aR(c, m) {
          return c == null ? c : v1(c, Mt(m, 3), jr);
        }
        function rR(c, m) {
          return c && no(c, Mt(m, 3));
        }
        function iR(c, m) {
          return c && Mv(c, Mt(m, 3));
        }
        function oR(c) {
          return c == null ? [] : Jm(c, Xa(c));
        }
        function sR(c) {
          return c == null ? [] : Jm(c, jr(c));
        }
        function mg(c, m, k) {
          var R = c == null ? n : wl(c, m);
          return R === n ? k : R;
        }
        function lR(c, m) {
          return c != null && ek(c, m, OB);
        }
        function hg(c, m) {
          return c != null && ek(c, m, DB);
        }
        var cR = j1(function(c, m, k) {
          m != null && typeof m.toString != "function" && (m = mt.call(m)), c[m] = k;
        }, pg(Kr)), uR = j1(function(c, m, k) {
          m != null && typeof m.toString != "function" && (m = mt.call(m)), Ue.call(c, m) ? c[m].push(k) : c[m] = [k];
        }, Mt), dR = tn(xd);
        function Xa(c) {
          return Wr(c) ? u1(c) : Nv(c);
        }
        function jr(c) {
          return Wr(c) ? u1(c, !0) : qB(c);
        }
        function fR(c, m) {
          var k = {};
          return m = Mt(m, 3), no(c, function(R, J, ue) {
            Do(k, m(R, J, ue), R);
          }), k;
        }
        function mR(c, m) {
          var k = {};
          return m = Mt(m, 3), no(c, function(R, J, ue) {
            Do(k, J, m(R, J, ue));
          }), k;
        }
        var hR = Nc(function(c, m, k) {
          Xm(c, m, k);
        }), Mk = Nc(function(c, m, k, R) {
          Xm(c, m, k, R);
        }), _R = Vo(function(c, m) {
          var k = {};
          if (c == null)
            return k;
          var R = !1;
          m = Un(m, function(ue) {
            return ue = ws(ue, c), R || (R = ue.length > 1), ue;
          }), ao(c, Zv(c), k), R && (k = ki(k, f | h | g, c2));
          for (var J = m.length; J--; )
            Wv(k, m[J]);
          return k;
        });
        function pR(c, m) {
          return Rk(c, mh(Mt(m)));
        }
        var vR = Vo(function(c, m) {
          return c == null ? {} : zB(c, m);
        });
        function Rk(c, m) {
          if (c == null)
            return {};
          var k = Un(Zv(c), function(R) {
            return [R];
          });
          return m = Mt(m), T1(c, k, function(R, J) {
            return m(R, J[0]);
          });
        }
        function gR(c, m, k) {
          m = ws(m, c);
          var R = -1, J = m.length;
          for (J || (J = 1, c = n); ++R < J; ) {
            var ue = c == null ? n : c[ro(m[R])];
            ue === n && (R = J, ue = k), c = Ro(ue) ? ue.call(c) : ue;
          }
          return c;
        }
        function yR(c, m, k) {
          return c == null ? c : Id(c, m, k);
        }
        function bR(c, m, k, R) {
          return R = typeof R == "function" ? R : n, c == null ? c : Id(c, m, k, R);
        }
        var Lk = G1(Xa), Fk = G1(jr);
        function wR(c, m, k) {
          var R = Qt(c), J = R || Ss(c) || qc(c);
          if (m = Mt(m, 4), k == null) {
            var ue = c && c.constructor;
            J ? k = R ? new ue() : [] : ha(c) ? k = Ro(ue) ? Fc(ma(c)) : {} : k = {};
          }
          return (J ? Hr : no)(c, function(be, De, Ne) {
            return m(k, be, De, Ne);
          }), k;
        }
        function kR(c, m) {
          return c == null ? !0 : Wv(c, m);
        }
        function SR(c, m, k) {
          return c == null ? c : D1(c, m, Yv(k));
        }
        function CR(c, m, k, R) {
          return R = typeof R == "function" ? R : n, c == null ? c : D1(c, m, Yv(k), R);
        }
        function Hc(c) {
          return c == null ? [] : vd(c, Xa(c));
        }
        function AR(c) {
          return c == null ? [] : vd(c, jr(c));
        }
        function xR(c, m, k) {
          return k === n && (k = m, m = n), k !== n && (k = Ai(k), k = k === k ? k : 0), m !== n && (m = Ai(m), m = m === m ? m : 0), bl(Ai(c), m, k);
        }
        function TR(c, m, k) {
          return m = Lo(m), k === n ? (k = m, m = 0) : k = Lo(k), c = Ai(c), BB(c, m, k);
        }
        function IR(c, m, k) {
          if (k && typeof k != "boolean" && Pr(c, m, k) && (m = k = n), k === n && (typeof m == "boolean" ? (k = m, m = n) : typeof c == "boolean" && (k = c, c = n)), c === n && m === n ? (c = 0, m = 1) : (c = Lo(c), m === n ? (m = c, c = 0) : m = Lo(m)), c > m) {
            var R = c;
            c = m, m = R;
          }
          if (k || c % 1 || m % 1) {
            var J = l1();
            return pr(c + J * (m - c + ld("1e-" + ((J + "").length - 1))), m);
          }
          return qv(c, m);
        }
        var ER = Uc(function(c, m, k) {
          return m = m.toLowerCase(), c + (k ? Nk(m) : m);
        });
        function Nk(c) {
          return _g(Sn(c).toLowerCase());
        }
        function Uk(c) {
          return c = Sn(c), c && c.replace(Sc, Fm).replace(rv, "");
        }
        function PR(c, m, k) {
          c = Sn(c), m = ei(m);
          var R = c.length;
          k = k === n ? R : bl(Xt(k), 0, R);
          var J = k;
          return k -= m.length, k >= 0 && c.slice(k, J) == m;
        }
        function OR(c) {
          return c = Sn(c), c && pt.test(c) ? c.replace(je, Kn) : c;
        }
        function DR(c) {
          return c = Sn(c), c && lm.test(c) ? c.replace(Ji, "\\$&") : c;
        }
        var BR = Uc(function(c, m, k) {
          return c + (k ? "-" : "") + m.toLowerCase();
        }), VR = Uc(function(c, m, k) {
          return c + (k ? " " : "") + m.toLowerCase();
        }), MR = H1("toLowerCase");
        function RR(c, m, k) {
          c = Sn(c), m = Xt(m);
          var R = m ? ps(c) : 0;
          if (!m || R >= m)
            return c;
          var J = (m - R) / 2;
          return rh(Wm(J), k) + c + rh(zm(J), k);
        }
        function LR(c, m, k) {
          c = Sn(c), m = Xt(m);
          var R = m ? ps(c) : 0;
          return m && R < m ? c + rh(m - R, k) : c;
        }
        function FR(c, m, k) {
          c = Sn(c), m = Xt(m);
          var R = m ? ps(c) : 0;
          return m && R < m ? rh(m - R, k) + c : c;
        }
        function NR(c, m, k) {
          return k || m == null ? m = 0 : m && (m = +m), jD(Sn(c).replace(wc, ""), m || 0);
        }
        function UR(c, m, k) {
          return (k ? Pr(c, m, k) : m === n) ? m = 1 : m = Xt(m), Hv(Sn(c), m);
        }
        function $R() {
          var c = arguments, m = Sn(c[0]);
          return c.length < 3 ? m : m.replace(c[1], c[2]);
        }
        var qR = Uc(function(c, m, k) {
          return c + (k ? "_" : "") + m.toLowerCase();
        });
        function HR(c, m, k) {
          return k && typeof k != "number" && Pr(c, m, k) && (m = k = n), k = k === n ? K : k >>> 0, k ? (c = Sn(c), c && (typeof m == "string" || m != null && !fg(m)) && (m = ei(m), !m && Tn(c)) ? ks(Zr(c), 0, k) : c.split(m, k)) : [];
        }
        var zR = Uc(function(c, m, k) {
          return c + (k ? " " : "") + _g(m);
        });
        function WR(c, m, k) {
          return c = Sn(c), k = k == null ? 0 : bl(Xt(k), 0, c.length), m = ei(m), c.slice(k, k + m.length) == m;
        }
        function jR(c, m, k) {
          var R = oe.templateSettings;
          k && Pr(c, m, k) && (m = n), c = Sn(c), m = ph({}, m, R, Q1);
          var J = ph({}, m.imports, R.imports, Q1), ue = Xa(J), be = vd(J, ue), De, Ne, tt = 0, at = m.interpolate || Xi, ct = "__p += '", yt = gs(
            (m.escape || Xi).source + "|" + at.source + "|" + (at === _r ? ul : Xi).source + "|" + (m.evaluate || Xi).source + "|$",
            "g"
          ), Et = "//# sourceURL=" + (Ue.call(m, "sourceURL") ? (m.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++cv + "]") + `
`;
          c.replace(yt, function(Ut, ln, hn, ni, Or, ai) {
            return hn || (hn = ni), ct += c.slice(tt, ai).replace(um, pl), ln && (De = !0, ct += `' +
__e(` + ln + `) +
'`), Or && (Ne = !0, ct += `';
` + Or + `;
__p += '`), hn && (ct += `' +
((__t = (` + hn + `)) == null ? '' : __t) +
'`), tt = ai + Ut.length, Ut;
          }), ct += `';
`;
          var Nt = Ue.call(m, "variable") && m.variable;
          if (!Nt)
            ct = `with (obj) {
` + ct + `
}
`;
          else if (qp.test(Nt))
            throw new jt(l);
          ct = (Ne ? ct.replace(xe, "") : ct).replace(ze, "$1").replace(ft, "$1;"), ct = "function(" + (Nt || "obj") + `) {
` + (Nt ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (De ? ", __e = _.escape" : "") + (Ne ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + ct + `return __p
}`;
          var Zt = qk(function() {
            return gn(ue, Et + "return " + ct).apply(n, be);
          });
          if (Zt.source = ct, dg(Zt))
            throw Zt;
          return Zt;
        }
        function KR(c) {
          return Sn(c).toLowerCase();
        }
        function YR(c) {
          return Sn(c).toUpperCase();
        }
        function GR(c, m, k) {
          if (c = Sn(c), c && (k || m === n))
            return Lm(c);
          if (!c || !(m = ei(m)))
            return c;
          var R = Zr(c), J = Zr(m), ue = na(R, J), be = gi(R, J) + 1;
          return ks(R, ue, be).join("");
        }
        function QR(c, m, k) {
          if (c = Sn(c), c && (k || m === n))
            return c.slice(0, $m(c) + 1);
          if (!c || !(m = ei(m)))
            return c;
          var R = Zr(c), J = gi(R, Zr(m)) + 1;
          return ks(R, 0, J).join("");
        }
        function JR(c, m, k) {
          if (c = Sn(c), c && (k || m === n))
            return c.replace(wc, "");
          if (!c || !(m = ei(m)))
            return c;
          var R = Zr(c), J = na(R, Zr(m));
          return ks(R, J).join("");
        }
        function XR(c, m) {
          var k = A, R = V;
          if (ha(m)) {
            var J = "separator" in m ? m.separator : J;
            k = "length" in m ? Xt(m.length) : k, R = "omission" in m ? ei(m.omission) : R;
          }
          c = Sn(c);
          var ue = c.length;
          if (Tn(c)) {
            var be = Zr(c);
            ue = be.length;
          }
          if (k >= ue)
            return c;
          var De = k - ps(R);
          if (De < 1)
            return R;
          var Ne = be ? ks(be, 0, De).join("") : c.slice(0, De);
          if (J === n)
            return Ne + R;
          if (be && (De += Ne.length - De), fg(J)) {
            if (c.slice(De).search(J)) {
              var tt, at = Ne;
              for (J.global || (J = gs(J.source, Sn(cm.exec(J)) + "g")), J.lastIndex = 0; tt = J.exec(at); )
                var ct = tt.index;
              Ne = Ne.slice(0, ct === n ? De : ct);
            }
          } else if (c.indexOf(ei(J), De) != De) {
            var yt = Ne.lastIndexOf(J);
            yt > -1 && (Ne = Ne.slice(0, yt));
          }
          return Ne + R;
        }
        function ZR(c) {
          return c = Sn(c), c && st.test(c) ? c.replace(it, Cv) : c;
        }
        var eL = Uc(function(c, m, k) {
          return c + (k ? " " : "") + m.toUpperCase();
        }), _g = H1("toUpperCase");
        function $k(c, m, k) {
          return c = Sn(c), m = k ? n : m, m === n ? Nm(c) ? Tv(c) : gv(c) : c.match(m) || [];
        }
        var qk = tn(function(c, m) {
          try {
            return Tr(c, n, m);
          } catch (k) {
            return dg(k) ? k : new jt(k);
          }
        }), tL = Vo(function(c, m) {
          return Hr(m, function(k) {
            k = ro(k), Do(c, k, cg(c[k], c));
          }), c;
        });
        function nL(c) {
          var m = c == null ? 0 : c.length, k = Mt();
          return c = m ? Un(c, function(R) {
            if (typeof R[1] != "function")
              throw new L(o);
            return [k(R[0]), R[1]];
          }) : [], tn(function(R) {
            for (var J = -1; ++J < m; ) {
              var ue = c[J];
              if (Tr(ue[0], this, R))
                return Tr(ue[1], this, R);
            }
          });
        }
        function aL(c) {
          return IB(ki(c, f));
        }
        function pg(c) {
          return function() {
            return c;
          };
        }
        function rL(c, m) {
          return c == null || c !== c ? m : c;
        }
        var iL = W1(), oL = W1(!0);
        function Kr(c) {
          return c;
        }
        function vg(c) {
          return w1(typeof c == "function" ? c : ki(c, f));
        }
        function sL(c) {
          return S1(ki(c, f));
        }
        function lL(c, m) {
          return C1(c, ki(m, f));
        }
        var cL = tn(function(c, m) {
          return function(k) {
            return xd(k, c, m);
          };
        }), uL = tn(function(c, m) {
          return function(k) {
            return xd(c, k, m);
          };
        });
        function gg(c, m, k) {
          var R = Xa(m), J = Jm(m, R);
          k == null && !(ha(m) && (J.length || !R.length)) && (k = m, m = c, c = this, J = Jm(m, Xa(m)));
          var ue = !(ha(k) && "chain" in k) || !!k.chain, be = Ro(c);
          return Hr(J, function(De) {
            var Ne = m[De];
            c[De] = Ne, be && (c.prototype[De] = function() {
              var tt = this.__chain__;
              if (ue || tt) {
                var at = c(this.__wrapped__), ct = at.__actions__ = zr(this.__actions__);
                return ct.push({ func: Ne, args: arguments, thisArg: c }), at.__chain__ = tt, at;
              }
              return Ne.apply(c, to([this.value()], arguments));
            });
          }), c;
        }
        function dL() {
          return ja._ === this && (ja._ = $t), this;
        }
        function yg() {
        }
        function fL(c) {
          return c = Xt(c), tn(function(m) {
            return A1(m, c);
          });
        }
        var mL = Qv(Un), hL = Qv(Dm), _L = Qv(hd);
        function Hk(c) {
          return ag(c) ? _d(ro(c)) : WB(c);
        }
        function pL(c) {
          return function(m) {
            return c == null ? n : wl(c, m);
          };
        }
        var vL = K1(), gL = K1(!0);
        function bg() {
          return [];
        }
        function wg() {
          return !1;
        }
        function yL() {
          return {};
        }
        function bL() {
          return "";
        }
        function wL() {
          return !0;
        }
        function kL(c, m) {
          if (c = Xt(c), c < 1 || c > de)
            return [];
          var k = K, R = pr(c, K);
          m = Mt(m), c -= K;
          for (var J = pd(R, m); ++k < c; )
            m(k);
          return J;
        }
        function SL(c) {
          return Qt(c) ? Un(c, ro) : ti(c) ? [c] : zr(ck(Sn(c)));
        }
        function CL(c) {
          var m = ++Ye;
          return Sn(c) + m;
        }
        var AL = ah(function(c, m) {
          return c + m;
        }, 0), xL = Jv("ceil"), TL = ah(function(c, m) {
          return c / m;
        }, 1), IL = Jv("floor");
        function EL(c) {
          return c && c.length ? Qm(c, Kr, Rv) : n;
        }
        function PL(c, m) {
          return c && c.length ? Qm(c, Mt(m, 2), Rv) : n;
        }
        function OL(c) {
          return Vm(c, Kr);
        }
        function DL(c, m) {
          return Vm(c, Mt(m, 2));
        }
        function BL(c) {
          return c && c.length ? Qm(c, Kr, Uv) : n;
        }
        function VL(c, m) {
          return c && c.length ? Qm(c, Mt(m, 2), Uv) : n;
        }
        var ML = ah(function(c, m) {
          return c * m;
        }, 1), RL = Jv("round"), LL = ah(function(c, m) {
          return c - m;
        }, 0);
        function FL(c) {
          return c && c.length ? Bc(c, Kr) : 0;
        }
        function NL(c, m) {
          return c && c.length ? Bc(c, Mt(m, 2)) : 0;
        }
        return oe.after = sM, oe.ary = bk, oe.assign = YM, oe.assignIn = Vk, oe.assignInWith = ph, oe.assignWith = GM, oe.at = QM, oe.before = wk, oe.bind = cg, oe.bindAll = tL, oe.bindKey = kk, oe.castArray = yM, oe.chain = vk, oe.chunk = I2, oe.compact = E2, oe.concat = P2, oe.cond = nL, oe.conforms = aL, oe.constant = pg, oe.countBy = FV, oe.create = JM, oe.curry = Sk, oe.curryRight = Ck, oe.debounce = Ak, oe.defaults = XM, oe.defaultsDeep = ZM, oe.defer = lM, oe.delay = cM, oe.difference = O2, oe.differenceBy = D2, oe.differenceWith = B2, oe.drop = V2, oe.dropRight = M2, oe.dropRightWhile = R2, oe.dropWhile = L2, oe.fill = F2, oe.filter = UV, oe.flatMap = HV, oe.flatMapDeep = zV, oe.flatMapDepth = WV, oe.flatten = mk, oe.flattenDeep = N2, oe.flattenDepth = U2, oe.flip = uM, oe.flow = iL, oe.flowRight = oL, oe.fromPairs = $2, oe.functions = oR, oe.functionsIn = sR, oe.groupBy = jV, oe.initial = H2, oe.intersection = z2, oe.intersectionBy = W2, oe.intersectionWith = j2, oe.invert = cR, oe.invertBy = uR, oe.invokeMap = YV, oe.iteratee = vg, oe.keyBy = GV, oe.keys = Xa, oe.keysIn = jr, oe.map = uh, oe.mapKeys = fR, oe.mapValues = mR, oe.matches = sL, oe.matchesProperty = lL, oe.memoize = fh, oe.merge = hR, oe.mergeWith = Mk, oe.method = cL, oe.methodOf = uL, oe.mixin = gg, oe.negate = mh, oe.nthArg = fL, oe.omit = _R, oe.omitBy = pR, oe.once = dM, oe.orderBy = QV, oe.over = mL, oe.overArgs = fM, oe.overEvery = hL, oe.overSome = _L, oe.partial = ug, oe.partialRight = xk, oe.partition = JV, oe.pick = vR, oe.pickBy = Rk, oe.property = Hk, oe.propertyOf = pL, oe.pull = Q2, oe.pullAll = _k, oe.pullAllBy = J2, oe.pullAllWith = X2, oe.pullAt = Z2, oe.range = vL, oe.rangeRight = gL, oe.rearg = mM, oe.reject = eM, oe.remove = eV, oe.rest = hM, oe.reverse = sg, oe.sampleSize = nM, oe.set = yR, oe.setWith = bR, oe.shuffle = aM, oe.slice = tV, oe.sortBy = oM, oe.sortedUniq = lV, oe.sortedUniqBy = cV, oe.split = HR, oe.spread = _M, oe.tail = uV, oe.take = dV, oe.takeRight = fV, oe.takeRightWhile = mV, oe.takeWhile = hV, oe.tap = EV, oe.throttle = pM, oe.thru = ch, oe.toArray = Ok, oe.toPairs = Lk, oe.toPairsIn = Fk, oe.toPath = SL, oe.toPlainObject = Bk, oe.transform = wR, oe.unary = vM, oe.union = _V, oe.unionBy = pV, oe.unionWith = vV, oe.uniq = gV, oe.uniqBy = yV, oe.uniqWith = bV, oe.unset = kR, oe.unzip = lg, oe.unzipWith = pk, oe.update = SR, oe.updateWith = CR, oe.values = Hc, oe.valuesIn = AR, oe.without = wV, oe.words = $k, oe.wrap = gM, oe.xor = kV, oe.xorBy = SV, oe.xorWith = CV, oe.zip = AV, oe.zipObject = xV, oe.zipObjectDeep = TV, oe.zipWith = IV, oe.entries = Lk, oe.entriesIn = Fk, oe.extend = Vk, oe.extendWith = ph, gg(oe, oe), oe.add = AL, oe.attempt = qk, oe.camelCase = ER, oe.capitalize = Nk, oe.ceil = xL, oe.clamp = xR, oe.clone = bM, oe.cloneDeep = kM, oe.cloneDeepWith = SM, oe.cloneWith = wM, oe.conformsTo = CM, oe.deburr = Uk, oe.defaultTo = rL, oe.divide = TL, oe.endsWith = PR, oe.eq = Mi, oe.escape = OR, oe.escapeRegExp = DR, oe.every = NV, oe.find = $V, oe.findIndex = dk, oe.findKey = eR, oe.findLast = qV, oe.findLastIndex = fk, oe.findLastKey = tR, oe.floor = IL, oe.forEach = gk, oe.forEachRight = yk, oe.forIn = nR, oe.forInRight = aR, oe.forOwn = rR, oe.forOwnRight = iR, oe.get = mg, oe.gt = AM, oe.gte = xM, oe.has = lR, oe.hasIn = hg, oe.head = hk, oe.identity = Kr, oe.includes = KV, oe.indexOf = q2, oe.inRange = TR, oe.invoke = dR, oe.isArguments = Cl, oe.isArray = Qt, oe.isArrayBuffer = TM, oe.isArrayLike = Wr, oe.isArrayLikeObject = Ia, oe.isBoolean = IM, oe.isBuffer = Ss, oe.isDate = EM, oe.isElement = PM, oe.isEmpty = OM, oe.isEqual = DM, oe.isEqualWith = BM, oe.isError = dg, oe.isFinite = VM, oe.isFunction = Ro, oe.isInteger = Tk, oe.isLength = hh, oe.isMap = Ik, oe.isMatch = MM, oe.isMatchWith = RM, oe.isNaN = LM, oe.isNative = FM, oe.isNil = UM, oe.isNull = NM, oe.isNumber = Ek, oe.isObject = ha, oe.isObjectLike = ka, oe.isPlainObject = Dd, oe.isRegExp = fg, oe.isSafeInteger = $M, oe.isSet = Pk, oe.isString = _h, oe.isSymbol = ti, oe.isTypedArray = qc, oe.isUndefined = qM, oe.isWeakMap = HM, oe.isWeakSet = zM, oe.join = K2, oe.kebabCase = BR, oe.last = Ci, oe.lastIndexOf = Y2, oe.lowerCase = VR, oe.lowerFirst = MR, oe.lt = WM, oe.lte = jM, oe.max = EL, oe.maxBy = PL, oe.mean = OL, oe.meanBy = DL, oe.min = BL, oe.minBy = VL, oe.stubArray = bg, oe.stubFalse = wg, oe.stubObject = yL, oe.stubString = bL, oe.stubTrue = wL, oe.multiply = ML, oe.nth = G2, oe.noConflict = dL, oe.noop = yg, oe.now = dh, oe.pad = RR, oe.padEnd = LR, oe.padStart = FR, oe.parseInt = NR, oe.random = IR, oe.reduce = XV, oe.reduceRight = ZV, oe.repeat = UR, oe.replace = $R, oe.result = gR, oe.round = RL, oe.runInContext = Fe, oe.sample = tM, oe.size = rM, oe.snakeCase = qR, oe.some = iM, oe.sortedIndex = nV, oe.sortedIndexBy = aV, oe.sortedIndexOf = rV, oe.sortedLastIndex = iV, oe.sortedLastIndexBy = oV, oe.sortedLastIndexOf = sV, oe.startCase = zR, oe.startsWith = WR, oe.subtract = LL, oe.sum = FL, oe.sumBy = NL, oe.template = jR, oe.times = kL, oe.toFinite = Lo, oe.toInteger = Xt, oe.toLength = Dk, oe.toLower = KR, oe.toNumber = Ai, oe.toSafeInteger = KM, oe.toString = Sn, oe.toUpper = YR, oe.trim = GR, oe.trimEnd = QR, oe.trimStart = JR, oe.truncate = XR, oe.unescape = ZR, oe.uniqueId = CL, oe.upperCase = eL, oe.upperFirst = _g, oe.each = gk, oe.eachRight = yk, oe.first = hk, gg(oe, function() {
          var c = {};
          return no(oe, function(m, k) {
            Ue.call(oe.prototype, k) || (c[k] = m);
          }), c;
        }(), { chain: !1 }), oe.VERSION = a, Hr(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(c) {
          oe[c].placeholder = oe;
        }), Hr(["drop", "take"], function(c, m) {
          dn.prototype[c] = function(k) {
            k = k === n ? 1 : Ka(Xt(k), 0);
            var R = this.__filtered__ && !m ? new dn(this) : this.clone();
            return R.__filtered__ ? R.__takeCount__ = pr(k, R.__takeCount__) : R.__views__.push({
              size: pr(k, K),
              type: c + (R.__dir__ < 0 ? "Right" : "")
            }), R;
          }, dn.prototype[c + "Right"] = function(k) {
            return this.reverse()[c](k).reverse();
          };
        }), Hr(["filter", "map", "takeWhile"], function(c, m) {
          var k = m + 1, R = k == N || k == j;
          dn.prototype[c] = function(J) {
            var ue = this.clone();
            return ue.__iteratees__.push({
              iteratee: Mt(J, 3),
              type: k
            }), ue.__filtered__ = ue.__filtered__ || R, ue;
          };
        }), Hr(["head", "last"], function(c, m) {
          var k = "take" + (m ? "Right" : "");
          dn.prototype[c] = function() {
            return this[k](1).value()[0];
          };
        }), Hr(["initial", "tail"], function(c, m) {
          var k = "drop" + (m ? "" : "Right");
          dn.prototype[c] = function() {
            return this.__filtered__ ? new dn(this) : this[k](1);
          };
        }), dn.prototype.compact = function() {
          return this.filter(Kr);
        }, dn.prototype.find = function(c) {
          return this.filter(c).head();
        }, dn.prototype.findLast = function(c) {
          return this.reverse().find(c);
        }, dn.prototype.invokeMap = tn(function(c, m) {
          return typeof c == "function" ? new dn(this) : this.map(function(k) {
            return xd(k, c, m);
          });
        }), dn.prototype.reject = function(c) {
          return this.filter(mh(Mt(c)));
        }, dn.prototype.slice = function(c, m) {
          c = Xt(c);
          var k = this;
          return k.__filtered__ && (c > 0 || m < 0) ? new dn(k) : (c < 0 ? k = k.takeRight(-c) : c && (k = k.drop(c)), m !== n && (m = Xt(m), k = m < 0 ? k.dropRight(-m) : k.take(m - c)), k);
        }, dn.prototype.takeRightWhile = function(c) {
          return this.reverse().takeWhile(c).reverse();
        }, dn.prototype.toArray = function() {
          return this.take(K);
        }, no(dn.prototype, function(c, m) {
          var k = /^(?:filter|find|map|reject)|While$/.test(m), R = /^(?:head|last)$/.test(m), J = oe[R ? "take" + (m == "last" ? "Right" : "") : m], ue = R || /^find/.test(m);
          J && (oe.prototype[m] = function() {
            var be = this.__wrapped__, De = R ? [1] : arguments, Ne = be instanceof dn, tt = De[0], at = Ne || Qt(be), ct = function(ln) {
              var hn = J.apply(oe, to([ln], De));
              return R && yt ? hn[0] : hn;
            };
            at && k && typeof tt == "function" && tt.length != 1 && (Ne = at = !1);
            var yt = this.__chain__, Et = !!this.__actions__.length, Nt = ue && !yt, Zt = Ne && !Et;
            if (!ue && at) {
              be = Zt ? be : new dn(this);
              var Ut = c.apply(be, De);
              return Ut.__actions__.push({ func: ch, args: [ct], thisArg: n }), new wi(Ut, yt);
            }
            return Nt && Zt ? c.apply(this, De) : (Ut = this.thru(ct), Nt ? R ? Ut.value()[0] : Ut.value() : Ut);
          });
        }), Hr(["pop", "push", "shift", "sort", "splice", "unshift"], function(c) {
          var m = U[c], k = /^(?:push|sort|unshift)$/.test(c) ? "tap" : "thru", R = /^(?:pop|shift)$/.test(c);
          oe.prototype[c] = function() {
            var J = arguments;
            if (R && !this.__chain__) {
              var ue = this.value();
              return m.apply(Qt(ue) ? ue : [], J);
            }
            return this[k](function(be) {
              return m.apply(Qt(be) ? be : [], J);
            });
          };
        }), no(dn.prototype, function(c, m) {
          var k = oe[m];
          if (k) {
            var R = k.name + "";
            Ue.call(Lc, R) || (Lc[R] = []), Lc[R].push({ name: m, func: k });
          }
        }), Lc[nh(n, p).name] = [{
          name: "wrapper",
          func: n
        }], dn.prototype.clone = ZD, dn.prototype.reverse = eB, dn.prototype.value = tB, oe.prototype.at = PV, oe.prototype.chain = OV, oe.prototype.commit = DV, oe.prototype.next = BV, oe.prototype.plant = MV, oe.prototype.reverse = RV, oe.prototype.toJSON = oe.prototype.valueOf = oe.prototype.value = LV, oe.prototype.first = oe.prototype.head, yi && (oe.prototype[yi] = VV), oe;
      }, vs = Iv();
      Eo ? ((Eo.exports = vs)._ = vs, ud._ = vs) : ja._ = vs;
    }).call(dX);
  }(jd, jd.exports)), jd.exports;
}
var aD = fX();
const Ni = /* @__PURE__ */ nD(aD);
var by = {}, rD = (e, t, n) => {
  if (!t.has(e))
    throw TypeError("Cannot " + n);
}, OA = (e, t, n) => (rD(e, t, "read from private field"), n ? n.call(e) : t.get(e)), mX = (e, t, n) => {
  if (t.has(e))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(e) : t.set(e, n);
}, hX = (e, t, n, a) => (rD(e, t, "write to private field"), t.set(e, n), n);
const iD = [
  ["aztec", "Aztec"],
  ["code_128", "Code128"],
  ["code_39", "Code39"],
  ["code_93", "Code93"],
  ["codabar", "Codabar"],
  ["databar", "DataBar"],
  ["databar_expanded", "DataBarExpanded"],
  ["data_matrix", "DataMatrix"],
  ["dx_film_edge", "DXFilmEdge"],
  ["ean_13", "EAN-13"],
  ["ean_8", "EAN-8"],
  ["itf", "ITF"],
  ["maxi_code", "MaxiCode"],
  ["micro_qr_code", "MicroQRCode"],
  ["pdf417", "PDF417"],
  ["qr_code", "QRCode"],
  ["rm_qr_code", "rMQRCode"],
  ["upc_a", "UPC-A"],
  ["upc_e", "UPC-E"],
  ["linear_codes", "Linear-Codes"],
  ["matrix_codes", "Matrix-Codes"]
], _X = [...iD, ["unknown"]].map((e) => e[0]), r_ = new Map(
  iD
);
function pX(e) {
  for (const [t, n] of r_)
    if (e === n)
      return t;
  return "unknown";
}
function vX(e) {
  if (oD(e))
    return {
      width: e.naturalWidth,
      height: e.naturalHeight
    };
  if (sD(e))
    return {
      width: e.width.baseVal.value,
      height: e.height.baseVal.value
    };
  if (lD(e))
    return {
      width: e.videoWidth,
      height: e.videoHeight
    };
  if (uD(e))
    return {
      width: e.width,
      height: e.height
    };
  if (fD(e))
    return {
      width: e.displayWidth,
      height: e.displayHeight
    };
  if (cD(e))
    return {
      width: e.width,
      height: e.height
    };
  if (dD(e))
    return {
      width: e.width,
      height: e.height
    };
  throw new TypeError(
    "The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'."
  );
}
function oD(e) {
  try {
    return e instanceof HTMLImageElement;
  } catch {
    return !1;
  }
}
function sD(e) {
  try {
    return e instanceof SVGImageElement;
  } catch {
    return !1;
  }
}
function lD(e) {
  try {
    return e instanceof HTMLVideoElement;
  } catch {
    return !1;
  }
}
function cD(e) {
  try {
    return e instanceof HTMLCanvasElement;
  } catch {
    return !1;
  }
}
function uD(e) {
  try {
    return e instanceof ImageBitmap;
  } catch {
    return !1;
  }
}
function dD(e) {
  try {
    return e instanceof OffscreenCanvas;
  } catch {
    return !1;
  }
}
function fD(e) {
  try {
    return e instanceof VideoFrame;
  } catch {
    return !1;
  }
}
function mD(e) {
  try {
    return e instanceof Blob;
  } catch {
    return !1;
  }
}
function gX(e) {
  try {
    return e instanceof ImageData;
  } catch {
    return !1;
  }
}
function yX(e, t) {
  try {
    const n = new OffscreenCanvas(e, t);
    if (n.getContext("2d") instanceof OffscreenCanvasRenderingContext2D)
      return n;
    throw void 0;
  } catch {
    const a = document.createElement("canvas");
    return a.width = e, a.height = t, a;
  }
}
async function hD(e) {
  if (oD(e) && !await SX(e))
    throw new DOMException(
      "Failed to load or decode HTMLImageElement.",
      "InvalidStateError"
    );
  if (sD(e) && !await CX(e))
    throw new DOMException(
      "Failed to load or decode SVGImageElement.",
      "InvalidStateError"
    );
  if (fD(e) && AX(e))
    throw new DOMException("VideoFrame is closed.", "InvalidStateError");
  if (lD(e) && (e.readyState === 0 || e.readyState === 1))
    throw new DOMException("Invalid element or state.", "InvalidStateError");
  if (uD(e) && TX(e))
    throw new DOMException(
      "The image source is detached.",
      "InvalidStateError"
    );
  const { width: t, height: n } = vX(e);
  if (t === 0 || n === 0)
    return null;
  const a = yX(t, n).getContext("2d");
  a.drawImage(e, 0, 0);
  try {
    return a.getImageData(0, 0, t, n);
  } catch {
    throw new DOMException("Source would taint origin.", "SecurityError");
  }
}
async function bX(e) {
  let t;
  try {
    if (globalThis.createImageBitmap)
      t = await createImageBitmap(e);
    else if (globalThis.Image) {
      t = new Image();
      let n = "";
      try {
        n = URL.createObjectURL(e), t.src = n, await t.decode();
      } finally {
        URL.revokeObjectURL(n);
      }
    } else
      return e;
  } catch {
    throw new DOMException(
      "Failed to load or decode Blob.",
      "InvalidStateError"
    );
  }
  return await hD(t);
}
function wX(e) {
  const { width: t, height: n } = e;
  if (t === 0 || n === 0)
    return null;
  const a = e.getContext("2d");
  try {
    return a.getImageData(0, 0, t, n);
  } catch {
    throw new DOMException("Source would taint origin.", "SecurityError");
  }
}
async function kX(e) {
  if (mD(e))
    return await bX(e);
  if (gX(e)) {
    if (xX(e))
      throw new DOMException(
        "The image data has been detached.",
        "InvalidStateError"
      );
    return e;
  }
  return cD(e) || dD(e) ? wX(e) : await hD(e);
}
async function SX(e) {
  try {
    return await e.decode(), !0;
  } catch {
    return !1;
  }
}
async function CX(e) {
  var t;
  try {
    return await ((t = e.decode) == null ? void 0 : t.call(e)), !0;
  } catch {
    return !1;
  }
}
function AX(e) {
  return e.format === null;
}
function xX(e) {
  return e.data.buffer.byteLength === 0;
}
function TX(e) {
  return e.width === 0 && e.height === 0;
}
function DA(e, t) {
  return e instanceof DOMException ? new DOMException(`${t}: ${e.message}`, e.name) : e instanceof Error ? new e.constructor(`${t}: ${e.message}`) : new Error(`${t}: ${e}`);
}
const BA = [
  "Aztec",
  "Codabar",
  "Code128",
  "Code39",
  "Code93",
  "DataBar",
  "DataBarExpanded",
  "DataMatrix",
  "DXFilmEdge",
  "EAN-13",
  "EAN-8",
  "ITF",
  "Linear-Codes",
  "Matrix-Codes",
  "MaxiCode",
  "MicroQRCode",
  "None",
  "PDF417",
  "QRCode",
  "rMQRCode",
  "UPC-A",
  "UPC-E"
];
function IX(e) {
  return e.join("|");
}
function EX(e) {
  const t = VA(e);
  let n = 0, a = BA.length - 1;
  for (; n <= a; ) {
    const r = Math.floor((n + a) / 2), i = BA[r], o = VA(i);
    if (o === t)
      return i;
    o < t ? n = r + 1 : a = r - 1;
  }
  return "None";
}
function VA(e) {
  return e.toLowerCase().replace(/_-\[\]/g, "");
}
function PX(e, t) {
  return e.Binarizer[t];
}
function OX(e, t) {
  return e.CharacterSet[t];
}
const DX = [
  "Text",
  "Binary",
  "Mixed",
  "GS1",
  "ISO15434",
  "UnknownECI"
];
function BX(e) {
  return DX[e.value];
}
function VX(e, t) {
  return e.EanAddOnSymbol[t];
}
function MX(e, t) {
  return e.TextMode[t];
}
const Nu = {
  formats: [],
  tryHarder: !0,
  tryRotate: !0,
  tryInvert: !0,
  tryDownscale: !0,
  binarizer: "LocalAverage",
  isPure: !1,
  downscaleFactor: 3,
  downscaleThreshold: 500,
  minLineCount: 2,
  maxNumberOfSymbols: 255,
  tryCode39ExtendedMode: !1,
  validateCode39CheckSum: !1,
  validateITFCheckSum: !1,
  returnCodabarStartEnd: !1,
  returnErrors: !1,
  eanAddOnSymbol: "Read",
  textMode: "Plain",
  characterSet: "Unknown"
};
function _D(e, t) {
  return {
    ...t,
    formats: IX(t.formats),
    binarizer: PX(e, t.binarizer),
    eanAddOnSymbol: VX(
      e,
      t.eanAddOnSymbol
    ),
    textMode: MX(e, t.textMode),
    characterSet: OX(
      e,
      t.characterSet
    )
  };
}
function pD(e) {
  return {
    ...e,
    format: EX(e.format),
    eccLevel: e.eccLevel,
    contentType: BX(e.contentType)
  };
}
const RX = {
  locateFile: (e, t) => {
    const n = e.match(/_(.+?)\.wasm$/);
    return n ? `https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${e}` : t + e;
  }
};
let MA = /* @__PURE__ */ new WeakMap();
function i1(e, t) {
  var n;
  const a = MA.get(e);
  if (a != null && a.modulePromise && t === void 0)
    return a.modulePromise;
  const r = (n = a?.moduleOverrides) != null ? n : RX, i = e({
    ...r
  });
  return MA.set(e, {
    moduleOverrides: r,
    modulePromise: i
  }), i;
}
async function LX(e, t, n = Nu) {
  const a = {
    ...Nu,
    ...n
  }, r = await i1(e), { size: i } = t, o = new Uint8Array(await t.arrayBuffer()), l = r._malloc(i);
  r.HEAPU8.set(o, l);
  const s = r.readBarcodesFromImage(
    l,
    i,
    _D(r, a)
  );
  r._free(l);
  const d = [];
  for (let u = 0; u < s.size(); ++u)
    d.push(
      pD(s.get(u))
    );
  return d;
}
async function FX(e, t, n = Nu) {
  const a = {
    ...Nu,
    ...n
  }, r = await i1(e), {
    data: i,
    width: o,
    height: l,
    data: { byteLength: s }
  } = t, d = r._malloc(s);
  r.HEAPU8.set(i, d);
  const u = r.readBarcodesFromPixmap(
    d,
    o,
    l,
    _D(r, a)
  );
  r._free(d);
  const f = [];
  for (let h = 0; h < u.size(); ++h)
    f.push(
      pD(u.get(h))
    );
  return f;
}
({
  ...Nu,
  formats: [...Nu.formats]
});
var o1 = (() => {
  var e = typeof document < "u" && document.currentScript ? document.currentScript.src : void 0;
  return function(t = {}) {
    var n = t, a, r;
    n.ready = new Promise((L, U) => {
      a = L, r = U;
    });
    var i = Object.assign({}, n), o = "./this.program", l = typeof window == "object", s = typeof importScripts == "function";
    typeof by == "object" && typeof by.versions == "object" && by.versions.node;
    var d = "";
    function u(L) {
      return n.locateFile ? n.locateFile(L, d) : d + L;
    }
    var f;
    (l || s) && (s ? d = self.location.href : typeof document < "u" && document.currentScript && (d = document.currentScript.src), e && (d = e), d.indexOf("blob:") !== 0 ? d = d.substr(0, d.replace(/[?#].*/, "").lastIndexOf("/") + 1) : d = "", s && (f = (L) => {
      var U = new XMLHttpRequest();
      return U.open("GET", L, !1), U.responseType = "arraybuffer", U.send(null), new Uint8Array(U.response);
    })), n.print || console.log.bind(console);
    var h = n.printErr || console.error.bind(console);
    Object.assign(n, i), i = null, n.arguments && n.arguments, n.thisProgram && (o = n.thisProgram), n.quit && n.quit;
    var g;
    n.wasmBinary && (g = n.wasmBinary), typeof WebAssembly != "object" && se("no native wasm support detected");
    var v, w = !1, b, p, y, S, E, C, D, P;
    function O() {
      var L = v.buffer;
      n.HEAP8 = b = new Int8Array(L), n.HEAP16 = y = new Int16Array(L), n.HEAPU8 = p = new Uint8Array(L), n.HEAPU16 = S = new Uint16Array(L), n.HEAP32 = E = new Int32Array(L), n.HEAPU32 = C = new Uint32Array(L), n.HEAPF32 = D = new Float32Array(L), n.HEAPF64 = P = new Float64Array(L);
    }
    var T = [], A = [], V = [];
    function M() {
      if (n.preRun)
        for (typeof n.preRun == "function" && (n.preRun = [n.preRun]); n.preRun.length; )
          H(n.preRun.shift());
      ce(T);
    }
    function B() {
      ce(A);
    }
    function N() {
      if (n.postRun)
        for (typeof n.postRun == "function" && (n.postRun = [n.postRun]); n.postRun.length; )
          te(n.postRun.shift());
      ce(V);
    }
    function H(L) {
      T.unshift(L);
    }
    function j(L) {
      A.unshift(L);
    }
    function te(L) {
      V.unshift(L);
    }
    var de = 0, Z = null;
    function F(L) {
      var U;
      de++, (U = n.monitorRunDependencies) === null || U === void 0 || U.call(n, de);
    }
    function K(L) {
      var U;
      if (de--, (U = n.monitorRunDependencies) === null || U === void 0 || U.call(n, de), de == 0 && Z) {
        var re = Z;
        Z = null, re();
      }
    }
    function se(L) {
      var U;
      (U = n.onAbort) === null || U === void 0 || U.call(n, L), L = "Aborted(" + L + ")", h(L), w = !0, L += ". Build with -sASSERTIONS for more info.";
      var re = new WebAssembly.RuntimeError(L);
      throw r(re), re;
    }
    var X = "data:application/octet-stream;base64,", he = (L) => L.startsWith(X), ve;
    ve = "zxing_reader.wasm", he(ve) || (ve = u(ve));
    function pe(L) {
      if (L == ve && g)
        return new Uint8Array(g);
      if (f)
        return f(L);
      throw "both async and sync fetching of the wasm failed";
    }
    function z(L) {
      return !g && (l || s) && typeof fetch == "function" ? fetch(L, {
        credentials: "same-origin"
      }).then((U) => {
        if (!U.ok)
          throw "failed to load wasm binary file at '" + L + "'";
        return U.arrayBuffer();
      }).catch(() => pe(L)) : Promise.resolve().then(() => pe(L));
    }
    function ke(L, U, re) {
      return z(L).then((me) => WebAssembly.instantiate(me, U)).then((me) => me).then(re, (me) => {
        h(`failed to asynchronously prepare wasm: ${me}`), se(me);
      });
    }
    function Me(L, U, re, me) {
      return !L && typeof WebAssembly.instantiateStreaming == "function" && !he(U) && typeof fetch == "function" ? fetch(U, {
        credentials: "same-origin"
      }).then((Ve) => {
        var qe = WebAssembly.instantiateStreaming(Ve, re);
        return qe.then(me, function(Ue) {
          return h(`wasm streaming compile failed: ${Ue}`), h("falling back to ArrayBuffer instantiation"), ke(U, re, me);
        });
      }) : ke(U, re, me);
    }
    function Le() {
      var L = {
        a: _l
      };
      function U(me, Ve) {
        return na = me.exports, v = na.ia, O(), _m = na.ma, j(na.ja), K(), na;
      }
      F();
      function re(me) {
        U(me.instance);
      }
      if (n.instantiateWasm)
        try {
          return n.instantiateWasm(L, U);
        } catch (me) {
          h(`Module.instantiateWasm callback failed with error: ${me}`), r(me);
        }
      return Me(g, ve, L, re).catch(r), {};
    }
    var ce = (L) => {
      for (; L.length > 0; )
        L.shift()(n);
    };
    n.noExitRuntime;
    var ne = [], G = 0, le = (L) => {
      var U = new Te(L);
      return U.get_caught() || (U.set_caught(!0), G--), U.set_rethrown(!1), ne.push(U), Um(U.excPtr), U.get_exception_ptr();
    }, Y = 0, Ce = () => {
      Kn(0, 0);
      var L = ne.pop();
      Nm(L.excPtr), Y = 0;
    };
    function Te(L) {
      this.excPtr = L, this.ptr = L - 24, this.set_type = function(U) {
        C[this.ptr + 4 >> 2] = U;
      }, this.get_type = function() {
        return C[this.ptr + 4 >> 2];
      }, this.set_destructor = function(U) {
        C[this.ptr + 8 >> 2] = U;
      }, this.get_destructor = function() {
        return C[this.ptr + 8 >> 2];
      }, this.set_caught = function(U) {
        U = U ? 1 : 0, b[this.ptr + 12 >> 0] = U;
      }, this.get_caught = function() {
        return b[this.ptr + 12 >> 0] != 0;
      }, this.set_rethrown = function(U) {
        U = U ? 1 : 0, b[this.ptr + 13 >> 0] = U;
      }, this.get_rethrown = function() {
        return b[this.ptr + 13 >> 0] != 0;
      }, this.init = function(U, re) {
        this.set_adjusted_ptr(0), this.set_type(U), this.set_destructor(re);
      }, this.set_adjusted_ptr = function(U) {
        C[this.ptr + 16 >> 2] = U;
      }, this.get_adjusted_ptr = function() {
        return C[this.ptr + 16 >> 2];
      }, this.get_exception_ptr = function() {
        var U = yd(this.get_type());
        if (U)
          return C[this.excPtr >> 2];
        var re = this.get_adjusted_ptr();
        return re !== 0 ? re : this.excPtr;
      };
    }
    var ie = (L) => {
      throw Y || (Y = L), Y;
    }, ge = (L) => {
      var U = Y;
      if (!U)
        return pl(0), 0;
      var re = new Te(U);
      re.set_adjusted_ptr(U);
      var me = re.get_type();
      if (!me)
        return pl(0), U;
      for (var Ve in L) {
        var qe = L[Ve];
        if (qe === 0 || qe === me)
          break;
        var Ue = re.ptr + 16;
        if (Vc(qe, me, Ue))
          return pl(qe), U;
      }
      return pl(me), U;
    }, Pe = () => ge([]), Ee = (L) => ge([L]), Je = (L, U) => ge([L, U]), _e = () => {
      var L = ne.pop();
      L || se("no exception to throw");
      var U = L.excPtr;
      throw L.get_rethrown() || (ne.push(L), L.set_rethrown(!0), L.set_caught(!1), G++), Y = U, Y;
    }, $e = (L, U, re) => {
      var me = new Te(L);
      throw me.init(U, re), Y = L, G++, Y;
    }, Ze = () => G, _t = {}, It = (L) => {
      for (; L.length; ) {
        var U = L.pop(), re = L.pop();
        re(U);
      }
    };
    function rt(L) {
      return this.fromWireType(E[L >> 2]);
    }
    var Dt = {}, en = {}, zn = {}, ta, Na = (L) => {
      throw new ta(L);
    }, ba = (L, U, re) => {
      L.forEach(function(Ye) {
        zn[Ye] = U;
      });
      function me(Ye) {
        var lt = re(Ye);
        lt.length !== L.length && Na("Mismatched type converter count");
        for (var mt = 0; mt < L.length; ++mt)
          st(L[mt], lt[mt]);
      }
      var Ve = new Array(U.length), qe = [], Ue = 0;
      U.forEach((Ye, lt) => {
        en.hasOwnProperty(Ye) ? Ve[lt] = en[Ye] : (qe.push(Ye), Dt.hasOwnProperty(Ye) || (Dt[Ye] = []), Dt[Ye].push(() => {
          Ve[lt] = en[Ye], ++Ue, Ue === qe.length && me(Ve);
        }));
      }), qe.length === 0 && me(Ve);
    }, Wn = (L) => {
      var U = _t[L];
      delete _t[L];
      var re = U.rawConstructor, me = U.rawDestructor, Ve = U.fields, qe = Ve.map((Ue) => Ue.getterReturnType).concat(Ve.map((Ue) => Ue.setterArgumentType));
      ba([L], qe, (Ue) => {
        var Ye = {};
        return Ve.forEach((lt, mt) => {
          var St = lt.fieldName, $t = Ue[mt], Ht = lt.getter, zt = lt.getterContext, bn = Ue[mt + Ve.length], Rn = lt.setter, kn = lt.setterContext;
          Ye[St] = {
            read: (ma) => $t.fromWireType(Ht(zt, ma)),
            write: (ma, dt) => {
              var xt = [];
              Rn(kn, ma, bn.toWireType(xt, dt)), It(xt);
            }
          };
        }), [{
          name: U.name,
          fromWireType: (lt) => {
            var mt = {};
            for (var St in Ye)
              mt[St] = Ye[St].read(lt);
            return me(lt), mt;
          },
          toWireType: (lt, mt) => {
            for (var St in Ye)
              if (!(St in mt))
                throw new TypeError(`Missing field: "${St}"`);
            var $t = re();
            for (St in Ye)
              Ye[St].write($t, mt[St]);
            return lt !== null && lt.push(me, $t), $t;
          },
          argPackAdvance: pt,
          readValueFromPointer: rt,
          destructorFunction: me
        }];
      });
    }, Vn = (L, U, re, me, Ve) => {
    }, Ja = () => {
      for (var L = new Array(256), U = 0; U < 256; ++U)
        L[U] = String.fromCharCode(U);
      xe = L;
    }, xe, ze = (L) => {
      for (var U = "", re = L; p[re]; )
        U += xe[p[re++]];
      return U;
    }, ft, it = (L) => {
      throw new ft(L);
    };
    function je(L, U) {
      let re = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      var me = U.name;
      if (L || it(`type "${me}" must have a positive integer typeid pointer`), en.hasOwnProperty(L)) {
        if (re.ignoreDuplicateRegistrations)
          return;
        it(`Cannot register type '${me}' twice`);
      }
      if (en[L] = U, delete zn[L], Dt.hasOwnProperty(L)) {
        var Ve = Dt[L];
        delete Dt[L], Ve.forEach((qe) => qe());
      }
    }
    function st(L, U) {
      let re = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      if (!("argPackAdvance" in U))
        throw new TypeError("registerType registeredInstance requires argPackAdvance");
      return je(L, U, re);
    }
    var pt = 8, xa = (L, U, re, me) => {
      U = ze(U), st(L, {
        name: U,
        fromWireType: function(Ve) {
          return !!Ve;
        },
        toWireType: function(Ve, qe) {
          return qe ? re : me;
        },
        argPackAdvance: pt,
        readValueFromPointer: function(Ve) {
          return this.fromWireType(p[Ve]);
        },
        destructorFunction: null
      });
    }, Ua = (L) => ({
      count: L.count,
      deleteScheduled: L.deleteScheduled,
      preservePointerOnDelete: L.preservePointerOnDelete,
      ptr: L.ptr,
      ptrType: L.ptrType,
      smartPtr: L.smartPtr,
      smartPtrType: L.smartPtrType
    }), _r = (L) => {
      function U(re) {
        return re.$$.ptrType.registeredClass.name;
      }
      it(U(L) + " instance already deleted");
    }, Wa = !1, Qi = (L) => {
    }, sl = (L) => {
      L.smartPtr ? L.smartPtrType.rawDestructor(L.smartPtr) : L.ptrType.registeredClass.rawDestructor(L.ptr);
    }, Ji = (L) => {
      L.count.value -= 1;
      var U = L.count.value === 0;
      U && sl(L);
    }, lm = (L, U, re) => {
      if (U === re)
        return L;
      if (re.baseClass === void 0)
        return null;
      var me = lm(L, U, re.baseClass);
      return me === null ? null : re.downcast(me);
    }, wc = {}, Up = () => Object.keys(ul).length, $p = () => {
      var L = [];
      for (var U in ul)
        ul.hasOwnProperty(U) && L.push(ul[U]);
      return L;
    }, ll = [], td = () => {
      for (; ll.length; ) {
        var L = ll.pop();
        L.$$.deleteScheduled = !1, L.delete();
      }
    }, cl, qp = (L) => {
      cl = L, ll.length && cl && cl(td);
    }, Hp = () => {
      n.getInheritedInstanceCount = Up, n.getLiveInheritedInstances = $p, n.flushPendingDeletes = td, n.setDelayFunction = qp;
    }, ul = {}, cm = (L, U) => {
      for (U === void 0 && it("ptr should not be undefined"); L.baseClass; )
        U = L.upcast(U), L = L.baseClass;
      return U;
    }, zp = (L, U) => (U = cm(L, U), ul[U]), kc = (L, U) => {
      (!U.ptrType || !U.ptr) && Na("makeClassHandle requires ptr and ptrType");
      var re = !!U.smartPtrType, me = !!U.smartPtr;
      return re !== me && Na("Both smartPtrType and smartPtr must be specified"), U.count = {
        value: 1
      }, dl(Object.create(L, {
        $$: {
          value: U,
          writable: !0
        }
      }));
    };
    function Wp(L) {
      var U = this.getPointee(L);
      if (!U)
        return this.destructor(L), null;
      var re = zp(this.registeredClass, U);
      if (re !== void 0) {
        if (re.$$.count.value === 0)
          return re.$$.ptr = U, re.$$.smartPtr = L, re.clone();
        var me = re.clone();
        return this.destructor(L), me;
      }
      function Ve() {
        return this.isSmartPointer ? kc(this.registeredClass.instancePrototype, {
          ptrType: this.pointeeType,
          ptr: U,
          smartPtrType: this,
          smartPtr: L
        }) : kc(this.registeredClass.instancePrototype, {
          ptrType: this,
          ptr: L
        });
      }
      var qe = this.registeredClass.getActualType(U), Ue = wc[qe];
      if (!Ue)
        return Ve.call(this);
      var Ye;
      this.isConst ? Ye = Ue.constPointerType : Ye = Ue.pointerType;
      var lt = lm(U, this.registeredClass, Ye.registeredClass);
      return lt === null ? Ve.call(this) : this.isSmartPointer ? kc(Ye.registeredClass.instancePrototype, {
        ptrType: Ye,
        ptr: lt,
        smartPtrType: this,
        smartPtr: L
      }) : kc(Ye.registeredClass.instancePrototype, {
        ptrType: Ye,
        ptr: lt
      });
    }
    var dl = (L) => typeof FinalizationRegistry > "u" ? (dl = (U) => U, L) : (Wa = new FinalizationRegistry((U) => {
      Ji(U.$$);
    }), dl = (U) => {
      var re = U.$$, me = !!re.smartPtr;
      if (me) {
        var Ve = {
          $$: re
        };
        Wa.register(U, Ve, U);
      }
      return U;
    }, Qi = (U) => Wa.unregister(U), dl(L)), jp = () => {
      Object.assign(Sc.prototype, {
        isAliasOf(L) {
          if (!(this instanceof Sc) || !(L instanceof Sc))
            return !1;
          var U = this.$$.ptrType.registeredClass, re = this.$$.ptr;
          L.$$ = L.$$;
          for (var me = L.$$.ptrType.registeredClass, Ve = L.$$.ptr; U.baseClass; )
            re = U.upcast(re), U = U.baseClass;
          for (; me.baseClass; )
            Ve = me.upcast(Ve), me = me.baseClass;
          return U === me && re === Ve;
        },
        clone() {
          if (this.$$.ptr || _r(this), this.$$.preservePointerOnDelete)
            return this.$$.count.value += 1, this;
          var L = dl(Object.create(Object.getPrototypeOf(this), {
            $$: {
              value: Ua(this.$$)
            }
          }));
          return L.$$.count.value += 1, L.$$.deleteScheduled = !1, L;
        },
        delete() {
          this.$$.ptr || _r(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && it("Object already scheduled for deletion"), Qi(this), Ji(this.$$), this.$$.preservePointerOnDelete || (this.$$.smartPtr = void 0, this.$$.ptr = void 0);
        },
        isDeleted() {
          return !this.$$.ptr;
        },
        deleteLater() {
          return this.$$.ptr || _r(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && it("Object already scheduled for deletion"), ll.push(this), ll.length === 1 && cl && cl(td), this.$$.deleteScheduled = !0, this;
        }
      });
    };
    function Sc() {
    }
    var Xi = (L, U) => Object.defineProperty(U, "name", {
      value: L
    }), um = (L, U, re) => {
      if (L[U].overloadTable === void 0) {
        var me = L[U];
        L[U] = function() {
          return L[U].overloadTable.hasOwnProperty(arguments.length) || it(`Function '${re}' called with an invalid number of arguments (${arguments.length}) - expects one of (${L[U].overloadTable})!`), L[U].overloadTable[arguments.length].apply(this, arguments);
        }, L[U].overloadTable = [], L[U].overloadTable[me.argCount] = me;
      }
    }, ms = (L, U, re) => {
      n.hasOwnProperty(L) ? ((re === void 0 || n[L].overloadTable !== void 0 && n[L].overloadTable[re] !== void 0) && it(`Cannot register public name '${L}' twice`), um(n, L, L), n.hasOwnProperty(re) && it(`Cannot register multiple overloads of a function with the same number of arguments (${re})!`), n[L].overloadTable[re] = U) : (n[L] = U, re !== void 0 && (n[L].numArguments = re));
    }, Kp = 48, Yp = 57, Gp = (L) => {
      if (L === void 0)
        return "_unknown";
      L = L.replace(/[^a-zA-Z0-9_]/g, "$");
      var U = L.charCodeAt(0);
      return U >= Kp && U <= Yp ? `_${L}` : L;
    };
    function dm(L, U, re, me, Ve, qe, Ue, Ye) {
      this.name = L, this.constructor = U, this.instancePrototype = re, this.rawDestructor = me, this.baseClass = Ve, this.getActualType = qe, this.upcast = Ue, this.downcast = Ye, this.pureVirtualFunctions = [];
    }
    var Cc = (L, U, re) => {
      for (; U !== re; )
        U.upcast || it(`Expected null or instance of ${re.name}, got an instance of ${U.name}`), L = U.upcast(L), U = U.baseClass;
      return L;
    };
    function fm(L, U) {
      if (U === null)
        return this.isReference && it(`null is not a valid ${this.name}`), 0;
      U.$$ || it(`Cannot pass "${hl(U)}" as a ${this.name}`), U.$$.ptr || it(`Cannot pass deleted object as a pointer of type ${this.name}`);
      var re = U.$$.ptrType.registeredClass, me = Cc(U.$$.ptr, re, this.registeredClass);
      return me;
    }
    function Qp(L, U) {
      var re;
      if (U === null)
        return this.isReference && it(`null is not a valid ${this.name}`), this.isSmartPointer ? (re = this.rawConstructor(), L !== null && L.push(this.rawDestructor, re), re) : 0;
      (!U || !U.$$) && it(`Cannot pass "${hl(U)}" as a ${this.name}`), U.$$.ptr || it(`Cannot pass deleted object as a pointer of type ${this.name}`), !this.isConst && U.$$.ptrType.isConst && it(`Cannot convert argument of type ${U.$$.smartPtrType ? U.$$.smartPtrType.name : U.$$.ptrType.name} to parameter type ${this.name}`);
      var me = U.$$.ptrType.registeredClass;
      if (re = Cc(U.$$.ptr, me, this.registeredClass), this.isSmartPointer)
        switch (U.$$.smartPtr === void 0 && it("Passing raw pointer to smart pointer is illegal"), this.sharingPolicy) {
          case 0:
            U.$$.smartPtrType === this ? re = U.$$.smartPtr : it(`Cannot convert argument of type ${U.$$.smartPtrType ? U.$$.smartPtrType.name : U.$$.ptrType.name} to parameter type ${this.name}`);
            break;
          case 1:
            re = U.$$.smartPtr;
            break;
          case 2:
            if (U.$$.smartPtrType === this)
              re = U.$$.smartPtr;
            else {
              var Ve = U.clone();
              re = this.rawShare(re, Di.toHandle(() => Ve.delete())), L !== null && L.push(this.rawDestructor, re);
            }
            break;
          default:
            it("Unsupporting sharing policy");
        }
      return re;
    }
    function Jp(L, U) {
      if (U === null)
        return this.isReference && it(`null is not a valid ${this.name}`), 0;
      U.$$ || it(`Cannot pass "${hl(U)}" as a ${this.name}`), U.$$.ptr || it(`Cannot pass deleted object as a pointer of type ${this.name}`), U.$$.ptrType.isConst && it(`Cannot convert argument of type ${U.$$.ptrType.name} to parameter type ${this.name}`);
      var re = U.$$.ptrType.registeredClass, me = Cc(U.$$.ptr, re, this.registeredClass);
      return me;
    }
    function mm(L) {
      return this.fromWireType(C[L >> 2]);
    }
    var Xp = () => {
      Object.assign(fl.prototype, {
        getPointee(L) {
          return this.rawGetPointee && (L = this.rawGetPointee(L)), L;
        },
        destructor(L) {
          var U;
          (U = this.rawDestructor) === null || U === void 0 || U.call(this, L);
        },
        argPackAdvance: pt,
        readValueFromPointer: mm,
        deleteObject(L) {
          L !== null && L.delete();
        },
        fromWireType: Wp
      });
    };
    function fl(L, U, re, me, Ve, qe, Ue, Ye, lt, mt, St) {
      this.name = L, this.registeredClass = U, this.isReference = re, this.isConst = me, this.isSmartPointer = Ve, this.pointeeType = qe, this.sharingPolicy = Ue, this.rawGetPointee = Ye, this.rawConstructor = lt, this.rawShare = mt, this.rawDestructor = St, !Ve && U.baseClass === void 0 ? me ? (this.toWireType = fm, this.destructorFunction = null) : (this.toWireType = Jp, this.destructorFunction = null) : this.toWireType = Qp;
    }
    var nd = (L, U, re) => {
      n.hasOwnProperty(L) || Na("Replacing nonexistant public symbol"), n[L].overloadTable !== void 0 && re !== void 0 ? n[L].overloadTable[re] = U : (n[L] = U, n[L].argCount = re);
    }, hm = (L, U, re) => {
      var me = n["dynCall_" + L];
      return re && re.length ? me.apply(null, [U].concat(re)) : me.call(null, U);
    }, hs = [], _m, jn = (L) => {
      var U = hs[L];
      return U || (L >= hs.length && (hs.length = L + 1), hs[L] = U = _m.get(L)), U;
    }, Ac = (L, U, re) => {
      if (L.includes("j"))
        return hm(L, U, re);
      var me = jn(U).apply(null, re);
      return me;
    }, pm = (L, U) => {
      var re = [];
      return function() {
        return re.length = 0, Object.assign(re, arguments), Ac(L, U, re);
      };
    }, Xr = (L, U) => {
      L = ze(L);
      function re() {
        return L.includes("j") ? pm(L, U) : jn(U);
      }
      var me = re();
      return typeof me != "function" && it(`unknown function pointer with signature ${L}: ${U}`), me;
    }, gm = (L, U) => {
      var re = Xi(U, function(me) {
        this.name = U, this.message = me;
        var Ve = new Error(me).stack;
        Ve !== void 0 && (this.stack = this.toString() + `
` + Ve.replace(/^Error(:[^\n]*)?\n/, ""));
      });
      return re.prototype = Object.create(L.prototype), re.prototype.constructor = re, re.prototype.toString = function() {
        return this.message === void 0 ? this.name : `${this.name}: ${this.message}`;
      }, re;
    }, ad, xc = (L) => {
      var U = Fm(L), re = ze(U);
      return gi(U), re;
    }, Tc = (L, U) => {
      var re = [], me = {};
      function Ve(qe) {
        if (!me[qe] && !en[qe]) {
          if (zn[qe]) {
            zn[qe].forEach(Ve);
            return;
          }
          re.push(qe), me[qe] = !0;
        }
      }
      throw U.forEach(Ve), new ad(`${L}: ` + re.map(xc).join([", "]));
    }, ym = (L, U, re, me, Ve, qe, Ue, Ye, lt, mt, St, $t, Ht) => {
      St = ze(St), qe = Xr(Ve, qe), Ye && (Ye = Xr(Ue, Ye)), mt && (mt = Xr(lt, mt)), Ht = Xr($t, Ht);
      var zt = Gp(St);
      ms(zt, function() {
        Tc(`Cannot construct ${St} due to unbound types`, [me]);
      }), ba([L, U, re], me ? [me] : [], function(bn) {
        bn = bn[0];
        var Rn, kn;
        me ? (Rn = bn.registeredClass, kn = Rn.instancePrototype) : kn = Sc.prototype;
        var ma = Xi(St, function() {
          if (Object.getPrototypeOf(this) !== dt)
            throw new ft("Use 'new' to construct " + St);
          if (xt.constructor_body === void 0)
            throw new ft(St + " has no accessible constructor");
          var Hm = xt.constructor_body[arguments.length];
          if (Hm === void 0)
            throw new ft(`Tried to invoke ctor of ${St} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(xt.constructor_body).toString()}) parameters instead!`);
          return Hm.apply(this, arguments);
        }), dt = Object.create(kn, {
          constructor: {
            value: ma
          }
        });
        ma.prototype = dt;
        var xt = new dm(St, ma, dt, Ht, Rn, qe, Ye, mt);
        if (xt.baseClass) {
          var Ln, wa;
          (wa = (Ln = xt.baseClass).__derivedClasses) !== null && wa !== void 0 || (Ln.__derivedClasses = []), xt.baseClass.__derivedClasses.push(xt);
        }
        var yi = new fl(St, xt, !0, !1, !1), bi = new fl(St + "*", xt, !1, !1, !1), vl = new fl(St + " const*", xt, !1, !0, !1);
        return wc[L] = {
          pointerType: bi,
          constPointerType: vl
        }, nd(zt, ma), [yi, bi, vl];
      });
    }, ml = (L, U) => {
      for (var re = [], me = 0; me < L; me++)
        re.push(C[U + me * 4 >> 2]);
      return re;
    };
    function rd(L) {
      for (var U = 1; U < L.length; ++U)
        if (L[U] !== null && L[U].destructorFunction === void 0)
          return !0;
      return !1;
    }
    function Zi(L, U, re, me, Ve, qe) {
      var Ue = U.length;
      Ue < 2 && it("argTypes array size mismatch! Must at least get return value and 'this' types!");
      var Ye = U[1] !== null && re !== null, lt = rd(U), mt = U[0].name !== "void", St = Ue - 2, $t = new Array(St), Ht = [], zt = [], bn = function() {
        arguments.length !== St && it(`function ${L} called with ${arguments.length} arguments, expected ${St}`), zt.length = 0;
        var Rn;
        Ht.length = Ye ? 2 : 1, Ht[0] = Ve, Ye && (Rn = U[1].toWireType(zt, this), Ht[1] = Rn);
        for (var kn = 0; kn < St; ++kn)
          $t[kn] = U[kn + 2].toWireType(zt, arguments[kn]), Ht.push($t[kn]);
        var ma = me.apply(null, Ht);
        function dt(xt) {
          if (lt)
            It(zt);
          else
            for (var Ln = Ye ? 1 : 2; Ln < U.length; Ln++) {
              var wa = Ln === 1 ? Rn : $t[Ln - 2];
              U[Ln].destructorFunction !== null && U[Ln].destructorFunction(wa);
            }
          if (mt)
            return U[0].fromWireType(xt);
        }
        return dt(ma);
      };
      return Xi(L, bn);
    }
    var bm = (L, U, re, me, Ve, qe) => {
      var Ue = ml(U, re);
      Ve = Xr(me, Ve), ba([], [L], function(Ye) {
        Ye = Ye[0];
        var lt = `constructor ${Ye.name}`;
        if (Ye.registeredClass.constructor_body === void 0 && (Ye.registeredClass.constructor_body = []), Ye.registeredClass.constructor_body[U - 1] !== void 0)
          throw new ft(`Cannot register multiple constructors with identical number of parameters (${U - 1}) for class '${Ye.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);
        return Ye.registeredClass.constructor_body[U - 1] = () => {
          Tc(`Cannot construct ${Ye.name} due to unbound types`, Ue);
        }, ba([], Ue, (mt) => (mt.splice(1, 0, null), Ye.registeredClass.constructor_body[U - 1] = Zi(lt, mt, null, Ve, qe), [])), [];
      });
    }, id = (L) => {
      L = L.trim();
      const U = L.indexOf("(");
      return U !== -1 ? L.substr(0, U) : L;
    }, Zp = (L, U, re, me, Ve, qe, Ue, Ye, lt) => {
      var mt = ml(re, me);
      U = ze(U), U = id(U), qe = Xr(Ve, qe), ba([], [L], function(St) {
        St = St[0];
        var $t = `${St.name}.${U}`;
        U.startsWith("@@") && (U = Symbol[U.substring(2)]), Ye && St.registeredClass.pureVirtualFunctions.push(U);
        function Ht() {
          Tc(`Cannot call ${$t} due to unbound types`, mt);
        }
        var zt = St.registeredClass.instancePrototype, bn = zt[U];
        return bn === void 0 || bn.overloadTable === void 0 && bn.className !== St.name && bn.argCount === re - 2 ? (Ht.argCount = re - 2, Ht.className = St.name, zt[U] = Ht) : (um(zt, U, $t), zt[U].overloadTable[re - 2] = Ht), ba([], mt, function(Rn) {
          var kn = Zi($t, Rn, St, qe, Ue);
          return zt[U].overloadTable === void 0 ? (kn.argCount = re - 2, zt[U] = kn) : zt[U].overloadTable[re - 2] = kn, [];
        }), [];
      });
    };
    function wm() {
      Object.assign(od.prototype, {
        get(L) {
          return this.allocated[L];
        },
        has(L) {
          return this.allocated[L] !== void 0;
        },
        allocate(L) {
          var U = this.freelist.pop() || this.allocated.length;
          return this.allocated[U] = L, U;
        },
        free(L) {
          this.allocated[L] = void 0, this.freelist.push(L);
        }
      });
    }
    function od() {
      this.allocated = [void 0], this.freelist = [];
    }
    var xr = new od(), Ic = (L) => {
      L >= xr.reserved && --xr.get(L).refcount === 0 && xr.free(L);
    }, ev = () => {
      for (var L = 0, U = xr.reserved; U < xr.allocated.length; ++U)
        xr.allocated[U] !== void 0 && ++L;
      return L;
    }, tv = () => {
      xr.allocated.push({
        value: void 0
      }, {
        value: null
      }, {
        value: !0
      }, {
        value: !1
      }), xr.reserved = xr.allocated.length, n.count_emval_handles = ev;
    }, Di = {
      toValue: (L) => (L || it("Cannot use deleted val. handle = " + L), xr.get(L).value),
      toHandle: (L) => {
        switch (L) {
          case void 0:
            return 1;
          case null:
            return 2;
          case !0:
            return 3;
          case !1:
            return 4;
          default:
            return xr.allocate({
              refcount: 1,
              value: L
            });
        }
      }
    }, km = (L, U) => {
      U = ze(U), st(L, {
        name: U,
        fromWireType: (re) => {
          var me = Di.toValue(re);
          return Ic(re), me;
        },
        toWireType: (re, me) => Di.toHandle(me),
        argPackAdvance: pt,
        readValueFromPointer: rt,
        destructorFunction: null
      });
    }, nv = (L, U, re) => {
      switch (U) {
        case 1:
          return re ? function(me) {
            return this.fromWireType(b[me >> 0]);
          } : function(me) {
            return this.fromWireType(p[me >> 0]);
          };
        case 2:
          return re ? function(me) {
            return this.fromWireType(y[me >> 1]);
          } : function(me) {
            return this.fromWireType(S[me >> 1]);
          };
        case 4:
          return re ? function(me) {
            return this.fromWireType(E[me >> 2]);
          } : function(me) {
            return this.fromWireType(C[me >> 2]);
          };
        default:
          throw new TypeError(`invalid integer width (${U}): ${L}`);
      }
    }, av = (L, U, re, me) => {
      U = ze(U);
      function Ve() {
      }
      Ve.values = {}, st(L, {
        name: U,
        constructor: Ve,
        fromWireType: function(qe) {
          return this.constructor.values[qe];
        },
        toWireType: (qe, Ue) => Ue.value,
        argPackAdvance: pt,
        readValueFromPointer: nv(U, re, me),
        destructorFunction: null
      }), ms(U, Ve);
    }, sd = (L, U) => {
      var re = en[L];
      return re === void 0 && it(U + " has unknown type " + xc(L)), re;
    }, rv = (L, U, re) => {
      var me = sd(L, "enum");
      U = ze(U);
      var Ve = me.constructor, qe = Object.create(me.constructor.prototype, {
        value: {
          value: re
        },
        constructor: {
          value: Xi(`${me.name}_${U}`, function() {
          })
        }
      });
      Ve.values[re] = qe, Ve[U] = qe;
    }, hl = (L) => {
      if (L === null)
        return "null";
      var U = typeof L;
      return U === "object" || U === "array" || U === "function" ? L.toString() : "" + L;
    }, iv = (L, U) => {
      switch (U) {
        case 4:
          return function(re) {
            return this.fromWireType(D[re >> 2]);
          };
        case 8:
          return function(re) {
            return this.fromWireType(P[re >> 3]);
          };
        default:
          throw new TypeError(`invalid float width (${U}): ${L}`);
      }
    }, ov = (L, U, re) => {
      U = ze(U), st(L, {
        name: U,
        fromWireType: (me) => me,
        toWireType: (me, Ve) => Ve,
        argPackAdvance: pt,
        readValueFromPointer: iv(U, re),
        destructorFunction: null
      });
    }, sv = (L, U, re, me, Ve, qe, Ue) => {
      var Ye = ml(U, re);
      L = ze(L), L = id(L), Ve = Xr(me, Ve), ms(L, function() {
        Tc(`Cannot call ${L} due to unbound types`, Ye);
      }, U - 1), ba([], Ye, function(lt) {
        var mt = [lt[0], null].concat(lt.slice(1));
        return nd(L, Zi(L, mt, null, Ve, qe), U - 1), [];
      });
    }, lv = (L, U, re) => {
      switch (U) {
        case 1:
          return re ? (me) => b[me >> 0] : (me) => p[me >> 0];
        case 2:
          return re ? (me) => y[me >> 1] : (me) => S[me >> 1];
        case 4:
          return re ? (me) => E[me >> 2] : (me) => C[me >> 2];
        default:
          throw new TypeError(`invalid integer width (${U}): ${L}`);
      }
    }, cv = (L, U, re, me, Ve) => {
      U = ze(U);
      var qe = (St) => St;
      if (me === 0) {
        var Ue = 32 - 8 * re;
        qe = (St) => St << Ue >>> Ue;
      }
      var Ye = U.includes("unsigned"), lt = (St, $t) => {
      }, mt;
      Ye ? mt = function(St, $t) {
        return lt($t, this.name), $t >>> 0;
      } : mt = function(St, $t) {
        return lt($t, this.name), $t;
      }, st(L, {
        name: U,
        fromWireType: qe,
        toWireType: mt,
        argPackAdvance: pt,
        readValueFromPointer: lv(U, re, me !== 0),
        destructorFunction: null
      });
    }, Mn = (L, U, re) => {
      var me = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array], Ve = me[U];
      function qe(Ue) {
        var Ye = C[Ue >> 2], lt = C[Ue + 4 >> 2];
        return new Ve(b.buffer, lt, Ye);
      }
      re = ze(re), st(L, {
        name: re,
        fromWireType: qe,
        argPackAdvance: pt,
        readValueFromPointer: qe
      }, {
        ignoreDuplicateRegistrations: !0
      });
    }, xn = (L, U, re, me) => {
      if (!(me > 0))
        return 0;
      for (var Ve = re, qe = re + me - 1, Ue = 0; Ue < L.length; ++Ue) {
        var Ye = L.charCodeAt(Ue);
        if (Ye >= 55296 && Ye <= 57343) {
          var lt = L.charCodeAt(++Ue);
          Ye = 65536 + ((Ye & 1023) << 10) | lt & 1023;
        }
        if (Ye <= 127) {
          if (re >= qe)
            break;
          U[re++] = Ye;
        } else if (Ye <= 2047) {
          if (re + 1 >= qe)
            break;
          U[re++] = 192 | Ye >> 6, U[re++] = 128 | Ye & 63;
        } else if (Ye <= 65535) {
          if (re + 2 >= qe)
            break;
          U[re++] = 224 | Ye >> 12, U[re++] = 128 | Ye >> 6 & 63, U[re++] = 128 | Ye & 63;
        } else {
          if (re + 3 >= qe)
            break;
          U[re++] = 240 | Ye >> 18, U[re++] = 128 | Ye >> 12 & 63, U[re++] = 128 | Ye >> 6 & 63, U[re++] = 128 | Ye & 63;
        }
      }
      return U[re] = 0, re - Ve;
    }, uv = (L, U, re) => xn(L, p, U, re), Sm = (L) => {
      for (var U = 0, re = 0; re < L.length; ++re) {
        var me = L.charCodeAt(re);
        me <= 127 ? U++ : me <= 2047 ? U += 2 : me >= 55296 && me <= 57343 ? (U += 4, ++re) : U += 3;
      }
      return U;
    }, Cm = typeof TextDecoder < "u" ? new TextDecoder("utf8") : void 0, dv = (L, U, re) => {
      for (var me = U + re, Ve = U; L[Ve] && !(Ve >= me); )
        ++Ve;
      if (Ve - U > 16 && L.buffer && Cm)
        return Cm.decode(L.subarray(U, Ve));
      for (var qe = ""; U < Ve; ) {
        var Ue = L[U++];
        if (!(Ue & 128)) {
          qe += String.fromCharCode(Ue);
          continue;
        }
        var Ye = L[U++] & 63;
        if ((Ue & 224) == 192) {
          qe += String.fromCharCode((Ue & 31) << 6 | Ye);
          continue;
        }
        var lt = L[U++] & 63;
        if ((Ue & 240) == 224 ? Ue = (Ue & 15) << 12 | Ye << 6 | lt : Ue = (Ue & 7) << 18 | Ye << 12 | lt << 6 | L[U++] & 63, Ue < 65536)
          qe += String.fromCharCode(Ue);
        else {
          var mt = Ue - 65536;
          qe += String.fromCharCode(55296 | mt >> 10, 56320 | mt & 1023);
        }
      }
      return qe;
    }, ld = (L, U) => L ? dv(p, L, U) : "", fv = (L, U) => {
      U = ze(U);
      var re = U === "std::string";
      st(L, {
        name: U,
        fromWireType(me) {
          var Ve = C[me >> 2], qe = me + 4, Ue;
          if (re)
            for (var Ye = qe, lt = 0; lt <= Ve; ++lt) {
              var mt = qe + lt;
              if (lt == Ve || p[mt] == 0) {
                var St = mt - Ye, $t = ld(Ye, St);
                Ue === void 0 ? Ue = $t : (Ue += "\0", Ue += $t), Ye = mt + 1;
              }
            }
          else {
            for (var Ht = new Array(Ve), lt = 0; lt < Ve; ++lt)
              Ht[lt] = String.fromCharCode(p[qe + lt]);
            Ue = Ht.join("");
          }
          return gi(me), Ue;
        },
        toWireType(me, Ve) {
          Ve instanceof ArrayBuffer && (Ve = new Uint8Array(Ve));
          var qe, Ue = typeof Ve == "string";
          Ue || Ve instanceof Uint8Array || Ve instanceof Uint8ClampedArray || Ve instanceof Int8Array || it("Cannot pass non-string to std::string"), re && Ue ? qe = Sm(Ve) : qe = Ve.length;
          var Ye = gd(4 + qe + 1), lt = Ye + 4;
          if (C[Ye >> 2] = qe, re && Ue)
            uv(Ve, lt, qe + 1);
          else if (Ue)
            for (var mt = 0; mt < qe; ++mt) {
              var St = Ve.charCodeAt(mt);
              St > 255 && (gi(lt), it("String has UTF-16 code units that do not fit in 8 bits")), p[lt + mt] = St;
            }
          else
            for (var mt = 0; mt < qe; ++mt)
              p[lt + mt] = Ve[mt];
          return me !== null && me.push(gi, Ye), Ye;
        },
        argPackAdvance: pt,
        readValueFromPointer: mm,
        destructorFunction(me) {
          gi(me);
        }
      });
    }, cd = typeof TextDecoder < "u" ? new TextDecoder("utf-16le") : void 0, mv = (L, U) => {
      for (var re = L, me = re >> 1, Ve = me + U / 2; !(me >= Ve) && S[me]; )
        ++me;
      if (re = me << 1, re - L > 32 && cd)
        return cd.decode(p.subarray(L, re));
      for (var qe = "", Ue = 0; !(Ue >= U / 2); ++Ue) {
        var Ye = y[L + Ue * 2 >> 1];
        if (Ye == 0)
          break;
        qe += String.fromCharCode(Ye);
      }
      return qe;
    }, ja = (L, U, re) => {
      var me;
      if ((me = re) !== null && me !== void 0 || (re = 2147483647), re < 2)
        return 0;
      re -= 2;
      for (var Ve = U, qe = re < L.length * 2 ? re / 2 : L.length, Ue = 0; Ue < qe; ++Ue) {
        var Ye = L.charCodeAt(Ue);
        y[U >> 1] = Ye, U += 2;
      }
      return y[U >> 1] = 0, U - Ve;
    }, ud = (L) => L.length * 2, Eo = (L, U) => {
      for (var re = 0, me = ""; !(re >= U / 4); ) {
        var Ve = E[L + re * 4 >> 2];
        if (Ve == 0)
          break;
        if (++re, Ve >= 65536) {
          var qe = Ve - 65536;
          me += String.fromCharCode(55296 | qe >> 10, 56320 | qe & 1023);
        } else
          me += String.fromCharCode(Ve);
      }
      return me;
    }, Am = (L, U, re) => {
      var me;
      if ((me = re) !== null && me !== void 0 || (re = 2147483647), re < 4)
        return 0;
      for (var Ve = U, qe = Ve + re - 4, Ue = 0; Ue < L.length; ++Ue) {
        var Ye = L.charCodeAt(Ue);
        if (Ye >= 55296 && Ye <= 57343) {
          var lt = L.charCodeAt(++Ue);
          Ye = 65536 + ((Ye & 1023) << 10) | lt & 1023;
        }
        if (E[U >> 2] = Ye, U += 4, U + 4 > qe)
          break;
      }
      return E[U >> 2] = 0, U - Ve;
    }, dd = (L) => {
      for (var U = 0, re = 0; re < L.length; ++re) {
        var me = L.charCodeAt(re);
        me >= 55296 && me <= 57343 && ++re, U += 4;
      }
      return U;
    }, qr = (L, U, re) => {
      re = ze(re);
      var me, Ve, qe, Ue, Ye;
      U === 2 ? (me = mv, Ve = ja, Ue = ud, qe = () => S, Ye = 1) : U === 4 && (me = Eo, Ve = Am, Ue = dd, qe = () => C, Ye = 2), st(L, {
        name: re,
        fromWireType: (lt) => {
          for (var mt = C[lt >> 2], St = qe(), $t, Ht = lt + 4, zt = 0; zt <= mt; ++zt) {
            var bn = lt + 4 + zt * U;
            if (zt == mt || St[bn >> Ye] == 0) {
              var Rn = bn - Ht, kn = me(Ht, Rn);
              $t === void 0 ? $t = kn : ($t += "\0", $t += kn), Ht = bn + U;
            }
          }
          return gi(lt), $t;
        },
        toWireType: (lt, mt) => {
          typeof mt != "string" && it(`Cannot pass non-string to C++ string type ${re}`);
          var St = Ue(mt), $t = gd(4 + St + U);
          return C[$t >> 2] = St >> Ye, Ve(mt, $t + 4, St + U), lt !== null && lt.push(gi, $t), $t;
        },
        argPackAdvance: pt,
        readValueFromPointer: rt,
        destructorFunction(lt) {
          gi(lt);
        }
      });
    }, xm = (L, U, re, me, Ve, qe) => {
      _t[L] = {
        name: ze(U),
        rawConstructor: Xr(re, me),
        rawDestructor: Xr(Ve, qe),
        fields: []
      };
    }, Tm = (L, U, re, me, Ve, qe, Ue, Ye, lt, mt) => {
      _t[L].fields.push({
        fieldName: ze(U),
        getterReturnType: re,
        getter: Xr(me, Ve),
        getterContext: qe,
        setterArgumentType: Ue,
        setter: Xr(Ye, lt),
        setterContext: mt
      });
    }, Im = (L, U) => {
      U = ze(U), st(L, {
        isVoid: !0,
        name: U,
        argPackAdvance: 0,
        fromWireType: () => {
        },
        toWireType: (re, me) => {
        }
      });
    }, Ec = [], Em = (L, U, re, me) => (L = Ec[L], U = Di.toValue(U), L(null, U, re, me)), Pm = {}, Tr = (L) => {
      var U = Pm[L];
      return U === void 0 ? ze(L) : U;
    }, Om = () => {
      if (typeof globalThis == "object")
        return globalThis;
      function L(U) {
        U.$$$embind_global$$$ = U;
        var re = typeof $$$embind_global$$$ == "object" && U.$$$embind_global$$$ == U;
        return re || delete U.$$$embind_global$$$, re;
      }
      if (typeof $$$embind_global$$$ == "object" || (typeof global == "object" && L(global) ? $$$embind_global$$$ = global : typeof self == "object" && L(self) && ($$$embind_global$$$ = self), typeof $$$embind_global$$$ == "object"))
        return $$$embind_global$$$;
      throw Error("unable to get global object.");
    }, Hr = (L) => L === 0 ? Di.toHandle(Om()) : (L = Tr(L), Di.toHandle(Om()[L])), hv = (L) => {
      var U = Ec.length;
      return Ec.push(L), U;
    }, Dm = (L, U) => {
      for (var re = new Array(L), me = 0; me < L; ++me)
        re[me] = sd(C[U + me * 4 >> 2], "parameter " + me);
      return re;
    }, eo = Reflect.construct, Pc = (L, U, re) => {
      var me = [], Ve = L.toWireType(me, re);
      return me.length && (C[U >> 2] = Di.toHandle(me)), Ve;
    }, fd = (L, U, re) => {
      var me = Dm(L, U), Ve = me.shift();
      L--;
      var qe = new Array(L), Ue = (lt, mt, St, $t) => {
        for (var Ht = 0, zt = 0; zt < L; ++zt)
          qe[zt] = me[zt].readValueFromPointer($t + Ht), Ht += me[zt].argPackAdvance;
        for (var bn = re === 1 ? eo(mt, qe) : mt.apply(lt, qe), zt = 0; zt < L; ++zt) {
          var Rn, kn;
          (Rn = (kn = me[zt]).deleteObject) === null || Rn === void 0 || Rn.call(kn, qe[zt]);
        }
        return Pc(Ve, St, bn);
      }, Ye = `methodCaller<(${me.map((lt) => lt.name).join(", ")}) => ${Ve.name}>`;
      return hv(Xi(Ye, Ue));
    }, Un = (L) => {
      L > 4 && (xr.get(L).refcount += 1);
    }, to = (L) => {
      var U = Di.toValue(L);
      It(U), Ic(L);
    }, md = (L, U) => {
      L = sd(L, "_emval_take_value");
      var re = L.readValueFromPointer(U);
      return Di.toHandle(re);
    }, _v = () => {
      se("");
    }, hd = (L, U, re) => p.copyWithin(L, U, U + re), pv = () => 2147483648, vv = (L) => {
      var U = v.buffer, re = (L - U.byteLength + 65535) / 65536;
      try {
        return v.grow(re), O(), 1;
      } catch {
      }
    }, gv = (L) => {
      var U = p.length;
      L >>>= 0;
      var re = pv();
      if (L > re)
        return !1;
      for (var me = (lt, mt) => lt + (mt - lt % mt) % mt, Ve = 1; Ve <= 4; Ve *= 2) {
        var qe = U * (1 + 0.2 / Ve);
        qe = Math.min(qe, L + 100663296);
        var Ue = Math.min(re, me(Math.max(L, qe), 65536)), Ye = vv(Ue);
        if (Ye)
          return !0;
      }
      return !1;
    }, Oc = {}, Dc = () => o || "./this.program", vi = () => {
      if (!vi.strings) {
        var L = (typeof navigator == "object" && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", U = {
          USER: "web_user",
          LOGNAME: "web_user",
          PATH: "/",
          PWD: "/",
          HOME: "/home/web_user",
          LANG: L,
          _: Dc()
        };
        for (var re in Oc)
          Oc[re] === void 0 ? delete U[re] : U[re] = Oc[re];
        var me = [];
        for (var re in U)
          me.push(`${re}=${U[re]}`);
        vi.strings = me;
      }
      return vi.strings;
    }, yv = (L, U) => {
      for (var re = 0; re < L.length; ++re)
        b[U++ >> 0] = L.charCodeAt(re);
      b[U >> 0] = 0;
    }, Bm = (L, U) => {
      var re = 0;
      return vi().forEach((me, Ve) => {
        var qe = U + re;
        C[L + Ve * 4 >> 2] = qe, yv(me, qe), re += me.length + 1;
      }), 0;
    }, Vm = (L, U) => {
      var re = vi();
      C[L >> 2] = re.length;
      var me = 0;
      return re.forEach((Ve) => me += Ve.length + 1), C[U >> 2] = me, 0;
    }, _d = (L) => L, _s = (L) => L % 4 === 0 && (L % 100 !== 0 || L % 400 === 0), Mm = (L, U) => {
      for (var re = 0, me = 0; me <= U; re += L[me++])
        ;
      return re;
    }, Rm = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], Bc = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], pd = (L, U) => {
      for (var re = new Date(L.getTime()); U > 0; ) {
        var me = _s(re.getFullYear()), Ve = re.getMonth(), qe = (me ? Rm : Bc)[Ve];
        if (U > qe - re.getDate())
          U -= qe - re.getDate() + 1, re.setDate(1), Ve < 11 ? re.setMonth(Ve + 1) : (re.setMonth(0), re.setFullYear(re.getFullYear() + 1));
        else
          return re.setDate(re.getDate() + U), re;
      }
      return re;
    };
    function bv(L, U, re) {
      var me = Sm(L) + 1, Ve = new Array(me);
      return xn(L, Ve, 0, Ve.length), Ve;
    }
    var Lm = (L, U) => {
      b.set(L, U);
    }, Ir = (L, U, re, me) => {
      var Ve = C[me + 40 >> 2], qe = {
        tm_sec: E[me >> 2],
        tm_min: E[me + 4 >> 2],
        tm_hour: E[me + 8 >> 2],
        tm_mday: E[me + 12 >> 2],
        tm_mon: E[me + 16 >> 2],
        tm_year: E[me + 20 >> 2],
        tm_wday: E[me + 24 >> 2],
        tm_yday: E[me + 28 >> 2],
        tm_isdst: E[me + 32 >> 2],
        tm_gmtoff: E[me + 36 >> 2],
        tm_zone: Ve ? ld(Ve) : ""
      }, Ue = ld(re), Ye = {
        "%c": "%a %b %d %H:%M:%S %Y",
        "%D": "%m/%d/%y",
        "%F": "%Y-%m-%d",
        "%h": "%b",
        "%r": "%I:%M:%S %p",
        "%R": "%H:%M",
        "%T": "%H:%M:%S",
        "%x": "%m/%d/%y",
        "%X": "%H:%M:%S",
        "%Ec": "%c",
        "%EC": "%C",
        "%Ex": "%m/%d/%y",
        "%EX": "%H:%M:%S",
        "%Ey": "%y",
        "%EY": "%Y",
        "%Od": "%d",
        "%Oe": "%e",
        "%OH": "%H",
        "%OI": "%I",
        "%Om": "%m",
        "%OM": "%M",
        "%OS": "%S",
        "%Ou": "%u",
        "%OU": "%U",
        "%OV": "%V",
        "%Ow": "%w",
        "%OW": "%W",
        "%Oy": "%y"
      };
      for (var lt in Ye)
        Ue = Ue.replace(new RegExp(lt, "g"), Ye[lt]);
      var mt = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], St = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      function $t(dt, xt, Ln) {
        for (var wa = typeof dt == "number" ? dt.toString() : dt || ""; wa.length < xt; )
          wa = Ln[0] + wa;
        return wa;
      }
      function Ht(dt, xt) {
        return $t(dt, xt, "0");
      }
      function zt(dt, xt) {
        function Ln(yi) {
          return yi < 0 ? -1 : yi > 0 ? 1 : 0;
        }
        var wa;
        return (wa = Ln(dt.getFullYear() - xt.getFullYear())) === 0 && (wa = Ln(dt.getMonth() - xt.getMonth())) === 0 && (wa = Ln(dt.getDate() - xt.getDate())), wa;
      }
      function bn(dt) {
        switch (dt.getDay()) {
          case 0:
            return new Date(dt.getFullYear() - 1, 11, 29);
          case 1:
            return dt;
          case 2:
            return new Date(dt.getFullYear(), 0, 3);
          case 3:
            return new Date(dt.getFullYear(), 0, 2);
          case 4:
            return new Date(dt.getFullYear(), 0, 1);
          case 5:
            return new Date(dt.getFullYear() - 1, 11, 31);
          case 6:
            return new Date(dt.getFullYear() - 1, 11, 30);
        }
      }
      function Rn(dt) {
        var xt = pd(new Date(dt.tm_year + 1900, 0, 1), dt.tm_yday), Ln = new Date(xt.getFullYear(), 0, 4), wa = new Date(xt.getFullYear() + 1, 0, 4), yi = bn(Ln), bi = bn(wa);
        return zt(yi, xt) <= 0 ? zt(bi, xt) <= 0 ? xt.getFullYear() + 1 : xt.getFullYear() : xt.getFullYear() - 1;
      }
      var kn = {
        "%a": (dt) => mt[dt.tm_wday].substring(0, 3),
        "%A": (dt) => mt[dt.tm_wday],
        "%b": (dt) => St[dt.tm_mon].substring(0, 3),
        "%B": (dt) => St[dt.tm_mon],
        "%C": (dt) => {
          var xt = dt.tm_year + 1900;
          return Ht(xt / 100 | 0, 2);
        },
        "%d": (dt) => Ht(dt.tm_mday, 2),
        "%e": (dt) => $t(dt.tm_mday, 2, " "),
        "%g": (dt) => Rn(dt).toString().substring(2),
        "%G": (dt) => Rn(dt),
        "%H": (dt) => Ht(dt.tm_hour, 2),
        "%I": (dt) => {
          var xt = dt.tm_hour;
          return xt == 0 ? xt = 12 : xt > 12 && (xt -= 12), Ht(xt, 2);
        },
        "%j": (dt) => Ht(dt.tm_mday + Mm(_s(dt.tm_year + 1900) ? Rm : Bc, dt.tm_mon - 1), 3),
        "%m": (dt) => Ht(dt.tm_mon + 1, 2),
        "%M": (dt) => Ht(dt.tm_min, 2),
        "%n": () => `
`,
        "%p": (dt) => dt.tm_hour >= 0 && dt.tm_hour < 12 ? "AM" : "PM",
        "%S": (dt) => Ht(dt.tm_sec, 2),
        "%t": () => "	",
        "%u": (dt) => dt.tm_wday || 7,
        "%U": (dt) => {
          var xt = dt.tm_yday + 7 - dt.tm_wday;
          return Ht(Math.floor(xt / 7), 2);
        },
        "%V": (dt) => {
          var xt = Math.floor((dt.tm_yday + 7 - (dt.tm_wday + 6) % 7) / 7);
          if ((dt.tm_wday + 371 - dt.tm_yday - 2) % 7 <= 2 && xt++, xt) {
            if (xt == 53) {
              var Ln = (dt.tm_wday + 371 - dt.tm_yday) % 7;
              Ln != 4 && (Ln != 3 || !_s(dt.tm_year)) && (xt = 1);
            }
          } else {
            xt = 52;
            var wa = (dt.tm_wday + 7 - dt.tm_yday - 1) % 7;
            (wa == 4 || wa == 5 && _s(dt.tm_year % 400 - 1)) && xt++;
          }
          return Ht(xt, 2);
        },
        "%w": (dt) => dt.tm_wday,
        "%W": (dt) => {
          var xt = dt.tm_yday + 7 - (dt.tm_wday + 6) % 7;
          return Ht(Math.floor(xt / 7), 2);
        },
        "%y": (dt) => (dt.tm_year + 1900).toString().substring(2),
        "%Y": (dt) => dt.tm_year + 1900,
        "%z": (dt) => {
          var xt = dt.tm_gmtoff, Ln = xt >= 0;
          return xt = Math.abs(xt) / 60, xt = xt / 60 * 100 + xt % 60, (Ln ? "+" : "-") + ("0000" + xt).slice(-4);
        },
        "%Z": (dt) => dt.tm_zone,
        "%%": () => "%"
      };
      Ue = Ue.replace(/%%/g, "\0\0");
      for (var lt in kn)
        Ue.includes(lt) && (Ue = Ue.replace(new RegExp(lt, "g"), kn[lt](qe)));
      Ue = Ue.replace(/\0\0/g, "%");
      var ma = bv(Ue);
      return ma.length > U ? 0 : (Lm(ma, L), ma.length - 1);
    }, vd = (L, U, re, me, Ve) => Ir(L, U, re, me);
    ta = n.InternalError = class extends Error {
      constructor(L) {
        super(L), this.name = "InternalError";
      }
    }, Ja(), ft = n.BindingError = class extends Error {
      constructor(L) {
        super(L), this.name = "BindingError";
      }
    }, jp(), Hp(), Xp(), ad = n.UnboundTypeError = gm(Error, "UnboundTypeError"), wm(), tv();
    var _l = {
      s: le,
      u: Ce,
      b: Pe,
      g: Ee,
      q: Je,
      J: _e,
      f: $e,
      V: Ze,
      d: ie,
      da: Wn,
      Q: Vn,
      _: xa,
      ca: ym,
      ba: bm,
      w: Zp,
      Y: km,
      x: av,
      h: rv,
      L: ov,
      M: sv,
      t: cv,
      o: Mn,
      K: fv,
      C: qr,
      A: xm,
      ea: Tm,
      $: Im,
      R: Em,
      ha: Ic,
      fa: Hr,
      Z: fd,
      N: Un,
      O: to,
      aa: md,
      B: _v,
      X: hd,
      W: gv,
      T: Bm,
      U: Vm,
      E: Ke,
      D: ps,
      F: et,
      n: Ct,
      a: Mc,
      e: $m,
      m: Sv,
      k: Av,
      H: vs,
      v: Tv,
      G: Fe,
      z: gn,
      P: In,
      l: Cv,
      j: Zr,
      c: kv,
      p: wv,
      I: Iv,
      r: jt,
      i: xv,
      y: Ta,
      ga: _d,
      S: vd
    }, na = Le(), gi = n._free = (L) => (gi = n._free = na.ka)(L), gd = n._malloc = (L) => (gd = n._malloc = na.la)(L), Fm = (L) => (Fm = na.na)(L), Kn = (L, U) => (Kn = na.oa)(L, U), pl = (L) => (pl = na.pa)(L), aa = () => (aa = na.qa)(), Tn = (L) => (Tn = na.ra)(L), Nm = (L) => (Nm = na.sa)(L), Um = (L) => (Um = na.ta)(L), Vc = (L, U, re) => (Vc = na.ua)(L, U, re), yd = (L) => (yd = na.va)(L);
    n.dynCall_viijii = (L, U, re, me, Ve, qe, Ue) => (n.dynCall_viijii = na.wa)(L, U, re, me, Ve, qe, Ue);
    var Bi = n.dynCall_jiiii = (L, U, re, me, Ve) => (Bi = n.dynCall_jiiii = na.xa)(L, U, re, me, Ve);
    n.dynCall_iiiiij = (L, U, re, me, Ve, qe, Ue) => (n.dynCall_iiiiij = na.ya)(L, U, re, me, Ve, qe, Ue), n.dynCall_iiiiijj = (L, U, re, me, Ve, qe, Ue, Ye, lt) => (n.dynCall_iiiiijj = na.za)(L, U, re, me, Ve, qe, Ue, Ye, lt), n.dynCall_iiiiiijj = (L, U, re, me, Ve, qe, Ue, Ye, lt, mt) => (n.dynCall_iiiiiijj = na.Aa)(L, U, re, me, Ve, qe, Ue, Ye, lt, mt);
    function Mc(L, U) {
      var re = aa();
      try {
        return jn(L)(U);
      } catch (me) {
        if (Tn(re), me !== me + 0)
          throw me;
        Kn(1, 0);
      }
    }
    function wv(L, U, re, me) {
      var Ve = aa();
      try {
        jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Kn(1, 0);
      }
    }
    function kv(L, U, re) {
      var me = aa();
      try {
        jn(L)(U, re);
      } catch (Ve) {
        if (Tn(me), Ve !== Ve + 0)
          throw Ve;
        Kn(1, 0);
      }
    }
    function Sv(L, U, re, me) {
      var Ve = aa();
      try {
        return jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Kn(1, 0);
      }
    }
    function ps(L, U, re, me, Ve) {
      var qe = aa();
      try {
        return jn(L)(U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Kn(1, 0);
      }
    }
    function Zr(L, U) {
      var re = aa();
      try {
        jn(L)(U);
      } catch (me) {
        if (Tn(re), me !== me + 0)
          throw me;
        Kn(1, 0);
      }
    }
    function $m(L, U, re) {
      var me = aa();
      try {
        return jn(L)(U, re);
      } catch (Ve) {
        if (Tn(me), Ve !== Ve + 0)
          throw Ve;
        Kn(1, 0);
      }
    }
    function Cv(L) {
      var U = aa();
      try {
        jn(L)();
      } catch (re) {
        if (Tn(U), re !== re + 0)
          throw re;
        Kn(1, 0);
      }
    }
    function Av(L, U, re, me, Ve) {
      var qe = aa();
      try {
        return jn(L)(U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Kn(1, 0);
      }
    }
    function xv(L, U, re, me, Ve, qe, Ue, Ye, lt, mt, St) {
      var $t = aa();
      try {
        jn(L)(U, re, me, Ve, qe, Ue, Ye, lt, mt, St);
      } catch (Ht) {
        if (Tn($t), Ht !== Ht + 0)
          throw Ht;
        Kn(1, 0);
      }
    }
    function Tv(L, U, re, me, Ve, qe, Ue) {
      var Ye = aa();
      try {
        return jn(L)(U, re, me, Ve, qe, Ue);
      } catch (lt) {
        if (Tn(Ye), lt !== lt + 0)
          throw lt;
        Kn(1, 0);
      }
    }
    function Iv(L, U, re, me, Ve) {
      var qe = aa();
      try {
        jn(L)(U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Kn(1, 0);
      }
    }
    function vs(L, U, re, me, Ve, qe) {
      var Ue = aa();
      try {
        return jn(L)(U, re, me, Ve, qe);
      } catch (Ye) {
        if (Tn(Ue), Ye !== Ye + 0)
          throw Ye;
        Kn(1, 0);
      }
    }
    function Fe(L, U, re, me, Ve, qe, Ue, Ye) {
      var lt = aa();
      try {
        return jn(L)(U, re, me, Ve, qe, Ue, Ye);
      } catch (mt) {
        if (Tn(lt), mt !== mt + 0)
          throw mt;
        Kn(1, 0);
      }
    }
    function et(L, U, re, me) {
      var Ve = aa();
      try {
        return jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Kn(1, 0);
      }
    }
    function Ke(L, U, re, me) {
      var Ve = aa();
      try {
        return jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Kn(1, 0);
      }
    }
    function Ct(L) {
      var U = aa();
      try {
        return jn(L)();
      } catch (re) {
        if (Tn(U), re !== re + 0)
          throw re;
        Kn(1, 0);
      }
    }
    function jt(L, U, re, me, Ve, qe, Ue, Ye) {
      var lt = aa();
      try {
        jn(L)(U, re, me, Ve, qe, Ue, Ye);
      } catch (mt) {
        if (Tn(lt), mt !== mt + 0)
          throw mt;
        Kn(1, 0);
      }
    }
    function gn(L, U, re, me, Ve, qe, Ue, Ye, lt, mt, St, $t) {
      var Ht = aa();
      try {
        return jn(L)(U, re, me, Ve, qe, Ue, Ye, lt, mt, St, $t);
      } catch (zt) {
        if (Tn(Ht), zt !== zt + 0)
          throw zt;
        Kn(1, 0);
      }
    }
    function Ta(L, U, re, me, Ve, qe, Ue, Ye, lt, mt, St, $t, Ht, zt, bn, Rn) {
      var kn = aa();
      try {
        jn(L)(U, re, me, Ve, qe, Ue, Ye, lt, mt, St, $t, Ht, zt, bn, Rn);
      } catch (ma) {
        if (Tn(kn), ma !== ma + 0)
          throw ma;
        Kn(1, 0);
      }
    }
    function In(L, U, re, me, Ve) {
      var qe = aa();
      try {
        return Bi(L, U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Kn(1, 0);
      }
    }
    var gs;
    Z = function L() {
      gs || qm(), gs || (Z = L);
    };
    function qm() {
      if (de > 0 || (M(), de > 0))
        return;
      function L() {
        gs || (gs = !0, n.calledRun = !0, !w && (B(), a(n), n.onRuntimeInitialized && n.onRuntimeInitialized(), N()));
      }
      n.setStatus ? (n.setStatus("Running..."), setTimeout(function() {
        setTimeout(function() {
          n.setStatus("");
        }, 1), L();
      }, 1)) : L();
    }
    if (n.preInit)
      for (typeof n.preInit == "function" && (n.preInit = [n.preInit]); n.preInit.length > 0; )
        n.preInit.pop()();
    return qm(), t.ready;
  };
})();
function NX(e) {
  return i1(
    o1,
    e
  );
}
async function UX(e, t) {
  return LX(
    o1,
    e,
    t
  );
}
async function $X(e, t) {
  return FX(
    o1,
    e,
    t
  );
}
var Kd;
class wy extends EventTarget {
  constructor(t = {}) {
    var n;
    super(), mX(this, Kd, void 0);
    try {
      const a = (n = t?.formats) == null ? void 0 : n.filter(
        (r) => r !== "unknown"
      );
      if (a?.length === 0)
        throw new TypeError("Hint option provided, but is empty.");
      a?.forEach((r) => {
        if (!r_.has(r))
          throw new TypeError(
            `Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${r}' is not a valid enum value of type BarcodeFormat.`
          );
      }), hX(this, Kd, a ?? []), NX().then((r) => {
        this.dispatchEvent(
          new CustomEvent("load", {
            detail: r
          })
        );
      }).catch((r) => {
        this.dispatchEvent(new CustomEvent("error", { detail: r }));
      });
    } catch (a) {
      throw DA(
        a,
        "Failed to construct 'BarcodeDetector'"
      );
    }
  }
  static async getSupportedFormats() {
    return _X.filter((t) => t !== "unknown");
  }
  async detect(t) {
    try {
      const n = await kX(t);
      if (n === null)
        return [];
      let a;
      try {
        mD(n) ? a = await UX(n, {
          tryHarder: !0,
          formats: OA(this, Kd).map((r) => r_.get(r))
        }) : a = await $X(n, {
          tryHarder: !0,
          formats: OA(this, Kd).map((r) => r_.get(r))
        });
      } catch (r) {
        throw console.error(r), new DOMException(
          "Barcode detection service unavailable.",
          "NotSupportedError"
        );
      }
      return a.map((r) => {
        const {
          topLeft: { x: i, y: o },
          topRight: { x: l, y: s },
          bottomLeft: { x: d, y: u },
          bottomRight: { x: f, y: h }
        } = r.position, g = Math.min(i, l, d, f), v = Math.min(o, s, u, h), w = Math.max(i, l, d, f), b = Math.max(o, s, u, h);
        return {
          boundingBox: new DOMRectReadOnly(
            g,
            v,
            w - g,
            b - v
          ),
          rawValue: r.text,
          format: pX(r.format),
          cornerPoints: [
            {
              x: i,
              y: o
            },
            {
              x: l,
              y: s
            },
            {
              x: f,
              y: h
            },
            {
              x: d,
              y: u
            }
          ]
        };
      });
    } catch (n) {
      throw DA(
        n,
        "Failed to execute 'detect' on 'BarcodeDetector'"
      );
    }
  }
}
Kd = /* @__PURE__ */ new WeakMap();
const vD = (e, t, n = "error") => {
  let a, r;
  const i = new Promise(
    (o, l) => {
      a = o, r = l, e.addEventListener(t, a), e.addEventListener(n, r);
    }
  );
  return i.finally(() => {
    e.removeEventListener(t, a), e.removeEventListener(n, r);
  }), i;
}, RA = (e) => new Promise((t) => setTimeout(t, e));
class gD extends Error {
  constructor() {
    super("this browser has no Stream API support"), this.name = "StreamApiNotSupportedError";
  }
}
class qX extends Error {
  constructor() {
    super(
      "camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."
    ), this.name = "InsecureContextError";
  }
}
class HX extends Error {
  constructor() {
    super(
      "Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"
    ), this.name = "StreamLoadTimeoutError";
  }
}
const zX = (e) => {
  let t = !1, n;
  return (...a) => (t || (n = e(a), t = !0), n);
};
function oo(e, t) {
  if (e === !1)
    throw new Error(t ?? "assertion failure");
}
function LA(e) {
  throw new Error("this code should be unreachable");
}
function WX() {
  return navigator.platform.toUpperCase().includes("MAC");
}
let yD;
async function jX(e) {
  if (window.BarcodeDetector === void 0)
    return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."), new wy({ formats: e });
  const t = await window.BarcodeDetector.getSupportedFormats(), n = e.filter((a) => !t.includes(a));
  return n.length > 0 ? (console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(n)}. Will use polyfill.`), new wy({ formats: e })) : WX() && e.includes("pdf417") ? (console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."), new wy({ formats: e })) : (console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."), new window.BarcodeDetector({ formats: e }));
}
async function bD(e) {
  yD = await jX(e);
}
const KX = async (e, {
  detectHandler: t,
  locateHandler: n,
  minDelay: a,
  formats: r
}) => {
  console.debug("[vue-qrcode-reader] start scanning"), await bD(r);
  const i = (o) => async (l) => {
    if (e.readyState === 0)
      console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");
    else {
      const { lastScanned: s, contentBefore: d, lastScanHadContent: u } = o;
      if (l - s < a)
        window.requestAnimationFrame(i(o));
      else {
        const f = await yD.detect(e), h = f.some((w) => !d.includes(w.rawValue));
        h && t(f);
        const g = f.length > 0;
        g && n(f), !g && u && n(f);
        const v = {
          lastScanned: l,
          lastScanHadContent: g,
          // It can happen that a QR code is constantly in view of the camera but
          // maybe a scanned frame is a bit blurry and we detect nothing but in the
          // next frame we detect the code again. We also want to avoid emitting
          // a `detect` event in such a case. So we don't reset `contentBefore`,
          // if we detect nothing, only if we detect something new.
          contentBefore: h ? f.map((w) => w.rawValue) : d
        };
        window.requestAnimationFrame(i(v));
      }
    }
  };
  i({
    lastScanned: performance.now(),
    contentBefore: [],
    lastScanHadContent: !1
  })(performance.now());
};
var wD = {}, Jr = {};
Object.defineProperty(Jr, "__esModule", {
  value: !0
});
Jr.compactObject = CD;
Jr.deprecated = nZ;
var YX = Jr.detectBrowser = aZ;
Jr.disableLog = ZX;
Jr.disableWarnings = eZ;
Jr.extractVersion = i_;
Jr.filterStats = rZ;
Jr.log = tZ;
Jr.walkStats = j_;
Jr.wrapPeerConnectionEvent = XX;
function GX(e, t, n) {
  return t = QX(t), t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e;
}
function QX(e) {
  var t = JX(e, "string");
  return Xs(t) === "symbol" ? t : String(t);
}
function JX(e, t) {
  if (Xs(e) !== "object" || e === null)
    return e;
  var n = e[Symbol.toPrimitive];
  if (n !== void 0) {
    var a = n.call(e, t);
    if (Xs(a) !== "object")
      return a;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e);
}
function Xs(e) {
  "@babel/helpers - typeof";
  return Xs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Xs(e);
}
var kD = !0, SD = !0;
function i_(e, t, n) {
  var a = e.match(t);
  return a && a.length >= n && parseInt(a[n], 10);
}
function XX(e, t, n) {
  if (e.RTCPeerConnection) {
    var a = e.RTCPeerConnection.prototype, r = a.addEventListener;
    a.addEventListener = function(o, l) {
      if (o !== t)
        return r.apply(this, arguments);
      var s = function(d) {
        var u = n(d);
        u && (l.handleEvent ? l.handleEvent(u) : l(u));
      };
      return this._eventMap = this._eventMap || {}, this._eventMap[t] || (this._eventMap[t] = /* @__PURE__ */ new Map()), this._eventMap[t].set(l, s), r.apply(this, [o, s]);
    };
    var i = a.removeEventListener;
    a.removeEventListener = function(o, l) {
      if (o !== t || !this._eventMap || !this._eventMap[t])
        return i.apply(this, arguments);
      if (!this._eventMap[t].has(l))
        return i.apply(this, arguments);
      var s = this._eventMap[t].get(l);
      return this._eventMap[t].delete(l), this._eventMap[t].size === 0 && delete this._eventMap[t], Object.keys(this._eventMap).length === 0 && delete this._eventMap, i.apply(this, [o, s]);
    }, Object.defineProperty(a, "on" + t, {
      get: function() {
        return this["_on" + t];
      },
      set: function(o) {
        this["_on" + t] && (this.removeEventListener(t, this["_on" + t]), delete this["_on" + t]), o && this.addEventListener(t, this["_on" + t] = o);
      },
      enumerable: !0,
      configurable: !0
    });
  }
}
function ZX(e) {
  return typeof e != "boolean" ? new Error("Argument type: " + Xs(e) + ". Please use a boolean.") : (kD = e, e ? "adapter.js logging disabled" : "adapter.js logging enabled");
}
function eZ(e) {
  return typeof e != "boolean" ? new Error("Argument type: " + Xs(e) + ". Please use a boolean.") : (SD = !e, "adapter.js deprecation warnings " + (e ? "disabled" : "enabled"));
}
function tZ() {
  if ((typeof window > "u" ? "undefined" : Xs(window)) === "object") {
    if (kD)
      return;
    typeof console < "u" && typeof console.log == "function" && console.log.apply(console, arguments);
  }
}
function nZ(e, t) {
  SD && console.warn(e + " is deprecated, please use " + t + " instead.");
}
function aZ(e) {
  var t = {
    browser: null,
    version: null
  };
  if (typeof e > "u" || !e.navigator || !e.navigator.userAgent)
    return t.browser = "Not a browser.", t;
  var n = e.navigator;
  if (n.mozGetUserMedia)
    t.browser = "firefox", t.version = i_(n.userAgent, /Firefox\/(\d+)\./, 1);
  else if (n.webkitGetUserMedia || e.isSecureContext === !1 && e.webkitRTCPeerConnection)
    t.browser = "chrome", t.version = i_(n.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
  else if (e.RTCPeerConnection && n.userAgent.match(/AppleWebKit\/(\d+)\./))
    t.browser = "safari", t.version = i_(n.userAgent, /AppleWebKit\/(\d+)\./, 1), t.supportsUnifiedPlan = e.RTCRtpTransceiver && "currentDirection" in e.RTCRtpTransceiver.prototype;
  else
    return t.browser = "Not a supported browser.", t;
  return t;
}
function FA(e) {
  return Object.prototype.toString.call(e) === "[object Object]";
}
function CD(e) {
  return FA(e) ? Object.keys(e).reduce(function(t, n) {
    var a = FA(e[n]), r = a ? CD(e[n]) : e[n], i = a && !Object.keys(r).length;
    return r === void 0 || i ? t : Object.assign(t, GX({}, n, r));
  }, {}) : e;
}
function j_(e, t, n) {
  !t || n.has(t.id) || (n.set(t.id, t), Object.keys(t).forEach(function(a) {
    a.endsWith("Id") ? j_(e, e.get(t[a]), n) : a.endsWith("Ids") && t[a].forEach(function(r) {
      j_(e, e.get(r), n);
    });
  }));
}
function rZ(e, t, n) {
  var a = n ? "outbound-rtp" : "inbound-rtp", r = /* @__PURE__ */ new Map();
  if (t === null)
    return r;
  var i = [];
  return e.forEach(function(o) {
    o.type === "track" && o.trackIdentifier === t.id && i.push(o);
  }), i.forEach(function(o) {
    e.forEach(function(l) {
      l.type === a && l.trackId === o.id && j_(e, l, r);
    });
  }), r;
}
Object.defineProperty(wD, "__esModule", {
  value: !0
});
var iZ = wD.shimGetUserMedia = lZ, oZ = sZ(Jr);
function AD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (AD = function(a) {
    return a ? n : t;
  })(e);
}
function sZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || Vs(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = AD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function Vs(e) {
  "@babel/helpers - typeof";
  return Vs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Vs(e);
}
var NA = oZ.log;
function lZ(e, t) {
  var n = e && e.navigator;
  if (n.mediaDevices) {
    var a = function(s) {
      if (Vs(s) !== "object" || s.mandatory || s.optional)
        return s;
      var d = {};
      return Object.keys(s).forEach(function(u) {
        if (!(u === "require" || u === "advanced" || u === "mediaSource")) {
          var f = Vs(s[u]) === "object" ? s[u] : {
            ideal: s[u]
          };
          f.exact !== void 0 && typeof f.exact == "number" && (f.min = f.max = f.exact);
          var h = function(v, w) {
            return v ? v + w.charAt(0).toUpperCase() + w.slice(1) : w === "deviceId" ? "sourceId" : w;
          };
          if (f.ideal !== void 0) {
            d.optional = d.optional || [];
            var g = {};
            typeof f.ideal == "number" ? (g[h("min", u)] = f.ideal, d.optional.push(g), g = {}, g[h("max", u)] = f.ideal, d.optional.push(g)) : (g[h("", u)] = f.ideal, d.optional.push(g));
          }
          f.exact !== void 0 && typeof f.exact != "number" ? (d.mandatory = d.mandatory || {}, d.mandatory[h("", u)] = f.exact) : ["min", "max"].forEach(function(v) {
            f[v] !== void 0 && (d.mandatory = d.mandatory || {}, d.mandatory[h(v, u)] = f[v]);
          });
        }
      }), s.advanced && (d.optional = (d.optional || []).concat(s.advanced)), d;
    }, r = function(s, d) {
      if (t.version >= 61)
        return d(s);
      if (s = JSON.parse(JSON.stringify(s)), s && Vs(s.audio) === "object") {
        var u = function(v, w, b) {
          w in v && !(b in v) && (v[b] = v[w], delete v[w]);
        };
        s = JSON.parse(JSON.stringify(s)), u(s.audio, "autoGainControl", "googAutoGainControl"), u(s.audio, "noiseSuppression", "googNoiseSuppression"), s.audio = a(s.audio);
      }
      if (s && Vs(s.video) === "object") {
        var f = s.video.facingMode;
        f = f && (Vs(f) === "object" ? f : {
          ideal: f
        });
        var h = t.version < 66;
        if (f && (f.exact === "user" || f.exact === "environment" || f.ideal === "user" || f.ideal === "environment") && !(n.mediaDevices.getSupportedConstraints && n.mediaDevices.getSupportedConstraints().facingMode && !h)) {
          delete s.video.facingMode;
          var g;
          if (f.exact === "environment" || f.ideal === "environment" ? g = ["back", "rear"] : (f.exact === "user" || f.ideal === "user") && (g = ["front"]), g)
            return n.mediaDevices.enumerateDevices().then(function(v) {
              v = v.filter(function(b) {
                return b.kind === "videoinput";
              });
              var w = v.find(function(b) {
                return g.some(function(p) {
                  return b.label.toLowerCase().includes(p);
                });
              });
              return !w && v.length && g.includes("back") && (w = v[v.length - 1]), w && (s.video.deviceId = f.exact ? {
                exact: w.deviceId
              } : {
                ideal: w.deviceId
              }), s.video = a(s.video), NA("chrome: " + JSON.stringify(s)), d(s);
            });
        }
        s.video = a(s.video);
      }
      return NA("chrome: " + JSON.stringify(s)), d(s);
    }, i = function(s) {
      return t.version >= 64 ? s : {
        name: {
          PermissionDeniedError: "NotAllowedError",
          PermissionDismissedError: "NotAllowedError",
          InvalidStateError: "NotAllowedError",
          DevicesNotFoundError: "NotFoundError",
          ConstraintNotSatisfiedError: "OverconstrainedError",
          TrackStartError: "NotReadableError",
          MediaDeviceFailedDueToShutdown: "NotAllowedError",
          MediaDeviceKillSwitchOn: "NotAllowedError",
          TabCaptureError: "AbortError",
          ScreenCaptureError: "AbortError",
          DeviceCaptureError: "AbortError"
        }[s.name] || s.name,
        message: s.message,
        constraint: s.constraint || s.constraintName,
        toString: function() {
          return this.name + (this.message && ": ") + this.message;
        }
      };
    }, o = function(s, d, u) {
      r(s, function(f) {
        n.webkitGetUserMedia(f, d, function(h) {
          u && u(i(h));
        });
      });
    };
    if (n.getUserMedia = o.bind(n), n.mediaDevices.getUserMedia) {
      var l = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
      n.mediaDevices.getUserMedia = function(s) {
        return r(s, function(d) {
          return l(d).then(function(u) {
            if (d.audio && !u.getAudioTracks().length || d.video && !u.getVideoTracks().length)
              throw u.getTracks().forEach(function(f) {
                f.stop();
              }), new DOMException("", "NotFoundError");
            return u;
          }, function(u) {
            return Promise.reject(i(u));
          });
        });
      };
    }
  }
}
var xD = {};
Object.defineProperty(xD, "__esModule", {
  value: !0
});
var cZ = xD.shimGetUserMedia = fZ, uZ = dZ(Jr);
function TD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (TD = function(a) {
    return a ? n : t;
  })(e);
}
function dZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || pu(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = TD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function pu(e) {
  "@babel/helpers - typeof";
  return pu = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, pu(e);
}
function fZ(e, t) {
  var n = e && e.navigator, a = e && e.MediaStreamTrack;
  if (n.getUserMedia = function(s, d, u) {
    uZ.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), n.mediaDevices.getUserMedia(s).then(d, u);
  }, !(t.version > 55 && "autoGainControl" in n.mediaDevices.getSupportedConstraints())) {
    var r = function(s, d, u) {
      d in s && !(u in s) && (s[u] = s[d], delete s[d]);
    }, i = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
    if (n.mediaDevices.getUserMedia = function(s) {
      return pu(s) === "object" && pu(s.audio) === "object" && (s = JSON.parse(JSON.stringify(s)), r(s.audio, "autoGainControl", "mozAutoGainControl"), r(s.audio, "noiseSuppression", "mozNoiseSuppression")), i(s);
    }, a && a.prototype.getSettings) {
      var o = a.prototype.getSettings;
      a.prototype.getSettings = function() {
        var s = o.apply(this, arguments);
        return r(s, "mozAutoGainControl", "autoGainControl"), r(s, "mozNoiseSuppression", "noiseSuppression"), s;
      };
    }
    if (a && a.prototype.applyConstraints) {
      var l = a.prototype.applyConstraints;
      a.prototype.applyConstraints = function(s) {
        return this.kind === "audio" && pu(s) === "object" && (s = JSON.parse(JSON.stringify(s)), r(s, "autoGainControl", "mozAutoGainControl"), r(s, "noiseSuppression", "mozNoiseSuppression")), l.apply(this, [s]);
      };
    }
  }
}
var Io = {};
Object.defineProperty(Io, "__esModule", {
  value: !0
});
Io.shimAudioContext = kZ;
Io.shimCallbacksAPI = vZ;
Io.shimConstraints = PD;
Io.shimCreateOfferLegacy = wZ;
var mZ = Io.shimGetUserMedia = gZ;
Io.shimLocalStreamsAPI = _Z;
Io.shimRTCIceServerUrls = yZ;
Io.shimRemoteStreamsAPI = pZ;
Io.shimTrackEventTransceiver = bZ;
var ID = hZ(Jr);
function ED(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (ED = function(a) {
    return a ? n : t;
  })(e);
}
function hZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || Zs(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = ED(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function Zs(e) {
  "@babel/helpers - typeof";
  return Zs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Zs(e);
}
function _Z(e) {
  if (!(Zs(e) !== "object" || !e.RTCPeerConnection)) {
    if ("getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function() {
      return this._localStreams || (this._localStreams = []), this._localStreams;
    }), !("addStream" in e.RTCPeerConnection.prototype)) {
      var t = e.RTCPeerConnection.prototype.addTrack;
      e.RTCPeerConnection.prototype.addStream = function(n) {
        var a = this;
        this._localStreams || (this._localStreams = []), this._localStreams.includes(n) || this._localStreams.push(n), n.getAudioTracks().forEach(function(r) {
          return t.call(a, r, n);
        }), n.getVideoTracks().forEach(function(r) {
          return t.call(a, r, n);
        });
      }, e.RTCPeerConnection.prototype.addTrack = function(n) {
        for (var a = this, r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
          i[o - 1] = arguments[o];
        return i && i.forEach(function(l) {
          a._localStreams ? a._localStreams.includes(l) || a._localStreams.push(l) : a._localStreams = [l];
        }), t.apply(this, arguments);
      };
    }
    "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function(n) {
      var a = this;
      this._localStreams || (this._localStreams = []);
      var r = this._localStreams.indexOf(n);
      if (r !== -1) {
        this._localStreams.splice(r, 1);
        var i = n.getTracks();
        this.getSenders().forEach(function(o) {
          i.includes(o.track) && a.removeTrack(o);
        });
      }
    });
  }
}
function pZ(e) {
  if (!(Zs(e) !== "object" || !e.RTCPeerConnection) && ("getRemoteStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function() {
    return this._remoteStreams ? this._remoteStreams : [];
  }), !("onaddstream" in e.RTCPeerConnection.prototype))) {
    Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
      get: function() {
        return this._onaddstream;
      },
      set: function(n) {
        var a = this;
        this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = n), this.addEventListener("track", this._onaddstreampoly = function(r) {
          r.streams.forEach(function(i) {
            if (a._remoteStreams || (a._remoteStreams = []), !a._remoteStreams.includes(i)) {
              a._remoteStreams.push(i);
              var o = new Event("addstream");
              o.stream = i, a.dispatchEvent(o);
            }
          });
        });
      }
    });
    var t = e.RTCPeerConnection.prototype.setRemoteDescription;
    e.RTCPeerConnection.prototype.setRemoteDescription = function() {
      var n = this;
      return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(a) {
        a.streams.forEach(function(r) {
          if (n._remoteStreams || (n._remoteStreams = []), !(n._remoteStreams.indexOf(r) >= 0)) {
            n._remoteStreams.push(r);
            var i = new Event("addstream");
            i.stream = r, n.dispatchEvent(i);
          }
        });
      }), t.apply(n, arguments);
    };
  }
}
function vZ(e) {
  if (!(Zs(e) !== "object" || !e.RTCPeerConnection)) {
    var t = e.RTCPeerConnection.prototype, n = t.createOffer, a = t.createAnswer, r = t.setLocalDescription, i = t.setRemoteDescription, o = t.addIceCandidate;
    t.createOffer = function(s, d) {
      var u = arguments.length >= 2 ? arguments[2] : arguments[0], f = n.apply(this, [u]);
      return d ? (f.then(s, d), Promise.resolve()) : f;
    }, t.createAnswer = function(s, d) {
      var u = arguments.length >= 2 ? arguments[2] : arguments[0], f = a.apply(this, [u]);
      return d ? (f.then(s, d), Promise.resolve()) : f;
    };
    var l = function(s, d, u) {
      var f = r.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    };
    t.setLocalDescription = l, l = function(s, d, u) {
      var f = i.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    }, t.setRemoteDescription = l, l = function(s, d, u) {
      var f = o.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    }, t.addIceCandidate = l;
  }
}
function gZ(e) {
  var t = e && e.navigator;
  if (t.mediaDevices && t.mediaDevices.getUserMedia) {
    var n = t.mediaDevices, a = n.getUserMedia.bind(n);
    t.mediaDevices.getUserMedia = function(r) {
      return a(PD(r));
    };
  }
  !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function(r, i, o) {
    t.mediaDevices.getUserMedia(r).then(i, o);
  }.bind(t));
}
function PD(e) {
  return e && e.video !== void 0 ? Object.assign({}, e, {
    video: ID.compactObject(e.video)
  }) : e;
}
function yZ(e) {
  if (e.RTCPeerConnection) {
    var t = e.RTCPeerConnection;
    e.RTCPeerConnection = function(n, a) {
      if (n && n.iceServers) {
        for (var r = [], i = 0; i < n.iceServers.length; i++) {
          var o = n.iceServers[i];
          o.urls === void 0 && o.url ? (ID.deprecated("RTCIceServer.url", "RTCIceServer.urls"), o = JSON.parse(JSON.stringify(o)), o.urls = o.url, delete o.url, r.push(o)) : r.push(n.iceServers[i]);
        }
        n.iceServers = r;
      }
      return new t(n, a);
    }, e.RTCPeerConnection.prototype = t.prototype, "generateCertificate" in t && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
      get: function() {
        return t.generateCertificate;
      }
    });
  }
}
function bZ(e) {
  Zs(e) === "object" && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
    get: function() {
      return {
        receiver: this.receiver
      };
    }
  });
}
function wZ(e) {
  var t = e.RTCPeerConnection.prototype.createOffer;
  e.RTCPeerConnection.prototype.createOffer = function(n) {
    if (n) {
      typeof n.offerToReceiveAudio < "u" && (n.offerToReceiveAudio = !!n.offerToReceiveAudio);
      var a = this.getTransceivers().find(function(i) {
        return i.receiver.track.kind === "audio";
      });
      n.offerToReceiveAudio === !1 && a ? a.direction === "sendrecv" ? a.setDirection ? a.setDirection("sendonly") : a.direction = "sendonly" : a.direction === "recvonly" && (a.setDirection ? a.setDirection("inactive") : a.direction = "inactive") : n.offerToReceiveAudio === !0 && !a && this.addTransceiver("audio", {
        direction: "recvonly"
      }), typeof n.offerToReceiveVideo < "u" && (n.offerToReceiveVideo = !!n.offerToReceiveVideo);
      var r = this.getTransceivers().find(function(i) {
        return i.receiver.track.kind === "video";
      });
      n.offerToReceiveVideo === !1 && r ? r.direction === "sendrecv" ? r.setDirection ? r.setDirection("sendonly") : r.direction = "sendonly" : r.direction === "recvonly" && (r.setDirection ? r.setDirection("inactive") : r.direction = "inactive") : n.offerToReceiveVideo === !0 && !r && this.addTransceiver("video", {
        direction: "recvonly"
      });
    }
    return t.apply(this, arguments);
  };
}
function kZ(e) {
  Zs(e) !== "object" || e.AudioContext || (e.AudioContext = e.webkitAudioContext);
}
const SZ = zX(() => {
  const e = YX(window);
  switch (e.browser) {
    case "chrome":
      iZ(window, e);
      break;
    case "firefox":
      cZ(window, e);
      break;
    case "safari":
      mZ(window, e);
      break;
    default:
      throw new gD();
  }
});
let vu = Promise.resolve({ type: "stop", data: {} });
async function UA(e, t, n) {
  var a, r, i;
  if (console.debug(
    "[vue-qrcode-reader] starting camera with constraints: ",
    JSON.stringify(t)
  ), window.isSecureContext !== !0)
    throw new qX();
  if (((a = navigator?.mediaDevices) == null ? void 0 : a.getUserMedia) === void 0)
    throw new gD();
  SZ(), console.debug("[vue-qrcode-reader] calling getUserMedia");
  const o = await navigator.mediaDevices.getUserMedia({
    audio: !1,
    video: t
  });
  e.srcObject !== void 0 ? e.srcObject = o : e.mozSrcObject !== void 0 ? e.mozSrcObject = o : window.URL.createObjectURL ? e.src = window.URL.createObjectURL(o) : window.webkitURL ? e.src = window.webkitURL.createObjectURL(o) : e.src = o.id, e.play(), console.debug("[vue-qrcode-reader] waiting for video element to load"), await Promise.race([
    vD(e, "loadeddata"),
    // On iOS devices in PWA mode, QrcodeStream works initially, but after
    // killing and restarting the PWA, all video elements fail to load camera
    // streams and never emit the `loadeddata` event. Looks like this is
    // related to a WebKit issue (see #298). No workarounds at the moment.
    // To at least detect this situation, we throw an error if the event
    // has not been emitted after a 6 second timeout.
    RA(6e3).then(() => {
      throw new HX();
    })
  ]), console.debug("[vue-qrcode-reader] video element loaded"), await RA(500);
  const [l] = o.getVideoTracks(), s = (i = (r = l?.getCapabilities) == null ? void 0 : r.call(l)) != null ? i : {};
  let d = !1;
  return n && s.torch && (await l.applyConstraints({ advanced: [{ torch: !0 }] }), d = !0), console.debug("[vue-qrcode-reader] camera ready"), {
    type: "start",
    data: {
      videoEl: e,
      stream: o,
      capabilities: s,
      constraints: t,
      isTorchOn: d
    }
  };
}
async function CZ(e, {
  constraints: t,
  torch: n,
  restart: a = !1
}) {
  vu = vu.then((i) => {
    if (i.type === "start") {
      const {
        data: {
          videoEl: o,
          stream: l,
          constraints: s,
          isTorchOn: d
        }
      } = i;
      return !a && e === o && t === s && n === d ? i : OD(o, l, d).then(
        () => UA(e, t, n)
      );
    } else if (i.type === "stop" || i.type === "failed")
      return UA(e, t, n);
    LA();
  }).catch((i) => (console.debug(`[vue-qrcode-reader] starting camera failed with "${i}"`), { type: "failed", error: i }));
  const r = await vu;
  if (r.type === "stop")
    throw new Error("Something went wrong with the camera task queue (start task).");
  if (r.type === "failed")
    throw r.error;
  if (r.type === "start")
    return r.data.capabilities;
  LA();
}
async function OD(e, t, n) {
  console.debug("[vue-qrcode-reader] stopping camera"), e.src = "", e.srcObject = null, e.load(), await vD(e, "error");
  for (const a of t.getTracks())
    n != null || await a.applyConstraints({ advanced: [{ torch: !1 }] }), t.removeTrack(a), a.stop();
  return {
    type: "stop",
    data: {}
  };
}
async function Uh() {
  if (vu = vu.then((e) => {
    if (e.type === "stop" || e.type === "failed")
      return e;
    const {
      data: { videoEl: t, stream: n, isTorchOn: a }
    } = e;
    return OD(t, n, a);
  }), (await vu).type === "start")
    throw new Error("Something went wrong with the camera task queue (stop task).");
}
const AZ = /* @__PURE__ */ Ha({
  __name: "QrcodeStream",
  props: {
    constraints: { default: () => ({ facingMode: "environment" }) },
    formats: { default: () => ["qr_code"] },
    paused: { type: Boolean, default: !1 },
    torch: { type: Boolean, default: !1 },
    track: { type: Function, default: void 0 }
  },
  emits: ["detect", "camera-on", "camera-off", "error"],
  setup(e, { emit: t }) {
    const n = e, a = t, r = Se(n.constraints), i = Se(n.formats);
    nt(
      () => n.constraints,
      (S, E) => {
        JSON.stringify(S) !== JSON.stringify(E) && (r.value = S);
      },
      { deep: !0 }
    ), nt(
      () => n.formats,
      (S, E) => {
        JSON.stringify(S) !== JSON.stringify(E) && (i.value = S);
      },
      { deep: !0 }
    );
    const o = Se(), l = Se(), s = Se(), d = Se(!1), u = Se(!1);
    on(() => {
      u.value = !0;
    }), di(() => {
      Uh();
    });
    const f = W(() => ({
      torch: n.torch,
      constraints: r.value,
      shouldStream: u.value && !n.paused
    }));
    nt(
      f,
      async (S) => {
        const E = s.value;
        oo(
          E !== void 0,
          "cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined."
        );
        const C = o.value;
        oo(
          C !== void 0,
          "cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined."
        );
        const D = C.getContext("2d");
        if (oo(D !== null, "if cavnas is defined, canvas 2d context should also be non-null"), S.shouldStream) {
          Uh(), d.value = !1;
          try {
            const P = await CZ(E, S);
            u.value ? (d.value = !0, a("camera-on", P)) : await Uh();
          } catch (P) {
            a("error", P);
          }
        } else
          C.width = E.videoWidth, C.height = E.videoHeight, D.drawImage(E, 0, 0, E.videoWidth, E.videoHeight), Uh(), d.value = !1, a("camera-off");
      },
      { deep: !0 }
    ), nt(i, async (S) => {
      u.value && await bD(S);
    });
    const h = W(() => f.value.shouldStream && d.value);
    nt(h, (S) => {
      if (S) {
        oo(
          o.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"
        ), g(o.value), oo(
          l.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"
        ), g(l.value);
        const E = () => n.track === void 0 ? 500 : 40;
        oo(
          s.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"
        ), KX(s.value, {
          detectHandler: (C) => a("detect", C),
          formats: i.value,
          locateHandler: v,
          minDelay: E()
        });
      }
    });
    const g = (S) => {
      const E = S.getContext("2d");
      oo(E !== null, "canvas 2d context should always be non-null"), E.clearRect(0, 0, S.width, S.height);
    }, v = (S) => {
      const E = l.value;
      oo(
        E !== void 0,
        "onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined."
      );
      const C = s.value;
      if (oo(
        C !== void 0,
        "onLocate handler should only be called when component is mounted. Thus video element is always defined."
      ), S.length === 0 || n.track === void 0)
        g(E);
      else {
        const D = C.offsetWidth, P = C.offsetHeight, O = C.videoWidth, T = C.videoHeight, A = Math.max(D / O, P / T), V = O * A, M = T * A, B = V / O, N = M / T, H = (D - V) / 2, j = (P - M) / 2, te = ({ x: K, y: se }) => ({
          x: Math.floor(K * B),
          y: Math.floor(se * N)
        }), de = ({ x: K, y: se }) => ({
          x: Math.floor(K + H),
          y: Math.floor(se + j)
        }), Z = S.map((K) => {
          const { boundingBox: se, cornerPoints: X } = K, { x: he, y: ve } = de(
            te({
              x: se.x,
              y: se.y
            })
          ), { x: pe, y: z } = te({
            x: se.width,
            y: se.height
          });
          return {
            ...K,
            cornerPoints: X.map((ke) => de(te(ke))),
            boundingBox: DOMRectReadOnly.fromRect({ x: he, y: ve, width: pe, height: z })
          };
        });
        E.width = C.offsetWidth, E.height = C.offsetHeight;
        const F = E.getContext("2d");
        oo(F !== null, "canvas 2d context should always be non-null"), n.track(Z, F);
      }
    }, w = {
      width: "100%",
      height: "100%",
      position: "relative",
      // notice that we use z-index only once for the wrapper div.
      // If z-index is not defined, elements are stacked in the order they appear in the DOM.
      // The first element is at the very bottom and subsequent elements are added on top.
      "z-index": "0"
    }, b = {
      width: "100%",
      height: "100%",
      position: "absolute",
      top: "0",
      left: "0"
    }, p = {
      width: "100%",
      height: "100%",
      "object-fit": "cover"
    }, y = W(() => h.value ? p : {
      ...p,
      visibility: "hidden",
      position: "absolute"
    });
    return (S, E) => (ee(), Oe("div", { style: w }, [
      I("video", {
        ref_key: "videoRef",
        ref: s,
        style: Xe(y.value),
        autoplay: "",
        muted: "",
        playsinline: ""
      }, null, 4),
      an(I("canvas", {
        id: "qrcode-stream-pause-frame",
        ref_key: "pauseFrameRef",
        ref: o,
        style: p
      }, null, 512), [
        [_a, !h.value]
      ]),
      I("canvas", {
        id: "qrcode-stream-tracking-layer",
        ref_key: "trackingLayerRef",
        ref: l,
        style: b
      }, null, 512),
      I("div", { style: b }, [
        bt(S.$slots, "default")
      ])
    ]));
  }
}), xZ = {
  name: "CameraScanner",
  components: {
    QrcodeStream: AZ
  },
  props: {
    scanType: {
      type: String,
      default: "Both"
      // 'QR Code', 'Barcode', 'Both'. Note: vue-qrcode-reader uses a 'formats' prop.
    }
  },
  data() {
    return {
      scannerDialog: !1,
      scanResult: "",
      scanFormat: "",
      // We might get this from the 'detect' event payload
      errorMessage: "",
      cameraPermissionDenied: !1,
      isScanning: !1,
      torchActive: !1,
      selectedDeviceId: null,
      // For camera switching
      cameras: []
      // To store available cameras
      // Old properties to be removed or re-evaluated:
      // qrScanner: null,
      // flashlightSupported: false, // vue-qrcode-reader handles this via QrcodeStream's torch prop
      // flashlightOn: false, // replaced by torchActive
      // multipleCameras: false, // Handled by checking cameras.length
      // currentCameraId: null, // replaced by selectedDeviceId
      // availableCameras: [], // replaced by cameras
      // barcodeDetectionInterval: null,
      // isDecodingBarcode: false,
      // videoStream: null
    };
  },
  computed: {
    readerFormats() {
      const e = [
        "qr_code",
        "ean_13",
        "ean_8",
        "code_128",
        "code_39",
        "code_93",
        "codabar",
        "upc_a",
        "upc_e",
        "itf"
        // ITF (Interleaved 2 of 5)
        // Add other formats if needed and supported by zxing-wasm
      ];
      return this.scanType === "QR Code" ? ["qr_code"] : this.scanType === "Barcode" ? e.filter((t) => t !== "qr_code") : e;
    }
  },
  methods: {
    async startScanning() {
      this.scannerDialog = !0, this.errorMessage = "", this.scanResult = "", this.scanFormat = "", this.cameraPermissionDenied = !1, this.isScanning = !0, await this.$nextTick(), await this.listCameras();
    },
    async listCameras() {
      try {
        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
          console.warn("MediaDevices API not supported."), this.cameras = [];
          return;
        }
        const e = await navigator.mediaDevices.enumerateDevices();
        if (this.cameras = e.filter((t) => t.kind === "videoinput"), this.cameras.length > 0 && !this.selectedDeviceId) {
          const t = this.cameras.find(
            (n) => /back|rear|environment/i.test(n.label)
          );
          this.selectedDeviceId = t ? t.deviceId : this.cameras[0].deviceId;
        }
      } catch (e) {
        console.error("Error listing cameras:", e), this.cameras = [];
      }
    },
    onDetect(e) {
      if (e && e.length > 0) {
        const t = e[0];
        this.scanResult = t.rawValue, this.scanFormat = t.format, this.errorMessage = "", this.$emit("barcode-scanned", this.scanResult), typeof frappe < "u" && frappe.show_alert && frappe.show_alert(
          {
            message: this.__("Code scanned successfully") + ` (${this.scanFormat})`,
            indicator: "green"
          },
          3
        ), this.isScanning = !1, setTimeout(() => {
          this.scanResult = "", this.scanFormat = "", this.isScanning = !0;
        }, 1e3);
      }
    },
    onError(e) {
      this.errorMessage = e.name || "Unknown error", e.name === "NotAllowedError" ? (this.cameraPermissionDenied = !0, this.errorMessage = this.__(
        "Camera permission denied. Please allow camera access in your browser settings."
      )) : e.name === "NotFoundError" || e.name === "DevicesNotFoundError" ? this.errorMessage = this.__("No camera found on this device.") : e.name === "NotSupportedError" ? this.errorMessage = this.__("Secure context (HTTPS) required for camera access.") : e.name === "AbortError" ? this.errorMessage = this.__("Camera access aborted.") : this.errorMessage = this.__("Error accessing camera:") + ` ${e.message}`, console.error("Camera error:", e), this.isScanning = !1;
    },
    stopScanning() {
      this.isScanning = !1, this.scannerDialog = !1, this.scanResult = "", this.scanFormat = "", this.errorMessage = "", this.torchActive = !1, this.$emit("scanner-closed");
    },
    async toggleTorch() {
      this.torchActive = !this.torchActive;
    },
    async switchCamera() {
      if (this.cameras.length > 1) {
        const t = (this.cameras.findIndex((n) => n.deviceId === this.selectedDeviceId) + 1) % this.cameras.length;
        this.selectedDeviceId = this.cameras[t].deviceId, this.isScanning = !1, await this.$nextTick(), this.isScanning = !0, typeof frappe < "u" && frappe.show_alert && frappe.show_alert(
          {
            message: this.__("Switched to: ") + (this.cameras[t].label || `Camera ${t + 1}`),
            indicator: "blue"
          },
          2
        );
      }
    },
    // Old methods to remove or adapt:
    // initializeAutoDetectionScanner, startBarcodeDetection, detectBarcodeInImageData,
    // onScanSuccess (replaced by onDetect), stopCurrentScanner, toggleFlashlight (replaced by toggleTorch)
    // handleScannerError (replaced by onError)
    handleEscKey(e) {
      e.key === "Escape" && this.scannerDialog && (e.preventDefault(), this.stopScanning());
    }
  },
  watch: {
    scannerDialog(e) {
      e ? !this.selectedDeviceId && this.cameras.length === 0 && this.listCameras() : (this.isScanning = !1, this.torchActive = !1);
    }
  },
  mounted() {
    typeof document < "u" && document.addEventListener("keydown", this.handleEscKey);
  },
  beforeUnmount() {
    typeof document < "u" && document.removeEventListener("keydown", this.handleEscKey), this.stopScanning();
  }
}, TZ = { key: 0 }, IZ = {
  key: 0,
  class: "scanner-container"
}, EZ = {
  key: 0,
  class: "scanning-overlay"
}, PZ = { class: "status-messages pa-3" }, OZ = {
  key: 1,
  class: "pa-4 text-center"
}, DZ = { class: "mt-2" }, BZ = { class: "mt-2" }, VZ = { class: "d-flex gap-2" };
function MZ(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-chip"), s = Q("v-spacer"), d = Q("v-btn"), u = Q("v-card-title"), f = Q("qrcode-stream"), h = Q("v-alert"), g = Q("v-card-text"), v = Q("v-card-actions"), w = Q("v-card"), b = Q("v-dialog");
  return ee(), Re(b, {
    modelValue: r.scannerDialog,
    "onUpdate:modelValue": t[2] || (t[2] = (p) => r.scannerDialog = p),
    "max-width": "600px",
    persistent: "false"
  }, {
    default: x(() => [
      _(w, null, {
        default: x(() => [
          _(u, { class: "text-h5 text-primary d-flex align-center" }, {
            default: x(() => [
              _(o, {
                class: "mr-2",
                size: "large"
              }, {
                default: x(() => t[3] || (t[3] = [
                  ae("mdi-camera")
                ])),
                _: 1,
                __: [3]
              }),
              ae(" " + q(e.__("Scan QR Code/Barcode")) + " ", 1),
              _(l, {
                class: "ml-2",
                size: "small",
                color: "primary"
              }, {
                default: x(() => [
                  ae(q(n.scanType === "Both" ? "Auto Detect" : n.scanType), 1)
                ]),
                _: 1
              }),
              _(s),
              _(d, {
                icon: "mdi-close",
                onClick: ia(i.stopScanning, ["stop"]),
                color: "error",
                variant: "text",
                size: "large",
                title: e.__("Close Scanner")
              }, null, 8, ["onClick", "title"])
            ]),
            _: 1
          }),
          _(g, { class: "pa-0" }, {
            default: x(() => [
              r.cameraPermissionDenied ? (ee(), Oe("div", OZ, [
                _(o, {
                  size: "64",
                  color: "error"
                }, {
                  default: x(() => t[9] || (t[9] = [
                    ae("mdi-camera-off")
                  ])),
                  _: 1,
                  __: [9]
                }),
                I("h3", DZ, q(e.__("Camera Access Required")), 1),
                I("p", BZ, q(e.__("Please allow camera access to scan codes")), 1)
              ])) : (ee(), Oe("div", TZ, [
                r.isScanning && r.scannerDialog ? (ee(), Oe("div", IZ, [
                  _(f, {
                    formats: i.readerFormats,
                    torch: r.torchActive,
                    camera: r.selectedDeviceId ? { deviceId: r.selectedDeviceId, exact: r.selectedDeviceId } : "auto",
                    onDetect: i.onDetect,
                    onError: i.onError,
                    onCameraOn: t[0] || (t[0] = (p) => r.isScanning = !0),
                    onCameraOff: t[1] || (t[1] = (p) => r.isScanning = !1),
                    style: { width: "100%", height: "350px", "object-fit": "cover" }
                  }, {
                    default: x(() => [
                      r.scanResult ? ye("", !0) : (ee(), Oe("div", EZ, t[4] || (t[4] = [
                        I("div", { class: "scan-line" }, null, -1),
                        I("div", { class: "scan-corners" }, [
                          I("div", { class: "corner top-left" }),
                          I("div", { class: "corner top-right" }),
                          I("div", { class: "corner bottom-left" }),
                          I("div", { class: "corner bottom-right" })
                        ], -1)
                      ])))
                    ]),
                    _: 1
                  }, 8, ["formats", "torch", "camera", "onDetect", "onError"])
                ])) : ye("", !0),
                I("div", PZ, [
                  r.errorMessage ? (ee(), Re(h, {
                    key: 0,
                    type: "error",
                    variant: "tonal",
                    class: "mb-2"
                  }, {
                    default: x(() => [
                      _(o, null, {
                        default: x(() => t[5] || (t[5] = [
                          ae("mdi-alert-circle")
                        ])),
                        _: 1,
                        __: [5]
                      }),
                      ae(" " + q(r.errorMessage), 1)
                    ]),
                    _: 1
                  })) : ye("", !0),
                  r.scanResult ? (ee(), Re(h, {
                    key: 1,
                    type: "success",
                    variant: "tonal",
                    class: "mb-2"
                  }, {
                    default: x(() => [
                      ae(q(e.__("Successfully scanned:")) + " ", 1),
                      I("strong", null, q(r.scanResult), 1),
                      t[6] || (t[6] = ae()),
                      t[7] || (t[7] = I("br", null, null, -1)),
                      I("small", null, "Format: " + q(r.scanFormat), 1)
                    ]),
                    _: 1,
                    __: [6, 7]
                  })) : ye("", !0),
                  !r.scanResult && !r.errorMessage && r.isScanning && r.scannerDialog ? (ee(), Re(h, {
                    key: 2,
                    type: "info",
                    variant: "tonal"
                  }, {
                    default: x(() => [
                      ae(q(e.__("Position the QR code or barcode within the scanning area")) + " ", 1),
                      t[8] || (t[8] = I("br", null, null, -1)),
                      I("small", null, q(e.__("Detecting formats:")) + " " + q(i.readerFormats.join(", ")), 1)
                    ]),
                    _: 1,
                    __: [8]
                  })) : ye("", !0)
                ])
              ]))
            ]),
            _: 1
          }),
          _(v, { class: "justify-space-between pa-3" }, {
            default: x(() => [
              I("div", VZ, [
                r.isScanning && r.cameras.length > 0 ? (ee(), Re(d, {
                  key: 0,
                  onClick: i.toggleTorch,
                  color: r.torchActive ? "warning" : "default",
                  variant: "outlined",
                  size: "small"
                }, {
                  default: x(() => [
                    _(o, null, {
                      default: x(() => [
                        ae(q(r.torchActive ? "mdi-flashlight" : "mdi-flashlight-off"), 1)
                      ]),
                      _: 1
                    }),
                    ae(" " + q(r.torchActive ? e.__("Flash On") : e.__("Flash Off")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "color"])) : ye("", !0),
                r.isScanning && r.cameras.length > 1 ? (ee(), Re(d, {
                  key: 1,
                  onClick: i.switchCamera,
                  color: "default",
                  variant: "outlined",
                  size: "small"
                }, {
                  default: x(() => [
                    _(o, null, {
                      default: x(() => t[10] || (t[10] = [
                        ae("mdi-camera-switch")
                      ])),
                      _: 1,
                      __: [10]
                    }),
                    ae(" " + q(e.__("Switch Camera")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])) : ye("", !0)
              ]),
              _(d, {
                onClick: ia(i.stopScanning, ["stop"]),
                color: "error",
                variant: "outlined"
              }, {
                default: x(() => [
                  ae(q(e.__("Cancel")), 1)
                ]),
                _: 1
              }, 8, ["onClick"])
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["modelValue"]);
}
const RZ = /* @__PURE__ */ nn(xZ, [["render", MZ], ["__scopeId", "data-v-b26be293"]]);
async function $h(e) {
  if (!(!e || typeof frappe > "u" || !navigator.onLine)) {
    try {
      if (e.print_format) {
        const t = await frappe.call({
          method: "frappe.client.get_value",
          args: {
            doctype: "Print Format",
            fieldname: "html",
            filters: { name: e.print_format }
          }
        });
        t.message && t.message.html && J9(t.message.html);
      }
    } catch (t) {
      console.error("Failed to fetch print format", t);
    }
    try {
      const t = e.tc_name || e.terms_and_conditions;
      if (t) {
        const n = await frappe.call({
          method: "frappe.client.get_value",
          args: {
            doctype: "Terms and Conditions",
            fieldname: "terms",
            filters: { name: t }
          }
        });
        n.message && n.message.terms && Z9(n.message.terms);
      }
    } catch (t) {
      console.error("Failed to fetch terms and conditions", t);
    }
  }
}
async function Gb() {
  const e = frappe?.boot?.pos_profile;
  if (e && e.warehouse && e.selling_price_list)
    return await $h(e), e;
  try {
    const n = await frappe.call({
      method: "posawesome.posawesome.api.utils.get_active_pos_profile",
      args: { user: frappe.session.user }
    });
    if (n.message)
      return frappe.boot.pos_profile = n.message, await $h(n.message), n.message;
  } catch (n) {
    console.error("Failed to fetch active POS profile", n);
  }
  const t = Fu();
  return t && t.pos_profile ? (await $h(t.pos_profile), t.pos_profile) : (await $h(e), e || null);
}
function DD() {
  const e = Se(window.innerWidth), t = Se(window.innerHeight), n = Se(window.innerWidth), a = Se(window.innerHeight), r = W(() => e.value / n.value), i = W(() => t.value / a.value), o = W(() => (r.value + i.value) / 2), l = W(() => {
    const u = {
      xs: 4,
      sm: 8,
      md: 16,
      lg: 24,
      xl: 32
    };
    return {
      xs: Math.max(2, Math.round(u.xs * o.value)),
      sm: Math.max(4, Math.round(u.sm * o.value)),
      md: Math.max(8, Math.round(u.md * o.value)),
      lg: Math.max(12, Math.round(u.lg * o.value)),
      xl: Math.max(16, Math.round(u.xl * o.value))
    };
  }), s = W(() => {
    let u;
    return e.value <= 480 ? u = Math.round(45 * i.value) : e.value <= 768 ? u = Math.round(55 * i.value) : u = Math.round(60 * i.value), u = Math.max(30, Math.min(u, 70)), {
      "--dynamic-xs": `${l.value.xs}px`,
      "--dynamic-sm": `${l.value.sm}px`,
      "--dynamic-md": `${l.value.md}px`,
      "--dynamic-lg": `${l.value.lg}px`,
      "--dynamic-xl": `${l.value.xl}px`,
      "--container-height": `${Math.round(68 * i.value)}vh`,
      "--card-height": `${u}vh`,
      "--font-scale": o.value.toFixed(2)
    };
  }), d = () => {
    e.value = window.innerWidth, t.value = window.innerHeight;
  };
  return on(() => {
    d(), window.addEventListener("resize", d);
  }), Ga(() => {
    window.removeEventListener("resize", d);
  }), {
    windowWidth: e,
    windowHeight: t,
    baseWidth: n,
    baseHeight: a,
    widthScale: r,
    heightScale: i,
    averageScale: o,
    dynamicSpacing: l,
    responsiveStyles: s
  };
}
const BD = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYBAMAAABoWJ9DAAAALVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBoCg+AAAAD3RSTlMAXgYsRRgTViRKHAw8UTLfejSWAAAG1UlEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD27V8nqiAKwPjJggi7hOQIAosswT+FhSRa2kHiA7CVLVhQWLkxoZCG7WiJdjYkvsB2tKyllcsTQOdjaBaVuXPuXkHu3BnN93uFL7lzMnMPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMD1IBZBjicDjaV5JPA1BhrPrMA3rjFtCjzbGtOJwNPVmL4KkgryRkCQtBEkMQRJzDDIhxfV2yDI6CBHUr0pghDkX0CQxBAkMQRJDEESQ5DEECQxBEkMQRJDkMQQJDEESQxBEkOQxOQEaezsSA6CVMEGmXiuqq0vYhCkAjZI/VCH3q6KhyDh2SCNDf3pnXgIEp4N0tXfPksWQYKzQab1UqsnGQQJzgbpq+NUsggSmA0ypq6mZBAkNBukrRln4iJIaDbIQDPuSgZBwrJBxjSrKS6CBGaD3C5ccCJIYDZIt3DBiSCB2SAb6rkjDoIEZoOob0kcBAnLBplQ34o4CBKWDTKpvjlxECQsG2RGfS1xECRXpUEWxEGQXAT5z/HJSgyHemKcILfUtywOgoRlg9TUtygOgoRlg8iheu6JiyAFqrlcXBcHQQKzQe6rZ18cBAnMBpm50dRb+/StR5BSg9Q6N7jsrZ2rNo8IUmYQ6d7gferlcE7uEaTMINPqaq3K1dV1aJcgZQWxb4a7cg1tvbBFkDKDPNJLC1tydY2OXtgjSDlB7L+kH687xA41CVJqkHrn755vz/WXM4KUGUQeDovYealY3ZmVCVJqEHnc1x/e9+Q6jp2jp0eQkpc+Xx8cvJKrstPZOkGir0XPqGOFINGDtNW1SZDIQRodde0RJHKQcc2YI0jkIM806ylBogaZUM88QaIGWVNPa5UgMYP01XdCkIhBJtVYJEjEINtqbREkWpDaQK1TgkQLMq05lgkSLUhX8+wTJFKQRkfz7BEkUpApzdUkSKQg55rvjCBRgtR1hCWCRAlyrCMs9AgSI8iGjrJOkAhBxnSkWYJECNLW0TYJUmEQs79gnRKk8iDTWmCZIJUH6WqRfYJUHGRCC80TpOIga1qotUqQaoP0tdgJQSoNMql/sEiQSoN8Z++OVdSIojCOg6viqggfuuvqumKXStAiveYJtEiXgDaBkMq0NvoGTp9AfAOtbPUR9AmybxLYpEsOc++dc25c+P7tTPerLt8dZo+0dgQxAPnw/du/nydIa0MQfZDPAFoT4cp7Sl2CqIOUxUPeFulNCKINssZL74TtNqWvBFEGKeB3rZ683UKuQRBlkIN4phjCpQFBdEESad4owKk7gqiC1MTboQc41ewRRBNkKs4bY7g1IogiSGUhzRs3cKxOEEWQvDhvzOHajCB6IENp3sid4dqFIGogRXHeqMK5DkHUQPrivLGGeyuCaIGcpHmjCI8eCaIEUhLnjT48ahFECWQuzhsn+HQkiApI7izNGyV41SaICkgVf/XnvQO8au4IogGyFj9US+DXhiAKIJWFNG/U4FmXIAogt+K8sYVvE4JkB3mW5o3KAr4tCZIZpCzOG3l41yBIZpCDeKYYwr8BQbKCjKV5o4CA7gmSEeQGQrM+AnrqESQbyBRClxNCOhIkE4g8QLUQ1ANBMoFUod2MIFlA1tDuQpAMIEWo1yFIBpA+9FsRJBzkBP2WBAkGKcGgFkGCQfaw6CdBQkESWNQmSCBIDSY1dwQJA9nCphFBgkAqC9hUJ0gQSB5WTQgSAjKEVReCBIAUYFaHIAEgb2DXiiD+IGPYdU8Qb5AbGPbUI4gvyByWHQniCZI7w7IHgniCVGHbjiB+IGvYtiGIF0gFxnUJ4gVyC+t+EMQH5BnWLQniAVKGeQ2CeIAcYN+AIO4gCey7I4gzSA0RavYI4goyRYxGBHEEyS0QozpBHEHyiNOMIG4gQ8TpQhAnkCIi1SGIE0gfsVoRxAXkhFg9EsQBpIRotQjiALJHvI4ESQdJEK82QVJBcp8i9oUgaSBW8f8hBHnlEeTKIsiVRZAr6wXk7fv4fSSIAPK/IghBfrFHxzQAAjEAAJswMlUACUggbNjDABbQxYIU9kdAn+TOwv2BkM4I6YyQzlxZ6QwaS1Z6gsaQhaY5aK1Z5w4+xmOrsgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALztwSEBAAAAgKD/r51hAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgFJxAtJ60EBzsAAAAAElFTkSuQmCC", LZ = {
  name: "LoadingOverlay",
  props: {
    loading: {
      type: Boolean,
      default: !1
    },
    message: {
      type: String,
      default: ""
    },
    progress: {
      type: Number,
      default: 0
    }
  }
}, FZ = { class: "mt-4 text-subtitle-1" };
function NZ(e, t, n, a, r, i) {
  const o = Q("v-progress-linear"), l = Q("v-overlay");
  return ee(), Re(l, {
    "model-value": n.loading,
    class: "d-flex flex-column align-center justify-center fancy-overlay",
    contained: ""
  }, {
    default: x(() => [
      _(o, {
        "model-value": n.progress,
        height: "8",
        color: "primary",
        rounded: "",
        class: "elegant-progress"
      }, null, 8, ["model-value"]),
      I("div", FZ, q(n.message), 1)
    ]),
    _: 1
  }, 8, ["model-value"]);
}
const VD = /* @__PURE__ */ nn(LZ, [["render", NZ], ["__scopeId", "data-v-25095eef"]]), UZ = {
  mixins: [Oi],
  setup() {
    const e = DD(), t = bc();
    return { ...e, ...t };
  },
  components: {
    CameraScanner: RZ,
    LoadingOverlay: VD
  },
  data: () => ({
    pos_profile: {},
    flags: {},
    items_view: "list",
    item_group: "ALL",
    loading: !1,
    items_group: ["ALL"],
    items: [],
    search: "",
    first_search: "",
    search_backup: "",
    // Limit the displayed items to avoid overly large lists
    itemsPerPage: 50,
    offersCount: 0,
    appliedOffersCount: 0,
    couponsCount: 0,
    appliedCouponsCount: 0,
    customer_price_list: null,
    customer: null,
    new_line: !1,
    qty: 1,
    refresh_interval: null,
    abortController: null,
    itemDetailsRequestCache: { key: null, promise: null, result: null },
    itemDetailsRetryCount: 0,
    itemDetailsRetryTimeout: null,
    items_loaded: !1,
    selected_currency: "",
    exchange_rate: 1,
    prePopulateInProgress: !1,
    itemWorker: null,
    storageAvailable: !0,
    localStorageAvailable: !0,
    items_request_token: 0,
    pendingGetItems: null,
    lastGetItemsKey: "",
    show_item_settings: !1,
    hide_qty_decimals: !1,
    temp_hide_qty_decimals: !1,
    hide_zero_rate_items: !1,
    temp_hide_zero_rate_items: !1,
    show_available_qty: !1,
    temp_show_available_qty: !1,
    show_uom: !1,
    temp_show_uom: !1,
    isDragging: !1,
    // Items per page configuration
    enable_custom_items_per_page: !1,
    temp_enable_custom_items_per_page: !1,
    items_per_page: 50,
    temp_items_per_page: 50,
    temp_force_server_items: !1,
    // Performance optimizations
    searchCache: /* @__PURE__ */ new Map(),
    itemCache: /* @__PURE__ */ new Map(),
    virtualScrollEnabled: !0,
    renderBuffer: 10,
    lastScrollTop: 0,
    scrollThrottle: null,
    searchDebounce: null,
    // Prevent repeated server fetches when local storage is empty
    fallbackAttempted: !1,
    // Fixed page size for incremental item loading to avoid
    // pulling the entire catalog at once.
    itemsPageLimit: 100,
    // Track if the current search was triggered by a scanner
    search_from_scanner: !1,
    currentPage: 0,
    isOverflowing: !1,
    // Track background loading state and pending searches
    isBackgroundLoading: !1,
    pendingItemSearch: null,
    loadProgress: 0,
    totalItemCount: 0
  }),
  watch: {
    customer: Ni.debounce(function() {
      if (this.pos_profile.posa_force_reload_items) {
        this.pos_profile.posa_smart_reload_mode ? !this.items_loaded || !this.filtered_items.length ? (this.items_loaded = !1, cn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0)) : this.$nextTick(() => this.refreshPricesForVisibleItems()) : (this.items_loaded = !1, cn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0));
        return;
      }
      this.items_loaded && this.filtered_items && this.filtered_items.length > 0 ? this.$nextTick(() => this.refreshPricesForVisibleItems()) : this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items();
    }, 300),
    customer_price_list: Ni.debounce(async function() {
      if (this.pos_profile.posa_force_reload_items) {
        this.pos_profile.posa_smart_reload_mode ? !this.items_loaded || !this.items.length ? (this.items_loaded = !1, cn() ? this.get_items() : this.get_items(!0)) : this.$nextTick(() => this.refreshPricesForVisibleItems()) : (this.items_loaded = !1, cn() ? this.get_items() : this.get_items(!0));
        return;
      }
      if (this.items_loaded && this.items && this.items.length > 0) {
        const e = await QO(this.customer_price_list);
        if (e && e.length) {
          const t = {};
          e.forEach((n) => {
            t[n.item_code] = n;
          }), this.items.forEach((n) => {
            const a = t[n.item_code];
            a && (n.rate = a.rate, n.price_list_rate = a.price_list_rate || a.rate);
          }), this.eventBus.emit("set_all_items", this.items), this.update_items_details(this.items);
          return;
        }
      }
      this.items_loaded = !1, cn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0);
    }, 300),
    new_line() {
      this.eventBus.emit("set_new_line", this.new_line);
    },
    item_group(e, t) {
      this.pos_profile && this.pos_profile.pose_use_limit_search && e !== t ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.pos_profile && this.pos_profile.posa_local_storage && e !== t && (this.storageAvailable ? this.loadVisibleItems(!0) : this.get_items(!0));
    },
    filtered_items(e, t) {
      this.pos_profile && !this.pos_profile.pose_use_limit_search && e.length !== t.length && this.update_items_details(e), this.$nextTick(this.checkItemContainerOverflow);
    },
    // Automatically search when the query has at least 3 characters
    first_search: Ni.debounce(function(e, t) {
      const n = (e || "").trim().length, a = (t || "").trim().length;
      n >= 3 ? this.search_onchange() : a >= 3 && n === 0 && this.clearSearch();
    }, 300),
    // Refresh item prices whenever the user changes currency
    selected_currency() {
      this.applyCurrencyConversionToItems();
    },
    // Also react when exchange rate is adjusted manually
    exchange_rate() {
      this.applyCurrencyConversionToItems();
    },
    windowWidth() {
      this.itemsPerPage = this.items_per_page;
    },
    windowHeight() {
      this.itemsPerPage = this.items_per_page;
    },
    items_loaded(e) {
      e && (this.eventBus.emit("items_loaded"), this.eventBus.emit("data-loaded", "items"));
    },
    items_view() {
      this.$nextTick(() => {
        this.items_view === "card" ? this.checkItemContainerOverflow() : this.isOverflowing = !1;
      });
    }
  },
  methods: {
    // Performance optimization: Memoized search function
    memoizedSearch(e, t) {
      const n = `${e || ""}_${t || "ALL"}`;
      if (this.searchCache && this.searchCache.has(n))
        return this.searchCache.get(n);
      const a = this.performSearch(e, t);
      return this.searchCache && this.searchCache.set(n, a), a;
    },
    performSearch(e, t) {
      if (!this.items || !this.items.length)
        return [];
      let n = this.items;
      if (t !== "ALL" && (n = n.filter(
        (a) => a.item_group && a.item_group.toLowerCase().includes(t.toLowerCase())
      )), e && e.trim() && e.trim().length >= 3) {
        const a = e.toLowerCase();
        n = n.filter((r) => {
          const i = Array.isArray(r.item_barcode) && r.item_barcode.some(
            (o) => o.barcode && o.barcode.toLowerCase().includes(a)
          ) || Array.isArray(r.barcodes) && r.barcodes.some((o) => String(o).toLowerCase().includes(a)) || r.barcode && String(r.barcode).toLowerCase().includes(a);
          return r.item_code.toLowerCase().includes(a) || r.item_name.toLowerCase().includes(a) || i;
        });
      }
      return n;
    },
    async fetchServerItemsTimestamp() {
      try {
        const { message: e } = await frappe.call({
          method: "frappe.client.get_list",
          args: {
            doctype: "Item",
            fields: ["modified"],
            order_by: "modified desc",
            limit_page_length: 1
          }
        });
        return e && e[0] && e[0].modified;
      } catch (e) {
        return console.error("Failed to fetch server items timestamp", e), null;
      }
    },
    // Optimized scroll handler with throttling
    onCardScroll() {
      this.scrollThrottle || (this.scrollThrottle = requestAnimationFrame(() => {
        try {
          const e = this.$refs.itemsContainer;
          if (!e) return;
          const t = e.scrollTop, n = e.clientHeight, a = e.scrollHeight;
          t + n >= a - 50 && (this.currentPage += 1, this.loadVisibleItems()), this.lastScrollTop = t;
        } catch (e) {
          console.error("Error in card scroll handler:", e);
        } finally {
          this.scrollThrottle = null;
        }
      }));
    },
    markStorageUnavailable(e = !1) {
      if (e) {
        this.localStorageAvailable = !1;
        return;
      }
      this.storageAvailable = !1, this.localStorageAvailable = !1, this.itemsPageLimit = null, this.itemWorker && (this.itemWorker.terminate(), this.itemWorker = null), this.pos_profile && (this.pos_profile.posa_local_storage = !1);
    },
    async ensureStorageHealth() {
      let e = !0;
      try {
        if (typeof localStorage < "u") {
          const n = "posa_test";
          localStorage.setItem(n, "1"), localStorage.removeItem(n);
        }
      } catch (n) {
        console.warn("localStorage unavailable", n), e = !1;
      }
      const t = await ea().catch(() => !1);
      if (t) {
        if (this.storageAvailable = !0, e ? this.localStorageAvailable = !0 : this.markStorageUnavailable(!0), this.pos_profile && this.pos_profile.posa_local_storage && typeof Worker < "u" && !this.itemWorker)
          try {
            const n = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
            this.itemWorker = new Worker(n, { type: "classic" }), this.itemWorker.onerror = function(a) {
              console.error("Worker error:", a), console.error("Message:", a.message), console.error("Filename:", a.filename), console.error("Line number:", a.lineno);
            };
          } catch (n) {
            console.error("Failed to start item worker", n), this.itemWorker = null;
          }
      } else
        this.markStorageUnavailable();
      return t;
    },
    async loadVisibleItems(e = !1) {
      this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "items", progress: 0 }), await sm, await this.ensureStorageHealth(), e && (this.currentPage = 0, this.items = []);
      const t = this.get_search(this.first_search), n = this.item_group !== "ALL" ? this.item_group.toLowerCase() : "", a = await F9({
        search: t,
        itemGroup: n,
        limit: this.itemsPerPage,
        offset: this.currentPage * this.itemsPerPage
      }), r = a.length || 1;
      a.forEach((i, o) => {
        this.items.push(i);
        const l = Math.round((o + 1) / r * 100);
        this.loadProgress = l, this.eventBus.emit("data-load-progress", {
          name: "items",
          progress: l
        });
      }), this.eventBus.emit("set_all_items", this.items), a.length && this.update_items_details(a);
    },
    onListScroll(e) {
      this.scrollThrottle || (this.scrollThrottle = requestAnimationFrame(() => {
        try {
          const t = e.target;
          t.scrollTop + t.clientHeight >= t.scrollHeight - 50 && (this.currentPage += 1, this.loadVisibleItems());
        } catch (t) {
          console.error("Error in list scroll handler:", t);
        } finally {
          this.scrollThrottle = null;
        }
      }));
    },
    checkItemContainerOverflow() {
      const e = this.$refs.itemsContainer;
      if (!e) {
        this.isOverflowing = !1;
        return;
      }
      const t = parseFloat(getComputedStyle(e).getPropertyValue("--container-height"));
      if (isNaN(t)) {
        this.isOverflowing = !1;
        return;
      }
      const n = e.closest(".dynamic-padding")?.querySelector(".sticky-header"), a = n ? n.offsetHeight : 0, r = t - a;
      e.style.maxHeight = `${r}px`, this.isOverflowing = e.scrollHeight > r;
    },
    async fetchItemDetails(e) {
      if (!e || e.length === 0)
        return [];
      const t = [
        this.pos_profile.name,
        this.active_price_list,
        e.map((a) => a.item_code).join(",")
      ].join(":");
      if (this.itemDetailsRequestCache.key === t && this.itemDetailsRequestCache.result)
        return this.itemDetailsRequestCache.result;
      if (this.itemDetailsRequestCache.key === t && this.itemDetailsRequestCache.promise)
        return this.itemDetailsRequestCache.promise;
      this.cancelItemDetailsRequest(), this.itemDetailsRequestCache.key = t, this.abortController = new AbortController();
      const n = frappe.call({
        method: "posawesome.posawesome.api.items.get_items_details",
        args: {
          pos_profile: JSON.stringify(this.pos_profile),
          items_data: JSON.stringify(e),
          price_list: this.active_price_list
        },
        freeze: !1,
        signal: this.abortController.signal
      });
      this.itemDetailsRequestCache.promise = n;
      try {
        const a = await n, r = a && a.message || [];
        return this.itemDetailsRequestCache.key === t && (this.itemDetailsRequestCache.result = r), r;
      } catch (a) {
        throw a.name !== "AbortError" && console.error("Error fetching item details:", a), a;
      } finally {
        this.itemDetailsRequestCache.key === t && (this.itemDetailsRequestCache.promise = null), this.abortController = null;
      }
    },
    cancelItemDetailsRequest() {
      this.abortController && (this.abortController.abort(), this.abortController = null), this.itemDetailsRequestCache && (this.itemDetailsRequestCache.key = null, this.itemDetailsRequestCache.promise = null, this.itemDetailsRequestCache.result = null);
    },
    async refreshPricesForVisibleItems() {
      const e = this;
      if (!e.filtered_items || e.filtered_items.length === 0) return;
      e.loading = !0;
      const t = e.filtered_items.map((i) => i.item_code), n = await bA(
        e.pos_profile.name,
        e.active_price_list,
        t
      ), a = [];
      if (n.cached.forEach((i) => {
        const o = e.filtered_items.find((l) => l.item_code === i.item_code);
        if (o) {
          const l = { actual_qty: i.actual_qty };
          i.item_uoms && i.item_uoms.length > 0 && (l.item_uoms = i.item_uoms, Mh(o.item_code, i.item_uoms)), i.rate !== void 0 && (i.rate !== 0 || !o.rate) && (l.rate = i.rate, l.price_list_rate = i.price_list_rate || i.rate), i.currency && (l.currency = i.currency), a.push({ item: o, upd: l });
        }
      }), n.missing.length === 0) {
        e.$nextTick(() => {
          a.forEach(({ item: i, upd: o }) => Object.assign(i, o)), gy(n.cached), e.loading = !1;
        });
        return;
      }
      const r = e.filtered_items.filter((i) => n.missing.includes(i.item_code));
      try {
        const i = await e.fetchItemDetails(r);
        i.forEach((o) => {
          const l = e.filtered_items.find((s) => s.item_code === o.item_code);
          if (l) {
            const s = { actual_qty: o.actual_qty };
            o.item_uoms && o.item_uoms.length > 0 && (s.item_uoms = o.item_uoms, Mh(l.item_code, o.item_uoms)), o.rate !== void 0 && (o.rate !== 0 || !l.rate) && (s.rate = o.rate, s.price_list_rate = o.price_list_rate || o.rate), o.currency && (s.currency = o.currency), o.batch_no_data && (s.batch_no_data = o.batch_no_data), o.serial_no_data && (s.serial_no_data = o.serial_no_data), a.push({ item: l, upd: s });
          }
        }), e.$nextTick(async () => {
          if (a.forEach(({ item: o, upd: l }) => Object.assign(o, l)), gy(i), yA(e.pos_profile.name, e.active_price_list, i), e.pos_profile && e.pos_profile.posa_local_storage && e.storageAvailable && !e.pos_profile.pose_use_limit_search)
            try {
              await Ud(i);
            } catch (o) {
              console.error("Failed to persist item details", o), e.markStorageUnavailable && e.markStorageUnavailable();
            }
          e.loading = !1;
        });
      } catch (i) {
        i.name !== "AbortError" && (console.error("Error fetching item details:", i), e.loading = !1);
      }
    },
    show_offers() {
      this.eventBus.emit("show_offers", "true");
    },
    show_coupons() {
      this.eventBus.emit("show_coupons", "true");
    },
    async initializeItems() {
      if (await this.ensureStorageHealth(), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && await wA() > 0) {
        await this.loadVisibleItems(!0), this.items_loaded = !0, this.emitItemGroupsData(), await this.verifyServerItemCount();
        return;
      }
      await this.get_items(!0);
    },
    async forceReloadItems() {
      console.log("[ItemsSelector] forceReloadItems called"), await Lu(), console.log("[ItemsSelector] price list cache cleared"), await Rh(), console.log("[ItemsSelector] stored items cleared"), await this.ensureStorageHealth(), console.log("[ItemsSelector] storage health ensured"), this.items = [], console.log("[ItemsSelector] items array cleared"), this.items_loaded = !1, (!this.first_search || !this.first_search.trim()) && (console.log("[ItemsSelector] resetting empty search before reload"), this.first_search = "", this.search = ""), console.log("[ItemsSelector] loading items from server"), await this.get_items(!0), console.log("[ItemsSelector] forceReloadItems finished");
    },
    async verifyServerItemCount() {
      if (cn()) {
        console.log("[ItemsSelector] offline, skipping server item count check");
        return;
      }
      try {
        const e = await wA();
        console.log("[ItemsSelector] verifying server item count", { localCount: e });
        const t = (this.pos_profile?.item_groups || []).map((r) => r.item_group), a = (await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_count",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            item_groups: t
          }
        })).message || 0;
        if (console.log("[ItemsSelector] server item count result", { serverCount: a }), typeof a == "number")
          if (this.totalItemCount = a, this.loadProgress = a ? Math.round(e / a * 100) : 0, a > e) {
            const r = H9(), i = ++this.items_request_token;
            await this.backgroundLoadItems(null, r, !1, i, e);
          } else a < e && (console.log("[ItemsSelector] local cache has extra items, forcing reload"), await this.forceReloadItems());
      } catch (e) {
        console.error("Error checking item count:", e);
      }
    },
    async get_items(e = !1) {
      if (console.log("[ItemsSelector] get_items called", {
        force_server: e,
        first_search: this.first_search,
        item_group: this.item_group
      }), !this.pos_profile || !this.pos_profile.name) {
        console.warn("No POS Profile available, attempting to get it...");
        try {
          if (frappe.boot && frappe.boot.pos_profile)
            this.pos_profile = frappe.boot.pos_profile;
          else {
            console.error("No POS Profile configured"), frappe.msgprint(__("Please configure a POS Profile first"));
            return;
          }
        } catch (l) {
          console.error("Failed to get POS Profile:", l);
          return;
        }
      }
      const t = this;
      t.pos_profile?.pose_use_limit_search && (t.itemsPageLimit = parseInt(t.pos_profile.posa_search_limit) || t.itemsPageLimit);
      const n = this.get_search(this.first_search), a = t.item_group !== "ALL" ? t.item_group.toLowerCase() : "", r = n || "", i = (t.pos_profile?.item_groups || []).map((l) => l.item_group);
      if (console.log("[ItemsSelector] prepared fetch params", { search: r, item_group: a }), !e && this.items_loaded && this.items.length > 0) {
        console.log("[ItemsSelector] items already loaded, skipping fetch"), this.loading = !1;
        return;
      }
      e && (console.log("[ItemsSelector] force_server=true, clearing items array"), this.items = [], this.items_loaded = !1), this.loading = !0;
      const o = ++this.items_request_token;
      console.log("[ItemsSelector] sending request", { requestToken: o }), this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "items", progress: 0 }), console.log("[ItemsSelector] data-load-progress emitted", { progress: 0 });
      try {
        const l = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_count",
          args: {
            pos_profile: JSON.stringify(t.pos_profile),
            item_groups: i
          }
        });
        this.totalItemCount = l.message || 0;
      } catch (l) {
        console.error("Failed to fetch item count", l), this.totalItemCount = 0;
      }
      try {
        const l = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(t.pos_profile),
            price_list: t.customer_price_list,
            item_group: a,
            search_value: r,
            customer: t.customer,
            limit: t.itemsPageLimit,
            start_after: null,
            include_image: 1,
            item_groups: i
          }
        });
        console.log("[ItemsSelector] server responded", { count: l.message?.length });
        const s = l.message || [];
        s.forEach((u) => {
          (!u.item_uoms || u.item_uoms.length === 0) && (u.item_uoms = u.stock_uom ? [{ uom: u.stock_uom, conversion_factor: 1 }] : []), u.actual_qty === void 0 && (u.actual_qty = 0);
        }), t.items = s, t.items_loaded = !0, t.eventBus.emit("set_all_items", t.items), console.log("[ItemsSelector] set_all_items emitted", { itemsLength: t.items.length });
        const d = !t.pos_profile.pose_use_limit_search && s.length === t.itemsPageLimit;
        if (t.loadProgress = t.totalItemCount ? Math.round(s.length / t.totalItemCount * 100) : 100, t.eventBus.emit("data-load-progress", { name: "items", progress: t.loadProgress }), console.log("[ItemsSelector] data-load-progress emitted", { progress: t.loadProgress }), t.pos_profile && t.pos_profile.posa_local_storage && t.storageAvailable && !t.pos_profile.pose_use_limit_search)
          try {
            e && (console.log("[ItemsSelector] clearing local items before save"), await Rh()), await Ud(s), console.log("[ItemsSelector] items persisted locally", { length: s.length });
          } catch (u) {
            console.error("Failed to persist items locally", u), t.markStorageUnavailable();
          }
        if (d) {
          const u = s[s.length - 1]?.item_name || null;
          console.log("[ItemsSelector] more items available, starting background load", {
            last: u,
            requestToken: o
          }), this.backgroundLoadItems(u, null, !1, o, s.length);
        }
      } catch (l) {
        console.error("Failed to load items:", l), frappe.msgprint(__("Failed to load items. Please try again."));
      } finally {
        t.loading = !1, console.log("[ItemsSelector] get_items finished");
      }
    },
    finishBackgroundLoad() {
      if (this.isBackgroundLoading = !1, this.pendingItemSearch) {
        const e = this.pendingItemSearch;
        this.pendingItemSearch = null, this.search_onchange(e), this.search_onchange.flush && this.search_onchange.flush();
      }
    },
    async backgroundLoadItems(e, t, n = !1, a, r = 0) {
      this.isBackgroundLoading = !0, console.log("[ItemsSelector] backgroundLoadItems called", {
        startAfter: e,
        syncSince: t,
        clearBefore: n,
        requestToken: a,
        loaded: r
      });
      const i = this.itemsPageLimit, o = (this.pos_profile?.item_groups || []).map((s) => s.item_group);
      if (!i || i >= 1e4) {
        console.log("[ItemsSelector] background load skipped due to high limit", { limit: i }), r === 0 && this.finishBackgroundLoad();
        return;
      }
      if (this.items_request_token !== a) {
        console.log("[ItemsSelector] background load token mismatch, aborting"), r === 0 && this.finishBackgroundLoad();
        return;
      }
      const l = t;
      if (this.itemWorker && this.storageAvailable)
        try {
          const s = await frappe.call({
            method: "posawesome.posawesome.api.items.get_items",
            args: {
              pos_profile: JSON.stringify(this.pos_profile),
              price_list: this.customer_price_list,
              item_group: this.item_group !== "ALL" ? this.item_group.toLowerCase() : "",
              search_value: this.search || "",
              customer: this.customer,
              modified_after: l,
              limit: i,
              start_after: e,
              include_image: 1,
              item_groups: o
            },
            freeze: !1
          });
          console.log("[ItemsSelector] background load server response", {
            count: s.message?.length
          });
          const d = JSON.stringify(s);
          if (this.items_request_token !== a) {
            console.log("[ItemsSelector] background load token mismatch after response"), r === 0 && this.finishBackgroundLoad();
            return;
          }
          let u = null;
          const f = await new Promise((v) => {
            this.itemWorker.onmessage = async (w) => {
              if (this.items_request_token !== a) {
                console.log(
                  "[ItemsSelector] background load token mismatch during worker message"
                ), r === 0 && this.finishBackgroundLoad(), v(0);
                return;
              }
              if (w.data.type === "parsed") {
                const b = w.data.items || [];
                if (console.log("[ItemsSelector] processing newItems batch", {
                  count: b.length,
                  currentItemsCount: this.items.length
                }), b.forEach((p) => {
                  const y = this.items.find((S) => S.item_code === p.item_code);
                  y ? (console.log("[ItemsSelector] updating existing item", p.item_code), Object.assign(y, p)) : (console.log("[ItemsSelector] adding new item", p.item_code), this.items.push(p));
                }), u = b[b.length - 1]?.item_name || null, this.eventBus.emit("set_all_items", this.items), console.log("[ItemsSelector] background load set_all_items emitted", {
                  length: this.items.length
                }), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && !this.pos_profile.pose_use_limit_search)
                  try {
                    n && (await Rh(), n = !1), await Ud(b), console.log("[ItemsSelector] background load items persisted", {
                      length: b.length
                    });
                  } catch (p) {
                    console.error(p), this.markStorageUnavailable();
                  }
                v(b.length);
              } else w.data.type === "error" && (console.error("Item worker parse error:", w.data.error), v(0));
            }, this.itemWorker.postMessage({
              type: "parse_and_cache",
              json: d,
              priceList: this.customer_price_list || ""
            });
          });
          if (this.items_request_token !== a) {
            console.log("[ItemsSelector] background load token mismatch after worker"), r === 0 && this.finishBackgroundLoad();
            return;
          }
          const h = r + f, g = this.totalItemCount ? Math.min(99, Math.round(h / this.totalItemCount * 100)) : Math.min(99, Math.round(h / (h + i) * 100));
          this.loadProgress = g, this.eventBus.emit("data-load-progress", { name: "items", progress: g }), console.log("[ItemsSelector] background load progress", { progress: g }), f === i ? await this.backgroundLoadItems(
            u,
            t,
            n,
            a,
            h
          ) : (this.storageAvailable && this.localStorageAvailable && SA((/* @__PURE__ */ new Date()).toISOString()), this.itemWorker && (this.itemWorker.terminate(), this.itemWorker = null), this.items && this.items.length > 0 && await this.prePopulateStockCache(this.items), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "items", progress: 100 }), console.log("[ItemsSelector] background load completed"), this.items_loaded = !0, this.finishBackgroundLoad());
        } catch (s) {
          return console.error("Failed to background load items", s), this.markStorageUnavailable(), this.backgroundLoadItems(e, t, n, a, r);
        }
      else
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            price_list: this.customer_price_list,
            item_group: this.item_group !== "ALL" ? this.item_group.toLowerCase() : "",
            search_value: this.search || "",
            customer: this.customer,
            modified_after: l,
            limit: i,
            start_after: e,
            include_image: 1,
            item_groups: o
          },
          callback: async (s) => {
            if (this.items_request_token !== a) {
              console.log("[ItemsSelector] background load token mismatch in callback"), r === 0 && this.finishBackgroundLoad();
              return;
            }
            const d = s.message || [];
            if (console.log("[ItemsSelector] background load callback items", { count: d.length }), d.forEach((h) => {
              const g = this.items.find((v) => v.item_code === h.item_code);
              g ? Object.assign(g, h) : this.items.push(h);
            }), this.eventBus.emit("set_all_items", this.items), console.log("[ItemsSelector] background load set_all_items emitted", {
              length: this.items.length
            }), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && !this.pos_profile.pose_use_limit_search)
              try {
                n && (await Rh(), n = !1), await Ud(d), console.log("[ItemsSelector] background load items persisted", {
                  length: d.length
                });
              } catch (h) {
                console.error(h), this.markStorageUnavailable();
              }
            const u = r + d.length, f = this.totalItemCount ? Math.min(99, Math.round(u / this.totalItemCount * 100)) : Math.min(99, Math.round(u / (u + i) * 100));
            if (this.loadProgress = f, this.eventBus.emit("data-load-progress", { name: "items", progress: f }), console.log("[ItemsSelector] background load progress", { progress: f }), d.length === i) {
              const h = d[d.length - 1]?.item_name || null;
              await this.backgroundLoadItems(
                h,
                t,
                n,
                a,
                u
              );
            } else
              this.storageAvailable && this.localStorageAvailable && SA((/* @__PURE__ */ new Date()).toISOString()), this.items && this.items.length > 0 && await this.prePopulateStockCache(this.items), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "items", progress: 100 }), console.log("[ItemsSelector] background load completed"), this.items_loaded = !0, this.finishBackgroundLoad();
          },
          error: (s) => {
            console.error("Failed to background load items", s);
          }
        });
    },
    get_items_groups() {
      if (!this.pos_profile) {
        console.log("No POS Profile");
        return;
      }
      if (this.items_group = ["ALL"], this.pos_profile.item_groups.length > 0) {
        const e = [];
        this.pos_profile.item_groups.forEach((t) => {
          t.item_group !== "All Item Groups" && (this.items_group.push(t.item_group), e.push(t.item_group));
        }), IA(e), this.emitItemGroupsData();
      } else if (cn())
        wQ().forEach((t) => {
          this.items_group.push(t);
        }), this.emitItemGroupsData();
      else {
        const e = this;
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items_groups",
          args: {},
          callback: function(t) {
            if (t.message) {
              const n = [];
              t.message.forEach((a) => {
                e.items_group.push(a.name), n.push(a.name);
              }), IA(n), e.emitItemGroupsData();
            }
          }
        });
      }
    },
    emitItemGroupsData() {
      const e = this.items_group.map((t) => {
        let n = 0, a = 0;
        if (t === "ALL")
          n = this.items.length, a = this.items.reduce((r, i) => r + (i.rate * i.actual_qty || 0), 0);
        else {
          const r = this.items.filter((i) => i.item_group === t);
          n = r.length, a = r.reduce((i, o) => i + (o.rate * o.actual_qty || 0), 0);
        }
        return {
          name: t,
          item_count: n,
          stock_value: a
        };
      });
      this.eventBus.emit("item_groups_data", e);
    },
    getItemsHeaders() {
      const e = [
        {
          title: __("Name"),
          align: "start",
          sortable: !0,
          key: "item_name"
        },
        {
          title: __("Code"),
          align: "start",
          sortable: !0,
          key: "item_code"
        },
        { title: __("Rate"), key: "rate", align: "start" }
      ];
      return this.show_available_qty && e.push({ title: __("Available QTY"), key: "actual_qty", align: "start" }), this.show_uom && e.push({ title: __("UOM"), key: "stock_uom", align: "start" }), this.pos_profile.posa_display_item_code || e.splice(1, 1), e;
    },
    async click_item_row(e, { item: t }) {
      await this.add_item(t);
    },
    async add_item(e) {
      if (e = { ...e }, e.has_variants) {
        let t = this.items.filter((a) => a.variant_of == e.item_code), n = {};
        if (!t.length)
          try {
            const a = await frappe.call({
              method: "posawesome.posawesome.api.items.get_item_variants",
              args: {
                pos_profile: JSON.stringify(this.pos_profile),
                parent_item_code: e.item_code,
                price_list: this.active_price_list,
                customer: this.customer
              }
            });
            a.message && (t = a.message.variants || a.message, n = a.message.attributes_meta || {}, this.items.push(...t));
          } catch (a) {
            console.error("Failed to fetch variants", a);
          }
        this.eventBus.emit("show_message", {
          title: __("This is an item template. Please choose a variant."),
          color: "warning"
        }), console.log("sending profile", this.pos_profile), n = n || {}, this.eventBus.emit("open_variants_model", e, t, this.pos_profile, n);
      } else {
        if (e.actual_qty === 0 && this.pos_profile.posa_display_items_in_stock) {
          this.eventBus.emit("show_message", {
            title: `No stock available for ${e.item_name}`,
            color: "warning"
          }), await this.update_items_details([e]);
          return;
        }
        if ((!e.item_uoms || e.item_uoms.length === 0) && (await this.update_items_details([e]), (!e.item_uoms || e.item_uoms.length === 0) && (e.item_uoms = [{ uom: e.stock_uom, conversion_factor: 1 }])), this.pos_profile.posa_allow_multi_currency) {
          this.applyCurrencyConversionToItem(e);
          const a = e.original_currency === this.pos_profile.currency ? e.original_rate : e.original_rate * (e.plc_conversion_rate || this.exchange_rate);
          e.base_rate = a, e.base_price_list_rate = a;
        }
        const t = e._barcode_qty;
        if (!e.qty || e.qty === 1 && !t) {
          let a = this.qty != null ? this.qty : 1;
          a = Math.abs(a), this.hide_qty_decimals && (a = Math.trunc(a)), e.qty = a;
        }
        const n = { ...e };
        delete n._barcode_qty, this.eventBus.emit("add_item", n), this.qty = 1;
      }
    },
    async enter_event() {
      if (!this.filtered_items.length || !this.first_search)
        return;
      const e = this.get_search(this.first_search), t = this.pos_profile?.posa_scale_barcode_start && this.first_search.startsWith(this.pos_profile.posa_scale_barcode_start);
      this.search = e;
      const n = parseFloat(this.get_item_qty(this.first_search)), a = { ...this.filtered_items[0] };
      a.qty = flt(n), t && (a._barcode_qty = !0);
      let r = !1;
      Array.isArray(a.item_barcode) && a.item_barcode.forEach((i) => {
        e === i.barcode && (a.uom = i.posa_uom, r = !0);
      }), !r && a.item_code === e && (r = !0), this.flags.serial_no && (a.to_set_serial_no = this.flags.serial_no), this.flags.batch_no && (a.to_set_batch_no = this.flags.batch_no), r && (await this.add_item(a), this.flags.serial_no = null, this.flags.batch_no = null, this.qty = 1, this.clearSearch(), this.$refs.debounce_search.focus());
    },
    search_onchange: Ni.debounce(async function(e) {
      const t = this;
      t.cancelItemDetailsRequest();
      const a = ((typeof e == "string" ? e : t.first_search) || "").trim();
      if (!a || a.length < 3) {
        t.search_from_scanner = !1;
        return;
      }
      if (t.isBackgroundLoading) {
        t.pendingItemSearch = a;
        return;
      }
      t.search = a;
      const r = t.search_from_scanner;
      t.pos_profile && t.pos_profile.pose_use_limit_search ? t.pos_profile && (!t.pos_profile.posa_local_storage || !t.storageAvailable) ? t.get_items(!0) : t.get_items() : t.pos_profile && t.pos_profile.posa_local_storage ? t.storageAvailable ? (await t.loadVisibleItems(!0), t.enter_event()) : t.get_items(!0) : (await t.get_items(!0), t.enter_event(), t.filtered_items && t.filtered_items.length > 0 && setTimeout(() => {
        t.update_items_details(t.filtered_items);
      }, 300)), r && (t.clearSearch(), t.$refs.debounce_search && t.$refs.debounce_search.focus(), t.search_from_scanner = !1);
    }, 300),
    get_item_qty(e) {
      const t = this.qty != null ? this.qty : 1;
      let n = Math.abs(t);
      const a = this.pos_profile.posa_scale_barcode_start?.length || 0;
      if (e.startsWith(this.pos_profile.posa_scale_barcode_start)) {
        const r = e.length - a - 6;
        let i = e.substr(
          a + r,
          5
        ), o;
        i.startsWith("0000") ? o = "0.00" + i.substr(4) : i.startsWith("000") ? o = "0.0" + i.substr(3) : i.startsWith("00") ? o = "0." + i.substr(2) : i.startsWith("0") ? o = i.substr(1, 1) + "." + i.substr(2, i.length) : i.startsWith("0") || (o = i.substr(0, 2) + "." + i.substr(2, i.length)), n = o;
      }
      return this.hide_qty_decimals && (n = Math.trunc(n)), n;
    },
    get_search(e) {
      if (!e) return "";
      const t = this.pos_profile.posa_scale_barcode_start?.length || 0;
      if (!e.startsWith(this.pos_profile.posa_scale_barcode_start))
        return e;
      const n = e.length - t - 6;
      return e.substr(0, t + n);
    },
    esc_event() {
      this.search = null, this.first_search = null, this.search_backup = null, this.qty = 1, this.$refs.debounce_search.focus();
    },
    async update_items_details(e) {
      const t = this;
      if (!e || !e.length) return;
      t.itemDetailsRetryTimeout && (clearTimeout(t.itemDetailsRetryTimeout), t.itemDetailsRetryTimeout = null);
      const n = e.map((o) => o.item_code), a = await bA(
        t.pos_profile.name,
        t.active_price_list,
        n
      );
      a.cached.forEach((o) => {
        const l = e.find((s) => s.item_code === o.item_code);
        l && (Object.assign(l, {
          actual_qty: o.actual_qty,
          has_batch_no: o.has_batch_no,
          has_serial_no: o.has_serial_no
        }), o.item_uoms && o.item_uoms.length > 0 && (l.item_uoms = o.item_uoms, Mh(l.item_code, o.item_uoms)), o.rate !== void 0 && (o.rate !== 0 || !l.rate) && (l.rate = o.rate, l.price_list_rate = o.price_list_rate || o.rate), o.currency && (l.currency = o.currency), l.original_rate || (l.original_rate = l.rate, l.original_currency = l.currency || t.pos_profile.currency), t.applyCurrencyConversionToItem(l));
      });
      let r = a.missing.length === 0;
      if (e.forEach((o) => {
        const l = xA(o.item_code);
        if (l !== null ? o.actual_qty = l : r = !1, !o.item_uoms || o.item_uoms.length === 0) {
          const s = vA(o.item_code);
          s.length > 0 ? o.item_uoms = s : cn() ? o.item_uoms = [{ uom: o.stock_uom, conversion_factor: 1 }] : r = !1;
        }
      }), cn() || r) {
        t.itemDetailsRetryCount = 0;
        return;
      }
      const i = e.filter(
        (o) => a.missing.includes(o.item_code) && !o.has_variants
      );
      if (i.length === 0) {
        t.itemDetailsRetryCount = 0;
        return;
      }
      try {
        const o = await t.fetchItemDetails(i);
        if (o && o.length) {
          t.itemDetailsRetryCount = 0;
          let l = !1, s = [];
          if (e.forEach((d) => {
            const u = o.find((f) => f.item_code == d.item_code);
            if (u) {
              const f = d.actual_qty;
              s.push({
                item: d,
                updates: {
                  actual_qty: u.actual_qty,
                  has_batch_no: u.has_batch_no,
                  has_serial_no: u.has_serial_no,
                  batch_no_data: u.batch_no_data && u.batch_no_data.length > 0 ? u.batch_no_data : d.batch_no_data,
                  serial_no_data: u.serial_no_data && u.serial_no_data.length > 0 ? u.serial_no_data : d.serial_no_data,
                  item_uoms: u.item_uoms && u.item_uoms.length > 0 ? u.item_uoms : d.item_uoms,
                  rate: u.rate !== void 0 ? u.rate : d.rate,
                  price_list_rate: u.price_list_rate !== void 0 ? u.price_list_rate : d.price_list_rate,
                  currency: u.currency || d.currency
                }
              }), f > 0 && u.actual_qty === 0 && (l = !0), u.item_uoms && u.item_uoms.length > 0 && Mh(d.item_code, u.item_uoms);
            }
          }), s.forEach(({ item: d, updates: u }) => {
            Object.assign(d, u), t.applyCurrencyConversionToItem(d);
          }), gy(o), yA(t.pos_profile.name, t.active_price_list, o), t.pos_profile && t.pos_profile.posa_local_storage && t.storageAvailable && !t.pos_profile.pose_use_limit_search)
            try {
              await Ud(o);
            } catch (d) {
              console.error("Failed to persist item details", d), t.markStorageUnavailable && t.markStorageUnavailable();
            }
          l && t.$forceUpdate();
        }
      } catch (o) {
        if (o.name !== "AbortError" && (console.error("Error fetching item details:", o), e.forEach((l) => {
          const s = xA(l.item_code);
          if (s !== null && (l.actual_qty = s), !l.item_uoms || l.item_uoms.length === 0) {
            const d = vA(l.item_code);
            d.length > 0 && (l.item_uoms = d);
          }
        }), !cn())) {
          t.itemDetailsRetryCount += 1;
          const l = Math.min(32e3, 1e3 * Math.pow(2, t.itemDetailsRetryCount - 1));
          t.itemDetailsRetryTimeout = setTimeout(() => {
            t.update_items_details(e);
          }, l);
        }
      }
      this.cleanupBeforeDestroy = () => {
        t.abortController && t.abortController.abort();
      };
    },
    update_cur_items_details() {
      this.filtered_items && this.filtered_items.length > 0 && this.update_items_details(this.filtered_items);
    },
    async prePopulateStockCache(e) {
      if (!this.prePopulateInProgress && !(!Array.isArray(e) || e.length === 0)) {
        this.prePopulateInProgress = !0;
        try {
          const t = uQ(), n = Object.keys(t).length;
          if (lQ() && n >= e.length) {
            console.debug("Stock cache already initialized");
            return;
          }
          e.length > 500 ? console.info("Pre-populating stock cache for", e.length, "items in batches") : console.info("Pre-populating stock cache for", e.length, "items"), await sQ(e, this.pos_profile);
        } catch (t) {
          console.error("Failed to pre-populate stock cache:", t);
        } finally {
          this.prePopulateInProgress = !1;
        }
      }
    },
    applyCurrencyConversionToItems() {
      !this.items || !this.items.length || this.items.forEach((e) => this.applyCurrencyConversionToItem(e));
    },
    applyCurrencyConversionToItem(e) {
      if (!e) return;
      const t = this.pos_profile.currency;
      e.original_rate || (e.original_rate = e.rate, e.original_currency = e.currency || t);
      const n = e.original_rate, a = n * (e.plc_conversion_rate || 1);
      e.base_rate = a, e.base_price_list_rate = n;
      const r = e.original_currency === this.selected_currency ? n : n * (this.exchange_rate || 1);
      e.rate = this.flt(r, this.currency_precision), e.currency = this.selected_currency, e.price_list_rate = e.rate;
    },
    scan_barcoud() {
      const e = this;
      try {
        if (document._scannerAttached)
          return;
        onScan.attachTo(document, {
          suffixKeyCodes: [],
          keyCodeMapper: function(t) {
            return t.stopImmediatePropagation(), t.preventDefault(), onScan.decodeKeyEvent(t);
          },
          onScan: function(t) {
            setTimeout(() => {
              e.trigger_onscan(t);
            }, 300);
          }
        }), document._scannerAttached = !0;
      } catch (t) {
        console.warn("Scanner initialization error:", t.message);
      }
    },
    trigger_onscan(e) {
      this.search_from_scanner = !0, this.first_search = e, this.search = e, this.$nextTick(() => {
        this.filtered_items.length == 0 ? (this.eventBus.emit("show_message", {
          title: `No Item has this barcode "${e}"`,
          color: "error"
        }), frappe.utils.play_sound("error")) : this.enter_event(), this.clearSearch(), this.$refs.debounce_search && this.$refs.debounce_search.focus();
      });
    },
    generateWordCombinations(e) {
      const t = e.split(" ");
      t.length;
      const n = [];
      function a(r, i = []) {
        if (r.length === 0)
          n.push(i.join(" "));
        else
          for (let o = 0; o < r.length; o++) {
            const l = r.slice(), s = l.splice(o, 1);
            a(l.slice(), i.concat(s));
          }
      }
      return a(t), n;
    },
    clearSearch() {
      this.search_backup = this.first_search, this.first_search = "", this.search = "", this.loadVisibleItems(!0), this.get_items();
    },
    restoreSearch() {
      this.first_search === "" && (this.first_search = this.search_backup, this.search = this.search_backup);
    },
    handleItemSearchFocus() {
      this.first_search = "", this.search = "";
    },
    clearQty() {
      this.qty = null;
    },
    startCameraScanning() {
      this.$refs.cameraScanner && this.$refs.cameraScanner.startScanning();
    },
    onBarcodeScanned(e) {
      console.log("Barcode scanned:", e), this.search_from_scanner = !0, this.search = "", this.first_search = "", this.first_search = e, this.search = e, frappe.show_alert(
        {
          message: `Scanning for: ${e}`,
          indicator: "blue"
        },
        2
      ), setTimeout(() => {
        this.processScannedItem(e);
      }, 300);
    },
    async processScannedItem(e) {
      let t = e, n = null;
      this.pos_profile?.posa_scale_barcode_start && e.startsWith(this.pos_profile.posa_scale_barcode_start) && (t = this.get_search(e), n = parseFloat(this.get_item_qty(e)));
      let a = this.items.find((r) => r.barcode === t || Array.isArray(r.item_barcode) && r.item_barcode.some((o) => o.barcode === t) || Array.isArray(r.barcodes) && r.barcodes.some((o) => String(o) === t) || r.item_code === t);
      if (a) {
        console.log("Found item by processed code:", a), this.addScannedItemToInvoice(a, t, n);
        return;
      }
      try {
        const r = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_from_barcode",
          args: {
            selling_price_list: this.active_price_list,
            currency: this.pos_profile.currency,
            barcode: t
          }
        });
        if (r && r.message) {
          const i = r.message;
          this.items.push(i), this.searchCache && this.searchCache.clear(), await $9(this.items), await L9(this.customer_price_list, this.items), this.eventBus.emit("set_all_items", this.items), await this.update_items_details([i]), this.addScannedItemToInvoice(i, t, n);
          return;
        }
        frappe.show_alert(
          {
            message: `${this.__("Item not found")}: ${e}`,
            indicator: "red"
          },
          5
        );
        return;
      } catch (r) {
        console.error("Error fetching item from barcode:", r), frappe.show_alert(
          {
            message: `${this.__("Item not found")}: ${e}`,
            indicator: "red"
          },
          5
        );
        return;
      }
    },
    searchItemsByCode(e) {
      return this.items.filter((t) => {
        const n = e.toLowerCase(), a = t.barcode && t.barcode.toLowerCase().includes(n) || Array.isArray(t.barcodes) && t.barcodes.some((r) => String(r).toLowerCase().includes(n)) || Array.isArray(t.item_barcode) && t.item_barcode.some(
          (r) => r.barcode && r.barcode.toLowerCase().includes(n)
        );
        return t.item_code.toLowerCase().includes(n) || t.item_name.toLowerCase().includes(n) || a;
      });
    },
    async addScannedItemToInvoice(e, t, n = null) {
      console.log("Adding scanned item to invoice:", e, t);
      const a = { ...e };
      if (Array.isArray(a.item_barcode)) {
        const r = a.item_barcode.find((i) => i.barcode === t);
        if (r && r.posa_uom) {
          a.uom = r.posa_uom;
          try {
            const i = await frappe.call({
              method: "posawesome.posawesome.api.items.get_price_for_uom",
              args: {
                item_code: a.item_code,
                price_list: this.active_price_list,
                uom: r.posa_uom
              }
            });
            if (i.message) {
              const o = parseFloat(i.message);
              a.rate = o, a.price_list_rate = o, a.base_rate = o, a.base_price_list_rate = o, a._manual_rate_set = !0, a.skip_force_update = !0;
            }
          } catch (i) {
            console.error("Failed to fetch UOM price", i);
          }
        }
      }
      n !== null && !isNaN(n) && (a.qty = n, a._barcode_qty = !0), await this.add_item(a), frappe.show_alert(
        {
          message: `Added: ${e.item_name}`,
          indicator: "green"
        },
        3
      ), this.clearSearch(), this.$refs.debounce_search && this.$refs.debounce_search.focus();
    },
    showMultipleItemsDialog(e, t) {
      const n = new frappe.ui.Dialog({
        title: __("Multiple Items Found"),
        fields: [
          {
            fieldtype: "HTML",
            fieldname: "items_html",
            options: this.generateItemSelectionHTML(e, t)
          }
        ],
        primary_action_label: __("Cancel"),
        primary_action: () => n.hide()
      });
      n.show(), setTimeout(() => {
        e.forEach((a, r) => {
          n.$wrapper.find(`[data-item-index="${r}"]`).on("click", () => {
            this.addScannedItemToInvoice(a, t), n.hide();
          });
        });
      }, 100);
    },
    generateItemSelectionHTML(e, t) {
      let n = `<div class="mb-3"><strong>Scanned Code:</strong> ${t}</div>`;
      return n += '<div class="item-selection-list">', e.forEach((a, r) => {
        n += `
		<div class="item-option p-3 mb-2 border rounded cursor-pointer" data-item-index="${r}" style="border: 1px solid #ddd; cursor: pointer;">
			<div class="d-flex align-items-center">
			<img src="${a.image || BD}"
				style="width: 50px; height: 50px; object-fit: cover; margin-right: 15px;" />
			<div>
				<div class="font-weight-bold">${a.item_name}</div>
				<div class="text-muted small">${a.item_code}</div>
				<div class="text-primary">${this.format_currency(a.rate, this.pos_profile.currency, this.ratePrecision(a.rate))}</div>
			</div>
			</div>
		</div>
		`;
      }), n += "</div>", n;
    },
    handleItemNotFound(e) {
      console.warn("Item not found for scanned code:", e), frappe.show_alert(
        {
          message: `Item not found: ${e}`,
          indicator: "red"
        },
        5
      ), this.trigger_onscan(e);
    },
    currencySymbol(e) {
      return get_currency_symbol(e);
    },
    format_currency(e, t, n) {
      const a = typeof n == "number" ? n : this.currency_precision;
      return this.formatCurrencyPlain(e, a);
    },
    ratePrecision(e) {
      const t = typeof e == "string" ? parseFloat(e) : e;
      return Number.isInteger(t) ? 0 : this.currency_precision;
    },
    format_number(e, t) {
      const n = typeof t == "number" ? t : this.float_precision;
      return this.formatFloatPlain(e, n);
    },
    hasDecimalPrecision(e) {
      if (this.exchange_rate && this.exchange_rate !== 1) {
        let t = e * this.exchange_rate;
        return !Number.isInteger(t);
      }
      return !Number.isInteger(e);
    },
    // Force load quantities for all visible items
    forceLoadQuantities() {
      this.filtered_items && this.filtered_items.length > 0 && (this.filtered_items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      }), this.update_items_details(this.filtered_items));
    },
    // Ensure all items have quantities set
    ensureAllItemsHaveQuantities() {
      this.items && this.items.length > 0 && this.items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      }), this.filtered_items && this.filtered_items.length > 0 && this.filtered_items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      });
    },
    toggleItemSettings() {
      this.temp_hide_qty_decimals = this.hide_qty_decimals, this.temp_hide_zero_rate_items = this.hide_zero_rate_items, this.temp_show_available_qty = this.show_available_qty, this.temp_show_uom = this.show_uom, this.temp_enable_custom_items_per_page = this.enable_custom_items_per_page, this.temp_items_per_page = this.items_per_page, this.temp_force_server_items = !!(this.pos_profile && this.pos_profile.posa_force_server_items), this.show_item_settings = !0;
    },
    cancelItemSettings() {
      this.show_item_settings = !1;
    },
    applyItemSettings() {
      this.hide_qty_decimals = this.temp_hide_qty_decimals, this.hide_zero_rate_items = this.temp_hide_zero_rate_items, this.show_available_qty = this.temp_show_available_qty, this.show_uom = this.temp_show_uom, this.enable_custom_items_per_page = this.temp_enable_custom_items_per_page, this.enable_custom_items_per_page ? this.items_per_page = parseInt(this.temp_items_per_page) || 50 : this.items_per_page = 50, this.itemsPerPage = this.items_per_page, this.pos_profile.posa_force_server_items = this.temp_force_server_items ? 1 : 0, this.savePosProfileSetting("posa_force_server_items", this.pos_profile.posa_force_server_items), this.saveItemSettings(), this.show_item_settings = !1;
    },
    onDragStart(e, t) {
      this.isDragging = !0, e.dataTransfer.setData(
        "application/json",
        JSON.stringify({
          type: "item-from-selector",
          item: t
        })
      ), e.dataTransfer.effectAllowed = "copy", this.eventBus.emit("item-drag-start", t);
    },
    onDragEnd(e) {
      this.isDragging = !1, this.eventBus.emit("item-drag-end");
    },
    saveItemSettings() {
      if (this.localStorageAvailable)
        try {
          const e = {
            hide_qty_decimals: this.hide_qty_decimals,
            hide_zero_rate_items: this.hide_zero_rate_items,
            show_available_qty: this.show_available_qty,
            show_uom: this.show_uom,
            enable_custom_items_per_page: this.enable_custom_items_per_page,
            items_per_page: this.items_per_page
          };
          localStorage.setItem("posawesome_item_selector_settings", JSON.stringify(e));
        } catch (e) {
          console.error("Failed to save item selector settings:", e);
        }
    },
    savePosProfileSetting(e, t) {
      !this.pos_profile || !this.pos_profile.name || frappe.db.set_value("POS Profile", this.pos_profile.name, e, t ? 1 : 0).catch((n) => {
        console.error("Failed to save POS Profile setting", n);
      });
    },
    loadItemSettings() {
      if (this.localStorageAvailable)
        try {
          const e = localStorage.getItem("posawesome_item_selector_settings");
          if (e) {
            const t = JSON.parse(e);
            typeof t.hide_qty_decimals == "boolean" && (this.hide_qty_decimals = t.hide_qty_decimals), typeof t.hide_zero_rate_items == "boolean" && (this.hide_zero_rate_items = t.hide_zero_rate_items), typeof t.show_available_qty == "boolean" && (this.show_available_qty = t.show_available_qty), typeof t.show_uom == "boolean" && (this.show_uom = t.show_uom), typeof t.enable_custom_items_per_page == "boolean" && (this.enable_custom_items_per_page = t.enable_custom_items_per_page), typeof t.items_per_page == "number" && (this.items_per_page = t.items_per_page, this.itemsPerPage = this.items_per_page);
          }
        } catch (e) {
          console.error("Failed to load item selector settings:", e);
        }
    }
  },
  computed: {
    headers() {
      return this.getItemsHeaders();
    },
    filtered_items() {
      if (!this.items || this.items.length === 0)
        return [];
      const e = this.get_search(this.first_search).trim().toLowerCase();
      let t = [...this.items];
      e.length >= 3 && (t = t.filter((a) => {
        const r = [];
        return Array.isArray(a.item_barcode) ? r.push(...a.item_barcode.map((o) => o.barcode).filter(Boolean)) : a.item_barcode && r.push(String(a.item_barcode)), Array.isArray(a.barcodes) && r.push(...a.barcodes.map((o) => String(o)).filter(Boolean)), [
          a.item_code,
          a.item_name,
          a.barcode,
          a.description,
          ...r,
          ...this.pos_profile?.posa_search_serial_no && Array.isArray(a.serial_no_data) ? a.serial_no_data.map((o) => o.serial_no) : [],
          ...this.pos_profile?.posa_search_batch_no && Array.isArray(a.batch_no_data) ? a.batch_no_data.map((o) => o.batch_no) : []
        ].filter(Boolean).map((o) => o.toLowerCase()).some((o) => o.includes(e));
      })), this.item_group !== "ALL" && (t = t.filter(
        (a) => a.item_group && a.item_group.toLowerCase() === this.item_group.toLowerCase()
      )), this.hide_zero_rate_items && (t = t.filter((a) => parseFloat(a.rate || 0) > 0)), this.pos_profile?.posa_hide_variants_items && (t = t.filter((a) => !a.variant_of));
      const n = this.enable_custom_items_per_page ? this.items_per_page : this.itemsPerPage;
      return t = t.slice(0, n), t.forEach((a) => {
        (a.actual_qty === void 0 || a.actual_qty === null) && (a.actual_qty = 0);
      }), t;
    },
    debounce_search: {
      get() {
        return this.first_search;
      },
      set: Ni.debounce(function(e) {
        this.first_search = (e || "").trim();
      }, 200)
    },
    debounce_qty: {
      get() {
        return this.qty === null || this.qty === "" ? "" : this.hide_qty_decimals ? Math.trunc(this.qty) : this.qty;
      },
      set: Ni.debounce(function(e) {
        let t = parseFloat(String(e).replace(/,/g, ""));
        isNaN(t) && (t = null), this.hide_qty_decimals && t != null && (t = Math.trunc(t)), this.qty = t;
      }, 200)
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    active_price_list() {
      return this.customer_price_list || this.pos_profile && this.pos_profile.selling_price_list;
    }
  },
  created() {
    if (console.log("ItemsSelector created - starting initialization"), this.searchDebounce = Ni.debounce(() => {
      this.get_items();
    }, 300), this.loadItemSettings(), _u.then(async () => {
      try {
        if (!this.pos_profile || !this.pos_profile.name) {
          if (frappe.boot && frappe.boot.pos_profile)
            this.pos_profile = frappe.boot.pos_profile;
          else if (frappe.router && frappe.router.current_route) {
            const e = frappe.router.current_route;
            e.pos_profile && (this.pos_profile = e.pos_profile);
          }
          (!this.pos_profile || !this.pos_profile.name) && (this.pos_profile = await Gb());
        }
        this.pos_profile && this.pos_profile.name ? (console.log("Loading items with POS Profile:", this.pos_profile.name), this.get_items_groups(), await this.initializeItems()) : console.warn("No POS Profile available during initialization");
      } catch (e) {
        console.error("Error during initialization:", e);
      }
    }), this.eventBus.on("register_pos_profile", async (e) => {
      this.pos_profile = e.pos_profile, this.get_items_groups(), await this.initializeItems(), this.items_view = this.pos_profile.posa_default_card_view ? "card" : "list";
    }), this.eventBus.on("update_cur_items_details", () => {
      this.update_cur_items_details();
    }), this.eventBus.on("update_offers_counters", (e) => {
      this.offersCount = e.offersCount, this.appliedOffersCount = e.appliedOffersCount;
    }), this.eventBus.on("update_coupons_counters", (e) => {
      this.couponsCount = e.couponsCount, this.appliedCouponsCount = e.appliedCouponsCount;
    }), this.eventBus.on("update_customer_price_list", (e) => {
      this.customer_price_list = e;
    }), this.eventBus.on("update_customer", (e) => {
      this.customer = e;
    }), this.eventBus.on("item_group_changed", (e) => {
      this.item_group = e;
    }), this.eventBus.on("force_reload_items", async () => {
      await this.ensureStorageHealth(), this.items_loaded = !1, cn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? (await W_(), await this.get_items(!0)) : await this.get_items() : (this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) && await W_(), await this.get_items(!0));
    }), this.eventBus.on("server-online", async () => {
      this.items && this.items.length > 0 && await this.update_items_details(this.items);
    }), typeof Worker < "u")
      try {
        const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
        this.itemWorker = new Worker(e, { type: "classic" }), this.itemWorker.onerror = function(t) {
          console.error("Worker error:", t), console.error("Message:", t.message), console.error("Filename:", t.filename), console.error("Line number:", t.lineno);
        }, console.log("Created worker");
      } catch (e) {
        console.error("Failed to start item worker", e), this.itemWorker = null;
      }
    if (typeof Worker < "u")
      try {
        const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
        this.itemWorker = new Worker(e, { type: "classic" }), this.itemWorker.onerror = function(t) {
          console.error("Worker error:", t), console.error("Message:", t.message), console.error("Filename:", t.filename), console.error("Line number:", t.lineno);
        }, console.log("Created worker");
      } catch (e) {
        console.error("Failed to start item worker", e), this.itemWorker = null;
      }
    this.update_cur_items_details(), this.refresh_interval = setInterval(() => {
      this.filtered_items && this.filtered_items.length > 0 && this.update_cur_items_details();
    }, 3e4), this.eventBus.on("update_currency", (e) => {
      this.selected_currency = e.currency, this.exchange_rate = e.exchange_rate, this.applyCurrencyConversionToItems(), this.update_cur_items_details();
    });
  },
  async mounted() {
    if (this.items = [], console.log("[ItemsSelector] mounted: cleared items array to prevent duplicates"), !this.pos_profile || !this.pos_profile.name)
      try {
        frappe.boot && frappe.boot.pos_profile ? this.pos_profile = frappe.boot.pos_profile : window.cur_pos && window.cur_pos.pos_profile && (this.pos_profile = window.cur_pos.pos_profile);
      } catch (e) {
        console.warn("Could not get POS profile in mounted:", e);
      }
    this.pos_profile && this.pos_profile.name && !this.items_loaded && (this.get_items_groups(), await this.get_items()), this.pos_profile?.posa_enable_barcode_scanning && this.scan_barcoud(), this.itemsPerPage = this.items_per_page, window.addEventListener("resize", this.checkItemContainerOverflow), this.$nextTick(this.checkItemContainerOverflow);
  },
  beforeUnmount() {
    if (this.refresh_interval && clearInterval(this.refresh_interval), this.itemDetailsRetryTimeout && clearTimeout(this.itemDetailsRetryTimeout), this.itemDetailsRetryCount = 0, this.cleanupBeforeDestroy && this.cleanupBeforeDestroy(), document._scannerAttached)
      try {
        onScan.detachFrom(document), document._scannerAttached = !1;
      } catch (e) {
        console.warn("Scanner detach error:", e.message);
      }
    this.itemWorker && this.itemWorker.terminate(), this.eventBus.off("update_currency"), this.eventBus.off("server-online"), this.eventBus.off("register_pos_profile"), this.eventBus.off("update_cur_items_details"), this.eventBus.off("update_offers_counters"), this.eventBus.off("update_coupons_counters"), this.eventBus.off("update_customer_price_list"), this.eventBus.off("update_customer"), this.eventBus.off("force_reload_items"), window.removeEventListener("resize", this.checkItemContainerOverflow);
  }
}, $Z = { class: "dynamic-padding" }, qZ = { class: "sticky-header" }, HZ = { class: "settings-container" }, zZ = {
  key: 0,
  class: "items-card-container"
}, WZ = ["onClick", "onDragstart"], jZ = { class: "card-item-image-container" }, KZ = { class: "image-placeholder" }, YZ = { class: "card-item-content" }, GZ = { class: "card-item-header" }, QZ = { class: "card-item-name" }, JZ = { class: "card-item-rate" }, XZ = {
  key: 1,
  class: "items-table-container"
}, ZZ = { class: "text-primary" }, eee = {
  key: 0,
  class: "text-success"
};
function tee(e, t, n, a, r, i) {
  const o = Q("v-progress-linear"), l = Q("LoadingOverlay"), s = Q("v-btn"), d = Q("v-text-field"), u = Q("v-col"), f = Q("v-checkbox"), h = Q("v-spacer"), g = Q("v-card-title"), v = Q("v-divider"), w = Q("v-switch"), b = Q("v-card-text"), p = Q("v-card-actions"), y = Q("v-card"), S = Q("v-dialog"), E = Q("v-row"), C = Q("v-icon"), D = Q("v-img"), P = Q("v-data-table-virtual"), O = Q("v-btn-toggle"), T = Q("CameraScanner");
  return ee(), Oe("div", {
    style: Xe(e.responsiveStyles)
  }, [
    _(y, {
      class: Ie([
        "selection mx-auto my-0 py-0 mt-3 pos-card dynamic-card resizable",
        i.isDarkTheme ? "" : "bg-grey-lighten-5",
        e.rtlClasses
      ]),
      style: Xe({
        height: e.responsiveStyles["--container-height"],
        maxHeight: e.responsiveStyles["--container-height"],
        backgroundColor: i.isDarkTheme ? "#121212" : "",
        resize: "vertical",
        overflow: "auto",
        position: "relative"
      })
    }, {
      default: x(() => [
        _(o, {
          active: e.loading,
          indeterminate: e.loading,
          absolute: "",
          location: "top",
          color: "info"
        }, null, 8, ["active", "indeterminate"]),
        _(l, {
          loading: e.loading || e.isBackgroundLoading,
          message: e.__("Loading item data..."),
          progress: e.loadProgress
        }, null, 8, ["loading", "message", "progress"]),
        I("div", $Z, [
          I("div", qZ, [
            _(E, { class: "items" }, {
              default: x(() => [
                _(u, { class: "pb-0" }, {
                  default: x(() => [
                    _(d, {
                      density: "compact",
                      clearable: "",
                      autofocus: "",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Search Items"),
                      hint: "Search by item code, serial number, batch no or barcode",
                      "hide-details": "",
                      modelValue: i.debounce_search,
                      "onUpdate:modelValue": t[0] || (t[0] = (A) => i.debounce_search = A),
                      onKeydown: [
                        Rl(i.esc_event, ["esc"]),
                        Rl(i.search_onchange, ["enter"])
                      ],
                      "onClick:clear": i.clearSearch,
                      "prepend-inner-icon": "mdi-magnify",
                      onFocus: i.handleItemSearchFocus,
                      ref: "debounce_search"
                    }, dr({ _: 2 }, [
                      e.pos_profile.posa_enable_camera_scanning ? {
                        name: "append-inner",
                        fn: x(() => [
                          _(s, {
                            icon: "mdi-camera",
                            size: "small",
                            color: "primary",
                            variant: "text",
                            onClick: i.startCameraScanning,
                            title: e.__("Scan with Camera")
                          }, null, 8, ["onClick", "title"])
                        ]),
                        key: "0"
                      } : void 0
                    ]), 1032, ["label", "modelValue", "onKeydown", "onClick:clear", "onFocus"])
                  ]),
                  _: 1
                }),
                e.pos_profile.posa_input_qty ? (ee(), Re(u, {
                  key: 0,
                  cols: "3",
                  class: "pb-0"
                }, {
                  default: x(() => [
                    _(d, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("QTY"),
                      "hide-details": "",
                      modelValue: i.debounce_qty,
                      "onUpdate:modelValue": t[1] || (t[1] = (A) => i.debounce_qty = A),
                      type: "text",
                      onKeydown: [
                        Rl(i.enter_event, ["enter"]),
                        Rl(i.esc_event, ["esc"])
                      ],
                      onFocus: i.clearQty
                    }, null, 8, ["label", "modelValue", "onKeydown", "onFocus"])
                  ]),
                  _: 1
                })) : ye("", !0),
                e.pos_profile.posa_new_line ? (ee(), Re(u, {
                  key: 1,
                  cols: "2",
                  class: "pb-0"
                }, {
                  default: x(() => [
                    _(f, {
                      modelValue: e.new_line,
                      "onUpdate:modelValue": t[2] || (t[2] = (A) => e.new_line = A),
                      color: "accent",
                      value: "true",
                      label: "NLine",
                      density: "default",
                      "hide-details": ""
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                })) : ye("", !0),
                _(u, {
                  cols: "12",
                  class: "dynamic-margin-xs"
                }, {
                  default: x(() => [
                    I("div", HZ, [
                      _(s, {
                        density: "compact",
                        variant: "text",
                        color: "primary",
                        "prepend-icon": "mdi-cog-outline",
                        onClick: i.toggleItemSettings,
                        class: "settings-btn"
                      }, {
                        default: x(() => [
                          ae(q(e.__("Settings")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      _(h),
                      _(s, {
                        density: "compact",
                        variant: "text",
                        color: "primary",
                        "prepend-icon": "mdi-refresh",
                        onClick: i.forceReloadItems,
                        class: "settings-btn"
                      }, {
                        default: x(() => [
                          ae(q(e.__("Reload Items")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      _(S, {
                        modelValue: e.show_item_settings,
                        "onUpdate:modelValue": t[11] || (t[11] = (A) => e.show_item_settings = A),
                        "max-width": "400px"
                      }, {
                        default: x(() => [
                          _(y, null, {
                            default: x(() => [
                              _(g, { class: "text-h6 pa-4 d-flex align-center" }, {
                                default: x(() => [
                                  I("span", null, q(e.__("Item Selector Settings")), 1),
                                  _(h),
                                  _(s, {
                                    icon: "mdi-close",
                                    variant: "text",
                                    density: "compact",
                                    onClick: t[3] || (t[3] = (A) => e.show_item_settings = !1)
                                  })
                                ]),
                                _: 1
                              }),
                              _(v),
                              _(b, { class: "pa-4" }, {
                                default: x(() => [
                                  _(w, {
                                    modelValue: e.temp_hide_qty_decimals,
                                    "onUpdate:modelValue": t[4] || (t[4] = (A) => e.temp_hide_qty_decimals = A),
                                    label: e.__("Hide quantity decimals"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_hide_zero_rate_items,
                                    "onUpdate:modelValue": t[5] || (t[5] = (A) => e.temp_hide_zero_rate_items = A),
                                    label: e.__("Hide zero rated items"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_show_available_qty,
                                    "onUpdate:modelValue": t[6] || (t[6] = (A) => e.temp_show_available_qty = A),
                                    label: e.__("Show Available Qty"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_show_uom,
                                    "onUpdate:modelValue": t[7] || (t[7] = (A) => e.temp_show_uom = A),
                                    label: e.__("Show UOM"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_enable_custom_items_per_page,
                                    "onUpdate:modelValue": t[8] || (t[8] = (A) => e.temp_enable_custom_items_per_page = A),
                                    label: e.__("Custom items per page"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(f, {
                                    modelValue: e.temp_force_server_items,
                                    "onUpdate:modelValue": t[9] || (t[9] = (A) => e.temp_force_server_items = A),
                                    label: e.__("Always fetch items from server (ignore local cache)"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  e.temp_enable_custom_items_per_page ? (ee(), Re(d, {
                                    key: 0,
                                    modelValue: e.temp_items_per_page,
                                    "onUpdate:modelValue": t[10] || (t[10] = (A) => e.temp_items_per_page = A),
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                    "hide-details": "",
                                    label: e.__("Items per page"),
                                    class: "mb-2 dark-field"
                                  }, null, 8, ["modelValue", "bg-color", "label"])) : ye("", !0)
                                ]),
                                _: 1
                              }),
                              _(p, { class: "pa-4 pt-0" }, {
                                default: x(() => [
                                  _(s, {
                                    color: "error",
                                    variant: "text",
                                    onClick: i.cancelItemSettings
                                  }, {
                                    default: x(() => [
                                      ae(q(e.__("Cancel")), 1)
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"]),
                                  _(h),
                                  _(s, {
                                    color: "primary",
                                    variant: "tonal",
                                    onClick: i.applyItemSettings
                                  }, {
                                    default: x(() => [
                                      ae(q(e.__("Apply")), 1)
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"])
                                ]),
                                _: 1
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _(E, { class: "items" }, {
            default: x(() => [
              _(u, {
                cols: "12",
                class: "pt-0 mt-0"
              }, {
                default: x(() => [
                  e.items_view == "card" ? (ee(), Oe("div", zZ, [
                    I("div", {
                      class: Ie(["items-card-grid", { "item-container": e.isOverflowing }]),
                      ref: "itemsContainer",
                      onScrollPassive: t[13] || (t[13] = (...A) => i.onCardScroll && i.onCardScroll(...A))
                    }, [
                      (ee(!0), Oe(Qe, null, rn(i.filtered_items, (A) => (ee(), Oe("div", {
                        key: A.item_code,
                        class: "card-item-card",
                        onClick: (V) => i.add_item(A),
                        draggable: !0,
                        onDragstart: (V) => i.onDragStart(V, A),
                        onDragend: t[12] || (t[12] = (...V) => i.onDragEnd && i.onDragEnd(...V))
                      }, [
                        I("div", jZ, [
                          _(D, {
                            src: A.image || e.placeholderImage,
                            class: "card-item-image",
                            "aspect-ratio": "1",
                            alt: A.item_name
                          }, {
                            placeholder: x(() => [
                              I("div", KZ, [
                                _(C, {
                                  size: "40",
                                  color: "grey-lighten-2"
                                }, {
                                  default: x(() => t[15] || (t[15] = [
                                    ae("mdi-image")
                                  ])),
                                  _: 1,
                                  __: [15]
                                })
                              ])
                            ]),
                            _: 2
                          }, 1032, ["src", "alt"])
                        ]),
                        I("div", YZ, [
                          I("div", GZ, [
                            I("h4", QZ, q(A.item_name), 1),
                            I("span", JZ, q(i.currencySymbol(A.original_currency || e.pos_profile.currency)) + " " + q(i.format_currency(A.base_price_list_rate || A.rate, A.original_currency || e.pos_profile.currency, i.ratePrecision(A.base_price_list_rate || A.rate))), 1)
                          ])
                        ])
                      ], 40, WZ))), 128))
                    ], 34)
                  ])) : (ee(), Oe("div", XZ, [
                    _(P, {
                      headers: i.headers,
                      items: i.filtered_items,
                      class: "sleek-data-table overflow-y-auto",
                      style: { height: "calc(100% - 80px)" },
                      "item-key": "item_code",
                      "fixed-header": "",
                      height: "100%",
                      "header-props": e.headerProps,
                      "no-data-text": e.__("No items found"),
                      "onClick:row": i.click_item_row,
                      onScrollPassive: i.onListScroll
                    }, {
                      "item.rate": x(({ item: A }) => [
                        I("div", null, [
                          I("div", ZZ, q(i.currencySymbol(A.original_currency || e.pos_profile.currency)) + " " + q(i.format_currency(
                            A.base_price_list_rate || A.rate,
                            A.original_currency || e.pos_profile.currency,
                            i.ratePrecision(A.base_price_list_rate || A.rate)
                          )), 1),
                          e.pos_profile.posa_allow_multi_currency && e.selected_currency !== e.pos_profile.currency ? (ee(), Oe("div", eee, q(i.currencySymbol(e.selected_currency)) + " " + q(i.format_currency(
                            A.rate,
                            e.selected_currency,
                            i.ratePrecision(A.rate)
                          )), 1)) : ye("", !0)
                        ])
                      ]),
                      "item.actual_qty": x(({ item: A }) => [
                        I("span", {
                          class: Ie(["golden--text", { "negative-number": e.isNegative(A.actual_qty) }])
                        }, q(i.format_number(A.actual_qty, e.hide_qty_decimals ? 0 : 4)), 3)
                      ]),
                      _: 1
                    }, 8, ["headers", "items", "header-props", "no-data-text", "onClick:row", "onScrollPassive"])
                  ]))
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ])
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(y, {
      class: "cards mb-0 mt-3 dynamic-padding resizable",
      style: { resize: "vertical", overflow: "auto" }
    }, {
      default: x(() => [
        _(E, {
          "no-gutters": "",
          align: "center",
          justify: "center",
          class: "dynamic-spacing-sm"
        }, {
          default: x(() => [
            e.pos_profile.posa_enable_price_list_dropdown !== !1 ? (ee(), Re(u, {
              key: 0,
              cols: "12",
              class: "mb-2"
            }, {
              default: x(() => [
                _(d, {
                  density: "compact",
                  variant: "solo",
                  color: "primary",
                  label: e.frappe._("Price List"),
                  "hide-details": "",
                  "model-value": i.active_price_list,
                  readonly: ""
                }, null, 8, ["label", "model-value"])
              ]),
              _: 1
            })) : ye("", !0),
            _(u, {
              cols: "3",
              class: "dynamic-margin-xs"
            }, {
              default: x(() => [
                _(O, {
                  modelValue: e.items_view,
                  "onUpdate:modelValue": t[14] || (t[14] = (A) => e.items_view = A),
                  color: "primary",
                  group: "",
                  density: "compact",
                  rounded: ""
                }, {
                  default: x(() => [
                    _(s, {
                      size: "small",
                      value: "list"
                    }, {
                      default: x(() => [
                        ae(q(e.__("List")), 1)
                      ]),
                      _: 1
                    }),
                    _(s, {
                      size: "small",
                      value: "card"
                    }, {
                      default: x(() => [
                        ae(q(e.__("Card")), 1)
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                }, 8, ["modelValue"])
              ]),
              _: 1
            }),
            _(u, {
              cols: "5",
              class: "dynamic-margin-xs"
            }, {
              default: x(() => [
                _(s, {
                  size: "small",
                  block: "",
                  color: "warning",
                  variant: "text",
                  onClick: i.show_offers,
                  class: "action-btn-consistent"
                }, {
                  default: x(() => [
                    ae(q(e.offersCount) + " " + q(e.__("Offers")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            }),
            _(u, {
              cols: "4",
              class: "dynamic-margin-xs"
            }, {
              default: x(() => [
                _(s, {
                  size: "small",
                  block: "",
                  color: "primary",
                  variant: "text",
                  onClick: i.show_coupons,
                  class: "action-btn-consistent"
                }, {
                  default: x(() => [
                    ae(q(e.couponsCount) + " " + q(e.__("Coupons")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    e.pos_profile.posa_enable_camera_scanning ? (ee(), Re(T, {
      key: 0,
      ref: "cameraScanner",
      "scan-type": e.pos_profile.posa_camera_scan_type || "Both",
      onBarcodeScanned: i.onBarcodeScanned
    }, null, 8, ["scan-type", "onBarcodeScanned"])) : ye("", !0)
  ], 4);
}
const nee = /* @__PURE__ */ nn(UZ, [["render", tee], ["__scopeId", "data-v-ccae45ca"]]), aee = {
  data: () => ({
    customerDialog: !1,
    confirmDialog: !1,
    pos_profile: "",
    customer_id: "",
    customer_name: "",
    tax_id: "",
    mobile_no: "",
    address_line1: "",
    city: "",
    country: "Pakistan",
    email_id: "",
    referral_code: "",
    birthday: "",
    birthday_menu: !1,
    group: "",
    groups: [],
    territory: "",
    territorys: [],
    genders: [],
    customer_type: "Individual",
    gender: "",
    loyalty_points: null,
    loyalty_program: null,
    hideNonEssential: !0,
    // Default to hiding non-essential fields
    countries: [
      "Afghanistan",
      "Australia",
      "Bahrain",
      "Bangladesh",
      "Canada",
      "China",
      "Denmark",
      "France",
      "Germany",
      "India",
      "Indonesia",
      "Italy",
      "Japan",
      "Kuwait",
      "Malaysia",
      "Nepal",
      "Netherlands",
      "New Zealand",
      "Norway",
      "Oman",
      "Pakistan",
      "Philippines",
      "Qatar",
      "Saudi Arabia",
      "Singapore",
      "South Korea",
      "Spain",
      "Sri Lanka",
      "Sweden",
      "Switzerland",
      "Syria",
      "Thailand",
      "United Arab Emirates",
      "United Kingdom",
      "United States",
      "Vietnam",
      "Yemen"
    ]
  }),
  watch: {
    hideNonEssential(e) {
      typeof localStorage < "u" && localStorage.setItem("posawesome_hide_non_essential_fields", JSON.stringify(e));
    },
    birthday(e) {
      if (e && /^\d{8}$/.test(e))
        try {
          const t = e.substring(0, 2), n = e.substring(2, 4), a = e.substring(4);
          this.birthday = `${t}-${n}-${a}`, this.updateCalendarDate(t, n, a);
        } catch (t) {
          console.error("Error processing 8-digit date:", t);
        }
      else if (e && /^\d{2}-\d{2}-\d{4}$/.test(e))
        try {
          const t = e.split("-"), n = t[0], a = t[1], r = t[2];
          this.updateCalendarDate(n, a, r);
        } catch (t) {
          console.error("Error processing formatted date:", t);
        }
    },
    // Add a watcher for the calendar menu to ensure it shows the right date when opened
    birthday_menu(e) {
      if (e && this.birthday && /^\d{2}-\d{2}-\d{4}$/.test(this.birthday))
        try {
          const t = this.birthday.split("-"), n = t[0], a = t[1], r = t[2];
          this.$nextTick(() => {
            this.updateCalendarDate(n, a, r);
          });
        } catch (t) {
          console.error("Error updating calendar on menu open:", t);
        }
    }
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  methods: {
    // Add a new method to update calendar date
    updateCalendarDate(e, t, n) {
      const a = this.birthday_menu;
      this.birthday_menu = !1, this.$nextTick(() => {
        const r = `${n}-${t}-${e}`;
        setTimeout(() => {
          this.$refs.birthday_menu && (this.$refs.birthday_menu.date = r, a && (this.birthday_menu = !0));
        }, 50);
      });
    },
    confirm_close() {
      this.customer_name || this.tax_id || this.mobile_no || this.address_line1 || this.email_id || this.referral_code || this.birthday ? this.confirmDialog = !0 : this.close_dialog();
    },
    confirmClose() {
      this.confirmDialog = !1, this.close_dialog();
    },
    close_dialog() {
      this.customerDialog = !1, this.clear_customer();
    },
    clear_customer() {
      this.customer_name = "", this.tax_id = "", this.mobile_no = "", this.address_line1 = "", this.city = "", this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan", this.email_id = "", this.referral_code = "", this.birthday = "", this.group = frappe.defaults.get_user_default("Customer Group"), this.territory = frappe.defaults.get_user_default("Territory"), this.customer_id = "", this.customer_type = "Individual", this.gender = "", this.loyalty_points = null, this.loyalty_program = null;
    },
    getCustomerGroups() {
      if (this.groups.length > 0) return;
      const e = this;
      frappe.db.get_list("Customer Group", {
        fields: ["name"],
        filters: { is_group: 0 },
        limit: 1e3,
        order_by: "name"
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.groups.push(n.name);
        });
      });
    },
    getCustomerTerritorys() {
      if (this.territorys.length > 0) return;
      const e = this;
      frappe.db.get_list("Territory", {
        fields: ["name"],
        filters: { is_group: 0 },
        limit: 5e3,
        order_by: "name"
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.territorys.push(n.name);
        });
      });
    },
    getGenders() {
      const e = this;
      frappe.db.get_list("Gender", {
        fields: ["name"],
        page_length: 10
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.genders.push(n.name);
        });
      });
    },
    formatBirthdayOnInput() {
      if (this.birthday && /^\d{8}$/.test(this.birthday))
        try {
          const e = this.birthday.substring(0, 2), t = this.birthday.substring(2, 4), n = this.birthday.substring(4);
          this.birthday = `${e}-${t}-${n}`;
        } catch (e) {
          console.error("Error formatting date:", e);
        }
    },
    submit_dialog() {
      const e = this;
      if (!this.customer_name) {
        frappe.throw(__("Customer Name is required"));
        return;
      }
      if (!this.group) {
        frappe.throw(__("Customer group is required"));
        return;
      }
      if (!this.territory) {
        frappe.throw(__("Customer territory is required"));
        return;
      }
      let t = null;
      if (this.birthday)
        try {
          if (/^\d{8}$/.test(this.birthday)) {
            const r = this.birthday.substring(0, 2), i = this.birthday.substring(2, 4);
            t = `${this.birthday.substring(4)}-${i}-${r}`;
          } else if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(this.birthday)) {
            const r = this.birthday.split("-");
            if (r.length === 3) {
              const i = r[0].padStart(2, "0"), o = r[1].padStart(2, "0");
              t = `${r[2]}-${o}-${i}`;
            }
          } else if (/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(this.birthday)) {
            const r = this.birthday.split("/");
            if (r.length === 3) {
              const i = r[0].padStart(2, "0"), o = r[1].padStart(2, "0");
              t = `${r[2]}-${o}-${i}`;
            }
          } else if (this.birthday)
            try {
              const r = new Date(this.birthday);
              if (!isNaN(r.getTime())) {
                const i = r.getFullYear(), o = String(r.getMonth() + 1).padStart(2, "0"), l = String(r.getDate()).padStart(2, "0");
                t = `${i}-${o}-${l}`;
              }
            } catch (r) {
              console.error("Failed to parse date:", r);
            }
        } catch (r) {
          console.error("Error formatting date:", r), t = null;
        }
      const n = {
        customer_id: this.customer_id,
        customer_name: this.customer_name,
        tax_id: this.tax_id,
        mobile_no: this.mobile_no,
        address_line1: this.address_line1,
        city: this.city,
        country: this.country,
        email_id: this.email_id,
        referral_code: this.referral_code,
        birthday: t || this.birthday,
        customer_group: this.group,
        territory: this.territory,
        customer_type: this.customer_type,
        gender: this.gender
      }, a = {
        ...n,
        company: e.pos_profile.company,
        pos_profile_doc: JSON.stringify(e.pos_profile),
        method: this.customer_id ? "update" : "create"
      };
      if (cn()) {
        vQ({ args: a }), e.eventBus.emit("show_message", { title: __("Customer saved offline"), color: "warning" }), n.name = this.customer_name, e.eventBus.emit("add_customer_to_list", n), e.eventBus.emit("set_customer", n.name), e.close_dialog();
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.customers.create_customer",
        args: a,
        callback: (r) => {
          if (!r.exc && r.message.name) {
            let i = __("Customer created successfully.");
            e.customer_id && (i = __("Customer updated successfully.")), e.eventBus.emit("show_message", {
              title: i,
              color: "success"
            }), n.name = r.message.name, frappe.utils.play_sound("submit"), e.eventBus.emit("add_customer_to_list", n), e.eventBus.emit("set_customer", r.message.name), e.eventBus.emit("fetch_customer_details"), e.close_dialog();
          } else
            frappe.utils.play_sound("error"), e.eventBus.emit("show_message", {
              title: __("Customer creation failed."),
              color: "error"
            });
        }
      });
    },
    onDateSelect() {
      if (this.birthday_menu = !1, this.birthday)
        try {
          let e;
          if (typeof this.birthday == "object")
            e = this.birthday;
          else if (typeof this.birthday == "string" && (this.birthday.includes("GMT") || this.birthday.includes("T")))
            e = new Date(this.birthday);
          else
            return;
          const t = e.getFullYear(), n = String(e.getMonth() + 1).padStart(2, "0"), a = String(e.getDate()).padStart(2, "0");
          this.birthday = `${a}-${n}-${t}`;
        } catch (e) {
          console.error("Error formatting date from picker:", e);
        }
    }
  },
  created: function() {
    if (typeof localStorage < "u") {
      const e = localStorage.getItem("posawesome_hide_non_essential_fields");
      e !== null ? this.hideNonEssential = JSON.parse(e) : (this.hideNonEssential = !0, localStorage.setItem("posawesome_hide_non_essential_fields", JSON.stringify(!0)));
    }
    this.eventBus.on("open_update_customer", (e) => {
      this.customerDialog = !0, e ? (this.customer_name = e.customer_name, this.customer_id = e.name, this.address_line1 = e.address_line1 || "", this.city = e.city || "", this.country = e.country || this.pos_profile && this.pos_profile.posa_default_country || "Pakistan", this.tax_id = e.tax_id, this.mobile_no = e.mobile_no, this.email_id = e.email_id, this.referral_code = e.referral_code, this.birthday = e.birthday, this.group = e.customer_group, this.territory = e.territory, this.loyalty_points = e.loyalty_points, this.loyalty_program = e.loyalty_program, this.gender = e.gender) : this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.eventBus.on("payments_register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.getCustomerGroups(), this.getCustomerTerritorys(), this.getGenders(), this.group = frappe.defaults.get_user_default("Customer Group"), this.territory = frappe.defaults.get_user_default("Territory");
  }
}, ree = {
  key: 0,
  class: "text-h5 text-primary"
}, iee = {
  key: 1,
  class: "text-h5 text-primary"
};
function oee(e, t, n, a, r, i) {
  const o = Q("v-spacer"), l = Q("v-switch"), s = Q("v-card-title"), d = Q("v-text-field"), u = Q("v-col"), f = Q("v-select"), h = Q("v-autocomplete"), g = Q("v-row"), v = Q("v-container"), w = Q("v-card-text"), b = Q("v-btn"), p = Q("v-card-actions"), y = Q("v-card"), S = Q("v-dialog");
  return ee(), Re(g, { justify: "center" }, {
    default: x(() => [
      _(S, {
        modelValue: e.customerDialog,
        "onUpdate:modelValue": t[15] || (t[15] = (E) => e.customerDialog = E),
        "max-width": "600px",
        persistent: ""
      }, {
        default: x(() => [
          _(y, null, {
            default: x(() => [
              _(s, { class: "d-flex align-center" }, {
                default: x(() => [
                  e.customer_id ? (ee(), Oe("span", ree, q(e.__("Update Customer")), 1)) : (ee(), Oe("span", iee, q(e.__("Create Customer")), 1)),
                  _(o),
                  _(l, {
                    modelValue: e.hideNonEssential,
                    "onUpdate:modelValue": t[0] || (t[0] = (E) => e.hideNonEssential = E),
                    density: "compact",
                    inset: "",
                    "hide-details": "",
                    color: "primary",
                    label: e.__("Hide Non Essential Fields")
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              }),
              _(w, { class: "pa-0" }, {
                default: x(() => [
                  _(v, null, {
                    default: x(() => [
                      _(g, null, {
                        default: x(() => [
                          _(u, { cols: "12" }, {
                            default: x(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Customer Name") + " *",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                class: "dark-field",
                                modelValue: e.customer_name,
                                "onUpdate:modelValue": t[1] || (t[1] = (E) => e.customer_name = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: x(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Tax ID"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.tax_id,
                                "onUpdate:modelValue": t[2] || (t[2] = (E) => e.tax_id = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: x(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Mobile No"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.mobile_no,
                                "onUpdate:modelValue": t[3] || (t[3] = (E) => e.mobile_no = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          e.hideNonEssential ? ye("", !0) : (ee(), Re(u, {
                            key: 0,
                            cols: "12"
                          }, {
                            default: x(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.__("Address Line 1"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                class: "dark-field",
                                modelValue: e.address_line1,
                                "onUpdate:modelValue": t[4] || (t[4] = (E) => e.address_line1 = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ye("", !0) : (ee(), Re(u, {
                            key: 1,
                            cols: "12",
                            sm: "6"
                          }, {
                            default: x(() => [
                              _(d, {
                                modelValue: e.city,
                                "onUpdate:modelValue": t[5] || (t[5] = (E) => e.city = E),
                                variant: "outlined",
                                density: "compact",
                                label: e.__("City"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ye("", !0) : (ee(), Re(u, {
                            key: 2,
                            cols: "12",
                            sm: "6"
                          }, {
                            default: x(() => [
                              _(f, {
                                modelValue: e.country,
                                "onUpdate:modelValue": t[6] || (t[6] = (E) => e.country = E),
                                items: e.countries,
                                variant: "outlined",
                                density: "compact",
                                label: e.__("Country"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "items", "label", "bg-color"])
                            ]),
                            _: 1
                          })),
                          _(u, { cols: "6" }, {
                            default: x(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Email Id"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.email_id,
                                "onUpdate:modelValue": t[7] || (t[7] = (E) => e.email_id = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: x(() => [
                              _(f, {
                                density: "compact",
                                label: "Gender",
                                items: e.genders,
                                modelValue: e.gender,
                                "onUpdate:modelValue": t[8] || (t[8] = (E) => e.gender = E),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["items", "modelValue", "bg-color"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: x(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Referral Code"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.referral_code,
                                "onUpdate:modelValue": t[9] || (t[9] = (E) => e.referral_code = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: x(() => [
                              _(d, {
                                modelValue: e.birthday,
                                "onUpdate:modelValue": [
                                  t[10] || (t[10] = (E) => e.birthday = E),
                                  i.formatBirthdayOnInput
                                ],
                                label: e.frappe._("Birthday (DD-MM-YYYY)"),
                                density: "compact",
                                clearable: "",
                                "hide-details": "",
                                color: "primary",
                                placeholder: "DD-MM-YYYY",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "onUpdate:modelValue", "bg-color"])
                            ]),
                            _: 1
                          }),
                          e.hideNonEssential ? ye("", !0) : (ee(), Re(u, {
                            key: 3,
                            cols: "6"
                          }, {
                            default: x(() => [
                              _(h, {
                                clearable: "",
                                density: "compact",
                                "auto-select-first": "",
                                color: "primary",
                                label: e.frappe._("Customer Group") + " *",
                                modelValue: e.group,
                                "onUpdate:modelValue": t[11] || (t[11] = (E) => e.group = E),
                                items: e.groups,
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "no-data-text": e.__("Group not found"),
                                "hide-details": "",
                                required: ""
                              }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ye("", !0) : (ee(), Re(u, {
                            key: 4,
                            cols: "6"
                          }, {
                            default: x(() => [
                              _(h, {
                                clearable: "",
                                density: "compact",
                                "auto-select-first": "",
                                color: "primary",
                                label: e.frappe._("Territory") + " *",
                                modelValue: e.territory,
                                "onUpdate:modelValue": t[12] || (t[12] = (E) => e.territory = E),
                                items: e.territorys,
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "no-data-text": e.__("Territory not found"),
                                "hide-details": "",
                                required: ""
                              }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text"])
                            ]),
                            _: 1
                          })),
                          e.loyalty_program ? (ee(), Re(u, {
                            key: 5,
                            cols: "6"
                          }, {
                            default: x(() => [
                              _(d, {
                                modelValue: e.loyalty_program,
                                "onUpdate:modelValue": t[13] || (t[13] = (E) => e.loyalty_program = E),
                                label: e.frappe._("Loyalty Program"),
                                density: "compact",
                                readonly: "",
                                "hide-details": "",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })) : ye("", !0),
                          e.loyalty_points ? (ee(), Re(u, {
                            key: 6,
                            cols: "6"
                          }, {
                            default: x(() => [
                              _(d, {
                                modelValue: e.loyalty_points,
                                "onUpdate:modelValue": t[14] || (t[14] = (E) => e.loyalty_points = E),
                                label: e.frappe._("Loyalty Points"),
                                density: "compact",
                                readonly: "",
                                "hide-details": "",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })) : ye("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(p, null, {
                default: x(() => [
                  _(o),
                  _(b, {
                    color: "error",
                    theme: "dark",
                    onClick: i.confirm_close
                  }, {
                    default: x(() => [
                      ae(q(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(b, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"]),
      _(S, {
        modelValue: e.confirmDialog,
        "onUpdate:modelValue": t[17] || (t[17] = (E) => e.confirmDialog = E),
        "max-width": "400px"
      }, {
        default: x(() => [
          _(y, null, {
            default: x(() => [
              _(s, { class: "text-h5 text-primary" }, {
                default: x(() => [
                  ae(q(e.__("Confirm Close")), 1)
                ]),
                _: 1
              }),
              _(w, null, {
                default: x(() => [
                  ae(q(e.__("Are you sure you want to close? All entered data will be lost.")), 1)
                ]),
                _: 1
              }),
              _(p, null, {
                default: x(() => [
                  _(o),
                  _(b, {
                    color: "primary",
                    onClick: t[16] || (t[16] = (E) => e.confirmDialog = !1)
                  }, {
                    default: x(() => [
                      ae(q(e.__("Continue Editing")), 1)
                    ]),
                    _: 1
                  }),
                  _(b, {
                    color: "error",
                    onClick: i.confirmClose
                  }, {
                    default: x(() => [
                      ae(q(e.__("Yes, Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const MD = /* @__PURE__ */ nn(aee, [["render", oee], ["__scopeId", "data-v-5d9c4969"]]), see = {
  props: {
    pos_profile: Object
  },
  data: () => ({
    pos_profile: "",
    customers: [],
    customer: "",
    internalCustomer: null,
    tempSelectedCustomer: null,
    isMenuOpen: !1,
    readonly: !1,
    effectiveReadonly: !1,
    customer_info: {},
    loadingCustomers: !1,
    customers_loaded: !1,
    searchTerm: "",
    page: 0,
    pageSize: 200,
    hasMore: !0,
    nextCustomerStart: null,
    searchDebounce: null,
    // Track background loading state and pending searches
    isCustomerBackgroundLoading: !1,
    pendingCustomerSearch: null,
    loadProgress: 0,
    totalCustomerCount: 0,
    loadedCustomerCount: 0
  }),
  components: {
    UpdateCustomer: MD,
    LoadingOverlay: VD
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    filteredCustomers() {
      return this.isCustomerBackgroundLoading ? [] : this.customers;
    }
  },
  watch: {
    readonly(e) {
      this.effectiveReadonly = e && navigator.onLine;
    },
    customers_loaded(e) {
      e && this.eventBus.emit("customers_loaded");
    }
  },
  methods: {
    // Called when dropdown opens or closes
    onCustomerMenuToggle(e) {
      if (this.isMenuOpen = e, e)
        this.internalCustomer = null, this.$nextTick(() => {
          setTimeout(() => {
            const t = this.$refs.customerDropdown?.$el?.querySelector(
              ".v-overlay__content .v-select-list"
            );
            t && (t.scrollTop = 0, t.addEventListener("scroll", this.onCustomerScroll));
          }, 50);
        });
      else {
        const t = this.$refs.customerDropdown?.$el?.querySelector(
          ".v-overlay__content .v-select-list"
        );
        t && t.removeEventListener("scroll", this.onCustomerScroll), this.tempSelectedCustomer ? (this.internalCustomer = this.tempSelectedCustomer, this.customer = this.tempSelectedCustomer, this.eventBus.emit("update_customer", this.customer)) : this.customer && (this.internalCustomer = this.customer), this.tempSelectedCustomer = null;
      }
    },
    onCustomerScroll(e) {
      const t = e.target;
      t.scrollTop + t.clientHeight >= t.scrollHeight - 50 && this.loadMoreCustomers();
    },
    // Called when a customer is selected
    onCustomerChange(e) {
      if (e && e === this.customer) {
        this.internalCustomer = this.customer, this.eventBus.emit("show_message", {
          title: __("Customer already selected"),
          color: "error"
        });
        return;
      }
      this.tempSelectedCustomer = e, !this.isMenuOpen && e && (this.customer = e, this.eventBus.emit("update_customer", e));
    },
    onCustomerSearch(e) {
      if (this.isCustomerBackgroundLoading) {
        this.pendingCustomerSearch = e;
        return;
      }
      this.searchDebounce(e);
    },
    // Pressing Enter in input
    handleEnter(e) {
      const t = e.target.value?.toLowerCase() || "", n = this.customers.find((a) => a.customer_name?.toLowerCase().includes(t) || a.name?.toLowerCase().includes(t));
      n && (this.tempSelectedCustomer = n.name, this.internalCustomer = n.name, this.customer = n.name, this.eventBus.emit("update_customer", n.name), this.isMenuOpen = !1, e.target.blur());
    },
    async searchCustomers(e, t = !1) {
      try {
        await ea(), gt.isOpen() || await gt.open();
        let n = gt.table("customers");
        e && (n = gt.table("customers").where("customer_name").startsWithIgnoreCase(e).or("mobile_no").startsWithIgnoreCase(e).or("email_id").startsWithIgnoreCase(e).or("tax_id").startsWithIgnoreCase(e).or("name").startsWithIgnoreCase(e));
        const a = await n.offset(this.page * this.pageSize).limit(this.pageSize).toArray();
        return t ? this.customers.push(...a) : this.customers = a, this.hasMore = a.length === this.pageSize, this.hasMore && (this.page += 1), a.length;
      } catch (n) {
        return console.error("Failed to search customers", n), 0;
      }
    },
    async loadMoreCustomers() {
      this.loadingCustomers || await this.searchCustomers(this.searchTerm, !0) === this.pageSize || this.nextCustomerStart && (await this.backgroundLoadCustomers(this.nextCustomerStart, py()), await this.searchCustomers(this.searchTerm, !0));
    },
    async backgroundLoadCustomers(e, t) {
      const n = this.pageSize;
      this.isCustomerBackgroundLoading = !0;
      try {
        let a = e;
        for (; a; ) {
          const r = await this.fetchCustomerPage(a, t, n);
          if (await Lh(r), this.loadedCustomerCount += r.length, this.totalCustomerCount) {
            const i = Math.min(
              99,
              Math.round(this.loadedCustomerCount / this.totalCustomerCount * 100)
            );
            this.loadProgress = i, this.eventBus.emit("data-load-progress", { name: "customers", progress: i });
          }
          r.length === n ? (a = r[r.length - 1]?.name || null, this.nextCustomerStart = a) : (a = null, this.nextCustomerStart = null, Fh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers"));
        }
      } catch (a) {
        console.error("Failed to background load customers", a);
      } finally {
        this.isCustomerBackgroundLoading = !1, this.pendingCustomerSearch !== null && (this.searchDebounce(this.pendingCustomerSearch), this.searchDebounce.flush && this.searchDebounce.flush(), this.pendingCustomerSearch = null);
      }
    },
    async verifyServerCustomerCount() {
      if (!cn())
        try {
          const e = await kA(), n = (await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customers_count",
            args: { pos_profile: this.pos_profile.pos_profile }
          })).message || 0;
          if (typeof n == "number")
            if (this.totalCustomerCount = n, this.loadedCustomerCount = e, this.loadProgress = n ? Math.round(e / n * 100) : 0, this.eventBus.emit("data-load-progress", {
              name: "customers",
              progress: this.loadProgress
            }), n > e) {
              const a = py(), r = await this.fetchCustomerPage(null, a, this.pageSize);
              await Lh(r), this.loadedCustomerCount += r.length, this.totalCustomerCount && (this.loadProgress = Math.round(
                this.loadedCustomerCount / this.totalCustomerCount * 100
              ), this.eventBus.emit("data-load-progress", {
                name: "customers",
                progress: this.loadProgress
              }));
              const i = r.length === this.pageSize && r[r.length - 1]?.name || null;
              i ? this.backgroundLoadCustomers(i, a) : (Fh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers")), await this.searchCustomers(this.searchTerm);
            } else n < e && (await q9(), Fh(null), this.customers = [], await this.get_customer_names());
        } catch (e) {
          console.error("Error verifying customer count:", e);
        }
    },
    fetchCustomerPage(e, t, n) {
      return new Promise((a, r) => {
        frappe.call({
          method: "posawesome.posawesome.api.customers.get_customer_names",
          args: {
            pos_profile: this.pos_profile.pos_profile,
            modified_after: t,
            limit: n,
            start_after: e
          },
          callback: (i) => a(i.message || []),
          error: (i) => {
            console.error("Failed to fetch customers", i), r(i);
          }
        });
      });
    },
    async get_customer_names() {
      if (await kA() > 0) {
        this.customers_loaded = !0, await this.searchCustomers(this.searchTerm), await this.verifyServerCustomerCount();
        return;
      }
      const t = py();
      this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "customers", progress: 0 }), this.loadingCustomers = !0;
      try {
        try {
          const a = await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customers_count",
            args: { pos_profile: this.pos_profile.pos_profile }
          });
          this.totalCustomerCount = a.message || 0;
        } catch (a) {
          console.error("Failed to fetch customer count", a), this.totalCustomerCount = 0;
        }
        const n = await this.fetchCustomerPage(null, t, this.pageSize);
        await Lh(n), this.loadedCustomerCount = n.length, this.totalCustomerCount && (this.loadProgress = Math.round(
          this.loadedCustomerCount / this.totalCustomerCount * 100
        ), this.eventBus.emit("data-load-progress", {
          name: "customers",
          progress: this.loadProgress
        })), this.nextCustomerStart = n.length === this.pageSize && n[n.length - 1]?.name || null, this.nextCustomerStart ? this.backgroundLoadCustomers(this.nextCustomerStart, t) : (Fh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers")), this.customers_loaded = !0;
      } catch (n) {
        console.error("Failed to fetch customers:", n);
      } finally {
        this.loadingCustomers = !1, await this.searchCustomers(this.searchTerm);
      }
    },
    new_customer() {
      this.eventBus.emit("open_update_customer", null);
    },
    edit_customer() {
      this.eventBus.emit("open_update_customer", this.customer_info);
    }
  },
  created() {
    _u.then(async () => {
      await this.searchCustomers(""), this.effectiveReadonly = this.readonly && navigator.onLine;
    }), this.searchDebounce = Ni.debounce(async (e) => {
      this.searchTerm = e || "", this.page = 0, this.customers = [], this.hasMore = !0, await this.searchCustomers(this.searchTerm);
    }, 300), this.effectiveReadonly = this.readonly && navigator.onLine, this.$nextTick(() => {
      this.eventBus.on("register_pos_profile", async (e) => {
        await _u, this.pos_profile = e, await this.get_customer_names();
      }), this.eventBus.on("payments_register_pos_profile", async (e) => {
        await _u, this.pos_profile = e, await this.get_customer_names();
      }), this.eventBus.on("set_customer", (e) => {
        this.customer = e, this.internalCustomer = e;
      }), this.eventBus.on("add_customer_to_list", async (e) => {
        const t = this.customers.findIndex((n) => n.name === e.name);
        t !== -1 ? this.customers.splice(t, 1, e) : this.customers.push(e), await Lh([e]), this.customer = e.name, this.internalCustomer = e.name, this.eventBus.emit("update_customer", e.name);
      }), this.eventBus.on("set_customer_readonly", (e) => {
        this.readonly = e;
      }), this.eventBus.on("set_customer_info_to_edit", (e) => {
        this.customer_info = e;
      }), this.eventBus.on("fetch_customer_details", async () => {
        await this.get_customer_names();
      });
    });
  }
}, lee = { class: "customer-input-wrapper" }, cee = ["innerHTML"], uee = ["innerHTML"], dee = ["innerHTML"], fee = ["innerHTML"], mee = ["innerHTML"], hee = { class: "mt-4" };
function _ee(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-tooltip"), s = Q("v-list-item-subtitle"), d = Q("v-list-item"), u = Q("v-autocomplete"), f = Q("UpdateCustomer"), h = Q("LoadingOverlay");
  return ee(), Oe("div", lee, [
    _(u, {
      ref: "customerDropdown",
      class: "customer-autocomplete sleek-field",
      density: "compact",
      clearable: "",
      variant: "solo",
      color: "primary",
      label: e.frappe._("Customer"),
      modelValue: e.internalCustomer,
      "onUpdate:modelValue": [
        t[2] || (t[2] = (g) => e.internalCustomer = g),
        i.onCustomerChange
      ],
      items: i.filteredCustomers,
      "item-title": "customer_name",
      "item-value": "name",
      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
      "no-data-text": e.isCustomerBackgroundLoading ? e.__("Loading customer data...") : e.__("Customers not found"),
      "hide-details": "",
      customFilter: () => !0,
      disabled: e.effectiveReadonly || e.loadingCustomers,
      "menu-props": { closeOnContentClick: !1 },
      "onUpdate:menu": i.onCustomerMenuToggle,
      "onUpdate:search": i.onCustomerSearch,
      onKeydown: Rl(i.handleEnter, ["enter"]),
      "virtual-scroll": !0,
      "virtual-scroll-item-height": 48
    }, {
      "prepend-inner": x(() => [
        _(l, { text: "Edit customer" }, {
          activator: x(({ props: g }) => [
            _(o, He(g, {
              class: "icon-button",
              onMousedown: t[0] || (t[0] = ia(() => {
              }, ["prevent", "stop"])),
              onClick: ia(i.edit_customer, ["stop"])
            }), {
              default: x(() => t[3] || (t[3] = [
                ae(" mdi-account-edit ")
              ])),
              _: 2,
              __: [3]
            }, 1040, ["onClick"])
          ]),
          _: 1
        })
      ]),
      "append-inner": x(() => [
        _(l, { text: "Add new customer" }, {
          activator: x(({ props: g }) => [
            _(o, He(g, {
              class: "icon-button",
              onMousedown: t[1] || (t[1] = ia(() => {
              }, ["prevent", "stop"])),
              onClick: ia(i.new_customer, ["stop"])
            }), {
              default: x(() => t[4] || (t[4] = [
                ae(" mdi-plus ")
              ])),
              _: 2,
              __: [4]
            }, 1040, ["onClick"])
          ]),
          _: 1
        })
      ]),
      item: x(({ props: g, item: v }) => [
        _(d, Jn(Ca(g)), {
          default: x(() => [
            v.raw.customer_name !== v.raw.name ? (ee(), Re(s, { key: 0 }, {
              default: x(() => [
                I("div", {
                  innerHTML: `ID: ${v.raw.name}`
                }, null, 8, cee)
              ]),
              _: 2
            }, 1024)) : ye("", !0),
            v.raw.tax_id ? (ee(), Re(s, { key: 1 }, {
              default: x(() => [
                I("div", {
                  innerHTML: `TAX ID: ${v.raw.tax_id}`
                }, null, 8, uee)
              ]),
              _: 2
            }, 1024)) : ye("", !0),
            v.raw.email_id ? (ee(), Re(s, { key: 2 }, {
              default: x(() => [
                I("div", {
                  innerHTML: `Email: ${v.raw.email_id}`
                }, null, 8, dee)
              ]),
              _: 2
            }, 1024)) : ye("", !0),
            v.raw.mobile_no ? (ee(), Re(s, { key: 3 }, {
              default: x(() => [
                I("div", {
                  innerHTML: `Mobile No: ${v.raw.mobile_no}`
                }, null, 8, fee)
              ]),
              _: 2
            }, 1024)) : ye("", !0),
            v.raw.primary_address ? (ee(), Re(s, { key: 4 }, {
              default: x(() => [
                I("div", {
                  innerHTML: `Primary Address: ${v.raw.primary_address}`
                }, null, 8, mee)
              ]),
              _: 2
            }, 1024)) : ye("", !0)
          ]),
          _: 2
        }, 1040)
      ]),
      _: 1
    }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "disabled", "onUpdate:menu", "onUpdate:modelValue", "onUpdate:search", "onKeydown"]),
    I("div", hee, [
      _(f)
    ]),
    _(h, {
      loading: e.loadingCustomers || e.isCustomerBackgroundLoading,
      message: e.__("Loading customer data..."),
      progress: e.loadProgress
    }, null, 8, ["loading", "message", "progress"])
  ]);
}
const RD = /* @__PURE__ */ nn(see, [["render", _ee], ["__scopeId", "data-v-17cef21d"]]), pee = {
  props: {
    pos_profile: Object,
    order_types: Array,
    available_tables: Array,
    selected_order_type: [Object, String],
    selected_table: [Object, String],
    order_status: String,
    readonly: Boolean
  },
  data() {
    return {
      internal_selected_order_type: this.selected_order_type,
      internal_selected_table: this.selected_table,
      showValidation: !1
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    // Check if we're in standard restaurant mode (not direct order modes)
    isStandardMode() {
      return !this.pos_profile.posa_order_mode || this.pos_profile.posa_order_mode === "Standard";
    },
    // Check if we're in any direct order mode
    isDirectMode() {
      return this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT";
    },
    // Check if we're in direct order with KOT mode
    isDirectOrderWithKOT() {
      return this.pos_profile.posa_order_mode === "Direct Order + KOT";
    },
    // Order type is only required in standard mode
    isOrderTypeRequired() {
      return this.isStandardMode;
    },
    // Dynamic label for order type field
    orderTypeLabel() {
      return this.isOrderTypeRequired ? this.frappe._("Order Type") + " *" : this.frappe._("Order Type");
    },
    // Dynamic placeholder for order type field  
    orderTypePlaceholder() {
      return this.isOrderTypeRequired ? this.frappe._("Select Order Type (Required)") : this.frappe._("Select Order Type (Optional)");
    },
    // Message for direct order modes
    directModeMessage() {
      return this.isDirectOrderWithKOT ? this.__("Direct Order + KOT Mode: Orders will be billed immediately with KOT print") : this.isDirectMode ? this.__("Direct Order Mode: Orders will be billed immediately without order creation") : "";
    },
    showTableSelection() {
      return this.internal_selected_order_type && this.internal_selected_order_type.requires_table && this.available_tables && this.available_tables.length > 0;
    },
    showValidationMessage() {
      return this.showValidation && this.validationMessage;
    },
    validationMessage() {
      return this.isOrderTypeRequired && !this.internal_selected_order_type ? __("⚠️ Order Type is mandatory - Please select before adding items") : this.showTableSelection && !this.internal_selected_table ? __("⚠️ Table selection required for {0} orders", [this.internal_selected_order_type.order_type_name]) : "";
    }
  },
  watch: {
    selected_order_type(e) {
      this.internal_selected_order_type = e;
    },
    selected_table(e) {
      this.internal_selected_table = e;
    },
    available_tables: {
      handler(e) {
        e && e.forEach((t) => {
          t.table_display = t.table_name ? `${t.table_number} - ${t.table_name}` : t.table_number;
        });
      },
      immediate: !0
    }
  },
  methods: {
    onOrderTypeUpdate(e) {
      this.$emit("update:selected_order_type", e), (!e || !e.requires_table) && (this.internal_selected_table = null, this.$emit("update:selected_table", null));
    },
    onTableUpdate(e) {
      this.$emit("update:selected_table", e);
    },
    getStatusColor(e) {
      return {
        Draft: "orange",
        Submitted: "blue",
        Preparing: "amber",
        Ready: "green",
        Served: "success",
        Billed: "purple",
        Cancelled: "error"
      }[e] || "grey";
    },
    getStatusIcon(e) {
      return {
        Draft: "mdi-file-document-outline",
        Submitted: "mdi-check-circle-outline",
        Preparing: "mdi-chef-hat",
        Ready: "mdi-bell-ring",
        Served: "mdi-silverware-fork-knife",
        Billed: "mdi-receipt",
        Cancelled: "mdi-cancel"
      }[e] || "mdi-information-outline";
    },
    validateSelection() {
      return this.showValidation = !0, this.internal_selected_order_type && (!this.showTableSelection || this.internal_selected_table);
    }
  }
}, vee = { key: 0 };
function gee(e, t, n, a, r, i) {
  const o = Q("v-list-item-title"), l = Q("v-list-item-subtitle"), s = Q("v-list-item"), d = Q("v-select"), u = Q("v-col"), f = Q("v-icon"), h = Q("v-chip"), g = Q("v-alert"), v = Q("v-row");
  return n.pos_profile.posa_enable_restaurant_mode && i.isStandardMode ? (ee(), Re(v, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      _(u, {
        cols: "12",
        sm: "6",
        class: "pb-0 mb-0 pr-2 pt-0"
      }, {
        default: x(() => [
          _(d, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: i.orderTypeLabel,
            placeholder: i.orderTypePlaceholder,
            modelValue: r.internal_selected_order_type,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (w) => r.internal_selected_order_type = w),
              i.onOrderTypeUpdate
            ],
            items: n.order_types,
            "item-title": "order_type_name",
            "item-value": "name",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: Ie(["dark-field sleek-field", { "error-field": !r.internal_selected_order_type && r.showValidation && i.isOrderTypeRequired }]),
            "no-data-text": e.__("No order types found"),
            "hide-details": "",
            disabled: n.readonly
          }, {
            item: x(({ props: w, item: b }) => [
              _(s, Jn(Ca(w)), {
                default: x(() => [
                  _(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: b.raw.order_type_name
                  }, null, 8, ["innerHTML"]),
                  b.raw.default_preparation_time ? (ee(), Re(l, { key: 0 }, {
                    default: x(() => [
                      ae(q(e.__("Prep Time: {0} min", [b.raw.default_preparation_time])), 1)
                    ]),
                    _: 2
                  }, 1024)) : ye("", !0)
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "placeholder", "modelValue", "items", "bg-color", "class", "no-data-text", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      i.showTableSelection ? (ee(), Re(u, {
        key: 0,
        cols: "12",
        sm: "6",
        class: "pb-0 mb-0 pl-2 pt-0"
      }, {
        default: x(() => [
          _(d, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Table Number") + " *",
            modelValue: r.internal_selected_table,
            "onUpdate:modelValue": [
              t[1] || (t[1] = (w) => r.internal_selected_table = w),
              i.onTableUpdate
            ],
            items: n.available_tables,
            "item-title": "table_display",
            "item-value": "table_number",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: Ie(["dark-field sleek-field", { "error-field": i.showTableSelection && !r.internal_selected_table && r.showValidation }]),
            "no-data-text": e.__("No tables available"),
            "hide-details": "",
            disabled: n.readonly
          }, {
            item: x(({ props: w, item: b }) => [
              _(s, Jn(Ca(w)), {
                default: x(() => [
                  _(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: b.raw.table_display
                  }, null, 8, ["innerHTML"]),
                  b.raw.capacity ? (ee(), Re(l, { key: 0 }, {
                    default: x(() => [
                      ae(q(e.__("Capacity: {0} seats", [b.raw.capacity])) + " ", 1),
                      b.raw.location ? (ee(), Oe("span", vee, " • " + q(b.raw.location), 1)) : ye("", !0)
                    ]),
                    _: 2
                  }, 1024)) : ye("", !0)
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "modelValue", "items", "bg-color", "class", "no-data-text", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      })) : ye("", !0),
      n.order_status ? (ee(), Re(u, {
        key: 1,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          _(h, {
            color: i.getStatusColor(n.order_status),
            size: "small",
            variant: "flat"
          }, {
            default: x(() => [
              _(f, {
                start: "",
                size: "small"
              }, {
                default: x(() => [
                  ae(q(i.getStatusIcon(n.order_status)), 1)
                ]),
                _: 1
              }),
              ae(" " + q(n.order_status), 1)
            ]),
            _: 1
          }, 8, ["color"])
        ]),
        _: 1
      })) : ye("", !0),
      i.showValidationMessage ? (ee(), Re(u, {
        key: 2,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          _(g, {
            type: "error",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: x(() => [
              _(f, { start: "" }, {
                default: x(() => t[2] || (t[2] = [
                  ae("mdi-alert-circle")
                ])),
                _: 1,
                __: [2]
              }),
              ae(" " + q(i.validationMessage), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      })) : ye("", !0),
      !r.internal_selected_order_type && i.isStandardMode ? (ee(), Re(u, {
        key: 3,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          _(g, {
            type: "info",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: x(() => [
              _(f, { start: "" }, {
                default: x(() => t[3] || (t[3] = [
                  ae("mdi-information")
                ])),
                _: 1,
                __: [3]
              }),
              ae(" " + q(e.__("Order Type selection is mandatory before adding items to cart")), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      })) : ye("", !0),
      i.isDirectMode ? (ee(), Re(u, {
        key: 4,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          _(g, {
            type: i.isDirectOrderWithKOT ? "success" : "info",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: x(() => [
              _(f, { start: "" }, {
                default: x(() => [
                  ae(q(i.isDirectOrderWithKOT ? "mdi-printer" : "mdi-lightning-bolt"), 1)
                ]),
                _: 1
              }),
              ae(" " + q(i.directModeMessage), 1)
            ]),
            _: 1
          }, 8, ["type"])
        ]),
        _: 1
      })) : ye("", !0)
    ]),
    _: 1
  })) : ye("", !0);
}
const yee = /* @__PURE__ */ nn(pee, [["render", gee], ["__scopeId", "data-v-283c9582"]]), bee = {
  props: {
    pos_profile: Object,
    delivery_charges: Array,
    selected_delivery_charge: [Object, String],
    delivery_charges_rate: Number,
    deliveryChargesFilter: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    readonly: Boolean
  },
  data() {
    return {
      internal_selected_delivery_charge: this.selected_delivery_charge
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    selected_delivery_charge(e) {
      this.internal_selected_delivery_charge = e;
    }
  },
  methods: {
    onUpdate(e) {
      this.$emit("update:selected_delivery_charge", e);
    }
  }
};
function wee(e, t, n, a, r, i) {
  const o = Q("v-list-item-title"), l = Q("v-list-item-subtitle"), s = Q("v-list-item"), d = Q("v-autocomplete"), u = Q("v-col"), f = Q("v-text-field"), h = Q("v-row");
  return n.pos_profile.posa_use_delivery_charges ? (ee(), Re(h, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      _(u, {
        cols: "12",
        sm: "8",
        class: "pb-0 mb-0 pr-0 pt-0"
      }, {
        default: x(() => [
          _(d, {
            density: "compact",
            clearable: "",
            "auto-select-first": "",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Delivery Charges"),
            modelValue: r.internal_selected_delivery_charge,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (g) => r.internal_selected_delivery_charge = g),
              i.onUpdate
            ],
            items: n.delivery_charges,
            "item-title": "name",
            "item-value": "name",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "no-data-text": e.__("Charges not found"),
            "hide-details": "",
            customFilter: n.deliveryChargesFilter,
            disabled: n.readonly
          }, {
            item: x(({ props: g, item: v }) => [
              _(s, Jn(Ca(g)), {
                default: x(() => [
                  _(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: v.raw.name
                  }, null, 8, ["innerHTML"]),
                  _(l, {
                    innerHTML: `Rate: ${v.raw.rate}`
                  }, null, 8, ["innerHTML"])
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "customFilter", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      _(u, {
        cols: "12",
        sm: "4",
        class: "pb-0 mb-0 pt-0"
      }, {
        default: x(() => [
          _(f, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Delivery Charges Rate"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            "model-value": n.formatCurrency(n.delivery_charges_rate),
            prefix: n.currencySymbol(n.pos_profile.currency),
            disabled: ""
          }, null, 8, ["label", "bg-color", "model-value", "prefix"])
        ]),
        _: 1
      })
    ]),
    _: 1
  })) : ye("", !0);
}
const kee = /* @__PURE__ */ nn(bee, [["render", wee], ["__scopeId", "data-v-eede760a"]]), See = {
  props: {
    pos_profile: Object,
    posting_date_display: String,
    customer_balance: Number,
    formatCurrency: Function,
    priceList: String,
    priceLists: Array
  },
  data() {
    return {
      internal_posting_date_display: this.posting_date_display,
      internal_price_list: this.priceList
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    posting_date_display(e) {
      this.internal_posting_date_display = e;
    },
    priceList(e) {
      this.internal_price_list = e;
    }
  },
  methods: {
    onUpdate(e) {
      this.$emit("update:posting_date_display", e);
    },
    onPriceListUpdate(e) {
      this.$emit("update:priceList", e);
    }
  }
}, Cee = {
  key: 0,
  class: "balance-field ml-3"
}, Aee = { class: "balance-value" }, xee = { class: "balance-field" }, Tee = { class: "balance-value" };
function Iee(e, t, n, a, r, i) {
  const o = Q("VueDatePicker"), l = Q("v-col"), s = Q("v-select"), d = Q("v-row");
  return n.pos_profile.posa_allow_change_posting_date ? (ee(), Re(d, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          _(o, {
            modelValue: r.internal_posting_date_display,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (u) => r.internal_posting_date_display = u),
              i.onUpdate
            ],
            "model-type": "format",
            format: "dd-MM-yyyy",
            "auto-apply": "",
            placeholder: e.frappe._("Posting Date"),
            dark: i.isDarkTheme,
            class: "dark-field sleek-field posting-date-input"
          }, null, 8, ["modelValue", "placeholder", "dark", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      n.pos_profile.posa_enable_price_list_dropdown ? (ee(), Re(l, {
        key: 0,
        cols: "12",
        sm: "6",
        class: "pb-2 d-flex align-center"
      }, {
        default: x(() => [
          _(s, {
            density: "comfortable",
            variant: "solo",
            color: "primary",
            items: n.priceLists,
            label: e.frappe._("Price List"),
            modelValue: r.internal_price_list,
            "onUpdate:modelValue": [
              t[1] || (t[1] = (u) => r.internal_price_list = u),
              i.onPriceListUpdate
            ],
            "hide-details": "",
            class: "flex-grow-1 sleek-field"
          }, null, 8, ["items", "label", "modelValue", "onUpdate:modelValue"]),
          n.pos_profile.posa_show_customer_balance ? (ee(), Oe("div", Cee, [
            I("strong", null, q(e.__("Customer Balance")) + ":", 1),
            I("span", Aee, q(n.formatCurrency(n.customer_balance)), 1)
          ])) : ye("", !0)
        ]),
        _: 1
      })) : n.pos_profile.posa_show_customer_balance ? (ee(), Re(l, {
        key: 1,
        cols: "12",
        sm: "8",
        class: "pb-2 d-flex align-center"
      }, {
        default: x(() => [
          I("div", xee, [
            I("strong", null, q(e.__("Customer Balance")) + ":", 1),
            I("span", Tee, q(n.formatCurrency(n.customer_balance)), 1)
          ])
        ]),
        _: 1
      })) : ye("", !0)
    ]),
    _: 1
  })) : ye("", !0);
}
const Eee = /* @__PURE__ */ nn(See, [["render", Iee], ["__scopeId", "data-v-59819b3f"]]), Pee = {
  props: {
    pos_profile: Object,
    selected_currency: String,
    plc_conversion_rate: Number,
    conversion_rate: Number,
    available_currencies: Array,
    isNumber: Function,
    price_list_currency: String
  },
  data() {
    return {
      internal_selected_currency: this.selected_currency,
      internal_plc_rate: this.plc_conversion_rate,
      internal_conversion_rate: this.conversion_rate
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    selected_currency(e) {
      this.internal_selected_currency = e;
    },
    plc_conversion_rate(e) {
      this.internal_plc_rate = e;
    },
    conversion_rate(e) {
      this.internal_conversion_rate = e;
    }
  },
  methods: {
    onCurrencyUpdate(e) {
      this.$emit("update:selected_currency", e);
    },
    onPlcRateChange() {
      this.$emit("update:plc_conversion_rate", this.internal_plc_rate);
    },
    onConversionChange() {
      this.$emit("update:conversion_rate", this.internal_conversion_rate);
    }
  }
};
function Oee(e, t, n, a, r, i) {
  const o = Q("v-select"), l = Q("v-col"), s = Q("v-text-field"), d = Q("v-row");
  return n.pos_profile.posa_allow_multi_currency ? (ee(), Re(d, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          _(o, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Currency"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_selected_currency,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (u) => r.internal_selected_currency = u),
              i.onCurrencyUpdate
            ],
            items: n.available_currencies
          }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          _(s, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: "Price List " + n.price_list_currency + " to " + r.internal_selected_currency,
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_plc_rate,
            "onUpdate:modelValue": t[1] || (t[1] = (u) => r.internal_plc_rate = u),
            rules: [n.isNumber],
            onChange: i.onPlcRateChange
          }, null, 8, ["label", "bg-color", "modelValue", "rules", "onChange"])
        ]),
        _: 1
      }),
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          _(s, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Conversion Rate"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_conversion_rate,
            "onUpdate:modelValue": t[2] || (t[2] = (u) => r.internal_conversion_rate = u),
            rules: [n.isNumber],
            onChange: i.onConversionChange
          }, null, 8, ["label", "bg-color", "modelValue", "rules", "onChange"])
        ]),
        _: 1
      })
    ]),
    _: 1
  })) : ye("", !0);
}
const Dee = /* @__PURE__ */ nn(Pee, [["render", Oee], ["__scopeId", "data-v-2d2e6b2b"]]), Bee = {
  props: {
    modelValue: Boolean
  },
  emits: ["update:modelValue", "confirm"],
  methods: {
    onConfirm() {
      this.$emit("confirm");
    }
  }
}, Vee = { class: "text-h5 text-primary" };
function Mee(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-card-text"), s = Q("v-spacer"), d = Q("v-btn"), u = Q("v-card-actions"), f = Q("v-card"), h = Q("v-dialog");
  return ee(), Re(h, {
    "model-value": n.modelValue,
    "max-width": "330",
    "onUpdate:modelValue": t[1] || (t[1] = (g) => e.$emit("update:modelValue", g))
  }, {
    default: x(() => [
      _(f, null, {
        default: x(() => [
          _(o, { class: "text-h5" }, {
            default: x(() => [
              I("span", Vee, q(e.__("Cancel Sale ?")), 1)
            ]),
            _: 1
          }),
          _(l, null, {
            default: x(() => t[2] || (t[2] = [
              ae(' This would cancel and delete the current sale. To save it as Draft, click the "Save and Clear" instead. ')
            ])),
            _: 1,
            __: [2]
          }),
          _(u, null, {
            default: x(() => [
              _(s),
              _(d, {
                color: "error",
                onClick: i.onConfirm
              }, {
                default: x(() => [
                  ae(q(e.__("Yes, Cancel sale")), 1)
                ]),
                _: 1
              }, 8, ["onClick"]),
              _(d, {
                color: "warning",
                onClick: t[0] || (t[0] = (g) => e.$emit("update:modelValue", !1))
              }, {
                default: x(() => [
                  ae(q(e.__("Back")), 1)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["model-value"]);
}
const Ree = /* @__PURE__ */ nn(Bee, [["render", Mee]]), Lee = {
  props: {
    pos_profile: Object,
    invoice_doc: Object,
    total_qty: [Number, String],
    additional_discount: Number,
    additional_discount_percentage: Number,
    total_items_discount_amount: Number,
    subtotal: Number,
    displayCurrency: String,
    formatFloat: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    discount_percentage_offer_name: [String, Number],
    isNumber: Function,
    restaurant_add_items_context: Object
  },
  data() {
    return {
      // Loading states for better UX
      saveLoading: !1,
      loadDraftsLoading: !1,
      selectOrderLoading: !1,
      showOrdersLoading: !1,
      submitOrderLoading: !1,
      cancelLoading: !1,
      returnsLoading: !1,
      printLoading: !1,
      paymentLoading: !1
    };
  },
  emits: [
    "update:additional_discount",
    "update:additional_discount_percentage",
    "update_discount_umount",
    "save-and-clear",
    "load-drafts",
    "select-order",
    "show-orders",
    "submit-order",
    "cancel-sale",
    "open-returns",
    "print-draft",
    "show-payment"
  ],
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    // Check if we're in standard restaurant mode (not direct order modes)
    isStandardRestaurantMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (!this.pos_profile.posa_order_mode || this.pos_profile.posa_order_mode === "Standard");
    },
    // Check if we're in any direct order mode
    isDirectOrderMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT");
    },
    // Check if we're in standard restaurant mode (not direct order modes)
    isStandardRestaurantMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (!this.pos_profile.posa_order_mode || this.pos_profile.posa_order_mode === "Standard");
    },
    // Check if we're in any direct order mode
    isDirectOrderMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT");
    },
    // Check if we're in direct order with KOT mode  
    isDirectOrderWithKOT() {
      return this.pos_profile.posa_enable_restaurant_mode && this.pos_profile.posa_order_mode === "Direct Order + KOT";
    },
    hide_qty_decimals() {
      try {
        const e = localStorage.getItem("posawesome_item_selector_settings");
        if (e)
          return !!JSON.parse(e).hide_qty_decimals;
      } catch (e) {
        console.error("Failed to load item selector settings:", e);
      }
      return !1;
    },
    hasExistingOrder() {
      return !!(this.invoice_doc && this.invoice_doc.name) || !!(this.restaurant_add_items_context && this.restaurant_add_items_context.is_updating_order);
    }
  },
  methods: {
    // Debounced handlers for better performance
    handleAdditionalDiscountUpdate(e) {
      this.$emit("update:additional_discount", e);
    },
    handleAdditionalDiscountPercentageUpdate(e) {
      this.$emit("update:additional_discount_percentage", e);
    },
    async handleSaveAndClear() {
      this.saveLoading = !0;
      try {
        await this.$emit("save-and-clear");
      } finally {
        this.saveLoading = !1;
      }
    },
    async handleLoadDrafts() {
      this.loadDraftsLoading = !0;
      try {
        await this.$emit("load-drafts");
      } finally {
        this.loadDraftsLoading = !1;
      }
    },
    async handleSelectOrder() {
      this.selectOrderLoading = !0;
      try {
        await this.$emit("select-order");
      } finally {
        this.selectOrderLoading = !1;
      }
    },
    async handleShowOrders() {
      this.showOrdersLoading = !0;
      try {
        await this.$emit("show-orders");
      } finally {
        this.showOrdersLoading = !1;
      }
    },
    async handleSubmitOrder() {
      this.submitOrderLoading = !0;
      try {
        await this.$emit("submit-order");
      } finally {
        this.submitOrderLoading = !1;
      }
    },
    async handleCancelSale() {
      this.cancelLoading = !0;
      try {
        await this.$emit("cancel-sale");
      } finally {
        this.cancelLoading = !1;
      }
    },
    async handleOpenReturns() {
      this.returnsLoading = !0;
      try {
        await this.$emit("open-returns");
      } finally {
        this.returnsLoading = !1;
      }
    },
    async handlePrintDraft() {
      this.printLoading = !0;
      try {
        await this.$emit("print-draft");
      } finally {
        this.printLoading = !1;
      }
    },
    async handleShowPayment() {
      this.paymentLoading = !0;
      try {
        await this.$emit("show-payment");
      } finally {
        this.paymentLoading = !1;
      }
    }
  }
};
function Fee(e, t, n, a, r, i) {
  const o = Q("v-text-field"), l = Q("v-col"), s = Q("v-btn"), d = Q("v-row"), u = Q("v-card");
  return ee(), Re(u, {
    class: Ie(["cards mb-0 mt-3 py-2 px-3 rounded-lg resizable", i.isDarkTheme ? "" : "bg-grey-lighten-4"]),
    style: Xe((i.isDarkTheme ? "background-color:#1E1E1E;" : "") + "resize: vertical; overflow: auto;")
  }, {
    default: x(() => [
      _(d, {
        dense: "",
        class: "mb-1"
      }, {
        default: x(() => [
          _(l, { cols: "4" }, {
            default: x(() => [
              _(o, {
                "model-value": n.formatFloat(n.subtotal),
                label: e.frappe._("Total"),
                "prepend-inner-icon": "mdi-cash",
                variant: "solo",
                density: "compact",
                readonly: "",
                color: "success",
                class: "summary-field"
              }, null, 8, ["model-value", "label"])
            ]),
            _: 1
          }),
          i.isDirectOrderMode ? (ee(), Re(l, {
            key: 0,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "success",
                theme: "dark",
                "prepend-icon": "mdi-cash-multiple",
                onClick: i.handleShowPayment,
                class: "summary-btn pay-btn",
                loading: r.paymentLoading
              }, {
                default: x(() => [
                  ae(q(e.__("PAY")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : i.isStandardRestaurantMode ? (ee(), Re(l, {
            key: 1,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "accent",
                theme: "dark",
                "prepend-icon": "mdi-receipt",
                onClick: i.handleSaveAndClear,
                class: "summary-btn",
                loading: r.saveLoading
              }, {
                default: x(() => [
                  ae(q(i.hasExistingOrder ? e.__("Update Order") : e.__("Make Order")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : (ee(), Re(l, {
            key: 2,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "accent",
                theme: "dark",
                "prepend-icon": "mdi-content-save",
                onClick: i.handleSaveAndClear,
                class: "summary-btn",
                loading: r.saveLoading
              }, {
                default: x(() => [
                  ae(q(e.__("Save & Clear")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })),
          i.isStandardRestaurantMode ? (ee(), Re(l, {
            key: 3,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "info",
                theme: "dark",
                "prepend-icon": "mdi-view-list",
                onClick: i.handleShowOrders,
                class: "summary-btn",
                loading: r.showOrdersLoading
              }, {
                default: x(() => [
                  ae(q(e.__("Show Orders")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : !n.pos_profile.posa_enable_restaurant_mode && n.pos_profile.custom_allow_select_sales_order == 1 ? (ee(), Re(l, {
            key: 4,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "info",
                theme: "dark",
                "prepend-icon": "mdi-file-search",
                onClick: i.handleSelectOrder,
                class: "summary-btn",
                loading: r.selectOrderLoading
              }, {
                default: x(() => [
                  ae(q(e.__("Select S.O")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : i.isDirectOrderMode ? (ee(), Re(l, {
            key: 5,
            cols: "4"
          })) : ye("", !0)
        ]),
        _: 1
      }),
      _(d, { dense: "" }, {
        default: x(() => [
          _(l, { cols: "4" }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "error",
                theme: "dark",
                "prepend-icon": "mdi-cancel",
                onClick: i.handleCancelSale,
                class: "summary-btn",
                loading: r.cancelLoading
              }, {
                default: x(() => [
                  ae(q(e.__("Cancel Sale")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          }),
          n.pos_profile.posa_allow_return == 1 ? (ee(), Re(l, {
            key: 0,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "secondary",
                theme: "dark",
                "prepend-icon": "mdi-undo-variant",
                onClick: i.handleOpenReturns,
                class: "summary-btn",
                loading: r.returnsLoading
              }, {
                default: x(() => [
                  ae(q(e.__("Sales Return")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : n.pos_profile.posa_allow_print_draft_invoices ? (ee(), Re(l, {
            key: 1,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "primary",
                theme: "dark",
                "prepend-icon": "mdi-printer",
                onClick: i.handlePrintDraft,
                class: "summary-btn",
                loading: r.printLoading
              }, {
                default: x(() => [
                  ae(q(e.__("Print Draft")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : ye("", !0),
          i.isDirectOrderMode ? ye("", !0) : (ee(), Re(l, {
            key: 2,
            cols: "4"
          }, {
            default: x(() => [
              _(s, {
                block: "",
                color: "success",
                theme: "dark",
                "prepend-icon": "mdi-cash-multiple",
                onClick: i.handleShowPayment,
                class: "summary-btn pay-btn",
                loading: r.paymentLoading
              }, {
                default: x(() => [
                  ae(q(e.__("PAY")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          }))
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["class", "style"]);
}
const Nee = /* @__PURE__ */ nn(Lee, [["render", Fee], ["__scopeId", "data-v-40b26cd5"]]), Uee = {
  name: "ItemsTable",
  props: {
    headers: Array,
    items: Array,
    expanded: Array,
    itemsPerPage: Number,
    itemSearch: String,
    pos_profile: Object,
    invoice_doc: Object,
    invoiceType: String,
    stock_settings: Object,
    displayCurrency: String,
    formatFloat: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    isNumber: Function,
    setFormatedQty: Function,
    setFormatedCurrency: Function,
    calcPrices: Function,
    calcUom: Function,
    setSerialNo: Function,
    setBatchQty: Function,
    validateDueDate: Function,
    removeItem: Function,
    subtractOne: Function,
    addOne: Function,
    isReturnInvoice: Boolean,
    toggleOffer: Function,
    changePriceListRate: Function,
    isNegative: Function
  },
  data() {
    return {
      draggedItem: null,
      draggedIndex: null,
      dragOverIndex: null,
      isDragging: !1,
      pendingAdd: null,
      editNameDialog: !1,
      editNameTarget: null,
      editedName: ""
    };
  },
  computed: {
    headerProps() {
      return this.isDarkTheme ? { style: "background-color:#121212;color:#fff" } : {};
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    hide_qty_decimals() {
      try {
        const e = localStorage.getItem("posawesome_item_selector_settings");
        if (e)
          return !!JSON.parse(e).hide_qty_decimals;
      } catch (e) {
        console.error("Failed to load item selector settings:", e);
      }
      return !1;
    }
  },
  methods: {
    onDragOverFromSelector(e) {
      e.dataTransfer.types.includes("application/json") && (e.preventDefault(), e.dataTransfer.dropEffect = "copy");
    },
    onDragEnterFromSelector() {
      this.$emit("show-drop-feedback", !0);
    },
    onDragLeaveFromSelector(e) {
      e.currentTarget.contains(e.relatedTarget) || this.$emit("show-drop-feedback", !1);
    },
    onDropFromSelector(e) {
      e.preventDefault();
      try {
        const t = JSON.parse(e.dataTransfer.getData("application/json"));
        t.type === "item-from-selector" && (this.addItemDebounced(t.item), this.$emit("item-dropped", !1));
      } catch (t) {
        console.error("Error parsing drag data:", t);
      }
    },
    addItem(e) {
      const t = this.items.find(
        (n) => n.item_code === e.item_code && n.uom === e.uom && n.rate === e.rate
      );
      t ? (t.qty += e.qty || 1, t.amount = t.qty * t.rate, this.$forceUpdate()) : this.items.push({ ...e });
    },
    addItemDebounced: Ni.debounce(function(e) {
      this.addItem(e);
    }, 50),
    openNameDialog(e) {
      this.editNameTarget = e, this.editedName = e.item_name, this.editNameDialog = !0;
    },
    sanitizeName(e) {
      const t = document.createElement("div");
      return t.innerHTML = e, (t.textContent || t.innerText || "").trim().slice(0, 140);
    },
    saveItemName() {
      if (!this.editNameTarget) return;
      const e = this.sanitizeName(this.editedName);
      this.editNameTarget.original_item_name || (this.editNameTarget.original_item_name = this.editNameTarget.item_name), this.editNameTarget.item_name = e, this.editNameTarget.name_overridden = e !== this.editNameTarget.original_item_name ? 1 : 0, this.editNameDialog = !1;
    },
    resetItemName(e) {
      e && e.original_item_name && (e.item_name = e.original_item_name, e.name_overridden = 0), this.editNameTarget === e && (this.editedName = e.item_name);
    }
  }
}, $ee = { class: "d-flex align-center" }, qee = {
  class: "qty-controls",
  style: { display: "flex", "align-items": "center", gap: "4px" }
}, Hee = { style: { display: "flex", "justify-content": "flex-start", "align-items": "center" } }, zee = { class: "amount-value" }, Wee = { class: "currency-display" }, jee = { class: "currency-symbol" }, Kee = { class: "currency-display" }, Yee = { class: "currency-symbol" }, Gee = ["colspan"], Qee = { class: "expanded-content" }, Jee = { class: "item-details-form" }, Xee = { class: "form-section" }, Zee = { class: "section-header" }, ete = { class: "section-title" }, tte = { class: "form-row" }, nte = { class: "form-field" }, ate = { class: "form-field" }, rte = {
  key: 0,
  class: "text-caption mt-1"
}, ite = { class: "form-field" }, ote = { class: "form-section" }, ste = { class: "section-header" }, lte = { class: "section-title" }, cte = { class: "form-row" }, ute = { class: "form-field" }, dte = { class: "form-field" }, fte = { class: "form-field" }, mte = { class: "form-row" }, hte = { class: "form-field" }, _te = { class: "form-field" }, pte = {
  key: 0,
  class: "form-field"
}, vte = { class: "form-section" }, gte = { class: "section-header" }, yte = { class: "section-title" }, bte = { class: "form-row" }, wte = { class: "form-field" }, kte = { class: "form-field" }, Ste = { class: "form-field" }, Cte = { class: "form-row" }, Ate = { class: "form-field" }, xte = { class: "form-field" }, Tte = {
  key: 0,
  class: "form-field"
}, Ite = {
  key: 0,
  class: "form-section"
}, Ete = { class: "section-header" }, Pte = { class: "section-title" }, Ote = { class: "form-row" }, Dte = { class: "form-field" }, Bte = { class: "form-row" }, Vte = { class: "form-field full-width" }, Mte = {
  key: 1,
  class: "form-section"
}, Rte = { class: "section-header" }, Lte = { class: "section-title" }, Fte = { class: "form-row" }, Nte = { class: "form-field" }, Ute = { class: "form-field" }, $te = { class: "form-field" }, qte = {
  key: 2,
  class: "form-section"
}, Hte = { class: "section-header" }, zte = { class: "section-title" }, Wte = { class: "form-row" }, jte = { class: "form-field" };
function Kte(e, t, n, a, r, i) {
  const o = Q("v-chip"), l = Q("v-icon"), s = Q("v-btn"), d = Q("v-checkbox-btn"), u = Q("v-text-field"), f = Q("v-select"), h = Q("v-checkbox"), g = Q("v-autocomplete"), v = Q("v-list-item-title"), w = Q("v-list-item-subtitle"), b = Q("v-list-item"), p = Q("VueDatePicker"), y = Q("v-data-table-virtual"), S = Q("v-card-title"), E = Q("v-card-text"), C = Q("v-spacer"), D = Q("v-card-actions"), P = Q("v-card"), O = Q("v-dialog");
  return ee(), Oe("div", {
    class: "my-0 py-0 overflow-y-auto items-table-container",
    style: { height: "calc(100% - 80px)", maxHeight: "calc(100% - 80px)" },
    onDragover: t[5] || (t[5] = (T) => i.onDragOverFromSelector(T)),
    onDrop: t[6] || (t[6] = (T) => i.onDropFromSelector(T)),
    onDragenter: t[7] || (t[7] = (...T) => i.onDragEnterFromSelector && i.onDragEnterFromSelector(...T)),
    onDragleave: t[8] || (t[8] = (...T) => i.onDragLeaveFromSelector && i.onDragLeaveFromSelector(...T))
  }, [
    _(y, {
      headers: n.headers,
      items: n.items,
      theme: e.$theme.current,
      expanded: n.expanded,
      "show-expand": "",
      "item-value": "posa_row_id",
      class: "modern-items-table elevation-2",
      "items-per-page": n.itemsPerPage,
      "expand-on-click": "",
      density: "compact",
      "hide-default-footer": "",
      "single-expand": !0,
      "header-props": i.headerProps,
      "no-data-text": e.__("No items in cart"),
      "onUpdate:expanded": t[0] || (t[0] = (T) => e.$emit(
        "update:expanded",
        T.map((A) => typeof A == "object" ? A.posa_row_id : A)
      )),
      search: n.itemSearch
    }, {
      "item.item_name": x(({ item: T }) => [
        I("div", $ee, [
          I("span", null, q(T.item_name), 1),
          T.is_bundle ? (ee(), Re(o, {
            key: 0,
            color: "secondary",
            size: "x-small",
            class: "ml-1"
          }, {
            default: x(() => [
              ae(q(e.__("Bundle")), 1)
            ]),
            _: 1
          })) : ye("", !0),
          T.name_overridden ? (ee(), Re(o, {
            key: 1,
            color: "primary",
            size: "x-small",
            class: "ml-1"
          }, {
            default: x(() => [
              ae(q(e.__("Edited")), 1)
            ]),
            _: 1
          })) : ye("", !0),
          n.pos_profile.posa_allow_line_item_name_override && !T.posa_is_replace ? (ee(), Re(l, {
            key: 2,
            size: "x-small",
            class: "ml-1",
            onClick: ia((A) => i.openNameDialog(T), ["stop"])
          }, {
            default: x(() => t[9] || (t[9] = [
              ae("mdi-pencil")
            ])),
            _: 2,
            __: [9]
          }, 1032, ["onClick"])) : ye("", !0),
          T.name_overridden ? (ee(), Re(l, {
            key: 3,
            size: "x-small",
            class: "ml-1",
            onClick: ia((A) => i.resetItemName(T), ["stop"])
          }, {
            default: x(() => t[10] || (t[10] = [
              ae("mdi-undo")
            ])),
            _: 2,
            __: [10]
          }, 1032, ["onClick"])) : ye("", !0)
        ])
      ]),
      "item.qty": x(({ item: T }) => [
        I("div", qee, [
          _(s, {
            disabled: !!T.posa_is_replace,
            size: "x-small",
            color: "warning",
            variant: "text",
            icon: "",
            onClick: ia((A) => n.subtractOne(T), ["stop"])
          }, {
            default: x(() => [
              _(l, {
                size: "small",
                style: { "font-weight": "bold" }
              }, {
                default: x(() => t[11] || (t[11] = [
                  ae("mdi-minus")
                ])),
                _: 1,
                __: [11]
              })
            ]),
            _: 2
          }, 1032, ["disabled", "onClick"]),
          I("div", {
            class: Ie(["amount-value", { "negative-number": n.isNegative(T.qty) }]),
            style: { "min-width": "40px", "text-align": "center" }
          }, q(n.formatFloat(T.qty, i.hide_qty_decimals ? 0 : void 0)), 3),
          _(s, {
            disabled: !!T.posa_is_replace || T.is_stock_item && (!n.stock_settings.allow_negative_stock || n.pos_profile.posa_block_sale_beyond_available_qty) && T.max_qty !== void 0 && T.qty >= T.max_qty,
            size: "x-small",
            color: "success",
            variant: "text",
            icon: "",
            onClick: ia((A) => n.addOne(T), ["stop"])
          }, {
            default: x(() => [
              _(l, {
                size: "small",
                style: { "font-weight": "bold" }
              }, {
                default: x(() => t[12] || (t[12] = [
                  ae("mdi-plus")
                ])),
                _: 1,
                __: [12]
              })
            ]),
            _: 2
          }, 1032, ["disabled", "onClick"])
        ])
      ]),
      "item.rate": x(({ item: T }) => [
        I("span", {
          class: Ie(["amount-value", { "negative-number": n.isNegative(T.rate) }])
        }, q(n.formatFloat(T.rate)), 3)
      ]),
      "item.amount": x(({ item: T }) => [
        I("span", {
          class: Ie(["amount-value", { "negative-number": n.isNegative(T.qty * T.rate) }])
        }, q(n.formatFloat(T.qty * T.rate)), 3)
      ]),
      "item.actions": x(({ item: T }) => [
        I("div", Hee, [
          _(s, {
            disabled: !!T.posa_is_replace,
            size: "small",
            color: "error",
            variant: "text",
            icon: "",
            onClick: ia((A) => n.removeItem(T), ["stop"])
          }, {
            default: x(() => [
              _(l, { size: "small" }, {
                default: x(() => t[13] || (t[13] = [
                  ae("mdi-trash-can-outline")
                ])),
                _: 1,
                __: [13]
              })
            ]),
            _: 2
          }, 1032, ["disabled", "onClick"])
        ])
      ]),
      "item.discount_value": x(({ item: T }) => [
        I("div", zee, q(n.formatFloat(
          T.discount_percentage || (T.price_list_rate ? T.discount_amount / T.price_list_rate * 100 : 0)
        )) + "% ", 1)
      ]),
      "item.discount_amount": x(({ item: T }) => [
        I("div", Wee, [
          I("span", jee, q(n.currencySymbol(n.displayCurrency)), 1),
          I("span", {
            class: Ie(["amount-value", { "negative-number": n.isNegative(T.discount_amount || 0) }])
          }, q(n.formatCurrency(T.discount_amount || 0)), 3)
        ])
      ]),
      "item.price_list_rate": x(({ item: T }) => [
        I("div", Kee, [
          I("span", Yee, q(n.currencySymbol(n.displayCurrency)), 1),
          I("span", {
            class: Ie(["amount-value", { "negative-number": n.isNegative(T.price_list_rate) }])
          }, q(n.formatCurrency(T.price_list_rate)), 3)
        ])
      ]),
      "item.posa_is_offer": x(({ item: T }) => [
        _(d, {
          modelValue: T.posa_is_offer,
          "onUpdate:modelValue": (A) => T.posa_is_offer = A,
          class: "center",
          onChange: (A) => n.toggleOffer(T)
        }, null, 8, ["modelValue", "onUpdate:modelValue", "onChange"])
      ]),
      "expanded-row": x(({ item: T }) => [
        I("td", {
          colspan: n.headers.length,
          class: "ma-0 pa-0"
        }, [
          I("div", Qee, [
            I("div", Jee, [
              I("div", Xee, [
                I("div", Zee, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[14] || (t[14] = [
                      ae("mdi-information-outline")
                    ])),
                    _: 1,
                    __: [14]
                  }),
                  I("span", ete, q(e.__("Basic Information")), 1)
                ]),
                I("div", tte, [
                  I("div", nte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Item Code"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.item_code,
                      "onUpdate:modelValue": (A) => T.item_code = A,
                      disabled: "",
                      "prepend-inner-icon": "mdi-barcode"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  I("div", ate, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.qty, i.hide_qty_decimals ? 0 : void 0),
                      onChange: (A) => n.setFormatedQty(T, "qty", null, !1, A.target.value),
                      rules: [n.isNumber],
                      disabled: !!T.posa_is_replace,
                      "prepend-inner-icon": "mdi-numeric"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "rules", "disabled"]),
                    T.is_stock_item && T.max_qty !== void 0 ? (ee(), Oe("div", rte, q(e.__("In stock: {0}", [
                      n.formatFloat(
                        T.max_qty,
                        i.hide_qty_decimals ? 0 : void 0
                      )
                    ])), 1)) : ye("", !0)
                  ]),
                  I("div", ite, [
                    _(f, {
                      density: "compact",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("UOM"),
                      modelValue: T.uom,
                      "onUpdate:modelValue": [(A) => T.uom = A, (A) => n.calcUom(T, A)],
                      items: T.item_uoms,
                      variant: "outlined",
                      "item-title": "uom",
                      "item-value": "uom",
                      "hide-details": "",
                      disabled: !!T.posa_is_replace || n.isReturnInvoice && n.invoice_doc.return_against,
                      "prepend-inner-icon": "mdi-weight"
                    }, null, 8, ["bg-color", "label", "modelValue", "onUpdate:modelValue", "items", "disabled"])
                  ])
                ])
              ]),
              I("div", ote, [
                I("div", ste, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[15] || (t[15] = [
                      ae("mdi-currency-usd")
                    ])),
                    _: 1,
                    __: [15]
                  }),
                  I("span", lte, q(e.__("Pricing & Discounts")), 1)
                ]),
                I("div", cte, [
                  I("div", ute, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "rate",
                      label: e.frappe._("Rate"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.rate),
                      onChange: (A) => [
                        n.setFormatedCurrency(T, "rate", null, !1, A),
                        n.calcPrices(T, A.target.value, A)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_rate || !!T.posa_is_replace || !!T.posa_offer_applied,
                      "prepend-inner-icon": "mdi-currency-usd"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ]),
                  I("div", dte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "discount_percentage",
                      label: e.frappe._("Discount %"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.discount_percentage || 0),
                      onChange: (A) => [
                        n.setFormatedCurrency(
                          T,
                          "discount_percentage",
                          null,
                          !1,
                          A
                        ),
                        n.calcPrices(T, A.target.value, A)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_item_discount || !!T.posa_is_replace || !!T.posa_offer_applied,
                      "prepend-inner-icon": "mdi-percent"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ]),
                  I("div", fte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "discount_amount",
                      label: e.frappe._("Discount Amount"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.discount_amount || 0),
                      onChange: (A) => [
                        n.setFormatedCurrency(
                          T,
                          "discount_amount",
                          null,
                          !1,
                          A
                        ),
                        n.calcPrices(T, A.target.value, A)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_item_discount || !!T.posa_is_replace || !!T.posa_offer_applied,
                      "prepend-inner-icon": "mdi-tag-minus"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ])
                ]),
                I("div", mte, [
                  I("div", hte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Price List Rate"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.price_list_rate || 0),
                      disabled: !n.pos_profile.posa_allow_price_list_rate_change,
                      "prepend-inner-icon": "mdi-format-list-numbered",
                      prefix: n.currencySymbol(n.pos_profile.currency),
                      onChange: (A) => n.changePriceListRate(T)
                    }, null, 8, ["label", "bg-color", "model-value", "disabled", "prefix", "onChange"])
                  ]),
                  I("div", _te, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Total Amount"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.qty * T.rate),
                      disabled: "",
                      "prepend-inner-icon": "mdi-calculator"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  n.pos_profile.posa_allow_price_list_rate_change ? (ee(), Oe("div", pte, [
                    _(s, {
                      size: "small",
                      color: "primary",
                      variant: "outlined",
                      class: "change-price-btn",
                      onClick: ia((A) => n.changePriceListRate(T), ["stop"])
                    }, {
                      default: x(() => [
                        _(l, {
                          size: "small",
                          class: "mr-1"
                        }, {
                          default: x(() => t[16] || (t[16] = [
                            ae("mdi-pencil")
                          ])),
                          _: 1,
                          __: [16]
                        }),
                        ae(" " + q(e.__("Change Price")), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ])) : ye("", !0)
                ])
              ]),
              I("div", vte, [
                I("div", gte, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[17] || (t[17] = [
                      ae("mdi-warehouse")
                    ])),
                    _: 1,
                    __: [17]
                  }),
                  I("span", yte, q(e.__("Stock Information")), 1)
                ]),
                I("div", bte, [
                  I("div", wte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Available QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.actual_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-package-variant"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  I("div", kte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Stock QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.stock_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-scale-balance"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  I("div", Ste, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Stock UOM"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.stock_uom,
                      "onUpdate:modelValue": (A) => T.stock_uom = A,
                      disabled: "",
                      "prepend-inner-icon": "mdi-weight-pound"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ])
                ]),
                I("div", Cte, [
                  I("div", Ate, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Warehouse"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.warehouse,
                      "onUpdate:modelValue": (A) => T.warehouse = A,
                      disabled: "",
                      "prepend-inner-icon": "mdi-warehouse"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  I("div", xte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Group"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.item_group,
                      "onUpdate:modelValue": (A) => T.item_group = A,
                      disabled: "",
                      "prepend-inner-icon": "mdi-folder-outline"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  T.posa_offer_applied ? (ee(), Oe("div", Tte, [
                    _(h, {
                      density: "compact",
                      label: e.frappe._("Offer Applied"),
                      modelValue: T.posa_offer_applied,
                      "onUpdate:modelValue": (A) => T.posa_offer_applied = A,
                      readonly: "",
                      "hide-details": "",
                      class: "mt-1",
                      color: "success"
                    }, null, 8, ["label", "modelValue", "onUpdate:modelValue"])
                  ])) : ye("", !0)
                ])
              ]),
              T.has_serial_no || T.serial_no ? (ee(), Oe("div", Ite, [
                I("div", Ete, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[18] || (t[18] = [
                      ae("mdi-barcode-scan")
                    ])),
                    _: 1,
                    __: [18]
                  }),
                  I("span", Pte, q(e.__("Serial Numbers")), 1)
                ]),
                I("div", Ote, [
                  I("div", Dte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Serial No QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.serial_no_selected_count,
                      "onUpdate:modelValue": (A) => T.serial_no_selected_count = A,
                      type: "number",
                      disabled: "",
                      "prepend-inner-icon": "mdi-counter"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ])
                ]),
                I("div", Bte, [
                  I("div", Vte, [
                    _(g, {
                      modelValue: T.serial_no_selected,
                      "onUpdate:modelValue": [(A) => T.serial_no_selected = A, (A) => n.setSerialNo(T)],
                      items: T.serial_no_data,
                      "item-title": "serial_no",
                      "item-value": "serial_no",
                      variant: "outlined",
                      density: "compact",
                      chips: "",
                      color: "primary",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("Serial No"),
                      multiple: "",
                      "prepend-inner-icon": "mdi-barcode"
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "items", "bg-color", "label"])
                  ])
                ])
              ])) : ye("", !0),
              T.has_batch_no || T.batch_no ? (ee(), Oe("div", Mte, [
                I("div", Rte, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[19] || (t[19] = [
                      ae("mdi-package-variant-closed")
                    ])),
                    _: 1,
                    __: [19]
                  }),
                  I("span", Lte, q(e.__("Batch Information")), 1)
                ]),
                I("div", Fte, [
                  I("div", Nte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Batch No. Available QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.actual_batch_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-package-variant"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  I("div", Ute, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Batch No Expiry Date"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.batch_no_expiry_date,
                      "onUpdate:modelValue": (A) => T.batch_no_expiry_date = A,
                      disabled: "",
                      "prepend-inner-icon": "mdi-calendar-clock"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  I("div", $te, [
                    _(g, {
                      modelValue: T.batch_no,
                      "onUpdate:modelValue": [(A) => T.batch_no = A, (A) => n.setBatchQty(T, A)],
                      items: T.batch_no_data,
                      "item-title": "batch_no",
                      variant: "outlined",
                      density: "compact",
                      color: "primary",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("Batch No"),
                      "hide-details": "",
                      "prepend-inner-icon": "mdi-package-variant-closed"
                    }, {
                      item: x(({ props: A, item: V }) => [
                        _(b, Jn(Ca(A)), {
                          default: x(() => [
                            _(v, {
                              innerHTML: V.raw.batch_no
                            }, null, 8, ["innerHTML"]),
                            _(w, {
                              innerHTML: `Available QTY  '${V.raw.batch_qty}' - Expiry Date ${V.raw.expiry_date}`
                            }, null, 8, ["innerHTML"])
                          ]),
                          _: 2
                        }, 1040)
                      ]),
                      _: 2
                    }, 1032, ["modelValue", "onUpdate:modelValue", "items", "bg-color", "label"])
                  ])
                ])
              ])) : ye("", !0),
              n.pos_profile.posa_allow_sales_order && n.invoiceType == "Order" ? (ee(), Oe("div", qte, [
                I("div", Hte, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[20] || (t[20] = [
                      ae("mdi-calendar-check")
                    ])),
                    _: 1,
                    __: [20]
                  }),
                  I("span", zte, q(e.__("Delivery Information")), 1)
                ]),
                I("div", Wte, [
                  I("div", jte, [
                    _(p, {
                      modelValue: T.posa_delivery_date,
                      "onUpdate:modelValue": [(A) => T.posa_delivery_date = A, (A) => n.validateDueDate(T)],
                      "model-type": "format",
                      format: "dd-MM-yyyy",
                      "min-date": /* @__PURE__ */ new Date(),
                      "auto-apply": "",
                      dark: i.isDarkTheme
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "min-date", "dark"])
                  ])
                ])
              ])) : ye("", !0)
            ])
          ])
        ], 8, Gee)
      ]),
      _: 1
    }, 8, ["headers", "items", "theme", "expanded", "items-per-page", "header-props", "no-data-text", "search"]),
    _(O, {
      modelValue: r.editNameDialog,
      "onUpdate:modelValue": t[4] || (t[4] = (T) => r.editNameDialog = T),
      "max-width": "400"
    }, {
      default: x(() => [
        _(P, null, {
          default: x(() => [
            _(S, null, {
              default: x(() => [
                ae(q(e.__("Item Name")), 1)
              ]),
              _: 1
            }),
            _(E, null, {
              default: x(() => [
                _(u, {
                  modelValue: r.editedName,
                  "onUpdate:modelValue": t[1] || (t[1] = (T) => r.editedName = T),
                  maxlength: 140
                }, null, 8, ["modelValue"])
              ]),
              _: 1
            }),
            _(D, null, {
              default: x(() => [
                r.editNameTarget && r.editNameTarget.name_overridden ? (ee(), Re(s, {
                  key: 0,
                  variant: "text",
                  onClick: t[2] || (t[2] = (T) => i.resetItemName(r.editNameTarget))
                }, {
                  default: x(() => [
                    ae(q(e.__("Reset")), 1)
                  ]),
                  _: 1
                })) : ye("", !0),
                _(C),
                _(s, {
                  variant: "text",
                  onClick: t[3] || (t[3] = (T) => r.editNameDialog = !1)
                }, {
                  default: x(() => [
                    ae(q(e.__("Cancel")), 1)
                  ]),
                  _: 1
                }),
                _(s, {
                  color: "primary",
                  variant: "text",
                  onClick: i.saveItemName
                }, {
                  default: x(() => [
                    ae(q(e.__("Save")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ], 32);
}
const Yte = /* @__PURE__ */ nn(Uee, [["render", Kte], ["__scopeId", "data-v-a7f78f42"]]);
function Gte() {
  return {
    setSerialNo: (n, a) => {
      console.log(n), n.has_serial_no && (n.serial_no = "", n.serial_no_selected.forEach((r) => {
        n.serial_no += r + `
`;
      }), n.serial_no_selected_count = n.serial_no_selected.length, n.serial_no_selected_count != n.stock_qty && (n.qty = n.serial_no_selected_count, a && a()));
    },
    setBatchQty: (n, a, r = !0, i) => {
      console.log("Setting batch quantity:", n, a);
      const o = i.items.filter(
        (d) => d.item_code == n.item_code && d.posa_row_id != n.posa_row_id
      ), l = {};
      n.batch_no_data.forEach((d) => {
        l[d.batch_no] = {
          ...d,
          used_qty: 0,
          remaining_qty: d.batch_qty
        }, o.forEach((u) => {
          u.batch_no && u.batch_no == d.batch_no && (l[d.batch_no].used_qty += u.qty, l[d.batch_no].remaining_qty -= u.qty, l[d.batch_no].batch_qty -= u.qty);
        });
      });
      const s = Object.values(l).filter((d) => d.remaining_qty > 0).sort((d, u) => d.expiry_date && u.expiry_date ? new Date(d.expiry_date) - new Date(u.expiry_date) : d.expiry_date ? -1 : u.expiry_date ? 1 : d.manufacturing_date && u.manufacturing_date ? new Date(d.manufacturing_date) - new Date(u.manufacturing_date) : d.manufacturing_date ? -1 : u.manufacturing_date ? 1 : u.remaining_qty - d.remaining_qty);
      if (s.length > 0) {
        let d = null;
        if (a && (d = s.find((u) => u.batch_no == a)), d || (d = s[0]), n.batch_no = d.batch_no, n.actual_batch_qty = d.batch_qty, n.batch_no_expiry_date = d.expiry_date, d.batch_price) {
          n.base_batch_price = d.batch_price;
          const u = i.price_list_currency || i.pos_profile.currency;
          i.selected_currency !== u ? n.batch_price = i.flt(
            d.batch_price / i.exchange_rate,
            i.currency_precision
          ) : n.batch_price = d.batch_price, n.base_price_list_rate = n.base_batch_price, n.base_rate = n.base_batch_price, i.selected_currency !== u ? (n.price_list_rate = n.batch_price, n.rate = n.batch_price) : (n.price_list_rate = n.base_batch_price, n.rate = n.base_batch_price), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0, n.amount = i.flt(n.qty * n.rate, i.currency_precision), n.base_amount = i.flt(n.qty * n.base_rate, i.currency_precision), console.log("Updated batch prices:", {
            base_batch_price: n.base_batch_price,
            batch_price: n.batch_price,
            rate: n.rate,
            base_rate: n.base_rate,
            price_list_rate: n.price_list_rate,
            exchange_rate: i.exchange_rate
          });
        } else r && i.update_item_detail && (n.batch_price = null, n.base_batch_price = null, i.update_item_detail(n));
      } else
        n.batch_no = null, n.actual_batch_qty = null, n.batch_no_expiry_date = null, n.batch_price = null, n.base_batch_price = null;
      n.batch_no_data = s, i.forceUpdate && i.forceUpdate();
    }
  };
}
function Qte() {
  return {
    updateDiscountAmount: (a) => {
      const r = flt(a.additional_discount_percentage);
      if (r < -100 || r > 100) {
        a.additional_discount_percentage = 0, a.additional_discount = 0;
        return;
      }
      a.Total && a.Total !== 0 ? a.additional_discount = a.Total * r / 100 : a.additional_discount = 0;
    },
    calcPrices: (a, r, i, o) => {
      if (!i?.target?.id || !a) return;
      const l = i.target.id;
      let s = flt(r, o.currency_precision);
      try {
        l === "rate" && (a._manual_rate_set = !0), s < 0 && (s = 0, o.eventBus.emit("show_message", {
          title: __("Negative values not allowed"),
          color: "error"
        }));
        const d = o.price_list_currency || o.pos_profile.currency, u = o.selected_currency !== d ? o.flt(a.price_list_rate / o.exchange_rate, o.currency_precision) : a.price_list_rate;
        switch (l) {
          case "rate":
            a.base_rate = o.flt(
              s / o.exchange_rate,
              o.currency_precision
            ), a.rate = s, a.discount_amount = o.flt(
              u - a.rate,
              o.currency_precision
            ), a.base_discount_amount = o.flt(
              a.price_list_rate - a.base_rate,
              o.currency_precision
            ), u && (a.discount_percentage = o.flt(
              a.discount_amount / u * 100,
              o.float_precision
            ));
            break;
          case "discount_amount":
            s = Math.min(s, u), a.base_discount_amount = o.flt(
              s / o.exchange_rate,
              o.currency_precision
            ), a.discount_amount = s, a.rate = o.flt(
              u - a.discount_amount,
              o.currency_precision
            ), a.base_rate = o.flt(
              a.price_list_rate - a.base_discount_amount,
              o.currency_precision
            ), u ? a.discount_percentage = o.flt(
              a.discount_amount / u * 100,
              o.float_precision
            ) : a.discount_percentage = 0;
            break;
          case "discount_percentage":
            s = Math.min(s, 100), a.discount_percentage = o.flt(s, o.float_precision), a.discount_amount = o.flt(
              u * a.discount_percentage / 100,
              o.currency_precision
            ), a.base_discount_amount = o.flt(
              a.price_list_rate * a.discount_percentage / 100,
              o.currency_precision
            ), a.rate = o.flt(
              u - a.discount_amount,
              o.currency_precision
            ), a.base_rate = o.flt(
              a.price_list_rate - a.base_discount_amount,
              o.currency_precision
            );
            break;
        }
        a.rate < 0 && (a.rate = 0, a.base_rate = 0, a.discount_amount = u, a.base_discount_amount = a.price_list_rate, a.discount_percentage = 100), o.calc_stock_qty && o.calc_stock_qty(a, a.qty), o.forceUpdate && o.forceUpdate();
      } catch (d) {
        console.error("Error calculating prices:", d), o.eventBus.emit("show_message", {
          title: __("Error calculating prices"),
          color: "error"
        });
      }
    },
    calcItemPrice: (a, r) => {
      if (a._skip_calc) {
        a._skip_calc = !1;
        return;
      }
      if (a.locked_price) {
        a.amount = r.flt(a.qty * a.rate, r.currency_precision);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? a.base_amount = r.flt(
          a.amount / r.exchange_rate,
          r.currency_precision
        ) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
        return;
      }
      if (a.posa_offer_applied) {
        a.amount = r.flt(a.qty * a.rate, r.currency_precision);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? a.base_amount = r.flt(
          a.amount / r.exchange_rate,
          r.currency_precision
        ) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
        return;
      }
      if (a.price_list_rate) {
        a.base_price_list_rate || (a.base_price_list_rate = a.price_list_rate, a.base_rate = a.rate);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? (a.price_list_rate = r.flt(
          a.base_price_list_rate / r.exchange_rate,
          r.currency_precision
        ), a.rate = r.flt(
          a.base_rate / r.exchange_rate,
          r.currency_precision
        )) : (a.price_list_rate = a.base_price_list_rate, a.rate = a.base_rate);
      }
      if (a.discount_percentage) {
        const o = a.price_list_rate, l = r.flt(
          o * a.discount_percentage / 100,
          r.currency_precision
        );
        a.discount_amount = l, a.rate = r.flt(o - l, r.currency_precision);
        const s = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== s ? a.base_discount_amount = r.flt(
          l / r.exchange_rate,
          r.currency_precision
        ) : a.base_discount_amount = a.discount_amount;
      }
      a.amount = r.flt(a.qty * a.rate, r.currency_precision);
      const i = r.price_list_currency || r.pos_profile.currency;
      r.selected_currency !== i ? a.base_amount = r.flt(a.amount / r.exchange_rate, r.currency_precision) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
    }
  };
}
const $A = /* @__PURE__ */ new Map();
function Jte() {
  return { getBundleComponents: async (t) => {
    const n = $A.get(t), a = Date.now();
    if (n && a - n.ts < 6e4)
      return n.data;
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.bundles.get_bundle_components",
        args: { bundles: [t] }
      }), i = r.message && r.message[t] ? r.message[t] : [];
      return $A.set(t, { data: i, ts: a }), i;
    } catch (r) {
      return console.error("Failed to fetch bundle components", r), [];
    }
  } };
}
function Xte() {
  const e = (s, d) => {
    const u = d.items.findIndex((f) => f.posa_row_id == s.posa_row_id);
    u >= 0 && d.items.splice(u, 1), s.is_bundle && (d.packed_items = d.packed_items.filter((f) => f.bundle_id !== s.bundle_id)), d.expanded = d.expanded.filter((f) => f !== s.posa_row_id);
  }, { getBundleComponents: t } = Jte(), n = async (s, d) => {
    const u = await t(s.item_code);
    if (!(!u || !u.length)) {
      s.is_bundle = 1, s.is_bundle_parent = 1, s.is_stock_item = 0, s.warehouse = null, s.stock_qty = 0, s.bundle_id = d.makeid ? d.makeid(10) : Math.random().toString(36).substr(2, 10), d.items = [...d.items];
      for (const f of u) {
        const h = {
          parent_item: s.item_code,
          bundle_id: s.bundle_id,
          item_code: f.item_code,
          item_name: f.item_name || f.item_code,
          qty: (s.qty || 1) * f.qty,
          stock_qty: (s.qty || 1) * f.qty,
          uom: f.uom,
          rate: 0,
          child_qty_per_bundle: f.qty,
          warehouse: d.pos_profile.warehouse,
          is_stock_item: 1,
          has_batch_no: f.is_batch,
          has_serial_no: f.is_serial,
          posa_row_id: d.makeid ? d.makeid(20) : Math.random().toString(36).substr(2, 20),
          posa_offers: JSON.stringify([]),
          posa_offer_applied: 0,
          posa_is_offer: 0
        };
        d.packed_items.push(h), d.update_item_detail && (d.update_item_detail(h, !1), d.calc_stock_qty && d.calc_stock_qty(h, h.qty)), d.fetch_available_qty && d.fetch_available_qty(h);
      }
    }
  }, a = async (s, d) => {
    s.uom || (s.uom = s.stock_uom);
    let u = -1;
    d.new_line || (d.pos_profile.posa_auto_set_batch && s.has_batch_no ? u = d.items.findIndex(
      (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace
    ) : u = d.items.findIndex(
      (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace && (h.batch_no && s.batch_no && h.batch_no === s.batch_no || !h.batch_no && !s.batch_no)
    ));
    let f;
    if (u === -1 || d.new_line) {
      f = r(s, d), s.has_serial_no && s.to_set_serial_no && (f.serial_no_selected = [], f.serial_no_selected.push(s.to_set_serial_no), s.to_set_serial_no = null), s.has_batch_no && s.to_set_batch_no && (f.batch_no = s.to_set_batch_no, s.to_set_batch_no = null, s.batch_no = null, d.setBatchQty && d.setBatchQty(f, f.batch_no, !1)), d.isReturnInvoice && (f.qty = -Math.abs(f.qty || 1)), d.calc_uom && f.uom && await d.calc_uom(f, f.uom);
      try {
        const h = await frappe.call({
          method: "posawesome.posawesome.api.items.get_price_for_uom",
          args: {
            item_code: f.item_code,
            price_list: d.get_price_list ? d.get_price_list() : null,
            uom: f.uom
          }
        });
        if (h.message) {
          const g = parseFloat(h.message), v = d.price_list_currency || d.pos_profile.currency;
          let w = g;
          d.pos_profile.posa_allow_multi_currency && d.selected_currency && d.selected_currency !== v && (w = g * (d.exchange_rate || 1)), Object.assign(f, {
            rate: w,
            price_list_rate: w,
            base_rate: g,
            base_price_list_rate: g,
            _manual_rate_set: !0,
            skip_force_update: !0
          });
        }
      } catch (h) {
        console.warn("UOM price fetch failed", h);
      }
      if (d.new_line || (d.pos_profile.posa_auto_set_batch && s.has_batch_no ? u = d.items.findIndex(
        (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace
      ) : u = d.items.findIndex(
        (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace && (h.batch_no && s.batch_no && h.batch_no === s.batch_no || !h.batch_no && !s.batch_no)
      )), u === -1 || d.new_line) {
        if (d.items.unshift(f), await n(f, d), d.update_item_detail && d.update_item_detail(f, !1), d.fetch_available_qty && d.fetch_available_qty(f), d.isReturnInvoice && d.pos_profile.posa_allow_return_without_invoice && f.has_batch_no && !d.pos_profile.posa_auto_set_batch) {
          const h = Array.isArray(f.batch_no_data) && f.batch_no_data.length > 0 ? f.batch_no_data : null;
          if (h) {
            const g = new frappe.ui.Dialog({
              title: __("Select Batch"),
              fields: [
                {
                  fieldtype: "Select",
                  fieldname: "batch",
                  label: __("Batch"),
                  options: h.map((v) => `${v.batch_no} | ${v.batch_qty}`).join(`
`),
                  reqd: !d.pos_profile.posa_allow_free_batch_return
                }
              ],
              primary_action_label: __("Select"),
              primary_action(v) {
                const w = v.batch ? v.batch.split("|")[0].trim() : null;
                d.setBatchQty(f, w, !1), g.hide();
              }
            });
            g.onhide = () => {
              f.batch_no || d.setBatchQty(f, null, !1);
            }, g.show();
          } else
            d.setBatchQty(f, null, !1);
        }
        (!d.pos_profile.posa_auto_set_batch && f.has_batch_no || f.has_serial_no) && Vt(() => {
          d.expanded = [f.posa_row_id];
        });
      } else {
        const h = d.items[u];
        d.update_items_details && d.update_items_details([h]), f.serial_no_selected && f.serial_no_selected.length && f.serial_no_selected.forEach((g) => {
          h.serial_no_selected.includes(g) || h.serial_no_selected.push(g);
        }), d.isReturnInvoice ? h.qty -= Math.abs(f.qty || 1) : h.qty += f.qty || 1, d.calc_stock_qty && d.calc_stock_qty(h, h.qty), h.has_batch_no && h.batch_no && d.setBatchQty && d.setBatchQty(h, h.batch_no, !1), d.setSerialNo && d.setSerialNo(h), d.calc_uom && h.uom && await d.calc_uom(h, h.uom), d.fetch_available_qty && d.fetch_available_qty(h);
      }
    } else {
      const h = d.items[u];
      if (d.update_items_details && d.update_items_details([h]), s.has_serial_no && s.to_set_serial_no) {
        if (h.serial_no_selected.includes(s.to_set_serial_no)) {
          d.eventBus.emit("show_message", {
            title: __("This Serial Number {0} has already been added!", [s.to_set_serial_no]),
            color: "warning"
          }), s.to_set_serial_no = null;
          return;
        }
        h.serial_no_selected.push(s.to_set_serial_no), s.to_set_serial_no = null;
      }
      d.isReturnInvoice ? h.qty -= Math.abs(s.qty || 1) : h.qty += s.qty || 1, d.calc_stock_qty && d.calc_stock_qty(h, h.qty), h.has_batch_no && h.batch_no && d.setBatchQty && d.setBatchQty(h, h.batch_no, !1), d.setSerialNo && d.setSerialNo(h), d.calc_uom && h.uom && await d.calc_uom(h, h.uom), d.fetch_available_qty && d.fetch_available_qty(h);
    }
    d.forceUpdate && d.forceUpdate(), f && (!d.pos_profile.posa_auto_set_batch && f.has_batch_no || f.has_serial_no) && (d.expanded = [f.posa_row_id]);
  }, r = (s, d) => {
    const u = { ...s };
    u.original_item_name = u.item_name, u.name_overridden = 0, u.warehouse || (u.warehouse = d.pos_profile.warehouse), s.qty || (s.qty = 1), s.posa_is_offer || (s.posa_is_offer = 0), s.posa_is_replace || (s.posa_is_replace = ""), u._manual_rate_set = !1, d.isReturnInvoice && s.qty > 0 && (s.qty = -Math.abs(s.qty)), u.stock_qty = s.qty, u.discount_amount = 0, u.discount_percentage = 0, u.discount_amount_per_item = 0, u.price_list_rate = s.rate;
    const f = d.price_list_currency || d.pos_profile.currency;
    return d.selected_currency !== f ? (u.base_price_list_rate = s.rate / d.exchange_rate, u.base_rate = s.rate / d.exchange_rate, u.base_discount_amount = 0) : (u.base_price_list_rate = s.rate, u.base_rate = s.rate, u.base_discount_amount = 0), u.qty = s.qty, u.uom = s.uom ? s.uom : s.stock_uom, u.item_uoms = s.item_uoms || [], u.item_uoms.length === 0 && u.stock_uom && u.item_uoms.push({ uom: u.stock_uom, conversion_factor: 1 }), u.actual_batch_qty = "", u.batch_no_expiry_date = s.batch_no_expiry_date || null, u.conversion_factor = 1, u.posa_offers = JSON.stringify([]), u.posa_offer_applied = 0, u.posa_is_offer = s.posa_is_offer, u.posa_is_replace = s.posa_is_replace || null, u.is_free_item = 0, u.is_bundle = 0, u.is_bundle_parent = 0, u.bundle_id = null, u.posa_notes = "", u.posa_delivery_date = "", u.posa_row_id = d.makeid ? d.makeid(20) : Math.random().toString(36).substr(2, 20), u.has_serial_no && !u.serial_no_selected && (u.serial_no_selected = [], u.serial_no_selected_count = 0), (!d.pos_profile.posa_auto_set_batch && u.has_batch_no || u.has_serial_no) && d.expanded.push(u.posa_row_id), u;
  }, i = (s) => {
    s.items = [], s.packed_items = [], s.posa_offers = [], s.expanded = [], s.eventBus.emit("set_pos_coupons", []), s.posa_coupons = [], s.invoice_doc = "", s.return_doc = "", s.discount_amount = 0, s.additional_discount = 0, s.additional_discount_percentage = 0, s.delivery_charges_rate = 0, s.selected_delivery_charge = "", s.posting_date = frappe.datetime.nowdate(), s.update_price_list && s.update_price_list(), s.customer = s.pos_profile.customer, s.eventBus.emit("set_customer_readonly", !1), s.invoiceType = s.pos_profile.posa_default_sales_order ? "Order" : "Invoice", s.invoiceTypes = ["Invoice", "Order"];
  };
  function o(s, d) {
    const u = s.find(
      (f) => f.item_code === d.item_code && f.uom === d.uom && f.rate === d.rate
    );
    u ? (u.qty += d.qty || 1, u.amount = u.qty * u.rate) : s.push({ ...d });
  }
  const l = Ni.debounce(o, 50);
  return {
    removeItem: e,
    addItem: a,
    getNewItem: r,
    clearInvoice: i,
    groupAndAddItem: o,
    groupAndAddItemDebounced: l
  };
}
function Zte() {
  return {
    calcUom: async (n, a, r) => {
      let i = n.item_uoms.find((u) => u.uom == a);
      if (!i && r.getItemUOMs) {
        const u = r.getItemUOMs(n.item_code);
        u.length && (n.item_uoms = u, i = u.find((f) => f.uom == a));
      }
      if (!i && n.stock_uom === a && (i = { uom: n.stock_uom, conversion_factor: 1 }, n.item_uoms || (n.item_uoms = []), n.item_uoms.push(i)), !i) {
        r.eventBus.emit("show_message", {
          title: __("UOM not found"),
          color: "error"
        });
        return;
      }
      const o = n.conversion_factor || 1;
      n.conversion_factor = i.conversion_factor;
      const l = n.conversion_factor / o, s = r.get_price_list ? r.get_price_list() : null;
      let d = null;
      if (s && r.getCachedPriceListItems) {
        const f = (r.getCachedPriceListItems(s) || []).find((h) => h.item_code === n.item_code && h.uom === i.uom);
        f && (d = f.price_list_rate || f.rate);
      }
      if (!d && typeof cn == "function" && !cn())
        try {
          const u = await frappe.call({
            method: "posawesome.posawesome.api.items.get_price_for_uom",
            args: {
              item_code: n.item_code,
              price_list: s,
              uom: i.uom
            }
          });
          u.message && (d = parseFloat(u.message));
        } catch (u) {
          console.error("Failed to fetch UOM price", u);
        }
      if (d) {
        n._manual_rate_set = !0, n.base_price_list_rate = d, n.posa_offer_applied || (n.base_rate = d);
        const u = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== u ? (n.price_list_rate = r.flt(
          n.base_price_list_rate * r.exchange_rate,
          r.currency_precision
        ), n.rate = r.flt(n.base_rate * r.exchange_rate, r.currency_precision)) : (n.price_list_rate = n.base_price_list_rate, n.rate = n.base_rate), r.calc_stock_qty && r.calc_stock_qty(n, n.qty), r.forceUpdate && r.forceUpdate();
        return;
      }
      if (n._manual_rate_set = !1, n.posa_offer_applied || (n.discount_amount = 0, n.discount_percentage = 0), !n.original_base_rate && !n.posa_offer_applied && (n.original_base_rate = n.base_rate / o, n.original_base_price_list_rate = n.base_price_list_rate / o), n.posa_offer_applied) {
        const u = r.posOffers && Array.isArray(r.posOffers) ? r.posOffers.find((f) => {
          if (!f || !f.items) return !1;
          const h = typeof f.items == "string" ? JSON.parse(f.items) : f.items;
          return Array.isArray(h) && h.includes(n.posa_row_id);
        }) : null;
        if (u && u.discount_type === "Rate") {
          const f = r.flt(u.rate * n.conversion_factor);
          n.base_rate = f, n.base_price_list_rate = f;
          const h = r.price_list_currency || r.pos_profile.currency;
          r.selected_currency !== h ? (n.rate = r.flt(f / r.exchange_rate, r.currency_precision), n.price_list_rate = n.rate) : (n.rate = f, n.price_list_rate = f);
        } else if (u && u.discount_type === "Discount Percentage") {
          let f;
          n.original_base_price_list_rate ? f = r.flt(
            n.original_base_price_list_rate * n.conversion_factor,
            r.currency_precision
          ) : f = r.flt(
            n.base_price_list_rate * l,
            r.currency_precision
          ), n.base_price_list_rate = f;
          const h = r.flt(
            f * u.discount_percentage / 100,
            r.currency_precision
          );
          n.base_discount_amount = h, n.base_rate = r.flt(f - h, r.currency_precision);
          const g = r.price_list_currency || r.pos_profile.currency;
          r.selected_currency !== g ? (n.price_list_rate = r.flt(
            f / r.exchange_rate,
            r.currency_precision
          ), n.discount_amount = r.flt(
            h / r.exchange_rate,
            r.currency_precision
          ), n.rate = r.flt(n.base_rate / r.exchange_rate, r.currency_precision)) : (n.price_list_rate = f, n.discount_amount = h, n.rate = n.base_rate);
        }
      } else {
        n.batch_price ? (n.base_rate = n.batch_price * n.conversion_factor, n.base_price_list_rate = n.base_rate) : n.original_base_rate && (n.base_rate = n.original_base_rate * n.conversion_factor, n.base_price_list_rate = n.original_base_price_list_rate * n.conversion_factor);
        const u = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== u ? (n.rate = r.flt(n.base_rate / r.exchange_rate, r.currency_precision), n.price_list_rate = r.flt(
          n.base_price_list_rate / r.exchange_rate,
          r.currency_precision
        )) : (n.rate = n.base_rate, n.price_list_rate = n.base_price_list_rate);
      }
      r.calc_stock_qty && r.calc_stock_qty(n, n.qty), r.forceUpdate && r.forceUpdate();
    },
    calcStockQty: (n, a) => {
      n.stock_qty = n.conversion_factor * a;
    }
  };
}
const { setSerialNo: ene, setBatchQty: tne } = Gte(), { updateDiscountAmount: nne, calcPrices: ane, calcItemPrice: rne } = Qte(), { removeItem: ine, addItem: one, getNewItem: sne, clearInvoice: lne } = Xte(), { calcUom: cne, calcStockQty: ky } = Zte(), une = {
  remove_item(e) {
    return ine(e, this);
  },
  async add_item(e) {
    if (!this.customer)
      return this.eventBus.emit("show_message", {
        title: __("Please select a customer before adding items"),
        color: "error"
      }), !1;
    if (this.pos_profile.posa_enable_restaurant_mode) {
      if (!(this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT") && !this.selected_order_type)
        return this.eventBus.emit("show_message", {
          title: __("Please select an Order Type before adding items"),
          color: "error"
        }), !1;
      if (this.selected_order_type && this.selected_order_type.requires_table && !this.selected_table)
        return this.eventBus.emit("show_message", {
          title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
          color: "error"
        }), !1;
    }
    const t = await one(e, this), n = this.items.find(
      (a) => a.item_code === e.item_code && a.uom === (e.uom || a.uom) && (!a.batch_no || a.batch_no === e.batch_no)
    );
    return n && this.fetch_available_qty && this.fetch_available_qty(n), t;
  },
  // Create a new item object with default and calculated fields
  get_new_item(e) {
    return sne(e, this);
  },
  // Reset all invoice fields to default/empty values
  clear_invoice() {
    const e = lne(this);
    return this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && (this.clear_restaurant_selection(), this.invoiceType = "Order", this.invoiceTypes = ["Order"]), e;
  },
  // Fetch customer balance from backend or cache
  async fetch_customer_balance() {
    try {
      if (!this.customer) {
        this.customer_balance = 0;
        return;
      }
      if (cn()) {
        const n = EA(this.customer);
        if (n !== null) {
          this.customer_balance = n;
          return;
        } else {
          this.customer_balance = 0, this.eventBus.emit("show_message", {
            title: __("Customer balance unavailable offline"),
            text: __("Balance will be updated when connection is restored"),
            color: "warning"
          });
          return;
        }
      }
      const t = (await frappe.call({
        method: "posawesome.posawesome.api.customer.get_customer_balance",
        args: { customer: this.customer }
      }))?.message?.balance || 0;
      this.customer_balance = t, kQ(this.customer, t);
    } catch (e) {
      console.error("Error fetching balance:", e);
      const t = EA(this.customer);
      t !== null ? (this.customer_balance = t, this.eventBus.emit("show_message", {
        title: __("Using cached customer balance"),
        text: __("Could not fetch latest balance from server"),
        color: "warning"
      })) : (this.eventBus.emit("show_message", {
        title: __("Error fetching customer balance"),
        color: "error"
      }), this.customer_balance = 0);
    }
  },
  // Cancel the current invoice, optionally delete from backend
  async cancel_invoice() {
    const e = this.get_invoice_doc();
    this.pos_profile && this.pos_profile.posa_enable_restaurant_mode ? (this.invoiceType = "Order", this.invoiceTypes = ["Order"]) : (this.invoiceType = this.pos_profile.posa_default_sales_order ? "Order" : "Invoice", this.invoiceTypes = ["Invoice", "Order"]), this.posting_date = frappe.datetime.nowdate();
    var t = this;
    e.name && this.pos_profile.posa_allow_delete && await frappe.call({
      method: "posawesome.posawesome.api.invoices.delete_invoice",
      args: { invoice: e.name },
      async: !0,
      callback: function(n) {
        n.message && t.eventBus.emit("show_message", {
          text: n.message,
          color: "warning"
        });
      }
    }), this.clear_invoice(), this.cancel_dialog = !1;
  },
  // Load an invoice (or return invoice) from data, set all fields accordingly
  async load_invoice(e = {}) {
    console.log("load_invoice called with data:", {
      is_return: e.is_return,
      return_against: e.return_against,
      customer: e.customer,
      items_count: e.items ? e.items.length : 0
    }), this.clear_invoice(), e.is_return && (console.log("Processing return invoice"), e.return_against ? (console.log("Return has reference to invoice:", e.return_against), this.eventBus.emit("set_customer_readonly", !0)) : (console.log("Return without invoice reference, customer can be selected"), this.eventBus.emit("set_customer_readonly", !1)), this.invoiceType = "Return", this.invoiceTypes = ["Return"]), this.invoice_doc = e, this.items = e.items || [], this.packed_items = e.packed_items || [], console.log("Items set:", this.items.length, "items"), e.is_return && e.return_against && (this.items.forEach((t) => {
      t.locked_price = !0;
    }), this.packed_items.forEach((t) => {
      t.locked_price = !0;
    })), this.items.length > 0 ? (this.update_items_details(this.items), this.posa_offers = e.posa_offers || [], this.items.forEach((t) => {
      t.posa_row_id || (t.posa_row_id = this.makeid(20)), t.batch_no && this.set_batch_qty(t, t.batch_no), t.original_item_name || (t.original_item_name = t.item_name);
    })) : console.log("Warning: No items in return invoice"), this.packed_items.length > 0 && (this.update_items_details(this.packed_items), this.packed_items.forEach((t) => {
      t.posa_row_id || (t.posa_row_id = this.makeid(20));
    })), this.customer = e.customer, this.posting_date = this.formatDateForBackend(e.posting_date || frappe.datetime.nowdate()), this.discount_amount = e.discount_amount, this.additional_discount_percentage = e.additional_discount_percentage, this.additional_discount = e.discount_amount, this.items.length > 0 && this.items.forEach((t) => {
      t.serial_no && (t.serial_no_selected = [], t.serial_no.split(`
`).forEach((a) => {
        a.length && t.serial_no_selected.push(a);
      }), t.serial_no_selected_count = t.serial_no_selected.length);
    }), e.is_return ? this.return_doc = e : this.eventBus.emit("set_pos_coupons", e.posa_coupons), console.log("load_invoice completed, invoice state:", {
      invoiceType: this.invoiceType,
      is_return: this.invoice_doc.is_return,
      items: this.items.length,
      customer: this.customer
    });
  },
  // Save and clear the current invoice (draft logic)
  save_and_clear_invoice() {
    let e = null;
    const t = this.get_invoice_doc();
    if (console.log("=== SAVE_AND_CLEAR_INVOICE DEBUG ==="), console.log("doc from get_invoice_doc:", {
      name: t.name,
      doctype: t.doctype,
      docstatus: t.docstatus
    }), console.log("this.invoice_doc:", {
      name: this.invoice_doc?.name,
      doctype: this.invoice_doc?.doctype,
      docstatus: this.invoice_doc?.docstatus
    }), console.log("Restaurant mode:", this.pos_profile.posa_enable_restaurant_mode), console.log("=== END SAVE_AND_CLEAR_INVOICE DEBUG ==="), this.pos_profile.posa_enable_restaurant_mode) {
      const n = t.name && t.name.startsWith("ACC-SINV-");
      if (console.log("Is Sales Invoice by name:", n), t.doctype === "Sales Invoice" || n)
        console.log("Processing Sales Invoice for payment, skipping restaurant order validation");
      else {
        if (!(this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT") && !this.selected_order_type)
          return this.eventBus.emit("show_message", {
            title: __("Please select an Order Type"),
            color: "error"
          }), !1;
        if (this.selected_order_type && this.selected_order_type.requires_table && !this.selected_table)
          return this.eventBus.emit("show_message", {
            title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
            color: "error"
          }), !1;
        if (this.invoiceType = "Order", t.name && this.invoice_doc && this.invoice_doc.doctype === "Sales Invoice" && t.name.startsWith("SAL-ORD-"))
          return console.error("CRITICAL ERROR: Attempting to update Sales Order but invoice_doc references Sales Invoice"), console.log("invoice_doc doctype:", this.invoice_doc.doctype), console.log("doc name:", t.name), this.eventBus.emit("show_message", {
            title: __("Order state error: Please reload the order from the orders list and try again."),
            color: "error"
          }), !1;
      }
    }
    if (t.name) {
      const n = t.name.startsWith("ACC-SINV-"), a = t.name.startsWith("SAL-ORD-");
      console.log("Document type analysis:", {
        name: t.name,
        doctype: t.doctype,
        isSalesInvoiceByName: n,
        isSalesOrderByName: a
      }), t.doctype === "Sales Invoice" || n ? (console.log("Processing Sales Invoice for payment:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus
      }), e = this.update_invoice(t)) : t.docstatus === 1 && this.pos_profile.posa_enable_restaurant_mode && (t.doctype === "Sales Order" || a) ? (console.log("Attempting to update submitted Sales Order with doc:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus,
        items_count: t.items?.length || 0
      }), e = this.update_submitted_order(t)) : (console.log("Using regular update for doc:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus
      }), e = this.update_invoice(t));
    } else
      t.items.length ? this.pos_profile.posa_enable_restaurant_mode ? e = this.create_restaurant_order(t) : e = this.update_invoice(t) : this.eventBus.emit("show_message", {
        title: __("Nothing to save"),
        color: "error"
      });
    if (!e)
      this.eventBus.emit("show_message", {
        title: __("Error saving the current order"),
        color: "error"
      });
    else
      return this.clear_invoice(), e;
  },
  // Start a new order (or return order) with provided data
  async new_order(e = {}) {
    let t = null;
    if (this.eventBus.emit("set_customer_readonly", !1), this.expanded = [], this.posa_offers = [], this.eventBus.emit("set_pos_coupons", []), this.posa_coupons = [], this.return_doc = "", !e.name && !e.is_return)
      this.items = [], this.customer = this.pos_profile.customer, this.invoice_doc = "", this.discount_amount = 0, this.additional_discount_percentage = 0, this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice", "Order"], this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && this.clear_restaurant_selection();
    else {
      if (e.is_return && (e.return_against ? this.eventBus.emit("set_customer_readonly", !0) : this.eventBus.emit("set_customer_readonly", !1), this.invoiceType = "Return", this.invoiceTypes = ["Return"]), this.invoice_doc = e, this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && (console.log("Loading document for editing - validating consistency"), console.log("Document info:", {
        name: e.name,
        doctype: e.doctype,
        docstatus: e.docstatus
      }), e.name && e.name.startsWith("SAL-ORD-") && e.doctype !== "Sales Order")) {
        console.error("CRITICAL ERROR: Document name suggests Sales Order but doctype is:", e.doctype), this.eventBus.emit("show_message", {
          title: __("Document type mismatch. Please reload from orders list."),
          color: "error"
        });
        return;
      }
      if (this.items = e.items, this.update_items_details(this.items), this.posa_offers = e.posa_offers || [], this.pos_profile && this.pos_profile.posa_enable_restaurant_mode) {
        if (e.doctype === "Sales Order" && (this.invoiceType = "Order", this.invoiceTypes = ["Order"], console.log("Loading Sales Order for editing in restaurant mode:", e.name)), e.restaurant_order_type) {
          const n = this.restaurant_order_types.find((a) => a.name === e.restaurant_order_type);
          n && (this.selected_order_type = n);
        }
        if (e.table_number) {
          const n = this.available_tables.find((a) => a.table_number === e.table_number);
          n && (this.selected_table = n);
        }
      }
      this.items.forEach((n) => {
        n.posa_row_id || (n.posa_row_id = this.makeid(20)), n.batch_no && this.set_batch_qty(n, n.batch_no);
      }), this.customer = e.customer, this.posting_date = this.formatDateForBackend(e.posting_date || frappe.datetime.nowdate()), this.discount_amount = e.discount_amount, this.additional_discount_percentage = e.additional_discount_percentage, this.items.forEach((n) => {
        n.serial_no && (n.serial_no_selected = [], n.serial_no.split(`
`).forEach((r) => {
          r.length && n.serial_no_selected.push(r);
        }), n.serial_no_selected_count = n.serial_no_selected.length);
      });
    }
    return t;
  },
  // Build the invoice document object for backend submission
  get_invoice_doc() {
    let e = {};
    this.invoice_doc.name && (e = { ...this.invoice_doc }, console.log("=== DEBUG: get_invoice_doc - starting with existing doc ==="), console.log("Original this.invoice_doc:", {
      name: this.invoice_doc.name,
      doctype: this.invoice_doc.doctype,
      docstatus: this.invoice_doc.docstatus
    })), this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order ? e.doctype = "Sales Order" : this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? e.doctype = "POS Invoice" : e.doctype = "Sales Invoice", this.pos_profile.posa_enable_restaurant_mode && (!e.name || e.name && e.name.startsWith("SAL-ORD-") ? (e.doctype = "Sales Order", console.log("=== DEBUG: get_invoice_doc - forced doctype to Sales Order in restaurant mode ===")) : e.name && e.name.startsWith("ACC-SINV-") && (e.doctype = "Sales Invoice", console.log("=== DEBUG: get_invoice_doc - keeping Sales Invoice doctype for converted order ==="))), console.log("=== DEBUG: get_invoice_doc - final doc info ==="), console.log("Final doc:", {
      name: e.name,
      doctype: e.doctype,
      docstatus: e.docstatus,
      invoiceType: this.invoiceType,
      restaurant_mode: this.pos_profile.posa_enable_restaurant_mode
    }), e.is_pos = 1, e.ignore_pricing_rule = 1, e.company = e.company || this.pos_profile.company, e.pos_profile = e.pos_profile || this.pos_profile.name, e.posa_show_custom_name_marker_on_print = this.pos_profile.posa_show_custom_name_marker_on_print, e.currency = this.selected_currency || this.pos_profile.currency, e.conversion_rate = this.invoice_doc && this.invoice_doc.conversion_rate || this.conversion_rate || 1, e.price_list_currency = this.price_list_currency || e.currency, e.plc_conversion_rate = this.invoice_doc && this.invoice_doc.plc_conversion_rate || (e.price_list_currency === e.currency ? 1 : this.exchange_rate), e.campaign = e.campaign || this.pos_profile.campaign, e.selling_price_list = this.pos_profile.selling_price_list, e.naming_series = e.naming_series || this.pos_profile.naming_series, e.customer = this.customer;
    const t = this.isReturnInvoice;
    e.is_return = t ? 1 : 0;
    const n = this.get_invoice_items();
    e.items = n, e.packed_items = (this.packed_items || []).map((s) => ({
      parent_item: s.parent_item,
      item_code: s.item_code,
      item_name: s.item_name,
      qty: flt(s.qty),
      uom: s.uom,
      warehouse: s.warehouse,
      batch_no: s.batch_no,
      serial_no: s.serial_no,
      rate: flt(s.rate)
    }));
    let a = this.Total;
    t && a > 0 && (a = -Math.abs(a)), e.total = a, e.net_total = a, e.base_total = a * (this.exchange_rate || 1), e.base_net_total = a * (this.exchange_rate || 1);
    let r = flt(this.additional_discount);
    t && r > 0 && (r = -Math.abs(r)), e.discount_amount = r, e.base_discount_amount = r * (this.exchange_rate || 1);
    let i = flt(this.additional_discount_percentage);
    t && i > 0 && (i = -Math.abs(i)), e.additional_discount_percentage = i;
    let o = this.subtotal;
    if (e.taxes = [], this.invoice_doc && this.invoice_doc.taxes) {
      let s = 0;
      this.invoice_doc.taxes.forEach((d) => {
        d.tax_amount && (o += flt(d.tax_amount), s += flt(d.tax_amount)), e.taxes.push({
          account_head: d.account_head,
          charge_type: d.charge_type || "On Net Total",
          description: d.description,
          rate: d.rate,
          included_in_print_rate: d.included_in_print_rate || 0,
          tax_amount: d.tax_amount,
          total: d.total,
          base_tax_amount: d.tax_amount * (this.exchange_rate || 1),
          base_total: d.total * (this.exchange_rate || 1)
        });
      }), e.total_taxes_and_charges = s;
    } else if (cn()) {
      const s = Y9(this.pos_profile.taxes_and_charges);
      if (s && Array.isArray(s.taxes)) {
        const d = tQ();
        let u = o, f = 0;
        s.taxes.forEach((h) => {
          let g = 0;
          h.charge_type === "Actual" ? g = flt(h.tax_amount || 0) : d ? g = flt(e.total * flt(h.rate) / 100) : g = flt(e.net_total * flt(h.rate) / 100), d || (u += g), f += g, e.taxes.push({
            account_head: h.account_head,
            charge_type: h.charge_type || "On Net Total",
            description: h.description,
            rate: h.rate,
            included_in_print_rate: h.charge_type === "Actual" ? 0 : d ? 1 : 0,
            tax_amount: g,
            total: u,
            base_tax_amount: g * (this.exchange_rate || 1),
            base_total: u * (this.exchange_rate || 1)
          });
        }), d ? (e.net_total = e.total - f, e.base_net_total = e.net_total * (this.exchange_rate || 1), o = e.total) : o = u, e.total_taxes_and_charges = f;
      }
    }
    t && o > 0 && (o = -Math.abs(o)), e.grand_total = o, e.base_grand_total = o * (this.exchange_rate || 1), this.pos_profile.disable_rounded_total ? (e.rounded_total = flt(o, this.currency_precision), e.base_rounded_total = flt(e.base_grand_total, this.currency_precision)) : (e.rounded_total = this.roundAmount(o), e.base_rounded_total = this.roundAmount(e.base_grand_total)), e.posa_pos_opening_shift = this.pos_opening_shift.name, e.payments = this.get_payments(), t && (this.invoice_doc.return_against && (e.return_against = this.invoice_doc.return_against), e.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, e.grand_total > 0 && (e.grand_total = -Math.abs(e.grand_total)), e.base_grand_total > 0 && (e.base_grand_total = -Math.abs(e.base_grand_total)), e.rounded_total > 0 && (e.rounded_total = -Math.abs(e.rounded_total)), e.base_rounded_total > 0 && (e.base_rounded_total = -Math.abs(e.base_rounded_total)), e.total > 0 && (e.total = -Math.abs(e.total)), e.base_total > 0 && (e.base_total = -Math.abs(e.base_total)), e.net_total > 0 && (e.net_total = -Math.abs(e.net_total)), e.base_net_total > 0 && (e.base_net_total = -Math.abs(e.base_net_total)), e.payments && e.payments.length && e.payments.forEach((s) => {
      s.amount > 0 && (s.amount = -Math.abs(s.amount)), s.base_amount > 0 && (s.base_amount = -Math.abs(s.base_amount));
    })), e.posa_offers = this.posa_offers, e.posa_coupons = this.posa_coupons, e.posa_delivery_charges = this.selected_delivery_charge?.name || null, e.posa_delivery_charges_rate = this.delivery_charges_rate || 0, e.posting_date = this.formatDateForBackend(this.posting_date_display), e.ignore_pricing_rule = 1, e.price_list_currency = this.price_list_currency || e.currency, e.plc_conversion_rate = this.exchange_rate || e.conversion_rate, e.ignore_default_fields = 1, e.posa_is_offer_applied = this.posa_offers.length > 0 ? 1 : 0;
    const l = this.price_list_currency || this.pos_profile.currency;
    if (this.selected_currency !== l) {
      const s = t ? -1 : 1;
      e.base_total = a / this.exchange_rate * s, e.base_net_total = a / this.exchange_rate * s, e.base_discount_amount = r / this.exchange_rate * s, e.base_grand_total = o / this.exchange_rate * s, e.base_rounded_total = o / this.exchange_rate * s;
    } else {
      const s = t ? -1 : 1;
      e.base_total = a * s, e.base_net_total = a * s, e.base_discount_amount = r * s, e.base_grand_total = o * s, e.base_rounded_total = o * s;
    }
    return e.payments && e.payments.length && e.payments.forEach((s) => {
      this.selected_currency !== l ? s.base_amount = s.amount / this.exchange_rate : s.base_amount = s.amount, t && (s.amount = -Math.abs(s.amount), s.base_amount = -Math.abs(s.base_amount));
    }), this.pos_profile.posa_enable_restaurant_mode && (this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number), this.selected_order_type && this.selected_order_type.default_preparation_time && (e.expected_preparation_time = this.selected_order_type.default_preparation_time)), e;
  },
  // Get invoice doc from order doc (for sales order to invoice conversion)
  async get_invoice_from_order_doc() {
    let e = {};
    this.invoice_doc.doctype == "Sales Order" ? await frappe.call({
      method: "posawesome.posawesome.api.invoices.create_sales_invoice_from_order",
      args: {
        sales_order: this.invoice_doc.name
      },
      // async: false,
      callback: function(i) {
        i.message && (e = i.message);
      }
    }) : e = this.invoice_doc;
    const t = [], n = this.get_invoice_items();
    e.items.forEach((i) => {
      const o = n.find(
        (l) => l.item_code === i.item_code
      );
      o && (i.item_code = o.item_code, i.posa_row_id = o.posa_row_id, i.posa_offers = o.posa_offers, i.posa_offer_applied = o.posa_offer_applied, i.posa_is_offer = o.posa_is_offer, i.posa_is_replace = o.posa_is_replace, i.is_free_item = o.is_free_item, i.qty = flt(o.qty), i.rate = flt(o.rate), i.uom = o.uom, i.amount = flt(o.qty) * flt(o.rate), i.conversion_factor = o.conversion_factor, i.serial_no = o.serial_no, i.discount_percentage = flt(o.discount_percentage), i.discount_amount = flt(o.discount_amount), i.batch_no = o.batch_no, i.posa_notes = o.posa_notes, i.posa_delivery_date = this.formatDateForDisplay(o.posa_delivery_date), i.price_list_rate = o.price_list_rate, t.push(i));
    }), e.items = t;
    const a = [...e.items], r = new Set(a.map((i) => i.item_code));
    return n.forEach((i) => {
      r.has(i.item_code) || a.push(i);
    }), e.items = a, e.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, e.is_pos = 1, e.payments = this.get_payments(), e;
  },
  // Prepare items array for invoice doc
  get_invoice_items() {
    const e = [], t = this.isReturnInvoice, n = this.pos_profile.create_pos_invoice_instead_of_sales_invoice;
    return this.items.forEach((a) => {
      const r = {
        item_code: a.item_code,
        // Retain the item name for offline invoices
        // Fallback to item_code if item_name is not available
        item_name: a.item_name || a.item_code,
        name_overridden: a.name_overridden ? 1 : 0,
        posa_row_id: a.posa_row_id,
        posa_offers: a.posa_offers,
        posa_offer_applied: a.posa_offer_applied,
        posa_is_offer: a.posa_is_offer,
        posa_is_replace: a.posa_is_replace,
        is_free_item: a.is_free_item,
        qty: flt(a.qty),
        uom: a.uom,
        conversion_factor: a.conversion_factor,
        serial_no: a.serial_no,
        // Link to original invoice item when doing returns
        // Needed for backend validation that the item exists in
        // the referenced Sales or POS Invoice
        ...a.sales_invoice_item && { sales_invoice_item: a.sales_invoice_item },
        ...a.pos_invoice_item && { pos_invoice_item: a.pos_invoice_item },
        discount_percentage: flt(a.discount_percentage),
        batch_no: a.batch_no,
        posa_notes: a.posa_notes,
        posa_delivery_date: this.formatDateForBackend(a.posa_delivery_date)
      };
      if (t) {
        const o = n ? "pos_invoice_item" : "sales_invoice_item";
        !r[o] && a.name && (r[o] = a.name);
      }
      const i = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== i ? (r.rate = flt(a.rate), r.base_rate = a.base_rate || flt(a.rate / this.exchange_rate), r.price_list_rate = flt(a.price_list_rate), r.base_price_list_rate = a.base_price_list_rate || flt(a.price_list_rate / this.exchange_rate), r.amount = flt(a.qty) * r.rate, r.base_amount = r.amount / this.exchange_rate, r.discount_amount = flt(a.discount_amount), r.base_discount_amount = a.base_discount_amount || flt(a.discount_amount / this.exchange_rate)) : (r.rate = flt(a.rate), r.base_rate = a.base_rate || flt(a.rate), r.price_list_rate = flt(a.price_list_rate), r.base_price_list_rate = a.base_price_list_rate || flt(a.price_list_rate), r.amount = flt(a.qty) * r.rate, r.base_amount = r.amount, r.discount_amount = flt(a.discount_amount), r.base_discount_amount = a.base_discount_amount || flt(a.discount_amount)), t && (r.qty = -Math.abs(r.qty), r.amount = -Math.abs(r.amount), r.base_amount = -Math.abs(r.base_amount), r.discount_amount = -Math.abs(r.discount_amount), r.base_discount_amount = -Math.abs(r.base_discount_amount)), e.push(r);
    }), e;
  },
  // Prepare items array for order doc
  get_order_items() {
    const e = [];
    return this.items.forEach((t) => {
      const n = {
        item_code: t.item_code,
        // Retain item name to show on offline order documents
        // Use item_code if item_name is missing
        item_name: t.item_name || t.item_code,
        name_overridden: t.name_overridden ? 1 : 0,
        posa_row_id: t.posa_row_id,
        posa_offers: t.posa_offers,
        posa_offer_applied: t.posa_offer_applied,
        posa_is_offer: t.posa_is_offer,
        posa_is_replace: t.posa_is_replace,
        is_free_item: t.is_free_item,
        qty: flt(t.qty),
        rate: flt(t.rate),
        uom: t.uom,
        amount: flt(t.qty) * flt(t.rate),
        conversion_factor: t.conversion_factor,
        serial_no: t.serial_no,
        discount_percentage: flt(t.discount_percentage),
        discount_amount: flt(t.discount_amount),
        batch_no: t.batch_no,
        posa_notes: t.posa_notes,
        posa_delivery_date: t.posa_delivery_date,
        price_list_rate: t.price_list_rate
      };
      e.push(n);
    }), e;
  },
  // Prepare payments array for invoice doc
  get_payments() {
    const e = [];
    let n = this.subtotal;
    return this.pos_profile.payments.forEach((a, r) => {
      const i = r === 0 ? n : a.amount || 0, o = this.isReturnInvoice ? -Math.abs(i) : i, l = this.price_list_currency || this.pos_profile.currency, s = this.selected_currency !== l ? this.flt(o / (this.exchange_rate || 1), this.currency_precision) : o;
      e.push({
        amount: o,
        // Keep in selected currency (e.g. USD)
        base_amount: s,
        // Convert to base currency (e.g. PKR)
        mode_of_payment: a.mode_of_payment,
        default: a.default,
        account: a.account || "",
        type: a.type || "Cash",
        currency: this.selected_currency || this.pos_profile.currency,
        conversion_rate: this.conversion_rate || 1
      }), n -= i;
    }), console.log("Generated payments:", {
      currency: this.selected_currency,
      exchange_rate: this.exchange_rate,
      payments: e.map((a) => ({
        mode: a.mode_of_payment,
        amount: a.amount,
        base_amount: a.base_amount
      }))
    }), e;
  },
  // Convert amount to selected currency
  convert_amount(e) {
    const t = this.price_list_currency || this.pos_profile.currency;
    return this.selected_currency === t ? e : this.flt(e * this.exchange_rate, this.currency_precision);
  },
  // Update invoice in backend
  update_invoice(e) {
    var t = this;
    return cn() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: e.doctype === "Sales Order" && this.pos_profile.posa_create_only_sales_order ? "posawesome.posawesome.api.sales_orders.update_sales_order" : "posawesome.posawesome.api.invoices.update_invoice",
      args: {
        data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message && (t.invoice_doc = n.message, n.message.exchange_rate_date)) {
          t.exchange_rate_date = n.message.exchange_rate_date;
          const a = t.formatDateForBackend(t.posting_date_display);
          a !== t.exchange_rate_date && t.eventBus.emit("show_message", {
            title: __(
              "Exchange rate date " + t.exchange_rate_date + " differs from posting date " + a
            ),
            color: "warning"
          });
        }
      }
    }), this.invoice_doc);
  },
  // Update invoice from order in backend
  update_invoice_from_order(e) {
    var t = this;
    return cn() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: "posawesome.posawesome.api.invoices.update_invoice_from_order",
      args: {
        data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message && (t.invoice_doc = n.message, n.message.exchange_rate_date)) {
          t.exchange_rate_date = n.message.exchange_rate_date;
          const a = t.formatDateForBackend(t.posting_date_display);
          a !== t.exchange_rate_date && t.eventBus.emit("show_message", {
            title: __(
              "Exchange rate date " + t.exchange_rate_date + " differs from posting date " + a
            ),
            color: "warning"
          });
        }
      }
    }), this.invoice_doc);
  },
  // Update submitted restaurant order with new items
  async update_submitted_order(e) {
    var t = this;
    if (cn())
      return t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc;
    try {
      if (console.log("=== DEBUG: update_submitted_order called ==="), console.log("doc parameter:", JSON.stringify({
        name: e.name,
        doctype: e.doctype,
        docstatus: e.docstatus,
        items_count: e.items?.length || 0,
        is_return: e.is_return
      }, null, 2)), console.log("this.invoice_doc:", JSON.stringify({
        name: this.invoice_doc?.name,
        doctype: this.invoice_doc?.doctype,
        docstatus: this.invoice_doc?.docstatus
      }, null, 2)), console.log("this.invoiceType:", this.invoiceType), console.log("this.invoiceTypes:", this.invoiceTypes), console.log("Updating order with doc:", {
        name: e.name,
        doctype: e.doctype,
        items_count: e.items?.length || 0
      }), e.doctype !== "Sales Order")
        return console.error("Expected Sales Order but got:", e.doctype), t.eventBus.emit("show_message", {
          title: __("Invalid document type for order update. Expected Sales Order, got {0}", [e.doctype]),
          color: "error"
        }), !1;
      if (!e.name || !e.name.startsWith("SAL-ORD-"))
        return console.error("Invalid Sales Order name format:", e.name), t.eventBus.emit("show_message", {
          title: __("Invalid Sales Order name format: {0}", [e.name || "undefined"]),
          color: "error"
        }), !1;
      const n = await frappe.call({
        method: "posawesome.posawesome.api.restaurant_orders.update_submitted_order_items",
        args: {
          order_name: e.name,
          items_data: e.items
        }
      });
      return n.message && (t.invoice_doc = n.message, t.invoice_doc.doctype = "Sales Order", console.log("Order updated successfully:", t.invoice_doc.name), t.eventBus.emit("show_message", {
        title: __("Order {0} updated successfully", [n.message.name]),
        color: "success"
      })), t.invoice_doc;
    } catch (n) {
      return console.error("Error updating submitted order:", n), n.message && n.message.includes("not found") ? t.eventBus.emit("show_message", {
        title: __("Sales Order {0} not found. It may have been deleted or converted to an invoice.", [e.name]),
        color: "error"
      }) : n.message && n.message.includes("Sales Invoice") ? t.eventBus.emit("show_message", {
        title: __("Error: Attempting to update a Sales Invoice as Sales Order. Order {0} may have been converted.", [e.name]),
        color: "error"
      }) : t.eventBus.emit("show_message", {
        title: __("Error updating order: {0}", [n.message || "Unknown error"]),
        color: "error"
      }), !1;
    }
  },
  // Create restaurant order
  create_restaurant_order(e) {
    var t = this;
    return cn() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: "posawesome.posawesome.api.restaurant_orders.create_restaurant_order",
      args: {
        order_data: e
      },
      async: !1,
      callback: async function(n) {
        if (n.message) {
          let a, r = null, i = !1;
          if (n.message.sales_order ? (a = n.message.sales_order, r = n.message.kot_data, i = n.message.auto_print_kot) : a = n.message, t.invoice_doc = a, t.eventBus.emit("show_message", {
            title: __("Restaurant order {0} created successfully", [a.name]),
            color: "success"
          }), t.pos_profile.posa_enable_restaurant_mode)
            try {
              await t.fetch_available_tables();
            } catch (o) {
              console.error("Failed to refresh available tables:", o);
            }
          if (r && i)
            try {
              const { printKot: o } = await import("./kot_print-MHdNXsuH.js");
              await o(r);
            } catch (o) {
              console.error("Error auto-printing KOT:", o);
            }
          else if (r && await new Promise((l) => {
            frappe.confirm(
              __("Order created successfully. Print KOT for kitchen?"),
              () => l(!0),
              () => l(!1)
            );
          }))
            try {
              const { printKot: l } = await import("./kot_print-MHdNXsuH.js");
              await l(r);
            } catch (l) {
              console.error("Error printing KOT:", l), t.eventBus.emit("show_message", {
                title: __("Error printing KOT"),
                color: "error"
              });
            }
        } else
          t.eventBus.emit("show_message", {
            title: __("Error creating restaurant order"),
            color: "error"
          });
      }
    }), this.invoice_doc);
  },
  // Process and save invoice (handles update or create)
  process_invoice() {
    const e = this.get_invoice_doc();
    try {
      const t = this.update_invoice(e);
      return t && t.posting_date && (this.posting_date = this.formatDateForBackend(t.posting_date)), t;
    } catch (t) {
      return console.error("Error in process_invoice:", t), this.eventBus.emit("show_message", {
        title: __(t.message || "Error processing invoice"),
        color: "error"
      }), !1;
    }
  },
  // Update invoice while preserving Sales Order references
  update_invoice_preserve_so_refs(e) {
    try {
      console.log("Updating invoice while preserving Sales Order references");
      const t = {};
      e.items && e.items.forEach((a, r) => {
        t[r] = {
          sales_order: a.sales_order,
          so_detail: a.so_detail
        };
      });
      const n = this.update_invoice(e);
      return n && n.items && Object.keys(t).length > 0 && (n.items.forEach((a, r) => {
        t[r] && (a.sales_order = t[r].sales_order, a.so_detail = t[r].so_detail);
      }), console.log("Restored Sales Order references in updated invoice")), n;
    } catch (t) {
      return console.error("Error updating invoice with SO refs preservation:", t), e;
    }
  },
  // Process and save invoice from order
  async process_invoice_from_order() {
    const e = await this.get_invoice_from_order_doc();
    var t;
    return e.name ? (t = await this.update_invoice_from_order(e), t) : this.update_invoice_from_order(e);
  },
  // Show payment dialog after validation and processing
  async show_payment() {
    try {
      if (console.log("Starting show_payment process"), console.log("Invoice state before payment:", {
        invoiceType: this.invoiceType,
        is_return: this.invoice_doc ? this.invoice_doc.is_return : !1,
        items_count: this.items.length,
        customer: this.customer,
        invoice_doc_name: this.invoice_doc ? this.invoice_doc.name : null,
        invoice_doc_doctype: this.invoice_doc ? this.invoice_doc.doctype : null,
        order_mode: this.pos_profile.posa_order_mode
      }), !this.customer) {
        console.log("Customer validation failed"), this.eventBus.emit("show_message", {
          title: __("Select a customer"),
          color: "error"
        });
        return;
      }
      if (!this.items.length) {
        console.log("Items validation failed - no items"), this.eventBus.emit("show_message", {
          title: __("Select items to sell"),
          color: "error"
        });
        return;
      }
      console.log("Basic validations passed, proceeding to main validation");
      const e = this.validate();
      if (console.log("Main validation result:", e), !e) {
        console.log("Main validation failed");
        return;
      }
      if (this.pos_profile.posa_enable_restaurant_mode && (this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT"))
        return console.log("Processing direct order mode:", this.pos_profile.posa_order_mode), await this.handle_direct_order_payment();
      let n;
      if (console.log("Determining processing path:", {
        has_invoice_doc: !!this.invoice_doc,
        invoice_doc_name: this.invoice_doc?.name,
        invoice_doc_doctype: this.invoice_doc?.doctype,
        invoiceType: this.invoiceType,
        restaurant_mode: this.pos_profile.posa_enable_restaurant_mode
      }), this.pos_profile.posa_enable_restaurant_mode && this.invoice_doc && this.invoice_doc.name && (this.invoice_doc.doctype === "Sales Order" || this.invoiceType === "Order")) {
        console.log("Processing existing Sales Order for payment in restaurant mode");
        const a = this.get_invoice_doc();
        if (console.log("Document analysis:", {
          name: a.name,
          doctype: a.doctype,
          docstatus: a.docstatus,
          invoice_doc_name: this.invoice_doc.name,
          invoice_doc_doctype: this.invoice_doc.doctype
        }), a.name && a.name.startsWith("ACC-SINV-") && a.doctype === "Sales Invoice")
          console.log("SKIP CONVERSION: Already have Sales Invoice, proceeding directly to payment"), n = a, this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice"], this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Changed invoice type to 'Invoice' for existing Sales Invoice");
        else {
          let r = null;
          if (a.name && a.name.startsWith("SAL-ORD-") ? (r = a.name, console.log("PRESERVE: Original Sales Order name:", r)) : (console.warn("UNEXPECTED: Document doesn't have Sales Order format, using as-is"), r = a.name), this.invoice_doc.docstatus === 1 ? (console.log("Updating submitted Sales Order"), n = await this.update_submitted_order(a)) : (console.log("Updating draft Sales Order (keeping draft status)"), n = this.update_invoice(a)), !n && !r) {
            console.log("Failed to update Sales Order");
            return;
          }
          const i = r || n && n.name;
          if (n && n.docstatus === 0)
            console.log("Draft order - going to payment window without conversion:", i);
          else {
            console.log("Converting submitted Sales Order to Sales Invoice:", i);
            try {
              const o = await frappe.call({
                method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
                args: {
                  sales_order_name: i
                }
              });
              if (o.message)
                n = o.message, console.log("Successfully converted Sales Order to Sales Invoice for payment:", n.name), this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice"], this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Changed invoice type to 'Invoice' to activate payment buttons");
              else
                throw new Error("Failed to convert Sales Order to Sales Invoice");
            } catch (o) {
              console.error("Error converting Sales Order to Invoice:", o), this.eventBus.emit("show_message", {
                title: __("Error converting order to invoice for payment"),
                color: "error"
              });
              return;
            }
          }
        }
      } else this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order && !this.new_delivery_date && !this.invoice_doc.posa_delivery_date ? (console.log("Building local Sales Order doc for payment"), n = this.get_invoice_doc()) : this.invoice_doc.doctype == "Sales Order" && this.invoiceType === "Invoice" ? (console.log("Processing Sales Order payment"), n = await this.process_invoice_from_order()) : n && n.name && n.doctype === "Sales Invoice" ? (console.log("Using existing converted Sales Invoice:", n.name), n = this.update_invoice_preserve_so_refs(n) || n) : (console.log("Processing regular invoice"), n = this.process_invoice());
      if (!n) {
        console.log("Failed to process invoice");
        return;
      }
      n.currency = this.selected_currency || this.pos_profile.currency, n.conversion_rate = this.conversion_rate || 1, n.plc_conversion_rate = this.exchange_rate || 1, n.is_pos = 1, n.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, n.company = n.company || this.pos_profile.company, n.customer = n.customer || this.customer, n.pos_profile = n.pos_profile || this.pos_profile.name, !n.grand_total && this.subtotal && (n.grand_total = this.subtotal), !n.rounded_total && this.subtotal && (n.rounded_total = this.pos_profile.disable_rounded_total ? this.flt(this.subtotal, this.currency_precision) : this.roundAmount(this.subtotal)), console.log("Final invoice_doc for payment:", {
        name: n.name,
        doctype: n.doctype,
        is_pos: n.is_pos,
        grand_total: n.grand_total,
        rounded_total: n.rounded_total,
        customer: n.customer,
        company: n.company,
        currency: n.currency,
        pos_profile: n.pos_profile
      }), (this.isReturnInvoice || n.is_return) && (console.log("Preparing RETURN invoice for payment with:", {
        is_return: n.is_return,
        invoiceType: this.invoiceType,
        return_against: n.return_against,
        items: n.items.length,
        grand_total: n.grand_total
      }), n.is_return = 1, n.grand_total > 0 && (n.grand_total = -Math.abs(n.grand_total)), n.rounded_total > 0 && (n.rounded_total = -Math.abs(n.rounded_total)), n.total > 0 && (n.total = -Math.abs(n.total)), n.base_grand_total > 0 && (n.base_grand_total = -Math.abs(n.base_grand_total)), n.base_rounded_total > 0 && (n.base_rounded_total = -Math.abs(n.base_rounded_total)), n.base_total > 0 && (n.base_total = -Math.abs(n.base_total)), n.items && n.items.length && n.items.forEach((a) => {
        a.qty > 0 && (a.qty = -Math.abs(a.qty)), a.stock_qty > 0 && (a.stock_qty = -Math.abs(a.stock_qty)), a.amount > 0 && (a.amount = -Math.abs(a.amount));
      })), n.payments = this.get_payments(), console.log("Final payment data:", n.payments), (this.isReturnInvoice || n.is_return) && n.payments.length && (n.payments.forEach((a) => {
        a.amount > 0 && (a.amount = -Math.abs(a.amount)), a.base_amount > 0 && (a.base_amount = -Math.abs(a.base_amount));
      }), console.log("Ensured negative payment amounts for return:", n.payments)), console.log("Showing payment dialog with currency:", n.currency), this.eventBus.emit("show_payment", "true"), this.eventBus.emit("send_invoice_doc_payment", n);
    } catch (e) {
      console.error("Error in show_payment:", e), this.eventBus.emit("show_message", {
        title: __("Error processing payment"),
        color: "error",
        message: e.message
      });
    }
  },
  // Handle direct order payment flow - bypasses order creation and goes straight to invoice
  async handle_direct_order_payment() {
    try {
      console.log("Processing direct order payment");
      const e = await frappe.call({
        method: "posawesome.posawesome.api.direct_orders.create_direct_invoice",
        args: {
          customer: this.customer,
          items: this.items.map((t) => ({
            item_code: t.item_code,
            qty: t.qty,
            rate: t.rate,
            amount: t.amount,
            description: t.description,
            warehouse: t.warehouse || this.pos_profile.warehouse,
            uom: t.uom,
            stock_uom: t.stock_uom,
            conversion_factor: t.conversion_factor || 1
          })),
          pos_profile: this.pos_profile.name,
          company: this.pos_profile.company,
          currency: this.selected_currency || this.pos_profile.currency,
          conversion_rate: this.conversion_rate || 1,
          plc_conversion_rate: this.exchange_rate || 1,
          taxes_and_charges: this.pos_profile.taxes_and_charges,
          // Include KOT flag for Direct Order + KOT mode
          print_kot: this.pos_profile.posa_order_mode === "Direct Order + KOT"
        }
      });
      if (e.message && e.message.invoice) {
        const t = e.message.invoice;
        console.log("Direct order invoice created:", t.name), e.message.kot_printed && this.eventBus.emit("show_message", {
          title: __("KOT printed successfully"),
          color: "success"
        }), t.currency = this.selected_currency || this.pos_profile.currency, t.conversion_rate = this.conversion_rate || 1, t.plc_conversion_rate = this.exchange_rate || 1, t.is_pos = 1, t.payments = this.get_payments(), console.log("Showing payment dialog for direct order"), this.eventBus.emit("show_payment", "true"), this.eventBus.emit("send_invoice_doc_payment", t);
      } else
        throw new Error("Failed to create direct order invoice");
    } catch (e) {
      console.error("Error in direct order payment:", e), this.eventBus.emit("show_message", {
        title: __("Error processing direct order"),
        color: "error",
        message: e.message
      });
    }
  },
  // Validate invoice before payment/submit (return logic, quantity, rates, etc)
  async validate() {
    if (console.log("Starting return validation"), this.isReturnInvoice) {
      console.log("Validating return invoice values");
      const e = this.items.filter((t) => t.qty >= 0 || t.stock_qty >= 0);
      e.length > 0 && (console.log(
        "Found positive quantities in return items:",
        e.map((t) => t.item_code)
      ), this.eventBus.emit("show_message", {
        title: __("Return items must have negative quantities"),
        color: "error"
      }), e.forEach((t) => {
        t.qty = -Math.abs(t.qty), t.stock_qty = -Math.abs(t.stock_qty);
      }), this.$forceUpdate()), this.subtotal > 0 && (console.log("Return has positive subtotal:", this.subtotal), this.eventBus.emit("show_message", {
        title: __("Return total must be negative"),
        color: "warning"
      }));
    }
    if (this.invoice_doc.is_return && this.invoice_doc.return_against) {
      console.log("Return doc:", this.invoice_doc), console.log("Current items:", this.items);
      try {
        const e = await new Promise((t, n) => {
          frappe.call({
            method: "frappe.client.get",
            args: {
              doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice",
              name: this.invoice_doc.return_against
            },
            callback: (a) => {
              a.message ? (console.log("Original invoice data:", a.message), t(a.message.items || [])) : n(new Error("Original invoice not found"));
            }
          });
        });
        console.log("Original invoice items:", e), console.log(
          "Original item codes:",
          e.map((t) => ({
            item_code: t.item_code,
            qty: t.qty,
            rate: t.rate
          }))
        );
        for (const t of this.items) {
          console.log("Validating return item:", {
            item_code: t.item_code,
            rate: t.rate,
            qty: t.qty
          });
          const n = t.item_code.trim().toUpperCase(), a = e.find(
            (l) => l.item_code.trim().toUpperCase() === n
          );
          if (!a)
            return console.log("Item not found in original invoice:", {
              return_item_code: n,
              original_items: e.map((l) => l.item_code.trim().toUpperCase())
            }), this.eventBus.emit("show_message", {
              title: __(`Item ${t.item_code} not found in original invoice`),
              color: "error"
            }), !1;
          const r = Math.abs(a.rate - t.rate);
          if (console.log("Rate comparison:", {
            return_rate: t.rate,
            orig_rate: a.rate,
            difference: r
          }), r > 0.01)
            return this.eventBus.emit("show_message", {
              title: __(`Rate mismatch for item ${t.item_code}`),
              color: "error"
            }), !1;
          const i = Math.abs(t.qty), o = a.qty;
          if (console.log("Quantity comparison:", {
            return_qty: i,
            orig_qty: o
          }), i > o)
            return this.eventBus.emit("show_message", {
              title: __(
                `Return quantity cannot be greater than original quantity for item ${t.item_code}`
              ),
              color: "error"
            }), !1;
        }
      } catch (e) {
        return console.error("Error in validation:", e), this.eventBus.emit("show_message", {
          title: __(`Error validating return: ${e.message}`),
          color: "error"
        }), !1;
      }
    }
    return !0;
  },
  // Get draft invoices from backend
  get_draft_invoices() {
    var e = this;
    frappe.call({
      method: "posawesome.posawesome.api.invoices.get_draft_invoices",
      args: {
        pos_opening_shift: this.pos_opening_shift.name,
        doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
      },
      async: !1,
      callback: function(t) {
        t.message && e.eventBus.emit("open_drafts", t.message);
      }
    });
  },
  // Get draft orders from backend
  get_draft_orders() {
    var e = this;
    frappe.call({
      method: "posawesome.posawesome.api.sales_orders.search_orders",
      args: {
        company: this.pos_profile.company,
        currency: this.pos_profile.currency
      },
      async: !1,
      callback: function(t) {
        t.message && e.eventBus.emit("open_orders", t.message);
      }
    });
  },
  // Open returns dialog
  open_returns() {
    this.eventBus.emit("open_returns", this.pos_profile.company);
  },
  // Close payment dialog
  close_payments() {
    this.eventBus.emit("show_payment", "false");
  },
  // Update details for all items (fetch from backend)
  async update_items_details(e) {
    if (e?.length && this.pos_profile)
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_details",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            items_data: JSON.stringify(e),
            price_list: this.selected_price_list || this.pos_profile.selling_price_list
          }
        });
        t?.message && e.forEach((n) => {
          const a = t.message.find(
            (r) => r.posa_row_id == n.posa_row_id
          );
          a && (n.actual_qty = a.actual_qty, n.item_uoms = a.item_uoms, n.has_batch_no = a.has_batch_no, n.has_serial_no = a.has_serial_no, n.batch_no_data = a.batch_no_data, n.serial_no_data = a.serial_no_data, a.rate !== void 0 && (!n.locked_price && !n.posa_offer_applied ? (a.rate !== 0 || !n.rate) && (n.rate = a.rate, n.price_list_rate = a.price_list_rate || a.rate) : n.price_list_rate || (n.price_list_rate = a.price_list_rate || a.rate)), a.currency && (n.currency = a.currency));
        });
      } catch (t) {
        console.error("Error updating items:", t), this.eventBus.emit("show_message", {
          title: __("Error updating item details"),
          color: "error"
        });
      }
  },
  // Update details for a single item (fetch from backend)
  update_item_detail(e, t = !1) {
    if (console.log("update_item_detail request", {
      code: e.item_code,
      force_update: t
    }), !e.item_code)
      return;
    var n = this;
    if (e._manual_rate_set && !t)
      return;
    const a = this.get_invoice_doc();
    console.log("update_item_detail - currentDoc info:", {
      name: a.name,
      doctype: a.doctype,
      docstatus: a.docstatus
    }), frappe.call({
      method: "posawesome.posawesome.api.items.get_item_detail",
      args: {
        warehouse: e.warehouse || this.pos_profile.warehouse,
        doc: a,
        price_list: this.selected_price_list || this.pos_profile.selling_price_list,
        item: {
          item_code: e.item_code,
          customer: this.customer,
          doctype: a.doctype,
          name: a.name || `New ${a.doctype} 1`,
          company: this.pos_profile.company,
          conversion_rate: 1,
          currency: this.pos_profile.currency,
          qty: e.qty,
          price_list_rate: e.base_price_list_rate || e.price_list_rate,
          child_docname: `New ${a.doctype} Item 1`,
          cost_center: this.pos_profile.cost_center,
          pos_profile: this.pos_profile.name,
          uom: e.uom,
          tax_category: "",
          transaction_type: "selling",
          update_stock: this.pos_profile.posa_enable_restaurant_mode ? 0 : this.pos_profile.update_stock,
          price_list: this.get_price_list(),
          has_batch_no: e.has_batch_no,
          has_serial_no: e.has_serial_no,
          serial_no: e.serial_no,
          batch_no: e.batch_no,
          is_stock_item: e.is_stock_item
        }
      },
      callback: function(r) {
        if (console.log("=== get_item_detail API response ===", r), r.message) {
          const i = r.message;
          if (e.warehouse || (e.warehouse = n.pos_profile.warehouse), i.price_list_currency && (n.price_list_currency = i.price_list_currency), e.original_currency || (e.original_currency = i.price_list_currency || n.price_list_currency || n.selected_currency), e.original_rate || (e.original_rate = i.price_list_rate), i.serial_no_data && (e.serial_no_data = i.serial_no_data), i.batch_no_data && (e.batch_no_data = i.batch_no_data), e.has_batch_no && n.pos_profile.posa_auto_set_batch && !e.batch_no && i.batch_no_data && i.batch_no_data.length > 0 && (e.batch_no_data = i.batch_no_data, n.set_batch_qty(e, null, !1)), !e.locked_price) {
            if ((t || !e.base_rate) && (i.price_list_rate !== 0 || !e.base_price_list_rate) && (e.base_price_list_rate = i.price_list_rate, e.posa_offer_applied || (e.base_rate = i.price_list_rate)), e.posa_offer_applied) {
              const o = n.price_list_currency || n.pos_profile.currency;
              n.selected_currency !== o ? e.price_list_rate = n.flt(
                e.base_rate * n.exchange_rate,
                n.currency_precision
              ) : e.price_list_rate = e.base_rate;
            } else {
              const o = n.pos_profile.currency, l = o;
              if (n.selected_currency === n.price_list_currency && n.selected_currency !== o) {
                const s = n.conversion_rate || 1;
                e.price_list_rate = n.flt(
                  e.base_price_list_rate / s,
                  n.currency_precision
                ), e._manual_rate_set || (e.rate = n.flt(e.base_rate / s, n.currency_precision));
              } else if (n.selected_currency !== l) {
                const s = n.exchange_rate || 1;
                e.price_list_rate = n.flt(
                  e.base_price_list_rate * s,
                  n.currency_precision
                ), e.rate = n.flt(e.base_rate * s, n.currency_precision);
              } else
                e.price_list_rate = e.base_price_list_rate, e._manual_rate_set || (e.rate = e.base_rate);
            }
            if (!e.posa_offer_applied && n.pos_profile.posa_apply_customer_discount && n.customer_info.posa_discount > 0 && n.customer_info.posa_discount <= 100 && e.posa_is_offer == 0 && !e.posa_is_replace) {
              const o = e.max_discount > 0 ? Math.min(e.max_discount, n.customer_info.posa_discount) : n.customer_info.posa_discount;
              e.discount_percentage = o;
              const l = n.flt(
                e.price_list_rate * o / 100,
                n.currency_precision
              );
              e.discount_amount = l, e.base_discount_amount = n.flt(
                e.base_price_list_rate * o / 100,
                n.currency_precision
              ), e.rate = n.flt(e.price_list_rate - l, n.currency_precision), e.base_rate = n.flt(
                e.base_price_list_rate - e.base_discount_amount,
                n.currency_precision
              );
            }
          }
          e.last_purchase_rate = i.last_purchase_rate, e.projected_qty = i.projected_qty, e.reserved_qty = i.reserved_qty, e.conversion_factor = i.conversion_factor, e.stock_qty = i.stock_qty, e.actual_qty = i.actual_qty, e.stock_uom = i.stock_uom, e.has_serial_no = i.has_serial_no, e.has_batch_no = i.has_batch_no, e.amount = n.flt(e.qty * e.rate, n.currency_precision), e.base_amount = n.flt(e.qty * e.base_rate, n.currency_precision), console.log(`Updated rates for ${e.item_code} on expand:`, {
            base_rate: e.base_rate,
            rate: e.rate,
            base_price_list_rate: e.base_price_list_rate,
            price_list_rate: e.price_list_rate,
            exchange_rate: n.exchange_rate,
            selected_currency: n.selected_currency,
            default_currency: n.pos_profile.currency
          }), n.$forceUpdate();
        }
      },
      error: function(r) {
        console.error("=== get_item_detail API ERROR ===", r), console.error("Error details:", {
          status: r.status,
          statusText: r.statusText,
          responseText: r.responseText,
          currentDoc: a,
          item_code: e.item_code
        });
      }
    });
  },
  // Fetch customer details (info, price list, etc)
  async fetch_customer_details() {
    var e = this;
    if (this.customer) {
      if (cn())
        try {
          const n = (await JO() || []).find(
            (r) => r.name === e.customer || r.customer_name === e.customer
          );
          if (n) {
            e.customer_info = { ...n }, e.pos_profile.posa_force_reload_items && n.customer_price_list && (e.selected_price_list = n.customer_price_list, e.eventBus.emit("update_customer_price_list", n.customer_price_list), e.apply_cached_price_list(n.customer_price_list));
            return;
          }
          const a = (r1() || []).map((r) => r.args).find((r) => r.customer_name === e.customer);
          if (a) {
            e.customer_info = { ...a, name: a.customer_name }, e.pos_profile.posa_force_reload_items && a.customer_price_list && (e.selected_price_list = a.customer_price_list, e.eventBus.emit("update_customer_price_list", a.customer_price_list), e.apply_cached_price_list(a.customer_price_list));
            return;
          }
        } catch (t) {
          console.error("Failed to fetch cached customer", t);
        }
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.customers.get_customer_info",
          args: {
            customer: e.customer
          }
        }), n = t.message;
        t.exc || (e.customer_info = {
          ...n
        }), e.pos_profile.posa_force_reload_items && n.customer_price_list && (e.selected_price_list = n.customer_price_list, e.eventBus.emit("update_customer_price_list", n.customer_price_list), e.apply_cached_price_list(n.customer_price_list));
      } catch (t) {
        console.error("Failed to fetch customer details", t);
      }
    }
  },
  // Get price list for current customer
  get_price_list() {
    return this.selected_price_list || this.pos_profile.selling_price_list;
  },
  // Update price list for customer
  update_price_list() {
    const e = this.pos_profile.selling_price_list;
    this.selected_price_list !== e && (this.selected_price_list = e, this.eventBus.emit("update_customer_price_list", null));
  },
  // Apply cached price list rates to existing invoice items
  async apply_cached_price_list(e) {
    const t = await QO(e);
    if (!Array.isArray(t) || !t.length)
      return;
    const n = {};
    t.forEach((a) => {
      n[a.item_code] = a;
    }), this.items.forEach((a) => {
      const r = n[a.item_code];
      if (!r) return;
      const i = r.rate || r.price_list_rate, o = r.currency || this.selected_currency;
      if (a.original_currency || (a.original_currency = o), a.original_rate || (a.original_rate = i), o === this.selected_currency) {
        const l = this.pos_profile.currency;
        if (o !== l) {
          const s = this.conversion_rate || 1;
          a.base_price_list_rate = i * s, a._manual_rate_set || (a.base_rate = i * s);
        } else
          a.base_price_list_rate = i, a._manual_rate_set || (a.base_rate = i);
        a.price_list_rate = i, a._manual_rate_set || (a.rate = i);
      } else {
        (i !== 0 || !a.base_price_list_rate) && (a.base_price_list_rate = i, a._manual_rate_set || (a.base_rate = i));
        const l = this.pos_profile.currency;
        if (this.selected_currency !== l) {
          const s = this.exchange_rate || 1, d = this.flt(i * s, this.currency_precision);
          (i !== 0 || !a.price_list_rate) && (a.price_list_rate = d), !a._manual_rate_set && (i !== 0 || !a.rate) && (a.rate = d);
        } else
          (i !== 0 || !a.price_list_rate) && (a.price_list_rate = i), !a._manual_rate_set && (i !== 0 || !a.rate) && (a.rate = i);
      }
      a.amount = this.flt(a.qty * a.rate, this.currency_precision), a.base_amount = this.flt(a.qty * a.base_rate, this.currency_precision);
    }), this.$forceUpdate();
  },
  // Update additional discount amount based on percentage
  update_discount_umount() {
    return nne(this);
  },
  // Calculate prices and discounts for an item based on field change
  calc_prices(e, t, n) {
    return ane(e, t, n, this);
  },
  // Calculate item price and discount fields
  calc_item_price(e) {
    return rne(e, this);
  },
  // Update UOM (unit of measure) for an item and recalculate prices
  calc_uom(e, t) {
    return cne(e, t, this);
  },
  // Calculate stock quantity for an item with stock validation
  calc_stock_qty(e, t) {
    ky(e, t, this), e.is_stock_item && (this.update_qty_limits && this.update_qty_limits(e), e.max_qty !== void 0 && flt(e.qty) > flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e.qty = e.max_qty, ky(e, e.qty, this), this.$forceUpdate(), this.eventBus.emit("show_message", {
      title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
        this.formatFloat(e.max_qty)
      ]),
      color: "error"
    })) : this.eventBus.emit("show_message", {
      title: __("Stock is lower than requested. Proceeding may create negative stock."),
      color: "warning"
    })));
  },
  // Update quantity limits based on available stock
  update_qty_limits(e) {
    e && e.available_qty !== void 0 && e.is_stock_item ? (e.max_qty = flt(e.available_qty / (e.conversion_factor || 1)), e.max_qty !== void 0 && flt(e.qty) > flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e.qty = e.max_qty, ky(e, e.qty, this), this.$forceUpdate(), this.eventBus.emit("show_message", {
      title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
        this.formatFloat(e.max_qty)
      ]),
      color: "error"
    })) : this.eventBus.emit("show_message", {
      title: __("Stock is lower than requested. Proceeding may create negative stock."),
      color: "warning"
    })), e.disable_increment = (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty) && e.qty >= e.max_qty) : e && !e.is_stock_item && (e.max_qty = void 0, e.disable_increment = !1);
  },
  // Fetch available stock for an item and cache it
  async fetch_available_qty(e) {
    if (!e || !e.item_code || !e.warehouse || !e.is_stock_item) {
      e && !e.is_stock_item && (e.available_qty = void 0, e.max_qty = void 0, e.disable_increment = !1);
      return;
    }
    const t = `${e.item_code}:${e.warehouse}:${e.batch_no || ""}:${e.uom}`, n = this.available_stock_cache[t], a = Date.now();
    if (n && a - n.ts < 6e4) {
      e.available_qty = n.qty, this.update_qty_limits(e);
      return;
    }
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.items.get_available_qty",
        args: {
          items: JSON.stringify([
            {
              item_code: e.item_code,
              warehouse: e.warehouse,
              batch_no: e.batch_no
            }
          ])
        }
      }), i = r.message && r.message.length ? flt(r.message[0].available_qty) : 0;
      this.available_stock_cache[t] = { qty: i, ts: a }, e.available_qty = i, this.update_qty_limits(e);
    } catch (r) {
      console.error("Failed to fetch available qty", r);
    }
  },
  // Set serial numbers for an item (and update qty)
  set_serial_no(e) {
    return ene(e, this);
  },
  // Set batch number for an item (and update batch data)
  set_batch_qty(e, t, n = !0) {
    return tne(e, t, n, this);
  },
  change_price_list_rate(e) {
    const t = this, n = new frappe.ui.Dialog({
      title: __("Change Price"),
      fields: [
        {
          fieldname: "new_rate",
          fieldtype: "Float",
          label: __("New Price List Rate"),
          default: e.price_list_rate || e.rate,
          reqd: 1
        }
      ],
      primary_action_label: __("Update"),
      primary_action(a) {
        const r = flt(a.new_rate);
        frappe.call({
          method: "posawesome.posawesome.api.items.update_price_list_rate",
          args: {
            item_code: e.item_code,
            price_list: t.get_price_list(),
            rate: r,
            uom: e.uom
          },
          callback(i) {
            i.exc || (e.price_list_rate = r, e.base_price_list_rate = r, e._manual_rate_set || (e.rate = r, e.base_rate = r), t.calc_item_price(e), t.eventBus.emit("show_message", {
              title: i.message || __("Item price updated"),
              color: "success"
            }));
          }
        }), n.hide();
      }
    });
    n.get_field("new_rate").$input.on("keydown", function(a) {
      a.key === "Enter" && n.get_primary_btn().click();
    }), n.show();
  }
}, dne = {
  // Calculate total quantity of all items
  total_qty() {
    this.close_payments();
    let e = 0;
    return this.items.forEach((t) => {
      e += flt(t.qty);
    }), this.flt(e, this.float_precision);
  },
  // Calculate total amount for all items (handles returns)
  Total() {
    let e = 0;
    return this.items.forEach((t) => {
      const n = this.isReturnInvoice ? Math.abs(flt(t.qty)) : flt(t.qty), a = flt(t.rate);
      e += n * a;
    }), this.flt(e, this.currency_precision);
  },
  // Calculate subtotal after discounts and delivery charges
  subtotal() {
    this.close_payments();
    let e = 0;
    this.items.forEach((a) => {
      const r = this.isReturnInvoice ? Math.abs(flt(a.qty)) : flt(a.qty), i = flt(a.rate);
      e += r * i;
    });
    const t = this.flt(this.additional_discount);
    e -= t;
    const n = this.flt(this.delivery_charges_rate);
    return e += n, this.flt(e, this.currency_precision);
  },
  // Calculate total discount amount for all items
  total_items_discount_amount() {
    let e = 0;
    return this.items.forEach((t) => {
      this.isReturnInvoice ? e += Math.abs(flt(t.qty)) * flt(t.discount_amount) : e += flt(t.qty) * flt(t.discount_amount);
    }), this.flt(e, this.float_precision);
  },
  // Format posting_date for display as DD-MM-YYYY
  formatted_posting_date: {
    get() {
      if (!this.posting_date) return "";
      const e = this.posting_date.split("-");
      return e.length === 3 ? `${e[2]}-${e[1]}-${e[0]}` : this.posting_date;
    },
    set(e) {
      const t = e.split("-");
      t.length === 3 ? this.posting_date = `${t[2]}-${t[1]}-${t[0]}` : this.posting_date = e;
    }
  },
  // Get currency symbol for display
  currencySymbol() {
    return (e) => get_currency_symbol(e || this.selected_currency || this.pos_profile.currency);
  },
  // Get display currency
  displayCurrency() {
    return this.selected_currency || this.pos_profile.currency;
  },
  // Determine if current invoice is a return
  isReturnInvoice() {
    return this.invoiceType === "Return" || this.invoice_doc && this.invoice_doc.is_return;
  },
  // Table headers for item table (for another table if needed)
  itemTableHeaders() {
    return [
      {
        text: __("Item"),
        value: "item_name",
        width: "35%"
      },
      {
        text: __("Qty"),
        value: "qty",
        width: "15%"
      },
      {
        text: __(`Rate (${this.displayCurrency})`),
        value: "rate",
        width: "20%"
      },
      {
        text: __(`Amount (${this.displayCurrency})`),
        value: "amount",
        width: "20%"
      },
      {
        text: __("Action"),
        value: "actions",
        sortable: !1,
        width: "10%"
      }
    ];
  }
}, fne = {
  // Watch for customer change and update related data
  customer() {
    this.close_payments(), this.eventBus.emit("set_customer", this.customer), this.fetch_customer_details(), this.fetch_customer_balance(), this.set_delivery_charges();
  },
  // Watch for customer_info change and emit to edit form
  customer_info() {
    this.eventBus.emit("set_customer_info_to_edit", this.customer_info);
  },
  // Watch for expanded row change and update item detail
  expanded(e) {
    if (e.length > 0) {
      const t = e[0], n = this.items.find((a) => a.posa_row_id === t);
      n && this.update_item_detail(n);
    }
  },
  // Watch for discount offer name change and emit
  discount_percentage_offer_name() {
    this.eventBus.emit("update_discount_percentage_offer_name", {
      value: this.discount_percentage_offer_name
    });
  },
  // Watch for items array changes (deep) and re-handle offers
  items: {
    deep: !0,
    handler() {
      this.isApplyingOffer || (this.handelOffers(), this.$forceUpdate());
    }
  },
  packed_items: {
    deep: !0,
    handler() {
      this.isApplyingOffer || (this.handelOffers(), this.$forceUpdate());
    }
  },
  // Watch for invoice type change and emit
  invoiceType() {
    this.eventBus.emit("update_invoice_type", this.invoiceType);
  },
  // Watch for additional discount and update percentage accordingly
  additional_discount() {
    !this.additional_discount || this.additional_discount == 0 ? this.additional_discount_percentage = 0 : this.pos_profile.posa_use_percentage_discount ? this.Total && this.Total !== 0 ? this.additional_discount_percentage = this.additional_discount / this.Total * 100 : this.additional_discount_percentage = 0 : this.additional_discount_percentage = 0;
  },
  // Keep display date in sync with posting_date
  posting_date: {
    handler(e) {
      this.posting_date_display = this.formatDateForDisplay(e);
    },
    immediate: !0
  },
  // Update posting_date when user changes the display value
  posting_date_display(e) {
    this.posting_date = this.formatDateForBackend(e);
  },
  selected_price_list(e) {
    Lu();
    const t = e === this.pos_profile.selling_price_list ? null : e;
    this.eventBus.emit("update_customer_price_list", t);
    const n = e || this.pos_profile.selling_price_list;
    this.apply_cached_price_list(n), this.pos_profile.posa_allow_multi_currency && n && frappe.call({
      method: "posawesome.posawesome.api.invoices.get_price_list_currency",
      args: { price_list: n },
      callback: (a) => {
        a.message && (this.price_list_currency = a.message, this.update_currency(a.message));
      }
    });
  },
  // Reactively update item prices when currency changes
  selected_currency() {
    Lu(), this.items && this.items.length && this.update_item_rates();
  },
  // Reactively update item prices when exchange rate changes
  exchange_rate() {
    this.items && this.items.length && this.update_item_rates();
  }
};
function Np(e) {
  if (e)
    try {
      const t = document.createElement("iframe");
      t.style.position = "fixed", t.style.right = "0", t.style.bottom = "0", t.style.width = "0", t.style.height = "0", t.style.border = "0", t.onload = () => {
        try {
          t.contentWindow.focus(), t.contentWindow.print();
        } finally {
          setTimeout(() => t.remove(), 1e3);
        }
      }, t.src = e, document.body.appendChild(t);
    } catch (t) {
      console.error("Silent print failed, falling back to new window", t);
      const n = window.open(e, "_blank");
      n && n.addEventListener("load", () => n.print(), { once: !0 });
    }
}
const mne = {
  checkOfferIsAppley(e, t) {
    let n = !1;
    const a = JSON.parse(e.posa_offers);
    for (const r of a) {
      const i = this.posa_offers.find((o) => r == o.row_id);
      if (i && i.offer_name == t.name) {
        n = !0;
        break;
      }
    }
    return n;
  },
  handelOffers() {
    const e = [];
    this.posOffers.forEach((t) => {
      if (t.apply_on === "Item Code") {
        const n = this.getItemOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Item Group") {
        const n = this.getGroupOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Brand") {
        const n = this.getBrandOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Transaction") {
        const n = this.getTransactionOffer(t);
        n && e.push(n);
      }
    }), this.setItemGiveOffer(e), this.updatePosOffers(e);
  },
  setItemGiveOffer(e) {
    e.forEach((t) => {
      if (t.apply_on == "Item Code" && t.apply_type == "Item Code" && t.replace_item)
        t.give_item = t.item, t.apply_item_code = t.item;
      else if (t.apply_on == "Item Group" && t.apply_type == "Item Group" && t.replace_cheapest_item) {
        const n = this.getCheapestItem(t).item_code;
        t.give_item = n, t.apply_item_code = n;
      }
    });
  },
  getCheapestItem(e) {
    let t;
    typeof e.items == "string" ? t = JSON.parse(e.items) : t = e.items;
    const n = [];
    return t.forEach((r) => {
      n.push(this.getItemFromRowID(r));
    }), n.reduce(function(r, i) {
      return !i.posa_is_replace && !i.posa_is_offer && i.price_list_rate < r.price_list_rate ? i : r;
    });
  },
  getItemFromRowID(e) {
    return [...this.items, ...this.packed_items].find((n) => n.posa_row_id == e);
  },
  checkQtyAnountOffer(e, t, n) {
    let a = !1, r = !1, i = !1, o = !1;
    const l = [];
    (e.min_qty || e.min_qty == 0) && (t >= e.min_qty && (a = !0), l.push(a)), e.max_qty > 0 && (t <= e.max_qty && (r = !0), l.push(r)), e.min_amt > 0 && (n >= e.min_amt && (i = !0), l.push(i)), e.max_amt > 0 && (n <= e.max_amt && (o = !0), l.push(o));
    let s = !1;
    return l.includes(!1) || (s = !0), {
      apply: s,
      conditions: { min_qty: a, max_qty: r, min_amt: i, max_amt: o }
    };
  },
  checkOfferCoupon(e) {
    if (e.coupon_based) {
      const t = this.posa_coupons.find((n) => e.name == n.pos_offer);
      return t ? (e.coupon = t.coupon, !0) : !1;
    } else
      return e.coupon = null, !0;
  },
  getItemOffer(e) {
    let t = null;
    return e.apply_on === "Item Code" && this.checkOfferCoupon(e) && [...this.items, ...this.packed_items].forEach((a) => {
      if (!a.posa_is_offer && a.item_code === e.item) {
        if (e.offer === "Item Price" && a.posa_offer_applied && !this.checkOfferIsAppley(a, e))
          return;
        const r = [], i = a.original_price_list_rate || a.price_list_rate;
        this.checkQtyAnountOffer(e, a.stock_qty, a.stock_qty * i).apply && (r.push(a.posa_row_id), e.items = r, t = e);
      }
    }), t;
  },
  getGroupOffer(e) {
    let t = null;
    if (e.apply_on === "Item Group" && this.checkOfferCoupon(e)) {
      const n = [];
      let a = 0, r = 0;
      [...this.items, ...this.packed_items].forEach((o) => {
        if (!o.posa_is_offer && o.item_group === e.item_group) {
          if (e.offer === "Item Price" && o.posa_offer_applied && !this.checkOfferIsAppley(o, e))
            return;
          a += o.stock_qty;
          const l = o.original_price_list_rate || o.price_list_rate;
          r += o.stock_qty * l, n.push(o.posa_row_id);
        }
      }), (a || r) && this.checkQtyAnountOffer(e, a, r).apply && (e.items = n, t = e);
    }
    return t;
  },
  getBrandOffer(e) {
    let t = null;
    if (e.apply_on === "Brand" && this.checkOfferCoupon(e)) {
      const n = [];
      let a = 0, r = 0;
      [...this.items, ...this.packed_items].forEach((o) => {
        if (!o.posa_is_offer && o.brand === e.brand) {
          if (e.offer === "Item Price" && o.posa_offer_applied && !this.checkOfferIsAppley(o, e))
            return;
          a += o.stock_qty;
          const l = o.original_price_list_rate || o.price_list_rate;
          r += o.stock_qty * l, n.push(o.posa_row_id);
        }
      }), (a || r) && this.checkQtyAnountOffer(e, a, r).apply && (e.items = n, t = e);
    }
    return t;
  },
  getTransactionOffer(e) {
    let t = null;
    if (e.apply_on === "Transaction" && this.checkOfferCoupon(e)) {
      const n = [...this.items, ...this.packed_items];
      let a = 0, r = 0;
      const i = [];
      n.forEach((l) => {
        if (!l.posa_is_offer && !l.posa_is_replace) {
          a += l.stock_qty;
          const s = l.original_price_list_rate || l.price_list_rate;
          r += l.stock_qty * s, i.push(l.posa_row_id);
        }
      });
      const o = a;
      (o || r) && this.checkQtyAnountOffer(e, o, r).apply && (e.items = i, t = e);
    }
    return t;
  },
  updatePosOffers(e) {
    this.eventBus.emit("update_pos_offers", e);
  },
  updateInvoiceOffers(e) {
    this.posa_offers.forEach((t) => {
      e.find((a) => t.row_id == a.row_id) || this.removeApplyOffer(t);
    }), e.forEach((t) => {
      const n = this.posa_offers.find((a) => a.row_id == t.row_id);
      if (n) {
        if (n.items = JSON.stringify(t.items), n.offer === "Give Product" && n.give_item && n.give_item != t.give_item) {
          const a = [...this.items, ...this.packed_items], r = a.find(
            (o) => o.posa_row_id == n.give_item_row_id
          );
          if (r) {
            const o = t.items.filter(
              (d) => d != r.posa_row_id
            );
            t.items = o;
            const l = this.items.includes(r) ? this.items : this.packed_items, s = l.findIndex(
              (d) => d.posa_row_id == r.posa_row_id
            );
            s > -1 && l.splice(s, 1), n.give_item_row_id = null, n.give_item = null;
          }
          const i = this.ApplyOnGiveProduct(t);
          if (t.replace_cheapest_item) {
            const o = this.getCheapestItem(t), l = a.find(
              (d) => d.posa_row_id == r.posa_is_replace
            );
            if (i.qty = r.qty, l && !l.posa_is_replace)
              l.qty += r.qty;
            else {
              const d = this.ApplyOnGiveProduct(
                {
                  given_qty: r.qty
                },
                r.item_code
              );
              d.posa_is_offer = 0, this.items.unshift(d);
            }
            i.posa_is_offer = 0, i.posa_is_replace = o.posa_row_id;
            const s = o.qty - i.qty;
            if (s <= 0) {
              i.qty += s;
              const d = this.items.includes(o) ? this.items : this.packed_items, u = d.findIndex(
                (f) => f.posa_row_id == o.posa_row_id
              );
              u > -1 && d.splice(u, 1), i.posa_row_id = o.posa_row_id, i.posa_is_replace = i.posa_row_id;
            } else
              o.qty = s;
          }
          this.items.unshift(i), n.give_item_row_id = i.posa_row_id, n.give_item = i.item_code;
        } else n.offer === "Give Product" && n.give_item && n.give_item == t.give_item && (t.replace_item || t.replace_cheapest_item) ? this.$nextTick(function() {
          const a = this.getItemFromRowID(n.give_item_row_id), r = t.given_qty - a.qty;
          if (r > 0) {
            const i = JSON.parse(n.items), o = [];
            i.forEach((s) => {
              o.push(this.getItemFromRowID(s));
            });
            const l = o.find(
              (s) => s.item_code == a.item_code && s.posa_is_replace != a.posa_row_id
            );
            if (l)
              if (l.qty - r > 0)
                a.qty += r, l.qty -= r;
              else {
                a.qty += l.qty;
                const d = this.items.includes(l) ? this.items : this.packed_items, u = d.findIndex(
                  (f) => f.posa_row_id == l.posa_row_id
                );
                u > -1 && d.splice(u, 1);
              }
          }
        }) : n.offer === "Item Price" ? this.ApplyOnPrice(t) : n.offer === "Grand Total" && this.ApplyOnTotal(t);
        this.addOfferToItems(n);
      } else
        this.applyNewOffer(t);
    });
  },
  removeApplyOffer(e) {
    if (e.offer === "Item Price") {
      this.RemoveOnPrice(e);
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    if (e.offer === "Give Product") {
      const n = [...this.items, ...this.packed_items].find((r) => r.posa_row_id == e.give_item_row_id), a = this.posa_offers.findIndex((r) => r.row_id === e.row_id);
      if (this.posa_offers.splice(a, 1), n) {
        const r = this.items.includes(n) ? this.items : this.packed_items, i = r.findIndex((o) => o.posa_row_id == n.posa_row_id);
        i > -1 && r.splice(i, 1);
      }
    }
    if (e.offer === "Grand Total") {
      this.RemoveOnTotal(e);
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    if (e.offer === "Loyalty Point") {
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    this.deleteOfferFromItems(e);
  },
  applyNewOffer(e) {
    if (this.isApplyingOffer = !0, e.offer === "Item Price" && this.ApplyOnPrice(e), e.offer === "Give Product") {
      let n;
      if (typeof e.items == "string" ? n = JSON.parse(e.items) : n = e.items, e.apply_on == "Item Code" && e.apply_type == "Item Code" && e.replace_item) {
        const a = this.ApplyOnGiveProduct(e, e.item);
        a.posa_is_replace = n[0];
        const i = [...this.items, ...this.packed_items].find((l) => l.posa_row_id == a.posa_is_replace), o = i.qty - e.given_qty;
        if (a.posa_is_offer = 0, o <= 0) {
          a.qty = i.qty;
          const l = this.items.includes(i) ? this.items : this.packed_items, s = l.findIndex((d) => d.posa_row_id == i.posa_row_id);
          s > -1 && l.splice(s, 1), a.posa_row_id = a.posa_is_replace;
        } else
          i.qty = o;
        this.items.unshift(a), e.give_item_row_id = a.posa_row_id;
      } else if (e.apply_on == "Item Group" && e.apply_type == "Item Group" && e.replace_cheapest_item) {
        const a = [];
        n.forEach((l) => {
          a.push(this.getItemFromRowID(l));
        });
        const r = a.find((l) => l.item_code == e.give_item), i = this.ApplyOnGiveProduct(e, e.give_item);
        i.posa_is_offer = 0, i.posa_is_replace = r.posa_row_id;
        const o = r.qty - e.given_qty;
        if (o <= 0) {
          i.qty = r.qty;
          const l = this.items.includes(r) ? this.items : this.packed_items, s = l.findIndex((d) => d.posa_row_id == r.posa_row_id);
          s > -1 && l.splice(s, 1), i.posa_row_id = i.posa_is_replace;
        } else
          r.qty = o;
        this.items.unshift(i), e.give_item_row_id = i.posa_row_id;
      } else {
        const a = this.ApplyOnGiveProduct(e);
        this.items.unshift(a), a && (e.give_item_row_id = a.posa_row_id);
      }
    }
    e.offer === "Grand Total" && this.ApplyOnTotal(e), e.offer === "Loyalty Point" && this.eventBus.emit("show_message", {
      title: __("Loyalty Point Offer Applied"),
      color: "success"
    });
    const t = {
      offer_name: e.name,
      row_id: e.row_id,
      apply_on: e.apply_on,
      offer: e.offer,
      items: JSON.stringify(e.items),
      give_item: e.give_item,
      give_item_row_id: e.give_item_row_id,
      offer_applied: e.offer_applied,
      coupon_based: e.coupon_based,
      coupon: e.coupon
    };
    this.posa_offers.push(t), this.addOfferToItems(t), this.isApplyingOffer = !1;
  },
  ApplyOnGiveProduct(e, t) {
    t || (t = e.give_item);
    const a = this.allItems.find((o) => o.item_code == t);
    if (!a)
      return;
    const r = { ...a };
    if (r.qty = e.given_qty, r.stock_qty = e.given_qty, e.discount_type === "Rate") {
      r.base_rate = e.rate;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.rate = this.flt(e.rate * this.exchange_rate, this.currency_precision) : r.rate = e.rate;
    } else if (e.discount_type === "Discount Percentage") {
      const o = a.base_rate || a.rate / this.exchange_rate, l = this.flt(
        o * e.discount_percentage / 100,
        this.currency_precision
      );
      r.base_discount_amount = l, r.base_rate = this.flt(o - l, this.currency_precision);
      const s = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== s ? (r.discount_amount = this.flt(
        l * this.exchange_rate,
        this.currency_precision
      ), r.rate = this.flt(r.base_rate * this.exchange_rate, this.currency_precision)) : (r.discount_amount = l, r.rate = r.base_rate);
    } else {
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? (r.base_rate = a.base_rate || a.rate / this.exchange_rate, r.rate = a.rate) : (r.base_rate = a.rate, r.rate = a.rate);
    }
    if (e.discount_type === "Discount Amount") {
      r.base_discount_amount = e.discount_amount;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.discount_amount = this.flt(
        e.discount_amount * this.exchange_rate,
        this.currency_precision
      ) : r.discount_amount = e.discount_amount;
    } else e.discount_type !== "Discount Percentage" && (r.base_discount_amount = 0, r.discount_amount = 0);
    r.discount_percentage = e.discount_type === "Discount Percentage" ? e.discount_percentage : 0, r.discount_amount_per_item = 0, r.uom = a.uom ? a.uom : a.stock_uom, r.actual_batch_qty = "", r.conversion_factor = 1, r.posa_offers = JSON.stringify([]), r.posa_offer_applied = e.discount_type === "Rate" || e.discount_type === "Discount Amount" || e.discount_type === "Discount Percentage" ? 1 : 0, r.posa_is_offer = 1, r.posa_is_replace = null, r.posa_notes = "", r.posa_delivery_date = "";
    const i = e.discount_type === "Rate" && !e.rate || e.discount_type === "Discount Percentage" && e.discount_percentage == 100;
    if (r.is_free_item = i ? 1 : 0, i)
      r.base_price_list_rate = 0, r.price_list_rate = 0;
    else {
      r.price_list_rate = a.rate;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.base_price_list_rate = this.flt(
        a.rate / this.exchange_rate,
        this.currency_precision
      ) : r.base_price_list_rate = a.rate;
    }
    return r.posa_row_id = this.makeid(20), (!this.pos_profile.posa_auto_set_batch && r.has_batch_no || r.has_serial_no) && this.expanded.push(r.posa_row_id), this.update_item_detail(r), r;
  },
  ApplyOnPrice(e) {
    if (console.log("Applying price offer:", e), !e) return;
    [...this.items, ...this.packed_items].forEach((n) => {
      if (!(!n || !e.items || !Array.isArray(e.items)) && e.items.includes(n.posa_row_id)) {
        const a = n.posa_offers ? JSON.parse(n.posa_offers) : [];
        if (!Array.isArray(a)) return;
        if (!a.includes(e.row_id)) {
          if (!n.posa_offer_applied) {
            const i = flt(n.conversion_factor || 1);
            n.original_base_rate = n.base_rate / i, n.original_base_price_list_rate = n.base_price_list_rate / i, n.original_rate = n.rate / i, n.original_price_list_rate = n.price_list_rate / i, console.log("Storing original rates (normalized to conversion factor 1):", {
              original_base_rate: n.original_base_rate,
              original_base_price_list_rate: n.original_base_price_list_rate,
              original_rate: n.original_rate,
              original_price_list_rate: n.original_price_list_rate,
              conversion_factor: i
            });
          }
          const r = flt(n.conversion_factor || 1);
          if (e.discount_type === "Rate") {
            const i = flt(e.rate * r);
            n.base_rate = i, n.base_price_list_rate = i;
            const o = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== o ? (n.rate = this.flt(
              i * this.exchange_rate,
              this.currency_precision
            ), n.price_list_rate = n.rate) : (n.rate = i, n.price_list_rate = i), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0;
          } else if (e.discount_type === "Discount Percentage") {
            n.discount_percentage = e.discount_percentage;
            const i = this.flt(
              (n.original_base_price_list_rate || n.base_price_list_rate / r) * r,
              this.currency_precision
            ), o = this.flt(
              i * e.discount_percentage / 100,
              this.currency_precision
            );
            n.base_discount_amount = o, n.base_rate = this.flt(i - o, this.currency_precision), n.base_price_list_rate = n.base_rate;
            const l = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== l ? (n.rate = this.flt(
              n.base_rate * this.exchange_rate,
              this.currency_precision
            ), n.price_list_rate = n.rate, n.discount_amount = this.flt(
              o * this.exchange_rate,
              this.currency_precision
            )) : (n.rate = n.base_rate, n.price_list_rate = n.base_rate, n.discount_amount = o);
          }
          n.amount = this.flt(n.qty * n.rate, this.currency_precision), n.base_amount = this.flt(n.qty * n.base_rate, this.currency_precision), console.log("Updated rates after applying offer:", {
            rate: n.rate,
            base_rate: n.base_rate,
            price_list_rate: n.price_list_rate,
            base_price_list_rate: n.base_price_list_rate,
            discount_amount: n.discount_amount,
            base_discount_amount: n.base_discount_amount,
            amount: n.amount,
            base_amount: n.base_amount
          }), n.posa_offer_applied = 1, this.$forceUpdate();
        }
      }
    });
  },
  RemoveOnPrice(e) {
    if (console.log("Removing price offer:", e), !e) return;
    [...this.items, ...this.packed_items].forEach((n) => {
      if (!(!n || !n.posa_offers))
        try {
          const a = JSON.parse(n.posa_offers);
          if (!Array.isArray(a)) return;
          if (a.includes(e.row_id)) {
            if (console.log("Found item with offer:", n), !n.original_base_rate) {
              console.warn("Original rates not found, fetching from server"), this.update_item_detail(n);
              return;
            }
            const r = flt(n.conversion_factor || 1);
            console.log("Restoring original rates with conversion factor:", {
              original_base_rate: n.original_base_rate,
              original_base_price_list_rate: n.original_base_price_list_rate,
              conversion_factor: r
            }), n.base_rate = this.flt(n.original_base_rate * r, this.currency_precision), n.base_price_list_rate = this.flt(
              n.original_base_price_list_rate * r,
              this.currency_precision
            );
            const i = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== i ? (n.rate = this.flt(n.base_rate * this.exchange_rate, this.currency_precision), n.price_list_rate = this.flt(
              n.base_price_list_rate * this.exchange_rate,
              this.currency_precision
            )) : (n.rate = n.base_rate, n.price_list_rate = n.base_price_list_rate), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0, n.amount = this.flt(n.qty * n.rate, this.currency_precision), n.base_amount = this.flt(n.qty * n.base_rate, this.currency_precision);
            const o = a.filter((l) => l !== e.row_id);
            o.length === 0 && (n.original_base_rate = null, n.original_base_price_list_rate = null, n.original_rate = null, n.original_price_list_rate = null, n.posa_offer_applied = 0), n.posa_offers = JSON.stringify(o), console.log("Updated rates after removing offer:", {
              rate: n.rate,
              base_rate: n.base_rate,
              price_list_rate: n.price_list_rate,
              base_price_list_rate: n.base_price_list_rate,
              amount: n.amount,
              base_amount: n.base_amount,
              remaining_offers: o
            }), this.$forceUpdate();
          }
        } catch (a) {
          console.error("Error removing price offer:", a), this.eventBus.emit("show_message", {
            title: __("Error removing price offer"),
            color: "error",
            message: a.message
          });
        }
    });
  },
  ApplyOnTotal(e) {
    e.name || (e = this.posOffers.find((t) => t.name == e.offer_name)), !(this.discount_percentage_offer_name === e.name && this.discount_amount !== 0) && (!this.discount_percentage_offer_name || this.discount_percentage_offer_name == e.name) && e.discount_percentage > 0 && e.discount_percentage <= 100 && (this.discount_amount = this.flt(
      flt(this.Total) * flt(e.discount_percentage) / 100,
      this.currency_precision
    ), this.discount_percentage_offer_name = e.name, this.additional_discount = this.discount_amount, this.Total && this.Total !== 0 ? this.additional_discount_percentage = this.discount_amount / this.Total * 100 : this.additional_discount_percentage = 0);
  },
  RemoveOnTotal(e) {
    this.discount_percentage_offer_name && this.discount_percentage_offer_name == e.offer_name && (this.discount_amount = 0, this.discount_percentage_offer_name = null, this.additional_discount = 0, this.additional_discount_percentage = 0);
  },
  addOfferToItems(e) {
    if (!(!e || !e.items))
      try {
        const t = typeof e.items == "string" ? JSON.parse(e.items) : e.items;
        if (!Array.isArray(t)) return;
        const n = [...this.items, ...this.packed_items];
        t.forEach((a) => {
          n.forEach((r) => {
            if (!(!r || !r.posa_row_id) && r.posa_row_id == a) {
              const i = r.posa_offers ? JSON.parse(r.posa_offers) : [];
              if (!Array.isArray(i)) return;
              i.includes(e.row_id) || (i.push(e.row_id), e.offer === "Item Price" && (r.posa_offer_applied = 1)), r.posa_offers = JSON.stringify(i);
            }
          });
        });
      } catch (t) {
        console.error("Error adding offer to items:", t), this.eventBus.emit("show_message", {
          title: __("Error adding offer to items"),
          color: "error",
          message: t.message
        });
      }
  },
  deleteOfferFromItems(e) {
    if (!(!e || !e.items))
      try {
        const t = typeof e.items == "string" ? JSON.parse(e.items) : e.items;
        if (!Array.isArray(t)) return;
        const n = [...this.items, ...this.packed_items];
        t.forEach((a) => {
          n.forEach((r) => {
            if (!(!r || !r.posa_row_id) && r.posa_row_id == a) {
              const i = r.posa_offers ? JSON.parse(r.posa_offers) : [];
              if (!Array.isArray(i)) return;
              const o = i.filter((l) => l != e.row_id);
              e.offer === "Item Price" && (r.posa_offer_applied = 0), r.posa_offers = JSON.stringify(o);
            }
          });
        });
      } catch (t) {
        console.error("Error deleting offer from items:", t), this.eventBus.emit("show_message", {
          title: __("Error deleting offer from items"),
          color: "error",
          message: t.message
        });
      }
  },
  validate_due_date(e) {
    const t = frappe.datetime.now_date(), n = Date.parse(t), a = this.formatDateForBackend(e.posa_delivery_date), r = Date.parse(a);
    isNaN(r) || r < n ? setTimeout(() => {
      e.posa_delivery_date = this.formatDateForDisplay(t);
    }, 0) : e.posa_delivery_date = this.formatDateForDisplay(a);
  },
  load_print_page(e) {
    const t = this.pos_profile.print_format_for_online || this.pos_profile.print_format, n = this.pos_profile.letter_head || 0, a = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", r = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(a) + "&name=" + e + "&trigger_print=1&format=" + t + "&no_letterhead=" + n;
    if (this.pos_profile.posa_silent_print)
      Np(r);
    else {
      const i = window.open(r, "Print");
      i.addEventListener(
        "load",
        function() {
          i.print();
        },
        { once: !0 }
      );
    }
  },
  formatDateForBackend(e) {
    if (!e) return null;
    if (typeof e == "string") {
      const n = Rt.fromArabicNumerals(e);
      if (/^\d{4}-\d{2}-\d{2}$/.test(n))
        return n;
      if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(n)) {
        const [a, r, i] = n.split("-");
        return `${i}-${r.padStart(2, "0")}-${a.padStart(2, "0")}`;
      }
      e = n;
    }
    const t = new Date(Rt.fromArabicNumerals(String(e)));
    if (!isNaN(t.getTime())) {
      const n = t.getFullYear(), a = `0${t.getMonth() + 1}`.slice(-2), r = `0${t.getDate()}`.slice(-2);
      return `${n}-${a}-${r}`;
    }
    return Rt.fromArabicNumerals(String(e));
  },
  formatDateForDisplay(e) {
    if (!e) return "";
    const t = Rt.fromArabicNumerals(String(e));
    if (typeof e == "string" && /^\d{4}-\d{2}-\d{2}$/.test(t)) {
      const [a, r, i] = t.split("-");
      return Rt.toArabicNumerals(`${i}-${r}-${a}`);
    }
    const n = new Date(t);
    if (!isNaN(n.getTime())) {
      const a = n.getFullYear(), r = `0${n.getMonth() + 1}`.slice(-2), i = `0${n.getDate()}`.slice(-2);
      return Rt.toArabicNumerals(`${i}-${r}-${a}`);
    }
    return Rt.toArabicNumerals(t);
  },
  toggleOffer(e) {
    this.$nextTick(() => {
      e.posa_is_offer || (e.posa_offers = JSON.stringify([]), e.posa_offer_applied = 0, e.discount_percentage = 0, e.discount_amount = 0, e.rate = e.price_list_rate, this.calc_item_price(e), this.handelOffers()), this.$forceUpdate();
    });
  }
  // Added missing comma here
}, hne = {
  shortOpenFirstItem(e) {
    if (e.key.toLowerCase() === "a" && (e.ctrlKey || e.metaKey))
      try {
        if (e.preventDefault(), e.stopPropagation(), !this.items || this.items.length === 0) {
          console.log("No items to expand/collapse");
          return;
        }
        const t = this.items[0];
        console.log("Processing first item:", t.item_code), this.expanded.includes(t.posa_row_id) ? (console.log("Collapsing item:", t.item_code), this.expanded = []) : (console.log("Expanding item:", t.item_code), this.expanded = [t.posa_row_id], this.$nextTick(() => {
          this.update_item_detail(t);
        }));
      } catch (t) {
        console.error("Error in shortOpenFirstItem:", t), this.eventBus.emit("show_message", {
          title: __("Error toggling item details"),
          color: "error"
        });
      }
  },
  handleExpandedUpdate(e) {
    if (console.log("Expanded state updated:", e), this.expanded = e, e && e.length > 0) {
      const t = e[0], n = this.items.find((a) => a.posa_row_id === t);
      n && this.$nextTick(() => {
        this.update_item_detail(n);
      });
    }
  },
  // Keyboard shortcut: open payment dialog
  shortOpenPayment(e) {
    e.key === "s" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), this.show_payment());
  },
  // Keyboard shortcut: delete first item from the invoice
  shortDeleteFirstItem(e) {
    e.key === "d" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), this.remove_item(this.items[0]));
  },
  shortSelectDiscount(e) {
    console.log("Shortcut pressed:", e.key, e.ctrlKey), e.key.toLowerCase() === "e" && (e.ctrlKey || e.metaKey) && (console.log("Focusing discount field"), e.preventDefault(), e.stopPropagation(), this.$refs.discount ? (this.$refs.discount.focus(), console.log("Discount field focused")) : console.log("Discount field ref not found"));
  }
}, _ne = {
  name: "POSInvoice",
  mixins: [Oi],
  data() {
    return {
      // POS profile settings
      pos_profile: "",
      pos_opening_shift: "",
      stock_settings: "",
      invoice_doc: "",
      return_doc: "",
      customer: "",
      customer_info: "",
      customer_balance: 0,
      discount_amount: 0,
      additional_discount: 0,
      additional_discount_percentage: 0,
      total_tax: 0,
      items: [],
      // List of invoice items
      packed_items: [],
      // Packed items for bundles
      packed_dialog_items: [],
      // Packed items displayed in dialog
      show_packed_dialog: !1,
      // Packing list dialog visibility
      posOffers: [],
      // All available offers
      posa_offers: [],
      // Offers applied to this invoice
      posa_coupons: [],
      // Coupons applied
      isApplyingOffer: !1,
      // Flag to prevent offer watcher loops
      allItems: [],
      // All items for offer logic
      discount_percentage_offer_name: null,
      // Track which offer is applied
      invoiceTypes: ["Invoice", "Order"],
      // Types of invoices
      invoiceType: "Invoice",
      // Current invoice type
      itemsPerPage: 1e3,
      // Items per page in table
      expanded: [],
      // Array of expanded row IDs
      singleExpand: !0,
      // Only one row expanded at a time
      cancel_dialog: !1,
      // Cancel dialog visibility
      float_precision: 6,
      // Float precision for calculations
      currency_precision: 6,
      // Currency precision for display
      new_line: !1,
      // Add new line for item
      available_stock_cache: {},
      delivery_charges: [],
      // List of delivery charges
      delivery_charges_rate: 0,
      // Selected delivery charge rate
      selected_delivery_charge: "",
      // Selected delivery charge object
      invoice_posting_date: !1,
      // Posting date dialog
      posting_date: frappe.datetime.nowdate(),
      // Invoice posting date
      posting_date_display: "",
      // Display value for date picker
      items_headers: [],
      packedItemsHeaders: [
        { title: __("No."), key: "index" },
        { title: __("Parent Item"), key: "parent_item" },
        { title: __("Item Code"), key: "item_code" },
        { title: __("Description"), key: "item_name" },
        { title: __("Qty"), key: "qty" },
        { title: __("Rate"), key: "rate" },
        { title: __("Warehouse"), key: "warehouse" },
        { title: __("Batch"), key: "batch_no" },
        { title: __("Serial"), key: "serial_no" }
      ],
      selected_currency: "",
      // Currently selected currency
      exchange_rate: 1,
      // Current exchange rate
      conversion_rate: 1,
      // Currency to company rate
      exchange_rate_date: frappe.datetime.nowdate(),
      // Date of fetched exchange rate
      company: null,
      // Company doc with default currency
      available_currencies: [],
      // List of available currencies
      price_lists: [],
      // Available selling price lists
      selected_price_list: "",
      // Currently selected price list
      price_list_currency: "",
      // Currency of the selected price list
      selected_columns: [],
      // Selected columns for items table
      temp_selected_columns: [],
      // Temporary array for column selection
      available_columns: [],
      // All available columns
      show_column_selector: !1,
      // Column selector dialog visibility
      invoiceHeight: null,
      // Restaurant order fields
      restaurant_order_types: [],
      available_tables: [],
      selected_order_type: null,
      // Always start with null - no default selection
      selected_table: null,
      order_status: null,
      restaurant_add_items_context: null
      // Store context for updating existing orders
    };
  },
  components: {
    Customer: RD,
    RestaurantOrderType: yee,
    DeliveryCharges: kee,
    PostingDateRow: Eee,
    MultiCurrencyRow: Dee,
    InvoiceSummary: Nee,
    CancelSaleDialog: Ree,
    ItemsTable: Yte
  },
  computed: {
    ...dne,
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    isEditingExistingOrder() {
      return !!(this.pos_profile?.posa_enable_restaurant_mode && this.invoice_doc?.name && this.invoiceType === "Order");
    }
  },
  methods: {
    ...hne,
    ...mne,
    ...une,
    initializeItemsHeaders() {
      this.available_columns = [
        { title: __("Item"), align: "start", sortable: !0, key: "item_name", required: !0, width: "50%" },
        { title: __("Qty"), key: "qty", align: "center", required: !0, width: "15%" },
        { title: __("Rate"), key: "rate", align: "end", required: !1, width: "15%" },
        { title: __("Total"), key: "amount", align: "end", required: !0, width: "15%" },
        { title: "", key: "actions", align: "start", required: !0, width: "3%", sortable: !1 },
        { title: __("UOM"), key: "uom", align: "start", required: !1 },
        { title: __("Discount %"), key: "discount_value", align: "start", required: !1 },
        { title: __("Discount Amount"), key: "discount_amount", align: "start", required: !1 },
        { title: __("Offer?"), key: "posa_is_offer", align: "center", required: !1 }
      ], (!this.selected_columns || this.selected_columns.length === 0) && (this.selected_columns = this.available_columns.filter((e) => !!e.required).map((e) => e.key)), this.updateHeadersFromSelection();
    },
    // Handle item dropped from ItemsSelector to ItemsTable
    handleItemDrop(e) {
      console.log("Item dropped:", e), this.add_item(e), this.eventBus.emit("show_message", {
        title: __("Item {0} added to invoice", [e.item_name]),
        color: "success"
      });
    },
    // Show visual feedback when item is being dragged over drop zone
    showDropFeedback(e) {
      const t = this.$el.querySelector(".modern-items-table");
      t && (e ? t.classList.add("drag-over") : t.classList.remove("drag-over"));
    },
    openPackedItems(e) {
      this.packed_dialog_items = this.packed_items.filter((t) => t.bundle_id === e), this.show_packed_dialog = !0;
    },
    toggleColumnSelection() {
      this.temp_selected_columns = [...this.selected_columns], this.show_column_selector = !0;
    },
    cancelColumnSelection() {
      this.show_column_selector = !1;
    },
    updateHeadersFromSelection() {
      this.items_headers = this.available_columns.filter(
        (e) => this.selected_columns.includes(e.key) || e.required
      );
    },
    updateSelectedColumns() {
      this.selected_columns = [...this.temp_selected_columns], this.available_columns.filter((t) => t.required).map((t) => t.key).forEach((t) => {
        this.selected_columns.includes(t) || this.selected_columns.push(t);
      }), this.updateHeadersFromSelection(), this.saveColumnPreferences(), this.show_column_selector = !1;
    },
    saveColumnPreferences() {
      try {
        localStorage.setItem("posawesome_selected_columns", JSON.stringify(this.selected_columns));
      } catch (e) {
        console.error("Failed to save column preferences:", e);
      }
    },
    loadColumnPreferences() {
      try {
        const e = localStorage.getItem("posawesome_selected_columns");
        e && (this.selected_columns = JSON.parse(e));
      } catch (e) {
        console.error("Failed to load column preferences:", e);
      }
    },
    saveInvoiceHeight() {
      if (this.$refs.invoiceCard) {
        this.invoiceHeight = this.$refs.invoiceCard.clientHeight + "px";
        try {
          localStorage.setItem("posawesome_invoice_height", this.invoiceHeight);
        } catch (e) {
          console.error("Failed to save invoice height:", e);
        }
      }
    },
    loadInvoiceHeight() {
      try {
        const e = localStorage.getItem("posawesome_invoice_height");
        e ? this.invoiceHeight = e : this.invoiceHeight = getComputedStyle(document.documentElement).getPropertyValue("--container-height") || "68vh";
      } catch (e) {
        console.error("Failed to load invoice height:", e), this.invoiceHeight = getComputedStyle(document.documentElement).getPropertyValue("--container-height") || "68vh";
      }
    },
    makeid(e) {
      let t = "";
      const n = "abcdefghijklmnopqrstuvwxyz0123456789", a = n.length;
      for (var r = 0; r < e; r++)
        t += n.charAt(Math.floor(Math.random() * a));
      return t;
    },
    handleExpandedUpdate(e) {
      this.expanded = Array.isArray(e) ? e.slice(-1) : [];
    },
    print_draft_invoice() {
      if (!this.pos_profile.posa_allow_print_draft_invoices) {
        this.eventBus.emit("show_message", {
          title: __("You are not allowed to print draft invoices"),
          color: "error"
        });
        return;
      }
      let e = this.invoice_doc.name;
      frappe.run_serially([
        () => {
          const t = this.save_and_clear_invoice();
          e = t.name ? t.name : e;
        },
        () => {
          this.load_print_page(e);
        }
      ]);
    },
    async set_delivery_charges() {
      var e = this;
      if (!this.pos_profile || !this.customer || !this.pos_profile.posa_use_delivery_charges) {
        this.delivery_charges = [], this.delivery_charges_rate = 0, this.selected_delivery_charge = "";
        return;
      }
      this.delivery_charges_rate = 0, this.selected_delivery_charge = "";
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.offers.get_applicable_delivery_charges",
          args: {
            company: this.pos_profile.company,
            pos_profile: this.pos_profile.name,
            customer: this.customer
          }
        });
        t.message && t.message.length && (console.log(t.message), e.delivery_charges = t.message);
      } catch (t) {
        console.error("Failed to fetch delivery charges", t);
      }
    },
    deliveryChargesFilter(e, t, n) {
      const a = n.raw;
      console.log("dl charges", a);
      const r = a.name.toLowerCase(), i = t.toLowerCase();
      return r.indexOf(i) > -1;
    },
    update_delivery_charges() {
      this.selected_delivery_charge ? this.delivery_charges_rate = this.selected_delivery_charge.rate : this.delivery_charges_rate = 0;
    },
    updatePostingDate(e) {
      e && (this.posting_date = e, this.$forceUpdate());
    },
    // Override setFormatedFloat for qty field to handle stock limits and return mode
    setFormatedQty(e, t, n, a, r) {
      let i = this.setFormatedFloat(e, t, n, a, r);
      return e.is_stock_item && e.max_qty !== void 0 && this.flt(e[t]) > this.flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e[t] = e.max_qty, i = e.max_qty, this.eventBus.emit("show_message", {
        title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
          this.formatFloat(e.max_qty)
        ]),
        color: "error"
      })) : this.eventBus.emit("show_message", {
        title: __("Stock is lower than requested. Proceeding may create negative stock."),
        color: "warning"
      })), this.isReturnInvoice && i > 0 && (i = -Math.abs(i), e[t] = i), this.calc_stock_qty(e, e[t]), t === "qty" && e.is_bundle && this.packed_items.filter((o) => o.bundle_id === e.bundle_id).forEach((o) => {
        o.qty = e.qty * (o.child_qty_per_bundle || 1), this.calc_stock_qty(o, o.qty);
      }), i;
    },
    async fetch_available_currencies() {
      try {
        console.log("Fetching available currencies...");
        const e = await frappe.call({
          method: "posawesome.posawesome.api.invoices.get_available_currencies"
        });
        if (e.message) {
          console.log("Received currencies:", e.message);
          const t = this.pos_profile.currency;
          return this.available_currencies = e.message.map((n) => ({
            value: n.name,
            title: n.name
          })), this.available_currencies.sort((n, a) => n.value === t ? -1 : a.value === t ? 1 : n.value.localeCompare(a.value)), this.selected_currency || (this.selected_currency = t), this.available_currencies;
        }
        return [];
      } catch (e) {
        console.error("Error fetching currencies:", e);
        const t = this.pos_profile.currency;
        return this.available_currencies = [
          {
            value: t,
            title: t
          }
        ], this.selected_currency = t, this.available_currencies;
      }
    },
    async fetch_price_lists() {
      if (this.pos_profile.posa_enable_price_list_dropdown)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.utilities.get_selling_price_lists"
          });
          e && e.message && (this.price_lists = e.message.map((t) => t.name));
        } catch (e) {
          console.error("Failed fetching price lists", e), this.price_lists = [this.pos_profile.selling_price_list];
        }
      else
        this.price_lists = [this.pos_profile.selling_price_list];
      this.selected_price_list || (this.selected_price_list = this.pos_profile.selling_price_list);
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.invoices.get_price_list_currency",
          args: { price_list: this.selected_price_list }
        });
        e && e.message && (this.price_list_currency = e.message);
      } catch (e) {
        console.error("Failed fetching price list currency", e);
      }
      return this.price_lists;
    },
    async update_currency(e) {
      e && (this.selected_currency = e, await this.update_currency_and_rate());
    },
    update_exchange_rate() {
      (!this.exchange_rate || this.exchange_rate <= 0) && (this.exchange_rate = 1), this.eventBus.emit("update_currency", {
        currency: this.selected_currency || this.pos_profile.currency,
        exchange_rate: this.exchange_rate
      }), this.update_item_rates();
    },
    update_conversion_rate() {
      (!this.conversion_rate || this.conversion_rate <= 0) && (this.conversion_rate = 1), this.sync_exchange_rate();
    },
    update_item_rates() {
      console.log("Updating item rates with exchange rate:", this.exchange_rate), this.items.forEach((e) => {
        if (e._skip_calc = !0, !e.base_rate) {
          console.log(`Setting base rates for ${e.item_code} for the first time`);
          const n = this.price_list_currency || this.pos_profile.currency;
          this.selected_currency === n ? (e.base_rate = e.rate, e.base_price_list_rate = e.price_list_rate, e.base_discount_amount = e.discount_amount || 0) : (e.base_rate = e.rate / this.exchange_rate, e.base_price_list_rate = e.price_list_rate / this.exchange_rate, e.base_discount_amount = (e.discount_amount || 0) / this.exchange_rate);
        }
        const t = this.price_list_currency || this.pos_profile.currency;
        if (this.selected_currency === t)
          console.log(`Restoring rates for ${e.item_code} from base rates`), e.price_list_rate = e.base_price_list_rate, e.rate = e.base_rate, e.discount_amount = e.base_discount_amount;
        else if (e.original_currency === this.selected_currency)
          console.log(`Using original currency rates for ${e.item_code}`), e.price_list_rate = e.base_price_list_rate, e.rate = e.base_rate, e.discount_amount = e.base_discount_amount;
        else {
          console.log(`Converting rates for ${e.item_code} to ${this.selected_currency}`);
          const n = this.flt(
            e.base_price_list_rate * this.exchange_rate,
            this.currency_precision
          ), a = this.flt(
            e.base_rate * this.exchange_rate,
            this.currency_precision
          ), r = this.flt(
            e.base_discount_amount * this.exchange_rate,
            this.currency_precision
          );
          e.price_list_rate = n < 1e-6 ? 0 : n, e.rate = a < 1e-6 ? 0 : a, e.discount_amount = r < 1e-6 ? 0 : r;
        }
        e.amount = this.flt(e.qty * e.rate, this.currency_precision), e.base_amount = this.flt(e.qty * e.base_rate, this.currency_precision), console.log(`Updated rates for ${e.item_code}:`, {
          price_list_rate: e.price_list_rate,
          base_price_list_rate: e.base_price_list_rate,
          rate: e.rate,
          base_rate: e.base_rate,
          discount: e.discount_amount,
          base_discount: e.base_discount_amount,
          amount: e.amount,
          base_amount: e.base_amount
        }), this.calc_item_price(e);
      }), this.$forceUpdate();
    },
    formatCurrency(e, t = null) {
      const n = t ?? this.currency_precision;
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, n);
    },
    flt(e, t = null) {
      t === null && (t = this.float_precision);
      const n = Number(e);
      return isNaN(n) ? 0 : Math.abs(n) < 1e-6 ? n : Number((n || 0).toFixed(t));
    },
    // Update currency and exchange rate when currency is changed
    async update_currency_and_rate() {
      if (!this.selected_currency) return;
      const e = this.company && this.company.default_currency || this.pos_profile.currency, t = this.price_list_currency || e;
      try {
        if (this.selected_currency === t)
          this.exchange_rate = 1;
        else {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.invoices.fetch_exchange_rate_pair",
            args: {
              from_currency: t,
              to_currency: this.selected_currency
            }
          });
          n && n.message && (this.exchange_rate = n.message.exchange_rate);
        }
        if (this.selected_currency === e)
          this.conversion_rate = 1, this.exchange_rate_date = this.formatDateForBackend(this.posting_date_display);
        else {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.invoices.fetch_exchange_rate_pair",
            args: {
              from_currency: this.selected_currency,
              to_currency: e
            }
          });
          if (n && n.message) {
            this.conversion_rate = n.message.exchange_rate, this.exchange_rate_date = n.message.date;
            const a = this.formatDateForBackend(this.posting_date_display);
            this.exchange_rate_date && a !== this.exchange_rate_date && this.eventBus.emit("show_message", {
              title: __(
                "Exchange rate date " + this.exchange_rate_date + " differs from posting date " + a
              ),
              color: "warning"
            });
          }
        }
      } catch (n) {
        console.error("Error updating currency:", n), this.eventBus.emit("show_message", {
          title: "Error updating currency",
          color: "error"
        });
      }
      if (this.sync_exchange_rate(), this.items.length) {
        const n = this.get_invoice_doc();
        n.currency = this.selected_currency, n.price_list_currency = t || this.pos_profile.currency, n.conversion_rate = this.conversion_rate, n.plc_conversion_rate = this.exchange_rate;
        try {
          await this.update_invoice(n);
        } catch (a) {
          console.error("Error updating invoice currency:", a), this.eventBus.emit("show_message", {
            title: "Error updating currency",
            color: "error"
          });
        }
      }
    },
    async update_exchange_rate_on_server() {
      if (this.conversion_rate) {
        if (!this.items.length) {
          this.sync_exchange_rate();
          return;
        }
        const e = this.get_invoice_doc();
        e.conversion_rate = this.conversion_rate, e.plc_conversion_rate = this.exchange_rate;
        try {
          const t = await this.update_invoice(e);
          if (t && t.exchange_rate_date) {
            this.exchange_rate_date = t.exchange_rate_date;
            const n = this.formatDateForBackend(this.posting_date_display);
            n !== this.exchange_rate_date && this.eventBus.emit("show_message", {
              title: __(
                "Exchange rate date " + this.exchange_rate_date + " differs from posting date " + n
              ),
              color: "warning"
            });
          }
          this.sync_exchange_rate();
        } catch (t) {
          console.error("Error updating exchange rate:", t), this.eventBus.emit("show_message", {
            title: "Error updating exchange rate",
            color: "error"
          });
        }
      }
    },
    sync_exchange_rate() {
      (!this.exchange_rate || this.exchange_rate <= 0) && (this.exchange_rate = 1), (!this.conversion_rate || this.conversion_rate <= 0) && (this.conversion_rate = 1), this.eventBus.emit("update_currency", {
        currency: this.selected_currency || this.pos_profile.currency,
        exchange_rate: this.exchange_rate,
        conversion_rate: this.conversion_rate
      }), this.update_item_rates();
    },
    // Add new rounding function
    roundAmount(e) {
      if (this.pos_profile.disable_rounded_total)
        return this.flt(e, this.currency_precision);
      const t = this.price_list_currency || this.pos_profile.currency;
      return this.pos_profile.posa_allow_multi_currency && this.selected_currency !== t ? this.flt(e, 2) : Math.round(e);
    },
    // Increase quantity of an item (handles return logic)
    add_one(e) {
      if (this.isReturnInvoice)
        e.qty--;
      else {
        const t = e.qty + 1;
        if (e.is_stock_item && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty) && e.max_qty !== void 0 && t > e.max_qty) {
          e.qty = e.max_qty, this.calc_stock_qty(e, e.qty), this.eventBus.emit("show_message", {
            title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
              this.formatFloat(e.max_qty)
            ]),
            color: "error"
          });
          return;
        }
        e.qty = t;
      }
      e.qty == 0 && this.remove_item(e), this.calc_stock_qty(e, e.qty), e.is_bundle && this.packed_items.filter((t) => t.bundle_id === e.bundle_id).forEach((t) => {
        t.qty = e.qty * (t.child_qty_per_bundle || 1), this.calc_stock_qty(t, t.qty);
      }), this.$forceUpdate();
    },
    // Decrease quantity of an item (handles return logic)
    subtract_one(e) {
      this.isReturnInvoice ? e.qty++ : e.qty--, e.qty == 0 && this.remove_item(e), this.calc_stock_qty(e, e.qty), e.is_bundle && this.packed_items.filter((t) => t.bundle_id === e.bundle_id).forEach((t) => {
        t.qty = e.qty * (t.child_qty_per_bundle || 1), this.calc_stock_qty(t, t.qty);
      }), this.$forceUpdate();
    },
    // Handle item reordering from drag and drop
    handleItemReorder(e) {
      const { fromIndex: t, toIndex: n } = e;
      if (t === n) return;
      const a = [...this.items], [r] = a.splice(t, 1);
      a.splice(n, 0, r), this.items = a, this.eventBus.emit("show_message", {
        title: __("Item order updated"),
        color: "success"
      }), this.items.forEach((i, o) => {
        i.idx = o + 1;
      });
    },
    // Restaurant order methods
    async fetch_restaurant_order_types() {
      if (this.pos_profile.posa_enable_restaurant_mode)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_order_types"
          });
          e.message && (this.restaurant_order_types = e.message);
        } catch (e) {
          console.error("Failed to fetch restaurant order types", e);
        }
    },
    async fetch_available_tables() {
      if (this.pos_profile.posa_enable_restaurant_mode)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_available_tables"
          });
          e.message && (this.available_tables = e.message);
        } catch (e) {
          console.error("Failed to fetch available tables", e);
        }
    },
    update_order_type() {
      (!this.selected_order_type || !this.selected_order_type.requires_table) && (this.selected_table = null), this.selected_order_type && this.selected_order_type.requires_table && this.fetch_available_tables();
    },
    update_table_selection() {
      console.log("Table selected:", this.selected_table);
    },
    show_restaurant_orders() {
      this.eventBus.emit("open_restaurant_orders");
    },
    handle_save_and_clear() {
      this.pos_profile.posa_enable_restaurant_mode ? this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT" ? (console.log("Direct order mode detected - proceeding to payment"), this.show_payment()) : this.restaurant_add_items_context && this.restaurant_add_items_context.is_updating_order ? (console.log("Routing to update_existing_order for order update"), this.update_existing_order()) : (console.log("Routing to create_new_restaurant_order for new restaurant order"), this.create_new_restaurant_order()) : (console.log("Routing to save_and_clear_invoice for regular POS"), this.save_and_clear_invoice());
    },
    async submit_restaurant_order() {
      if (console.log("=== SUBMIT RESTAURANT ORDER DEBUG ==="), console.log("restaurant_add_items_context:", this.restaurant_add_items_context), console.log("is_updating_order:", this.restaurant_add_items_context?.is_updating_order), console.log("original_order:", this.restaurant_add_items_context?.original_order), console.log("=========================================="), !!this.validate_restaurant_selection()) {
        if (!this.customer) {
          this.eventBus.emit("show_message", {
            title: __("Please select a customer"),
            color: "error"
          });
          return;
        }
        if (!this.items.length) {
          this.eventBus.emit("show_message", {
            title: __("Please add items to the order"),
            color: "error"
          });
          return;
        }
        try {
          this.restaurant_add_items_context && this.restaurant_add_items_context.is_updating_order ? (console.log("Taking update path..."), await this.update_existing_order()) : (console.log("Taking create new order path..."), await this.create_new_restaurant_order());
        } catch (e) {
          console.error("Error submitting restaurant order:", e), this.eventBus.emit("show_message", {
            title: __("Error submitting order"),
            color: "error"
          });
        }
      }
    },
    async create_new_restaurant_order() {
      const e = this.get_invoice_doc();
      if (e.name) {
        const t = this.update_invoice(e);
        t && t.name && (this.eventBus.emit("show_message", {
          title: __("Order {0} updated successfully as draft", [t.name]),
          color: "success"
        }), this.clear_invoice());
      } else {
        const t = this.create_restaurant_order(e);
        t && t.name && (this.eventBus.emit("show_message", {
          title: __("Draft order {0} created successfully", [t.name]),
          color: "success"
        }), this.clear_invoice());
      }
    },
    async update_existing_order() {
      const e = this.restaurant_add_items_context.original_order, t = this.items.map((i) => ({
        item_code: i.item_code,
        item_name: i.item_name,
        qty: i.qty,
        rate: i.rate,
        uom: i.uom,
        warehouse: i.warehouse,
        description: i.description,
        discount_percentage: i.discount_percentage || 0,
        discount_amount: i.discount_amount || 0
      }));
      console.log("Adding items to order:", e, "with items:", t);
      const n = this.restaurant_add_items_context.order_status === 0, a = n ? "posawesome.posawesome.api.restaurant_orders.add_items_to_draft_order" : "posawesome.posawesome.api.restaurant_orders.add_items_to_existing_order";
      if (console.log(`Using API method: ${a} for ${n ? "draft" : "submitted"} order`), (await frappe.call({
        method: a,
        args: {
          order_name: e,
          items_data: t
        }
      })).message) {
        this.eventBus.emit("show_message", {
          title: __("Added {0} new items to order {1} successfully", [t.length, e]),
          color: "success"
        });
        try {
          const { printKot: i } = await import("./kot_print-MHdNXsuH.js"), o = {
            order_name: e,
            table_number: this.restaurant_add_items_context.table_number,
            order_type: this.restaurant_add_items_context.order_type,
            items: t.map((l) => ({
              item_name: l.item_name,
              qty: l.qty,
              notes: l.notes || ""
            })),
            timestamp: frappe.datetime.now_datetime(),
            is_additional: !0
            // Flag to indicate this is additional items KOT
          };
          await i(o);
        } catch (i) {
          console.error("Error printing KOT for additional items:", i);
        }
        this.clear_invoice(), this.restaurant_add_items_context = null;
      }
    },
    get_restaurant_invoice_doc() {
      const e = this.get_invoice_doc();
      return this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number), e;
    },
    validate_restaurant_selection() {
      return this.pos_profile.posa_enable_restaurant_mode ? !(this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT") && !this.selected_order_type ? (this.eventBus.emit("show_message", {
        title: __("Please select an Order Type before proceeding"),
        color: "error"
      }), !1) : this.selected_order_type && this.selected_order_type.requires_table && !this.selected_table ? (this.eventBus.emit("show_message", {
        title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
        color: "error"
      }), !1) : !0 : !0;
    },
    clear_restaurant_selection() {
      this.selected_order_type = null, this.selected_table = null, this.order_status = null, this.restaurant_add_items_context = null;
    },
    async set_restaurant_context(e) {
      try {
        if (console.log("=== SET RESTAURANT CONTEXT DEBUG ==="), console.log("Incoming context:", e), console.log("is_updating_order flag:", e.is_updating_order), console.log("====================================="), this.clear_invoice(), this.restaurant_add_items_context = e, console.log("Stored context after clear:", this.restaurant_add_items_context), e.customer && this.eventBus.emit("update_customer", e.customer), e.order_type) {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_order_types"
          });
          if (t.message) {
            const n = t.message.find((a) => a.order_type_name === e.order_type);
            n && (this.selected_order_type = n, console.log("Order type set:", n));
          }
        }
        if (e.table_number) {
          const t = await frappe.call({
            method: "posawesome.posawesome.doctype.restaurant_table.restaurant_table.get_all_tables"
          });
          if (t.message) {
            const n = t.message.find((a) => a.table_number === e.table_number);
            n ? (n.table_display = n.table_name ? `${n.table_number} - ${n.table_name}` : n.table_number, this.selected_table = n, console.log("Table set:", n)) : console.warn("Table not found:", e.table_number);
          }
        }
        setTimeout(() => {
          this.$forceUpdate();
        }, 100), console.log("Restaurant context set:", {
          order_type: this.selected_order_type?.order_type_name,
          table: this.selected_table?.table_number,
          customer: e.customer_name,
          is_updating_order: e.is_updating_order
        });
      } catch (t) {
        console.error("Error setting restaurant context:", t);
      }
    }
  },
  mounted() {
    this.loadColumnPreferences(), this.loadInvoiceHeight(), this.eventBus.on("item-drag-start", () => {
      this.showDropFeedback(!0);
    }), this.eventBus.on("item-drag-end", () => {
      this.showDropFeedback(!1);
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.company = e.company || null, this.customer = e.pos_profile.customer, this.pos_opening_shift = e.pos_opening_shift, this.stock_settings = e.stock_settings;
      const t = parseInt(e.pos_profile.posa_decimal_precision);
      isNaN(t) || (this.float_precision = t, this.currency_precision = t), this.pos_profile.posa_enable_restaurant_mode ? (this.invoiceType = "Order", this.invoiceTypes = ["Order"]) : this.invoiceType = this.pos_profile.posa_default_sales_order ? "Order" : "Invoice", this.initializeItemsHeaders(), this.pos_profile.posa_allow_multi_currency && this.fetch_available_currencies().then(async () => {
        this.selected_currency = this.pos_profile.currency, await this.update_currency_and_rate();
      }).catch((n) => {
        console.error("Error initializing currencies:", n), this.eventBus.emit("show_message", {
          title: __("Error loading currencies"),
          color: "error"
        });
      }), this.fetch_price_lists(), this.update_price_list(), this.pos_profile.posa_enable_restaurant_mode && (this.fetch_restaurant_order_types(), this.fetch_available_tables());
    }), this.eventBus.on("add_item", (e) => {
      this.add_item(e);
    }), this.eventBus.on("update_customer", (e) => {
      this.customer = e;
    }), this.eventBus.on("fetch_customer_details", () => {
      this.fetch_customer_details();
    }), this.eventBus.on("clear_invoice", () => {
      this.clear_invoice();
    }), this.eventBus.on("validate_restaurant_selection", () => {
      this.validate_restaurant_selection();
    }), this.eventBus.on("set_restaurant_context", (e) => {
      this.set_restaurant_context(e);
    }), this.eventBus.on("load_invoice", (e) => {
      this.load_invoice(e);
    }), this.eventBus.on("load_order", (e) => {
      this.new_order(e);
    }), this.eventBus.on("change_invoice_type", (e) => {
      console.log("Changing invoice type to:", e), this.invoiceType = e, e === "Invoice" ? this.invoiceTypes = ["Invoice"] : e === "Order" && (this.invoiceTypes = ["Order"]), this.$forceUpdate(), console.log("Invoice type changed and UI updated:", {
        invoiceType: this.invoiceType,
        invoiceTypes: this.invoiceTypes
      });
    }), this.eventBus.on("set_offers", (e) => {
      this.posOffers = e;
    }), this.eventBus.on("update_invoice_offers", (e) => {
      this.updateInvoiceOffers(e);
    }), this.eventBus.on("update_invoice_coupons", (e) => {
      this.posa_coupons = e, this.handelOffers();
    }), this.eventBus.on("set_all_items", (e) => {
      this.allItems = e, this.items.forEach((t) => {
        this.update_item_detail(t);
      });
    }), this.eventBus.on("load_return_invoice", (e) => {
      console.log("Invoice component received load_return_invoice event with data:", e), this.load_invoice(e.invoice_doc), this.invoiceType = "Return", this.invoiceTypes = ["Return"], this.invoice_doc.is_return = 1, this.items && this.items.length && this.items.forEach((t) => {
        t.qty > 0 && (t.qty = -Math.abs(t.qty)), t.stock_qty > 0 && (t.stock_qty = -Math.abs(t.stock_qty));
      }), e.return_doc ? (console.log("Return against existing invoice:", e.return_doc.name), this.discount_amount = e.return_doc.discount_amount || 0, this.additional_discount = e.return_doc.discount_amount || 0, this.return_doc = e.return_doc, this.invoice_doc.return_against = e.return_doc.name) : (console.log("Return without invoice reference"), this.discount_amount = 0, this.additional_discount = 0, this.additional_discount_percentage = 0), console.log("Invoice state after loading return:", {
        invoiceType: this.invoiceType,
        is_return: this.invoice_doc.is_return,
        items: this.items.length,
        customer: this.customer
      });
    }), this.eventBus.on("set_new_line", (e) => {
      this.new_line = e;
    }), this.pos_profile.posa_allow_multi_currency && this.fetch_available_currencies(), this.eventBus.on("reset_posting_date", () => {
      this.posting_date = frappe.datetime.nowdate();
    }), this.eventBus.on("calc_uom", this.calc_uom), this.eventBus.on("item-drag-start", () => {
      this.showDropFeedback(!0);
    }), this.eventBus.on("item-drag-end", () => {
      this.showDropFeedback(!1);
    });
  },
  // Cleanup event listeners before component is destroyed
  beforeUnmount() {
    this.eventBus.off("register_pos_profile"), this.eventBus.off("add_item"), this.eventBus.off("update_customer"), this.eventBus.off("fetch_customer_details"), this.eventBus.off("clear_invoice"), this.eventBus.off("reset_posting_date"), this.eventBus.off("change_invoice_type");
  },
  // Register global keyboard shortcuts when component is created
  created() {
    document.addEventListener("keydown", this.shortOpenPayment.bind(this)), document.addEventListener("keydown", this.shortDeleteFirstItem.bind(this)), document.addEventListener("keydown", this.shortOpenFirstItem.bind(this)), document.addEventListener("keydown", this.shortSelectDiscount.bind(this));
  },
  // Remove global keyboard shortcuts when component is unmounted
  unmounted() {
    document.removeEventListener("keydown", this.shortOpenPayment), document.removeEventListener("keydown", this.shortDeleteFirstItem), document.removeEventListener("keydown", this.shortOpenFirstItem), document.removeEventListener("keydown", this.shortSelectDiscount);
  },
  watch: fne
}, pne = { class: "pa-0" }, vne = { class: "dynamic-padding" }, gne = { class: "items-table-wrapper" }, yne = { class: "column-selector-container" }, bne = { class: "text-caption mt-2" }, wne = { class: "amount-value" };
function kne(e, t, n, a, r, i) {
  const o = Q("CancelSaleDialog"), l = Q("v-alert"), s = Q("Customer"), d = Q("v-col"), u = Q("v-select"), f = Q("v-row"), h = Q("RestaurantOrderType"), g = Q("DeliveryCharges"), v = Q("PostingDateRow"), w = Q("MultiCurrencyRow"), b = Q("v-btn"), p = Q("v-spacer"), y = Q("v-card-title"), S = Q("v-divider"), E = Q("v-switch"), C = Q("v-card-text"), D = Q("v-card-actions"), P = Q("v-card"), O = Q("v-dialog"), T = Q("ItemsTable"), A = Q("v-text-field"), V = Q("v-data-table"), M = Q("InvoiceSummary");
  return ee(), Oe("div", pne, [
    _(o, {
      modelValue: r.cancel_dialog,
      "onUpdate:modelValue": t[0] || (t[0] = (B) => r.cancel_dialog = B),
      onConfirm: e.cancel_invoice
    }, null, 8, ["modelValue", "onConfirm"]),
    _(P, {
      ref: "invoiceCard",
      style: Xe({
        height: r.invoiceHeight || "var(--container-height)",
        maxHeight: r.invoiceHeight || "var(--container-height)",
        backgroundColor: i.isDarkTheme ? "#121212" : "",
        resize: "vertical",
        overflow: "auto"
      }),
      class: Ie([
        "cards my-0 py-0 mt-3 resizable",
        i.isDarkTheme ? "" : "bg-grey-lighten-5",
        { "return-mode": e.isReturnInvoice },
        { "edit-mode": i.isEditingExistingOrder }
      ]),
      onMouseup: i.saveInvoiceHeight,
      onTouchend: i.saveInvoiceHeight
    }, {
      default: x(() => [
        I("div", vne, [
          r.pos_profile.create_pos_invoice_instead_of_sales_invoice ? (ee(), Re(l, {
            key: 0,
            type: "info",
            density: "compact",
            class: "mb-2"
          }, {
            default: x(() => [
              ae(q(e.__("Invoices saved as POS Invoices")), 1)
            ]),
            _: 1
          })) : ye("", !0),
          _(f, {
            align: "center",
            class: "items px-3 py-2"
          }, {
            default: x(() => [
              _(d, {
                cols: r.pos_profile.posa_allow_sales_order && !r.pos_profile.posa_enable_restaurant_mode ? 9 : 12,
                class: "pb-0 pr-0"
              }, {
                default: x(() => [
                  _(s)
                ]),
                _: 1
              }, 8, ["cols"]),
              r.pos_profile.posa_allow_sales_order && !r.pos_profile.posa_enable_restaurant_mode ? (ee(), Re(d, {
                key: 0,
                cols: "3",
                class: "pb-4"
              }, {
                default: x(() => [
                  _(u, {
                    density: "compact",
                    "hide-details": "",
                    variant: "solo",
                    color: "primary",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    items: r.invoiceTypes,
                    label: e.frappe._("Type"),
                    modelValue: r.invoiceType,
                    "onUpdate:modelValue": t[1] || (t[1] = (B) => r.invoiceType = B),
                    disabled: r.invoiceType == "Return"
                  }, null, 8, ["bg-color", "items", "label", "modelValue", "disabled"])
                ]),
                _: 1
              })) : ye("", !0)
            ]),
            _: 1
          }),
          _(h, {
            pos_profile: r.pos_profile,
            order_types: r.restaurant_order_types,
            available_tables: r.available_tables,
            selected_order_type: r.selected_order_type,
            selected_table: r.selected_table,
            order_status: r.order_status,
            readonly: e.readonly,
            "onUpdate:selected_order_type": t[2] || (t[2] = (B) => {
              r.selected_order_type = B, i.update_order_type();
            }),
            "onUpdate:selected_table": t[3] || (t[3] = (B) => {
              r.selected_table = B, i.update_table_selection();
            })
          }, null, 8, ["pos_profile", "order_types", "available_tables", "selected_order_type", "selected_table", "order_status", "readonly"]),
          _(g, {
            pos_profile: r.pos_profile,
            delivery_charges: r.delivery_charges,
            selected_delivery_charge: r.selected_delivery_charge,
            delivery_charges_rate: r.delivery_charges_rate,
            deliveryChargesFilter: i.deliveryChargesFilter,
            formatCurrency: i.formatCurrency,
            currencySymbol: e.currencySymbol,
            readonly: e.readonly,
            "onUpdate:selected_delivery_charge": t[4] || (t[4] = (B) => {
              r.selected_delivery_charge = B, i.update_delivery_charges();
            })
          }, null, 8, ["pos_profile", "delivery_charges", "selected_delivery_charge", "delivery_charges_rate", "deliveryChargesFilter", "formatCurrency", "currencySymbol", "readonly"]),
          _(v, {
            pos_profile: r.pos_profile,
            posting_date_display: r.posting_date_display,
            customer_balance: r.customer_balance,
            "price-list": r.selected_price_list,
            "price-lists": r.price_lists,
            formatCurrency: i.formatCurrency,
            "onUpdate:posting_date_display": t[5] || (t[5] = (B) => {
              r.posting_date_display = B;
            }),
            "onUpdate:priceList": t[6] || (t[6] = (B) => {
              r.selected_price_list = B;
            })
          }, null, 8, ["pos_profile", "posting_date_display", "customer_balance", "price-list", "price-lists", "formatCurrency"]),
          _(w, {
            pos_profile: r.pos_profile,
            selected_currency: r.selected_currency,
            plc_conversion_rate: r.exchange_rate,
            conversion_rate: r.conversion_rate,
            available_currencies: r.available_currencies,
            isNumber: e.isNumber,
            price_list_currency: r.price_list_currency,
            "onUpdate:selected_currency": t[7] || (t[7] = (B) => {
              r.selected_currency = B, i.update_currency(B);
            }),
            "onUpdate:plc_conversion_rate": t[8] || (t[8] = (B) => {
              r.exchange_rate = B, i.update_exchange_rate();
            }),
            "onUpdate:conversion_rate": t[9] || (t[9] = (B) => {
              r.conversion_rate = B, i.update_conversion_rate();
            })
          }, null, 8, ["pos_profile", "selected_currency", "plc_conversion_rate", "conversion_rate", "available_currencies", "isNumber", "price_list_currency"]),
          I("div", gne, [
            I("div", yne, [
              _(b, {
                density: "compact",
                variant: "text",
                color: "primary",
                "prepend-icon": "mdi-cog-outline",
                onClick: i.toggleColumnSelection,
                class: "column-selector-btn"
              }, {
                default: x(() => [
                  ae(q(e.__("Columns")), 1)
                ]),
                _: 1
              }, 8, ["onClick"]),
              _(O, {
                modelValue: r.show_column_selector,
                "onUpdate:modelValue": t[12] || (t[12] = (B) => r.show_column_selector = B),
                "max-width": "500px"
              }, {
                default: x(() => [
                  _(P, null, {
                    default: x(() => [
                      _(y, { class: "text-h6 pa-4 d-flex align-center" }, {
                        default: x(() => [
                          I("span", null, q(e.__("Select Columns to Display")), 1),
                          _(p),
                          _(b, {
                            icon: "mdi-close",
                            variant: "text",
                            density: "compact",
                            onClick: t[10] || (t[10] = (B) => r.show_column_selector = !1)
                          })
                        ]),
                        _: 1
                      }),
                      _(S),
                      _(C, { class: "pa-4" }, {
                        default: x(() => [
                          _(f, { dense: "" }, {
                            default: x(() => [
                              (ee(!0), Oe(Qe, null, rn(r.available_columns.filter((B) => !B.required), (B) => (ee(), Re(d, {
                                cols: "12",
                                key: B.key
                              }, {
                                default: x(() => [
                                  _(E, {
                                    modelValue: r.temp_selected_columns,
                                    "onUpdate:modelValue": t[11] || (t[11] = (N) => r.temp_selected_columns = N),
                                    label: B.title,
                                    value: B.key,
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "column-switch mb-1",
                                    disabled: B.required
                                  }, null, 8, ["modelValue", "label", "value", "disabled"])
                                ]),
                                _: 2
                              }, 1024))), 128))
                            ]),
                            _: 1
                          }),
                          I("div", bne, q(e.__("Required columns cannot be hidden")), 1)
                        ]),
                        _: 1
                      }),
                      _(D, { class: "pa-4 pt-0" }, {
                        default: x(() => [
                          _(b, {
                            color: "error",
                            variant: "text",
                            onClick: i.cancelColumnSelection
                          }, {
                            default: x(() => [
                              ae(q(e.__("Cancel")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"]),
                          _(p),
                          _(b, {
                            color: "primary",
                            variant: "tonal",
                            onClick: i.updateSelectedColumns
                          }, {
                            default: x(() => [
                              ae(q(e.__("Apply")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }, 8, ["modelValue"])
            ]),
            _(T, {
              ref: "itemsTable",
              headers: r.items_headers,
              items: r.items,
              expanded: r.expanded,
              "onUpdate:expanded": [
                t[13] || (t[13] = (B) => r.expanded = B),
                i.handleExpandedUpdate
              ],
              itemsPerPage: r.itemsPerPage,
              itemSearch: e.itemSearch,
              pos_profile: r.pos_profile,
              invoice_doc: r.invoice_doc,
              invoiceType: r.invoiceType,
              stock_settings: r.stock_settings,
              displayCurrency: e.displayCurrency,
              formatFloat: e.formatFloat,
              formatCurrency: i.formatCurrency,
              currencySymbol: e.currencySymbol,
              isNumber: e.isNumber,
              setFormatedQty: i.setFormatedQty,
              setFormatedCurrency: e.setFormatedCurrency,
              calcPrices: e.calc_prices,
              calcUom: e.calc_uom,
              setSerialNo: e.set_serial_no,
              setBatchQty: e.set_batch_qty,
              validateDueDate: e.validate_due_date,
              removeItem: e.remove_item,
              subtractOne: i.subtract_one,
              addOne: i.add_one,
              toggleOffer: e.toggleOffer,
              changePriceListRate: e.change_price_list_rate,
              isNegative: e.isNegative,
              onReorderItems: i.handleItemReorder,
              onAddItemFromDrag: i.handleItemDrop,
              onShowDropFeedback: i.showDropFeedback,
              onItemDropped: t[14] || (t[14] = (B) => i.showDropFeedback(!1)),
              onViewPacked: i.openPackedItems
            }, null, 8, ["headers", "items", "expanded", "itemsPerPage", "itemSearch", "pos_profile", "invoice_doc", "invoiceType", "stock_settings", "displayCurrency", "formatFloat", "formatCurrency", "currencySymbol", "isNumber", "setFormatedQty", "setFormatedCurrency", "calcPrices", "calcUom", "setSerialNo", "setBatchQty", "validateDueDate", "removeItem", "subtractOne", "addOne", "toggleOffer", "changePriceListRate", "isNegative", "onUpdate:expanded", "onReorderItems", "onAddItemFromDrag", "onShowDropFeedback", "onViewPacked"]),
            _(O, {
              modelValue: r.show_packed_dialog,
              "onUpdate:modelValue": t[16] || (t[16] = (B) => r.show_packed_dialog = B),
              "max-width": "800px"
            }, {
              default: x(() => [
                _(P, null, {
                  default: x(() => [
                    _(y, { class: "d-flex align-center" }, {
                      default: x(() => [
                        I("span", null, q(e.__("Packing List")) + " (" + q(r.packed_dialog_items.length) + ")", 1),
                        _(p),
                        _(b, {
                          icon: "mdi-close",
                          variant: "text",
                          density: "compact",
                          onClick: t[15] || (t[15] = (B) => r.show_packed_dialog = !1)
                        })
                      ]),
                      _: 1
                    }),
                    _(S),
                    _(C, null, {
                      default: x(() => [
                        _(l, {
                          type: "warning",
                          density: "compact",
                          class: "mb-2"
                        }, {
                          default: x(() => [
                            ae(q(e.__(
                              "For 'Product Bundle' items, Warehouse, Serial No and Batch No will be considered from the 'Packing List' table. If Warehouse and Batch No are same for all packing items for any 'Product Bundle' item, those values can be entered in the main Item table; values will be copied to 'Packing List' table."
                            )), 1)
                          ]),
                          _: 1
                        }),
                        _(V, {
                          headers: r.packedItemsHeaders,
                          items: r.packed_dialog_items,
                          class: "elevation-1",
                          "hide-default-footer": "",
                          density: "compact"
                        }, {
                          "item.index": x(({ index: B }) => [
                            ae(q(B + 1), 1)
                          ]),
                          "item.qty": x(({ item: B }) => [
                            ae(q(e.formatFloat(B.qty)), 1)
                          ]),
                          "item.rate": x(({ item: B }) => [
                            I("span", wne, q(e.formatFloat(B.rate)), 1)
                          ]),
                          "item.warehouse": x(({ item: B }) => [
                            _(A, {
                              modelValue: B.warehouse,
                              "onUpdate:modelValue": (N) => B.warehouse = N,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          "item.batch_no": x(({ item: B }) => [
                            _(A, {
                              modelValue: B.batch_no,
                              "onUpdate:modelValue": (N) => B.batch_no = N,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          "item.serial_no": x(({ item: B }) => [
                            _(A, {
                              modelValue: B.serial_no,
                              "onUpdate:modelValue": (N) => B.serial_no = N,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          _: 1
                        }, 8, ["headers", "items"])
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }, 8, ["modelValue"])
          ])
        ])
      ]),
      _: 1
    }, 8, ["style", "class", "onMouseup", "onTouchend"]),
    _(M, {
      pos_profile: r.pos_profile,
      invoice_doc: r.invoice_doc,
      total_qty: e.total_qty,
      additional_discount: r.additional_discount,
      additional_discount_percentage: r.additional_discount_percentage,
      total_items_discount_amount: e.total_items_discount_amount,
      subtotal: e.subtotal,
      displayCurrency: e.displayCurrency,
      formatFloat: e.formatFloat,
      formatCurrency: i.formatCurrency,
      currencySymbol: e.currencySymbol,
      discount_percentage_offer_name: r.discount_percentage_offer_name,
      isNumber: e.isNumber,
      restaurant_add_items_context: r.restaurant_add_items_context,
      "onUpdate:additional_discount": t[17] || (t[17] = (B) => r.additional_discount = B),
      "onUpdate:additional_discount_percentage": t[18] || (t[18] = (B) => r.additional_discount_percentage = B),
      onUpdate_discount_umount: e.update_discount_umount,
      onSaveAndClear: i.handle_save_and_clear,
      onLoadDrafts: e.get_draft_invoices,
      onSelectOrder: e.get_draft_orders,
      onShowOrders: i.show_restaurant_orders,
      onSubmitOrder: i.submit_restaurant_order,
      onCancelSale: t[19] || (t[19] = (B) => r.cancel_dialog = !0),
      onOpenReturns: e.open_returns,
      onPrintDraft: i.print_draft_invoice,
      onShowPayment: e.show_payment
    }, null, 8, ["pos_profile", "invoice_doc", "total_qty", "additional_discount", "additional_discount_percentage", "total_items_discount_amount", "subtotal", "displayCurrency", "formatFloat", "formatCurrency", "currencySymbol", "discount_percentage_offer_name", "isNumber", "restaurant_add_items_context", "onUpdate_discount_umount", "onSaveAndClear", "onLoadDrafts", "onSelectOrder", "onShowOrders", "onSubmitOrder", "onOpenReturns", "onPrintDraft", "onShowPayment"])
  ]);
}
const Sne = /* @__PURE__ */ nn(_ne, [["render", kne], ["__scopeId", "data-v-fd3f0d9a"]]), Cne = {
  mixins: [Oi],
  props: ["dialog"],
  data() {
    return {
      isOpen: this.dialog ? this.dialog : !1,
      dialog_data: {},
      is_loading: !1,
      companies: [],
      company: "",
      pos_profiles_data: [],
      pos_profiles: [],
      pos_profile: "",
      payments_method_data: [],
      payments_methods: [],
      payments_methods_headers: [
        {
          title: __("Mode of Payment"),
          align: "start",
          sortable: !1,
          value: "mode_of_payment"
        },
        {
          title: __("Opening Amount"),
          value: "amount",
          align: "center",
          sortable: !1
        }
      ],
      itemsPerPage: 100,
      max25chars: (e) => e.length <= 12 || "Input too long!",
      pagination: {},
      snack: !1,
      snackColor: "",
      snackText: ""
    };
  },
  watch: {
    company(e) {
      this.pos_profiles = [], this.pos_profiles_data.forEach((t) => {
        t.company === e && this.pos_profiles.push(t.name), this.pos_profiles.length ? this.pos_profile = this.pos_profiles[0] : this.pos_profile = "";
      });
    },
    pos_profile(e) {
      this.payments_methods = [], this.payments_method_data.forEach((t) => {
        t.parent === e && this.payments_methods.push({
          mode_of_payment: t.mode_of_payment,
          amount: 0,
          currency: t.currency
        });
      });
    }
  },
  methods: {
    close_opening_dialog() {
      this.eventBus.emit("close_opening_dialog");
    },
    async get_opening_dialog_data() {
      const e = this;
      await sm, await ea();
      const t = j9();
      if (t)
        try {
          e.companies = t.companies.map((n) => n.name), e.pos_profiles_data = t.pos_profiles_data || [], e.payments_method_data = t.payments_method || [], e.company = e.companies[0] || "";
        } catch (n) {
          console.error("Failed to parse opening dialog cache", n);
        }
      frappe.call({
        method: "posawesome.posawesome.api.shifts.get_opening_dialog_data",
        args: {},
        callback: function(n) {
          if (n.message) {
            e.companies = n.message.companies.map((a) => a.name), e.pos_profiles_data = n.message.pos_profiles_data, e.payments_method_data = n.message.payments_method, e.company = e.companies[0] || "";
            try {
              K9(n.message);
            } catch (a) {
              console.error("Failed to cache opening dialog data", a);
            }
          }
        }
      });
    },
    submit_dialog() {
      if (!this.payments_methods.length || !this.company || !this.pos_profile)
        return;
      this.is_loading = !0;
      const e = this;
      return frappe.call("posawesome.posawesome.api.shifts.create_opening_voucher", {
        pos_profile: this.pos_profile,
        company: this.company,
        balance_details: this.payments_methods
      }).then((t) => {
        if (t.message) {
          e.eventBus.emit("register_pos_data", t.message), e.eventBus.emit("set_company", t.message.company);
          try {
            a1(t.message);
          } catch (n) {
            console.error("Failed to cache opening data", n);
          }
          e.close_opening_dialog(), e.is_loading = !1;
        }
      });
    },
    go_desk() {
      frappe.set_route("/"), location.reload();
    }
  },
  mounted() {
    this.get_opening_dialog_data();
  },
  beforeUnmount() {
  }
}, Ane = { class: "header-content" }, xne = { class: "header-icon-wrapper" }, Tne = { class: "header-text" }, Ine = { class: "header-title" }, Ene = { class: "header-subtitle" }, Pne = { class: "section-header-compact" }, One = { class: "section-title-compact" };
function Dne(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-card-title"), s = Q("v-autocomplete"), d = Q("v-col"), u = Q("v-text-field"), f = Q("v-data-table"), h = Q("v-row"), g = Q("v-container"), v = Q("v-card-text"), w = Q("v-btn"), b = Q("v-spacer"), p = Q("v-card-actions"), y = Q("v-card"), S = Q("v-dialog");
  return ee(), Re(h, { justify: "center" }, {
    default: x(() => [
      _(S, {
        modelValue: r.isOpen,
        "onUpdate:modelValue": t[2] || (t[2] = (E) => r.isOpen = E),
        persistent: "",
        "max-width": "800px",
        "max-height": "90vh"
      }, {
        default: x(() => [
          _(y, {
            elevation: "8",
            class: "opening-dialog-card"
          }, {
            default: x(() => [
              _(l, { class: "opening-dialog-header" }, {
                default: x(() => [
                  I("div", Ane, [
                    I("div", xne, [
                      _(o, { class: "header-icon" }, {
                        default: x(() => t[3] || (t[3] = [
                          ae("mdi-cash-plus")
                        ])),
                        _: 1,
                        __: [3]
                      })
                    ]),
                    I("div", Tne, [
                      I("h5", Ine, q(e.__("Create POS Opening Shift")), 1),
                      I("p", Ene, q(e.__("Initialize your shift with opening balances")), 1)
                    ])
                  ])
                ]),
                _: 1
              }),
              _(v, { class: "opening-dialog-content" }, {
                default: x(() => [
                  _(g, { class: "pa-0" }, {
                    default: x(() => [
                      _(h, null, {
                        default: x(() => [
                          _(d, {
                            cols: "12",
                            md: "6",
                            class: "form-field"
                          }, {
                            default: x(() => [
                              _(s, {
                                items: r.companies,
                                label: e.frappe._("Company"),
                                modelValue: r.company,
                                "onUpdate:modelValue": t[0] || (t[0] = (E) => r.company = E),
                                required: "",
                                variant: "outlined",
                                color: "primary",
                                density: "compact",
                                "prepend-inner-icon": "mdi-domain",
                                class: Ie(["enhanced-field", { "field-focused": r.company }])
                              }, null, 8, ["items", "label", "modelValue", "class"])
                            ]),
                            _: 1
                          }),
                          _(d, {
                            cols: "12",
                            md: "6",
                            class: "form-field"
                          }, {
                            default: x(() => [
                              _(s, {
                                items: r.pos_profiles,
                                label: e.frappe._("POS Profile"),
                                modelValue: r.pos_profile,
                                "onUpdate:modelValue": t[1] || (t[1] = (E) => r.pos_profile = E),
                                required: "",
                                variant: "outlined",
                                color: "primary",
                                density: "compact",
                                "prepend-inner-icon": "mdi-point-of-sale",
                                class: Ie(["enhanced-field", { "field-focused": r.pos_profile }])
                              }, null, 8, ["items", "label", "modelValue", "class"])
                            ]),
                            _: 1
                          }),
                          _(d, { cols: "12" }, {
                            default: x(() => [
                              I("div", Pne, [
                                I("h6", One, [
                                  _(o, { class: "section-icon" }, {
                                    default: x(() => t[4] || (t[4] = [
                                      ae("mdi-credit-card-multiple")
                                    ])),
                                    _: 1,
                                    __: [4]
                                  }),
                                  ae(" " + q(e.__("Payment Methods")), 1)
                                ])
                              ]),
                              _(f, {
                                headers: r.payments_methods_headers,
                                items: r.payments_methods,
                                "item-key": "mode_of_payment",
                                class: "enhanced-table-compact",
                                "items-per-page": r.itemsPerPage,
                                "hide-default-footer": "",
                                density: "compact",
                                height: "300px",
                                "fixed-header": ""
                              }, {
                                "item.amount": x(({ item: E }) => [
                                  _(u, {
                                    modelValue: E.amount,
                                    "onUpdate:modelValue": (C) => E.amount = C,
                                    rules: [r.max25chars],
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "hide-details": "",
                                    prefix: e.currencySymbol(E.currency),
                                    class: "amount-input"
                                  }, null, 8, ["modelValue", "onUpdate:modelValue", "rules", "prefix"])
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "items-per-page"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(p, { class: "dialog-actions-container" }, {
                default: x(() => [
                  _(w, {
                    theme: "dark",
                    onClick: i.go_desk,
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      _(o, { start: "" }, {
                        default: x(() => t[5] || (t[5] = [
                          ae("mdi-close-circle-outline")
                        ])),
                        _: 1,
                        __: [5]
                      }),
                      I("span", null, q(e.__("Cancel")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(b),
                  _(w, {
                    theme: "dark",
                    disabled: r.is_loading,
                    loading: r.is_loading,
                    onClick: i.submit_dialog,
                    class: "pos-action-btn submit-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      _(o, { start: "" }, {
                        default: x(() => t[6] || (t[6] = [
                          ae("mdi-check-circle-outline")
                        ])),
                        _: 1,
                        __: [6]
                      }),
                      I("span", null, q(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["disabled", "loading", "onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Bne = /* @__PURE__ */ nn(Cne, [["render", Dne], ["__scopeId", "data-v-b71142d6"]]);
var o_ = { exports: {} }, Vne = o_.exports, qA;
function Mne() {
  return qA || (qA = 1, function(e, t) {
    var n = { env: {} };
    /*! Browser bundle of nunjucks 3.2.4  */
    (function(r, i) {
      e.exports = i();
    })(typeof self < "u" ? self : Vne, function() {
      return (
        /******/
        function(a) {
          var r = {};
          function i(o) {
            if (r[o])
              return r[o].exports;
            var l = r[o] = {
              /******/
              i: o,
              /******/
              l: !1,
              /******/
              exports: {}
              /******/
            };
            return a[o].call(l.exports, l, l.exports, i), l.l = !0, l.exports;
          }
          return i.m = a, i.c = r, i.d = function(o, l, s) {
            i.o(o, l) || Object.defineProperty(o, l, {
              /******/
              configurable: !1,
              /******/
              enumerable: !0,
              /******/
              get: s
              /******/
            });
          }, i.n = function(o) {
            var l = o && o.__esModule ? (
              /******/
              function() {
                return o.default;
              }
            ) : (
              /******/
              function() {
                return o;
              }
            );
            return i.d(l, "a", l), l;
          }, i.o = function(o, l) {
            return Object.prototype.hasOwnProperty.call(o, l);
          }, i.p = "", i(i.s = 11);
        }([
          /* 0 */
          /***/
          function(a, u, i) {
            var o = Array.prototype, l = Object.prototype, s = {
              "&": "&amp;",
              '"': "&quot;",
              "'": "&#39;",
              "<": "&lt;",
              ">": "&gt;",
              "\\": "&#92;"
            }, d = /[&"'<>\\]/g, u = a.exports = {};
            function f(F, K) {
              return l.hasOwnProperty.call(F, K);
            }
            u.hasOwnProp = f;
            function h(F) {
              return s[F];
            }
            function g(F, K, se) {
              if (se.Update || (se = new u.TemplateError(se)), se.Update(F), !K) {
                var X = se;
                se = new Error(X.message), se.name = X.name;
              }
              return se;
            }
            u._prettifyError = g;
            function v(F, K, se) {
              var X, he;
              F instanceof Error && (he = F, F = he.name + ": " + he.message), Object.setPrototypeOf ? (X = new Error(F), Object.setPrototypeOf(X, v.prototype)) : (X = this, Object.defineProperty(X, "message", {
                enumerable: !1,
                writable: !0,
                value: F
              })), Object.defineProperty(X, "name", {
                value: "Template render error"
              }), Error.captureStackTrace && Error.captureStackTrace(X, this.constructor);
              var ve;
              if (he) {
                var pe = Object.getOwnPropertyDescriptor(he, "stack");
                ve = pe && (pe.get || function() {
                  return pe.value;
                }), ve || (ve = function() {
                  return he.stack;
                });
              } else {
                var z = new Error(F).stack;
                ve = function() {
                  return z;
                };
              }
              return Object.defineProperty(X, "stack", {
                get: function() {
                  return ve.call(X);
                }
              }), Object.defineProperty(X, "cause", {
                value: he
              }), X.lineno = K, X.colno = se, X.firstUpdate = !0, X.Update = function(Me) {
                var Le = "(" + (Me || "unknown path") + ")";
                return this.firstUpdate && (this.lineno && this.colno ? Le += " [Line " + this.lineno + ", Column " + this.colno + "]" : this.lineno && (Le += " [Line " + this.lineno + "]")), Le += `
 `, this.firstUpdate && (Le += " "), this.message = Le + (this.message || ""), this.firstUpdate = !1, this;
              }, X;
            }
            Object.setPrototypeOf ? Object.setPrototypeOf(v.prototype, Error.prototype) : v.prototype = Object.create(Error.prototype, {
              constructor: {
                value: v
              }
            }), u.TemplateError = v;
            function w(F) {
              return F.replace(d, h);
            }
            u.escape = w;
            function b(F) {
              return l.toString.call(F) === "[object Function]";
            }
            u.isFunction = b;
            function p(F) {
              return l.toString.call(F) === "[object Array]";
            }
            u.isArray = p;
            function y(F) {
              return l.toString.call(F) === "[object String]";
            }
            u.isString = y;
            function S(F) {
              return l.toString.call(F) === "[object Object]";
            }
            u.isObject = S;
            function E(F) {
              return F ? typeof F == "string" ? F.split(".") : [F] : [];
            }
            function C(F) {
              var K = E(F);
              return function(X) {
                for (var he = X, ve = 0; ve < K.length; ve++) {
                  var pe = K[ve];
                  if (f(he, pe))
                    he = he[pe];
                  else
                    return;
                }
                return he;
              };
            }
            u.getAttrGetter = C;
            function D(F, K, se) {
              for (var X = {}, he = b(K) ? K : C(K), ve = 0; ve < F.length; ve++) {
                var pe = F[ve], z = he(pe, ve);
                if (z === void 0 && se === !0)
                  throw new TypeError('groupby: attribute "' + K + '" resolved to undefined');
                (X[z] || (X[z] = [])).push(pe);
              }
              return X;
            }
            u.groupBy = D;
            function P(F) {
              return Array.prototype.slice.call(F);
            }
            u.toArray = P;
            function O(F) {
              var K = [];
              if (!F)
                return K;
              for (var se = F.length, X = P(arguments).slice(1), he = -1; ++he < se; )
                N(X, F[he]) === -1 && K.push(F[he]);
              return K;
            }
            u.without = O;
            function T(F, K) {
              for (var se = "", X = 0; X < K; X++)
                se += F;
              return se;
            }
            u.repeat = T;
            function A(F, K, se) {
              if (F != null) {
                if (o.forEach && F.forEach === o.forEach)
                  F.forEach(K, se);
                else if (F.length === +F.length)
                  for (var X = 0, he = F.length; X < he; X++)
                    K.call(se, F[X], X, F);
              }
            }
            u.each = A;
            function V(F, K) {
              var se = [];
              if (F == null)
                return se;
              if (o.map && F.map === o.map)
                return F.map(K);
              for (var X = 0; X < F.length; X++)
                se[se.length] = K(F[X], X);
              return F.length === +F.length && (se.length = F.length), se;
            }
            u.map = V;
            function M(F, K, se) {
              var X = -1;
              function he() {
                X++, X < F.length ? K(F[X], X, he, se) : se();
              }
              he();
            }
            u.asyncIter = M;
            function B(F, K, se) {
              var X = H(F || {}), he = X.length, ve = -1;
              function pe() {
                ve++;
                var z = X[ve];
                ve < he ? K(z, F[z], ve, he, pe) : se();
              }
              pe();
            }
            u.asyncFor = B;
            function N(F, K, se) {
              return Array.prototype.indexOf.call(F || [], K, se);
            }
            u.indexOf = N;
            function H(F) {
              var K = [];
              for (var se in F)
                f(F, se) && K.push(se);
              return K;
            }
            u.keys = H;
            function j(F) {
              return H(F).map(function(K) {
                return [K, F[K]];
              });
            }
            u._entries = j;
            function te(F) {
              return H(F).map(function(K) {
                return F[K];
              });
            }
            u._values = te;
            function de(F, K) {
              return F = F || {}, H(K).forEach(function(se) {
                F[se] = K[se];
              }), F;
            }
            u._assign = u.extend = de;
            function Z(F, K) {
              if (p(K) || y(K))
                return K.indexOf(F) !== -1;
              if (S(K))
                return F in K;
              throw new Error('Cannot use "in" operator to search for "' + F + '" in unexpected types.');
            }
            u.inOperator = Z;
          },
          /* 1 */
          /***/
          function(a, r, i) {
            function o(y, S) {
              for (var E = 0; E < S.length; E++) {
                var C = S[E];
                C.enumerable = C.enumerable || !1, C.configurable = !0, "value" in C && (C.writable = !0), Object.defineProperty(y, s(C.key), C);
              }
            }
            function l(y, S, E) {
              return S && o(y.prototype, S), Object.defineProperty(y, "prototype", { writable: !1 }), y;
            }
            function s(y) {
              var S = d(y, "string");
              return typeof S == "symbol" ? S : String(S);
            }
            function d(y, S) {
              if (typeof y != "object" || y === null) return y;
              var E = y[Symbol.toPrimitive];
              if (E !== void 0) {
                var C = E.call(y, S);
                if (typeof C != "object") return C;
                throw new TypeError("@@toPrimitive must return a primitive value.");
              }
              return String(y);
            }
            function u(y, S) {
              y.prototype = Object.create(S.prototype), y.prototype.constructor = y, f(y, S);
            }
            function f(y, S) {
              return f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(C, D) {
                return C.__proto__ = D, C;
              }, f(y, S);
            }
            var h = i(16), g = i(0);
            function v(y, S) {
              return typeof y != "function" || typeof S != "function" ? S : function() {
                var C = this.parent;
                this.parent = y;
                var D = S.apply(this, arguments);
                return this.parent = C, D;
              };
            }
            function w(y, S, E) {
              E = E || {}, g.keys(E).forEach(function(D) {
                E[D] = v(y.prototype[D], E[D]);
              });
              var C = /* @__PURE__ */ function(D) {
                u(P, D);
                function P() {
                  return D.apply(this, arguments) || this;
                }
                return l(P, [{
                  key: "typename",
                  get: function() {
                    return S;
                  }
                }]), P;
              }(y);
              return g._assign(C.prototype, E), C;
            }
            var b = /* @__PURE__ */ function() {
              function y() {
                this.init.apply(this, arguments);
              }
              var S = y.prototype;
              return S.init = function() {
              }, y.extend = function(C, D) {
                return typeof C == "object" && (D = C, C = "anonymous"), w(this, C, D);
              }, l(y, [{
                key: "typename",
                get: function() {
                  return this.constructor.name;
                }
              }]), y;
            }(), p = /* @__PURE__ */ function(y) {
              u(S, y);
              function S() {
                var C, D;
                return D = y.call(this) || this, (C = D).init.apply(C, arguments), D;
              }
              var E = S.prototype;
              return E.init = function() {
              }, S.extend = function(D, P) {
                return typeof D == "object" && (P = D, D = "anonymous"), w(this, D, P);
              }, l(S, [{
                key: "typename",
                get: function() {
                  return this.constructor.name;
                }
              }]), S;
            }(h);
            a.exports = {
              Obj: b,
              EmitterObj: p
            };
          },
          /* 2 */
          /***/
          function(a, r, i) {
            var o = i(0), l = Array.from, s = typeof Symbol == "function" && Symbol.iterator && typeof l == "function", d = /* @__PURE__ */ function() {
              function V(B, N) {
                this.variables = /* @__PURE__ */ Object.create(null), this.parent = B, this.topLevel = !1, this.isolateWrites = N;
              }
              var M = V.prototype;
              return M.set = function(N, H, j) {
                var te = N.split("."), de = this.variables, Z = this;
                if (j && (Z = this.resolve(te[0], !0))) {
                  Z.set(N, H);
                  return;
                }
                for (var F = 0; F < te.length - 1; F++) {
                  var K = te[F];
                  de[K] || (de[K] = {}), de = de[K];
                }
                de[te[te.length - 1]] = H;
              }, M.get = function(N) {
                var H = this.variables[N];
                return H !== void 0 ? H : null;
              }, M.lookup = function(N) {
                var H = this.parent, j = this.variables[N];
                return j !== void 0 ? j : H && H.lookup(N);
              }, M.resolve = function(N, H) {
                var j = H && this.isolateWrites ? void 0 : this.parent, te = this.variables[N];
                return te !== void 0 ? this : j && j.resolve(N);
              }, M.push = function(N) {
                return new V(this, N);
              }, M.pop = function() {
                return this.parent;
              }, V;
            }();
            function u(V, M, B) {
              return function() {
                for (var H = arguments.length, j = new Array(H), te = 0; te < H; te++)
                  j[te] = arguments[te];
                var de = v(j), Z, F = g(j);
                if (de > V.length)
                  Z = j.slice(0, V.length), j.slice(Z.length, de).forEach(function(X, he) {
                    he < M.length && (F[M[he]] = X);
                  }), Z.push(F);
                else if (de < V.length) {
                  Z = j.slice(0, de);
                  for (var K = de; K < V.length; K++) {
                    var se = V[K];
                    Z.push(F[se]), delete F[se];
                  }
                  Z.push(F);
                } else
                  Z = j;
                return B.apply(this, Z);
              };
            }
            function f(V) {
              return V.__keywords = !0, V;
            }
            function h(V) {
              return V && Object.prototype.hasOwnProperty.call(V, "__keywords");
            }
            function g(V) {
              var M = V.length;
              if (M) {
                var B = V[M - 1];
                if (h(B))
                  return B;
              }
              return {};
            }
            function v(V) {
              var M = V.length;
              if (M === 0)
                return 0;
              var B = V[M - 1];
              return h(B) ? M - 1 : M;
            }
            function w(V) {
              if (typeof V != "string")
                return V;
              this.val = V, this.length = V.length;
            }
            w.prototype = Object.create(String.prototype, {
              length: {
                writable: !0,
                configurable: !0,
                value: 0
              }
            }), w.prototype.valueOf = function() {
              return this.val;
            }, w.prototype.toString = function() {
              return this.val;
            };
            function b(V, M) {
              return V instanceof w ? new w(M) : M.toString();
            }
            function p(V) {
              var M = typeof V;
              return M === "string" ? new w(V) : M !== "function" ? V : function(N) {
                var H = V.apply(this, arguments);
                return typeof H == "string" ? new w(H) : H;
              };
            }
            function y(V, M) {
              return V = V ?? "", M && !(V instanceof w) && (V = o.escape(V.toString())), V;
            }
            function S(V, M, B) {
              if (V == null)
                throw new o.TemplateError("attempted to output null or undefined value", M + 1, B + 1);
              return V;
            }
            function E(V, M) {
              if (V != null)
                return typeof V[M] == "function" ? function() {
                  for (var B = arguments.length, N = new Array(B), H = 0; H < B; H++)
                    N[H] = arguments[H];
                  return V[M].apply(V, N);
                } : V[M];
            }
            function C(V, M, B, N) {
              if (V) {
                if (typeof V != "function")
                  throw new Error("Unable to call `" + M + "`, which is not a function");
              } else throw new Error("Unable to call `" + M + "`, which is undefined or falsey");
              return V.apply(B, N);
            }
            function D(V, M, B) {
              var N = M.lookup(B);
              return N !== void 0 ? N : V.lookup(B);
            }
            function P(V, M, B) {
              return V.lineno ? V : new o.TemplateError(V, M, B);
            }
            function O(V, M, B, N) {
              if (o.isArray(V)) {
                var H = V.length;
                o.asyncIter(V, function(te, de, Z) {
                  switch (M) {
                    case 1:
                      B(te, de, H, Z);
                      break;
                    case 2:
                      B(te[0], te[1], de, H, Z);
                      break;
                    case 3:
                      B(te[0], te[1], te[2], de, H, Z);
                      break;
                    default:
                      te.push(de, H, Z), B.apply(this, te);
                  }
                }, N);
              } else
                o.asyncFor(V, function(te, de, Z, F, K) {
                  B(te, de, Z, F, K);
                }, N);
            }
            function T(V, M, B, N) {
              var H = 0, j, te;
              function de(he, ve) {
                H++, te[he] = ve, H === j && N(null, te.join(""));
              }
              if (o.isArray(V))
                if (j = V.length, te = new Array(j), j === 0)
                  N(null, "");
                else
                  for (var Z = 0; Z < V.length; Z++) {
                    var F = V[Z];
                    switch (M) {
                      case 1:
                        B(F, Z, j, de);
                        break;
                      case 2:
                        B(F[0], F[1], Z, j, de);
                        break;
                      case 3:
                        B(F[0], F[1], F[2], Z, j, de);
                        break;
                      default:
                        F.push(Z, j, de), B.apply(this, F);
                    }
                  }
              else {
                var K = o.keys(V || {});
                if (j = K.length, te = new Array(j), j === 0)
                  N(null, "");
                else
                  for (var se = 0; se < K.length; se++) {
                    var X = K[se];
                    B(X, V[X], se, j, de);
                  }
              }
            }
            function A(V) {
              return typeof V != "object" || V === null || o.isArray(V) ? V : s && Symbol.iterator in V ? l(V) : V;
            }
            a.exports = {
              Frame: d,
              makeMacro: u,
              makeKeywordArgs: f,
              numArgs: v,
              suppressValue: y,
              ensureDefined: S,
              memberLookup: E,
              contextOrFrameLookup: D,
              callWrap: C,
              handleError: P,
              isArray: o.isArray,
              keys: o.keys,
              SafeString: w,
              copySafeness: b,
              markSafe: p,
              asyncEach: O,
              asyncAll: T,
              inOperator: o.inOperator,
              fromIterator: A
            };
          },
          /* 3 */
          /***/
          function(a, r, i) {
            function o(xe, ze) {
              for (var ft = 0; ft < ze.length; ft++) {
                var it = ze[ft];
                it.enumerable = it.enumerable || !1, it.configurable = !0, "value" in it && (it.writable = !0), Object.defineProperty(xe, s(it.key), it);
              }
            }
            function l(xe, ze, ft) {
              return ze && o(xe.prototype, ze), Object.defineProperty(xe, "prototype", { writable: !1 }), xe;
            }
            function s(xe) {
              var ze = d(xe, "string");
              return typeof ze == "symbol" ? ze : String(ze);
            }
            function d(xe, ze) {
              if (typeof xe != "object" || xe === null) return xe;
              var ft = xe[Symbol.toPrimitive];
              if (ft !== void 0) {
                var it = ft.call(xe, ze);
                if (typeof it != "object") return it;
                throw new TypeError("@@toPrimitive must return a primitive value.");
              }
              return String(xe);
            }
            function u(xe, ze) {
              xe.prototype = Object.create(ze.prototype), xe.prototype.constructor = xe, f(xe, ze);
            }
            function f(xe, ze) {
              return f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(it, je) {
                return it.__proto__ = je, it;
              }, f(xe, ze);
            }
            var h = i(1), g = h.Obj;
            function v(xe, ze, ft) {
              xe instanceof ze && ft.push(xe), xe instanceof w && xe.findAll(ze, ft);
            }
            var w = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(je, st) {
                for (var pt = arguments, xa = this, Ua = arguments.length, _r = new Array(Ua > 2 ? Ua - 2 : 0), Wa = 2; Wa < Ua; Wa++)
                  _r[Wa - 2] = arguments[Wa];
                this.lineno = je, this.colno = st, this.fields.forEach(function(Qi, sl) {
                  var Ji = pt[sl + 2];
                  Ji === void 0 && (Ji = null), xa[Qi] = Ji;
                });
              }, ft.findAll = function(je, st) {
                var pt = this;
                return st = st || [], this instanceof p ? this.children.forEach(function(xa) {
                  return v(xa, je, st);
                }) : this.fields.forEach(function(xa) {
                  return v(pt[xa], je, st);
                }), st;
              }, ft.iterFields = function(je) {
                var st = this;
                this.fields.forEach(function(pt) {
                  je(st[pt], pt);
                });
              }, ze;
            }(g), b = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              return l(ze, [{
                key: "typename",
                get: function() {
                  return "Value";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["value"];
                }
              }]), ze;
            }(w), p = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(je, st, pt) {
                xe.prototype.init.call(this, je, st, pt || []);
              }, ft.addChild = function(je) {
                this.children.push(je);
              }, l(ze, [{
                key: "typename",
                get: function() {
                  return "NodeList";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["children"];
                }
              }]), ze;
            }(w), y = p.extend("Root"), S = b.extend("Literal"), E = b.extend("Symbol"), C = p.extend("Group"), D = p.extend("Array"), P = w.extend("Pair", {
              fields: ["key", "value"]
            }), O = p.extend("Dict"), T = w.extend("LookupVal", {
              fields: ["target", "val"]
            }), A = w.extend("If", {
              fields: ["cond", "body", "else_"]
            }), V = A.extend("IfAsync"), M = w.extend("InlineIf", {
              fields: ["cond", "body", "else_"]
            }), B = w.extend("For", {
              fields: ["arr", "name", "body", "else_"]
            }), N = B.extend("AsyncEach"), H = B.extend("AsyncAll"), j = w.extend("Macro", {
              fields: ["name", "args", "body"]
            }), te = j.extend("Caller"), de = w.extend("Import", {
              fields: ["template", "target", "withContext"]
            }), Z = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(je, st, pt, xa, Ua) {
                xe.prototype.init.call(this, je, st, pt, xa || new p(), Ua);
              }, l(ze, [{
                key: "typename",
                get: function() {
                  return "FromImport";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["template", "names", "withContext"];
                }
              }]), ze;
            }(w), F = w.extend("FunCall", {
              fields: ["name", "args"]
            }), K = F.extend("Filter"), se = K.extend("FilterAsync", {
              fields: ["name", "args", "symbol"]
            }), X = O.extend("KeywordArgs"), he = w.extend("Block", {
              fields: ["name", "body"]
            }), ve = w.extend("Super", {
              fields: ["blockName", "symbol"]
            }), pe = w.extend("TemplateRef", {
              fields: ["template"]
            }), z = pe.extend("Extends"), ke = w.extend("Include", {
              fields: ["template", "ignoreMissing"]
            }), Me = w.extend("Set", {
              fields: ["targets", "value"]
            }), Le = w.extend("Switch", {
              fields: ["expr", "cases", "default"]
            }), ce = w.extend("Case", {
              fields: ["cond", "body"]
            }), ne = p.extend("Output"), G = w.extend("Capture", {
              fields: ["body"]
            }), le = S.extend("TemplateData"), Y = w.extend("UnaryOp", {
              fields: ["target"]
            }), Ce = w.extend("BinOp", {
              fields: ["left", "right"]
            }), Te = Ce.extend("In"), ie = Ce.extend("Is"), ge = Ce.extend("Or"), Pe = Ce.extend("And"), Ee = Y.extend("Not"), Je = Ce.extend("Add"), _e = Ce.extend("Concat"), $e = Ce.extend("Sub"), Ze = Ce.extend("Mul"), _t = Ce.extend("Div"), It = Ce.extend("FloorDiv"), rt = Ce.extend("Mod"), Dt = Ce.extend("Pow"), en = Y.extend("Neg"), zn = Y.extend("Pos"), ta = w.extend("Compare", {
              fields: ["expr", "ops"]
            }), Na = w.extend("CompareOperand", {
              fields: ["expr", "type"]
            }), ba = w.extend("CallExtension", {
              init: function(ze, ft, it, je) {
                this.parent(), this.extName = ze.__name || ze, this.prop = ft, this.args = it || new p(), this.contentArgs = je || [], this.autoescape = ze.autoescape;
              },
              fields: ["extName", "prop", "args", "contentArgs"]
            }), Wn = ba.extend("CallExtensionAsync");
            function Vn(xe, ze, ft) {
              var it = xe.split(`
`);
              it.forEach(function(je, st) {
                je && (ft && st > 0 || !ft) && n.stdout.write(" ".repeat(ze));
                var pt = st === it.length - 1 ? "" : `
`;
                n.stdout.write("" + je + pt);
              });
            }
            function Ja(xe, ze) {
              if (ze = ze || 0, Vn(xe.typename + ": ", ze), xe instanceof p)
                Vn(`
`), xe.children.forEach(function(je) {
                  Ja(je, ze + 2);
                });
              else if (xe instanceof ba)
                Vn(xe.extName + "." + xe.prop + `
`), xe.args && Ja(xe.args, ze + 2), xe.contentArgs && xe.contentArgs.forEach(function(je) {
                  Ja(je, ze + 2);
                });
              else {
                var ft = [], it = null;
                xe.iterFields(function(je, st) {
                  je instanceof w ? ft.push([st, je]) : (it = it || {}, it[st] = je);
                }), it ? Vn(JSON.stringify(it, null, 2) + `
`, null, !0) : Vn(`
`), ft.forEach(function(je) {
                  var st = je[0], pt = je[1];
                  Vn("[" + st + "] =>", ze + 2), Ja(pt, ze + 4);
                });
              }
            }
            a.exports = {
              Node: w,
              Root: y,
              NodeList: p,
              Value: b,
              Literal: S,
              Symbol: E,
              Group: C,
              Array: D,
              Pair: P,
              Dict: O,
              Output: ne,
              Capture: G,
              TemplateData: le,
              If: A,
              IfAsync: V,
              InlineIf: M,
              For: B,
              AsyncEach: N,
              AsyncAll: H,
              Macro: j,
              Caller: te,
              Import: de,
              FromImport: Z,
              FunCall: F,
              Filter: K,
              FilterAsync: se,
              KeywordArgs: X,
              Block: he,
              Super: ve,
              Extends: z,
              Include: ke,
              Set: Me,
              Switch: Le,
              Case: ce,
              LookupVal: T,
              BinOp: Ce,
              In: Te,
              Is: ie,
              Or: ge,
              And: Pe,
              Not: Ee,
              Add: Je,
              Concat: _e,
              Sub: $e,
              Mul: Ze,
              Div: _t,
              FloorDiv: It,
              Mod: rt,
              Pow: Dt,
              Neg: en,
              Pos: zn,
              Compare: ta,
              CompareOperand: Na,
              CallExtension: ba,
              CallExtensionAsync: Wn,
              printNodes: Ja
            };
          },
          /* 4 */
          /***/
          function(a, r) {
          },
          /* 5 */
          /***/
          function(a, r, i) {
            function o(S, E) {
              S.prototype = Object.create(E.prototype), S.prototype.constructor = S, l(S, E);
            }
            function l(S, E) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(D, P) {
                return D.__proto__ = P, D;
              }, l(S, E);
            }
            var s = i(8), d = i(17), u = i(3), f = i(0), h = f.TemplateError, g = i(2), v = g.Frame, w = i(1), b = w.Obj, p = {
              "==": "==",
              "===": "===",
              "!=": "!=",
              "!==": "!==",
              "<": "<",
              ">": ">",
              "<=": "<=",
              ">=": ">="
            }, y = /* @__PURE__ */ function(S) {
              o(E, S);
              function E() {
                return S.apply(this, arguments) || this;
              }
              var C = E.prototype;
              return C.init = function(P, O) {
                this.templateName = P, this.codebuf = [], this.lastId = 0, this.buffer = null, this.bufferStack = [], this._scopeClosers = "", this.inBlock = !1, this.throwOnUndefined = O;
              }, C.fail = function(P, O, T) {
                throw O !== void 0 && (O += 1), T !== void 0 && (T += 1), new h(P, O, T);
              }, C._pushBuffer = function() {
                var P = this._tmpid();
                return this.bufferStack.push(this.buffer), this.buffer = P, this._emit("var " + this.buffer + ' = "";'), P;
              }, C._popBuffer = function() {
                this.buffer = this.bufferStack.pop();
              }, C._emit = function(P) {
                this.codebuf.push(P);
              }, C._emitLine = function(P) {
                this._emit(P + `
`);
              }, C._emitLines = function() {
                for (var P = this, O = arguments.length, T = new Array(O), A = 0; A < O; A++)
                  T[A] = arguments[A];
                T.forEach(function(V) {
                  return P._emitLine(V);
                });
              }, C._emitFuncBegin = function(P, O) {
                this.buffer = "output", this._scopeClosers = "", this._emitLine("function " + O + "(env, context, frame, runtime, cb) {"), this._emitLine("var lineno = " + P.lineno + ";"), this._emitLine("var colno = " + P.colno + ";"), this._emitLine("var " + this.buffer + ' = "";'), this._emitLine("try {");
              }, C._emitFuncEnd = function(P) {
                P || this._emitLine("cb(null, " + this.buffer + ");"), this._closeScopeLevels(), this._emitLine("} catch (e) {"), this._emitLine("  cb(runtime.handleError(e, lineno, colno));"), this._emitLine("}"), this._emitLine("}"), this.buffer = null;
              }, C._addScopeLevel = function() {
                this._scopeClosers += "})";
              }, C._closeScopeLevels = function() {
                this._emitLine(this._scopeClosers + ";"), this._scopeClosers = "";
              }, C._withScopedSyntax = function(P) {
                var O = this._scopeClosers;
                this._scopeClosers = "", P.call(this), this._closeScopeLevels(), this._scopeClosers = O;
              }, C._makeCallback = function(P) {
                var O = this._tmpid();
                return "function(" + O + (P ? "," + P : "") + `) {
if(` + O + ") { cb(" + O + "); return; }";
              }, C._tmpid = function() {
                return this.lastId++, "t_" + this.lastId;
              }, C._templateName = function() {
                return this.templateName == null ? "undefined" : JSON.stringify(this.templateName);
              }, C._compileChildren = function(P, O) {
                var T = this;
                P.children.forEach(function(A) {
                  T.compile(A, O);
                });
              }, C._compileAggregate = function(P, O, T, A) {
                var V = this;
                T && this._emit(T), P.children.forEach(function(M, B) {
                  B > 0 && V._emit(","), V.compile(M, O);
                }), A && this._emit(A);
              }, C._compileExpression = function(P, O) {
                this.assertType(P, u.Literal, u.Symbol, u.Group, u.Array, u.Dict, u.FunCall, u.Caller, u.Filter, u.LookupVal, u.Compare, u.InlineIf, u.In, u.Is, u.And, u.Or, u.Not, u.Add, u.Concat, u.Sub, u.Mul, u.Div, u.FloorDiv, u.Mod, u.Pow, u.Neg, u.Pos, u.Compare, u.NodeList), this.compile(P, O);
              }, C.assertType = function(P) {
                for (var O = arguments.length, T = new Array(O > 1 ? O - 1 : 0), A = 1; A < O; A++)
                  T[A - 1] = arguments[A];
                T.some(function(V) {
                  return P instanceof V;
                }) || this.fail("assertType: invalid type: " + P.typename, P.lineno, P.colno);
              }, C.compileCallExtension = function(P, O, T) {
                var A = this, V = P.args, M = P.contentArgs, B = typeof P.autoescape == "boolean" ? P.autoescape : !0;
                if (T || this._emit(this.buffer + " += runtime.suppressValue("), this._emit('env.getExtension("' + P.extName + '")["' + P.prop + '"]('), this._emit("context"), (V || M) && this._emit(","), V && (V instanceof u.NodeList || this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"), V.children.forEach(function(H, j) {
                  A._compileExpression(H, O), (j !== V.children.length - 1 || M.length) && A._emit(",");
                })), M.length && M.forEach(function(H, j) {
                  if (j > 0 && A._emit(","), H) {
                    A._emitLine("function(cb) {"), A._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");
                    var te = A._pushBuffer();
                    A._withScopedSyntax(function() {
                      A.compile(H, O), A._emitLine("cb(null, " + te + ");");
                    }), A._popBuffer(), A._emitLine("return " + te + ";"), A._emitLine("}");
                  } else
                    A._emit("null");
                }), T) {
                  var N = this._tmpid();
                  this._emitLine(", " + this._makeCallback(N)), this._emitLine(this.buffer + " += runtime.suppressValue(" + N + ", " + B + " && env.opts.autoescape);"), this._addScopeLevel();
                } else
                  this._emit(")"), this._emit(", " + B + ` && env.opts.autoescape);
`);
              }, C.compileCallExtensionAsync = function(P, O) {
                this.compileCallExtension(P, O, !0);
              }, C.compileNodeList = function(P, O) {
                this._compileChildren(P, O);
              }, C.compileLiteral = function(P) {
                if (typeof P.value == "string") {
                  var O = P.value.replace(/\\/g, "\\\\");
                  O = O.replace(/"/g, '\\"'), O = O.replace(/\n/g, "\\n"), O = O.replace(/\r/g, "\\r"), O = O.replace(/\t/g, "\\t"), O = O.replace(/\u2028/g, "\\u2028"), this._emit('"' + O + '"');
                } else P.value === null ? this._emit("null") : this._emit(P.value.toString());
              }, C.compileSymbol = function(P, O) {
                var T = P.value, A = O.lookup(T);
                A ? this._emit(A) : this._emit('runtime.contextOrFrameLookup(context, frame, "' + T + '")');
              }, C.compileGroup = function(P, O) {
                this._compileAggregate(P, O, "(", ")");
              }, C.compileArray = function(P, O) {
                this._compileAggregate(P, O, "[", "]");
              }, C.compileDict = function(P, O) {
                this._compileAggregate(P, O, "{", "}");
              }, C.compilePair = function(P, O) {
                var T = P.key, A = P.value;
                T instanceof u.Symbol ? T = new u.Literal(T.lineno, T.colno, T.value) : T instanceof u.Literal && typeof T.value == "string" || this.fail("compilePair: Dict keys must be strings or names", T.lineno, T.colno), this.compile(T, O), this._emit(": "), this._compileExpression(A, O);
              }, C.compileInlineIf = function(P, O) {
                this._emit("("), this.compile(P.cond, O), this._emit("?"), this.compile(P.body, O), this._emit(":"), P.else_ !== null ? this.compile(P.else_, O) : this._emit('""'), this._emit(")");
              }, C.compileIn = function(P, O) {
                this._emit("runtime.inOperator("), this.compile(P.left, O), this._emit(","), this.compile(P.right, O), this._emit(")");
              }, C.compileIs = function(P, O) {
                var T = P.right.name ? P.right.name.value : P.right.value;
                this._emit('env.getTest("' + T + '").call(context, '), this.compile(P.left, O), P.right.args && (this._emit(","), this.compile(P.right.args, O)), this._emit(") === true");
              }, C._binOpEmitter = function(P, O, T) {
                this.compile(P.left, O), this._emit(T), this.compile(P.right, O);
              }, C.compileOr = function(P, O) {
                return this._binOpEmitter(P, O, " || ");
              }, C.compileAnd = function(P, O) {
                return this._binOpEmitter(P, O, " && ");
              }, C.compileAdd = function(P, O) {
                return this._binOpEmitter(P, O, " + ");
              }, C.compileConcat = function(P, O) {
                return this._binOpEmitter(P, O, ' + "" + ');
              }, C.compileSub = function(P, O) {
                return this._binOpEmitter(P, O, " - ");
              }, C.compileMul = function(P, O) {
                return this._binOpEmitter(P, O, " * ");
              }, C.compileDiv = function(P, O) {
                return this._binOpEmitter(P, O, " / ");
              }, C.compileMod = function(P, O) {
                return this._binOpEmitter(P, O, " % ");
              }, C.compileNot = function(P, O) {
                this._emit("!"), this.compile(P.target, O);
              }, C.compileFloorDiv = function(P, O) {
                this._emit("Math.floor("), this.compile(P.left, O), this._emit(" / "), this.compile(P.right, O), this._emit(")");
              }, C.compilePow = function(P, O) {
                this._emit("Math.pow("), this.compile(P.left, O), this._emit(", "), this.compile(P.right, O), this._emit(")");
              }, C.compileNeg = function(P, O) {
                this._emit("-"), this.compile(P.target, O);
              }, C.compilePos = function(P, O) {
                this._emit("+"), this.compile(P.target, O);
              }, C.compileCompare = function(P, O) {
                var T = this;
                this.compile(P.expr, O), P.ops.forEach(function(A) {
                  T._emit(" " + p[A.type] + " "), T.compile(A.expr, O);
                });
              }, C.compileLookupVal = function(P, O) {
                this._emit("runtime.memberLookup(("), this._compileExpression(P.target, O), this._emit("),"), this._compileExpression(P.val, O), this._emit(")");
              }, C._getNodeName = function(P) {
                switch (P.typename) {
                  case "Symbol":
                    return P.value;
                  case "FunCall":
                    return "the return value of (" + this._getNodeName(P.name) + ")";
                  case "LookupVal":
                    return this._getNodeName(P.target) + '["' + this._getNodeName(P.val) + '"]';
                  case "Literal":
                    return P.value.toString();
                  default:
                    return "--expression--";
                }
              }, C.compileFunCall = function(P, O) {
                this._emit("(lineno = " + P.lineno + ", colno = " + P.colno + ", "), this._emit("runtime.callWrap("), this._compileExpression(P.name, O), this._emit(', "' + this._getNodeName(P.name).replace(/"/g, '\\"') + '", context, '), this._compileAggregate(P.args, O, "[", "])"), this._emit(")");
              }, C.compileFilter = function(P, O) {
                var T = P.name;
                this.assertType(T, u.Symbol), this._emit('env.getFilter("' + T.value + '").call(context, '), this._compileAggregate(P.args, O), this._emit(")");
              }, C.compileFilterAsync = function(P, O) {
                var T = P.name, A = P.symbol.value;
                this.assertType(T, u.Symbol), O.set(A, A), this._emit('env.getFilter("' + T.value + '").call(context, '), this._compileAggregate(P.args, O), this._emitLine(", " + this._makeCallback(A)), this._addScopeLevel();
              }, C.compileKeywordArgs = function(P, O) {
                this._emit("runtime.makeKeywordArgs("), this.compileDict(P, O), this._emit(")");
              }, C.compileSet = function(P, O) {
                var T = this, A = [];
                P.targets.forEach(function(V) {
                  var M = V.value, B = O.lookup(M);
                  B == null && (B = T._tmpid(), T._emitLine("var " + B + ";")), A.push(B);
                }), P.value ? (this._emit(A.join(" = ") + " = "), this._compileExpression(P.value, O), this._emitLine(";")) : (this._emit(A.join(" = ") + " = "), this.compile(P.body, O), this._emitLine(";")), P.targets.forEach(function(V, M) {
                  var B = A[M], N = V.value;
                  T._emitLine('frame.set("' + N + '", ' + B + ", true);"), T._emitLine("if(frame.topLevel) {"), T._emitLine('context.setVariable("' + N + '", ' + B + ");"), T._emitLine("}"), N.charAt(0) !== "_" && (T._emitLine("if(frame.topLevel) {"), T._emitLine('context.addExport("' + N + '", ' + B + ");"), T._emitLine("}"));
                });
              }, C.compileSwitch = function(P, O) {
                var T = this;
                this._emit("switch ("), this.compile(P.expr, O), this._emit(") {"), P.cases.forEach(function(A, V) {
                  T._emit("case "), T.compile(A.cond, O), T._emit(": "), T.compile(A.body, O), A.body.children.length && T._emitLine("break;");
                }), P.default && (this._emit("default:"), this.compile(P.default, O)), this._emit("}");
              }, C.compileIf = function(P, O, T) {
                var A = this;
                this._emit("if("), this._compileExpression(P.cond, O), this._emitLine(") {"), this._withScopedSyntax(function() {
                  A.compile(P.body, O), T && A._emit("cb()");
                }), P.else_ ? (this._emitLine(`}
else {`), this._withScopedSyntax(function() {
                  A.compile(P.else_, O), T && A._emit("cb()");
                })) : T && (this._emitLine(`}
else {`), this._emit("cb()")), this._emitLine("}");
              }, C.compileIfAsync = function(P, O) {
                this._emit("(function(cb) {"), this.compileIf(P, O, !0), this._emit("})(" + this._makeCallback()), this._addScopeLevel();
              }, C._emitLoopBindings = function(P, O, T, A) {
                var V = this, M = [{
                  name: "index",
                  val: T + " + 1"
                }, {
                  name: "index0",
                  val: T
                }, {
                  name: "revindex",
                  val: A + " - " + T
                }, {
                  name: "revindex0",
                  val: A + " - " + T + " - 1"
                }, {
                  name: "first",
                  val: T + " === 0"
                }, {
                  name: "last",
                  val: T + " === " + A + " - 1"
                }, {
                  name: "length",
                  val: A
                }];
                M.forEach(function(B) {
                  V._emitLine('frame.set("loop.' + B.name + '", ' + B.val + ");");
                });
              }, C.compileFor = function(P, O) {
                var T = this, A = this._tmpid(), V = this._tmpid(), M = this._tmpid();
                if (O = O.push(), this._emitLine("frame = frame.push();"), this._emit("var " + M + " = "), this._compileExpression(P.arr, O), this._emitLine(";"), this._emit("if(" + M + ") {"), this._emitLine(M + " = runtime.fromIterator(" + M + ");"), P.name instanceof u.Array) {
                  this._emitLine("var " + A + ";"), this._emitLine("if(runtime.isArray(" + M + ")) {"), this._emitLine("var " + V + " = " + M + ".length;"), this._emitLine("for(" + A + "=0; " + A + " < " + M + ".length; " + A + "++) {"), P.name.children.forEach(function(Z, F) {
                    var K = T._tmpid();
                    T._emitLine("var " + K + " = " + M + "[" + A + "][" + F + "];"), T._emitLine('frame.set("' + Z + '", ' + M + "[" + A + "][" + F + "]);"), O.set(P.name.children[F].value, K);
                  }), this._emitLoopBindings(P, M, A, V), this._withScopedSyntax(function() {
                    T.compile(P.body, O);
                  }), this._emitLine("}"), this._emitLine("} else {");
                  var B = P.name.children, N = B[0], H = B[1], j = this._tmpid(), te = this._tmpid();
                  O.set(N.value, j), O.set(H.value, te), this._emitLine(A + " = -1;"), this._emitLine("var " + V + " = runtime.keys(" + M + ").length;"), this._emitLine("for(var " + j + " in " + M + ") {"), this._emitLine(A + "++;"), this._emitLine("var " + te + " = " + M + "[" + j + "];"), this._emitLine('frame.set("' + N.value + '", ' + j + ");"), this._emitLine('frame.set("' + H.value + '", ' + te + ");"), this._emitLoopBindings(P, M, A, V), this._withScopedSyntax(function() {
                    T.compile(P.body, O);
                  }), this._emitLine("}"), this._emitLine("}");
                } else {
                  var de = this._tmpid();
                  O.set(P.name.value, de), this._emitLine("var " + V + " = " + M + ".length;"), this._emitLine("for(var " + A + "=0; " + A + " < " + M + ".length; " + A + "++) {"), this._emitLine("var " + de + " = " + M + "[" + A + "];"), this._emitLine('frame.set("' + P.name.value + '", ' + de + ");"), this._emitLoopBindings(P, M, A, V), this._withScopedSyntax(function() {
                    T.compile(P.body, O);
                  }), this._emitLine("}");
                }
                this._emitLine("}"), P.else_ && (this._emitLine("if (!" + V + ") {"), this.compile(P.else_, O), this._emitLine("}")), this._emitLine("frame = frame.pop();");
              }, C._compileAsyncLoop = function(P, O, T) {
                var A = this, V = this._tmpid(), M = this._tmpid(), B = this._tmpid(), N = T ? "asyncAll" : "asyncEach";
                if (O = O.push(), this._emitLine("frame = frame.push();"), this._emit("var " + B + " = runtime.fromIterator("), this._compileExpression(P.arr, O), this._emitLine(");"), P.name instanceof u.Array) {
                  var H = P.name.children.length;
                  this._emit("runtime." + N + "(" + B + ", " + H + ", function("), P.name.children.forEach(function(de) {
                    A._emit(de.value + ",");
                  }), this._emit(V + "," + M + ",next) {"), P.name.children.forEach(function(de) {
                    var Z = de.value;
                    O.set(Z, Z), A._emitLine('frame.set("' + Z + '", ' + Z + ");");
                  });
                } else {
                  var j = P.name.value;
                  this._emitLine("runtime." + N + "(" + B + ", 1, function(" + j + ", " + V + ", " + M + ",next) {"), this._emitLine('frame.set("' + j + '", ' + j + ");"), O.set(j, j);
                }
                this._emitLoopBindings(P, B, V, M), this._withScopedSyntax(function() {
                  var de;
                  T && (de = A._pushBuffer()), A.compile(P.body, O), A._emitLine("next(" + V + (de ? "," + de : "") + ");"), T && A._popBuffer();
                });
                var te = this._tmpid();
                this._emitLine("}, " + this._makeCallback(te)), this._addScopeLevel(), T && this._emitLine(this.buffer + " += " + te + ";"), P.else_ && (this._emitLine("if (!" + B + ".length) {"), this.compile(P.else_, O), this._emitLine("}")), this._emitLine("frame = frame.pop();");
              }, C.compileAsyncEach = function(P, O) {
                this._compileAsyncLoop(P, O);
              }, C.compileAsyncAll = function(P, O) {
                this._compileAsyncLoop(P, O, !0);
              }, C._compileMacro = function(P, O) {
                var T = this, A = [], V = null, M = "macro_" + this._tmpid(), B = O !== void 0;
                P.args.children.forEach(function(Z, F) {
                  F === P.args.children.length - 1 && Z instanceof u.Dict ? V = Z : (T.assertType(Z, u.Symbol), A.push(Z));
                });
                var N = [].concat(A.map(function(Z) {
                  return "l_" + Z.value;
                }), ["kwargs"]), H = A.map(function(Z) {
                  return '"' + Z.value + '"';
                }), j = (V && V.children || []).map(function(Z) {
                  return '"' + Z.key.value + '"';
                }), te;
                B ? te = O.push(!0) : te = new v(), this._emitLines("var " + M + " = runtime.makeMacro(", "[" + H.join(", ") + "], ", "[" + j.join(", ") + "], ", "function (" + N.join(", ") + ") {", "var callerFrame = frame;", "frame = " + (B ? "frame.push(true);" : "new runtime.Frame();"), "kwargs = kwargs || {};", 'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {', 'frame.set("caller", kwargs.caller); }'), A.forEach(function(Z) {
                  T._emitLine('frame.set("' + Z.value + '", l_' + Z.value + ");"), te.set(Z.value, "l_" + Z.value);
                }), V && V.children.forEach(function(Z) {
                  var F = Z.key.value;
                  T._emit('frame.set("' + F + '", '), T._emit('Object.prototype.hasOwnProperty.call(kwargs, "' + F + '")'), T._emit(' ? kwargs["' + F + '"] : '), T._compileExpression(Z.value, te), T._emit(");");
                });
                var de = this._pushBuffer();
                return this._withScopedSyntax(function() {
                  T.compile(P.body, te);
                }), this._emitLine("frame = " + (B ? "frame.pop();" : "callerFrame;")), this._emitLine("return new runtime.SafeString(" + de + ");"), this._emitLine("});"), this._popBuffer(), M;
              }, C.compileMacro = function(P, O) {
                var T = this._compileMacro(P), A = P.name.value;
                O.set(A, T), O.parent ? this._emitLine('frame.set("' + A + '", ' + T + ");") : (P.name.value.charAt(0) !== "_" && this._emitLine('context.addExport("' + A + '");'), this._emitLine('context.setVariable("' + A + '", ' + T + ");"));
              }, C.compileCaller = function(P, O) {
                this._emit("(function (){");
                var T = this._compileMacro(P, O);
                this._emit("return " + T + ";})()");
              }, C._compileGetTemplate = function(P, O, T, A) {
                var V = this._tmpid(), M = this._templateName(), B = this._makeCallback(V), N = T ? "true" : "false", H = A ? "true" : "false";
                return this._emit("env.getTemplate("), this._compileExpression(P.template, O), this._emitLine(", " + N + ", " + M + ", " + H + ", " + B), V;
              }, C.compileImport = function(P, O) {
                var T = P.target.value, A = this._compileGetTemplate(P, O, !1, !1);
                this._addScopeLevel(), this._emitLine(A + ".getExported(" + (P.withContext ? "context.getVariables(), frame, " : "") + this._makeCallback(A)), this._addScopeLevel(), O.set(T, A), O.parent ? this._emitLine('frame.set("' + T + '", ' + A + ");") : this._emitLine('context.setVariable("' + T + '", ' + A + ");");
              }, C.compileFromImport = function(P, O) {
                var T = this, A = this._compileGetTemplate(P, O, !1, !1);
                this._addScopeLevel(), this._emitLine(A + ".getExported(" + (P.withContext ? "context.getVariables(), frame, " : "") + this._makeCallback(A)), this._addScopeLevel(), P.names.children.forEach(function(V) {
                  var M, B, N = T._tmpid();
                  V instanceof u.Pair ? (M = V.key.value, B = V.value.value) : (M = V.value, B = M), T._emitLine("if(Object.prototype.hasOwnProperty.call(" + A + ', "' + M + '")) {'), T._emitLine("var " + N + " = " + A + "." + M + ";"), T._emitLine("} else {"), T._emitLine(`cb(new Error("cannot import '` + M + `'")); return;`), T._emitLine("}"), O.set(B, N), O.parent ? T._emitLine('frame.set("' + B + '", ' + N + ");") : T._emitLine('context.setVariable("' + B + '", ' + N + ");");
                });
              }, C.compileBlock = function(P) {
                var O = this._tmpid();
                this.inBlock || this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '), this._emit('context.getBlock("' + P.name.value + '")'), this.inBlock || this._emit(")"), this._emitLine("(env, context, frame, runtime, " + this._makeCallback(O)), this._emitLine(this.buffer + " += " + O + ";"), this._addScopeLevel();
              }, C.compileSuper = function(P, O) {
                var T = P.blockName.value, A = P.symbol.value, V = this._makeCallback(A);
                this._emitLine('context.getSuper(env, "' + T + '", b_' + T + ", frame, runtime, " + V), this._emitLine(A + " = runtime.markSafe(" + A + ");"), this._addScopeLevel(), O.set(A, A);
              }, C.compileExtends = function(P, O) {
                var T = this._tmpid(), A = this._compileGetTemplate(P, O, !0, !1);
                this._emitLine("parentTemplate = " + A), this._emitLine("for(var " + T + " in parentTemplate.blocks) {"), this._emitLine("context.addBlock(" + T + ", parentTemplate.blocks[" + T + "]);"), this._emitLine("}"), this._addScopeLevel();
              }, C.compileInclude = function(P, O) {
                this._emitLine("var tasks = [];"), this._emitLine("tasks.push("), this._emitLine("function(callback) {");
                var T = this._compileGetTemplate(P, O, !1, P.ignoreMissing);
                this._emitLine("callback(null," + T + ");});"), this._emitLine("});");
                var A = this._tmpid();
                this._emitLine("tasks.push("), this._emitLine("function(template, callback){"), this._emitLine("template.render(context.getVariables(), frame, " + this._makeCallback(A)), this._emitLine("callback(null," + A + ");});"), this._emitLine("});"), this._emitLine("tasks.push("), this._emitLine("function(result, callback){"), this._emitLine(this.buffer + " += result;"), this._emitLine("callback(null);"), this._emitLine("});"), this._emitLine("env.waterfall(tasks, function(){"), this._addScopeLevel();
              }, C.compileTemplateData = function(P, O) {
                this.compileLiteral(P, O);
              }, C.compileCapture = function(P, O) {
                var T = this, A = this.buffer;
                this.buffer = "output", this._emitLine("(function() {"), this._emitLine('var output = "";'), this._withScopedSyntax(function() {
                  T.compile(P.body, O);
                }), this._emitLine("return output;"), this._emitLine("})()"), this.buffer = A;
              }, C.compileOutput = function(P, O) {
                var T = this, A = P.children;
                A.forEach(function(V) {
                  V instanceof u.TemplateData ? V.value && (T._emit(T.buffer + " += "), T.compileLiteral(V, O), T._emitLine(";")) : (T._emit(T.buffer + " += runtime.suppressValue("), T.throwOnUndefined && T._emit("runtime.ensureDefined("), T.compile(V, O), T.throwOnUndefined && T._emit("," + P.lineno + "," + P.colno + ")"), T._emit(`, env.opts.autoescape);
`));
                });
              }, C.compileRoot = function(P, O) {
                var T = this;
                O && this.fail("compileRoot: root node can't have frame"), O = new v(), this._emitFuncBegin(P, "root"), this._emitLine("var parentTemplate = null;"), this._compileChildren(P, O), this._emitLine("if(parentTemplate) {"), this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"), this._emitLine("} else {"), this._emitLine("cb(null, " + this.buffer + ");"), this._emitLine("}"), this._emitFuncEnd(!0), this.inBlock = !0;
                var A = [], V = P.findAll(u.Block);
                V.forEach(function(M, B) {
                  var N = M.name.value;
                  if (A.indexOf(N) !== -1)
                    throw new Error('Block "' + N + '" defined more than once.');
                  A.push(N), T._emitFuncBegin(M, "b_" + N);
                  var H = new v();
                  T._emitLine("var frame = frame.push(true);"), T.compile(M.body, H), T._emitFuncEnd();
                }), this._emitLine("return {"), V.forEach(function(M, B) {
                  var N = "b_" + M.name.value;
                  T._emitLine(N + ": " + N + ",");
                }), this._emitLine(`root: root
};`);
              }, C.compile = function(P, O) {
                var T = this["compile" + P.typename];
                T ? T.call(this, P, O) : this.fail("compile: Cannot compile node: " + P.typename, P.lineno, P.colno);
              }, C.getCode = function() {
                return this.codebuf.join("");
              }, E;
            }(b);
            a.exports = {
              compile: function(E, C, D, P, O) {
                O === void 0 && (O = {});
                var T = new y(P, O.throwOnUndefined), A = (D || []).map(function(M) {
                  return M.preprocess;
                }).filter(function(M) {
                  return !!M;
                }), V = A.reduce(function(M, B) {
                  return B(M);
                }, E);
                return T.compile(d.transform(s.parse(V, D, O), C, P)), T.getCode();
              },
              Compiler: y
            };
          },
          /* 6 */
          /***/
          function(a, r, i) {
            function o(f, h) {
              f.prototype = Object.create(h.prototype), f.prototype.constructor = f, l(f, h);
            }
            function l(f, h) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(v, w) {
                return v.__proto__ = w, v;
              }, l(f, h);
            }
            var s = i(4), d = i(1), u = d.EmitterObj;
            a.exports = /* @__PURE__ */ function(f) {
              o(h, f);
              function h() {
                return f.apply(this, arguments) || this;
              }
              var g = h.prototype;
              return g.resolve = function(w, b) {
                return s.resolve(s.dirname(w), b);
              }, g.isRelative = function(w) {
                return w.indexOf("./") === 0 || w.indexOf("../") === 0;
              }, h;
            }(u);
          },
          /* 7 */
          /***/
          function(a, r, i) {
            function o(H, j) {
              H.prototype = Object.create(j.prototype), H.prototype.constructor = H, l(H, j);
            }
            function l(H, j) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(de, Z) {
                return de.__proto__ = Z, de;
              }, l(H, j);
            }
            var s = i(12), d = i(15), u = i(0), f = i(5), h = i(18), g = i(10), v = g.FileSystemLoader, w = g.WebLoader, b = g.PrecompiledLoader, p = i(20), y = i(21), S = i(1), E = S.Obj, C = S.EmitterObj, D = i(2), P = D.handleError, O = D.Frame, T = i(22);
            function A(H, j, te) {
              s(function() {
                H(j, te);
              });
            }
            var V = {
              type: "code",
              obj: {
                root: function(j, te, de, Z, F) {
                  try {
                    F(null, "");
                  } catch (K) {
                    F(P(K, null, null));
                  }
                }
              }
            }, M = /* @__PURE__ */ function(H) {
              o(j, H);
              function j() {
                return H.apply(this, arguments) || this;
              }
              var te = j.prototype;
              return te.init = function(Z, F) {
                var K = this;
                F = this.opts = F || {}, this.opts.dev = !!F.dev, this.opts.autoescape = F.autoescape != null ? F.autoescape : !0, this.opts.throwOnUndefined = !!F.throwOnUndefined, this.opts.trimBlocks = !!F.trimBlocks, this.opts.lstripBlocks = !!F.lstripBlocks, this.loaders = [], Z ? this.loaders = u.isArray(Z) ? Z : [Z] : v ? this.loaders = [new v("views")] : w && (this.loaders = [new w("/views")]), typeof window < "u" && window.nunjucksPrecompiled && this.loaders.unshift(new b(window.nunjucksPrecompiled)), this._initLoaders(), this.globals = y(), this.filters = {}, this.tests = {}, this.asyncFilters = [], this.extensions = {}, this.extensionsList = [], u._entries(h).forEach(function(se) {
                  var X = se[0], he = se[1];
                  return K.addFilter(X, he);
                }), u._entries(p).forEach(function(se) {
                  var X = se[0], he = se[1];
                  return K.addTest(X, he);
                });
              }, te._initLoaders = function() {
                var Z = this;
                this.loaders.forEach(function(F) {
                  F.cache = {}, typeof F.on == "function" && (F.on("update", function(K, se) {
                    F.cache[K] = null, Z.emit("update", K, se, F);
                  }), F.on("load", function(K, se) {
                    Z.emit("load", K, se, F);
                  }));
                });
              }, te.invalidateCache = function() {
                this.loaders.forEach(function(Z) {
                  Z.cache = {};
                });
              }, te.addExtension = function(Z, F) {
                return F.__name = Z, this.extensions[Z] = F, this.extensionsList.push(F), this;
              }, te.removeExtension = function(Z) {
                var F = this.getExtension(Z);
                F && (this.extensionsList = u.without(this.extensionsList, F), delete this.extensions[Z]);
              }, te.getExtension = function(Z) {
                return this.extensions[Z];
              }, te.hasExtension = function(Z) {
                return !!this.extensions[Z];
              }, te.addGlobal = function(Z, F) {
                return this.globals[Z] = F, this;
              }, te.getGlobal = function(Z) {
                if (typeof this.globals[Z] > "u")
                  throw new Error("global not found: " + Z);
                return this.globals[Z];
              }, te.addFilter = function(Z, F, K) {
                var se = F;
                return K && this.asyncFilters.push(Z), this.filters[Z] = se, this;
              }, te.getFilter = function(Z) {
                if (!this.filters[Z])
                  throw new Error("filter not found: " + Z);
                return this.filters[Z];
              }, te.addTest = function(Z, F) {
                return this.tests[Z] = F, this;
              }, te.getTest = function(Z) {
                if (!this.tests[Z])
                  throw new Error("test not found: " + Z);
                return this.tests[Z];
              }, te.resolveTemplate = function(Z, F, K) {
                var se = Z.isRelative && F ? Z.isRelative(K) : !1;
                return se && Z.resolve ? Z.resolve(F, K) : K;
              }, te.getTemplate = function(Z, F, K, se, X) {
                var he = this, ve = this, pe = null;
                if (Z && Z.raw && (Z = Z.raw), u.isFunction(K) && (X = K, K = null, F = F || !1), u.isFunction(F) && (X = F, F = !1), Z instanceof N)
                  pe = Z;
                else {
                  if (typeof Z != "string")
                    throw new Error("template names must be a string: " + Z);
                  for (var z = 0; z < this.loaders.length; z++) {
                    var ke = this.loaders[z];
                    if (pe = ke.cache[this.resolveTemplate(ke, K, Z)], pe)
                      break;
                  }
                }
                if (pe)
                  if (F && pe.compile(), X) {
                    X(null, pe);
                    return;
                  } else
                    return pe;
                var Me, Le = function(ne, G) {
                  if (!G && !ne && !se && (ne = new Error("template not found: " + Z)), ne)
                    if (X) {
                      X(ne);
                      return;
                    } else
                      throw ne;
                  var le;
                  G ? (le = new N(G.src, he, G.path, F), G.noCache || (G.loader.cache[Z] = le)) : le = new N(V, he, "", F), X ? X(null, le) : Me = le;
                };
                return u.asyncIter(this.loaders, function(ce, ne, G, le) {
                  function Y(Ce, Te) {
                    Ce ? le(Ce) : Te ? (Te.loader = ce, le(null, Te)) : G();
                  }
                  Z = ve.resolveTemplate(ce, K, Z), ce.async ? ce.getSource(Z, Y) : Y(null, ce.getSource(Z));
                }, Le), Me;
              }, te.express = function(Z) {
                return T(this, Z);
              }, te.render = function(Z, F, K) {
                u.isFunction(F) && (K = F, F = null);
                var se = null;
                return this.getTemplate(Z, function(X, he) {
                  if (X && K)
                    A(K, X);
                  else {
                    if (X)
                      throw X;
                    se = he.render(F, K);
                  }
                }), se;
              }, te.renderString = function(Z, F, K, se) {
                u.isFunction(K) && (se = K, K = {}), K = K || {};
                var X = new N(Z, this, K.path);
                return X.render(F, se);
              }, te.waterfall = function(Z, F, K) {
                return d(Z, F, K);
              }, j;
            }(C), B = /* @__PURE__ */ function(H) {
              o(j, H);
              function j() {
                return H.apply(this, arguments) || this;
              }
              var te = j.prototype;
              return te.init = function(Z, F, K) {
                var se = this;
                this.env = K || new M(), this.ctx = u.extend({}, Z), this.blocks = {}, this.exported = [], u.keys(F).forEach(function(X) {
                  se.addBlock(X, F[X]);
                });
              }, te.lookup = function(Z) {
                return Z in this.env.globals && !(Z in this.ctx) ? this.env.globals[Z] : this.ctx[Z];
              }, te.setVariable = function(Z, F) {
                this.ctx[Z] = F;
              }, te.getVariables = function() {
                return this.ctx;
              }, te.addBlock = function(Z, F) {
                return this.blocks[Z] = this.blocks[Z] || [], this.blocks[Z].push(F), this;
              }, te.getBlock = function(Z) {
                if (!this.blocks[Z])
                  throw new Error('unknown block "' + Z + '"');
                return this.blocks[Z][0];
              }, te.getSuper = function(Z, F, K, se, X, he) {
                var ve = u.indexOf(this.blocks[F] || [], K), pe = this.blocks[F][ve + 1], z = this;
                if (ve === -1 || !pe)
                  throw new Error('no super block available for "' + F + '"');
                pe(Z, z, se, X, he);
              }, te.addExport = function(Z) {
                this.exported.push(Z);
              }, te.getExported = function() {
                var Z = this, F = {};
                return this.exported.forEach(function(K) {
                  F[K] = Z.ctx[K];
                }), F;
              }, j;
            }(E), N = /* @__PURE__ */ function(H) {
              o(j, H);
              function j() {
                return H.apply(this, arguments) || this;
              }
              var te = j.prototype;
              return te.init = function(Z, F, K, se) {
                if (this.env = F || new M(), u.isObject(Z))
                  switch (Z.type) {
                    case "code":
                      this.tmplProps = Z.obj;
                      break;
                    case "string":
                      this.tmplStr = Z.obj;
                      break;
                    default:
                      throw new Error("Unexpected template object type " + Z.type + "; expected 'code', or 'string'");
                  }
                else if (u.isString(Z))
                  this.tmplStr = Z;
                else
                  throw new Error("src must be a string or an object describing the source");
                if (this.path = K, se)
                  try {
                    this._compile();
                  } catch (X) {
                    throw u._prettifyError(this.path, this.env.opts.dev, X);
                  }
                else
                  this.compiled = !1;
              }, te.render = function(Z, F, K) {
                var se = this;
                typeof Z == "function" ? (K = Z, Z = {}) : typeof F == "function" && (K = F, F = null);
                var X = !F;
                try {
                  this.compile();
                } catch (Me) {
                  var he = u._prettifyError(this.path, this.env.opts.dev, Me);
                  if (K)
                    return A(K, he);
                  throw he;
                }
                var ve = new B(Z || {}, this.blocks, this.env), pe = F ? F.push(!0) : new O();
                pe.topLevel = !0;
                var z = null, ke = !1;
                return this.rootRenderFunc(this.env, ve, pe, D, function(Me, Le) {
                  if (!(ke && K && typeof Le < "u"))
                    if (Me && (Me = u._prettifyError(se.path, se.env.opts.dev, Me), ke = !0), K)
                      X ? A(K, Me, Le) : K(Me, Le);
                    else {
                      if (Me)
                        throw Me;
                      z = Le;
                    }
                }), z;
              }, te.getExported = function(Z, F, K) {
                typeof Z == "function" && (K = Z, Z = {}), typeof F == "function" && (K = F, F = null);
                try {
                  this.compile();
                } catch (he) {
                  if (K)
                    return K(he);
                  throw he;
                }
                var se = F ? F.push() : new O();
                se.topLevel = !0;
                var X = new B(Z || {}, this.blocks, this.env);
                this.rootRenderFunc(this.env, X, se, D, function(he) {
                  he ? K(he, null) : K(null, X.getExported());
                });
              }, te.compile = function() {
                this.compiled || this._compile();
              }, te._compile = function() {
                var Z;
                if (this.tmplProps)
                  Z = this.tmplProps;
                else {
                  var F = f.compile(this.tmplStr, this.env.asyncFilters, this.env.extensionsList, this.path, this.env.opts), K = new Function(F);
                  Z = K();
                }
                this.blocks = this._getBlocks(Z), this.rootRenderFunc = Z.root, this.compiled = !0;
              }, te._getBlocks = function(Z) {
                var F = {};
                return u.keys(Z).forEach(function(K) {
                  K.slice(0, 2) === "b_" && (F[K.slice(2)] = Z[K]);
                }), F;
              }, j;
            }(E);
            a.exports = {
              Environment: M,
              Template: N
            };
          },
          /* 8 */
          /***/
          function(a, r, i) {
            function o(g, v) {
              g.prototype = Object.create(v.prototype), g.prototype.constructor = g, l(g, v);
            }
            function l(g, v) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(b, p) {
                return b.__proto__ = p, b;
              }, l(g, v);
            }
            var s = i(9), d = i(3), u = i(1).Obj, f = i(0), h = /* @__PURE__ */ function(g) {
              o(v, g);
              function v() {
                return g.apply(this, arguments) || this;
              }
              var w = v.prototype;
              return w.init = function(p) {
                this.tokens = p, this.peeked = null, this.breakOnBlocks = null, this.dropLeadingWhitespace = !1, this.extensions = [];
              }, w.nextToken = function(p) {
                var y;
                if (this.peeked)
                  if (!p && this.peeked.type === s.TOKEN_WHITESPACE)
                    this.peeked = null;
                  else
                    return y = this.peeked, this.peeked = null, y;
                if (y = this.tokens.nextToken(), !p)
                  for (; y && y.type === s.TOKEN_WHITESPACE; )
                    y = this.tokens.nextToken();
                return y;
              }, w.peekToken = function() {
                return this.peeked = this.peeked || this.nextToken(), this.peeked;
              }, w.pushToken = function(p) {
                if (this.peeked)
                  throw new Error("pushToken: can only push one token on between reads");
                this.peeked = p;
              }, w.error = function(p, y, S) {
                if (y === void 0 || S === void 0) {
                  var E = this.peekToken() || {};
                  y = E.lineno, S = E.colno;
                }
                return y !== void 0 && (y += 1), S !== void 0 && (S += 1), new f.TemplateError(p, y, S);
              }, w.fail = function(p, y, S) {
                throw this.error(p, y, S);
              }, w.skip = function(p) {
                var y = this.nextToken();
                return !y || y.type !== p ? (this.pushToken(y), !1) : !0;
              }, w.expect = function(p) {
                var y = this.nextToken();
                return y.type !== p && this.fail("expected " + p + ", got " + y.type, y.lineno, y.colno), y;
              }, w.skipValue = function(p, y) {
                var S = this.nextToken();
                return !S || S.type !== p || S.value !== y ? (this.pushToken(S), !1) : !0;
              }, w.skipSymbol = function(p) {
                return this.skipValue(s.TOKEN_SYMBOL, p);
              }, w.advanceAfterBlockEnd = function(p) {
                var y;
                return p || (y = this.peekToken(), y || this.fail("unexpected end of file"), y.type !== s.TOKEN_SYMBOL && this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"), p = this.nextToken().value), y = this.nextToken(), y && y.type === s.TOKEN_BLOCK_END ? y.value.charAt(0) === "-" && (this.dropLeadingWhitespace = !0) : this.fail("expected block end in " + p + " statement"), y;
              }, w.advanceAfterVariableEnd = function() {
                var p = this.nextToken();
                p && p.type === s.TOKEN_VARIABLE_END ? this.dropLeadingWhitespace = p.value.charAt(p.value.length - this.tokens.tags.VARIABLE_END.length - 1) === "-" : (this.pushToken(p), this.fail("expected variable end"));
              }, w.parseFor = function() {
                var p = this.peekToken(), y, S;
                this.skipSymbol("for") ? (y = new d.For(p.lineno, p.colno), S = "endfor") : this.skipSymbol("asyncEach") ? (y = new d.AsyncEach(p.lineno, p.colno), S = "endeach") : this.skipSymbol("asyncAll") ? (y = new d.AsyncAll(p.lineno, p.colno), S = "endall") : this.fail("parseFor: expected for{Async}", p.lineno, p.colno), y.name = this.parsePrimary(), y.name instanceof d.Symbol || this.fail("parseFor: variable name expected for loop");
                var E = this.peekToken().type;
                if (E === s.TOKEN_COMMA) {
                  var C = y.name;
                  for (y.name = new d.Array(C.lineno, C.colno), y.name.addChild(C); this.skip(s.TOKEN_COMMA); ) {
                    var D = this.parsePrimary();
                    y.name.addChild(D);
                  }
                }
                return this.skipSymbol("in") || this.fail('parseFor: expected "in" keyword for loop', p.lineno, p.colno), y.arr = this.parseExpression(), this.advanceAfterBlockEnd(p.value), y.body = this.parseUntilBlocks(S, "else"), this.skipSymbol("else") && (this.advanceAfterBlockEnd("else"), y.else_ = this.parseUntilBlocks(S)), this.advanceAfterBlockEnd(), y;
              }, w.parseMacro = function() {
                var p = this.peekToken();
                this.skipSymbol("macro") || this.fail("expected macro");
                var y = this.parsePrimary(!0), S = this.parseSignature(), E = new d.Macro(p.lineno, p.colno, y, S);
                return this.advanceAfterBlockEnd(p.value), E.body = this.parseUntilBlocks("endmacro"), this.advanceAfterBlockEnd(), E;
              }, w.parseCall = function() {
                var p = this.peekToken();
                this.skipSymbol("call") || this.fail("expected call");
                var y = this.parseSignature(!0) || new d.NodeList(), S = this.parsePrimary();
                this.advanceAfterBlockEnd(p.value);
                var E = this.parseUntilBlocks("endcall");
                this.advanceAfterBlockEnd();
                var C = new d.Symbol(p.lineno, p.colno, "caller"), D = new d.Caller(p.lineno, p.colno, C, y, E), P = S.args.children;
                P[P.length - 1] instanceof d.KeywordArgs || P.push(new d.KeywordArgs());
                var O = P[P.length - 1];
                return O.addChild(new d.Pair(p.lineno, p.colno, C, D)), new d.Output(p.lineno, p.colno, [S]);
              }, w.parseWithContext = function() {
                var p = this.peekToken(), y = null;
                return this.skipSymbol("with") ? y = !0 : this.skipSymbol("without") && (y = !1), y !== null && (this.skipSymbol("context") || this.fail("parseFrom: expected context after with/without", p.lineno, p.colno)), y;
              }, w.parseImport = function() {
                var p = this.peekToken();
                this.skipSymbol("import") || this.fail("parseImport: expected import", p.lineno, p.colno);
                var y = this.parseExpression();
                this.skipSymbol("as") || this.fail('parseImport: expected "as" keyword', p.lineno, p.colno);
                var S = this.parseExpression(), E = this.parseWithContext(), C = new d.Import(p.lineno, p.colno, y, S, E);
                return this.advanceAfterBlockEnd(p.value), C;
              }, w.parseFrom = function() {
                var p = this.peekToken();
                this.skipSymbol("from") || this.fail("parseFrom: expected from");
                var y = this.parseExpression();
                this.skipSymbol("import") || this.fail("parseFrom: expected import", p.lineno, p.colno);
                for (var S = new d.NodeList(), E; ; ) {
                  var C = this.peekToken();
                  if (C.type === s.TOKEN_BLOCK_END) {
                    S.children.length || this.fail("parseFrom: Expected at least one import name", p.lineno, p.colno), C.value.charAt(0) === "-" && (this.dropLeadingWhitespace = !0), this.nextToken();
                    break;
                  }
                  S.children.length > 0 && !this.skip(s.TOKEN_COMMA) && this.fail("parseFrom: expected comma", p.lineno, p.colno);
                  var D = this.parsePrimary();
                  if (D.value.charAt(0) === "_" && this.fail("parseFrom: names starting with an underscore cannot be imported", D.lineno, D.colno), this.skipSymbol("as")) {
                    var P = this.parsePrimary();
                    S.addChild(new d.Pair(D.lineno, D.colno, D, P));
                  } else
                    S.addChild(D);
                  E = this.parseWithContext();
                }
                return new d.FromImport(p.lineno, p.colno, y, S, E);
              }, w.parseBlock = function() {
                var p = this.peekToken();
                this.skipSymbol("block") || this.fail("parseBlock: expected block", p.lineno, p.colno);
                var y = new d.Block(p.lineno, p.colno);
                y.name = this.parsePrimary(), y.name instanceof d.Symbol || this.fail("parseBlock: variable name expected", p.lineno, p.colno), this.advanceAfterBlockEnd(p.value), y.body = this.parseUntilBlocks("endblock"), this.skipSymbol("endblock"), this.skipSymbol(y.name.value);
                var S = this.peekToken();
                return S || this.fail("parseBlock: expected endblock, got end of file"), this.advanceAfterBlockEnd(S.value), y;
              }, w.parseExtends = function() {
                var p = "extends", y = this.peekToken();
                this.skipSymbol(p) || this.fail("parseTemplateRef: expected " + p);
                var S = new d.Extends(y.lineno, y.colno);
                return S.template = this.parseExpression(), this.advanceAfterBlockEnd(y.value), S;
              }, w.parseInclude = function() {
                var p = "include", y = this.peekToken();
                this.skipSymbol(p) || this.fail("parseInclude: expected " + p);
                var S = new d.Include(y.lineno, y.colno);
                return S.template = this.parseExpression(), this.skipSymbol("ignore") && this.skipSymbol("missing") && (S.ignoreMissing = !0), this.advanceAfterBlockEnd(y.value), S;
              }, w.parseIf = function() {
                var p = this.peekToken(), y;
                this.skipSymbol("if") || this.skipSymbol("elif") || this.skipSymbol("elseif") ? y = new d.If(p.lineno, p.colno) : this.skipSymbol("ifAsync") ? y = new d.IfAsync(p.lineno, p.colno) : this.fail("parseIf: expected if, elif, or elseif", p.lineno, p.colno), y.cond = this.parseExpression(), this.advanceAfterBlockEnd(p.value), y.body = this.parseUntilBlocks("elif", "elseif", "else", "endif");
                var S = this.peekToken();
                switch (S && S.value) {
                  case "elseif":
                  case "elif":
                    y.else_ = this.parseIf();
                    break;
                  case "else":
                    this.advanceAfterBlockEnd(), y.else_ = this.parseUntilBlocks("endif"), this.advanceAfterBlockEnd();
                    break;
                  case "endif":
                    y.else_ = null, this.advanceAfterBlockEnd();
                    break;
                  default:
                    this.fail("parseIf: expected elif, else, or endif, got end of file");
                }
                return y;
              }, w.parseSet = function() {
                var p = this.peekToken();
                this.skipSymbol("set") || this.fail("parseSet: expected set", p.lineno, p.colno);
                for (var y = new d.Set(p.lineno, p.colno, []), S; (S = this.parsePrimary()) && (y.targets.push(S), !!this.skip(s.TOKEN_COMMA)); )
                  ;
                return this.skipValue(s.TOKEN_OPERATOR, "=") ? (y.value = this.parseExpression(), this.advanceAfterBlockEnd(p.value)) : this.skip(s.TOKEN_BLOCK_END) ? (y.body = new d.Capture(p.lineno, p.colno, this.parseUntilBlocks("endset")), y.value = null, this.advanceAfterBlockEnd()) : this.fail("parseSet: expected = or block end in set tag", p.lineno, p.colno), y;
              }, w.parseSwitch = function() {
                var p = "switch", y = "endswitch", S = "case", E = "default", C = this.peekToken();
                !this.skipSymbol(p) && !this.skipSymbol(S) && !this.skipSymbol(E) && this.fail('parseSwitch: expected "switch," "case" or "default"', C.lineno, C.colno);
                var D = this.parseExpression();
                this.advanceAfterBlockEnd(p), this.parseUntilBlocks(S, E, y);
                var P = this.peekToken(), O = [], T;
                do {
                  this.skipSymbol(S);
                  var A = this.parseExpression();
                  this.advanceAfterBlockEnd(p);
                  var V = this.parseUntilBlocks(S, E, y);
                  O.push(new d.Case(P.line, P.col, A, V)), P = this.peekToken();
                } while (P && P.value === S);
                switch (P.value) {
                  case E:
                    this.advanceAfterBlockEnd(), T = this.parseUntilBlocks(y), this.advanceAfterBlockEnd();
                    break;
                  case y:
                    this.advanceAfterBlockEnd();
                    break;
                  default:
                    this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.');
                }
                return new d.Switch(C.lineno, C.colno, D, O, T);
              }, w.parseStatement = function() {
                var p = this.peekToken(), y;
                if (p.type !== s.TOKEN_SYMBOL && this.fail("tag name expected", p.lineno, p.colno), this.breakOnBlocks && f.indexOf(this.breakOnBlocks, p.value) !== -1)
                  return null;
                switch (p.value) {
                  case "raw":
                    return this.parseRaw();
                  case "verbatim":
                    return this.parseRaw("verbatim");
                  case "if":
                  case "ifAsync":
                    return this.parseIf();
                  case "for":
                  case "asyncEach":
                  case "asyncAll":
                    return this.parseFor();
                  case "block":
                    return this.parseBlock();
                  case "extends":
                    return this.parseExtends();
                  case "include":
                    return this.parseInclude();
                  case "set":
                    return this.parseSet();
                  case "macro":
                    return this.parseMacro();
                  case "call":
                    return this.parseCall();
                  case "import":
                    return this.parseImport();
                  case "from":
                    return this.parseFrom();
                  case "filter":
                    return this.parseFilterStatement();
                  case "switch":
                    return this.parseSwitch();
                  default:
                    if (this.extensions.length)
                      for (var S = 0; S < this.extensions.length; S++) {
                        var E = this.extensions[S];
                        if (f.indexOf(E.tags || [], p.value) !== -1)
                          return E.parse(this, d, s);
                      }
                    this.fail("unknown block tag: " + p.value, p.lineno, p.colno);
                }
                return y;
              }, w.parseRaw = function(p) {
                p = p || "raw";
                for (var y = "end" + p, S = new RegExp("([\\s\\S]*?){%\\s*(" + p + "|" + y + ")\\s*(?=%})%}"), E = 1, C = "", D = null, P = this.advanceAfterBlockEnd(); (D = this.tokens._extractRegex(S)) && E > 0; ) {
                  var O = D[0], T = D[1], A = D[2];
                  A === p ? E += 1 : A === y && (E -= 1), E === 0 ? (C += T, this.tokens.backN(O.length - T.length)) : C += O;
                }
                return new d.Output(P.lineno, P.colno, [new d.TemplateData(P.lineno, P.colno, C)]);
              }, w.parsePostfix = function(p) {
                for (var y, S = this.peekToken(); S; ) {
                  if (S.type === s.TOKEN_LEFT_PAREN)
                    p = new d.FunCall(S.lineno, S.colno, p, this.parseSignature());
                  else if (S.type === s.TOKEN_LEFT_BRACKET)
                    y = this.parseAggregate(), y.children.length > 1 && this.fail("invalid index"), p = new d.LookupVal(S.lineno, S.colno, p, y.children[0]);
                  else if (S.type === s.TOKEN_OPERATOR && S.value === ".") {
                    this.nextToken();
                    var E = this.nextToken();
                    E.type !== s.TOKEN_SYMBOL && this.fail("expected name as lookup value, got " + E.value, E.lineno, E.colno), y = new d.Literal(E.lineno, E.colno, E.value), p = new d.LookupVal(S.lineno, S.colno, p, y);
                  } else
                    break;
                  S = this.peekToken();
                }
                return p;
              }, w.parseExpression = function() {
                var p = this.parseInlineIf();
                return p;
              }, w.parseInlineIf = function() {
                var p = this.parseOr();
                if (this.skipSymbol("if")) {
                  var y = this.parseOr(), S = p;
                  p = new d.InlineIf(p.lineno, p.colno), p.body = S, p.cond = y, this.skipSymbol("else") ? p.else_ = this.parseOr() : p.else_ = null;
                }
                return p;
              }, w.parseOr = function() {
                for (var p = this.parseAnd(); this.skipSymbol("or"); ) {
                  var y = this.parseAnd();
                  p = new d.Or(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseAnd = function() {
                for (var p = this.parseNot(); this.skipSymbol("and"); ) {
                  var y = this.parseNot();
                  p = new d.And(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseNot = function() {
                var p = this.peekToken();
                return this.skipSymbol("not") ? new d.Not(p.lineno, p.colno, this.parseNot()) : this.parseIn();
              }, w.parseIn = function() {
                for (var p = this.parseIs(); ; ) {
                  var y = this.nextToken();
                  if (!y)
                    break;
                  var S = y.type === s.TOKEN_SYMBOL && y.value === "not";
                  if (S || this.pushToken(y), this.skipSymbol("in")) {
                    var E = this.parseIs();
                    p = new d.In(p.lineno, p.colno, p, E), S && (p = new d.Not(p.lineno, p.colno, p));
                  } else {
                    S && this.pushToken(y);
                    break;
                  }
                }
                return p;
              }, w.parseIs = function() {
                var p = this.parseCompare();
                if (this.skipSymbol("is")) {
                  var y = this.skipSymbol("not"), S = this.parseCompare();
                  p = new d.Is(p.lineno, p.colno, p, S), y && (p = new d.Not(p.lineno, p.colno, p));
                }
                return p;
              }, w.parseCompare = function() {
                for (var p = ["==", "===", "!=", "!==", "<", ">", "<=", ">="], y = this.parseConcat(), S = []; ; ) {
                  var E = this.nextToken();
                  if (E)
                    if (p.indexOf(E.value) !== -1)
                      S.push(new d.CompareOperand(E.lineno, E.colno, this.parseConcat(), E.value));
                    else {
                      this.pushToken(E);
                      break;
                    }
                  else break;
                }
                return S.length ? new d.Compare(S[0].lineno, S[0].colno, y, S) : y;
              }, w.parseConcat = function() {
                for (var p = this.parseAdd(); this.skipValue(s.TOKEN_TILDE, "~"); ) {
                  var y = this.parseAdd();
                  p = new d.Concat(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseAdd = function() {
                for (var p = this.parseSub(); this.skipValue(s.TOKEN_OPERATOR, "+"); ) {
                  var y = this.parseSub();
                  p = new d.Add(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseSub = function() {
                for (var p = this.parseMul(); this.skipValue(s.TOKEN_OPERATOR, "-"); ) {
                  var y = this.parseMul();
                  p = new d.Sub(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseMul = function() {
                for (var p = this.parseDiv(); this.skipValue(s.TOKEN_OPERATOR, "*"); ) {
                  var y = this.parseDiv();
                  p = new d.Mul(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseDiv = function() {
                for (var p = this.parseFloorDiv(); this.skipValue(s.TOKEN_OPERATOR, "/"); ) {
                  var y = this.parseFloorDiv();
                  p = new d.Div(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseFloorDiv = function() {
                for (var p = this.parseMod(); this.skipValue(s.TOKEN_OPERATOR, "//"); ) {
                  var y = this.parseMod();
                  p = new d.FloorDiv(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseMod = function() {
                for (var p = this.parsePow(); this.skipValue(s.TOKEN_OPERATOR, "%"); ) {
                  var y = this.parsePow();
                  p = new d.Mod(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parsePow = function() {
                for (var p = this.parseUnary(); this.skipValue(s.TOKEN_OPERATOR, "**"); ) {
                  var y = this.parseUnary();
                  p = new d.Pow(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseUnary = function(p) {
                var y = this.peekToken(), S;
                return this.skipValue(s.TOKEN_OPERATOR, "-") ? S = new d.Neg(y.lineno, y.colno, this.parseUnary(!0)) : this.skipValue(s.TOKEN_OPERATOR, "+") ? S = new d.Pos(y.lineno, y.colno, this.parseUnary(!0)) : S = this.parsePrimary(), p || (S = this.parseFilter(S)), S;
              }, w.parsePrimary = function(p) {
                var y = this.nextToken(), S, E = null;
                if (y ? y.type === s.TOKEN_STRING ? S = y.value : y.type === s.TOKEN_INT ? S = parseInt(y.value, 10) : y.type === s.TOKEN_FLOAT ? S = parseFloat(y.value) : y.type === s.TOKEN_BOOLEAN ? y.value === "true" ? S = !0 : y.value === "false" ? S = !1 : this.fail("invalid boolean: " + y.value, y.lineno, y.colno) : y.type === s.TOKEN_NONE ? S = null : y.type === s.TOKEN_REGEX && (S = new RegExp(y.value.body, y.value.flags)) : this.fail("expected expression, got end of file"), S !== void 0 ? E = new d.Literal(y.lineno, y.colno, S) : y.type === s.TOKEN_SYMBOL ? E = new d.Symbol(y.lineno, y.colno, y.value) : (this.pushToken(y), E = this.parseAggregate()), p || (E = this.parsePostfix(E)), E)
                  return E;
                throw this.error("unexpected token: " + y.value, y.lineno, y.colno);
              }, w.parseFilterName = function() {
                for (var p = this.expect(s.TOKEN_SYMBOL), y = p.value; this.skipValue(s.TOKEN_OPERATOR, "."); )
                  y += "." + this.expect(s.TOKEN_SYMBOL).value;
                return new d.Symbol(p.lineno, p.colno, y);
              }, w.parseFilterArgs = function(p) {
                if (this.peekToken().type === s.TOKEN_LEFT_PAREN) {
                  var y = this.parsePostfix(p);
                  return y.args.children;
                }
                return [];
              }, w.parseFilter = function(p) {
                for (; this.skip(s.TOKEN_PIPE); ) {
                  var y = this.parseFilterName();
                  p = new d.Filter(y.lineno, y.colno, y, new d.NodeList(y.lineno, y.colno, [p].concat(this.parseFilterArgs(p))));
                }
                return p;
              }, w.parseFilterStatement = function() {
                var p = this.peekToken();
                this.skipSymbol("filter") || this.fail("parseFilterStatement: expected filter");
                var y = this.parseFilterName(), S = this.parseFilterArgs(y);
                this.advanceAfterBlockEnd(p.value);
                var E = new d.Capture(y.lineno, y.colno, this.parseUntilBlocks("endfilter"));
                this.advanceAfterBlockEnd();
                var C = new d.Filter(y.lineno, y.colno, y, new d.NodeList(y.lineno, y.colno, [E].concat(S)));
                return new d.Output(y.lineno, y.colno, [C]);
              }, w.parseAggregate = function() {
                var p = this.nextToken(), y;
                switch (p.type) {
                  case s.TOKEN_LEFT_PAREN:
                    y = new d.Group(p.lineno, p.colno);
                    break;
                  case s.TOKEN_LEFT_BRACKET:
                    y = new d.Array(p.lineno, p.colno);
                    break;
                  case s.TOKEN_LEFT_CURLY:
                    y = new d.Dict(p.lineno, p.colno);
                    break;
                  default:
                    return null;
                }
                for (; ; ) {
                  var S = this.peekToken().type;
                  if (S === s.TOKEN_RIGHT_PAREN || S === s.TOKEN_RIGHT_BRACKET || S === s.TOKEN_RIGHT_CURLY) {
                    this.nextToken();
                    break;
                  }
                  if (y.children.length > 0 && (this.skip(s.TOKEN_COMMA) || this.fail("parseAggregate: expected comma after expression", p.lineno, p.colno)), y instanceof d.Dict) {
                    var E = this.parsePrimary();
                    this.skip(s.TOKEN_COLON) || this.fail("parseAggregate: expected colon after dict key", p.lineno, p.colno);
                    var C = this.parseExpression();
                    y.addChild(new d.Pair(E.lineno, E.colno, E, C));
                  } else {
                    var D = this.parseExpression();
                    y.addChild(D);
                  }
                }
                return y;
              }, w.parseSignature = function(p, y) {
                var S = this.peekToken();
                if (!y && S.type !== s.TOKEN_LEFT_PAREN) {
                  if (p)
                    return null;
                  this.fail("expected arguments", S.lineno, S.colno);
                }
                S.type === s.TOKEN_LEFT_PAREN && (S = this.nextToken());
                for (var E = new d.NodeList(S.lineno, S.colno), C = new d.KeywordArgs(S.lineno, S.colno), D = !1; ; ) {
                  if (S = this.peekToken(), !y && S.type === s.TOKEN_RIGHT_PAREN) {
                    this.nextToken();
                    break;
                  } else if (y && S.type === s.TOKEN_BLOCK_END)
                    break;
                  if (D && !this.skip(s.TOKEN_COMMA))
                    this.fail("parseSignature: expected comma after expression", S.lineno, S.colno);
                  else {
                    var P = this.parseExpression();
                    this.skipValue(s.TOKEN_OPERATOR, "=") ? C.addChild(new d.Pair(P.lineno, P.colno, P, this.parseExpression())) : E.addChild(P);
                  }
                  D = !0;
                }
                return C.children.length && E.addChild(C), E;
              }, w.parseUntilBlocks = function() {
                for (var p = this.breakOnBlocks, y = arguments.length, S = new Array(y), E = 0; E < y; E++)
                  S[E] = arguments[E];
                this.breakOnBlocks = S;
                var C = this.parse();
                return this.breakOnBlocks = p, C;
              }, w.parseNodes = function() {
                for (var p, y = []; p = this.nextToken(); )
                  if (p.type === s.TOKEN_DATA) {
                    var S = p.value, E = this.peekToken(), C = E && E.value;
                    this.dropLeadingWhitespace && (S = S.replace(/^\s*/, ""), this.dropLeadingWhitespace = !1), E && (E.type === s.TOKEN_BLOCK_START && C.charAt(C.length - 1) === "-" || E.type === s.TOKEN_VARIABLE_START && C.charAt(this.tokens.tags.VARIABLE_START.length) === "-" || E.type === s.TOKEN_COMMENT && C.charAt(this.tokens.tags.COMMENT_START.length) === "-") && (S = S.replace(/\s*$/, "")), y.push(new d.Output(p.lineno, p.colno, [new d.TemplateData(p.lineno, p.colno, S)]));
                  } else if (p.type === s.TOKEN_BLOCK_START) {
                    this.dropLeadingWhitespace = !1;
                    var D = this.parseStatement();
                    if (!D)
                      break;
                    y.push(D);
                  } else if (p.type === s.TOKEN_VARIABLE_START) {
                    var P = this.parseExpression();
                    this.dropLeadingWhitespace = !1, this.advanceAfterVariableEnd(), y.push(new d.Output(p.lineno, p.colno, [P]));
                  } else p.type === s.TOKEN_COMMENT ? this.dropLeadingWhitespace = p.value.charAt(p.value.length - this.tokens.tags.COMMENT_END.length - 1) === "-" : this.fail("Unexpected token at top-level: " + p.type, p.lineno, p.colno);
                return y;
              }, w.parse = function() {
                return new d.NodeList(0, 0, this.parseNodes());
              }, w.parseAsRoot = function() {
                return new d.Root(0, 0, this.parseNodes());
              }, v;
            }(u);
            a.exports = {
              parse: function(v, w, b) {
                var p = new h(s.lex(v, b));
                return w !== void 0 && (p.extensions = w), p.parseAsRoot();
              },
              Parser: h
            };
          },
          /* 9 */
          /***/
          function(a, r, i) {
            var o = i(0), l = ` 
	\r `, s = "()[]{}%*-+~/#,:|.<>=!", d = "0123456789", u = "{%", f = "%}", h = "{{", g = "}}", v = "{#", w = "#}", b = "string", p = "whitespace", y = "data", S = "block-start", E = "block-end", C = "variable-start", D = "variable-end", P = "comment", O = "left-paren", T = "right-paren", A = "left-bracket", V = "right-bracket", M = "left-curly", B = "right-curly", N = "operator", H = "comma", j = "colon", te = "tilde", de = "pipe", Z = "int", F = "float", K = "boolean", se = "none", X = "symbol", he = "special", ve = "regex";
            function pe(ke, Me, Le, ce) {
              return {
                type: ke,
                value: Me,
                lineno: Le,
                colno: ce
              };
            }
            var z = /* @__PURE__ */ function() {
              function ke(Le, ce) {
                this.str = Le, this.index = 0, this.len = Le.length, this.lineno = 0, this.colno = 0, this.in_code = !1, ce = ce || {};
                var ne = ce.tags || {};
                this.tags = {
                  BLOCK_START: ne.blockStart || u,
                  BLOCK_END: ne.blockEnd || f,
                  VARIABLE_START: ne.variableStart || h,
                  VARIABLE_END: ne.variableEnd || g,
                  COMMENT_START: ne.commentStart || v,
                  COMMENT_END: ne.commentEnd || w
                }, this.trimBlocks = !!ce.trimBlocks, this.lstripBlocks = !!ce.lstripBlocks;
              }
              var Me = ke.prototype;
              return Me.nextToken = function() {
                var ce = this.lineno, ne = this.colno, G;
                if (this.in_code) {
                  var le = this.current();
                  if (this.isFinished())
                    return null;
                  if (le === '"' || le === "'")
                    return pe(b, this._parseString(le), ce, ne);
                  if (G = this._extract(l))
                    return pe(p, G, ce, ne);
                  if ((G = this._extractString(this.tags.BLOCK_END)) || (G = this._extractString("-" + this.tags.BLOCK_END)))
                    return this.in_code = !1, this.trimBlocks && (le = this.current(), le === `
` ? this.forward() : le === "\r" && (this.forward(), le = this.current(), le === `
` ? this.forward() : this.back())), pe(E, G, ce, ne);
                  if ((G = this._extractString(this.tags.VARIABLE_END)) || (G = this._extractString("-" + this.tags.VARIABLE_END)))
                    return this.in_code = !1, pe(D, G, ce, ne);
                  if (le === "r" && this.str.charAt(this.index + 1) === "/") {
                    this.forwardN(2);
                    for (var Y = ""; !this.isFinished(); )
                      if (this.current() === "/" && this.previous() !== "\\") {
                        this.forward();
                        break;
                      } else
                        Y += this.current(), this.forward();
                    for (var Ce = ["g", "i", "m", "y"], Te = ""; !this.isFinished(); ) {
                      var ie = Ce.indexOf(this.current()) !== -1;
                      if (ie)
                        Te += this.current(), this.forward();
                      else
                        break;
                    }
                    return pe(ve, {
                      body: Y,
                      flags: Te
                    }, ce, ne);
                  } else if (s.indexOf(le) !== -1) {
                    this.forward();
                    var ge = ["==", "===", "!=", "!==", "<=", ">=", "//", "**"], Pe = le + this.current(), Ee;
                    switch (o.indexOf(ge, Pe) !== -1 && (this.forward(), le = Pe, o.indexOf(ge, Pe + this.current()) !== -1 && (le = Pe + this.current(), this.forward())), le) {
                      case "(":
                        Ee = O;
                        break;
                      case ")":
                        Ee = T;
                        break;
                      case "[":
                        Ee = A;
                        break;
                      case "]":
                        Ee = V;
                        break;
                      case "{":
                        Ee = M;
                        break;
                      case "}":
                        Ee = B;
                        break;
                      case ",":
                        Ee = H;
                        break;
                      case ":":
                        Ee = j;
                        break;
                      case "~":
                        Ee = te;
                        break;
                      case "|":
                        Ee = de;
                        break;
                      default:
                        Ee = N;
                    }
                    return pe(Ee, le, ce, ne);
                  } else if (G = this._extractUntil(l + s), G.match(/^[-+]?[0-9]+$/))
                    if (this.current() === ".") {
                      this.forward();
                      var Je = this._extract(d);
                      return pe(F, G + "." + Je, ce, ne);
                    } else
                      return pe(Z, G, ce, ne);
                  else {
                    if (G.match(/^(true|false)$/))
                      return pe(K, G, ce, ne);
                    if (G === "none")
                      return pe(se, G, ce, ne);
                    if (G === "null")
                      return pe(se, G, ce, ne);
                    if (G)
                      return pe(X, G, ce, ne);
                    throw new Error("Unexpected value while parsing: " + G);
                  }
                } else {
                  var _e = this.tags.BLOCK_START.charAt(0) + this.tags.VARIABLE_START.charAt(0) + this.tags.COMMENT_START.charAt(0) + this.tags.COMMENT_END.charAt(0);
                  if (this.isFinished())
                    return null;
                  if ((G = this._extractString(this.tags.BLOCK_START + "-")) || (G = this._extractString(this.tags.BLOCK_START)))
                    return this.in_code = !0, pe(S, G, ce, ne);
                  if ((G = this._extractString(this.tags.VARIABLE_START + "-")) || (G = this._extractString(this.tags.VARIABLE_START)))
                    return this.in_code = !0, pe(C, G, ce, ne);
                  G = "";
                  var $e, Ze = !1;
                  for (this._matches(this.tags.COMMENT_START) && (Ze = !0, G = this._extractString(this.tags.COMMENT_START)); ($e = this._extractUntil(_e)) !== null; )
                    if (G += $e, (this._matches(this.tags.BLOCK_START) || this._matches(this.tags.VARIABLE_START) || this._matches(this.tags.COMMENT_START)) && !Ze) {
                      if (this.lstripBlocks && this._matches(this.tags.BLOCK_START) && this.colno > 0 && this.colno <= G.length) {
                        var _t = G.slice(-this.colno);
                        if (/^\s+$/.test(_t) && (G = G.slice(0, -this.colno), !G.length))
                          return this.nextToken();
                      }
                      break;
                    } else if (this._matches(this.tags.COMMENT_END)) {
                      if (!Ze)
                        throw new Error("unexpected end of comment");
                      G += this._extractString(this.tags.COMMENT_END);
                      break;
                    } else
                      G += this.current(), this.forward();
                  if ($e === null && Ze)
                    throw new Error("expected end of comment, got end of file");
                  return pe(Ze ? P : y, G, ce, ne);
                }
              }, Me._parseString = function(ce) {
                this.forward();
                for (var ne = ""; !this.isFinished() && this.current() !== ce; ) {
                  var G = this.current();
                  if (G === "\\") {
                    switch (this.forward(), this.current()) {
                      case "n":
                        ne += `
`;
                        break;
                      case "t":
                        ne += "	";
                        break;
                      case "r":
                        ne += "\r";
                        break;
                      default:
                        ne += this.current();
                    }
                    this.forward();
                  } else
                    ne += G, this.forward();
                }
                return this.forward(), ne;
              }, Me._matches = function(ce) {
                if (this.index + ce.length > this.len)
                  return null;
                var ne = this.str.slice(this.index, this.index + ce.length);
                return ne === ce;
              }, Me._extractString = function(ce) {
                return this._matches(ce) ? (this.forwardN(ce.length), ce) : null;
              }, Me._extractUntil = function(ce) {
                return this._extractMatching(!0, ce || "");
              }, Me._extract = function(ce) {
                return this._extractMatching(!1, ce);
              }, Me._extractMatching = function(ce, ne) {
                if (this.isFinished())
                  return null;
                var G = ne.indexOf(this.current());
                if (ce && G === -1 || !ce && G !== -1) {
                  var le = this.current();
                  this.forward();
                  for (var Y = ne.indexOf(this.current()); (ce && Y === -1 || !ce && Y !== -1) && !this.isFinished(); )
                    le += this.current(), this.forward(), Y = ne.indexOf(this.current());
                  return le;
                }
                return "";
              }, Me._extractRegex = function(ce) {
                var ne = this.currentStr().match(ce);
                return ne ? (this.forwardN(ne[0].length), ne) : null;
              }, Me.isFinished = function() {
                return this.index >= this.len;
              }, Me.forwardN = function(ce) {
                for (var ne = 0; ne < ce; ne++)
                  this.forward();
              }, Me.forward = function() {
                this.index++, this.previous() === `
` ? (this.lineno++, this.colno = 0) : this.colno++;
              }, Me.backN = function(ce) {
                for (var ne = 0; ne < ce; ne++)
                  this.back();
              }, Me.back = function() {
                if (this.index--, this.current() === `
`) {
                  this.lineno--;
                  var ce = this.src.lastIndexOf(`
`, this.index - 1);
                  ce === -1 ? this.colno = this.index : this.colno = this.index - ce;
                } else
                  this.colno--;
              }, Me.current = function() {
                return this.isFinished() ? "" : this.str.charAt(this.index);
              }, Me.currentStr = function() {
                return this.isFinished() ? "" : this.str.substr(this.index);
              }, Me.previous = function() {
                return this.str.charAt(this.index - 1);
              }, ke;
            }();
            a.exports = {
              lex: function(Me, Le) {
                return new z(Me, Le);
              },
              TOKEN_STRING: b,
              TOKEN_WHITESPACE: p,
              TOKEN_DATA: y,
              TOKEN_BLOCK_START: S,
              TOKEN_BLOCK_END: E,
              TOKEN_VARIABLE_START: C,
              TOKEN_VARIABLE_END: D,
              TOKEN_COMMENT: P,
              TOKEN_LEFT_PAREN: O,
              TOKEN_RIGHT_PAREN: T,
              TOKEN_LEFT_BRACKET: A,
              TOKEN_RIGHT_BRACKET: V,
              TOKEN_LEFT_CURLY: M,
              TOKEN_RIGHT_CURLY: B,
              TOKEN_OPERATOR: N,
              TOKEN_COMMA: H,
              TOKEN_COLON: j,
              TOKEN_TILDE: te,
              TOKEN_PIPE: de,
              TOKEN_INT: Z,
              TOKEN_FLOAT: F,
              TOKEN_BOOLEAN: K,
              TOKEN_NONE: se,
              TOKEN_SYMBOL: X,
              TOKEN_SPECIAL: he,
              TOKEN_REGEX: ve
            };
          },
          /* 10 */
          /***/
          function(a, r, i) {
            function o(h, g) {
              h.prototype = Object.create(g.prototype), h.prototype.constructor = h, l(h, g);
            }
            function l(h, g) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(w, b) {
                return w.__proto__ = b, w;
              }, l(h, g);
            }
            var s = i(6), d = i(19), u = d.PrecompiledLoader, f = /* @__PURE__ */ function(h) {
              o(g, h);
              function g(w, b) {
                var p;
                return p = h.call(this) || this, p.baseURL = w || ".", b = b || {}, p.useCache = !!b.useCache, p.async = !!b.async, p;
              }
              var v = g.prototype;
              return v.resolve = function(b, p) {
                throw new Error("relative templates not support in the browser yet");
              }, v.getSource = function(b, p) {
                var y = this, S = this.useCache, E;
                return this.fetch(this.baseURL + "/" + b, function(C, D) {
                  if (C)
                    if (p)
                      p(C.content);
                    else if (C.status === 404)
                      E = null;
                    else
                      throw C.content;
                  else
                    E = {
                      src: D,
                      path: b,
                      noCache: !S
                    }, y.emit("load", b, E), p && p(null, E);
                }), E;
              }, v.fetch = function(b, p) {
                if (typeof window > "u")
                  throw new Error("WebLoader can only by used in a browser");
                var y = new XMLHttpRequest(), S = !0;
                y.onreadystatechange = function() {
                  y.readyState === 4 && S && (S = !1, y.status === 0 || y.status === 200 ? p(null, y.responseText) : p({
                    status: y.status,
                    content: y.responseText
                  }));
                }, b += (b.indexOf("?") === -1 ? "?" : "&") + "s=" + (/* @__PURE__ */ new Date()).getTime(), y.open("GET", b, this.async), y.send();
              }, g;
            }(s);
            a.exports = {
              WebLoader: f,
              PrecompiledLoader: u
            };
          },
          /* 11 */
          /***/
          function(a, r, i) {
            var o = i(0), l = i(7), s = l.Environment, d = l.Template, u = i(6), f = i(10), h = i(23), g = i(5), v = i(8), w = i(9), b = i(2), p = i(3), y = i(25), S;
            function E(C, D) {
              D = D || {}, o.isObject(C) && (D = C, C = null);
              var P;
              return f.FileSystemLoader ? P = new f.FileSystemLoader(C, {
                watch: D.watch,
                noCache: D.noCache
              }) : f.WebLoader && (P = new f.WebLoader(C, {
                useCache: D.web && D.web.useCache,
                async: D.web && D.web.async
              })), S = new s(P, D), D && D.express && S.express(D.express), S;
            }
            a.exports = {
              Environment: s,
              Template: d,
              Loader: u,
              FileSystemLoader: f.FileSystemLoader,
              NodeResolveLoader: f.NodeResolveLoader,
              PrecompiledLoader: f.PrecompiledLoader,
              WebLoader: f.WebLoader,
              compiler: g,
              parser: v,
              lexer: w,
              runtime: b,
              lib: o,
              nodes: p,
              installJinjaCompat: y,
              configure: E,
              reset: function() {
                S = void 0;
              },
              compile: function(D, P, O, T) {
                return S || E(), new d(D, P, O, T);
              },
              render: function(D, P, O) {
                return S || E(), S.render(D, P, O);
              },
              renderString: function(D, P, O) {
                return S || E(), S.renderString(D, P, O);
              },
              precompile: h ? h.precompile : void 0,
              precompileString: h ? h.precompileString : void 0
            };
          },
          /* 12 */
          /***/
          function(a, r, i) {
            var o = i(13), l = [], s = [], d = o.makeRequestCallFromTimer(u);
            function u() {
              if (s.length)
                throw s.shift();
            }
            a.exports = f;
            function f(g) {
              var v;
              l.length ? v = l.pop() : v = new h(), v.task = g, o(v);
            }
            function h() {
              this.task = null;
            }
            h.prototype.call = function() {
              try {
                this.task.call();
              } catch (g) {
                f.onerror ? f.onerror(g) : (s.push(g), d());
              } finally {
                this.task = null, l[l.length] = this;
              }
            };
          },
          /* 13 */
          /***/
          function(a, r, i) {
            (function(o) {
              a.exports = l;
              function l(p) {
                s.length || d(), s[s.length] = p;
              }
              var s = [], d, u = 0, f = 1024;
              function h() {
                for (; u < s.length; ) {
                  var p = u;
                  if (u = u + 1, s[p].call(), u > f) {
                    for (var y = 0, S = s.length - u; y < S; y++)
                      s[y] = s[y + u];
                    s.length -= u, u = 0;
                  }
                }
                s.length = 0, u = 0;
              }
              var g = typeof o < "u" ? o : self, v = g.MutationObserver || g.WebKitMutationObserver;
              typeof v == "function" ? d = w(h) : d = b(h), l.requestFlush = d;
              function w(p) {
                var y = 1, S = new v(p), E = document.createTextNode("");
                return S.observe(E, { characterData: !0 }), function() {
                  y = -y, E.data = y;
                };
              }
              function b(p) {
                return function() {
                  var S = setTimeout(C, 0), E = setInterval(C, 50);
                  function C() {
                    clearTimeout(S), clearInterval(E), p();
                  }
                };
              }
              l.makeRequestCallFromTimer = b;
            }).call(r, i(14));
          },
          /* 14 */
          /***/
          function(a, r) {
            var i;
            i = /* @__PURE__ */ function() {
              return this;
            }();
            try {
              i = i || Function("return this")() || (0, eval)("this");
            } catch {
              typeof window == "object" && (i = window);
            }
            a.exports = i;
          },
          /* 15 */
          /***/
          function(a, r, i) {
            var o, l;
            (function(s) {
              var d = function() {
                var v = Array.prototype.slice.call(arguments);
                typeof v[0] == "function" && v[0].apply(null, v.splice(1));
              }, u = function(v) {
                typeof setImmediate == "function" ? setImmediate(v) : typeof n < "u" && n.nextTick ? n.nextTick(v) : setTimeout(v, 0);
              }, f = function(v) {
                var w = function(b) {
                  var p = function() {
                    return v.length && v[b].apply(null, arguments), p.next();
                  };
                  return p.next = function() {
                    return b < v.length - 1 ? w(b + 1) : null;
                  }, p;
                };
                return w(0);
              }, h = Array.isArray || function(v) {
                return Object.prototype.toString.call(v) === "[object Array]";
              }, g = function(v, w, b) {
                var p = b ? u : d;
                if (w = w || function() {
                }, !h(v)) {
                  var y = new Error("First argument to waterfall must be an array of functions");
                  return w(y);
                }
                if (!v.length)
                  return w();
                var S = function(E) {
                  return function(C) {
                    if (C)
                      w.apply(null, arguments), w = function() {
                      };
                    else {
                      var D = Array.prototype.slice.call(arguments, 1), P = E.next();
                      P ? D.push(S(P)) : D.push(w), p(function() {
                        E.apply(null, D);
                      });
                    }
                  };
                };
                S(f(v))();
              };
              o = [], l = function() {
                return g;
              }.apply(r, o), l !== void 0 && (a.exports = l);
            })();
          },
          /* 16 */
          /***/
          function(a, r, i) {
            var o = typeof Reflect == "object" ? Reflect : null, l = o && typeof o.apply == "function" ? o.apply : function(V, M, B) {
              return Function.prototype.apply.call(V, M, B);
            }, s;
            o && typeof o.ownKeys == "function" ? s = o.ownKeys : Object.getOwnPropertySymbols ? s = function(V) {
              return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V));
            } : s = function(V) {
              return Object.getOwnPropertyNames(V);
            };
            function d(A) {
              console && console.warn && console.warn(A);
            }
            var u = Number.isNaN || function(V) {
              return V !== V;
            };
            function f() {
              f.init.call(this);
            }
            a.exports = f, a.exports.once = P, f.EventEmitter = f, f.prototype._events = void 0, f.prototype._eventsCount = 0, f.prototype._maxListeners = void 0;
            var h = 10;
            function g(A) {
              if (typeof A != "function")
                throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof A);
            }
            Object.defineProperty(f, "defaultMaxListeners", {
              enumerable: !0,
              get: function() {
                return h;
              },
              set: function(A) {
                if (typeof A != "number" || A < 0 || u(A))
                  throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + A + ".");
                h = A;
              }
            }), f.init = function() {
              (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
            }, f.prototype.setMaxListeners = function(V) {
              if (typeof V != "number" || V < 0 || u(V))
                throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + V + ".");
              return this._maxListeners = V, this;
            };
            function v(A) {
              return A._maxListeners === void 0 ? f.defaultMaxListeners : A._maxListeners;
            }
            f.prototype.getMaxListeners = function() {
              return v(this);
            }, f.prototype.emit = function(V) {
              for (var M = [], B = 1; B < arguments.length; B++) M.push(arguments[B]);
              var N = V === "error", H = this._events;
              if (H !== void 0)
                N = N && H.error === void 0;
              else if (!N)
                return !1;
              if (N) {
                var j;
                if (M.length > 0 && (j = M[0]), j instanceof Error)
                  throw j;
                var te = new Error("Unhandled error." + (j ? " (" + j.message + ")" : ""));
                throw te.context = j, te;
              }
              var de = H[V];
              if (de === void 0)
                return !1;
              if (typeof de == "function")
                l(de, this, M);
              else
                for (var Z = de.length, F = E(de, Z), B = 0; B < Z; ++B)
                  l(F[B], this, M);
              return !0;
            };
            function w(A, V, M, B) {
              var N, H, j;
              if (g(M), H = A._events, H === void 0 ? (H = A._events = /* @__PURE__ */ Object.create(null), A._eventsCount = 0) : (H.newListener !== void 0 && (A.emit(
                "newListener",
                V,
                M.listener ? M.listener : M
              ), H = A._events), j = H[V]), j === void 0)
                j = H[V] = M, ++A._eventsCount;
              else if (typeof j == "function" ? j = H[V] = B ? [M, j] : [j, M] : B ? j.unshift(M) : j.push(M), N = v(A), N > 0 && j.length > N && !j.warned) {
                j.warned = !0;
                var te = new Error("Possible EventEmitter memory leak detected. " + j.length + " " + String(V) + " listeners added. Use emitter.setMaxListeners() to increase limit");
                te.name = "MaxListenersExceededWarning", te.emitter = A, te.type = V, te.count = j.length, d(te);
              }
              return A;
            }
            f.prototype.addListener = function(V, M) {
              return w(this, V, M, !1);
            }, f.prototype.on = f.prototype.addListener, f.prototype.prependListener = function(V, M) {
              return w(this, V, M, !0);
            };
            function b() {
              if (!this.fired)
                return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
            }
            function p(A, V, M) {
              var B = { fired: !1, wrapFn: void 0, target: A, type: V, listener: M }, N = b.bind(B);
              return N.listener = M, B.wrapFn = N, N;
            }
            f.prototype.once = function(V, M) {
              return g(M), this.on(V, p(this, V, M)), this;
            }, f.prototype.prependOnceListener = function(V, M) {
              return g(M), this.prependListener(V, p(this, V, M)), this;
            }, f.prototype.removeListener = function(V, M) {
              var B, N, H, j, te;
              if (g(M), N = this._events, N === void 0)
                return this;
              if (B = N[V], B === void 0)
                return this;
              if (B === M || B.listener === M)
                --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete N[V], N.removeListener && this.emit("removeListener", V, B.listener || M));
              else if (typeof B != "function") {
                for (H = -1, j = B.length - 1; j >= 0; j--)
                  if (B[j] === M || B[j].listener === M) {
                    te = B[j].listener, H = j;
                    break;
                  }
                if (H < 0)
                  return this;
                H === 0 ? B.shift() : C(B, H), B.length === 1 && (N[V] = B[0]), N.removeListener !== void 0 && this.emit("removeListener", V, te || M);
              }
              return this;
            }, f.prototype.off = f.prototype.removeListener, f.prototype.removeAllListeners = function(V) {
              var M, B, N;
              if (B = this._events, B === void 0)
                return this;
              if (B.removeListener === void 0)
                return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : B[V] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete B[V]), this;
              if (arguments.length === 0) {
                var H = Object.keys(B), j;
                for (N = 0; N < H.length; ++N)
                  j = H[N], j !== "removeListener" && this.removeAllListeners(j);
                return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
              }
              if (M = B[V], typeof M == "function")
                this.removeListener(V, M);
              else if (M !== void 0)
                for (N = M.length - 1; N >= 0; N--)
                  this.removeListener(V, M[N]);
              return this;
            };
            function y(A, V, M) {
              var B = A._events;
              if (B === void 0)
                return [];
              var N = B[V];
              return N === void 0 ? [] : typeof N == "function" ? M ? [N.listener || N] : [N] : M ? D(N) : E(N, N.length);
            }
            f.prototype.listeners = function(V) {
              return y(this, V, !0);
            }, f.prototype.rawListeners = function(V) {
              return y(this, V, !1);
            }, f.listenerCount = function(A, V) {
              return typeof A.listenerCount == "function" ? A.listenerCount(V) : S.call(A, V);
            }, f.prototype.listenerCount = S;
            function S(A) {
              var V = this._events;
              if (V !== void 0) {
                var M = V[A];
                if (typeof M == "function")
                  return 1;
                if (M !== void 0)
                  return M.length;
              }
              return 0;
            }
            f.prototype.eventNames = function() {
              return this._eventsCount > 0 ? s(this._events) : [];
            };
            function E(A, V) {
              for (var M = new Array(V), B = 0; B < V; ++B)
                M[B] = A[B];
              return M;
            }
            function C(A, V) {
              for (; V + 1 < A.length; V++)
                A[V] = A[V + 1];
              A.pop();
            }
            function D(A) {
              for (var V = new Array(A.length), M = 0; M < V.length; ++M)
                V[M] = A[M].listener || A[M];
              return V;
            }
            function P(A, V) {
              return new Promise(function(M, B) {
                function N(j) {
                  A.removeListener(V, H), B(j);
                }
                function H() {
                  typeof A.removeListener == "function" && A.removeListener("error", N), M([].slice.call(arguments));
                }
                T(A, V, H, { once: !0 }), V !== "error" && O(A, N, { once: !0 });
              });
            }
            function O(A, V, M) {
              typeof A.on == "function" && T(A, "error", V, M);
            }
            function T(A, V, M, B) {
              if (typeof A.on == "function")
                B.once ? A.once(V, M) : A.on(V, M);
              else if (typeof A.addEventListener == "function")
                A.addEventListener(V, function N(H) {
                  B.once && A.removeEventListener(V, N), M(H);
                });
              else
                throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof A);
            }
          },
          /* 17 */
          /***/
          function(a, r, i) {
            var o = i(3), l = i(0), s = 0;
            function d() {
              return "hole_" + s++;
            }
            function u(S, E) {
              for (var C = null, D = 0; D < S.length; D++) {
                var P = E(S[D]);
                P !== S[D] && (C || (C = S.slice()), C[D] = P);
              }
              return C || S;
            }
            function f(S, E, C) {
              if (!(S instanceof o.Node))
                return S;
              if (!C) {
                var D = E(S);
                if (D && D !== S)
                  return D;
              }
              if (S instanceof o.NodeList) {
                var P = u(S.children, function(M) {
                  return f(M, E, C);
                });
                P !== S.children && (S = new o[S.typename](S.lineno, S.colno, P));
              } else if (S instanceof o.CallExtension) {
                var O = f(S.args, E, C), T = u(S.contentArgs, function(M) {
                  return f(M, E, C);
                });
                (O !== S.args || T !== S.contentArgs) && (S = new o[S.typename](S.extName, S.prop, O, T));
              } else {
                var A = S.fields.map(function(M) {
                  return S[M];
                }), V = u(A, function(M) {
                  return f(M, E, C);
                });
                V !== A && (S = new o[S.typename](S.lineno, S.colno), V.forEach(function(M, B) {
                  S[S.fields[B]] = M;
                }));
              }
              return C && E(S) || S;
            }
            function h(S, E) {
              return f(S, E, !0);
            }
            function g(S, E, C) {
              var D = [], P = h(C ? S[C] : S, function(O) {
                var T;
                return O instanceof o.Block ? O : ((O instanceof o.Filter && l.indexOf(E, O.name.value) !== -1 || O instanceof o.CallExtensionAsync) && (T = new o.Symbol(O.lineno, O.colno, d()), D.push(new o.FilterAsync(O.lineno, O.colno, O.name, O.args, T))), T);
              });
              return C ? S[C] = P : S = P, D.length ? (D.push(S), new o.NodeList(S.lineno, S.colno, D)) : S;
            }
            function v(S, E) {
              return h(S, function(C) {
                return C instanceof o.Output ? g(C, E) : C instanceof o.Set ? g(C, E, "value") : C instanceof o.For ? g(C, E, "arr") : C instanceof o.If ? g(C, E, "cond") : C instanceof o.CallExtension ? g(C, E, "args") : void 0;
              });
            }
            function w(S) {
              return f(S, function(E) {
                if (E instanceof o.Block) {
                  var C = !1, D = d();
                  E.body = f(E.body, function(P) {
                    if (P instanceof o.FunCall && P.name.value === "super")
                      return C = !0, new o.Symbol(P.lineno, P.colno, D);
                  }), C && E.body.children.unshift(new o.Super(0, 0, E.name, new o.Symbol(0, 0, D)));
                }
              });
            }
            function b(S) {
              return h(S, function(E) {
                if (!(!(E instanceof o.If) && !(E instanceof o.For))) {
                  var C = !1;
                  if (f(E, function(D) {
                    if (D instanceof o.FilterAsync || D instanceof o.IfAsync || D instanceof o.AsyncEach || D instanceof o.AsyncAll || D instanceof o.CallExtensionAsync)
                      return C = !0, D;
                  }), C) {
                    if (E instanceof o.If)
                      return new o.IfAsync(E.lineno, E.colno, E.cond, E.body, E.else_);
                    if (E instanceof o.For && !(E instanceof o.AsyncAll))
                      return new o.AsyncEach(E.lineno, E.colno, E.arr, E.name, E.body, E.else_);
                  }
                }
              });
            }
            function p(S, E) {
              return b(w(v(S, E)));
            }
            function y(S, E) {
              return p(S, E || []);
            }
            a.exports = {
              transform: y
            };
          },
          /* 18 */
          /***/
          function(a, s, i) {
            var o = i(0), l = i(2), s = a.exports = {};
            function d(ie, ge) {
              return ie == null || ie === !1 ? ge : ie;
            }
            s.abs = Math.abs;
            function u(ie) {
              return ie !== ie;
            }
            function f(ie, ge, Pe) {
              var Ee, Je = [], _e = [];
              for (Ee = 0; Ee < ie.length; Ee++)
                Ee % ge === 0 && _e.length && (Je.push(_e), _e = []), _e.push(ie[Ee]);
              if (_e.length) {
                if (Pe)
                  for (Ee = _e.length; Ee < ge; Ee++)
                    _e.push(Pe);
                Je.push(_e);
              }
              return Je;
            }
            s.batch = f;
            function h(ie) {
              ie = d(ie, "");
              var ge = ie.toLowerCase();
              return l.copySafeness(ie, ge.charAt(0).toUpperCase() + ge.slice(1));
            }
            s.capitalize = h;
            function g(ie, ge) {
              if (ie = d(ie, ""), ge = ge || 80, ie.length >= ge)
                return ie;
              var Pe = ge - ie.length, Ee = o.repeat(" ", Pe / 2 - Pe % 2), Je = o.repeat(" ", Pe / 2);
              return l.copySafeness(ie, Ee + ie + Je);
            }
            s.center = g;
            function v(ie, ge, Pe) {
              return Pe ? ie || ge : ie !== void 0 ? ie : ge;
            }
            s.default = v;
            function w(ie, ge, Pe) {
              if (!o.isObject(ie))
                throw new o.TemplateError("dictsort filter: val must be an object");
              var Ee = [];
              for (var Je in ie)
                Ee.push([Je, ie[Je]]);
              var _e;
              if (Pe === void 0 || Pe === "key")
                _e = 0;
              else if (Pe === "value")
                _e = 1;
              else
                throw new o.TemplateError("dictsort filter: You can only sort by either key or value");
              return Ee.sort(function($e, Ze) {
                var _t = $e[_e], It = Ze[_e];
                return ge || (o.isString(_t) && (_t = _t.toUpperCase()), o.isString(It) && (It = It.toUpperCase())), _t > It ? 1 : _t === It ? 0 : -1;
              }), Ee;
            }
            s.dictsort = w;
            function b(ie, ge) {
              return JSON.stringify(ie, null, ge);
            }
            s.dump = b;
            function p(ie) {
              return ie instanceof l.SafeString ? ie : (ie = ie ?? "", l.markSafe(o.escape(ie.toString())));
            }
            s.escape = p;
            function y(ie) {
              return ie instanceof l.SafeString ? ie : (ie = ie ?? "", l.markSafe(ie.toString()));
            }
            s.safe = y;
            function S(ie) {
              return ie[0];
            }
            s.first = S;
            function E(ie) {
              return ie = ie ?? "", l.markSafe(o.escape(ie.toString()));
            }
            s.forceescape = E;
            function C(ie, ge) {
              return o.groupBy(ie, ge, this.env.opts.throwOnUndefined);
            }
            s.groupby = C;
            function D(ie, ge, Pe) {
              if (ie = d(ie, ""), ie === "")
                return "";
              ge = ge || 4;
              var Ee = ie.split(`
`), Je = o.repeat(" ", ge), _e = Ee.map(function($e, Ze) {
                return Ze === 0 && !Pe ? $e : "" + Je + $e;
              }).join(`
`);
              return l.copySafeness(ie, _e);
            }
            s.indent = D;
            function P(ie, ge, Pe) {
              return ge = ge || "", Pe && (ie = o.map(ie, function(Ee) {
                return Ee[Pe];
              })), ie.join(ge);
            }
            s.join = P;
            function O(ie) {
              return ie[ie.length - 1];
            }
            s.last = O;
            function T(ie) {
              var ge = d(ie, "");
              return ge !== void 0 ? typeof Map == "function" && ge instanceof Map || typeof Set == "function" && ge instanceof Set ? ge.size : o.isObject(ge) && !(ge instanceof l.SafeString) ? o.keys(ge).length : ge.length : 0;
            }
            s.length = T;
            function A(ie) {
              if (o.isString(ie))
                return ie.split("");
              if (o.isObject(ie))
                return o._entries(ie || {}).map(function(ge) {
                  var Pe = ge[0], Ee = ge[1];
                  return {
                    key: Pe,
                    value: Ee
                  };
                });
              if (o.isArray(ie))
                return ie;
              throw new o.TemplateError("list filter: type not iterable");
            }
            s.list = A;
            function V(ie) {
              return ie = d(ie, ""), ie.toLowerCase();
            }
            s.lower = V;
            function M(ie) {
              return ie == null ? "" : l.copySafeness(ie, ie.replace(/\r\n|\n/g, `<br />
`));
            }
            s.nl2br = M;
            function B(ie) {
              return ie[Math.floor(Math.random() * ie.length)];
            }
            s.random = B;
            function N(ie) {
              function ge(Pe, Ee, Je) {
                Ee === void 0 && (Ee = "truthy");
                var _e = this, $e = _e.env.getTest(Ee);
                return o.toArray(Pe).filter(function(_t) {
                  return $e.call(_e, _t, Je) === ie;
                });
              }
              return ge;
            }
            s.reject = N(!1);
            function H(ie, ge) {
              return ie.filter(function(Pe) {
                return !Pe[ge];
              });
            }
            s.rejectattr = H, s.select = N(!0);
            function j(ie, ge) {
              return ie.filter(function(Pe) {
                return !!Pe[ge];
              });
            }
            s.selectattr = j;
            function te(ie, ge, Pe, Ee) {
              var Je = ie;
              if (ge instanceof RegExp)
                return ie.replace(ge, Pe);
              typeof Ee > "u" && (Ee = -1);
              var _e = "";
              if (typeof ge == "number")
                ge = "" + ge;
              else if (typeof ge != "string")
                return ie;
              if (typeof ie == "number" && (ie = "" + ie), typeof ie != "string" && !(ie instanceof l.SafeString))
                return ie;
              if (ge === "")
                return _e = Pe + ie.split("").join(Pe) + Pe, l.copySafeness(ie, _e);
              var $e = ie.indexOf(ge);
              if (Ee === 0 || $e === -1)
                return ie;
              for (var Ze = 0, _t = 0; $e > -1 && (Ee === -1 || _t < Ee); )
                _e += ie.substring(Ze, $e) + Pe, Ze = $e + ge.length, _t++, $e = ie.indexOf(ge, Ze);
              return Ze < ie.length && (_e += ie.substring(Ze)), l.copySafeness(Je, _e);
            }
            s.replace = te;
            function de(ie) {
              var ge;
              return o.isString(ie) ? ge = A(ie) : ge = o.map(ie, function(Pe) {
                return Pe;
              }), ge.reverse(), o.isString(ie) ? l.copySafeness(ie, ge.join("")) : ge;
            }
            s.reverse = de;
            function Z(ie, ge, Pe) {
              ge = ge || 0;
              var Ee = Math.pow(10, ge), Je;
              return Pe === "ceil" ? Je = Math.ceil : Pe === "floor" ? Je = Math.floor : Je = Math.round, Je(ie * Ee) / Ee;
            }
            s.round = Z;
            function F(ie, ge, Pe) {
              for (var Ee = Math.floor(ie.length / ge), Je = ie.length % ge, _e = [], $e = 0, Ze = 0; Ze < ge; Ze++) {
                var _t = $e + Ze * Ee;
                Ze < Je && $e++;
                var It = $e + (Ze + 1) * Ee, rt = ie.slice(_t, It);
                Pe && Ze >= Je && rt.push(Pe), _e.push(rt);
              }
              return _e;
            }
            s.slice = F;
            function K(ie, ge, Pe) {
              return Pe === void 0 && (Pe = 0), ge && (ie = o.map(ie, function(Ee) {
                return Ee[ge];
              })), Pe + ie.reduce(function(Ee, Je) {
                return Ee + Je;
              }, 0);
            }
            s.sum = K, s.sort = l.makeMacro(["value", "reverse", "case_sensitive", "attribute"], [], function(ge, Pe, Ee, Je) {
              var _e = this, $e = o.map(ge, function(_t) {
                return _t;
              }), Ze = o.getAttrGetter(Je);
              return $e.sort(function(_t, It) {
                var rt = Je ? Ze(_t) : _t, Dt = Je ? Ze(It) : It;
                if (_e.env.opts.throwOnUndefined && Je && (rt === void 0 || Dt === void 0))
                  throw new TypeError('sort: attribute "' + Je + '" resolved to undefined');
                return !Ee && o.isString(rt) && o.isString(Dt) && (rt = rt.toLowerCase(), Dt = Dt.toLowerCase()), rt < Dt ? Pe ? 1 : -1 : rt > Dt ? Pe ? -1 : 1 : 0;
              }), $e;
            });
            function se(ie) {
              return l.copySafeness(ie, ie);
            }
            s.string = se;
            function X(ie, ge) {
              ie = d(ie, "");
              var Pe = /<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi, Ee = ve(ie.replace(Pe, "")), Je = "";
              return ge ? Je = Ee.replace(/^ +| +$/gm, "").replace(/ +/g, " ").replace(/(\r\n)/g, `
`).replace(/\n\n\n+/g, `

`) : Je = Ee.replace(/\s+/gi, " "), l.copySafeness(ie, Je);
            }
            s.striptags = X;
            function he(ie) {
              ie = d(ie, "");
              var ge = ie.split(" ").map(function(Pe) {
                return h(Pe);
              });
              return l.copySafeness(ie, ge.join(" "));
            }
            s.title = he;
            function ve(ie) {
              return l.copySafeness(ie, ie.replace(/^\s*|\s*$/g, ""));
            }
            s.trim = ve;
            function pe(ie, ge, Pe, Ee) {
              var Je = ie;
              if (ie = d(ie, ""), ge = ge || 255, ie.length <= ge)
                return ie;
              if (Pe)
                ie = ie.substring(0, ge);
              else {
                var _e = ie.lastIndexOf(" ", ge);
                _e === -1 && (_e = ge), ie = ie.substring(0, _e);
              }
              return ie += Ee ?? "...", l.copySafeness(Je, ie);
            }
            s.truncate = pe;
            function z(ie) {
              return ie = d(ie, ""), ie.toUpperCase();
            }
            s.upper = z;
            function ke(ie) {
              var ge = encodeURIComponent;
              if (o.isString(ie))
                return ge(ie);
              var Pe = o.isArray(ie) ? ie : o._entries(ie);
              return Pe.map(function(Ee) {
                var Je = Ee[0], _e = Ee[1];
                return ge(Je) + "=" + ge(_e);
              }).join("&");
            }
            s.urlencode = ke;
            var Me = /^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/, Le = /^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i, ce = /^https?:\/\/.*$/, ne = /^www\./, G = /\.(?:org|net|com)(?:\:|\/|$)/;
            function le(ie, ge, Pe) {
              u(ge) && (ge = 1 / 0);
              var Ee = Pe === !0 ? ' rel="nofollow"' : "", Je = ie.split(/(\s+)/).filter(function(_e) {
                return _e && _e.length;
              }).map(function(_e) {
                var $e = _e.match(Me), Ze = $e ? $e[1] : _e, _t = Ze.substr(0, ge);
                return ce.test(Ze) ? '<a href="' + Ze + '"' + Ee + ">" + _t + "</a>" : ne.test(Ze) ? '<a href="http://' + Ze + '"' + Ee + ">" + _t + "</a>" : Le.test(Ze) ? '<a href="mailto:' + Ze + '">' + Ze + "</a>" : G.test(Ze) ? '<a href="http://' + Ze + '"' + Ee + ">" + _t + "</a>" : _e;
              });
              return Je.join("");
            }
            s.urlize = le;
            function Y(ie) {
              ie = d(ie, "");
              var ge = ie ? ie.match(/\w+/g) : null;
              return ge ? ge.length : null;
            }
            s.wordcount = Y;
            function Ce(ie, ge) {
              var Pe = parseFloat(ie);
              return u(Pe) ? ge : Pe;
            }
            s.float = Ce;
            var Te = l.makeMacro(["value", "default", "base"], [], function(ge, Pe, Ee) {
              Ee === void 0 && (Ee = 10);
              var Je = parseInt(ge, Ee);
              return u(Je) ? Pe : Je;
            });
            s.int = Te, s.d = s.default, s.e = s.escape;
          },
          /* 19 */
          /***/
          function(a, r, i) {
            function o(u, f) {
              u.prototype = Object.create(f.prototype), u.prototype.constructor = u, l(u, f);
            }
            function l(u, f) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(g, v) {
                return g.__proto__ = v, g;
              }, l(u, f);
            }
            var s = i(6), d = /* @__PURE__ */ function(u) {
              o(f, u);
              function f(g) {
                var v;
                return v = u.call(this) || this, v.precompiled = g || {}, v;
              }
              var h = f.prototype;
              return h.getSource = function(v) {
                return this.precompiled[v] ? {
                  src: {
                    type: "code",
                    obj: this.precompiled[v]
                  },
                  path: v
                } : null;
              }, f;
            }(s);
            a.exports = {
              PrecompiledLoader: d
            };
          },
          /* 20 */
          /***/
          function(a, r, i) {
            var o = i(2).SafeString;
            function l(B) {
              return typeof B == "function";
            }
            r.callable = l;
            function s(B) {
              return B !== void 0;
            }
            r.defined = s;
            function d(B, N) {
              return B % N === 0;
            }
            r.divisibleby = d;
            function u(B) {
              return B instanceof o;
            }
            r.escaped = u;
            function f(B, N) {
              return B === N;
            }
            r.equalto = f, r.eq = r.equalto, r.sameas = r.equalto;
            function h(B) {
              return B % 2 === 0;
            }
            r.even = h;
            function g(B) {
              return !B;
            }
            r.falsy = g;
            function v(B, N) {
              return B >= N;
            }
            r.ge = v;
            function w(B, N) {
              return B > N;
            }
            r.greaterthan = w, r.gt = r.greaterthan;
            function b(B, N) {
              return B <= N;
            }
            r.le = b;
            function p(B, N) {
              return B < N;
            }
            r.lessthan = p, r.lt = r.lessthan;
            function y(B) {
              return B.toLowerCase() === B;
            }
            r.lower = y;
            function S(B, N) {
              return B !== N;
            }
            r.ne = S;
            function E(B) {
              return B === null;
            }
            r.null = E;
            function C(B) {
              return typeof B == "number";
            }
            r.number = C;
            function D(B) {
              return B % 2 === 1;
            }
            r.odd = D;
            function P(B) {
              return typeof B == "string";
            }
            r.string = P;
            function O(B) {
              return !!B;
            }
            r.truthy = O;
            function T(B) {
              return B === void 0;
            }
            r.undefined = T;
            function A(B) {
              return B.toUpperCase() === B;
            }
            r.upper = A;
            function V(B) {
              return typeof Symbol < "u" ? !!B[Symbol.iterator] : Array.isArray(B) || typeof B == "string";
            }
            r.iterable = V;
            function M(B) {
              var N = B != null && typeof B == "object" && !Array.isArray(B);
              return Set ? N && !(B instanceof Set) : N;
            }
            r.mapping = M;
          },
          /* 21 */
          /***/
          function(a, r, i) {
            function o(d) {
              var u = -1;
              return {
                current: null,
                reset: function() {
                  u = -1, this.current = null;
                },
                next: function() {
                  return u++, u >= d.length && (u = 0), this.current = d[u], this.current;
                }
              };
            }
            function l(d) {
              d = d || ",";
              var u = !0;
              return function() {
                var f = u ? "" : d;
                return u = !1, f;
              };
            }
            function s() {
              return {
                range: function(u, f, h) {
                  typeof f > "u" ? (f = u, u = 0, h = 1) : h || (h = 1);
                  var g = [];
                  if (h > 0)
                    for (var v = u; v < f; v += h)
                      g.push(v);
                  else
                    for (var w = u; w > f; w += h)
                      g.push(w);
                  return g;
                },
                cycler: function() {
                  return o(Array.prototype.slice.call(arguments));
                },
                joiner: function(u) {
                  return l(u);
                }
              };
            }
            a.exports = s;
          },
          /* 22 */
          /***/
          function(a, r, i) {
            var o = i(4);
            a.exports = function(s, d) {
              function u(f, h) {
                if (this.name = f, this.path = f, this.defaultEngine = h.defaultEngine, this.ext = o.extname(f), !this.ext && !this.defaultEngine)
                  throw new Error("No default engine was specified and no extension was provided.");
                this.ext || (this.name += this.ext = (this.defaultEngine[0] !== "." ? "." : "") + this.defaultEngine);
              }
              return u.prototype.render = function(h, g) {
                s.render(this.name, h, g);
              }, d.set("view", u), d.set("nunjucksEnv", s), s;
            };
          },
          /* 23 */
          /***/
          function(a, r, i) {
            var o = i(4), l = i(4), s = i(0), d = s._prettifyError, u = i(5), f = i(7), h = f.Environment, g = i(24);
            function v(y, S) {
              return Array.isArray(S) ? S.some(function(E) {
                return y.match(E);
              }) : !1;
            }
            function w(y, S) {
              S = S || {}, S.isString = !0;
              var E = S.env || new h([]), C = S.wrapper || g;
              if (!S.name)
                throw new Error('the "name" option is required when compiling a string');
              return C([p(y, S.name, E)], S);
            }
            function b(y, S) {
              S = S || {};
              var E = S.env || new h([]), C = S.wrapper || g;
              if (S.isString)
                return w(y, S);
              var D = o.existsSync(y) && o.statSync(y), P = [], O = [];
              function T(M) {
                o.readdirSync(M).forEach(function(B) {
                  var N = l.join(M, B), H = N.substr(l.join(y, "/").length), j = o.statSync(N);
                  j && j.isDirectory() ? (H += "/", v(H, S.exclude) || T(N)) : v(H, S.include) && O.push(N);
                });
              }
              if (D.isFile())
                P.push(p(o.readFileSync(y, "utf-8"), S.name || y, E));
              else if (D.isDirectory()) {
                T(y);
                for (var A = 0; A < O.length; A++) {
                  var V = O[A].replace(l.join(y, "/"), "");
                  try {
                    P.push(p(o.readFileSync(O[A], "utf-8"), V, E));
                  } catch (M) {
                    if (S.force)
                      console.error(M);
                    else
                      throw M;
                  }
                }
              }
              return C(P, S);
            }
            function p(y, S, E) {
              E = E || new h([]);
              var C = E.asyncFilters, D = E.extensionsList, P;
              S = S.replace(/\\/g, "/");
              try {
                P = u.compile(y, C, D, S, E.opts);
              } catch (O) {
                throw d(S, !1, O);
              }
              return {
                name: S,
                template: P
              };
            }
            a.exports = {
              precompile: b,
              precompileString: w
            };
          },
          /* 24 */
          /***/
          function(a, r, i) {
            function o(l, s) {
              var d = "";
              s = s || {};
              for (var u = 0; u < l.length; u++) {
                var f = JSON.stringify(l[u].name), h = l[u].template;
                d += "(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})[" + f + `] = (function() {
` + h + `
})();
`, s.asFunction && (d += "return function(ctx, cb) { return nunjucks.render(" + f + `, ctx, cb); }
`), d += `})();
`;
              }
              return d;
            }
            a.exports = o;
          },
          /* 25 */
          /***/
          function(a, r, i) {
            function o() {
              var l = this.runtime, s = this.lib, d = this.compiler.Compiler, u = this.parser.Parser, f = this.nodes, h = this.lexer, g = l.contextOrFrameLookup, v = l.memberLookup, w, b;
              d && (w = d.prototype.assertType), u && (b = u.prototype.parseAggregate);
              function p() {
                l.contextOrFrameLookup = g, l.memberLookup = v, d && (d.prototype.assertType = w), u && (u.prototype.parseAggregate = b);
              }
              l.contextOrFrameLookup = function(T, A, V) {
                var M = g.apply(this, arguments);
                if (M !== void 0)
                  return M;
                switch (V) {
                  case "True":
                    return !0;
                  case "False":
                    return !1;
                  case "None":
                    return null;
                  default:
                    return;
                }
              };
              function y(O) {
                return {
                  index: O.index,
                  lineno: O.lineno,
                  colno: O.colno
                };
              }
              if (f && d && u) {
                var S = f.Node.extend("Slice", {
                  fields: ["start", "stop", "step"],
                  init: function(T, A, V, M, B) {
                    V = V || new f.Literal(T, A, null), M = M || new f.Literal(T, A, null), B = B || new f.Literal(T, A, 1), this.parent(T, A, V, M, B);
                  }
                });
                d.prototype.assertType = function(T) {
                  T instanceof S || w.apply(this, arguments);
                }, d.prototype.compileSlice = function(T, A) {
                  this._emit("("), this._compileExpression(T.start, A), this._emit("),("), this._compileExpression(T.stop, A), this._emit("),("), this._compileExpression(T.step, A), this._emit(")");
                }, u.prototype.parseAggregate = function() {
                  var T = this, A = y(this.tokens);
                  A.colno--, A.index--;
                  try {
                    return b.apply(this);
                  } catch (de) {
                    var V = y(this.tokens), M = function() {
                      return s._assign(T.tokens, V), de;
                    };
                    s._assign(this.tokens, A), this.peeked = !1;
                    var B = this.peekToken();
                    if (B.type !== h.TOKEN_LEFT_BRACKET)
                      throw M();
                    this.nextToken();
                    for (var N = new S(B.lineno, B.colno), H = !1, j = 0; j <= N.fields.length && !this.skip(h.TOKEN_RIGHT_BRACKET); j++) {
                      if (j === N.fields.length)
                        if (H)
                          this.fail("parseSlice: too many slice components", B.lineno, B.colno);
                        else
                          break;
                      if (this.skip(h.TOKEN_COLON))
                        H = !0;
                      else {
                        var te = N.fields[j];
                        N[te] = this.parseExpression(), H = this.skip(h.TOKEN_COLON) || H;
                      }
                    }
                    if (!H)
                      throw M();
                    return new f.Array(B.lineno, B.colno, [N]);
                  }
                };
              }
              function E(O, T, A, V) {
                O = O || [], T === null && (T = V < 0 ? O.length - 1 : 0), A === null ? A = V < 0 ? -1 : O.length : A < 0 && (A += O.length), T < 0 && (T += O.length);
                for (var M = [], B = T; !(B < 0 || B > O.length || V > 0 && B >= A || V < 0 && B <= A); B += V)
                  M.push(l.memberLookup(O, B));
                return M;
              }
              function C(O, T) {
                return Object.prototype.hasOwnProperty.call(O, T);
              }
              var D = {
                pop: function(T) {
                  if (T === void 0)
                    return this.pop();
                  if (T >= this.length || T < 0)
                    throw new Error("KeyError");
                  return this.splice(T, 1);
                },
                append: function(T) {
                  return this.push(T);
                },
                remove: function(T) {
                  for (var A = 0; A < this.length; A++)
                    if (this[A] === T)
                      return this.splice(A, 1);
                  throw new Error("ValueError");
                },
                count: function(T) {
                  for (var A = 0, V = 0; V < this.length; V++)
                    this[V] === T && A++;
                  return A;
                },
                index: function(T) {
                  var A;
                  if ((A = this.indexOf(T)) === -1)
                    throw new Error("ValueError");
                  return A;
                },
                find: function(T) {
                  return this.indexOf(T);
                },
                insert: function(T, A) {
                  return this.splice(T, 0, A);
                }
              }, P = {
                items: function() {
                  return s._entries(this);
                },
                values: function() {
                  return s._values(this);
                },
                keys: function() {
                  return s.keys(this);
                },
                get: function(T, A) {
                  var V = this[T];
                  return V === void 0 && (V = A), V;
                },
                has_key: function(T) {
                  return C(this, T);
                },
                pop: function(T, A) {
                  var V = this[T];
                  if (V === void 0 && A !== void 0)
                    V = A;
                  else {
                    if (V === void 0)
                      throw new Error("KeyError");
                    delete this[T];
                  }
                  return V;
                },
                popitem: function() {
                  var T = s.keys(this);
                  if (!T.length)
                    throw new Error("KeyError");
                  var A = T[0], V = this[A];
                  return delete this[A], [A, V];
                },
                setdefault: function(T, A) {
                  return A === void 0 && (A = null), T in this || (this[T] = A), this[T];
                },
                update: function(T) {
                  return s._assign(this, T), null;
                }
              };
              return P.iteritems = P.items, P.itervalues = P.values, P.iterkeys = P.keys, l.memberLookup = function(T, A, V) {
                return arguments.length === 4 ? E.apply(this, arguments) : (T = T || {}, s.isArray(T) && C(D, A) ? D[A].bind(T) : s.isObject(T) && C(P, A) ? P[A].bind(T) : v.apply(this, arguments));
              }, p;
            }
            a.exports = o;
          }
          /******/
        ])
      );
    });
  }(o_)), o_.exports;
}
var Rne = Mne();
const HA = /* @__PURE__ */ nD(Rne);
function Lne(e) {
  return e && e.replace(/"""([\s\S]*?)"""/g, (t, n) => `"${n.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\r?\n/g, "\\n")}"`);
}
function Sy(e) {
  !e || typeof e != "object" || e.get_formatted || (e.get_formatted = function(t) {
    return this?.[t];
  });
}
function zA(e, t = "") {
  if (!e) return "";
  const n = (e.items || []).map((l) => {
    const s = l.serial_no ? `<br><b>SR.No:</b><br>${l.serial_no.replace(/\n/g, ", ")}` : "", d = e.posa_show_custom_name_marker_on_print && l.name_overridden ? " (custom)" : "";
    return `<tr>
        <td>${l.item_code}${l.item_name && l.item_name !== l.item_code ? `<br>${l.item_name}${d}` : ""}${s}</td>
        <td style="text-align:right">${l.qty} ${l.uom || ""}<br>@ ${l.rate}</td>
        <td style="text-align:right">${l.amount}</td>
      </tr>`;
  }).join(""), a = (e.taxes || []).map(
    (l) => `<tr>
      <td class="text-right" style="width:70%">${l.description}@${l.rate}%</td>
      <td class="text-right">${l.tax_amount}</td>
    </tr>`
  ).join(""), r = e.discount_amount ? `<tr>
      <td class="text-right" style="width:75%">Discount</td>
      <td class="text-right">${e.discount_amount}</td>
    </tr>` : "", i = e.change_amount ? `<tr>
      <td class="text-right" style="width:75%">Change Amount</td>
      <td class="text-right">${e.change_amount}</td>
    </tr>` : "", o = t ? `<div style="margin-top:5px;">${t}</div>` : "";
  return `<!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>Invoice ${e.name || ""}</title>
    <style>
      table, tr, td, div, p { line-height:120%; vertical-align:middle; font-size:10px; }
      .print-format { width:3.5in; padding:0.1in; min-height:7in; }
      .text-right { text-align:right; }
    </style>
  </head>
  <body class="print-format">
    <div style="text-align:center; margin-bottom:0"><h5 style="margin:0; font-size:11px;">${e.is_duplicate ? "Duplicate" : "Original"}</h5></div>
    <p style="margin-top:0">
      <b>Invoice Status:</b> ${e.status || ""}<br>
      <b>Receipt No:</b> ${e.name || ""}<br>
      <b>Customer:</b> ${e.customer_name || e.customer || ""}<br>
      <b>Mobile:</b> ${e.contact_mobile || ""}<br>
      <b>Date:</b> ${e.posting_date || ""}
      <b>Time:</b> ${e.posting_time || ""}<br>
    </p>
    <p style="margin-top:3px;"><b>Additional Note:</b> <strong>${e.posa_notes || ""}</strong></p>
    <table cellpadding="0" cellspacing="0" style="width:100%">
      <thead>
        <tr><th width="50%"><b>Item</b></th><th width="25%" class="text-right"><b>Qty</b></th><th width="25%" class="text-right"><b>Amount</b></th></tr>
      </thead>
      <tbody>${n}</tbody>
    </table>
    <table cellpadding="0" cellspacing="0" style="width:100%">
      <tbody>
        <tr><td class="text-right" style="width:70%"><b>Total</b></td><td class="text-right">${e.total}</td></tr>
        ${a}
        ${r}
        <tr><td class="text-right" style="width:70%"><b>Grand Total</b></td><td class="text-right">${e.grand_total}</td></tr>
        <tr><td class="text-right" style="width:75%"><b>Paid Amount</b></td><td class="text-right">${e.paid_amount}</td></tr>
        ${i}
      </tbody>
    </table>
    ${o}
    <p class="text-center" style="margin-top:3px;">Thank you, please visit again.</p>
  </body>
  </html>`;
}
async function Fne(e) {
  if (!e) return "";
  await _u;
  const t = Lne(Q9()), n = X9(), a = {
    ...e,
    terms: e.terms || n,
    terms_and_conditions: e.terms_and_conditions || n
  };
  if (Sy(a), (a.items || []).forEach(Sy), (a.taxes || []).forEach(Sy), !t)
    return console.warn("No offline print template cached; using fallback template"), zA(a, a.terms_and_conditions);
  try {
    HA.configure({ autoescape: !1 });
    const r = {
      doc: a,
      terms: a.terms,
      terms_and_conditions: a.terms_and_conditions,
      _: frappe?._ ? frappe._ : (i) => i,
      frappe: {
        db: { get_value: () => "", sql: () => [] },
        get_list: () => []
      }
    };
    return HA.renderString(t, r);
  } catch (r) {
    return console.error("Failed to render offline invoice", r), zA(a, a.terms_and_conditions);
  }
}
const Nne = {
  // Using format mixin for shared formatting methods
  mixins: [Oi],
  data() {
    return {
      loading: !1,
      // UI loading state
      pos_profile: "",
      // POS profile settings
      pos_settings: "",
      // POS settings
      invoice_doc: "",
      // Current invoice document
      stock_settings: "",
      // Stock settings
      invoiceType: "Invoice",
      // Type of invoice
      is_return: !1,
      // Is this a return invoice?
      loyalty_amount: 0,
      // Loyalty points to redeem
      redeemed_customer_credit: 0,
      // Customer credit to redeem
      credit_change: 0,
      // Change to be given as credit
      paid_change: 0,
      // Change to be given as paid
      is_credit_sale: !1,
      // Is this a credit sale?
      is_write_off_change: !1,
      // Write-off for change enabled
      is_cashback: !0,
      // Cashback enabled
      is_credit_return: !1,
      // Is this a credit return?
      redeem_customer_credit: !1,
      // Redeem customer credit?
      customer_credit_dict: [],
      // List of available customer credits
      paid_change_rules: [],
      // Validation rules for paid change
      phone_dialog: !1,
      // Show phone payment dialog
      custom_days_dialog: !1,
      // Show custom days dialog
      custom_days_value: null,
      // Custom days entry
      new_delivery_date: null,
      // New delivery date value
      new_po_date: null,
      // New PO date value
      new_credit_due_date: null,
      // New credit due date value
      credit_due_days: null,
      // Number of days until due
      credit_due_presets: [7, 14, 30],
      // Preset options for due days
      customer_info: "",
      // Customer info
      mpesa_modes: [],
      // List of available M-Pesa modes
      sales_persons: [],
      // List of sales persons
      sales_person: "",
      // Selected sales person
      addresses: [],
      // List of customer addresses
      is_user_editing_paid_change: !1,
      // User interaction flag
      highlightSubmit: !1,
      // Highlight state for submit button
      showDebugInfo: !1
      // Show debug information panel
    };
  },
  computed: {
    // Get currency symbol for given or current currency
    currencySymbol() {
      return (e) => get_currency_symbol(e || this.invoice_doc.currency);
    },
    // Display currency for invoice
    displayCurrency() {
      return this.invoice_doc ? this.invoice_doc.currency : "";
    },
    // Calculate total payments (all methods, loyalty, credit)
    total_payments() {
      let e = 0;
      return this.invoice_doc && this.invoice_doc.payments && this.invoice_doc.payments.forEach((t) => {
        e += parseFloat(Rt.fromArabicNumerals(String(t.amount))) || 0;
      }), this.loyalty_amount && (this.invoice_doc.currency !== this.pos_profile.currency ? e += this.flt(
        this.loyalty_amount / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ) : e += parseFloat(Rt.fromArabicNumerals(String(this.loyalty_amount))) || 0), this.redeemed_customer_credit && (this.invoice_doc.currency !== this.pos_profile.currency ? e += this.flt(
        this.redeemed_customer_credit / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ) : e += parseFloat(Rt.fromArabicNumerals(String(this.redeemed_customer_credit))) || 0), this.flt(e, this.currency_precision);
    },
    // Calculate difference between invoice total and payments
    diff_payment() {
      if (!this.invoice_doc) return 0;
      let e;
      this.pos_profile.posa_allow_multi_currency && this.invoice_doc.currency !== this.pos_profile.currency ? e = this.flt(this.invoice_doc.grand_total, this.currency_precision) : e = this.flt(
        this.invoice_doc.rounded_total || this.invoice_doc.grand_total,
        this.currency_precision
      );
      let t = this.flt(e - this.total_payments, this.currency_precision);
      return this.invoice_doc.is_return, t >= 0 ? t : 0;
    },
    // Calculate change to be given back to customer
    credit_change() {
      let e;
      this.pos_profile.posa_allow_multi_currency && this.invoice_doc.currency !== this.pos_profile.currency ? e = this.flt(this.invoice_doc.grand_total, this.currency_precision) : e = this.flt(
        this.invoice_doc.rounded_total || this.invoice_doc.grand_total,
        this.currency_precision
      );
      let t = this.flt(this.total_payments - e, this.currency_precision);
      return t > 0 ? t : 0;
    },
    // Label for the difference field (To Be Paid/Change)
    diff_label() {
      return this.diff_payment > 0 ? `To Be Paid (${this.displayCurrency})` : `Change (${this.displayCurrency})`;
    },
    // Display formatted total payments
    total_payments_display() {
      return this.formatCurrency(this.total_payments, this.displayCurrency);
    },
    // Display formatted difference payment
    diff_payment_display() {
      return this.formatCurrency(this.diff_payment, this.displayCurrency);
    },
    // Calculate available loyalty points amount in selected currency
    available_points_amount() {
      let e = 0;
      return this.customer_info.loyalty_points && (e = this.customer_info.loyalty_points * this.customer_info.conversion_factor, this.invoice_doc.currency !== this.pos_profile.currency && (e = this.flt(
        e / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ))), e;
    },
    // Calculate total available customer credit
    available_customer_credit() {
      return this.customer_credit_dict.reduce((e, t) => e + this.flt(t.total_credit), 0);
    },
    // Validate if payment can be submitted
    vaildatPayment() {
      return this.pos_profile.posa_enable_restaurant_mode ? !1 : !!(this.pos_profile.posa_allow_sales_order && this.invoiceType === "Order" && !this.invoice_doc.posa_delivery_date);
    },
    // Should request payment field be shown?
    request_payment_field() {
      return this.pos_settings?.invoice_fields?.some(
        (e) => e.fieldtype === "Button" && e.fieldname === "request_for_payment"
      ) || !1;
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {
    // Watch diff_payment to update paid_change
    diff_payment(e) {
      this.is_user_editing_paid_change || (this.paid_change = -e);
    },
    // Watch paid_change to validate and update credit_change
    paid_change(e) {
      const t = -this.diff_payment;
      e > t ? (this.paid_change = t, this.credit_change = 0, this.paid_change_rules = ["Paid change can not be greater than total change!"]) : (this.paid_change_rules = [], this.credit_change = this.flt(e - t, this.currency_precision));
    },
    // Watch loyalty_amount to handle loyalty points redemption
    loyalty_amount(e) {
      e > this.available_points_amount ? (this.invoice_doc.loyalty_amount = 0, this.invoice_doc.redeem_loyalty_points = 0, this.invoice_doc.loyalty_points = 0, this.loyalty_amount = 0, this.eventBus.emit("show_message", {
        title: `Loyalty Amount can not be more than ${this.available_points_amount}`,
        color: "error"
      })) : (this.invoice_doc.loyalty_amount = this.flt(this.loyalty_amount), this.invoice_doc.redeem_loyalty_points = 1, this.invoice_doc.loyalty_points = this.flt(this.loyalty_amount) / this.customer_info.conversion_factor);
    },
    // Watch redeemed_customer_credit to validate
    redeemed_customer_credit(e) {
      e > this.available_customer_credit && (this.redeemed_customer_credit = this.available_customer_credit, this.eventBus.emit("show_message", {
        title: `You can redeem customer credit up to ${this.available_customer_credit}`,
        color: "error"
      }));
    },
    // Recalculate total redeemed credit whenever credit entries change
    customer_credit_dict: {
      handler(e) {
        const t = e.reduce((n, a) => n + this.flt(a.credit_to_redeem || 0), 0);
        this.redeemed_customer_credit = this.flt(t, this.currency_precision);
      },
      deep: !0
    },
    // Watch sales_person to update sales_team
    sales_person(e) {
      e ? (this.invoice_doc.sales_team = [
        {
          sales_person: e,
          allocated_percentage: 100
        }
      ], console.log("Updated sales_team with sales_person:", e)) : (this.invoice_doc.sales_team = [], console.log("Cleared sales_team"));
    },
    // Watch is_credit_sale to reset cash payments
    is_credit_sale(e) {
      e ? this.invoice_doc.payments.forEach((t) => {
        t.mode_of_payment.toLowerCase() === "cash" && (t.amount = 0);
      }) : this.invoice_doc.payments.forEach((t) => {
        t.mode_of_payment.toLowerCase() === "cash" && (t.amount = this.invoice_doc.rounded_total || this.invoice_doc.grand_total);
      });
    },
    // Watch is_credit_return to toggle cashback payments
    is_credit_return(e) {
      e ? (this.is_cashback = !1, this.invoice_doc.payments.forEach((t) => {
        t.amount = 0, t.base_amount !== void 0 && (t.base_amount = 0);
      })) : (this.is_cashback = !0, this.ensureReturnPaymentsAreNegative());
    }
  },
  methods: {
    // Go back to invoice view and reset customer readonly
    back_to_invoice() {
      this.eventBus.emit("show_payment", "false"), this.eventBus.emit("set_customer_readonly", !1);
    },
    // Highlight and focus the submit button when payment screen opens
    handleShowPayment(e) {
      e === "true" ? this.$nextTick(() => {
        setTimeout(() => {
          const t = this.$refs.submitButton, n = t && t.$el ? t.$el : t;
          n && (n.scrollIntoView({ behavior: "smooth", block: "center" }), n.focus(), this.highlightSubmit = !0);
        }, 100);
      }) : this.highlightSubmit = !1;
    },
    // Reset all cash payments to zero
    reset_cash_payments() {
      this.invoice_doc.payments.forEach((e) => {
        e.mode_of_payment.toLowerCase() === "cash" && (e.amount = 0);
      });
    },
    // Get dynamic submit button text based on document type and status
    getSubmitButtonText() {
      if (this.invoice_doc.is_multi_order_edit)
        return this.__("Submit {0} Orders", [this.invoice_doc.multi_order_count || "Multiple"]);
      if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 && this.invoice_doc.custom_consolidated_invoice_reference) {
        const e = this.invoice_doc.custom_consolidated_invoice_reference.split(",").length;
        return this.__("Submit Consolidated Order ({0} Orders)", [e]);
      } else {
        if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0)
          return this.__("Submit Order");
        if (this.invoice_doc.doctype === "Sales Invoice")
          return this.__("Pay");
      }
      return this.__("Submit");
    },
    // Get dynamic submit and print button text based on document type and status
    getSubmitPrintButtonText() {
      if (this.invoice_doc.is_multi_order_edit)
        return this.__("Submit & Print {0} Orders", [this.invoice_doc.multi_order_count || "Multiple"]);
      if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 && this.invoice_doc.custom_consolidated_invoice_reference) {
        const e = this.invoice_doc.custom_consolidated_invoice_reference.split(",").length;
        return this.__("Submit & Print Consolidated Order ({0} Orders)", [e]);
      } else {
        if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0)
          return this.__("Submit & Print Order");
        if (this.invoice_doc.doctype === "Sales Invoice")
          return this.__("Pay & Print");
      }
      return this.__("Submit & Print");
    },
    // Ensure all payments are negative for return invoices
    ensureReturnPaymentsAreNegative() {
      if (!this.invoice_doc || !this.invoice_doc.is_return || !this.is_cashback)
        return;
      let e = !1;
      if (this.invoice_doc.payments.forEach((t) => {
        Math.abs(t.amount) > 0 && (e = !0);
      }), !e) {
        const t = this.invoice_doc.payments.find((n) => n.default === 1);
        if (t) {
          const n = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
          t.amount = -Math.abs(n), t.base_amount !== void 0 && (t.base_amount = -Math.abs(n));
        }
      }
      this.invoice_doc.payments.forEach((t) => {
        t.amount > 0 && (t.amount = -Math.abs(t.amount)), t.base_amount !== void 0 && t.base_amount > 0 && (t.base_amount = -Math.abs(t.base_amount));
      });
    },
    // Submit payment after validation
    async submit(e, t = !1, n = !1) {
      if (this.invoice_doc.is_multi_order_edit && this.invoice_doc.multi_order_names) {
        console.log("Submitting multiple draft restaurant orders:", this.invoice_doc.multi_order_names);
        try {
          const o = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
          console.log("Preserving payment amounts for multi-order submission:", o);
          const l = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_multiple_orders_and_create_invoice",
            args: {
              order_names: this.invoice_doc.multi_order_names,
              updated_order_data: this.invoice_doc,
              pos_profile_name: this.pos_profile.name
            }
          });
          if (l.message)
            console.log("Successfully submitted multiple orders and created consolidated invoice:", l.message.name), this.invoice_doc = l.message, o && o.length > 0 && (console.log("Restoring payment amounts to consolidated invoice..."), o.forEach((s) => {
              const d = this.invoice_doc.payments.find(
                (u) => u.mode_of_payment === s.mode_of_payment
              );
              d && s.amount > 0 && (d.amount = s.amount, d.base_amount = s.base_amount || s.amount, console.log(`Restored ${s.mode_of_payment}: ${s.amount}`));
            }), console.log("Payment amounts successfully restored to consolidated invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("show_message", {
              title: __("{0} orders submitted and consolidated into invoice for payment", [this.invoice_doc.multi_order_names.length]),
              color: "success"
            }), console.log("Multi-order consolidation complete, continuing with payment submission for consolidated invoice:", this.invoice_doc.name);
          else
            throw new Error("Failed to submit multiple orders and create invoice");
        } catch (o) {
          console.error("Error submitting multiple draft restaurant orders:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting multiple orders: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      } else if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 && this.invoice_doc.custom_consolidated_invoice_reference) {
        console.log("Submitting consolidated draft restaurant order:", this.invoice_doc.name), console.log("Source orders:", this.invoice_doc.custom_consolidated_invoice_reference);
        try {
          const o = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
          console.log("Preserving payment amounts for consolidated order:", o);
          const l = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_restaurant_order",
            args: {
              order_data: this.invoice_doc
            }
          });
          if (l.message) {
            console.log("Successfully submitted consolidated Sales Order:", l.message.name);
            const s = await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
              args: {
                sales_order_name: l.message.name,
                pos_profile_name: this.pos_profile.name
              }
            });
            s.message && (this.invoice_doc = s.message, console.log("Successfully converted consolidated order to Sales Invoice:", this.invoice_doc.name), o && o.length > 0 && (console.log("Restoring payment amounts to consolidated invoice..."), o.forEach((d) => {
              const u = this.invoice_doc.payments.find(
                (f) => f.mode_of_payment === d.mode_of_payment
              );
              u && d.amount > 0 && (u.amount = d.amount, u.base_amount = d.base_amount || d.amount, console.log(`Restored ${d.mode_of_payment}: ${d.amount}`));
            }), console.log("Payment amounts successfully restored to consolidated invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Finalizing consolidated order submission..."), await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.finalize_consolidated_order_submission",
              args: {
                consolidated_order_name: l.message.name
              }
            }), this.eventBus.emit("show_message", {
              title: __("Consolidated order submitted successfully. Source orders have been closed. Proceed with payment."),
              color: "success"
            }), console.log("Consolidated order workflow complete, continuing with payment submission for invoice:", this.invoice_doc.name));
          }
        } catch (o) {
          console.error("Error submitting consolidated restaurant order:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting consolidated order: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      } else if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0) {
        console.log("Submitting draft restaurant order:", this.invoice_doc.name);
        try {
          const o = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_restaurant_order",
            args: {
              order_data: this.invoice_doc
            }
          });
          if (o.message) {
            console.log("Successfully submitted Sales Order:", o.message.name);
            const l = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
            console.log("Preserving original payment amounts:", l);
            const s = await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
              args: {
                sales_order_name: o.message.name,
                pos_profile_name: this.pos_profile.name
              }
            });
            if (s.message)
              this.invoice_doc = s.message, console.log("Successfully converted to Sales Invoice for payment:", this.invoice_doc.name), l && l.length > 0 && (console.log("Restoring payment amounts to new Sales Invoice..."), l.forEach((d) => {
                const u = this.invoice_doc.payments.find(
                  (f) => f.mode_of_payment === d.mode_of_payment
                );
                u && d.amount > 0 && (u.amount = d.amount, u.base_amount = d.base_amount || d.amount, console.log(`Restored ${d.mode_of_payment}: ${d.amount}`));
              }), console.log("Payment amounts successfully restored to Sales Invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("show_message", {
                title: __("Order submitted and converted to invoice for payment"),
                color: "success"
              });
            else
              throw new Error("Failed to convert submitted order to invoice");
          } else
            throw new Error("Failed to submit draft order");
        } catch (o) {
          console.error("Error submitting draft restaurant order:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting order: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      }
      if (this.invoice_doc.is_return && this.ensureReturnPaymentsAreNegative(), !this.is_credit_sale && !this.invoice_doc.is_return && this.total_payments <= 0 && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
        this.eventBus.emit("show_message", {
          title: "Please enter payment amount",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!this.is_credit_sale && !this.invoice_doc.is_return) {
        let o = !1, l = 0;
        if (this.invoice_doc.payments.forEach((s) => {
          s.mode_of_payment.toLowerCase().includes("cash") && (o = !0, l = this.flt(s.amount));
        }), o && l > 0 && !this.pos_profile.posa_allow_partial_payment && l < (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
          this.eventBus.emit("show_message", {
            title: "Cash payment cannot be less than invoice total when partial payment is not allowed",
            color: "error"
          }), frappe.utils.play_sound("error");
          return;
        }
      }
      if (!this.is_credit_sale && !this.pos_profile.posa_allow_partial_payment && this.total_payments < (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
        this.eventBus.emit("show_message", {
          title: "The amount paid is not complete",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      let a = !0;
      if (!t && (this.invoice_doc.payments.forEach((o) => {
        o.type === "Phone" && ![0, "0", "", null, void 0].includes(o.amount) && (a = !1);
      }), !a)) {
        this.eventBus.emit("show_message", {
          title: __("Please request phone payment or use another payment method"),
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (this.paid_change > -this.diff_payment) {
        this.eventBus.emit("show_message", {
          title: "Paid change cannot be greater than total change!",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      let r = this.flt(this.flt(this.paid_change) + this.flt(-this.credit_change));
      if (this.is_cashback && r !== -this.diff_payment) {
        this.eventBus.emit("show_message", {
          title: "Error in change calculations!",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (this.customer_credit_dict.filter((o) => this.flt(o.credit_to_redeem) > this.flt(o.total_credit)).length > 0) {
        this.eventBus.emit("show_message", {
          title: "Redeemed credit cannot be greater than its total.",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!this.invoice_doc.is_return && this.redeemed_customer_credit > (this.invoice_doc.rounded_total || this.invoice_doc.grand_total)) {
        this.eventBus.emit("show_message", {
          title: "Cannot redeem customer credit more than invoice total",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!cn())
        try {
          const o = this.invoice_doc.items.filter((s) => !s.is_bundle), l = await frappe.call({
            method: "posawesome.posawesome.api.invoices.validate_cart_items",
            args: {
              items: JSON.stringify(o),
              pos_profile: this.pos_profile.name
            }
          });
          if (l.message && l.message.length) {
            const s = l.message.map(
              (u) => `${u.item_code} (${u.warehouse}) - ${this.formatFloat(u.available_qty)}`
            ).join(`
`), d = !this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty;
            if (this.eventBus.emit("show_message", {
              title: d ? __(`Insufficient stock:
{0}`, [s]) : __(`Stock is lower than requested:
{0}`, [s]),
              color: d ? "error" : "warning"
            }), d) {
              frappe.utils.play_sound("error"), this.loading = !1;
              return;
            }
          }
        } catch (o) {
          console.error("Stock validation failed", o);
        }
      this.loading = !0, this.submit_invoice(n);
    },
    // Submit invoice to backend after all validations
    submit_invoice(e) {
      this.invoice_doc.is_return && this.ensureReturnPaymentsAreNegative();
      let t = 0;
      this.invoice_doc.payments.forEach((i) => {
        i.amount = this.flt(i.amount), t += i.amount;
      }), this.invoice_doc.is_return && t === 0 && (this.invoice_doc.is_pos = 0), this.customer_credit_dict.length && this.customer_credit_dict.forEach((i) => {
        i.credit_to_redeem = this.flt(i.credit_to_redeem);
      });
      let n = {
        total_change: this.invoice_doc.is_return ? 0 : -this.diff_payment,
        paid_change: this.invoice_doc.is_return ? 0 : this.paid_change,
        credit_change: -this.credit_change,
        redeemed_customer_credit: this.redeemed_customer_credit,
        customer_credit_dict: this.customer_credit_dict,
        is_cashback: this.is_cashback
      };
      const a = this;
      if (cn())
        try {
          dQ({ data: n, invoice: this.invoice_doc }), this.eventBus.emit("pending_invoices_changed", $s()), a.eventBus.emit("show_message", {
            title: __("Invoice saved offline"),
            color: "warning"
          }), e && this.print_offline_invoice(this.invoice_doc), a.eventBus.emit("clear_invoice"), a.eventBus.emit("reset_posting_date"), a.back_to_invoice(), a.loading = !1;
          return;
        } catch (i) {
          a.eventBus.emit("show_message", {
            title: __("Cannot Save Offline Invoice: ") + (i.message || __("Unknown error")),
            color: "error"
          }), a.loading = !1;
          return;
        }
      let r;
      this.invoice_doc.doctype === "Sales Order" || this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order ? r = "posawesome.posawesome.api.sales_orders.submit_sales_order" : r = "posawesome.posawesome.api.invoices.submit_invoice", console.log("Submitting with method:", r, "for doctype:", this.invoice_doc.doctype), frappe.call({
        method: r,
        args: {
          data: n,
          invoice: this.invoice_doc,
          order: this.invoice_doc
        },
        callback: function(i) {
          if (i.exc) {
            console.error("Error submitting invoice:", i.exc);
            let o = i.exc.toString();
            o.includes("Amount must be negative") ? (a.eventBus.emit("show_message", {
              title: __("Fixing payment amounts for return invoice..."),
              color: "warning"
            }), a.invoice_doc.payments.forEach((l) => {
              l.amount > 0 && (l.amount = -Math.abs(l.amount)), l.base_amount > 0 && (l.base_amount = -Math.abs(l.base_amount));
            }), console.log("Retrying submission with fixed payment amounts"), setTimeout(() => {
              a.submit_invoice(e);
            }, 500)) : a.eventBus.emit("show_message", {
              title: __("Error submitting invoice: ") + o,
              color: "error"
            }), a.loading = !1;
            return;
          }
          if (!i.message) {
            a.eventBus.emit("show_message", {
              title: __("Error submitting invoice: No response from server"),
              color: "error"
            }), a.loading = !1;
            return;
          }
          e && a.load_print_page(), a.customer_credit_dict = [], a.redeem_customer_credit = !1, a.is_cashback = !0, a.is_credit_return = !1, a.sales_person = "", a.eventBus.emit("set_last_invoice", a.invoice_doc.name), a.eventBus.emit("show_message", {
            title: a.invoice_doc.doctype === "Sales Order" ? __("Sales Order {0} is Submitted", [i.message.name]) : __("Invoice {0} is Submitted", [i.message.name]),
            color: "success"
          }), frappe.utils.play_sound("submit"), XO(a.invoice_doc.items || []), a.addresses = [], a.eventBus.emit("clear_invoice"), a.eventBus.emit("reset_posting_date"), a.back_to_invoice(), a.loading = !1;
        }
      });
    },
    // Set full amount for a payment method (or negative for returns)
    set_full_amount(e) {
      const t = this.invoice_doc.is_return || this.invoiceType === "Return";
      let n = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
      console.log("Setting full amount for payment method idx:", e), console.log("Current payments:", JSON.stringify(this.invoice_doc.payments)), this.invoice_doc.payments.forEach((i) => {
        i.amount = 0, i.base_amount !== void 0 && (i.base_amount = 0);
      });
      const a = event?.target?.textContent?.trim();
      console.log("Clicked button text:", a);
      const r = this.invoice_doc.payments.find(
        (i) => i.mode_of_payment === a
      );
      if (r) {
        console.log("Found clicked payment:", r.mode_of_payment);
        let i = t ? -Math.abs(n) : n;
        r.amount = i, r.base_amount !== void 0 && (r.base_amount = t ? -Math.abs(i) : i), console.log("Set amount for payment:", r.mode_of_payment, "amount:", i);
      } else
        console.log("No payment found for button text:", a);
      this.$forceUpdate();
    },
    // Set remaining amount for a payment method when focused
    set_rest_amount(e) {
      const t = this.invoice_doc.is_return || this.invoiceType === "Return";
      this.invoice_doc.payments.forEach((n) => {
        if (n.idx === e && n.amount === 0 && this.diff_payment > 0) {
          let a = this.diff_payment;
          t && (a = -Math.abs(a)), n.amount = a, n.base_amount !== void 0 && (n.base_amount = t ? -Math.abs(a) : a);
        }
      });
    },
    // Clear all payment amounts
    clear_all_amounts() {
      this.invoice_doc.payments.forEach((e) => {
        e.amount = 0;
      });
    },
    // Open print page for invoice
    load_print_page() {
      const e = this.pos_profile.print_format_for_online || this.pos_profile.print_format, t = this.pos_profile.letter_head || 0, n = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", a = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(n) + "&name=" + this.invoice_doc.name + "&trigger_print=1&format=" + e + "&no_letterhead=" + t;
      if (this.pos_profile.posa_silent_print)
        Np(a);
      else {
        const r = window.open(a, "Print");
        r.addEventListener(
          "load",
          function() {
            r.print();
          },
          { once: !0 }
        );
      }
    },
    // Print invoice using a more detailed offline template
    async print_offline_invoice(e) {
      if (!e) return;
      const t = await Fne(e), n = window.open("", "_blank");
      n.document.write(t), n.document.close(), n.focus(), n.print();
    },
    // Validate due date (should not be in the past)
    validate_due_date() {
      const e = frappe.datetime.now_date(), t = Date.parse(this.invoice_doc.due_date), n = Date.parse(e);
      t < n && (this.invoice_doc.due_date = e);
    },
    // Keyboard shortcut for payment submit (Ctrl+X)
    shortPay(e) {
      e.key.toLowerCase() === "x" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), e.stopPropagation(), this.invoice_doc && this.invoice_doc.payments && this.submit_invoice());
    },
    // Get available customer credit and auto-allocate
    get_available_credit(e) {
      this.clear_all_amounts(), e ? frappe.call("posawesome.posawesome.api.payments.get_available_credit", {
        customer: this.invoice_doc.customer,
        company: this.pos_profile.company
      }).then((t) => {
        const n = t.message;
        if (n.length) {
          let r = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
          n.forEach((i) => {
            r > 0 ? r >= i.total_credit ? (i.credit_to_redeem = i.total_credit, r -= i.total_credit) : (i.credit_to_redeem = r, r = 0) : i.credit_to_redeem = 0;
          }), this.customer_credit_dict = n;
        } else
          this.customer_credit_dict = [];
      }) : this.customer_credit_dict = [];
    },
    // Get customer addresses for shipping
    get_addresses() {
      const e = this;
      if (!e.invoice_doc || !e.invoice_doc.customer) {
        e.addresses = [];
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.customers.get_customer_addresses",
        args: { customer: e.invoice_doc.customer },
        async: !0,
        callback: function(t) {
          t.exc ? e.addresses = [] : e.addresses = t.message;
        }
      });
    },
    // Filter addresses for autocomplete
    addressFilter(e, t) {
      const n = t.toLowerCase();
      return e.address_title && e.address_title.toLowerCase().includes(n) || e.address_line1 && e.address_line1.toLowerCase().includes(n) || e.address_line2 && e.address_line2.toLowerCase().includes(n) || e.city && e.city.toLowerCase().includes(n) || e.name && e.name.toLowerCase().includes(n);
    },
    // Open dialog to add new address
    new_address() {
      if (!this.invoice_doc || !this.invoice_doc.customer) {
        this.eventBus.emit("show_message", {
          title: __("Please select a customer first"),
          color: "error"
        });
        return;
      }
      this.eventBus.emit("open_new_address", this.invoice_doc.customer);
    },
    // Get sales person names from API/localStorage
    get_sales_person_names() {
      const e = this;
      if (e.pos_profile.posa_local_storage && CA().length)
        try {
          e.sales_persons = CA();
        } catch (t) {
          console.error(t);
        }
      frappe.call({
        method: "posawesome.posawesome.api.utilities.get_sales_person_names",
        callback: function(t) {
          t.message && t.message.length > 0 ? (e.sales_persons = t.message.map((n) => ({
            value: n.name,
            title: n.sales_person_name,
            sales_person_name: n.sales_person_name,
            name: n.name
          })), e.pos_profile.posa_local_storage && z9(e.sales_persons)) : e.sales_persons = [];
        }
      });
    },
    // Request payment for phone type
    request_payment() {
      this.phone_dialog = !1;
      const e = this;
      if (!this.invoice_doc.contact_mobile) {
        this.eventBus.emit("show_message", {
          title: __("Please set the customer's mobile number"),
          color: "error"
        }), this.eventBus.emit("open_edit_customer"), this.back_to_invoice();
        return;
      }
      this.eventBus.emit("freeze", { title: __("Waiting for payment...") }), this.invoice_doc.payments.forEach((n) => {
        n.amount = this.flt(n.amount);
      });
      let t = { ...this.invoice_doc };
      t.total_change = this.invoice_doc.is_return ? 0 : -this.diff_payment, t.paid_change = this.invoice_doc.is_return ? 0 : this.paid_change, t.credit_change = -this.credit_change, t.redeemed_customer_credit = this.redeemed_customer_credit, t.customer_credit_dict = this.customer_credit_dict, t.is_cashback = this.is_cashback, frappe.call({
        method: "posawesome.posawesome.api.invoices.update_invoice",
        args: { data: t },
        async: !1,
        callback: function(n) {
          n.message && (e.invoice_doc = n.message);
        }
      }).then(() => {
        frappe.call({
          method: "posawesome.posawesome.api.payments.create_payment_request",
          args: { doc: e.invoice_doc }
        }).fail(() => {
          e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
            title: __("Payment request failed"),
            color: "error"
          });
        }).then(({ message: n }) => {
          const a = n.name;
          setTimeout(() => {
            frappe.db.get_value("Payment Request", a, [
              "status",
              "grand_total"
            ]).then(({ message: r }) => {
              r.status !== "Paid" ? (e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
                title: __(
                  "Payment Request took too long to respond. Please try requesting for payment again"
                ),
                color: "error"
              })) : (e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
                title: __("Payment of {0} received successfully.", [
                  e.formatCurrency(
                    r.grand_total,
                    e.invoice_doc.currency,
                    0
                  )
                ]),
                color: "success"
              }), frappe.db.get_doc(e.invoice_doc.doctype, e.invoice_doc.name).then((i) => {
                e.invoice_doc = i, e.submit(null, !0);
              }));
            });
          }, 3e4);
        });
      });
    },
    // Get M-Pesa payment modes from backend
    get_mpesa_modes() {
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.m_pesa.get_mpesa_mode_of_payment",
        args: { company: e.pos_profile.company },
        async: !0,
        callback: function(t) {
          t.exc ? e.mpesa_modes = [] : e.mpesa_modes = t.message;
        }
      });
    },
    // Check if payment is M-Pesa C2B
    is_mpesa_c2b_payment(e) {
      return this.mpesa_modes.includes(e.mode_of_payment) && e.type === "Bank" ? (e.amount = 0, !0) : !1;
    },
    // Open M-Pesa payment dialog
    mpesa_c2b_dialog(e) {
      const t = {
        company: this.pos_profile.company,
        mode_of_payment: e.mode_of_payment,
        customer: this.invoice_doc.customer
      };
      this.eventBus.emit("open_mpesa_payments", t);
    },
    // Set M-Pesa payment as customer credit
    set_mpesa_payment(e) {
      this.pos_profile.use_customer_credit = !0, this.redeem_customer_credit = !0;
      const t = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
      let n = e.unallocated_amount > t ? t : e.unallocated_amount;
      n = n > 0 ? n : 0;
      const a = {
        type: "Advance",
        credit_origin: e.name,
        total_credit: this.flt(e.unallocated_amount),
        credit_to_redeem: this.flt(n)
      };
      this.clear_all_amounts(), this.customer_credit_dict.push(a);
    },
    // Update delivery date after selection
    update_delivery_date() {
      this.invoice_doc.posa_delivery_date = this.formatDate(this.new_delivery_date), this.invoice_doc.customer && (!this.addresses || this.addresses.length === 0) && this.get_addresses();
    },
    // Update purchase order date after selection
    update_po_date() {
      this.invoice_doc.po_date = this.formatDate(this.new_po_date);
    },
    // Update credit due date after selection
    update_credit_due_date() {
      this.invoice_doc.due_date = this.formatDate(this.new_credit_due_date);
    },
    // Apply preset or typed number of days to set due date
    applyDuePreset(e) {
      if (e === null || e === "")
        return;
      const t = Rt.fromArabicNumerals(String(e));
      if (isNaN(t))
        return;
      const n = parseInt(t, 10), a = /* @__PURE__ */ new Date();
      a.setDate(a.getDate() + n), this.new_credit_due_date = this.formatDateDisplay(a), this.credit_due_days = n, this.update_credit_due_date();
    },
    // Apply days entered in dialog
    applyCustomDays() {
      this.applyDuePreset(this.custom_days_value), this.custom_days_dialog = !1;
    },
    // Format date to YYYY-MM-DD
    formatDate(e) {
      if (!e) return null;
      if (typeof e == "string") {
        const n = Rt.fromArabicNumerals(e);
        if (/^\d{4}-\d{2}-\d{2}$/.test(n))
          return n;
        if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(n)) {
          const [a, r, i] = n.split("-");
          return `${i}-${r.padStart(2, "0")}-${a.padStart(2, "0")}`;
        }
        e = n;
      }
      const t = new Date(Rt.fromArabicNumerals(String(e)));
      if (!isNaN(t.getTime())) {
        const n = t.getFullYear(), a = `0${t.getMonth() + 1}`.slice(-2), r = `0${t.getDate()}`.slice(-2);
        return `${n}-${a}-${r}`;
      }
      return Rt.fromArabicNumerals(String(e));
    },
    formatDateDisplay(e) {
      if (!e) return "";
      const t = Rt.fromArabicNumerals(String(e));
      if (typeof e == "string" && /^\d{4}-\d{2}-\d{2}$/.test(t)) {
        const [a, r, i] = t.split("-");
        return Rt.toArabicNumerals(`${i}-${r}-${a}`);
      }
      const n = new Date(t);
      if (!isNaN(n.getTime())) {
        const a = n.getFullYear(), r = `0${n.getMonth() + 1}`.slice(-2), i = `0${n.getDate()}`.slice(-2);
        return Rt.toArabicNumerals(`${i}-${r}-${a}`);
      }
      return Rt.toArabicNumerals(t);
    },
    // Show paid amount info message
    showPaidAmount() {
      this.eventBus.emit("show_message", {
        title: `Total Paid Amount: ${this.formatCurrency(this.total_payments)}`,
        color: "info"
      });
    },
    // Show diff payment info message
    showDiffPayment() {
      this.invoice_doc && this.eventBus.emit("show_message", {
        title: `To Be Paid: ${this.formatCurrency(this.diff_payment)}`,
        color: "info"
      });
    },
    // Show paid change info message
    showPaidChange() {
      this.eventBus.emit("show_message", {
        title: `Paid Change: ${this.formatCurrency(this.paid_change)}`,
        color: "info"
      });
    },
    // Show credit change info message
    showCreditChange(e) {
      e > 0 ? (this.credit_change = e, this.paid_change = -this.diff_payment) : this.credit_change = 0;
    },
    // Get reason why submit buttons are disabled (for debugging)
    getDisabledReason() {
      return this.loading ? "Loading in progress" : this.invoice_doc ? this.pos_profile.posa_enable_restaurant_mode ? "Restaurant mode - buttons should be enabled" : this.pos_profile.posa_allow_sales_order && this.invoiceType === "Order" && !this.invoice_doc.posa_delivery_date ? "Delivery date required for sales order" : "Unknown reason" : "No invoice document";
    },
    // Format currency value
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, this.currency_precision);
    },
    // Get change amount for display
    get_change_amount() {
      return Math.max(0, this.total_payments - this.invoice_doc.grand_total);
    },
    // Sync any invoices stored offline and show pending/synced counts
    async syncPendingInvoices() {
      const e = $s();
      if (e && (this.eventBus.emit("show_message", {
        title: `${e} invoice${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), this.eventBus.emit("pending_invoices_changed", e)), cn())
        return;
      const t = await eD();
      t && (t.synced || t.drafted) && (t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline invoice${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      }), t.drafted && this.eventBus.emit("show_message", {
        title: `${t.drafted} offline invoice${t.drafted > 1 ? "s" : ""} saved as draft`,
        color: "warning"
      })), this.eventBus.emit("pending_invoices_changed", $s());
    }
  },
  // Lifecycle hook: created
  created() {
    document.addEventListener("keydown", this.shortPay.bind(this)), this.syncPendingInvoices(), this.eventBus.on("network-online", this.syncPendingInvoices), this.eventBus.on("server-online", this.syncPendingInvoices);
  },
  // Lifecycle hook: mounted
  mounted() {
    this.$nextTick(() => {
      this.eventBus.on("send_invoice_doc_payment", (e) => {
        console.log("Payments component received invoice doc:", {
          name: e.name,
          doctype: e.doctype,
          is_return: e.is_return,
          grand_total: e.grand_total,
          current_invoiceType: this.invoiceType
        }), this.invoice_doc = e, e.doctype === "Sales Invoice" || e.doctype === "POS Invoice" ? (this.invoiceType = "Invoice", console.log("Set invoice type to 'Invoice' based on doctype:", e.doctype)) : e.doctype === "Sales Order" && (this.invoiceType = "Order", console.log("Set invoice type to 'Order' based on doctype:", e.doctype));
        const t = this.invoice_doc.payments.find((n) => n.default === 1);
        if (this.is_credit_sale = !1, this.is_write_off_change = !1, e.is_return) {
          if (this.is_return = !0, this.is_credit_return = !1, e.payments.forEach((n) => {
            n.amount = 0, n.base_amount = 0;
          }), t) {
            const n = e.rounded_total || e.grand_total;
            t.amount = -Math.abs(n), t.base_amount !== void 0 && (t.base_amount = -Math.abs(n));
          }
        } else t && (t.amount = this.flt(
          e.rounded_total || e.grand_total,
          this.currency_precision
        ), this.is_credit_return = !1);
        this.loyalty_amount = 0, this.redeemed_customer_credit = 0, e.customer && this.get_addresses(), this.get_sales_person_names(), this.$forceUpdate(), console.log("Payments component setup complete, invoice type:", this.invoiceType);
      }), this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile, this.stock_settings = e.stock_settings || {}, this.get_mpesa_modes();
      }), this.eventBus.on("add_the_new_address", (e) => {
        this.addresses.push(e), this.$forceUpdate();
      }), this.eventBus.on("update_invoice_type", (e) => {
        console.log("Payments component received invoice type update:", e), this.invoiceType = e, this.invoice_doc && e !== "Order" ? (this.invoice_doc.posa_delivery_date = null, this.invoice_doc.posa_notes = null, this.invoice_doc.shipping_address_name = null) : this.invoice_doc && e === "Order" && (this.new_delivery_date = this.formatDateDisplay(frappe.datetime.now_date()), this.update_delivery_date()), this.invoice_doc && e === "Return" && (this.invoice_doc.is_return = 1, this.ensureReturnPaymentsAreNegative(), this.is_credit_return = !1), this.$forceUpdate(), console.log("Payments component updated invoice type to:", this.invoiceType);
      }), this.eventBus.on("change_invoice_type", (e) => {
        console.log("Payments component received change_invoice_type:", e), this.invoiceType = e, this.$forceUpdate(), console.log("Payments component changed invoice type to:", this.invoiceType);
      }), this.eventBus.on("update_customer", (e) => {
        this.customer !== e && (this.customer_credit_dict = [], this.redeem_customer_credit = !1, this.is_cashback = !0, this.is_credit_return = !1);
      }), this.eventBus.on("set_pos_settings", (e) => {
        this.pos_settings = e;
      }), this.eventBus.on("set_customer_info_to_edit", (e) => {
        this.customer_info = e;
      }), this.eventBus.on("set_mpesa_payment", (e) => {
        this.set_mpesa_payment(e);
      }), this.eventBus.on("clear_invoice", () => {
        this.invoice_doc = "", this.is_return = !1, this.is_credit_return = !1;
      }), this.eventBus.on("show_payment", this.handleShowPayment);
    });
  },
  // Lifecycle hook: beforeUnmount
  beforeUnmount() {
    this.eventBus.off("send_invoice_doc_payment"), this.eventBus.off("register_pos_profile"), this.eventBus.off("add_the_new_address"), this.eventBus.off("update_invoice_type"), this.eventBus.off("change_invoice_type"), this.eventBus.off("update_customer"), this.eventBus.off("set_pos_settings"), this.eventBus.off("set_customer_info_to_edit"), this.eventBus.off("set_mpesa_payment"), this.eventBus.off("clear_invoice"), this.eventBus.off("network-online", this.syncPendingInvoices), this.eventBus.off("server-online", this.syncPendingInvoices), this.eventBus.off("show_payment", this.handleShowPayment);
  },
  // Lifecycle hook: unmounted
  unmounted() {
    document.removeEventListener("keydown", this.shortPay);
  }
}, Une = { class: "pa-0" }, $ne = {
  ref: "paymentContainer",
  class: "overflow-y-auto pa-2",
  style: { "max-height": "67vh" }
}, qne = { key: 1 }, Hne = ["innerHTML"], zne = ["innerHTML"], Wne = ["innerHTML"], jne = ["innerHTML"], Kne = ["innerHTML"], Yne = ["innerHTML"], Gne = ["innerHTML"], Qne = ["innerHTML"], Jne = { key: 4 }, Xne = { class: "mt-1" }, Zne = { key: 5 }, eae = { class: "pa-2 py-3" }, tae = {
  key: 0,
  class: "mt-1 mb-1 text-subtitle-2"
}, nae = {
  key: 1,
  class: "mt-1 mb-1 text-subtitle-2 text-red"
}, aae = { class: "text-h5 text-primary" };
function rae(e, t, n, a, r, i) {
  const o = Q("v-progress-linear"), l = Q("v-text-field"), s = Q("v-col"), d = Q("v-row"), u = Q("v-divider"), f = Q("v-btn"), h = Q("VueDatePicker"), g = Q("v-list-item-title"), v = Q("v-list-item-subtitle"), w = Q("v-list-item"), b = Q("v-autocomplete"), p = Q("v-textarea"), y = Q("v-switch"), S = Q("v-chip"), E = Q("v-select"), C = Q("v-card"), D = Q("v-tooltip"), P = Q("v-card-title"), O = Q("v-container"), T = Q("v-card-text"), A = Q("v-spacer"), V = Q("v-card-actions"), M = Q("v-dialog");
  return ee(), Oe("div", Une, [
    _(C, {
      class: Ie(["selection mx-auto pa-1 my-0 mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "68vh", height: "68vh" }])
    }, {
      default: x(() => [
        _(o, {
          active: r.loading,
          indeterminate: r.loading,
          absolute: "",
          location: "top",
          color: "info"
        }, null, 8, ["active", "indeterminate"]),
        I("div", $ne, [
          r.invoice_doc ? (ee(), Re(d, {
            key: 0,
            class: "pa-1",
            dense: ""
          }, {
            default: x(() => [
              _(s, { cols: "7" }, {
                default: x(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Paid Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    modelValue: i.total_payments_display,
                    "onUpdate:modelValue": t[0] || (t[0] = (B) => i.total_payments_display = B),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    onClick: i.showPaidAmount
                  }, null, 8, ["label", "bg-color", "modelValue", "prefix", "onClick"])
                ]),
                _: 1
              }),
              _(s, { cols: "5" }, {
                default: x(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: "To Be Paid",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    modelValue: i.diff_payment_display,
                    "onUpdate:modelValue": t[1] || (t[1] = (B) => i.diff_payment_display = B),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    onFocus: i.showDiffPayment,
                    "persistent-placeholder": ""
                  }, null, 8, ["bg-color", "modelValue", "prefix", "onFocus"])
                ]),
                _: 1
              }),
              i.credit_change > 0 && !r.invoice_doc.is_return ? (ee(), Re(s, {
                key: 0,
                cols: "7"
              }, {
                default: x(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Paid Change"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(r.paid_change),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    rules: r.paid_change_rules,
                    density: "compact",
                    readonly: "",
                    type: "text",
                    onClick: i.showPaidChange
                  }, null, 8, ["label", "bg-color", "model-value", "prefix", "rules", "onClick"])
                ]),
                _: 1
              })) : ye("", !0),
              i.credit_change > 0 && !r.invoice_doc.is_return ? (ee(), Re(s, {
                key: 1,
                cols: "5"
              }, {
                default: x(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Credit Change"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(i.credit_change),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    type: "text",
                    onChange: t[2] || (t[2] = (B) => {
                      e.setFormatedCurrency(this, "credit_change", null, !1, B), e.updateCreditChange(this.credit_change);
                    })
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })) : ye("", !0)
            ]),
            _: 1
          })) : ye("", !0),
          _(u),
          r.is_cashback ? (ee(), Oe("div", qne, [
            (ee(!0), Oe(Qe, null, rn(r.invoice_doc.payments, (B) => (ee(), Re(d, {
              class: "payments pa-1",
              key: B.name
            }, {
              default: x(() => [
                i.is_mpesa_c2b_payment(B) ? ye("", !0) : (ee(), Re(s, {
                  key: 0,
                  cols: "6"
                }, {
                  default: x(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._(B.mode_of_payment),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      "model-value": i.formatCurrency(B.amount),
                      onChange: (N) => e.setFormatedCurrency(B, "amount", null, !1, N),
                      rules: [
                        e.isNumber,
                        (N) => !B.mode_of_payment.toLowerCase().includes("cash") || this.is_credit_sale || N >= (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) || "Cash payment cannot be less than invoice total when credit sale is off"
                      ],
                      prefix: i.currencySymbol(r.invoice_doc.currency),
                      onFocus: (N) => i.set_rest_amount(B.idx),
                      readonly: r.invoice_doc.is_return
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "rules", "prefix", "onFocus", "readonly"])
                  ]),
                  _: 2
                }, 1024)),
                i.is_mpesa_c2b_payment(B) ? ye("", !0) : (ee(), Re(s, {
                  key: 1,
                  cols: "6"
                }, {
                  default: x(() => [
                    _(f, {
                      block: "",
                      color: "primary",
                      theme: "dark",
                      onClick: (N) => i.set_full_amount(B.idx)
                    }, {
                      default: x(() => [
                        ae(q(B.mode_of_payment), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ]),
                  _: 2
                }, 1024)),
                i.is_mpesa_c2b_payment(B) ? (ee(), Re(s, {
                  key: 2,
                  cols: "12",
                  class: "pl-3"
                }, {
                  default: x(() => [
                    _(f, {
                      block: "",
                      color: "success",
                      theme: "dark",
                      onClick: (N) => i.mpesa_c2b_dialog(B)
                    }, {
                      default: x(() => [
                        ae(q(e.__("Get Payments")) + " " + q(B.mode_of_payment), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ]),
                  _: 2
                }, 1024)) : ye("", !0),
                B.type === "Phone" && B.amount > 0 && i.request_payment_field ? (ee(), Re(s, {
                  key: 3,
                  cols: "3",
                  class: "pl-1"
                }, {
                  default: x(() => [
                    _(f, {
                      block: "",
                      color: "success",
                      theme: "dark",
                      disabled: B.amount === 0,
                      onClick: (N) => i.request_payment(B)
                    }, {
                      default: x(() => [
                        ae(q(e.__("Request")), 1)
                      ]),
                      _: 2
                    }, 1032, ["disabled", "onClick"])
                  ]),
                  _: 2
                }, 1024)) : ye("", !0)
              ]),
              _: 2
            }, 1024))), 128))
          ])) : ye("", !0),
          r.invoice_doc && i.available_points_amount > 0 && !r.invoice_doc.is_return ? (ee(), Re(d, {
            key: 2,
            class: "payments pa-1"
          }, {
            default: x(() => [
              _(s, { cols: "7" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Redeem Loyalty Points"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.loyalty_amount),
                    type: "text",
                    onChange: t[3] || (t[3] = (B) => e.setFormatedCurrency(this, "loyalty_amount", null, !1, B)),
                    prefix: i.currencySymbol(r.invoice_doc.currency)
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "5" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("You can redeem up to"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": e.formatFloat(i.available_points_amount),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })) : ye("", !0),
          r.invoice_doc && i.available_customer_credit > 0 && !r.invoice_doc.is_return && r.redeem_customer_credit ? (ee(), Re(d, {
            key: 3,
            class: "payments pa-1"
          }, {
            default: x(() => [
              _(s, { cols: "7" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Redeemed Customer Credit"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.redeemed_customer_credit),
                    type: "text",
                    onChange: t[4] || (t[4] = (B) => e.setFormatedCurrency(this, "redeemed_customer_credit", null, !1, B)),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "5" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("You can redeem credit up to"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(i.available_customer_credit),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })) : ye("", !0),
          _(u),
          _(d, { class: "pa-1" }, {
            default: x(() => [
              _(s, { cols: "6" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Net Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(r.invoice_doc.net_total, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Tax and Charges"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.total_taxes_and_charges, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Total Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.total, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: i.diff_label,
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(i.diff_payment, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Discount Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.discount_amount),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Grand Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.grand_total),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              r.invoice_doc.rounded_total ? (ee(), Re(s, {
                key: 0,
                cols: "6"
              }, {
                default: x(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Rounded Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.rounded_total),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })) : ye("", !0),
              r.pos_profile.posa_allow_sales_order && r.invoiceType === "Order" ? (ee(), Re(s, {
                key: 1,
                cols: "6"
              }, {
                default: x(() => [
                  _(h, {
                    modelValue: r.new_delivery_date,
                    "onUpdate:modelValue": [
                      t[5] || (t[5] = (B) => r.new_delivery_date = B),
                      t[6] || (t[6] = (B) => i.update_delivery_date())
                    ],
                    "model-type": "format",
                    format: "dd-MM-yyyy",
                    "min-date": /* @__PURE__ */ new Date(),
                    "auto-apply": "",
                    dark: i.isDarkTheme,
                    class: "dark-field sleek-field"
                  }, null, 8, ["modelValue", "min-date", "dark"])
                ]),
                _: 1
              })) : ye("", !0),
              r.invoice_doc.posa_delivery_date ? (ee(), Re(s, {
                key: 2,
                cols: "12"
              }, {
                default: x(() => [
                  _(b, {
                    density: "compact",
                    clearable: "",
                    "auto-select-first": "",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Address"),
                    modelValue: r.invoice_doc.shipping_address_name,
                    "onUpdate:modelValue": t[7] || (t[7] = (B) => r.invoice_doc.shipping_address_name = B),
                    items: r.addresses,
                    "item-title": "address_title",
                    "item-value": "name",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "no-data-text": e.__("Address not found"),
                    "hide-details": "",
                    customFilter: i.addressFilter,
                    "append-icon": "mdi-plus",
                    "onClick:append": i.new_address
                  }, {
                    item: x(({ item: B }) => [
                      _(w, null, {
                        default: x(() => [
                          _(g, { class: "text-primary text-subtitle-1" }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.address_title
                              }, null, 8, Hne)
                            ]),
                            _: 2
                          }, 1024),
                          _(v, null, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.address_line1
                              }, null, 8, zne)
                            ]),
                            _: 2
                          }, 1024),
                          B.address_line2 ? (ee(), Re(v, { key: 0 }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.address_line2
                              }, null, 8, Wne)
                            ]),
                            _: 2
                          }, 1024)) : ye("", !0),
                          B.city ? (ee(), Re(v, { key: 1 }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.city
                              }, null, 8, jne)
                            ]),
                            _: 2
                          }, 1024)) : ye("", !0),
                          B.state ? (ee(), Re(v, { key: 2 }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.state
                              }, null, 8, Kne)
                            ]),
                            _: 2
                          }, 1024)) : ye("", !0),
                          B.country ? (ee(), Re(v, { key: 3 }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.country
                              }, null, 8, Yne)
                            ]),
                            _: 2
                          }, 1024)) : ye("", !0),
                          B.mobile_no ? (ee(), Re(v, { key: 4 }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.mobile_no
                              }, null, 8, Gne)
                            ]),
                            _: 2
                          }, 1024)) : ye("", !0),
                          B.address_type ? (ee(), Re(v, { key: 5 }, {
                            default: x(() => [
                              I("div", {
                                innerHTML: B.address_type
                              }, null, 8, Qne)
                            ]),
                            _: 2
                          }, 1024)) : ye("", !0)
                        ]),
                        _: 2
                      }, 1024)
                    ]),
                    _: 1
                  }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "customFilter", "onClick:append"])
                ]),
                _: 1
              })) : ye("", !0),
              r.pos_profile.posa_display_additional_notes ? (ee(), Re(s, {
                key: 3,
                cols: "12"
              }, {
                default: x(() => [
                  _(p, {
                    class: "pa-0 dark-field sleek-field",
                    variant: "solo",
                    density: "compact",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    clearable: "",
                    color: "primary",
                    "auto-grow": "",
                    rows: "2",
                    label: e.frappe._("Additional Notes"),
                    modelValue: r.invoice_doc.posa_notes,
                    "onUpdate:modelValue": t[8] || (t[8] = (B) => r.invoice_doc.posa_notes = B)
                  }, null, 8, ["bg-color", "label", "modelValue"])
                ]),
                _: 1
              })) : ye("", !0)
            ]),
            _: 1
          }),
          r.pos_profile.posa_allow_customer_purchase_order ? (ee(), Oe("div", Jne, [
            _(u),
            _(d, {
              class: "pa-1",
              justify: "center",
              align: "start"
            }, {
              default: x(() => [
                _(s, { cols: "6" }, {
                  default: x(() => [
                    _(l, {
                      modelValue: r.invoice_doc.po_no,
                      "onUpdate:modelValue": t[9] || (t[9] = (B) => r.invoice_doc.po_no = B),
                      label: e.frappe._("Purchase Order"),
                      variant: "solo",
                      density: "compact",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      clearable: "",
                      color: "primary",
                      "hide-details": ""
                    }, null, 8, ["modelValue", "label", "bg-color"])
                  ]),
                  _: 1
                }),
                _(s, { cols: "6" }, {
                  default: x(() => [
                    _(h, {
                      modelValue: r.new_po_date,
                      "onUpdate:modelValue": [
                        t[10] || (t[10] = (B) => r.new_po_date = B),
                        t[11] || (t[11] = (B) => i.update_po_date())
                      ],
                      "model-type": "format",
                      format: "dd-MM-yyyy",
                      "min-date": /* @__PURE__ */ new Date(),
                      "auto-apply": "",
                      dark: i.isDarkTheme,
                      class: "dark-field sleek-field"
                    }, null, 8, ["modelValue", "min-date", "dark"]),
                    _(l, {
                      modelValue: r.invoice_doc.po_date,
                      "onUpdate:modelValue": t[12] || (t[12] = (B) => r.invoice_doc.po_date = B),
                      label: e.frappe._("Purchase Order Date"),
                      readonly: "",
                      variant: "solo",
                      density: "compact",
                      "hide-details": "",
                      color: "primary"
                    }, null, 8, ["modelValue", "label"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ])) : ye("", !0),
          _(u),
          _(d, {
            class: "pa-1",
            align: "start",
            "no-gutters": ""
          }, {
            default: x(() => [
              r.pos_profile.posa_allow_write_off_change && i.credit_change > 0 && !r.invoice_doc.is_return ? (ee(), Re(s, {
                key: 0,
                cols: "6"
              }, {
                default: x(() => [
                  _(y, {
                    modelValue: r.is_write_off_change,
                    "onUpdate:modelValue": t[13] || (t[13] = (B) => r.is_write_off_change = B),
                    flat: "",
                    label: e.frappe._("Write Off Difference Amount"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ye("", !0),
              r.pos_profile.posa_allow_credit_sale && !r.invoice_doc.is_return ? (ee(), Re(s, {
                key: 1,
                cols: "6"
              }, {
                default: x(() => [
                  _(y, {
                    modelValue: r.is_credit_sale,
                    "onUpdate:modelValue": t[14] || (t[14] = (B) => r.is_credit_sale = B),
                    label: e.frappe._("Credit Sale?")
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ye("", !0),
              r.invoice_doc.is_return && r.pos_profile.use_cashback ? (ee(), Re(s, {
                key: 2,
                cols: "6"
              }, {
                default: x(() => [
                  _(y, {
                    modelValue: r.is_cashback,
                    "onUpdate:modelValue": t[15] || (t[15] = (B) => r.is_cashback = B),
                    flat: "",
                    label: e.frappe._("Cashback?"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ye("", !0),
              r.invoice_doc.is_return ? (ee(), Re(s, {
                key: 3,
                cols: "6"
              }, {
                default: x(() => [
                  _(y, {
                    modelValue: r.is_credit_return,
                    "onUpdate:modelValue": t[16] || (t[16] = (B) => r.is_credit_return = B),
                    flat: "",
                    label: e.frappe._("Credit Return?"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ye("", !0),
              r.is_credit_sale ? (ee(), Re(s, {
                key: 4,
                cols: "6"
              }, {
                default: x(() => [
                  _(h, {
                    modelValue: r.new_credit_due_date,
                    "onUpdate:modelValue": [
                      t[17] || (t[17] = (B) => r.new_credit_due_date = B),
                      t[18] || (t[18] = (B) => i.update_credit_due_date())
                    ],
                    "model-type": "format",
                    format: "dd-MM-yyyy",
                    "min-date": /* @__PURE__ */ new Date(),
                    "auto-apply": "",
                    dark: i.isDarkTheme,
                    class: "dark-field sleek-field"
                  }, null, 8, ["modelValue", "min-date", "dark"]),
                  _(l, {
                    class: "mt-2 dark-field sleek-field",
                    density: "compact",
                    variant: "solo",
                    type: "number",
                    min: "0",
                    max: "365",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    modelValue: r.credit_due_days,
                    "onUpdate:modelValue": t[19] || (t[19] = (B) => r.credit_due_days = B),
                    modelModifiers: { number: !0 },
                    label: e.frappe._("Days until due"),
                    "hide-details": "",
                    onChange: t[20] || (t[20] = (B) => i.applyDuePreset(r.credit_due_days))
                  }, null, 8, ["bg-color", "modelValue", "label"]),
                  I("div", Xne, [
                    (ee(!0), Oe(Qe, null, rn(r.credit_due_presets, (B) => (ee(), Re(S, {
                      key: B,
                      size: "small",
                      class: "ma-1",
                      variant: "solo",
                      color: "primary",
                      onClick: (N) => i.applyDuePreset(B)
                    }, {
                      default: x(() => [
                        ae(q(B) + " " + q(e.frappe._("days")), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"]))), 128))
                  ])
                ]),
                _: 1
              })) : ye("", !0),
              !r.invoice_doc.is_return && r.pos_profile.use_customer_credit ? (ee(), Re(s, {
                key: 5,
                cols: "6"
              }, {
                default: x(() => [
                  _(y, {
                    modelValue: r.redeem_customer_credit,
                    "onUpdate:modelValue": [
                      t[21] || (t[21] = (B) => r.redeem_customer_credit = B),
                      t[22] || (t[22] = (B) => i.get_available_credit(r.redeem_customer_credit))
                    ],
                    flat: "",
                    label: e.frappe._("Use Customer Credit"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ye("", !0)
            ]),
            _: 1
          }),
          r.invoice_doc && i.available_customer_credit > 0 && !r.invoice_doc.is_return && r.redeem_customer_credit ? (ee(), Oe("div", Zne, [
            (ee(!0), Oe(Qe, null, rn(r.customer_credit_dict, (B, N) => (ee(), Re(d, { key: N }, {
              default: x(() => [
                _(s, { cols: "4" }, {
                  default: x(() => [
                    I("div", eae, q(B.credit_origin), 1)
                  ]),
                  _: 2
                }, 1024),
                _(s, { cols: "4" }, {
                  default: x(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Available Credit"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      "model-value": i.formatCurrency(B.total_credit),
                      readonly: "",
                      prefix: i.currencySymbol(r.invoice_doc.currency)
                    }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                  ]),
                  _: 2
                }, 1024),
                _(s, { cols: "4" }, {
                  default: x(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Redeem Credit"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      type: "text",
                      "model-value": i.formatCurrency(B.credit_to_redeem),
                      onChange: (H) => e.setFormatedCurrency(B, "credit_to_redeem", null, !1, H),
                      prefix: i.currencySymbol(r.invoice_doc.currency)
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "prefix"])
                  ]),
                  _: 2
                }, 1024)
              ]),
              _: 2
            }, 1024))), 128))
          ])) : ye("", !0),
          _(u),
          _(d, {
            class: "pb-0 mb-2",
            align: "start"
          }, {
            default: x(() => [
              _(s, { cols: "12" }, {
                default: x(() => [
                  r.sales_persons && r.sales_persons.length > 0 ? (ee(), Oe("p", tae, q(r.sales_persons.length) + " sales persons found ", 1)) : (ee(), Oe("p", nae, "No sales persons found")),
                  _(E, {
                    density: "compact",
                    clearable: "",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Sales Person"),
                    modelValue: r.sales_person,
                    "onUpdate:modelValue": t[23] || (t[23] = (B) => r.sales_person = B),
                    items: r.sales_persons,
                    "item-title": "title",
                    "item-value": "value",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "no-data-text": e.__("Sales Person not found"),
                    "hide-details": "",
                    disabled: e.readonly
                  }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "disabled"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ], 512)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(C, {
      flat: "",
      class: "cards mb-0 mt-3 pa-0"
    }, {
      default: x(() => [
        _(d, {
          align: "start",
          "no-gutters": ""
        }, {
          default: x(() => [
            _(s, { cols: "6" }, {
              default: x(() => [
                _(f, {
                  ref: "submitButton",
                  block: "",
                  size: "large",
                  color: "primary",
                  theme: "dark",
                  onClick: i.submit,
                  loading: r.loading,
                  disabled: r.loading || i.vaildatPayment,
                  class: Ie({ "submit-highlight": r.highlightSubmit })
                }, {
                  default: x(() => [
                    ae(q(i.getSubmitButtonText()) + " ", 1),
                    i.vaildatPayment ? (ee(), Re(D, {
                      key: 0,
                      activator: "parent",
                      location: "top"
                    }, {
                      default: x(() => [
                        I("span", null, "Button disabled: " + q(i.getDisabledReason()), 1)
                      ]),
                      _: 1
                    })) : ye("", !0)
                  ]),
                  _: 1
                }, 8, ["onClick", "loading", "disabled", "class"])
              ]),
              _: 1
            }),
            _(s, {
              cols: "6",
              class: "pl-1"
            }, {
              default: x(() => [
                _(f, {
                  block: "",
                  size: "large",
                  color: "success",
                  theme: "dark",
                  onClick: t[24] || (t[24] = (B) => i.submit(void 0, !1, !0)),
                  loading: r.loading,
                  disabled: r.loading || i.vaildatPayment
                }, {
                  default: x(() => [
                    ae(q(i.getSubmitPrintButtonText()) + " ", 1),
                    i.vaildatPayment ? (ee(), Re(D, {
                      key: 0,
                      activator: "parent",
                      location: "top"
                    }, {
                      default: x(() => [
                        I("span", null, "Button disabled: " + q(i.getDisabledReason()), 1)
                      ]),
                      _: 1
                    })) : ye("", !0)
                  ]),
                  _: 1
                }, 8, ["loading", "disabled"])
              ]),
              _: 1
            }),
            _(s, { cols: "12" }, {
              default: x(() => [
                _(f, {
                  block: "",
                  class: "mt-2 pa-1",
                  size: "large",
                  color: "error",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: x(() => [
                    ae(q(e.__("Cancel Payment")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    r.showDebugInfo ? (ee(), Re(C, {
      key: 0,
      flat: "",
      class: "cards mb-0 mt-2 pa-2",
      style: { "font-size": "12px" }
    }, {
      default: x(() => [
        _(d, { dense: "" }, {
          default: x(() => [
            _(s, { cols: "12" }, {
              default: x(() => [
                t[33] || (t[33] = I("strong", null, "Payment Debug Info:", -1)),
                t[34] || (t[34] = I("br", null, null, -1)),
                ae(" Invoice Type: " + q(r.invoiceType), 1),
                t[35] || (t[35] = I("br", null, null, -1)),
                ae(" Invoice Doc Type: " + q(r.invoice_doc?.doctype), 1),
                t[36] || (t[36] = I("br", null, null, -1)),
                ae(" Invoice Doc Name: " + q(r.invoice_doc?.name), 1),
                t[37] || (t[37] = I("br", null, null, -1)),
                ae(" Is Return: " + q(r.invoice_doc?.is_return), 1),
                t[38] || (t[38] = I("br", null, null, -1)),
                ae(" Restaurant Mode: " + q(r.pos_profile?.posa_enable_restaurant_mode), 1),
                t[39] || (t[39] = I("br", null, null, -1)),
                ae(" Validation Result: " + q(i.vaildatPayment), 1),
                t[40] || (t[40] = I("br", null, null, -1)),
                ae(" Loading: " + q(r.loading), 1),
                t[41] || (t[41] = I("br", null, null, -1)),
                ae(" Grand Total: " + q(r.invoice_doc?.grand_total), 1),
                t[42] || (t[42] = I("br", null, null, -1)),
                ae(" Rounded Total: " + q(r.invoice_doc?.rounded_total), 1),
                t[43] || (t[43] = I("br", null, null, -1)),
                ae(" Delivery Date: " + q(r.invoice_doc?.posa_delivery_date), 1),
                t[44] || (t[44] = I("br", null, null, -1)),
                ae(" Disabled Reason: " + q(i.getDisabledReason()), 1)
              ]),
              _: 1,
              __: [33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44]
            })
          ]),
          _: 1
        }),
        _(f, {
          size: "small",
          onClick: t[25] || (t[25] = (B) => r.showDebugInfo = !1),
          class: "mt-2"
        }, {
          default: x(() => t[45] || (t[45] = [
            ae("Hide Debug")
          ])),
          _: 1,
          __: [45]
        })
      ]),
      _: 1
    })) : ye("", !0),
    r.showDebugInfo ? ye("", !0) : (ee(), Re(f, {
      key: 1,
      size: "small",
      variant: "text",
      onClick: t[26] || (t[26] = (B) => r.showDebugInfo = !0),
      class: "mt-1"
    }, {
      default: x(() => t[46] || (t[46] = [
        ae(" Show Debug Info ")
      ])),
      _: 1,
      __: [46]
    })),
    _(M, {
      modelValue: r.custom_days_dialog,
      "onUpdate:modelValue": t[29] || (t[29] = (B) => r.custom_days_dialog = B),
      "max-width": "300px"
    }, {
      default: x(() => [
        _(C, null, {
          default: x(() => [
            _(P, { class: "text-h6" }, {
              default: x(() => [
                ae(q(e.__("Custom Due Days")), 1)
              ]),
              _: 1
            }),
            _(T, { class: "pa-0" }, {
              default: x(() => [
                _(O, null, {
                  default: x(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      type: "number",
                      min: "0",
                      max: "365",
                      class: "dark-field sleek-field",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      modelValue: r.custom_days_value,
                      "onUpdate:modelValue": t[27] || (t[27] = (B) => r.custom_days_value = B),
                      modelModifiers: { number: !0 },
                      label: e.frappe._("Days"),
                      "hide-details": ""
                    }, null, 8, ["bg-color", "modelValue", "label"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            _(V, null, {
              default: x(() => [
                _(A),
                _(f, {
                  color: "error",
                  theme: "dark",
                  onClick: t[28] || (t[28] = (B) => r.custom_days_dialog = !1)
                }, {
                  default: x(() => [
                    ae(q(e.__("Close")), 1)
                  ]),
                  _: 1
                }),
                _(f, {
                  color: "primary",
                  theme: "dark",
                  onClick: i.applyCustomDays
                }, {
                  default: x(() => [
                    ae(q(e.__("Apply")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    _(M, {
      modelValue: r.phone_dialog,
      "onUpdate:modelValue": t[32] || (t[32] = (B) => r.phone_dialog = B),
      "max-width": "400px"
    }, {
      default: x(() => [
        _(C, null, {
          default: x(() => [
            _(P, null, {
              default: x(() => [
                I("span", aae, q(e.__("Confirm Mobile Number")), 1)
              ]),
              _: 1
            }),
            _(T, { class: "pa-0" }, {
              default: x(() => [
                _(O, null, {
                  default: x(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Mobile Number"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      modelValue: r.invoice_doc.contact_mobile,
                      "onUpdate:modelValue": t[30] || (t[30] = (B) => r.invoice_doc.contact_mobile = B),
                      type: "number"
                    }, null, 8, ["label", "bg-color", "modelValue"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            _(V, null, {
              default: x(() => [
                _(A),
                _(f, {
                  color: "error",
                  theme: "dark",
                  onClick: t[31] || (t[31] = (B) => r.phone_dialog = !1)
                }, {
                  default: x(() => [
                    ae(q(e.__("Close")), 1)
                  ]),
                  _: 1
                }),
                _(f, {
                  color: "primary",
                  theme: "dark",
                  onClick: i.request_payment
                }, {
                  default: x(() => [
                    ae(q(e.__("Request")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ]);
}
const iae = /* @__PURE__ */ nn(Nne, [["render", rae], ["__scopeId", "data-v-6a243b2b"]]), oae = {
  mixins: [Oi],
  data: () => ({
    loading: !1,
    pos_profile: "",
    pos_offers: [],
    allItems: [],
    groupItemCache: {},
    discount_percentage_offer_name: null,
    itemsPerPage: 1e3,
    expanded: [],
    singleExpand: !0,
    items_headers: [
      { title: __("Name"), value: "name", align: "start" },
      { title: __("Apply On"), value: "apply_on", align: "start" },
      { title: __("Offer"), value: "offer", align: "start" },
      { title: __("Applied"), value: "offer_applied", align: "start" }
    ]
  }),
  computed: {
    offersCount() {
      return this.pos_offers.length;
    },
    appliedOffersCount() {
      return this.pos_offers.filter((e) => !!e.offer_applied).length;
    },
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  methods: {
    back_to_invoice() {
      this.eventBus.emit("show_offers", "false");
    },
    async fetchGroupItems(e) {
      try {
        const { message: t } = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            item_group: e
            // fetch complete inventory; backend paginates internally
          }
        }), n = t || [];
        this.groupItemCache[e] = n.map((i) => ({
          item_code: i.item_code,
          item_name: i.item_name || i.item_code,
          rate: i.price_list_rate
        }));
        const a = new Set(this.allItems.map((i) => i.item_code)), r = n.filter((i) => !a.has(i.item_code));
        r.length && (this.allItems.push(...r), this.eventBus.emit("set_all_items", this.allItems)), this.forceUpdateItem();
      } catch (t) {
        console.error("Failed to fetch group items", t);
      }
    },
    forceUpdateItem() {
      let e = [];
      e = [...this.pos_offers], this.pos_offers = e;
    },
    toggleOfferApplied() {
      this.forceUpdateItem();
    },
    makeid(e) {
      let t = "";
      const n = "abcdefghijklmnopqrstuvwxyz0123456789", a = n.length;
      for (var r = 0; r < e; r++)
        t += n.charAt(Math.floor(Math.random() * a));
      return t;
    },
    updatePosOffers(e) {
      const t = [];
      this.pos_offers.forEach((n) => {
        e.find((r) => r.name === n.name) || t.push(n.row_id);
      }), this.removeOffers(t), e.forEach((n) => {
        const a = this.pos_offers.find((r) => n.name === r.name);
        if (a)
          a.items = n.items, a.offer === "Grand Total" && !this.discount_percentage_offer_name && (a.offer_applied = !!a.auto), n.apply_on == "Item Group" && n.apply_type == "Item Group" && n.replace_cheapest_item && (a.give_item = n.give_item, a.apply_item_code = n.apply_item_code);
        else {
          const r = { ...n };
          if (n.row_id || (r.row_id = this.makeid(20)), n.apply_type == "Item Code" && (r.give_item = n.apply_item_code || "Nothing"), n.offer_applied ? r.offer_applied == !!n.offer_applied : n.apply_type == "Item Group" && n.offer == "Give Product" && !n.replace_cheapest_item && !n.replace_item || n.offer === "Grand Total" && this.discount_percentage_offer_name ? r.offer_applied = !1 : r.offer_applied = !!n.auto, r.offer == "Give Product" && !r.give_item) {
            const i = this.get_give_items(r);
            i.length && (r.give_item = i[0].item_code);
          }
          this.pos_offers.push(r), this.eventBus.emit("show_message", {
            title: __("New Offer Available"),
            color: "warning"
          });
        }
      });
    },
    removeOffers(e) {
      this.pos_offers = this.pos_offers.filter((t) => !e.includes(t.row_id));
    },
    handelOffers() {
      const e = this.pos_offers.filter((t) => t.offer_applied);
      this.eventBus.emit("update_invoice_offers", e);
    },
    handleNewLine(e) {
      return e ? e.replace(/(?:\r\n|\r|\n)/g, "<br />") : "";
    },
    get_give_items(e) {
      if (e.apply_type === "Item Code")
        return [
          {
            item_code: e.apply_item_code,
            item_name: e.apply_item_code
          }
        ];
      if (e.apply_type === "Item Group") {
        const t = e.apply_item_group;
        if (!this.groupItemCache[t])
          return this.fetchGroupItems(t), [];
        let n = this.groupItemCache[t];
        e.less_then > 0 && (n = n.filter(
          (i) => i.rate < e.less_then
        ));
        const a = [], r = /* @__PURE__ */ new Set();
        return n.forEach((i) => {
          r.has(i.item_code) || (r.add(i.item_code), a.push({
            item_code: i.item_code,
            item_name: i.item_name || i.item_code
          }));
        }), a;
      }
      return [];
    },
    updateCounters() {
      this.eventBus.emit("update_offers_counters", {
        offersCount: this.offersCount,
        appliedOffersCount: this.appliedOffersCount
      });
    },
    updatePosCoupuns() {
      const e = this.pos_offers.filter(
        (t) => t.offer_applied && t.coupon_based
      );
      this.eventBus.emit("update_pos_coupons", e);
    }
  },
  watch: {
    pos_offers: {
      deep: !0,
      handler() {
        this.handelOffers(), this.updateCounters(), this.updatePosCoupuns();
      }
    }
  },
  created: function() {
    this.$nextTick(function() {
      this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile;
      });
    }), this.eventBus.on("update_customer", (e) => {
      this.customer != e && (this.offers = []);
    }), this.eventBus.on("update_pos_offers", (e) => {
      this.updatePosOffers(e);
    }), this.eventBus.on("update_discount_percentage_offer_name", (e) => {
      this.discount_percentage_offer_name = e.value;
    }), this.eventBus.on("set_all_items", (e) => {
      this.allItems = e;
    });
  }
}, sae = { class: "text-h6 text-primary" }, lae = ["colspan"], cae = ["innerHTML"];
function uae(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-checkbox-btn"), s = Q("v-col"), d = Q("v-autocomplete"), u = Q("v-row"), f = Q("v-data-table"), h = Q("v-card"), g = Q("v-btn");
  return ee(), Oe("div", null, [
    _(h, {
      class: Ie(["selection mx-auto mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "80vh", height: "80vh" }])
    }, {
      default: x(() => [
        _(o, null, {
          default: x(() => [
            I("span", sae, q(e.__("Offers")), 1)
          ]),
          _: 1
        }),
        I("div", {
          class: "my-0 py-0 overflow-y-auto",
          style: { "max-height": "75vh" },
          onMouseover: t[1] || (t[1] = (v) => e.style = "cursor: pointer")
        }, [
          _(f, {
            headers: e.items_headers,
            items: e.pos_offers,
            "single-expand": e.singleExpand,
            expanded: e.expanded,
            "onUpdate:expanded": t[0] || (t[0] = (v) => e.expanded = v),
            "show-expand": "",
            "item-value": "row_id",
            class: "elevation-1",
            "items-per-page": e.itemsPerPage,
            "hide-default-footer": ""
          }, {
            "item.offer_applied": x(({ item: v }) => [
              _(l, {
                onClick: i.toggleOfferApplied,
                modelValue: v.offer_applied,
                "onUpdate:modelValue": (w) => v.offer_applied = w,
                disabled: v.offer == "Give Product" && !v.give_item && (!v.replace_cheapest_item || !v.replace_item) || v.offer == "Grand Total" && e.discount_percentage_offer_name && e.discount_percentage_offer_name != v.name
              }, null, 8, ["onClick", "modelValue", "onUpdate:modelValue", "disabled"])
            ]),
            "expanded-row": x(({ item: v }) => [
              I("td", {
                colspan: e.items_headers.length
              }, [
                _(u, { class: "mt-2" }, {
                  default: x(() => [
                    v.description ? (ee(), Re(s, { key: 0 }, {
                      default: x(() => [
                        I("div", {
                          class: "text-primary",
                          innerHTML: i.handleNewLine(v.description)
                        }, null, 8, cae)
                      ]),
                      _: 2
                    }, 1024)) : ye("", !0),
                    v.offer == "Give Product" ? (ee(), Re(s, { key: 1 }, {
                      default: x(() => [
                        _(d, {
                          modelValue: v.give_item,
                          "onUpdate:modelValue": (w) => v.give_item = w,
                          items: i.get_give_items(v),
                          "item-title": "item_name",
                          "item-value": "item_code",
                          variant: "outlined",
                          density: "compact",
                          color: "primary",
                          label: e.frappe._("Give Item"),
                          disabled: v.apply_type != "Item Group" || v.replace_item || v.replace_cheapest_item
                        }, null, 8, ["modelValue", "onUpdate:modelValue", "items", "label", "disabled"])
                      ]),
                      _: 2
                    }, 1024)) : ye("", !0)
                  ]),
                  _: 2
                }, 1024)
              ], 8, lae)
            ]),
            _: 1
          }, 8, ["headers", "items", "single-expand", "expanded", "items-per-page"])
        ], 32)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(h, {
      flat: "",
      style: { "max-height": "11vh", height: "11vh" },
      class: "cards mb-0 mt-3 py-0"
    }, {
      default: x(() => [
        _(u, {
          align: "start",
          "no-gutters": ""
        }, {
          default: x(() => [
            _(s, { cols: "12" }, {
              default: x(() => [
                _(g, {
                  block: "",
                  class: "pa-1",
                  size: "large",
                  color: "warning",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: x(() => [
                    ae(q(e.__("Back")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    })
  ]);
}
const dae = /* @__PURE__ */ nn(oae, [["render", uae]]), fae = {
  data: () => ({
    loading: !1,
    pos_profile: "",
    customer: "",
    posa_coupons: [],
    new_coupon: null,
    itemsPerPage: 1e3,
    singleExpand: !0,
    items_headers: [
      { title: __("Coupon"), value: "coupon_code", align: "start" },
      { title: __("Type"), value: "type", align: "start" },
      { title: __("Offer"), value: "pos_offer", align: "start" },
      { title: __("Applied"), value: "applied", align: "start" }
    ]
  }),
  computed: {
    couponsCount() {
      return this.posa_coupons.length;
    },
    appliedCouponsCount() {
      return this.posa_coupons.filter((e) => !!e.applied).length;
    },
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  methods: {
    back_to_invoice() {
      this.eventBus.emit("show_coupons", "false");
    },
    add_coupon(e) {
      if (!this.customer || !e) {
        this.eventBus.emit("show_message", {
          title: __("Select a customer to use coupon"),
          color: "error"
        });
        return;
      }
      if (this.posa_coupons.find((a) => a.coupon_code == e)) {
        this.eventBus.emit("show_message", {
          title: __("This coupon already used !"),
          color: "error"
        });
        return;
      }
      const n = this;
      frappe.call({
        method: "posawesome.posawesome.api.offers.get_pos_coupon",
        args: {
          coupon: e,
          customer: n.customer,
          company: n.pos_profile.company
        },
        callback: function(a) {
          if (a.message) {
            const r = a.message;
            if (r.msg != "Apply" || !r.coupon)
              n.eventBus.emit("show_message", {
                title: r.msg,
                color: "error"
              });
            else {
              n.new_coupon = null;
              const i = r.coupon;
              n.posa_coupons.push({
                coupon: i.name,
                coupon_code: i.coupon_code,
                type: i.coupon_type,
                applied: 0,
                pos_offer: i.pos_offer,
                customer: i.customer || n.customer
              });
            }
          }
        }
      });
    },
    setActiveGiftCoupons() {
      if (!this.customer) return;
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.offers.get_active_gift_coupons",
        args: {
          customer: e.customer,
          company: e.pos_profile.company
        },
        callback: function(t) {
          t.message && t.message.forEach((a) => {
            e.add_coupon(a);
          });
        }
      });
    },
    updatePosCoupons(e) {
      this.posa_coupons.forEach((t) => {
        e.find((a) => a.offer_applied && a.coupon == t.coupon) ? t.applied = 1 : t.applied = 0;
      });
    },
    removeCoupon(e) {
      this.posa_coupons = this.posa_coupons.filter((t) => !e.includes(t.coupon));
    },
    updateInvoice() {
      this.eventBus.emit("update_invoice_coupons", this.posa_coupons);
    },
    updateCounters() {
      this.eventBus.emit("update_coupons_counters", {
        couponsCount: this.couponsCount,
        appliedCouponsCount: this.appliedCouponsCount
      });
    }
  },
  watch: {
    posa_coupons: {
      deep: !0,
      handler() {
        this.updateInvoice(), this.updateCounters();
      }
    }
  },
  created: function() {
    this.$nextTick(function() {
      this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile;
      });
    }), this.eventBus.on("update_customer", (e) => {
      if (this.customer != e) {
        const t = [];
        this.posa_coupons.forEach((n) => {
          n.type == "Promotional" ? n.customer = e : t.push(n.coupon);
        }), this.customer = e, t.length && this.removeCoupon(t);
      }
      this.setActiveGiftCoupons();
    }), this.eventBus.on("update_pos_coupons", (e) => {
      this.updatePosCoupons(e);
    }), this.eventBus.on("set_pos_coupons", (e) => {
      this.posa_coupons = e;
    });
  }
}, mae = { class: "text-h6 text-primary" };
function hae(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-text-field"), s = Q("v-col"), d = Q("v-btn"), u = Q("v-row"), f = Q("v-checkbox-btn"), h = Q("v-data-table"), g = Q("v-card");
  return ee(), Oe("div", null, [
    _(g, {
      class: Ie(["selection mx-auto mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "80vh", height: "80vh" }])
    }, {
      default: x(() => [
        _(o, null, {
          default: x(() => [
            I("span", mae, q(e.__("Coupons")), 1)
          ]),
          _: 1
        }),
        _(u, {
          class: "px-4 pb-2",
          "no-gutters": ""
        }, {
          default: x(() => [
            _(s, {
              cols: "8",
              class: "pr-2"
            }, {
              default: x(() => [
                _(l, {
                  density: "compact",
                  variant: "outlined",
                  color: "primary",
                  label: e.frappe._("Coupon"),
                  "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                  "hide-details": "",
                  modelValue: e.new_coupon,
                  "onUpdate:modelValue": t[0] || (t[0] = (v) => e.new_coupon = v),
                  class: "coupon-input",
                  onKeydown: t[1] || (t[1] = Rl((v) => i.add_coupon(e.new_coupon), ["enter"]))
                }, null, 8, ["label", "bg-color", "modelValue"])
              ]),
              _: 1
            }),
            _(s, { cols: "4" }, {
              default: x(() => [
                _(d, {
                  class: "add-coupon-btn",
                  color: "success",
                  theme: "dark",
                  block: "",
                  onClick: t[2] || (t[2] = (v) => i.add_coupon(e.new_coupon))
                }, {
                  default: x(() => [
                    ae(q(e.__("add")), 1)
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        }),
        I("div", {
          class: "my-0 py-0 overflow-y-auto",
          style: { "max-height": "75vh" },
          onMouseover: t[4] || (t[4] = (v) => e.style = "cursor: pointer")
        }, [
          _(h, {
            headers: e.items_headers,
            items: e.posa_coupons,
            "single-expand": e.singleExpand,
            expanded: e.expanded,
            "onUpdate:expanded": t[3] || (t[3] = (v) => e.expanded = v),
            "item-key": "coupon",
            class: "elevation-1",
            "items-per-page": e.itemsPerPage,
            "hide-default-footer": ""
          }, {
            "item.applied": x(({ item: v }) => [
              _(f, {
                modelValue: v.applied,
                "onUpdate:modelValue": (w) => v.applied = w,
                disabled: ""
              }, null, 8, ["modelValue", "onUpdate:modelValue"])
            ]),
            _: 1
          }, 8, ["headers", "items", "single-expand", "expanded", "items-per-page"])
        ], 32)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(g, {
      flat: "",
      style: { "max-height": "11vh", height: "11vh" },
      class: "cards mb-0 mt-3 py-0"
    }, {
      default: x(() => [
        _(u, {
          align: "start",
          "no-gutters": ""
        }, {
          default: x(() => [
            _(s, { cols: "12" }, {
              default: x(() => [
                _(d, {
                  block: "",
                  class: "pa-1",
                  size: "large",
                  color: "warning",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: x(() => [
                    ae(q(e.__("Back")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    })
  ]);
}
const _ae = /* @__PURE__ */ nn(fae, [["render", hae], ["__scopeId", "data-v-9520f66e"]]), pae = {
  // props: ["draftsDialog"],
  mixins: [Oi],
  data: () => ({
    draftsDialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: {},
    headers: [
      {
        title: __("Customer"),
        value: "customer_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      },
      {
        title: __("Time"),
        align: "start",
        sortable: !0,
        value: "posting_time"
      },
      {
        title: __("Invoice"),
        value: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.draftsDialog = !1;
    },
    submit_dialog() {
      this.selected.length > 0 ? (this.eventBus.emit("load_invoice", this.selected[0]), this.draftsDialog = !1) : this.eventBus.emit("show_message", {
        title: "Select an invoice to load",
        color: "error"
      });
    }
  },
  created: function() {
    this.eventBus.on("open_drafts", (e) => {
      this.draftsDialog = !0, this.dialog_data = e;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_drafts");
  }
}, vae = { class: "text-h5 text-primary" }, gae = { class: "text-primary" };
function yae(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-card-subtitle"), s = Q("v-data-table"), d = Q("v-col"), u = Q("v-row"), f = Q("v-container"), h = Q("v-card-text"), g = Q("v-spacer"), v = Q("v-btn"), w = Q("v-card-actions"), b = Q("v-card"), p = Q("v-dialog");
  return ee(), Re(u, { justify: "center" }, {
    default: x(() => [
      _(p, {
        modelValue: e.draftsDialog,
        "onUpdate:modelValue": t[1] || (t[1] = (y) => e.draftsDialog = y),
        "max-width": "900px"
      }, {
        default: x(() => [
          _(b, {
            variant: "flat",
            color: i.isDarkTheme ? e.$vuetify.theme.themes.dark.colors.surface : "white"
          }, {
            default: x(() => [
              _(o, null, {
                default: x(() => [
                  I("span", vae, q(e.__("Load Sales Invoice")), 1)
                ]),
                _: 1
              }),
              _(l, null, {
                default: x(() => [
                  I("span", gae, q(e.__("Load previously saved invoices")), 1)
                ]),
                _: 1
              }),
              _(h, { class: "pa-0" }, {
                default: x(() => [
                  _(f, null, {
                    default: x(() => [
                      _(u, { "no-gutters": "" }, {
                        default: x(() => [
                          _(d, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              _(s, {
                                headers: e.headers,
                                items: e.dialog_data,
                                "item-value": "name",
                                class: "elevation-1",
                                theme: i.isDarkTheme ? "dark" : "light",
                                "show-select": "",
                                modelValue: e.selected,
                                "onUpdate:modelValue": t[0] || (t[0] = (y) => e.selected = y),
                                "select-strategy": "single",
                                "return-object": ""
                              }, {
                                "item.posting_time": x(({ item: y }) => [
                                  ae(q(y.posting_time.split(".")[0]), 1)
                                ]),
                                "item.grand_total": x(({ item: y }) => [
                                  ae(q(e.currencySymbol(y.currency)) + " " + q(e.formatCurrency(y.grand_total)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "theme", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(w, null, {
                default: x(() => [
                  _(g),
                  _(v, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[2] || (t[2] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [2]
                  }, 8, ["onClick"]),
                  _(v, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => t[3] || (t[3] = [
                      ae("Load Sale")
                    ])),
                    _: 1,
                    __: [3]
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 8, ["color"])
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const bae = /* @__PURE__ */ nn(pae, [["render", yae]]), wae = {
  // props: ["draftsDialog"],
  mixins: [Oi],
  data: () => ({
    draftsDialog: !1,
    singleSelect: !0,
    pos_profile: {},
    selected: [],
    dialog_data: {},
    order_name: "",
    headers: [
      {
        title: __("Customer"),
        key: "customer_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        key: "transaction_date"
      },
      //   {
      //     title: __("Time"),
      //     align: "start",
      //     sortable: true,
      //     key: "posting_time",
      //   },
      {
        title: __("Order"),
        key: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        key: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.draftsDialog = !1;
    },
    clearSelected() {
      this.selected = [];
    },
    search_orders() {
      frappe.call({
        method: "posawesome.posawesome.api.sales_orders.search_orders",
        args: {
          order_name: vm.order_name,
          company: this.pos_profile.company,
          currency: this.pos_profile.currency
        },
        async: !1,
        callback: function(e) {
          e.message && (vm.dialog_data = e.message);
        }
      });
    },
    async submit_dialog() {
      if (this.selected.length > 0) {
        var e = {};
        if (await frappe.call({
          method: "posawesome.posawesome.api.invoices.create_sales_invoice_from_order",
          args: {
            sales_order: this.selected[0].name
          },
          callback: function(t) {
            t.message && (e = t.message);
          }
        }), e.items) {
          const t = this.selected[0].items, n = e.items, a = {};
          n.forEach((r) => {
            a[r.item_code] = r;
          });
          for (let r = 0; r < t.length; r++) {
            const i = t[r], o = a[i.item_code];
            o ? (i.qty = o.qty, i.amount = o.amount, i.uom = o.uom, i.rate = o.rate) : (t.splice(r, 1), r--);
          }
        }
        this.eventBus.emit("load_order", this.selected[0]), this.draftsDialog = !1, frappe.call({
          method: "posawesome.posawesome.api.invoices.delete_sales_invoice",
          args: {
            sales_invoice: e.name
          },
          callback: function(t) {
            t.message;
          }
        });
      }
    }
  },
  created: function() {
    this.eventBus.on("open_orders", (e) => {
      this.clearSelected(), this.draftsDialog = !0, this.dialog_data = e, this.order_name = "";
    });
  },
  mounted() {
    this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_orders"), this.eventBus.off("register_pos_profile");
  }
}, kae = { class: "text-h5 text-primary" };
function Sae(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-text-field"), s = Q("v-btn"), d = Q("v-row"), u = Q("v-data-table"), f = Q("v-col"), h = Q("v-container"), g = Q("v-card-text"), v = Q("v-spacer"), w = Q("v-card-actions"), b = Q("v-card"), p = Q("v-dialog");
  return ee(), Re(d, { justify: "center" }, {
    default: x(() => [
      _(p, {
        modelValue: e.draftsDialog,
        "onUpdate:modelValue": t[2] || (t[2] = (y) => e.draftsDialog = y),
        "max-width": "900px"
      }, {
        default: x(() => [
          _(b, null, {
            default: x(() => [
              _(o, null, {
                default: x(() => [
                  I("span", kae, q(e.__("Select Sales Orders")), 1)
                ]),
                _: 1
              }),
              _(g, { class: "pa-0" }, {
                default: x(() => [
                  _(h, null, {
                    default: x(() => [
                      _(d, { class: "mb-4" }, {
                        default: x(() => [
                          _(l, {
                            color: "primary",
                            label: e.frappe._("Order ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            modelValue: e.order_name,
                            "onUpdate:modelValue": t[0] || (t[0] = (y) => e.order_name = y),
                            density: "compact",
                            clearable: "",
                            class: "mx-4"
                          }, null, 8, ["label", "bg-color", "modelValue"]),
                          _(s, {
                            variant: "text",
                            class: "ml-2",
                            color: "primary",
                            theme: "dark",
                            onClick: i.search_orders
                          }, {
                            default: x(() => [
                              ae(q(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      }),
                      _(d, { "no-gutters": "" }, {
                        default: x(() => [
                          _(f, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              _(u, {
                                headers: e.headers,
                                items: e.dialog_data,
                                "item-key": "name",
                                class: "elevation-1",
                                "show-select": "",
                                modelValue: e.selected,
                                "onUpdate:modelValue": t[1] || (t[1] = (y) => e.selected = y),
                                "return-object": "",
                                "select-strategy": "single"
                              }, {
                                "item.grand_total": x(({ item: y }) => [
                                  ae(q(e.currencySymbol(y.currency)) + " " + q(e.formatCurrency(y.grand_total)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(w, null, {
                default: x(() => [
                  _(v),
                  _(s, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[3] || (t[3] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [3]
                  }, 8, ["onClick"]),
                  e.selected.length ? (ee(), Re(s, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => t[4] || (t[4] = [
                      ae("Select")
                    ])),
                    _: 1,
                    __: [4]
                  }, 8, ["onClick"])) : ye("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Cae = /* @__PURE__ */ nn(wae, [["render", Sae]]), Aae = {
  mixins: [Oi],
  data() {
    return {
      ordersDialog: !1,
      pos_profile: {},
      pos_opening_shift: null,
      selected: [],
      orders_data: [],
      filtered_orders: [],
      loading: !1,
      converting: !1,
      multiSelectMode: !1,
      expanded: [],
      // Track expanded rows
      filter_pos_profile: null,
      // Default POS profile filter (will be set to current pos_profile)
      filter_order_type: null,
      filter_status: "Draft",
      // Default to Draft status
      filter_date: null,
      search_text: "",
      pos_profiles_data: [],
      // Store all available POS profiles
      headers: [
        {
          title: __("Order"),
          key: "name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Customer"),
          key: "customer_name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "transaction_date"
        },
        {
          title: __("Order Type"),
          key: "order_type_name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Table"),
          key: "table_number",
          align: "center",
          sortable: !0
        },
        {
          title: __("Status"),
          key: "order_status",
          align: "center",
          sortable: !0
        },
        {
          title: __("Amount"),
          key: "grand_total",
          align: "end",
          sortable: !1
        },
        {
          title: __("Actions"),
          key: "actions",
          align: "center",
          sortable: !1
        }
      ],
      order_type_options: [],
      status_options: [
        { title: __("Draft"), value: "Draft" },
        { title: __("Submitted"), value: "Submitted" },
        { title: __("Billed"), value: "Billed" },
        { title: __("Cancelled"), value: "Cancelled" }
      ],
      // Void Items Dialog Data
      voidItemsDialog: !1,
      selectedOrderForVoid: null,
      selectedItemsToVoid: [],
      voidItemsData: [],
      // Enhanced void items data with selection and quantity controls
      voidLoading: !1
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    pos_profile_options() {
      return this.pos_profiles_data.map((e) => ({
        name: e.name,
        display_name: e.name
      }));
    },
    order_type_options() {
      const e = /* @__PURE__ */ new Set();
      return this.orders_data.forEach((t) => {
        t.restaurant_order_type && e.add(t.restaurant_order_type);
      }), Array.from(e);
    },
    status_options() {
      return [
        { title: "Draft", value: "Draft" },
        { title: "Submitted", value: "Submitted" },
        { title: "Billed", value: "Billed" },
        { title: "Cancelled", value: "Cancelled" }
      ];
    }
  },
  watch: {
    filter_pos_profile() {
      this.ordersDialog && this.fetch_orders();
    },
    filter_status() {
      this.ordersDialog && this.fetch_orders();
    },
    filter_date() {
      this.ordersDialog && this.fetch_orders();
    }
  },
  methods: {
    async open_orders_dialog() {
      if (this.ordersDialog = !0, this.clearSelected(), !this.filter_pos_profile && this.pos_profile?.name && (this.filter_pos_profile = this.pos_profile.name), !this.filter_date) {
        const e = /* @__PURE__ */ new Date();
        this.filter_date = e.toISOString().split("T")[0];
      }
      await this.fetch_pos_profiles(), await this.fetch_orders();
    },
    close_dialog() {
      this.ordersDialog = !1, this.clearSelected();
    },
    clearSelected() {
      this.selected = [];
    },
    async fetch_pos_profiles() {
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.get_pos_profiles"
        });
        e.message && (this.pos_profiles_data = e.message);
      } catch (e) {
        console.error("Failed to fetch POS profiles:", e), this.pos_profiles_data = [];
      }
    },
    async fetch_orders() {
      this.loading = !0;
      try {
        console.log("Fetching orders with filters:", {
          pos_opening_shift: this.pos_opening_shift?.name || null,
          status: this.filter_status || null,
          date_filter: this.filter_date || null,
          pos_profile_name: this.filter_pos_profile || null
        });
        const e = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_orders",
          args: {
            pos_opening_shift: this.pos_opening_shift?.name || null,
            status: this.filter_status || null,
            date_filter: this.filter_date || null,
            pos_profile_name: this.filter_pos_profile || null
          }
        });
        if (console.log("=== FETCH ORDERS DEBUG ==="), console.log("Raw API response:", e), console.log("Response message:", e.message), e.message && e.message.length > 0) {
          console.log("First few orders from API:"), e.message.slice(0, 5).forEach((n, a) => {
            console.log(`  Order ${a + 1}:`, {
              name: n.name,
              doctype: n.doctype || "not specified",
              customer: n.customer,
              docstatus: n.docstatus
            });
          });
          const t = e.message.filter((n) => !n.name || n.name.trim() === "");
          t.length > 0 && (console.error("CRITICAL: API returned orders with empty names:"), t.forEach((n) => {
            console.error("  INVALID ORDER:", n);
          }));
        }
        if (console.log("=== END FETCH ORDERS DEBUG ==="), console.log("API response:", e), e.message) {
          const t = e.message.filter((a) => {
            const r = a.name && a.name.trim() !== "";
            return r || console.warn("Filtering out invalid order entry:", a.name), r;
          });
          this.orders_data = t, console.log("Orders data (all naming series accepted):", this.orders_data), this.filter_orders();
          const n = [...new Set(t.map((a) => a.order_type_name).filter(Boolean))];
          this.order_type_options = n.map((a) => ({ title: a, value: a }));
        }
      } catch (e) {
        console.error("Failed to fetch restaurant orders", e), this.eventBus.emit("show_message", {
          title: __("Error fetching orders"),
          color: "error"
        });
      } finally {
        this.loading = !1;
      }
    },
    async refresh_orders() {
      await this.fetch_orders(), this.eventBus.emit("show_message", {
        title: __("Orders refreshed"),
        color: "success"
      });
    },
    filter_orders() {
      let e = [...this.orders_data];
      if (this.filter_pos_profile && console.log(`Counter filter selected: ${this.filter_pos_profile} (showing all orders until pos_profile field is added to Sales Order)`), this.filter_order_type && (e = e.filter((t) => t.order_type_name === this.filter_order_type)), this.filter_status && (e = e.filter((t) => this.getOrderStatus(t) === this.filter_status)), this.filter_date && (e = e.filter((t) => new Date(t.transaction_date).toISOString().split("T")[0] === this.filter_date)), this.search_text) {
        const t = this.search_text.toLowerCase();
        e = e.filter(
          (n) => n.name.toLowerCase().includes(t) || n.customer_name.toLowerCase().includes(t)
        );
      }
      this.filtered_orders = e;
    },
    getOrderStatus(e) {
      return e.docstatus === 0 ? "Draft" : e.docstatus === 1 && e.per_billed < 100 ? "Submitted" : e.per_billed >= 100 ? "Billed" : "Unknown";
    },
    getStatusColor(e) {
      const t = this.getOrderStatus(e);
      return {
        Draft: "orange",
        Submitted: "blue",
        Billed: "success"
      }[t] || "grey";
    },
    getStatusIcon(e) {
      const t = this.getOrderStatus(e);
      return {
        Draft: "mdi-file-document-outline",
        Submitted: "mdi-check-circle-outline",
        Billed: "mdi-receipt"
      }[t] || "mdi-information-outline";
    },
    getOrderTypeColor(e) {
      return {
        "Dine In": "purple",
        "Take Away": "orange",
        Delivery: "green"
      }[e] || "grey";
    },
    canConvertToPayment(e) {
      const t = (e.docstatus === 0 || e.docstatus === 1) && e.per_billed < 100;
      return console.log("Can convert to payment:", {
        order: e.name,
        docstatus: e.docstatus,
        per_billed: e.per_billed,
        canConvert: t
      }), t;
    },
    canEdit(e) {
      return e.docstatus === 0;
    },
    canCancel(e) {
      return e.docstatus === 1 && e.per_billed < 100;
    },
    canDelete(e) {
      return e.docstatus === 0;
    },
    canAddItems(e) {
      return (e.docstatus === 0 || e.docstatus === 1) && e.table_number && e.per_billed < 100;
    },
    canConvertMultipleToInvoice() {
      if (!this.selected || this.selected.length === 0)
        return console.log("No orders selected for multiple conversion"), !1;
      if (this.selected.length < 2)
        return console.log("Need at least 2 orders for multiple conversion"), !1;
      console.log("Checking multiple selection:", {
        selected_count: this.selected.length,
        multiSelectMode: this.multiSelectMode,
        selected_orders: this.selected.map((a) => ({
          name: a.name,
          customer: a.customer,
          customer_name: a.customer_name,
          docstatus: a.docstatus,
          per_billed: a.per_billed,
          status: this.getOrderStatus(a)
        }))
      });
      const e = this.selected[0].customer, t = this.selected.every((a) => a.customer === e);
      if (console.log("Same customer check:", {
        firstCustomer: e,
        sameCustomer: t,
        customers: this.selected.map((a) => a.customer)
      }), !t)
        return console.log("Orders are not from the same customer"), !1;
      const n = this.selected.every((a) => {
        const r = a.docstatus === 0;
        return console.log(`Order ${a.name} eligible for multi-edit:`, {
          docstatus: a.docstatus,
          status: this.getOrderStatus(a),
          eligible: r
        }), r;
      });
      return console.log("All draft orders check:", n), n || console.log("Some orders are not draft - multi-edit only supports draft orders"), n;
    },
    toggleMultiSelect() {
      this.multiSelectMode = !this.multiSelectMode, this.clearSelected();
    },
    async convert_to_payment() {
      if (!this.selected.length) return;
      const e = this.selected[0];
      console.log("=== CONVERT TO PAYMENT DEBUG ==="), console.log("Selected order object:", JSON.stringify(e, null, 2)), console.log("Order name:", e.name), console.log("Order doctype (if available):", e.doctype), console.log("All orders data:", JSON.stringify(this.orders_data.map((a) => ({ name: a.name, docstatus: a.docstatus })), null, 2)), console.log("=== END DEBUG ===");
      let t = e.name;
      if (!(e.name && this.orders_data.some((a) => a.name === e.name) && e.restaurant_order_type)) {
        console.error("CRITICAL: Selected order is invalid, attempting to find correct order...");
        const a = this.orders_data.find(
          (r) => r.customer === e.customer && Math.abs(r.grand_total - e.grand_total) < 0.01 && r.restaurant_order_type
          // Must be a restaurant order
        );
        if (a)
          console.log("RECOVERY: Found correct order:", a.name), t = a.name, Object.assign(e, a);
        else {
          console.error("RECOVERY FAILED: Could not find correct order"), this.eventBus.emit("show_message", {
            title: __("Invalid order format: {0}. Please refresh the orders list and try again.", [e.name || "undefined"]),
            color: "error"
          });
          return;
        }
      }
      this.converting = !0;
      try {
        if (console.log("Using validated order name:", t), e.docstatus === 0) {
          console.log("Loading draft order into cart for editing:", t);
          const a = await frappe.call({
            method: "frappe.client.get",
            args: {
              doctype: "Sales Order",
              name: t
            }
          });
          if (a.message) {
            const r = a.message;
            console.log("Fetched complete order data:", r), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_invoice", r), this.close_dialog(), this.eventBus.emit("show_message", {
              title: __("Draft Order {0} loaded for editing. Make changes and click SUBMIT when ready.", [t]),
              color: "success"
            });
          } else
            throw new Error("Failed to fetch order data");
        } else {
          console.log("Converting submitted order to invoice for payment:", t);
          const a = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
            args: {
              sales_order_name: t,
              pos_profile_name: this.pos_profile?.name || null
            }
          });
          a.message && (this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("load_invoice", a.message), this.close_dialog(), this.eventBus.emit("show_message", {
            title: __("Order {0} converted to invoice for payment. Review items and click PAY when ready.", [t]),
            color: "success"
          }));
        }
      } catch (a) {
        console.error("Failed to convert order to payment", a), this.eventBus.emit("show_message", {
          title: __("Error converting order to payment: {0}", [a.message || "Unknown error"]),
          color: "error"
        });
      } finally {
        this.converting = !1;
      }
    },
    async edit_order(e) {
      try {
        if (console.log("Loading order for editing:", e.name), !e.name || !e.restaurant_order_type) {
          this.eventBus.emit("show_message", {
            title: __("Invalid order format. Expected valid restaurant order."),
            color: "error"
          });
          return;
        }
        const t = await frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Order",
            name: e.name
          }
        });
        if (t.message) {
          if (t.message.doctype !== "Sales Order") {
            console.error("Loaded document has wrong doctype:", t.message.doctype), this.eventBus.emit("show_message", {
              title: __("Error: Loaded document is not a Sales Order. Expected Sales Order, got {0}", [t.message.doctype]),
              color: "error"
            });
            return;
          }
          console.log("Successfully loaded Sales Order:", t.message.name, "doctype:", t.message.doctype), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_order", t.message), this.close_dialog();
          const n = e.docstatus === 1 ? "editing (submitted)" : "editing";
          this.eventBus.emit("show_message", {
            title: __("Order {0} loaded for {1}", [e.name, n]),
            color: "success"
          });
        }
      } catch (t) {
        console.error("Failed to load Sales Order for editing", t), t.message && t.message.includes("not found") ? this.eventBus.emit("show_message", {
          title: __("Sales Order {0} not found. It may have been deleted or moved.", [e.name]),
          color: "error"
        }) : t.message && t.message.includes("Sales Invoice") ? this.eventBus.emit("show_message", {
          title: __("Error: Trying to load Sales Invoice instead of Sales Order. Order {0} should be a Sales Order.", [e.name]),
          color: "error"
        }) : this.eventBus.emit("show_message", {
          title: __("Error loading Sales Order: {0}", [t.message || "Unknown error"]),
          color: "error"
        });
      }
    },
    async convert_multiple_to_payment() {
      if (!this.selected.length) return;
      console.log(`Loading ${this.selected.length} draft orders for editing...`);
      const e = [];
      for (const a of this.selected) {
        if (a.docstatus !== 0) {
          this.eventBus.emit("show_message", {
            title: __("Order {0} is not in draft status. Only draft orders can be loaded for editing.", [a.name]),
            color: "error"
          });
          return;
        }
        e.push(a.name);
      }
      const t = this.selected[0]?.customer || "customer";
      if (this.selected[0]?.customer_name || this.selected[0]?.customer, !this.selected.every((a) => a.customer === t)) {
        this.eventBus.emit("show_message", {
          title: __("All selected orders must be from the same customer"),
          color: "error"
        });
        return;
      }
      this.converting = !0;
      try {
        console.log("Calling consolidation workflow with order names:", e), console.log("Selected orders data for debugging:", JSON.stringify(this.selected.map((r) => ({
          name: r.name,
          customer: r.customer,
          customer_name: r.customer_name,
          docstatus: r.docstatus
        })), null, 2));
        const a = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.submit_multiple_orders_and_create_invoice",
          args: {
            order_names: e,
            updated_order_data: {}
          }
        });
        if (console.log("Backend API response:", a), console.log("Response message properties:", a.message ? Object.keys(a.message) : "No message"), a && a.message)
          console.log("Successfully created consolidated order:", a.message.name), console.log("Loading consolidated order into POS cart for review..."), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_invoice", a.message), await this.refresh_orders(), this.close_dialog(), this.eventBus.emit("show_message", {
            title: __("✅ Consolidated order {0} loaded into cart for review. You can add/remove items, then click PAY to submit and create invoice.", [a.message.name]),
            color: "success",
            timeout: 8e3
          }), console.log(`Successfully consolidated ${e.length} draft orders into ${a.message.name} and loaded into POS cart`);
        else
          throw console.error("Backend API returned empty response"), new Error("No data returned from backend");
      } catch (a) {
        console.error("Failed to consolidate orders", a), this.eventBus.emit("show_message", {
          title: __("Error consolidating orders: {0}", [a.message || "Unknown error"]),
          color: "error"
        });
      } finally {
        this.converting = !1;
      }
    },
    async add_items_to_table(e) {
      try {
        console.log("Adding items to table for order:", e.name), this.close_dialog(), this.eventBus.emit("set_restaurant_context", {
          order_type: e.order_type_name,
          table_number: e.table_number,
          customer: e.customer,
          customer_name: e.customer_name,
          original_order: e.name,
          order_status: e.docstatus,
          // Pass the order status for API selection
          is_updating_order: !0
          // Flag to indicate we're updating existing order
        }), this.eventBus.emit("show_message", {
          title: __("Ready to add items to {0}. Select items and click 'Update Order' to add items to existing order with KOT print.", [e.table_number]),
          color: "info",
          timeout: 6e3
        });
      } catch (t) {
        console.error("Failed to prepare additional items order", t), this.eventBus.emit("show_message", {
          title: __("Error preparing additional order"),
          color: "error"
        });
      }
    },
    async cancel_order(e) {
      if (await new Promise((n) => {
        frappe.confirm(
          __("Are you sure you want to cancel order {0}?", [e.name]),
          () => n(!0),
          () => n(!1)
        );
      }))
        try {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.cancel_restaurant_order",
            args: {
              sales_order_name: e.name
            }
          });
          n.message && n.message.success && (this.eventBus.emit("show_message", {
            title: n.message.message,
            color: "success"
          }), await this.fetch_orders());
        } catch (n) {
          console.error("Failed to cancel order", n), this.eventBus.emit("show_message", {
            title: __("Error cancelling order"),
            color: "error"
          });
        }
    },
    async delete_order(e) {
      if (await new Promise((n) => {
        frappe.confirm(
          __("Are you sure you want to delete order {0}?", [e.name]),
          () => n(!0),
          () => n(!1)
        );
      }))
        try {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.delete_restaurant_order",
            args: {
              sales_order_name: e.name
            }
          });
          n.message && n.message.success && (this.eventBus.emit("show_message", {
            title: n.message.message,
            color: "success"
          }), await this.fetch_orders());
        } catch (n) {
          console.error("Failed to delete order", n), this.eventBus.emit("show_message", {
            title: __("Error deleting order"),
            color: "error"
          });
        }
    },
    formatDate(e) {
      return e ? frappe.datetime.str_to_user(e) : "";
    },
    // Void Items Methods
    canVoidItems(e) {
      return e.docstatus === 0 && e.items && e.items.length > 0;
    },
    // KOT Reprint Methods
    canReprintKot(e) {
      return e.items && e.items.length > 0;
    },
    async reprint_kot(e) {
      try {
        console.log("Reprinting KOT for order:", e.name);
        const t = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.reprint_kot",
          args: {
            order_name: e.name
          }
        });
        if (t.message) {
          const n = window.open("", "_blank");
          n.document.write(t.message), n.document.close(), n.focus(), n.print(), setTimeout(() => {
            n.close();
          }, 1e3), this.eventBus.emit("show_message", {
            title: __("KOT reprinted successfully for order {0}", [e.name]),
            color: "success"
          });
        }
      } catch (t) {
        console.error("Error reprinting KOT:", t), this.eventBus.emit("show_message", {
          title: __("Error reprinting KOT: {0}", [t.message || "Unknown error"]),
          color: "error"
        });
      }
    },
    async void_items(e) {
      console.log("Opening void items dialog for order:", e);
      try {
        const t = await frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Order",
            name: e.name
          }
        });
        t.message && (this.selectedOrderForVoid = t.message, this.selectedItemsToVoid = [], this.voidItemsData = this.prepareVoidItemsData(t.message.items || []), this.voidLoading = !1, this.voidItemsDialog = !0);
      } catch (t) {
        console.error("Error fetching order for voiding:", t), this.eventBus.emit("show_message", {
          title: __("Error fetching order details"),
          color: "error"
        });
      }
    },
    async confirmVoidItems(e, t) {
      this.voidLoading = !0;
      try {
        if (console.log("Voiding items from order:", e.name, t), !t || t.length === 0) {
          this.eventBus.emit("show_message", {
            title: __("Please select items to void"),
            color: "warning"
          });
          return;
        }
        const n = t.map((r) => ({
          idx: r.idx,
          item_code: r.item_code,
          qty: r.qty
          // This is now the void_qty from the selection
        })), a = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.void_order_items",
          args: {
            order_name: e.name,
            items_to_void: n
          }
        });
        if (a.message) {
          this.eventBus.emit("show_message", {
            title: __("Items voided successfully"),
            color: "success"
          }), a.message.print_void_kot && a.message.void_kot_data && (console.log("Void KOT data:", a.message.void_kot_data), await this.printVoidKot(a.message.void_kot_data)), this.expanded = [], this.selectedOrderForVoid = null, this.voidItemsData = [], this.voidItemsDialog = !1, await this.fetch_orders();
          const r = this.orders_data.findIndex((i) => i.name === e.name);
          if (r !== -1)
            try {
              const i = await frappe.call({
                method: "frappe.client.get",
                args: {
                  doctype: "Sales Order",
                  name: e.name
                }
              });
              i.message && (this.orders_data[r] = {
                ...this.orders_data[r],
                items: i.message.items,
                grand_total: i.message.grand_total,
                net_total: i.message.net_total
              }, this.filter_orders());
            } catch (i) {
              console.error("Error updating order in list:", i);
            }
          this.voidItemsDialog = !1, this.selectedOrderForVoid = null, this.selectedItemsToVoid = [];
        }
      } catch (n) {
        console.error("Error voiding items:", n), this.eventBus.emit("show_message", {
          title: __("Error voiding items: ") + (n.message || n),
          color: "error"
        });
      } finally {
        this.voidLoading = !1, this.selectedItemsToVoid = [], this.voidItemsData = [];
      }
    },
    // Enhanced Void Items Methods
    prepareVoidItemsData(e) {
      return e.map((t) => ({
        ...t,
        original_qty: t.qty,
        void_qty: 1,
        // Default void quantity
        selected: !1
      }));
    },
    updateVoidSelection(e) {
      e.selected ? e.void_qty = Math.min(1, e.original_qty) : e.void_qty = 1;
    },
    validateVoidQty(e) {
      e.void_qty < 1 ? e.void_qty = 1 : e.void_qty > e.original_qty && (e.void_qty = e.original_qty);
    },
    getSelectedVoidItems() {
      return this.voidItemsData.filter((e) => e.selected && e.void_qty > 0).map((e) => ({
        idx: e.idx,
        item_code: e.item_code,
        item_name: e.item_name,
        qty: e.void_qty,
        rate: e.rate,
        amount: e.void_qty * e.rate
      }));
    },
    getTotalVoidQty() {
      return this.getSelectedVoidItems().reduce((e, t) => e + t.qty, 0);
    },
    async printVoidKot(e) {
      try {
        const { printVoidKot: t } = await import("./kot_print-MHdNXsuH.js");
        t(e, { autoPrint: !0 });
      } catch (t) {
        console.error("Error printing void KOT:", t), this.eventBus.emit("show_message", {
          title: __("Error printing void KOT"),
          color: "error"
        });
      }
    }
  },
  created() {
    this.eventBus.on("open_restaurant_orders", () => {
      this.open_orders_dialog();
    });
  },
  mounted() {
    this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.pos_opening_shift = e.pos_opening_shift;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_restaurant_orders"), this.eventBus.off("register_pos_profile");
  }
}, xae = { class: "text-h4 text-primary font-weight-bold" }, Tae = {
  key: 1,
  class: "text-grey"
}, Iae = { class: "d-flex flex-wrap gap-1" }, Eae = ["colspan"], Pae = { class: "text-subtitle-2 mb-2" }, Oae = { class: "text-subtitle-2 mb-2" }, Dae = { class: "text-left" }, Bae = { class: "text-center" }, Vae = { class: "text-right" }, Mae = { class: "text-right" }, Rae = { class: "text-left" }, Lae = { class: "text-center" }, Fae = { class: "text-right" }, Nae = { class: "text-right" }, Uae = {
  key: 1,
  class: "text-grey text-center py-4"
}, $ae = { class: "text-right font-weight-medium" }, qae = { class: "text-right" }, Hae = { key: 0 }, zae = { class: "text-right font-weight-medium" }, Wae = { class: "text-right" }, jae = { key: 1 }, Kae = { class: "text-right font-weight-medium" }, Yae = { class: "text-right text-error" }, Gae = { class: "font-weight-bold" }, Qae = { class: "text-right" }, Jae = { class: "text-right text-primary" }, Xae = { class: "text-h5 text-primary" }, Zae = { class: "mt-4" };
function ere(e, t, n, a, r, i) {
  const o = Q("v-spacer"), l = Q("v-btn"), s = Q("v-card-title"), d = Q("v-select"), u = Q("v-col"), f = Q("v-text-field"), h = Q("v-icon"), g = Q("v-row"), v = Q("v-chip"), w = Q("v-list-item-title"), b = Q("v-list-item"), p = Q("v-list"), y = Q("v-table"), S = Q("v-divider"), E = Q("v-card-text"), C = Q("v-card"), D = Q("v-data-table"), P = Q("v-container"), O = Q("v-card-actions"), T = Q("v-dialog"), A = Q("v-alert"), V = Q("v-checkbox");
  return ee(), Re(g, { justify: "center" }, {
    default: x(() => [
      _(T, {
        modelValue: r.ordersDialog,
        "onUpdate:modelValue": t[8] || (t[8] = (M) => r.ordersDialog = M),
        "max-width": "1400px",
        "max-height": "90vh"
      }, {
        default: x(() => [
          _(C, { style: { height: "85vh" } }, {
            default: x(() => [
              _(s, { class: "d-flex align-center pa-4" }, {
                default: x(() => [
                  I("span", xae, q(e.__("Restaurant Orders")), 1),
                  _(o),
                  _(l, {
                    icon: "mdi-close",
                    variant: "text",
                    density: "compact",
                    size: "large",
                    onClick: i.close_dialog
                  }, null, 8, ["onClick"])
                ]),
                _: 1
              }),
              _(E, {
                class: "pa-0",
                style: { height: "calc(85vh - 80px)", "overflow-y": "auto" }
              }, {
                default: x(() => [
                  _(P, {
                    fluid: "",
                    class: "pa-4"
                  }, {
                    default: x(() => [
                      _(g, { class: "mb-4" }, {
                        default: x(() => [
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: x(() => [
                              _(d, {
                                color: "primary",
                                label: e.frappe._("Counter"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_pos_profile,
                                "onUpdate:modelValue": [
                                  t[0] || (t[0] = (M) => r.filter_pos_profile = M),
                                  i.filter_orders
                                ],
                                items: i.pos_profile_options,
                                "item-title": "display_name",
                                "item-value": "name",
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: x(() => [
                              _(d, {
                                color: "primary",
                                label: e.frappe._("Order Type"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_order_type,
                                "onUpdate:modelValue": [
                                  t[1] || (t[1] = (M) => r.filter_order_type = M),
                                  i.filter_orders
                                ],
                                items: i.order_type_options,
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: x(() => [
                              _(d, {
                                color: "primary",
                                label: e.frappe._("Status"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_status,
                                "onUpdate:modelValue": [
                                  t[2] || (t[2] = (M) => r.filter_status = M),
                                  i.filter_orders
                                ],
                                items: i.status_options,
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: x(() => [
                              _(f, {
                                color: "primary",
                                label: e.frappe._("Date"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_date,
                                "onUpdate:modelValue": [
                                  t[3] || (t[3] = (M) => r.filter_date = M),
                                  i.filter_orders
                                ],
                                type: "date",
                                density: "compact",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "3"
                          }, {
                            default: x(() => [
                              _(f, {
                                color: "primary",
                                label: e.frappe._("Search Order/Customer"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.search_text,
                                "onUpdate:modelValue": t[4] || (t[4] = (M) => r.search_text = M),
                                density: "compact",
                                clearable: "",
                                class: "mx-2",
                                "prepend-inner-icon": "mdi-magnify",
                                onInput: i.filter_orders
                              }, null, 8, ["label", "bg-color", "modelValue", "onInput"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "1"
                          }, {
                            default: x(() => [
                              _(l, {
                                variant: "text",
                                color: "primary",
                                theme: "dark",
                                onClick: i.refresh_orders,
                                class: "mx-2",
                                loading: r.loading
                              }, {
                                default: x(() => [
                                  _(h, null, {
                                    default: x(() => t[13] || (t[13] = [
                                      ae("mdi-refresh")
                                    ])),
                                    _: 1,
                                    __: [13]
                                  }),
                                  ae(" " + q(e.__("Refresh")), 1)
                                ]),
                                _: 1
                              }, 8, ["onClick", "loading"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }),
                      _(g, { "no-gutters": "" }, {
                        default: x(() => [
                          _(u, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              _(D, {
                                headers: r.headers,
                                items: r.filtered_orders,
                                "item-key": "name",
                                class: "elevation-1",
                                "show-select": "",
                                modelValue: r.selected,
                                "onUpdate:modelValue": t[5] || (t[5] = (M) => r.selected = M),
                                "return-object": "",
                                "select-strategy": r.multiSelectMode ? "page" : "single",
                                loading: r.loading,
                                density: "compact",
                                "show-expand": "",
                                expanded: r.expanded,
                                "onUpdate:expanded": t[6] || (t[6] = (M) => r.expanded = M)
                              }, {
                                "item.transaction_date": x(({ item: M }) => [
                                  ae(q(i.formatDate(M.transaction_date)), 1)
                                ]),
                                "item.grand_total": x(({ item: M }) => [
                                  ae(q(e.currencySymbol(M.currency)) + " " + q(e.formatCurrency(M.grand_total)), 1)
                                ]),
                                "item.order_status": x(({ item: M }) => [
                                  _(v, {
                                    color: i.getStatusColor(M),
                                    size: "small",
                                    variant: "flat"
                                  }, {
                                    default: x(() => [
                                      _(h, {
                                        start: "",
                                        size: "small"
                                      }, {
                                        default: x(() => [
                                          ae(q(i.getStatusIcon(M)), 1)
                                        ]),
                                        _: 2
                                      }, 1024),
                                      ae(" " + q(i.getOrderStatus(M)), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["color"])
                                ]),
                                "item.table_number": x(({ item: M }) => [
                                  M.table_number ? (ee(), Re(v, {
                                    key: 0,
                                    color: "info",
                                    size: "small",
                                    variant: "outlined"
                                  }, {
                                    default: x(() => [
                                      _(h, {
                                        start: "",
                                        size: "small"
                                      }, {
                                        default: x(() => t[14] || (t[14] = [
                                          ae("mdi-table-furniture")
                                        ])),
                                        _: 1,
                                        __: [14]
                                      }),
                                      ae(" " + q(M.table_number), 1)
                                    ]),
                                    _: 2
                                  }, 1024)) : (ee(), Oe("span", Tae, "-"))
                                ]),
                                "item.order_type_name": x(({ item: M }) => [
                                  _(v, {
                                    color: i.getOrderTypeColor(M.order_type_name),
                                    size: "small",
                                    variant: "tonal"
                                  }, {
                                    default: x(() => [
                                      ae(q(M.order_type_name || "N/A"), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["color"])
                                ]),
                                "item.actions": x(({ item: M }) => [
                                  I("div", Iae, [
                                    i.canEdit(M) ? (ee(), Re(l, {
                                      key: 0,
                                      size: "default",
                                      color: "primary",
                                      variant: "flat",
                                      onClick: (B) => i.edit_order(M),
                                      class: "ma-1 text-caption",
                                      "min-width": "90"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: x(() => t[15] || (t[15] = [
                                            ae("mdi-pencil")
                                          ])),
                                          _: 1,
                                          __: [15]
                                        }),
                                        ae(" " + q(e.__("Edit")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ye("", !0),
                                    i.canAddItems(M) ? (ee(), Re(l, {
                                      key: 1,
                                      size: "default",
                                      color: "success",
                                      variant: "flat",
                                      onClick: (B) => i.add_items_to_table(M),
                                      class: "ma-1 text-caption",
                                      "min-width": "110"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: x(() => t[16] || (t[16] = [
                                            ae("mdi-plus-circle")
                                          ])),
                                          _: 1,
                                          __: [16]
                                        }),
                                        ae(" " + q(e.__("Add Items")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ye("", !0),
                                    i.canReprintKot(M) ? (ee(), Re(l, {
                                      key: 2,
                                      size: "default",
                                      color: "info",
                                      variant: "flat",
                                      onClick: (B) => i.reprint_kot(M),
                                      class: "ma-1 text-caption",
                                      "min-width": "100"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: x(() => t[17] || (t[17] = [
                                            ae("mdi-printer")
                                          ])),
                                          _: 1,
                                          __: [17]
                                        }),
                                        ae(" " + q(e.__("Reprint KOT")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ye("", !0),
                                    i.canVoidItems(M) ? (ee(), Re(l, {
                                      key: 3,
                                      size: "default",
                                      color: "orange",
                                      variant: "flat",
                                      onClick: (B) => i.void_items(M),
                                      class: "ma-1 text-caption",
                                      "min-width": "100"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: x(() => t[18] || (t[18] = [
                                            ae("mdi-close-circle")
                                          ])),
                                          _: 1,
                                          __: [18]
                                        }),
                                        ae(" " + q(e.__("Void Items")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ye("", !0),
                                    i.canDelete(M) ? (ee(), Re(l, {
                                      key: 4,
                                      size: "default",
                                      color: "error",
                                      variant: "flat",
                                      onClick: (B) => i.delete_order(M),
                                      class: "ma-1 text-caption",
                                      "min-width": "80"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: x(() => t[19] || (t[19] = [
                                            ae("mdi-delete")
                                          ])),
                                          _: 1,
                                          __: [19]
                                        }),
                                        ae(" " + q(e.__("Delete")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : i.canCancel(M) ? (ee(), Re(l, {
                                      key: 5,
                                      size: "default",
                                      color: "error",
                                      variant: "flat",
                                      onClick: (B) => i.cancel_order(M),
                                      class: "ma-1 text-caption",
                                      "min-width": "80"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: x(() => t[20] || (t[20] = [
                                            ae("mdi-cancel")
                                          ])),
                                          _: 1,
                                          __: [20]
                                        }),
                                        ae(" " + q(e.__("Cancel")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ye("", !0)
                                  ])
                                ]),
                                "expanded-row": x(({ item: M }) => [
                                  I("td", {
                                    colspan: r.headers.length + 2
                                  }, [
                                    _(C, {
                                      flat: "",
                                      class: "ma-2"
                                    }, {
                                      default: x(() => [
                                        _(s, { class: "text-h6 text-primary" }, {
                                          default: x(() => [
                                            _(h, { class: "mr-2" }, {
                                              default: x(() => t[21] || (t[21] = [
                                                ae("mdi-receipt")
                                              ])),
                                              _: 1,
                                              __: [21]
                                            }),
                                            ae(" " + q(e.__("Order Details: {0}", [M.name])), 1)
                                          ]),
                                          _: 2
                                        }, 1024),
                                        _(E, null, {
                                          default: x(() => [
                                            _(g, null, {
                                              default: x(() => [
                                                _(u, {
                                                  cols: "12",
                                                  md: "6"
                                                }, {
                                                  default: x(() => [
                                                    I("div", Pae, q(e.__("Order Information")), 1),
                                                    _(p, { density: "compact" }, {
                                                      default: x(() => [
                                                        _(b, null, {
                                                          prepend: x(() => [
                                                            _(h, null, {
                                                              default: x(() => t[22] || (t[22] = [
                                                                ae("mdi-calendar")
                                                              ])),
                                                              _: 1,
                                                              __: [22]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            _(w, null, {
                                                              default: x(() => [
                                                                ae(q(e.__("Date")) + ": " + q(i.formatDate(M.transaction_date)), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024),
                                                        _(b, null, {
                                                          prepend: x(() => [
                                                            _(h, null, {
                                                              default: x(() => t[23] || (t[23] = [
                                                                ae("mdi-account")
                                                              ])),
                                                              _: 1,
                                                              __: [23]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            _(w, null, {
                                                              default: x(() => [
                                                                ae(q(e.__("Customer")) + ": " + q(M.customer), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024),
                                                        M.table_number ? (ee(), Re(b, { key: 0 }, {
                                                          prepend: x(() => [
                                                            _(h, null, {
                                                              default: x(() => t[24] || (t[24] = [
                                                                ae("mdi-table-furniture")
                                                              ])),
                                                              _: 1,
                                                              __: [24]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            _(w, null, {
                                                              default: x(() => [
                                                                ae(q(e.__("Table")) + ": " + q(M.table_number), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024)) : ye("", !0),
                                                        _(b, null, {
                                                          prepend: x(() => [
                                                            _(h, null, {
                                                              default: x(() => t[25] || (t[25] = [
                                                                ae("mdi-food")
                                                              ])),
                                                              _: 1,
                                                              __: [25]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            _(w, null, {
                                                              default: x(() => [
                                                                ae(q(e.__("Order Type")) + ": " + q(M.order_type_name || "N/A"), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024)
                                                      ]),
                                                      _: 2
                                                    }, 1024)
                                                  ]),
                                                  _: 2
                                                }, 1024),
                                                _(u, {
                                                  cols: "12",
                                                  md: "6"
                                                }, {
                                                  default: x(() => [
                                                    I("div", Oae, q(e.__("Items")), 1),
                                                    M.items && M.items.length ? (ee(), Re(y, {
                                                      key: 0,
                                                      density: "compact"
                                                    }, {
                                                      default: x(() => [
                                                        I("thead", null, [
                                                          I("tr", null, [
                                                            I("th", Dae, q(e.__("Item")), 1),
                                                            I("th", Bae, q(e.__("Qty")), 1),
                                                            I("th", Vae, q(e.__("Rate")), 1),
                                                            I("th", Mae, q(e.__("Amount")), 1)
                                                          ])
                                                        ]),
                                                        I("tbody", null, [
                                                          (ee(!0), Oe(Qe, null, rn(M.items, (B) => (ee(), Oe("tr", {
                                                            key: B.name
                                                          }, [
                                                            I("td", Rae, q(B.item_name || B.item_code), 1),
                                                            I("td", Lae, q(B.qty) + " " + q(B.uom || ""), 1),
                                                            I("td", Fae, q(e.currencySymbol(M.currency)) + q(e.formatCurrency(B.rate)), 1),
                                                            I("td", Nae, q(e.currencySymbol(M.currency)) + q(e.formatCurrency(B.amount)), 1)
                                                          ]))), 128))
                                                        ])
                                                      ]),
                                                      _: 2
                                                    }, 1024)) : (ee(), Oe("div", Uae, q(e.__("No items available")), 1))
                                                  ]),
                                                  _: 2
                                                }, 1024)
                                              ]),
                                              _: 2
                                            }, 1024),
                                            _(S, { class: "my-3" }),
                                            _(g, null, {
                                              default: x(() => [
                                                _(u, {
                                                  cols: "12",
                                                  md: "8"
                                                }),
                                                _(u, {
                                                  cols: "12",
                                                  md: "4"
                                                }, {
                                                  default: x(() => [
                                                    _(y, { density: "compact" }, {
                                                      default: x(() => [
                                                        I("tbody", null, [
                                                          I("tr", null, [
                                                            I("td", $ae, q(e.__("Subtotal")) + ":", 1),
                                                            I("td", qae, q(e.currencySymbol(M.currency)) + q(e.formatCurrency(M.net_total || 0)), 1)
                                                          ]),
                                                          M.total_taxes_and_charges ? (ee(), Oe("tr", Hae, [
                                                            I("td", zae, q(e.__("Tax")) + ":", 1),
                                                            I("td", Wae, q(e.currencySymbol(M.currency)) + q(e.formatCurrency(M.total_taxes_and_charges)), 1)
                                                          ])) : ye("", !0),
                                                          M.discount_amount ? (ee(), Oe("tr", jae, [
                                                            I("td", Kae, q(e.__("Discount")) + ":", 1),
                                                            I("td", Yae, "-" + q(e.currencySymbol(M.currency)) + q(e.formatCurrency(M.discount_amount)), 1)
                                                          ])) : ye("", !0),
                                                          I("tr", Gae, [
                                                            I("td", Qae, q(e.__("Total")) + ":", 1),
                                                            I("td", Jae, q(e.currencySymbol(M.currency)) + q(e.formatCurrency(M.grand_total)), 1)
                                                          ])
                                                        ])
                                                      ]),
                                                      _: 2
                                                    }, 1024)
                                                  ]),
                                                  _: 2
                                                }, 1024)
                                              ]),
                                              _: 2
                                            }, 1024)
                                          ]),
                                          _: 2
                                        }, 1024)
                                      ]),
                                      _: 2
                                    }, 1024)
                                  ], 8, Eae)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue", "select-strategy", "loading", "expanded"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(O, null, {
                default: x(() => [
                  _(l, {
                    color: "secondary",
                    variant: "outlined",
                    onClick: i.toggleMultiSelect,
                    class: "mr-2"
                  }, {
                    default: x(() => [
                      _(h, { start: "" }, {
                        default: x(() => [
                          ae(q(r.multiSelectMode ? "mdi-checkbox-multiple-marked" : "mdi-checkbox-multiple-blank"), 1)
                        ]),
                        _: 1
                      }),
                      ae(" " + q(r.multiSelectMode ? e.__("Single Select") : e.__("Multi Select")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(o),
                  _(l, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  r.selected.length === 1 && i.canConvertToPayment(r.selected[0]) ? (ee(), Re(l, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.convert_to_payment,
                    loading: r.converting
                  }, {
                    default: x(() => [
                      ae(q(e.__("Convert to Payment")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick", "loading"])) : ye("", !0),
                  r.selected.length > 1 && i.canConvertMultipleToInvoice() ? (ee(), Re(l, {
                    key: 1,
                    color: "primary",
                    theme: "dark",
                    onClick: i.convert_multiple_to_payment,
                    loading: r.converting
                  }, {
                    default: x(() => [
                      ae(q(e.__("Convert to Payment ({0} Orders)", [r.selected.length])), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick", "loading"])) : ye("", !0),
                  r.selected.length === 1 && i.canEdit(r.selected[0]) ? (ee(), Re(l, {
                    key: 2,
                    color: "warning",
                    theme: "dark",
                    onClick: t[7] || (t[7] = (M) => i.edit_order(r.selected[0])),
                    loading: r.converting,
                    class: "mr-2"
                  }, {
                    default: x(() => [
                      ae(q(e.__("Edit Order")), 1)
                    ]),
                    _: 1
                  }, 8, ["loading"])) : ye("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"]),
      _(T, {
        modelValue: r.voidItemsDialog,
        "onUpdate:modelValue": t[12] || (t[12] = (M) => r.voidItemsDialog = M),
        "max-width": "600px"
      }, {
        default: x(() => [
          _(C, null, {
            default: x(() => [
              _(s, { class: "d-flex align-center" }, {
                default: x(() => [
                  I("span", Xae, q(e.__("Void Items")), 1),
                  _(o),
                  _(l, {
                    icon: "mdi-close",
                    variant: "text",
                    density: "compact",
                    onClick: t[9] || (t[9] = (M) => r.voidItemsDialog = !1)
                  })
                ]),
                _: 1
              }),
              r.selectedOrderForVoid ? (ee(), Re(E, { key: 0 }, {
                default: x(() => [
                  _(A, {
                    type: "warning",
                    variant: "tonal",
                    class: "mb-4"
                  }, {
                    default: x(() => [
                      _(h, { start: "" }, {
                        default: x(() => t[26] || (t[26] = [
                          ae("mdi-alert-triangle")
                        ])),
                        _: 1,
                        __: [26]
                      }),
                      ae(" " + q(e.__("Select items and specify quantities to void from order {0}. Voided items will generate a KOT for kitchen notification.", [r.selectedOrderForVoid.name])), 1)
                    ]),
                    _: 1
                  }),
                  _(D, {
                    headers: [
                      { title: e.__("Select"), key: "select", align: "center", sortable: !1, width: "80px" },
                      { title: e.__("Item"), key: "item_name", sortable: !1 },
                      { title: e.__("Available Qty"), key: "qty", align: "center", sortable: !1, width: "120px" },
                      { title: e.__("Void Qty"), key: "void_qty", align: "center", sortable: !1, width: "120px" },
                      { title: e.__("Rate"), key: "rate", align: "end", sortable: !1, width: "100px" },
                      { title: e.__("Amount"), key: "amount", align: "end", sortable: !1, width: "100px" }
                    ],
                    items: r.voidItemsData,
                    density: "compact",
                    class: "elevation-1",
                    "hide-default-footer": ""
                  }, {
                    "item.select": x(({ item: M }) => [
                      _(V, {
                        modelValue: M.selected,
                        "onUpdate:modelValue": (B) => M.selected = B,
                        "hide-details": "",
                        density: "compact",
                        onChange: (B) => i.updateVoidSelection(M)
                      }, null, 8, ["modelValue", "onUpdate:modelValue", "onChange"])
                    ]),
                    "item.void_qty": x(({ item: M }) => [
                      _(f, {
                        modelValue: M.void_qty,
                        "onUpdate:modelValue": (B) => M.void_qty = B,
                        modelModifiers: { number: !0 },
                        type: "number",
                        min: 1,
                        max: M.original_qty,
                        density: "compact",
                        "hide-details": "",
                        style: { width: "80px" },
                        disabled: !M.selected,
                        onInput: (B) => i.validateVoidQty(M)
                      }, null, 8, ["modelValue", "onUpdate:modelValue", "max", "disabled", "onInput"])
                    ]),
                    "item.rate": x(({ item: M }) => [
                      ae(q(e.currencySymbol(r.selectedOrderForVoid.currency)) + q(e.formatCurrency(M.rate)), 1)
                    ]),
                    "item.amount": x(({ item: M }) => [
                      ae(q(e.currencySymbol(r.selectedOrderForVoid.currency)) + q(e.formatCurrency(M.amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items"]),
                  I("div", Zae, [
                    i.getSelectedVoidItems().length === 0 ? (ee(), Re(A, {
                      key: 0,
                      type: "info",
                      variant: "tonal"
                    }, {
                      default: x(() => [
                        ae(q(e.__("Please select items and specify quantities to void")), 1)
                      ]),
                      _: 1
                    })) : (ee(), Re(A, {
                      key: 1,
                      type: "success",
                      variant: "tonal"
                    }, {
                      default: x(() => [
                        ae(q(e.__("Selected {0} item(s) for voiding with total quantity: {1}", [i.getSelectedVoidItems().length, i.getTotalVoidQty()])), 1)
                      ]),
                      _: 1
                    }))
                  ])
                ]),
                _: 1
              })) : ye("", !0),
              _(O, null, {
                default: x(() => [
                  _(o),
                  _(l, {
                    color: "error",
                    onClick: t[10] || (t[10] = (M) => r.voidItemsDialog = !1)
                  }, {
                    default: x(() => [
                      ae(q(e.__("Cancel")), 1)
                    ]),
                    _: 1
                  }),
                  _(l, {
                    color: "warning",
                    loading: r.voidLoading,
                    disabled: i.getSelectedVoidItems().length === 0,
                    onClick: t[11] || (t[11] = (M) => i.confirmVoidItems(r.selectedOrderForVoid, i.getSelectedVoidItems()))
                  }, {
                    default: x(() => [
                      ae(q(e.__("Void Selected Items")), 1)
                    ]),
                    _: 1
                  }, 8, ["loading", "disabled"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const tre = /* @__PURE__ */ nn(Aae, [["render", ere], ["__scopeId", "data-v-207401dc"]]), nre = {
  mixins: [Oi],
  data: () => ({
    closingDialog: !1,
    itemsPerPage: 20,
    dialog_data: {},
    pos_profile: "",
    headers: [
      {
        title: __("Mode of Payment"),
        value: "mode_of_payment",
        align: "start",
        sortable: !0
      },
      {
        title: __("Opening Amount"),
        align: "end",
        sortable: !0,
        value: "opening_amount"
      },
      {
        title: __("Closing Amount"),
        value: "closing_amount",
        align: "end",
        sortable: !0
      }
    ],
    max25chars: (e) => e.length <= 20 || "Input too long!",
    // TODO : should validate as number
    pagination: {}
  }),
  watch: {},
  methods: {
    close_dialog() {
      this.closingDialog = !1;
    },
    submit_dialog() {
      if ((this.dialog_data.payments || []).some(
        (t) => isNaN(parseFloat(t.closing_amount))
      )) {
        alert(this.__("Invalid closing amount"));
        return;
      }
      this.eventBus.emit("submit_closing_pos", this.dialog_data), this.closingDialog = !1;
    }
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  created: function() {
    this.eventBus.on("open_ClosingDialog", (e) => {
      this.closingDialog = !0, this.dialog_data = e;
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.pos_profile.hide_expected_amount || (this.headers.push({
        title: __("Expected Amount"),
        value: "expected_amount",
        align: "end",
        sortable: !1
      }), this.headers.push({
        title: __("Difference"),
        value: "difference",
        align: "end",
        sortable: !1
      }));
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_ClosingDialog"), this.eventBus.off("register_pos_profile");
  }
}, are = { class: "header-content" }, rre = { class: "header-icon-wrapper" }, ire = { class: "header-text" }, ore = { class: "header-title" }, sre = { class: "header-subtitle" }, lre = { class: "table-header mb-4" }, cre = { class: "text-h6 text-grey-darken-2 mb-1" }, ure = { class: "text-body-2 text-grey" };
function dre(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-card-title"), s = Q("v-divider"), d = Q("v-text-field"), u = Q("v-data-table"), f = Q("v-col"), h = Q("v-row"), g = Q("v-container"), v = Q("v-card-text"), w = Q("v-btn"), b = Q("v-spacer"), p = Q("v-card-actions"), y = Q("v-card"), S = Q("v-dialog");
  return ee(), Re(h, { justify: "center" }, {
    default: x(() => [
      _(S, {
        modelValue: e.closingDialog,
        "onUpdate:modelValue": t[0] || (t[0] = (E) => e.closingDialog = E),
        "max-width": "900px",
        persistent: ""
      }, {
        default: x(() => [
          _(y, {
            elevation: "8",
            class: "closing-dialog-card"
          }, {
            default: x(() => [
              _(l, { class: "closing-header pa-6" }, {
                default: x(() => [
                  I("div", are, [
                    I("div", rre, [
                      _(o, {
                        class: "header-icon",
                        size: "40"
                      }, {
                        default: x(() => t[1] || (t[1] = [
                          ae("mdi-store-clock-outline")
                        ])),
                        _: 1,
                        __: [1]
                      })
                    ]),
                    I("div", ire, [
                      I("h3", ore, q(e.__("Closing POS Shift")), 1),
                      I("p", sre, q(e.__("Reconcile payment methods and close shift")), 1)
                    ])
                  ])
                ]),
                _: 1
              }),
              _(s, { class: "header-divider" }),
              _(v, { class: "pa-0 white-background" }, {
                default: x(() => [
                  _(g, { class: "pa-6" }, {
                    default: x(() => [
                      _(h, null, {
                        default: x(() => [
                          _(f, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              I("div", lre, [
                                I("h4", cre, q(e.__("Payment Reconciliation")), 1),
                                I("p", ure, q(e.__("Verify closing amounts for each payment method")), 1)
                              ]),
                              _(u, {
                                headers: e.headers,
                                items: e.dialog_data.payment_reconciliation,
                                "item-key": "mode_of_payment",
                                class: "elevation-0 rounded-lg white-table",
                                "items-per-page": e.itemsPerPage,
                                "hide-default-footer": "",
                                density: "compact"
                              }, {
                                "item.closing_amount": x((E) => [
                                  _(d, {
                                    modelValue: E.item.closing_amount,
                                    "onUpdate:modelValue": (C) => E.item.closing_amount = C,
                                    rules: [e.max25chars],
                                    label: e.frappe._("Edit"),
                                    "single-line": "",
                                    counter: "",
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                    class: "dark-field",
                                    "hide-details": "",
                                    prefix: e.currencySymbol(e.pos_profile.currency)
                                  }, null, 8, ["modelValue", "onUpdate:modelValue", "rules", "label", "bg-color", "prefix"])
                                ]),
                                "item.difference": x(({ item: E }) => [
                                  ae(q(e.currencySymbol(e.pos_profile.currency)) + " " + q(E.difference = e.formatCurrency(
                                    E.expected_amount - E.closing_amount
                                  )), 1)
                                ]),
                                "item.opening_amount": x(({ item: E }) => [
                                  ae(q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(E.opening_amount)), 1)
                                ]),
                                "item.expected_amount": x(({ item: E }) => [
                                  ae(q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(E.expected_amount)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "items-per-page"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(s),
              _(p, { class: "dialog-actions-container" }, {
                default: x(() => [
                  _(w, {
                    theme: "dark",
                    onClick: i.submit_dialog,
                    class: "pos-action-btn submit-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      _(o, { start: "" }, {
                        default: x(() => t[2] || (t[2] = [
                          ae("mdi-check-circle-outline")
                        ])),
                        _: 1,
                        __: [2]
                      }),
                      I("span", null, q(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(b),
                  _(w, {
                    theme: "dark",
                    onClick: i.close_dialog,
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      _(o, { start: "" }, {
                        default: x(() => t[3] || (t[3] = [
                          ae("mdi-close-circle-outline")
                        ])),
                        _: 1,
                        __: [3]
                      }),
                      I("span", null, q(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const fre = /* @__PURE__ */ nn(nre, [["render", dre], ["__scopeId", "data-v-6e72da1a"]]), mre = {
  data: () => ({
    addressDialog: !1,
    address: {},
    customer: ""
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  methods: {
    close_dialog() {
      this.addressDialog = !1;
    },
    submit_dialog() {
      var e = this;
      this.address.customer = this.customer, this.address.doctype = "Customer", frappe.call({
        method: "posawesome.posawesome.api.customers.make_address",
        args: {
          args: this.address
        },
        callback: (t) => {
          t.exc || (e.eventBus.emit("add_the_new_address", t.message), e.eventBus.emit("show_message", {
            text: "Customer Address created successfully.",
            color: "success"
          }), e.addressDialog = !1, e.customer = "", e.address = {});
        }
      });
    }
  },
  created: function() {
    this.eventBus.on("open_new_address", (e) => {
      this.addressDialog = !0, this.customer = e;
    });
  }
}, hre = { class: "text-h5 text-primary" };
function _re(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-text-field"), s = Q("v-col"), d = Q("v-row"), u = Q("v-container"), f = Q("v-card-text"), h = Q("v-spacer"), g = Q("v-btn"), v = Q("v-card-actions"), w = Q("v-card"), b = Q("v-dialog");
  return ee(), Re(d, { justify: "center" }, {
    default: x(() => [
      _(b, {
        modelValue: e.addressDialog,
        "onUpdate:modelValue": t[5] || (t[5] = (p) => e.addressDialog = p),
        "max-width": "600px"
      }, {
        default: x(() => [
          _(w, null, {
            default: x(() => [
              _(o, null, {
                default: x(() => [
                  I("span", hre, q(e.__("Add New Address")), 1)
                ]),
                _: 1
              }),
              _(f, { class: "pa-0" }, {
                default: x(() => [
                  _(u, null, {
                    default: x(() => [
                      _(d, null, {
                        default: x(() => [
                          _(s, { cols: "12" }, {
                            default: x(() => [
                              _(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Name"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.name,
                                "onUpdate:modelValue": t[0] || (t[0] = (p) => e.address.name = p)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "12" }, {
                            default: x(() => [
                              _(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Line 1"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.address_line1,
                                "onUpdate:modelValue": t[1] || (t[1] = (p) => e.address.address_line1 = p)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "12" }, {
                            default: x(() => [
                              _(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Line 2"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.address_line2,
                                "onUpdate:modelValue": t[2] || (t[2] = (p) => e.address.address_line2 = p)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "6" }, {
                            default: x(() => [
                              _(l, {
                                label: "City",
                                density: "compact",
                                color: "primary",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.city,
                                "onUpdate:modelValue": t[3] || (t[3] = (p) => e.address.city = p)
                              }, null, 8, ["bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "6" }, {
                            default: x(() => [
                              _(l, {
                                label: "State",
                                density: "compact",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.state,
                                "onUpdate:modelValue": t[4] || (t[4] = (p) => e.address.state = p)
                              }, null, 8, ["bg-color", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(v, null, {
                default: x(() => [
                  _(h),
                  _(g, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(g, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const pre = /* @__PURE__ */ nn(mre, [["render", _re], ["__scopeId", "data-v-b00b18cc"]]), vre = {
  data: () => ({
    varaintsDialog: !1,
    parentItem: null,
    items: null,
    filters: {},
    filterdItems: [],
    pos_profile: null,
    attributes_meta: {},
    displayCount: 100,
    placeholderImage: BD
  }),
  computed: {
    variantsItems() {
      return !this.parentItem || !Array.isArray(this.items) ? [] : this.items.filter((e) => e.variant_of == this.parentItem.item_code);
    },
    displayItems() {
      return this.filterdItems.slice(0, this.displayCount);
    }
  },
  watch: {
    items: {
      handler() {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      },
      deep: !0
    },
    parentItem() {
      this.filterdItems = this.variantsItems, this.displayCount = 100;
    },
    attributes_meta: {
      handler(e) {
        this.parentItem && e && Object.keys(e).length ? this.parentItem.attributes = Object.keys(e).map((t) => ({
          attribute: t,
          values: e[t].map((n) => ({ attribute_value: n, abbr: n }))
        })) : this.parentItem && (this.parentItem.attributes = []), this.$nextTick(() => {
          this.filterdItems = this.variantsItems, this.displayCount = 100;
        });
      },
      deep: !0
    },
    filters: {
      handler() {
        this.updateFiltredItems();
      },
      deep: !0
    }
  },
  methods: {
    close_dialog() {
      this.varaintsDialog = !1;
    },
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, 2);
    },
    formatCurrencySafe(e) {
      const t = this.$options.mixins && this.$options.mixins[0] && this.$options.mixins[0].methods && this.$options.mixins[0].methods.formatCurrency;
      return t ? t.call(this, e, 2) : new Intl.NumberFormat("en-PK", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 2
      }).format(e);
    },
    applyCurrencyConversionToItem(e) {
      e && (e.original_rate || (e.original_rate = e.price_list_rate || e.rate, e.original_currency = e.currency || this.pos_profile && this.pos_profile.currency), e.base_price_list_rate = e.price_list_rate || e.original_rate, e.base_rate = e.base_rate || e.base_price_list_rate, e.rate = e.price_list_rate || e.rate, e.currency = e.currency || this.pos_profile && this.pos_profile.currency, console.log("after currency conversion", {
        code: e.item_code,
        rate: e.rate,
        currency: e.currency
      }));
    },
    async fetchVariants(e, t) {
      console.log("fetchVariants called with", e, t);
      try {
        const n = await frappe.call({
          method: "posawesome.posawesome.api.items.get_item_variants",
          args: {
            pos_profile: JSON.stringify(t || this.pos_profile || {}),
            parent_item_code: e
          }
        });
        if (console.log("variants API result", n), n.message) {
          const a = n.message.variants || n.message;
          this.attributes_meta = n.message.attributes_meta || this.attributes_meta;
          const r = new Set((this.items || []).map((o) => o.item_code)), i = a.filter((o) => !r.has(o.item_code));
          console.log("new variant items", i), await Promise.all(i.map((o) => this.fetchVariantRate(o))), this.items = (this.items || []).concat(i);
        }
      } catch (n) {
        console.error("Failed to fetch variants", n);
      }
    },
    updateFiltredItems: Ni.debounce(function() {
      this.$nextTick(() => {
        const e = [];
        if (Object.entries(this.filters).forEach(([, t]) => {
          t && e.push(t);
        }), !e.length)
          this.filterdItems = this.variantsItems;
        else {
          const t = [];
          this.filterdItems = [], this.variantsItems.forEach((n) => {
            let a = !0, r = [];
            if (Array.isArray(n.item_attributes))
              r = n.item_attributes;
            else if (typeof n.item_attributes == "string" && n.item_attributes.trim().startsWith("["))
              try {
                r = JSON.parse(n.item_attributes);
              } catch {
                r = [];
              }
            for (const [i, o] of Object.entries(this.filters)) {
              if (!o) continue;
              if (!r.find(
                (s) => s.attribute === i && String(s.attribute_value) === String(o)
              )) {
                a = !1;
                break;
              }
            }
            a && !t.includes(n.item_code) && (this.filterdItems.push(n), t.push(n.item_code));
          });
        }
        console.log(
          "filtered items",
          this.filterdItems.map((t) => t.item_code)
        ), this.displayCount = 100;
      });
    }, 200),
    clearFilter(e) {
      this.filters[e] = null, this.$nextTick(() => {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      });
    },
    loadMore() {
      this.displayCount < this.filterdItems.length && (this.displayCount += 100);
    },
    async fetchVariantRate(e) {
      if (this.pos_profile || (this.pos_profile = await Gb()), !this.pos_profile.warehouse)
        try {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.utils.get_default_warehouse",
            args: { company: this.pos_profile.company }
          });
          t.message && (this.pos_profile.warehouse = t.message);
        } catch (t) {
          console.error("Failed to fetch default warehouse", t);
        }
      console.log("fetchVariantRate called for", e.item_code);
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.items.get_item_detail",
          args: {
            warehouse: e.warehouse || this.pos_profile.warehouse,
            price_list: this.pos_profile.selling_price_list,
            company: this.pos_profile.company,
            item: JSON.stringify({
              item_code: e.item_code,
              pos_profile: this.pos_profile.name,
              qty: e.qty || 1,
              uom: e.uom || e.stock_uom,
              doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
            })
          }
        });
        if (console.log("variant rate result", t), t.message) {
          const n = t.message;
          e.rate = n.price_list_rate, e.price_list_rate = n.price_list_rate, e.base_rate = n.price_list_rate, e.base_price_list_rate = n.price_list_rate, e.currency = n.currency || n.price_list_currency || this.pos_profile.currency, this.applyCurrencyConversionToItem(e), console.log("rate applied", {
            code: e.item_code,
            rate: e.rate
          });
        }
      } catch (t) {
        console.error("Failed to fetch variant rate", t);
      }
    },
    async add_item(e) {
      console.log("add_item called", e.item_code), await this.fetchVariantRate(e);
      const t = { ...e, code: e.item_code };
      console.log("emitting add_item", {
        code: t.code,
        rate: t.rate
      }), this.eventBus.emit("add_item", t), this.close_dialog();
    }
  },
  created: function() {
    this.eventBus.on("open_variants_model", async (e, t, n, a) => {
      if (console.log("open_variants_model", { item: e, items: t, profile: n, attrsMeta: a }), this.varaintsDialog = !0, this.parentItem = e || null, this.items = Array.isArray(t) ? t : [], this.filters = {}, this.attributes_meta = a || this.attributes_meta, !this.parentItem.attributes && this.attributes_meta && Object.keys(this.attributes_meta).length && (this.parentItem.attributes = Object.keys(this.attributes_meta).map((r) => ({
        attribute: r,
        values: this.attributes_meta[r].map((i) => ({ attribute_value: i, abbr: i }))
      }))), n ? this.pos_profile = n : this.pos_profile = await Gb(), !this.items || this.items.length === 0) {
        const r = e.item_code || e.code || e.name;
        await this.fetchVariants(r, this.pos_profile);
      }
      this.$nextTick(() => {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      });
    });
  },
  beforeUnmount() {
    console.log("variants dialog destroyed"), this.eventBus.off("open_variants_model");
  }
}, gre = { class: "text-caption text-primary text-accent-3" };
function yre(e, t, n, a, r, i) {
  const o = Q("v-spacer"), l = Q("v-btn"), s = Q("v-card-title"), d = Q("v-chip"), u = Q("v-chip-group"), f = Q("v-divider"), h = Q("v-card-text"), g = Q("v-img"), v = Q("v-card"), w = Q("v-col"), b = Q("v-row"), p = Q("v-container"), y = Q("v-dialog"), S = FF("intersect");
  return ee(), Re(b, { justify: "center" }, {
    default: x(() => [
      _(y, {
        modelValue: e.varaintsDialog,
        "onUpdate:modelValue": t[0] || (t[0] = (E) => e.varaintsDialog = E),
        "max-width": "600px"
      }, {
        default: x(() => [
          _(v, { "min-height": "500px" }, {
            default: x(() => [
              _(s, null, {
                default: x(() => [
                  t[2] || (t[2] = I("span", { class: "text-h5 text-primary" }, "Select Item", -1)),
                  _(o),
                  _(l, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[1] || (t[1] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [1]
                  }, 8, ["onClick"])
                ]),
                _: 1,
                __: [2]
              }),
              _(h, { class: "pa-0" }, {
                default: x(() => [
                  e.parentItem ? (ee(), Re(p, { key: 0 }, {
                    default: x(() => [
                      (ee(!0), Oe(Qe, null, rn(e.parentItem.attributes, (E) => (ee(), Oe("div", {
                        key: E.attribute
                      }, [
                        _(u, {
                          modelValue: e.filters[E.attribute],
                          "onUpdate:modelValue": [(C) => e.filters[E.attribute] = C, i.updateFiltredItems],
                          "selected-class": "green--text text--accent-4",
                          column: ""
                        }, {
                          default: x(() => [
                            (ee(!0), Oe(Qe, null, rn(E.values, (C) => (ee(), Re(d, {
                              key: C.abbr,
                              value: C.attribute_value,
                              variant: "outlined",
                              label: ""
                            }, {
                              default: x(() => [
                                ae(q(C.attribute_value), 1)
                              ]),
                              _: 2
                            }, 1032, ["value"]))), 128)),
                            e.filters[E.attribute] ? (ee(), Re(d, {
                              key: 0,
                              value: null,
                              variant: "text",
                              color: "primary",
                              onClick: ia((C) => i.clearFilter(E.attribute), ["stop"])
                            }, {
                              default: x(() => [
                                ae(q(e.__("Clear")), 1)
                              ]),
                              _: 2
                            }, 1032, ["onClick"])) : ye("", !0)
                          ]),
                          _: 2
                        }, 1032, ["modelValue", "onUpdate:modelValue"]),
                        _(f, { class: "p-0 m-0" })
                      ]))), 128)),
                      I("div", null, [
                        _(b, {
                          density: "default",
                          class: "overflow-y-auto",
                          style: { "max-height": "500px" }
                        }, {
                          default: x(() => [
                            (ee(!0), Oe(Qe, null, rn(i.displayItems, (E, C) => (ee(), Re(w, {
                              key: C,
                              xl: "2",
                              lg: "3",
                              md: "4",
                              sm: "4",
                              cols: "6",
                              "min-height": "50"
                            }, {
                              default: x(() => [
                                _(v, {
                                  hover: "hover",
                                  onClick: (D) => i.add_item(E)
                                }, {
                                  default: x(() => [
                                    _(g, {
                                      src: E.image || e.placeholderImage,
                                      class: "text-white align-end",
                                      gradient: "to bottom, rgba(0,0,0,.2), rgba(0,0,0,.7)",
                                      height: "100px"
                                    }, {
                                      default: x(() => [
                                        _(h, {
                                          textContent: q(E.item_name),
                                          class: "text-subtitle-2 px-1 pb-2"
                                        }, null, 8, ["textContent"])
                                      ]),
                                      _: 2
                                    }, 1032, ["src"]),
                                    _(h, { class: "text--primary pa-1" }, {
                                      default: x(() => [
                                        I("div", gre, q(i.formatCurrencySafe(E.price_list_rate || E.rate || 0)) + " " + q(E.currency || ""), 1)
                                      ]),
                                      _: 2
                                    }, 1024)
                                  ]),
                                  _: 2
                                }, 1032, ["onClick"])
                              ]),
                              _: 2
                            }, 1024))), 128)),
                            an(I("div", null, null, 512), [
                              [S, i.loadMore]
                            ])
                          ]),
                          _: 1
                        })
                      ])
                    ]),
                    _: 1
                  })) : ye("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const bre = /* @__PURE__ */ nn(vre, [["render", yre]]), wre = {
  mixins: [Oi],
  data: () => ({
    invoicesDialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: [],
    company: "",
    invoice_name: "",
    customer_name: "",
    customer_id: "",
    mobile_no: "",
    tax_id: "",
    from_date: null,
    to_date: null,
    from_date_formatted: null,
    to_date_formatted: null,
    min_amount: "",
    max_amount: "",
    pos_profile: "",
    page: 1,
    has_more_invoices: !1,
    loading_more: !1,
    searched_once: !1,
    current_search_params: null,
    headers: [
      {
        title: __("Customer"),
        value: "customer",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      },
      {
        title: __("Invoice"),
        value: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    from_date() {
      this.formatFromDate();
    },
    to_date() {
      this.formatToDate();
    }
  },
  methods: {
    formatDateDisplay(e) {
      if (!e) return "";
      try {
        const n = Rt.fromArabicNumerals(String(e)).split("-");
        if (n.length === 3) {
          const a = `${n[2]}-${n[1]}-${n[0]}`;
          return Rt.toArabicNumerals(a);
        }
      } catch (t) {
        console.error("Error formatting date:", t);
      }
      return Rt.toArabicNumerals(String(e));
    },
    formatFromDate() {
      if (this.from_date)
        try {
          let e = "";
          if (typeof this.from_date == "object" && this.from_date instanceof Date) {
            const t = String(this.from_date.getDate()).padStart(2, "0"), n = String(this.from_date.getMonth() + 1).padStart(2, "0"), a = this.from_date.getFullYear();
            e = `${t}-${n}-${a}`;
          } else if (typeof this.from_date == "string" && this.from_date.includes("-")) {
            const t = Rt.fromArabicNumerals(this.from_date).split("-");
            t.length === 3 ? e = `${t[2]}-${t[1]}-${t[0]}` : e = Rt.fromArabicNumerals(this.from_date);
          } else
            e = Rt.fromArabicNumerals(String(this.from_date));
          this.from_date_formatted = Rt.toArabicNumerals(e);
        } catch (e) {
          console.error("Error formatting from_date:", e), this.from_date_formatted = Rt.toArabicNumerals(String(this.from_date));
        }
      else
        this.from_date_formatted = null;
    },
    formatToDate() {
      if (this.to_date)
        try {
          let e = "";
          if (typeof this.to_date == "object" && this.to_date instanceof Date) {
            const t = String(this.to_date.getDate()).padStart(2, "0"), n = String(this.to_date.getMonth() + 1).padStart(2, "0"), a = this.to_date.getFullYear();
            e = `${t}-${n}-${a}`;
          } else if (typeof this.to_date == "string" && this.to_date.includes("-")) {
            const t = Rt.fromArabicNumerals(this.to_date).split("-");
            t.length === 3 ? e = `${t[2]}-${t[1]}-${t[0]}` : e = Rt.fromArabicNumerals(this.to_date);
          } else
            e = Rt.fromArabicNumerals(String(this.to_date));
          this.to_date_formatted = Rt.toArabicNumerals(e);
        } catch (e) {
          console.error("Error formatting to_date:", e), this.to_date_formatted = Rt.toArabicNumerals(String(this.to_date));
        }
      else
        this.to_date_formatted = null;
    },
    clearFromDate() {
      this.from_date = null, this.from_date_formatted = null;
    },
    clearToDate() {
      this.to_date = null, this.to_date_formatted = null;
    },
    close_dialog() {
      this.invoicesDialog = !1;
    },
    clear_search() {
      this.invoice_name = "", this.customer_name = "", this.customer_id = "", this.mobile_no = "", this.tax_id = "", this.from_date = null, this.to_date = null, this.from_date_formatted = null, this.to_date_formatted = null, this.min_amount = "", this.max_amount = "", this.dialog_data = [], this.page = 1, this.has_more_invoices = !1, this.searched_once = !1;
    },
    search_invoices_by_enter(e) {
      e.keyCode === 13 && this.search_invoices();
    },
    search_invoices() {
      this.page = 1, this.dialog_data = [], this.perform_search();
    },
    perform_search() {
      const e = this;
      e.loading_more = !0;
      let t = null, n = null;
      if (e.from_date) {
        if (typeof e.from_date == "object" && e.from_date instanceof Date)
          t = [
            e.from_date.getFullYear(),
            String(e.from_date.getMonth() + 1).padStart(2, "0"),
            String(e.from_date.getDate()).padStart(2, "0")
          ].join("-");
        else if (typeof e.from_date == "string") {
          const i = Rt.fromArabicNumerals(e.from_date);
          if (i.includes("/")) {
            const o = i.split("/");
            o.length === 3 && (t = `${o[2]}-${o[1]}-${o[0]}`);
          } else if (i.includes("-")) {
            const o = i.split("-");
            o.length === 3 && (o[0].length === 4 ? t = i : t = `${o[2]}-${o[1]}-${o[0]}`);
          } else
            t = null;
        }
      }
      if (e.to_date) {
        if (typeof e.to_date == "object" && e.to_date instanceof Date)
          n = [
            e.to_date.getFullYear(),
            String(e.to_date.getMonth() + 1).padStart(2, "0"),
            String(e.to_date.getDate()).padStart(2, "0")
          ].join("-");
        else if (typeof e.to_date == "string") {
          const i = Rt.fromArabicNumerals(e.to_date);
          if (i.includes("/")) {
            const o = i.split("/");
            o.length === 3 && (n = `${o[2]}-${o[1]}-${o[0]}`);
          } else if (i.includes("-")) {
            const o = i.split("-");
            o.length === 3 && (o[0].length === 4 ? n = i : n = `${o[2]}-${o[1]}-${o[0]}`);
          } else
            n = null;
        }
      }
      let a = e.min_amount ? parseFloat(Rt.fromArabicNumerals(e.min_amount)) : null, r = e.max_amount ? parseFloat(Rt.fromArabicNumerals(e.max_amount)) : null;
      this.current_search_params = {
        invoice_name: e.invoice_name,
        customer_name: e.customer_name,
        customer_id: e.customer_id,
        mobile_no: e.mobile_no,
        tax_id: e.tax_id,
        from_date: t,
        to_date: n,
        min_amount: a,
        max_amount: r,
        company: e.company,
        page: e.page,
        doctype: e.pos_profile && e.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
      }, frappe.call({
        method: "posawesome.posawesome.api.invoices.search_invoices_for_return",
        args: this.current_search_params,
        callback: function(i) {
          e.loading_more = !1, e.searched_once = !0, i.message ? (e.page === 1 ? e.dialog_data = i.message.invoices : e.dialog_data = [...e.dialog_data, ...i.message.invoices], e.has_more_invoices = i.message.has_more) : (e.dialog_data = [], e.has_more_invoices = !1, e.eventBus.emit("show_message", {
            title: __("No invoices found"),
            color: "warning"
          }));
        },
        error: function(i) {
          e.loading_more = !1, console.error("Error searching invoices:", i), e.eventBus.emit("show_message", {
            title: __("Error searching invoices"),
            color: "error"
          });
        }
      });
    },
    load_more_invoices() {
      this.page += 1, this.perform_search();
    },
    return_without_invoice() {
      console.log("Starting return without invoice flow");
      const e = {};
      e.items = [], e.is_return = 1;
      const t = { invoice_doc: e };
      console.log("Emitting load_return_invoice event with data:", t), this.eventBus.emit("load_return_invoice", t), this.invoicesDialog = !1;
    },
    submit_dialog() {
      if (this.selected.length > 0) {
        console.log("Starting return with invoice flow");
        const e = this.selected[0], t = {}, n = [];
        console.log("Original return doc:", e), e.items.forEach((r) => {
          const i = { ...r };
          e.doctype === "POS Invoice" ? i.pos_invoice_item = r.name : i.sales_invoice_item = r.name, delete i.name, i.rate = r.rate, i.price_list_rate = r.price_list_rate, i.discount_percentage = r.discount_percentage, i.discount_amount = r.discount_amount, i.is_free_item = r.is_free_item, i.net_rate = r.net_rate, i.net_amount = r.net_amount > 0 ? r.net_amount * -1 : r.net_amount, i.locked_price = !0, i.qty = r.qty > 0 ? r.qty * -1 : r.qty, i.stock_qty = r.stock_qty > 0 ? r.stock_qty * -1 : r.stock_qty, i.amount = r.amount > 0 ? r.amount * -1 : r.amount, n.push(i);
        }), t.items = n, t.is_return = 1, t.return_against = e.name, t.customer = e.customer, t.discount_amount = e.discount_amount, t.additional_discount_percentage = e.additional_discount_percentage, e.grand_total > 0 ? t.grand_total = e.grand_total * -1 : t.grand_total = e.grand_total, t.update_stock = 1, t.pos_profile = this.pos_profile.name, t.company = this.company;
        const a = { invoice_doc: t, return_doc: e };
        console.log("Emitting load_return_invoice event with data:", a), this.eventBus.emit("load_return_invoice", a), this.invoicesDialog = !1;
      }
    }
  },
  created: function() {
    this.eventBus.on("open_returns", (e) => {
      this.invoicesDialog = !0, this.company = e, this.invoice_name = "", this.customer_name = "", this.customer_id = "", this.mobile_no = "", this.tax_id = "", this.from_date = null, this.to_date = null, this.from_date_formatted = null, this.to_date_formatted = null, this.min_amount = "", this.max_amount = "", this.dialog_data = [], this.selected = [], this.page = 1, this.has_more_invoices = !1, this.searched_once = !1;
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_returns"), this.eventBus.off("register_pos_profile");
  }
}, kre = { class: "text-h5 text-primary" }, Sre = {
  key: 0,
  class: "text-center mt-3"
};
function Cre(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-alert"), s = Q("v-col"), d = Q("v-row"), u = Q("v-text-field"), f = Q("VueDatePicker"), h = Q("v-divider"), g = Q("v-spacer"), v = Q("v-icon"), w = Q("v-btn"), b = Q("v-data-table"), p = Q("v-container"), y = Q("v-card-actions"), S = Q("v-card"), E = Q("v-dialog");
  return ee(), Re(d, { justify: "center" }, {
    default: x(() => [
      _(E, {
        modelValue: e.invoicesDialog,
        "onUpdate:modelValue": t[12] || (t[12] = (C) => e.invoicesDialog = C),
        "max-width": "800px",
        "min-width": "800px"
      }, {
        default: x(() => [
          _(S, null, {
            default: x(() => [
              _(o, null, {
                default: x(() => [
                  I("span", kre, q(e.__("Select Return Invoice")), 1)
                ]),
                _: 1
              }),
              _(p, null, {
                default: x(() => [
                  _(d, { class: "mb-2" }, {
                    default: x(() => [
                      _(s, { cols: "12" }, {
                        default: x(() => [
                          !e.from_date && !e.to_date ? (ee(), Re(l, {
                            key: 0,
                            density: "compact",
                            type: "info",
                            variant: "outlined"
                          }, {
                            default: x(() => [
                              I("small", null, q(e.__("Use date range to search for older invoices")), 1)
                            ]),
                            _: 1
                          })) : ye("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-3" }, {
                    default: x(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Invoice ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.invoice_name,
                            "onUpdate:modelValue": t[0] || (t[0] = (C) => e.invoice_name = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "3"
                      }, {
                        default: x(() => [
                          _(f, {
                            modelValue: e.from_date,
                            "onUpdate:modelValue": [
                              t[1] || (t[1] = (C) => e.from_date = C),
                              t[2] || (t[2] = (C) => i.formatFromDate())
                            ],
                            "model-type": "format",
                            format: "dd-MM-yyyy",
                            "enable-time-picker": !1,
                            "auto-apply": "",
                            dark: i.isDarkTheme
                          }, null, 8, ["modelValue", "dark"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "3"
                      }, {
                        default: x(() => [
                          _(f, {
                            modelValue: e.to_date,
                            "onUpdate:modelValue": [
                              t[3] || (t[3] = (C) => e.to_date = C),
                              t[4] || (t[4] = (C) => i.formatToDate())
                            ],
                            "model-type": "format",
                            format: "dd-MM-yyyy",
                            "enable-time-picker": !1,
                            "auto-apply": "",
                            dark: i.isDarkTheme
                          }, null, 8, ["modelValue", "dark"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-2" }, {
                    default: x(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Customer Name"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.customer_name,
                            "onUpdate:modelValue": t[5] || (t[5] = (C) => e.customer_name = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Customer ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.customer_id,
                            "onUpdate:modelValue": t[6] || (t[6] = (C) => e.customer_id = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-3" }, {
                    default: x(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Mobile Number"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.mobile_no,
                            "onUpdate:modelValue": t[7] || (t[7] = (C) => e.mobile_no = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Tax ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.tax_id,
                            "onUpdate:modelValue": t[8] || (t[8] = (C) => e.tax_id = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-3" }, {
                    default: x(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Minimum Amount"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.min_amount,
                            "onUpdate:modelValue": t[9] || (t[9] = (C) => e.min_amount = C),
                            density: "compact",
                            clearable: "",
                            type: "number",
                            min: "0",
                            placeholder: "0"
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Maximum Amount"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.max_amount,
                            "onUpdate:modelValue": t[10] || (t[10] = (C) => e.max_amount = C),
                            density: "compact",
                            clearable: "",
                            type: "number",
                            min: "0",
                            placeholder: "No limit"
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, null, {
                    default: x(() => [
                      _(s, {
                        cols: "12",
                        class: "pt-0 pb-0"
                      }, {
                        default: x(() => [
                          _(h)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mt-2 mb-2" }, {
                    default: x(() => [
                      _(g),
                      _(w, {
                        variant: "text",
                        class: "ml-2",
                        color: "primary",
                        theme: "dark",
                        onClick: i.search_invoices
                      }, {
                        default: x(() => [
                          _(v, { start: "" }, {
                            default: x(() => t[13] || (t[13] = [
                              ae("mdi-magnify")
                            ])),
                            _: 1,
                            __: [13]
                          }),
                          ae(" " + q(e.__("Search")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      _(w, {
                        variant: "text",
                        class: "ml-2",
                        color: "warning",
                        theme: "dark",
                        onClick: i.clear_search
                      }, {
                        default: x(() => [
                          _(v, { start: "" }, {
                            default: x(() => t[14] || (t[14] = [
                              ae("mdi-refresh")
                            ])),
                            _: 1,
                            __: [14]
                          }),
                          ae(" " + q(e.__("Clear")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      e.pos_profile.posa_allow_return_without_invoice == 1 ? (ee(), Re(w, {
                        key: 0,
                        variant: "text",
                        class: "ml-2",
                        color: "secondary",
                        theme: "dark",
                        onClick: i.return_without_invoice
                      }, {
                        default: x(() => [
                          ae(q(e.__("Return without Invoice")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"])) : ye("", !0)
                    ]),
                    _: 1
                  }),
                  _(d, null, {
                    default: x(() => [
                      e.dialog_data && e.dialog_data.length > 0 ? (ee(), Re(s, {
                        key: 0,
                        cols: "12",
                        class: "pa-0 mt-1"
                      }, {
                        default: x(() => [
                          _(b, {
                            headers: e.headers,
                            items: e.dialog_data,
                            "item-key": "name",
                            class: "elevation-1",
                            "show-select": "",
                            modelValue: e.selected,
                            "onUpdate:modelValue": t[11] || (t[11] = (C) => e.selected = C),
                            "select-strategy": "single",
                            "return-object": "",
                            "footer-props": {
                              "items-per-page-options": [10, 25, 50, 100],
                              "items-per-page-text": "Invoices per page"
                            },
                            "items-per-page": 25
                          }, {
                            "item.posting_date": x(({ item: C }) => [
                              ae(q(i.formatDateDisplay(C.posting_date)), 1)
                            ]),
                            "item.grand_total": x(({ item: C }) => [
                              ae(q(e.currencySymbol(C.currency)) + " " + q(e.formatCurrency(C.grand_total)), 1)
                            ]),
                            _: 1
                          }, 8, ["headers", "items", "modelValue"]),
                          e.has_more_invoices ? (ee(), Oe("div", Sre, [
                            _(w, {
                              color: "primary",
                              variant: "outlined",
                              loading: e.loading_more,
                              onClick: i.load_more_invoices
                            }, {
                              default: x(() => [
                                ae(q(e.__("Load More Invoices")), 1)
                              ]),
                              _: 1
                            }, 8, ["loading", "onClick"])
                          ])) : ye("", !0)
                        ]),
                        _: 1
                      })) : e.searched_once && (!e.dialog_data || e.dialog_data.length === 0) ? (ee(), Re(s, {
                        key: 1,
                        cols: "12",
                        class: "text-center"
                      }, {
                        default: x(() => [
                          _(l, {
                            type: "warning",
                            text: ""
                          }, {
                            default: x(() => [
                              ae(q(e.__("No invoices found. Try different search criteria.")), 1)
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })) : ye("", !0)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(y, { class: "mt-1" }, {
                default: x(() => [
                  _(g),
                  _(w, {
                    color: "error mx-2",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  e.selected.length ? (ee(), Re(w, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Select")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])) : ye("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Are = /* @__PURE__ */ nn(wre, [["render", Cre]]), xre = {
  data: () => ({
    dialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: "",
    company: "",
    customer: "",
    mode_of_payment: "",
    full_name: "",
    mobile_no: "",
    headers: [
      {
        title: __("Full Name"),
        value: "full_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Mobile No"),
        value: "mobile_no",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "amount",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.dialog = !1;
    },
    search_by_enter(e) {
      e.keyCode === 13 && this.search();
    },
    search() {
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.m_pesa.get_mpesa_draft_payments",
        args: {
          company: this.company,
          mode_of_payment: this.mode_of_payment,
          mobile_no: this.mobile_no,
          full_name: this.full_name
        },
        async: !1,
        callback: function(t) {
          t.exc || (e.dialog_data = t.message);
        }
      });
    },
    submit_dialog() {
      var e = this;
      if (this.selected.length > 0) {
        const t = this.selected[0].name;
        frappe.call({
          method: "posawesome.posawesome.api.m_pesa.submit_mpesa_payment",
          args: {
            mpesa_payment: t,
            customer: this.customer
          },
          async: !1,
          callback: function(n) {
            n.exc || (e.eventBus.emit("set_mpesa_payment", n.message), e.dialog = !1);
          }
        });
      }
    },
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, 2);
    }
  },
  created: function() {
    this.eventBus.on("open_mpesa_payments", (e) => {
      this.dialog = !0, this.full_name = "", this.mobile_no = "", this.company = e.company, this.customer = e.customer, this.mode_of_payment = e.mode_of_payment, this.dialog_data = "", this.selected = [];
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_mpesa_payments");
  }
}, Tre = { class: "text-h5 text-primary" };
function Ire(e, t, n, a, r, i) {
  const o = Q("v-card-title"), l = Q("v-text-field"), s = Q("v-btn"), d = Q("v-row"), u = Q("v-data-table"), f = Q("v-col"), h = Q("v-container"), g = Q("v-spacer"), v = Q("v-card-actions"), w = Q("v-card"), b = Q("v-dialog");
  return ee(), Re(d, { justify: "center" }, {
    default: x(() => [
      _(b, {
        modelValue: e.dialog,
        "onUpdate:modelValue": t[3] || (t[3] = (p) => e.dialog = p),
        "max-width": "800px",
        "min-width": "800px"
      }, {
        default: x(() => [
          _(w, null, {
            default: x(() => [
              _(o, null, {
                default: x(() => [
                  I("span", Tre, q(e.__("Select Payment")), 1)
                ]),
                _: 1
              }),
              _(h, null, {
                default: x(() => [
                  _(d, { class: "mb-4" }, {
                    default: x(() => [
                      _(l, {
                        color: "primary",
                        label: e.frappe._("Full Name"),
                        "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                        "hide-details": "",
                        modelValue: e.full_name,
                        "onUpdate:modelValue": t[0] || (t[0] = (p) => e.full_name = p),
                        density: "compact",
                        clearable: "",
                        class: "mx-4"
                      }, null, 8, ["label", "bg-color", "modelValue"]),
                      _(l, {
                        color: "primary",
                        label: e.frappe._("Mobile No"),
                        "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                        "hide-details": "",
                        modelValue: e.mobile_no,
                        "onUpdate:modelValue": t[1] || (t[1] = (p) => e.mobile_no = p),
                        density: "compact",
                        clearable: "",
                        class: "mx-4"
                      }, null, 8, ["label", "bg-color", "modelValue"]),
                      _(s, {
                        variant: "text",
                        class: "ml-2",
                        color: "primary",
                        theme: "dark",
                        onClick: i.search
                      }, {
                        default: x(() => [
                          ae(q(e.__("Search")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ]),
                    _: 1
                  }),
                  _(d, null, {
                    default: x(() => [
                      e.dialog_data ? (ee(), Re(f, {
                        key: 0,
                        cols: "12",
                        class: "pa-1"
                      }, {
                        default: x(() => [
                          _(u, {
                            headers: e.headers,
                            items: e.dialog_data,
                            "item-key": "name",
                            class: "elevation-1",
                            "show-select": "",
                            modelValue: e.selected,
                            "onUpdate:modelValue": t[2] || (t[2] = (p) => e.selected = p),
                            "return-object": "",
                            "select-strategy": "single"
                          }, {
                            "item.amount": x(({ item: p }) => [
                              ae(q(i.formatCurrency(p.amount)), 1)
                            ]),
                            "item.posting_date": x(({ item: p }) => [
                              ae(q(p.posting_date.slice(0, 16)), 1)
                            ]),
                            _: 1
                          }, 8, ["headers", "items", "modelValue"])
                        ]),
                        _: 1
                      })) : ye("", !0)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(v, { class: "mt-4" }, {
                default: x(() => [
                  _(g),
                  _(s, {
                    color: "error mx-2",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[4] || (t[4] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [4]
                  }, 8, ["onClick"]),
                  e.selected.length ? (ee(), Re(s, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(q(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])) : ye("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Ere = /* @__PURE__ */ nn(xre, [["render", Ire]]), Pre = {
  name: "CategorySidebar",
  props: {
    itemGroups: {
      type: Array,
      default: () => []
    },
    selectedGroup: {
      type: String,
      default: null
    },
    loading: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["group-selected", "sidebar-toggled", "search-changed", "filter-changed"],
  data() {
    return {
      isCollapsed: !1,
      searchTerm: "",
      selectedFilter: "all",
      recentGroups: [],
      // Store recently selected groups
      searchTimeout: null
    };
  },
  computed: {
    filteredGroups() {
      let e = [...this.itemGroups];
      if (this.searchTerm) {
        const t = this.searchTerm.toLowerCase();
        e = e.filter(
          (n) => n.name.toLowerCase().includes(t)
        );
      }
      switch (this.selectedFilter) {
        case "popular":
          e = e.sort((t, n) => (n.item_count || 0) - (t.item_count || 0));
          break;
        case "recent":
          e = e.sort((t, n) => {
            const a = this.recentGroups.indexOf(t.name), r = this.recentGroups.indexOf(n.name);
            return a === -1 && r === -1 ? 0 : a === -1 ? 1 : r === -1 ? -1 : a - r;
          });
          break;
        default:
          e = e.sort((t, n) => t.name.localeCompare(n.name));
      }
      return e;
    },
    totalCategories() {
      return this.itemGroups.length;
    },
    totalItems() {
      return this.itemGroups.reduce((e, t) => e + (t.item_count || 0), 0);
    }
  },
  methods: {
    toggleSidebar() {
      this.isCollapsed = !this.isCollapsed, this.$emit("sidebar-toggled", this.isCollapsed), localStorage.setItem("pos_category_sidebar_collapsed", this.isCollapsed);
    },
    selectGroup(e) {
      this.$emit("group-selected", e.name), this.addToRecent(e.name);
    },
    addToRecent(e) {
      this.recentGroups = this.recentGroups.filter((t) => t !== e), this.recentGroups.unshift(e), this.recentGroups = this.recentGroups.slice(0, 10), localStorage.setItem("pos_recent_categories", JSON.stringify(this.recentGroups));
    },
    onSearchInput: aD.debounce(function() {
      this.$emit("search-changed", this.searchTerm);
    }, 300),
    clearSearch() {
      this.searchTerm = "", this.$emit("search-changed", "");
    },
    setFilter(e) {
      this.selectedFilter = e, this.$emit("filter-changed", e);
    },
    getGroupIcon(e) {
      const t = {
        Consumable: "mdi-shopping",
        Products: "mdi-package-variant",
        "Raw Material": "mdi-factory",
        Services: "mdi-handshake",
        "Sub Assemblies": "mdi-cogs",
        Food: "mdi-food",
        Beverages: "mdi-coffee",
        Electronics: "mdi-laptop",
        Clothing: "mdi-tshirt-crew",
        Books: "mdi-book-open-page-variant",
        Health: "mdi-heart-pulse",
        Beauty: "mdi-face-woman-shimmer",
        Sports: "mdi-soccer",
        Automotive: "mdi-car",
        Home: "mdi-home",
        All: "mdi-view-grid",
        ALL: "mdi-view-grid",
        Default: "mdi-folder"
      };
      return t[e] || t.Default;
    },
    getCategoryColor(e) {
      const t = {
        Consumable: "#4CAF50",
        Products: "#2196F3",
        "Raw Material": "#9C27B0",
        Services: "#FF9800",
        "Sub Assemblies": "#00BCD4",
        Food: "#F44336",
        Beverages: "#795548",
        Electronics: "#3F51B5",
        Clothing: "#E91E63",
        Books: "#009688",
        Health: "#FF5722",
        Beauty: "#E91E63",
        Sports: "#8BC34A",
        Automotive: "#607D8B",
        Home: "#00BCD4",
        All: "#673AB7",
        ALL: "#673AB7",
        Default: "#9E9E9E"
      };
      return t[e] || t.Default;
    },
    formatCurrency(e) {
      return new Intl.NumberFormat("en-IN", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(e);
    },
    // Load saved preferences
    loadPreferences() {
      const e = localStorage.getItem("pos_category_sidebar_collapsed");
      e !== null && (this.isCollapsed = e === "true");
      const t = localStorage.getItem("pos_recent_categories");
      if (t)
        try {
          this.recentGroups = JSON.parse(t);
        } catch {
          this.recentGroups = [];
        }
    }
  },
  mounted() {
    this.loadPreferences();
  },
  beforeUnmount() {
    this.searchTimeout && clearTimeout(this.searchTimeout);
  }
}, Ore = { class: "sidebar-header" }, Dre = { class: "header-content" }, Bre = {
  key: 0,
  class: "fas fa-layer-group header-icon"
}, Vre = { key: 1 }, Mre = {
  key: 0,
  class: "search-section"
}, Rre = {
  key: 1,
  class: "quick-filters"
}, Lre = {
  class: "category-list",
  ref: "categoryList"
}, Fre = ["onClick", "title"], Nre = {
  key: 0,
  class: "category-details"
}, Ure = { class: "category-name" }, $re = { class: "category-meta" }, qre = {
  key: 0,
  class: "stock-value"
}, Hre = {
  key: 1,
  class: "category-arrow"
}, zre = {
  key: 2,
  class: "item-badge"
}, Wre = {
  key: 0,
  class: "empty-state"
}, jre = { class: "empty-icon" }, Kre = {
  key: 0,
  class: "empty-text"
}, Yre = {
  key: 2,
  class: "sidebar-footer"
}, Gre = { class: "stats" }, Qre = { class: "stat-item" }, Jre = { class: "stat-label" }, Xre = { class: "stat-item" }, Zre = { class: "stat-label" };
function eie(e, t, n, a, r, i) {
  const o = Q("v-icon"), l = Q("v-btn"), s = Q("v-text-field"), d = Q("v-btn-toggle"), u = Q("v-chip"), f = Q("v-divider");
  return ee(), Oe("div", {
    class: Ie(["category-sidebar", { collapsed: r.isCollapsed }])
  }, [
    I("div", Ore, [
      I("div", Dre, [
        r.isCollapsed ? ye("", !0) : (ee(), Oe("i", Bre)),
        r.isCollapsed ? ye("", !0) : (ee(), Oe("h3", Vre, q(e.__("Categories")), 1))
      ]),
      _(l, {
        icon: "",
        size: "small",
        variant: "outlined",
        class: "collapse-btn",
        onClick: i.toggleSidebar,
        title: r.isCollapsed ? e.__("Expand Categories") : e.__("Collapse Categories")
      }, {
        default: x(() => [
          _(o, null, {
            default: x(() => [
              ae(q(r.isCollapsed ? "mdi-chevron-right" : "mdi-chevron-left"), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["onClick", "title"])
    ]),
    r.isCollapsed ? ye("", !0) : (ee(), Oe("div", Mre, [
      _(s, {
        modelValue: r.searchTerm,
        "onUpdate:modelValue": t[0] || (t[0] = (h) => r.searchTerm = h),
        placeholder: e.__("Search categories..."),
        density: "compact",
        variant: "outlined",
        clearable: "",
        "hide-details": "",
        "prepend-inner-icon": "mdi-magnify",
        onInput: i.onSearchInput,
        "onClick:clear": i.clearSearch,
        class: "category-search"
      }, null, 8, ["modelValue", "placeholder", "onInput", "onClick:clear"])
    ])),
    !r.isCollapsed && !r.searchTerm ? (ee(), Oe("div", Rre, [
      _(d, {
        modelValue: r.selectedFilter,
        "onUpdate:modelValue": t[4] || (t[4] = (h) => r.selectedFilter = h),
        color: "primary",
        density: "compact",
        variant: "outlined",
        divided: "",
        mandatory: ""
      }, {
        default: x(() => [
          _(l, {
            value: "all",
            size: "small",
            onClick: t[1] || (t[1] = (h) => i.setFilter("all"))
          }, {
            default: x(() => [
              _(o, {
                left: "",
                size: "small"
              }, {
                default: x(() => t[5] || (t[5] = [
                  ae("mdi-view-grid")
                ])),
                _: 1,
                __: [5]
              }),
              ae(" " + q(e.__("All")), 1)
            ]),
            _: 1
          }),
          _(l, {
            value: "popular",
            size: "small",
            onClick: t[2] || (t[2] = (h) => i.setFilter("popular"))
          }, {
            default: x(() => [
              _(o, {
                left: "",
                size: "small"
              }, {
                default: x(() => t[6] || (t[6] = [
                  ae("mdi-star")
                ])),
                _: 1,
                __: [6]
              }),
              ae(" " + q(e.__("Popular")), 1)
            ]),
            _: 1
          }),
          _(l, {
            value: "recent",
            size: "small",
            onClick: t[3] || (t[3] = (h) => i.setFilter("recent"))
          }, {
            default: x(() => [
              _(o, {
                left: "",
                size: "small"
              }, {
                default: x(() => t[7] || (t[7] = [
                  ae("mdi-clock-outline")
                ])),
                _: 1,
                __: [7]
              }),
              ae(" " + q(e.__("Recent")), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ])) : ye("", !0),
    I("div", Lre, [
      (ee(!0), Oe(Qe, null, rn(i.filteredGroups, (h) => (ee(), Oe("div", {
        key: h.name,
        class: Ie(["category-item", {
          active: n.selectedGroup === h.name,
          "has-items": h.item_count > 0,
          "no-stock": h.item_count === 0
        }]),
        onClick: (g) => i.selectGroup(h),
        title: r.isCollapsed ? h.name : `${h.name} (${h.item_count} items)`
      }, [
        I("div", {
          class: "category-icon",
          style: Xe({ color: i.getCategoryColor(h.name) })
        }, [
          _(o, { size: "large" }, {
            default: x(() => [
              ae(q(i.getGroupIcon(h.name)), 1)
            ]),
            _: 2
          }, 1024)
        ], 4),
        r.isCollapsed ? ye("", !0) : (ee(), Oe("div", Nre, [
          I("span", Ure, q(h.name), 1),
          I("div", $re, [
            _(u, {
              size: "x-small",
              color: h.item_count > 0 ? "primary" : "grey",
              variant: "flat"
            }, {
              default: x(() => [
                ae(q(h.item_count) + " " + q(e.__("items")), 1)
              ]),
              _: 2
            }, 1032, ["color"]),
            h.stock_value ? (ee(), Oe("span", qre, " ₹" + q(i.formatCurrency(h.stock_value)), 1)) : ye("", !0)
          ])
        ])),
        !r.isCollapsed && h.item_count > 0 ? (ee(), Oe("div", Hre, [
          _(o, { size: "small" }, {
            default: x(() => t[8] || (t[8] = [
              ae("mdi-chevron-right")
            ])),
            _: 1,
            __: [8]
          })
        ])) : ye("", !0),
        r.isCollapsed && h.item_count > 0 ? (ee(), Oe("div", zre, q(h.item_count), 1)) : ye("", !0)
      ], 10, Fre))), 128)),
      i.filteredGroups.length === 0 ? (ee(), Oe("div", Wre, [
        I("div", jre, [
          _(o, {
            size: "48",
            color: "grey"
          }, {
            default: x(() => t[9] || (t[9] = [
              ae("mdi-folder-search-outline")
            ])),
            _: 1,
            __: [9]
          })
        ]),
        r.isCollapsed ? ye("", !0) : (ee(), Oe("p", Kre, q(r.searchTerm ? e.__("No categories found") : e.__("No categories available")), 1))
      ])) : ye("", !0)
    ], 512),
    r.isCollapsed ? ye("", !0) : (ee(), Oe("div", Yre, [
      _(f),
      I("div", Gre, [
        I("div", Qre, [
          I("span", Jre, q(e.__("Total Categories")) + ":", 1),
          _(u, {
            size: "x-small",
            color: "primary"
          }, {
            default: x(() => [
              ae(q(i.totalCategories), 1)
            ]),
            _: 1
          })
        ]),
        I("div", Xre, [
          I("span", Zre, q(e.__("Total Items")) + ":", 1),
          _(u, {
            size: "x-small",
            color: "success"
          }, {
            default: x(() => [
              ae(q(i.totalItems), 1)
            ]),
            _: 1
          })
        ])
      ])
    ]))
  ], 2);
}
const tie = /* @__PURE__ */ nn(Pre, [["render", eie], ["__scopeId", "data-v-3c1dad8a"]]);
function nie(e) {
  const { proxy: t } = cs(), n = t?.eventBus, a = Se(null), r = Se(null);
  async function i() {
    return await sm, await ea(), frappe.call("posawesome.posawesome.api.shifts.check_opening_shift", {
      user: frappe.session.user
    }).then((s) => {
      if (s.message) {
        a.value = s.message.pos_profile, r.value = s.message.pos_opening_shift, a.value.taxes_and_charges && frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Taxes and Charges Template",
            name: a.value.taxes_and_charges
          },
          callback: (d) => {
            d.message && G9(
              a.value.taxes_and_charges,
              d.message
            );
          }
        }), n?.emit("register_pos_profile", s.message), n?.emit("set_company", s.message.company);
        try {
          frappe.realtime.emit("pos_profile_registered");
        } catch (d) {
          console.warn("Realtime emit failed", d);
        }
        console.info("LoadPosProfile");
        try {
          a1(s.message);
        } catch (d) {
          console.error("Failed to cache opening data", d);
        }
      } else {
        const d = Fu();
        if (d) {
          a.value = d.pos_profile, r.value = d.pos_opening_shift, n?.emit("register_pos_profile", d), n?.emit("set_company", d.company);
          try {
            frappe.realtime.emit("pos_profile_registered");
          } catch (u) {
            console.warn("Realtime emit failed", u);
          }
          console.info("LoadPosProfile (cached)");
          return;
        }
        e && e();
      }
    }).catch(() => {
      const s = Fu();
      if (s) {
        a.value = s.pos_profile, r.value = s.pos_opening_shift, n?.emit("register_pos_profile", s), n?.emit("set_company", s.company);
        try {
          frappe.realtime.emit("pos_profile_registered");
        } catch (d) {
          console.warn("Realtime emit failed", d);
        }
        console.info("LoadPosProfile (cached)");
        return;
      }
      e && e();
    });
  }
  function o() {
    return frappe.call(
      "posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.make_closing_shift_from_opening",
      { opening_shift: r.value }
    ).then((s) => {
      s.message && n?.emit("open_ClosingDialog", s.message);
    });
  }
  function l(s) {
    frappe.call(
      "posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.submit_closing_shift",
      { closing_shift: s }
    ).then((d) => {
      d.message && (r.value = null, a.value = null, W9(), n?.emit("show_message", {
        title: "POS Shift Closed",
        color: "success"
      }), i());
    });
  }
  return { pos_profile: a, pos_opening_shift: r, check_opening_entry: i, get_closing_data: o, submit_closing_pos: l };
}
function aie() {
  const { proxy: e } = cs(), t = e?.eventBus, n = Se([]);
  function a(r, i) {
    if (i && i.posa_local_storage) {
      const o = gA();
      o.length && (n.value = o, t?.emit("set_offers", o));
    }
    return frappe.call("posawesome.posawesome.api.offers.get_offers", { profile: r }).then((o) => {
      o.message && (console.info("LoadOffers"), R9(o.message), n.value = o.message, t?.emit("set_offers", o.message));
    }).catch((o) => {
      console.error("Failed to fetch offers:", o);
      const l = gA();
      l.length && (n.value = l, t?.emit("set_offers", l));
    });
  }
  return { offers: n, get_offers: a };
}
const rie = {
  setup() {
    const e = cs(), t = DD(), n = bc(), a = nie(() => {
      e && e.proxy && (e.proxy.dialog = !0);
    }), r = aie();
    return { ...t, ...n, ...a, ...r };
  },
  data: function() {
    return {
      dialog: !1,
      payment: !1,
      showOffers: !1,
      coupons: !1,
      itemsLoaded: !1,
      customersLoaded: !1,
      // Category Sidebar Data
      itemGroups: [],
      selectedItemGroup: "ALL",
      sidebarCollapsed: !1,
      loadingCategories: !1,
      categorySearchTerm: "",
      activeFilter: "all"
    };
  },
  components: {
    ItemsSelector: nee,
    Invoice: Sne,
    OpeningDialog: Bne,
    Payments: iae,
    Drafts: bae,
    ClosingDialog: fre,
    Returns: Are,
    PosOffers: dae,
    PosCoupons: _ae,
    SalesOrders: Cae,
    RestaurantOrders: tre,
    NewAddress: pre,
    Variants: bre,
    MpesaPayments: Ere,
    CategorySidebar: tie
  },
  methods: {
    create_opening_voucher() {
      this.dialog = !0;
    },
    get_pos_setting() {
      frappe.db.get_doc("POS Settings", void 0).then((e) => {
        this.eventBus.emit("set_pos_settings", e);
      });
    },
    checkLoadingComplete() {
      this.itemsLoaded && this.customersLoaded && console.info("Loading completed");
    },
    // Category Sidebar Methods
    onGroupSelected(e) {
      this.selectedItemGroup = e, this.$refs.itemsSelector && (this.$refs.itemsSelector.item_group = e), this.eventBus.emit("item_group_changed", e);
    },
    onSidebarToggled(e) {
      this.sidebarCollapsed = e, this.$nextTick(() => {
        this.adjustLayout();
      });
    },
    onCategorySearch(e) {
      this.categorySearchTerm = e, this.filterCategories();
    },
    onFilterChanged(e) {
      this.activeFilter = e, this.applyFilter(e);
    },
    filterCategories() {
    },
    applyFilter(e) {
    },
    adjustLayout() {
      this.eventBus.emit("layout_adjusted", this.sidebarCollapsed);
    },
    loadItemGroups() {
      if (this.$refs.itemsSelector && this.$refs.itemsSelector.items_group) {
        const e = this.$refs.itemsSelector.items_group.map((t) => ({
          name: t,
          item_count: 0,
          // This should be calculated based on filtered items
          stock_value: 0
          // Optional: calculate stock value
        }));
        this.itemGroups = e;
      }
    }
  },
  mounted: function() {
    this.$nextTick(function() {
      this.check_opening_entry(), this.get_pos_setting(), this.eventBus.on("close_opening_dialog", () => {
        this.dialog = !1;
      }), this.eventBus.on("register_pos_data", (e) => {
        this.pos_profile = e.pos_profile, this.get_offers(this.pos_profile.name, this.pos_profile), this.pos_opening_shift = e.pos_opening_shift, this.eventBus.emit("register_pos_profile", e), console.info("LoadPosProfile");
      }), this.eventBus.on("register_pos_profile", (e) => {
        e && e.pos_profile && this.get_offers(e.pos_profile.name, e.pos_profile);
      }), this.eventBus.on("show_payment", (e) => {
        this.payment = e === "true", this.showOffers = !1, this.coupons = !1;
      }), this.eventBus.on("show_offers", (e) => {
        this.showOffers = e === "true", this.payment = !1, this.coupons = !1;
      }), this.eventBus.on("show_coupons", (e) => {
        this.coupons = e === "true", this.showOffers = !1, this.payment = !1;
      }), this.eventBus.on("open_closing_dialog", () => {
        this.get_closing_data();
      }), this.eventBus.on("submit_closing_pos", (e) => {
        this.submit_closing_pos(e);
      }), this.eventBus.on("items_loaded", () => {
        this.itemsLoaded = !0, this.checkLoadingComplete();
      }), this.eventBus.on("customers_loaded", () => {
        this.customersLoaded = !0, this.checkLoadingComplete();
      }), this.eventBus.on("item_groups_data", (e) => {
        this.itemGroups = e;
      });
    });
  },
  beforeUnmount() {
    this.eventBus.off("close_opening_dialog"), this.eventBus.off("register_pos_data"), this.eventBus.off("register_pos_profile"), this.eventBus.off("LoadPosProfile"), this.eventBus.off("show_offers"), this.eventBus.off("show_coupons"), this.eventBus.off("open_closing_dialog"), this.eventBus.off("submit_closing_pos"), this.eventBus.off("items_loaded"), this.eventBus.off("customers_loaded"), this.eventBus.off("item_groups_data");
  },
  // In the created() or mounted() lifecycle hook
  created() {
    SQ();
  }
}, iie = { class: "pos-layout" };
function oie(e, t, n, a, r, i) {
  const o = Q("ClosingDialog"), l = Q("Drafts"), s = Q("SalesOrders"), d = Q("RestaurantOrders"), u = Q("Returns"), f = Q("NewAddress"), h = Q("MpesaPayments"), g = Q("Variants"), v = Q("OpeningDialog"), w = Q("CategorySidebar"), b = Q("ItemsSelector"), p = Q("v-col"), y = Q("PosOffers"), S = Q("PosCoupons"), E = Q("Payments"), C = Q("Invoice"), D = Q("v-row");
  return ee(), Oe("div", {
    class: Ie(["pos-main-container dynamic-container", e.rtlClasses]),
    style: Xe([e.responsiveStyles, e.rtlStyles])
  }, [
    _(o),
    _(l),
    _(s),
    _(d),
    _(u),
    _(f),
    _(h),
    _(g),
    e.dialog ? (ee(), Re(v, {
      key: 0,
      dialog: e.dialog
    }, null, 8, ["dialog"])) : ye("", !0),
    an(I("div", iie, [
      an(_(w, {
        "item-groups": e.itemGroups,
        "selected-group": e.selectedItemGroup,
        loading: e.loadingCategories,
        onGroupSelected: i.onGroupSelected,
        onSidebarToggled: i.onSidebarToggled,
        onSearchChanged: i.onCategorySearch,
        onFilterChanged: i.onFilterChanged
      }, null, 8, ["item-groups", "selected-group", "loading", "onGroupSelected", "onSidebarToggled", "onSearchChanged", "onFilterChanged"]), [
        [_a, !e.payment && !e.showOffers && !e.coupons]
      ]),
      I("div", {
        class: Ie(["pos-main-content", { "sidebar-collapsed": e.sidebarCollapsed }])
      }, [
        _(D, {
          dense: "",
          class: "ma-0 dynamic-main-row"
        }, {
          default: x(() => [
            an(_(p, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: x(() => [
                _(b, { ref: "itemsSelector" }, null, 512)
              ]),
              _: 1
            }, 512), [
              [_a, !e.payment && !e.showOffers && !e.coupons]
            ]),
            an(_(p, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: x(() => [
                _(y)
              ]),
              _: 1
            }, 512), [
              [_a, e.showOffers]
            ]),
            an(_(p, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: x(() => [
                _(S)
              ]),
              _: 1
            }, 512), [
              [_a, e.coupons]
            ]),
            an(_(p, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: x(() => [
                _(E)
              ]),
              _: 1
            }, 512), [
              [_a, e.payment]
            ]),
            _(p, {
              xl: "4",
              lg: "4",
              md: "5",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: x(() => [
                _(C)
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ], 2)
    ], 512), [
      [_a, !e.dialog]
    ])
  ], 6);
}
const sie = /* @__PURE__ */ nn(rie, [["render", oie], ["__scopeId", "data-v-70b37679"]]), lie = {
  mixins: [Oi],
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  data: function() {
    return {
      dialog: !1,
      pos_profile: "",
      pos_opening_shift: "",
      customer_name: "",
      customer_info: "",
      company: "",
      singleSelect: !0,
      invoices_loading: !1,
      unallocated_payments_loading: !1,
      mpesa_payments_loading: !1,
      payment_methods: [],
      outstanding_invoices: [],
      unallocated_payments: [],
      mpesa_payments: [],
      selected_invoices: [],
      selected_payments: [],
      selected_mpesa_payments: [],
      pos_profiles_list: [],
      pos_profile_search: "",
      payment_methods_list: [],
      mpesa_search_name: "",
      mpesa_search_mobile: "",
      invoices_headers: [
        {
          title: "",
          align: "start",
          sortable: !1,
          key: "actions",
          width: "50px"
        },
        {
          title: __("Invoice"),
          align: "start",
          sortable: !0,
          key: "voucher_no"
        },
        {
          title: __("Customer"),
          align: "start",
          sortable: !0,
          key: "customer_name"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Due Date"),
          align: "start",
          sortable: !0,
          key: "due_date"
        },
        {
          title: __("Total"),
          align: "end",
          sortable: !0,
          key: "invoice_amount"
        },
        {
          title: __("Outstanding"),
          align: "end",
          sortable: !0,
          key: "outstanding_amount"
        }
      ],
      unallocated_payments_headers: [
        {
          title: "",
          align: "center",
          sortable: !1,
          key: "select",
          width: "50px"
        },
        {
          title: __("Payment ID"),
          align: "start",
          sortable: !0,
          key: "name"
        },
        {
          title: __("Customer"),
          align: "start",
          sortable: !0,
          key: "customer_name"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Mode"),
          align: "start",
          sortable: !0,
          key: "mode_of_payment"
        },
        {
          title: __("Paid"),
          align: "end",
          sortable: !0,
          key: "paid_amount"
        },
        {
          title: __("Unallocated"),
          align: "end",
          sortable: !0,
          key: "unallocated_amount"
        }
      ],
      mpesa_payment_headers: [
        {
          title: __("Payment ID"),
          align: "start",
          sortable: !0,
          key: "transid"
        },
        {
          title: __("Full Name"),
          align: "start",
          sortable: !0,
          key: "full_name"
        },
        {
          title: __("Nobile Number"),
          align: "start",
          sortable: !0,
          key: "mobile_no"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Amount"),
          align: "end",
          sortable: !0,
          key: "amount"
        }
      ],
      isSubmitting: !1
    };
  },
  components: {
    Customer: RD,
    UpdateCustomer: MD
  },
  methods: {
    async check_opening_entry() {
      var e = this;
      return await sm, await ea(), frappe.call("posawesome.posawesome.api.shifts.check_opening_shift", {
        user: frappe.session.user
      }).then((t) => {
        if (t.message) {
          this.pos_profile = t.message.pos_profile, this.pos_opening_shift = t.message.pos_opening_shift, this.company = t.message.company.name, e.eventBus.emit("payments_register_pos_profile", t.message), e.eventBus.emit("set_company", t.message.company), this.set_payment_methods();
          try {
            a1(t.message);
          } catch (n) {
            console.error("Failed to cache opening data", n);
          }
          this.pos_profile_search = "", this.pos_profiles_list = [], t.message.pos_profile && t.message.pos_profile.name && this.pos_profiles_list.push(t.message.pos_profile.name), this.payment_methods_list = [], this.pos_profile.payments.forEach((n) => {
            this.payment_methods_list.push(n.mode_of_payment);
          }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
        } else {
          const n = Fu();
          if (n) {
            this.pos_profile = n.pos_profile, this.pos_opening_shift = n.pos_opening_shift, this.company = n.company.name, e.eventBus.emit("payments_register_pos_profile", n), e.eventBus.emit("set_company", n.company), this.set_payment_methods(), this.payment_methods_list = [], this.pos_profile.payments.forEach((a) => {
              this.payment_methods_list.push(a.mode_of_payment);
            }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
            return;
          }
          this.create_opening_voucher();
        }
      }).catch(() => {
        const t = Fu();
        if (t) {
          this.pos_profile = t.pos_profile, this.pos_opening_shift = t.pos_opening_shift, this.company = t.company.name, e.eventBus.emit("payments_register_pos_profile", t), e.eventBus.emit("set_company", t.company), this.set_payment_methods(), this.payment_methods_list = [], this.pos_profile.payments.forEach((n) => {
            this.payment_methods_list.push(n.mode_of_payment);
          }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
          return;
        }
        this.create_opening_voucher();
      });
    },
    get_available_pos_profiles() {
      if (this.pos_profile.posa_allow_mpesa_reconcile_payments)
        return frappe.call("posawesome.posawesome.api.payment_entry.get_available_pos_profiles", {
          company: this.company,
          currency: this.pos_profile.currency
        }).then((e) => {
          e.message && (this.pos_profiles_list = e.message);
        });
    },
    create_opening_voucher() {
      this.dialog = !0;
    },
    async fetch_customer_details() {
      var e = this;
      if (this.customer_name) {
        if (cn()) {
          try {
            const n = (await JO() || []).find(
              (r) => r.name === e.customer_name || r.customer_name === e.customer_name
            );
            if (n) {
              e.customer_info = { ...n }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info);
              return;
            }
            const a = (r1() || []).map((r) => r.args).find((r) => r.customer_name === e.customer_name);
            a && (e.customer_info = { ...a, name: a.customer_name }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info));
          } catch (t) {
            console.error("Failed to fetch cached customer", t);
          }
          return;
        }
        try {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customer_info",
            args: {
              customer: e.customer_name
            }
          }), n = t.message;
          t.exc || (e.customer_info = {
            ...n
          }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info));
        } catch (t) {
          console.error("Failed to fetch customer details", t);
        }
      }
    },
    onInvoiceSelected(e) {
      e && e.item && e.item.customer && (this.eventBus.emit("set_customer", e.item.customer), this.$nextTick(() => {
        this.$forceUpdate();
      }));
    },
    get_outstanding_invoices() {
      if (this.invoices_loading = !0, this.selected_invoices = [], cn()) {
        this.outstanding_invoices = [], this.invoices_loading = !1;
        return;
      }
      return frappe.call("posawesome.posawesome.api.payment_entry.get_outstanding_invoices", {
        customer: this.customer_name,
        company: this.company,
        currency: this.pos_profile.currency,
        pos_profile: this.pos_profile_search || null
      }).then((e) => {
        e.message && (this.outstanding_invoices = e.message, this.invoices_loading = !1, this.$nextTick(() => {
          this.$forceUpdate();
        }));
      });
    },
    get_unallocated_payments() {
      if (this.pos_profile.posa_allow_reconcile_payments) {
        if (this.unallocated_payments_loading = !0, !this.customer_name) {
          this.unallocated_payments = [], this.unallocated_payments_loading = !1;
          return;
        }
        if (cn()) {
          this.unallocated_payments = [], this.unallocated_payments_loading = !1;
          return;
        }
        return frappe.call("posawesome.posawesome.api.payment_entry.get_unallocated_payments", {
          customer: this.customer_name,
          company: this.company,
          currency: this.pos_profile.currency
        }).then((e) => {
          e.message && (this.unallocated_payments = e.message, this.unallocated_payments_loading = !1);
        });
      }
    },
    set_mpesa_search_params() {
      this.pos_profile.posa_allow_mpesa_reconcile_payments && this.customer_name && (this.mpesa_search_name = this.customer_info.customer_name.split(" ")[0], this.customer_info.mobile_no && (this.mpesa_search_mobile = this.customer_info.mobile_no.substring(0, 4) + " ***** " + this.customer_info.mobile_no.substring(9)));
    },
    get_draft_mpesa_payments_register() {
      if (!this.pos_profile.posa_allow_mpesa_reconcile_payments) return;
      const e = this;
      if (this.mpesa_payments_loading = !0, cn()) {
        this.mpesa_payments = [], this.mpesa_payments_loading = !1;
        return;
      }
      return frappe.call("posawesome.posawesome.api.m_pesa.get_mpesa_draft_payments", {
        company: e.company,
        mode_of_payment: null,
        full_name: e.mpesa_search_name || null,
        mobile_no: e.mpesa_search_mobile || null,
        payment_methods_list: e.payment_methods_list
      }).then((t) => {
        t.message ? e.mpesa_payments = t.message : e.mpesa_payments = [], e.mpesa_payments_loading = !1;
      });
    },
    set_payment_methods() {
      this.pos_profile.posa_allow_make_new_payments && (this.payment_methods = [], this.pos_profile.payments.forEach((e) => {
        this.payment_methods.push({
          mode_of_payment: e.mode_of_payment,
          amount: 0,
          row_id: e.name
        });
      }));
    },
    clear_all(e = !0) {
      this.customer_name = "", e && (this.customer_info = ""), this.mpesa_search_mobile = "", this.mpesa_search_name = "", this.mpesa_payments = [], this.selected_mpesa_payments = [], this.outstanding_invoices = [], this.unallocated_payments = [], this.selected_invoices = [], this.selected_payments = [], this.selected_mpesa_payments = [], this.set_payment_methods();
    },
    submit() {
      if (this.isSubmitting) return;
      this.isSubmitting = !0;
      const e = this.customer_name, t = this;
      if (!e) {
        this.isSubmitting = !1, frappe.throw(__("Please select a customer"));
        return;
      }
      if (this.selected_invoices.length == 0) {
        this.isSubmitting = !1, frappe.throw(__("Please select an invoice"));
        return;
      }
      if (this.total_selected_payments + this.total_selected_mpesa_payments + this.total_payment_methods <= 0) {
        this.isSubmitting = !1, frappe.throw(__("Please make a payment or select an payment"));
        return;
      }
      this.payment_methods.forEach((r) => {
        r.amount = flt(r.amount);
      });
      const a = {};
      if (a.customer = e, a.company = this.company, a.currency = this.pos_profile.currency, a.pos_opening_shift_name = this.pos_opening_shift.name, a.pos_profile_name = this.pos_profile.name, a.pos_profile = this.pos_profile, a.payment_methods = this.payment_methods, a.selected_invoices = this.selected_invoices, a.selected_payments = this.selected_payments, a.total_selected_invoices = flt(this.total_selected_invoices), a.selected_mpesa_payments = this.selected_mpesa_payments, a.total_selected_payments = flt(this.total_selected_payments), a.total_payment_methods = flt(this.total_payment_methods), a.total_selected_mpesa_payments = flt(this.total_selected_mpesa_payments), cn()) {
        try {
          TA({ args: { payload: a } }), t.eventBus.emit("show_message", {
            title: __("Payment saved offline"),
            color: "warning"
          }), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
        } catch (r) {
          frappe.msgprint(
            __("Cannot Save Offline Payment: ") + (r.message || __("Unknown error"))
          );
        }
        t.isSubmitting = !1;
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: { payload: a },
        freeze: !0,
        freeze_message: __("Processing Payment"),
        callback: function(r) {
          t.isSubmitting = !1, r.message && (frappe.utils.play_sound("submit"), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register());
        },
        error: function() {
          t.isSubmitting = !1;
        }
      });
    },
    submit_and_print() {
      if (this.isSubmitting) return;
      this.isSubmitting = !0;
      const e = this.customer_name, t = this;
      if (!e) {
        this.isSubmitting = !1, frappe.throw(__("Please select a customer"));
        return;
      }
      if (this.selected_invoices.length == 0) {
        this.isSubmitting = !1, frappe.throw(__("Please select an invoice"));
        return;
      }
      if (this.total_selected_payments + this.total_selected_mpesa_payments + this.total_payment_methods <= 0) {
        this.isSubmitting = !1, frappe.throw(__("Please make a payment or select an payment"));
        return;
      }
      this.payment_methods.forEach((r) => {
        r.amount = flt(r.amount);
      });
      const a = {};
      if (a.customer = e, a.company = this.company, a.currency = this.pos_profile.currency, a.pos_opening_shift_name = this.pos_opening_shift.name, a.pos_profile_name = this.pos_profile.name, a.pos_profile = this.pos_profile, a.payment_methods = this.payment_methods, a.selected_invoices = this.selected_invoices, a.selected_payments = this.selected_payments, a.total_selected_invoices = flt(this.total_selected_invoices), a.selected_mpesa_payments = this.selected_mpesa_payments, a.total_selected_payments = flt(this.total_selected_payments), a.total_payment_methods = flt(this.total_payment_methods), a.total_selected_mpesa_payments = flt(this.total_selected_mpesa_payments), cn()) {
        try {
          TA({ args: { payload: a } }), t.eventBus.emit("show_message", {
            title: __("Payment saved offline"),
            color: "warning"
          }), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
        } catch (r) {
          frappe.msgprint(
            __("Cannot Save Offline Payment: ") + (r.message || __("Unknown error"))
          );
        }
        t.isSubmitting = !1;
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: { payload: a },
        freeze: !0,
        freeze_message: __("Processing Payment"),
        callback: function(r) {
          if (t.isSubmitting = !1, r.message) {
            console.log("Server response:", JSON.stringify(r.message)), frappe.utils.play_sound("submit");
            const i = r.message.new_payments_entry && r.message.new_payments_entry.length > 0 ? r.message.new_payments_entry[0].name : null;
            i ? (console.log("Opening print view with payment name:", i), t.load_print_page(i)) : (console.log("No payment_name found in response"), frappe.msgprint(
              __(
                "Payment submitted but print function could not be executed. Payment name not found."
              )
            )), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
          }
        },
        error: function() {
          t.isSubmitting = !1;
        }
      });
    },
    selectSingleInvoice(e) {
      console.log("Row clicked:", e), e && this.toggleInvoiceSelection(e);
    },
    isInvoiceSelected(e) {
      return this.selected_invoices.some((t) => t.voucher_no === e.voucher_no);
    },
    toggleInvoiceSelection(e) {
      this.isInvoiceSelected(e) ? this.selected_invoices = this.selected_invoices.filter(
        (t) => t.voucher_no !== e.voucher_no
      ) : (this.selected_invoices.push(e), e.customer && !this.customer_name && this.eventBus.emit("set_customer", e.customer)), this.$nextTick(() => {
        console.log("Selected invoices:", this.selected_invoices), console.log("Total selected amount:", this.total_selected_invoices), this.$forceUpdate();
      });
    },
    isSelected(e) {
      return this.isInvoiceSelected(e) ? "selected-row bg-primary bg-lighten-4" : "";
    },
    load_print_page(e) {
      if (!e) {
        frappe.msgprint(__("Payment name not found. Cannot open print view."));
        return;
      }
      const t = frappe.urllib.get_base_url() + "/printview?doctype=Payment%20Entry&name=" + e + "&trigger_print=1";
      console.log("Opening printing URL:", t), this.pos_profile?.posa_silent_print ? Np(t) : window.open(t, "_blank");
    },
    async syncPendingPayments() {
      const e = pQ();
      if (e && this.eventBus.emit("show_message", {
        title: `${e} payment${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), cn())
        return;
      const t = await bQ();
      t && t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline payment${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      });
    }
  },
  computed: {
    total_outstanding_amount() {
      return !this.outstanding_invoices || !this.outstanding_invoices.length ? 0 : this.outstanding_invoices.reduce((e, t) => e + flt(t?.outstanding_amount || 0), 0);
    },
    total_unallocated_amount() {
      return !this.unallocated_payments || !this.unallocated_payments.length ? 0 : this.unallocated_payments.reduce((e, t) => e + flt(t?.unallocated_amount || 0), 0);
    },
    total_selected_invoices() {
      if (!this.selected_invoices || !this.selected_invoices.length)
        return console.log("No selected invoices"), 0;
      const e = this.selected_invoices.reduce(
        (t, n) => t + flt(n?.outstanding_amount || 0),
        0
      );
      return console.log("Calculated total selected invoices:", e, "from", this.selected_invoices), e;
    },
    total_selected_payments() {
      return !this.selected_payments || !this.selected_payments.length ? 0 : this.selected_payments.reduce((e, t) => e + flt(t?.unallocated_amount || 0), 0);
    },
    total_selected_mpesa_payments() {
      return !this.selected_mpesa_payments || !this.selected_mpesa_payments.length ? 0 : this.selected_mpesa_payments.reduce((e, t) => e + flt(t?.amount || 0), 0);
    },
    total_payment_methods() {
      if (!this.payment_methods || !this.payment_methods.length) return 0;
      const e = this.payment_methods.reduce((t, n) => {
        const a = parseFloat(n?.amount || 0);
        return t + (isNaN(a) ? 0 : a);
      }, 0);
      return console.log("Payment methods total:", e, "from", this.payment_methods), e;
    },
    total_of_diff() {
      const e = this.total_selected_invoices || 0, t = (this.total_selected_payments || 0) + (this.total_selected_mpesa_payments || 0) + (this.total_payment_methods || 0);
      return console.log("Difference calculation:", {
        invoiceTotal: e,
        paymentTotal: t,
        selectedPayments: this.total_selected_payments,
        mpesaPayments: this.total_selected_mpesa_payments,
        methodPayments: this.total_payment_methods
      }), flt(e - t);
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  created() {
    this.syncPendingPayments(), this.eventBus.on("network-online", this.syncPendingPayments), this.eventBus.on("server-online", this.syncPendingPayments);
  },
  mounted: function() {
    this.$nextTick(function() {
      this.check_opening_entry(), this.eventBus.on("update_customer", (e) => {
        this.clear_all(!0), this.customer_name = e, this.fetch_customer_details(), this.get_outstanding_invoices(), this.get_unallocated_payments(), this.get_draft_mpesa_payments_register();
      }), this.eventBus.on("fetch_customer_details", () => {
        this.fetch_customer_details();
      });
    });
  },
  beforeUnmount() {
    this.eventBus.off("update_customer"), this.eventBus.off("fetch_customer_details"), this.eventBus.off("network-online", this.syncPendingPayments), this.eventBus.off("server-online", this.syncPendingPayments);
  }
}, cie = {
  key: 0,
  class: "text-primary"
}, uie = {
  key: 0,
  class: "golden--text text-end"
}, die = { class: "text-primary" }, fie = { key: 0 }, mie = {
  key: 0,
  class: "text-primary"
}, hie = {
  key: 0,
  class: "golden--text text-end"
}, _ie = { class: "text-primary" }, pie = { key: 1 }, vie = { class: "golden--text text-end" }, gie = { class: "text-primary" }, yie = {
  key: 0,
  class: "text-primary"
}, bie = { key: 3 }, wie = { class: "mt-1" }, kie = { class: "d-flex align-center" }, Sie = { class: "mr-1 text-primary" }, Cie = { class: "text-primary mt-1" }, Aie = {
  class: "pb-6 pr-6",
  style: { position: "absolute", bottom: "0", width: "100%" }
};
function xie(e, t, n, a, r, i) {
  const o = Q("Customer"), l = Q("v-divider"), s = Q("v-col"), d = Q("v-row"), u = Q("v-select"), f = Q("v-btn"), h = Q("v-checkbox"), g = Q("v-data-table"), v = Q("v-text-field"), w = Q("v-card");
  return ee(), Oe("div", {
    fluid: "",
    class: Ie(a.rtlClasses)
  }, [
    an(_(d, null, {
      default: x(() => [
        _(s, {
          md: "8",
          cols: "12",
          class: "pb-2 pr-0"
        }, {
          default: x(() => [
            _(w, {
              class: Ie([
                "main mx-auto mt-3 p-3 pb-16 overflow-y-auto",
                i.isDarkTheme ? "" : "bg-grey-lighten-5"
              ]),
              style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "94vh", height: "94vh" }])
            }, {
              default: x(() => [
                _(o),
                _(l),
                I("div", null, [
                  _(d, null, {
                    default: x(() => [
                      _(s, {
                        md: "7",
                        cols: "12"
                      }, {
                        default: x(() => [
                          I("p", null, [
                            I("strong", null, q(e.__("Invoices")), 1),
                            i.total_outstanding_amount ? (ee(), Oe("span", cie, q(e.__("- Total Outstanding")) + " : " + q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(i.total_outstanding_amount)), 1)) : ye("", !0)
                          ])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "5",
                        cols: "12"
                      }, {
                        default: x(() => [
                          i.total_selected_invoices ? (ee(), Oe("p", uie, [
                            I("span", null, q(e.__("Total Selected :")), 1),
                            I("span", null, q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(i.total_selected_invoices)), 1),
                            I("small", null, "(" + q(e.selected_invoices.length) + " invoice(s))", 1)
                          ])) : ye("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, {
                    align: "center",
                    "no-gutters": "",
                    class: "mb-1"
                  }, {
                    default: x(() => [
                      _(s, {
                        md: "4",
                        cols: "12"
                      }, {
                        default: x(() => [
                          _(u, {
                            density: "compact",
                            variant: "outlined",
                            "hide-details": "",
                            clearable: "",
                            class: "dark-field",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            modelValue: e.pos_profile_search,
                            "onUpdate:modelValue": t[0] || (t[0] = (b) => e.pos_profile_search = b),
                            items: e.pos_profiles_list,
                            "item-value": "name",
                            label: "Select POS Profile"
                          }, null, 8, ["bg-color", "modelValue", "items"])
                        ]),
                        _: 1
                      }),
                      _(s),
                      _(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: x(() => [
                          _(f, {
                            block: "",
                            color: "warning",
                            theme: "dark",
                            onClick: i.get_outstanding_invoices
                          }, {
                            default: x(() => [
                              ae(q(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: x(() => [
                          e.selected_invoices.length ? (ee(), Re(f, {
                            key: 0,
                            block: "",
                            color: "error",
                            theme: "dark",
                            onClick: t[1] || (t[1] = (b) => {
                              e.selected_invoices = [], e.$forceUpdate();
                            })
                          }, {
                            default: x(() => [
                              ae(q(e.__("Clear")), 1)
                            ]),
                            _: 1
                          })) : ye("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(g, {
                    headers: e.invoices_headers,
                    items: e.outstanding_invoices,
                    "item-key": "voucher_no",
                    class: "elevation-1 mt-0",
                    loading: e.invoices_loading,
                    "onClick:row": i.selectSingleInvoice,
                    "item-class": i.isSelected
                  }, {
                    "item.actions": x(({ item: b }) => [
                      _(h, {
                        "model-value": i.isInvoiceSelected(b),
                        color: "primary",
                        onClick: ia((p) => i.toggleInvoiceSelection(b), ["stop"])
                      }, null, 8, ["model-value", "onClick"])
                    ]),
                    "item.invoice_amount": x(({ item: b }) => [
                      ae(q(e.currencySymbol(b.currency)) + " " + q(e.formatCurrency(b.invoice_amount)), 1)
                    ]),
                    "item.outstanding_amount": x(({ item: b }) => [
                      I("span", die, q(e.currencySymbol(b?.currency || e.pos_profile.currency)) + " " + q(e.formatCurrency(b?.outstanding_amount || 0)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "loading", "onClick:row", "item-class"]),
                  _(l)
                ]),
                e.pos_profile.posa_allow_reconcile_payments && e.unallocated_payments.length ? (ee(), Oe("div", fie, [
                  _(d, null, {
                    default: x(() => [
                      _(s, {
                        md: "7",
                        cols: "12"
                      }, {
                        default: x(() => [
                          I("p", null, [
                            I("strong", null, q(e.__("Payments")), 1),
                            i.total_unallocated_amount ? (ee(), Oe("span", mie, q(e.__("- Total Unallocated")) + " : " + q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(i.total_unallocated_amount)), 1)) : ye("", !0)
                          ])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "5",
                        cols: "12"
                      }, {
                        default: x(() => [
                          i.total_selected_payments ? (ee(), Oe("p", hie, [
                            I("span", null, q(e.__("Total Selected :")), 1),
                            I("span", null, q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(i.total_selected_payments)), 1)
                          ])) : ye("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(g, {
                    headers: e.unallocated_payments_headers,
                    items: e.unallocated_payments,
                    "item-key": "name",
                    class: "elevation-1 mt-0",
                    loading: e.unallocated_payments_loading
                  }, {
                    "item.select": x(({ item: b }) => [
                      _(h, {
                        modelValue: e.selected_payments,
                        "onUpdate:modelValue": t[2] || (t[2] = (p) => e.selected_payments = p),
                        value: b,
                        color: "primary",
                        "hide-details": "",
                        onClick: t[3] || (t[3] = ia(() => {
                        }, ["stop"]))
                      }, null, 8, ["modelValue", "value"])
                    ]),
                    "item.paid_amount": x(({ item: b }) => [
                      ae(q(e.currencySymbol(b.currency)) + " " + q(e.formatCurrency(b.paid_amount)), 1)
                    ]),
                    "item.unallocated_amount": x(({ item: b }) => [
                      I("span", _ie, q(e.currencySymbol(b.currency)) + " " + q(e.formatCurrency(b.unallocated_amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "loading"]),
                  _(l)
                ])) : ye("", !0),
                e.pos_profile.posa_allow_mpesa_reconcile_payments ? (ee(), Oe("div", pie, [
                  _(d, null, {
                    default: x(() => [
                      _(s, {
                        md: "8",
                        cols: "12"
                      }, {
                        default: x(() => [
                          I("p", null, [
                            I("span", null, [
                              I("strong", null, q(e.__("Search Mpesa Payments")), 1)
                            ])
                          ])
                        ]),
                        _: 1
                      }),
                      i.total_selected_mpesa_payments ? (ee(), Re(s, {
                        key: 0,
                        md: "4",
                        cols: "12"
                      }, {
                        default: x(() => [
                          I("p", vie, [
                            I("span", null, q(e.__("Total Selected :")), 1),
                            I("span", null, q(e.currencySymbol(e.pos_profile.currency)) + " " + q(e.formatCurrency(i.total_selected_mpesa_payments)), 1)
                          ])
                        ]),
                        _: 1
                      })) : ye("", !0)
                    ]),
                    _: 1
                  }),
                  _(d, {
                    align: "center",
                    "no-gutters": "",
                    class: "mb-1"
                  }, {
                    default: x(() => [
                      _(s, {
                        md: "4",
                        cols: "12",
                        class: "mr-1"
                      }, {
                        default: x(() => [
                          _(v, {
                            density: "compact",
                            variant: "outlined",
                            color: "primary",
                            label: e.frappe._("Search by Name"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            class: "dark-field",
                            modelValue: e.mpesa_search_name,
                            "onUpdate:modelValue": t[4] || (t[4] = (b) => e.mpesa_search_name = b),
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "4",
                        cols: "12",
                        class: "mr-1"
                      }, {
                        default: x(() => [
                          _(v, {
                            density: "compact",
                            variant: "outlined",
                            color: "primary",
                            label: e.frappe._("Search by Mobile"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            class: "dark-field",
                            modelValue: e.mpesa_search_mobile,
                            "onUpdate:modelValue": t[5] || (t[5] = (b) => e.mpesa_search_mobile = b),
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s),
                      _(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: x(() => [
                          _(f, {
                            block: "",
                            color: "warning",
                            theme: "dark",
                            onClick: i.get_draft_mpesa_payments_register
                          }, {
                            default: x(() => [
                              ae(q(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(g, {
                    headers: e.mpesa_payment_headers,
                    items: e.mpesa_payments,
                    "item-key": "name",
                    class: "elevation-1 mt-0",
                    "single-select": e.singleSelect,
                    "show-select": "",
                    modelValue: e.selected_mpesa_payments,
                    "onUpdate:modelValue": t[6] || (t[6] = (b) => e.selected_mpesa_payments = b),
                    loading: e.mpesa_payments_loading,
                    "checkbox-color": "primary"
                  }, {
                    "item.amount": x(({ item: b }) => [
                      I("span", gie, q(e.currencySymbol(b.currency)) + " " + q(e.formatCurrency(b.amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "single-select", "modelValue", "loading"])
                ])) : ye("", !0)
              ]),
              _: 1
            }, 8, ["class", "style"])
          ]),
          _: 1
        }),
        _(s, {
          md: "4",
          cols: "12",
          class: "pb-3"
        }, {
          default: x(() => [
            _(w, {
              class: Ie(["invoices mx-auto mt-3 p-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
              style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "94vh", height: "94vh" }])
            }, {
              default: x(() => [
                I("strong", null, [
                  t[10] || (t[10] = I("h4", { class: "text-primary" }, "Totals", -1)),
                  _(d, null, {
                    default: x(() => [
                      _(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: x(() => [
                          I("span", null, q(e.__("Total Invoices:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: x(() => [
                          _(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_invoices),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"]),
                          e.selected_invoices.length ? (ee(), Oe("small", yie, q(e.selected_invoices.length) + " invoice(s) selected", 1)) : ye("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  i.total_selected_payments ? (ee(), Re(d, { key: 0 }, {
                    default: x(() => [
                      _(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: x(() => [
                          I("span", null, q(e.__("Total Payments:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: x(() => [
                          _(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_payments),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : ye("", !0),
                  i.total_selected_mpesa_payments ? (ee(), Re(d, { key: 1 }, {
                    default: x(() => [
                      _(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: x(() => [
                          I("span", null, q(e.__("Total Mpesa:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: x(() => [
                          _(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_mpesa_payments),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : ye("", !0),
                  e.payment_methods.length ? (ee(), Re(l, { key: 2 })) : ye("", !0),
                  e.pos_profile.posa_allow_make_new_payments ? (ee(), Oe("div", bie, [
                    t[9] || (t[9] = I("h4", { class: "text-primary" }, "Make New Payment", -1)),
                    e.payment_methods.length ? (ee(!0), Oe(Qe, { key: 0 }, rn(e.payment_methods, (b) => (ee(), Re(d, {
                      key: b.row_id
                    }, {
                      default: x(() => [
                        _(s, { md: "7" }, {
                          default: x(() => [
                            I("span", wie, q(e.__(b.mode_of_payment)) + ":", 1)
                          ]),
                          _: 2
                        }, 1024),
                        _(s, { md: "5" }, {
                          default: x(() => [
                            I("div", kie, [
                              I("div", Sie, q(e.currencySymbol(e.pos_profile.currency)), 1),
                              _(v, {
                                class: "p-0 m-0 dark-field",
                                density: "compact",
                                color: "primary",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: b.amount,
                                "onUpdate:modelValue": (p) => b.amount = p,
                                type: "number",
                                flat: "",
                                onInput: t[7] || (t[7] = (p) => e.$forceUpdate())
                              }, null, 8, ["bg-color", "modelValue", "onUpdate:modelValue"])
                            ])
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 2
                    }, 1024))), 128)) : ye("", !0)
                  ])) : ye("", !0),
                  _(l),
                  _(d, null, {
                    default: x(() => [
                      _(s, { md: "7" }, {
                        default: x(() => [
                          I("h4", Cie, q(e.__("Difference:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: x(() => [
                          _(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_of_diff),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                I("div", Aie, [
                  _(d, null, {
                    default: x(() => [
                      _(s, {
                        cols: "6",
                        class: "pr-1"
                      }, {
                        default: x(() => [
                          _(f, {
                            block: "",
                            size: "large",
                            color: "primary",
                            theme: "dark",
                            onClick: i.submit,
                            disabled: e.vaildatPayment || e.isSubmitting,
                            loading: e.isSubmitting
                          }, {
                            default: x(() => [
                              ae(q(e.__("Submit")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick", "disabled", "loading"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "6",
                        class: "pl-1"
                      }, {
                        default: x(() => [
                          _(f, {
                            block: "",
                            size: "large",
                            color: "success",
                            theme: "dark",
                            onClick: t[8] || (t[8] = (b) => i.submit_and_print()),
                            disabled: e.vaildatPayment || e.isSubmitting,
                            loading: e.isSubmitting
                          }, {
                            default: x(() => [
                              ae(q(e.__("Submit & Print")), 1)
                            ]),
                            _: 1
                          }, 8, ["disabled", "loading"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ])
              ]),
              _: 1
            }, 8, ["class", "style"])
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 512), [
      [_a, !e.dialog]
    ])
  ], 2);
}
const Tie = /* @__PURE__ */ nn(lie, [["render", xie]]);
let K_ = 0, Y_ = 0, gu = !1;
const Qn = oa({
  active: !1,
  progress: 0,
  sources: {},
  message: __("Loading app data..."),
  sourceMessages: {
    init: __("Initializing application..."),
    items: __("Loading product catalog..."),
    customers: __("Loading customer database...")
  }
});
function Iie(e) {
  if (Qn.sources = {}, K_ = e.length, Y_ = 0, gu = !1, !e || e.length === 0) {
    console.warn("No loading sources provided");
    return;
  }
  e.forEach((t) => {
    Qn.sources[t] = 0;
  }), Qn.progress = 0, Qn.active = !0, Pie();
}
function LD(e, t) {
  if (!(e in Qn.sources) || gu || K_ === 0) return;
  t = Math.max(0, Math.min(100, t));
  const n = Qn.sources[e];
  Qn.sources[e] = t;
  const a = Qn.sourceMessages[e] || __(`Loading ${e}...`);
  Qn.message !== a && (Qn.message = a), Y_ += t - n;
  const r = Math.round(Y_ / K_);
  r !== Qn.progress && r <= 100 && Eie(Qn.progress, r), r >= 100 && !gu && FD();
}
function Eie(e, t) {
  if (e === t) return;
  const n = performance.now(), a = 300;
  function r(i) {
    const o = i - n, l = Math.min(o / a, 1), s = 1 - Math.pow(1 - l, 3);
    Qn.progress = Math.round(e + (t - e) * s), l < 1 ? requestAnimationFrame(r) : Qn.progress = t;
  }
  requestAnimationFrame(r);
}
function FD() {
  gu || (gu = !0, ND(), Qn.progress = 100, Qn.message = __("Setup complete!"), setTimeout(() => {
    Qn.active && (Qn.message = __("Ready!"), setTimeout(() => {
      Qn.active = !1, Qn.message = __("Loading app data..."), K_ = 0, Y_ = 0, gu = !1;
    }, 600));
  }, 400));
}
let yu = null;
function Pie() {
  yu && clearTimeout(yu), yu = setTimeout(() => {
    console.warn("Loading timeout reached, forcing loading state to complete"), Qn.message = __("Taking longer than expected..."), FD();
  }, 3e4);
}
function ND() {
  yu && (clearTimeout(yu), yu = null);
}
function qh(e) {
  console.log(`Loading source marked as loaded: ${e}`), LD(e, 100);
}
let $d = 0, Hh = 0;
const WA = 2, Oie = 1, Die = 8e3, Bie = 8e3, Vie = 8e3;
let zh = 15e3;
const Mie = 12e4, Rie = 15e3;
function of(e, t) {
  localStorage.setItem("networkOnline", JSON.stringify(e)), localStorage.setItem("serverOnline", JSON.stringify(t));
}
function Lie() {
  return {
    networkOnline: JSON.parse(localStorage.getItem("networkOnline") || "true"),
    serverOnline: JSON.parse(localStorage.getItem("serverOnline") || "true")
  };
}
function Qb(e) {
  setTimeout(async () => {
    if (Ko()) {
      e.serverConnecting = !1, e.networkOnline = !1, e.serverOnline = !1, window.serverOnline = !1, of(!1, !1), e.$forceUpdate(), Qb(e);
      return;
    }
    e.serverConnecting = !0, e.$forceUpdate(), await e.checkNetworkConnectivity(), e.serverConnecting = !1, e.$forceUpdate(), e.serverOnline ? zh = Rie : zh = Math.min(zh * 2, Mie), Qb(e);
  }, zh);
}
function Fie() {
  window.addEventListener("online", () => {
    Ko() || (this.networkOnline = !0, this.internetReachable = !0, console.log("Network: Online"), this.checkNetworkConnectivity());
  }), window.addEventListener("offline", () => {
    Ko() || (this.networkOnline = !1, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, console.log("Network: Offline"), this.$forceUpdate());
  });
  const e = Lie();
  this.networkOnline = e.networkOnline, this.serverOnline = e.serverOnline, this.internetReachable = !1, this.serverConnecting = !1, window.serverOnline = this.serverOnline, Ko() ? (this.networkOnline = !1, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, of(!1, !1)) : (this.networkOnline = navigator.onLine, this.serverConnecting = !0, this.$forceUpdate(), this.checkNetworkConnectivity().then(() => {
    this.serverConnecting = !1, this.$forceUpdate();
  })), Qb(this);
}
async function Nie() {
  try {
    let e = !1, t = !1;
    const n = fetch("/app", {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(Die)
    }).then((d) => d.status < 500), a = fetch("/assets/frappe/images/frappe-logo.png", {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(Bie)
    }).then((d) => d.status < 500), r = fetch(window.location.origin, {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(Vie)
    }).then((d) => d.status < 500), i = Promise.any([n, a, r]).catch(() => !1), o = (async () => {
      try {
        const d = new AbortController(), u = setTimeout(() => d.abort(), 5e3);
        return await fetch("https://www.google.com/generate_204", {
          method: "GET",
          mode: "no-cors",
          cache: "no-cache",
          signal: d.signal
        }), clearTimeout(u), !0;
      } catch {
        return !1;
      }
    })(), [l, s] = await Promise.all([i, o]);
    e = l, t = s, e ? (Hh++, $d = 0, Hh >= Oie && (!this.networkOnline || !this.serverOnline) && (this.networkOnline = e, this.internetReachable = t, this.serverOnline = !0, window.serverOnline = !0, of(this.networkOnline, !0), console.log("Network: Connected"), this.$forceUpdate())) : ($d++, Hh = 0, $d >= WA && (this.networkOnline || this.serverOnline) && (this.networkOnline = e, this.internetReachable = t, this.serverOnline = !1, window.serverOnline = !1, of(this.networkOnline, !1), console.log("Network: Disconnected"), this.$forceUpdate()));
  } catch (e) {
    console.warn("Network connectivity check failed:", e), $d++, Hh = 0, $d >= WA && (this.networkOnline = navigator.onLine, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, of(this.networkOnline, !1), this.$forceUpdate());
  }
}
function Uie(e) {
  const t = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/, n = /^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::1$|^::/, a = ["localhost", "127.0.0.1", "::1", "0.0.0.0"];
  return t.test(e) || n.test(e) || a.includes(e.toLowerCase());
}
async function $ie(e, t, n) {
  const a = [];
  a.push(this.checkFrappePing()), a.push(this.checkCurrentOrigin(t, e, n)), this.isIpHost || a.push(this.checkExternalConnectivity()), frappe.realtime && frappe.realtime.socket && a.push(this.checkWebSocketConnectivity());
  try {
    return (await Promise.allSettled(a)).some((i) => i.status === "fulfilled" && i.value === !0);
  } catch (r) {
    return console.warn("All connectivity checks failed:", r), !1;
  }
}
async function qie() {
  try {
    const e = new AbortController(), t = setTimeout(() => e.abort(), 5e3), n = await fetch("/api/method/ping", {
      method: "HEAD",
      cache: "no-cache",
      signal: e.signal,
      headers: {
        "Cache-Control": "no-cache, no-store, must-revalidate",
        Pragma: "no-cache",
        Expires: "0"
      }
    });
    return clearTimeout(t), n.ok;
  } catch (e) {
    return e.name !== "AbortError" && console.warn("Frappe ping check failed:", e), !1;
  }
}
async function Hie(e, t, n) {
  try {
    const a = new AbortController(), r = setTimeout(() => a.abort(), 5e3), i = `${e}//${t}${n ? ":" + n : ""}`, o = await fetch(`${i}/api/method/frappe.auth.get_logged_user`, {
      method: "HEAD",
      cache: "no-cache",
      signal: a.signal,
      headers: {
        "Cache-Control": "no-cache, no-store, must-revalidate"
      }
    });
    return clearTimeout(r), o.status < 500;
  } catch (a) {
    return a.name !== "AbortError" && console.warn("Current origin check failed:", a), !1;
  }
}
async function zie() {
  try {
    const e = new AbortController(), t = setTimeout(() => e.abort(), 3e3);
    return await fetch("https://httpbin.org/status/200", {
      method: "HEAD",
      mode: "no-cors",
      cache: "no-cache",
      signal: e.signal
    }), clearTimeout(t), !0;
  } catch (e) {
    return e.name !== "AbortError" && console.warn("External connectivity check failed:", e), !1;
  }
}
async function Wie() {
  try {
    return frappe.realtime && frappe.realtime.socket ? frappe.realtime.socket.readyState === 1 : !1;
  } catch (e) {
    return console.warn("WebSocket connectivity check failed:", e), !1;
  }
}
const jie = {
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  data: function() {
    return {
      page: "POS",
      // POS Profile data
      posProfile: {},
      pendingInvoices: 0,
      lastInvoiceId: "",
      // Network status
      networkOnline: navigator.onLine || !1,
      serverOnline: !1,
      serverConnecting: !1,
      internetReachable: !1,
      isIpHost: !1,
      // Sync data
      syncTotals: { pending: 0, synced: 0, drafted: 0 },
      manualOffline: !1,
      // Cache data
      cacheUsage: 0,
      cacheUsageLoading: !1,
      cacheUsageDetails: { total: 0, indexedDB: 0, localStorage: 0 },
      cacheReady: !1
      // Loading progress handled via utility
    };
  },
  computed: {
    isDark() {
      return this.$theme?.current === "dark";
    },
    loadingProgress() {
      return Qn.progress;
    },
    loadingActive() {
      return Qn.active;
    },
    loadingMessage() {
      return Qn.message;
    }
  },
  watch: {
    networkOnline(e, t) {
      e && !t && (this.refreshTaxInclusiveSetting(), this.eventBus.emit("network-online"), this.handleSyncInvoices());
    },
    serverOnline(e, t) {
      e && !t && (this.eventBus.emit("server-online"), this.handleSyncInvoices());
    }
  },
  components: {
    Navbar: uX,
    POS: sie,
    Payments: Tie
  },
  mounted() {
    console.log("POS App mounted - preserving Frappe navbar"), this.cacheReady = nQ(), Iie(["init", "items", "customers"]), this.initializeData(), this.setupNetworkListeners(), this.setupEventListeners(), this.handleRefreshCacheUsage();
  },
  methods: {
    setupNetworkListeners: Fie,
    checkNetworkConnectivity: Nie,
    detectHostType: Uie,
    performConnectivityChecks: $ie,
    checkFrappePing: qie,
    checkCurrentOrigin: Hie,
    checkExternalConnectivity: zie,
    checkWebSocketConnectivity: Wie,
    setPage(e) {
      this.page = e;
    },
    async initializeData() {
      await sm, await _u, this.cacheReady = !0, ea().catch(() => {
      });
      const e = Fu();
      e && e.pos_profile && (this.posProfile = e.pos_profile, navigator.onLine && await this.refreshTaxInclusiveSetting()), iQ() && (alert("Offline queue is too large. Old entries will be purged."), oQ()), this.pendingInvoices = $s(), this.syncTotals = eQ(), AA().then((t) => {
        t.percentage > 90 && alert("Local cache nearing capacity. Consider going online to sync.");
      }).catch(() => {
      }), this.isIpHost = /^\d+\.\d+\.\d+\.\d+/.test(window.location.hostname), this.manualOffline = Ko(), this.manualOffline && (this.networkOnline = !1, this.serverOnline = !1, window.serverOnline = !1), qh("init"), setTimeout(() => {
        Qn.active && (console.warn("Forcing items/customers to complete due to delay"), qh("items"), qh("customers"));
      }, 1e4);
    },
    setupEventListeners() {
      this.eventBus && (this.eventBus.on("register_pos_profile", (e) => {
        this.posProfile = e.pos_profile || {}, navigator.onLine && this.refreshTaxInclusiveSetting();
      }), this.eventBus.on("set_last_invoice", (e) => {
        this.lastInvoiceId = e;
      }), this.eventBus.on("data-loaded", (e) => {
        qh(e);
      }), this.eventBus.on("data-load-progress", ({ name: e, progress: t }) => {
        LD(e, t);
      }), this.eventBus.on("print_last_invoice", () => {
        this.handlePrintLastInvoice();
      }), this.eventBus.on("sync_invoices", () => {
        this.handleSyncInvoices();
      }), this.eventBus.on("pending_invoices_changed", (e) => {
        this.pendingInvoices = e;
      })), frappe.realtime && (frappe.realtime.on("connect", () => {
        this.serverOnline = !0, window.serverOnline = !0, this.serverConnecting = !1, console.log("Server: Connected via WebSocket"), this.$forceUpdate();
      }), frappe.realtime.on("disconnect", () => {
        this.serverOnline = !1, window.serverOnline = !1, this.serverConnecting = !1, console.log("Server: Disconnected from WebSocket"), setTimeout(() => {
          Ko() || this.checkNetworkConnectivity();
        }, 1e3);
      }), frappe.realtime.on("connecting", () => {
        this.serverConnecting = !0, console.log("Server: Connecting to WebSocket..."), this.$forceUpdate();
      }), frappe.realtime.on("reconnect", () => {
        console.log("Server: Reconnected to WebSocket"), window.serverOnline = !0, Ko() || this.checkNetworkConnectivity();
      })), document.addEventListener("visibilitychange", () => {
        !document.hidden && navigator.onLine && !Ko() && this.checkNetworkConnectivity();
      });
    },
    // Event handlers for navbar events
    handleNavClick() {
    },
    handleCloseShift() {
      this.eventBus.emit("open_closing_dialog");
    },
    handlePrintLastInvoice() {
      if (!this.lastInvoiceId)
        return;
      const e = this.posProfile.print_format_for_online || this.posProfile.print_format, t = this.posProfile.letter_head || 0, n = this.posProfile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", a = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(n) + "&name=" + this.lastInvoiceId + "&trigger_print=1&format=" + e + "&no_letterhead=" + t;
      if (this.posProfile.posa_silent_print)
        Np(a);
      else {
        const r = window.open(a, "Print");
        r.addEventListener(
          "load",
          function() {
            r.print();
          },
          { once: !0 }
        );
      }
    },
    async handleSyncInvoices() {
      const e = $s();
      if (e && this.eventBus.emit("show_message", {
        title: `${e} invoice${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), cn())
        return;
      const t = await eD();
      t && (t.synced || t.drafted) && (t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline invoice${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      }), t.drafted && this.eventBus.emit("show_message", {
        title: `${t.drafted} offline invoice${t.drafted > 1 ? "s" : ""} saved as draft`,
        color: "warning"
      })), this.pendingInvoices = $s(), this.syncTotals = t || this.syncTotals;
    },
    handleToggleOffline() {
      rQ(), this.manualOffline = Ko(), this.manualOffline ? (this.networkOnline = !1, this.serverOnline = !1, window.serverOnline = !1) : this.checkNetworkConnectivity();
    },
    handleToggleTheme() {
      this.$theme.toggle();
    },
    handleLogout() {
      frappe.call("logout").finally(() => {
        window.location.href = "/app";
      });
    },
    handleRefreshCacheUsage() {
      this.cacheUsageLoading = !0, AA().then((e) => {
        this.cacheUsage = e.percentage || 0, this.cacheUsageDetails = {
          total: e.total || 0,
          indexedDB: e.indexedDB || 0,
          localStorage: e.localStorage || 0
        };
      }).catch((e) => {
        console.error("Failed to refresh cache usage", e);
      }).finally(() => {
        this.cacheUsageLoading = !1;
      });
    },
    async refreshTaxInclusiveSetting() {
      if (!(!this.posProfile || !this.posProfile.name || !navigator.onLine))
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.utilities.get_pos_profile_tax_inclusive",
            args: {
              pos_profile: this.posProfile.name
            }
          });
          if (e.message !== void 0) {
            const t = e.message;
            try {
              localStorage.setItem("posa_tax_inclusive", JSON.stringify(t));
            } catch (n) {
              console.warn("Failed to cache tax inclusive setting", n);
            }
            import("./index-Cdzera2o.js").then((n) => {
              n && n.setTaxInclusiveSetting && n.setTaxInclusiveSetting(t);
            }).catch(() => {
            });
          }
        } catch (e) {
          console.warn("Failed to refresh tax inclusive setting", e);
        }
    },
    handleUpdateAfterDelete() {
    },
    remove_frappe_nav() {
      console.log("remove_frappe_nav() called but disabled");
    },
    adjustForDualNavbars() {
      this.$nextTick(function() {
      });
    }
  },
  beforeUnmount() {
    this.eventBus && (this.eventBus.off("pending_invoices_changed"), this.eventBus.off("data-loaded")), ND();
  },
  created: function() {
    console.log("POS Awesome loaded - navbar handled by Frappe page");
  }
}, Kie = { class: "page-content" };
function Yie(e, t, n, a, r, i) {
  const o = Q("Navbar"), l = Q("v-main"), s = Q("v-app");
  return ee(), Re(s, {
    class: Ie(["pos-app-content", a.rtlClasses])
  }, {
    default: x(() => [
      _(l, { class: "main-content" }, {
        default: x(() => [
          _(o, {
            "pos-profile": e.posProfile,
            "pending-invoices": e.pendingInvoices,
            "last-invoice-id": e.lastInvoiceId,
            "network-online": e.networkOnline,
            "server-online": e.serverOnline,
            "server-connecting": e.serverConnecting,
            "is-ip-host": e.isIpHost,
            "sync-totals": e.syncTotals,
            "manual-offline": e.manualOffline,
            "is-dark": i.isDark,
            "cache-usage": e.cacheUsage,
            "cache-usage-loading": e.cacheUsageLoading,
            "cache-usage-details": e.cacheUsageDetails,
            "cache-ready": e.cacheReady,
            "loading-progress": i.loadingProgress,
            "loading-active": i.loadingActive,
            "loading-message": i.loadingMessage,
            onChangePage: t[0] || (t[0] = (d) => i.setPage(d)),
            onNavClick: i.handleNavClick,
            onCloseShift: i.handleCloseShift,
            onPrintLastInvoice: i.handlePrintLastInvoice,
            onSyncInvoices: i.handleSyncInvoices,
            onToggleOffline: i.handleToggleOffline,
            onToggleTheme: i.handleToggleTheme,
            onLogout: i.handleLogout,
            onRefreshCacheUsage: i.handleRefreshCacheUsage,
            onUpdateAfterDelete: i.handleUpdateAfterDelete
          }, null, 8, ["pos-profile", "pending-invoices", "last-invoice-id", "network-online", "server-online", "server-connecting", "is-ip-host", "sync-totals", "manual-offline", "is-dark", "cache-usage", "cache-usage-loading", "cache-usage-details", "cache-ready", "loading-progress", "loading-active", "loading-message", "onNavClick", "onCloseShift", "onPrintLastInvoice", "onSyncInvoices", "onToggleOffline", "onToggleTheme", "onLogout", "onRefreshCacheUsage", "onUpdateAfterDelete"]),
          I("div", Kie, [
            (ee(), Re(Hu(e.page), { class: "mx-4 md-4" }))
          ])
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["class"]);
}
const Gie = /* @__PURE__ */ nn(jie, [["render", Yie], ["__scopeId", "data-v-2c31a582"]]);
typeof window < "u" && !window.Dexie && (window.Dexie = ji);
frappe.provide("frappe.PosApp");
frappe.PosApp.posapp = class {
  constructor({ parent: e }) {
    this.$parent = $(document), this.page = e.page, this.make_body();
  }
  make_body() {
    this.$el = this.$parent.find(".main-section");
    const e = XT({
      components: RY,
      directives: YY,
      locale: {
        rtl: frappe.utils.is_rtl()
      },
      theme: {
        defaultTheme: "light",
        themes: {
          light: {
            colors: {
              background: "#FFFFFF",
              primary: "#0097A7",
              secondary: "#00BCD4",
              accent: "#9575CD",
              success: "#66BB6A",
              info: "#2196F3",
              warning: "#FF9800",
              error: "#E86674",
              orange: "#E65100",
              golden: "#A68C59",
              badge: "#F5528C",
              customPrimary: "#085294"
            }
          },
          dark: {
            dark: !0,
            colors: {
              background: "#121212",
              surface: "#1E1E1E",
              primary: "#BB86FC",
              primaryVariant: "#985EFF",
              secondary: "#03DAC6",
              accent: "#9575CD",
              success: "#66BB6A",
              info: "#2196F3",
              warning: "#FF9800",
              error: "#CF6679",
              orange: "#FF6F00",
              golden: "#A68C59",
              badge: "#F5528C",
              customPrimary: "#4FC3F7",
              onBackground: "#FFFFFF",
              onSurface: "#FFFFFF",
              divider: "#373737"
            }
          }
        }
      }
    }), t = a3(Gie);
    if (t.component("VueDatePicker", g0), t.use(iH), t.use(e), t.use(oH, { vuetify: e }), t.mount(this.$el[0]), !document.querySelector('link[rel="manifest"]')) {
      const n = document.createElement("link");
      n.rel = "manifest", n.href = "/manifest.json", document.head.appendChild(n);
    }
    ("serviceWorker" in navigator && window.location.protocol === "https:" || window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") && navigator.serviceWorker.register("/sw.js").catch((n) => console.error("SW registration failed", n));
  }
  setup_header() {
  }
};
export {
  roe as $,
  j9 as A,
  K9 as B,
  Y9 as C,
  G9 as D,
  Q9 as E,
  J9 as F,
  X9 as G,
  Z9 as H,
  vy as I,
  eQ as J,
  tQ as K,
  toe as L,
  Ko as M,
  aQ as N,
  rQ as O,
  iQ as P,
  oQ as Q,
  Js as R,
  N9 as S,
  U9 as T,
  noe as U,
  W_ as V,
  AA as W,
  nQ as X,
  sQ as Y,
  lQ as Z,
  aoe as _,
  Qie as a,
  XO as a0,
  xA as a1,
  gy as a2,
  ioe as a3,
  uQ as a4,
  soe as a5,
  cQ as a6,
  ooe as a7,
  cn as a8,
  dQ as a9,
  Jie as aA,
  F9 as aB,
  IA as aC,
  wQ as aD,
  coe as aE,
  kQ as aF,
  EA as aG,
  uoe as aH,
  SQ as aI,
  Zie as aJ,
  eoe as aK,
  ZO as aa,
  fQ as ab,
  mQ as ac,
  $s as ad,
  TA as ae,
  hQ as af,
  _Q as ag,
  loe as ah,
  pQ as ai,
  vQ as aj,
  gQ as ak,
  r1 as al,
  yQ as am,
  eD as an,
  tD as ao,
  bQ as ap,
  Mh as aq,
  vA as ar,
  R9 as as,
  gA as at,
  L9 as au,
  QO as av,
  Lu as aw,
  yA as ax,
  bA as ay,
  Ud as az,
  n1 as b,
  ea as c,
  gt as d,
  _u as e,
  wA as f,
  Xie as g,
  Rh as h,
  sm as i,
  JO as j,
  Lh as k,
  kA as l,
  Ae as m,
  q9 as n,
  H9 as o,
  Tt as p,
  SA as q,
  py as r,
  $9 as s,
  GO as t,
  Fh as u,
  CA as v,
  z9 as w,
  Fu as x,
  a1 as y,
  W9 as z
};
