$(function() {
  frappe.realtime.on("toconsole", function(e) {
    e.forEach((t) => {
      console.log(t);
    });
  });
});
/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function Jb(e) {
  const t = /* @__PURE__ */ Object.create(null);
  for (const n of e.split(",")) t[n] = 1;
  return (n) => n in t;
}
const Fn = {}, su = [], po = () => {
}, qL = () => !1, K_ = (e) => e.charCodeAt(0) === 111 && e.charCodeAt(1) === 110 && // uppercase letter
(e.charCodeAt(2) > 122 || e.charCodeAt(2) < 97), Xb = (e) => e.startsWith("onUpdate:"), Ka = Object.assign, Zb = (e, t) => {
  const n = e.indexOf(t);
  n > -1 && e.splice(n, 1);
}, HL = Object.prototype.hasOwnProperty, Cn = (e, t) => HL.call(e, t), Lt = Array.isArray, lu = (e) => G_(e) === "[object Map]", YA = (e) => G_(e) === "[object Set]", Kt = (e) => typeof e == "function", sa = (e) => typeof e == "string", ss = (e) => typeof e == "symbol", qn = (e) => e !== null && typeof e == "object", KA = (e) => (qn(e) || Kt(e)) && Kt(e.then) && Kt(e.catch), GA = Object.prototype.toString, G_ = (e) => GA.call(e), zL = (e) => G_(e).slice(8, -1), QA = (e) => G_(e) === "[object Object]", ew = (e) => sa(e) && e !== "NaN" && e[0] !== "-" && "" + parseInt(e, 10) === e, Kd = /* @__PURE__ */ Jb(
  // the leading comma is intentional so empty string "" is also included
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
), Q_ = (e) => {
  const t = /* @__PURE__ */ Object.create(null);
  return (n) => t[n] || (t[n] = e(n));
}, WL = /-(\w)/g, Nr = Q_(
  (e) => e.replace(WL, (t, n) => n ? n.toUpperCase() : "")
), jL = /\B([A-Z])/g, el = Q_(
  (e) => e.replace(jL, "-$1").toLowerCase()
), So = Q_((e) => e.charAt(0).toUpperCase() + e.slice(1)), wg = Q_(
  (e) => e ? `on${So(e)}` : ""
), Ls = (e, t) => !Object.is(e, t), zh = (e, ...t) => {
  for (let n = 0; n < e.length; n++)
    e[n](...t);
}, Cy = (e, t, n, a = !1) => {
  Object.defineProperty(e, t, {
    configurable: !0,
    enumerable: !1,
    writable: a,
    value: n
  });
}, Ay = (e) => {
  const t = parseFloat(e);
  return isNaN(t) ? e : t;
}, YL = (e) => {
  const t = sa(e) ? Number(e) : NaN;
  return isNaN(t) ? e : t;
};
let jk;
const J_ = () => jk || (jk = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : typeof global < "u" ? global : {});
function Xe(e) {
  if (Lt(e)) {
    const t = {};
    for (let n = 0; n < e.length; n++) {
      const a = e[n], r = sa(a) ? JL(a) : Xe(a);
      if (r)
        for (const i in r)
          t[i] = r[i];
    }
    return t;
  } else if (sa(e) || qn(e))
    return e;
}
const KL = /;(?![^(]*\))/g, GL = /:([^]+)/, QL = /\/\*[^]*?\*\//g;
function JL(e) {
  const t = {};
  return e.replace(QL, "").split(KL).forEach((n) => {
    if (n) {
      const a = n.split(GL);
      a.length > 1 && (t[a[0].trim()] = a[1].trim());
    }
  }), t;
}
function Ee(e) {
  let t = "";
  if (sa(e))
    t = e;
  else if (Lt(e))
    for (let n = 0; n < e.length; n++) {
      const a = Ee(e[n]);
      a && (t += a + " ");
    }
  else if (qn(e))
    for (const n in e)
      e[n] && (t += n + " ");
  return t.trim();
}
function Xn(e) {
  if (!e) return null;
  let { class: t, style: n } = e;
  return t && !sa(t) && (e.class = Ee(t)), n && (e.style = Xe(n)), e;
}
const XL = "itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly", ZL = /* @__PURE__ */ Jb(XL);
function JA(e) {
  return !!e || e === "";
}
const XA = (e) => !!(e && e.__v_isRef === !0), W = (e) => sa(e) ? e : e == null ? "" : Lt(e) || qn(e) && (e.toString === GA || !Kt(e.toString)) ? XA(e) ? W(e.value) : JSON.stringify(e, ZA, 2) : String(e), ZA = (e, t) => XA(t) ? ZA(e, t.value) : lu(t) ? {
  [`Map(${t.size})`]: [...t.entries()].reduce(
    (n, [a, r], i) => (n[kg(a, i) + " =>"] = r, n),
    {}
  )
} : YA(t) ? {
  [`Set(${t.size})`]: [...t.values()].map((n) => kg(n))
} : ss(t) ? kg(t) : qn(t) && !Lt(t) && !QA(t) ? String(t) : t, kg = (e, t = "") => {
  var n;
  return (
    // Symbol.description in es2019+ so we need to cast here to pass
    // the lib: es2016 check
    ss(e) ? `Symbol(${(n = e.description) != null ? n : t})` : e
  );
};
/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let yr;
class ex {
  constructor(t = !1) {
    this.detached = t, this._active = !0, this._on = 0, this.effects = [], this.cleanups = [], this._isPaused = !1, this.parent = yr, !t && yr && (this.index = (yr.scopes || (yr.scopes = [])).push(
      this
    ) - 1);
  }
  get active() {
    return this._active;
  }
  pause() {
    if (this._active) {
      this._isPaused = !0;
      let t, n;
      if (this.scopes)
        for (t = 0, n = this.scopes.length; t < n; t++)
          this.scopes[t].pause();
      for (t = 0, n = this.effects.length; t < n; t++)
        this.effects[t].pause();
    }
  }
  /**
   * Resumes the effect scope, including all child scopes and effects.
   */
  resume() {
    if (this._active && this._isPaused) {
      this._isPaused = !1;
      let t, n;
      if (this.scopes)
        for (t = 0, n = this.scopes.length; t < n; t++)
          this.scopes[t].resume();
      for (t = 0, n = this.effects.length; t < n; t++)
        this.effects[t].resume();
    }
  }
  run(t) {
    if (this._active) {
      const n = yr;
      try {
        return yr = this, t();
      } finally {
        yr = n;
      }
    }
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  on() {
    ++this._on === 1 && (this.prevScope = yr, yr = this);
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  off() {
    this._on > 0 && --this._on === 0 && (yr = this.prevScope, this.prevScope = void 0);
  }
  stop(t) {
    if (this._active) {
      this._active = !1;
      let n, a;
      for (n = 0, a = this.effects.length; n < a; n++)
        this.effects[n].stop();
      for (this.effects.length = 0, n = 0, a = this.cleanups.length; n < a; n++)
        this.cleanups[n]();
      if (this.cleanups.length = 0, this.scopes) {
        for (n = 0, a = this.scopes.length; n < a; n++)
          this.scopes[n].stop(!0);
        this.scopes.length = 0;
      }
      if (!this.detached && this.parent && !t) {
        const r = this.parent.scopes.pop();
        r && r !== this && (this.parent.scopes[this.index] = r, r.index = this.index);
      }
      this.parent = void 0;
    }
  }
}
function bu(e) {
  return new ex(e);
}
function tx() {
  return yr;
}
function qa(e, t = !1) {
  yr && yr.cleanups.push(e);
}
let $n;
const Sg = /* @__PURE__ */ new WeakSet();
class nx {
  constructor(t) {
    this.fn = t, this.deps = void 0, this.depsTail = void 0, this.flags = 5, this.next = void 0, this.cleanup = void 0, this.scheduler = void 0, yr && yr.active && yr.effects.push(this);
  }
  pause() {
    this.flags |= 64;
  }
  resume() {
    this.flags & 64 && (this.flags &= -65, Sg.has(this) && (Sg.delete(this), this.trigger()));
  }
  /**
   * @internal
   */
  notify() {
    this.flags & 2 && !(this.flags & 32) || this.flags & 8 || rx(this);
  }
  run() {
    if (!(this.flags & 1))
      return this.fn();
    this.flags |= 2, Yk(this), ix(this);
    const t = $n, n = qi;
    $n = this, qi = !0;
    try {
      return this.fn();
    } finally {
      ox(this), $n = t, qi = n, this.flags &= -3;
    }
  }
  stop() {
    if (this.flags & 1) {
      for (let t = this.deps; t; t = t.nextDep)
        aw(t);
      this.deps = this.depsTail = void 0, Yk(this), this.onStop && this.onStop(), this.flags &= -2;
    }
  }
  trigger() {
    this.flags & 64 ? Sg.add(this) : this.scheduler ? this.scheduler() : this.runIfDirty();
  }
  /**
   * @internal
   */
  runIfDirty() {
    xy(this) && this.run();
  }
  get dirty() {
    return xy(this);
  }
}
let ax = 0, Gd, Qd;
function rx(e, t = !1) {
  if (e.flags |= 8, t) {
    e.next = Qd, Qd = e;
    return;
  }
  e.next = Gd, Gd = e;
}
function tw() {
  ax++;
}
function nw() {
  if (--ax > 0)
    return;
  if (Qd) {
    let t = Qd;
    for (Qd = void 0; t; ) {
      const n = t.next;
      t.next = void 0, t.flags &= -9, t = n;
    }
  }
  let e;
  for (; Gd; ) {
    let t = Gd;
    for (Gd = void 0; t; ) {
      const n = t.next;
      if (t.next = void 0, t.flags &= -9, t.flags & 1)
        try {
          t.trigger();
        } catch (a) {
          e || (e = a);
        }
      t = n;
    }
  }
  if (e) throw e;
}
function ix(e) {
  for (let t = e.deps; t; t = t.nextDep)
    t.version = -1, t.prevActiveLink = t.dep.activeLink, t.dep.activeLink = t;
}
function ox(e) {
  let t, n = e.depsTail, a = n;
  for (; a; ) {
    const r = a.prevDep;
    a.version === -1 ? (a === n && (n = r), aw(a), eF(a)) : t = a, a.dep.activeLink = a.prevActiveLink, a.prevActiveLink = void 0, a = r;
  }
  e.deps = t, e.depsTail = n;
}
function xy(e) {
  for (let t = e.deps; t; t = t.nextDep)
    if (t.dep.version !== t.version || t.dep.computed && (sx(t.dep.computed) || t.dep.version !== t.version))
      return !0;
  return !!e._dirty;
}
function sx(e) {
  if (e.flags & 4 && !(e.flags & 16) || (e.flags &= -17, e.globalVersion === sf) || (e.globalVersion = sf, !e.isSSR && e.flags & 128 && (!e.deps && !e._dirty || !xy(e))))
    return;
  e.flags |= 2;
  const t = e.dep, n = $n, a = qi;
  $n = e, qi = !0;
  try {
    ix(e);
    const r = e.fn(e._value);
    (t.version === 0 || Ls(r, e._value)) && (e.flags |= 128, e._value = r, t.version++);
  } catch (r) {
    throw t.version++, r;
  } finally {
    $n = n, qi = a, ox(e), e.flags &= -3;
  }
}
function aw(e, t = !1) {
  const { dep: n, prevSub: a, nextSub: r } = e;
  if (a && (a.nextSub = r, e.prevSub = void 0), r && (r.prevSub = a, e.nextSub = void 0), n.subs === e && (n.subs = a, !a && n.computed)) {
    n.computed.flags &= -5;
    for (let i = n.computed.deps; i; i = i.nextDep)
      aw(i, !0);
  }
  !t && !--n.sc && n.map && n.map.delete(n.key);
}
function eF(e) {
  const { prevDep: t, nextDep: n } = e;
  t && (t.nextDep = n, e.prevDep = void 0), n && (n.prevDep = t, e.nextDep = void 0);
}
let qi = !0;
const lx = [];
function Xo() {
  lx.push(qi), qi = !1;
}
function Zo() {
  const e = lx.pop();
  qi = e === void 0 ? !0 : e;
}
function Yk(e) {
  const { cleanup: t } = e;
  if (e.cleanup = void 0, t) {
    const n = $n;
    $n = void 0;
    try {
      t();
    } finally {
      $n = n;
    }
  }
}
let sf = 0;
class tF {
  constructor(t, n) {
    this.sub = t, this.dep = n, this.version = n.version, this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;
  }
}
class rw {
  // TODO isolatedDeclarations "__v_skip"
  constructor(t) {
    this.computed = t, this.version = 0, this.activeLink = void 0, this.subs = void 0, this.map = void 0, this.key = void 0, this.sc = 0, this.__v_skip = !0;
  }
  track(t) {
    if (!$n || !qi || $n === this.computed)
      return;
    let n = this.activeLink;
    if (n === void 0 || n.sub !== $n)
      n = this.activeLink = new tF($n, this), $n.deps ? (n.prevDep = $n.depsTail, $n.depsTail.nextDep = n, $n.depsTail = n) : $n.deps = $n.depsTail = n, cx(n);
    else if (n.version === -1 && (n.version = this.version, n.nextDep)) {
      const a = n.nextDep;
      a.prevDep = n.prevDep, n.prevDep && (n.prevDep.nextDep = a), n.prevDep = $n.depsTail, n.nextDep = void 0, $n.depsTail.nextDep = n, $n.depsTail = n, $n.deps === n && ($n.deps = a);
    }
    return n;
  }
  trigger(t) {
    this.version++, sf++, this.notify(t);
  }
  notify(t) {
    tw();
    try {
      for (let n = this.subs; n; n = n.prevSub)
        n.sub.notify() && n.sub.dep.notify();
    } finally {
      nw();
    }
  }
}
function cx(e) {
  if (e.dep.sc++, e.sub.flags & 4) {
    const t = e.dep.computed;
    if (t && !e.dep.subs) {
      t.flags |= 20;
      for (let a = t.deps; a; a = a.nextDep)
        cx(a);
    }
    const n = e.dep.subs;
    n !== e && (e.prevSub = n, n && (n.nextSub = e)), e.dep.subs = e;
  }
}
const o_ = /* @__PURE__ */ new WeakMap(), $l = Symbol(
  ""
), Ty = Symbol(
  ""
), lf = Symbol(
  ""
);
function wr(e, t, n) {
  if (qi && $n) {
    let a = o_.get(e);
    a || o_.set(e, a = /* @__PURE__ */ new Map());
    let r = a.get(n);
    r || (a.set(n, r = new rw()), r.map = a, r.key = n), r.track();
  }
}
function zo(e, t, n, a, r, i) {
  const o = o_.get(e);
  if (!o) {
    sf++;
    return;
  }
  const l = (s) => {
    s && s.trigger();
  };
  if (tw(), t === "clear")
    o.forEach(l);
  else {
    const s = Lt(e), d = s && ew(n);
    if (s && n === "length") {
      const u = Number(a);
      o.forEach((f, _) => {
        (_ === "length" || _ === lf || !ss(_) && _ >= u) && l(f);
      });
    } else
      switch ((n !== void 0 || o.has(void 0)) && l(o.get(n)), d && l(o.get(lf)), t) {
        case "add":
          s ? d && l(o.get("length")) : (l(o.get($l)), lu(e) && l(o.get(Ty)));
          break;
        case "delete":
          s || (l(o.get($l)), lu(e) && l(o.get(Ty)));
          break;
        case "set":
          lu(e) && l(o.get($l));
          break;
      }
  }
  nw();
}
function nF(e, t) {
  const n = o_.get(e);
  return n && n.get(t);
}
function zc(e) {
  const t = Ot(e);
  return t === e ? t : (wr(t, "iterate", lf), Ii(e) ? t : t.map(sr));
}
function X_(e) {
  return wr(e = Ot(e), "iterate", lf), e;
}
const aF = {
  __proto__: null,
  [Symbol.iterator]() {
    return Cg(this, Symbol.iterator, sr);
  },
  concat(...e) {
    return zc(this).concat(
      ...e.map((t) => Lt(t) ? zc(t) : t)
    );
  },
  entries() {
    return Cg(this, "entries", (e) => (e[1] = sr(e[1]), e));
  },
  every(e, t) {
    return No(this, "every", e, t, void 0, arguments);
  },
  filter(e, t) {
    return No(this, "filter", e, t, (n) => n.map(sr), arguments);
  },
  find(e, t) {
    return No(this, "find", e, t, sr, arguments);
  },
  findIndex(e, t) {
    return No(this, "findIndex", e, t, void 0, arguments);
  },
  findLast(e, t) {
    return No(this, "findLast", e, t, sr, arguments);
  },
  findLastIndex(e, t) {
    return No(this, "findLastIndex", e, t, void 0, arguments);
  },
  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement
  forEach(e, t) {
    return No(this, "forEach", e, t, void 0, arguments);
  },
  includes(...e) {
    return Ag(this, "includes", e);
  },
  indexOf(...e) {
    return Ag(this, "indexOf", e);
  },
  join(e) {
    return zc(this).join(e);
  },
  // keys() iterator only reads `length`, no optimisation required
  lastIndexOf(...e) {
    return Ag(this, "lastIndexOf", e);
  },
  map(e, t) {
    return No(this, "map", e, t, void 0, arguments);
  },
  pop() {
    return Bd(this, "pop");
  },
  push(...e) {
    return Bd(this, "push", e);
  },
  reduce(e, ...t) {
    return Kk(this, "reduce", e, t);
  },
  reduceRight(e, ...t) {
    return Kk(this, "reduceRight", e, t);
  },
  shift() {
    return Bd(this, "shift");
  },
  // slice could use ARRAY_ITERATE but also seems to beg for range tracking
  some(e, t) {
    return No(this, "some", e, t, void 0, arguments);
  },
  splice(...e) {
    return Bd(this, "splice", e);
  },
  toReversed() {
    return zc(this).toReversed();
  },
  toSorted(e) {
    return zc(this).toSorted(e);
  },
  toSpliced(...e) {
    return zc(this).toSpliced(...e);
  },
  unshift(...e) {
    return Bd(this, "unshift", e);
  },
  values() {
    return Cg(this, "values", sr);
  }
};
function Cg(e, t, n) {
  const a = X_(e), r = a[t]();
  return a !== e && !Ii(e) && (r._next = r.next, r.next = () => {
    const i = r._next();
    return i.value && (i.value = n(i.value)), i;
  }), r;
}
const rF = Array.prototype;
function No(e, t, n, a, r, i) {
  const o = X_(e), l = o !== e && !Ii(e), s = o[t];
  if (s !== rF[t]) {
    const f = s.apply(e, i);
    return l ? sr(f) : f;
  }
  let d = n;
  o !== e && (l ? d = function(f, _) {
    return n.call(this, sr(f), _, e);
  } : n.length > 2 && (d = function(f, _) {
    return n.call(this, f, _, e);
  }));
  const u = s.call(o, d, a);
  return l && r ? r(u) : u;
}
function Kk(e, t, n, a) {
  const r = X_(e);
  let i = n;
  return r !== e && (Ii(e) ? n.length > 3 && (i = function(o, l, s) {
    return n.call(this, o, l, s, e);
  }) : i = function(o, l, s) {
    return n.call(this, o, sr(l), s, e);
  }), r[t](i, ...a);
}
function Ag(e, t, n) {
  const a = Ot(e);
  wr(a, "iterate", lf);
  const r = a[t](...n);
  return (r === -1 || r === !1) && sw(n[0]) ? (n[0] = Ot(n[0]), a[t](...n)) : r;
}
function Bd(e, t, n = []) {
  Xo(), tw();
  const a = Ot(e)[t].apply(e, n);
  return nw(), Zo(), a;
}
const iF = /* @__PURE__ */ Jb("__proto__,__v_isRef,__isVue"), ux = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((e) => e !== "arguments" && e !== "caller").map((e) => Symbol[e]).filter(ss)
);
function oF(e) {
  ss(e) || (e = String(e));
  const t = Ot(this);
  return wr(t, "has", e), t.hasOwnProperty(e);
}
class dx {
  constructor(t = !1, n = !1) {
    this._isReadonly = t, this._isShallow = n;
  }
  get(t, n, a) {
    if (n === "__v_skip") return t.__v_skip;
    const r = this._isReadonly, i = this._isShallow;
    if (n === "__v_isReactive")
      return !r;
    if (n === "__v_isReadonly")
      return r;
    if (n === "__v_isShallow")
      return i;
    if (n === "__v_raw")
      return a === (r ? i ? pF : _x : i ? hx : mx).get(t) || // receiver is not the reactive proxy, but has the same prototype
      // this means the receiver is a user proxy of the reactive proxy
      Object.getPrototypeOf(t) === Object.getPrototypeOf(a) ? t : void 0;
    const o = Lt(t);
    if (!r) {
      let s;
      if (o && (s = aF[n]))
        return s;
      if (n === "hasOwnProperty")
        return oF;
    }
    const l = Reflect.get(
      t,
      n,
      // if this is a proxy wrapping a ref, return methods using the raw ref
      // as receiver so that we don't have to call `toRaw` on the ref in all
      // its class methods
      va(t) ? t : a
    );
    return (ss(n) ? ux.has(n) : iF(n)) || (r || wr(t, "get", n), i) ? l : va(l) ? o && ew(n) ? l : l.value : qn(l) ? r ? Uu(l) : oa(l) : l;
  }
}
class fx extends dx {
  constructor(t = !1) {
    super(!1, t);
  }
  set(t, n, a, r) {
    let i = t[n];
    if (!this._isShallow) {
      const s = qs(i);
      if (!Ii(a) && !qs(a) && (i = Ot(i), a = Ot(a)), !Lt(t) && va(i) && !va(a))
        return s ? !1 : (i.value = a, !0);
    }
    const o = Lt(t) && ew(n) ? Number(n) < t.length : Cn(t, n), l = Reflect.set(
      t,
      n,
      a,
      va(t) ? t : r
    );
    return t === Ot(r) && (o ? Ls(a, i) && zo(t, "set", n, a) : zo(t, "add", n, a)), l;
  }
  deleteProperty(t, n) {
    const a = Cn(t, n);
    t[n];
    const r = Reflect.deleteProperty(t, n);
    return r && a && zo(t, "delete", n, void 0), r;
  }
  has(t, n) {
    const a = Reflect.has(t, n);
    return (!ss(n) || !ux.has(n)) && wr(t, "has", n), a;
  }
  ownKeys(t) {
    return wr(
      t,
      "iterate",
      Lt(t) ? "length" : $l
    ), Reflect.ownKeys(t);
  }
}
class sF extends dx {
  constructor(t = !1) {
    super(!0, t);
  }
  set(t, n) {
    return !0;
  }
  deleteProperty(t, n) {
    return !0;
  }
}
const lF = /* @__PURE__ */ new fx(), cF = /* @__PURE__ */ new sF(), uF = /* @__PURE__ */ new fx(!0);
const Iy = (e) => e, vh = (e) => Reflect.getPrototypeOf(e);
function dF(e, t, n) {
  return function(...a) {
    const r = this.__v_raw, i = Ot(r), o = lu(i), l = e === "entries" || e === Symbol.iterator && o, s = e === "keys" && o, d = r[e](...a), u = n ? Iy : t ? s_ : sr;
    return !t && wr(
      i,
      "iterate",
      s ? Ty : $l
    ), {
      // iterator protocol
      next() {
        const { value: f, done: _ } = d.next();
        return _ ? { value: f, done: _ } : {
          value: l ? [u(f[0]), u(f[1])] : u(f),
          done: _
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function gh(e) {
  return function(...t) {
    return e === "delete" ? !1 : e === "clear" ? void 0 : this;
  };
}
function fF(e, t) {
  const n = {
    get(r) {
      const i = this.__v_raw, o = Ot(i), l = Ot(r);
      e || (Ls(r, l) && wr(o, "get", r), wr(o, "get", l));
      const { has: s } = vh(o), d = t ? Iy : e ? s_ : sr;
      if (s.call(o, r))
        return d(i.get(r));
      if (s.call(o, l))
        return d(i.get(l));
      i !== o && i.get(r);
    },
    get size() {
      const r = this.__v_raw;
      return !e && wr(Ot(r), "iterate", $l), Reflect.get(r, "size", r);
    },
    has(r) {
      const i = this.__v_raw, o = Ot(i), l = Ot(r);
      return e || (Ls(r, l) && wr(o, "has", r), wr(o, "has", l)), r === l ? i.has(r) : i.has(r) || i.has(l);
    },
    forEach(r, i) {
      const o = this, l = o.__v_raw, s = Ot(l), d = t ? Iy : e ? s_ : sr;
      return !e && wr(s, "iterate", $l), l.forEach((u, f) => r.call(i, d(u), d(f), o));
    }
  };
  return Ka(
    n,
    e ? {
      add: gh("add"),
      set: gh("set"),
      delete: gh("delete"),
      clear: gh("clear")
    } : {
      add(r) {
        !t && !Ii(r) && !qs(r) && (r = Ot(r));
        const i = Ot(this);
        return vh(i).has.call(i, r) || (i.add(r), zo(i, "add", r, r)), this;
      },
      set(r, i) {
        !t && !Ii(i) && !qs(i) && (i = Ot(i));
        const o = Ot(this), { has: l, get: s } = vh(o);
        let d = l.call(o, r);
        d || (r = Ot(r), d = l.call(o, r));
        const u = s.call(o, r);
        return o.set(r, i), d ? Ls(i, u) && zo(o, "set", r, i) : zo(o, "add", r, i), this;
      },
      delete(r) {
        const i = Ot(this), { has: o, get: l } = vh(i);
        let s = o.call(i, r);
        s || (r = Ot(r), s = o.call(i, r)), l && l.call(i, r);
        const d = i.delete(r);
        return s && zo(i, "delete", r, void 0), d;
      },
      clear() {
        const r = Ot(this), i = r.size !== 0, o = r.clear();
        return i && zo(
          r,
          "clear",
          void 0,
          void 0
        ), o;
      }
    }
  ), [
    "keys",
    "values",
    "entries",
    Symbol.iterator
  ].forEach((r) => {
    n[r] = dF(r, e, t);
  }), n;
}
function iw(e, t) {
  const n = fF(e, t);
  return (a, r, i) => r === "__v_isReactive" ? !e : r === "__v_isReadonly" ? e : r === "__v_raw" ? a : Reflect.get(
    Cn(n, r) && r in a ? n : a,
    r,
    i
  );
}
const mF = {
  get: /* @__PURE__ */ iw(!1, !1)
}, hF = {
  get: /* @__PURE__ */ iw(!1, !0)
}, _F = {
  get: /* @__PURE__ */ iw(!0, !1)
};
const mx = /* @__PURE__ */ new WeakMap(), hx = /* @__PURE__ */ new WeakMap(), _x = /* @__PURE__ */ new WeakMap(), pF = /* @__PURE__ */ new WeakMap();
function vF(e) {
  switch (e) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function gF(e) {
  return e.__v_skip || !Object.isExtensible(e) ? 0 : vF(zL(e));
}
function oa(e) {
  return qs(e) ? e : ow(
    e,
    !1,
    lF,
    mF,
    mx
  );
}
function yF(e) {
  return ow(
    e,
    !1,
    uF,
    hF,
    hx
  );
}
function Uu(e) {
  return ow(
    e,
    !0,
    cF,
    _F,
    _x
  );
}
function ow(e, t, n, a, r) {
  if (!qn(e) || e.__v_raw && !(t && e.__v_isReactive))
    return e;
  const i = gF(e);
  if (i === 0)
    return e;
  const o = r.get(e);
  if (o)
    return o;
  const l = new Proxy(
    e,
    i === 2 ? a : n
  );
  return r.set(e, l), l;
}
function cu(e) {
  return qs(e) ? cu(e.__v_raw) : !!(e && e.__v_isReactive);
}
function qs(e) {
  return !!(e && e.__v_isReadonly);
}
function Ii(e) {
  return !!(e && e.__v_isShallow);
}
function sw(e) {
  return e ? !!e.__v_raw : !1;
}
function Ot(e) {
  const t = e && e.__v_raw;
  return t ? Ot(t) : e;
}
function px(e) {
  return !Cn(e, "__v_skip") && Object.isExtensible(e) && Cy(e, "__v_skip", !0), e;
}
const sr = (e) => qn(e) ? oa(e) : e, s_ = (e) => qn(e) ? Uu(e) : e;
function va(e) {
  return e ? e.__v_isRef === !0 : !1;
}
function Se(e) {
  return vx(e, !1);
}
function ot(e) {
  return vx(e, !0);
}
function vx(e, t) {
  return va(e) ? e : new bF(e, t);
}
class bF {
  constructor(t, n) {
    this.dep = new rw(), this.__v_isRef = !0, this.__v_isShallow = !1, this._rawValue = n ? t : Ot(t), this._value = n ? t : sr(t), this.__v_isShallow = n;
  }
  get value() {
    return this.dep.track(), this._value;
  }
  set value(t) {
    const n = this._rawValue, a = this.__v_isShallow || Ii(t) || qs(t);
    t = a ? t : Ot(t), Ls(t, n) && (this._rawValue = t, this._value = a ? t : sr(t), this.dep.trigger());
  }
}
function fe(e) {
  return va(e) ? e.value : e;
}
function yo(e) {
  return Kt(e) ? e() : fe(e);
}
const wF = {
  get: (e, t, n) => t === "__v_raw" ? e : fe(Reflect.get(e, t, n)),
  set: (e, t, n, a) => {
    const r = e[t];
    return va(r) && !va(n) ? (r.value = n, !0) : Reflect.set(e, t, n, a);
  }
};
function gx(e) {
  return cu(e) ? e : new Proxy(e, wF);
}
function $u(e) {
  const t = Lt(e) ? new Array(e.length) : {};
  for (const n in e)
    t[n] = yx(e, n);
  return t;
}
class kF {
  constructor(t, n, a) {
    this._object = t, this._key = n, this._defaultValue = a, this.__v_isRef = !0, this._value = void 0;
  }
  get value() {
    const t = this._object[this._key];
    return this._value = t === void 0 ? this._defaultValue : t;
  }
  set value(t) {
    this._object[this._key] = t;
  }
  get dep() {
    return nF(Ot(this._object), this._key);
  }
}
class SF {
  constructor(t) {
    this._getter = t, this.__v_isRef = !0, this.__v_isReadonly = !0, this._value = void 0;
  }
  get value() {
    return this._value = this._getter();
  }
}
function be(e, t, n) {
  return va(e) ? e : Kt(e) ? new SF(e) : qn(e) && arguments.length > 1 ? yx(e, t, n) : Se(e);
}
function yx(e, t, n) {
  const a = e[t];
  return va(a) ? a : new kF(e, t, n);
}
class CF {
  constructor(t, n, a) {
    this.fn = t, this.setter = n, this._value = void 0, this.dep = new rw(this), this.__v_isRef = !0, this.deps = void 0, this.depsTail = void 0, this.flags = 16, this.globalVersion = sf - 1, this.next = void 0, this.effect = this, this.__v_isReadonly = !n, this.isSSR = a;
  }
  /**
   * @internal
   */
  notify() {
    if (this.flags |= 16, !(this.flags & 8) && // avoid infinite self recursion
    $n !== this)
      return rx(this, !0), !0;
  }
  get value() {
    const t = this.dep.track();
    return sx(this), t && (t.version = this.dep.version), this._value;
  }
  set value(t) {
    this.setter && this.setter(t);
  }
}
function AF(e, t, n = !1) {
  let a, r;
  return Kt(e) ? a = e : (a = e.get, r = e.set), new CF(a, r, n);
}
const yh = {}, l_ = /* @__PURE__ */ new WeakMap();
let Pl;
function xF(e, t = !1, n = Pl) {
  if (n) {
    let a = l_.get(n);
    a || l_.set(n, a = []), a.push(e);
  }
}
function TF(e, t, n = Fn) {
  const { immediate: a, deep: r, once: i, scheduler: o, augmentJob: l, call: s } = n, d = (E) => r ? E : Ii(E) || r === !1 || r === 0 ? Wo(E, 1) : Wo(E);
  let u, f, _, g, v = !1, w = !1;
  if (va(e) ? (f = () => e.value, v = Ii(e)) : cu(e) ? (f = () => d(e), v = !0) : Lt(e) ? (w = !0, v = e.some((E) => cu(E) || Ii(E)), f = () => e.map((E) => {
    if (va(E))
      return E.value;
    if (cu(E))
      return d(E);
    if (Kt(E))
      return s ? s(E, 2) : E();
  })) : Kt(e) ? t ? f = s ? () => s(e, 2) : e : f = () => {
    if (_) {
      Xo();
      try {
        _();
      } finally {
        Zo();
      }
    }
    const E = Pl;
    Pl = u;
    try {
      return s ? s(e, 3, [g]) : e(g);
    } finally {
      Pl = E;
    }
  } : f = po, t && r) {
    const E = f, C = r === !0 ? 1 / 0 : r;
    f = () => Wo(E(), C);
  }
  const b = tx(), p = () => {
    u.stop(), b && b.active && Zb(b.effects, u);
  };
  if (i && t) {
    const E = t;
    t = (...C) => {
      E(...C), p();
    };
  }
  let y = w ? new Array(e.length).fill(yh) : yh;
  const S = (E) => {
    if (!(!(u.flags & 1) || !u.dirty && !E))
      if (t) {
        const C = u.run();
        if (r || v || (w ? C.some((B, O) => Ls(B, y[O])) : Ls(C, y))) {
          _ && _();
          const B = Pl;
          Pl = u;
          try {
            const O = [
              C,
              // pass undefined as the old value when it's changed for the first time
              y === yh ? void 0 : w && y[0] === yh ? [] : y,
              g
            ];
            y = C, s ? s(t, 3, O) : (
              // @ts-expect-error
              t(...O)
            );
          } finally {
            Pl = B;
          }
        }
      } else
        u.run();
  };
  return l && l(S), u = new nx(f), u.scheduler = o ? () => o(S, !1) : S, g = (E) => xF(E, !1, u), _ = u.onStop = () => {
    const E = l_.get(u);
    if (E) {
      if (s)
        s(E, 4);
      else
        for (const C of E) C();
      l_.delete(u);
    }
  }, t ? a ? S(!0) : y = u.run() : o ? o(S.bind(null, !0), !0) : u.run(), p.pause = u.pause.bind(u), p.resume = u.resume.bind(u), p.stop = p, p;
}
function Wo(e, t = 1 / 0, n) {
  if (t <= 0 || !qn(e) || e.__v_skip || (n = n || /* @__PURE__ */ new Set(), n.has(e)))
    return e;
  if (n.add(e), t--, va(e))
    Wo(e.value, t, n);
  else if (Lt(e))
    for (let a = 0; a < e.length; a++)
      Wo(e[a], t, n);
  else if (YA(e) || lu(e))
    e.forEach((a) => {
      Wo(a, t, n);
    });
  else if (QA(e)) {
    for (const a in e)
      Wo(e[a], t, n);
    for (const a of Object.getOwnPropertySymbols(e))
      Object.prototype.propertyIsEnumerable.call(e, a) && Wo(e[a], t, n);
  }
  return e;
}
/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function Mf(e, t, n, a) {
  try {
    return a ? e(...a) : e();
  } catch (r) {
    Z_(r, t, n);
  }
}
function zi(e, t, n, a) {
  if (Kt(e)) {
    const r = Mf(e, t, n, a);
    return r && KA(r) && r.catch((i) => {
      Z_(i, t, n);
    }), r;
  }
  if (Lt(e)) {
    const r = [];
    for (let i = 0; i < e.length; i++)
      r.push(zi(e[i], t, n, a));
    return r;
  }
}
function Z_(e, t, n, a = !0) {
  const r = t ? t.vnode : null, { errorHandler: i, throwUnhandledErrorInProduction: o } = t && t.appContext.config || Fn;
  if (t) {
    let l = t.parent;
    const s = t.proxy, d = `https://vuejs.org/error-reference/#runtime-${n}`;
    for (; l; ) {
      const u = l.ec;
      if (u) {
        for (let f = 0; f < u.length; f++)
          if (u[f](e, s, d) === !1)
            return;
      }
      l = l.parent;
    }
    if (i) {
      Xo(), Mf(i, null, 10, [
        e,
        s,
        d
      ]), Zo();
      return;
    }
  }
  IF(e, n, r, a, o);
}
function IF(e, t, n, a = !0, r = !1) {
  if (r)
    throw e;
  console.error(e);
}
const Mr = [];
let lo = -1;
const uu = [];
let Es = null, Zc = 0;
const bx = /* @__PURE__ */ Promise.resolve();
let c_ = null;
function Vt(e) {
  const t = c_ || bx;
  return e ? t.then(this ? e.bind(this) : e) : t;
}
function EF(e) {
  let t = lo + 1, n = Mr.length;
  for (; t < n; ) {
    const a = t + n >>> 1, r = Mr[a], i = cf(r);
    i < e || i === e && r.flags & 2 ? t = a + 1 : n = a;
  }
  return t;
}
function lw(e) {
  if (!(e.flags & 1)) {
    const t = cf(e), n = Mr[Mr.length - 1];
    !n || // fast path when the job id is larger than the tail
    !(e.flags & 2) && t >= cf(n) ? Mr.push(e) : Mr.splice(EF(t), 0, e), e.flags |= 1, wx();
  }
}
function wx() {
  c_ || (c_ = bx.then(Sx));
}
function PF(e) {
  Lt(e) ? uu.push(...e) : Es && e.id === -1 ? Es.splice(Zc + 1, 0, e) : e.flags & 1 || (uu.push(e), e.flags |= 1), wx();
}
function Gk(e, t, n = lo + 1) {
  for (; n < Mr.length; n++) {
    const a = Mr[n];
    if (a && a.flags & 2) {
      if (e && a.id !== e.uid)
        continue;
      Mr.splice(n, 1), n--, a.flags & 4 && (a.flags &= -2), a(), a.flags & 4 || (a.flags &= -2);
    }
  }
}
function kx(e) {
  if (uu.length) {
    const t = [...new Set(uu)].sort(
      (n, a) => cf(n) - cf(a)
    );
    if (uu.length = 0, Es) {
      Es.push(...t);
      return;
    }
    for (Es = t, Zc = 0; Zc < Es.length; Zc++) {
      const n = Es[Zc];
      n.flags & 4 && (n.flags &= -2), n.flags & 8 || n(), n.flags &= -2;
    }
    Es = null, Zc = 0;
  }
}
const cf = (e) => e.id == null ? e.flags & 2 ? -1 : 1 / 0 : e.id;
function Sx(e) {
  try {
    for (lo = 0; lo < Mr.length; lo++) {
      const t = Mr[lo];
      t && !(t.flags & 8) && (t.flags & 4 && (t.flags &= -2), Mf(
        t,
        t.i,
        t.i ? 15 : 14
      ), t.flags & 4 || (t.flags &= -2));
    }
  } finally {
    for (; lo < Mr.length; lo++) {
      const t = Mr[lo];
      t && (t.flags &= -2);
    }
    lo = -1, Mr.length = 0, kx(), c_ = null, (Mr.length || uu.length) && Sx();
  }
}
let tr = null, Cx = null;
function u_(e) {
  const t = tr;
  return tr = e, Cx = e && e.type.__scopeId || null, t;
}
function x(e, t = tr, n) {
  if (!t || e._n)
    return e;
  const a = (...r) => {
    a._d && cS(-1);
    const i = u_(t);
    let o;
    try {
      o = e(...r);
    } finally {
      u_(i), a._d && cS(1);
    }
    return o;
  };
  return a._n = !0, a._c = !0, a._d = !0, a;
}
function ln(e, t) {
  if (tr === null)
    return e;
  const n = ap(tr), a = e.dirs || (e.dirs = []);
  for (let r = 0; r < t.length; r++) {
    let [i, o, l, s = Fn] = t[r];
    i && (Kt(i) && (i = {
      mounted: i,
      updated: i
    }), i.deep && Wo(o), a.push({
      dir: i,
      instance: n,
      value: o,
      oldValue: void 0,
      arg: l,
      modifiers: s
    }));
  }
  return e;
}
function Al(e, t, n, a) {
  const r = e.dirs, i = t && t.dirs;
  for (let o = 0; o < r.length; o++) {
    const l = r[o];
    i && (l.oldValue = i[o].value);
    let s = l.dir[a];
    s && (Xo(), zi(s, n, 8, [
      e.el,
      l,
      e,
      t
    ]), Zo());
  }
}
const Ax = Symbol("_vte"), xx = (e) => e.__isTeleport, Jd = (e) => e && (e.disabled || e.disabled === ""), Qk = (e) => e && (e.defer || e.defer === ""), Jk = (e) => typeof SVGElement < "u" && e instanceof SVGElement, Xk = (e) => typeof MathMLElement == "function" && e instanceof MathMLElement, Ey = (e, t) => {
  const n = e && e.to;
  return sa(n) ? t ? t(n) : null : n;
}, Tx = {
  name: "Teleport",
  __isTeleport: !0,
  process(e, t, n, a, r, i, o, l, s, d) {
    const {
      mc: u,
      pc: f,
      pbc: _,
      o: { insert: g, querySelector: v, createText: w, createComment: b }
    } = d, p = Jd(t.props);
    let { shapeFlag: y, children: S, dynamicChildren: E } = t;
    if (e == null) {
      const C = t.el = w(""), B = t.anchor = w("");
      g(C, n, a), g(B, n, a);
      const O = (T, P) => {
        y & 16 && (r && r.isCE && (r.ce._teleportTarget = T), u(
          S,
          T,
          P,
          r,
          i,
          o,
          l,
          s
        ));
      }, D = () => {
        const T = t.target = Ey(t.props, v), P = Ex(T, t, w, g);
        T && (o !== "svg" && Jk(T) ? o = "svg" : o !== "mathml" && Xk(T) && (o = "mathml"), p || (O(T, P), Wh(t, !1)));
      };
      p && (O(n, B), Wh(t, !0)), Qk(t.props) ? (t.el.__isMounted = !1, Vr(() => {
        D(), delete t.el.__isMounted;
      }, i)) : D();
    } else {
      if (Qk(t.props) && e.el.__isMounted === !1) {
        Vr(() => {
          Tx.process(
            e,
            t,
            n,
            a,
            r,
            i,
            o,
            l,
            s,
            d
          );
        }, i);
        return;
      }
      t.el = e.el, t.targetStart = e.targetStart;
      const C = t.anchor = e.anchor, B = t.target = e.target, O = t.targetAnchor = e.targetAnchor, D = Jd(e.props), T = D ? n : B, P = D ? C : O;
      if (o === "svg" || Jk(B) ? o = "svg" : (o === "mathml" || Xk(B)) && (o = "mathml"), E ? (_(
        e.dynamicChildren,
        E,
        T,
        r,
        i,
        o,
        l
      ), vw(e, t, !0)) : s || f(
        e,
        t,
        T,
        P,
        r,
        i,
        o,
        l,
        !1
      ), p)
        D ? t.props && e.props && t.props.to !== e.props.to && (t.props.to = e.props.to) : bh(
          t,
          n,
          C,
          d,
          1
        );
      else if ((t.props && t.props.to) !== (e.props && e.props.to)) {
        const I = t.target = Ey(
          t.props,
          v
        );
        I && bh(
          t,
          I,
          null,
          d,
          0
        );
      } else D && bh(
        t,
        B,
        O,
        d,
        1
      );
      Wh(t, p);
    }
  },
  remove(e, t, n, { um: a, o: { remove: r } }, i) {
    const {
      shapeFlag: o,
      children: l,
      anchor: s,
      targetStart: d,
      targetAnchor: u,
      target: f,
      props: _
    } = e;
    if (f && (r(d), r(u)), i && r(s), o & 16) {
      const g = i || !Jd(_);
      for (let v = 0; v < l.length; v++) {
        const w = l[v];
        a(
          w,
          t,
          n,
          g,
          !!w.dynamicChildren
        );
      }
    }
  },
  move: bh,
  hydrate: OF
};
function bh(e, t, n, { o: { insert: a }, m: r }, i = 2) {
  i === 0 && a(e.targetAnchor, t, n);
  const { el: o, anchor: l, shapeFlag: s, children: d, props: u } = e, f = i === 2;
  if (f && a(o, t, n), (!f || Jd(u)) && s & 16)
    for (let _ = 0; _ < d.length; _++)
      r(
        d[_],
        t,
        n,
        2
      );
  f && a(l, t, n);
}
function OF(e, t, n, a, r, i, {
  o: { nextSibling: o, parentNode: l, querySelector: s, insert: d, createText: u }
}, f) {
  const _ = t.target = Ey(
    t.props,
    s
  );
  if (_) {
    const g = Jd(t.props), v = _._lpa || _.firstChild;
    if (t.shapeFlag & 16)
      if (g)
        t.anchor = f(
          o(e),
          t,
          l(e),
          n,
          a,
          r,
          i
        ), t.targetStart = v, t.targetAnchor = v && o(v);
      else {
        t.anchor = o(e);
        let w = v;
        for (; w; ) {
          if (w && w.nodeType === 8) {
            if (w.data === "teleport start anchor")
              t.targetStart = w;
            else if (w.data === "teleport anchor") {
              t.targetAnchor = w, _._lpa = t.targetAnchor && o(t.targetAnchor);
              break;
            }
          }
          w = o(w);
        }
        t.targetAnchor || Ex(_, t, u, d), f(
          v && o(v),
          t,
          _,
          n,
          a,
          r,
          i
        );
      }
    Wh(t, g);
  }
  return t.anchor && o(t.anchor);
}
const Ix = Tx;
function Wh(e, t) {
  const n = e.ctx;
  if (n && n.ut) {
    let a, r;
    for (t ? (a = e.el, r = e.anchor) : (a = e.targetStart, r = e.targetAnchor); a && a !== r; )
      a.nodeType === 1 && a.setAttribute("data-v-owner", n.uid), a = a.nextSibling;
    n.ut();
  }
}
function Ex(e, t, n, a) {
  const r = t.targetStart = n(""), i = t.targetAnchor = n("");
  return r[Ax] = i, e && (a(r, e), a(i, e)), i;
}
const Ps = Symbol("_leaveCb"), wh = Symbol("_enterCb");
function Px() {
  const e = {
    isMounted: !1,
    isLeaving: !1,
    isUnmounting: !1,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  return nn(() => {
    e.isMounted = !0;
  }), Ga(() => {
    e.isUnmounting = !0;
  }), e;
}
const xi = [Function, Array], Ox = {
  mode: String,
  appear: Boolean,
  persisted: Boolean,
  // enter
  onBeforeEnter: xi,
  onEnter: xi,
  onAfterEnter: xi,
  onEnterCancelled: xi,
  // leave
  onBeforeLeave: xi,
  onLeave: xi,
  onAfterLeave: xi,
  onLeaveCancelled: xi,
  // appear
  onBeforeAppear: xi,
  onAppear: xi,
  onAfterAppear: xi,
  onAppearCancelled: xi
}, Dx = (e) => {
  const t = e.subTree;
  return t.component ? Dx(t.component) : t;
}, DF = {
  name: "BaseTransition",
  props: Ox,
  setup(e, { slots: t }) {
    const n = cs(), a = Px();
    return () => {
      const r = t.default && cw(t.default(), !0);
      if (!r || !r.length)
        return;
      const i = Bx(r), o = Ot(e), { mode: l } = o;
      if (a.isLeaving)
        return xg(i);
      const s = Zk(i);
      if (!s)
        return xg(i);
      let d = uf(
        s,
        o,
        a,
        n,
        // #11061, ensure enterHooks is fresh after clone
        (f) => d = f
      );
      s.type !== cr && Ql(s, d);
      let u = n.subTree && Zk(n.subTree);
      if (u && u.type !== cr && !Bl(s, u) && Dx(n).type !== cr) {
        let f = uf(
          u,
          o,
          a,
          n
        );
        if (Ql(u, f), l === "out-in" && s.type !== cr)
          return a.isLeaving = !0, f.afterLeave = () => {
            a.isLeaving = !1, n.job.flags & 8 || n.update(), delete f.afterLeave, u = void 0;
          }, xg(i);
        l === "in-out" && s.type !== cr ? f.delayLeave = (_, g, v) => {
          const w = Vx(
            a,
            u
          );
          w[String(u.key)] = u, _[Ps] = () => {
            g(), _[Ps] = void 0, delete d.delayedLeave, u = void 0;
          }, d.delayedLeave = () => {
            v(), delete d.delayedLeave, u = void 0;
          };
        } : u = void 0;
      } else u && (u = void 0);
      return i;
    };
  }
};
function Bx(e) {
  let t = e[0];
  if (e.length > 1) {
    for (const n of e)
      if (n.type !== cr) {
        t = n;
        break;
      }
  }
  return t;
}
const BF = DF;
function Vx(e, t) {
  const { leavingVNodes: n } = e;
  let a = n.get(t.type);
  return a || (a = /* @__PURE__ */ Object.create(null), n.set(t.type, a)), a;
}
function uf(e, t, n, a, r) {
  const {
    appear: i,
    mode: o,
    persisted: l = !1,
    onBeforeEnter: s,
    onEnter: d,
    onAfterEnter: u,
    onEnterCancelled: f,
    onBeforeLeave: _,
    onLeave: g,
    onAfterLeave: v,
    onLeaveCancelled: w,
    onBeforeAppear: b,
    onAppear: p,
    onAfterAppear: y,
    onAppearCancelled: S
  } = t, E = String(e.key), C = Vx(n, e), B = (T, P) => {
    T && zi(
      T,
      a,
      9,
      P
    );
  }, O = (T, P) => {
    const I = P[1];
    B(T, P), Lt(T) ? T.every((M) => M.length <= 1) && I() : T.length <= 1 && I();
  }, D = {
    mode: o,
    persisted: l,
    beforeEnter(T) {
      let P = s;
      if (!n.isMounted)
        if (i)
          P = b || s;
        else
          return;
      T[Ps] && T[Ps](
        !0
        /* cancelled */
      );
      const I = C[E];
      I && Bl(e, I) && I.el[Ps] && I.el[Ps](), B(P, [T]);
    },
    enter(T) {
      let P = d, I = u, M = f;
      if (!n.isMounted)
        if (i)
          P = p || d, I = y || u, M = S || f;
        else
          return;
      let V = !1;
      const N = T[wh] = (q) => {
        V || (V = !0, q ? B(M, [T]) : B(I, [T]), D.delayedLeave && D.delayedLeave(), T[wh] = void 0);
      };
      P ? O(P, [T, N]) : N();
    },
    leave(T, P) {
      const I = String(e.key);
      if (T[wh] && T[wh](
        !0
        /* cancelled */
      ), n.isUnmounting)
        return P();
      B(_, [T]);
      let M = !1;
      const V = T[Ps] = (N) => {
        M || (M = !0, P(), N ? B(w, [T]) : B(v, [T]), T[Ps] = void 0, C[I] === e && delete C[I]);
      };
      C[I] = e, g ? O(g, [T, V]) : V();
    },
    clone(T) {
      const P = uf(
        T,
        t,
        n,
        a,
        r
      );
      return r && r(P), P;
    }
  };
  return D;
}
function xg(e) {
  if (ep(e))
    return e = es(e), e.children = null, e;
}
function Zk(e) {
  if (!ep(e))
    return xx(e.type) && e.children ? Bx(e.children) : e;
  if (e.component)
    return e.component.subTree;
  const { shapeFlag: t, children: n } = e;
  if (n) {
    if (t & 16)
      return n[0];
    if (t & 32 && Kt(n.default))
      return n.default();
  }
}
function Ql(e, t) {
  e.shapeFlag & 6 && e.component ? (e.transition = t, Ql(e.component.subTree, t)) : e.shapeFlag & 128 ? (e.ssContent.transition = t.clone(e.ssContent), e.ssFallback.transition = t.clone(e.ssFallback)) : e.transition = t;
}
function cw(e, t = !1, n) {
  let a = [], r = 0;
  for (let i = 0; i < e.length; i++) {
    let o = e[i];
    const l = n == null ? o.key : String(n) + String(o.key != null ? o.key : i);
    o.type === Qe ? (o.patchFlag & 128 && r++, a = a.concat(
      cw(o.children, t, l)
    )) : (t || o.type !== cr) && a.push(l != null ? es(o, { key: l }) : o);
  }
  if (r > 1)
    for (let i = 0; i < a.length; i++)
      a[i].patchFlag = -2;
  return a;
}
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function Ha(e, t) {
  return Kt(e) ? (
    // #8236: extend call and options.name access are considered side-effects
    // by Rollup, so we have to wrap it in a pure-annotated IIFE.
    Ka({ name: e.name }, t, { setup: e })
  ) : e;
}
function $r() {
  const e = cs();
  return e ? (e.appContext.config.idPrefix || "v") + "-" + e.ids[0] + e.ids[1]++ : "";
}
function Mx(e) {
  e.ids = [e.ids[0] + e.ids[2]++ + "-", 0, 0];
}
function Xd(e, t, n, a, r = !1) {
  if (Lt(e)) {
    e.forEach(
      (v, w) => Xd(
        v,
        t && (Lt(t) ? t[w] : t),
        n,
        a,
        r
      )
    );
    return;
  }
  if (du(a) && !r) {
    a.shapeFlag & 512 && a.type.__asyncResolved && a.component.subTree.component && Xd(e, t, n, a.component.subTree);
    return;
  }
  const i = a.shapeFlag & 4 ? ap(a.component) : a.el, o = r ? null : i, { i: l, r: s } = e, d = t && t.r, u = l.refs === Fn ? l.refs = {} : l.refs, f = l.setupState, _ = Ot(f), g = f === Fn ? () => !1 : (v) => Cn(_, v);
  if (d != null && d !== s && (sa(d) ? (u[d] = null, g(d) && (f[d] = null)) : va(d) && (d.value = null)), Kt(s))
    Mf(s, l, 12, [o, u]);
  else {
    const v = sa(s), w = va(s);
    if (v || w) {
      const b = () => {
        if (e.f) {
          const p = v ? g(s) ? f[s] : u[s] : s.value;
          r ? Lt(p) && Zb(p, i) : Lt(p) ? p.includes(i) || p.push(i) : v ? (u[s] = [i], g(s) && (f[s] = u[s])) : (s.value = [i], e.k && (u[e.k] = s.value));
        } else v ? (u[s] = o, g(s) && (f[s] = o)) : w && (s.value = o, e.k && (u[e.k] = o));
      };
      o ? (b.id = -1, Vr(b, n)) : b();
    }
  }
}
J_().requestIdleCallback;
J_().cancelIdleCallback;
const du = (e) => !!e.type.__asyncLoader, ep = (e) => e.type.__isKeepAlive;
function Rx(e, t) {
  Lx(e, "a", t);
}
function uw(e, t) {
  Lx(e, "da", t);
}
function Lx(e, t, n = ur) {
  const a = e.__wdc || (e.__wdc = () => {
    let r = n;
    for (; r; ) {
      if (r.isDeactivated)
        return;
      r = r.parent;
    }
    return e();
  });
  if (tp(t, a, n), n) {
    let r = n.parent;
    for (; r && r.parent; )
      ep(r.parent.vnode) && VF(a, t, n, r), r = r.parent;
  }
}
function VF(e, t, n, a) {
  const r = tp(
    t,
    e,
    a,
    !0
    /* prepend */
  );
  di(() => {
    Zb(a[t], r);
  }, n);
}
function tp(e, t, n = ur, a = !1) {
  if (n) {
    const r = n[e] || (n[e] = []), i = t.__weh || (t.__weh = (...o) => {
      Xo();
      const l = Lf(n), s = zi(t, n, e, o);
      return l(), Zo(), s;
    });
    return a ? r.unshift(i) : r.push(i), i;
  }
}
const ls = (e) => (t, n = ur) => {
  (!ff || e === "sp") && tp(e, (...a) => t(...a), n);
}, qu = ls("bm"), nn = ls("m"), dw = ls(
  "bu"
), fw = ls("u"), Ga = ls(
  "bum"
), di = ls("um"), MF = ls(
  "sp"
), RF = ls("rtg"), LF = ls("rtc");
function FF(e, t = ur) {
  tp("ec", e, t);
}
const mw = "components", NF = "directives";
function J(e, t) {
  return hw(mw, e, !0, t) || e;
}
const Fx = Symbol.for("v-ndc");
function Hu(e) {
  return sa(e) ? hw(mw, e, !1) || e : e || Fx;
}
function UF(e) {
  return hw(NF, e);
}
function hw(e, t, n = !0, a = !1) {
  const r = tr || ur;
  if (r) {
    const i = r.type;
    if (e === mw) {
      const l = CN(
        i,
        !1
      );
      if (l && (l === t || l === Nr(t) || l === So(Nr(t))))
        return i;
    }
    const o = (
      // local registration
      // check instance[type] first which is resolved for options API
      eS(r[e] || i[e], t) || // global registration
      eS(r.appContext[e], t)
    );
    return !o && a ? i : o;
  }
}
function eS(e, t) {
  return e && (e[t] || e[Nr(t)] || e[So(Nr(t))]);
}
function un(e, t, n, a) {
  let r;
  const i = n, o = Lt(e);
  if (o || sa(e)) {
    const l = o && cu(e);
    let s = !1, d = !1;
    l && (s = !Ii(e), d = qs(e), e = X_(e)), r = new Array(e.length);
    for (let u = 0, f = e.length; u < f; u++)
      r[u] = t(
        s ? d ? s_(sr(e[u])) : sr(e[u]) : e[u],
        u,
        void 0,
        i
      );
  } else if (typeof e == "number") {
    r = new Array(e);
    for (let l = 0; l < e; l++)
      r[l] = t(l + 1, l, void 0, i);
  } else if (qn(e))
    if (e[Symbol.iterator])
      r = Array.from(
        e,
        (l, s) => t(l, s, void 0, i)
      );
    else {
      const l = Object.keys(e);
      r = new Array(l.length);
      for (let s = 0, d = l.length; s < d; s++) {
        const u = l[s];
        r[s] = t(e[u], u, s, i);
      }
    }
  else
    r = [];
  return r;
}
function dr(e, t) {
  for (let n = 0; n < t.length; n++) {
    const a = t[n];
    if (Lt(a))
      for (let r = 0; r < a.length; r++)
        e[a[r].name] = a[r].fn;
    else a && (e[a.name] = a.key ? (...r) => {
      const i = a.fn(...r);
      return i && (i.key = a.key), i;
    } : a.fn);
  }
  return e;
}
function bt(e, t, n = {}, a, r) {
  if (tr.ce || tr.parent && du(tr.parent) && tr.parent.ce)
    return t !== "default" && (n.name = t), ne(), Fe(
      Qe,
      null,
      [h("slot", n, a)],
      64
    );
  let i = e[t];
  i && i._c && (i._d = !1), ne();
  const o = i && Nx(i(n)), l = n.key || // slot content array of a dynamic conditional slot may have a branch
  // key attached in the `createSlots` helper, respect that
  o && o.key, s = Fe(
    Qe,
    {
      key: (l && !ss(l) ? l : `_${t}`) + // #7256 force differentiate fallback content from actual content
      ""
    },
    o || [],
    o && e._ === 1 ? 64 : -2
  );
  return !r && s.scopeId && (s.slotScopeIds = [s.scopeId + "-s"]), i && i._c && (i._d = !0), s;
}
function Nx(e) {
  return e.some((t) => wu(t) ? !(t.type === cr || t.type === Qe && !Nx(t.children)) : !0) ? e : null;
}
const Py = (e) => e ? rT(e) ? ap(e) : Py(e.parent) : null, Zd = (
  // Move PURE marker to new line to workaround compiler discarding it
  // due to type annotation
  /* @__PURE__ */ Ka(/* @__PURE__ */ Object.create(null), {
    $: (e) => e,
    $el: (e) => e.vnode.el,
    $data: (e) => e.data,
    $props: (e) => e.props,
    $attrs: (e) => e.attrs,
    $slots: (e) => e.slots,
    $refs: (e) => e.refs,
    $parent: (e) => Py(e.parent),
    $root: (e) => Py(e.root),
    $host: (e) => e.ce,
    $emit: (e) => e.emit,
    $options: (e) => qx(e),
    $forceUpdate: (e) => e.f || (e.f = () => {
      lw(e.update);
    }),
    $nextTick: (e) => e.n || (e.n = Vt.bind(e.proxy)),
    $watch: (e) => lN.bind(e)
  })
), Tg = (e, t) => e !== Fn && !e.__isScriptSetup && Cn(e, t), $F = {
  get({ _: e }, t) {
    if (t === "__v_skip")
      return !0;
    const { ctx: n, setupState: a, data: r, props: i, accessCache: o, type: l, appContext: s } = e;
    let d;
    if (t[0] !== "$") {
      const g = o[t];
      if (g !== void 0)
        switch (g) {
          case 1:
            return a[t];
          case 2:
            return r[t];
          case 4:
            return n[t];
          case 3:
            return i[t];
        }
      else {
        if (Tg(a, t))
          return o[t] = 1, a[t];
        if (r !== Fn && Cn(r, t))
          return o[t] = 2, r[t];
        if (
          // only cache other properties when instance has declared (thus stable)
          // props
          (d = e.propsOptions[0]) && Cn(d, t)
        )
          return o[t] = 3, i[t];
        if (n !== Fn && Cn(n, t))
          return o[t] = 4, n[t];
        Oy && (o[t] = 0);
      }
    }
    const u = Zd[t];
    let f, _;
    if (u)
      return t === "$attrs" && wr(e.attrs, "get", ""), u(e);
    if (
      // css module (injected by vue-loader)
      (f = l.__cssModules) && (f = f[t])
    )
      return f;
    if (n !== Fn && Cn(n, t))
      return o[t] = 4, n[t];
    if (
      // global properties
      _ = s.config.globalProperties, Cn(_, t)
    )
      return _[t];
  },
  set({ _: e }, t, n) {
    const { data: a, setupState: r, ctx: i } = e;
    return Tg(r, t) ? (r[t] = n, !0) : a !== Fn && Cn(a, t) ? (a[t] = n, !0) : Cn(e.props, t) || t[0] === "$" && t.slice(1) in e ? !1 : (i[t] = n, !0);
  },
  has({
    _: { data: e, setupState: t, accessCache: n, ctx: a, appContext: r, propsOptions: i }
  }, o) {
    let l;
    return !!n[o] || e !== Fn && Cn(e, o) || Tg(t, o) || (l = i[0]) && Cn(l, o) || Cn(a, o) || Cn(Zd, o) || Cn(r.config.globalProperties, o);
  },
  defineProperty(e, t, n) {
    return n.get != null ? e._.accessCache[t] = 0 : Cn(n, "value") && this.set(e, t, n.value, null), Reflect.defineProperty(e, t, n);
  }
};
function lc() {
  return Ux().slots;
}
function qF() {
  return Ux().attrs;
}
function Ux() {
  const e = cs();
  return e.setupContext || (e.setupContext = oT(e));
}
function tS(e) {
  return Lt(e) ? e.reduce(
    (t, n) => (t[n] = null, t),
    {}
  ) : e;
}
let Oy = !0;
function HF(e) {
  const t = qx(e), n = e.proxy, a = e.ctx;
  Oy = !1, t.beforeCreate && nS(t.beforeCreate, e, "bc");
  const {
    // state
    data: r,
    computed: i,
    methods: o,
    watch: l,
    provide: s,
    inject: d,
    // lifecycle
    created: u,
    beforeMount: f,
    mounted: _,
    beforeUpdate: g,
    updated: v,
    activated: w,
    deactivated: b,
    beforeDestroy: p,
    beforeUnmount: y,
    destroyed: S,
    unmounted: E,
    render: C,
    renderTracked: B,
    renderTriggered: O,
    errorCaptured: D,
    serverPrefetch: T,
    // public API
    expose: P,
    inheritAttrs: I,
    // assets
    components: M,
    directives: V,
    filters: N
  } = t;
  if (d && zF(d, a, null), o)
    for (const ee in o) {
      const de = o[ee];
      Kt(de) && (a[ee] = de.bind(n));
    }
  if (r) {
    const ee = r.call(n, n);
    qn(ee) && (e.data = oa(ee));
  }
  if (Oy = !0, i)
    for (const ee in i) {
      const de = i[ee], Z = Kt(de) ? de.bind(n, n) : Kt(de.get) ? de.get.bind(n, n) : po, F = !Kt(de) && Kt(de.set) ? de.set.bind(n) : po, Y = z({
        get: Z,
        set: F
      });
      Object.defineProperty(a, ee, {
        enumerable: !0,
        configurable: !0,
        get: () => Y.value,
        set: (se) => Y.value = se
      });
    }
  if (l)
    for (const ee in l)
      $x(l[ee], a, n, ee);
  if (s) {
    const ee = Kt(s) ? s.call(n) : s;
    Reflect.ownKeys(ee).forEach((de) => {
      Nn(de, ee[de]);
    });
  }
  u && nS(u, e, "c");
  function j(ee, de) {
    Lt(de) ? de.forEach((Z) => ee(Z.bind(n))) : de && ee(de.bind(n));
  }
  if (j(qu, f), j(nn, _), j(dw, g), j(fw, v), j(Rx, w), j(uw, b), j(FF, D), j(LF, B), j(RF, O), j(Ga, y), j(di, E), j(MF, T), Lt(P))
    if (P.length) {
      const ee = e.exposed || (e.exposed = {});
      P.forEach((de) => {
        Object.defineProperty(ee, de, {
          get: () => n[de],
          set: (Z) => n[de] = Z
        });
      });
    } else e.exposed || (e.exposed = {});
  C && e.render === po && (e.render = C), I != null && (e.inheritAttrs = I), M && (e.components = M), V && (e.directives = V), T && Mx(e);
}
function zF(e, t, n = po) {
  Lt(e) && (e = Dy(e));
  for (const a in e) {
    const r = e[a];
    let i;
    qn(r) ? "default" in r ? i = Gt(
      r.from || a,
      r.default,
      !0
    ) : i = Gt(r.from || a) : i = Gt(r), va(i) ? Object.defineProperty(t, a, {
      enumerable: !0,
      configurable: !0,
      get: () => i.value,
      set: (o) => i.value = o
    }) : t[a] = i;
  }
}
function nS(e, t, n) {
  zi(
    Lt(e) ? e.map((a) => a.bind(t.proxy)) : e.bind(t.proxy),
    t,
    n
  );
}
function $x(e, t, n, a) {
  let r = a.includes(".") ? Zx(n, a) : () => n[a];
  if (sa(e)) {
    const i = t[e];
    Kt(i) && nt(r, i);
  } else if (Kt(e))
    nt(r, e.bind(n));
  else if (qn(e))
    if (Lt(e))
      e.forEach((i) => $x(i, t, n, a));
    else {
      const i = Kt(e.handler) ? e.handler.bind(n) : t[e.handler];
      Kt(i) && nt(r, i, e);
    }
}
function qx(e) {
  const t = e.type, { mixins: n, extends: a } = t, {
    mixins: r,
    optionsCache: i,
    config: { optionMergeStrategies: o }
  } = e.appContext, l = i.get(t);
  let s;
  return l ? s = l : !r.length && !n && !a ? s = t : (s = {}, r.length && r.forEach(
    (d) => d_(s, d, o, !0)
  ), d_(s, t, o)), qn(t) && i.set(t, s), s;
}
function d_(e, t, n, a = !1) {
  const { mixins: r, extends: i } = t;
  i && d_(e, i, n, !0), r && r.forEach(
    (o) => d_(e, o, n, !0)
  );
  for (const o in t)
    if (!(a && o === "expose")) {
      const l = WF[o] || n && n[o];
      e[o] = l ? l(e[o], t[o]) : t[o];
    }
  return e;
}
const WF = {
  data: aS,
  props: rS,
  emits: rS,
  // objects
  methods: qd,
  computed: qd,
  // lifecycle
  beforeCreate: Dr,
  created: Dr,
  beforeMount: Dr,
  mounted: Dr,
  beforeUpdate: Dr,
  updated: Dr,
  beforeDestroy: Dr,
  beforeUnmount: Dr,
  destroyed: Dr,
  unmounted: Dr,
  activated: Dr,
  deactivated: Dr,
  errorCaptured: Dr,
  serverPrefetch: Dr,
  // assets
  components: qd,
  directives: qd,
  // watch
  watch: YF,
  // provide / inject
  provide: aS,
  inject: jF
};
function aS(e, t) {
  return t ? e ? function() {
    return Ka(
      Kt(e) ? e.call(this, this) : e,
      Kt(t) ? t.call(this, this) : t
    );
  } : t : e;
}
function jF(e, t) {
  return qd(Dy(e), Dy(t));
}
function Dy(e) {
  if (Lt(e)) {
    const t = {};
    for (let n = 0; n < e.length; n++)
      t[e[n]] = e[n];
    return t;
  }
  return e;
}
function Dr(e, t) {
  return e ? [...new Set([].concat(e, t))] : t;
}
function qd(e, t) {
  return e ? Ka(/* @__PURE__ */ Object.create(null), e, t) : t;
}
function rS(e, t) {
  return e ? Lt(e) && Lt(t) ? [.../* @__PURE__ */ new Set([...e, ...t])] : Ka(
    /* @__PURE__ */ Object.create(null),
    tS(e),
    tS(t ?? {})
  ) : t;
}
function YF(e, t) {
  if (!e) return t;
  if (!t) return e;
  const n = Ka(/* @__PURE__ */ Object.create(null), e);
  for (const a in t)
    n[a] = Dr(e[a], t[a]);
  return n;
}
function Hx() {
  return {
    app: null,
    config: {
      isNativeTag: qL,
      performance: !1,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let KF = 0;
function GF(e, t) {
  return function(a, r = null) {
    Kt(a) || (a = Ka({}, a)), r != null && !qn(r) && (r = null);
    const i = Hx(), o = /* @__PURE__ */ new WeakSet(), l = [];
    let s = !1;
    const d = i.app = {
      _uid: KF++,
      _component: a,
      _props: r,
      _container: null,
      _context: i,
      _instance: null,
      version: xN,
      get config() {
        return i.config;
      },
      set config(u) {
      },
      use(u, ...f) {
        return o.has(u) || (u && Kt(u.install) ? (o.add(u), u.install(d, ...f)) : Kt(u) && (o.add(u), u(d, ...f))), d;
      },
      mixin(u) {
        return i.mixins.includes(u) || i.mixins.push(u), d;
      },
      component(u, f) {
        return f ? (i.components[u] = f, d) : i.components[u];
      },
      directive(u, f) {
        return f ? (i.directives[u] = f, d) : i.directives[u];
      },
      mount(u, f, _) {
        if (!s) {
          const g = d._ceVNode || h(a, r);
          return g.appContext = i, _ === !0 ? _ = "svg" : _ === !1 && (_ = void 0), e(g, u, _), s = !0, d._container = u, u.__vue_app__ = d, ap(g.component);
        }
      },
      onUnmount(u) {
        l.push(u);
      },
      unmount() {
        s && (zi(
          l,
          d._instance,
          16
        ), e(null, d._container), delete d._container.__vue_app__);
      },
      provide(u, f) {
        return i.provides[u] = f, d;
      },
      runWithContext(u) {
        const f = fu;
        fu = d;
        try {
          return u();
        } finally {
          fu = f;
        }
      }
    };
    return d;
  };
}
let fu = null;
function Nn(e, t) {
  if (ur) {
    let n = ur.provides;
    const a = ur.parent && ur.parent.provides;
    a === n && (n = ur.provides = Object.create(a)), n[e] = t;
  }
}
function Gt(e, t, n = !1) {
  const a = ur || tr;
  if (a || fu) {
    let r = fu ? fu._context.provides : a ? a.parent == null || a.ce ? a.vnode.appContext && a.vnode.appContext.provides : a.parent.provides : void 0;
    if (r && e in r)
      return r[e];
    if (arguments.length > 1)
      return n && Kt(t) ? t.call(a && a.proxy) : t;
  }
}
const zx = {}, Wx = () => Object.create(zx), jx = (e) => Object.getPrototypeOf(e) === zx;
function QF(e, t, n, a = !1) {
  const r = {}, i = Wx();
  e.propsDefaults = /* @__PURE__ */ Object.create(null), Yx(e, t, r, i);
  for (const o in e.propsOptions[0])
    o in r || (r[o] = void 0);
  n ? e.props = a ? r : yF(r) : e.type.props ? e.props = r : e.props = i, e.attrs = i;
}
function JF(e, t, n, a) {
  const {
    props: r,
    attrs: i,
    vnode: { patchFlag: o }
  } = e, l = Ot(r), [s] = e.propsOptions;
  let d = !1;
  if (
    // always force full diff in dev
    // - #1942 if hmr is enabled with sfc component
    // - vite#872 non-sfc component used by sfc component
    (a || o > 0) && !(o & 16)
  ) {
    if (o & 8) {
      const u = e.vnode.dynamicProps;
      for (let f = 0; f < u.length; f++) {
        let _ = u[f];
        if (np(e.emitsOptions, _))
          continue;
        const g = t[_];
        if (s)
          if (Cn(i, _))
            g !== i[_] && (i[_] = g, d = !0);
          else {
            const v = Nr(_);
            r[v] = By(
              s,
              l,
              v,
              g,
              e,
              !1
            );
          }
        else
          g !== i[_] && (i[_] = g, d = !0);
      }
    }
  } else {
    Yx(e, t, r, i) && (d = !0);
    let u;
    for (const f in l)
      (!t || // for camelCase
      !Cn(t, f) && // it's possible the original props was passed in as kebab-case
      // and converted to camelCase (#955)
      ((u = el(f)) === f || !Cn(t, u))) && (s ? n && // for camelCase
      (n[f] !== void 0 || // for kebab-case
      n[u] !== void 0) && (r[f] = By(
        s,
        l,
        f,
        void 0,
        e,
        !0
      )) : delete r[f]);
    if (i !== l)
      for (const f in i)
        (!t || !Cn(t, f)) && (delete i[f], d = !0);
  }
  d && zo(e.attrs, "set", "");
}
function Yx(e, t, n, a) {
  const [r, i] = e.propsOptions;
  let o = !1, l;
  if (t)
    for (let s in t) {
      if (Kd(s))
        continue;
      const d = t[s];
      let u;
      r && Cn(r, u = Nr(s)) ? !i || !i.includes(u) ? n[u] = d : (l || (l = {}))[u] = d : np(e.emitsOptions, s) || (!(s in a) || d !== a[s]) && (a[s] = d, o = !0);
    }
  if (i) {
    const s = Ot(n), d = l || Fn;
    for (let u = 0; u < i.length; u++) {
      const f = i[u];
      n[f] = By(
        r,
        s,
        f,
        d[f],
        e,
        !Cn(d, f)
      );
    }
  }
  return o;
}
function By(e, t, n, a, r, i) {
  const o = e[n];
  if (o != null) {
    const l = Cn(o, "default");
    if (l && a === void 0) {
      const s = o.default;
      if (o.type !== Function && !o.skipFactory && Kt(s)) {
        const { propsDefaults: d } = r;
        if (n in d)
          a = d[n];
        else {
          const u = Lf(r);
          a = d[n] = s.call(
            null,
            t
          ), u();
        }
      } else
        a = s;
      r.ce && r.ce._setProp(n, a);
    }
    o[
      0
      /* shouldCast */
    ] && (i && !l ? a = !1 : o[
      1
      /* shouldCastTrue */
    ] && (a === "" || a === el(n)) && (a = !0));
  }
  return a;
}
const XF = /* @__PURE__ */ new WeakMap();
function Kx(e, t, n = !1) {
  const a = n ? XF : t.propsCache, r = a.get(e);
  if (r)
    return r;
  const i = e.props, o = {}, l = [];
  let s = !1;
  if (!Kt(e)) {
    const u = (f) => {
      s = !0;
      const [_, g] = Kx(f, t, !0);
      Ka(o, _), g && l.push(...g);
    };
    !n && t.mixins.length && t.mixins.forEach(u), e.extends && u(e.extends), e.mixins && e.mixins.forEach(u);
  }
  if (!i && !s)
    return qn(e) && a.set(e, su), su;
  if (Lt(i))
    for (let u = 0; u < i.length; u++) {
      const f = Nr(i[u]);
      iS(f) && (o[f] = Fn);
    }
  else if (i)
    for (const u in i) {
      const f = Nr(u);
      if (iS(f)) {
        const _ = i[u], g = o[f] = Lt(_) || Kt(_) ? { type: _ } : Ka({}, _), v = g.type;
        let w = !1, b = !0;
        if (Lt(v))
          for (let p = 0; p < v.length; ++p) {
            const y = v[p], S = Kt(y) && y.name;
            if (S === "Boolean") {
              w = !0;
              break;
            } else S === "String" && (b = !1);
          }
        else
          w = Kt(v) && v.name === "Boolean";
        g[
          0
          /* shouldCast */
        ] = w, g[
          1
          /* shouldCastTrue */
        ] = b, (w || Cn(g, "default")) && l.push(f);
      }
    }
  const d = [o, l];
  return qn(e) && a.set(e, d), d;
}
function iS(e) {
  return e[0] !== "$" && !Kd(e);
}
const _w = (e) => e[0] === "_" || e === "$stable", pw = (e) => Lt(e) ? e.map(uo) : [uo(e)], ZF = (e, t, n) => {
  if (t._n)
    return t;
  const a = x((...r) => pw(t(...r)), n);
  return a._c = !1, a;
}, Gx = (e, t, n) => {
  const a = e._ctx;
  for (const r in e) {
    if (_w(r)) continue;
    const i = e[r];
    if (Kt(i))
      t[r] = ZF(r, i, a);
    else if (i != null) {
      const o = pw(i);
      t[r] = () => o;
    }
  }
}, Qx = (e, t) => {
  const n = pw(t);
  e.slots.default = () => n;
}, Jx = (e, t, n) => {
  for (const a in t)
    (n || !_w(a)) && (e[a] = t[a]);
}, eN = (e, t, n) => {
  const a = e.slots = Wx();
  if (e.vnode.shapeFlag & 32) {
    const r = t.__;
    r && Cy(a, "__", r, !0);
    const i = t._;
    i ? (Jx(a, t, n), n && Cy(a, "_", i, !0)) : Gx(t, a);
  } else t && Qx(e, t);
}, tN = (e, t, n) => {
  const { vnode: a, slots: r } = e;
  let i = !0, o = Fn;
  if (a.shapeFlag & 32) {
    const l = t._;
    l ? n && l === 1 ? i = !1 : Jx(r, t, n) : (i = !t.$stable, Gx(t, r)), o = t;
  } else t && (Qx(e, t), o = { default: 1 });
  if (i)
    for (const l in r)
      !_w(l) && o[l] == null && delete r[l];
}, Vr = _N;
function nN(e) {
  return aN(e);
}
function aN(e, t) {
  const n = J_();
  n.__VUE__ = !0;
  const {
    insert: a,
    remove: r,
    patchProp: i,
    createElement: o,
    createText: l,
    createComment: s,
    setText: d,
    setElementText: u,
    parentNode: f,
    nextSibling: _,
    setScopeId: g = po,
    insertStaticContent: v
  } = e, w = (te, G, le, K = null, Ce = null, Te = null, ie = void 0, ge = null, Pe = !!G.dynamicChildren) => {
    if (te === G)
      return;
    te && !Bl(te, G) && (K = H(te), se(te, Ce, Te, !0), te = null), G.patchFlag === -2 && (Pe = !1, G.dynamicChildren = null);
    const { type: Ie, ref: Je, shapeFlag: _e } = G;
    switch (Ie) {
      case Rf:
        b(te, G, le, K);
        break;
      case cr:
        p(te, G, le, K);
        break;
      case Eg:
        te == null && y(G, le, K, ie);
        break;
      case Qe:
        M(
          te,
          G,
          le,
          K,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
        break;
      default:
        _e & 1 ? C(
          te,
          G,
          le,
          K,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ) : _e & 6 ? V(
          te,
          G,
          le,
          K,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ) : (_e & 64 || _e & 128) && Ie.process(
          te,
          G,
          le,
          K,
          Ce,
          Te,
          ie,
          ge,
          Pe,
          Re
        );
    }
    Je != null && Ce ? Xd(Je, te && te.ref, Te, G || te, !G) : Je == null && te && te.ref != null && Xd(te.ref, null, Te, te, !0);
  }, b = (te, G, le, K) => {
    if (te == null)
      a(
        G.el = l(G.children),
        le,
        K
      );
    else {
      const Ce = G.el = te.el;
      G.children !== te.children && d(Ce, G.children);
    }
  }, p = (te, G, le, K) => {
    te == null ? a(
      G.el = s(G.children || ""),
      le,
      K
    ) : G.el = te.el;
  }, y = (te, G, le, K) => {
    [te.el, te.anchor] = v(
      te.children,
      G,
      le,
      K,
      te.el,
      te.anchor
    );
  }, S = ({ el: te, anchor: G }, le, K) => {
    let Ce;
    for (; te && te !== G; )
      Ce = _(te), a(te, le, K), te = Ce;
    a(G, le, K);
  }, E = ({ el: te, anchor: G }) => {
    let le;
    for (; te && te !== G; )
      le = _(te), r(te), te = le;
    r(G);
  }, C = (te, G, le, K, Ce, Te, ie, ge, Pe) => {
    G.type === "svg" ? ie = "svg" : G.type === "math" && (ie = "mathml"), te == null ? B(
      G,
      le,
      K,
      Ce,
      Te,
      ie,
      ge,
      Pe
    ) : T(
      te,
      G,
      Ce,
      Te,
      ie,
      ge,
      Pe
    );
  }, B = (te, G, le, K, Ce, Te, ie, ge) => {
    let Pe, Ie;
    const { props: Je, shapeFlag: _e, transition: $e, dirs: Ze } = te;
    if (Pe = te.el = o(
      te.type,
      Te,
      Je && Je.is,
      Je
    ), _e & 8 ? u(Pe, te.children) : _e & 16 && D(
      te.children,
      Pe,
      null,
      K,
      Ce,
      Ig(te, Te),
      ie,
      ge
    ), Ze && Al(te, null, K, "created"), O(Pe, te, te.scopeId, ie, K), Je) {
      for (const It in Je)
        It !== "value" && !Kd(It) && i(Pe, It, null, Je[It], Te, K);
      "value" in Je && i(Pe, "value", null, Je.value, Te), (Ie = Je.onVnodeBeforeMount) && io(Ie, K, te);
    }
    Ze && Al(te, null, K, "beforeMount");
    const _t = rN(Ce, $e);
    _t && $e.beforeEnter(Pe), a(Pe, G, le), ((Ie = Je && Je.onVnodeMounted) || _t || Ze) && Vr(() => {
      Ie && io(Ie, K, te), _t && $e.enter(Pe), Ze && Al(te, null, K, "mounted");
    }, Ce);
  }, O = (te, G, le, K, Ce) => {
    if (le && g(te, le), K)
      for (let Te = 0; Te < K.length; Te++)
        g(te, K[Te]);
    if (Ce) {
      let Te = Ce.subTree;
      if (G === Te || tT(Te.type) && (Te.ssContent === G || Te.ssFallback === G)) {
        const ie = Ce.vnode;
        O(
          te,
          ie,
          ie.scopeId,
          ie.slotScopeIds,
          Ce.parent
        );
      }
    }
  }, D = (te, G, le, K, Ce, Te, ie, ge, Pe = 0) => {
    for (let Ie = Pe; Ie < te.length; Ie++) {
      const Je = te[Ie] = ge ? Os(te[Ie]) : uo(te[Ie]);
      w(
        null,
        Je,
        G,
        le,
        K,
        Ce,
        Te,
        ie,
        ge
      );
    }
  }, T = (te, G, le, K, Ce, Te, ie) => {
    const ge = G.el = te.el;
    let { patchFlag: Pe, dynamicChildren: Ie, dirs: Je } = G;
    Pe |= te.patchFlag & 16;
    const _e = te.props || Fn, $e = G.props || Fn;
    let Ze;
    if (le && xl(le, !1), (Ze = $e.onVnodeBeforeUpdate) && io(Ze, le, G, te), Je && Al(G, te, le, "beforeUpdate"), le && xl(le, !0), (_e.innerHTML && $e.innerHTML == null || _e.textContent && $e.textContent == null) && u(ge, ""), Ie ? P(
      te.dynamicChildren,
      Ie,
      ge,
      le,
      K,
      Ig(G, Ce),
      Te
    ) : ie || de(
      te,
      G,
      ge,
      null,
      le,
      K,
      Ig(G, Ce),
      Te,
      !1
    ), Pe > 0) {
      if (Pe & 16)
        I(ge, _e, $e, le, Ce);
      else if (Pe & 2 && _e.class !== $e.class && i(ge, "class", null, $e.class, Ce), Pe & 4 && i(ge, "style", _e.style, $e.style, Ce), Pe & 8) {
        const _t = G.dynamicProps;
        for (let It = 0; It < _t.length; It++) {
          const rt = _t[It], Dt = _e[rt], en = $e[rt];
          (en !== Dt || rt === "value") && i(ge, rt, Dt, en, Ce, le);
        }
      }
      Pe & 1 && te.children !== G.children && u(ge, G.children);
    } else !ie && Ie == null && I(ge, _e, $e, le, Ce);
    ((Ze = $e.onVnodeUpdated) || Je) && Vr(() => {
      Ze && io(Ze, le, G, te), Je && Al(G, te, le, "updated");
    }, K);
  }, P = (te, G, le, K, Ce, Te, ie) => {
    for (let ge = 0; ge < G.length; ge++) {
      const Pe = te[ge], Ie = G[ge], Je = (
        // oldVNode may be an errored async setup() component inside Suspense
        // which will not have a mounted element
        Pe.el && // - In the case of a Fragment, we need to provide the actual parent
        // of the Fragment itself so it can move its children.
        (Pe.type === Qe || // - In the case of different nodes, there is going to be a replacement
        // which also requires the correct parent container
        !Bl(Pe, Ie) || // - In the case of a component, it could contain anything.
        Pe.shapeFlag & 198) ? f(Pe.el) : (
          // In other cases, the parent container is not actually used so we
          // just pass the block element here to avoid a DOM parentNode call.
          le
        )
      );
      w(
        Pe,
        Ie,
        Je,
        null,
        K,
        Ce,
        Te,
        ie,
        !0
      );
    }
  }, I = (te, G, le, K, Ce) => {
    if (G !== le) {
      if (G !== Fn)
        for (const Te in G)
          !Kd(Te) && !(Te in le) && i(
            te,
            Te,
            G[Te],
            null,
            Ce,
            K
          );
      for (const Te in le) {
        if (Kd(Te)) continue;
        const ie = le[Te], ge = G[Te];
        ie !== ge && Te !== "value" && i(te, Te, ge, ie, Ce, K);
      }
      "value" in le && i(te, "value", G.value, le.value, Ce);
    }
  }, M = (te, G, le, K, Ce, Te, ie, ge, Pe) => {
    const Ie = G.el = te ? te.el : l(""), Je = G.anchor = te ? te.anchor : l("");
    let { patchFlag: _e, dynamicChildren: $e, slotScopeIds: Ze } = G;
    Ze && (ge = ge ? ge.concat(Ze) : Ze), te == null ? (a(Ie, le, K), a(Je, le, K), D(
      // #10007
      // such fragment like `<></>` will be compiled into
      // a fragment which doesn't have a children.
      // In this case fallback to an empty array
      G.children || [],
      le,
      Je,
      Ce,
      Te,
      ie,
      ge,
      Pe
    )) : _e > 0 && _e & 64 && $e && // #2715 the previous fragment could've been a BAILed one as a result
    // of renderSlot() with no valid children
    te.dynamicChildren ? (P(
      te.dynamicChildren,
      $e,
      le,
      Ce,
      Te,
      ie,
      ge
    ), // #2080 if the stable fragment has a key, it's a <template v-for> that may
    //  get moved around. Make sure all root level vnodes inherit el.
    // #2134 or if it's a component root, it may also get moved around
    // as the component is being moved.
    (G.key != null || Ce && G === Ce.subTree) && vw(
      te,
      G,
      !0
      /* shallow */
    )) : de(
      te,
      G,
      le,
      Je,
      Ce,
      Te,
      ie,
      ge,
      Pe
    );
  }, V = (te, G, le, K, Ce, Te, ie, ge, Pe) => {
    G.slotScopeIds = ge, te == null ? G.shapeFlag & 512 ? Ce.ctx.activate(
      G,
      le,
      K,
      ie,
      Pe
    ) : N(
      G,
      le,
      K,
      Ce,
      Te,
      ie,
      Pe
    ) : q(te, G, Pe);
  }, N = (te, G, le, K, Ce, Te, ie) => {
    const ge = te.component = bN(
      te,
      K,
      Ce
    );
    if (ep(te) && (ge.ctx.renderer = Re), wN(ge, !1, ie), ge.asyncDep) {
      if (Ce && Ce.registerDep(ge, j, ie), !te.el) {
        const Pe = ge.subTree = h(cr);
        p(null, Pe, G, le);
      }
    } else
      j(
        ge,
        te,
        G,
        le,
        Ce,
        Te,
        ie
      );
  }, q = (te, G, le) => {
    const K = G.component = te.component;
    if (mN(te, G, le))
      if (K.asyncDep && !K.asyncResolved) {
        ee(K, G, le);
        return;
      } else
        K.next = G, K.update();
    else
      G.el = te.el, K.vnode = G;
  }, j = (te, G, le, K, Ce, Te, ie) => {
    const ge = () => {
      if (te.isMounted) {
        let { next: _e, bu: $e, u: Ze, parent: _t, vnode: It } = te;
        {
          const na = Xx(te);
          if (na) {
            _e && (_e.el = It.el, ee(te, _e, ie)), na.asyncDep.then(() => {
              te.isUnmounted || ge();
            });
            return;
          }
        }
        let rt = _e, Dt;
        xl(te, !1), _e ? (_e.el = It.el, ee(te, _e, ie)) : _e = It, $e && zh($e), (Dt = _e.props && _e.props.onVnodeBeforeUpdate) && io(Dt, _t, _e, It), xl(te, !0);
        const en = sS(te), zn = te.subTree;
        te.subTree = en, w(
          zn,
          en,
          // parent may have changed if it's in a teleport
          f(zn.el),
          // anchor may have changed if it's in a fragment
          H(zn),
          te,
          Ce,
          Te
        ), _e.el = en.el, rt === null && hN(te, en.el), Ze && Vr(Ze, Ce), (Dt = _e.props && _e.props.onVnodeUpdated) && Vr(
          () => io(Dt, _t, _e, It),
          Ce
        );
      } else {
        let _e;
        const { el: $e, props: Ze } = G, { bm: _t, m: It, parent: rt, root: Dt, type: en } = te, zn = du(G);
        xl(te, !1), _t && zh(_t), !zn && (_e = Ze && Ze.onVnodeBeforeMount) && io(_e, rt, G), xl(te, !0);
        {
          Dt.ce && // @ts-expect-error _def is private
          Dt.ce._def.shadowRoot !== !1 && Dt.ce._injectChildStyle(en);
          const na = te.subTree = sS(te);
          w(
            null,
            na,
            le,
            K,
            te,
            Ce,
            Te
          ), G.el = na.el;
        }
        if (It && Vr(It, Ce), !zn && (_e = Ze && Ze.onVnodeMounted)) {
          const na = G;
          Vr(
            () => io(_e, rt, na),
            Ce
          );
        }
        (G.shapeFlag & 256 || rt && du(rt.vnode) && rt.vnode.shapeFlag & 256) && te.a && Vr(te.a, Ce), te.isMounted = !0, G = le = K = null;
      }
    };
    te.scope.on();
    const Pe = te.effect = new nx(ge);
    te.scope.off();
    const Ie = te.update = Pe.run.bind(Pe), Je = te.job = Pe.runIfDirty.bind(Pe);
    Je.i = te, Je.id = te.uid, Pe.scheduler = () => lw(Je), xl(te, !0), Ie();
  }, ee = (te, G, le) => {
    G.component = te;
    const K = te.vnode.props;
    te.vnode = G, te.next = null, JF(te, G.props, K, le), tN(te, G.children, le), Xo(), Gk(te), Zo();
  }, de = (te, G, le, K, Ce, Te, ie, ge, Pe = !1) => {
    const Ie = te && te.children, Je = te ? te.shapeFlag : 0, _e = G.children, { patchFlag: $e, shapeFlag: Ze } = G;
    if ($e > 0) {
      if ($e & 128) {
        F(
          Ie,
          _e,
          le,
          K,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
        return;
      } else if ($e & 256) {
        Z(
          Ie,
          _e,
          le,
          K,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
        return;
      }
    }
    Ze & 8 ? (Je & 16 && pe(Ie, Ce, Te), _e !== Ie && u(le, _e)) : Je & 16 ? Ze & 16 ? F(
      Ie,
      _e,
      le,
      K,
      Ce,
      Te,
      ie,
      ge,
      Pe
    ) : pe(Ie, Ce, Te, !0) : (Je & 8 && u(le, ""), Ze & 16 && D(
      _e,
      le,
      K,
      Ce,
      Te,
      ie,
      ge,
      Pe
    ));
  }, Z = (te, G, le, K, Ce, Te, ie, ge, Pe) => {
    te = te || su, G = G || su;
    const Ie = te.length, Je = G.length, _e = Math.min(Ie, Je);
    let $e;
    for ($e = 0; $e < _e; $e++) {
      const Ze = G[$e] = Pe ? Os(G[$e]) : uo(G[$e]);
      w(
        te[$e],
        Ze,
        le,
        null,
        Ce,
        Te,
        ie,
        ge,
        Pe
      );
    }
    Ie > Je ? pe(
      te,
      Ce,
      Te,
      !0,
      !1,
      _e
    ) : D(
      G,
      le,
      K,
      Ce,
      Te,
      ie,
      ge,
      Pe,
      _e
    );
  }, F = (te, G, le, K, Ce, Te, ie, ge, Pe) => {
    let Ie = 0;
    const Je = G.length;
    let _e = te.length - 1, $e = Je - 1;
    for (; Ie <= _e && Ie <= $e; ) {
      const Ze = te[Ie], _t = G[Ie] = Pe ? Os(G[Ie]) : uo(G[Ie]);
      if (Bl(Ze, _t))
        w(
          Ze,
          _t,
          le,
          null,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
      else
        break;
      Ie++;
    }
    for (; Ie <= _e && Ie <= $e; ) {
      const Ze = te[_e], _t = G[$e] = Pe ? Os(G[$e]) : uo(G[$e]);
      if (Bl(Ze, _t))
        w(
          Ze,
          _t,
          le,
          null,
          Ce,
          Te,
          ie,
          ge,
          Pe
        );
      else
        break;
      _e--, $e--;
    }
    if (Ie > _e) {
      if (Ie <= $e) {
        const Ze = $e + 1, _t = Ze < Je ? G[Ze].el : K;
        for (; Ie <= $e; )
          w(
            null,
            G[Ie] = Pe ? Os(G[Ie]) : uo(G[Ie]),
            le,
            _t,
            Ce,
            Te,
            ie,
            ge,
            Pe
          ), Ie++;
      }
    } else if (Ie > $e)
      for (; Ie <= _e; )
        se(te[Ie], Ce, Te, !0), Ie++;
    else {
      const Ze = Ie, _t = Ie, It = /* @__PURE__ */ new Map();
      for (Ie = _t; Ie <= $e; Ie++) {
        const Wn = G[Ie] = Pe ? Os(G[Ie]) : uo(G[Ie]);
        Wn.key != null && It.set(Wn.key, Ie);
      }
      let rt, Dt = 0;
      const en = $e - _t + 1;
      let zn = !1, na = 0;
      const Na = new Array(en);
      for (Ie = 0; Ie < en; Ie++) Na[Ie] = 0;
      for (Ie = Ze; Ie <= _e; Ie++) {
        const Wn = te[Ie];
        if (Dt >= en) {
          se(Wn, Ce, Te, !0);
          continue;
        }
        let Vn;
        if (Wn.key != null)
          Vn = It.get(Wn.key);
        else
          for (rt = _t; rt <= $e; rt++)
            if (Na[rt - _t] === 0 && Bl(Wn, G[rt])) {
              Vn = rt;
              break;
            }
        Vn === void 0 ? se(Wn, Ce, Te, !0) : (Na[Vn - _t] = Ie + 1, Vn >= na ? na = Vn : zn = !0, w(
          Wn,
          G[Vn],
          le,
          null,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ), Dt++);
      }
      const ya = zn ? iN(Na) : su;
      for (rt = ya.length - 1, Ie = en - 1; Ie >= 0; Ie--) {
        const Wn = _t + Ie, Vn = G[Wn], Ja = Wn + 1 < Je ? G[Wn + 1].el : K;
        Na[Ie] === 0 ? w(
          null,
          Vn,
          le,
          Ja,
          Ce,
          Te,
          ie,
          ge,
          Pe
        ) : zn && (rt < 0 || Ie !== ya[rt] ? Y(Vn, le, Ja, 2) : rt--);
      }
    }
  }, Y = (te, G, le, K, Ce = null) => {
    const { el: Te, type: ie, transition: ge, children: Pe, shapeFlag: Ie } = te;
    if (Ie & 6) {
      Y(te.component.subTree, G, le, K);
      return;
    }
    if (Ie & 128) {
      te.suspense.move(G, le, K);
      return;
    }
    if (Ie & 64) {
      ie.move(te, G, le, Re);
      return;
    }
    if (ie === Qe) {
      a(Te, G, le);
      for (let _e = 0; _e < Pe.length; _e++)
        Y(Pe[_e], G, le, K);
      a(te.anchor, G, le);
      return;
    }
    if (ie === Eg) {
      S(te, G, le);
      return;
    }
    if (K !== 2 && Ie & 1 && ge)
      if (K === 0)
        ge.beforeEnter(Te), a(Te, G, le), Vr(() => ge.enter(Te), Ce);
      else {
        const { leave: _e, delayLeave: $e, afterLeave: Ze } = ge, _t = () => {
          te.ctx.isUnmounted ? r(Te) : a(Te, G, le);
        }, It = () => {
          _e(Te, () => {
            _t(), Ze && Ze();
          });
        };
        $e ? $e(Te, _t, It) : It();
      }
    else
      a(Te, G, le);
  }, se = (te, G, le, K = !1, Ce = !1) => {
    const {
      type: Te,
      props: ie,
      ref: ge,
      children: Pe,
      dynamicChildren: Ie,
      shapeFlag: Je,
      patchFlag: _e,
      dirs: $e,
      cacheIndex: Ze
    } = te;
    if (_e === -2 && (Ce = !1), ge != null && (Xo(), Xd(ge, null, le, te, !0), Zo()), Ze != null && (G.renderCache[Ze] = void 0), Je & 256) {
      G.ctx.deactivate(te);
      return;
    }
    const _t = Je & 1 && $e, It = !du(te);
    let rt;
    if (It && (rt = ie && ie.onVnodeBeforeUnmount) && io(rt, G, te), Je & 6)
      ve(te.component, le, K);
    else {
      if (Je & 128) {
        te.suspense.unmount(le, K);
        return;
      }
      _t && Al(te, null, G, "beforeUnmount"), Je & 64 ? te.type.remove(
        te,
        G,
        le,
        Re,
        K
      ) : Ie && // #5154
      // when v-once is used inside a block, setBlockTracking(-1) marks the
      // parent block with hasOnce: true
      // so that it doesn't take the fast path during unmount - otherwise
      // components nested in v-once are never unmounted.
      !Ie.hasOnce && // #1153: fast path should not be taken for non-stable (v-for) fragments
      (Te !== Qe || _e > 0 && _e & 64) ? pe(
        Ie,
        G,
        le,
        !1,
        !0
      ) : (Te === Qe && _e & 384 || !Ce && Je & 16) && pe(Pe, G, le), K && X(te);
    }
    (It && (rt = ie && ie.onVnodeUnmounted) || _t) && Vr(() => {
      rt && io(rt, G, te), _t && Al(te, null, G, "unmounted");
    }, le);
  }, X = (te) => {
    const { type: G, el: le, anchor: K, transition: Ce } = te;
    if (G === Qe) {
      he(le, K);
      return;
    }
    if (G === Eg) {
      E(te);
      return;
    }
    const Te = () => {
      r(le), Ce && !Ce.persisted && Ce.afterLeave && Ce.afterLeave();
    };
    if (te.shapeFlag & 1 && Ce && !Ce.persisted) {
      const { leave: ie, delayLeave: ge } = Ce, Pe = () => ie(le, Te);
      ge ? ge(te.el, Te, Pe) : Pe();
    } else
      Te();
  }, he = (te, G) => {
    let le;
    for (; te !== G; )
      le = _(te), r(te), te = le;
    r(G);
  }, ve = (te, G, le) => {
    const {
      bum: K,
      scope: Ce,
      job: Te,
      subTree: ie,
      um: ge,
      m: Pe,
      a: Ie,
      parent: Je,
      slots: { __: _e }
    } = te;
    oS(Pe), oS(Ie), K && zh(K), Je && Lt(_e) && _e.forEach(($e) => {
      Je.renderCache[$e] = void 0;
    }), Ce.stop(), Te && (Te.flags |= 8, se(ie, te, G, le)), ge && Vr(ge, G), Vr(() => {
      te.isUnmounted = !0;
    }, G), G && G.pendingBranch && !G.isUnmounted && te.asyncDep && !te.asyncResolved && te.suspenseId === G.pendingId && (G.deps--, G.deps === 0 && G.resolve());
  }, pe = (te, G, le, K = !1, Ce = !1, Te = 0) => {
    for (let ie = Te; ie < te.length; ie++)
      se(te[ie], G, le, K, Ce);
  }, H = (te) => {
    if (te.shapeFlag & 6)
      return H(te.component.subTree);
    if (te.shapeFlag & 128)
      return te.suspense.next();
    const G = _(te.anchor || te.el), le = G && G[Ax];
    return le ? _(le) : G;
  };
  let we = !1;
  const Me = (te, G, le) => {
    te == null ? G._vnode && se(G._vnode, null, null, !0) : w(
      G._vnode || null,
      te,
      G,
      null,
      null,
      null,
      le
    ), G._vnode = te, we || (we = !0, Gk(), kx(), we = !1);
  }, Re = {
    p: w,
    um: se,
    m: Y,
    r: X,
    mt: N,
    mc: D,
    pc: de,
    pbc: P,
    n: H,
    o: e
  };
  return {
    render: Me,
    hydrate: void 0,
    createApp: GF(Me)
  };
}
function Ig({ type: e, props: t }, n) {
  return n === "svg" && e === "foreignObject" || n === "mathml" && e === "annotation-xml" && t && t.encoding && t.encoding.includes("html") ? void 0 : n;
}
function xl({ effect: e, job: t }, n) {
  n ? (e.flags |= 32, t.flags |= 4) : (e.flags &= -33, t.flags &= -5);
}
function rN(e, t) {
  return (!e || e && !e.pendingBranch) && t && !t.persisted;
}
function vw(e, t, n = !1) {
  const a = e.children, r = t.children;
  if (Lt(a) && Lt(r))
    for (let i = 0; i < a.length; i++) {
      const o = a[i];
      let l = r[i];
      l.shapeFlag & 1 && !l.dynamicChildren && ((l.patchFlag <= 0 || l.patchFlag === 32) && (l = r[i] = Os(r[i]), l.el = o.el), !n && l.patchFlag !== -2 && vw(o, l)), l.type === Rf && (l.el = o.el), l.type === cr && !l.el && (l.el = o.el);
    }
}
function iN(e) {
  const t = e.slice(), n = [0];
  let a, r, i, o, l;
  const s = e.length;
  for (a = 0; a < s; a++) {
    const d = e[a];
    if (d !== 0) {
      if (r = n[n.length - 1], e[r] < d) {
        t[a] = r, n.push(a);
        continue;
      }
      for (i = 0, o = n.length - 1; i < o; )
        l = i + o >> 1, e[n[l]] < d ? i = l + 1 : o = l;
      d < e[n[i]] && (i > 0 && (t[a] = n[i - 1]), n[i] = a);
    }
  }
  for (i = n.length, o = n[i - 1]; i-- > 0; )
    n[i] = o, o = t[o];
  return n;
}
function Xx(e) {
  const t = e.subTree.component;
  if (t)
    return t.asyncDep && !t.asyncResolved ? t : Xx(t);
}
function oS(e) {
  if (e)
    for (let t = 0; t < e.length; t++)
      e[t].flags |= 8;
}
const oN = Symbol.for("v-scx"), sN = () => Gt(oN);
function ea(e, t) {
  return gw(e, null, t);
}
function nt(e, t, n) {
  return gw(e, t, n);
}
function gw(e, t, n = Fn) {
  const { immediate: a, deep: r, flush: i, once: o } = n, l = Ka({}, n), s = t && a || !t && i !== "post";
  let d;
  if (ff) {
    if (i === "sync") {
      const g = sN();
      d = g.__watcherHandles || (g.__watcherHandles = []);
    } else if (!s) {
      const g = () => {
      };
      return g.stop = po, g.resume = po, g.pause = po, g;
    }
  }
  const u = ur;
  l.call = (g, v, w) => zi(g, u, v, w);
  let f = !1;
  i === "post" ? l.scheduler = (g) => {
    Vr(g, u && u.suspense);
  } : i !== "sync" && (f = !0, l.scheduler = (g, v) => {
    v ? g() : lw(g);
  }), l.augmentJob = (g) => {
    t && (g.flags |= 4), f && (g.flags |= 2, u && (g.id = u.uid, g.i = u));
  };
  const _ = TF(e, t, l);
  return ff && (d ? d.push(_) : s && _()), _;
}
function lN(e, t, n) {
  const a = this.proxy, r = sa(e) ? e.includes(".") ? Zx(a, e) : () => a[e] : e.bind(a, a);
  let i;
  Kt(t) ? i = t : (i = t.handler, n = t);
  const o = Lf(this), l = gw(r, i.bind(a), n);
  return o(), l;
}
function Zx(e, t) {
  const n = t.split(".");
  return () => {
    let a = e;
    for (let r = 0; r < n.length && a; r++)
      a = a[n[r]];
    return a;
  };
}
const cN = (e, t) => t === "modelValue" || t === "model-value" ? e.modelModifiers : e[`${t}Modifiers`] || e[`${Nr(t)}Modifiers`] || e[`${el(t)}Modifiers`];
function uN(e, t, ...n) {
  if (e.isUnmounted) return;
  const a = e.vnode.props || Fn;
  let r = n;
  const i = t.startsWith("update:"), o = i && cN(a, t.slice(7));
  o && (o.trim && (r = n.map((u) => sa(u) ? u.trim() : u)), o.number && (r = n.map(Ay)));
  let l, s = a[l = wg(t)] || // also try camelCase event handler (#2249)
  a[l = wg(Nr(t))];
  !s && i && (s = a[l = wg(el(t))]), s && zi(
    s,
    e,
    6,
    r
  );
  const d = a[l + "Once"];
  if (d) {
    if (!e.emitted)
      e.emitted = {};
    else if (e.emitted[l])
      return;
    e.emitted[l] = !0, zi(
      d,
      e,
      6,
      r
    );
  }
}
function eT(e, t, n = !1) {
  const a = t.emitsCache, r = a.get(e);
  if (r !== void 0)
    return r;
  const i = e.emits;
  let o = {}, l = !1;
  if (!Kt(e)) {
    const s = (d) => {
      const u = eT(d, t, !0);
      u && (l = !0, Ka(o, u));
    };
    !n && t.mixins.length && t.mixins.forEach(s), e.extends && s(e.extends), e.mixins && e.mixins.forEach(s);
  }
  return !i && !l ? (qn(e) && a.set(e, null), null) : (Lt(i) ? i.forEach((s) => o[s] = null) : Ka(o, i), qn(e) && a.set(e, o), o);
}
function np(e, t) {
  return !e || !K_(t) ? !1 : (t = t.slice(2).replace(/Once$/, ""), Cn(e, t[0].toLowerCase() + t.slice(1)) || Cn(e, el(t)) || Cn(e, t));
}
function sS(e) {
  const {
    type: t,
    vnode: n,
    proxy: a,
    withProxy: r,
    propsOptions: [i],
    slots: o,
    attrs: l,
    emit: s,
    render: d,
    renderCache: u,
    props: f,
    data: _,
    setupState: g,
    ctx: v,
    inheritAttrs: w
  } = e, b = u_(e);
  let p, y;
  try {
    if (n.shapeFlag & 4) {
      const E = r || a, C = E;
      p = uo(
        d.call(
          C,
          E,
          u,
          f,
          g,
          _,
          v
        )
      ), y = l;
    } else {
      const E = t;
      p = uo(
        E.length > 1 ? E(
          f,
          { attrs: l, slots: o, emit: s }
        ) : E(
          f,
          null
        )
      ), y = t.props ? l : dN(l);
    }
  } catch (E) {
    ef.length = 0, Z_(E, e, 1), p = h(cr);
  }
  let S = p;
  if (y && w !== !1) {
    const E = Object.keys(y), { shapeFlag: C } = S;
    E.length && C & 7 && (i && E.some(Xb) && (y = fN(
      y,
      i
    )), S = es(S, y, !1, !0));
  }
  return n.dirs && (S = es(S, null, !1, !0), S.dirs = S.dirs ? S.dirs.concat(n.dirs) : n.dirs), n.transition && Ql(S, n.transition), p = S, u_(b), p;
}
const dN = (e) => {
  let t;
  for (const n in e)
    (n === "class" || n === "style" || K_(n)) && ((t || (t = {}))[n] = e[n]);
  return t;
}, fN = (e, t) => {
  const n = {};
  for (const a in e)
    (!Xb(a) || !(a.slice(9) in t)) && (n[a] = e[a]);
  return n;
};
function mN(e, t, n) {
  const { props: a, children: r, component: i } = e, { props: o, children: l, patchFlag: s } = t, d = i.emitsOptions;
  if (t.dirs || t.transition)
    return !0;
  if (n && s >= 0) {
    if (s & 1024)
      return !0;
    if (s & 16)
      return a ? lS(a, o, d) : !!o;
    if (s & 8) {
      const u = t.dynamicProps;
      for (let f = 0; f < u.length; f++) {
        const _ = u[f];
        if (o[_] !== a[_] && !np(d, _))
          return !0;
      }
    }
  } else
    return (r || l) && (!l || !l.$stable) ? !0 : a === o ? !1 : a ? o ? lS(a, o, d) : !0 : !!o;
  return !1;
}
function lS(e, t, n) {
  const a = Object.keys(t);
  if (a.length !== Object.keys(e).length)
    return !0;
  for (let r = 0; r < a.length; r++) {
    const i = a[r];
    if (t[i] !== e[i] && !np(n, i))
      return !0;
  }
  return !1;
}
function hN({ vnode: e, parent: t }, n) {
  for (; t; ) {
    const a = t.subTree;
    if (a.suspense && a.suspense.activeBranch === e && (a.el = e.el), a === e)
      (e = t.vnode).el = n, t = t.parent;
    else
      break;
  }
}
const tT = (e) => e.__isSuspense;
function _N(e, t) {
  t && t.pendingBranch ? Lt(e) ? t.effects.push(...e) : t.effects.push(e) : PF(e);
}
const Qe = Symbol.for("v-fgt"), Rf = Symbol.for("v-txt"), cr = Symbol.for("v-cmt"), Eg = Symbol.for("v-stc"), ef = [];
let oi = null;
function ne(e = !1) {
  ef.push(oi = e ? null : []);
}
function pN() {
  ef.pop(), oi = ef[ef.length - 1] || null;
}
let df = 1;
function cS(e, t = !1) {
  df += e, e < 0 && oi && t && (oi.hasOnce = !0);
}
function nT(e) {
  return e.dynamicChildren = df > 0 ? oi || su : null, pN(), df > 0 && oi && oi.push(e), e;
}
function Be(e, t, n, a, r, i) {
  return nT(
    A(
      e,
      t,
      n,
      a,
      r,
      i,
      !0
    )
  );
}
function Fe(e, t, n, a, r) {
  return nT(
    h(
      e,
      t,
      n,
      a,
      r,
      !0
    )
  );
}
function wu(e) {
  return e ? e.__v_isVNode === !0 : !1;
}
function Bl(e, t) {
  return e.type === t.type && e.key === t.key;
}
const aT = ({ key: e }) => e ?? null, jh = ({
  ref: e,
  ref_key: t,
  ref_for: n
}) => (typeof e == "number" && (e = "" + e), e != null ? sa(e) || va(e) || Kt(e) ? { i: tr, r: e, k: t, f: !!n } : e : null);
function A(e, t = null, n = null, a = 0, r = null, i = e === Qe ? 0 : 1, o = !1, l = !1) {
  const s = {
    __v_isVNode: !0,
    __v_skip: !0,
    type: e,
    props: t,
    key: t && aT(t),
    ref: t && jh(t),
    scopeId: Cx,
    slotScopeIds: null,
    children: n,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetStart: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag: i,
    patchFlag: a,
    dynamicProps: r,
    dynamicChildren: null,
    appContext: null,
    ctx: tr
  };
  return l ? (yw(s, n), i & 128 && e.normalize(s)) : n && (s.shapeFlag |= sa(n) ? 8 : 16), df > 0 && // avoid a block node from tracking itself
  !o && // has current parent block
  oi && // presence of a patch flag indicates this node needs patching on updates.
  // component nodes also should always be patched, because even if the
  // component doesn't need to update, it needs to persist the instance on to
  // the next vnode so that it can be properly unmounted later.
  (s.patchFlag > 0 || i & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
  // vnode should not be considered dynamic due to handler caching.
  s.patchFlag !== 32 && oi.push(s), s;
}
const h = vN;
function vN(e, t = null, n = null, a = 0, r = null, i = !1) {
  if ((!e || e === Fx) && (e = cr), wu(e)) {
    const l = es(
      e,
      t,
      !0
      /* mergeRef: true */
    );
    return n && yw(l, n), df > 0 && !i && oi && (l.shapeFlag & 6 ? oi[oi.indexOf(e)] = l : oi.push(l)), l.patchFlag = -2, l;
  }
  if (AN(e) && (e = e.__vccOpts), t) {
    t = Ca(t);
    let { class: l, style: s } = t;
    l && !sa(l) && (t.class = Ee(l)), qn(s) && (sw(s) && !Lt(s) && (s = Ka({}, s)), t.style = Xe(s));
  }
  const o = sa(e) ? 1 : tT(e) ? 128 : xx(e) ? 64 : qn(e) ? 4 : Kt(e) ? 2 : 0;
  return A(
    e,
    t,
    n,
    a,
    r,
    o,
    i,
    !0
  );
}
function Ca(e) {
  return e ? sw(e) || jx(e) ? Ka({}, e) : e : null;
}
function es(e, t, n = !1, a = !1) {
  const { props: r, ref: i, patchFlag: o, children: l, transition: s } = e, d = t ? He(r || {}, t) : r, u = {
    __v_isVNode: !0,
    __v_skip: !0,
    type: e.type,
    props: d,
    key: d && aT(d),
    ref: t && t.ref ? (
      // #2078 in the case of <component :is="vnode" ref="extra"/>
      // if the vnode itself already has a ref, cloneVNode will need to merge
      // the refs so the single vnode can be set on multiple refs
      n && i ? Lt(i) ? i.concat(jh(t)) : [i, jh(t)] : jh(t)
    ) : i,
    scopeId: e.scopeId,
    slotScopeIds: e.slotScopeIds,
    children: l,
    target: e.target,
    targetStart: e.targetStart,
    targetAnchor: e.targetAnchor,
    staticCount: e.staticCount,
    shapeFlag: e.shapeFlag,
    // if the vnode is cloned with extra props, we can no longer assume its
    // existing patch flag to be reliable and need to add the FULL_PROPS flag.
    // note: preserve flag for fragments since they use the flag for children
    // fast paths only.
    patchFlag: t && e.type !== Qe ? o === -1 ? 16 : o | 16 : o,
    dynamicProps: e.dynamicProps,
    dynamicChildren: e.dynamicChildren,
    appContext: e.appContext,
    dirs: e.dirs,
    transition: s,
    // These should technically only be non-null on mounted VNodes. However,
    // they *should* be copied for kept-alive vnodes. So we just always copy
    // them since them being non-null during a mount doesn't affect the logic as
    // they will simply be overwritten.
    component: e.component,
    suspense: e.suspense,
    ssContent: e.ssContent && es(e.ssContent),
    ssFallback: e.ssFallback && es(e.ssFallback),
    el: e.el,
    anchor: e.anchor,
    ctx: e.ctx,
    ce: e.ce
  };
  return s && a && Ql(
    u,
    s.clone(u)
  ), u;
}
function ae(e = " ", t = 0) {
  return h(Rf, null, e, t);
}
function ke(e = "", t = !1) {
  return t ? (ne(), Fe(cr, null, e)) : h(cr, null, e);
}
function uo(e) {
  return e == null || typeof e == "boolean" ? h(cr) : Lt(e) ? h(
    Qe,
    null,
    // #3666, avoid reference pollution when reusing vnode
    e.slice()
  ) : wu(e) ? Os(e) : h(Rf, null, String(e));
}
function Os(e) {
  return e.el === null && e.patchFlag !== -1 || e.memo ? e : es(e);
}
function yw(e, t) {
  let n = 0;
  const { shapeFlag: a } = e;
  if (t == null)
    t = null;
  else if (Lt(t))
    n = 16;
  else if (typeof t == "object")
    if (a & 65) {
      const r = t.default;
      r && (r._c && (r._d = !1), yw(e, r()), r._c && (r._d = !0));
      return;
    } else {
      n = 32;
      const r = t._;
      !r && !jx(t) ? t._ctx = tr : r === 3 && tr && (tr.slots._ === 1 ? t._ = 1 : (t._ = 2, e.patchFlag |= 1024));
    }
  else Kt(t) ? (t = { default: t, _ctx: tr }, n = 32) : (t = String(t), a & 64 ? (n = 16, t = [ae(t)]) : n = 8);
  e.children = t, e.shapeFlag |= n;
}
function He(...e) {
  const t = {};
  for (let n = 0; n < e.length; n++) {
    const a = e[n];
    for (const r in a)
      if (r === "class")
        t.class !== a.class && (t.class = Ee([t.class, a.class]));
      else if (r === "style")
        t.style = Xe([t.style, a.style]);
      else if (K_(r)) {
        const i = t[r], o = a[r];
        o && i !== o && !(Lt(i) && i.includes(o)) && (t[r] = i ? [].concat(i, o) : o);
      } else r !== "" && (t[r] = a[r]);
  }
  return t;
}
function io(e, t, n, a = null) {
  zi(e, t, 7, [
    n,
    a
  ]);
}
const gN = Hx();
let yN = 0;
function bN(e, t, n) {
  const a = e.type, r = (t ? t.appContext : e.appContext) || gN, i = {
    uid: yN++,
    vnode: e,
    type: a,
    parent: t,
    appContext: r,
    root: null,
    // to be immediately set
    next: null,
    subTree: null,
    // will be set synchronously right after creation
    effect: null,
    update: null,
    // will be set synchronously right after creation
    job: null,
    scope: new ex(
      !0
      /* detached */
    ),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: t ? t.provides : Object.create(r.provides),
    ids: t ? t.ids : ["", 0, 0],
    accessCache: null,
    renderCache: [],
    // local resolved assets
    components: null,
    directives: null,
    // resolved props and emits options
    propsOptions: Kx(a, r),
    emitsOptions: eT(a, r),
    // emit
    emit: null,
    // to be set immediately
    emitted: null,
    // props default value
    propsDefaults: Fn,
    // inheritAttrs
    inheritAttrs: a.inheritAttrs,
    // state
    ctx: Fn,
    data: Fn,
    props: Fn,
    attrs: Fn,
    slots: Fn,
    refs: Fn,
    setupState: Fn,
    setupContext: null,
    // suspense related
    suspense: n,
    suspenseId: n ? n.pendingId : 0,
    asyncDep: null,
    asyncResolved: !1,
    // lifecycle hooks
    // not using enums here because it results in computed properties
    isMounted: !1,
    isUnmounted: !1,
    isDeactivated: !1,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  return i.ctx = { _: i }, i.root = t ? t.root : i, i.emit = uN.bind(null, i), e.ce && e.ce(i), i;
}
let ur = null;
const cs = () => ur || tr;
let f_, Vy;
{
  const e = J_(), t = (n, a) => {
    let r;
    return (r = e[n]) || (r = e[n] = []), r.push(a), (i) => {
      r.length > 1 ? r.forEach((o) => o(i)) : r[0](i);
    };
  };
  f_ = t(
    "__VUE_INSTANCE_SETTERS__",
    (n) => ur = n
  ), Vy = t(
    "__VUE_SSR_SETTERS__",
    (n) => ff = n
  );
}
const Lf = (e) => {
  const t = ur;
  return f_(e), e.scope.on(), () => {
    e.scope.off(), f_(t);
  };
}, uS = () => {
  ur && ur.scope.off(), f_(null);
};
function rT(e) {
  return e.vnode.shapeFlag & 4;
}
let ff = !1;
function wN(e, t = !1, n = !1) {
  t && Vy(t);
  const { props: a, children: r } = e.vnode, i = rT(e);
  QF(e, a, i, t), eN(e, r, n || t);
  const o = i ? kN(e, t) : void 0;
  return t && Vy(!1), o;
}
function kN(e, t) {
  const n = e.type;
  e.accessCache = /* @__PURE__ */ Object.create(null), e.proxy = new Proxy(e.ctx, $F);
  const { setup: a } = n;
  if (a) {
    Xo();
    const r = e.setupContext = a.length > 1 ? oT(e) : null, i = Lf(e), o = Mf(
      a,
      e,
      0,
      [
        e.props,
        r
      ]
    ), l = KA(o);
    if (Zo(), i(), (l || e.sp) && !du(e) && Mx(e), l) {
      if (o.then(uS, uS), t)
        return o.then((s) => {
          dS(e, s);
        }).catch((s) => {
          Z_(s, e, 0);
        });
      e.asyncDep = o;
    } else
      dS(e, o);
  } else
    iT(e);
}
function dS(e, t, n) {
  Kt(t) ? e.type.__ssrInlineRender ? e.ssrRender = t : e.render = t : qn(t) && (e.setupState = gx(t)), iT(e);
}
function iT(e, t, n) {
  const a = e.type;
  e.render || (e.render = a.render || po);
  {
    const r = Lf(e);
    Xo();
    try {
      HF(e);
    } finally {
      Zo(), r();
    }
  }
}
const SN = {
  get(e, t) {
    return wr(e, "get", ""), e[t];
  }
};
function oT(e) {
  const t = (n) => {
    e.exposed = n || {};
  };
  return {
    attrs: new Proxy(e.attrs, SN),
    slots: e.slots,
    emit: e.emit,
    expose: t
  };
}
function ap(e) {
  return e.exposed ? e.exposeProxy || (e.exposeProxy = new Proxy(gx(px(e.exposed)), {
    get(t, n) {
      if (n in t)
        return t[n];
      if (n in Zd)
        return Zd[n](e);
    },
    has(t, n) {
      return n in t || n in Zd;
    }
  })) : e.proxy;
}
function CN(e, t = !0) {
  return Kt(e) ? e.displayName || e.name : e.name || t && e.__name;
}
function AN(e) {
  return Kt(e) && "__vccOpts" in e;
}
const z = (e, t) => AF(e, t, ff);
function Co(e, t, n) {
  const a = arguments.length;
  return a === 2 ? qn(t) && !Lt(t) ? wu(t) ? h(e, null, [t]) : h(e, t) : h(e, null, t) : (a > 3 ? n = Array.prototype.slice.call(arguments, 2) : a === 3 && wu(n) && (n = [n]), h(e, t, n));
}
const xN = "3.5.17";
/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let My;
const fS = typeof window < "u" && window.trustedTypes;
if (fS)
  try {
    My = /* @__PURE__ */ fS.createPolicy("vue", {
      createHTML: (e) => e
    });
  } catch {
  }
const sT = My ? (e) => My.createHTML(e) : (e) => e, TN = "http://www.w3.org/2000/svg", IN = "http://www.w3.org/1998/Math/MathML", qo = typeof document < "u" ? document : null, mS = qo && /* @__PURE__ */ qo.createElement("template"), EN = {
  insert: (e, t, n) => {
    t.insertBefore(e, n || null);
  },
  remove: (e) => {
    const t = e.parentNode;
    t && t.removeChild(e);
  },
  createElement: (e, t, n, a) => {
    const r = t === "svg" ? qo.createElementNS(TN, e) : t === "mathml" ? qo.createElementNS(IN, e) : n ? qo.createElement(e, { is: n }) : qo.createElement(e);
    return e === "select" && a && a.multiple != null && r.setAttribute("multiple", a.multiple), r;
  },
  createText: (e) => qo.createTextNode(e),
  createComment: (e) => qo.createComment(e),
  setText: (e, t) => {
    e.nodeValue = t;
  },
  setElementText: (e, t) => {
    e.textContent = t;
  },
  parentNode: (e) => e.parentNode,
  nextSibling: (e) => e.nextSibling,
  querySelector: (e) => qo.querySelector(e),
  setScopeId(e, t) {
    e.setAttribute(t, "");
  },
  // __UNSAFE__
  // Reason: innerHTML.
  // Static content here can only come from compiled templates.
  // As long as the user only uses trusted templates, this is safe.
  insertStaticContent(e, t, n, a, r, i) {
    const o = n ? n.previousSibling : t.lastChild;
    if (r && (r === i || r.nextSibling))
      for (; t.insertBefore(r.cloneNode(!0), n), !(r === i || !(r = r.nextSibling)); )
        ;
    else {
      mS.innerHTML = sT(
        a === "svg" ? `<svg>${e}</svg>` : a === "mathml" ? `<math>${e}</math>` : e
      );
      const l = mS.content;
      if (a === "svg" || a === "mathml") {
        const s = l.firstChild;
        for (; s.firstChild; )
          l.appendChild(s.firstChild);
        l.removeChild(s);
      }
      t.insertBefore(l, n);
    }
    return [
      // first
      o ? o.nextSibling : t.firstChild,
      // last
      n ? n.previousSibling : t.lastChild
    ];
  }
}, Cs = "transition", Vd = "animation", ku = Symbol("_vtc"), lT = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: !0
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
}, cT = /* @__PURE__ */ Ka(
  {},
  Ox,
  lT
), PN = (e) => (e.displayName = "Transition", e.props = cT, e), Ur = /* @__PURE__ */ PN(
  (e, { slots: t }) => Co(BF, uT(e), t)
), Tl = (e, t = []) => {
  Lt(e) ? e.forEach((n) => n(...t)) : e && e(...t);
}, hS = (e) => e ? Lt(e) ? e.some((t) => t.length > 1) : e.length > 1 : !1;
function uT(e) {
  const t = {};
  for (const M in e)
    M in lT || (t[M] = e[M]);
  if (e.css === !1)
    return t;
  const {
    name: n = "v",
    type: a,
    duration: r,
    enterFromClass: i = `${n}-enter-from`,
    enterActiveClass: o = `${n}-enter-active`,
    enterToClass: l = `${n}-enter-to`,
    appearFromClass: s = i,
    appearActiveClass: d = o,
    appearToClass: u = l,
    leaveFromClass: f = `${n}-leave-from`,
    leaveActiveClass: _ = `${n}-leave-active`,
    leaveToClass: g = `${n}-leave-to`
  } = e, v = ON(r), w = v && v[0], b = v && v[1], {
    onBeforeEnter: p,
    onEnter: y,
    onEnterCancelled: S,
    onLeave: E,
    onLeaveCancelled: C,
    onBeforeAppear: B = p,
    onAppear: O = y,
    onAppearCancelled: D = S
  } = t, T = (M, V, N, q) => {
    M._enterCancelled = q, Ts(M, V ? u : l), Ts(M, V ? d : o), N && N();
  }, P = (M, V) => {
    M._isLeaving = !1, Ts(M, f), Ts(M, g), Ts(M, _), V && V();
  }, I = (M) => (V, N) => {
    const q = M ? O : y, j = () => T(V, M, N);
    Tl(q, [V, j]), _S(() => {
      Ts(V, M ? s : i), so(V, M ? u : l), hS(q) || pS(V, a, w, j);
    });
  };
  return Ka(t, {
    onBeforeEnter(M) {
      Tl(p, [M]), so(M, i), so(M, o);
    },
    onBeforeAppear(M) {
      Tl(B, [M]), so(M, s), so(M, d);
    },
    onEnter: I(!1),
    onAppear: I(!0),
    onLeave(M, V) {
      M._isLeaving = !0;
      const N = () => P(M, V);
      so(M, f), M._enterCancelled ? (so(M, _), Ry()) : (Ry(), so(M, _)), _S(() => {
        M._isLeaving && (Ts(M, f), so(M, g), hS(E) || pS(M, a, b, N));
      }), Tl(E, [M, N]);
    },
    onEnterCancelled(M) {
      T(M, !1, void 0, !0), Tl(S, [M]);
    },
    onAppearCancelled(M) {
      T(M, !0, void 0, !0), Tl(D, [M]);
    },
    onLeaveCancelled(M) {
      P(M), Tl(C, [M]);
    }
  });
}
function ON(e) {
  if (e == null)
    return null;
  if (qn(e))
    return [Pg(e.enter), Pg(e.leave)];
  {
    const t = Pg(e);
    return [t, t];
  }
}
function Pg(e) {
  return YL(e);
}
function so(e, t) {
  t.split(/\s+/).forEach((n) => n && e.classList.add(n)), (e[ku] || (e[ku] = /* @__PURE__ */ new Set())).add(t);
}
function Ts(e, t) {
  t.split(/\s+/).forEach((a) => a && e.classList.remove(a));
  const n = e[ku];
  n && (n.delete(t), n.size || (e[ku] = void 0));
}
function _S(e) {
  requestAnimationFrame(() => {
    requestAnimationFrame(e);
  });
}
let DN = 0;
function pS(e, t, n, a) {
  const r = e._endId = ++DN, i = () => {
    r === e._endId && a();
  };
  if (n != null)
    return setTimeout(i, n);
  const { type: o, timeout: l, propCount: s } = dT(e, t);
  if (!o)
    return a();
  const d = o + "end";
  let u = 0;
  const f = () => {
    e.removeEventListener(d, _), i();
  }, _ = (g) => {
    g.target === e && ++u >= s && f();
  };
  setTimeout(() => {
    u < s && f();
  }, l + 1), e.addEventListener(d, _);
}
function dT(e, t) {
  const n = window.getComputedStyle(e), a = (v) => (n[v] || "").split(", "), r = a(`${Cs}Delay`), i = a(`${Cs}Duration`), o = vS(r, i), l = a(`${Vd}Delay`), s = a(`${Vd}Duration`), d = vS(l, s);
  let u = null, f = 0, _ = 0;
  t === Cs ? o > 0 && (u = Cs, f = o, _ = i.length) : t === Vd ? d > 0 && (u = Vd, f = d, _ = s.length) : (f = Math.max(o, d), u = f > 0 ? o > d ? Cs : Vd : null, _ = u ? u === Cs ? i.length : s.length : 0);
  const g = u === Cs && /\b(transform|all)(,|$)/.test(
    a(`${Cs}Property`).toString()
  );
  return {
    type: u,
    timeout: f,
    propCount: _,
    hasTransform: g
  };
}
function vS(e, t) {
  for (; e.length < t.length; )
    e = e.concat(e);
  return Math.max(...t.map((n, a) => gS(n) + gS(e[a])));
}
function gS(e) {
  return e === "auto" ? 0 : Number(e.slice(0, -1).replace(",", ".")) * 1e3;
}
function Ry() {
  return document.body.offsetHeight;
}
function BN(e, t, n) {
  const a = e[ku];
  a && (t = (t ? [t, ...a] : [...a]).join(" ")), t == null ? e.removeAttribute("class") : n ? e.setAttribute("class", t) : e.className = t;
}
const m_ = Symbol("_vod"), fT = Symbol("_vsh"), Sa = {
  beforeMount(e, { value: t }, { transition: n }) {
    e[m_] = e.style.display === "none" ? "" : e.style.display, n && t ? n.beforeEnter(e) : Md(e, t);
  },
  mounted(e, { value: t }, { transition: n }) {
    n && t && n.enter(e);
  },
  updated(e, { value: t, oldValue: n }, { transition: a }) {
    !t != !n && (a ? t ? (a.beforeEnter(e), Md(e, !0), a.enter(e)) : a.leave(e, () => {
      Md(e, !1);
    }) : Md(e, t));
  },
  beforeUnmount(e, { value: t }) {
    Md(e, t);
  }
};
function Md(e, t) {
  e.style.display = t ? e[m_] : "none", e[fT] = !t;
}
const VN = Symbol(""), MN = /(^|;)\s*display\s*:/;
function RN(e, t, n) {
  const a = e.style, r = sa(n);
  let i = !1;
  if (n && !r) {
    if (t)
      if (sa(t))
        for (const o of t.split(";")) {
          const l = o.slice(0, o.indexOf(":")).trim();
          n[l] == null && Yh(a, l, "");
        }
      else
        for (const o in t)
          n[o] == null && Yh(a, o, "");
    for (const o in n)
      o === "display" && (i = !0), Yh(a, o, n[o]);
  } else if (r) {
    if (t !== n) {
      const o = a[VN];
      o && (n += ";" + o), a.cssText = n, i = MN.test(n);
    }
  } else t && e.removeAttribute("style");
  m_ in e && (e[m_] = i ? a.display : "", e[fT] && (a.display = "none"));
}
const yS = /\s*!important$/;
function Yh(e, t, n) {
  if (Lt(n))
    n.forEach((a) => Yh(e, t, a));
  else if (n == null && (n = ""), t.startsWith("--"))
    e.setProperty(t, n);
  else {
    const a = LN(e, t);
    yS.test(n) ? e.setProperty(
      el(a),
      n.replace(yS, ""),
      "important"
    ) : e[a] = n;
  }
}
const bS = ["Webkit", "Moz", "ms"], Og = {};
function LN(e, t) {
  const n = Og[t];
  if (n)
    return n;
  let a = Nr(t);
  if (a !== "filter" && a in e)
    return Og[t] = a;
  a = So(a);
  for (let r = 0; r < bS.length; r++) {
    const i = bS[r] + a;
    if (i in e)
      return Og[t] = i;
  }
  return t;
}
const wS = "http://www.w3.org/1999/xlink";
function kS(e, t, n, a, r, i = ZL(t)) {
  a && t.startsWith("xlink:") ? n == null ? e.removeAttributeNS(wS, t.slice(6, t.length)) : e.setAttributeNS(wS, t, n) : n == null || i && !JA(n) ? e.removeAttribute(t) : e.setAttribute(
    t,
    i ? "" : ss(n) ? String(n) : n
  );
}
function SS(e, t, n, a, r) {
  if (t === "innerHTML" || t === "textContent") {
    n != null && (e[t] = t === "innerHTML" ? sT(n) : n);
    return;
  }
  const i = e.tagName;
  if (t === "value" && i !== "PROGRESS" && // custom elements may use _value internally
  !i.includes("-")) {
    const l = i === "OPTION" ? e.getAttribute("value") || "" : e.value, s = n == null ? (
      // #11647: value should be set as empty string for null and undefined,
      // but <input type="checkbox"> should be set as 'on'.
      e.type === "checkbox" ? "on" : ""
    ) : String(n);
    (l !== s || !("_value" in e)) && (e.value = s), n == null && e.removeAttribute(t), e._value = n;
    return;
  }
  let o = !1;
  if (n === "" || n == null) {
    const l = typeof e[t];
    l === "boolean" ? n = JA(n) : n == null && l === "string" ? (n = "", o = !0) : l === "number" && (n = 0, o = !0);
  }
  try {
    e[t] = n;
  } catch {
  }
  o && e.removeAttribute(r || t);
}
function eu(e, t, n, a) {
  e.addEventListener(t, n, a);
}
function FN(e, t, n, a) {
  e.removeEventListener(t, n, a);
}
const CS = Symbol("_vei");
function NN(e, t, n, a, r = null) {
  const i = e[CS] || (e[CS] = {}), o = i[t];
  if (a && o)
    o.value = a;
  else {
    const [l, s] = UN(t);
    if (a) {
      const d = i[t] = HN(
        a,
        r
      );
      eu(e, l, d, s);
    } else o && (FN(e, l, o, s), i[t] = void 0);
  }
}
const AS = /(?:Once|Passive|Capture)$/;
function UN(e) {
  let t;
  if (AS.test(e)) {
    t = {};
    let a;
    for (; a = e.match(AS); )
      e = e.slice(0, e.length - a[0].length), t[a[0].toLowerCase()] = !0;
  }
  return [e[2] === ":" ? e.slice(3) : el(e.slice(2)), t];
}
let Dg = 0;
const $N = /* @__PURE__ */ Promise.resolve(), qN = () => Dg || ($N.then(() => Dg = 0), Dg = Date.now());
function HN(e, t) {
  const n = (a) => {
    if (!a._vts)
      a._vts = Date.now();
    else if (a._vts <= n.attached)
      return;
    zi(
      zN(a, n.value),
      t,
      5,
      [a]
    );
  };
  return n.value = e, n.attached = qN(), n;
}
function zN(e, t) {
  if (Lt(t)) {
    const n = e.stopImmediatePropagation;
    return e.stopImmediatePropagation = () => {
      n.call(e), e._stopped = !0;
    }, t.map(
      (a) => (r) => !r._stopped && a && a(r)
    );
  } else
    return t;
}
const xS = (e) => e.charCodeAt(0) === 111 && e.charCodeAt(1) === 110 && // lowercase letter
e.charCodeAt(2) > 96 && e.charCodeAt(2) < 123, WN = (e, t, n, a, r, i) => {
  const o = r === "svg";
  t === "class" ? BN(e, a, o) : t === "style" ? RN(e, n, a) : K_(t) ? Xb(t) || NN(e, t, n, a, i) : (t[0] === "." ? (t = t.slice(1), !0) : t[0] === "^" ? (t = t.slice(1), !1) : jN(e, t, a, o)) ? (SS(e, t, a), !e.tagName.includes("-") && (t === "value" || t === "checked" || t === "selected") && kS(e, t, a, o, i, t !== "value")) : /* #11081 force set props for possible async custom element */ e._isVueCE && (/[A-Z]/.test(t) || !sa(a)) ? SS(e, Nr(t), a, i, t) : (t === "true-value" ? e._trueValue = a : t === "false-value" && (e._falseValue = a), kS(e, t, a, o));
};
function jN(e, t, n, a) {
  if (a)
    return !!(t === "innerHTML" || t === "textContent" || t in e && xS(t) && Kt(n));
  if (t === "spellcheck" || t === "draggable" || t === "translate" || t === "autocorrect" || t === "form" || t === "list" && e.tagName === "INPUT" || t === "type" && e.tagName === "TEXTAREA")
    return !1;
  if (t === "width" || t === "height") {
    const r = e.tagName;
    if (r === "IMG" || r === "VIDEO" || r === "CANVAS" || r === "SOURCE")
      return !1;
  }
  return xS(t) && sa(n) ? !1 : t in e;
}
const mT = /* @__PURE__ */ new WeakMap(), hT = /* @__PURE__ */ new WeakMap(), h_ = Symbol("_moveCb"), TS = Symbol("_enterCb"), YN = (e) => (delete e.props.mode, e), KN = /* @__PURE__ */ YN({
  name: "TransitionGroup",
  props: /* @__PURE__ */ Ka({}, cT, {
    tag: String,
    moveClass: String
  }),
  setup(e, { slots: t }) {
    const n = cs(), a = Px();
    let r, i;
    return fw(() => {
      if (!r.length)
        return;
      const o = e.moveClass || `${e.name || "v"}-move`;
      if (!XN(
        r[0].el,
        n.vnode.el,
        o
      )) {
        r = [];
        return;
      }
      r.forEach(GN), r.forEach(QN);
      const l = r.filter(JN);
      Ry(), l.forEach((s) => {
        const d = s.el, u = d.style;
        so(d, o), u.transform = u.webkitTransform = u.transitionDuration = "";
        const f = d[h_] = (_) => {
          _ && _.target !== d || (!_ || /transform$/.test(_.propertyName)) && (d.removeEventListener("transitionend", f), d[h_] = null, Ts(d, o));
        };
        d.addEventListener("transitionend", f);
      }), r = [];
    }), () => {
      const o = Ot(e), l = uT(o);
      let s = o.tag || Qe;
      if (r = [], i)
        for (let d = 0; d < i.length; d++) {
          const u = i[d];
          u.el && u.el instanceof Element && (r.push(u), Ql(
            u,
            uf(
              u,
              l,
              a,
              n
            )
          ), mT.set(
            u,
            u.el.getBoundingClientRect()
          ));
        }
      i = t.default ? cw(t.default()) : [];
      for (let d = 0; d < i.length; d++) {
        const u = i[d];
        u.key != null && Ql(
          u,
          uf(u, l, a, n)
        );
      }
      return h(s, null, i);
    };
  }
}), bw = KN;
function GN(e) {
  const t = e.el;
  t[h_] && t[h_](), t[TS] && t[TS]();
}
function QN(e) {
  hT.set(e, e.el.getBoundingClientRect());
}
function JN(e) {
  const t = mT.get(e), n = hT.get(e), a = t.left - n.left, r = t.top - n.top;
  if (a || r) {
    const i = e.el.style;
    return i.transform = i.webkitTransform = `translate(${a}px,${r}px)`, i.transitionDuration = "0s", e;
  }
}
function XN(e, t, n) {
  const a = e.cloneNode(), r = e[ku];
  r && r.forEach((l) => {
    l.split(/\s+/).forEach((s) => s && a.classList.remove(s));
  }), n.split(/\s+/).forEach((l) => l && a.classList.add(l)), a.style.display = "none";
  const i = t.nodeType === 1 ? t : t.parentNode;
  i.appendChild(a);
  const { hasTransform: o } = dT(a);
  return i.removeChild(a), o;
}
const IS = (e) => {
  const t = e.props["onUpdate:modelValue"] || !1;
  return Lt(t) ? (n) => zh(t, n) : t;
};
function ZN(e) {
  e.target.composing = !0;
}
function ES(e) {
  const t = e.target;
  t.composing && (t.composing = !1, t.dispatchEvent(new Event("input")));
}
const Bg = Symbol("_assign"), e3 = {
  created(e, { modifiers: { lazy: t, trim: n, number: a } }, r) {
    e[Bg] = IS(r);
    const i = a || r.props && r.props.type === "number";
    eu(e, t ? "change" : "input", (o) => {
      if (o.target.composing) return;
      let l = e.value;
      n && (l = l.trim()), i && (l = Ay(l)), e[Bg](l);
    }), n && eu(e, "change", () => {
      e.value = e.value.trim();
    }), t || (eu(e, "compositionstart", ZN), eu(e, "compositionend", ES), eu(e, "change", ES));
  },
  // set value on mounted so it's after min/max for type="range"
  mounted(e, { value: t }) {
    e.value = t ?? "";
  },
  beforeUpdate(e, { value: t, oldValue: n, modifiers: { lazy: a, trim: r, number: i } }, o) {
    if (e[Bg] = IS(o), e.composing) return;
    const l = (i || e.type === "number") && !/^0\d/.test(e.value) ? Ay(e.value) : e.value, s = t ?? "";
    l !== s && (document.activeElement === e && e.type !== "range" && (a && t === n || r && e.value.trim() === s) || (e.value = s));
  }
}, t3 = ["ctrl", "shift", "alt", "meta"], n3 = {
  stop: (e) => e.stopPropagation(),
  prevent: (e) => e.preventDefault(),
  self: (e) => e.target !== e.currentTarget,
  ctrl: (e) => !e.ctrlKey,
  shift: (e) => !e.shiftKey,
  alt: (e) => !e.altKey,
  meta: (e) => !e.metaKey,
  left: (e) => "button" in e && e.button !== 0,
  middle: (e) => "button" in e && e.button !== 1,
  right: (e) => "button" in e && e.button !== 2,
  exact: (e, t) => t3.some((n) => e[`${n}Key`] && !t.includes(n))
}, Jn = (e, t) => {
  const n = e._withMods || (e._withMods = {}), a = t.join(".");
  return n[a] || (n[a] = (r, ...i) => {
    for (let o = 0; o < t.length; o++) {
      const l = n3[t[o]];
      if (l && l(r, t)) return;
    }
    return e(r, ...i);
  });
}, a3 = {
  esc: "escape",
  space: " ",
  up: "arrow-up",
  left: "arrow-left",
  right: "arrow-right",
  down: "arrow-down",
  delete: "backspace"
}, Rl = (e, t) => {
  const n = e._withKeys || (e._withKeys = {}), a = t.join(".");
  return n[a] || (n[a] = (r) => {
    if (!("key" in r))
      return;
    const i = el(r.key);
    if (t.some(
      (o) => o === i || a3[o] === i
    ))
      return e(r);
  });
}, r3 = /* @__PURE__ */ Ka({ patchProp: WN }, EN);
let PS;
function _T() {
  return PS || (PS = nN(r3));
}
const p_ = (...e) => {
  _T().render(...e);
}, i3 = (...e) => {
  const t = _T().createApp(...e), { mount: n } = t;
  return t.mount = (a) => {
    const r = s3(a);
    if (!r) return;
    const i = t._component;
    !Kt(i) && !i.render && !i.template && (i.template = r.innerHTML), r.nodeType === 1 && (r.textContent = "");
    const o = n(r, !1, o3(r));
    return r instanceof Element && (r.removeAttribute("v-cloak"), r.setAttribute("data-v-app", "")), o;
  }, t;
};
function o3(e) {
  if (e instanceof SVGElement)
    return "svg";
  if (typeof MathMLElement == "function" && e instanceof MathMLElement)
    return "mathml";
}
function s3(e) {
  return sa(e) ? document.querySelector(e) : e;
}
function Fr(e, t) {
  let n;
  function a() {
    n = bu(), n.run(() => t.length ? t(() => {
      n?.stop(), a();
    }) : t());
  }
  nt(e, (r) => {
    r && !n ? a() : r || (n?.stop(), n = void 0);
  }, {
    immediate: !0
  }), qa(() => {
    n?.stop();
  });
}
const vn = typeof window < "u", ww = vn && "IntersectionObserver" in window, l3 = vn && ("ontouchstart" in window || window.navigator.maxTouchPoints > 0), OS = vn && "EyeDropper" in window;
function DS(e, t, n) {
  c3(e, t), t.set(e, n);
}
function c3(e, t) {
  if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object");
}
function BS(e, t, n) {
  return e.set(pT(e, t), n), n;
}
function Uo(e, t) {
  return e.get(pT(e, t));
}
function pT(e, t, n) {
  if (typeof e == "function" ? e === t : e.has(t)) return arguments.length < 3 ? t : n;
  throw new TypeError("Private element is not present on this object");
}
function vT(e, t, n) {
  const a = t.length - 1;
  if (a < 0) return e === void 0 ? n : e;
  for (let r = 0; r < a; r++) {
    if (e == null)
      return n;
    e = e[t[r]];
  }
  return e == null || e[t[a]] === void 0 ? n : e[t[a]];
}
function fr(e, t) {
  if (e === t) return !0;
  if (e instanceof Date && t instanceof Date && e.getTime() !== t.getTime() || e !== Object(e) || t !== Object(t))
    return !1;
  const n = Object.keys(e);
  return n.length !== Object.keys(t).length ? !1 : n.every((a) => fr(e[a], t[a]));
}
function Jl(e, t, n) {
  return e == null || !t || typeof t != "string" ? n : e[t] !== void 0 ? e[t] : (t = t.replace(/\[(\w+)\]/g, ".$1"), t = t.replace(/^\./, ""), vT(e, t.split("."), n));
}
function Da(e, t, n) {
  if (t === !0) return e === void 0 ? n : e;
  if (t == null || typeof t == "boolean") return n;
  if (e !== Object(e)) {
    if (typeof t != "function") return n;
    const r = t(e, n);
    return typeof r > "u" ? n : r;
  }
  if (typeof t == "string") return Jl(e, t, n);
  if (Array.isArray(t)) return vT(e, t, n);
  if (typeof t != "function") return n;
  const a = t(e, n);
  return typeof a > "u" ? n : a;
}
function ho(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return Array.from({
    length: e
  }, (n, a) => t + a);
}
function ht(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "px";
  if (e == null || e === "")
    return;
  const n = Number(e);
  return isNaN(n) ? String(e) : isFinite(n) ? `${n}${t}` : void 0;
}
function mf(e) {
  return e !== null && typeof e == "object" && !Array.isArray(e);
}
function VS(e) {
  let t;
  return e !== null && typeof e == "object" && ((t = Object.getPrototypeOf(e)) === Object.prototype || t === null);
}
function kw(e) {
  if (e && "$el" in e) {
    const t = e.$el;
    return t?.nodeType === Node.TEXT_NODE ? t.nextElementSibling : t;
  }
  return e;
}
const MS = Object.freeze({
  enter: 13,
  tab: 9,
  delete: 46,
  esc: 27,
  space: 32,
  up: 38,
  down: 40,
  left: 37,
  right: 39,
  end: 35,
  home: 36,
  del: 46,
  backspace: 8,
  insert: 45,
  pageup: 33,
  pagedown: 34,
  shift: 16
}), Ly = Object.freeze({
  enter: "Enter",
  tab: "Tab",
  delete: "Delete",
  esc: "Escape",
  space: "Space",
  up: "ArrowUp",
  down: "ArrowDown",
  left: "ArrowLeft",
  right: "ArrowRight",
  end: "End",
  home: "Home",
  del: "Delete",
  backspace: "Backspace",
  insert: "Insert",
  pageup: "PageUp",
  pagedown: "PageDown",
  shift: "Shift"
});
function gT(e) {
  return Object.keys(e);
}
function Ll(e, t) {
  return t.every((n) => e.hasOwnProperty(n));
}
function tl(e, t) {
  const n = {};
  for (const a of t)
    Object.prototype.hasOwnProperty.call(e, a) && (n[a] = e[a]);
  return n;
}
function Fy(e, t, n) {
  const a = /* @__PURE__ */ Object.create(null), r = /* @__PURE__ */ Object.create(null);
  for (const i in e)
    t.some((o) => o instanceof RegExp ? o.test(i) : o === i) ? a[i] = e[i] : r[i] = e[i];
  return [a, r];
}
function la(e, t) {
  const n = {
    ...e
  };
  return t.forEach((a) => delete n[a]), n;
}
const yT = /^on[^a-z]/, Sw = (e) => yT.test(e), u3 = ["onAfterscriptexecute", "onAnimationcancel", "onAnimationend", "onAnimationiteration", "onAnimationstart", "onAuxclick", "onBeforeinput", "onBeforescriptexecute", "onChange", "onClick", "onCompositionend", "onCompositionstart", "onCompositionupdate", "onContextmenu", "onCopy", "onCut", "onDblclick", "onFocusin", "onFocusout", "onFullscreenchange", "onFullscreenerror", "onGesturechange", "onGestureend", "onGesturestart", "onGotpointercapture", "onInput", "onKeydown", "onKeypress", "onKeyup", "onLostpointercapture", "onMousedown", "onMousemove", "onMouseout", "onMouseover", "onMouseup", "onMousewheel", "onPaste", "onPointercancel", "onPointerdown", "onPointerenter", "onPointerleave", "onPointermove", "onPointerout", "onPointerover", "onPointerup", "onReset", "onSelect", "onSubmit", "onTouchcancel", "onTouchend", "onTouchmove", "onTouchstart", "onTransitioncancel", "onTransitionend", "onTransitionrun", "onTransitionstart", "onWheel"], d3 = ["ArrowUp", "ArrowDown", "ArrowRight", "ArrowLeft", "Enter", "Escape", "Tab", " "];
function f3(e) {
  return e.isComposing && d3.includes(e.key);
}
function nl(e) {
  const [t, n] = Fy(e, [yT]), a = la(t, u3), [r, i] = Fy(n, ["class", "style", "id", /^data-/]);
  return Object.assign(r, t), Object.assign(i, a), [r, i];
}
function Zn(e) {
  return e == null ? [] : Array.isArray(e) ? e : [e];
}
function m3(e, t) {
  let n = 0;
  const a = function() {
    for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++)
      i[o] = arguments[o];
    clearTimeout(n), n = setTimeout(() => e(...i), fe(t));
  };
  return a.clear = () => {
    clearTimeout(n);
  }, a.immediate = e, a;
}
function Pn(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1;
  return Math.max(t, Math.min(n, e));
}
function RS(e) {
  const t = e.toString().trim();
  return t.includes(".") ? t.length - t.indexOf(".") - 1 : 0;
}
function LS(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "0";
  return e + n.repeat(Math.max(0, t - e.length));
}
function FS(e, t) {
  return (arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "0").repeat(Math.max(0, t - e.length)) + e;
}
function h3(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  const n = [];
  let a = 0;
  for (; a < e.length; )
    n.push(e.substr(a, t)), a += t;
  return n;
}
function NS(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e3;
  if (e < t)
    return `${e} B`;
  const n = t === 1024 ? ["Ki", "Mi", "Gi"] : ["k", "M", "G"];
  let a = -1;
  for (; Math.abs(e) >= t && a < n.length - 1; )
    e /= t, ++a;
  return `${e.toFixed(1)} ${n[a]}B`;
}
function kr() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n = arguments.length > 2 ? arguments[2] : void 0;
  const a = {};
  for (const r in e)
    a[r] = e[r];
  for (const r in t) {
    const i = e[r], o = t[r];
    if (VS(i) && VS(o)) {
      a[r] = kr(i, o, n);
      continue;
    }
    if (n && Array.isArray(i) && Array.isArray(o)) {
      a[r] = n(i, o);
      continue;
    }
    a[r] = o;
  }
  return a;
}
function bT(e) {
  return e.map((t) => t.type === Qe ? bT(t.children) : t).flat();
}
function ql() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  if (ql.cache.has(e)) return ql.cache.get(e);
  const t = e.replace(/[^a-z]/gi, "-").replace(/\B([A-Z])/g, "-$1").toLowerCase();
  return ql.cache.set(e, t), t;
}
ql.cache = /* @__PURE__ */ new Map();
function au(e, t) {
  if (!t || typeof t != "object") return [];
  if (Array.isArray(t))
    return t.map((n) => au(e, n)).flat(1);
  if (t.suspense)
    return au(e, t.ssContent);
  if (Array.isArray(t.children))
    return t.children.map((n) => au(e, n)).flat(1);
  if (t.component) {
    if (Object.getOwnPropertySymbols(t.component.provides).includes(e))
      return [t.component];
    if (t.component.subTree)
      return au(e, t.component.subTree).flat(1);
  }
  return [];
}
var Wc = /* @__PURE__ */ new WeakMap(), Il = /* @__PURE__ */ new WeakMap();
class wT {
  constructor(t) {
    DS(this, Wc, []), DS(this, Il, 0), this.size = t;
  }
  get isFull() {
    return Uo(Wc, this).length === this.size;
  }
  push(t) {
    Uo(Wc, this)[Uo(Il, this)] = t, BS(Il, this, (Uo(Il, this) + 1) % this.size);
  }
  values() {
    return Uo(Wc, this).slice(Uo(Il, this)).concat(Uo(Wc, this).slice(0, Uo(Il, this)));
  }
  clear() {
    Uo(Wc, this).length = 0, BS(Il, this, 0);
  }
}
function _3(e) {
  return "touches" in e ? {
    clientX: e.touches[0].clientX,
    clientY: e.touches[0].clientY
  } : {
    clientX: e.clientX,
    clientY: e.clientY
  };
}
function Cw(e) {
  const t = oa({});
  ea(() => {
    const a = e();
    for (const r in a)
      t[r] = a[r];
  }, {
    flush: "sync"
  });
  const n = {};
  for (const a in t)
    n[a] = be(() => t[a]);
  return n;
}
function v_(e, t) {
  return e.includes(t);
}
function kT(e) {
  return e[2].toLowerCase() + e.slice(3);
}
const nr = () => [Function, Array];
function US(e, t) {
  return t = "on" + So(t), !!(e[t] || e[`${t}Once`] || e[`${t}Capture`] || e[`${t}OnceCapture`] || e[`${t}CaptureOnce`]);
}
function rp(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), a = 1; a < t; a++)
    n[a - 1] = arguments[a];
  if (Array.isArray(e))
    for (const r of e)
      r(...n);
  else typeof e == "function" && e(...n);
}
function hf(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
  const n = ["button", "[href]", 'input:not([type="hidden"])', "select", "textarea", "[tabindex]"].map((a) => `${a}${t ? ':not([tabindex="-1"])' : ""}:not([disabled])`).join(", ");
  return [...e.querySelectorAll(n)];
}
function ST(e, t, n) {
  let a, r = e.indexOf(document.activeElement);
  const i = t === "next" ? 1 : -1;
  do
    r += i, a = e[r];
  while ((!a || a.offsetParent == null || !(n?.(a) ?? !0)) && r < e.length && r >= 0);
  return a;
}
function Hl(e, t) {
  const n = hf(e);
  if (t == null)
    (e === document.activeElement || !e.contains(document.activeElement)) && n[0]?.focus();
  else if (t === "first")
    n[0]?.focus();
  else if (t === "last")
    n.at(-1)?.focus();
  else if (typeof t == "number")
    n[t]?.focus();
  else {
    const a = ST(n, t);
    a ? a.focus() : Hl(e, t === "next" ? "first" : "last");
  }
}
function kh(e) {
  return e == null || typeof e == "string" && e.trim() === "";
}
function CT() {
}
function Su(e, t) {
  if (!(vn && typeof CSS < "u" && typeof CSS.supports < "u" && CSS.supports(`selector(${t})`))) return null;
  try {
    return !!e && e.matches(t);
  } catch {
    return null;
  }
}
function ip(e) {
  return e.some((t) => wu(t) ? t.type === cr ? !1 : t.type !== Qe || ip(t.children) : !0) ? e : null;
}
function p3(e, t) {
  if (!vn || e === 0)
    return t(), () => {
    };
  const n = window.setTimeout(t, e);
  return () => window.clearTimeout(n);
}
function v3(e, t) {
  const n = e.clientX, a = e.clientY, r = t.getBoundingClientRect(), i = r.left, o = r.top, l = r.right, s = r.bottom;
  return n >= i && n <= l && a >= o && a <= s;
}
function g_() {
  const e = ot(), t = (n) => {
    e.value = n;
  };
  return Object.defineProperty(t, "value", {
    enumerable: !0,
    get: () => e.value,
    set: (n) => e.value = n
  }), Object.defineProperty(t, "el", {
    enumerable: !0,
    get: () => kw(e.value)
  }), t;
}
function Cu(e) {
  const t = e.key.length === 1, n = !e.ctrlKey && !e.metaKey && !e.altKey;
  return t && n;
}
function AT(e) {
  return typeof e == "string" || typeof e == "number" || typeof e == "boolean" || typeof e == "bigint";
}
function g3(e, t) {
  const n = e.split("").filter((a) => /[\d\-.]/.test(a)).filter((a, r, i) => r === 0 && /[-]/.test(a) || // sign allowed at the start
  a === "." && r === i.indexOf(".") || // decimal separator allowed only once
  /\d/.test(a)).join("");
  if (t === 0)
    return n.split(".")[0];
  if (t !== null && /\.\d/.test(n)) {
    const a = n.split(".");
    return [a[0], a[1].substring(0, t)].join(".");
  }
  return n;
}
function y3(e) {
  const t = {};
  for (const n in e)
    t[Nr(n)] = e[n];
  return t;
}
function b3(e) {
  const t = ["checked", "disabled"];
  return Object.fromEntries(Object.entries(e).filter((n) => {
    let [a, r] = n;
    return t.includes(a) ? !!r : r !== void 0;
  }));
}
const xT = ["top", "bottom"], w3 = ["start", "end", "left", "right"];
function Ny(e, t) {
  let [n, a] = e.split(" ");
  return a || (a = v_(xT, n) ? "start" : v_(w3, n) ? "top" : "center"), {
    side: Uy(n, t),
    align: Uy(a, t)
  };
}
function Uy(e, t) {
  return e === "start" ? t ? "right" : "left" : e === "end" ? t ? "left" : "right" : e;
}
function Vg(e) {
  return {
    side: {
      center: "center",
      top: "bottom",
      bottom: "top",
      left: "right",
      right: "left"
    }[e.side],
    align: e.align
  };
}
function Mg(e) {
  return {
    side: e.side,
    align: {
      center: "center",
      top: "bottom",
      bottom: "top",
      left: "right",
      right: "left"
    }[e.align]
  };
}
function $S(e) {
  return {
    side: e.align,
    align: e.side
  };
}
function qS(e) {
  return v_(xT, e.side) ? "y" : "x";
}
class vo {
  constructor(t) {
    let {
      x: n,
      y: a,
      width: r,
      height: i
    } = t;
    this.x = n, this.y = a, this.width = r, this.height = i;
  }
  get top() {
    return this.y;
  }
  get bottom() {
    return this.y + this.height;
  }
  get left() {
    return this.x;
  }
  get right() {
    return this.x + this.width;
  }
}
function HS(e, t) {
  return {
    x: {
      before: Math.max(0, t.left - e.left),
      after: Math.max(0, e.right - t.right)
    },
    y: {
      before: Math.max(0, t.top - e.top),
      after: Math.max(0, e.bottom - t.bottom)
    }
  };
}
function TT(e) {
  return Array.isArray(e) ? new vo({
    x: e[0],
    y: e[1],
    width: 0,
    height: 0
  }) : e.getBoundingClientRect();
}
function k3(e) {
  if (e === document.documentElement)
    return visualViewport ? new vo({
      x: visualViewport.scale > 1 ? 0 : visualViewport.offsetLeft,
      y: visualViewport.scale > 1 ? 0 : visualViewport.offsetTop,
      width: visualViewport.width * visualViewport.scale,
      height: visualViewport.height * visualViewport.scale
    }) : new vo({
      x: 0,
      y: 0,
      width: document.documentElement.clientWidth,
      height: document.documentElement.clientHeight
    });
  {
    const t = e.getBoundingClientRect();
    return new vo({
      x: t.x,
      y: t.y,
      width: e.clientWidth,
      height: e.clientHeight
    });
  }
}
function Aw(e) {
  const t = e.getBoundingClientRect(), n = getComputedStyle(e), a = n.transform;
  if (a) {
    let r, i, o, l, s;
    if (a.startsWith("matrix3d("))
      r = a.slice(9, -1).split(/, /), i = Number(r[0]), o = Number(r[5]), l = Number(r[12]), s = Number(r[13]);
    else if (a.startsWith("matrix("))
      r = a.slice(7, -1).split(/, /), i = Number(r[0]), o = Number(r[3]), l = Number(r[4]), s = Number(r[5]);
    else
      return new vo(t);
    const d = n.transformOrigin, u = t.x - l - (1 - i) * parseFloat(d), f = t.y - s - (1 - o) * parseFloat(d.slice(d.indexOf(" ") + 1)), _ = i ? t.width / i : e.offsetWidth + 1, g = o ? t.height / o : e.offsetHeight + 1;
    return new vo({
      x: u,
      y: f,
      width: _,
      height: g
    });
  } else
    return new vo(t);
}
function Fl(e, t, n) {
  if (typeof e.animate > "u") return {
    finished: Promise.resolve()
  };
  let a;
  try {
    a = e.animate(t, n);
  } catch {
    return {
      finished: Promise.resolve()
    };
  }
  return typeof a.finished > "u" && (a.finished = new Promise((r) => {
    a.onfinish = () => {
      r(a);
    };
  })), a;
}
const Kh = /* @__PURE__ */ new WeakMap();
function S3(e, t) {
  Object.keys(t).forEach((n) => {
    if (Sw(n)) {
      const a = kT(n), r = Kh.get(e);
      if (t[n] == null)
        r?.forEach((i) => {
          const [o, l] = i;
          o === a && (e.removeEventListener(a, l), r.delete(i));
        });
      else if (!r || ![...r].some((i) => i[0] === a && i[1] === t[n])) {
        e.addEventListener(a, t[n]);
        const i = r || /* @__PURE__ */ new Set();
        i.add([a, t[n]]), Kh.has(e) || Kh.set(e, i);
      }
    } else
      t[n] == null ? e.removeAttribute(n) : e.setAttribute(n, t[n]);
  });
}
function C3(e, t) {
  Object.keys(t).forEach((n) => {
    if (Sw(n)) {
      const a = kT(n), r = Kh.get(e);
      r?.forEach((i) => {
        const [o, l] = i;
        o === a && (e.removeEventListener(a, l), r.delete(i));
      });
    } else
      e.removeAttribute(n);
  });
}
const jc = 2.4, zS = 0.2126729, WS = 0.7151522, jS = 0.072175, A3 = 0.55, x3 = 0.58, T3 = 0.57, I3 = 0.62, Sh = 0.03, YS = 1.45, E3 = 5e-4, P3 = 1.25, O3 = 1.25, KS = 0.078, GS = 12.82051282051282, Ch = 0.06, QS = 1e-3;
function JS(e, t) {
  const n = (e.r / 255) ** jc, a = (e.g / 255) ** jc, r = (e.b / 255) ** jc, i = (t.r / 255) ** jc, o = (t.g / 255) ** jc, l = (t.b / 255) ** jc;
  let s = n * zS + a * WS + r * jS, d = i * zS + o * WS + l * jS;
  if (s <= Sh && (s += (Sh - s) ** YS), d <= Sh && (d += (Sh - d) ** YS), Math.abs(d - s) < E3) return 0;
  let u;
  if (d > s) {
    const f = (d ** A3 - s ** x3) * P3;
    u = f < QS ? 0 : f < KS ? f - f * GS * Ch : f - Ch;
  } else {
    const f = (d ** I3 - s ** T3) * O3;
    u = f > -QS ? 0 : f > -KS ? f - f * GS * Ch : f + Ch;
  }
  return u * 100;
}
function D3(e, t) {
  t = Array.isArray(t) ? t.slice(0, -1).map((n) => `'${n}'`).join(", ") + ` or '${t.at(-1)}'` : `'${t}'`;
}
const y_ = 0.20689655172413793, B3 = (e) => e > y_ ** 3 ? Math.cbrt(e) : e / (3 * y_ ** 2) + 4 / 29, V3 = (e) => e > y_ ? e ** 3 : 3 * y_ ** 2 * (e - 4 / 29);
function IT(e) {
  const t = B3, n = t(e[1]);
  return [116 * n - 16, 500 * (t(e[0] / 0.95047) - n), 200 * (n - t(e[2] / 1.08883))];
}
function ET(e) {
  const t = V3, n = (e[0] + 16) / 116;
  return [t(n + e[1] / 500) * 0.95047, t(n), t(n - e[2] / 200) * 1.08883];
}
const M3 = [[3.2406, -1.5372, -0.4986], [-0.9689, 1.8758, 0.0415], [0.0557, -0.204, 1.057]], R3 = (e) => e <= 31308e-7 ? e * 12.92 : 1.055 * e ** (1 / 2.4) - 0.055, L3 = [[0.4124, 0.3576, 0.1805], [0.2126, 0.7152, 0.0722], [0.0193, 0.1192, 0.9505]], F3 = (e) => e <= 0.04045 ? e / 12.92 : ((e + 0.055) / 1.055) ** 2.4;
function PT(e) {
  const t = Array(3), n = R3, a = M3;
  for (let r = 0; r < 3; ++r)
    t[r] = Math.round(Pn(n(a[r][0] * e[0] + a[r][1] * e[1] + a[r][2] * e[2])) * 255);
  return {
    r: t[0],
    g: t[1],
    b: t[2]
  };
}
function xw(e) {
  let {
    r: t,
    g: n,
    b: a
  } = e;
  const r = [0, 0, 0], i = F3, o = L3;
  t = i(t / 255), n = i(n / 255), a = i(a / 255);
  for (let l = 0; l < 3; ++l)
    r[l] = o[l][0] * t + o[l][1] * n + o[l][2] * a;
  return r;
}
function $y(e) {
  return !!e && /^(#|var\(--|(rgb|hsl)a?\()/.test(e);
}
function N3(e) {
  return $y(e) && !/^((rgb|hsl)a?\()?var\(--/.test(e);
}
const XS = /^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/, U3 = {
  rgb: (e, t, n, a) => ({
    r: e,
    g: t,
    b: n,
    a
  }),
  rgba: (e, t, n, a) => ({
    r: e,
    g: t,
    b: n,
    a
  }),
  hsl: (e, t, n, a) => ZS({
    h: e,
    s: t,
    l: n,
    a
  }),
  hsla: (e, t, n, a) => ZS({
    h: e,
    s: t,
    l: n,
    a
  }),
  hsv: (e, t, n, a) => bo({
    h: e,
    s: t,
    v: n,
    a
  }),
  hsva: (e, t, n, a) => bo({
    h: e,
    s: t,
    v: n,
    a
  })
};
function si(e) {
  if (typeof e == "number")
    return {
      r: (e & 16711680) >> 16,
      g: (e & 65280) >> 8,
      b: e & 255
    };
  if (typeof e == "string" && XS.test(e)) {
    const {
      groups: t
    } = e.match(XS), {
      fn: n,
      values: a
    } = t, r = a.split(/,\s*|\s*\/\s*|\s+/).map((i, o) => i.endsWith("%") || // unitless slv are %
    o > 0 && o < 3 && ["hsl", "hsla", "hsv", "hsva"].includes(n) ? parseFloat(i) / 100 : parseFloat(i));
    return U3[n](...r);
  } else if (typeof e == "string") {
    let t = e.startsWith("#") ? e.slice(1) : e;
    return [3, 4].includes(t.length) ? t = t.split("").map((n) => n + n).join("") : [6, 8].includes(t.length), VT(t);
  } else if (typeof e == "object") {
    if (Ll(e, ["r", "g", "b"]))
      return e;
    if (Ll(e, ["h", "s", "l"]))
      return bo(Tw(e));
    if (Ll(e, ["h", "s", "v"]))
      return bo(e);
  }
  throw new TypeError(`Invalid color: ${e == null ? e : String(e) || e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`);
}
function bo(e) {
  const {
    h: t,
    s: n,
    v: a,
    a: r
  } = e, i = (l) => {
    const s = (l + t / 60) % 6;
    return a - a * n * Math.max(Math.min(s, 4 - s, 1), 0);
  }, o = [i(5), i(3), i(1)].map((l) => Math.round(l * 255));
  return {
    r: o[0],
    g: o[1],
    b: o[2],
    a: r
  };
}
function ZS(e) {
  return bo(Tw(e));
}
function Ff(e) {
  if (!e) return {
    h: 0,
    s: 1,
    v: 1,
    a: 1
  };
  const t = e.r / 255, n = e.g / 255, a = e.b / 255, r = Math.max(t, n, a), i = Math.min(t, n, a);
  let o = 0;
  r !== i && (r === t ? o = 60 * (0 + (n - a) / (r - i)) : r === n ? o = 60 * (2 + (a - t) / (r - i)) : r === a && (o = 60 * (4 + (t - n) / (r - i)))), o < 0 && (o = o + 360);
  const l = r === 0 ? 0 : (r - i) / r, s = [o, l, r];
  return {
    h: s[0],
    s: s[1],
    v: s[2],
    a: e.a
  };
}
function qy(e) {
  const {
    h: t,
    s: n,
    v: a,
    a: r
  } = e, i = a - a * n / 2, o = i === 1 || i === 0 ? 0 : (a - i) / Math.min(i, 1 - i);
  return {
    h: t,
    s: o,
    l: i,
    a: r
  };
}
function Tw(e) {
  const {
    h: t,
    s: n,
    l: a,
    a: r
  } = e, i = a + n * Math.min(a, 1 - a), o = i === 0 ? 0 : 2 - 2 * a / i;
  return {
    h: t,
    s: o,
    v: i,
    a: r
  };
}
function OT(e) {
  let {
    r: t,
    g: n,
    b: a,
    a: r
  } = e;
  return r === void 0 ? `rgb(${t}, ${n}, ${a})` : `rgba(${t}, ${n}, ${a}, ${r})`;
}
function DT(e) {
  return OT(bo(e));
}
function Ah(e) {
  const t = Math.round(e).toString(16);
  return ("00".substr(0, 2 - t.length) + t).toUpperCase();
}
function BT(e) {
  let {
    r: t,
    g: n,
    b: a,
    a: r
  } = e;
  return `#${[Ah(t), Ah(n), Ah(a), r !== void 0 ? Ah(Math.round(r * 255)) : ""].join("")}`;
}
function VT(e) {
  e = q3(e);
  let [t, n, a, r] = h3(e, 2).map((i) => parseInt(i, 16));
  return r = r === void 0 ? r : r / 255, {
    r: t,
    g: n,
    b: a,
    a: r
  };
}
function $3(e) {
  const t = VT(e);
  return Ff(t);
}
function MT(e) {
  return BT(bo(e));
}
function q3(e) {
  return e.startsWith("#") && (e = e.slice(1)), e = e.replace(/([^0-9a-f])/gi, "F"), (e.length === 3 || e.length === 4) && (e = e.split("").map((t) => t + t).join("")), e.length !== 6 && (e = LS(LS(e, 6), 8, "F")), e;
}
function H3(e, t) {
  const n = IT(xw(e));
  return n[0] = n[0] + t * 10, PT(ET(n));
}
function z3(e, t) {
  const n = IT(xw(e));
  return n[0] = n[0] - t * 10, PT(ET(n));
}
function Hy(e) {
  const t = si(e);
  return xw(t)[1];
}
function W3(e, t) {
  const n = Hy(e), a = Hy(t), r = Math.max(n, a), i = Math.min(n, a);
  return (r + 0.05) / (i + 0.05);
}
function RT(e) {
  const t = Math.abs(JS(si(0), si(e)));
  return Math.abs(JS(si(16777215), si(e))) > Math.min(t, 50) ? "#fff" : "#000";
}
function De(e, t) {
  return (n) => Object.keys(e).reduce((a, r) => {
    const o = typeof e[r] == "object" && e[r] != null && !Array.isArray(e[r]) ? e[r] : {
      type: e[r]
    };
    return n && r in n ? a[r] = {
      ...o,
      default: n[r]
    } : a[r] = o, t && !a[r].source && (a[r].source = t), a;
  }, {});
}
const vt = De({
  class: [String, Array, Object],
  style: {
    type: [String, Array, Object],
    default: null
  }
}, "component");
function ga(e, t) {
  const n = cs();
  if (!n)
    throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);
  return n;
}
function Ao() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "composables";
  const t = ga(e).type;
  return ql(t?.aliasName || t?.name);
}
function j3(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : ga("injectSelf");
  const {
    provides: n
  } = t;
  if (n && e in n)
    return n[e];
}
const Au = Symbol.for("vuetify:defaults");
function Y3(e) {
  return Se(e);
}
function Iw() {
  const e = Gt(Au);
  if (!e) throw new Error("[Vuetify] Could not find defaults instance");
  return e;
}
function ca(e, t) {
  const n = Iw(), a = Se(e), r = z(() => {
    if (fe(t?.disabled)) return n.value;
    const o = fe(t?.scoped), l = fe(t?.reset), s = fe(t?.root);
    if (a.value == null && !(o || l || s)) return n.value;
    let d = kr(a.value, {
      prev: n.value
    });
    if (o) return d;
    if (l || s) {
      const u = Number(l || 1 / 0);
      for (let f = 0; f <= u && !(!d || !("prev" in d)); f++)
        d = d.prev;
      return d && typeof s == "string" && s in d && (d = kr(kr(d, {
        prev: d
      }), d[s])), d;
    }
    return d.prev ? kr(d.prev, d) : d;
  });
  return Nn(Au, r), r;
}
function K3(e, t) {
  return e.props && (typeof e.props[t] < "u" || typeof e.props[ql(t)] < "u");
}
function G3() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 ? arguments[1] : void 0, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Iw();
  const a = ga("useDefaults");
  if (t = t ?? a.type.name ?? a.type.__name, !t)
    throw new Error("[Vuetify] Could not determine component name");
  const r = z(() => n.value?.[e._as ?? t]), i = new Proxy(e, {
    get(s, d) {
      const u = Reflect.get(s, d);
      if (d === "class" || d === "style")
        return [r.value?.[d], u].filter((g) => g != null);
      if (K3(a.vnode, d)) return u;
      const f = r.value?.[d];
      if (f !== void 0) return f;
      const _ = n.value?.global?.[d];
      return _ !== void 0 ? _ : u;
    }
  }), o = ot();
  ea(() => {
    if (r.value) {
      const s = Object.entries(r.value).filter((d) => {
        let [u] = d;
        return u.startsWith(u[0].toUpperCase());
      });
      o.value = s.length ? Object.fromEntries(s) : void 0;
    } else
      o.value = void 0;
  });
  function l() {
    const s = j3(Au, a);
    Nn(Au, z(() => o.value ? kr(s?.value ?? {}, o.value) : s?.value));
  }
  return {
    props: i,
    provideSubDefaults: l
  };
}
function fi(e) {
  if (e._setup = e._setup ?? e.setup, !e.name)
    return e;
  if (e._setup) {
    e.props = De(e.props ?? {}, e.name)();
    const t = Object.keys(e.props).filter((n) => n !== "class" && n !== "style");
    e.filterProps = function(a) {
      return tl(a, t);
    }, e.props._as = String, e.setup = function(a, r) {
      const i = Iw();
      if (!i.value) return e._setup(a, r);
      const {
        props: o,
        provideSubDefaults: l
      } = G3(a, a._as ?? e.name, i), s = e._setup(o, r);
      return l(), s;
    };
  }
  return e;
}
function We() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
  return (t) => (e ? fi : Ha)(t);
}
function Q3(e, t) {
  return t.props = e, t;
}
function xo(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "div", n = arguments.length > 2 ? arguments[2] : void 0;
  return We()({
    name: n ?? So(Nr(e.replace(/__/g, "-"))),
    props: {
      tag: {
        type: String,
        default: t
      },
      ...vt()
    },
    setup(a, r) {
      let {
        slots: i
      } = r;
      return () => Co(a.tag, {
        class: [e, a.class],
        style: a.style
      }, i.default?.());
    }
  });
}
function LT(e) {
  if (typeof e.getRootNode != "function") {
    for (; e.parentNode; ) e = e.parentNode;
    return e !== document ? null : document;
  }
  const t = e.getRootNode();
  return t !== document && t.getRootNode({
    composed: !0
  }) !== document ? null : t;
}
const _f = "cubic-bezier(0.4, 0, 0.2, 1)", J3 = "cubic-bezier(0.0, 0, 0.2, 1)", X3 = "cubic-bezier(0.4, 0, 1, 1)";
function eC(e, t, n) {
  return Object.keys(e).filter((a) => Sw(a) && a.endsWith(t)).reduce((a, r) => (a[r.slice(0, -t.length)] = (i) => e[r](i, n(i)), a), {});
}
function Ew(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
  for (; e; ) {
    if (t ? Z3(e) : Pw(e)) return e;
    e = e.parentElement;
  }
  return document.scrollingElement;
}
function b_(e, t) {
  const n = [];
  if (t && e && !t.contains(e)) return n;
  for (; e && (Pw(e) && n.push(e), e !== t); )
    e = e.parentElement;
  return n;
}
function Pw(e) {
  if (!e || e.nodeType !== Node.ELEMENT_NODE) return !1;
  const t = window.getComputedStyle(e);
  return t.overflowY === "scroll" || t.overflowY === "auto" && e.scrollHeight > e.clientHeight;
}
function Z3(e) {
  if (!e || e.nodeType !== Node.ELEMENT_NODE) return !1;
  const t = window.getComputedStyle(e);
  return ["scroll", "auto"].includes(t.overflowY);
}
function e4(e) {
  for (; e; ) {
    if (window.getComputedStyle(e).position === "fixed")
      return !0;
    e = e.offsetParent;
  }
  return !1;
}
function Ge(e) {
  const t = ga("useRender");
  t.render = e;
}
function kt(e, t, n) {
  let a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : (f) => f, r = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : (f) => f;
  const i = ga("useProxiedModel"), o = Se(e[t] !== void 0 ? e[t] : n), l = ql(t), d = z(l !== t ? () => (e[t], !!((i.vnode.props?.hasOwnProperty(t) || i.vnode.props?.hasOwnProperty(l)) && (i.vnode.props?.hasOwnProperty(`onUpdate:${t}`) || i.vnode.props?.hasOwnProperty(`onUpdate:${l}`)))) : () => (e[t], !!(i.vnode.props?.hasOwnProperty(t) && i.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));
  Fr(() => !d.value, () => {
    nt(() => e[t], (f) => {
      o.value = f;
    });
  });
  const u = z({
    get() {
      const f = e[t];
      return a(d.value ? f : o.value);
    },
    set(f) {
      const _ = r(f), g = Ot(d.value ? e[t] : o.value);
      g === _ || a(g) === f || (o.value = _, i?.emit(`update:${t}`, _));
    }
  });
  return Object.defineProperty(u, "externalValue", {
    get: () => d.value ? e[t] : o.value
  }), u;
}
const t4 = {
  badge: "Badge",
  open: "Open",
  close: "Close",
  dismiss: "Dismiss",
  confirmEdit: {
    ok: "OK",
    cancel: "Cancel"
  },
  dataIterator: {
    noResultsText: "No matching records found",
    loadingText: "Loading items..."
  },
  dataTable: {
    itemsPerPageText: "Rows per page:",
    ariaLabel: {
      sortDescending: "Sorted descending.",
      sortAscending: "Sorted ascending.",
      sortNone: "Not sorted.",
      activateNone: "Activate to remove sorting.",
      activateDescending: "Activate to sort descending.",
      activateAscending: "Activate to sort ascending."
    },
    sortBy: "Sort by"
  },
  dataFooter: {
    itemsPerPageText: "Items per page:",
    itemsPerPageAll: "All",
    nextPage: "Next page",
    prevPage: "Previous page",
    firstPage: "First page",
    lastPage: "Last page",
    pageText: "{0}-{1} of {2}"
  },
  dateRangeInput: {
    divider: "to"
  },
  datePicker: {
    itemsSelected: "{0} selected",
    range: {
      title: "Select dates",
      header: "Enter dates"
    },
    title: "Select date",
    header: "Enter date",
    input: {
      placeholder: "Enter date"
    }
  },
  noDataText: "No data available",
  carousel: {
    prev: "Previous visual",
    next: "Next visual",
    ariaLabel: {
      delimiter: "Carousel slide {0} of {1}"
    }
  },
  calendar: {
    moreEvents: "{0} more",
    today: "Today"
  },
  input: {
    clear: "Clear {0}",
    prependAction: "{0} prepended action",
    appendAction: "{0} appended action",
    otp: "Please enter OTP character {0}"
  },
  fileInput: {
    counter: "{0} files",
    counterSize: "{0} files ({1} in total)"
  },
  fileUpload: {
    title: "Drag and drop files here",
    divider: "or",
    browse: "Browse Files"
  },
  timePicker: {
    am: "AM",
    pm: "PM",
    title: "Select Time"
  },
  pagination: {
    ariaLabel: {
      root: "Pagination Navigation",
      next: "Next page",
      previous: "Previous page",
      page: "Go to page {0}",
      currentPage: "Page {0}, Current page",
      first: "First page",
      last: "Last page"
    }
  },
  stepper: {
    next: "Next",
    prev: "Previous"
  },
  rating: {
    ariaLabel: {
      item: "Rating {0} of {1}"
    }
  },
  loading: "Loading...",
  infiniteScroll: {
    loadMore: "Load more",
    empty: "No more"
  },
  rules: {
    required: "This field is required",
    email: "Please enter a valid email",
    number: "This field can only contain numbers",
    integer: "This field can only contain integer values",
    capital: "This field can only contain uppercase letters",
    maxLength: "You must enter a maximum of {0} characters",
    minLength: "You must enter a minimum of {0} characters",
    strictLength: "The length of the entered field is invalid",
    exclude: "The {0} character is not allowed",
    notEmpty: "Please choose at least one value",
    pattern: "Invalid format"
  }
}, tC = "$vuetify.", nC = (e, t) => e.replace(/\{(\d+)\}/g, (n, a) => String(t[Number(a)])), FT = (e, t, n) => function(a) {
  for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
    i[o - 1] = arguments[o];
  if (!a.startsWith(tC))
    return nC(a, i);
  const l = a.replace(tC, ""), s = e.value && n.value[e.value], d = t.value && n.value[t.value];
  let u = Jl(s, l, null);
  return u || (`${a}${e.value}`, u = Jl(d, l, null)), u || (u = a), typeof u != "string" && (u = a), nC(u, i);
};
function NT(e, t) {
  return (n, a) => new Intl.NumberFormat([e.value, t.value], a).format(n);
}
function Rg(e, t, n) {
  const a = kt(e, t, e[t] ?? n.value);
  return a.value = e[t] ?? n.value, nt(n, (r) => {
    e[t] == null && (a.value = n.value);
  }), a;
}
function UT(e) {
  return (t) => {
    const n = Rg(t, "locale", e.current), a = Rg(t, "fallback", e.fallback), r = Rg(t, "messages", e.messages);
    return {
      name: "vuetify",
      current: n,
      fallback: a,
      messages: r,
      t: FT(n, a, r),
      n: NT(n, a),
      provide: UT({
        current: n,
        fallback: a,
        messages: r
      })
    };
  };
}
function n4(e) {
  const t = ot(e?.locale ?? "en"), n = ot(e?.fallback ?? "en"), a = Se({
    en: t4,
    ...e?.messages
  });
  return {
    name: "vuetify",
    current: t,
    fallback: n,
    messages: a,
    t: FT(t, n, a),
    n: NT(t, n),
    provide: UT({
      current: t,
      fallback: n,
      messages: a
    })
  };
}
const xu = Symbol.for("vuetify:locale");
function a4(e) {
  return e.name != null;
}
function r4(e) {
  const t = e?.adapter && a4(e?.adapter) ? e?.adapter : n4(e), n = s4(t, e);
  return {
    ...t,
    ...n
  };
}
function ua() {
  const e = Gt(xu);
  if (!e) throw new Error("[Vuetify] Could not find injected locale instance");
  return e;
}
function i4(e) {
  const t = Gt(xu);
  if (!t) throw new Error("[Vuetify] Could not find injected locale instance");
  const n = t.provide(e), a = l4(n, t.rtl, e), r = {
    ...n,
    ...a
  };
  return Nn(xu, r), r;
}
function o4() {
  return {
    af: !1,
    ar: !0,
    bg: !1,
    ca: !1,
    ckb: !1,
    cs: !1,
    de: !1,
    el: !1,
    en: !1,
    es: !1,
    et: !1,
    fa: !0,
    fi: !1,
    fr: !1,
    hr: !1,
    hu: !1,
    he: !0,
    id: !1,
    it: !1,
    ja: !1,
    km: !1,
    ko: !1,
    lv: !1,
    lt: !1,
    nl: !1,
    no: !1,
    pl: !1,
    pt: !1,
    ro: !1,
    ru: !1,
    sk: !1,
    sl: !1,
    srCyrl: !1,
    srLatn: !1,
    sv: !1,
    th: !1,
    tr: !1,
    az: !1,
    uk: !1,
    vi: !1,
    zhHans: !1,
    zhHant: !1
  };
}
function s4(e, t) {
  const n = Se(t?.rtl ?? o4()), a = z(() => n.value[e.current.value] ?? !1);
  return {
    isRtl: a,
    rtl: n,
    rtlClasses: be(() => `v-locale--is-${a.value ? "rtl" : "ltr"}`)
  };
}
function l4(e, t, n) {
  const a = z(() => n.rtl ?? t.value[e.current.value] ?? !1);
  return {
    isRtl: a,
    rtl: t,
    rtlClasses: be(() => `v-locale--is-${a.value ? "rtl" : "ltr"}`)
  };
}
function Ra() {
  const e = Gt(xu);
  if (!e) throw new Error("[Vuetify] Could not find injected rtl instance");
  return {
    isRtl: e.isRtl,
    rtlClasses: e.rtlClasses
  };
}
function Nf(e) {
  const t = e.slice(-2).toUpperCase();
  switch (!0) {
    case e === "GB-alt-variant":
      return {
        firstDay: 0,
        firstWeekSize: 4
      };
    case e === "001":
      return {
        firstDay: 1,
        firstWeekSize: 1
      };
    case `AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):
      return {
        firstDay: 0,
        firstWeekSize: 1
      };
    case `AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):
      return {
        firstDay: 1,
        firstWeekSize: 1
      };
    case `AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):
      return {
        firstDay: 1,
        firstWeekSize: 4
      };
    case "AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):
      return {
        firstDay: 6,
        firstWeekSize: 1
      };
    case t === "MV":
      return {
        firstDay: 5,
        firstWeekSize: 1
      };
    case t === "PT":
      return {
        firstDay: 0,
        firstWeekSize: 4
      };
    default:
      return null;
  }
}
function c4(e, t, n) {
  const a = [];
  let r = [];
  const i = $T(e), o = qT(e), l = n ?? Nf(t)?.firstDay ?? 0, s = (i.getDay() - l + 7) % 7, d = (o.getDay() - l + 7) % 7;
  for (let u = 0; u < s; u++) {
    const f = new Date(i);
    f.setDate(f.getDate() - (s - u)), r.push(f);
  }
  for (let u = 1; u <= o.getDate(); u++) {
    const f = new Date(e.getFullYear(), e.getMonth(), u);
    r.push(f), r.length === 7 && (a.push(r), r = []);
  }
  for (let u = 1; u < 7 - d; u++) {
    const f = new Date(o);
    f.setDate(f.getDate() + u), r.push(f);
  }
  return r.length > 0 && a.push(r), a;
}
function zy(e, t, n) {
  const a = n ?? Nf(t)?.firstDay ?? 0, r = new Date(e);
  for (; r.getDay() !== a; )
    r.setDate(r.getDate() - 1);
  return r;
}
function u4(e, t) {
  const n = new Date(e), a = ((Nf(t)?.firstDay ?? 0) + 6) % 7;
  for (; n.getDay() !== a; )
    n.setDate(n.getDate() + 1);
  return n;
}
function $T(e) {
  return new Date(e.getFullYear(), e.getMonth(), 1);
}
function qT(e) {
  return new Date(e.getFullYear(), e.getMonth() + 1, 0);
}
function d4(e) {
  const t = e.split("-").map(Number);
  return new Date(t[0], t[1] - 1, t[2]);
}
const f4 = /^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;
function HT(e) {
  if (e == null) return /* @__PURE__ */ new Date();
  if (e instanceof Date) return e;
  if (typeof e == "string") {
    let t;
    if (f4.test(e))
      return d4(e);
    if (t = Date.parse(e), !isNaN(t)) return new Date(t);
  }
  return null;
}
const aC = new Date(2e3, 0, 2);
function m4(e, t) {
  const n = t ?? Nf(e)?.firstDay ?? 0;
  return ho(7).map((a) => {
    const r = new Date(aC);
    return r.setDate(aC.getDate() + n + a), new Intl.DateTimeFormat(e, {
      weekday: "narrow"
    }).format(r);
  });
}
function h4(e, t, n, a) {
  const r = HT(e) ?? /* @__PURE__ */ new Date(), i = a?.[t];
  if (typeof i == "function")
    return i(r, t, n);
  let o = {};
  switch (t) {
    case "fullDate":
      o = {
        year: "numeric",
        month: "long",
        day: "numeric"
      };
      break;
    case "fullDateWithWeekday":
      o = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric"
      };
      break;
    case "normalDate":
      const l = r.getDate(), s = new Intl.DateTimeFormat(n, {
        month: "long"
      }).format(r);
      return `${l} ${s}`;
    case "normalDateWithWeekday":
      o = {
        weekday: "short",
        day: "numeric",
        month: "short"
      };
      break;
    case "shortDate":
      o = {
        month: "short",
        day: "numeric"
      };
      break;
    case "year":
      o = {
        year: "numeric"
      };
      break;
    case "month":
      o = {
        month: "long"
      };
      break;
    case "monthShort":
      o = {
        month: "short"
      };
      break;
    case "monthAndYear":
      o = {
        month: "long",
        year: "numeric"
      };
      break;
    case "monthAndDate":
      o = {
        month: "long",
        day: "numeric"
      };
      break;
    case "weekday":
      o = {
        weekday: "long"
      };
      break;
    case "weekdayShort":
      o = {
        weekday: "short"
      };
      break;
    case "dayOfMonth":
      return new Intl.NumberFormat(n).format(r.getDate());
    case "hours12h":
      o = {
        hour: "numeric",
        hour12: !0
      };
      break;
    case "hours24h":
      o = {
        hour: "numeric",
        hour12: !1
      };
      break;
    case "minutes":
      o = {
        minute: "numeric"
      };
      break;
    case "seconds":
      o = {
        second: "numeric"
      };
      break;
    case "fullTime":
      o = {
        hour: "numeric",
        minute: "numeric"
      };
      break;
    case "fullTime12h":
      o = {
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      };
      break;
    case "fullTime24h":
      o = {
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      };
      break;
    case "fullDateTime":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric"
      };
      break;
    case "fullDateTime12h":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      };
      break;
    case "fullDateTime24h":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      };
      break;
    case "keyboardDate":
      o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit"
      };
      break;
    case "keyboardDateTime":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric"
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    case "keyboardDateTime12h":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    case "keyboardDateTime24h":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    default:
      o = i ?? {
        timeZone: "UTC",
        timeZoneName: "short"
      };
  }
  return new Intl.DateTimeFormat(n, o).format(r);
}
function _4(e, t) {
  const n = e.toJsDate(t), a = n.getFullYear(), r = FS(String(n.getMonth() + 1), 2, "0"), i = FS(String(n.getDate()), 2, "0");
  return `${a}-${r}-${i}`;
}
function p4(e) {
  const [t, n, a] = e.split("-").map(Number);
  return new Date(t, n - 1, a);
}
function v4(e, t) {
  const n = new Date(e);
  return n.setMinutes(n.getMinutes() + t), n;
}
function g4(e, t) {
  const n = new Date(e);
  return n.setHours(n.getHours() + t), n;
}
function Gh(e, t) {
  const n = new Date(e);
  return n.setDate(n.getDate() + t), n;
}
function y4(e, t) {
  const n = new Date(e);
  return n.setDate(n.getDate() + t * 7), n;
}
function b4(e, t) {
  const n = new Date(e);
  return n.setDate(1), n.setMonth(n.getMonth() + t), n;
}
function Wy(e) {
  return e.getFullYear();
}
function w4(e) {
  return e.getMonth();
}
function k4(e, t, n, a) {
  const r = Nf(t), i = n ?? r?.firstDay ?? 0, o = a ?? r?.firstWeekSize ?? 1;
  function l(g) {
    const v = new Date(g, 0, 1);
    return 7 - jy(v, zy(v, t, i), "days");
  }
  let s = Wy(e);
  const d = Gh(zy(e, t, i), 6);
  s < Wy(d) && l(s + 1) >= o && s++;
  const u = new Date(s, 0, 1), f = l(s), _ = f >= o ? Gh(u, f - 7) : Gh(u, f);
  return 1 + jy(zT(e), k_(_), "weeks");
}
function S4(e) {
  return e.getDate();
}
function C4(e) {
  return new Date(e.getFullYear(), e.getMonth() + 1, 1);
}
function A4(e) {
  return new Date(e.getFullYear(), e.getMonth() - 1, 1);
}
function x4(e) {
  return e.getHours();
}
function T4(e) {
  return e.getMinutes();
}
function I4(e) {
  return new Date(e.getFullYear(), 0, 1);
}
function E4(e) {
  return new Date(e.getFullYear(), 11, 31);
}
function P4(e, t) {
  return w_(e, t[0]) && B4(e, t[1]);
}
function O4(e) {
  const t = new Date(e);
  return t instanceof Date && !isNaN(t.getTime());
}
function w_(e, t) {
  return e.getTime() > t.getTime();
}
function D4(e, t) {
  return w_(k_(e), k_(t));
}
function B4(e, t) {
  return e.getTime() < t.getTime();
}
function rC(e, t) {
  return e.getTime() === t.getTime();
}
function V4(e, t) {
  return e.getDate() === t.getDate() && e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear();
}
function M4(e, t) {
  return e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear();
}
function R4(e, t) {
  return e.getFullYear() === t.getFullYear();
}
function jy(e, t, n) {
  const a = new Date(e), r = new Date(t);
  switch (n) {
    case "years":
      return a.getFullYear() - r.getFullYear();
    case "quarters":
      return Math.floor((a.getMonth() - r.getMonth() + (a.getFullYear() - r.getFullYear()) * 12) / 4);
    case "months":
      return a.getMonth() - r.getMonth() + (a.getFullYear() - r.getFullYear()) * 12;
    case "weeks":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60 * 24 * 7));
    case "days":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60 * 24));
    case "hours":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60));
    case "minutes":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60));
    case "seconds":
      return Math.floor((a.getTime() - r.getTime()) / 1e3);
    default:
      return a.getTime() - r.getTime();
  }
}
function L4(e, t) {
  const n = new Date(e);
  return n.setHours(t), n;
}
function F4(e, t) {
  const n = new Date(e);
  return n.setMinutes(t), n;
}
function N4(e, t) {
  const n = new Date(e);
  return n.setMonth(t), n;
}
function U4(e, t) {
  const n = new Date(e);
  return n.setDate(t), n;
}
function $4(e, t) {
  const n = new Date(e);
  return n.setFullYear(t), n;
}
function k_(e) {
  return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0, 0);
}
function zT(e) {
  return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 23, 59, 59, 999);
}
class q4 {
  constructor(t) {
    this.locale = t.locale, this.formats = t.formats;
  }
  date(t) {
    return HT(t);
  }
  toJsDate(t) {
    return t;
  }
  toISO(t) {
    return _4(this, t);
  }
  parseISO(t) {
    return p4(t);
  }
  addMinutes(t, n) {
    return v4(t, n);
  }
  addHours(t, n) {
    return g4(t, n);
  }
  addDays(t, n) {
    return Gh(t, n);
  }
  addWeeks(t, n) {
    return y4(t, n);
  }
  addMonths(t, n) {
    return b4(t, n);
  }
  getWeekArray(t, n) {
    const a = n !== void 0 ? Number(n) : void 0;
    return c4(t, this.locale, a);
  }
  startOfWeek(t, n) {
    const a = n !== void 0 ? Number(n) : void 0;
    return zy(t, this.locale, a);
  }
  endOfWeek(t) {
    return u4(t, this.locale);
  }
  startOfMonth(t) {
    return $T(t);
  }
  endOfMonth(t) {
    return qT(t);
  }
  format(t, n) {
    return h4(t, n, this.locale, this.formats);
  }
  isEqual(t, n) {
    return rC(t, n);
  }
  isValid(t) {
    return O4(t);
  }
  isWithinRange(t, n) {
    return P4(t, n);
  }
  isAfter(t, n) {
    return w_(t, n);
  }
  isAfterDay(t, n) {
    return D4(t, n);
  }
  isBefore(t, n) {
    return !w_(t, n) && !rC(t, n);
  }
  isSameDay(t, n) {
    return V4(t, n);
  }
  isSameMonth(t, n) {
    return M4(t, n);
  }
  isSameYear(t, n) {
    return R4(t, n);
  }
  setMinutes(t, n) {
    return F4(t, n);
  }
  setHours(t, n) {
    return L4(t, n);
  }
  setMonth(t, n) {
    return N4(t, n);
  }
  setDate(t, n) {
    return U4(t, n);
  }
  setYear(t, n) {
    return $4(t, n);
  }
  getDiff(t, n, a) {
    return jy(t, n, a);
  }
  getWeekdays(t) {
    const n = t !== void 0 ? Number(t) : void 0;
    return m4(this.locale, n);
  }
  getYear(t) {
    return Wy(t);
  }
  getMonth(t) {
    return w4(t);
  }
  getWeek(t, n, a) {
    const r = n !== void 0 ? Number(n) : void 0;
    return k4(t, this.locale, r, a);
  }
  getDate(t) {
    return S4(t);
  }
  getNextMonth(t) {
    return C4(t);
  }
  getPreviousMonth(t) {
    return A4(t);
  }
  getHours(t) {
    return x4(t);
  }
  getMinutes(t) {
    return T4(t);
  }
  startOfDay(t) {
    return k_(t);
  }
  endOfDay(t) {
    return zT(t);
  }
  startOfYear(t) {
    return I4(t);
  }
  endOfYear(t) {
    return E4(t);
  }
}
const WT = Symbol.for("vuetify:date-options"), iC = Symbol.for("vuetify:date-adapter");
function H4(e, t) {
  const n = kr({
    adapter: q4,
    locale: {
      af: "af-ZA",
      // ar: '', # not the same value for all variants
      bg: "bg-BG",
      ca: "ca-ES",
      ckb: "",
      cs: "cs-CZ",
      de: "de-DE",
      el: "el-GR",
      en: "en-US",
      // es: '', # not the same value for all variants
      et: "et-EE",
      fa: "fa-IR",
      fi: "fi-FI",
      // fr: '', #not the same value for all variants
      hr: "hr-HR",
      hu: "hu-HU",
      he: "he-IL",
      id: "id-ID",
      it: "it-IT",
      ja: "ja-JP",
      ko: "ko-KR",
      lv: "lv-LV",
      lt: "lt-LT",
      nl: "nl-NL",
      no: "no-NO",
      pl: "pl-PL",
      pt: "pt-PT",
      ro: "ro-RO",
      ru: "ru-RU",
      sk: "sk-SK",
      sl: "sl-SI",
      srCyrl: "sr-SP",
      srLatn: "sr-SP",
      sv: "sv-SE",
      th: "th-TH",
      tr: "tr-TR",
      az: "az-AZ",
      uk: "uk-UA",
      vi: "vi-VN",
      zhHans: "zh-CN",
      zhHant: "zh-TW"
    }
  }, e);
  return {
    options: n,
    instance: jT(n, t)
  };
}
function z4(e, t, n) {
  const a = e.getDiff(e.endOfDay(n ?? t), e.startOfDay(t), "days"), r = [t];
  for (let i = 1; i < a; i++) {
    const o = e.addDays(t, i);
    r.push(o);
  }
  return n && r.push(e.endOfDay(n)), r;
}
function jT(e, t) {
  const n = oa(typeof e.adapter == "function" ? new e.adapter({
    locale: e.locale[t.current.value] ?? t.current.value,
    formats: e.formats
  }) : e.adapter);
  return nt(t.current, (a) => {
    n.locale = e.locale[a] ?? a ?? n.locale;
  }), n;
}
function Uf() {
  const e = Gt(WT);
  if (!e) throw new Error("[Vuetify] Could not find injected date options");
  const t = ua();
  return jT(e, t);
}
const op = ["sm", "md", "lg", "xl", "xxl"], Yy = Symbol.for("vuetify:display"), oC = {
  mobileBreakpoint: "lg",
  thresholds: {
    xs: 0,
    sm: 600,
    md: 960,
    lg: 1280,
    xl: 1920,
    xxl: 2560
  }
}, W4 = function() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : oC;
  return kr(oC, e);
};
function sC(e) {
  return vn && !e ? window.innerWidth : typeof e == "object" && e.clientWidth || 0;
}
function lC(e) {
  return vn && !e ? window.innerHeight : typeof e == "object" && e.clientHeight || 0;
}
function cC(e) {
  const t = vn && !e ? window.navigator.userAgent : "ssr";
  function n(v) {
    return !!t.match(v);
  }
  const a = n(/android/i), r = n(/iphone|ipad|ipod/i), i = n(/cordova/i), o = n(/electron/i), l = n(/chrome/i), s = n(/edge/i), d = n(/firefox/i), u = n(/opera/i), f = n(/win/i), _ = n(/mac/i), g = n(/linux/i);
  return {
    android: a,
    ios: r,
    cordova: i,
    electron: o,
    chrome: l,
    edge: s,
    firefox: d,
    opera: u,
    win: f,
    mac: _,
    linux: g,
    touch: l3,
    ssr: t === "ssr"
  };
}
function j4(e, t) {
  const {
    thresholds: n,
    mobileBreakpoint: a
  } = W4(e), r = ot(lC(t)), i = ot(cC(t)), o = oa({}), l = ot(sC(t));
  function s() {
    r.value = lC(), l.value = sC();
  }
  function d() {
    s(), i.value = cC();
  }
  return ea(() => {
    const u = l.value < n.sm, f = l.value < n.md && !u, _ = l.value < n.lg && !(f || u), g = l.value < n.xl && !(_ || f || u), v = l.value < n.xxl && !(g || _ || f || u), w = l.value >= n.xxl, b = u ? "xs" : f ? "sm" : _ ? "md" : g ? "lg" : v ? "xl" : "xxl", p = typeof a == "number" ? a : n[a], y = l.value < p;
    o.xs = u, o.sm = f, o.md = _, o.lg = g, o.xl = v, o.xxl = w, o.smAndUp = !u, o.mdAndUp = !(u || f), o.lgAndUp = !(u || f || _), o.xlAndUp = !(u || f || _ || g), o.smAndDown = !(_ || g || v || w), o.mdAndDown = !(g || v || w), o.lgAndDown = !(v || w), o.xlAndDown = !w, o.name = b, o.height = r.value, o.width = l.value, o.mobile = y, o.mobileBreakpoint = a, o.platform = i.value, o.thresholds = n;
  }), vn && (window.addEventListener("resize", s, {
    passive: !0
  }), qa(() => {
    window.removeEventListener("resize", s);
  }, !0)), {
    ...$u(o),
    update: d,
    ssr: !!t
  };
}
const cc = De({
  mobile: {
    type: Boolean,
    default: !1
  },
  mobileBreakpoint: [Number, String]
}, "display");
function mi() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
    mobile: null
  }, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  const n = Gt(Yy);
  if (!n) throw new Error("Could not find Vuetify display injection");
  const a = z(() => e.mobile ? !0 : typeof e.mobileBreakpoint == "number" ? n.width.value < e.mobileBreakpoint : e.mobileBreakpoint ? n.width.value < n.thresholds.value[e.mobileBreakpoint] : e.mobile === null ? n.mobile.value : !1), r = be(() => t ? {
    [`${t}--mobile`]: a.value
  } : {});
  return {
    ...n,
    displayClasses: r,
    mobile: a
  };
}
const YT = Symbol.for("vuetify:goto");
function KT() {
  return {
    container: void 0,
    duration: 300,
    layout: !1,
    offset: 0,
    easing: "easeInOutCubic",
    patterns: {
      linear: (e) => e,
      easeInQuad: (e) => e ** 2,
      easeOutQuad: (e) => e * (2 - e),
      easeInOutQuad: (e) => e < 0.5 ? 2 * e ** 2 : -1 + (4 - 2 * e) * e,
      easeInCubic: (e) => e ** 3,
      easeOutCubic: (e) => --e ** 3 + 1,
      easeInOutCubic: (e) => e < 0.5 ? 4 * e ** 3 : (e - 1) * (2 * e - 2) * (2 * e - 2) + 1,
      easeInQuart: (e) => e ** 4,
      easeOutQuart: (e) => 1 - --e ** 4,
      easeInOutQuart: (e) => e < 0.5 ? 8 * e ** 4 : 1 - 8 * --e ** 4,
      easeInQuint: (e) => e ** 5,
      easeOutQuint: (e) => 1 + --e ** 5,
      easeInOutQuint: (e) => e < 0.5 ? 16 * e ** 5 : 1 + 16 * --e ** 5
    }
  };
}
function Y4(e) {
  return Ow(e) ?? (document.scrollingElement || document.body);
}
function Ow(e) {
  return typeof e == "string" ? document.querySelector(e) : kw(e);
}
function Lg(e, t, n) {
  if (typeof e == "number") return t && n ? -e : e;
  let a = Ow(e), r = 0;
  for (; a; )
    r += t ? a.offsetLeft : a.offsetTop, a = a.offsetParent;
  return r;
}
function K4(e, t) {
  return {
    rtl: t.isRtl,
    options: kr(KT(), e)
  };
}
async function uC(e, t, n, a) {
  const r = n ? "scrollLeft" : "scrollTop", i = kr(a?.options ?? KT(), t), o = a?.rtl.value, l = (typeof e == "number" ? e : Ow(e)) ?? 0, s = i.container === "parent" && l instanceof HTMLElement ? l.parentElement : Y4(i.container), d = typeof i.easing == "function" ? i.easing : i.patterns[i.easing];
  if (!d) throw new TypeError(`Easing function "${i.easing}" not found.`);
  let u;
  if (typeof l == "number")
    u = Lg(l, n, o);
  else if (u = Lg(l, n, o) - Lg(s, n, o), i.layout) {
    const v = window.getComputedStyle(l).getPropertyValue("--v-layout-top");
    v && (u -= parseInt(v, 10));
  }
  u += i.offset, u = Q4(s, u, !!o, !!n);
  const f = s[r] ?? 0;
  if (u === f) return Promise.resolve(u);
  const _ = performance.now();
  return new Promise((g) => requestAnimationFrame(function v(w) {
    const p = (w - _) / i.duration, y = Math.floor(f + (u - f) * d(Pn(p, 0, 1)));
    if (s[r] = y, p >= 1 && Math.abs(y - s[r]) < 10)
      return g(u);
    if (p > 2)
      return g(s[r]);
    requestAnimationFrame(v);
  }));
}
function G4() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const t = Gt(YT), {
    isRtl: n
  } = Ra();
  if (!t) throw new Error("[Vuetify] Could not find injected goto instance");
  const a = {
    ...t,
    // can be set via VLocaleProvider
    rtl: be(() => t.rtl.value || n.value)
  };
  async function r(i, o) {
    return uC(i, kr(e, o), !1, a);
  }
  return r.horizontal = async (i, o) => uC(i, kr(e, o), !0, a), r;
}
function Q4(e, t, n, a) {
  const {
    scrollWidth: r,
    scrollHeight: i
  } = e, [o, l] = e === document.scrollingElement ? [window.innerWidth, window.innerHeight] : [e.offsetWidth, e.offsetHeight];
  let s, d;
  return a ? n ? (s = -(r - o), d = 0) : (s = 0, d = r - o) : (s = 0, d = i + -l), Pn(t, s, d);
}
const J4 = {
  collapse: "mdi-chevron-up",
  complete: "mdi-check",
  cancel: "mdi-close-circle",
  close: "mdi-close",
  delete: "mdi-close-circle",
  // delete (e.g. v-chip close)
  clear: "mdi-close-circle",
  success: "mdi-check-circle",
  info: "mdi-information",
  warning: "mdi-alert-circle",
  error: "mdi-close-circle",
  prev: "mdi-chevron-left",
  next: "mdi-chevron-right",
  checkboxOn: "mdi-checkbox-marked",
  checkboxOff: "mdi-checkbox-blank-outline",
  checkboxIndeterminate: "mdi-minus-box",
  delimiter: "mdi-circle",
  // for carousel
  sortAsc: "mdi-arrow-up",
  sortDesc: "mdi-arrow-down",
  expand: "mdi-chevron-down",
  menu: "mdi-menu",
  subgroup: "mdi-menu-down",
  dropdown: "mdi-menu-down",
  radioOn: "mdi-radiobox-marked",
  radioOff: "mdi-radiobox-blank",
  edit: "mdi-pencil",
  ratingEmpty: "mdi-star-outline",
  ratingFull: "mdi-star",
  ratingHalf: "mdi-star-half-full",
  loading: "mdi-cached",
  first: "mdi-page-first",
  last: "mdi-page-last",
  unfold: "mdi-unfold-more-horizontal",
  file: "mdi-paperclip",
  plus: "mdi-plus",
  minus: "mdi-minus",
  calendar: "mdi-calendar",
  treeviewCollapse: "mdi-menu-down",
  treeviewExpand: "mdi-menu-right",
  eyeDropper: "mdi-eyedropper",
  upload: "mdi-cloud-upload",
  color: "mdi-palette"
}, X4 = {
  // Not using mergeProps here, functional components merge props by default (?)
  component: (e) => Co(Bw, {
    ...e,
    class: "mdi"
  })
}, At = [String, Function, Object, Array], Ky = Symbol.for("vuetify:icons"), sp = De({
  icon: {
    type: At
  },
  // Could not remove this and use makeTagProps, types complained because it is not required
  tag: {
    type: [String, Object, Function],
    required: !0
  }
}, "icon"), Gy = We()({
  name: "VComponentIcon",
  props: sp(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return () => {
      const a = e.icon;
      return h(e.tag, null, {
        default: () => [e.icon ? h(a, null, null) : n.default?.()]
      });
    };
  }
}), Dw = fi({
  name: "VSvgIcon",
  inheritAttrs: !1,
  props: sp(),
  setup(e, t) {
    let {
      attrs: n
    } = t;
    return () => h(e.tag, He(n, {
      style: null
    }), {
      default: () => [A("svg", {
        class: "v-icon__svg",
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 24 24",
        role: "img",
        "aria-hidden": "true"
      }, [Array.isArray(e.icon) ? e.icon.map((a) => Array.isArray(a) ? A("path", {
        d: a[0],
        "fill-opacity": a[1]
      }, null) : A("path", {
        d: a
      }, null)) : A("path", {
        d: e.icon
      }, null)])]
    });
  }
}), Z4 = fi({
  name: "VLigatureIcon",
  props: sp(),
  setup(e) {
    return () => h(e.tag, null, {
      default: () => [e.icon]
    });
  }
}), Bw = fi({
  name: "VClassIcon",
  props: sp(),
  setup(e) {
    return () => h(e.tag, {
      class: Ee(e.icon)
    }, null);
  }
});
function e8() {
  return {
    svg: {
      component: Dw
    },
    class: {
      component: Bw
    }
  };
}
function t8(e) {
  const t = e8(), n = e?.defaultSet ?? "mdi";
  return n === "mdi" && !t.mdi && (t.mdi = X4), kr({
    defaultSet: n,
    sets: t,
    aliases: {
      ...J4,
      /* eslint-disable max-len */
      vuetify: ["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z", ["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z", 0.6]],
      "vuetify-outline": "svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z",
      "vuetify-play": ["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z", ["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z", 0.6]]
      /* eslint-enable max-len */
    }
  }, e);
}
const n8 = (e) => {
  const t = Gt(Ky);
  if (!t) throw new Error("Missing Vuetify Icons provide!");
  return {
    iconData: z(() => {
      const a = yo(e);
      if (!a) return {
        component: Gy
      };
      let r = a;
      if (typeof r == "string" && (r = r.trim(), r.startsWith("$") && (r = t.aliases?.[r.slice(1)])), Array.isArray(r))
        return {
          component: Dw,
          icon: r
        };
      if (typeof r != "string")
        return {
          component: Gy,
          icon: r
        };
      const i = Object.keys(t.sets).find((s) => typeof r == "string" && r.startsWith(`${s}:`)), o = i ? r.slice(i.length + 1) : r;
      return {
        component: t.sets[i ?? t.defaultSet].component,
        icon: o
      };
    })
  };
}, pf = Symbol.for("vuetify:theme"), an = De({
  theme: String
}, "theme");
function dC() {
  return {
    defaultTheme: "light",
    variations: {
      colors: [],
      lighten: 0,
      darken: 0
    },
    themes: {
      light: {
        dark: !1,
        colors: {
          background: "#FFFFFF",
          surface: "#FFFFFF",
          "surface-bright": "#FFFFFF",
          "surface-light": "#EEEEEE",
          "surface-variant": "#424242",
          "on-surface-variant": "#EEEEEE",
          primary: "#1867C0",
          "primary-darken-1": "#1F5592",
          secondary: "#48A9A6",
          "secondary-darken-1": "#018786",
          error: "#B00020",
          info: "#2196F3",
          success: "#4CAF50",
          warning: "#FB8C00"
        },
        variables: {
          "border-color": "#000000",
          "border-opacity": 0.12,
          "high-emphasis-opacity": 0.87,
          "medium-emphasis-opacity": 0.6,
          "disabled-opacity": 0.38,
          "idle-opacity": 0.04,
          "hover-opacity": 0.04,
          "focus-opacity": 0.12,
          "selected-opacity": 0.08,
          "activated-opacity": 0.12,
          "pressed-opacity": 0.12,
          "dragged-opacity": 0.08,
          "theme-kbd": "#212529",
          "theme-on-kbd": "#FFFFFF",
          "theme-code": "#F5F5F5",
          "theme-on-code": "#000000"
        }
      },
      dark: {
        dark: !0,
        colors: {
          background: "#121212",
          surface: "#212121",
          "surface-bright": "#ccbfd6",
          "surface-light": "#424242",
          "surface-variant": "#c8c8c8",
          "on-surface-variant": "#000000",
          primary: "#2196F3",
          "primary-darken-1": "#277CC1",
          secondary: "#54B6B2",
          "secondary-darken-1": "#48A9A6",
          error: "#CF6679",
          info: "#2196F3",
          success: "#4CAF50",
          warning: "#FB8C00"
        },
        variables: {
          "border-color": "#FFFFFF",
          "border-opacity": 0.12,
          "high-emphasis-opacity": 1,
          "medium-emphasis-opacity": 0.7,
          "disabled-opacity": 0.5,
          "idle-opacity": 0.1,
          "hover-opacity": 0.04,
          "focus-opacity": 0.12,
          "selected-opacity": 0.08,
          "activated-opacity": 0.12,
          "pressed-opacity": 0.16,
          "dragged-opacity": 0.08,
          "theme-kbd": "#212529",
          "theme-on-kbd": "#FFFFFF",
          "theme-code": "#343434",
          "theme-on-code": "#CCCCCC"
        }
      }
    },
    stylesheetId: "vuetify-theme-stylesheet"
  };
}
function a8() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : dC();
  const t = dC();
  if (!e) return {
    ...t,
    isDisabled: !0
  };
  const n = {};
  for (const [a, r] of Object.entries(e.themes ?? {})) {
    const i = r.dark || a === "dark" ? t.themes?.dark : t.themes?.light;
    n[a] = kr(i, r);
  }
  return kr(t, {
    ...e,
    themes: n
  });
}
function El(e, t, n, a) {
  e.push(`${s8(t, a)} {
`, ...n.map((r) => `  ${r};
`), `}
`);
}
function fC(e) {
  const t = e.dark ? 2 : 1, n = e.dark ? 1 : 2, a = [];
  for (const [r, i] of Object.entries(e.colors)) {
    const o = si(i);
    a.push(`--v-theme-${r}: ${o.r},${o.g},${o.b}`), r.startsWith("on-") || a.push(`--v-theme-${r}-overlay-multiplier: ${Hy(i) > 0.18 ? t : n}`);
  }
  for (const [r, i] of Object.entries(e.variables)) {
    const o = typeof i == "string" && i.startsWith("#") ? si(i) : void 0, l = o ? `${o.r}, ${o.g}, ${o.b}` : void 0;
    a.push(`--v-${r}: ${l ?? i}`);
  }
  return a;
}
function r8(e, t, n) {
  const a = {};
  if (n)
    for (const r of ["lighten", "darken"]) {
      const i = r === "lighten" ? H3 : z3;
      for (const o of ho(n[r], 1))
        a[`${e}-${r}-${o}`] = BT(i(si(t), o));
    }
  return a;
}
function i8(e, t) {
  if (!t) return {};
  let n = {};
  for (const a of t.colors) {
    const r = e[a];
    r && (n = {
      ...n,
      ...r8(a, r, t)
    });
  }
  return n;
}
function o8(e) {
  const t = {};
  for (const n of Object.keys(e)) {
    if (n.startsWith("on-") || e[`on-${n}`]) continue;
    const a = `on-${n}`, r = si(e[n]);
    t[a] = RT(r);
  }
  return t;
}
function s8(e, t) {
  if (!t) return e;
  const n = `:where(${t})`;
  return e === ":root" ? n : `${n} ${e}`;
}
function l8(e, t) {
  e && (e.innerHTML = t);
}
function c8(e, t) {
  if (!vn) return null;
  let n = document.getElementById(e);
  return n || (n = document.createElement("style"), n.id = e, n.type = "text/css", t && n.setAttribute("nonce", t), document.head.appendChild(n)), n;
}
function u8(e) {
  const t = a8(e), n = ot(t.defaultTheme), a = Se(t.themes), r = z(() => {
    const d = {};
    for (const [u, f] of Object.entries(a.value)) {
      const _ = {
        ...f.colors,
        ...i8(f.colors, t.variations)
      };
      d[u] = {
        ...f,
        colors: {
          ..._,
          ...o8(_)
        }
      };
    }
    return d;
  }), i = be(() => r.value[n.value]), o = z(() => {
    const d = [];
    i.value?.dark && El(d, ":root", ["color-scheme: dark"], t.scope), El(d, ":root", fC(i.value), t.scope);
    for (const [g, v] of Object.entries(r.value))
      El(d, `.v-theme--${g}`, [`color-scheme: ${v.dark ? "dark" : "normal"}`, ...fC(v)], t.scope);
    const u = [], f = [], _ = new Set(Object.values(r.value).flatMap((g) => Object.keys(g.colors)));
    for (const g of _)
      g.startsWith("on-") ? El(f, `.${g}`, [`color: rgb(var(--v-theme-${g})) !important`], t.scope) : (El(u, `.bg-${g}`, [`--v-theme-overlay-multiplier: var(--v-theme-${g}-overlay-multiplier)`, `background-color: rgb(var(--v-theme-${g})) !important`, `color: rgb(var(--v-theme-on-${g})) !important`], t.scope), El(f, `.text-${g}`, [`color: rgb(var(--v-theme-${g})) !important`], t.scope), El(f, `.border-${g}`, [`--v-border-color: var(--v-theme-${g})`], t.scope));
    return d.push(...u, ...f), d.map((g, v) => v === 0 ? g : `    ${g}`).join("");
  });
  function l(d) {
    if (t.isDisabled) return;
    const u = d._context.provides.usehead;
    if (u) {
      let f = function() {
        return {
          style: [{
            textContent: o.value,
            id: t.stylesheetId,
            nonce: t.cspNonce || !1
          }]
        };
      };
      if (u.push) {
        const _ = u.push(f);
        vn && nt(o, () => {
          _.patch(f);
        });
      } else
        vn ? (u.addHeadObjs(be(f)), ea(() => u.updateDOM())) : u.addHeadObjs(f());
    } else {
      let f = function() {
        l8(c8(t.stylesheetId, t.cspNonce), o.value);
      };
      vn ? nt(o, f, {
        immediate: !0
      }) : f();
    }
  }
  const s = be(() => t.isDisabled ? void 0 : `v-theme--${n.value}`);
  return {
    install: l,
    isDisabled: t.isDisabled,
    name: n,
    themes: a,
    current: i,
    computedThemes: r,
    themeClasses: s,
    styles: o,
    global: {
      name: n,
      current: i
    }
  };
}
function yn(e) {
  ga("provideTheme");
  const t = Gt(pf, null);
  if (!t) throw new Error("Could not find Vuetify theme injection");
  const n = be(() => e.theme ?? t.name.value), a = be(() => t.themes.value[n.value]), r = be(() => t.isDisabled ? void 0 : `v-theme--${n.value}`), i = {
    ...t,
    name: n,
    current: a,
    themeClasses: r
  };
  return Nn(pf, i), i;
}
function Vw() {
  ga("useTheme");
  const e = Gt(pf, null);
  if (!e) throw new Error("Could not find Vuetify theme injection");
  return e;
}
function Wi(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "content";
  const n = g_(), a = Se();
  if (vn) {
    const r = new ResizeObserver((i) => {
      e?.(i, r), i.length && (t === "content" ? a.value = i[0].contentRect : a.value = i[0].target.getBoundingClientRect());
    });
    Ga(() => {
      r.disconnect();
    }), nt(() => n.el, (i, o) => {
      o && (r.unobserve(o), a.value = void 0), i && r.observe(i);
    }, {
      flush: "post"
    });
  }
  return {
    resizeRef: n,
    contentRect: Uu(a)
  };
}
const vf = Symbol.for("vuetify:layout"), GT = Symbol.for("vuetify:layout-item"), mC = 1e3, QT = De({
  overlaps: {
    type: Array,
    default: () => []
  },
  fullHeight: Boolean
}, "layout"), uc = De({
  name: {
    type: String
  },
  order: {
    type: [Number, String],
    default: 0
  },
  absolute: Boolean
}, "layout-item");
function JT() {
  const e = Gt(vf);
  if (!e) throw new Error("[Vuetify] Could not find injected layout");
  return {
    getLayoutItem: e.getLayoutItem,
    mainRect: e.mainRect,
    mainStyles: e.mainStyles
  };
}
function dc(e) {
  const t = Gt(vf);
  if (!t) throw new Error("[Vuetify] Could not find injected layout");
  const n = e.id ?? `layout-item-${$r()}`, a = ga("useLayoutItem");
  Nn(GT, {
    id: n
  });
  const r = ot(!1);
  uw(() => r.value = !0), Rx(() => r.value = !1);
  const {
    layoutItemStyles: i,
    layoutItemScrimStyles: o
  } = t.register(a, {
    ...e,
    active: z(() => r.value ? !1 : e.active.value),
    id: n
  });
  return Ga(() => t.unregister(n)), {
    layoutItemStyles: i,
    layoutRect: t.layoutRect,
    layoutItemScrimStyles: o
  };
}
const d8 = (e, t, n, a) => {
  let r = {
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  };
  const i = [{
    id: "",
    layer: {
      ...r
    }
  }];
  for (const o of e) {
    const l = t.get(o), s = n.get(o), d = a.get(o);
    if (!l || !s || !d) continue;
    const u = {
      ...r,
      [l.value]: parseInt(r[l.value], 10) + (d.value ? parseInt(s.value, 10) : 0)
    };
    i.push({
      id: o,
      layer: u
    }), r = u;
  }
  return i;
};
function XT(e) {
  const t = Gt(vf, null), n = z(() => t ? t.rootZIndex.value - 100 : mC), a = Se([]), r = oa(/* @__PURE__ */ new Map()), i = oa(/* @__PURE__ */ new Map()), o = oa(/* @__PURE__ */ new Map()), l = oa(/* @__PURE__ */ new Map()), s = oa(/* @__PURE__ */ new Map()), {
    resizeRef: d,
    contentRect: u
  } = Wi(), f = z(() => {
    const B = /* @__PURE__ */ new Map(), O = e.overlaps ?? [];
    for (const D of O.filter((T) => T.includes(":"))) {
      const [T, P] = D.split(":");
      if (!a.value.includes(T) || !a.value.includes(P)) continue;
      const I = r.get(T), M = r.get(P), V = i.get(T), N = i.get(P);
      !I || !M || !V || !N || (B.set(P, {
        position: I.value,
        amount: parseInt(V.value, 10)
      }), B.set(T, {
        position: M.value,
        amount: -parseInt(N.value, 10)
      }));
    }
    return B;
  }), _ = z(() => {
    const B = [...new Set([...o.values()].map((D) => D.value))].sort((D, T) => D - T), O = [];
    for (const D of B) {
      const T = a.value.filter((P) => o.get(P)?.value === D);
      O.push(...T);
    }
    return d8(O, r, i, l);
  }), g = z(() => !Array.from(s.values()).some((B) => B.value)), v = z(() => _.value[_.value.length - 1].layer), w = be(() => ({
    "--v-layout-left": ht(v.value.left),
    "--v-layout-right": ht(v.value.right),
    "--v-layout-top": ht(v.value.top),
    "--v-layout-bottom": ht(v.value.bottom),
    ...g.value ? void 0 : {
      transition: "none"
    }
  })), b = z(() => _.value.slice(1).map((B, O) => {
    let {
      id: D
    } = B;
    const {
      layer: T
    } = _.value[O], P = i.get(D), I = r.get(D);
    return {
      id: D,
      ...T,
      size: Number(P.value),
      position: I.value
    };
  })), p = (B) => b.value.find((O) => O.id === B), y = ga("createLayout"), S = ot(!1);
  nn(() => {
    S.value = !0;
  }), Nn(vf, {
    register: (B, O) => {
      let {
        id: D,
        order: T,
        position: P,
        layoutSize: I,
        elementSize: M,
        active: V,
        disableTransitions: N,
        absolute: q
      } = O;
      o.set(D, T), r.set(D, P), i.set(D, I), l.set(D, V), N && s.set(D, N);
      const ee = au(GT, y?.vnode).indexOf(B);
      ee > -1 ? a.value.splice(ee, 0, D) : a.value.push(D);
      const de = z(() => b.value.findIndex((se) => se.id === D)), Z = z(() => n.value + _.value.length * 2 - de.value * 2), F = z(() => {
        const se = P.value === "left" || P.value === "right", X = P.value === "right", he = P.value === "bottom", ve = M.value ?? I.value, pe = ve === 0 ? "%" : "px", H = {
          [P.value]: 0,
          zIndex: Z.value,
          transform: `translate${se ? "X" : "Y"}(${(V.value ? 0 : -(ve === 0 ? 100 : ve)) * (X || he ? -1 : 1)}${pe})`,
          position: q.value || n.value !== mC ? "absolute" : "fixed",
          ...g.value ? void 0 : {
            transition: "none"
          }
        };
        if (!S.value) return H;
        const we = b.value[de.value];
        if (!we) throw new Error(`[Vuetify] Could not find layout item "${D}"`);
        const Me = f.value.get(D);
        return Me && (we[Me.position] += Me.amount), {
          ...H,
          height: se ? `calc(100% - ${we.top}px - ${we.bottom}px)` : M.value ? `${M.value}px` : void 0,
          left: X ? void 0 : `${we.left}px`,
          right: X ? `${we.right}px` : void 0,
          top: P.value !== "bottom" ? `${we.top}px` : void 0,
          bottom: P.value !== "top" ? `${we.bottom}px` : void 0,
          width: se ? M.value ? `${M.value}px` : void 0 : `calc(100% - ${we.left}px - ${we.right}px)`
        };
      }), Y = z(() => ({
        zIndex: Z.value - 1
      }));
      return {
        layoutItemStyles: F,
        layoutItemScrimStyles: Y,
        zIndex: Z
      };
    },
    unregister: (B) => {
      o.delete(B), r.delete(B), i.delete(B), l.delete(B), s.delete(B), a.value = a.value.filter((O) => O !== B);
    },
    mainRect: v,
    mainStyles: w,
    getLayoutItem: p,
    items: b,
    layoutRect: u,
    rootZIndex: n
  });
  const E = be(() => ["v-layout", {
    "v-layout--full-height": e.fullHeight
  }]), C = be(() => ({
    zIndex: t ? n.value : void 0,
    position: t ? "relative" : void 0,
    overflow: t ? "hidden" : void 0
  }));
  return {
    layoutClasses: E,
    layoutStyles: C,
    getLayoutItem: p,
    items: b,
    layoutRect: u,
    layoutRef: d
  };
}
function ZT() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const {
    blueprint: t,
    ...n
  } = e, a = kr(t, n), {
    aliases: r = {},
    components: i = {},
    directives: o = {}
  } = a, l = bu();
  return l.run(() => {
    const s = Y3(a.defaults), d = j4(a.display, a.ssr), u = u8(a.theme), f = t8(a.icons), _ = r4(a.locale), g = H4(a.date, _), v = K4(a.goTo, _);
    function w(p) {
      for (const S in o)
        p.directive(S, o[S]);
      for (const S in i)
        p.component(S, i[S]);
      for (const S in r)
        p.component(S, fi({
          ...r[S],
          name: S,
          aliasName: r[S].name
        }));
      const y = bu();
      if (y.run(() => {
        u.install(p);
      }), p.onUnmount(() => y.stop()), p.provide(Au, s), p.provide(Yy, d), p.provide(pf, u), p.provide(Ky, f), p.provide(xu, _), p.provide(WT, g.options), p.provide(iC, g.instance), p.provide(YT, v), vn && a.ssr)
        if (p.$nuxt)
          p.$nuxt.hook("app:suspense:resolve", () => {
            d.update();
          });
        else {
          const {
            mount: S
          } = p;
          p.mount = function() {
            const E = S(...arguments);
            return Vt(() => d.update()), p.mount = S, E;
          };
        }
      p.mixin({
        computed: {
          $vuetify() {
            return oa({
              defaults: Yc.call(this, Au),
              display: Yc.call(this, Yy),
              theme: Yc.call(this, pf),
              icons: Yc.call(this, Ky),
              locale: Yc.call(this, xu),
              date: Yc.call(this, iC)
            });
          }
        }
      });
    }
    function b() {
      l.stop();
    }
    return {
      install: w,
      unmount: b,
      defaults: s,
      display: d,
      theme: u,
      icons: f,
      locale: _,
      date: g,
      goTo: v
    };
  });
}
const f8 = "3.8.10";
ZT.version = f8;
function Yc(e) {
  const t = this.$, n = t.parent?.provides ?? t.vnode.appContext?.provides;
  if (n && e in n)
    return n[e];
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Qy = function(e, t) {
  return Qy = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
    n.__proto__ = a;
  } || function(n, a) {
    for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (n[r] = a[r]);
  }, Qy(e, t);
};
function m8(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  Qy(e, t);
  function n() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
var Jt = function() {
  return Jt = Object.assign || function(t) {
    for (var n, a = 1, r = arguments.length; a < r; a++) {
      n = arguments[a];
      for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
    }
    return t;
  }, Jt.apply(this, arguments);
};
function S_(e, t, n) {
  for (var a = 0, r = t.length, i; a < r; a++)
    (i || !(a in t)) && (i || (i = Array.prototype.slice.call(t, 0, a)), i[a] = t[a]);
  return e.concat(i || Array.prototype.slice.call(t));
}
var lr = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, ar = Object.keys, pa = Array.isArray;
typeof Promise < "u" && !lr.Promise && (lr.Promise = Promise);
function ui(e, t) {
  return typeof t != "object" || ar(t).forEach(function(n) {
    e[n] = t[n];
  }), e;
}
var Tu = Object.getPrototypeOf, h8 = {}.hasOwnProperty;
function Gr(e, t) {
  return h8.call(e, t);
}
function Iu(e, t) {
  typeof t == "function" && (t = t(Tu(e))), (typeof Reflect > "u" ? ar : Reflect.ownKeys)(t).forEach(function(n) {
    Hs(e, n, t[n]);
  });
}
var eI = Object.defineProperty;
function Hs(e, t, n, a) {
  eI(e, t, ui(n && Gr(n, "get") && typeof n.get == "function" ? { get: n.get, set: n.set, configurable: !0 } : { value: n, configurable: !0, writable: !0 }, a));
}
function zu(e) {
  return {
    from: function(t) {
      return e.prototype = Object.create(t.prototype), Hs(e.prototype, "constructor", e), {
        extend: Iu.bind(null, e.prototype)
      };
    }
  };
}
var _8 = Object.getOwnPropertyDescriptor;
function tI(e, t) {
  var n = _8(e, t), a;
  return n || (a = Tu(e)) && tI(a, t);
}
var p8 = [].slice;
function lp(e, t, n) {
  return p8.call(e, t, n);
}
function nI(e, t) {
  return t(e);
}
function Hd(e) {
  if (!e)
    throw new Error("Assertion Failed");
}
function aI(e) {
  lr.setImmediate ? setImmediate(e) : setTimeout(e, 0);
}
function v8(e, t) {
  return e.reduce(function(n, a, r) {
    var i = t(a, r);
    return i && (n[i[0]] = i[1]), n;
  }, {});
}
function Jo(e, t) {
  if (typeof t == "string" && Gr(e, t))
    return e[t];
  if (!t)
    return e;
  if (typeof t != "string") {
    for (var n = [], a = 0, r = t.length; a < r; ++a) {
      var i = Jo(e, t[a]);
      n.push(i);
    }
    return n;
  }
  var o = t.indexOf(".");
  if (o !== -1) {
    var l = e[t.substr(0, o)];
    return l == null ? void 0 : Jo(l, t.substr(o + 1));
  }
}
function ci(e, t, n) {
  if (!(!e || t === void 0) && !("isFrozen" in Object && Object.isFrozen(e)))
    if (typeof t != "string" && "length" in t) {
      Hd(typeof n != "string" && "length" in n);
      for (var a = 0, r = t.length; a < r; ++a)
        ci(e, t[a], n[a]);
    } else {
      var i = t.indexOf(".");
      if (i !== -1) {
        var o = t.substr(0, i), l = t.substr(i + 1);
        if (l === "")
          n === void 0 ? pa(e) && !isNaN(parseInt(o)) ? e.splice(o, 1) : delete e[o] : e[o] = n;
        else {
          var s = e[o];
          (!s || !Gr(e, o)) && (s = e[o] = {}), ci(s, l, n);
        }
      } else
        n === void 0 ? pa(e) && !isNaN(parseInt(t)) ? e.splice(t, 1) : delete e[t] : e[t] = n;
    }
}
function g8(e, t) {
  typeof t == "string" ? ci(e, t, void 0) : "length" in t && [].map.call(t, function(n) {
    ci(e, n, void 0);
  });
}
function rI(e) {
  var t = {};
  for (var n in e)
    Gr(e, n) && (t[n] = e[n]);
  return t;
}
var y8 = [].concat;
function iI(e) {
  return y8.apply([], e);
}
var b8 = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(iI([8, 16, 32, 64].map(function(e) {
  return ["Int", "Uint", "Float"].map(function(t) {
    return t + e + "Array";
  });
}))).filter(function(e) {
  return lr[e];
}), oI = new Set(b8.map(function(e) {
  return lr[e];
}));
function sI(e) {
  var t = {};
  for (var n in e)
    if (Gr(e, n)) {
      var a = e[n];
      t[n] = !a || typeof a != "object" || oI.has(a.constructor) ? a : sI(a);
    }
  return t;
}
function w8(e) {
  for (var t in e)
    if (Gr(e, t))
      return !1;
  return !0;
}
var tf = null;
function Xl(e) {
  tf = /* @__PURE__ */ new WeakMap();
  var t = Jy(e);
  return tf = null, t;
}
function Jy(e) {
  if (!e || typeof e != "object")
    return e;
  var t = tf.get(e);
  if (t)
    return t;
  if (pa(e)) {
    t = [], tf.set(e, t);
    for (var n = 0, a = e.length; n < a; ++n)
      t.push(Jy(e[n]));
  } else if (oI.has(e.constructor))
    t = e;
  else {
    var r = Tu(e);
    t = r === Object.prototype ? {} : Object.create(r), tf.set(e, t);
    for (var i in e)
      Gr(e, i) && (t[i] = Jy(e[i]));
  }
  return t;
}
var k8 = {}.toString;
function Xy(e) {
  return k8.call(e).slice(8, -1);
}
var Zy = typeof Symbol < "u" ? Symbol.iterator : "@@iterator", S8 = typeof Zy == "symbol" ? function(e) {
  var t;
  return e != null && (t = e[Zy]) && t.apply(e);
} : function() {
  return null;
};
function Ol(e, t) {
  var n = e.indexOf(t);
  return n >= 0 && e.splice(n, 1), n >= 0;
}
var tu = {};
function jo(e) {
  var t, n, a, r;
  if (arguments.length === 1) {
    if (pa(e))
      return e.slice();
    if (this === tu && typeof e == "string")
      return [e];
    if (r = S8(e)) {
      for (n = []; a = r.next(), !a.done; )
        n.push(a.value);
      return n;
    }
    if (e == null)
      return [e];
    if (t = e.length, typeof t == "number") {
      for (n = new Array(t); t--; )
        n[t] = e[t];
      return n;
    }
    return [e];
  }
  for (t = arguments.length, n = new Array(t); t--; )
    n[t] = arguments[t];
  return n;
}
var Mw = typeof Symbol < "u" ? function(e) {
  return e[Symbol.toStringTag] === "AsyncFunction";
} : function() {
  return !1;
}, C8 = [
  "Modify",
  "Bulk",
  "OpenFailed",
  "VersionChange",
  "Schema",
  "Upgrade",
  "InvalidTable",
  "MissingAPI",
  "NoSuchDatabase",
  "InvalidArgument",
  "SubTransaction",
  "Unsupported",
  "Internal",
  "DatabaseClosed",
  "PrematureCommit",
  "ForeignAwait"
], lI = [
  "Unknown",
  "Constraint",
  "Data",
  "TransactionInactive",
  "ReadOnly",
  "Version",
  "NotFound",
  "InvalidState",
  "InvalidAccess",
  "Abort",
  "Timeout",
  "QuotaExceeded",
  "Syntax",
  "DataClone"
], Rw = C8.concat(lI), A8 = {
  VersionChanged: "Database version changed by other database connection",
  DatabaseClosed: "Database has been closed",
  Abort: "Transaction aborted",
  TransactionInactive: "Transaction has already completed or failed",
  MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
};
function Wu(e, t) {
  this.name = e, this.message = t;
}
zu(Wu).from(Error).extend({
  toString: function() {
    return this.name + ": " + this.message;
  }
});
function cI(e, t) {
  return e + ". Errors: " + Object.keys(t).map(function(n) {
    return t[n].toString();
  }).filter(function(n, a, r) {
    return r.indexOf(n) === a;
  }).join(`
`);
}
function C_(e, t, n, a) {
  this.failures = t, this.failedKeys = a, this.successCount = n, this.message = cI(e, t);
}
zu(C_).from(Wu);
function ru(e, t) {
  this.name = "BulkError", this.failures = Object.keys(t).map(function(n) {
    return t[n];
  }), this.failuresByPos = t, this.message = cI(e, this.failures);
}
zu(ru).from(Wu);
var Lw = Rw.reduce(function(e, t) {
  return e[t] = t + "Error", e;
}, {}), x8 = Wu, Bt = Rw.reduce(function(e, t) {
  var n = t + "Error";
  function a(r, i) {
    this.name = n, r ? typeof r == "string" ? (this.message = "".concat(r).concat(i ? `
 ` + i : ""), this.inner = i || null) : typeof r == "object" && (this.message = "".concat(r.name, " ").concat(r.message), this.inner = r) : (this.message = A8[t] || n, this.inner = null);
  }
  return zu(a).from(x8), e[t] = a, e;
}, {});
Bt.Syntax = SyntaxError;
Bt.Type = TypeError;
Bt.Range = RangeError;
var hC = lI.reduce(function(e, t) {
  return e[t + "Error"] = Bt[t], e;
}, {});
function T8(e, t) {
  if (!e || e instanceof Wu || e instanceof TypeError || e instanceof SyntaxError || !e.name || !hC[e.name])
    return e;
  var n = new hC[e.name](t || e.message, e);
  return "stack" in e && Hs(n, "stack", { get: function() {
    return this.inner.stack;
  } }), n;
}
var cp = Rw.reduce(function(e, t) {
  return ["Syntax", "Type", "Range"].indexOf(t) === -1 && (e[t + "Error"] = Bt[t]), e;
}, {});
cp.ModifyError = C_;
cp.DexieError = Wu;
cp.BulkError = ru;
function Dn() {
}
function $f(e) {
  return e;
}
function I8(e, t) {
  return e == null || e === $f ? t : function(n) {
    return t(e(n));
  };
}
function Zl(e, t) {
  return function() {
    e.apply(this, arguments), t.apply(this, arguments);
  };
}
function E8(e, t) {
  return e === Dn ? t : function() {
    var n = e.apply(this, arguments);
    n !== void 0 && (arguments[0] = n);
    var a = this.onsuccess, r = this.onerror;
    this.onsuccess = null, this.onerror = null;
    var i = t.apply(this, arguments);
    return a && (this.onsuccess = this.onsuccess ? Zl(a, this.onsuccess) : a), r && (this.onerror = this.onerror ? Zl(r, this.onerror) : r), i !== void 0 ? i : n;
  };
}
function P8(e, t) {
  return e === Dn ? t : function() {
    e.apply(this, arguments);
    var n = this.onsuccess, a = this.onerror;
    this.onsuccess = this.onerror = null, t.apply(this, arguments), n && (this.onsuccess = this.onsuccess ? Zl(n, this.onsuccess) : n), a && (this.onerror = this.onerror ? Zl(a, this.onerror) : a);
  };
}
function O8(e, t) {
  return e === Dn ? t : function(n) {
    var a = e.apply(this, arguments);
    ui(n, a);
    var r = this.onsuccess, i = this.onerror;
    this.onsuccess = null, this.onerror = null;
    var o = t.apply(this, arguments);
    return r && (this.onsuccess = this.onsuccess ? Zl(r, this.onsuccess) : r), i && (this.onerror = this.onerror ? Zl(i, this.onerror) : i), a === void 0 ? o === void 0 ? void 0 : o : ui(a, o);
  };
}
function D8(e, t) {
  return e === Dn ? t : function() {
    return t.apply(this, arguments) === !1 ? !1 : e.apply(this, arguments);
  };
}
function Fw(e, t) {
  return e === Dn ? t : function() {
    var n = e.apply(this, arguments);
    if (n && typeof n.then == "function") {
      for (var a = this, r = arguments.length, i = new Array(r); r--; )
        i[r] = arguments[r];
      return n.then(function() {
        return t.apply(a, i);
      });
    }
    return t.apply(this, arguments);
  };
}
var wo = typeof location < "u" && /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
function uI(e, t) {
  wo = e;
}
var gf = {}, dI = 100, Nw = typeof Promise > "u" ? [] : function() {
  var e = Promise.resolve();
  if (typeof crypto > "u" || !crypto.subtle)
    return [e, Tu(e), e];
  var t = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
  return [
    t,
    Tu(t),
    e
  ];
}(), _C = Nw[0], pC = Nw[1], B8 = Nw[2], V8 = pC && pC.then, Vl = _C && _C.constructor, Uw = !!B8;
function M8() {
  queueMicrotask(L8);
}
var yf = function(e, t) {
  zd.push([e, t]), A_ && (M8(), A_ = !1);
}, eb = !0, A_ = !0, zl = [], Qh = [], tb = $f, Fs = {
  id: "global",
  global: !0,
  ref: 0,
  unhandleds: [],
  onunhandled: Dn,
  pgp: !1,
  env: {},
  finalize: Dn
}, Pt = Fs, zd = [], Wl = 0, Jh = [];
function wt(e) {
  if (typeof this != "object")
    throw new TypeError("Promises must be constructed via new");
  this._listeners = [], this._lib = !1;
  var t = this._PSD = Pt;
  if (typeof e != "function") {
    if (e !== gf)
      throw new TypeError("Not a function");
    this._state = arguments[1], this._value = arguments[2], this._state === !1 && ab(this, this._value);
    return;
  }
  this._state = null, this._value = null, ++t.ref, mI(this, e);
}
var nb = {
  get: function() {
    var e = Pt, t = x_;
    function n(a, r) {
      var i = this, o = !e.global && (e !== Pt || t !== x_), l = o && !Ws(), s = new wt(function(d, u) {
        $w(i, new fI(vC(a, e, o, l), vC(r, e, o, l), d, u, e));
      });
      return this._consoleTask && (s._consoleTask = this._consoleTask), s;
    }
    return n.prototype = gf, n;
  },
  set: function(e) {
    Hs(this, "then", e && e.prototype === gf ? nb : {
      get: function() {
        return e;
      },
      set: nb.set
    });
  }
};
Iu(wt.prototype, {
  then: nb,
  _then: function(e, t) {
    $w(this, new fI(null, null, e, t, Pt));
  },
  catch: function(e) {
    if (arguments.length === 1)
      return this.then(null, e);
    var t = arguments[0], n = arguments[1];
    return typeof t == "function" ? this.then(null, function(a) {
      return a instanceof t ? n(a) : Xh(a);
    }) : this.then(null, function(a) {
      return a && a.name === t ? n(a) : Xh(a);
    });
  },
  finally: function(e) {
    return this.then(function(t) {
      return wt.resolve(e()).then(function() {
        return t;
      });
    }, function(t) {
      return wt.resolve(e()).then(function() {
        return Xh(t);
      });
    });
  },
  timeout: function(e, t) {
    var n = this;
    return e < 1 / 0 ? new wt(function(a, r) {
      var i = setTimeout(function() {
        return r(new Bt.Timeout(t));
      }, e);
      n.then(a, r).finally(clearTimeout.bind(null, i));
    }) : this;
  }
});
typeof Symbol < "u" && Symbol.toStringTag && Hs(wt.prototype, Symbol.toStringTag, "Dexie.Promise");
Fs.env = _I();
function fI(e, t, n, a, r) {
  this.onFulfilled = typeof e == "function" ? e : null, this.onRejected = typeof t == "function" ? t : null, this.resolve = n, this.reject = a, this.psd = r;
}
Iu(wt, {
  all: function() {
    var e = jo.apply(null, arguments).map(T_);
    return new wt(function(t, n) {
      e.length === 0 && t([]);
      var a = e.length;
      e.forEach(function(r, i) {
        return wt.resolve(r).then(function(o) {
          e[i] = o, --a || t(e);
        }, n);
      });
    });
  },
  resolve: function(e) {
    if (e instanceof wt)
      return e;
    if (e && typeof e.then == "function")
      return new wt(function(n, a) {
        e.then(n, a);
      });
    var t = new wt(gf, !0, e);
    return t;
  },
  reject: Xh,
  race: function() {
    var e = jo.apply(null, arguments).map(T_);
    return new wt(function(t, n) {
      e.map(function(a) {
        return wt.resolve(a).then(t, n);
      });
    });
  },
  PSD: {
    get: function() {
      return Pt;
    },
    set: function(e) {
      return Pt = e;
    }
  },
  totalEchoes: { get: function() {
    return x_;
  } },
  newPSD: zs,
  usePSD: ec,
  scheduler: {
    get: function() {
      return yf;
    },
    set: function(e) {
      yf = e;
    }
  },
  rejectionMapper: {
    get: function() {
      return tb;
    },
    set: function(e) {
      tb = e;
    }
  },
  follow: function(e, t) {
    return new wt(function(n, a) {
      return zs(function(r, i) {
        var o = Pt;
        o.unhandleds = [], o.onunhandled = i, o.finalize = Zl(function() {
          var l = this;
          F8(function() {
            l.unhandleds.length === 0 ? r() : i(l.unhandleds[0]);
          });
        }, o.finalize), e();
      }, t, n, a);
    });
  }
});
Vl && (Vl.allSettled && Hs(wt, "allSettled", function() {
  var e = jo.apply(null, arguments).map(T_);
  return new wt(function(t) {
    e.length === 0 && t([]);
    var n = e.length, a = new Array(n);
    e.forEach(function(r, i) {
      return wt.resolve(r).then(function(o) {
        return a[i] = { status: "fulfilled", value: o };
      }, function(o) {
        return a[i] = { status: "rejected", reason: o };
      }).then(function() {
        return --n || t(a);
      });
    });
  });
}), Vl.any && typeof AggregateError < "u" && Hs(wt, "any", function() {
  var e = jo.apply(null, arguments).map(T_);
  return new wt(function(t, n) {
    e.length === 0 && n(new AggregateError([]));
    var a = e.length, r = new Array(a);
    e.forEach(function(i, o) {
      return wt.resolve(i).then(function(l) {
        return t(l);
      }, function(l) {
        r[o] = l, --a || n(new AggregateError(r));
      });
    });
  });
}), Vl.withResolvers && (wt.withResolvers = Vl.withResolvers));
function mI(e, t) {
  try {
    t(function(n) {
      if (e._state === null) {
        if (n === e)
          throw new TypeError("A promise cannot be resolved with itself.");
        var a = e._lib && ju();
        n && typeof n.then == "function" ? mI(e, function(r, i) {
          n instanceof wt ? n._then(r, i) : n.then(r, i);
        }) : (e._state = !0, e._value = n, hI(e)), a && Yu();
      }
    }, ab.bind(null, e));
  } catch (n) {
    ab(e, n);
  }
}
function ab(e, t) {
  if (Qh.push(t), e._state === null) {
    var n = e._lib && ju();
    t = tb(t), e._state = !1, e._value = t, N8(e), hI(e), n && Yu();
  }
}
function hI(e) {
  var t = e._listeners;
  e._listeners = [];
  for (var n = 0, a = t.length; n < a; ++n)
    $w(e, t[n]);
  var r = e._PSD;
  --r.ref || r.finalize(), Wl === 0 && (++Wl, yf(function() {
    --Wl === 0 && qw();
  }, []));
}
function $w(e, t) {
  if (e._state === null) {
    e._listeners.push(t);
    return;
  }
  var n = e._state ? t.onFulfilled : t.onRejected;
  if (n === null)
    return (e._state ? t.resolve : t.reject)(e._value);
  ++t.psd.ref, ++Wl, yf(R8, [n, e, t]);
}
function R8(e, t, n) {
  try {
    var a, r = t._value;
    !t._state && Qh.length && (Qh = []), a = wo && t._consoleTask ? t._consoleTask.run(function() {
      return e(r);
    }) : e(r), !t._state && Qh.indexOf(r) === -1 && U8(t), n.resolve(a);
  } catch (i) {
    n.reject(i);
  } finally {
    --Wl === 0 && qw(), --n.psd.ref || n.psd.finalize();
  }
}
function L8() {
  ec(Fs, function() {
    ju() && Yu();
  });
}
function ju() {
  var e = eb;
  return eb = !1, A_ = !1, e;
}
function Yu() {
  var e, t, n;
  do
    for (; zd.length > 0; )
      for (e = zd, zd = [], n = e.length, t = 0; t < n; ++t) {
        var a = e[t];
        a[0].apply(null, a[1]);
      }
  while (zd.length > 0);
  eb = !0, A_ = !0;
}
function qw() {
  var e = zl;
  zl = [], e.forEach(function(a) {
    a._PSD.onunhandled.call(null, a._value, a);
  });
  for (var t = Jh.slice(0), n = t.length; n; )
    t[--n]();
}
function F8(e) {
  function t() {
    e(), Jh.splice(Jh.indexOf(t), 1);
  }
  Jh.push(t), ++Wl, yf(function() {
    --Wl === 0 && qw();
  }, []);
}
function N8(e) {
  zl.some(function(t) {
    return t._value === e._value;
  }) || zl.push(e);
}
function U8(e) {
  for (var t = zl.length; t; )
    if (zl[--t]._value === e._value) {
      zl.splice(t, 1);
      return;
    }
}
function Xh(e) {
  return new wt(gf, !1, e);
}
function ia(e, t) {
  var n = Pt;
  return function() {
    var a = ju(), r = Pt;
    try {
      return js(n, !0), e.apply(this, arguments);
    } catch (i) {
      t && t(i);
    } finally {
      js(r, !1), a && Yu();
    }
  };
}
var er = { awaits: 0, echoes: 0, id: 0 }, $8 = 0, Zh = [], e_ = 0, x_ = 0, q8 = 0;
function zs(e, t, n, a) {
  var r = Pt, i = Object.create(r);
  i.parent = r, i.ref = 0, i.global = !1, i.id = ++q8, Fs.env, i.env = Uw ? {
    Promise: wt,
    PromiseProp: { value: wt, configurable: !0, writable: !0 },
    all: wt.all,
    race: wt.race,
    allSettled: wt.allSettled,
    any: wt.any,
    resolve: wt.resolve,
    reject: wt.reject
  } : {}, t && ui(i, t), ++r.ref, i.finalize = function() {
    --this.parent.ref || this.parent.finalize();
  };
  var o = ec(i, e, n, a);
  return i.ref === 0 && i.finalize(), o;
}
function Ku() {
  return er.id || (er.id = ++$8), ++er.awaits, er.echoes += dI, er.id;
}
function Ws() {
  return er.awaits ? (--er.awaits === 0 && (er.id = 0), er.echoes = er.awaits * dI, !0) : !1;
}
("" + V8).indexOf("[native code]") === -1 && (Ku = Ws = Dn);
function T_(e) {
  return er.echoes && e && e.constructor === Vl ? (Ku(), e.then(function(t) {
    return Ws(), t;
  }, function(t) {
    return Ws(), Ma(t);
  })) : e;
}
function H8(e) {
  ++x_, (!er.echoes || --er.echoes === 0) && (er.echoes = er.awaits = er.id = 0), Zh.push(Pt), js(e, !0);
}
function z8() {
  var e = Zh[Zh.length - 1];
  Zh.pop(), js(e, !1);
}
function js(e, t) {
  var n = Pt;
  if ((t ? er.echoes && (!e_++ || e !== Pt) : e_ && (!--e_ || e !== Pt)) && queueMicrotask(t ? H8.bind(null, e) : z8), e !== Pt && (Pt = e, n === Fs && (Fs.env = _I()), Uw)) {
    var a = Fs.env.Promise, r = e.env;
    (n.global || e.global) && (Object.defineProperty(lr, "Promise", r.PromiseProp), a.all = r.all, a.race = r.race, a.resolve = r.resolve, a.reject = r.reject, r.allSettled && (a.allSettled = r.allSettled), r.any && (a.any = r.any));
  }
}
function _I() {
  var e = lr.Promise;
  return Uw ? {
    Promise: e,
    PromiseProp: Object.getOwnPropertyDescriptor(lr, "Promise"),
    all: e.all,
    race: e.race,
    allSettled: e.allSettled,
    any: e.any,
    resolve: e.resolve,
    reject: e.reject
  } : {};
}
function ec(e, t, n, a, r) {
  var i = Pt;
  try {
    return js(e, !0), t(n, a, r);
  } finally {
    js(i, !1);
  }
}
function vC(e, t, n, a) {
  return typeof e != "function" ? e : function() {
    var r = Pt;
    n && Ku(), js(t, !0);
    try {
      return e.apply(this, arguments);
    } finally {
      js(r, !1), a && queueMicrotask(Ws);
    }
  };
}
function Fg(e) {
  Promise === Vl && er.echoes === 0 ? e_ === 0 ? e() : enqueueNativeMicroTask(e) : setTimeout(e, 0);
}
var Ma = wt.reject;
function rb(e, t, n, a) {
  if (!e.idbdb || !e._state.openComplete && !Pt.letThrough && !e._vip) {
    if (e._state.openComplete)
      return Ma(new Bt.DatabaseClosed(e._state.dbOpenError));
    if (!e._state.isBeingOpened) {
      if (!e._state.autoOpen)
        return Ma(new Bt.DatabaseClosed());
      e.open().catch(Dn);
    }
    return e._state.dbReadyPromise.then(function() {
      return rb(e, t, n, a);
    });
  } else {
    var r = e._createTransaction(t, n, e._dbSchema);
    try {
      r.create(), e._state.PR1398_maxLoop = 3;
    } catch (i) {
      return i.name === Lw.InvalidState && e.isOpen() && --e._state.PR1398_maxLoop > 0 ? (console.warn("Dexie: Need to reopen db"), e.close({ disableAutoOpen: !1 }), e.open().then(function() {
        return rb(e, t, n, a);
      })) : Ma(i);
    }
    return r._promise(t, function(i, o) {
      return zs(function() {
        return Pt.trans = r, a(i, o, r);
      });
    }).then(function(i) {
      if (t === "readwrite")
        try {
          r.idbtrans.commit();
        } catch {
        }
      return t === "readonly" ? i : r._completion.then(function() {
        return i;
      });
    });
  }
}
var gC = "4.0.11", Nl = "￿", ib = -1 / 0, $o = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.", pI = "String expected.", mu = [], up = "__dbnames", Ng = "readonly", Ug = "readwrite";
function tc(e, t) {
  return e ? t ? function() {
    return e.apply(this, arguments) && t.apply(this, arguments);
  } : e : t;
}
var vI = {
  type: 3,
  lower: -1 / 0,
  lowerOpen: !1,
  upper: [[]],
  upperOpen: !1
};
function xh(e) {
  return typeof e == "string" && !/\./.test(e) ? function(t) {
    return t[e] === void 0 && e in t && (t = Xl(t), delete t[e]), t;
  } : function(t) {
    return t;
  };
}
function W8() {
  throw Bt.Type();
}
function _n(e, t) {
  try {
    var n = yC(e), a = yC(t);
    if (n !== a)
      return n === "Array" ? 1 : a === "Array" ? -1 : n === "binary" ? 1 : a === "binary" ? -1 : n === "string" ? 1 : a === "string" ? -1 : n === "Date" ? 1 : a !== "Date" ? NaN : -1;
    switch (n) {
      case "number":
      case "Date":
      case "string":
        return e > t ? 1 : e < t ? -1 : 0;
      case "binary":
        return Y8(bC(e), bC(t));
      case "Array":
        return j8(e, t);
    }
  } catch {
  }
  return NaN;
}
function j8(e, t) {
  for (var n = e.length, a = t.length, r = n < a ? n : a, i = 0; i < r; ++i) {
    var o = _n(e[i], t[i]);
    if (o !== 0)
      return o;
  }
  return n === a ? 0 : n < a ? -1 : 1;
}
function Y8(e, t) {
  for (var n = e.length, a = t.length, r = n < a ? n : a, i = 0; i < r; ++i)
    if (e[i] !== t[i])
      return e[i] < t[i] ? -1 : 1;
  return n === a ? 0 : n < a ? -1 : 1;
}
function yC(e) {
  var t = typeof e;
  if (t !== "object")
    return t;
  if (ArrayBuffer.isView(e))
    return "binary";
  var n = Xy(e);
  return n === "ArrayBuffer" ? "binary" : n;
}
function bC(e) {
  return e instanceof Uint8Array ? e : ArrayBuffer.isView(e) ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : new Uint8Array(e);
}
var gI = function() {
  function e() {
  }
  return e.prototype._trans = function(t, n, a) {
    var r = this._tx || Pt.trans, i = this.name, o = wo && typeof console < "u" && console.createTask && console.createTask("Dexie: ".concat(t === "readonly" ? "read" : "write", " ").concat(this.name));
    function l(u, f, _) {
      if (!_.schema[i])
        throw new Bt.NotFound("Table " + i + " not part of transaction");
      return n(_.idbtrans, _);
    }
    var s = ju();
    try {
      var d = r && r.db._novip === this.db._novip ? r === Pt.trans ? r._promise(t, l, a) : zs(function() {
        return r._promise(t, l, a);
      }, { trans: r, transless: Pt.transless || Pt }) : rb(this.db, t, [this.name], l);
      return o && (d._consoleTask = o, d = d.catch(function(u) {
        return console.trace(u), Ma(u);
      })), d;
    } finally {
      s && Yu();
    }
  }, e.prototype.get = function(t, n) {
    var a = this;
    return t && t.constructor === Object ? this.where(t).first(n) : t == null ? Ma(new Bt.Type("Invalid argument to Table.get()")) : this._trans("readonly", function(r) {
      return a.core.get({ trans: r, key: t }).then(function(i) {
        return a.hook.reading.fire(i);
      });
    }).then(n);
  }, e.prototype.where = function(t) {
    if (typeof t == "string")
      return new this.db.WhereClause(this, t);
    if (pa(t))
      return new this.db.WhereClause(this, "[".concat(t.join("+"), "]"));
    var n = ar(t);
    if (n.length === 1)
      return this.where(n[0]).equals(t[n[0]]);
    var a = this.schema.indexes.concat(this.schema.primKey).filter(function(u) {
      if (u.compound && n.every(function(_) {
        return u.keyPath.indexOf(_) >= 0;
      })) {
        for (var f = 0; f < n.length; ++f)
          if (n.indexOf(u.keyPath[f]) === -1)
            return !1;
        return !0;
      }
      return !1;
    }).sort(function(u, f) {
      return u.keyPath.length - f.keyPath.length;
    })[0];
    if (a && this.db._maxKey !== Nl) {
      var r = a.keyPath.slice(0, n.length);
      return this.where(r).equals(r.map(function(u) {
        return t[u];
      }));
    }
    !a && wo && console.warn("The query ".concat(JSON.stringify(t), " on ").concat(this.name, " would benefit from a ") + "compound index [".concat(n.join("+"), "]"));
    var i = this.schema.idxByName;
    function o(u, f) {
      return _n(u, f) === 0;
    }
    var l = n.reduce(function(u, f) {
      var _ = u[0], g = u[1], v = i[f], w = t[f];
      return [
        _ || v,
        _ || !v ? tc(g, v && v.multi ? function(b) {
          var p = Jo(b, f);
          return pa(p) && p.some(function(y) {
            return o(w, y);
          });
        } : function(b) {
          return o(w, Jo(b, f));
        }) : g
      ];
    }, [null, null]), s = l[0], d = l[1];
    return s ? this.where(s.name).equals(t[s.keyPath]).filter(d) : a ? this.filter(d) : this.where(n).equals("");
  }, e.prototype.filter = function(t) {
    return this.toCollection().and(t);
  }, e.prototype.count = function(t) {
    return this.toCollection().count(t);
  }, e.prototype.offset = function(t) {
    return this.toCollection().offset(t);
  }, e.prototype.limit = function(t) {
    return this.toCollection().limit(t);
  }, e.prototype.each = function(t) {
    return this.toCollection().each(t);
  }, e.prototype.toArray = function(t) {
    return this.toCollection().toArray(t);
  }, e.prototype.toCollection = function() {
    return new this.db.Collection(new this.db.WhereClause(this));
  }, e.prototype.orderBy = function(t) {
    return new this.db.Collection(new this.db.WhereClause(this, pa(t) ? "[".concat(t.join("+"), "]") : t));
  }, e.prototype.reverse = function() {
    return this.toCollection().reverse();
  }, e.prototype.mapToClass = function(t) {
    var n = this, a = n.db, r = n.name;
    this.schema.mappedClass = t, t.prototype instanceof W8 && (t = function(s) {
      m8(d, s);
      function d() {
        return s !== null && s.apply(this, arguments) || this;
      }
      return Object.defineProperty(d.prototype, "db", {
        get: function() {
          return a;
        },
        enumerable: !1,
        configurable: !0
      }), d.prototype.table = function() {
        return r;
      }, d;
    }(t));
    for (var i = /* @__PURE__ */ new Set(), o = t.prototype; o; o = Tu(o))
      Object.getOwnPropertyNames(o).forEach(function(s) {
        return i.add(s);
      });
    var l = function(s) {
      if (!s)
        return s;
      var d = Object.create(t.prototype);
      for (var u in s)
        if (!i.has(u))
          try {
            d[u] = s[u];
          } catch {
          }
      return d;
    };
    return this.schema.readHook && this.hook.reading.unsubscribe(this.schema.readHook), this.schema.readHook = l, this.hook("reading", l), t;
  }, e.prototype.defineClass = function() {
    function t(n) {
      ui(this, n);
    }
    return this.mapToClass(t);
  }, e.prototype.add = function(t, n) {
    var a = this, r = this.schema.primKey, i = r.auto, o = r.keyPath, l = t;
    return o && i && (l = xh(o)(t)), this._trans("readwrite", function(s) {
      return a.core.mutate({ trans: s, type: "add", keys: n != null ? [n] : null, values: [l] });
    }).then(function(s) {
      return s.numFailures ? wt.reject(s.failures[0]) : s.lastResult;
    }).then(function(s) {
      if (o)
        try {
          ci(t, o, s);
        } catch {
        }
      return s;
    });
  }, e.prototype.update = function(t, n) {
    if (typeof t == "object" && !pa(t)) {
      var a = Jo(t, this.schema.primKey.keyPath);
      return a === void 0 ? Ma(new Bt.InvalidArgument("Given object does not contain its primary key")) : this.where(":id").equals(a).modify(n);
    } else
      return this.where(":id").equals(t).modify(n);
  }, e.prototype.put = function(t, n) {
    var a = this, r = this.schema.primKey, i = r.auto, o = r.keyPath, l = t;
    return o && i && (l = xh(o)(t)), this._trans("readwrite", function(s) {
      return a.core.mutate({ trans: s, type: "put", values: [l], keys: n != null ? [n] : null });
    }).then(function(s) {
      return s.numFailures ? wt.reject(s.failures[0]) : s.lastResult;
    }).then(function(s) {
      if (o)
        try {
          ci(t, o, s);
        } catch {
        }
      return s;
    });
  }, e.prototype.delete = function(t) {
    var n = this;
    return this._trans("readwrite", function(a) {
      return n.core.mutate({ trans: a, type: "delete", keys: [t] });
    }).then(function(a) {
      return a.numFailures ? wt.reject(a.failures[0]) : void 0;
    });
  }, e.prototype.clear = function() {
    var t = this;
    return this._trans("readwrite", function(n) {
      return t.core.mutate({ trans: n, type: "deleteRange", range: vI });
    }).then(function(n) {
      return n.numFailures ? wt.reject(n.failures[0]) : void 0;
    });
  }, e.prototype.bulkGet = function(t) {
    var n = this;
    return this._trans("readonly", function(a) {
      return n.core.getMany({
        keys: t,
        trans: a
      }).then(function(r) {
        return r.map(function(i) {
          return n.hook.reading.fire(i);
        });
      });
    });
  }, e.prototype.bulkAdd = function(t, n, a) {
    var r = this, i = Array.isArray(n) ? n : void 0;
    a = a || (i ? void 0 : n);
    var o = a ? a.allKeys : void 0;
    return this._trans("readwrite", function(l) {
      var s = r.schema.primKey, d = s.auto, u = s.keyPath;
      if (u && i)
        throw new Bt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
      if (i && i.length !== t.length)
        throw new Bt.InvalidArgument("Arguments objects and keys must have the same length");
      var f = t.length, _ = u && d ? t.map(xh(u)) : t;
      return r.core.mutate({ trans: l, type: "add", keys: i, values: _, wantResults: o }).then(function(g) {
        var v = g.numFailures, w = g.results, b = g.lastResult, p = g.failures, y = o ? w : b;
        if (v === 0)
          return y;
        throw new ru("".concat(r.name, ".bulkAdd(): ").concat(v, " of ").concat(f, " operations failed"), p);
      });
    });
  }, e.prototype.bulkPut = function(t, n, a) {
    var r = this, i = Array.isArray(n) ? n : void 0;
    a = a || (i ? void 0 : n);
    var o = a ? a.allKeys : void 0;
    return this._trans("readwrite", function(l) {
      var s = r.schema.primKey, d = s.auto, u = s.keyPath;
      if (u && i)
        throw new Bt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
      if (i && i.length !== t.length)
        throw new Bt.InvalidArgument("Arguments objects and keys must have the same length");
      var f = t.length, _ = u && d ? t.map(xh(u)) : t;
      return r.core.mutate({ trans: l, type: "put", keys: i, values: _, wantResults: o }).then(function(g) {
        var v = g.numFailures, w = g.results, b = g.lastResult, p = g.failures, y = o ? w : b;
        if (v === 0)
          return y;
        throw new ru("".concat(r.name, ".bulkPut(): ").concat(v, " of ").concat(f, " operations failed"), p);
      });
    });
  }, e.prototype.bulkUpdate = function(t) {
    var n = this, a = this.core, r = t.map(function(l) {
      return l.key;
    }), i = t.map(function(l) {
      return l.changes;
    }), o = [];
    return this._trans("readwrite", function(l) {
      return a.getMany({ trans: l, keys: r, cache: "clone" }).then(function(s) {
        var d = [], u = [];
        t.forEach(function(_, g) {
          var v = _.key, w = _.changes, b = s[g];
          if (b) {
            for (var p = 0, y = Object.keys(w); p < y.length; p++) {
              var S = y[p], E = w[S];
              if (S === n.schema.primKey.keyPath) {
                if (_n(E, v) !== 0)
                  throw new Bt.Constraint("Cannot update primary key in bulkUpdate()");
              } else
                ci(b, S, E);
            }
            o.push(g), d.push(v), u.push(b);
          }
        });
        var f = d.length;
        return a.mutate({
          trans: l,
          type: "put",
          keys: d,
          values: u,
          updates: {
            keys: r,
            changeSpecs: i
          }
        }).then(function(_) {
          var g = _.numFailures, v = _.failures;
          if (g === 0)
            return f;
          for (var w = 0, b = Object.keys(v); w < b.length; w++) {
            var p = b[w], y = o[Number(p)];
            if (y != null) {
              var S = v[p];
              delete v[p], v[y] = S;
            }
          }
          throw new ru("".concat(n.name, ".bulkUpdate(): ").concat(g, " of ").concat(f, " operations failed"), v);
        });
      });
    });
  }, e.prototype.bulkDelete = function(t) {
    var n = this, a = t.length;
    return this._trans("readwrite", function(r) {
      return n.core.mutate({ trans: r, type: "delete", keys: t });
    }).then(function(r) {
      var i = r.numFailures, o = r.lastResult, l = r.failures;
      if (i === 0)
        return o;
      throw new ru("".concat(n.name, ".bulkDelete(): ").concat(i, " of ").concat(a, " operations failed"), l);
    });
  }, e;
}();
function qf(e) {
  var t = {}, n = function(l, s) {
    if (s) {
      for (var d = arguments.length, u = new Array(d - 1); --d; )
        u[d - 1] = arguments[d];
      return t[l].subscribe.apply(null, u), e;
    } else if (typeof l == "string")
      return t[l];
  };
  n.addEventType = i;
  for (var a = 1, r = arguments.length; a < r; ++a)
    i(arguments[a]);
  return n;
  function i(l, s, d) {
    if (typeof l == "object")
      return o(l);
    s || (s = D8), d || (d = Dn);
    var u = {
      subscribers: [],
      fire: d,
      subscribe: function(f) {
        u.subscribers.indexOf(f) === -1 && (u.subscribers.push(f), u.fire = s(u.fire, f));
      },
      unsubscribe: function(f) {
        u.subscribers = u.subscribers.filter(function(_) {
          return _ !== f;
        }), u.fire = u.subscribers.reduce(s, d);
      }
    };
    return t[l] = n[l] = u, u;
  }
  function o(l) {
    ar(l).forEach(function(s) {
      var d = l[s];
      if (pa(d))
        i(s, l[s][0], l[s][1]);
      else if (d === "asap")
        var u = i(s, $f, function() {
          for (var _ = arguments.length, g = new Array(_); _--; )
            g[_] = arguments[_];
          u.subscribers.forEach(function(v) {
            aI(function() {
              v.apply(null, g);
            });
          });
        });
      else
        throw new Bt.InvalidArgument("Invalid event config");
    });
  }
}
function Hf(e, t) {
  return zu(t).from({ prototype: e }), t;
}
function K8(e) {
  return Hf(gI.prototype, function(n, a, r) {
    this.db = e, this._tx = r, this.name = n, this.schema = a, this.hook = e._allTables[n] ? e._allTables[n].hook : qf(null, {
      creating: [E8, Dn],
      reading: [I8, $f],
      updating: [O8, Dn],
      deleting: [P8, Dn]
    });
  });
}
function Kc(e, t) {
  return !(e.filter || e.algorithm || e.or) && (t ? e.justLimit : !e.replayFilter);
}
function $g(e, t) {
  e.filter = tc(e.filter, t);
}
function qg(e, t, n) {
  var a = e.replayFilter;
  e.replayFilter = a ? function() {
    return tc(a(), t());
  } : t, e.justLimit = n && !a;
}
function G8(e, t) {
  e.isMatch = tc(e.isMatch, t);
}
function t_(e, t) {
  if (e.isPrimKey)
    return t.primaryKey;
  var n = t.getIndexByKeyPath(e.index);
  if (!n)
    throw new Bt.Schema("KeyPath " + e.index + " on object store " + t.name + " is not indexed");
  return n;
}
function wC(e, t, n) {
  var a = t_(e, t.schema);
  return t.openCursor({
    trans: n,
    values: !e.keysOnly,
    reverse: e.dir === "prev",
    unique: !!e.unique,
    query: {
      index: a,
      range: e.range
    }
  });
}
function Th(e, t, n, a) {
  var r = e.replayFilter ? tc(e.filter, e.replayFilter()) : e.filter;
  if (e.or) {
    var i = {}, o = function(l, s, d) {
      if (!r || r(s, d, function(_) {
        return s.stop(_);
      }, function(_) {
        return s.fail(_);
      })) {
        var u = s.primaryKey, f = "" + u;
        f === "[object ArrayBuffer]" && (f = "" + new Uint8Array(u)), Gr(i, f) || (i[f] = !0, t(l, s, d));
      }
    };
    return Promise.all([
      e.or._iterate(o, n),
      kC(wC(e, a, n), e.algorithm, o, !e.keysOnly && e.valueMapper)
    ]);
  } else
    return kC(wC(e, a, n), tc(e.algorithm, r), t, !e.keysOnly && e.valueMapper);
}
function kC(e, t, n, a) {
  var r = a ? function(o, l, s) {
    return n(a(o), l, s);
  } : n, i = ia(r);
  return e.then(function(o) {
    if (o)
      return o.start(function() {
        var l = function() {
          return o.continue();
        };
        (!t || t(o, function(s) {
          return l = s;
        }, function(s) {
          o.stop(s), l = Dn;
        }, function(s) {
          o.fail(s), l = Dn;
        })) && i(o.value, o, function(s) {
          return l = s;
        }), l();
      });
  });
}
var Q8 = function() {
  function e(t) {
    this["@@propmod"] = t;
  }
  return e.prototype.execute = function(t) {
    var n, a = this["@@propmod"];
    if (a.add !== void 0) {
      var r = a.add;
      if (pa(r))
        return S_(S_([], pa(t) ? t : [], !0), r).sort();
      if (typeof r == "number")
        return (Number(t) || 0) + r;
      if (typeof r == "bigint")
        try {
          return BigInt(t) + r;
        } catch {
          return BigInt(0) + r;
        }
      throw new TypeError("Invalid term ".concat(r));
    }
    if (a.remove !== void 0) {
      var i = a.remove;
      if (pa(i))
        return pa(t) ? t.filter(function(l) {
          return !i.includes(l);
        }).sort() : [];
      if (typeof i == "number")
        return Number(t) - i;
      if (typeof i == "bigint")
        try {
          return BigInt(t) - i;
        } catch {
          return BigInt(0) - i;
        }
      throw new TypeError("Invalid subtrahend ".concat(i));
    }
    var o = (n = a.replacePrefix) === null || n === void 0 ? void 0 : n[0];
    return o && typeof t == "string" && t.startsWith(o) ? a.replacePrefix[1] + t.substring(o.length) : t;
  }, e;
}(), J8 = function() {
  function e() {
  }
  return e.prototype._read = function(t, n) {
    var a = this._ctx;
    return a.error ? a.table._trans(null, Ma.bind(null, a.error)) : a.table._trans("readonly", t).then(n);
  }, e.prototype._write = function(t) {
    var n = this._ctx;
    return n.error ? n.table._trans(null, Ma.bind(null, n.error)) : n.table._trans("readwrite", t, "locked");
  }, e.prototype._addAlgorithm = function(t) {
    var n = this._ctx;
    n.algorithm = tc(n.algorithm, t);
  }, e.prototype._iterate = function(t, n) {
    return Th(this._ctx, t, n, this._ctx.table.core);
  }, e.prototype.clone = function(t) {
    var n = Object.create(this.constructor.prototype), a = Object.create(this._ctx);
    return t && ui(a, t), n._ctx = a, n;
  }, e.prototype.raw = function() {
    return this._ctx.valueMapper = null, this;
  }, e.prototype.each = function(t) {
    var n = this._ctx;
    return this._read(function(a) {
      return Th(n, t, a, n.table.core);
    });
  }, e.prototype.count = function(t) {
    var n = this;
    return this._read(function(a) {
      var r = n._ctx, i = r.table.core;
      if (Kc(r, !0))
        return i.count({
          trans: a,
          query: {
            index: t_(r, i.schema),
            range: r.range
          }
        }).then(function(l) {
          return Math.min(l, r.limit);
        });
      var o = 0;
      return Th(r, function() {
        return ++o, !1;
      }, a, i).then(function() {
        return o;
      });
    }).then(t);
  }, e.prototype.sortBy = function(t, n) {
    var a = t.split(".").reverse(), r = a[0], i = a.length - 1;
    function o(d, u) {
      return u ? o(d[a[u]], u - 1) : d[r];
    }
    var l = this._ctx.dir === "next" ? 1 : -1;
    function s(d, u) {
      var f = o(d, i), _ = o(u, i);
      return _n(f, _) * l;
    }
    return this.toArray(function(d) {
      return d.sort(s);
    }).then(n);
  }, e.prototype.toArray = function(t) {
    var n = this;
    return this._read(function(a) {
      var r = n._ctx;
      if (r.dir === "next" && Kc(r, !0) && r.limit > 0) {
        var i = r.valueMapper, o = t_(r, r.table.core.schema);
        return r.table.core.query({
          trans: a,
          limit: r.limit,
          values: !0,
          query: {
            index: o,
            range: r.range
          }
        }).then(function(s) {
          var d = s.result;
          return i ? d.map(i) : d;
        });
      } else {
        var l = [];
        return Th(r, function(s) {
          return l.push(s);
        }, a, r.table.core).then(function() {
          return l;
        });
      }
    }, t);
  }, e.prototype.offset = function(t) {
    var n = this._ctx;
    return t <= 0 ? this : (n.offset += t, Kc(n) ? qg(n, function() {
      var a = t;
      return function(r, i) {
        return a === 0 ? !0 : a === 1 ? (--a, !1) : (i(function() {
          r.advance(a), a = 0;
        }), !1);
      };
    }) : qg(n, function() {
      var a = t;
      return function() {
        return --a < 0;
      };
    }), this);
  }, e.prototype.limit = function(t) {
    return this._ctx.limit = Math.min(this._ctx.limit, t), qg(this._ctx, function() {
      var n = t;
      return function(a, r, i) {
        return --n <= 0 && r(i), n >= 0;
      };
    }, !0), this;
  }, e.prototype.until = function(t, n) {
    return $g(this._ctx, function(a, r, i) {
      return t(a.value) ? (r(i), n) : !0;
    }), this;
  }, e.prototype.first = function(t) {
    return this.limit(1).toArray(function(n) {
      return n[0];
    }).then(t);
  }, e.prototype.last = function(t) {
    return this.reverse().first(t);
  }, e.prototype.filter = function(t) {
    return $g(this._ctx, function(n) {
      return t(n.value);
    }), G8(this._ctx, t), this;
  }, e.prototype.and = function(t) {
    return this.filter(t);
  }, e.prototype.or = function(t) {
    return new this.db.WhereClause(this._ctx.table, t, this);
  }, e.prototype.reverse = function() {
    return this._ctx.dir = this._ctx.dir === "prev" ? "next" : "prev", this._ondirectionchange && this._ondirectionchange(this._ctx.dir), this;
  }, e.prototype.desc = function() {
    return this.reverse();
  }, e.prototype.eachKey = function(t) {
    var n = this._ctx;
    return n.keysOnly = !n.isMatch, this.each(function(a, r) {
      t(r.key, r);
    });
  }, e.prototype.eachUniqueKey = function(t) {
    return this._ctx.unique = "unique", this.eachKey(t);
  }, e.prototype.eachPrimaryKey = function(t) {
    var n = this._ctx;
    return n.keysOnly = !n.isMatch, this.each(function(a, r) {
      t(r.primaryKey, r);
    });
  }, e.prototype.keys = function(t) {
    var n = this._ctx;
    n.keysOnly = !n.isMatch;
    var a = [];
    return this.each(function(r, i) {
      a.push(i.key);
    }).then(function() {
      return a;
    }).then(t);
  }, e.prototype.primaryKeys = function(t) {
    var n = this._ctx;
    if (n.dir === "next" && Kc(n, !0) && n.limit > 0)
      return this._read(function(r) {
        var i = t_(n, n.table.core.schema);
        return n.table.core.query({
          trans: r,
          values: !1,
          limit: n.limit,
          query: {
            index: i,
            range: n.range
          }
        });
      }).then(function(r) {
        var i = r.result;
        return i;
      }).then(t);
    n.keysOnly = !n.isMatch;
    var a = [];
    return this.each(function(r, i) {
      a.push(i.primaryKey);
    }).then(function() {
      return a;
    }).then(t);
  }, e.prototype.uniqueKeys = function(t) {
    return this._ctx.unique = "unique", this.keys(t);
  }, e.prototype.firstKey = function(t) {
    return this.limit(1).keys(function(n) {
      return n[0];
    }).then(t);
  }, e.prototype.lastKey = function(t) {
    return this.reverse().firstKey(t);
  }, e.prototype.distinct = function() {
    var t = this._ctx, n = t.index && t.table.schema.idxByName[t.index];
    if (!n || !n.multi)
      return this;
    var a = {};
    return $g(this._ctx, function(r) {
      var i = r.primaryKey.toString(), o = Gr(a, i);
      return a[i] = !0, !o;
    }), this;
  }, e.prototype.modify = function(t) {
    var n = this, a = this._ctx;
    return this._write(function(r) {
      var i;
      if (typeof t == "function")
        i = t;
      else {
        var o = ar(t), l = o.length;
        i = function(y) {
          for (var S = !1, E = 0; E < l; ++E) {
            var C = o[E], B = t[C], O = Jo(y, C);
            B instanceof Q8 ? (ci(y, C, B.execute(O)), S = !0) : O !== B && (ci(y, C, B), S = !0);
          }
          return S;
        };
      }
      var s = a.table.core, d = s.schema.primaryKey, u = d.outbound, f = d.extractKey, _ = 200, g = n.db._options.modifyChunkSize;
      g && (typeof g == "object" ? _ = g[s.name] || g["*"] || 200 : _ = g);
      var v = [], w = 0, b = [], p = function(y, S) {
        var E = S.failures, C = S.numFailures;
        w += y - C;
        for (var B = 0, O = ar(E); B < O.length; B++) {
          var D = O[B];
          v.push(E[D]);
        }
      };
      return n.clone().primaryKeys().then(function(y) {
        var S = Kc(a) && a.limit === 1 / 0 && (typeof t != "function" || t === Hg) && {
          index: a.index,
          range: a.range
        }, E = function(C) {
          var B = Math.min(_, y.length - C);
          return s.getMany({
            trans: r,
            keys: y.slice(C, C + B),
            cache: "immutable"
          }).then(function(O) {
            for (var D = [], T = [], P = u ? [] : null, I = [], M = 0; M < B; ++M) {
              var V = O[M], N = {
                value: Xl(V),
                primKey: y[C + M]
              };
              i.call(N, N.value, N) !== !1 && (N.value == null ? I.push(y[C + M]) : !u && _n(f(V), f(N.value)) !== 0 ? (I.push(y[C + M]), D.push(N.value)) : (T.push(N.value), u && P.push(y[C + M])));
            }
            return Promise.resolve(D.length > 0 && s.mutate({ trans: r, type: "add", values: D }).then(function(q) {
              for (var j in q.failures)
                I.splice(parseInt(j), 1);
              p(D.length, q);
            })).then(function() {
              return (T.length > 0 || S && typeof t == "object") && s.mutate({
                trans: r,
                type: "put",
                keys: P,
                values: T,
                criteria: S,
                changeSpec: typeof t != "function" && t,
                isAdditionalChunk: C > 0
              }).then(function(q) {
                return p(T.length, q);
              });
            }).then(function() {
              return (I.length > 0 || S && t === Hg) && s.mutate({
                trans: r,
                type: "delete",
                keys: I,
                criteria: S,
                isAdditionalChunk: C > 0
              }).then(function(q) {
                return p(I.length, q);
              });
            }).then(function() {
              return y.length > C + B && E(C + _);
            });
          });
        };
        return E(0).then(function() {
          if (v.length > 0)
            throw new C_("Error modifying one or more objects", v, w, b);
          return y.length;
        });
      });
    });
  }, e.prototype.delete = function() {
    var t = this._ctx, n = t.range;
    return Kc(t) && (t.isPrimKey || n.type === 3) ? this._write(function(a) {
      var r = t.table.core.schema.primaryKey, i = n;
      return t.table.core.count({ trans: a, query: { index: r, range: i } }).then(function(o) {
        return t.table.core.mutate({ trans: a, type: "deleteRange", range: i }).then(function(l) {
          var s = l.failures;
          l.lastResult, l.results;
          var d = l.numFailures;
          if (d)
            throw new C_("Could not delete some values", Object.keys(s).map(function(u) {
              return s[u];
            }), o - d);
          return o - d;
        });
      });
    }) : this.modify(Hg);
  }, e;
}(), Hg = function(e, t) {
  return t.value = null;
};
function X8(e) {
  return Hf(J8.prototype, function(n, a) {
    this.db = e;
    var r = vI, i = null;
    if (a)
      try {
        r = a();
      } catch (d) {
        i = d;
      }
    var o = n._ctx, l = o.table, s = l.hook.reading.fire;
    this._ctx = {
      table: l,
      index: o.index,
      isPrimKey: !o.index || l.schema.primKey.keyPath && o.index === l.schema.primKey.name,
      range: r,
      keysOnly: !1,
      dir: "next",
      unique: "",
      algorithm: null,
      filter: null,
      replayFilter: null,
      justLimit: !0,
      isMatch: null,
      offset: 0,
      limit: 1 / 0,
      error: i,
      or: o.or,
      valueMapper: s !== $f ? s : null
    };
  });
}
function Z8(e, t) {
  return e < t ? -1 : e === t ? 0 : 1;
}
function e5(e, t) {
  return e > t ? -1 : e === t ? 0 : 1;
}
function ri(e, t, n) {
  var a = e instanceof bI ? new e.Collection(e) : e;
  return a._ctx.error = n ? new n(t) : new TypeError(t), a;
}
function Gc(e) {
  return new e.Collection(e, function() {
    return yI("");
  }).limit(0);
}
function t5(e) {
  return e === "next" ? function(t) {
    return t.toUpperCase();
  } : function(t) {
    return t.toLowerCase();
  };
}
function n5(e) {
  return e === "next" ? function(t) {
    return t.toLowerCase();
  } : function(t) {
    return t.toUpperCase();
  };
}
function a5(e, t, n, a, r, i) {
  for (var o = Math.min(e.length, a.length), l = -1, s = 0; s < o; ++s) {
    var d = t[s];
    if (d !== a[s])
      return r(e[s], n[s]) < 0 ? e.substr(0, s) + n[s] + n.substr(s + 1) : r(e[s], a[s]) < 0 ? e.substr(0, s) + a[s] + n.substr(s + 1) : l >= 0 ? e.substr(0, l) + t[l] + n.substr(l + 1) : null;
    r(e[s], d) < 0 && (l = s);
  }
  return o < a.length && i === "next" ? e + n.substr(e.length) : o < e.length && i === "prev" ? e.substr(0, n.length) : l < 0 ? null : e.substr(0, l) + a[l] + n.substr(l + 1);
}
function Ih(e, t, n, a) {
  var r, i, o, l, s, d, u, f = n.length;
  if (!n.every(function(w) {
    return typeof w == "string";
  }))
    return ri(e, pI);
  function _(w) {
    r = t5(w), i = n5(w), o = w === "next" ? Z8 : e5;
    var b = n.map(function(p) {
      return { lower: i(p), upper: r(p) };
    }).sort(function(p, y) {
      return o(p.lower, y.lower);
    });
    l = b.map(function(p) {
      return p.upper;
    }), s = b.map(function(p) {
      return p.lower;
    }), d = w, u = w === "next" ? "" : a;
  }
  _("next");
  var g = new e.Collection(e, function() {
    return Is(l[0], s[f - 1] + a);
  });
  g._ondirectionchange = function(w) {
    _(w);
  };
  var v = 0;
  return g._addAlgorithm(function(w, b, p) {
    var y = w.key;
    if (typeof y != "string")
      return !1;
    var S = i(y);
    if (t(S, s, v))
      return !0;
    for (var E = null, C = v; C < f; ++C) {
      var B = a5(y, S, l[C], s[C], o, d);
      B === null && E === null ? v = C + 1 : (E === null || o(E, B) > 0) && (E = B);
    }
    return b(E !== null ? function() {
      w.continue(E + u);
    } : p), !1;
  }), g;
}
function Is(e, t, n, a) {
  return {
    type: 2,
    lower: e,
    upper: t,
    lowerOpen: n,
    upperOpen: a
  };
}
function yI(e) {
  return {
    type: 1,
    lower: e,
    upper: e
  };
}
var bI = function() {
  function e() {
  }
  return Object.defineProperty(e.prototype, "Collection", {
    get: function() {
      return this._ctx.table.db.Collection;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.between = function(t, n, a, r) {
    a = a !== !1, r = r === !0;
    try {
      return this._cmp(t, n) > 0 || this._cmp(t, n) === 0 && (a || r) && !(a && r) ? Gc(this) : new this.Collection(this, function() {
        return Is(t, n, !a, !r);
      });
    } catch {
      return ri(this, $o);
    }
  }, e.prototype.equals = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return yI(t);
    });
  }, e.prototype.above = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(t, void 0, !0);
    });
  }, e.prototype.aboveOrEqual = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(t, void 0, !1);
    });
  }, e.prototype.below = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(void 0, t, !1, !0);
    });
  }, e.prototype.belowOrEqual = function(t) {
    return t == null ? ri(this, $o) : new this.Collection(this, function() {
      return Is(void 0, t);
    });
  }, e.prototype.startsWith = function(t) {
    return typeof t != "string" ? ri(this, pI) : this.between(t, t + Nl, !0, !0);
  }, e.prototype.startsWithIgnoreCase = function(t) {
    return t === "" ? this.startsWith(t) : Ih(this, function(n, a) {
      return n.indexOf(a[0]) === 0;
    }, [t], Nl);
  }, e.prototype.equalsIgnoreCase = function(t) {
    return Ih(this, function(n, a) {
      return n === a[0];
    }, [t], "");
  }, e.prototype.anyOfIgnoreCase = function() {
    var t = jo.apply(tu, arguments);
    return t.length === 0 ? Gc(this) : Ih(this, function(n, a) {
      return a.indexOf(n) !== -1;
    }, t, "");
  }, e.prototype.startsWithAnyOfIgnoreCase = function() {
    var t = jo.apply(tu, arguments);
    return t.length === 0 ? Gc(this) : Ih(this, function(n, a) {
      return a.some(function(r) {
        return n.indexOf(r) === 0;
      });
    }, t, Nl);
  }, e.prototype.anyOf = function() {
    var t = this, n = jo.apply(tu, arguments), a = this._cmp;
    try {
      n.sort(a);
    } catch {
      return ri(this, $o);
    }
    if (n.length === 0)
      return Gc(this);
    var r = new this.Collection(this, function() {
      return Is(n[0], n[n.length - 1]);
    });
    r._ondirectionchange = function(o) {
      a = o === "next" ? t._ascending : t._descending, n.sort(a);
    };
    var i = 0;
    return r._addAlgorithm(function(o, l, s) {
      for (var d = o.key; a(d, n[i]) > 0; )
        if (++i, i === n.length)
          return l(s), !1;
      return a(d, n[i]) === 0 ? !0 : (l(function() {
        o.continue(n[i]);
      }), !1);
    }), r;
  }, e.prototype.notEqual = function(t) {
    return this.inAnyRange([[ib, t], [t, this.db._maxKey]], { includeLowers: !1, includeUppers: !1 });
  }, e.prototype.noneOf = function() {
    var t = jo.apply(tu, arguments);
    if (t.length === 0)
      return new this.Collection(this);
    try {
      t.sort(this._ascending);
    } catch {
      return ri(this, $o);
    }
    var n = t.reduce(function(a, r) {
      return a ? a.concat([[a[a.length - 1][1], r]]) : [[ib, r]];
    }, null);
    return n.push([t[t.length - 1], this.db._maxKey]), this.inAnyRange(n, { includeLowers: !1, includeUppers: !1 });
  }, e.prototype.inAnyRange = function(t, n) {
    var a = this, r = this._cmp, i = this._ascending, o = this._descending, l = this._min, s = this._max;
    if (t.length === 0)
      return Gc(this);
    if (!t.every(function(C) {
      return C[0] !== void 0 && C[1] !== void 0 && i(C[0], C[1]) <= 0;
    }))
      return ri(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", Bt.InvalidArgument);
    var d = !n || n.includeLowers !== !1, u = n && n.includeUppers === !0;
    function f(C, B) {
      for (var O = 0, D = C.length; O < D; ++O) {
        var T = C[O];
        if (r(B[0], T[1]) < 0 && r(B[1], T[0]) > 0) {
          T[0] = l(T[0], B[0]), T[1] = s(T[1], B[1]);
          break;
        }
      }
      return O === D && C.push(B), C;
    }
    var _ = i;
    function g(C, B) {
      return _(C[0], B[0]);
    }
    var v;
    try {
      v = t.reduce(f, []), v.sort(g);
    } catch {
      return ri(this, $o);
    }
    var w = 0, b = u ? function(C) {
      return i(C, v[w][1]) > 0;
    } : function(C) {
      return i(C, v[w][1]) >= 0;
    }, p = d ? function(C) {
      return o(C, v[w][0]) > 0;
    } : function(C) {
      return o(C, v[w][0]) >= 0;
    };
    function y(C) {
      return !b(C) && !p(C);
    }
    var S = b, E = new this.Collection(this, function() {
      return Is(v[0][0], v[v.length - 1][1], !d, !u);
    });
    return E._ondirectionchange = function(C) {
      C === "next" ? (S = b, _ = i) : (S = p, _ = o), v.sort(g);
    }, E._addAlgorithm(function(C, B, O) {
      for (var D = C.key; S(D); )
        if (++w, w === v.length)
          return B(O), !1;
      return y(D) ? !0 : (a._cmp(D, v[w][1]) === 0 || a._cmp(D, v[w][0]) === 0 || B(function() {
        _ === i ? C.continue(v[w][0]) : C.continue(v[w][1]);
      }), !1);
    }), E;
  }, e.prototype.startsWithAnyOf = function() {
    var t = jo.apply(tu, arguments);
    return t.every(function(n) {
      return typeof n == "string";
    }) ? t.length === 0 ? Gc(this) : this.inAnyRange(t.map(function(n) {
      return [n, n + Nl];
    })) : ri(this, "startsWithAnyOf() only works with strings");
  }, e;
}();
function r5(e) {
  return Hf(bI.prototype, function(n, a, r) {
    if (this.db = e, this._ctx = {
      table: n,
      index: a === ":id" ? null : a,
      or: r
    }, this._cmp = this._ascending = _n, this._descending = function(i, o) {
      return _n(o, i);
    }, this._max = function(i, o) {
      return _n(i, o) > 0 ? i : o;
    }, this._min = function(i, o) {
      return _n(i, o) < 0 ? i : o;
    }, this._IDBKeyRange = e._deps.IDBKeyRange, !this._IDBKeyRange)
      throw new Bt.MissingAPI();
  });
}
function co(e) {
  return ia(function(t) {
    return bf(t), e(t.target.error), !1;
  });
}
function bf(e) {
  e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault();
}
var zf = "storagemutated", ob = "x-storagemutated-1", Ys = qf(null, zf), i5 = function() {
  function e() {
  }
  return e.prototype._lock = function() {
    return Hd(!Pt.global), ++this._reculock, this._reculock === 1 && !Pt.global && (Pt.lockOwnerFor = this), this;
  }, e.prototype._unlock = function() {
    if (Hd(!Pt.global), --this._reculock === 0)
      for (Pt.global || (Pt.lockOwnerFor = null); this._blockedFuncs.length > 0 && !this._locked(); ) {
        var t = this._blockedFuncs.shift();
        try {
          ec(t[1], t[0]);
        } catch {
        }
      }
    return this;
  }, e.prototype._locked = function() {
    return this._reculock && Pt.lockOwnerFor !== this;
  }, e.prototype.create = function(t) {
    var n = this;
    if (!this.mode)
      return this;
    var a = this.db.idbdb, r = this.db._state.dbOpenError;
    if (Hd(!this.idbtrans), !t && !a)
      switch (r && r.name) {
        case "DatabaseClosedError":
          throw new Bt.DatabaseClosed(r);
        case "MissingAPIError":
          throw new Bt.MissingAPI(r.message, r);
        default:
          throw new Bt.OpenFailed(r);
      }
    if (!this.active)
      throw new Bt.TransactionInactive();
    return Hd(this._completion._state === null), t = this.idbtrans = t || (this.db.core ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }) : a.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })), t.onerror = ia(function(i) {
      bf(i), n._reject(t.error);
    }), t.onabort = ia(function(i) {
      bf(i), n.active && n._reject(new Bt.Abort(t.error)), n.active = !1, n.on("abort").fire(i);
    }), t.oncomplete = ia(function() {
      n.active = !1, n._resolve(), "mutatedParts" in t && Ys.storagemutated.fire(t.mutatedParts);
    }), this;
  }, e.prototype._promise = function(t, n, a) {
    var r = this;
    if (t === "readwrite" && this.mode !== "readwrite")
      return Ma(new Bt.ReadOnly("Transaction is readonly"));
    if (!this.active)
      return Ma(new Bt.TransactionInactive());
    if (this._locked())
      return new wt(function(o, l) {
        r._blockedFuncs.push([function() {
          r._promise(t, n, a).then(o, l);
        }, Pt]);
      });
    if (a)
      return zs(function() {
        var o = new wt(function(l, s) {
          r._lock();
          var d = n(l, s, r);
          d && d.then && d.then(l, s);
        });
        return o.finally(function() {
          return r._unlock();
        }), o._lib = !0, o;
      });
    var i = new wt(function(o, l) {
      var s = n(o, l, r);
      s && s.then && s.then(o, l);
    });
    return i._lib = !0, i;
  }, e.prototype._root = function() {
    return this.parent ? this.parent._root() : this;
  }, e.prototype.waitFor = function(t) {
    var n = this._root(), a = wt.resolve(t);
    if (n._waitingFor)
      n._waitingFor = n._waitingFor.then(function() {
        return a;
      });
    else {
      n._waitingFor = a, n._waitingQueue = [];
      var r = n.idbtrans.objectStore(n.storeNames[0]);
      (function o() {
        for (++n._spinCount; n._waitingQueue.length; )
          n._waitingQueue.shift()();
        n._waitingFor && (r.get(-1 / 0).onsuccess = o);
      })();
    }
    var i = n._waitingFor;
    return new wt(function(o, l) {
      a.then(function(s) {
        return n._waitingQueue.push(ia(o.bind(null, s)));
      }, function(s) {
        return n._waitingQueue.push(ia(l.bind(null, s)));
      }).finally(function() {
        n._waitingFor === i && (n._waitingFor = null);
      });
    });
  }, e.prototype.abort = function() {
    this.active && (this.active = !1, this.idbtrans && this.idbtrans.abort(), this._reject(new Bt.Abort()));
  }, e.prototype.table = function(t) {
    var n = this._memoizedTables || (this._memoizedTables = {});
    if (Gr(n, t))
      return n[t];
    var a = this.schema[t];
    if (!a)
      throw new Bt.NotFound("Table " + t + " not part of transaction");
    var r = new this.db.Table(t, a, this);
    return r.core = this.db.core.table(t), n[t] = r, r;
  }, e;
}();
function o5(e) {
  return Hf(i5.prototype, function(n, a, r, i, o) {
    var l = this;
    this.db = e, this.mode = n, this.storeNames = a, this.schema = r, this.chromeTransactionDurability = i, this.idbtrans = null, this.on = qf(this, "complete", "error", "abort"), this.parent = o || null, this.active = !0, this._reculock = 0, this._blockedFuncs = [], this._resolve = null, this._reject = null, this._waitingFor = null, this._waitingQueue = null, this._spinCount = 0, this._completion = new wt(function(s, d) {
      l._resolve = s, l._reject = d;
    }), this._completion.then(function() {
      l.active = !1, l.on.complete.fire();
    }, function(s) {
      var d = l.active;
      return l.active = !1, l.on.error.fire(s), l.parent ? l.parent._reject(s) : d && l.idbtrans && l.idbtrans.abort(), Ma(s);
    });
  });
}
function sb(e, t, n, a, r, i, o) {
  return {
    name: e,
    keyPath: t,
    unique: n,
    multi: a,
    auto: r,
    compound: i,
    src: (n && !o ? "&" : "") + (a ? "*" : "") + (r ? "++" : "") + wI(t)
  };
}
function wI(e) {
  return typeof e == "string" ? e : e ? "[" + [].join.call(e, "+") + "]" : "";
}
function Hw(e, t, n) {
  return {
    name: e,
    primKey: t,
    indexes: n,
    mappedClass: null,
    idxByName: v8(n, function(a) {
      return [a.name, a];
    })
  };
}
function s5(e) {
  return e.length === 1 ? e[0] : e;
}
var wf = function(e) {
  try {
    return e.only([[]]), wf = function() {
      return [[]];
    }, [[]];
  } catch {
    return wf = function() {
      return Nl;
    }, Nl;
  }
};
function lb(e) {
  return e == null ? function() {
  } : typeof e == "string" ? l5(e) : function(t) {
    return Jo(t, e);
  };
}
function l5(e) {
  var t = e.split(".");
  return t.length === 1 ? function(n) {
    return n[e];
  } : function(n) {
    return Jo(n, e);
  };
}
function SC(e) {
  return [].slice.call(e);
}
var c5 = 0;
function nf(e) {
  return e == null ? ":id" : typeof e == "string" ? e : "[".concat(e.join("+"), "]");
}
function u5(e, t, n) {
  function a(f, _) {
    var g = SC(f.objectStoreNames);
    return {
      schema: {
        name: f.name,
        tables: g.map(function(v) {
          return _.objectStore(v);
        }).map(function(v) {
          var w = v.keyPath, b = v.autoIncrement, p = pa(w), y = w == null, S = {}, E = {
            name: v.name,
            primaryKey: {
              name: null,
              isPrimaryKey: !0,
              outbound: y,
              compound: p,
              keyPath: w,
              autoIncrement: b,
              unique: !0,
              extractKey: lb(w)
            },
            indexes: SC(v.indexNames).map(function(C) {
              return v.index(C);
            }).map(function(C) {
              var B = C.name, O = C.unique, D = C.multiEntry, T = C.keyPath, P = pa(T), I = {
                name: B,
                compound: P,
                keyPath: T,
                unique: O,
                multiEntry: D,
                extractKey: lb(T)
              };
              return S[nf(T)] = I, I;
            }),
            getIndexByKeyPath: function(C) {
              return S[nf(C)];
            }
          };
          return S[":id"] = E.primaryKey, w != null && (S[nf(w)] = E.primaryKey), E;
        })
      },
      hasGetAll: g.length > 0 && "getAll" in _.objectStore(g[0]) && !(typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
    };
  }
  function r(f) {
    if (f.type === 3)
      return null;
    if (f.type === 4)
      throw new Error("Cannot convert never type to IDBKeyRange");
    var _ = f.lower, g = f.upper, v = f.lowerOpen, w = f.upperOpen, b = _ === void 0 ? g === void 0 ? null : t.upperBound(g, !!w) : g === void 0 ? t.lowerBound(_, !!v) : t.bound(_, g, !!v, !!w);
    return b;
  }
  function i(f) {
    var _ = f.name;
    function g(b) {
      var p = b.trans, y = b.type, S = b.keys, E = b.values, C = b.range;
      return new Promise(function(B, O) {
        B = ia(B);
        var D = p.objectStore(_), T = D.keyPath == null, P = y === "put" || y === "add";
        if (!P && y !== "delete" && y !== "deleteRange")
          throw new Error("Invalid operation type: " + y);
        var I = (S || E || { length: 1 }).length;
        if (S && E && S.length !== E.length)
          throw new Error("Given keys array must have same length as given values array.");
        if (I === 0)
          return B({ numFailures: 0, failures: {}, results: [], lastResult: void 0 });
        var M, V = [], N = [], q = 0, j = function(se) {
          ++q, bf(se);
        };
        if (y === "deleteRange") {
          if (C.type === 4)
            return B({ numFailures: q, failures: N, results: [], lastResult: void 0 });
          C.type === 3 ? V.push(M = D.clear()) : V.push(M = D.delete(r(C)));
        } else {
          var ee = P ? T ? [E, S] : [E, null] : [S, null], de = ee[0], Z = ee[1];
          if (P)
            for (var F = 0; F < I; ++F)
              V.push(M = Z && Z[F] !== void 0 ? D[y](de[F], Z[F]) : D[y](de[F])), M.onerror = j;
          else
            for (var F = 0; F < I; ++F)
              V.push(M = D[y](de[F])), M.onerror = j;
        }
        var Y = function(se) {
          var X = se.target.result;
          V.forEach(function(he, ve) {
            return he.error != null && (N[ve] = he.error);
          }), B({
            numFailures: q,
            failures: N,
            results: y === "delete" ? S : V.map(function(he) {
              return he.result;
            }),
            lastResult: X
          });
        };
        M.onerror = function(se) {
          j(se), Y(se);
        }, M.onsuccess = Y;
      });
    }
    function v(b) {
      var p = b.trans, y = b.values, S = b.query, E = b.reverse, C = b.unique;
      return new Promise(function(B, O) {
        B = ia(B);
        var D = S.index, T = S.range, P = p.objectStore(_), I = D.isPrimaryKey ? P : P.index(D.name), M = E ? C ? "prevunique" : "prev" : C ? "nextunique" : "next", V = y || !("openKeyCursor" in I) ? I.openCursor(r(T), M) : I.openKeyCursor(r(T), M);
        V.onerror = co(O), V.onsuccess = ia(function(N) {
          var q = V.result;
          if (!q) {
            B(null);
            return;
          }
          q.___id = ++c5, q.done = !1;
          var j = q.continue.bind(q), ee = q.continuePrimaryKey;
          ee && (ee = ee.bind(q));
          var de = q.advance.bind(q), Z = function() {
            throw new Error("Cursor not started");
          }, F = function() {
            throw new Error("Cursor not stopped");
          };
          q.trans = p, q.stop = q.continue = q.continuePrimaryKey = q.advance = Z, q.fail = ia(O), q.next = function() {
            var Y = this, se = 1;
            return this.start(function() {
              return se-- ? Y.continue() : Y.stop();
            }).then(function() {
              return Y;
            });
          }, q.start = function(Y) {
            var se = new Promise(function(he, ve) {
              he = ia(he), V.onerror = co(ve), q.fail = ve, q.stop = function(pe) {
                q.stop = q.continue = q.continuePrimaryKey = q.advance = F, he(pe);
              };
            }), X = function() {
              if (V.result)
                try {
                  Y();
                } catch (he) {
                  q.fail(he);
                }
              else
                q.done = !0, q.start = function() {
                  throw new Error("Cursor behind last entry");
                }, q.stop();
            };
            return V.onsuccess = ia(function(he) {
              V.onsuccess = X, X();
            }), q.continue = j, q.continuePrimaryKey = ee, q.advance = de, X(), se;
          }, B(q);
        }, O);
      });
    }
    function w(b) {
      return function(p) {
        return new Promise(function(y, S) {
          y = ia(y);
          var E = p.trans, C = p.values, B = p.limit, O = p.query, D = B === 1 / 0 ? void 0 : B, T = O.index, P = O.range, I = E.objectStore(_), M = T.isPrimaryKey ? I : I.index(T.name), V = r(P);
          if (B === 0)
            return y({ result: [] });
          if (b) {
            var N = C ? M.getAll(V, D) : M.getAllKeys(V, D);
            N.onsuccess = function(de) {
              return y({ result: de.target.result });
            }, N.onerror = co(S);
          } else {
            var q = 0, j = C || !("openKeyCursor" in M) ? M.openCursor(V) : M.openKeyCursor(V), ee = [];
            j.onsuccess = function(de) {
              var Z = j.result;
              if (!Z)
                return y({ result: ee });
              if (ee.push(C ? Z.value : Z.primaryKey), ++q === B)
                return y({ result: ee });
              Z.continue();
            }, j.onerror = co(S);
          }
        });
      };
    }
    return {
      name: _,
      schema: f,
      mutate: g,
      getMany: function(b) {
        var p = b.trans, y = b.keys;
        return new Promise(function(S, E) {
          S = ia(S);
          for (var C = p.objectStore(_), B = y.length, O = new Array(B), D = 0, T = 0, P, I = function(q) {
            var j = q.target;
            (O[j._pos] = j.result) != null, ++T === D && S(O);
          }, M = co(E), V = 0; V < B; ++V) {
            var N = y[V];
            N != null && (P = C.get(y[V]), P._pos = V, P.onsuccess = I, P.onerror = M, ++D);
          }
          D === 0 && S(O);
        });
      },
      get: function(b) {
        var p = b.trans, y = b.key;
        return new Promise(function(S, E) {
          S = ia(S);
          var C = p.objectStore(_), B = C.get(y);
          B.onsuccess = function(O) {
            return S(O.target.result);
          }, B.onerror = co(E);
        });
      },
      query: w(s),
      openCursor: v,
      count: function(b) {
        var p = b.query, y = b.trans, S = p.index, E = p.range;
        return new Promise(function(C, B) {
          var O = y.objectStore(_), D = S.isPrimaryKey ? O : O.index(S.name), T = r(E), P = T ? D.count(T) : D.count();
          P.onsuccess = ia(function(I) {
            return C(I.target.result);
          }), P.onerror = co(B);
        });
      }
    };
  }
  var o = a(e, n), l = o.schema, s = o.hasGetAll, d = l.tables.map(function(f) {
    return i(f);
  }), u = {};
  return d.forEach(function(f) {
    return u[f.name] = f;
  }), {
    stack: "dbcore",
    transaction: e.transaction.bind(e),
    table: function(f) {
      var _ = u[f];
      if (!_)
        throw new Error("Table '".concat(f, "' not found"));
      return u[f];
    },
    MIN_KEY: -1 / 0,
    MAX_KEY: wf(t),
    schema: l
  };
}
function d5(e, t) {
  return t.reduce(function(n, a) {
    var r = a.create;
    return Jt(Jt({}, n), r(n));
  }, e);
}
function f5(e, t, n, a) {
  var r = n.IDBKeyRange;
  n.indexedDB;
  var i = d5(u5(t, r, a), e.dbcore);
  return {
    dbcore: i
  };
}
function I_(e, t) {
  var n = t.db, a = f5(e._middlewares, n, e._deps, t);
  e.core = a.dbcore, e.tables.forEach(function(r) {
    var i = r.name;
    e.core.schema.tables.some(function(o) {
      return o.name === i;
    }) && (r.core = e.core.table(i), e[i] instanceof e.Table && (e[i].core = r.core));
  });
}
function E_(e, t, n, a) {
  n.forEach(function(r) {
    var i = a[r];
    t.forEach(function(o) {
      var l = tI(o, r);
      (!l || "value" in l && l.value === void 0) && (o === e.Transaction.prototype || o instanceof e.Transaction ? Hs(o, r, {
        get: function() {
          return this.table(r);
        },
        set: function(s) {
          eI(this, r, { value: s, writable: !0, configurable: !0, enumerable: !0 });
        }
      }) : o[r] = new e.Table(r, i));
    });
  });
}
function cb(e, t) {
  t.forEach(function(n) {
    for (var a in n)
      n[a] instanceof e.Table && delete n[a];
  });
}
function m5(e, t) {
  return e._cfg.version - t._cfg.version;
}
function h5(e, t, n, a) {
  var r = e._dbSchema;
  n.objectStoreNames.contains("$meta") && !r.$meta && (r.$meta = Hw("$meta", SI("")[0], []), e._storeNames.push("$meta"));
  var i = e._createTransaction("readwrite", e._storeNames, r);
  i.create(n), i._completion.catch(a);
  var o = i._reject.bind(i), l = Pt.transless || Pt;
  zs(function() {
    if (Pt.trans = i, Pt.transless = l, t === 0)
      ar(r).forEach(function(s) {
        Ww(n, s, r[s].primKey, r[s].indexes);
      }), I_(e, n), wt.follow(function() {
        return e.on.populate.fire(i);
      }).catch(o);
    else
      return I_(e, n), p5(e, i, t).then(function(s) {
        return v5(e, s, i, n);
      }).catch(o);
  });
}
function _5(e, t) {
  kI(e._dbSchema, t), t.db.version % 10 === 0 && !t.objectStoreNames.contains("$meta") && t.db.createObjectStore("$meta").add(Math.ceil(t.db.version / 10 - 1), "version");
  var n = dp(e, e.idbdb, t);
  O_(e, e._dbSchema, t);
  for (var a = zw(n, e._dbSchema), r = function(d) {
    if (d.change.length || d.recreate)
      return console.warn("Unable to patch indexes of table ".concat(d.name, " because it has changes on the type of index or primary key.")), { value: void 0 };
    var u = t.objectStore(d.name);
    d.add.forEach(function(f) {
      wo && console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name, ".").concat(f.src)), P_(u, f);
    });
  }, i = 0, o = a.change; i < o.length; i++) {
    var l = o[i], s = r(l);
    if (typeof s == "object")
      return s.value;
  }
}
function p5(e, t, n) {
  return t.storeNames.includes("$meta") ? t.table("$meta").get("version").then(function(a) {
    return a ?? n;
  }) : wt.resolve(n);
}
function v5(e, t, n, a) {
  var r = [], i = e._versions, o = e._dbSchema = dp(e, e.idbdb, a), l = i.filter(function(d) {
    return d._cfg.version >= t;
  });
  if (l.length === 0)
    return wt.resolve();
  l.forEach(function(d) {
    r.push(function() {
      var u = o, f = d._cfg.dbschema;
      O_(e, u, a), O_(e, f, a), o = e._dbSchema = f;
      var _ = zw(u, f);
      _.add.forEach(function(y) {
        Ww(a, y[0], y[1].primKey, y[1].indexes);
      }), _.change.forEach(function(y) {
        if (y.recreate)
          throw new Bt.Upgrade("Not yet support for changing primary key");
        var S = a.objectStore(y.name);
        y.add.forEach(function(E) {
          return P_(S, E);
        }), y.change.forEach(function(E) {
          S.deleteIndex(E.name), P_(S, E);
        }), y.del.forEach(function(E) {
          return S.deleteIndex(E);
        });
      });
      var g = d._cfg.contentUpgrade;
      if (g && d._cfg.version > t) {
        I_(e, a), n._memoizedTables = {};
        var v = rI(f);
        _.del.forEach(function(y) {
          v[y] = u[y];
        }), cb(e, [e.Transaction.prototype]), E_(e, [e.Transaction.prototype], ar(v), v), n.schema = v;
        var w = Mw(g);
        w && Ku();
        var b, p = wt.follow(function() {
          if (b = g(n), b && w) {
            var y = Ws.bind(null, null);
            b.then(y, y);
          }
        });
        return b && typeof b.then == "function" ? wt.resolve(b) : p.then(function() {
          return b;
        });
      }
    }), r.push(function(u) {
      var f = d._cfg.dbschema;
      g5(f, u), cb(e, [e.Transaction.prototype]), E_(e, [e.Transaction.prototype], e._storeNames, e._dbSchema), n.schema = e._dbSchema;
    }), r.push(function(u) {
      e.idbdb.objectStoreNames.contains("$meta") && (Math.ceil(e.idbdb.version / 10) === d._cfg.version ? (e.idbdb.deleteObjectStore("$meta"), delete e._dbSchema.$meta, e._storeNames = e._storeNames.filter(function(f) {
        return f !== "$meta";
      })) : u.objectStore("$meta").put(d._cfg.version, "version"));
    });
  });
  function s() {
    return r.length ? wt.resolve(r.shift()(n.idbtrans)).then(s) : wt.resolve();
  }
  return s().then(function() {
    kI(o, a);
  });
}
function zw(e, t) {
  var n = {
    del: [],
    add: [],
    change: []
  }, a;
  for (a in e)
    t[a] || n.del.push(a);
  for (a in t) {
    var r = e[a], i = t[a];
    if (!r)
      n.add.push([a, i]);
    else {
      var o = {
        name: a,
        def: i,
        recreate: !1,
        del: [],
        add: [],
        change: []
      };
      if ("" + (r.primKey.keyPath || "") != "" + (i.primKey.keyPath || "") || r.primKey.auto !== i.primKey.auto)
        o.recreate = !0, n.change.push(o);
      else {
        var l = r.idxByName, s = i.idxByName, d = void 0;
        for (d in l)
          s[d] || o.del.push(d);
        for (d in s) {
          var u = l[d], f = s[d];
          u ? u.src !== f.src && o.change.push(f) : o.add.push(f);
        }
        (o.del.length > 0 || o.add.length > 0 || o.change.length > 0) && n.change.push(o);
      }
    }
  }
  return n;
}
function Ww(e, t, n, a) {
  var r = e.db.createObjectStore(t, n.keyPath ? { keyPath: n.keyPath, autoIncrement: n.auto } : { autoIncrement: n.auto });
  return a.forEach(function(i) {
    return P_(r, i);
  }), r;
}
function kI(e, t) {
  ar(e).forEach(function(n) {
    t.db.objectStoreNames.contains(n) || (wo && console.debug("Dexie: Creating missing table", n), Ww(t, n, e[n].primKey, e[n].indexes));
  });
}
function g5(e, t) {
  [].slice.call(t.db.objectStoreNames).forEach(function(n) {
    return e[n] == null && t.db.deleteObjectStore(n);
  });
}
function P_(e, t) {
  e.createIndex(t.name, t.keyPath, { unique: t.unique, multiEntry: t.multi });
}
function dp(e, t, n) {
  var a = {}, r = lp(t.objectStoreNames, 0);
  return r.forEach(function(i) {
    for (var o = n.objectStore(i), l = o.keyPath, s = sb(wI(l), l || "", !0, !1, !!o.autoIncrement, l && typeof l != "string", !0), d = [], u = 0; u < o.indexNames.length; ++u) {
      var f = o.index(o.indexNames[u]);
      l = f.keyPath;
      var _ = sb(f.name, l, !!f.unique, !!f.multiEntry, !1, l && typeof l != "string", !1);
      d.push(_);
    }
    a[i] = Hw(i, s, d);
  }), a;
}
function y5(e, t, n) {
  e.verno = t.version / 10;
  var a = e._dbSchema = dp(e, t, n);
  e._storeNames = lp(t.objectStoreNames, 0), E_(e, [e._allTables], ar(a), a);
}
function b5(e, t) {
  var n = dp(e, e.idbdb, t), a = zw(n, e._dbSchema);
  return !(a.add.length || a.change.some(function(r) {
    return r.add.length || r.change.length;
  }));
}
function O_(e, t, n) {
  for (var a = n.db.objectStoreNames, r = 0; r < a.length; ++r) {
    var i = a[r], o = n.objectStore(i);
    e._hasGetAll = "getAll" in o;
    for (var l = 0; l < o.indexNames.length; ++l) {
      var s = o.indexNames[l], d = o.index(s).keyPath, u = typeof d == "string" ? d : "[" + lp(d).join("+") + "]";
      if (t[i]) {
        var f = t[i].idxByName[u];
        f && (f.name = s, delete t[i].idxByName[u], t[i].idxByName[s] = f);
      }
    }
  }
  typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && lr.WorkerGlobalScope && lr instanceof lr.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604 && (e._hasGetAll = !1);
}
function SI(e) {
  return e.split(",").map(function(t, n) {
    t = t.trim();
    var a = t.replace(/([&*]|\+\+)/g, ""), r = /^\[/.test(a) ? a.match(/^\[(.*)\]$/)[1].split("+") : a;
    return sb(a, r || null, /\&/.test(t), /\*/.test(t), /\+\+/.test(t), pa(r), n === 0);
  });
}
var w5 = function() {
  function e() {
  }
  return e.prototype._parseStoresSpec = function(t, n) {
    ar(t).forEach(function(a) {
      if (t[a] !== null) {
        var r = SI(t[a]), i = r.shift();
        if (i.unique = !0, i.multi)
          throw new Bt.Schema("Primary key cannot be multi-valued");
        r.forEach(function(o) {
          if (o.auto)
            throw new Bt.Schema("Only primary key can be marked as autoIncrement (++)");
          if (!o.keyPath)
            throw new Bt.Schema("Index must have a name and cannot be an empty string");
        }), n[a] = Hw(a, i, r);
      }
    });
  }, e.prototype.stores = function(t) {
    var n = this.db;
    this._cfg.storesSource = this._cfg.storesSource ? ui(this._cfg.storesSource, t) : t;
    var a = n._versions, r = {}, i = {};
    return a.forEach(function(o) {
      ui(r, o._cfg.storesSource), i = o._cfg.dbschema = {}, o._parseStoresSpec(r, i);
    }), n._dbSchema = i, cb(n, [n._allTables, n, n.Transaction.prototype]), E_(n, [n._allTables, n, n.Transaction.prototype, this._cfg.tables], ar(i), i), n._storeNames = ar(i), this;
  }, e.prototype.upgrade = function(t) {
    return this._cfg.contentUpgrade = Fw(this._cfg.contentUpgrade || Dn, t), this;
  }, e;
}();
function k5(e) {
  return Hf(w5.prototype, function(n) {
    this.db = e, this._cfg = {
      version: n,
      storesSource: null,
      dbschema: {},
      tables: {},
      contentUpgrade: null
    };
  });
}
function jw(e, t) {
  var n = e._dbNamesDB;
  return n || (n = e._dbNamesDB = new ji(up, {
    addons: [],
    indexedDB: e,
    IDBKeyRange: t
  }), n.version(1).stores({ dbnames: "name" })), n.table("dbnames");
}
function Yw(e) {
  return e && typeof e.databases == "function";
}
function S5(e) {
  var t = e.indexedDB, n = e.IDBKeyRange;
  return Yw(t) ? Promise.resolve(t.databases()).then(function(a) {
    return a.map(function(r) {
      return r.name;
    }).filter(function(r) {
      return r !== up;
    });
  }) : jw(t, n).toCollection().primaryKeys();
}
function C5(e, t) {
  var n = e.indexedDB, a = e.IDBKeyRange;
  !Yw(n) && t !== up && jw(n, a).put({ name: t }).catch(Dn);
}
function A5(e, t) {
  var n = e.indexedDB, a = e.IDBKeyRange;
  !Yw(n) && t !== up && jw(n, a).delete(t).catch(Dn);
}
function ub(e) {
  return zs(function() {
    return Pt.letThrough = !0, e();
  });
}
function x5() {
  var e = !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent);
  if (!e || !indexedDB.databases)
    return Promise.resolve();
  var t;
  return new Promise(function(n) {
    var a = function() {
      return indexedDB.databases().finally(n);
    };
    t = setInterval(a, 100), a();
  }).finally(function() {
    return clearInterval(t);
  });
}
var zg;
function Kw(e) {
  return !("from" in e);
}
var Rr = function(e, t) {
  if (this)
    ui(this, arguments.length ? { d: 1, from: e, to: arguments.length > 1 ? t : e } : { d: 0 });
  else {
    var n = new Rr();
    return e && "d" in e && ui(n, e), n;
  }
};
Iu(Rr.prototype, (zg = {
  add: function(e) {
    return D_(this, e), this;
  },
  addKey: function(e) {
    return kf(this, e, e), this;
  },
  addKeys: function(e) {
    var t = this;
    return e.forEach(function(n) {
      return kf(t, n, n);
    }), this;
  },
  hasKey: function(e) {
    var t = B_(this).next(e).value;
    return t && _n(t.from, e) <= 0 && _n(t.to, e) >= 0;
  }
}, zg[Zy] = function() {
  return B_(this);
}, zg));
function kf(e, t, n) {
  var a = _n(t, n);
  if (!isNaN(a)) {
    if (a > 0)
      throw RangeError();
    if (Kw(e))
      return ui(e, { from: t, to: n, d: 1 });
    var r = e.l, i = e.r;
    if (_n(n, e.from) < 0)
      return r ? kf(r, t, n) : e.l = { from: t, to: n, d: 1, l: null, r: null }, CC(e);
    if (_n(t, e.to) > 0)
      return i ? kf(i, t, n) : e.r = { from: t, to: n, d: 1, l: null, r: null }, CC(e);
    _n(t, e.from) < 0 && (e.from = t, e.l = null, e.d = i ? i.d + 1 : 1), _n(n, e.to) > 0 && (e.to = n, e.r = null, e.d = e.l ? e.l.d + 1 : 1);
    var o = !e.r;
    r && !e.l && D_(e, r), i && o && D_(e, i);
  }
}
function D_(e, t) {
  function n(a, r) {
    var i = r.from, o = r.to, l = r.l, s = r.r;
    kf(a, i, o), l && n(a, l), s && n(a, s);
  }
  Kw(t) || n(e, t);
}
function T5(e, t) {
  var n = B_(t), a = n.next();
  if (a.done)
    return !1;
  for (var r = a.value, i = B_(e), o = i.next(r.from), l = o.value; !a.done && !o.done; ) {
    if (_n(l.from, r.to) <= 0 && _n(l.to, r.from) >= 0)
      return !0;
    _n(r.from, l.from) < 0 ? r = (a = n.next(l.from)).value : l = (o = i.next(r.from)).value;
  }
  return !1;
}
function B_(e) {
  var t = Kw(e) ? null : { s: 0, n: e };
  return {
    next: function(n) {
      for (var a = arguments.length > 0; t; )
        switch (t.s) {
          case 0:
            if (t.s = 1, a)
              for (; t.n.l && _n(n, t.n.from) < 0; )
                t = { up: t, n: t.n.l, s: 1 };
            else
              for (; t.n.l; )
                t = { up: t, n: t.n.l, s: 1 };
          case 1:
            if (t.s = 2, !a || _n(n, t.n.to) <= 0)
              return { value: t.n, done: !1 };
          case 2:
            if (t.n.r) {
              t.s = 3, t = { up: t, n: t.n.r, s: 0 };
              continue;
            }
          case 3:
            t = t.up;
        }
      return { done: !0 };
    }
  };
}
function CC(e) {
  var t, n, a = (((t = e.r) === null || t === void 0 ? void 0 : t.d) || 0) - (((n = e.l) === null || n === void 0 ? void 0 : n.d) || 0), r = a > 1 ? "r" : a < -1 ? "l" : "";
  if (r) {
    var i = r === "r" ? "l" : "r", o = Jt({}, e), l = e[r];
    e.from = l.from, e.to = l.to, e[r] = l[r], o[r] = l[i], e[i] = o, o.d = AC(o);
  }
  e.d = AC(e);
}
function AC(e) {
  var t = e.r, n = e.l;
  return (t ? n ? Math.max(t.d, n.d) : t.d : n ? n.d : 0) + 1;
}
function fp(e, t) {
  return ar(t).forEach(function(n) {
    e[n] ? D_(e[n], t[n]) : e[n] = sI(t[n]);
  }), e;
}
function Gw(e, t) {
  return e.all || t.all || Object.keys(e).some(function(n) {
    return t[n] && T5(t[n], e[n]);
  });
}
var jl = {}, Wg = {}, jg = !1;
function Eh(e, t) {
  fp(Wg, e), jg || (jg = !0, setTimeout(function() {
    jg = !1;
    var n = Wg;
    Wg = {}, Qw(n, !1);
  }, 0));
}
function Qw(e, t) {
  t === void 0 && (t = !1);
  var n = /* @__PURE__ */ new Set();
  if (e.all)
    for (var a = 0, r = Object.values(jl); a < r.length; a++) {
      var i = r[a];
      xC(i, e, n, t);
    }
  else
    for (var o in e) {
      var l = /^idb\:\/\/(.*)\/(.*)\//.exec(o);
      if (l) {
        var s = l[1], d = l[2], i = jl["idb://".concat(s, "/").concat(d)];
        i && xC(i, e, n, t);
      }
    }
  n.forEach(function(u) {
    return u();
  });
}
function xC(e, t, n, a) {
  for (var r = [], i = 0, o = Object.entries(e.queries.query); i < o.length; i++) {
    for (var l = o[i], s = l[0], d = l[1], u = [], f = 0, _ = d; f < _.length; f++) {
      var g = _[f];
      Gw(t, g.obsSet) ? g.subscribers.forEach(function(p) {
        return n.add(p);
      }) : a && u.push(g);
    }
    a && r.push([s, u]);
  }
  if (a)
    for (var v = 0, w = r; v < w.length; v++) {
      var b = w[v], s = b[0], u = b[1];
      e.queries.query[s] = u;
    }
}
function I5(e) {
  var t = e._state, n = e._deps.indexedDB;
  if (t.isBeingOpened || e.idbdb)
    return t.dbReadyPromise.then(function() {
      return t.dbOpenError ? Ma(t.dbOpenError) : e;
    });
  t.isBeingOpened = !0, t.dbOpenError = null, t.openComplete = !1;
  var a = t.openCanceller, r = Math.round(e.verno * 10), i = !1;
  function o() {
    if (t.openCanceller !== a)
      throw new Bt.DatabaseClosed("db.open() was cancelled");
  }
  var l = t.dbReadyResolve, s = null, d = !1, u = function() {
    return new wt(function(f, _) {
      if (o(), !n)
        throw new Bt.MissingAPI();
      var g = e.name, v = t.autoSchema || !r ? n.open(g) : n.open(g, r);
      if (!v)
        throw new Bt.MissingAPI();
      v.onerror = co(_), v.onblocked = ia(e._fireOnBlocked), v.onupgradeneeded = ia(function(w) {
        if (s = v.transaction, t.autoSchema && !e._options.allowEmptyDB) {
          v.onerror = bf, s.abort(), v.result.close();
          var b = n.deleteDatabase(g);
          b.onsuccess = b.onerror = ia(function() {
            _(new Bt.NoSuchDatabase("Database ".concat(g, " doesnt exist")));
          });
        } else {
          s.onerror = co(_);
          var p = w.oldVersion > Math.pow(2, 62) ? 0 : w.oldVersion;
          d = p < 1, e.idbdb = v.result, i && _5(e, s), h5(e, p / 10, s, _);
        }
      }, _), v.onsuccess = ia(function() {
        s = null;
        var w = e.idbdb = v.result, b = lp(w.objectStoreNames);
        if (b.length > 0)
          try {
            var p = w.transaction(s5(b), "readonly");
            if (t.autoSchema)
              y5(e, w, p);
            else if (O_(e, e._dbSchema, p), !b5(e, p) && !i)
              return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."), w.close(), r = w.version + 1, i = !0, f(u());
            I_(e, p);
          } catch {
          }
        mu.push(e), w.onversionchange = ia(function(y) {
          t.vcFired = !0, e.on("versionchange").fire(y);
        }), w.onclose = ia(function(y) {
          e.on("close").fire(y);
        }), d && C5(e._deps, g), f();
      }, _);
    }).catch(function(f) {
      switch (f?.name) {
        case "UnknownError":
          if (t.PR1398_maxLoop > 0)
            return t.PR1398_maxLoop--, console.warn("Dexie: Workaround for Chrome UnknownError on open()"), u();
          break;
        case "VersionError":
          if (r > 0)
            return r = 0, u();
          break;
      }
      return wt.reject(f);
    });
  };
  return wt.race([
    a,
    (typeof navigator > "u" ? wt.resolve() : x5()).then(u)
  ]).then(function() {
    return o(), t.onReadyBeingFired = [], wt.resolve(ub(function() {
      return e.on.ready.fire(e.vip);
    })).then(function f() {
      if (t.onReadyBeingFired.length > 0) {
        var _ = t.onReadyBeingFired.reduce(Fw, Dn);
        return t.onReadyBeingFired = [], wt.resolve(ub(function() {
          return _(e.vip);
        })).then(f);
      }
    });
  }).finally(function() {
    t.openCanceller === a && (t.onReadyBeingFired = null, t.isBeingOpened = !1);
  }).catch(function(f) {
    t.dbOpenError = f;
    try {
      s && s.abort();
    } catch {
    }
    return a === t.openCanceller && e._close(), Ma(f);
  }).finally(function() {
    t.openComplete = !0, l();
  }).then(function() {
    if (d) {
      var f = {};
      e.tables.forEach(function(_) {
        _.schema.indexes.forEach(function(g) {
          g.name && (f["idb://".concat(e.name, "/").concat(_.name, "/").concat(g.name)] = new Rr(-1 / 0, [[[]]]));
        }), f["idb://".concat(e.name, "/").concat(_.name, "/")] = f["idb://".concat(e.name, "/").concat(_.name, "/:dels")] = new Rr(-1 / 0, [[[]]]);
      }), Ys(zf).fire(f), Qw(f, !0);
    }
    return e;
  });
}
function db(e) {
  var t = function(o) {
    return e.next(o);
  }, n = function(o) {
    return e.throw(o);
  }, a = i(t), r = i(n);
  function i(o) {
    return function(l) {
      var s = o(l), d = s.value;
      return s.done ? d : !d || typeof d.then != "function" ? pa(d) ? Promise.all(d).then(a, r) : a(d) : d.then(a, r);
    };
  }
  return i(t)();
}
function E5(e, t, n) {
  var a = arguments.length;
  if (a < 2)
    throw new Bt.InvalidArgument("Too few arguments");
  for (var r = new Array(a - 1); --a; )
    r[a - 1] = arguments[a];
  n = r.pop();
  var i = iI(r);
  return [e, i, n];
}
function CI(e, t, n, a, r) {
  return wt.resolve().then(function() {
    var i = Pt.transless || Pt, o = e._createTransaction(t, n, e._dbSchema, a);
    o.explicit = !0;
    var l = {
      trans: o,
      transless: i
    };
    if (a)
      o.idbtrans = a.idbtrans;
    else
      try {
        o.create(), o.idbtrans._explicit = !0, e._state.PR1398_maxLoop = 3;
      } catch (f) {
        return f.name === Lw.InvalidState && e.isOpen() && --e._state.PR1398_maxLoop > 0 ? (console.warn("Dexie: Need to reopen db"), e.close({ disableAutoOpen: !1 }), e.open().then(function() {
          return CI(e, t, n, null, r);
        })) : Ma(f);
      }
    var s = Mw(r);
    s && Ku();
    var d, u = wt.follow(function() {
      if (d = r.call(o, o), d)
        if (s) {
          var f = Ws.bind(null, null);
          d.then(f, f);
        } else typeof d.next == "function" && typeof d.throw == "function" && (d = db(d));
    }, l);
    return (d && typeof d.then == "function" ? wt.resolve(d).then(function(f) {
      return o.active ? f : Ma(new Bt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"));
    }) : u.then(function() {
      return d;
    })).then(function(f) {
      return a && o._resolve(), o._completion.then(function() {
        return f;
      });
    }).catch(function(f) {
      return o._reject(f), Ma(f);
    });
  });
}
function Ph(e, t, n) {
  for (var a = pa(e) ? e.slice() : [e], r = 0; r < n; ++r)
    a.push(t);
  return a;
}
function P5(e) {
  return Jt(Jt({}, e), { table: function(t) {
    var n = e.table(t), a = n.schema, r = {}, i = [];
    function o(w, b, p) {
      var y = nf(w), S = r[y] = r[y] || [], E = w == null ? 0 : typeof w == "string" ? 1 : w.length, C = b > 0, B = Jt(Jt({}, p), { name: C ? "".concat(y, "(virtual-from:").concat(p.name, ")") : p.name, lowLevelIndex: p, isVirtual: C, keyTail: b, keyLength: E, extractKey: lb(w), unique: !C && p.unique });
      if (S.push(B), B.isPrimaryKey || i.push(B), E > 1) {
        var O = E === 2 ? w[0] : w.slice(0, E - 1);
        o(O, b + 1, p);
      }
      return S.sort(function(D, T) {
        return D.keyTail - T.keyTail;
      }), B;
    }
    var l = o(a.primaryKey.keyPath, 0, a.primaryKey);
    r[":id"] = [l];
    for (var s = 0, d = a.indexes; s < d.length; s++) {
      var u = d[s];
      o(u.keyPath, 0, u);
    }
    function f(w) {
      var b = r[nf(w)];
      return b && b[0];
    }
    function _(w, b) {
      return {
        type: w.type === 1 ? 2 : w.type,
        lower: Ph(w.lower, w.lowerOpen ? e.MAX_KEY : e.MIN_KEY, b),
        lowerOpen: !0,
        upper: Ph(w.upper, w.upperOpen ? e.MIN_KEY : e.MAX_KEY, b),
        upperOpen: !0
      };
    }
    function g(w) {
      var b = w.query.index;
      return b.isVirtual ? Jt(Jt({}, w), { query: {
        index: b.lowLevelIndex,
        range: _(w.query.range, b.keyTail)
      } }) : w;
    }
    var v = Jt(Jt({}, n), { schema: Jt(Jt({}, a), { primaryKey: l, indexes: i, getIndexByKeyPath: f }), count: function(w) {
      return n.count(g(w));
    }, query: function(w) {
      return n.query(g(w));
    }, openCursor: function(w) {
      var b = w.query.index, p = b.keyTail, y = b.isVirtual, S = b.keyLength;
      if (!y)
        return n.openCursor(w);
      function E(C) {
        function B(D) {
          D != null ? C.continue(Ph(D, w.reverse ? e.MAX_KEY : e.MIN_KEY, p)) : w.unique ? C.continue(C.key.slice(0, S).concat(w.reverse ? e.MIN_KEY : e.MAX_KEY, p)) : C.continue();
        }
        var O = Object.create(C, {
          continue: { value: B },
          continuePrimaryKey: {
            value: function(D, T) {
              C.continuePrimaryKey(Ph(D, e.MAX_KEY, p), T);
            }
          },
          primaryKey: {
            get: function() {
              return C.primaryKey;
            }
          },
          key: {
            get: function() {
              var D = C.key;
              return S === 1 ? D[0] : D.slice(0, S);
            }
          },
          value: {
            get: function() {
              return C.value;
            }
          }
        });
        return O;
      }
      return n.openCursor(g(w)).then(function(C) {
        return C && E(C);
      });
    } });
    return v;
  } });
}
var O5 = {
  stack: "dbcore",
  name: "VirtualIndexMiddleware",
  level: 1,
  create: P5
};
function Jw(e, t, n, a) {
  return n = n || {}, a = a || "", ar(e).forEach(function(r) {
    if (!Gr(t, r))
      n[a + r] = void 0;
    else {
      var i = e[r], o = t[r];
      if (typeof i == "object" && typeof o == "object" && i && o) {
        var l = Xy(i), s = Xy(o);
        l !== s ? n[a + r] = t[r] : l === "Object" ? Jw(i, o, n, a + r + ".") : i !== o && (n[a + r] = t[r]);
      } else i !== o && (n[a + r] = t[r]);
    }
  }), ar(t).forEach(function(r) {
    Gr(e, r) || (n[a + r] = t[r]);
  }), n;
}
function Xw(e, t) {
  return t.type === "delete" ? t.keys : t.keys || t.values.map(e.extractKey);
}
var D5 = {
  stack: "dbcore",
  name: "HooksMiddleware",
  level: 2,
  create: function(e) {
    return Jt(Jt({}, e), { table: function(t) {
      var n = e.table(t), a = n.schema.primaryKey, r = Jt(Jt({}, n), { mutate: function(i) {
        var o = Pt.trans, l = o.table(t).hook, s = l.deleting, d = l.creating, u = l.updating;
        switch (i.type) {
          case "add":
            if (d.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "put":
            if (d.fire === Dn && u.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "delete":
            if (s.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "deleteRange":
            if (s.fire === Dn)
              break;
            return o._promise("readwrite", function() {
              return _(i);
            }, !0);
        }
        return n.mutate(i);
        function f(v) {
          var w = Pt.trans, b = v.keys || Xw(a, v);
          if (!b)
            throw new Error("Keys missing");
          return v = v.type === "add" || v.type === "put" ? Jt(Jt({}, v), { keys: b }) : Jt({}, v), v.type !== "delete" && (v.values = S_([], v.values)), v.keys && (v.keys = S_([], v.keys)), B5(n, v, b).then(function(p) {
            var y = b.map(function(S, E) {
              var C = p[E], B = { onerror: null, onsuccess: null };
              if (v.type === "delete")
                s.fire.call(B, S, C, w);
              else if (v.type === "add" || C === void 0) {
                var O = d.fire.call(B, S, v.values[E], w);
                S == null && O != null && (S = O, v.keys[E] = S, a.outbound || ci(v.values[E], a.keyPath, S));
              } else {
                var D = Jw(C, v.values[E]), T = u.fire.call(B, D, S, C, w);
                if (T) {
                  var P = v.values[E];
                  Object.keys(T).forEach(function(I) {
                    Gr(P, I) ? P[I] = T[I] : ci(P, I, T[I]);
                  });
                }
              }
              return B;
            });
            return n.mutate(v).then(function(S) {
              for (var E = S.failures, C = S.results, B = S.numFailures, O = S.lastResult, D = 0; D < b.length; ++D) {
                var T = C ? C[D] : b[D], P = y[D];
                T == null ? P.onerror && P.onerror(E[D]) : P.onsuccess && P.onsuccess(
                  v.type === "put" && p[D] ? v.values[D] : T
                );
              }
              return { failures: E, results: C, numFailures: B, lastResult: O };
            }).catch(function(S) {
              return y.forEach(function(E) {
                return E.onerror && E.onerror(S);
              }), Promise.reject(S);
            });
          });
        }
        function _(v) {
          return g(v.trans, v.range, 1e4);
        }
        function g(v, w, b) {
          return n.query({ trans: v, values: !1, query: { index: a, range: w }, limit: b }).then(function(p) {
            var y = p.result;
            return f({ type: "delete", keys: y, trans: v }).then(function(S) {
              return S.numFailures > 0 ? Promise.reject(S.failures[0]) : y.length < b ? { failures: [], numFailures: 0, lastResult: void 0 } : g(v, Jt(Jt({}, w), { lower: y[y.length - 1], lowerOpen: !0 }), b);
            });
          });
        }
      } });
      return r;
    } });
  }
};
function B5(e, t, n) {
  return t.type === "add" ? Promise.resolve([]) : e.getMany({ trans: t.trans, keys: n, cache: "immutable" });
}
function AI(e, t, n) {
  try {
    if (!t || t.keys.length < e.length)
      return null;
    for (var a = [], r = 0, i = 0; r < t.keys.length && i < e.length; ++r)
      _n(t.keys[r], e[i]) === 0 && (a.push(n ? Xl(t.values[r]) : t.values[r]), ++i);
    return a.length === e.length ? a : null;
  } catch {
    return null;
  }
}
var V5 = {
  stack: "dbcore",
  level: -1,
  create: function(e) {
    return {
      table: function(t) {
        var n = e.table(t);
        return Jt(Jt({}, n), { getMany: function(a) {
          if (!a.cache)
            return n.getMany(a);
          var r = AI(a.keys, a.trans._cache, a.cache === "clone");
          return r ? wt.resolve(r) : n.getMany(a).then(function(i) {
            return a.trans._cache = {
              keys: a.keys,
              values: a.cache === "clone" ? Xl(i) : i
            }, i;
          });
        }, mutate: function(a) {
          return a.type !== "add" && (a.trans._cache = null), n.mutate(a);
        } });
      }
    };
  }
};
function xI(e, t) {
  return e.trans.mode === "readonly" && !!e.subscr && !e.trans.explicit && e.trans.db._options.cache !== "disabled" && !t.schema.primaryKey.outbound;
}
function TI(e, t) {
  switch (e) {
    case "query":
      return t.values && !t.unique;
    case "get":
      return !1;
    case "getMany":
      return !1;
    case "count":
      return !1;
    case "openCursor":
      return !1;
  }
}
var M5 = {
  stack: "dbcore",
  level: 0,
  name: "Observability",
  create: function(e) {
    var t = e.schema.name, n = new Rr(e.MIN_KEY, e.MAX_KEY);
    return Jt(Jt({}, e), { transaction: function(a, r, i) {
      if (Pt.subscr && r !== "readonly")
        throw new Bt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Pt.querier));
      return e.transaction(a, r, i);
    }, table: function(a) {
      var r = e.table(a), i = r.schema, o = i.primaryKey, l = i.indexes, s = o.extractKey, d = o.outbound, u = o.autoIncrement && l.filter(function(v) {
        return v.compound && v.keyPath.includes(o.keyPath);
      }), f = Jt(Jt({}, r), { mutate: function(v) {
        var w, b, p = v.trans, y = v.mutatedParts || (v.mutatedParts = {}), S = function(V) {
          var N = "idb://".concat(t, "/").concat(a, "/").concat(V);
          return y[N] || (y[N] = new Rr());
        }, E = S(""), C = S(":dels"), B = v.type, O = v.type === "deleteRange" ? [v.range] : v.type === "delete" ? [v.keys] : v.values.length < 50 ? [Xw(o, v).filter(function(V) {
          return V;
        }), v.values] : [], D = O[0], T = O[1], P = v.trans._cache;
        if (pa(D)) {
          E.addKeys(D);
          var I = B === "delete" || D.length === T.length ? AI(D, P) : null;
          I || C.addKeys(D), (I || T) && R5(S, i, I, T);
        } else if (D) {
          var M = {
            from: (w = D.lower) !== null && w !== void 0 ? w : e.MIN_KEY,
            to: (b = D.upper) !== null && b !== void 0 ? b : e.MAX_KEY
          };
          C.add(M), E.add(M);
        } else
          E.add(n), C.add(n), i.indexes.forEach(function(V) {
            return S(V.name).add(n);
          });
        return r.mutate(v).then(function(V) {
          return D && (v.type === "add" || v.type === "put") && (E.addKeys(V.results), u && u.forEach(function(N) {
            for (var q = v.values.map(function(Z) {
              return N.extractKey(Z);
            }), j = N.keyPath.findIndex(function(Z) {
              return Z === o.keyPath;
            }), ee = 0, de = V.results.length; ee < de; ++ee)
              q[ee][j] = V.results[ee];
            S(N.name).addKeys(q);
          })), p.mutatedParts = fp(p.mutatedParts || {}, y), V;
        });
      } }), _ = function(v) {
        var w, b, p = v.query, y = p.index, S = p.range;
        return [
          y,
          new Rr((w = S.lower) !== null && w !== void 0 ? w : e.MIN_KEY, (b = S.upper) !== null && b !== void 0 ? b : e.MAX_KEY)
        ];
      }, g = {
        get: function(v) {
          return [o, new Rr(v.key)];
        },
        getMany: function(v) {
          return [o, new Rr().addKeys(v.keys)];
        },
        count: _,
        query: _,
        openCursor: _
      };
      return ar(g).forEach(function(v) {
        f[v] = function(w) {
          var b = Pt.subscr, p = !!b, y = xI(Pt, r) && TI(v, w), S = y ? w.obsSet = {} : b;
          if (p) {
            var E = function(I) {
              var M = "idb://".concat(t, "/").concat(a, "/").concat(I);
              return S[M] || (S[M] = new Rr());
            }, C = E(""), B = E(":dels"), O = g[v](w), D = O[0], T = O[1];
            if (v === "query" && D.isPrimaryKey && !w.values ? B.add(T) : E(D.name || "").add(T), !D.isPrimaryKey)
              if (v === "count")
                B.add(n);
              else {
                var P = v === "query" && d && w.values && r.query(Jt(Jt({}, w), { values: !1 }));
                return r[v].apply(this, arguments).then(function(I) {
                  if (v === "query") {
                    if (d && w.values)
                      return P.then(function(q) {
                        var j = q.result;
                        return C.addKeys(j), I;
                      });
                    var M = w.values ? I.result.map(s) : I.result;
                    w.values ? C.addKeys(M) : B.addKeys(M);
                  } else if (v === "openCursor") {
                    var V = I, N = w.values;
                    return V && Object.create(V, {
                      key: {
                        get: function() {
                          return B.addKey(V.primaryKey), V.key;
                        }
                      },
                      primaryKey: {
                        get: function() {
                          var q = V.primaryKey;
                          return B.addKey(q), q;
                        }
                      },
                      value: {
                        get: function() {
                          return N && C.addKey(V.primaryKey), V.value;
                        }
                      }
                    });
                  }
                  return I;
                });
              }
          }
          return r[v].apply(this, arguments);
        };
      }), f;
    } });
  }
};
function R5(e, t, n, a) {
  function r(i) {
    var o = e(i.name || "");
    function l(d) {
      return d != null ? i.extractKey(d) : null;
    }
    var s = function(d) {
      return i.multiEntry && pa(d) ? d.forEach(function(u) {
        return o.addKey(u);
      }) : o.addKey(d);
    };
    (n || a).forEach(function(d, u) {
      var f = n && l(n[u]), _ = a && l(a[u]);
      _n(f, _) !== 0 && (f != null && s(f), _ != null && s(_));
    });
  }
  t.indexes.forEach(r);
}
function TC(e, t, n) {
  if (n.numFailures === 0)
    return t;
  if (t.type === "deleteRange")
    return null;
  var a = t.keys ? t.keys.length : "values" in t && t.values ? t.values.length : 1;
  if (n.numFailures === a)
    return null;
  var r = Jt({}, t);
  return pa(r.keys) && (r.keys = r.keys.filter(function(i, o) {
    return !(o in n.failures);
  })), "values" in r && pa(r.values) && (r.values = r.values.filter(function(i, o) {
    return !(o in n.failures);
  })), r;
}
function L5(e, t) {
  return t.lower === void 0 ? !0 : t.lowerOpen ? _n(e, t.lower) > 0 : _n(e, t.lower) >= 0;
}
function F5(e, t) {
  return t.upper === void 0 ? !0 : t.upperOpen ? _n(e, t.upper) < 0 : _n(e, t.upper) <= 0;
}
function Yg(e, t) {
  return L5(e, t) && F5(e, t);
}
function IC(e, t, n, a, r, i) {
  if (!n || n.length === 0)
    return e;
  var o = t.query.index, l = o.multiEntry, s = t.query.range, d = a.schema.primaryKey, u = d.extractKey, f = o.extractKey, _ = (o.lowLevelIndex || o).extractKey, g = n.reduce(function(v, w) {
    var b = v, p = [];
    if (w.type === "add" || w.type === "put")
      for (var y = new Rr(), S = w.values.length - 1; S >= 0; --S) {
        var E = w.values[S], C = u(E);
        if (!y.hasKey(C)) {
          var B = f(E);
          (l && pa(B) ? B.some(function(I) {
            return Yg(I, s);
          }) : Yg(B, s)) && (y.addKey(C), p.push(E));
        }
      }
    switch (w.type) {
      case "add": {
        var O = new Rr().addKeys(t.values ? v.map(function(I) {
          return u(I);
        }) : v);
        b = v.concat(t.values ? p.filter(function(I) {
          var M = u(I);
          return O.hasKey(M) ? !1 : (O.addKey(M), !0);
        }) : p.map(function(I) {
          return u(I);
        }).filter(function(I) {
          return O.hasKey(I) ? !1 : (O.addKey(I), !0);
        }));
        break;
      }
      case "put": {
        var D = new Rr().addKeys(w.values.map(function(I) {
          return u(I);
        }));
        b = v.filter(
          function(I) {
            return !D.hasKey(t.values ? u(I) : I);
          }
        ).concat(
          t.values ? p : p.map(function(I) {
            return u(I);
          })
        );
        break;
      }
      case "delete":
        var T = new Rr().addKeys(w.keys);
        b = v.filter(function(I) {
          return !T.hasKey(t.values ? u(I) : I);
        });
        break;
      case "deleteRange":
        var P = w.range;
        b = v.filter(function(I) {
          return !Yg(u(I), P);
        });
        break;
    }
    return b;
  }, e);
  return g === e ? e : (g.sort(function(v, w) {
    return _n(_(v), _(w)) || _n(u(v), u(w));
  }), t.limit && t.limit < 1 / 0 && (g.length > t.limit ? g.length = t.limit : e.length === t.limit && g.length < t.limit && (r.dirty = !0)), i ? Object.freeze(g) : g);
}
function EC(e, t) {
  return _n(e.lower, t.lower) === 0 && _n(e.upper, t.upper) === 0 && !!e.lowerOpen == !!t.lowerOpen && !!e.upperOpen == !!t.upperOpen;
}
function N5(e, t, n, a) {
  if (e === void 0)
    return t !== void 0 ? -1 : 0;
  if (t === void 0)
    return 1;
  var r = _n(e, t);
  if (r === 0) {
    if (n && a)
      return 0;
    if (n)
      return 1;
    if (a)
      return -1;
  }
  return r;
}
function U5(e, t, n, a) {
  if (e === void 0)
    return t !== void 0 ? 1 : 0;
  if (t === void 0)
    return -1;
  var r = _n(e, t);
  if (r === 0) {
    if (n && a)
      return 0;
    if (n)
      return -1;
    if (a)
      return 1;
  }
  return r;
}
function $5(e, t) {
  return N5(e.lower, t.lower, e.lowerOpen, t.lowerOpen) <= 0 && U5(e.upper, t.upper, e.upperOpen, t.upperOpen) >= 0;
}
function q5(e, t, n, a) {
  var r = jl["idb://".concat(e, "/").concat(t)];
  if (!r)
    return [];
  var i = r.queries[n];
  if (!i)
    return [null, !1, r, null];
  var o = a.query ? a.query.index.name : null, l = i[o || ""];
  if (!l)
    return [null, !1, r, null];
  switch (n) {
    case "query":
      var s = l.find(function(f) {
        return f.req.limit === a.limit && f.req.values === a.values && EC(f.req.query.range, a.query.range);
      });
      if (s)
        return [
          s,
          !0,
          r,
          l
        ];
      var d = l.find(function(f) {
        var _ = "limit" in f.req ? f.req.limit : 1 / 0;
        return _ >= a.limit && (a.values ? f.req.values : !0) && $5(f.req.query.range, a.query.range);
      });
      return [d, !1, r, l];
    case "count":
      var u = l.find(function(f) {
        return EC(f.req.query.range, a.query.range);
      });
      return [u, !!u, r, l];
  }
}
function H5(e, t, n, a) {
  e.subscribers.add(n), a.addEventListener("abort", function() {
    e.subscribers.delete(n), e.subscribers.size === 0 && z5(e, t);
  });
}
function z5(e, t) {
  setTimeout(function() {
    e.subscribers.size === 0 && Ol(t, e);
  }, 3e3);
}
var W5 = {
  stack: "dbcore",
  level: 0,
  name: "Cache",
  create: function(e) {
    var t = e.schema.name, n = Jt(Jt({}, e), { transaction: function(a, r, i) {
      var o = e.transaction(a, r, i);
      if (r === "readwrite") {
        var l = new AbortController(), s = l.signal, d = function(u) {
          return function() {
            if (l.abort(), r === "readwrite") {
              for (var f = /* @__PURE__ */ new Set(), _ = 0, g = a; _ < g.length; _++) {
                var v = g[_], w = jl["idb://".concat(t, "/").concat(v)];
                if (w) {
                  var b = e.table(v), p = w.optimisticOps.filter(function(N) {
                    return N.trans === o;
                  });
                  if (o._explicit && u && o.mutatedParts)
                    for (var y = 0, S = Object.values(w.queries.query); y < S.length; y++)
                      for (var E = S[y], C = 0, B = E.slice(); C < B.length; C++) {
                        var O = B[C];
                        Gw(O.obsSet, o.mutatedParts) && (Ol(E, O), O.subscribers.forEach(function(N) {
                          return f.add(N);
                        }));
                      }
                  else if (p.length > 0) {
                    w.optimisticOps = w.optimisticOps.filter(function(N) {
                      return N.trans !== o;
                    });
                    for (var D = 0, T = Object.values(w.queries.query); D < T.length; D++)
                      for (var E = T[D], P = 0, I = E.slice(); P < I.length; P++) {
                        var O = I[P];
                        if (O.res != null && o.mutatedParts)
                          if (u && !O.dirty) {
                            var M = Object.isFrozen(O.res), V = IC(O.res, O.req, p, b, O, M);
                            O.dirty ? (Ol(E, O), O.subscribers.forEach(function(j) {
                              return f.add(j);
                            })) : V !== O.res && (O.res = V, O.promise = wt.resolve({ result: V }));
                          } else
                            O.dirty && Ol(E, O), O.subscribers.forEach(function(j) {
                              return f.add(j);
                            });
                      }
                  }
                }
              }
              f.forEach(function(N) {
                return N();
              });
            }
          };
        };
        o.addEventListener("abort", d(!1), {
          signal: s
        }), o.addEventListener("error", d(!1), {
          signal: s
        }), o.addEventListener("complete", d(!0), {
          signal: s
        });
      }
      return o;
    }, table: function(a) {
      var r = e.table(a), i = r.schema.primaryKey, o = Jt(Jt({}, r), { mutate: function(l) {
        var s = Pt.trans;
        if (i.outbound || s.db._options.cache === "disabled" || s.explicit || s.idbtrans.mode !== "readwrite")
          return r.mutate(l);
        var d = jl["idb://".concat(t, "/").concat(a)];
        if (!d)
          return r.mutate(l);
        var u = r.mutate(l);
        return (l.type === "add" || l.type === "put") && (l.values.length >= 50 || Xw(i, l).some(function(f) {
          return f == null;
        })) ? u.then(function(f) {
          var _ = Jt(Jt({}, l), { values: l.values.map(function(v, w) {
            var b;
            if (f.failures[w])
              return v;
            var p = !((b = i.keyPath) === null || b === void 0) && b.includes(".") ? Xl(v) : Jt({}, v);
            return ci(p, i.keyPath, f.results[w]), p;
          }) }), g = TC(d, _, f);
          d.optimisticOps.push(g), queueMicrotask(function() {
            return l.mutatedParts && Eh(l.mutatedParts);
          });
        }) : (d.optimisticOps.push(l), l.mutatedParts && Eh(l.mutatedParts), u.then(function(f) {
          if (f.numFailures > 0) {
            Ol(d.optimisticOps, l);
            var _ = TC(d, l, f);
            _ && d.optimisticOps.push(_), l.mutatedParts && Eh(l.mutatedParts);
          }
        }), u.catch(function() {
          Ol(d.optimisticOps, l), l.mutatedParts && Eh(l.mutatedParts);
        })), u;
      }, query: function(l) {
        var s;
        if (!xI(Pt, r) || !TI("query", l))
          return r.query(l);
        var d = ((s = Pt.trans) === null || s === void 0 ? void 0 : s.db._options.cache) === "immutable", u = Pt, f = u.requery, _ = u.signal, g = q5(t, a, "query", l), v = g[0], w = g[1], b = g[2], p = g[3];
        if (v && w)
          v.obsSet = l.obsSet;
        else {
          var y = r.query(l).then(function(S) {
            var E = S.result;
            if (v && (v.res = E), d) {
              for (var C = 0, B = E.length; C < B; ++C)
                Object.freeze(E[C]);
              Object.freeze(E);
            } else
              S.result = Xl(E);
            return S;
          }).catch(function(S) {
            return p && v && Ol(p, v), Promise.reject(S);
          });
          v = {
            obsSet: l.obsSet,
            promise: y,
            subscribers: /* @__PURE__ */ new Set(),
            type: "query",
            req: l,
            dirty: !1
          }, p ? p.push(v) : (p = [v], b || (b = jl["idb://".concat(t, "/").concat(a)] = {
            queries: {
              query: {},
              count: {}
            },
            objs: /* @__PURE__ */ new Map(),
            optimisticOps: [],
            unsignaledParts: {}
          }), b.queries.query[l.query.index.name || ""] = p);
        }
        return H5(v, p, f, _), v.promise.then(function(S) {
          return {
            result: IC(S.result, l, b?.optimisticOps, r, v, d)
          };
        });
      } });
      return o;
    } });
    return n;
  }
};
function Oh(e, t) {
  return new Proxy(e, {
    get: function(n, a, r) {
      return a === "db" ? t : Reflect.get(n, a, r);
    }
  });
}
var ji = function() {
  function e(t, n) {
    var a = this;
    this._middlewares = {}, this.verno = 0;
    var r = e.dependencies;
    this._options = n = Jt({
      addons: e.addons,
      autoOpen: !0,
      indexedDB: r.indexedDB,
      IDBKeyRange: r.IDBKeyRange,
      cache: "cloned"
    }, n), this._deps = {
      indexedDB: n.indexedDB,
      IDBKeyRange: n.IDBKeyRange
    };
    var i = n.addons;
    this._dbSchema = {}, this._versions = [], this._storeNames = [], this._allTables = {}, this.idbdb = null, this._novip = this;
    var o = {
      dbOpenError: null,
      isBeingOpened: !1,
      onReadyBeingFired: null,
      openComplete: !1,
      dbReadyResolve: Dn,
      dbReadyPromise: null,
      cancelOpen: Dn,
      openCanceller: null,
      autoSchema: !0,
      PR1398_maxLoop: 3,
      autoOpen: n.autoOpen
    };
    o.dbReadyPromise = new wt(function(s) {
      o.dbReadyResolve = s;
    }), o.openCanceller = new wt(function(s, d) {
      o.cancelOpen = d;
    }), this._state = o, this.name = t, this.on = qf(this, "populate", "blocked", "versionchange", "close", { ready: [Fw, Dn] }), this.on.ready.subscribe = nI(this.on.ready.subscribe, function(s) {
      return function(d, u) {
        e.vip(function() {
          var f = a._state;
          if (f.openComplete)
            f.dbOpenError || wt.resolve().then(d), u && s(d);
          else if (f.onReadyBeingFired)
            f.onReadyBeingFired.push(d), u && s(d);
          else {
            s(d);
            var _ = a;
            u || s(function g() {
              _.on.ready.unsubscribe(d), _.on.ready.unsubscribe(g);
            });
          }
        });
      };
    }), this.Collection = X8(this), this.Table = K8(this), this.Transaction = o5(this), this.Version = k5(this), this.WhereClause = r5(this), this.on("versionchange", function(s) {
      s.newVersion > 0 ? console.warn("Another connection wants to upgrade database '".concat(a.name, "'. Closing db now to resume the upgrade.")) : console.warn("Another connection wants to delete database '".concat(a.name, "'. Closing db now to resume the delete request.")), a.close({ disableAutoOpen: !1 });
    }), this.on("blocked", function(s) {
      !s.newVersion || s.newVersion < s.oldVersion ? console.warn("Dexie.delete('".concat(a.name, "') was blocked")) : console.warn("Upgrade '".concat(a.name, "' blocked by other connection holding version ").concat(s.oldVersion / 10));
    }), this._maxKey = wf(n.IDBKeyRange), this._createTransaction = function(s, d, u, f) {
      return new a.Transaction(s, d, u, a._options.chromeTransactionDurability, f);
    }, this._fireOnBlocked = function(s) {
      a.on("blocked").fire(s), mu.filter(function(d) {
        return d.name === a.name && d !== a && !d._state.vcFired;
      }).map(function(d) {
        return d.on("versionchange").fire(s);
      });
    }, this.use(V5), this.use(W5), this.use(M5), this.use(O5), this.use(D5);
    var l = new Proxy(this, {
      get: function(s, d, u) {
        if (d === "_vip")
          return !0;
        if (d === "table")
          return function(_) {
            return Oh(a.table(_), l);
          };
        var f = Reflect.get(s, d, u);
        return f instanceof gI ? Oh(f, l) : d === "tables" ? f.map(function(_) {
          return Oh(_, l);
        }) : d === "_createTransaction" ? function() {
          var _ = f.apply(this, arguments);
          return Oh(_, l);
        } : f;
      }
    });
    this.vip = l, i.forEach(function(s) {
      return s(a);
    });
  }
  return e.prototype.version = function(t) {
    if (isNaN(t) || t < 0.1)
      throw new Bt.Type("Given version is not a positive number");
    if (t = Math.round(t * 10) / 10, this.idbdb || this._state.isBeingOpened)
      throw new Bt.Schema("Cannot add version when database is open");
    this.verno = Math.max(this.verno, t);
    var n = this._versions, a = n.filter(function(r) {
      return r._cfg.version === t;
    })[0];
    return a || (a = new this.Version(t), n.push(a), n.sort(m5), a.stores({}), this._state.autoSchema = !1, a);
  }, e.prototype._whenReady = function(t) {
    var n = this;
    return this.idbdb && (this._state.openComplete || Pt.letThrough || this._vip) ? t() : new wt(function(a, r) {
      if (n._state.openComplete)
        return r(new Bt.DatabaseClosed(n._state.dbOpenError));
      if (!n._state.isBeingOpened) {
        if (!n._state.autoOpen) {
          r(new Bt.DatabaseClosed());
          return;
        }
        n.open().catch(Dn);
      }
      n._state.dbReadyPromise.then(a, r);
    }).then(t);
  }, e.prototype.use = function(t) {
    var n = t.stack, a = t.create, r = t.level, i = t.name;
    i && this.unuse({ stack: n, name: i });
    var o = this._middlewares[n] || (this._middlewares[n] = []);
    return o.push({ stack: n, create: a, level: r ?? 10, name: i }), o.sort(function(l, s) {
      return l.level - s.level;
    }), this;
  }, e.prototype.unuse = function(t) {
    var n = t.stack, a = t.name, r = t.create;
    return n && this._middlewares[n] && (this._middlewares[n] = this._middlewares[n].filter(function(i) {
      return r ? i.create !== r : a ? i.name !== a : !1;
    })), this;
  }, e.prototype.open = function() {
    var t = this;
    return ec(
      Fs,
      function() {
        return I5(t);
      }
    );
  }, e.prototype._close = function() {
    var t = this._state, n = mu.indexOf(this);
    if (n >= 0 && mu.splice(n, 1), this.idbdb) {
      try {
        this.idbdb.close();
      } catch {
      }
      this.idbdb = null;
    }
    t.isBeingOpened || (t.dbReadyPromise = new wt(function(a) {
      t.dbReadyResolve = a;
    }), t.openCanceller = new wt(function(a, r) {
      t.cancelOpen = r;
    }));
  }, e.prototype.close = function(t) {
    var n = t === void 0 ? { disableAutoOpen: !0 } : t, a = n.disableAutoOpen, r = this._state;
    a ? (r.isBeingOpened && r.cancelOpen(new Bt.DatabaseClosed()), this._close(), r.autoOpen = !1, r.dbOpenError = new Bt.DatabaseClosed()) : (this._close(), r.autoOpen = this._options.autoOpen || r.isBeingOpened, r.openComplete = !1, r.dbOpenError = null);
  }, e.prototype.delete = function(t) {
    var n = this;
    t === void 0 && (t = { disableAutoOpen: !0 });
    var a = arguments.length > 0 && typeof arguments[0] != "object", r = this._state;
    return new wt(function(i, o) {
      var l = function() {
        n.close(t);
        var s = n._deps.indexedDB.deleteDatabase(n.name);
        s.onsuccess = ia(function() {
          A5(n._deps, n.name), i();
        }), s.onerror = co(o), s.onblocked = n._fireOnBlocked;
      };
      if (a)
        throw new Bt.InvalidArgument("Invalid closeOptions argument to db.delete()");
      r.isBeingOpened ? r.dbReadyPromise.then(l) : l();
    });
  }, e.prototype.backendDB = function() {
    return this.idbdb;
  }, e.prototype.isOpen = function() {
    return this.idbdb !== null;
  }, e.prototype.hasBeenClosed = function() {
    var t = this._state.dbOpenError;
    return t && t.name === "DatabaseClosed";
  }, e.prototype.hasFailed = function() {
    return this._state.dbOpenError !== null;
  }, e.prototype.dynamicallyOpened = function() {
    return this._state.autoSchema;
  }, Object.defineProperty(e.prototype, "tables", {
    get: function() {
      var t = this;
      return ar(this._allTables).map(function(n) {
        return t._allTables[n];
      });
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.transaction = function() {
    var t = E5.apply(this, arguments);
    return this._transaction.apply(this, t);
  }, e.prototype._transaction = function(t, n, a) {
    var r = this, i = Pt.trans;
    (!i || i.db !== this || t.indexOf("!") !== -1) && (i = null);
    var o = t.indexOf("?") !== -1;
    t = t.replace("!", "").replace("?", "");
    var l, s;
    try {
      if (s = n.map(function(u) {
        var f = u instanceof r.Table ? u.name : u;
        if (typeof f != "string")
          throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
        return f;
      }), t == "r" || t === Ng)
        l = Ng;
      else if (t == "rw" || t == Ug)
        l = Ug;
      else
        throw new Bt.InvalidArgument("Invalid transaction mode: " + t);
      if (i) {
        if (i.mode === Ng && l === Ug)
          if (o)
            i = null;
          else
            throw new Bt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
        i && s.forEach(function(u) {
          if (i && i.storeNames.indexOf(u) === -1)
            if (o)
              i = null;
            else
              throw new Bt.SubTransaction("Table " + u + " not included in parent transaction.");
        }), o && i && !i.active && (i = null);
      }
    } catch (u) {
      return i ? i._promise(null, function(f, _) {
        _(u);
      }) : Ma(u);
    }
    var d = CI.bind(null, this, l, s, i, a);
    return i ? i._promise(l, d, "lock") : Pt.trans ? ec(Pt.transless, function() {
      return r._whenReady(d);
    }) : this._whenReady(d);
  }, e.prototype.table = function(t) {
    if (!Gr(this._allTables, t))
      throw new Bt.InvalidTable("Table ".concat(t, " does not exist"));
    return this._allTables[t];
  }, e;
}(), j5 = typeof Symbol < "u" && "observable" in Symbol ? Symbol.observable : "@@observable", Y5 = function() {
  function e(t) {
    this._subscribe = t;
  }
  return e.prototype.subscribe = function(t, n, a) {
    return this._subscribe(!t || typeof t == "function" ? { next: t, error: n, complete: a } : t);
  }, e.prototype[j5] = function() {
    return this;
  }, e;
}(), V_;
try {
  V_ = {
    indexedDB: lr.indexedDB || lr.mozIndexedDB || lr.webkitIndexedDB || lr.msIndexedDB,
    IDBKeyRange: lr.IDBKeyRange || lr.webkitIDBKeyRange
  };
} catch {
  V_ = { indexedDB: null, IDBKeyRange: null };
}
function K5(e) {
  var t = !1, n, a = new Y5(function(r) {
    var i = Mw(e);
    function o(p) {
      var y = ju();
      try {
        i && Ku();
        var S = zs(e, p);
        return i && (S = S.finally(Ws)), S;
      } finally {
        y && Yu();
      }
    }
    var l = !1, s, d = {}, u = {}, f = {
      get closed() {
        return l;
      },
      unsubscribe: function() {
        l || (l = !0, s && s.abort(), _ && Ys.storagemutated.unsubscribe(w));
      }
    };
    r.start && r.start(f);
    var _ = !1, g = function() {
      return Fg(b);
    };
    function v() {
      return Gw(u, d);
    }
    var w = function(p) {
      fp(d, p), v() && g();
    }, b = function() {
      if (!(l || !V_.indexedDB)) {
        d = {};
        var p = {};
        s && s.abort(), s = new AbortController();
        var y = {
          subscr: p,
          signal: s.signal,
          requery: g,
          querier: e,
          trans: null
        }, S = o(y);
        Promise.resolve(S).then(function(E) {
          t = !0, n = E, !(l || y.signal.aborted) && (d = {}, u = p, !w8(u) && !_ && (Ys(zf, w), _ = !0), Fg(function() {
            return !l && r.next && r.next(E);
          }));
        }, function(E) {
          t = !1, ["DatabaseClosedError", "AbortError"].includes(E?.name) || l || Fg(function() {
            l || r.error && r.error(E);
          });
        });
      }
    };
    return setTimeout(g, 0), f;
  });
  return a.hasValue = function() {
    return t;
  }, a.getValue = function() {
    return n;
  }, a;
}
var Ml = ji;
Iu(Ml, Jt(Jt({}, cp), {
  delete: function(e) {
    var t = new Ml(e, { addons: [] });
    return t.delete();
  },
  exists: function(e) {
    return new Ml(e, { addons: [] }).open().then(function(t) {
      return t.close(), !0;
    }).catch("NoSuchDatabaseError", function() {
      return !1;
    });
  },
  getDatabaseNames: function(e) {
    try {
      return S5(Ml.dependencies).then(e);
    } catch {
      return Ma(new Bt.MissingAPI());
    }
  },
  defineClass: function() {
    function e(t) {
      ui(this, t);
    }
    return e;
  },
  ignoreTransaction: function(e) {
    return Pt.trans ? ec(Pt.transless, e) : e();
  },
  vip: ub,
  async: function(e) {
    return function() {
      try {
        var t = db(e.apply(this, arguments));
        return !t || typeof t.then != "function" ? wt.resolve(t) : t;
      } catch (n) {
        return Ma(n);
      }
    };
  },
  spawn: function(e, t, n) {
    try {
      var a = db(e.apply(n, t || []));
      return !a || typeof a.then != "function" ? wt.resolve(a) : a;
    } catch (r) {
      return Ma(r);
    }
  },
  currentTransaction: {
    get: function() {
      return Pt.trans || null;
    }
  },
  waitFor: function(e, t) {
    var n = wt.resolve(typeof e == "function" ? Ml.ignoreTransaction(e) : e).timeout(t || 6e4);
    return Pt.trans ? Pt.trans.waitFor(n) : n;
  },
  Promise: wt,
  debug: {
    get: function() {
      return wo;
    },
    set: function(e) {
      uI(e);
    }
  },
  derive: zu,
  extend: ui,
  props: Iu,
  override: nI,
  Events: qf,
  on: Ys,
  liveQuery: K5,
  extendObservabilitySet: fp,
  getByKeyPath: Jo,
  setByKeyPath: ci,
  delByKeyPath: g8,
  shallowClone: rI,
  deepClone: Xl,
  getObjectDiff: Jw,
  cmp: _n,
  asap: aI,
  minKey: ib,
  addons: [],
  connections: mu,
  errnames: Lw,
  dependencies: V_,
  cache: jl,
  semVer: gC,
  version: gC.split(".").map(function(e) {
    return parseInt(e);
  }).reduce(function(e, t, n) {
    return e + t / Math.pow(10, n * 2);
  })
}));
Ml.maxKey = wf(Ml.dependencies.IDBKeyRange);
typeof dispatchEvent < "u" && typeof addEventListener < "u" && (Ys(zf, function(e) {
  if (!Ms) {
    var t;
    t = new CustomEvent(ob, {
      detail: e
    }), Ms = !0, dispatchEvent(t), Ms = !1;
  }
}), addEventListener(ob, function(e) {
  var t = e.detail;
  Ms || Zw(t);
}));
function Zw(e) {
  var t = Ms;
  try {
    Ms = !0, Ys.storagemutated.fire(e), Qw(e, !0);
  } finally {
    Ms = t;
  }
}
var Ms = !1, Ds, fb = function() {
};
typeof BroadcastChannel < "u" && (fb = function() {
  Ds = new BroadcastChannel(ob), Ds.onmessage = function(e) {
    return e.data && Zw(e.data);
  };
}, fb(), typeof Ds.unref == "function" && Ds.unref(), Ys(zf, function(e) {
  Ms || Ds.postMessage(e);
}));
typeof addEventListener < "u" && (addEventListener("pagehide", function(e) {
  if (!ji.disableBfCache && e.persisted) {
    wo && console.debug("Dexie: handling persisted pagehide"), Ds?.close();
    for (var t = 0, n = mu; t < n.length; t++) {
      var a = n[t];
      a.close({ disableAutoOpen: !1 });
    }
  }
}), addEventListener("pageshow", function(e) {
  !ji.disableBfCache && e.persisted && (wo && console.debug("Dexie: handling persisted pageshow"), fb(), Zw({ all: new Rr(-1 / 0, [[]]) }));
}));
wt.rejectionMapper = T8;
uI(wo);
const II = 6048e5, G5 = 864e5, Q5 = 6e4, EI = 36e5, J5 = 1e3, PC = Symbol.for("constructDateFrom");
function On(e, t) {
  return typeof e == "function" ? e(t) : e && typeof e == "object" && PC in e ? e[PC](t) : e instanceof Date ? new e.constructor(t) : new Date(t);
}
function Ft(e, t) {
  return On(t || e, e);
}
function Ti(e, t, n) {
  const a = Ft(e, n?.in);
  return isNaN(t) ? On(n?.in || e, NaN) : (t && a.setDate(a.getDate() + t), a);
}
function Hi(e, t, n) {
  const a = Ft(e, n?.in);
  if (isNaN(t)) return On(e, NaN);
  if (!t)
    return a;
  const r = a.getDate(), i = On(e, a.getTime());
  i.setMonth(a.getMonth() + t + 1, 0);
  const o = i.getDate();
  return r >= o ? i : (a.setFullYear(
    i.getFullYear(),
    i.getMonth(),
    r
  ), a);
}
function PI(e, t, n) {
  const {
    years: a = 0,
    months: r = 0,
    weeks: i = 0,
    days: o = 0,
    hours: l = 0,
    minutes: s = 0,
    seconds: d = 0
  } = t, u = Ft(e, n?.in), f = r || a ? Hi(u, r + a * 12) : u, _ = o || i ? Ti(f, o + i * 7) : f, g = s + l * 60, w = (d + g * 60) * 1e3;
  return On(e, +_ + w);
}
function X5(e, t, n) {
  return On(e, +Ft(e) + t);
}
function Z5(e, t, n) {
  return X5(e, t * EI);
}
let eU = {};
function fc() {
  return eU;
}
function Yi(e, t) {
  const n = fc(), a = t?.weekStartsOn ?? t?.locale?.options?.weekStartsOn ?? n.weekStartsOn ?? n.locale?.options?.weekStartsOn ?? 0, r = Ft(e, t?.in), i = r.getDay(), o = (i < a ? 7 : 0) + i - a;
  return r.setDate(r.getDate() - o), r.setHours(0, 0, 0, 0), r;
}
function Eu(e, t) {
  return Yi(e, { ...t, weekStartsOn: 1 });
}
function OI(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = On(n, 0);
  r.setFullYear(a + 1, 0, 4), r.setHours(0, 0, 0, 0);
  const i = Eu(r), o = On(n, 0);
  o.setFullYear(a, 0, 4), o.setHours(0, 0, 0, 0);
  const l = Eu(o);
  return n.getTime() >= i.getTime() ? a + 1 : n.getTime() >= l.getTime() ? a : a - 1;
}
function M_(e) {
  const t = Ft(e), n = new Date(
    Date.UTC(
      t.getFullYear(),
      t.getMonth(),
      t.getDate(),
      t.getHours(),
      t.getMinutes(),
      t.getSeconds(),
      t.getMilliseconds()
    )
  );
  return n.setUTCFullYear(t.getFullYear()), +e - +n;
}
function Wf(e, ...t) {
  const n = On.bind(
    null,
    t.find((a) => typeof a == "object")
  );
  return t.map(n);
}
function OC(e, t) {
  const n = Ft(e, t?.in);
  return n.setHours(0, 0, 0, 0), n;
}
function DI(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  ), i = OC(a), o = OC(r), l = +i - M_(i), s = +o - M_(o);
  return Math.round((l - s) / G5);
}
function tU(e, t) {
  const n = OI(e, t), a = On(e, 0);
  return a.setFullYear(n, 0, 4), a.setHours(0, 0, 0, 0), Eu(a);
}
function nU(e, t, n) {
  return Hi(e, t * 3, n);
}
function e0(e, t, n) {
  return Hi(e, t * 12, n);
}
function DC(e, t) {
  const n = +Ft(e) - +Ft(t);
  return n < 0 ? -1 : n > 0 ? 1 : n;
}
function BI(e) {
  return e instanceof Date || typeof e == "object" && Object.prototype.toString.call(e) === "[object Date]";
}
function af(e) {
  return !(!BI(e) && typeof e != "number" || isNaN(+Ft(e)));
}
function BC(e, t) {
  const n = Ft(e, t?.in);
  return Math.trunc(n.getMonth() / 3) + 1;
}
function aU(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  );
  return a.getFullYear() - r.getFullYear();
}
function rU(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  ), i = DC(a, r), o = Math.abs(aU(a, r));
  a.setFullYear(1584), r.setFullYear(1584);
  const l = DC(a, r) === -i, s = i * (o - +l);
  return s === 0 ? 0 : s;
}
function VI(e, t) {
  const [n, a] = Wf(e, t.start, t.end);
  return { start: n, end: a };
}
function MI(e, t) {
  const { start: n, end: a } = VI(t?.in, e);
  let r = +n > +a;
  const i = r ? +n : +a, o = r ? a : n;
  o.setHours(0, 0, 0, 0);
  let l = 1;
  const s = [];
  for (; +o <= i; )
    s.push(On(n, o)), o.setDate(o.getDate() + l), o.setHours(0, 0, 0, 0);
  return r ? s.reverse() : s;
}
function Ul(e, t) {
  const n = Ft(e, t?.in), a = n.getMonth(), r = a - a % 3;
  return n.setMonth(r, 1), n.setHours(0, 0, 0, 0), n;
}
function iU(e, t) {
  const { start: n, end: a } = VI(t?.in, e);
  let r = +n > +a;
  const i = r ? +Ul(n) : +Ul(a);
  let o = Ul(r ? a : n), l = 1;
  const s = [];
  for (; +o <= i; )
    s.push(On(n, o)), o = nU(o, l);
  return r ? s.reverse() : s;
}
function oU(e, t) {
  const n = Ft(e, t?.in);
  return n.setDate(1), n.setHours(0, 0, 0, 0), n;
}
function RI(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear();
  return n.setFullYear(a + 1, 0, 0), n.setHours(23, 59, 59, 999), n;
}
function Sf(e, t) {
  const n = Ft(e, t?.in);
  return n.setFullYear(n.getFullYear(), 0, 1), n.setHours(0, 0, 0, 0), n;
}
function LI(e, t) {
  const n = fc(), a = t?.weekStartsOn ?? t?.locale?.options?.weekStartsOn ?? n.weekStartsOn ?? n.locale?.options?.weekStartsOn ?? 0, r = Ft(e, t?.in), i = r.getDay(), o = (i < a ? -7 : 0) + 6 - (i - a);
  return r.setDate(r.getDate() + o), r.setHours(23, 59, 59, 999), r;
}
function VC(e, t) {
  const n = Ft(e, t?.in), a = n.getMonth(), r = a - a % 3 + 3;
  return n.setMonth(r, 0), n.setHours(23, 59, 59, 999), n;
}
const sU = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
}, lU = (e, t, n) => {
  let a;
  const r = sU[e];
  return typeof r == "string" ? a = r : t === 1 ? a = r.one : a = r.other.replace("{{count}}", t.toString()), n?.addSuffix ? n.comparison && n.comparison > 0 ? "in " + a : a + " ago" : a;
};
function Kg(e) {
  return (t = {}) => {
    const n = t.width ? String(t.width) : e.defaultWidth;
    return e.formats[n] || e.formats[e.defaultWidth];
  };
}
const cU = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
}, uU = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
}, dU = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
}, fU = {
  date: Kg({
    formats: cU,
    defaultWidth: "full"
  }),
  time: Kg({
    formats: uU,
    defaultWidth: "full"
  }),
  dateTime: Kg({
    formats: dU,
    defaultWidth: "full"
  })
}, mU = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
}, hU = (e, t, n, a) => mU[e];
function Rd(e) {
  return (t, n) => {
    const a = n?.context ? String(n.context) : "standalone";
    let r;
    if (a === "formatting" && e.formattingValues) {
      const o = e.defaultFormattingWidth || e.defaultWidth, l = n?.width ? String(n.width) : o;
      r = e.formattingValues[l] || e.formattingValues[o];
    } else {
      const o = e.defaultWidth, l = n?.width ? String(n.width) : e.defaultWidth;
      r = e.values[l] || e.values[o];
    }
    const i = e.argumentCallback ? e.argumentCallback(t) : t;
    return r[i];
  };
}
const _U = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
}, pU = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
}, vU = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
}, gU = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
}, yU = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
}, bU = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
}, wU = (e, t) => {
  const n = Number(e), a = n % 100;
  if (a > 20 || a < 10)
    switch (a % 10) {
      case 1:
        return n + "st";
      case 2:
        return n + "nd";
      case 3:
        return n + "rd";
    }
  return n + "th";
}, kU = {
  ordinalNumber: wU,
  era: Rd({
    values: _U,
    defaultWidth: "wide"
  }),
  quarter: Rd({
    values: pU,
    defaultWidth: "wide",
    argumentCallback: (e) => e - 1
  }),
  month: Rd({
    values: vU,
    defaultWidth: "wide"
  }),
  day: Rd({
    values: gU,
    defaultWidth: "wide"
  }),
  dayPeriod: Rd({
    values: yU,
    defaultWidth: "wide",
    formattingValues: bU,
    defaultFormattingWidth: "wide"
  })
};
function Ld(e) {
  return (t, n = {}) => {
    const a = n.width, r = a && e.matchPatterns[a] || e.matchPatterns[e.defaultMatchWidth], i = t.match(r);
    if (!i)
      return null;
    const o = i[0], l = a && e.parsePatterns[a] || e.parsePatterns[e.defaultParseWidth], s = Array.isArray(l) ? CU(l, (f) => f.test(o)) : (
      // [TODO] -- I challenge you to fix the type
      SU(l, (f) => f.test(o))
    );
    let d;
    d = e.valueCallback ? e.valueCallback(s) : s, d = n.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      n.valueCallback(d)
    ) : d;
    const u = t.slice(o.length);
    return { value: d, rest: u };
  };
}
function SU(e, t) {
  for (const n in e)
    if (Object.prototype.hasOwnProperty.call(e, n) && t(e[n]))
      return n;
}
function CU(e, t) {
  for (let n = 0; n < e.length; n++)
    if (t(e[n]))
      return n;
}
function AU(e) {
  return (t, n = {}) => {
    const a = t.match(e.matchPattern);
    if (!a) return null;
    const r = a[0], i = t.match(e.parsePattern);
    if (!i) return null;
    let o = e.valueCallback ? e.valueCallback(i[0]) : i[0];
    o = n.valueCallback ? n.valueCallback(o) : o;
    const l = t.slice(r.length);
    return { value: o, rest: l };
  };
}
const xU = /^(\d+)(th|st|nd|rd)?/i, TU = /\d+/i, IU = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
}, EU = {
  any: [/^b/i, /^(a|c)/i]
}, PU = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
}, OU = {
  any: [/1/i, /2/i, /3/i, /4/i]
}, DU = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
}, BU = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
}, VU = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
}, MU = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
}, RU = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
}, LU = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
}, FU = {
  ordinalNumber: AU({
    matchPattern: xU,
    parsePattern: TU,
    valueCallback: (e) => parseInt(e, 10)
  }),
  era: Ld({
    matchPatterns: IU,
    defaultMatchWidth: "wide",
    parsePatterns: EU,
    defaultParseWidth: "any"
  }),
  quarter: Ld({
    matchPatterns: PU,
    defaultMatchWidth: "wide",
    parsePatterns: OU,
    defaultParseWidth: "any",
    valueCallback: (e) => e + 1
  }),
  month: Ld({
    matchPatterns: DU,
    defaultMatchWidth: "wide",
    parsePatterns: BU,
    defaultParseWidth: "any"
  }),
  day: Ld({
    matchPatterns: VU,
    defaultMatchWidth: "wide",
    parsePatterns: MU,
    defaultParseWidth: "any"
  }),
  dayPeriod: Ld({
    matchPatterns: RU,
    defaultMatchWidth: "any",
    parsePatterns: LU,
    defaultParseWidth: "any"
  })
}, FI = {
  code: "en-US",
  formatDistance: lU,
  formatLong: fU,
  formatRelative: hU,
  localize: kU,
  match: FU,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};
function NU(e, t) {
  const n = Ft(e, t?.in);
  return DI(n, Sf(n)) + 1;
}
function t0(e, t) {
  const n = Ft(e, t?.in), a = +Eu(n) - +tU(n);
  return Math.round(a / II) + 1;
}
function n0(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = fc(), i = t?.firstWeekContainsDate ?? t?.locale?.options?.firstWeekContainsDate ?? r.firstWeekContainsDate ?? r.locale?.options?.firstWeekContainsDate ?? 1, o = On(t?.in || e, 0);
  o.setFullYear(a + 1, 0, i), o.setHours(0, 0, 0, 0);
  const l = Yi(o, t), s = On(t?.in || e, 0);
  s.setFullYear(a, 0, i), s.setHours(0, 0, 0, 0);
  const d = Yi(s, t);
  return +n >= +l ? a + 1 : +n >= +d ? a : a - 1;
}
function UU(e, t) {
  const n = fc(), a = t?.firstWeekContainsDate ?? t?.locale?.options?.firstWeekContainsDate ?? n.firstWeekContainsDate ?? n.locale?.options?.firstWeekContainsDate ?? 1, r = n0(e, t), i = On(t?.in || e, 0);
  return i.setFullYear(r, 0, a), i.setHours(0, 0, 0, 0), Yi(i, t);
}
function a0(e, t) {
  const n = Ft(e, t?.in), a = +Yi(n, t) - +UU(n, t);
  return Math.round(a / II) + 1;
}
function En(e, t) {
  const n = e < 0 ? "-" : "", a = Math.abs(e).toString().padStart(t, "0");
  return n + a;
}
const As = {
  // Year
  y(e, t) {
    const n = e.getFullYear(), a = n > 0 ? n : 1 - n;
    return En(t === "yy" ? a % 100 : a, t.length);
  },
  // Month
  M(e, t) {
    const n = e.getMonth();
    return t === "M" ? String(n + 1) : En(n + 1, 2);
  },
  // Day of the month
  d(e, t) {
    return En(e.getDate(), t.length);
  },
  // AM or PM
  a(e, t) {
    const n = e.getHours() / 12 >= 1 ? "pm" : "am";
    switch (t) {
      case "a":
      case "aa":
        return n.toUpperCase();
      case "aaa":
        return n;
      case "aaaaa":
        return n[0];
      case "aaaa":
      default:
        return n === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(e, t) {
    return En(e.getHours() % 12 || 12, t.length);
  },
  // Hour [0-23]
  H(e, t) {
    return En(e.getHours(), t.length);
  },
  // Minute
  m(e, t) {
    return En(e.getMinutes(), t.length);
  },
  // Second
  s(e, t) {
    return En(e.getSeconds(), t.length);
  },
  // Fraction of second
  S(e, t) {
    const n = t.length, a = e.getMilliseconds(), r = Math.trunc(
      a * Math.pow(10, n - 3)
    );
    return En(r, t.length);
  }
}, Qc = {
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
}, MC = {
  // Era
  G: function(e, t, n) {
    const a = e.getFullYear() > 0 ? 1 : 0;
    switch (t) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return n.era(a, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return n.era(a, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return n.era(a, { width: "wide" });
    }
  },
  // Year
  y: function(e, t, n) {
    if (t === "yo") {
      const a = e.getFullYear(), r = a > 0 ? a : 1 - a;
      return n.ordinalNumber(r, { unit: "year" });
    }
    return As.y(e, t);
  },
  // Local week-numbering year
  Y: function(e, t, n, a) {
    const r = n0(e, a), i = r > 0 ? r : 1 - r;
    if (t === "YY") {
      const o = i % 100;
      return En(o, 2);
    }
    return t === "Yo" ? n.ordinalNumber(i, { unit: "year" }) : En(i, t.length);
  },
  // ISO week-numbering year
  R: function(e, t) {
    const n = OI(e);
    return En(n, t.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(e, t) {
    const n = e.getFullYear();
    return En(n, t.length);
  },
  // Quarter
  Q: function(e, t, n) {
    const a = Math.ceil((e.getMonth() + 1) / 3);
    switch (t) {
      // 1, 2, 3, 4
      case "Q":
        return String(a);
      // 01, 02, 03, 04
      case "QQ":
        return En(a, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return n.ordinalNumber(a, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return n.quarter(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return n.quarter(a, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return n.quarter(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(e, t, n) {
    const a = Math.ceil((e.getMonth() + 1) / 3);
    switch (t) {
      // 1, 2, 3, 4
      case "q":
        return String(a);
      // 01, 02, 03, 04
      case "qq":
        return En(a, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return n.ordinalNumber(a, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return n.quarter(a, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return n.quarter(a, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return n.quarter(a, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(e, t, n) {
    const a = e.getMonth();
    switch (t) {
      case "M":
      case "MM":
        return As.M(e, t);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return n.ordinalNumber(a + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return n.month(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return n.month(a, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return n.month(a, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(e, t, n) {
    const a = e.getMonth();
    switch (t) {
      // 1, 2, ..., 12
      case "L":
        return String(a + 1);
      // 01, 02, ..., 12
      case "LL":
        return En(a + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return n.ordinalNumber(a + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return n.month(a, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return n.month(a, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return n.month(a, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(e, t, n, a) {
    const r = a0(e, a);
    return t === "wo" ? n.ordinalNumber(r, { unit: "week" }) : En(r, t.length);
  },
  // ISO week of year
  I: function(e, t, n) {
    const a = t0(e);
    return t === "Io" ? n.ordinalNumber(a, { unit: "week" }) : En(a, t.length);
  },
  // Day of the month
  d: function(e, t, n) {
    return t === "do" ? n.ordinalNumber(e.getDate(), { unit: "date" }) : As.d(e, t);
  },
  // Day of year
  D: function(e, t, n) {
    const a = NU(e);
    return t === "Do" ? n.ordinalNumber(a, { unit: "dayOfYear" }) : En(a, t.length);
  },
  // Day of week
  E: function(e, t, n) {
    const a = e.getDay();
    switch (t) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return n.day(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return n.day(a, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return n.day(a, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return n.day(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(e, t, n, a) {
    const r = e.getDay(), i = (r - a.weekStartsOn + 8) % 7 || 7;
    switch (t) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(i);
      // Padded numerical value
      case "ee":
        return En(i, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return n.ordinalNumber(i, { unit: "day" });
      case "eee":
        return n.day(r, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return n.day(r, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return n.day(r, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return n.day(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(e, t, n, a) {
    const r = e.getDay(), i = (r - a.weekStartsOn + 8) % 7 || 7;
    switch (t) {
      // Numerical value (same as in `e`)
      case "c":
        return String(i);
      // Padded numerical value
      case "cc":
        return En(i, t.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return n.ordinalNumber(i, { unit: "day" });
      case "ccc":
        return n.day(r, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return n.day(r, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return n.day(r, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return n.day(r, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(e, t, n) {
    const a = e.getDay(), r = a === 0 ? 7 : a;
    switch (t) {
      // 2
      case "i":
        return String(r);
      // 02
      case "ii":
        return En(r, t.length);
      // 2nd
      case "io":
        return n.ordinalNumber(r, { unit: "day" });
      // Tue
      case "iii":
        return n.day(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return n.day(a, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return n.day(a, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return n.day(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(e, t, n) {
    const r = e.getHours() / 12 >= 1 ? "pm" : "am";
    switch (t) {
      case "a":
      case "aa":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(e, t, n) {
    const a = e.getHours();
    let r;
    switch (a === 12 ? r = Qc.noon : a === 0 ? r = Qc.midnight : r = a / 12 >= 1 ? "pm" : "am", t) {
      case "b":
      case "bb":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(e, t, n) {
    const a = e.getHours();
    let r;
    switch (a >= 17 ? r = Qc.evening : a >= 12 ? r = Qc.afternoon : a >= 4 ? r = Qc.morning : r = Qc.night, t) {
      case "B":
      case "BB":
      case "BBB":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(e, t, n) {
    if (t === "ho") {
      let a = e.getHours() % 12;
      return a === 0 && (a = 12), n.ordinalNumber(a, { unit: "hour" });
    }
    return As.h(e, t);
  },
  // Hour [0-23]
  H: function(e, t, n) {
    return t === "Ho" ? n.ordinalNumber(e.getHours(), { unit: "hour" }) : As.H(e, t);
  },
  // Hour [0-11]
  K: function(e, t, n) {
    const a = e.getHours() % 12;
    return t === "Ko" ? n.ordinalNumber(a, { unit: "hour" }) : En(a, t.length);
  },
  // Hour [1-24]
  k: function(e, t, n) {
    let a = e.getHours();
    return a === 0 && (a = 24), t === "ko" ? n.ordinalNumber(a, { unit: "hour" }) : En(a, t.length);
  },
  // Minute
  m: function(e, t, n) {
    return t === "mo" ? n.ordinalNumber(e.getMinutes(), { unit: "minute" }) : As.m(e, t);
  },
  // Second
  s: function(e, t, n) {
    return t === "so" ? n.ordinalNumber(e.getSeconds(), { unit: "second" }) : As.s(e, t);
  },
  // Fraction of second
  S: function(e, t) {
    return As.S(e, t);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(e, t, n) {
    const a = e.getTimezoneOffset();
    if (a === 0)
      return "Z";
    switch (t) {
      // Hours and optional minutes
      case "X":
        return LC(a);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return Dl(a);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return Dl(a, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Hours and optional minutes
      case "x":
        return LC(a);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return Dl(a);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return Dl(a, ":");
    }
  },
  // Timezone (GMT)
  O: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + RC(a, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + Dl(a, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + RC(a, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + Dl(a, ":");
    }
  },
  // Seconds timestamp
  t: function(e, t, n) {
    const a = Math.trunc(+e / 1e3);
    return En(a, t.length);
  },
  // Milliseconds timestamp
  T: function(e, t, n) {
    return En(+e, t.length);
  }
};
function RC(e, t = "") {
  const n = e > 0 ? "-" : "+", a = Math.abs(e), r = Math.trunc(a / 60), i = a % 60;
  return i === 0 ? n + String(r) : n + String(r) + t + En(i, 2);
}
function LC(e, t) {
  return e % 60 === 0 ? (e > 0 ? "-" : "+") + En(Math.abs(e) / 60, 2) : Dl(e, t);
}
function Dl(e, t = "") {
  const n = e > 0 ? "-" : "+", a = Math.abs(e), r = En(Math.trunc(a / 60), 2), i = En(a % 60, 2);
  return n + r + t + i;
}
const FC = (e, t) => {
  switch (e) {
    case "P":
      return t.date({ width: "short" });
    case "PP":
      return t.date({ width: "medium" });
    case "PPP":
      return t.date({ width: "long" });
    case "PPPP":
    default:
      return t.date({ width: "full" });
  }
}, NI = (e, t) => {
  switch (e) {
    case "p":
      return t.time({ width: "short" });
    case "pp":
      return t.time({ width: "medium" });
    case "ppp":
      return t.time({ width: "long" });
    case "pppp":
    default:
      return t.time({ width: "full" });
  }
}, $U = (e, t) => {
  const n = e.match(/(P+)(p+)?/) || [], a = n[1], r = n[2];
  if (!r)
    return FC(e, t);
  let i;
  switch (a) {
    case "P":
      i = t.dateTime({ width: "short" });
      break;
    case "PP":
      i = t.dateTime({ width: "medium" });
      break;
    case "PPP":
      i = t.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      i = t.dateTime({ width: "full" });
      break;
  }
  return i.replace("{{date}}", FC(a, t)).replace("{{time}}", NI(r, t));
}, mb = {
  p: NI,
  P: $U
}, qU = /^D+$/, HU = /^Y+$/, zU = ["D", "DD", "YY", "YYYY"];
function UI(e) {
  return qU.test(e);
}
function $I(e) {
  return HU.test(e);
}
function hb(e, t, n) {
  const a = WU(e, t, n);
  if (console.warn(a), zU.includes(e)) throw new RangeError(a);
}
function WU(e, t, n) {
  const a = e[0] === "Y" ? "years" : "days of the month";
  return `Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}
const jU = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, YU = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, KU = /^'([^]*?)'?$/, GU = /''/g, QU = /[a-zA-Z]/;
function go(e, t, n) {
  const a = fc(), r = n?.locale ?? a.locale ?? FI, i = n?.firstWeekContainsDate ?? n?.locale?.options?.firstWeekContainsDate ?? a.firstWeekContainsDate ?? a.locale?.options?.firstWeekContainsDate ?? 1, o = n?.weekStartsOn ?? n?.locale?.options?.weekStartsOn ?? a.weekStartsOn ?? a.locale?.options?.weekStartsOn ?? 0, l = Ft(e, n?.in);
  if (!af(l))
    throw new RangeError("Invalid time value");
  let s = t.match(YU).map((u) => {
    const f = u[0];
    if (f === "p" || f === "P") {
      const _ = mb[f];
      return _(u, r.formatLong);
    }
    return u;
  }).join("").match(jU).map((u) => {
    if (u === "''")
      return { isToken: !1, value: "'" };
    const f = u[0];
    if (f === "'")
      return { isToken: !1, value: JU(u) };
    if (MC[f])
      return { isToken: !0, value: u };
    if (f.match(QU))
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + f + "`"
      );
    return { isToken: !1, value: u };
  });
  r.localize.preprocessor && (s = r.localize.preprocessor(l, s));
  const d = {
    firstWeekContainsDate: i,
    weekStartsOn: o,
    locale: r
  };
  return s.map((u) => {
    if (!u.isToken) return u.value;
    const f = u.value;
    (!n?.useAdditionalWeekYearTokens && $I(f) || !n?.useAdditionalDayOfYearTokens && UI(f)) && hb(f, t, String(e));
    const _ = MC[f[0]];
    return _(l, f, r.localize, d);
  }).join("");
}
function JU(e) {
  const t = e.match(KU);
  return t ? t[1].replace(GU, "'") : e;
}
function XU(e, t) {
  return Ft(e, t?.in).getDay();
}
function ZU(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = n.getMonth(), i = On(n, 0);
  return i.setFullYear(a, r + 1, 0), i.setHours(0, 0, 0, 0), i.getDate();
}
function e$() {
  return Object.assign({}, fc());
}
function ts(e, t) {
  return Ft(e, t?.in).getHours();
}
function t$(e, t) {
  const n = Ft(e, t?.in).getDay();
  return n === 0 ? 7 : n;
}
function Ks(e, t) {
  return Ft(e, t?.in).getMinutes();
}
function fn(e, t) {
  return Ft(e, t?.in).getMonth();
}
function Pu(e) {
  return Ft(e).getSeconds();
}
function Yt(e, t) {
  return Ft(e, t?.in).getFullYear();
}
function nc(e, t) {
  return +Ft(e) > +Ft(t);
}
function Ou(e, t) {
  return +Ft(e) < +Ft(t);
}
function iu(e, t) {
  return +Ft(e) == +Ft(t);
}
function n$(e, t) {
  const n = a$(t) ? new t(0) : On(t, 0);
  return n.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), n.setHours(
    e.getHours(),
    e.getMinutes(),
    e.getSeconds(),
    e.getMilliseconds()
  ), n;
}
function a$(e) {
  return typeof e == "function" && e.prototype?.constructor === e;
}
const r$ = 10;
class qI {
  subPriority = 0;
  validate(t, n) {
    return !0;
  }
}
class i$ extends qI {
  constructor(t, n, a, r, i) {
    super(), this.value = t, this.validateValue = n, this.setValue = a, this.priority = r, i && (this.subPriority = i);
  }
  validate(t, n) {
    return this.validateValue(t, this.value, n);
  }
  set(t, n, a) {
    return this.setValue(t, n, this.value, a);
  }
}
class o$ extends qI {
  priority = r$;
  subPriority = -1;
  constructor(t, n) {
    super(), this.context = t || ((a) => On(n, a));
  }
  set(t, n) {
    return n.timestampIsSet ? t : On(t, n$(t, this.context));
  }
}
class wn {
  run(t, n, a, r) {
    const i = this.parse(t, n, a, r);
    return i ? {
      setter: new i$(
        i.value,
        this.validate,
        this.set,
        this.priority,
        this.subPriority
      ),
      rest: i.rest
    } : null;
  }
  validate(t, n, a) {
    return !0;
  }
}
class s$ extends wn {
  priority = 140;
  parse(t, n, a) {
    switch (n) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return a.era(t, { width: "abbreviated" }) || a.era(t, { width: "narrow" });
      // A, B
      case "GGGGG":
        return a.era(t, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return a.era(t, { width: "wide" }) || a.era(t, { width: "abbreviated" }) || a.era(t, { width: "narrow" });
    }
  }
  set(t, n, a) {
    return n.era = a, t.setFullYear(a, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["R", "u", "t", "T"];
}
const Ba = {
  month: /^(1[0-2]|0?\d)/,
  // 0 to 12
  date: /^(3[0-1]|[0-2]?\d)/,
  // 0 to 31
  dayOfYear: /^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,
  // 0 to 366
  week: /^(5[0-3]|[0-4]?\d)/,
  // 0 to 53
  hour23h: /^(2[0-3]|[0-1]?\d)/,
  // 0 to 23
  hour24h: /^(2[0-4]|[0-1]?\d)/,
  // 0 to 24
  hour11h: /^(1[0-1]|0?\d)/,
  // 0 to 11
  hour12h: /^(1[0-2]|0?\d)/,
  // 0 to 12
  minute: /^[0-5]?\d/,
  // 0 to 59
  second: /^[0-5]?\d/,
  // 0 to 59
  singleDigit: /^\d/,
  // 0 to 9
  twoDigits: /^\d{1,2}/,
  // 0 to 99
  threeDigits: /^\d{1,3}/,
  // 0 to 999
  fourDigits: /^\d{1,4}/,
  // 0 to 9999
  anyDigitsSigned: /^-?\d+/,
  singleDigitSigned: /^-?\d/,
  // 0 to 9, -0 to -9
  twoDigitsSigned: /^-?\d{1,2}/,
  // 0 to 99, -0 to -99
  threeDigitsSigned: /^-?\d{1,3}/,
  // 0 to 999, -0 to -999
  fourDigitsSigned: /^-?\d{1,4}/
  // 0 to 9999, -0 to -9999
}, fo = {
  basicOptionalMinutes: /^([+-])(\d{2})(\d{2})?|Z/,
  basic: /^([+-])(\d{2})(\d{2})|Z/,
  basicOptionalSeconds: /^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,
  extended: /^([+-])(\d{2}):(\d{2})|Z/,
  extendedOptionalSeconds: /^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/
};
function Va(e, t) {
  return e && {
    value: t(e.value),
    rest: e.rest
  };
}
function _a(e, t) {
  const n = t.match(e);
  return n ? {
    value: parseInt(n[0], 10),
    rest: t.slice(n[0].length)
  } : null;
}
function mo(e, t) {
  const n = t.match(e);
  if (!n)
    return null;
  if (n[0] === "Z")
    return {
      value: 0,
      rest: t.slice(1)
    };
  const a = n[1] === "+" ? 1 : -1, r = n[2] ? parseInt(n[2], 10) : 0, i = n[3] ? parseInt(n[3], 10) : 0, o = n[5] ? parseInt(n[5], 10) : 0;
  return {
    value: a * (r * EI + i * Q5 + o * J5),
    rest: t.slice(n[0].length)
  };
}
function HI(e) {
  return _a(Ba.anyDigitsSigned, e);
}
function Aa(e, t) {
  switch (e) {
    case 1:
      return _a(Ba.singleDigit, t);
    case 2:
      return _a(Ba.twoDigits, t);
    case 3:
      return _a(Ba.threeDigits, t);
    case 4:
      return _a(Ba.fourDigits, t);
    default:
      return _a(new RegExp("^\\d{1," + e + "}"), t);
  }
}
function R_(e, t) {
  switch (e) {
    case 1:
      return _a(Ba.singleDigitSigned, t);
    case 2:
      return _a(Ba.twoDigitsSigned, t);
    case 3:
      return _a(Ba.threeDigitsSigned, t);
    case 4:
      return _a(Ba.fourDigitsSigned, t);
    default:
      return _a(new RegExp("^-?\\d{1," + e + "}"), t);
  }
}
function r0(e) {
  switch (e) {
    case "morning":
      return 4;
    case "evening":
      return 17;
    case "pm":
    case "noon":
    case "afternoon":
      return 12;
    case "am":
    case "midnight":
    case "night":
    default:
      return 0;
  }
}
function zI(e, t) {
  const n = t > 0, a = n ? t : 1 - t;
  let r;
  if (a <= 50)
    r = e || 100;
  else {
    const i = a + 50, o = Math.trunc(i / 100) * 100, l = e >= i % 100;
    r = e + o - (l ? 100 : 0);
  }
  return n ? r : 1 - r;
}
function WI(e) {
  return e % 400 === 0 || e % 4 === 0 && e % 100 !== 0;
}
class l$ extends wn {
  priority = 130;
  incompatibleTokens = ["Y", "R", "u", "w", "I", "i", "e", "c", "t", "T"];
  parse(t, n, a) {
    const r = (i) => ({
      year: i,
      isTwoDigitYear: n === "yy"
    });
    switch (n) {
      case "y":
        return Va(Aa(4, t), r);
      case "yo":
        return Va(
          a.ordinalNumber(t, {
            unit: "year"
          }),
          r
        );
      default:
        return Va(Aa(n.length, t), r);
    }
  }
  validate(t, n) {
    return n.isTwoDigitYear || n.year > 0;
  }
  set(t, n, a) {
    const r = t.getFullYear();
    if (a.isTwoDigitYear) {
      const o = zI(
        a.year,
        r
      );
      return t.setFullYear(o, 0, 1), t.setHours(0, 0, 0, 0), t;
    }
    const i = !("era" in n) || n.era === 1 ? a.year : 1 - a.year;
    return t.setFullYear(i, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
}
class c$ extends wn {
  priority = 130;
  parse(t, n, a) {
    const r = (i) => ({
      year: i,
      isTwoDigitYear: n === "YY"
    });
    switch (n) {
      case "Y":
        return Va(Aa(4, t), r);
      case "Yo":
        return Va(
          a.ordinalNumber(t, {
            unit: "year"
          }),
          r
        );
      default:
        return Va(Aa(n.length, t), r);
    }
  }
  validate(t, n) {
    return n.isTwoDigitYear || n.year > 0;
  }
  set(t, n, a, r) {
    const i = n0(t, r);
    if (a.isTwoDigitYear) {
      const l = zI(
        a.year,
        i
      );
      return t.setFullYear(
        l,
        0,
        r.firstWeekContainsDate
      ), t.setHours(0, 0, 0, 0), Yi(t, r);
    }
    const o = !("era" in n) || n.era === 1 ? a.year : 1 - a.year;
    return t.setFullYear(o, 0, r.firstWeekContainsDate), t.setHours(0, 0, 0, 0), Yi(t, r);
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "Q",
    "q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "i",
    "t",
    "T"
  ];
}
class u$ extends wn {
  priority = 130;
  parse(t, n) {
    return R_(n === "R" ? 4 : n.length, t);
  }
  set(t, n, a) {
    const r = On(t, 0);
    return r.setFullYear(a, 0, 4), r.setHours(0, 0, 0, 0), Eu(r);
  }
  incompatibleTokens = [
    "G",
    "y",
    "Y",
    "u",
    "Q",
    "q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "e",
    "c",
    "t",
    "T"
  ];
}
class d$ extends wn {
  priority = 130;
  parse(t, n) {
    return R_(n === "u" ? 4 : n.length, t);
  }
  set(t, n, a) {
    return t.setFullYear(a, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["G", "y", "Y", "R", "w", "I", "i", "e", "c", "t", "T"];
}
class f$ extends wn {
  priority = 120;
  parse(t, n, a) {
    switch (n) {
      // 1, 2, 3, 4
      case "Q":
      case "QQ":
        return Aa(n.length, t);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return a.ordinalNumber(t, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return a.quarter(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return a.quarter(t, {
          width: "wide",
          context: "formatting"
        }) || a.quarter(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 4;
  }
  set(t, n, a) {
    return t.setMonth((a - 1) * 3, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class m$ extends wn {
  priority = 120;
  parse(t, n, a) {
    switch (n) {
      // 1, 2, 3, 4
      case "q":
      case "qq":
        return Aa(n.length, t);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return a.ordinalNumber(t, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return a.quarter(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return a.quarter(t, {
          width: "wide",
          context: "standalone"
        }) || a.quarter(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 4;
  }
  set(t, n, a) {
    return t.setMonth((a - 1) * 3, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "Q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class h$ extends wn {
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "L",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
  priority = 110;
  parse(t, n, a) {
    const r = (i) => i - 1;
    switch (n) {
      // 1, 2, ..., 12
      case "M":
        return Va(
          _a(Ba.month, t),
          r
        );
      // 01, 02, ..., 12
      case "MM":
        return Va(Aa(2, t), r);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return Va(
          a.ordinalNumber(t, {
            unit: "month"
          }),
          r
        );
      // Jan, Feb, ..., Dec
      case "MMM":
        return a.month(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.month(t, { width: "narrow", context: "formatting" });
      // J, F, ..., D
      case "MMMMM":
        return a.month(t, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return a.month(t, { width: "wide", context: "formatting" }) || a.month(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.month(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.setMonth(a, 1), t.setHours(0, 0, 0, 0), t;
  }
}
class _$ extends wn {
  priority = 110;
  parse(t, n, a) {
    const r = (i) => i - 1;
    switch (n) {
      // 1, 2, ..., 12
      case "L":
        return Va(
          _a(Ba.month, t),
          r
        );
      // 01, 02, ..., 12
      case "LL":
        return Va(Aa(2, t), r);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return Va(
          a.ordinalNumber(t, {
            unit: "month"
          }),
          r
        );
      // Jan, Feb, ..., Dec
      case "LLL":
        return a.month(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.month(t, { width: "narrow", context: "standalone" });
      // J, F, ..., D
      case "LLLLL":
        return a.month(t, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return a.month(t, { width: "wide", context: "standalone" }) || a.month(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.month(t, { width: "narrow", context: "standalone" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.setMonth(a, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "M",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
function p$(e, t, n) {
  const a = Ft(e, n?.in), r = a0(a, n) - t;
  return a.setDate(a.getDate() - r * 7), Ft(a, n?.in);
}
class v$ extends wn {
  priority = 100;
  parse(t, n, a) {
    switch (n) {
      case "w":
        return _a(Ba.week, t);
      case "wo":
        return a.ordinalNumber(t, { unit: "week" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 53;
  }
  set(t, n, a, r) {
    return Yi(p$(t, a, r), r);
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "i",
    "t",
    "T"
  ];
}
function g$(e, t, n) {
  const a = Ft(e, n?.in), r = t0(a, n) - t;
  return a.setDate(a.getDate() - r * 7), a;
}
class y$ extends wn {
  priority = 100;
  parse(t, n, a) {
    switch (n) {
      case "I":
        return _a(Ba.week, t);
      case "Io":
        return a.ordinalNumber(t, { unit: "week" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 53;
  }
  set(t, n, a) {
    return Eu(g$(t, a));
  }
  incompatibleTokens = [
    "y",
    "Y",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "e",
    "c",
    "t",
    "T"
  ];
}
const b$ = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], w$ = [
  31,
  29,
  31,
  30,
  31,
  30,
  31,
  31,
  30,
  31,
  30,
  31
];
class k$ extends wn {
  priority = 90;
  subPriority = 1;
  parse(t, n, a) {
    switch (n) {
      case "d":
        return _a(Ba.date, t);
      case "do":
        return a.ordinalNumber(t, { unit: "date" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    const a = t.getFullYear(), r = WI(a), i = t.getMonth();
    return r ? n >= 1 && n <= w$[i] : n >= 1 && n <= b$[i];
  }
  set(t, n, a) {
    return t.setDate(a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class S$ extends wn {
  priority = 90;
  subpriority = 1;
  parse(t, n, a) {
    switch (n) {
      case "D":
      case "DD":
        return _a(Ba.dayOfYear, t);
      case "Do":
        return a.ordinalNumber(t, { unit: "date" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    const a = t.getFullYear();
    return WI(a) ? n >= 1 && n <= 366 : n >= 1 && n <= 365;
  }
  set(t, n, a) {
    return t.setMonth(0, a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "E",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
function i0(e, t, n) {
  const a = fc(), r = n?.weekStartsOn ?? n?.locale?.options?.weekStartsOn ?? a.weekStartsOn ?? a.locale?.options?.weekStartsOn ?? 0, i = Ft(e, n?.in), o = i.getDay(), s = (t % 7 + 7) % 7, d = 7 - r, u = t < 0 || t > 6 ? t - (o + d) % 7 : (s + d) % 7 - (o + d) % 7;
  return Ti(i, u, n);
}
class C$ extends wn {
  priority = 90;
  parse(t, n, a) {
    switch (n) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // T
      case "EEEEE":
        return a.day(t, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // Tuesday
      case "EEEE":
      default:
        return a.day(t, { width: "wide", context: "formatting" }) || a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = i0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["D", "i", "e", "c", "t", "T"];
}
class A$ extends wn {
  priority = 90;
  parse(t, n, a, r) {
    const i = (o) => {
      const l = Math.floor((o - 1) / 7) * 7;
      return (o + r.weekStartsOn + 6) % 7 + l;
    };
    switch (n) {
      // 3
      case "e":
      case "ee":
        return Va(Aa(n.length, t), i);
      // 3rd
      case "eo":
        return Va(
          a.ordinalNumber(t, {
            unit: "day"
          }),
          i
        );
      // Tue
      case "eee":
        return a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // T
      case "eeeee":
        return a.day(t, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // Tuesday
      case "eeee":
      default:
        return a.day(t, { width: "wide", context: "formatting" }) || a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = i0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "E",
    "i",
    "c",
    "t",
    "T"
  ];
}
class x$ extends wn {
  priority = 90;
  parse(t, n, a, r) {
    const i = (o) => {
      const l = Math.floor((o - 1) / 7) * 7;
      return (o + r.weekStartsOn + 6) % 7 + l;
    };
    switch (n) {
      // 3
      case "c":
      case "cc":
        return Va(Aa(n.length, t), i);
      // 3rd
      case "co":
        return Va(
          a.ordinalNumber(t, {
            unit: "day"
          }),
          i
        );
      // Tue
      case "ccc":
        return a.day(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
      // T
      case "ccccc":
        return a.day(t, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
      // Tuesday
      case "cccc":
      default:
        return a.day(t, { width: "wide", context: "standalone" }) || a.day(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = i0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "E",
    "i",
    "e",
    "t",
    "T"
  ];
}
function T$(e, t, n) {
  const a = Ft(e, n?.in), r = t$(a, n), i = t - r;
  return Ti(a, i, n);
}
class I$ extends wn {
  priority = 90;
  parse(t, n, a) {
    const r = (i) => i === 0 ? 7 : i;
    switch (n) {
      // 2
      case "i":
      case "ii":
        return Aa(n.length, t);
      // 2nd
      case "io":
        return a.ordinalNumber(t, { unit: "day" });
      // Tue
      case "iii":
        return Va(
          a.day(t, {
            width: "abbreviated",
            context: "formatting"
          }) || a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // T
      case "iiiii":
        return Va(
          a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // Tu
      case "iiiiii":
        return Va(
          a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // Tuesday
      case "iiii":
      default:
        return Va(
          a.day(t, {
            width: "wide",
            context: "formatting"
          }) || a.day(t, {
            width: "abbreviated",
            context: "formatting"
          }) || a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 7;
  }
  set(t, n, a) {
    return t = T$(t, a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "Y",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "E",
    "e",
    "c",
    "t",
    "T"
  ];
}
class E$ extends wn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "a":
      case "aa":
      case "aaa":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaaa":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(r0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["b", "B", "H", "k", "t", "T"];
}
class P$ extends wn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "b":
      case "bb":
      case "bbb":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbbb":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(r0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "B", "H", "k", "t", "T"];
}
class O$ extends wn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "B":
      case "BB":
      case "BBB":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBBB":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(r0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "t", "T"];
}
class D$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "h":
        return _a(Ba.hour12h, t);
      case "ho":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 12;
  }
  set(t, n, a) {
    const r = t.getHours() >= 12;
    return r && a < 12 ? t.setHours(a + 12, 0, 0, 0) : !r && a === 12 ? t.setHours(0, 0, 0, 0) : t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["H", "K", "k", "t", "T"];
}
class B$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "H":
        return _a(Ba.hour23h, t);
      case "Ho":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 23;
  }
  set(t, n, a) {
    return t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "h", "K", "k", "t", "T"];
}
class V$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "K":
        return _a(Ba.hour11h, t);
      case "Ko":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.getHours() >= 12 && a < 12 ? t.setHours(a + 12, 0, 0, 0) : t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["h", "H", "k", "t", "T"];
}
class M$ extends wn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "k":
        return _a(Ba.hour24h, t);
      case "ko":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 24;
  }
  set(t, n, a) {
    const r = a <= 24 ? a % 24 : a;
    return t.setHours(r, 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "h", "H", "K", "t", "T"];
}
class R$ extends wn {
  priority = 60;
  parse(t, n, a) {
    switch (n) {
      case "m":
        return _a(Ba.minute, t);
      case "mo":
        return a.ordinalNumber(t, { unit: "minute" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 59;
  }
  set(t, n, a) {
    return t.setMinutes(a, 0, 0), t;
  }
  incompatibleTokens = ["t", "T"];
}
class L$ extends wn {
  priority = 50;
  parse(t, n, a) {
    switch (n) {
      case "s":
        return _a(Ba.second, t);
      case "so":
        return a.ordinalNumber(t, { unit: "second" });
      default:
        return Aa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 59;
  }
  set(t, n, a) {
    return t.setSeconds(a, 0), t;
  }
  incompatibleTokens = ["t", "T"];
}
class F$ extends wn {
  priority = 30;
  parse(t, n) {
    const a = (r) => Math.trunc(r * Math.pow(10, -n.length + 3));
    return Va(Aa(n.length, t), a);
  }
  set(t, n, a) {
    return t.setMilliseconds(a), t;
  }
  incompatibleTokens = ["t", "T"];
}
class N$ extends wn {
  priority = 10;
  parse(t, n) {
    switch (n) {
      case "X":
        return mo(
          fo.basicOptionalMinutes,
          t
        );
      case "XX":
        return mo(fo.basic, t);
      case "XXXX":
        return mo(
          fo.basicOptionalSeconds,
          t
        );
      case "XXXXX":
        return mo(
          fo.extendedOptionalSeconds,
          t
        );
      case "XXX":
      default:
        return mo(fo.extended, t);
    }
  }
  set(t, n, a) {
    return n.timestampIsSet ? t : On(
      t,
      t.getTime() - M_(t) - a
    );
  }
  incompatibleTokens = ["t", "T", "x"];
}
class U$ extends wn {
  priority = 10;
  parse(t, n) {
    switch (n) {
      case "x":
        return mo(
          fo.basicOptionalMinutes,
          t
        );
      case "xx":
        return mo(fo.basic, t);
      case "xxxx":
        return mo(
          fo.basicOptionalSeconds,
          t
        );
      case "xxxxx":
        return mo(
          fo.extendedOptionalSeconds,
          t
        );
      case "xxx":
      default:
        return mo(fo.extended, t);
    }
  }
  set(t, n, a) {
    return n.timestampIsSet ? t : On(
      t,
      t.getTime() - M_(t) - a
    );
  }
  incompatibleTokens = ["t", "T", "X"];
}
class $$ extends wn {
  priority = 40;
  parse(t) {
    return HI(t);
  }
  set(t, n, a) {
    return [On(t, a * 1e3), { timestampIsSet: !0 }];
  }
  incompatibleTokens = "*";
}
class q$ extends wn {
  priority = 20;
  parse(t) {
    return HI(t);
  }
  set(t, n, a) {
    return [On(t, a), { timestampIsSet: !0 }];
  }
  incompatibleTokens = "*";
}
const H$ = {
  G: new s$(),
  y: new l$(),
  Y: new c$(),
  R: new u$(),
  u: new d$(),
  Q: new f$(),
  q: new m$(),
  M: new h$(),
  L: new _$(),
  w: new v$(),
  I: new y$(),
  d: new k$(),
  D: new S$(),
  E: new C$(),
  e: new A$(),
  c: new x$(),
  i: new I$(),
  a: new E$(),
  b: new P$(),
  B: new O$(),
  h: new D$(),
  H: new B$(),
  K: new V$(),
  k: new M$(),
  m: new R$(),
  s: new L$(),
  S: new F$(),
  X: new N$(),
  x: new U$(),
  t: new $$(),
  T: new q$()
}, z$ = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, W$ = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, j$ = /^'([^]*?)'?$/, Y$ = /''/g, K$ = /\S/, G$ = /[a-zA-Z]/;
function _b(e, t, n, a) {
  const r = () => On(a?.in || n, NaN), i = e$(), o = a?.locale ?? i.locale ?? FI, l = a?.firstWeekContainsDate ?? a?.locale?.options?.firstWeekContainsDate ?? i.firstWeekContainsDate ?? i.locale?.options?.firstWeekContainsDate ?? 1, s = a?.weekStartsOn ?? a?.locale?.options?.weekStartsOn ?? i.weekStartsOn ?? i.locale?.options?.weekStartsOn ?? 0;
  if (!t)
    return e ? r() : Ft(n, a?.in);
  const d = {
    firstWeekContainsDate: l,
    weekStartsOn: s,
    locale: o
  }, u = [new o$(a?.in, n)], f = t.match(W$).map((b) => {
    const p = b[0];
    if (p in mb) {
      const y = mb[p];
      return y(b, o.formatLong);
    }
    return b;
  }).join("").match(z$), _ = [];
  for (let b of f) {
    !a?.useAdditionalWeekYearTokens && $I(b) && hb(b, t, e), !a?.useAdditionalDayOfYearTokens && UI(b) && hb(b, t, e);
    const p = b[0], y = H$[p];
    if (y) {
      const { incompatibleTokens: S } = y;
      if (Array.isArray(S)) {
        const C = _.find(
          (B) => S.includes(B.token) || B.token === p
        );
        if (C)
          throw new RangeError(
            `The format string mustn't contain \`${C.fullToken}\` and \`${b}\` at the same time`
          );
      } else if (y.incompatibleTokens === "*" && _.length > 0)
        throw new RangeError(
          `The format string mustn't contain \`${b}\` and any other token at the same time`
        );
      _.push({ token: p, fullToken: b });
      const E = y.run(
        e,
        b,
        o.match,
        d
      );
      if (!E)
        return r();
      u.push(E.setter), e = E.rest;
    } else {
      if (p.match(G$))
        throw new RangeError(
          "Format string contains an unescaped latin alphabet character `" + p + "`"
        );
      if (b === "''" ? b = "'" : p === "'" && (b = Q$(b)), e.indexOf(b) === 0)
        e = e.slice(b.length);
      else
        return r();
    }
  }
  if (e.length > 0 && K$.test(e))
    return r();
  const g = u.map((b) => b.priority).sort((b, p) => p - b).filter((b, p, y) => y.indexOf(b) === p).map(
    (b) => u.filter((p) => p.priority === b).sort((p, y) => y.subPriority - p.subPriority)
  ).map((b) => b[0]);
  let v = Ft(n, a?.in);
  if (isNaN(+v)) return r();
  const w = {};
  for (const b of g) {
    if (!b.validate(v, d))
      return r();
    const p = b.set(v, w, d);
    Array.isArray(p) ? (v = p[0], Object.assign(w, p[1])) : v = p;
  }
  return v;
}
function Q$(e) {
  return e.match(j$)[1].replace(Y$, "'");
}
function NC(e, t, n) {
  const [a, r] = Wf(
    n?.in,
    e,
    t
  );
  return +Ul(a) == +Ul(r);
}
function jI(e, t, n) {
  return Ti(e, -t, n);
}
function YI(e, t, n) {
  const a = Ft(e, n?.in), r = a.getFullYear(), i = a.getDate(), o = On(e, 0);
  o.setFullYear(r, t, 15), o.setHours(0, 0, 0, 0);
  const l = ZU(o);
  return a.setMonth(t, Math.min(i, l)), a;
}
function Bn(e, t, n) {
  let a = Ft(e, n?.in);
  return isNaN(+a) ? On(e, NaN) : (t.year != null && a.setFullYear(t.year), t.month != null && (a = YI(a, t.month)), t.date != null && a.setDate(t.date), t.hours != null && a.setHours(t.hours), t.minutes != null && a.setMinutes(t.minutes), t.seconds != null && a.setSeconds(t.seconds), t.milliseconds != null && a.setMilliseconds(t.milliseconds), a);
}
function J$(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setHours(t), a;
}
function KI(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setMilliseconds(t), a;
}
function X$(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setMinutes(t), a;
}
function GI(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setSeconds(t), a;
}
function _o(e, t, n) {
  const a = Ft(e, n?.in);
  return isNaN(+a) ? On(e, NaN) : (a.setFullYear(t), a);
}
function Du(e, t, n) {
  return Hi(e, -t, n);
}
function Z$(e, t, n) {
  const {
    years: a = 0,
    months: r = 0,
    weeks: i = 0,
    days: o = 0,
    hours: l = 0,
    minutes: s = 0,
    seconds: d = 0
  } = t, u = Du(e, r + a * 12, n), f = jI(u, o + i * 7, n), _ = s + l * 60, v = (d + _ * 60) * 1e3;
  return On(e, +f - v);
}
function QI(e, t, n) {
  return e0(e, -t, n);
}
function Gu() {
  const e = qF();
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img",
      ...e
    },
    [
      A("path", {
        d: "M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"
      }),
      A("path", {
        d: "M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      A("path", {
        d: "M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      A("path", {
        d: "M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"
      })
    ]
  );
}
Gu.compatConfig = {
  MODE: 3
};
function JI() {
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      A("path", {
        d: "M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"
      }),
      A("path", {
        d: "M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
JI.compatConfig = {
  MODE: 3
};
function o0() {
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      A("path", {
        d: "M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
o0.compatConfig = {
  MODE: 3
};
function s0() {
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      A("path", {
        d: "M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"
      })
    ]
  );
}
s0.compatConfig = {
  MODE: 3
};
function l0() {
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      A("path", {
        d: "M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"
      }),
      A("path", {
        d: "M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      })
    ]
  );
}
l0.compatConfig = {
  MODE: 3
};
function c0() {
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      A("path", {
        d: "M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
c0.compatConfig = {
  MODE: 3
};
function u0() {
  return ne(), Be(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      A("path", {
        d: "M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
u0.compatConfig = {
  MODE: 3
};
const Kr = (e, t) => t ? new Date(e.toLocaleString("en-US", { timeZone: t })) : new Date(e), d0 = (e, t, n) => pb(e, t, n) || ut(), e6 = (e, t, n) => {
  const a = t.dateInTz ? Kr(new Date(e), t.dateInTz) : ut(e);
  return n ? rr(a, !0) : a;
}, pb = (e, t, n) => {
  if (!e) return null;
  const a = n ? rr(ut(e), !0) : ut(e);
  return t ? t.exactMatch ? e6(e, t, n) : Kr(a, t.timezone) : a;
}, t6 = (e) => {
  const t = new Date(e.getFullYear(), 0, 1).getTimezoneOffset();
  return e.getTimezoneOffset() < t;
}, n6 = (e, t) => {
  if (!e) return 0;
  const n = /* @__PURE__ */ new Date(), a = new Date(n.toLocaleString("en-US", { timeZone: "UTC" })), r = new Date(n.toLocaleString("en-US", { timeZone: e })), i = (t6(t ?? r) ? r : t ?? r).getTimezoneOffset() / 60;
  return (+a - +r) / (1e3 * 60 * 60) - i;
};
var Li = /* @__PURE__ */ ((e) => (e.month = "month", e.year = "year", e))(Li || {}), Fi = /* @__PURE__ */ ((e) => (e.top = "top", e.bottom = "bottom", e))(Fi || {}), Yl = /* @__PURE__ */ ((e) => (e.header = "header", e.calendar = "calendar", e.timePicker = "timePicker", e))(Yl || {}), br = /* @__PURE__ */ ((e) => (e.month = "month", e.year = "year", e.calendar = "calendar", e.time = "time", e.minutes = "minutes", e.hours = "hours", e.seconds = "seconds", e))(br || {});
const a6 = ["timestamp", "date", "iso"];
var Br = /* @__PURE__ */ ((e) => (e.up = "up", e.down = "down", e.left = "left", e.right = "right", e))(Br || {}), Gn = /* @__PURE__ */ ((e) => (e.arrowUp = "ArrowUp", e.arrowDown = "ArrowDown", e.arrowLeft = "ArrowLeft", e.arrowRight = "ArrowRight", e.enter = "Enter", e.space = " ", e.esc = "Escape", e.tab = "Tab", e.home = "Home", e.end = "End", e.pageUp = "PageUp", e.pageDown = "PageDown", e))(Gn || {}), hu = /* @__PURE__ */ ((e) => (e.MONTH_AND_YEAR = "MM-yyyy", e.YEAR = "yyyy", e.DATE = "dd-MM-yyyy", e))(hu || {});
function UC(e) {
  return (t) => {
    const n = new Intl.DateTimeFormat(e, {
      weekday: "short",
      timeZone: "UTC"
    }).format(/* @__PURE__ */ new Date(`2017-01-0${t}T00:00:00+00:00`));
    return e === "ar" ? n.slice(2, 5) : n.slice(0, 2);
  };
}
function r6(e) {
  return (t) => go(Kr(/* @__PURE__ */ new Date(`2017-01-0${t}T00:00:00+00:00`), "UTC"), "EEEEEE", { locale: e });
}
const i6 = (e, t, n) => {
  const a = [1, 2, 3, 4, 5, 6, 7];
  let r;
  if (e !== null)
    try {
      r = a.map(r6(e));
    } catch {
      r = a.map(UC(t));
    }
  else
    r = a.map(UC(t));
  const i = r.slice(0, n), o = r.slice(n + 1, r.length);
  return [r[n]].concat(...o).concat(...i);
}, f0 = (e, t, n) => {
  const a = [];
  for (let r = +e[0]; r <= +e[1]; r++)
    a.push({ value: +r, text: tE(r, t) });
  return n ? a.reverse() : a;
}, XI = (e, t, n) => {
  const a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((i) => {
    const o = i < 10 ? `0${i}` : i;
    return /* @__PURE__ */ new Date(`2017-${o}-01T00:00:00+00:00`);
  });
  if (e !== null)
    try {
      const i = n === "long" ? "LLLL" : "LLL";
      return a.map((o, l) => {
        const s = go(Kr(o, "UTC"), i, { locale: e });
        return {
          text: s.charAt(0).toUpperCase() + s.substring(1),
          value: l
        };
      });
    } catch {
    }
  const r = new Intl.DateTimeFormat(t, { month: n, timeZone: "UTC" });
  return a.map((i, o) => {
    const l = r.format(i);
    return {
      text: l.charAt(0).toUpperCase() + l.substring(1),
      value: o
    };
  });
}, o6 = (e) => [12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11][e], $a = (e) => {
  const t = fe(e);
  return t != null && t.$el ? t?.$el : t;
}, s6 = (e) => ({ type: "dot", ...e ?? {} }), ZI = (e) => Array.isArray(e) ? !!e[0] && !!e[1] : !1, m0 = {
  prop: (e) => `"${e}" prop must be enabled!`,
  dateArr: (e) => `You need to use array as "model-value" binding in order to support "${e}"`
}, Za = (e) => e, $C = (e) => e === 0 ? e : !e || isNaN(+e) ? null : +e, qC = (e) => e === null, eE = (e) => {
  if (e)
    return [...e.querySelectorAll("input, button, select, textarea, a[href]")][0];
}, l6 = (e) => {
  const t = [], n = (a) => a.filter((r) => r);
  for (let a = 0; a < e.length; a += 3) {
    const r = [e[a], e[a + 1], e[a + 2]];
    t.push(n(r));
  }
  return t;
}, Cf = (e, t, n) => {
  const a = n != null, r = t != null;
  if (!a && !r) return !1;
  const i = +n, o = +t;
  return a && r ? +e > i || +e < o : a ? +e > i : r ? +e < o : !1;
}, Bu = (e, t) => l6(e).map((n) => n.map((a) => {
  const { active: r, disabled: i, isBetween: o, highlighted: l } = t(a);
  return {
    ...a,
    active: r,
    disabled: i,
    className: {
      dp__overlay_cell_active: r,
      dp__overlay_cell: !r,
      dp__overlay_cell_disabled: i,
      dp__overlay_cell_pad: !0,
      dp__overlay_cell_active_disabled: i && r,
      dp__cell_in_between: o,
      "dp--highlighted": l
    }
  };
})), Ns = (e, t, n = !1) => {
  e && t.allowStopPropagation && (n && e.stopImmediatePropagation(), e.stopPropagation());
}, c6 = () => [
  "a[href]",
  "area[href]",
  "input:not([disabled]):not([type='hidden'])",
  "select:not([disabled])",
  "textarea:not([disabled])",
  "button:not([disabled])",
  "[tabindex]:not([tabindex='-1'])",
  "[data-datepicker-instance]"
].join(", ");
function u6(e, t) {
  let n = [...document.querySelectorAll(c6())];
  n = n.filter((r) => !e.contains(r) || r.hasAttribute("data-datepicker-instance"));
  const a = n.indexOf(e);
  if (a >= 0 && (t ? a - 1 >= 0 : a + 1 <= n.length))
    return n[a + (t ? -1 : 1)];
}
const vb = (e, t) => e?.querySelector(`[data-dp-element="${t}"]`), tE = (e, t) => new Intl.NumberFormat(t, { useGrouping: !1, style: "decimal" }).format(e), h0 = (e, t) => go(e, t ?? hu.DATE), Gg = (e) => Array.isArray(e), L_ = (e, t, n) => t.get(h0(e, n)), d6 = (e, t) => e ? t ? t instanceof Map ? !!L_(e, t) : t(ut(e)) : !1 : !0, Lr = (e, t, n = !1, a) => {
  if (e.key === Gn.enter || e.key === Gn.space)
    return n && e.preventDefault(), t();
  if (a) return a(e);
}, f6 = () => "ontouchstart" in window || navigator.maxTouchPoints > 0, nE = (e, t) => e ? hu.MONTH_AND_YEAR : t ? hu.YEAR : hu.DATE, aE = (e) => e < 10 ? `0${e}` : e, HC = (e, t, n, a, r, i) => {
  const o = _b(e, t.slice(0, e.length), /* @__PURE__ */ new Date(), { locale: i });
  return af(o) && BI(o) ? a || r ? o : Bn(o, {
    hours: +n.hours,
    minutes: +n?.minutes,
    seconds: +n?.seconds,
    milliseconds: 0
  }) : null;
}, m6 = (e, t, n, a, r, i) => {
  const o = Array.isArray(n) ? n[0] : n;
  if (typeof t == "string")
    return HC(e, t, o, a, r, i);
  if (Array.isArray(t)) {
    let l = null;
    for (const s of t)
      if (l = HC(e, s, o, a, r, i), l)
        break;
    return l;
  }
  return typeof t == "function" ? t(e) : null;
}, ut = (e) => e ? new Date(e) : /* @__PURE__ */ new Date(), h6 = (e, t, n) => {
  if (t) {
    const r = (e.getMonth() + 1).toString().padStart(2, "0"), i = e.getDate().toString().padStart(2, "0"), o = e.getHours().toString().padStart(2, "0"), l = e.getMinutes().toString().padStart(2, "0"), s = n ? e.getSeconds().toString().padStart(2, "0") : "00";
    return `${e.getFullYear()}-${r}-${i}T${o}:${l}:${s}.000Z`;
  }
  const a = Date.UTC(
    e.getUTCFullYear(),
    e.getUTCMonth(),
    e.getUTCDate(),
    e.getUTCHours(),
    e.getUTCMinutes(),
    e.getUTCSeconds()
  );
  return new Date(a).toISOString();
}, rr = (e, t) => {
  const n = ut(JSON.parse(JSON.stringify(e))), a = Bn(n, { hours: 0, minutes: 0, seconds: 0, milliseconds: 0 });
  return t ? oU(a) : a;
}, Us = (e, t, n, a) => {
  let r = e ? ut(e) : ut();
  return (t || t === 0) && (r = J$(r, +t)), (n || n === 0) && (r = X$(r, +n)), (a || a === 0) && (r = GI(r, +a)), KI(r, 0);
}, ka = (e, t) => !e || !t ? !1 : Ou(rr(e), rr(t)), mn = (e, t) => !e || !t ? !1 : iu(rr(e), rr(t)), Oa = (e, t) => !e || !t ? !1 : nc(rr(e), rr(t)), Af = (e, t, n) => e != null && e[0] && e != null && e[1] ? Oa(n, e[0]) && ka(n, e[1]) : e != null && e[0] && t ? Oa(n, e[0]) && ka(n, t) || ka(n, e[0]) && Oa(n, t) : !1, Ui = (e) => {
  const t = Bn(new Date(e), { date: 1 });
  return rr(t);
}, Qg = (e, t, n) => t && (n || n === 0) ? Object.fromEntries(
  ["hours", "minutes", "seconds"].map((a) => a === t ? [a, n] : [a, isNaN(+e[a]) ? void 0 : +e[a]])
) : {
  hours: isNaN(+e.hours) ? void 0 : +e.hours,
  minutes: isNaN(+e.minutes) ? void 0 : +e.minutes,
  seconds: isNaN(+e.seconds) ? void 0 : +e.seconds
}, Kl = (e) => ({
  hours: ts(e),
  minutes: Ks(e),
  seconds: Pu(e)
}), rE = (e, t) => {
  if (t) {
    const n = Yt(ut(t));
    if (n > e) return 12;
    if (n === e) return fn(ut(t));
  }
}, iE = (e, t) => {
  if (t) {
    const n = Yt(ut(t));
    return n < e ? -1 : n === e ? fn(ut(t)) : void 0;
  }
}, Vu = (e) => {
  if (e) return Yt(ut(e));
}, oE = (e, t) => {
  const n = Oa(e, t) ? t : e, a = Oa(t, e) ? t : e;
  return MI({ start: n, end: a });
}, _6 = (e) => {
  const t = Hi(e, 1);
  return { month: fn(t), year: Yt(t) };
}, Ho = (e, t) => {
  const n = Yi(e, { weekStartsOn: +t }), a = LI(e, { weekStartsOn: +t });
  return [n, a];
}, sE = (e, t) => {
  const n = {
    hours: ts(ut()),
    minutes: Ks(ut()),
    seconds: t ? Pu(ut()) : 0
  };
  return Object.assign(n, e);
}, Rs = (e, t, n) => [Bn(ut(e), { date: 1 }), Bn(ut(), { month: t, year: n, date: 1 })], Ko = (e, t, n) => {
  let a = e ? ut(e) : ut();
  return (t || t === 0) && (a = YI(a, t)), n && (a = _o(a, n)), a;
}, lE = (e, t, n, a, r) => {
  if (!a || r && !t || !r && !n) return !1;
  const i = r ? Hi(e, 1) : Du(e, 1), o = [fn(i), Yt(i)];
  return r ? !v6(...o, t) : !p6(...o, n);
}, p6 = (e, t, n) => ka(...Rs(n, e, t)) || mn(...Rs(n, e, t)), v6 = (e, t, n) => Oa(...Rs(n, e, t)) || mn(...Rs(n, e, t)), cE = (e, t, n, a, r, i, o) => {
  if (typeof t == "function" && !o) return t(e);
  const l = n ? { locale: n } : void 0;
  return Array.isArray(e) ? `${go(e[0], i, l)}${r && !e[1] ? "" : a}${e[1] ? go(e[1], i, l) : ""}` : go(e, i, l);
}, Jc = (e) => {
  if (e) return null;
  throw new Error(m0.prop("partial-range"));
}, Dh = (e, t) => {
  if (t) return e();
  throw new Error(m0.prop("range"));
}, gb = (e) => Array.isArray(e) ? af(e[0]) && (e[1] ? af(e[1]) : !0) : e ? af(e) : !1, g6 = (e, t) => Bn(t ?? ut(), {
  hours: +e.hours || 0,
  minutes: +e.minutes || 0,
  seconds: +e.seconds || 0
}), Jg = (e, t, n, a) => {
  if (!e) return !0;
  if (a) {
    const r = n === "max" ? Ou(e, t) : nc(e, t), i = { seconds: 0, milliseconds: 0 };
    return r || iu(Bn(e, i), Bn(t, i));
  }
  return n === "max" ? e.getTime() <= t.getTime() : e.getTime() >= t.getTime();
}, Xg = (e, t, n) => e ? g6(e, t) : ut(n ?? t), zC = (e, t, n, a, r) => {
  if (Array.isArray(a)) {
    const o = Xg(e, a[0], t), l = Xg(e, a[1], t);
    return Jg(a[0], o, n, !!t) && Jg(a[1], l, n, !!t) && r;
  }
  const i = Xg(e, a, t);
  return Jg(a, i, n, !!t) && r;
}, Zg = (e) => Bn(ut(), Kl(e)), y6 = (e, t, n) => {
  if (e instanceof Map) {
    const a = `${aE(n + 1)}-${t}`;
    return e.size ? e.has(a) : !1;
  }
  return typeof e == "function" ? e(rr(Bn(ut(), { month: n, year: t }), !0)) : !1;
}, b6 = (e, t, n) => {
  if (e instanceof Map) {
    const a = `${aE(n + 1)}-${t}`;
    return e.size ? e.has(a) : !0;
  }
  return !0;
}, uE = (e, t, n) => typeof e == "function" ? e({ month: t, year: n }) : !!e.months.find((a) => a.month === t && a.year === n), _0 = (e, t) => typeof e == "function" ? e(t) : e.years.includes(t), yb = (e) => `dp-${go(e, "yyyy-MM-dd")}`, WC = (e, t) => {
  const n = jI(rr(t), e), a = Ti(rr(t), e);
  return { before: n, after: a };
}, Fd = oa({
  menuFocused: !1,
  shiftKeyInMenu: !1
}), dE = () => {
  const e = (n) => {
    Fd.menuFocused = n;
  }, t = (n) => {
    Fd.shiftKeyInMenu !== n && (Fd.shiftKeyInMenu = n);
  };
  return {
    control: z(() => ({ shiftKeyInMenu: Fd.shiftKeyInMenu, menuFocused: Fd.menuFocused })),
    setMenuFocused: e,
    setShiftKey: t
  };
}, Kn = oa({
  monthYear: [],
  calendar: [],
  time: [],
  actionRow: [],
  selectionGrid: [],
  timePicker: {
    0: [],
    1: []
  },
  monthPicker: []
}), ey = Se(null), Bh = Se(!1), ty = Se(!1), ny = Se(!1), ay = Se(!1), gr = Se(0), Pa = Se(0), al = () => {
  const e = z(() => Bh.value ? [...Kn.selectionGrid, Kn.actionRow].filter((f) => f.length) : ty.value ? [
    ...Kn.timePicker[0],
    ...Kn.timePicker[1],
    ay.value ? [] : [ey.value],
    Kn.actionRow
  ].filter((f) => f.length) : ny.value ? [...Kn.monthPicker, Kn.actionRow] : [Kn.monthYear, ...Kn.calendar, Kn.time, Kn.actionRow].filter((f) => f.length)), t = (f) => {
    gr.value = f ? gr.value + 1 : gr.value - 1;
    let _ = null;
    e.value[Pa.value] && (_ = e.value[Pa.value][gr.value]), !_ && e.value[Pa.value + (f ? 1 : -1)] ? (Pa.value = Pa.value + (f ? 1 : -1), gr.value = f ? 0 : e.value[Pa.value].length - 1) : _ || (gr.value = f ? gr.value - 1 : gr.value + 1);
  }, n = (f) => {
    Pa.value === 0 && !f || Pa.value === e.value.length && f || (Pa.value = f ? Pa.value + 1 : Pa.value - 1, e.value[Pa.value] ? e.value[Pa.value] && !e.value[Pa.value][gr.value] && gr.value !== 0 && (gr.value = e.value[Pa.value].length - 1) : Pa.value = f ? Pa.value - 1 : Pa.value + 1);
  }, a = (f) => {
    let _ = null;
    e.value[Pa.value] && (_ = e.value[Pa.value][gr.value]), _ ? _.focus({ preventScroll: !Bh.value }) : gr.value = f ? gr.value - 1 : gr.value + 1;
  }, r = () => {
    t(!0), a(!0);
  }, i = () => {
    t(!1), a(!1);
  }, o = () => {
    n(!1), a(!0);
  }, l = () => {
    n(!0), a(!0);
  }, s = (f, _) => {
    Kn[_] = f;
  }, d = (f, _) => {
    Kn[_] = f;
  }, u = () => {
    gr.value = 0, Pa.value = 0;
  };
  return {
    buildMatrix: s,
    buildMultiLevelMatrix: d,
    setTimePickerBackRef: (f) => {
      ey.value = f;
    },
    setSelectionGrid: (f) => {
      Bh.value = f, u(), f || (Kn.selectionGrid = []);
    },
    setTimePicker: (f, _ = !1) => {
      ty.value = f, ay.value = _, u(), f || (Kn.timePicker[0] = [], Kn.timePicker[1] = []);
    },
    setTimePickerElements: (f, _ = 0) => {
      Kn.timePicker[_] = f;
    },
    arrowRight: r,
    arrowLeft: i,
    arrowUp: o,
    arrowDown: l,
    clearArrowNav: () => {
      Kn.monthYear = [], Kn.calendar = [], Kn.time = [], Kn.actionRow = [], Kn.selectionGrid = [], Kn.timePicker[0] = [], Kn.timePicker[1] = [], Bh.value = !1, ty.value = !1, ay.value = !1, ny.value = !1, u(), ey.value = null;
    },
    setMonthPicker: (f) => {
      ny.value = f, u();
    },
    refSets: Kn
    // exposed for testing
  };
}, jC = (e) => ({
  menuAppearTop: "dp-menu-appear-top",
  menuAppearBottom: "dp-menu-appear-bottom",
  open: "dp-slide-down",
  close: "dp-slide-up",
  next: "calendar-next",
  previous: "calendar-prev",
  vNext: "dp-slide-up",
  vPrevious: "dp-slide-down",
  ...e ?? {}
}), w6 = (e) => ({
  toggleOverlay: "Toggle overlay",
  menu: "Datepicker menu",
  input: "Datepicker input",
  openTimePicker: "Open time picker",
  closeTimePicker: "Close time Picker",
  incrementValue: (t) => `Increment ${t}`,
  decrementValue: (t) => `Decrement ${t}`,
  openTpOverlay: (t) => `Open ${t} overlay`,
  amPmButton: "Switch AM/PM mode",
  openYearsOverlay: "Open years overlay",
  openMonthsOverlay: "Open months overlay",
  nextMonth: "Next month",
  prevMonth: "Previous month",
  nextYear: "Next year",
  prevYear: "Previous year",
  day: void 0,
  weekDay: void 0,
  clearInput: "Clear value",
  calendarIcon: "Calendar icon",
  timePicker: "Time picker",
  monthPicker: (t) => `Month picker${t ? " overlay" : ""}`,
  yearPicker: (t) => `Year picker${t ? " overlay" : ""}`,
  timeOverlay: (t) => `${t} overlay`,
  ...e ?? {}
}), YC = (e) => e ? typeof e == "boolean" ? e ? 2 : 0 : +e >= 2 ? +e : 2 : 0, k6 = (e) => {
  const t = typeof e == "object" && e, n = {
    static: !0,
    solo: !1
  };
  if (!e) return { ...n, count: YC(!1) };
  const a = t ? e : {}, r = t ? a.count ?? !0 : e, i = YC(r);
  return Object.assign(n, a, { count: i });
}, S6 = (e, t, n) => e || (typeof n == "string" ? n : t), C6 = (e) => typeof e == "boolean" ? e ? jC({}) : !1 : jC(e), A6 = (e) => {
  const t = {
    enterSubmit: !0,
    tabSubmit: !0,
    openMenu: "open",
    selectOnFocus: !1,
    rangeSeparator: " - ",
    escClose: !0
  };
  return typeof e == "object" ? { ...t, ...e ?? {}, enabled: !0 } : { ...t, enabled: e };
}, x6 = (e) => ({
  months: [],
  years: [],
  times: { hours: [], minutes: [], seconds: [] },
  ...e ?? {}
}), T6 = (e) => ({
  showSelect: !0,
  showCancel: !0,
  showNow: !1,
  showPreview: !0,
  ...e ?? {}
}), I6 = (e) => {
  const t = { input: !1 };
  return typeof e == "object" ? { ...t, ...e ?? {}, enabled: !0 } : {
    enabled: e,
    ...t
  };
}, E6 = (e) => ({ allowStopPropagation: !0, closeOnScroll: !1, modeHeight: 255, allowPreventDefault: !1, closeOnClearValue: !0, closeOnAutoApply: !0, noSwipe: !1, keepActionRow: !1, onClickOutside: void 0, tabOutClosesMenu: !0, arrowLeft: void 0, keepViewOnOffsetClick: !1, timeArrowHoldThreshold: 0, shadowDom: !1, mobileBreakpoint: 600, setDateOnMenuClose: !1, ...e ?? {} }), P6 = (e) => {
  const t = {
    dates: Array.isArray(e) ? e.map((n) => ut(n)) : [],
    years: [],
    months: [],
    quarters: [],
    weeks: [],
    weekdays: [],
    options: { highlightDisabled: !1 }
  };
  return typeof e == "function" ? e : { ...t, ...e ?? {} };
}, O6 = (e) => typeof e == "object" ? {
  type: e?.type ?? "local",
  hideOnOffsetDates: e?.hideOnOffsetDates ?? !1
} : {
  type: e,
  hideOnOffsetDates: !1
}, D6 = (e) => {
  const t = {
    noDisabledRange: !1,
    showLastInRange: !0,
    minMaxRawRange: !1,
    partialRange: !0,
    disableTimeRangeValidation: !1,
    maxRange: void 0,
    minRange: void 0,
    autoRange: void 0,
    fixedStart: !1,
    fixedEnd: !1
  };
  return typeof e == "object" ? { enabled: !0, ...t, ...e } : {
    enabled: e,
    ...t
  };
}, B6 = (e) => e ? typeof e == "string" ? {
  timezone: e,
  exactMatch: !1,
  dateInTz: void 0,
  emitTimezone: void 0,
  convertModel: !0
} : {
  timezone: e.timezone,
  exactMatch: e.exactMatch ?? !1,
  dateInTz: e.dateInTz ?? void 0,
  emitTimezone: e.emitTimezone ?? void 0,
  convertModel: e.convertModel ?? !0
} : { timezone: void 0, exactMatch: !1, emitTimezone: void 0 }, ry = (e, t, n, a) => new Map(
  e.map((r) => {
    const i = d0(r, t, a);
    return [h0(i, n), i];
  })
), V6 = (e, t) => e.length ? new Map(
  e.map((n) => {
    const a = d0(n.date, t);
    return [h0(a, hu.DATE), n];
  })
) : null, M6 = (e) => {
  var t;
  const n = nE(e.isMonthPicker, e.isYearPicker);
  return {
    minDate: pb(e.minDate, e.timezone, e.isSpecific),
    maxDate: pb(e.maxDate, e.timezone, e.isSpecific),
    disabledDates: Gg(e.disabledDates) ? ry(e.disabledDates, e.timezone, n, e.isSpecific) : e.disabledDates,
    allowedDates: Gg(e.allowedDates) ? ry(e.allowedDates, e.timezone, n, e.isSpecific) : null,
    highlight: typeof e.highlight == "object" && Gg((t = e.highlight) == null ? void 0 : t.dates) ? ry(e.highlight.dates, e.timezone, n) : e.highlight,
    markers: V6(e.markers, e.timezone)
  };
}, R6 = (e) => typeof e == "boolean" ? { enabled: e, dragSelect: !0, limit: null } : {
  enabled: !!e,
  limit: e.limit ? +e.limit : null,
  dragSelect: e.dragSelect ?? !0
}, L6 = (e) => ({
  ...Object.fromEntries(
    Object.keys(e).map((t) => {
      const n = t, a = e[n], r = typeof e[n] == "string" ? { [a]: !0 } : Object.fromEntries(a.map((i) => [i, !0]));
      return [t, r];
    })
  )
}), da = (e) => {
  const t = () => {
    const B = e.enableSeconds ? ":ss" : "", O = e.enableMinutes ? ":mm" : "";
    return e.is24 ? `HH${O}${B}` : `hh${O}${B} aa`;
  }, n = () => {
    var B;
    return e.format ? e.format : e.monthPicker ? "MM/yyyy" : e.timePicker ? t() : e.weekPicker ? `${((B = b.value) == null ? void 0 : B.type) === "iso" ? "II" : "ww"}-RR` : e.yearPicker ? "yyyy" : e.quarterPicker ? "QQQ/yyyy" : e.enableTimePicker ? `MM/dd/yyyy, ${t()}` : "MM/dd/yyyy";
  }, a = (B) => sE(B, e.enableSeconds), r = () => E.value.enabled ? e.startTime && Array.isArray(e.startTime) ? [a(e.startTime[0]), a(e.startTime[1])] : null : e.startTime && !Array.isArray(e.startTime) ? a(e.startTime) : null, i = z(() => k6(e.multiCalendars)), o = z(() => r()), l = z(() => w6(e.ariaLabels)), s = z(() => x6(e.filters)), d = z(() => C6(e.transitions)), u = z(() => T6(e.actionRow)), f = z(
    () => S6(e.previewFormat, e.format, n())
  ), _ = z(() => A6(e.textInput)), g = z(() => I6(e.inline)), v = z(() => E6(e.config)), w = z(() => P6(e.highlight)), b = z(() => O6(e.weekNumbers)), p = z(() => B6(e.timezone)), y = z(() => R6(e.multiDates)), S = z(
    () => M6({
      minDate: e.minDate,
      maxDate: e.maxDate,
      disabledDates: e.disabledDates,
      allowedDates: e.allowedDates,
      highlight: w.value,
      markers: e.markers,
      timezone: p.value,
      isSpecific: e.monthPicker || e.yearPicker || e.quarterPicker,
      isMonthPicker: e.monthPicker,
      isYearPicker: e.yearPicker
    })
  ), E = z(() => D6(e.range)), C = z(() => L6(e.ui));
  return {
    defaultedTransitions: d,
    defaultedMultiCalendars: i,
    defaultedStartTime: o,
    defaultedAriaLabels: l,
    defaultedFilters: s,
    defaultedActionRow: u,
    defaultedPreviewFormat: f,
    defaultedTextInput: _,
    defaultedInline: g,
    defaultedConfig: v,
    defaultedHighlight: w,
    defaultedWeekNumbers: b,
    defaultedRange: E,
    propDates: S,
    defaultedTz: p,
    defaultedMultiDates: y,
    defaultedUI: C,
    getDefaultPattern: n,
    getDefaultStartTime: r,
    handleEventPropagation: (B) => {
      v.value.allowStopPropagation && B.stopPropagation(), v.value.allowPreventDefault && B.preventDefault();
    }
  };
}, F6 = (e, t, n) => {
  const a = Se(), { defaultedTextInput: r, defaultedRange: i, defaultedTz: o, defaultedMultiDates: l, getDefaultPattern: s } = da(t), d = Se(""), u = be(t, "format"), f = be(t, "formatLocale");
  nt(
    a,
    () => {
      typeof t.onInternalModelChange == "function" && e("internal-model-change", a.value, pe(!0));
    },
    { deep: !0 }
  ), nt(i, (H, we) => {
    H.enabled !== we.enabled && (a.value = null);
  }), nt(u, () => {
    de();
  });
  const _ = (H) => o.value.timezone && o.value.convertModel ? Kr(H, o.value.timezone) : H, g = (H) => {
    if (o.value.timezone && o.value.convertModel) {
      const we = n6(o.value.timezone, H);
      return Z5(H, we);
    }
    return H;
  }, v = (H, we, Me = !1) => cE(
    H,
    t.format,
    t.formatLocale,
    r.value.rangeSeparator,
    t.modelAuto,
    we ?? s(),
    Me
  ), w = (H) => H ? t.modelType ? F(H) : {
    hours: ts(H),
    minutes: Ks(H),
    seconds: t.enableSeconds ? Pu(H) : 0
  } : null, b = (H) => t.modelType ? F(H) : { month: fn(H), year: Yt(H) }, p = (H) => Array.isArray(H) ? l.value.enabled ? H.map((we) => y(we, _o(ut(), we))) : Dh(
    () => [
      _o(ut(), H[0]),
      H[1] ? _o(ut(), H[1]) : Jc(i.value.partialRange)
    ],
    i.value.enabled
  ) : _o(ut(), +H), y = (H, we) => (typeof H == "string" || typeof H == "number") && t.modelType ? Z(H) : we, S = (H) => Array.isArray(H) ? [
    y(
      H[0],
      Us(null, +H[0].hours, +H[0].minutes, H[0].seconds)
    ),
    y(
      H[1],
      Us(null, +H[1].hours, +H[1].minutes, H[1].seconds)
    )
  ] : y(H, Us(null, H.hours, H.minutes, H.seconds)), E = (H) => {
    const we = Bn(ut(), { date: 1 });
    return Array.isArray(H) ? l.value.enabled ? H.map((Me) => y(Me, Ko(we, +Me.month, +Me.year))) : Dh(
      () => [
        y(H[0], Ko(we, +H[0].month, +H[0].year)),
        y(
          H[1],
          H[1] ? Ko(we, +H[1].month, +H[1].year) : Jc(i.value.partialRange)
        )
      ],
      i.value.enabled
    ) : y(H, Ko(we, +H.month, +H.year));
  }, C = (H) => {
    if (Array.isArray(H))
      return H.map((we) => Z(we));
    throw new Error(m0.dateArr("multi-dates"));
  }, B = (H) => {
    if (Array.isArray(H) && i.value.enabled) {
      const we = H[0], Me = H[1];
      return [
        ut(Array.isArray(we) ? we[0] : null),
        Array.isArray(Me) && Me.length ? ut(Me[0]) : null
      ];
    }
    return ut(H[0]);
  }, O = (H) => t.modelAuto ? Array.isArray(H) ? [Z(H[0]), Z(H[1])] : t.autoApply ? [Z(H)] : [Z(H), null] : Array.isArray(H) ? Dh(
    () => H[1] ? [
      Z(H[0]),
      H[1] ? Z(H[1]) : Jc(i.value.partialRange)
    ] : [Z(H[0])],
    i.value.enabled
  ) : Z(H), D = () => {
    Array.isArray(a.value) && i.value.enabled && a.value.length === 1 && a.value.push(Jc(i.value.partialRange));
  }, T = () => {
    const H = a.value;
    return [
      F(H[0]),
      H[1] ? F(H[1]) : Jc(i.value.partialRange)
    ];
  }, P = () => Array.isArray(a.value) ? a.value[1] ? T() : F(Za(a.value[0])) : [], I = () => (a.value || []).map((H) => F(H)), M = (H = !1) => (H || D(), t.modelAuto ? P() : l.value.enabled ? I() : Array.isArray(a.value) ? Dh(() => T(), i.value.enabled) : F(Za(a.value))), V = (H) => !H || Array.isArray(H) && !H.length ? null : t.timePicker ? S(Za(H)) : t.monthPicker ? E(Za(H)) : t.yearPicker ? p(Za(H)) : l.value.enabled ? C(Za(H)) : t.weekPicker ? B(Za(H)) : O(Za(H)), N = (H) => {
    const we = V(H);
    gb(Za(we)) ? (a.value = Za(we), de()) : (a.value = null, d.value = "");
  }, q = () => {
    const H = (we) => go(we, r.value.format);
    return `${H(a.value[0])} ${r.value.rangeSeparator} ${a.value[1] ? H(a.value[1]) : ""}`;
  }, j = () => n.value && a.value ? Array.isArray(a.value) ? q() : go(a.value, r.value.format) : v(a.value), ee = () => a.value ? l.value.enabled ? a.value.map((H) => v(H)).join("; ") : r.value.enabled && typeof r.value.format == "string" ? j() : v(a.value) : "", de = () => {
    !t.format || typeof t.format == "string" || r.value.enabled && typeof r.value.format == "string" ? d.value = ee() : d.value = t.format(a.value);
  }, Z = (H) => {
    if (t.utc) {
      const we = new Date(H);
      return t.utc === "preserve" ? new Date(we.getTime() + we.getTimezoneOffset() * 6e4) : we;
    }
    return t.modelType ? a6.includes(t.modelType) ? _(new Date(H)) : t.modelType === "format" && (typeof t.format == "string" || !t.format) ? _(
      _b(H, s(), /* @__PURE__ */ new Date(), { locale: f.value })
    ) : _(
      _b(H, t.modelType, /* @__PURE__ */ new Date(), { locale: f.value })
    ) : _(new Date(H));
  }, F = (H) => H ? t.utc ? h6(H, t.utc === "preserve", t.enableSeconds) : t.modelType ? t.modelType === "timestamp" ? +g(H) : t.modelType === "iso" ? g(H).toISOString() : t.modelType === "format" && (typeof t.format == "string" || !t.format) ? v(g(H)) : v(g(H), t.modelType, !0) : g(H) : "", Y = (H, we = !1, Me = !1) => {
    if (Me) return H;
    if (e("update:model-value", H), o.value.emitTimezone && we) {
      const Re = Array.isArray(H) ? H.map((ce) => Kr(Za(ce), o.value.emitTimezone)) : Kr(Za(H), o.value.emitTimezone);
      e("update:model-timezone-value", Re);
    }
  }, se = (H) => Array.isArray(a.value) ? l.value.enabled ? a.value.map((we) => H(we)) : [
    H(a.value[0]),
    a.value[1] ? H(a.value[1]) : Jc(i.value.partialRange)
  ] : H(Za(a.value)), X = () => {
    if (Array.isArray(a.value)) {
      const H = Ho(a.value[0], t.weekStart), we = a.value[1] ? Ho(a.value[1], t.weekStart) : [];
      return [H.map((Me) => ut(Me)), we.map((Me) => ut(Me))];
    }
    return Ho(a.value, t.weekStart).map((H) => ut(H));
  }, he = (H, we) => Y(Za(se(H)), !1, we), ve = (H) => {
    const we = X();
    return H ? we : e("update:model-value", X());
  }, pe = (H = !1) => (H || de(), t.monthPicker ? he(b, H) : t.timePicker ? he(w, H) : t.yearPicker ? he(Yt, H) : t.weekPicker ? ve(H) : Y(M(H), !0, H));
  return {
    inputValue: d,
    internalModelValue: a,
    checkBeforeEmit: () => a.value ? i.value.enabled ? i.value.partialRange ? a.value.length >= 1 : a.value.length === 2 : !!a.value : !1,
    parseExternalModelValue: N,
    formatInputValue: de,
    emitModelValue: pe
  };
}, N6 = (e, t) => {
  const { defaultedFilters: n, propDates: a } = da(e), { validateMonthYearInRange: r } = rl(e), i = (u, f) => {
    let _ = u;
    return n.value.months.includes(fn(_)) ? (_ = f ? Hi(u, 1) : Du(u, 1), i(_, f)) : _;
  }, o = (u, f) => {
    let _ = u;
    return n.value.years.includes(Yt(_)) ? (_ = f ? e0(u, 1) : QI(u, 1), o(_, f)) : _;
  }, l = (u, f = !1) => {
    const _ = Bn(ut(), { month: e.month, year: e.year });
    let g = u ? Hi(_, 1) : Du(_, 1);
    e.disableYearSelect && (g = _o(g, e.year));
    let v = fn(g), w = Yt(g);
    n.value.months.includes(v) && (g = i(g, u), v = fn(g), w = Yt(g)), n.value.years.includes(w) && (g = o(g, u), w = Yt(g)), r(v, w, u, e.preventMinMaxNavigation) && s(v, w, f);
  }, s = (u, f, _) => {
    t("update-month-year", { month: u, year: f, fromNav: _ });
  }, d = z(() => (u) => lE(
    Bn(ut(), { month: e.month, year: e.year }),
    a.value.maxDate,
    a.value.minDate,
    e.preventMinMaxNavigation,
    u
  ));
  return { handleMonthYearChange: l, isDisabled: d, updateMonthYear: s };
}, mp = {
  multiCalendars: { type: [Boolean, Number, String, Object], default: void 0 },
  modelValue: { type: [String, Date, Array, Object, Number], default: null },
  modelType: { type: String, default: null },
  position: { type: String, default: "center" },
  dark: { type: Boolean, default: !1 },
  format: {
    type: [String, Function],
    default: () => null
  },
  autoPosition: { type: [Boolean, String], default: !0 },
  altPosition: { type: Function, default: null },
  transitions: { type: [Boolean, Object], default: !0 },
  formatLocale: { type: Object, default: null },
  utc: { type: [Boolean, String], default: !1 },
  ariaLabels: { type: Object, default: () => ({}) },
  offset: { type: [Number, String], default: 10 },
  hideNavigation: { type: Array, default: () => [] },
  timezone: { type: [String, Object], default: null },
  vertical: { type: Boolean, default: !1 },
  disableMonthYearSelect: { type: Boolean, default: !1 },
  disableYearSelect: { type: Boolean, default: !1 },
  dayClass: {
    type: Function,
    default: null
  },
  yearRange: { type: Array, default: () => [1900, 2100] },
  enableTimePicker: { type: Boolean, default: !0 },
  autoApply: { type: Boolean, default: !1 },
  disabledDates: { type: [Array, Function], default: () => [] },
  monthNameFormat: { type: String, default: "short" },
  startDate: { type: [Date, String], default: null },
  startTime: { type: [Object, Array], default: null },
  hideOffsetDates: { type: Boolean, default: !1 },
  noToday: { type: Boolean, default: !1 },
  disabledWeekDays: { type: Array, default: () => [] },
  allowedDates: { type: Array, default: null },
  nowButtonLabel: { type: String, default: "Now" },
  markers: { type: Array, default: () => [] },
  escClose: { type: Boolean, default: !0 },
  spaceConfirm: { type: Boolean, default: !0 },
  monthChangeOnArrows: { type: Boolean, default: !0 },
  presetDates: { type: Array, default: () => [] },
  flow: { type: Array, default: () => [] },
  partialFlow: { type: Boolean, default: !1 },
  preventMinMaxNavigation: { type: Boolean, default: !1 },
  reverseYears: { type: Boolean, default: !1 },
  weekPicker: { type: Boolean, default: !1 },
  filters: { type: Object, default: () => ({}) },
  arrowNavigation: { type: Boolean, default: !1 },
  highlight: {
    type: [Function, Object],
    default: null
  },
  teleport: { type: [Boolean, String, Object], default: null },
  teleportCenter: { type: Boolean, default: !1 },
  locale: { type: String, default: "en-Us" },
  weekNumName: { type: String, default: "W" },
  weekStart: { type: [Number, String], default: 1 },
  weekNumbers: {
    type: [String, Function, Object],
    default: null
  },
  monthChangeOnScroll: { type: [Boolean, String], default: !0 },
  dayNames: {
    type: [Function, Array],
    default: null
  },
  monthPicker: { type: Boolean, default: !1 },
  customProps: { type: Object, default: null },
  yearPicker: { type: Boolean, default: !1 },
  modelAuto: { type: Boolean, default: !1 },
  selectText: { type: String, default: "Select" },
  cancelText: { type: String, default: "Cancel" },
  previewFormat: {
    type: [String, Function],
    default: () => ""
  },
  multiDates: { type: [Object, Boolean], default: !1 },
  ignoreTimeValidation: { type: Boolean, default: !1 },
  minDate: { type: [Date, String], default: null },
  maxDate: { type: [Date, String], default: null },
  minTime: { type: Object, default: null },
  maxTime: { type: Object, default: null },
  name: { type: String, default: null },
  placeholder: { type: String, default: "" },
  hideInputIcon: { type: Boolean, default: !1 },
  clearable: { type: Boolean, default: !0 },
  alwaysClearable: { type: Boolean, default: !1 },
  state: { type: Boolean, default: null },
  required: { type: Boolean, default: !1 },
  autocomplete: { type: String, default: "off" },
  timePicker: { type: Boolean, default: !1 },
  enableSeconds: { type: Boolean, default: !1 },
  is24: { type: Boolean, default: !0 },
  noHoursOverlay: { type: Boolean, default: !1 },
  noMinutesOverlay: { type: Boolean, default: !1 },
  noSecondsOverlay: { type: Boolean, default: !1 },
  hoursGridIncrement: { type: [String, Number], default: 1 },
  minutesGridIncrement: { type: [String, Number], default: 5 },
  secondsGridIncrement: { type: [String, Number], default: 5 },
  hoursIncrement: { type: [Number, String], default: 1 },
  minutesIncrement: { type: [Number, String], default: 1 },
  secondsIncrement: { type: [Number, String], default: 1 },
  range: { type: [Boolean, Object], default: !1 },
  uid: { type: String, default: null },
  disabled: { type: Boolean, default: !1 },
  readonly: { type: Boolean, default: !1 },
  inline: { type: [Boolean, Object], default: !1 },
  textInput: { type: [Boolean, Object], default: !1 },
  sixWeeks: { type: [Boolean, String], default: !1 },
  actionRow: { type: Object, default: () => ({}) },
  focusStartDate: { type: Boolean, default: !1 },
  disabledTimes: { type: [Function, Array], default: void 0 },
  timePickerInline: { type: Boolean, default: !1 },
  calendar: { type: Function, default: null },
  config: { type: Object, default: void 0 },
  quarterPicker: { type: Boolean, default: !1 },
  yearFirst: { type: Boolean, default: !1 },
  loading: { type: Boolean, default: !1 },
  onInternalModelChange: { type: [Function, Object], default: null },
  enableMinutes: { type: Boolean, default: !0 },
  ui: { type: Object, default: () => ({}) }
}, Ki = {
  ...mp,
  shadow: { type: Boolean, default: !1 },
  flowStep: { type: Number, default: 0 },
  internalModelValue: { type: [Date, Array], default: null },
  noOverlayFocus: { type: Boolean, default: !1 },
  collapse: { type: Boolean, default: !1 },
  menuWrapRef: { type: Object, default: null },
  getInputRect: { type: Function, default: () => ({}) },
  isTextInputDate: { type: Boolean, default: !1 },
  isMobile: { type: Boolean, default: void 0 }
}, U6 = ["title"], $6 = ["disabled"], q6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "ActionRow",
  props: {
    menuMount: { type: Boolean, default: !1 },
    calendarWidth: { type: Number, default: 0 },
    ...Ki
  },
  emits: ["close-picker", "select-date", "select-now", "invalid-select"],
  setup(e, { emit: t }) {
    const n = t, a = e, {
      defaultedActionRow: r,
      defaultedPreviewFormat: i,
      defaultedMultiCalendars: o,
      defaultedTextInput: l,
      defaultedInline: s,
      defaultedRange: d,
      defaultedMultiDates: u
    } = da(a), { isTimeValid: f, isMonthValid: _ } = rl(a), { buildMatrix: g } = al(), v = Se(null), w = Se(null), b = Se(!1), p = Se({}), y = Se(null), S = Se(null);
    nn(() => {
      a.arrowNavigation && g([$a(v), $a(w)], "actionRow"), E(), window.addEventListener("resize", E);
    }), di(() => {
      window.removeEventListener("resize", E);
    });
    const E = () => {
      b.value = !1, setTimeout(() => {
        var N, q;
        const j = (N = y.value) == null ? void 0 : N.getBoundingClientRect(), ee = (q = S.value) == null ? void 0 : q.getBoundingClientRect();
        j && ee && (p.value.maxWidth = `${ee.width - j.width - 20}px`), b.value = !0;
      }, 0);
    }, C = z(() => d.value.enabled && !d.value.partialRange && a.internalModelValue ? a.internalModelValue.length === 2 : !0), B = z(
      () => !f.value(a.internalModelValue) || !_.value(a.internalModelValue) || !C.value
    ), O = () => {
      const N = i.value;
      return a.timePicker || a.monthPicker, N(Za(a.internalModelValue));
    }, D = () => {
      const N = a.internalModelValue;
      return o.value.count > 0 ? `${T(N[0])} - ${T(N[1])}` : [T(N[0]), T(N[1])];
    }, T = (N) => cE(
      N,
      i.value,
      a.formatLocale,
      l.value.rangeSeparator,
      a.modelAuto,
      i.value
    ), P = z(() => !a.internalModelValue || !a.menuMount ? "" : typeof i.value == "string" ? Array.isArray(a.internalModelValue) ? a.internalModelValue.length === 2 && a.internalModelValue[1] ? D() : u.value.enabled ? a.internalModelValue.map((N) => `${T(N)}`) : a.modelAuto ? `${T(a.internalModelValue[0])}` : `${T(a.internalModelValue[0])} -` : T(a.internalModelValue) : O()), I = () => u.value.enabled ? "; " : " - ", M = z(
      () => Array.isArray(P.value) ? P.value.join(I()) : P.value
    ), V = () => {
      f.value(a.internalModelValue) && _.value(a.internalModelValue) && C.value ? n("select-date") : n("invalid-select");
    };
    return (N, q) => (ne(), Be("div", {
      ref_key: "actionRowRef",
      ref: S,
      class: "dp__action_row"
    }, [
      N.$slots["action-row"] ? bt(N.$slots, "action-row", Xn(He({ key: 0 }, {
        internalModelValue: N.internalModelValue,
        disabled: B.value,
        selectDate: () => N.$emit("select-date"),
        closePicker: () => N.$emit("close-picker")
      }))) : (ne(), Be(Qe, { key: 1 }, [
        fe(r).showPreview ? (ne(), Be("div", {
          key: 0,
          class: "dp__selection_preview",
          title: M.value,
          style: Xe(p.value)
        }, [
          N.$slots["action-preview"] && b.value ? bt(N.$slots, "action-preview", {
            key: 0,
            value: N.internalModelValue
          }) : ke("", !0),
          !N.$slots["action-preview"] && b.value ? (ne(), Be(Qe, { key: 1 }, [
            ae(W(M.value), 1)
          ], 64)) : ke("", !0)
        ], 12, U6)) : ke("", !0),
        A("div", {
          ref_key: "actionBtnContainer",
          ref: y,
          class: "dp__action_buttons",
          "data-dp-element": "action-row"
        }, [
          N.$slots["action-buttons"] ? bt(N.$slots, "action-buttons", {
            key: 0,
            value: N.internalModelValue
          }) : ke("", !0),
          N.$slots["action-buttons"] ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
            !fe(s).enabled && fe(r).showCancel ? (ne(), Be("button", {
              key: 0,
              ref_key: "cancelButtonRef",
              ref: v,
              type: "button",
              class: "dp__action_button dp__action_cancel",
              onClick: q[0] || (q[0] = (j) => N.$emit("close-picker")),
              onKeydown: q[1] || (q[1] = (j) => fe(Lr)(j, () => N.$emit("close-picker")))
            }, W(N.cancelText), 545)) : ke("", !0),
            fe(r).showNow ? (ne(), Be("button", {
              key: 1,
              type: "button",
              class: "dp__action_button dp__action_cancel",
              onClick: q[2] || (q[2] = (j) => N.$emit("select-now")),
              onKeydown: q[3] || (q[3] = (j) => fe(Lr)(j, () => N.$emit("select-now")))
            }, W(N.nowButtonLabel), 33)) : ke("", !0),
            fe(r).showSelect ? (ne(), Be("button", {
              key: 2,
              ref_key: "selectButtonRef",
              ref: w,
              type: "button",
              class: "dp__action_button dp__action_select",
              disabled: B.value,
              "data-test-id": "select-button",
              onKeydown: q[4] || (q[4] = (j) => fe(Lr)(j, () => V())),
              onClick: V
            }, W(N.selectText), 41, $6)) : ke("", !0)
          ], 64))
        ], 512)
      ], 64))
    ], 512));
  }
}), H6 = ["role", "aria-label", "tabindex"], z6 = { class: "dp__selection_grid_header" }, W6 = ["aria-selected", "aria-disabled", "data-test-id", "onClick", "onKeydown", "onMouseover"], j6 = ["aria-label"], jf = /* @__PURE__ */ Ha({
  __name: "SelectionOverlay",
  props: {
    items: {},
    type: {},
    isLast: { type: Boolean },
    arrowNavigation: { type: Boolean },
    skipButtonRef: { type: Boolean },
    headerRefs: {},
    hideNavigation: {},
    escClose: { type: Boolean },
    useRelative: { type: Boolean },
    height: {},
    textInput: { type: [Boolean, Object] },
    config: {},
    noOverlayFocus: { type: Boolean },
    focusValue: {},
    menuWrapRef: {},
    ariaLabels: {},
    overlayLabel: {}
  },
  emits: ["selected", "toggle", "reset-flow", "hover-value"],
  setup(e, { expose: t, emit: n }) {
    const { setSelectionGrid: a, buildMultiLevelMatrix: r, setMonthPicker: i } = al(), o = n, l = e, { defaultedAriaLabels: s, defaultedTextInput: d, defaultedConfig: u, handleEventPropagation: f } = da(
      l
    ), { hideNavigationButtons: _ } = pp(), g = Se(!1), v = Se(null), w = Se(null), b = Se([]), p = Se(), y = Se(null), S = Se(0), E = Se(null);
    dw(() => {
      v.value = null;
    }), nn(() => {
      Vt().then(() => M()), l.noOverlayFocus || B(), C(!0);
    }), di(() => C(!1));
    const C = (X) => {
      var he;
      l.arrowNavigation && ((he = l.headerRefs) != null && he.length ? i(X) : a(X));
    }, B = () => {
      var X;
      const he = $a(w);
      he && (d.value.enabled || (v.value ? (X = v.value) == null || X.focus({ preventScroll: !0 }) : he.focus({ preventScroll: !0 })), g.value = he.clientHeight < he.scrollHeight);
    }, O = z(
      () => ({
        dp__overlay: !0,
        "dp--overlay-absolute": !l.useRelative,
        "dp--overlay-relative": l.useRelative
      })
    ), D = z(
      () => l.useRelative ? { height: `${l.height}px`, width: "var(--dp-menu-min-width)" } : void 0
    ), T = z(() => ({
      dp__overlay_col: !0
    })), P = z(
      () => ({
        dp__btn: !0,
        dp__button: !0,
        dp__overlay_action: !0,
        dp__over_action_scroll: g.value,
        dp__button_bottom: l.isLast
      })
    ), I = z(() => {
      var X, he;
      return {
        dp__overlay_container: !0,
        dp__container_flex: ((X = l.items) == null ? void 0 : X.length) <= 6,
        dp__container_block: ((he = l.items) == null ? void 0 : he.length) > 6
      };
    });
    nt(
      () => l.items,
      () => M(!1),
      { deep: !0 }
    );
    const M = (X = !0) => {
      Vt().then(() => {
        const he = $a(v), ve = $a(w), pe = $a(y), H = $a(E), we = pe ? pe.getBoundingClientRect().height : 0;
        ve && (ve.getBoundingClientRect().height ? S.value = ve.getBoundingClientRect().height - we : S.value = u.value.modeHeight - we), he && H && X && (H.scrollTop = he.offsetTop - H.offsetTop - (S.value / 2 - he.getBoundingClientRect().height) - we);
      });
    }, V = (X) => {
      X.disabled || o("selected", X.value);
    }, N = () => {
      o("toggle"), o("reset-flow");
    }, q = (X) => {
      l.escClose && (N(), f(X));
    }, j = (X, he, ve, pe) => {
      X && ((he.active || he.value === l.focusValue) && (v.value = X), l.arrowNavigation && (Array.isArray(b.value[ve]) ? b.value[ve][pe] = X : b.value[ve] = [X], ee()));
    }, ee = () => {
      var X, he;
      const ve = (X = l.headerRefs) != null && X.length ? [l.headerRefs].concat(b.value) : b.value.concat([l.skipButtonRef ? [] : [y.value]]);
      r(Za(ve), (he = l.headerRefs) != null && he.length ? "monthPicker" : "selectionGrid");
    }, de = (X) => {
      l.arrowNavigation || Ns(X, u.value, !0);
    }, Z = (X) => {
      p.value = X, o("hover-value", X);
    }, F = () => {
      if (N(), !l.isLast) {
        const X = vb(l.menuWrapRef ?? null, "action-row");
        if (X) {
          const he = eE(X);
          he?.focus();
        }
      }
    }, Y = (X) => {
      switch (X.key) {
        case Gn.esc:
          return q(X);
        case Gn.arrowLeft:
          return de(X);
        case Gn.arrowRight:
          return de(X);
        case Gn.arrowUp:
          return de(X);
        case Gn.arrowDown:
          return de(X);
        default:
          return;
      }
    }, se = (X) => {
      if (X.key === Gn.enter) return N();
      if (X.key === Gn.tab) return F();
    };
    return t({ focusGrid: B }), (X, he) => {
      var ve;
      return ne(), Be("div", {
        ref_key: "gridWrapRef",
        ref: w,
        class: Ee(O.value),
        style: Xe(D.value),
        role: X.useRelative ? void 0 : "dialog",
        "aria-label": X.overlayLabel,
        tabindex: X.useRelative ? void 0 : "0",
        onKeydown: Y,
        onClick: he[0] || (he[0] = Jn(() => {
        }, ["prevent"]))
      }, [
        A("div", {
          ref_key: "containerRef",
          ref: E,
          class: Ee(I.value),
          style: Xe({ "--dp-overlay-height": `${S.value}px` }),
          role: "grid"
        }, [
          A("div", z6, [
            bt(X.$slots, "header")
          ]),
          X.$slots.overlay ? bt(X.$slots, "overlay", { key: 0 }) : (ne(!0), Be(Qe, { key: 1 }, un(X.items, (pe, H) => (ne(), Be("div", {
            key: H,
            class: Ee(["dp__overlay_row", { dp__flex_row: X.items.length >= 3 }]),
            role: "row"
          }, [
            (ne(!0), Be(Qe, null, un(pe, (we, Me) => (ne(), Be("div", {
              key: we.value,
              ref_for: !0,
              ref: (Re) => j(Re, we, H, Me),
              role: "gridcell",
              class: Ee(T.value),
              "aria-selected": we.active || void 0,
              "aria-disabled": we.disabled || void 0,
              tabindex: "0",
              "data-test-id": we.text,
              onClick: Jn((Re) => V(we), ["prevent"]),
              onKeydown: (Re) => fe(Lr)(Re, () => V(we), !0),
              onMouseover: (Re) => Z(we.value)
            }, [
              A("div", {
                class: Ee(we.className)
              }, [
                X.$slots.item ? bt(X.$slots, "item", {
                  key: 0,
                  item: we
                }) : ke("", !0),
                X.$slots.item ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
                  ae(W(we.text), 1)
                ], 64))
              ], 2)
            ], 42, W6))), 128))
          ], 2))), 128))
        ], 6),
        X.$slots["button-icon"] ? ln((ne(), Be("button", {
          key: 0,
          ref_key: "toggleButton",
          ref: y,
          type: "button",
          "aria-label": (ve = fe(s)) == null ? void 0 : ve.toggleOverlay,
          class: Ee(P.value),
          tabindex: "0",
          onClick: N,
          onKeydown: se
        }, [
          bt(X.$slots, "button-icon")
        ], 42, j6)), [
          [Sa, !fe(_)(X.hideNavigation, X.type)]
        ]) : ke("", !0)
      ], 46, H6);
    };
  }
}), Y6 = ["data-dp-mobile"], hp = /* @__PURE__ */ Ha({
  __name: "InstanceWrap",
  props: {
    multiCalendars: {},
    stretch: { type: Boolean },
    collapse: { type: Boolean },
    isMobile: { type: Boolean }
  },
  setup(e) {
    const t = e, n = z(
      () => t.multiCalendars > 0 ? [...Array(t.multiCalendars).keys()] : [0]
    ), a = z(() => ({
      dp__instance_calendar: t.multiCalendars > 0
    }));
    return (r, i) => (ne(), Be("div", {
      class: Ee({
        dp__menu_inner: !r.stretch,
        "dp--menu--inner-stretched": r.stretch,
        dp__flex_display: r.multiCalendars > 0,
        "dp--flex-display-collapsed": r.collapse
      }),
      "data-dp-mobile": r.isMobile
    }, [
      (ne(!0), Be(Qe, null, un(n.value, (o, l) => (ne(), Be("div", {
        key: o,
        class: Ee(a.value)
      }, [
        bt(r.$slots, "default", {
          instance: o,
          index: l
        })
      ], 2))), 128))
    ], 10, Y6));
  }
}), K6 = ["data-dp-element", "aria-label", "aria-disabled"], rf = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "ArrowBtn",
  props: {
    ariaLabel: {},
    elName: {},
    disabled: { type: Boolean }
  },
  emits: ["activate", "set-ref"],
  setup(e, { emit: t }) {
    const n = t, a = Se(null);
    return nn(() => n("set-ref", a)), (r, i) => (ne(), Be("button", {
      ref_key: "elRef",
      ref: a,
      type: "button",
      "data-dp-element": r.elName,
      class: "dp__btn dp--arrow-btn-nav",
      tabindex: "0",
      "aria-label": r.ariaLabel,
      "aria-disabled": r.disabled || void 0,
      onClick: i[0] || (i[0] = (o) => r.$emit("activate")),
      onKeydown: i[1] || (i[1] = (o) => fe(Lr)(o, () => r.$emit("activate"), !0))
    }, [
      A("span", {
        class: Ee(["dp__inner_nav", { dp__inner_nav_disabled: r.disabled }])
      }, [
        bt(r.$slots, "default")
      ], 2)
    ], 40, K6));
  }
}), G6 = ["aria-label", "data-test-id"], fE = /* @__PURE__ */ Ha({
  __name: "YearModePicker",
  props: {
    ...Ki,
    showYearPicker: { type: Boolean, default: !1 },
    items: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    isDisabled: { type: Function, default: () => !1 }
  },
  emits: ["toggle-year-picker", "year-select", "handle-year"],
  setup(e, { emit: t }) {
    const n = t, a = e, { showRightIcon: r, showLeftIcon: i } = pp(), { defaultedConfig: o, defaultedMultiCalendars: l, defaultedAriaLabels: s, defaultedTransitions: d, defaultedUI: u } = da(a), { showTransition: f, transitionName: _ } = Yf(d), g = Se(!1), v = (p = !1, y) => {
      g.value = !g.value, n("toggle-year-picker", { flow: p, show: y });
    }, w = (p) => {
      g.value = !1, n("year-select", p);
    }, b = (p = !1) => {
      n("handle-year", p);
    };
    return (p, y) => {
      var S, E, C, B, O;
      return ne(), Be(Qe, null, [
        A("div", {
          class: Ee(["dp--year-mode-picker", { "dp--hidden-el": g.value }])
        }, [
          fe(i)(fe(l), e.instance) ? (ne(), Fe(rf, {
            key: 0,
            ref: "mpPrevIconRef",
            "aria-label": (S = fe(s)) == null ? void 0 : S.prevYear,
            disabled: e.isDisabled(!1),
            class: Ee((E = fe(u)) == null ? void 0 : E.navBtnPrev),
            onActivate: y[0] || (y[0] = (D) => b(!1))
          }, {
            default: x(() => [
              p.$slots["arrow-left"] ? bt(p.$slots, "arrow-left", { key: 0 }) : ke("", !0),
              p.$slots["arrow-left"] ? ke("", !0) : (ne(), Fe(fe(o0), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled", "class"])) : ke("", !0),
          A("button", {
            ref: "mpYearButtonRef",
            class: "dp__btn dp--year-select",
            type: "button",
            "aria-label": `${e.year}-${(C = fe(s)) == null ? void 0 : C.openYearsOverlay}`,
            "data-test-id": `year-mode-btn-${e.instance}`,
            onClick: y[1] || (y[1] = () => v(!1)),
            onKeydown: y[2] || (y[2] = Rl(() => v(!1), ["enter"]))
          }, [
            p.$slots.year ? bt(p.$slots, "year", {
              key: 0,
              year: e.year
            }) : ke("", !0),
            p.$slots.year ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
              ae(W(e.year), 1)
            ], 64))
          ], 40, G6),
          fe(r)(fe(l), e.instance) ? (ne(), Fe(rf, {
            key: 1,
            ref: "mpNextIconRef",
            "aria-label": (B = fe(s)) == null ? void 0 : B.nextYear,
            disabled: e.isDisabled(!0),
            class: Ee((O = fe(u)) == null ? void 0 : O.navBtnNext),
            onActivate: y[3] || (y[3] = (D) => b(!0))
          }, {
            default: x(() => [
              p.$slots["arrow-right"] ? bt(p.$slots, "arrow-right", { key: 0 }) : ke("", !0),
              p.$slots["arrow-right"] ? ke("", !0) : (ne(), Fe(fe(s0), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled", "class"])) : ke("", !0)
        ], 2),
        h(Ur, {
          name: fe(_)(e.showYearPicker),
          css: fe(f)
        }, {
          default: x(() => {
            var D, T;
            return [
              e.showYearPicker ? (ne(), Fe(jf, {
                key: 0,
                items: e.items,
                "text-input": p.textInput,
                "esc-close": p.escClose,
                config: p.config,
                "is-last": p.autoApply && !fe(o).keepActionRow,
                "hide-navigation": p.hideNavigation,
                "aria-labels": p.ariaLabels,
                "overlay-label": (T = (D = fe(s)) == null ? void 0 : D.yearPicker) == null ? void 0 : T.call(D, !0),
                type: "year",
                onToggle: v,
                onSelected: y[4] || (y[4] = (P) => w(P))
              }, dr({
                "button-icon": x(() => [
                  p.$slots["calendar-icon"] ? bt(p.$slots, "calendar-icon", { key: 0 }) : ke("", !0),
                  p.$slots["calendar-icon"] ? ke("", !0) : (ne(), Fe(fe(Gu), { key: 1 }))
                ]),
                _: 2
              }, [
                p.$slots["year-overlay-value"] ? {
                  name: "item",
                  fn: x(({ item: P }) => [
                    bt(p.$slots, "year-overlay-value", {
                      text: P.text,
                      value: P.value
                    })
                  ]),
                  key: "0"
                } : void 0
              ]), 1032, ["items", "text-input", "esc-close", "config", "is-last", "hide-navigation", "aria-labels", "overlay-label"])) : ke("", !0)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ], 64);
    };
  }
}), p0 = (e, t, n) => {
  if (t.value && Array.isArray(t.value))
    if (t.value.some((a) => mn(e, a))) {
      const a = t.value.filter((r) => !mn(r, e));
      t.value = a.length ? a : null;
    } else (n && +n > t.value.length || !n) && t.value.push(e);
  else
    t.value = [e];
}, v0 = (e, t, n) => {
  let a = e.value ? e.value.slice() : [];
  return a.length === 2 && a[1] !== null && (a = []), a.length ? (ka(t, a[0]) ? a.unshift(t) : a[1] = t, n("range-end", t)) : (a = [t], n("range-start", t)), a;
}, _p = (e, t, n, a) => {
  e && (e[0] && e[1] && n && t("auto-apply"), e[0] && !e[1] && a && n && t("auto-apply"));
}, mE = (e) => {
  Array.isArray(e.value) && e.value.length <= 2 && e.range ? e.modelValue.value = e.value.map((t) => Kr(ut(t), e.timezone)) : Array.isArray(e.value) || (e.modelValue.value = Kr(ut(e.value), e.timezone));
}, hE = (e, t, n, a) => Array.isArray(t.value) && (t.value.length === 2 || t.value.length === 1 && a.value.partialRange) ? a.value.fixedStart && (Oa(e, t.value[0]) || mn(e, t.value[0])) ? [t.value[0], e] : a.value.fixedEnd && (ka(e, t.value[1]) || mn(e, t.value[1])) ? [e, t.value[1]] : (n("invalid-fixed-range", e), t.value) : [], _E = ({
  multiCalendars: e,
  range: t,
  highlight: n,
  propDates: a,
  calendars: r,
  modelValue: i,
  props: o,
  filters: l,
  year: s,
  month: d,
  emit: u
}) => {
  const f = z(() => f0(o.yearRange, o.locale, o.reverseYears)), _ = Se([!1]), g = z(() => (P, I) => {
    const M = Bn(Ui(/* @__PURE__ */ new Date()), {
      month: d.value(P),
      year: s.value(P)
    }), V = I ? RI(M) : Sf(M);
    return lE(
      V,
      a.value.maxDate,
      a.value.minDate,
      o.preventMinMaxNavigation,
      I
    );
  }), v = () => Array.isArray(i.value) && e.value.solo && i.value[1], w = () => {
    for (let P = 0; P < e.value.count; P++)
      if (P === 0)
        r.value[P] = r.value[0];
      else if (P === e.value.count - 1 && v())
        r.value[P] = {
          month: fn(i.value[1]),
          year: Yt(i.value[1])
        };
      else {
        const I = Bn(ut(), r.value[P - 1]);
        r.value[P] = { month: fn(I), year: Yt(e0(I, 1)) };
      }
  }, b = (P) => {
    if (!P) return w();
    const I = Bn(ut(), r.value[P]);
    return r.value[0].year = Yt(QI(I, e.value.count - 1)), w();
  }, p = (P, I) => {
    const M = rU(I, P);
    return t.value.showLastInRange && M > 1 ? I : P;
  }, y = (P) => o.focusStartDate || e.value.solo ? P[0] : P[1] ? p(P[0], P[1]) : P[0], S = () => {
    if (i.value) {
      const P = Array.isArray(i.value) ? y(i.value) : i.value;
      r.value[0] = { month: fn(P), year: Yt(P) };
    }
  }, E = () => {
    S(), e.value.count && w();
  };
  nt(i, (P, I) => {
    o.isTextInputDate && JSON.stringify(P ?? {}) !== JSON.stringify(I ?? {}) && E();
  }), nn(() => {
    E();
  });
  const C = (P, I) => {
    r.value[I].year = P, u("update-month-year", { instance: I, year: P, month: r.value[I].month }), e.value.count && !e.value.solo && b(I);
  }, B = z(() => (P) => Bu(f.value, (I) => {
    var M;
    const V = s.value(P) === I.value, N = Cf(
      I.value,
      Vu(a.value.minDate),
      Vu(a.value.maxDate)
    ) || ((M = l.value.years) == null ? void 0 : M.includes(s.value(P))), q = _0(n.value, I.value);
    return { active: V, disabled: N, highlighted: q };
  })), O = (P, I) => {
    C(P, I), T(I);
  }, D = (P, I = !1) => {
    if (!g.value(P, I)) {
      const M = I ? s.value(P) + 1 : s.value(P) - 1;
      C(M, P);
    }
  }, T = (P, I = !1, M) => {
    I || u("reset-flow"), M !== void 0 ? _.value[P] = M : _.value[P] = !_.value[P], _.value[P] ? u("overlay-toggle", { open: !0, overlay: br.year }) : (u("overlay-closed"), u("overlay-toggle", { open: !1, overlay: br.year }));
  };
  return {
    isDisabled: g,
    groupedYears: B,
    showYearPicker: _,
    selectYear: C,
    toggleYearPicker: T,
    handleYearSelect: O,
    handleYear: D
  };
}, Q6 = (e, t) => {
  const {
    defaultedMultiCalendars: n,
    defaultedAriaLabels: a,
    defaultedTransitions: r,
    defaultedConfig: i,
    defaultedRange: o,
    defaultedHighlight: l,
    propDates: s,
    defaultedTz: d,
    defaultedFilters: u,
    defaultedMultiDates: f
  } = da(e), _ = () => {
    e.isTextInputDate && E(Yt(ut(e.startDate)), 0);
  }, { modelValue: g, year: v, month: w, calendars: b } = Kf(e, t, _), p = z(() => XI(e.formatLocale, e.locale, e.monthNameFormat)), y = Se(null), { checkMinMaxRange: S } = rl(e), {
    selectYear: E,
    groupedYears: C,
    showYearPicker: B,
    toggleYearPicker: O,
    handleYearSelect: D,
    handleYear: T,
    isDisabled: P
  } = _E({
    modelValue: g,
    multiCalendars: n,
    range: o,
    highlight: l,
    calendars: b,
    year: v,
    propDates: s,
    month: w,
    filters: u,
    props: e,
    emit: t
  });
  nn(() => {
    e.startDate && (g.value && e.focusStartDate || !g.value) && E(Yt(ut(e.startDate)), 0);
  });
  const I = (he) => he ? { month: fn(he), year: Yt(he) } : { month: null, year: null }, M = () => g.value ? Array.isArray(g.value) ? g.value.map((he) => I(he)) : I(g.value) : I(), V = (he, ve) => {
    const pe = b.value[he], H = M();
    return Array.isArray(H) ? H.some((we) => we.year === pe?.year && we.month === ve) : pe?.year === H.year && ve === H.month;
  }, N = (he, ve, pe) => {
    var H, we;
    const Me = M();
    return Array.isArray(Me) ? v.value(ve) === ((H = Me[pe]) == null ? void 0 : H.year) && he === ((we = Me[pe]) == null ? void 0 : we.month) : !1;
  }, q = (he, ve) => {
    if (o.value.enabled) {
      const pe = M();
      if (Array.isArray(g.value) && Array.isArray(pe)) {
        const H = N(he, ve, 0) || N(he, ve, 1), we = Ko(Ui(ut()), he, v.value(ve));
        return Af(g.value, y.value, we) && !H;
      }
      return !1;
    }
    return !1;
  }, j = z(() => (he) => Bu(p.value, (ve) => {
    var pe;
    const H = V(he, ve.value), we = Cf(
      ve.value,
      rE(v.value(he), s.value.minDate),
      iE(v.value(he), s.value.maxDate)
    ) || y6(s.value.disabledDates, v.value(he), ve.value) || ((pe = u.value.months) == null ? void 0 : pe.includes(ve.value)) || !b6(s.value.allowedDates, v.value(he), ve.value), Me = q(ve.value, he), Re = uE(l.value, ve.value, v.value(he));
    return { active: H, disabled: we, isBetween: Me, highlighted: Re };
  })), ee = (he, ve) => Ko(Ui(ut()), he, v.value(ve)), de = (he, ve) => {
    const pe = g.value ? g.value : Ui(/* @__PURE__ */ new Date());
    g.value = Ko(pe, he, v.value(ve)), t("auto-apply"), t("update-flow-step");
  }, Z = (he, ve) => {
    const pe = ee(he, ve);
    o.value.fixedEnd || o.value.fixedStart ? g.value = hE(pe, g, t, o) : g.value ? S(pe, g.value) && (g.value = v0(g, ee(he, ve), t)) : g.value = [ee(he, ve)], Vt().then(() => {
      _p(g.value, t, e.autoApply, e.modelAuto);
    });
  }, F = (he, ve) => {
    p0(ee(he, ve), g, f.value.limit), t("auto-apply", !0);
  }, Y = (he, ve) => (b.value[ve].month = he, X(ve, b.value[ve].year, he), f.value.enabled ? F(he, ve) : o.value.enabled ? Z(he, ve) : de(he, ve)), se = (he, ve) => {
    E(he, ve), X(ve, he, null);
  }, X = (he, ve, pe) => {
    let H = pe;
    if (!H && H !== 0) {
      const we = M();
      H = Array.isArray(we) ? we[he].month : we.month;
    }
    t("update-month-year", { instance: he, year: ve, month: H });
  };
  return {
    groupedMonths: j,
    groupedYears: C,
    year: v,
    isDisabled: P,
    defaultedMultiCalendars: n,
    defaultedAriaLabels: a,
    defaultedTransitions: r,
    defaultedConfig: i,
    showYearPicker: B,
    modelValue: g,
    presetDate: (he, ve) => {
      mE({
        value: he,
        modelValue: g,
        range: o.value.enabled,
        timezone: ve ? void 0 : d.value.timezone
      }), t("auto-apply");
    },
    setHoverDate: (he, ve) => {
      y.value = ee(he, ve);
    },
    selectMonth: Y,
    selectYear: se,
    toggleYearPicker: O,
    handleYearSelect: D,
    handleYear: T,
    getModelMonthYear: M
  };
}, J6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "MonthPicker",
  props: {
    ...Ki
  },
  emits: [
    "update:internal-model-value",
    "overlay-closed",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year",
    "update-flow-step",
    "mount",
    "invalid-fixed-range",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = lc(), i = li(r, "yearMode"), o = e;
    nn(() => {
      o.shadow || a("mount", null);
    });
    const {
      groupedMonths: l,
      groupedYears: s,
      year: d,
      isDisabled: u,
      defaultedMultiCalendars: f,
      defaultedConfig: _,
      showYearPicker: g,
      modelValue: v,
      presetDate: w,
      setHoverDate: b,
      selectMonth: p,
      selectYear: y,
      toggleYearPicker: S,
      handleYearSelect: E,
      handleYear: C,
      getModelMonthYear: B
    } = Q6(o, a);
    return t({ getSidebarProps: () => ({
      modelValue: v,
      year: d,
      getModelMonthYear: B,
      selectMonth: p,
      selectYear: y,
      handleYear: C
    }), presetDate: w, toggleYearPicker: (O) => S(0, O) }), (O, D) => (ne(), Fe(hp, {
      "multi-calendars": fe(f).count,
      collapse: O.collapse,
      stretch: "",
      "is-mobile": O.isMobile
    }, {
      default: x(({ instance: T }) => [
        O.$slots["top-extra"] ? bt(O.$slots, "top-extra", {
          key: 0,
          value: O.internalModelValue
        }) : ke("", !0),
        O.$slots["month-year"] ? bt(O.$slots, "month-year", Xn(He({ key: 1 }, {
          year: fe(d),
          months: fe(l)(T),
          years: fe(s)(T),
          selectMonth: fe(p),
          selectYear: fe(y),
          instance: T
        }))) : (ne(), Fe(jf, {
          key: 2,
          items: fe(l)(T),
          "arrow-navigation": O.arrowNavigation,
          "is-last": O.autoApply && !fe(_).keepActionRow,
          "esc-close": O.escClose,
          height: fe(_).modeHeight,
          config: O.config,
          "no-overlay-focus": !!(O.noOverlayFocus || O.textInput),
          "use-relative": "",
          type: "month",
          onSelected: (P) => fe(p)(P, T),
          onHoverValue: (P) => fe(b)(P, T)
        }, dr({
          header: x(() => [
            h(fE, He(O.$props, {
              items: fe(s)(T),
              instance: T,
              "show-year-picker": fe(g)[T],
              year: fe(d)(T),
              "is-disabled": (P) => fe(u)(T, P),
              onHandleYear: (P) => fe(C)(T, P),
              onYearSelect: (P) => fe(E)(P, T),
              onToggleYearPicker: (P) => fe(S)(T, P?.flow, P?.show)
            }), dr({ _: 2 }, [
              un(fe(i), (P, I) => ({
                name: P,
                fn: x((M) => [
                  bt(O.$slots, P, Xn(Ca(M)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          _: 2
        }, [
          O.$slots["month-overlay-value"] ? {
            name: "item",
            fn: x(({ item: P }) => [
              bt(O.$slots, "month-overlay-value", {
                text: P.text,
                value: P.value
              })
            ]),
            key: "0"
          } : void 0
        ]), 1032, ["items", "arrow-navigation", "is-last", "esc-close", "height", "config", "no-overlay-focus", "onSelected", "onHoverValue"]))
      ]),
      _: 3
    }, 8, ["multi-calendars", "collapse", "is-mobile"]));
  }
}), X6 = (e, t) => {
  const n = () => {
    e.isTextInputDate && (u.value = Yt(ut(e.startDate)));
  }, { modelValue: a } = Kf(e, t, n), r = Se(null), { defaultedHighlight: i, defaultedMultiDates: o, defaultedFilters: l, defaultedRange: s, propDates: d } = da(e), u = Se();
  nn(() => {
    e.startDate && (a.value && e.focusStartDate || !a.value) && (u.value = Yt(ut(e.startDate)));
  });
  const f = (p) => Array.isArray(a.value) ? a.value.some((y) => Yt(y) === p) : a.value ? Yt(a.value) === p : !1, _ = (p) => s.value.enabled && Array.isArray(a.value) ? Af(a.value, r.value, b(p)) : !1, g = (p) => d.value.allowedDates instanceof Map ? d.value.allowedDates.size ? d.value.allowedDates.has(`${p}`) : !1 : !0, v = (p) => d.value.disabledDates instanceof Map ? d.value.disabledDates.size ? d.value.disabledDates.has(`${p}`) : !1 : !0, w = z(() => Bu(f0(e.yearRange, e.locale, e.reverseYears), (p) => {
    const y = f(p.value), S = Cf(
      p.value,
      Vu(d.value.minDate),
      Vu(d.value.maxDate)
    ) || l.value.years.includes(p.value) || !g(p.value) || v(p.value), E = _(p.value) && !y, C = _0(i.value, p.value);
    return { active: y, disabled: S, isBetween: E, highlighted: C };
  })), b = (p) => _o(Ui(Sf(/* @__PURE__ */ new Date())), p);
  return {
    groupedYears: w,
    modelValue: a,
    focusYear: u,
    setHoverValue: (p) => {
      r.value = _o(Ui(/* @__PURE__ */ new Date()), p);
    },
    selectYear: (p) => {
      var y;
      if (t("update-month-year", { instance: 0, year: p }), o.value.enabled)
        return a.value ? Array.isArray(a.value) && (((y = a.value) == null ? void 0 : y.map((S) => Yt(S))).includes(p) ? a.value = a.value.filter((S) => Yt(S) !== p) : a.value.push(_o(rr(ut()), p))) : a.value = [_o(rr(Sf(ut())), p)], t("auto-apply", !0);
      s.value.enabled ? (a.value = v0(a, b(p), t), Vt().then(() => {
        _p(a.value, t, e.autoApply, e.modelAuto);
      })) : (a.value = b(p), t("auto-apply"));
    }
  };
}, Z6 = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "YearPicker",
  props: {
    ...Ki
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { groupedYears: i, modelValue: o, focusYear: l, selectYear: s, setHoverValue: d } = X6(r, a), { defaultedConfig: u } = da(r);
    return t({ getSidebarProps: () => ({
      modelValue: o,
      selectYear: s
    }) }), (f, _) => (ne(), Be("div", null, [
      f.$slots["top-extra"] ? bt(f.$slots, "top-extra", {
        key: 0,
        value: f.internalModelValue
      }) : ke("", !0),
      f.$slots["month-year"] ? bt(f.$slots, "month-year", Xn(He({ key: 1 }, {
        years: fe(i),
        selectYear: fe(s)
      }))) : (ne(), Fe(jf, {
        key: 2,
        items: fe(i),
        "is-last": f.autoApply && !fe(u).keepActionRow,
        height: fe(u).modeHeight,
        config: f.config,
        "no-overlay-focus": !!(f.noOverlayFocus || f.textInput),
        "focus-value": fe(l),
        type: "year",
        "use-relative": "",
        onSelected: fe(s),
        onHoverValue: fe(d)
      }, dr({ _: 2 }, [
        f.$slots["year-overlay-value"] ? {
          name: "item",
          fn: x(({ item: g }) => [
            bt(f.$slots, "year-overlay-value", {
              text: g.text,
              value: g.value
            })
          ]),
          key: "0"
        } : void 0
      ]), 1032, ["items", "is-last", "height", "config", "no-overlay-focus", "focus-value", "onSelected", "onHoverValue"]))
    ]));
  }
}), eq = {
  key: 0,
  class: "dp__time_input"
}, tq = ["data-compact", "data-collapsed"], nq = ["data-test-id", "aria-label", "onKeydown", "onClick", "onMousedown"], aq = ["aria-label", "disabled", "data-test-id", "onKeydown", "onClick"], rq = ["data-test-id", "aria-label", "onKeydown", "onClick", "onMousedown"], iq = { key: 0 }, oq = ["aria-label", "data-compact"], sq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "TimeInput",
  props: {
    hours: { type: Number, default: 0 },
    minutes: { type: Number, default: 0 },
    seconds: { type: Number, default: 0 },
    closeTimePickerBtn: { type: Object, default: null },
    order: { type: Number, default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: { type: Function, default: () => !1 },
    ...Ki
  },
  emits: [
    "set-hours",
    "set-minutes",
    "update:hours",
    "update:minutes",
    "update:seconds",
    "reset-flow",
    "mounted",
    "overlay-closed",
    "overlay-opened",
    "am-pm-change"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { setTimePickerElements: i, setTimePickerBackRef: o } = al(), {
      defaultedAriaLabels: l,
      defaultedTransitions: s,
      defaultedFilters: d,
      defaultedConfig: u,
      defaultedRange: f,
      defaultedMultiCalendars: _
    } = da(r), { transitionName: g, showTransition: v } = Yf(s), w = oa({
      hours: !1,
      minutes: !1,
      seconds: !1
    }), b = Se("AM"), p = Se(null), y = Se([]), S = Se(), E = Se(!1);
    nn(() => {
      a("mounted");
    });
    const C = (K) => Bn(/* @__PURE__ */ new Date(), {
      hours: K.hours,
      minutes: K.minutes,
      seconds: r.enableSeconds ? K.seconds : 0,
      milliseconds: 0
    }), B = z(
      () => (K) => Z(K, r[K]) || D(K, r[K])
    ), O = z(() => ({ hours: r.hours, minutes: r.minutes, seconds: r.seconds })), D = (K, Ce) => f.value.enabled && !f.value.disableTimeRangeValidation ? !r.validateTime(K, Ce) : !1, T = (K, Ce) => {
      if (f.value.enabled && !f.value.disableTimeRangeValidation) {
        const Te = Ce ? +r[`${K}Increment`] : -+r[`${K}Increment`], ie = r[K] + Te;
        return !r.validateTime(K, ie);
      }
      return !1;
    }, P = z(() => (K) => !he(+r[K] + +r[`${K}Increment`], K) || T(K, !0)), I = z(() => (K) => !he(+r[K] - +r[`${K}Increment`], K) || T(K, !1)), M = (K, Ce) => PI(Bn(ut(), K), Ce), V = (K, Ce) => Z$(Bn(ut(), K), Ce), N = z(
      () => ({
        dp__time_col: !0,
        dp__time_col_block: !r.timePickerInline,
        dp__time_col_reg_block: !r.enableSeconds && r.is24 && !r.timePickerInline,
        dp__time_col_reg_inline: !r.enableSeconds && r.is24 && r.timePickerInline,
        dp__time_col_reg_with_button: !r.enableSeconds && !r.is24,
        dp__time_col_sec: r.enableSeconds && r.is24,
        dp__time_col_sec_with_button: r.enableSeconds && !r.is24
      })
    ), q = z(
      () => r.timePickerInline && f.value.enabled && !_.value.count
    ), j = z(() => {
      const K = [{ type: "hours" }];
      return r.enableMinutes && K.push({ type: "", separator: !0 }, {
        type: "minutes"
      }), r.enableSeconds && K.push({ type: "", separator: !0 }, {
        type: "seconds"
      }), K;
    }), ee = z(() => j.value.filter((K) => !K.separator)), de = z(() => (K) => {
      if (K === "hours") {
        const Ce = Re(+r.hours);
        return { text: Ce < 10 ? `0${Ce}` : `${Ce}`, value: Ce };
      }
      return { text: r[K] < 10 ? `0${r[K]}` : `${r[K]}`, value: r[K] };
    }), Z = (K, Ce) => {
      var Te;
      if (!r.disabledTimesConfig) return !1;
      const ie = r.disabledTimesConfig(r.order, K === "hours" ? Ce : void 0);
      return ie[K] ? !!((Te = ie[K]) != null && Te.includes(Ce)) : !0;
    }, F = (K, Ce) => Ce !== "hours" || b.value === "AM" ? K : K + 12, Y = (K) => {
      const Ce = r.is24 ? 24 : 12, Te = K === "hours" ? Ce : 60, ie = +r[`${K}GridIncrement`], ge = K === "hours" && !r.is24 ? ie : 0, Pe = [];
      for (let Ie = ge; Ie < Te; Ie += ie)
        Pe.push({ value: r.is24 ? Ie : F(Ie, K), text: Ie < 10 ? `0${Ie}` : `${Ie}` });
      return K === "hours" && !r.is24 && Pe.unshift({ value: b.value === "PM" ? 12 : 0, text: "12" }), Bu(Pe, (Ie) => ({ active: !1, disabled: d.value.times[K].includes(Ie.value) || !he(Ie.value, K) || Z(K, Ie.value) || D(K, Ie.value) }));
    }, se = (K) => K >= 0 ? K : 59, X = (K) => K >= 0 ? K : 23, he = (K, Ce) => {
      const Te = r.minTime ? C(Qg(r.minTime)) : null, ie = r.maxTime ? C(Qg(r.maxTime)) : null, ge = C(
        Qg(
          O.value,
          Ce,
          Ce === "minutes" || Ce === "seconds" ? se(K) : X(K)
        )
      );
      return Te && ie ? (Ou(ge, ie) || iu(ge, ie)) && (nc(ge, Te) || iu(ge, Te)) : Te ? nc(ge, Te) || iu(ge, Te) : ie ? Ou(ge, ie) || iu(ge, ie) : !0;
    }, ve = (K) => r[`no${K[0].toUpperCase() + K.slice(1)}Overlay`], pe = (K) => {
      ve(K) || (w[K] = !w[K], w[K] ? (E.value = !0, a("overlay-opened", K)) : (E.value = !1, a("overlay-closed", K)));
    }, H = (K) => K === "hours" ? ts : K === "minutes" ? Ks : Pu, we = () => {
      S.value && clearTimeout(S.value);
    }, Me = (K, Ce = !0, Te) => {
      const ie = Ce ? M : V, ge = Ce ? +r[`${K}Increment`] : -+r[`${K}Increment`];
      he(+r[K] + ge, K) && a(
        `update:${K}`,
        H(K)(ie({ [K]: +r[K] }, { [K]: +r[`${K}Increment`] }))
      ), !(Te != null && Te.keyboard) && u.value.timeArrowHoldThreshold && (S.value = setTimeout(() => {
        Me(K, Ce);
      }, u.value.timeArrowHoldThreshold));
    }, Re = (K) => r.is24 ? K : (K >= 12 ? b.value = "PM" : b.value = "AM", o6(K)), ce = () => {
      b.value === "PM" ? (b.value = "AM", a("update:hours", r.hours - 12)) : (b.value = "PM", a("update:hours", r.hours + 12)), a("am-pm-change", b.value);
    }, te = (K) => {
      w[K] = !0;
    }, G = (K, Ce, Te) => {
      if (K && r.arrowNavigation) {
        Array.isArray(y.value[Ce]) ? y.value[Ce][Te] = K : y.value[Ce] = [K];
        const ie = y.value.reduce(
          (ge, Pe) => Pe.map((Ie, Je) => [...ge[Je] || [], Pe[Je]]),
          []
        );
        o(r.closeTimePickerBtn), p.value && (ie[1] = ie[1].concat(p.value)), i(ie, r.order);
      }
    }, le = (K, Ce) => (pe(K), a(`update:${K}`, Ce));
    return t({ openChildCmp: te }), (K, Ce) => {
      var Te;
      return K.disabled ? ke("", !0) : (ne(), Be("div", eq, [
        (ne(!0), Be(Qe, null, un(j.value, (ie, ge) => {
          var Pe, Ie, Je;
          return ne(), Be("div", {
            key: ge,
            class: Ee(N.value),
            "data-compact": q.value && !K.enableSeconds,
            "data-collapsed": q.value && K.enableSeconds
          }, [
            ie.separator ? (ne(), Be(Qe, { key: 0 }, [
              E.value ? ke("", !0) : (ne(), Be(Qe, { key: 0 }, [
                ae(":")
              ], 64))
            ], 64)) : (ne(), Be(Qe, { key: 1 }, [
              A("button", {
                ref_for: !0,
                ref: (_e) => G(_e, ge, 0),
                type: "button",
                class: Ee({
                  dp__btn: !0,
                  dp__inc_dec_button: !K.timePickerInline,
                  dp__inc_dec_button_inline: K.timePickerInline,
                  dp__tp_inline_btn_top: K.timePickerInline,
                  dp__inc_dec_button_disabled: P.value(ie.type),
                  "dp--hidden-el": E.value
                }),
                "data-test-id": `${ie.type}-time-inc-btn-${r.order}`,
                "aria-label": (Pe = fe(l)) == null ? void 0 : Pe.incrementValue(ie.type),
                tabindex: "0",
                onKeydown: (_e) => fe(Lr)(_e, () => Me(ie.type, !0, { keyboard: !0 }), !0),
                onClick: (_e) => fe(u).timeArrowHoldThreshold ? void 0 : Me(ie.type, !0),
                onMousedown: (_e) => fe(u).timeArrowHoldThreshold ? Me(ie.type, !0) : void 0,
                onMouseup: we
              }, [
                r.timePickerInline ? (ne(), Be(Qe, { key: 1 }, [
                  K.$slots["tp-inline-arrow-up"] ? bt(K.$slots, "tp-inline-arrow-up", { key: 0 }) : (ne(), Be(Qe, { key: 1 }, [
                    Ce[2] || (Ce[2] = A("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1)),
                    Ce[3] || (Ce[3] = A("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1))
                  ], 64))
                ], 64)) : (ne(), Be(Qe, { key: 0 }, [
                  K.$slots["arrow-up"] ? bt(K.$slots, "arrow-up", { key: 0 }) : ke("", !0),
                  K.$slots["arrow-up"] ? ke("", !0) : (ne(), Fe(fe(c0), { key: 1 }))
                ], 64))
              ], 42, nq),
              A("button", {
                ref_for: !0,
                ref: (_e) => G(_e, ge, 1),
                type: "button",
                "aria-label": `${de.value(ie.type).text}-${(Ie = fe(l)) == null ? void 0 : Ie.openTpOverlay(ie.type)}`,
                class: Ee({
                  dp__time_display: !0,
                  dp__time_display_block: !K.timePickerInline,
                  dp__time_display_inline: K.timePickerInline,
                  "dp--time-invalid": B.value(ie.type),
                  "dp--time-overlay-btn": !B.value(ie.type),
                  "dp--hidden-el": E.value
                }),
                disabled: ve(ie.type),
                tabindex: "0",
                "data-test-id": `${ie.type}-toggle-overlay-btn-${r.order}`,
                onKeydown: (_e) => fe(Lr)(_e, () => pe(ie.type), !0),
                onClick: (_e) => pe(ie.type)
              }, [
                K.$slots[ie.type] ? bt(K.$slots, ie.type, {
                  key: 0,
                  text: de.value(ie.type).text,
                  value: de.value(ie.type).value
                }) : ke("", !0),
                K.$slots[ie.type] ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
                  ae(W(de.value(ie.type).text), 1)
                ], 64))
              ], 42, aq),
              A("button", {
                ref_for: !0,
                ref: (_e) => G(_e, ge, 2),
                type: "button",
                class: Ee({
                  dp__btn: !0,
                  dp__inc_dec_button: !K.timePickerInline,
                  dp__inc_dec_button_inline: K.timePickerInline,
                  dp__tp_inline_btn_bottom: K.timePickerInline,
                  dp__inc_dec_button_disabled: I.value(ie.type),
                  "dp--hidden-el": E.value
                }),
                "data-test-id": `${ie.type}-time-dec-btn-${r.order}`,
                "aria-label": (Je = fe(l)) == null ? void 0 : Je.decrementValue(ie.type),
                tabindex: "0",
                onKeydown: (_e) => fe(Lr)(_e, () => Me(ie.type, !1, { keyboard: !0 }), !0),
                onClick: (_e) => fe(u).timeArrowHoldThreshold ? void 0 : Me(ie.type, !1),
                onMousedown: (_e) => fe(u).timeArrowHoldThreshold ? Me(ie.type, !1) : void 0,
                onMouseup: we
              }, [
                r.timePickerInline ? (ne(), Be(Qe, { key: 1 }, [
                  K.$slots["tp-inline-arrow-down"] ? bt(K.$slots, "tp-inline-arrow-down", { key: 0 }) : (ne(), Be(Qe, { key: 1 }, [
                    Ce[4] || (Ce[4] = A("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1)),
                    Ce[5] || (Ce[5] = A("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1))
                  ], 64))
                ], 64)) : (ne(), Be(Qe, { key: 0 }, [
                  K.$slots["arrow-down"] ? bt(K.$slots, "arrow-down", { key: 0 }) : ke("", !0),
                  K.$slots["arrow-down"] ? ke("", !0) : (ne(), Fe(fe(u0), { key: 1 }))
                ], 64))
              ], 42, rq)
            ], 64))
          ], 10, tq);
        }), 128)),
        K.is24 ? ke("", !0) : (ne(), Be("div", iq, [
          K.$slots["am-pm-button"] ? bt(K.$slots, "am-pm-button", {
            key: 0,
            toggle: ce,
            value: b.value
          }) : ke("", !0),
          K.$slots["am-pm-button"] ? ke("", !0) : (ne(), Be("button", {
            key: 1,
            ref_key: "amPmButton",
            ref: p,
            type: "button",
            class: "dp__pm_am_button",
            role: "button",
            "aria-label": (Te = fe(l)) == null ? void 0 : Te.amPmButton,
            tabindex: "0",
            "data-compact": q.value,
            onClick: ce,
            onKeydown: Ce[0] || (Ce[0] = (ie) => fe(Lr)(ie, () => ce(), !0))
          }, W(b.value), 41, oq))
        ])),
        (ne(!0), Be(Qe, null, un(ee.value, (ie, ge) => (ne(), Fe(Ur, {
          key: ge,
          name: fe(g)(w[ie.type]),
          css: fe(v)
        }, {
          default: x(() => {
            var Pe, Ie;
            return [
              w[ie.type] ? (ne(), Fe(jf, {
                key: 0,
                items: Y(ie.type),
                "is-last": K.autoApply && !fe(u).keepActionRow,
                "esc-close": K.escClose,
                type: ie.type,
                "text-input": K.textInput,
                config: K.config,
                "arrow-navigation": K.arrowNavigation,
                "aria-labels": K.ariaLabels,
                "overlay-label": (Ie = (Pe = fe(l)).timeOverlay) == null ? void 0 : Ie.call(Pe, ie.type),
                onSelected: (Je) => le(ie.type, Je),
                onToggle: (Je) => pe(ie.type),
                onResetFlow: Ce[1] || (Ce[1] = (Je) => K.$emit("reset-flow"))
              }, dr({
                "button-icon": x(() => [
                  K.$slots["clock-icon"] ? bt(K.$slots, "clock-icon", { key: 0 }) : ke("", !0),
                  K.$slots["clock-icon"] ? ke("", !0) : (ne(), Fe(Hu(K.timePickerInline ? fe(Gu) : fe(l0)), { key: 1 }))
                ]),
                _: 2
              }, [
                K.$slots[`${ie.type}-overlay-value`] ? {
                  name: "item",
                  fn: x(({ item: Je }) => [
                    bt(K.$slots, `${ie.type}-overlay-value`, {
                      text: Je.text,
                      value: Je.value
                    })
                  ]),
                  key: "0"
                } : void 0,
                K.$slots[`${ie.type}-overlay-header`] ? {
                  name: "header",
                  fn: x(() => [
                    bt(K.$slots, `${ie.type}-overlay-header`, {
                      toggle: () => pe(ie.type)
                    })
                  ]),
                  key: "1"
                } : void 0
              ]), 1032, ["items", "is-last", "esc-close", "type", "text-input", "config", "arrow-navigation", "aria-labels", "overlay-label", "onSelected", "onToggle"])) : ke("", !0)
            ];
          }),
          _: 2
        }, 1032, ["name", "css"]))), 128))
      ]));
    };
  }
}), lq = ["data-dp-mobile"], cq = ["aria-label", "tabindex"], uq = ["role", "aria-label", "tabindex"], dq = ["aria-label"], pE = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePicker",
  props: {
    hours: { type: [Number, Array], default: 0 },
    minutes: { type: [Number, Array], default: 0 },
    seconds: { type: [Number, Array], default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: {
      type: Function,
      default: () => !1
    },
    ...Ki
  },
  emits: [
    "update:hours",
    "update:minutes",
    "update:seconds",
    "mount",
    "reset-flow",
    "overlay-opened",
    "overlay-closed",
    "am-pm-change"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { buildMatrix: i, setTimePicker: o } = al(), l = lc(), { defaultedTransitions: s, defaultedAriaLabels: d, defaultedTextInput: u, defaultedConfig: f, defaultedRange: _ } = da(r), { transitionName: g, showTransition: v } = Yf(s), { hideNavigationButtons: w } = pp(), b = Se(null), p = Se(null), y = Se([]), S = Se(null), E = Se(!1);
    nn(() => {
      a("mount"), !r.timePicker && r.arrowNavigation ? i([$a(b.value)], "time") : o(!0, r.timePicker);
    });
    const C = z(() => _.value.enabled && r.modelAuto ? ZI(r.internalModelValue) : !0), B = Se(!1), O = (Z) => ({
      hours: Array.isArray(r.hours) ? r.hours[Z] : r.hours,
      minutes: Array.isArray(r.minutes) ? r.minutes[Z] : r.minutes,
      seconds: Array.isArray(r.seconds) ? r.seconds[Z] : r.seconds
    }), D = z(() => {
      const Z = [];
      if (_.value.enabled)
        for (let F = 0; F < 2; F++)
          Z.push(O(F));
      else
        Z.push(O(0));
      return Z;
    }), T = (Z, F = !1, Y = "") => {
      F || a("reset-flow"), B.value = Z, a(Z ? "overlay-opened" : "overlay-closed", br.time), r.arrowNavigation && o(Z), Vt(() => {
        Y !== "" && y.value[0] && y.value[0].openChildCmp(Y);
      });
    }, P = z(() => ({
      dp__btn: !0,
      dp__button: !0,
      dp__button_bottom: r.autoApply && !f.value.keepActionRow
    })), I = li(l, "timePicker"), M = (Z, F, Y) => _.value.enabled ? F === 0 ? [Z, D.value[1][Y]] : [D.value[0][Y], Z] : Z, V = (Z) => {
      a("update:hours", Z);
    }, N = (Z) => {
      a("update:minutes", Z);
    }, q = (Z) => {
      a("update:seconds", Z);
    }, j = () => {
      if (S.value && !u.value.enabled && !r.noOverlayFocus) {
        const Z = eE(S.value);
        Z && Z.focus({ preventScroll: !0 });
      }
    }, ee = (Z) => {
      E.value = !1, a("overlay-closed", Z);
    }, de = (Z) => {
      E.value = !0, a("overlay-opened", Z);
    };
    return t({ toggleTimePicker: T }), (Z, F) => {
      var Y;
      return ne(), Be("div", {
        class: "dp--tp-wrap",
        "data-dp-mobile": Z.isMobile
      }, [
        !Z.timePicker && !Z.timePickerInline ? ln((ne(), Be("button", {
          key: 0,
          ref_key: "openTimePickerBtn",
          ref: b,
          type: "button",
          class: Ee({ ...P.value, "dp--hidden-el": B.value }),
          "aria-label": (Y = fe(d)) == null ? void 0 : Y.openTimePicker,
          tabindex: Z.noOverlayFocus ? void 0 : 0,
          "data-test-id": "open-time-picker-btn",
          onKeydown: F[0] || (F[0] = (se) => fe(Lr)(se, () => T(!0))),
          onClick: F[1] || (F[1] = (se) => T(!0))
        }, [
          Z.$slots["clock-icon"] ? bt(Z.$slots, "clock-icon", { key: 0 }) : ke("", !0),
          Z.$slots["clock-icon"] ? ke("", !0) : (ne(), Fe(fe(l0), { key: 1 }))
        ], 42, cq)), [
          [Sa, !fe(w)(Z.hideNavigation, "time")]
        ]) : ke("", !0),
        h(Ur, {
          name: fe(g)(B.value),
          css: fe(v) && !Z.timePickerInline
        }, {
          default: x(() => {
            var se, X;
            return [
              B.value || Z.timePicker || Z.timePickerInline ? (ne(), Be("div", {
                key: 0,
                ref_key: "overlayRef",
                ref: S,
                role: Z.timePickerInline ? void 0 : "dialog",
                class: Ee({
                  dp__overlay: !Z.timePickerInline,
                  "dp--overlay-absolute": !r.timePicker && !Z.timePickerInline,
                  "dp--overlay-relative": r.timePicker
                }),
                style: Xe(Z.timePicker ? { height: `${fe(f).modeHeight}px` } : void 0),
                "aria-label": (se = fe(d)) == null ? void 0 : se.timePicker,
                tabindex: Z.timePickerInline ? void 0 : 0
              }, [
                A("div", {
                  class: Ee(
                    Z.timePickerInline ? "dp__time_picker_inline_container" : "dp__overlay_container dp__container_flex dp__time_picker_overlay_container"
                  ),
                  style: { display: "flex" }
                }, [
                  Z.$slots["time-picker-overlay"] ? bt(Z.$slots, "time-picker-overlay", {
                    key: 0,
                    hours: e.hours,
                    minutes: e.minutes,
                    seconds: e.seconds,
                    setHours: V,
                    setMinutes: N,
                    setSeconds: q
                  }) : ke("", !0),
                  Z.$slots["time-picker-overlay"] ? ke("", !0) : (ne(), Be("div", {
                    key: 1,
                    class: Ee(Z.timePickerInline ? "dp__flex" : "dp__overlay_row dp__flex_row")
                  }, [
                    (ne(!0), Be(Qe, null, un(D.value, (he, ve) => ln((ne(), Fe(sq, He({
                      key: ve,
                      ref_for: !0
                    }, {
                      ...Z.$props,
                      order: ve,
                      hours: he.hours,
                      minutes: he.minutes,
                      seconds: he.seconds,
                      closeTimePickerBtn: p.value,
                      disabledTimesConfig: e.disabledTimesConfig,
                      disabled: ve === 0 ? fe(_).fixedStart : fe(_).fixedEnd
                    }, {
                      ref_for: !0,
                      ref_key: "timeInputRefs",
                      ref: y,
                      "validate-time": (pe, H) => e.validateTime(pe, M(H, ve, pe)),
                      "onUpdate:hours": (pe) => V(M(pe, ve, "hours")),
                      "onUpdate:minutes": (pe) => N(M(pe, ve, "minutes")),
                      "onUpdate:seconds": (pe) => q(M(pe, ve, "seconds")),
                      onMounted: j,
                      onOverlayClosed: ee,
                      onOverlayOpened: de,
                      onAmPmChange: F[2] || (F[2] = (pe) => Z.$emit("am-pm-change", pe))
                    }), dr({ _: 2 }, [
                      un(fe(I), (pe, H) => ({
                        name: pe,
                        fn: x((we) => [
                          bt(Z.$slots, pe, He({ ref_for: !0 }, we))
                        ])
                      }))
                    ]), 1040, ["validate-time", "onUpdate:hours", "onUpdate:minutes", "onUpdate:seconds"])), [
                      [Sa, ve === 0 ? !0 : C.value]
                    ])), 128))
                  ], 2)),
                  !Z.timePicker && !Z.timePickerInline ? ln((ne(), Be("button", {
                    key: 2,
                    ref_key: "closeTimePickerBtn",
                    ref: p,
                    type: "button",
                    class: Ee({ ...P.value, "dp--hidden-el": E.value }),
                    "aria-label": (X = fe(d)) == null ? void 0 : X.closeTimePicker,
                    tabindex: "0",
                    onKeydown: F[3] || (F[3] = (he) => fe(Lr)(he, () => T(!1))),
                    onClick: F[4] || (F[4] = (he) => T(!1))
                  }, [
                    Z.$slots["calendar-icon"] ? bt(Z.$slots, "calendar-icon", { key: 0 }) : ke("", !0),
                    Z.$slots["calendar-icon"] ? ke("", !0) : (ne(), Fe(fe(Gu), { key: 1 }))
                  ], 42, dq)), [
                    [Sa, !fe(w)(Z.hideNavigation, "time")]
                  ]) : ke("", !0)
                ], 2)
              ], 14, uq)) : ke("", !0)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ], 8, lq);
    };
  }
}), vE = (e, t, n, a) => {
  const { defaultedRange: r } = da(e), i = (S, E) => Array.isArray(t[S]) ? t[S][E] : t[S], o = (S) => e.enableSeconds ? Array.isArray(t.seconds) ? t.seconds[S] : t.seconds : 0, l = (S, E) => S ? E !== void 0 ? Us(S, i("hours", E), i("minutes", E), o(E)) : Us(S, t.hours, t.minutes, o()) : GI(ut(), o(E)), s = (S, E) => {
    t[S] = E;
  }, d = z(() => e.modelAuto && r.value.enabled ? Array.isArray(n.value) ? n.value.length > 1 : !1 : r.value.enabled), u = (S, E) => {
    const C = Object.fromEntries(
      Object.keys(t).map((B) => B === S ? [B, E] : [B, t[B]].slice())
    );
    if (d.value && !r.value.disableTimeRangeValidation) {
      const B = (D) => n.value ? Us(
        n.value[D],
        C.hours[D],
        C.minutes[D],
        C.seconds[D]
      ) : null, O = (D) => KI(n.value[D], 0);
      return !(mn(B(0), B(1)) && (nc(B(0), O(1)) || Ou(B(1), O(0))));
    }
    return !0;
  }, f = (S, E) => {
    u(S, E) && (s(S, E), a && a());
  }, _ = (S) => {
    f("hours", S);
  }, g = (S) => {
    f("minutes", S);
  }, v = (S) => {
    f("seconds", S);
  }, w = (S, E, C, B) => {
    E && _(S), !E && !C && g(S), C && v(S), n.value && B(n.value);
  }, b = (S) => {
    if (S) {
      const E = Array.isArray(S), C = E ? [+S[0].hours, +S[1].hours] : +S.hours, B = E ? [+S[0].minutes, +S[1].minutes] : +S.minutes, O = E ? [+S[0].seconds, +S[1].seconds] : +S.seconds;
      s("hours", C), s("minutes", B), e.enableSeconds && s("seconds", O);
    }
  }, p = (S, E) => {
    const C = {
      hours: Array.isArray(t.hours) ? t.hours[S] : t.hours,
      disabledArr: []
    };
    return (E || E === 0) && (C.hours = E), Array.isArray(e.disabledTimes) && (C.disabledArr = r.value.enabled && Array.isArray(e.disabledTimes[S]) ? e.disabledTimes[S] : e.disabledTimes), C;
  }, y = z(() => (S, E) => {
    var C;
    if (Array.isArray(e.disabledTimes)) {
      const { disabledArr: B, hours: O } = p(S, E), D = B.filter((T) => +T.hours === O);
      return ((C = D[0]) == null ? void 0 : C.minutes) === "*" ? { hours: [O], minutes: void 0, seconds: void 0 } : {
        hours: [],
        minutes: D?.map((T) => +T.minutes) ?? [],
        seconds: D?.map((T) => T.seconds ? +T.seconds : void 0) ?? []
      };
    }
    return { hours: [], minutes: [], seconds: [] };
  });
  return {
    setTime: s,
    updateHours: _,
    updateMinutes: g,
    updateSeconds: v,
    getSetDateTime: l,
    updateTimeValues: w,
    getSecondsValue: o,
    assignStartTime: b,
    validateTime: u,
    disabledTimesConfig: y
  };
}, fq = (e, t) => {
  const n = () => {
    e.isTextInputDate && E();
  }, { modelValue: a, time: r } = Kf(e, t, n), { defaultedStartTime: i, defaultedRange: o, defaultedTz: l } = da(e), { updateTimeValues: s, getSetDateTime: d, setTime: u, assignStartTime: f, disabledTimesConfig: _, validateTime: g } = vE(e, r, a, v);
  function v() {
    t("update-flow-step");
  }
  const w = (B) => {
    const { hours: O, minutes: D, seconds: T } = B;
    return { hours: +O, minutes: +D, seconds: T ? +T : 0 };
  }, b = () => {
    if (e.startTime) {
      if (Array.isArray(e.startTime)) {
        const O = w(e.startTime[0]), D = w(e.startTime[1]);
        return [Bn(ut(), O), Bn(ut(), D)];
      }
      const B = w(e.startTime);
      return Bn(ut(), B);
    }
    return o.value.enabled ? [null, null] : null;
  }, p = () => {
    if (o.value.enabled) {
      const [B, O] = b();
      a.value = [
        Kr(d(B, 0), l.value.timezone),
        Kr(d(O, 1), l.value.timezone)
      ];
    } else
      a.value = Kr(d(b()), l.value.timezone);
  }, y = (B) => Array.isArray(B) ? [Kl(ut(B[0])), Kl(ut(B[1]))] : [Kl(B ?? ut())], S = (B, O, D) => {
    u("hours", B), u("minutes", O), u("seconds", e.enableSeconds ? D : 0);
  }, E = () => {
    const [B, O] = y(a.value);
    return o.value.enabled ? S(
      [B.hours, O.hours],
      [B.minutes, O.minutes],
      [B.seconds, O.seconds]
    ) : S(B.hours, B.minutes, B.seconds);
  };
  nn(() => {
    if (!e.shadow)
      return f(i.value), a.value ? E() : p();
  });
  const C = () => {
    Array.isArray(a.value) ? a.value = a.value.map((B, O) => B && d(B, O)) : a.value = d(a.value), t("time-update");
  };
  return {
    modelValue: a,
    time: r,
    disabledTimesConfig: _,
    updateTime: (B, O = !0, D = !1) => {
      s(B, O, D, C);
    },
    validateTime: g
  };
}, mq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePickerSolo",
  props: {
    ...Ki
  },
  emits: [
    "update:internal-model-value",
    "time-update",
    "am-pm-change",
    "mount",
    "reset-flow",
    "update-flow-step",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = lc(), o = li(i, "timePicker"), l = Se(null), { time: s, modelValue: d, disabledTimesConfig: u, updateTime: f, validateTime: _ } = fq(r, a);
    return nn(() => {
      r.shadow || a("mount", null);
    }), t({ getSidebarProps: () => ({
      modelValue: d,
      time: s,
      updateTime: f
    }), toggleTimePicker: (g, v = !1, w = "") => {
      var b;
      (b = l.value) == null || b.toggleTimePicker(g, v, w);
    } }), (g, v) => (ne(), Fe(hp, {
      "multi-calendars": 0,
      stretch: "",
      "is-mobile": g.isMobile
    }, {
      default: x(() => [
        h(pE, He({
          ref_key: "tpRef",
          ref: l
        }, g.$props, {
          hours: fe(s).hours,
          minutes: fe(s).minutes,
          seconds: fe(s).seconds,
          "internal-model-value": g.internalModelValue,
          "disabled-times-config": fe(u),
          "validate-time": fe(_),
          "onUpdate:hours": v[0] || (v[0] = (w) => fe(f)(w)),
          "onUpdate:minutes": v[1] || (v[1] = (w) => fe(f)(w, !1)),
          "onUpdate:seconds": v[2] || (v[2] = (w) => fe(f)(w, !1, !0)),
          onAmPmChange: v[3] || (v[3] = (w) => g.$emit("am-pm-change", w)),
          onResetFlow: v[4] || (v[4] = (w) => g.$emit("reset-flow")),
          onOverlayClosed: v[5] || (v[5] = (w) => g.$emit("overlay-toggle", { open: !1, overlay: w })),
          onOverlayOpened: v[6] || (v[6] = (w) => g.$emit("overlay-toggle", { open: !0, overlay: w }))
        }), dr({ _: 2 }, [
          un(fe(o), (w, b) => ({
            name: w,
            fn: x((p) => [
              bt(g.$slots, w, Xn(Ca(p)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"])
      ]),
      _: 3
    }, 8, ["is-mobile"]));
  }
}), hq = { class: "dp--header-wrap" }, _q = {
  key: 0,
  class: "dp__month_year_wrap"
}, pq = { key: 0 }, vq = { class: "dp__month_year_wrap" }, gq = ["data-dp-element", "aria-label", "data-test-id", "onClick", "onKeydown"], yq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DpHeader",
  props: {
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    instance: { type: Number, default: 0 },
    years: { type: Array, default: () => [] },
    months: { type: Array, default: () => [] },
    ...Ki
  },
  emits: ["update-month-year", "mount", "reset-flow", "overlay-closed", "overlay-opened"],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      defaultedTransitions: i,
      defaultedAriaLabels: o,
      defaultedMultiCalendars: l,
      defaultedFilters: s,
      defaultedConfig: d,
      defaultedHighlight: u,
      propDates: f,
      defaultedUI: _
    } = da(r), { transitionName: g, showTransition: v } = Yf(i), { buildMatrix: w } = al(), { handleMonthYearChange: b, isDisabled: p, updateMonthYear: y } = N6(r, a), { showLeftIcon: S, showRightIcon: E } = pp(), C = Se(!1), B = Se(!1), O = Se(!1), D = Se([null, null, null, null]);
    nn(() => {
      a("mount");
    });
    const T = (X) => ({
      get: () => r[X],
      set: (he) => {
        const ve = X === Li.month ? Li.year : Li.month;
        a("update-month-year", { [X]: he, [ve]: r[ve] }), X === Li.month ? ee(!0) : de(!0);
      }
    }), P = z(T(Li.month)), I = z(T(Li.year)), M = z(() => (X) => ({
      month: r.month,
      year: r.year,
      items: X === Li.month ? r.months : r.years,
      instance: r.instance,
      updateMonthYear: y,
      toggle: X === Li.month ? ee : de
    })), V = z(() => r.months.find((he) => he.value === r.month) || { text: "", value: 0 }), N = z(() => Bu(r.months, (X) => {
      const he = r.month === X.value, ve = Cf(
        X.value,
        rE(r.year, f.value.minDate),
        iE(r.year, f.value.maxDate)
      ) || s.value.months.includes(X.value), pe = uE(u.value, X.value, r.year);
      return { active: he, disabled: ve, highlighted: pe };
    })), q = z(() => Bu(r.years, (X) => {
      const he = r.year === X.value, ve = Cf(
        X.value,
        Vu(f.value.minDate),
        Vu(f.value.maxDate)
      ) || s.value.years.includes(X.value), pe = _0(u.value, X.value);
      return { active: he, disabled: ve, highlighted: pe };
    })), j = (X, he, ve) => {
      ve !== void 0 ? X.value = ve : X.value = !X.value, X.value ? (O.value = !0, a("overlay-opened", he)) : (O.value = !1, a("overlay-closed", he));
    }, ee = (X = !1, he) => {
      Z(X), j(C, br.month, he);
    }, de = (X = !1, he) => {
      Z(X), j(B, br.year, he);
    }, Z = (X) => {
      X || a("reset-flow");
    }, F = (X, he) => {
      r.arrowNavigation && (D.value[he] = $a(X), w(D.value, "monthYear"));
    }, Y = z(() => {
      var X, he, ve, pe, H, we;
      return [
        {
          type: Li.month,
          index: 1,
          toggle: ee,
          modelValue: P.value,
          updateModelValue: (Me) => P.value = Me,
          text: V.value.text,
          showSelectionGrid: C.value,
          items: N.value,
          ariaLabel: (X = o.value) == null ? void 0 : X.openMonthsOverlay,
          overlayLabel: ((ve = (he = o.value).monthPicker) == null ? void 0 : ve.call(he, !0)) ?? void 0
        },
        {
          type: Li.year,
          index: 2,
          toggle: de,
          modelValue: I.value,
          updateModelValue: (Me) => I.value = Me,
          text: tE(r.year, r.locale),
          showSelectionGrid: B.value,
          items: q.value,
          ariaLabel: (pe = o.value) == null ? void 0 : pe.openYearsOverlay,
          overlayLabel: ((we = (H = o.value).yearPicker) == null ? void 0 : we.call(H, !0)) ?? void 0
        }
      ];
    }), se = z(() => r.disableYearSelect ? [Y.value[0]] : r.yearFirst ? [...Y.value].reverse() : Y.value);
    return t({
      toggleMonthPicker: ee,
      toggleYearPicker: de,
      handleMonthYearChange: b
    }), (X, he) => {
      var ve, pe, H, we, Me, Re;
      return ne(), Be("div", hq, [
        X.$slots["month-year"] ? (ne(), Be("div", _q, [
          bt(X.$slots, "month-year", Xn(Ca({
            month: e.month,
            year: e.year,
            months: e.months,
            years: e.years,
            updateMonthYear: fe(y),
            handleMonthYearChange: fe(b),
            instance: e.instance,
            isDisabled: fe(p)
          })))
        ])) : (ne(), Be(Qe, { key: 1 }, [
          X.$slots["top-extra"] ? (ne(), Be("div", pq, [
            bt(X.$slots, "top-extra", { value: X.internalModelValue })
          ])) : ke("", !0),
          A("div", vq, [
            fe(S)(fe(l), e.instance) && !X.vertical ? (ne(), Fe(rf, {
              key: 0,
              "aria-label": (ve = fe(o)) == null ? void 0 : ve.prevMonth,
              disabled: fe(p)(!1),
              class: Ee((pe = fe(_)) == null ? void 0 : pe.navBtnPrev),
              "el-name": "action-prev",
              onActivate: he[0] || (he[0] = (ce) => fe(b)(!1, !0)),
              onSetRef: he[1] || (he[1] = (ce) => F(ce, 0))
            }, {
              default: x(() => [
                X.$slots["arrow-left"] ? bt(X.$slots, "arrow-left", { key: 0 }) : ke("", !0),
                X.$slots["arrow-left"] ? ke("", !0) : (ne(), Fe(fe(o0), { key: 1 }))
              ]),
              _: 3
            }, 8, ["aria-label", "disabled", "class"])) : ke("", !0),
            A("div", {
              class: Ee(["dp__month_year_wrap", {
                dp__year_disable_select: X.disableYearSelect
              }])
            }, [
              (ne(!0), Be(Qe, null, un(se.value, (ce, te) => (ne(), Be(Qe, {
                key: ce.type
              }, [
                A("button", {
                  ref_for: !0,
                  ref: (G) => F(G, te + 1),
                  type: "button",
                  "data-dp-element": `overlay-${ce.type}`,
                  class: Ee(["dp__btn dp__month_year_select", { "dp--hidden-el": O.value }]),
                  "aria-label": `${ce.text}-${ce.ariaLabel}`,
                  "data-test-id": `${ce.type}-toggle-overlay-${e.instance}`,
                  onClick: ce.toggle,
                  onKeydown: (G) => fe(Lr)(G, () => ce.toggle(), !0)
                }, [
                  X.$slots[ce.type] ? bt(X.$slots, ce.type, {
                    key: 0,
                    text: ce.text,
                    value: r[ce.type]
                  }) : ke("", !0),
                  X.$slots[ce.type] ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
                    ae(W(ce.text), 1)
                  ], 64))
                ], 42, gq),
                h(Ur, {
                  name: fe(g)(ce.showSelectionGrid),
                  css: fe(v)
                }, {
                  default: x(() => [
                    ce.showSelectionGrid ? (ne(), Fe(jf, {
                      key: 0,
                      items: ce.items,
                      "arrow-navigation": X.arrowNavigation,
                      "hide-navigation": X.hideNavigation,
                      "is-last": X.autoApply && !fe(d).keepActionRow,
                      "skip-button-ref": !1,
                      config: X.config,
                      type: ce.type,
                      "header-refs": [],
                      "esc-close": X.escClose,
                      "menu-wrap-ref": X.menuWrapRef,
                      "text-input": X.textInput,
                      "aria-labels": X.ariaLabels,
                      "overlay-label": ce.overlayLabel,
                      onSelected: ce.updateModelValue,
                      onToggle: ce.toggle
                    }, dr({
                      "button-icon": x(() => [
                        X.$slots["calendar-icon"] ? bt(X.$slots, "calendar-icon", { key: 0 }) : ke("", !0),
                        X.$slots["calendar-icon"] ? ke("", !0) : (ne(), Fe(fe(Gu), { key: 1 }))
                      ]),
                      _: 2
                    }, [
                      X.$slots[`${ce.type}-overlay-value`] ? {
                        name: "item",
                        fn: x(({ item: G }) => [
                          bt(X.$slots, `${ce.type}-overlay-value`, {
                            text: G.text,
                            value: G.value
                          })
                        ]),
                        key: "0"
                      } : void 0,
                      X.$slots[`${ce.type}-overlay`] ? {
                        name: "overlay",
                        fn: x(() => [
                          bt(X.$slots, `${ce.type}-overlay`, He({ ref_for: !0 }, M.value(ce.type)))
                        ]),
                        key: "1"
                      } : void 0,
                      X.$slots[`${ce.type}-overlay-header`] ? {
                        name: "header",
                        fn: x(() => [
                          bt(X.$slots, `${ce.type}-overlay-header`, {
                            toggle: ce.toggle
                          })
                        ]),
                        key: "2"
                      } : void 0
                    ]), 1032, ["items", "arrow-navigation", "hide-navigation", "is-last", "config", "type", "esc-close", "menu-wrap-ref", "text-input", "aria-labels", "overlay-label", "onSelected", "onToggle"])) : ke("", !0)
                  ]),
                  _: 2
                }, 1032, ["name", "css"])
              ], 64))), 128))
            ], 2),
            fe(S)(fe(l), e.instance) && X.vertical ? (ne(), Fe(rf, {
              key: 1,
              "aria-label": (H = fe(o)) == null ? void 0 : H.prevMonth,
              "el-name": "action-prev",
              disabled: fe(p)(!1),
              class: Ee((we = fe(_)) == null ? void 0 : we.navBtnPrev),
              onActivate: he[2] || (he[2] = (ce) => fe(b)(!1, !0))
            }, {
              default: x(() => [
                X.$slots["arrow-up"] ? bt(X.$slots, "arrow-up", { key: 0 }) : ke("", !0),
                X.$slots["arrow-up"] ? ke("", !0) : (ne(), Fe(fe(c0), { key: 1 }))
              ]),
              _: 3
            }, 8, ["aria-label", "disabled", "class"])) : ke("", !0),
            fe(E)(fe(l), e.instance) ? (ne(), Fe(rf, {
              key: 2,
              ref: "rightIcon",
              "el-name": "action-next",
              disabled: fe(p)(!0),
              "aria-label": (Me = fe(o)) == null ? void 0 : Me.nextMonth,
              class: Ee((Re = fe(_)) == null ? void 0 : Re.navBtnNext),
              onActivate: he[3] || (he[3] = (ce) => fe(b)(!0, !0)),
              onSetRef: he[4] || (he[4] = (ce) => F(ce, X.disableYearSelect ? 2 : 3))
            }, {
              default: x(() => [
                X.$slots[X.vertical ? "arrow-down" : "arrow-right"] ? bt(X.$slots, X.vertical ? "arrow-down" : "arrow-right", { key: 0 }) : ke("", !0),
                X.$slots[X.vertical ? "arrow-down" : "arrow-right"] ? ke("", !0) : (ne(), Fe(Hu(X.vertical ? fe(u0) : fe(s0)), { key: 1 }))
              ]),
              _: 3
            }, 8, ["disabled", "aria-label", "class"])) : ke("", !0)
          ])
        ], 64))
      ]);
    };
  }
}), bq = {
  class: "dp__calendar_header",
  role: "row"
}, wq = {
  key: 0,
  class: "dp__calendar_header_item",
  role: "gridcell"
}, kq = ["aria-label"], Sq = {
  key: 0,
  class: "dp__calendar_item dp__week_num",
  role: "gridcell"
}, Cq = { class: "dp__cell_inner" }, Aq = ["id", "aria-pressed", "aria-disabled", "aria-label", "tabindex", "data-test-id", "onClick", "onTouchend", "onKeydown", "onMouseenter", "onMouseleave", "onMousedown"], xq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DpCalendar",
  props: {
    mappedDates: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    ...Ki
  },
  emits: [
    "select-date",
    "set-hover-date",
    "handle-scroll",
    "mount",
    "handle-swipe",
    "handle-space",
    "tooltip-open",
    "tooltip-close"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { buildMultiLevelMatrix: i } = al(), {
      defaultedTransitions: o,
      defaultedConfig: l,
      defaultedAriaLabels: s,
      defaultedMultiCalendars: d,
      defaultedWeekNumbers: u,
      defaultedMultiDates: f,
      defaultedUI: _
    } = da(r), g = Se(null), v = Se({
      bottom: "",
      left: "",
      transform: ""
    }), w = Se([]), b = Se(null), p = Se(!0), y = Se(""), S = Se({ startX: 0, endX: 0, startY: 0, endY: 0 }), E = Se([]), C = Se({ left: "50%" }), B = Se(!1), O = z(() => r.calendar ? r.calendar(r.mappedDates) : r.mappedDates), D = z(() => r.dayNames ? Array.isArray(r.dayNames) ? r.dayNames : r.dayNames(r.locale, +r.weekStart) : i6(r.formatLocale, r.locale, +r.weekStart));
    nn(() => {
      a("mount", { cmp: "calendar", refs: w }), l.value.noSwipe || b.value && (b.value.addEventListener("touchstart", F, { passive: !1 }), b.value.addEventListener("touchend", Y, { passive: !1 }), b.value.addEventListener("touchmove", se, { passive: !1 })), r.monthChangeOnScroll && b.value && b.value.addEventListener("wheel", ve, { passive: !1 });
    }), di(() => {
      l.value.noSwipe || b.value && (b.value.removeEventListener("touchstart", F), b.value.removeEventListener("touchend", Y), b.value.removeEventListener("touchmove", se)), r.monthChangeOnScroll && b.value && b.value.removeEventListener("wheel", ve);
    });
    const T = (ce) => ce ? r.vertical ? "vNext" : "next" : r.vertical ? "vPrevious" : "previous", P = (ce, te) => {
      if (r.transitions) {
        const G = rr(Ko(ut(), r.month, r.year));
        y.value = Oa(rr(Ko(ut(), ce, te)), G) ? o.value[T(!0)] : o.value[T(!1)], p.value = !1, Vt(() => {
          p.value = !0;
        });
      }
    }, I = z(
      () => ({
        ..._.value.calendar ?? {}
      })
    ), M = z(() => (ce) => {
      const te = s6(ce);
      return {
        dp__marker_dot: te.type === "dot",
        dp__marker_line: te.type === "line"
      };
    }), V = z(() => (ce) => mn(ce, g.value)), N = z(() => ({
      dp__calendar: !0,
      dp__calendar_next: d.value.count > 0 && r.instance !== 0
    })), q = z(() => (ce) => r.hideOffsetDates ? ce.current : !0), j = async (ce, te) => {
      const { width: G, height: le } = ce.getBoundingClientRect();
      g.value = te.value;
      let K = { left: `${G / 2}px` }, Ce = -50;
      if (await Vt(), E.value[0]) {
        const { left: Te, width: ie } = E.value[0].getBoundingClientRect();
        Te < 0 && (K = { left: "0" }, Ce = 0, C.value.left = `${G / 2}px`), window.innerWidth < Te + ie && (K = { right: "0" }, Ce = 0, C.value.left = `${ie - G / 2}px`);
      }
      v.value = {
        bottom: `${le}px`,
        ...K,
        transform: `translateX(${Ce}%)`
      };
    }, ee = async (ce, te, G) => {
      var le, K, Ce;
      const Te = $a(w.value[te][G]);
      Te && ((le = ce.marker) != null && le.customPosition && (Ce = (K = ce.marker) == null ? void 0 : K.tooltip) != null && Ce.length ? v.value = ce.marker.customPosition(Te) : await j(Te, ce), a("tooltip-open", ce.marker));
    }, de = async (ce, te, G) => {
      var le, K;
      if (B.value && f.value.enabled && f.value.dragSelect)
        return a("select-date", ce);
      if (a("set-hover-date", ce), (K = (le = ce.marker) == null ? void 0 : le.tooltip) != null && K.length) {
        if (r.hideOffsetDates && !ce.current) return;
        await ee(ce, te, G);
      }
    }, Z = (ce) => {
      g.value && (g.value = null, v.value = JSON.parse(JSON.stringify({ bottom: "", left: "", transform: "" })), a("tooltip-close", ce.marker));
    }, F = (ce) => {
      S.value.startX = ce.changedTouches[0].screenX, S.value.startY = ce.changedTouches[0].screenY;
    }, Y = (ce) => {
      S.value.endX = ce.changedTouches[0].screenX, S.value.endY = ce.changedTouches[0].screenY, X();
    }, se = (ce) => {
      r.vertical && !r.inline && ce.preventDefault();
    }, X = () => {
      const ce = r.vertical ? "Y" : "X";
      Math.abs(S.value[`start${ce}`] - S.value[`end${ce}`]) > 10 && a("handle-swipe", S.value[`start${ce}`] > S.value[`end${ce}`] ? "right" : "left");
    }, he = (ce, te, G) => {
      ce && (Array.isArray(w.value[te]) ? w.value[te][G] = ce : w.value[te] = [ce]), r.arrowNavigation && i(w.value, "calendar");
    }, ve = (ce) => {
      r.monthChangeOnScroll && (ce.preventDefault(), a("handle-scroll", ce));
    }, pe = (ce) => u.value.type === "local" ? a0(ce.value, { weekStartsOn: +r.weekStart }) : u.value.type === "iso" ? t0(ce.value) : typeof u.value.type == "function" ? u.value.type(ce.value) : "", H = (ce) => {
      const te = ce[0];
      return u.value.hideOnOffsetDates ? ce.some((G) => G.current) ? pe(te) : "" : pe(te);
    }, we = (ce, te, G = !0) => {
      !G && f6() || (!f.value.enabled || l.value.allowPreventDefault) && (Ns(ce, l.value), a("select-date", te));
    }, Me = (ce) => {
      Ns(ce, l.value);
    }, Re = (ce) => {
      f.value.enabled && f.value.dragSelect ? (B.value = !0, a("select-date", ce)) : f.value.enabled && a("select-date", ce);
    };
    return t({ triggerTransition: P }), (ce, te) => (ne(), Be("div", {
      class: Ee(N.value)
    }, [
      A("div", {
        ref_key: "calendarWrapRef",
        ref: b,
        class: Ee(I.value),
        role: "grid"
      }, [
        A("div", bq, [
          ce.weekNumbers ? (ne(), Be("div", wq, W(ce.weekNumName), 1)) : ke("", !0),
          (ne(!0), Be(Qe, null, un(D.value, (G, le) => {
            var K, Ce;
            return ne(), Be("div", {
              key: le,
              class: "dp__calendar_header_item",
              role: "gridcell",
              "data-test-id": "calendar-header",
              "aria-label": (Ce = (K = fe(s)) == null ? void 0 : K.weekDay) == null ? void 0 : Ce.call(K, le)
            }, [
              ce.$slots["calendar-header"] ? bt(ce.$slots, "calendar-header", {
                key: 0,
                day: G,
                index: le
              }) : ke("", !0),
              ce.$slots["calendar-header"] ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
                ae(W(G), 1)
              ], 64))
            ], 8, kq);
          }), 128))
        ]),
        te[2] || (te[2] = A("div", { class: "dp__calendar_header_separator" }, null, -1)),
        h(Ur, {
          name: y.value,
          css: !!ce.transitions
        }, {
          default: x(() => [
            p.value ? (ne(), Be("div", {
              key: 0,
              class: "dp__calendar",
              role: "rowgroup",
              onMouseleave: te[1] || (te[1] = (G) => B.value = !1)
            }, [
              (ne(!0), Be(Qe, null, un(O.value, (G, le) => (ne(), Be("div", {
                key: le,
                class: "dp__calendar_row",
                role: "row"
              }, [
                ce.weekNumbers ? (ne(), Be("div", Sq, [
                  A("div", Cq, W(H(G.days)), 1)
                ])) : ke("", !0),
                (ne(!0), Be(Qe, null, un(G.days, (K, Ce) => {
                  var Te, ie, ge;
                  return ne(), Be("div", {
                    id: fe(yb)(K.value),
                    ref_for: !0,
                    ref: (Pe) => he(Pe, le, Ce),
                    key: Ce + le,
                    role: "gridcell",
                    class: "dp__calendar_item",
                    "aria-pressed": (K.classData.dp__active_date || K.classData.dp__range_start || K.classData.dp__range_start) ?? void 0,
                    "aria-disabled": K.classData.dp__cell_disabled || void 0,
                    "aria-label": (ie = (Te = fe(s)) == null ? void 0 : Te.day) == null ? void 0 : ie.call(Te, K),
                    tabindex: !K.current && ce.hideOffsetDates ? void 0 : 0,
                    "data-test-id": fe(yb)(K.value),
                    onClick: Jn((Pe) => we(Pe, K), ["prevent"]),
                    onTouchend: (Pe) => we(Pe, K, !1),
                    onKeydown: (Pe) => fe(Lr)(Pe, () => ce.$emit("select-date", K)),
                    onMouseenter: (Pe) => de(K, le, Ce),
                    onMouseleave: (Pe) => Z(K),
                    onMousedown: (Pe) => Re(K),
                    onMouseup: te[0] || (te[0] = (Pe) => B.value = !1)
                  }, [
                    A("div", {
                      class: Ee(["dp__cell_inner", K.classData])
                    }, [
                      ce.$slots.day && q.value(K) ? bt(ce.$slots, "day", {
                        key: 0,
                        day: +K.text,
                        date: K.value
                      }) : ke("", !0),
                      ce.$slots.day ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
                        ae(W(K.text), 1)
                      ], 64)),
                      K.marker && q.value(K) ? (ne(), Be(Qe, { key: 2 }, [
                        ce.$slots.marker ? bt(ce.$slots, "marker", {
                          key: 0,
                          marker: K.marker,
                          day: +K.text,
                          date: K.value
                        }) : (ne(), Be("div", {
                          key: 1,
                          class: Ee(M.value(K.marker)),
                          style: Xe(K.marker.color ? { backgroundColor: K.marker.color } : {})
                        }, null, 6))
                      ], 64)) : ke("", !0),
                      V.value(K.value) ? (ne(), Be("div", {
                        key: 3,
                        ref_for: !0,
                        ref_key: "activeTooltip",
                        ref: E,
                        class: "dp__marker_tooltip",
                        style: Xe(v.value)
                      }, [
                        (ge = K.marker) != null && ge.tooltip ? (ne(), Be("div", {
                          key: 0,
                          class: "dp__tooltip_content",
                          onClick: Me
                        }, [
                          (ne(!0), Be(Qe, null, un(K.marker.tooltip, (Pe, Ie) => (ne(), Be("div", {
                            key: Ie,
                            class: "dp__tooltip_text"
                          }, [
                            ce.$slots["marker-tooltip"] ? bt(ce.$slots, "marker-tooltip", {
                              key: 0,
                              tooltip: Pe,
                              day: K.value
                            }) : ke("", !0),
                            ce.$slots["marker-tooltip"] ? ke("", !0) : (ne(), Be(Qe, { key: 1 }, [
                              A("div", {
                                class: "dp__tooltip_mark",
                                style: Xe(Pe.color ? { backgroundColor: Pe.color } : {})
                              }, null, 4),
                              A("div", null, W(Pe.text), 1)
                            ], 64))
                          ]))), 128)),
                          A("div", {
                            class: "dp__arrow_bottom_tp",
                            style: Xe(C.value)
                          }, null, 4)
                        ])) : ke("", !0)
                      ], 4)) : ke("", !0)
                    ], 2)
                  ], 40, Aq);
                }), 128))
              ]))), 128))
            ], 32)) : ke("", !0)
          ]),
          _: 3
        }, 8, ["name", "css"])
      ], 2)
    ], 2));
  }
}), KC = (e) => Array.isArray(e), Tq = (e, t, n, a) => {
  const r = Se([]), i = Se(/* @__PURE__ */ new Date()), o = Se(), l = () => Y(e.isTextInputDate), { modelValue: s, calendars: d, time: u, today: f } = Kf(e, t, l), {
    defaultedMultiCalendars: _,
    defaultedStartTime: g,
    defaultedRange: v,
    defaultedConfig: w,
    defaultedTz: b,
    propDates: p,
    defaultedMultiDates: y
  } = da(e), { validateMonthYearInRange: S, isDisabled: E, isDateRangeAllowed: C, checkMinMaxRange: B } = rl(e), { updateTimeValues: O, getSetDateTime: D, setTime: T, assignStartTime: P, validateTime: I, disabledTimesConfig: M } = vE(e, u, s, a), V = z(
    () => (xe) => d.value[xe] ? d.value[xe].month : 0
  ), N = z(
    () => (xe) => d.value[xe] ? d.value[xe].year : 0
  ), q = (xe) => !w.value.keepViewOnOffsetClick || xe ? !0 : !o.value, j = (xe, ze, ft, it = !1) => {
    var je, st;
    q(it) && (d.value[xe] || (d.value[xe] = { month: 0, year: 0 }), d.value[xe].month = qC(ze) ? (je = d.value[xe]) == null ? void 0 : je.month : ze, d.value[xe].year = qC(ft) ? (st = d.value[xe]) == null ? void 0 : st.year : ft);
  }, ee = () => {
    e.autoApply && t("select-date");
  }, de = () => {
    g.value && P(g.value);
  };
  nn(() => {
    e.shadow || (s.value || (te(), de()), Y(!0), e.focusStartDate && e.startDate && te());
  });
  const Z = z(() => {
    var xe;
    return (xe = e.flow) != null && xe.length && !e.partialFlow ? e.flowStep === e.flow.length : !0;
  }), F = () => {
    e.autoApply && Z.value && t("auto-apply", e.partialFlow ? e.flowStep !== e.flow.length : !1);
  }, Y = (xe = !1) => {
    if (s.value)
      return Array.isArray(s.value) ? (r.value = s.value, we(xe)) : he(s.value, xe);
    if (_.value.count && xe && !e.startDate)
      return X(ut(), xe);
  }, se = () => Array.isArray(s.value) && v.value.enabled ? fn(s.value[0]) === fn(s.value[1] ?? s.value[0]) : !1, X = (xe = /* @__PURE__ */ new Date(), ze = !1) => {
    if ((!_.value.count || !_.value.static || ze) && j(0, fn(xe), Yt(xe)), _.value.count && (!s.value || se() || !_.value.solo) && (!_.value.solo || ze))
      for (let ft = 1; ft < _.value.count; ft++) {
        const it = Bn(ut(), { month: V.value(ft - 1), year: N.value(ft - 1) }), je = PI(it, { months: 1 });
        d.value[ft] = { month: fn(je), year: Yt(je) };
      }
  }, he = (xe, ze) => {
    X(xe), T("hours", ts(xe)), T("minutes", Ks(xe)), T("seconds", Pu(xe)), _.value.count && ze && ce();
  }, ve = (xe) => {
    if (_.value.count) {
      if (_.value.solo) return 0;
      const ze = fn(xe[0]), ft = fn(xe[1]);
      return Math.abs(ft - ze) < _.value.count ? 0 : 1;
    }
    return 1;
  }, pe = (xe, ze) => {
    xe[1] && v.value.showLastInRange ? X(xe[ve(xe)], ze) : X(xe[0], ze);
    const ft = (it, je) => [
      it(xe[0]),
      xe[1] ? it(xe[1]) : u[je][1]
    ];
    T("hours", ft(ts, "hours")), T("minutes", ft(Ks, "minutes")), T("seconds", ft(Pu, "seconds"));
  }, H = (xe, ze) => {
    if ((v.value.enabled || e.weekPicker) && !y.value.enabled)
      return pe(xe, ze);
    if (y.value.enabled && ze) {
      const ft = xe[xe.length - 1];
      return he(ft, ze);
    }
  }, we = (xe) => {
    const ze = s.value;
    H(ze, xe), _.value.count && _.value.solo && ce();
  }, Me = (xe, ze) => {
    const ft = Bn(ut(), { month: V.value(ze), year: N.value(ze) }), it = xe < 0 ? Hi(ft, 1) : Du(ft, 1);
    S(fn(it), Yt(it), xe < 0, e.preventMinMaxNavigation) && (j(ze, fn(it), Yt(it)), t("update-month-year", { instance: ze, month: fn(it), year: Yt(it) }), _.value.count && !_.value.solo && Re(ze), n());
  }, Re = (xe) => {
    for (let ze = xe - 1; ze >= 0; ze--) {
      const ft = Du(Bn(ut(), { month: V.value(ze + 1), year: N.value(ze + 1) }), 1);
      j(ze, fn(ft), Yt(ft));
    }
    for (let ze = xe + 1; ze <= _.value.count - 1; ze++) {
      const ft = Hi(Bn(ut(), { month: V.value(ze - 1), year: N.value(ze - 1) }), 1);
      j(ze, fn(ft), Yt(ft));
    }
  }, ce = () => {
    if (Array.isArray(s.value) && s.value.length === 2) {
      const xe = ut(
        ut(s.value[1] ? s.value[1] : Hi(s.value[0], 1))
      ), [ze, ft] = [fn(s.value[0]), Yt(s.value[0])], [it, je] = [fn(s.value[1]), Yt(s.value[1])];
      (ze !== it || ze === it && ft !== je) && _.value.solo && j(1, fn(xe), Yt(xe));
    } else s.value && !Array.isArray(s.value) && (j(0, fn(s.value), Yt(s.value)), X(ut()));
  }, te = () => {
    e.startDate && (j(0, fn(ut(e.startDate)), Yt(ut(e.startDate))), _.value.count && Re(0));
  }, G = (xe, ze) => {
    if (e.monthChangeOnScroll) {
      const ft = (/* @__PURE__ */ new Date()).getTime() - i.value.getTime(), it = Math.abs(xe.deltaY);
      let je = 500;
      it > 1 && (je = 100), it > 100 && (je = 0), ft > je && (i.value = /* @__PURE__ */ new Date(), Me(e.monthChangeOnScroll !== "inverse" ? -xe.deltaY : xe.deltaY, ze));
    }
  }, le = (xe, ze, ft = !1) => {
    e.monthChangeOnArrows && e.vertical === ft && K(xe, ze);
  }, K = (xe, ze) => {
    Me(xe === "right" ? -1 : 1, ze);
  }, Ce = (xe) => {
    if (p.value.markers)
      return L_(xe.value, p.value.markers);
  }, Te = (xe, ze) => {
    switch (e.sixWeeks === !0 ? "append" : e.sixWeeks) {
      case "prepend":
        return [!0, !1];
      case "center":
        return [xe == 0, !0];
      case "fair":
        return [xe == 0 || ze > xe, !0];
      case "append":
        return [!1, !1];
      default:
        return [!1, !1];
    }
  }, ie = (xe, ze, ft, it) => {
    if (e.sixWeeks && xe.length < 6) {
      const je = 6 - xe.length, st = (ze.getDay() + 7 - it) % 7, pt = 6 - (ft.getDay() + 7 - it) % 7, [xa, Ua] = Te(st, pt);
      for (let _r = 1; _r <= je; _r++)
        if (Ua ? !!(_r % 2) == xa : xa) {
          const Wa = xe[0].days[0], Qi = ge(Ti(Wa.value, -7), fn(ze));
          xe.unshift({ days: Qi });
        } else {
          const Wa = xe[xe.length - 1], Qi = Wa.days[Wa.days.length - 1], sl = ge(Ti(Qi.value, 1), fn(ze));
          xe.push({ days: sl });
        }
    }
    return xe;
  }, ge = (xe, ze) => {
    const ft = ut(xe), it = [];
    for (let je = 0; je < 7; je++) {
      const st = Ti(ft, je), pt = fn(st) !== ze;
      it.push({
        text: e.hideOffsetDates && pt ? "" : st.getDate(),
        value: st,
        current: !pt,
        classData: {}
      });
    }
    return it;
  }, Pe = (xe, ze) => {
    const ft = [], it = new Date(ze, xe), je = new Date(ze, xe + 1, 0), st = e.weekStart, pt = Yi(it, { weekStartsOn: st }), xa = (Ua) => {
      const _r = ge(Ua, xe);
      if (ft.push({ days: _r }), !ft[ft.length - 1].days.some(
        (Wa) => mn(rr(Wa.value), rr(je))
      )) {
        const Wa = Ti(Ua, 7);
        xa(Wa);
      }
    };
    return xa(pt), ie(ft, it, je, st);
  }, Ie = (xe) => {
    const ze = Us(ut(xe.value), u.hours, u.minutes, rt());
    t("date-update", ze), y.value.enabled ? p0(ze, s, y.value.limit) : s.value = ze, a(), Vt().then(() => {
      F();
    });
  }, Je = (xe) => v.value.noDisabledRange ? oE(r.value[0], xe).some((ze) => E(ze)) : !1, _e = () => {
    r.value = s.value ? s.value.slice() : [], r.value.length === 2 && !(v.value.fixedStart || v.value.fixedEnd) && (r.value = []);
  }, $e = (xe, ze) => {
    const ft = [
      ut(xe.value),
      Ti(ut(xe.value), +v.value.autoRange)
    ];
    C(ft) ? (ze && Ze(xe.value), r.value = ft) : t("invalid-date", xe.value);
  }, Ze = (xe) => {
    const ze = fn(ut(xe)), ft = Yt(ut(xe));
    if (j(0, ze, ft), _.value.count > 0)
      for (let it = 1; it < _.value.count; it++) {
        const je = _6(
          Bn(ut(xe), { year: N.value(it - 1), month: V.value(it - 1) })
        );
        j(it, je.month, je.year);
      }
  }, _t = (xe) => {
    if (Je(xe.value) || !B(xe.value, s.value, v.value.fixedStart ? 0 : 1))
      return t("invalid-date", xe.value);
    r.value = hE(ut(xe.value), s, t, v);
  }, It = (xe, ze) => {
    if (_e(), v.value.autoRange) return $e(xe, ze);
    if (v.value.fixedStart || v.value.fixedEnd) return _t(xe);
    r.value[0] ? B(ut(xe.value), s.value) && !Je(xe.value) ? ka(ut(xe.value), ut(r.value[0])) ? (r.value.unshift(ut(xe.value)), t("range-end", r.value[0])) : (r.value[1] = ut(xe.value), t("range-end", r.value[1])) : (e.autoApply && t("auto-apply-invalid", xe.value), t("invalid-date", xe.value)) : (r.value[0] = ut(xe.value), t("range-start", r.value[0]));
  }, rt = (xe = !0) => e.enableSeconds ? Array.isArray(u.seconds) ? xe ? u.seconds[0] : u.seconds[1] : u.seconds : 0, Dt = (xe) => {
    r.value[xe] = Us(
      r.value[xe],
      u.hours[xe],
      u.minutes[xe],
      rt(xe !== 1)
    );
  }, en = () => {
    var xe, ze;
    r.value[0] && r.value[1] && +((xe = r.value) == null ? void 0 : xe[0]) > +((ze = r.value) == null ? void 0 : ze[1]) && (r.value.reverse(), t("range-start", r.value[0]), t("range-end", r.value[1]));
  }, zn = () => {
    r.value.length && (r.value[0] && !r.value[1] ? Dt(0) : (Dt(0), Dt(1), a()), en(), s.value = r.value.slice(), _p(r.value, t, e.autoApply, e.modelAuto));
  }, na = (xe, ze = !1) => {
    if (E(xe.value) || !xe.current && e.hideOffsetDates) return t("invalid-date", xe.value);
    if (o.value = JSON.parse(JSON.stringify(xe)), !v.value.enabled) return Ie(xe);
    KC(u.hours) && KC(u.minutes) && !y.value.enabled && (It(xe, ze), zn());
  }, Na = (xe, ze) => {
    var ft;
    j(xe, ze.month, ze.year, !0), _.value.count && !_.value.solo && Re(xe), t("update-month-year", { instance: xe, month: ze.month, year: ze.year }), n(_.value.solo ? xe : void 0);
    const it = (ft = e.flow) != null && ft.length ? e.flow[e.flowStep] : void 0;
    !ze.fromNav && (it === br.month || it === br.year) && a();
  }, ya = (xe, ze) => {
    mE({
      value: xe,
      modelValue: s,
      range: v.value.enabled,
      timezone: ze ? void 0 : b.value.timezone
    }), ee(), e.multiCalendars && Vt().then(() => Y(!0));
  }, Wn = () => {
    const xe = d0(ut(), b.value);
    !v.value.enabled && !y.value.enabled ? s.value = xe : s.value && Array.isArray(s.value) && s.value[0] ? y.value.enabled ? s.value = [...s.value, xe] : s.value = ka(xe, s.value[0]) ? [xe, s.value[0]] : [s.value[0], xe] : s.value = [xe], ee();
  }, Vn = () => {
    if (Array.isArray(s.value))
      if (y.value.enabled) {
        const xe = Ja();
        s.value[s.value.length - 1] = D(xe);
      } else
        s.value = s.value.map((xe, ze) => xe && D(xe, ze));
    else
      s.value = D(s.value);
    t("time-update");
  }, Ja = () => Array.isArray(s.value) && s.value.length ? s.value[s.value.length - 1] : null;
  return {
    calendars: d,
    modelValue: s,
    month: V,
    year: N,
    time: u,
    disabledTimesConfig: M,
    today: f,
    validateTime: I,
    getCalendarDays: Pe,
    getMarker: Ce,
    handleScroll: G,
    handleSwipe: K,
    handleArrow: le,
    selectDate: na,
    updateMonthYear: Na,
    presetDate: ya,
    selectCurrentDate: Wn,
    updateTime: (xe, ze = !0, ft = !1) => {
      O(xe, ze, ft, Vn);
    },
    assignMonthAndYear: X,
    setStartTime: de
  };
}, Iq = { key: 0 }, Eq = /* @__PURE__ */ Ha({
  __name: "DatePicker",
  props: {
    ...Ki
  },
  emits: [
    "tooltip-open",
    "tooltip-close",
    "mount",
    "update:internal-model-value",
    "update-flow-step",
    "reset-flow",
    "auto-apply",
    "focus-menu",
    "select-date",
    "range-start",
    "range-end",
    "invalid-fixed-range",
    "time-update",
    "am-pm-change",
    "time-picker-open",
    "time-picker-close",
    "recalculate-position",
    "update-month-year",
    "auto-apply-invalid",
    "date-update",
    "invalid-date",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      calendars: i,
      month: o,
      year: l,
      modelValue: s,
      time: d,
      disabledTimesConfig: u,
      today: f,
      validateTime: _,
      getCalendarDays: g,
      getMarker: v,
      handleArrow: w,
      handleScroll: b,
      handleSwipe: p,
      selectDate: y,
      updateMonthYear: S,
      presetDate: E,
      selectCurrentDate: C,
      updateTime: B,
      assignMonthAndYear: O,
      setStartTime: D
    } = Tq(r, a, se, X), T = lc(), { setHoverDate: P, getDayClassData: I, clearHoverDate: M } = jq(s, r), { defaultedMultiCalendars: V } = da(r), N = Se([]), q = Se([]), j = Se(null), ee = li(T, "calendar"), de = li(T, "monthYear"), Z = li(T, "timePicker"), F = (G) => {
      r.shadow || a("mount", G);
    };
    nt(
      i,
      () => {
        r.shadow || setTimeout(() => {
          a("recalculate-position");
        }, 0);
      },
      { deep: !0 }
    ), nt(
      V,
      (G, le) => {
        G.count - le.count > 0 && O();
      },
      { deep: !0 }
    );
    const Y = z(() => (G) => g(o.value(G), l.value(G)).map((le) => ({
      ...le,
      days: le.days.map((K) => (K.marker = v(K), K.classData = I(K), K))
    })));
    function se(G) {
      var le;
      G || G === 0 ? (le = q.value[G]) == null || le.triggerTransition(o.value(G), l.value(G)) : q.value.forEach((K, Ce) => K.triggerTransition(o.value(Ce), l.value(Ce)));
    }
    function X() {
      a("update-flow-step");
    }
    const he = (G, le = !1) => {
      y(G, le), r.spaceConfirm && a("select-date");
    }, ve = (G, le, K = 0) => {
      var Ce;
      (Ce = N.value[K]) == null || Ce.toggleMonthPicker(G, le);
    }, pe = (G, le, K = 0) => {
      var Ce;
      (Ce = N.value[K]) == null || Ce.toggleYearPicker(G, le);
    }, H = (G, le, K) => {
      var Ce;
      (Ce = j.value) == null || Ce.toggleTimePicker(G, le, K);
    }, we = (G, le) => {
      var K;
      if (!r.range) {
        const Ce = s.value ? s.value : f, Te = le ? new Date(le) : Ce, ie = G ? Yi(Te, { weekStartsOn: 1 }) : LI(Te, { weekStartsOn: 1 });
        y({
          value: ie,
          current: fn(Te) === o.value(0),
          text: "",
          classData: {}
        }), (K = document.getElementById(yb(ie))) == null || K.focus();
      }
    }, Me = (G) => {
      var le;
      (le = N.value[0]) == null || le.handleMonthYearChange(G, !0);
    }, Re = (G) => {
      S(0, { month: o.value(0), year: l.value(0) + (G ? 1 : -1), fromNav: !0 });
    }, ce = (G, le) => {
      G === br.time && a(`time-picker-${le ? "open" : "close"}`), a("overlay-toggle", { open: le, overlay: G });
    }, te = (G) => {
      a("overlay-toggle", { open: !1, overlay: G }), a("focus-menu");
    };
    return t({
      clearHoverDate: M,
      presetDate: E,
      selectCurrentDate: C,
      toggleMonthPicker: ve,
      toggleYearPicker: pe,
      toggleTimePicker: H,
      handleArrow: w,
      updateMonthYear: S,
      getSidebarProps: () => ({
        modelValue: s,
        month: o,
        year: l,
        time: d,
        updateTime: B,
        updateMonthYear: S,
        selectDate: y,
        presetDate: E
      }),
      changeMonth: Me,
      changeYear: Re,
      selectWeekDate: we,
      setStartTime: D
    }), (G, le) => (ne(), Be(Qe, null, [
      h(hp, {
        "multi-calendars": fe(V).count,
        collapse: G.collapse,
        "is-mobile": G.isMobile
      }, {
        default: x(({ instance: K, index: Ce }) => [
          G.disableMonthYearSelect ? ke("", !0) : (ne(), Fe(yq, He({
            key: 0,
            ref: (Te) => {
              Te && (N.value[Ce] = Te);
            },
            months: fe(XI)(G.formatLocale, G.locale, G.monthNameFormat),
            years: fe(f0)(G.yearRange, G.locale, G.reverseYears),
            month: fe(o)(K),
            year: fe(l)(K),
            instance: K
          }, G.$props, {
            onMount: le[0] || (le[0] = (Te) => F(fe(Yl).header)),
            onResetFlow: le[1] || (le[1] = (Te) => G.$emit("reset-flow")),
            onUpdateMonthYear: (Te) => fe(S)(K, Te),
            onOverlayClosed: te,
            onOverlayOpened: le[2] || (le[2] = (Te) => G.$emit("overlay-toggle", { open: !0, overlay: Te }))
          }), dr({ _: 2 }, [
            un(fe(de), (Te, ie) => ({
              name: Te,
              fn: x((ge) => [
                bt(G.$slots, Te, Xn(Ca(ge)))
              ])
            }))
          ]), 1040, ["months", "years", "month", "year", "instance", "onUpdateMonthYear"])),
          h(xq, He({
            ref: (Te) => {
              Te && (q.value[Ce] = Te);
            },
            "mapped-dates": Y.value(K),
            month: fe(o)(K),
            year: fe(l)(K),
            instance: K
          }, G.$props, {
            onSelectDate: (Te) => fe(y)(Te, K !== 1),
            onHandleSpace: (Te) => he(Te, K !== 1),
            onSetHoverDate: le[3] || (le[3] = (Te) => fe(P)(Te)),
            onHandleScroll: (Te) => fe(b)(Te, K),
            onHandleSwipe: (Te) => fe(p)(Te, K),
            onMount: le[4] || (le[4] = (Te) => F(fe(Yl).calendar)),
            onResetFlow: le[5] || (le[5] = (Te) => G.$emit("reset-flow")),
            onTooltipOpen: le[6] || (le[6] = (Te) => G.$emit("tooltip-open", Te)),
            onTooltipClose: le[7] || (le[7] = (Te) => G.$emit("tooltip-close", Te))
          }), dr({ _: 2 }, [
            un(fe(ee), (Te, ie) => ({
              name: Te,
              fn: x((ge) => [
                bt(G.$slots, Te, Xn(Ca({ ...ge })))
              ])
            }))
          ]), 1040, ["mapped-dates", "month", "year", "instance", "onSelectDate", "onHandleSpace", "onHandleScroll", "onHandleSwipe"])
        ]),
        _: 3
      }, 8, ["multi-calendars", "collapse", "is-mobile"]),
      G.enableTimePicker ? (ne(), Be("div", Iq, [
        G.$slots["time-picker"] ? bt(G.$slots, "time-picker", Xn(He({ key: 0 }, { time: fe(d), updateTime: fe(B) }))) : (ne(), Fe(pE, He({
          key: 1,
          ref_key: "timePickerRef",
          ref: j
        }, G.$props, {
          hours: fe(d).hours,
          minutes: fe(d).minutes,
          seconds: fe(d).seconds,
          "internal-model-value": G.internalModelValue,
          "disabled-times-config": fe(u),
          "validate-time": fe(_),
          onMount: le[8] || (le[8] = (K) => F(fe(Yl).timePicker)),
          "onUpdate:hours": le[9] || (le[9] = (K) => fe(B)(K)),
          "onUpdate:minutes": le[10] || (le[10] = (K) => fe(B)(K, !1)),
          "onUpdate:seconds": le[11] || (le[11] = (K) => fe(B)(K, !1, !0)),
          onResetFlow: le[12] || (le[12] = (K) => G.$emit("reset-flow")),
          onOverlayClosed: le[13] || (le[13] = (K) => ce(K, !1)),
          onOverlayOpened: le[14] || (le[14] = (K) => ce(K, !0)),
          onAmPmChange: le[15] || (le[15] = (K) => G.$emit("am-pm-change", K))
        }), dr({ _: 2 }, [
          un(fe(Z), (K, Ce) => ({
            name: K,
            fn: x((Te) => [
              bt(G.$slots, K, Xn(Ca(Te)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"]))
      ])) : ke("", !0)
    ], 64));
  }
}), Pq = (e, t) => {
  const n = Se(), {
    defaultedMultiCalendars: a,
    defaultedConfig: r,
    defaultedHighlight: i,
    defaultedRange: o,
    propDates: l,
    defaultedFilters: s,
    defaultedMultiDates: d
  } = da(e), { modelValue: u, year: f, month: _, calendars: g } = Kf(e, t), { isDisabled: v } = rl(e), { selectYear: w, groupedYears: b, showYearPicker: p, isDisabled: y, toggleYearPicker: S, handleYearSelect: E, handleYear: C } = _E({
    modelValue: u,
    multiCalendars: a,
    range: o,
    highlight: i,
    calendars: g,
    propDates: l,
    month: _,
    year: f,
    filters: s,
    props: e,
    emit: t
  }), B = (q, j) => [q, j].map((ee) => go(ee, "MMMM", { locale: e.formatLocale })).join("-"), O = z(() => (q) => u.value ? Array.isArray(u.value) ? u.value.some((j) => NC(q, j)) : NC(u.value, q) : !1), D = (q) => {
    if (o.value.enabled) {
      if (Array.isArray(u.value)) {
        const j = mn(q, u.value[0]) || mn(q, u.value[1]);
        return Af(u.value, n.value, q) && !j;
      }
      return !1;
    }
    return !1;
  }, T = (q, j) => q.quarter === BC(j) && q.year === Yt(j), P = (q) => typeof i.value == "function" ? i.value({ quarter: BC(q), year: Yt(q) }) : !!i.value.quarters.find((j) => T(j, q)), I = z(() => (q) => {
    const j = Bn(/* @__PURE__ */ new Date(), { year: f.value(q) });
    return iU({
      start: Sf(j),
      end: RI(j)
    }).map((ee) => {
      const de = Ul(ee), Z = VC(ee), F = v(ee), Y = D(de), se = P(de);
      return {
        text: B(de, Z),
        value: de,
        active: O.value(de),
        highlighted: se,
        disabled: F,
        isBetween: Y
      };
    });
  }), M = (q) => {
    p0(q, u, d.value.limit), t("auto-apply", !0);
  }, V = (q) => {
    u.value = v0(u, q, t), _p(u.value, t, e.autoApply, e.modelAuto);
  }, N = (q) => {
    u.value = q, t("auto-apply");
  };
  return {
    defaultedConfig: r,
    defaultedMultiCalendars: a,
    groupedYears: b,
    year: f,
    isDisabled: y,
    quarters: I,
    showYearPicker: p,
    modelValue: u,
    setHoverDate: (q) => {
      n.value = q;
    },
    selectYear: w,
    selectQuarter: (q, j, ee) => {
      if (!ee)
        return g.value[j].month = fn(VC(q)), d.value.enabled ? M(q) : o.value.enabled ? V(q) : N(q);
    },
    toggleYearPicker: S,
    handleYearSelect: E,
    handleYear: C
  };
}, Oq = { class: "dp--quarter-items" }, Dq = ["data-test-id", "disabled", "onClick", "onMouseover"], Bq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "QuarterPicker",
  props: {
    ...Ki
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "overlay-closed",
    "auto-apply",
    "range-start",
    "range-end",
    "overlay-toggle",
    "update-month-year"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = lc(), o = li(i, "yearMode"), {
      defaultedMultiCalendars: l,
      defaultedConfig: s,
      groupedYears: d,
      year: u,
      isDisabled: f,
      quarters: _,
      modelValue: g,
      showYearPicker: v,
      setHoverDate: w,
      selectQuarter: b,
      toggleYearPicker: p,
      handleYearSelect: y,
      handleYear: S
    } = Pq(r, a);
    return t({ getSidebarProps: () => ({
      modelValue: g,
      year: u,
      selectQuarter: b,
      handleYearSelect: y,
      handleYear: S
    }) }), (E, C) => (ne(), Fe(hp, {
      "multi-calendars": fe(l).count,
      collapse: E.collapse,
      stretch: "",
      "is-mobile": E.isMobile
    }, {
      default: x(({ instance: B }) => [
        A("div", {
          class: "dp-quarter-picker-wrap",
          style: Xe({ minHeight: `${fe(s).modeHeight}px` })
        }, [
          E.$slots["top-extra"] ? bt(E.$slots, "top-extra", {
            key: 0,
            value: E.internalModelValue
          }) : ke("", !0),
          A("div", null, [
            h(fE, He(E.$props, {
              items: fe(d)(B),
              instance: B,
              "show-year-picker": fe(v)[B],
              year: fe(u)(B),
              "is-disabled": (O) => fe(f)(B, O),
              onHandleYear: (O) => fe(S)(B, O),
              onYearSelect: (O) => fe(y)(O, B),
              onToggleYearPicker: (O) => fe(p)(B, O?.flow, O?.show)
            }), dr({ _: 2 }, [
              un(fe(o), (O, D) => ({
                name: O,
                fn: x((T) => [
                  bt(E.$slots, O, Xn(Ca(T)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          A("div", Oq, [
            (ne(!0), Be(Qe, null, un(fe(_)(B), (O, D) => (ne(), Be("div", { key: D }, [
              A("button", {
                type: "button",
                class: Ee(["dp--qr-btn", {
                  "dp--qr-btn-active": O.active,
                  "dp--qr-btn-between": O.isBetween,
                  "dp--qr-btn-disabled": O.disabled,
                  "dp--highlighted": O.highlighted
                }]),
                "data-test-id": O.value,
                disabled: O.disabled,
                onClick: (T) => fe(b)(O.value, B, O.disabled),
                onMouseover: (T) => fe(w)(O.value)
              }, [
                E.$slots.quarter ? bt(E.$slots, "quarter", {
                  key: 0,
                  value: O.value,
                  text: O.text
                }) : (ne(), Be(Qe, { key: 1 }, [
                  ae(W(O.text), 1)
                ], 64))
              ], 42, Dq)
            ]))), 128))
          ])
        ], 4)
      ]),
      _: 3
    }, 8, ["multi-calendars", "collapse", "is-mobile"]));
  }
}), gE = (e, t) => {
  const n = Se(0);
  nn(() => {
    a(), window.addEventListener("resize", a, { passive: !0 });
  }), di(() => {
    window.removeEventListener("resize", a);
  });
  const a = () => {
    n.value = window.document.documentElement.clientWidth;
  };
  return {
    isMobile: z(
      () => n.value <= e.value.mobileBreakpoint && !t ? !0 : void 0
    )
  };
}, Vq = ["id", "tabindex", "role", "aria-label"], Mq = {
  key: 0,
  class: "dp--menu-load-container"
}, Rq = {
  key: 1,
  class: "dp--menu-header"
}, Lq = ["data-dp-mobile"], Fq = {
  key: 0,
  class: "dp__sidebar_left"
}, Nq = ["data-dp-mobile"], Uq = ["data-test-id", "data-dp-mobile", "onClick", "onKeydown"], $q = {
  key: 2,
  class: "dp__sidebar_right"
}, qq = {
  key: 3,
  class: "dp__action_extra"
}, GC = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerMenu",
  props: {
    ...mp,
    shadow: { type: Boolean, default: !1 },
    openOnTop: { type: Boolean, default: !1 },
    internalModelValue: { type: [Date, Array], default: null },
    noOverlayFocus: { type: Boolean, default: !1 },
    collapse: { type: Boolean, default: !1 },
    getInputRect: { type: Function, default: () => ({}) },
    isTextInputDate: { type: Boolean, default: !1 }
  },
  emits: [
    "close-picker",
    "select-date",
    "auto-apply",
    "time-update",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "update:internal-model-value",
    "recalculate-position",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "auto-apply-invalid",
    "date-update",
    "invalid-date",
    "overlay-toggle",
    "menu-blur"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = Se(null), o = z(() => {
      const { openOnTop: _e, ...$e } = r;
      return {
        ...$e,
        isMobile: b.value,
        flowStep: V.value,
        menuWrapRef: i.value
      };
    }), { setMenuFocused: l, setShiftKey: s, control: d } = dE(), u = lc(), { defaultedTextInput: f, defaultedInline: _, defaultedConfig: g, defaultedUI: v, handleEventPropagation: w } = da(r), { isMobile: b } = gE(g, r.shadow), p = Se(null), y = Se(0), S = Se(null), E = Se(!1), C = Se(null), B = Se(!1), O = (_e) => {
      B.value = !0, g.value.allowPreventDefault && _e.preventDefault(), Ns(_e, g.value, !0);
    };
    nn(() => {
      if (!r.shadow) {
        E.value = !0, D(), window.addEventListener("resize", D);
        const _e = $a(i);
        _e && !f.value.enabled && !_.value.enabled && (l(!0), F()), _e && (_e.addEventListener("pointerdown", O), _e.addEventListener("mousedown", O));
      }
      document.addEventListener("mousedown", Je);
    }), di(() => {
      window.removeEventListener("resize", D), document.removeEventListener("mousedown", Je);
      const _e = $a(i);
      _e && (_e.removeEventListener("pointerdown", O), _e.removeEventListener("mousedown", O));
    });
    const D = () => {
      const _e = $a(S);
      _e && (y.value = _e.getBoundingClientRect().width);
    }, { arrowRight: T, arrowLeft: P, arrowDown: I, arrowUp: M } = al(), { flowStep: V, updateFlowStep: N, childMount: q, resetFlow: j, handleFlow: ee } = Yq(r, a, C), de = z(() => r.monthPicker ? J6 : r.yearPicker ? Z6 : r.timePicker ? mq : r.quarterPicker ? Bq : Eq), Z = z(() => {
      var _e;
      if (g.value.arrowLeft) return g.value.arrowLeft;
      const $e = (_e = i.value) == null ? void 0 : _e.getBoundingClientRect(), Ze = r.getInputRect();
      return Ze?.width < y?.value && Ze?.left <= ($e?.left ?? 0) ? `${Ze?.width / 2}px` : Ze?.right >= ($e?.right ?? 0) && Ze?.width < y?.value ? `${y?.value - Ze?.width / 2}px` : "50%";
    }), F = () => {
      const _e = $a(i);
      _e && _e.focus({ preventScroll: !0 });
    }, Y = z(() => {
      var _e;
      return ((_e = C.value) == null ? void 0 : _e.getSidebarProps()) || {};
    }), se = () => {
      r.openOnTop && a("recalculate-position");
    }, X = li(u, "action"), he = z(() => r.monthPicker || r.yearPicker ? li(u, "monthYear") : r.timePicker ? li(u, "timePicker") : li(u, "shared")), ve = z(() => r.openOnTop ? "dp__arrow_bottom" : "dp__arrow_top"), pe = z(() => ({
      dp__menu_disabled: r.disabled,
      dp__menu_readonly: r.readonly,
      "dp-menu-loading": r.loading
    })), H = z(
      () => ({
        dp__menu: !0,
        dp__menu_index: !_.value.enabled,
        dp__relative: _.value.enabled,
        ...v.value.menu ?? {}
      })
    ), we = (_e) => {
      Ns(_e, g.value, !0);
    }, Me = (_e) => {
      r.escClose && (a("close-picker"), w(_e));
    }, Re = (_e) => {
      if (r.arrowNavigation) {
        if (_e === Br.up) return M();
        if (_e === Br.down) return I();
        if (_e === Br.left) return P();
        if (_e === Br.right) return T();
      } else _e === Br.left || _e === Br.up ? K("handleArrow", Br.left, 0, _e === Br.up) : K("handleArrow", Br.right, 0, _e === Br.down);
    }, ce = (_e) => {
      s(_e.shiftKey), !r.disableMonthYearSelect && _e.code === Gn.tab && _e.target.classList.contains("dp__menu") && d.value.shiftKeyInMenu && (_e.preventDefault(), Ns(_e, g.value, !0), a("close-picker"));
    }, te = () => {
      F(), a("time-picker-close");
    }, G = (_e) => {
      var $e, Ze, _t;
      ($e = C.value) == null || $e.toggleTimePicker(!1, !1), (Ze = C.value) == null || Ze.toggleMonthPicker(!1, !1, _e), (_t = C.value) == null || _t.toggleYearPicker(!1, !1, _e);
    }, le = (_e, $e = 0) => {
      var Ze, _t, It;
      return _e === "month" ? (Ze = C.value) == null ? void 0 : Ze.toggleMonthPicker(!1, !0, $e) : _e === "year" ? (_t = C.value) == null ? void 0 : _t.toggleYearPicker(!1, !0, $e) : _e === "time" ? (It = C.value) == null ? void 0 : It.toggleTimePicker(!0, !1) : G($e);
    }, K = (_e, ...$e) => {
      var Ze, _t;
      (Ze = C.value) != null && Ze[_e] && ((_t = C.value) == null || _t[_e](...$e));
    }, Ce = () => {
      K("selectCurrentDate");
    }, Te = (_e, $e) => {
      K("presetDate", yo(_e), $e);
    }, ie = () => {
      K("clearHoverDate");
    }, ge = (_e, $e) => {
      K("updateMonthYear", _e, $e);
    }, Pe = (_e, $e) => {
      _e.preventDefault(), Re($e);
    }, Ie = (_e) => {
      var $e, Ze, _t;
      if (ce(_e), _e.key === Gn.home || _e.key === Gn.end)
        return K(
          "selectWeekDate",
          _e.key === Gn.home,
          _e.target.getAttribute("id")
        );
      switch ((_e.key === Gn.pageUp || _e.key === Gn.pageDown) && (_e.shiftKey ? (K("changeYear", _e.key === Gn.pageUp), ($e = vb(i.value, "overlay-year")) == null || $e.focus()) : (K("changeMonth", _e.key === Gn.pageUp), (Ze = vb(i.value, _e.key === Gn.pageUp ? "action-prev" : "action-next")) == null || Ze.focus()), _e.target.getAttribute("id") && ((_t = i.value) == null || _t.focus({ preventScroll: !0 }))), _e.key) {
        case Gn.esc:
          return Me(_e);
        case Gn.arrowLeft:
          return Pe(_e, Br.left);
        case Gn.arrowRight:
          return Pe(_e, Br.right);
        case Gn.arrowUp:
          return Pe(_e, Br.up);
        case Gn.arrowDown:
          return Pe(_e, Br.down);
        default:
          return;
      }
    }, Je = (_e) => {
      var $e;
      _.value.enabled && !_.value.input && !(($e = i.value) != null && $e.contains(_e.target)) && B.value && (B.value = !1, a("menu-blur"));
    };
    return t({
      updateMonthYear: ge,
      switchView: le,
      handleFlow: ee,
      onValueCleared: () => {
        var _e, $e;
        ($e = (_e = C.value) == null ? void 0 : _e.setStartTime) == null || $e.call(_e);
      }
    }), (_e, $e) => {
      var Ze, _t, It;
      return ne(), Be("div", {
        id: _e.uid ? `dp-menu-${_e.uid}` : void 0,
        ref_key: "dpMenuRef",
        ref: i,
        tabindex: fe(_).enabled ? void 0 : "0",
        role: fe(_).enabled ? void 0 : "dialog",
        "aria-label": (Ze = _e.ariaLabels) == null ? void 0 : Ze.menu,
        class: Ee(H.value),
        style: Xe({ "--dp-arrow-left": Z.value }),
        onMouseleave: ie,
        onClick: we,
        onKeydown: Ie
      }, [
        (_e.disabled || _e.readonly) && fe(_).enabled || _e.loading ? (ne(), Be("div", {
          key: 0,
          class: Ee(pe.value)
        }, [
          _e.loading ? (ne(), Be("div", Mq, $e[19] || ($e[19] = [
            A("span", { class: "dp--menu-loader" }, null, -1)
          ]))) : ke("", !0)
        ], 2)) : ke("", !0),
        _e.$slots["menu-header"] ? (ne(), Be("div", Rq, [
          bt(_e.$slots, "menu-header")
        ])) : ke("", !0),
        !fe(_).enabled && !_e.teleportCenter ? (ne(), Be("div", {
          key: 2,
          class: Ee(ve.value)
        }, null, 2)) : ke("", !0),
        A("div", {
          ref_key: "innerMenuRef",
          ref: S,
          class: Ee({
            dp__menu_content_wrapper: ((_t = _e.presetDates) == null ? void 0 : _t.length) || !!_e.$slots["left-sidebar"] || !!_e.$slots["right-sidebar"],
            "dp--menu-content-wrapper-collapsed": e.collapse && (((It = _e.presetDates) == null ? void 0 : It.length) || !!_e.$slots["left-sidebar"] || !!_e.$slots["right-sidebar"])
          }),
          "data-dp-mobile": fe(b),
          style: Xe({ "--dp-menu-width": `${y.value}px` })
        }, [
          _e.$slots["left-sidebar"] ? (ne(), Be("div", Fq, [
            bt(_e.$slots, "left-sidebar", Xn(Ca(Y.value)))
          ])) : ke("", !0),
          _e.presetDates.length ? (ne(), Be("div", {
            key: 1,
            class: Ee({ "dp--preset-dates-collapsed": e.collapse, "dp--preset-dates": !0 }),
            "data-dp-mobile": fe(b)
          }, [
            (ne(!0), Be(Qe, null, un(_e.presetDates, (rt, Dt) => (ne(), Be(Qe, { key: Dt }, [
              rt.slot ? bt(_e.$slots, rt.slot, {
                key: 0,
                presetDate: Te,
                label: rt.label,
                value: rt.value
              }) : (ne(), Be("button", {
                key: 1,
                type: "button",
                style: Xe(rt.style || {}),
                class: Ee(["dp__btn dp--preset-range", { "dp--preset-range-collapsed": e.collapse }]),
                "data-test-id": rt.testId ?? void 0,
                "data-dp-mobile": fe(b),
                onClick: Jn((en) => Te(rt.value, rt.noTz), ["prevent"]),
                onKeydown: (en) => fe(Lr)(en, () => Te(rt.value, rt.noTz), !0)
              }, W(rt.label), 47, Uq))
            ], 64))), 128))
          ], 10, Nq)) : ke("", !0),
          A("div", {
            ref_key: "calendarWrapperRef",
            ref: p,
            class: "dp__instance_calendar",
            role: "document"
          }, [
            (ne(), Fe(Hu(de.value), He({
              ref_key: "dynCmpRef",
              ref: C
            }, o.value, {
              "flow-step": fe(V),
              onMount: fe(q),
              onUpdateFlowStep: fe(N),
              onResetFlow: fe(j),
              onFocusMenu: F,
              onSelectDate: $e[0] || ($e[0] = (rt) => _e.$emit("select-date")),
              onDateUpdate: $e[1] || ($e[1] = (rt) => _e.$emit("date-update", rt)),
              onTooltipOpen: $e[2] || ($e[2] = (rt) => _e.$emit("tooltip-open", rt)),
              onTooltipClose: $e[3] || ($e[3] = (rt) => _e.$emit("tooltip-close", rt)),
              onAutoApply: $e[4] || ($e[4] = (rt) => _e.$emit("auto-apply", rt)),
              onRangeStart: $e[5] || ($e[5] = (rt) => _e.$emit("range-start", rt)),
              onRangeEnd: $e[6] || ($e[6] = (rt) => _e.$emit("range-end", rt)),
              onInvalidFixedRange: $e[7] || ($e[7] = (rt) => _e.$emit("invalid-fixed-range", rt)),
              onTimeUpdate: $e[8] || ($e[8] = (rt) => _e.$emit("time-update")),
              onAmPmChange: $e[9] || ($e[9] = (rt) => _e.$emit("am-pm-change", rt)),
              onTimePickerOpen: $e[10] || ($e[10] = (rt) => _e.$emit("time-picker-open", rt)),
              onTimePickerClose: te,
              onRecalculatePosition: se,
              onUpdateMonthYear: $e[11] || ($e[11] = (rt) => _e.$emit("update-month-year", rt)),
              onAutoApplyInvalid: $e[12] || ($e[12] = (rt) => _e.$emit("auto-apply-invalid", rt)),
              onInvalidDate: $e[13] || ($e[13] = (rt) => _e.$emit("invalid-date", rt)),
              onOverlayToggle: $e[14] || ($e[14] = (rt) => _e.$emit("overlay-toggle", rt)),
              "onUpdate:internalModelValue": $e[15] || ($e[15] = (rt) => _e.$emit("update:internal-model-value", rt))
            }), dr({ _: 2 }, [
              un(he.value, (rt, Dt) => ({
                name: rt,
                fn: x((en) => [
                  bt(_e.$slots, rt, Xn(Ca({ ...en })))
                ])
              }))
            ]), 1040, ["flow-step", "onMount", "onUpdateFlowStep", "onResetFlow"]))
          ], 512),
          _e.$slots["right-sidebar"] ? (ne(), Be("div", $q, [
            bt(_e.$slots, "right-sidebar", Xn(Ca(Y.value)))
          ])) : ke("", !0),
          _e.$slots["action-extra"] ? (ne(), Be("div", qq, [
            _e.$slots["action-extra"] ? bt(_e.$slots, "action-extra", {
              key: 0,
              selectCurrentDate: Ce
            }) : ke("", !0)
          ])) : ke("", !0)
        ], 14, Lq),
        !_e.autoApply || fe(g).keepActionRow ? (ne(), Fe(q6, He({
          key: 3,
          "menu-mount": E.value
        }, o.value, {
          "calendar-width": y.value,
          onClosePicker: $e[16] || ($e[16] = (rt) => _e.$emit("close-picker")),
          onSelectDate: $e[17] || ($e[17] = (rt) => _e.$emit("select-date")),
          onInvalidSelect: $e[18] || ($e[18] = (rt) => _e.$emit("invalid-select")),
          onSelectNow: Ce
        }), dr({ _: 2 }, [
          un(fe(X), (rt, Dt) => ({
            name: rt,
            fn: x((en) => [
              bt(_e.$slots, rt, Xn(Ca({ ...en })))
            ])
          }))
        ]), 1040, ["menu-mount", "calendar-width"])) : ke("", !0)
      ], 46, Vq);
    };
  }
});
var nu = /* @__PURE__ */ ((e) => (e.center = "center", e.left = "left", e.right = "right", e))(nu || {});
const Hq = ({
  menuRef: e,
  menuRefInner: t,
  inputRef: n,
  pickerWrapperRef: a,
  inline: r,
  emit: i,
  props: o,
  slots: l
}) => {
  const { defaultedConfig: s } = da(o), d = Se({}), u = Se(!1), f = Se({
    top: "0",
    left: "0"
  }), _ = Se(!1), g = be(o, "teleportCenter");
  nt(g, () => {
    f.value = JSON.parse(JSON.stringify({})), C();
  });
  const v = (j) => {
    if (o.teleport) {
      const ee = j.getBoundingClientRect();
      return {
        left: ee.left + window.scrollX,
        top: ee.top + window.scrollY
      };
    }
    return { top: 0, left: 0 };
  }, w = (j, ee) => {
    f.value.left = `${j + ee - d.value.width}px`;
  }, b = (j) => {
    f.value.left = `${j}px`;
  }, p = (j, ee) => {
    o.position === nu.left && b(j), o.position === nu.right && w(j, ee), o.position === nu.center && (f.value.left = `${j + ee / 2 - d.value.width / 2}px`);
  }, y = (j) => {
    const { width: ee, height: de } = j.getBoundingClientRect(), { top: Z, left: F } = v(j);
    return { top: +Z, left: +F, width: ee, height: de };
  }, S = () => {
    f.value.left = "50%", f.value.top = "50%", f.value.transform = "translate(-50%, -50%)", f.value.position = "fixed", delete f.value.opacity;
  }, E = () => {
    const j = $a(n);
    f.value = o.altPosition(j);
  }, C = (j = !0) => {
    var ee;
    if (!r.value.enabled) {
      if (g.value) return S();
      if (o.altPosition !== null) return E();
      if (j) {
        const de = o.teleport ? (ee = t.value) == null ? void 0 : ee.$el : e.value;
        de && (d.value = de.getBoundingClientRect()), i("recalculate-position");
      }
      return M();
    }
  }, B = ({ inputEl: j, left: ee, width: de }) => {
    window.screen.width > 768 && !u.value && p(ee, de), T(j);
  }, O = (j) => {
    const { top: ee, left: de, height: Z, width: F } = y(j);
    f.value.top = `${Z + ee + +o.offset}px`, _.value = !1, u.value || (f.value.left = `${de + F / 2 - d.value.width / 2}px`), B({ inputEl: j, left: de, width: F });
  }, D = (j) => {
    const { top: ee, left: de, width: Z } = y(j);
    f.value.top = `${ee - +o.offset - d.value.height}px`, _.value = !0, B({ inputEl: j, left: de, width: Z });
  }, T = (j) => {
    if (o.autoPosition) {
      const { left: ee, width: de } = y(j), { left: Z, right: F } = d.value;
      if (!u.value) {
        if (Math.abs(Z) !== Math.abs(F)) {
          if (Z <= 0)
            return u.value = !0, b(ee);
          if (F >= document.documentElement.clientWidth)
            return u.value = !0, w(ee, de);
        }
        return p(ee, de);
      }
    }
  }, P = () => {
    const j = $a(n);
    if (j) {
      if (o.autoPosition === Fi.top) return Fi.top;
      if (o.autoPosition === Fi.bottom) return Fi.bottom;
      const { height: ee } = d.value, { top: de, height: Z } = j.getBoundingClientRect(), F = window.innerHeight - de - Z, Y = de;
      return ee <= F ? Fi.bottom : ee > F && ee <= Y ? Fi.top : F >= Y ? Fi.bottom : Fi.top;
    }
    return Fi.bottom;
  }, I = (j) => P() === Fi.bottom ? O(j) : D(j), M = () => {
    const j = $a(n);
    if (j)
      return o.autoPosition ? I(j) : O(j);
  }, V = function(j) {
    if (j) {
      const ee = j.scrollHeight > j.clientHeight, de = window.getComputedStyle(j).overflowY.indexOf("hidden") !== -1;
      return ee && !de;
    }
    return !0;
  }, N = function(j) {
    return !j || j === document.body || j.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? window : V(j) ? j : N(
      j.assignedSlot && s.value.shadowDom ? j.assignedSlot.parentNode : j.parentNode
    );
  }, q = (j) => {
    if (j)
      switch (o.position) {
        case nu.left:
          return { left: 0, transform: "translateX(0)" };
        case nu.right:
          return { left: `${j.width}px`, transform: "translateX(-100%)" };
        default:
          return { left: `${j.width / 2}px`, transform: "translateX(-50%)" };
      }
    return {};
  };
  return {
    openOnTop: _,
    menuStyle: f,
    xCorrect: u,
    setMenuPosition: C,
    getScrollableParent: N,
    shadowRender: (j, ee, de) => {
      var Z, F, Y;
      const se = document.createElement("div"), X = (Z = $a(n)) == null ? void 0 : Z.getBoundingClientRect();
      se.setAttribute("id", "dp--temp-container");
      const he = (F = a.value) != null && F.clientWidth ? a.value : document.body;
      he.append(se);
      const ve = q(X), pe = s.value.shadowDom ? Object.keys(l).filter(
        (we) => ["right-sidebar", "left-sidebar", "top-extra", "action-extra"].includes(we)
      ) : Object.keys(l), H = Co(
        ee,
        {
          ...de,
          shadow: !0,
          style: { opacity: 0, position: "absolute", ...ve }
        },
        Object.fromEntries(pe.map((we) => [we, l[we]]))
      );
      j != null && (H.appContext = j.appContext), p_(H, se), d.value = (Y = H.el) == null ? void 0 : Y.getBoundingClientRect(), p_(null, se), he.removeChild(se);
    }
  };
}, xs = [
  { name: "clock-icon", use: ["time", "calendar", "shared"] },
  { name: "arrow-left", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-right", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-up", use: ["time", "calendar", "month-year", "shared"] },
  { name: "arrow-down", use: ["time", "calendar", "month-year", "shared"] },
  { name: "calendar-icon", use: ["month-year", "time", "calendar", "shared", "year-mode"] },
  { name: "day", use: ["calendar", "shared"] },
  { name: "month-overlay-value", use: ["calendar", "month-year", "shared"] },
  { name: "year-overlay-value", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "year-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay-header", use: ["month-year", "shared"] },
  { name: "year-overlay-header", use: ["month-year", "shared"] },
  { name: "hours-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "hours-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "hours", use: ["calendar", "time", "shared"] },
  { name: "minutes", use: ["calendar", "time", "shared"] },
  { name: "month", use: ["calendar", "month-year", "shared"] },
  { name: "year", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "action-buttons", use: ["action"] },
  { name: "action-preview", use: ["action"] },
  { name: "calendar-header", use: ["calendar", "shared"] },
  { name: "marker-tooltip", use: ["calendar", "shared"] },
  { name: "action-extra", use: ["menu"] },
  { name: "time-picker-overlay", use: ["calendar", "time", "shared"] },
  { name: "am-pm-button", use: ["calendar", "time", "shared"] },
  { name: "left-sidebar", use: ["menu"] },
  { name: "right-sidebar", use: ["menu"] },
  { name: "month-year", use: ["month-year", "shared"] },
  { name: "time-picker", use: ["menu", "shared"] },
  { name: "action-row", use: ["action"] },
  { name: "marker", use: ["calendar", "shared"] },
  { name: "quarter", use: ["shared"] },
  { name: "top-extra", use: ["shared", "month-year"] },
  { name: "tp-inline-arrow-up", use: ["shared", "time"] },
  { name: "tp-inline-arrow-down", use: ["shared", "time"] },
  { name: "menu-header", use: ["menu"] }
], zq = [{ name: "trigger" }, { name: "input-icon" }, { name: "clear-icon" }, { name: "dp-input" }], Wq = {
  all: () => xs,
  monthYear: () => xs.filter((e) => e.use.includes("month-year")),
  input: () => zq,
  timePicker: () => xs.filter((e) => e.use.includes("time")),
  action: () => xs.filter((e) => e.use.includes("action")),
  calendar: () => xs.filter((e) => e.use.includes("calendar")),
  menu: () => xs.filter((e) => e.use.includes("menu")),
  shared: () => xs.filter((e) => e.use.includes("shared")),
  yearMode: () => xs.filter((e) => e.use.includes("year-mode"))
}, li = (e, t, n) => {
  const a = [];
  return Wq[t]().forEach((r) => {
    e[r.name] && a.push(r.name);
  }), n != null && n.length && n.forEach((r) => {
    r.slot && a.push(r.slot);
  }), a;
}, Yf = (e) => {
  const t = z(() => (a) => e.value ? a ? e.value.open : e.value.close : ""), n = z(() => (a) => e.value ? a ? e.value.menuAppearTop : e.value.menuAppearBottom : "");
  return { transitionName: t, showTransition: !!e.value, menuTransition: n };
}, Kf = (e, t, n) => {
  const { defaultedRange: a, defaultedTz: r } = da(e), i = ut(Kr(ut(), r.value.timezone)), o = Se([{ month: fn(i), year: Yt(i) }]), l = (_) => {
    const g = {
      hours: ts(i),
      minutes: Ks(i),
      seconds: 0
    };
    return a.value.enabled ? [g[_], g[_]] : g[_];
  }, s = oa({
    hours: l("hours"),
    minutes: l("minutes"),
    seconds: l("seconds")
  });
  nt(
    a,
    (_, g) => {
      _.enabled !== g.enabled && (s.hours = l("hours"), s.minutes = l("minutes"), s.seconds = l("seconds"));
    },
    { deep: !0 }
  );
  const d = z({
    get: () => e.internalModelValue,
    set: (_) => {
      !e.readonly && !e.disabled && t("update:internal-model-value", _);
    }
  }), u = z(
    () => (_) => o.value[_] ? o.value[_].month : 0
  ), f = z(
    () => (_) => o.value[_] ? o.value[_].year : 0
  );
  return nt(
    d,
    (_, g) => {
      n && JSON.stringify(_ ?? {}) !== JSON.stringify(g ?? {}) && n();
    },
    { deep: !0 }
  ), {
    calendars: o,
    time: s,
    modelValue: d,
    month: u,
    year: f,
    today: i
  };
}, jq = (e, t) => {
  const {
    defaultedMultiCalendars: n,
    defaultedMultiDates: a,
    defaultedUI: r,
    defaultedHighlight: i,
    defaultedTz: o,
    propDates: l,
    defaultedRange: s
  } = da(t), { isDisabled: d } = rl(t), u = Se(null), f = Se(Kr(/* @__PURE__ */ new Date(), o.value.timezone)), _ = (H) => {
    !H.current && t.hideOffsetDates || (u.value = H.value);
  }, g = () => {
    u.value = null;
  }, v = (H) => Array.isArray(e.value) && s.value.enabled && e.value[0] && u.value ? H ? Oa(u.value, e.value[0]) : ka(u.value, e.value[0]) : !0, w = (H, we) => {
    const Me = () => e.value ? we ? e.value[0] || null : e.value[1] : null, Re = e.value && Array.isArray(e.value) ? Me() : null;
    return mn(ut(H.value), Re);
  }, b = (H) => {
    const we = Array.isArray(e.value) ? e.value[0] : null;
    return H ? !ka(u.value ?? null, we) : !0;
  }, p = (H, we = !0) => (s.value.enabled || t.weekPicker) && Array.isArray(e.value) && e.value.length === 2 ? t.hideOffsetDates && !H.current ? !1 : mn(ut(H.value), e.value[we ? 0 : 1]) : s.value.enabled ? w(H, we) && b(we) || mn(H.value, Array.isArray(e.value) ? e.value[0] : null) && v(we) : !1, y = (H, we) => {
    if (Array.isArray(e.value) && e.value[0] && e.value.length === 1) {
      const Me = mn(H.value, u.value);
      return we ? Oa(e.value[0], H.value) && Me : ka(e.value[0], H.value) && Me;
    }
    return !1;
  }, S = (H) => !e.value || t.hideOffsetDates && !H.current ? !1 : s.value.enabled ? t.modelAuto && Array.isArray(e.value) ? mn(H.value, e.value[0] ? e.value[0] : f.value) : !1 : a.value.enabled && Array.isArray(e.value) ? e.value.some((we) => mn(we, H.value)) : mn(H.value, e.value ? e.value : f.value), E = (H) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        if (t.hideOffsetDates && !H.current) return !1;
        const we = Ti(u.value, +s.value.autoRange), Me = Ho(ut(u.value), t.weekStart);
        return t.weekPicker ? mn(Me[1], ut(H.value)) : mn(we, ut(H.value));
      }
      return !1;
    }
    return !1;
  }, C = (H) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        const we = Ti(u.value, +s.value.autoRange);
        if (t.hideOffsetDates && !H.current) return !1;
        const Me = Ho(ut(u.value), t.weekStart);
        return t.weekPicker ? Oa(H.value, Me[0]) && ka(H.value, Me[1]) : Oa(H.value, u.value) && ka(H.value, we);
      }
      return !1;
    }
    return !1;
  }, B = (H) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        if (t.hideOffsetDates && !H.current) return !1;
        const we = Ho(ut(u.value), t.weekStart);
        return t.weekPicker ? mn(we[0], H.value) : mn(u.value, H.value);
      }
      return !1;
    }
    return !1;
  }, O = (H) => Af(e.value, u.value, H.value), D = () => t.modelAuto && Array.isArray(t.internalModelValue) ? !!t.internalModelValue[0] : !1, T = () => t.modelAuto ? ZI(t.internalModelValue) : !0, P = (H) => {
    if (t.weekPicker) return !1;
    const we = s.value.enabled ? !p(H) && !p(H, !1) : !0;
    return !d(H.value) && !S(H) && !(!H.current && t.hideOffsetDates) && we;
  }, I = (H) => s.value.enabled ? t.modelAuto ? D() && S(H) : !1 : S(H), M = (H) => i.value ? d6(H.value, l.value.highlight) : !1, V = (H) => {
    const we = d(H.value);
    return we && (typeof i.value == "function" ? !i.value(H.value, we) : !i.value.options.highlightDisabled);
  }, N = (H) => {
    var we;
    return typeof i.value == "function" ? i.value(H.value) : (we = i.value.weekdays) == null ? void 0 : we.includes(H.value.getDay());
  }, q = (H) => (s.value.enabled || t.weekPicker) && (!(n.value.count > 0) || H.current) && T() && !(!H.current && t.hideOffsetDates) && !S(H) ? O(H) : !1, j = (H) => {
    if (Array.isArray(e.value) && e.value.length === 1) {
      const { before: we, after: Me } = WC(+s.value.maxRange, e.value[0]);
      return Ou(H.value, we) || nc(H.value, Me);
    }
    return !1;
  }, ee = (H) => {
    if (Array.isArray(e.value) && e.value.length === 1) {
      const { before: we, after: Me } = WC(+s.value.minRange, e.value[0]);
      return Af([we, Me], e.value[0], H.value);
    }
    return !1;
  }, de = (H) => s.value.enabled && (s.value.maxRange || s.value.minRange) ? s.value.maxRange && s.value.minRange ? j(H) || ee(H) : s.value.maxRange ? j(H) : ee(H) : !1, Z = (H) => {
    const { isRangeStart: we, isRangeEnd: Me } = X(H), Re = s.value.enabled ? we || Me : !1;
    return {
      dp__cell_offset: !H.current,
      dp__pointer: !t.disabled && !(!H.current && t.hideOffsetDates) && !d(H.value) && !de(H),
      dp__cell_disabled: d(H.value) || de(H),
      dp__cell_highlight: !V(H) && (M(H) || N(H)) && !I(H) && !Re && !B(H) && !(q(H) && t.weekPicker) && !Me,
      dp__cell_highlight_active: !V(H) && (M(H) || N(H)) && I(H),
      dp__today: !t.noToday && mn(H.value, f.value) && H.current,
      "dp--past": ka(H.value, f.value),
      "dp--future": Oa(H.value, f.value)
    };
  }, F = (H) => ({
    dp__active_date: I(H),
    dp__date_hover: P(H)
  }), Y = (H) => {
    if (e.value && !Array.isArray(e.value)) {
      const we = Ho(e.value, t.weekStart);
      return {
        ...ve(H),
        dp__range_start: mn(we[0], H.value),
        dp__range_end: mn(we[1], H.value),
        dp__range_between_week: Oa(H.value, we[0]) && ka(H.value, we[1])
      };
    }
    return {
      ...ve(H)
    };
  }, se = (H) => {
    if (e.value && Array.isArray(e.value)) {
      const we = Ho(e.value[0], t.weekStart), Me = e.value[1] ? Ho(e.value[1], t.weekStart) : [];
      return {
        ...ve(H),
        dp__range_start: mn(we[0], H.value) || mn(Me[0], H.value),
        dp__range_end: mn(we[1], H.value) || mn(Me[1], H.value),
        dp__range_between_week: Oa(H.value, we[0]) && ka(H.value, we[1]) || Oa(H.value, Me[0]) && ka(H.value, Me[1]),
        dp__range_between: Oa(H.value, we[1]) && ka(H.value, Me[0])
      };
    }
    return {
      ...ve(H)
    };
  }, X = (H) => {
    const we = n.value.count > 0 ? H.current && p(H) && T() : p(H) && T(), Me = n.value.count > 0 ? H.current && p(H, !1) && T() : p(H, !1) && T();
    return { isRangeStart: we, isRangeEnd: Me };
  }, he = (H) => {
    const { isRangeStart: we, isRangeEnd: Me } = X(H);
    return {
      dp__range_start: we,
      dp__range_end: Me,
      dp__range_between: q(H),
      dp__date_hover: mn(H.value, u.value) && !we && !Me && !t.weekPicker,
      dp__date_hover_start: y(H, !0),
      dp__date_hover_end: y(H, !1)
    };
  }, ve = (H) => ({
    ...he(H),
    dp__cell_auto_range: C(H),
    dp__cell_auto_range_start: B(H),
    dp__cell_auto_range_end: E(H)
  }), pe = (H) => s.value.enabled ? s.value.autoRange ? ve(H) : t.modelAuto ? { ...F(H), ...he(H) } : t.weekPicker ? se(H) : he(H) : t.weekPicker ? Y(H) : F(H);
  return {
    setHoverDate: _,
    clearHoverDate: g,
    getDayClassData: (H) => t.hideOffsetDates && !H.current ? {} : {
      ...Z(H),
      ...pe(H),
      [t.dayClass ? t.dayClass(H.value, t.internalModelValue) : ""]: !0,
      ...r.value.calendarCell ?? {}
    }
  };
}, rl = (e) => {
  const { defaultedFilters: t, defaultedRange: n, propDates: a, defaultedMultiDates: r } = da(e), i = (N) => a.value.disabledDates ? typeof a.value.disabledDates == "function" ? a.value.disabledDates(ut(N)) : !!L_(N, a.value.disabledDates) : !1, o = (N) => a.value.maxDate ? e.yearPicker ? Yt(N) > Yt(a.value.maxDate) : Oa(N, a.value.maxDate) : !1, l = (N) => a.value.minDate ? e.yearPicker ? Yt(N) < Yt(a.value.minDate) : ka(N, a.value.minDate) : !1, s = (N) => {
    const q = o(N), j = l(N), ee = i(N), de = t.value.months.map((X) => +X).includes(fn(N)), Z = e.disabledWeekDays.length ? e.disabledWeekDays.some((X) => +X === XU(N)) : !1, F = g(N), Y = Yt(N), se = Y < +e.yearRange[0] || Y > +e.yearRange[1];
    return !(q || j || ee || de || se || Z || F);
  }, d = (N, q) => ka(...Rs(a.value.minDate, N, q)) || mn(...Rs(a.value.minDate, N, q)), u = (N, q) => Oa(...Rs(a.value.maxDate, N, q)) || mn(...Rs(a.value.maxDate, N, q)), f = (N, q, j) => {
    let ee = !1;
    return a.value.maxDate && j && u(N, q) && (ee = !0), a.value.minDate && !j && d(N, q) && (ee = !0), ee;
  }, _ = (N, q, j, ee) => {
    let de = !1;
    return ee && (a.value.minDate || a.value.maxDate) ? a.value.minDate && a.value.maxDate ? de = f(N, q, j) : (a.value.minDate && d(N, q) || a.value.maxDate && u(N, q)) && (de = !0) : de = !0, de;
  }, g = (N) => Array.isArray(a.value.allowedDates) && !a.value.allowedDates.length ? !0 : a.value.allowedDates ? !L_(N, a.value.allowedDates, nE(e.monthPicker, e.yearPicker)) : !1, v = (N) => !s(N), w = (N) => n.value.noDisabledRange ? !MI({ start: N[0], end: N[1] }).some((q) => v(q)) : !0, b = (N) => {
    if (N) {
      const q = Yt(N);
      return q >= +e.yearRange[0] && q <= e.yearRange[1];
    }
    return !0;
  }, p = (N, q) => !!(Array.isArray(N) && N[q] && (n.value.maxRange || n.value.minRange) && b(N[q])), y = (N, q, j = 0) => {
    if (p(q, j) && b(N)) {
      const ee = DI(N, q[j]), de = oE(q[j], N), Z = de.length === 1 ? 0 : de.filter((Y) => v(Y)).length, F = Math.abs(ee) - (n.value.minMaxRawRange ? 0 : Z);
      if (n.value.minRange && n.value.maxRange)
        return F >= +n.value.minRange && F <= +n.value.maxRange;
      if (n.value.minRange) return F >= +n.value.minRange;
      if (n.value.maxRange) return F <= +n.value.maxRange;
    }
    return !0;
  }, S = () => !e.enableTimePicker || e.monthPicker || e.yearPicker || e.ignoreTimeValidation, E = (N) => Array.isArray(N) ? [N[0] ? Zg(N[0]) : null, N[1] ? Zg(N[1]) : null] : Zg(N), C = (N, q, j) => N.find(
    (ee) => +ee.hours === ts(q) && ee.minutes === "*" ? !0 : +ee.minutes === Ks(q) && +ee.hours === ts(q)
  ) && j, B = (N, q, j) => {
    const [ee, de] = N, [Z, F] = q;
    return !C(ee, Z, j) && !C(de, F, j) && j;
  }, O = (N, q) => {
    const j = Array.isArray(q) ? q : [q];
    return Array.isArray(e.disabledTimes) ? Array.isArray(e.disabledTimes[0]) ? B(e.disabledTimes, j, N) : !j.some((ee) => C(e.disabledTimes, ee, N)) : N;
  }, D = (N, q) => {
    const j = Array.isArray(q) ? [Kl(q[0]), q[1] ? Kl(q[1]) : void 0] : Kl(q), ee = !e.disabledTimes(j);
    return N && ee;
  }, T = (N, q) => e.disabledTimes ? Array.isArray(e.disabledTimes) ? O(q, N) : D(q, N) : q, P = (N) => {
    let q = !0;
    if (!N || S()) return !0;
    const j = !a.value.minDate && !a.value.maxDate ? E(N) : N;
    return (e.maxTime || a.value.maxDate) && (q = zC(
      e.maxTime,
      a.value.maxDate,
      "max",
      Za(j),
      q
    )), (e.minTime || a.value.minDate) && (q = zC(
      e.minTime,
      a.value.minDate,
      "min",
      Za(j),
      q
    )), T(N, q);
  }, I = (N) => {
    if (!e.monthPicker) return !0;
    let q = !0;
    const j = ut(Ui(N));
    if (a.value.minDate && a.value.maxDate) {
      const ee = ut(Ui(a.value.minDate)), de = ut(Ui(a.value.maxDate));
      return Oa(j, ee) && ka(j, de) || mn(j, ee) || mn(j, de);
    }
    if (a.value.minDate) {
      const ee = ut(Ui(a.value.minDate));
      q = Oa(j, ee) || mn(j, ee);
    }
    if (a.value.maxDate) {
      const ee = ut(Ui(a.value.maxDate));
      q = ka(j, ee) || mn(j, ee);
    }
    return q;
  }, M = z(() => (N) => !e.enableTimePicker || e.ignoreTimeValidation ? !0 : P(N)), V = z(() => (N) => e.monthPicker ? Array.isArray(N) && (n.value.enabled || r.value.enabled) ? !N.filter((q) => !I(q)).length : I(N) : !0);
  return {
    isDisabled: v,
    validateDate: s,
    validateMonthYearInRange: _,
    isDateRangeAllowed: w,
    checkMinMaxRange: y,
    isValidTime: P,
    isTimeValid: M,
    isMonthValid: V
  };
}, pp = () => {
  const e = z(() => (a, r) => a?.includes(r)), t = z(() => (a, r) => a.count ? a.solo ? !0 : r === 0 : !0), n = z(() => (a, r) => a.count ? a.solo ? !0 : r === a.count - 1 : !0);
  return { hideNavigationButtons: e, showLeftIcon: t, showRightIcon: n };
}, Yq = (e, t, n) => {
  const a = Se(0), r = oa({
    [Yl.timePicker]: !e.enableTimePicker || e.timePicker || e.monthPicker,
    [Yl.calendar]: !1,
    [Yl.header]: !1
  }), i = z(() => e.monthPicker || e.timePicker), o = (f) => {
    var _;
    if ((_ = e.flow) != null && _.length) {
      if (!f && i.value) return u();
      r[f] = !0, Object.keys(r).filter((g) => !r[g]).length || u();
    }
  }, l = () => {
    var f, _;
    (f = e.flow) != null && f.length && a.value !== -1 && (a.value += 1, t("flow-step", a.value), u()), ((_ = e.flow) == null ? void 0 : _.length) === a.value && Vt().then(() => s());
  }, s = () => {
    a.value = -1;
  }, d = (f, _, ...g) => {
    var v, w;
    e.flow[a.value] === f && n.value && ((w = (v = n.value)[_]) == null || w.call(v, ...g));
  }, u = (f = 0) => {
    f && (a.value += f), d(br.month, "toggleMonthPicker", !0), d(br.year, "toggleYearPicker", !0), d(br.calendar, "toggleTimePicker", !1, !0), d(br.time, "toggleTimePicker", !0, !0);
    const _ = e.flow[a.value];
    (_ === br.hours || _ === br.minutes || _ === br.seconds) && d(_, "toggleTimePicker", !0, !0, _);
  };
  return { childMount: o, updateFlowStep: l, resetFlow: s, handleFlow: u, flowStep: a };
}, Kq = {
  key: 1,
  class: "dp__input_wrap"
}, Gq = ["id", "name", "inputmode", "placeholder", "disabled", "readonly", "required", "value", "autocomplete", "aria-label", "aria-disabled", "aria-invalid"], Qq = {
  key: 2,
  class: "dp--clear-btn"
}, Jq = ["aria-label"], Xq = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerInput",
  props: {
    isMenuOpen: { type: Boolean, default: !1 },
    inputValue: { type: String, default: "" },
    ...mp
  },
  emits: [
    "clear",
    "open",
    "update:input-value",
    "set-input-date",
    "close",
    "select-date",
    "set-empty-date",
    "toggle",
    "focus-prev",
    "focus",
    "blur",
    "real-blur",
    "text-input"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      defaultedTextInput: i,
      defaultedAriaLabels: o,
      defaultedInline: l,
      defaultedConfig: s,
      defaultedRange: d,
      defaultedMultiDates: u,
      defaultedUI: f,
      getDefaultPattern: _,
      getDefaultStartTime: g
    } = da(r), { checkMinMaxRange: v } = rl(r), w = Se(), b = Se(null), p = Se(!1), y = Se(!1), S = z(
      () => ({
        dp__pointer: !r.disabled && !r.readonly && !i.value.enabled,
        dp__disabled: r.disabled,
        dp__input_readonly: !i.value.enabled,
        dp__input: !0,
        dp__input_icon_pad: !r.hideInputIcon,
        dp__input_valid: typeof r.state == "boolean" ? r.state : !1,
        dp__input_invalid: typeof r.state == "boolean" ? !r.state : !1,
        dp__input_focus: p.value || r.isMenuOpen,
        dp__input_reg: !i.value.enabled,
        ...f.value.input ?? {}
      })
    ), E = () => {
      a("set-input-date", null), r.clearable && r.autoApply && (a("set-empty-date"), w.value = null);
    }, C = (Y) => {
      const se = g();
      return m6(
        Y,
        i.value.format ?? _(),
        se ?? sE({}, r.enableSeconds),
        r.inputValue,
        y.value,
        r.formatLocale
      );
    }, B = (Y) => {
      const { rangeSeparator: se } = i.value, [X, he] = Y.split(`${se}`);
      if (X) {
        const ve = C(X.trim()), pe = he ? C(he.trim()) : void 0;
        if (nc(ve, pe)) return;
        const H = ve && pe ? [ve, pe] : [ve];
        v(pe, H, 0) && (w.value = ve ? H : null);
      }
    }, O = () => {
      y.value = !0;
    }, D = (Y) => {
      if (d.value.enabled)
        B(Y);
      else if (u.value.enabled) {
        const se = Y.split(";");
        w.value = se.map((X) => C(X.trim())).filter((X) => X);
      } else
        w.value = C(Y);
    }, T = (Y) => {
      var se;
      const X = typeof Y == "string" ? Y : (se = Y.target) == null ? void 0 : se.value;
      X !== "" ? (i.value.openMenu && !r.isMenuOpen && a("open"), D(X), a("set-input-date", w.value)) : E(), y.value = !1, a("update:input-value", X), a("text-input", Y, w.value);
    }, P = (Y) => {
      i.value.enabled ? (D(Y.target.value), i.value.enterSubmit && gb(w.value) && r.inputValue !== "" ? (a("set-input-date", w.value, !0), w.value = null) : i.value.enterSubmit && r.inputValue === "" && (w.value = null, a("clear"))) : V(Y);
    }, I = (Y, se) => {
      i.value.enabled && i.value.tabSubmit && !se && D(Y.target.value), i.value.tabSubmit && gb(w.value) && r.inputValue !== "" ? (a("set-input-date", w.value, !0, !0), w.value = null) : i.value.tabSubmit && r.inputValue === "" && (w.value = null, a("clear", !0));
    }, M = () => {
      p.value = !0, a("focus"), Vt().then(() => {
        var Y;
        i.value.enabled && i.value.selectOnFocus && ((Y = b.value) == null || Y.select());
      });
    }, V = (Y) => {
      if (Ns(Y, s.value, !0), i.value.enabled && i.value.openMenu && !l.value.input) {
        if (i.value.openMenu === "open" && !r.isMenuOpen) return a("open");
        if (i.value.openMenu === "toggle") return a("toggle");
      } else i.value.enabled || a("toggle");
    }, N = () => {
      a("real-blur"), p.value = !1, (!r.isMenuOpen || l.value.enabled && l.value.input) && a("blur"), r.autoApply && i.value.enabled && w.value && !r.isMenuOpen && (a("set-input-date", w.value), a("select-date"), w.value = null);
    }, q = (Y) => {
      Ns(Y, s.value, !0), a("clear");
    }, j = () => {
      a("close");
    }, ee = (Y) => {
      if (Y.key === "Tab" && I(Y), Y.key === "Enter" && P(Y), Y.key === "Escape" && i.value.escClose && j(), !i.value.enabled) {
        if (Y.code === "Tab") return;
        Y.preventDefault();
      }
    }, de = () => {
      var Y;
      (Y = b.value) == null || Y.focus({ preventScroll: !0 });
    }, Z = (Y) => {
      w.value = Y;
    }, F = (Y) => {
      Y.key === Gn.tab && I(Y, !0);
    };
    return t({
      focusInput: de,
      setParsedDate: Z
    }), (Y, se) => {
      var X, he, ve;
      return ne(), Be("div", { onClick: V }, [
        Y.$slots.trigger && !Y.$slots["dp-input"] && !fe(l).enabled ? bt(Y.$slots, "trigger", { key: 0 }) : ke("", !0),
        !Y.$slots.trigger && (!fe(l).enabled || fe(l).input) ? (ne(), Be("div", Kq, [
          Y.$slots["dp-input"] && !Y.$slots.trigger && (!fe(l).enabled || fe(l).enabled && fe(l).input) ? bt(Y.$slots, "dp-input", {
            key: 0,
            value: e.inputValue,
            isMenuOpen: e.isMenuOpen,
            onInput: T,
            onEnter: P,
            onTab: I,
            onClear: q,
            onBlur: N,
            onKeypress: ee,
            onPaste: O,
            onFocus: M,
            openMenu: () => Y.$emit("open"),
            closeMenu: () => Y.$emit("close"),
            toggleMenu: () => Y.$emit("toggle")
          }) : ke("", !0),
          Y.$slots["dp-input"] ? ke("", !0) : (ne(), Be("input", {
            key: 1,
            id: Y.uid ? `dp-input-${Y.uid}` : void 0,
            ref_key: "inputRef",
            ref: b,
            "data-test-id": "dp-input",
            name: Y.name,
            class: Ee(S.value),
            inputmode: fe(i).enabled ? "text" : "none",
            placeholder: Y.placeholder,
            disabled: Y.disabled,
            readonly: Y.readonly,
            required: Y.required,
            value: e.inputValue,
            autocomplete: Y.autocomplete,
            "aria-label": (X = fe(o)) == null ? void 0 : X.input,
            "aria-disabled": Y.disabled || void 0,
            "aria-invalid": Y.state === !1 ? !0 : void 0,
            onInput: T,
            onBlur: N,
            onFocus: M,
            onKeypress: ee,
            onKeydown: se[0] || (se[0] = (pe) => ee(pe)),
            onPaste: O
          }, null, 42, Gq)),
          A("div", {
            onClick: se[3] || (se[3] = (pe) => a("toggle"))
          }, [
            Y.$slots["input-icon"] && !Y.hideInputIcon ? (ne(), Be("span", {
              key: 0,
              class: "dp__input_icon",
              onClick: se[1] || (se[1] = (pe) => a("toggle"))
            }, [
              bt(Y.$slots, "input-icon")
            ])) : ke("", !0),
            !Y.$slots["input-icon"] && !Y.hideInputIcon && !Y.$slots["dp-input"] ? (ne(), Fe(fe(Gu), {
              key: 1,
              "aria-label": (he = fe(o)) == null ? void 0 : he.calendarIcon,
              class: "dp__input_icon dp__input_icons",
              onClick: se[2] || (se[2] = (pe) => a("toggle"))
            }, null, 8, ["aria-label"])) : ke("", !0)
          ]),
          Y.$slots["clear-icon"] && (Y.alwaysClearable || e.inputValue && Y.clearable && !Y.disabled && !Y.readonly) ? (ne(), Be("span", Qq, [
            bt(Y.$slots, "clear-icon", { clear: q })
          ])) : ke("", !0),
          !Y.$slots["clear-icon"] && (Y.alwaysClearable || Y.clearable && e.inputValue && !Y.disabled && !Y.readonly) ? (ne(), Be("button", {
            key: 3,
            "aria-label": (ve = fe(o)) == null ? void 0 : ve.clearInput,
            class: "dp--clear-btn",
            type: "button",
            onKeydown: se[4] || (se[4] = (pe) => fe(Lr)(pe, () => q(pe), !0, F)),
            onClick: se[5] || (se[5] = Jn((pe) => q(pe), ["prevent"]))
          }, [
            h(fe(JI), {
              class: "dp__input_icons",
              "data-test-id": "clear-icon"
            })
          ], 40, Jq)) : ke("", !0)
        ])) : ke("", !0)
      ]);
    };
  }
}), Zq = typeof window < "u" ? window : void 0, iy = () => {
}, eH = (e) => tx() ? (qa(e), !0) : !1, tH = (e, t, n, a) => {
  if (!e) return iy;
  let r = iy;
  const i = nt(
    () => fe(e),
    (l) => {
      r(), l && (l.removeEventListener(t, n), l.addEventListener(t, n, a), r = () => {
        l.removeEventListener(t, n, a), r = iy;
      });
    },
    { immediate: !0, flush: "post" }
  ), o = () => {
    i(), r();
  };
  return eH(o), o;
}, nH = (e, t, n, a = {}) => {
  const { window: r = Zq, event: i = "pointerdown" } = a;
  return r ? tH(r, i, (o) => {
    const l = $a(e), s = $a(t);
    !l || !s || l === o.target || o.composedPath().includes(l) || o.composedPath().includes(s) || n(o);
  }, { passive: !0 }) : void 0;
}, aH = ["data-dp-mobile"], rH = /* @__PURE__ */ Ha({
  compatConfig: {
    MODE: 3
  },
  __name: "VueDatePicker",
  props: {
    ...mp
  },
  emits: [
    "update:model-value",
    "update:model-timezone-value",
    "text-submit",
    "closed",
    "cleared",
    "open",
    "focus",
    "blur",
    "internal-model-change",
    "recalculate-position",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "date-update",
    "invalid-date",
    "overlay-toggle",
    "text-input"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = lc(), o = Se(!1), l = be(r, "modelValue"), s = be(r, "timezone"), d = Se(null), u = Se(null), f = Se(null), _ = Se(!1), g = Se(null), v = Se(!1), w = Se(!1), b = Se(!1), p = Se(!1), { setMenuFocused: y, setShiftKey: S } = dE(), { clearArrowNav: E } = al(), { validateDate: C, isValidTime: B } = rl(r), {
      defaultedTransitions: O,
      defaultedTextInput: D,
      defaultedInline: T,
      defaultedConfig: P,
      defaultedRange: I,
      defaultedMultiDates: M
    } = da(r), { menuTransition: V, showTransition: N } = Yf(O), { isMobile: q } = gE(P), j = cs();
    nn(() => {
      H(r.modelValue), Vt().then(() => {
        if (!T.value.enabled) {
          const je = X(g.value);
          je?.addEventListener("scroll", Te), window?.addEventListener("resize", ie);
        }
      }), T.value.enabled && (o.value = !0), window?.addEventListener("keyup", ge), window?.addEventListener("keydown", Pe);
    }), di(() => {
      if (!T.value.enabled) {
        const je = X(g.value);
        je?.removeEventListener("scroll", Te), window?.removeEventListener("resize", ie);
      }
      window?.removeEventListener("keyup", ge), window?.removeEventListener("keydown", Pe);
    });
    const ee = li(i, "all", r.presetDates), de = li(i, "input");
    nt(
      [l, s],
      () => {
        H(l.value);
      },
      { deep: !0 }
    );
    const { openOnTop: Z, menuStyle: F, xCorrect: Y, setMenuPosition: se, getScrollableParent: X, shadowRender: he } = Hq({
      menuRef: d,
      menuRefInner: u,
      inputRef: f,
      pickerWrapperRef: g,
      inline: T,
      emit: a,
      props: r,
      slots: i
    }), {
      inputValue: ve,
      internalModelValue: pe,
      parseExternalModelValue: H,
      emitModelValue: we,
      formatInputValue: Me,
      checkBeforeEmit: Re
    } = F6(a, r, _), ce = z(
      () => ({
        dp__main: !0,
        dp__theme_dark: r.dark,
        dp__theme_light: !r.dark,
        dp__flex_display: T.value.enabled,
        "dp--flex-display-collapsed": b.value,
        dp__flex_display_with_input: T.value.input
      })
    ), te = z(() => r.dark ? "dp__theme_dark" : "dp__theme_light"), G = z(() => r.teleport ? {
      to: typeof r.teleport == "boolean" ? "body" : r.teleport,
      disabled: !r.teleport || T.value.enabled
    } : {}), le = z(() => ({ class: "dp__outer_menu_wrap" })), K = z(() => T.value.enabled && (r.timePicker || r.monthPicker || r.yearPicker || r.quarterPicker)), Ce = () => {
      var je, st;
      return ((st = (je = f.value) == null ? void 0 : je.$el) == null ? void 0 : st.getBoundingClientRect()) ?? { width: 0, left: 0, right: 0 };
    }, Te = () => {
      o.value && (P.value.closeOnScroll ? Dt() : se());
    }, ie = () => {
      var je;
      o.value && se();
      const st = ((je = u.value) == null ? void 0 : je.$el.getBoundingClientRect().width) ?? 0;
      b.value = document.body.offsetWidth <= st;
    }, ge = (je) => {
      je.key === "Tab" && !T.value.enabled && !r.teleport && P.value.tabOutClosesMenu && (g.value.contains(document.activeElement) || Dt()), w.value = je.shiftKey;
    }, Pe = (je) => {
      w.value = je.shiftKey;
    }, Ie = () => {
      !r.disabled && !r.readonly && (he(j, GC, r), se(!1), o.value = !0, o.value && a("open"), o.value || rt(), H(r.modelValue));
    }, Je = () => {
      var je, st;
      ve.value = "", rt(), (je = u.value) == null || je.onValueCleared(), (st = f.value) == null || st.setParsedDate(null), a("update:model-value", null), a("update:model-timezone-value", null), a("cleared"), P.value.closeOnClearValue && Dt();
    }, _e = () => {
      const je = pe.value;
      return !je || !Array.isArray(je) && C(je) ? !0 : Array.isArray(je) ? M.value.enabled || je.length === 2 && C(je[0]) && C(je[1]) ? !0 : I.value.partialRange && !r.timePicker ? C(je[0]) : !1 : !1;
    }, $e = () => {
      Re() && _e() ? (we(), Dt()) : a("invalid-select", pe.value);
    }, Ze = (je) => {
      _t(), we(), P.value.closeOnAutoApply && !je && Dt();
    }, _t = () => {
      f.value && D.value.enabled && f.value.setParsedDate(pe.value);
    }, It = (je = !1) => {
      r.autoApply && B(pe.value) && _e() && (I.value.enabled && Array.isArray(pe.value) ? (I.value.partialRange || pe.value.length === 2) && Ze(je) : Ze(je));
    }, rt = () => {
      D.value.enabled || (pe.value = null);
    }, Dt = (je = !1) => {
      var st, pt;
      je && pe.value && P.value.setDateOnMenuClose && $e(), T.value.enabled || (o.value && (o.value = !1, Y.value = !1, y(!1), S(!1), E(), a("closed"), ve.value && H(l.value)), rt(), a("blur"), (pt = (st = u.value) == null ? void 0 : st.$el) == null || pt.remove());
    }, en = (je, st, pt = !1) => {
      if (!je) {
        pe.value = null;
        return;
      }
      const xa = Array.isArray(je) ? !je.some((_r) => !C(_r)) : C(je), Ua = B(je);
      xa && Ua ? (p.value = !0, pe.value = je, st ? (v.value = pt, $e(), a("text-submit")) : r.autoApply && It(), Vt().then(() => {
        p.value = !1;
      })) : a("invalid-date", je);
    }, zn = () => {
      r.autoApply && B(pe.value) && we(), _t();
    }, na = () => o.value ? Dt() : Ie(), Na = (je) => {
      pe.value = je;
    }, ya = () => {
      D.value.enabled && (_.value = !0, Me()), a("focus");
    }, Wn = () => {
      if (D.value.enabled && (_.value = !1, H(r.modelValue), v.value)) {
        const je = u6(g.value, w.value);
        je?.focus();
      }
      a("blur");
    }, Vn = (je) => {
      u.value && u.value.updateMonthYear(0, {
        month: $C(je.month),
        year: $C(je.year)
      });
    }, Ja = (je) => {
      H(je ?? r.modelValue);
    }, xe = (je, st) => {
      var pt;
      (pt = u.value) == null || pt.switchView(je, st);
    }, ze = (je, st) => P.value.onClickOutside ? P.value.onClickOutside(je, st) : Dt(!0), ft = (je = 0) => {
      var st;
      (st = u.value) == null || st.handleFlow(je);
    }, it = () => d;
    return nH(
      d,
      f,
      (je) => ze(_e, je)
    ), t({
      closeMenu: Dt,
      selectDate: $e,
      clearValue: Je,
      openMenu: Ie,
      onScroll: Te,
      formatInputValue: Me,
      // exposed for testing purposes
      updateInternalModelValue: Na,
      // modify internal modelValue
      setMonthYear: Vn,
      parseModel: Ja,
      switchView: xe,
      toggleMenu: na,
      handleFlow: ft,
      getDpWrapMenuRef: it
    }), (je, st) => (ne(), Be("div", {
      ref_key: "pickerWrapperRef",
      ref: g,
      class: Ee(ce.value),
      "data-datepicker-instance": "",
      "data-dp-mobile": fe(q)
    }, [
      h(Xq, He({
        ref_key: "inputRef",
        ref: f,
        "input-value": fe(ve),
        "onUpdate:inputValue": st[0] || (st[0] = (pt) => va(ve) ? ve.value = pt : null),
        "is-menu-open": o.value
      }, je.$props, {
        onClear: Je,
        onOpen: Ie,
        onSetInputDate: en,
        onSetEmptyDate: fe(we),
        onSelectDate: $e,
        onToggle: na,
        onClose: Dt,
        onFocus: ya,
        onBlur: Wn,
        onRealBlur: st[1] || (st[1] = (pt) => _.value = !1),
        onTextInput: st[2] || (st[2] = (pt) => je.$emit("text-input", pt))
      }), dr({ _: 2 }, [
        un(fe(de), (pt, xa) => ({
          name: pt,
          fn: x((Ua) => [
            bt(je.$slots, pt, Xn(Ca(Ua)))
          ])
        }))
      ]), 1040, ["input-value", "is-menu-open", "onSetEmptyDate"]),
      (ne(), Fe(Hu(je.teleport ? Ix : "div"), Xn(Ca(G.value)), {
        default: x(() => [
          h(Ur, {
            name: fe(V)(fe(Z)),
            css: fe(N) && !fe(T).enabled
          }, {
            default: x(() => [
              o.value ? (ne(), Be("div", He({
                key: 0,
                ref_key: "dpWrapMenuRef",
                ref: d
              }, le.value, {
                class: { "dp--menu-wrapper": !fe(T).enabled },
                style: fe(T).enabled ? void 0 : fe(F)
              }), [
                h(GC, He({
                  ref_key: "dpMenuRef",
                  ref: u
                }, je.$props, {
                  "internal-model-value": fe(pe),
                  "onUpdate:internalModelValue": st[3] || (st[3] = (pt) => va(pe) ? pe.value = pt : null),
                  class: { [te.value]: !0, "dp--menu-wrapper": je.teleport },
                  "open-on-top": fe(Z),
                  "no-overlay-focus": K.value,
                  collapse: b.value,
                  "get-input-rect": Ce,
                  "is-text-input-date": p.value,
                  onClosePicker: Dt,
                  onSelectDate: $e,
                  onAutoApply: It,
                  onTimeUpdate: zn,
                  onFlowStep: st[4] || (st[4] = (pt) => je.$emit("flow-step", pt)),
                  onUpdateMonthYear: st[5] || (st[5] = (pt) => je.$emit("update-month-year", pt)),
                  onInvalidSelect: st[6] || (st[6] = (pt) => je.$emit("invalid-select", fe(pe))),
                  onAutoApplyInvalid: st[7] || (st[7] = (pt) => je.$emit("invalid-select", pt)),
                  onInvalidFixedRange: st[8] || (st[8] = (pt) => je.$emit("invalid-fixed-range", pt)),
                  onRecalculatePosition: fe(se),
                  onTooltipOpen: st[9] || (st[9] = (pt) => je.$emit("tooltip-open", pt)),
                  onTooltipClose: st[10] || (st[10] = (pt) => je.$emit("tooltip-close", pt)),
                  onTimePickerOpen: st[11] || (st[11] = (pt) => je.$emit("time-picker-open", pt)),
                  onTimePickerClose: st[12] || (st[12] = (pt) => je.$emit("time-picker-close", pt)),
                  onAmPmChange: st[13] || (st[13] = (pt) => je.$emit("am-pm-change", pt)),
                  onRangeStart: st[14] || (st[14] = (pt) => je.$emit("range-start", pt)),
                  onRangeEnd: st[15] || (st[15] = (pt) => je.$emit("range-end", pt)),
                  onDateUpdate: st[16] || (st[16] = (pt) => je.$emit("date-update", pt)),
                  onInvalidDate: st[17] || (st[17] = (pt) => je.$emit("invalid-date", pt)),
                  onOverlayToggle: st[18] || (st[18] = (pt) => je.$emit("overlay-toggle", pt)),
                  onMenuBlur: st[19] || (st[19] = (pt) => je.$emit("blur"))
                }), dr({ _: 2 }, [
                  un(fe(ee), (pt, xa) => ({
                    name: pt,
                    fn: x((Ua) => [
                      bt(je.$slots, pt, Xn(Ca({ ...Ua })))
                    ])
                  }))
                ]), 1040, ["internal-model-value", "class", "open-on-top", "no-overlay-focus", "collapse", "is-text-input-date", "onRecalculatePosition"])
              ], 16)) : ke("", !0)
            ]),
            _: 3
          }, 8, ["name", "css"])
        ]),
        _: 3
      }, 16))
    ], 10, aH));
  }
}), g0 = /* @__PURE__ */ (() => {
  const e = rH;
  return e.install = (t) => {
    t.component("Vue3DatePicker", e);
  }, e;
})(), iH = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: g0
}, Symbol.toStringTag, { value: "Module" }));
Object.entries(iH).forEach(([e, t]) => {
  e !== "default" && (g0[e] = t);
});
function oH(e) {
  return { all: e = e || /* @__PURE__ */ new Map(), on: function(t, n) {
    var a = e.get(t);
    a ? a.push(n) : e.set(t, [n]);
  }, off: function(t, n) {
    var a = e.get(t);
    a && (n ? a.splice(a.indexOf(n) >>> 0, 1) : e.set(t, []));
  }, emit: function(t, n) {
    var a = e.get(t);
    a && a.slice().map(function(r) {
      r(n);
    }), (a = e.get("*")) && a.slice().map(function(r) {
      r(t, n);
    });
  } };
}
const sH = {
  install: (e, t) => {
    e.config.globalProperties.__ = window.__, e.config.globalProperties.frappe = window.frappe, e.config.globalProperties.eventBus = oH();
  }
}, lH = {
  install(e, { vuetify: t }) {
    const n = document.documentElement, a = () => {
      const l = n.getAttribute("data-theme-mode") || "light";
      return l === "automatic" ? window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" : l;
    }, r = Se(a());
    t.theme.global.name.value = r.value, new MutationObserver(() => {
      r.value = a(), t.theme.global.name.value = r.value;
    }).observe(n, { attributes: !0, attributeFilter: ["data-theme-mode", "data-theme"] });
    const o = () => {
      const s = (n.getAttribute("data-theme-mode") || "light") === "dark" ? "light" : "dark";
      n.setAttribute("data-theme-mode", s), window.frappe?.ui?.set_theme ? window.frappe.ui.set_theme(s) : n.setAttribute("data-theme", s), window.frappe?.xcall && window.frappe.xcall("frappe.core.doctype.user.user.switch_theme", {
        theme: s.charAt(0).toUpperCase() + s.slice(1)
      }).catch(() => {
      });
    };
    e.config.globalProperties.$theme = {
      get current() {
        return r.value;
      },
      toggle: o,
      isDark: r
    };
  }
}, cH = De({
  ...vt(),
  ...QT({
    fullHeight: !0
  }),
  ...an()
}, "VApp"), uH = We()({
  name: "VApp",
  props: cH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = yn(e), {
      layoutClasses: r,
      getLayoutItem: i,
      items: o,
      layoutRef: l
    } = XT(e), {
      rtlClasses: s
    } = Ra();
    return Ge(() => A("div", {
      ref: l,
      class: Ee(["v-application", a.themeClasses.value, r.value, s.value, e.class]),
      style: Xe([e.style])
    }, [A("div", {
      class: "v-application__wrap"
    }, [n.default?.()])])), {
      getLayoutItem: i,
      items: o,
      theme: a
    };
  }
}), qt = De({
  tag: {
    type: [String, Object, Function],
    default: "div"
  }
}, "tag"), yE = De({
  text: String,
  ...vt(),
  ...qt()
}, "VToolbarTitle"), y0 = We()({
  name: "VToolbarTitle",
  props: yE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = !!(n.default || n.text || e.text);
      return h(e.tag, {
        class: Ee(["v-toolbar-title", e.class]),
        style: Xe(e.style)
      }, {
        default: () => [a && A("div", {
          class: "v-toolbar-title__placeholder"
        }, [n.text ? n.text() : e.text, n.default?.()])]
      });
    }), {};
  }
}), dH = De({
  disabled: Boolean,
  group: Boolean,
  hideOnLeave: Boolean,
  leaveAbsolute: Boolean,
  mode: String,
  origin: String
}, "transition");
function hi(e, t, n) {
  return We()({
    name: e,
    props: dH({
      mode: n,
      origin: t
    }),
    setup(a, r) {
      let {
        slots: i
      } = r;
      const o = {
        onBeforeEnter(l) {
          a.origin && (l.style.transformOrigin = a.origin);
        },
        onLeave(l) {
          if (a.leaveAbsolute) {
            const {
              offsetTop: s,
              offsetLeft: d,
              offsetWidth: u,
              offsetHeight: f
            } = l;
            l._transitionInitialStyles = {
              position: l.style.position,
              top: l.style.top,
              left: l.style.left,
              width: l.style.width,
              height: l.style.height
            }, l.style.position = "absolute", l.style.top = `${s}px`, l.style.left = `${d}px`, l.style.width = `${u}px`, l.style.height = `${f}px`;
          }
          a.hideOnLeave && l.style.setProperty("display", "none", "important");
        },
        onAfterLeave(l) {
          if (a.leaveAbsolute && l?._transitionInitialStyles) {
            const {
              position: s,
              top: d,
              left: u,
              width: f,
              height: _
            } = l._transitionInitialStyles;
            delete l._transitionInitialStyles, l.style.position = s || "", l.style.top = d || "", l.style.left = u || "", l.style.width = f || "", l.style.height = _ || "";
          }
        }
      };
      return () => {
        const l = a.group ? bw : Ur;
        return Co(l, {
          name: a.disabled ? "" : e,
          css: !a.disabled,
          ...a.group ? void 0 : {
            mode: a.mode
          },
          ...a.disabled ? {} : o
        }, i.default);
      };
    }
  });
}
function bE(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "in-out";
  return We()({
    name: e,
    props: {
      mode: {
        type: String,
        default: n
      },
      disabled: Boolean,
      group: Boolean
    },
    setup(a, r) {
      let {
        slots: i
      } = r;
      const o = a.group ? bw : Ur;
      return () => Co(o, {
        name: a.disabled ? "" : e,
        css: !a.disabled,
        // mode: props.mode, // TODO: vuejs/vue-next#3104
        ...a.disabled ? {} : t
      }, i.default);
    }
  });
}
function wE() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  const n = (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1) ? "width" : "height", a = Nr(`offset-${n}`);
  return {
    onBeforeEnter(o) {
      o._parent = o.parentNode, o._initialStyle = {
        transition: o.style.transition,
        overflow: o.style.overflow,
        [n]: o.style[n]
      };
    },
    onEnter(o) {
      const l = o._initialStyle;
      if (!l) return;
      o.style.setProperty("transition", "none", "important"), o.style.overflow = "hidden";
      const s = `${o[a]}px`;
      o.style[n] = "0", o.offsetHeight, o.style.transition = l.transition, e && o._parent && o._parent.classList.add(e), requestAnimationFrame(() => {
        o.style[n] = s;
      });
    },
    onAfterEnter: i,
    onEnterCancelled: i,
    onLeave(o) {
      o._initialStyle = {
        transition: "",
        overflow: o.style.overflow,
        [n]: o.style[n]
      }, o.style.overflow = "hidden", o.style[n] = `${o[a]}px`, o.offsetHeight, requestAnimationFrame(() => o.style[n] = "0");
    },
    onAfterLeave: r,
    onLeaveCancelled: r
  };
  function r(o) {
    e && o._parent && o._parent.classList.remove(e), i(o);
  }
  function i(o) {
    if (!o._initialStyle) return;
    const l = o._initialStyle[n];
    o.style.overflow = o._initialStyle.overflow, l != null && (o.style[n] = l), delete o._initialStyle;
  }
}
const fH = De({
  target: [Object, Array]
}, "v-dialog-transition"), oy = /* @__PURE__ */ new WeakMap(), vp = We()({
  name: "VDialogTransition",
  props: fH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = {
      onBeforeEnter(r) {
        r.style.pointerEvents = "none", r.style.visibility = "hidden";
      },
      async onEnter(r, i) {
        await new Promise((g) => requestAnimationFrame(g)), await new Promise((g) => requestAnimationFrame(g)), r.style.visibility = "";
        const o = JC(e.target, r), {
          x: l,
          y: s,
          sx: d,
          sy: u,
          speed: f
        } = o;
        oy.set(r, o);
        const _ = Fl(r, [{
          transform: `translate(${l}px, ${s}px) scale(${d}, ${u})`,
          opacity: 0
        }, {}], {
          duration: 225 * f,
          easing: J3
        });
        QC(r)?.forEach((g) => {
          Fl(g, [{
            opacity: 0
          }, {
            opacity: 0,
            offset: 0.33
          }, {}], {
            duration: 225 * 2 * f,
            easing: _f
          });
        }), _.finished.then(() => i());
      },
      onAfterEnter(r) {
        r.style.removeProperty("pointer-events");
      },
      onBeforeLeave(r) {
        r.style.pointerEvents = "none";
      },
      async onLeave(r, i) {
        await new Promise((g) => requestAnimationFrame(g));
        let o;
        !oy.has(r) || Array.isArray(e.target) || e.target.offsetParent || e.target.getClientRects().length ? o = JC(e.target, r) : o = oy.get(r);
        const {
          x: l,
          y: s,
          sx: d,
          sy: u,
          speed: f
        } = o;
        Fl(r, [{}, {
          transform: `translate(${l}px, ${s}px) scale(${d}, ${u})`,
          opacity: 0
        }], {
          duration: 125 * f,
          easing: X3
        }).finished.then(() => i()), QC(r)?.forEach((g) => {
          Fl(g, [{}, {
            opacity: 0,
            offset: 0.2
          }, {
            opacity: 0
          }], {
            duration: 125 * 2 * f,
            easing: _f
          });
        });
      },
      onAfterLeave(r) {
        r.style.removeProperty("pointer-events");
      }
    };
    return () => e.target ? h(Ur, He({
      name: "dialog-transition"
    }, a, {
      css: !1
    }), n) : h(Ur, {
      name: "dialog-transition"
    }, n);
  }
});
function QC(e) {
  const t = e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;
  return t && [...t];
}
function JC(e, t) {
  const n = TT(e), a = Aw(t), [r, i] = getComputedStyle(t).transformOrigin.split(" ").map((p) => parseFloat(p)), [o, l] = getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");
  let s = n.left + n.width / 2;
  o === "left" || l === "left" ? s -= n.width / 2 : (o === "right" || l === "right") && (s += n.width / 2);
  let d = n.top + n.height / 2;
  o === "top" || l === "top" ? d -= n.height / 2 : (o === "bottom" || l === "bottom") && (d += n.height / 2);
  const u = n.width / a.width, f = n.height / a.height, _ = Math.max(1, u, f), g = u / _ || 0, v = f / _ || 0, w = a.width * a.height / (window.innerWidth * window.innerHeight), b = w > 0.12 ? Math.min(1.5, (w - 0.12) * 10 + 1) : 1;
  return {
    x: s - (r + a.left),
    y: d - (i + a.top),
    sx: g,
    sy: v,
    speed: b
  };
}
const mH = hi("fab-transition", "center center", "out-in"), hH = hi("dialog-bottom-transition"), _H = hi("dialog-top-transition"), xf = hi("fade-transition"), b0 = hi("scale-transition"), pH = hi("scroll-x-transition"), vH = hi("scroll-x-reverse-transition"), gH = hi("scroll-y-transition"), yH = hi("scroll-y-reverse-transition"), bH = hi("slide-x-transition"), wH = hi("slide-x-reverse-transition"), w0 = hi("slide-y-transition"), kH = hi("slide-y-reverse-transition"), gp = bE("expand-transition", wE()), k0 = bE("expand-x-transition", wE("", !0)), SH = De({
  defaults: Object,
  disabled: Boolean,
  reset: [Number, String],
  root: [Boolean, String],
  scoped: Boolean
}, "VDefaultsProvider"), Wt = We(!1)({
  name: "VDefaultsProvider",
  props: SH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      defaults: a,
      disabled: r,
      reset: i,
      root: o,
      scoped: l
    } = $u(e);
    return ca(a, {
      reset: i,
      root: o,
      scoped: l,
      disabled: r
    }), () => n.default?.();
  }
}), La = De({
  height: [Number, String],
  maxHeight: [Number, String],
  maxWidth: [Number, String],
  minHeight: [Number, String],
  minWidth: [Number, String],
  width: [Number, String]
}, "dimension");
function Fa(e) {
  return {
    dimensionStyles: z(() => {
      const n = {}, a = ht(e.height), r = ht(e.maxHeight), i = ht(e.maxWidth), o = ht(e.minHeight), l = ht(e.minWidth), s = ht(e.width);
      return a != null && (n.height = a), r != null && (n.maxHeight = r), i != null && (n.maxWidth = i), o != null && (n.minHeight = o), l != null && (n.minWidth = l), s != null && (n.width = s), n;
    })
  };
}
function CH(e) {
  return {
    aspectStyles: z(() => {
      const t = Number(e.aspectRatio);
      return t ? {
        paddingBottom: String(1 / t * 100) + "%"
      } : void 0;
    })
  };
}
const kE = De({
  aspectRatio: [String, Number],
  contentClass: null,
  inline: Boolean,
  ...vt(),
  ...La()
}, "VResponsive"), bb = We()({
  name: "VResponsive",
  props: kE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      aspectStyles: a
    } = CH(e), {
      dimensionStyles: r
    } = Fa(e);
    return Ge(() => A("div", {
      class: Ee(["v-responsive", {
        "v-responsive--inline": e.inline
      }, e.class]),
      style: Xe([r.value, e.style])
    }, [A("div", {
      class: "v-responsive__sizer",
      style: Xe(a.value)
    }, null), n.additional?.(), n.default && A("div", {
      class: Ee(["v-responsive__content", e.contentClass])
    }, [n.default()])])), {};
  }
});
function S0(e) {
  return Cw(() => {
    const t = yo(e), n = [], a = {};
    if (t.background)
      if ($y(t.background)) {
        if (a.backgroundColor = t.background, !t.text && N3(t.background)) {
          const r = si(t.background);
          if (r.a == null || r.a === 1) {
            const i = RT(r);
            a.color = i, a.caretColor = i;
          }
        }
      } else
        n.push(`bg-${t.background}`);
    return t.text && ($y(t.text) ? (a.color = t.text, a.caretColor = t.text) : n.push(`text-${t.text}`)), {
      colorClasses: n,
      colorStyles: a
    };
  });
}
function mr(e) {
  const {
    colorClasses: t,
    colorStyles: n
  } = S0(() => ({
    text: yo(e)
  }));
  return {
    textColorClasses: t,
    textColorStyles: n
  };
}
function An(e) {
  const {
    colorClasses: t,
    colorStyles: n
  } = S0(() => ({
    background: yo(e)
  }));
  return {
    backgroundColorClasses: t,
    backgroundColorStyles: n
  };
}
const Hn = De({
  rounded: {
    type: [Boolean, Number, String],
    default: void 0
  },
  tile: Boolean
}, "rounded");
function fa(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    roundedClasses: z(() => {
      const a = va(e) ? e.value : e.rounded, r = va(e) ? e.value : e.tile, i = [];
      if (a === !0 || a === "")
        i.push(`${t}--rounded`);
      else if (typeof a == "string" || a === 0)
        for (const o of String(a).split(" "))
          i.push(`rounded-${o}`);
      else (r || a === !1) && i.push("rounded-0");
      return i;
    })
  };
}
const Gi = De({
  transition: {
    type: null,
    default: "fade-transition",
    validator: (e) => e !== !0
  }
}, "transition"), Sr = (e, t) => {
  let {
    slots: n
  } = t;
  const {
    transition: a,
    disabled: r,
    group: i,
    ...o
  } = e, {
    component: l = i ? bw : Ur,
    ...s
  } = mf(a) ? a : {};
  let d;
  return mf(a) ? d = He(s, b3({
    disabled: r,
    group: i
  }), o) : d = He({
    name: r || !a ? "" : a
  }, o), Co(l, d, n);
};
function AH(e, t) {
  if (!ww) return;
  const n = t.modifiers || {}, a = t.value, {
    handler: r,
    options: i
  } = typeof a == "object" ? a : {
    handler: a,
    options: {}
  }, o = new IntersectionObserver(function() {
    let l = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], s = arguments.length > 1 ? arguments[1] : void 0;
    const d = e._observe?.[t.instance.$.uid];
    if (!d) return;
    const u = l.some((f) => f.isIntersecting);
    r && (!n.quiet || d.init) && (!n.once || u || d.init) && r(u, l, s), u && n.once ? SE(e, t) : d.init = !0;
  }, i);
  e._observe = Object(e._observe), e._observe[t.instance.$.uid] = {
    init: !1,
    observer: o
  }, o.observe(e);
}
function SE(e, t) {
  const n = e._observe?.[t.instance.$.uid];
  n && (n.observer.unobserve(e), delete e._observe[t.instance.$.uid]);
}
const ns = {
  mounted: AH,
  unmounted: SE
}, CE = De({
  absolute: Boolean,
  alt: String,
  cover: Boolean,
  color: String,
  draggable: {
    type: [Boolean, String],
    default: void 0
  },
  eager: Boolean,
  gradient: String,
  lazySrc: String,
  options: {
    type: Object,
    // For more information on types, navigate to:
    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    default: () => ({
      root: void 0,
      rootMargin: void 0,
      threshold: void 0
    })
  },
  sizes: String,
  src: {
    type: [String, Object],
    default: ""
  },
  crossorigin: String,
  referrerpolicy: String,
  srcset: String,
  position: String,
  ...kE(),
  ...vt(),
  ...Hn(),
  ...Gi()
}, "VImg"), as = We()({
  name: "VImg",
  directives: {
    vIntersect: ns
  },
  props: CE(),
  emits: {
    loadstart: (e) => !0,
    load: (e) => !0,
    error: (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      roundedClasses: o
    } = fa(e), l = ga("VImg"), s = ot(""), d = Se(), u = ot(e.eager ? "loading" : "idle"), f = ot(), _ = ot(), g = z(() => e.src && typeof e.src == "object" ? {
      src: e.src.src,
      srcset: e.srcset || e.src.srcset,
      lazySrc: e.lazySrc || e.src.lazySrc,
      aspect: Number(e.aspectRatio || e.src.aspect || 0)
    } : {
      src: e.src,
      srcset: e.srcset,
      lazySrc: e.lazySrc,
      aspect: Number(e.aspectRatio || 0)
    }), v = z(() => g.value.aspect || f.value / _.value || 0);
    nt(() => e.src, () => {
      w(u.value !== "idle");
    }), nt(v, (M, V) => {
      !M && V && d.value && E(d.value);
    }), qu(() => w());
    function w(M) {
      if (!(e.eager && M) && !(ww && !M && !e.eager)) {
        if (u.value = "loading", g.value.lazySrc) {
          const V = new Image();
          V.src = g.value.lazySrc, E(V, null);
        }
        g.value.src && Vt(() => {
          n("loadstart", d.value?.currentSrc || g.value.src), setTimeout(() => {
            if (!l.isUnmounted)
              if (d.value?.complete) {
                if (d.value.naturalWidth || p(), u.value === "error") return;
                v.value || E(d.value, null), u.value === "loading" && b();
              } else
                v.value || E(d.value), y();
          });
        });
      }
    }
    function b() {
      l.isUnmounted || (y(), E(d.value), u.value = "loaded", n("load", d.value?.currentSrc || g.value.src));
    }
    function p() {
      l.isUnmounted || (u.value = "error", n("error", d.value?.currentSrc || g.value.src));
    }
    function y() {
      const M = d.value;
      M && (s.value = M.currentSrc || M.src);
    }
    let S = -1;
    Ga(() => {
      clearTimeout(S);
    });
    function E(M) {
      let V = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;
      const N = () => {
        if (clearTimeout(S), l.isUnmounted) return;
        const {
          naturalHeight: q,
          naturalWidth: j
        } = M;
        q || j ? (f.value = j, _.value = q) : !M.complete && u.value === "loading" && V != null ? S = window.setTimeout(N, V) : (M.currentSrc.endsWith(".svg") || M.currentSrc.startsWith("data:image/svg+xml")) && (f.value = 1, _.value = 1);
      };
      N();
    }
    const C = be(() => ({
      "v-img__img--cover": e.cover,
      "v-img__img--contain": !e.cover
    })), B = () => {
      if (!g.value.src || u.value === "idle") return null;
      const M = A("img", {
        class: Ee(["v-img__img", C.value]),
        style: {
          objectPosition: e.position
        },
        crossorigin: e.crossorigin,
        src: g.value.src,
        srcset: g.value.srcset,
        alt: e.alt,
        referrerpolicy: e.referrerpolicy,
        draggable: e.draggable,
        sizes: e.sizes,
        ref: d,
        onLoad: b,
        onError: p
      }, null), V = a.sources?.();
      return h(Sr, {
        transition: e.transition,
        appear: !0
      }, {
        default: () => [ln(V ? A("picture", {
          class: "v-img__picture"
        }, [V, M]) : M, [[Sa, u.value === "loaded"]])]
      });
    }, O = () => h(Sr, {
      transition: e.transition
    }, {
      default: () => [g.value.lazySrc && u.value !== "loaded" && A("img", {
        class: Ee(["v-img__img", "v-img__img--preload", C.value]),
        style: {
          objectPosition: e.position
        },
        crossorigin: e.crossorigin,
        src: g.value.lazySrc,
        alt: e.alt,
        referrerpolicy: e.referrerpolicy,
        draggable: e.draggable
      }, null)]
    }), D = () => a.placeholder ? h(Sr, {
      transition: e.transition,
      appear: !0
    }, {
      default: () => [(u.value === "loading" || u.value === "error" && !a.error) && A("div", {
        class: "v-img__placeholder"
      }, [a.placeholder()])]
    }) : null, T = () => a.error ? h(Sr, {
      transition: e.transition,
      appear: !0
    }, {
      default: () => [u.value === "error" && A("div", {
        class: "v-img__error"
      }, [a.error()])]
    }) : null, P = () => e.gradient ? A("div", {
      class: "v-img__gradient",
      style: {
        backgroundImage: `linear-gradient(${e.gradient})`
      }
    }, null) : null, I = ot(!1);
    {
      const M = nt(v, (V) => {
        V && (requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            I.value = !0;
          });
        }), M());
      });
    }
    return Ge(() => {
      const M = bb.filterProps(e);
      return ln(h(bb, He({
        class: ["v-img", {
          "v-img--absolute": e.absolute,
          "v-img--booting": !I.value
        }, r.value, o.value, e.class],
        style: [{
          width: ht(e.width === "auto" ? f.value : e.width)
        }, i.value, e.style]
      }, M, {
        aspectRatio: v.value,
        "aria-label": e.alt,
        role: e.alt ? "img" : void 0
      }), {
        additional: () => A(Qe, null, [h(B, null, null), h(O, null, null), h(P, null, null), h(D, null, null), h(T, null, null)]),
        default: a.default
      }), [[ns, {
        handler: w,
        options: e.options
      }, null, {
        once: !0
      }]]);
    }), {
      currentSrc: s,
      image: d,
      state: u,
      naturalWidth: f,
      naturalHeight: _
    };
  }
}), Qr = De({
  border: [Boolean, Number, String]
}, "border");
function _i(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    borderClasses: z(() => {
      const a = e.border;
      return a === !0 || a === "" ? `${t}--border` : typeof a == "string" || a === 0 ? String(a).split(" ").map((r) => `border-${r}`) : [];
    })
  };
}
const za = De({
  elevation: {
    type: [Number, String],
    validator(e) {
      const t = parseInt(e);
      return !isNaN(t) && t >= 0 && // Material Design has a maximum elevation of 24
      // https://material.io/design/environment/elevation.html#default-elevations
      t <= 24;
    }
  }
}, "elevation");
function ir(e) {
  return {
    elevationClasses: be(() => {
      const n = va(e) ? e.value : e.elevation;
      return n == null ? [] : [`elevation-${n}`];
    })
  };
}
const xH = [null, "prominent", "default", "comfortable", "compact"], AE = De({
  absolute: Boolean,
  collapse: Boolean,
  color: String,
  density: {
    type: String,
    default: "default",
    validator: (e) => xH.includes(e)
  },
  extended: Boolean,
  extensionHeight: {
    type: [Number, String],
    default: 48
  },
  flat: Boolean,
  floating: Boolean,
  height: {
    type: [Number, String],
    default: 64
  },
  image: String,
  title: String,
  ...Qr(),
  ...vt(),
  ...za(),
  ...Hn(),
  ...qt({
    tag: "header"
  }),
  ...an()
}, "VToolbar"), wb = We()({
  name: "VToolbar",
  props: AE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.color), {
      borderClasses: i
    } = _i(e), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e), {
      themeClasses: s
    } = yn(e), {
      rtlClasses: d
    } = Ra(), u = ot(!!(e.extended || n.extension?.())), f = z(() => parseInt(Number(e.height) + (e.density === "prominent" ? Number(e.height) : 0) - (e.density === "comfortable" ? 8 : 0) - (e.density === "compact" ? 16 : 0), 10)), _ = z(() => u.value ? parseInt(Number(e.extensionHeight) + (e.density === "prominent" ? Number(e.extensionHeight) : 0) - (e.density === "comfortable" ? 4 : 0) - (e.density === "compact" ? 8 : 0), 10) : 0);
    return ca({
      VBtn: {
        variant: "text"
      }
    }), Ge(() => {
      const g = !!(e.title || n.title), v = !!(n.image || e.image), w = n.extension?.();
      return u.value = !!(e.extended || w), h(e.tag, {
        class: Ee(["v-toolbar", {
          "v-toolbar--absolute": e.absolute,
          "v-toolbar--collapse": e.collapse,
          "v-toolbar--flat": e.flat,
          "v-toolbar--floating": e.floating,
          [`v-toolbar--density-${e.density}`]: !0
        }, a.value, i.value, o.value, l.value, s.value, d.value, e.class]),
        style: Xe([r.value, e.style])
      }, {
        default: () => [v && A("div", {
          key: "image",
          class: "v-toolbar__image"
        }, [n.image ? h(Wt, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              cover: !0,
              src: e.image
            }
          }
        }, n.image) : h(as, {
          key: "image-img",
          cover: !0,
          src: e.image
        }, null)]), h(Wt, {
          defaults: {
            VTabs: {
              height: ht(f.value)
            }
          }
        }, {
          default: () => [A("div", {
            class: "v-toolbar__content",
            style: {
              height: ht(f.value)
            }
          }, [n.prepend && A("div", {
            class: "v-toolbar__prepend"
          }, [n.prepend?.()]), g && h(y0, {
            key: "title",
            text: e.title
          }, {
            text: n.title
          }), n.default?.(), n.append && A("div", {
            class: "v-toolbar__append"
          }, [n.append?.()])])]
        }), h(Wt, {
          defaults: {
            VTabs: {
              height: ht(_.value)
            }
          }
        }, {
          default: () => [h(gp, null, {
            default: () => [u.value && A("div", {
              class: "v-toolbar__extension",
              style: {
                height: ht(_.value)
              }
            }, [w])]
          })]
        })]
      });
    }), {
      contentHeight: f,
      extensionHeight: _
    };
  }
}), TH = De({
  scrollTarget: {
    type: String
  },
  scrollThreshold: {
    type: [String, Number],
    default: 300
  }
}, "scroll");
function IH(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  const {
    canScroll: n
  } = t;
  let a = 0, r = 0;
  const i = Se(null), o = ot(0), l = ot(0), s = ot(0), d = ot(!1), u = ot(!1), f = z(() => Number(e.scrollThreshold)), _ = z(() => Pn((f.value - o.value) / f.value || 0)), g = () => {
    const v = i.value;
    if (!v || n && !n.value) return;
    a = o.value, o.value = "window" in v ? v.pageYOffset : v.scrollTop;
    const w = v instanceof Window ? document.documentElement.scrollHeight : v.scrollHeight;
    if (r !== w) {
      r = w;
      return;
    }
    u.value = o.value < a, s.value = Math.abs(o.value - f.value);
  };
  return nt(u, () => {
    l.value = l.value || o.value;
  }), nt(d, () => {
    l.value = 0;
  }), nn(() => {
    nt(() => e.scrollTarget, (v) => {
      const w = v ? document.querySelector(v) : window;
      w && w !== i.value && (i.value?.removeEventListener("scroll", g), i.value = w, i.value.addEventListener("scroll", g, {
        passive: !0
      }));
    }, {
      immediate: !0
    });
  }), Ga(() => {
    i.value?.removeEventListener("scroll", g);
  }), n && nt(n, g, {
    immediate: !0
  }), {
    scrollThreshold: f,
    currentScroll: o,
    currentThreshold: s,
    isScrollActive: d,
    scrollRatio: _,
    // required only for testing
    // probably can be removed
    // later (2 chars chlng)
    isScrollingUp: u,
    savedScroll: l
  };
}
function mc() {
  const e = ot(!1);
  return nn(() => {
    window.requestAnimationFrame(() => {
      e.value = !0;
    });
  }), {
    ssrBootStyles: be(() => e.value ? void 0 : {
      transition: "none !important"
    }),
    isBooted: Uu(e)
  };
}
const EH = De({
  scrollBehavior: String,
  modelValue: {
    type: Boolean,
    default: !0
  },
  location: {
    type: String,
    default: "top",
    validator: (e) => ["top", "bottom"].includes(e)
  },
  ...AE(),
  ...uc(),
  ...TH(),
  height: {
    type: [Number, String],
    default: 64
  }
}, "VAppBar"), PH = We()({
  name: "VAppBar",
  props: EH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Se(), r = kt(e, "modelValue"), i = z(() => {
      const y = new Set(e.scrollBehavior?.split(" ") ?? []);
      return {
        hide: y.has("hide"),
        fullyHide: y.has("fully-hide"),
        inverted: y.has("inverted"),
        collapse: y.has("collapse"),
        elevate: y.has("elevate"),
        fadeImage: y.has("fade-image")
        // shrink: behavior.has('shrink'),
      };
    }), o = z(() => {
      const y = i.value;
      return y.hide || y.fullyHide || y.inverted || y.collapse || y.elevate || y.fadeImage || // behavior.shrink ||
      !r.value;
    }), {
      currentScroll: l,
      scrollThreshold: s,
      isScrollingUp: d,
      scrollRatio: u
    } = IH(e, {
      canScroll: o
    }), f = be(() => i.value.hide || i.value.fullyHide), _ = z(() => e.collapse || i.value.collapse && (i.value.inverted ? u.value > 0 : u.value === 0)), g = z(() => e.flat || i.value.fullyHide && !r.value || i.value.elevate && (i.value.inverted ? l.value > 0 : l.value === 0)), v = z(() => i.value.fadeImage ? i.value.inverted ? 1 - u.value : u.value : void 0), w = z(() => {
      if (i.value.hide && i.value.inverted) return 0;
      const y = a.value?.contentHeight ?? 0, S = a.value?.extensionHeight ?? 0;
      return f.value ? l.value < s.value || i.value.fullyHide ? y + S : y : y + S;
    });
    Fr(() => !!e.scrollBehavior, () => {
      ea(() => {
        f.value ? i.value.inverted ? r.value = l.value > s.value : r.value = d.value || l.value < s.value : r.value = !0;
      });
    });
    const {
      ssrBootStyles: b
    } = mc(), {
      layoutItemStyles: p
    } = dc({
      id: e.name,
      order: z(() => parseInt(e.order, 10)),
      position: be(() => e.location),
      layoutSize: w,
      elementSize: ot(void 0),
      active: r,
      absolute: be(() => e.absolute)
    });
    return Ge(() => {
      const y = wb.filterProps(e);
      return h(wb, He({
        ref: a,
        class: ["v-app-bar", {
          "v-app-bar--bottom": e.location === "bottom"
        }, e.class],
        style: [{
          ...p.value,
          "--v-toolbar-image-opacity": v.value,
          height: void 0,
          ...b.value
        }, e.style]
      }, y, {
        collapse: _.value,
        flat: g.value
      }), n);
    }), {};
  }
}), OH = [null, "default", "comfortable", "compact"], Qa = De({
  density: {
    type: String,
    default: "default",
    validator: (e) => OH.includes(e)
  }
}, "density");
function Ar(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    densityClasses: be(() => `${t}--density-${e.density}`)
  };
}
const DH = ["elevated", "flat", "tonal", "outlined", "text", "plain"];
function il(e, t) {
  return A(Qe, null, [e && A("span", {
    key: "overlay",
    class: Ee(`${t}__overlay`)
  }, null), A("span", {
    key: "underlay",
    class: Ee(`${t}__underlay`)
  }, null)]);
}
const Pi = De({
  color: String,
  variant: {
    type: String,
    default: "elevated",
    validator: (e) => DH.includes(e)
  }
}, "variant");
function hc(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  const n = be(() => {
    const {
      variant: i
    } = yo(e);
    return `${t}--variant-${i}`;
  }), {
    colorClasses: a,
    colorStyles: r
  } = S0(() => {
    const {
      variant: i,
      color: o
    } = yo(e);
    return {
      [["elevated", "flat"].includes(i) ? "background" : "text"]: o
    };
  });
  return {
    colorClasses: a,
    colorStyles: r,
    variantClasses: n
  };
}
const xE = De({
  baseColor: String,
  divided: Boolean,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...Hn(),
  ...qt(),
  ...an(),
  ...Pi()
}, "VBtnGroup"), kb = We()({
  name: "VBtnGroup",
  props: xE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      densityClasses: r
    } = Ar(e), {
      borderClasses: i
    } = _i(e), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e);
    ca({
      VBtn: {
        height: "auto",
        baseColor: be(() => e.baseColor),
        color: be(() => e.color),
        density: be(() => e.density),
        flat: !0,
        variant: be(() => e.variant)
      }
    }), Ge(() => h(e.tag, {
      class: Ee(["v-btn-group", {
        "v-btn-group--divided": e.divided
      }, a.value, i.value, r.value, o.value, l.value, e.class]),
      style: Xe(e.style)
    }, n));
  }
}), _c = De({
  modelValue: {
    type: null,
    default: void 0
  },
  multiple: Boolean,
  mandatory: [Boolean, String],
  max: Number,
  selectedClass: String,
  disabled: Boolean
}, "group"), pc = De({
  value: null,
  disabled: Boolean,
  selectedClass: String
}, "group-item");
function vc(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0;
  const a = ga("useGroupItem");
  if (!a)
    throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");
  const r = $r();
  Nn(Symbol.for(`${t.description}:id`), r);
  const i = Gt(t, null);
  if (!i) {
    if (!n) return i;
    throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`);
  }
  const o = be(() => e.value), l = z(() => !!(i.disabled.value || e.disabled));
  i.register({
    id: r,
    value: o,
    disabled: l
  }, a), Ga(() => {
    i.unregister(r);
  });
  const s = z(() => i.isSelected(r)), d = z(() => i.items.value[0].id === r), u = z(() => i.items.value[i.items.value.length - 1].id === r), f = z(() => s.value && [i.selectedClass.value, e.selectedClass]);
  return nt(s, (_) => {
    a.emit("group:selected", {
      value: _
    });
  }, {
    flush: "sync"
  }), {
    id: r,
    isSelected: s,
    isFirst: d,
    isLast: u,
    toggle: () => i.select(r, !s.value),
    select: (_) => i.select(r, _),
    selectedClass: f,
    value: o,
    disabled: l,
    group: i
  };
}
function ol(e, t) {
  let n = !1;
  const a = oa([]), r = kt(e, "modelValue", [], (_) => _ == null ? [] : TE(a, Zn(_)), (_) => {
    const g = VH(a, _);
    return e.multiple ? g : g[0];
  }), i = ga("useGroup");
  function o(_, g) {
    const v = _, w = Symbol.for(`${t.description}:id`), p = au(w, i?.vnode).indexOf(g);
    fe(v.value) == null && (v.value = p, v.useIndexAsValue = !0), p > -1 ? a.splice(p, 0, v) : a.push(v);
  }
  function l(_) {
    if (n) return;
    s();
    const g = a.findIndex((v) => v.id === _);
    a.splice(g, 1);
  }
  function s() {
    const _ = a.find((g) => !g.disabled);
    _ && e.mandatory === "force" && !r.value.length && (r.value = [_.id]);
  }
  nn(() => {
    s();
  }), Ga(() => {
    n = !0;
  }), fw(() => {
    for (let _ = 0; _ < a.length; _++)
      a[_].useIndexAsValue && (a[_].value = _);
  });
  function d(_, g) {
    const v = a.find((w) => w.id === _);
    if (!(g && v?.disabled))
      if (e.multiple) {
        const w = r.value.slice(), b = w.findIndex((y) => y === _), p = ~b;
        if (g = g ?? !p, p && e.mandatory && w.length <= 1 || !p && e.max != null && w.length + 1 > e.max) return;
        b < 0 && g ? w.push(_) : b >= 0 && !g && w.splice(b, 1), r.value = w;
      } else {
        const w = r.value.includes(_);
        if (e.mandatory && w || !w && !g) return;
        r.value = g ?? !w ? [_] : [];
      }
  }
  function u(_) {
    if (e.multiple, r.value.length) {
      const g = r.value[0], v = a.findIndex((p) => p.id === g);
      let w = (v + _) % a.length, b = a[w];
      for (; b.disabled && w !== v; )
        w = (w + _) % a.length, b = a[w];
      if (b.disabled) return;
      r.value = [a[w].id];
    } else {
      const g = a.find((v) => !v.disabled);
      g && (r.value = [g.id]);
    }
  }
  const f = {
    register: o,
    unregister: l,
    selected: r,
    select: d,
    disabled: be(() => e.disabled),
    prev: () => u(a.length - 1),
    next: () => u(1),
    isSelected: (_) => r.value.includes(_),
    selectedClass: be(() => e.selectedClass),
    items: be(() => a),
    getItemIndex: (_) => BH(a, _)
  };
  return Nn(t, f), f;
}
function BH(e, t) {
  const n = TE(e, [t]);
  return n.length ? e.findIndex((a) => a.id === n[0]) : -1;
}
function TE(e, t) {
  const n = [];
  return t.forEach((a) => {
    const r = e.find((o) => fr(a, o.value)), i = e[a];
    r?.value != null ? n.push(r.id) : i != null && n.push(i.id);
  }), n;
}
function VH(e, t) {
  const n = [];
  return t.forEach((a) => {
    const r = e.findIndex((i) => i.id === a);
    if (~r) {
      const i = e[r];
      n.push(i.value != null ? i.value : r);
    }
  }), n;
}
const C0 = Symbol.for("vuetify:v-btn-toggle"), MH = De({
  ...xE(),
  ..._c()
}, "VBtnToggle"), RH = We()({
  name: "VBtnToggle",
  props: MH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isSelected: a,
      next: r,
      prev: i,
      select: o,
      selected: l
    } = ol(e, C0);
    return Ge(() => {
      const s = kb.filterProps(e);
      return h(kb, He({
        class: ["v-btn-toggle", e.class]
      }, s, {
        style: e.style
      }), {
        default: () => [n.default?.({
          isSelected: a,
          next: r,
          prev: i,
          select: o,
          selected: l
        })]
      });
    }), {
      next: r,
      prev: i,
      select: o
    };
  }
}), LH = ["x-small", "small", "default", "large", "x-large"], To = De({
  size: {
    type: [String, Number],
    default: "default"
  }
}, "size");
function Qu(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return Cw(() => {
    const n = e.size;
    let a, r;
    return v_(LH, n) ? a = `${t}--size-${n}` : n && (r = {
      width: ht(n),
      height: ht(n)
    }), {
      sizeClasses: a,
      sizeStyles: r
    };
  });
}
const FH = De({
  color: String,
  disabled: Boolean,
  start: Boolean,
  end: Boolean,
  icon: At,
  opacity: [String, Number],
  ...vt(),
  ...To(),
  ...qt({
    tag: "i"
  }),
  ...an()
}, "VIcon"), pn = We()({
  name: "VIcon",
  props: FH(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = ot(), {
      themeClasses: i
    } = Vw(), {
      iconData: o
    } = n8(() => r.value || e.icon), {
      sizeClasses: l
    } = Qu(e), {
      textColorClasses: s,
      textColorStyles: d
    } = mr(() => e.color);
    return Ge(() => {
      const u = a.default?.();
      u && (r.value = bT(u).filter((_) => _.type === Rf && _.children && typeof _.children == "string")[0]?.children);
      const f = !!(n.onClick || n.onClickOnce);
      return h(o.value.component, {
        tag: e.tag,
        icon: o.value.icon,
        class: Ee(["v-icon", "notranslate", i.value, l.value, s.value, {
          "v-icon--clickable": f,
          "v-icon--disabled": e.disabled,
          "v-icon--start": e.start,
          "v-icon--end": e.end
        }, e.class]),
        style: Xe([{
          "--v-icon-opacity": e.opacity
        }, l.value ? void 0 : {
          fontSize: ht(e.size),
          height: ht(e.size),
          width: ht(e.size)
        }, d.value, e.style]),
        role: f ? "button" : void 0,
        "aria-hidden": !f,
        tabindex: f ? e.disabled ? -1 : 0 : void 0
      }, {
        default: () => [u]
      });
    }), {};
  }
});
function Gf(e, t) {
  const n = Se(), a = ot(!1);
  if (ww) {
    const r = new IntersectionObserver((i) => {
      a.value = !!i.find((o) => o.isIntersecting);
    }, t);
    qa(() => {
      r.disconnect();
    }), nt(n, (i, o) => {
      o && (r.unobserve(o), a.value = !1), i && r.observe(i);
    }, {
      flush: "post"
    });
  }
  return {
    intersectionRef: n,
    isIntersecting: a
  };
}
const NH = De({
  bgColor: String,
  color: String,
  indeterminate: [Boolean, String],
  modelValue: {
    type: [Number, String],
    default: 0
  },
  rotate: {
    type: [Number, String],
    default: 0
  },
  width: {
    type: [Number, String],
    default: 4
  },
  ...vt(),
  ...To(),
  ...qt({
    tag: "div"
  }),
  ...an()
}, "VProgressCircular"), Mu = We()({
  name: "VProgressCircular",
  props: NH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = 20, r = 2 * Math.PI * a, i = Se(), {
      themeClasses: o
    } = yn(e), {
      sizeClasses: l,
      sizeStyles: s
    } = Qu(e), {
      textColorClasses: d,
      textColorStyles: u
    } = mr(() => e.color), {
      textColorClasses: f,
      textColorStyles: _
    } = mr(() => e.bgColor), {
      intersectionRef: g,
      isIntersecting: v
    } = Gf(), {
      resizeRef: w,
      contentRect: b
    } = Wi(), p = be(() => Pn(parseFloat(e.modelValue), 0, 100)), y = be(() => Number(e.width)), S = be(() => s.value ? Number(e.size) : b.value ? b.value.width : Math.max(y.value, 32)), E = be(() => a / (1 - y.value / S.value) * 2), C = be(() => y.value / S.value * E.value), B = be(() => ht((100 - p.value) / 100 * r));
    return ea(() => {
      g.value = i.value, w.value = i.value;
    }), Ge(() => h(e.tag, {
      ref: i,
      class: Ee(["v-progress-circular", {
        "v-progress-circular--indeterminate": !!e.indeterminate,
        "v-progress-circular--visible": v.value,
        "v-progress-circular--disable-shrink": e.indeterminate === "disable-shrink"
      }, o.value, l.value, d.value, e.class]),
      style: Xe([s.value, u.value, e.style]),
      role: "progressbar",
      "aria-valuemin": "0",
      "aria-valuemax": "100",
      "aria-valuenow": e.indeterminate ? void 0 : p.value
    }, {
      default: () => [A("svg", {
        style: {
          transform: `rotate(calc(-90deg + ${Number(e.rotate)}deg))`
        },
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: `0 0 ${E.value} ${E.value}`
      }, [A("circle", {
        class: Ee(["v-progress-circular__underlay", f.value]),
        style: Xe(_.value),
        fill: "transparent",
        cx: "50%",
        cy: "50%",
        r: a,
        "stroke-width": C.value,
        "stroke-dasharray": r,
        "stroke-dashoffset": 0
      }, null), A("circle", {
        class: "v-progress-circular__overlay",
        fill: "transparent",
        cx: "50%",
        cy: "50%",
        r: a,
        "stroke-width": C.value,
        "stroke-dasharray": r,
        "stroke-dashoffset": B.value
      }, null)]), n.default && A("div", {
        class: "v-progress-circular__content"
      }, [n.default({
        value: p.value
      })])]
    })), {};
  }
}), XC = {
  center: "center",
  top: "bottom",
  bottom: "top",
  left: "right",
  right: "left"
}, us = De({
  location: String
}, "location");
function gc(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1, n = arguments.length > 2 ? arguments[2] : void 0;
  const {
    isRtl: a
  } = Ra();
  return {
    locationStyles: z(() => {
      if (!e.location) return {};
      const {
        side: i,
        align: o
      } = Ny(e.location.split(" ").length > 1 ? e.location : `${e.location} center`, a.value);
      function l(d) {
        return n ? n(d) : 0;
      }
      const s = {};
      return i !== "center" && (t ? s[XC[i]] = `calc(100% - ${l(i)}px)` : s[i] = 0), o !== "center" ? t ? s[XC[o]] = `calc(100% - ${l(o)}px)` : s[o] = 0 : (i === "center" ? s.top = s.left = "50%" : s[{
        top: "left",
        bottom: "left",
        left: "top",
        right: "top"
      }[i]] = "50%", s.transform = {
        top: "translateX(-50%)",
        bottom: "translateX(-50%)",
        left: "translateY(-50%)",
        right: "translateY(-50%)",
        center: "translate(-50%, -50%)"
      }[i]), s;
    })
  };
}
const UH = De({
  absolute: Boolean,
  active: {
    type: Boolean,
    default: !0
  },
  bgColor: String,
  bgOpacity: [Number, String],
  bufferValue: {
    type: [Number, String],
    default: 0
  },
  bufferColor: String,
  bufferOpacity: [Number, String],
  clickable: Boolean,
  color: String,
  height: {
    type: [Number, String],
    default: 4
  },
  indeterminate: Boolean,
  max: {
    type: [Number, String],
    default: 100
  },
  modelValue: {
    type: [Number, String],
    default: 0
  },
  opacity: [Number, String],
  reverse: Boolean,
  stream: Boolean,
  striped: Boolean,
  roundedBar: Boolean,
  ...vt(),
  ...us({
    location: "top"
  }),
  ...Hn(),
  ...qt(),
  ...an()
}, "VProgressLinear"), yp = We()({
  name: "VProgressLinear",
  props: UH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      isRtl: r,
      rtlClasses: i
    } = Ra(), {
      themeClasses: o
    } = yn(e), {
      locationStyles: l
    } = gc(e), {
      textColorClasses: s,
      textColorStyles: d
    } = mr(() => e.color), {
      backgroundColorClasses: u,
      backgroundColorStyles: f
    } = An(() => e.bgColor || e.color), {
      backgroundColorClasses: _,
      backgroundColorStyles: g
    } = An(() => e.bufferColor || e.bgColor || e.color), {
      backgroundColorClasses: v,
      backgroundColorStyles: w
    } = An(() => e.color), {
      roundedClasses: b
    } = fa(e), {
      intersectionRef: p,
      isIntersecting: y
    } = Gf(), S = z(() => parseFloat(e.max)), E = z(() => parseFloat(e.height)), C = z(() => Pn(parseFloat(e.bufferValue) / S.value * 100, 0, 100)), B = z(() => Pn(parseFloat(a.value) / S.value * 100, 0, 100)), O = z(() => r.value !== e.reverse), D = z(() => e.indeterminate ? "fade-transition" : "slide-x-transition"), T = vn && window.matchMedia?.("(forced-colors: active)").matches;
    function P(I) {
      if (!p.value) return;
      const {
        left: M,
        right: V,
        width: N
      } = p.value.getBoundingClientRect(), q = O.value ? N - I.clientX + (V - N) : I.clientX - M;
      a.value = Math.round(q / N * S.value);
    }
    return Ge(() => h(e.tag, {
      ref: p,
      class: Ee(["v-progress-linear", {
        "v-progress-linear--absolute": e.absolute,
        "v-progress-linear--active": e.active && y.value,
        "v-progress-linear--reverse": O.value,
        "v-progress-linear--rounded": e.rounded,
        "v-progress-linear--rounded-bar": e.roundedBar,
        "v-progress-linear--striped": e.striped
      }, b.value, o.value, i.value, e.class]),
      style: Xe([{
        bottom: e.location === "bottom" ? 0 : void 0,
        top: e.location === "top" ? 0 : void 0,
        height: e.active ? ht(E.value) : 0,
        "--v-progress-linear-height": ht(E.value),
        ...e.absolute ? l.value : {}
      }, e.style]),
      role: "progressbar",
      "aria-hidden": e.active ? "false" : "true",
      "aria-valuemin": "0",
      "aria-valuemax": e.max,
      "aria-valuenow": e.indeterminate ? void 0 : Math.min(parseFloat(a.value), S.value),
      onClick: e.clickable && P
    }, {
      default: () => [e.stream && A("div", {
        key: "stream",
        class: Ee(["v-progress-linear__stream", s.value]),
        style: {
          ...d.value,
          [O.value ? "left" : "right"]: ht(-E.value),
          borderTop: `${ht(E.value / 2)} dotted`,
          opacity: parseFloat(e.bufferOpacity),
          top: `calc(50% - ${ht(E.value / 4)})`,
          width: ht(100 - C.value, "%"),
          "--v-progress-linear-stream-to": ht(E.value * (O.value ? 1 : -1))
        }
      }, null), A("div", {
        class: Ee(["v-progress-linear__background", T ? void 0 : u.value]),
        style: Xe([f.value, {
          opacity: parseFloat(e.bgOpacity),
          width: e.stream ? 0 : void 0
        }])
      }, null), A("div", {
        class: Ee(["v-progress-linear__buffer", T ? void 0 : _.value]),
        style: Xe([g.value, {
          opacity: parseFloat(e.bufferOpacity),
          width: ht(C.value, "%")
        }])
      }, null), h(Ur, {
        name: D.value
      }, {
        default: () => [e.indeterminate ? A("div", {
          class: "v-progress-linear__indeterminate"
        }, [["long", "short"].map((I) => A("div", {
          key: I,
          class: Ee(["v-progress-linear__indeterminate", I, T ? void 0 : v.value]),
          style: Xe(w.value)
        }, null))]) : A("div", {
          class: Ee(["v-progress-linear__determinate", T ? void 0 : v.value]),
          style: Xe([w.value, {
            width: ht(B.value, "%")
          }])
        }, null)]
      }), n.default && A("div", {
        class: "v-progress-linear__content"
      }, [n.default({
        value: B.value,
        buffer: C.value
      })])]
    })), {};
  }
}), bp = De({
  loading: [Boolean, String]
}, "loader");
function Qf(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    loaderClasses: be(() => ({
      [`${t}--loading`]: e.loading
    }))
  };
}
function Jf(e, t) {
  let {
    slots: n
  } = t;
  return A("div", {
    class: Ee(`${e.name}__loader`)
  }, [n.default?.({
    color: e.color,
    isActive: e.active
  }) || h(yp, {
    absolute: e.absolute,
    active: e.active,
    color: e.color,
    height: "2",
    indeterminate: !0
  }, null)]);
}
const $H = ["static", "relative", "fixed", "absolute", "sticky"], Ju = De({
  position: {
    type: String,
    validator: (
      /* istanbul ignore next */
      (e) => $H.includes(e)
    )
  }
}, "position");
function Xu(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  return {
    positionClasses: be(() => e.position ? `${t}--${e.position}` : void 0)
  };
}
function qH() {
  const e = ga("useRoute");
  return z(() => e?.proxy?.$route);
}
function IE() {
  return ga("useRouter")?.proxy?.$router;
}
function Xf(e, t) {
  const n = Hu("RouterLink"), a = be(() => !!(e.href || e.to)), r = z(() => a?.value || US(t, "click") || US(e, "click"));
  if (typeof n == "string" || !("useLink" in n)) {
    const u = be(() => e.href);
    return {
      isLink: a,
      isClickable: r,
      href: u,
      linkProps: oa({
        href: u
      })
    };
  }
  const i = n.useLink({
    to: be(() => e.to || ""),
    replace: be(() => e.replace)
  }), o = z(() => e.to ? i : void 0), l = qH(), s = z(() => o.value ? e.exact ? l.value ? o.value.isExactActive?.value && fr(o.value.route.value.query, l.value.query) : o.value.isExactActive?.value ?? !1 : o.value.isActive?.value ?? !1 : !1), d = z(() => e.to ? o.value?.route.value.href : e.href);
  return {
    isLink: a,
    isClickable: r,
    isActive: s,
    route: o.value?.route,
    navigate: o.value?.navigate,
    href: d,
    linkProps: oa({
      href: d,
      "aria-current": be(() => s.value ? "page" : void 0)
    })
  };
}
const Zf = De({
  href: String,
  replace: Boolean,
  to: [String, Object],
  exact: Boolean
}, "router");
let sy = !1;
function HH(e, t) {
  let n = !1, a, r;
  vn && e?.beforeEach && (Vt(() => {
    window.addEventListener("popstate", i), a = e.beforeEach((o, l, s) => {
      sy ? n ? t(s) : s() : setTimeout(() => n ? t(s) : s()), sy = !0;
    }), r = e?.afterEach(() => {
      sy = !1;
    });
  }), qa(() => {
    window.removeEventListener("popstate", i), a?.(), r?.();
  }));
  function i(o) {
    o.state?.replaced || (n = !0, setTimeout(() => n = !1));
  }
}
function zH(e, t) {
  nt(() => e.isActive?.value, (n) => {
    e.isLink.value && n != null && t && Vt(() => {
      t(n);
    });
  }, {
    immediate: !0
  });
}
const Sb = Symbol("rippleStop"), WH = 80;
function ZC(e, t) {
  e.style.transform = t, e.style.webkitTransform = t;
}
function Cb(e) {
  return e.constructor.name === "TouchEvent";
}
function EE(e) {
  return e.constructor.name === "KeyboardEvent";
}
const jH = function(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, a = 0, r = 0;
  if (!EE(e)) {
    const f = t.getBoundingClientRect(), _ = Cb(e) ? e.touches[e.touches.length - 1] : e;
    a = _.clientX - f.left, r = _.clientY - f.top;
  }
  let i = 0, o = 0.3;
  t._ripple?.circle ? (o = 0.15, i = t.clientWidth / 2, i = n.center ? i : i + Math.sqrt((a - i) ** 2 + (r - i) ** 2) / 4) : i = Math.sqrt(t.clientWidth ** 2 + t.clientHeight ** 2) / 2;
  const l = `${(t.clientWidth - i * 2) / 2}px`, s = `${(t.clientHeight - i * 2) / 2}px`, d = n.center ? l : `${a - i}px`, u = n.center ? s : `${r - i}px`;
  return {
    radius: i,
    scale: o,
    x: d,
    y: u,
    centerX: l,
    centerY: s
  };
}, F_ = {
  /* eslint-disable max-statements */
  show(e, t) {
    let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (!t?._ripple?.enabled)
      return;
    const a = document.createElement("span"), r = document.createElement("span");
    a.appendChild(r), a.className = "v-ripple__container", n.class && (a.className += ` ${n.class}`);
    const {
      radius: i,
      scale: o,
      x: l,
      y: s,
      centerX: d,
      centerY: u
    } = jH(e, t, n), f = `${i * 2}px`;
    r.className = "v-ripple__animation", r.style.width = f, r.style.height = f, t.appendChild(a);
    const _ = window.getComputedStyle(t);
    _ && _.position === "static" && (t.style.position = "relative", t.dataset.previousPosition = "static"), r.classList.add("v-ripple__animation--enter"), r.classList.add("v-ripple__animation--visible"), ZC(r, `translate(${l}, ${s}) scale3d(${o},${o},${o})`), r.dataset.activated = String(performance.now()), requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        r.classList.remove("v-ripple__animation--enter"), r.classList.add("v-ripple__animation--in"), ZC(r, `translate(${d}, ${u}) scale3d(1,1,1)`);
      });
    });
  },
  hide(e) {
    if (!e?._ripple?.enabled) return;
    const t = e.getElementsByClassName("v-ripple__animation");
    if (t.length === 0) return;
    const n = t[t.length - 1];
    if (n.dataset.isHiding) return;
    n.dataset.isHiding = "true";
    const a = performance.now() - Number(n.dataset.activated), r = Math.max(250 - a, 0);
    setTimeout(() => {
      n.classList.remove("v-ripple__animation--in"), n.classList.add("v-ripple__animation--out"), setTimeout(() => {
        e.getElementsByClassName("v-ripple__animation").length === 1 && e.dataset.previousPosition && (e.style.position = e.dataset.previousPosition, delete e.dataset.previousPosition), n.parentNode?.parentNode === e && e.removeChild(n.parentNode);
      }, 300);
    }, r);
  }
};
function PE(e) {
  return typeof e > "u" || !!e;
}
function Tf(e) {
  const t = {}, n = e.currentTarget;
  if (!(!n?._ripple || n._ripple.touched || e[Sb])) {
    if (e[Sb] = !0, Cb(e))
      n._ripple.touched = !0, n._ripple.isTouch = !0;
    else if (n._ripple.isTouch) return;
    if (t.center = n._ripple.centered || EE(e), n._ripple.class && (t.class = n._ripple.class), Cb(e)) {
      if (n._ripple.showTimerCommit) return;
      n._ripple.showTimerCommit = () => {
        F_.show(e, n, t);
      }, n._ripple.showTimer = window.setTimeout(() => {
        n?._ripple?.showTimerCommit && (n._ripple.showTimerCommit(), n._ripple.showTimerCommit = null);
      }, WH);
    } else
      F_.show(e, n, t);
  }
}
function eA(e) {
  e[Sb] = !0;
}
function ii(e) {
  const t = e.currentTarget;
  if (t?._ripple) {
    if (window.clearTimeout(t._ripple.showTimer), e.type === "touchend" && t._ripple.showTimerCommit) {
      t._ripple.showTimerCommit(), t._ripple.showTimerCommit = null, t._ripple.showTimer = window.setTimeout(() => {
        ii(e);
      });
      return;
    }
    window.setTimeout(() => {
      t._ripple && (t._ripple.touched = !1);
    }), F_.hide(t);
  }
}
function OE(e) {
  const t = e.currentTarget;
  t?._ripple && (t._ripple.showTimerCommit && (t._ripple.showTimerCommit = null), window.clearTimeout(t._ripple.showTimer));
}
let If = !1;
function DE(e) {
  !If && (e.keyCode === MS.enter || e.keyCode === MS.space) && (If = !0, Tf(e));
}
function BE(e) {
  If = !1, ii(e);
}
function VE(e) {
  If && (If = !1, ii(e));
}
function ME(e, t, n) {
  const {
    value: a,
    modifiers: r
  } = t, i = PE(a);
  if (i || F_.hide(e), e._ripple = e._ripple ?? {}, e._ripple.enabled = i, e._ripple.centered = r.center, e._ripple.circle = r.circle, mf(a) && a.class && (e._ripple.class = a.class), i && !n) {
    if (r.stop) {
      e.addEventListener("touchstart", eA, {
        passive: !0
      }), e.addEventListener("mousedown", eA);
      return;
    }
    e.addEventListener("touchstart", Tf, {
      passive: !0
    }), e.addEventListener("touchend", ii, {
      passive: !0
    }), e.addEventListener("touchmove", OE, {
      passive: !0
    }), e.addEventListener("touchcancel", ii), e.addEventListener("mousedown", Tf), e.addEventListener("mouseup", ii), e.addEventListener("mouseleave", ii), e.addEventListener("keydown", DE), e.addEventListener("keyup", BE), e.addEventListener("blur", VE), e.addEventListener("dragstart", ii, {
      passive: !0
    });
  } else !i && n && RE(e);
}
function RE(e) {
  e.removeEventListener("mousedown", Tf), e.removeEventListener("touchstart", Tf), e.removeEventListener("touchend", ii), e.removeEventListener("touchmove", OE), e.removeEventListener("touchcancel", ii), e.removeEventListener("mouseup", ii), e.removeEventListener("mouseleave", ii), e.removeEventListener("keydown", DE), e.removeEventListener("keyup", BE), e.removeEventListener("dragstart", ii), e.removeEventListener("blur", VE);
}
function YH(e, t) {
  ME(e, t, !1);
}
function KH(e) {
  delete e._ripple, RE(e);
}
function GH(e, t) {
  if (t.value === t.oldValue)
    return;
  const n = PE(t.oldValue);
  ME(e, t, n);
}
const Cr = {
  mounted: YH,
  unmounted: KH,
  updated: GH
}, wp = De({
  active: {
    type: Boolean,
    default: void 0
  },
  activeColor: String,
  baseColor: String,
  symbol: {
    type: null,
    default: C0
  },
  flat: Boolean,
  icon: [Boolean, String, Function, Object],
  prependIcon: At,
  appendIcon: At,
  block: Boolean,
  readonly: Boolean,
  slim: Boolean,
  stacked: Boolean,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...pc(),
  ...bp(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...Zf(),
  ...To(),
  ...qt({
    tag: "button"
  }),
  ...an(),
  ...Pi({
    variant: "elevated"
  })
}, "VBtn"), cn = We()({
  name: "VBtn",
  props: wp(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      borderClasses: i
    } = _i(e), {
      densityClasses: o
    } = Ar(e), {
      dimensionStyles: l
    } = Fa(e), {
      elevationClasses: s
    } = ir(e), {
      loaderClasses: d
    } = Qf(e), {
      locationStyles: u
    } = gc(e), {
      positionClasses: f
    } = Xu(e), {
      roundedClasses: _
    } = fa(e), {
      sizeClasses: g,
      sizeStyles: v
    } = Qu(e), w = vc(e, e.symbol, !1), b = Xf(e, n), p = z(() => e.active !== void 0 ? e.active : b.isLink.value ? b.isActive?.value : w?.isSelected.value), y = be(() => p.value ? e.activeColor ?? e.color : e.color), S = z(() => ({
      color: w?.isSelected.value && (!b.isLink.value || b.isActive?.value) || !w || b.isActive?.value ? y.value ?? e.baseColor : e.baseColor,
      variant: e.variant
    })), {
      colorClasses: E,
      colorStyles: C,
      variantClasses: B
    } = hc(S), O = z(() => w?.disabled.value || e.disabled), D = be(() => e.variant === "elevated" && !(e.disabled || e.flat || e.border)), T = z(() => {
      if (!(e.value === void 0 || typeof e.value == "symbol"))
        return Object(e.value) === e.value ? JSON.stringify(e.value, null, 0) : e.value;
    });
    function P(I) {
      O.value || b.isLink.value && (I.metaKey || I.ctrlKey || I.shiftKey || I.button !== 0 || n.target === "_blank") || (b.navigate?.(I), w?.toggle());
    }
    return zH(b, w?.select), Ge(() => {
      const I = b.isLink.value ? "a" : e.tag, M = !!(e.prependIcon || a.prepend), V = !!(e.appendIcon || a.append), N = !!(e.icon && e.icon !== !0);
      return ln(h(I, He({
        type: I === "a" ? void 0 : "button",
        class: ["v-btn", w?.selectedClass.value, {
          "v-btn--active": p.value,
          "v-btn--block": e.block,
          "v-btn--disabled": O.value,
          "v-btn--elevated": D.value,
          "v-btn--flat": e.flat,
          "v-btn--icon": !!e.icon,
          "v-btn--loading": e.loading,
          "v-btn--readonly": e.readonly,
          "v-btn--slim": e.slim,
          "v-btn--stacked": e.stacked
        }, r.value, i.value, E.value, o.value, s.value, d.value, f.value, _.value, g.value, B.value, e.class],
        style: [C.value, l.value, u.value, v.value, e.style],
        "aria-busy": e.loading ? !0 : void 0,
        disabled: O.value || void 0,
        tabindex: e.loading || e.readonly ? -1 : void 0,
        onClick: P,
        value: T.value
      }, b.linkProps), {
        default: () => [il(!0, "v-btn"), !e.icon && M && A("span", {
          key: "prepend",
          class: "v-btn__prepend"
        }, [a.prepend ? h(Wt, {
          key: "prepend-defaults",
          disabled: !e.prependIcon,
          defaults: {
            VIcon: {
              icon: e.prependIcon
            }
          }
        }, a.prepend) : h(pn, {
          key: "prepend-icon",
          icon: e.prependIcon
        }, null)]), A("span", {
          class: "v-btn__content",
          "data-no-activator": ""
        }, [!a.default && N ? h(pn, {
          key: "content-icon",
          icon: e.icon
        }, null) : h(Wt, {
          key: "content-defaults",
          disabled: !N,
          defaults: {
            VIcon: {
              icon: e.icon
            }
          }
        }, {
          default: () => [a.default?.() ?? W(e.text)]
        })]), !e.icon && V && A("span", {
          key: "append",
          class: "v-btn__append"
        }, [a.append ? h(Wt, {
          key: "append-defaults",
          disabled: !e.appendIcon,
          defaults: {
            VIcon: {
              icon: e.appendIcon
            }
          }
        }, a.append) : h(pn, {
          key: "append-icon",
          icon: e.appendIcon
        }, null)]), !!e.loading && A("span", {
          key: "loader",
          class: "v-btn__loader"
        }, [a.loader?.() ?? h(Mu, {
          color: typeof e.loading == "boolean" ? void 0 : e.loading,
          indeterminate: !0,
          width: "2"
        }, null)])]
      }), [[Cr, !O.value && e.ripple, "", {
        center: !!e.icon
      }]]);
    }), {
      group: w
    };
  }
}), QH = De({
  ...wp({
    icon: "$menu",
    variant: "text"
  })
}, "VAppBarNavIcon"), JH = We()({
  name: "VAppBarNavIcon",
  props: QH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(cn, He(e, {
      class: ["v-app-bar-nav-icon"]
    }), n)), {};
  }
}), XH = We()({
  name: "VAppBarTitle",
  props: yE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(y0, He(e, {
      class: "v-app-bar-title"
    }), n)), {};
  }
}), LE = xo("v-alert-title"), ZH = ["success", "info", "warning", "error"], ez = De({
  border: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || ["top", "end", "bottom", "start"].includes(e)
  },
  borderColor: String,
  closable: Boolean,
  closeIcon: {
    type: At,
    default: "$close"
  },
  closeLabel: {
    type: String,
    default: "$vuetify.close"
  },
  icon: {
    type: [Boolean, String, Function, Object],
    default: null
  },
  modelValue: {
    type: Boolean,
    default: !0
  },
  prominent: Boolean,
  title: String,
  text: String,
  type: {
    type: String,
    validator: (e) => ZH.includes(e)
  },
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...qt(),
  ...an(),
  ...Pi({
    variant: "flat"
  })
}, "VAlert"), tz = We()({
  name: "VAlert",
  props: ez(),
  emits: {
    "click:close": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), i = be(() => {
      if (e.icon !== !1)
        return e.type ? e.icon ?? `$${e.type}` : e.icon;
    }), {
      themeClasses: o
    } = yn(e), {
      colorClasses: l,
      colorStyles: s,
      variantClasses: d
    } = hc(() => ({
      color: e.color ?? e.type,
      variant: e.variant
    })), {
      densityClasses: u
    } = Ar(e), {
      dimensionStyles: f
    } = Fa(e), {
      elevationClasses: _
    } = ir(e), {
      locationStyles: g
    } = gc(e), {
      positionClasses: v
    } = Xu(e), {
      roundedClasses: w
    } = fa(e), {
      textColorClasses: b,
      textColorStyles: p
    } = mr(() => e.borderColor), {
      t: y
    } = ua(), S = be(() => ({
      "aria-label": y(e.closeLabel),
      onClick(E) {
        r.value = !1, n("click:close", E);
      }
    }));
    return () => {
      const E = !!(a.prepend || i.value), C = !!(a.title || e.title), B = !!(a.close || e.closable);
      return r.value && h(e.tag, {
        class: Ee(["v-alert", e.border && {
          "v-alert--border": !!e.border,
          [`v-alert--border-${e.border === !0 ? "start" : e.border}`]: !0
        }, {
          "v-alert--prominent": e.prominent
        }, o.value, l.value, u.value, _.value, v.value, w.value, d.value, e.class]),
        style: Xe([s.value, f.value, g.value, e.style]),
        role: "alert"
      }, {
        default: () => [il(!1, "v-alert"), e.border && A("div", {
          key: "border",
          class: Ee(["v-alert__border", b.value]),
          style: Xe(p.value)
        }, null), E && A("div", {
          key: "prepend",
          class: "v-alert__prepend"
        }, [a.prepend ? h(Wt, {
          key: "prepend-defaults",
          disabled: !i.value,
          defaults: {
            VIcon: {
              density: e.density,
              icon: i.value,
              size: e.prominent ? 44 : 28
            }
          }
        }, a.prepend) : h(pn, {
          key: "prepend-icon",
          density: e.density,
          icon: i.value,
          size: e.prominent ? 44 : 28
        }, null)]), A("div", {
          class: "v-alert__content"
        }, [C && h(LE, {
          key: "title"
        }, {
          default: () => [a.title?.() ?? e.title]
        }), a.text?.() ?? e.text, a.default?.()]), a.append && A("div", {
          key: "append",
          class: "v-alert__append"
        }, [a.append()]), B && A("div", {
          key: "close",
          class: "v-alert__close"
        }, [a.close ? h(Wt, {
          key: "close-defaults",
          defaults: {
            VBtn: {
              icon: e.closeIcon,
              size: "x-small",
              variant: "text"
            }
          }
        }, {
          default: () => [a.close?.({
            props: S.value
          })]
        }) : h(cn, He({
          key: "close-btn",
          icon: e.closeIcon,
          size: "x-small",
          variant: "text"
        }, S.value), null)])]
      });
    };
  }
}), nz = De({
  start: Boolean,
  end: Boolean,
  icon: At,
  image: String,
  text: String,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...Hn(),
  ...To(),
  ...qt(),
  ...an(),
  ...Pi({
    variant: "flat"
  })
}, "VAvatar"), Ei = We()({
  name: "VAvatar",
  props: nz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      borderClasses: r
    } = _i(e), {
      colorClasses: i,
      colorStyles: o,
      variantClasses: l
    } = hc(e), {
      densityClasses: s
    } = Ar(e), {
      roundedClasses: d
    } = fa(e), {
      sizeClasses: u,
      sizeStyles: f
    } = Qu(e);
    return Ge(() => h(e.tag, {
      class: Ee(["v-avatar", {
        "v-avatar--start": e.start,
        "v-avatar--end": e.end
      }, a.value, r.value, i.value, s.value, d.value, u.value, l.value, e.class]),
      style: Xe([o.value, f.value, e.style])
    }, {
      default: () => [n.default ? h(Wt, {
        key: "content-defaults",
        defaults: {
          VImg: {
            cover: !0,
            src: e.image
          },
          VIcon: {
            icon: e.icon
          }
        }
      }, {
        default: () => [n.default()]
      }) : e.image ? h(as, {
        key: "image",
        src: e.image,
        alt: "",
        cover: !0
      }, null) : e.icon ? h(pn, {
        key: "icon",
        icon: e.icon
      }, null) : e.text, il(!1, "v-avatar")]
    })), {};
  }
}), az = De({
  text: String,
  onClick: nr(),
  ...vt(),
  ...an()
}, "VLabel"), Zu = We()({
  name: "VLabel",
  props: az(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => A("label", {
      class: Ee(["v-label", {
        "v-label--clickable": !!e.onClick
      }, e.class]),
      style: Xe(e.style),
      onClick: e.onClick
    }, [e.text, n.default?.()])), {};
  }
}), FE = Symbol.for("vuetify:selection-control-group"), A0 = De({
  color: String,
  disabled: {
    type: Boolean,
    default: null
  },
  defaultsTarget: String,
  error: Boolean,
  id: String,
  inline: Boolean,
  falseIcon: At,
  trueIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  multiple: {
    type: Boolean,
    default: null
  },
  name: String,
  readonly: {
    type: Boolean,
    default: null
  },
  modelValue: null,
  type: String,
  valueComparator: {
    type: Function,
    default: fr
  },
  ...vt(),
  ...Qa(),
  ...an()
}, "SelectionControlGroup"), rz = De({
  ...A0({
    defaultsTarget: "VSelectionControl"
  })
}, "VSelectionControlGroup"), NE = We()({
  name: "VSelectionControlGroup",
  props: rz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), r = $r(), i = be(() => e.id || `v-selection-control-group-${r}`), o = be(() => e.name || i.value), l = /* @__PURE__ */ new Set();
    return Nn(FE, {
      modelValue: a,
      forceUpdate: () => {
        l.forEach((s) => s());
      },
      onForceUpdate: (s) => {
        l.add(s), qa(() => {
          l.delete(s);
        });
      }
    }), ca({
      [e.defaultsTarget]: {
        color: be(() => e.color),
        disabled: be(() => e.disabled),
        density: be(() => e.density),
        error: be(() => e.error),
        inline: be(() => e.inline),
        modelValue: a,
        multiple: be(() => !!e.multiple || e.multiple == null && Array.isArray(a.value)),
        name: o,
        falseIcon: be(() => e.falseIcon),
        trueIcon: be(() => e.trueIcon),
        readonly: be(() => e.readonly),
        ripple: be(() => e.ripple),
        type: be(() => e.type),
        valueComparator: be(() => e.valueComparator)
      }
    }), Ge(() => A("div", {
      class: Ee(["v-selection-control-group", {
        "v-selection-control-group--inline": e.inline
      }, e.class]),
      style: Xe(e.style),
      role: e.type === "radio" ? "radiogroup" : void 0
    }, [n.default?.()])), {};
  }
}), kp = De({
  label: String,
  baseColor: String,
  trueValue: null,
  falseValue: null,
  value: null,
  ...vt(),
  ...A0()
}, "VSelectionControl");
function iz(e) {
  const t = Gt(FE, void 0), {
    densityClasses: n
  } = Ar(e), a = kt(e, "modelValue"), r = z(() => e.trueValue !== void 0 ? e.trueValue : e.value !== void 0 ? e.value : !0), i = z(() => e.falseValue !== void 0 ? e.falseValue : !1), o = z(() => !!e.multiple || e.multiple == null && Array.isArray(a.value)), l = z({
    get() {
      const g = t ? t.modelValue.value : a.value;
      return o.value ? Zn(g).some((v) => e.valueComparator(v, r.value)) : e.valueComparator(g, r.value);
    },
    set(g) {
      if (e.readonly) return;
      const v = g ? r.value : i.value;
      let w = v;
      o.value && (w = g ? [...Zn(a.value), v] : Zn(a.value).filter((b) => !e.valueComparator(b, r.value))), t ? t.modelValue.value = w : a.value = w;
    }
  }), {
    textColorClasses: s,
    textColorStyles: d
  } = mr(() => {
    if (!(e.error || e.disabled))
      return l.value ? e.color : e.baseColor;
  }), {
    backgroundColorClasses: u,
    backgroundColorStyles: f
  } = An(() => l.value && !e.error && !e.disabled ? e.color : e.baseColor), _ = z(() => l.value ? e.trueIcon : e.falseIcon);
  return {
    group: t,
    densityClasses: n,
    trueValue: r,
    falseValue: i,
    model: l,
    textColorClasses: s,
    textColorStyles: d,
    backgroundColorClasses: u,
    backgroundColorStyles: f,
    icon: _
  };
}
const Gs = We()({
  name: "VSelectionControl",
  directives: {
    vRipple: Cr
  },
  inheritAttrs: !1,
  props: kp(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      group: r,
      densityClasses: i,
      icon: o,
      model: l,
      textColorClasses: s,
      textColorStyles: d,
      backgroundColorClasses: u,
      backgroundColorStyles: f,
      trueValue: _
    } = iz(e), g = $r(), v = ot(!1), w = ot(!1), b = Se(), p = be(() => e.id || `input-${g}`), y = be(() => !e.disabled && !e.readonly);
    r?.onForceUpdate(() => {
      b.value && (b.value.checked = l.value);
    });
    function S(O) {
      y.value && (v.value = !0, Su(O.target, ":focus-visible") !== !1 && (w.value = !0));
    }
    function E() {
      v.value = !1, w.value = !1;
    }
    function C(O) {
      O.stopPropagation();
    }
    function B(O) {
      if (!y.value) {
        b.value && (b.value.checked = l.value);
        return;
      }
      e.readonly && r && Vt(() => r.forceUpdate()), l.value = O.target.checked;
    }
    return Ge(() => {
      const O = a.label ? a.label({
        label: e.label,
        props: {
          for: p.value
        }
      }) : e.label, [D, T] = nl(n), P = A("input", He({
        ref: b,
        checked: l.value,
        disabled: !!e.disabled,
        id: p.value,
        onBlur: E,
        onFocus: S,
        onInput: B,
        "aria-disabled": !!e.disabled,
        "aria-label": e.label,
        type: e.type,
        value: _.value,
        name: e.name,
        "aria-checked": e.type === "checkbox" ? l.value : void 0
      }, T), null);
      return A("div", He({
        class: ["v-selection-control", {
          "v-selection-control--dirty": l.value,
          "v-selection-control--disabled": e.disabled,
          "v-selection-control--error": e.error,
          "v-selection-control--focused": v.value,
          "v-selection-control--focus-visible": w.value,
          "v-selection-control--inline": e.inline
        }, i.value, e.class]
      }, D, {
        style: e.style
      }), [A("div", {
        class: Ee(["v-selection-control__wrapper", s.value]),
        style: Xe(d.value)
      }, [a.default?.({
        backgroundColorClasses: u,
        backgroundColorStyles: f
      }), ln(A("div", {
        class: Ee(["v-selection-control__input"])
      }, [a.input?.({
        model: l,
        textColorClasses: s,
        textColorStyles: d,
        backgroundColorClasses: u,
        backgroundColorStyles: f,
        inputNode: P,
        icon: o.value,
        props: {
          onFocus: S,
          onBlur: E,
          id: p.value
        }
      }) ?? A(Qe, null, [o.value && h(pn, {
        key: "icon",
        icon: o.value
      }, null), P])]), [[Cr, e.ripple && [!e.disabled && !e.readonly, null, ["center", "circle"]]]])]), O && h(Zu, {
        for: p.value,
        onClick: C
      }, {
        default: () => [O]
      })]);
    }), {
      isFocused: v,
      input: b
    };
  }
}), UE = De({
  indeterminate: Boolean,
  indeterminateIcon: {
    type: At,
    default: "$checkboxIndeterminate"
  },
  ...kp({
    falseIcon: "$checkboxOff",
    trueIcon: "$checkboxOn"
  })
}, "VCheckboxBtn"), rs = We()({
  name: "VCheckboxBtn",
  props: UE(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:indeterminate": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "indeterminate"), r = kt(e, "modelValue");
    function i(s) {
      a.value && (a.value = !1);
    }
    const o = be(() => a.value ? e.indeterminateIcon : e.falseIcon), l = be(() => a.value ? e.indeterminateIcon : e.trueIcon);
    return Ge(() => {
      const s = la(Gs.filterProps(e), ["modelValue"]);
      return h(Gs, He(s, {
        modelValue: r.value,
        "onUpdate:modelValue": [(d) => r.value = d, i],
        class: ["v-checkbox-btn", e.class],
        style: e.style,
        type: "checkbox",
        falseIcon: o.value,
        trueIcon: l.value,
        "aria-checked": a.value ? "mixed" : void 0
      }), n);
    }), {};
  }
});
function $E(e) {
  const {
    t
  } = ua();
  function n(a) {
    let {
      name: r,
      color: i,
      ...o
    } = a;
    const l = {
      prepend: "prependAction",
      prependInner: "prependAction",
      append: "appendAction",
      appendInner: "appendAction",
      clear: "clear"
    }[r], s = e[`onClick:${r}`];
    function d(f) {
      f.key !== "Enter" && f.key !== " " || (f.preventDefault(), f.stopPropagation(), rp(s, new PointerEvent("click", f)));
    }
    const u = s && l ? t(`$vuetify.input.${l}`, e.label ?? "") : void 0;
    return h(pn, He({
      icon: e[`${r}Icon`],
      "aria-label": u,
      onClick: s,
      onKeydown: d,
      color: i
    }, o), null);
  }
  return {
    InputIcon: n
  };
}
const oz = De({
  active: Boolean,
  color: String,
  messages: {
    type: [Array, String],
    default: () => []
  },
  ...vt(),
  ...Gi({
    transition: {
      component: w0,
      leaveAbsolute: !0,
      group: !0
    }
  })
}, "VMessages"), qE = We()({
  name: "VMessages",
  props: oz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = z(() => Zn(e.messages)), {
      textColorClasses: r,
      textColorStyles: i
    } = mr(() => e.color);
    return Ge(() => h(Sr, {
      transition: e.transition,
      tag: "div",
      class: Ee(["v-messages", r.value, e.class]),
      style: Xe([i.value, e.style])
    }, {
      default: () => [e.active && a.value.map((o, l) => A("div", {
        class: "v-messages__message",
        key: `${l}-${a.value}`
      }, [n.message ? n.message({
        message: o
      }) : o]))]
    })), {};
  }
}), em = De({
  focused: Boolean,
  "onUpdate:focused": nr()
}, "focus");
function ds(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao();
  const n = kt(e, "focused"), a = be(() => ({
    [`${t}--focused`]: n.value
  }));
  function r() {
    n.value = !0;
  }
  function i() {
    n.value = !1;
  }
  return {
    focusClasses: a,
    isFocused: n,
    focus: r,
    blur: i
  };
}
const HE = Symbol.for("vuetify:form"), sz = De({
  disabled: Boolean,
  fastFail: Boolean,
  readonly: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  validateOn: {
    type: String,
    default: "input"
  }
}, "form");
function lz(e) {
  const t = kt(e, "modelValue"), n = be(() => e.disabled), a = be(() => e.readonly), r = ot(!1), i = Se([]), o = Se([]);
  async function l() {
    const u = [];
    let f = !0;
    o.value = [], r.value = !0;
    for (const _ of i.value) {
      const g = await _.validate();
      if (g.length > 0 && (f = !1, u.push({
        id: _.id,
        errorMessages: g
      })), !f && e.fastFail) break;
    }
    return o.value = u, r.value = !1, {
      valid: f,
      errors: o.value
    };
  }
  function s() {
    i.value.forEach((u) => u.reset());
  }
  function d() {
    i.value.forEach((u) => u.resetValidation());
  }
  return nt(i, () => {
    let u = 0, f = 0;
    const _ = [];
    for (const g of i.value)
      g.isValid === !1 ? (f++, _.push({
        id: g.id,
        errorMessages: g.errorMessages
      })) : g.isValid === !0 && u++;
    o.value = _, t.value = f > 0 ? !1 : u === i.value.length ? !0 : null;
  }, {
    deep: !0,
    flush: "post"
  }), Nn(HE, {
    register: (u) => {
      let {
        id: f,
        vm: _,
        validate: g,
        reset: v,
        resetValidation: w
      } = u;
      i.value.some((b) => b.id === f), i.value.push({
        id: f,
        validate: g,
        reset: v,
        resetValidation: w,
        vm: px(_),
        isValid: null,
        errorMessages: []
      });
    },
    unregister: (u) => {
      i.value = i.value.filter((f) => f.id !== u);
    },
    update: (u, f, _) => {
      const g = i.value.find((v) => v.id === u);
      g && (g.isValid = f, g.errorMessages = _);
    },
    isDisabled: n,
    isReadonly: a,
    isValidating: r,
    isValid: t,
    items: i,
    validateOn: be(() => e.validateOn)
  }), {
    errors: o,
    isDisabled: n,
    isReadonly: a,
    isValidating: r,
    isValid: t,
    items: i,
    validate: l,
    reset: s,
    resetValidation: d
  };
}
function tm(e) {
  const t = Gt(HE, null);
  return {
    ...t,
    isReadonly: z(() => !!(e?.readonly ?? t?.isReadonly.value)),
    isDisabled: z(() => !!(e?.disabled ?? t?.isDisabled.value))
  };
}
const cz = Symbol.for("vuetify:rules");
function uz(e) {
  const t = Gt(cz, null);
  return t ? t(e) : be(e);
}
const zE = De({
  disabled: {
    type: Boolean,
    default: null
  },
  error: Boolean,
  errorMessages: {
    type: [Array, String],
    default: () => []
  },
  maxErrors: {
    type: [Number, String],
    default: 1
  },
  name: String,
  label: String,
  readonly: {
    type: Boolean,
    default: null
  },
  rules: {
    type: Array,
    default: () => []
  },
  modelValue: null,
  validateOn: String,
  validationValue: null,
  ...em()
}, "validation");
function WE(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Ao(), n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : $r();
  const a = kt(e, "modelValue"), r = z(() => e.validationValue === void 0 ? a.value : e.validationValue), i = tm(e), o = uz(() => e.rules), l = Se([]), s = ot(!0), d = z(() => !!(Zn(a.value === "" ? null : a.value).length || Zn(r.value === "" ? null : r.value).length)), u = z(() => e.errorMessages?.length ? Zn(e.errorMessages).concat(l.value).slice(0, Math.max(0, Number(e.maxErrors))) : l.value), f = z(() => {
    let E = (e.validateOn ?? i.validateOn?.value) || "input";
    E === "lazy" && (E = "input lazy"), E === "eager" && (E = "input eager");
    const C = new Set(E?.split(" ") ?? []);
    return {
      input: C.has("input"),
      blur: C.has("blur") || C.has("input") || C.has("invalid-input"),
      invalidInput: C.has("invalid-input"),
      lazy: C.has("lazy"),
      eager: C.has("eager")
    };
  }), _ = z(() => e.error || e.errorMessages?.length ? !1 : e.rules.length ? s.value ? l.value.length || f.value.lazy ? null : !0 : !l.value.length : !0), g = ot(!1), v = z(() => ({
    [`${t}--error`]: _.value === !1,
    [`${t}--dirty`]: d.value,
    [`${t}--disabled`]: i.isDisabled.value,
    [`${t}--readonly`]: i.isReadonly.value
  })), w = ga("validation"), b = z(() => e.name ?? fe(n));
  qu(() => {
    i.register?.({
      id: b.value,
      vm: w,
      validate: S,
      reset: p,
      resetValidation: y
    });
  }), Ga(() => {
    i.unregister?.(b.value);
  }), nn(async () => {
    f.value.lazy || await S(!f.value.eager), i.update?.(b.value, _.value, u.value);
  }), Fr(() => f.value.input || f.value.invalidInput && _.value === !1, () => {
    nt(r, () => {
      if (r.value != null)
        S();
      else if (e.focused) {
        const E = nt(() => e.focused, (C) => {
          C || S(), E();
        });
      }
    });
  }), Fr(() => f.value.blur, () => {
    nt(() => e.focused, (E) => {
      E || S();
    });
  }), nt([_, u], () => {
    i.update?.(b.value, _.value, u.value);
  });
  async function p() {
    a.value = null, await Vt(), await y();
  }
  async function y() {
    s.value = !0, f.value.lazy ? l.value = [] : await S(!f.value.eager);
  }
  async function S() {
    let E = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
    const C = [];
    g.value = !0;
    for (const B of o.value) {
      if (C.length >= Number(e.maxErrors ?? 1))
        break;
      const D = await (typeof B == "function" ? B : () => B)(r.value);
      if (D !== !0) {
        if (D !== !1 && typeof D != "string") {
          console.warn(`${D} is not a valid value. Rule functions must return boolean true or a string.`);
          continue;
        }
        C.push(D || "");
      }
    }
    return l.value = C, g.value = !1, s.value = E, l.value;
  }
  return {
    errorMessages: u,
    isDirty: d,
    isDisabled: i.isDisabled,
    isReadonly: i.isReadonly,
    isPristine: s,
    isValid: _,
    isValidating: g,
    reset: p,
    resetValidation: y,
    validate: S,
    validationClasses: v
  };
}
const fs = De({
  id: String,
  appendIcon: At,
  baseColor: String,
  centerAffix: {
    type: Boolean,
    default: !0
  },
  color: String,
  glow: Boolean,
  iconColor: [Boolean, String],
  prependIcon: At,
  hideDetails: [Boolean, String],
  hideSpinButtons: Boolean,
  hint: String,
  persistentHint: Boolean,
  messages: {
    type: [Array, String],
    default: () => []
  },
  direction: {
    type: String,
    default: "horizontal",
    validator: (e) => ["horizontal", "vertical"].includes(e)
  },
  "onClick:prepend": nr(),
  "onClick:append": nr(),
  ...vt(),
  ...Qa(),
  ...tl(La(), ["maxWidth", "minWidth", "width"]),
  ...an(),
  ...zE()
}, "VInput"), hr = We()({
  name: "VInput",
  props: {
    ...fs()
  },
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a,
      emit: r
    } = t;
    const {
      densityClasses: i
    } = Ar(e), {
      dimensionStyles: o
    } = Fa(e), {
      themeClasses: l
    } = yn(e), {
      rtlClasses: s
    } = Ra(), {
      InputIcon: d
    } = $E(e), u = $r(), f = z(() => e.id || `input-${u}`), _ = z(() => `${f.value}-messages`), {
      errorMessages: g,
      isDirty: v,
      isDisabled: w,
      isReadonly: b,
      isPristine: p,
      isValid: y,
      isValidating: S,
      reset: E,
      resetValidation: C,
      validate: B,
      validationClasses: O
    } = WE(e, "v-input", f), D = z(() => ({
      id: f,
      messagesId: _,
      isDirty: v,
      isDisabled: w,
      isReadonly: b,
      isPristine: p,
      isValid: y,
      isValidating: S,
      reset: E,
      resetValidation: C,
      validate: B
    })), T = be(() => e.error || e.disabled ? void 0 : e.focused ? e.color : e.baseColor), P = be(() => {
      if (e.iconColor)
        return e.iconColor === !0 ? T.value : e.iconColor;
    }), I = z(() => e.errorMessages?.length || !p.value && g.value.length ? g.value : e.hint && (e.persistentHint || e.focused) ? e.hint : e.messages);
    return Ge(() => {
      const M = !!(a.prepend || e.prependIcon), V = !!(a.append || e.appendIcon), N = I.value.length > 0, q = !e.hideDetails || e.hideDetails === "auto" && (N || !!a.details);
      return A("div", {
        class: Ee(["v-input", `v-input--${e.direction}`, {
          "v-input--center-affix": e.centerAffix,
          "v-input--focused": e.focused,
          "v-input--glow": e.glow,
          "v-input--hide-spin-buttons": e.hideSpinButtons
        }, i.value, l.value, s.value, O.value, e.class]),
        style: Xe([o.value, e.style])
      }, [M && A("div", {
        key: "prepend",
        class: "v-input__prepend"
      }, [a.prepend?.(D.value), e.prependIcon && h(d, {
        key: "prepend-icon",
        name: "prepend",
        color: P.value
      }, null)]), a.default && A("div", {
        class: "v-input__control"
      }, [a.default?.(D.value)]), V && A("div", {
        key: "append",
        class: "v-input__append"
      }, [e.appendIcon && h(d, {
        key: "append-icon",
        name: "append",
        color: P.value
      }, null), a.append?.(D.value)]), q && A("div", {
        id: _.value,
        class: "v-input__details",
        role: "alert",
        "aria-live": "polite"
      }, [h(qE, {
        active: N,
        messages: I.value
      }, {
        message: a.message
      }), a.details?.(D.value)])]);
    }), {
      reset: E,
      resetValidation: C,
      validate: B,
      isValid: y,
      errorMessages: g
    };
  }
}), dz = De({
  ...fs(),
  ...la(UE(), ["inline"])
}, "VCheckbox"), fz = We()({
  name: "VCheckbox",
  inheritAttrs: !1,
  props: dz(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:focused": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), {
      isFocused: i,
      focus: o,
      blur: l
    } = ds(e), s = $r();
    return Ge(() => {
      const [d, u] = nl(n), f = hr.filterProps(e), _ = rs.filterProps(e);
      return h(hr, He({
        class: ["v-checkbox", e.class]
      }, d, f, {
        modelValue: r.value,
        "onUpdate:modelValue": (g) => r.value = g,
        id: e.id || `checkbox-${s}`,
        focused: i.value,
        style: e.style
      }), {
        ...a,
        default: (g) => {
          let {
            id: v,
            messagesId: w,
            isDisabled: b,
            isReadonly: p,
            isValid: y
          } = g;
          return h(rs, He(_, {
            id: v.value,
            "aria-describedby": w.value,
            disabled: b.value,
            readonly: p.value
          }, u, {
            error: y.value === !1,
            modelValue: r.value,
            "onUpdate:modelValue": (S) => r.value = S,
            onFocus: o,
            onBlur: l
          }), a);
        }
      });
    }), {};
  }
});
function mz(e) {
  let {
    selectedElement: t,
    containerElement: n,
    isRtl: a,
    isHorizontal: r
  } = e;
  const i = Ef(r, n), o = jE(r, a, n), l = Ef(r, t), s = YE(r, t), d = l * 0.4;
  return o > s ? s - d : o + i < s + l ? s - i + l + d : o;
}
function hz(e) {
  let {
    selectedElement: t,
    containerElement: n,
    isHorizontal: a
  } = e;
  const r = Ef(a, n), i = YE(a, t), o = Ef(a, t);
  return i - r / 2 + o / 2;
}
function tA(e, t) {
  return t?.[e ? "scrollWidth" : "scrollHeight"] || 0;
}
function _z(e, t) {
  return t?.[e ? "clientWidth" : "clientHeight"] || 0;
}
function jE(e, t, n) {
  if (!n)
    return 0;
  const {
    scrollLeft: a,
    offsetWidth: r,
    scrollWidth: i
  } = n;
  return e ? t ? i - r + a : a : n.scrollTop;
}
function Ef(e, t) {
  return t?.[e ? "offsetWidth" : "offsetHeight"] || 0;
}
function YE(e, t) {
  return t?.[e ? "offsetLeft" : "offsetTop"] || 0;
}
const KE = Symbol.for("vuetify:v-slide-group"), x0 = De({
  centerActive: Boolean,
  direction: {
    type: String,
    default: "horizontal"
  },
  symbol: {
    type: null,
    default: KE
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  prevIcon: {
    type: At,
    default: "$prev"
  },
  showArrows: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || ["always", "desktop", "mobile"].includes(e)
  },
  ...vt(),
  ...cc({
    mobile: null
  }),
  ...qt(),
  ..._c({
    selectedClass: "v-slide-group-item--active"
  })
}, "VSlideGroup"), Pf = We()({
  name: "VSlideGroup",
  props: x0(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isRtl: a
    } = Ra(), {
      displayClasses: r,
      mobile: i
    } = mi(e), o = ol(e, e.symbol), l = ot(!1), s = ot(0), d = ot(0), u = ot(0), f = z(() => e.direction === "horizontal"), {
      resizeRef: _,
      contentRect: g
    } = Wi(), {
      resizeRef: v,
      contentRect: w
    } = Wi(), b = G4(), p = z(() => ({
      container: _.el,
      duration: 200,
      easing: "easeOutQuart"
    })), y = z(() => o.selected.value.length ? o.items.value.findIndex((Y) => Y.id === o.selected.value[0]) : -1), S = z(() => o.selected.value.length ? o.items.value.findIndex((Y) => Y.id === o.selected.value[o.selected.value.length - 1]) : -1);
    if (vn) {
      let Y = -1;
      nt(() => [o.selected.value, g.value, w.value, f.value], () => {
        cancelAnimationFrame(Y), Y = requestAnimationFrame(() => {
          if (g.value && w.value) {
            const se = f.value ? "width" : "height";
            d.value = g.value[se], u.value = w.value[se], l.value = d.value + 1 < u.value;
          }
          if (y.value >= 0 && v.el) {
            const se = v.el.children[S.value];
            C(se, e.centerActive);
          }
        });
      });
    }
    const E = ot(!1);
    function C(Y, se) {
      let X = 0;
      se ? X = hz({
        containerElement: _.el,
        isHorizontal: f.value,
        selectedElement: Y
      }) : X = mz({
        containerElement: _.el,
        isHorizontal: f.value,
        isRtl: a.value,
        selectedElement: Y
      }), B(X);
    }
    function B(Y) {
      if (!vn || !_.el) return;
      const se = Ef(f.value, _.el), X = jE(f.value, a.value, _.el);
      if (!(tA(f.value, _.el) <= se || // Prevent scrolling by only a couple of pixels, which doesn't look smooth
      Math.abs(Y - X) < 16)) {
        if (f.value && a.value && _.el) {
          const {
            scrollWidth: ve,
            offsetWidth: pe
          } = _.el;
          Y = ve - pe - Y;
        }
        f.value ? b.horizontal(Y, p.value) : b(Y, p.value);
      }
    }
    function O(Y) {
      const {
        scrollTop: se,
        scrollLeft: X
      } = Y.target;
      s.value = f.value ? X : se;
    }
    function D(Y) {
      if (E.value = !0, !(!l.value || !v.el)) {
        for (const se of Y.composedPath())
          for (const X of v.el.children)
            if (X === se) {
              C(X);
              return;
            }
      }
    }
    function T(Y) {
      E.value = !1;
    }
    let P = !1;
    function I(Y) {
      !P && !E.value && !(Y.relatedTarget && v.el?.contains(Y.relatedTarget)) && q(), P = !1;
    }
    function M() {
      P = !0;
    }
    function V(Y) {
      if (!v.el) return;
      function se(X) {
        Y.preventDefault(), q(X);
      }
      f.value ? Y.key === "ArrowRight" ? se(a.value ? "prev" : "next") : Y.key === "ArrowLeft" && se(a.value ? "next" : "prev") : Y.key === "ArrowDown" ? se("next") : Y.key === "ArrowUp" && se("prev"), Y.key === "Home" ? se("first") : Y.key === "End" && se("last");
    }
    function N(Y, se) {
      if (!Y) return;
      let X = Y;
      do
        X = X?.[se === "next" ? "nextElementSibling" : "previousElementSibling"];
      while (X?.hasAttribute("disabled"));
      return X;
    }
    function q(Y) {
      if (!v.el) return;
      let se;
      if (!Y)
        se = hf(v.el)[0];
      else if (Y === "next") {
        if (se = N(v.el.querySelector(":focus"), Y), !se) return q("first");
      } else if (Y === "prev") {
        if (se = N(v.el.querySelector(":focus"), Y), !se) return q("last");
      } else Y === "first" ? (se = v.el.firstElementChild, se?.hasAttribute("disabled") && (se = N(se, "next"))) : Y === "last" && (se = v.el.lastElementChild, se?.hasAttribute("disabled") && (se = N(se, "prev")));
      se && se.focus({
        preventScroll: !0
      });
    }
    function j(Y) {
      const se = f.value && a.value ? -1 : 1, X = (Y === "prev" ? -se : se) * d.value;
      let he = s.value + X;
      if (f.value && a.value && _.el) {
        const {
          scrollWidth: ve,
          offsetWidth: pe
        } = _.el;
        he += ve - pe;
      }
      B(he);
    }
    const ee = z(() => ({
      next: o.next,
      prev: o.prev,
      select: o.select,
      isSelected: o.isSelected
    })), de = z(() => {
      switch (e.showArrows) {
        // Always show arrows on desktop & mobile
        case "always":
          return !0;
        // Always show arrows on desktop
        case "desktop":
          return !i.value;
        // Show arrows on mobile when overflowing.
        // This matches the default 2.2 behavior
        case !0:
          return l.value || Math.abs(s.value) > 0;
        // Always show on mobile
        case "mobile":
          return i.value || l.value || Math.abs(s.value) > 0;
        // https://material.io/components/tabs#scrollable-tabs
        // Always show arrows when
        // overflowed on desktop
        default:
          return !i.value && (l.value || Math.abs(s.value) > 0);
      }
    }), Z = z(() => Math.abs(s.value) > 1), F = z(() => {
      if (!_.value) return !1;
      const Y = tA(f.value, _.el), se = _z(f.value, _.el);
      return Y - se - Math.abs(s.value) > 1;
    });
    return Ge(() => h(e.tag, {
      class: Ee(["v-slide-group", {
        "v-slide-group--vertical": !f.value,
        "v-slide-group--has-affixes": de.value,
        "v-slide-group--is-overflowing": l.value
      }, r.value, e.class]),
      style: Xe(e.style),
      tabindex: E.value || o.selected.value.length ? -1 : 0,
      onFocus: I
    }, {
      default: () => [de.value && A("div", {
        key: "prev",
        class: Ee(["v-slide-group__prev", {
          "v-slide-group__prev--disabled": !Z.value
        }]),
        onMousedown: M,
        onClick: () => Z.value && j("prev")
      }, [n.prev?.(ee.value) ?? h(xf, null, {
        default: () => [h(pn, {
          icon: a.value ? e.nextIcon : e.prevIcon
        }, null)]
      })]), A("div", {
        key: "container",
        ref: _,
        class: "v-slide-group__container",
        onScroll: O
      }, [A("div", {
        ref: v,
        class: "v-slide-group__content",
        onFocusin: D,
        onFocusout: T,
        onKeydown: V
      }, [n.default?.(ee.value)])]), de.value && A("div", {
        key: "next",
        class: Ee(["v-slide-group__next", {
          "v-slide-group__next--disabled": !F.value
        }]),
        onMousedown: M,
        onClick: () => F.value && j("next")
      }, [n.next?.(ee.value) ?? h(xf, null, {
        default: () => [h(pn, {
          icon: a.value ? e.prevIcon : e.nextIcon
        }, null)]
      })])]
    })), {
      selected: o.selected,
      scrollTo: j,
      scrollOffset: s,
      focus: q,
      hasPrev: Z,
      hasNext: F
    };
  }
}), GE = Symbol.for("vuetify:v-chip-group"), pz = De({
  baseColor: String,
  column: Boolean,
  filter: Boolean,
  valueComparator: {
    type: Function,
    default: fr
  },
  ...x0(),
  ...vt(),
  ..._c({
    selectedClass: "v-chip--selected"
  }),
  ...qt(),
  ...an(),
  ...Pi({
    variant: "tonal"
  })
}, "VChipGroup"), vz = We()({
  name: "VChipGroup",
  props: pz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      isSelected: r,
      select: i,
      next: o,
      prev: l,
      selected: s
    } = ol(e, GE);
    return ca({
      VChip: {
        baseColor: be(() => e.baseColor),
        color: be(() => e.color),
        disabled: be(() => e.disabled),
        filter: be(() => e.filter),
        variant: be(() => e.variant)
      }
    }), Ge(() => {
      const d = Pf.filterProps(e);
      return h(Pf, He(d, {
        class: ["v-chip-group", {
          "v-chip-group--column": e.column
        }, a.value, e.class],
        style: e.style
      }), {
        default: () => [n.default?.({
          isSelected: r,
          select: i,
          next: o,
          prev: l,
          selected: s.value
        })]
      });
    }), {};
  }
}), gz = De({
  activeClass: String,
  appendAvatar: String,
  appendIcon: At,
  baseColor: String,
  closable: Boolean,
  closeIcon: {
    type: At,
    default: "$delete"
  },
  closeLabel: {
    type: String,
    default: "$vuetify.close"
  },
  draggable: Boolean,
  filter: Boolean,
  filterIcon: {
    type: At,
    default: "$complete"
  },
  label: Boolean,
  link: {
    type: Boolean,
    default: void 0
  },
  pill: Boolean,
  prependAvatar: String,
  prependIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  modelValue: {
    type: Boolean,
    default: !0
  },
  onClick: nr(),
  onClickOnce: nr(),
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...pc(),
  ...Hn(),
  ...Zf(),
  ...To(),
  ...qt({
    tag: "span"
  }),
  ...an(),
  ...Pi({
    variant: "tonal"
  })
}, "VChip"), ed = We()({
  name: "VChip",
  directives: {
    vRipple: Cr
  },
  props: gz(),
  emits: {
    "click:close": (e) => !0,
    "update:modelValue": (e) => !0,
    "group:selected": (e) => !0,
    click: (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      t: i
    } = ua(), {
      borderClasses: o
    } = _i(e), {
      densityClasses: l
    } = Ar(e), {
      elevationClasses: s
    } = ir(e), {
      roundedClasses: d
    } = fa(e), {
      sizeClasses: u
    } = Qu(e), {
      themeClasses: f
    } = yn(e), _ = kt(e, "modelValue"), g = vc(e, GE, !1), v = Xf(e, n), w = be(() => e.link !== !1 && v.isLink.value), b = z(() => !e.disabled && e.link !== !1 && (!!g || e.link || v.isClickable.value)), p = be(() => ({
      "aria-label": i(e.closeLabel),
      disabled: e.disabled,
      onClick(O) {
        O.preventDefault(), O.stopPropagation(), _.value = !1, a("click:close", O);
      }
    })), {
      colorClasses: y,
      colorStyles: S,
      variantClasses: E
    } = hc(() => ({
      color: !g || g.isSelected.value ? e.color ?? e.baseColor : e.baseColor,
      variant: e.variant
    }));
    function C(O) {
      a("click", O), b.value && (v.navigate?.(O), g?.toggle());
    }
    function B(O) {
      (O.key === "Enter" || O.key === " ") && (O.preventDefault(), C(O));
    }
    return () => {
      const O = v.isLink.value ? "a" : e.tag, D = !!(e.appendIcon || e.appendAvatar), T = !!(D || r.append), P = !!(r.close || e.closable), I = !!(r.filter || e.filter) && g, M = !!(e.prependIcon || e.prependAvatar), V = !!(M || r.prepend);
      return _.value && ln(h(O, He({
        class: ["v-chip", {
          "v-chip--disabled": e.disabled,
          "v-chip--label": e.label,
          "v-chip--link": b.value,
          "v-chip--filter": I,
          "v-chip--pill": e.pill,
          [`${e.activeClass}`]: e.activeClass && v.isActive?.value
        }, f.value, o.value, y.value, l.value, s.value, d.value, u.value, E.value, g?.selectedClass.value, e.class],
        style: [S.value, e.style],
        disabled: e.disabled || void 0,
        draggable: e.draggable,
        tabindex: b.value ? 0 : void 0,
        onClick: C,
        onKeydown: b.value && !w.value && B
      }, v.linkProps), {
        default: () => [il(b.value, "v-chip"), I && h(k0, {
          key: "filter"
        }, {
          default: () => [ln(A("div", {
            class: "v-chip__filter"
          }, [r.filter ? h(Wt, {
            key: "filter-defaults",
            disabled: !e.filterIcon,
            defaults: {
              VIcon: {
                icon: e.filterIcon
              }
            }
          }, r.filter) : h(pn, {
            key: "filter-icon",
            icon: e.filterIcon
          }, null)]), [[Sa, g.isSelected.value]])]
        }), V && A("div", {
          key: "prepend",
          class: "v-chip__prepend"
        }, [r.prepend ? h(Wt, {
          key: "prepend-defaults",
          disabled: !M,
          defaults: {
            VAvatar: {
              image: e.prependAvatar,
              start: !0
            },
            VIcon: {
              icon: e.prependIcon,
              start: !0
            }
          }
        }, r.prepend) : A(Qe, null, [e.prependIcon && h(pn, {
          key: "prepend-icon",
          icon: e.prependIcon,
          start: !0
        }, null), e.prependAvatar && h(Ei, {
          key: "prepend-avatar",
          image: e.prependAvatar,
          start: !0
        }, null)])]), A("div", {
          class: "v-chip__content",
          "data-no-activator": ""
        }, [r.default?.({
          isSelected: g?.isSelected.value,
          selectedClass: g?.selectedClass.value,
          select: g?.select,
          toggle: g?.toggle,
          value: g?.value.value,
          disabled: e.disabled
        }) ?? W(e.text)]), T && A("div", {
          key: "append",
          class: "v-chip__append"
        }, [r.append ? h(Wt, {
          key: "append-defaults",
          disabled: !D,
          defaults: {
            VAvatar: {
              end: !0,
              image: e.appendAvatar
            },
            VIcon: {
              end: !0,
              icon: e.appendIcon
            }
          }
        }, r.append) : A(Qe, null, [e.appendIcon && h(pn, {
          key: "append-icon",
          end: !0,
          icon: e.appendIcon
        }, null), e.appendAvatar && h(Ei, {
          key: "append-avatar",
          end: !0,
          image: e.appendAvatar
        }, null)])]), P && A("button", He({
          key: "close",
          class: "v-chip__close",
          type: "button",
          "data-testid": "close-chip"
        }, p.value), [r.close ? h(Wt, {
          key: "close-defaults",
          defaults: {
            VIcon: {
              icon: e.closeIcon,
              size: "x-small"
            }
          }
        }, r.close) : h(pn, {
          key: "close-icon",
          icon: e.closeIcon,
          size: "x-small"
        }, null)])]
      }), [[Cr, b.value && e.ripple, null]]);
    };
  }
}), Ab = Symbol.for("vuetify:list");
function QE() {
  const e = Gt(Ab, {
    hasPrepend: ot(!1),
    updateHasPrepend: () => null
  }), t = {
    hasPrepend: ot(!1),
    updateHasPrepend: (n) => {
      n && (t.hasPrepend.value = n);
    }
  };
  return Nn(Ab, t), e;
}
function JE() {
  return Gt(Ab, null);
}
const T0 = (e) => {
  const t = {
    activate: (n) => {
      let {
        id: a,
        value: r,
        activated: i
      } = n;
      return a = Ot(a), e && !r && i.size === 1 && i.has(a) || (r ? i.add(a) : i.delete(a)), i;
    },
    in: (n, a, r) => {
      let i = /* @__PURE__ */ new Set();
      if (n != null)
        for (const o of Zn(n))
          i = t.activate({
            id: o,
            value: !0,
            activated: new Set(i),
            children: a,
            parents: r
          });
      return i;
    },
    out: (n) => Array.from(n)
  };
  return t;
}, XE = (e) => {
  const t = T0(e);
  return {
    activate: (a) => {
      let {
        activated: r,
        id: i,
        ...o
      } = a;
      i = Ot(i);
      const l = r.has(i) ? /* @__PURE__ */ new Set([i]) : /* @__PURE__ */ new Set();
      return t.activate({
        ...o,
        id: i,
        activated: l
      });
    },
    in: (a, r, i) => {
      let o = /* @__PURE__ */ new Set();
      if (a != null) {
        const l = Zn(a);
        l.length && (o = t.in(l.slice(0, 1), r, i));
      }
      return o;
    },
    out: (a, r, i) => t.out(a, r, i)
  };
}, yz = (e) => {
  const t = T0(e);
  return {
    activate: (a) => {
      let {
        id: r,
        activated: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.activate({
        id: r,
        activated: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, bz = (e) => {
  const t = XE(e);
  return {
    activate: (a) => {
      let {
        id: r,
        activated: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.activate({
        id: r,
        activated: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, wz = {
  open: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (n) {
      const i = /* @__PURE__ */ new Set();
      i.add(t);
      let o = r.get(t);
      for (; o != null; )
        i.add(o), o = r.get(o);
      return i;
    } else
      return a.delete(t), a;
  },
  select: () => null
}, ZE = {
  open: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (n) {
      let i = r.get(t);
      for (a.add(t); i != null && i !== t; )
        a.add(i), i = r.get(i);
      return a;
    } else
      a.delete(t);
    return a;
  },
  select: () => null
}, kz = {
  open: ZE.open,
  select: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (!n) return a;
    const i = [];
    let o = r.get(t);
    for (; o != null; )
      i.push(o), o = r.get(o);
    return new Set(i);
  }
}, I0 = (e) => {
  const t = {
    select: (n) => {
      let {
        id: a,
        value: r,
        selected: i
      } = n;
      if (a = Ot(a), e && !r) {
        const o = Array.from(i.entries()).reduce((l, s) => {
          let [d, u] = s;
          return u === "on" && l.push(d), l;
        }, []);
        if (o.length === 1 && o[0] === a) return i;
      }
      return i.set(a, r ? "on" : "off"), i;
    },
    in: (n, a, r) => {
      const i = /* @__PURE__ */ new Map();
      for (const o of n || [])
        t.select({
          id: o,
          value: !0,
          selected: i,
          children: a,
          parents: r
        });
      return i;
    },
    out: (n) => {
      const a = [];
      for (const [r, i] of n.entries())
        i === "on" && a.push(r);
      return a;
    }
  };
  return t;
}, eP = (e) => {
  const t = I0(e);
  return {
    select: (a) => {
      let {
        selected: r,
        id: i,
        ...o
      } = a;
      i = Ot(i);
      const l = r.has(i) ? /* @__PURE__ */ new Map([[i, r.get(i)]]) : /* @__PURE__ */ new Map();
      return t.select({
        ...o,
        id: i,
        selected: l
      });
    },
    in: (a, r, i) => a?.length ? t.in(a.slice(0, 1), r, i) : /* @__PURE__ */ new Map(),
    out: (a, r, i) => t.out(a, r, i)
  };
}, Sz = (e) => {
  const t = I0(e);
  return {
    select: (a) => {
      let {
        id: r,
        selected: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.select({
        id: r,
        selected: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, Cz = (e) => {
  const t = eP(e);
  return {
    select: (a) => {
      let {
        id: r,
        selected: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.select({
        id: r,
        selected: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, tP = (e) => {
  const t = {
    select: (n) => {
      let {
        id: a,
        value: r,
        selected: i,
        children: o,
        parents: l
      } = n;
      a = Ot(a);
      const s = new Map(i), d = [a];
      for (; d.length; ) {
        const f = d.shift();
        i.set(Ot(f), r ? "on" : "off"), o.has(f) && d.push(...o.get(f));
      }
      let u = Ot(l.get(a));
      for (; u; ) {
        const f = o.get(u), _ = f.every((v) => i.get(Ot(v)) === "on"), g = f.every((v) => !i.has(Ot(v)) || i.get(Ot(v)) === "off");
        i.set(u, _ ? "on" : g ? "off" : "indeterminate"), u = Ot(l.get(u));
      }
      return e && !r && Array.from(i.entries()).reduce((_, g) => {
        let [v, w] = g;
        return w === "on" && _.push(v), _;
      }, []).length === 0 ? s : i;
    },
    in: (n, a, r) => {
      let i = /* @__PURE__ */ new Map();
      for (const o of n || [])
        i = t.select({
          id: o,
          value: !0,
          selected: i,
          children: a,
          parents: r
        });
      return i;
    },
    out: (n, a) => {
      const r = [];
      for (const [i, o] of n.entries())
        o === "on" && !a.has(i) && r.push(i);
      return r;
    }
  };
  return t;
}, Az = (e) => {
  const t = tP(e);
  return {
    select: t.select,
    in: t.in,
    out: (a, r, i) => {
      const o = [];
      for (const [l, s] of a.entries())
        if (s === "on") {
          if (i.has(l)) {
            const d = i.get(l);
            if (a.get(d) === "on") continue;
          }
          o.push(l);
        }
      return o;
    }
  };
}, Of = Symbol.for("vuetify:nested"), nP = {
  id: ot(),
  root: {
    register: () => null,
    unregister: () => null,
    parents: Se(/* @__PURE__ */ new Map()),
    children: Se(/* @__PURE__ */ new Map()),
    open: () => null,
    openOnSelect: () => null,
    activate: () => null,
    select: () => null,
    activatable: Se(!1),
    selectable: Se(!1),
    opened: Se(/* @__PURE__ */ new Set()),
    activated: Se(/* @__PURE__ */ new Set()),
    selected: Se(/* @__PURE__ */ new Map()),
    selectedValues: Se([]),
    getPath: () => []
  }
}, xz = De({
  activatable: Boolean,
  selectable: Boolean,
  activeStrategy: [String, Function, Object],
  selectStrategy: [String, Function, Object],
  openStrategy: [String, Object],
  opened: null,
  activated: null,
  selected: null,
  mandatory: Boolean
}, "nested"), Tz = (e) => {
  let t = !1;
  const n = Se(/* @__PURE__ */ new Map()), a = Se(/* @__PURE__ */ new Map()), r = kt(e, "opened", e.opened, (v) => new Set(v), (v) => [...v.values()]), i = z(() => {
    if (typeof e.activeStrategy == "object") return e.activeStrategy;
    if (typeof e.activeStrategy == "function") return e.activeStrategy(e.mandatory);
    switch (e.activeStrategy) {
      case "leaf":
        return yz(e.mandatory);
      case "single-leaf":
        return bz(e.mandatory);
      case "independent":
        return T0(e.mandatory);
      case "single-independent":
      default:
        return XE(e.mandatory);
    }
  }), o = z(() => {
    if (typeof e.selectStrategy == "object") return e.selectStrategy;
    if (typeof e.selectStrategy == "function") return e.selectStrategy(e.mandatory);
    switch (e.selectStrategy) {
      case "single-leaf":
        return Cz(e.mandatory);
      case "leaf":
        return Sz(e.mandatory);
      case "independent":
        return I0(e.mandatory);
      case "single-independent":
        return eP(e.mandatory);
      case "trunk":
        return Az(e.mandatory);
      case "classic":
      default:
        return tP(e.mandatory);
    }
  }), l = z(() => {
    if (typeof e.openStrategy == "object") return e.openStrategy;
    switch (e.openStrategy) {
      case "list":
        return kz;
      case "single":
        return wz;
      case "multiple":
      default:
        return ZE;
    }
  }), s = kt(e, "activated", e.activated, (v) => i.value.in(v, n.value, a.value), (v) => i.value.out(v, n.value, a.value)), d = kt(e, "selected", e.selected, (v) => o.value.in(v, n.value, a.value), (v) => o.value.out(v, n.value, a.value));
  Ga(() => {
    t = !0;
  });
  function u(v) {
    const w = [];
    let b = v;
    for (; b != null; )
      w.unshift(b), b = a.value.get(b);
    return w;
  }
  const f = ga("nested"), _ = /* @__PURE__ */ new Set(), g = {
    id: ot(),
    root: {
      opened: r,
      activatable: be(() => e.activatable),
      selectable: be(() => e.selectable),
      activated: s,
      selected: d,
      selectedValues: z(() => {
        const v = [];
        for (const [w, b] of d.value.entries())
          b === "on" && v.push(w);
        return v;
      }),
      register: (v, w, b) => {
        if (_.has(v)) {
          u(v).map(String).join(" -> "), u(w).concat(v).map(String).join(" -> ");
          return;
        } else
          _.add(v);
        w && v !== w && a.value.set(v, w), b && n.value.set(v, []), w != null && n.value.set(w, [...n.value.get(w) || [], v]);
      },
      unregister: (v) => {
        if (t) return;
        _.delete(v), n.value.delete(v);
        const w = a.value.get(v);
        if (w) {
          const b = n.value.get(w) ?? [];
          n.value.set(w, b.filter((p) => p !== v));
        }
        a.value.delete(v);
      },
      open: (v, w, b) => {
        f.emit("click:open", {
          id: v,
          value: w,
          path: u(v),
          event: b
        });
        const p = l.value.open({
          id: v,
          value: w,
          opened: new Set(r.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        p && (r.value = p);
      },
      openOnSelect: (v, w, b) => {
        const p = l.value.select({
          id: v,
          value: w,
          selected: new Map(d.value),
          opened: new Set(r.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        p && (r.value = p);
      },
      select: (v, w, b) => {
        f.emit("click:select", {
          id: v,
          value: w,
          path: u(v),
          event: b
        });
        const p = o.value.select({
          id: v,
          value: w,
          selected: new Map(d.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        p && (d.value = p), g.root.openOnSelect(v, w, b);
      },
      activate: (v, w, b) => {
        if (!e.activatable)
          return g.root.select(v, !0, b);
        f.emit("click:activate", {
          id: v,
          value: w,
          path: u(v),
          event: b
        });
        const p = i.value.activate({
          id: v,
          value: w,
          activated: new Set(s.value),
          children: n.value,
          parents: a.value,
          event: b
        });
        if (p.size !== s.value.size)
          s.value = p;
        else {
          for (const y of p)
            if (!s.value.has(y)) {
              s.value = p;
              return;
            }
          for (const y of s.value)
            if (!p.has(y)) {
              s.value = p;
              return;
            }
        }
      },
      children: n,
      parents: a,
      getPath: u
    }
  };
  return Nn(Of, g), g.root;
}, aP = (e, t) => {
  const n = Gt(Of, nP), a = Symbol("nested item"), r = z(() => yo(e) ?? a), i = {
    ...n,
    id: r,
    open: (o, l) => n.root.open(r.value, o, l),
    openOnSelect: (o, l) => n.root.openOnSelect(r.value, o, l),
    isOpen: z(() => n.root.opened.value.has(r.value)),
    parent: z(() => n.root.parents.value.get(r.value)),
    activate: (o, l) => n.root.activate(r.value, o, l),
    isActivated: z(() => n.root.activated.value.has(Ot(r.value))),
    select: (o, l) => n.root.select(r.value, o, l),
    isSelected: z(() => n.root.selected.value.get(Ot(r.value)) === "on"),
    isIndeterminate: z(() => n.root.selected.value.get(Ot(r.value)) === "indeterminate"),
    isLeaf: z(() => !n.root.children.value.get(r.value)),
    isGroupActivator: n.isGroupActivator
  };
  return qu(() => {
    !n.isGroupActivator && n.root.register(r.value, n.id.value, t);
  }), Ga(() => {
    !n.isGroupActivator && n.root.unregister(r.value);
  }), t && Nn(Of, i), i;
}, Iz = () => {
  const e = Gt(Of, nP);
  Nn(Of, {
    ...e,
    isGroupActivator: !0
  });
}, Ez = fi({
  name: "VListGroupActivator",
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Iz(), () => n.default?.();
  }
}), Pz = De({
  /* @deprecated */
  activeColor: String,
  baseColor: String,
  color: String,
  collapseIcon: {
    type: At,
    default: "$collapse"
  },
  expandIcon: {
    type: At,
    default: "$expand"
  },
  rawId: [String, Number],
  prependIcon: At,
  appendIcon: At,
  fluid: Boolean,
  subgroup: Boolean,
  title: String,
  value: null,
  ...vt(),
  ...qt()
}, "VListGroup"), xb = We()({
  name: "VListGroup",
  props: Pz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isOpen: a,
      open: r,
      id: i
    } = aP(() => e.value, !0), o = z(() => `v-list-group--id-${String(e.rawId ?? i.value)}`), l = JE(), {
      isBooted: s
    } = mc();
    function d(g) {
      ["INPUT", "TEXTAREA"].includes(g.target?.tagName) || r(!a.value, g);
    }
    const u = z(() => ({
      onClick: d,
      class: "v-list-group__header",
      id: o.value
    })), f = z(() => a.value ? e.collapseIcon : e.expandIcon), _ = z(() => ({
      VListItem: {
        active: a.value,
        activeColor: e.activeColor,
        baseColor: e.baseColor,
        color: e.color,
        prependIcon: e.prependIcon || e.subgroup && f.value,
        appendIcon: e.appendIcon || !e.subgroup && f.value,
        title: e.title,
        value: e.value
      }
    }));
    return Ge(() => h(e.tag, {
      class: Ee(["v-list-group", {
        "v-list-group--prepend": l?.hasPrepend.value,
        "v-list-group--fluid": e.fluid,
        "v-list-group--subgroup": e.subgroup,
        "v-list-group--open": a.value
      }, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.activator && h(Wt, {
        defaults: _.value
      }, {
        default: () => [h(Ez, null, {
          default: () => [n.activator({
            props: u.value,
            isOpen: a.value
          })]
        })]
      }), h(Sr, {
        transition: {
          component: gp
        },
        disabled: !s.value
      }, {
        default: () => [ln(A("div", {
          class: "v-list-group__items",
          role: "group",
          "aria-labelledby": o.value
        }, [n.default?.()]), [[Sa, a.value]])]
      })]
    })), {
      isOpen: a
    };
  }
}), Oz = De({
  opacity: [Number, String],
  ...vt(),
  ...qt()
}, "VListItemSubtitle"), rP = We()({
  name: "VListItemSubtitle",
  props: Oz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(e.tag, {
      class: Ee(["v-list-item-subtitle", e.class]),
      style: Xe([{
        "--v-list-item-subtitle-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), iP = xo("v-list-item-title"), Dz = De({
  active: {
    type: Boolean,
    default: void 0
  },
  activeClass: String,
  /* @deprecated */
  activeColor: String,
  appendAvatar: String,
  appendIcon: At,
  baseColor: String,
  disabled: Boolean,
  lines: [Boolean, String],
  link: {
    type: Boolean,
    default: void 0
  },
  nav: Boolean,
  prependAvatar: String,
  prependIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  slim: Boolean,
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  value: null,
  onClick: nr(),
  onClickOnce: nr(),
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...Hn(),
  ...Zf(),
  ...qt(),
  ...an(),
  ...Pi({
    variant: "text"
  })
}, "VListItem"), is = We()({
  name: "VListItem",
  directives: {
    vRipple: Cr
  },
  props: Dz(),
  emits: {
    click: (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a,
      emit: r
    } = t;
    const i = Xf(e, n), o = z(() => e.value === void 0 ? i.href.value : e.value), {
      activate: l,
      isActivated: s,
      select: d,
      isOpen: u,
      isSelected: f,
      isIndeterminate: _,
      isGroupActivator: g,
      root: v,
      parent: w,
      openOnSelect: b,
      id: p
    } = aP(o, !1), y = JE(), S = z(() => e.active !== !1 && (e.active || i.isActive?.value || (v.activatable.value ? s.value : f.value))), E = be(() => e.link !== !1 && i.isLink.value), C = z(() => !!y && (v.selectable.value || v.activatable.value || e.value != null)), B = z(() => !e.disabled && e.link !== !1 && (e.link || i.isClickable.value || C.value)), O = be(() => e.rounded || e.nav), D = be(() => e.color ?? e.activeColor), T = be(() => ({
      color: S.value ? D.value ?? e.baseColor : e.baseColor,
      variant: e.variant
    }));
    nt(() => i.isActive?.value, (he) => {
      he && P();
    }), qu(() => {
      i.isActive?.value && P();
    });
    function P() {
      w.value != null && v.open(w.value, !0), b(!0);
    }
    const {
      themeClasses: I
    } = yn(e), {
      borderClasses: M
    } = _i(e), {
      colorClasses: V,
      colorStyles: N,
      variantClasses: q
    } = hc(T), {
      densityClasses: j
    } = Ar(e), {
      dimensionStyles: ee
    } = Fa(e), {
      elevationClasses: de
    } = ir(e), {
      roundedClasses: Z
    } = fa(O), F = be(() => e.lines ? `v-list-item--${e.lines}-line` : void 0), Y = z(() => ({
      isActive: S.value,
      select: d,
      isOpen: u.value,
      isSelected: f.value,
      isIndeterminate: _.value
    }));
    function se(he) {
      r("click", he), !["INPUT", "TEXTAREA"].includes(he.target?.tagName) && B.value && (i.navigate?.(he), !g && (v.activatable.value ? l(!s.value, he) : (v.selectable.value || e.value != null) && d(!f.value, he)));
    }
    function X(he) {
      const ve = he.target;
      ["INPUT", "TEXTAREA"].includes(ve.tagName) || (he.key === "Enter" || he.key === " ") && (he.preventDefault(), he.target.dispatchEvent(new MouseEvent("click", he)));
    }
    return Ge(() => {
      const he = E.value ? "a" : e.tag, ve = a.title || e.title != null, pe = a.subtitle || e.subtitle != null, H = !!(e.appendAvatar || e.appendIcon), we = !!(H || a.append), Me = !!(e.prependAvatar || e.prependIcon), Re = !!(Me || a.prepend);
      return y?.updateHasPrepend(Re), e.activeColor && D3("active-color", ["color", "base-color"]), ln(h(he, He({
        class: ["v-list-item", {
          "v-list-item--active": S.value,
          "v-list-item--disabled": e.disabled,
          "v-list-item--link": B.value,
          "v-list-item--nav": e.nav,
          "v-list-item--prepend": !Re && y?.hasPrepend.value,
          "v-list-item--slim": e.slim,
          [`${e.activeClass}`]: e.activeClass && S.value
        }, I.value, M.value, V.value, j.value, de.value, F.value, Z.value, q.value, e.class],
        style: [N.value, ee.value, e.style],
        tabindex: B.value ? y ? -2 : 0 : void 0,
        "aria-selected": C.value ? v.activatable.value ? s.value : v.selectable.value ? f.value : S.value : void 0,
        onClick: se,
        onKeydown: B.value && !E.value && X
      }, i.linkProps), {
        default: () => [il(B.value || S.value, "v-list-item"), Re && A("div", {
          key: "prepend",
          class: "v-list-item__prepend"
        }, [a.prepend ? h(Wt, {
          key: "prepend-defaults",
          disabled: !Me,
          defaults: {
            VAvatar: {
              density: e.density,
              image: e.prependAvatar
            },
            VIcon: {
              density: e.density,
              icon: e.prependIcon
            },
            VListItemAction: {
              start: !0
            }
          }
        }, {
          default: () => [a.prepend?.(Y.value)]
        }) : A(Qe, null, [e.prependAvatar && h(Ei, {
          key: "prepend-avatar",
          density: e.density,
          image: e.prependAvatar
        }, null), e.prependIcon && h(pn, {
          key: "prepend-icon",
          density: e.density,
          icon: e.prependIcon
        }, null)]), A("div", {
          class: "v-list-item__spacer"
        }, null)]), A("div", {
          class: "v-list-item__content",
          "data-no-activator": ""
        }, [ve && h(iP, {
          key: "title"
        }, {
          default: () => [a.title?.({
            title: e.title
          }) ?? W(e.title)]
        }), pe && h(rP, {
          key: "subtitle"
        }, {
          default: () => [a.subtitle?.({
            subtitle: e.subtitle
          }) ?? W(e.subtitle)]
        }), a.default?.(Y.value)]), we && A("div", {
          key: "append",
          class: "v-list-item__append"
        }, [a.append ? h(Wt, {
          key: "append-defaults",
          disabled: !H,
          defaults: {
            VAvatar: {
              density: e.density,
              image: e.appendAvatar
            },
            VIcon: {
              density: e.density,
              icon: e.appendIcon
            },
            VListItemAction: {
              end: !0
            }
          }
        }, {
          default: () => [a.append?.(Y.value)]
        }) : A(Qe, null, [e.appendIcon && h(pn, {
          key: "append-icon",
          density: e.density,
          icon: e.appendIcon
        }, null), e.appendAvatar && h(Ei, {
          key: "append-avatar",
          density: e.density,
          image: e.appendAvatar
        }, null)]), A("div", {
          class: "v-list-item__spacer"
        }, null)])]
      }), [[Cr, B.value && e.ripple]]);
    }), {
      activate: l,
      isActivated: s,
      isGroupActivator: g,
      isSelected: f,
      list: y,
      select: d,
      root: v,
      id: p,
      link: i
    };
  }
}), Bz = De({
  color: String,
  inset: Boolean,
  sticky: Boolean,
  title: String,
  ...vt(),
  ...qt()
}, "VListSubheader"), oP = We()({
  name: "VListSubheader",
  props: Bz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      textColorClasses: a,
      textColorStyles: r
    } = mr(() => e.color);
    return Ge(() => {
      const i = !!(n.default || e.title);
      return h(e.tag, {
        class: Ee(["v-list-subheader", {
          "v-list-subheader--inset": e.inset,
          "v-list-subheader--sticky": e.sticky
        }, a.value, e.class]),
        style: Xe([{
          textColorStyles: r
        }, e.style])
      }, {
        default: () => [i && A("div", {
          class: "v-list-subheader__text"
        }, [n.default?.() ?? e.title])]
      });
    }), {};
  }
}), Vz = De({
  color: String,
  inset: Boolean,
  length: [Number, String],
  opacity: [Number, String],
  thickness: [Number, String],
  vertical: Boolean,
  ...vt(),
  ...an()
}, "VDivider"), Go = We()({
  name: "VDivider",
  props: Vz(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      textColorClasses: i,
      textColorStyles: o
    } = mr(() => e.color), l = z(() => {
      const s = {};
      return e.length && (s[e.vertical ? "height" : "width"] = ht(e.length)), e.thickness && (s[e.vertical ? "borderRightWidth" : "borderTopWidth"] = ht(e.thickness)), s;
    });
    return Ge(() => {
      const s = A("hr", {
        class: Ee([{
          "v-divider": !0,
          "v-divider--inset": e.inset,
          "v-divider--vertical": e.vertical
        }, r.value, i.value, e.class]),
        style: Xe([l.value, o.value, {
          "--v-border-opacity": e.opacity
        }, e.style]),
        "aria-orientation": !n.role || n.role === "separator" ? e.vertical ? "vertical" : "horizontal" : void 0,
        role: `${n.role || "separator"}`
      }, null);
      return a.default ? A("div", {
        class: Ee(["v-divider__wrapper", {
          "v-divider__wrapper--vertical": e.vertical,
          "v-divider__wrapper--inset": e.inset
        }])
      }, [s, A("div", {
        class: "v-divider__content"
      }, [a.default()]), s]) : s;
    }), {};
  }
}), Mz = De({
  items: Array,
  returnObject: Boolean
}, "VListChildren"), sP = We()({
  name: "VListChildren",
  props: Mz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return QE(), () => n.default?.() ?? e.items?.map((a) => {
      let {
        children: r,
        props: i,
        type: o,
        raw: l
      } = a;
      if (o === "divider")
        return n.divider?.({
          props: i
        }) ?? h(Go, i, null);
      if (o === "subheader")
        return n.subheader?.({
          props: i
        }) ?? h(oP, i, null);
      const s = {
        subtitle: n.subtitle ? (u) => n.subtitle?.({
          ...u,
          item: l
        }) : void 0,
        prepend: n.prepend ? (u) => n.prepend?.({
          ...u,
          item: l
        }) : void 0,
        append: n.append ? (u) => n.append?.({
          ...u,
          item: l
        }) : void 0,
        title: n.title ? (u) => n.title?.({
          ...u,
          item: l
        }) : void 0
      }, d = xb.filterProps(i);
      return r ? h(xb, He(d, {
        value: e.returnObject ? l : i?.value,
        rawId: i?.value
      }), {
        activator: (u) => {
          let {
            props: f
          } = u;
          const _ = {
            ...i,
            ...f,
            value: e.returnObject ? l : i.value
          };
          return n.header ? n.header({
            props: _
          }) : h(is, _, s);
        },
        default: () => h(sP, {
          items: r,
          returnObject: e.returnObject
        }, n)
      }) : n.item ? n.item({
        props: i
      }) : h(is, He(i, {
        value: e.returnObject ? l : i.value
      }), s);
    });
  }
}), lP = De({
  items: {
    type: Array,
    default: () => []
  },
  itemTitle: {
    type: [String, Array, Function],
    default: "title"
  },
  itemValue: {
    type: [String, Array, Function],
    default: "value"
  },
  itemChildren: {
    type: [Boolean, String, Array, Function],
    default: "children"
  },
  itemProps: {
    type: [Boolean, String, Array, Function],
    default: "props"
  },
  returnObject: Boolean,
  valueComparator: Function
}, "list-items");
function Bs(e, t) {
  const n = Da(t, e.itemTitle, t), a = Da(t, e.itemValue, n), r = Da(t, e.itemChildren), i = e.itemProps === !0 ? typeof t == "object" && t != null && !Array.isArray(t) ? "children" in t ? la(t, ["children"]) : t : void 0 : Da(t, e.itemProps), o = {
    title: n,
    value: a,
    ...i
  };
  return {
    title: String(o.title ?? ""),
    value: o.value,
    props: o,
    children: Array.isArray(r) ? cP(e, r) : void 0,
    raw: t
  };
}
function cP(e, t) {
  const n = tl(e, ["itemTitle", "itemValue", "itemChildren", "itemProps", "returnObject", "valueComparator"]), a = [];
  for (const r of t)
    a.push(Bs(n, r));
  return a;
}
function E0(e) {
  const t = z(() => cP(e, e.items)), n = z(() => t.value.some((l) => l.value === null)), a = ot(/* @__PURE__ */ new Map()), r = ot([]);
  ea(() => {
    const l = t.value, s = /* @__PURE__ */ new Map(), d = [];
    for (let u = 0; u < l.length; u++) {
      const f = l[u];
      if (AT(f.value) || f.value === null) {
        let _ = s.get(f.value);
        _ || (_ = [], s.set(f.value, _)), _.push(f);
      } else
        d.push(f);
    }
    a.value = s, r.value = d;
  });
  function i(l) {
    const s = a.value, d = t.value, u = r.value, f = n.value, _ = e.returnObject, g = !!e.valueComparator, v = e.valueComparator || fr, w = tl(e, ["itemTitle", "itemValue", "itemChildren", "itemProps", "returnObject", "valueComparator"]), b = [];
    e: for (const p of l) {
      if (!f && p === null) continue;
      if (_ && typeof p == "string") {
        b.push(Bs(w, p));
        continue;
      }
      const y = s.get(p);
      if (g || !y) {
        for (const S of g ? d : u)
          if (v(p, S.value)) {
            b.push(S);
            continue e;
          }
        b.push(Bs(w, p));
        continue;
      }
      b.push(...y);
    }
    return b;
  }
  function o(l) {
    return e.returnObject ? l.map((s) => {
      let {
        raw: d
      } = s;
      return d;
    }) : l.map((s) => {
      let {
        value: d
      } = s;
      return d;
    });
  }
  return {
    items: t,
    transformIn: i,
    transformOut: o
  };
}
function Rz(e, t) {
  const n = Da(t, e.itemType, "item"), a = AT(t) ? t : Da(t, e.itemTitle), r = Da(t, e.itemValue, void 0), i = Da(t, e.itemChildren), o = e.itemProps === !0 ? la(t, ["children"]) : Da(t, e.itemProps), l = {
    title: a,
    value: r,
    ...o
  };
  return {
    type: n,
    title: l.title,
    value: l.value,
    props: l,
    children: n === "item" && i ? uP(e, i) : void 0,
    raw: t
  };
}
function uP(e, t) {
  const n = [];
  for (const a of t)
    n.push(Rz(e, a));
  return n;
}
function Lz(e) {
  return {
    items: z(() => uP(e, e.items))
  };
}
const Fz = De({
  baseColor: String,
  /* @deprecated */
  activeColor: String,
  activeClass: String,
  bgColor: String,
  disabled: Boolean,
  expandIcon: At,
  collapseIcon: At,
  lines: {
    type: [Boolean, String],
    default: "one"
  },
  slim: Boolean,
  nav: Boolean,
  "onClick:open": nr(),
  "onClick:select": nr(),
  "onUpdate:opened": nr(),
  ...xz({
    selectStrategy: "single-leaf",
    openStrategy: "list"
  }),
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  itemType: {
    type: String,
    default: "type"
  },
  ...lP(),
  ...Hn(),
  ...qt(),
  ...an(),
  ...Pi({
    variant: "text"
  })
}, "VList"), Sp = We()({
  name: "VList",
  props: Fz(),
  emits: {
    "update:selected": (e) => !0,
    "update:activated": (e) => !0,
    "update:opened": (e) => !0,
    "click:open": (e) => !0,
    "click:activate": (e) => !0,
    "click:select": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      items: a
    } = Lz(e), {
      themeClasses: r
    } = yn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.bgColor), {
      borderClasses: l
    } = _i(e), {
      densityClasses: s
    } = Ar(e), {
      dimensionStyles: d
    } = Fa(e), {
      elevationClasses: u
    } = ir(e), {
      roundedClasses: f
    } = fa(e), {
      children: _,
      open: g,
      parents: v,
      select: w,
      getPath: b
    } = Tz(e), p = be(() => e.lines ? `v-list--${e.lines}-line` : void 0), y = be(() => e.activeColor), S = be(() => e.baseColor), E = be(() => e.color);
    QE(), ca({
      VListGroup: {
        activeColor: y,
        baseColor: S,
        color: E,
        expandIcon: be(() => e.expandIcon),
        collapseIcon: be(() => e.collapseIcon)
      },
      VListItem: {
        activeClass: be(() => e.activeClass),
        activeColor: y,
        baseColor: S,
        color: E,
        density: be(() => e.density),
        disabled: be(() => e.disabled),
        lines: be(() => e.lines),
        nav: be(() => e.nav),
        slim: be(() => e.slim),
        variant: be(() => e.variant)
      }
    });
    const C = ot(!1), B = Se();
    function O(V) {
      C.value = !0;
    }
    function D(V) {
      C.value = !1;
    }
    function T(V) {
      !C.value && !(V.relatedTarget && B.value?.contains(V.relatedTarget)) && M();
    }
    function P(V) {
      const N = V.target;
      if (!(!B.value || ["INPUT", "TEXTAREA"].includes(N.tagName))) {
        if (V.key === "ArrowDown")
          M("next");
        else if (V.key === "ArrowUp")
          M("prev");
        else if (V.key === "Home")
          M("first");
        else if (V.key === "End")
          M("last");
        else
          return;
        V.preventDefault();
      }
    }
    function I(V) {
      C.value = !0;
    }
    function M(V) {
      if (B.value)
        return Hl(B.value, V);
    }
    return Ge(() => h(e.tag, {
      ref: B,
      class: Ee(["v-list", {
        "v-list--disabled": e.disabled,
        "v-list--nav": e.nav,
        "v-list--slim": e.slim
      }, r.value, i.value, l.value, s.value, u.value, p.value, f.value, e.class]),
      style: Xe([o.value, d.value, e.style]),
      tabindex: e.disabled ? -1 : 0,
      role: "listbox",
      "aria-activedescendant": void 0,
      onFocusin: O,
      onFocusout: D,
      onFocus: T,
      onKeydown: P,
      onMousedown: I
    }, {
      default: () => [h(sP, {
        items: a.value,
        returnObject: e.returnObject
      }, n)]
    })), {
      open: g,
      select: w,
      focus: M,
      children: _,
      parents: v,
      getPath: b
    };
  }
}), Nz = xo("v-list-img"), Uz = De({
  start: Boolean,
  end: Boolean,
  ...vt(),
  ...qt()
}, "VListItemAction"), $z = We()({
  name: "VListItemAction",
  props: Uz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(e.tag, {
      class: Ee(["v-list-item-action", {
        "v-list-item-action--start": e.start,
        "v-list-item-action--end": e.end
      }, e.class]),
      style: Xe(e.style)
    }, n)), {};
  }
}), qz = De({
  start: Boolean,
  end: Boolean,
  ...vt(),
  ...qt()
}, "VListItemMedia"), Hz = We()({
  name: "VListItemMedia",
  props: qz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(e.tag, {
      class: Ee(["v-list-item-media", {
        "v-list-item-media--start": e.start,
        "v-list-item-media--end": e.end
      }, e.class]),
      style: Xe(e.style)
    }, n)), {};
  }
});
function ly(e, t) {
  return {
    x: e.x + t.x,
    y: e.y + t.y
  };
}
function zz(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y
  };
}
function nA(e, t) {
  if (e.side === "top" || e.side === "bottom") {
    const {
      side: n,
      align: a
    } = e, r = a === "left" ? 0 : a === "center" ? t.width / 2 : a === "right" ? t.width : a, i = n === "top" ? 0 : n === "bottom" ? t.height : n;
    return ly({
      x: r,
      y: i
    }, t);
  } else if (e.side === "left" || e.side === "right") {
    const {
      side: n,
      align: a
    } = e, r = n === "left" ? 0 : n === "right" ? t.width : n, i = a === "top" ? 0 : a === "center" ? t.height / 2 : a === "bottom" ? t.height : a;
    return ly({
      x: r,
      y: i
    }, t);
  }
  return ly({
    x: t.width / 2,
    y: t.height / 2
  }, t);
}
const dP = {
  static: Yz,
  // specific viewport position, usually centered
  connected: Gz
  // connected to a certain element
}, Wz = De({
  locationStrategy: {
    type: [String, Function],
    default: "static",
    validator: (e) => typeof e == "function" || e in dP
  },
  location: {
    type: String,
    default: "bottom"
  },
  origin: {
    type: String,
    default: "auto"
  },
  offset: [Number, String, Array]
}, "VOverlay-location-strategies");
function jz(e, t) {
  const n = Se({}), a = Se();
  vn && Fr(() => !!(t.isActive.value && e.locationStrategy), (l) => {
    nt(() => e.locationStrategy, l), qa(() => {
      window.removeEventListener("resize", r), visualViewport?.removeEventListener("resize", i), visualViewport?.removeEventListener("scroll", o), a.value = void 0;
    }), window.addEventListener("resize", r, {
      passive: !0
    }), visualViewport?.addEventListener("resize", i, {
      passive: !0
    }), visualViewport?.addEventListener("scroll", o, {
      passive: !0
    }), typeof e.locationStrategy == "function" ? a.value = e.locationStrategy(t, e, n)?.updateLocation : a.value = dP[e.locationStrategy](t, e, n)?.updateLocation;
  });
  function r(l) {
    a.value?.(l);
  }
  function i(l) {
    a.value?.(l);
  }
  function o(l) {
    a.value?.(l);
  }
  return {
    contentStyles: n,
    updateLocation: a
  };
}
function Yz() {
}
function Kz(e, t) {
  const n = Aw(e);
  return t ? n.x += parseFloat(e.style.right || 0) : n.x -= parseFloat(e.style.left || 0), n.y -= parseFloat(e.style.top || 0), n;
}
function Gz(e, t, n) {
  (Array.isArray(e.target.value) || e4(e.target.value)) && Object.assign(n.value, {
    position: "fixed",
    top: 0,
    [e.isRtl.value ? "right" : "left"]: 0
  });
  const {
    preferredAnchor: r,
    preferredOrigin: i
  } = Cw(() => {
    const p = Ny(t.location, e.isRtl.value), y = t.origin === "overlap" ? p : t.origin === "auto" ? Vg(p) : Ny(t.origin, e.isRtl.value);
    return p.side === y.side && p.align === Mg(y).align ? {
      preferredAnchor: $S(p),
      preferredOrigin: $S(y)
    } : {
      preferredAnchor: p,
      preferredOrigin: y
    };
  }), [o, l, s, d] = ["minWidth", "minHeight", "maxWidth", "maxHeight"].map((p) => z(() => {
    const y = parseFloat(t[p]);
    return isNaN(y) ? 1 / 0 : y;
  })), u = z(() => {
    if (Array.isArray(t.offset))
      return t.offset;
    if (typeof t.offset == "string") {
      const p = t.offset.split(" ").map(parseFloat);
      return p.length < 2 && p.push(0), p;
    }
    return typeof t.offset == "number" ? [t.offset, 0] : [0, 0];
  });
  let f = !1, _ = -1;
  const g = new wT(4), v = new ResizeObserver(() => {
    if (!f) return;
    if (requestAnimationFrame((y) => {
      y !== _ && g.clear(), requestAnimationFrame((S) => {
        _ = S;
      });
    }), g.isFull) {
      const y = g.values();
      if (fr(y.at(-1), y.at(-3)))
        return;
    }
    const p = b();
    p && g.push(p.flipped);
  });
  nt([e.target, e.contentEl], (p, y) => {
    let [S, E] = p, [C, B] = y;
    C && !Array.isArray(C) && v.unobserve(C), S && !Array.isArray(S) && v.observe(S), B && v.unobserve(B), E && v.observe(E);
  }, {
    immediate: !0
  }), qa(() => {
    v.disconnect();
  });
  let w = new vo({
    x: 0,
    y: 0,
    width: 0,
    height: 0
  });
  function b() {
    if (f = !1, requestAnimationFrame(() => f = !0), !e.target.value || !e.contentEl.value) return;
    (Array.isArray(e.target.value) || e.target.value.offsetParent || e.target.value.getClientRects().length) && (w = TT(e.target.value));
    const p = Kz(e.contentEl.value, e.isRtl.value), y = b_(e.contentEl.value), S = 12;
    y.length || (y.push(document.documentElement), e.contentEl.value.style.top && e.contentEl.value.style.left || (p.x -= parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x") || 0), p.y -= parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y") || 0)));
    const E = y.reduce((V, N) => {
      const q = k3(N);
      return V ? new vo({
        x: Math.max(V.left, q.left),
        y: Math.max(V.top, q.top),
        width: Math.min(V.right, q.right) - Math.max(V.left, q.left),
        height: Math.min(V.bottom, q.bottom) - Math.max(V.top, q.top)
      }) : q;
    }, void 0);
    E.x += S, E.y += S, E.width -= S * 2, E.height -= S * 2;
    let C = {
      anchor: r.value,
      origin: i.value
    };
    function B(V) {
      const N = new vo(p), q = nA(V.anchor, w), j = nA(V.origin, N);
      let {
        x: ee,
        y: de
      } = zz(q, j);
      switch (V.anchor.side) {
        case "top":
          de -= u.value[0];
          break;
        case "bottom":
          de += u.value[0];
          break;
        case "left":
          ee -= u.value[0];
          break;
        case "right":
          ee += u.value[0];
          break;
      }
      switch (V.anchor.align) {
        case "top":
          de -= u.value[1];
          break;
        case "bottom":
          de += u.value[1];
          break;
        case "left":
          ee -= u.value[1];
          break;
        case "right":
          ee += u.value[1];
          break;
      }
      return N.x += ee, N.y += de, N.width = Math.min(N.width, s.value), N.height = Math.min(N.height, d.value), {
        overflows: HS(N, E),
        x: ee,
        y: de
      };
    }
    let O = 0, D = 0;
    const T = {
      x: 0,
      y: 0
    }, P = {
      x: !1,
      y: !1
    };
    let I = -1;
    for (; !(I++ > 10); ) {
      const {
        x: V,
        y: N,
        overflows: q
      } = B(C);
      O += V, D += N, p.x += V, p.y += N;
      {
        const j = qS(C.anchor), ee = q.x.before || q.x.after, de = q.y.before || q.y.after;
        let Z = !1;
        if (["x", "y"].forEach((F) => {
          if (F === "x" && ee && !P.x || F === "y" && de && !P.y) {
            const Y = {
              anchor: {
                ...C.anchor
              },
              origin: {
                ...C.origin
              }
            }, se = F === "x" ? j === "y" ? Mg : Vg : j === "y" ? Vg : Mg;
            Y.anchor = se(Y.anchor), Y.origin = se(Y.origin);
            const {
              overflows: X
            } = B(Y);
            (X[F].before <= q[F].before && X[F].after <= q[F].after || X[F].before + X[F].after < (q[F].before + q[F].after) / 2) && (C = Y, Z = P[F] = !0);
          }
        }), Z) continue;
      }
      q.x.before && (O += q.x.before, p.x += q.x.before), q.x.after && (O -= q.x.after, p.x -= q.x.after), q.y.before && (D += q.y.before, p.y += q.y.before), q.y.after && (D -= q.y.after, p.y -= q.y.after);
      {
        const j = HS(p, E);
        T.x = E.width - j.x.before - j.x.after, T.y = E.height - j.y.before - j.y.after, O += j.x.before, p.x += j.x.before, D += j.y.before, p.y += j.y.before;
      }
      break;
    }
    const M = qS(C.anchor);
    return Object.assign(n.value, {
      "--v-overlay-anchor-origin": `${C.anchor.side} ${C.anchor.align}`,
      transformOrigin: `${C.origin.side} ${C.origin.align}`,
      // transform: `translate(${pixelRound(x)}px, ${pixelRound(y)}px)`,
      top: ht(cy(D)),
      left: e.isRtl.value ? void 0 : ht(cy(O)),
      right: e.isRtl.value ? ht(cy(-O)) : void 0,
      minWidth: ht(M === "y" ? Math.min(o.value, w.width) : o.value),
      maxWidth: ht(aA(Pn(T.x, o.value === 1 / 0 ? 0 : o.value, s.value))),
      maxHeight: ht(aA(Pn(T.y, l.value === 1 / 0 ? 0 : l.value, d.value)))
    }), {
      available: T,
      contentBox: p,
      flipped: P
    };
  }
  return nt(() => [r.value, i.value, t.offset, t.minWidth, t.minHeight, t.maxWidth, t.maxHeight], () => b()), Vt(() => {
    const p = b();
    if (!p) return;
    const {
      available: y,
      contentBox: S
    } = p;
    S.height > y.y && requestAnimationFrame(() => {
      b(), requestAnimationFrame(() => {
        b();
      });
    });
  }), {
    updateLocation: b
  };
}
function cy(e) {
  return Math.round(e * devicePixelRatio) / devicePixelRatio;
}
function aA(e) {
  return Math.ceil(e * devicePixelRatio) / devicePixelRatio;
}
let Tb = !0;
const N_ = [];
function Qz(e) {
  !Tb || N_.length ? (N_.push(e), Ib()) : (Tb = !1, e(), Ib());
}
let rA = -1;
function Ib() {
  cancelAnimationFrame(rA), rA = requestAnimationFrame(() => {
    const e = N_.shift();
    e && e(), N_.length ? Ib() : Tb = !0;
  });
}
const fP = {
  none: null,
  close: Zz,
  block: eW,
  reposition: tW
}, Jz = De({
  scrollStrategy: {
    type: [String, Function],
    default: "block",
    validator: (e) => typeof e == "function" || e in fP
  }
}, "VOverlay-scroll-strategies");
function Xz(e, t) {
  if (!vn) return;
  let n;
  ea(async () => {
    n?.stop(), t.isActive.value && e.scrollStrategy && (n = bu(), await new Promise((a) => setTimeout(a)), n.active && n.run(() => {
      typeof e.scrollStrategy == "function" ? e.scrollStrategy(t, e, n) : fP[e.scrollStrategy]?.(t, e, n);
    }));
  }), qa(() => {
    n?.stop();
  });
}
function Zz(e) {
  function t(n) {
    e.isActive.value = !1;
  }
  mP(e.targetEl.value ?? e.contentEl.value, t);
}
function eW(e, t) {
  const n = e.root.value?.offsetParent, a = [.../* @__PURE__ */ new Set([...b_(e.targetEl.value, t.contained ? n : void 0), ...b_(e.contentEl.value, t.contained ? n : void 0)])].filter((o) => !o.classList.contains("v-overlay-scroll-blocked")), r = window.innerWidth - document.documentElement.offsetWidth, i = ((o) => Pw(o) && o)(n || document.documentElement);
  i && e.root.value.classList.add("v-overlay--scroll-blocked"), a.forEach((o, l) => {
    o.style.setProperty("--v-body-scroll-x", ht(-o.scrollLeft)), o.style.setProperty("--v-body-scroll-y", ht(-o.scrollTop)), o !== document.documentElement && o.style.setProperty("--v-scrollbar-offset", ht(r)), o.classList.add("v-overlay-scroll-blocked");
  }), qa(() => {
    a.forEach((o, l) => {
      const s = parseFloat(o.style.getPropertyValue("--v-body-scroll-x")), d = parseFloat(o.style.getPropertyValue("--v-body-scroll-y")), u = o.style.scrollBehavior;
      o.style.scrollBehavior = "auto", o.style.removeProperty("--v-body-scroll-x"), o.style.removeProperty("--v-body-scroll-y"), o.style.removeProperty("--v-scrollbar-offset"), o.classList.remove("v-overlay-scroll-blocked"), o.scrollLeft = -s, o.scrollTop = -d, o.style.scrollBehavior = u;
    }), i && e.root.value.classList.remove("v-overlay--scroll-blocked");
  });
}
function tW(e, t, n) {
  let a = !1, r = -1, i = -1;
  function o(l) {
    Qz(() => {
      const s = performance.now();
      e.updateLocation.value?.(l), a = (performance.now() - s) / (1e3 / 60) > 2;
    });
  }
  i = (typeof requestIdleCallback > "u" ? (l) => l() : requestIdleCallback)(() => {
    n.run(() => {
      mP(e.targetEl.value ?? e.contentEl.value, (l) => {
        a ? (cancelAnimationFrame(r), r = requestAnimationFrame(() => {
          r = requestAnimationFrame(() => {
            o(l);
          });
        })) : o(l);
      });
    });
  }), qa(() => {
    typeof cancelIdleCallback < "u" && cancelIdleCallback(i), cancelAnimationFrame(r);
  });
}
function mP(e, t) {
  const n = [document, ...b_(e)];
  n.forEach((a) => {
    a.addEventListener("scroll", t, {
      passive: !0
    });
  }), qa(() => {
    n.forEach((a) => {
      a.removeEventListener("scroll", t);
    });
  });
}
const Eb = Symbol.for("vuetify:v-menu"), P0 = De({
  closeDelay: [Number, String],
  openDelay: [Number, String]
}, "delay");
function O0(e, t) {
  let n = () => {
  };
  function a(o) {
    n?.();
    const l = Number(o ? e.openDelay : e.closeDelay);
    return new Promise((s) => {
      n = p3(l, () => {
        t?.(o), s(o);
      });
    });
  }
  function r() {
    return a(!0);
  }
  function i() {
    return a(!1);
  }
  return {
    clearDelay: n,
    runOpenDelay: r,
    runCloseDelay: i
  };
}
const nW = De({
  target: [String, Object],
  activator: [String, Object],
  activatorProps: {
    type: Object,
    default: () => ({})
  },
  openOnClick: {
    type: Boolean,
    default: void 0
  },
  openOnHover: Boolean,
  openOnFocus: {
    type: Boolean,
    default: void 0
  },
  closeOnContentClick: Boolean,
  ...P0()
}, "VOverlay-activator");
function aW(e, t) {
  let {
    isActive: n,
    isTop: a,
    contentEl: r
  } = t;
  const i = ga("useActivator"), o = Se();
  let l = !1, s = !1, d = !0;
  const u = z(() => e.openOnFocus || e.openOnFocus == null && e.openOnHover), f = z(() => e.openOnClick || e.openOnClick == null && !e.openOnHover && !u.value), {
    runOpenDelay: _,
    runCloseDelay: g
  } = O0(e, (D) => {
    D === (e.openOnHover && l || u.value && s) && !(e.openOnHover && n.value && !a.value) && (n.value !== D && (d = !0), n.value = D);
  }), v = Se(), w = {
    onClick: (D) => {
      D.stopPropagation(), o.value = D.currentTarget || D.target, n.value || (v.value = [D.clientX, D.clientY]), n.value = !n.value;
    },
    onMouseenter: (D) => {
      D.sourceCapabilities?.firesTouchEvents || (l = !0, o.value = D.currentTarget || D.target, _());
    },
    onMouseleave: (D) => {
      l = !1, g();
    },
    onFocus: (D) => {
      Su(D.target, ":focus-visible") !== !1 && (s = !0, D.stopPropagation(), o.value = D.currentTarget || D.target, _());
    },
    onBlur: (D) => {
      s = !1, D.stopPropagation(), g();
    }
  }, b = z(() => {
    const D = {};
    return f.value && (D.onClick = w.onClick), e.openOnHover && (D.onMouseenter = w.onMouseenter, D.onMouseleave = w.onMouseleave), u.value && (D.onFocus = w.onFocus, D.onBlur = w.onBlur), D;
  }), p = z(() => {
    const D = {};
    if (e.openOnHover && (D.onMouseenter = () => {
      l = !0, _();
    }, D.onMouseleave = () => {
      l = !1, g();
    }), u.value && (D.onFocusin = () => {
      s = !0, _();
    }, D.onFocusout = () => {
      s = !1, g();
    }), e.closeOnContentClick) {
      const T = Gt(Eb, null);
      D.onClick = () => {
        n.value = !1, T?.closeParents();
      };
    }
    return D;
  }), y = z(() => {
    const D = {};
    return e.openOnHover && (D.onMouseenter = () => {
      d && (l = !0, d = !1, _());
    }, D.onMouseleave = () => {
      l = !1, g();
    }), D;
  });
  nt(a, (D) => {
    D && (e.openOnHover && !l && (!u.value || !s) || u.value && !s && (!e.openOnHover || !l)) && !r.value?.contains(document.activeElement) && (n.value = !1);
  }), nt(n, (D) => {
    D || setTimeout(() => {
      v.value = void 0;
    });
  }, {
    flush: "post"
  });
  const S = g_();
  ea(() => {
    S.value && Vt(() => {
      o.value = S.el;
    });
  });
  const E = g_(), C = z(() => e.target === "cursor" && v.value ? v.value : E.value ? E.el : hP(e.target, i) || o.value), B = z(() => Array.isArray(C.value) ? void 0 : C.value);
  let O;
  return nt(() => !!e.activator, (D) => {
    D && vn ? (O = bu(), O.run(() => {
      rW(e, i, {
        activatorEl: o,
        activatorEvents: b
      });
    })) : O && O.stop();
  }, {
    flush: "post",
    immediate: !0
  }), qa(() => {
    O?.stop();
  }), {
    activatorEl: o,
    activatorRef: S,
    target: C,
    targetEl: B,
    targetRef: E,
    activatorEvents: b,
    contentEvents: p,
    scrimEvents: y
  };
}
function rW(e, t, n) {
  let {
    activatorEl: a,
    activatorEvents: r
  } = n;
  nt(() => e.activator, (s, d) => {
    if (d && s !== d) {
      const u = l(d);
      u && o(u);
    }
    s && Vt(() => i());
  }, {
    immediate: !0
  }), nt(() => e.activatorProps, () => {
    i();
  }), qa(() => {
    o();
  });
  function i() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : l(), d = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.activatorProps;
    s && S3(s, He(r.value, d));
  }
  function o() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : l(), d = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.activatorProps;
    s && C3(s, He(r.value, d));
  }
  function l() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : e.activator;
    const d = hP(s, t);
    return a.value = d?.nodeType === Node.ELEMENT_NODE ? d : void 0, a.value;
  }
}
function hP(e, t) {
  if (!e) return;
  let n;
  if (e === "parent") {
    let a = t?.proxy?.$el?.parentNode;
    for (; a?.hasAttribute("data-no-activator"); )
      a = a.parentNode;
    n = a;
  } else typeof e == "string" ? n = document.querySelector(e) : "$el" in e ? n = e.$el : n = e;
  return n;
}
function _P() {
  if (!vn) return ot(!1);
  const {
    ssr: e
  } = mi();
  if (e) {
    const t = ot(!1);
    return nn(() => {
      t.value = !0;
    }), t;
  } else
    return ot(!0);
}
const D0 = De({
  eager: Boolean
}, "lazy");
function B0(e, t) {
  const n = ot(!1), a = be(() => n.value || e.eager || t.value);
  nt(t, () => n.value = !0);
  function r() {
    e.eager || (n.value = !1);
  }
  return {
    isBooted: n,
    hasContent: a,
    onAfterLeave: r
  };
}
function yc() {
  const t = ga("useScopeId").vnode.scopeId;
  return {
    scopeId: t ? {
      [t]: ""
    } : void 0
  };
}
const iA = Symbol.for("vuetify:stack"), Nd = oa([]);
function iW(e, t, n) {
  const a = ga("useStack"), r = !n, i = Gt(iA, void 0), o = oa({
    activeChildren: /* @__PURE__ */ new Set()
  });
  Nn(iA, o);
  const l = ot(Number(yo(t)));
  Fr(e, () => {
    const u = Nd.at(-1)?.[1];
    l.value = u ? u + 10 : Number(yo(t)), r && Nd.push([a.uid, l.value]), i?.activeChildren.add(a.uid), qa(() => {
      if (r) {
        const f = Ot(Nd).findIndex((_) => _[0] === a.uid);
        Nd.splice(f, 1);
      }
      i?.activeChildren.delete(a.uid);
    });
  });
  const s = ot(!0);
  r && ea(() => {
    const u = Nd.at(-1)?.[0] === a.uid;
    setTimeout(() => s.value = u);
  });
  const d = be(() => !o.activeChildren.size);
  return {
    globalTop: Uu(s),
    localTop: d,
    stackStyles: be(() => ({
      zIndex: l.value
    }))
  };
}
function oW(e) {
  return {
    teleportTarget: z(() => {
      const n = e();
      if (n === !0 || !vn) return;
      const a = n === !1 ? document.body : typeof n == "string" ? document.querySelector(n) : n;
      if (a == null)
        return;
      let r = [...a.children].find((i) => i.matches(".v-overlay-container"));
      return r || (r = document.createElement("div"), r.className = "v-overlay-container", a.appendChild(r)), r;
    })
  };
}
function sW() {
  return !0;
}
function pP(e, t, n) {
  if (!e || vP(e, n) === !1) return !1;
  const a = LT(t);
  if (typeof ShadowRoot < "u" && a instanceof ShadowRoot && a.host === e.target) return !1;
  const r = (typeof n.value == "object" && n.value.include || (() => []))();
  return r.push(t), !r.some((i) => i?.contains(e.target));
}
function vP(e, t) {
  return (typeof t.value == "object" && t.value.closeConditional || sW)(e);
}
function lW(e, t, n) {
  const a = typeof n.value == "function" ? n.value : n.value.handler;
  e.shadowTarget = e.target, t._clickOutside.lastMousedownWasOutside && pP(e, t, n) && setTimeout(() => {
    vP(e, n) && a && a(e);
  }, 0);
}
function oA(e, t) {
  const n = LT(e);
  t(document), typeof ShadowRoot < "u" && n instanceof ShadowRoot && t(n);
}
const Pb = {
  // [data-app] may not be found
  // if using bind, inserted makes
  // sure that the root element is
  // available, iOS does not support
  // clicks on body
  mounted(e, t) {
    const n = (r) => lW(r, e, t), a = (r) => {
      e._clickOutside.lastMousedownWasOutside = pP(r, e, t);
    };
    oA(e, (r) => {
      r.addEventListener("click", n, !0), r.addEventListener("mousedown", a, !0);
    }), e._clickOutside || (e._clickOutside = {
      lastMousedownWasOutside: !1
    }), e._clickOutside[t.instance.$.uid] = {
      onClick: n,
      onMousedown: a
    };
  },
  beforeUnmount(e, t) {
    e._clickOutside && (oA(e, (n) => {
      if (!n || !e._clickOutside?.[t.instance.$.uid]) return;
      const {
        onClick: a,
        onMousedown: r
      } = e._clickOutside[t.instance.$.uid];
      n.removeEventListener("click", a, !0), n.removeEventListener("mousedown", r, !0);
    }), delete e._clickOutside[t.instance.$.uid]);
  }
};
function cW(e) {
  const {
    modelValue: t,
    color: n,
    ...a
  } = e;
  return h(Ur, {
    name: "fade-transition",
    appear: !0
  }, {
    default: () => [e.modelValue && A("div", He({
      class: ["v-overlay__scrim", e.color.backgroundColorClasses.value],
      style: e.color.backgroundColorStyles.value
    }, a), null)]
  });
}
const nm = De({
  absolute: Boolean,
  attach: [Boolean, String, Object],
  closeOnBack: {
    type: Boolean,
    default: !0
  },
  contained: Boolean,
  contentClass: null,
  contentProps: null,
  disabled: Boolean,
  opacity: [Number, String],
  noClickAnimation: Boolean,
  modelValue: Boolean,
  persistent: Boolean,
  scrim: {
    type: [Boolean, String],
    default: !0
  },
  zIndex: {
    type: [Number, String],
    default: 2e3
  },
  ...nW(),
  ...vt(),
  ...La(),
  ...D0(),
  ...Wz(),
  ...Jz(),
  ...an(),
  ...Gi()
}, "VOverlay"), ko = We()({
  name: "VOverlay",
  directives: {
    vClickOutside: Pb
  },
  inheritAttrs: !1,
  props: {
    _disableGlobalStack: Boolean,
    ...nm()
  },
  emits: {
    "click:outside": (e) => !0,
    "update:modelValue": (e) => !0,
    keydown: (e) => !0,
    afterEnter: () => !0,
    afterLeave: () => !0
  },
  setup(e, t) {
    let {
      slots: n,
      attrs: a,
      emit: r
    } = t;
    const i = ga("VOverlay"), o = Se(), l = Se(), s = Se(), d = kt(e, "modelValue"), u = z({
      get: () => d.value,
      set: (H) => {
        H && e.disabled || (d.value = H);
      }
    }), {
      themeClasses: f
    } = yn(e), {
      rtlClasses: _,
      isRtl: g
    } = Ra(), {
      hasContent: v,
      onAfterLeave: w
    } = B0(e, u), b = An(() => typeof e.scrim == "string" ? e.scrim : null), {
      globalTop: p,
      localTop: y,
      stackStyles: S
    } = iW(u, () => e.zIndex, e._disableGlobalStack), {
      activatorEl: E,
      activatorRef: C,
      target: B,
      targetEl: O,
      targetRef: D,
      activatorEvents: T,
      contentEvents: P,
      scrimEvents: I
    } = aW(e, {
      isActive: u,
      isTop: y,
      contentEl: s
    }), {
      teleportTarget: M
    } = oW(() => {
      const H = e.attach || e.contained;
      if (H) return H;
      const we = E?.value?.getRootNode() || i.proxy?.$el?.getRootNode();
      return we instanceof ShadowRoot ? we : !1;
    }), {
      dimensionStyles: V
    } = Fa(e), N = _P(), {
      scopeId: q
    } = yc();
    nt(() => e.disabled, (H) => {
      H && (u.value = !1);
    });
    const {
      contentStyles: j,
      updateLocation: ee
    } = jz(e, {
      isRtl: g,
      contentEl: s,
      target: B,
      isActive: u
    });
    Xz(e, {
      root: o,
      contentEl: s,
      targetEl: O,
      isActive: u,
      updateLocation: ee
    });
    function de(H) {
      r("click:outside", H), e.persistent ? he() : u.value = !1;
    }
    function Z(H) {
      return u.value && p.value && // If using scrim, only close if clicking on it rather than anything opened on top
      (!e.scrim || H.target === l.value || H instanceof MouseEvent && H.shadowTarget === l.value);
    }
    vn && nt(u, (H) => {
      H ? window.addEventListener("keydown", F) : window.removeEventListener("keydown", F);
    }, {
      immediate: !0
    }), Ga(() => {
      vn && window.removeEventListener("keydown", F);
    });
    function F(H) {
      H.key === "Escape" && p.value && (s.value?.contains(document.activeElement) || r("keydown", H), e.persistent ? he() : (u.value = !1, s.value?.contains(document.activeElement) && E.value?.focus()));
    }
    function Y(H) {
      H.key === "Escape" && !p.value || r("keydown", H);
    }
    const se = IE();
    Fr(() => e.closeOnBack, () => {
      HH(se, (H) => {
        p.value && u.value ? (H(!1), e.persistent ? he() : u.value = !1) : H();
      });
    });
    const X = Se();
    nt(() => u.value && (e.absolute || e.contained) && M.value == null, (H) => {
      if (H) {
        const we = Ew(o.value);
        we && we !== document.scrollingElement && (X.value = we.scrollTop);
      }
    });
    function he() {
      e.noClickAnimation || s.value && Fl(s.value, [{
        transformOrigin: "center"
      }, {
        transform: "scale(1.03)"
      }, {
        transformOrigin: "center"
      }], {
        duration: 150,
        easing: _f
      });
    }
    function ve() {
      r("afterEnter");
    }
    function pe() {
      w(), r("afterLeave");
    }
    return Ge(() => A(Qe, null, [n.activator?.({
      isActive: u.value,
      targetRef: D,
      props: He({
        ref: C
      }, T.value, e.activatorProps)
    }), N.value && v.value && h(Ix, {
      disabled: !M.value,
      to: M.value
    }, {
      default: () => [A("div", He({
        class: ["v-overlay", {
          "v-overlay--absolute": e.absolute || e.contained,
          "v-overlay--active": u.value,
          "v-overlay--contained": e.contained
        }, f.value, _.value, e.class],
        style: [S.value, {
          "--v-overlay-opacity": e.opacity,
          top: ht(X.value)
        }, e.style],
        ref: o,
        onKeydown: Y
      }, q, a), [h(cW, He({
        color: b,
        modelValue: u.value && !!e.scrim,
        ref: l
      }, I.value), null), h(Sr, {
        appear: !0,
        persisted: !0,
        transition: e.transition,
        target: B.value,
        onAfterEnter: ve,
        onAfterLeave: pe
      }, {
        default: () => [ln(A("div", He({
          ref: s,
          class: ["v-overlay__content", e.contentClass],
          style: [V.value, j.value]
        }, P.value, e.contentProps), [n.default?.({
          isActive: u
        })]), [[Sa, u.value], [Pb, {
          handler: de,
          closeConditional: Z,
          include: () => [E.value]
        }]])]
      })])]
    })])), {
      activatorEl: E,
      scrimEl: l,
      target: B,
      animateClick: he,
      contentEl: s,
      globalTop: p,
      localTop: y,
      updateLocation: ee
    };
  }
}), uy = Symbol("Forwarded refs");
function dy(e, t) {
  let n = e;
  for (; n; ) {
    const a = Reflect.getOwnPropertyDescriptor(n, t);
    if (a) return a;
    n = Object.getPrototypeOf(n);
  }
}
function pi(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), a = 1; a < t; a++)
    n[a - 1] = arguments[a];
  return e[uy] = n, new Proxy(e, {
    get(r, i) {
      if (Reflect.has(r, i))
        return Reflect.get(r, i);
      if (!(typeof i == "symbol" || i.startsWith("$") || i.startsWith("__"))) {
        for (const o of n)
          if (o.value && Reflect.has(o.value, i)) {
            const l = Reflect.get(o.value, i);
            return typeof l == "function" ? l.bind(o.value) : l;
          }
      }
    },
    has(r, i) {
      if (Reflect.has(r, i))
        return !0;
      if (typeof i == "symbol" || i.startsWith("$") || i.startsWith("__")) return !1;
      for (const o of n)
        if (o.value && Reflect.has(o.value, i))
          return !0;
      return !1;
    },
    set(r, i, o) {
      if (Reflect.has(r, i))
        return Reflect.set(r, i, o);
      if (typeof i == "symbol" || i.startsWith("$") || i.startsWith("__")) return !1;
      for (const l of n)
        if (l.value && Reflect.has(l.value, i))
          return Reflect.set(l.value, i, o);
      return !1;
    },
    getOwnPropertyDescriptor(r, i) {
      const o = Reflect.getOwnPropertyDescriptor(r, i);
      if (o) return o;
      if (!(typeof i == "symbol" || i.startsWith("$") || i.startsWith("__"))) {
        for (const l of n) {
          if (!l.value) continue;
          const s = dy(l.value, i) ?? ("_" in l.value ? dy(l.value._?.setupState, i) : void 0);
          if (s) return s;
        }
        for (const l of n) {
          const s = l.value && l.value[uy];
          if (!s) continue;
          const d = s.slice();
          for (; d.length; ) {
            const u = d.shift(), f = dy(u.value, i);
            if (f) return f;
            const _ = u.value && u.value[uy];
            _ && d.push(..._);
          }
        }
      }
    }
  });
}
const gP = De({
  // TODO
  // disableKeys: Boolean,
  id: String,
  submenu: Boolean,
  ...la(nm({
    closeDelay: 250,
    closeOnContentClick: !0,
    locationStrategy: "connected",
    location: void 0,
    openDelay: 300,
    scrim: !1,
    scrollStrategy: "reposition",
    transition: {
      component: vp
    }
  }), ["absolute"])
}, "VMenu"), Ru = We()({
  name: "VMenu",
  props: gP(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      scopeId: r
    } = yc(), {
      isRtl: i
    } = Ra(), o = $r(), l = be(() => e.id || `v-menu-${o}`), s = Se(), d = Gt(Eb, null), u = ot(/* @__PURE__ */ new Set());
    Nn(Eb, {
      register() {
        u.value.add(o);
      },
      unregister() {
        u.value.delete(o);
      },
      closeParents(b) {
        setTimeout(() => {
          !u.value.size && !e.persistent && (b == null || s.value?.contentEl && !v3(b, s.value.contentEl)) && (a.value = !1, d?.closeParents());
        }, 40);
      }
    }), Ga(() => {
      d?.unregister(), document.removeEventListener("focusin", f);
    }), uw(() => a.value = !1);
    async function f(b) {
      const p = b.relatedTarget, y = b.target;
      await Vt(), a.value && p !== y && s.value?.contentEl && // We're the topmost menu
      s.value?.globalTop && // It isn't the document or the menu body
      ![document, s.value.contentEl].includes(y) && // It isn't inside the menu body
      !s.value.contentEl.contains(y) && hf(s.value.contentEl)[0]?.focus();
    }
    nt(a, (b) => {
      b ? (d?.register(), vn && document.addEventListener("focusin", f, {
        once: !0
      })) : (d?.unregister(), vn && document.removeEventListener("focusin", f));
    }, {
      immediate: !0
    });
    function _(b) {
      d?.closeParents(b);
    }
    function g(b) {
      if (!e.disabled)
        if (b.key === "Tab" || b.key === "Enter" && !e.closeOnContentClick) {
          if (b.key === "Enter" && (b.target instanceof HTMLTextAreaElement || b.target instanceof HTMLInputElement && b.target.closest("form"))) return;
          b.key === "Enter" && b.preventDefault(), ST(hf(s.value?.contentEl, !1), b.shiftKey ? "prev" : "next", (y) => y.tabIndex >= 0) || (a.value = !1, s.value?.activatorEl?.focus());
        } else e.submenu && b.key === (i.value ? "ArrowRight" : "ArrowLeft") && (a.value = !1, s.value?.activatorEl?.focus());
    }
    function v(b) {
      if (e.disabled) return;
      const p = s.value?.contentEl;
      p && a.value ? b.key === "ArrowDown" ? (b.preventDefault(), b.stopImmediatePropagation(), Hl(p, "next")) : b.key === "ArrowUp" ? (b.preventDefault(), b.stopImmediatePropagation(), Hl(p, "prev")) : e.submenu && (b.key === (i.value ? "ArrowRight" : "ArrowLeft") ? a.value = !1 : b.key === (i.value ? "ArrowLeft" : "ArrowRight") && (b.preventDefault(), Hl(p, "first"))) : (e.submenu ? b.key === (i.value ? "ArrowLeft" : "ArrowRight") : ["ArrowDown", "ArrowUp"].includes(b.key)) && (a.value = !0, b.preventDefault(), setTimeout(() => setTimeout(() => v(b))));
    }
    const w = z(() => He({
      "aria-haspopup": "menu",
      "aria-expanded": String(a.value),
      "aria-controls": l.value,
      onKeydown: v
    }, e.activatorProps));
    return Ge(() => {
      const b = ko.filterProps(e);
      return h(ko, He({
        ref: s,
        id: l.value,
        class: ["v-menu", e.class],
        style: e.style
      }, b, {
        modelValue: a.value,
        "onUpdate:modelValue": (p) => a.value = p,
        absolute: !0,
        activatorProps: w.value,
        location: e.location ?? (e.submenu ? "end" : "bottom"),
        "onClick:outside": _,
        onKeydown: g
      }, r), {
        activator: n.activator,
        default: function() {
          for (var p = arguments.length, y = new Array(p), S = 0; S < p; S++)
            y[S] = arguments[S];
          return h(Wt, {
            root: "VMenu"
          }, {
            default: () => [n.default?.(...y)]
          });
        }
      });
    }), pi({
      id: l,
      ΨopenChildren: u
    }, s);
  }
}), uW = De({
  active: Boolean,
  disabled: Boolean,
  max: [Number, String],
  value: {
    type: [Number, String],
    default: 0
  },
  ...vt(),
  ...Gi({
    transition: {
      component: w0
    }
  })
}, "VCounter"), Cp = We()({
  name: "VCounter",
  functional: !0,
  props: uW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = be(() => e.max ? `${e.value} / ${e.max}` : String(e.value));
    return Ge(() => h(Sr, {
      transition: e.transition
    }, {
      default: () => [ln(A("div", {
        class: Ee(["v-counter", {
          "text-error": e.max && !e.disabled && parseFloat(e.value) > parseFloat(e.max)
        }, e.class]),
        style: Xe(e.style)
      }, [n.default ? n.default({
        counter: a.value,
        max: e.max,
        value: e.value
      }) : a.value]), [[Sa, e.active]])]
    })), {};
  }
}), dW = De({
  floating: Boolean,
  ...vt()
}, "VFieldLabel"), Wd = We()({
  name: "VFieldLabel",
  props: dW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(Zu, {
      class: Ee(["v-field-label", {
        "v-field-label--floating": e.floating
      }, e.class]),
      style: Xe(e.style),
      "aria-hidden": e.floating || void 0
    }, n)), {};
  }
}), fW = ["underlined", "outlined", "filled", "solo", "solo-inverted", "solo-filled", "plain"], am = De({
  appendInnerIcon: At,
  bgColor: String,
  clearable: Boolean,
  clearIcon: {
    type: At,
    default: "$clear"
  },
  active: Boolean,
  centerAffix: {
    type: Boolean,
    default: void 0
  },
  color: String,
  baseColor: String,
  dirty: Boolean,
  disabled: {
    type: Boolean,
    default: null
  },
  glow: Boolean,
  error: Boolean,
  flat: Boolean,
  iconColor: [Boolean, String],
  label: String,
  persistentClear: Boolean,
  prependInnerIcon: At,
  reverse: Boolean,
  singleLine: Boolean,
  variant: {
    type: String,
    default: "filled",
    validator: (e) => fW.includes(e)
  },
  "onClick:clear": nr(),
  "onClick:appendInner": nr(),
  "onClick:prependInner": nr(),
  ...vt(),
  ...bp(),
  ...Hn(),
  ...an()
}, "VField"), Qs = We()({
  name: "VField",
  inheritAttrs: !1,
  props: {
    id: String,
    ...em(),
    ...am()
  },
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      themeClasses: i
    } = yn(e), {
      loaderClasses: o
    } = Qf(e), {
      focusClasses: l,
      isFocused: s,
      focus: d,
      blur: u
    } = ds(e), {
      InputIcon: f
    } = $E(e), {
      roundedClasses: _
    } = fa(e), {
      rtlClasses: g
    } = Ra(), v = be(() => e.dirty || e.active), w = be(() => !!(e.label || r.label)), b = be(() => !e.singleLine && w.value), p = $r(), y = z(() => e.id || `input-${p}`), S = be(() => `${y.value}-messages`), E = Se(), C = Se(), B = Se(), O = z(() => ["plain", "underlined"].includes(e.variant)), D = z(() => e.error || e.disabled ? void 0 : v.value && s.value ? e.color : e.baseColor), T = z(() => {
      if (!(!e.iconColor || e.glow && !s.value))
        return e.iconColor === !0 ? D.value : e.iconColor;
    }), {
      backgroundColorClasses: P,
      backgroundColorStyles: I
    } = An(() => e.bgColor), {
      textColorClasses: M,
      textColorStyles: V
    } = mr(D);
    nt(v, (j) => {
      if (b.value) {
        const ee = E.value.$el, de = C.value.$el;
        requestAnimationFrame(() => {
          const Z = Aw(ee), F = de.getBoundingClientRect(), Y = F.x - Z.x, se = F.y - Z.y - (Z.height / 2 - F.height / 2), X = F.width / 0.75, he = Math.abs(X - Z.width) > 1 ? {
            maxWidth: ht(X)
          } : void 0, ve = getComputedStyle(ee), pe = getComputedStyle(de), H = parseFloat(ve.transitionDuration) * 1e3 || 150, we = parseFloat(pe.getPropertyValue("--v-field-label-scale")), Me = pe.getPropertyValue("color");
          ee.style.visibility = "visible", de.style.visibility = "hidden", Fl(ee, {
            transform: `translate(${Y}px, ${se}px) scale(${we})`,
            color: Me,
            ...he
          }, {
            duration: H,
            easing: _f,
            direction: j ? "normal" : "reverse"
          }).finished.then(() => {
            ee.style.removeProperty("visibility"), de.style.removeProperty("visibility");
          });
        });
      }
    }, {
      flush: "post"
    });
    const N = z(() => ({
      isActive: v,
      isFocused: s,
      controlRef: B,
      blur: u,
      focus: d
    }));
    function q(j) {
      j.target !== document.activeElement && j.preventDefault();
    }
    return Ge(() => {
      const j = e.variant === "outlined", ee = !!(r["prepend-inner"] || e.prependInnerIcon), de = !!(e.clearable || r.clear) && !e.disabled, Z = !!(r["append-inner"] || e.appendInnerIcon || de), F = () => r.label ? r.label({
        ...N.value,
        label: e.label,
        props: {
          for: y.value
        }
      }) : e.label;
      return A("div", He({
        class: ["v-field", {
          "v-field--active": v.value,
          "v-field--appended": Z,
          "v-field--center-affix": e.centerAffix ?? !O.value,
          "v-field--disabled": e.disabled,
          "v-field--dirty": e.dirty,
          "v-field--error": e.error,
          "v-field--glow": e.glow,
          "v-field--flat": e.flat,
          "v-field--has-background": !!e.bgColor,
          "v-field--persistent-clear": e.persistentClear,
          "v-field--prepended": ee,
          "v-field--reverse": e.reverse,
          "v-field--single-line": e.singleLine,
          "v-field--no-label": !F(),
          [`v-field--variant-${e.variant}`]: !0
        }, i.value, P.value, l.value, o.value, _.value, g.value, e.class],
        style: [I.value, e.style],
        onClick: q
      }, n), [A("div", {
        class: "v-field__overlay"
      }, null), h(Jf, {
        name: "v-field",
        active: !!e.loading,
        color: e.error ? "error" : typeof e.loading == "string" ? e.loading : e.color
      }, {
        default: r.loader
      }), ee && A("div", {
        key: "prepend",
        class: "v-field__prepend-inner",
        onMousedown: (Y) => {
          Y.preventDefault(), Y.stopPropagation();
        }
      }, [e.prependInnerIcon && h(f, {
        key: "prepend-icon",
        name: "prependInner",
        color: T.value
      }, null), r["prepend-inner"]?.(N.value)]), A("div", {
        class: "v-field__field",
        "data-no-activator": ""
      }, [["filled", "solo", "solo-inverted", "solo-filled"].includes(e.variant) && b.value && h(Wd, {
        key: "floating-label",
        ref: C,
        class: Ee([M.value]),
        floating: !0,
        for: y.value,
        style: Xe(V.value)
      }, {
        default: () => [F()]
      }), w.value && h(Wd, {
        key: "label",
        ref: E,
        for: y.value
      }, {
        default: () => [F()]
      }), r.default?.({
        ...N.value,
        props: {
          id: y.value,
          class: "v-field__input",
          "aria-describedby": S.value
        },
        focus: d,
        blur: u
      }) ?? A("div", {
        id: y.value,
        class: "v-field__input",
        "aria-describedby": S.value
      }, null)]), de && h(k0, {
        key: "clear"
      }, {
        default: () => [ln(A("div", {
          class: "v-field__clearable",
          onMousedown: (Y) => {
            Y.preventDefault(), Y.stopPropagation();
          }
        }, [h(Wt, {
          defaults: {
            VIcon: {
              icon: e.clearIcon
            }
          }
        }, {
          default: () => [r.clear ? r.clear({
            ...N.value,
            props: {
              onFocus: d,
              onBlur: u,
              onClick: e["onClick:clear"],
              tabindex: -1
            }
          }) : h(f, {
            name: "clear",
            onFocus: d,
            onBlur: u,
            tabindex: -1
          }, null)]
        })]), [[Sa, e.dirty]])]
      }), Z && A("div", {
        key: "append",
        class: "v-field__append-inner",
        onMousedown: (Y) => {
          Y.preventDefault(), Y.stopPropagation();
        }
      }, [r["append-inner"]?.(N.value), e.appendInnerIcon && h(f, {
        key: "append-icon",
        name: "appendInner",
        color: T.value
      }, null)]), A("div", {
        class: Ee(["v-field__outline", M.value]),
        style: Xe(V.value)
      }, [j && A(Qe, null, [A("div", {
        class: "v-field__outline__start"
      }, null), b.value && A("div", {
        class: "v-field__outline__notch"
      }, [h(Wd, {
        ref: C,
        floating: !0,
        for: y.value
      }, {
        default: () => [F()]
      })]), A("div", {
        class: "v-field__outline__end"
      }, null)]), O.value && b.value && h(Wd, {
        ref: C,
        floating: !0,
        for: y.value
      }, {
        default: () => [F()]
      })])]);
    }), {
      controlRef: B,
      fieldIconColor: T
    };
  }
});
function yP(e) {
  function t(n, a) {
    !e.autofocus || !n || a[0].target?.focus?.();
  }
  return {
    onIntersect: t
  };
}
const mW = ["color", "file", "time", "date", "datetime-local", "week", "month"], rm = De({
  autofocus: Boolean,
  counter: [Boolean, Number, String],
  counterValue: [Number, Function],
  prefix: String,
  placeholder: String,
  persistentPlaceholder: Boolean,
  persistentCounter: Boolean,
  suffix: String,
  role: String,
  type: {
    type: String,
    default: "text"
  },
  modelModifiers: Object,
  ...fs(),
  ...am()
}, "VTextField"), os = We()({
  name: "VTextField",
  directives: {
    vIntersect: ns
  },
  inheritAttrs: !1,
  props: rm(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const i = kt(e, "modelValue"), {
      isFocused: o,
      focus: l,
      blur: s
    } = ds(e), {
      onIntersect: d
    } = yP(e), u = z(() => typeof e.counterValue == "function" ? e.counterValue(i.value) : typeof e.counterValue == "number" ? e.counterValue : (i.value ?? "").toString().length), f = z(() => {
      if (n.maxlength) return n.maxlength;
      if (!(!e.counter || typeof e.counter != "number" && typeof e.counter != "string"))
        return e.counter;
    }), _ = z(() => ["plain", "underlined"].includes(e.variant)), g = Se(), v = Se(), w = Se(), b = z(() => mW.includes(e.type) || e.persistentPlaceholder || o.value || e.active);
    function p() {
      o.value || l(), Vt(() => {
        w.value !== document.activeElement && w.value?.focus();
      });
    }
    function y(B) {
      a("mousedown:control", B), B.target !== w.value && (p(), B.preventDefault());
    }
    function S(B) {
      a("click:control", B);
    }
    function E(B, O) {
      B.stopPropagation(), p(), Vt(() => {
        i.value = null, O(), rp(e["onClick:clear"], B);
      });
    }
    function C(B) {
      const O = B.target;
      if (i.value = O.value, e.modelModifiers?.trim && ["text", "search", "password", "tel", "url"].includes(e.type)) {
        const D = [O.selectionStart, O.selectionEnd];
        Vt(() => {
          O.selectionStart = D[0], O.selectionEnd = D[1];
        });
      }
    }
    return Ge(() => {
      const B = !!(r.counter || e.counter !== !1 && e.counter != null), O = !!(B || r.details), [D, T] = nl(n), {
        modelValue: P,
        ...I
      } = hr.filterProps(e), M = Qs.filterProps(e);
      return h(hr, He({
        ref: g,
        modelValue: i.value,
        "onUpdate:modelValue": (V) => i.value = V,
        class: ["v-text-field", {
          "v-text-field--prefixed": e.prefix,
          "v-text-field--suffixed": e.suffix,
          "v-input--plain-underlined": _.value
        }, e.class],
        style: e.style
      }, D, I, {
        centerAffix: !_.value,
        focused: o.value
      }), {
        ...r,
        default: (V) => {
          let {
            id: N,
            isDisabled: q,
            isDirty: j,
            isReadonly: ee,
            isValid: de,
            reset: Z
          } = V;
          return h(Qs, He({
            ref: v,
            onMousedown: y,
            onClick: S,
            "onClick:clear": (F) => E(F, Z),
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"],
            role: e.role
          }, M, {
            id: N.value,
            active: b.value || j.value,
            dirty: j.value || e.dirty,
            disabled: q.value,
            focused: o.value,
            error: de.value === !1
          }), {
            ...r,
            default: (F) => {
              let {
                props: {
                  class: Y,
                  ...se
                }
              } = F;
              const X = ln(A("input", He({
                ref: w,
                value: i.value,
                onInput: C,
                autofocus: e.autofocus,
                readonly: ee.value,
                disabled: q.value,
                name: e.name,
                placeholder: e.placeholder,
                size: 1,
                type: e.type,
                onFocus: p,
                onBlur: s
              }, se, T), null), [[ns, {
                handler: d
              }, null, {
                once: !0
              }]]);
              return A(Qe, null, [e.prefix && A("span", {
                class: "v-text-field__prefix"
              }, [A("span", {
                class: "v-text-field__prefix__text"
              }, [e.prefix])]), r.default ? A("div", {
                class: Ee(Y),
                "data-no-activator": ""
              }, [r.default(), X]) : es(X, {
                class: Y
              }), e.suffix && A("span", {
                class: "v-text-field__suffix"
              }, [A("span", {
                class: "v-text-field__suffix__text"
              }, [e.suffix])])]);
            }
          });
        },
        details: O ? (V) => A(Qe, null, [r.details?.(V), B && A(Qe, null, [A("span", null, null), h(Cp, {
          active: e.persistentCounter || o.value,
          value: u.value,
          max: f.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), pi({}, g, v, w);
  }
}), hW = De({
  renderless: Boolean,
  ...vt()
}, "VVirtualScrollItem"), bP = We()({
  name: "VVirtualScrollItem",
  inheritAttrs: !1,
  props: hW(),
  emits: {
    "update:height": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      resizeRef: i,
      contentRect: o
    } = Wi(void 0, "border");
    nt(() => o.value?.height, (l) => {
      l != null && a("update:height", l);
    }), Ge(() => e.renderless ? A(Qe, null, [r.default?.({
      itemRef: i
    })]) : A("div", He({
      ref: i,
      class: ["v-virtual-scroll__item", e.class],
      style: e.style
    }, n), [r.default?.()]));
  }
}), _W = -1, pW = 1, fy = 100, wP = De({
  itemHeight: {
    type: [Number, String],
    default: null
  },
  itemKey: {
    type: [String, Array, Function],
    default: null
  },
  height: [Number, String]
}, "virtual");
function kP(e, t) {
  const n = mi(), a = ot(0);
  ea(() => {
    a.value = parseFloat(e.itemHeight || 0);
  });
  const r = ot(0), i = ot(Math.ceil(
    // Assume 16px items filling the entire screen height if
    // not provided. This is probably incorrect but it minimises
    // the chance of ending up with empty space at the bottom.
    // The default value is set here to avoid poisoning getSize()
    (parseInt(e.height) || n.height.value) / (a.value || 16)
  ) || 1), o = ot(0), l = ot(0), s = Se(), d = Se();
  let u = 0;
  const {
    resizeRef: f,
    contentRect: _
  } = Wi();
  ea(() => {
    f.value = s.value;
  });
  const g = z(() => s.value === document.documentElement ? n.height.value : _.value?.height || parseInt(e.height) || 0), v = z(() => !!(s.value && d.value && g.value && a.value));
  let w = Array.from({
    length: t.value.length
  }), b = Array.from({
    length: t.value.length
  });
  const p = ot(0);
  let y = -1;
  function S(F) {
    return w[F] || a.value;
  }
  const E = m3(() => {
    const F = performance.now();
    b[0] = 0;
    const Y = t.value.length;
    for (let se = 1; se <= Y - 1; se++)
      b[se] = (b[se - 1] || 0) + S(se - 1);
    p.value = Math.max(p.value, performance.now() - F);
  }, p), C = nt(v, (F) => {
    F && (C(), u = d.value.offsetTop, E.immediate(), j(), ~y && Vt(() => {
      vn && window.requestAnimationFrame(() => {
        de(y), y = -1;
      });
    }));
  });
  qa(() => {
    E.clear();
  });
  function B(F, Y) {
    const se = w[F], X = a.value;
    a.value = X ? Math.min(a.value, Y) : Y, (se !== Y || X !== a.value) && (w[F] = Y, E());
  }
  function O(F) {
    return F = Pn(F, 0, t.value.length - 1), b[F] || 0;
  }
  function D(F) {
    return vW(b, F);
  }
  let T = 0, P = 0, I = 0;
  nt(g, (F, Y) => {
    Y && (j(), F < Y && requestAnimationFrame(() => {
      P = 0, j();
    }));
  });
  let M = -1;
  function V() {
    if (!s.value || !d.value) return;
    const F = s.value.scrollTop, Y = performance.now();
    Y - I > 500 ? (P = Math.sign(F - T), u = d.value.offsetTop) : P = F - T, T = F, I = Y, window.clearTimeout(M), M = window.setTimeout(N, 500), j();
  }
  function N() {
    !s.value || !d.value || (P = 0, I = 0, window.clearTimeout(M), j());
  }
  let q = -1;
  function j() {
    cancelAnimationFrame(q), q = requestAnimationFrame(ee);
  }
  function ee() {
    if (!s.value || !g.value) return;
    const F = T - u, Y = Math.sign(P), se = Math.max(0, F - fy), X = Pn(D(se), 0, t.value.length), he = F + g.value + fy, ve = Pn(D(he) + 1, X + 1, t.value.length);
    if (
      // Only update the side we're scrolling towards,
      // the other side will be updated incidentally
      (Y !== _W || X < r.value) && (Y !== pW || ve > i.value)
    ) {
      const pe = O(r.value) - O(X), H = O(ve) - O(i.value);
      Math.max(pe, H) > fy ? (r.value = X, i.value = ve) : (X <= 0 && (r.value = X), ve >= t.value.length && (i.value = ve));
    }
    o.value = O(r.value), l.value = O(t.value.length) - O(i.value);
  }
  function de(F) {
    const Y = O(F);
    !s.value || F && !Y ? y = F : s.value.scrollTop = Y;
  }
  const Z = z(() => t.value.slice(r.value, i.value).map((F, Y) => {
    const se = Y + r.value;
    return {
      raw: F,
      index: se,
      key: Da(F, e.itemKey, se)
    };
  }));
  return nt(t, () => {
    w = Array.from({
      length: t.value.length
    }), b = Array.from({
      length: t.value.length
    }), E.immediate(), j();
  }, {
    deep: 1
  }), {
    calculateVisibleItems: j,
    containerRef: s,
    markerRef: d,
    computedItems: Z,
    paddingTop: o,
    paddingBottom: l,
    scrollToIndex: de,
    handleScroll: V,
    handleScrollend: N,
    handleItemResize: B
  };
}
function vW(e, t) {
  let n = e.length - 1, a = 0, r = 0, i = null, o = -1;
  if (e[n] < t)
    return n;
  for (; a <= n; )
    if (r = a + n >> 1, i = e[r], i > t)
      n = r - 1;
    else if (i < t)
      o = r, a = r + 1;
    else return i === t ? r : a;
  return o;
}
const gW = De({
  items: {
    type: Array,
    default: () => []
  },
  renderless: Boolean,
  ...wP(),
  ...vt(),
  ...La()
}, "VVirtualScroll"), Ap = We()({
  name: "VVirtualScroll",
  props: gW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = ga("VVirtualScroll"), {
      dimensionStyles: r
    } = Fa(e), {
      calculateVisibleItems: i,
      containerRef: o,
      markerRef: l,
      handleScroll: s,
      handleScrollend: d,
      handleItemResize: u,
      scrollToIndex: f,
      paddingTop: _,
      paddingBottom: g,
      computedItems: v
    } = kP(e, be(() => e.items));
    return Fr(() => e.renderless, () => {
      function w() {
        const p = (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1) ? "addEventListener" : "removeEventListener";
        o.value === document.documentElement ? (document[p]("scroll", s, {
          passive: !0
        }), document[p]("scrollend", d)) : (o.value?.[p]("scroll", s, {
          passive: !0
        }), o.value?.[p]("scrollend", d));
      }
      nn(() => {
        o.value = Ew(a.vnode.el, !0), w(!0);
      }), qa(w);
    }), Ge(() => {
      const w = v.value.map((b) => h(bP, {
        key: b.key,
        renderless: e.renderless,
        "onUpdate:height": (p) => u(b.index, p)
      }, {
        default: (p) => n.default?.({
          item: b.raw,
          index: b.index,
          ...p
        })
      }));
      return e.renderless ? A(Qe, null, [A("div", {
        ref: l,
        class: "v-virtual-scroll__spacer",
        style: {
          paddingTop: ht(_.value)
        }
      }, null), w, A("div", {
        class: "v-virtual-scroll__spacer",
        style: {
          paddingBottom: ht(g.value)
        }
      }, null)]) : A("div", {
        ref: o,
        class: Ee(["v-virtual-scroll", e.class]),
        onScrollPassive: s,
        onScrollend: d,
        style: Xe([r.value, e.style])
      }, [A("div", {
        ref: l,
        class: "v-virtual-scroll__container",
        style: {
          paddingTop: ht(_.value),
          paddingBottom: ht(g.value)
        }
      }, [w])]);
    }), {
      calculateVisibleItems: i,
      scrollToIndex: f
    };
  }
});
function V0(e, t) {
  const n = ot(!1);
  let a;
  function r(l) {
    cancelAnimationFrame(a), n.value = !0, a = requestAnimationFrame(() => {
      a = requestAnimationFrame(() => {
        n.value = !1;
      });
    });
  }
  async function i() {
    await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => {
      if (n.value) {
        const s = nt(n, () => {
          s(), l();
        });
      } else l();
    });
  }
  async function o(l) {
    if (l.key === "Tab" && t.value?.focus(), !["PageDown", "PageUp", "Home", "End"].includes(l.key)) return;
    const s = e.value?.$el;
    if (!s) return;
    (l.key === "Home" || l.key === "End") && s.scrollTo({
      top: l.key === "Home" ? 0 : s.scrollHeight,
      behavior: "smooth"
    }), await i();
    const d = s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");
    if (l.key === "PageDown" || l.key === "Home") {
      const u = s.getBoundingClientRect().top;
      for (const f of d)
        if (f.getBoundingClientRect().top >= u) {
          f.focus();
          break;
        }
    } else {
      const u = s.getBoundingClientRect().bottom;
      for (const f of [...d].reverse())
        if (f.getBoundingClientRect().bottom <= u) {
          f.focus();
          break;
        }
    }
  }
  return {
    onScrollPassive: r,
    onKeydown: o
  };
}
const M0 = De({
  chips: Boolean,
  closableChips: Boolean,
  closeText: {
    type: String,
    default: "$vuetify.close"
  },
  openText: {
    type: String,
    default: "$vuetify.open"
  },
  eager: Boolean,
  hideNoData: Boolean,
  hideSelected: Boolean,
  listProps: {
    type: Object
  },
  menu: Boolean,
  menuIcon: {
    type: At,
    default: "$dropdown"
  },
  menuProps: {
    type: Object
  },
  multiple: Boolean,
  noDataText: {
    type: String,
    default: "$vuetify.noDataText"
  },
  openOnClear: Boolean,
  itemColor: String,
  ...lP({
    itemChildren: !1
  })
}, "Select"), yW = De({
  ...M0(),
  ...la(rm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...Gi({
    transition: {
      component: vp
    }
  })
}, "VSelect"), R0 = We()({
  name: "VSelect",
  props: yW(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), r = Se(), i = Se(), o = Se(), {
      items: l,
      transformIn: s,
      transformOut: d
    } = E0(e), u = kt(e, "modelValue", [], (F) => s(F === null ? [null] : Zn(F)), (F) => {
      const Y = d(F);
      return e.multiple ? Y : Y[0] ?? null;
    }), f = z(() => typeof e.counterValue == "function" ? e.counterValue(u.value) : typeof e.counterValue == "number" ? e.counterValue : u.value.length), _ = tm(e), g = z(() => u.value.map((F) => F.value)), v = ot(!1);
    let w = "", b = -1, p;
    const y = z(() => e.hideSelected ? l.value.filter((F) => !u.value.some((Y) => (e.valueComparator || fr)(Y, F))) : l.value), S = z(() => e.hideNoData && !y.value.length || _.isReadonly.value || _.isDisabled.value), E = kt(e, "menu"), C = z({
      get: () => E.value,
      set: (F) => {
        E.value && !F && i.value?.ΨopenChildren.size || F && S.value || (E.value = F);
      }
    }), B = be(() => C.value ? e.closeText : e.openText), O = z(() => ({
      ...e.menuProps,
      activatorProps: {
        ...e.menuProps?.activatorProps || {},
        "aria-haspopup": "listbox"
        // Set aria-haspopup to 'listbox'
      }
    })), D = Se(), T = V0(D, r);
    function P(F) {
      e.openOnClear && (C.value = !0);
    }
    function I() {
      S.value || (C.value = !C.value);
    }
    function M(F) {
      Cu(F) && V(F);
    }
    function V(F) {
      if (!F.key || _.isReadonly.value) return;
      ["Enter", " ", "ArrowDown", "ArrowUp", "Home", "End"].includes(F.key) && F.preventDefault(), ["Enter", "ArrowDown", " "].includes(F.key) && (C.value = !0), ["Escape", "Tab"].includes(F.key) && (C.value = !1), F.key === "Home" ? D.value?.focus("first") : F.key === "End" && D.value?.focus("last");
      const Y = 1e3;
      if (!Cu(F)) return;
      const se = performance.now();
      se - p > Y && (w = "", b = -1), w += F.key.toLowerCase(), p = se;
      const X = y.value;
      function he() {
        let Me = ve();
        return Me || w.at(-1) === w.at(-2) && (w = w.slice(0, -1), Me = ve(), Me) || (b = -1, Me = ve(), Me) ? Me : (w = F.key.toLowerCase(), ve());
      }
      function ve() {
        for (let Me = b + 1; Me < X.length; Me++) {
          const Re = X[Me];
          if (Re.title.toLowerCase().startsWith(w))
            return [Re, Me];
        }
      }
      const pe = he();
      if (!pe) return;
      const [H, we] = pe;
      b = we, D.value?.focus(we), e.multiple || (u.value = [H]);
    }
    function N(F) {
      let Y = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!F.props.disabled)
        if (e.multiple) {
          const se = u.value.findIndex((he) => (e.valueComparator || fr)(he.value, F.value)), X = Y ?? !~se;
          if (~se) {
            const he = X ? [...u.value, F] : [...u.value];
            he.splice(se, 1), u.value = he;
          } else X && (u.value = [...u.value, F]);
        } else {
          const se = Y !== !1;
          u.value = se ? [F] : [], Vt(() => {
            C.value = !1;
          });
        }
    }
    function q(F) {
      D.value?.$el.contains(F.relatedTarget) || (C.value = !1);
    }
    function j() {
      e.eager && o.value?.calculateVisibleItems();
    }
    function ee() {
      v.value && r.value?.focus();
    }
    function de(F) {
      v.value = !0;
    }
    function Z(F) {
      if (F == null) u.value = [];
      else if (Su(r.value, ":autofill") || Su(r.value, ":-webkit-autofill")) {
        const Y = l.value.find((se) => se.title === F);
        Y && N(Y);
      } else r.value && (r.value.value = "");
    }
    return nt(C, () => {
      if (!e.hideSelected && C.value && u.value.length) {
        const F = y.value.findIndex((Y) => u.value.some((se) => (e.valueComparator || fr)(se.value, Y.value)));
        vn && window.requestAnimationFrame(() => {
          F >= 0 && o.value?.scrollToIndex(F);
        });
      }
    }), nt(() => e.items, (F, Y) => {
      C.value || v.value && !Y.length && F.length && (C.value = !0);
    }), Ge(() => {
      const F = !!(e.chips || n.chip), Y = !!(!e.hideNoData || y.value.length || n["prepend-item"] || n["append-item"] || n["no-data"]), se = u.value.length > 0, X = os.filterProps(e), he = se || !v.value && e.label && !e.persistentPlaceholder ? void 0 : e.placeholder;
      return h(os, He({
        ref: r
      }, X, {
        modelValue: u.value.map((ve) => ve.props.value).join(", "),
        "onUpdate:modelValue": Z,
        focused: v.value,
        "onUpdate:focused": (ve) => v.value = ve,
        validationValue: u.externalValue,
        counterValue: f.value,
        dirty: se,
        class: ["v-select", {
          "v-select--active-menu": C.value,
          "v-select--chips": !!e.chips,
          [`v-select--${e.multiple ? "multiple" : "single"}`]: !0,
          "v-select--selected": u.value.length,
          "v-select--selection-slot": !!n.selection
        }, e.class],
        style: e.style,
        inputmode: "none",
        placeholder: he,
        "onClick:clear": P,
        "onMousedown:control": I,
        onBlur: q,
        onKeydown: V,
        "aria-label": a(B.value),
        title: a(B.value)
      }), {
        ...n,
        default: () => A(Qe, null, [h(Ru, He({
          ref: i,
          modelValue: C.value,
          "onUpdate:modelValue": (ve) => C.value = ve,
          activator: "parent",
          contentClass: "v-select__content",
          disabled: S.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: j,
          onAfterLeave: ee
        }, O.value), {
          default: () => [Y && h(Sp, He({
            ref: D,
            selected: g.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (ve) => ve.preventDefault(),
            onKeydown: M,
            onFocusin: de,
            tabindex: "-1",
            "aria-live": "polite",
            "aria-label": `${e.label}-list`,
            color: e.itemColor ?? e.color
          }, T, e.listProps), {
            default: () => [n["prepend-item"]?.(), !y.value.length && !e.hideNoData && (n["no-data"]?.() ?? h(is, {
              key: "no-data",
              title: a(e.noDataText)
            }, null)), h(Ap, {
              ref: o,
              renderless: !0,
              items: y.value,
              itemKey: "value"
            }, {
              default: (ve) => {
                let {
                  item: pe,
                  index: H,
                  itemRef: we
                } = ve;
                const Me = y3(pe.props), Re = He(pe.props, {
                  ref: we,
                  key: pe.value,
                  onClick: () => N(pe, null)
                });
                return n.item?.({
                  item: pe,
                  index: H,
                  props: Re
                }) ?? h(is, He(Re, {
                  role: "option"
                }), {
                  prepend: (ce) => {
                    let {
                      isSelected: te
                    } = ce;
                    return A(Qe, null, [e.multiple && !e.hideSelected ? h(rs, {
                      key: pe.value,
                      modelValue: te,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, Me.prependAvatar && h(Ei, {
                      image: Me.prependAvatar
                    }, null), Me.prependIcon && h(pn, {
                      icon: Me.prependIcon
                    }, null)]);
                  }
                });
              }
            }), n["append-item"]?.()]
          })]
        }), u.value.map((ve, pe) => {
          function H(ce) {
            ce.stopPropagation(), ce.preventDefault(), N(ve, !1);
          }
          const we = {
            "onClick:close": H,
            onKeydown(ce) {
              ce.key !== "Enter" && ce.key !== " " || (ce.preventDefault(), ce.stopPropagation(), H(ce));
            },
            onMousedown(ce) {
              ce.preventDefault(), ce.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, Me = F ? !!n.chip : !!n.selection, Re = Me ? ip(F ? n.chip({
            item: ve,
            index: pe,
            props: we
          }) : n.selection({
            item: ve,
            index: pe
          })) : void 0;
          if (!(Me && !Re))
            return A("div", {
              key: ve.value,
              class: "v-select__selection"
            }, [F ? n.chip ? h(Wt, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: ve.title
                }
              }
            }, {
              default: () => [Re]
            }) : h(ed, He({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: ve.title,
              disabled: ve.props.disabled
            }, we), null) : Re ?? A("span", {
              class: "v-select__selection-text"
            }, [ve.title, e.multiple && pe < u.value.length - 1 && A("span", {
              class: "v-select__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var ve = arguments.length, pe = new Array(ve), H = 0; H < ve; H++)
            pe[H] = arguments[H];
          return A(Qe, null, [n["append-inner"]?.(...pe), e.menuIcon ? h(pn, {
            class: "v-select__menu-icon",
            color: r.value?.fieldIconColor,
            icon: e.menuIcon
          }, null) : void 0]);
        }
      });
    }), pi({
      isFocused: v,
      menu: C,
      select: N
    }, r);
  }
}), bW = (e, t, n) => {
  if (e == null || t == null) return -1;
  if (!t.length) return 0;
  e = e.toString().toLocaleLowerCase(), t = t.toString().toLocaleLowerCase();
  const a = [];
  let r = e.indexOf(t);
  for (; ~r; )
    a.push([r, r + t.length]), r = e.indexOf(t, r + t.length);
  return a.length ? a : -1;
};
function my(e, t) {
  if (!(e == null || typeof e == "boolean" || e === -1))
    return typeof e == "number" ? [[e, e + t.length]] : Array.isArray(e[0]) ? e : [e];
}
const im = De({
  customFilter: Function,
  customKeyFilter: Object,
  filterKeys: [Array, String],
  filterMode: {
    type: String,
    default: "intersection"
  },
  noFilter: Boolean
}, "filter");
function wW(e, t, n) {
  const a = [], r = n?.default ?? bW, i = n?.filterKeys ? Zn(n.filterKeys) : !1, o = Object.keys(n?.customKeyFilter ?? {}).length;
  if (!e?.length) return a;
  e: for (let l = 0; l < e.length; l++) {
    const [s, d = s] = Zn(e[l]), u = {}, f = {};
    let _ = -1;
    if ((t || o > 0) && !n?.noFilter) {
      if (typeof s == "object") {
        const w = i || Object.keys(d);
        for (const b of w) {
          const p = Da(d, b), y = n?.customKeyFilter?.[b];
          if (_ = y ? y(p, t, s) : r(p, t, s), _ !== -1 && _ !== !1)
            y ? u[b] = my(_, t) : f[b] = my(_, t);
          else if (n?.filterMode === "every")
            continue e;
        }
      } else
        _ = r(s, t, s), _ !== -1 && _ !== !1 && (f.title = my(_, t));
      const g = Object.keys(f).length, v = Object.keys(u).length;
      if (!g && !v || n?.filterMode === "union" && v !== o && !g || n?.filterMode === "intersection" && (v !== o || !g)) continue;
    }
    a.push({
      index: l,
      matches: {
        ...f,
        ...u
      }
    });
  }
  return a;
}
function om(e, t, n, a) {
  const r = ot([]), i = ot(/* @__PURE__ */ new Map()), o = z(() => a?.transform ? fe(t).map((s) => [s, a.transform(s)]) : fe(t));
  ea(() => {
    const s = typeof n == "function" ? n() : fe(n), d = typeof s != "string" && typeof s != "number" ? "" : String(s), u = wW(o.value, d, {
      customKeyFilter: {
        ...e.customKeyFilter,
        ...fe(a?.customKeyFilter)
      },
      default: e.customFilter,
      filterKeys: e.filterKeys,
      filterMode: e.filterMode,
      noFilter: e.noFilter
    }), f = fe(t), _ = [], g = /* @__PURE__ */ new Map();
    u.forEach((v) => {
      let {
        index: w,
        matches: b
      } = v;
      const p = f[w];
      _.push(p), g.set(p.value, b);
    }), r.value = _, i.value = g;
  });
  function l(s) {
    return i.value.get(s.value);
  }
  return {
    filteredItems: r,
    filteredMatches: i,
    getMatches: l
  };
}
function SP(e, t, n) {
  return n == null || !n.length ? t : n.map((a, r) => {
    const i = r === 0 ? 0 : n[r - 1][1], o = [A("span", {
      class: Ee(`${e}__unmask`)
    }, [t.slice(i, a[0])]), A("span", {
      class: Ee(`${e}__mask`)
    }, [t.slice(a[0], a[1])])];
    return r === n.length - 1 && o.push(A("span", {
      class: Ee(`${e}__unmask`)
    }, [t.slice(a[1])])), A(Qe, null, [o]);
  });
}
const kW = De({
  autoSelectFirst: {
    type: [Boolean, String]
  },
  clearOnSelect: Boolean,
  search: String,
  ...im({
    filterKeys: ["title"]
  }),
  ...M0(),
  ...la(rm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...Gi({
    transition: !1
  })
}, "VAutocomplete"), SW = We()({
  name: "VAutocomplete",
  props: kW(),
  emits: {
    "update:focused": (e) => !0,
    "update:search": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), r = Se(), i = ot(!1), o = ot(!0), l = ot(!1), s = Se(), d = Se(), u = ot(-1), {
      items: f,
      transformIn: _,
      transformOut: g
    } = E0(e), {
      textColorClasses: v,
      textColorStyles: w
    } = mr(() => r.value?.color), b = kt(e, "search", ""), p = kt(e, "modelValue", [], (Re) => _(Re === null ? [null] : Zn(Re)), (Re) => {
      const ce = g(Re);
      return e.multiple ? ce : ce[0] ?? null;
    }), y = z(() => typeof e.counterValue == "function" ? e.counterValue(p.value) : typeof e.counterValue == "number" ? e.counterValue : p.value.length), S = tm(e), {
      filteredItems: E,
      getMatches: C
    } = om(e, f, () => o.value ? "" : b.value), B = z(() => e.hideSelected ? E.value.filter((Re) => !p.value.some((ce) => ce.value === Re.value)) : E.value), O = z(() => !!(e.chips || n.chip)), D = z(() => O.value || !!n.selection), T = z(() => p.value.map((Re) => Re.props.value)), P = z(() => (e.autoSelectFirst === !0 || e.autoSelectFirst === "exact" && b.value === B.value[0]?.title) && B.value.length > 0 && !o.value && !l.value), I = z(() => e.hideNoData && !B.value.length || S.isReadonly.value || S.isDisabled.value), M = kt(e, "menu"), V = z({
      get: () => M.value,
      set: (Re) => {
        M.value && !Re && s.value?.ΨopenChildren.size || Re && I.value || (M.value = Re);
      }
    }), N = z(() => V.value ? e.closeText : e.openText), q = Se(), j = V0(q, r);
    function ee(Re) {
      e.openOnClear && (V.value = !0), b.value = "";
    }
    function de() {
      I.value || (V.value = !0);
    }
    function Z(Re) {
      I.value || (i.value && (Re.preventDefault(), Re.stopPropagation()), V.value = !V.value);
    }
    function F(Re) {
      Re.key !== " " && Cu(Re) && r.value?.focus();
    }
    function Y(Re) {
      if (S.isReadonly.value) return;
      const ce = r.value?.selectionStart, te = p.value.length;
      if (["Enter", "ArrowDown", "ArrowUp"].includes(Re.key) && Re.preventDefault(), ["Enter", "ArrowDown"].includes(Re.key) && (V.value = !0), ["Escape"].includes(Re.key) && (V.value = !1), P.value && ["Enter", "Tab"].includes(Re.key) && !p.value.some((G) => {
        let {
          value: le
        } = G;
        return le === B.value[0].value;
      }) && Me(B.value[0]), Re.key === "ArrowDown" && P.value && q.value?.focus("next"), ["Backspace", "Delete"].includes(Re.key)) {
        if (!e.multiple && D.value && p.value.length > 0 && !b.value) return Me(p.value[0], !1);
        if (~u.value) {
          Re.preventDefault();
          const G = u.value;
          Me(p.value[u.value], !1), u.value = G >= te - 1 ? te - 2 : G;
        } else Re.key === "Backspace" && !b.value && (u.value = te - 1);
        return;
      }
      if (e.multiple)
        if (Re.key === "ArrowLeft") {
          if (u.value < 0 && ce && ce > 0) return;
          const G = u.value > -1 ? u.value - 1 : te - 1;
          if (p.value[G])
            u.value = G;
          else {
            const le = b.value?.length ?? null;
            u.value = -1, r.value?.setSelectionRange(le, le);
          }
        } else if (Re.key === "ArrowRight") {
          if (u.value < 0) return;
          const G = u.value + 1;
          p.value[G] ? u.value = G : (u.value = -1, r.value?.setSelectionRange(0, 0));
        } else ~u.value && Cu(Re) && (u.value = -1);
    }
    function se(Re) {
      if (Su(r.value, ":autofill") || Su(r.value, ":-webkit-autofill")) {
        const ce = f.value.find((te) => te.title === Re.target.value);
        ce && Me(ce);
      }
    }
    function X() {
      e.eager && d.value?.calculateVisibleItems();
    }
    function he() {
      i.value && (o.value = !0, r.value?.focus());
    }
    function ve(Re) {
      i.value = !0, setTimeout(() => {
        l.value = !0;
      });
    }
    function pe(Re) {
      l.value = !1;
    }
    function H(Re) {
      (Re == null || Re === "" && !e.multiple && !D.value) && (p.value = []);
    }
    const we = ot(!1);
    function Me(Re) {
      let ce = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!(!Re || Re.props.disabled))
        if (e.multiple) {
          const te = p.value.findIndex((le) => (e.valueComparator || fr)(le.value, Re.value)), G = ce ?? !~te;
          if (~te) {
            const le = G ? [...p.value, Re] : [...p.value];
            le.splice(te, 1), p.value = le;
          } else G && (p.value = [...p.value, Re]);
          e.clearOnSelect && (b.value = "");
        } else {
          const te = ce !== !1;
          p.value = te ? [Re] : [], b.value = te && !D.value ? Re.title : "", Vt(() => {
            V.value = !1, o.value = !0;
          });
        }
    }
    return nt(i, (Re, ce) => {
      Re !== ce && (Re ? (we.value = !0, b.value = e.multiple || D.value ? "" : String(p.value.at(-1)?.props.title ?? ""), o.value = !0, Vt(() => we.value = !1)) : (!e.multiple && b.value == null && (p.value = []), V.value = !1, (e.multiple || D.value) && (b.value = ""), u.value = -1));
    }), nt(b, (Re) => {
      !i.value || we.value || (Re && (V.value = !0), o.value = !Re);
    }), nt(V, () => {
      if (!e.hideSelected && V.value && p.value.length) {
        const Re = B.value.findIndex((ce) => p.value.some((te) => ce.value === te.value));
        vn && window.requestAnimationFrame(() => {
          Re >= 0 && d.value?.scrollToIndex(Re);
        });
      }
    }), nt(() => e.items, (Re, ce) => {
      V.value || i.value && !ce.length && Re.length && (V.value = !0);
    }), Ge(() => {
      const Re = !!(!e.hideNoData || B.value.length || n["prepend-item"] || n["append-item"] || n["no-data"]), ce = p.value.length > 0, te = os.filterProps(e);
      return h(os, He({
        ref: r
      }, te, {
        modelValue: b.value,
        "onUpdate:modelValue": [(G) => b.value = G, H],
        focused: i.value,
        "onUpdate:focused": (G) => i.value = G,
        validationValue: p.externalValue,
        counterValue: y.value,
        dirty: ce,
        onChange: se,
        class: ["v-autocomplete", `v-autocomplete--${e.multiple ? "multiple" : "single"}`, {
          "v-autocomplete--active-menu": V.value,
          "v-autocomplete--chips": !!e.chips,
          "v-autocomplete--selection-slot": !!D.value,
          "v-autocomplete--selecting-index": u.value > -1
        }, e.class],
        style: e.style,
        readonly: S.isReadonly.value,
        placeholder: ce ? void 0 : e.placeholder,
        "onClick:clear": ee,
        "onMousedown:control": de,
        onKeydown: Y
      }), {
        ...n,
        default: () => A(Qe, null, [h(Ru, He({
          ref: s,
          modelValue: V.value,
          "onUpdate:modelValue": (G) => V.value = G,
          activator: "parent",
          contentClass: "v-autocomplete__content",
          disabled: I.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: X,
          onAfterLeave: he
        }, e.menuProps), {
          default: () => [Re && h(Sp, He({
            ref: q,
            selected: T.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (G) => G.preventDefault(),
            onKeydown: F,
            onFocusin: ve,
            onFocusout: pe,
            tabindex: "-1",
            "aria-live": "polite",
            color: e.itemColor ?? e.color
          }, j, e.listProps), {
            default: () => [n["prepend-item"]?.(), !B.value.length && !e.hideNoData && (n["no-data"]?.() ?? h(is, {
              key: "no-data",
              title: a(e.noDataText)
            }, null)), h(Ap, {
              ref: d,
              renderless: !0,
              items: B.value,
              itemKey: "value"
            }, {
              default: (G) => {
                let {
                  item: le,
                  index: K,
                  itemRef: Ce
                } = G;
                const Te = He(le.props, {
                  ref: Ce,
                  key: le.value,
                  active: P.value && K === 0 ? !0 : void 0,
                  onClick: () => Me(le, null)
                });
                return n.item?.({
                  item: le,
                  index: K,
                  props: Te
                }) ?? h(is, He(Te, {
                  role: "option"
                }), {
                  prepend: (ie) => {
                    let {
                      isSelected: ge
                    } = ie;
                    return A(Qe, null, [e.multiple && !e.hideSelected ? h(rs, {
                      key: le.value,
                      modelValue: ge,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, le.props.prependAvatar && h(Ei, {
                      image: le.props.prependAvatar
                    }, null), le.props.prependIcon && h(pn, {
                      icon: le.props.prependIcon
                    }, null)]);
                  },
                  title: () => o.value ? le.title : SP("v-autocomplete", le.title, C(le)?.title)
                });
              }
            }), n["append-item"]?.()]
          })]
        }), p.value.map((G, le) => {
          function K(ge) {
            ge.stopPropagation(), ge.preventDefault(), Me(G, !1);
          }
          const Ce = {
            "onClick:close": K,
            onKeydown(ge) {
              ge.key !== "Enter" && ge.key !== " " || (ge.preventDefault(), ge.stopPropagation(), K(ge));
            },
            onMousedown(ge) {
              ge.preventDefault(), ge.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, Te = O.value ? !!n.chip : !!n.selection, ie = Te ? ip(O.value ? n.chip({
            item: G,
            index: le,
            props: Ce
          }) : n.selection({
            item: G,
            index: le
          })) : void 0;
          if (!(Te && !ie))
            return A("div", {
              key: G.value,
              class: Ee(["v-autocomplete__selection", le === u.value && ["v-autocomplete__selection--selected", v.value]]),
              style: Xe(le === u.value ? w.value : {})
            }, [O.value ? n.chip ? h(Wt, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: G.title
                }
              }
            }, {
              default: () => [ie]
            }) : h(ed, He({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: G.title,
              disabled: G.props.disabled
            }, Ce), null) : ie ?? A("span", {
              class: "v-autocomplete__selection-text"
            }, [G.title, e.multiple && le < p.value.length - 1 && A("span", {
              class: "v-autocomplete__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var G = arguments.length, le = new Array(G), K = 0; K < G; K++)
            le[K] = arguments[K];
          return A(Qe, null, [n["append-inner"]?.(...le), e.menuIcon ? h(pn, {
            class: "v-autocomplete__menu-icon",
            color: r.value?.fieldIconColor,
            icon: e.menuIcon,
            onMousedown: Z,
            onClick: CT,
            "aria-label": a(N.value),
            title: a(N.value),
            tabindex: "-1"
          }, null) : void 0]);
        }
      });
    }), pi({
      isFocused: i,
      isPristine: o,
      menu: V,
      search: b,
      filteredItems: E,
      select: Me
    }, r);
  }
}), CW = De({
  bordered: Boolean,
  color: String,
  content: [Number, String],
  dot: Boolean,
  floating: Boolean,
  icon: At,
  inline: Boolean,
  label: {
    type: String,
    default: "$vuetify.badge"
  },
  max: [Number, String],
  modelValue: {
    type: Boolean,
    default: !0
  },
  offsetX: [Number, String],
  offsetY: [Number, String],
  textColor: String,
  ...vt(),
  ...us({
    location: "top end"
  }),
  ...Hn(),
  ...qt(),
  ...an(),
  ...Gi({
    transition: "scale-rotate-transition"
  })
}, "VBadge"), AW = We()({
  name: "VBadge",
  inheritAttrs: !1,
  props: CW(),
  setup(e, t) {
    const {
      backgroundColorClasses: n,
      backgroundColorStyles: a
    } = An(() => e.color), {
      roundedClasses: r
    } = fa(e), {
      t: i
    } = ua(), {
      textColorClasses: o,
      textColorStyles: l
    } = mr(() => e.textColor), {
      themeClasses: s
    } = Vw(), {
      locationStyles: d
    } = gc(e, !0, (u) => (e.floating ? e.dot ? 2 : 4 : e.dot ? 8 : 12) + (["top", "bottom"].includes(u) ? Number(e.offsetY ?? 0) : ["left", "right"].includes(u) ? Number(e.offsetX ?? 0) : 0));
    return Ge(() => {
      const u = Number(e.content), f = !e.max || isNaN(u) ? e.content : u <= Number(e.max) ? u : `${e.max}+`, [_, g] = Fy(t.attrs, ["aria-atomic", "aria-label", "aria-live", "role", "title"]);
      return h(e.tag, He({
        class: ["v-badge", {
          "v-badge--bordered": e.bordered,
          "v-badge--dot": e.dot,
          "v-badge--floating": e.floating,
          "v-badge--inline": e.inline
        }, e.class]
      }, g, {
        style: e.style
      }), {
        default: () => [A("div", {
          class: "v-badge__wrapper"
        }, [t.slots.default?.(), h(Sr, {
          transition: e.transition
        }, {
          default: () => [ln(A("span", He({
            class: ["v-badge__badge", s.value, n.value, r.value, o.value],
            style: [a.value, l.value, e.inline ? {} : d.value],
            "aria-atomic": "true",
            "aria-label": i(e.label, u),
            "aria-live": "polite",
            role: "status"
          }, _), [e.dot ? void 0 : t.slots.badge ? t.slots.badge?.() : e.icon ? h(pn, {
            icon: e.icon
          }, null) : f]), [[Sa, e.modelValue]])]
        })])]
      });
    }), {};
  }
}), xW = De({
  color: String,
  density: String,
  ...vt()
}, "VBannerActions"), CP = We()({
  name: "VBannerActions",
  props: xW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return ca({
      VBtn: {
        color: e.color,
        density: e.density,
        slim: !0,
        variant: "text"
      }
    }), Ge(() => A("div", {
      class: Ee(["v-banner-actions", e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), AP = xo("v-banner-text"), TW = De({
  avatar: String,
  bgColor: String,
  color: String,
  icon: At,
  lines: String,
  stacked: Boolean,
  sticky: Boolean,
  text: String,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...cc({
    mobile: null
  }),
  ...za(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...qt(),
  ...an()
}, "VBanner"), IW = We()({
  name: "VBanner",
  props: TW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.bgColor), {
      borderClasses: i
    } = _i(e), {
      densityClasses: o
    } = Ar(e), {
      displayClasses: l,
      mobile: s
    } = mi(e), {
      dimensionStyles: d
    } = Fa(e), {
      elevationClasses: u
    } = ir(e), {
      locationStyles: f
    } = gc(e), {
      positionClasses: _
    } = Xu(e), {
      roundedClasses: g
    } = fa(e), {
      themeClasses: v
    } = yn(e), w = be(() => e.color), b = be(() => e.density);
    ca({
      VBannerActions: {
        color: w,
        density: b
      }
    }), Ge(() => {
      const p = !!(e.text || n.text), y = !!(e.avatar || e.icon), S = !!(y || n.prepend);
      return h(e.tag, {
        class: Ee(["v-banner", {
          "v-banner--stacked": e.stacked || s.value,
          "v-banner--sticky": e.sticky,
          [`v-banner--${e.lines}-line`]: !!e.lines
        }, v.value, a.value, i.value, o.value, l.value, u.value, _.value, g.value, e.class]),
        style: Xe([r.value, d.value, f.value, e.style]),
        role: "banner"
      }, {
        default: () => [S && A("div", {
          key: "prepend",
          class: "v-banner__prepend"
        }, [n.prepend ? h(Wt, {
          key: "prepend-defaults",
          disabled: !y,
          defaults: {
            VAvatar: {
              color: w.value,
              density: b.value,
              icon: e.icon,
              image: e.avatar
            }
          }
        }, n.prepend) : h(Ei, {
          key: "prepend-avatar",
          color: w.value,
          density: b.value,
          icon: e.icon,
          image: e.avatar
        }, null)]), A("div", {
          class: "v-banner__content"
        }, [p && h(AP, {
          key: "text"
        }, {
          default: () => [n.text?.() ?? e.text]
        }), n.default?.()]), n.actions && h(CP, {
          key: "actions"
        }, n.actions)]
      });
    });
  }
}), EW = De({
  baseColor: String,
  bgColor: String,
  color: String,
  grow: Boolean,
  mode: {
    type: String,
    validator: (e) => !e || ["horizontal", "shift"].includes(e)
  },
  height: {
    type: [Number, String],
    default: 56
  },
  active: {
    type: Boolean,
    default: !0
  },
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...Hn(),
  ...uc({
    name: "bottom-navigation"
  }),
  ...qt({
    tag: "header"
  }),
  ..._c({
    selectedClass: "v-btn--selected"
  }),
  ...an()
}, "VBottomNavigation"), PW = We()({
  name: "VBottomNavigation",
  props: EW(),
  emits: {
    "update:active": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = Vw(), {
      borderClasses: r
    } = _i(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.bgColor), {
      densityClasses: l
    } = Ar(e), {
      elevationClasses: s
    } = ir(e), {
      roundedClasses: d
    } = fa(e), {
      ssrBootStyles: u
    } = mc(), f = z(() => Number(e.height) - (e.density === "comfortable" ? 8 : 0) - (e.density === "compact" ? 16 : 0)), _ = kt(e, "active", e.active), {
      layoutItemStyles: g
    } = dc({
      id: e.name,
      order: z(() => parseInt(e.order, 10)),
      position: be(() => "bottom"),
      layoutSize: be(() => _.value ? f.value : 0),
      elementSize: f,
      active: _,
      absolute: be(() => e.absolute)
    });
    return ol(e, C0), ca({
      VBtn: {
        baseColor: be(() => e.baseColor),
        color: be(() => e.color),
        density: be(() => e.density),
        stacked: be(() => e.mode !== "horizontal"),
        variant: "text"
      }
    }, {
      scoped: !0
    }), Ge(() => h(e.tag, {
      class: Ee(["v-bottom-navigation", {
        "v-bottom-navigation--active": _.value,
        "v-bottom-navigation--grow": e.grow,
        "v-bottom-navigation--shift": e.mode === "shift"
      }, a.value, i.value, r.value, l.value, s.value, d.value, e.class]),
      style: Xe([o.value, g.value, {
        height: ht(f.value)
      }, u.value, e.style])
    }, {
      default: () => [n.default && A("div", {
        class: "v-bottom-navigation__content"
      }, [n.default()])]
    })), {};
  }
}), xP = De({
  fullscreen: Boolean,
  retainFocus: {
    type: Boolean,
    default: !0
  },
  scrollable: Boolean,
  ...nm({
    origin: "center center",
    scrollStrategy: "block",
    transition: {
      component: vp
    },
    zIndex: 2400
  })
}, "VDialog"), Ob = We()({
  name: "VDialog",
  props: xP(),
  emits: {
    "update:modelValue": (e) => !0,
    afterEnter: () => !0,
    afterLeave: () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), {
      scopeId: i
    } = yc(), o = Se();
    function l(u) {
      const f = u.relatedTarget, _ = u.target;
      if (f !== _ && o.value?.contentEl && // We're the topmost dialog
      o.value?.globalTop && // It isn't the document or the dialog body
      ![document, o.value.contentEl].includes(_) && // It isn't inside the dialog body
      !o.value.contentEl.contains(_)) {
        const g = hf(o.value.contentEl);
        if (!g.length) return;
        const v = g[0], w = g[g.length - 1];
        f === v ? w.focus() : v.focus();
      }
    }
    Ga(() => {
      document.removeEventListener("focusin", l);
    }), vn && nt(() => r.value && e.retainFocus, (u) => {
      u ? document.addEventListener("focusin", l) : document.removeEventListener("focusin", l);
    }, {
      immediate: !0
    });
    function s() {
      n("afterEnter"), (e.scrim || e.retainFocus) && o.value?.contentEl && !o.value.contentEl.contains(document.activeElement) && o.value.contentEl.focus({
        preventScroll: !0
      });
    }
    function d() {
      n("afterLeave");
    }
    return nt(r, async (u) => {
      u || (await Vt(), o.value.activatorEl?.focus({
        preventScroll: !0
      }));
    }), Ge(() => {
      const u = ko.filterProps(e), f = He({
        "aria-haspopup": "dialog"
      }, e.activatorProps), _ = He({
        tabindex: -1
      }, e.contentProps);
      return h(ko, He({
        ref: o,
        class: ["v-dialog", {
          "v-dialog--fullscreen": e.fullscreen,
          "v-dialog--scrollable": e.scrollable
        }, e.class],
        style: e.style
      }, u, {
        modelValue: r.value,
        "onUpdate:modelValue": (g) => r.value = g,
        "aria-modal": "true",
        activatorProps: f,
        contentProps: _,
        height: e.fullscreen ? void 0 : e.height,
        width: e.fullscreen ? void 0 : e.width,
        maxHeight: e.fullscreen ? void 0 : e.maxHeight,
        maxWidth: e.fullscreen ? void 0 : e.maxWidth,
        role: "dialog",
        onAfterEnter: s,
        onAfterLeave: d
      }, i), {
        activator: a.activator,
        default: function() {
          for (var g = arguments.length, v = new Array(g), w = 0; w < g; w++)
            v[w] = arguments[w];
          return h(Wt, {
            root: "VDialog"
          }, {
            default: () => [a.default?.(...v)]
          });
        }
      });
    }), pi({}, o);
  }
}), OW = De({
  inset: Boolean,
  ...xP({
    transition: "bottom-sheet-transition"
  })
}, "VBottomSheet"), DW = We()({
  name: "VBottomSheet",
  props: OW(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue");
    return Ge(() => {
      const r = Ob.filterProps(e);
      return h(Ob, He(r, {
        contentClass: ["v-bottom-sheet__content", e.contentClass],
        modelValue: a.value,
        "onUpdate:modelValue": (i) => a.value = i,
        class: ["v-bottom-sheet", {
          "v-bottom-sheet--inset": e.inset
        }, e.class],
        style: e.style
      }), n);
    }), {};
  }
}), BW = De({
  divider: [Number, String],
  ...vt()
}, "VBreadcrumbsDivider"), TP = We()({
  name: "VBreadcrumbsDivider",
  props: BW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => A("li", {
      "aria-hidden": "true",
      class: Ee(["v-breadcrumbs-divider", e.class]),
      style: Xe(e.style)
    }, [n?.default?.() ?? e.divider])), {};
  }
}), VW = De({
  active: Boolean,
  activeClass: String,
  activeColor: String,
  color: String,
  disabled: Boolean,
  title: String,
  ...vt(),
  ...Zf(),
  ...qt({
    tag: "li"
  })
}, "VBreadcrumbsItem"), IP = We()({
  name: "VBreadcrumbsItem",
  props: VW(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    const r = Xf(e, a), i = z(() => e.active || r.isActive?.value), {
      textColorClasses: o,
      textColorStyles: l
    } = mr(() => i.value ? e.activeColor : e.color);
    return Ge(() => h(e.tag, {
      class: Ee(["v-breadcrumbs-item", {
        "v-breadcrumbs-item--active": i.value,
        "v-breadcrumbs-item--disabled": e.disabled,
        [`${e.activeClass}`]: i.value && e.activeClass
      }, o.value, e.class]),
      style: Xe([l.value, e.style]),
      "aria-current": i.value ? "page" : void 0
    }, {
      default: () => [r.isLink.value ? A("a", He({
        class: "v-breadcrumbs-item--link",
        onClick: r.navigate
      }, r.linkProps), [n.default?.() ?? e.title]) : n.default?.() ?? e.title]
    })), {};
  }
}), MW = De({
  activeClass: String,
  activeColor: String,
  bgColor: String,
  color: String,
  disabled: Boolean,
  divider: {
    type: String,
    default: "/"
  },
  icon: At,
  items: {
    type: Array,
    default: () => []
  },
  ...vt(),
  ...Qa(),
  ...Hn(),
  ...qt({
    tag: "ul"
  })
}, "VBreadcrumbs"), RW = We()({
  name: "VBreadcrumbs",
  props: MW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.bgColor), {
      densityClasses: i
    } = Ar(e), {
      roundedClasses: o
    } = fa(e);
    ca({
      VBreadcrumbsDivider: {
        divider: be(() => e.divider)
      },
      VBreadcrumbsItem: {
        activeClass: be(() => e.activeClass),
        activeColor: be(() => e.activeColor),
        color: be(() => e.color),
        disabled: be(() => e.disabled)
      }
    });
    const l = z(() => e.items.map((s) => typeof s == "string" ? {
      item: {
        title: s
      },
      raw: s
    } : {
      item: s,
      raw: s
    }));
    return Ge(() => {
      const s = !!(n.prepend || e.icon);
      return h(e.tag, {
        class: Ee(["v-breadcrumbs", a.value, i.value, o.value, e.class]),
        style: Xe([r.value, e.style])
      }, {
        default: () => [s && A("li", {
          key: "prepend",
          class: "v-breadcrumbs__prepend"
        }, [n.prepend ? h(Wt, {
          key: "prepend-defaults",
          disabled: !e.icon,
          defaults: {
            VIcon: {
              icon: e.icon,
              start: !0
            }
          }
        }, n.prepend) : h(pn, {
          key: "prepend-icon",
          start: !0,
          icon: e.icon
        }, null)]), l.value.map((d, u, f) => {
          let {
            item: _,
            raw: g
          } = d;
          return A(Qe, null, [n.item?.({
            item: _,
            index: u
          }) ?? h(IP, He({
            key: u,
            disabled: u >= f.length - 1
          }, typeof _ == "string" ? {
            title: _
          } : _), {
            default: n.title ? () => n.title?.({
              item: _,
              index: u
            }) : void 0
          }), u < f.length - 1 && h(TP, null, {
            default: n.divider ? () => n.divider?.({
              item: g,
              index: u
            }) : void 0
          })]);
        }), n.default?.()]
      });
    }), {};
  }
}), EP = We()({
  name: "VCardActions",
  props: vt(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return ca({
      VBtn: {
        slim: !0,
        variant: "text"
      }
    }), Ge(() => A("div", {
      class: Ee(["v-card-actions", e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), LW = De({
  opacity: [Number, String],
  ...vt(),
  ...qt()
}, "VCardSubtitle"), PP = We()({
  name: "VCardSubtitle",
  props: LW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(e.tag, {
      class: Ee(["v-card-subtitle", e.class]),
      style: Xe([{
        "--v-card-subtitle-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), OP = xo("v-card-title"), FW = De({
  appendAvatar: String,
  appendIcon: At,
  prependAvatar: String,
  prependIcon: At,
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...vt(),
  ...Qa()
}, "VCardItem"), DP = We()({
  name: "VCardItem",
  props: FW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = !!(e.prependAvatar || e.prependIcon), r = !!(a || n.prepend), i = !!(e.appendAvatar || e.appendIcon), o = !!(i || n.append), l = !!(e.title != null || n.title), s = !!(e.subtitle != null || n.subtitle);
      return A("div", {
        class: Ee(["v-card-item", e.class]),
        style: Xe(e.style)
      }, [r && A("div", {
        key: "prepend",
        class: "v-card-item__prepend"
      }, [n.prepend ? h(Wt, {
        key: "prepend-defaults",
        disabled: !a,
        defaults: {
          VAvatar: {
            density: e.density,
            image: e.prependAvatar
          },
          VIcon: {
            density: e.density,
            icon: e.prependIcon
          }
        }
      }, n.prepend) : A(Qe, null, [e.prependAvatar && h(Ei, {
        key: "prepend-avatar",
        density: e.density,
        image: e.prependAvatar
      }, null), e.prependIcon && h(pn, {
        key: "prepend-icon",
        density: e.density,
        icon: e.prependIcon
      }, null)])]), A("div", {
        class: "v-card-item__content"
      }, [l && h(OP, {
        key: "title"
      }, {
        default: () => [n.title?.() ?? W(e.title)]
      }), s && h(PP, {
        key: "subtitle"
      }, {
        default: () => [n.subtitle?.() ?? W(e.subtitle)]
      }), n.default?.()]), o && A("div", {
        key: "append",
        class: "v-card-item__append"
      }, [n.append ? h(Wt, {
        key: "append-defaults",
        disabled: !i,
        defaults: {
          VAvatar: {
            density: e.density,
            image: e.appendAvatar
          },
          VIcon: {
            density: e.density,
            icon: e.appendIcon
          }
        }
      }, n.append) : A(Qe, null, [e.appendIcon && h(pn, {
        key: "append-icon",
        density: e.density,
        icon: e.appendIcon
      }, null), e.appendAvatar && h(Ei, {
        key: "append-avatar",
        density: e.density,
        image: e.appendAvatar
      }, null)])])]);
    }), {};
  }
}), NW = De({
  opacity: [Number, String],
  ...vt(),
  ...qt()
}, "VCardText"), BP = We()({
  name: "VCardText",
  props: NW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => h(e.tag, {
      class: Ee(["v-card-text", e.class]),
      style: Xe([{
        "--v-card-text-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), UW = De({
  appendAvatar: String,
  appendIcon: At,
  disabled: Boolean,
  flat: Boolean,
  hover: Boolean,
  image: String,
  link: {
    type: Boolean,
    default: void 0
  },
  prependAvatar: String,
  prependIcon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...La(),
  ...za(),
  ...bp(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...Zf(),
  ...qt(),
  ...an(),
  ...Pi({
    variant: "elevated"
  })
}, "VCard"), $W = We()({
  name: "VCard",
  directives: {
    vRipple: Cr
  },
  props: UW(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      borderClasses: i
    } = _i(e), {
      colorClasses: o,
      colorStyles: l,
      variantClasses: s
    } = hc(e), {
      densityClasses: d
    } = Ar(e), {
      dimensionStyles: u
    } = Fa(e), {
      elevationClasses: f
    } = ir(e), {
      loaderClasses: _
    } = Qf(e), {
      locationStyles: g
    } = gc(e), {
      positionClasses: v
    } = Xu(e), {
      roundedClasses: w
    } = fa(e), b = Xf(e, n);
    return Ge(() => {
      const p = e.link !== !1 && b.isLink.value, y = !e.disabled && e.link !== !1 && (e.link || b.isClickable.value), S = p ? "a" : e.tag, E = !!(a.title || e.title != null), C = !!(a.subtitle || e.subtitle != null), B = E || C, O = !!(a.append || e.appendAvatar || e.appendIcon), D = !!(a.prepend || e.prependAvatar || e.prependIcon), T = !!(a.image || e.image), P = B || D || O, I = !!(a.text || e.text != null);
      return ln(h(S, He({
        class: ["v-card", {
          "v-card--disabled": e.disabled,
          "v-card--flat": e.flat,
          "v-card--hover": e.hover && !(e.disabled || e.flat),
          "v-card--link": y
        }, r.value, i.value, o.value, d.value, f.value, _.value, v.value, w.value, s.value, e.class],
        style: [l.value, u.value, g.value, e.style],
        onClick: y && b.navigate,
        tabindex: e.disabled ? -1 : void 0
      }, b.linkProps), {
        default: () => [T && A("div", {
          key: "image",
          class: "v-card__image"
        }, [a.image ? h(Wt, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              cover: !0,
              src: e.image
            }
          }
        }, a.image) : h(as, {
          key: "image-img",
          cover: !0,
          src: e.image
        }, null)]), h(Jf, {
          name: "v-card",
          active: !!e.loading,
          color: typeof e.loading == "boolean" ? void 0 : e.loading
        }, {
          default: a.loader
        }), P && h(DP, {
          key: "item",
          prependAvatar: e.prependAvatar,
          prependIcon: e.prependIcon,
          title: e.title,
          subtitle: e.subtitle,
          appendAvatar: e.appendAvatar,
          appendIcon: e.appendIcon
        }, {
          default: a.item,
          prepend: a.prepend,
          title: a.title,
          subtitle: a.subtitle,
          append: a.append
        }), I && h(BP, {
          key: "text"
        }, {
          default: () => [a.text?.() ?? e.text]
        }), a.default?.(), a.actions && h(EP, null, {
          default: a.actions
        }), il(y, "v-card")]
      }), [[Cr, y && e.ripple]]);
    }), {};
  }
}), qW = (e) => {
  const {
    touchstartX: t,
    touchendX: n,
    touchstartY: a,
    touchendY: r
  } = e, i = 0.5, o = 16;
  e.offsetX = n - t, e.offsetY = r - a, Math.abs(e.offsetY) < i * Math.abs(e.offsetX) && (e.left && n < t - o && e.left(e), e.right && n > t + o && e.right(e)), Math.abs(e.offsetX) < i * Math.abs(e.offsetY) && (e.up && r < a - o && e.up(e), e.down && r > a + o && e.down(e));
};
function HW(e, t) {
  const n = e.changedTouches[0];
  t.touchstartX = n.clientX, t.touchstartY = n.clientY, t.start?.({
    originalEvent: e,
    ...t
  });
}
function zW(e, t) {
  const n = e.changedTouches[0];
  t.touchendX = n.clientX, t.touchendY = n.clientY, t.end?.({
    originalEvent: e,
    ...t
  }), qW(t);
}
function WW(e, t) {
  const n = e.changedTouches[0];
  t.touchmoveX = n.clientX, t.touchmoveY = n.clientY, t.move?.({
    originalEvent: e,
    ...t
  });
}
function jW() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const t = {
    touchstartX: 0,
    touchstartY: 0,
    touchendX: 0,
    touchendY: 0,
    touchmoveX: 0,
    touchmoveY: 0,
    offsetX: 0,
    offsetY: 0,
    left: e.left,
    right: e.right,
    up: e.up,
    down: e.down,
    start: e.start,
    move: e.move,
    end: e.end
  };
  return {
    touchstart: (n) => HW(n, t),
    touchend: (n) => zW(n, t),
    touchmove: (n) => WW(n, t)
  };
}
function YW(e, t) {
  const n = t.value, a = n?.parent ? e.parentElement : e, r = n?.options ?? {
    passive: !0
  }, i = t.instance?.$.uid;
  if (!a || !i) return;
  const o = jW(t.value);
  a._touchHandlers = a._touchHandlers ?? /* @__PURE__ */ Object.create(null), a._touchHandlers[i] = o, gT(o).forEach((l) => {
    a.addEventListener(l, o[l], r);
  });
}
function KW(e, t) {
  const n = t.value?.parent ? e.parentElement : e, a = t.instance?.$.uid;
  if (!n?._touchHandlers || !a) return;
  const r = n._touchHandlers[a];
  gT(r).forEach((i) => {
    n.removeEventListener(i, r[i]);
  }), delete n._touchHandlers[a];
}
const U_ = {
  mounted: YW,
  unmounted: KW
}, VP = Symbol.for("vuetify:v-window"), MP = Symbol.for("vuetify:v-window-group"), xp = De({
  continuous: Boolean,
  nextIcon: {
    type: [Boolean, String, Function, Object],
    default: "$next"
  },
  prevIcon: {
    type: [Boolean, String, Function, Object],
    default: "$prev"
  },
  reverse: Boolean,
  showArrows: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || e === "hover"
  },
  touch: {
    type: [Object, Boolean],
    default: void 0
  },
  direction: {
    type: String,
    default: "horizontal"
  },
  modelValue: null,
  disabled: Boolean,
  selectedClass: {
    type: String,
    default: "v-window-item--active"
  },
  // TODO: mandatory should probably not be exposed but do this for now
  mandatory: {
    type: [Boolean, String],
    default: "force"
  },
  ...vt(),
  ...qt(),
  ...an()
}, "VWindow"), ac = We()({
  name: "VWindow",
  directives: {
    vTouch: U_
  },
  props: xp(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      isRtl: r
    } = Ra(), {
      t: i
    } = ua(), o = ol(e, MP), l = Se(), s = z(() => r.value ? !e.reverse : e.reverse), d = ot(!1), u = z(() => {
      const E = e.direction === "vertical" ? "y" : "x", B = (s.value ? !d.value : d.value) ? "-reverse" : "";
      return `v-window-${E}${B}-transition`;
    }), f = ot(0), _ = Se(void 0), g = z(() => o.items.value.findIndex((E) => o.selected.value.includes(E.id)));
    nt(g, (E, C) => {
      const B = o.items.value.length, O = B - 1;
      B <= 2 ? d.value = E < C : E === O && C === 0 ? d.value = !0 : E === 0 && C === O ? d.value = !1 : d.value = E < C;
    }), Nn(VP, {
      transition: u,
      isReversed: d,
      transitionCount: f,
      transitionHeight: _,
      rootRef: l
    });
    const v = be(() => e.continuous || g.value !== 0), w = be(() => e.continuous || g.value !== o.items.value.length - 1);
    function b() {
      v.value && o.prev();
    }
    function p() {
      w.value && o.next();
    }
    const y = z(() => {
      const E = [], C = {
        icon: r.value ? e.nextIcon : e.prevIcon,
        class: `v-window__${s.value ? "right" : "left"}`,
        onClick: o.prev,
        "aria-label": i("$vuetify.carousel.prev")
      };
      E.push(v.value ? n.prev ? n.prev({
        props: C
      }) : h(cn, C, null) : A("div", null, null));
      const B = {
        icon: r.value ? e.prevIcon : e.nextIcon,
        class: `v-window__${s.value ? "left" : "right"}`,
        onClick: o.next,
        "aria-label": i("$vuetify.carousel.next")
      };
      return E.push(w.value ? n.next ? n.next({
        props: B
      }) : h(cn, B, null) : A("div", null, null)), E;
    }), S = z(() => e.touch === !1 ? e.touch : {
      ...{
        left: () => {
          s.value ? b() : p();
        },
        right: () => {
          s.value ? p() : b();
        },
        start: (C) => {
          let {
            originalEvent: B
          } = C;
          B.stopPropagation();
        }
      },
      ...e.touch === !0 ? {} : e.touch
    });
    return Ge(() => ln(h(e.tag, {
      ref: l,
      class: Ee(["v-window", {
        "v-window--show-arrows-on-hover": e.showArrows === "hover"
      }, a.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [A("div", {
        class: "v-window__container",
        style: {
          height: _.value
        }
      }, [n.default?.({
        group: o
      }), e.showArrows !== !1 && A("div", {
        class: "v-window__controls"
      }, [y.value])]), n.additional?.({
        group: o
      })]
    }), [[U_, S.value]])), {
      group: o
    };
  }
}), GW = De({
  color: String,
  cycle: Boolean,
  delimiterIcon: {
    type: At,
    default: "$delimiter"
  },
  height: {
    type: [Number, String],
    default: 500
  },
  hideDelimiters: Boolean,
  hideDelimiterBackground: Boolean,
  interval: {
    type: [Number, String],
    default: 6e3,
    validator: (e) => Number(e) > 0
  },
  progress: [Boolean, String],
  verticalDelimiters: [Boolean, String],
  ...xp({
    continuous: !0,
    mandatory: "force",
    showArrows: !0
  })
}, "VCarousel"), QW = We()({
  name: "VCarousel",
  props: GW(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      t: r
    } = ua(), i = Se();
    let o = -1;
    nt(a, s), nt(() => e.interval, s), nt(() => e.cycle, (d) => {
      d ? s() : window.clearTimeout(o);
    }), nn(l);
    function l() {
      !e.cycle || !i.value || (o = window.setTimeout(i.value.group.next, Number(e.interval) > 0 ? Number(e.interval) : 6e3));
    }
    function s() {
      window.clearTimeout(o), window.requestAnimationFrame(l);
    }
    return Ge(() => {
      const d = ac.filterProps(e);
      return h(ac, He({
        ref: i
      }, d, {
        modelValue: a.value,
        "onUpdate:modelValue": (u) => a.value = u,
        class: ["v-carousel", {
          "v-carousel--hide-delimiter-background": e.hideDelimiterBackground,
          "v-carousel--vertical-delimiters": e.verticalDelimiters
        }, e.class],
        style: [{
          height: ht(e.height)
        }, e.style]
      }), {
        default: n.default,
        additional: (u) => {
          let {
            group: f
          } = u;
          return A(Qe, null, [!e.hideDelimiters && A("div", {
            class: "v-carousel__controls",
            style: {
              left: e.verticalDelimiters === "left" && e.verticalDelimiters ? 0 : "auto",
              right: e.verticalDelimiters === "right" ? 0 : "auto"
            }
          }, [f.items.value.length > 0 && h(Wt, {
            defaults: {
              VBtn: {
                color: e.color,
                icon: e.delimiterIcon,
                size: "x-small",
                variant: "text"
              }
            },
            scoped: !0
          }, {
            default: () => [f.items.value.map((_, g) => {
              const v = {
                id: `carousel-item-${_.id}`,
                "aria-label": r("$vuetify.carousel.ariaLabel.delimiter", g + 1, f.items.value.length),
                class: ["v-carousel__controls__item", f.isSelected(_.id) && "v-btn--active"],
                onClick: () => f.select(_.id, !0)
              };
              return n.item ? n.item({
                props: v,
                item: _
              }) : h(cn, He(_, v), null);
            })]
          })]), e.progress && h(yp, {
            class: "v-carousel__progress",
            color: typeof e.progress == "string" ? e.progress : void 0,
            modelValue: (f.getItemIndex(a.value) + 1) / f.items.value.length * 100
          }, null)]);
        },
        prev: n.prev,
        next: n.next
      });
    }), {};
  }
}), Tp = De({
  reverseTransition: {
    type: [Boolean, String],
    default: void 0
  },
  transition: {
    type: [Boolean, String],
    default: void 0
  },
  ...vt(),
  ...pc(),
  ...D0()
}, "VWindowItem"), rc = We()({
  name: "VWindowItem",
  directives: {
    vTouch: U_
  },
  props: Tp(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(VP), r = vc(e, MP), {
      isBooted: i
    } = mc();
    if (!a || !r) throw new Error("[Vuetify] VWindowItem must be used inside VWindow");
    const o = ot(!1), l = z(() => i.value && (a.isReversed.value ? e.reverseTransition !== !1 : e.transition !== !1));
    function s() {
      !o.value || !a || (o.value = !1, a.transitionCount.value > 0 && (a.transitionCount.value -= 1, a.transitionCount.value === 0 && (a.transitionHeight.value = void 0)));
    }
    function d() {
      o.value || !a || (o.value = !0, a.transitionCount.value === 0 && (a.transitionHeight.value = ht(a.rootRef.value?.clientHeight)), a.transitionCount.value += 1);
    }
    function u() {
      s();
    }
    function f(v) {
      o.value && Vt(() => {
        !l.value || !o.value || !a || (a.transitionHeight.value = ht(v.clientHeight));
      });
    }
    const _ = z(() => {
      const v = a.isReversed.value ? e.reverseTransition : e.transition;
      return l.value ? {
        name: typeof v != "string" ? a.transition.value : v,
        onBeforeEnter: d,
        onAfterEnter: s,
        onEnterCancelled: u,
        onBeforeLeave: d,
        onAfterLeave: s,
        onLeaveCancelled: u,
        onEnter: f
      } : !1;
    }), {
      hasContent: g
    } = B0(e, r.isSelected);
    return Ge(() => h(Sr, {
      transition: _.value,
      disabled: !i.value
    }, {
      default: () => [ln(A("div", {
        class: Ee(["v-window-item", r.selectedClass.value, e.class]),
        style: Xe(e.style)
      }, [g.value && n.default?.()]), [[Sa, r.isSelected.value]])]
    })), {
      groupItem: r
    };
  }
}), JW = De({
  ...CE(),
  ...Tp()
}, "VCarouselItem"), XW = We()({
  name: "VCarouselItem",
  inheritAttrs: !1,
  props: JW(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    Ge(() => {
      const r = as.filterProps(e), i = rc.filterProps(e);
      return h(rc, He({
        class: ["v-carousel-item", e.class]
      }, i), {
        default: () => [h(as, He(a, r), n)]
      });
    });
  }
}), ZW = xo("v-code", "code"), ej = De({
  color: {
    type: Object
  },
  disabled: Boolean,
  dotSize: {
    type: [Number, String],
    default: 10
  },
  height: {
    type: [Number, String],
    default: 150
  },
  width: {
    type: [Number, String],
    default: 300
  },
  ...vt()
}, "VColorPickerCanvas"), tj = fi({
  name: "VColorPickerCanvas",
  props: ej(),
  emits: {
    "update:color": (e) => !0,
    "update:position": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = ot(!1), r = Se(), i = ot(parseFloat(e.width)), o = ot(parseFloat(e.height)), l = Se({
      x: 0,
      y: 0
    }), s = z({
      get: () => l.value,
      set(b) {
        if (!r.value) return;
        const {
          x: p,
          y
        } = b;
        l.value = b, n("update:color", {
          h: e.color?.h ?? 0,
          s: Pn(p, 0, i.value) / i.value,
          v: 1 - Pn(y, 0, o.value) / o.value,
          a: e.color?.a ?? 1
        });
      }
    }), d = z(() => {
      const {
        x: b,
        y: p
      } = s.value, y = parseInt(e.dotSize, 10) / 2;
      return {
        width: ht(e.dotSize),
        height: ht(e.dotSize),
        transform: `translate(${ht(b - y)}, ${ht(p - y)})`
      };
    }), {
      resizeRef: u
    } = Wi((b) => {
      if (!u.el?.offsetParent) return;
      const {
        width: p,
        height: y
      } = b[0].contentRect;
      i.value = p, o.value = y;
    });
    function f(b, p, y) {
      const {
        left: S,
        top: E,
        width: C,
        height: B
      } = y;
      s.value = {
        x: Pn(b - S, 0, C),
        y: Pn(p - E, 0, B)
      };
    }
    function _(b) {
      b.type === "mousedown" && b.preventDefault(), !e.disabled && (g(b), window.addEventListener("mousemove", g), window.addEventListener("mouseup", v), window.addEventListener("touchmove", g), window.addEventListener("touchend", v));
    }
    function g(b) {
      if (e.disabled || !r.value) return;
      a.value = !0;
      const p = _3(b);
      f(p.clientX, p.clientY, r.value.getBoundingClientRect());
    }
    function v() {
      window.removeEventListener("mousemove", g), window.removeEventListener("mouseup", v), window.removeEventListener("touchmove", g), window.removeEventListener("touchend", v);
    }
    function w() {
      if (!r.value) return;
      const b = r.value, p = b.getContext("2d");
      if (!p) return;
      const y = p.createLinearGradient(0, 0, b.width, 0);
      y.addColorStop(0, "hsla(0, 0%, 100%, 1)"), y.addColorStop(1, `hsla(${e.color?.h ?? 0}, 100%, 50%, 1)`), p.fillStyle = y, p.fillRect(0, 0, b.width, b.height);
      const S = p.createLinearGradient(0, 0, 0, b.height);
      S.addColorStop(0, "hsla(0, 0%, 0%, 0)"), S.addColorStop(1, "hsla(0, 0%, 0%, 1)"), p.fillStyle = S, p.fillRect(0, 0, b.width, b.height);
    }
    return nt(() => e.color?.h, w, {
      immediate: !0
    }), nt(() => [i.value, o.value], (b, p) => {
      w(), l.value = {
        x: s.value.x * b[0] / p[0],
        y: s.value.y * b[1] / p[1]
      };
    }, {
      flush: "post"
    }), nt(() => e.color, () => {
      if (a.value) {
        a.value = !1;
        return;
      }
      l.value = e.color ? {
        x: e.color.s * i.value,
        y: (1 - e.color.v) * o.value
      } : {
        x: 0,
        y: 0
      };
    }, {
      deep: !0,
      immediate: !0
    }), nn(() => w()), Ge(() => A("div", {
      ref: u,
      class: Ee(["v-color-picker-canvas", e.class]),
      style: Xe(e.style),
      onMousedown: _,
      onTouchstartPassive: _
    }, [A("canvas", {
      ref: r,
      width: i.value,
      height: o.value
    }, null), e.color && A("div", {
      class: Ee(["v-color-picker-canvas__dot", {
        "v-color-picker-canvas__dot--disabled": e.disabled
      }]),
      style: Xe(d.value)
    }, null)])), {};
  }
});
function nj(e, t) {
  if (t) {
    const {
      a: n,
      ...a
    } = e;
    return a;
  }
  return e;
}
function aj(e, t) {
  if (t == null || typeof t == "string") {
    const n = e.a !== 1;
    if (t?.startsWith("rgb(")) {
      const {
        r,
        g: i,
        b: o,
        a: l
      } = bo(e);
      return `rgb(${r} ${i} ${o}` + (n ? ` / ${l})` : ")");
    } else if (t?.startsWith("hsl(")) {
      const {
        h: r,
        s: i,
        l: o,
        a: l
      } = qy(e);
      return `hsl(${r} ${Math.round(i * 100)} ${Math.round(o * 100)}` + (n ? ` / ${l})` : ")");
    }
    const a = MT(e);
    return e.a === 1 ? a.slice(0, 7) : a;
  }
  if (typeof t == "object") {
    let n;
    return Ll(t, ["r", "g", "b"]) ? n = bo(e) : Ll(t, ["h", "s", "l"]) ? n = qy(e) : Ll(t, ["h", "s", "v"]) && (n = e), nj(n, !Ll(t, ["a"]) && e.a === 1);
  }
  return e;
}
const ou = {
  h: 0,
  s: 0,
  v: 0,
  a: 1
}, Db = {
  inputProps: {
    type: "number",
    min: 0
  },
  inputs: [{
    label: "R",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.r),
    getColor: (e, t) => ({
      ...e,
      r: Number(t)
    })
  }, {
    label: "G",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.g),
    getColor: (e, t) => ({
      ...e,
      g: Number(t)
    })
  }, {
    label: "B",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.b),
    getColor: (e, t) => ({
      ...e,
      b: Number(t)
    })
  }, {
    label: "A",
    max: 1,
    step: 0.01,
    getValue: (e) => {
      let {
        a: t
      } = e;
      return t != null ? Math.round(t * 100) / 100 : 1;
    },
    getColor: (e, t) => ({
      ...e,
      a: Number(t)
    })
  }],
  to: bo,
  from: Ff
}, rj = {
  ...Db,
  inputs: Db.inputs?.slice(0, 3)
}, Bb = {
  inputProps: {
    type: "number",
    min: 0
  },
  inputs: [{
    label: "H",
    max: 360,
    step: 1,
    getValue: (e) => Math.round(e.h),
    getColor: (e, t) => ({
      ...e,
      h: Number(t)
    })
  }, {
    label: "S",
    max: 1,
    step: 0.01,
    getValue: (e) => Math.round(e.s * 100) / 100,
    getColor: (e, t) => ({
      ...e,
      s: Number(t)
    })
  }, {
    label: "L",
    max: 1,
    step: 0.01,
    getValue: (e) => Math.round(e.l * 100) / 100,
    getColor: (e, t) => ({
      ...e,
      l: Number(t)
    })
  }, {
    label: "A",
    max: 1,
    step: 0.01,
    getValue: (e) => {
      let {
        a: t
      } = e;
      return t != null ? Math.round(t * 100) / 100 : 1;
    },
    getColor: (e, t) => ({
      ...e,
      a: Number(t)
    })
  }],
  to: qy,
  from: Tw
}, ij = {
  ...Bb,
  inputs: Bb.inputs.slice(0, 3)
}, RP = {
  inputProps: {
    type: "text"
  },
  inputs: [{
    label: "HEXA",
    getValue: (e) => e,
    getColor: (e, t) => t
  }],
  to: MT,
  from: $3
}, oj = {
  ...RP,
  inputs: [{
    label: "HEX",
    getValue: (e) => e.slice(0, 7),
    getColor: (e, t) => t
  }]
}, Gl = {
  rgb: rj,
  rgba: Db,
  hsl: ij,
  hsla: Bb,
  hex: oj,
  hexa: RP
}, sj = (e) => {
  let {
    label: t,
    ...n
  } = e;
  return A("div", {
    class: "v-color-picker-edit__input"
  }, [A("input", Xn(Ca(n)), null), A("span", null, [t])]);
}, lj = De({
  color: Object,
  disabled: Boolean,
  mode: {
    type: String,
    default: "rgba",
    validator: (e) => Object.keys(Gl).includes(e)
  },
  modes: {
    type: Array,
    default: () => Object.keys(Gl),
    validator: (e) => Array.isArray(e) && e.every((t) => Object.keys(Gl).includes(t))
  },
  ...vt()
}, "VColorPickerEdit"), cj = fi({
  name: "VColorPickerEdit",
  props: lj(),
  emits: {
    "update:color": (e) => !0,
    "update:mode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = z(() => e.modes.map((i) => ({
      ...Gl[i],
      name: i
    }))), r = z(() => {
      const i = a.value.find((l) => l.name === e.mode);
      if (!i) return [];
      const o = e.color ? i.to(e.color) : null;
      return i.inputs?.map((l) => {
        let {
          getValue: s,
          getColor: d,
          ...u
        } = l;
        return {
          ...i.inputProps,
          ...u,
          disabled: e.disabled,
          value: o && s(o),
          onChange: (f) => {
            const _ = f.target;
            _ && n("update:color", i.from(d(o ?? i.to(ou), _.value)));
          }
        };
      });
    });
    return Ge(() => A("div", {
      class: Ee(["v-color-picker-edit", e.class]),
      style: Xe(e.style)
    }, [r.value?.map((i) => h(sj, i, null)), a.value.length > 1 && h(cn, {
      icon: "$unfold",
      size: "x-small",
      variant: "plain",
      onClick: () => {
        const i = a.value.findIndex((o) => o.name === e.mode);
        n("update:mode", a.value[(i + 1) % a.value.length].name);
      }
    }, null)])), {};
  }
}), L0 = Symbol.for("vuetify:v-slider");
function Vb(e, t, n) {
  const a = n === "vertical", r = t.getBoundingClientRect(), i = "touches" in e ? e.touches[0] : e;
  return a ? i.clientY - (r.top + r.height / 2) : i.clientX - (r.left + r.width / 2);
}
function uj(e, t) {
  return "touches" in e && e.touches.length ? e.touches[0][t] : "changedTouches" in e && e.changedTouches.length ? e.changedTouches[0][t] : e[t];
}
const LP = De({
  disabled: {
    type: Boolean,
    default: null
  },
  error: Boolean,
  readonly: {
    type: Boolean,
    default: null
  },
  max: {
    type: [Number, String],
    default: 100
  },
  min: {
    type: [Number, String],
    default: 0
  },
  step: {
    type: [Number, String],
    default: 0
  },
  thumbColor: String,
  thumbLabel: {
    type: [Boolean, String],
    default: void 0,
    validator: (e) => typeof e == "boolean" || e === "always"
  },
  thumbSize: {
    type: [Number, String],
    default: 20
  },
  showTicks: {
    type: [Boolean, String],
    default: !1,
    validator: (e) => typeof e == "boolean" || e === "always"
  },
  ticks: {
    type: [Array, Object]
  },
  tickSize: {
    type: [Number, String],
    default: 2
  },
  color: String,
  trackColor: String,
  trackFillColor: String,
  trackSize: {
    type: [Number, String],
    default: 4
  },
  direction: {
    type: String,
    default: "horizontal",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  reverse: Boolean,
  ...Hn(),
  ...za({
    elevation: 2
  }),
  ripple: {
    type: Boolean,
    default: !0
  }
}, "Slider"), FP = (e) => {
  const t = z(() => parseFloat(e.min)), n = z(() => parseFloat(e.max)), a = z(() => Number(e.step) > 0 ? parseFloat(e.step) : 0), r = z(() => Math.max(RS(a.value), RS(t.value)));
  function i(o) {
    if (o = parseFloat(o), a.value <= 0) return o;
    const l = Pn(o, t.value, n.value), s = t.value % a.value;
    let d = Math.round((l - s) / a.value) * a.value + s;
    return l > d && d + a.value > n.value && (d = n.value), parseFloat(Math.min(d, n.value).toFixed(r.value));
  }
  return {
    min: t,
    max: n,
    step: a,
    decimals: r,
    roundValue: i
  };
}, NP = (e) => {
  let {
    props: t,
    steps: n,
    onSliderStart: a,
    onSliderMove: r,
    onSliderEnd: i,
    getActiveThumb: o
  } = e;
  const {
    isRtl: l
  } = Ra(), s = be(() => t.reverse), d = z(() => t.direction === "vertical"), u = z(() => d.value !== s.value), {
    min: f,
    max: _,
    step: g,
    decimals: v,
    roundValue: w
  } = n, b = z(() => parseInt(t.thumbSize, 10)), p = z(() => parseInt(t.tickSize, 10)), y = z(() => parseInt(t.trackSize, 10)), S = z(() => (_.value - f.value) / g.value), E = be(() => t.disabled), C = z(() => t.error || t.disabled ? void 0 : t.thumbColor ?? t.color), B = z(() => t.error || t.disabled ? void 0 : t.trackColor ?? t.color), O = z(() => t.error || t.disabled ? void 0 : t.trackFillColor ?? t.color), D = ot(!1), T = ot(0), P = Se(), I = Se();
  function M(pe) {
    const H = P.value?.$el;
    if (!H) return;
    const we = t.direction === "vertical", Me = we ? "top" : "left", Re = we ? "height" : "width", ce = we ? "clientY" : "clientX", {
      [Me]: te,
      [Re]: G
    } = H.getBoundingClientRect(), le = uj(pe, ce);
    let K = Pn((le - te - T.value) / G) || 0;
    return (we ? u.value : u.value !== l.value) && (K = 1 - K), w(f.value + K * (_.value - f.value));
  }
  const V = (pe) => {
    const H = M(pe);
    H != null && i({
      value: H
    }), D.value = !1, T.value = 0;
  }, N = (pe) => {
    const H = M(pe);
    I.value = o(pe), I.value && (D.value = !0, I.value.contains(pe.target) ? T.value = Vb(pe, I.value, t.direction) : (T.value = 0, H != null && r({
      value: H
    })), H != null && a({
      value: H
    }), Vt(() => I.value?.focus()));
  }, q = {
    passive: !0,
    capture: !0
  };
  function j(pe) {
    const H = M(pe);
    H != null && r({
      value: H
    });
  }
  function ee(pe) {
    pe.stopPropagation(), pe.preventDefault(), V(pe), window.removeEventListener("mousemove", j, q), window.removeEventListener("mouseup", ee);
  }
  function de(pe) {
    V(pe), window.removeEventListener("touchmove", j, q), pe.target?.removeEventListener("touchend", de);
  }
  function Z(pe) {
    N(pe), window.addEventListener("touchmove", j, q), pe.target?.addEventListener("touchend", de, {
      passive: !1
    });
  }
  function F(pe) {
    pe.button === 0 && (pe.preventDefault(), N(pe), window.addEventListener("mousemove", j, q), window.addEventListener("mouseup", ee, {
      passive: !1
    }));
  }
  const Y = (pe) => {
    const H = (pe - f.value) / (_.value - f.value) * 100;
    return Pn(isNaN(H) ? 0 : H, 0, 100);
  }, se = be(() => t.showTicks), X = z(() => se.value ? t.ticks ? Array.isArray(t.ticks) ? t.ticks.map((pe) => ({
    value: pe,
    position: Y(pe),
    label: pe.toString()
  })) : Object.keys(t.ticks).map((pe) => ({
    value: parseFloat(pe),
    position: Y(parseFloat(pe)),
    label: t.ticks[pe]
  })) : S.value !== 1 / 0 ? ho(S.value + 1).map((pe) => {
    const H = f.value + pe * g.value;
    return {
      value: H,
      position: Y(H)
    };
  }) : [] : []), he = z(() => X.value.some((pe) => {
    let {
      label: H
    } = pe;
    return !!H;
  })), ve = {
    activeThumbRef: I,
    color: be(() => t.color),
    decimals: v,
    disabled: E,
    direction: be(() => t.direction),
    elevation: be(() => t.elevation),
    hasLabels: he,
    isReversed: s,
    indexFromEnd: u,
    min: f,
    max: _,
    mousePressed: D,
    numTicks: S,
    onSliderMousedown: F,
    onSliderTouchstart: Z,
    parsedTicks: X,
    parseMouseMove: M,
    position: Y,
    readonly: be(() => t.readonly),
    rounded: be(() => t.rounded),
    roundValue: w,
    showTicks: se,
    startOffset: T,
    step: g,
    thumbSize: b,
    thumbColor: C,
    thumbLabel: be(() => t.thumbLabel),
    ticks: be(() => t.ticks),
    tickSize: p,
    trackColor: B,
    trackContainerRef: P,
    trackFillColor: O,
    trackSize: y,
    vertical: d
  };
  return Nn(L0, ve), ve;
}, dj = De({
  focused: Boolean,
  max: {
    type: Number,
    required: !0
  },
  min: {
    type: Number,
    required: !0
  },
  modelValue: {
    type: Number,
    required: !0
  },
  position: {
    type: Number,
    required: !0
  },
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  name: String,
  ...vt()
}, "VSliderThumb"), Mb = We()({
  name: "VSliderThumb",
  directives: {
    vRipple: Cr
  },
  props: dj(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Gt(L0), {
      isRtl: i,
      rtlClasses: o
    } = Ra();
    if (!r) throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");
    const {
      min: l,
      max: s,
      thumbColor: d,
      step: u,
      disabled: f,
      thumbSize: _,
      thumbLabel: g,
      direction: v,
      isReversed: w,
      vertical: b,
      readonly: p,
      elevation: y,
      mousePressed: S,
      decimals: E,
      indexFromEnd: C
    } = r, B = z(() => f.value ? void 0 : y.value), {
      elevationClasses: O
    } = ir(B), {
      textColorClasses: D,
      textColorStyles: T
    } = mr(d), {
      pageup: P,
      pagedown: I,
      end: M,
      home: V,
      left: N,
      right: q,
      down: j,
      up: ee
    } = Ly, de = [P, I, M, V, N, q, j, ee], Z = z(() => u.value ? [1, 2, 3] : [1, 5, 10]);
    function F(se, X) {
      if (!de.includes(se.key)) return;
      se.preventDefault();
      const he = u.value || 0.1, ve = (s.value - l.value) / he;
      if ([N, q, j, ee].includes(se.key)) {
        const H = (b.value ? [i.value ? N : q, w.value ? j : ee] : C.value !== i.value ? [N, ee] : [q, ee]).includes(se.key) ? 1 : -1, we = se.shiftKey ? 2 : se.ctrlKey ? 1 : 0;
        H === -1 && X === s.value && !we && !Number.isInteger(ve) ? X = X - ve % 1 * he : X = X + H * he * Z.value[we];
      } else if (se.key === V)
        X = l.value;
      else if (se.key === M)
        X = s.value;
      else {
        const pe = se.key === I ? 1 : -1;
        X = X - pe * he * (ve > 100 ? ve / 10 : 10);
      }
      return Math.max(e.min, Math.min(e.max, X));
    }
    function Y(se) {
      const X = F(se, e.modelValue);
      X != null && a("update:modelValue", X);
    }
    return Ge(() => {
      const se = ht(C.value ? 100 - e.position : e.position, "%");
      return A("div", {
        class: Ee(["v-slider-thumb", {
          "v-slider-thumb--focused": e.focused,
          "v-slider-thumb--pressed": e.focused && S.value
        }, e.class, o.value]),
        style: Xe([{
          "--v-slider-thumb-position": se,
          "--v-slider-thumb-size": ht(_.value)
        }, e.style]),
        role: "slider",
        tabindex: f.value ? -1 : 0,
        "aria-label": e.name,
        "aria-valuemin": l.value,
        "aria-valuemax": s.value,
        "aria-valuenow": e.modelValue,
        "aria-readonly": !!p.value,
        "aria-orientation": v.value,
        onKeydown: p.value ? void 0 : Y
      }, [A("div", {
        class: Ee(["v-slider-thumb__surface", D.value, O.value]),
        style: {
          ...T.value
        }
      }, null), ln(A("div", {
        class: Ee(["v-slider-thumb__ripple", D.value]),
        style: Xe(T.value)
      }, null), [[Cr, e.ripple, null, {
        circle: !0,
        center: !0
      }]]), h(b0, {
        origin: "bottom center"
      }, {
        default: () => [ln(A("div", {
          class: "v-slider-thumb__label-container"
        }, [A("div", {
          class: Ee(["v-slider-thumb__label", D.value])
        }, [A("div", null, [n["thumb-label"]?.({
          modelValue: e.modelValue
        }) ?? e.modelValue.toFixed(u.value ? E.value : 1)])])]), [[Sa, g.value && e.focused || g.value === "always"]])]
      })]);
    }), {};
  }
}), fj = De({
  start: {
    type: Number,
    required: !0
  },
  stop: {
    type: Number,
    required: !0
  },
  ...vt()
}, "VSliderTrack"), UP = We()({
  name: "VSliderTrack",
  props: fj(),
  emits: {},
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(L0);
    if (!a) throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");
    const {
      color: r,
      parsedTicks: i,
      rounded: o,
      showTicks: l,
      tickSize: s,
      trackColor: d,
      trackFillColor: u,
      trackSize: f,
      vertical: _,
      min: g,
      max: v,
      indexFromEnd: w
    } = a, {
      roundedClasses: b
    } = fa(o), {
      backgroundColorClasses: p,
      backgroundColorStyles: y
    } = An(u), {
      backgroundColorClasses: S,
      backgroundColorStyles: E
    } = An(d), C = z(() => `inset-${_.value ? "block" : "inline"}-${w.value ? "end" : "start"}`), B = z(() => _.value ? "height" : "width"), O = z(() => ({
      [C.value]: "0%",
      [B.value]: "100%"
    })), D = z(() => e.stop - e.start), T = z(() => ({
      [C.value]: ht(e.start, "%"),
      [B.value]: ht(D.value, "%")
    })), P = z(() => l.value ? (_.value ? i.value.slice().reverse() : i.value).map((M, V) => {
      const N = M.value !== g.value && M.value !== v.value ? ht(M.position, "%") : void 0;
      return A("div", {
        key: M.value,
        class: Ee(["v-slider-track__tick", {
          "v-slider-track__tick--filled": M.position >= e.start && M.position <= e.stop,
          "v-slider-track__tick--first": M.value === g.value,
          "v-slider-track__tick--last": M.value === v.value
        }]),
        style: {
          [C.value]: N
        }
      }, [(M.label || n["tick-label"]) && A("div", {
        class: "v-slider-track__tick-label"
      }, [n["tick-label"]?.({
        tick: M,
        index: V
      }) ?? M.label])]);
    }) : []);
    return Ge(() => A("div", {
      class: Ee(["v-slider-track", b.value, e.class]),
      style: Xe([{
        "--v-slider-track-size": ht(f.value),
        "--v-slider-tick-size": ht(s.value)
      }, e.style])
    }, [A("div", {
      class: Ee(["v-slider-track__background", S.value, {
        "v-slider-track__background--opacity": !!r.value || !u.value
      }]),
      style: {
        ...O.value,
        ...E.value
      }
    }, null), A("div", {
      class: Ee(["v-slider-track__fill", p.value]),
      style: {
        ...T.value,
        ...y.value
      }
    }, null), l.value && A("div", {
      class: Ee(["v-slider-track__ticks", {
        "v-slider-track__ticks--always-show": l.value === "always"
      }])
    }, [P.value])])), {};
  }
}), mj = De({
  ...em(),
  ...LP(),
  ...fs(),
  modelValue: {
    type: [Number, String],
    default: 0
  }
}, "VSlider"), Rb = We()({
  name: "VSlider",
  props: mj(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    start: (e) => !0,
    end: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Se(), {
      rtlClasses: i
    } = Ra(), o = FP(e), l = kt(e, "modelValue", void 0, (B) => o.roundValue(B ?? o.min.value)), {
      min: s,
      max: d,
      mousePressed: u,
      roundValue: f,
      onSliderMousedown: _,
      onSliderTouchstart: g,
      trackContainerRef: v,
      position: w,
      hasLabels: b,
      readonly: p
    } = NP({
      props: e,
      steps: o,
      onSliderStart: () => {
        a("start", l.value);
      },
      onSliderEnd: (B) => {
        let {
          value: O
        } = B;
        const D = f(O);
        l.value = D, a("end", D);
      },
      onSliderMove: (B) => {
        let {
          value: O
        } = B;
        return l.value = f(O);
      },
      getActiveThumb: () => r.value?.$el
    }), {
      isFocused: y,
      focus: S,
      blur: E
    } = ds(e), C = z(() => w(l.value));
    return Ge(() => {
      const B = hr.filterProps(e), O = !!(e.label || n.label || n.prepend);
      return h(hr, He({
        class: ["v-slider", {
          "v-slider--has-labels": !!n["tick-label"] || b.value,
          "v-slider--focused": y.value,
          "v-slider--pressed": u.value,
          "v-slider--disabled": e.disabled
        }, i.value, e.class],
        style: e.style
      }, B, {
        focused: y.value
      }), {
        ...n,
        prepend: O ? (D) => A(Qe, null, [n.label?.(D) ?? (e.label ? h(Zu, {
          id: D.id.value,
          class: "v-slider__label",
          text: e.label
        }, null) : void 0), n.prepend?.(D)]) : void 0,
        default: (D) => {
          let {
            id: T,
            messagesId: P
          } = D;
          return A("div", {
            class: "v-slider__container",
            onMousedown: p.value ? void 0 : _,
            onTouchstartPassive: p.value ? void 0 : g
          }, [A("input", {
            id: T.value,
            name: e.name || T.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: l.value
          }, null), h(UP, {
            ref: v,
            start: 0,
            stop: C.value
          }, {
            "tick-label": n["tick-label"]
          }), h(Mb, {
            ref: r,
            "aria-describedby": P.value,
            focused: y.value,
            min: s.value,
            max: d.value,
            modelValue: l.value,
            "onUpdate:modelValue": (I) => l.value = I,
            position: C.value,
            elevation: e.elevation,
            onFocus: S,
            onBlur: E,
            ripple: e.ripple,
            name: e.name
          }, {
            "thumb-label": n["thumb-label"]
          })]);
        }
      });
    }), {};
  }
}), hj = De({
  color: {
    type: Object
  },
  disabled: Boolean,
  hideAlpha: Boolean,
  ...vt()
}, "VColorPickerPreview"), _j = fi({
  name: "VColorPickerPreview",
  props: hj(),
  emits: {
    "update:color": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = new AbortController();
    di(() => a.abort());
    async function r() {
      if (!OS || e.disabled) return;
      const i = new window.EyeDropper();
      try {
        const o = await i.open({
          signal: a.signal
        }), l = Ff(si(o.sRGBHex));
        n("update:color", {
          ...e.color ?? ou,
          ...l
        });
      } catch {
      }
    }
    return Ge(() => A("div", {
      class: Ee(["v-color-picker-preview", {
        "v-color-picker-preview--hide-alpha": e.hideAlpha
      }, e.class]),
      style: Xe(e.style)
    }, [OS && A("div", {
      class: "v-color-picker-preview__eye-dropper",
      key: "eyeDropper"
    }, [h(cn, {
      density: "comfortable",
      disabled: e.disabled,
      icon: "$eyeDropper",
      variant: "plain",
      onClick: r
    }, null)]), A("div", {
      class: "v-color-picker-preview__dot"
    }, [A("div", {
      style: {
        background: DT(e.color ?? ou)
      }
    }, null)]), A("div", {
      class: "v-color-picker-preview__sliders"
    }, [h(Rb, {
      class: "v-color-picker-preview__track v-color-picker-preview__hue",
      modelValue: e.color?.h,
      "onUpdate:modelValue": (i) => n("update:color", {
        ...e.color ?? ou,
        h: i
      }),
      step: 0,
      min: 0,
      max: 360,
      disabled: e.disabled,
      thumbSize: 14,
      trackSize: 8,
      trackFillColor: "white",
      hideDetails: !0
    }, null), !e.hideAlpha && h(Rb, {
      class: "v-color-picker-preview__track v-color-picker-preview__alpha",
      modelValue: e.color?.a ?? 1,
      "onUpdate:modelValue": (i) => n("update:color", {
        ...e.color ?? ou,
        a: i
      }),
      step: 1 / 256,
      min: 0,
      max: 1,
      disabled: e.disabled,
      thumbSize: 14,
      trackSize: 8,
      trackFillColor: "white",
      hideDetails: !0
    }, null)])])), {};
  }
}), pj = {
  base: "#f44336",
  lighten5: "#ffebee",
  lighten4: "#ffcdd2",
  lighten3: "#ef9a9a",
  lighten2: "#e57373",
  lighten1: "#ef5350",
  darken1: "#e53935",
  darken2: "#d32f2f",
  darken3: "#c62828",
  darken4: "#b71c1c",
  accent1: "#ff8a80",
  accent2: "#ff5252",
  accent3: "#ff1744",
  accent4: "#d50000"
}, vj = {
  base: "#e91e63",
  lighten5: "#fce4ec",
  lighten4: "#f8bbd0",
  lighten3: "#f48fb1",
  lighten2: "#f06292",
  lighten1: "#ec407a",
  darken1: "#d81b60",
  darken2: "#c2185b",
  darken3: "#ad1457",
  darken4: "#880e4f",
  accent1: "#ff80ab",
  accent2: "#ff4081",
  accent3: "#f50057",
  accent4: "#c51162"
}, gj = {
  base: "#9c27b0",
  lighten5: "#f3e5f5",
  lighten4: "#e1bee7",
  lighten3: "#ce93d8",
  lighten2: "#ba68c8",
  lighten1: "#ab47bc",
  darken1: "#8e24aa",
  darken2: "#7b1fa2",
  darken3: "#6a1b9a",
  darken4: "#4a148c",
  accent1: "#ea80fc",
  accent2: "#e040fb",
  accent3: "#d500f9",
  accent4: "#aa00ff"
}, yj = {
  base: "#673ab7",
  lighten5: "#ede7f6",
  lighten4: "#d1c4e9",
  lighten3: "#b39ddb",
  lighten2: "#9575cd",
  lighten1: "#7e57c2",
  darken1: "#5e35b1",
  darken2: "#512da8",
  darken3: "#4527a0",
  darken4: "#311b92",
  accent1: "#b388ff",
  accent2: "#7c4dff",
  accent3: "#651fff",
  accent4: "#6200ea"
}, bj = {
  base: "#3f51b5",
  lighten5: "#e8eaf6",
  lighten4: "#c5cae9",
  lighten3: "#9fa8da",
  lighten2: "#7986cb",
  lighten1: "#5c6bc0",
  darken1: "#3949ab",
  darken2: "#303f9f",
  darken3: "#283593",
  darken4: "#1a237e",
  accent1: "#8c9eff",
  accent2: "#536dfe",
  accent3: "#3d5afe",
  accent4: "#304ffe"
}, wj = {
  base: "#2196f3",
  lighten5: "#e3f2fd",
  lighten4: "#bbdefb",
  lighten3: "#90caf9",
  lighten2: "#64b5f6",
  lighten1: "#42a5f5",
  darken1: "#1e88e5",
  darken2: "#1976d2",
  darken3: "#1565c0",
  darken4: "#0d47a1",
  accent1: "#82b1ff",
  accent2: "#448aff",
  accent3: "#2979ff",
  accent4: "#2962ff"
}, kj = {
  base: "#03a9f4",
  lighten5: "#e1f5fe",
  lighten4: "#b3e5fc",
  lighten3: "#81d4fa",
  lighten2: "#4fc3f7",
  lighten1: "#29b6f6",
  darken1: "#039be5",
  darken2: "#0288d1",
  darken3: "#0277bd",
  darken4: "#01579b",
  accent1: "#80d8ff",
  accent2: "#40c4ff",
  accent3: "#00b0ff",
  accent4: "#0091ea"
}, Sj = {
  base: "#00bcd4",
  lighten5: "#e0f7fa",
  lighten4: "#b2ebf2",
  lighten3: "#80deea",
  lighten2: "#4dd0e1",
  lighten1: "#26c6da",
  darken1: "#00acc1",
  darken2: "#0097a7",
  darken3: "#00838f",
  darken4: "#006064",
  accent1: "#84ffff",
  accent2: "#18ffff",
  accent3: "#00e5ff",
  accent4: "#00b8d4"
}, Cj = {
  base: "#009688",
  lighten5: "#e0f2f1",
  lighten4: "#b2dfdb",
  lighten3: "#80cbc4",
  lighten2: "#4db6ac",
  lighten1: "#26a69a",
  darken1: "#00897b",
  darken2: "#00796b",
  darken3: "#00695c",
  darken4: "#004d40",
  accent1: "#a7ffeb",
  accent2: "#64ffda",
  accent3: "#1de9b6",
  accent4: "#00bfa5"
}, Aj = {
  base: "#4caf50",
  lighten5: "#e8f5e9",
  lighten4: "#c8e6c9",
  lighten3: "#a5d6a7",
  lighten2: "#81c784",
  lighten1: "#66bb6a",
  darken1: "#43a047",
  darken2: "#388e3c",
  darken3: "#2e7d32",
  darken4: "#1b5e20",
  accent1: "#b9f6ca",
  accent2: "#69f0ae",
  accent3: "#00e676",
  accent4: "#00c853"
}, xj = {
  base: "#8bc34a",
  lighten5: "#f1f8e9",
  lighten4: "#dcedc8",
  lighten3: "#c5e1a5",
  lighten2: "#aed581",
  lighten1: "#9ccc65",
  darken1: "#7cb342",
  darken2: "#689f38",
  darken3: "#558b2f",
  darken4: "#33691e",
  accent1: "#ccff90",
  accent2: "#b2ff59",
  accent3: "#76ff03",
  accent4: "#64dd17"
}, Tj = {
  base: "#cddc39",
  lighten5: "#f9fbe7",
  lighten4: "#f0f4c3",
  lighten3: "#e6ee9c",
  lighten2: "#dce775",
  lighten1: "#d4e157",
  darken1: "#c0ca33",
  darken2: "#afb42b",
  darken3: "#9e9d24",
  darken4: "#827717",
  accent1: "#f4ff81",
  accent2: "#eeff41",
  accent3: "#c6ff00",
  accent4: "#aeea00"
}, Ij = {
  base: "#ffeb3b",
  lighten5: "#fffde7",
  lighten4: "#fff9c4",
  lighten3: "#fff59d",
  lighten2: "#fff176",
  lighten1: "#ffee58",
  darken1: "#fdd835",
  darken2: "#fbc02d",
  darken3: "#f9a825",
  darken4: "#f57f17",
  accent1: "#ffff8d",
  accent2: "#ffff00",
  accent3: "#ffea00",
  accent4: "#ffd600"
}, Ej = {
  base: "#ffc107",
  lighten5: "#fff8e1",
  lighten4: "#ffecb3",
  lighten3: "#ffe082",
  lighten2: "#ffd54f",
  lighten1: "#ffca28",
  darken1: "#ffb300",
  darken2: "#ffa000",
  darken3: "#ff8f00",
  darken4: "#ff6f00",
  accent1: "#ffe57f",
  accent2: "#ffd740",
  accent3: "#ffc400",
  accent4: "#ffab00"
}, Pj = {
  base: "#ff9800",
  lighten5: "#fff3e0",
  lighten4: "#ffe0b2",
  lighten3: "#ffcc80",
  lighten2: "#ffb74d",
  lighten1: "#ffa726",
  darken1: "#fb8c00",
  darken2: "#f57c00",
  darken3: "#ef6c00",
  darken4: "#e65100",
  accent1: "#ffd180",
  accent2: "#ffab40",
  accent3: "#ff9100",
  accent4: "#ff6d00"
}, Oj = {
  base: "#ff5722",
  lighten5: "#fbe9e7",
  lighten4: "#ffccbc",
  lighten3: "#ffab91",
  lighten2: "#ff8a65",
  lighten1: "#ff7043",
  darken1: "#f4511e",
  darken2: "#e64a19",
  darken3: "#d84315",
  darken4: "#bf360c",
  accent1: "#ff9e80",
  accent2: "#ff6e40",
  accent3: "#ff3d00",
  accent4: "#dd2c00"
}, Dj = {
  base: "#795548",
  lighten5: "#efebe9",
  lighten4: "#d7ccc8",
  lighten3: "#bcaaa4",
  lighten2: "#a1887f",
  lighten1: "#8d6e63",
  darken1: "#6d4c41",
  darken2: "#5d4037",
  darken3: "#4e342e",
  darken4: "#3e2723"
}, Bj = {
  base: "#607d8b",
  lighten5: "#eceff1",
  lighten4: "#cfd8dc",
  lighten3: "#b0bec5",
  lighten2: "#90a4ae",
  lighten1: "#78909c",
  darken1: "#546e7a",
  darken2: "#455a64",
  darken3: "#37474f",
  darken4: "#263238"
}, Vj = {
  base: "#9e9e9e",
  lighten5: "#fafafa",
  lighten4: "#f5f5f5",
  lighten3: "#eeeeee",
  lighten2: "#e0e0e0",
  lighten1: "#bdbdbd",
  darken1: "#757575",
  darken2: "#616161",
  darken3: "#424242",
  darken4: "#212121"
}, Mj = {
  black: "#000000",
  white: "#ffffff",
  transparent: "#ffffff00"
}, Rj = {
  red: pj,
  pink: vj,
  purple: gj,
  deepPurple: yj,
  indigo: bj,
  blue: wj,
  lightBlue: kj,
  cyan: Sj,
  teal: Cj,
  green: Aj,
  lightGreen: xj,
  lime: Tj,
  yellow: Ij,
  amber: Ej,
  orange: Pj,
  deepOrange: Oj,
  brown: Dj,
  blueGrey: Bj,
  grey: Vj,
  shades: Mj
}, Lj = De({
  swatches: {
    type: Array,
    default: () => Fj(Rj)
  },
  disabled: Boolean,
  color: Object,
  maxHeight: [Number, String],
  ...vt()
}, "VColorPickerSwatches");
function Fj(e) {
  return Object.keys(e).map((t) => {
    const n = e[t];
    return n.base ? [n.base, n.darken4, n.darken3, n.darken2, n.darken1, n.lighten1, n.lighten2, n.lighten3, n.lighten4, n.lighten5] : [n.black, n.white, n.transparent];
  });
}
const Nj = fi({
  name: "VColorPickerSwatches",
  props: Lj(),
  emits: {
    "update:color": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    return Ge(() => A("div", {
      class: Ee(["v-color-picker-swatches", e.class]),
      style: Xe([{
        maxHeight: ht(e.maxHeight)
      }, e.style])
    }, [A("div", null, [e.swatches.map((a) => A("div", {
      class: "v-color-picker-swatches__swatch"
    }, [a.map((r) => {
      const i = si(r), o = Ff(i), l = OT(i);
      return A("div", {
        class: "v-color-picker-swatches__color",
        onClick: () => o && n("update:color", o)
      }, [A("div", {
        style: {
          background: l
        }
      }, [e.color && fr(e.color, o) ? h(pn, {
        size: "x-small",
        icon: "$success",
        color: W3(r, "#FFFFFF") > 2 ? "white" : "black"
      }, null) : void 0])]);
    })]))])])), {};
  }
}), Uj = xo("v-picker-title"), F0 = De({
  color: String,
  ...Qr(),
  ...vt(),
  ...La(),
  ...za(),
  ...us(),
  ...Ju(),
  ...Hn(),
  ...qt(),
  ...an()
}, "VSheet"), Df = We()({
  name: "VSheet",
  props: F0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      borderClasses: o
    } = _i(e), {
      dimensionStyles: l
    } = Fa(e), {
      elevationClasses: s
    } = ir(e), {
      locationStyles: d
    } = gc(e), {
      positionClasses: u
    } = Xu(e), {
      roundedClasses: f
    } = fa(e);
    return Ge(() => h(e.tag, {
      class: Ee(["v-sheet", a.value, r.value, o.value, s.value, u.value, f.value, e.class]),
      style: Xe([i.value, l.value, d.value, e.style])
    }, n)), {};
  }
}), N0 = De({
  bgColor: String,
  divided: Boolean,
  landscape: Boolean,
  title: String,
  hideHeader: Boolean,
  ...F0()
}, "VPicker"), $_ = We()({
  name: "VPicker",
  props: N0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.color);
    return Ge(() => {
      const i = Df.filterProps(e), o = !!(e.title || n.title);
      return h(Df, He(i, {
        color: e.bgColor,
        class: ["v-picker", {
          "v-picker--divided": e.divided,
          "v-picker--landscape": e.landscape,
          "v-picker--with-actions": !!n.actions
        }, e.class],
        style: e.style
      }), {
        default: () => [!e.hideHeader && A("div", {
          key: "header",
          class: Ee([a.value]),
          style: Xe([r.value])
        }, [o && h(Uj, {
          key: "picker-title"
        }, {
          default: () => [n.title?.() ?? e.title]
        }), n.header && A("div", {
          class: "v-picker__header"
        }, [n.header()])]), A("div", {
          class: "v-picker__body"
        }, [n.default?.()]), n.actions && h(Wt, {
          defaults: {
            VBtn: {
              slim: !0,
              variant: "text"
            }
          }
        }, {
          default: () => [A("div", {
            class: "v-picker__actions"
          }, [n.actions()])]
        })]
      });
    }), {};
  }
}), $j = De({
  canvasHeight: {
    type: [String, Number],
    default: 150
  },
  disabled: Boolean,
  dotSize: {
    type: [Number, String],
    default: 10
  },
  hideCanvas: Boolean,
  hideSliders: Boolean,
  hideInputs: Boolean,
  mode: {
    type: String,
    default: "rgba",
    validator: (e) => Object.keys(Gl).includes(e)
  },
  modes: {
    type: Array,
    default: () => Object.keys(Gl),
    validator: (e) => Array.isArray(e) && e.every((t) => Object.keys(Gl).includes(t))
  },
  showSwatches: Boolean,
  swatches: Array,
  swatchesMaxHeight: {
    type: [Number, String],
    default: 150
  },
  modelValue: {
    type: [Object, String]
  },
  ...N0({
    hideHeader: !0
  })
}, "VColorPicker"), qj = fi({
  name: "VColorPicker",
  props: $j(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:mode": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "mode"), r = Se(null), i = kt(e, "modelValue", void 0, (u) => {
      if (u == null || u === "") return null;
      let f;
      try {
        f = Ff(si(u));
      } catch {
        return null;
      }
      return f;
    }, (u) => u ? aj(u, e.modelValue) : null), o = z(() => i.value ? {
      ...i.value,
      h: r.value ?? i.value.h
    } : null), {
      rtlClasses: l
    } = Ra();
    let s = !0;
    nt(i, (u) => {
      if (!s) {
        s = !0;
        return;
      }
      u && (r.value = u.h);
    }, {
      immediate: !0
    });
    const d = (u) => {
      s = !1, r.value = u.h, i.value = u;
    };
    return qu(() => {
      e.modes.includes(a.value) || (a.value = e.modes[0]);
    }), ca({
      VSlider: {
        color: void 0,
        trackColor: void 0,
        trackFillColor: void 0
      }
    }), Ge(() => {
      const u = $_.filterProps(e);
      return h($_, He(u, {
        class: ["v-color-picker", l.value, e.class],
        style: [{
          "--v-color-picker-color-hsv": DT({
            ...o.value ?? ou,
            a: 1
          })
        }, e.style]
      }), {
        ...n,
        default: () => A(Qe, null, [!e.hideCanvas && h(tj, {
          key: "canvas",
          color: o.value,
          "onUpdate:color": d,
          disabled: e.disabled,
          dotSize: e.dotSize,
          width: e.width,
          height: e.canvasHeight
        }, null), (!e.hideSliders || !e.hideInputs) && A("div", {
          key: "controls",
          class: "v-color-picker__controls"
        }, [!e.hideSliders && h(_j, {
          key: "preview",
          color: o.value,
          "onUpdate:color": d,
          hideAlpha: !a.value.endsWith("a"),
          disabled: e.disabled
        }, null), !e.hideInputs && h(cj, {
          key: "edit",
          modes: e.modes,
          mode: a.value,
          "onUpdate:mode": (f) => a.value = f,
          color: o.value,
          "onUpdate:color": d,
          disabled: e.disabled
        }, null)]), e.showSwatches && h(Nj, {
          key: "swatches",
          color: o.value,
          "onUpdate:color": d,
          maxHeight: e.swatchesMaxHeight,
          swatches: e.swatches,
          disabled: e.disabled
        }, null)])
      });
    }), {};
  }
}), Hj = De({
  autoSelectFirst: {
    type: [Boolean, String]
  },
  clearOnSelect: {
    type: Boolean,
    default: !0
  },
  delimiters: Array,
  ...im({
    filterKeys: ["title"]
  }),
  ...M0({
    hideNoData: !0,
    returnObject: !0
  }),
  ...la(rm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...Gi({
    transition: !1
  })
}, "VCombobox"), zj = We()({
  name: "VCombobox",
  props: Hj(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:search": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = ua(), i = Se(), o = ot(!1), l = ot(!0), s = ot(!1), d = Se(), u = Se(), f = ot(-1);
    let _ = !1;
    const {
      items: g,
      transformIn: v,
      transformOut: w
    } = E0(e), {
      textColorClasses: b,
      textColorStyles: p
    } = mr(() => i.value?.color), y = kt(e, "modelValue", [], (ce) => v(Zn(ce)), (ce) => {
      const te = w(ce);
      return e.multiple ? te : te[0] ?? null;
    }), S = tm(e), E = z(() => !!(e.chips || a.chip)), C = z(() => E.value || !!a.selection), B = ot(!e.multiple && !C.value ? y.value[0]?.title ?? "" : ""), O = z({
      get: () => B.value,
      set: (ce) => {
        if (B.value = ce ?? "", !e.multiple && !C.value && (y.value = [Bs(e, ce)]), ce && e.multiple && e.delimiters?.length) {
          const te = ce.split(new RegExp(`(?:${e.delimiters.join("|")})+`));
          te.length > 1 && (te.forEach((G) => {
            G = G.trim(), G && H(Bs(e, G));
          }), B.value = "");
        }
        ce || (f.value = -1), l.value = !ce;
      }
    }), D = z(() => typeof e.counterValue == "function" ? e.counterValue(y.value) : typeof e.counterValue == "number" ? e.counterValue : e.multiple ? y.value.length : O.value.length), {
      filteredItems: T,
      getMatches: P
    } = om(e, g, () => l.value ? "" : O.value), I = z(() => e.hideSelected ? T.value.filter((ce) => !y.value.some((te) => te.value === ce.value)) : T.value), M = z(() => e.hideNoData && !I.value.length || S.isReadonly.value || S.isDisabled.value), V = kt(e, "menu"), N = z({
      get: () => V.value,
      set: (ce) => {
        V.value && !ce && d.value?.ΨopenChildren.size || ce && M.value || (V.value = ce);
      }
    }), q = be(() => N.value ? e.closeText : e.openText);
    nt(B, (ce) => {
      _ ? Vt(() => _ = !1) : o.value && !N.value && (N.value = !0), n("update:search", ce);
    }), nt(y, (ce) => {
      !e.multiple && !C.value && (B.value = ce[0]?.title ?? "");
    });
    const j = z(() => y.value.map((ce) => ce.value)), ee = z(() => (e.autoSelectFirst === !0 || e.autoSelectFirst === "exact" && O.value === I.value[0]?.title) && I.value.length > 0 && !l.value && !s.value), de = Se(), Z = V0(de, i);
    function F(ce) {
      _ = !0, e.openOnClear && (N.value = !0);
    }
    function Y() {
      M.value || (N.value = !0);
    }
    function se(ce) {
      M.value || (o.value && (ce.preventDefault(), ce.stopPropagation()), N.value = !N.value);
    }
    function X(ce) {
      ce.key !== " " && Cu(ce) && i.value?.focus();
    }
    function he(ce) {
      if (f3(ce) || S.isReadonly.value) return;
      const te = i.value?.selectionStart, G = y.value.length;
      if (["Enter", "ArrowDown", "ArrowUp"].includes(ce.key) && ce.preventDefault(), ["Enter", "ArrowDown"].includes(ce.key) && (N.value = !0), ["Escape"].includes(ce.key) && (N.value = !1), ["Enter", "Escape", "Tab"].includes(ce.key) && (ee.value && ["Enter", "Tab"].includes(ce.key) && !y.value.some((le) => {
        let {
          value: K
        } = le;
        return K === I.value[0].value;
      }) && H(T.value[0]), l.value = !0), ce.key === "ArrowDown" && ee.value && de.value?.focus("next"), ce.key === "Enter" && O.value && (H(Bs(e, O.value)), C.value && (B.value = "")), ["Backspace", "Delete"].includes(ce.key)) {
        if (!e.multiple && C.value && y.value.length > 0 && !O.value) return H(y.value[0], !1);
        if (~f.value) {
          ce.preventDefault();
          const le = f.value;
          H(y.value[f.value], !1), f.value = le >= G - 1 ? G - 2 : le;
        } else ce.key === "Backspace" && !O.value && (f.value = G - 1);
        return;
      }
      if (e.multiple)
        if (ce.key === "ArrowLeft") {
          if (f.value < 0 && te && te > 0) return;
          const le = f.value > -1 ? f.value - 1 : G - 1;
          y.value[le] ? f.value = le : (f.value = -1, i.value?.setSelectionRange(O.value.length, O.value.length));
        } else if (ce.key === "ArrowRight") {
          if (f.value < 0) return;
          const le = f.value + 1;
          y.value[le] ? f.value = le : (f.value = -1, i.value?.setSelectionRange(0, 0));
        } else ~f.value && Cu(ce) && (f.value = -1);
    }
    function ve() {
      e.eager && u.value?.calculateVisibleItems();
    }
    function pe() {
      o.value && (l.value = !0, i.value?.focus());
    }
    function H(ce) {
      let te = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!(!ce || ce.props.disabled))
        if (e.multiple) {
          const G = y.value.findIndex((K) => (e.valueComparator || fr)(K.value, ce.value)), le = te ?? !~G;
          if (~G) {
            const K = le ? [...y.value, ce] : [...y.value];
            K.splice(G, 1), y.value = K;
          } else le && (y.value = [...y.value, ce]);
          e.clearOnSelect && (O.value = "");
        } else {
          const G = te !== !1;
          y.value = G ? [ce] : [], B.value = G && !C.value ? ce.title : "", Vt(() => {
            N.value = !1, l.value = !0;
          });
        }
    }
    function we(ce) {
      o.value = !0, setTimeout(() => {
        s.value = !0;
      });
    }
    function Me(ce) {
      s.value = !1;
    }
    function Re(ce) {
      (ce == null || ce === "" && !e.multiple && !C.value) && (y.value = []);
    }
    return nt(o, (ce, te) => {
      if (!(ce || ce === te) && (f.value = -1, N.value = !1, O.value)) {
        if (e.multiple) {
          H(Bs(e, O.value));
          return;
        }
        if (!C.value) return;
        y.value.some((G) => {
          let {
            title: le
          } = G;
          return le === O.value;
        }) ? B.value = "" : H(Bs(e, O.value));
      }
    }), nt(N, () => {
      if (!e.hideSelected && N.value && y.value.length) {
        const ce = I.value.findIndex((te) => y.value.some((G) => (e.valueComparator || fr)(G.value, te.value)));
        vn && window.requestAnimationFrame(() => {
          ce >= 0 && u.value?.scrollToIndex(ce);
        });
      }
    }), nt(() => e.items, (ce, te) => {
      N.value || o.value && !te.length && ce.length && (N.value = !0);
    }), Ge(() => {
      const ce = !!(!e.hideNoData || I.value.length || a["prepend-item"] || a["append-item"] || a["no-data"]), te = y.value.length > 0, G = os.filterProps(e);
      return h(os, He({
        ref: i
      }, G, {
        modelValue: O.value,
        "onUpdate:modelValue": [(le) => O.value = le, Re],
        focused: o.value,
        "onUpdate:focused": (le) => o.value = le,
        validationValue: y.externalValue,
        counterValue: D.value,
        dirty: te,
        class: ["v-combobox", {
          "v-combobox--active-menu": N.value,
          "v-combobox--chips": !!e.chips,
          "v-combobox--selection-slot": !!C.value,
          "v-combobox--selecting-index": f.value > -1,
          [`v-combobox--${e.multiple ? "multiple" : "single"}`]: !0
        }, e.class],
        style: e.style,
        readonly: S.isReadonly.value,
        placeholder: te ? void 0 : e.placeholder,
        "onClick:clear": F,
        "onMousedown:control": Y,
        onKeydown: he
      }), {
        ...a,
        default: () => A(Qe, null, [h(Ru, He({
          ref: d,
          modelValue: N.value,
          "onUpdate:modelValue": (le) => N.value = le,
          activator: "parent",
          contentClass: "v-combobox__content",
          disabled: M.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: ve,
          onAfterLeave: pe
        }, e.menuProps), {
          default: () => [ce && h(Sp, He({
            ref: de,
            selected: j.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (le) => le.preventDefault(),
            onKeydown: X,
            onFocusin: we,
            onFocusout: Me,
            tabindex: "-1",
            "aria-live": "polite",
            color: e.itemColor ?? e.color
          }, Z, e.listProps), {
            default: () => [a["prepend-item"]?.(), !I.value.length && !e.hideNoData && (a["no-data"]?.() ?? h(is, {
              key: "no-data",
              title: r(e.noDataText)
            }, null)), h(Ap, {
              ref: u,
              renderless: !0,
              items: I.value,
              itemKey: "value"
            }, {
              default: (le) => {
                let {
                  item: K,
                  index: Ce,
                  itemRef: Te
                } = le;
                const ie = He(K.props, {
                  ref: Te,
                  key: K.value,
                  active: ee.value && Ce === 0 ? !0 : void 0,
                  onClick: () => H(K, null)
                });
                return a.item?.({
                  item: K,
                  index: Ce,
                  props: ie
                }) ?? h(is, He(ie, {
                  role: "option"
                }), {
                  prepend: (ge) => {
                    let {
                      isSelected: Pe
                    } = ge;
                    return A(Qe, null, [e.multiple && !e.hideSelected ? h(rs, {
                      key: K.value,
                      modelValue: Pe,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, K.props.prependAvatar && h(Ei, {
                      image: K.props.prependAvatar
                    }, null), K.props.prependIcon && h(pn, {
                      icon: K.props.prependIcon
                    }, null)]);
                  },
                  title: () => l.value ? K.title : SP("v-combobox", K.title, P(K)?.title)
                });
              }
            }), a["append-item"]?.()]
          })]
        }), y.value.map((le, K) => {
          function Ce(Pe) {
            Pe.stopPropagation(), Pe.preventDefault(), H(le, !1);
          }
          const Te = {
            "onClick:close": Ce,
            onKeydown(Pe) {
              Pe.key !== "Enter" && Pe.key !== " " || (Pe.preventDefault(), Pe.stopPropagation(), Ce(Pe));
            },
            onMousedown(Pe) {
              Pe.preventDefault(), Pe.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, ie = E.value ? !!a.chip : !!a.selection, ge = ie ? ip(E.value ? a.chip({
            item: le,
            index: K,
            props: Te
          }) : a.selection({
            item: le,
            index: K
          })) : void 0;
          if (!(ie && !ge))
            return A("div", {
              key: le.value,
              class: Ee(["v-combobox__selection", K === f.value && ["v-combobox__selection--selected", b.value]]),
              style: Xe(K === f.value ? p.value : {})
            }, [E.value ? a.chip ? h(Wt, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: le.title
                }
              }
            }, {
              default: () => [ge]
            }) : h(ed, He({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: le.title,
              disabled: le.props.disabled
            }, Te), null) : ge ?? A("span", {
              class: "v-combobox__selection-text"
            }, [le.title, e.multiple && K < y.value.length - 1 && A("span", {
              class: "v-combobox__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var le = arguments.length, K = new Array(le), Ce = 0; Ce < le; Ce++)
            K[Ce] = arguments[Ce];
          return A(Qe, null, [a["append-inner"]?.(...K), (!e.hideNoData || e.items.length) && e.menuIcon ? h(pn, {
            class: "v-combobox__menu-icon",
            color: i.value?.fieldIconColor,
            icon: e.menuIcon,
            onMousedown: se,
            onClick: CT,
            "aria-label": r(q.value),
            title: r(q.value),
            tabindex: "-1"
          }, null) : void 0]);
        }
      });
    }), pi({
      isFocused: o,
      isPristine: l,
      menu: N,
      search: O,
      selectionIndex: f,
      filteredItems: T,
      select: H
    }, i);
  }
}), Wj = De({
  modelValue: null,
  color: String,
  cancelText: {
    type: String,
    default: "$vuetify.confirmEdit.cancel"
  },
  okText: {
    type: String,
    default: "$vuetify.confirmEdit.ok"
  },
  disabled: {
    type: [Boolean, Array],
    default: void 0
  },
  hideActions: Boolean
}, "VConfirmEdit"), jj = We()({
  name: "VConfirmEdit",
  props: Wj(),
  emits: {
    cancel: () => !0,
    save: (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), i = Se();
    ea(() => {
      i.value = structuredClone(Ot(r.value));
    });
    const {
      t: o
    } = ua(), l = z(() => fr(r.value, i.value));
    function s(w) {
      return typeof e.disabled == "boolean" ? e.disabled : Array.isArray(e.disabled) ? e.disabled.includes(w) : l.value;
    }
    const d = z(() => s("save")), u = z(() => s("cancel"));
    function f() {
      r.value = i.value, n("save", i.value);
    }
    function _() {
      i.value = structuredClone(Ot(r.value)), n("cancel");
    }
    function g(w) {
      return A(Qe, null, [h(cn, He({
        disabled: u.value,
        variant: "text",
        color: e.color,
        onClick: _,
        text: o(e.cancelText)
      }, w), null), h(cn, He({
        disabled: d.value,
        variant: "text",
        color: e.color,
        onClick: f,
        text: o(e.okText)
      }, w), null)]);
    }
    let v = !1;
    return Ge(() => A(Qe, null, [a.default?.({
      model: i,
      save: f,
      cancel: _,
      isPristine: l.value,
      get actions() {
        return v = !0, g;
      }
    }), !e.hideActions && !v && g()])), {
      save: f,
      cancel: _,
      isPristine: l
    };
  }
}), $P = De({
  expandOnClick: Boolean,
  showExpand: Boolean,
  expanded: {
    type: Array,
    default: () => []
  }
}, "DataTable-expand"), qP = Symbol.for("vuetify:datatable:expanded");
function Ip(e) {
  const t = be(() => e.expandOnClick), n = kt(e, "expanded", e.expanded, (l) => new Set(l), (l) => [...l.values()]);
  function a(l, s) {
    const d = new Set(n.value);
    s ? d.add(l.value) : d.delete(l.value), n.value = d;
  }
  function r(l) {
    return n.value.has(l.value);
  }
  function i(l) {
    a(l, !r(l));
  }
  const o = {
    expand: a,
    expanded: n,
    expandOnClick: t,
    isExpanded: r,
    toggleExpand: i
  };
  return Nn(qP, o), o;
}
function HP() {
  const e = Gt(qP);
  if (!e) throw new Error("foo");
  return e;
}
const U0 = De({
  groupBy: {
    type: Array,
    default: () => []
  }
}, "DataTable-group"), zP = Symbol.for("vuetify:data-table-group");
function $0(e) {
  return {
    groupBy: kt(e, "groupBy")
  };
}
function Ep(e) {
  const {
    disableSort: t,
    groupBy: n,
    sortBy: a
  } = e, r = Se(/* @__PURE__ */ new Set()), i = z(() => n.value.map((u) => ({
    ...u,
    order: u.order ?? !1
  })).concat(t?.value ? [] : a.value));
  function o(u) {
    return r.value.has(u.id);
  }
  function l(u) {
    const f = new Set(r.value);
    o(u) ? f.delete(u.id) : f.add(u.id), r.value = f;
  }
  function s(u) {
    function f(_) {
      const g = [];
      for (const v of _.items)
        "type" in v && v.type === "group" ? g.push(...f(v)) : g.push(v);
      return [...new Set(g)];
    }
    return f({
      items: u
    });
  }
  const d = {
    sortByWithGroups: i,
    toggleGroup: l,
    opened: r,
    groupBy: n,
    extractRows: s,
    isGroupOpen: o
  };
  return Nn(zP, d), d;
}
function WP() {
  const e = Gt(zP);
  if (!e) throw new Error("Missing group!");
  return e;
}
function Yj(e, t) {
  if (!e.length) return [];
  const n = /* @__PURE__ */ new Map();
  for (const a of e) {
    const r = Jl(a.raw, t);
    n.has(r) || n.set(r, []), n.get(r).push(a);
  }
  return n;
}
function jP(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "root";
  if (!t.length) return [];
  const r = Yj(e, t[0]), i = [], o = t.slice(1);
  return r.forEach((l, s) => {
    const d = t[0], u = `${a}_${d}_${s}`;
    i.push({
      depth: n,
      id: u,
      key: d,
      value: s,
      items: o.length ? jP(l, o, n + 1, u) : l,
      type: "group"
    });
  }), i;
}
function YP(e, t) {
  const n = [];
  for (const a of e)
    "type" in a && a.type === "group" ? (a.value != null && n.push(a), (t.has(a.id) || a.value == null) && n.push(...YP(a.items, t))) : n.push(a);
  return n;
}
function Pp(e, t, n) {
  return {
    flatItems: z(() => {
      if (!t.value.length) return e.value;
      const r = jP(e.value, t.value.map((i) => i.key));
      return YP(r, n.value);
    })
  };
}
function Op(e) {
  let {
    page: t,
    itemsPerPage: n,
    sortBy: a,
    groupBy: r,
    search: i
  } = e;
  const o = ga("VDataTable"), l = () => ({
    page: t.value,
    itemsPerPage: n.value,
    sortBy: a.value,
    groupBy: r.value,
    search: i.value
  });
  let s = null;
  nt(l, (d) => {
    fr(s, d) || (s && s.search !== d.search && (t.value = 1), o.emit("update:options", d), s = d);
  }, {
    deep: !0,
    immediate: !0
  });
}
const q0 = De({
  page: {
    type: [Number, String],
    default: 1
  },
  itemsPerPage: {
    type: [Number, String],
    default: 10
  }
}, "DataTable-paginate"), KP = Symbol.for("vuetify:data-table-pagination");
function H0(e) {
  const t = kt(e, "page", void 0, (a) => Number(a ?? 1)), n = kt(e, "itemsPerPage", void 0, (a) => Number(a ?? 10));
  return {
    page: t,
    itemsPerPage: n
  };
}
function z0(e) {
  const {
    page: t,
    itemsPerPage: n,
    itemsLength: a
  } = e, r = z(() => n.value === -1 ? 0 : n.value * (t.value - 1)), i = z(() => n.value === -1 ? a.value : Math.min(a.value, r.value + n.value)), o = z(() => n.value === -1 || a.value === 0 ? 1 : Math.ceil(a.value / n.value));
  nt([t, o], () => {
    t.value > o.value && (t.value = o.value);
  });
  function l(_) {
    n.value = _, t.value = 1;
  }
  function s() {
    t.value = Pn(t.value + 1, 1, o.value);
  }
  function d() {
    t.value = Pn(t.value - 1, 1, o.value);
  }
  function u(_) {
    t.value = Pn(_, 1, o.value);
  }
  const f = {
    page: t,
    itemsPerPage: n,
    startIndex: r,
    stopIndex: i,
    pageCount: o,
    itemsLength: a,
    nextPage: s,
    prevPage: d,
    setPage: u,
    setItemsPerPage: l
  };
  return Nn(KP, f), f;
}
function Kj() {
  const e = Gt(KP);
  if (!e) throw new Error("Missing pagination!");
  return e;
}
function GP(e) {
  const t = ga("usePaginatedItems"), {
    items: n,
    startIndex: a,
    stopIndex: r,
    itemsPerPage: i
  } = e, o = z(() => i.value <= 0 ? n.value : n.value.slice(a.value, r.value));
  return nt(o, (l) => {
    t.emit("update:currentItems", l);
  }, {
    immediate: !0
  }), {
    paginatedItems: o
  };
}
const Gj = {
  showSelectAll: !1,
  allSelected: () => [],
  select: (e) => {
    let {
      items: t,
      value: n
    } = e;
    return new Set(n ? [t[0]?.value] : []);
  },
  selectAll: (e) => {
    let {
      selected: t
    } = e;
    return t;
  }
}, QP = {
  showSelectAll: !0,
  allSelected: (e) => {
    let {
      currentPage: t
    } = e;
    return t;
  },
  select: (e) => {
    let {
      items: t,
      value: n,
      selected: a
    } = e;
    for (const r of t)
      n ? a.add(r.value) : a.delete(r.value);
    return a;
  },
  selectAll: (e) => {
    let {
      value: t,
      currentPage: n,
      selected: a
    } = e;
    return QP.select({
      items: n,
      value: t,
      selected: a
    });
  }
}, JP = {
  showSelectAll: !0,
  allSelected: (e) => {
    let {
      allItems: t
    } = e;
    return t;
  },
  select: (e) => {
    let {
      items: t,
      value: n,
      selected: a
    } = e;
    for (const r of t)
      n ? a.add(r.value) : a.delete(r.value);
    return a;
  },
  selectAll: (e) => {
    let {
      value: t,
      allItems: n,
      selected: a
    } = e;
    return JP.select({
      items: n,
      value: t,
      selected: a
    });
  }
}, XP = De({
  showSelect: Boolean,
  selectStrategy: {
    type: [String, Object],
    default: "page"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  valueComparator: {
    type: Function,
    default: fr
  }
}, "DataTable-select"), ZP = Symbol.for("vuetify:data-table-selection");
function Dp(e, t) {
  let {
    allItems: n,
    currentPage: a
  } = t;
  const r = kt(e, "modelValue", e.modelValue, (y) => new Set(Zn(y).map((S) => n.value.find((E) => e.valueComparator(S, E.value))?.value ?? S)), (y) => [...y.values()]), i = z(() => n.value.filter((y) => y.selectable)), o = z(() => a.value.filter((y) => y.selectable)), l = z(() => {
    if (typeof e.selectStrategy == "object") return e.selectStrategy;
    switch (e.selectStrategy) {
      case "single":
        return Gj;
      case "all":
        return JP;
      case "page":
      default:
        return QP;
    }
  }), s = ot(null);
  function d(y) {
    return Zn(y).every((S) => r.value.has(S.value));
  }
  function u(y) {
    return Zn(y).some((S) => r.value.has(S.value));
  }
  function f(y, S) {
    const E = l.value.select({
      items: y,
      value: S,
      selected: new Set(r.value)
    });
    r.value = E;
  }
  function _(y, S, E) {
    const C = [];
    if (S = S ?? a.value.findIndex((B) => B.value === y.value), e.selectStrategy !== "single" && E?.shiftKey && s.value !== null) {
      const [B, O] = [s.value, S].sort((D, T) => D - T);
      C.push(...a.value.slice(B, O + 1).filter((D) => D.selectable));
    } else
      C.push(y), s.value = S;
    f(C, !d([y]));
  }
  function g(y) {
    const S = l.value.selectAll({
      value: y,
      allItems: i.value,
      currentPage: o.value,
      selected: new Set(r.value)
    });
    r.value = S;
  }
  const v = z(() => r.value.size > 0), w = z(() => {
    const y = l.value.allSelected({
      allItems: i.value,
      currentPage: o.value
    });
    return !!y.length && d(y);
  }), b = be(() => l.value.showSelectAll), p = {
    toggleSelect: _,
    select: f,
    selectAll: g,
    isSelected: d,
    isSomeSelected: u,
    someSelected: v,
    allSelected: w,
    showSelectAll: b,
    lastSelectedIndex: s,
    selectStrategy: l
  };
  return Nn(ZP, p), p;
}
function Bp() {
  const e = Gt(ZP);
  if (!e) throw new Error("Missing selection!");
  return e;
}
const eO = De({
  sortBy: {
    type: Array,
    default: () => []
  },
  customKeySort: Object,
  multiSort: Boolean,
  mustSort: Boolean
}, "DataTable-sort"), tO = Symbol.for("vuetify:data-table-sort");
function Vp(e) {
  const t = kt(e, "sortBy"), n = be(() => e.mustSort), a = be(() => e.multiSort);
  return {
    sortBy: t,
    mustSort: n,
    multiSort: a
  };
}
function Mp(e) {
  const {
    sortBy: t,
    mustSort: n,
    multiSort: a,
    page: r
  } = e, i = (s) => {
    if (s.key == null) return;
    let d = t.value.map((f) => ({
      ...f
    })) ?? [];
    const u = d.find((f) => f.key === s.key);
    u ? u.order === "desc" ? n.value && d.length === 1 ? u.order = "asc" : d = d.filter((f) => f.key !== s.key) : u.order = "desc" : a.value ? d.push({
      key: s.key,
      order: "asc"
    }) : d = [{
      key: s.key,
      order: "asc"
    }], t.value = d, r && (r.value = 1);
  };
  function o(s) {
    return !!t.value.find((d) => d.key === s.key);
  }
  const l = {
    sortBy: t,
    toggleSort: i,
    isSorted: o
  };
  return Nn(tO, l), l;
}
function nO() {
  const e = Gt(tO);
  if (!e) throw new Error("Missing sort!");
  return e;
}
function W0(e, t, n, a) {
  const r = ua();
  return {
    sortedItems: z(() => n.value.length ? Qj(t.value, n.value, r.current.value, {
      transform: a?.transform,
      sortFunctions: {
        ...e.customKeySort,
        ...a?.sortFunctions?.value
      },
      sortRawFunctions: a?.sortRawFunctions?.value
    }) : t.value)
  };
}
function Qj(e, t, n, a) {
  const r = new Intl.Collator(n, {
    sensitivity: "accent",
    usage: "sort"
  });
  return e.map((o) => [o, a?.transform ? a.transform(o) : o]).sort((o, l) => {
    for (let s = 0; s < t.length; s++) {
      let d = !1;
      const u = t[s].key, f = t[s].order ?? "asc";
      if (f === !1) continue;
      let _ = Jl(o[1], u), g = Jl(l[1], u), v = o[0].raw, w = l[0].raw;
      if (f === "desc" && ([_, g] = [g, _], [v, w] = [w, v]), a?.sortRawFunctions?.[u]) {
        const b = a.sortRawFunctions[u](v, w);
        if (b == null) continue;
        if (d = !0, b) return b;
      }
      if (a?.sortFunctions?.[u]) {
        const b = a.sortFunctions[u](_, g);
        if (b == null) continue;
        if (d = !0, b) return b;
      }
      if (!d) {
        if (_ instanceof Date && g instanceof Date)
          return _.getTime() - g.getTime();
        if ([_, g] = [_, g].map((b) => b != null ? b.toString().toLocaleLowerCase() : b), _ !== g)
          return kh(_) && kh(g) ? 0 : kh(_) ? -1 : kh(g) ? 1 : !isNaN(_) && !isNaN(g) ? Number(_) - Number(g) : r.compare(_, g);
      }
    }
    return 0;
  }).map((o) => {
    let [l] = o;
    return l;
  });
}
const Jj = De({
  items: {
    type: Array,
    default: () => []
  },
  itemValue: {
    type: [String, Array, Function],
    default: "id"
  },
  itemSelectable: {
    type: [String, Array, Function],
    default: null
  },
  returnObject: Boolean
}, "DataIterator-items");
function Xj(e, t) {
  const n = e.returnObject ? t : Da(t, e.itemValue), a = Da(t, e.itemSelectable, !0);
  return {
    type: "item",
    value: n,
    selectable: a,
    raw: t
  };
}
function Zj(e, t) {
  const n = [];
  for (const a of t)
    n.push(Xj(e, a));
  return n;
}
function eY(e) {
  return {
    items: z(() => Zj(e, e.items))
  };
}
const tY = De({
  search: String,
  loading: Boolean,
  ...vt(),
  ...Jj(),
  ...XP(),
  ...eO(),
  ...q0({
    itemsPerPage: 5
  }),
  ...$P(),
  ...U0(),
  ...im(),
  ...qt(),
  ...Gi({
    transition: {
      component: xf,
      hideOnLeave: !0
    }
  })
}, "VDataIterator"), nY = We()({
  name: "VDataIterator",
  props: tY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:expanded": (e) => !0,
    "update:currentItems": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "groupBy"), r = be(() => e.search), {
      items: i
    } = eY(e), {
      filteredItems: o
    } = om(e, i, r, {
      transform: (Y) => Y.raw
    }), {
      sortBy: l,
      multiSort: s,
      mustSort: d
    } = Vp(e), {
      page: u,
      itemsPerPage: f
    } = H0(e), {
      toggleSort: _
    } = Mp({
      sortBy: l,
      multiSort: s,
      mustSort: d,
      page: u
    }), {
      sortByWithGroups: g,
      opened: v,
      extractRows: w,
      isGroupOpen: b,
      toggleGroup: p
    } = Ep({
      groupBy: a,
      sortBy: l
    }), {
      sortedItems: y
    } = W0(e, o, g, {
      transform: (Y) => Y.raw
    }), {
      flatItems: S
    } = Pp(y, a, v), E = be(() => S.value.length), {
      startIndex: C,
      stopIndex: B,
      pageCount: O,
      prevPage: D,
      nextPage: T,
      setItemsPerPage: P,
      setPage: I
    } = z0({
      page: u,
      itemsPerPage: f,
      itemsLength: E
    }), {
      paginatedItems: M
    } = GP({
      items: S,
      startIndex: C,
      stopIndex: B,
      itemsPerPage: f
    }), V = z(() => w(M.value)), {
      isSelected: N,
      select: q,
      selectAll: j,
      toggleSelect: ee
    } = Dp(e, {
      allItems: i,
      currentPage: V
    }), {
      isExpanded: de,
      toggleExpand: Z
    } = Ip(e);
    Op({
      page: u,
      itemsPerPage: f,
      sortBy: l,
      groupBy: a,
      search: r
    });
    const F = z(() => ({
      page: u.value,
      itemsPerPage: f.value,
      sortBy: l.value,
      pageCount: O.value,
      toggleSort: _,
      prevPage: D,
      nextPage: T,
      setPage: I,
      setItemsPerPage: P,
      isSelected: N,
      select: q,
      selectAll: j,
      toggleSelect: ee,
      isExpanded: de,
      toggleExpand: Z,
      isGroupOpen: b,
      toggleGroup: p,
      items: V.value,
      groupedItems: M.value
    }));
    return Ge(() => h(e.tag, {
      class: Ee(["v-data-iterator", {
        "v-data-iterator--loading": e.loading
      }, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.header?.(F.value), h(Sr, {
        transition: e.transition
      }, {
        default: () => [e.loading ? h(Jf, {
          key: "loader",
          name: "v-data-iterator",
          active: !0
        }, {
          default: (Y) => n.loader?.(Y)
        }) : A("div", {
          key: "items"
        }, [M.value.length ? n.default?.(F.value) : n["no-data"]?.()])]
      }), n.footer?.(F.value)]
    })), {};
  }
});
function aY() {
  const e = Se([]);
  dw(() => e.value = []);
  function t(n, a) {
    e.value[a] = n;
  }
  return {
    refs: e,
    updateRef: t
  };
}
const rY = De({
  activeColor: String,
  start: {
    type: [Number, String],
    default: 1
  },
  modelValue: {
    type: Number,
    default: (e) => e.start
  },
  disabled: Boolean,
  length: {
    type: [Number, String],
    default: 1,
    validator: (e) => e % 1 === 0
  },
  totalVisible: [Number, String],
  firstIcon: {
    type: At,
    default: "$first"
  },
  prevIcon: {
    type: At,
    default: "$prev"
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  lastIcon: {
    type: At,
    default: "$last"
  },
  ariaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.root"
  },
  pageAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.page"
  },
  currentPageAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.currentPage"
  },
  firstAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.first"
  },
  previousAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.previous"
  },
  nextAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.next"
  },
  lastAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.last"
  },
  ellipsis: {
    type: String,
    default: "..."
  },
  showFirstLastPage: Boolean,
  ...Qr(),
  ...vt(),
  ...Qa(),
  ...za(),
  ...Hn(),
  ...To(),
  ...qt({
    tag: "nav"
  }),
  ...an(),
  ...Pi({
    variant: "text"
  })
}, "VPagination"), Lb = We()({
  name: "VPagination",
  props: rY(),
  emits: {
    "update:modelValue": (e) => !0,
    first: (e) => !0,
    prev: (e) => !0,
    next: (e) => !0,
    last: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = kt(e, "modelValue"), {
      t: i,
      n: o
    } = ua(), {
      isRtl: l
    } = Ra(), {
      themeClasses: s
    } = yn(e), {
      width: d
    } = mi(), u = ot(-1);
    ca(void 0, {
      scoped: !0
    });
    const {
      resizeRef: f
    } = Wi((D) => {
      if (!D.length) return;
      const {
        target: T,
        contentRect: P
      } = D[0], I = T.querySelector(".v-pagination__list > *");
      if (!I) return;
      const M = P.width, V = I.offsetWidth + parseFloat(getComputedStyle(I).marginRight) * 2;
      u.value = w(M, V);
    }), _ = z(() => parseInt(e.length, 10)), g = z(() => parseInt(e.start, 10)), v = z(() => e.totalVisible != null ? parseInt(e.totalVisible, 10) : u.value >= 0 ? u.value : w(d.value, 58));
    function w(D, T) {
      const P = e.showFirstLastPage ? 5 : 3;
      return Math.max(0, Math.floor(
        // Round to two decimal places to avoid floating point errors
        Number(((D - T * P) / T).toFixed(2))
      ));
    }
    const b = z(() => {
      if (_.value <= 0 || isNaN(_.value) || _.value > Number.MAX_SAFE_INTEGER) return [];
      if (v.value <= 0) return [];
      if (v.value === 1) return [r.value];
      if (_.value <= v.value)
        return ho(_.value, g.value);
      const D = v.value % 2 === 0, T = D ? v.value / 2 : Math.floor(v.value / 2), P = D ? T : T + 1, I = _.value - T;
      if (P - r.value >= 0)
        return [...ho(Math.max(1, v.value - 1), g.value), e.ellipsis, _.value];
      if (r.value - I >= (D ? 1 : 0)) {
        const M = v.value - 1, V = _.value - M + g.value;
        return [g.value, e.ellipsis, ...ho(M, V)];
      } else {
        const M = Math.max(1, v.value - 2), V = M === 1 ? r.value : r.value - Math.ceil(M / 2) + g.value;
        return [g.value, e.ellipsis, ...ho(M, V), e.ellipsis, _.value];
      }
    });
    function p(D, T, P) {
      D.preventDefault(), r.value = T, P && a(P, T);
    }
    const {
      refs: y,
      updateRef: S
    } = aY();
    ca({
      VPaginationBtn: {
        color: be(() => e.color),
        border: be(() => e.border),
        density: be(() => e.density),
        size: be(() => e.size),
        variant: be(() => e.variant),
        rounded: be(() => e.rounded),
        elevation: be(() => e.elevation)
      }
    });
    const E = z(() => b.value.map((D, T) => {
      const P = (I) => S(I, T);
      if (typeof D == "string")
        return {
          isActive: !1,
          key: `ellipsis-${T}`,
          page: D,
          props: {
            ref: P,
            ellipsis: !0,
            icon: !0,
            disabled: !0
          }
        };
      {
        const I = D === r.value;
        return {
          isActive: I,
          key: D,
          page: o(D),
          props: {
            ref: P,
            ellipsis: !1,
            icon: !0,
            disabled: !!e.disabled || Number(e.length) < 2,
            color: I ? e.activeColor : e.color,
            "aria-current": I,
            "aria-label": i(I ? e.currentPageAriaLabel : e.pageAriaLabel, D),
            onClick: (M) => p(M, D)
          }
        };
      }
    })), C = z(() => {
      const D = !!e.disabled || r.value <= g.value, T = !!e.disabled || r.value >= g.value + _.value - 1;
      return {
        first: e.showFirstLastPage ? {
          icon: l.value ? e.lastIcon : e.firstIcon,
          onClick: (P) => p(P, g.value, "first"),
          disabled: D,
          "aria-label": i(e.firstAriaLabel),
          "aria-disabled": D
        } : void 0,
        prev: {
          icon: l.value ? e.nextIcon : e.prevIcon,
          onClick: (P) => p(P, r.value - 1, "prev"),
          disabled: D,
          "aria-label": i(e.previousAriaLabel),
          "aria-disabled": D
        },
        next: {
          icon: l.value ? e.prevIcon : e.nextIcon,
          onClick: (P) => p(P, r.value + 1, "next"),
          disabled: T,
          "aria-label": i(e.nextAriaLabel),
          "aria-disabled": T
        },
        last: e.showFirstLastPage ? {
          icon: l.value ? e.firstIcon : e.lastIcon,
          onClick: (P) => p(P, g.value + _.value - 1, "last"),
          disabled: T,
          "aria-label": i(e.lastAriaLabel),
          "aria-disabled": T
        } : void 0
      };
    });
    function B() {
      const D = r.value - g.value;
      y.value[D]?.$el.focus();
    }
    function O(D) {
      D.key === Ly.left && !e.disabled && r.value > Number(e.start) ? (r.value = r.value - 1, Vt(B)) : D.key === Ly.right && !e.disabled && r.value < g.value + _.value - 1 && (r.value = r.value + 1, Vt(B));
    }
    return Ge(() => h(e.tag, {
      ref: f,
      class: Ee(["v-pagination", s.value, e.class]),
      style: Xe(e.style),
      role: "navigation",
      "aria-label": i(e.ariaLabel),
      onKeydown: O,
      "data-test": "v-pagination-root"
    }, {
      default: () => [A("ul", {
        class: "v-pagination__list"
      }, [e.showFirstLastPage && A("li", {
        key: "first",
        class: "v-pagination__first",
        "data-test": "v-pagination-first"
      }, [n.first ? n.first(C.value.first) : h(cn, He({
        _as: "VPaginationBtn"
      }, C.value.first), null)]), A("li", {
        key: "prev",
        class: "v-pagination__prev",
        "data-test": "v-pagination-prev"
      }, [n.prev ? n.prev(C.value.prev) : h(cn, He({
        _as: "VPaginationBtn"
      }, C.value.prev), null)]), E.value.map((D, T) => A("li", {
        key: D.key,
        class: Ee(["v-pagination__item", {
          "v-pagination__item--is-active": D.isActive
        }]),
        "data-test": "v-pagination-item"
      }, [n.item ? n.item(D) : h(cn, He({
        _as: "VPaginationBtn"
      }, D.props), {
        default: () => [D.page]
      })])), A("li", {
        key: "next",
        class: "v-pagination__next",
        "data-test": "v-pagination-next"
      }, [n.next ? n.next(C.value.next) : h(cn, He({
        _as: "VPaginationBtn"
      }, C.value.next), null)]), e.showFirstLastPage && A("li", {
        key: "last",
        class: "v-pagination__last",
        "data-test": "v-pagination-last"
      }, [n.last ? n.last(C.value.last) : h(cn, He({
        _as: "VPaginationBtn"
      }, C.value.last), null)])])]
    })), {};
  }
}), j0 = De({
  prevIcon: {
    type: At,
    default: "$prev"
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  firstIcon: {
    type: At,
    default: "$first"
  },
  lastIcon: {
    type: At,
    default: "$last"
  },
  itemsPerPageText: {
    type: String,
    default: "$vuetify.dataFooter.itemsPerPageText"
  },
  pageText: {
    type: String,
    default: "$vuetify.dataFooter.pageText"
  },
  firstPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.firstPage"
  },
  prevPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.prevPage"
  },
  nextPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.nextPage"
  },
  lastPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.lastPage"
  },
  itemsPerPageOptions: {
    type: Array,
    default: () => [{
      value: 10,
      title: "10"
    }, {
      value: 25,
      title: "25"
    }, {
      value: 50,
      title: "50"
    }, {
      value: 100,
      title: "100"
    }, {
      value: -1,
      title: "$vuetify.dataFooter.itemsPerPageAll"
    }]
  },
  showCurrentPage: Boolean
}, "VDataTableFooter"), Bf = We()({
  name: "VDataTableFooter",
  props: j0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), {
      page: r,
      pageCount: i,
      startIndex: o,
      stopIndex: l,
      itemsLength: s,
      itemsPerPage: d,
      setItemsPerPage: u
    } = Kj(), f = z(() => e.itemsPerPageOptions.map((_) => typeof _ == "number" ? {
      value: _,
      title: _ === -1 ? a("$vuetify.dataFooter.itemsPerPageAll") : String(_)
    } : {
      ..._,
      title: isNaN(Number(_.title)) ? a(_.title) : _.title
    }));
    return Ge(() => {
      const _ = Lb.filterProps(e);
      return A("div", {
        class: "v-data-table-footer"
      }, [n.prepend?.(), A("div", {
        class: "v-data-table-footer__items-per-page"
      }, [A("span", {
        "aria-label": a(e.itemsPerPageText)
      }, [a(e.itemsPerPageText)]), h(R0, {
        items: f.value,
        modelValue: d.value,
        "onUpdate:modelValue": (g) => u(Number(g)),
        density: "compact",
        variant: "outlined",
        "hide-details": !0
      }, null)]), A("div", {
        class: "v-data-table-footer__info"
      }, [A("div", null, [a(e.pageText, s.value ? o.value + 1 : 0, l.value, s.value)])]), A("div", {
        class: "v-data-table-footer__pagination"
      }, [h(Lb, He({
        modelValue: r.value,
        "onUpdate:modelValue": (g) => r.value = g,
        density: "comfortable",
        "first-aria-label": e.firstPageLabel,
        "last-aria-label": e.lastPageLabel,
        length: i.value,
        "next-aria-label": e.nextPageLabel,
        "previous-aria-label": e.prevPageLabel,
        rounded: !0,
        "show-first-last-page": !0,
        "total-visible": e.showCurrentPage ? 1 : 0,
        variant: "plain"
      }, _), null)])]);
    }), {};
  }
}), q_ = Q3({
  align: {
    type: String,
    default: "start"
  },
  fixed: Boolean,
  fixedOffset: [Number, String],
  height: [Number, String],
  lastFixed: Boolean,
  noPadding: Boolean,
  tag: String,
  width: [Number, String],
  maxWidth: [Number, String],
  nowrap: Boolean
}, (e, t) => {
  let {
    slots: n
  } = t;
  const a = e.tag ?? "td";
  return h(a, {
    tabindex: "0",
    class: Ee(["v-data-table__td", {
      "v-data-table-column--fixed": e.fixed,
      "v-data-table-column--last-fixed": e.lastFixed,
      "v-data-table-column--no-padding": e.noPadding,
      "v-data-table-column--nowrap": e.nowrap
    }, `v-data-table-column--align-${e.align}`]),
    style: {
      height: ht(e.height),
      width: ht(e.width),
      maxWidth: ht(e.maxWidth),
      left: ht(e.fixedOffset || null)
    }
  }, {
    default: () => [n.default?.()]
  });
}), iY = De({
  headers: Array
}, "DataTable-header"), aO = Symbol.for("vuetify:data-table-headers"), rO = {
  title: "",
  sortable: !1
}, oY = {
  ...rO,
  width: 48
};
function sY() {
  const t = (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : []).map((n) => ({
    element: n,
    priority: 0
  }));
  return {
    enqueue: (n, a) => {
      let r = !1;
      for (let i = 0; i < t.length; i++)
        if (t[i].priority > a) {
          t.splice(i, 0, {
            element: n,
            priority: a
          }), r = !0;
          break;
        }
      r || t.push({
        element: n,
        priority: a
      });
    },
    size: () => t.length,
    count: () => {
      let n = 0;
      if (!t.length) return 0;
      const a = Math.floor(t[0].priority);
      for (let r = 0; r < t.length; r++)
        Math.floor(t[r].priority) === a && (n += 1);
      return n;
    },
    dequeue: () => t.shift()
  };
}
function Fb(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  if (!e.children)
    t.push(e);
  else
    for (const n of e.children)
      Fb(n, t);
  return t;
}
function iO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : /* @__PURE__ */ new Set();
  for (const n of e)
    n.key && t.add(n.key), n.children && iO(n.children, t);
  return t;
}
function lY(e) {
  if (e.key) {
    if (e.key === "data-table-group") return rO;
    if (["data-table-expand", "data-table-select"].includes(e.key)) return oY;
  }
}
function Y0(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return e.children ? Math.max(t, ...e.children.map((n) => Y0(n, t + 1))) : t;
}
function cY(e) {
  let t = !1;
  function n(i) {
    let o = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
    if (i)
      if (o && (i.fixed = !0), i.fixed)
        if (i.children)
          for (let l = i.children.length - 1; l >= 0; l--)
            n(i.children[l], !0);
        else
          t ? isNaN(Number(i.width)) ? (`${i.key}`, void 0) : i.minWidth = Math.max(Number(i.width) || 0, Number(i.minWidth) || 0) : i.lastFixed = !0, t = !0;
      else if (i.children)
        for (let l = i.children.length - 1; l >= 0; l--)
          n(i.children[l]);
      else
        t = !1;
  }
  for (let i = e.length - 1; i >= 0; i--)
    n(e[i]);
  function a(i) {
    let o = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
    if (!i) return o;
    if (i.children) {
      i.fixedOffset = o;
      for (const l of i.children)
        o = a(l, o);
    } else i.fixed && (i.fixedOffset = o, o += parseFloat(i.width || "0") || 0);
    return o;
  }
  let r = 0;
  for (const i of e)
    r = a(i, r);
}
function uY(e, t) {
  const n = [];
  let a = 0;
  const r = sY(e);
  for (; r.size() > 0; ) {
    let o = r.count();
    const l = [];
    let s = 1;
    for (; o > 0; ) {
      const {
        element: d,
        priority: u
      } = r.dequeue(), f = t - a - Y0(d);
      if (l.push({
        ...d,
        rowspan: f ?? 1,
        colspan: d.children ? Fb(d).length : 1
      }), d.children)
        for (const _ of d.children) {
          const g = u % 1 + s / Math.pow(10, a + 2);
          r.enqueue(_, a + f + g);
        }
      s += 1, o -= 1;
    }
    a += 1, n.push(l);
  }
  return {
    columns: e.map((o) => Fb(o)).flat(),
    headers: n
  };
}
function oO(e) {
  const t = [];
  for (const n of e) {
    const a = {
      ...lY(n),
      ...n
    }, r = a.key ?? (typeof a.value == "string" ? a.value : null), i = a.value ?? r ?? null, o = {
      ...a,
      key: r,
      value: i,
      sortable: a.sortable ?? (a.key != null || !!a.sort),
      children: a.children ? oO(a.children) : void 0
    };
    t.push(o);
  }
  return t;
}
function K0(e, t) {
  const n = Se([]), a = Se([]), r = Se({}), i = Se({}), o = Se({});
  ea(() => {
    const d = (e.headers || Object.keys(e.items[0] ?? {}).map((w) => ({
      key: w,
      title: So(w)
    }))).slice(), u = iO(d);
    t?.groupBy?.value.length && !u.has("data-table-group") && d.unshift({
      key: "data-table-group",
      title: "Group"
    }), t?.showSelect?.value && !u.has("data-table-select") && d.unshift({
      key: "data-table-select"
    }), t?.showExpand?.value && !u.has("data-table-expand") && d.push({
      key: "data-table-expand"
    });
    const f = oO(d);
    cY(f);
    const _ = Math.max(...f.map((w) => Y0(w))) + 1, g = uY(f, _);
    n.value = g.headers, a.value = g.columns;
    const v = g.headers.flat(1);
    for (const w of v)
      w.key && (w.sortable && (w.sort && (r.value[w.key] = w.sort), w.sortRaw && (i.value[w.key] = w.sortRaw)), w.filter && (o.value[w.key] = w.filter));
  });
  const l = {
    headers: n,
    columns: a,
    sortFunctions: r,
    sortRawFunctions: i,
    filterFunctions: o
  };
  return Nn(aO, l), l;
}
function Rp() {
  const e = Gt(aO);
  if (!e) throw new Error("Missing headers!");
  return e;
}
const sO = De({
  color: String,
  disableSort: Boolean,
  fixedHeader: Boolean,
  multiSort: Boolean,
  sortAscIcon: {
    type: At,
    default: "$sortAsc"
  },
  sortDescIcon: {
    type: At,
    default: "$sortDesc"
  },
  headerProps: {
    type: Object
  },
  /** @deprecated */
  sticky: Boolean,
  ...cc(),
  ...bp()
}, "VDataTableHeaders"), ic = We()({
  name: "VDataTableHeaders",
  props: sO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), {
      toggleSort: r,
      sortBy: i,
      isSorted: o
    } = nO(), {
      someSelected: l,
      allSelected: s,
      selectAll: d,
      showSelectAll: u
    } = Bp(), {
      columns: f,
      headers: _
    } = Rp(), {
      loaderClasses: g
    } = Qf(e);
    function v(T, P) {
      if (!(!(e.sticky || e.fixedHeader) && !T.fixed))
        return {
          position: "sticky",
          left: T.fixed ? ht(T.fixedOffset) : void 0,
          top: e.sticky || e.fixedHeader ? `calc(var(--v-table-header-height) * ${P})` : void 0
        };
    }
    function w(T, P) {
      T.key === "Enter" && !e.disableSort && r(P);
    }
    function b(T) {
      const P = i.value.find((I) => I.key === T.key);
      return P ? P.order === "asc" ? e.sortAscIcon : e.sortDescIcon : e.sortAscIcon;
    }
    const {
      backgroundColorClasses: p,
      backgroundColorStyles: y
    } = An(() => e.color), {
      displayClasses: S,
      mobile: E
    } = mi(e), C = z(() => ({
      headers: _.value,
      columns: f.value,
      toggleSort: r,
      isSorted: o,
      sortBy: i.value,
      someSelected: l.value,
      allSelected: s.value,
      selectAll: d,
      getSortIcon: b
    })), B = z(() => ["v-data-table__th", {
      "v-data-table__th--sticky": e.sticky || e.fixedHeader
    }, S.value, g.value]), O = (T) => {
      let {
        column: P,
        x: I,
        y: M
      } = T;
      const V = P.key === "data-table-select" || P.key === "data-table-expand", N = He(e.headerProps ?? {}, P.headerProps ?? {});
      return h(q_, He({
        tag: "th",
        align: P.align,
        class: [{
          "v-data-table__th--sortable": P.sortable && !e.disableSort,
          "v-data-table__th--sorted": o(P),
          "v-data-table__th--fixed": P.fixed
        }, ...B.value],
        style: {
          width: ht(P.width),
          minWidth: ht(P.minWidth),
          maxWidth: ht(P.maxWidth),
          ...v(P, M)
        },
        colspan: P.colspan,
        rowspan: P.rowspan,
        onClick: P.sortable ? () => r(P) : void 0,
        fixed: P.fixed,
        nowrap: P.nowrap,
        lastFixed: P.lastFixed,
        noPadding: V
      }, N, {
        onKeydown: (q) => P.sortable && w(q, P)
      }), {
        default: () => {
          const q = `header.${P.key}`, j = {
            column: P,
            selectAll: d,
            isSorted: o,
            toggleSort: r,
            sortBy: i.value,
            someSelected: l.value,
            allSelected: s.value,
            getSortIcon: b
          };
          return n[q] ? n[q](j) : P.key === "data-table-select" ? n["header.data-table-select"]?.(j) ?? (u.value && h(rs, {
            modelValue: s.value,
            indeterminate: l.value && !s.value,
            "onUpdate:modelValue": d
          }, null)) : A("div", {
            class: "v-data-table-header__content"
          }, [A("span", null, [P.title]), P.sortable && !e.disableSort && h(pn, {
            key: "icon",
            class: "v-data-table-header__sort-icon",
            icon: b(P)
          }, null), e.multiSort && o(P) && A("div", {
            key: "badge",
            class: Ee(["v-data-table-header__sort-badge", ...p.value]),
            style: Xe(y.value)
          }, [i.value.findIndex((ee) => ee.key === P.key) + 1])]);
        }
      });
    }, D = () => {
      const T = z(() => f.value.filter((I) => I?.sortable && !e.disableSort)), P = z(() => {
        if (f.value.find((M) => M.key === "data-table-select") != null)
          return s.value ? "$checkboxOn" : l.value ? "$checkboxIndeterminate" : "$checkboxOff";
      });
      return h(q_, He({
        tag: "th",
        class: [...B.value],
        colspan: _.value.length + 1
      }, e.headerProps), {
        default: () => [A("div", {
          class: "v-data-table-header__content"
        }, [h(R0, {
          chips: !0,
          class: "v-data-table__td-sort-select",
          clearable: !0,
          density: "default",
          items: T.value,
          label: a("$vuetify.dataTable.sortBy"),
          multiple: e.multiSort,
          variant: "underlined",
          "onClick:clear": () => i.value = [],
          appendIcon: P.value,
          "onClick:append": () => d(!s.value)
        }, {
          ...n,
          chip: (I) => h(ed, {
            onClick: I.item.raw?.sortable ? () => r(I.item.raw) : void 0,
            onMousedown: (M) => {
              M.preventDefault(), M.stopPropagation();
            }
          }, {
            default: () => [I.item.title, h(pn, {
              class: Ee(["v-data-table__td-sort-icon", o(I.item.raw) && "v-data-table__td-sort-icon-active"]),
              icon: b(I.item.raw),
              size: "small"
            }, null)]
          })
        })])]
      });
    };
    Ge(() => E.value ? A("tr", null, [h(D, null, null)]) : A(Qe, null, [n.headers ? n.headers(C.value) : _.value.map((T, P) => A("tr", null, [T.map((I, M) => h(O, {
      column: I,
      x: M,
      y: P
    }, null))])), e.loading && A("tr", {
      class: "v-data-table-progress"
    }, [A("th", {
      colspan: f.value.length
    }, [h(Jf, {
      name: "v-data-table-progress",
      absolute: !0,
      active: !0,
      color: typeof e.loading == "boolean" ? void 0 : e.loading,
      indeterminate: !0
    }, {
      default: n.loader
    })])])]));
  }
}), dY = De({
  item: {
    type: Object,
    required: !0
  }
}, "VDataTableGroupHeaderRow"), fY = We()({
  name: "VDataTableGroupHeaderRow",
  props: dY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isGroupOpen: a,
      toggleGroup: r,
      extractRows: i
    } = WP(), {
      isSelected: o,
      isSomeSelected: l,
      select: s
    } = Bp(), {
      columns: d
    } = Rp(), u = z(() => i([e.item]));
    return () => A("tr", {
      class: "v-data-table-group-header-row",
      style: {
        "--v-data-table-group-header-row-depth": e.item.depth
      }
    }, [d.value.map((f) => {
      if (f.key === "data-table-group") {
        const _ = a(e.item) ? "$expand" : "$next", g = () => r(e.item);
        return n["data-table-group"]?.({
          item: e.item,
          count: u.value.length,
          props: {
            icon: _,
            onClick: g
          }
        }) ?? h(q_, {
          class: "v-data-table-group-header-row__column"
        }, {
          default: () => [h(cn, {
            size: "small",
            variant: "text",
            icon: _,
            onClick: g
          }, null), A("span", null, [e.item.value]), A("span", null, [ae("("), u.value.length, ae(")")])]
        });
      }
      if (f.key === "data-table-select") {
        const _ = o(u.value), g = l(u.value) && !_, v = (w) => s(u.value, w);
        return n["data-table-select"]?.({
          props: {
            modelValue: _,
            indeterminate: g,
            "onUpdate:modelValue": v
          }
        }) ?? A("td", null, [h(rs, {
          modelValue: _,
          indeterminate: g,
          "onUpdate:modelValue": v
        }, null)]);
      }
      return A("td", null, null);
    })]);
  }
}), mY = De({
  index: Number,
  item: Object,
  cellProps: [Object, Function],
  onClick: nr(),
  onContextmenu: nr(),
  onDblclick: nr(),
  ...cc()
}, "VDataTableRow"), G0 = We()({
  name: "VDataTableRow",
  props: mY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      displayClasses: a,
      mobile: r
    } = mi(e, "v-data-table__tr"), {
      isSelected: i,
      toggleSelect: o,
      someSelected: l,
      allSelected: s,
      selectAll: d
    } = Bp(), {
      isExpanded: u,
      toggleExpand: f
    } = HP(), {
      toggleSort: _,
      sortBy: g,
      isSorted: v
    } = nO(), {
      columns: w
    } = Rp();
    Ge(() => A("tr", {
      class: Ee(["v-data-table__tr", {
        "v-data-table__tr--clickable": !!(e.onClick || e.onContextmenu || e.onDblclick)
      }, a.value]),
      onClick: e.onClick,
      onContextmenu: e.onContextmenu,
      onDblclick: e.onDblclick
    }, [e.item && w.value.map((b, p) => {
      const y = e.item, S = `item.${b.key}`, E = `header.${b.key}`, C = {
        index: e.index,
        item: y.raw,
        internalItem: y,
        value: Jl(y.columns, b.key),
        column: b,
        isSelected: i,
        toggleSelect: o,
        isExpanded: u,
        toggleExpand: f
      }, B = {
        column: b,
        selectAll: d,
        isSorted: v,
        toggleSort: _,
        sortBy: g.value,
        someSelected: l.value,
        allSelected: s.value,
        getSortIcon: () => ""
      }, O = typeof e.cellProps == "function" ? e.cellProps({
        index: C.index,
        item: C.item,
        internalItem: C.internalItem,
        value: C.value,
        column: b
      }) : e.cellProps, D = typeof b.cellProps == "function" ? b.cellProps({
        index: C.index,
        item: C.item,
        internalItem: C.internalItem,
        value: C.value
      }) : b.cellProps;
      return h(q_, He({
        align: b.align,
        class: {
          "v-data-table__td--expanded-row": b.key === "data-table-expand",
          "v-data-table__td--select-row": b.key === "data-table-select"
        },
        fixed: b.fixed,
        fixedOffset: b.fixedOffset,
        lastFixed: b.lastFixed,
        maxWidth: r.value ? void 0 : b.maxWidth,
        noPadding: b.key === "data-table-select" || b.key === "data-table-expand",
        nowrap: b.nowrap,
        width: r.value ? void 0 : b.width
      }, O, D), {
        default: () => {
          if (b.key === "data-table-select")
            return n["item.data-table-select"]?.({
              ...C,
              props: {
                disabled: !y.selectable,
                modelValue: i([y]),
                onClick: Jn(() => o(y), ["stop"])
              }
            }) ?? h(rs, {
              disabled: !y.selectable,
              modelValue: i([y]),
              onClick: Jn((P) => o(y, e.index, P), ["stop"])
            }, null);
          if (b.key === "data-table-expand")
            return n["item.data-table-expand"]?.({
              ...C,
              props: {
                icon: u(y) ? "$collapse" : "$expand",
                size: "small",
                variant: "text",
                onClick: Jn(() => f(y), ["stop"])
              }
            }) ?? h(cn, {
              icon: u(y) ? "$collapse" : "$expand",
              size: "small",
              variant: "text",
              onClick: Jn(() => f(y), ["stop"])
            }, null);
          if (n[S] && !r.value) return n[S](C);
          const T = W(C.value);
          return r.value ? A(Qe, null, [A("div", {
            class: "v-data-table__td-title"
          }, [n[E]?.(B) ?? b.title]), A("div", {
            class: "v-data-table__td-value"
          }, [n[S]?.(C) ?? T])]) : T;
        }
      });
    })]));
  }
}), lO = De({
  loading: [Boolean, String],
  loadingText: {
    type: String,
    default: "$vuetify.dataIterator.loadingText"
  },
  hideNoData: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  noDataText: {
    type: String,
    default: "$vuetify.noDataText"
  },
  rowProps: [Object, Function],
  cellProps: [Object, Function],
  ...cc()
}, "VDataTableRows"), oc = We()({
  name: "VDataTableRows",
  inheritAttrs: !1,
  props: lO(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      columns: r
    } = Rp(), {
      expandOnClick: i,
      toggleExpand: o,
      isExpanded: l
    } = HP(), {
      isSelected: s,
      toggleSelect: d
    } = Bp(), {
      toggleGroup: u,
      isGroupOpen: f
    } = WP(), {
      t: _
    } = ua(), {
      mobile: g
    } = mi(e);
    return Ge(() => e.loading && (!e.items.length || a.loading) ? A("tr", {
      class: "v-data-table-rows-loading",
      key: "loading"
    }, [A("td", {
      colspan: r.value.length
    }, [a.loading?.() ?? _(e.loadingText)])]) : !e.loading && !e.items.length && !e.hideNoData ? A("tr", {
      class: "v-data-table-rows-no-data",
      key: "no-data"
    }, [A("td", {
      colspan: r.value.length
    }, [a["no-data"]?.() ?? _(e.noDataText)])]) : A(Qe, null, [e.items.map((v, w) => {
      if (v.type === "group") {
        const y = {
          index: w,
          item: v,
          columns: r.value,
          isExpanded: l,
          toggleExpand: o,
          isSelected: s,
          toggleSelect: d,
          toggleGroup: u,
          isGroupOpen: f
        };
        return a["group-header"] ? a["group-header"](y) : h(fY, He({
          key: `group-header_${v.id}`,
          item: v
        }, eC(n, ":group-header", () => y)), a);
      }
      const b = {
        index: w,
        item: v.raw,
        internalItem: v,
        columns: r.value,
        isExpanded: l,
        toggleExpand: o,
        isSelected: s,
        toggleSelect: d
      }, p = {
        ...b,
        props: He({
          key: `item_${v.key ?? v.index}`,
          onClick: i.value ? () => {
            o(v);
          } : void 0,
          index: w,
          item: v,
          cellProps: e.cellProps,
          mobile: g.value
        }, eC(n, ":row", () => b), typeof e.rowProps == "function" ? e.rowProps({
          item: b.item,
          index: b.index,
          internalItem: b.internalItem
        }) : e.rowProps)
      };
      return A(Qe, {
        key: p.props.key
      }, [a.item ? a.item(p) : h(G0, p.props, a), l(v) && a["expanded-row"]?.(b)]);
    })])), {};
  }
}), cO = De({
  fixedHeader: Boolean,
  fixedFooter: Boolean,
  height: [Number, String],
  hover: Boolean,
  ...vt(),
  ...Qa(),
  ...qt(),
  ...an()
}, "VTable"), sc = We()({
  name: "VTable",
  props: cO(),
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      densityClasses: i
    } = Ar(e);
    return Ge(() => h(e.tag, {
      class: Ee(["v-table", {
        "v-table--fixed-height": !!e.height,
        "v-table--fixed-header": e.fixedHeader,
        "v-table--fixed-footer": e.fixedFooter,
        "v-table--has-top": !!n.top,
        "v-table--has-bottom": !!n.bottom,
        "v-table--hover": e.hover
      }, r.value, i.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.top?.(), n.default ? A("div", {
        class: "v-table__wrapper",
        style: {
          height: ht(e.height)
        }
      }, [A("table", null, [n.default()])]) : n.wrapper?.(), n.bottom?.()]
    })), {};
  }
}), hY = De({
  items: {
    type: Array,
    default: () => []
  },
  itemValue: {
    type: [String, Array, Function],
    default: "id"
  },
  itemSelectable: {
    type: [String, Array, Function],
    default: null
  },
  rowProps: [Object, Function],
  cellProps: [Object, Function],
  returnObject: Boolean
}, "DataTable-items");
function _Y(e, t, n, a) {
  const r = e.returnObject ? t : Da(t, e.itemValue), i = Da(t, e.itemSelectable, !0), o = a.reduce((l, s) => (s.key != null && (l[s.key] = Da(t, s.value)), l), {});
  return {
    type: "item",
    key: e.returnObject ? Da(t, e.itemValue) : r,
    index: n,
    value: r,
    selectable: i,
    columns: o,
    raw: t
  };
}
function pY(e, t, n) {
  return t.map((a, r) => _Y(e, a, r, n));
}
function Q0(e, t) {
  return {
    items: z(() => pY(e, e.items, t.value))
  };
}
const J0 = De({
  ...lO(),
  hideDefaultBody: Boolean,
  hideDefaultFooter: Boolean,
  hideDefaultHeader: Boolean,
  width: [String, Number],
  search: String,
  ...$P(),
  ...U0(),
  ...iY(),
  ...hY(),
  ...XP(),
  ...eO(),
  ...sO(),
  ...cO()
}, "DataTable"), vY = De({
  ...q0(),
  ...J0(),
  ...im(),
  ...j0()
}, "VDataTable"), gY = We()({
  name: "VDataTable",
  props: vY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:expanded": (e) => !0,
    "update:currentItems": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = $0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = Vp(e), {
      page: s,
      itemsPerPage: d
    } = H0(e), {
      disableSort: u
    } = $u(e), {
      columns: f,
      headers: _,
      sortFunctions: g,
      sortRawFunctions: v,
      filterFunctions: w
    } = K0(e, {
      groupBy: r,
      showSelect: be(() => e.showSelect),
      showExpand: be(() => e.showExpand)
    }), {
      items: b
    } = Q0(e, f), p = be(() => e.search), {
      filteredItems: y
    } = om(e, b, p, {
      transform: (H) => H.columns,
      customKeyFilter: w
    }), {
      toggleSort: S
    } = Mp({
      sortBy: i,
      multiSort: o,
      mustSort: l,
      page: s
    }), {
      sortByWithGroups: E,
      opened: C,
      extractRows: B,
      isGroupOpen: O,
      toggleGroup: D
    } = Ep({
      groupBy: r,
      sortBy: i,
      disableSort: u
    }), {
      sortedItems: T
    } = W0(e, y, E, {
      transform: (H) => ({
        ...H.raw,
        ...H.columns
      }),
      sortFunctions: g,
      sortRawFunctions: v
    }), {
      flatItems: P
    } = Pp(T, r, C), I = z(() => P.value.length), {
      startIndex: M,
      stopIndex: V,
      pageCount: N,
      setItemsPerPage: q
    } = z0({
      page: s,
      itemsPerPage: d,
      itemsLength: I
    }), {
      paginatedItems: j
    } = GP({
      items: P,
      startIndex: M,
      stopIndex: V,
      itemsPerPage: d
    }), ee = z(() => B(j.value)), {
      isSelected: de,
      select: Z,
      selectAll: F,
      toggleSelect: Y,
      someSelected: se,
      allSelected: X
    } = Dp(e, {
      allItems: b,
      currentPage: ee
    }), {
      isExpanded: he,
      toggleExpand: ve
    } = Ip(e);
    Op({
      page: s,
      itemsPerPage: d,
      sortBy: i,
      groupBy: r,
      search: p
    }), ca({
      VDataTableRows: {
        hideNoData: be(() => e.hideNoData),
        noDataText: be(() => e.noDataText),
        loading: be(() => e.loading),
        loadingText: be(() => e.loadingText)
      }
    });
    const pe = z(() => ({
      page: s.value,
      itemsPerPage: d.value,
      sortBy: i.value,
      pageCount: N.value,
      toggleSort: S,
      setItemsPerPage: q,
      someSelected: se.value,
      allSelected: X.value,
      isSelected: de,
      select: Z,
      selectAll: F,
      toggleSelect: Y,
      isExpanded: he,
      toggleExpand: ve,
      isGroupOpen: O,
      toggleGroup: D,
      items: ee.value.map((H) => H.raw),
      internalItems: ee.value,
      groupedItems: j.value,
      columns: f.value,
      headers: _.value
    }));
    return Ge(() => {
      const H = Bf.filterProps(e), we = ic.filterProps(e), Me = oc.filterProps(e), Re = sc.filterProps(e);
      return h(sc, He({
        class: ["v-data-table", {
          "v-data-table--show-select": e.showSelect,
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, Re, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(pe.value),
        default: () => a.default ? a.default(pe.value) : A(Qe, null, [a.colgroup?.(pe.value), !e.hideDefaultHeader && A("thead", {
          key: "thead"
        }, [h(ic, we, a)]), a.thead?.(pe.value), !e.hideDefaultBody && A("tbody", null, [a["body.prepend"]?.(pe.value), a.body ? a.body(pe.value) : h(oc, He(n, Me, {
          items: j.value
        }), a), a["body.append"]?.(pe.value)]), a.tbody?.(pe.value), a.tfoot?.(pe.value)]),
        bottom: () => a.bottom ? a.bottom(pe.value) : !e.hideDefaultFooter && A(Qe, null, [h(Go, null, null), h(Bf, H, {
          prepend: a["footer.prepend"]
        })])
      });
    }), {};
  }
}), yY = De({
  ...la(J0(), ["hideDefaultFooter"]),
  ...U0(),
  ...wP(),
  ...im()
}, "VDataTableVirtual"), bY = We()({
  name: "VDataTableVirtual",
  props: yY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:expanded": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = $0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = Vp(e), {
      disableSort: s
    } = $u(e), {
      columns: d,
      headers: u,
      filterFunctions: f,
      sortFunctions: _,
      sortRawFunctions: g
    } = K0(e, {
      groupBy: r,
      showSelect: be(() => e.showSelect),
      showExpand: be(() => e.showExpand)
    }), {
      items: v
    } = Q0(e, d), w = be(() => e.search), {
      filteredItems: b
    } = om(e, v, w, {
      transform: (Re) => Re.columns,
      customKeyFilter: f
    }), {
      toggleSort: p
    } = Mp({
      sortBy: i,
      multiSort: o,
      mustSort: l
    }), {
      sortByWithGroups: y,
      opened: S,
      extractRows: E,
      isGroupOpen: C,
      toggleGroup: B
    } = Ep({
      groupBy: r,
      sortBy: i,
      disableSort: s
    }), {
      sortedItems: O
    } = W0(e, b, y, {
      transform: (Re) => ({
        ...Re.raw,
        ...Re.columns
      }),
      sortFunctions: _,
      sortRawFunctions: g
    }), {
      flatItems: D
    } = Pp(O, r, S), T = z(() => E(D.value)), {
      isSelected: P,
      select: I,
      selectAll: M,
      toggleSelect: V,
      someSelected: N,
      allSelected: q
    } = Dp(e, {
      allItems: T,
      currentPage: T
    }), {
      isExpanded: j,
      toggleExpand: ee
    } = Ip(e), {
      containerRef: de,
      markerRef: Z,
      paddingTop: F,
      paddingBottom: Y,
      computedItems: se,
      handleItemResize: X,
      handleScroll: he,
      handleScrollend: ve,
      calculateVisibleItems: pe,
      scrollToIndex: H
    } = kP(e, D), we = z(() => se.value.map((Re) => Re.raw));
    Op({
      sortBy: i,
      page: ot(1),
      itemsPerPage: ot(-1),
      groupBy: r,
      search: w
    }), ca({
      VDataTableRows: {
        hideNoData: be(() => e.hideNoData),
        noDataText: be(() => e.noDataText),
        loading: be(() => e.loading),
        loadingText: be(() => e.loadingText)
      }
    });
    const Me = z(() => ({
      sortBy: i.value,
      toggleSort: p,
      someSelected: N.value,
      allSelected: q.value,
      isSelected: P,
      select: I,
      selectAll: M,
      toggleSelect: V,
      isExpanded: j,
      toggleExpand: ee,
      isGroupOpen: C,
      toggleGroup: B,
      items: T.value.map((Re) => Re.raw),
      internalItems: T.value,
      groupedItems: D.value,
      columns: d.value,
      headers: u.value
    }));
    return Ge(() => {
      const Re = ic.filterProps(e), ce = oc.filterProps(e), te = sc.filterProps(e);
      return h(sc, He({
        class: ["v-data-table", {
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, te, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(Me.value),
        wrapper: () => A("div", {
          ref: de,
          onScrollPassive: he,
          onScrollend: ve,
          class: "v-table__wrapper",
          style: {
            height: ht(e.height)
          }
        }, [A("table", null, [a.colgroup?.(Me.value), !e.hideDefaultHeader && A("thead", {
          key: "thead"
        }, [h(ic, Re, a)]), a.thead?.(Me.value), !e.hideDefaultBody && A("tbody", {
          key: "tbody"
        }, [A("tr", {
          ref: Z,
          style: {
            height: ht(F.value),
            border: 0
          }
        }, [A("td", {
          colspan: d.value.length,
          style: {
            height: 0,
            border: 0
          }
        }, null)]), a["body.prepend"]?.(Me.value), h(oc, He(n, ce, {
          items: we.value
        }), {
          ...a,
          item: (G) => h(bP, {
            key: G.internalItem.index,
            renderless: !0,
            "onUpdate:height": (le) => X(G.internalItem.index, le)
          }, {
            default: (le) => {
              let {
                itemRef: K
              } = le;
              return a.item?.({
                ...G,
                itemRef: K
              }) ?? h(G0, He(G.props, {
                ref: K,
                key: G.internalItem.index,
                index: G.internalItem.index
              }), a);
            }
          })
        }), a["body.append"]?.(Me.value), A("tr", {
          style: {
            height: ht(Y.value),
            border: 0
          }
        }, [A("td", {
          colspan: d.value.length,
          style: {
            height: 0,
            border: 0
          }
        }, null)])]), a.tbody?.(Me.value), a.tfoot?.(Me.value)])]),
        bottom: () => a.bottom?.(Me.value)
      });
    }), {
      calculateVisibleItems: pe,
      scrollToIndex: H
    };
  }
}), wY = De({
  itemsLength: {
    type: [Number, String],
    required: !0
  },
  ...q0(),
  ...J0(),
  ...j0()
}, "VDataTableServer"), kY = We()({
  name: "VDataTableServer",
  props: wY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:expanded": (e) => !0,
    "update:groupBy": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = $0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = Vp(e), {
      page: s,
      itemsPerPage: d
    } = H0(e), {
      disableSort: u
    } = $u(e), f = z(() => parseInt(e.itemsLength, 10)), {
      columns: _,
      headers: g
    } = K0(e, {
      groupBy: r,
      showSelect: be(() => e.showSelect),
      showExpand: be(() => e.showExpand)
    }), {
      items: v
    } = Q0(e, _), {
      toggleSort: w
    } = Mp({
      sortBy: i,
      multiSort: o,
      mustSort: l,
      page: s
    }), {
      opened: b,
      isGroupOpen: p,
      toggleGroup: y,
      extractRows: S
    } = Ep({
      groupBy: r,
      sortBy: i,
      disableSort: u
    }), {
      pageCount: E,
      setItemsPerPage: C
    } = z0({
      page: s,
      itemsPerPage: d,
      itemsLength: f
    }), {
      flatItems: B
    } = Pp(v, r, b), {
      isSelected: O,
      select: D,
      selectAll: T,
      toggleSelect: P,
      someSelected: I,
      allSelected: M
    } = Dp(e, {
      allItems: v,
      currentPage: v
    }), {
      isExpanded: V,
      toggleExpand: N
    } = Ip(e), q = z(() => S(v.value));
    Op({
      page: s,
      itemsPerPage: d,
      sortBy: i,
      groupBy: r,
      search: be(() => e.search)
    }), Nn("v-data-table", {
      toggleSort: w,
      sortBy: i
    }), ca({
      VDataTableRows: {
        hideNoData: be(() => e.hideNoData),
        noDataText: be(() => e.noDataText),
        loading: be(() => e.loading),
        loadingText: be(() => e.loadingText)
      }
    });
    const j = z(() => ({
      page: s.value,
      itemsPerPage: d.value,
      sortBy: i.value,
      pageCount: E.value,
      toggleSort: w,
      setItemsPerPage: C,
      someSelected: I.value,
      allSelected: M.value,
      isSelected: O,
      select: D,
      selectAll: T,
      toggleSelect: P,
      isExpanded: V,
      toggleExpand: N,
      isGroupOpen: p,
      toggleGroup: y,
      items: q.value.map((ee) => ee.raw),
      internalItems: q.value,
      groupedItems: B.value,
      columns: _.value,
      headers: g.value
    }));
    Ge(() => {
      const ee = Bf.filterProps(e), de = ic.filterProps(e), Z = oc.filterProps(e), F = sc.filterProps(e);
      return h(sc, He({
        class: ["v-data-table", {
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, F, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(j.value),
        default: () => a.default ? a.default(j.value) : A(Qe, null, [a.colgroup?.(j.value), !e.hideDefaultHeader && A("thead", {
          key: "thead",
          class: "v-data-table__thead",
          role: "rowgroup"
        }, [h(ic, de, a)]), a.thead?.(j.value), !e.hideDefaultBody && A("tbody", {
          class: "v-data-table__tbody",
          role: "rowgroup"
        }, [a["body.prepend"]?.(j.value), a.body ? a.body(j.value) : h(oc, He(n, Z, {
          items: B.value
        }), a), a["body.append"]?.(j.value)]), a.tbody?.(j.value), a.tfoot?.(j.value)]),
        bottom: () => a.bottom ? a.bottom(j.value) : !e.hideDefaultFooter && A(Qe, null, [h(Go, null, null), h(Bf, ee, {
          prepend: a["footer.prepend"]
        })])
      });
    });
  }
}), SY = De({
  fluid: {
    type: Boolean,
    default: !1
  },
  ...vt(),
  ...La(),
  ...qt()
}, "VContainer"), CY = We()({
  name: "VContainer",
  props: SY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      rtlClasses: a
    } = Ra(), {
      dimensionStyles: r
    } = Fa(e);
    return Ge(() => h(e.tag, {
      class: Ee(["v-container", {
        "v-container--fluid": e.fluid
      }, a.value, e.class]),
      style: Xe([r.value, e.style])
    }, n)), {};
  }
}), uO = op.reduce((e, t) => (e[t] = {
  type: [Boolean, String, Number],
  default: !1
}, e), {}), dO = op.reduce((e, t) => {
  const n = "offset" + So(t);
  return e[n] = {
    type: [String, Number],
    default: null
  }, e;
}, {}), fO = op.reduce((e, t) => {
  const n = "order" + So(t);
  return e[n] = {
    type: [String, Number],
    default: null
  }, e;
}, {}), sA = {
  col: Object.keys(uO),
  offset: Object.keys(dO),
  order: Object.keys(fO)
};
function AY(e, t, n) {
  let a = e;
  if (!(n == null || n === !1)) {
    if (t) {
      const r = t.replace(e, "");
      a += `-${r}`;
    }
    return e === "col" && (a = "v-" + a), e === "col" && (n === "" || n === !0) || (a += `-${n}`), a.toLowerCase();
  }
}
const xY = ["auto", "start", "end", "center", "baseline", "stretch"], TY = De({
  cols: {
    type: [Boolean, String, Number],
    default: !1
  },
  ...uO,
  offset: {
    type: [String, Number],
    default: null
  },
  ...dO,
  order: {
    type: [String, Number],
    default: null
  },
  ...fO,
  alignSelf: {
    type: String,
    default: null,
    validator: (e) => xY.includes(e)
  },
  ...vt(),
  ...qt()
}, "VCol"), IY = We()({
  name: "VCol",
  props: TY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = z(() => {
      const r = [];
      let i;
      for (i in sA)
        sA[i].forEach((l) => {
          const s = e[l], d = AY(i, l, s);
          d && r.push(d);
        });
      const o = r.some((l) => l.startsWith("v-col-"));
      return r.push({
        // Default to .v-col if no other col-{bp}-* classes generated nor `cols` specified.
        "v-col": !o || !e.cols,
        [`v-col-${e.cols}`]: e.cols,
        [`offset-${e.offset}`]: e.offset,
        [`order-${e.order}`]: e.order,
        [`align-self-${e.alignSelf}`]: e.alignSelf
      }), r;
    });
    return () => Co(e.tag, {
      class: [a.value, e.class],
      style: e.style
    }, n.default?.());
  }
}), X0 = ["start", "end", "center"], mO = ["space-between", "space-around", "space-evenly"];
function Z0(e, t) {
  return op.reduce((n, a) => {
    const r = e + So(a);
    return n[r] = t(), n;
  }, {});
}
const EY = [...X0, "baseline", "stretch"], hO = (e) => EY.includes(e), _O = Z0("align", () => ({
  type: String,
  default: null,
  validator: hO
})), PY = [...X0, ...mO], pO = (e) => PY.includes(e), vO = Z0("justify", () => ({
  type: String,
  default: null,
  validator: pO
})), OY = [...X0, ...mO, "stretch"], gO = (e) => OY.includes(e), yO = Z0("alignContent", () => ({
  type: String,
  default: null,
  validator: gO
})), lA = {
  align: Object.keys(_O),
  justify: Object.keys(vO),
  alignContent: Object.keys(yO)
}, DY = {
  align: "align",
  justify: "justify",
  alignContent: "align-content"
};
function BY(e, t, n) {
  let a = DY[e];
  if (n != null) {
    if (t) {
      const r = t.replace(e, "");
      a += `-${r}`;
    }
    return a += `-${n}`, a.toLowerCase();
  }
}
const VY = De({
  dense: Boolean,
  noGutters: Boolean,
  align: {
    type: String,
    default: null,
    validator: hO
  },
  ..._O,
  justify: {
    type: String,
    default: null,
    validator: pO
  },
  ...vO,
  alignContent: {
    type: String,
    default: null,
    validator: gO
  },
  ...yO,
  ...vt(),
  ...qt()
}, "VRow"), MY = We()({
  name: "VRow",
  props: VY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = z(() => {
      const r = [];
      let i;
      for (i in lA)
        lA[i].forEach((o) => {
          const l = e[o], s = BY(i, o, l);
          s && r.push(s);
        });
      return r.push({
        "v-row--no-gutters": e.noGutters,
        "v-row--dense": e.dense,
        [`align-${e.align}`]: e.align,
        [`justify-${e.justify}`]: e.justify,
        [`align-content-${e.alignContent}`]: e.alignContent
      }), r;
    });
    return () => Co(e.tag, {
      class: ["v-row", a.value, e.class],
      style: e.style
    }, n.default?.());
  }
}), bO = xo("v-spacer", "div", "VSpacer"), wO = De({
  active: {
    type: [String, Array],
    default: void 0
  },
  controlHeight: [Number, String],
  disabled: {
    type: [Boolean, String, Array],
    default: null
  },
  nextIcon: {
    type: At,
    default: "$next"
  },
  prevIcon: {
    type: At,
    default: "$prev"
  },
  modeIcon: {
    type: At,
    default: "$subgroup"
  },
  text: String,
  viewMode: {
    type: String,
    default: "month"
  }
}, "VDatePickerControls"), Nb = We()({
  name: "VDatePickerControls",
  props: wO(),
  emits: {
    "click:year": () => !0,
    "click:month": () => !0,
    "click:prev": () => !0,
    "click:next": () => !0,
    "click:text": () => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = z(() => Array.isArray(e.disabled) ? e.disabled.includes("text") : !!e.disabled), r = z(() => Array.isArray(e.disabled) ? e.disabled.includes("mode") : !!e.disabled), i = z(() => Array.isArray(e.disabled) ? e.disabled.includes("prev") : !!e.disabled), o = z(() => Array.isArray(e.disabled) ? e.disabled.includes("next") : !!e.disabled);
    function l() {
      n("click:prev");
    }
    function s() {
      n("click:next");
    }
    function d() {
      n("click:year");
    }
    function u() {
      n("click:month");
    }
    return Ge(() => A("div", {
      class: Ee(["v-date-picker-controls"]),
      style: {
        "--v-date-picker-controls-height": ht(e.controlHeight)
      }
    }, [h(cn, {
      class: "v-date-picker-controls__month-btn",
      "data-testid": "month-btn",
      disabled: a.value,
      text: e.text,
      variant: "text",
      rounded: !0,
      onClick: u
    }, null), h(cn, {
      class: "v-date-picker-controls__mode-btn",
      "data-testid": "year-btn",
      disabled: r.value,
      density: "comfortable",
      icon: e.modeIcon,
      variant: "text",
      onClick: d
    }, null), h(bO, null, null), A("div", {
      class: "v-date-picker-controls__month"
    }, [h(cn, {
      "data-testid": "prev-month",
      disabled: i.value,
      density: "comfortable",
      icon: e.prevIcon,
      variant: "text",
      onClick: l
    }, null), h(cn, {
      "data-testid": "next-month",
      disabled: o.value,
      icon: e.nextIcon,
      density: "comfortable",
      variant: "text",
      onClick: s
    }, null)])])), {};
  }
}), RY = De({
  appendIcon: At,
  color: String,
  header: String,
  transition: String,
  onClick: nr()
}, "VDatePickerHeader"), Ub = We()({
  name: "VDatePickerHeader",
  props: RY(),
  emits: {
    click: () => !0,
    "click:append": () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color);
    function o() {
      n("click");
    }
    function l() {
      n("click:append");
    }
    return Ge(() => {
      const s = !!(a.default || e.header), d = !!(a.append || e.appendIcon);
      return A("div", {
        class: Ee(["v-date-picker-header", {
          "v-date-picker-header--clickable": !!e.onClick
        }, r.value]),
        style: Xe(i.value),
        onClick: o
      }, [a.prepend && A("div", {
        key: "prepend",
        class: "v-date-picker-header__prepend"
      }, [a.prepend()]), s && h(Sr, {
        key: "content",
        name: e.transition
      }, {
        default: () => [A("div", {
          key: e.header,
          class: "v-date-picker-header__content"
        }, [a.default?.() ?? e.header])]
      }), d && A("div", {
        class: "v-date-picker-header__append"
      }, [a.append ? h(Wt, {
        key: "append-defaults",
        disabled: !e.appendIcon,
        defaults: {
          VBtn: {
            icon: e.appendIcon,
            variant: "text"
          }
        }
      }, {
        default: () => [a.append?.()]
      }) : h(cn, {
        key: "append-btn",
        icon: e.appendIcon,
        variant: "text",
        onClick: l
      }, null)])]);
    }), {};
  }
}), LY = De({
  allowedDates: [Array, Function],
  disabled: {
    type: Boolean,
    default: null
  },
  displayValue: null,
  modelValue: Array,
  month: [Number, String],
  max: null,
  min: null,
  showAdjacentMonths: Boolean,
  year: [Number, String],
  weekdays: {
    type: Array,
    default: () => [0, 1, 2, 3, 4, 5, 6]
  },
  weeksInMonth: {
    type: String,
    default: "dynamic"
  },
  firstDayOfWeek: {
    type: [Number, String],
    default: void 0
  }
}, "calendar");
function FY(e) {
  const t = Uf(), n = kt(e, "modelValue", [], (g) => Zn(g).map((v) => t.date(v))), a = z(() => e.displayValue ? t.date(e.displayValue) : n.value.length > 0 ? t.date(n.value[0]) : e.min ? t.date(e.min) : Array.isArray(e.allowedDates) ? t.date(e.allowedDates[0]) : t.date()), r = kt(e, "year", void 0, (g) => {
    const v = g != null ? Number(g) : t.getYear(a.value);
    return t.startOfYear(t.setYear(t.date(), v));
  }, (g) => t.getYear(g)), i = kt(e, "month", void 0, (g) => {
    const v = g != null ? Number(g) : t.getMonth(a.value), w = t.setYear(t.startOfMonth(t.date()), t.getYear(r.value));
    return t.setMonth(w, v);
  }, (g) => t.getMonth(g)), o = z(() => {
    const g = t.toJsDate(t.startOfWeek(t.date(), e.firstDayOfWeek)).getDay();
    return [0, 1, 2, 3, 4, 5, 6].map((v) => (v + g) % 7);
  }), l = z(() => {
    const g = t.getWeekArray(i.value, e.firstDayOfWeek), v = g.flat(), w = 6 * 7;
    if (e.weeksInMonth === "static" && v.length < w) {
      const b = v[v.length - 1];
      let p = [];
      for (let y = 1; y <= w - v.length; y++)
        p.push(t.addDays(b, y)), y % 7 === 0 && (g.push(p), p = []);
    }
    return g;
  });
  function s(g, v) {
    return g.filter((w) => o.value.includes(t.toJsDate(w).getDay())).map((w, b) => {
      const p = t.toISO(w), y = !t.isSameMonth(w, i.value), S = t.isSameDay(w, t.startOfMonth(i.value)), E = t.isSameDay(w, t.endOfMonth(i.value)), C = t.isSameDay(w, i.value);
      return {
        date: w,
        formatted: t.format(w, "keyboardDate"),
        isAdjacent: y,
        isDisabled: _(w),
        isEnd: E,
        isHidden: y && !e.showAdjacentMonths,
        isSame: C,
        isSelected: n.value.some((B) => t.isSameDay(w, B)),
        isStart: S,
        isToday: t.isSameDay(w, v),
        isWeekEnd: b % 7 === 6,
        isWeekStart: b % 7 === 0,
        isoDate: p,
        localized: t.format(w, "dayOfMonth"),
        month: t.getMonth(w),
        year: t.getYear(w)
      };
    });
  }
  const d = z(() => {
    const g = t.startOfWeek(a.value, e.firstDayOfWeek), v = [];
    for (let b = 0; b <= 6; b++)
      v.push(t.addDays(g, b));
    const w = t.date();
    return s(v, w);
  }), u = z(() => {
    const g = l.value.flat(), v = t.date();
    return s(g, v);
  }), f = z(() => l.value.map((g) => g.length ? t.getWeek(g[0], e.firstDayOfWeek) : null));
  function _(g) {
    if (e.disabled) return !0;
    const v = t.date(g);
    return e.min && t.isAfter(t.date(e.min), v) || e.max && t.isAfter(v, t.date(e.max)) ? !0 : Array.isArray(e.allowedDates) && e.allowedDates.length > 0 ? !e.allowedDates.some((w) => t.isSameDay(t.date(w), v)) : typeof e.allowedDates == "function" ? !e.allowedDates(v) : !e.weekdays.includes(t.toJsDate(v).getDay());
  }
  return {
    displayValue: a,
    daysInMonth: u,
    daysInWeek: d,
    genDays: s,
    model: n,
    weeksInMonth: l,
    weekDays: o,
    weekNumbers: f
  };
}
const kO = De({
  color: String,
  hideWeekdays: Boolean,
  multiple: [Boolean, Number, String],
  showWeek: Boolean,
  transition: {
    type: String,
    default: "picker-transition"
  },
  reverseTransition: {
    type: String,
    default: "picker-reverse-transition"
  },
  ...la(LY(), ["displayValue"])
}, "VDatePickerMonth"), $b = We()({
  name: "VDatePickerMonth",
  props: kO(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:month": (e) => !0,
    "update:year": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Se(), {
      daysInMonth: i,
      model: o,
      weekNumbers: l
    } = FY(e), s = Uf(), d = ot(), u = ot(), f = ot(!1), _ = be(() => f.value ? e.reverseTransition : e.transition);
    e.multiple === "range" && o.value.length > 0 && (d.value = o.value[0], o.value.length > 1 && (u.value = o.value[o.value.length - 1]));
    const g = z(() => {
      const p = ["number", "string"].includes(typeof e.multiple) ? Number(e.multiple) : 1 / 0;
      return o.value.length >= p;
    });
    nt(i, (p, y) => {
      y && (f.value = s.isBefore(p[0].date, y[0].date));
    });
    function v(p) {
      const y = s.startOfDay(p);
      if (o.value.length === 0 ? d.value = void 0 : o.value.length === 1 && (d.value = o.value[0], u.value = void 0), !d.value)
        d.value = y, o.value = [d.value];
      else if (u.value)
        d.value = p, u.value = void 0, o.value = [d.value];
      else {
        if (s.isSameDay(y, d.value)) {
          d.value = void 0, o.value = [];
          return;
        } else s.isBefore(y, d.value) ? (u.value = s.endOfDay(d.value), d.value = y) : u.value = s.endOfDay(y);
        o.value = z4(s, d.value, u.value);
      }
    }
    function w(p) {
      const y = o.value.findIndex((S) => s.isSameDay(S, p));
      if (y === -1)
        o.value = [...o.value, p];
      else {
        const S = [...o.value];
        S.splice(y, 1), o.value = S;
      }
    }
    function b(p) {
      e.multiple === "range" ? v(p) : e.multiple ? w(p) : o.value = [p];
    }
    Ge(() => A("div", {
      class: "v-date-picker-month"
    }, [e.showWeek && A("div", {
      key: "weeks",
      class: "v-date-picker-month__weeks"
    }, [!e.hideWeekdays && A("div", {
      key: "hide-week-days",
      class: "v-date-picker-month__day"
    }, [ae(" ")]), l.value.map((p) => A("div", {
      class: Ee(["v-date-picker-month__day", "v-date-picker-month__day--adjacent"])
    }, [p]))]), h(Sr, {
      name: _.value
    }, {
      default: () => [A("div", {
        ref: r,
        key: i.value[0].date?.toString(),
        class: "v-date-picker-month__days"
      }, [!e.hideWeekdays && s.getWeekdays(e.firstDayOfWeek).map((p) => A("div", {
        class: Ee(["v-date-picker-month__day", "v-date-picker-month__weekday"])
      }, [p])), i.value.map((p, y) => {
        const S = {
          props: {
            class: "v-date-picker-month__day-btn",
            color: p.isSelected || p.isToday ? e.color : void 0,
            disabled: p.isDisabled,
            icon: !0,
            ripple: !1,
            text: p.localized,
            variant: p.isSelected ? "flat" : p.isToday ? "outlined" : "text",
            onClick: () => b(p.date)
          },
          item: p,
          i: y
        };
        return g.value && !p.isSelected && (p.isDisabled = !0), A("div", {
          class: Ee(["v-date-picker-month__day", {
            "v-date-picker-month__day--adjacent": p.isAdjacent,
            "v-date-picker-month__day--hide-adjacent": p.isHidden,
            "v-date-picker-month__day--selected": p.isSelected,
            "v-date-picker-month__day--week-end": p.isWeekEnd,
            "v-date-picker-month__day--week-start": p.isWeekStart
          }]),
          "data-v-date": p.isDisabled ? void 0 : p.isoDate
        }, [(e.showAdjacentMonths || !p.isAdjacent) && (a.day?.(S) ?? h(cn, S.props, null))]);
      })])]
    })]));
  }
}), SO = De({
  color: String,
  height: [String, Number],
  min: null,
  max: null,
  modelValue: Number,
  year: Number,
  allowedMonths: [Array, Function]
}, "VDatePickerMonths"), qb = We()({
  name: "VDatePickerMonths",
  props: SO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Uf(), i = kt(e, "modelValue"), o = z(() => {
      let s = r.startOfYear(r.date());
      return e.year && (s = r.setYear(s, e.year)), ho(12).map((d) => {
        const u = r.format(s, "monthShort"), f = !!(!l(d) || e.min && r.isAfter(r.startOfMonth(r.date(e.min)), s) || e.max && r.isAfter(s, r.startOfMonth(r.date(e.max))));
        return s = r.getNextMonth(s), {
          isDisabled: f,
          text: u,
          value: d
        };
      });
    });
    ea(() => {
      i.value = i.value ?? r.getMonth(r.date());
    });
    function l(s) {
      return Array.isArray(e.allowedMonths) && e.allowedMonths.length ? e.allowedMonths.includes(s) : typeof e.allowedMonths == "function" ? e.allowedMonths(s) : !0;
    }
    return Ge(() => A("div", {
      class: "v-date-picker-months",
      style: {
        height: ht(e.height)
      }
    }, [A("div", {
      class: "v-date-picker-months__content"
    }, [o.value.map((s, d) => {
      const u = {
        active: i.value === d,
        color: i.value === d ? e.color : void 0,
        disabled: s.isDisabled,
        rounded: !0,
        text: s.text,
        variant: i.value === s.value ? "flat" : "text",
        onClick: () => f(d)
      };
      function f(_) {
        if (i.value === _) {
          n("update:modelValue", i.value);
          return;
        }
        i.value = _;
      }
      return a.month?.({
        month: s,
        i: d,
        props: u
      }) ?? h(cn, He({
        key: "month"
      }, u), null);
    })])])), {};
  }
}), CO = De({
  color: String,
  height: [String, Number],
  min: null,
  max: null,
  modelValue: Number,
  allowedYears: [Array, Function]
}, "VDatePickerYears"), Hb = We()({
  name: "VDatePickerYears",
  props: CO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Uf(), i = kt(e, "modelValue"), o = z(() => {
      const d = r.getYear(r.date());
      let u = d - 100, f = d + 52;
      e.min && (u = r.getYear(r.date(e.min))), e.max && (f = r.getYear(r.date(e.max)));
      let _ = r.startOfYear(r.date());
      return _ = r.setYear(_, u), ho(f - u + 1, u).map((g) => {
        const v = r.format(_, "year");
        return _ = r.setYear(_, r.getYear(_) + 1), {
          text: v,
          value: g,
          isDisabled: !s(g)
        };
      });
    });
    ea(() => {
      i.value = i.value ?? r.getYear(r.date());
    });
    const l = g_();
    nn(async () => {
      await Vt(), l.el?.focus();
    });
    function s(d) {
      return Array.isArray(e.allowedYears) && e.allowedYears.length ? e.allowedYears.includes(d) : typeof e.allowedYears == "function" ? e.allowedYears(d) : !0;
    }
    return Ge(() => A("div", {
      class: "v-date-picker-years",
      style: {
        height: ht(e.height)
      }
    }, [A("div", {
      class: "v-date-picker-years__content"
    }, [o.value.map((d, u) => {
      const f = {
        ref: i.value === d.value ? l : void 0,
        active: i.value === d.value,
        color: i.value === d.value ? e.color : void 0,
        rounded: !0,
        text: d.text,
        disabled: d.isDisabled,
        variant: i.value === d.value ? "flat" : "text",
        onClick: () => {
          if (i.value === d.value) {
            n("update:modelValue", i.value);
            return;
          }
          i.value = d.value;
        }
      };
      return a.year?.({
        year: d,
        i: u,
        props: f
      }) ?? h(cn, He({
        key: "month"
      }, f), null);
    })])])), {};
  }
}), NY = De({
  // TODO: implement in v3.5
  // calendarIcon: {
  //   type: String,
  //   default: '$calendar',
  // },
  // keyboardIcon: {
  //   type: String,
  //   default: '$edit',
  // },
  // inputMode: {
  //   type: String as PropType<'calendar' | 'keyboard'>,
  //   default: 'calendar',
  // },
  // inputText: {
  //   type: String,
  //   default: '$vuetify.datePicker.input.placeholder',
  // },
  // inputPlaceholder: {
  //   type: String,
  //   default: 'dd/mm/yyyy',
  // },
  header: {
    type: String,
    default: "$vuetify.datePicker.header"
  },
  headerColor: String,
  ...wO(),
  ...kO({
    weeksInMonth: "static"
  }),
  ...la(SO(), ["modelValue"]),
  ...la(CO(), ["modelValue"]),
  ...N0({
    title: "$vuetify.datePicker.title"
  }),
  modelValue: null
}, "VDatePicker"), UY = We()({
  name: "VDatePicker",
  props: NY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:month": (e) => !0,
    "update:year": (e) => !0,
    // 'update:inputMode': (date: any) => true,
    "update:viewMode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = Uf(), {
      t: i
    } = ua(), {
      rtlClasses: o
    } = Ra(), l = kt(e, "modelValue", void 0, (j) => Zn(j).map((ee) => r.date(ee)), (j) => e.multiple ? j : j[0]), s = kt(e, "viewMode"), d = z(() => {
      const j = r.date(e.min);
      return e.min && r.isValid(j) ? j : null;
    }), u = z(() => {
      const j = r.date(e.max);
      return e.max && r.isValid(j) ? j : null;
    }), f = z(() => {
      const j = r.date();
      let ee = j;
      return l.value?.[0] ? ee = r.date(l.value[0]) : d.value && r.isBefore(j, d.value) ? ee = d.value : u.value && r.isAfter(j, u.value) && (ee = u.value), ee && r.isValid(ee) ? ee : j;
    }), _ = be(() => e.headerColor ?? e.color), g = kt(e, "month"), v = z({
      get: () => Number(g.value ?? r.getMonth(r.startOfMonth(f.value))),
      set: (j) => g.value = j
    }), w = kt(e, "year"), b = z({
      get: () => Number(w.value ?? r.getYear(r.startOfYear(r.setMonth(f.value, v.value)))),
      set: (j) => w.value = j
    }), p = ot(!1), y = z(() => e.multiple && l.value.length > 1 ? i("$vuetify.datePicker.itemsSelected", l.value.length) : l.value[0] && r.isValid(l.value[0]) ? r.format(r.date(l.value[0]), "normalDateWithWeekday") : i(e.header)), S = z(() => {
      let j = r.date();
      return j = r.setDate(j, 1), j = r.setMonth(j, v.value), j = r.setYear(j, b.value), r.format(j, "monthAndYear");
    }), E = be(() => `date-picker-header${p.value ? "-reverse" : ""}-transition`), C = z(() => {
      if (e.disabled) return !0;
      const j = [];
      if (s.value !== "month")
        j.push("prev", "next");
      else {
        let ee = r.date();
        if (ee = r.startOfMonth(ee), ee = r.setMonth(ee, v.value), ee = r.setYear(ee, b.value), d.value) {
          const de = r.addDays(r.startOfMonth(ee), -1);
          r.isAfter(d.value, de) && j.push("prev");
        }
        if (u.value) {
          const de = r.addDays(r.endOfMonth(ee), 1);
          r.isAfter(de, u.value) && j.push("next");
        }
      }
      return j;
    });
    function B(j, ee) {
      const de = e.allowedDates;
      if (typeof de != "function") return !0;
      const Z = r.getDiff(ee, j, "days");
      for (let F = 0; F < Z; F++)
        if (de(r.addDays(j, F))) return !0;
      return !1;
    }
    function O(j) {
      if (typeof e.allowedDates == "function") {
        const ee = r.parseISO(`${j}-01-01`);
        return B(ee, r.endOfYear(ee));
      }
      if (Array.isArray(e.allowedDates) && e.allowedDates.length) {
        for (const ee of e.allowedDates)
          if (r.getYear(r.date(ee)) === j) return !0;
        return !1;
      }
      return !0;
    }
    function D(j) {
      if (typeof e.allowedDates == "function") {
        const ee = r.parseISO(`${b.value}-${j + 1}-01`);
        return B(ee, r.endOfMonth(ee));
      }
      if (Array.isArray(e.allowedDates) && e.allowedDates.length) {
        for (const ee of e.allowedDates)
          if (r.getYear(r.date(ee)) === b.value && r.getMonth(r.date(ee)) === j) return !0;
        return !1;
      }
      return !0;
    }
    function T() {
      v.value < 11 ? v.value++ : (b.value++, v.value = 0, q()), N();
    }
    function P() {
      v.value > 0 ? v.value-- : (b.value--, v.value = 11, q()), N();
    }
    function I() {
      s.value = "month";
    }
    function M() {
      s.value = s.value === "months" ? "month" : "months";
    }
    function V() {
      s.value = s.value === "year" ? "month" : "year";
    }
    function N() {
      s.value === "months" && M();
    }
    function q() {
      s.value === "year" && V();
    }
    return nt(l, (j, ee) => {
      const de = Zn(ee), Z = Zn(j);
      if (!Z.length) return;
      const F = r.date(de[de.length - 1]), Y = r.date(Z[Z.length - 1]), se = r.getMonth(Y), X = r.getYear(Y);
      se !== v.value && (v.value = se, N()), X !== b.value && (b.value = X, q()), p.value = r.isBefore(F, Y);
    }), Ge(() => {
      const j = $_.filterProps(e), ee = Nb.filterProps(e), de = Ub.filterProps(e), Z = $b.filterProps(e), F = la(qb.filterProps(e), ["modelValue"]), Y = la(Hb.filterProps(e), ["modelValue"]), se = {
        color: _.value,
        header: y.value,
        transition: E.value
      };
      return h($_, He(j, {
        color: _.value,
        class: ["v-date-picker", `v-date-picker--${s.value}`, {
          "v-date-picker--show-week": e.showWeek
        }, o.value, e.class],
        style: e.style
      }), {
        title: () => a.title?.() ?? A("div", {
          class: "v-date-picker__title"
        }, [i(e.title)]),
        header: () => a.header ? h(Wt, {
          defaults: {
            VDatePickerHeader: {
              ...se
            }
          }
        }, {
          default: () => [a.header?.(se)]
        }) : h(Ub, He({
          key: "header"
        }, de, se, {
          onClick: s.value !== "month" ? I : void 0
        }), {
          ...a,
          default: void 0
        }),
        default: () => A(Qe, null, [h(Nb, He(ee, {
          disabled: C.value,
          text: S.value,
          "onClick:next": T,
          "onClick:prev": P,
          "onClick:month": M,
          "onClick:year": V
        }), null), h(xf, {
          hideOnLeave: !0
        }, {
          default: () => [s.value === "months" ? h(qb, He({
            key: "date-picker-months"
          }, F, {
            modelValue: v.value,
            "onUpdate:modelValue": [(X) => v.value = X, N],
            min: d.value,
            max: u.value,
            year: b.value,
            allowedMonths: D
          }), null) : s.value === "year" ? h(Hb, He({
            key: "date-picker-years"
          }, Y, {
            modelValue: b.value,
            "onUpdate:modelValue": [(X) => b.value = X, q],
            min: d.value,
            max: u.value,
            allowedYears: O
          }), null) : h($b, He({
            key: "date-picker-month"
          }, Z, {
            modelValue: l.value,
            "onUpdate:modelValue": (X) => l.value = X,
            month: v.value,
            "onUpdate:month": [(X) => v.value = X, N],
            year: b.value,
            "onUpdate:year": [(X) => b.value = X, q],
            min: d.value,
            max: u.value
          }), null)]
        })]),
        actions: a.actions
      });
    }), {};
  }
}), $Y = De({
  actionText: String,
  bgColor: String,
  color: String,
  icon: At,
  image: String,
  justify: {
    type: String,
    default: "center"
  },
  headline: String,
  title: String,
  text: String,
  textWidth: {
    type: [Number, String],
    default: 500
  },
  href: String,
  to: String,
  ...vt(),
  ...La(),
  ...To({
    size: void 0
  }),
  ...an()
}, "VEmptyState"), qY = We()({
  name: "VEmptyState",
  props: $Y(),
  emits: {
    "click:action": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = yn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.bgColor), {
      dimensionStyles: l
    } = Fa(e), {
      displayClasses: s
    } = mi();
    function d(u) {
      n("click:action", u);
    }
    return Ge(() => {
      const u = !!(a.actions || e.actionText), f = !!(a.headline || e.headline), _ = !!(a.title || e.title), g = !!(a.text || e.text), v = !!(a.media || e.image || e.icon), w = e.size || (e.image ? 200 : 96);
      return A("div", {
        class: Ee(["v-empty-state", {
          [`v-empty-state--${e.justify}`]: !0
        }, r.value, i.value, s.value, e.class]),
        style: Xe([o.value, l.value, e.style])
      }, [v && A("div", {
        key: "media",
        class: "v-empty-state__media"
      }, [a.media ? h(Wt, {
        key: "media-defaults",
        defaults: {
          VImg: {
            src: e.image,
            height: w
          },
          VIcon: {
            size: w,
            icon: e.icon
          }
        }
      }, {
        default: () => [a.media()]
      }) : A(Qe, null, [e.image ? h(as, {
        key: "image",
        src: e.image,
        height: w
      }, null) : e.icon ? h(pn, {
        key: "icon",
        color: e.color,
        size: w,
        icon: e.icon
      }, null) : void 0])]), f && A("div", {
        key: "headline",
        class: "v-empty-state__headline"
      }, [a.headline?.() ?? e.headline]), _ && A("div", {
        key: "title",
        class: "v-empty-state__title"
      }, [a.title?.() ?? e.title]), g && A("div", {
        key: "text",
        class: "v-empty-state__text",
        style: {
          maxWidth: ht(e.textWidth)
        }
      }, [a.text?.() ?? e.text]), a.default && A("div", {
        key: "content",
        class: "v-empty-state__content"
      }, [a.default()]), u && A("div", {
        key: "actions",
        class: "v-empty-state__actions"
      }, [h(Wt, {
        defaults: {
          VBtn: {
            class: "v-empty-state__action-btn",
            color: e.color ?? "surface-variant",
            href: e.href,
            text: e.actionText,
            to: e.to
          }
        }
      }, {
        default: () => [a.actions?.({
          props: {
            onClick: d
          }
        }) ?? h(cn, {
          onClick: d
        }, null)]
      })])]);
    }), {};
  }
}), Vf = Symbol.for("vuetify:v-expansion-panel"), AO = De({
  ...vt(),
  ...D0()
}, "VExpansionPanelText"), zb = We()({
  name: "VExpansionPanelText",
  props: AO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(Vf);
    if (!a) throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");
    const {
      hasContent: r,
      onAfterLeave: i
    } = B0(e, a.isSelected);
    return Ge(() => h(gp, {
      onAfterLeave: i
    }, {
      default: () => [ln(A("div", {
        class: Ee(["v-expansion-panel-text", e.class]),
        style: Xe(e.style)
      }, [n.default && r.value && A("div", {
        class: "v-expansion-panel-text__wrapper"
      }, [n.default?.()])]), [[Sa, a.isSelected.value]])]
    })), {};
  }
}), xO = De({
  color: String,
  expandIcon: {
    type: At,
    default: "$expand"
  },
  collapseIcon: {
    type: At,
    default: "$collapse"
  },
  hideActions: Boolean,
  focusable: Boolean,
  static: Boolean,
  ripple: {
    type: [Boolean, Object],
    default: !1
  },
  readonly: Boolean,
  ...vt(),
  ...La()
}, "VExpansionPanelTitle"), Wb = We()({
  name: "VExpansionPanelTitle",
  directives: {
    vRipple: Cr
  },
  props: xO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(Vf);
    if (!a) throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      dimensionStyles: o
    } = Fa(e), l = z(() => ({
      collapseIcon: e.collapseIcon,
      disabled: a.disabled.value,
      expanded: a.isSelected.value,
      expandIcon: e.expandIcon,
      readonly: e.readonly
    })), s = be(() => a.isSelected.value ? e.collapseIcon : e.expandIcon);
    return Ge(() => ln(A("button", {
      class: Ee(["v-expansion-panel-title", {
        "v-expansion-panel-title--active": a.isSelected.value,
        "v-expansion-panel-title--focusable": e.focusable,
        "v-expansion-panel-title--static": e.static
      }, r.value, e.class]),
      style: Xe([i.value, o.value, e.style]),
      type: "button",
      tabindex: a.disabled.value ? -1 : void 0,
      disabled: a.disabled.value,
      "aria-expanded": a.isSelected.value,
      onClick: e.readonly ? void 0 : a.toggle
    }, [A("span", {
      class: "v-expansion-panel-title__overlay"
    }, null), n.default?.(l.value), !e.hideActions && h(Wt, {
      defaults: {
        VIcon: {
          icon: s.value
        }
      }
    }, {
      default: () => [A("span", {
        class: "v-expansion-panel-title__icon"
      }, [n.actions?.(l.value) ?? h(pn, null, null)])]
    })]), [[Cr, e.ripple]])), {};
  }
}), TO = De({
  title: String,
  text: String,
  bgColor: String,
  ...za(),
  ...pc(),
  ...Hn(),
  ...qt(),
  ...xO(),
  ...AO()
}, "VExpansionPanel"), HY = We()({
  name: "VExpansionPanel",
  props: TO(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = vc(e, Vf), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.bgColor), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e), s = be(() => a?.disabled.value || e.disabled), d = z(() => a.group.items.value.reduce((_, g, v) => (a.group.selected.value.includes(g.id) && _.push(v), _), [])), u = z(() => {
      const _ = a.group.items.value.findIndex((g) => g.id === a.id);
      return !a.isSelected.value && d.value.some((g) => g - _ === 1);
    }), f = z(() => {
      const _ = a.group.items.value.findIndex((g) => g.id === a.id);
      return !a.isSelected.value && d.value.some((g) => g - _ === -1);
    });
    return Nn(Vf, a), Ge(() => {
      const _ = !!(n.text || e.text), g = !!(n.title || e.title), v = Wb.filterProps(e), w = zb.filterProps(e);
      return h(e.tag, {
        class: Ee(["v-expansion-panel", {
          "v-expansion-panel--active": a.isSelected.value,
          "v-expansion-panel--before-active": u.value,
          "v-expansion-panel--after-active": f.value,
          "v-expansion-panel--disabled": s.value
        }, l.value, r.value, e.class]),
        style: Xe([i.value, e.style])
      }, {
        default: () => [A("div", {
          class: Ee(["v-expansion-panel__shadow", ...o.value])
        }, null), h(Wt, {
          defaults: {
            VExpansionPanelTitle: {
              ...v
            },
            VExpansionPanelText: {
              ...w
            }
          }
        }, {
          default: () => [g && h(Wb, {
            key: "title"
          }, {
            default: () => [n.title ? n.title() : e.title]
          }), _ && h(zb, {
            key: "text"
          }, {
            default: () => [n.text ? n.text() : e.text]
          }), n.default?.()]
        })]
      });
    }), {
      groupItem: a
    };
  }
}), zY = ["default", "accordion", "inset", "popout"], WY = De({
  flat: Boolean,
  ..._c(),
  ...tl(TO(), ["bgColor", "collapseIcon", "color", "eager", "elevation", "expandIcon", "focusable", "hideActions", "readonly", "ripple", "rounded", "tile", "static"]),
  ...an(),
  ...vt(),
  ...qt(),
  variant: {
    type: String,
    default: "default",
    validator: (e) => zY.includes(e)
  }
}, "VExpansionPanels"), jY = We()({
  name: "VExpansionPanels",
  props: WY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      next: a,
      prev: r
    } = ol(e, Vf), {
      themeClasses: i
    } = yn(e), o = be(() => e.variant && `v-expansion-panels--variant-${e.variant}`);
    return ca({
      VExpansionPanel: {
        bgColor: be(() => e.bgColor),
        collapseIcon: be(() => e.collapseIcon),
        color: be(() => e.color),
        eager: be(() => e.eager),
        elevation: be(() => e.elevation),
        expandIcon: be(() => e.expandIcon),
        focusable: be(() => e.focusable),
        hideActions: be(() => e.hideActions),
        readonly: be(() => e.readonly),
        ripple: be(() => e.ripple),
        rounded: be(() => e.rounded),
        static: be(() => e.static)
      }
    }), Ge(() => h(e.tag, {
      class: Ee(["v-expansion-panels", {
        "v-expansion-panels--flat": e.flat,
        "v-expansion-panels--tile": e.tile
      }, i.value, o.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.default?.({
        prev: r,
        next: a
      })]
    })), {
      next: a,
      prev: r
    };
  }
}), YY = De({
  app: Boolean,
  appear: Boolean,
  extended: Boolean,
  layout: Boolean,
  offset: Boolean,
  modelValue: {
    type: Boolean,
    default: !0
  },
  ...la(wp({
    active: !0
  }), ["location"]),
  ...uc(),
  ...us(),
  ...Gi({
    transition: "fab-transition"
  })
}, "VFab"), KY = We()({
  name: "VFab",
  props: YY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), r = ot(56), i = Se(), {
      resizeRef: o
    } = Wi((f) => {
      f.length && (r.value = f[0].target.clientHeight);
    }), l = be(() => e.app || e.absolute), s = z(() => l.value ? e.location?.split(" ").shift() ?? "bottom" : !1), d = z(() => l.value ? e.location?.split(" ")[1] ?? "end" : !1);
    Fr(() => e.app, () => {
      const f = dc({
        id: e.name,
        order: z(() => parseInt(e.order, 10)),
        position: s,
        layoutSize: z(() => e.layout ? r.value + 24 : 0),
        elementSize: z(() => r.value + 24),
        active: z(() => e.app && a.value),
        absolute: be(() => e.absolute)
      });
      ea(() => {
        i.value = f.layoutItemStyles.value;
      });
    });
    const u = Se();
    return Ge(() => {
      const f = cn.filterProps(e);
      return A("div", {
        ref: u,
        class: Ee(["v-fab", {
          "v-fab--absolute": e.absolute,
          "v-fab--app": !!e.app,
          "v-fab--extended": e.extended,
          "v-fab--offset": e.offset,
          [`v-fab--${s.value}`]: l.value,
          [`v-fab--${d.value}`]: l.value
        }, e.class]),
        style: Xe([e.app ? {
          ...i.value
        } : {
          height: e.absolute ? "100%" : "inherit"
        }, e.style])
      }, [A("div", {
        class: "v-fab__container"
      }, [h(Sr, {
        appear: e.appear,
        transition: e.transition
      }, {
        default: () => [ln(h(cn, He({
          ref: o
        }, f, {
          active: void 0,
          location: void 0
        }), n), [[Sa, e.active]])]
      })])]);
    }), {};
  }
});
function GY() {
  function e(n) {
    return [...n.dataTransfer?.items ?? []].filter((r) => r.kind === "file").map((r) => r.webkitGetAsEntry()).filter(Boolean).length > 0 || [...n.dataTransfer?.files ?? []].length > 0;
  }
  async function t(n) {
    const a = [], r = [...n.dataTransfer?.items ?? []].filter((i) => i.kind === "file").map((i) => i.webkitGetAsEntry()).filter(Boolean);
    if (r.length)
      for (const i of r) {
        const o = await IO(i, EO(".", i));
        a.push(...o.map((l) => l.file));
      }
    else
      a.push(...n.dataTransfer?.files ?? []);
    return a;
  }
  return {
    handleDrop: t,
    hasFilesOrFolders: e
  };
}
function IO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
  return new Promise((n, a) => {
    e.isFile ? e.file((i) => n([{
      file: i,
      path: t
    }]), a) : e.isDirectory && e.createReader().readEntries(async (i) => {
      const o = [];
      for (const l of i)
        o.push(...await IO(l, EO(t, l)));
      n(o);
    });
  });
}
function EO(e, t) {
  return t.isDirectory ? `${e}/${t.name}` : e;
}
const QY = De({
  chips: Boolean,
  counter: Boolean,
  counterSizeString: {
    type: String,
    default: "$vuetify.fileInput.counterSize"
  },
  counterString: {
    type: String,
    default: "$vuetify.fileInput.counter"
  },
  hideInput: Boolean,
  multiple: Boolean,
  showSize: {
    type: [Boolean, Number, String],
    default: !1,
    validator: (e) => typeof e == "boolean" || [1e3, 1024].includes(Number(e))
  },
  ...fs({
    prependIcon: "$file"
  }),
  modelValue: {
    type: [Array, Object],
    default: (e) => e.multiple ? [] : null,
    validator: (e) => Zn(e).every((t) => t != null && typeof t == "object")
  },
  ...am({
    clearable: !0
  })
}, "VFileInput"), JY = We()({
  name: "VFileInput",
  inheritAttrs: !1,
  props: QY(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      t: i
    } = ua(), o = kt(e, "modelValue", e.modelValue, (q) => Zn(q), (q) => !e.multiple && Array.isArray(q) ? q[0] : q), {
      isFocused: l,
      focus: s,
      blur: d
    } = ds(e), u = z(() => typeof e.showSize != "boolean" ? e.showSize : void 0), f = z(() => (o.value ?? []).reduce((q, j) => {
      let {
        size: ee = 0
      } = j;
      return q + ee;
    }, 0)), _ = z(() => NS(f.value, u.value)), g = z(() => (o.value ?? []).map((q) => {
      const {
        name: j = "",
        size: ee = 0
      } = q;
      return e.showSize ? `${j} (${NS(ee, u.value)})` : j;
    })), v = z(() => {
      const q = o.value?.length ?? 0;
      return e.showSize ? i(e.counterSizeString, q, _.value) : i(e.counterString, q);
    }), w = Se(), b = Se(), p = Se(), y = be(() => l.value || e.active), S = z(() => ["plain", "underlined"].includes(e.variant)), E = ot(!1), {
      handleDrop: C,
      hasFilesOrFolders: B
    } = GY();
    function O() {
      p.value !== document.activeElement && p.value?.focus(), l.value || s();
    }
    function D(q) {
      p.value?.click();
    }
    function T(q) {
      a("mousedown:control", q);
    }
    function P(q) {
      p.value?.click(), a("click:control", q);
    }
    function I(q) {
      q.stopPropagation(), O(), Vt(() => {
        o.value = [], rp(e["onClick:clear"], q);
      });
    }
    function M(q) {
      q.preventDefault(), q.stopImmediatePropagation(), E.value = !0;
    }
    function V(q) {
      q.preventDefault(), E.value = !1;
    }
    async function N(q) {
      if (q.preventDefault(), q.stopImmediatePropagation(), E.value = !1, !p.value || !B(q)) return;
      const j = new DataTransfer();
      for (const ee of await C(q))
        j.items.add(ee);
      p.value.files = j.files, p.value.dispatchEvent(new Event("change", {
        bubbles: !0
      }));
    }
    return nt(o, (q) => {
      (!Array.isArray(q) || !q.length) && p.value && (p.value.value = "");
    }), Ge(() => {
      const q = !!(r.counter || e.counter), j = !!(q || r.details), [ee, de] = nl(n), {
        modelValue: Z,
        ...F
      } = hr.filterProps(e), Y = Qs.filterProps(e);
      return h(hr, He({
        ref: w,
        modelValue: e.multiple ? o.value : o.value[0],
        class: ["v-file-input", {
          "v-file-input--chips": !!e.chips,
          "v-file-input--dragging": E.value,
          "v-file-input--hide": e.hideInput,
          "v-input--plain-underlined": S.value
        }, e.class],
        style: e.style,
        "onClick:prepend": D
      }, ee, F, {
        centerAffix: !S.value,
        focused: l.value
      }), {
        ...r,
        default: (se) => {
          let {
            id: X,
            isDisabled: he,
            isDirty: ve,
            isReadonly: pe,
            isValid: H
          } = se;
          return h(Qs, He({
            ref: b,
            "prepend-icon": e.prependIcon,
            onMousedown: T,
            onClick: P,
            "onClick:clear": I,
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"]
          }, Y, {
            id: X.value,
            active: y.value || ve.value,
            dirty: ve.value || e.dirty,
            disabled: he.value,
            focused: l.value,
            error: H.value === !1,
            onDragover: M,
            onDrop: N
          }), {
            ...r,
            default: (we) => {
              let {
                props: {
                  class: Me,
                  ...Re
                }
              } = we;
              return A(Qe, null, [A("input", He({
                ref: p,
                type: "file",
                readonly: pe.value,
                disabled: he.value,
                multiple: e.multiple,
                name: e.name,
                onClick: (ce) => {
                  ce.stopPropagation(), pe.value && ce.preventDefault(), O();
                },
                onChange: (ce) => {
                  if (!ce.target) return;
                  const te = ce.target;
                  o.value = [...te.files ?? []];
                },
                onDragleave: V,
                onFocus: O,
                onBlur: d
              }, Re, de), null), A("div", {
                class: Ee(Me)
              }, [!!o.value?.length && !e.hideInput && (r.selection ? r.selection({
                fileNames: g.value,
                totalBytes: f.value,
                totalBytesReadable: _.value
              }) : e.chips ? g.value.map((ce) => h(ed, {
                key: ce,
                size: "small",
                text: ce
              }, null)) : g.value.join(", "))])]);
            }
          });
        },
        details: j ? (se) => A(Qe, null, [r.details?.(se), q && A(Qe, null, [A("span", null, null), h(Cp, {
          active: !!o.value?.length,
          value: v.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), pi({}, w, b, p);
  }
}), XY = De({
  app: Boolean,
  color: String,
  height: {
    type: [Number, String],
    default: "auto"
  },
  ...Qr(),
  ...vt(),
  ...za(),
  ...uc(),
  ...Hn(),
  ...qt({
    tag: "footer"
  }),
  ...an()
}, "VFooter"), ZY = We()({
  name: "VFooter",
  props: XY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Se(), {
      themeClasses: r
    } = yn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = An(() => e.color), {
      borderClasses: l
    } = _i(e), {
      elevationClasses: s
    } = ir(e), {
      roundedClasses: d
    } = fa(e), u = ot(32), {
      resizeRef: f
    } = Wi((g) => {
      g.length && (u.value = g[0].target.clientHeight);
    }), _ = z(() => e.height === "auto" ? u.value : parseInt(e.height, 10));
    return Fr(() => e.app, () => {
      const g = dc({
        id: e.name,
        order: z(() => parseInt(e.order, 10)),
        position: be(() => "bottom"),
        layoutSize: _,
        elementSize: z(() => e.height === "auto" ? void 0 : _.value),
        active: be(() => e.app),
        absolute: be(() => e.absolute)
      });
      ea(() => {
        a.value = g.layoutItemStyles.value;
      });
    }), Ge(() => h(e.tag, {
      ref: f,
      class: Ee(["v-footer", r.value, i.value, l.value, s.value, d.value, e.class]),
      style: Xe([o.value, e.app ? a.value : {
        height: ht(e.height)
      }, e.style])
    }, n)), {};
  }
}), e7 = De({
  ...vt(),
  ...sz()
}, "VForm"), t7 = We()({
  name: "VForm",
  props: e7(),
  emits: {
    "update:modelValue": (e) => !0,
    submit: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = lz(e), i = Se();
    function o(s) {
      s.preventDefault(), r.reset();
    }
    function l(s) {
      const d = s, u = r.validate();
      d.then = u.then.bind(u), d.catch = u.catch.bind(u), d.finally = u.finally.bind(u), a("submit", d), d.defaultPrevented || u.then((f) => {
        let {
          valid: _
        } = f;
        _ && i.value?.submit();
      }), d.preventDefault();
    }
    return Ge(() => A("form", {
      ref: i,
      class: Ee(["v-form", e.class]),
      style: Xe(e.style),
      novalidate: !0,
      onReset: o,
      onSubmit: l
    }, [n.default?.(r)])), pi(r, i);
  }
}), n7 = De({
  disabled: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  ...P0()
}, "VHover"), a7 = We()({
  name: "VHover",
  props: n7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      runOpenDelay: r,
      runCloseDelay: i
    } = O0(e, (o) => !e.disabled && (a.value = o));
    return () => n.default?.({
      isHovering: a.value,
      props: {
        onMouseenter: r,
        onMouseleave: i
      }
    });
  }
}), r7 = De({
  color: String,
  direction: {
    type: String,
    default: "vertical",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  side: {
    type: String,
    default: "end",
    validator: (e) => ["start", "end", "both"].includes(e)
  },
  mode: {
    type: String,
    default: "intersect",
    validator: (e) => ["intersect", "manual"].includes(e)
  },
  margin: [Number, String],
  loadMoreText: {
    type: String,
    default: "$vuetify.infiniteScroll.loadMore"
  },
  emptyText: {
    type: String,
    default: "$vuetify.infiniteScroll.empty"
  },
  ...La(),
  ...qt()
}, "VInfiniteScroll"), cA = fi({
  name: "VInfiniteScrollIntersect",
  props: {
    side: {
      type: String,
      required: !0
    },
    rootMargin: String
  },
  emits: {
    intersect: (e, t) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const {
      intersectionRef: a,
      isIntersecting: r
    } = Gf();
    return nt(r, async (i) => {
      n("intersect", e.side, i);
    }), Ge(() => A("div", {
      class: "v-infinite-scroll-intersect",
      style: {
        "--v-infinite-margin-size": e.rootMargin
      },
      ref: a
    }, [ae(" ")])), {};
  }
}), i7 = We()({
  name: "VInfiniteScroll",
  props: r7(),
  emits: {
    load: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Se(), i = ot("ok"), o = ot("ok"), l = z(() => ht(e.margin)), s = ot(!1);
    function d(C) {
      if (!r.value) return;
      const B = e.direction === "vertical" ? "scrollTop" : "scrollLeft";
      r.value[B] = C;
    }
    function u() {
      if (!r.value) return 0;
      const C = e.direction === "vertical" ? "scrollTop" : "scrollLeft";
      return r.value[C];
    }
    function f() {
      if (!r.value) return 0;
      const C = e.direction === "vertical" ? "scrollHeight" : "scrollWidth";
      return r.value[C];
    }
    function _() {
      if (!r.value) return 0;
      const C = e.direction === "vertical" ? "clientHeight" : "clientWidth";
      return r.value[C];
    }
    nn(() => {
      r.value && (e.side === "start" ? d(f()) : e.side === "both" && d(f() / 2 - _() / 2));
    });
    function g(C, B) {
      C === "start" ? i.value = B : C === "end" && (o.value = B);
    }
    function v(C) {
      return C === "start" ? i.value : o.value;
    }
    let w = 0;
    function b(C, B) {
      s.value = B, s.value && p(C);
    }
    function p(C) {
      if (e.mode !== "manual" && !s.value) return;
      const B = v(C);
      if (!r.value || ["empty", "loading"].includes(B)) return;
      w = f(), g(C, "loading");
      function O(D) {
        g(C, D), Vt(() => {
          D === "empty" || D === "error" || (D === "ok" && C === "start" && d(f() - w + u()), e.mode !== "manual" && Vt(() => {
            window.requestAnimationFrame(() => {
              window.requestAnimationFrame(() => {
                window.requestAnimationFrame(() => {
                  p(C);
                });
              });
            });
          }));
        });
      }
      a("load", {
        side: C,
        done: O
      });
    }
    const {
      t: y
    } = ua();
    function S(C, B) {
      if (e.side !== C && e.side !== "both") return;
      const O = () => p(C), D = {
        side: C,
        props: {
          onClick: O,
          color: e.color
        }
      };
      return B === "error" ? n.error?.(D) : B === "empty" ? n.empty?.(D) ?? A("div", null, [y(e.emptyText)]) : e.mode === "manual" ? B === "loading" ? n.loading?.(D) ?? h(Mu, {
        indeterminate: !0,
        color: e.color
      }, null) : n["load-more"]?.(D) ?? h(cn, {
        variant: "outlined",
        color: e.color,
        onClick: O
      }, {
        default: () => [y(e.loadMoreText)]
      }) : n.loading?.(D) ?? h(Mu, {
        indeterminate: !0,
        color: e.color
      }, null);
    }
    const {
      dimensionStyles: E
    } = Fa(e);
    Ge(() => {
      const C = e.tag, B = e.side === "start" || e.side === "both", O = e.side === "end" || e.side === "both", D = e.mode === "intersect";
      return h(C, {
        ref: r,
        class: Ee(["v-infinite-scroll", `v-infinite-scroll--${e.direction}`, {
          "v-infinite-scroll--start": B,
          "v-infinite-scroll--end": O
        }]),
        style: Xe(E.value)
      }, {
        default: () => [A("div", {
          class: "v-infinite-scroll__side"
        }, [S("start", i.value)]), B && D && h(cA, {
          key: "start",
          side: "start",
          onIntersect: b,
          rootMargin: l.value
        }, null), n.default?.(), O && D && h(cA, {
          key: "end",
          side: "end",
          onIntersect: b,
          rootMargin: l.value
        }, null), A("div", {
          class: "v-infinite-scroll__side"
        }, [S("end", o.value)])]
      });
    });
  }
}), PO = Symbol.for("vuetify:v-item-group"), o7 = De({
  ...vt(),
  ..._c({
    selectedClass: "v-item--selected"
  }),
  ...qt(),
  ...an()
}, "VItemGroup"), s7 = We()({
  name: "VItemGroup",
  props: o7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      isSelected: r,
      select: i,
      next: o,
      prev: l,
      selected: s
    } = ol(e, PO);
    return () => h(e.tag, {
      class: Ee(["v-item-group", a.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.default?.({
        isSelected: r,
        select: i,
        next: o,
        prev: l,
        selected: s.value
      })]
    });
  }
}), l7 = We()({
  name: "VItem",
  props: pc(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isSelected: a,
      select: r,
      toggle: i,
      selectedClass: o,
      value: l,
      disabled: s
    } = vc(e, PO);
    return () => n.default?.({
      isSelected: a.value,
      selectedClass: o.value,
      select: r,
      toggle: i,
      value: l.value,
      disabled: s.value
    });
  }
}), c7 = xo("v-kbd", "kbd"), u7 = De({
  ...vt(),
  ...La(),
  ...QT()
}, "VLayout"), d7 = We()({
  name: "VLayout",
  props: u7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      layoutClasses: a,
      layoutStyles: r,
      getLayoutItem: i,
      items: o,
      layoutRef: l
    } = XT(e), {
      dimensionStyles: s
    } = Fa(e);
    return Ge(() => A("div", {
      ref: l,
      class: Ee([a.value, e.class]),
      style: Xe([s.value, r.value, e.style])
    }, [n.default?.()])), {
      getLayoutItem: i,
      items: o
    };
  }
}), f7 = De({
  position: {
    type: String,
    required: !0
  },
  size: {
    type: [Number, String],
    default: 300
  },
  modelValue: Boolean,
  ...vt(),
  ...uc()
}, "VLayoutItem"), m7 = We()({
  name: "VLayoutItem",
  props: f7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      layoutItemStyles: a
    } = dc({
      id: e.name,
      order: z(() => parseInt(e.order, 10)),
      position: be(() => e.position),
      elementSize: be(() => e.size),
      layoutSize: be(() => e.size),
      active: be(() => e.modelValue),
      absolute: be(() => e.absolute)
    });
    return () => A("div", {
      class: Ee(["v-layout-item", e.class]),
      style: Xe([a.value, e.style])
    }, [n.default?.()]);
  }
}), h7 = De({
  modelValue: Boolean,
  options: {
    type: Object,
    // For more information on types, navigate to:
    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    default: () => ({
      root: void 0,
      rootMargin: void 0,
      threshold: void 0
    })
  },
  ...vt(),
  ...La(),
  ...qt(),
  ...Gi({
    transition: "fade-transition"
  })
}, "VLazy"), _7 = We()({
  name: "VLazy",
  directives: {
    vIntersect: ns
  },
  props: h7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Fa(e), r = kt(e, "modelValue");
    function i(o) {
      r.value || (r.value = o);
    }
    return Ge(() => ln(h(e.tag, {
      class: Ee(["v-lazy", e.class]),
      style: Xe([a.value, e.style])
    }, {
      default: () => [r.value && h(Sr, {
        transition: e.transition,
        appear: !0
      }, {
        default: () => [n.default?.()]
      })]
    }), [[ns, {
      handler: i,
      options: e.options
    }, null]])), {};
  }
}), p7 = De({
  locale: String,
  fallbackLocale: String,
  messages: Object,
  rtl: {
    type: Boolean,
    default: void 0
  },
  ...vt()
}, "VLocaleProvider"), v7 = We()({
  name: "VLocaleProvider",
  props: p7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      rtlClasses: a
    } = i4(e);
    return Ge(() => A("div", {
      class: Ee(["v-locale-provider", a.value, e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), g7 = De({
  scrollable: Boolean,
  ...vt(),
  ...La(),
  ...qt({
    tag: "main"
  })
}, "VMain"), y7 = We()({
  name: "VMain",
  props: g7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Fa(e), {
      mainStyles: r
    } = JT(), {
      ssrBootStyles: i
    } = mc();
    return Ge(() => h(e.tag, {
      class: Ee(["v-main", {
        "v-main--scrollable": e.scrollable
      }, e.class]),
      style: Xe([r.value, i.value, a.value, e.style])
    }, {
      default: () => [e.scrollable ? A("div", {
        class: "v-main__scroller"
      }, [n.default?.()]) : n.default?.()]
    })), {};
  }
});
function b7(e) {
  let {
    rootEl: t,
    isSticky: n,
    layoutItemStyles: a
  } = e;
  const r = ot(!1), i = ot(0), o = z(() => {
    const d = typeof r.value == "boolean" ? "top" : r.value;
    return [n.value ? {
      top: "auto",
      bottom: "auto",
      height: void 0
    } : void 0, r.value ? {
      [d]: ht(i.value)
    } : {
      top: a.value.top
    }];
  });
  nn(() => {
    nt(n, (d) => {
      d ? window.addEventListener("scroll", s, {
        passive: !0
      }) : window.removeEventListener("scroll", s);
    }, {
      immediate: !0
    });
  }), Ga(() => {
    window.removeEventListener("scroll", s);
  });
  let l = 0;
  function s() {
    const d = l > window.scrollY ? "up" : "down", u = t.value.getBoundingClientRect(), f = parseFloat(a.value.top ?? 0), _ = window.scrollY - Math.max(0, i.value - f), g = u.height + Math.max(i.value, f) - window.scrollY - window.innerHeight, v = parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y")) || 0;
    u.height < window.innerHeight - f ? (r.value = "top", i.value = f) : d === "up" && r.value === "bottom" || d === "down" && r.value === "top" ? (i.value = window.scrollY + u.top - v, r.value = !0) : d === "down" && g <= 0 ? (i.value = 0, r.value = "bottom") : d === "up" && _ <= 0 && (v ? r.value !== "top" && (i.value = -_ + v + f, r.value = "top") : (i.value = u.top + _, r.value = "top")), l = window.scrollY;
  }
  return {
    isStuck: r,
    stickyStyles: o
  };
}
const w7 = 100, k7 = 20;
function uA(e) {
  return (e < 0 ? -1 : 1) * Math.sqrt(Math.abs(e)) * 1.41421356237;
}
function dA(e) {
  if (e.length < 2)
    return 0;
  if (e.length === 2)
    return e[1].t === e[0].t ? 0 : (e[1].d - e[0].d) / (e[1].t - e[0].t);
  let t = 0;
  for (let n = e.length - 1; n > 0; n--) {
    if (e[n].t === e[n - 1].t)
      continue;
    const a = uA(t), r = (e[n].d - e[n - 1].d) / (e[n].t - e[n - 1].t);
    t += (r - a) * Math.abs(r), n === e.length - 1 && (t *= 0.5);
  }
  return uA(t) * 1e3;
}
function S7() {
  const e = {};
  function t(r) {
    Array.from(r.changedTouches).forEach((i) => {
      (e[i.identifier] ?? (e[i.identifier] = new wT(k7))).push([r.timeStamp, i]);
    });
  }
  function n(r) {
    Array.from(r.changedTouches).forEach((i) => {
      delete e[i.identifier];
    });
  }
  function a(r) {
    const i = e[r]?.values().reverse();
    if (!i)
      throw new Error(`No samples for touch id ${r}`);
    const o = i[0], l = [], s = [];
    for (const d of i) {
      if (o[0] - d[0] > w7) break;
      l.push({
        t: d[0],
        d: d[1].clientX
      }), s.push({
        t: d[0],
        d: d[1].clientY
      });
    }
    return {
      x: dA(l),
      y: dA(s),
      get direction() {
        const {
          x: d,
          y: u
        } = this, [f, _] = [Math.abs(d), Math.abs(u)];
        return f > _ && d >= 0 ? "right" : f > _ && d <= 0 ? "left" : _ > f && u >= 0 ? "down" : _ > f && u <= 0 ? "up" : C7();
      }
    };
  }
  return {
    addMovement: t,
    endTouch: n,
    getVelocity: a
  };
}
function C7() {
  throw new Error();
}
function A7(e) {
  let {
    el: t,
    isActive: n,
    isTemporary: a,
    width: r,
    touchless: i,
    position: o
  } = e;
  nn(() => {
    window.addEventListener("touchstart", y, {
      passive: !0
    }), window.addEventListener("touchmove", S, {
      passive: !1
    }), window.addEventListener("touchend", E, {
      passive: !0
    });
  }), Ga(() => {
    window.removeEventListener("touchstart", y), window.removeEventListener("touchmove", S), window.removeEventListener("touchend", E);
  });
  const l = z(() => ["left", "right"].includes(o.value)), {
    addMovement: s,
    endTouch: d,
    getVelocity: u
  } = S7();
  let f = !1;
  const _ = ot(!1), g = ot(0), v = ot(0);
  let w;
  function b(B, O) {
    return (o.value === "left" ? B : o.value === "right" ? document.documentElement.clientWidth - B : o.value === "top" ? B : o.value === "bottom" ? document.documentElement.clientHeight - B : Xc()) - (O ? r.value : 0);
  }
  function p(B) {
    let O = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    const D = o.value === "left" ? (B - v.value) / r.value : o.value === "right" ? (document.documentElement.clientWidth - B - v.value) / r.value : o.value === "top" ? (B - v.value) / r.value : o.value === "bottom" ? (document.documentElement.clientHeight - B - v.value) / r.value : Xc();
    return O ? Pn(D) : D;
  }
  function y(B) {
    if (i.value) return;
    const O = B.changedTouches[0].clientX, D = B.changedTouches[0].clientY, T = 25, P = o.value === "left" ? O < T : o.value === "right" ? O > document.documentElement.clientWidth - T : o.value === "top" ? D < T : o.value === "bottom" ? D > document.documentElement.clientHeight - T : Xc(), I = n.value && (o.value === "left" ? O < r.value : o.value === "right" ? O > document.documentElement.clientWidth - r.value : o.value === "top" ? D < r.value : o.value === "bottom" ? D > document.documentElement.clientHeight - r.value : Xc());
    (P || I || n.value && a.value) && (w = [O, D], v.value = b(l.value ? O : D, n.value), g.value = p(l.value ? O : D), f = v.value > -20 && v.value < 80, d(B), s(B));
  }
  function S(B) {
    const O = B.changedTouches[0].clientX, D = B.changedTouches[0].clientY;
    if (f) {
      if (!B.cancelable) {
        f = !1;
        return;
      }
      const P = Math.abs(O - w[0]), I = Math.abs(D - w[1]);
      (l.value ? P > I && P > 3 : I > P && I > 3) ? (_.value = !0, f = !1) : (l.value ? I : P) > 3 && (f = !1);
    }
    if (!_.value) return;
    B.preventDefault(), s(B);
    const T = p(l.value ? O : D, !1);
    g.value = Math.max(0, Math.min(1, T)), T > 1 ? v.value = b(l.value ? O : D, !0) : T < 0 && (v.value = b(l.value ? O : D, !1));
  }
  function E(B) {
    if (f = !1, !_.value) return;
    s(B), _.value = !1;
    const O = u(B.changedTouches[0].identifier), D = Math.abs(O.x), T = Math.abs(O.y);
    (l.value ? D > T && D > 400 : T > D && T > 3) ? n.value = O.direction === ({
      left: "right",
      right: "left",
      top: "down",
      bottom: "up"
    }[o.value] || Xc()) : n.value = g.value > 0.5;
  }
  const C = z(() => _.value ? {
    transform: o.value === "left" ? `translateX(calc(-100% + ${g.value * r.value}px))` : o.value === "right" ? `translateX(calc(100% - ${g.value * r.value}px))` : o.value === "top" ? `translateY(calc(-100% + ${g.value * r.value}px))` : o.value === "bottom" ? `translateY(calc(100% - ${g.value * r.value}px))` : Xc(),
    transition: "none"
  } : void 0);
  return Fr(_, () => {
    const B = t.value?.style.transform ?? null, O = t.value?.style.transition ?? null;
    ea(() => {
      t.value?.style.setProperty("transform", C.value?.transform || "none"), t.value?.style.setProperty("transition", C.value?.transition || null);
    }), qa(() => {
      t.value?.style.setProperty("transform", B), t.value?.style.setProperty("transition", O);
    });
  }), {
    isDragging: _,
    dragProgress: g,
    dragStyles: C
  };
}
function Xc() {
  throw new Error();
}
const x7 = ["start", "end", "left", "right", "top", "bottom"], T7 = De({
  color: String,
  disableResizeWatcher: Boolean,
  disableRouteWatcher: Boolean,
  expandOnHover: Boolean,
  floating: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  permanent: Boolean,
  rail: {
    type: Boolean,
    default: null
  },
  railWidth: {
    type: [Number, String],
    default: 56
  },
  scrim: {
    type: [Boolean, String],
    default: !0
  },
  image: String,
  temporary: Boolean,
  persistent: Boolean,
  touchless: Boolean,
  width: {
    type: [Number, String],
    default: 256
  },
  location: {
    type: String,
    default: "start",
    validator: (e) => x7.includes(e)
  },
  sticky: Boolean,
  ...Qr(),
  ...vt(),
  ...P0(),
  ...cc({
    mobile: null
  }),
  ...za(),
  ...uc(),
  ...Hn(),
  ...qt({
    tag: "nav"
  }),
  ...an()
}, "VNavigationDrawer"), I7 = We()({
  name: "VNavigationDrawer",
  props: T7(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:rail": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      isRtl: i
    } = Ra(), {
      themeClasses: o
    } = yn(e), {
      borderClasses: l
    } = _i(e), {
      backgroundColorClasses: s,
      backgroundColorStyles: d
    } = An(() => e.color), {
      elevationClasses: u
    } = ir(e), {
      displayClasses: f,
      mobile: _
    } = mi(e), {
      roundedClasses: g
    } = fa(e), v = IE(), w = kt(e, "modelValue", null, (F) => !!F), {
      ssrBootStyles: b
    } = mc(), {
      scopeId: p
    } = yc(), y = Se(), S = ot(!1), {
      runOpenDelay: E,
      runCloseDelay: C
    } = O0(e, (F) => {
      S.value = F;
    }), B = z(() => e.rail && e.expandOnHover && S.value ? Number(e.width) : Number(e.rail ? e.railWidth : e.width)), O = z(() => Uy(e.location, i.value)), D = be(() => e.persistent), T = z(() => !e.permanent && (_.value || e.temporary)), P = z(() => e.sticky && !T.value && O.value !== "bottom");
    Fr(() => e.expandOnHover && e.rail != null, () => {
      nt(S, (F) => a("update:rail", !F));
    }), Fr(() => !e.disableResizeWatcher, () => {
      nt(T, (F) => !e.permanent && Vt(() => w.value = !F));
    }), Fr(() => !e.disableRouteWatcher && !!v, () => {
      nt(v.currentRoute, () => T.value && (w.value = !1));
    }), nt(() => e.permanent, (F) => {
      F && (w.value = !0);
    }), e.modelValue == null && !T.value && (w.value = e.permanent || !_.value);
    const {
      isDragging: I,
      dragProgress: M
    } = A7({
      el: y,
      isActive: w,
      isTemporary: T,
      width: B,
      touchless: be(() => e.touchless),
      position: O
    }), V = z(() => {
      const F = T.value ? 0 : e.rail && e.expandOnHover ? Number(e.railWidth) : B.value;
      return I.value ? F * M.value : F;
    }), {
      layoutItemStyles: N,
      layoutItemScrimStyles: q
    } = dc({
      id: e.name,
      order: z(() => parseInt(e.order, 10)),
      position: O,
      layoutSize: V,
      elementSize: B,
      active: Uu(w),
      disableTransitions: be(() => I.value),
      absolute: z(() => (
        // eslint-disable-next-line @typescript-eslint/no-use-before-define
        e.absolute || P.value && typeof j.value != "string"
      ))
    }), {
      isStuck: j,
      stickyStyles: ee
    } = b7({
      rootEl: y,
      isSticky: P,
      layoutItemStyles: N
    }), de = An(() => typeof e.scrim == "string" ? e.scrim : null), Z = z(() => ({
      ...I.value ? {
        opacity: M.value * 0.2,
        transition: "none"
      } : void 0,
      ...q.value
    }));
    return ca({
      VList: {
        bgColor: "transparent"
      }
    }), Ge(() => {
      const F = r.image || e.image;
      return A(Qe, null, [h(e.tag, He({
        ref: y,
        onMouseenter: E,
        onMouseleave: C,
        class: ["v-navigation-drawer", `v-navigation-drawer--${O.value}`, {
          "v-navigation-drawer--expand-on-hover": e.expandOnHover,
          "v-navigation-drawer--floating": e.floating,
          "v-navigation-drawer--is-hovering": S.value,
          "v-navigation-drawer--rail": e.rail,
          "v-navigation-drawer--temporary": T.value,
          "v-navigation-drawer--persistent": D.value,
          "v-navigation-drawer--active": w.value,
          "v-navigation-drawer--sticky": P.value
        }, o.value, s.value, l.value, f.value, u.value, g.value, e.class],
        style: [d.value, N.value, b.value, ee.value, e.style]
      }, p, n), {
        default: () => [F && A("div", {
          key: "image",
          class: "v-navigation-drawer__img"
        }, [r.image ? h(Wt, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              alt: "",
              cover: !0,
              height: "inherit",
              src: e.image
            }
          }
        }, r.image) : h(as, {
          key: "image-img",
          alt: "",
          cover: !0,
          height: "inherit",
          src: e.image
        }, null)]), r.prepend && A("div", {
          class: "v-navigation-drawer__prepend"
        }, [r.prepend?.()]), A("div", {
          class: "v-navigation-drawer__content"
        }, [r.default?.()]), r.append && A("div", {
          class: "v-navigation-drawer__append"
        }, [r.append?.()])]
      }), h(Ur, {
        name: "fade-transition"
      }, {
        default: () => [T.value && (I.value || w.value) && !!e.scrim && A("div", He({
          class: ["v-navigation-drawer__scrim", de.backgroundColorClasses.value],
          style: [Z.value, de.backgroundColorStyles.value],
          onClick: () => {
            D.value || (w.value = !1);
          }
        }, p), null)]
      })]);
    }), {
      isStuck: j
    };
  }
}), E7 = fi({
  name: "VNoSsr",
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = _P();
    return () => a.value && n.default?.();
  }
}), P7 = 50, O7 = 500;
function D7(e) {
  let {
    toggleUpDown: t
  } = e, n = -1, a = -1;
  qa(i);
  function r(l) {
    i(), o(l), n = window.setTimeout(() => {
      a = window.setInterval(() => o(l), P7);
    }, O7);
  }
  function i() {
    window.clearTimeout(n), window.clearInterval(a);
  }
  function o(l) {
    t(l === "up");
  }
  return {
    holdStart: r,
    holdStop: i
  };
}
const B7 = De({
  controlVariant: {
    type: String,
    default: "default"
  },
  inset: Boolean,
  hideInput: Boolean,
  modelValue: {
    type: Number,
    default: null
  },
  min: {
    type: Number,
    default: Number.MIN_SAFE_INTEGER
  },
  max: {
    type: Number,
    default: Number.MAX_SAFE_INTEGER
  },
  step: {
    type: Number,
    default: 1
  },
  precision: {
    type: Number,
    default: 0
  },
  ...la(rm(), ["modelValue", "validationValue"])
}, "VNumberInput"), V7 = We()({
  name: "VNumberInput",
  props: {
    ...B7()
  },
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Se(), {
      holdStart: r,
      holdStop: i
    } = D7({
      toggleUpDown: O
    }), o = tm(e), l = z(() => o.isDisabled.value || o.isReadonly.value), s = ot(e.focused);
    function d(F) {
      let Y = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.precision;
      const se = Y == null ? String(F) : F.toFixed(Y);
      return s.value ? Number(se).toString() : se;
    }
    const u = kt(e, "modelValue", null, (F) => F ?? null, (F) => F == null ? F ?? null : Pn(Number(F), e.min, e.max)), f = ot(null);
    ea(() => {
      s.value && !l.value || (u.value == null ? f.value = null : isNaN(u.value) || (f.value = d(u.value)));
    });
    const _ = z({
      get: () => f.value,
      set(F) {
        F === null || F === "" ? (u.value = null, f.value = null) : !isNaN(Number(F)) && Number(F) <= e.max && Number(F) >= e.min && (u.value = Number(F), f.value = F);
      }
    }), g = z(() => l.value ? !1 : (u.value ?? 0) + e.step <= e.max), v = z(() => l.value ? !1 : (u.value ?? 0) - e.step >= e.min), w = z(() => e.hideInput ? "stacked" : e.controlVariant), b = be(() => w.value === "split" ? "$plus" : "$collapse"), p = be(() => w.value === "split" ? "$minus" : "$expand"), y = be(() => w.value === "split" ? "default" : "small"), S = be(() => w.value === "stacked" ? "auto" : "100%"), E = {
      props: {
        onClick: P,
        onPointerup: I,
        onPointerdown: M,
        onPointercancel: N
      }
    }, C = {
      props: {
        onClick: P,
        onPointerup: I,
        onPointerdown: V,
        onPointercancel: N
      }
    };
    nt(() => e.precision, () => j()), nn(() => {
      q();
    });
    function B(F) {
      if (F == null) return 0;
      const Y = F.toString(), se = Y.indexOf(".");
      return ~se ? Y.length - se : 0;
    }
    function O() {
      let F = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
      if (l.value) return;
      if (u.value == null) {
        _.value = d(Pn(0, e.min, e.max));
        return;
      }
      let Y = Math.max(B(u.value), B(e.step));
      e.precision != null && (Y = Math.max(Y, e.precision)), F ? g.value && (_.value = d(u.value + e.step, Y)) : v.value && (_.value = d(u.value - e.step, Y));
    }
    function D(F) {
      if (!F.data) return;
      const Y = F.target, {
        value: se,
        selectionStart: X,
        selectionEnd: he
      } = Y ?? {}, ve = se ? se.slice(0, X) + F.data + se.slice(he) : F.data, pe = g3(ve, e.precision);
      /^-?(\d+(\.\d*)?|(\.\d+)|\d*|\.)$/.test(ve) || (F.preventDefault(), Y.value = pe), e.precision != null && (ve.split(".")[1]?.length > e.precision && (F.preventDefault(), Y.value = pe), e.precision === 0 && ve.includes(".") && (F.preventDefault(), Y.value = pe));
    }
    async function T(F) {
      ["Enter", "ArrowLeft", "ArrowRight", "Backspace", "Delete", "Tab"].includes(F.key) || F.ctrlKey || ["ArrowDown", "ArrowUp"].includes(F.key) && (F.preventDefault(), q(), await Vt(), F.key === "ArrowDown" ? O(!1) : O());
    }
    function P(F) {
      F.stopPropagation();
    }
    function I(F) {
      F.currentTarget?.releasePointerCapture(F.pointerId), F.preventDefault(), F.stopPropagation(), i();
    }
    function M(F) {
      F.currentTarget?.setPointerCapture(F.pointerId), F.preventDefault(), F.stopPropagation(), r("up");
    }
    function V(F) {
      F.currentTarget?.setPointerCapture(F.pointerId), F.preventDefault(), F.stopPropagation(), r("down");
    }
    function N(F) {
      F.currentTarget?.releasePointerCapture(F.pointerId), i();
    }
    function q() {
      if (l.value || !a.value) return;
      const F = a.value.value;
      F && !isNaN(Number(F)) ? _.value = d(Pn(Number(F), e.min, e.max)) : _.value = null;
    }
    function j() {
      if (!l.value) {
        if (u.value === null || isNaN(u.value)) {
          _.value = null;
          return;
        }
        _.value = e.precision == null ? String(u.value) : u.value.toFixed(e.precision);
      }
    }
    function ee() {
      if (!l.value) {
        if (u.value === null || isNaN(u.value)) {
          _.value = null;
          return;
        }
        _.value = u.value.toString();
      }
    }
    function de() {
      ee();
    }
    function Z() {
      q();
    }
    return Ge(() => {
      const {
        modelValue: F,
        ...Y
      } = os.filterProps(e);
      function se() {
        return n.increment ? h(Wt, {
          key: "increment-defaults",
          defaults: {
            VBtn: {
              disabled: !g.value,
              flat: !0,
              height: S.value,
              size: y.value,
              icon: b.value
            }
          }
        }, {
          default: () => [n.increment(E)]
        }) : h(cn, {
          "aria-hidden": "true",
          "data-testid": "increment",
          disabled: !g.value,
          flat: !0,
          height: S.value,
          icon: b.value,
          key: "increment-btn",
          onClick: P,
          onPointerdown: M,
          onPointerup: I,
          onPointercancel: N,
          size: y.value,
          tabindex: "-1"
        }, null);
      }
      function X() {
        return n.decrement ? h(Wt, {
          key: "decrement-defaults",
          defaults: {
            VBtn: {
              disabled: !v.value,
              flat: !0,
              height: S.value,
              size: y.value,
              icon: p.value
            }
          }
        }, {
          default: () => [n.decrement(C)]
        }) : h(cn, {
          "aria-hidden": "true",
          "data-testid": "decrement",
          disabled: !v.value,
          flat: !0,
          height: S.value,
          icon: p.value,
          key: "decrement-btn",
          onClick: P,
          onPointerdown: V,
          onPointerup: I,
          onPointercancel: N,
          size: y.value,
          tabindex: "-1"
        }, null);
      }
      function he() {
        return A("div", {
          class: "v-number-input__control"
        }, [X(), h(Go, {
          vertical: w.value !== "stacked"
        }, null), se()]);
      }
      function ve() {
        return !e.hideInput && !e.inset ? h(Go, {
          vertical: !0
        }, null) : void 0;
      }
      const pe = w.value === "split" ? A("div", {
        class: "v-number-input__control"
      }, [h(Go, {
        vertical: !0
      }, null), se()]) : e.reverse || w.value === "hidden" ? void 0 : A(Qe, null, [ve(), he()]), H = n["append-inner"] || pe, we = w.value === "split" ? A("div", {
        class: "v-number-input__control"
      }, [X(), h(Go, {
        vertical: !0
      }, null)]) : e.reverse && w.value !== "hidden" ? A(Qe, null, [he(), ve()]) : void 0, Me = n["prepend-inner"] || we;
      return h(os, He({
        ref: a
      }, Y, {
        modelValue: _.value,
        "onUpdate:modelValue": (Re) => _.value = Re,
        focused: s.value,
        "onUpdate:focused": (Re) => s.value = Re,
        validationValue: u.value,
        onBeforeinput: D,
        onFocus: de,
        onBlur: Z,
        onKeydown: T,
        class: ["v-number-input", {
          "v-number-input--default": w.value === "default",
          "v-number-input--hide-input": e.hideInput,
          "v-number-input--inset": e.inset,
          "v-number-input--reverse": e.reverse,
          "v-number-input--split": w.value === "split",
          "v-number-input--stacked": w.value === "stacked"
        }, e.class],
        style: e.style,
        inputmode: "decimal"
      }), {
        ...n,
        "append-inner": H ? function() {
          for (var Re = arguments.length, ce = new Array(Re), te = 0; te < Re; te++)
            ce[te] = arguments[te];
          return A(Qe, null, [n["append-inner"]?.(...ce), pe]);
        } : void 0,
        "prepend-inner": Me ? function() {
          for (var Re = arguments.length, ce = new Array(Re), te = 0; te < Re; te++)
            ce[te] = arguments[te];
          return A(Qe, null, [we, n["prepend-inner"]?.(...ce)]);
        } : void 0
      });
    }), pi({}, a);
  }
}), M7 = De({
  autofocus: Boolean,
  divider: String,
  focusAll: Boolean,
  label: {
    type: String,
    default: "$vuetify.input.otp"
  },
  length: {
    type: [Number, String],
    default: 6
  },
  modelValue: {
    type: [Number, String],
    default: void 0
  },
  placeholder: String,
  type: {
    type: String,
    default: "number"
  },
  ...La(),
  ...em(),
  ...tl(am({
    variant: "outlined"
  }), ["baseColor", "bgColor", "class", "color", "disabled", "error", "loading", "rounded", "style", "theme", "variant"])
}, "VOtpInput"), R7 = We()({
  name: "VOtpInput",
  props: M7(),
  emits: {
    finish: (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      dimensionStyles: i
    } = Fa(e), {
      isFocused: o,
      focus: l,
      blur: s
    } = ds(e), d = kt(e, "modelValue", "", (T) => T == null ? [] : String(T).split(""), (T) => T.join("")), {
      t: u
    } = ua(), f = z(() => Number(e.length)), _ = z(() => Array(f.value).fill(0)), g = Se(-1), v = Se(), w = Se([]), b = z(() => w.value[g.value]), p = bu();
    p.run(() => {
      const {
        intersectionRef: T,
        isIntersecting: P
      } = Gf();
      nt(P, (I) => {
        I && (T.value?.focus(), p.stop());
      }), ea(() => {
        T.value = w.value[0];
      });
    });
    function y() {
      if (D(b.value.value)) {
        b.value.value = "";
        return;
      }
      const T = d.value.slice(), P = b.value.value;
      T[g.value] = P;
      let I = null;
      g.value > d.value.length ? I = d.value.length + 1 : g.value + 1 !== f.value && (I = "next"), d.value = T, I && Hl(v.value, I);
    }
    function S(T) {
      const P = d.value.slice(), I = g.value;
      let M = null;
      ["ArrowLeft", "ArrowRight", "Backspace", "Delete"].includes(T.key) && (T.preventDefault(), T.key === "ArrowLeft" ? M = "prev" : T.key === "ArrowRight" ? M = "next" : ["Backspace", "Delete"].includes(T.key) && (P[g.value] = "", d.value = P, g.value > 0 && T.key === "Backspace" ? M = "prev" : requestAnimationFrame(() => {
        w.value[I]?.select();
      })), requestAnimationFrame(() => {
        M != null && Hl(v.value, M);
      }));
    }
    function E(T, P) {
      P.preventDefault(), P.stopPropagation();
      const I = P?.clipboardData?.getData("Text").trim().slice(0, f.value) ?? "";
      D(I) || (d.value = I.split(""), w.value?.[T].blur());
    }
    function C() {
      d.value = [];
    }
    function B(T, P) {
      l(), g.value = P;
    }
    function O() {
      s(), g.value = -1;
    }
    function D(T) {
      return e.type === "number" && /[^0-9]/g.test(T);
    }
    return ca({
      VField: {
        color: be(() => e.color),
        bgColor: be(() => e.color),
        baseColor: be(() => e.baseColor),
        disabled: be(() => e.disabled),
        error: be(() => e.error),
        variant: be(() => e.variant)
      }
    }, {
      scoped: !0
    }), nt(d, (T) => {
      T.length === f.value && (g.value = f.value - 1, a("finish", T.join("")));
    }, {
      deep: !0
    }), nt(g, (T) => {
      T < 0 || Vt(() => {
        w.value[T]?.select();
      });
    }), Ge(() => {
      const [T, P] = nl(n);
      return A("div", He({
        class: ["v-otp-input", {
          "v-otp-input--divided": !!e.divider
        }, e.class],
        style: [e.style]
      }, T), [A("div", {
        ref: v,
        class: "v-otp-input__content",
        style: Xe([i.value])
      }, [_.value.map((I, M) => A(Qe, null, [e.divider && M !== 0 && A("span", {
        class: "v-otp-input__divider"
      }, [e.divider]), h(Qs, {
        focused: o.value && e.focusAll || g.value === M,
        key: M
      }, {
        ...r,
        loader: void 0,
        default: () => A("input", {
          ref: (V) => w.value[M] = V,
          "aria-label": u(e.label, M + 1),
          autofocus: M === 0 && e.autofocus,
          autocomplete: "one-time-code",
          class: Ee(["v-otp-input__field"]),
          disabled: e.disabled,
          inputmode: e.type === "number" ? "numeric" : "text",
          min: e.type === "number" ? 0 : void 0,
          maxlength: M === 0 ? f.value : "1",
          placeholder: e.placeholder,
          type: e.type === "number" ? "text" : e.type,
          value: d.value[M],
          onInput: y,
          onFocus: (V) => B(V, M),
          onBlur: O,
          onKeydown: S,
          onPaste: (V) => E(M, V)
        }, null)
      })])), A("input", He({
        class: "v-otp-input-input",
        type: "hidden"
      }, P, {
        value: d.value.join("")
      }), null), h(ko, {
        contained: !0,
        "content-class": "v-otp-input__loader",
        "model-value": !!e.loading,
        persistent: !0
      }, {
        default: () => [r.loader?.() ?? h(Mu, {
          color: typeof e.loading == "boolean" ? void 0 : e.loading,
          indeterminate: !0,
          size: "24",
          width: "2"
        }, null)]
      }), r.default?.()])]);
    }), {
      blur: () => {
        w.value?.some((T) => T.blur());
      },
      focus: () => {
        w.value?.[0].focus();
      },
      reset: C,
      isFocused: o
    };
  }
});
function L7(e) {
  return Math.floor(Math.abs(e)) * Math.sign(e);
}
const F7 = De({
  scale: {
    type: [Number, String],
    default: 0.5
  },
  ...vt()
}, "VParallax"), N7 = We()({
  name: "VParallax",
  props: F7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      intersectionRef: a,
      isIntersecting: r
    } = Gf(), {
      resizeRef: i,
      contentRect: o
    } = Wi(), {
      height: l
    } = mi(), s = Se();
    ea(() => {
      a.value = i.value = s.value?.$el;
    });
    let d;
    nt(r, (g) => {
      g ? (d = Ew(a.value), d = d === document.scrollingElement ? document : d, d.addEventListener("scroll", _, {
        passive: !0
      }), _()) : d.removeEventListener("scroll", _);
    }), Ga(() => {
      d?.removeEventListener("scroll", _);
    }), nt(l, _), nt(() => o.value?.height, _);
    const u = z(() => 1 - Pn(Number(e.scale)));
    let f = -1;
    function _() {
      r.value && (cancelAnimationFrame(f), f = requestAnimationFrame(() => {
        const g = (s.value?.$el).querySelector(".v-img__img");
        if (!g) return;
        const v = d instanceof Document ? document.documentElement.clientHeight : d.clientHeight, w = d instanceof Document ? window.scrollY : d.scrollTop, b = a.value.getBoundingClientRect().top + w, p = o.value.height, y = b + (p - v) / 2, S = L7((w - y) * u.value), E = Math.max(1, (u.value * (v - p) + p) / p);
        g.style.setProperty("transform", `translateY(${S}px) scale(${E})`);
      }));
    }
    return Ge(() => h(as, {
      class: Ee(["v-parallax", {
        "v-parallax--active": r.value
      }, e.class]),
      style: Xe(e.style),
      ref: s,
      cover: !0,
      onLoadstart: _,
      onLoad: _
    }, n)), {};
  }
}), U7 = De({
  ...kp({
    falseIcon: "$radioOff",
    trueIcon: "$radioOn"
  })
}, "VRadio"), $7 = We()({
  name: "VRadio",
  props: U7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = Gs.filterProps(e);
      return h(Gs, He(a, {
        class: ["v-radio", e.class],
        style: e.style,
        type: "radio"
      }), n);
    }), {};
  }
}), q7 = De({
  height: {
    type: [Number, String],
    default: "auto"
  },
  ...fs(),
  ...la(A0(), ["multiple"]),
  trueIcon: {
    type: At,
    default: "$radioOn"
  },
  falseIcon: {
    type: At,
    default: "$radioOff"
  },
  type: {
    type: String,
    default: "radio"
  }
}, "VRadioGroup"), H7 = We()({
  name: "VRadioGroup",
  inheritAttrs: !1,
  props: q7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = $r(), i = z(() => e.id || `radio-group-${r}`), o = kt(e, "modelValue");
    return Ge(() => {
      const [l, s] = nl(n), d = hr.filterProps(e), u = Gs.filterProps(e), f = a.label ? a.label({
        label: e.label,
        props: {
          for: i.value
        }
      }) : e.label;
      return h(hr, He({
        class: ["v-radio-group", e.class],
        style: e.style
      }, l, d, {
        modelValue: o.value,
        "onUpdate:modelValue": (_) => o.value = _,
        id: i.value
      }), {
        ...a,
        default: (_) => {
          let {
            id: g,
            messagesId: v,
            isDisabled: w,
            isReadonly: b
          } = _;
          return A(Qe, null, [f && h(Zu, {
            id: g.value
          }, {
            default: () => [f]
          }), h(NE, He(u, {
            id: g.value,
            "aria-describedby": v.value,
            defaultsTarget: "VRadio",
            trueIcon: e.trueIcon,
            falseIcon: e.falseIcon,
            type: e.type,
            disabled: w.value,
            readonly: b.value,
            "aria-labelledby": f ? g.value : void 0,
            multiple: !1
          }, s, {
            modelValue: o.value,
            "onUpdate:modelValue": (p) => o.value = p
          }), a)]);
        }
      });
    }), {};
  }
}), z7 = De({
  ...em(),
  ...fs(),
  ...LP(),
  strict: Boolean,
  modelValue: {
    type: Array,
    default: () => [0, 0]
  }
}, "VRangeSlider"), W7 = We()({
  name: "VRangeSlider",
  props: z7(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    end: (e) => !0,
    start: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Se(), i = Se(), o = Se(), {
      rtlClasses: l
    } = Ra();
    function s(P) {
      if (!r.value || !i.value) return;
      const I = Vb(P, r.value.$el, e.direction), M = Vb(P, i.value.$el, e.direction), V = Math.abs(I), N = Math.abs(M);
      return V < N || V === N && I < 0 ? r.value.$el : i.value.$el;
    }
    const d = FP(e), u = kt(e, "modelValue", void 0, (P) => P?.length ? P.map((I) => d.roundValue(I)) : [0, 0]), {
      activeThumbRef: f,
      hasLabels: _,
      max: g,
      min: v,
      mousePressed: w,
      onSliderMousedown: b,
      onSliderTouchstart: p,
      position: y,
      trackContainerRef: S,
      readonly: E
    } = NP({
      props: e,
      steps: d,
      onSliderStart: () => {
        a("start", u.value);
      },
      onSliderEnd: (P) => {
        let {
          value: I
        } = P;
        const M = f.value === r.value?.$el ? [I, u.value[1]] : [u.value[0], I];
        !e.strict && M[0] < M[1] && (u.value = M), a("end", u.value);
      },
      onSliderMove: (P) => {
        let {
          value: I
        } = P;
        const [M, V] = u.value;
        !e.strict && M === V && M !== v.value && (f.value = I > M ? i.value?.$el : r.value?.$el, f.value?.focus()), f.value === r.value?.$el ? u.value = [Math.min(I, V), V] : u.value = [M, Math.max(M, I)];
      },
      getActiveThumb: s
    }), {
      isFocused: C,
      focus: B,
      blur: O
    } = ds(e), D = z(() => y(u.value[0])), T = z(() => y(u.value[1]));
    return Ge(() => {
      const P = hr.filterProps(e), I = !!(e.label || n.label || n.prepend);
      return h(hr, He({
        class: ["v-slider", "v-range-slider", {
          "v-slider--has-labels": !!n["tick-label"] || _.value,
          "v-slider--focused": C.value,
          "v-slider--pressed": w.value,
          "v-slider--disabled": e.disabled
        }, l.value, e.class],
        style: e.style,
        ref: o
      }, P, {
        focused: C.value
      }), {
        ...n,
        prepend: I ? (M) => A(Qe, null, [n.label?.(M) ?? (e.label ? h(Zu, {
          class: "v-slider__label",
          text: e.label
        }, null) : void 0), n.prepend?.(M)]) : void 0,
        default: (M) => {
          let {
            id: V,
            messagesId: N
          } = M;
          return A("div", {
            class: "v-slider__container",
            onMousedown: E.value ? void 0 : b,
            onTouchstartPassive: E.value ? void 0 : p
          }, [A("input", {
            id: `${V.value}_start`,
            name: e.name || V.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: u.value[0]
          }, null), A("input", {
            id: `${V.value}_stop`,
            name: e.name || V.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: u.value[1]
          }, null), h(UP, {
            ref: S,
            start: D.value,
            stop: T.value
          }, {
            "tick-label": n["tick-label"]
          }), h(Mb, {
            ref: r,
            "aria-describedby": N.value,
            focused: C && f.value === r.value?.$el,
            modelValue: u.value[0],
            "onUpdate:modelValue": (q) => u.value = [q, u.value[1]],
            onFocus: (q) => {
              B(), f.value = r.value?.$el, g.value !== v.value && u.value[0] === u.value[1] && u.value[1] === v.value && q.relatedTarget !== i.value?.$el && (r.value?.$el.blur(), i.value?.$el.focus());
            },
            onBlur: () => {
              O(), f.value = void 0;
            },
            min: v.value,
            max: u.value[1],
            position: D.value,
            ripple: e.ripple
          }, {
            "thumb-label": n["thumb-label"]
          }), h(Mb, {
            ref: i,
            "aria-describedby": N.value,
            focused: C && f.value === i.value?.$el,
            modelValue: u.value[1],
            "onUpdate:modelValue": (q) => u.value = [u.value[0], q],
            onFocus: (q) => {
              B(), f.value = i.value?.$el, g.value !== v.value && u.value[0] === u.value[1] && u.value[0] === g.value && q.relatedTarget !== r.value?.$el && (i.value?.$el.blur(), r.value?.$el.focus());
            },
            onBlur: () => {
              O(), f.value = void 0;
            },
            min: u.value[0],
            max: g.value,
            position: T.value,
            ripple: e.ripple
          }, {
            "thumb-label": n["thumb-label"]
          })]);
        }
      });
    }), {};
  }
}), j7 = De({
  name: String,
  itemAriaLabel: {
    type: String,
    default: "$vuetify.rating.ariaLabel.item"
  },
  activeColor: String,
  color: String,
  clearable: Boolean,
  disabled: Boolean,
  emptyIcon: {
    type: At,
    default: "$ratingEmpty"
  },
  fullIcon: {
    type: At,
    default: "$ratingFull"
  },
  halfIncrements: Boolean,
  hover: Boolean,
  length: {
    type: [Number, String],
    default: 5
  },
  readonly: Boolean,
  modelValue: {
    type: [Number, String],
    default: 0
  },
  itemLabels: Array,
  itemLabelPosition: {
    type: String,
    default: "top",
    validator: (e) => ["top", "bottom"].includes(e)
  },
  ripple: Boolean,
  ...vt(),
  ...Qa(),
  ...To(),
  ...qt(),
  ...an()
}, "VRating"), Y7 = We()({
  name: "VRating",
  props: j7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = ua(), {
      themeClasses: r
    } = yn(e), i = kt(e, "modelValue"), o = z(() => Pn(parseFloat(i.value), 0, Number(e.length))), l = z(() => ho(Number(e.length), 1)), s = z(() => l.value.flatMap((b) => e.halfIncrements ? [b - 0.5, b] : [b])), d = ot(-1), u = z(() => s.value.map((b) => {
      const p = e.hover && d.value > -1, y = o.value >= b, S = d.value >= b, C = (p ? S : y) ? e.fullIcon : e.emptyIcon, B = e.activeColor ?? e.color, O = y || S ? B : e.color;
      return {
        isFilled: y,
        isHovered: S,
        icon: C,
        color: O
      };
    })), f = z(() => [0, ...s.value].map((b) => {
      function p() {
        d.value = b;
      }
      function y() {
        d.value = -1;
      }
      function S() {
        e.disabled || e.readonly || (i.value = o.value === b && e.clearable ? 0 : b);
      }
      return {
        onMouseenter: e.hover ? p : void 0,
        onMouseleave: e.hover ? y : void 0,
        onClick: S
      };
    })), _ = $r(), g = z(() => e.name ?? `v-rating-${_}`);
    function v(b) {
      let {
        value: p,
        index: y,
        showStar: S = !0
      } = b;
      const {
        onMouseenter: E,
        onMouseleave: C,
        onClick: B
      } = f.value[y + 1], O = `${g.value}-${String(p).replace(".", "-")}`, D = {
        color: u.value[y]?.color,
        density: e.density,
        disabled: e.disabled,
        icon: u.value[y]?.icon,
        ripple: e.ripple,
        size: e.size,
        variant: "plain"
      };
      return A(Qe, null, [A("label", {
        for: O,
        class: Ee({
          "v-rating__item--half": e.halfIncrements && p % 1 > 0,
          "v-rating__item--full": e.halfIncrements && p % 1 === 0
        }),
        onMouseenter: E,
        onMouseleave: C,
        onClick: B
      }, [A("span", {
        class: "v-rating__hidden"
      }, [a(e.itemAriaLabel, p, e.length)]), S ? n.item ? n.item({
        ...u.value[y],
        props: D,
        value: p,
        index: y,
        rating: o.value
      }) : h(cn, He({
        "aria-label": a(e.itemAriaLabel, p, e.length)
      }, D), null) : void 0]), A("input", {
        class: "v-rating__hidden",
        name: g.value,
        id: O,
        type: "radio",
        value: p,
        checked: o.value === p,
        tabindex: -1,
        readonly: e.readonly,
        disabled: e.disabled
      }, null)]);
    }
    function w(b) {
      return n["item-label"] ? n["item-label"](b) : b.label ? A("span", null, [b.label]) : A("span", null, [ae(" ")]);
    }
    return Ge(() => {
      const b = !!e.itemLabels?.length || n["item-label"];
      return h(e.tag, {
        class: Ee(["v-rating", {
          "v-rating--hover": e.hover,
          "v-rating--readonly": e.readonly
        }, r.value, e.class]),
        style: Xe(e.style)
      }, {
        default: () => [h(v, {
          value: 0,
          index: -1,
          showStar: !1
        }, null), l.value.map((p, y) => A("div", {
          class: "v-rating__wrapper"
        }, [b && e.itemLabelPosition === "top" ? w({
          value: p,
          index: y,
          label: e.itemLabels?.[y]
        }) : void 0, A("div", {
          class: "v-rating__item"
        }, [e.halfIncrements ? A(Qe, null, [h(v, {
          value: p - 0.5,
          index: y * 2
        }, null), h(v, {
          value: p,
          index: y * 2 + 1
        }, null)]) : h(v, {
          value: p,
          index: y
        }, null)]), b && e.itemLabelPosition === "bottom" ? w({
          value: p,
          index: y,
          label: e.itemLabels?.[y]
        }) : void 0]))]
      });
    }), {};
  }
}), K7 = {
  actions: "button@2",
  article: "heading, paragraph",
  avatar: "avatar",
  button: "button",
  card: "image, heading",
  "card-avatar": "image, list-item-avatar",
  chip: "chip",
  "date-picker": "list-item, heading, divider, date-picker-options, date-picker-days, actions",
  "date-picker-options": "text, avatar@2",
  "date-picker-days": "avatar@28",
  divider: "divider",
  heading: "heading",
  image: "image",
  "list-item": "text",
  "list-item-avatar": "avatar, text",
  "list-item-two-line": "sentences",
  "list-item-avatar-two-line": "avatar, sentences",
  "list-item-three-line": "paragraph",
  "list-item-avatar-three-line": "avatar, paragraph",
  ossein: "ossein",
  paragraph: "text@3",
  sentences: "text@2",
  subtitle: "text",
  table: "table-heading, table-thead, table-tbody, table-tfoot",
  "table-heading": "chip, text",
  "table-thead": "heading@6",
  "table-tbody": "table-row-divider@6",
  "table-row-divider": "table-row, divider",
  "table-row": "text@6",
  "table-tfoot": "text@2, avatar@2",
  text: "text"
};
function G7(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  return A("div", {
    class: Ee(["v-skeleton-loader__bone", `v-skeleton-loader__${e}`])
  }, [t]);
}
function fA(e) {
  const [t, n] = e.split("@");
  return Array.from({
    length: n
  }).map(() => Lp(t));
}
function Lp(e) {
  let t = [];
  if (!e) return t;
  const n = K7[e];
  if (e !== n) {
    if (e.includes(",")) return mA(e);
    if (e.includes("@")) return fA(e);
    n.includes(",") ? t = mA(n) : n.includes("@") ? t = fA(n) : n && t.push(Lp(n));
  }
  return [G7(e, t)];
}
function mA(e) {
  return e.replace(/\s/g, "").split(",").map(Lp);
}
const Q7 = De({
  boilerplate: Boolean,
  color: String,
  loading: Boolean,
  loadingText: {
    type: String,
    default: "$vuetify.loading"
  },
  type: {
    type: [String, Array],
    default: "ossein"
  },
  ...La(),
  ...za(),
  ...an()
}, "VSkeletonLoader"), J7 = We()({
  name: "VSkeletonLoader",
  props: Q7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = An(() => e.color), {
      dimensionStyles: i
    } = Fa(e), {
      elevationClasses: o
    } = ir(e), {
      themeClasses: l
    } = yn(e), {
      t: s
    } = ua(), d = z(() => Lp(Zn(e.type).join(",")));
    return Ge(() => {
      const u = !n.default || e.loading, f = e.boilerplate || !u ? {} : {
        ariaLive: "polite",
        ariaLabel: s(e.loadingText),
        role: "alert"
      };
      return A("div", He({
        class: ["v-skeleton-loader", {
          "v-skeleton-loader--boilerplate": e.boilerplate
        }, l.value, a.value, o.value],
        style: [r.value, u ? i.value : {}]
      }, f), [u ? d.value : n.default?.()]);
    }), {};
  }
}), X7 = We()({
  name: "VSlideGroupItem",
  props: pc(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = vc(e, KE);
    return () => n.default?.({
      isSelected: a.isSelected.value,
      select: a.select,
      toggle: a.toggle,
      selectedClass: a.selectedClass.value
    });
  }
});
function Z7(e) {
  const t = ot(e());
  let n = -1;
  function a() {
    clearInterval(n);
  }
  function r() {
    a(), Vt(() => t.value = e());
  }
  function i(o) {
    const l = o ? getComputedStyle(o) : {
      transitionDuration: 0.2
    }, s = parseFloat(l.transitionDuration) * 1e3 || 200;
    if (a(), t.value <= 0) return;
    const d = performance.now();
    n = window.setInterval(() => {
      const u = performance.now() - d + s;
      t.value = Math.max(e() - u, 0), t.value <= 0 && a();
    }, s);
  }
  return qa(a), {
    clear: a,
    time: t,
    start: i,
    reset: r
  };
}
const OO = De({
  multiLine: Boolean,
  text: String,
  timer: [Boolean, String],
  timeout: {
    type: [Number, String],
    default: 5e3
  },
  vertical: Boolean,
  ...us({
    location: "bottom"
  }),
  ...Ju(),
  ...Hn(),
  ...Pi(),
  ...an(),
  ...la(nm({
    transition: "v-snackbar-transition"
  }), ["persistent", "noClickAnimation", "scrim", "scrollStrategy"])
}, "VSnackbar"), jb = We()({
  name: "VSnackbar",
  props: OO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      positionClasses: r
    } = Xu(e), {
      scopeId: i
    } = yc(), {
      themeClasses: o
    } = yn(e), {
      colorClasses: l,
      colorStyles: s,
      variantClasses: d
    } = hc(e), {
      roundedClasses: u
    } = fa(e), f = Z7(() => Number(e.timeout)), _ = Se(), g = Se(), v = ot(!1), w = ot(0), b = Se(), p = Gt(vf, void 0);
    Fr(() => !!p, () => {
      const I = JT();
      ea(() => {
        b.value = I.mainStyles.value;
      });
    }), nt(a, S), nt(() => e.timeout, S), nn(() => {
      a.value && S();
    });
    let y = -1;
    function S() {
      f.reset(), window.clearTimeout(y);
      const I = Number(e.timeout);
      if (!a.value || I === -1) return;
      const M = kw(g.value);
      f.start(M), y = window.setTimeout(() => {
        a.value = !1;
      }, I);
    }
    function E() {
      f.reset(), window.clearTimeout(y);
    }
    function C() {
      v.value = !0, E();
    }
    function B() {
      v.value = !1, S();
    }
    function O(I) {
      w.value = I.touches[0].clientY;
    }
    function D(I) {
      Math.abs(w.value - I.changedTouches[0].clientY) > 50 && (a.value = !1);
    }
    function T() {
      v.value && B();
    }
    const P = z(() => e.location.split(" ").reduce((I, M) => (I[`v-snackbar--${M}`] = !0, I), {}));
    return Ge(() => {
      const I = ko.filterProps(e), M = !!(n.default || n.text || e.text);
      return h(ko, He({
        ref: _,
        class: ["v-snackbar", {
          "v-snackbar--active": a.value,
          "v-snackbar--multi-line": e.multiLine && !e.vertical,
          "v-snackbar--timer": !!e.timer,
          "v-snackbar--vertical": e.vertical
        }, P.value, r.value, e.class],
        style: [b.value, e.style]
      }, I, {
        modelValue: a.value,
        "onUpdate:modelValue": (V) => a.value = V,
        contentProps: He({
          class: ["v-snackbar__wrapper", o.value, l.value, u.value, d.value],
          style: [s.value],
          onPointerenter: C,
          onPointerleave: B
        }, I.contentProps),
        persistent: !0,
        noClickAnimation: !0,
        scrim: !1,
        scrollStrategy: "none",
        _disableGlobalStack: !0,
        onTouchstartPassive: O,
        onTouchend: D,
        onAfterLeave: T
      }, i), {
        default: () => [il(!1, "v-snackbar"), e.timer && !v.value && A("div", {
          key: "timer",
          class: "v-snackbar__timer"
        }, [h(yp, {
          ref: g,
          color: typeof e.timer == "string" ? e.timer : "info",
          max: e.timeout,
          "model-value": f.time.value
        }, null)]), M && A("div", {
          key: "content",
          class: "v-snackbar__content",
          role: "status",
          "aria-live": "polite"
        }, [n.text?.() ?? e.text, n.default?.()]), n.actions && h(Wt, {
          defaults: {
            VBtn: {
              variant: "text",
              ripple: !1,
              slim: !0
            }
          }
        }, {
          default: () => [A("div", {
            class: "v-snackbar__actions"
          }, [n.actions({
            isActive: a
          })])]
        })],
        activator: n.activator
      });
    }), pi({}, _);
  }
}), eK = De({
  // TODO: Port this to Snackbar on dev
  closable: [Boolean, String],
  closeText: {
    type: String,
    default: "$vuetify.dismiss"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  ...la(OO(), ["modelValue"])
}, "VSnackbarQueue"), tK = We()({
  name: "VSnackbarQueue",
  props: eK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = ua(), i = ot(!1), o = ot(!1), l = ot();
    nt(() => e.modelValue.length, (_, g) => {
      !o.value && _ > g && d();
    }), nt(i, (_) => {
      _ && (o.value = !0);
    });
    function s() {
      e.modelValue.length ? d() : (l.value = void 0, o.value = !1);
    }
    function d() {
      const [_, ...g] = e.modelValue;
      n("update:modelValue", g), l.value = typeof _ == "string" ? {
        text: _
      } : _, Vt(() => {
        i.value = !0;
      });
    }
    function u() {
      i.value = !1;
    }
    const f = z(() => ({
      color: typeof e.closable == "string" ? e.closable : void 0,
      text: r(e.closeText)
    }));
    Ge(() => {
      const _ = !!(e.closable || a.actions), {
        modelValue: g,
        ...v
      } = jb.filterProps(e);
      return A(Qe, null, [o.value && !!l.value && (a.default ? h(Wt, {
        defaults: {
          VSnackbar: l.value
        }
      }, {
        default: () => [a.default({
          item: l.value
        })]
      }) : h(jb, He(v, l.value, {
        modelValue: i.value,
        "onUpdate:modelValue": (w) => i.value = w,
        onAfterLeave: s
      }), {
        text: a.text ? () => a.text?.({
          item: l.value
        }) : void 0,
        actions: _ ? () => A(Qe, null, [a.actions ? h(Wt, {
          defaults: {
            VBtn: f.value
          }
        }, {
          default: () => [a.actions({
            item: l.value,
            props: {
              onClick: u
            }
          })]
        }) : h(cn, He(f.value, {
          onClick: u
        }), null)]) : void 0
      }))]);
    });
  }
}), DO = De({
  autoDraw: Boolean,
  autoDrawDuration: [Number, String],
  autoDrawEasing: {
    type: String,
    default: "ease"
  },
  color: String,
  gradient: {
    type: Array,
    default: () => []
  },
  gradientDirection: {
    type: String,
    validator: (e) => ["top", "bottom", "left", "right"].includes(e),
    default: "top"
  },
  height: {
    type: [String, Number],
    default: 75
  },
  labels: {
    type: Array,
    default: () => []
  },
  labelSize: {
    type: [Number, String],
    default: 7
  },
  lineWidth: {
    type: [String, Number],
    default: 4
  },
  id: String,
  itemValue: {
    type: String,
    default: "value"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  min: [String, Number],
  max: [String, Number],
  padding: {
    type: [String, Number],
    default: 8
  },
  showLabels: Boolean,
  smooth: [Boolean, String, Number],
  width: {
    type: [Number, String],
    default: 300
  }
}, "Line"), BO = De({
  autoLineWidth: Boolean,
  ...DO()
}, "VBarline"), hA = We()({
  name: "VBarline",
  props: BO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = $r(), r = z(() => e.id || `barline-${a}`), i = z(() => Number(e.autoDrawDuration) || 500), o = z(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), l = z(() => parseFloat(e.lineWidth) || 4), s = z(() => Math.max(e.modelValue.length * l.value, Number(e.width))), d = z(() => ({
      minX: 0,
      maxX: s.value,
      minY: 0,
      maxY: parseInt(e.height, 10)
    })), u = z(() => e.modelValue.map((b) => Da(b, e.itemValue, b)));
    function f(b, p) {
      const {
        minX: y,
        maxX: S,
        minY: E,
        maxY: C
      } = p, B = b.length;
      let O = e.max != null ? Number(e.max) : Math.max(...b), D = e.min != null ? Number(e.min) : Math.min(...b);
      D > 0 && e.min == null && (D = 0), O < 0 && e.max == null && (O = 0);
      const T = S / B, P = (C - E) / (O - D || 1), I = C - Math.abs(D * P);
      return b.map((M, V) => {
        const N = Math.abs(P * M);
        return {
          x: y + V * T,
          y: I - N + +(M < 0) * N,
          height: N,
          value: M
        };
      });
    }
    const _ = z(() => {
      const b = [], p = f(u.value, d.value), y = p.length;
      for (let S = 0; b.length < y; S++) {
        const E = p[S];
        let C = e.labels[S];
        C || (C = typeof E == "object" ? E.value : E), b.push({
          x: E.x,
          value: String(C)
        });
      }
      return b;
    }), g = z(() => f(u.value, d.value)), v = z(() => (Math.abs(g.value[0].x - g.value[1].x) - l.value) / 2), w = z(() => typeof e.smooth == "boolean" ? e.smooth ? 2 : 0 : Number(e.smooth));
    Ge(() => {
      const b = e.gradient.slice().length ? e.gradient.slice().reverse() : [""];
      return A("svg", {
        display: "block"
      }, [A("defs", null, [A("linearGradient", {
        id: r.value,
        gradientUnits: "userSpaceOnUse",
        x1: e.gradientDirection === "left" ? "100%" : "0",
        y1: e.gradientDirection === "top" ? "100%" : "0",
        x2: e.gradientDirection === "right" ? "100%" : "0",
        y2: e.gradientDirection === "bottom" ? "100%" : "0"
      }, [b.map((p, y) => A("stop", {
        offset: y / Math.max(b.length - 1, 1),
        "stop-color": p || "currentColor"
      }, null))])]), A("clipPath", {
        id: `${r.value}-clip`
      }, [g.value.map((p) => A("rect", {
        x: p.x + v.value,
        y: p.y,
        width: l.value,
        height: p.height,
        rx: w.value,
        ry: w.value
      }, [e.autoDraw && A(Qe, null, [A("animate", {
        attributeName: "y",
        from: p.y + p.height,
        to: p.y,
        dur: `${i.value}ms`,
        fill: "freeze"
      }, null), A("animate", {
        attributeName: "height",
        from: "0",
        to: p.height,
        dur: `${i.value}ms`,
        fill: "freeze"
      }, null)])]))]), o.value && A("g", {
        key: "labels",
        style: {
          textAnchor: "middle",
          dominantBaseline: "mathematical",
          fill: "currentColor"
        }
      }, [_.value.map((p, y) => A("text", {
        x: p.x + v.value + l.value / 2,
        y: parseInt(e.height, 10) - 2 + (parseInt(e.labelSize, 10) || 7 * 0.75),
        "font-size": Number(e.labelSize) || 7
      }, [n.label?.({
        index: y,
        value: p.value
      }) ?? p.value]))]), A("g", {
        "clip-path": `url(#${r.value}-clip)`,
        fill: `url(#${r.value})`
      }, [A("rect", {
        x: 0,
        y: 0,
        width: Math.max(e.modelValue.length * l.value, Number(e.width)),
        height: e.height
      }, null)])]);
    });
  }
});
function nK(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 75;
  if (e.length === 0) return "";
  const r = e.shift(), i = e[e.length - 1];
  return (n ? `M${r.x} ${a - r.x + 2} L${r.x} ${r.y}` : `M${r.x} ${r.y}`) + e.map((o, l) => {
    const s = e[l + 1], d = e[l - 1] || r, u = s && aK(s, o, d);
    if (!s || u)
      return `L${o.x} ${o.y}`;
    const f = Math.min(_A(d, o), _A(s, o)), g = f / 2 < t ? f / 2 : t, v = pA(d, o, g), w = pA(s, o, g);
    return `L${v.x} ${v.y}S${o.x} ${o.y} ${w.x} ${w.y}`;
  }).join("") + (n ? `L${i.x} ${a - r.x + 2} Z` : "");
}
function Vh(e) {
  return parseInt(e, 10);
}
function aK(e, t, n) {
  return Vh(e.x + n.x) === Vh(2 * t.x) && Vh(e.y + n.y) === Vh(2 * t.y);
}
function _A(e, t) {
  return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
}
function pA(e, t, n) {
  const a = {
    x: e.x - t.x,
    y: e.y - t.y
  }, r = Math.sqrt(a.x * a.x + a.y * a.y), i = {
    x: a.x / r,
    y: a.y / r
  };
  return {
    x: t.x + i.x * n,
    y: t.y + i.y * n
  };
}
const VO = De({
  fill: Boolean,
  ...DO()
}, "VTrendline"), vA = We()({
  name: "VTrendline",
  props: VO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = $r(), r = z(() => e.id || `trendline-${a}`), i = z(() => Number(e.autoDrawDuration) || (e.fill ? 500 : 2e3)), o = Se(0), l = Se(null);
    function s(b, p) {
      const {
        minX: y,
        maxX: S,
        minY: E,
        maxY: C
      } = p, B = b.length, O = e.max != null ? Number(e.max) : Math.max(...b), D = e.min != null ? Number(e.min) : Math.min(...b), T = (S - y) / (B - 1), P = (C - E) / (O - D || 1);
      return b.map((I, M) => ({
        x: y + M * T,
        y: C - (I - D) * P,
        value: I
      }));
    }
    const d = z(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), u = z(() => parseFloat(e.lineWidth) || 4), f = z(() => Number(e.width)), _ = z(() => {
      const b = Number(e.padding);
      return {
        minX: b,
        maxX: f.value - b,
        minY: b,
        maxY: parseInt(e.height, 10) - b
      };
    }), g = z(() => e.modelValue.map((b) => Da(b, e.itemValue, b))), v = z(() => {
      const b = [], p = s(g.value, _.value), y = p.length;
      for (let S = 0; b.length < y; S++) {
        const E = p[S];
        let C = e.labels[S];
        C || (C = typeof E == "object" ? E.value : E), b.push({
          x: E.x,
          value: String(C)
        });
      }
      return b;
    });
    nt(() => e.modelValue, async () => {
      if (await Vt(), !e.autoDraw || !l.value) return;
      const b = l.value, p = b.getTotalLength();
      e.fill ? (b.style.transformOrigin = "bottom center", b.style.transition = "none", b.style.transform = "scaleY(0)", b.getBoundingClientRect(), b.style.transition = `transform ${i.value}ms ${e.autoDrawEasing}`, b.style.transform = "scaleY(1)") : (b.style.strokeDasharray = `${p}`, b.style.strokeDashoffset = `${p}`, b.getBoundingClientRect(), b.style.transition = `stroke-dashoffset ${i.value}ms ${e.autoDrawEasing}`, b.style.strokeDashoffset = "0"), o.value = p;
    }, {
      immediate: !0
    });
    function w(b) {
      const p = typeof e.smooth == "boolean" ? e.smooth ? 8 : 0 : Number(e.smooth);
      return nK(s(g.value, _.value), p, b, parseInt(e.height, 10));
    }
    Ge(() => {
      const b = e.gradient.slice().length ? e.gradient.slice().reverse() : [""];
      return A("svg", {
        display: "block",
        "stroke-width": parseFloat(e.lineWidth) ?? 4
      }, [A("defs", null, [A("linearGradient", {
        id: r.value,
        gradientUnits: "userSpaceOnUse",
        x1: e.gradientDirection === "left" ? "100%" : "0",
        y1: e.gradientDirection === "top" ? "100%" : "0",
        x2: e.gradientDirection === "right" ? "100%" : "0",
        y2: e.gradientDirection === "bottom" ? "100%" : "0"
      }, [b.map((p, y) => A("stop", {
        offset: y / Math.max(b.length - 1, 1),
        "stop-color": p || "currentColor"
      }, null))])]), d.value && A("g", {
        key: "labels",
        style: {
          textAnchor: "middle",
          dominantBaseline: "mathematical",
          fill: "currentColor"
        }
      }, [v.value.map((p, y) => A("text", {
        x: p.x + u.value / 2 + u.value / 2,
        y: parseInt(e.height, 10) - 4 + (parseInt(e.labelSize, 10) || 7 * 0.75),
        "font-size": Number(e.labelSize) || 7
      }, [n.label?.({
        index: y,
        value: p.value
      }) ?? p.value]))]), A("path", {
        ref: l,
        d: w(e.fill),
        fill: e.fill ? `url(#${r.value})` : "none",
        stroke: e.fill ? "none" : `url(#${r.value})`
      }, null), e.fill && A("path", {
        d: w(!1),
        fill: "none",
        stroke: e.color ?? e.gradient?.[0]
      }, null)]);
    });
  }
}), rK = De({
  type: {
    type: String,
    default: "trend"
  },
  ...BO(),
  ...VO()
}, "VSparkline"), iK = We()({
  name: "VSparkline",
  props: rK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      textColorClasses: a,
      textColorStyles: r
    } = mr(() => e.color), i = z(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), o = z(() => {
      let l = parseInt(e.height, 10);
      return i.value && (l += parseInt(e.labelSize, 10) * 1.5), l;
    });
    Ge(() => {
      const l = e.type === "trend" ? vA : hA, s = e.type === "trend" ? vA.filterProps(e) : hA.filterProps(e);
      return h(l, He({
        key: e.type,
        class: a.value,
        style: r.value,
        viewBox: `0 0 ${e.width} ${parseInt(o.value, 10)}`
      }, s), n);
    });
  }
}), oK = De({
  ...vt(),
  ...gP({
    offset: 8,
    minWidth: 0,
    openDelay: 0,
    closeDelay: 100,
    location: "top center",
    transition: "scale-transition"
  })
}, "VSpeedDial"), sK = We()({
  name: "VSpeedDial",
  props: oK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), r = Se(), i = z(() => {
      const [l, s = "center"] = e.location?.split(" ") ?? [];
      return `${l} ${s}`;
    }), o = z(() => ({
      [`v-speed-dial__content--${i.value.replace(" ", "-")}`]: !0
    }));
    return Ge(() => {
      const l = Ru.filterProps(e);
      return h(Ru, He(l, {
        modelValue: a.value,
        "onUpdate:modelValue": (s) => a.value = s,
        class: e.class,
        style: e.style,
        contentClass: ["v-speed-dial__content", o.value, e.contentClass],
        location: i.value,
        ref: r,
        transition: "fade-transition"
      }), {
        ...n,
        default: (s) => h(Wt, {
          defaults: {
            VBtn: {
              size: "small"
            }
          }
        }, {
          default: () => [h(Sr, {
            appear: !0,
            group: !0,
            transition: e.transition
          }, {
            default: () => [n.default?.(s)]
          })]
        })
      });
    }), {};
  }
}), e1 = Symbol.for("vuetify:v-stepper"), MO = De({
  color: String,
  disabled: {
    type: [Boolean, String],
    default: !1
  },
  prevText: {
    type: String,
    default: "$vuetify.stepper.prev"
  },
  nextText: {
    type: String,
    default: "$vuetify.stepper.next"
  }
}, "VStepperActions"), RO = We()({
  name: "VStepperActions",
  props: MO(),
  emits: {
    "click:prev": () => !0,
    "click:next": () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = ua();
    function i() {
      n("click:prev");
    }
    function o() {
      n("click:next");
    }
    return Ge(() => {
      const l = {
        onClick: i
      }, s = {
        onClick: o
      };
      return A("div", {
        class: "v-stepper-actions"
      }, [h(Wt, {
        defaults: {
          VBtn: {
            disabled: ["prev", !0].includes(e.disabled),
            text: r(e.prevText),
            variant: "text"
          }
        }
      }, {
        default: () => [a.prev?.({
          props: l
        }) ?? h(cn, l, null)]
      }), h(Wt, {
        defaults: {
          VBtn: {
            color: e.color,
            disabled: ["next", !0].includes(e.disabled),
            text: r(e.nextText),
            variant: "tonal"
          }
        }
      }, {
        default: () => [a.next?.({
          props: s
        }) ?? h(cn, s, null)]
      })]);
    }), {};
  }
}), LO = xo("v-stepper-header"), lK = De({
  color: String,
  title: String,
  subtitle: String,
  complete: Boolean,
  completeIcon: {
    type: At,
    default: "$complete"
  },
  editable: Boolean,
  editIcon: {
    type: At,
    default: "$edit"
  },
  error: Boolean,
  errorIcon: {
    type: At,
    default: "$error"
  },
  icon: At,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  rules: {
    type: Array,
    default: () => []
  }
}, "StepperItem"), cK = De({
  ...lK(),
  ...pc()
}, "VStepperItem"), FO = We()({
  name: "VStepperItem",
  directives: {
    vRipple: Cr
  },
  props: cK(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = vc(e, e1, !0), r = z(() => a?.value.value ?? e.value), i = z(() => e.rules.every((_) => _() === !0)), o = z(() => !e.disabled && e.editable), l = z(() => !e.disabled && e.editable), s = z(() => e.error || !i.value), d = z(() => e.complete || e.rules.length > 0 && i.value), u = z(() => s.value ? e.errorIcon : d.value ? e.completeIcon : a.isSelected.value && e.editable ? e.editIcon : e.icon), f = z(() => ({
      canEdit: l.value,
      hasError: s.value,
      hasCompleted: d.value,
      title: e.title,
      subtitle: e.subtitle,
      step: r.value,
      value: e.value
    }));
    return Ge(() => {
      const _ = (!a || a.isSelected.value || d.value || l.value) && !s.value && !e.disabled, g = !!(e.title != null || n.title), v = !!(e.subtitle != null || n.subtitle);
      function w() {
        a?.toggle();
      }
      return ln(A("button", {
        class: Ee(["v-stepper-item", {
          "v-stepper-item--complete": d.value,
          "v-stepper-item--disabled": e.disabled,
          "v-stepper-item--error": s.value
        }, a?.selectedClass.value]),
        disabled: !e.editable,
        type: "button",
        onClick: w
      }, [o.value && il(!0, "v-stepper-item"), h(Ei, {
        key: "stepper-avatar",
        class: "v-stepper-item__avatar",
        color: _ ? e.color : void 0,
        size: 24
      }, {
        default: () => [n.icon?.(f.value) ?? (u.value ? h(pn, {
          icon: u.value
        }, null) : r.value)]
      }), A("div", {
        class: "v-stepper-item__content"
      }, [g && A("div", {
        key: "title",
        class: "v-stepper-item__title"
      }, [n.title?.(f.value) ?? e.title]), v && A("div", {
        key: "subtitle",
        class: "v-stepper-item__subtitle"
      }, [n.subtitle?.(f.value) ?? e.subtitle]), n.default?.(f.value)])]), [[Cr, e.ripple && e.editable, null]]);
    }), {};
  }
}), uK = De({
  ...la(xp(), ["continuous", "nextIcon", "prevIcon", "showArrows", "touch", "mandatory"])
}, "VStepperWindow"), NO = We()({
  name: "VStepperWindow",
  props: uK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(e1, null), r = kt(e, "modelValue"), i = z({
      get() {
        return r.value != null || !a ? r.value : a.items.value.find((o) => a.selected.value.includes(o.id))?.value;
      },
      set(o) {
        r.value = o;
      }
    });
    return Ge(() => {
      const o = ac.filterProps(e);
      return h(ac, He({
        _as: "VStepperWindow"
      }, o, {
        modelValue: i.value,
        "onUpdate:modelValue": (l) => i.value = l,
        class: ["v-stepper-window", e.class],
        style: e.style,
        mandatory: !1,
        touch: !1
      }), n);
    }), {};
  }
}), dK = De({
  ...Tp()
}, "VStepperWindowItem"), UO = We()({
  name: "VStepperWindowItem",
  props: dK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = rc.filterProps(e);
      return h(rc, He({
        _as: "VStepperWindowItem"
      }, a, {
        class: ["v-stepper-window-item", e.class],
        style: e.style
      }), n);
    }), {};
  }
}), fK = De({
  altLabels: Boolean,
  bgColor: String,
  completeIcon: At,
  editIcon: At,
  editable: Boolean,
  errorIcon: At,
  hideActions: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  itemTitle: {
    type: String,
    default: "title"
  },
  itemValue: {
    type: String,
    default: "value"
  },
  nonLinear: Boolean,
  flat: Boolean,
  ...cc()
}, "Stepper"), mK = De({
  ...fK(),
  ..._c({
    mandatory: "force",
    selectedClass: "v-stepper-item--selected"
  }),
  ...F0(),
  ...tl(MO(), ["prevText", "nextText"])
}, "VStepper"), hK = We()({
  name: "VStepper",
  props: mK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      items: a,
      next: r,
      prev: i,
      selected: o
    } = ol(e, e1), {
      displayClasses: l,
      mobile: s
    } = mi(e), {
      completeIcon: d,
      editIcon: u,
      errorIcon: f,
      color: _,
      editable: g,
      prevText: v,
      nextText: w
    } = $u(e), b = z(() => e.items.map((S, E) => {
      const C = Da(S, e.itemTitle, S), B = Da(S, e.itemValue, E + 1);
      return {
        title: C,
        value: B,
        raw: S
      };
    })), p = z(() => a.value.findIndex((S) => o.value.includes(S.id))), y = z(() => e.disabled ? e.disabled : p.value === 0 ? "prev" : p.value === a.value.length - 1 ? "next" : !1);
    return ca({
      VStepperItem: {
        editable: g,
        errorIcon: f,
        completeIcon: d,
        editIcon: u,
        prevText: v,
        nextText: w
      },
      VStepperActions: {
        color: _,
        disabled: y,
        prevText: v,
        nextText: w
      }
    }), Ge(() => {
      const S = Df.filterProps(e), E = !!(n.header || e.items.length), C = e.items.length > 0, B = !e.hideActions && !!(C || n.actions);
      return h(Df, He(S, {
        color: e.bgColor,
        class: ["v-stepper", {
          "v-stepper--alt-labels": e.altLabels,
          "v-stepper--flat": e.flat,
          "v-stepper--non-linear": e.nonLinear,
          "v-stepper--mobile": s.value
        }, l.value, e.class],
        style: e.style
      }), {
        default: () => [E && h(LO, {
          key: "stepper-header"
        }, {
          default: () => [b.value.map((O, D) => {
            let {
              raw: T,
              ...P
            } = O;
            return A(Qe, null, [!!D && h(Go, null, null), h(FO, P, {
              default: n[`header-item.${P.value}`] ?? n.header,
              icon: n.icon,
              title: n.title,
              subtitle: n.subtitle
            })]);
          })]
        }), C && h(NO, {
          key: "stepper-window"
        }, {
          default: () => [b.value.map((O) => h(UO, {
            value: O.value
          }, {
            default: () => n[`item.${O.value}`]?.(O) ?? n.item?.(O)
          }))]
        }), n.default?.({
          prev: i,
          next: r
        }), B && (n.actions?.({
          next: r,
          prev: i
        }) ?? h(RO, {
          key: "stepper-actions",
          "onClick:prev": i,
          "onClick:next": r
        }, n))]
      });
    }), {
      prev: i,
      next: r
    };
  }
}), _K = De({
  indeterminate: Boolean,
  inset: Boolean,
  flat: Boolean,
  loading: {
    type: [Boolean, String],
    default: !1
  },
  ...fs(),
  ...kp()
}, "VSwitch"), pK = We()({
  name: "VSwitch",
  inheritAttrs: !1,
  props: _K(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:indeterminate": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = kt(e, "indeterminate"), i = kt(e, "modelValue"), {
      loaderClasses: o
    } = Qf(e), {
      isFocused: l,
      focus: s,
      blur: d
    } = ds(e), u = Se(), f = vn && window.matchMedia("(forced-colors: active)").matches, _ = be(() => typeof e.loading == "string" && e.loading !== "" ? e.loading : e.color), g = $r(), v = be(() => e.id || `switch-${g}`);
    function w() {
      r.value && (r.value = !1);
    }
    function b(p) {
      p.stopPropagation(), p.preventDefault(), u.value?.input?.click();
    }
    return Ge(() => {
      const [p, y] = nl(n), S = hr.filterProps(e), E = Gs.filterProps(e);
      return h(hr, He({
        class: ["v-switch", {
          "v-switch--flat": e.flat
        }, {
          "v-switch--inset": e.inset
        }, {
          "v-switch--indeterminate": r.value
        }, o.value, e.class]
      }, p, S, {
        modelValue: i.value,
        "onUpdate:modelValue": (C) => i.value = C,
        id: v.value,
        focused: l.value,
        style: e.style
      }), {
        ...a,
        default: (C) => {
          let {
            id: B,
            messagesId: O,
            isDisabled: D,
            isReadonly: T,
            isValid: P
          } = C;
          const I = {
            model: i,
            isValid: P
          };
          return h(Gs, He({
            ref: u
          }, E, {
            modelValue: i.value,
            "onUpdate:modelValue": [(M) => i.value = M, w],
            id: B.value,
            "aria-describedby": O.value,
            type: "checkbox",
            "aria-checked": r.value ? "mixed" : void 0,
            disabled: D.value,
            readonly: T.value,
            onFocus: s,
            onBlur: d
          }, y), {
            ...a,
            default: (M) => {
              let {
                backgroundColorClasses: V,
                backgroundColorStyles: N
              } = M;
              return A("div", {
                class: Ee(["v-switch__track", f ? void 0 : V.value]),
                style: Xe(N.value),
                onClick: b
              }, [a["track-true"] && A("div", {
                key: "prepend",
                class: "v-switch__track-true"
              }, [a["track-true"](I)]), a["track-false"] && A("div", {
                key: "append",
                class: "v-switch__track-false"
              }, [a["track-false"](I)])]);
            },
            input: (M) => {
              let {
                inputNode: V,
                icon: N,
                backgroundColorClasses: q,
                backgroundColorStyles: j
              } = M;
              return A(Qe, null, [V, A("div", {
                class: Ee(["v-switch__thumb", {
                  "v-switch__thumb--filled": N || e.loading
                }, e.inset || f ? void 0 : q.value]),
                style: Xe(e.inset ? void 0 : j.value)
              }, [a.thumb ? h(Wt, {
                defaults: {
                  VIcon: {
                    icon: N,
                    size: "x-small"
                  }
                }
              }, {
                default: () => [a.thumb({
                  ...I,
                  icon: N
                })]
              }) : h(b0, null, {
                default: () => [e.loading ? h(Jf, {
                  name: "v-switch",
                  active: !0,
                  color: P.value === !1 ? void 0 : _.value
                }, {
                  default: (ee) => a.loader ? a.loader(ee) : h(Mu, {
                    active: ee.isActive,
                    color: ee.color,
                    indeterminate: !0,
                    size: "16",
                    width: "2"
                  }, null)
                }) : N && h(pn, {
                  key: String(N),
                  icon: N,
                  size: "x-small"
                }, null)]
              })])]);
            }
          });
        }
      });
    }), {};
  }
}), vK = De({
  color: String,
  height: [Number, String],
  window: Boolean,
  ...vt(),
  ...za(),
  ...uc(),
  ...Hn(),
  ...qt(),
  ...an()
}, "VSystemBar"), gK = We()({
  name: "VSystemBar",
  props: vK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = An(() => e.color), {
      elevationClasses: o
    } = ir(e), {
      roundedClasses: l
    } = fa(e), {
      ssrBootStyles: s
    } = mc(), d = z(() => e.height ?? (e.window ? 32 : 24)), {
      layoutItemStyles: u
    } = dc({
      id: e.name,
      order: z(() => parseInt(e.order, 10)),
      position: ot("top"),
      layoutSize: d,
      elementSize: d,
      active: z(() => !0),
      absolute: be(() => e.absolute)
    });
    return Ge(() => h(e.tag, {
      class: Ee(["v-system-bar", {
        "v-system-bar--window": e.window
      }, a.value, r.value, o.value, l.value, e.class]),
      style: Xe([i.value, u.value, s.value, e.style])
    }, n)), {};
  }
}), t1 = Symbol.for("vuetify:v-tabs"), yK = De({
  fixed: Boolean,
  sliderColor: String,
  hideSlider: Boolean,
  direction: {
    type: String,
    default: "horizontal"
  },
  ...la(wp({
    selectedClass: "v-tab--selected",
    variant: "text"
  }), ["active", "block", "flat", "location", "position", "symbol"])
}, "VTab"), $O = We()({
  name: "VTab",
  props: yK(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    const {
      textColorClasses: r,
      textColorStyles: i
    } = mr(() => e.sliderColor), o = Se(), l = Se(), s = z(() => e.direction === "horizontal"), d = z(() => o.value?.group?.isSelected.value ?? !1);
    function u(f) {
      let {
        value: _
      } = f;
      if (_) {
        const g = o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"), v = l.value;
        if (!g || !v) return;
        const w = getComputedStyle(g).color, b = g.getBoundingClientRect(), p = v.getBoundingClientRect(), y = s.value ? "x" : "y", S = s.value ? "X" : "Y", E = s.value ? "right" : "bottom", C = s.value ? "width" : "height", B = b[y], O = p[y], D = B > O ? b[E] - p[E] : b[y] - p[y], T = Math.sign(D) > 0 ? s.value ? "right" : "bottom" : Math.sign(D) < 0 ? s.value ? "left" : "top" : "center", I = (Math.abs(D) + (Math.sign(D) < 0 ? b[C] : p[C])) / Math.max(b[C], p[C]) || 0, M = b[C] / p[C] || 0, V = 1.5;
        Fl(v, {
          backgroundColor: [w, "currentcolor"],
          transform: [`translate${S}(${D}px) scale${S}(${M})`, `translate${S}(${D / V}px) scale${S}(${(I - 1) / V + 1})`, "none"],
          transformOrigin: Array(3).fill(T)
        }, {
          duration: 225,
          easing: _f
        });
      }
    }
    return Ge(() => {
      const f = cn.filterProps(e);
      return h(cn, He({
        symbol: t1,
        ref: o,
        class: ["v-tab", e.class],
        style: e.style,
        tabindex: d.value ? 0 : -1,
        role: "tab",
        "aria-selected": String(d.value),
        active: !1
      }, f, a, {
        block: e.fixed,
        maxWidth: e.fixed ? 300 : void 0,
        "onGroup:selected": u
      }), {
        ...n,
        default: () => A(Qe, null, [n.default?.() ?? e.text, !e.hideSlider && A("div", {
          ref: l,
          class: Ee(["v-tab__slider", r.value]),
          style: Xe(i.value)
        }, null)])
      });
    }), pi({}, o);
  }
}), bK = De({
  ...la(xp(), ["continuous", "nextIcon", "prevIcon", "showArrows", "touch", "mandatory"])
}, "VTabsWindow"), qO = We()({
  name: "VTabsWindow",
  props: bK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(t1, null), r = kt(e, "modelValue"), i = z({
      get() {
        return r.value != null || !a ? r.value : a.items.value.find((o) => a.selected.value.includes(o.id))?.value;
      },
      set(o) {
        r.value = o;
      }
    });
    return Ge(() => {
      const o = ac.filterProps(e);
      return h(ac, He({
        _as: "VTabsWindow"
      }, o, {
        modelValue: i.value,
        "onUpdate:modelValue": (l) => i.value = l,
        class: ["v-tabs-window", e.class],
        style: e.style,
        mandatory: !1,
        touch: !1
      }), n);
    }), {};
  }
}), wK = De({
  ...Tp()
}, "VTabsWindowItem"), HO = We()({
  name: "VTabsWindowItem",
  props: wK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ge(() => {
      const a = rc.filterProps(e);
      return h(rc, He({
        _as: "VTabsWindowItem"
      }, a, {
        class: ["v-tabs-window-item", e.class],
        style: e.style
      }), n);
    }), {};
  }
});
function kK(e) {
  return e ? e.map((t) => mf(t) ? t : {
    text: t,
    value: t
  }) : [];
}
const SK = De({
  alignTabs: {
    type: String,
    default: "start"
  },
  color: String,
  fixedTabs: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  stacked: Boolean,
  bgColor: String,
  grow: Boolean,
  height: {
    type: [Number, String],
    default: void 0
  },
  hideSlider: Boolean,
  sliderColor: String,
  ...x0({
    mandatory: "force",
    selectedClass: "v-tab-item--selected"
  }),
  ...Qa(),
  ...qt()
}, "VTabs"), CK = We()({
  name: "VTabs",
  props: SK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = kt(e, "modelValue"), i = z(() => kK(e.items)), {
      densityClasses: o
    } = Ar(e), {
      backgroundColorClasses: l,
      backgroundColorStyles: s
    } = An(() => e.bgColor), {
      scopeId: d
    } = yc();
    return ca({
      VTab: {
        color: be(() => e.color),
        direction: be(() => e.direction),
        stacked: be(() => e.stacked),
        fixed: be(() => e.fixedTabs),
        sliderColor: be(() => e.sliderColor),
        hideSlider: be(() => e.hideSlider)
      }
    }), Ge(() => {
      const u = Pf.filterProps(e), f = !!(a.window || e.items.length > 0);
      return A(Qe, null, [h(Pf, He(u, {
        modelValue: r.value,
        "onUpdate:modelValue": (_) => r.value = _,
        class: ["v-tabs", `v-tabs--${e.direction}`, `v-tabs--align-tabs-${e.alignTabs}`, {
          "v-tabs--fixed-tabs": e.fixedTabs,
          "v-tabs--grow": e.grow,
          "v-tabs--stacked": e.stacked
        }, o.value, l.value, e.class],
        style: [{
          "--v-tabs-height": ht(e.height)
        }, s.value, e.style],
        role: "tablist",
        symbol: t1
      }, d, n), {
        default: () => [a.default?.() ?? i.value.map((_) => a.tab?.({
          item: _
        }) ?? h($O, He(_, {
          key: _.text,
          value: _.value
        }), {
          default: a[`tab.${_.value}`] ? () => a[`tab.${_.value}`]?.({
            item: _
          }) : void 0
        }))]
      }), f && h(qO, He({
        modelValue: r.value,
        "onUpdate:modelValue": (_) => r.value = _,
        key: "tabs-window"
      }, d), {
        default: () => [i.value.map((_) => a.item?.({
          item: _
        }) ?? h(HO, {
          value: _.value
        }, {
          default: () => a[`item.${_.value}`]?.({
            item: _
          })
        })), a.window?.()]
      })]);
    }), {};
  }
}), AK = De({
  autoGrow: Boolean,
  autofocus: Boolean,
  counter: [Boolean, Number, String],
  counterValue: Function,
  prefix: String,
  placeholder: String,
  persistentPlaceholder: Boolean,
  persistentCounter: Boolean,
  noResize: Boolean,
  rows: {
    type: [Number, String],
    default: 5,
    validator: (e) => !isNaN(parseFloat(e))
  },
  maxRows: {
    type: [Number, String],
    validator: (e) => !isNaN(parseFloat(e))
  },
  suffix: String,
  modelModifiers: Object,
  ...fs(),
  ...am()
}, "VTextarea"), xK = We()({
  name: "VTextarea",
  directives: {
    vIntersect: ns
  },
  inheritAttrs: !1,
  props: AK(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const i = kt(e, "modelValue"), {
      isFocused: o,
      focus: l,
      blur: s
    } = ds(e), {
      onIntersect: d
    } = yP(e), u = z(() => typeof e.counterValue == "function" ? e.counterValue(i.value) : (i.value || "").toString().length), f = z(() => {
      if (n.maxlength) return n.maxlength;
      if (!(!e.counter || typeof e.counter != "number" && typeof e.counter != "string"))
        return e.counter;
    }), _ = Se(), g = Se(), v = ot(""), w = Se(), b = z(() => e.persistentPlaceholder || o.value || e.active);
    function p() {
      w.value !== document.activeElement && w.value?.focus(), o.value || l();
    }
    function y(I) {
      p(), a("click:control", I);
    }
    function S(I) {
      a("mousedown:control", I);
    }
    function E(I) {
      I.stopPropagation(), p(), Vt(() => {
        i.value = "", rp(e["onClick:clear"], I);
      });
    }
    function C(I) {
      const M = I.target;
      if (i.value = M.value, e.modelModifiers?.trim) {
        const V = [M.selectionStart, M.selectionEnd];
        Vt(() => {
          M.selectionStart = V[0], M.selectionEnd = V[1];
        });
      }
    }
    const B = Se(), O = Se(Number(e.rows)), D = z(() => ["plain", "underlined"].includes(e.variant));
    ea(() => {
      e.autoGrow || (O.value = Number(e.rows));
    });
    function T() {
      e.autoGrow && Vt(() => {
        if (!B.value || !g.value) return;
        const I = getComputedStyle(B.value), M = getComputedStyle(g.value.$el), V = parseFloat(I.getPropertyValue("--v-field-padding-top")) + parseFloat(I.getPropertyValue("--v-input-padding-top")) + parseFloat(I.getPropertyValue("--v-field-padding-bottom")), N = B.value.scrollHeight, q = parseFloat(I.lineHeight), j = Math.max(parseFloat(e.rows) * q + V, parseFloat(M.getPropertyValue("--v-input-control-height"))), ee = parseFloat(e.maxRows) * q + V || 1 / 0, de = Pn(N ?? 0, j, ee);
        O.value = Math.floor((de - V) / q), v.value = ht(de);
      });
    }
    nn(T), nt(i, T), nt(() => e.rows, T), nt(() => e.maxRows, T), nt(() => e.density, T);
    let P;
    return nt(B, (I) => {
      I ? (P = new ResizeObserver(T), P.observe(B.value)) : P?.disconnect();
    }), Ga(() => {
      P?.disconnect();
    }), Ge(() => {
      const I = !!(r.counter || e.counter || e.counterValue), M = !!(I || r.details), [V, N] = nl(n), {
        modelValue: q,
        ...j
      } = hr.filterProps(e), ee = Qs.filterProps(e);
      return h(hr, He({
        ref: _,
        modelValue: i.value,
        "onUpdate:modelValue": (de) => i.value = de,
        class: ["v-textarea v-text-field", {
          "v-textarea--prefixed": e.prefix,
          "v-textarea--suffixed": e.suffix,
          "v-text-field--prefixed": e.prefix,
          "v-text-field--suffixed": e.suffix,
          "v-textarea--auto-grow": e.autoGrow,
          "v-textarea--no-resize": e.noResize || e.autoGrow,
          "v-input--plain-underlined": D.value
        }, e.class],
        style: e.style
      }, V, j, {
        centerAffix: O.value === 1 && !D.value,
        focused: o.value
      }), {
        ...r,
        default: (de) => {
          let {
            id: Z,
            isDisabled: F,
            isDirty: Y,
            isReadonly: se,
            isValid: X
          } = de;
          return h(Qs, He({
            ref: g,
            style: {
              "--v-textarea-control-height": v.value
            },
            onClick: y,
            onMousedown: S,
            "onClick:clear": E,
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"]
          }, ee, {
            id: Z.value,
            active: b.value || Y.value,
            centerAffix: O.value === 1 && !D.value,
            dirty: Y.value || e.dirty,
            disabled: F.value,
            focused: o.value,
            error: X.value === !1
          }), {
            ...r,
            default: (he) => {
              let {
                props: {
                  class: ve,
                  ...pe
                }
              } = he;
              return A(Qe, null, [e.prefix && A("span", {
                class: "v-text-field__prefix"
              }, [e.prefix]), ln(A("textarea", He({
                ref: w,
                class: ve,
                value: i.value,
                onInput: C,
                autofocus: e.autofocus,
                readonly: se.value,
                disabled: F.value,
                placeholder: e.placeholder,
                rows: e.rows,
                name: e.name,
                onFocus: p,
                onBlur: s
              }, pe, N), null), [[ns, {
                handler: d
              }, null, {
                once: !0
              }]]), e.autoGrow && ln(A("textarea", {
                class: Ee([ve, "v-textarea__sizer"]),
                id: `${pe.id}-sizer`,
                "onUpdate:modelValue": (H) => i.value = H,
                ref: B,
                readonly: !0,
                "aria-hidden": "true"
              }, null), [[e3, i.value]]), e.suffix && A("span", {
                class: "v-text-field__suffix"
              }, [e.suffix])]);
            }
          });
        },
        details: M ? (de) => A(Qe, null, [r.details?.(de), I && A(Qe, null, [A("span", null, null), h(Cp, {
          active: e.persistentCounter || o.value,
          value: u.value,
          max: f.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), pi({}, _, g, w);
  }
}), TK = De({
  withBackground: Boolean,
  ...vt(),
  ...an(),
  ...qt()
}, "VThemeProvider"), IK = We()({
  name: "VThemeProvider",
  props: TK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e);
    return () => e.withBackground ? h(e.tag, {
      class: Ee(["v-theme-provider", a.value, e.class]),
      style: Xe(e.style)
    }, {
      default: () => [n.default?.()]
    }) : n.default?.();
  }
}), EK = De({
  dotColor: String,
  fillDot: Boolean,
  hideDot: Boolean,
  icon: At,
  iconColor: String,
  lineColor: String,
  ...vt(),
  ...Hn(),
  ...To(),
  ...za()
}, "VTimelineDivider"), PK = We()({
  name: "VTimelineDivider",
  props: EK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      sizeClasses: a,
      sizeStyles: r
    } = Qu(e, "v-timeline-divider__dot"), {
      backgroundColorStyles: i,
      backgroundColorClasses: o
    } = An(() => e.dotColor), {
      roundedClasses: l
    } = fa(e, "v-timeline-divider__dot"), {
      elevationClasses: s
    } = ir(e), {
      backgroundColorClasses: d,
      backgroundColorStyles: u
    } = An(() => e.lineColor);
    return Ge(() => A("div", {
      class: Ee(["v-timeline-divider", {
        "v-timeline-divider--fill-dot": e.fillDot
      }, e.class]),
      style: Xe(e.style)
    }, [A("div", {
      class: Ee(["v-timeline-divider__before", d.value]),
      style: Xe(u.value)
    }, null), !e.hideDot && A("div", {
      key: "dot",
      class: Ee(["v-timeline-divider__dot", s.value, l.value, a.value]),
      style: Xe(r.value)
    }, [A("div", {
      class: Ee(["v-timeline-divider__inner-dot", o.value, l.value]),
      style: Xe(i.value)
    }, [n.default ? h(Wt, {
      key: "icon-defaults",
      disabled: !e.icon,
      defaults: {
        VIcon: {
          color: e.iconColor,
          icon: e.icon,
          size: e.size
        }
      }
    }, n.default) : h(pn, {
      key: "icon",
      color: e.iconColor,
      icon: e.icon,
      size: e.size
    }, null)])]), A("div", {
      class: Ee(["v-timeline-divider__after", d.value]),
      style: Xe(u.value)
    }, null)])), {};
  }
}), zO = De({
  density: String,
  dotColor: String,
  fillDot: Boolean,
  hideDot: Boolean,
  hideOpposite: {
    type: Boolean,
    default: void 0
  },
  icon: At,
  iconColor: String,
  lineInset: [Number, String],
  side: {
    type: String,
    validator: (e) => e == null || ["start", "end"].includes(e)
  },
  ...vt(),
  ...La(),
  ...za(),
  ...Hn(),
  ...To(),
  ...qt()
}, "VTimelineItem"), OK = We()({
  name: "VTimelineItem",
  props: zO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Fa(e), r = ot(0), i = Se();
    return nt(i, (o) => {
      o && (r.value = o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width ?? 0);
    }, {
      flush: "post"
    }), Ge(() => A("div", {
      class: Ee(["v-timeline-item", {
        "v-timeline-item--fill-dot": e.fillDot,
        "v-timeline-item--side-start": e.side === "start",
        "v-timeline-item--side-end": e.side === "end"
      }, e.class]),
      style: Xe([{
        "--v-timeline-dot-size": ht(r.value),
        "--v-timeline-line-inset": e.lineInset ? `calc(var(--v-timeline-dot-size) / 2 + ${ht(e.lineInset)})` : ht(0)
      }, e.style])
    }, [A("div", {
      class: "v-timeline-item__body",
      style: Xe(a.value)
    }, [n.default?.()]), h(PK, {
      ref: i,
      hideDot: e.hideDot,
      icon: e.icon,
      iconColor: e.iconColor,
      size: e.size,
      elevation: e.elevation,
      dotColor: e.dotColor,
      fillDot: e.fillDot,
      rounded: e.rounded
    }, {
      default: n.icon
    }), e.density !== "compact" && A("div", {
      class: "v-timeline-item__opposite"
    }, [!e.hideOpposite && n.opposite?.()])])), {};
  }
}), DK = De({
  align: {
    type: String,
    default: "center",
    validator: (e) => ["center", "start"].includes(e)
  },
  direction: {
    type: String,
    default: "vertical",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  justify: {
    type: String,
    default: "auto",
    validator: (e) => ["auto", "center"].includes(e)
  },
  side: {
    type: String,
    validator: (e) => e == null || ["start", "end"].includes(e)
  },
  lineThickness: {
    type: [String, Number],
    default: 2
  },
  lineColor: String,
  truncateLine: {
    type: String,
    validator: (e) => ["start", "end", "both"].includes(e)
  },
  ...tl(zO({
    lineInset: 0
  }), ["dotColor", "fillDot", "hideOpposite", "iconColor", "lineInset", "size"]),
  ...vt(),
  ...Qa(),
  ...qt(),
  ...an()
}, "VTimeline"), BK = We()({
  name: "VTimeline",
  props: DK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = yn(e), {
      densityClasses: r
    } = Ar(e), {
      rtlClasses: i
    } = Ra();
    ca({
      VTimelineDivider: {
        lineColor: be(() => e.lineColor)
      },
      VTimelineItem: {
        density: be(() => e.density),
        dotColor: be(() => e.dotColor),
        fillDot: be(() => e.fillDot),
        hideOpposite: be(() => e.hideOpposite),
        iconColor: be(() => e.iconColor),
        lineColor: be(() => e.lineColor),
        lineInset: be(() => e.lineInset),
        size: be(() => e.size)
      }
    });
    const o = z(() => {
      const s = e.side ? e.side : e.density !== "default" ? "end" : null;
      return s && `v-timeline--side-${s}`;
    }), l = z(() => {
      const s = ["v-timeline--truncate-line-start", "v-timeline--truncate-line-end"];
      switch (e.truncateLine) {
        case "both":
          return s;
        case "start":
          return s[0];
        case "end":
          return s[1];
        default:
          return null;
      }
    });
    return Ge(() => h(e.tag, {
      class: Ee(["v-timeline", `v-timeline--${e.direction}`, `v-timeline--align-${e.align}`, `v-timeline--justify-${e.justify}`, l.value, {
        "v-timeline--inset-line": !!e.lineInset
      }, a.value, r.value, o.value, i.value, e.class]),
      style: Xe([{
        "--v-timeline-line-thickness": ht(e.lineThickness)
      }, e.style])
    }, n)), {};
  }
}), VK = De({
  ...vt(),
  ...Pi({
    variant: "text"
  })
}, "VToolbarItems"), MK = We()({
  name: "VToolbarItems",
  props: VK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return ca({
      VBtn: {
        color: be(() => e.color),
        height: "inherit",
        variant: be(() => e.variant)
      }
    }), Ge(() => A("div", {
      class: Ee(["v-toolbar-items", e.class]),
      style: Xe(e.style)
    }, [n.default?.()])), {};
  }
}), RK = De({
  id: String,
  interactive: Boolean,
  text: String,
  ...la(nm({
    closeOnBack: !1,
    location: "end",
    locationStrategy: "connected",
    eager: !0,
    minWidth: 0,
    offset: 10,
    openOnClick: !1,
    openOnHover: !0,
    origin: "auto",
    scrim: !1,
    scrollStrategy: "reposition",
    transition: null
  }), ["absolute", "persistent"])
}, "VTooltip"), WO = We()({
  name: "VTooltip",
  props: RK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = kt(e, "modelValue"), {
      scopeId: r
    } = yc(), i = $r(), o = be(() => e.id || `v-tooltip-${i}`), l = Se(), s = z(() => e.location.split(" ").length > 1 ? e.location : e.location + " center"), d = z(() => e.origin === "auto" || e.origin === "overlap" || e.origin.split(" ").length > 1 || e.location.split(" ").length > 1 ? e.origin : e.origin + " center"), u = be(() => e.transition != null ? e.transition : a.value ? "scale-transition" : "fade-transition"), f = z(() => He({
      "aria-describedby": o.value
    }, e.activatorProps));
    return Ge(() => {
      const _ = ko.filterProps(e);
      return h(ko, He({
        ref: l,
        class: ["v-tooltip", {
          "v-tooltip--interactive": e.interactive
        }, e.class],
        style: e.style,
        id: o.value
      }, _, {
        modelValue: a.value,
        "onUpdate:modelValue": (g) => a.value = g,
        transition: u.value,
        absolute: !0,
        location: s.value,
        origin: d.value,
        persistent: !0,
        role: "tooltip",
        activatorProps: f.value,
        _disableGlobalStack: !0
      }, r), {
        activator: n.activator,
        default: function() {
          for (var g = arguments.length, v = new Array(g), w = 0; w < g; w++)
            v[w] = arguments[w];
          return n.default?.(...v) ?? e.text;
        }
      });
    }), pi({}, l);
  }
}), LK = We()({
  name: "VValidation",
  props: zE(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = WE(e, "validation");
    return () => n.default?.(a);
  }
}), FK = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  VAlert: tz,
  VAlertTitle: LE,
  VApp: uH,
  VAppBar: PH,
  VAppBarNavIcon: JH,
  VAppBarTitle: XH,
  VAutocomplete: SW,
  VAvatar: Ei,
  VBadge: AW,
  VBanner: IW,
  VBannerActions: CP,
  VBannerText: AP,
  VBottomNavigation: PW,
  VBottomSheet: DW,
  VBreadcrumbs: RW,
  VBreadcrumbsDivider: TP,
  VBreadcrumbsItem: IP,
  VBtn: cn,
  VBtnGroup: kb,
  VBtnToggle: RH,
  VCard: $W,
  VCardActions: EP,
  VCardItem: DP,
  VCardSubtitle: PP,
  VCardText: BP,
  VCardTitle: OP,
  VCarousel: QW,
  VCarouselItem: XW,
  VCheckbox: fz,
  VCheckboxBtn: rs,
  VChip: ed,
  VChipGroup: vz,
  VClassIcon: Bw,
  VCode: ZW,
  VCol: IY,
  VColorPicker: qj,
  VCombobox: zj,
  VComponentIcon: Gy,
  VConfirmEdit: jj,
  VContainer: CY,
  VCounter: Cp,
  VDataIterator: nY,
  VDataTable: gY,
  VDataTableFooter: Bf,
  VDataTableHeaders: ic,
  VDataTableRow: G0,
  VDataTableRows: oc,
  VDataTableServer: kY,
  VDataTableVirtual: bY,
  VDatePicker: UY,
  VDatePickerControls: Nb,
  VDatePickerHeader: Ub,
  VDatePickerMonth: $b,
  VDatePickerMonths: qb,
  VDatePickerYears: Hb,
  VDefaultsProvider: Wt,
  VDialog: Ob,
  VDialogBottomTransition: hH,
  VDialogTopTransition: _H,
  VDialogTransition: vp,
  VDivider: Go,
  VEmptyState: qY,
  VExpandTransition: gp,
  VExpandXTransition: k0,
  VExpansionPanel: HY,
  VExpansionPanelText: zb,
  VExpansionPanelTitle: Wb,
  VExpansionPanels: jY,
  VFab: KY,
  VFabTransition: mH,
  VFadeTransition: xf,
  VField: Qs,
  VFieldLabel: Wd,
  VFileInput: JY,
  VFooter: ZY,
  VForm: t7,
  VHover: a7,
  VIcon: pn,
  VImg: as,
  VInfiniteScroll: i7,
  VInput: hr,
  VItem: l7,
  VItemGroup: s7,
  VKbd: c7,
  VLabel: Zu,
  VLayout: d7,
  VLayoutItem: m7,
  VLazy: _7,
  VLigatureIcon: Z4,
  VList: Sp,
  VListGroup: xb,
  VListImg: Nz,
  VListItem: is,
  VListItemAction: $z,
  VListItemMedia: Hz,
  VListItemSubtitle: rP,
  VListItemTitle: iP,
  VListSubheader: oP,
  VLocaleProvider: v7,
  VMain: y7,
  VMenu: Ru,
  VMessages: qE,
  VNavigationDrawer: I7,
  VNoSsr: E7,
  VNumberInput: V7,
  VOtpInput: R7,
  VOverlay: ko,
  VPagination: Lb,
  VParallax: N7,
  VProgressCircular: Mu,
  VProgressLinear: yp,
  VRadio: $7,
  VRadioGroup: H7,
  VRangeSlider: W7,
  VRating: Y7,
  VResponsive: bb,
  VRow: MY,
  VScaleTransition: b0,
  VScrollXReverseTransition: vH,
  VScrollXTransition: pH,
  VScrollYReverseTransition: yH,
  VScrollYTransition: gH,
  VSelect: R0,
  VSelectionControl: Gs,
  VSelectionControlGroup: NE,
  VSheet: Df,
  VSkeletonLoader: J7,
  VSlideGroup: Pf,
  VSlideGroupItem: X7,
  VSlideXReverseTransition: wH,
  VSlideXTransition: bH,
  VSlideYReverseTransition: kH,
  VSlideYTransition: w0,
  VSlider: Rb,
  VSnackbar: jb,
  VSnackbarQueue: tK,
  VSpacer: bO,
  VSparkline: iK,
  VSpeedDial: sK,
  VStepper: hK,
  VStepperActions: RO,
  VStepperHeader: LO,
  VStepperItem: FO,
  VStepperWindow: NO,
  VStepperWindowItem: UO,
  VSvgIcon: Dw,
  VSwitch: pK,
  VSystemBar: gK,
  VTab: $O,
  VTable: sc,
  VTabs: CK,
  VTabsWindow: qO,
  VTabsWindowItem: HO,
  VTextField: os,
  VTextarea: xK,
  VThemeProvider: IK,
  VTimeline: BK,
  VTimelineItem: OK,
  VToolbar: wb,
  VToolbarItems: MK,
  VToolbarTitle: y0,
  VTooltip: WO,
  VValidation: LK,
  VVirtualScroll: Ap,
  VWindow: ac,
  VWindowItem: rc
}, Symbol.toStringTag, { value: "Module" }));
function NK(e, t) {
  const n = t.modifiers || {}, a = t.value, {
    once: r,
    immediate: i,
    ...o
  } = n, l = !Object.keys(o).length, {
    handler: s,
    options: d
  } = typeof a == "object" ? a : {
    handler: a,
    options: {
      attributes: o?.attr ?? l,
      characterData: o?.char ?? l,
      childList: o?.child ?? l,
      subtree: o?.sub ?? l
    }
  }, u = new MutationObserver(function() {
    let f = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], _ = arguments.length > 1 ? arguments[1] : void 0;
    s?.(f, _), r && jO(e, t);
  });
  i && s?.([], u), e._mutate = Object(e._mutate), e._mutate[t.instance.$.uid] = {
    observer: u
  }, u.observe(e, d);
}
function jO(e, t) {
  e._mutate?.[t.instance.$.uid] && (e._mutate[t.instance.$.uid].observer.disconnect(), delete e._mutate[t.instance.$.uid]);
}
const UK = {
  mounted: NK,
  unmounted: jO
};
function $K(e, t) {
  const n = t.value, a = {
    passive: !t.modifiers?.active
  };
  window.addEventListener("resize", n, a), e._onResize = Object(e._onResize), e._onResize[t.instance.$.uid] = {
    handler: n,
    options: a
  }, t.modifiers?.quiet || n();
}
function qK(e, t) {
  if (!e._onResize?.[t.instance.$.uid]) return;
  const {
    handler: n,
    options: a
  } = e._onResize[t.instance.$.uid];
  window.removeEventListener("resize", n, a), delete e._onResize[t.instance.$.uid];
}
const HK = {
  mounted: $K,
  unmounted: qK
};
function YO(e, t) {
  const {
    self: n = !1
  } = t.modifiers ?? {}, a = t.value, r = typeof a == "object" && a.options || {
    passive: !0
  }, i = typeof a == "function" || "handleEvent" in a ? a : a.handler, o = n ? e : t.arg ? document.querySelector(t.arg) : window;
  o && (o.addEventListener("scroll", i, r), e._onScroll = Object(e._onScroll), e._onScroll[t.instance.$.uid] = {
    handler: i,
    options: r,
    // Don't reference self
    target: n ? void 0 : o
  });
}
function KO(e, t) {
  if (!e._onScroll?.[t.instance.$.uid]) return;
  const {
    handler: n,
    options: a,
    target: r = e
  } = e._onScroll[t.instance.$.uid];
  r.removeEventListener("scroll", n, a), delete e._onScroll[t.instance.$.uid];
}
function zK(e, t) {
  t.value !== t.oldValue && (KO(e, t), YO(e, t));
}
const WK = {
  mounted: YO,
  unmounted: KO,
  updated: zK
};
function jK(e, t) {
  const n = typeof e == "string" ? J(e) : e, a = YK(n, t);
  return {
    mounted: a,
    updated: a,
    unmounted(r) {
      p_(null, r);
    }
  };
}
function YK(e, t) {
  return function(n, a, r) {
    const i = typeof t == "function" ? t(a) : t, o = a.value?.text ?? a.value ?? i?.text, l = mf(a.value) ? a.value : {}, s = () => o ?? n.textContent, d = (r.ctx === a.instance.$ ? KK(r, a.instance.$)?.provides : r.ctx?.provides) ?? a.instance.$.provides, u = Co(e, He(i, l), s);
    u.appContext = Object.assign(/* @__PURE__ */ Object.create(null), a.instance.$.appContext, {
      provides: d
    }), p_(u, n);
  };
}
function KK(e, t) {
  const n = /* @__PURE__ */ new Set(), a = (i) => {
    for (const o of i) {
      if (!o) continue;
      if (o === e || o.el && e.el && o.el === e.el)
        return !0;
      n.add(o);
      let l;
      if (o.suspense ? l = a([o.ssContent]) : Array.isArray(o.children) ? l = a(o.children) : o.component?.vnode && (l = a([o.component?.subTree])), l)
        return l;
      n.delete(o);
    }
    return !1;
  };
  if (!a([t.subTree]))
    return t;
  const r = Array.from(n).reverse();
  for (const i of r)
    if (i.component)
      return i.component;
  return t;
}
const GK = jK(WO, (e) => ({
  activator: "parent",
  location: e.arg?.replace("-", " "),
  text: typeof e.value == "boolean" ? void 0 : e.value
})), QK = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ClickOutside: Pb,
  Intersect: ns,
  Mutate: UK,
  Resize: HK,
  Ripple: Cr,
  Scroll: WK,
  Tooltip: GK,
  Touch: U_
}, Symbol.toStringTag, { value: "Module" }));
function bc() {
  const { name: e } = mi(), t = Se(!1);
  nn(() => {
    if (typeof frappe < "u" && frappe.utils && typeof frappe.utils.is_rtl == "function" && (t.value = frappe.utils.is_rtl()), !t.value) {
      const _ = document.documentElement.dir || document.body.dir || "";
      t.value = _.toLowerCase() === "rtl";
    }
    if (!t.value) {
      const _ = document.documentElement.lang || "", g = ["ar", "he", "fa", "ur", "ps", "sd", "ku", "dv"];
      t.value = g.some((v) => _.toLowerCase().startsWith(v));
    }
  });
  const n = z(() => ({
    direction: t.value ? "rtl" : "ltr",
    textAlign: t.value ? "right" : "left"
  })), a = (_ = 0, g = 0, v = 0, w = 0) => t.value ? {
    marginLeft: `${g}px`,
    marginRight: `${_}px`,
    marginTop: `${v}px`,
    marginBottom: `${w}px`
  } : {
    marginLeft: `${_}px`,
    marginRight: `${g}px`,
    marginTop: `${v}px`,
    marginBottom: `${w}px`
  }, r = (_ = 0, g = 0, v = 0, w = 0) => t.value ? {
    paddingLeft: `${g}px`,
    paddingRight: `${_}px`,
    paddingTop: `${v}px`,
    paddingBottom: `${w}px`
  } : {
    paddingLeft: `${_}px`,
    paddingRight: `${g}px`,
    paddingTop: `${v}px`,
    paddingBottom: `${w}px`
  }, i = (_ = null, g = null, v = null, w = null) => {
    const b = {};
    return _ !== null && g !== null ? t.value ? (b.left = `${g}px`, b.right = `${_}px`) : (b.left = `${_}px`, b.right = `${g}px`) : _ !== null ? b[t.value ? "right" : "left"] = `${_}px` : g !== null && (b[t.value ? "left" : "right"] = `${g}px`), v !== null && (b.top = `${v}px`), w !== null && (b.bottom = `${w}px`), b;
  }, o = (_ = "row") => t.value && _ === "row" ? "row-reverse" : t.value && _ === "row-reverse" ? "row" : _, l = (_ = "left") => {
    if (t.value) {
      if (_ === "left") return "right";
      if (_ === "right") return "left";
    }
    return _;
  }, s = (_ = "left") => {
    if (t.value) {
      if (_ === "left") return "right";
      if (_ === "right") return "left";
    }
    return _;
  }, d = (_ = 0, g = 0, v = "") => `translateX(${t.value ? -_ : _}px) translateY(${g}px) ${v}`.trim(), u = z(() => ({
    "rtl-layout": t.value,
    "ltr-layout": !t.value
  })), f = z(() => {
    const _ = n.value, g = ["xs", "sm"].includes(e.value);
    return {
      ..._,
      // Adjust text alignment for mobile RTL
      ...g && t.value && {
        textAlign: "right"
      }
    };
  });
  return {
    // Reactive state
    isRtl: t,
    // Computed styles
    rtlStyles: n,
    rtlClasses: u,
    responsiveRtlStyles: f,
    // Helper functions
    getMarginStyle: a,
    getPaddingStyle: r,
    getPositionStyle: i,
    getFlexDirection: o,
    getTextAlign: l,
    getFloat: s,
    getTransform: d
  };
}
const GO = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7N13mB1nfTb++zszp20v2l31YlnNBQwYbHCnB0IIxQZCwi8k7xsSkpjgF0s2JVEKAUy1IYTkDT8SSAjY1AAGjAvNwbhg4ybJslVstdVqi7acOvN83z9WUmRZu9oyc56ZOffnunRd0u7ZZ+5dnT1zn5lnngGIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiCgZxHYAIpqbTzz1VCHITCwEnF51TCeM06minVDphGgnBB1QaYNqkwpyouiAIAegGUABkPz/jGZygDSdsIkRQPR//qk+gLEj/6gJZNxAhwUYF2BcoeOAc1hUR+HImEJHBRiAOAc8Mf2j/f7A5jPPrEb6QyGiGWMBIIqhDw48uigbeMuNY5apynKILBejiyBYBKAXwGIArZZjzsUQBP1QDADSD9V+FdktYnZBsMutya73LF53yHZIokbAAkBkwWa9w8sNLFvpwj8dcNao0bUQnA7IakCXA8jZzmjROCC7RMxOY2QXBLscwVYxumWib93uzSLGdkCiNGABIIrQZr3Dyw4uPt01ehZUzgTkTIieBcXpADK28yWPFgFsBZwtEH3EUWxVCR4u9vTv3CyX+bbTESUJCwBRSCbPyZeeZUSfB8FzoXgugDPQ2O/m66UCxUMQvVdU7gsc576unsMPv0POrdkORhRXLABEc3Cjqrujf+sZjrgvNNAXCvA8ABsAeLaz0TFlAA8CuFdE7xPFvSt61z1yhUhgOxhRHLAAEM3ADYPb24pGL4Ka80XlhQBegGROwmt0h6G4Ew5+Lqo/zY+69165Zk3FdigiG1gAiE7iw0NPtDvV4CIVvRSKSyB4DgDXdi4KXRnA3Sr6U0fdnxWl+t+be88ctx2KqB5YAIgAbH7kkWyhy71ARF4OkZcp9Bxwh9+IagB+IYofBq75YWXB+vt51QGlFQsANazrDj66RuG+AsAroLgUQIvlSBQ/BwH5EaA/9JG55X19p/XbDkQUFhYAahg3qro7BrZf4Kh5jUJ+C8Ba25koURTAAxC92Yh+89qeDffZDkQ0HywAlGqb9+1rKnijr1KV1wjwagDdtjNRWuiTKs43NQi+tXrh+p/x6gJKGhYASp1PPPVUoZopv1TEXA7gdeChfYreEIDvieh3xFRuvnrhsydsByI6FRYASoWPHvh1c4DCayH6RgFeCaBgOxM1rDEFvunA+Y+VvaffxiMDFFcsAJRYm1Wd/MBjLxLF7wF4C3hdPsXPIICvq+BL1/Su+7ntMETHYwGgxLnu4GPnGNW3CfBmAIts5yGaEcEWGPkPo8F/XLtowy7bcYhYACgRPjm8s6NSq75VVP8AkOfazkM0DyoiP4HBP+fH5BtciZBsYQGgWPvQwJbnOcb5IwBvBdBsOw9RyEYA3KhqPnPNwg0P2Q5DjYUFgGLnhsHtbWVf36zQKwGcaTsPUT0I5D4A/1wMWv598+LFRdt5KP1YACg2rjv42Dmq+k5A3wpIk+08RJYMAfhXY8ynOVeAosQCQFbdqOruGtj2elV5F4ALbOchipFAod+CyKd4BQFFgQWArPjIwNZWCfAHKvIXAFbazkMUb/orhVzf2Tv2n++Qc2u201A6sABQXX1o/5aV4jhXAvhDAdps5yFKEgX2QvCZbMX/56uWnTlkOw8lGwsA1cWHDj5+uqPB1QD+AIBnOw9Rwk1A9fMZT667asG6vbbDUDKxAFCkjkzsuwrA7wBwbechSpkqgK8acf/m2t7TH7cdhpKFBYAicd3BbRcZxV8K8FLbWYgaQBWCLxm4H2YRoJliAaBQXde/9QKF/DWAl9jOQtSAAkC+4hr5+/csWvOo7TAUbywAFIqPHNh+PhzzPih+03YWIoIB5OsCuXZj35onbIeheGIBoHn5aP/WZxmVD0HwKttZiOgZqqr4p0AyH3xf32n9tsNQvLAA0Jx8fO/jy3wveD+APwQn9xHF3QQgn8lmMx9+d+eqEdthKB5YAGhWPrZv2wLfxXsFeCeAnO08RDQrQ4B8OFMtfOaqZctKtsOQXSwANCM3bN+eK7YF7xLIewG0285DRPOhT6rKpk19a78qImo7DdnBAkCn9OED218jYj4JYLXtLEQUHhHcI+q86+q+Nb+wnYXqjwWApnTdwPbnahB8AiKX2M5CRJFRQL6mgfueaxavftJ2GKofFgB6ho/t27Yg8PAhKP4AgGM7DxHVxTgEf1+ayH5y86pVZdthKHosAHTMZlUnf3D7/xbo3wPosp2HiKzYKSpXbly49ru2g1C0WAAIwJHD/cb8A4DzbWchohgQfFd97095WiC9WAAa3EcGtrbCyIcB/DF4uJ+IjqPAqIh8YFXPmn+4QiSwnYfCxQLQwD7cv+UVAvlnQJbbzkJEsfYADN6xadG6u20HofDMqQCc88k7OoIhXQ2gJeQ8p5RpyowvdwsjbkZ57eocdS3x2haelduUycmbwBJIRDNjahW90e3Xd2++7MwDtsPQ/M3oxf9Zm+/sLWn5r8er/ivH/WBpOQg81Gn32+S5WNqSR08hi/ZsBlmH+ysiIlsyBQnae3Mb//G1z/qE7Sw0P9PuTdduvmNBxa/+50Cx9pKaal33vM0ZD2d2tmBxU47vUYmIYqa5y7tnZEBe/q13P4f3FkioKXeta/7y1uv2T1SuqhhT1xu9OBCc0dWM09qawTf7RETx5WZlwgT6lhv/9AXfsZ2FZu+Zu9jN6qwKbvvB3vHyy7Rex/mPyLoOnt/bgZ58pq7bJSKiuRORL2pWrrzpHecetp2FZu4Zl30tqf1oy57xUt13/nnXwSWLu7jzJyJKGFV9GyrBr6/41N0X285CM/e0IwAr33/LD/dOVF5e7xCuABcs6kJXjjt/IqIEUwU+PYHOjd+/ck3Fdhia3rEjAGv+8tYP7Juo1n3nDwDP6m7jzp+IKPlEgCtbZPiuN3zm7jNth6HpOQDwvM33Nh0sVT9Q78P+ANCZy2BFS6Hu2yUioogoznEM7r3803e/y3YUmpoDACP+8BeKfmDlLfgZXa28zI+IKH3yUHzq8k/f/Y3f+ezPOm2HoWdyztx8Y7a/XH2DjY0vyGc46Y+IKM0Ur6sFuXsvv+GeF9iOQk/n+FjwF5Wgvtf6H7WUh/6JiNJPcRqgP7v8+l9ehTovKkdTc0o138q7fwDoK2RtbZqIiOorC5GPX/7pe77925+8v8N2GAKckq9rbWw47zooeFYOPBARkT2vybi1u950/T1n2Q7S6JxyUGuzseHmDHf+REQNap0RveuKG375FttBGplTC/QZqwHWQ8ZhASAiamDNCvnyG2+4+/pLN9/h2Q7TiJzA0oZdTgMhImp4AlzZ09X8w9d95pfdtrM0Givv/omIiI7zYk/lbs4LqC8WACIisk9xmhHzi8uv/+XrbEdpFCwAREQUE9ICka9dccM977WdpBGwABARUZw4Cv3g5Tfc/YXLNz/CxWIixAJARERx9Pvomrj9LR+7d4HtIGnFAkBERHF1gZ8NfvGG6+9aYztIGrEAEBFRjMnpjjg/582EwscCQEREcdcL6O1XXH/Pq2wHSRMWACIiSoJmFf325Z/+5R/aDpIWLABERJQUHlT+7xXX/3Kz7SBpwAJARERJIiryV5ffcM/HocpF5eeBBYCIiBJIr3rjDfd8kTcSmjsWACIiSiQR/G5PV/O//9E/3ZuxnSWJWACIiCjJ3jRc0W/+/hfuyNsOkjSxPXSyvCvAsk5Fe8HAc22nISKiGHt1U8Z7+MV33vmit11wwUHbYZIiVgUg6wGvPLOKl26oobfV2I5DRETJsfqJAXfLz7f+fOWF6y8csx0mCWJTANb1BbjyJSV0N6vtKERElECre4Kuwojer3rHWSKXlW3nibtYzAE4b1UN7381d/5ERDQ/izvM6tKYfl/15pztLHFnvQCs6g7wzksryLjc+RMR0fzlMnqplvPfYgmYntUC4AjwZ5eVkfO48yciovAo9JVazn2TJWBqVgvApetqWNLJyX5ERBQ+BX5DK7kvq3KdgJOxXgCIiIiioorXa2XkP1W5YuCJrBWAribBmh6++yciomipyhtM2XxR9UauKnMcawVgRScgwnP/RERUF28x5e7/q7yB0DHWCsACXvJHRET19XZTvv1vbYeIC2sFIMuzMUREVH/vC8q3/bntEHFgfR0AIiKiulJ8yi/e/gbbMWxjASAiokbjiOi/a+lHF9oOYhMLABERNaK8gfNdrfzobNtBbGEBICKiRtVujHOzFn+4zHYQG1gAiIiokS014t2sw3d02A5SbywARETU6M4K8tpw9w1gASAiooYn0EtNOf952znqiQWAiIgIAKBvDYq3X207Rb2kfzkeNQC46iBRuAQQS+8fVAHwPiIUmQ/7xe/t8Jpe/XXbQaKWygIgfgmoDEOC0pEXCyIKnQDqNgG5DqjXFO22jA+pDEJqE0dKPVFkHIhzkw596TXS9Xvfsx0mSqk7BSCVw5CJvRC/yJ0/UZQUEL8ImdgHqY5Et52gDGf8KUh1jDt/qg81glr1G1q6cbntKFFKVwEIKpDygO0URA1HSoeAoBz+wGrgFA8AGoQ/NtF01M9ivHy36uZUHikHUlYApBLhuxAimlYUv3/ijwPGD31cohkJSn06tOY22zGikq4CEMU7ECKakUh+/4JK+GMSzYLUxi8OBr/8cds5opCqAsBz/kQWRXF+3vB3muxz/OK7dehrr7GdI2zpKgBERERh00DUP/x1Hf76CttRwsQCQEREdApi/Az8ibtUVWxnCQsLABER0UwEpYUY+urXbMcICwsAERHRTPmjr9fhm95uO0YYUnt9IxE1GGNghgeg5YlkTgjO5OB0LoBk81ZjaK0GM9wPVGN0BYY4kOYWOO0LAIngCLwqzMgAtDQ+s4mnrvt53fHZ++S0dz4Yfpj6YQEgouRTRbB/F7RctJ1k7iolBBOjcJethmQs3ZXW9xHseRww8Vt4ScsT0GoFbu/S0McODjwJLY7N5kskcA78QlVbRCSBbXMSTwEQUeJppZjsnf9RaqCHh6xt3owNx3Lnf5SOjQB+uAtDabU8253/5NeNDzcF2z92Z6hh6owFgIgST2tV2xFCY/N70VqMDvtPIfSM8/h566E9Lwx2feZPQ0xTVywARJR8iT0IezKp+mbCF6eL8NRAB3Z/Wnd9aZHtKHPBAkBERDRHWi2Lmdh1v+0cc8ECQERENA9m5GCf/8SnPmc7x2yxABBR4omTopcyce1tOgk/Rwk5Y0jfsx566h26+3NnhDJYnSTgf5uIaHqSLyBeJ4fnTpqa7G0732xt2zPiuqGvkyC5QjglwK8iGN3/i/kPVD8sAESUfF4WzoJFSHoJkOY2OK3d9rbf0gantdPa9qflOJNrAIS9EJDjwu1ZEsq4OjrUZrZ/8sYQUtUFFwIiolRw2rsgza1AuQg1EdyaOEoCSCZ/5EiG3SBO7xJIeze0WorNBQniupB8E+BGs8uSlnZ4+ebJxYbm+9xx9Y068JW10vPmx8JJFx0WACJKDfEyQEt7wo8D2Ce5PCRnd0niuvM8SDjPHYFT+xGA2N86mKcAiIiIwlQrLg+GvvIh2zFOhUcAyCKFmRiBKY5MHm40BnAcSLYAp6kDTnMHkn5Ol4gak9TGN+rw1z8nnW/YbTvLVFgAqO6CwwcRDOyEP/gktDIx5eMk2wyvexnc3lVw2/vqmJCIaH5EAwem9F0AZ9vOMhUWAKobUxxBbdcD8A/tmtHjtTqB2v6tqO3fCrdzMbKrzoXT0hVtSIoXHgCiJKtNnBUMff2dbtcbPms7yslwDgDVgaK6+wGU7vv2jHf+JwqG96F0/3dQ3fUrxGZqMkVP+B6Fks3xD39C9duttnOcDAsARcsEqGz9OWq7HwB0njtuVdSefBDlh2+D+rVw8lGsacbeojhEoTC1HEZK37Ad42RYACg6qig/egf8g0+EOmwwtAeVLXfMv1BQ/Ll5aDaWb56IZq4y+lIdufHFtmOciAWAIlPdcQ+CoT2RjB0M70P1ibsjGZviRfO90Gyb7RhE86DQWvmrtlOciCfYKBLB4FOo7X000m3U9m2B07EQ3oLYr7dB8yECLfRCs+0QfwIwPjg7kBJogY59+0+k9bX/aDvIUSwAFD5VVHfcM6OHOs1d8HpXwmnuhmRz0GoFZmII/sBOmPGhU359bed98LqXWr2DGtWJm4O6OdspiOZMgfeq3vElkcvGbWcBWAAoAv7+x2BKo9M+RrwssmteCK9nJU58N+d2LUFm2VnwB3ahuv0uqF+ZchxTGkVt/2PILN4QQnIiokgtNRX9AIBNtoMAnANAEagd2Dbt5yVbQP45vwmvZxWmPpQr8HpWIf+cV0Oy098gxd8//faIiGJD9S+0fMsa2zEAFgAKmVbGYcaHp36ACHIbLoVTmNmkLqfQhvwZL572Vp1mYgSmNDbbqERENmQV7nW2QwAsABQyf/ApTLdQj9cz+2V9nbYeeL2rp31MMPjkrMYkIrJFFb9dK9/2cts5WAAoVGZs+ol73qK1cxrXWzj915mJwTmNS0Rkg6P4pOodVufhsQBQqLQ8zaF4ceG2ze2mPm5bD+BMPdNfy7GYVEtENFNnmErwhzYDsABQqDTwp/ycZPPTnsuflgic3NTLwnJpYCJKHJW/Uf25taUuWQAoZMGUn5Fp3sHPiDPN0TJj5jc2EVH99Zpy5SpbG2cBICIisuc9On7r3M6NzhMLABERkT0txpH329gwVwKkcGiAYPQQtDb1uXg1PvxDu+a+Cb86zdg1BIf7JycLCnstESWI4B1avuN6yV/2eD03ywJA82ZGB1DZ9rNTLv+rlSIqj/44kgxaKaL86+9D8i3IrbsYbntvJNuh+FMNgGDquSixJAJxM7ZTPI0GPqDxmFsjjgc40Rd7NQFgrDx3MgHMRwG8rp4bZQGgedFaGeVHboPWyrajAJi8HLDyyK0onPtaSLbZdhyqI1Mrwh/eCxOT5+JsiePBa++D29RlNUdQHIZ/+ADUTH1Fjw1OrgWZzqWRFCVTK8Mf3gNTK4U+9iz8dnngy6/J9/zOd+q1QR4rpXnx922Nzc7/KPWrqO3j/QEaiWqA2qHdid35A5OnyGrDe2EqE9YymGoRteE9sdv5A4CpjKM2FMGKn6qoDe62vfOfjFIpfrqe22MBoHmx+WI1Ha1wYaBGopXxWO605iIoHba47RFr254JUy2GvuaHqRahwdTzi+rJVCZW+ENf+c16bY8FgOZlpjf1qTcn3247AtWR+unY+QOABvYWtZpuIa+4UBPyzydOxVEVfql+RwFYAGhevN7T6jI5Z1ZE4PVNf/MgIqI4CspjK/0DX31NPbbFSYA0a1oeRzC878ifvfFbhU8VxXu/Cbe9D27HYrgLlsEp8IgAESWAKvxg/HoAkU8GZAGgGTGlMfgHn0AwsAumGO/zhAAAExwrKdh5L5ymDrg9K+H1roZTsLb0NhHRKQXl8VW1wa+8PNP95lui3A4LAE1J/RqCwScnd/zD+wGo7UhzZoojMLsfQG33A3BaFsDrOw1e32qIl7MdjUIgXnpeysS1973EbS2CkxEn3Iw63T1GbJmcC3ADgPVRbiaG3znZZkqjqO15GH7/jnhNkAmJGT+E6vghVHfeB693NTLLzuQpgoSTXAvE8VJxJYBr8bnoFtoQjB+ytv1TcTJNEC/cAuBmm+C7GauTL0/GVMbWVQe/cn62+813RbUNFgA6xowfQm3vFvgHdwCa3Hf7M2YC+Aceg39gO9zORcgs3gC3e5ntVDQHIi4y3Svgj+yBqVVsx5kTcVx4bQvh5FqsZXCyzch0Lo31QkChE0Gme2UcFgJ6OlWYUvGfATwrqk2wABCCkf2o7voVzOiA7SiW6LH5Ak5bD7IrngO3c7HtUDRLTrYJ2d61kzuuuE1MPZUYLQXsNnXCbeqcfEcclzcCjgeJ8GojJ5NHtvf0+C0jLbJWx2/tk5aX9kcxPAtAAzPFEdR2PTCvG/SkjRkdQPmhW+B2LkZ21blwWuwuy0qzN7luvO0UyReXQlJPIi7gubZjHC9nIO8E8FdRDM5fkwak1QlUtt2J0n3f5s5/CsHwPpTu/w4q234Gjelqh0TUCPTPVH8YyY1NeASgkajCP7Ad1R33xG7CSyypwu9/Av7ALmRXPAeZpWcCIrZTEVFj6TIV93cB/FPYA/MIQIMwEyMo/fpmVLb/N3f+s2UCVHfei9L934GJ8QxpIkoplatUN4e+v2YBSDsNUN31K5Tu/68GnuQXDjM+hNIDN6O661eAxmiiEBGl3dqgcuGrwh6UBSDFtDKB0q9/gNqTDyZvVnRcGYPakw+idP/NMKVR22mIqEE46rwr9DHDHpDiITj0JEr3fZvv+iNixgdRvv878Ad22o5CRA1AoS/Ryh2hrgzIApA2alB9/JcoP3o71I/HPa7TSv0aKlt+gurjdwGGpwSIKFJiAvPHYQ7IApAi6ldQfvAW1PZtsR2lodT2bUXpwR9Aa2XbUYgozQS/H+YlgSwAKWFKYyjf/z0Ehw/YjtKQzOgASvd/F6Z02HYUIkqvdlPJvDWswVgAUsCMDqD8wPc4Kc0yLY+zhBFRtIy+M6yhuBBQwgWHdqO85SeAcpZ/HKhfRfnBHyG3/mJ4PStsx0mXoALxJzjfghrds3XwxjdJ9xVfne9ALAAJ5g/sRmUbd/6xowEqW38M6IXwelfbTpN8qpDSAKTGI1xEAKBe818CmHcB4CmAhPIPHdn58/r+eFJFZdvP4ffvsJ0k8aR0kDt/ouOIKW/Q0e8smO84LAAJ5A/sRGXLj7nzjztVVB77GfyDLAFzFpQhtTHbKYjixQQCM/638x2GBSBhguE9qGz9aXzu003TU0Vl288QDD5lO0kiSa1oOwJRLGmt+ub5jsECkCBmfBCVR3/MnX/SqKK85SdclXEu1LedgCiWJCh36Mg3XjyfMVgAEkLL4yg/fCs04AtiIhkf5Udu46Was8aySzQlU/7L+Xw5C0ACqF+Z3PlXS7aj0DxorYzKw7dC/YrtKESUBn7xAlWd836cBSDuVFHZ8jOY4ojtJBQCUxrlaRwiCocJPAx/dc73B2ABiLnaUw8hGN5jOwaFKBjZP3mLZiKi+VL/T+b6pVwIKMaCwwdQ3X2/7RgUgeqTD8Bp64Hbudh2lFTRWg2oTEBN8o6wSDYHyTfZjgEA0EoJWi3HZgqGuA4k3wy4Ee6y/Bq0XITG5fJqASRXgGTz0z5M/dKZql9sFnnbxGw3wQIQU1otobLlJzxUnFaqqGz9KQrP/S1ILh4v+klnRgdhDh1I9O+MNLfC7VsBiK0EiuDgXuhYDE85Og7c3mWQ5tbQh9axEQQD+2K5qqrT3g1nwaIpPy9qxIzk3gPgr2c99nyCUXQqj/2ck/5STmtlVB77OWLzNivB1K8lfucPADoxBjM6aG/746Px3PkDgDEIDu4Jfydtgtju/AHAHB6EFqdfDMsJqr83l7FZAGLI738cwdBe2zGoDoLhffAPPG47RvKVi4nf+R+lJXuLH2l51keR68sE0Gq4V9FouRTbnf9RWj7FcyIon6bD3+yY7bgsADGj1RKqT9xtOwbVUXXHPdBqzF94Yy42523DoPbudpiIn2PYO+uY7/wBAKea06JGjFavnu2wLAAxU3n8LqhftR2D6kj9KiqP/cJ2DCJKMMdUfmfWXxNFEJob/9AuBId2245BFgRDe+AP7LQdg4iSKqiu0MGb22bzJSwAcaEBajvvs52CLKo+cS9guNTznFibNR+FVH0z4UvHVI9ZmsE3rYHAm7hyNqOyAMREbe+jMCXe9rSRaXUCtb2P2o6RSOJlbUcIjWRz9radsbftmQr955OA7xnZmT2/1a+8ZTbDsgDEgNbKqD35kO0YFAO1Jx/i5Z9zIIVmSCEF6yk4DqSty97m2zoB17W2/VOR1o7QFwOSbC6StQVC42XgNM9wgr9fXq9644z/A7kQUAzUdj/AiX8EANCghuruB5Bb80LbURLHXbgSZnhg8lK2JF4SmM3B6eyBZCwezXA9uEtWQ4cHJlcCjAvHgTS1wmnvjmR4t28ZzPAhaGk8Ps8dASRbgNPZM+NSJho4GJG3AvjiTB7PAmCZViZQO/CY7RgUI/6Bx5BddjYk32I7SrI4DpzuPtspEk8yWUjvEtsx6kscOF29AHptJ5k/U/lfmGEB4CkAy2p7HgaScO0t1Y8qak89bDsFESWQ+rXnz/SxLAAWqV+Bf2C77RgUQ7X+7ZwLQESzJlrN6+GvnD+Tx7IAWFTb8wg04GVfdBImQG3vFtspiCiBTIAZ3SKYBcASDWrw9221HYNizN+/lZNDiWjWHFN78YweF3UQOrng4E6+uNO01K/CP7jDdgy7JL6XpBHFVlBZonrzKRc4YAGwhDP/aSYa/k6Bbt52AqLk0UAwNP67p3oYC4AFpjgCM3bIdgxKADN+CGZ8yHYMa9RrBpyM7RhEiaPiv/VUj2EBsIAz/2k2/P4Gfr6IwDQt5KkAolkSU3veqR7DAlBvGsDvf8J2CkoQv39HMu5ZHhU3B9OyDJptYxEgmim/0qYTX1803UO4EmCdBSP90FqMltik2FO/gmBkH9zOpbaj2ON40EIvtIAjS7U2cCEimiF18BwA+6f6PAtAnQWDT9mOQAkUDO5p7AJwPBEAPBJAdCqiuAjAzVN9nqcA6swfYgGg2fMHn0SD3gidiOZIoZdO93kWgDoy40PQ8rjtGJRAWik29NUARDR7AjlX9edT3uuYBaCOePif5sPn84eIZsfzK9UXTfVJFoA6CkamnItBdEpmZJ/tCESUMI6CBcA6YxBw8R+ah2D0UGNfDkhEsybQF071ORaAOjHFYcDwzn80D2pgxgZtpyCiBFHgPNUbT3rZDAtAnQSHD9qOQCkQjPJ5RESz0oZqz4aTfYIFoE4MX7gpBGaMzyMimp3AmJOeBmABqBMzMWw7AqWAGefziIhmkuUdoQAAIABJREFURwAWAKsc/qgpBMLnERHN2rkn+yCXAq4Tr3s5qlzIhebJXbDCdoT4UkUwMQRTLUITuGqi4+XgtnRDHLsvy2oCBOOHYPyK1RzHE3HgFlrh5Nsj20YwMQxTHYdqXJ47Aiebh9e84Mjy1/Nyhup3mkReUzz+gywAdZJZdhaC4f0IRvttR6GEctt7kV12lu0YsVUd2g1THrMdY84MgKA4jGzv6dZKgGqA6sHt0KBmZfvTCYrD8Fp74bX1hT52bfgpBMWR0MedL1MCTPEwsj2r51sCXJSazwbwy+M/yAJQL46H/LNfCf/gEwgO9wN+/H7BKKZcD25HH7ze08N4J5BKplpM9M7/KA1qCMYHI9nJzUQwPhTLnf9R/vgA3JYeSIinVE2tEsud/1GmVkJQPgy30DG/cRx9LlgALBKB13c6vL7TbSchSpU03WLb5qH32P8cVaFBBeIUwhsziPn3DEBrFWC+37LiOSd+iDOKiCj5YnPeNgQWv5dEzJ0I++eTgG85lBVABc898UMsAERERGmnOEv1jqcd9WcBICIiSr8cKrr6+A+wABBR8jkpmhxpcaKnJGGSaehrYTTO9xwYnHn8v1kAiCjxJNNkO0Jo3Ky978WJ+c9RHBeOlwt3zGyIEwoj4oT0nBBhASCilHEyeXgtPbZjzJuTbYLb3G1t+25zF5xss7XtT0sEXvvi0I+QiJuxdtnlTDiFdjj51rCGe1oB4GWARJQKXvtCOIVWmMoEYEKYNV1PInAyeTj5NrtrPYggu2AVTHkUplaOz9UVrgcn1wInk49keK+1F06+BaY8Hp/njgicbFOYO38AygJAROnkZJvj+w42KUQm33UWolt2N46cTFPsT4GEYK3qHZ7IZT7AUwBERESNIouKOXZDERYAIiKiBuFD1xz9O08BhM0E8If2QMtjyVhhipJNAMm3wOtaCli+ixwRxZ8DObYWPV8xQhQM7UVl28/iv542pU41k0du3UVwu5bYjkJEcWb+5wgATwGEJBjZj/Kjt3HnT1ZorYzyI7ciGN5nOwoRxZjI/xwBYAEIgwlQ2XZnfC4focakOnkEireaJqIpKMAjAGGq7X8MWhm3HYMIWi3BP/CY7RhEFF8rVDc7AAtAKPyDT9iOQHQMn49ENI0sii/uA1gA5i+owYwP2k5BdIwZH4b6VdsxiCiuxF8OsADMmymNx2e5TCIAgE5ehkpEdBIBlAUgDBpUbEcgegat8XlJRCcnRwoA1wGYJ+HiKxRHaX1eagAY33YKokRz4JwBsADMm+Tify9pajxOLmU3NQnKcEqHgIDrbBDNl3qFVwA8BTBvkm2GZFkCKD4kk4fk03NHPKlNwBnfy50/UViMaQVYAELhLlhuOwLRMZPPR4v3lA+TGkjpIHhjDaLwiJo8wAIQisyiDYCk5AWXkk1k8vmYElIbmzzvT0QhMhmABSAUTnMHMkvOsB2DCJlF6+G0dNqOEZ6A6xkQhU4D0dF/62YBCEl21bnwFqy0HYMamLdgBbKnPd92jHBxjQ2iaPiFDbwKICwiyJ1xCdz+5fD7t8MURwDDQ5cUMceFU2iHt/B0eH2rkZpz/0QULTFrWABCJfD6ToPXd5rtIERERFNzZAlPARARETWaQHtZAIiIiBqNY3p4CoCI0sGvIjh0AFqeAIKkzb8RSC4Pp6sX0tRqNYmWJ2AG+6GVMqDGapZjXA9OUyucBQsBxw1//MBHcGg/tDQen+eOOJBcAc6ChdGsOBsorwIgohRQRbBvF3RiND4v4LOi0EoJwYHd0ErJXopaBcG+3dByMT47fwAIfJixYQQHngp/bAWC/buh44fj9dxRAy1PINi3C/BrEYyvHSwARJR4WpqA1lKwZoACOjZsb/NjI/Ha8Z9AS+PQkHeGWi1ZLV2nZAKY8dEoRm5jASCixNMggndIltgsMmHvXCPhh/zz8RNwd8ko/l8kaGIBIKLk43pBNGcN+uRRybIAEBERNRo1LABERESNRtVkWACIKPEkikvDbHHtXZ0tTgKuDA/7/9pNwHPHiWBXrfBYAIgo8aTQFM2LpAWOxXUApKnF2rZnQjJZSCYf7pjZgtXSNRPSHP5zQkTddPzGEFFjcz24fcuiWSSmjpyOBZCWdmvbl6YWOF19gMTvplKSycLpWxb+/a4cB+7CZYCXCXngEIgDp2dxNAsBQZNwvIeI6NSkqRXeyvXQajl5d+IUgWTzsSgwTmcPnPauyZUA4zJD3vUm3/lH1Esk3wxv+VporRyfxYDEOfKciOp9ugoLABGlh0hE75YajONCCs22U9SXyOTpgEahEJ4CICIiajgCFgAiIqIGo2p4BICIiKjRiCBlRwDiN3GVqIFE8HLC32miaKimqwCoE8PLOIgaRRS/f/ydJopMqgoAMvYW0CBqdJoJfxGZyTF5GIAoCqkqAJptBdxwV4kiohlw89BsBAvYOBloriP8cYkaXuquAhCY5sWRvBMhopPTTAtM8+LI3qhrvhua747l6nREiSWK9C0EJA60aSHU1CB+CdCYrOpElDbiQr1CXc7Ta64Tmm078jvtAxqTFeqIkquUvgJwlJOBZjmBiCg1xOXRPaLwjKfsFAARERGdmvosAERERA3HYQEgIiJqPFplASAiImo0yjkAREREDUeFBYCIiKjhOFAWACIioobDIwBERESNR9VhASAiImo4aiZYAIiIiBqNwyMAREREjUfNYRYAIiKiRiPOIRYAIiKiBqMGh9J7N0AA6lehqbodsEDcDMRx67dJVRi/CsDUb5uRc+B42breX15NAA1qANJzG1sRF+Jl7Ww8AOALoPX7PyRKE9egmMoCEEwMwR87eOQFN2VE4OTakOlYCHEjfPFVhT96AEFxCGrStPOfJI4Lp6kTmdY+wInuQJgGNdRG9sNURlN5D3txM/Bae+A2d9dngyUH6M8AxTqWYKI06q42pa4A1A7vQzA+aDtGdFRhyodRPTiBbM9pEC8XwTYMqod2wlSL4Y8dE2oCBOOHoJUisj2nRXI0QP0KqgM7oMYPfey4mCw4+2D8CjLti6Pd2LgDPJVP00EUInt881iq5gCY8li6d/7HUeOjNrwnkrH9sYOp3vkfz9SK8Ef7Ixm7Nrw31Tv/4wXjgzDlsQg3AGAvd/5EoRAAq5duT1UB8CeGbEeoK1MtwtRKoY8bTAyHPmacBRNDoR+eN7UyTHUi1DHjzp+IsHyPeZMlgIjmz4MRWVNJVQFQv2w7Qt1pLdzvWQO/Yd61HqUaQIOQv2c+F8NViWCyn1Gg5j/9TwrnaRCdSB1TBYB0zQEwDfjLG/YEPU3fhL+ZUA0gyIQ3XgonTp5SlN9zmLP9KxXgsUeB4cFn7vAdB+hdCJy+HnA50ZDSyXF1DEhbASAiOpUtDwGHpzjNZQxwYN9kEVizob65psoTRFwmXSfSK2EoftTRIYAFgIgaSaUy9c7/eAf77RaAUgnYvmUya9RHk0SAjs7J77fQFO22KBbUkX4AYO0josZRq8zscX7N3ilFY4BHHpg8RVGPU0mqwPAQ8ND99dkeWSeueQpgASAiipeJMWBivP7bLRWBscP13y7VnYG7E2ABICKKl8oMj1KkbdtUN56rDwEsAERERI1Fg3sAFgAiIqLG4arKykt4CoCIiKiRqIdj67yzABARxUnG0i2WbW+b6kI8c+jo37kOABGlQ60G7HwcGB2ZevEcncUNBe69c+oVCD0X6F4ALD8t/EV0WtuAXB6o1Hk56VwOaGuv7zap7tTDk0f/zgJARMlnDPDgfcB4iHckLJ3iRlvjY0CxCJzxrPC2CUwWirOeDWx5GCjW6YZShSZgw9lc/rgROLr16F9ZAIgo+Q4Ph7vzn6mB/slL53K5cMdtaQOe/6LJowDVarhjnyiTBfL5aLdBseF6ev/Rv7MAEFHynerdepTKpfALwFG5/OQforBI9c6jf+UkQCJKAYt3AuUthCkpXCiWvuSho/9kASAiImoEGTMuIscaKwsAERFRAxAPe4//NwsAESWfa3E6k8epVJQQnj76tH/aykFEFJr2jsnL5+p9O9tsDmhqjmbsA3uBkRHAzGLtAkoPEaClBViyHHDCuTxTM3rn8f9mASCi5MsXgNPXA49vrV8JyGSBDWeFvxAQAGx7dLIAUGM7COBgP/CcF4TyPHOM9/3j/52uAjDFol2pJiF/02GPlxDCn+P82f6eFy2ZXJ1vbGzqd83lErBj+8zG23D21N+T5wGt7dEc/i+VuPOn/zE+BhzqB3oXzW+cjBpZ+aItx38oVQVAvCw0qNmOUV9euNcfi+MB4gBa50OpNolA3Ey4Q4b8/5IE4sVgHflsDuie5mc/PjrzsRb0AY6FUlMcr/82Kd4mQnhOZMzIiR9K1SRAt9BhO0JdiZuBm20KeVCBW2gLd8yYc/Jtk6UnzDEzBYgbgx1iHTXa719kuK4AnSiEp4R6+viJH0tXAWjqhJONaEJODGU6lkRy2NVrWzh5JKABiOMh0z7PQ2snHViQ6Vgc/rgx5WSb4DZ32Y5BRFNxcM8zP5QmIsh0r0j9OxFxM8h2r4STb41u/J7VcDIhH12IGSfThEzPaaEf/j82fr4V2e6VkY0fF06hHZnuVfbnABDRlFxXv3/ix1L3Nk8cF5muZfD8PphqEWrSMydAIBAvByfXEvmLrXhZZHtXw9SK0GoZOpvbqMaciAvJ5OGEffrkJJx8K3J962AqE1C/DLW5ZG3IxPHgZJvjce4/TaK4qoCSbb6nKF0oDm255cQPp64AHCVeFi5fmObNyTQBKT8SEDkROPkWAC22k1AStLROFnzOBaCj2trn9/UZMyLnvOMZ74ZZNYmocczmnZStMxrZHLBqDU+p0KSevsnLW+dBs7r1ZB9P7REAIqJnKDQBrgsEpzil1dpmdwe8bAXQ0QkMDwGNdmkzTXLcyedh1/x2/gAgnv70ZB9nASCixuE4kysGbntk6se4LrB6Xf0yTaW1bfIP0Tw52fJXT/ZxFgAiaiwLF0+eZx88BBj/6Z/LZCYXAMoX7GQjCltGfVnysvtP9ikWACJqPC2tk3+IUk6yZs9Un+MkQCIiopRST++e6nMsAERERCnluPjWlJ+rZxAiIiKqEwcK+N+c+tNERESUOpIPDsmqy8pTfZ6TAImo8RgzeWvgSuXpHy8UgBZeekfpYLJ673SfZwEgosYyNgo88mugMsUbo5ZW4KxzgFy+vrmIQuZ6+uXpPs8CQESNZcuDU+/8AWB8DHh8K3DmOfXLdDLGABPjgO+f+rHz4XlAcwtvQpQ2riqWN510AaCjWACIqHGUSpN/TmVoaPJmPLaWAx4ZAh59CKhV67O9TAbYcDbQ2V2f7VHkJK97Rc6ddh3pVBcA9aupuo0tIBA3A3Hc+m1SFcavACm6jS0gcLxcXV/c1QTQoIY0/RxF3OTdCnim6+qbYPK/ysb+PwiARx8EanW8B0CtNlk4zrtw8ogAJZ5m9Senekwq/6eDiUH4YwNHXnDTxym0IdO2KNoXX2NQG+1HUBqaPBSZNo4Dt6kLmda+SA99ql9D7fA+mMpYKm/vKk4GXmsP3Ba+cwyLjo9C6rnzP8qvAWOHeRQgJRwn+P9P9ZjUFYDa4X0Ixgdtx4iUKY2iWplApmf15DvZsKmiOrgTploMf+y4MAbB+CFopYjsglWRlAD1K6gO7ICeuN58iqg5UnD8MjIdS2zHSQUrO/+jbG6bwuOpLysvuf1UD0vVrA9THkv9zv8oNQH84SmXeJ4Xf7Q/3Tv/45haEf5YfyRj14b3pHrnf7xgYgimNGo7BhEBkJw+MZPHpaoA+BNDtiPUlakWYWrTzGaeo6A4HPqYcRZMDId+eN7Uyg1Too7yG+x5QxRXQcafcvnf46WqAKgf/s4w7jTkAqBBrWHetR6lGkCDcL/nxnwuzmB2PZ2arSsPKB0E8Fy5fiYPTdccAJO+SVanZEK+yiGFE9VmQjWAIBPegGmcOHkqcfmeTQAEUzyP/Vn8vvhVQKa44sZ1ops8motgXs9M5Qv2tk2hkEIwICsv3j+Tx6arABBR4xobBR7bMrnEbxh+8dOpPycCdHQB684If8XAljagtX1yRn49tbQBrVwGOelM1tw208eyABBR8tV84OEHgGrl1I8NgyowPDi5pPBzzwt//LPOAXZsB0YGwz/KdyLHBdo7gdVrefohBdxmZ0aH/wEWACJKg8ND9dv5H29sFChOAE3N4Y6bzQLrzwx3TEq/nBZl4YV3zfThqZoESEQNysbO/9i267RcL9EpSM5Me/e/E7EAEBERpYB45h9n83gWACIioqTz1MfKi6a9+9+JWACIiIgSTvPmARGZ1XXcLABElHwZi3clzCbsjoiUSm5eb5jt1/AqACJKvs6uyRJQq/OEvJZWoNAU/ri+D+x8fPJSQ5+TDMPnAK2twMrT07H2QRY1LL/wP2b7ZSwARJR8XgY469nA1keAUp3uwdDeDqw7K/xr51WBh+8HDo+EOy493dAgMDICnHt+NCWujjQf3Csis16KkwWAiNKhrQN4wQWTlwROtXjOxMTkgkEz8fwXAc4UO3cvM/knChPj3PnXiwmAA3uBVWtsJ5kXNxfMePGf47EAEFG6ZKdZS9+fxU2f8k1TF4AoVRrvRlJWlRP+886ZCpZdfONcvpSTAImI4qRBb8hFc6MF/elsZ/8fxQJARESUUG4m+Lu5fi0LABERUQJp3ozK8kumuW3l9FgAiIjixOPUrLpyE/zzzprvzufLWQCIiOKkpS26KwzomTq7bCeYG1G4nv+++QzBAkBEjWOm7/YcB7BwAQCAySMAG84CMgl+Z5oUS5YDPX22U8yJNOkuWXXZrvmMwWcYETWOfAHI5U99qV1HZ/gL/MxG1wLgvIuA0VHAr9nLkVYikysA5vK2k8yZNuHT8x0jXQXA4u+rNWG/SNl80bNI+HOcvyi/57CGFgE2nA08+mugOsUSu03NwJr1IW1wHlwvuYenKVpZrTnL9s5p8Z/jpaoAiJeFBo3VlsWbZtGTuYzneJMvko10LbIIxA33nKt4jXeDmEi/Z2/Wq5xOrf3IioGjh5+5MFAmO7mioI0FgIhmSAvBrSJXTLHc5cylqgC4hQ6YyoTtGHUjbgZONuQ1rEXgFtoRFBtnKVIn3wZIuNNhnGzzZCFtoBu5uE0d0Q3eHgADAMLqAa4HdHaHNBhRHYnCzZlNYQyVqkmAblMnnFyz7Rh1k+lYGslhV69t4eSRgAYgjodM+6JIxs50LGmYUwFOthluU4SHqz0Fehrr6B7RyUiT7pFllzwUxlipKgAQQbZrJdymTttJIiVuBtnulXDyLdGN33Na+EcXYsbJNiHbc1roh/+PjZ9rQbZrRWTjx4Vb6ECme0X0Zae7BiysAm4DnZ4iOkGQ8/8hrLHS9zbPcZDpXAqvrRemUoSa9LxrEDiQTA5OtjnyF1vxcsj2rIaplaDVElTnfbopNkRcSDYPJxN9wXHyrcj1rYOpTkBrFWhox7DtEydz5FRHHQtOlw+0+0DRBarpev9CdEqKQ97Siz8a1nDpKwBHiJuF29R4E7HC5mQKQKZgO0ayicDJtQC5aI7YNBwXQGsAID2llGhGFB8UkdCe+KzQRERE8TfmFMwXwhyQBYCIiCjuVL8g8rLDYQ7JAkBERBRv6jjOZ8MelAWAiIgoxkTxXcm/eFvY47IAEBERxVggMu9lf0+GBYCIiCi+Hvbyl90excAsAERERDGlwHUiEsnqV6ldB4CIiCjZ5Ck33/aVqEa3dgTAaGOskU5ERDQnoteJnBvZcrbWCsBwket5ExERTWHQyfmhLvxzImsFoH/c1paJiIhi75Mir4j0/vbWCsCuIWBwgnMQiYiITjDmVLKhL/xzImt7YFXgnp2urc0TERHFk+Cz0nHRcNSbsfoW/Nu/zqLiczIgERHREeNOLfPxemzIagEYLjr45v28ZS8REdEkuUFaLx6ox5asn4T/9gNZ3LWDyxEQEVHDG3Wq1bq8+wdiUAAUwKfvKOAHD2dsRyEiIrJIPiXtrxyq19asFwAACAzwr7/I42O3FLB3JBaRiIiI6kYNRp2yfLKe24zVsfd7d3v41ZMezlgc4NzlNSzvMmgvKDxeLEBERCk2UnS+fMaqS0bquc1YFQAAMAo8vNfFw3u51yciooZwsFKqbqz3Rnm8nYiIyCIB3v9fmy4cq/d2WQCIiIjs2XpwaCLSNf+nwgJARERkjb7nx5sv821smQWAiIjIjp/cdOV537O1cRYAIiKi+lMj+h6bAVgAiIiI6kyAL3/9z8+712YGFgAiIqL6KjtB8H7bIVgAiIiI6kgVH/3Ku1+4y3YOFgAiIqL6eapQzX3EdgiABYCIiKh+VN/1paufPWE7BsACQEREVB+KH930rvO+aTvGUSwARERE0atC5c9thzgeCwAREVHERPDxm/7i+dts5zgeCwAREVG09qjT/Pe2Q5zIEUsbVkvbJSIiqi95901/eua47RQncjzHsbIv9o2xsVkiIqI6km/ddOXzv2Y7xck4eVfKNjZc9FkAiIgo1Q7Dr/2Z7RBTcQqet9/Ghou+D195IoCIiNJJVd9z01Uv2ms7x1ScQsb5sY0NGwUGSzUbmyYiIora7V+78gWftx1iOk4+kL+3NRNwX9HK2QciIqIoFR04fwSRWB/mdh7+u5c8sSCf225j43snKqgEnAtAREQpovqBr1557hO2Y5yKAwBdrvcWV+p/GMA3BttGYrEkMhERURjuxqLd19sOMRMOADz0ty++r6+QvctGgF1jRYzXfBubJiIiClMJMG+/6YorAttBZuLYSoALMl0v6chmR+odwCjwy/7DqJlYnyohIiKalqpuuunK8x+1nWOmjhWA+zafW1yQkRcUPLfuU/PHaj7uGxiFcn1AIiJKIsWPvnblCz5jO8ZsPO1eAFv+7uXbV+TzL2vJeHWfnn+gWMa9B0cR8EgAERElicgwAv/tcZ/1f6KTzvzb8MEfLBoal/uHytW+egfqyHo4v68TeY/3KSIiovgTxZtufNcLbrSdY7amnfq/bvPtGw8WK389XvPz9QoEAJ4ITmsrYE1HCzLWbldEREQ0veYO77//9W3PvcB2jrk45d71eZvvbTocjFx/uFZ7w+GK31nP4xt518HKtgKWNRfQnHHruGUiIqLpZQtSa+3OLv3c65990HaWuZjV2+sNH/zBIr+WeatvzLkmQC+ghaiCnSifcUe7stn+9pw3Usg4ZRfOrFYQcjLI9qzM/r7joTOqjFQ/h0cq+PUD/bZjEM3KypUdWL6yzXYMCoEqFHDe+ZmXn/0521nmqqGOr39oYMvzHOP8N4Cs7Sw0Pzt3jODz//SA7RhEs/KSl6/CZS9ZYTsGhUBUPrBx4dq/s51jPhpqpt21PRvuU+gHbOcgIqIEE9yxsm/Nh2zHmK+GKgAAsKl33Ueh+J7tHERElEj9vgRvvUIkEav9TafhCoCIqAP3DwAcsJ2FiIgSxTiQ331fzxn7bQcJQ8MVAAC4euHpBx3I7wFIfIMjIqJ60c1X96291XaKsDRkAQCAq/vW3qqQa2znICKiRPh+qXfdB22HCFPDFgAAuKZv7ccA/JvtHEREFGu7gpr5vc0is7r8PO4augAAQKba9CcCuc92DiIiiqWSEef17126YdB2kLA1fAG4atmykhP4bwAwYDsLERHFiyjefm3vmvtt54hCwxcAAHjP4jN2G9U3A/BtZ6GZaagVrCg9knWzuIYn0I9tXLjuq7ZzRIUF4IhrF66/XYFNtnPQzBSaM7YjEM1acxOftwlyW7F3/7W2Q0SJBeA41/St+wRUv2A7B51aa1vOdgSiWWtrq+uNVWnudrgB3rxZLkv1UWEWgBOUSrl3QnGv7Rw0vaaCh96+ZtsxiGbMcQTLeCOgBJBhOPqq9yxed8h2kqixAJxg86pVZdcEbwTAW83F3JlnLbAdgWjGVq5q5ymA+KsZNW/c1LN+m+0g9cACcBLvWXzGbuOYVwMYt52Fpnb+hUuRz3u2YxDNyMUv5l0A40+vvHbh+tttp6gXFoApXNuz4T4VXAFeGRBbzU0ZXMpbq1ICnHHWApx+eqftGDS9j2/qW/852yHqiQVgGtf0rvu+KP7Edg6a2gUXLcOzzumzHYNoSgt6m/D6y9fbjkHTEODbq3rXNtxVYCwAp7Bx4bp/UeBvbOegkxMB3vim9TjvRUtsRyF6huUr2vGHf3QOT1XF292i5VTc3ne2uJ7KDKiqXNe/7fMQebvtLDS1Bx/oxy3f34GRkYrtKNTgcjkXF16yHBddugyey/dZMfZ4YJwXvXfRmoZcCZYFYIb+Se/NjBxs+w6gr7CdhabmBwbbHh3Eo48MYP++CYyNVVAqchoHRSuTcdHWkcWCBU1Yv6EbZ5zdwxn/8bffGPOiaxdt2GU7iC0sALPwkYGtrTDyEwDPsZ2F7PnOLQfxy1+N2I5Bc9S3IIs//18rbccgu8aMOJekdY3/meKxqVnY1LN+zHeCVwPYbTsLERHNSdWBvL7Rd/4AC8Csva/njP0I5DfAuwcSESWNL5Dfubpv7a22g8QBC8AcbFq8dosDfSmA1N0fmogopRSqf7yxb+3XbQeJCxaAObq6b/2DIvJSQIZtZyEioumJ4v9sWrj+87ZzxAkLwDxs7F37AFReBWDMdhYiIjo5FVy7ceG6T9rOETcsAPO0aeGauwT6G+B9A4iI4kf0g9f0rvuw7RhxxAIQgo196+90IK8DULadhYiIjvnEpt7177cdIq5YAEJydd/aWwXOawFwGToiIvs+salv3f+xHSLOWABCtLFvzS0A3gygZjsLEVED485/BlgAQrapb923VPR3ATTcjSWIiGwT6Me4858ZFoAIXNO7/kaovh6cE0BEVE+f2Ni3/mrbIZKCBSAimxau/68jcwImbGchIko90Q/ynf/ssABEaGPfmluMwWXgioFERFFRhW7ibP8595zZAAAObUlEQVTZYwGI2LWL1t2jxrkEwD7bWYiIUkYh8hfX9K2/znaQJGIBqINrFq15xEAuArDDdhYiopQIIHj7pt61N9gOklQsAHVybd/aHRp4lwHYZjsLEVHCVQC5YlPvun+zHSTJWADq6JrFq5901L0YwAO2sxARJdSIMeaVm/rWfsN2kKRjAaizqxeefjCbzV4G4E7bWYiIEma/iFx27aINP7YdJA1YACx4d+eqkVLQ+nIAbLBERDPziOe7523sXcsjqCHxbAdoVJsXLy6q6huvO/jYXwH4K9t5qPEIBAXPQWvWRbPnwXMEnuPAE8BXIDAGgQITNR/jNR8TNQMDtR2bGpL+IqjpazYtXcdLqkPEAmCRiCiAzdcd2LZHBZ8FkLGdidKtI+uht5DFgkIOXfkMPJEZf60CGKnUMFCu4lCpioFSlXWA6kBuKhWzb9u8ahVXVg0ZC0AMbFy47l8+cmDbTgi+BqDDdh5Kl7zrYEVrActa8mjJzP1XXgB05jLozGWwtr0Z5cBg70QZT46VcLjqhxeY6CjVG0p9a9+9WcTYjpJGLAAxsWnhutuuO/joC1Td7wJYazsPJV+T52J1exNWtjbBnfkb/RnLuw5WtzVhdVsTBstVbD9cxIEi74ZNoaiIyB9v7Fv3r7aDpBknAcbIxt4ztgc18yIAP7WdhZIr4zh4dncrXrZ0AVa3RbPzP1F3Povz+zrwwr5ONGfc6DdIaTYojvOKjb1r/9V2kLRjAYiZ9y7dMFgYdV4uwL/bzkLJs7Qlj5cs7caqtibM4vR+aPqasnjJkm6s72yGY2H7lHTysKP6/I09a35iO0kjYAGIoSvXrKlc3bv2bQr8DcB5VnRqrgjO7m7FuT3tyLt2f60dEazvaMFFi7rQ5PFoAM2Q4LsFTy64euH6nbajNAoWgJgSEb2mb91ficpvATJsOw/FV5Pn4tIlXVjd1mQ7ytN05jK4dEk3evJZ21Eo3hSQj5R61r72yu41o7bDNBIWgJjbuHDtd404LwDwoO0sFD+tWQ8XL+pC6zxm90cp6wheuKgDS5rztqNQDCkw6gBv2NS39hrO9K8/FoAEuLb39MdLxex5EPyL7SwUH525DC5e1Im8F+9fYweCc3vbsKK1YDsKxYgotkog51/dt+6btrM0qni/ctAxm1etKm/qXfe/Ffj/AJRs5yG7mjMezuvrQMZJxq+wQHBOdxsW80gAARDg2/mMc96mxWu32M7SyJLx6kHHXNO37otw9GIAu21nITvyroMLF3ZYn+w3WyLA83ra0c05AY2sCpF3/b/27jU4yuqMA/j/OXvJ5kYCYXcTxAuXvUAQvMCoWCoqVarI1Ha0+EHG0c6kV0ut2U2knUZnWkTbzkg/dEw7OhV1rNDqTEBLRRlExFZp1TYVRbloiwSQSwLJJtn3ffrBFS8IBnI52X3/v5l8y4f/fjj7Pnve5zynPhK/lu/77cuvbxACAKTDyVecXvd8AH+xnYWGlkBwXrgCxXnaXe8TYEa4AkV5snNBA2on1FySjsSX5cagk2VchXnqjrGTPkhF4ldBtAEAm2c8Il5Zgkhxfv+CDvkNzguP+HC2MHmCAk+4Rd3npqtjL9nOQh8bnq3D1Ce5Knrpkt1bXjYifwAw1nYmGjzlQT8SlWW2YwyIaEkRziwrxs4OtrMUuIxCb2uIJn9rOwgdizsABaCxOvmcW9Q9FYLHbGehQSLAtFHlBTVdr3ZkGV8FFDLBGyJyER/+wxdXX4ForJx6IB1J3CCi1wPYbzsPDayxpSGMzvOt/88K+gwSI0ttx6CBpwCajZuZkYrEX7Udho6PBUCBSUWSK9TxnwvBOttZaGAIBImKwnxQnlVenHenGeiE9ojK/HQ0UVdfPe2I7TB0Ylx5BahhzIR3U+H45aK6CADvZ81zNaVFKA8WZruOEcHEysIsbrxGgSd8DmpT1fFVtrNQ3xTmtwp91CB43z173lqvqg8DqLWdiU7NhIrCnqB3VlkIW/YfRlZ5MiwfKdBuRH+UjiQfsJ2FTg53AApcKhJ/taszOF1F7gNvFsw7JX4fqoKF9e7/s/zGoKa0yHYMOhWKpwJZ35QUH/55iQWABzSNG5dpiMQXCXQWgFbbeajvzigLeeK8/OllHBGcZw4KpC5dnbj6x6dNfM92GDo1LAA8JBVNbqyMdJybGx6UsZ2HvliNR2bnh4uLECikM46FTLE64MOUVDTebDsK9Q8LAI+pk+m96UhyKYyeA9X1tvPQ8QWNYEQwP0f+niwBUBUK2I5BJ9amihvS1Yl5t41O/M92GOo/FgAelQ4n30xFE5fmbhfcZzsPHauqOAjxwv5/zuhi9gEMUwpgudPr1jZUJzhsrIDwFICH5U4KPPTztm1r/Oi9F8CNtjPRxyqLvPWLuDLAr6Nh6HUD8+36aGyT7SA08LgDQFgcHd+WjiYWquAqADts56EPlefpjX+nqqxAZx3kJ+0EcGfXvuwMPvwLFwsAOqohknjaaGYKFEvAJkHryjz2izjkM2wEHBZkpT/rT6ajiaam2toe22lo8LAAoE+pr552JF2duAN+EwOwHJwdYE2RB0fkBj34mYcNwRsKd246Gr+OR/u8gauNPle6KvbfdDSx0HVxAYCNtvN4kd+Dv4YDvB3Qhv2iumhcOH52Q3TSGtthaOhwtdEJNdYkXk5F4rNytwzusJ3HK0QAn3ivAPB78DNblAXQ7HOQSFUn77texLEdiIaWt14y0inJnRZY0bRr1+oSX8ftCqQA8AaXQWQ8+iD0efNjDzVV6J/FYHE6nHzTdhiyhwUA9VnTmDGdAO5aunfL7+HKzwDcAsBbrepE+e0lEaTSkeQG20HIPr4CoJOWDid3paOJOlfMDBFtARsFiYa7VlUzPx1NXJSKJPjwJwAsAKgfGiOxf6YiyfmuiwugeMp2HiI6xg6I3DwuEp/WUB1rsR2GhhcWANRvjTWJl9PViasVOAeQFbbzEJG+K6qLittNMh2JP8gGP/o87AGgAdMQTbwG4Pqlu7deCOMuhmKe7UxE3qLviuLXnV1F9zeNG8dhXnRCLABowKWrYy8BuObuPW9+ySjuVOAy25mICtxOhSzJ7Ms+yOl91FcsAGjQNEQSLwC4/J69Wy9xXfcnAsyxnYmosMi/Ab2nMtLxWJ1M77WdhvILCwAadKlwbD2A9fe2bZnqQr4HYCGAkOVYRHlLIJsh7tL6cHxlbk4H0UljEyANmfpo8vV0NFGXNc54FfwCwAe2MxHlEYVglQpmpaLx6alIcgUf/tQf3AGgIbc4PPl9AIuXbd16V+cI95siaIBiku1cRMPUYQCPqmuWNdTEWm2HocLBAoCsuTUW6wbwUJPqw6V7tl7miv6QJweIjtoG0eZAt/O7206v3W87DBUeFgBkXZOIC2AtgLVL9r5xvnHNDwC9DpAS29mIhpgCWKtqfpOJTlydWxtEg4IFAA0rjeFJmwHctOyDrbdmsrpAoQsBXGw7F9Ega4PqH1V9zdzmp6HCAoCGpVurYu0AmgE0//L9rZMdowsBvQXAaMvRiAaKq8BzRrS5Inz4SR7jo6HGAoCGvdtrYv8B0NC0fXtTcUn3NyByCxSzAfDyWMpHO1V0uc/FA/XVye22w5B3sQCgvJEbbfoIgEfuads6wRX3ZlHcBGCM3WREX+ggBCsVsjwdjm3g8T0aDlgAUF5KRWPvAFjcpPrT0N63Zoqr10FkAYCI7WxEOY4C6wAszzjlK5vGjOkEgAbLoYg+wgKA8lquS/oFAC80tbbWh6qCVxpxFihkPoAyy/HIe3oAPCuiK/3dzpM8vkfDGQsAKhi5S1BaALQ0bd8eChVnvyLizgPwNXBngAZPtwIbjOqqrPoevaMmttd2IKK+YAFABSnXL9ACoOV+feX7B/eMmA24XwdkHoCxdtNRATgIwRqotmggsKph1IRDtgMRnSwWAFTwcsernsn9fWdJ21vjfcAcFb0GijngxUTUN9ugusqIaTmyr/d5XrtL+Y4FAHlOYzS+DbkZA/fufq3U8RXPFkfnQuRKQGO289GwcRiK9QJ9xjH+1Y2RiW/bDkQ0kFgAkKfVV087AmB17g9HdweAOYBeAaDCakAaSo5AXlVgrQHWFrXLhtx9FUQFiQUA0Sd8cnegqbU1GBptpkPMl8XFLAguBguCQtINYDOgG0XN8+pz16fCiQ7boYiGCgsAouPIveN9Mfd39+Oqvnf2vj21rNRXN/6Mkrn7DvSc1t6R5RrKE6UlPnf0qODecFVwkwp+lTkSfCXXLErkSRylStQPlz/+/ORMNxZ0djmzDx7KTt63r2dUpsft97ryGcE1Z3rv5OKm3QfQ1tX/3rpAwOjokcH2igr/2+WlgRfLyuXJNdfOXMcJfEQfYwFANMDm/mnjjO4endvV7VzU3uHU7j/QW7P/YG9Ate/PHhYAfRcqMm7liEB7xQj/tpJS/9+LQljV2V7y1811vFyH6ERYABANgdmPr6vOdvu/mnV0ZleXM+VIl3NW+2Gnqr29J+A4x/4/C4BPEwHKywPZynL/odJi33uhkK/V78ff1Pif3nTjTHbnE50CFgBEFl3x0GulPaH2WT1d7oU9Wa3t6dYJnRm3JtPpVF5QXhEy4p0l6kLRevhwtjeoB0uKfbuDAewIFJlWv+hmpyf47KZvzeRYXaIB5J1vF6I8NOfBF8/2q1yqrjsdDsapY05DViuMq6UC8Rs1JiCQgDG2ox6Xo4oeQB3XVRVk1WjG9eGAMboHfrPN8eFfAbibnr754udsZyXyEhYARAXgu+tay957/8A52u2b1KtmAhzndDgYBchIV7VcFEF1USKqRarwGzUBVf1w/YsaUTluBaECB4qjDQxipFehWTXIwGgGKt3iQzvE7fCJ75D63F3GL++IX1qzXfqPNfzlTkRERERERERERERERERERERERERENHD+D8ma6aCoLQqmAAAAAElFTkSuQmCC", rn = (e, t) => {
  const n = e.__vccOpts || e;
  for (const [a, r] of t)
    n[a] = r;
  return n;
}, JK = {
  name: "NavbarAppBar",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n,
      posLogo: GO
    };
  },
  props: {
    posProfile: {
      type: Object,
      default: () => ({})
    },
    pendingInvoices: {
      type: Number,
      deflt: 0
    },
    isDark: Boolean,
    loadingProgress: {
      type: Number,
      default: 0
    },
    loadingActive: {
      type: Boolean,
      default: !1
    },
    loadingMessage: {
      type: String,
      default: "Loading app data..."
    }
  },
  computed: {
    appBarColor() {
      return this.isDark ? this.$vuetify.theme.themes.dark.colors.surface : "white";
    },
    displayName() {
      return this.posProfile && this.posProfile.name ? this.posProfile.name : frappe.session && frappe.session.user_fullname ? frappe.session.user_fullname : frappe.session && frappe.session.user ? frappe.session.user : "User";
    }
  },
  emits: ["nav-click", "go-desk", "show-offline-invoices"]
}, XK = { class: "font-weight-light navbar-title-light" }, ZK = { class: "navbar-title-bold" }, eG = {
  key: 0,
  class: "loading-container"
}, tG = { class: "glass-card" }, nG = { class: "loading-message" }, aG = { class: "progress-badge" };
function rG(e, t, n, a, r, i) {
  const o = J("v-app-bar-nav-icon"), l = J("v-img"), s = J("v-toolbar-title"), d = J("v-spacer"), u = J("v-icon"), f = J("v-chip"), _ = J("v-badge"), g = J("v-tooltip"), v = J("v-btn"), w = J("v-progress-linear"), b = J("v-app-bar");
  return ne(), Fe(b, {
    app: "",
    flat: "",
    height: "56",
    color: i.appBarColor,
    theme: n.isDark ? "dark" : "light",
    class: Ee(["navbar-enhanced elevation-2 px-2 pb-1", a.rtlClasses, a.isRtl ? "rtl-app-bar" : "ltr-app-bar"]),
    style: Xe([a.rtlStyles, { flexDirection: a.isRtl ? "row-reverse" : "row" }])
  }, {
    default: x(() => [
      A("div", {
        class: Ee(["navbar-brand-section", a.isRtl ? "rtl-brand-section" : "ltr-brand-section"])
      }, [
        h(o, {
          ref: "navIcon",
          onClick: t[0] || (t[0] = (p) => e.$emit("nav-click")),
          class: Ee(["text-secondary nav-icon", a.isRtl ? "rtl-nav-icon" : "ltr-nav-icon"])
        }, null, 8, ["class"]),
        h(l, {
          src: a.posLogo,
          alt: "POS Awesome",
          "max-width": "32",
          class: Ee(["navbar-logo", a.isRtl ? "rtl-logo" : "ltr-logo"])
        }, null, 8, ["src", "class"]),
        h(s, {
          onClick: t[1] || (t[1] = (p) => e.$emit("go-desk")),
          class: Ee(["text-h6 font-weight-bold text-primary navbar-title", a.isRtl ? "rtl-title" : "ltr-title"]),
          style: { cursor: "pointer", "text-decoration": "none" }
        }, {
          default: x(() => [
            A("span", XK, W(e.__("POS")), 1),
            A("span", ZK, W(e.__("Awesome")), 1)
          ]),
          _: 1
        }, 8, ["class"])
      ], 2),
      h(d),
      A("div", {
        class: Ee(["navbar-actions-section", a.isRtl ? "rtl-actions-section" : "ltr-actions-section"])
      }, [
        bt(e.$slots, "status-indicator", {}, void 0, !0),
        bt(e.$slots, "cache-usage-meter", {}, void 0, !0),
        bt(e.$slots, "db-usage-gadget", {}, void 0, !0),
        bt(e.$slots, "cpu-gadget", {}, void 0, !0),
        A("div", {
          class: Ee(["profile-section", a.isRtl ? "rtl-profile-section" : "ltr-profile-section"])
        }, [
          h(f, {
            color: "primary",
            variant: "outlined",
            class: Ee(["profile-chip", a.isRtl ? "rtl-profile-chip" : "ltr-profile-chip"])
          }, {
            default: x(() => [
              h(u, {
                start: !a.isRtl,
                end: a.isRtl,
                class: Ee(a.isRtl ? "rtl-profile-icon" : "ltr-profile-icon")
              }, {
                default: x(() => t[3] || (t[3] = [
                  ae(" mdi-account-circle ")
                ])),
                _: 1,
                __: [3]
              }, 8, ["start", "end", "class"]),
              A("span", {
                class: Ee(a.isRtl ? "rtl-profile-text" : "ltr-profile-text")
              }, W(i.displayName), 3)
            ]),
            _: 1
          }, 8, ["class"])
        ], 2),
        h(v, {
          icon: "",
          color: "primary",
          class: Ee(["offline-invoices-btn", a.isRtl ? "rtl-offline-btn" : "ltr-offline-btn", { "has-pending": n.pendingInvoices > 0 }]),
          onClick: t[2] || (t[2] = (p) => e.$emit("show-offline-invoices"))
        }, {
          default: x(() => [
            n.pendingInvoices > 0 ? (ne(), Fe(_, {
              key: 0,
              content: n.pendingInvoices,
              color: "error",
              overlap: ""
            }, {
              default: x(() => [
                h(u, null, {
                  default: x(() => t[4] || (t[4] = [
                    ae("mdi-file-document-multiple-outline")
                  ])),
                  _: 1,
                  __: [4]
                })
              ]),
              _: 1
            }, 8, ["content"])) : (ne(), Fe(u, { key: 1 }, {
              default: x(() => t[5] || (t[5] = [
                ae("mdi-file-document-multiple-outline")
              ])),
              _: 1,
              __: [5]
            })),
            h(g, {
              activator: "parent",
              location: a.isRtl ? "bottom start" : "bottom end"
            }, {
              default: x(() => [
                ae(W(e.__("Offline Invoices")) + " (" + W(n.pendingInvoices) + ") ", 1)
              ]),
              _: 1
            }, 8, ["location"])
          ]),
          _: 1
        }, 8, ["class"]),
        bt(e.$slots, "menu", {}, void 0, !0)
      ], 2),
      h(Ur, { name: "loading-fade" }, {
        default: x(() => [
          n.loadingActive ? (ne(), Be("div", eG, [
            A("div", tG, [
              A("span", nG, W(n.loadingMessage), 1),
              A("div", aG, W(n.loadingProgress) + "%", 1)
            ]),
            h(w, {
              "model-value": n.loadingProgress,
              color: "primary",
              height: "4",
              absolute: "",
              location: "bottom",
              class: "glass-progress"
            }, null, 8, ["model-value"])
          ])) : ke("", !0)
        ]),
        _: 1
      })
    ]),
    _: 3
  }, 8, ["color", "theme", "class", "style"]);
}
const iG = /* @__PURE__ */ rn(JK, [["render", rG], ["__scopeId", "data-v-99e6a8f2"]]), oG = {
  name: "NavbarDrawer",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  props: {
    drawer: Boolean,
    company: String,
    companyImg: String,
    items: Array,
    item: Number,
    isDark: Boolean
  },
  data() {
    return {
      mini: !1,
      drawerOpen: this.drawer,
      activeItem: this.item,
      showSport: !0
    };
  },
  computed: {
    scrimColor() {
      return this.isDark ? !0 : "rgba(255,255,255,1)";
    }
  },
  watch: {
    drawer(e) {
      this.drawerOpen = e, e && (this.mini = !1);
    },
    drawerOpen(e) {
      document.body.style.overflow = e ? "hidden" : "", this.$emit("update:drawer", e);
    },
    item(e) {
      this.activeItem = e;
    },
    activeItem(e) {
      this.$emit("update:item", e);
    }
  },
  mounted() {
  },
  methods: {
    handleMouseLeave() {
      this.drawerOpen && (clearTimeout(this._closeTimeout), this._closeTimeout = setTimeout(() => {
        this.drawerOpen = !1, this.mini = !0;
      }, 250));
    },
    changePage(e) {
      this.$emit("change-page", e), window.innerWidth < 1024 && this.closeDrawer();
    },
    closeDrawer() {
      this.drawerOpen = !1, this.mini = !0;
    }
  }
}, sG = {
  key: 0,
  class: "drawer-header"
}, lG = { class: "drawer-company" }, cG = {
  key: 1,
  class: "drawer-header-mini"
}, uG = { key: 2 };
function dG(e, t, n, a, r, i) {
  const o = J("v-img"), l = J("v-avatar"), s = J("v-divider"), d = J("v-icon"), u = J("v-list-item-title"), f = J("v-list-item"), _ = J("v-list"), g = J("v-navigation-drawer");
  return ne(), Fe(g, {
    modelValue: r.drawerOpen,
    "onUpdate:modelValue": t[1] || (t[1] = (v) => r.drawerOpen = v),
    rail: r.mini,
    "expand-on-hover": "",
    width: "220",
    class: Ee(["drawer-custom", { "drawer-visible": r.drawerOpen }, a.rtlClasses]),
    onMouseleave: i.handleMouseLeave,
    temporary: "",
    location: a.isRtl ? "right" : "left",
    scrim: i.scrimColor
  }, {
    default: x(() => [
      r.mini ? (ne(), Be("div", cG, [
        h(l, { size: "40" }, {
          default: x(() => [
            h(o, {
              src: n.companyImg,
              alt: "Company logo"
            }, null, 8, ["src"])
          ]),
          _: 1
        })
      ])) : (ne(), Be("div", sG, [
        h(l, { size: "40" }, {
          default: x(() => [
            h(o, {
              src: n.companyImg,
              alt: "Company logo"
            }, null, 8, ["src"])
          ]),
          _: 1
        }),
        A("span", lG, W(n.company), 1)
      ])),
      h(s),
      h(_, {
        density: "compact",
        nav: "",
        selected: r.activeItem,
        "onUpdate:selected": t[0] || (t[0] = (v) => r.activeItem = v),
        "selected-class": "active-item"
      }, {
        default: x(() => [
          (ne(!0), Be(Qe, null, un(n.items, (v, w) => (ne(), Fe(f, {
            key: v.text,
            value: w,
            onClick: (b) => i.changePage(v.text),
            class: "drawer-item"
          }, {
            prepend: x(() => [
              h(d, { class: "drawer-icon" }, {
                default: x(() => [
                  ae(W(v.icon), 1)
                ]),
                _: 2
              }, 1024)
            ]),
            default: x(() => [
              h(u, { class: "drawer-item-title" }, {
                default: x(() => [
                  ae(W(v.text), 1)
                ]),
                _: 2
              }, 1024)
            ]),
            _: 2
          }, 1032, ["value", "onClick"]))), 128))
        ]),
        _: 1
      }, 8, ["selected"]),
      r.showSport ? (ne(), Be("div", uG)) : ke("", !0)
    ]),
    _: 1
  }, 8, ["modelValue", "rail", "class", "onMouseleave", "location", "scrim"]);
}
const fG = /* @__PURE__ */ rn(oG, [["render", dG], ["__scopeId", "data-v-900e46f4"]]), mG = [
  { code: "en", name: "English", native_name: "English" },
  { code: "ar", name: "العربية", native_name: "العربية" },
  { code: "es", name: "Español", native_name: "Español" },
  { code: "pt", name: "Português", native_name: "Português" }
], hG = {
  name: "NavbarMenu",
  props: {
    posProfile: { type: Object, default: () => ({}) },
    lastInvoiceId: String,
    manualOffline: Boolean,
    networkOnline: Boolean,
    serverOnline: Boolean,
    isDark: Boolean
  },
  data() {
    return {
      showLanguageDialog: !1,
      selectedLanguage: "en",
      currentLanguage: "en",
      availableLanguages: mG,
      loading: !1,
      changing: !1,
      useWesternNumerals: !1,
      originalWesternNumerals: !1,
      notification: {
        show: !1,
        message: "",
        type: "info",
        timeout: 3e3
      }
    };
  },
  computed: {
    canChangeLanguage() {
      return (this.selectedLanguage !== this.currentLanguage || this.useWesternNumerals !== this.originalWesternNumerals) && !this.changing;
    },
    selectedLanguageName() {
      return this.availableLanguages.find((t) => t.code === this.selectedLanguage)?.name || this.selectedLanguage.toUpperCase();
    }
  },
  async mounted() {
    await this.initializeLanguage(), this.initializeWesternNumerals();
  },
  methods: {
    initializeWesternNumerals() {
      try {
        const e = localStorage.getItem("use_western_numerals");
        if (e !== null)
          this.useWesternNumerals = ["1", "true", "yes"].includes(e.toLowerCase());
        else if (window.frappe && window.frappe.boot) {
          const t = window.frappe.boot.use_western_numerals || window.frappe.boot.pos_profile?.use_western_numerals;
          typeof t < "u" && (this.useWesternNumerals = !!t);
        }
      } catch {
        this.useWesternNumerals = !1;
      }
      this.originalWesternNumerals = this.useWesternNumerals;
    },
    saveWesternPreference() {
      try {
        localStorage.setItem("use_western_numerals", this.useWesternNumerals ? "1" : "0");
      } catch {
      }
      window.frappe && window.frappe.boot && (window.frappe.boot.use_western_numerals = this.useWesternNumerals), this.showNotification(
        this.useWesternNumerals ? "Western numerals enabled" : "Western numerals disabled"
      );
    },
    async changeLanguage() {
      if (this.selectedLanguage === this.currentLanguage) {
        this.originalWesternNumerals = this.useWesternNumerals, this.showNotification("Settings updated. Reloading...", "success"), this.closeLanguageDialog(), this.$emit("clear-cache"), setTimeout(() => {
          window.location.reload();
        }, 200);
        return;
      }
      this.changing = !0;
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.utilities.set_current_user_language",
          args: { lang_code: this.selectedLanguage }
        }), t = e?.message || e;
        if (t?.success)
          this.currentLanguage = this.selectedLanguage, window.frappe && window.frappe.boot && (window.frappe.boot.lang = this.selectedLanguage), this.showNotification("Language changed successfully! Reloading...", "success"), this.closeLanguageDialog(), this.$emit("clear-cache"), setTimeout(() => {
            window.location.reload();
          }, 2e3);
        else {
          const n = t?.message || "Failed to change language";
          this.showNotification(n, "error");
        }
      } catch (e) {
        this.showNotification(
          `Failed to change language: ${e.message || "Unknown error"}`,
          "error"
        );
      } finally {
        this.changing = !1;
      }
    },
    async initializeLanguage() {
      this.loading = !0;
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.utilities.get_current_user_language"
        }), t = e?.message || e;
        t?.success && Object.assign(this, {
          availableLanguages: t.available_languages,
          currentLanguage: t.language_code,
          selectedLanguage: t.language_code
        });
      } catch (e) {
        console.error("Error initializing language:", e);
      } finally {
        this.loading = !1;
      }
    },
    closeLanguageDialog() {
      this.showLanguageDialog = !1, this.selectedLanguage = this.currentLanguage, this.originalWesternNumerals = this.useWesternNumerals;
    },
    showNotification(e, t = "info", n = 3e3) {
      Object.assign(this.notification, {
        show: !0,
        message: this.__(e),
        type: t,
        timeout: n
      });
    },
    hideNotification() {
      this.notification.show = !1;
    },
    __(e) {
      return window.__ ? window.__(e) : e;
    }
  },
  emits: [
    "close-shift",
    "print-last-invoice",
    "sync-invoices",
    "toggle-offline",
    "clear-cache",
    "show-about",
    "toggle-theme",
    "logout"
  ]
}, _G = { class: "menu-header-compact" }, pG = { class: "menu-header-text-compact" }, vG = { class: "menu-icon-wrapper-compact primary-icon" }, gG = { class: "menu-content-compact" }, yG = { class: "menu-icon-wrapper-compact secondary-icon" }, bG = { class: "menu-content-compact" }, wG = { class: "menu-icon-wrapper-compact info-icon" }, kG = { class: "menu-content-compact" }, SG = { class: "menu-icon-wrapper-compact warning-icon" }, CG = { class: "menu-content-compact" }, AG = { class: "menu-icon-wrapper-compact neutral-icon" }, xG = { class: "menu-content-compact" }, TG = { class: "menu-icon-wrapper-compact neutral-icon" }, IG = { class: "menu-content-compact" }, EG = { class: "menu-icon-wrapper-compact primary-icon" }, PG = { class: "menu-content-compact" }, OG = { class: "menu-icon-wrapper-compact info-icon" }, DG = { class: "menu-content-compact" }, BG = { class: "menu-icon-wrapper-compact danger-icon" }, VG = { class: "menu-content-compact" }, MG = { class: "text-body-2 mb-3" };
function RG(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-btn"), s = J("v-list-item-title"), d = J("v-list-item-subtitle"), u = J("v-list-item"), f = J("v-divider"), _ = J("v-list"), g = J("v-card"), v = J("v-menu"), w = J("v-card-title"), b = J("v-select"), p = J("v-switch"), y = J("v-alert"), S = J("v-card-text"), E = J("v-spacer"), C = J("v-card-actions"), B = J("v-dialog"), O = J("v-snackbar");
  return ne(), Be(Qe, null, [
    h(v, {
      "min-width": 240,
      "close-on-content-click": !0,
      location: "bottom end",
      offset: [0, 4]
    }, {
      activator: x(({ props: D }) => [
        h(l, He(D, {
          color: "primary",
          variant: "elevated",
          class: "menu-btn-compact"
        }), {
          default: x(() => [
            ae(W(i.__("Menu")) + " ", 1),
            h(o, {
              end: "",
              size: "16",
              class: "ml-1"
            }, {
              default: x(() => t[13] || (t[13] = [
                ae("mdi-menu-down")
              ])),
              _: 1,
              __: [13]
            })
          ]),
          _: 2
        }, 1040)
      ]),
      default: x(() => [
        h(g, {
          class: "menu-card-compact",
          elevation: "12"
        }, {
          default: x(() => [
            A("div", _G, [
              h(o, {
                color: "primary",
                size: "20"
              }, {
                default: x(() => t[14] || (t[14] = [
                  ae("mdi-menu")
                ])),
                _: 1,
                __: [14]
              }),
              A("span", pG, W(i.__("Actions")), 1)
            ]),
            h(_, {
              density: "compact",
              class: "menu-list-compact"
            }, {
              default: x(() => [
                n.posProfile.posa_hide_closing_shift ? ke("", !0) : (ne(), Fe(u, {
                  key: 0,
                  onClick: t[0] || (t[0] = (D) => e.$emit("close-shift")),
                  class: "menu-item-compact primary-action"
                }, {
                  prepend: x(() => [
                    A("div", vG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[15] || (t[15] = [
                          ae("mdi-content-save-move-outline")
                        ])),
                        _: 1,
                        __: [15]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", gG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Close Shift")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("End current session")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                })),
                n.posProfile.posa_allow_print_last_invoice ? (ne(), Fe(u, {
                  key: 1,
                  onClick: t[1] || (t[1] = (D) => e.$emit("print-last-invoice")),
                  disabled: !n.lastInvoiceId,
                  class: "menu-item-compact secondary-action"
                }, {
                  prepend: x(() => [
                    A("div", yG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[16] || (t[16] = [
                          ae("mdi-printer")
                        ])),
                        _: 1,
                        __: [16]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", bG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Print Last Invoice")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Reprint previous transaction")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }, 8, ["disabled"])) : ke("", !0),
                h(u, {
                  onClick: t[2] || (t[2] = (D) => e.$emit("sync-invoices")),
                  class: "menu-item-compact info-action"
                }, {
                  prepend: x(() => [
                    A("div", wG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[17] || (t[17] = [
                          ae("mdi-sync")
                        ])),
                        _: 1,
                        __: [17]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", kG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Sync Offline Invoices")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Upload pending transactions")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                h(u, {
                  onClick: t[3] || (t[3] = (D) => e.$emit("toggle-offline")),
                  class: "menu-item-compact warning-action"
                }, {
                  prepend: x(() => [
                    A("div", SG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[18] || (t[18] = [
                          ae("mdi-wifi-off")
                        ])),
                        _: 1,
                        __: [18]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", CG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(n.manualOffline ? i.__("Go Online") : i.__("Go Offline")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(n.manualOffline ? i.__("Disable offline mode") : i.__("Work without server connection")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                h(u, {
                  onClick: t[4] || (t[4] = (D) => e.$emit("clear-cache")),
                  disabled: n.manualOffline || !n.networkOnline || !n.serverOnline,
                  class: "menu-item-compact neutral-action"
                }, {
                  prepend: x(() => [
                    A("div", AG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[19] || (t[19] = [
                          ae("mdi-delete-sweep-outline")
                        ])),
                        _: 1,
                        __: [19]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", xG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Clear Cache")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Remove local data and refresh")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }, 8, ["disabled"]),
                h(f, { class: "menu-section-divider-compact" }),
                h(u, {
                  onClick: t[5] || (t[5] = (D) => e.$emit("show-about")),
                  class: "menu-item-compact neutral-action"
                }, {
                  prepend: x(() => [
                    A("div", TG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[20] || (t[20] = [
                          ae("mdi-information-outline")
                        ])),
                        _: 1,
                        __: [20]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", IG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("About")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("App information")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                h(u, {
                  onClick: t[6] || (t[6] = (D) => r.showLanguageDialog = !0),
                  class: "menu-item-compact primary-action"
                }, {
                  prepend: x(() => [
                    A("div", EG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[21] || (t[21] = [
                          ae("mdi-translate")
                        ])),
                        _: 1,
                        __: [21]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", PG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Language")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Change interface language")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                h(u, {
                  onClick: t[7] || (t[7] = (D) => e.$emit("toggle-theme")),
                  class: "menu-item-compact info-action"
                }, {
                  prepend: x(() => [
                    A("div", OG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => [
                          ae(W(n.isDark ? "mdi-white-balance-sunny" : "mdi-moon-waning-crescent"), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", DG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(n.isDark ? i.__("Light Mode") : i.__("Dark Mode")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Switch theme appearance")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                h(u, {
                  onClick: t[8] || (t[8] = (D) => e.$emit("logout")),
                  class: "menu-item-compact danger-action"
                }, {
                  prepend: x(() => [
                    A("div", BG, [
                      h(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: x(() => t[22] || (t[22] = [
                          ae("mdi-logout")
                        ])),
                        _: 1,
                        __: [22]
                      })
                    ])
                  ]),
                  default: x(() => [
                    A("div", VG, [
                      h(s, { class: "menu-item-title-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Logout")), 1)
                        ]),
                        _: 1
                      }),
                      h(d, { class: "menu-item-subtitle-compact" }, {
                        default: x(() => [
                          ae(W(i.__("Sign out of session")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    h(B, {
      modelValue: r.showLanguageDialog,
      "onUpdate:modelValue": t[11] || (t[11] = (D) => r.showLanguageDialog = D),
      "max-width": "400",
      persistent: ""
    }, {
      default: x(() => [
        h(g, null, {
          default: x(() => [
            h(w, { class: "text-h6 d-flex align-center" }, {
              default: x(() => [
                h(o, {
                  start: "",
                  color: "primary",
                  class: "mr-2"
                }, {
                  default: x(() => t[23] || (t[23] = [
                    ae("mdi-translate")
                  ])),
                  _: 1,
                  __: [23]
                }),
                ae(" " + W(i.__("Select Language")), 1)
              ]),
              _: 1
            }),
            h(S, null, {
              default: x(() => [
                A("div", MG, W(i.__("Choose your preferred language for the POS interface")), 1),
                h(b, {
                  modelValue: r.selectedLanguage,
                  "onUpdate:modelValue": t[9] || (t[9] = (D) => r.selectedLanguage = D),
                  items: r.availableLanguages,
                  "item-title": "name",
                  "item-value": "code",
                  label: i.__("Language"),
                  variant: "outlined",
                  density: "compact",
                  loading: r.loading,
                  disabled: r.loading
                }, {
                  item: x(({ item: D, props: T }) => [
                    h(u, Xn(Ca(T)), {
                      prepend: x(() => [
                        h(o, {
                          color: D.raw.code === r.currentLanguage ? "primary" : "grey"
                        }, {
                          default: x(() => [
                            ae(W(D.raw.code === r.currentLanguage ? "mdi-check-circle" : "mdi-circle-outline"), 1)
                          ]),
                          _: 2
                        }, 1032, ["color"])
                      ]),
                      default: x(() => [
                        h(s, null, {
                          default: x(() => [
                            ae(W(D.raw.name) + " (" + W(D.raw.code.toUpperCase()) + ") ", 1)
                          ]),
                          _: 2
                        }, 1024),
                        D.raw.code !== "en" ? (ne(), Fe(d, { key: 0 }, {
                          default: x(() => [
                            ae(W(D.raw.native_name), 1)
                          ]),
                          _: 2
                        }, 1024)) : ke("", !0)
                      ]),
                      _: 2
                    }, 1040)
                  ]),
                  _: 1
                }, 8, ["modelValue", "items", "label", "loading", "disabled"]),
                h(p, {
                  modelValue: r.useWesternNumerals,
                  "onUpdate:modelValue": [
                    t[10] || (t[10] = (D) => r.useWesternNumerals = D),
                    i.saveWesternPreference
                  ],
                  class: "mt-3",
                  density: "compact",
                  inset: "",
                  label: i.__("Use Western numerals")
                }, null, 8, ["modelValue", "label", "onUpdate:modelValue"]),
                r.selectedLanguage !== r.currentLanguage ? (ne(), Fe(y, {
                  key: 0,
                  type: "info",
                  variant: "tonal",
                  density: "compact",
                  class: "mt-3"
                }, {
                  default: x(() => [
                    ae(W(i.__("Language will be changed to")) + ": ", 1),
                    A("strong", null, W(i.selectedLanguageName), 1)
                  ]),
                  _: 1
                })) : ke("", !0)
              ]),
              _: 1
            }),
            h(C, { class: "pa-4 pt-0" }, {
              default: x(() => [
                h(E),
                h(l, {
                  color: "grey",
                  variant: "text",
                  onClick: i.closeLanguageDialog,
                  disabled: r.changing
                }, {
                  default: x(() => [
                    ae(W(i.__("Cancel")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "disabled"]),
                h(l, {
                  color: "primary",
                  loading: r.changing,
                  disabled: !i.canChangeLanguage,
                  onClick: i.changeLanguage
                }, {
                  default: x(() => [
                    ae(W(i.__("Change Language")), 1)
                  ]),
                  _: 1
                }, 8, ["loading", "disabled", "onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    h(O, {
      modelValue: r.notification.show,
      "onUpdate:modelValue": t[12] || (t[12] = (D) => r.notification.show = D),
      timeout: r.notification.timeout,
      color: r.notification.type,
      location: "top right"
    }, {
      actions: x(() => [
        h(l, {
          color: "white",
          variant: "text",
          onClick: i.hideNotification
        }, {
          default: x(() => [
            ae(W(i.__("Close")), 1)
          ]),
          _: 1
        }, 8, ["onClick"])
      ]),
      default: x(() => [
        ae(W(r.notification.message) + " ", 1)
      ]),
      _: 1
    }, 8, ["modelValue", "timeout", "color"])
  ], 64);
}
const LG = /* @__PURE__ */ rn(hG, [["render", RG], ["__scopeId", "data-v-1b76f713"]]), FG = {
  name: "StatusIndicator",
  props: {
    networkOnline: Boolean,
    serverOnline: Boolean,
    serverConnecting: Boolean,
    isIpHost: Boolean,
    syncTotals: Object,
    cacheReady: Boolean
  },
  computed: {
    /**
     * Determines the color of the status icon based on current network and server connectivity.
     * @returns {string} A Vuetify color string ('green', 'red').
     */
    statusColor() {
      return this.serverConnecting ? "orange" : this.isIpHost ? this.networkOnline ? "green" : "red" : this.networkOnline && this.serverOnline ? "green" : this.networkOnline && !this.serverOnline ? "orange" : "red";
    },
    /**
     * Determines the Material Design Icon to display based on network and server status.
     * @returns {string} A Material Design Icon class string.
     */
    statusIcon() {
      return this.serverConnecting ? "mdi-wifi-sync" : this.isIpHost ? this.networkOnline ? "mdi-wifi" : "mdi-wifi-off" : this.networkOnline && this.serverOnline ? "mdi-wifi" : this.networkOnline && !this.serverOnline ? "mdi-wifi-strength-alert-outline" : "mdi-wifi-off";
    },
    /**
     * Provides a descriptive text for the tooltip that appears when hovering over the status icon.
     * This text is also used for the `title` attribute of the button.
     * @returns {string} A localized status message.
     */
    statusText() {
      const e = window.location.hostname, t = this.isIpHost ? "Local/IP Host" : "Domain Host";
      return this.serverConnecting ? this.__(`Connecting to server... (${t}: ${e})`) : this.networkOnline ? this.isIpHost ? this.__(`Connected to ${e}`) : this.serverOnline ? this.__(`Connected to Server (${e})`) : this.__(`Server Offline (${e})`) : this.__(`No Internet Connection (${t}: ${e})`);
    },
    /**
     * Returns a short string summarizing the last offline invoice sync results.
     */
    syncInfoText() {
      const { pending: e, synced: t, drafted: n } = this.syncTotals;
      if (!this.cacheReady)
        return this.__("Loading cache...");
      const a = e || 0, r = t || 0, i = n || 0;
      return this.networkOnline ? `To Sync: ${a} | Synced: ${r} | Draft: ${i}` : a > 0 || r > 0 || i > 0 ? `Pending: ${a} | Synced: ${r} | Draft: ${i}` : "Offline Mode";
    }
  }
}, NG = { class: "status-section-enhanced mx-1" }, UG = { class: "status-info-always-visible" }, $G = { class: "status-detail-inline" };
function qG(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-btn");
  return ne(), Be("div", NG, [
    h(l, {
      icon: "",
      title: i.statusText,
      class: "status-btn-enhanced",
      color: i.statusColor
    }, {
      default: x(() => [
        h(o, { color: i.statusColor }, {
          default: x(() => [
            ae(W(i.statusIcon), 1)
          ]),
          _: 1
        }, 8, ["color"])
      ]),
      _: 1
    }, 8, ["title", "color"]),
    A("div", UG, [
      A("div", {
        class: Ee(["status-title-inline", {
          "status-connected": i.statusColor === "green",
          "status-offline": i.statusColor === "red"
        }])
      }, W(i.statusText), 3),
      A("div", $G, W(i.syncInfoText), 1)
    ])
  ]);
}
const HG = /* @__PURE__ */ rn(FG, [["render", qG], ["__scopeId", "data-v-d7d26c06"]]), zG = {
  name: "CacheUsageMeter",
  props: {
    cacheUsage: {
      type: Number,
      default: 0
    },
    cacheUsageLoading: {
      type: Boolean,
      default: !1
    },
    cacheUsageDetails: {
      type: Object,
      default: () => ({
        total: 0,
        indexedDB: 0,
        localStorage: 0
      })
    }
  },
  computed: {
    cacheUsageColor() {
      return this.cacheUsage < 50 ? "success" : this.cacheUsage < 80 ? "warning" : "error";
    },
    cacheBarGradient() {
      return this.cacheUsage < 50 ? "linear-gradient(90deg, #43e97b 0%, #38f9d7 100%)" : this.cacheUsage < 80 ? "linear-gradient(90deg, #f7971e 0%, #ffd200 100%)" : "linear-gradient(90deg, #f953c6 0%, #b91d73 100%)";
    }
  },
  methods: {
    refreshCacheUsage() {
      this.$emit("refresh");
    },
    formatBytes(e) {
      if (e === 0) return "0 Bytes";
      const t = 1024, n = ["Bytes", "KB", "MB", "GB"], a = Math.floor(Math.log(e) / Math.log(t));
      return parseFloat((e / Math.pow(t, a)).toFixed(2)) + " " + n[a];
    }
  }
}, WG = { class: "cache-usage-section mx-1" }, jG = { class: "cache-tooltip-content" }, YG = { class: "cache-tooltip-title" }, KG = { class: "cache-tooltip-section-title mb-1" }, GG = { class: "cache-tooltip-bar mb-2" }, QG = { class: "cache-bar-bg" }, JG = { class: "cache-bar-label-inside" }, XG = { key: 0 }, ZG = { class: "cache-tooltip-section-title mb-1" }, e9 = { class: "cache-tooltip-detail" }, t9 = { class: "cache-tooltip-detail" }, n9 = { class: "cache-tooltip-detail" }, a9 = {
  key: 1,
  class: "cache-tooltip-detail"
}, r9 = {
  key: 2,
  class: "cache-tooltip-warning"
}, i9 = { class: "cache-tooltip-tip mt-2" }, o9 = { class: "cache-tooltip-explanation mt-2" }, s9 = { class: "cache-tooltip-action mt-2" };
function l9(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-progress-circular"), s = J("v-divider"), d = J("v-tooltip");
  return ne(), Be("div", WG, [
    h(d, { location: "bottom" }, {
      activator: x(({ props: u }) => [
        A("div", He(u, {
          class: "cache-meter-container",
          onClick: t[0] || (t[0] = (...f) => i.refreshCacheUsage && i.refreshCacheUsage(...f))
        }), [
          h(l, {
            "model-value": n.cacheUsage,
            color: i.cacheUsageColor,
            size: 32,
            width: 3,
            class: "cache-meter"
          }, {
            default: x(() => [
              h(o, {
                size: "16",
                color: "info"
              }, {
                default: x(() => t[1] || (t[1] = [
                  ae("mdi-database-clock")
                ])),
                _: 1,
                __: [1]
              })
            ]),
            _: 1
          }, 8, ["model-value", "color"])
        ], 16)
      ]),
      default: x(() => [
        A("div", jG, [
          A("div", YG, [
            h(o, {
              size: "14",
              color: "info",
              class: "mr-1"
            }, {
              default: x(() => t[2] || (t[2] = [
                ae("mdi-database-clock")
              ])),
              _: 1,
              __: [2]
            }),
            ae(" " + W(e.__("Cache Usage")), 1)
          ]),
          h(s, { class: "my-2" }),
          A("div", KG, W(e.__("Usage")), 1),
          A("div", GG, [
            A("div", QG, [
              A("div", {
                class: "cache-bar-fill",
                style: Xe({ width: n.cacheUsage + "%", background: i.cacheBarGradient })
              }, [
                A("span", JG, W(n.cacheUsage) + "%", 1)
              ], 4),
              t[3] || (t[3] = A("span", { class: "cache-bar-max" }, "100%", -1))
            ])
          ]),
          n.cacheUsageLoading ? (ne(), Be("div", a9, W(e.__("Calculating...")), 1)) : (ne(), Be("div", XG, [
            A("div", ZG, W(e.__("Breakdown")), 1),
            A("div", e9, [
              h(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: x(() => t[4] || (t[4] = [
                  ae("mdi-database-clock")
                ])),
                _: 1,
                __: [4]
              }),
              ae(W(e.__("Total Size")) + ": ", 1),
              A("b", null, W(i.formatBytes(n.cacheUsageDetails.total)), 1)
            ]),
            A("div", t9, [
              h(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: x(() => t[5] || (t[5] = [
                  ae("mdi-database")
                ])),
                _: 1,
                __: [5]
              }),
              ae(W(e.__("IndexedDB")) + ": ", 1),
              A("b", null, W(i.formatBytes(n.cacheUsageDetails.indexedDB)), 1)
            ]),
            A("div", n9, [
              h(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: x(() => t[6] || (t[6] = [
                  ae("mdi-folder")
                ])),
                _: 1,
                __: [6]
              }),
              ae(W(e.__("localStorage")) + ": ", 1),
              A("b", null, W(i.formatBytes(n.cacheUsageDetails.localStorage)), 1)
            ])
          ])),
          h(s, { class: "my-2" }),
          n.cacheUsage >= 80 ? (ne(), Be("div", r9, [
            h(o, {
              size: "14",
              color: "error",
              class: "mr-1"
            }, {
              default: x(() => t[7] || (t[7] = [
                ae("mdi-alert")
              ])),
              _: 1,
              __: [7]
            }),
            ae(" " + W(e.__("Warning: High cache usage may affect performance.")), 1)
          ])) : ke("", !0),
          A("div", i9, [
            h(o, {
              size: "14",
              color: "primary",
              class: "mr-1"
            }, {
              default: x(() => t[8] || (t[8] = [
                ae("mdi-lightbulb-on-outline")
              ])),
              _: 1,
              __: [8]
            }),
            ae(" " + W(e.__("Tip: Clear cache regularly to free up space and keep the app fast.")), 1)
          ]),
          A("div", o9, [
            h(o, {
              size: "14",
              color: "info",
              class: "mr-1"
            }, {
              default: x(() => t[9] || (t[9] = [
                ae("mdi-database-clock")
              ])),
              _: 1,
              __: [9]
            }),
            ae(" " + W(e.__("The app stores data locally for offline use. This is called cache.")), 1)
          ]),
          A("div", s9, [
            h(o, {
              size: "14",
              class: "mr-1"
            }, {
              default: x(() => t[10] || (t[10] = [
                ae("mdi-refresh")
              ])),
              _: 1,
              __: [10]
            }),
            ae(" " + W(e.__("Click to refresh")), 1)
          ])
        ])
      ]),
      _: 1
    })
  ]);
}
const c9 = /* @__PURE__ */ rn(zG, [["render", l9], ["__scopeId", "data-v-485036e0"]]), u9 = {
  name: "AboutDialog",
  props: {
    modelValue: Boolean
  },
  data() {
    return {
      dialogOpen: this.modelValue,
      loadingAppInfo: !1,
      appInfoError: !1,
      appInfo: []
    };
  },
  watch: {
    modelValue(e) {
      this.dialogOpen = e, e && this.loadAppInfo();
    },
    dialogOpen(e) {
      this.$emit("update:modelValue", e);
    }
  },
  methods: {
    close() {
      this.dialogOpen = !1;
    },
    loadAppInfo() {
      this.loadingAppInfo = !0, this.appInfoError = !1, frappe.call({
        method: "posawesome.posawesome.api.utilities.get_app_info",
        callback: (e) => {
          this.loadingAppInfo = !1, Array.isArray(e.message.apps) ? this.appInfo = e.message.apps : this.appInfoError = !0;
        },
        error: () => {
          this.loadingAppInfo = !1, this.appInfoError = !0;
        }
      });
    }
  }
}, d9 = { class: "header-content-improved" }, f9 = { class: "header-icon-wrapper-improved" }, m9 = { class: "header-text-improved" }, h9 = { class: "header-title-improved" }, _9 = { class: "header-subtitle-improved" }, p9 = {
  key: 0,
  class: "header-stats-improved"
}, v9 = { class: "content-container-improved" }, g9 = {
  key: 0,
  class: "empty-state-improved text-center"
}, y9 = { class: "text-body-2 mt-3 mb-0" }, b9 = {
  key: 1,
  class: "empty-state-improved text-center"
}, w9 = { class: "text-body-2 mb-3" }, k9 = {
  key: 2,
  class: "apps-list-improved"
}, S9 = { class: "apps-header-improved" }, C9 = { class: "text-h6 mb-2" }, A9 = { class: "apps-grid-improved" }, x9 = { class: "app-icon-improved" }, T9 = { class: "app-details-improved" }, I9 = { class: "app-name-improved" }, E9 = { class: "app-version-improved" }, P9 = { class: "footer-info-improved" }, O9 = { class: "footer-text-improved" };
function D9(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-chip"), s = J("v-btn"), d = J("v-card-title"), u = J("v-progress-circular"), f = J("v-card-text"), _ = J("v-spacer"), g = J("v-card-actions"), v = J("v-card"), w = J("v-dialog");
  return ne(), Fe(w, {
    modelValue: r.dialogOpen,
    "onUpdate:modelValue": t[0] || (t[0] = (b) => r.dialogOpen = b),
    "max-width": "650",
    persistent: ""
  }, {
    default: x(() => [
      h(v, { class: "about-dialog-card-improved" }, {
        default: x(() => [
          h(d, { class: "about-header-improved pa-5" }, {
            default: x(() => [
              A("div", d9, [
                A("div", f9, [
                  h(o, {
                    size: "22",
                    class: "header-icon"
                  }, {
                    default: x(() => t[1] || (t[1] = [
                      ae("mdi-information-outline")
                    ])),
                    _: 1,
                    __: [1]
                  })
                ]),
                A("div", m9, [
                  A("h3", h9, W(e.__("About")), 1),
                  A("p", _9, W(e.__("System Information")), 1)
                ]),
                !r.loadingAppInfo && !r.appInfoError ? (ne(), Be("div", p9, [
                  h(l, {
                    size: "small",
                    color: "primary",
                    variant: "tonal",
                    class: "status-chip-improved"
                  }, {
                    default: x(() => [
                      h(o, {
                        start: "",
                        size: "14"
                      }, {
                        default: x(() => t[2] || (t[2] = [
                          ae("mdi-application-outline")
                        ])),
                        _: 1,
                        __: [2]
                      }),
                      ae(" " + W(r.appInfo.length) + " " + W(e.__("Apps")), 1)
                    ]),
                    _: 1
                  })
                ])) : ke("", !0)
              ]),
              h(s, {
                icon: "mdi-close",
                variant: "text",
                size: "default",
                onClick: i.close,
                class: "close-btn-improved"
              }, null, 8, ["onClick"])
            ]),
            _: 1
          }),
          h(f, { class: "pa-0 white-background" }, {
            default: x(() => [
              A("div", v9, [
                r.loadingAppInfo ? (ne(), Be("div", g9, [
                  h(u, {
                    indeterminate: "",
                    color: "primary",
                    size: "50"
                  }),
                  A("p", y9, W(e.__("Loading...")), 1)
                ])) : r.appInfoError ? (ne(), Be("div", b9, [
                  h(o, {
                    size: "50",
                    color: "error",
                    class: "mb-3"
                  }, {
                    default: x(() => t[3] || (t[3] = [
                      ae("mdi-alert-circle-outline")
                    ])),
                    _: 1,
                    __: [3]
                  }),
                  A("p", w9, W(e.__("Error Loading Data")), 1),
                  h(s, {
                    color: "primary",
                    variant: "outlined",
                    size: "default",
                    onClick: i.loadAppInfo
                  }, {
                    default: x(() => [
                      h(o, {
                        start: "",
                        size: "18"
                      }, {
                        default: x(() => t[4] || (t[4] = [
                          ae("mdi-refresh")
                        ])),
                        _: 1,
                        __: [4]
                      }),
                      ae(" " + W(e.__("Retry")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ])) : (ne(), Be("div", k9, [
                  A("div", S9, [
                    A("h4", C9, W(e.__("Installed Applications")), 1)
                  ]),
                  A("div", A9, [
                    (ne(!0), Be(Qe, null, un(r.appInfo, (b) => (ne(), Be("div", {
                      key: b.app_name,
                      class: "app-item-improved"
                    }, [
                      A("div", x9, [
                        h(o, {
                          size: "18",
                          color: "white"
                        }, {
                          default: x(() => t[5] || (t[5] = [
                            ae("mdi-application-outline")
                          ])),
                          _: 1,
                          __: [5]
                        })
                      ]),
                      A("div", T9, [
                        A("div", I9, W(b.app_name), 1),
                        A("div", E9, "v" + W(b.installed_version), 1)
                      ])
                    ]))), 128))
                  ])
                ]))
              ])
            ]),
            _: 1
          }),
          h(g, { class: "dialog-actions-improved pa-4" }, {
            default: x(() => [
              A("div", P9, [
                A("span", O9, [
                  h(o, {
                    start: "",
                    size: "16",
                    color: "error"
                  }, {
                    default: x(() => t[6] || (t[6] = [
                      ae("mdi-heart")
                    ])),
                    _: 1,
                    __: [6]
                  }),
                  ae(" " + W(e.__("Built with Frappe")), 1)
                ])
              ]),
              h(_),
              h(s, {
                color: "primary",
                onClick: i.close,
                class: "close-btn-action-improved"
              }, {
                default: x(() => [
                  ae(W(e.__("Close")), 1)
                ]),
                _: 1
              }, 8, ["onClick"])
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["modelValue"]);
}
const B9 = /* @__PURE__ */ rn(u9, [["render", D9], ["__scopeId", "data-v-2c67391c"]]), Rt = {
  // Check if current language/layout is RTL
  isRtl() {
    if (typeof frappe < "u" && frappe.utils && typeof frappe.utils.is_rtl == "function")
      return frappe.utils.is_rtl();
    if ((document.documentElement.dir || document.body.dir || "").toLowerCase() === "rtl") return !0;
    const t = document.documentElement.lang || "";
    return ["ar", "he", "fa", "ur", "ps", "sd", "ku", "dv"].some((a) => t.toLowerCase().startsWith(a));
  },
  // Determine if user prefers Western numerals even in RTL
  useWestern() {
    try {
      const e = localStorage.getItem("use_western_numerals");
      if (e !== null)
        return ["1", "true", "yes"].includes(e.toLowerCase());
    } catch {
    }
    if (typeof frappe < "u") {
      const e = frappe.boot?.use_western_numerals || frappe.boot?.pos_profile?.use_western_numerals;
      if (typeof e < "u")
        return !!e;
    }
    return !1;
  },
  // Helper to check if Arabic numerals should be used
  shouldUseArabic() {
    return this.isRtl() && !this.useWestern();
  },
  // Convert Western numerals to Arabic-Indic numerals
  toArabicNumerals(e) {
    if (!this.shouldUseArabic()) return e;
    const t = {
      0: "٠",
      1: "١",
      2: "٢",
      3: "٣",
      4: "٤",
      5: "٥",
      6: "٦",
      7: "٧",
      8: "٨",
      9: "٩"
    };
    return String(e).replace(/[0-9]/g, (n) => t[n]);
  },
  // Convert Arabic-Indic numerals back to Western numerals for parsing
  fromArabicNumerals(e) {
    const t = {
      "٠": "0",
      "١": "1",
      "٢": "2",
      "٣": "3",
      "٤": "4",
      "٥": "5",
      "٦": "6",
      "٧": "7",
      "٨": "8",
      "٩": "9"
    };
    return String(e).replace(/[٠-٩]/g, (n) => t[n]).replace(/٬/g, ",").replace(/٫/g, ".");
  },
  // Get appropriate locale for number formatting
  getNumberLocale() {
    if (this.shouldUseArabic()) {
      const e = document.documentElement.lang || "ar";
      return e.startsWith("ar") ? "ar-SA" : e.startsWith("fa") ? "fa-IR" : "ar-SA";
    }
    return "en-US";
  }
}, Oi = {
  data() {
    return {
      float_precision: 2,
      currency_precision: 2
    };
  },
  methods: {
    flt(e, t, n, a) {
      return !t && t != 0 && (t = this.currency_precision || 2), a || (a = "Banker's Rounding (legacy)"), flt(e, t, n, a);
    },
    formatCurrency(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.currency_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    },
    formatFloat(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.float_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    },
    setFormatedCurrency(e, t, n, a = !1, r) {
      let i = r && r.target ? r.target.value : r;
      typeof i == "string" && (i = Rt.fromArabicNumerals(i), i = i.replace(/,/g, ""));
      let o = parseFloat(i);
      return isNaN(o) ? o = 0 : a && o < 0 && (o = Math.abs(o)), typeof e == "object" ? e[t] = o : this[t] = o, this.formatCurrency(o, n);
    },
    setFormatedFloat(e, t, n, a = !1, r) {
      let i = r && r.target ? r.target.value : r;
      typeof i == "string" && (i = Rt.fromArabicNumerals(i), i = i.replace(/,/g, ""));
      let o = parseFloat(i);
      return isNaN(o) ? o = 0 : a && o < 0 && (o = Math.abs(o)), typeof e == "object" ? e[t] = o : this[t] = o, this.formatFloat(o, n);
    },
    currencySymbol(e) {
      return get_currency_symbol(e);
    },
    isNumber(e) {
      const t = Rt.fromArabicNumerals(String(e));
      return /^-?(\d+|\d{1,3}(\.\d{3})*)(,\d+)?$/.test(t) || "invalid number";
    },
    // Check if a value is negative for CSS class binding
    isNegative(e) {
      if (e == null) return !1;
      const t = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      return !isNaN(t) && t < 0;
    },
    // Format currency without HTML spans (for class binding approach)
    formatCurrencyPlain(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.currency_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    },
    // Format float without HTML spans (for class binding approach)
    formatFloatPlain(e, t) {
      e == null && (e = 0);
      let n = Number(Rt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.float_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Rt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Rt.toArabicNumerals(i), i;
    }
  },
  mounted() {
    this.float_precision = frappe.defaults.get_default("float_precision") || 2, this.currency_precision = frappe.defaults.get_default("currency_precision") || 2;
    const e = (t) => {
      const n = t.pos_profile || t, a = parseInt(n.posa_decimal_precision);
      isNaN(a) || (this.float_precision = a, this.currency_precision = a);
    };
    this.eventBus && this.eventBus.on && (this.eventBus.on("register_pos_profile", e), this.eventBus.on("payments_register_pos_profile", e));
  }
};
let hy = Promise.resolve();
function V9(e) {
  return hy = hy.then(() => e()).catch((t) => {
    console.error("DB operation failed", t);
  }), hy;
}
async function M9(e, t = 1 / 0) {
  const n = [];
  try {
    await gt.transaction("r", gt.table(e), async () => {
      let a = 0;
      await gt.table(e).each((r) => {
        if (n.push(r), a += 1, a >= t) throw ji.IterationComplete;
      });
    });
  } catch (a) {
    a !== ji.IterationComplete && console.error("Cursor read failed", a);
  }
  return n;
}
const gt = new ji("posawesome_offline");
gt.version(7).stores({
  keyval: "&key",
  queue: "&key",
  cache: "&key",
  items: "&item_code,item_name,item_group,*barcodes,*name_keywords,*serials,*batches",
  item_prices: "&[price_list+item_code],price_list,item_code",
  customers: "&name,customer_name,mobile_no,email_id,tax_id"
}).upgrade(
  (e) => e.table("items").toCollection().modify((t) => {
    t.barcodes = Array.isArray(t.item_barcode) ? t.item_barcode.map((n) => n.barcode).filter(Boolean) : t.item_barcode ? [String(t.item_barcode)] : [], t.name_keywords = t.item_name ? t.item_name.toLowerCase().split(/\s+/).filter(Boolean) : [], t.serials = Array.isArray(t.serial_no_data) ? t.serial_no_data.map((n) => n.serial_no).filter(Boolean) : [], t.batches = Array.isArray(t.batch_no_data) ? t.batch_no_data.map((n) => n.batch_no).filter(Boolean) : [];
  })
);
const R9 = {
  offline_invoices: "queue",
  offline_customers: "queue",
  offline_payments: "queue",
  item_details_cache: "cache",
  customer_storage: "cache"
}, L9 = /* @__PURE__ */ new Set(["items", "item_details_cache", "local_stock_cache"]);
function H_(e) {
  return R9[e] || "keyval";
}
function F9(e) {
  if (!e) return !1;
  const t = e.message ? e.message.toLowerCase() : "";
  return ["VersionError", "InvalidStateError", "NotFoundError"].includes(e.name) || t.includes("corrupt");
}
async function ta() {
  try {
    return await gt.table(H_("health_check")).get("health_check"), !0;
  } catch (e) {
    console.error("IndexedDB health check failed", e);
    try {
      return gt.isOpen() && await gt.close(), console.log("Attempting to reopen IndexedDB without deleting"), await gt.open(), console.log("IndexedDB reopened successfully"), !0;
    } catch (t) {
      if (console.error("Failed to reopen IndexedDB", t), F9(t)) {
        console.log("IndexedDB appears corrupted. Recreating database...");
        try {
          return await ji.delete("posawesome_offline"), await gt.open(), console.log("IndexedDB recreated and opened successfully"), !0;
        } catch (n) {
          console.error("Failed to recreate IndexedDB", n);
        }
      }
      return !1;
    }
  }
}
let Qo = null;
function n1() {
  if (!(Qo || typeof Worker > "u"))
    try {
      const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
      try {
        Qo = new Worker(e, { type: "classic" });
      } catch {
        Qo = new Worker(e, { type: "module" });
      }
    } catch (e) {
      console.error("Failed to init persist worker", e), Qo = null;
    }
}
function QO() {
  if (Qo) {
    try {
      Qo.terminate();
    } catch (e) {
      console.error("Failed to terminate persist worker", e);
    }
    Qo = null;
  }
}
n1();
const n_ = {};
let Yb = null;
function Xie(e, t) {
  n_[e] = t, Yb || (Yb = setTimeout(N9, 100));
}
function N9() {
  const e = Object.keys(n_);
  e.length && e.forEach((t) => {
    Tt(t, n_[t]), delete n_[t];
  }), Yb = null;
}
function Tt(e, t) {
  if (ta().catch(() => {
  }), Qo) {
    let a = t;
    try {
      a = typeof structuredClone == "function" ? structuredClone(t) : JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize", e, r);
    }
    try {
      Qo.postMessage({ type: "persist", key: e, value: a });
    } catch (r) {
      console.error(`Failed to postMessage for ${e}`, r);
    }
    return;
  }
  const n = H_(e);
  if (V9(
    () => gt.table(n).put({ key: e, value: t }).catch((a) => console.error(`Failed to persist ${e}`, a))
  ), typeof localStorage < "u" && e !== "price_list_cache" && !L9.has(e))
    try {
      localStorage.setItem(`posa_${e}`, JSON.stringify(t));
    } catch (a) {
      console.error("Failed to persist", e, "to localStorage", a);
    }
}
const sm = new Promise((e) => {
  const t = async () => {
    try {
      await gt.open(), e();
    } catch (n) {
      console.error("Failed to initialize offline DB", n), e();
    }
  };
  typeof requestIdleCallback == "function" ? requestIdleCallback(t) : setTimeout(t, 0);
});
function Mh(e, t) {
  try {
    const n = Ae.uom_cache;
    let a;
    try {
      a = JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize UOMs", r), a = [];
    }
    n[e] = a, Ae.uom_cache = n, Tt("uom_cache", Ae.uom_cache);
  } catch (n) {
    console.error("Failed to cache UOMs", n);
  }
}
function gA(e) {
  try {
    return (Ae.uom_cache || {})[e] || [];
  } catch {
    return [];
  }
}
function U9(e) {
  try {
    Ae.offers_cache = e, Tt("offers_cache", Ae.offers_cache);
  } catch (t) {
    console.error("Failed to cache offers", t);
  }
}
function yA() {
  try {
    return Ae.offers_cache || [];
  } catch {
    return [];
  }
}
async function $9(e, t) {
  try {
    if (!e) return;
    await ta(), gt.isOpen() || await gt.open();
    const n = t.map((a) => ({
      price_list: e,
      item_code: a.item_code,
      rate: a.rate,
      price_list_rate: a.price_list_rate || a.rate,
      timestamp: Date.now()
    }));
    await gt.table("item_prices").bulkPut(n);
  } catch (n) {
    console.error("Failed to save price list items", n);
  }
}
async function JO(e, t = 24 * 60 * 60 * 1e3) {
  try {
    if (!e) return null;
    await ta(), gt.isOpen() || await gt.open();
    const n = Date.now(), a = await gt.table("item_prices").where("price_list").equals(e).toArray();
    if (!a.length) return null;
    const r = a.filter((d) => n - d.timestamp < t);
    if (!r.length) return null;
    const i = r.map((d) => d.item_code), o = await gt.table("items").where("item_code").anyOf(i).toArray(), l = new Map(o.map((d) => [d.item_code, d]));
    return r.map((d) => {
      const u = l.get(d.item_code);
      return u ? {
        ...u,
        rate: d.rate,
        price_list_rate: d.price_list_rate || d.rate
      } : null;
    }).filter(Boolean);
  } catch (n) {
    return console.error("Failed to get cached price list items", n), null;
  }
}
async function Lu(e = null) {
  try {
    await ta(), gt.isOpen() || await gt.open(), e ? await gt.table("item_prices").where("price_list").equals(e).delete() : await gt.table("item_prices").clear();
  } catch (t) {
    console.error("Failed to clear price list cache", t);
  }
}
function bA(e, t, n) {
  try {
    const a = Ae.item_details_cache || {}, r = a[e] || {}, i = r[t] || {};
    let o;
    try {
      o = n.map((l) => ({
        item_code: l.item_code,
        actual_qty: l.actual_qty,
        has_batch_no: l.has_batch_no,
        has_serial_no: l.has_serial_no,
        item_uoms: l.item_uoms,
        batch_no_data: l.batch_no_data,
        serial_no_data: l.serial_no_data,
        rate: l.rate,
        price_list_rate: l.price_list_rate,
        currency: l.currency
      })), o = JSON.parse(JSON.stringify(o));
    } catch (l) {
      console.error("Failed to serialize item details", l), o = [];
    }
    o.forEach((l) => {
      i[l.item_code] = {
        data: l,
        timestamp: Date.now()
      };
    }), r[t] = i, a[e] = r, Ae.item_details_cache = a, Tt("item_details_cache", Ae.item_details_cache);
  } catch (a) {
    console.error("Failed to cache item details", a);
  }
}
async function wA(e, t, n, a = 15 * 60 * 1e3) {
  try {
    const i = (Ae.item_details_cache || {})[e]?.[t] || {}, o = Date.now(), l = [], s = [];
    if (n.forEach((d) => {
      const u = i[d];
      u && o - u.timestamp < a ? l.push(u.data) : s.push(d);
    }), l.length) {
      await ta(), gt.isOpen() || await gt.open();
      const d = await gt.table("items").where("item_code").anyOf(l.map((f) => f.item_code)).toArray(), u = new Map(d.map((f) => [f.item_code, f]));
      l.forEach((f, _) => {
        const g = u.get(f.item_code) || {};
        l[_] = { ...g, ...f };
      });
    }
    return { cached: l, missing: s };
  } catch (r) {
    return console.error("Failed to get cached item details", r), { cached: [], missing: n };
  }
}
async function Ud(e) {
  try {
    await ta(), gt.isOpen() || await gt.open();
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (a) {
      console.error("Failed to serialize items", a), t = [];
    }
    t = t.map((a) => ({
      ...a,
      barcodes: Array.isArray(a.item_barcode) ? a.item_barcode.map((r) => r.barcode).filter(Boolean) : a.item_barcode ? [String(a.item_barcode)] : [],
      name_keywords: a.item_name ? a.item_name.toLowerCase().split(/\s+/).filter(Boolean) : [],
      serials: Array.isArray(a.serial_no_data) ? a.serial_no_data.map((r) => r.serial_no).filter(Boolean) : [],
      batches: Array.isArray(a.batch_no_data) ? a.batch_no_data.map((r) => r.batch_no).filter(Boolean) : []
    }));
    const n = 1e3;
    await gt.transaction("rw", gt.table("items"), async () => {
      for (let a = 0; a < t.length; a += n) {
        const r = t.slice(a, a + n);
        await gt.table("items").bulkPut(r);
      }
    });
  } catch (t) {
    console.error("Failed to save items", t);
  }
}
async function Zie() {
  try {
    return await ta(), gt.isOpen() || await gt.open(), await gt.table("items").toArray();
  } catch (e) {
    return console.error("Failed to read stored items", e), [];
  }
}
async function q9({ search: e = "", itemGroup: t = "", limit: n = 100, offset: a = 0 } = {}) {
  try {
    await ta(), gt.isOpen() || await gt.open();
    const r = e.toLowerCase();
    if (r) {
      let l = gt.table("items").where("item_code").startsWithIgnoreCase(r).or("item_name").startsWithIgnoreCase(r).or("barcodes").equalsIgnoreCase(r).or("name_keywords").startsWithIgnoreCase(r).or("serials").equalsIgnoreCase(r).or("batches").equalsIgnoreCase(r);
      if (t && t.toLowerCase() !== "all") {
        const f = t.toLowerCase();
        l = l.and((_) => _.item_group && _.item_group.toLowerCase() === f);
      }
      let s = await l.toArray();
      if (!s.length) {
        let f = gt.table("items");
        t && t.toLowerCase() !== "all" && (f = f.where("item_group").equalsIgnoreCase(t)), s = await f.filter((_) => {
          const g = _.item_name && _.item_name.toLowerCase().includes(r), v = _.item_code && _.item_code.toLowerCase().includes(r), w = Array.isArray(_.item_barcode) ? _.item_barcode.some((y) => y.barcode && y.barcode.toLowerCase() === r) : _.item_barcode && String(_.item_barcode).toLowerCase().includes(r), b = Array.isArray(_.serial_no_data) ? _.serial_no_data.some((y) => y.serial_no && y.serial_no.toLowerCase() === r) : Array.isArray(_.serials) ? _.serials.some((y) => y && y.toLowerCase() === r) : !1, p = Array.isArray(_.batch_no_data) ? _.batch_no_data.some((y) => y.batch_no && y.batch_no.toLowerCase() === r) : Array.isArray(_.batches) ? _.batches.some((y) => y && y.toLowerCase() === r) : !1;
          return g || v || w || b || p;
        }).toArray();
      }
      const d = /* @__PURE__ */ new Map();
      return s.forEach((f) => {
        d.has(f.item_code) || d.set(f.item_code, f);
      }), Array.from(d.values()).slice(a, a + n);
    }
    let i = gt.table("items");
    if (t && t.toLowerCase() !== "all" && (i = i.where("item_group").equalsIgnoreCase(t)), e) {
      const l = e.toLowerCase();
      i = i.filter((s) => {
        const d = s.item_name && s.item_name.toLowerCase().includes(l), u = s.item_code && s.item_code.toLowerCase().includes(l), f = Array.isArray(s.item_barcode) ? s.item_barcode.some((v) => v.barcode && v.barcode.toLowerCase() === l) : s.item_barcode && String(s.item_barcode).toLowerCase().includes(l), _ = Array.isArray(s.serial_no_data) ? s.serial_no_data.some((v) => v.serial_no && v.serial_no.toLowerCase() === l) : Array.isArray(s.serials) ? s.serials.some((v) => v && v.toLowerCase() === l) : !1, g = Array.isArray(s.batch_no_data) ? s.batch_no_data.some((v) => v.batch_no && v.batch_no.toLowerCase() === l) : Array.isArray(s.batches) ? s.batches.some((v) => v && v.toLowerCase() === l) : !1;
        return d || u || f || _ || g;
      });
    }
    return await i.offset(a).limit(n).toArray();
  } catch (r) {
    return console.error("Failed to query stored items", r), [];
  }
}
const $i = 1, Js = 1e3, Ae = {
  offline_invoices: [],
  offline_customers: [],
  offline_payments: [],
  pos_last_sync_totals: { pending: 0, synced: 0, drafted: 0 },
  uom_cache: {},
  offers_cache: [],
  customer_balance_cache: {},
  local_stock_cache: {},
  stock_cache_ready: !1,
  customer_storage: [],
  pos_opening_storage: null,
  opening_dialog_storage: null,
  sales_persons_storage: [],
  item_details_cache: {},
  tax_template_cache: {},
  translation_cache: {},
  coupons_cache: {},
  item_groups_cache: [],
  items_last_sync: null,
  customers_last_sync: null,
  // Track the current cache schema version
  cache_version: $i,
  cache_ready: !1,
  tax_inclusive: !1,
  manual_offline: !1,
  print_template: "",
  terms_and_conditions: ""
}, _u = (async () => {
  try {
    await ta();
    for (const n of Object.keys(Ae)) {
      const a = await gt.table(H_(n)).get(n);
      if (a && a.value !== void 0) {
        Ae[n] = a.value;
        continue;
      }
      if (typeof localStorage < "u") {
        const r = localStorage.getItem(`posa_${n}`);
        if (r)
          try {
            Ae[n] = JSON.parse(r);
            continue;
          } catch (i) {
            console.error("Failed to parse localStorage for", n, i);
          }
      }
    }
    const e = await gt.table(H_("cache_version")).get("cache_version");
    let t = e ? e.value : null;
    if (!t && typeof localStorage < "u") {
      const n = localStorage.getItem("posa_cache_version");
      n && (t = parseInt(n, 10));
    }
    t !== $i ? (await z_(), Ae.cache_version = $i, typeof localStorage < "u" && localStorage.setItem("posa_cache_version", $i), Tt("cache_version", $i)) : Ae.cache_version = t || $i, Ae.cache_ready = !0, Tt("cache_ready", !0);
  } catch (e) {
    console.error("Failed to initialize memory from DB", e);
  }
})();
function H9() {
  Ae.offline_invoices = [], Ae.offline_customers = [], Ae.offline_payments = [], Ae.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Tt("offline_invoices", Ae.offline_invoices), Tt("offline_customers", Ae.offline_customers), Tt("offline_payments", Ae.offline_payments), Tt("pos_last_sync_totals", Ae.pos_last_sync_totals);
}
function z9() {
  Lu(), Ae.item_details_cache = {}, Ae.uom_cache = {}, Ae.offers_cache = [], Ae.customer_balance_cache = {}, Ae.local_stock_cache = {}, Ae.stock_cache_ready = !1, Ae.coupons_cache = {}, Ae.item_groups_cache = [], Tt("item_details_cache", Ae.item_details_cache), Tt("uom_cache", Ae.uom_cache), Tt("offers_cache", Ae.offers_cache), Tt("customer_balance_cache", Ae.customer_balance_cache), Tt("local_stock_cache", Ae.local_stock_cache), Tt("stock_cache_ready", Ae.stock_cache_ready), Tt("coupons_cache", Ae.coupons_cache), Tt("item_groups_cache", Ae.item_groups_cache);
}
async function eoe() {
  try {
    return await ta(), gt.isOpen() || await gt.open(), await gt.table("items").toArray();
  } catch (e) {
    return console.error("Failed to get stored items", e), [];
  }
}
async function kA() {
  try {
    return await ta(), gt.isOpen() || await gt.open(), await gt.table("items").count();
  } catch (e) {
    return console.error("Failed to count stored items", e), 0;
  }
}
async function W9(e) {
  try {
    await ta(), gt.isOpen() || await gt.open();
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize items", n), t = [];
    }
    await gt.table("items").bulkPut(t);
  } catch (t) {
    console.error("Failed to save items", t);
  }
}
async function _y() {
  try {
    await ta(), gt.isOpen() || await gt.open(), await gt.table("items").clear();
  } catch (e) {
    console.error("Failed to clear stored items", e);
  }
}
async function XO(e = 1 / 0, t = 0) {
  try {
    return await ta(), gt.isOpen() || await gt.open(), await gt.table("customers").offset(t).limit(e).toArray();
  } catch (n) {
    return console.error("Failed to get customers from storage", n), [];
  }
}
async function Rh(e) {
  try {
    await ta(), gt.isOpen() || await gt.open();
    const t = e.map((a) => ({
      name: a.name,
      customer_name: a.customer_name,
      mobile_no: a.mobile_no,
      email_id: a.email_id,
      primary_address: a.primary_address,
      tax_id: a.tax_id
    })), n = 1e3;
    await gt.transaction("rw", gt.table("customers"), async () => {
      for (let a = 0; a < t.length; a += n) {
        const r = t.slice(a, a + n);
        await gt.table("customers").bulkPut(r);
      }
    });
  } catch (t) {
    console.error("Failed to set customer storage", t);
  }
}
async function SA() {
  try {
    return await ta(), gt.isOpen() || await gt.open(), await gt.table("customers").count();
  } catch (e) {
    return console.error("Failed to count customers", e), 0;
  }
}
async function j9() {
  try {
    await ta(), gt.isOpen() || await gt.open(), await gt.table("customers").clear();
  } catch (e) {
    console.error("Failed to clear customer storage", e);
  }
}
function Y9() {
  return Ae.items_last_sync || null;
}
function CA(e) {
  Ae.items_last_sync = e, Tt("items_last_sync", Ae.items_last_sync);
}
function py() {
  return Ae.customers_last_sync || null;
}
function Lh(e) {
  Ae.customers_last_sync = e, Tt("customers_last_sync", Ae.customers_last_sync);
}
function AA() {
  return Ae.sales_persons_storage || [];
}
function K9(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize sales persons", n), t = [];
    }
    Ae.sales_persons_storage = t, Tt("sales_persons_storage", Ae.sales_persons_storage);
  } catch (t) {
    console.error("Failed to set sales persons storage", t);
  }
}
function Fu() {
  return Ae.pos_opening_storage || null;
}
function a1(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize opening storage", n), t = {};
    }
    Ae.pos_opening_storage = t, Tt("pos_opening_storage", Ae.pos_opening_storage);
  } catch (t) {
    console.error("Failed to set opening storage", t);
  }
}
function G9() {
  try {
    Ae.pos_opening_storage = null, Tt("pos_opening_storage", Ae.pos_opening_storage);
  } catch (e) {
    console.error("Failed to clear opening storage", e);
  }
}
function Q9() {
  return Ae.opening_dialog_storage || null;
}
function J9(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize opening dialog", n), t = {};
    }
    Ae.opening_dialog_storage = t, Tt("opening_dialog_storage", Ae.opening_dialog_storage);
  } catch (t) {
    console.error("Failed to set opening dialog storage", t);
  }
}
function X9(e) {
  try {
    return (Ae.tax_template_cache || {})[e] || null;
  } catch (t) {
    return console.error("Failed to get cached tax template", t), null;
  }
}
function Z9(e, t) {
  try {
    const n = Ae.tax_template_cache || {};
    let a;
    try {
      a = JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize tax template", r), a = t ? { ...t } : {};
    }
    n[e] = a, Ae.tax_template_cache = n, Tt("tax_template_cache", Ae.tax_template_cache);
  } catch (n) {
    console.error("Failed to cache tax template", n);
  }
}
function eQ() {
  try {
    return Ae.print_template || "";
  } catch (e) {
    return console.error("Failed to get print template", e), "";
  }
}
function tQ(e) {
  try {
    Ae.print_template = e || "", Tt("print_template", Ae.print_template);
  } catch (t) {
    console.error("Failed to set print template", t);
  }
}
function nQ() {
  try {
    return Ae.terms_and_conditions || "";
  } catch (e) {
    return console.error("Failed to get terms and conditions", e), "";
  }
}
function aQ(e) {
  try {
    Ae.terms_and_conditions = e || "", Tt("terms_and_conditions", Ae.terms_and_conditions);
  } catch (t) {
    console.error("Failed to set terms and conditions", t);
  }
}
function toe(e) {
  try {
    return (Ae.translation_cache || {})[e] || null;
  } catch (t) {
    return console.error("Failed to get cached translations", t), null;
  }
}
function noe(e, t) {
  try {
    const n = Ae.translation_cache || {};
    n[e] = t, Ae.translation_cache = n, Tt("translation_cache", Ae.translation_cache);
  } catch (n) {
    console.error("Failed to cache translations", n);
  }
}
function vy(e) {
  Ae.pos_last_sync_totals = e, Tt("pos_last_sync_totals", Ae.pos_last_sync_totals);
}
function rQ() {
  return Ae.pos_last_sync_totals;
}
function iQ() {
  return !!Ae.tax_inclusive;
}
function aoe(e) {
  Ae.tax_inclusive = !!e, Tt("tax_inclusive", Ae.tax_inclusive);
}
function oQ() {
  return !!Ae.cache_ready;
}
function Yo() {
  return Ae.manual_offline || !1;
}
function sQ(e) {
  Ae.manual_offline = !!e, Tt("manual_offline", Ae.manual_offline);
}
function lQ() {
  sQ(!Ae.manual_offline);
}
function cQ(e = Js) {
  const t = (Ae.offline_invoices || []).length > e, n = (Ae.offline_customers || []).length > e, a = (Ae.offline_payments || []).length > e;
  return t || n || a;
}
function uQ(e = Js) {
  Array.isArray(Ae.offline_invoices) && Ae.offline_invoices.length > e && (Ae.offline_invoices.splice(0, Ae.offline_invoices.length - e), Tt("offline_invoices", Ae.offline_invoices)), Array.isArray(Ae.offline_customers) && Ae.offline_customers.length > e && (Ae.offline_customers.splice(0, Ae.offline_customers.length - e), Tt("offline_customers", Ae.offline_customers)), Array.isArray(Ae.offline_payments) && Ae.offline_payments.length > e && (Ae.offline_payments.splice(0, Ae.offline_payments.length - e), Tt("offline_payments", Ae.offline_payments));
}
async function roe() {
  try {
    await ta(), QO(), gt.isOpen() && await gt.close(), await ji.delete("posawesome_offline"), await gt.open(), n1();
  } catch (e) {
    console.error("Failed to clear IndexedDB cache", e);
  }
  typeof localStorage < "u" && Object.keys(localStorage).forEach((e) => {
    e.startsWith("posa_") && localStorage.removeItem(e);
  }), Ae.offline_invoices = [], Ae.offline_customers = [], Ae.offline_payments = [], Ae.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Ae.uom_cache = {}, Ae.offers_cache = [], Ae.coupons_cache = {}, Ae.customer_balance_cache = {}, Ae.local_stock_cache = {}, Ae.stock_cache_ready = !1, Ae.customer_storage = [], Ae.items_last_sync = null, Ae.customers_last_sync = null, Ae.pos_opening_storage = null, Ae.opening_dialog_storage = null, Ae.sales_persons_storage = [], Ae.item_details_cache = {}, Ae.tax_template_cache = {}, Ae.item_groups_cache = [], Ae.cache_version = $i, Ae.tax_inclusive = !1, Ae.manual_offline = !1, await Lu(), Tt("cache_version", $i);
}
async function z_() {
  QO(), typeof localStorage < "u" && Object.keys(localStorage).forEach((e) => {
    e.startsWith("posa_") && localStorage.removeItem(e);
  }), Ae.offline_invoices = [], Ae.offline_customers = [], Ae.offline_payments = [], Ae.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Ae.uom_cache = {}, Ae.offers_cache = [], Ae.coupons_cache = {}, Ae.customer_balance_cache = {}, Ae.local_stock_cache = {}, Ae.stock_cache_ready = !1, Ae.customer_storage = [], Ae.items_last_sync = null, Ae.customers_last_sync = null, Ae.pos_opening_storage = null, Ae.opening_dialog_storage = null, Ae.sales_persons_storage = [], Ae.item_details_cache = {}, Ae.tax_template_cache = {}, Ae.item_groups_cache = [], Ae.cache_version = $i, Ae.tax_inclusive = !1, Ae.manual_offline = !1, typeof localStorage < "u" && localStorage.setItem("posa_cache_version", $i), await Lu();
  try {
    await ji.delete("posawesome_offline"), await gt.open(), n1();
  } catch (e) {
    console.error("Failed to clear IndexedDB cache", e);
  }
  Tt("cache_version", $i);
}
async function xA() {
  try {
    await ta();
    let e = 0;
    if (typeof localStorage < "u")
      for (let i = 0; i < localStorage.length; i++) {
        const o = localStorage.key(i);
        if (o && o.startsWith("posa_")) {
          const l = localStorage.getItem(o) || "";
          e += (o.length + l.length) * 2;
        }
      }
    let t = 0;
    try {
      if (gt.isOpen())
        for (const i of gt.tables) {
          const o = await M9(i.name);
          t += o.reduce((l, s) => {
            const d = JSON.stringify(s).length * 2;
            return l + d;
          }, 0);
        }
    } catch (i) {
      console.error("Failed to calculate IndexedDB size", i);
    }
    const n = e + t, a = 50 * 1024 * 1024, r = Math.min(100, Math.round(n / a * 100));
    return {
      total: n,
      localStorage: e,
      indexedDB: t,
      percentage: r
    };
  } catch (e) {
    return console.error("Failed to estimate cache usage", e), {
      total: 0,
      localStorage: 0,
      indexedDB: 0,
      percentage: 0
    };
  }
}
async function dQ(e, t) {
  try {
    const n = Ae.local_stock_cache || {}, a = Array.isArray(e) ? e.filter((i) => !n[i.item_code]) : [];
    if (a.length === 0)
      return Ae.stock_cache_ready || (Ae.stock_cache_ready = !0, Tt("stock_cache_ready", Ae.stock_cache_ready)), console.debug("Stock cache already initialized"), console.info("Stock cache initialized with", Object.keys(n).length, "items"), !0;
    console.info("Initializing stock cache for", a.length, "new items");
    const r = await mQ(a, t);
    return r && r.length > 0 ? (r.forEach((i) => {
      i.actual_qty !== void 0 && (n[i.item_code] = {
        actual_qty: i.actual_qty,
        last_updated: (/* @__PURE__ */ new Date()).toISOString()
      });
    }), Ae.local_stock_cache = n, Ae.stock_cache_ready = !0, Tt("local_stock_cache", Ae.local_stock_cache), Tt("stock_cache_ready", Ae.stock_cache_ready), console.info("Stock cache initialized with", Object.keys(n).length, "items"), !0) : !1;
  } catch (n) {
    return console.error("Failed to initialize stock cache:", n), !1;
  }
}
function fQ() {
  return Ae.stock_cache_ready || !1;
}
function ioe(e) {
  Ae.stock_cache_ready = e, Tt("stock_cache_ready", Ae.stock_cache_ready);
}
function ooe(e) {
  if (Ae.pos_opening_storage?.stock_settings?.allow_negative_stock)
    return { isValid: !0, invalidItems: [], errorMessage: "" };
  const n = Ae.local_stock_cache || {}, a = [];
  e.forEach((i) => {
    const o = i.item_code, l = Math.abs(i.qty || 0), s = n[o]?.actual_qty || 0;
    s - l < 0 && a.push({
      item_code: o,
      item_name: i.item_name || o,
      requested_qty: l,
      available_qty: s
    });
  });
  let r = "";
  if (a.length === 1) {
    const i = a[0];
    r = `Not enough stock for ${i.item_name}. You need ${i.requested_qty} but only ${i.available_qty} available.`;
  } else a.length > 1 && (r = `Insufficient stock for multiple items:
` + a.map((i) => `• ${i.item_name}: Need ${i.requested_qty}, Have ${i.available_qty}`).join(`
`));
  return {
    isValid: a.length === 0,
    invalidItems: a,
    errorMessage: r
  };
}
function ZO(e) {
  try {
    const t = Ae.local_stock_cache || {};
    e.forEach((n) => {
      const a = n.item_code;
      if (t[a]) {
        const r = Math.abs(n.qty || 0);
        t[a].actual_qty = Math.max(0, t[a].actual_qty - r), t[a].last_updated = (/* @__PURE__ */ new Date()).toISOString();
      }
    }), Ae.local_stock_cache = t, Tt("local_stock_cache", Ae.local_stock_cache);
  } catch (t) {
    console.error("Failed to update local stock", t);
  }
}
function TA(e) {
  try {
    return (Ae.local_stock_cache || {})[e]?.actual_qty || null;
  } catch {
    return null;
  }
}
function gy(e) {
  try {
    const t = Ae.local_stock_cache || {};
    e.forEach((n) => {
      !n || !n.item_code || n.actual_qty !== void 0 && (t[n.item_code] = {
        actual_qty: n.actual_qty,
        last_updated: (/* @__PURE__ */ new Date()).toISOString()
      });
    }), Ae.local_stock_cache = t, Tt("local_stock_cache", Ae.local_stock_cache);
  } catch (t) {
    console.error("Failed to refresh local stock cache", t);
  }
}
function soe() {
  Ae.local_stock_cache = {}, Tt("local_stock_cache", Ae.local_stock_cache);
}
async function mQ(e, t, n = 100) {
  const a = [];
  try {
    for (let r = 0; r < e.length; r += n) {
      const i = e.slice(r, r + n), o = await new Promise((l, s) => {
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items_details",
          args: {
            pos_profile: JSON.stringify(t),
            items_data: JSON.stringify(i)
          },
          freeze: !1,
          callback: function(d) {
            d.message ? l(d.message) : s(new Error("No response from server"));
          },
          error: function(d) {
            s(d);
          }
        });
      });
      o && a.push(...o);
    }
    return a;
  } catch (r) {
    return console.error("Failed to fetch item stock quantities:", r), null;
  }
}
function loe(e, t) {
  try {
    const n = Ae.local_stock_cache || {};
    e.forEach((a) => {
      const r = a.item_code, i = t.find((o) => o.item_code === a.item_code);
      if (i && i.actual_qty !== void 0) {
        n[r] ? (n[r].actual_qty = i.actual_qty, n[r].last_updated = (/* @__PURE__ */ new Date()).toISOString()) : n[r] = {
          actual_qty: i.actual_qty,
          last_updated: (/* @__PURE__ */ new Date()).toISOString()
        };
        const o = Math.abs(a.qty || 0);
        n[r].actual_qty = Math.max(0, n[r].actual_qty - o);
      }
    }), Ae.local_stock_cache = n, Tt("local_stock_cache", Ae.local_stock_cache);
  } catch (n) {
    console.error("Failed to update local stock with actual quantities", n);
  }
}
function hQ() {
  return Ae.local_stock_cache || {};
}
function coe(e) {
  Ae.local_stock_cache = e || {}, Tt("local_stock_cache", Ae.local_stock_cache);
}
let yy = !1;
function _Q(e) {
  if (!e.invoice || !Array.isArray(e.invoice.items) || !e.invoice.items.length)
    throw new Error("Cart is empty. Add items before saving.");
  const t = "offline_invoices", n = Ae.offline_invoices;
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline invoice", r), r;
  }
  n.push(a), n.length > Js && n.splice(0, n.length - Js), Ae.offline_invoices = n, Tt(t, Ae.offline_invoices), e.invoice && e.invoice.items && ZO(e.invoice.items);
}
function sn() {
  if (typeof window > "u")
    return Ae.manual_offline || !1;
  const { protocol: e, hostname: t, navigator: n } = window, a = n.onLine, r = typeof window.serverOnline == "boolean" ? window.serverOnline : !0, l = !/^(?:\d{1,3}\.){3}\d{1,3}$/.test(t) && !(t === "localhost" || t === "127.0.0.1");
  return Ae.manual_offline ? !0 : !a || !r;
}
function eD() {
  return Ae.offline_invoices;
}
function pQ() {
  Ae.offline_invoices = [], Tt("offline_invoices", Ae.offline_invoices);
}
function vQ(e) {
  Array.isArray(Ae.offline_invoices) && e >= 0 && e < Ae.offline_invoices.length && (Ae.offline_invoices.splice(e, 1), Tt("offline_invoices", Ae.offline_invoices));
}
function $s() {
  return Ae.offline_invoices.length;
}
function IA(e) {
  const t = "offline_payments", n = Ae.offline_payments;
  if (e?.args?.payload?.pos_profile) {
    const r = e.args.payload.pos_profile;
    e.args.payload.pos_profile = {
      posa_use_pos_awesome_payments: r.posa_use_pos_awesome_payments,
      posa_allow_make_new_payments: r.posa_allow_make_new_payments,
      posa_allow_reconcile_payments: r.posa_allow_reconcile_payments,
      posa_allow_mpesa_reconcile_payments: r.posa_allow_mpesa_reconcile_payments,
      posa_force_server_items: r.posa_force_server_items,
      cost_center: r.cost_center,
      posa_cash_mode_of_payment: r.posa_cash_mode_of_payment,
      name: r.name
    };
  }
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline payment", r), r;
  }
  n.push(a), n.length > Js && n.splice(0, n.length - Js), Ae.offline_payments = n, Tt(t, Ae.offline_payments);
}
function gQ() {
  return Ae.offline_payments;
}
function yQ() {
  Ae.offline_payments = [], Tt("offline_payments", Ae.offline_payments);
}
function uoe(e) {
  Array.isArray(Ae.offline_payments) && e >= 0 && e < Ae.offline_payments.length && (Ae.offline_payments.splice(e, 1), Tt("offline_payments", Ae.offline_payments));
}
function bQ() {
  return Ae.offline_payments.length;
}
function wQ(e) {
  const t = "offline_customers", n = Ae.offline_customers;
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline customer", r), r;
  }
  n.push(a), n.length > Js && n.splice(0, n.length - Js), Ae.offline_customers = n, Tt(t, Ae.offline_customers);
}
function kQ(e, t) {
  let n = !1;
  const a = Ae.offline_invoices || [];
  a.forEach((r) => {
    r.invoice && r.invoice.customer === e && (r.invoice.customer = t, r.invoice.customer_name && (r.invoice.customer_name = t), n = !0);
  }), n && (Ae.offline_invoices = a, Tt("offline_invoices", Ae.offline_invoices));
}
function r1() {
  return Ae.offline_customers;
}
function SQ() {
  Ae.offline_customers = [], Tt("offline_customers", Ae.offline_customers);
}
async function tD() {
  if (yy)
    return { pending: $s(), synced: 0, drafted: 0 };
  yy = !0;
  try {
    await nD();
    const e = eD();
    if (!e.length) {
      const o = { pending: 0, synced: 0, drafted: 0 };
      return vy(o), o;
    }
    if (sn())
      return { pending: e.length, synced: 0, drafted: 0 };
    const t = [];
    let n = 0, a = 0;
    for (const o of e)
      try {
        await frappe.call({
          method: "posawesome.posawesome.api.invoices.submit_invoice",
          args: {
            invoice: o.invoice,
            data: o.data
          }
        }), n++;
      } catch (l) {
        console.error("Failed to submit invoice, saving as draft", l);
        try {
          await frappe.call({
            method: "posawesome.posawesome.api.invoices.update_invoice",
            args: { data: o.invoice }
          }), a += 1;
        } catch (s) {
          console.error("Failed to save invoice as draft", s), t.push(o);
        }
      }
    n > 0 && H9();
    const r = t.length;
    r ? (Ae.offline_invoices = t, Tt("offline_invoices", Ae.offline_invoices)) : (pQ(), n > 0 && a === 0 && z9());
    const i = { pending: r, synced: n, drafted: a };
    return vy(r || a ? i : { pending: 0, synced: 0, drafted: 0 }), i;
  } finally {
    yy = !1;
  }
}
async function nD() {
  const e = r1();
  if (!e.length)
    return { pending: 0, synced: 0 };
  if (sn())
    return { pending: e.length, synced: 0 };
  const t = [];
  let n = 0;
  for (const a of e)
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.customers.create_customer",
        args: a.args
      });
      n++, r && r.message && r.message.name && r.message.name !== a.args.customer_name && kQ(a.args.customer_name, r.message.name);
    } catch (r) {
      console.error("Failed to create customer", r), t.push(a);
    }
  return t.length ? (Ae.offline_customers = t, Tt("offline_customers", Ae.offline_customers)) : SQ(), { pending: t.length, synced: n };
}
async function CQ() {
  await nD();
  const e = gQ();
  if (!e.length)
    return { pending: 0, synced: 0 };
  if (sn())
    return { pending: e.length, synced: 0 };
  const t = [];
  let n = 0;
  for (const a of e)
    try {
      await frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: a.args
      }), n++;
    } catch (r) {
      console.error("Failed to submit payment", r), t.push(a);
    }
  return t.length ? (Ae.offline_payments = t, Tt("offline_payments", Ae.offline_payments)) : yQ(), { pending: t.length, synced: n };
}
function EA(e) {
  try {
    let t;
    try {
      t = typeof structuredClone == "function" ? structuredClone(e) : JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize item groups", n), t = [];
    }
    Ae.item_groups_cache = t, Tt("item_groups_cache", Ae.item_groups_cache);
  } catch (t) {
    console.error("Failed to cache item groups", t);
  }
}
function AQ() {
  try {
    return Ae.item_groups_cache || [];
  } catch (e) {
    return console.error("Failed to get cached item groups", e), [];
  }
}
function doe() {
  try {
    Ae.item_groups_cache = [], Tt("item_groups_cache", Ae.item_groups_cache);
  } catch (e) {
    console.error("Failed to clear item groups cache", e);
  }
}
function xQ(e, t) {
  try {
    const n = Ae.customer_balance_cache;
    n[e] = {
      balance: t,
      timestamp: Date.now()
    }, Ae.customer_balance_cache = n, Tt("customer_balance_cache", Ae.customer_balance_cache);
  } catch (n) {
    console.error("Failed to cache customer balance", n);
  }
}
function PA(e) {
  try {
    const n = (Ae.customer_balance_cache || {})[e];
    return n && Date.now() - n.timestamp < 864e5 ? n.balance : null;
  } catch (t) {
    return console.error("Failed to get cached customer balance", t), null;
  }
}
function foe() {
  try {
    Ae.customer_balance_cache = {}, Tt("customer_balance_cache", Ae.customer_balance_cache);
  } catch (e) {
    console.error("Failed to clear customer balance cache", e);
  }
}
function TQ() {
  try {
    const e = Ae.customer_balance_cache || {}, t = Date.now(), n = {};
    Object.keys(e).forEach((a) => {
      const r = e[a];
      r && t - r.timestamp < 24 * 60 * 60 * 1e3 && (n[a] = r);
    }), Ae.customer_balance_cache = n, Tt("customer_balance_cache", Ae.customer_balance_cache);
  } catch (e) {
    console.error("Failed to clear expired customer balances", e);
  }
}
const IQ = {
  name: "OfflineInvoicesDialog",
  mixins: [Oi],
  props: {
    modelValue: Boolean,
    posProfile: {
      type: Object,
      default: () => ({})
    }
  },
  emits: ["update:modelValue", "deleted", "sync-all"],
  data() {
    return {
      dialog: this.modelValue,
      invoices: [],
      headers: [
        {
          title: this.__("Customer"),
          value: "customer",
          align: "start",
          width: "35%"
        },
        {
          title: this.__("Date"),
          value: "posting_date",
          align: "center",
          width: "20%"
        },
        {
          title: this.__("Amount"),
          value: "grand_total",
          align: "end",
          width: "25%"
        },
        {
          title: this.__("Actions"),
          value: "actions",
          align: "center",
          width: "20%",
          sortable: !1
        }
      ]
    };
  },
  watch: {
    modelValue(e) {
      this.dialog = e, e && this.loadInvoices();
    },
    dialog(e) {
      this.$emit("update:modelValue", e);
    }
  },
  methods: {
    loadInvoices() {
      this.invoices = eD();
    },
    removeInvoice(e) {
      this.posProfile.posa_allow_delete_offline_invoice && (vQ(e), this.loadInvoices(), this.$emit("deleted", $s()));
    }
  }
}, EQ = { class: "header-content" }, PQ = { class: "header-icon-wrapper" }, OQ = { class: "header-text" }, DQ = { class: "header-title" }, BQ = { class: "header-subtitle" }, VQ = { class: "header-stats" }, MQ = {
  key: 0,
  class: "empty-state text-center py-12"
}, RQ = { class: "empty-icon-wrapper mb-4" }, LQ = { class: "text-h5 mb-3 text-grey-darken-2 font-weight-medium" }, FQ = { class: "text-body-1 text-grey-darken-1 mb-0" }, NQ = {
  key: 1,
  class: "table-container"
}, UQ = { class: "table-header mb-4" }, $Q = { class: "text-h6 text-grey-darken-2 mb-1" }, qQ = { class: "text-body-2 text-grey" }, HQ = { class: "customer-cell" }, zQ = { class: "font-weight-medium text-grey-darken-2" }, WQ = { class: "text-caption text-grey" }, jQ = { class: "amount-cell text-right" }, YQ = { class: "text-h6 font-weight-bold text-success" }, KQ = { class: "text-caption text-grey" };
function GQ(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-chip"), s = J("v-spacer"), d = J("v-card-title"), u = J("v-divider"), f = J("v-avatar"), _ = J("v-tooltip"), g = J("v-btn"), v = J("v-data-table"), w = J("v-container"), b = J("v-card-text"), p = J("v-card-actions"), y = J("v-card"), S = J("v-dialog"), E = J("v-row");
  return ne(), Fe(E, { justify: "center" }, {
    default: x(() => [
      h(S, {
        modelValue: r.dialog,
        "onUpdate:modelValue": t[2] || (t[2] = (C) => r.dialog = C),
        "max-width": "1000px",
        persistent: ""
      }, {
        default: x(() => [
          h(y, { class: "pos-card offline-invoices-card" }, {
            default: x(() => [
              h(d, { class: "offline-header pa-6" }, {
                default: x(() => [
                  A("div", EQ, [
                    A("div", PQ, [
                      h(o, {
                        class: "header-icon",
                        size: "40"
                      }, {
                        default: x(() => t[3] || (t[3] = [
                          ae("mdi-file-document-multiple")
                        ])),
                        _: 1,
                        __: [3]
                      })
                    ]),
                    A("div", OQ, [
                      A("h3", DQ, W(e.__("Offline Invoices")), 1),
                      A("p", BQ, W(e.__("Manage your offline transactions")), 1),
                      A("div", VQ, [
                        r.invoices.length > 0 ? (ne(), Fe(l, {
                          key: 0,
                          color: "primary",
                          variant: "flat",
                          size: "small",
                          class: "status-chip mr-2"
                        }, {
                          default: x(() => [
                            h(o, {
                              start: "",
                              size: "14"
                            }, {
                              default: x(() => t[4] || (t[4] = [
                                ae("mdi-clock-outline")
                              ])),
                              _: 1,
                              __: [4]
                            }),
                            ae(" " + W(r.invoices.length) + " " + W(e.__("Pending")), 1)
                          ]),
                          _: 1
                        })) : (ne(), Fe(l, {
                          key: 1,
                          color: "success",
                          variant: "flat",
                          size: "small",
                          class: "status-chip"
                        }, {
                          default: x(() => [
                            h(o, {
                              start: "",
                              size: "14"
                            }, {
                              default: x(() => t[5] || (t[5] = [
                                ae("mdi-check-circle")
                              ])),
                              _: 1,
                              __: [5]
                            }),
                            ae(" " + W(e.__("All Synced")), 1)
                          ]),
                          _: 1
                        }))
                      ])
                    ])
                  ]),
                  h(s)
                ]),
                _: 1
              }),
              h(u, { class: "header-divider" }),
              h(b, { class: "pa-0 white-background" }, {
                default: x(() => [
                  h(w, {
                    fluid: "",
                    class: "pa-6"
                  }, {
                    default: x(() => [
                      r.invoices.length ? (ne(), Be("div", NQ, [
                        A("div", UQ, [
                          A("h4", $Q, W(e.__("Pending Invoices")), 1),
                          A("p", qQ, W(e.__("These invoices will be synced when connection is restored")), 1)
                        ]),
                        h(v, {
                          headers: r.headers,
                          items: r.invoices,
                          class: "elevation-0 rounded-lg white-table",
                          "items-per-page": 15,
                          "items-per-page-options": [15, 25, 50]
                        }, {
                          "item.customer": x(({ item: C }) => [
                            A("div", HQ, [
                              h(f, {
                                size: "32",
                                color: "primary",
                                class: "mr-3"
                              }, {
                                default: x(() => [
                                  h(o, {
                                    size: "18",
                                    color: "white"
                                  }, {
                                    default: x(() => t[7] || (t[7] = [
                                      ae("mdi-account")
                                    ])),
                                    _: 1,
                                    __: [7]
                                  })
                                ]),
                                _: 1
                              }),
                              A("div", null, [
                                A("div", zQ, W(C.invoice.customer_name || C.invoice.customer), 1),
                                A("div", WQ, W(e.__("Customer")), 1)
                              ])
                            ])
                          ]),
                          "item.posting_date": x(({ item: C }) => [
                            h(l, {
                              size: "small",
                              color: "info",
                              variant: "tonal",
                              class: "date-chip"
                            }, {
                              default: x(() => [
                                h(o, {
                                  start: "",
                                  size: "14"
                                }, {
                                  default: x(() => t[8] || (t[8] = [
                                    ae("mdi-calendar")
                                  ])),
                                  _: 1,
                                  __: [8]
                                }),
                                ae(" " + W(C.invoice.posting_date), 1)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          "item.grand_total": x(({ item: C }) => [
                            A("div", jQ, [
                              A("div", YQ, W(e.currencySymbol(C.invoice.currency)) + " " + W(e.formatCurrency(
                                C.invoice.grand_total || C.invoice.rounded_total
                              )), 1),
                              A("div", KQ, W(e.__("Total Amount")), 1)
                            ])
                          ]),
                          "item.actions": x(({ index: C }) => [
                            n.posProfile.posa_allow_delete_offline_invoice ? (ne(), Fe(g, {
                              key: 0,
                              icon: "",
                              color: "error",
                              size: "small",
                              variant: "text",
                              onClick: (B) => i.removeInvoice(C),
                              class: "delete-btn"
                            }, {
                              default: x(() => [
                                h(o, { size: "18" }, {
                                  default: x(() => t[9] || (t[9] = [
                                    ae("mdi-delete-outline")
                                  ])),
                                  _: 1,
                                  __: [9]
                                }),
                                h(_, {
                                  activator: "parent",
                                  location: "top"
                                }, {
                                  default: x(() => [
                                    ae(W(e.__("Delete Invoice")), 1)
                                  ]),
                                  _: 1
                                })
                              ]),
                              _: 2
                            }, 1032, ["onClick"])) : ke("", !0)
                          ]),
                          _: 1
                        }, 8, ["headers", "items"])
                      ])) : (ne(), Be("div", MQ, [
                        A("div", RQ, [
                          h(o, {
                            size: "80",
                            color: "success",
                            class: "empty-icon"
                          }, {
                            default: x(() => t[6] || (t[6] = [
                              ae("mdi-check-circle-outline")
                            ])),
                            _: 1,
                            __: [6]
                          })
                        ]),
                        A("h3", LQ, W(e.__("All Caught Up!")), 1),
                        A("p", FQ, W(e.__("No offline invoices pending synchronization")), 1)
                      ]))
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(u),
              h(p, { class: "dialog-actions-container" }, {
                default: x(() => [
                  r.invoices.length > 0 ? (ne(), Fe(g, {
                    key: 0,
                    theme: "dark",
                    variant: "elevated",
                    "prepend-icon": "mdi-sync",
                    onClick: t[0] || (t[0] = (C) => e.$emit("sync-all")),
                    class: "pos-action-btn sync-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      ae(W(e.__("Sync All")), 1)
                    ]),
                    _: 1
                  })) : ke("", !0),
                  h(s),
                  h(g, {
                    color: "error",
                    variant: "flat",
                    onClick: t[1] || (t[1] = (C) => r.dialog = !1),
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      h(o, { start: "" }, {
                        default: x(() => t[10] || (t[10] = [
                          ae("mdi-close-circle-outline")
                        ])),
                        _: 1,
                        __: [10]
                      }),
                      A("span", null, W(e.__("Close")), 1)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const QQ = /* @__PURE__ */ rn(IQ, [["render", GQ]]);
function JQ(e = 1e3, t = 60) {
  const n = Se(0), a = Se([]), r = Se([]), i = Se(0), o = oa({
    cores: navigator.hardwareConcurrency || 1,
    gbMemory: navigator.deviceMemory || void 0
  });
  let l = null, s = performance.now(), d = null;
  function u() {
    const w = performance.now(), b = w - s - e;
    n.value = Math.max(0, b), s = w, a.value.push(n.value), a.value.length > t && a.value.shift();
  }
  function f() {
    performance.memory && (i.value = performance.memory.usedJSHeapSize);
  }
  function _() {
    s = performance.now(), l = window.setInterval(() => {
      u(), f();
    }, e), window.PerformanceObserver && PerformanceObserver.supportedEntryTypes.includes("longtask") && (d = new PerformanceObserver((w) => {
      r.value.push(...w.getEntries()), r.value.length > t && r.value.splice(0, r.value.length - t);
    }), d.observe({ entryTypes: ["longtask"] }));
  }
  function g() {
    l !== null && (clearInterval(l), l = null), d && (d.disconnect(), d = null);
  }
  const v = () => {
    document.hidden ? g() : _();
  };
  return document.addEventListener("visibilitychange", v), di(() => {
    g(), document.removeEventListener("visibilitychange", v);
  }), _(), {
    cpuLag: n,
    history: a,
    longTasks: r,
    memoryUsage: i,
    device: o,
    stop: g
  };
}
function XQ(e = 1e4, t = 60) {
  const n = Se(null), a = Se(null), r = Se(null), i = Se(null), o = Se(null), l = Se([]), s = Se(!0), d = Se(null);
  let u = null;
  async function f() {
    s.value = !0, d.value = null;
    try {
      const _ = await frappe.call({
        method: "posawesome.posawesome.api.utilities.get_server_usage"
      });
      if (_ && _.message) {
        n.value = _.message.cpu_percent, a.value = _.message.memory_percent, r.value = _.message.memory_total, i.value = _.message.memory_used, o.value = _.message.memory_available;
        const g = _.message.uptime;
        l.value.push({
          cpu: n.value,
          memory: a.value,
          memoryTotal: r.value,
          memoryUsed: i.value,
          memoryAvailable: o.value,
          uptime: g
        }), l.value.length > t && l.value.shift();
      } else
        d.value = "No data from server";
    } catch (_) {
      d.value = _.message || _;
    } finally {
      s.value = !1;
    }
  }
  return f(), u = window.setInterval(f, e), di(() => {
    u && clearInterval(u);
  }), { cpu: n, memory: a, memoryTotal: r, memoryUsed: i, memoryAvailable: o, history: l, loading: s, error: d };
}
const ZQ = { class: "cpu-gadget-section mx-1" }, eJ = { class: "cpu-current-lag" }, tJ = { class: "cpu-tooltip-content" }, nJ = { class: "cpu-tooltip-title" }, aJ = { class: "cpu-tooltip-section-title mb-1" }, rJ = { class: "cpu-tooltip-peak mb-1" }, iJ = { class: "cpu-tooltip-sparkline mb-2" }, oJ = {
  width: 180,
  height: 40,
  class: "cpu-sparkline-large"
}, sJ = ["points"], lJ = ["points"], cJ = { class: "cpu-tooltip-detail" }, uJ = {
  key: 0,
  class: "cpu-tooltip-warning"
}, dJ = {
  key: 1,
  class: "cpu-tooltip-detail"
}, fJ = {
  key: 2,
  class: "cpu-tooltip-warning"
}, mJ = { key: 3 }, hJ = { class: "cpu-tooltip-detail" }, _J = { class: "ml-2" }, pJ = { class: "cpu-tooltip-detail" }, vJ = { class: "ml-2" }, gJ = { class: "cpu-tooltip-bar" }, yJ = { class: "cpu-bar-bg" }, bJ = { class: "cpu-bar-label" }, wJ = { class: "cpu-tooltip-detail" }, kJ = { class: "ml-2" }, SJ = { class: "ml-2" }, CJ = { class: "cpu-tooltip-detail" }, AJ = { class: "cpu-tooltip-section-title mb-1" }, xJ = { class: "cpu-tooltip-detail" }, TJ = { class: "cpu-tooltip-detail" }, IJ = { class: "cpu-tooltip-detail" }, EJ = {
  key: 0,
  class: "ml-2"
}, PJ = { class: "cpu-tooltip-tip mt-2" }, OJ = { class: "cpu-tooltip-explanation mt-2" }, DJ = { class: "cpu-tooltip-action mt-2" }, BJ = /* @__PURE__ */ Ha({
  __name: "ServerUsageGadget",
  setup(e) {
    const { cpuLag: t, history: n, memoryUsage: a, device: r } = JQ(1e3, 60), i = Gt("__", (T) => T), {
      cpu: o,
      memory: l,
      memoryTotal: s,
      memoryUsed: d,
      memoryAvailable: u,
      history: f,
      loading: _,
      error: g
    } = XQ(1e4, 60), v = z(() => Math.max(...f.value.map((T) => T.cpu ?? 0), 0)), w = z(() => Math.max(...f.value.map((T) => T.memory ?? 0), 0)), b = Se(null);
    nt(
      f,
      (T) => {
        T.length && T[T.length - 1].uptime != null && (b.value = T[T.length - 1].uptime);
      },
      { immediate: !0, deep: !0 }
    );
    function p(T) {
      if (T == null) return "N/A";
      const P = Math.floor(T / (3600 * 24)), I = Math.floor(T % (3600 * 24) / 3600), M = Math.floor(T % 3600 / 60);
      let V = "";
      return P > 0 && (V += `${P}d `), (I > 0 || P > 0) && (V += `${I}h `), V += `${M}m`, V.trim();
    }
    function y(T) {
      return T == null ? "N/A" : T < 1024 ? `${T} B` : T < 1024 * 1024 ? `${(T / 1024).toFixed(1)} KB` : T < 1024 * 1024 * 1024 ? `${(T / 1024 / 1024).toFixed(1)} MB` : `${(T / 1024 / 1024 / 1024).toFixed(2)} GB`;
    }
    function S(T, P, I) {
      if (!T.length) return "";
      const M = Math.max(...T, 100), V = 0, N = T.length > 1 ? P / (T.length - 1) : P;
      return T.map((q, j) => `${j * N},${I - (q - V) / (M - V || 1) * I}`).join(" ");
    }
    function E(T, P, I) {
      if (!T.length) return "";
      const M = Math.max(...T, 100), V = 0, N = T.length > 1 ? P / (T.length - 1) : P;
      let q = T.map((j, ee) => `${ee * N},${I - (j - V) / (M - V || 1) * I}`).join(" ");
      return q += ` ${P},${I} 0,${I}`, q;
    }
    const C = z(() => S(n.value, 180, 40)), B = z(() => E(n.value, 180, 40)), O = z(() => Math.max(...n.value, 0)), D = z(() => Math.round(Math.min(O.value, 100)));
    return (T, P) => {
      const I = J("v-icon"), M = J("v-divider"), V = J("v-tooltip");
      return ne(), Be("div", ZQ, [
        h(V, { location: "bottom" }, {
          activator: x(({ props: N }) => [
            A("div", He(N, { class: "cpu-meter-container" }), [
              h(I, {
                size: "22",
                color: "primary"
              }, {
                default: x(() => P[0] || (P[0] = [
                  ae("mdi-server")
                ])),
                _: 1,
                __: [0]
              }),
              A("span", eJ, W(fe(t).toFixed(1)) + " ms", 1)
            ], 16)
          ]),
          default: x(() => [
            A("div", tJ, [
              A("div", nJ, [
                h(I, {
                  size: "16",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => P[1] || (P[1] = [
                    ae("mdi-server")
                  ])),
                  _: 1,
                  __: [1]
                }),
                ae(" " + W(fe(i)("Server Health")), 1)
              ]),
              h(M, { class: "my-2" }),
              A("div", aJ, W(fe(i)("Server Metrics")), 1),
              A("div", rJ, [
                h(I, {
                  size: "14",
                  color: "success",
                  class: "mr-1"
                }, {
                  default: x(() => P[2] || (P[2] = [
                    ae("mdi-arrow-up-bold")
                  ])),
                  _: 1,
                  __: [2]
                }),
                ae(" " + W(fe(i)("Peak:")) + " ", 1),
                A("b", null, W(O.value.toFixed(1)) + " ms", 1),
                ae(" (" + W(D.value) + "%) ", 1)
              ]),
              A("div", iJ, [
                (ne(), Be("svg", oJ, [
                  P[3] || (P[3] = A("defs", null, [
                    A("linearGradient", {
                      id: "cpuAreaGradient",
                      x1: "0",
                      y1: "0",
                      x2: "0",
                      y2: "1"
                    }, [
                      A("stop", {
                        offset: "0%",
                        "stop-color": "#4caf50",
                        "stop-opacity": "0.35"
                      }),
                      A("stop", {
                        offset: "100%",
                        "stop-color": "#4caf50",
                        "stop-opacity": "0"
                      })
                    ])
                  ], -1)),
                  A("polyline", {
                    points: C.value,
                    fill: "none",
                    stroke: "#4caf50",
                    "stroke-width": "2"
                  }, null, 8, sJ),
                  A("polygon", {
                    points: B.value,
                    fill: "url(#cpuAreaGradient)",
                    stroke: "none"
                  }, null, 8, lJ)
                ]))
              ]),
              A("div", cJ, [
                h(I, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => P[4] || (P[4] = [
                    ae("mdi-chip")
                  ])),
                  _: 1,
                  __: [4]
                }),
                ae(" " + W(fe(i)("Current Event Loop Lag:")) + " ", 1),
                A("b", null, W(fe(t).toFixed(1)), 1),
                P[5] || (P[5] = ae(" ms "))
              ]),
              fe(t) >= 80 ? (ne(), Be("div", uJ, [
                h(I, {
                  size: "14",
                  color: "error",
                  class: "mr-1"
                }, {
                  default: x(() => P[6] || (P[6] = [
                    ae("mdi-alert")
                  ])),
                  _: 1,
                  __: [6]
                }),
                ae(" " + W(fe(i)("Warning: High lag may indicate heavy processing or browser slowness.")), 1)
              ])) : ke("", !0),
              fe(_) ? (ne(), Be("div", dJ, W(fe(i)("Loading server CPU/memory usage...")), 1)) : fe(g) ? (ne(), Be("div", fJ, W(fe(g)), 1)) : (ne(), Be("div", mJ, [
                A("div", hJ, [
                  h(I, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => P[7] || (P[7] = [
                      ae("mdi-chip")
                    ])),
                    _: 1,
                    __: [7]
                  }),
                  ae(" " + W(fe(i)("Server CPU Usage:")) + " ", 1),
                  A("b", null, W(fe(o) !== null ? fe(o).toFixed(1) + "%" : "N/A"), 1),
                  A("span", _J, [
                    ae(W(fe(i)("Peak Server:")) + " ", 1),
                    A("b", null, W(v.value.toFixed(1)) + "%", 1)
                  ])
                ]),
                A("div", pJ, [
                  h(I, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => P[8] || (P[8] = [
                      ae("mdi-memory")
                    ])),
                    _: 1,
                    __: [8]
                  }),
                  ae(" " + W(fe(i)("Server Memory Usage:")) + " ", 1),
                  A("b", null, W(fe(l) !== null ? fe(l).toFixed(1) + "%" : "N/A"), 1),
                  A("span", vJ, [
                    ae(W(fe(i)("Peak Memory:")) + " ", 1),
                    A("b", null, W(w.value.toFixed(1)) + "%", 1)
                  ])
                ]),
                A("div", gJ, [
                  A("div", yJ, [
                    A("div", {
                      class: "cpu-bar-fill",
                      style: Xe({
                        width: (fe(l) || 0) + "%",
                        background: "linear-gradient(90deg,#1976d2 0%,#42a5f5 100%)"
                      })
                    }, null, 4)
                  ]),
                  A("span", bJ, W(fe(l) !== null ? fe(l).toFixed(1) + "%" : "N/A"), 1)
                ]),
                A("div", wJ, [
                  h(I, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => P[9] || (P[9] = [
                      ae("mdi-database")
                    ])),
                    _: 1,
                    __: [9]
                  }),
                  ae(" " + W(fe(i)("Total:")) + " ", 1),
                  A("b", null, W(y(fe(s))), 1),
                  A("span", kJ, [
                    ae(W(fe(i)("Used:")) + " ", 1),
                    A("b", null, W(y(fe(d))), 1)
                  ]),
                  A("span", SJ, [
                    ae(W(fe(i)("Available:")) + " ", 1),
                    A("b", null, W(y(fe(u))), 1)
                  ])
                ]),
                A("div", CJ, [
                  h(I, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: x(() => P[10] || (P[10] = [
                      ae("mdi-timer-outline")
                    ])),
                    _: 1,
                    __: [10]
                  }),
                  ae(" " + W(fe(i)("Server Uptime:")) + " ", 1),
                  A("b", null, W(p(b.value)), 1)
                ])
              ])),
              h(M, { class: "my-2" }),
              A("div", AJ, W(fe(i)("Client Metrics")), 1),
              A("div", xJ, [
                h(I, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => P[11] || (P[11] = [
                    ae("mdi-monitor")
                  ])),
                  _: 1,
                  __: [11]
                }),
                ae(" " + W(fe(i)("Client CPU Lag:")) + " ", 1),
                A("b", null, W(fe(t).toFixed(1)), 1),
                P[12] || (P[12] = ae(" ms "))
              ]),
              A("div", TJ, [
                h(I, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => P[13] || (P[13] = [
                    ae("mdi-memory")
                  ])),
                  _: 1,
                  __: [13]
                }),
                ae(" " + W(fe(i)("Client Memory Usage:")) + " ", 1),
                A("b", null, W(y(fe(a))), 1)
              ]),
              A("div", IJ, [
                h(I, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => P[14] || (P[14] = [
                    ae("mdi-chip")
                  ])),
                  _: 1,
                  __: [14]
                }),
                ae(" " + W(fe(i)("CPU Cores:")) + " ", 1),
                A("b", null, W(fe(r).cores), 1),
                fe(r).gbMemory ? (ne(), Be("span", EJ, [
                  ae(W(fe(i)("Device Memory:")) + " ", 1),
                  A("b", null, W(fe(r).gbMemory) + " GB", 1)
                ])) : ke("", !0)
              ]),
              h(M, { class: "my-2" }),
              A("div", PJ, [
                h(I, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => P[15] || (P[15] = [
                    ae("mdi-lightbulb-on-outline")
                  ])),
                  _: 1,
                  __: [15]
                }),
                ae(" " + W(fe(i)("Tip: Close unused tabs or apps to reduce lag.")), 1)
              ]),
              A("div", OJ, [
                h(I, {
                  size: "14",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: x(() => P[16] || (P[16] = [
                    ae("mdi-chip")
                  ])),
                  _: 1,
                  __: [16]
                }),
                ae(" " + W(fe(i)("Event-loop lag measures how busy your browser is. Lower is better.")), 1)
              ]),
              A("div", DJ, [
                h(I, {
                  size: "14",
                  class: "mr-1"
                }, {
                  default: x(() => P[17] || (P[17] = [
                    ae("mdi-refresh")
                  ])),
                  _: 1,
                  __: [17]
                }),
                ae(" " + W(fe(i)("Updates automatically")), 1)
              ])
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
}), VJ = /* @__PURE__ */ rn(BJ, [["__scopeId", "data-v-70efd328"]]);
function MJ(e = 1e4, t = 60) {
  const n = Se(null), a = Se([]), r = Se(!0), i = Se(null);
  let o = null;
  async function l() {
    r.value = !0, i.value = null;
    try {
      const s = await frappe.call({
        method: "posawesome.posawesome.api.utilities.get_database_usage"
      });
      s && s.message ? (n.value = s.message, a.value.push(s.message), a.value.length > t && a.value.shift()) : i.value = "No data from server";
    } catch (s) {
      i.value = s.message || s;
    } finally {
      r.value = !1;
    }
  }
  return l(), o = window.setInterval(l, e), di(() => {
    o && clearInterval(o);
  }), { dbStats: n, history: a, loading: r, error: i };
}
const RJ = { class: "db-gadget-section mx-1" }, LJ = { class: "db-current-size" }, FJ = { class: "db-tooltip-content p-3 min-w-[220px]" }, NJ = { class: "db-tooltip-title flex items-center font-semibold text-[14px] mb-2" }, UJ = {
  key: 0,
  class: "db-tooltip-detail"
}, $J = {
  key: 1,
  class: "db-tooltip-warning"
}, qJ = { key: 2 }, HJ = { class: "db-tooltip-section-title mb-1" }, zJ = { class: "db-tooltip-sparkline mb-2" }, WJ = {
  width: 120,
  height: 32,
  class: "db-sparkline"
}, jJ = ["points"], YJ = { class: "db-tooltip-detail flex items-center mb-1" }, KJ = { class: "ml-2" }, GJ = { class: "db-tooltip-section-title mb-1" }, QJ = { class: "db-tooltip-detail flex items-center mb-1" }, JJ = { class: "ml-2 flex items-center" }, XJ = { class: "ml-2 flex items-center" }, ZJ = { class: "db-tooltip-detail flex items-center mb-1" }, eX = { class: "ml-2 flex items-center" }, tX = { key: 0 }, nX = { class: "db-tooltip-section-title mb-1 flex items-center" }, aX = { class: "db-top-tables ml-2" }, rX = { class: "db-tooltip-tip mt-2 flex items-center" }, iX = { class: "db-tooltip-explanation mt-2 flex items-center" }, oX = {
  __name: "DatabaseUsageGadget",
  setup(e) {
    const { dbStats: t, history: n, loading: a, error: r } = MJ(1e4, 30), i = Gt("__", (d) => d), o = z(() => l(t.value?.db_size));
    function l(d) {
      return d == null ? "N/A" : d < 1024 ? `${d} B` : d < 1024 * 1024 ? `${(d / 1024).toFixed(1)} KB` : d < 1024 * 1024 * 1024 ? `${(d / 1024 / 1024).toFixed(1)} MB` : `${(d / 1024 / 1024 / 1024).toFixed(2)} GB`;
    }
    const s = z(() => {
      const d = n.value.map((w) => w.db_size || 0), u = 120, f = 32;
      if (!d.length) return "";
      const _ = Math.max(...d, 100), g = 0, v = d.length > 1 ? u / (d.length - 1) : u;
      return d.map((w, b) => `${b * v},${f - (w - g) / (_ - g || 1) * f}`).join(" ");
    });
    return (d, u) => {
      const f = J("v-icon"), _ = J("v-divider"), g = J("v-tooltip");
      return ne(), Be("div", RJ, [
        h(g, { location: "bottom" }, {
          activator: x(({ props: v }) => [
            A("div", He(v, { class: "db-meter-container" }), [
              h(f, {
                size: "22",
                color: "info"
              }, {
                default: x(() => u[0] || (u[0] = [
                  ae("mdi-database")
                ])),
                _: 1,
                __: [0]
              }),
              A("span", LJ, W(o.value), 1)
            ], 16)
          ]),
          default: x(() => [
            A("div", FJ, [
              A("div", NJ, [
                h(f, {
                  size: "16",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: x(() => u[1] || (u[1] = [
                    ae("mdi-database-settings")
                  ])),
                  _: 1,
                  __: [1]
                }),
                ae(" " + W(fe(i)("Database Health")), 1)
              ]),
              h(_, { class: "my-2" }),
              fe(a) ? (ne(), Be("div", UJ, W(fe(i)("Loading database stats...")), 1)) : fe(r) ? (ne(), Be("div", $J, W(fe(r)), 1)) : (ne(), Be("div", qJ, [
                A("div", HJ, W(fe(i)("Database Info")), 1),
                A("div", zJ, [
                  (ne(), Be("svg", WJ, [
                    A("polyline", {
                      points: s.value,
                      fill: "none",
                      stroke: "#1976d2",
                      "stroke-width": "2"
                    }, null, 8, jJ)
                  ]))
                ]),
                A("div", YJ, [
                  h(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: x(() => u[2] || (u[2] = [
                      ae("mdi-database-settings")
                    ])),
                    _: 1,
                    __: [2]
                  }),
                  A("b", null, W(fe(t).db_engine), 1),
                  A("span", KJ, W(fe(t).db_version), 1)
                ]),
                h(_, { class: "my-2" }),
                A("div", GJ, W(fe(i)("Usage Stats")), 1),
                A("div", QJ, [
                  h(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: x(() => u[3] || (u[3] = [
                      ae("mdi-database")
                    ])),
                    _: 1,
                    __: [3]
                  }),
                  ae(" " + W(fe(i)("Size:")) + " ", 1),
                  A("b", null, W(o.value), 1),
                  A("span", JJ, [
                    h(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: x(() => u[4] || (u[4] = [
                        ae("mdi-table")
                      ])),
                      _: 1,
                      __: [4]
                    }),
                    ae(W(fe(i)("Tables:")) + " ", 1),
                    A("b", null, W(fe(t).db_table_count), 1)
                  ]),
                  A("span", XJ, [
                    h(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: x(() => u[5] || (u[5] = [
                        ae("mdi-format-list-numbered")
                      ])),
                      _: 1,
                      __: [5]
                    }),
                    ae(W(fe(i)("Rows:")) + " ", 1),
                    A("b", null, W(fe(t).db_total_rows), 1)
                  ])
                ]),
                A("div", ZJ, [
                  h(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: x(() => u[6] || (u[6] = [
                      ae("mdi-connection")
                    ])),
                    _: 1,
                    __: [6]
                  }),
                  ae(" " + W(fe(i)("Connections:")) + " ", 1),
                  A("b", null, W(fe(t).db_connections), 1),
                  A("span", eX, [
                    h(f, {
                      size: "14",
                      color: "warning",
                      class: "mr-1"
                    }, {
                      default: x(() => u[7] || (u[7] = [
                        ae("mdi-timer-sand")
                      ])),
                      _: 1,
                      __: [7]
                    }),
                    ae(W(fe(i)("Slow Queries:")) + " ", 1),
                    A("b", null, W(fe(t).db_slow_queries), 1)
                  ])
                ]),
                h(_, { class: "my-2" }),
                fe(t).db_top_tables && fe(t).db_top_tables.length ? (ne(), Be("div", tX, [
                  A("div", nX, [
                    h(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: x(() => u[8] || (u[8] = [
                        ae("mdi-database-outline")
                      ])),
                      _: 1,
                      __: [8]
                    }),
                    ae(" " + W(fe(i)("Top Tables")), 1)
                  ]),
                  A("ul", aX, [
                    (ne(!0), Be(Qe, null, un(fe(t).db_top_tables, (v) => (ne(), Be("li", {
                      key: v.name,
                      class: "flex items-center mb-1"
                    }, [
                      h(f, {
                        size: "12",
                        color: "info",
                        class: "mr-1"
                      }, {
                        default: x(() => u[9] || (u[9] = [
                          ae("mdi-table")
                        ])),
                        _: 1,
                        __: [9]
                      }),
                      A("b", null, W(v.name), 1),
                      ae(": " + W(l(v.size)), 1)
                    ]))), 128))
                  ])
                ])) : ke("", !0)
              ])),
              h(_, { class: "my-2" }),
              A("div", rX, [
                h(f, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: x(() => u[10] || (u[10] = [
                    ae("mdi-lightbulb-on-outline")
                  ])),
                  _: 1,
                  __: [10]
                }),
                ae(" " + W(fe(i)("Tip: Monitor slow queries and table size for optimal performance.")), 1)
              ]),
              A("div", iX, [
                h(f, {
                  size: "14",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: x(() => u[11] || (u[11] = [
                    ae("mdi-database")
                  ])),
                  _: 1,
                  __: [11]
                }),
                ae(" " + W(fe(i)("Database health affects overall system speed and reliability.")), 1)
              ])
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
}, sX = /* @__PURE__ */ rn(oX, [["__scopeId", "data-v-b6c4c127"]]);
async function lX(e = []) {
  if (!(typeof localStorage > "u"))
    try {
      e.length ? e.forEach((t) => localStorage.removeItem(t)) : Object.keys(localStorage).forEach((t) => localStorage.removeItem(t)), console.log("[ClearAllCaches] localStorage cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear localStorage", t), t;
    }
}
async function cX(e = []) {
  if (!(typeof sessionStorage > "u"))
    try {
      e.length ? e.forEach((t) => sessionStorage.removeItem(t)) : sessionStorage.clear(), console.log("[ClearAllCaches] sessionStorage cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear sessionStorage", t), t;
    }
}
async function uX(e = []) {
  if (!(typeof indexedDB > "u"))
    try {
      !e.length && indexedDB.databases && (e = (await indexedDB.databases()).map((n) => n.name).filter(Boolean)), await Promise.all(
        e.map(
          (t) => new Promise((n, a) => {
            const r = indexedDB.deleteDatabase(t);
            r.onsuccess = () => n(), r.onblocked = () => n(), r.onerror = () => a(r.error);
          })
        )
      ), console.log("[ClearAllCaches] IndexedDB cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear IndexedDB", t), t;
    }
}
async function dX(e = []) {
  if (!(typeof caches > "u"))
    try {
      e.length || (e = await caches.keys()), await Promise.all(e.map((t) => caches.delete(t))), console.log("[ClearAllCaches] Cache API cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear Cache API", t), t;
    }
}
async function Kb(e = {
  confirmBeforeClear: !0,
  onSuccess: () => {
  },
  onError: () => {
  },
  specificKeys: [],
  specificDatabases: [],
  specificCaches: [],
  skipStorage: []
}) {
  const t = Object.assign(
    {
      confirmBeforeClear: !0,
      onSuccess: () => {
      },
      onError: () => {
      },
      specificKeys: [],
      specificDatabases: [],
      specificCaches: [],
      skipStorage: []
    },
    e || {}
  );
  try {
    if (t.confirmBeforeClear && typeof window < "u" && !window.confirm("Are you sure you want to clear application cache?"))
      return;
    const n = [];
    t.skipStorage.includes("localStorage") || n.push(lX(t.specificKeys)), t.skipStorage.includes("sessionStorage") || n.push(cX(t.specificKeys)), t.skipStorage.includes("indexedDB") || n.push(uX(t.specificDatabases)), t.skipStorage.includes("caches") || n.push(dX(t.specificCaches)), await Promise.all(n), t.onSuccess();
  } catch (n) {
    t.onError(n);
  }
}
typeof window < "u" && (document.addEventListener("keydown", (e) => {
  e.ctrlKey && e.shiftKey && e.code === "KeyR" && (e.preventDefault(), Kb().catch(() => {
  }));
}), document.addEventListener("DOMContentLoaded", () => {
  const e = document.getElementById("clear-cache-btn");
  e && e.addEventListener("click", () => Kb().catch(() => {
  }));
}));
const fX = {
  name: "NavBar",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  components: {
    NavbarAppBar: iG,
    NavbarDrawer: fG,
    NavbarMenu: LG,
    StatusIndicator: HG,
    CacheUsageMeter: c9,
    AboutDialog: B9,
    OfflineInvoicesDialog: QQ,
    ServerUsageGadget: VJ,
    DatabaseUsageGadget: sX
  },
  props: {
    posProfile: {
      type: Object,
      default: () => ({})
    },
    pendingInvoices: {
      type: Number,
      default: 0
    },
    lastInvoiceId: String,
    networkOnline: Boolean,
    serverOnline: Boolean,
    serverConnecting: Boolean,
    isIpHost: Boolean,
    syncTotals: {
      type: Object,
      default: () => ({ pending: 0, synced: 0, drafted: 0 })
    },
    manualOffline: Boolean,
    isDark: Boolean,
    cacheUsage: {
      type: Number,
      default: 0
    },
    cacheUsageLoading: {
      type: Boolean,
      default: !1
    },
    cacheUsageDetails: {
      type: Object,
      default: () => ({ total: 0, indexedDB: 0, localStorage: 0 })
    },
    cacheReady: Boolean,
    loadingProgress: {
      type: Number,
      default: 0
    },
    loadingActive: {
      type: Boolean,
      default: !1
    },
    loadingMessage: {
      type: String,
      default: "Loading app data..."
    }
  },
  data() {
    return {
      drawer: !1,
      mini: !0,
      item: 0,
      items: [
        { text: "POS", icon: "mdi-network-pos" },
        { text: "Payments", icon: "mdi-credit-card" }
      ],
      company: "POS Awesome",
      companyImg: GO,
      showAboutDialog: !1,
      showOfflineInvoices: !1,
      freeze: !1,
      freezeTitle: "",
      freezeMsg: "",
      snack: !1,
      snackText: "",
      snackColor: "success",
      snackTimeout: 3e3
    };
  },
  computed: {
    appBarColor() {
      return this.isDark ? this.$vuetify.theme.themes.dark.colors.surface : "white";
    }
  },
  mounted() {
    this.initializeNavbar(), this.eventBus && (this.eventBus.on("show_message", this.showMessage), this.eventBus.on("freeze", this.handleFreeze), this.eventBus.on("unfreeze", this.handleUnfreeze), this.eventBus.on("set_company", this.handleSetCompany));
  },
  unmounted() {
    this.eventBus && (this.eventBus.off("show_message", this.showMessage), this.eventBus.off("freeze", this.handleFreeze), this.eventBus.off("unfreeze", this.handleUnfreeze), this.eventBus.off("set_company", this.handleSetCompany));
  },
  methods: {
    initializeNavbar() {
      frappe.boot && frappe.boot.sysdefaults && frappe.boot.sysdefaults.company && (this.company = frappe.boot.sysdefaults.company), frappe.boot && frappe.boot.website_settings && frappe.boot.website_settings.app_logo ? this.companyImg = frappe.boot.website_settings.app_logo : frappe.boot && frappe.boot.website_settings && frappe.boot.website_settings.banner_image && (this.companyImg = frappe.boot.website_settings.banner_image), this.$forceUpdate();
    },
    handleNavClick() {
      this.drawer = !this.drawer, this.$emit("nav-click");
    },
    goDesk() {
      window.location.href = "/app";
    },
    changePage(e) {
      this.$emit("change-page", e);
    },
    openCloseShift() {
      this.$emit("close-shift");
    },
    printLastInvoice() {
      this.$emit("print-last-invoice");
    },
    syncPendingInvoices() {
      this.$emit("sync-invoices");
    },
    toggleManualOffline() {
      this.$emit("toggle-offline");
    },
    async clearCache() {
      if (sn()) {
        this.showMessage({
          color: "warning",
          title: this.__("Cannot clear cache while offline")
        });
        return;
      }
      try {
        let e = null;
        typeof localStorage < "u" && (e = localStorage.getItem("use_western_numerals")), await z_(), await Kb({ confirmBeforeClear: !1 }).catch(() => {
        }), e !== null && typeof localStorage < "u" && localStorage.setItem("use_western_numerals", e), this.showMessage({
          color: "success",
          title: this.__("Cache cleared successfully")
        });
      } catch (e) {
        console.error("Failed to clear cache", e), this.showMessage({
          color: "error",
          title: this.__("Failed to clear cache")
        });
      } finally {
        setTimeout(() => location.reload(), 1e3);
      }
    },
    toggleTheme() {
      this.$emit("toggle-theme");
    },
    logOut() {
      this.$emit("logout");
    },
    refreshCacheUsage() {
      this.$emit("refresh-cache-usage");
    },
    updateAfterDelete() {
      this.$emit("update-after-delete");
    },
    showMessage(e) {
      this.snackText = e.title, this.snackColor = e.color || "success", this.snack = !0;
    },
    handleFreeze(e) {
      this.freezeTitle = e?.title || "", this.freezeMsg = e?.message || "", this.freeze = !0;
    },
    handleUnfreeze() {
      this.freeze = !1, this.freezeTitle = "", this.freezeMsg = "";
    },
    handleSetCompany(e) {
      typeof e == "string" ? this.company = e : e && e.name && (this.company = e.name, e.company_image && (this.companyImg = e.company_image));
    },
    handleMouseLeave() {
      this.drawer && (clearTimeout(this._closeTimeout), this._closeTimeout = setTimeout(() => {
        this.drawer = !1, this.mini = !0;
      }, 250));
    }
  },
  emits: [
    "nav-click",
    "change-page",
    "close-shift",
    "print-last-invoice",
    "sync-invoices",
    "toggle-offline",
    "toggle-theme",
    "logout",
    "refresh-cache-usage",
    "update-after-delete"
  ]
};
function mX(e, t, n, a, r, i) {
  const o = J("StatusIndicator"), l = J("CacheUsageMeter"), s = J("ServerUsageGadget"), d = J("DatabaseUsageGadget"), u = J("NavbarMenu"), f = J("NavbarAppBar"), _ = J("NavbarDrawer"), g = J("AboutDialog"), v = J("v-card-title"), w = J("v-card-text"), b = J("v-card"), p = J("v-dialog"), y = J("OfflineInvoicesDialog"), S = J("v-btn"), E = J("v-snackbar");
  return ne(), Be("nav", {
    class: Ee(a.rtlClasses)
  }, [
    h(f, {
      "pos-profile": n.posProfile,
      "pending-invoices": n.pendingInvoices,
      "is-dark": n.isDark,
      "loading-progress": n.loadingProgress,
      "loading-active": n.loadingActive,
      "loading-message": n.loadingMessage,
      onNavClick: i.handleNavClick,
      onGoDesk: i.goDesk,
      onShowOfflineInvoices: t[1] || (t[1] = (C) => r.showOfflineInvoices = !0)
    }, {
      "status-indicator": x(() => [
        h(o, {
          "network-online": n.networkOnline,
          "server-online": n.serverOnline,
          "server-connecting": n.serverConnecting,
          "is-ip-host": n.isIpHost,
          "sync-totals": n.syncTotals,
          "cache-ready": n.cacheReady
        }, null, 8, ["network-online", "server-online", "server-connecting", "is-ip-host", "sync-totals", "cache-ready"])
      ]),
      "cache-usage-meter": x(() => [
        h(l, {
          "cache-usage": n.cacheUsage,
          "cache-usage-loading": n.cacheUsageLoading,
          "cache-usage-details": n.cacheUsageDetails,
          onRefresh: i.refreshCacheUsage
        }, null, 8, ["cache-usage", "cache-usage-loading", "cache-usage-details", "onRefresh"])
      ]),
      "cpu-gadget": x(() => [
        h(s)
      ]),
      "db-usage-gadget": x(() => [
        h(d)
      ]),
      menu: x(() => [
        h(u, {
          "pos-profile": n.posProfile,
          "last-invoice-id": n.lastInvoiceId,
          "manual-offline": n.manualOffline,
          "network-online": n.networkOnline,
          "server-online": n.serverOnline,
          "is-dark": n.isDark,
          onCloseShift: i.openCloseShift,
          onPrintLastInvoice: i.printLastInvoice,
          onSyncInvoices: i.syncPendingInvoices,
          onToggleOffline: i.toggleManualOffline,
          onClearCache: i.clearCache,
          onShowAbout: t[0] || (t[0] = (C) => r.showAboutDialog = !0),
          onToggleTheme: i.toggleTheme,
          onLogout: i.logOut
        }, null, 8, ["pos-profile", "last-invoice-id", "manual-offline", "network-online", "server-online", "is-dark", "onCloseShift", "onPrintLastInvoice", "onSyncInvoices", "onToggleOffline", "onClearCache", "onToggleTheme", "onLogout"])
      ]),
      _: 1
    }, 8, ["pos-profile", "pending-invoices", "is-dark", "loading-progress", "loading-active", "loading-message", "onNavClick", "onGoDesk"]),
    h(_, {
      drawer: r.drawer,
      "onUpdate:drawer": t[2] || (t[2] = (C) => r.drawer = C),
      item: r.item,
      "onUpdate:item": t[3] || (t[3] = (C) => r.item = C),
      company: r.company,
      "company-img": r.companyImg,
      items: r.items,
      "is-dark": n.isDark,
      onChangePage: i.changePage
    }, null, 8, ["drawer", "item", "company", "company-img", "items", "is-dark", "onChangePage"]),
    h(g, {
      modelValue: r.showAboutDialog,
      "onUpdate:modelValue": t[4] || (t[4] = (C) => r.showAboutDialog = C)
    }, null, 8, ["modelValue"]),
    h(p, {
      modelValue: r.freeze,
      "onUpdate:modelValue": t[5] || (t[5] = (C) => r.freeze = C),
      persistent: "",
      "max-width": "290"
    }, {
      default: x(() => [
        h(b, null, {
          default: x(() => [
            h(v, { class: "text-h5" }, {
              default: x(() => [
                ae(W(r.freezeTitle), 1)
              ]),
              _: 1
            }),
            h(w, null, {
              default: x(() => [
                ae(W(r.freezeMsg), 1)
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    h(y, {
      modelValue: r.showOfflineInvoices,
      "onUpdate:modelValue": t[6] || (t[6] = (C) => r.showOfflineInvoices = C),
      "pos-profile": n.posProfile,
      onDeleted: i.updateAfterDelete,
      onSyncAll: i.syncPendingInvoices
    }, null, 8, ["modelValue", "pos-profile", "onDeleted", "onSyncAll"]),
    h(E, {
      modelValue: r.snack,
      "onUpdate:modelValue": t[8] || (t[8] = (C) => r.snack = C),
      timeout: r.snackTimeout,
      color: r.snackColor,
      location: a.isRtl ? "top left" : "top right"
    }, {
      actions: x(() => [
        h(S, {
          color: "white",
          variant: "text",
          onClick: t[7] || (t[7] = (C) => r.snack = !1)
        }, {
          default: x(() => [
            ae(W(e.__("Close")), 1)
          ]),
          _: 1
        })
      ]),
      default: x(() => [
        ae(W(r.snackText) + " ", 1)
      ]),
      _: 1
    }, 8, ["modelValue", "timeout", "color", "location"])
  ], 2);
}
const hX = /* @__PURE__ */ rn(fX, [["render", mX], ["__scopeId", "data-v-a0ea23e7"]]);
var Fh = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function aD(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var jd = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var _X = jd.exports, OA;
function pX() {
  return OA || (OA = 1, function(e, t) {
    (function() {
      var n, a = "4.17.21", r = 200, i = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", o = "Expected a function", l = "Invalid `variable` option passed into `_.template`", s = "__lodash_hash_undefined__", d = 500, u = "__lodash_placeholder__", f = 1, _ = 2, g = 4, v = 1, w = 2, b = 1, p = 2, y = 4, S = 8, E = 16, C = 32, B = 64, O = 128, D = 256, T = 512, P = 30, I = "...", M = 800, V = 16, N = 1, q = 2, j = 3, ee = 1 / 0, de = 9007199254740991, Z = 17976931348623157e292, F = NaN, Y = 4294967295, se = Y - 1, X = Y >>> 1, he = [
        ["ary", O],
        ["bind", b],
        ["bindKey", p],
        ["curry", S],
        ["curryRight", E],
        ["flip", T],
        ["partial", C],
        ["partialRight", B],
        ["rearg", D]
      ], ve = "[object Arguments]", pe = "[object Array]", H = "[object AsyncFunction]", we = "[object Boolean]", Me = "[object Date]", Re = "[object DOMException]", ce = "[object Error]", te = "[object Function]", G = "[object GeneratorFunction]", le = "[object Map]", K = "[object Number]", Ce = "[object Null]", Te = "[object Object]", ie = "[object Promise]", ge = "[object Proxy]", Pe = "[object RegExp]", Ie = "[object Set]", Je = "[object String]", _e = "[object Symbol]", $e = "[object Undefined]", Ze = "[object WeakMap]", _t = "[object WeakSet]", It = "[object ArrayBuffer]", rt = "[object DataView]", Dt = "[object Float32Array]", en = "[object Float64Array]", zn = "[object Int8Array]", na = "[object Int16Array]", Na = "[object Int32Array]", ya = "[object Uint8Array]", Wn = "[object Uint8ClampedArray]", Vn = "[object Uint16Array]", Ja = "[object Uint32Array]", xe = /\b__p \+= '';/g, ze = /\b(__p \+=) '' \+/g, ft = /(__e\(.*?\)|\b__t\)) \+\n'';/g, it = /&(?:amp|lt|gt|quot|#39);/g, je = /[&<>"']/g, st = RegExp(it.source), pt = RegExp(je.source), xa = /<%-([\s\S]+?)%>/g, Ua = /<%([\s\S]+?)%>/g, _r = /<%=([\s\S]+?)%>/g, Wa = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, Qi = /^\w*$/, sl = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, Ji = /[\\^$.*+?()[\]{}|]/g, lm = RegExp(Ji.source), wc = /^\s+/, Np = /\s/, Up = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, ll = /\{\n\/\* \[wrapped with (.+)\] \*/, td = /,? & /, cl = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, $p = /[()=,{}\[\]\/\s]/, qp = /\\(\\)?/g, ul = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, cm = /\w*$/, Hp = /^[-+]0x[0-9a-f]+$/i, kc = /^0b[01]+$/i, zp = /^\[object .+?Constructor\]$/, dl = /^0o[0-7]+$/i, Wp = /^(?:0|[1-9]\d*)$/, Sc = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, Xi = /($^)/, um = /['\n\r\u2028\u2029\\]/g, ms = "\\ud800-\\udfff", jp = "\\u0300-\\u036f", Yp = "\\ufe20-\\ufe2f", Kp = "\\u20d0-\\u20ff", dm = jp + Yp + Kp, Cc = "\\u2700-\\u27bf", fm = "a-z\\xdf-\\xf6\\xf8-\\xff", Gp = "\\xac\\xb1\\xd7\\xf7", Qp = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", mm = "\\u2000-\\u206f", Jp = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", fl = "A-Z\\xc0-\\xd6\\xd8-\\xde", nd = "\\ufe0e\\ufe0f", hm = Gp + Qp + mm + Jp, hs = "['’]", _m = "[" + ms + "]", jn = "[" + hm + "]", Ac = "[" + dm + "]", pm = "\\d+", Xr = "[" + Cc + "]", gm = "[" + fm + "]", ad = "[^" + ms + hm + pm + Cc + fm + fl + "]", xc = "\\ud83c[\\udffb-\\udfff]", Tc = "(?:" + Ac + "|" + xc + ")", ym = "[^" + ms + "]", ml = "(?:\\ud83c[\\udde6-\\uddff]){2}", rd = "[\\ud800-\\udbff][\\udc00-\\udfff]", Zi = "[" + fl + "]", bm = "\\u200d", id = "(?:" + gm + "|" + ad + ")", Xp = "(?:" + Zi + "|" + ad + ")", wm = "(?:" + hs + "(?:d|ll|m|re|s|t|ve))?", od = "(?:" + hs + "(?:D|LL|M|RE|S|T|VE))?", xr = Tc + "?", Ic = "[" + nd + "]?", Zp = "(?:" + bm + "(?:" + [ym, ml, rd].join("|") + ")" + Ic + xr + ")*", ev = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", Di = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", km = Ic + xr + Zp, tv = "(?:" + [Xr, ml, rd].join("|") + ")" + km, nv = "(?:" + [ym + Ac + "?", Ac, ml, rd, _m].join("|") + ")", sd = RegExp(hs, "g"), av = RegExp(Ac, "g"), hl = RegExp(xc + "(?=" + xc + ")|" + nv + km, "g"), rv = RegExp([
        Zi + "?" + gm + "+" + wm + "(?=" + [jn, Zi, "$"].join("|") + ")",
        Xp + "+" + od + "(?=" + [jn, Zi + id, "$"].join("|") + ")",
        Zi + "?" + id + "+" + wm,
        Zi + "+" + od,
        Di,
        ev,
        pm,
        tv
      ].join("|"), "g"), iv = RegExp("[" + bm + ms + dm + nd + "]"), ov = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, sv = [
        "Array",
        "Buffer",
        "DataView",
        "Date",
        "Error",
        "Float32Array",
        "Float64Array",
        "Function",
        "Int8Array",
        "Int16Array",
        "Int32Array",
        "Map",
        "Math",
        "Object",
        "Promise",
        "RegExp",
        "Set",
        "String",
        "Symbol",
        "TypeError",
        "Uint8Array",
        "Uint8ClampedArray",
        "Uint16Array",
        "Uint32Array",
        "WeakMap",
        "_",
        "clearTimeout",
        "isFinite",
        "parseInt",
        "setTimeout"
      ], lv = -1, Mn = {};
      Mn[Dt] = Mn[en] = Mn[zn] = Mn[na] = Mn[Na] = Mn[ya] = Mn[Wn] = Mn[Vn] = Mn[Ja] = !0, Mn[ve] = Mn[pe] = Mn[It] = Mn[we] = Mn[rt] = Mn[Me] = Mn[ce] = Mn[te] = Mn[le] = Mn[K] = Mn[Te] = Mn[Pe] = Mn[Ie] = Mn[Je] = Mn[Ze] = !1;
      var xn = {};
      xn[ve] = xn[pe] = xn[It] = xn[rt] = xn[we] = xn[Me] = xn[Dt] = xn[en] = xn[zn] = xn[na] = xn[Na] = xn[le] = xn[K] = xn[Te] = xn[Pe] = xn[Ie] = xn[Je] = xn[_e] = xn[ya] = xn[Wn] = xn[Vn] = xn[Ja] = !0, xn[ce] = xn[te] = xn[Ze] = !1;
      var cv = {
        // Latin-1 Supplement block.
        À: "A",
        Á: "A",
        Â: "A",
        Ã: "A",
        Ä: "A",
        Å: "A",
        à: "a",
        á: "a",
        â: "a",
        ã: "a",
        ä: "a",
        å: "a",
        Ç: "C",
        ç: "c",
        Ð: "D",
        ð: "d",
        È: "E",
        É: "E",
        Ê: "E",
        Ë: "E",
        è: "e",
        é: "e",
        ê: "e",
        ë: "e",
        Ì: "I",
        Í: "I",
        Î: "I",
        Ï: "I",
        ì: "i",
        í: "i",
        î: "i",
        ï: "i",
        Ñ: "N",
        ñ: "n",
        Ò: "O",
        Ó: "O",
        Ô: "O",
        Õ: "O",
        Ö: "O",
        Ø: "O",
        ò: "o",
        ó: "o",
        ô: "o",
        õ: "o",
        ö: "o",
        ø: "o",
        Ù: "U",
        Ú: "U",
        Û: "U",
        Ü: "U",
        ù: "u",
        ú: "u",
        û: "u",
        ü: "u",
        Ý: "Y",
        ý: "y",
        ÿ: "y",
        Æ: "Ae",
        æ: "ae",
        Þ: "Th",
        þ: "th",
        ß: "ss",
        // Latin Extended-A block.
        Ā: "A",
        Ă: "A",
        Ą: "A",
        ā: "a",
        ă: "a",
        ą: "a",
        Ć: "C",
        Ĉ: "C",
        Ċ: "C",
        Č: "C",
        ć: "c",
        ĉ: "c",
        ċ: "c",
        č: "c",
        Ď: "D",
        Đ: "D",
        ď: "d",
        đ: "d",
        Ē: "E",
        Ĕ: "E",
        Ė: "E",
        Ę: "E",
        Ě: "E",
        ē: "e",
        ĕ: "e",
        ė: "e",
        ę: "e",
        ě: "e",
        Ĝ: "G",
        Ğ: "G",
        Ġ: "G",
        Ģ: "G",
        ĝ: "g",
        ğ: "g",
        ġ: "g",
        ģ: "g",
        Ĥ: "H",
        Ħ: "H",
        ĥ: "h",
        ħ: "h",
        Ĩ: "I",
        Ī: "I",
        Ĭ: "I",
        Į: "I",
        İ: "I",
        ĩ: "i",
        ī: "i",
        ĭ: "i",
        į: "i",
        ı: "i",
        Ĵ: "J",
        ĵ: "j",
        Ķ: "K",
        ķ: "k",
        ĸ: "k",
        Ĺ: "L",
        Ļ: "L",
        Ľ: "L",
        Ŀ: "L",
        Ł: "L",
        ĺ: "l",
        ļ: "l",
        ľ: "l",
        ŀ: "l",
        ł: "l",
        Ń: "N",
        Ņ: "N",
        Ň: "N",
        Ŋ: "N",
        ń: "n",
        ņ: "n",
        ň: "n",
        ŋ: "n",
        Ō: "O",
        Ŏ: "O",
        Ő: "O",
        ō: "o",
        ŏ: "o",
        ő: "o",
        Ŕ: "R",
        Ŗ: "R",
        Ř: "R",
        ŕ: "r",
        ŗ: "r",
        ř: "r",
        Ś: "S",
        Ŝ: "S",
        Ş: "S",
        Š: "S",
        ś: "s",
        ŝ: "s",
        ş: "s",
        š: "s",
        Ţ: "T",
        Ť: "T",
        Ŧ: "T",
        ţ: "t",
        ť: "t",
        ŧ: "t",
        Ũ: "U",
        Ū: "U",
        Ŭ: "U",
        Ů: "U",
        Ű: "U",
        Ų: "U",
        ũ: "u",
        ū: "u",
        ŭ: "u",
        ů: "u",
        ű: "u",
        ų: "u",
        Ŵ: "W",
        ŵ: "w",
        Ŷ: "Y",
        ŷ: "y",
        Ÿ: "Y",
        Ź: "Z",
        Ż: "Z",
        Ž: "Z",
        ź: "z",
        ż: "z",
        ž: "z",
        Ĳ: "IJ",
        ĳ: "ij",
        Œ: "Oe",
        œ: "oe",
        ŉ: "'n",
        ſ: "s"
      }, Sm = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      }, Cm = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
      }, uv = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029"
      }, ld = parseFloat, dv = parseInt, cd = typeof Fh == "object" && Fh && Fh.Object === Object && Fh, fv = typeof self == "object" && self && self.Object === Object && self, ja = cd || fv || Function("return this")(), ud = t && !t.nodeType && t, Eo = ud && !0 && e && !e.nodeType && e, Am = Eo && Eo.exports === ud, dd = Am && cd.process, qr = function() {
        try {
          var Le = Eo && Eo.require && Eo.require("util").types;
          return Le || dd && dd.binding && dd.binding("util");
        } catch {
        }
      }(), xm = qr && qr.isArrayBuffer, Tm = qr && qr.isDate, Im = qr && qr.isMap, Ec = qr && qr.isRegExp, Em = qr && qr.isSet, Pm = qr && qr.isTypedArray;
      function Tr(Le, et, Ye) {
        switch (Ye.length) {
          case 0:
            return Le.call(et);
          case 1:
            return Le.call(et, Ye[0]);
          case 2:
            return Le.call(et, Ye[0], Ye[1]);
          case 3:
            return Le.call(et, Ye[0], Ye[1], Ye[2]);
        }
        return Le.apply(et, Ye);
      }
      function Om(Le, et, Ye, Ct) {
        for (var jt = -1, gn = Le == null ? 0 : Le.length; ++jt < gn; ) {
          var Ta = Le[jt];
          et(Ct, Ta, Ye(Ta), Le);
        }
        return Ct;
      }
      function Hr(Le, et) {
        for (var Ye = -1, Ct = Le == null ? 0 : Le.length; ++Ye < Ct && et(Le[Ye], Ye, Le) !== !1; )
          ;
        return Le;
      }
      function mv(Le, et) {
        for (var Ye = Le == null ? 0 : Le.length; Ye-- && et(Le[Ye], Ye, Le) !== !1; )
          ;
        return Le;
      }
      function Dm(Le, et) {
        for (var Ye = -1, Ct = Le == null ? 0 : Le.length; ++Ye < Ct; )
          if (!et(Le[Ye], Ye, Le))
            return !1;
        return !0;
      }
      function eo(Le, et) {
        for (var Ye = -1, Ct = Le == null ? 0 : Le.length, jt = 0, gn = []; ++Ye < Ct; ) {
          var Ta = Le[Ye];
          et(Ta, Ye, Le) && (gn[jt++] = Ta);
        }
        return gn;
      }
      function Pc(Le, et) {
        var Ye = Le == null ? 0 : Le.length;
        return !!Ye && vi(Le, et, 0) > -1;
      }
      function fd(Le, et, Ye) {
        for (var Ct = -1, jt = Le == null ? 0 : Le.length; ++Ct < jt; )
          if (Ye(et, Le[Ct]))
            return !0;
        return !1;
      }
      function Un(Le, et) {
        for (var Ye = -1, Ct = Le == null ? 0 : Le.length, jt = Array(Ct); ++Ye < Ct; )
          jt[Ye] = et(Le[Ye], Ye, Le);
        return jt;
      }
      function to(Le, et) {
        for (var Ye = -1, Ct = et.length, jt = Le.length; ++Ye < Ct; )
          Le[jt + Ye] = et[Ye];
        return Le;
      }
      function md(Le, et, Ye, Ct) {
        var jt = -1, gn = Le == null ? 0 : Le.length;
        for (Ct && gn && (Ye = Le[++jt]); ++jt < gn; )
          Ye = et(Ye, Le[jt], jt, Le);
        return Ye;
      }
      function hv(Le, et, Ye, Ct) {
        var jt = Le == null ? 0 : Le.length;
        for (Ct && jt && (Ye = Le[--jt]); jt--; )
          Ye = et(Ye, Le[jt], jt, Le);
        return Ye;
      }
      function hd(Le, et) {
        for (var Ye = -1, Ct = Le == null ? 0 : Le.length; ++Ye < Ct; )
          if (et(Le[Ye], Ye, Le))
            return !0;
        return !1;
      }
      var _v = _d("length");
      function pv(Le) {
        return Le.split("");
      }
      function vv(Le) {
        return Le.match(cl) || [];
      }
      function Oc(Le, et, Ye) {
        var Ct;
        return Ye(Le, function(jt, gn, Ta) {
          if (et(jt, gn, Ta))
            return Ct = gn, !1;
        }), Ct;
      }
      function Dc(Le, et, Ye, Ct) {
        for (var jt = Le.length, gn = Ye + (Ct ? 1 : -1); Ct ? gn-- : ++gn < jt; )
          if (et(Le[gn], gn, Le))
            return gn;
        return -1;
      }
      function vi(Le, et, Ye) {
        return et === et ? wv(Le, et, Ye) : Dc(Le, Bm, Ye);
      }
      function gv(Le, et, Ye, Ct) {
        for (var jt = Ye - 1, gn = Le.length; ++jt < gn; )
          if (Ct(Le[jt], et))
            return jt;
        return -1;
      }
      function Bm(Le) {
        return Le !== Le;
      }
      function Vm(Le, et) {
        var Ye = Le == null ? 0 : Le.length;
        return Ye ? Bc(Le, et) / Ye : F;
      }
      function _d(Le) {
        return function(et) {
          return et == null ? n : et[Le];
        };
      }
      function _s(Le) {
        return function(et) {
          return Le == null ? n : Le[et];
        };
      }
      function Mm(Le, et, Ye, Ct, jt) {
        return jt(Le, function(gn, Ta, In) {
          Ye = Ct ? (Ct = !1, gn) : et(Ye, gn, Ta, In);
        }), Ye;
      }
      function Rm(Le, et) {
        var Ye = Le.length;
        for (Le.sort(et); Ye--; )
          Le[Ye] = Le[Ye].value;
        return Le;
      }
      function Bc(Le, et) {
        for (var Ye, Ct = -1, jt = Le.length; ++Ct < jt; ) {
          var gn = et(Le[Ct]);
          gn !== n && (Ye = Ye === n ? gn : Ye + gn);
        }
        return Ye;
      }
      function pd(Le, et) {
        for (var Ye = -1, Ct = Array(Le); ++Ye < Le; )
          Ct[Ye] = et(Ye);
        return Ct;
      }
      function yv(Le, et) {
        return Un(et, function(Ye) {
          return [Ye, Le[Ye]];
        });
      }
      function Lm(Le) {
        return Le && Le.slice(0, $m(Le) + 1).replace(wc, "");
      }
      function Ir(Le) {
        return function(et) {
          return Le(et);
        };
      }
      function vd(Le, et) {
        return Un(et, function(Ye) {
          return Le[Ye];
        });
      }
      function _l(Le, et) {
        return Le.has(et);
      }
      function aa(Le, et) {
        for (var Ye = -1, Ct = Le.length; ++Ye < Ct && vi(et, Le[Ye], 0) > -1; )
          ;
        return Ye;
      }
      function gi(Le, et) {
        for (var Ye = Le.length; Ye-- && vi(et, Le[Ye], 0) > -1; )
          ;
        return Ye;
      }
      function gd(Le, et) {
        for (var Ye = Le.length, Ct = 0; Ye--; )
          Le[Ye] === et && ++Ct;
        return Ct;
      }
      var Fm = _s(cv), Yn = _s(Sm);
      function pl(Le) {
        return "\\" + uv[Le];
      }
      function ra(Le, et) {
        return Le == null ? n : Le[et];
      }
      function Tn(Le) {
        return iv.test(Le);
      }
      function Nm(Le) {
        return ov.test(Le);
      }
      function Um(Le) {
        for (var et, Ye = []; !(et = Le.next()).done; )
          Ye.push(et.value);
        return Ye;
      }
      function Vc(Le) {
        var et = -1, Ye = Array(Le.size);
        return Le.forEach(function(Ct, jt) {
          Ye[++et] = [jt, Ct];
        }), Ye;
      }
      function yd(Le, et) {
        return function(Ye) {
          return Le(et(Ye));
        };
      }
      function Bi(Le, et) {
        for (var Ye = -1, Ct = Le.length, jt = 0, gn = []; ++Ye < Ct; ) {
          var Ta = Le[Ye];
          (Ta === et || Ta === u) && (Le[Ye] = u, gn[jt++] = Ye);
        }
        return gn;
      }
      function Mc(Le) {
        var et = -1, Ye = Array(Le.size);
        return Le.forEach(function(Ct) {
          Ye[++et] = Ct;
        }), Ye;
      }
      function bv(Le) {
        var et = -1, Ye = Array(Le.size);
        return Le.forEach(function(Ct) {
          Ye[++et] = [Ct, Ct];
        }), Ye;
      }
      function wv(Le, et, Ye) {
        for (var Ct = Ye - 1, jt = Le.length; ++Ct < jt; )
          if (Le[Ct] === et)
            return Ct;
        return -1;
      }
      function kv(Le, et, Ye) {
        for (var Ct = Ye + 1; Ct--; )
          if (Le[Ct] === et)
            return Ct;
        return Ct;
      }
      function ps(Le) {
        return Tn(Le) ? Cv(Le) : _v(Le);
      }
      function Zr(Le) {
        return Tn(Le) ? Av(Le) : pv(Le);
      }
      function $m(Le) {
        for (var et = Le.length; et-- && Np.test(Le.charAt(et)); )
          ;
        return et;
      }
      var Sv = _s(Cm);
      function Cv(Le) {
        for (var et = hl.lastIndex = 0; hl.test(Le); )
          ++et;
        return et;
      }
      function Av(Le) {
        return Le.match(hl) || [];
      }
      function xv(Le) {
        return Le.match(rv) || [];
      }
      var Tv = function Le(et) {
        et = et == null ? ja : vs.defaults(ja.Object(), et, vs.pick(ja, sv));
        var Ye = et.Array, Ct = et.Date, jt = et.Error, gn = et.Function, Ta = et.Math, In = et.Object, gs = et.RegExp, qm = et.String, L = et.TypeError, U = Ye.prototype, re = gn.prototype, me = In.prototype, Ve = et["__core-js_shared__"], qe = re.toString, Ue = me.hasOwnProperty, Ke = 0, lt = function() {
          var c = /[^.]+$/.exec(Ve && Ve.keys && Ve.keys.IE_PROTO || "");
          return c ? "Symbol(src)_1." + c : "";
        }(), mt = me.toString, St = qe.call(In), $t = ja._, Ht = gs(
          "^" + qe.call(Ue).replace(Ji, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
        ), zt = Am ? et.Buffer : n, bn = et.Symbol, Rn = et.Uint8Array, kn = zt ? zt.allocUnsafe : n, ma = yd(In.getPrototypeOf, In), dt = In.create, xt = me.propertyIsEnumerable, Ln = U.splice, ba = bn ? bn.isConcatSpreadable : n, yi = bn ? bn.iterator : n, bi = bn ? bn.toStringTag : n, vl = function() {
          try {
            var c = kl(In, "defineProperty");
            return c({}, "", {}), c;
          } catch {
          }
        }(), Hm = et.clearTimeout !== ja.clearTimeout && et.clearTimeout, qD = Ct && Ct.now !== ja.Date.now && Ct.now, HD = et.setTimeout !== ja.setTimeout && et.setTimeout, zm = Ta.ceil, Wm = Ta.floor, Iv = In.getOwnPropertySymbols, zD = zt ? zt.isBuffer : n, l1 = et.isFinite, WD = U.join, jD = yd(In.keys, In), Ya = Ta.max, pr = Ta.min, YD = Ct.now, KD = et.parseInt, c1 = Ta.random, GD = U.reverse, Ev = kl(et, "DataView"), bd = kl(et, "Map"), Pv = kl(et, "Promise"), Rc = kl(et, "Set"), wd = kl(et, "WeakMap"), kd = kl(In, "create"), jm = wd && new wd(), Lc = {}, QD = Sl(Ev), JD = Sl(bd), XD = Sl(Pv), ZD = Sl(Rc), eB = Sl(wd), Ym = bn ? bn.prototype : n, Sd = Ym ? Ym.valueOf : n, u1 = Ym ? Ym.toString : n;
        function oe(c) {
          if (wa(c) && !Qt(c) && !(c instanceof dn)) {
            if (c instanceof wi)
              return c;
            if (Ue.call(c, "__wrapped__"))
              return dk(c);
          }
          return new wi(c);
        }
        var Fc = /* @__PURE__ */ function() {
          function c() {
          }
          return function(m) {
            if (!ha(m))
              return {};
            if (dt)
              return dt(m);
            c.prototype = m;
            var k = new c();
            return c.prototype = n, k;
          };
        }();
        function Km() {
        }
        function wi(c, m) {
          this.__wrapped__ = c, this.__actions__ = [], this.__chain__ = !!m, this.__index__ = 0, this.__values__ = n;
        }
        oe.templateSettings = {
          /**
           * Used to detect `data` property values to be HTML-escaped.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          escape: xa,
          /**
           * Used to detect code to be evaluated.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          evaluate: Ua,
          /**
           * Used to detect `data` property values to inject.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          interpolate: _r,
          /**
           * Used to reference the data object in the template text.
           *
           * @memberOf _.templateSettings
           * @type {string}
           */
          variable: "",
          /**
           * Used to import variables into the compiled template.
           *
           * @memberOf _.templateSettings
           * @type {Object}
           */
          imports: {
            /**
             * A reference to the `lodash` function.
             *
             * @memberOf _.templateSettings.imports
             * @type {Function}
             */
            _: oe
          }
        }, oe.prototype = Km.prototype, oe.prototype.constructor = oe, wi.prototype = Fc(Km.prototype), wi.prototype.constructor = wi;
        function dn(c) {
          this.__wrapped__ = c, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = Y, this.__views__ = [];
        }
        function tB() {
          var c = new dn(this.__wrapped__);
          return c.__actions__ = zr(this.__actions__), c.__dir__ = this.__dir__, c.__filtered__ = this.__filtered__, c.__iteratees__ = zr(this.__iteratees__), c.__takeCount__ = this.__takeCount__, c.__views__ = zr(this.__views__), c;
        }
        function nB() {
          if (this.__filtered__) {
            var c = new dn(this);
            c.__dir__ = -1, c.__filtered__ = !0;
          } else
            c = this.clone(), c.__dir__ *= -1;
          return c;
        }
        function aB() {
          var c = this.__wrapped__.value(), m = this.__dir__, k = Qt(c), R = m < 0, Q = k ? c.length : 0, ue = _2(0, Q, this.__views__), ye = ue.start, Oe = ue.end, Ne = Oe - ye, tt = R ? Oe : ye - 1, at = this.__iteratees__, ct = at.length, yt = 0, Et = pr(Ne, this.__takeCount__);
          if (!k || !R && Q == Ne && Et == Ne)
            return V1(c, this.__actions__);
          var Nt = [];
          e:
            for (; Ne-- && yt < Et; ) {
              tt += m;
              for (var Zt = -1, Ut = c[tt]; ++Zt < ct; ) {
                var on = at[Zt], hn = on.iteratee, ni = on.type, Or = hn(Ut);
                if (ni == q)
                  Ut = Or;
                else if (!Or) {
                  if (ni == N)
                    continue e;
                  break e;
                }
              }
              Nt[yt++] = Ut;
            }
          return Nt;
        }
        dn.prototype = Fc(Km.prototype), dn.prototype.constructor = dn;
        function gl(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.clear(); ++m < k; ) {
            var R = c[m];
            this.set(R[0], R[1]);
          }
        }
        function rB() {
          this.__data__ = kd ? kd(null) : {}, this.size = 0;
        }
        function iB(c) {
          var m = this.has(c) && delete this.__data__[c];
          return this.size -= m ? 1 : 0, m;
        }
        function oB(c) {
          var m = this.__data__;
          if (kd) {
            var k = m[c];
            return k === s ? n : k;
          }
          return Ue.call(m, c) ? m[c] : n;
        }
        function sB(c) {
          var m = this.__data__;
          return kd ? m[c] !== n : Ue.call(m, c);
        }
        function lB(c, m) {
          var k = this.__data__;
          return this.size += this.has(c) ? 0 : 1, k[c] = kd && m === n ? s : m, this;
        }
        gl.prototype.clear = rB, gl.prototype.delete = iB, gl.prototype.get = oB, gl.prototype.has = sB, gl.prototype.set = lB;
        function Po(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.clear(); ++m < k; ) {
            var R = c[m];
            this.set(R[0], R[1]);
          }
        }
        function cB() {
          this.__data__ = [], this.size = 0;
        }
        function uB(c) {
          var m = this.__data__, k = Gm(m, c);
          if (k < 0)
            return !1;
          var R = m.length - 1;
          return k == R ? m.pop() : Ln.call(m, k, 1), --this.size, !0;
        }
        function dB(c) {
          var m = this.__data__, k = Gm(m, c);
          return k < 0 ? n : m[k][1];
        }
        function fB(c) {
          return Gm(this.__data__, c) > -1;
        }
        function mB(c, m) {
          var k = this.__data__, R = Gm(k, c);
          return R < 0 ? (++this.size, k.push([c, m])) : k[R][1] = m, this;
        }
        Po.prototype.clear = cB, Po.prototype.delete = uB, Po.prototype.get = dB, Po.prototype.has = fB, Po.prototype.set = mB;
        function Oo(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.clear(); ++m < k; ) {
            var R = c[m];
            this.set(R[0], R[1]);
          }
        }
        function hB() {
          this.size = 0, this.__data__ = {
            hash: new gl(),
            map: new (bd || Po)(),
            string: new gl()
          };
        }
        function _B(c) {
          var m = sh(this, c).delete(c);
          return this.size -= m ? 1 : 0, m;
        }
        function pB(c) {
          return sh(this, c).get(c);
        }
        function vB(c) {
          return sh(this, c).has(c);
        }
        function gB(c, m) {
          var k = sh(this, c), R = k.size;
          return k.set(c, m), this.size += k.size == R ? 0 : 1, this;
        }
        Oo.prototype.clear = hB, Oo.prototype.delete = _B, Oo.prototype.get = pB, Oo.prototype.has = vB, Oo.prototype.set = gB;
        function yl(c) {
          var m = -1, k = c == null ? 0 : c.length;
          for (this.__data__ = new Oo(); ++m < k; )
            this.add(c[m]);
        }
        function yB(c) {
          return this.__data__.set(c, s), this;
        }
        function bB(c) {
          return this.__data__.has(c);
        }
        yl.prototype.add = yl.prototype.push = yB, yl.prototype.has = bB;
        function Vi(c) {
          var m = this.__data__ = new Po(c);
          this.size = m.size;
        }
        function wB() {
          this.__data__ = new Po(), this.size = 0;
        }
        function kB(c) {
          var m = this.__data__, k = m.delete(c);
          return this.size = m.size, k;
        }
        function SB(c) {
          return this.__data__.get(c);
        }
        function CB(c) {
          return this.__data__.has(c);
        }
        function AB(c, m) {
          var k = this.__data__;
          if (k instanceof Po) {
            var R = k.__data__;
            if (!bd || R.length < r - 1)
              return R.push([c, m]), this.size = ++k.size, this;
            k = this.__data__ = new Oo(R);
          }
          return k.set(c, m), this.size = k.size, this;
        }
        Vi.prototype.clear = wB, Vi.prototype.delete = kB, Vi.prototype.get = SB, Vi.prototype.has = CB, Vi.prototype.set = AB;
        function d1(c, m) {
          var k = Qt(c), R = !k && Cl(c), Q = !k && !R && Ss(c), ue = !k && !R && !Q && qc(c), ye = k || R || Q || ue, Oe = ye ? pd(c.length, qm) : [], Ne = Oe.length;
          for (var tt in c)
            (m || Ue.call(c, tt)) && !(ye && // Safari 9 has enumerable `arguments.length` in strict mode.
            (tt == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
            Q && (tt == "offset" || tt == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
            ue && (tt == "buffer" || tt == "byteLength" || tt == "byteOffset") || // Skip index properties.
            Mo(tt, Ne))) && Oe.push(tt);
          return Oe;
        }
        function f1(c) {
          var m = c.length;
          return m ? c[$v(0, m - 1)] : n;
        }
        function xB(c, m) {
          return lh(zr(c), bl(m, 0, c.length));
        }
        function TB(c) {
          return lh(zr(c));
        }
        function Ov(c, m, k) {
          (k !== n && !Mi(c[m], k) || k === n && !(m in c)) && Do(c, m, k);
        }
        function Cd(c, m, k) {
          var R = c[m];
          (!(Ue.call(c, m) && Mi(R, k)) || k === n && !(m in c)) && Do(c, m, k);
        }
        function Gm(c, m) {
          for (var k = c.length; k--; )
            if (Mi(c[k][0], m))
              return k;
          return -1;
        }
        function IB(c, m, k, R) {
          return ys(c, function(Q, ue, ye) {
            m(R, Q, k(Q), ye);
          }), R;
        }
        function m1(c, m) {
          return c && ao(m, Xa(m), c);
        }
        function EB(c, m) {
          return c && ao(m, jr(m), c);
        }
        function Do(c, m, k) {
          m == "__proto__" && vl ? vl(c, m, {
            configurable: !0,
            enumerable: !0,
            value: k,
            writable: !0
          }) : c[m] = k;
        }
        function Dv(c, m) {
          for (var k = -1, R = m.length, Q = Ye(R), ue = c == null; ++k < R; )
            Q[k] = ue ? n : fg(c, m[k]);
          return Q;
        }
        function bl(c, m, k) {
          return c === c && (k !== n && (c = c <= k ? c : k), m !== n && (c = c >= m ? c : m)), c;
        }
        function ki(c, m, k, R, Q, ue) {
          var ye, Oe = m & f, Ne = m & _, tt = m & g;
          if (k && (ye = Q ? k(c, R, Q, ue) : k(c)), ye !== n)
            return ye;
          if (!ha(c))
            return c;
          var at = Qt(c);
          if (at) {
            if (ye = v2(c), !Oe)
              return zr(c, ye);
          } else {
            var ct = vr(c), yt = ct == te || ct == G;
            if (Ss(c))
              return L1(c, Oe);
            if (ct == Te || ct == ve || yt && !Q) {
              if (ye = Ne || yt ? {} : nk(c), !Oe)
                return Ne ? o2(c, EB(ye, c)) : i2(c, m1(ye, c));
            } else {
              if (!xn[ct])
                return Q ? c : {};
              ye = g2(c, ct, Oe);
            }
          }
          ue || (ue = new Vi());
          var Et = ue.get(c);
          if (Et)
            return Et;
          ue.set(c, ye), Ok(c) ? c.forEach(function(Ut) {
            ye.add(ki(Ut, m, k, Ut, c, ue));
          }) : Ek(c) && c.forEach(function(Ut, on) {
            ye.set(on, ki(Ut, m, k, on, c, ue));
          });
          var Nt = tt ? Ne ? Xv : Jv : Ne ? jr : Xa, Zt = at ? n : Nt(c);
          return Hr(Zt || c, function(Ut, on) {
            Zt && (on = Ut, Ut = c[on]), Cd(ye, on, ki(Ut, m, k, on, c, ue));
          }), ye;
        }
        function PB(c) {
          var m = Xa(c);
          return function(k) {
            return h1(k, c, m);
          };
        }
        function h1(c, m, k) {
          var R = k.length;
          if (c == null)
            return !R;
          for (c = In(c); R--; ) {
            var Q = k[R], ue = m[Q], ye = c[Q];
            if (ye === n && !(Q in c) || !ue(ye))
              return !1;
          }
          return !0;
        }
        function _1(c, m, k) {
          if (typeof c != "function")
            throw new L(o);
          return Od(function() {
            c.apply(n, k);
          }, m);
        }
        function Ad(c, m, k, R) {
          var Q = -1, ue = Pc, ye = !0, Oe = c.length, Ne = [], tt = m.length;
          if (!Oe)
            return Ne;
          k && (m = Un(m, Ir(k))), R ? (ue = fd, ye = !1) : m.length >= r && (ue = _l, ye = !1, m = new yl(m));
          e:
            for (; ++Q < Oe; ) {
              var at = c[Q], ct = k == null ? at : k(at);
              if (at = R || at !== 0 ? at : 0, ye && ct === ct) {
                for (var yt = tt; yt--; )
                  if (m[yt] === ct)
                    continue e;
                Ne.push(at);
              } else ue(m, ct, R) || Ne.push(at);
            }
          return Ne;
        }
        var ys = q1(no), p1 = q1(Vv, !0);
        function OB(c, m) {
          var k = !0;
          return ys(c, function(R, Q, ue) {
            return k = !!m(R, Q, ue), k;
          }), k;
        }
        function Qm(c, m, k) {
          for (var R = -1, Q = c.length; ++R < Q; ) {
            var ue = c[R], ye = m(ue);
            if (ye != null && (Oe === n ? ye === ye && !ti(ye) : k(ye, Oe)))
              var Oe = ye, Ne = ue;
          }
          return Ne;
        }
        function DB(c, m, k, R) {
          var Q = c.length;
          for (k = Xt(k), k < 0 && (k = -k > Q ? 0 : Q + k), R = R === n || R > Q ? Q : Xt(R), R < 0 && (R += Q), R = k > R ? 0 : Bk(R); k < R; )
            c[k++] = m;
          return c;
        }
        function v1(c, m) {
          var k = [];
          return ys(c, function(R, Q, ue) {
            m(R, Q, ue) && k.push(R);
          }), k;
        }
        function or(c, m, k, R, Q) {
          var ue = -1, ye = c.length;
          for (k || (k = b2), Q || (Q = []); ++ue < ye; ) {
            var Oe = c[ue];
            m > 0 && k(Oe) ? m > 1 ? or(Oe, m - 1, k, R, Q) : to(Q, Oe) : R || (Q[Q.length] = Oe);
          }
          return Q;
        }
        var Bv = H1(), g1 = H1(!0);
        function no(c, m) {
          return c && Bv(c, m, Xa);
        }
        function Vv(c, m) {
          return c && g1(c, m, Xa);
        }
        function Jm(c, m) {
          return eo(m, function(k) {
            return Ro(c[k]);
          });
        }
        function wl(c, m) {
          m = ws(m, c);
          for (var k = 0, R = m.length; c != null && k < R; )
            c = c[ro(m[k++])];
          return k && k == R ? c : n;
        }
        function y1(c, m, k) {
          var R = m(c);
          return Qt(c) ? R : to(R, k(c));
        }
        function Er(c) {
          return c == null ? c === n ? $e : Ce : bi && bi in In(c) ? h2(c) : T2(c);
        }
        function Mv(c, m) {
          return c > m;
        }
        function BB(c, m) {
          return c != null && Ue.call(c, m);
        }
        function VB(c, m) {
          return c != null && m in In(c);
        }
        function MB(c, m, k) {
          return c >= pr(m, k) && c < Ya(m, k);
        }
        function Rv(c, m, k) {
          for (var R = k ? fd : Pc, Q = c[0].length, ue = c.length, ye = ue, Oe = Ye(ue), Ne = 1 / 0, tt = []; ye--; ) {
            var at = c[ye];
            ye && m && (at = Un(at, Ir(m))), Ne = pr(at.length, Ne), Oe[ye] = !k && (m || Q >= 120 && at.length >= 120) ? new yl(ye && at) : n;
          }
          at = c[0];
          var ct = -1, yt = Oe[0];
          e:
            for (; ++ct < Q && tt.length < Ne; ) {
              var Et = at[ct], Nt = m ? m(Et) : Et;
              if (Et = k || Et !== 0 ? Et : 0, !(yt ? _l(yt, Nt) : R(tt, Nt, k))) {
                for (ye = ue; --ye; ) {
                  var Zt = Oe[ye];
                  if (!(Zt ? _l(Zt, Nt) : R(c[ye], Nt, k)))
                    continue e;
                }
                yt && yt.push(Nt), tt.push(Et);
              }
            }
          return tt;
        }
        function RB(c, m, k, R) {
          return no(c, function(Q, ue, ye) {
            m(R, k(Q), ue, ye);
          }), R;
        }
        function xd(c, m, k) {
          m = ws(m, c), c = ok(c, m);
          var R = c == null ? c : c[ro(Ci(m))];
          return R == null ? n : Tr(R, c, k);
        }
        function b1(c) {
          return wa(c) && Er(c) == ve;
        }
        function LB(c) {
          return wa(c) && Er(c) == It;
        }
        function FB(c) {
          return wa(c) && Er(c) == Me;
        }
        function Td(c, m, k, R, Q) {
          return c === m ? !0 : c == null || m == null || !wa(c) && !wa(m) ? c !== c && m !== m : NB(c, m, k, R, Td, Q);
        }
        function NB(c, m, k, R, Q, ue) {
          var ye = Qt(c), Oe = Qt(m), Ne = ye ? pe : vr(c), tt = Oe ? pe : vr(m);
          Ne = Ne == ve ? Te : Ne, tt = tt == ve ? Te : tt;
          var at = Ne == Te, ct = tt == Te, yt = Ne == tt;
          if (yt && Ss(c)) {
            if (!Ss(m))
              return !1;
            ye = !0, at = !1;
          }
          if (yt && !at)
            return ue || (ue = new Vi()), ye || qc(c) ? Z1(c, m, k, R, Q, ue) : f2(c, m, Ne, k, R, Q, ue);
          if (!(k & v)) {
            var Et = at && Ue.call(c, "__wrapped__"), Nt = ct && Ue.call(m, "__wrapped__");
            if (Et || Nt) {
              var Zt = Et ? c.value() : c, Ut = Nt ? m.value() : m;
              return ue || (ue = new Vi()), Q(Zt, Ut, k, R, ue);
            }
          }
          return yt ? (ue || (ue = new Vi()), m2(c, m, k, R, Q, ue)) : !1;
        }
        function UB(c) {
          return wa(c) && vr(c) == le;
        }
        function Lv(c, m, k, R) {
          var Q = k.length, ue = Q, ye = !R;
          if (c == null)
            return !ue;
          for (c = In(c); Q--; ) {
            var Oe = k[Q];
            if (ye && Oe[2] ? Oe[1] !== c[Oe[0]] : !(Oe[0] in c))
              return !1;
          }
          for (; ++Q < ue; ) {
            Oe = k[Q];
            var Ne = Oe[0], tt = c[Ne], at = Oe[1];
            if (ye && Oe[2]) {
              if (tt === n && !(Ne in c))
                return !1;
            } else {
              var ct = new Vi();
              if (R)
                var yt = R(tt, at, Ne, c, m, ct);
              if (!(yt === n ? Td(at, tt, v | w, R, ct) : yt))
                return !1;
            }
          }
          return !0;
        }
        function w1(c) {
          if (!ha(c) || k2(c))
            return !1;
          var m = Ro(c) ? Ht : zp;
          return m.test(Sl(c));
        }
        function $B(c) {
          return wa(c) && Er(c) == Pe;
        }
        function qB(c) {
          return wa(c) && vr(c) == Ie;
        }
        function HB(c) {
          return wa(c) && hh(c.length) && !!Mn[Er(c)];
        }
        function k1(c) {
          return typeof c == "function" ? c : c == null ? Yr : typeof c == "object" ? Qt(c) ? A1(c[0], c[1]) : C1(c) : zk(c);
        }
        function Fv(c) {
          if (!Pd(c))
            return jD(c);
          var m = [];
          for (var k in In(c))
            Ue.call(c, k) && k != "constructor" && m.push(k);
          return m;
        }
        function zB(c) {
          if (!ha(c))
            return x2(c);
          var m = Pd(c), k = [];
          for (var R in c)
            R == "constructor" && (m || !Ue.call(c, R)) || k.push(R);
          return k;
        }
        function Nv(c, m) {
          return c < m;
        }
        function S1(c, m) {
          var k = -1, R = Wr(c) ? Ye(c.length) : [];
          return ys(c, function(Q, ue, ye) {
            R[++k] = m(Q, ue, ye);
          }), R;
        }
        function C1(c) {
          var m = eg(c);
          return m.length == 1 && m[0][2] ? rk(m[0][0], m[0][1]) : function(k) {
            return k === c || Lv(k, c, m);
          };
        }
        function A1(c, m) {
          return ng(c) && ak(m) ? rk(ro(c), m) : function(k) {
            var R = fg(k, c);
            return R === n && R === m ? mg(k, c) : Td(m, R, v | w);
          };
        }
        function Xm(c, m, k, R, Q) {
          c !== m && Bv(m, function(ue, ye) {
            if (Q || (Q = new Vi()), ha(ue))
              WB(c, m, ye, k, Xm, R, Q);
            else {
              var Oe = R ? R(rg(c, ye), ue, ye + "", c, m, Q) : n;
              Oe === n && (Oe = ue), Ov(c, ye, Oe);
            }
          }, jr);
        }
        function WB(c, m, k, R, Q, ue, ye) {
          var Oe = rg(c, k), Ne = rg(m, k), tt = ye.get(Ne);
          if (tt) {
            Ov(c, k, tt);
            return;
          }
          var at = ue ? ue(Oe, Ne, k + "", c, m, ye) : n, ct = at === n;
          if (ct) {
            var yt = Qt(Ne), Et = !yt && Ss(Ne), Nt = !yt && !Et && qc(Ne);
            at = Ne, yt || Et || Nt ? Qt(Oe) ? at = Oe : Ia(Oe) ? at = zr(Oe) : Et ? (ct = !1, at = L1(Ne, !0)) : Nt ? (ct = !1, at = F1(Ne, !0)) : at = [] : Dd(Ne) || Cl(Ne) ? (at = Oe, Cl(Oe) ? at = Vk(Oe) : (!ha(Oe) || Ro(Oe)) && (at = nk(Ne))) : ct = !1;
          }
          ct && (ye.set(Ne, at), Q(at, Ne, R, ue, ye), ye.delete(Ne)), Ov(c, k, at);
        }
        function x1(c, m) {
          var k = c.length;
          if (k)
            return m += m < 0 ? k : 0, Mo(m, k) ? c[m] : n;
        }
        function T1(c, m, k) {
          m.length ? m = Un(m, function(ue) {
            return Qt(ue) ? function(ye) {
              return wl(ye, ue.length === 1 ? ue[0] : ue);
            } : ue;
          }) : m = [Yr];
          var R = -1;
          m = Un(m, Ir(Mt()));
          var Q = S1(c, function(ue, ye, Oe) {
            var Ne = Un(m, function(tt) {
              return tt(ue);
            });
            return { criteria: Ne, index: ++R, value: ue };
          });
          return Rm(Q, function(ue, ye) {
            return r2(ue, ye, k);
          });
        }
        function jB(c, m) {
          return I1(c, m, function(k, R) {
            return mg(c, R);
          });
        }
        function I1(c, m, k) {
          for (var R = -1, Q = m.length, ue = {}; ++R < Q; ) {
            var ye = m[R], Oe = wl(c, ye);
            k(Oe, ye) && Id(ue, ws(ye, c), Oe);
          }
          return ue;
        }
        function YB(c) {
          return function(m) {
            return wl(m, c);
          };
        }
        function Uv(c, m, k, R) {
          var Q = R ? gv : vi, ue = -1, ye = m.length, Oe = c;
          for (c === m && (m = zr(m)), k && (Oe = Un(c, Ir(k))); ++ue < ye; )
            for (var Ne = 0, tt = m[ue], at = k ? k(tt) : tt; (Ne = Q(Oe, at, Ne, R)) > -1; )
              Oe !== c && Ln.call(Oe, Ne, 1), Ln.call(c, Ne, 1);
          return c;
        }
        function E1(c, m) {
          for (var k = c ? m.length : 0, R = k - 1; k--; ) {
            var Q = m[k];
            if (k == R || Q !== ue) {
              var ue = Q;
              Mo(Q) ? Ln.call(c, Q, 1) : zv(c, Q);
            }
          }
          return c;
        }
        function $v(c, m) {
          return c + Wm(c1() * (m - c + 1));
        }
        function KB(c, m, k, R) {
          for (var Q = -1, ue = Ya(zm((m - c) / (k || 1)), 0), ye = Ye(ue); ue--; )
            ye[R ? ue : ++Q] = c, c += k;
          return ye;
        }
        function qv(c, m) {
          var k = "";
          if (!c || m < 1 || m > de)
            return k;
          do
            m % 2 && (k += c), m = Wm(m / 2), m && (c += c);
          while (m);
          return k;
        }
        function tn(c, m) {
          return ig(ik(c, m, Yr), c + "");
        }
        function GB(c) {
          return f1(Hc(c));
        }
        function QB(c, m) {
          var k = Hc(c);
          return lh(k, bl(m, 0, k.length));
        }
        function Id(c, m, k, R) {
          if (!ha(c))
            return c;
          m = ws(m, c);
          for (var Q = -1, ue = m.length, ye = ue - 1, Oe = c; Oe != null && ++Q < ue; ) {
            var Ne = ro(m[Q]), tt = k;
            if (Ne === "__proto__" || Ne === "constructor" || Ne === "prototype")
              return c;
            if (Q != ye) {
              var at = Oe[Ne];
              tt = R ? R(at, Ne, Oe) : n, tt === n && (tt = ha(at) ? at : Mo(m[Q + 1]) ? [] : {});
            }
            Cd(Oe, Ne, tt), Oe = Oe[Ne];
          }
          return c;
        }
        var P1 = jm ? function(c, m) {
          return jm.set(c, m), c;
        } : Yr, JB = vl ? function(c, m) {
          return vl(c, "toString", {
            configurable: !0,
            enumerable: !1,
            value: _g(m),
            writable: !0
          });
        } : Yr;
        function XB(c) {
          return lh(Hc(c));
        }
        function Si(c, m, k) {
          var R = -1, Q = c.length;
          m < 0 && (m = -m > Q ? 0 : Q + m), k = k > Q ? Q : k, k < 0 && (k += Q), Q = m > k ? 0 : k - m >>> 0, m >>>= 0;
          for (var ue = Ye(Q); ++R < Q; )
            ue[R] = c[R + m];
          return ue;
        }
        function ZB(c, m) {
          var k;
          return ys(c, function(R, Q, ue) {
            return k = m(R, Q, ue), !k;
          }), !!k;
        }
        function Zm(c, m, k) {
          var R = 0, Q = c == null ? R : c.length;
          if (typeof m == "number" && m === m && Q <= X) {
            for (; R < Q; ) {
              var ue = R + Q >>> 1, ye = c[ue];
              ye !== null && !ti(ye) && (k ? ye <= m : ye < m) ? R = ue + 1 : Q = ue;
            }
            return Q;
          }
          return Hv(c, m, Yr, k);
        }
        function Hv(c, m, k, R) {
          var Q = 0, ue = c == null ? 0 : c.length;
          if (ue === 0)
            return 0;
          m = k(m);
          for (var ye = m !== m, Oe = m === null, Ne = ti(m), tt = m === n; Q < ue; ) {
            var at = Wm((Q + ue) / 2), ct = k(c[at]), yt = ct !== n, Et = ct === null, Nt = ct === ct, Zt = ti(ct);
            if (ye)
              var Ut = R || Nt;
            else tt ? Ut = Nt && (R || yt) : Oe ? Ut = Nt && yt && (R || !Et) : Ne ? Ut = Nt && yt && !Et && (R || !Zt) : Et || Zt ? Ut = !1 : Ut = R ? ct <= m : ct < m;
            Ut ? Q = at + 1 : ue = at;
          }
          return pr(ue, se);
        }
        function O1(c, m) {
          for (var k = -1, R = c.length, Q = 0, ue = []; ++k < R; ) {
            var ye = c[k], Oe = m ? m(ye) : ye;
            if (!k || !Mi(Oe, Ne)) {
              var Ne = Oe;
              ue[Q++] = ye === 0 ? 0 : ye;
            }
          }
          return ue;
        }
        function D1(c) {
          return typeof c == "number" ? c : ti(c) ? F : +c;
        }
        function ei(c) {
          if (typeof c == "string")
            return c;
          if (Qt(c))
            return Un(c, ei) + "";
          if (ti(c))
            return u1 ? u1.call(c) : "";
          var m = c + "";
          return m == "0" && 1 / c == -ee ? "-0" : m;
        }
        function bs(c, m, k) {
          var R = -1, Q = Pc, ue = c.length, ye = !0, Oe = [], Ne = Oe;
          if (k)
            ye = !1, Q = fd;
          else if (ue >= r) {
            var tt = m ? null : u2(c);
            if (tt)
              return Mc(tt);
            ye = !1, Q = _l, Ne = new yl();
          } else
            Ne = m ? [] : Oe;
          e:
            for (; ++R < ue; ) {
              var at = c[R], ct = m ? m(at) : at;
              if (at = k || at !== 0 ? at : 0, ye && ct === ct) {
                for (var yt = Ne.length; yt--; )
                  if (Ne[yt] === ct)
                    continue e;
                m && Ne.push(ct), Oe.push(at);
              } else Q(Ne, ct, k) || (Ne !== Oe && Ne.push(ct), Oe.push(at));
            }
          return Oe;
        }
        function zv(c, m) {
          return m = ws(m, c), c = ok(c, m), c == null || delete c[ro(Ci(m))];
        }
        function B1(c, m, k, R) {
          return Id(c, m, k(wl(c, m)), R);
        }
        function eh(c, m, k, R) {
          for (var Q = c.length, ue = R ? Q : -1; (R ? ue-- : ++ue < Q) && m(c[ue], ue, c); )
            ;
          return k ? Si(c, R ? 0 : ue, R ? ue + 1 : Q) : Si(c, R ? ue + 1 : 0, R ? Q : ue);
        }
        function V1(c, m) {
          var k = c;
          return k instanceof dn && (k = k.value()), md(m, function(R, Q) {
            return Q.func.apply(Q.thisArg, to([R], Q.args));
          }, k);
        }
        function Wv(c, m, k) {
          var R = c.length;
          if (R < 2)
            return R ? bs(c[0]) : [];
          for (var Q = -1, ue = Ye(R); ++Q < R; )
            for (var ye = c[Q], Oe = -1; ++Oe < R; )
              Oe != Q && (ue[Q] = Ad(ue[Q] || ye, c[Oe], m, k));
          return bs(or(ue, 1), m, k);
        }
        function M1(c, m, k) {
          for (var R = -1, Q = c.length, ue = m.length, ye = {}; ++R < Q; ) {
            var Oe = R < ue ? m[R] : n;
            k(ye, c[R], Oe);
          }
          return ye;
        }
        function jv(c) {
          return Ia(c) ? c : [];
        }
        function Yv(c) {
          return typeof c == "function" ? c : Yr;
        }
        function ws(c, m) {
          return Qt(c) ? c : ng(c, m) ? [c] : uk(Sn(c));
        }
        var e2 = tn;
        function ks(c, m, k) {
          var R = c.length;
          return k = k === n ? R : k, !m && k >= R ? c : Si(c, m, k);
        }
        var R1 = Hm || function(c) {
          return ja.clearTimeout(c);
        };
        function L1(c, m) {
          if (m)
            return c.slice();
          var k = c.length, R = kn ? kn(k) : new c.constructor(k);
          return c.copy(R), R;
        }
        function Kv(c) {
          var m = new c.constructor(c.byteLength);
          return new Rn(m).set(new Rn(c)), m;
        }
        function t2(c, m) {
          var k = m ? Kv(c.buffer) : c.buffer;
          return new c.constructor(k, c.byteOffset, c.byteLength);
        }
        function n2(c) {
          var m = new c.constructor(c.source, cm.exec(c));
          return m.lastIndex = c.lastIndex, m;
        }
        function a2(c) {
          return Sd ? In(Sd.call(c)) : {};
        }
        function F1(c, m) {
          var k = m ? Kv(c.buffer) : c.buffer;
          return new c.constructor(k, c.byteOffset, c.length);
        }
        function N1(c, m) {
          if (c !== m) {
            var k = c !== n, R = c === null, Q = c === c, ue = ti(c), ye = m !== n, Oe = m === null, Ne = m === m, tt = ti(m);
            if (!Oe && !tt && !ue && c > m || ue && ye && Ne && !Oe && !tt || R && ye && Ne || !k && Ne || !Q)
              return 1;
            if (!R && !ue && !tt && c < m || tt && k && Q && !R && !ue || Oe && k && Q || !ye && Q || !Ne)
              return -1;
          }
          return 0;
        }
        function r2(c, m, k) {
          for (var R = -1, Q = c.criteria, ue = m.criteria, ye = Q.length, Oe = k.length; ++R < ye; ) {
            var Ne = N1(Q[R], ue[R]);
            if (Ne) {
              if (R >= Oe)
                return Ne;
              var tt = k[R];
              return Ne * (tt == "desc" ? -1 : 1);
            }
          }
          return c.index - m.index;
        }
        function U1(c, m, k, R) {
          for (var Q = -1, ue = c.length, ye = k.length, Oe = -1, Ne = m.length, tt = Ya(ue - ye, 0), at = Ye(Ne + tt), ct = !R; ++Oe < Ne; )
            at[Oe] = m[Oe];
          for (; ++Q < ye; )
            (ct || Q < ue) && (at[k[Q]] = c[Q]);
          for (; tt--; )
            at[Oe++] = c[Q++];
          return at;
        }
        function $1(c, m, k, R) {
          for (var Q = -1, ue = c.length, ye = -1, Oe = k.length, Ne = -1, tt = m.length, at = Ya(ue - Oe, 0), ct = Ye(at + tt), yt = !R; ++Q < at; )
            ct[Q] = c[Q];
          for (var Et = Q; ++Ne < tt; )
            ct[Et + Ne] = m[Ne];
          for (; ++ye < Oe; )
            (yt || Q < ue) && (ct[Et + k[ye]] = c[Q++]);
          return ct;
        }
        function zr(c, m) {
          var k = -1, R = c.length;
          for (m || (m = Ye(R)); ++k < R; )
            m[k] = c[k];
          return m;
        }
        function ao(c, m, k, R) {
          var Q = !k;
          k || (k = {});
          for (var ue = -1, ye = m.length; ++ue < ye; ) {
            var Oe = m[ue], Ne = R ? R(k[Oe], c[Oe], Oe, k, c) : n;
            Ne === n && (Ne = c[Oe]), Q ? Do(k, Oe, Ne) : Cd(k, Oe, Ne);
          }
          return k;
        }
        function i2(c, m) {
          return ao(c, tg(c), m);
        }
        function o2(c, m) {
          return ao(c, ek(c), m);
        }
        function th(c, m) {
          return function(k, R) {
            var Q = Qt(k) ? Om : IB, ue = m ? m() : {};
            return Q(k, c, Mt(R, 2), ue);
          };
        }
        function Nc(c) {
          return tn(function(m, k) {
            var R = -1, Q = k.length, ue = Q > 1 ? k[Q - 1] : n, ye = Q > 2 ? k[2] : n;
            for (ue = c.length > 3 && typeof ue == "function" ? (Q--, ue) : n, ye && Pr(k[0], k[1], ye) && (ue = Q < 3 ? n : ue, Q = 1), m = In(m); ++R < Q; ) {
              var Oe = k[R];
              Oe && c(m, Oe, R, ue);
            }
            return m;
          });
        }
        function q1(c, m) {
          return function(k, R) {
            if (k == null)
              return k;
            if (!Wr(k))
              return c(k, R);
            for (var Q = k.length, ue = m ? Q : -1, ye = In(k); (m ? ue-- : ++ue < Q) && R(ye[ue], ue, ye) !== !1; )
              ;
            return k;
          };
        }
        function H1(c) {
          return function(m, k, R) {
            for (var Q = -1, ue = In(m), ye = R(m), Oe = ye.length; Oe--; ) {
              var Ne = ye[c ? Oe : ++Q];
              if (k(ue[Ne], Ne, ue) === !1)
                break;
            }
            return m;
          };
        }
        function s2(c, m, k) {
          var R = m & b, Q = Ed(c);
          function ue() {
            var ye = this && this !== ja && this instanceof ue ? Q : c;
            return ye.apply(R ? k : this, arguments);
          }
          return ue;
        }
        function z1(c) {
          return function(m) {
            m = Sn(m);
            var k = Tn(m) ? Zr(m) : n, R = k ? k[0] : m.charAt(0), Q = k ? ks(k, 1).join("") : m.slice(1);
            return R[c]() + Q;
          };
        }
        function Uc(c) {
          return function(m) {
            return md(qk($k(m).replace(sd, "")), c, "");
          };
        }
        function Ed(c) {
          return function() {
            var m = arguments;
            switch (m.length) {
              case 0:
                return new c();
              case 1:
                return new c(m[0]);
              case 2:
                return new c(m[0], m[1]);
              case 3:
                return new c(m[0], m[1], m[2]);
              case 4:
                return new c(m[0], m[1], m[2], m[3]);
              case 5:
                return new c(m[0], m[1], m[2], m[3], m[4]);
              case 6:
                return new c(m[0], m[1], m[2], m[3], m[4], m[5]);
              case 7:
                return new c(m[0], m[1], m[2], m[3], m[4], m[5], m[6]);
            }
            var k = Fc(c.prototype), R = c.apply(k, m);
            return ha(R) ? R : k;
          };
        }
        function l2(c, m, k) {
          var R = Ed(c);
          function Q() {
            for (var ue = arguments.length, ye = Ye(ue), Oe = ue, Ne = $c(Q); Oe--; )
              ye[Oe] = arguments[Oe];
            var tt = ue < 3 && ye[0] !== Ne && ye[ue - 1] !== Ne ? [] : Bi(ye, Ne);
            if (ue -= tt.length, ue < k)
              return G1(
                c,
                m,
                nh,
                Q.placeholder,
                n,
                ye,
                tt,
                n,
                n,
                k - ue
              );
            var at = this && this !== ja && this instanceof Q ? R : c;
            return Tr(at, this, ye);
          }
          return Q;
        }
        function W1(c) {
          return function(m, k, R) {
            var Q = In(m);
            if (!Wr(m)) {
              var ue = Mt(k, 3);
              m = Xa(m), k = function(Oe) {
                return ue(Q[Oe], Oe, Q);
              };
            }
            var ye = c(m, k, R);
            return ye > -1 ? Q[ue ? m[ye] : ye] : n;
          };
        }
        function j1(c) {
          return Vo(function(m) {
            var k = m.length, R = k, Q = wi.prototype.thru;
            for (c && m.reverse(); R--; ) {
              var ue = m[R];
              if (typeof ue != "function")
                throw new L(o);
              if (Q && !ye && oh(ue) == "wrapper")
                var ye = new wi([], !0);
            }
            for (R = ye ? R : k; ++R < k; ) {
              ue = m[R];
              var Oe = oh(ue), Ne = Oe == "wrapper" ? Zv(ue) : n;
              Ne && ag(Ne[0]) && Ne[1] == (O | S | C | D) && !Ne[4].length && Ne[9] == 1 ? ye = ye[oh(Ne[0])].apply(ye, Ne[3]) : ye = ue.length == 1 && ag(ue) ? ye[Oe]() : ye.thru(ue);
            }
            return function() {
              var tt = arguments, at = tt[0];
              if (ye && tt.length == 1 && Qt(at))
                return ye.plant(at).value();
              for (var ct = 0, yt = k ? m[ct].apply(this, tt) : at; ++ct < k; )
                yt = m[ct].call(this, yt);
              return yt;
            };
          });
        }
        function nh(c, m, k, R, Q, ue, ye, Oe, Ne, tt) {
          var at = m & O, ct = m & b, yt = m & p, Et = m & (S | E), Nt = m & T, Zt = yt ? n : Ed(c);
          function Ut() {
            for (var on = arguments.length, hn = Ye(on), ni = on; ni--; )
              hn[ni] = arguments[ni];
            if (Et)
              var Or = $c(Ut), ai = gd(hn, Or);
            if (R && (hn = U1(hn, R, Q, Et)), ue && (hn = $1(hn, ue, ye, Et)), on -= ai, Et && on < tt) {
              var Ea = Bi(hn, Or);
              return G1(
                c,
                m,
                nh,
                Ut.placeholder,
                k,
                hn,
                Ea,
                Oe,
                Ne,
                tt - on
              );
            }
            var Ri = ct ? k : this, Fo = yt ? Ri[c] : c;
            return on = hn.length, Oe ? hn = I2(hn, Oe) : Nt && on > 1 && hn.reverse(), at && Ne < on && (hn.length = Ne), this && this !== ja && this instanceof Ut && (Fo = Zt || Ed(Fo)), Fo.apply(Ri, hn);
          }
          return Ut;
        }
        function Y1(c, m) {
          return function(k, R) {
            return RB(k, c, m(R), {});
          };
        }
        function ah(c, m) {
          return function(k, R) {
            var Q;
            if (k === n && R === n)
              return m;
            if (k !== n && (Q = k), R !== n) {
              if (Q === n)
                return R;
              typeof k == "string" || typeof R == "string" ? (k = ei(k), R = ei(R)) : (k = D1(k), R = D1(R)), Q = c(k, R);
            }
            return Q;
          };
        }
        function Gv(c) {
          return Vo(function(m) {
            return m = Un(m, Ir(Mt())), tn(function(k) {
              var R = this;
              return c(m, function(Q) {
                return Tr(Q, R, k);
              });
            });
          });
        }
        function rh(c, m) {
          m = m === n ? " " : ei(m);
          var k = m.length;
          if (k < 2)
            return k ? qv(m, c) : m;
          var R = qv(m, zm(c / ps(m)));
          return Tn(m) ? ks(Zr(R), 0, c).join("") : R.slice(0, c);
        }
        function c2(c, m, k, R) {
          var Q = m & b, ue = Ed(c);
          function ye() {
            for (var Oe = -1, Ne = arguments.length, tt = -1, at = R.length, ct = Ye(at + Ne), yt = this && this !== ja && this instanceof ye ? ue : c; ++tt < at; )
              ct[tt] = R[tt];
            for (; Ne--; )
              ct[tt++] = arguments[++Oe];
            return Tr(yt, Q ? k : this, ct);
          }
          return ye;
        }
        function K1(c) {
          return function(m, k, R) {
            return R && typeof R != "number" && Pr(m, k, R) && (k = R = n), m = Lo(m), k === n ? (k = m, m = 0) : k = Lo(k), R = R === n ? m < k ? 1 : -1 : Lo(R), KB(m, k, R, c);
          };
        }
        function ih(c) {
          return function(m, k) {
            return typeof m == "string" && typeof k == "string" || (m = Ai(m), k = Ai(k)), c(m, k);
          };
        }
        function G1(c, m, k, R, Q, ue, ye, Oe, Ne, tt) {
          var at = m & S, ct = at ? ye : n, yt = at ? n : ye, Et = at ? ue : n, Nt = at ? n : ue;
          m |= at ? C : B, m &= ~(at ? B : C), m & y || (m &= -4);
          var Zt = [
            c,
            m,
            Q,
            Et,
            ct,
            Nt,
            yt,
            Oe,
            Ne,
            tt
          ], Ut = k.apply(n, Zt);
          return ag(c) && sk(Ut, Zt), Ut.placeholder = R, lk(Ut, c, m);
        }
        function Qv(c) {
          var m = Ta[c];
          return function(k, R) {
            if (k = Ai(k), R = R == null ? 0 : pr(Xt(R), 292), R && l1(k)) {
              var Q = (Sn(k) + "e").split("e"), ue = m(Q[0] + "e" + (+Q[1] + R));
              return Q = (Sn(ue) + "e").split("e"), +(Q[0] + "e" + (+Q[1] - R));
            }
            return m(k);
          };
        }
        var u2 = Rc && 1 / Mc(new Rc([, -0]))[1] == ee ? function(c) {
          return new Rc(c);
        } : gg;
        function Q1(c) {
          return function(m) {
            var k = vr(m);
            return k == le ? Vc(m) : k == Ie ? bv(m) : yv(m, c(m));
          };
        }
        function Bo(c, m, k, R, Q, ue, ye, Oe) {
          var Ne = m & p;
          if (!Ne && typeof c != "function")
            throw new L(o);
          var tt = R ? R.length : 0;
          if (tt || (m &= -97, R = Q = n), ye = ye === n ? ye : Ya(Xt(ye), 0), Oe = Oe === n ? Oe : Xt(Oe), tt -= Q ? Q.length : 0, m & B) {
            var at = R, ct = Q;
            R = Q = n;
          }
          var yt = Ne ? n : Zv(c), Et = [
            c,
            m,
            k,
            R,
            Q,
            at,
            ct,
            ue,
            ye,
            Oe
          ];
          if (yt && A2(Et, yt), c = Et[0], m = Et[1], k = Et[2], R = Et[3], Q = Et[4], Oe = Et[9] = Et[9] === n ? Ne ? 0 : c.length : Ya(Et[9] - tt, 0), !Oe && m & (S | E) && (m &= -25), !m || m == b)
            var Nt = s2(c, m, k);
          else m == S || m == E ? Nt = l2(c, m, Oe) : (m == C || m == (b | C)) && !Q.length ? Nt = c2(c, m, k, R) : Nt = nh.apply(n, Et);
          var Zt = yt ? P1 : sk;
          return lk(Zt(Nt, Et), c, m);
        }
        function J1(c, m, k, R) {
          return c === n || Mi(c, me[k]) && !Ue.call(R, k) ? m : c;
        }
        function X1(c, m, k, R, Q, ue) {
          return ha(c) && ha(m) && (ue.set(m, c), Xm(c, m, n, X1, ue), ue.delete(m)), c;
        }
        function d2(c) {
          return Dd(c) ? n : c;
        }
        function Z1(c, m, k, R, Q, ue) {
          var ye = k & v, Oe = c.length, Ne = m.length;
          if (Oe != Ne && !(ye && Ne > Oe))
            return !1;
          var tt = ue.get(c), at = ue.get(m);
          if (tt && at)
            return tt == m && at == c;
          var ct = -1, yt = !0, Et = k & w ? new yl() : n;
          for (ue.set(c, m), ue.set(m, c); ++ct < Oe; ) {
            var Nt = c[ct], Zt = m[ct];
            if (R)
              var Ut = ye ? R(Zt, Nt, ct, m, c, ue) : R(Nt, Zt, ct, c, m, ue);
            if (Ut !== n) {
              if (Ut)
                continue;
              yt = !1;
              break;
            }
            if (Et) {
              if (!hd(m, function(on, hn) {
                if (!_l(Et, hn) && (Nt === on || Q(Nt, on, k, R, ue)))
                  return Et.push(hn);
              })) {
                yt = !1;
                break;
              }
            } else if (!(Nt === Zt || Q(Nt, Zt, k, R, ue))) {
              yt = !1;
              break;
            }
          }
          return ue.delete(c), ue.delete(m), yt;
        }
        function f2(c, m, k, R, Q, ue, ye) {
          switch (k) {
            case rt:
              if (c.byteLength != m.byteLength || c.byteOffset != m.byteOffset)
                return !1;
              c = c.buffer, m = m.buffer;
            case It:
              return !(c.byteLength != m.byteLength || !ue(new Rn(c), new Rn(m)));
            case we:
            case Me:
            case K:
              return Mi(+c, +m);
            case ce:
              return c.name == m.name && c.message == m.message;
            case Pe:
            case Je:
              return c == m + "";
            case le:
              var Oe = Vc;
            case Ie:
              var Ne = R & v;
              if (Oe || (Oe = Mc), c.size != m.size && !Ne)
                return !1;
              var tt = ye.get(c);
              if (tt)
                return tt == m;
              R |= w, ye.set(c, m);
              var at = Z1(Oe(c), Oe(m), R, Q, ue, ye);
              return ye.delete(c), at;
            case _e:
              if (Sd)
                return Sd.call(c) == Sd.call(m);
          }
          return !1;
        }
        function m2(c, m, k, R, Q, ue) {
          var ye = k & v, Oe = Jv(c), Ne = Oe.length, tt = Jv(m), at = tt.length;
          if (Ne != at && !ye)
            return !1;
          for (var ct = Ne; ct--; ) {
            var yt = Oe[ct];
            if (!(ye ? yt in m : Ue.call(m, yt)))
              return !1;
          }
          var Et = ue.get(c), Nt = ue.get(m);
          if (Et && Nt)
            return Et == m && Nt == c;
          var Zt = !0;
          ue.set(c, m), ue.set(m, c);
          for (var Ut = ye; ++ct < Ne; ) {
            yt = Oe[ct];
            var on = c[yt], hn = m[yt];
            if (R)
              var ni = ye ? R(hn, on, yt, m, c, ue) : R(on, hn, yt, c, m, ue);
            if (!(ni === n ? on === hn || Q(on, hn, k, R, ue) : ni)) {
              Zt = !1;
              break;
            }
            Ut || (Ut = yt == "constructor");
          }
          if (Zt && !Ut) {
            var Or = c.constructor, ai = m.constructor;
            Or != ai && "constructor" in c && "constructor" in m && !(typeof Or == "function" && Or instanceof Or && typeof ai == "function" && ai instanceof ai) && (Zt = !1);
          }
          return ue.delete(c), ue.delete(m), Zt;
        }
        function Vo(c) {
          return ig(ik(c, n, hk), c + "");
        }
        function Jv(c) {
          return y1(c, Xa, tg);
        }
        function Xv(c) {
          return y1(c, jr, ek);
        }
        var Zv = jm ? function(c) {
          return jm.get(c);
        } : gg;
        function oh(c) {
          for (var m = c.name + "", k = Lc[m], R = Ue.call(Lc, m) ? k.length : 0; R--; ) {
            var Q = k[R], ue = Q.func;
            if (ue == null || ue == c)
              return Q.name;
          }
          return m;
        }
        function $c(c) {
          var m = Ue.call(oe, "placeholder") ? oe : c;
          return m.placeholder;
        }
        function Mt() {
          var c = oe.iteratee || pg;
          return c = c === pg ? k1 : c, arguments.length ? c(arguments[0], arguments[1]) : c;
        }
        function sh(c, m) {
          var k = c.__data__;
          return w2(m) ? k[typeof m == "string" ? "string" : "hash"] : k.map;
        }
        function eg(c) {
          for (var m = Xa(c), k = m.length; k--; ) {
            var R = m[k], Q = c[R];
            m[k] = [R, Q, ak(Q)];
          }
          return m;
        }
        function kl(c, m) {
          var k = ra(c, m);
          return w1(k) ? k : n;
        }
        function h2(c) {
          var m = Ue.call(c, bi), k = c[bi];
          try {
            c[bi] = n;
            var R = !0;
          } catch {
          }
          var Q = mt.call(c);
          return R && (m ? c[bi] = k : delete c[bi]), Q;
        }
        var tg = Iv ? function(c) {
          return c == null ? [] : (c = In(c), eo(Iv(c), function(m) {
            return xt.call(c, m);
          }));
        } : yg, ek = Iv ? function(c) {
          for (var m = []; c; )
            to(m, tg(c)), c = ma(c);
          return m;
        } : yg, vr = Er;
        (Ev && vr(new Ev(new ArrayBuffer(1))) != rt || bd && vr(new bd()) != le || Pv && vr(Pv.resolve()) != ie || Rc && vr(new Rc()) != Ie || wd && vr(new wd()) != Ze) && (vr = function(c) {
          var m = Er(c), k = m == Te ? c.constructor : n, R = k ? Sl(k) : "";
          if (R)
            switch (R) {
              case QD:
                return rt;
              case JD:
                return le;
              case XD:
                return ie;
              case ZD:
                return Ie;
              case eB:
                return Ze;
            }
          return m;
        });
        function _2(c, m, k) {
          for (var R = -1, Q = k.length; ++R < Q; ) {
            var ue = k[R], ye = ue.size;
            switch (ue.type) {
              case "drop":
                c += ye;
                break;
              case "dropRight":
                m -= ye;
                break;
              case "take":
                m = pr(m, c + ye);
                break;
              case "takeRight":
                c = Ya(c, m - ye);
                break;
            }
          }
          return { start: c, end: m };
        }
        function p2(c) {
          var m = c.match(ll);
          return m ? m[1].split(td) : [];
        }
        function tk(c, m, k) {
          m = ws(m, c);
          for (var R = -1, Q = m.length, ue = !1; ++R < Q; ) {
            var ye = ro(m[R]);
            if (!(ue = c != null && k(c, ye)))
              break;
            c = c[ye];
          }
          return ue || ++R != Q ? ue : (Q = c == null ? 0 : c.length, !!Q && hh(Q) && Mo(ye, Q) && (Qt(c) || Cl(c)));
        }
        function v2(c) {
          var m = c.length, k = new c.constructor(m);
          return m && typeof c[0] == "string" && Ue.call(c, "index") && (k.index = c.index, k.input = c.input), k;
        }
        function nk(c) {
          return typeof c.constructor == "function" && !Pd(c) ? Fc(ma(c)) : {};
        }
        function g2(c, m, k) {
          var R = c.constructor;
          switch (m) {
            case It:
              return Kv(c);
            case we:
            case Me:
              return new R(+c);
            case rt:
              return t2(c, k);
            case Dt:
            case en:
            case zn:
            case na:
            case Na:
            case ya:
            case Wn:
            case Vn:
            case Ja:
              return F1(c, k);
            case le:
              return new R();
            case K:
            case Je:
              return new R(c);
            case Pe:
              return n2(c);
            case Ie:
              return new R();
            case _e:
              return a2(c);
          }
        }
        function y2(c, m) {
          var k = m.length;
          if (!k)
            return c;
          var R = k - 1;
          return m[R] = (k > 1 ? "& " : "") + m[R], m = m.join(k > 2 ? ", " : " "), c.replace(Up, `{
/* [wrapped with ` + m + `] */
`);
        }
        function b2(c) {
          return Qt(c) || Cl(c) || !!(ba && c && c[ba]);
        }
        function Mo(c, m) {
          var k = typeof c;
          return m = m ?? de, !!m && (k == "number" || k != "symbol" && Wp.test(c)) && c > -1 && c % 1 == 0 && c < m;
        }
        function Pr(c, m, k) {
          if (!ha(k))
            return !1;
          var R = typeof m;
          return (R == "number" ? Wr(k) && Mo(m, k.length) : R == "string" && m in k) ? Mi(k[m], c) : !1;
        }
        function ng(c, m) {
          if (Qt(c))
            return !1;
          var k = typeof c;
          return k == "number" || k == "symbol" || k == "boolean" || c == null || ti(c) ? !0 : Qi.test(c) || !Wa.test(c) || m != null && c in In(m);
        }
        function w2(c) {
          var m = typeof c;
          return m == "string" || m == "number" || m == "symbol" || m == "boolean" ? c !== "__proto__" : c === null;
        }
        function ag(c) {
          var m = oh(c), k = oe[m];
          if (typeof k != "function" || !(m in dn.prototype))
            return !1;
          if (c === k)
            return !0;
          var R = Zv(k);
          return !!R && c === R[0];
        }
        function k2(c) {
          return !!lt && lt in c;
        }
        var S2 = Ve ? Ro : bg;
        function Pd(c) {
          var m = c && c.constructor, k = typeof m == "function" && m.prototype || me;
          return c === k;
        }
        function ak(c) {
          return c === c && !ha(c);
        }
        function rk(c, m) {
          return function(k) {
            return k == null ? !1 : k[c] === m && (m !== n || c in In(k));
          };
        }
        function C2(c) {
          var m = fh(c, function(R) {
            return k.size === d && k.clear(), R;
          }), k = m.cache;
          return m;
        }
        function A2(c, m) {
          var k = c[1], R = m[1], Q = k | R, ue = Q < (b | p | O), ye = R == O && k == S || R == O && k == D && c[7].length <= m[8] || R == (O | D) && m[7].length <= m[8] && k == S;
          if (!(ue || ye))
            return c;
          R & b && (c[2] = m[2], Q |= k & b ? 0 : y);
          var Oe = m[3];
          if (Oe) {
            var Ne = c[3];
            c[3] = Ne ? U1(Ne, Oe, m[4]) : Oe, c[4] = Ne ? Bi(c[3], u) : m[4];
          }
          return Oe = m[5], Oe && (Ne = c[5], c[5] = Ne ? $1(Ne, Oe, m[6]) : Oe, c[6] = Ne ? Bi(c[5], u) : m[6]), Oe = m[7], Oe && (c[7] = Oe), R & O && (c[8] = c[8] == null ? m[8] : pr(c[8], m[8])), c[9] == null && (c[9] = m[9]), c[0] = m[0], c[1] = Q, c;
        }
        function x2(c) {
          var m = [];
          if (c != null)
            for (var k in In(c))
              m.push(k);
          return m;
        }
        function T2(c) {
          return mt.call(c);
        }
        function ik(c, m, k) {
          return m = Ya(m === n ? c.length - 1 : m, 0), function() {
            for (var R = arguments, Q = -1, ue = Ya(R.length - m, 0), ye = Ye(ue); ++Q < ue; )
              ye[Q] = R[m + Q];
            Q = -1;
            for (var Oe = Ye(m + 1); ++Q < m; )
              Oe[Q] = R[Q];
            return Oe[m] = k(ye), Tr(c, this, Oe);
          };
        }
        function ok(c, m) {
          return m.length < 2 ? c : wl(c, Si(m, 0, -1));
        }
        function I2(c, m) {
          for (var k = c.length, R = pr(m.length, k), Q = zr(c); R--; ) {
            var ue = m[R];
            c[R] = Mo(ue, k) ? Q[ue] : n;
          }
          return c;
        }
        function rg(c, m) {
          if (!(m === "constructor" && typeof c[m] == "function") && m != "__proto__")
            return c[m];
        }
        var sk = ck(P1), Od = HD || function(c, m) {
          return ja.setTimeout(c, m);
        }, ig = ck(JB);
        function lk(c, m, k) {
          var R = m + "";
          return ig(c, y2(R, E2(p2(R), k)));
        }
        function ck(c) {
          var m = 0, k = 0;
          return function() {
            var R = YD(), Q = V - (R - k);
            if (k = R, Q > 0) {
              if (++m >= M)
                return arguments[0];
            } else
              m = 0;
            return c.apply(n, arguments);
          };
        }
        function lh(c, m) {
          var k = -1, R = c.length, Q = R - 1;
          for (m = m === n ? R : m; ++k < m; ) {
            var ue = $v(k, Q), ye = c[ue];
            c[ue] = c[k], c[k] = ye;
          }
          return c.length = m, c;
        }
        var uk = C2(function(c) {
          var m = [];
          return c.charCodeAt(0) === 46 && m.push(""), c.replace(sl, function(k, R, Q, ue) {
            m.push(Q ? ue.replace(qp, "$1") : R || k);
          }), m;
        });
        function ro(c) {
          if (typeof c == "string" || ti(c))
            return c;
          var m = c + "";
          return m == "0" && 1 / c == -ee ? "-0" : m;
        }
        function Sl(c) {
          if (c != null) {
            try {
              return qe.call(c);
            } catch {
            }
            try {
              return c + "";
            } catch {
            }
          }
          return "";
        }
        function E2(c, m) {
          return Hr(he, function(k) {
            var R = "_." + k[0];
            m & k[1] && !Pc(c, R) && c.push(R);
          }), c.sort();
        }
        function dk(c) {
          if (c instanceof dn)
            return c.clone();
          var m = new wi(c.__wrapped__, c.__chain__);
          return m.__actions__ = zr(c.__actions__), m.__index__ = c.__index__, m.__values__ = c.__values__, m;
        }
        function P2(c, m, k) {
          (k ? Pr(c, m, k) : m === n) ? m = 1 : m = Ya(Xt(m), 0);
          var R = c == null ? 0 : c.length;
          if (!R || m < 1)
            return [];
          for (var Q = 0, ue = 0, ye = Ye(zm(R / m)); Q < R; )
            ye[ue++] = Si(c, Q, Q += m);
          return ye;
        }
        function O2(c) {
          for (var m = -1, k = c == null ? 0 : c.length, R = 0, Q = []; ++m < k; ) {
            var ue = c[m];
            ue && (Q[R++] = ue);
          }
          return Q;
        }
        function D2() {
          var c = arguments.length;
          if (!c)
            return [];
          for (var m = Ye(c - 1), k = arguments[0], R = c; R--; )
            m[R - 1] = arguments[R];
          return to(Qt(k) ? zr(k) : [k], or(m, 1));
        }
        var B2 = tn(function(c, m) {
          return Ia(c) ? Ad(c, or(m, 1, Ia, !0)) : [];
        }), V2 = tn(function(c, m) {
          var k = Ci(m);
          return Ia(k) && (k = n), Ia(c) ? Ad(c, or(m, 1, Ia, !0), Mt(k, 2)) : [];
        }), M2 = tn(function(c, m) {
          var k = Ci(m);
          return Ia(k) && (k = n), Ia(c) ? Ad(c, or(m, 1, Ia, !0), n, k) : [];
        });
        function R2(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (m = k || m === n ? 1 : Xt(m), Si(c, m < 0 ? 0 : m, R)) : [];
        }
        function L2(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (m = k || m === n ? 1 : Xt(m), m = R - m, Si(c, 0, m < 0 ? 0 : m)) : [];
        }
        function F2(c, m) {
          return c && c.length ? eh(c, Mt(m, 3), !0, !0) : [];
        }
        function N2(c, m) {
          return c && c.length ? eh(c, Mt(m, 3), !0) : [];
        }
        function U2(c, m, k, R) {
          var Q = c == null ? 0 : c.length;
          return Q ? (k && typeof k != "number" && Pr(c, m, k) && (k = 0, R = Q), DB(c, m, k, R)) : [];
        }
        function fk(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var Q = k == null ? 0 : Xt(k);
          return Q < 0 && (Q = Ya(R + Q, 0)), Dc(c, Mt(m, 3), Q);
        }
        function mk(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var Q = R - 1;
          return k !== n && (Q = Xt(k), Q = k < 0 ? Ya(R + Q, 0) : pr(Q, R - 1)), Dc(c, Mt(m, 3), Q, !0);
        }
        function hk(c) {
          var m = c == null ? 0 : c.length;
          return m ? or(c, 1) : [];
        }
        function $2(c) {
          var m = c == null ? 0 : c.length;
          return m ? or(c, ee) : [];
        }
        function q2(c, m) {
          var k = c == null ? 0 : c.length;
          return k ? (m = m === n ? 1 : Xt(m), or(c, m)) : [];
        }
        function H2(c) {
          for (var m = -1, k = c == null ? 0 : c.length, R = {}; ++m < k; ) {
            var Q = c[m];
            R[Q[0]] = Q[1];
          }
          return R;
        }
        function _k(c) {
          return c && c.length ? c[0] : n;
        }
        function z2(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var Q = k == null ? 0 : Xt(k);
          return Q < 0 && (Q = Ya(R + Q, 0)), vi(c, m, Q);
        }
        function W2(c) {
          var m = c == null ? 0 : c.length;
          return m ? Si(c, 0, -1) : [];
        }
        var j2 = tn(function(c) {
          var m = Un(c, jv);
          return m.length && m[0] === c[0] ? Rv(m) : [];
        }), Y2 = tn(function(c) {
          var m = Ci(c), k = Un(c, jv);
          return m === Ci(k) ? m = n : k.pop(), k.length && k[0] === c[0] ? Rv(k, Mt(m, 2)) : [];
        }), K2 = tn(function(c) {
          var m = Ci(c), k = Un(c, jv);
          return m = typeof m == "function" ? m : n, m && k.pop(), k.length && k[0] === c[0] ? Rv(k, n, m) : [];
        });
        function G2(c, m) {
          return c == null ? "" : WD.call(c, m);
        }
        function Ci(c) {
          var m = c == null ? 0 : c.length;
          return m ? c[m - 1] : n;
        }
        function Q2(c, m, k) {
          var R = c == null ? 0 : c.length;
          if (!R)
            return -1;
          var Q = R;
          return k !== n && (Q = Xt(k), Q = Q < 0 ? Ya(R + Q, 0) : pr(Q, R - 1)), m === m ? kv(c, m, Q) : Dc(c, Bm, Q, !0);
        }
        function J2(c, m) {
          return c && c.length ? x1(c, Xt(m)) : n;
        }
        var X2 = tn(pk);
        function pk(c, m) {
          return c && c.length && m && m.length ? Uv(c, m) : c;
        }
        function Z2(c, m, k) {
          return c && c.length && m && m.length ? Uv(c, m, Mt(k, 2)) : c;
        }
        function eV(c, m, k) {
          return c && c.length && m && m.length ? Uv(c, m, n, k) : c;
        }
        var tV = Vo(function(c, m) {
          var k = c == null ? 0 : c.length, R = Dv(c, m);
          return E1(c, Un(m, function(Q) {
            return Mo(Q, k) ? +Q : Q;
          }).sort(N1)), R;
        });
        function nV(c, m) {
          var k = [];
          if (!(c && c.length))
            return k;
          var R = -1, Q = [], ue = c.length;
          for (m = Mt(m, 3); ++R < ue; ) {
            var ye = c[R];
            m(ye, R, c) && (k.push(ye), Q.push(R));
          }
          return E1(c, Q), k;
        }
        function og(c) {
          return c == null ? c : GD.call(c);
        }
        function aV(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (k && typeof k != "number" && Pr(c, m, k) ? (m = 0, k = R) : (m = m == null ? 0 : Xt(m), k = k === n ? R : Xt(k)), Si(c, m, k)) : [];
        }
        function rV(c, m) {
          return Zm(c, m);
        }
        function iV(c, m, k) {
          return Hv(c, m, Mt(k, 2));
        }
        function oV(c, m) {
          var k = c == null ? 0 : c.length;
          if (k) {
            var R = Zm(c, m);
            if (R < k && Mi(c[R], m))
              return R;
          }
          return -1;
        }
        function sV(c, m) {
          return Zm(c, m, !0);
        }
        function lV(c, m, k) {
          return Hv(c, m, Mt(k, 2), !0);
        }
        function cV(c, m) {
          var k = c == null ? 0 : c.length;
          if (k) {
            var R = Zm(c, m, !0) - 1;
            if (Mi(c[R], m))
              return R;
          }
          return -1;
        }
        function uV(c) {
          return c && c.length ? O1(c) : [];
        }
        function dV(c, m) {
          return c && c.length ? O1(c, Mt(m, 2)) : [];
        }
        function fV(c) {
          var m = c == null ? 0 : c.length;
          return m ? Si(c, 1, m) : [];
        }
        function mV(c, m, k) {
          return c && c.length ? (m = k || m === n ? 1 : Xt(m), Si(c, 0, m < 0 ? 0 : m)) : [];
        }
        function hV(c, m, k) {
          var R = c == null ? 0 : c.length;
          return R ? (m = k || m === n ? 1 : Xt(m), m = R - m, Si(c, m < 0 ? 0 : m, R)) : [];
        }
        function _V(c, m) {
          return c && c.length ? eh(c, Mt(m, 3), !1, !0) : [];
        }
        function pV(c, m) {
          return c && c.length ? eh(c, Mt(m, 3)) : [];
        }
        var vV = tn(function(c) {
          return bs(or(c, 1, Ia, !0));
        }), gV = tn(function(c) {
          var m = Ci(c);
          return Ia(m) && (m = n), bs(or(c, 1, Ia, !0), Mt(m, 2));
        }), yV = tn(function(c) {
          var m = Ci(c);
          return m = typeof m == "function" ? m : n, bs(or(c, 1, Ia, !0), n, m);
        });
        function bV(c) {
          return c && c.length ? bs(c) : [];
        }
        function wV(c, m) {
          return c && c.length ? bs(c, Mt(m, 2)) : [];
        }
        function kV(c, m) {
          return m = typeof m == "function" ? m : n, c && c.length ? bs(c, n, m) : [];
        }
        function sg(c) {
          if (!(c && c.length))
            return [];
          var m = 0;
          return c = eo(c, function(k) {
            if (Ia(k))
              return m = Ya(k.length, m), !0;
          }), pd(m, function(k) {
            return Un(c, _d(k));
          });
        }
        function vk(c, m) {
          if (!(c && c.length))
            return [];
          var k = sg(c);
          return m == null ? k : Un(k, function(R) {
            return Tr(m, n, R);
          });
        }
        var SV = tn(function(c, m) {
          return Ia(c) ? Ad(c, m) : [];
        }), CV = tn(function(c) {
          return Wv(eo(c, Ia));
        }), AV = tn(function(c) {
          var m = Ci(c);
          return Ia(m) && (m = n), Wv(eo(c, Ia), Mt(m, 2));
        }), xV = tn(function(c) {
          var m = Ci(c);
          return m = typeof m == "function" ? m : n, Wv(eo(c, Ia), n, m);
        }), TV = tn(sg);
        function IV(c, m) {
          return M1(c || [], m || [], Cd);
        }
        function EV(c, m) {
          return M1(c || [], m || [], Id);
        }
        var PV = tn(function(c) {
          var m = c.length, k = m > 1 ? c[m - 1] : n;
          return k = typeof k == "function" ? (c.pop(), k) : n, vk(c, k);
        });
        function gk(c) {
          var m = oe(c);
          return m.__chain__ = !0, m;
        }
        function OV(c, m) {
          return m(c), c;
        }
        function ch(c, m) {
          return m(c);
        }
        var DV = Vo(function(c) {
          var m = c.length, k = m ? c[0] : 0, R = this.__wrapped__, Q = function(ue) {
            return Dv(ue, c);
          };
          return m > 1 || this.__actions__.length || !(R instanceof dn) || !Mo(k) ? this.thru(Q) : (R = R.slice(k, +k + (m ? 1 : 0)), R.__actions__.push({
            func: ch,
            args: [Q],
            thisArg: n
          }), new wi(R, this.__chain__).thru(function(ue) {
            return m && !ue.length && ue.push(n), ue;
          }));
        });
        function BV() {
          return gk(this);
        }
        function VV() {
          return new wi(this.value(), this.__chain__);
        }
        function MV() {
          this.__values__ === n && (this.__values__ = Dk(this.value()));
          var c = this.__index__ >= this.__values__.length, m = c ? n : this.__values__[this.__index__++];
          return { done: c, value: m };
        }
        function RV() {
          return this;
        }
        function LV(c) {
          for (var m, k = this; k instanceof Km; ) {
            var R = dk(k);
            R.__index__ = 0, R.__values__ = n, m ? Q.__wrapped__ = R : m = R;
            var Q = R;
            k = k.__wrapped__;
          }
          return Q.__wrapped__ = c, m;
        }
        function FV() {
          var c = this.__wrapped__;
          if (c instanceof dn) {
            var m = c;
            return this.__actions__.length && (m = new dn(this)), m = m.reverse(), m.__actions__.push({
              func: ch,
              args: [og],
              thisArg: n
            }), new wi(m, this.__chain__);
          }
          return this.thru(og);
        }
        function NV() {
          return V1(this.__wrapped__, this.__actions__);
        }
        var UV = th(function(c, m, k) {
          Ue.call(c, k) ? ++c[k] : Do(c, k, 1);
        });
        function $V(c, m, k) {
          var R = Qt(c) ? Dm : OB;
          return k && Pr(c, m, k) && (m = n), R(c, Mt(m, 3));
        }
        function qV(c, m) {
          var k = Qt(c) ? eo : v1;
          return k(c, Mt(m, 3));
        }
        var HV = W1(fk), zV = W1(mk);
        function WV(c, m) {
          return or(uh(c, m), 1);
        }
        function jV(c, m) {
          return or(uh(c, m), ee);
        }
        function YV(c, m, k) {
          return k = k === n ? 1 : Xt(k), or(uh(c, m), k);
        }
        function yk(c, m) {
          var k = Qt(c) ? Hr : ys;
          return k(c, Mt(m, 3));
        }
        function bk(c, m) {
          var k = Qt(c) ? mv : p1;
          return k(c, Mt(m, 3));
        }
        var KV = th(function(c, m, k) {
          Ue.call(c, k) ? c[k].push(m) : Do(c, k, [m]);
        });
        function GV(c, m, k, R) {
          c = Wr(c) ? c : Hc(c), k = k && !R ? Xt(k) : 0;
          var Q = c.length;
          return k < 0 && (k = Ya(Q + k, 0)), _h(c) ? k <= Q && c.indexOf(m, k) > -1 : !!Q && vi(c, m, k) > -1;
        }
        var QV = tn(function(c, m, k) {
          var R = -1, Q = typeof m == "function", ue = Wr(c) ? Ye(c.length) : [];
          return ys(c, function(ye) {
            ue[++R] = Q ? Tr(m, ye, k) : xd(ye, m, k);
          }), ue;
        }), JV = th(function(c, m, k) {
          Do(c, k, m);
        });
        function uh(c, m) {
          var k = Qt(c) ? Un : S1;
          return k(c, Mt(m, 3));
        }
        function XV(c, m, k, R) {
          return c == null ? [] : (Qt(m) || (m = m == null ? [] : [m]), k = R ? n : k, Qt(k) || (k = k == null ? [] : [k]), T1(c, m, k));
        }
        var ZV = th(function(c, m, k) {
          c[k ? 0 : 1].push(m);
        }, function() {
          return [[], []];
        });
        function eM(c, m, k) {
          var R = Qt(c) ? md : Mm, Q = arguments.length < 3;
          return R(c, Mt(m, 4), k, Q, ys);
        }
        function tM(c, m, k) {
          var R = Qt(c) ? hv : Mm, Q = arguments.length < 3;
          return R(c, Mt(m, 4), k, Q, p1);
        }
        function nM(c, m) {
          var k = Qt(c) ? eo : v1;
          return k(c, mh(Mt(m, 3)));
        }
        function aM(c) {
          var m = Qt(c) ? f1 : GB;
          return m(c);
        }
        function rM(c, m, k) {
          (k ? Pr(c, m, k) : m === n) ? m = 1 : m = Xt(m);
          var R = Qt(c) ? xB : QB;
          return R(c, m);
        }
        function iM(c) {
          var m = Qt(c) ? TB : XB;
          return m(c);
        }
        function oM(c) {
          if (c == null)
            return 0;
          if (Wr(c))
            return _h(c) ? ps(c) : c.length;
          var m = vr(c);
          return m == le || m == Ie ? c.size : Fv(c).length;
        }
        function sM(c, m, k) {
          var R = Qt(c) ? hd : ZB;
          return k && Pr(c, m, k) && (m = n), R(c, Mt(m, 3));
        }
        var lM = tn(function(c, m) {
          if (c == null)
            return [];
          var k = m.length;
          return k > 1 && Pr(c, m[0], m[1]) ? m = [] : k > 2 && Pr(m[0], m[1], m[2]) && (m = [m[0]]), T1(c, or(m, 1), []);
        }), dh = qD || function() {
          return ja.Date.now();
        };
        function cM(c, m) {
          if (typeof m != "function")
            throw new L(o);
          return c = Xt(c), function() {
            if (--c < 1)
              return m.apply(this, arguments);
          };
        }
        function wk(c, m, k) {
          return m = k ? n : m, m = c && m == null ? c.length : m, Bo(c, O, n, n, n, n, m);
        }
        function kk(c, m) {
          var k;
          if (typeof m != "function")
            throw new L(o);
          return c = Xt(c), function() {
            return --c > 0 && (k = m.apply(this, arguments)), c <= 1 && (m = n), k;
          };
        }
        var lg = tn(function(c, m, k) {
          var R = b;
          if (k.length) {
            var Q = Bi(k, $c(lg));
            R |= C;
          }
          return Bo(c, R, m, k, Q);
        }), Sk = tn(function(c, m, k) {
          var R = b | p;
          if (k.length) {
            var Q = Bi(k, $c(Sk));
            R |= C;
          }
          return Bo(m, R, c, k, Q);
        });
        function Ck(c, m, k) {
          m = k ? n : m;
          var R = Bo(c, S, n, n, n, n, n, m);
          return R.placeholder = Ck.placeholder, R;
        }
        function Ak(c, m, k) {
          m = k ? n : m;
          var R = Bo(c, E, n, n, n, n, n, m);
          return R.placeholder = Ak.placeholder, R;
        }
        function xk(c, m, k) {
          var R, Q, ue, ye, Oe, Ne, tt = 0, at = !1, ct = !1, yt = !0;
          if (typeof c != "function")
            throw new L(o);
          m = Ai(m) || 0, ha(k) && (at = !!k.leading, ct = "maxWait" in k, ue = ct ? Ya(Ai(k.maxWait) || 0, m) : ue, yt = "trailing" in k ? !!k.trailing : yt);
          function Et(Ea) {
            var Ri = R, Fo = Q;
            return R = Q = n, tt = Ea, ye = c.apply(Fo, Ri), ye;
          }
          function Nt(Ea) {
            return tt = Ea, Oe = Od(on, m), at ? Et(Ea) : ye;
          }
          function Zt(Ea) {
            var Ri = Ea - Ne, Fo = Ea - tt, Wk = m - Ri;
            return ct ? pr(Wk, ue - Fo) : Wk;
          }
          function Ut(Ea) {
            var Ri = Ea - Ne, Fo = Ea - tt;
            return Ne === n || Ri >= m || Ri < 0 || ct && Fo >= ue;
          }
          function on() {
            var Ea = dh();
            if (Ut(Ea))
              return hn(Ea);
            Oe = Od(on, Zt(Ea));
          }
          function hn(Ea) {
            return Oe = n, yt && R ? Et(Ea) : (R = Q = n, ye);
          }
          function ni() {
            Oe !== n && R1(Oe), tt = 0, R = Ne = Q = Oe = n;
          }
          function Or() {
            return Oe === n ? ye : hn(dh());
          }
          function ai() {
            var Ea = dh(), Ri = Ut(Ea);
            if (R = arguments, Q = this, Ne = Ea, Ri) {
              if (Oe === n)
                return Nt(Ne);
              if (ct)
                return R1(Oe), Oe = Od(on, m), Et(Ne);
            }
            return Oe === n && (Oe = Od(on, m)), ye;
          }
          return ai.cancel = ni, ai.flush = Or, ai;
        }
        var uM = tn(function(c, m) {
          return _1(c, 1, m);
        }), dM = tn(function(c, m, k) {
          return _1(c, Ai(m) || 0, k);
        });
        function fM(c) {
          return Bo(c, T);
        }
        function fh(c, m) {
          if (typeof c != "function" || m != null && typeof m != "function")
            throw new L(o);
          var k = function() {
            var R = arguments, Q = m ? m.apply(this, R) : R[0], ue = k.cache;
            if (ue.has(Q))
              return ue.get(Q);
            var ye = c.apply(this, R);
            return k.cache = ue.set(Q, ye) || ue, ye;
          };
          return k.cache = new (fh.Cache || Oo)(), k;
        }
        fh.Cache = Oo;
        function mh(c) {
          if (typeof c != "function")
            throw new L(o);
          return function() {
            var m = arguments;
            switch (m.length) {
              case 0:
                return !c.call(this);
              case 1:
                return !c.call(this, m[0]);
              case 2:
                return !c.call(this, m[0], m[1]);
              case 3:
                return !c.call(this, m[0], m[1], m[2]);
            }
            return !c.apply(this, m);
          };
        }
        function mM(c) {
          return kk(2, c);
        }
        var hM = e2(function(c, m) {
          m = m.length == 1 && Qt(m[0]) ? Un(m[0], Ir(Mt())) : Un(or(m, 1), Ir(Mt()));
          var k = m.length;
          return tn(function(R) {
            for (var Q = -1, ue = pr(R.length, k); ++Q < ue; )
              R[Q] = m[Q].call(this, R[Q]);
            return Tr(c, this, R);
          });
        }), cg = tn(function(c, m) {
          var k = Bi(m, $c(cg));
          return Bo(c, C, n, m, k);
        }), Tk = tn(function(c, m) {
          var k = Bi(m, $c(Tk));
          return Bo(c, B, n, m, k);
        }), _M = Vo(function(c, m) {
          return Bo(c, D, n, n, n, m);
        });
        function pM(c, m) {
          if (typeof c != "function")
            throw new L(o);
          return m = m === n ? m : Xt(m), tn(c, m);
        }
        function vM(c, m) {
          if (typeof c != "function")
            throw new L(o);
          return m = m == null ? 0 : Ya(Xt(m), 0), tn(function(k) {
            var R = k[m], Q = ks(k, 0, m);
            return R && to(Q, R), Tr(c, this, Q);
          });
        }
        function gM(c, m, k) {
          var R = !0, Q = !0;
          if (typeof c != "function")
            throw new L(o);
          return ha(k) && (R = "leading" in k ? !!k.leading : R, Q = "trailing" in k ? !!k.trailing : Q), xk(c, m, {
            leading: R,
            maxWait: m,
            trailing: Q
          });
        }
        function yM(c) {
          return wk(c, 1);
        }
        function bM(c, m) {
          return cg(Yv(m), c);
        }
        function wM() {
          if (!arguments.length)
            return [];
          var c = arguments[0];
          return Qt(c) ? c : [c];
        }
        function kM(c) {
          return ki(c, g);
        }
        function SM(c, m) {
          return m = typeof m == "function" ? m : n, ki(c, g, m);
        }
        function CM(c) {
          return ki(c, f | g);
        }
        function AM(c, m) {
          return m = typeof m == "function" ? m : n, ki(c, f | g, m);
        }
        function xM(c, m) {
          return m == null || h1(c, m, Xa(m));
        }
        function Mi(c, m) {
          return c === m || c !== c && m !== m;
        }
        var TM = ih(Mv), IM = ih(function(c, m) {
          return c >= m;
        }), Cl = b1(/* @__PURE__ */ function() {
          return arguments;
        }()) ? b1 : function(c) {
          return wa(c) && Ue.call(c, "callee") && !xt.call(c, "callee");
        }, Qt = Ye.isArray, EM = xm ? Ir(xm) : LB;
        function Wr(c) {
          return c != null && hh(c.length) && !Ro(c);
        }
        function Ia(c) {
          return wa(c) && Wr(c);
        }
        function PM(c) {
          return c === !0 || c === !1 || wa(c) && Er(c) == we;
        }
        var Ss = zD || bg, OM = Tm ? Ir(Tm) : FB;
        function DM(c) {
          return wa(c) && c.nodeType === 1 && !Dd(c);
        }
        function BM(c) {
          if (c == null)
            return !0;
          if (Wr(c) && (Qt(c) || typeof c == "string" || typeof c.splice == "function" || Ss(c) || qc(c) || Cl(c)))
            return !c.length;
          var m = vr(c);
          if (m == le || m == Ie)
            return !c.size;
          if (Pd(c))
            return !Fv(c).length;
          for (var k in c)
            if (Ue.call(c, k))
              return !1;
          return !0;
        }
        function VM(c, m) {
          return Td(c, m);
        }
        function MM(c, m, k) {
          k = typeof k == "function" ? k : n;
          var R = k ? k(c, m) : n;
          return R === n ? Td(c, m, n, k) : !!R;
        }
        function ug(c) {
          if (!wa(c))
            return !1;
          var m = Er(c);
          return m == ce || m == Re || typeof c.message == "string" && typeof c.name == "string" && !Dd(c);
        }
        function RM(c) {
          return typeof c == "number" && l1(c);
        }
        function Ro(c) {
          if (!ha(c))
            return !1;
          var m = Er(c);
          return m == te || m == G || m == H || m == ge;
        }
        function Ik(c) {
          return typeof c == "number" && c == Xt(c);
        }
        function hh(c) {
          return typeof c == "number" && c > -1 && c % 1 == 0 && c <= de;
        }
        function ha(c) {
          var m = typeof c;
          return c != null && (m == "object" || m == "function");
        }
        function wa(c) {
          return c != null && typeof c == "object";
        }
        var Ek = Im ? Ir(Im) : UB;
        function LM(c, m) {
          return c === m || Lv(c, m, eg(m));
        }
        function FM(c, m, k) {
          return k = typeof k == "function" ? k : n, Lv(c, m, eg(m), k);
        }
        function NM(c) {
          return Pk(c) && c != +c;
        }
        function UM(c) {
          if (S2(c))
            throw new jt(i);
          return w1(c);
        }
        function $M(c) {
          return c === null;
        }
        function qM(c) {
          return c == null;
        }
        function Pk(c) {
          return typeof c == "number" || wa(c) && Er(c) == K;
        }
        function Dd(c) {
          if (!wa(c) || Er(c) != Te)
            return !1;
          var m = ma(c);
          if (m === null)
            return !0;
          var k = Ue.call(m, "constructor") && m.constructor;
          return typeof k == "function" && k instanceof k && qe.call(k) == St;
        }
        var dg = Ec ? Ir(Ec) : $B;
        function HM(c) {
          return Ik(c) && c >= -de && c <= de;
        }
        var Ok = Em ? Ir(Em) : qB;
        function _h(c) {
          return typeof c == "string" || !Qt(c) && wa(c) && Er(c) == Je;
        }
        function ti(c) {
          return typeof c == "symbol" || wa(c) && Er(c) == _e;
        }
        var qc = Pm ? Ir(Pm) : HB;
        function zM(c) {
          return c === n;
        }
        function WM(c) {
          return wa(c) && vr(c) == Ze;
        }
        function jM(c) {
          return wa(c) && Er(c) == _t;
        }
        var YM = ih(Nv), KM = ih(function(c, m) {
          return c <= m;
        });
        function Dk(c) {
          if (!c)
            return [];
          if (Wr(c))
            return _h(c) ? Zr(c) : zr(c);
          if (yi && c[yi])
            return Um(c[yi]());
          var m = vr(c), k = m == le ? Vc : m == Ie ? Mc : Hc;
          return k(c);
        }
        function Lo(c) {
          if (!c)
            return c === 0 ? c : 0;
          if (c = Ai(c), c === ee || c === -ee) {
            var m = c < 0 ? -1 : 1;
            return m * Z;
          }
          return c === c ? c : 0;
        }
        function Xt(c) {
          var m = Lo(c), k = m % 1;
          return m === m ? k ? m - k : m : 0;
        }
        function Bk(c) {
          return c ? bl(Xt(c), 0, Y) : 0;
        }
        function Ai(c) {
          if (typeof c == "number")
            return c;
          if (ti(c))
            return F;
          if (ha(c)) {
            var m = typeof c.valueOf == "function" ? c.valueOf() : c;
            c = ha(m) ? m + "" : m;
          }
          if (typeof c != "string")
            return c === 0 ? c : +c;
          c = Lm(c);
          var k = kc.test(c);
          return k || dl.test(c) ? dv(c.slice(2), k ? 2 : 8) : Hp.test(c) ? F : +c;
        }
        function Vk(c) {
          return ao(c, jr(c));
        }
        function GM(c) {
          return c ? bl(Xt(c), -de, de) : c === 0 ? c : 0;
        }
        function Sn(c) {
          return c == null ? "" : ei(c);
        }
        var QM = Nc(function(c, m) {
          if (Pd(m) || Wr(m)) {
            ao(m, Xa(m), c);
            return;
          }
          for (var k in m)
            Ue.call(m, k) && Cd(c, k, m[k]);
        }), Mk = Nc(function(c, m) {
          ao(m, jr(m), c);
        }), ph = Nc(function(c, m, k, R) {
          ao(m, jr(m), c, R);
        }), JM = Nc(function(c, m, k, R) {
          ao(m, Xa(m), c, R);
        }), XM = Vo(Dv);
        function ZM(c, m) {
          var k = Fc(c);
          return m == null ? k : m1(k, m);
        }
        var eR = tn(function(c, m) {
          c = In(c);
          var k = -1, R = m.length, Q = R > 2 ? m[2] : n;
          for (Q && Pr(m[0], m[1], Q) && (R = 1); ++k < R; )
            for (var ue = m[k], ye = jr(ue), Oe = -1, Ne = ye.length; ++Oe < Ne; ) {
              var tt = ye[Oe], at = c[tt];
              (at === n || Mi(at, me[tt]) && !Ue.call(c, tt)) && (c[tt] = ue[tt]);
            }
          return c;
        }), tR = tn(function(c) {
          return c.push(n, X1), Tr(Rk, n, c);
        });
        function nR(c, m) {
          return Oc(c, Mt(m, 3), no);
        }
        function aR(c, m) {
          return Oc(c, Mt(m, 3), Vv);
        }
        function rR(c, m) {
          return c == null ? c : Bv(c, Mt(m, 3), jr);
        }
        function iR(c, m) {
          return c == null ? c : g1(c, Mt(m, 3), jr);
        }
        function oR(c, m) {
          return c && no(c, Mt(m, 3));
        }
        function sR(c, m) {
          return c && Vv(c, Mt(m, 3));
        }
        function lR(c) {
          return c == null ? [] : Jm(c, Xa(c));
        }
        function cR(c) {
          return c == null ? [] : Jm(c, jr(c));
        }
        function fg(c, m, k) {
          var R = c == null ? n : wl(c, m);
          return R === n ? k : R;
        }
        function uR(c, m) {
          return c != null && tk(c, m, BB);
        }
        function mg(c, m) {
          return c != null && tk(c, m, VB);
        }
        var dR = Y1(function(c, m, k) {
          m != null && typeof m.toString != "function" && (m = mt.call(m)), c[m] = k;
        }, _g(Yr)), fR = Y1(function(c, m, k) {
          m != null && typeof m.toString != "function" && (m = mt.call(m)), Ue.call(c, m) ? c[m].push(k) : c[m] = [k];
        }, Mt), mR = tn(xd);
        function Xa(c) {
          return Wr(c) ? d1(c) : Fv(c);
        }
        function jr(c) {
          return Wr(c) ? d1(c, !0) : zB(c);
        }
        function hR(c, m) {
          var k = {};
          return m = Mt(m, 3), no(c, function(R, Q, ue) {
            Do(k, m(R, Q, ue), R);
          }), k;
        }
        function _R(c, m) {
          var k = {};
          return m = Mt(m, 3), no(c, function(R, Q, ue) {
            Do(k, Q, m(R, Q, ue));
          }), k;
        }
        var pR = Nc(function(c, m, k) {
          Xm(c, m, k);
        }), Rk = Nc(function(c, m, k, R) {
          Xm(c, m, k, R);
        }), vR = Vo(function(c, m) {
          var k = {};
          if (c == null)
            return k;
          var R = !1;
          m = Un(m, function(ue) {
            return ue = ws(ue, c), R || (R = ue.length > 1), ue;
          }), ao(c, Xv(c), k), R && (k = ki(k, f | _ | g, d2));
          for (var Q = m.length; Q--; )
            zv(k, m[Q]);
          return k;
        });
        function gR(c, m) {
          return Lk(c, mh(Mt(m)));
        }
        var yR = Vo(function(c, m) {
          return c == null ? {} : jB(c, m);
        });
        function Lk(c, m) {
          if (c == null)
            return {};
          var k = Un(Xv(c), function(R) {
            return [R];
          });
          return m = Mt(m), I1(c, k, function(R, Q) {
            return m(R, Q[0]);
          });
        }
        function bR(c, m, k) {
          m = ws(m, c);
          var R = -1, Q = m.length;
          for (Q || (Q = 1, c = n); ++R < Q; ) {
            var ue = c == null ? n : c[ro(m[R])];
            ue === n && (R = Q, ue = k), c = Ro(ue) ? ue.call(c) : ue;
          }
          return c;
        }
        function wR(c, m, k) {
          return c == null ? c : Id(c, m, k);
        }
        function kR(c, m, k, R) {
          return R = typeof R == "function" ? R : n, c == null ? c : Id(c, m, k, R);
        }
        var Fk = Q1(Xa), Nk = Q1(jr);
        function SR(c, m, k) {
          var R = Qt(c), Q = R || Ss(c) || qc(c);
          if (m = Mt(m, 4), k == null) {
            var ue = c && c.constructor;
            Q ? k = R ? new ue() : [] : ha(c) ? k = Ro(ue) ? Fc(ma(c)) : {} : k = {};
          }
          return (Q ? Hr : no)(c, function(ye, Oe, Ne) {
            return m(k, ye, Oe, Ne);
          }), k;
        }
        function CR(c, m) {
          return c == null ? !0 : zv(c, m);
        }
        function AR(c, m, k) {
          return c == null ? c : B1(c, m, Yv(k));
        }
        function xR(c, m, k, R) {
          return R = typeof R == "function" ? R : n, c == null ? c : B1(c, m, Yv(k), R);
        }
        function Hc(c) {
          return c == null ? [] : vd(c, Xa(c));
        }
        function TR(c) {
          return c == null ? [] : vd(c, jr(c));
        }
        function IR(c, m, k) {
          return k === n && (k = m, m = n), k !== n && (k = Ai(k), k = k === k ? k : 0), m !== n && (m = Ai(m), m = m === m ? m : 0), bl(Ai(c), m, k);
        }
        function ER(c, m, k) {
          return m = Lo(m), k === n ? (k = m, m = 0) : k = Lo(k), c = Ai(c), MB(c, m, k);
        }
        function PR(c, m, k) {
          if (k && typeof k != "boolean" && Pr(c, m, k) && (m = k = n), k === n && (typeof m == "boolean" ? (k = m, m = n) : typeof c == "boolean" && (k = c, c = n)), c === n && m === n ? (c = 0, m = 1) : (c = Lo(c), m === n ? (m = c, c = 0) : m = Lo(m)), c > m) {
            var R = c;
            c = m, m = R;
          }
          if (k || c % 1 || m % 1) {
            var Q = c1();
            return pr(c + Q * (m - c + ld("1e-" + ((Q + "").length - 1))), m);
          }
          return $v(c, m);
        }
        var OR = Uc(function(c, m, k) {
          return m = m.toLowerCase(), c + (k ? Uk(m) : m);
        });
        function Uk(c) {
          return hg(Sn(c).toLowerCase());
        }
        function $k(c) {
          return c = Sn(c), c && c.replace(Sc, Fm).replace(av, "");
        }
        function DR(c, m, k) {
          c = Sn(c), m = ei(m);
          var R = c.length;
          k = k === n ? R : bl(Xt(k), 0, R);
          var Q = k;
          return k -= m.length, k >= 0 && c.slice(k, Q) == m;
        }
        function BR(c) {
          return c = Sn(c), c && pt.test(c) ? c.replace(je, Yn) : c;
        }
        function VR(c) {
          return c = Sn(c), c && lm.test(c) ? c.replace(Ji, "\\$&") : c;
        }
        var MR = Uc(function(c, m, k) {
          return c + (k ? "-" : "") + m.toLowerCase();
        }), RR = Uc(function(c, m, k) {
          return c + (k ? " " : "") + m.toLowerCase();
        }), LR = z1("toLowerCase");
        function FR(c, m, k) {
          c = Sn(c), m = Xt(m);
          var R = m ? ps(c) : 0;
          if (!m || R >= m)
            return c;
          var Q = (m - R) / 2;
          return rh(Wm(Q), k) + c + rh(zm(Q), k);
        }
        function NR(c, m, k) {
          c = Sn(c), m = Xt(m);
          var R = m ? ps(c) : 0;
          return m && R < m ? c + rh(m - R, k) : c;
        }
        function UR(c, m, k) {
          c = Sn(c), m = Xt(m);
          var R = m ? ps(c) : 0;
          return m && R < m ? rh(m - R, k) + c : c;
        }
        function $R(c, m, k) {
          return k || m == null ? m = 0 : m && (m = +m), KD(Sn(c).replace(wc, ""), m || 0);
        }
        function qR(c, m, k) {
          return (k ? Pr(c, m, k) : m === n) ? m = 1 : m = Xt(m), qv(Sn(c), m);
        }
        function HR() {
          var c = arguments, m = Sn(c[0]);
          return c.length < 3 ? m : m.replace(c[1], c[2]);
        }
        var zR = Uc(function(c, m, k) {
          return c + (k ? "_" : "") + m.toLowerCase();
        });
        function WR(c, m, k) {
          return k && typeof k != "number" && Pr(c, m, k) && (m = k = n), k = k === n ? Y : k >>> 0, k ? (c = Sn(c), c && (typeof m == "string" || m != null && !dg(m)) && (m = ei(m), !m && Tn(c)) ? ks(Zr(c), 0, k) : c.split(m, k)) : [];
        }
        var jR = Uc(function(c, m, k) {
          return c + (k ? " " : "") + hg(m);
        });
        function YR(c, m, k) {
          return c = Sn(c), k = k == null ? 0 : bl(Xt(k), 0, c.length), m = ei(m), c.slice(k, k + m.length) == m;
        }
        function KR(c, m, k) {
          var R = oe.templateSettings;
          k && Pr(c, m, k) && (m = n), c = Sn(c), m = ph({}, m, R, J1);
          var Q = ph({}, m.imports, R.imports, J1), ue = Xa(Q), ye = vd(Q, ue), Oe, Ne, tt = 0, at = m.interpolate || Xi, ct = "__p += '", yt = gs(
            (m.escape || Xi).source + "|" + at.source + "|" + (at === _r ? ul : Xi).source + "|" + (m.evaluate || Xi).source + "|$",
            "g"
          ), Et = "//# sourceURL=" + (Ue.call(m, "sourceURL") ? (m.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++lv + "]") + `
`;
          c.replace(yt, function(Ut, on, hn, ni, Or, ai) {
            return hn || (hn = ni), ct += c.slice(tt, ai).replace(um, pl), on && (Oe = !0, ct += `' +
__e(` + on + `) +
'`), Or && (Ne = !0, ct += `';
` + Or + `;
__p += '`), hn && (ct += `' +
((__t = (` + hn + `)) == null ? '' : __t) +
'`), tt = ai + Ut.length, Ut;
          }), ct += `';
`;
          var Nt = Ue.call(m, "variable") && m.variable;
          if (!Nt)
            ct = `with (obj) {
` + ct + `
}
`;
          else if ($p.test(Nt))
            throw new jt(l);
          ct = (Ne ? ct.replace(xe, "") : ct).replace(ze, "$1").replace(ft, "$1;"), ct = "function(" + (Nt || "obj") + `) {
` + (Nt ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (Oe ? ", __e = _.escape" : "") + (Ne ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + ct + `return __p
}`;
          var Zt = Hk(function() {
            return gn(ue, Et + "return " + ct).apply(n, ye);
          });
          if (Zt.source = ct, ug(Zt))
            throw Zt;
          return Zt;
        }
        function GR(c) {
          return Sn(c).toLowerCase();
        }
        function QR(c) {
          return Sn(c).toUpperCase();
        }
        function JR(c, m, k) {
          if (c = Sn(c), c && (k || m === n))
            return Lm(c);
          if (!c || !(m = ei(m)))
            return c;
          var R = Zr(c), Q = Zr(m), ue = aa(R, Q), ye = gi(R, Q) + 1;
          return ks(R, ue, ye).join("");
        }
        function XR(c, m, k) {
          if (c = Sn(c), c && (k || m === n))
            return c.slice(0, $m(c) + 1);
          if (!c || !(m = ei(m)))
            return c;
          var R = Zr(c), Q = gi(R, Zr(m)) + 1;
          return ks(R, 0, Q).join("");
        }
        function ZR(c, m, k) {
          if (c = Sn(c), c && (k || m === n))
            return c.replace(wc, "");
          if (!c || !(m = ei(m)))
            return c;
          var R = Zr(c), Q = aa(R, Zr(m));
          return ks(R, Q).join("");
        }
        function eL(c, m) {
          var k = P, R = I;
          if (ha(m)) {
            var Q = "separator" in m ? m.separator : Q;
            k = "length" in m ? Xt(m.length) : k, R = "omission" in m ? ei(m.omission) : R;
          }
          c = Sn(c);
          var ue = c.length;
          if (Tn(c)) {
            var ye = Zr(c);
            ue = ye.length;
          }
          if (k >= ue)
            return c;
          var Oe = k - ps(R);
          if (Oe < 1)
            return R;
          var Ne = ye ? ks(ye, 0, Oe).join("") : c.slice(0, Oe);
          if (Q === n)
            return Ne + R;
          if (ye && (Oe += Ne.length - Oe), dg(Q)) {
            if (c.slice(Oe).search(Q)) {
              var tt, at = Ne;
              for (Q.global || (Q = gs(Q.source, Sn(cm.exec(Q)) + "g")), Q.lastIndex = 0; tt = Q.exec(at); )
                var ct = tt.index;
              Ne = Ne.slice(0, ct === n ? Oe : ct);
            }
          } else if (c.indexOf(ei(Q), Oe) != Oe) {
            var yt = Ne.lastIndexOf(Q);
            yt > -1 && (Ne = Ne.slice(0, yt));
          }
          return Ne + R;
        }
        function tL(c) {
          return c = Sn(c), c && st.test(c) ? c.replace(it, Sv) : c;
        }
        var nL = Uc(function(c, m, k) {
          return c + (k ? " " : "") + m.toUpperCase();
        }), hg = z1("toUpperCase");
        function qk(c, m, k) {
          return c = Sn(c), m = k ? n : m, m === n ? Nm(c) ? xv(c) : vv(c) : c.match(m) || [];
        }
        var Hk = tn(function(c, m) {
          try {
            return Tr(c, n, m);
          } catch (k) {
            return ug(k) ? k : new jt(k);
          }
        }), aL = Vo(function(c, m) {
          return Hr(m, function(k) {
            k = ro(k), Do(c, k, lg(c[k], c));
          }), c;
        });
        function rL(c) {
          var m = c == null ? 0 : c.length, k = Mt();
          return c = m ? Un(c, function(R) {
            if (typeof R[1] != "function")
              throw new L(o);
            return [k(R[0]), R[1]];
          }) : [], tn(function(R) {
            for (var Q = -1; ++Q < m; ) {
              var ue = c[Q];
              if (Tr(ue[0], this, R))
                return Tr(ue[1], this, R);
            }
          });
        }
        function iL(c) {
          return PB(ki(c, f));
        }
        function _g(c) {
          return function() {
            return c;
          };
        }
        function oL(c, m) {
          return c == null || c !== c ? m : c;
        }
        var sL = j1(), lL = j1(!0);
        function Yr(c) {
          return c;
        }
        function pg(c) {
          return k1(typeof c == "function" ? c : ki(c, f));
        }
        function cL(c) {
          return C1(ki(c, f));
        }
        function uL(c, m) {
          return A1(c, ki(m, f));
        }
        var dL = tn(function(c, m) {
          return function(k) {
            return xd(k, c, m);
          };
        }), fL = tn(function(c, m) {
          return function(k) {
            return xd(c, k, m);
          };
        });
        function vg(c, m, k) {
          var R = Xa(m), Q = Jm(m, R);
          k == null && !(ha(m) && (Q.length || !R.length)) && (k = m, m = c, c = this, Q = Jm(m, Xa(m)));
          var ue = !(ha(k) && "chain" in k) || !!k.chain, ye = Ro(c);
          return Hr(Q, function(Oe) {
            var Ne = m[Oe];
            c[Oe] = Ne, ye && (c.prototype[Oe] = function() {
              var tt = this.__chain__;
              if (ue || tt) {
                var at = c(this.__wrapped__), ct = at.__actions__ = zr(this.__actions__);
                return ct.push({ func: Ne, args: arguments, thisArg: c }), at.__chain__ = tt, at;
              }
              return Ne.apply(c, to([this.value()], arguments));
            });
          }), c;
        }
        function mL() {
          return ja._ === this && (ja._ = $t), this;
        }
        function gg() {
        }
        function hL(c) {
          return c = Xt(c), tn(function(m) {
            return x1(m, c);
          });
        }
        var _L = Gv(Un), pL = Gv(Dm), vL = Gv(hd);
        function zk(c) {
          return ng(c) ? _d(ro(c)) : YB(c);
        }
        function gL(c) {
          return function(m) {
            return c == null ? n : wl(c, m);
          };
        }
        var yL = K1(), bL = K1(!0);
        function yg() {
          return [];
        }
        function bg() {
          return !1;
        }
        function wL() {
          return {};
        }
        function kL() {
          return "";
        }
        function SL() {
          return !0;
        }
        function CL(c, m) {
          if (c = Xt(c), c < 1 || c > de)
            return [];
          var k = Y, R = pr(c, Y);
          m = Mt(m), c -= Y;
          for (var Q = pd(R, m); ++k < c; )
            m(k);
          return Q;
        }
        function AL(c) {
          return Qt(c) ? Un(c, ro) : ti(c) ? [c] : zr(uk(Sn(c)));
        }
        function xL(c) {
          var m = ++Ke;
          return Sn(c) + m;
        }
        var TL = ah(function(c, m) {
          return c + m;
        }, 0), IL = Qv("ceil"), EL = ah(function(c, m) {
          return c / m;
        }, 1), PL = Qv("floor");
        function OL(c) {
          return c && c.length ? Qm(c, Yr, Mv) : n;
        }
        function DL(c, m) {
          return c && c.length ? Qm(c, Mt(m, 2), Mv) : n;
        }
        function BL(c) {
          return Vm(c, Yr);
        }
        function VL(c, m) {
          return Vm(c, Mt(m, 2));
        }
        function ML(c) {
          return c && c.length ? Qm(c, Yr, Nv) : n;
        }
        function RL(c, m) {
          return c && c.length ? Qm(c, Mt(m, 2), Nv) : n;
        }
        var LL = ah(function(c, m) {
          return c * m;
        }, 1), FL = Qv("round"), NL = ah(function(c, m) {
          return c - m;
        }, 0);
        function UL(c) {
          return c && c.length ? Bc(c, Yr) : 0;
        }
        function $L(c, m) {
          return c && c.length ? Bc(c, Mt(m, 2)) : 0;
        }
        return oe.after = cM, oe.ary = wk, oe.assign = QM, oe.assignIn = Mk, oe.assignInWith = ph, oe.assignWith = JM, oe.at = XM, oe.before = kk, oe.bind = lg, oe.bindAll = aL, oe.bindKey = Sk, oe.castArray = wM, oe.chain = gk, oe.chunk = P2, oe.compact = O2, oe.concat = D2, oe.cond = rL, oe.conforms = iL, oe.constant = _g, oe.countBy = UV, oe.create = ZM, oe.curry = Ck, oe.curryRight = Ak, oe.debounce = xk, oe.defaults = eR, oe.defaultsDeep = tR, oe.defer = uM, oe.delay = dM, oe.difference = B2, oe.differenceBy = V2, oe.differenceWith = M2, oe.drop = R2, oe.dropRight = L2, oe.dropRightWhile = F2, oe.dropWhile = N2, oe.fill = U2, oe.filter = qV, oe.flatMap = WV, oe.flatMapDeep = jV, oe.flatMapDepth = YV, oe.flatten = hk, oe.flattenDeep = $2, oe.flattenDepth = q2, oe.flip = fM, oe.flow = sL, oe.flowRight = lL, oe.fromPairs = H2, oe.functions = lR, oe.functionsIn = cR, oe.groupBy = KV, oe.initial = W2, oe.intersection = j2, oe.intersectionBy = Y2, oe.intersectionWith = K2, oe.invert = dR, oe.invertBy = fR, oe.invokeMap = QV, oe.iteratee = pg, oe.keyBy = JV, oe.keys = Xa, oe.keysIn = jr, oe.map = uh, oe.mapKeys = hR, oe.mapValues = _R, oe.matches = cL, oe.matchesProperty = uL, oe.memoize = fh, oe.merge = pR, oe.mergeWith = Rk, oe.method = dL, oe.methodOf = fL, oe.mixin = vg, oe.negate = mh, oe.nthArg = hL, oe.omit = vR, oe.omitBy = gR, oe.once = mM, oe.orderBy = XV, oe.over = _L, oe.overArgs = hM, oe.overEvery = pL, oe.overSome = vL, oe.partial = cg, oe.partialRight = Tk, oe.partition = ZV, oe.pick = yR, oe.pickBy = Lk, oe.property = zk, oe.propertyOf = gL, oe.pull = X2, oe.pullAll = pk, oe.pullAllBy = Z2, oe.pullAllWith = eV, oe.pullAt = tV, oe.range = yL, oe.rangeRight = bL, oe.rearg = _M, oe.reject = nM, oe.remove = nV, oe.rest = pM, oe.reverse = og, oe.sampleSize = rM, oe.set = wR, oe.setWith = kR, oe.shuffle = iM, oe.slice = aV, oe.sortBy = lM, oe.sortedUniq = uV, oe.sortedUniqBy = dV, oe.split = WR, oe.spread = vM, oe.tail = fV, oe.take = mV, oe.takeRight = hV, oe.takeRightWhile = _V, oe.takeWhile = pV, oe.tap = OV, oe.throttle = gM, oe.thru = ch, oe.toArray = Dk, oe.toPairs = Fk, oe.toPairsIn = Nk, oe.toPath = AL, oe.toPlainObject = Vk, oe.transform = SR, oe.unary = yM, oe.union = vV, oe.unionBy = gV, oe.unionWith = yV, oe.uniq = bV, oe.uniqBy = wV, oe.uniqWith = kV, oe.unset = CR, oe.unzip = sg, oe.unzipWith = vk, oe.update = AR, oe.updateWith = xR, oe.values = Hc, oe.valuesIn = TR, oe.without = SV, oe.words = qk, oe.wrap = bM, oe.xor = CV, oe.xorBy = AV, oe.xorWith = xV, oe.zip = TV, oe.zipObject = IV, oe.zipObjectDeep = EV, oe.zipWith = PV, oe.entries = Fk, oe.entriesIn = Nk, oe.extend = Mk, oe.extendWith = ph, vg(oe, oe), oe.add = TL, oe.attempt = Hk, oe.camelCase = OR, oe.capitalize = Uk, oe.ceil = IL, oe.clamp = IR, oe.clone = kM, oe.cloneDeep = CM, oe.cloneDeepWith = AM, oe.cloneWith = SM, oe.conformsTo = xM, oe.deburr = $k, oe.defaultTo = oL, oe.divide = EL, oe.endsWith = DR, oe.eq = Mi, oe.escape = BR, oe.escapeRegExp = VR, oe.every = $V, oe.find = HV, oe.findIndex = fk, oe.findKey = nR, oe.findLast = zV, oe.findLastIndex = mk, oe.findLastKey = aR, oe.floor = PL, oe.forEach = yk, oe.forEachRight = bk, oe.forIn = rR, oe.forInRight = iR, oe.forOwn = oR, oe.forOwnRight = sR, oe.get = fg, oe.gt = TM, oe.gte = IM, oe.has = uR, oe.hasIn = mg, oe.head = _k, oe.identity = Yr, oe.includes = GV, oe.indexOf = z2, oe.inRange = ER, oe.invoke = mR, oe.isArguments = Cl, oe.isArray = Qt, oe.isArrayBuffer = EM, oe.isArrayLike = Wr, oe.isArrayLikeObject = Ia, oe.isBoolean = PM, oe.isBuffer = Ss, oe.isDate = OM, oe.isElement = DM, oe.isEmpty = BM, oe.isEqual = VM, oe.isEqualWith = MM, oe.isError = ug, oe.isFinite = RM, oe.isFunction = Ro, oe.isInteger = Ik, oe.isLength = hh, oe.isMap = Ek, oe.isMatch = LM, oe.isMatchWith = FM, oe.isNaN = NM, oe.isNative = UM, oe.isNil = qM, oe.isNull = $M, oe.isNumber = Pk, oe.isObject = ha, oe.isObjectLike = wa, oe.isPlainObject = Dd, oe.isRegExp = dg, oe.isSafeInteger = HM, oe.isSet = Ok, oe.isString = _h, oe.isSymbol = ti, oe.isTypedArray = qc, oe.isUndefined = zM, oe.isWeakMap = WM, oe.isWeakSet = jM, oe.join = G2, oe.kebabCase = MR, oe.last = Ci, oe.lastIndexOf = Q2, oe.lowerCase = RR, oe.lowerFirst = LR, oe.lt = YM, oe.lte = KM, oe.max = OL, oe.maxBy = DL, oe.mean = BL, oe.meanBy = VL, oe.min = ML, oe.minBy = RL, oe.stubArray = yg, oe.stubFalse = bg, oe.stubObject = wL, oe.stubString = kL, oe.stubTrue = SL, oe.multiply = LL, oe.nth = J2, oe.noConflict = mL, oe.noop = gg, oe.now = dh, oe.pad = FR, oe.padEnd = NR, oe.padStart = UR, oe.parseInt = $R, oe.random = PR, oe.reduce = eM, oe.reduceRight = tM, oe.repeat = qR, oe.replace = HR, oe.result = bR, oe.round = FL, oe.runInContext = Le, oe.sample = aM, oe.size = oM, oe.snakeCase = zR, oe.some = sM, oe.sortedIndex = rV, oe.sortedIndexBy = iV, oe.sortedIndexOf = oV, oe.sortedLastIndex = sV, oe.sortedLastIndexBy = lV, oe.sortedLastIndexOf = cV, oe.startCase = jR, oe.startsWith = YR, oe.subtract = NL, oe.sum = UL, oe.sumBy = $L, oe.template = KR, oe.times = CL, oe.toFinite = Lo, oe.toInteger = Xt, oe.toLength = Bk, oe.toLower = GR, oe.toNumber = Ai, oe.toSafeInteger = GM, oe.toString = Sn, oe.toUpper = QR, oe.trim = JR, oe.trimEnd = XR, oe.trimStart = ZR, oe.truncate = eL, oe.unescape = tL, oe.uniqueId = xL, oe.upperCase = nL, oe.upperFirst = hg, oe.each = yk, oe.eachRight = bk, oe.first = _k, vg(oe, function() {
          var c = {};
          return no(oe, function(m, k) {
            Ue.call(oe.prototype, k) || (c[k] = m);
          }), c;
        }(), { chain: !1 }), oe.VERSION = a, Hr(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(c) {
          oe[c].placeholder = oe;
        }), Hr(["drop", "take"], function(c, m) {
          dn.prototype[c] = function(k) {
            k = k === n ? 1 : Ya(Xt(k), 0);
            var R = this.__filtered__ && !m ? new dn(this) : this.clone();
            return R.__filtered__ ? R.__takeCount__ = pr(k, R.__takeCount__) : R.__views__.push({
              size: pr(k, Y),
              type: c + (R.__dir__ < 0 ? "Right" : "")
            }), R;
          }, dn.prototype[c + "Right"] = function(k) {
            return this.reverse()[c](k).reverse();
          };
        }), Hr(["filter", "map", "takeWhile"], function(c, m) {
          var k = m + 1, R = k == N || k == j;
          dn.prototype[c] = function(Q) {
            var ue = this.clone();
            return ue.__iteratees__.push({
              iteratee: Mt(Q, 3),
              type: k
            }), ue.__filtered__ = ue.__filtered__ || R, ue;
          };
        }), Hr(["head", "last"], function(c, m) {
          var k = "take" + (m ? "Right" : "");
          dn.prototype[c] = function() {
            return this[k](1).value()[0];
          };
        }), Hr(["initial", "tail"], function(c, m) {
          var k = "drop" + (m ? "" : "Right");
          dn.prototype[c] = function() {
            return this.__filtered__ ? new dn(this) : this[k](1);
          };
        }), dn.prototype.compact = function() {
          return this.filter(Yr);
        }, dn.prototype.find = function(c) {
          return this.filter(c).head();
        }, dn.prototype.findLast = function(c) {
          return this.reverse().find(c);
        }, dn.prototype.invokeMap = tn(function(c, m) {
          return typeof c == "function" ? new dn(this) : this.map(function(k) {
            return xd(k, c, m);
          });
        }), dn.prototype.reject = function(c) {
          return this.filter(mh(Mt(c)));
        }, dn.prototype.slice = function(c, m) {
          c = Xt(c);
          var k = this;
          return k.__filtered__ && (c > 0 || m < 0) ? new dn(k) : (c < 0 ? k = k.takeRight(-c) : c && (k = k.drop(c)), m !== n && (m = Xt(m), k = m < 0 ? k.dropRight(-m) : k.take(m - c)), k);
        }, dn.prototype.takeRightWhile = function(c) {
          return this.reverse().takeWhile(c).reverse();
        }, dn.prototype.toArray = function() {
          return this.take(Y);
        }, no(dn.prototype, function(c, m) {
          var k = /^(?:filter|find|map|reject)|While$/.test(m), R = /^(?:head|last)$/.test(m), Q = oe[R ? "take" + (m == "last" ? "Right" : "") : m], ue = R || /^find/.test(m);
          Q && (oe.prototype[m] = function() {
            var ye = this.__wrapped__, Oe = R ? [1] : arguments, Ne = ye instanceof dn, tt = Oe[0], at = Ne || Qt(ye), ct = function(on) {
              var hn = Q.apply(oe, to([on], Oe));
              return R && yt ? hn[0] : hn;
            };
            at && k && typeof tt == "function" && tt.length != 1 && (Ne = at = !1);
            var yt = this.__chain__, Et = !!this.__actions__.length, Nt = ue && !yt, Zt = Ne && !Et;
            if (!ue && at) {
              ye = Zt ? ye : new dn(this);
              var Ut = c.apply(ye, Oe);
              return Ut.__actions__.push({ func: ch, args: [ct], thisArg: n }), new wi(Ut, yt);
            }
            return Nt && Zt ? c.apply(this, Oe) : (Ut = this.thru(ct), Nt ? R ? Ut.value()[0] : Ut.value() : Ut);
          });
        }), Hr(["pop", "push", "shift", "sort", "splice", "unshift"], function(c) {
          var m = U[c], k = /^(?:push|sort|unshift)$/.test(c) ? "tap" : "thru", R = /^(?:pop|shift)$/.test(c);
          oe.prototype[c] = function() {
            var Q = arguments;
            if (R && !this.__chain__) {
              var ue = this.value();
              return m.apply(Qt(ue) ? ue : [], Q);
            }
            return this[k](function(ye) {
              return m.apply(Qt(ye) ? ye : [], Q);
            });
          };
        }), no(dn.prototype, function(c, m) {
          var k = oe[m];
          if (k) {
            var R = k.name + "";
            Ue.call(Lc, R) || (Lc[R] = []), Lc[R].push({ name: m, func: k });
          }
        }), Lc[nh(n, p).name] = [{
          name: "wrapper",
          func: n
        }], dn.prototype.clone = tB, dn.prototype.reverse = nB, dn.prototype.value = aB, oe.prototype.at = DV, oe.prototype.chain = BV, oe.prototype.commit = VV, oe.prototype.next = MV, oe.prototype.plant = LV, oe.prototype.reverse = FV, oe.prototype.toJSON = oe.prototype.valueOf = oe.prototype.value = NV, oe.prototype.first = oe.prototype.head, yi && (oe.prototype[yi] = RV), oe;
      }, vs = Tv();
      Eo ? ((Eo.exports = vs)._ = vs, ud._ = vs) : ja._ = vs;
    }).call(_X);
  }(jd, jd.exports)), jd.exports;
}
var vX = pX();
const Ni = /* @__PURE__ */ aD(vX);
var by = {}, rD = (e, t, n) => {
  if (!t.has(e))
    throw TypeError("Cannot " + n);
}, DA = (e, t, n) => (rD(e, t, "read from private field"), n ? n.call(e) : t.get(e)), gX = (e, t, n) => {
  if (t.has(e))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(e) : t.set(e, n);
}, yX = (e, t, n, a) => (rD(e, t, "write to private field"), t.set(e, n), n);
const iD = [
  ["aztec", "Aztec"],
  ["code_128", "Code128"],
  ["code_39", "Code39"],
  ["code_93", "Code93"],
  ["codabar", "Codabar"],
  ["databar", "DataBar"],
  ["databar_expanded", "DataBarExpanded"],
  ["data_matrix", "DataMatrix"],
  ["dx_film_edge", "DXFilmEdge"],
  ["ean_13", "EAN-13"],
  ["ean_8", "EAN-8"],
  ["itf", "ITF"],
  ["maxi_code", "MaxiCode"],
  ["micro_qr_code", "MicroQRCode"],
  ["pdf417", "PDF417"],
  ["qr_code", "QRCode"],
  ["rm_qr_code", "rMQRCode"],
  ["upc_a", "UPC-A"],
  ["upc_e", "UPC-E"],
  ["linear_codes", "Linear-Codes"],
  ["matrix_codes", "Matrix-Codes"]
], bX = [...iD, ["unknown"]].map((e) => e[0]), a_ = new Map(
  iD
);
function wX(e) {
  for (const [t, n] of a_)
    if (e === n)
      return t;
  return "unknown";
}
function kX(e) {
  if (oD(e))
    return {
      width: e.naturalWidth,
      height: e.naturalHeight
    };
  if (sD(e))
    return {
      width: e.width.baseVal.value,
      height: e.height.baseVal.value
    };
  if (lD(e))
    return {
      width: e.videoWidth,
      height: e.videoHeight
    };
  if (uD(e))
    return {
      width: e.width,
      height: e.height
    };
  if (fD(e))
    return {
      width: e.displayWidth,
      height: e.displayHeight
    };
  if (cD(e))
    return {
      width: e.width,
      height: e.height
    };
  if (dD(e))
    return {
      width: e.width,
      height: e.height
    };
  throw new TypeError(
    "The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'."
  );
}
function oD(e) {
  try {
    return e instanceof HTMLImageElement;
  } catch {
    return !1;
  }
}
function sD(e) {
  try {
    return e instanceof SVGImageElement;
  } catch {
    return !1;
  }
}
function lD(e) {
  try {
    return e instanceof HTMLVideoElement;
  } catch {
    return !1;
  }
}
function cD(e) {
  try {
    return e instanceof HTMLCanvasElement;
  } catch {
    return !1;
  }
}
function uD(e) {
  try {
    return e instanceof ImageBitmap;
  } catch {
    return !1;
  }
}
function dD(e) {
  try {
    return e instanceof OffscreenCanvas;
  } catch {
    return !1;
  }
}
function fD(e) {
  try {
    return e instanceof VideoFrame;
  } catch {
    return !1;
  }
}
function mD(e) {
  try {
    return e instanceof Blob;
  } catch {
    return !1;
  }
}
function SX(e) {
  try {
    return e instanceof ImageData;
  } catch {
    return !1;
  }
}
function CX(e, t) {
  try {
    const n = new OffscreenCanvas(e, t);
    if (n.getContext("2d") instanceof OffscreenCanvasRenderingContext2D)
      return n;
    throw void 0;
  } catch {
    const a = document.createElement("canvas");
    return a.width = e, a.height = t, a;
  }
}
async function hD(e) {
  if (oD(e) && !await IX(e))
    throw new DOMException(
      "Failed to load or decode HTMLImageElement.",
      "InvalidStateError"
    );
  if (sD(e) && !await EX(e))
    throw new DOMException(
      "Failed to load or decode SVGImageElement.",
      "InvalidStateError"
    );
  if (fD(e) && PX(e))
    throw new DOMException("VideoFrame is closed.", "InvalidStateError");
  if (lD(e) && (e.readyState === 0 || e.readyState === 1))
    throw new DOMException("Invalid element or state.", "InvalidStateError");
  if (uD(e) && DX(e))
    throw new DOMException(
      "The image source is detached.",
      "InvalidStateError"
    );
  const { width: t, height: n } = kX(e);
  if (t === 0 || n === 0)
    return null;
  const a = CX(t, n).getContext("2d");
  a.drawImage(e, 0, 0);
  try {
    return a.getImageData(0, 0, t, n);
  } catch {
    throw new DOMException("Source would taint origin.", "SecurityError");
  }
}
async function AX(e) {
  let t;
  try {
    if (globalThis.createImageBitmap)
      t = await createImageBitmap(e);
    else if (globalThis.Image) {
      t = new Image();
      let n = "";
      try {
        n = URL.createObjectURL(e), t.src = n, await t.decode();
      } finally {
        URL.revokeObjectURL(n);
      }
    } else
      return e;
  } catch {
    throw new DOMException(
      "Failed to load or decode Blob.",
      "InvalidStateError"
    );
  }
  return await hD(t);
}
function xX(e) {
  const { width: t, height: n } = e;
  if (t === 0 || n === 0)
    return null;
  const a = e.getContext("2d");
  try {
    return a.getImageData(0, 0, t, n);
  } catch {
    throw new DOMException("Source would taint origin.", "SecurityError");
  }
}
async function TX(e) {
  if (mD(e))
    return await AX(e);
  if (SX(e)) {
    if (OX(e))
      throw new DOMException(
        "The image data has been detached.",
        "InvalidStateError"
      );
    return e;
  }
  return cD(e) || dD(e) ? xX(e) : await hD(e);
}
async function IX(e) {
  try {
    return await e.decode(), !0;
  } catch {
    return !1;
  }
}
async function EX(e) {
  var t;
  try {
    return await ((t = e.decode) == null ? void 0 : t.call(e)), !0;
  } catch {
    return !1;
  }
}
function PX(e) {
  return e.format === null;
}
function OX(e) {
  return e.data.buffer.byteLength === 0;
}
function DX(e) {
  return e.width === 0 && e.height === 0;
}
function BA(e, t) {
  return e instanceof DOMException ? new DOMException(`${t}: ${e.message}`, e.name) : e instanceof Error ? new e.constructor(`${t}: ${e.message}`) : new Error(`${t}: ${e}`);
}
const VA = [
  "Aztec",
  "Codabar",
  "Code128",
  "Code39",
  "Code93",
  "DataBar",
  "DataBarExpanded",
  "DataMatrix",
  "DXFilmEdge",
  "EAN-13",
  "EAN-8",
  "ITF",
  "Linear-Codes",
  "Matrix-Codes",
  "MaxiCode",
  "MicroQRCode",
  "None",
  "PDF417",
  "QRCode",
  "rMQRCode",
  "UPC-A",
  "UPC-E"
];
function BX(e) {
  return e.join("|");
}
function VX(e) {
  const t = MA(e);
  let n = 0, a = VA.length - 1;
  for (; n <= a; ) {
    const r = Math.floor((n + a) / 2), i = VA[r], o = MA(i);
    if (o === t)
      return i;
    o < t ? n = r + 1 : a = r - 1;
  }
  return "None";
}
function MA(e) {
  return e.toLowerCase().replace(/_-\[\]/g, "");
}
function MX(e, t) {
  return e.Binarizer[t];
}
function RX(e, t) {
  return e.CharacterSet[t];
}
const LX = [
  "Text",
  "Binary",
  "Mixed",
  "GS1",
  "ISO15434",
  "UnknownECI"
];
function FX(e) {
  return LX[e.value];
}
function NX(e, t) {
  return e.EanAddOnSymbol[t];
}
function UX(e, t) {
  return e.TextMode[t];
}
const Nu = {
  formats: [],
  tryHarder: !0,
  tryRotate: !0,
  tryInvert: !0,
  tryDownscale: !0,
  binarizer: "LocalAverage",
  isPure: !1,
  downscaleFactor: 3,
  downscaleThreshold: 500,
  minLineCount: 2,
  maxNumberOfSymbols: 255,
  tryCode39ExtendedMode: !1,
  validateCode39CheckSum: !1,
  validateITFCheckSum: !1,
  returnCodabarStartEnd: !1,
  returnErrors: !1,
  eanAddOnSymbol: "Read",
  textMode: "Plain",
  characterSet: "Unknown"
};
function _D(e, t) {
  return {
    ...t,
    formats: BX(t.formats),
    binarizer: MX(e, t.binarizer),
    eanAddOnSymbol: NX(
      e,
      t.eanAddOnSymbol
    ),
    textMode: UX(e, t.textMode),
    characterSet: RX(
      e,
      t.characterSet
    )
  };
}
function pD(e) {
  return {
    ...e,
    format: VX(e.format),
    eccLevel: e.eccLevel,
    contentType: FX(e.contentType)
  };
}
const $X = {
  locateFile: (e, t) => {
    const n = e.match(/_(.+?)\.wasm$/);
    return n ? `https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${e}` : t + e;
  }
};
let RA = /* @__PURE__ */ new WeakMap();
function i1(e, t) {
  var n;
  const a = RA.get(e);
  if (a != null && a.modulePromise && t === void 0)
    return a.modulePromise;
  const r = (n = a?.moduleOverrides) != null ? n : $X, i = e({
    ...r
  });
  return RA.set(e, {
    moduleOverrides: r,
    modulePromise: i
  }), i;
}
async function qX(e, t, n = Nu) {
  const a = {
    ...Nu,
    ...n
  }, r = await i1(e), { size: i } = t, o = new Uint8Array(await t.arrayBuffer()), l = r._malloc(i);
  r.HEAPU8.set(o, l);
  const s = r.readBarcodesFromImage(
    l,
    i,
    _D(r, a)
  );
  r._free(l);
  const d = [];
  for (let u = 0; u < s.size(); ++u)
    d.push(
      pD(s.get(u))
    );
  return d;
}
async function HX(e, t, n = Nu) {
  const a = {
    ...Nu,
    ...n
  }, r = await i1(e), {
    data: i,
    width: o,
    height: l,
    data: { byteLength: s }
  } = t, d = r._malloc(s);
  r.HEAPU8.set(i, d);
  const u = r.readBarcodesFromPixmap(
    d,
    o,
    l,
    _D(r, a)
  );
  r._free(d);
  const f = [];
  for (let _ = 0; _ < u.size(); ++_)
    f.push(
      pD(u.get(_))
    );
  return f;
}
({
  ...Nu,
  formats: [...Nu.formats]
});
var o1 = (() => {
  var e = typeof document < "u" && document.currentScript ? document.currentScript.src : void 0;
  return function(t = {}) {
    var n = t, a, r;
    n.ready = new Promise((L, U) => {
      a = L, r = U;
    });
    var i = Object.assign({}, n), o = "./this.program", l = typeof window == "object", s = typeof importScripts == "function";
    typeof by == "object" && typeof by.versions == "object" && by.versions.node;
    var d = "";
    function u(L) {
      return n.locateFile ? n.locateFile(L, d) : d + L;
    }
    var f;
    (l || s) && (s ? d = self.location.href : typeof document < "u" && document.currentScript && (d = document.currentScript.src), e && (d = e), d.indexOf("blob:") !== 0 ? d = d.substr(0, d.replace(/[?#].*/, "").lastIndexOf("/") + 1) : d = "", s && (f = (L) => {
      var U = new XMLHttpRequest();
      return U.open("GET", L, !1), U.responseType = "arraybuffer", U.send(null), new Uint8Array(U.response);
    })), n.print || console.log.bind(console);
    var _ = n.printErr || console.error.bind(console);
    Object.assign(n, i), i = null, n.arguments && n.arguments, n.thisProgram && (o = n.thisProgram), n.quit && n.quit;
    var g;
    n.wasmBinary && (g = n.wasmBinary), typeof WebAssembly != "object" && se("no native wasm support detected");
    var v, w = !1, b, p, y, S, E, C, B, O;
    function D() {
      var L = v.buffer;
      n.HEAP8 = b = new Int8Array(L), n.HEAP16 = y = new Int16Array(L), n.HEAPU8 = p = new Uint8Array(L), n.HEAPU16 = S = new Uint16Array(L), n.HEAP32 = E = new Int32Array(L), n.HEAPU32 = C = new Uint32Array(L), n.HEAPF32 = B = new Float32Array(L), n.HEAPF64 = O = new Float64Array(L);
    }
    var T = [], P = [], I = [];
    function M() {
      if (n.preRun)
        for (typeof n.preRun == "function" && (n.preRun = [n.preRun]); n.preRun.length; )
          q(n.preRun.shift());
      ce(T);
    }
    function V() {
      ce(P);
    }
    function N() {
      if (n.postRun)
        for (typeof n.postRun == "function" && (n.postRun = [n.postRun]); n.postRun.length; )
          ee(n.postRun.shift());
      ce(I);
    }
    function q(L) {
      T.unshift(L);
    }
    function j(L) {
      P.unshift(L);
    }
    function ee(L) {
      I.unshift(L);
    }
    var de = 0, Z = null;
    function F(L) {
      var U;
      de++, (U = n.monitorRunDependencies) === null || U === void 0 || U.call(n, de);
    }
    function Y(L) {
      var U;
      if (de--, (U = n.monitorRunDependencies) === null || U === void 0 || U.call(n, de), de == 0 && Z) {
        var re = Z;
        Z = null, re();
      }
    }
    function se(L) {
      var U;
      (U = n.onAbort) === null || U === void 0 || U.call(n, L), L = "Aborted(" + L + ")", _(L), w = !0, L += ". Build with -sASSERTIONS for more info.";
      var re = new WebAssembly.RuntimeError(L);
      throw r(re), re;
    }
    var X = "data:application/octet-stream;base64,", he = (L) => L.startsWith(X), ve;
    ve = "zxing_reader.wasm", he(ve) || (ve = u(ve));
    function pe(L) {
      if (L == ve && g)
        return new Uint8Array(g);
      if (f)
        return f(L);
      throw "both async and sync fetching of the wasm failed";
    }
    function H(L) {
      return !g && (l || s) && typeof fetch == "function" ? fetch(L, {
        credentials: "same-origin"
      }).then((U) => {
        if (!U.ok)
          throw "failed to load wasm binary file at '" + L + "'";
        return U.arrayBuffer();
      }).catch(() => pe(L)) : Promise.resolve().then(() => pe(L));
    }
    function we(L, U, re) {
      return H(L).then((me) => WebAssembly.instantiate(me, U)).then((me) => me).then(re, (me) => {
        _(`failed to asynchronously prepare wasm: ${me}`), se(me);
      });
    }
    function Me(L, U, re, me) {
      return !L && typeof WebAssembly.instantiateStreaming == "function" && !he(U) && typeof fetch == "function" ? fetch(U, {
        credentials: "same-origin"
      }).then((Ve) => {
        var qe = WebAssembly.instantiateStreaming(Ve, re);
        return qe.then(me, function(Ue) {
          return _(`wasm streaming compile failed: ${Ue}`), _("falling back to ArrayBuffer instantiation"), we(U, re, me);
        });
      }) : we(U, re, me);
    }
    function Re() {
      var L = {
        a: _l
      };
      function U(me, Ve) {
        return aa = me.exports, v = aa.ia, D(), _m = aa.ma, j(aa.ja), Y(), aa;
      }
      F();
      function re(me) {
        U(me.instance);
      }
      if (n.instantiateWasm)
        try {
          return n.instantiateWasm(L, U);
        } catch (me) {
          _(`Module.instantiateWasm callback failed with error: ${me}`), r(me);
        }
      return Me(g, ve, L, re).catch(r), {};
    }
    var ce = (L) => {
      for (; L.length > 0; )
        L.shift()(n);
    };
    n.noExitRuntime;
    var te = [], G = 0, le = (L) => {
      var U = new Te(L);
      return U.get_caught() || (U.set_caught(!0), G--), U.set_rethrown(!1), te.push(U), Um(U.excPtr), U.get_exception_ptr();
    }, K = 0, Ce = () => {
      Yn(0, 0);
      var L = te.pop();
      Nm(L.excPtr), K = 0;
    };
    function Te(L) {
      this.excPtr = L, this.ptr = L - 24, this.set_type = function(U) {
        C[this.ptr + 4 >> 2] = U;
      }, this.get_type = function() {
        return C[this.ptr + 4 >> 2];
      }, this.set_destructor = function(U) {
        C[this.ptr + 8 >> 2] = U;
      }, this.get_destructor = function() {
        return C[this.ptr + 8 >> 2];
      }, this.set_caught = function(U) {
        U = U ? 1 : 0, b[this.ptr + 12 >> 0] = U;
      }, this.get_caught = function() {
        return b[this.ptr + 12 >> 0] != 0;
      }, this.set_rethrown = function(U) {
        U = U ? 1 : 0, b[this.ptr + 13 >> 0] = U;
      }, this.get_rethrown = function() {
        return b[this.ptr + 13 >> 0] != 0;
      }, this.init = function(U, re) {
        this.set_adjusted_ptr(0), this.set_type(U), this.set_destructor(re);
      }, this.set_adjusted_ptr = function(U) {
        C[this.ptr + 16 >> 2] = U;
      }, this.get_adjusted_ptr = function() {
        return C[this.ptr + 16 >> 2];
      }, this.get_exception_ptr = function() {
        var U = yd(this.get_type());
        if (U)
          return C[this.excPtr >> 2];
        var re = this.get_adjusted_ptr();
        return re !== 0 ? re : this.excPtr;
      };
    }
    var ie = (L) => {
      throw K || (K = L), K;
    }, ge = (L) => {
      var U = K;
      if (!U)
        return pl(0), 0;
      var re = new Te(U);
      re.set_adjusted_ptr(U);
      var me = re.get_type();
      if (!me)
        return pl(0), U;
      for (var Ve in L) {
        var qe = L[Ve];
        if (qe === 0 || qe === me)
          break;
        var Ue = re.ptr + 16;
        if (Vc(qe, me, Ue))
          return pl(qe), U;
      }
      return pl(me), U;
    }, Pe = () => ge([]), Ie = (L) => ge([L]), Je = (L, U) => ge([L, U]), _e = () => {
      var L = te.pop();
      L || se("no exception to throw");
      var U = L.excPtr;
      throw L.get_rethrown() || (te.push(L), L.set_rethrown(!0), L.set_caught(!1), G++), K = U, K;
    }, $e = (L, U, re) => {
      var me = new Te(L);
      throw me.init(U, re), K = L, G++, K;
    }, Ze = () => G, _t = {}, It = (L) => {
      for (; L.length; ) {
        var U = L.pop(), re = L.pop();
        re(U);
      }
    };
    function rt(L) {
      return this.fromWireType(E[L >> 2]);
    }
    var Dt = {}, en = {}, zn = {}, na, Na = (L) => {
      throw new na(L);
    }, ya = (L, U, re) => {
      L.forEach(function(Ke) {
        zn[Ke] = U;
      });
      function me(Ke) {
        var lt = re(Ke);
        lt.length !== L.length && Na("Mismatched type converter count");
        for (var mt = 0; mt < L.length; ++mt)
          st(L[mt], lt[mt]);
      }
      var Ve = new Array(U.length), qe = [], Ue = 0;
      U.forEach((Ke, lt) => {
        en.hasOwnProperty(Ke) ? Ve[lt] = en[Ke] : (qe.push(Ke), Dt.hasOwnProperty(Ke) || (Dt[Ke] = []), Dt[Ke].push(() => {
          Ve[lt] = en[Ke], ++Ue, Ue === qe.length && me(Ve);
        }));
      }), qe.length === 0 && me(Ve);
    }, Wn = (L) => {
      var U = _t[L];
      delete _t[L];
      var re = U.rawConstructor, me = U.rawDestructor, Ve = U.fields, qe = Ve.map((Ue) => Ue.getterReturnType).concat(Ve.map((Ue) => Ue.setterArgumentType));
      ya([L], qe, (Ue) => {
        var Ke = {};
        return Ve.forEach((lt, mt) => {
          var St = lt.fieldName, $t = Ue[mt], Ht = lt.getter, zt = lt.getterContext, bn = Ue[mt + Ve.length], Rn = lt.setter, kn = lt.setterContext;
          Ke[St] = {
            read: (ma) => $t.fromWireType(Ht(zt, ma)),
            write: (ma, dt) => {
              var xt = [];
              Rn(kn, ma, bn.toWireType(xt, dt)), It(xt);
            }
          };
        }), [{
          name: U.name,
          fromWireType: (lt) => {
            var mt = {};
            for (var St in Ke)
              mt[St] = Ke[St].read(lt);
            return me(lt), mt;
          },
          toWireType: (lt, mt) => {
            for (var St in Ke)
              if (!(St in mt))
                throw new TypeError(`Missing field: "${St}"`);
            var $t = re();
            for (St in Ke)
              Ke[St].write($t, mt[St]);
            return lt !== null && lt.push(me, $t), $t;
          },
          argPackAdvance: pt,
          readValueFromPointer: rt,
          destructorFunction: me
        }];
      });
    }, Vn = (L, U, re, me, Ve) => {
    }, Ja = () => {
      for (var L = new Array(256), U = 0; U < 256; ++U)
        L[U] = String.fromCharCode(U);
      xe = L;
    }, xe, ze = (L) => {
      for (var U = "", re = L; p[re]; )
        U += xe[p[re++]];
      return U;
    }, ft, it = (L) => {
      throw new ft(L);
    };
    function je(L, U) {
      let re = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      var me = U.name;
      if (L || it(`type "${me}" must have a positive integer typeid pointer`), en.hasOwnProperty(L)) {
        if (re.ignoreDuplicateRegistrations)
          return;
        it(`Cannot register type '${me}' twice`);
      }
      if (en[L] = U, delete zn[L], Dt.hasOwnProperty(L)) {
        var Ve = Dt[L];
        delete Dt[L], Ve.forEach((qe) => qe());
      }
    }
    function st(L, U) {
      let re = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      if (!("argPackAdvance" in U))
        throw new TypeError("registerType registeredInstance requires argPackAdvance");
      return je(L, U, re);
    }
    var pt = 8, xa = (L, U, re, me) => {
      U = ze(U), st(L, {
        name: U,
        fromWireType: function(Ve) {
          return !!Ve;
        },
        toWireType: function(Ve, qe) {
          return qe ? re : me;
        },
        argPackAdvance: pt,
        readValueFromPointer: function(Ve) {
          return this.fromWireType(p[Ve]);
        },
        destructorFunction: null
      });
    }, Ua = (L) => ({
      count: L.count,
      deleteScheduled: L.deleteScheduled,
      preservePointerOnDelete: L.preservePointerOnDelete,
      ptr: L.ptr,
      ptrType: L.ptrType,
      smartPtr: L.smartPtr,
      smartPtrType: L.smartPtrType
    }), _r = (L) => {
      function U(re) {
        return re.$$.ptrType.registeredClass.name;
      }
      it(U(L) + " instance already deleted");
    }, Wa = !1, Qi = (L) => {
    }, sl = (L) => {
      L.smartPtr ? L.smartPtrType.rawDestructor(L.smartPtr) : L.ptrType.registeredClass.rawDestructor(L.ptr);
    }, Ji = (L) => {
      L.count.value -= 1;
      var U = L.count.value === 0;
      U && sl(L);
    }, lm = (L, U, re) => {
      if (U === re)
        return L;
      if (re.baseClass === void 0)
        return null;
      var me = lm(L, U, re.baseClass);
      return me === null ? null : re.downcast(me);
    }, wc = {}, Np = () => Object.keys(ul).length, Up = () => {
      var L = [];
      for (var U in ul)
        ul.hasOwnProperty(U) && L.push(ul[U]);
      return L;
    }, ll = [], td = () => {
      for (; ll.length; ) {
        var L = ll.pop();
        L.$$.deleteScheduled = !1, L.delete();
      }
    }, cl, $p = (L) => {
      cl = L, ll.length && cl && cl(td);
    }, qp = () => {
      n.getInheritedInstanceCount = Np, n.getLiveInheritedInstances = Up, n.flushPendingDeletes = td, n.setDelayFunction = $p;
    }, ul = {}, cm = (L, U) => {
      for (U === void 0 && it("ptr should not be undefined"); L.baseClass; )
        U = L.upcast(U), L = L.baseClass;
      return U;
    }, Hp = (L, U) => (U = cm(L, U), ul[U]), kc = (L, U) => {
      (!U.ptrType || !U.ptr) && Na("makeClassHandle requires ptr and ptrType");
      var re = !!U.smartPtrType, me = !!U.smartPtr;
      return re !== me && Na("Both smartPtrType and smartPtr must be specified"), U.count = {
        value: 1
      }, dl(Object.create(L, {
        $$: {
          value: U,
          writable: !0
        }
      }));
    };
    function zp(L) {
      var U = this.getPointee(L);
      if (!U)
        return this.destructor(L), null;
      var re = Hp(this.registeredClass, U);
      if (re !== void 0) {
        if (re.$$.count.value === 0)
          return re.$$.ptr = U, re.$$.smartPtr = L, re.clone();
        var me = re.clone();
        return this.destructor(L), me;
      }
      function Ve() {
        return this.isSmartPointer ? kc(this.registeredClass.instancePrototype, {
          ptrType: this.pointeeType,
          ptr: U,
          smartPtrType: this,
          smartPtr: L
        }) : kc(this.registeredClass.instancePrototype, {
          ptrType: this,
          ptr: L
        });
      }
      var qe = this.registeredClass.getActualType(U), Ue = wc[qe];
      if (!Ue)
        return Ve.call(this);
      var Ke;
      this.isConst ? Ke = Ue.constPointerType : Ke = Ue.pointerType;
      var lt = lm(U, this.registeredClass, Ke.registeredClass);
      return lt === null ? Ve.call(this) : this.isSmartPointer ? kc(Ke.registeredClass.instancePrototype, {
        ptrType: Ke,
        ptr: lt,
        smartPtrType: this,
        smartPtr: L
      }) : kc(Ke.registeredClass.instancePrototype, {
        ptrType: Ke,
        ptr: lt
      });
    }
    var dl = (L) => typeof FinalizationRegistry > "u" ? (dl = (U) => U, L) : (Wa = new FinalizationRegistry((U) => {
      Ji(U.$$);
    }), dl = (U) => {
      var re = U.$$, me = !!re.smartPtr;
      if (me) {
        var Ve = {
          $$: re
        };
        Wa.register(U, Ve, U);
      }
      return U;
    }, Qi = (U) => Wa.unregister(U), dl(L)), Wp = () => {
      Object.assign(Sc.prototype, {
        isAliasOf(L) {
          if (!(this instanceof Sc) || !(L instanceof Sc))
            return !1;
          var U = this.$$.ptrType.registeredClass, re = this.$$.ptr;
          L.$$ = L.$$;
          for (var me = L.$$.ptrType.registeredClass, Ve = L.$$.ptr; U.baseClass; )
            re = U.upcast(re), U = U.baseClass;
          for (; me.baseClass; )
            Ve = me.upcast(Ve), me = me.baseClass;
          return U === me && re === Ve;
        },
        clone() {
          if (this.$$.ptr || _r(this), this.$$.preservePointerOnDelete)
            return this.$$.count.value += 1, this;
          var L = dl(Object.create(Object.getPrototypeOf(this), {
            $$: {
              value: Ua(this.$$)
            }
          }));
          return L.$$.count.value += 1, L.$$.deleteScheduled = !1, L;
        },
        delete() {
          this.$$.ptr || _r(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && it("Object already scheduled for deletion"), Qi(this), Ji(this.$$), this.$$.preservePointerOnDelete || (this.$$.smartPtr = void 0, this.$$.ptr = void 0);
        },
        isDeleted() {
          return !this.$$.ptr;
        },
        deleteLater() {
          return this.$$.ptr || _r(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && it("Object already scheduled for deletion"), ll.push(this), ll.length === 1 && cl && cl(td), this.$$.deleteScheduled = !0, this;
        }
      });
    };
    function Sc() {
    }
    var Xi = (L, U) => Object.defineProperty(U, "name", {
      value: L
    }), um = (L, U, re) => {
      if (L[U].overloadTable === void 0) {
        var me = L[U];
        L[U] = function() {
          return L[U].overloadTable.hasOwnProperty(arguments.length) || it(`Function '${re}' called with an invalid number of arguments (${arguments.length}) - expects one of (${L[U].overloadTable})!`), L[U].overloadTable[arguments.length].apply(this, arguments);
        }, L[U].overloadTable = [], L[U].overloadTable[me.argCount] = me;
      }
    }, ms = (L, U, re) => {
      n.hasOwnProperty(L) ? ((re === void 0 || n[L].overloadTable !== void 0 && n[L].overloadTable[re] !== void 0) && it(`Cannot register public name '${L}' twice`), um(n, L, L), n.hasOwnProperty(re) && it(`Cannot register multiple overloads of a function with the same number of arguments (${re})!`), n[L].overloadTable[re] = U) : (n[L] = U, re !== void 0 && (n[L].numArguments = re));
    }, jp = 48, Yp = 57, Kp = (L) => {
      if (L === void 0)
        return "_unknown";
      L = L.replace(/[^a-zA-Z0-9_]/g, "$");
      var U = L.charCodeAt(0);
      return U >= jp && U <= Yp ? `_${L}` : L;
    };
    function dm(L, U, re, me, Ve, qe, Ue, Ke) {
      this.name = L, this.constructor = U, this.instancePrototype = re, this.rawDestructor = me, this.baseClass = Ve, this.getActualType = qe, this.upcast = Ue, this.downcast = Ke, this.pureVirtualFunctions = [];
    }
    var Cc = (L, U, re) => {
      for (; U !== re; )
        U.upcast || it(`Expected null or instance of ${re.name}, got an instance of ${U.name}`), L = U.upcast(L), U = U.baseClass;
      return L;
    };
    function fm(L, U) {
      if (U === null)
        return this.isReference && it(`null is not a valid ${this.name}`), 0;
      U.$$ || it(`Cannot pass "${hl(U)}" as a ${this.name}`), U.$$.ptr || it(`Cannot pass deleted object as a pointer of type ${this.name}`);
      var re = U.$$.ptrType.registeredClass, me = Cc(U.$$.ptr, re, this.registeredClass);
      return me;
    }
    function Gp(L, U) {
      var re;
      if (U === null)
        return this.isReference && it(`null is not a valid ${this.name}`), this.isSmartPointer ? (re = this.rawConstructor(), L !== null && L.push(this.rawDestructor, re), re) : 0;
      (!U || !U.$$) && it(`Cannot pass "${hl(U)}" as a ${this.name}`), U.$$.ptr || it(`Cannot pass deleted object as a pointer of type ${this.name}`), !this.isConst && U.$$.ptrType.isConst && it(`Cannot convert argument of type ${U.$$.smartPtrType ? U.$$.smartPtrType.name : U.$$.ptrType.name} to parameter type ${this.name}`);
      var me = U.$$.ptrType.registeredClass;
      if (re = Cc(U.$$.ptr, me, this.registeredClass), this.isSmartPointer)
        switch (U.$$.smartPtr === void 0 && it("Passing raw pointer to smart pointer is illegal"), this.sharingPolicy) {
          case 0:
            U.$$.smartPtrType === this ? re = U.$$.smartPtr : it(`Cannot convert argument of type ${U.$$.smartPtrType ? U.$$.smartPtrType.name : U.$$.ptrType.name} to parameter type ${this.name}`);
            break;
          case 1:
            re = U.$$.smartPtr;
            break;
          case 2:
            if (U.$$.smartPtrType === this)
              re = U.$$.smartPtr;
            else {
              var Ve = U.clone();
              re = this.rawShare(re, Di.toHandle(() => Ve.delete())), L !== null && L.push(this.rawDestructor, re);
            }
            break;
          default:
            it("Unsupporting sharing policy");
        }
      return re;
    }
    function Qp(L, U) {
      if (U === null)
        return this.isReference && it(`null is not a valid ${this.name}`), 0;
      U.$$ || it(`Cannot pass "${hl(U)}" as a ${this.name}`), U.$$.ptr || it(`Cannot pass deleted object as a pointer of type ${this.name}`), U.$$.ptrType.isConst && it(`Cannot convert argument of type ${U.$$.ptrType.name} to parameter type ${this.name}`);
      var re = U.$$.ptrType.registeredClass, me = Cc(U.$$.ptr, re, this.registeredClass);
      return me;
    }
    function mm(L) {
      return this.fromWireType(C[L >> 2]);
    }
    var Jp = () => {
      Object.assign(fl.prototype, {
        getPointee(L) {
          return this.rawGetPointee && (L = this.rawGetPointee(L)), L;
        },
        destructor(L) {
          var U;
          (U = this.rawDestructor) === null || U === void 0 || U.call(this, L);
        },
        argPackAdvance: pt,
        readValueFromPointer: mm,
        deleteObject(L) {
          L !== null && L.delete();
        },
        fromWireType: zp
      });
    };
    function fl(L, U, re, me, Ve, qe, Ue, Ke, lt, mt, St) {
      this.name = L, this.registeredClass = U, this.isReference = re, this.isConst = me, this.isSmartPointer = Ve, this.pointeeType = qe, this.sharingPolicy = Ue, this.rawGetPointee = Ke, this.rawConstructor = lt, this.rawShare = mt, this.rawDestructor = St, !Ve && U.baseClass === void 0 ? me ? (this.toWireType = fm, this.destructorFunction = null) : (this.toWireType = Qp, this.destructorFunction = null) : this.toWireType = Gp;
    }
    var nd = (L, U, re) => {
      n.hasOwnProperty(L) || Na("Replacing nonexistant public symbol"), n[L].overloadTable !== void 0 && re !== void 0 ? n[L].overloadTable[re] = U : (n[L] = U, n[L].argCount = re);
    }, hm = (L, U, re) => {
      var me = n["dynCall_" + L];
      return re && re.length ? me.apply(null, [U].concat(re)) : me.call(null, U);
    }, hs = [], _m, jn = (L) => {
      var U = hs[L];
      return U || (L >= hs.length && (hs.length = L + 1), hs[L] = U = _m.get(L)), U;
    }, Ac = (L, U, re) => {
      if (L.includes("j"))
        return hm(L, U, re);
      var me = jn(U).apply(null, re);
      return me;
    }, pm = (L, U) => {
      var re = [];
      return function() {
        return re.length = 0, Object.assign(re, arguments), Ac(L, U, re);
      };
    }, Xr = (L, U) => {
      L = ze(L);
      function re() {
        return L.includes("j") ? pm(L, U) : jn(U);
      }
      var me = re();
      return typeof me != "function" && it(`unknown function pointer with signature ${L}: ${U}`), me;
    }, gm = (L, U) => {
      var re = Xi(U, function(me) {
        this.name = U, this.message = me;
        var Ve = new Error(me).stack;
        Ve !== void 0 && (this.stack = this.toString() + `
` + Ve.replace(/^Error(:[^\n]*)?\n/, ""));
      });
      return re.prototype = Object.create(L.prototype), re.prototype.constructor = re, re.prototype.toString = function() {
        return this.message === void 0 ? this.name : `${this.name}: ${this.message}`;
      }, re;
    }, ad, xc = (L) => {
      var U = Fm(L), re = ze(U);
      return gi(U), re;
    }, Tc = (L, U) => {
      var re = [], me = {};
      function Ve(qe) {
        if (!me[qe] && !en[qe]) {
          if (zn[qe]) {
            zn[qe].forEach(Ve);
            return;
          }
          re.push(qe), me[qe] = !0;
        }
      }
      throw U.forEach(Ve), new ad(`${L}: ` + re.map(xc).join([", "]));
    }, ym = (L, U, re, me, Ve, qe, Ue, Ke, lt, mt, St, $t, Ht) => {
      St = ze(St), qe = Xr(Ve, qe), Ke && (Ke = Xr(Ue, Ke)), mt && (mt = Xr(lt, mt)), Ht = Xr($t, Ht);
      var zt = Kp(St);
      ms(zt, function() {
        Tc(`Cannot construct ${St} due to unbound types`, [me]);
      }), ya([L, U, re], me ? [me] : [], function(bn) {
        bn = bn[0];
        var Rn, kn;
        me ? (Rn = bn.registeredClass, kn = Rn.instancePrototype) : kn = Sc.prototype;
        var ma = Xi(St, function() {
          if (Object.getPrototypeOf(this) !== dt)
            throw new ft("Use 'new' to construct " + St);
          if (xt.constructor_body === void 0)
            throw new ft(St + " has no accessible constructor");
          var Hm = xt.constructor_body[arguments.length];
          if (Hm === void 0)
            throw new ft(`Tried to invoke ctor of ${St} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(xt.constructor_body).toString()}) parameters instead!`);
          return Hm.apply(this, arguments);
        }), dt = Object.create(kn, {
          constructor: {
            value: ma
          }
        });
        ma.prototype = dt;
        var xt = new dm(St, ma, dt, Ht, Rn, qe, Ke, mt);
        if (xt.baseClass) {
          var Ln, ba;
          (ba = (Ln = xt.baseClass).__derivedClasses) !== null && ba !== void 0 || (Ln.__derivedClasses = []), xt.baseClass.__derivedClasses.push(xt);
        }
        var yi = new fl(St, xt, !0, !1, !1), bi = new fl(St + "*", xt, !1, !1, !1), vl = new fl(St + " const*", xt, !1, !0, !1);
        return wc[L] = {
          pointerType: bi,
          constPointerType: vl
        }, nd(zt, ma), [yi, bi, vl];
      });
    }, ml = (L, U) => {
      for (var re = [], me = 0; me < L; me++)
        re.push(C[U + me * 4 >> 2]);
      return re;
    };
    function rd(L) {
      for (var U = 1; U < L.length; ++U)
        if (L[U] !== null && L[U].destructorFunction === void 0)
          return !0;
      return !1;
    }
    function Zi(L, U, re, me, Ve, qe) {
      var Ue = U.length;
      Ue < 2 && it("argTypes array size mismatch! Must at least get return value and 'this' types!");
      var Ke = U[1] !== null && re !== null, lt = rd(U), mt = U[0].name !== "void", St = Ue - 2, $t = new Array(St), Ht = [], zt = [], bn = function() {
        arguments.length !== St && it(`function ${L} called with ${arguments.length} arguments, expected ${St}`), zt.length = 0;
        var Rn;
        Ht.length = Ke ? 2 : 1, Ht[0] = Ve, Ke && (Rn = U[1].toWireType(zt, this), Ht[1] = Rn);
        for (var kn = 0; kn < St; ++kn)
          $t[kn] = U[kn + 2].toWireType(zt, arguments[kn]), Ht.push($t[kn]);
        var ma = me.apply(null, Ht);
        function dt(xt) {
          if (lt)
            It(zt);
          else
            for (var Ln = Ke ? 1 : 2; Ln < U.length; Ln++) {
              var ba = Ln === 1 ? Rn : $t[Ln - 2];
              U[Ln].destructorFunction !== null && U[Ln].destructorFunction(ba);
            }
          if (mt)
            return U[0].fromWireType(xt);
        }
        return dt(ma);
      };
      return Xi(L, bn);
    }
    var bm = (L, U, re, me, Ve, qe) => {
      var Ue = ml(U, re);
      Ve = Xr(me, Ve), ya([], [L], function(Ke) {
        Ke = Ke[0];
        var lt = `constructor ${Ke.name}`;
        if (Ke.registeredClass.constructor_body === void 0 && (Ke.registeredClass.constructor_body = []), Ke.registeredClass.constructor_body[U - 1] !== void 0)
          throw new ft(`Cannot register multiple constructors with identical number of parameters (${U - 1}) for class '${Ke.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);
        return Ke.registeredClass.constructor_body[U - 1] = () => {
          Tc(`Cannot construct ${Ke.name} due to unbound types`, Ue);
        }, ya([], Ue, (mt) => (mt.splice(1, 0, null), Ke.registeredClass.constructor_body[U - 1] = Zi(lt, mt, null, Ve, qe), [])), [];
      });
    }, id = (L) => {
      L = L.trim();
      const U = L.indexOf("(");
      return U !== -1 ? L.substr(0, U) : L;
    }, Xp = (L, U, re, me, Ve, qe, Ue, Ke, lt) => {
      var mt = ml(re, me);
      U = ze(U), U = id(U), qe = Xr(Ve, qe), ya([], [L], function(St) {
        St = St[0];
        var $t = `${St.name}.${U}`;
        U.startsWith("@@") && (U = Symbol[U.substring(2)]), Ke && St.registeredClass.pureVirtualFunctions.push(U);
        function Ht() {
          Tc(`Cannot call ${$t} due to unbound types`, mt);
        }
        var zt = St.registeredClass.instancePrototype, bn = zt[U];
        return bn === void 0 || bn.overloadTable === void 0 && bn.className !== St.name && bn.argCount === re - 2 ? (Ht.argCount = re - 2, Ht.className = St.name, zt[U] = Ht) : (um(zt, U, $t), zt[U].overloadTable[re - 2] = Ht), ya([], mt, function(Rn) {
          var kn = Zi($t, Rn, St, qe, Ue);
          return zt[U].overloadTable === void 0 ? (kn.argCount = re - 2, zt[U] = kn) : zt[U].overloadTable[re - 2] = kn, [];
        }), [];
      });
    };
    function wm() {
      Object.assign(od.prototype, {
        get(L) {
          return this.allocated[L];
        },
        has(L) {
          return this.allocated[L] !== void 0;
        },
        allocate(L) {
          var U = this.freelist.pop() || this.allocated.length;
          return this.allocated[U] = L, U;
        },
        free(L) {
          this.allocated[L] = void 0, this.freelist.push(L);
        }
      });
    }
    function od() {
      this.allocated = [void 0], this.freelist = [];
    }
    var xr = new od(), Ic = (L) => {
      L >= xr.reserved && --xr.get(L).refcount === 0 && xr.free(L);
    }, Zp = () => {
      for (var L = 0, U = xr.reserved; U < xr.allocated.length; ++U)
        xr.allocated[U] !== void 0 && ++L;
      return L;
    }, ev = () => {
      xr.allocated.push({
        value: void 0
      }, {
        value: null
      }, {
        value: !0
      }, {
        value: !1
      }), xr.reserved = xr.allocated.length, n.count_emval_handles = Zp;
    }, Di = {
      toValue: (L) => (L || it("Cannot use deleted val. handle = " + L), xr.get(L).value),
      toHandle: (L) => {
        switch (L) {
          case void 0:
            return 1;
          case null:
            return 2;
          case !0:
            return 3;
          case !1:
            return 4;
          default:
            return xr.allocate({
              refcount: 1,
              value: L
            });
        }
      }
    }, km = (L, U) => {
      U = ze(U), st(L, {
        name: U,
        fromWireType: (re) => {
          var me = Di.toValue(re);
          return Ic(re), me;
        },
        toWireType: (re, me) => Di.toHandle(me),
        argPackAdvance: pt,
        readValueFromPointer: rt,
        destructorFunction: null
      });
    }, tv = (L, U, re) => {
      switch (U) {
        case 1:
          return re ? function(me) {
            return this.fromWireType(b[me >> 0]);
          } : function(me) {
            return this.fromWireType(p[me >> 0]);
          };
        case 2:
          return re ? function(me) {
            return this.fromWireType(y[me >> 1]);
          } : function(me) {
            return this.fromWireType(S[me >> 1]);
          };
        case 4:
          return re ? function(me) {
            return this.fromWireType(E[me >> 2]);
          } : function(me) {
            return this.fromWireType(C[me >> 2]);
          };
        default:
          throw new TypeError(`invalid integer width (${U}): ${L}`);
      }
    }, nv = (L, U, re, me) => {
      U = ze(U);
      function Ve() {
      }
      Ve.values = {}, st(L, {
        name: U,
        constructor: Ve,
        fromWireType: function(qe) {
          return this.constructor.values[qe];
        },
        toWireType: (qe, Ue) => Ue.value,
        argPackAdvance: pt,
        readValueFromPointer: tv(U, re, me),
        destructorFunction: null
      }), ms(U, Ve);
    }, sd = (L, U) => {
      var re = en[L];
      return re === void 0 && it(U + " has unknown type " + xc(L)), re;
    }, av = (L, U, re) => {
      var me = sd(L, "enum");
      U = ze(U);
      var Ve = me.constructor, qe = Object.create(me.constructor.prototype, {
        value: {
          value: re
        },
        constructor: {
          value: Xi(`${me.name}_${U}`, function() {
          })
        }
      });
      Ve.values[re] = qe, Ve[U] = qe;
    }, hl = (L) => {
      if (L === null)
        return "null";
      var U = typeof L;
      return U === "object" || U === "array" || U === "function" ? L.toString() : "" + L;
    }, rv = (L, U) => {
      switch (U) {
        case 4:
          return function(re) {
            return this.fromWireType(B[re >> 2]);
          };
        case 8:
          return function(re) {
            return this.fromWireType(O[re >> 3]);
          };
        default:
          throw new TypeError(`invalid float width (${U}): ${L}`);
      }
    }, iv = (L, U, re) => {
      U = ze(U), st(L, {
        name: U,
        fromWireType: (me) => me,
        toWireType: (me, Ve) => Ve,
        argPackAdvance: pt,
        readValueFromPointer: rv(U, re),
        destructorFunction: null
      });
    }, ov = (L, U, re, me, Ve, qe, Ue) => {
      var Ke = ml(U, re);
      L = ze(L), L = id(L), Ve = Xr(me, Ve), ms(L, function() {
        Tc(`Cannot call ${L} due to unbound types`, Ke);
      }, U - 1), ya([], Ke, function(lt) {
        var mt = [lt[0], null].concat(lt.slice(1));
        return nd(L, Zi(L, mt, null, Ve, qe), U - 1), [];
      });
    }, sv = (L, U, re) => {
      switch (U) {
        case 1:
          return re ? (me) => b[me >> 0] : (me) => p[me >> 0];
        case 2:
          return re ? (me) => y[me >> 1] : (me) => S[me >> 1];
        case 4:
          return re ? (me) => E[me >> 2] : (me) => C[me >> 2];
        default:
          throw new TypeError(`invalid integer width (${U}): ${L}`);
      }
    }, lv = (L, U, re, me, Ve) => {
      U = ze(U);
      var qe = (St) => St;
      if (me === 0) {
        var Ue = 32 - 8 * re;
        qe = (St) => St << Ue >>> Ue;
      }
      var Ke = U.includes("unsigned"), lt = (St, $t) => {
      }, mt;
      Ke ? mt = function(St, $t) {
        return lt($t, this.name), $t >>> 0;
      } : mt = function(St, $t) {
        return lt($t, this.name), $t;
      }, st(L, {
        name: U,
        fromWireType: qe,
        toWireType: mt,
        argPackAdvance: pt,
        readValueFromPointer: sv(U, re, me !== 0),
        destructorFunction: null
      });
    }, Mn = (L, U, re) => {
      var me = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array], Ve = me[U];
      function qe(Ue) {
        var Ke = C[Ue >> 2], lt = C[Ue + 4 >> 2];
        return new Ve(b.buffer, lt, Ke);
      }
      re = ze(re), st(L, {
        name: re,
        fromWireType: qe,
        argPackAdvance: pt,
        readValueFromPointer: qe
      }, {
        ignoreDuplicateRegistrations: !0
      });
    }, xn = (L, U, re, me) => {
      if (!(me > 0))
        return 0;
      for (var Ve = re, qe = re + me - 1, Ue = 0; Ue < L.length; ++Ue) {
        var Ke = L.charCodeAt(Ue);
        if (Ke >= 55296 && Ke <= 57343) {
          var lt = L.charCodeAt(++Ue);
          Ke = 65536 + ((Ke & 1023) << 10) | lt & 1023;
        }
        if (Ke <= 127) {
          if (re >= qe)
            break;
          U[re++] = Ke;
        } else if (Ke <= 2047) {
          if (re + 1 >= qe)
            break;
          U[re++] = 192 | Ke >> 6, U[re++] = 128 | Ke & 63;
        } else if (Ke <= 65535) {
          if (re + 2 >= qe)
            break;
          U[re++] = 224 | Ke >> 12, U[re++] = 128 | Ke >> 6 & 63, U[re++] = 128 | Ke & 63;
        } else {
          if (re + 3 >= qe)
            break;
          U[re++] = 240 | Ke >> 18, U[re++] = 128 | Ke >> 12 & 63, U[re++] = 128 | Ke >> 6 & 63, U[re++] = 128 | Ke & 63;
        }
      }
      return U[re] = 0, re - Ve;
    }, cv = (L, U, re) => xn(L, p, U, re), Sm = (L) => {
      for (var U = 0, re = 0; re < L.length; ++re) {
        var me = L.charCodeAt(re);
        me <= 127 ? U++ : me <= 2047 ? U += 2 : me >= 55296 && me <= 57343 ? (U += 4, ++re) : U += 3;
      }
      return U;
    }, Cm = typeof TextDecoder < "u" ? new TextDecoder("utf8") : void 0, uv = (L, U, re) => {
      for (var me = U + re, Ve = U; L[Ve] && !(Ve >= me); )
        ++Ve;
      if (Ve - U > 16 && L.buffer && Cm)
        return Cm.decode(L.subarray(U, Ve));
      for (var qe = ""; U < Ve; ) {
        var Ue = L[U++];
        if (!(Ue & 128)) {
          qe += String.fromCharCode(Ue);
          continue;
        }
        var Ke = L[U++] & 63;
        if ((Ue & 224) == 192) {
          qe += String.fromCharCode((Ue & 31) << 6 | Ke);
          continue;
        }
        var lt = L[U++] & 63;
        if ((Ue & 240) == 224 ? Ue = (Ue & 15) << 12 | Ke << 6 | lt : Ue = (Ue & 7) << 18 | Ke << 12 | lt << 6 | L[U++] & 63, Ue < 65536)
          qe += String.fromCharCode(Ue);
        else {
          var mt = Ue - 65536;
          qe += String.fromCharCode(55296 | mt >> 10, 56320 | mt & 1023);
        }
      }
      return qe;
    }, ld = (L, U) => L ? uv(p, L, U) : "", dv = (L, U) => {
      U = ze(U);
      var re = U === "std::string";
      st(L, {
        name: U,
        fromWireType(me) {
          var Ve = C[me >> 2], qe = me + 4, Ue;
          if (re)
            for (var Ke = qe, lt = 0; lt <= Ve; ++lt) {
              var mt = qe + lt;
              if (lt == Ve || p[mt] == 0) {
                var St = mt - Ke, $t = ld(Ke, St);
                Ue === void 0 ? Ue = $t : (Ue += "\0", Ue += $t), Ke = mt + 1;
              }
            }
          else {
            for (var Ht = new Array(Ve), lt = 0; lt < Ve; ++lt)
              Ht[lt] = String.fromCharCode(p[qe + lt]);
            Ue = Ht.join("");
          }
          return gi(me), Ue;
        },
        toWireType(me, Ve) {
          Ve instanceof ArrayBuffer && (Ve = new Uint8Array(Ve));
          var qe, Ue = typeof Ve == "string";
          Ue || Ve instanceof Uint8Array || Ve instanceof Uint8ClampedArray || Ve instanceof Int8Array || it("Cannot pass non-string to std::string"), re && Ue ? qe = Sm(Ve) : qe = Ve.length;
          var Ke = gd(4 + qe + 1), lt = Ke + 4;
          if (C[Ke >> 2] = qe, re && Ue)
            cv(Ve, lt, qe + 1);
          else if (Ue)
            for (var mt = 0; mt < qe; ++mt) {
              var St = Ve.charCodeAt(mt);
              St > 255 && (gi(lt), it("String has UTF-16 code units that do not fit in 8 bits")), p[lt + mt] = St;
            }
          else
            for (var mt = 0; mt < qe; ++mt)
              p[lt + mt] = Ve[mt];
          return me !== null && me.push(gi, Ke), Ke;
        },
        argPackAdvance: pt,
        readValueFromPointer: mm,
        destructorFunction(me) {
          gi(me);
        }
      });
    }, cd = typeof TextDecoder < "u" ? new TextDecoder("utf-16le") : void 0, fv = (L, U) => {
      for (var re = L, me = re >> 1, Ve = me + U / 2; !(me >= Ve) && S[me]; )
        ++me;
      if (re = me << 1, re - L > 32 && cd)
        return cd.decode(p.subarray(L, re));
      for (var qe = "", Ue = 0; !(Ue >= U / 2); ++Ue) {
        var Ke = y[L + Ue * 2 >> 1];
        if (Ke == 0)
          break;
        qe += String.fromCharCode(Ke);
      }
      return qe;
    }, ja = (L, U, re) => {
      var me;
      if ((me = re) !== null && me !== void 0 || (re = 2147483647), re < 2)
        return 0;
      re -= 2;
      for (var Ve = U, qe = re < L.length * 2 ? re / 2 : L.length, Ue = 0; Ue < qe; ++Ue) {
        var Ke = L.charCodeAt(Ue);
        y[U >> 1] = Ke, U += 2;
      }
      return y[U >> 1] = 0, U - Ve;
    }, ud = (L) => L.length * 2, Eo = (L, U) => {
      for (var re = 0, me = ""; !(re >= U / 4); ) {
        var Ve = E[L + re * 4 >> 2];
        if (Ve == 0)
          break;
        if (++re, Ve >= 65536) {
          var qe = Ve - 65536;
          me += String.fromCharCode(55296 | qe >> 10, 56320 | qe & 1023);
        } else
          me += String.fromCharCode(Ve);
      }
      return me;
    }, Am = (L, U, re) => {
      var me;
      if ((me = re) !== null && me !== void 0 || (re = 2147483647), re < 4)
        return 0;
      for (var Ve = U, qe = Ve + re - 4, Ue = 0; Ue < L.length; ++Ue) {
        var Ke = L.charCodeAt(Ue);
        if (Ke >= 55296 && Ke <= 57343) {
          var lt = L.charCodeAt(++Ue);
          Ke = 65536 + ((Ke & 1023) << 10) | lt & 1023;
        }
        if (E[U >> 2] = Ke, U += 4, U + 4 > qe)
          break;
      }
      return E[U >> 2] = 0, U - Ve;
    }, dd = (L) => {
      for (var U = 0, re = 0; re < L.length; ++re) {
        var me = L.charCodeAt(re);
        me >= 55296 && me <= 57343 && ++re, U += 4;
      }
      return U;
    }, qr = (L, U, re) => {
      re = ze(re);
      var me, Ve, qe, Ue, Ke;
      U === 2 ? (me = fv, Ve = ja, Ue = ud, qe = () => S, Ke = 1) : U === 4 && (me = Eo, Ve = Am, Ue = dd, qe = () => C, Ke = 2), st(L, {
        name: re,
        fromWireType: (lt) => {
          for (var mt = C[lt >> 2], St = qe(), $t, Ht = lt + 4, zt = 0; zt <= mt; ++zt) {
            var bn = lt + 4 + zt * U;
            if (zt == mt || St[bn >> Ke] == 0) {
              var Rn = bn - Ht, kn = me(Ht, Rn);
              $t === void 0 ? $t = kn : ($t += "\0", $t += kn), Ht = bn + U;
            }
          }
          return gi(lt), $t;
        },
        toWireType: (lt, mt) => {
          typeof mt != "string" && it(`Cannot pass non-string to C++ string type ${re}`);
          var St = Ue(mt), $t = gd(4 + St + U);
          return C[$t >> 2] = St >> Ke, Ve(mt, $t + 4, St + U), lt !== null && lt.push(gi, $t), $t;
        },
        argPackAdvance: pt,
        readValueFromPointer: rt,
        destructorFunction(lt) {
          gi(lt);
        }
      });
    }, xm = (L, U, re, me, Ve, qe) => {
      _t[L] = {
        name: ze(U),
        rawConstructor: Xr(re, me),
        rawDestructor: Xr(Ve, qe),
        fields: []
      };
    }, Tm = (L, U, re, me, Ve, qe, Ue, Ke, lt, mt) => {
      _t[L].fields.push({
        fieldName: ze(U),
        getterReturnType: re,
        getter: Xr(me, Ve),
        getterContext: qe,
        setterArgumentType: Ue,
        setter: Xr(Ke, lt),
        setterContext: mt
      });
    }, Im = (L, U) => {
      U = ze(U), st(L, {
        isVoid: !0,
        name: U,
        argPackAdvance: 0,
        fromWireType: () => {
        },
        toWireType: (re, me) => {
        }
      });
    }, Ec = [], Em = (L, U, re, me) => (L = Ec[L], U = Di.toValue(U), L(null, U, re, me)), Pm = {}, Tr = (L) => {
      var U = Pm[L];
      return U === void 0 ? ze(L) : U;
    }, Om = () => {
      if (typeof globalThis == "object")
        return globalThis;
      function L(U) {
        U.$$$embind_global$$$ = U;
        var re = typeof $$$embind_global$$$ == "object" && U.$$$embind_global$$$ == U;
        return re || delete U.$$$embind_global$$$, re;
      }
      if (typeof $$$embind_global$$$ == "object" || (typeof global == "object" && L(global) ? $$$embind_global$$$ = global : typeof self == "object" && L(self) && ($$$embind_global$$$ = self), typeof $$$embind_global$$$ == "object"))
        return $$$embind_global$$$;
      throw Error("unable to get global object.");
    }, Hr = (L) => L === 0 ? Di.toHandle(Om()) : (L = Tr(L), Di.toHandle(Om()[L])), mv = (L) => {
      var U = Ec.length;
      return Ec.push(L), U;
    }, Dm = (L, U) => {
      for (var re = new Array(L), me = 0; me < L; ++me)
        re[me] = sd(C[U + me * 4 >> 2], "parameter " + me);
      return re;
    }, eo = Reflect.construct, Pc = (L, U, re) => {
      var me = [], Ve = L.toWireType(me, re);
      return me.length && (C[U >> 2] = Di.toHandle(me)), Ve;
    }, fd = (L, U, re) => {
      var me = Dm(L, U), Ve = me.shift();
      L--;
      var qe = new Array(L), Ue = (lt, mt, St, $t) => {
        for (var Ht = 0, zt = 0; zt < L; ++zt)
          qe[zt] = me[zt].readValueFromPointer($t + Ht), Ht += me[zt].argPackAdvance;
        for (var bn = re === 1 ? eo(mt, qe) : mt.apply(lt, qe), zt = 0; zt < L; ++zt) {
          var Rn, kn;
          (Rn = (kn = me[zt]).deleteObject) === null || Rn === void 0 || Rn.call(kn, qe[zt]);
        }
        return Pc(Ve, St, bn);
      }, Ke = `methodCaller<(${me.map((lt) => lt.name).join(", ")}) => ${Ve.name}>`;
      return mv(Xi(Ke, Ue));
    }, Un = (L) => {
      L > 4 && (xr.get(L).refcount += 1);
    }, to = (L) => {
      var U = Di.toValue(L);
      It(U), Ic(L);
    }, md = (L, U) => {
      L = sd(L, "_emval_take_value");
      var re = L.readValueFromPointer(U);
      return Di.toHandle(re);
    }, hv = () => {
      se("");
    }, hd = (L, U, re) => p.copyWithin(L, U, U + re), _v = () => 2147483648, pv = (L) => {
      var U = v.buffer, re = (L - U.byteLength + 65535) / 65536;
      try {
        return v.grow(re), D(), 1;
      } catch {
      }
    }, vv = (L) => {
      var U = p.length;
      L >>>= 0;
      var re = _v();
      if (L > re)
        return !1;
      for (var me = (lt, mt) => lt + (mt - lt % mt) % mt, Ve = 1; Ve <= 4; Ve *= 2) {
        var qe = U * (1 + 0.2 / Ve);
        qe = Math.min(qe, L + 100663296);
        var Ue = Math.min(re, me(Math.max(L, qe), 65536)), Ke = pv(Ue);
        if (Ke)
          return !0;
      }
      return !1;
    }, Oc = {}, Dc = () => o || "./this.program", vi = () => {
      if (!vi.strings) {
        var L = (typeof navigator == "object" && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", U = {
          USER: "web_user",
          LOGNAME: "web_user",
          PATH: "/",
          PWD: "/",
          HOME: "/home/web_user",
          LANG: L,
          _: Dc()
        };
        for (var re in Oc)
          Oc[re] === void 0 ? delete U[re] : U[re] = Oc[re];
        var me = [];
        for (var re in U)
          me.push(`${re}=${U[re]}`);
        vi.strings = me;
      }
      return vi.strings;
    }, gv = (L, U) => {
      for (var re = 0; re < L.length; ++re)
        b[U++ >> 0] = L.charCodeAt(re);
      b[U >> 0] = 0;
    }, Bm = (L, U) => {
      var re = 0;
      return vi().forEach((me, Ve) => {
        var qe = U + re;
        C[L + Ve * 4 >> 2] = qe, gv(me, qe), re += me.length + 1;
      }), 0;
    }, Vm = (L, U) => {
      var re = vi();
      C[L >> 2] = re.length;
      var me = 0;
      return re.forEach((Ve) => me += Ve.length + 1), C[U >> 2] = me, 0;
    }, _d = (L) => L, _s = (L) => L % 4 === 0 && (L % 100 !== 0 || L % 400 === 0), Mm = (L, U) => {
      for (var re = 0, me = 0; me <= U; re += L[me++])
        ;
      return re;
    }, Rm = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], Bc = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], pd = (L, U) => {
      for (var re = new Date(L.getTime()); U > 0; ) {
        var me = _s(re.getFullYear()), Ve = re.getMonth(), qe = (me ? Rm : Bc)[Ve];
        if (U > qe - re.getDate())
          U -= qe - re.getDate() + 1, re.setDate(1), Ve < 11 ? re.setMonth(Ve + 1) : (re.setMonth(0), re.setFullYear(re.getFullYear() + 1));
        else
          return re.setDate(re.getDate() + U), re;
      }
      return re;
    };
    function yv(L, U, re) {
      var me = Sm(L) + 1, Ve = new Array(me);
      return xn(L, Ve, 0, Ve.length), Ve;
    }
    var Lm = (L, U) => {
      b.set(L, U);
    }, Ir = (L, U, re, me) => {
      var Ve = C[me + 40 >> 2], qe = {
        tm_sec: E[me >> 2],
        tm_min: E[me + 4 >> 2],
        tm_hour: E[me + 8 >> 2],
        tm_mday: E[me + 12 >> 2],
        tm_mon: E[me + 16 >> 2],
        tm_year: E[me + 20 >> 2],
        tm_wday: E[me + 24 >> 2],
        tm_yday: E[me + 28 >> 2],
        tm_isdst: E[me + 32 >> 2],
        tm_gmtoff: E[me + 36 >> 2],
        tm_zone: Ve ? ld(Ve) : ""
      }, Ue = ld(re), Ke = {
        "%c": "%a %b %d %H:%M:%S %Y",
        "%D": "%m/%d/%y",
        "%F": "%Y-%m-%d",
        "%h": "%b",
        "%r": "%I:%M:%S %p",
        "%R": "%H:%M",
        "%T": "%H:%M:%S",
        "%x": "%m/%d/%y",
        "%X": "%H:%M:%S",
        "%Ec": "%c",
        "%EC": "%C",
        "%Ex": "%m/%d/%y",
        "%EX": "%H:%M:%S",
        "%Ey": "%y",
        "%EY": "%Y",
        "%Od": "%d",
        "%Oe": "%e",
        "%OH": "%H",
        "%OI": "%I",
        "%Om": "%m",
        "%OM": "%M",
        "%OS": "%S",
        "%Ou": "%u",
        "%OU": "%U",
        "%OV": "%V",
        "%Ow": "%w",
        "%OW": "%W",
        "%Oy": "%y"
      };
      for (var lt in Ke)
        Ue = Ue.replace(new RegExp(lt, "g"), Ke[lt]);
      var mt = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], St = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      function $t(dt, xt, Ln) {
        for (var ba = typeof dt == "number" ? dt.toString() : dt || ""; ba.length < xt; )
          ba = Ln[0] + ba;
        return ba;
      }
      function Ht(dt, xt) {
        return $t(dt, xt, "0");
      }
      function zt(dt, xt) {
        function Ln(yi) {
          return yi < 0 ? -1 : yi > 0 ? 1 : 0;
        }
        var ba;
        return (ba = Ln(dt.getFullYear() - xt.getFullYear())) === 0 && (ba = Ln(dt.getMonth() - xt.getMonth())) === 0 && (ba = Ln(dt.getDate() - xt.getDate())), ba;
      }
      function bn(dt) {
        switch (dt.getDay()) {
          case 0:
            return new Date(dt.getFullYear() - 1, 11, 29);
          case 1:
            return dt;
          case 2:
            return new Date(dt.getFullYear(), 0, 3);
          case 3:
            return new Date(dt.getFullYear(), 0, 2);
          case 4:
            return new Date(dt.getFullYear(), 0, 1);
          case 5:
            return new Date(dt.getFullYear() - 1, 11, 31);
          case 6:
            return new Date(dt.getFullYear() - 1, 11, 30);
        }
      }
      function Rn(dt) {
        var xt = pd(new Date(dt.tm_year + 1900, 0, 1), dt.tm_yday), Ln = new Date(xt.getFullYear(), 0, 4), ba = new Date(xt.getFullYear() + 1, 0, 4), yi = bn(Ln), bi = bn(ba);
        return zt(yi, xt) <= 0 ? zt(bi, xt) <= 0 ? xt.getFullYear() + 1 : xt.getFullYear() : xt.getFullYear() - 1;
      }
      var kn = {
        "%a": (dt) => mt[dt.tm_wday].substring(0, 3),
        "%A": (dt) => mt[dt.tm_wday],
        "%b": (dt) => St[dt.tm_mon].substring(0, 3),
        "%B": (dt) => St[dt.tm_mon],
        "%C": (dt) => {
          var xt = dt.tm_year + 1900;
          return Ht(xt / 100 | 0, 2);
        },
        "%d": (dt) => Ht(dt.tm_mday, 2),
        "%e": (dt) => $t(dt.tm_mday, 2, " "),
        "%g": (dt) => Rn(dt).toString().substring(2),
        "%G": (dt) => Rn(dt),
        "%H": (dt) => Ht(dt.tm_hour, 2),
        "%I": (dt) => {
          var xt = dt.tm_hour;
          return xt == 0 ? xt = 12 : xt > 12 && (xt -= 12), Ht(xt, 2);
        },
        "%j": (dt) => Ht(dt.tm_mday + Mm(_s(dt.tm_year + 1900) ? Rm : Bc, dt.tm_mon - 1), 3),
        "%m": (dt) => Ht(dt.tm_mon + 1, 2),
        "%M": (dt) => Ht(dt.tm_min, 2),
        "%n": () => `
`,
        "%p": (dt) => dt.tm_hour >= 0 && dt.tm_hour < 12 ? "AM" : "PM",
        "%S": (dt) => Ht(dt.tm_sec, 2),
        "%t": () => "	",
        "%u": (dt) => dt.tm_wday || 7,
        "%U": (dt) => {
          var xt = dt.tm_yday + 7 - dt.tm_wday;
          return Ht(Math.floor(xt / 7), 2);
        },
        "%V": (dt) => {
          var xt = Math.floor((dt.tm_yday + 7 - (dt.tm_wday + 6) % 7) / 7);
          if ((dt.tm_wday + 371 - dt.tm_yday - 2) % 7 <= 2 && xt++, xt) {
            if (xt == 53) {
              var Ln = (dt.tm_wday + 371 - dt.tm_yday) % 7;
              Ln != 4 && (Ln != 3 || !_s(dt.tm_year)) && (xt = 1);
            }
          } else {
            xt = 52;
            var ba = (dt.tm_wday + 7 - dt.tm_yday - 1) % 7;
            (ba == 4 || ba == 5 && _s(dt.tm_year % 400 - 1)) && xt++;
          }
          return Ht(xt, 2);
        },
        "%w": (dt) => dt.tm_wday,
        "%W": (dt) => {
          var xt = dt.tm_yday + 7 - (dt.tm_wday + 6) % 7;
          return Ht(Math.floor(xt / 7), 2);
        },
        "%y": (dt) => (dt.tm_year + 1900).toString().substring(2),
        "%Y": (dt) => dt.tm_year + 1900,
        "%z": (dt) => {
          var xt = dt.tm_gmtoff, Ln = xt >= 0;
          return xt = Math.abs(xt) / 60, xt = xt / 60 * 100 + xt % 60, (Ln ? "+" : "-") + ("0000" + xt).slice(-4);
        },
        "%Z": (dt) => dt.tm_zone,
        "%%": () => "%"
      };
      Ue = Ue.replace(/%%/g, "\0\0");
      for (var lt in kn)
        Ue.includes(lt) && (Ue = Ue.replace(new RegExp(lt, "g"), kn[lt](qe)));
      Ue = Ue.replace(/\0\0/g, "%");
      var ma = yv(Ue);
      return ma.length > U ? 0 : (Lm(ma, L), ma.length - 1);
    }, vd = (L, U, re, me, Ve) => Ir(L, U, re, me);
    na = n.InternalError = class extends Error {
      constructor(L) {
        super(L), this.name = "InternalError";
      }
    }, Ja(), ft = n.BindingError = class extends Error {
      constructor(L) {
        super(L), this.name = "BindingError";
      }
    }, Wp(), qp(), Jp(), ad = n.UnboundTypeError = gm(Error, "UnboundTypeError"), wm(), ev();
    var _l = {
      s: le,
      u: Ce,
      b: Pe,
      g: Ie,
      q: Je,
      J: _e,
      f: $e,
      V: Ze,
      d: ie,
      da: Wn,
      Q: Vn,
      _: xa,
      ca: ym,
      ba: bm,
      w: Xp,
      Y: km,
      x: nv,
      h: av,
      L: iv,
      M: ov,
      t: lv,
      o: Mn,
      K: dv,
      C: qr,
      A: xm,
      ea: Tm,
      $: Im,
      R: Em,
      ha: Ic,
      fa: Hr,
      Z: fd,
      N: Un,
      O: to,
      aa: md,
      B: hv,
      X: hd,
      W: vv,
      T: Bm,
      U: Vm,
      E: Ye,
      D: ps,
      F: et,
      n: Ct,
      a: Mc,
      e: $m,
      m: kv,
      k: Cv,
      H: vs,
      v: xv,
      G: Le,
      z: gn,
      P: In,
      l: Sv,
      j: Zr,
      c: wv,
      p: bv,
      I: Tv,
      r: jt,
      i: Av,
      y: Ta,
      ga: _d,
      S: vd
    }, aa = Re(), gi = n._free = (L) => (gi = n._free = aa.ka)(L), gd = n._malloc = (L) => (gd = n._malloc = aa.la)(L), Fm = (L) => (Fm = aa.na)(L), Yn = (L, U) => (Yn = aa.oa)(L, U), pl = (L) => (pl = aa.pa)(L), ra = () => (ra = aa.qa)(), Tn = (L) => (Tn = aa.ra)(L), Nm = (L) => (Nm = aa.sa)(L), Um = (L) => (Um = aa.ta)(L), Vc = (L, U, re) => (Vc = aa.ua)(L, U, re), yd = (L) => (yd = aa.va)(L);
    n.dynCall_viijii = (L, U, re, me, Ve, qe, Ue) => (n.dynCall_viijii = aa.wa)(L, U, re, me, Ve, qe, Ue);
    var Bi = n.dynCall_jiiii = (L, U, re, me, Ve) => (Bi = n.dynCall_jiiii = aa.xa)(L, U, re, me, Ve);
    n.dynCall_iiiiij = (L, U, re, me, Ve, qe, Ue) => (n.dynCall_iiiiij = aa.ya)(L, U, re, me, Ve, qe, Ue), n.dynCall_iiiiijj = (L, U, re, me, Ve, qe, Ue, Ke, lt) => (n.dynCall_iiiiijj = aa.za)(L, U, re, me, Ve, qe, Ue, Ke, lt), n.dynCall_iiiiiijj = (L, U, re, me, Ve, qe, Ue, Ke, lt, mt) => (n.dynCall_iiiiiijj = aa.Aa)(L, U, re, me, Ve, qe, Ue, Ke, lt, mt);
    function Mc(L, U) {
      var re = ra();
      try {
        return jn(L)(U);
      } catch (me) {
        if (Tn(re), me !== me + 0)
          throw me;
        Yn(1, 0);
      }
    }
    function bv(L, U, re, me) {
      var Ve = ra();
      try {
        jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Yn(1, 0);
      }
    }
    function wv(L, U, re) {
      var me = ra();
      try {
        jn(L)(U, re);
      } catch (Ve) {
        if (Tn(me), Ve !== Ve + 0)
          throw Ve;
        Yn(1, 0);
      }
    }
    function kv(L, U, re, me) {
      var Ve = ra();
      try {
        return jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Yn(1, 0);
      }
    }
    function ps(L, U, re, me, Ve) {
      var qe = ra();
      try {
        return jn(L)(U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Yn(1, 0);
      }
    }
    function Zr(L, U) {
      var re = ra();
      try {
        jn(L)(U);
      } catch (me) {
        if (Tn(re), me !== me + 0)
          throw me;
        Yn(1, 0);
      }
    }
    function $m(L, U, re) {
      var me = ra();
      try {
        return jn(L)(U, re);
      } catch (Ve) {
        if (Tn(me), Ve !== Ve + 0)
          throw Ve;
        Yn(1, 0);
      }
    }
    function Sv(L) {
      var U = ra();
      try {
        jn(L)();
      } catch (re) {
        if (Tn(U), re !== re + 0)
          throw re;
        Yn(1, 0);
      }
    }
    function Cv(L, U, re, me, Ve) {
      var qe = ra();
      try {
        return jn(L)(U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Yn(1, 0);
      }
    }
    function Av(L, U, re, me, Ve, qe, Ue, Ke, lt, mt, St) {
      var $t = ra();
      try {
        jn(L)(U, re, me, Ve, qe, Ue, Ke, lt, mt, St);
      } catch (Ht) {
        if (Tn($t), Ht !== Ht + 0)
          throw Ht;
        Yn(1, 0);
      }
    }
    function xv(L, U, re, me, Ve, qe, Ue) {
      var Ke = ra();
      try {
        return jn(L)(U, re, me, Ve, qe, Ue);
      } catch (lt) {
        if (Tn(Ke), lt !== lt + 0)
          throw lt;
        Yn(1, 0);
      }
    }
    function Tv(L, U, re, me, Ve) {
      var qe = ra();
      try {
        jn(L)(U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Yn(1, 0);
      }
    }
    function vs(L, U, re, me, Ve, qe) {
      var Ue = ra();
      try {
        return jn(L)(U, re, me, Ve, qe);
      } catch (Ke) {
        if (Tn(Ue), Ke !== Ke + 0)
          throw Ke;
        Yn(1, 0);
      }
    }
    function Le(L, U, re, me, Ve, qe, Ue, Ke) {
      var lt = ra();
      try {
        return jn(L)(U, re, me, Ve, qe, Ue, Ke);
      } catch (mt) {
        if (Tn(lt), mt !== mt + 0)
          throw mt;
        Yn(1, 0);
      }
    }
    function et(L, U, re, me) {
      var Ve = ra();
      try {
        return jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Yn(1, 0);
      }
    }
    function Ye(L, U, re, me) {
      var Ve = ra();
      try {
        return jn(L)(U, re, me);
      } catch (qe) {
        if (Tn(Ve), qe !== qe + 0)
          throw qe;
        Yn(1, 0);
      }
    }
    function Ct(L) {
      var U = ra();
      try {
        return jn(L)();
      } catch (re) {
        if (Tn(U), re !== re + 0)
          throw re;
        Yn(1, 0);
      }
    }
    function jt(L, U, re, me, Ve, qe, Ue, Ke) {
      var lt = ra();
      try {
        jn(L)(U, re, me, Ve, qe, Ue, Ke);
      } catch (mt) {
        if (Tn(lt), mt !== mt + 0)
          throw mt;
        Yn(1, 0);
      }
    }
    function gn(L, U, re, me, Ve, qe, Ue, Ke, lt, mt, St, $t) {
      var Ht = ra();
      try {
        return jn(L)(U, re, me, Ve, qe, Ue, Ke, lt, mt, St, $t);
      } catch (zt) {
        if (Tn(Ht), zt !== zt + 0)
          throw zt;
        Yn(1, 0);
      }
    }
    function Ta(L, U, re, me, Ve, qe, Ue, Ke, lt, mt, St, $t, Ht, zt, bn, Rn) {
      var kn = ra();
      try {
        jn(L)(U, re, me, Ve, qe, Ue, Ke, lt, mt, St, $t, Ht, zt, bn, Rn);
      } catch (ma) {
        if (Tn(kn), ma !== ma + 0)
          throw ma;
        Yn(1, 0);
      }
    }
    function In(L, U, re, me, Ve) {
      var qe = ra();
      try {
        return Bi(L, U, re, me, Ve);
      } catch (Ue) {
        if (Tn(qe), Ue !== Ue + 0)
          throw Ue;
        Yn(1, 0);
      }
    }
    var gs;
    Z = function L() {
      gs || qm(), gs || (Z = L);
    };
    function qm() {
      if (de > 0 || (M(), de > 0))
        return;
      function L() {
        gs || (gs = !0, n.calledRun = !0, !w && (V(), a(n), n.onRuntimeInitialized && n.onRuntimeInitialized(), N()));
      }
      n.setStatus ? (n.setStatus("Running..."), setTimeout(function() {
        setTimeout(function() {
          n.setStatus("");
        }, 1), L();
      }, 1)) : L();
    }
    if (n.preInit)
      for (typeof n.preInit == "function" && (n.preInit = [n.preInit]); n.preInit.length > 0; )
        n.preInit.pop()();
    return qm(), t.ready;
  };
})();
function zX(e) {
  return i1(
    o1,
    e
  );
}
async function WX(e, t) {
  return qX(
    o1,
    e,
    t
  );
}
async function jX(e, t) {
  return HX(
    o1,
    e,
    t
  );
}
var Yd;
class wy extends EventTarget {
  constructor(t = {}) {
    var n;
    super(), gX(this, Yd, void 0);
    try {
      const a = (n = t?.formats) == null ? void 0 : n.filter(
        (r) => r !== "unknown"
      );
      if (a?.length === 0)
        throw new TypeError("Hint option provided, but is empty.");
      a?.forEach((r) => {
        if (!a_.has(r))
          throw new TypeError(
            `Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${r}' is not a valid enum value of type BarcodeFormat.`
          );
      }), yX(this, Yd, a ?? []), zX().then((r) => {
        this.dispatchEvent(
          new CustomEvent("load", {
            detail: r
          })
        );
      }).catch((r) => {
        this.dispatchEvent(new CustomEvent("error", { detail: r }));
      });
    } catch (a) {
      throw BA(
        a,
        "Failed to construct 'BarcodeDetector'"
      );
    }
  }
  static async getSupportedFormats() {
    return bX.filter((t) => t !== "unknown");
  }
  async detect(t) {
    try {
      const n = await TX(t);
      if (n === null)
        return [];
      let a;
      try {
        mD(n) ? a = await WX(n, {
          tryHarder: !0,
          formats: DA(this, Yd).map((r) => a_.get(r))
        }) : a = await jX(n, {
          tryHarder: !0,
          formats: DA(this, Yd).map((r) => a_.get(r))
        });
      } catch (r) {
        throw console.error(r), new DOMException(
          "Barcode detection service unavailable.",
          "NotSupportedError"
        );
      }
      return a.map((r) => {
        const {
          topLeft: { x: i, y: o },
          topRight: { x: l, y: s },
          bottomLeft: { x: d, y: u },
          bottomRight: { x: f, y: _ }
        } = r.position, g = Math.min(i, l, d, f), v = Math.min(o, s, u, _), w = Math.max(i, l, d, f), b = Math.max(o, s, u, _);
        return {
          boundingBox: new DOMRectReadOnly(
            g,
            v,
            w - g,
            b - v
          ),
          rawValue: r.text,
          format: wX(r.format),
          cornerPoints: [
            {
              x: i,
              y: o
            },
            {
              x: l,
              y: s
            },
            {
              x: f,
              y: _
            },
            {
              x: d,
              y: u
            }
          ]
        };
      });
    } catch (n) {
      throw BA(
        n,
        "Failed to execute 'detect' on 'BarcodeDetector'"
      );
    }
  }
}
Yd = /* @__PURE__ */ new WeakMap();
const vD = (e, t, n = "error") => {
  let a, r;
  const i = new Promise(
    (o, l) => {
      a = o, r = l, e.addEventListener(t, a), e.addEventListener(n, r);
    }
  );
  return i.finally(() => {
    e.removeEventListener(t, a), e.removeEventListener(n, r);
  }), i;
}, LA = (e) => new Promise((t) => setTimeout(t, e));
class gD extends Error {
  constructor() {
    super("this browser has no Stream API support"), this.name = "StreamApiNotSupportedError";
  }
}
class YX extends Error {
  constructor() {
    super(
      "camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."
    ), this.name = "InsecureContextError";
  }
}
class KX extends Error {
  constructor() {
    super(
      "Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"
    ), this.name = "StreamLoadTimeoutError";
  }
}
const GX = (e) => {
  let t = !1, n;
  return (...a) => (t || (n = e(a), t = !0), n);
};
function oo(e, t) {
  if (e === !1)
    throw new Error(t ?? "assertion failure");
}
function FA(e) {
  throw new Error("this code should be unreachable");
}
function QX() {
  return navigator.platform.toUpperCase().includes("MAC");
}
let yD;
async function JX(e) {
  if (window.BarcodeDetector === void 0)
    return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."), new wy({ formats: e });
  const t = await window.BarcodeDetector.getSupportedFormats(), n = e.filter((a) => !t.includes(a));
  return n.length > 0 ? (console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(n)}. Will use polyfill.`), new wy({ formats: e })) : QX() && e.includes("pdf417") ? (console.debug("[vue-qrcode-reader] Native BarcodeDetector is buggy for PDF417 codes on MacOS. Will use polyfill."), new wy({ formats: e })) : (console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."), new window.BarcodeDetector({ formats: e }));
}
async function bD(e) {
  yD = await JX(e);
}
const XX = async (e, {
  detectHandler: t,
  locateHandler: n,
  minDelay: a,
  formats: r
}) => {
  console.debug("[vue-qrcode-reader] start scanning"), await bD(r);
  const i = (o) => async (l) => {
    if (e.readyState === 0)
      console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");
    else {
      const { lastScanned: s, contentBefore: d, lastScanHadContent: u } = o;
      if (l - s < a)
        window.requestAnimationFrame(i(o));
      else {
        const f = await yD.detect(e), _ = f.some((w) => !d.includes(w.rawValue));
        _ && t(f);
        const g = f.length > 0;
        g && n(f), !g && u && n(f);
        const v = {
          lastScanned: l,
          lastScanHadContent: g,
          // It can happen that a QR code is constantly in view of the camera but
          // maybe a scanned frame is a bit blurry and we detect nothing but in the
          // next frame we detect the code again. We also want to avoid emitting
          // a `detect` event in such a case. So we don't reset `contentBefore`,
          // if we detect nothing, only if we detect something new.
          contentBefore: _ ? f.map((w) => w.rawValue) : d
        };
        window.requestAnimationFrame(i(v));
      }
    }
  };
  i({
    lastScanned: performance.now(),
    contentBefore: [],
    lastScanHadContent: !1
  })(performance.now());
};
var wD = {}, Jr = {};
Object.defineProperty(Jr, "__esModule", {
  value: !0
});
Jr.compactObject = CD;
Jr.deprecated = sZ;
var ZX = Jr.detectBrowser = lZ;
Jr.disableLog = rZ;
Jr.disableWarnings = iZ;
Jr.extractVersion = r_;
Jr.filterStats = cZ;
Jr.log = oZ;
Jr.walkStats = W_;
Jr.wrapPeerConnectionEvent = aZ;
function eZ(e, t, n) {
  return t = tZ(t), t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e;
}
function tZ(e) {
  var t = nZ(e, "string");
  return Xs(t) === "symbol" ? t : String(t);
}
function nZ(e, t) {
  if (Xs(e) !== "object" || e === null)
    return e;
  var n = e[Symbol.toPrimitive];
  if (n !== void 0) {
    var a = n.call(e, t);
    if (Xs(a) !== "object")
      return a;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e);
}
function Xs(e) {
  "@babel/helpers - typeof";
  return Xs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Xs(e);
}
var kD = !0, SD = !0;
function r_(e, t, n) {
  var a = e.match(t);
  return a && a.length >= n && parseInt(a[n], 10);
}
function aZ(e, t, n) {
  if (e.RTCPeerConnection) {
    var a = e.RTCPeerConnection.prototype, r = a.addEventListener;
    a.addEventListener = function(o, l) {
      if (o !== t)
        return r.apply(this, arguments);
      var s = function(d) {
        var u = n(d);
        u && (l.handleEvent ? l.handleEvent(u) : l(u));
      };
      return this._eventMap = this._eventMap || {}, this._eventMap[t] || (this._eventMap[t] = /* @__PURE__ */ new Map()), this._eventMap[t].set(l, s), r.apply(this, [o, s]);
    };
    var i = a.removeEventListener;
    a.removeEventListener = function(o, l) {
      if (o !== t || !this._eventMap || !this._eventMap[t])
        return i.apply(this, arguments);
      if (!this._eventMap[t].has(l))
        return i.apply(this, arguments);
      var s = this._eventMap[t].get(l);
      return this._eventMap[t].delete(l), this._eventMap[t].size === 0 && delete this._eventMap[t], Object.keys(this._eventMap).length === 0 && delete this._eventMap, i.apply(this, [o, s]);
    }, Object.defineProperty(a, "on" + t, {
      get: function() {
        return this["_on" + t];
      },
      set: function(o) {
        this["_on" + t] && (this.removeEventListener(t, this["_on" + t]), delete this["_on" + t]), o && this.addEventListener(t, this["_on" + t] = o);
      },
      enumerable: !0,
      configurable: !0
    });
  }
}
function rZ(e) {
  return typeof e != "boolean" ? new Error("Argument type: " + Xs(e) + ". Please use a boolean.") : (kD = e, e ? "adapter.js logging disabled" : "adapter.js logging enabled");
}
function iZ(e) {
  return typeof e != "boolean" ? new Error("Argument type: " + Xs(e) + ". Please use a boolean.") : (SD = !e, "adapter.js deprecation warnings " + (e ? "disabled" : "enabled"));
}
function oZ() {
  if ((typeof window > "u" ? "undefined" : Xs(window)) === "object") {
    if (kD)
      return;
    typeof console < "u" && typeof console.log == "function" && console.log.apply(console, arguments);
  }
}
function sZ(e, t) {
  SD && console.warn(e + " is deprecated, please use " + t + " instead.");
}
function lZ(e) {
  var t = {
    browser: null,
    version: null
  };
  if (typeof e > "u" || !e.navigator || !e.navigator.userAgent)
    return t.browser = "Not a browser.", t;
  var n = e.navigator;
  if (n.mozGetUserMedia)
    t.browser = "firefox", t.version = r_(n.userAgent, /Firefox\/(\d+)\./, 1);
  else if (n.webkitGetUserMedia || e.isSecureContext === !1 && e.webkitRTCPeerConnection)
    t.browser = "chrome", t.version = r_(n.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
  else if (e.RTCPeerConnection && n.userAgent.match(/AppleWebKit\/(\d+)\./))
    t.browser = "safari", t.version = r_(n.userAgent, /AppleWebKit\/(\d+)\./, 1), t.supportsUnifiedPlan = e.RTCRtpTransceiver && "currentDirection" in e.RTCRtpTransceiver.prototype;
  else
    return t.browser = "Not a supported browser.", t;
  return t;
}
function NA(e) {
  return Object.prototype.toString.call(e) === "[object Object]";
}
function CD(e) {
  return NA(e) ? Object.keys(e).reduce(function(t, n) {
    var a = NA(e[n]), r = a ? CD(e[n]) : e[n], i = a && !Object.keys(r).length;
    return r === void 0 || i ? t : Object.assign(t, eZ({}, n, r));
  }, {}) : e;
}
function W_(e, t, n) {
  !t || n.has(t.id) || (n.set(t.id, t), Object.keys(t).forEach(function(a) {
    a.endsWith("Id") ? W_(e, e.get(t[a]), n) : a.endsWith("Ids") && t[a].forEach(function(r) {
      W_(e, e.get(r), n);
    });
  }));
}
function cZ(e, t, n) {
  var a = n ? "outbound-rtp" : "inbound-rtp", r = /* @__PURE__ */ new Map();
  if (t === null)
    return r;
  var i = [];
  return e.forEach(function(o) {
    o.type === "track" && o.trackIdentifier === t.id && i.push(o);
  }), i.forEach(function(o) {
    e.forEach(function(l) {
      l.type === a && l.trackId === o.id && W_(e, l, r);
    });
  }), r;
}
Object.defineProperty(wD, "__esModule", {
  value: !0
});
var uZ = wD.shimGetUserMedia = mZ, dZ = fZ(Jr);
function AD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (AD = function(a) {
    return a ? n : t;
  })(e);
}
function fZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || Vs(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = AD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function Vs(e) {
  "@babel/helpers - typeof";
  return Vs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Vs(e);
}
var UA = dZ.log;
function mZ(e, t) {
  var n = e && e.navigator;
  if (n.mediaDevices) {
    var a = function(s) {
      if (Vs(s) !== "object" || s.mandatory || s.optional)
        return s;
      var d = {};
      return Object.keys(s).forEach(function(u) {
        if (!(u === "require" || u === "advanced" || u === "mediaSource")) {
          var f = Vs(s[u]) === "object" ? s[u] : {
            ideal: s[u]
          };
          f.exact !== void 0 && typeof f.exact == "number" && (f.min = f.max = f.exact);
          var _ = function(v, w) {
            return v ? v + w.charAt(0).toUpperCase() + w.slice(1) : w === "deviceId" ? "sourceId" : w;
          };
          if (f.ideal !== void 0) {
            d.optional = d.optional || [];
            var g = {};
            typeof f.ideal == "number" ? (g[_("min", u)] = f.ideal, d.optional.push(g), g = {}, g[_("max", u)] = f.ideal, d.optional.push(g)) : (g[_("", u)] = f.ideal, d.optional.push(g));
          }
          f.exact !== void 0 && typeof f.exact != "number" ? (d.mandatory = d.mandatory || {}, d.mandatory[_("", u)] = f.exact) : ["min", "max"].forEach(function(v) {
            f[v] !== void 0 && (d.mandatory = d.mandatory || {}, d.mandatory[_(v, u)] = f[v]);
          });
        }
      }), s.advanced && (d.optional = (d.optional || []).concat(s.advanced)), d;
    }, r = function(s, d) {
      if (t.version >= 61)
        return d(s);
      if (s = JSON.parse(JSON.stringify(s)), s && Vs(s.audio) === "object") {
        var u = function(v, w, b) {
          w in v && !(b in v) && (v[b] = v[w], delete v[w]);
        };
        s = JSON.parse(JSON.stringify(s)), u(s.audio, "autoGainControl", "googAutoGainControl"), u(s.audio, "noiseSuppression", "googNoiseSuppression"), s.audio = a(s.audio);
      }
      if (s && Vs(s.video) === "object") {
        var f = s.video.facingMode;
        f = f && (Vs(f) === "object" ? f : {
          ideal: f
        });
        var _ = t.version < 66;
        if (f && (f.exact === "user" || f.exact === "environment" || f.ideal === "user" || f.ideal === "environment") && !(n.mediaDevices.getSupportedConstraints && n.mediaDevices.getSupportedConstraints().facingMode && !_)) {
          delete s.video.facingMode;
          var g;
          if (f.exact === "environment" || f.ideal === "environment" ? g = ["back", "rear"] : (f.exact === "user" || f.ideal === "user") && (g = ["front"]), g)
            return n.mediaDevices.enumerateDevices().then(function(v) {
              v = v.filter(function(b) {
                return b.kind === "videoinput";
              });
              var w = v.find(function(b) {
                return g.some(function(p) {
                  return b.label.toLowerCase().includes(p);
                });
              });
              return !w && v.length && g.includes("back") && (w = v[v.length - 1]), w && (s.video.deviceId = f.exact ? {
                exact: w.deviceId
              } : {
                ideal: w.deviceId
              }), s.video = a(s.video), UA("chrome: " + JSON.stringify(s)), d(s);
            });
        }
        s.video = a(s.video);
      }
      return UA("chrome: " + JSON.stringify(s)), d(s);
    }, i = function(s) {
      return t.version >= 64 ? s : {
        name: {
          PermissionDeniedError: "NotAllowedError",
          PermissionDismissedError: "NotAllowedError",
          InvalidStateError: "NotAllowedError",
          DevicesNotFoundError: "NotFoundError",
          ConstraintNotSatisfiedError: "OverconstrainedError",
          TrackStartError: "NotReadableError",
          MediaDeviceFailedDueToShutdown: "NotAllowedError",
          MediaDeviceKillSwitchOn: "NotAllowedError",
          TabCaptureError: "AbortError",
          ScreenCaptureError: "AbortError",
          DeviceCaptureError: "AbortError"
        }[s.name] || s.name,
        message: s.message,
        constraint: s.constraint || s.constraintName,
        toString: function() {
          return this.name + (this.message && ": ") + this.message;
        }
      };
    }, o = function(s, d, u) {
      r(s, function(f) {
        n.webkitGetUserMedia(f, d, function(_) {
          u && u(i(_));
        });
      });
    };
    if (n.getUserMedia = o.bind(n), n.mediaDevices.getUserMedia) {
      var l = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
      n.mediaDevices.getUserMedia = function(s) {
        return r(s, function(d) {
          return l(d).then(function(u) {
            if (d.audio && !u.getAudioTracks().length || d.video && !u.getVideoTracks().length)
              throw u.getTracks().forEach(function(f) {
                f.stop();
              }), new DOMException("", "NotFoundError");
            return u;
          }, function(u) {
            return Promise.reject(i(u));
          });
        });
      };
    }
  }
}
var xD = {};
Object.defineProperty(xD, "__esModule", {
  value: !0
});
var hZ = xD.shimGetUserMedia = vZ, _Z = pZ(Jr);
function TD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (TD = function(a) {
    return a ? n : t;
  })(e);
}
function pZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || pu(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = TD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function pu(e) {
  "@babel/helpers - typeof";
  return pu = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, pu(e);
}
function vZ(e, t) {
  var n = e && e.navigator, a = e && e.MediaStreamTrack;
  if (n.getUserMedia = function(s, d, u) {
    _Z.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), n.mediaDevices.getUserMedia(s).then(d, u);
  }, !(t.version > 55 && "autoGainControl" in n.mediaDevices.getSupportedConstraints())) {
    var r = function(s, d, u) {
      d in s && !(u in s) && (s[u] = s[d], delete s[d]);
    }, i = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
    if (n.mediaDevices.getUserMedia = function(s) {
      return pu(s) === "object" && pu(s.audio) === "object" && (s = JSON.parse(JSON.stringify(s)), r(s.audio, "autoGainControl", "mozAutoGainControl"), r(s.audio, "noiseSuppression", "mozNoiseSuppression")), i(s);
    }, a && a.prototype.getSettings) {
      var o = a.prototype.getSettings;
      a.prototype.getSettings = function() {
        var s = o.apply(this, arguments);
        return r(s, "mozAutoGainControl", "autoGainControl"), r(s, "mozNoiseSuppression", "noiseSuppression"), s;
      };
    }
    if (a && a.prototype.applyConstraints) {
      var l = a.prototype.applyConstraints;
      a.prototype.applyConstraints = function(s) {
        return this.kind === "audio" && pu(s) === "object" && (s = JSON.parse(JSON.stringify(s)), r(s, "autoGainControl", "mozAutoGainControl"), r(s, "noiseSuppression", "mozNoiseSuppression")), l.apply(this, [s]);
      };
    }
  }
}
var Io = {};
Object.defineProperty(Io, "__esModule", {
  value: !0
});
Io.shimAudioContext = TZ;
Io.shimCallbacksAPI = kZ;
Io.shimConstraints = PD;
Io.shimCreateOfferLegacy = xZ;
var gZ = Io.shimGetUserMedia = SZ;
Io.shimLocalStreamsAPI = bZ;
Io.shimRTCIceServerUrls = CZ;
Io.shimRemoteStreamsAPI = wZ;
Io.shimTrackEventTransceiver = AZ;
var ID = yZ(Jr);
function ED(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (ED = function(a) {
    return a ? n : t;
  })(e);
}
function yZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || Zs(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = ED(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function Zs(e) {
  "@babel/helpers - typeof";
  return Zs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Zs(e);
}
function bZ(e) {
  if (!(Zs(e) !== "object" || !e.RTCPeerConnection)) {
    if ("getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function() {
      return this._localStreams || (this._localStreams = []), this._localStreams;
    }), !("addStream" in e.RTCPeerConnection.prototype)) {
      var t = e.RTCPeerConnection.prototype.addTrack;
      e.RTCPeerConnection.prototype.addStream = function(n) {
        var a = this;
        this._localStreams || (this._localStreams = []), this._localStreams.includes(n) || this._localStreams.push(n), n.getAudioTracks().forEach(function(r) {
          return t.call(a, r, n);
        }), n.getVideoTracks().forEach(function(r) {
          return t.call(a, r, n);
        });
      }, e.RTCPeerConnection.prototype.addTrack = function(n) {
        for (var a = this, r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
          i[o - 1] = arguments[o];
        return i && i.forEach(function(l) {
          a._localStreams ? a._localStreams.includes(l) || a._localStreams.push(l) : a._localStreams = [l];
        }), t.apply(this, arguments);
      };
    }
    "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function(n) {
      var a = this;
      this._localStreams || (this._localStreams = []);
      var r = this._localStreams.indexOf(n);
      if (r !== -1) {
        this._localStreams.splice(r, 1);
        var i = n.getTracks();
        this.getSenders().forEach(function(o) {
          i.includes(o.track) && a.removeTrack(o);
        });
      }
    });
  }
}
function wZ(e) {
  if (!(Zs(e) !== "object" || !e.RTCPeerConnection) && ("getRemoteStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function() {
    return this._remoteStreams ? this._remoteStreams : [];
  }), !("onaddstream" in e.RTCPeerConnection.prototype))) {
    Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
      get: function() {
        return this._onaddstream;
      },
      set: function(n) {
        var a = this;
        this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = n), this.addEventListener("track", this._onaddstreampoly = function(r) {
          r.streams.forEach(function(i) {
            if (a._remoteStreams || (a._remoteStreams = []), !a._remoteStreams.includes(i)) {
              a._remoteStreams.push(i);
              var o = new Event("addstream");
              o.stream = i, a.dispatchEvent(o);
            }
          });
        });
      }
    });
    var t = e.RTCPeerConnection.prototype.setRemoteDescription;
    e.RTCPeerConnection.prototype.setRemoteDescription = function() {
      var n = this;
      return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(a) {
        a.streams.forEach(function(r) {
          if (n._remoteStreams || (n._remoteStreams = []), !(n._remoteStreams.indexOf(r) >= 0)) {
            n._remoteStreams.push(r);
            var i = new Event("addstream");
            i.stream = r, n.dispatchEvent(i);
          }
        });
      }), t.apply(n, arguments);
    };
  }
}
function kZ(e) {
  if (!(Zs(e) !== "object" || !e.RTCPeerConnection)) {
    var t = e.RTCPeerConnection.prototype, n = t.createOffer, a = t.createAnswer, r = t.setLocalDescription, i = t.setRemoteDescription, o = t.addIceCandidate;
    t.createOffer = function(s, d) {
      var u = arguments.length >= 2 ? arguments[2] : arguments[0], f = n.apply(this, [u]);
      return d ? (f.then(s, d), Promise.resolve()) : f;
    }, t.createAnswer = function(s, d) {
      var u = arguments.length >= 2 ? arguments[2] : arguments[0], f = a.apply(this, [u]);
      return d ? (f.then(s, d), Promise.resolve()) : f;
    };
    var l = function(s, d, u) {
      var f = r.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    };
    t.setLocalDescription = l, l = function(s, d, u) {
      var f = i.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    }, t.setRemoteDescription = l, l = function(s, d, u) {
      var f = o.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    }, t.addIceCandidate = l;
  }
}
function SZ(e) {
  var t = e && e.navigator;
  if (t.mediaDevices && t.mediaDevices.getUserMedia) {
    var n = t.mediaDevices, a = n.getUserMedia.bind(n);
    t.mediaDevices.getUserMedia = function(r) {
      return a(PD(r));
    };
  }
  !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function(r, i, o) {
    t.mediaDevices.getUserMedia(r).then(i, o);
  }.bind(t));
}
function PD(e) {
  return e && e.video !== void 0 ? Object.assign({}, e, {
    video: ID.compactObject(e.video)
  }) : e;
}
function CZ(e) {
  if (e.RTCPeerConnection) {
    var t = e.RTCPeerConnection;
    e.RTCPeerConnection = function(n, a) {
      if (n && n.iceServers) {
        for (var r = [], i = 0; i < n.iceServers.length; i++) {
          var o = n.iceServers[i];
          o.urls === void 0 && o.url ? (ID.deprecated("RTCIceServer.url", "RTCIceServer.urls"), o = JSON.parse(JSON.stringify(o)), o.urls = o.url, delete o.url, r.push(o)) : r.push(n.iceServers[i]);
        }
        n.iceServers = r;
      }
      return new t(n, a);
    }, e.RTCPeerConnection.prototype = t.prototype, "generateCertificate" in t && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
      get: function() {
        return t.generateCertificate;
      }
    });
  }
}
function AZ(e) {
  Zs(e) === "object" && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
    get: function() {
      return {
        receiver: this.receiver
      };
    }
  });
}
function xZ(e) {
  var t = e.RTCPeerConnection.prototype.createOffer;
  e.RTCPeerConnection.prototype.createOffer = function(n) {
    if (n) {
      typeof n.offerToReceiveAudio < "u" && (n.offerToReceiveAudio = !!n.offerToReceiveAudio);
      var a = this.getTransceivers().find(function(i) {
        return i.receiver.track.kind === "audio";
      });
      n.offerToReceiveAudio === !1 && a ? a.direction === "sendrecv" ? a.setDirection ? a.setDirection("sendonly") : a.direction = "sendonly" : a.direction === "recvonly" && (a.setDirection ? a.setDirection("inactive") : a.direction = "inactive") : n.offerToReceiveAudio === !0 && !a && this.addTransceiver("audio", {
        direction: "recvonly"
      }), typeof n.offerToReceiveVideo < "u" && (n.offerToReceiveVideo = !!n.offerToReceiveVideo);
      var r = this.getTransceivers().find(function(i) {
        return i.receiver.track.kind === "video";
      });
      n.offerToReceiveVideo === !1 && r ? r.direction === "sendrecv" ? r.setDirection ? r.setDirection("sendonly") : r.direction = "sendonly" : r.direction === "recvonly" && (r.setDirection ? r.setDirection("inactive") : r.direction = "inactive") : n.offerToReceiveVideo === !0 && !r && this.addTransceiver("video", {
        direction: "recvonly"
      });
    }
    return t.apply(this, arguments);
  };
}
function TZ(e) {
  Zs(e) !== "object" || e.AudioContext || (e.AudioContext = e.webkitAudioContext);
}
const IZ = GX(() => {
  const e = ZX(window);
  switch (e.browser) {
    case "chrome":
      uZ(window, e);
      break;
    case "firefox":
      hZ(window, e);
      break;
    case "safari":
      gZ(window, e);
      break;
    default:
      throw new gD();
  }
});
let vu = Promise.resolve({ type: "stop", data: {} });
async function $A(e, t, n) {
  var a, r, i;
  if (console.debug(
    "[vue-qrcode-reader] starting camera with constraints: ",
    JSON.stringify(t)
  ), window.isSecureContext !== !0)
    throw new YX();
  if (((a = navigator?.mediaDevices) == null ? void 0 : a.getUserMedia) === void 0)
    throw new gD();
  IZ(), console.debug("[vue-qrcode-reader] calling getUserMedia");
  const o = await navigator.mediaDevices.getUserMedia({
    audio: !1,
    video: t
  });
  e.srcObject !== void 0 ? e.srcObject = o : e.mozSrcObject !== void 0 ? e.mozSrcObject = o : window.URL.createObjectURL ? e.src = window.URL.createObjectURL(o) : window.webkitURL ? e.src = window.webkitURL.createObjectURL(o) : e.src = o.id, e.play(), console.debug("[vue-qrcode-reader] waiting for video element to load"), await Promise.race([
    vD(e, "loadeddata"),
    // On iOS devices in PWA mode, QrcodeStream works initially, but after
    // killing and restarting the PWA, all video elements fail to load camera
    // streams and never emit the `loadeddata` event. Looks like this is
    // related to a WebKit issue (see #298). No workarounds at the moment.
    // To at least detect this situation, we throw an error if the event
    // has not been emitted after a 6 second timeout.
    LA(6e3).then(() => {
      throw new KX();
    })
  ]), console.debug("[vue-qrcode-reader] video element loaded"), await LA(500);
  const [l] = o.getVideoTracks(), s = (i = (r = l?.getCapabilities) == null ? void 0 : r.call(l)) != null ? i : {};
  let d = !1;
  return n && s.torch && (await l.applyConstraints({ advanced: [{ torch: !0 }] }), d = !0), console.debug("[vue-qrcode-reader] camera ready"), {
    type: "start",
    data: {
      videoEl: e,
      stream: o,
      capabilities: s,
      constraints: t,
      isTorchOn: d
    }
  };
}
async function EZ(e, {
  constraints: t,
  torch: n,
  restart: a = !1
}) {
  vu = vu.then((i) => {
    if (i.type === "start") {
      const {
        data: {
          videoEl: o,
          stream: l,
          constraints: s,
          isTorchOn: d
        }
      } = i;
      return !a && e === o && t === s && n === d ? i : OD(o, l, d).then(
        () => $A(e, t, n)
      );
    } else if (i.type === "stop" || i.type === "failed")
      return $A(e, t, n);
    FA();
  }).catch((i) => (console.debug(`[vue-qrcode-reader] starting camera failed with "${i}"`), { type: "failed", error: i }));
  const r = await vu;
  if (r.type === "stop")
    throw new Error("Something went wrong with the camera task queue (start task).");
  if (r.type === "failed")
    throw r.error;
  if (r.type === "start")
    return r.data.capabilities;
  FA();
}
async function OD(e, t, n) {
  console.debug("[vue-qrcode-reader] stopping camera"), e.src = "", e.srcObject = null, e.load(), await vD(e, "error");
  for (const a of t.getTracks())
    n != null || await a.applyConstraints({ advanced: [{ torch: !1 }] }), t.removeTrack(a), a.stop();
  return {
    type: "stop",
    data: {}
  };
}
async function Nh() {
  if (vu = vu.then((e) => {
    if (e.type === "stop" || e.type === "failed")
      return e;
    const {
      data: { videoEl: t, stream: n, isTorchOn: a }
    } = e;
    return OD(t, n, a);
  }), (await vu).type === "start")
    throw new Error("Something went wrong with the camera task queue (stop task).");
}
const PZ = /* @__PURE__ */ Ha({
  __name: "QrcodeStream",
  props: {
    constraints: { default: () => ({ facingMode: "environment" }) },
    formats: { default: () => ["qr_code"] },
    paused: { type: Boolean, default: !1 },
    torch: { type: Boolean, default: !1 },
    track: { type: Function, default: void 0 }
  },
  emits: ["detect", "camera-on", "camera-off", "error"],
  setup(e, { emit: t }) {
    const n = e, a = t, r = Se(n.constraints), i = Se(n.formats);
    nt(
      () => n.constraints,
      (S, E) => {
        JSON.stringify(S) !== JSON.stringify(E) && (r.value = S);
      },
      { deep: !0 }
    ), nt(
      () => n.formats,
      (S, E) => {
        JSON.stringify(S) !== JSON.stringify(E) && (i.value = S);
      },
      { deep: !0 }
    );
    const o = Se(), l = Se(), s = Se(), d = Se(!1), u = Se(!1);
    nn(() => {
      u.value = !0;
    }), di(() => {
      Nh();
    });
    const f = z(() => ({
      torch: n.torch,
      constraints: r.value,
      shouldStream: u.value && !n.paused
    }));
    nt(
      f,
      async (S) => {
        const E = s.value;
        oo(
          E !== void 0,
          "cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined."
        );
        const C = o.value;
        oo(
          C !== void 0,
          "cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined."
        );
        const B = C.getContext("2d");
        if (oo(B !== null, "if cavnas is defined, canvas 2d context should also be non-null"), S.shouldStream) {
          Nh(), d.value = !1;
          try {
            const O = await EZ(E, S);
            u.value ? (d.value = !0, a("camera-on", O)) : await Nh();
          } catch (O) {
            a("error", O);
          }
        } else
          C.width = E.videoWidth, C.height = E.videoHeight, B.drawImage(E, 0, 0, E.videoWidth, E.videoHeight), Nh(), d.value = !1, a("camera-off");
      },
      { deep: !0 }
    ), nt(i, async (S) => {
      u.value && await bD(S);
    });
    const _ = z(() => f.value.shouldStream && d.value);
    nt(_, (S) => {
      if (S) {
        oo(
          o.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"
        ), g(o.value), oo(
          l.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"
        ), g(l.value);
        const E = () => n.track === void 0 ? 500 : 40;
        oo(
          s.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"
        ), XX(s.value, {
          detectHandler: (C) => a("detect", C),
          formats: i.value,
          locateHandler: v,
          minDelay: E()
        });
      }
    });
    const g = (S) => {
      const E = S.getContext("2d");
      oo(E !== null, "canvas 2d context should always be non-null"), E.clearRect(0, 0, S.width, S.height);
    }, v = (S) => {
      const E = l.value;
      oo(
        E !== void 0,
        "onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined."
      );
      const C = s.value;
      if (oo(
        C !== void 0,
        "onLocate handler should only be called when component is mounted. Thus video element is always defined."
      ), S.length === 0 || n.track === void 0)
        g(E);
      else {
        const B = C.offsetWidth, O = C.offsetHeight, D = C.videoWidth, T = C.videoHeight, P = Math.max(B / D, O / T), I = D * P, M = T * P, V = I / D, N = M / T, q = (B - I) / 2, j = (O - M) / 2, ee = ({ x: Y, y: se }) => ({
          x: Math.floor(Y * V),
          y: Math.floor(se * N)
        }), de = ({ x: Y, y: se }) => ({
          x: Math.floor(Y + q),
          y: Math.floor(se + j)
        }), Z = S.map((Y) => {
          const { boundingBox: se, cornerPoints: X } = Y, { x: he, y: ve } = de(
            ee({
              x: se.x,
              y: se.y
            })
          ), { x: pe, y: H } = ee({
            x: se.width,
            y: se.height
          });
          return {
            ...Y,
            cornerPoints: X.map((we) => de(ee(we))),
            boundingBox: DOMRectReadOnly.fromRect({ x: he, y: ve, width: pe, height: H })
          };
        });
        E.width = C.offsetWidth, E.height = C.offsetHeight;
        const F = E.getContext("2d");
        oo(F !== null, "canvas 2d context should always be non-null"), n.track(Z, F);
      }
    }, w = {
      width: "100%",
      height: "100%",
      position: "relative",
      // notice that we use z-index only once for the wrapper div.
      // If z-index is not defined, elements are stacked in the order they appear in the DOM.
      // The first element is at the very bottom and subsequent elements are added on top.
      "z-index": "0"
    }, b = {
      width: "100%",
      height: "100%",
      position: "absolute",
      top: "0",
      left: "0"
    }, p = {
      width: "100%",
      height: "100%",
      "object-fit": "cover"
    }, y = z(() => _.value ? p : {
      ...p,
      visibility: "hidden",
      position: "absolute"
    });
    return (S, E) => (ne(), Be("div", { style: w }, [
      A("video", {
        ref_key: "videoRef",
        ref: s,
        style: Xe(y.value),
        autoplay: "",
        muted: "",
        playsinline: ""
      }, null, 4),
      ln(A("canvas", {
        id: "qrcode-stream-pause-frame",
        ref_key: "pauseFrameRef",
        ref: o,
        style: p
      }, null, 512), [
        [Sa, !_.value]
      ]),
      A("canvas", {
        id: "qrcode-stream-tracking-layer",
        ref_key: "trackingLayerRef",
        ref: l,
        style: b
      }, null, 512),
      A("div", { style: b }, [
        bt(S.$slots, "default")
      ])
    ]));
  }
}), OZ = {
  name: "CameraScanner",
  components: {
    QrcodeStream: PZ
  },
  props: {
    scanType: {
      type: String,
      default: "Both"
      // 'QR Code', 'Barcode', 'Both'. Note: vue-qrcode-reader uses a 'formats' prop.
    }
  },
  data() {
    return {
      scannerDialog: !1,
      scanResult: "",
      scanFormat: "",
      // We might get this from the 'detect' event payload
      errorMessage: "",
      cameraPermissionDenied: !1,
      isScanning: !1,
      torchActive: !1,
      selectedDeviceId: null,
      // For camera switching
      cameras: []
      // To store available cameras
      // Old properties to be removed or re-evaluated:
      // qrScanner: null,
      // flashlightSupported: false, // vue-qrcode-reader handles this via QrcodeStream's torch prop
      // flashlightOn: false, // replaced by torchActive
      // multipleCameras: false, // Handled by checking cameras.length
      // currentCameraId: null, // replaced by selectedDeviceId
      // availableCameras: [], // replaced by cameras
      // barcodeDetectionInterval: null,
      // isDecodingBarcode: false,
      // videoStream: null
    };
  },
  computed: {
    readerFormats() {
      const e = [
        "qr_code",
        "ean_13",
        "ean_8",
        "code_128",
        "code_39",
        "code_93",
        "codabar",
        "upc_a",
        "upc_e",
        "itf"
        // ITF (Interleaved 2 of 5)
        // Add other formats if needed and supported by zxing-wasm
      ];
      return this.scanType === "QR Code" ? ["qr_code"] : this.scanType === "Barcode" ? e.filter((t) => t !== "qr_code") : e;
    }
  },
  methods: {
    async startScanning() {
      this.scannerDialog = !0, this.errorMessage = "", this.scanResult = "", this.scanFormat = "", this.cameraPermissionDenied = !1, this.isScanning = !0, await this.$nextTick(), await this.listCameras();
    },
    async listCameras() {
      try {
        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
          console.warn("MediaDevices API not supported."), this.cameras = [];
          return;
        }
        const e = await navigator.mediaDevices.enumerateDevices();
        if (this.cameras = e.filter((t) => t.kind === "videoinput"), this.cameras.length > 0 && !this.selectedDeviceId) {
          const t = this.cameras.find(
            (n) => /back|rear|environment/i.test(n.label)
          );
          this.selectedDeviceId = t ? t.deviceId : this.cameras[0].deviceId;
        }
      } catch (e) {
        console.error("Error listing cameras:", e), this.cameras = [];
      }
    },
    onDetect(e) {
      if (e && e.length > 0) {
        const t = e[0];
        this.scanResult = t.rawValue, this.scanFormat = t.format, this.errorMessage = "", this.$emit("barcode-scanned", this.scanResult), typeof frappe < "u" && frappe.show_alert && frappe.show_alert(
          {
            message: this.__("Code scanned successfully") + ` (${this.scanFormat})`,
            indicator: "green"
          },
          3
        ), this.isScanning = !1, setTimeout(() => {
          this.scanResult = "", this.scanFormat = "", this.isScanning = !0;
        }, 1e3);
      }
    },
    onError(e) {
      this.errorMessage = e.name || "Unknown error", e.name === "NotAllowedError" ? (this.cameraPermissionDenied = !0, this.errorMessage = this.__(
        "Camera permission denied. Please allow camera access in your browser settings."
      )) : e.name === "NotFoundError" || e.name === "DevicesNotFoundError" ? this.errorMessage = this.__("No camera found on this device.") : e.name === "NotSupportedError" ? this.errorMessage = this.__("Secure context (HTTPS) required for camera access.") : e.name === "AbortError" ? this.errorMessage = this.__("Camera access aborted.") : this.errorMessage = this.__("Error accessing camera:") + ` ${e.message}`, console.error("Camera error:", e), this.isScanning = !1;
    },
    stopScanning() {
      this.isScanning = !1, this.scannerDialog = !1, this.scanResult = "", this.scanFormat = "", this.errorMessage = "", this.torchActive = !1, this.$emit("scanner-closed");
    },
    async toggleTorch() {
      this.torchActive = !this.torchActive;
    },
    async switchCamera() {
      if (this.cameras.length > 1) {
        const t = (this.cameras.findIndex((n) => n.deviceId === this.selectedDeviceId) + 1) % this.cameras.length;
        this.selectedDeviceId = this.cameras[t].deviceId, this.isScanning = !1, await this.$nextTick(), this.isScanning = !0, typeof frappe < "u" && frappe.show_alert && frappe.show_alert(
          {
            message: this.__("Switched to: ") + (this.cameras[t].label || `Camera ${t + 1}`),
            indicator: "blue"
          },
          2
        );
      }
    },
    // Old methods to remove or adapt:
    // initializeAutoDetectionScanner, startBarcodeDetection, detectBarcodeInImageData,
    // onScanSuccess (replaced by onDetect), stopCurrentScanner, toggleFlashlight (replaced by toggleTorch)
    // handleScannerError (replaced by onError)
    handleEscKey(e) {
      e.key === "Escape" && this.scannerDialog && (e.preventDefault(), this.stopScanning());
    }
  },
  watch: {
    scannerDialog(e) {
      e ? !this.selectedDeviceId && this.cameras.length === 0 && this.listCameras() : (this.isScanning = !1, this.torchActive = !1);
    }
  },
  mounted() {
    typeof document < "u" && document.addEventListener("keydown", this.handleEscKey);
  },
  beforeUnmount() {
    typeof document < "u" && document.removeEventListener("keydown", this.handleEscKey), this.stopScanning();
  }
}, DZ = { key: 0 }, BZ = {
  key: 0,
  class: "scanner-container"
}, VZ = {
  key: 0,
  class: "scanning-overlay"
}, MZ = { class: "status-messages pa-3" }, RZ = {
  key: 1,
  class: "pa-4 text-center"
}, LZ = { class: "mt-2" }, FZ = { class: "mt-2" }, NZ = { class: "d-flex gap-2" };
function UZ(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-chip"), s = J("v-spacer"), d = J("v-btn"), u = J("v-card-title"), f = J("qrcode-stream"), _ = J("v-alert"), g = J("v-card-text"), v = J("v-card-actions"), w = J("v-card"), b = J("v-dialog");
  return ne(), Fe(b, {
    modelValue: r.scannerDialog,
    "onUpdate:modelValue": t[2] || (t[2] = (p) => r.scannerDialog = p),
    "max-width": "600px",
    persistent: "false"
  }, {
    default: x(() => [
      h(w, null, {
        default: x(() => [
          h(u, { class: "text-h5 text-primary d-flex align-center" }, {
            default: x(() => [
              h(o, {
                class: "mr-2",
                size: "large"
              }, {
                default: x(() => t[3] || (t[3] = [
                  ae("mdi-camera")
                ])),
                _: 1,
                __: [3]
              }),
              ae(" " + W(e.__("Scan QR Code/Barcode")) + " ", 1),
              h(l, {
                class: "ml-2",
                size: "small",
                color: "primary"
              }, {
                default: x(() => [
                  ae(W(n.scanType === "Both" ? "Auto Detect" : n.scanType), 1)
                ]),
                _: 1
              }),
              h(s),
              h(d, {
                icon: "mdi-close",
                onClick: Jn(i.stopScanning, ["stop"]),
                color: "error",
                variant: "text",
                size: "large",
                title: e.__("Close Scanner")
              }, null, 8, ["onClick", "title"])
            ]),
            _: 1
          }),
          h(g, { class: "pa-0" }, {
            default: x(() => [
              r.cameraPermissionDenied ? (ne(), Be("div", RZ, [
                h(o, {
                  size: "64",
                  color: "error"
                }, {
                  default: x(() => t[9] || (t[9] = [
                    ae("mdi-camera-off")
                  ])),
                  _: 1,
                  __: [9]
                }),
                A("h3", LZ, W(e.__("Camera Access Required")), 1),
                A("p", FZ, W(e.__("Please allow camera access to scan codes")), 1)
              ])) : (ne(), Be("div", DZ, [
                r.isScanning && r.scannerDialog ? (ne(), Be("div", BZ, [
                  h(f, {
                    formats: i.readerFormats,
                    torch: r.torchActive,
                    camera: r.selectedDeviceId ? { deviceId: r.selectedDeviceId, exact: r.selectedDeviceId } : "auto",
                    onDetect: i.onDetect,
                    onError: i.onError,
                    onCameraOn: t[0] || (t[0] = (p) => r.isScanning = !0),
                    onCameraOff: t[1] || (t[1] = (p) => r.isScanning = !1),
                    style: { width: "100%", height: "350px", "object-fit": "cover" }
                  }, {
                    default: x(() => [
                      r.scanResult ? ke("", !0) : (ne(), Be("div", VZ, t[4] || (t[4] = [
                        A("div", { class: "scan-line" }, null, -1),
                        A("div", { class: "scan-corners" }, [
                          A("div", { class: "corner top-left" }),
                          A("div", { class: "corner top-right" }),
                          A("div", { class: "corner bottom-left" }),
                          A("div", { class: "corner bottom-right" })
                        ], -1)
                      ])))
                    ]),
                    _: 1
                  }, 8, ["formats", "torch", "camera", "onDetect", "onError"])
                ])) : ke("", !0),
                A("div", MZ, [
                  r.errorMessage ? (ne(), Fe(_, {
                    key: 0,
                    type: "error",
                    variant: "tonal",
                    class: "mb-2"
                  }, {
                    default: x(() => [
                      h(o, null, {
                        default: x(() => t[5] || (t[5] = [
                          ae("mdi-alert-circle")
                        ])),
                        _: 1,
                        __: [5]
                      }),
                      ae(" " + W(r.errorMessage), 1)
                    ]),
                    _: 1
                  })) : ke("", !0),
                  r.scanResult ? (ne(), Fe(_, {
                    key: 1,
                    type: "success",
                    variant: "tonal",
                    class: "mb-2"
                  }, {
                    default: x(() => [
                      ae(W(e.__("Successfully scanned:")) + " ", 1),
                      A("strong", null, W(r.scanResult), 1),
                      t[6] || (t[6] = ae()),
                      t[7] || (t[7] = A("br", null, null, -1)),
                      A("small", null, "Format: " + W(r.scanFormat), 1)
                    ]),
                    _: 1,
                    __: [6, 7]
                  })) : ke("", !0),
                  !r.scanResult && !r.errorMessage && r.isScanning && r.scannerDialog ? (ne(), Fe(_, {
                    key: 2,
                    type: "info",
                    variant: "tonal"
                  }, {
                    default: x(() => [
                      ae(W(e.__("Position the QR code or barcode within the scanning area")) + " ", 1),
                      t[8] || (t[8] = A("br", null, null, -1)),
                      A("small", null, W(e.__("Detecting formats:")) + " " + W(i.readerFormats.join(", ")), 1)
                    ]),
                    _: 1,
                    __: [8]
                  })) : ke("", !0)
                ])
              ]))
            ]),
            _: 1
          }),
          h(v, { class: "justify-space-between pa-3" }, {
            default: x(() => [
              A("div", NZ, [
                r.isScanning && r.cameras.length > 0 ? (ne(), Fe(d, {
                  key: 0,
                  onClick: i.toggleTorch,
                  color: r.torchActive ? "warning" : "default",
                  variant: "outlined",
                  size: "small"
                }, {
                  default: x(() => [
                    h(o, null, {
                      default: x(() => [
                        ae(W(r.torchActive ? "mdi-flashlight" : "mdi-flashlight-off"), 1)
                      ]),
                      _: 1
                    }),
                    ae(" " + W(r.torchActive ? e.__("Flash On") : e.__("Flash Off")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "color"])) : ke("", !0),
                r.isScanning && r.cameras.length > 1 ? (ne(), Fe(d, {
                  key: 1,
                  onClick: i.switchCamera,
                  color: "default",
                  variant: "outlined",
                  size: "small"
                }, {
                  default: x(() => [
                    h(o, null, {
                      default: x(() => t[10] || (t[10] = [
                        ae("mdi-camera-switch")
                      ])),
                      _: 1,
                      __: [10]
                    }),
                    ae(" " + W(e.__("Switch Camera")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])) : ke("", !0)
              ]),
              h(d, {
                onClick: Jn(i.stopScanning, ["stop"]),
                color: "error",
                variant: "outlined"
              }, {
                default: x(() => [
                  ae(W(e.__("Cancel")), 1)
                ]),
                _: 1
              }, 8, ["onClick"])
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["modelValue"]);
}
const $Z = /* @__PURE__ */ rn(OZ, [["render", UZ], ["__scopeId", "data-v-b26be293"]]);
async function Uh(e) {
  if (!(!e || typeof frappe > "u" || !navigator.onLine)) {
    try {
      if (e.print_format) {
        const t = await frappe.call({
          method: "frappe.client.get_value",
          args: {
            doctype: "Print Format",
            fieldname: "html",
            filters: { name: e.print_format }
          }
        });
        t.message && t.message.html && tQ(t.message.html);
      }
    } catch (t) {
      console.error("Failed to fetch print format", t);
    }
    try {
      const t = e.tc_name || e.terms_and_conditions;
      if (t) {
        const n = await frappe.call({
          method: "frappe.client.get_value",
          args: {
            doctype: "Terms and Conditions",
            fieldname: "terms",
            filters: { name: t }
          }
        });
        n.message && n.message.terms && aQ(n.message.terms);
      }
    } catch (t) {
      console.error("Failed to fetch terms and conditions", t);
    }
  }
}
async function Gb() {
  const e = frappe?.boot?.pos_profile;
  if (e && e.warehouse && e.selling_price_list)
    return await Uh(e), e;
  try {
    const n = await frappe.call({
      method: "posawesome.posawesome.api.utils.get_active_pos_profile",
      args: { user: frappe.session.user }
    });
    if (n.message)
      return frappe.boot.pos_profile = n.message, await Uh(n.message), n.message;
  } catch (n) {
    console.error("Failed to fetch active POS profile", n);
  }
  const t = Fu();
  return t && t.pos_profile ? (await Uh(t.pos_profile), t.pos_profile) : (await Uh(e), e || null);
}
function DD() {
  const e = Se(window.innerWidth), t = Se(window.innerHeight), n = Se(window.innerWidth), a = Se(window.innerHeight), r = z(() => e.value / n.value), i = z(() => t.value / a.value), o = z(() => (r.value + i.value) / 2), l = z(() => {
    const u = {
      xs: 4,
      sm: 8,
      md: 16,
      lg: 24,
      xl: 32
    };
    return {
      xs: Math.max(2, Math.round(u.xs * o.value)),
      sm: Math.max(4, Math.round(u.sm * o.value)),
      md: Math.max(8, Math.round(u.md * o.value)),
      lg: Math.max(12, Math.round(u.lg * o.value)),
      xl: Math.max(16, Math.round(u.xl * o.value))
    };
  }), s = z(() => {
    let u;
    return e.value <= 480 ? u = Math.round(45 * i.value) : e.value <= 768 ? u = Math.round(55 * i.value) : u = Math.round(60 * i.value), u = Math.max(30, Math.min(u, 70)), {
      "--dynamic-xs": `${l.value.xs}px`,
      "--dynamic-sm": `${l.value.sm}px`,
      "--dynamic-md": `${l.value.md}px`,
      "--dynamic-lg": `${l.value.lg}px`,
      "--dynamic-xl": `${l.value.xl}px`,
      "--container-height": `${Math.round(68 * i.value)}vh`,
      "--card-height": `${u}vh`,
      "--font-scale": o.value.toFixed(2)
    };
  }), d = () => {
    e.value = window.innerWidth, t.value = window.innerHeight;
  };
  return nn(() => {
    d(), window.addEventListener("resize", d);
  }), Ga(() => {
    window.removeEventListener("resize", d);
  }), {
    windowWidth: e,
    windowHeight: t,
    baseWidth: n,
    baseHeight: a,
    widthScale: r,
    heightScale: i,
    averageScale: o,
    dynamicSpacing: l,
    responsiveStyles: s
  };
}
const BD = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYBAMAAABoWJ9DAAAALVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBoCg+AAAAD3RSTlMAXgYsRRgTViRKHAw8UTLfejSWAAAG1UlEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD27V8nqiAKwPjJggi7hOQIAosswT+FhSRa2kHiA7CVLVhQWLkxoZCG7WiJdjYkvsB2tKyllcsTQOdjaBaVuXPuXkHu3BnN93uFL7lzMnMPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMD1IBZBjicDjaV5JPA1BhrPrMA3rjFtCjzbGtOJwNPVmL4KkgryRkCQtBEkMQRJzDDIhxfV2yDI6CBHUr0pghDkX0CQxBAkMQRJDEESQ5DEECQxBEkMQRJDkMQQJDEESQxBEkOQxOQEaezsSA6CVMEGmXiuqq0vYhCkAjZI/VCH3q6KhyDh2SCNDf3pnXgIEp4N0tXfPksWQYKzQab1UqsnGQQJzgbpq+NUsggSmA0ypq6mZBAkNBukrRln4iJIaDbIQDPuSgZBwrJBxjSrKS6CBGaD3C5ccCJIYDZIt3DBiSCB2SAb6rkjDoIEZoOob0kcBAnLBplQ34o4CBKWDTKpvjlxECQsG2RGfS1xECRXpUEWxEGQXAT5z/HJSgyHemKcILfUtywOgoRlg9TUtygOgoRlg8iheu6JiyAFqrlcXBcHQQKzQe6rZ18cBAnMBpm50dRb+/StR5BSg9Q6N7jsrZ2rNo8IUmYQ6d7gferlcE7uEaTMINPqaq3K1dV1aJcgZQWxb4a7cg1tvbBFkDKDPNJLC1tydY2OXtgjSDlB7L+kH687xA41CVJqkHrn755vz/WXM4KUGUQeDovYealY3ZmVCVJqEHnc1x/e9+Q6jp2jp0eQkpc+Xx8cvJKrstPZOkGir0XPqGOFINGDtNW1SZDIQRodde0RJHKQcc2YI0jkIM806ylBogaZUM88QaIGWVNPa5UgMYP01XdCkIhBJtVYJEjEINtqbREkWpDaQK1TgkQLMq05lgkSLUhX8+wTJFKQRkfz7BEkUpApzdUkSKQg55rvjCBRgtR1hCWCRAlyrCMs9AgSI8iGjrJOkAhBxnSkWYJECNLW0TYJUmEQs79gnRKk8iDTWmCZIJUH6WqRfYJUHGRCC80TpOIga1qotUqQaoP0tdgJQSoNMql/sEiQSoN8Z++OVdSIojCOg6viqggfuuvqumKXStAiveYJtEiXgDaBkMq0NvoGTp9AfAOtbPUR9AmybxLYpEsOc++dc25c+P7tTPerLt8dZo+0dgQxAPnw/du/nydIa0MQfZDPAFoT4cp7Sl2CqIOUxUPeFulNCKINssZL74TtNqWvBFEGKeB3rZ683UKuQRBlkIN4phjCpQFBdEESad4owKk7gqiC1MTboQc41ewRRBNkKs4bY7g1IogiSGUhzRs3cKxOEEWQvDhvzOHajCB6IENp3sid4dqFIGogRXHeqMK5DkHUQPrivLGGeyuCaIGcpHmjCI8eCaIEUhLnjT48ahFECWQuzhsn+HQkiApI7izNGyV41SaICkgVf/XnvQO8au4IogGyFj9US+DXhiAKIJWFNG/U4FmXIAogt+K8sYVvE4JkB3mW5o3KAr4tCZIZpCzOG3l41yBIZpCDeKYYwr8BQbKCjKV5o4CA7gmSEeQGQrM+AnrqESQbyBRClxNCOhIkE4g8QLUQ1ANBMoFUod2MIFlA1tDuQpAMIEWo1yFIBpA+9FsRJBzkBP2WBAkGKcGgFkGCQfaw6CdBQkESWNQmSCBIDSY1dwQJA9nCphFBgkAqC9hUJ0gQSB5WTQgSAjKEVReCBIAUYFaHIAEgb2DXiiD+IGPYdU8Qb5AbGPbUI4gvyByWHQniCZI7w7IHgniCVGHbjiB+IGvYtiGIF0gFxnUJ4gVyC+t+EMQH5BnWLQniAVKGeQ2CeIAcYN+AIO4gCey7I4gzSA0RavYI4goyRYxGBHEEyS0QozpBHEHyiNOMIG4gQ8TpQhAnkCIi1SGIE0gfsVoRxAXkhFg9EsQBpIRotQjiALJHvI4ESQdJEK82QVJBcp8i9oUgaSBW8f8hBHnlEeTKIsiVRZAr6wXk7fv4fSSIAPK/IghBfrFHxzQAAjEAAJswMlUACUggbNjDABbQxYIU9kdAn+TOwv2BkM4I6YyQzlxZ6QwaS1Z6gsaQhaY5aK1Z5w4+xmOrsgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALztwSEBAAAAgKD/r51hAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgFJxAtJ60EBzsAAAAAElFTkSuQmCC", qZ = {
  name: "LoadingOverlay",
  props: {
    loading: {
      type: Boolean,
      default: !1
    },
    message: {
      type: String,
      default: ""
    },
    progress: {
      type: Number,
      default: 0
    }
  }
}, HZ = { class: "mt-4 text-subtitle-1" };
function zZ(e, t, n, a, r, i) {
  const o = J("v-progress-linear"), l = J("v-overlay");
  return ne(), Fe(l, {
    "model-value": n.loading,
    class: "d-flex flex-column align-center justify-center fancy-overlay",
    contained: ""
  }, {
    default: x(() => [
      h(o, {
        "model-value": n.progress,
        height: "8",
        color: "primary",
        rounded: "",
        class: "elegant-progress"
      }, null, 8, ["model-value"]),
      A("div", HZ, W(n.message), 1)
    ]),
    _: 1
  }, 8, ["model-value"]);
}
const VD = /* @__PURE__ */ rn(qZ, [["render", zZ], ["__scopeId", "data-v-25095eef"]]), WZ = {
  mixins: [Oi],
  setup() {
    const e = DD(), t = bc();
    return { ...e, ...t };
  },
  components: {
    CameraScanner: $Z,
    LoadingOverlay: VD
  },
  data: () => ({
    pos_profile: {},
    flags: {},
    items_view: "list",
    item_group: "ALL",
    loading: !1,
    items_group: ["ALL"],
    items: [],
    search: "",
    first_search: "",
    search_backup: "",
    // Limit the displayed items to avoid overly large lists
    itemsPerPage: 50,
    offersCount: 0,
    appliedOffersCount: 0,
    couponsCount: 0,
    appliedCouponsCount: 0,
    customer_price_list: null,
    customer: null,
    new_line: !1,
    qty: 1,
    refresh_interval: null,
    abortController: null,
    itemDetailsRequestCache: { key: null, promise: null, result: null },
    itemDetailsRetryCount: 0,
    itemDetailsRetryTimeout: null,
    items_loaded: !1,
    selected_currency: "",
    exchange_rate: 1,
    prePopulateInProgress: !1,
    itemWorker: null,
    storageAvailable: !0,
    localStorageAvailable: !0,
    items_request_token: 0,
    pendingGetItems: null,
    lastGetItemsKey: "",
    show_item_settings: !1,
    hide_qty_decimals: !1,
    temp_hide_qty_decimals: !1,
    hide_zero_rate_items: !1,
    temp_hide_zero_rate_items: !1,
    isDragging: !1,
    // Items per page configuration
    enable_custom_items_per_page: !1,
    temp_enable_custom_items_per_page: !1,
    items_per_page: 50,
    temp_items_per_page: 50,
    temp_force_server_items: !1,
    // Performance optimizations
    searchCache: /* @__PURE__ */ new Map(),
    itemCache: /* @__PURE__ */ new Map(),
    virtualScrollEnabled: !0,
    renderBuffer: 10,
    lastScrollTop: 0,
    scrollThrottle: null,
    searchDebounce: null,
    // Prevent repeated server fetches when local storage is empty
    fallbackAttempted: !1,
    // Fixed page size for incremental item loading to avoid
    // pulling the entire catalog at once.
    itemsPageLimit: 100,
    // Track if the current search was triggered by a scanner
    search_from_scanner: !1,
    currentPage: 0,
    isOverflowing: !1,
    // Track background loading state and pending searches
    isBackgroundLoading: !1,
    pendingItemSearch: null,
    loadProgress: 0,
    totalItemCount: 0
  }),
  watch: {
    customer: Ni.debounce(function() {
      if (this.pos_profile.posa_force_reload_items) {
        this.pos_profile.posa_smart_reload_mode ? !this.items_loaded || !this.filtered_items.length ? (this.items_loaded = !1, sn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0)) : this.$nextTick(() => this.refreshPricesForVisibleItems()) : (this.items_loaded = !1, sn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0));
        return;
      }
      this.items_loaded && this.filtered_items && this.filtered_items.length > 0 ? this.$nextTick(() => this.refreshPricesForVisibleItems()) : this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items();
    }, 300),
    customer_price_list: Ni.debounce(async function() {
      if (this.pos_profile.posa_force_reload_items) {
        this.pos_profile.posa_smart_reload_mode ? !this.items_loaded || !this.items.length ? (this.items_loaded = !1, sn() ? this.get_items() : this.get_items(!0)) : this.$nextTick(() => this.refreshPricesForVisibleItems()) : (this.items_loaded = !1, sn() ? this.get_items() : this.get_items(!0));
        return;
      }
      if (this.items_loaded && this.items && this.items.length > 0) {
        const e = await JO(this.customer_price_list);
        if (e && e.length) {
          const t = {};
          e.forEach((n) => {
            t[n.item_code] = n;
          }), this.items.forEach((n) => {
            const a = t[n.item_code];
            a && (n.rate = a.rate, n.price_list_rate = a.price_list_rate || a.rate);
          }), this.eventBus.emit("set_all_items", this.items), this.update_items_details(this.items);
          return;
        }
      }
      this.items_loaded = !1, sn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0);
    }, 300),
    new_line() {
      this.eventBus.emit("set_new_line", this.new_line);
    },
    item_group(e, t) {
      this.pos_profile && this.pos_profile.pose_use_limit_search && e !== t ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.pos_profile && this.pos_profile.posa_local_storage && e !== t && (this.storageAvailable ? this.loadVisibleItems(!0) : this.get_items(!0));
    },
    filtered_items(e, t) {
      this.pos_profile && !this.pos_profile.pose_use_limit_search && e.length !== t.length && this.update_items_details(e), this.$nextTick(this.checkItemContainerOverflow);
    },
    // Automatically search when the query has at least 3 characters
    first_search: Ni.debounce(function(e, t) {
      const n = (e || "").trim().length, a = (t || "").trim().length;
      n >= 3 ? this.search_onchange() : a >= 3 && n === 0 && this.clearSearch();
    }, 300),
    // Refresh item prices whenever the user changes currency
    selected_currency() {
      this.applyCurrencyConversionToItems();
    },
    // Also react when exchange rate is adjusted manually
    exchange_rate() {
      this.applyCurrencyConversionToItems();
    },
    windowWidth() {
      this.itemsPerPage = this.items_per_page;
    },
    windowHeight() {
      this.itemsPerPage = this.items_per_page;
    },
    items_loaded(e) {
      e && (this.eventBus.emit("items_loaded"), this.eventBus.emit("data-loaded", "items"));
    },
    items_view() {
      this.$nextTick(() => {
        this.items_view === "card" ? this.checkItemContainerOverflow() : this.isOverflowing = !1;
      });
    }
  },
  methods: {
    // Performance optimization: Memoized search function
    memoizedSearch(e, t) {
      const n = `${e || ""}_${t || "ALL"}`;
      if (this.searchCache && this.searchCache.has(n))
        return this.searchCache.get(n);
      const a = this.performSearch(e, t);
      return this.searchCache && this.searchCache.set(n, a), a;
    },
    performSearch(e, t) {
      if (!this.items || !this.items.length)
        return [];
      let n = this.items;
      if (t !== "ALL" && (n = n.filter(
        (a) => a.item_group && a.item_group.toLowerCase().includes(t.toLowerCase())
      )), e && e.trim() && e.trim().length >= 3) {
        const a = e.toLowerCase();
        n = n.filter((r) => {
          const i = Array.isArray(r.item_barcode) && r.item_barcode.some(
            (o) => o.barcode && o.barcode.toLowerCase().includes(a)
          ) || Array.isArray(r.barcodes) && r.barcodes.some((o) => String(o).toLowerCase().includes(a)) || r.barcode && String(r.barcode).toLowerCase().includes(a);
          return r.item_code.toLowerCase().includes(a) || r.item_name.toLowerCase().includes(a) || i;
        });
      }
      return n;
    },
    async fetchServerItemsTimestamp() {
      try {
        const { message: e } = await frappe.call({
          method: "frappe.client.get_list",
          args: {
            doctype: "Item",
            fields: ["modified"],
            order_by: "modified desc",
            limit_page_length: 1
          }
        });
        return e && e[0] && e[0].modified;
      } catch (e) {
        return console.error("Failed to fetch server items timestamp", e), null;
      }
    },
    // Optimized scroll handler with throttling
    onCardScroll() {
      this.scrollThrottle || (this.scrollThrottle = requestAnimationFrame(() => {
        try {
          const e = this.$refs.itemsContainer;
          if (!e) return;
          const t = e.scrollTop, n = e.clientHeight, a = e.scrollHeight;
          t + n >= a - 50 && (this.currentPage += 1, this.loadVisibleItems()), this.lastScrollTop = t;
        } catch (e) {
          console.error("Error in card scroll handler:", e);
        } finally {
          this.scrollThrottle = null;
        }
      }));
    },
    markStorageUnavailable(e = !1) {
      if (e) {
        this.localStorageAvailable = !1;
        return;
      }
      this.storageAvailable = !1, this.localStorageAvailable = !1, this.itemsPageLimit = null, this.itemWorker && (this.itemWorker.terminate(), this.itemWorker = null), this.pos_profile && (this.pos_profile.posa_local_storage = !1);
    },
    async ensureStorageHealth() {
      let e = !0;
      try {
        if (typeof localStorage < "u") {
          const n = "posa_test";
          localStorage.setItem(n, "1"), localStorage.removeItem(n);
        }
      } catch (n) {
        console.warn("localStorage unavailable", n), e = !1;
      }
      const t = await ta().catch(() => !1);
      if (t) {
        if (this.storageAvailable = !0, e ? this.localStorageAvailable = !0 : this.markStorageUnavailable(!0), this.pos_profile && this.pos_profile.posa_local_storage && typeof Worker < "u" && !this.itemWorker)
          try {
            const n = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
            this.itemWorker = new Worker(n, { type: "classic" }), this.itemWorker.onerror = function(a) {
              console.error("Worker error:", a), console.error("Message:", a.message), console.error("Filename:", a.filename), console.error("Line number:", a.lineno);
            };
          } catch (n) {
            console.error("Failed to start item worker", n), this.itemWorker = null;
          }
      } else
        this.markStorageUnavailable();
      return t;
    },
    async loadVisibleItems(e = !1) {
      this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "items", progress: 0 }), await sm, await this.ensureStorageHealth(), e && (this.currentPage = 0, this.items = []);
      const t = this.get_search(this.first_search), n = this.item_group !== "ALL" ? this.item_group.toLowerCase() : "", a = await q9({
        search: t,
        itemGroup: n,
        limit: this.itemsPerPage,
        offset: this.currentPage * this.itemsPerPage
      }), r = a.length || 1;
      a.forEach((i, o) => {
        this.items.push(i);
        const l = Math.round((o + 1) / r * 100);
        this.loadProgress = l, this.eventBus.emit("data-load-progress", {
          name: "items",
          progress: l
        });
      }), this.eventBus.emit("set_all_items", this.items), a.length && this.update_items_details(a);
    },
    onListScroll(e) {
      this.scrollThrottle || (this.scrollThrottle = requestAnimationFrame(() => {
        try {
          const t = e.target;
          t.scrollTop + t.clientHeight >= t.scrollHeight - 50 && (this.currentPage += 1, this.loadVisibleItems());
        } catch (t) {
          console.error("Error in list scroll handler:", t);
        } finally {
          this.scrollThrottle = null;
        }
      }));
    },
    checkItemContainerOverflow() {
      const e = this.$refs.itemsContainer;
      if (!e) {
        this.isOverflowing = !1;
        return;
      }
      const t = parseFloat(getComputedStyle(e).getPropertyValue("--container-height"));
      if (isNaN(t)) {
        this.isOverflowing = !1;
        return;
      }
      const n = e.closest(".dynamic-padding")?.querySelector(".sticky-header"), a = n ? n.offsetHeight : 0, r = t - a;
      e.style.maxHeight = `${r}px`, this.isOverflowing = e.scrollHeight > r;
    },
    async fetchItemDetails(e) {
      if (!e || e.length === 0)
        return [];
      const t = [
        this.pos_profile.name,
        this.active_price_list,
        e.map((a) => a.item_code).join(",")
      ].join(":");
      if (this.itemDetailsRequestCache.key === t && this.itemDetailsRequestCache.result)
        return this.itemDetailsRequestCache.result;
      if (this.itemDetailsRequestCache.key === t && this.itemDetailsRequestCache.promise)
        return this.itemDetailsRequestCache.promise;
      this.cancelItemDetailsRequest(), this.itemDetailsRequestCache.key = t, this.abortController = new AbortController();
      const n = frappe.call({
        method: "posawesome.posawesome.api.items.get_items_details",
        args: {
          pos_profile: JSON.stringify(this.pos_profile),
          items_data: JSON.stringify(e),
          price_list: this.active_price_list
        },
        freeze: !1,
        signal: this.abortController.signal
      });
      this.itemDetailsRequestCache.promise = n;
      try {
        const a = await n, r = a && a.message || [];
        return this.itemDetailsRequestCache.key === t && (this.itemDetailsRequestCache.result = r), r;
      } catch (a) {
        throw a.name !== "AbortError" && console.error("Error fetching item details:", a), a;
      } finally {
        this.itemDetailsRequestCache.key === t && (this.itemDetailsRequestCache.promise = null), this.abortController = null;
      }
    },
    cancelItemDetailsRequest() {
      this.abortController && (this.abortController.abort(), this.abortController = null), this.itemDetailsRequestCache && (this.itemDetailsRequestCache.key = null, this.itemDetailsRequestCache.promise = null, this.itemDetailsRequestCache.result = null);
    },
    async refreshPricesForVisibleItems() {
      const e = this;
      if (!e.filtered_items || e.filtered_items.length === 0) return;
      e.loading = !0;
      const t = e.filtered_items.map((i) => i.item_code), n = await wA(
        e.pos_profile.name,
        e.active_price_list,
        t
      ), a = [];
      if (n.cached.forEach((i) => {
        const o = e.filtered_items.find((l) => l.item_code === i.item_code);
        if (o) {
          const l = { actual_qty: i.actual_qty };
          i.item_uoms && i.item_uoms.length > 0 && (l.item_uoms = i.item_uoms, Mh(o.item_code, i.item_uoms)), i.rate !== void 0 && (i.rate !== 0 || !o.rate) && (l.rate = i.rate, l.price_list_rate = i.price_list_rate || i.rate), i.currency && (l.currency = i.currency), a.push({ item: o, upd: l });
        }
      }), n.missing.length === 0) {
        e.$nextTick(() => {
          a.forEach(({ item: i, upd: o }) => Object.assign(i, o)), gy(n.cached), e.loading = !1;
        });
        return;
      }
      const r = e.filtered_items.filter((i) => n.missing.includes(i.item_code));
      try {
        const i = await e.fetchItemDetails(r);
        i.forEach((o) => {
          const l = e.filtered_items.find((s) => s.item_code === o.item_code);
          if (l) {
            const s = { actual_qty: o.actual_qty };
            o.item_uoms && o.item_uoms.length > 0 && (s.item_uoms = o.item_uoms, Mh(l.item_code, o.item_uoms)), o.rate !== void 0 && (o.rate !== 0 || !l.rate) && (s.rate = o.rate, s.price_list_rate = o.price_list_rate || o.rate), o.currency && (s.currency = o.currency), o.batch_no_data && (s.batch_no_data = o.batch_no_data), o.serial_no_data && (s.serial_no_data = o.serial_no_data), a.push({ item: l, upd: s });
          }
        }), e.$nextTick(async () => {
          if (a.forEach(({ item: o, upd: l }) => Object.assign(o, l)), gy(i), bA(e.pos_profile.name, e.active_price_list, i), e.pos_profile && e.pos_profile.posa_local_storage && e.storageAvailable && !e.pos_profile.pose_use_limit_search)
            try {
              await Ud(i);
            } catch (o) {
              console.error("Failed to persist item details", o), e.markStorageUnavailable && e.markStorageUnavailable();
            }
          e.loading = !1;
        });
      } catch (i) {
        i.name !== "AbortError" && (console.error("Error fetching item details:", i), e.loading = !1);
      }
    },
    show_offers() {
      this.eventBus.emit("show_offers", "true");
    },
    show_coupons() {
      this.eventBus.emit("show_coupons", "true");
    },
    async initializeItems() {
      if (await this.ensureStorageHealth(), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && await kA() > 0) {
        await this.loadVisibleItems(!0), this.items_loaded = !0, await this.verifyServerItemCount();
        return;
      }
      await this.get_items(!0);
    },
    async forceReloadItems() {
      console.log("[ItemsSelector] forceReloadItems called"), await Lu(), console.log("[ItemsSelector] price list cache cleared"), await this.ensureStorageHealth(), console.log("[ItemsSelector] storage health ensured"), this.items_loaded = !1, (!this.first_search || !this.first_search.trim()) && (console.log("[ItemsSelector] resetting empty search before reload"), this.first_search = "", this.search = ""), console.log("[ItemsSelector] loading items from server"), await this.get_items(!0), console.log("[ItemsSelector] forceReloadItems finished");
    },
    async verifyServerItemCount() {
      if (sn()) {
        console.log("[ItemsSelector] offline, skipping server item count check");
        return;
      }
      try {
        const e = await kA();
        console.log("[ItemsSelector] verifying server item count", { localCount: e });
        const t = (this.pos_profile?.item_groups || []).map((r) => r.item_group), a = (await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_count",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            item_groups: t
          }
        })).message || 0;
        if (console.log("[ItemsSelector] server item count result", { serverCount: a }), typeof a == "number")
          if (this.totalItemCount = a, this.loadProgress = a ? Math.round(e / a * 100) : 0, a > e) {
            const r = Y9(), i = ++this.items_request_token;
            await this.backgroundLoadItems(null, r, !1, i, e);
          } else a < e && (console.log("[ItemsSelector] local cache has extra items, forcing reload"), await this.forceReloadItems());
      } catch (e) {
        console.error("Error checking item count:", e);
      }
    },
    async get_items(e = !1) {
      if (console.log("[ItemsSelector] get_items called", {
        force_server: e,
        first_search: this.first_search,
        item_group: this.item_group
      }), !this.pos_profile || !this.pos_profile.name) {
        console.warn("No POS Profile available, attempting to get it...");
        try {
          if (frappe.boot && frappe.boot.pos_profile)
            this.pos_profile = frappe.boot.pos_profile;
          else {
            console.error("No POS Profile configured"), frappe.msgprint(__("Please configure a POS Profile first"));
            return;
          }
        } catch (l) {
          console.error("Failed to get POS Profile:", l);
          return;
        }
      }
      const t = this;
      t.pos_profile?.pose_use_limit_search && (t.itemsPageLimit = parseInt(t.pos_profile.posa_search_limit) || t.itemsPageLimit);
      const n = this.get_search(this.first_search), a = t.item_group !== "ALL" ? t.item_group.toLowerCase() : "", r = n || "", i = (t.pos_profile?.item_groups || []).map((l) => l.item_group);
      if (console.log("[ItemsSelector] prepared fetch params", { search: r, item_group: a }), !e && this.items_loaded && this.items.length > 0) {
        console.log("[ItemsSelector] items already loaded, skipping fetch"), this.loading = !1;
        return;
      }
      this.loading = !0;
      const o = ++this.items_request_token;
      console.log("[ItemsSelector] sending request", { requestToken: o }), this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "items", progress: 0 }), console.log("[ItemsSelector] data-load-progress emitted", { progress: 0 });
      try {
        const l = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_count",
          args: {
            pos_profile: JSON.stringify(t.pos_profile),
            item_groups: i
          }
        });
        this.totalItemCount = l.message || 0;
      } catch (l) {
        console.error("Failed to fetch item count", l), this.totalItemCount = 0;
      }
      try {
        const l = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(t.pos_profile),
            price_list: t.customer_price_list,
            item_group: a,
            search_value: r,
            customer: t.customer,
            limit: t.itemsPageLimit,
            start_after: null,
            include_image: 1,
            item_groups: i
          }
        });
        console.log("[ItemsSelector] server responded", { count: l.message?.length });
        const s = l.message || [];
        s.forEach((u) => {
          (!u.item_uoms || u.item_uoms.length === 0) && (u.item_uoms = u.stock_uom ? [{ uom: u.stock_uom, conversion_factor: 1 }] : []), u.actual_qty === void 0 && (u.actual_qty = 0);
        }), t.items = s, t.items_loaded = !0, t.eventBus.emit("set_all_items", t.items), console.log("[ItemsSelector] set_all_items emitted", { itemsLength: t.items.length });
        const d = !t.pos_profile.pose_use_limit_search && s.length === t.itemsPageLimit;
        if (t.loadProgress = t.totalItemCount ? Math.round(s.length / t.totalItemCount * 100) : 100, t.eventBus.emit("data-load-progress", { name: "items", progress: t.loadProgress }), console.log("[ItemsSelector] data-load-progress emitted", { progress: t.loadProgress }), t.pos_profile && t.pos_profile.posa_local_storage && t.storageAvailable && !t.pos_profile.pose_use_limit_search)
          try {
            e && (console.log("[ItemsSelector] clearing local items before save"), await _y()), await Ud(s), console.log("[ItemsSelector] items persisted locally", { length: s.length });
          } catch (u) {
            console.error("Failed to persist items locally", u), t.markStorageUnavailable();
          }
        if (d) {
          const u = s[s.length - 1]?.item_name || null;
          console.log("[ItemsSelector] more items available, starting background load", {
            last: u,
            requestToken: o
          }), this.backgroundLoadItems(u, null, !1, o, s.length);
        }
      } catch (l) {
        console.error("Failed to load items:", l), frappe.msgprint(__("Failed to load items. Please try again."));
      } finally {
        t.loading = !1, console.log("[ItemsSelector] get_items finished");
      }
    },
    finishBackgroundLoad() {
      if (this.isBackgroundLoading = !1, this.pendingItemSearch) {
        const e = this.pendingItemSearch;
        this.pendingItemSearch = null, this.search_onchange(e), this.search_onchange.flush && this.search_onchange.flush();
      }
    },
    async backgroundLoadItems(e, t, n = !1, a, r = 0) {
      this.isBackgroundLoading = !0, console.log("[ItemsSelector] backgroundLoadItems called", {
        startAfter: e,
        syncSince: t,
        clearBefore: n,
        requestToken: a,
        loaded: r
      });
      const i = this.itemsPageLimit, o = (this.pos_profile?.item_groups || []).map((s) => s.item_group);
      if (!i || i >= 1e4) {
        console.log("[ItemsSelector] background load skipped due to high limit", { limit: i }), r === 0 && this.finishBackgroundLoad();
        return;
      }
      if (this.items_request_token !== a) {
        console.log("[ItemsSelector] background load token mismatch, aborting"), r === 0 && this.finishBackgroundLoad();
        return;
      }
      const l = t;
      if (this.itemWorker && this.storageAvailable)
        try {
          const s = await frappe.call({
            method: "posawesome.posawesome.api.items.get_items",
            args: {
              pos_profile: JSON.stringify(this.pos_profile),
              price_list: this.customer_price_list,
              item_group: this.item_group !== "ALL" ? this.item_group.toLowerCase() : "",
              search_value: this.search || "",
              customer: this.customer,
              modified_after: l,
              limit: i,
              start_after: e,
              include_image: 1,
              item_groups: o
            },
            freeze: !1
          });
          console.log("[ItemsSelector] background load server response", {
            count: s.message?.length
          });
          const d = JSON.stringify(s);
          if (this.items_request_token !== a) {
            console.log("[ItemsSelector] background load token mismatch after response"), r === 0 && this.finishBackgroundLoad();
            return;
          }
          let u = null;
          const f = await new Promise((v) => {
            this.itemWorker.onmessage = async (w) => {
              if (this.items_request_token !== a) {
                console.log(
                  "[ItemsSelector] background load token mismatch during worker message"
                ), r === 0 && this.finishBackgroundLoad(), v(0);
                return;
              }
              if (w.data.type === "parsed") {
                const b = w.data.items || [];
                if (b.forEach((p) => {
                  const y = this.items.find((S) => S.item_code === p.item_code);
                  y ? Object.assign(y, p) : this.items.push(p);
                }), u = b[b.length - 1]?.item_name || null, this.eventBus.emit("set_all_items", this.items), console.log("[ItemsSelector] background load set_all_items emitted", {
                  length: this.items.length
                }), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && !this.pos_profile.pose_use_limit_search)
                  try {
                    n && (await _y(), n = !1), await Ud(b), console.log("[ItemsSelector] background load items persisted", {
                      length: b.length
                    });
                  } catch (p) {
                    console.error(p), this.markStorageUnavailable();
                  }
                v(b.length);
              } else w.data.type === "error" && (console.error("Item worker parse error:", w.data.error), v(0));
            }, this.itemWorker.postMessage({
              type: "parse_and_cache",
              json: d,
              priceList: this.customer_price_list || ""
            });
          });
          if (this.items_request_token !== a) {
            console.log("[ItemsSelector] background load token mismatch after worker"), r === 0 && this.finishBackgroundLoad();
            return;
          }
          const _ = r + f, g = this.totalItemCount ? Math.min(99, Math.round(_ / this.totalItemCount * 100)) : Math.min(99, Math.round(_ / (_ + i) * 100));
          this.loadProgress = g, this.eventBus.emit("data-load-progress", { name: "items", progress: g }), console.log("[ItemsSelector] background load progress", { progress: g }), f === i ? await this.backgroundLoadItems(
            u,
            t,
            n,
            a,
            _
          ) : (this.storageAvailable && this.localStorageAvailable && CA((/* @__PURE__ */ new Date()).toISOString()), this.itemWorker && (this.itemWorker.terminate(), this.itemWorker = null), this.items && this.items.length > 0 && await this.prePopulateStockCache(this.items), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "items", progress: 100 }), console.log("[ItemsSelector] background load completed"), this.items_loaded = !0, this.finishBackgroundLoad());
        } catch (s) {
          return console.error("Failed to background load items", s), this.markStorageUnavailable(), this.backgroundLoadItems(e, t, n, a, r);
        }
      else
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            price_list: this.customer_price_list,
            item_group: this.item_group !== "ALL" ? this.item_group.toLowerCase() : "",
            search_value: this.search || "",
            customer: this.customer,
            modified_after: l,
            limit: i,
            start_after: e,
            include_image: 1,
            item_groups: o
          },
          callback: async (s) => {
            if (this.items_request_token !== a) {
              console.log("[ItemsSelector] background load token mismatch in callback"), r === 0 && this.finishBackgroundLoad();
              return;
            }
            const d = s.message || [];
            if (console.log("[ItemsSelector] background load callback items", { count: d.length }), d.forEach((_) => {
              const g = this.items.find((v) => v.item_code === _.item_code);
              g ? Object.assign(g, _) : this.items.push(_);
            }), this.eventBus.emit("set_all_items", this.items), console.log("[ItemsSelector] background load set_all_items emitted", {
              length: this.items.length
            }), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && !this.pos_profile.pose_use_limit_search)
              try {
                n && (await _y(), n = !1), await Ud(d), console.log("[ItemsSelector] background load items persisted", {
                  length: d.length
                });
              } catch (_) {
                console.error(_), this.markStorageUnavailable();
              }
            const u = r + d.length, f = this.totalItemCount ? Math.min(99, Math.round(u / this.totalItemCount * 100)) : Math.min(99, Math.round(u / (u + i) * 100));
            if (this.loadProgress = f, this.eventBus.emit("data-load-progress", { name: "items", progress: f }), console.log("[ItemsSelector] background load progress", { progress: f }), d.length === i) {
              const _ = d[d.length - 1]?.item_name || null;
              await this.backgroundLoadItems(
                _,
                t,
                n,
                a,
                u
              );
            } else
              this.storageAvailable && this.localStorageAvailable && CA((/* @__PURE__ */ new Date()).toISOString()), this.items && this.items.length > 0 && await this.prePopulateStockCache(this.items), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "items", progress: 100 }), console.log("[ItemsSelector] background load completed"), this.items_loaded = !0, this.finishBackgroundLoad();
          },
          error: (s) => {
            console.error("Failed to background load items", s);
          }
        });
    },
    get_items_groups() {
      if (!this.pos_profile) {
        console.log("No POS Profile");
        return;
      }
      if (this.items_group = ["ALL"], this.pos_profile.item_groups.length > 0) {
        const e = [];
        this.pos_profile.item_groups.forEach((t) => {
          t.item_group !== "All Item Groups" && (this.items_group.push(t.item_group), e.push(t.item_group));
        }), EA(e);
      } else if (sn())
        AQ().forEach((t) => {
          this.items_group.push(t);
        });
      else {
        const e = this;
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items_groups",
          args: {},
          callback: function(t) {
            if (t.message) {
              const n = [];
              t.message.forEach((a) => {
                e.items_group.push(a.name), n.push(a.name);
              }), EA(n);
            }
          }
        });
      }
    },
    getItemsHeaders() {
      const e = [
        {
          title: __("Name"),
          align: "start",
          sortable: !0,
          key: "item_name"
        },
        {
          title: __("Code"),
          align: "start",
          sortable: !0,
          key: "item_code"
        },
        { title: __("Rate"), key: "rate", align: "start" },
        { title: __("Available QTY"), key: "actual_qty", align: "start" },
        { title: __("UOM"), key: "stock_uom", align: "start" }
      ];
      return this.pos_profile.posa_display_item_code || e.splice(1, 1), e;
    },
    async click_item_row(e, { item: t }) {
      await this.add_item(t);
    },
    async add_item(e) {
      if (e = { ...e }, e.has_variants) {
        let t = this.items.filter((a) => a.variant_of == e.item_code), n = {};
        if (!t.length)
          try {
            const a = await frappe.call({
              method: "posawesome.posawesome.api.items.get_item_variants",
              args: {
                pos_profile: JSON.stringify(this.pos_profile),
                parent_item_code: e.item_code,
                price_list: this.active_price_list,
                customer: this.customer
              }
            });
            a.message && (t = a.message.variants || a.message, n = a.message.attributes_meta || {}, this.items.push(...t));
          } catch (a) {
            console.error("Failed to fetch variants", a);
          }
        this.eventBus.emit("show_message", {
          title: __("This is an item template. Please choose a variant."),
          color: "warning"
        }), console.log("sending profile", this.pos_profile), n = n || {}, this.eventBus.emit("open_variants_model", e, t, this.pos_profile, n);
      } else {
        if (e.actual_qty === 0 && this.pos_profile.posa_display_items_in_stock) {
          this.eventBus.emit("show_message", {
            title: `No stock available for ${e.item_name}`,
            color: "warning"
          }), await this.update_items_details([e]);
          return;
        }
        if ((!e.item_uoms || e.item_uoms.length === 0) && (await this.update_items_details([e]), (!e.item_uoms || e.item_uoms.length === 0) && (e.item_uoms = [{ uom: e.stock_uom, conversion_factor: 1 }])), this.pos_profile.posa_allow_multi_currency) {
          this.applyCurrencyConversionToItem(e);
          const a = e.original_currency === this.pos_profile.currency ? e.original_rate : e.original_rate * (e.plc_conversion_rate || this.exchange_rate);
          e.base_rate = a, e.base_price_list_rate = a;
        }
        const t = e._barcode_qty;
        if (!e.qty || e.qty === 1 && !t) {
          let a = this.qty != null ? this.qty : 1;
          a = Math.abs(a), this.hide_qty_decimals && (a = Math.trunc(a)), e.qty = a;
        }
        const n = { ...e };
        delete n._barcode_qty, this.eventBus.emit("add_item", n), this.qty = 1;
      }
    },
    async enter_event() {
      if (!this.filtered_items.length || !this.first_search)
        return;
      const e = this.get_search(this.first_search), t = this.pos_profile?.posa_scale_barcode_start && this.first_search.startsWith(this.pos_profile.posa_scale_barcode_start);
      this.search = e;
      const n = parseFloat(this.get_item_qty(this.first_search)), a = { ...this.filtered_items[0] };
      a.qty = flt(n), t && (a._barcode_qty = !0);
      let r = !1;
      Array.isArray(a.item_barcode) && a.item_barcode.forEach((i) => {
        e === i.barcode && (a.uom = i.posa_uom, r = !0);
      }), !r && a.item_code === e && (r = !0), this.flags.serial_no && (a.to_set_serial_no = this.flags.serial_no), this.flags.batch_no && (a.to_set_batch_no = this.flags.batch_no), r && (await this.add_item(a), this.flags.serial_no = null, this.flags.batch_no = null, this.qty = 1, this.clearSearch(), this.$refs.debounce_search.focus());
    },
    search_onchange: Ni.debounce(async function(e) {
      const t = this;
      t.cancelItemDetailsRequest();
      const a = ((typeof e == "string" ? e : t.first_search) || "").trim();
      if (!a || a.length < 3) {
        t.search_from_scanner = !1;
        return;
      }
      if (t.isBackgroundLoading) {
        t.pendingItemSearch = a;
        return;
      }
      t.search = a;
      const r = t.search_from_scanner;
      t.pos_profile && t.pos_profile.pose_use_limit_search ? t.pos_profile && (!t.pos_profile.posa_local_storage || !t.storageAvailable) ? t.get_items(!0) : t.get_items() : t.pos_profile && t.pos_profile.posa_local_storage ? t.storageAvailable ? (await t.loadVisibleItems(!0), t.enter_event()) : t.get_items(!0) : (await t.get_items(!0), t.enter_event(), t.filtered_items && t.filtered_items.length > 0 && setTimeout(() => {
        t.update_items_details(t.filtered_items);
      }, 300)), r && (t.clearSearch(), t.$refs.debounce_search && t.$refs.debounce_search.focus(), t.search_from_scanner = !1);
    }, 300),
    get_item_qty(e) {
      const t = this.qty != null ? this.qty : 1;
      let n = Math.abs(t);
      const a = this.pos_profile.posa_scale_barcode_start?.length || 0;
      if (e.startsWith(this.pos_profile.posa_scale_barcode_start)) {
        const r = e.length - a - 6;
        let i = e.substr(
          a + r,
          5
        ), o;
        i.startsWith("0000") ? o = "0.00" + i.substr(4) : i.startsWith("000") ? o = "0.0" + i.substr(3) : i.startsWith("00") ? o = "0." + i.substr(2) : i.startsWith("0") ? o = i.substr(1, 1) + "." + i.substr(2, i.length) : i.startsWith("0") || (o = i.substr(0, 2) + "." + i.substr(2, i.length)), n = o;
      }
      return this.hide_qty_decimals && (n = Math.trunc(n)), n;
    },
    get_search(e) {
      if (!e) return "";
      const t = this.pos_profile.posa_scale_barcode_start?.length || 0;
      if (!e.startsWith(this.pos_profile.posa_scale_barcode_start))
        return e;
      const n = e.length - t - 6;
      return e.substr(0, t + n);
    },
    esc_event() {
      this.search = null, this.first_search = null, this.search_backup = null, this.qty = 1, this.$refs.debounce_search.focus();
    },
    async update_items_details(e) {
      const t = this;
      if (!e || !e.length) return;
      t.itemDetailsRetryTimeout && (clearTimeout(t.itemDetailsRetryTimeout), t.itemDetailsRetryTimeout = null);
      const n = e.map((o) => o.item_code), a = await wA(
        t.pos_profile.name,
        t.active_price_list,
        n
      );
      a.cached.forEach((o) => {
        const l = e.find((s) => s.item_code === o.item_code);
        l && (Object.assign(l, {
          actual_qty: o.actual_qty,
          has_batch_no: o.has_batch_no,
          has_serial_no: o.has_serial_no
        }), o.item_uoms && o.item_uoms.length > 0 && (l.item_uoms = o.item_uoms, Mh(l.item_code, o.item_uoms)), o.rate !== void 0 && (o.rate !== 0 || !l.rate) && (l.rate = o.rate, l.price_list_rate = o.price_list_rate || o.rate), o.currency && (l.currency = o.currency), l.original_rate || (l.original_rate = l.rate, l.original_currency = l.currency || t.pos_profile.currency), t.applyCurrencyConversionToItem(l));
      });
      let r = a.missing.length === 0;
      if (e.forEach((o) => {
        const l = TA(o.item_code);
        if (l !== null ? o.actual_qty = l : r = !1, !o.item_uoms || o.item_uoms.length === 0) {
          const s = gA(o.item_code);
          s.length > 0 ? o.item_uoms = s : sn() ? o.item_uoms = [{ uom: o.stock_uom, conversion_factor: 1 }] : r = !1;
        }
      }), sn() || r) {
        t.itemDetailsRetryCount = 0;
        return;
      }
      const i = e.filter(
        (o) => a.missing.includes(o.item_code) && !o.has_variants
      );
      if (i.length === 0) {
        t.itemDetailsRetryCount = 0;
        return;
      }
      try {
        const o = await t.fetchItemDetails(i);
        if (o && o.length) {
          t.itemDetailsRetryCount = 0;
          let l = !1, s = [];
          if (e.forEach((d) => {
            const u = o.find((f) => f.item_code == d.item_code);
            if (u) {
              const f = d.actual_qty;
              s.push({
                item: d,
                updates: {
                  actual_qty: u.actual_qty,
                  has_batch_no: u.has_batch_no,
                  has_serial_no: u.has_serial_no,
                  batch_no_data: u.batch_no_data && u.batch_no_data.length > 0 ? u.batch_no_data : d.batch_no_data,
                  serial_no_data: u.serial_no_data && u.serial_no_data.length > 0 ? u.serial_no_data : d.serial_no_data,
                  item_uoms: u.item_uoms && u.item_uoms.length > 0 ? u.item_uoms : d.item_uoms,
                  rate: u.rate !== void 0 ? u.rate : d.rate,
                  price_list_rate: u.price_list_rate !== void 0 ? u.price_list_rate : d.price_list_rate,
                  currency: u.currency || d.currency
                }
              }), f > 0 && u.actual_qty === 0 && (l = !0), u.item_uoms && u.item_uoms.length > 0 && Mh(d.item_code, u.item_uoms);
            }
          }), s.forEach(({ item: d, updates: u }) => {
            Object.assign(d, u), t.applyCurrencyConversionToItem(d);
          }), gy(o), bA(t.pos_profile.name, t.active_price_list, o), t.pos_profile && t.pos_profile.posa_local_storage && t.storageAvailable && !t.pos_profile.pose_use_limit_search)
            try {
              await Ud(o);
            } catch (d) {
              console.error("Failed to persist item details", d), t.markStorageUnavailable && t.markStorageUnavailable();
            }
          l && t.$forceUpdate();
        }
      } catch (o) {
        if (o.name !== "AbortError" && (console.error("Error fetching item details:", o), e.forEach((l) => {
          const s = TA(l.item_code);
          if (s !== null && (l.actual_qty = s), !l.item_uoms || l.item_uoms.length === 0) {
            const d = gA(l.item_code);
            d.length > 0 && (l.item_uoms = d);
          }
        }), !sn())) {
          t.itemDetailsRetryCount += 1;
          const l = Math.min(32e3, 1e3 * Math.pow(2, t.itemDetailsRetryCount - 1));
          t.itemDetailsRetryTimeout = setTimeout(() => {
            t.update_items_details(e);
          }, l);
        }
      }
      this.cleanupBeforeDestroy = () => {
        t.abortController && t.abortController.abort();
      };
    },
    update_cur_items_details() {
      this.filtered_items && this.filtered_items.length > 0 && this.update_items_details(this.filtered_items);
    },
    async prePopulateStockCache(e) {
      if (!this.prePopulateInProgress && !(!Array.isArray(e) || e.length === 0)) {
        this.prePopulateInProgress = !0;
        try {
          const t = hQ(), n = Object.keys(t).length;
          if (fQ() && n >= e.length) {
            console.debug("Stock cache already initialized");
            return;
          }
          e.length > 500 ? console.info("Pre-populating stock cache for", e.length, "items in batches") : console.info("Pre-populating stock cache for", e.length, "items"), await dQ(e, this.pos_profile);
        } catch (t) {
          console.error("Failed to pre-populate stock cache:", t);
        } finally {
          this.prePopulateInProgress = !1;
        }
      }
    },
    applyCurrencyConversionToItems() {
      !this.items || !this.items.length || this.items.forEach((e) => this.applyCurrencyConversionToItem(e));
    },
    applyCurrencyConversionToItem(e) {
      if (!e) return;
      const t = this.pos_profile.currency;
      e.original_rate || (e.original_rate = e.rate, e.original_currency = e.currency || t);
      const n = e.original_rate, a = n * (e.plc_conversion_rate || 1);
      e.base_rate = a, e.base_price_list_rate = n;
      const r = e.original_currency === this.selected_currency ? n : n * (this.exchange_rate || 1);
      e.rate = this.flt(r, this.currency_precision), e.currency = this.selected_currency, e.price_list_rate = e.rate;
    },
    scan_barcoud() {
      const e = this;
      try {
        if (document._scannerAttached)
          return;
        onScan.attachTo(document, {
          suffixKeyCodes: [],
          keyCodeMapper: function(t) {
            return t.stopImmediatePropagation(), t.preventDefault(), onScan.decodeKeyEvent(t);
          },
          onScan: function(t) {
            setTimeout(() => {
              e.trigger_onscan(t);
            }, 300);
          }
        }), document._scannerAttached = !0;
      } catch (t) {
        console.warn("Scanner initialization error:", t.message);
      }
    },
    trigger_onscan(e) {
      this.search_from_scanner = !0, this.first_search = e, this.search = e, this.$nextTick(() => {
        this.filtered_items.length == 0 ? (this.eventBus.emit("show_message", {
          title: `No Item has this barcode "${e}"`,
          color: "error"
        }), frappe.utils.play_sound("error")) : this.enter_event(), this.clearSearch(), this.$refs.debounce_search && this.$refs.debounce_search.focus();
      });
    },
    generateWordCombinations(e) {
      const t = e.split(" ");
      t.length;
      const n = [];
      function a(r, i = []) {
        if (r.length === 0)
          n.push(i.join(" "));
        else
          for (let o = 0; o < r.length; o++) {
            const l = r.slice(), s = l.splice(o, 1);
            a(l.slice(), i.concat(s));
          }
      }
      return a(t), n;
    },
    clearSearch() {
      this.search_backup = this.first_search, this.first_search = "", this.search = "", this.loadVisibleItems(!0), this.get_items();
    },
    restoreSearch() {
      this.first_search === "" && (this.first_search = this.search_backup, this.search = this.search_backup);
    },
    handleItemSearchFocus() {
      this.first_search = "", this.search = "";
    },
    clearQty() {
      this.qty = null;
    },
    startCameraScanning() {
      this.$refs.cameraScanner && this.$refs.cameraScanner.startScanning();
    },
    onBarcodeScanned(e) {
      console.log("Barcode scanned:", e), this.search_from_scanner = !0, this.search = "", this.first_search = "", this.first_search = e, this.search = e, frappe.show_alert(
        {
          message: `Scanning for: ${e}`,
          indicator: "blue"
        },
        2
      ), setTimeout(() => {
        this.processScannedItem(e);
      }, 300);
    },
    async processScannedItem(e) {
      let t = e, n = null;
      this.pos_profile?.posa_scale_barcode_start && e.startsWith(this.pos_profile.posa_scale_barcode_start) && (t = this.get_search(e), n = parseFloat(this.get_item_qty(e)));
      let a = this.items.find((r) => r.barcode === t || Array.isArray(r.item_barcode) && r.item_barcode.some((o) => o.barcode === t) || Array.isArray(r.barcodes) && r.barcodes.some((o) => String(o) === t) || r.item_code === t);
      if (a) {
        console.log("Found item by processed code:", a), this.addScannedItemToInvoice(a, t, n);
        return;
      }
      try {
        const r = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_from_barcode",
          args: {
            selling_price_list: this.active_price_list,
            currency: this.pos_profile.currency,
            barcode: t
          }
        });
        if (r && r.message) {
          const i = r.message;
          this.items.push(i), this.searchCache && this.searchCache.clear(), await W9(this.items), await $9(this.customer_price_list, this.items), this.eventBus.emit("set_all_items", this.items), await this.update_items_details([i]), this.addScannedItemToInvoice(i, t, n);
          return;
        }
        frappe.show_alert(
          {
            message: `${this.__("Item not found")}: ${e}`,
            indicator: "red"
          },
          5
        );
        return;
      } catch (r) {
        console.error("Error fetching item from barcode:", r), frappe.show_alert(
          {
            message: `${this.__("Item not found")}: ${e}`,
            indicator: "red"
          },
          5
        );
        return;
      }
    },
    searchItemsByCode(e) {
      return this.items.filter((t) => {
        const n = e.toLowerCase(), a = t.barcode && t.barcode.toLowerCase().includes(n) || Array.isArray(t.barcodes) && t.barcodes.some((r) => String(r).toLowerCase().includes(n)) || Array.isArray(t.item_barcode) && t.item_barcode.some(
          (r) => r.barcode && r.barcode.toLowerCase().includes(n)
        );
        return t.item_code.toLowerCase().includes(n) || t.item_name.toLowerCase().includes(n) || a;
      });
    },
    async addScannedItemToInvoice(e, t, n = null) {
      console.log("Adding scanned item to invoice:", e, t);
      const a = { ...e };
      if (Array.isArray(a.item_barcode)) {
        const r = a.item_barcode.find((i) => i.barcode === t);
        if (r && r.posa_uom) {
          a.uom = r.posa_uom;
          try {
            const i = await frappe.call({
              method: "posawesome.posawesome.api.items.get_price_for_uom",
              args: {
                item_code: a.item_code,
                price_list: this.active_price_list,
                uom: r.posa_uom
              }
            });
            if (i.message) {
              const o = parseFloat(i.message);
              a.rate = o, a.price_list_rate = o, a.base_rate = o, a.base_price_list_rate = o, a._manual_rate_set = !0, a.skip_force_update = !0;
            }
          } catch (i) {
            console.error("Failed to fetch UOM price", i);
          }
        }
      }
      n !== null && !isNaN(n) && (a.qty = n, a._barcode_qty = !0), await this.add_item(a), frappe.show_alert(
        {
          message: `Added: ${e.item_name}`,
          indicator: "green"
        },
        3
      ), this.clearSearch(), this.$refs.debounce_search && this.$refs.debounce_search.focus();
    },
    showMultipleItemsDialog(e, t) {
      const n = new frappe.ui.Dialog({
        title: __("Multiple Items Found"),
        fields: [
          {
            fieldtype: "HTML",
            fieldname: "items_html",
            options: this.generateItemSelectionHTML(e, t)
          }
        ],
        primary_action_label: __("Cancel"),
        primary_action: () => n.hide()
      });
      n.show(), setTimeout(() => {
        e.forEach((a, r) => {
          n.$wrapper.find(`[data-item-index="${r}"]`).on("click", () => {
            this.addScannedItemToInvoice(a, t), n.hide();
          });
        });
      }, 100);
    },
    generateItemSelectionHTML(e, t) {
      let n = `<div class="mb-3"><strong>Scanned Code:</strong> ${t}</div>`;
      return n += '<div class="item-selection-list">', e.forEach((a, r) => {
        n += `
		<div class="item-option p-3 mb-2 border rounded cursor-pointer" data-item-index="${r}" style="border: 1px solid #ddd; cursor: pointer;">
			<div class="d-flex align-items-center">
			<img src="${a.image || BD}"
				style="width: 50px; height: 50px; object-fit: cover; margin-right: 15px;" />
			<div>
				<div class="font-weight-bold">${a.item_name}</div>
				<div class="text-muted small">${a.item_code}</div>
				<div class="text-primary">${this.format_currency(a.rate, this.pos_profile.currency, this.ratePrecision(a.rate))}</div>
			</div>
			</div>
		</div>
		`;
      }), n += "</div>", n;
    },
    handleItemNotFound(e) {
      console.warn("Item not found for scanned code:", e), frappe.show_alert(
        {
          message: `Item not found: ${e}`,
          indicator: "red"
        },
        5
      ), this.trigger_onscan(e);
    },
    currencySymbol(e) {
      return get_currency_symbol(e);
    },
    format_currency(e, t, n) {
      const a = typeof n == "number" ? n : this.currency_precision;
      return this.formatCurrencyPlain(e, a);
    },
    ratePrecision(e) {
      const t = typeof e == "string" ? parseFloat(e) : e;
      return Number.isInteger(t) ? 0 : this.currency_precision;
    },
    format_number(e, t) {
      const n = typeof t == "number" ? t : this.float_precision;
      return this.formatFloatPlain(e, n);
    },
    hasDecimalPrecision(e) {
      if (this.exchange_rate && this.exchange_rate !== 1) {
        let t = e * this.exchange_rate;
        return !Number.isInteger(t);
      }
      return !Number.isInteger(e);
    },
    // Force load quantities for all visible items
    forceLoadQuantities() {
      this.filtered_items && this.filtered_items.length > 0 && (this.filtered_items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      }), this.update_items_details(this.filtered_items));
    },
    // Ensure all items have quantities set
    ensureAllItemsHaveQuantities() {
      this.items && this.items.length > 0 && this.items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      }), this.filtered_items && this.filtered_items.length > 0 && this.filtered_items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      });
    },
    toggleItemSettings() {
      this.temp_hide_qty_decimals = this.hide_qty_decimals, this.temp_hide_zero_rate_items = this.hide_zero_rate_items, this.temp_enable_custom_items_per_page = this.enable_custom_items_per_page, this.temp_items_per_page = this.items_per_page, this.temp_force_server_items = !!(this.pos_profile && this.pos_profile.posa_force_server_items), this.show_item_settings = !0;
    },
    cancelItemSettings() {
      this.show_item_settings = !1;
    },
    applyItemSettings() {
      this.hide_qty_decimals = this.temp_hide_qty_decimals, this.hide_zero_rate_items = this.temp_hide_zero_rate_items, this.enable_custom_items_per_page = this.temp_enable_custom_items_per_page, this.enable_custom_items_per_page ? this.items_per_page = parseInt(this.temp_items_per_page) || 50 : this.items_per_page = 50, this.itemsPerPage = this.items_per_page, this.pos_profile.posa_force_server_items = this.temp_force_server_items ? 1 : 0, this.savePosProfileSetting("posa_force_server_items", this.pos_profile.posa_force_server_items), this.saveItemSettings(), this.show_item_settings = !1;
    },
    onDragStart(e, t) {
      this.isDragging = !0, e.dataTransfer.setData(
        "application/json",
        JSON.stringify({
          type: "item-from-selector",
          item: t
        })
      ), e.dataTransfer.effectAllowed = "copy", this.eventBus.emit("item-drag-start", t);
    },
    onDragEnd(e) {
      this.isDragging = !1, this.eventBus.emit("item-drag-end");
    },
    saveItemSettings() {
      if (this.localStorageAvailable)
        try {
          const e = {
            hide_qty_decimals: this.hide_qty_decimals,
            hide_zero_rate_items: this.hide_zero_rate_items,
            enable_custom_items_per_page: this.enable_custom_items_per_page,
            items_per_page: this.items_per_page
          };
          localStorage.setItem("posawesome_item_selector_settings", JSON.stringify(e));
        } catch (e) {
          console.error("Failed to save item selector settings:", e);
        }
    },
    savePosProfileSetting(e, t) {
      !this.pos_profile || !this.pos_profile.name || frappe.db.set_value("POS Profile", this.pos_profile.name, e, t ? 1 : 0).catch((n) => {
        console.error("Failed to save POS Profile setting", n);
      });
    },
    loadItemSettings() {
      if (this.localStorageAvailable)
        try {
          const e = localStorage.getItem("posawesome_item_selector_settings");
          if (e) {
            const t = JSON.parse(e);
            typeof t.hide_qty_decimals == "boolean" && (this.hide_qty_decimals = t.hide_qty_decimals), typeof t.hide_zero_rate_items == "boolean" && (this.hide_zero_rate_items = t.hide_zero_rate_items), typeof t.enable_custom_items_per_page == "boolean" && (this.enable_custom_items_per_page = t.enable_custom_items_per_page), typeof t.items_per_page == "number" && (this.items_per_page = t.items_per_page, this.itemsPerPage = this.items_per_page);
          }
        } catch (e) {
          console.error("Failed to load item selector settings:", e);
        }
    }
  },
  computed: {
    headers() {
      return this.getItemsHeaders();
    },
    filtered_items() {
      if (!this.items || this.items.length === 0)
        return [];
      const e = this.get_search(this.first_search).trim().toLowerCase();
      let t = [...this.items];
      e.length >= 3 && (t = t.filter((a) => {
        const r = [];
        return Array.isArray(a.item_barcode) ? r.push(...a.item_barcode.map((o) => o.barcode).filter(Boolean)) : a.item_barcode && r.push(String(a.item_barcode)), Array.isArray(a.barcodes) && r.push(...a.barcodes.map((o) => String(o)).filter(Boolean)), [
          a.item_code,
          a.item_name,
          a.barcode,
          a.description,
          ...r,
          ...this.pos_profile?.posa_search_serial_no && Array.isArray(a.serial_no_data) ? a.serial_no_data.map((o) => o.serial_no) : [],
          ...this.pos_profile?.posa_search_batch_no && Array.isArray(a.batch_no_data) ? a.batch_no_data.map((o) => o.batch_no) : []
        ].filter(Boolean).map((o) => o.toLowerCase()).some((o) => o.includes(e));
      })), this.item_group !== "ALL" && (t = t.filter(
        (a) => a.item_group && a.item_group.toLowerCase() === this.item_group.toLowerCase()
      )), this.hide_zero_rate_items && (t = t.filter((a) => parseFloat(a.rate || 0) > 0)), this.pos_profile?.posa_hide_variants_items && (t = t.filter((a) => !a.variant_of));
      const n = this.enable_custom_items_per_page ? this.items_per_page : this.itemsPerPage;
      return t = t.slice(0, n), t.forEach((a) => {
        (a.actual_qty === void 0 || a.actual_qty === null) && (a.actual_qty = 0);
      }), t;
    },
    debounce_search: {
      get() {
        return this.first_search;
      },
      set: Ni.debounce(function(e) {
        this.first_search = (e || "").trim();
      }, 200)
    },
    debounce_qty: {
      get() {
        return this.qty === null || this.qty === "" ? "" : this.hide_qty_decimals ? Math.trunc(this.qty) : this.qty;
      },
      set: Ni.debounce(function(e) {
        let t = parseFloat(String(e).replace(/,/g, ""));
        isNaN(t) && (t = null), this.hide_qty_decimals && t != null && (t = Math.trunc(t)), this.qty = t;
      }, 200)
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    active_price_list() {
      return this.customer_price_list || this.pos_profile && this.pos_profile.selling_price_list;
    }
  },
  created() {
    if (console.log("ItemsSelector created - starting initialization"), this.searchDebounce = Ni.debounce(() => {
      this.get_items();
    }, 300), this.loadItemSettings(), _u.then(async () => {
      try {
        if (!this.pos_profile || !this.pos_profile.name) {
          if (frappe.boot && frappe.boot.pos_profile)
            this.pos_profile = frappe.boot.pos_profile;
          else if (frappe.router && frappe.router.current_route) {
            const e = frappe.router.current_route;
            e.pos_profile && (this.pos_profile = e.pos_profile);
          }
          (!this.pos_profile || !this.pos_profile.name) && (this.pos_profile = await Gb());
        }
        this.pos_profile && this.pos_profile.name ? (console.log("Loading items with POS Profile:", this.pos_profile.name), this.get_items_groups(), await this.initializeItems()) : console.warn("No POS Profile available during initialization");
      } catch (e) {
        console.error("Error during initialization:", e);
      }
    }), this.eventBus.on("register_pos_profile", async (e) => {
      this.pos_profile = e.pos_profile, this.get_items_groups(), await this.initializeItems(), this.items_view = this.pos_profile.posa_default_card_view ? "card" : "list";
    }), this.eventBus.on("update_cur_items_details", () => {
      this.update_cur_items_details();
    }), this.eventBus.on("update_offers_counters", (e) => {
      this.offersCount = e.offersCount, this.appliedOffersCount = e.appliedOffersCount;
    }), this.eventBus.on("update_coupons_counters", (e) => {
      this.couponsCount = e.couponsCount, this.appliedCouponsCount = e.appliedCouponsCount;
    }), this.eventBus.on("update_customer_price_list", (e) => {
      this.customer_price_list = e;
    }), this.eventBus.on("update_customer", (e) => {
      this.customer = e;
    }), this.eventBus.on("force_reload_items", async () => {
      await this.ensureStorageHealth(), this.items_loaded = !1, sn() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? (await z_(), await this.get_items(!0)) : await this.get_items() : (this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) && await z_(), await this.get_items(!0));
    }), this.eventBus.on("server-online", async () => {
      this.items && this.items.length > 0 && await this.update_items_details(this.items);
    }), typeof Worker < "u")
      try {
        const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
        this.itemWorker = new Worker(e, { type: "classic" }), this.itemWorker.onerror = function(t) {
          console.error("Worker error:", t), console.error("Message:", t.message), console.error("Filename:", t.filename), console.error("Line number:", t.lineno);
        }, console.log("Created worker");
      } catch (e) {
        console.error("Failed to start item worker", e), this.itemWorker = null;
      }
    if (typeof Worker < "u")
      try {
        const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
        this.itemWorker = new Worker(e, { type: "classic" }), this.itemWorker.onerror = function(t) {
          console.error("Worker error:", t), console.error("Message:", t.message), console.error("Filename:", t.filename), console.error("Line number:", t.lineno);
        }, console.log("Created worker");
      } catch (e) {
        console.error("Failed to start item worker", e), this.itemWorker = null;
      }
    this.update_cur_items_details(), this.refresh_interval = setInterval(() => {
      this.filtered_items && this.filtered_items.length > 0 && this.update_cur_items_details();
    }, 3e4), this.eventBus.on("update_currency", (e) => {
      this.selected_currency = e.currency, this.exchange_rate = e.exchange_rate, this.applyCurrencyConversionToItems(), this.update_cur_items_details();
    });
  },
  async mounted() {
    if (!this.pos_profile || !this.pos_profile.name)
      try {
        frappe.boot && frappe.boot.pos_profile ? this.pos_profile = frappe.boot.pos_profile : window.cur_pos && window.cur_pos.pos_profile && (this.pos_profile = window.cur_pos.pos_profile);
      } catch (e) {
        console.warn("Could not get POS profile in mounted:", e);
      }
    this.pos_profile && this.pos_profile.name && !this.items_loaded && (this.get_items_groups(), await this.get_items()), this.pos_profile?.posa_enable_barcode_scanning && this.scan_barcoud(), this.itemsPerPage = this.items_per_page, window.addEventListener("resize", this.checkItemContainerOverflow), this.$nextTick(this.checkItemContainerOverflow);
  },
  beforeUnmount() {
    if (this.refresh_interval && clearInterval(this.refresh_interval), this.itemDetailsRetryTimeout && clearTimeout(this.itemDetailsRetryTimeout), this.itemDetailsRetryCount = 0, this.cleanupBeforeDestroy && this.cleanupBeforeDestroy(), document._scannerAttached)
      try {
        onScan.detachFrom(document), document._scannerAttached = !1;
      } catch (e) {
        console.warn("Scanner detach error:", e.message);
      }
    this.itemWorker && this.itemWorker.terminate(), this.eventBus.off("update_currency"), this.eventBus.off("server-online"), this.eventBus.off("register_pos_profile"), this.eventBus.off("update_cur_items_details"), this.eventBus.off("update_offers_counters"), this.eventBus.off("update_coupons_counters"), this.eventBus.off("update_customer_price_list"), this.eventBus.off("update_customer"), this.eventBus.off("force_reload_items"), window.removeEventListener("resize", this.checkItemContainerOverflow);
  }
}, jZ = { class: "dynamic-padding" }, YZ = { class: "sticky-header" }, KZ = { class: "settings-container" }, GZ = {
  key: 0,
  class: "items-card-container"
}, QZ = ["onClick", "onDragstart"], JZ = { class: "card-item-image-container" }, XZ = { class: "image-placeholder" }, ZZ = { class: "card-item-content" }, eee = { class: "card-item-header" }, tee = { class: "card-item-name" }, nee = { class: "card-item-code" }, aee = { class: "card-item-details" }, ree = { class: "card-item-price" }, iee = { class: "primary-price" }, oee = { class: "currency-symbol" }, see = { class: "price-amount" }, lee = {
  key: 0,
  class: "secondary-price"
}, cee = { class: "currency-symbol" }, uee = { class: "price-amount" }, dee = { class: "card-item-stock" }, fee = { class: "stock-uom" }, mee = {
  key: 1,
  class: "items-table-container"
}, hee = { class: "text-primary" }, _ee = {
  key: 0,
  class: "text-success"
};
function pee(e, t, n, a, r, i) {
  const o = J("v-progress-linear"), l = J("LoadingOverlay"), s = J("v-btn"), d = J("v-text-field"), u = J("v-col"), f = J("v-checkbox"), _ = J("v-spacer"), g = J("v-card-title"), v = J("v-divider"), w = J("v-switch"), b = J("v-card-text"), p = J("v-card-actions"), y = J("v-card"), S = J("v-dialog"), E = J("v-row"), C = J("v-icon"), B = J("v-img"), O = J("v-data-table-virtual"), D = J("v-select"), T = J("v-btn-toggle"), P = J("CameraScanner");
  return ne(), Be("div", {
    style: Xe(e.responsiveStyles)
  }, [
    h(y, {
      class: Ee([
        "selection mx-auto my-0 py-0 mt-3 pos-card dynamic-card resizable",
        i.isDarkTheme ? "" : "bg-grey-lighten-5",
        e.rtlClasses
      ]),
      style: Xe({
        height: e.responsiveStyles["--container-height"],
        maxHeight: e.responsiveStyles["--container-height"],
        backgroundColor: i.isDarkTheme ? "#121212" : "",
        resize: "vertical",
        overflow: "auto",
        position: "relative"
      })
    }, {
      default: x(() => [
        h(o, {
          active: e.loading,
          indeterminate: e.loading,
          absolute: "",
          location: "top",
          color: "info"
        }, null, 8, ["active", "indeterminate"]),
        h(l, {
          loading: e.loading || e.isBackgroundLoading,
          message: e.__("Loading item data..."),
          progress: e.loadProgress
        }, null, 8, ["loading", "message", "progress"]),
        A("div", jZ, [
          A("div", YZ, [
            h(E, { class: "items" }, {
              default: x(() => [
                h(u, { class: "pb-0" }, {
                  default: x(() => [
                    h(d, {
                      density: "compact",
                      clearable: "",
                      autofocus: "",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Search Items"),
                      hint: "Search by item code, serial number, batch no or barcode",
                      "hide-details": "",
                      modelValue: i.debounce_search,
                      "onUpdate:modelValue": t[0] || (t[0] = (I) => i.debounce_search = I),
                      onKeydown: [
                        Rl(i.esc_event, ["esc"]),
                        Rl(i.search_onchange, ["enter"])
                      ],
                      "onClick:clear": i.clearSearch,
                      "prepend-inner-icon": "mdi-magnify",
                      onFocus: i.handleItemSearchFocus,
                      ref: "debounce_search"
                    }, dr({ _: 2 }, [
                      e.pos_profile.posa_enable_camera_scanning ? {
                        name: "append-inner",
                        fn: x(() => [
                          h(s, {
                            icon: "mdi-camera",
                            size: "small",
                            color: "primary",
                            variant: "text",
                            onClick: i.startCameraScanning,
                            title: e.__("Scan with Camera")
                          }, null, 8, ["onClick", "title"])
                        ]),
                        key: "0"
                      } : void 0
                    ]), 1032, ["label", "modelValue", "onKeydown", "onClick:clear", "onFocus"])
                  ]),
                  _: 1
                }),
                e.pos_profile.posa_input_qty ? (ne(), Fe(u, {
                  key: 0,
                  cols: "3",
                  class: "pb-0"
                }, {
                  default: x(() => [
                    h(d, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("QTY"),
                      "hide-details": "",
                      modelValue: i.debounce_qty,
                      "onUpdate:modelValue": t[1] || (t[1] = (I) => i.debounce_qty = I),
                      type: "text",
                      onKeydown: [
                        Rl(i.enter_event, ["enter"]),
                        Rl(i.esc_event, ["esc"])
                      ],
                      onFocus: i.clearQty
                    }, null, 8, ["label", "modelValue", "onKeydown", "onFocus"])
                  ]),
                  _: 1
                })) : ke("", !0),
                e.pos_profile.posa_new_line ? (ne(), Fe(u, {
                  key: 1,
                  cols: "2",
                  class: "pb-0"
                }, {
                  default: x(() => [
                    h(f, {
                      modelValue: e.new_line,
                      "onUpdate:modelValue": t[2] || (t[2] = (I) => e.new_line = I),
                      color: "accent",
                      value: "true",
                      label: "NLine",
                      density: "default",
                      "hide-details": ""
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                })) : ke("", !0),
                h(u, {
                  cols: "12",
                  class: "dynamic-margin-xs"
                }, {
                  default: x(() => [
                    A("div", KZ, [
                      h(s, {
                        density: "compact",
                        variant: "text",
                        color: "primary",
                        "prepend-icon": "mdi-cog-outline",
                        onClick: i.toggleItemSettings,
                        class: "settings-btn"
                      }, {
                        default: x(() => [
                          ae(W(e.__("Settings")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      h(_),
                      h(s, {
                        density: "compact",
                        variant: "text",
                        color: "primary",
                        "prepend-icon": "mdi-refresh",
                        onClick: i.forceReloadItems,
                        class: "settings-btn"
                      }, {
                        default: x(() => [
                          ae(W(e.__("Reload Items")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      h(S, {
                        modelValue: e.show_item_settings,
                        "onUpdate:modelValue": t[9] || (t[9] = (I) => e.show_item_settings = I),
                        "max-width": "400px"
                      }, {
                        default: x(() => [
                          h(y, null, {
                            default: x(() => [
                              h(g, { class: "text-h6 pa-4 d-flex align-center" }, {
                                default: x(() => [
                                  A("span", null, W(e.__("Item Selector Settings")), 1),
                                  h(_),
                                  h(s, {
                                    icon: "mdi-close",
                                    variant: "text",
                                    density: "compact",
                                    onClick: t[3] || (t[3] = (I) => e.show_item_settings = !1)
                                  })
                                ]),
                                _: 1
                              }),
                              h(v),
                              h(b, { class: "pa-4" }, {
                                default: x(() => [
                                  h(w, {
                                    modelValue: e.temp_hide_qty_decimals,
                                    "onUpdate:modelValue": t[4] || (t[4] = (I) => e.temp_hide_qty_decimals = I),
                                    label: e.__("Hide quantity decimals"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  h(w, {
                                    modelValue: e.temp_hide_zero_rate_items,
                                    "onUpdate:modelValue": t[5] || (t[5] = (I) => e.temp_hide_zero_rate_items = I),
                                    label: e.__("Hide zero rated items"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary"
                                  }, null, 8, ["modelValue", "label"]),
                                  h(w, {
                                    modelValue: e.temp_enable_custom_items_per_page,
                                    "onUpdate:modelValue": t[6] || (t[6] = (I) => e.temp_enable_custom_items_per_page = I),
                                    label: e.__("Custom items per page"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  h(f, {
                                    modelValue: e.temp_force_server_items,
                                    "onUpdate:modelValue": t[7] || (t[7] = (I) => e.temp_force_server_items = I),
                                    label: e.__("Always fetch items from server (ignore local cache)"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  e.temp_enable_custom_items_per_page ? (ne(), Fe(d, {
                                    key: 0,
                                    modelValue: e.temp_items_per_page,
                                    "onUpdate:modelValue": t[8] || (t[8] = (I) => e.temp_items_per_page = I),
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                    "hide-details": "",
                                    label: e.__("Items per page"),
                                    class: "mb-2 dark-field"
                                  }, null, 8, ["modelValue", "bg-color", "label"])) : ke("", !0)
                                ]),
                                _: 1
                              }),
                              h(p, { class: "pa-4 pt-0" }, {
                                default: x(() => [
                                  h(s, {
                                    color: "error",
                                    variant: "text",
                                    onClick: i.cancelItemSettings
                                  }, {
                                    default: x(() => [
                                      ae(W(e.__("Cancel")), 1)
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"]),
                                  h(_),
                                  h(s, {
                                    color: "primary",
                                    variant: "tonal",
                                    onClick: i.applyItemSettings
                                  }, {
                                    default: x(() => [
                                      ae(W(e.__("Apply")), 1)
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"])
                                ]),
                                _: 1
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          h(E, { class: "items" }, {
            default: x(() => [
              h(u, {
                cols: "12",
                class: "pt-0 mt-0"
              }, {
                default: x(() => [
                  e.items_view == "card" ? (ne(), Be("div", GZ, [
                    A("div", {
                      class: Ee(["items-card-grid", { "item-container": e.isOverflowing }]),
                      ref: "itemsContainer",
                      onScrollPassive: t[11] || (t[11] = (...I) => i.onCardScroll && i.onCardScroll(...I))
                    }, [
                      (ne(!0), Be(Qe, null, un(i.filtered_items, (I) => (ne(), Be("div", {
                        key: I.item_code,
                        class: "card-item-card",
                        onClick: (M) => i.add_item(I),
                        draggable: !0,
                        onDragstart: (M) => i.onDragStart(M, I),
                        onDragend: t[10] || (t[10] = (...M) => i.onDragEnd && i.onDragEnd(...M))
                      }, [
                        A("div", JZ, [
                          h(B, {
                            src: I.image || e.placeholderImage,
                            class: "card-item-image",
                            "aspect-ratio": "1",
                            alt: I.item_name
                          }, {
                            placeholder: x(() => [
                              A("div", XZ, [
                                h(C, {
                                  size: "40",
                                  color: "grey-lighten-2"
                                }, {
                                  default: x(() => t[14] || (t[14] = [
                                    ae("mdi-image")
                                  ])),
                                  _: 1,
                                  __: [14]
                                })
                              ])
                            ]),
                            _: 2
                          }, 1032, ["src", "alt"])
                        ]),
                        A("div", ZZ, [
                          A("div", eee, [
                            A("h4", tee, W(I.item_name), 1),
                            A("span", nee, W(I.item_code), 1)
                          ]),
                          A("div", aee, [
                            A("div", ree, [
                              A("div", iee, [
                                A("span", oee, W(i.currencySymbol(
                                  I.original_currency || e.pos_profile.currency
                                )), 1),
                                A("span", see, W(i.format_currency(
                                  I.base_price_list_rate || I.rate,
                                  I.original_currency || e.pos_profile.currency,
                                  i.ratePrecision(
                                    I.base_price_list_rate || I.rate
                                  )
                                )), 1)
                              ]),
                              e.pos_profile.posa_allow_multi_currency && e.selected_currency !== e.pos_profile.currency ? (ne(), Be("div", lee, [
                                A("span", cee, W(i.currencySymbol(e.selected_currency)), 1),
                                A("span", uee, W(i.format_currency(
                                  I.rate,
                                  e.selected_currency,
                                  i.ratePrecision(I.rate)
                                )), 1)
                              ])) : ke("", !0)
                            ]),
                            A("div", dee, [
                              h(C, {
                                size: "small",
                                class: "stock-icon"
                              }, {
                                default: x(() => t[15] || (t[15] = [
                                  ae("mdi-package-variant")
                                ])),
                                _: 1,
                                __: [15]
                              }),
                              A("span", {
                                class: Ee(["stock-amount", {
                                  "negative-number": e.isNegative(I.actual_qty)
                                }])
                              }, W(i.format_number(
                                I.actual_qty,
                                e.hide_qty_decimals ? 0 : 4
                              ) || 0), 3),
                              A("span", fee, W(I.stock_uom || ""), 1)
                            ])
                          ])
                        ])
                      ], 40, QZ))), 128))
                    ], 34)
                  ])) : (ne(), Be("div", mee, [
                    h(O, {
                      headers: i.headers,
                      items: i.filtered_items,
                      class: "sleek-data-table overflow-y-auto",
                      style: { height: "calc(100% - 80px)" },
                      "item-key": "item_code",
                      "fixed-header": "",
                      height: "100%",
                      "header-props": e.headerProps,
                      "no-data-text": e.__("No items found"),
                      "onClick:row": i.click_item_row,
                      onScrollPassive: i.onListScroll
                    }, {
                      "item.rate": x(({ item: I }) => [
                        A("div", null, [
                          A("div", hee, W(i.currencySymbol(I.original_currency || e.pos_profile.currency)) + " " + W(i.format_currency(
                            I.base_price_list_rate || I.rate,
                            I.original_currency || e.pos_profile.currency,
                            i.ratePrecision(I.base_price_list_rate || I.rate)
                          )), 1),
                          e.pos_profile.posa_allow_multi_currency && e.selected_currency !== e.pos_profile.currency ? (ne(), Be("div", _ee, W(i.currencySymbol(e.selected_currency)) + " " + W(i.format_currency(
                            I.rate,
                            e.selected_currency,
                            i.ratePrecision(I.rate)
                          )), 1)) : ke("", !0)
                        ])
                      ]),
                      "item.actual_qty": x(({ item: I }) => [
                        A("span", {
                          class: Ee(["golden--text", { "negative-number": e.isNegative(I.actual_qty) }])
                        }, W(i.format_number(I.actual_qty, e.hide_qty_decimals ? 0 : 4)), 3)
                      ]),
                      _: 1
                    }, 8, ["headers", "items", "header-props", "no-data-text", "onClick:row", "onScrollPassive"])
                  ]))
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ])
      ]),
      _: 1
    }, 8, ["class", "style"]),
    h(y, {
      class: "cards mb-0 mt-3 dynamic-padding resizable",
      style: { resize: "vertical", overflow: "auto" }
    }, {
      default: x(() => [
        h(E, {
          "no-gutters": "",
          align: "center",
          justify: "center",
          class: "dynamic-spacing-sm"
        }, {
          default: x(() => [
            h(u, {
              cols: "12",
              class: "mb-2"
            }, {
              default: x(() => [
                h(D, {
                  items: e.items_group,
                  label: e.frappe._("Items Group"),
                  density: "compact",
                  variant: "solo",
                  "hide-details": "",
                  modelValue: e.item_group,
                  "onUpdate:modelValue": t[12] || (t[12] = (I) => e.item_group = I)
                }, null, 8, ["items", "label", "modelValue"])
              ]),
              _: 1
            }),
            e.pos_profile.posa_enable_price_list_dropdown !== !1 ? (ne(), Fe(u, {
              key: 0,
              cols: "12",
              class: "mb-2"
            }, {
              default: x(() => [
                h(d, {
                  density: "compact",
                  variant: "solo",
                  color: "primary",
                  label: e.frappe._("Price List"),
                  "hide-details": "",
                  "model-value": i.active_price_list,
                  readonly: ""
                }, null, 8, ["label", "model-value"])
              ]),
              _: 1
            })) : ke("", !0),
            h(u, {
              cols: "3",
              class: "dynamic-margin-xs"
            }, {
              default: x(() => [
                h(T, {
                  modelValue: e.items_view,
                  "onUpdate:modelValue": t[13] || (t[13] = (I) => e.items_view = I),
                  color: "primary",
                  group: "",
                  density: "compact",
                  rounded: ""
                }, {
                  default: x(() => [
                    h(s, {
                      size: "small",
                      value: "list"
                    }, {
                      default: x(() => [
                        ae(W(e.__("List")), 1)
                      ]),
                      _: 1
                    }),
                    h(s, {
                      size: "small",
                      value: "card"
                    }, {
                      default: x(() => [
                        ae(W(e.__("Card")), 1)
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                }, 8, ["modelValue"])
              ]),
              _: 1
            }),
            h(u, {
              cols: "5",
              class: "dynamic-margin-xs"
            }, {
              default: x(() => [
                h(s, {
                  size: "small",
                  block: "",
                  color: "warning",
                  variant: "text",
                  onClick: i.show_offers,
                  class: "action-btn-consistent"
                }, {
                  default: x(() => [
                    ae(W(e.offersCount) + " " + W(e.__("Offers")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            }),
            h(u, {
              cols: "4",
              class: "dynamic-margin-xs"
            }, {
              default: x(() => [
                h(s, {
                  size: "small",
                  block: "",
                  color: "primary",
                  variant: "text",
                  onClick: i.show_coupons,
                  class: "action-btn-consistent"
                }, {
                  default: x(() => [
                    ae(W(e.couponsCount) + " " + W(e.__("Coupons")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    e.pos_profile.posa_enable_camera_scanning ? (ne(), Fe(P, {
      key: 0,
      ref: "cameraScanner",
      "scan-type": e.pos_profile.posa_camera_scan_type || "Both",
      onBarcodeScanned: i.onBarcodeScanned
    }, null, 8, ["scan-type", "onBarcodeScanned"])) : ke("", !0)
  ], 4);
}
const vee = /* @__PURE__ */ rn(WZ, [["render", pee], ["__scopeId", "data-v-7bd41008"]]), gee = {
  data: () => ({
    customerDialog: !1,
    confirmDialog: !1,
    pos_profile: "",
    customer_id: "",
    customer_name: "",
    tax_id: "",
    mobile_no: "",
    address_line1: "",
    city: "",
    country: "Pakistan",
    email_id: "",
    referral_code: "",
    birthday: "",
    birthday_menu: !1,
    group: "",
    groups: [],
    territory: "",
    territorys: [],
    genders: [],
    customer_type: "Individual",
    gender: "",
    loyalty_points: null,
    loyalty_program: null,
    hideNonEssential: !1,
    countries: [
      "Afghanistan",
      "Australia",
      "Bahrain",
      "Bangladesh",
      "Canada",
      "China",
      "Denmark",
      "France",
      "Germany",
      "India",
      "Indonesia",
      "Italy",
      "Japan",
      "Kuwait",
      "Malaysia",
      "Nepal",
      "Netherlands",
      "New Zealand",
      "Norway",
      "Oman",
      "Pakistan",
      "Philippines",
      "Qatar",
      "Saudi Arabia",
      "Singapore",
      "South Korea",
      "Spain",
      "Sri Lanka",
      "Sweden",
      "Switzerland",
      "Syria",
      "Thailand",
      "United Arab Emirates",
      "United Kingdom",
      "United States",
      "Vietnam",
      "Yemen"
    ]
  }),
  watch: {
    hideNonEssential(e) {
      typeof localStorage < "u" && localStorage.setItem("posawesome_hide_non_essential_fields", JSON.stringify(e));
    },
    birthday(e) {
      if (e && /^\d{8}$/.test(e))
        try {
          const t = e.substring(0, 2), n = e.substring(2, 4), a = e.substring(4);
          this.birthday = `${t}-${n}-${a}`, this.updateCalendarDate(t, n, a);
        } catch (t) {
          console.error("Error processing 8-digit date:", t);
        }
      else if (e && /^\d{2}-\d{2}-\d{4}$/.test(e))
        try {
          const t = e.split("-"), n = t[0], a = t[1], r = t[2];
          this.updateCalendarDate(n, a, r);
        } catch (t) {
          console.error("Error processing formatted date:", t);
        }
    },
    // Add a watcher for the calendar menu to ensure it shows the right date when opened
    birthday_menu(e) {
      if (e && this.birthday && /^\d{2}-\d{2}-\d{4}$/.test(this.birthday))
        try {
          const t = this.birthday.split("-"), n = t[0], a = t[1], r = t[2];
          this.$nextTick(() => {
            this.updateCalendarDate(n, a, r);
          });
        } catch (t) {
          console.error("Error updating calendar on menu open:", t);
        }
    }
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  methods: {
    // Add a new method to update calendar date
    updateCalendarDate(e, t, n) {
      const a = this.birthday_menu;
      this.birthday_menu = !1, this.$nextTick(() => {
        const r = `${n}-${t}-${e}`;
        setTimeout(() => {
          this.$refs.birthday_menu && (this.$refs.birthday_menu.date = r, a && (this.birthday_menu = !0));
        }, 50);
      });
    },
    confirm_close() {
      this.customer_name || this.tax_id || this.mobile_no || this.address_line1 || this.email_id || this.referral_code || this.birthday ? this.confirmDialog = !0 : this.close_dialog();
    },
    confirmClose() {
      this.confirmDialog = !1, this.close_dialog();
    },
    close_dialog() {
      this.customerDialog = !1, this.clear_customer();
    },
    clear_customer() {
      this.customer_name = "", this.tax_id = "", this.mobile_no = "", this.address_line1 = "", this.city = "", this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan", this.email_id = "", this.referral_code = "", this.birthday = "", this.group = frappe.defaults.get_user_default("Customer Group"), this.territory = frappe.defaults.get_user_default("Territory"), this.customer_id = "", this.customer_type = "Individual", this.gender = "", this.loyalty_points = null, this.loyalty_program = null;
    },
    getCustomerGroups() {
      if (this.groups.length > 0) return;
      const e = this;
      frappe.db.get_list("Customer Group", {
        fields: ["name"],
        filters: { is_group: 0 },
        limit: 1e3,
        order_by: "name"
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.groups.push(n.name);
        });
      });
    },
    getCustomerTerritorys() {
      if (this.territorys.length > 0) return;
      const e = this;
      frappe.db.get_list("Territory", {
        fields: ["name"],
        filters: { is_group: 0 },
        limit: 5e3,
        order_by: "name"
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.territorys.push(n.name);
        });
      });
    },
    getGenders() {
      const e = this;
      frappe.db.get_list("Gender", {
        fields: ["name"],
        page_length: 10
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.genders.push(n.name);
        });
      });
    },
    formatBirthdayOnInput() {
      if (this.birthday && /^\d{8}$/.test(this.birthday))
        try {
          const e = this.birthday.substring(0, 2), t = this.birthday.substring(2, 4), n = this.birthday.substring(4);
          this.birthday = `${e}-${t}-${n}`;
        } catch (e) {
          console.error("Error formatting date:", e);
        }
    },
    submit_dialog() {
      const e = this;
      if (!this.customer_name) {
        frappe.throw(__("Customer Name is required"));
        return;
      }
      if (!this.group) {
        frappe.throw(__("Customer group is required"));
        return;
      }
      if (!this.territory) {
        frappe.throw(__("Customer territory is required"));
        return;
      }
      let t = null;
      if (this.birthday)
        try {
          if (/^\d{8}$/.test(this.birthday)) {
            const r = this.birthday.substring(0, 2), i = this.birthday.substring(2, 4);
            t = `${this.birthday.substring(4)}-${i}-${r}`;
          } else if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(this.birthday)) {
            const r = this.birthday.split("-");
            if (r.length === 3) {
              const i = r[0].padStart(2, "0"), o = r[1].padStart(2, "0");
              t = `${r[2]}-${o}-${i}`;
            }
          } else if (/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(this.birthday)) {
            const r = this.birthday.split("/");
            if (r.length === 3) {
              const i = r[0].padStart(2, "0"), o = r[1].padStart(2, "0");
              t = `${r[2]}-${o}-${i}`;
            }
          } else if (this.birthday)
            try {
              const r = new Date(this.birthday);
              if (!isNaN(r.getTime())) {
                const i = r.getFullYear(), o = String(r.getMonth() + 1).padStart(2, "0"), l = String(r.getDate()).padStart(2, "0");
                t = `${i}-${o}-${l}`;
              }
            } catch (r) {
              console.error("Failed to parse date:", r);
            }
        } catch (r) {
          console.error("Error formatting date:", r), t = null;
        }
      const n = {
        customer_id: this.customer_id,
        customer_name: this.customer_name,
        tax_id: this.tax_id,
        mobile_no: this.mobile_no,
        address_line1: this.address_line1,
        city: this.city,
        country: this.country,
        email_id: this.email_id,
        referral_code: this.referral_code,
        birthday: t || this.birthday,
        customer_group: this.group,
        territory: this.territory,
        customer_type: this.customer_type,
        gender: this.gender
      }, a = {
        ...n,
        company: e.pos_profile.company,
        pos_profile_doc: JSON.stringify(e.pos_profile),
        method: this.customer_id ? "update" : "create"
      };
      if (sn()) {
        wQ({ args: a }), e.eventBus.emit("show_message", { title: __("Customer saved offline"), color: "warning" }), n.name = this.customer_name, e.eventBus.emit("add_customer_to_list", n), e.eventBus.emit("set_customer", n.name), e.close_dialog();
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.customers.create_customer",
        args: a,
        callback: (r) => {
          if (!r.exc && r.message.name) {
            let i = __("Customer created successfully.");
            e.customer_id && (i = __("Customer updated successfully.")), e.eventBus.emit("show_message", {
              title: i,
              color: "success"
            }), n.name = r.message.name, frappe.utils.play_sound("submit"), e.eventBus.emit("add_customer_to_list", n), e.eventBus.emit("set_customer", r.message.name), e.eventBus.emit("fetch_customer_details"), e.close_dialog();
          } else
            frappe.utils.play_sound("error"), e.eventBus.emit("show_message", {
              title: __("Customer creation failed."),
              color: "error"
            });
        }
      });
    },
    onDateSelect() {
      if (this.birthday_menu = !1, this.birthday)
        try {
          let e;
          if (typeof this.birthday == "object")
            e = this.birthday;
          else if (typeof this.birthday == "string" && (this.birthday.includes("GMT") || this.birthday.includes("T")))
            e = new Date(this.birthday);
          else
            return;
          const t = e.getFullYear(), n = String(e.getMonth() + 1).padStart(2, "0"), a = String(e.getDate()).padStart(2, "0");
          this.birthday = `${a}-${n}-${t}`;
        } catch (e) {
          console.error("Error formatting date from picker:", e);
        }
    }
  },
  created: function() {
    if (typeof localStorage < "u") {
      const e = localStorage.getItem("posawesome_hide_non_essential_fields");
      e !== null && (this.hideNonEssential = JSON.parse(e));
    }
    this.eventBus.on("open_update_customer", (e) => {
      this.customerDialog = !0, e ? (this.customer_name = e.customer_name, this.customer_id = e.name, this.address_line1 = e.address_line1 || "", this.city = e.city || "", this.country = e.country || this.pos_profile && this.pos_profile.posa_default_country || "Pakistan", this.tax_id = e.tax_id, this.mobile_no = e.mobile_no, this.email_id = e.email_id, this.referral_code = e.referral_code, this.birthday = e.birthday, this.group = e.customer_group, this.territory = e.territory, this.loyalty_points = e.loyalty_points, this.loyalty_program = e.loyalty_program, this.gender = e.gender) : this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.eventBus.on("payments_register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.getCustomerGroups(), this.getCustomerTerritorys(), this.getGenders(), this.group = frappe.defaults.get_user_default("Customer Group"), this.territory = frappe.defaults.get_user_default("Territory");
  }
}, yee = {
  key: 0,
  class: "text-h5 text-primary"
}, bee = {
  key: 1,
  class: "text-h5 text-primary"
};
function wee(e, t, n, a, r, i) {
  const o = J("v-spacer"), l = J("v-switch"), s = J("v-card-title"), d = J("v-text-field"), u = J("v-col"), f = J("v-select"), _ = J("v-autocomplete"), g = J("v-row"), v = J("v-container"), w = J("v-card-text"), b = J("v-btn"), p = J("v-card-actions"), y = J("v-card"), S = J("v-dialog");
  return ne(), Fe(g, { justify: "center" }, {
    default: x(() => [
      h(S, {
        modelValue: e.customerDialog,
        "onUpdate:modelValue": t[15] || (t[15] = (E) => e.customerDialog = E),
        "max-width": "600px",
        persistent: ""
      }, {
        default: x(() => [
          h(y, null, {
            default: x(() => [
              h(s, { class: "d-flex align-center" }, {
                default: x(() => [
                  e.customer_id ? (ne(), Be("span", yee, W(e.__("Update Customer")), 1)) : (ne(), Be("span", bee, W(e.__("Create Customer")), 1)),
                  h(o),
                  h(l, {
                    modelValue: e.hideNonEssential,
                    "onUpdate:modelValue": t[0] || (t[0] = (E) => e.hideNonEssential = E),
                    density: "compact",
                    inset: "",
                    "hide-details": "",
                    color: "primary",
                    label: e.__("Hide Non Essential Fields")
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              }),
              h(w, { class: "pa-0" }, {
                default: x(() => [
                  h(v, null, {
                    default: x(() => [
                      h(g, null, {
                        default: x(() => [
                          h(u, { cols: "12" }, {
                            default: x(() => [
                              h(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Customer Name") + " *",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                class: "dark-field",
                                modelValue: e.customer_name,
                                "onUpdate:modelValue": t[1] || (t[1] = (E) => e.customer_name = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, { cols: "6" }, {
                            default: x(() => [
                              h(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Tax ID"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.tax_id,
                                "onUpdate:modelValue": t[2] || (t[2] = (E) => e.tax_id = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, { cols: "6" }, {
                            default: x(() => [
                              h(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Mobile No"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.mobile_no,
                                "onUpdate:modelValue": t[3] || (t[3] = (E) => e.mobile_no = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          e.hideNonEssential ? ke("", !0) : (ne(), Fe(u, {
                            key: 0,
                            cols: "12"
                          }, {
                            default: x(() => [
                              h(d, {
                                density: "compact",
                                color: "primary",
                                label: e.__("Address Line 1"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                class: "dark-field",
                                modelValue: e.address_line1,
                                "onUpdate:modelValue": t[4] || (t[4] = (E) => e.address_line1 = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ke("", !0) : (ne(), Fe(u, {
                            key: 1,
                            cols: "12",
                            sm: "6"
                          }, {
                            default: x(() => [
                              h(d, {
                                modelValue: e.city,
                                "onUpdate:modelValue": t[5] || (t[5] = (E) => e.city = E),
                                variant: "outlined",
                                density: "compact",
                                label: e.__("City"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ke("", !0) : (ne(), Fe(u, {
                            key: 2,
                            cols: "12",
                            sm: "6"
                          }, {
                            default: x(() => [
                              h(f, {
                                modelValue: e.country,
                                "onUpdate:modelValue": t[6] || (t[6] = (E) => e.country = E),
                                items: e.countries,
                                variant: "outlined",
                                density: "compact",
                                label: e.__("Country"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "items", "label", "bg-color"])
                            ]),
                            _: 1
                          })),
                          h(u, { cols: "6" }, {
                            default: x(() => [
                              h(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Email Id"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.email_id,
                                "onUpdate:modelValue": t[7] || (t[7] = (E) => e.email_id = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, { cols: "6" }, {
                            default: x(() => [
                              h(f, {
                                density: "compact",
                                label: "Gender",
                                items: e.genders,
                                modelValue: e.gender,
                                "onUpdate:modelValue": t[8] || (t[8] = (E) => e.gender = E),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["items", "modelValue", "bg-color"])
                            ]),
                            _: 1
                          }),
                          h(u, { cols: "6" }, {
                            default: x(() => [
                              h(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Referral Code"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.referral_code,
                                "onUpdate:modelValue": t[9] || (t[9] = (E) => e.referral_code = E)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, { cols: "6" }, {
                            default: x(() => [
                              h(d, {
                                modelValue: e.birthday,
                                "onUpdate:modelValue": [
                                  t[10] || (t[10] = (E) => e.birthday = E),
                                  i.formatBirthdayOnInput
                                ],
                                label: e.frappe._("Birthday (DD-MM-YYYY)"),
                                density: "compact",
                                clearable: "",
                                "hide-details": "",
                                color: "primary",
                                placeholder: "DD-MM-YYYY",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "onUpdate:modelValue", "bg-color"])
                            ]),
                            _: 1
                          }),
                          e.hideNonEssential ? ke("", !0) : (ne(), Fe(u, {
                            key: 3,
                            cols: "6"
                          }, {
                            default: x(() => [
                              h(_, {
                                clearable: "",
                                density: "compact",
                                "auto-select-first": "",
                                color: "primary",
                                label: e.frappe._("Customer Group") + " *",
                                modelValue: e.group,
                                "onUpdate:modelValue": t[11] || (t[11] = (E) => e.group = E),
                                items: e.groups,
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "no-data-text": e.__("Group not found"),
                                "hide-details": "",
                                required: ""
                              }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ke("", !0) : (ne(), Fe(u, {
                            key: 4,
                            cols: "6"
                          }, {
                            default: x(() => [
                              h(_, {
                                clearable: "",
                                density: "compact",
                                "auto-select-first": "",
                                color: "primary",
                                label: e.frappe._("Territory") + " *",
                                modelValue: e.territory,
                                "onUpdate:modelValue": t[12] || (t[12] = (E) => e.territory = E),
                                items: e.territorys,
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "no-data-text": e.__("Territory not found"),
                                "hide-details": "",
                                required: ""
                              }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text"])
                            ]),
                            _: 1
                          })),
                          e.loyalty_program ? (ne(), Fe(u, {
                            key: 5,
                            cols: "6"
                          }, {
                            default: x(() => [
                              h(d, {
                                modelValue: e.loyalty_program,
                                "onUpdate:modelValue": t[13] || (t[13] = (E) => e.loyalty_program = E),
                                label: e.frappe._("Loyalty Program"),
                                density: "compact",
                                readonly: "",
                                "hide-details": "",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })) : ke("", !0),
                          e.loyalty_points ? (ne(), Fe(u, {
                            key: 6,
                            cols: "6"
                          }, {
                            default: x(() => [
                              h(d, {
                                modelValue: e.loyalty_points,
                                "onUpdate:modelValue": t[14] || (t[14] = (E) => e.loyalty_points = E),
                                label: e.frappe._("Loyalty Points"),
                                density: "compact",
                                readonly: "",
                                "hide-details": "",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(p, null, {
                default: x(() => [
                  h(o),
                  h(b, {
                    color: "error",
                    theme: "dark",
                    onClick: i.confirm_close
                  }, {
                    default: x(() => [
                      ae(W(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  h(b, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"]),
      h(S, {
        modelValue: e.confirmDialog,
        "onUpdate:modelValue": t[17] || (t[17] = (E) => e.confirmDialog = E),
        "max-width": "400px"
      }, {
        default: x(() => [
          h(y, null, {
            default: x(() => [
              h(s, { class: "text-h5 text-primary" }, {
                default: x(() => [
                  ae(W(e.__("Confirm Close")), 1)
                ]),
                _: 1
              }),
              h(w, null, {
                default: x(() => [
                  ae(W(e.__("Are you sure you want to close? All entered data will be lost.")), 1)
                ]),
                _: 1
              }),
              h(p, null, {
                default: x(() => [
                  h(o),
                  h(b, {
                    color: "primary",
                    onClick: t[16] || (t[16] = (E) => e.confirmDialog = !1)
                  }, {
                    default: x(() => [
                      ae(W(e.__("Continue Editing")), 1)
                    ]),
                    _: 1
                  }),
                  h(b, {
                    color: "error",
                    onClick: i.confirmClose
                  }, {
                    default: x(() => [
                      ae(W(e.__("Yes, Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const MD = /* @__PURE__ */ rn(gee, [["render", wee], ["__scopeId", "data-v-a83f8575"]]), kee = {
  props: {
    pos_profile: Object
  },
  data: () => ({
    pos_profile: "",
    customers: [],
    customer: "",
    internalCustomer: null,
    tempSelectedCustomer: null,
    isMenuOpen: !1,
    readonly: !1,
    effectiveReadonly: !1,
    customer_info: {},
    loadingCustomers: !1,
    customers_loaded: !1,
    searchTerm: "",
    page: 0,
    pageSize: 200,
    hasMore: !0,
    nextCustomerStart: null,
    searchDebounce: null,
    // Track background loading state and pending searches
    isCustomerBackgroundLoading: !1,
    pendingCustomerSearch: null,
    loadProgress: 0,
    totalCustomerCount: 0,
    loadedCustomerCount: 0
  }),
  components: {
    UpdateCustomer: MD,
    LoadingOverlay: VD
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    filteredCustomers() {
      return this.isCustomerBackgroundLoading ? [] : this.customers;
    }
  },
  watch: {
    readonly(e) {
      this.effectiveReadonly = e && navigator.onLine;
    },
    customers_loaded(e) {
      e && this.eventBus.emit("customers_loaded");
    }
  },
  methods: {
    // Called when dropdown opens or closes
    onCustomerMenuToggle(e) {
      if (this.isMenuOpen = e, e)
        this.internalCustomer = null, this.$nextTick(() => {
          setTimeout(() => {
            const t = this.$refs.customerDropdown?.$el?.querySelector(
              ".v-overlay__content .v-select-list"
            );
            t && (t.scrollTop = 0, t.addEventListener("scroll", this.onCustomerScroll));
          }, 50);
        });
      else {
        const t = this.$refs.customerDropdown?.$el?.querySelector(
          ".v-overlay__content .v-select-list"
        );
        t && t.removeEventListener("scroll", this.onCustomerScroll), this.tempSelectedCustomer ? (this.internalCustomer = this.tempSelectedCustomer, this.customer = this.tempSelectedCustomer, this.eventBus.emit("update_customer", this.customer)) : this.customer && (this.internalCustomer = this.customer), this.tempSelectedCustomer = null;
      }
    },
    onCustomerScroll(e) {
      const t = e.target;
      t.scrollTop + t.clientHeight >= t.scrollHeight - 50 && this.loadMoreCustomers();
    },
    // Called when a customer is selected
    onCustomerChange(e) {
      if (e && e === this.customer) {
        this.internalCustomer = this.customer, this.eventBus.emit("show_message", {
          title: __("Customer already selected"),
          color: "error"
        });
        return;
      }
      this.tempSelectedCustomer = e, !this.isMenuOpen && e && (this.customer = e, this.eventBus.emit("update_customer", e));
    },
    onCustomerSearch(e) {
      if (this.isCustomerBackgroundLoading) {
        this.pendingCustomerSearch = e;
        return;
      }
      this.searchDebounce(e);
    },
    // Pressing Enter in input
    handleEnter(e) {
      const t = e.target.value?.toLowerCase() || "", n = this.customers.find((a) => a.customer_name?.toLowerCase().includes(t) || a.name?.toLowerCase().includes(t));
      n && (this.tempSelectedCustomer = n.name, this.internalCustomer = n.name, this.customer = n.name, this.eventBus.emit("update_customer", n.name), this.isMenuOpen = !1, e.target.blur());
    },
    async searchCustomers(e, t = !1) {
      try {
        await ta(), gt.isOpen() || await gt.open();
        let n = gt.table("customers");
        e && (n = gt.table("customers").where("customer_name").startsWithIgnoreCase(e).or("mobile_no").startsWithIgnoreCase(e).or("email_id").startsWithIgnoreCase(e).or("tax_id").startsWithIgnoreCase(e).or("name").startsWithIgnoreCase(e));
        const a = await n.offset(this.page * this.pageSize).limit(this.pageSize).toArray();
        return t ? this.customers.push(...a) : this.customers = a, this.hasMore = a.length === this.pageSize, this.hasMore && (this.page += 1), a.length;
      } catch (n) {
        return console.error("Failed to search customers", n), 0;
      }
    },
    async loadMoreCustomers() {
      this.loadingCustomers || await this.searchCustomers(this.searchTerm, !0) === this.pageSize || this.nextCustomerStart && (await this.backgroundLoadCustomers(this.nextCustomerStart, py()), await this.searchCustomers(this.searchTerm, !0));
    },
    async backgroundLoadCustomers(e, t) {
      const n = this.pageSize;
      this.isCustomerBackgroundLoading = !0;
      try {
        let a = e;
        for (; a; ) {
          const r = await this.fetchCustomerPage(a, t, n);
          if (await Rh(r), this.loadedCustomerCount += r.length, this.totalCustomerCount) {
            const i = Math.min(
              99,
              Math.round(this.loadedCustomerCount / this.totalCustomerCount * 100)
            );
            this.loadProgress = i, this.eventBus.emit("data-load-progress", { name: "customers", progress: i });
          }
          r.length === n ? (a = r[r.length - 1]?.name || null, this.nextCustomerStart = a) : (a = null, this.nextCustomerStart = null, Lh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers"));
        }
      } catch (a) {
        console.error("Failed to background load customers", a);
      } finally {
        this.isCustomerBackgroundLoading = !1, this.pendingCustomerSearch !== null && (this.searchDebounce(this.pendingCustomerSearch), this.searchDebounce.flush && this.searchDebounce.flush(), this.pendingCustomerSearch = null);
      }
    },
    async verifyServerCustomerCount() {
      if (!sn())
        try {
          const e = await SA(), n = (await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customers_count",
            args: { pos_profile: this.pos_profile.pos_profile }
          })).message || 0;
          if (typeof n == "number")
            if (this.totalCustomerCount = n, this.loadedCustomerCount = e, this.loadProgress = n ? Math.round(e / n * 100) : 0, this.eventBus.emit("data-load-progress", {
              name: "customers",
              progress: this.loadProgress
            }), n > e) {
              const a = py(), r = await this.fetchCustomerPage(null, a, this.pageSize);
              await Rh(r), this.loadedCustomerCount += r.length, this.totalCustomerCount && (this.loadProgress = Math.round(
                this.loadedCustomerCount / this.totalCustomerCount * 100
              ), this.eventBus.emit("data-load-progress", {
                name: "customers",
                progress: this.loadProgress
              }));
              const i = r.length === this.pageSize && r[r.length - 1]?.name || null;
              i ? this.backgroundLoadCustomers(i, a) : (Lh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers")), await this.searchCustomers(this.searchTerm);
            } else n < e && (await j9(), Lh(null), this.customers = [], await this.get_customer_names());
        } catch (e) {
          console.error("Error verifying customer count:", e);
        }
    },
    fetchCustomerPage(e, t, n) {
      return new Promise((a, r) => {
        frappe.call({
          method: "posawesome.posawesome.api.customers.get_customer_names",
          args: {
            pos_profile: this.pos_profile.pos_profile,
            modified_after: t,
            limit: n,
            start_after: e
          },
          callback: (i) => a(i.message || []),
          error: (i) => {
            console.error("Failed to fetch customers", i), r(i);
          }
        });
      });
    },
    async get_customer_names() {
      if (await SA() > 0) {
        this.customers_loaded = !0, await this.searchCustomers(this.searchTerm), await this.verifyServerCustomerCount();
        return;
      }
      const t = py();
      this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "customers", progress: 0 }), this.loadingCustomers = !0;
      try {
        try {
          const a = await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customers_count",
            args: { pos_profile: this.pos_profile.pos_profile }
          });
          this.totalCustomerCount = a.message || 0;
        } catch (a) {
          console.error("Failed to fetch customer count", a), this.totalCustomerCount = 0;
        }
        const n = await this.fetchCustomerPage(null, t, this.pageSize);
        await Rh(n), this.loadedCustomerCount = n.length, this.totalCustomerCount && (this.loadProgress = Math.round(
          this.loadedCustomerCount / this.totalCustomerCount * 100
        ), this.eventBus.emit("data-load-progress", {
          name: "customers",
          progress: this.loadProgress
        })), this.nextCustomerStart = n.length === this.pageSize && n[n.length - 1]?.name || null, this.nextCustomerStart ? this.backgroundLoadCustomers(this.nextCustomerStart, t) : (Lh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers")), this.customers_loaded = !0;
      } catch (n) {
        console.error("Failed to fetch customers:", n);
      } finally {
        this.loadingCustomers = !1, await this.searchCustomers(this.searchTerm);
      }
    },
    new_customer() {
      this.eventBus.emit("open_update_customer", null);
    },
    edit_customer() {
      this.eventBus.emit("open_update_customer", this.customer_info);
    }
  },
  created() {
    _u.then(async () => {
      await this.searchCustomers(""), this.effectiveReadonly = this.readonly && navigator.onLine;
    }), this.searchDebounce = Ni.debounce(async (e) => {
      this.searchTerm = e || "", this.page = 0, this.customers = [], this.hasMore = !0, await this.searchCustomers(this.searchTerm);
    }, 300), this.effectiveReadonly = this.readonly && navigator.onLine, this.$nextTick(() => {
      this.eventBus.on("register_pos_profile", async (e) => {
        await _u, this.pos_profile = e, await this.get_customer_names();
      }), this.eventBus.on("payments_register_pos_profile", async (e) => {
        await _u, this.pos_profile = e, await this.get_customer_names();
      }), this.eventBus.on("set_customer", (e) => {
        this.customer = e, this.internalCustomer = e;
      }), this.eventBus.on("add_customer_to_list", async (e) => {
        const t = this.customers.findIndex((n) => n.name === e.name);
        t !== -1 ? this.customers.splice(t, 1, e) : this.customers.push(e), await Rh([e]), this.customer = e.name, this.internalCustomer = e.name, this.eventBus.emit("update_customer", e.name);
      }), this.eventBus.on("set_customer_readonly", (e) => {
        this.readonly = e;
      }), this.eventBus.on("set_customer_info_to_edit", (e) => {
        this.customer_info = e;
      }), this.eventBus.on("fetch_customer_details", async () => {
        await this.get_customer_names();
      });
    });
  }
}, See = { class: "customer-input-wrapper" }, Cee = ["innerHTML"], Aee = ["innerHTML"], xee = ["innerHTML"], Tee = ["innerHTML"], Iee = ["innerHTML"], Eee = { class: "mt-4" };
function Pee(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-tooltip"), s = J("v-list-item-subtitle"), d = J("v-list-item"), u = J("v-autocomplete"), f = J("UpdateCustomer"), _ = J("LoadingOverlay");
  return ne(), Be("div", See, [
    h(u, {
      ref: "customerDropdown",
      class: "customer-autocomplete sleek-field",
      density: "compact",
      clearable: "",
      variant: "solo",
      color: "primary",
      label: e.frappe._("Customer"),
      modelValue: e.internalCustomer,
      "onUpdate:modelValue": [
        t[2] || (t[2] = (g) => e.internalCustomer = g),
        i.onCustomerChange
      ],
      items: i.filteredCustomers,
      "item-title": "customer_name",
      "item-value": "name",
      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
      "no-data-text": e.isCustomerBackgroundLoading ? e.__("Loading customer data...") : e.__("Customers not found"),
      "hide-details": "",
      customFilter: () => !0,
      disabled: e.effectiveReadonly || e.loadingCustomers,
      "menu-props": { closeOnContentClick: !1 },
      "onUpdate:menu": i.onCustomerMenuToggle,
      "onUpdate:search": i.onCustomerSearch,
      onKeydown: Rl(i.handleEnter, ["enter"]),
      "virtual-scroll": !0,
      "virtual-scroll-item-height": 48
    }, {
      "prepend-inner": x(() => [
        h(l, { text: "Edit customer" }, {
          activator: x(({ props: g }) => [
            h(o, He(g, {
              class: "icon-button",
              onMousedown: t[0] || (t[0] = Jn(() => {
              }, ["prevent", "stop"])),
              onClick: Jn(i.edit_customer, ["stop"])
            }), {
              default: x(() => t[3] || (t[3] = [
                ae(" mdi-account-edit ")
              ])),
              _: 2,
              __: [3]
            }, 1040, ["onClick"])
          ]),
          _: 1
        })
      ]),
      "append-inner": x(() => [
        h(l, { text: "Add new customer" }, {
          activator: x(({ props: g }) => [
            h(o, He(g, {
              class: "icon-button",
              onMousedown: t[1] || (t[1] = Jn(() => {
              }, ["prevent", "stop"])),
              onClick: Jn(i.new_customer, ["stop"])
            }), {
              default: x(() => t[4] || (t[4] = [
                ae(" mdi-plus ")
              ])),
              _: 2,
              __: [4]
            }, 1040, ["onClick"])
          ]),
          _: 1
        })
      ]),
      item: x(({ props: g, item: v }) => [
        h(d, Xn(Ca(g)), {
          default: x(() => [
            v.raw.customer_name !== v.raw.name ? (ne(), Fe(s, { key: 0 }, {
              default: x(() => [
                A("div", {
                  innerHTML: `ID: ${v.raw.name}`
                }, null, 8, Cee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            v.raw.tax_id ? (ne(), Fe(s, { key: 1 }, {
              default: x(() => [
                A("div", {
                  innerHTML: `TAX ID: ${v.raw.tax_id}`
                }, null, 8, Aee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            v.raw.email_id ? (ne(), Fe(s, { key: 2 }, {
              default: x(() => [
                A("div", {
                  innerHTML: `Email: ${v.raw.email_id}`
                }, null, 8, xee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            v.raw.mobile_no ? (ne(), Fe(s, { key: 3 }, {
              default: x(() => [
                A("div", {
                  innerHTML: `Mobile No: ${v.raw.mobile_no}`
                }, null, 8, Tee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            v.raw.primary_address ? (ne(), Fe(s, { key: 4 }, {
              default: x(() => [
                A("div", {
                  innerHTML: `Primary Address: ${v.raw.primary_address}`
                }, null, 8, Iee)
              ]),
              _: 2
            }, 1024)) : ke("", !0)
          ]),
          _: 2
        }, 1040)
      ]),
      _: 1
    }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "disabled", "onUpdate:menu", "onUpdate:modelValue", "onUpdate:search", "onKeydown"]),
    A("div", Eee, [
      h(f)
    ]),
    h(_, {
      loading: e.loadingCustomers || e.isCustomerBackgroundLoading,
      message: e.__("Loading customer data..."),
      progress: e.loadProgress
    }, null, 8, ["loading", "message", "progress"])
  ]);
}
const RD = /* @__PURE__ */ rn(kee, [["render", Pee], ["__scopeId", "data-v-17cef21d"]]), Oee = {
  props: {
    pos_profile: Object,
    order_types: Array,
    available_tables: Array,
    selected_order_type: [Object, String],
    selected_table: [Object, String],
    order_status: String,
    readonly: Boolean
  },
  data() {
    return {
      internal_selected_order_type: this.selected_order_type,
      internal_selected_table: this.selected_table,
      showValidation: !1
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    showTableSelection() {
      return this.internal_selected_order_type && this.internal_selected_order_type.requires_table && this.available_tables && this.available_tables.length > 0;
    },
    showValidationMessage() {
      return this.showValidation && this.validationMessage;
    },
    validationMessage() {
      return this.internal_selected_order_type ? this.showTableSelection && !this.internal_selected_table ? __("⚠️ Table selection required for {0} orders", [this.internal_selected_order_type.order_type_name]) : "" : __("⚠️ Order Type is mandatory - Please select before adding items");
    }
  },
  watch: {
    selected_order_type(e) {
      this.internal_selected_order_type = e;
    },
    selected_table(e) {
      this.internal_selected_table = e;
    },
    available_tables: {
      handler(e) {
        e && e.forEach((t) => {
          t.table_display = t.table_name ? `${t.table_number} - ${t.table_name}` : t.table_number;
        });
      },
      immediate: !0
    }
  },
  methods: {
    onOrderTypeUpdate(e) {
      this.$emit("update:selected_order_type", e), (!e || !e.requires_table) && (this.internal_selected_table = null, this.$emit("update:selected_table", null));
    },
    onTableUpdate(e) {
      this.$emit("update:selected_table", e);
    },
    getStatusColor(e) {
      return {
        Draft: "orange",
        Submitted: "blue",
        Preparing: "amber",
        Ready: "green",
        Served: "success",
        Billed: "purple",
        Cancelled: "error"
      }[e] || "grey";
    },
    getStatusIcon(e) {
      return {
        Draft: "mdi-file-document-outline",
        Submitted: "mdi-check-circle-outline",
        Preparing: "mdi-chef-hat",
        Ready: "mdi-bell-ring",
        Served: "mdi-silverware-fork-knife",
        Billed: "mdi-receipt",
        Cancelled: "mdi-cancel"
      }[e] || "mdi-information-outline";
    },
    validateSelection() {
      return this.showValidation = !0, this.internal_selected_order_type && (!this.showTableSelection || this.internal_selected_table);
    }
  }
}, Dee = { key: 0 };
function Bee(e, t, n, a, r, i) {
  const o = J("v-list-item-title"), l = J("v-list-item-subtitle"), s = J("v-list-item"), d = J("v-select"), u = J("v-col"), f = J("v-icon"), _ = J("v-chip"), g = J("v-alert"), v = J("v-row");
  return n.pos_profile.posa_enable_restaurant_mode ? (ne(), Fe(v, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      h(u, {
        cols: "12",
        sm: "6",
        class: "pb-0 mb-0 pr-2 pt-0"
      }, {
        default: x(() => [
          h(d, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Order Type") + " *",
            placeholder: e.frappe._("Select Order Type (Required)"),
            modelValue: r.internal_selected_order_type,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (w) => r.internal_selected_order_type = w),
              i.onOrderTypeUpdate
            ],
            items: n.order_types,
            "item-title": "order_type_name",
            "item-value": "name",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: Ee(["dark-field sleek-field", { "error-field": !r.internal_selected_order_type && r.showValidation }]),
            "no-data-text": e.__("No order types found"),
            "hide-details": "",
            disabled: n.readonly
          }, {
            item: x(({ props: w, item: b }) => [
              h(s, Xn(Ca(w)), {
                default: x(() => [
                  h(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: b.raw.order_type_name
                  }, null, 8, ["innerHTML"]),
                  b.raw.default_preparation_time ? (ne(), Fe(l, { key: 0 }, {
                    default: x(() => [
                      ae(W(e.__("Prep Time: {0} min", [b.raw.default_preparation_time])), 1)
                    ]),
                    _: 2
                  }, 1024)) : ke("", !0)
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "placeholder", "modelValue", "items", "bg-color", "class", "no-data-text", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      i.showTableSelection ? (ne(), Fe(u, {
        key: 0,
        cols: "12",
        sm: "6",
        class: "pb-0 mb-0 pl-2 pt-0"
      }, {
        default: x(() => [
          h(d, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Table Number") + " *",
            modelValue: r.internal_selected_table,
            "onUpdate:modelValue": [
              t[1] || (t[1] = (w) => r.internal_selected_table = w),
              i.onTableUpdate
            ],
            items: n.available_tables,
            "item-title": "table_display",
            "item-value": "table_number",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: Ee(["dark-field sleek-field", { "error-field": i.showTableSelection && !r.internal_selected_table && r.showValidation }]),
            "no-data-text": e.__("No tables available"),
            "hide-details": "",
            disabled: n.readonly
          }, {
            item: x(({ props: w, item: b }) => [
              h(s, Xn(Ca(w)), {
                default: x(() => [
                  h(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: b.raw.table_display
                  }, null, 8, ["innerHTML"]),
                  b.raw.capacity ? (ne(), Fe(l, { key: 0 }, {
                    default: x(() => [
                      ae(W(e.__("Capacity: {0} seats", [b.raw.capacity])) + " ", 1),
                      b.raw.location ? (ne(), Be("span", Dee, " • " + W(b.raw.location), 1)) : ke("", !0)
                    ]),
                    _: 2
                  }, 1024)) : ke("", !0)
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "modelValue", "items", "bg-color", "class", "no-data-text", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      })) : ke("", !0),
      n.order_status ? (ne(), Fe(u, {
        key: 1,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          h(_, {
            color: i.getStatusColor(n.order_status),
            size: "small",
            variant: "flat"
          }, {
            default: x(() => [
              h(f, {
                start: "",
                size: "small"
              }, {
                default: x(() => [
                  ae(W(i.getStatusIcon(n.order_status)), 1)
                ]),
                _: 1
              }),
              ae(" " + W(n.order_status), 1)
            ]),
            _: 1
          }, 8, ["color"])
        ]),
        _: 1
      })) : ke("", !0),
      i.showValidationMessage ? (ne(), Fe(u, {
        key: 2,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          h(g, {
            type: "error",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: x(() => [
              h(f, { start: "" }, {
                default: x(() => t[2] || (t[2] = [
                  ae("mdi-alert-circle")
                ])),
                _: 1,
                __: [2]
              }),
              ae(" " + W(i.validationMessage), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      })) : ke("", !0),
      r.internal_selected_order_type ? ke("", !0) : (ne(), Fe(u, {
        key: 3,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: x(() => [
          h(g, {
            type: "info",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: x(() => [
              h(f, { start: "" }, {
                default: x(() => t[3] || (t[3] = [
                  ae("mdi-information")
                ])),
                _: 1,
                __: [3]
              }),
              ae(" " + W(e.__("Order Type selection is mandatory before adding items to cart")), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      }))
    ]),
    _: 1
  })) : ke("", !0);
}
const Vee = /* @__PURE__ */ rn(Oee, [["render", Bee], ["__scopeId", "data-v-8fb642ef"]]), Mee = {
  props: {
    pos_profile: Object,
    delivery_charges: Array,
    selected_delivery_charge: [Object, String],
    delivery_charges_rate: Number,
    deliveryChargesFilter: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    readonly: Boolean
  },
  data() {
    return {
      internal_selected_delivery_charge: this.selected_delivery_charge
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    selected_delivery_charge(e) {
      this.internal_selected_delivery_charge = e;
    }
  },
  methods: {
    onUpdate(e) {
      this.$emit("update:selected_delivery_charge", e);
    }
  }
};
function Ree(e, t, n, a, r, i) {
  const o = J("v-list-item-title"), l = J("v-list-item-subtitle"), s = J("v-list-item"), d = J("v-autocomplete"), u = J("v-col"), f = J("v-text-field"), _ = J("v-row");
  return n.pos_profile.posa_use_delivery_charges ? (ne(), Fe(_, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      h(u, {
        cols: "12",
        sm: "8",
        class: "pb-0 mb-0 pr-0 pt-0"
      }, {
        default: x(() => [
          h(d, {
            density: "compact",
            clearable: "",
            "auto-select-first": "",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Delivery Charges"),
            modelValue: r.internal_selected_delivery_charge,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (g) => r.internal_selected_delivery_charge = g),
              i.onUpdate
            ],
            items: n.delivery_charges,
            "item-title": "name",
            "item-value": "name",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "no-data-text": e.__("Charges not found"),
            "hide-details": "",
            customFilter: n.deliveryChargesFilter,
            disabled: n.readonly
          }, {
            item: x(({ props: g, item: v }) => [
              h(s, Xn(Ca(g)), {
                default: x(() => [
                  h(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: v.raw.name
                  }, null, 8, ["innerHTML"]),
                  h(l, {
                    innerHTML: `Rate: ${v.raw.rate}`
                  }, null, 8, ["innerHTML"])
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "customFilter", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      h(u, {
        cols: "12",
        sm: "4",
        class: "pb-0 mb-0 pt-0"
      }, {
        default: x(() => [
          h(f, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Delivery Charges Rate"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            "model-value": n.formatCurrency(n.delivery_charges_rate),
            prefix: n.currencySymbol(n.pos_profile.currency),
            disabled: ""
          }, null, 8, ["label", "bg-color", "model-value", "prefix"])
        ]),
        _: 1
      })
    ]),
    _: 1
  })) : ke("", !0);
}
const Lee = /* @__PURE__ */ rn(Mee, [["render", Ree], ["__scopeId", "data-v-eede760a"]]), Fee = {
  props: {
    pos_profile: Object,
    posting_date_display: String,
    customer_balance: Number,
    formatCurrency: Function,
    priceList: String,
    priceLists: Array
  },
  data() {
    return {
      internal_posting_date_display: this.posting_date_display,
      internal_price_list: this.priceList
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    posting_date_display(e) {
      this.internal_posting_date_display = e;
    },
    priceList(e) {
      this.internal_price_list = e;
    }
  },
  methods: {
    onUpdate(e) {
      this.$emit("update:posting_date_display", e);
    },
    onPriceListUpdate(e) {
      this.$emit("update:priceList", e);
    }
  }
}, Nee = {
  key: 0,
  class: "balance-field ml-3"
}, Uee = { class: "balance-value" }, $ee = { class: "balance-field" }, qee = { class: "balance-value" };
function Hee(e, t, n, a, r, i) {
  const o = J("VueDatePicker"), l = J("v-col"), s = J("v-select"), d = J("v-row");
  return n.pos_profile.posa_allow_change_posting_date ? (ne(), Fe(d, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      h(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          h(o, {
            modelValue: r.internal_posting_date_display,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (u) => r.internal_posting_date_display = u),
              i.onUpdate
            ],
            "model-type": "format",
            format: "dd-MM-yyyy",
            "auto-apply": "",
            placeholder: e.frappe._("Posting Date"),
            dark: i.isDarkTheme,
            class: "dark-field sleek-field posting-date-input"
          }, null, 8, ["modelValue", "placeholder", "dark", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      n.pos_profile.posa_enable_price_list_dropdown ? (ne(), Fe(l, {
        key: 0,
        cols: "12",
        sm: "6",
        class: "pb-2 d-flex align-center"
      }, {
        default: x(() => [
          h(s, {
            density: "comfortable",
            variant: "solo",
            color: "primary",
            items: n.priceLists,
            label: e.frappe._("Price List"),
            modelValue: r.internal_price_list,
            "onUpdate:modelValue": [
              t[1] || (t[1] = (u) => r.internal_price_list = u),
              i.onPriceListUpdate
            ],
            "hide-details": "",
            class: "flex-grow-1 sleek-field"
          }, null, 8, ["items", "label", "modelValue", "onUpdate:modelValue"]),
          n.pos_profile.posa_show_customer_balance ? (ne(), Be("div", Nee, [
            A("strong", null, W(e.__("Customer Balance")) + ":", 1),
            A("span", Uee, W(n.formatCurrency(n.customer_balance)), 1)
          ])) : ke("", !0)
        ]),
        _: 1
      })) : n.pos_profile.posa_show_customer_balance ? (ne(), Fe(l, {
        key: 1,
        cols: "12",
        sm: "8",
        class: "pb-2 d-flex align-center"
      }, {
        default: x(() => [
          A("div", $ee, [
            A("strong", null, W(e.__("Customer Balance")) + ":", 1),
            A("span", qee, W(n.formatCurrency(n.customer_balance)), 1)
          ])
        ]),
        _: 1
      })) : ke("", !0)
    ]),
    _: 1
  })) : ke("", !0);
}
const zee = /* @__PURE__ */ rn(Fee, [["render", Hee], ["__scopeId", "data-v-59819b3f"]]), Wee = {
  props: {
    pos_profile: Object,
    selected_currency: String,
    plc_conversion_rate: Number,
    conversion_rate: Number,
    available_currencies: Array,
    isNumber: Function,
    price_list_currency: String
  },
  data() {
    return {
      internal_selected_currency: this.selected_currency,
      internal_plc_rate: this.plc_conversion_rate,
      internal_conversion_rate: this.conversion_rate
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    selected_currency(e) {
      this.internal_selected_currency = e;
    },
    plc_conversion_rate(e) {
      this.internal_plc_rate = e;
    },
    conversion_rate(e) {
      this.internal_conversion_rate = e;
    }
  },
  methods: {
    onCurrencyUpdate(e) {
      this.$emit("update:selected_currency", e);
    },
    onPlcRateChange() {
      this.$emit("update:plc_conversion_rate", this.internal_plc_rate);
    },
    onConversionChange() {
      this.$emit("update:conversion_rate", this.internal_conversion_rate);
    }
  }
};
function jee(e, t, n, a, r, i) {
  const o = J("v-select"), l = J("v-col"), s = J("v-text-field"), d = J("v-row");
  return n.pos_profile.posa_allow_multi_currency ? (ne(), Fe(d, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: x(() => [
      h(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          h(o, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Currency"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_selected_currency,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (u) => r.internal_selected_currency = u),
              i.onCurrencyUpdate
            ],
            items: n.available_currencies
          }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      h(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          h(s, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: "Price List " + n.price_list_currency + " to " + r.internal_selected_currency,
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_plc_rate,
            "onUpdate:modelValue": t[1] || (t[1] = (u) => r.internal_plc_rate = u),
            rules: [n.isNumber],
            onChange: i.onPlcRateChange
          }, null, 8, ["label", "bg-color", "modelValue", "rules", "onChange"])
        ]),
        _: 1
      }),
      h(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: x(() => [
          h(s, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Conversion Rate"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_conversion_rate,
            "onUpdate:modelValue": t[2] || (t[2] = (u) => r.internal_conversion_rate = u),
            rules: [n.isNumber],
            onChange: i.onConversionChange
          }, null, 8, ["label", "bg-color", "modelValue", "rules", "onChange"])
        ]),
        _: 1
      })
    ]),
    _: 1
  })) : ke("", !0);
}
const Yee = /* @__PURE__ */ rn(Wee, [["render", jee], ["__scopeId", "data-v-2d2e6b2b"]]), Kee = {
  props: {
    modelValue: Boolean
  },
  emits: ["update:modelValue", "confirm"],
  methods: {
    onConfirm() {
      this.$emit("confirm");
    }
  }
}, Gee = { class: "text-h5 text-primary" };
function Qee(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-card-text"), s = J("v-spacer"), d = J("v-btn"), u = J("v-card-actions"), f = J("v-card"), _ = J("v-dialog");
  return ne(), Fe(_, {
    "model-value": n.modelValue,
    "max-width": "330",
    "onUpdate:modelValue": t[1] || (t[1] = (g) => e.$emit("update:modelValue", g))
  }, {
    default: x(() => [
      h(f, null, {
        default: x(() => [
          h(o, { class: "text-h5" }, {
            default: x(() => [
              A("span", Gee, W(e.__("Cancel Sale ?")), 1)
            ]),
            _: 1
          }),
          h(l, null, {
            default: x(() => t[2] || (t[2] = [
              ae(' This would cancel and delete the current sale. To save it as Draft, click the "Save and Clear" instead. ')
            ])),
            _: 1,
            __: [2]
          }),
          h(u, null, {
            default: x(() => [
              h(s),
              h(d, {
                color: "error",
                onClick: i.onConfirm
              }, {
                default: x(() => [
                  ae(W(e.__("Yes, Cancel sale")), 1)
                ]),
                _: 1
              }, 8, ["onClick"]),
              h(d, {
                color: "warning",
                onClick: t[0] || (t[0] = (g) => e.$emit("update:modelValue", !1))
              }, {
                default: x(() => [
                  ae(W(e.__("Back")), 1)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["model-value"]);
}
const Jee = /* @__PURE__ */ rn(Kee, [["render", Qee]]), Xee = {
  props: {
    pos_profile: Object,
    invoice_doc: Object,
    items: Array,
    total_qty: [Number, String],
    additional_discount: Number,
    additional_discount_percentage: Number,
    total_items_discount_amount: Number,
    subtotal: Number,
    displayCurrency: String,
    formatFloat: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    discount_percentage_offer_name: [String, Number],
    isNumber: Function
  },
  data() {
    return {
      // Loading states for better UX
      saveLoading: !1,
      loadDraftsLoading: !1,
      selectOrderLoading: !1,
      showOrdersLoading: !1,
      submitOrderLoading: !1,
      cancelLoading: !1,
      returnsLoading: !1,
      printLoading: !1,
      paymentLoading: !1,
      kotPrintLoading: !1
    };
  },
  emits: [
    "update:additional_discount",
    "update:additional_discount_percentage",
    "update_discount_umount",
    "save-and-clear",
    "load-drafts",
    "select-order",
    "show-orders",
    "print-kot",
    "submit-order",
    "cancel-sale",
    "open-returns",
    "print-draft",
    "show-payment"
  ],
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    hide_qty_decimals() {
      try {
        const e = localStorage.getItem("posawesome_item_selector_settings");
        if (e)
          return !!JSON.parse(e).hide_qty_decimals;
      } catch (e) {
        console.error("Failed to load item selector settings:", e);
      }
      return !1;
    },
    hasExistingOrder() {
      return !!(this.invoice_doc && this.invoice_doc.name);
    }
  },
  methods: {
    // Debounced handlers for better performance
    handleAdditionalDiscountUpdate(e) {
      this.$emit("update:additional_discount", e);
    },
    handleAdditionalDiscountPercentageUpdate(e) {
      this.$emit("update:additional_discount_percentage", e);
    },
    async handleSaveAndClear() {
      this.saveLoading = !0;
      try {
        await this.$emit("save-and-clear");
      } finally {
        this.saveLoading = !1;
      }
    },
    async handleLoadDrafts() {
      this.loadDraftsLoading = !0;
      try {
        await this.$emit("load-drafts");
      } finally {
        this.loadDraftsLoading = !1;
      }
    },
    async handleSelectOrder() {
      this.selectOrderLoading = !0;
      try {
        await this.$emit("select-order");
      } finally {
        this.selectOrderLoading = !1;
      }
    },
    async handleShowOrders() {
      this.showOrdersLoading = !0;
      try {
        await this.$emit("show-orders");
      } finally {
        this.showOrdersLoading = !1;
      }
    },
    async handlePrintKOT() {
      this.kotPrintLoading = !0;
      try {
        await this.$emit("print-kot");
      } finally {
        this.kotPrintLoading = !1;
      }
    },
    async handleSubmitOrder() {
      this.submitOrderLoading = !0;
      try {
        await this.$emit("submit-order");
      } finally {
        this.submitOrderLoading = !1;
      }
    },
    async handleCancelSale() {
      this.cancelLoading = !0;
      try {
        await this.$emit("cancel-sale");
      } finally {
        this.cancelLoading = !1;
      }
    },
    async handleOpenReturns() {
      this.returnsLoading = !0;
      try {
        await this.$emit("open-returns");
      } finally {
        this.returnsLoading = !1;
      }
    },
    async handlePrintDraft() {
      this.printLoading = !0;
      try {
        await this.$emit("print-draft");
      } finally {
        this.printLoading = !1;
      }
    },
    async handleShowPayment() {
      this.paymentLoading = !0;
      try {
        await this.$emit("show-payment");
      } finally {
        this.paymentLoading = !1;
      }
    }
  }
};
function Zee(e, t, n, a, r, i) {
  const o = J("v-text-field"), l = J("v-col"), s = J("v-row"), d = J("v-btn"), u = J("v-card");
  return ne(), Fe(u, {
    class: Ee(["cards mb-0 mt-3 py-2 px-3 rounded-lg resizable", i.isDarkTheme ? "" : "bg-grey-lighten-4"]),
    style: Xe((i.isDarkTheme ? "background-color:#1E1E1E;" : "") + "resize: vertical; overflow: auto;")
  }, {
    default: x(() => [
      h(s, { dense: "" }, {
        default: x(() => [
          h(l, {
            cols: "12",
            md: "7"
          }, {
            default: x(() => [
              h(s, { dense: "" }, {
                default: x(() => [
                  h(l, { cols: "6" }, {
                    default: x(() => [
                      h(o, {
                        "model-value": n.formatFloat(n.total_qty, i.hide_qty_decimals ? 0 : void 0),
                        label: e.frappe._("Total Qty"),
                        "prepend-inner-icon": "mdi-format-list-numbered",
                        variant: "solo",
                        density: "compact",
                        readonly: "",
                        color: "accent"
                      }, null, 8, ["model-value", "label"])
                    ]),
                    _: 1
                  }),
                  n.pos_profile.posa_use_percentage_discount ? (ne(), Fe(l, {
                    key: 1,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(o, {
                        "model-value": n.additional_discount_percentage,
                        "onUpdate:modelValue": i.handleAdditionalDiscountPercentageUpdate,
                        onChange: t[0] || (t[0] = (f) => e.$emit("update_discount_umount")),
                        rules: [n.isNumber],
                        label: e.frappe._("Additional Discount %"),
                        suffix: "%",
                        "prepend-inner-icon": "mdi-percent",
                        variant: "solo",
                        density: "compact",
                        color: "warning",
                        disabled: !n.pos_profile.posa_allow_user_to_edit_additional_discount || !!n.discount_percentage_offer_name,
                        class: "summary-field"
                      }, null, 8, ["model-value", "onUpdate:modelValue", "rules", "label", "disabled"])
                    ]),
                    _: 1
                  })) : (ne(), Fe(l, {
                    key: 0,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(o, {
                        "model-value": n.additional_discount,
                        "onUpdate:modelValue": i.handleAdditionalDiscountUpdate,
                        label: e.frappe._("Additional Discount"),
                        "prepend-inner-icon": "mdi-cash-minus",
                        variant: "solo",
                        density: "compact",
                        color: "warning",
                        prefix: n.currencySymbol(n.pos_profile.currency),
                        disabled: !n.pos_profile.posa_allow_user_to_edit_additional_discount || !!n.discount_percentage_offer_name,
                        class: "summary-field"
                      }, null, 8, ["model-value", "onUpdate:modelValue", "label", "prefix", "disabled"])
                    ]),
                    _: 1
                  })),
                  h(l, { cols: "6" }, {
                    default: x(() => [
                      h(o, {
                        "model-value": n.formatCurrency(n.total_items_discount_amount),
                        prefix: n.currencySymbol(n.displayCurrency),
                        label: e.frappe._("Items Discounts"),
                        "prepend-inner-icon": "mdi-tag-minus",
                        variant: "solo",
                        density: "compact",
                        color: "warning",
                        readonly: "",
                        class: "summary-field"
                      }, null, 8, ["model-value", "prefix", "label"])
                    ]),
                    _: 1
                  }),
                  h(l, { cols: "6" }, {
                    default: x(() => [
                      h(o, {
                        "model-value": n.formatCurrency(n.subtotal),
                        prefix: n.currencySymbol(n.displayCurrency),
                        label: e.frappe._("Total"),
                        "prepend-inner-icon": "mdi-cash",
                        variant: "solo",
                        density: "compact",
                        readonly: "",
                        color: "success",
                        class: "summary-field"
                      }, null, 8, ["model-value", "prefix", "label"])
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ]),
            _: 1
          }),
          h(l, {
            cols: "12",
            md: "5"
          }, {
            default: x(() => [
              h(s, { dense: "" }, {
                default: x(() => [
                  h(l, { cols: "6" }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "accent",
                        theme: "dark",
                        "prepend-icon": n.pos_profile.posa_enable_restaurant_mode ? "mdi-chef-hat" : "mdi-content-save",
                        onClick: i.handleSaveAndClear,
                        class: "summary-btn",
                        loading: r.saveLoading
                      }, {
                        default: x(() => [
                          ae(W(n.pos_profile.posa_enable_restaurant_mode ? i.hasExistingOrder ? e.__("Update Order") : e.__("Make Order") : e.__("Save & Clear")), 1)
                        ]),
                        _: 1
                      }, 8, ["prepend-icon", "onClick", "loading"])
                    ]),
                    _: 1
                  }),
                  h(l, { cols: "6" }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "warning",
                        theme: "dark",
                        "prepend-icon": "mdi-file-document",
                        onClick: i.handleLoadDrafts,
                        class: "white-text-btn summary-btn",
                        loading: r.loadDraftsLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Load Drafts")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  }),
                  n.pos_profile.custom_allow_select_sales_order == 1 && !n.pos_profile.posa_enable_restaurant_mode ? (ne(), Fe(l, {
                    key: 0,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "info",
                        theme: "dark",
                        "prepend-icon": "mdi-book-search",
                        onClick: i.handleSelectOrder,
                        class: "summary-btn",
                        loading: r.selectOrderLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Select S.O")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })) : ke("", !0),
                  n.pos_profile.posa_enable_restaurant_mode ? (ne(), Fe(l, {
                    key: 1,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "info",
                        theme: "dark",
                        "prepend-icon": "mdi-format-list-bulleted",
                        onClick: i.handleShowOrders,
                        class: "summary-btn",
                        loading: r.showOrdersLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Show Orders")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })) : ke("", !0),
                  n.pos_profile.posa_enable_restaurant_mode && n.items && n.items.length > 0 ? (ne(), Fe(l, {
                    key: 2,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "orange-darken-1",
                        theme: "dark",
                        "prepend-icon": "mdi-silverware-fork-knife",
                        onClick: i.handlePrintKOT,
                        class: "summary-btn kot-btn",
                        loading: r.kotPrintLoading,
                        elevation: "2"
                      }, {
                        default: x(() => [
                          ae(W(e.__("🍳 Print KOT")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })) : ke("", !0),
                  n.pos_profile.posa_enable_restaurant_mode && !i.hasExistingOrder ? (ne(), Fe(l, {
                    key: 3,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "primary",
                        theme: "dark",
                        "prepend-icon": "mdi-check-circle",
                        onClick: i.handleSubmitOrder,
                        class: "summary-btn",
                        loading: r.submitOrderLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Submit Order")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })) : ke("", !0),
                  h(l, { cols: "6" }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "error",
                        theme: "dark",
                        "prepend-icon": "mdi-close-circle",
                        onClick: i.handleCancelSale,
                        class: "summary-btn",
                        loading: r.cancelLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Cancel Sale")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  }),
                  n.pos_profile.posa_allow_return == 1 ? (ne(), Fe(l, {
                    key: 4,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "secondary",
                        theme: "dark",
                        "prepend-icon": "mdi-backup-restore",
                        onClick: i.handleOpenReturns,
                        class: "summary-btn",
                        loading: r.returnsLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Sales Return")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })) : ke("", !0),
                  n.pos_profile.posa_allow_print_draft_invoices ? (ne(), Fe(l, {
                    key: 5,
                    cols: "6"
                  }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "primary",
                        theme: "dark",
                        "prepend-icon": "mdi-printer",
                        onClick: i.handlePrintDraft,
                        class: "summary-btn",
                        loading: r.printLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("Print Draft")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })) : ke("", !0),
                  h(l, { cols: "12" }, {
                    default: x(() => [
                      h(d, {
                        block: "",
                        color: "success",
                        theme: "dark",
                        size: "large",
                        "prepend-icon": "mdi-credit-card",
                        onClick: i.handleShowPayment,
                        class: "summary-btn pay-btn",
                        loading: r.paymentLoading
                      }, {
                        default: x(() => [
                          ae(W(e.__("PAY")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick", "loading"])
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["class", "style"]);
}
const ete = /* @__PURE__ */ rn(Xee, [["render", Zee], ["__scopeId", "data-v-ce1d50bd"]]), tte = {
  name: "ItemsTable",
  props: {
    headers: Array,
    items: Array,
    expanded: Array,
    itemsPerPage: Number,
    itemSearch: String,
    pos_profile: Object,
    invoice_doc: Object,
    invoiceType: String,
    stock_settings: Object,
    displayCurrency: String,
    formatFloat: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    isNumber: Function,
    setFormatedQty: Function,
    setFormatedCurrency: Function,
    calcPrices: Function,
    calcUom: Function,
    setSerialNo: Function,
    setBatchQty: Function,
    validateDueDate: Function,
    removeItem: Function,
    subtractOne: Function,
    addOne: Function,
    isReturnInvoice: Boolean,
    toggleOffer: Function,
    changePriceListRate: Function,
    isNegative: Function
  },
  data() {
    return {
      draggedItem: null,
      draggedIndex: null,
      dragOverIndex: null,
      isDragging: !1,
      pendingAdd: null,
      editNameDialog: !1,
      editNameTarget: null,
      editedName: ""
    };
  },
  computed: {
    headerProps() {
      return this.isDarkTheme ? { style: "background-color:#121212;color:#fff" } : {};
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    hide_qty_decimals() {
      try {
        const e = localStorage.getItem("posawesome_item_selector_settings");
        if (e)
          return !!JSON.parse(e).hide_qty_decimals;
      } catch (e) {
        console.error("Failed to load item selector settings:", e);
      }
      return !1;
    }
  },
  methods: {
    onDragOverFromSelector(e) {
      e.dataTransfer.types.includes("application/json") && (e.preventDefault(), e.dataTransfer.dropEffect = "copy");
    },
    onDragEnterFromSelector() {
      this.$emit("show-drop-feedback", !0);
    },
    onDragLeaveFromSelector(e) {
      e.currentTarget.contains(e.relatedTarget) || this.$emit("show-drop-feedback", !1);
    },
    onDropFromSelector(e) {
      e.preventDefault();
      try {
        const t = JSON.parse(e.dataTransfer.getData("application/json"));
        t.type === "item-from-selector" && (this.addItemDebounced(t.item), this.$emit("item-dropped", !1));
      } catch (t) {
        console.error("Error parsing drag data:", t);
      }
    },
    addItem(e) {
      const t = this.items.find(
        (n) => n.item_code === e.item_code && n.uom === e.uom && n.rate === e.rate
      );
      t ? (t.qty += e.qty || 1, t.amount = t.qty * t.rate, this.$forceUpdate()) : this.items.push({ ...e });
    },
    addItemDebounced: Ni.debounce(function(e) {
      this.addItem(e);
    }, 50),
    openNameDialog(e) {
      this.editNameTarget = e, this.editedName = e.item_name, this.editNameDialog = !0;
    },
    sanitizeName(e) {
      const t = document.createElement("div");
      return t.innerHTML = e, (t.textContent || t.innerText || "").trim().slice(0, 140);
    },
    saveItemName() {
      if (!this.editNameTarget) return;
      const e = this.sanitizeName(this.editedName);
      this.editNameTarget.original_item_name || (this.editNameTarget.original_item_name = this.editNameTarget.item_name), this.editNameTarget.item_name = e, this.editNameTarget.name_overridden = e !== this.editNameTarget.original_item_name ? 1 : 0, this.editNameDialog = !1;
    },
    resetItemName(e) {
      e && e.original_item_name && (e.item_name = e.original_item_name, e.name_overridden = 0), this.editNameTarget === e && (this.editedName = e.item_name);
    }
  }
}, nte = { class: "d-flex align-center" }, ate = { class: "currency-display" }, rte = { class: "currency-symbol" }, ite = { class: "currency-display" }, ote = { class: "currency-symbol" }, ste = { class: "amount-value" }, lte = { class: "currency-display" }, cte = { class: "currency-symbol" }, ute = { class: "currency-display" }, dte = { class: "currency-symbol" }, fte = ["colspan"], mte = { class: "expanded-content" }, hte = { class: "action-panel" }, _te = { class: "action-panel-header" }, pte = { class: "action-panel-title" }, vte = { class: "action-panel-content" }, gte = { class: "action-button-group" }, yte = { class: "action-label" }, bte = { class: "action-label" }, wte = { class: "action-button-group" }, kte = { class: "action-label" }, Ste = { class: "action-label" }, Cte = { class: "item-details-form" }, Ate = { class: "form-section" }, xte = { class: "section-header" }, Tte = { class: "section-title" }, Ite = { class: "form-row" }, Ete = { class: "form-field" }, Pte = { class: "form-field" }, Ote = {
  key: 0,
  class: "text-caption mt-1"
}, Dte = { class: "form-field" }, Bte = { class: "form-section" }, Vte = { class: "section-header" }, Mte = { class: "section-title" }, Rte = { class: "form-row" }, Lte = { class: "form-field" }, Fte = { class: "form-field" }, Nte = { class: "form-field" }, Ute = { class: "form-row" }, $te = { class: "form-field" }, qte = { class: "form-field" }, Hte = {
  key: 0,
  class: "form-field"
}, zte = { class: "form-section" }, Wte = { class: "section-header" }, jte = { class: "section-title" }, Yte = { class: "form-row" }, Kte = { class: "form-field" }, Gte = { class: "form-field" }, Qte = { class: "form-field" }, Jte = { class: "form-row" }, Xte = { class: "form-field" }, Zte = { class: "form-field" }, ene = {
  key: 0,
  class: "form-field"
}, tne = {
  key: 0,
  class: "form-section"
}, nne = { class: "section-header" }, ane = { class: "section-title" }, rne = { class: "form-row" }, ine = { class: "form-field" }, one = { class: "form-row" }, sne = { class: "form-field full-width" }, lne = {
  key: 1,
  class: "form-section"
}, cne = { class: "section-header" }, une = { class: "section-title" }, dne = { class: "form-row" }, fne = { class: "form-field" }, mne = { class: "form-field" }, hne = { class: "form-field" }, _ne = {
  key: 2,
  class: "form-section"
}, pne = { class: "section-header" }, vne = { class: "section-title" }, gne = { class: "form-row" }, yne = { class: "form-field" };
function bne(e, t, n, a, r, i) {
  const o = J("v-chip"), l = J("v-icon"), s = J("v-checkbox-btn"), d = J("v-btn"), u = J("v-text-field"), f = J("v-select"), _ = J("v-checkbox"), g = J("v-autocomplete"), v = J("v-list-item-title"), w = J("v-list-item-subtitle"), b = J("v-list-item"), p = J("VueDatePicker"), y = J("v-data-table-virtual"), S = J("v-card-title"), E = J("v-card-text"), C = J("v-spacer"), B = J("v-card-actions"), O = J("v-card"), D = J("v-dialog");
  return ne(), Be("div", {
    class: "my-0 py-0 overflow-y-auto items-table-container",
    style: { height: "calc(100% - 80px)", maxHeight: "calc(100% - 80px)" },
    onDragover: t[5] || (t[5] = (T) => i.onDragOverFromSelector(T)),
    onDrop: t[6] || (t[6] = (T) => i.onDropFromSelector(T)),
    onDragenter: t[7] || (t[7] = (...T) => i.onDragEnterFromSelector && i.onDragEnterFromSelector(...T)),
    onDragleave: t[8] || (t[8] = (...T) => i.onDragLeaveFromSelector && i.onDragLeaveFromSelector(...T))
  }, [
    h(y, {
      headers: n.headers,
      items: n.items,
      theme: e.$theme.current,
      expanded: n.expanded,
      "show-expand": "",
      "item-value": "posa_row_id",
      class: "modern-items-table elevation-2",
      "items-per-page": n.itemsPerPage,
      "expand-on-click": "",
      density: "compact",
      "hide-default-footer": "",
      "single-expand": !0,
      "header-props": i.headerProps,
      "no-data-text": e.__("No items in cart"),
      "onUpdate:expanded": t[0] || (t[0] = (T) => e.$emit(
        "update:expanded",
        T.map((P) => typeof P == "object" ? P.posa_row_id : P)
      )),
      search: n.itemSearch
    }, {
      "item.item_name": x(({ item: T }) => [
        A("div", nte, [
          A("span", null, W(T.item_name), 1),
          T.is_bundle ? (ne(), Fe(o, {
            key: 0,
            color: "secondary",
            size: "x-small",
            class: "ml-1"
          }, {
            default: x(() => [
              ae(W(e.__("Bundle")), 1)
            ]),
            _: 1
          })) : ke("", !0),
          T.name_overridden ? (ne(), Fe(o, {
            key: 1,
            color: "primary",
            size: "x-small",
            class: "ml-1"
          }, {
            default: x(() => [
              ae(W(e.__("Edited")), 1)
            ]),
            _: 1
          })) : ke("", !0),
          n.pos_profile.posa_allow_line_item_name_override && !T.posa_is_replace ? (ne(), Fe(l, {
            key: 2,
            size: "x-small",
            class: "ml-1",
            onClick: Jn((P) => i.openNameDialog(T), ["stop"])
          }, {
            default: x(() => t[9] || (t[9] = [
              ae("mdi-pencil")
            ])),
            _: 2,
            __: [9]
          }, 1032, ["onClick"])) : ke("", !0),
          T.name_overridden ? (ne(), Fe(l, {
            key: 3,
            size: "x-small",
            class: "ml-1",
            onClick: Jn((P) => i.resetItemName(T), ["stop"])
          }, {
            default: x(() => t[10] || (t[10] = [
              ae("mdi-undo")
            ])),
            _: 2,
            __: [10]
          }, 1032, ["onClick"])) : ke("", !0)
        ])
      ]),
      "item.qty": x(({ item: T }) => [
        A("div", {
          class: Ee(["amount-value", { "negative-number": n.isNegative(T.qty) }])
        }, W(n.formatFloat(T.qty, i.hide_qty_decimals ? 0 : void 0)), 3)
      ]),
      "item.rate": x(({ item: T }) => [
        A("div", ate, [
          A("span", rte, W(n.currencySymbol(n.displayCurrency)), 1),
          A("span", {
            class: Ee(["amount-value", { "negative-number": n.isNegative(T.rate) }])
          }, W(n.formatCurrency(T.rate)), 3)
        ])
      ]),
      "item.amount": x(({ item: T }) => [
        A("div", ite, [
          A("span", ote, W(n.currencySymbol(n.displayCurrency)), 1),
          A("span", {
            class: Ee(["amount-value", { "negative-number": n.isNegative(T.qty * T.rate) }])
          }, W(n.formatCurrency(T.qty * T.rate)), 3)
        ])
      ]),
      "item.discount_value": x(({ item: T }) => [
        A("div", ste, W(n.formatFloat(
          T.discount_percentage || (T.price_list_rate ? T.discount_amount / T.price_list_rate * 100 : 0)
        )) + "% ", 1)
      ]),
      "item.discount_amount": x(({ item: T }) => [
        A("div", lte, [
          A("span", cte, W(n.currencySymbol(n.displayCurrency)), 1),
          A("span", {
            class: Ee(["amount-value", { "negative-number": n.isNegative(T.discount_amount || 0) }])
          }, W(n.formatCurrency(T.discount_amount || 0)), 3)
        ])
      ]),
      "item.price_list_rate": x(({ item: T }) => [
        A("div", ute, [
          A("span", dte, W(n.currencySymbol(n.displayCurrency)), 1),
          A("span", {
            class: Ee(["amount-value", { "negative-number": n.isNegative(T.price_list_rate) }])
          }, W(n.formatCurrency(T.price_list_rate)), 3)
        ])
      ]),
      "item.posa_is_offer": x(({ item: T }) => [
        h(s, {
          modelValue: T.posa_is_offer,
          "onUpdate:modelValue": (P) => T.posa_is_offer = P,
          class: "center",
          onChange: (P) => n.toggleOffer(T)
        }, null, 8, ["modelValue", "onUpdate:modelValue", "onChange"])
      ]),
      "expanded-row": x(({ item: T }) => [
        A("td", {
          colspan: n.headers.length,
          class: "ma-0 pa-0"
        }, [
          A("div", mte, [
            A("div", hte, [
              A("div", _te, [
                h(l, {
                  size: "small",
                  class: "action-panel-icon"
                }, {
                  default: x(() => t[11] || (t[11] = [
                    ae("mdi-cog")
                  ])),
                  _: 1,
                  __: [11]
                }),
                A("span", pte, W(e.__("Quick Actions")), 1)
              ]),
              A("div", vte, [
                A("div", gte, [
                  h(d, {
                    disabled: !!T.posa_is_replace,
                    size: "large",
                    color: "error",
                    variant: "tonal",
                    class: "item-action-btn delete-btn",
                    onClick: Jn((P) => n.removeItem(T), ["stop"])
                  }, {
                    default: x(() => [
                      h(l, { size: "large" }, {
                        default: x(() => t[12] || (t[12] = [
                          ae("mdi-trash-can-outline")
                        ])),
                        _: 1,
                        __: [12]
                      }),
                      A("span", yte, W(e.__("Remove")), 1)
                    ]),
                    _: 2
                  }, 1032, ["disabled", "onClick"]),
                  T.is_bundle ? (ne(), Fe(d, {
                    key: 0,
                    disabled: !!T.posa_is_replace,
                    size: "large",
                    color: "primary",
                    variant: "tonal",
                    class: "item-action-btn bundle-btn",
                    onClick: Jn((P) => e.$emit("view-packed", T.bundle_id), ["stop"])
                  }, {
                    default: x(() => [
                      h(l, { size: "large" }, {
                        default: x(() => t[13] || (t[13] = [
                          ae("mdi-package-variant")
                        ])),
                        _: 1,
                        __: [13]
                      }),
                      A("span", bte, W(e.__("Items Included")), 1)
                    ]),
                    _: 2
                  }, 1032, ["disabled", "onClick"])) : ke("", !0)
                ]),
                A("div", wte, [
                  h(d, {
                    disabled: !!T.posa_is_replace,
                    size: "large",
                    color: "warning",
                    variant: "tonal",
                    class: "item-action-btn minus-btn",
                    onClick: Jn((P) => n.subtractOne(T), ["stop"])
                  }, {
                    default: x(() => [
                      h(l, { size: "large" }, {
                        default: x(() => t[14] || (t[14] = [
                          ae("mdi-minus-circle-outline")
                        ])),
                        _: 1,
                        __: [14]
                      }),
                      A("span", kte, W(e.__("Decrease")), 1)
                    ]),
                    _: 2
                  }, 1032, ["disabled", "onClick"]),
                  h(d, {
                    disabled: !!T.posa_is_replace || T.is_stock_item && (!n.stock_settings.allow_negative_stock || n.pos_profile.posa_block_sale_beyond_available_qty) && T.max_qty !== void 0 && T.qty >= T.max_qty,
                    size: "large",
                    color: "success",
                    variant: "tonal",
                    class: "item-action-btn plus-btn",
                    onClick: Jn((P) => n.addOne(T), ["stop"])
                  }, {
                    default: x(() => [
                      h(l, { size: "large" }, {
                        default: x(() => t[15] || (t[15] = [
                          ae("mdi-plus-circle-outline")
                        ])),
                        _: 1,
                        __: [15]
                      }),
                      A("span", Ste, W(e.__("Increase")), 1)
                    ]),
                    _: 2
                  }, 1032, ["disabled", "onClick"])
                ])
              ])
            ]),
            A("div", Cte, [
              A("div", Ate, [
                A("div", xte, [
                  h(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[16] || (t[16] = [
                      ae("mdi-information-outline")
                    ])),
                    _: 1,
                    __: [16]
                  }),
                  A("span", Tte, W(e.__("Basic Information")), 1)
                ]),
                A("div", Ite, [
                  A("div", Ete, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Item Code"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.item_code,
                      "onUpdate:modelValue": (P) => T.item_code = P,
                      disabled: "",
                      "prepend-inner-icon": "mdi-barcode"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  A("div", Pte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.qty, i.hide_qty_decimals ? 0 : void 0),
                      onChange: (P) => n.setFormatedQty(T, "qty", null, !1, P.target.value),
                      rules: [n.isNumber],
                      disabled: !!T.posa_is_replace,
                      "prepend-inner-icon": "mdi-numeric"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "rules", "disabled"]),
                    T.is_stock_item && T.max_qty !== void 0 ? (ne(), Be("div", Ote, W(e.__("In stock: {0}", [
                      n.formatFloat(
                        T.max_qty,
                        i.hide_qty_decimals ? 0 : void 0
                      )
                    ])), 1)) : ke("", !0)
                  ]),
                  A("div", Dte, [
                    h(f, {
                      density: "compact",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("UOM"),
                      modelValue: T.uom,
                      "onUpdate:modelValue": [(P) => T.uom = P, (P) => n.calcUom(T, P)],
                      items: T.item_uoms,
                      variant: "outlined",
                      "item-title": "uom",
                      "item-value": "uom",
                      "hide-details": "",
                      disabled: !!T.posa_is_replace || n.isReturnInvoice && n.invoice_doc.return_against,
                      "prepend-inner-icon": "mdi-weight"
                    }, null, 8, ["bg-color", "label", "modelValue", "onUpdate:modelValue", "items", "disabled"])
                  ])
                ])
              ]),
              A("div", Bte, [
                A("div", Vte, [
                  h(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[17] || (t[17] = [
                      ae("mdi-currency-usd")
                    ])),
                    _: 1,
                    __: [17]
                  }),
                  A("span", Mte, W(e.__("Pricing & Discounts")), 1)
                ]),
                A("div", Rte, [
                  A("div", Lte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "rate",
                      label: e.frappe._("Rate"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.rate),
                      onChange: (P) => [
                        n.setFormatedCurrency(T, "rate", null, !1, P),
                        n.calcPrices(T, P.target.value, P)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_rate || !!T.posa_is_replace || !!T.posa_offer_applied,
                      "prepend-inner-icon": "mdi-currency-usd"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ]),
                  A("div", Fte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "discount_percentage",
                      label: e.frappe._("Discount %"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.discount_percentage || 0),
                      onChange: (P) => [
                        n.setFormatedCurrency(
                          T,
                          "discount_percentage",
                          null,
                          !1,
                          P
                        ),
                        n.calcPrices(T, P.target.value, P)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_item_discount || !!T.posa_is_replace || !!T.posa_offer_applied,
                      "prepend-inner-icon": "mdi-percent"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ]),
                  A("div", Nte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "discount_amount",
                      label: e.frappe._("Discount Amount"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.discount_amount || 0),
                      onChange: (P) => [
                        n.setFormatedCurrency(
                          T,
                          "discount_amount",
                          null,
                          !1,
                          P
                        ),
                        n.calcPrices(T, P.target.value, P)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_item_discount || !!T.posa_is_replace || !!T.posa_offer_applied,
                      "prepend-inner-icon": "mdi-tag-minus"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ])
                ]),
                A("div", Ute, [
                  A("div", $te, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Price List Rate"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.price_list_rate || 0),
                      disabled: !n.pos_profile.posa_allow_price_list_rate_change,
                      "prepend-inner-icon": "mdi-format-list-numbered",
                      prefix: n.currencySymbol(n.pos_profile.currency),
                      onChange: (P) => n.changePriceListRate(T)
                    }, null, 8, ["label", "bg-color", "model-value", "disabled", "prefix", "onChange"])
                  ]),
                  A("div", qte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Total Amount"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(T.qty * T.rate),
                      disabled: "",
                      "prepend-inner-icon": "mdi-calculator"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  n.pos_profile.posa_allow_price_list_rate_change ? (ne(), Be("div", Hte, [
                    h(d, {
                      size: "small",
                      color: "primary",
                      variant: "outlined",
                      class: "change-price-btn",
                      onClick: Jn((P) => n.changePriceListRate(T), ["stop"])
                    }, {
                      default: x(() => [
                        h(l, {
                          size: "small",
                          class: "mr-1"
                        }, {
                          default: x(() => t[18] || (t[18] = [
                            ae("mdi-pencil")
                          ])),
                          _: 1,
                          __: [18]
                        }),
                        ae(" " + W(e.__("Change Price")), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ])) : ke("", !0)
                ])
              ]),
              A("div", zte, [
                A("div", Wte, [
                  h(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[19] || (t[19] = [
                      ae("mdi-warehouse")
                    ])),
                    _: 1,
                    __: [19]
                  }),
                  A("span", jte, W(e.__("Stock Information")), 1)
                ]),
                A("div", Yte, [
                  A("div", Kte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Available QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.actual_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-package-variant"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  A("div", Gte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Stock QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.stock_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-scale-balance"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  A("div", Qte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Stock UOM"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.stock_uom,
                      "onUpdate:modelValue": (P) => T.stock_uom = P,
                      disabled: "",
                      "prepend-inner-icon": "mdi-weight-pound"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ])
                ]),
                A("div", Jte, [
                  A("div", Xte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Warehouse"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.warehouse,
                      "onUpdate:modelValue": (P) => T.warehouse = P,
                      disabled: "",
                      "prepend-inner-icon": "mdi-warehouse"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  A("div", Zte, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Group"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.item_group,
                      "onUpdate:modelValue": (P) => T.item_group = P,
                      disabled: "",
                      "prepend-inner-icon": "mdi-folder-outline"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  T.posa_offer_applied ? (ne(), Be("div", ene, [
                    h(_, {
                      density: "compact",
                      label: e.frappe._("Offer Applied"),
                      modelValue: T.posa_offer_applied,
                      "onUpdate:modelValue": (P) => T.posa_offer_applied = P,
                      readonly: "",
                      "hide-details": "",
                      class: "mt-1",
                      color: "success"
                    }, null, 8, ["label", "modelValue", "onUpdate:modelValue"])
                  ])) : ke("", !0)
                ])
              ]),
              T.has_serial_no || T.serial_no ? (ne(), Be("div", tne, [
                A("div", nne, [
                  h(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[20] || (t[20] = [
                      ae("mdi-barcode-scan")
                    ])),
                    _: 1,
                    __: [20]
                  }),
                  A("span", ane, W(e.__("Serial Numbers")), 1)
                ]),
                A("div", rne, [
                  A("div", ine, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Serial No QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.serial_no_selected_count,
                      "onUpdate:modelValue": (P) => T.serial_no_selected_count = P,
                      type: "number",
                      disabled: "",
                      "prepend-inner-icon": "mdi-counter"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ])
                ]),
                A("div", one, [
                  A("div", sne, [
                    h(g, {
                      modelValue: T.serial_no_selected,
                      "onUpdate:modelValue": [(P) => T.serial_no_selected = P, (P) => n.setSerialNo(T)],
                      items: T.serial_no_data,
                      "item-title": "serial_no",
                      "item-value": "serial_no",
                      variant: "outlined",
                      density: "compact",
                      chips: "",
                      color: "primary",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("Serial No"),
                      multiple: "",
                      "prepend-inner-icon": "mdi-barcode"
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "items", "bg-color", "label"])
                  ])
                ])
              ])) : ke("", !0),
              T.has_batch_no || T.batch_no ? (ne(), Be("div", lne, [
                A("div", cne, [
                  h(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[21] || (t[21] = [
                      ae("mdi-package-variant-closed")
                    ])),
                    _: 1,
                    __: [21]
                  }),
                  A("span", une, W(e.__("Batch Information")), 1)
                ]),
                A("div", dne, [
                  A("div", fne, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Batch No. Available QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(T.actual_batch_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-package-variant"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  A("div", mne, [
                    h(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Batch No Expiry Date"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: T.batch_no_expiry_date,
                      "onUpdate:modelValue": (P) => T.batch_no_expiry_date = P,
                      disabled: "",
                      "prepend-inner-icon": "mdi-calendar-clock"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  A("div", hne, [
                    h(g, {
                      modelValue: T.batch_no,
                      "onUpdate:modelValue": [(P) => T.batch_no = P, (P) => n.setBatchQty(T, P)],
                      items: T.batch_no_data,
                      "item-title": "batch_no",
                      variant: "outlined",
                      density: "compact",
                      color: "primary",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("Batch No"),
                      "hide-details": "",
                      "prepend-inner-icon": "mdi-package-variant-closed"
                    }, {
                      item: x(({ props: P, item: I }) => [
                        h(b, Xn(Ca(P)), {
                          default: x(() => [
                            h(v, {
                              innerHTML: I.raw.batch_no
                            }, null, 8, ["innerHTML"]),
                            h(w, {
                              innerHTML: `Available QTY  '${I.raw.batch_qty}' - Expiry Date ${I.raw.expiry_date}`
                            }, null, 8, ["innerHTML"])
                          ]),
                          _: 2
                        }, 1040)
                      ]),
                      _: 2
                    }, 1032, ["modelValue", "onUpdate:modelValue", "items", "bg-color", "label"])
                  ])
                ])
              ])) : ke("", !0),
              n.pos_profile.posa_allow_sales_order && n.invoiceType == "Order" ? (ne(), Be("div", _ne, [
                A("div", pne, [
                  h(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: x(() => t[22] || (t[22] = [
                      ae("mdi-calendar-check")
                    ])),
                    _: 1,
                    __: [22]
                  }),
                  A("span", vne, W(e.__("Delivery Information")), 1)
                ]),
                A("div", gne, [
                  A("div", yne, [
                    h(p, {
                      modelValue: T.posa_delivery_date,
                      "onUpdate:modelValue": [(P) => T.posa_delivery_date = P, (P) => n.validateDueDate(T)],
                      "model-type": "format",
                      format: "dd-MM-yyyy",
                      "min-date": /* @__PURE__ */ new Date(),
                      "auto-apply": "",
                      dark: i.isDarkTheme
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "min-date", "dark"])
                  ])
                ])
              ])) : ke("", !0)
            ])
          ])
        ], 8, fte)
      ]),
      _: 1
    }, 8, ["headers", "items", "theme", "expanded", "items-per-page", "header-props", "no-data-text", "search"]),
    h(D, {
      modelValue: r.editNameDialog,
      "onUpdate:modelValue": t[4] || (t[4] = (T) => r.editNameDialog = T),
      "max-width": "400"
    }, {
      default: x(() => [
        h(O, null, {
          default: x(() => [
            h(S, null, {
              default: x(() => [
                ae(W(e.__("Item Name")), 1)
              ]),
              _: 1
            }),
            h(E, null, {
              default: x(() => [
                h(u, {
                  modelValue: r.editedName,
                  "onUpdate:modelValue": t[1] || (t[1] = (T) => r.editedName = T),
                  maxlength: 140
                }, null, 8, ["modelValue"])
              ]),
              _: 1
            }),
            h(B, null, {
              default: x(() => [
                r.editNameTarget && r.editNameTarget.name_overridden ? (ne(), Fe(d, {
                  key: 0,
                  variant: "text",
                  onClick: t[2] || (t[2] = (T) => i.resetItemName(r.editNameTarget))
                }, {
                  default: x(() => [
                    ae(W(e.__("Reset")), 1)
                  ]),
                  _: 1
                })) : ke("", !0),
                h(C),
                h(d, {
                  variant: "text",
                  onClick: t[3] || (t[3] = (T) => r.editNameDialog = !1)
                }, {
                  default: x(() => [
                    ae(W(e.__("Cancel")), 1)
                  ]),
                  _: 1
                }),
                h(d, {
                  color: "primary",
                  variant: "text",
                  onClick: i.saveItemName
                }, {
                  default: x(() => [
                    ae(W(e.__("Save")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ], 32);
}
const wne = /* @__PURE__ */ rn(tte, [["render", bne], ["__scopeId", "data-v-10bbbd44"]]);
function kne() {
  return {
    setSerialNo: (n, a) => {
      console.log(n), n.has_serial_no && (n.serial_no = "", n.serial_no_selected.forEach((r) => {
        n.serial_no += r + `
`;
      }), n.serial_no_selected_count = n.serial_no_selected.length, n.serial_no_selected_count != n.stock_qty && (n.qty = n.serial_no_selected_count, a && a()));
    },
    setBatchQty: (n, a, r = !0, i) => {
      console.log("Setting batch quantity:", n, a);
      const o = i.items.filter(
        (d) => d.item_code == n.item_code && d.posa_row_id != n.posa_row_id
      ), l = {};
      n.batch_no_data.forEach((d) => {
        l[d.batch_no] = {
          ...d,
          used_qty: 0,
          remaining_qty: d.batch_qty
        }, o.forEach((u) => {
          u.batch_no && u.batch_no == d.batch_no && (l[d.batch_no].used_qty += u.qty, l[d.batch_no].remaining_qty -= u.qty, l[d.batch_no].batch_qty -= u.qty);
        });
      });
      const s = Object.values(l).filter((d) => d.remaining_qty > 0).sort((d, u) => d.expiry_date && u.expiry_date ? new Date(d.expiry_date) - new Date(u.expiry_date) : d.expiry_date ? -1 : u.expiry_date ? 1 : d.manufacturing_date && u.manufacturing_date ? new Date(d.manufacturing_date) - new Date(u.manufacturing_date) : d.manufacturing_date ? -1 : u.manufacturing_date ? 1 : u.remaining_qty - d.remaining_qty);
      if (s.length > 0) {
        let d = null;
        if (a && (d = s.find((u) => u.batch_no == a)), d || (d = s[0]), n.batch_no = d.batch_no, n.actual_batch_qty = d.batch_qty, n.batch_no_expiry_date = d.expiry_date, d.batch_price) {
          n.base_batch_price = d.batch_price;
          const u = i.price_list_currency || i.pos_profile.currency;
          i.selected_currency !== u ? n.batch_price = i.flt(
            d.batch_price / i.exchange_rate,
            i.currency_precision
          ) : n.batch_price = d.batch_price, n.base_price_list_rate = n.base_batch_price, n.base_rate = n.base_batch_price, i.selected_currency !== u ? (n.price_list_rate = n.batch_price, n.rate = n.batch_price) : (n.price_list_rate = n.base_batch_price, n.rate = n.base_batch_price), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0, n.amount = i.flt(n.qty * n.rate, i.currency_precision), n.base_amount = i.flt(n.qty * n.base_rate, i.currency_precision), console.log("Updated batch prices:", {
            base_batch_price: n.base_batch_price,
            batch_price: n.batch_price,
            rate: n.rate,
            base_rate: n.base_rate,
            price_list_rate: n.price_list_rate,
            exchange_rate: i.exchange_rate
          });
        } else r && i.update_item_detail && (n.batch_price = null, n.base_batch_price = null, i.update_item_detail(n));
      } else
        n.batch_no = null, n.actual_batch_qty = null, n.batch_no_expiry_date = null, n.batch_price = null, n.base_batch_price = null;
      n.batch_no_data = s, i.forceUpdate && i.forceUpdate();
    }
  };
}
function Sne() {
  return {
    updateDiscountAmount: (a) => {
      const r = flt(a.additional_discount_percentage);
      if (r < -100 || r > 100) {
        a.additional_discount_percentage = 0, a.additional_discount = 0;
        return;
      }
      a.Total && a.Total !== 0 ? a.additional_discount = a.Total * r / 100 : a.additional_discount = 0;
    },
    calcPrices: (a, r, i, o) => {
      if (!i?.target?.id || !a) return;
      const l = i.target.id;
      let s = flt(r, o.currency_precision);
      try {
        l === "rate" && (a._manual_rate_set = !0), s < 0 && (s = 0, o.eventBus.emit("show_message", {
          title: __("Negative values not allowed"),
          color: "error"
        }));
        const d = o.price_list_currency || o.pos_profile.currency, u = o.selected_currency !== d ? o.flt(a.price_list_rate / o.exchange_rate, o.currency_precision) : a.price_list_rate;
        switch (l) {
          case "rate":
            a.base_rate = o.flt(
              s / o.exchange_rate,
              o.currency_precision
            ), a.rate = s, a.discount_amount = o.flt(
              u - a.rate,
              o.currency_precision
            ), a.base_discount_amount = o.flt(
              a.price_list_rate - a.base_rate,
              o.currency_precision
            ), u && (a.discount_percentage = o.flt(
              a.discount_amount / u * 100,
              o.float_precision
            ));
            break;
          case "discount_amount":
            s = Math.min(s, u), a.base_discount_amount = o.flt(
              s / o.exchange_rate,
              o.currency_precision
            ), a.discount_amount = s, a.rate = o.flt(
              u - a.discount_amount,
              o.currency_precision
            ), a.base_rate = o.flt(
              a.price_list_rate - a.base_discount_amount,
              o.currency_precision
            ), u ? a.discount_percentage = o.flt(
              a.discount_amount / u * 100,
              o.float_precision
            ) : a.discount_percentage = 0;
            break;
          case "discount_percentage":
            s = Math.min(s, 100), a.discount_percentage = o.flt(s, o.float_precision), a.discount_amount = o.flt(
              u * a.discount_percentage / 100,
              o.currency_precision
            ), a.base_discount_amount = o.flt(
              a.price_list_rate * a.discount_percentage / 100,
              o.currency_precision
            ), a.rate = o.flt(
              u - a.discount_amount,
              o.currency_precision
            ), a.base_rate = o.flt(
              a.price_list_rate - a.base_discount_amount,
              o.currency_precision
            );
            break;
        }
        a.rate < 0 && (a.rate = 0, a.base_rate = 0, a.discount_amount = u, a.base_discount_amount = a.price_list_rate, a.discount_percentage = 100), o.calc_stock_qty && o.calc_stock_qty(a, a.qty), o.forceUpdate && o.forceUpdate();
      } catch (d) {
        console.error("Error calculating prices:", d), o.eventBus.emit("show_message", {
          title: __("Error calculating prices"),
          color: "error"
        });
      }
    },
    calcItemPrice: (a, r) => {
      if (a._skip_calc) {
        a._skip_calc = !1;
        return;
      }
      if (a.locked_price) {
        a.amount = r.flt(a.qty * a.rate, r.currency_precision);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? a.base_amount = r.flt(
          a.amount / r.exchange_rate,
          r.currency_precision
        ) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
        return;
      }
      if (a.posa_offer_applied) {
        a.amount = r.flt(a.qty * a.rate, r.currency_precision);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? a.base_amount = r.flt(
          a.amount / r.exchange_rate,
          r.currency_precision
        ) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
        return;
      }
      if (a.price_list_rate) {
        a.base_price_list_rate || (a.base_price_list_rate = a.price_list_rate, a.base_rate = a.rate);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? (a.price_list_rate = r.flt(
          a.base_price_list_rate / r.exchange_rate,
          r.currency_precision
        ), a.rate = r.flt(
          a.base_rate / r.exchange_rate,
          r.currency_precision
        )) : (a.price_list_rate = a.base_price_list_rate, a.rate = a.base_rate);
      }
      if (a.discount_percentage) {
        const o = a.price_list_rate, l = r.flt(
          o * a.discount_percentage / 100,
          r.currency_precision
        );
        a.discount_amount = l, a.rate = r.flt(o - l, r.currency_precision);
        const s = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== s ? a.base_discount_amount = r.flt(
          l / r.exchange_rate,
          r.currency_precision
        ) : a.base_discount_amount = a.discount_amount;
      }
      a.amount = r.flt(a.qty * a.rate, r.currency_precision);
      const i = r.price_list_currency || r.pos_profile.currency;
      r.selected_currency !== i ? a.base_amount = r.flt(a.amount / r.exchange_rate, r.currency_precision) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
    }
  };
}
const qA = /* @__PURE__ */ new Map();
function Cne() {
  return { getBundleComponents: async (t) => {
    const n = qA.get(t), a = Date.now();
    if (n && a - n.ts < 6e4)
      return n.data;
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.bundles.get_bundle_components",
        args: { bundles: [t] }
      }), i = r.message && r.message[t] ? r.message[t] : [];
      return qA.set(t, { data: i, ts: a }), i;
    } catch (r) {
      return console.error("Failed to fetch bundle components", r), [];
    }
  } };
}
function Ane() {
  const e = (s, d) => {
    const u = d.items.findIndex((f) => f.posa_row_id == s.posa_row_id);
    u >= 0 && d.items.splice(u, 1), s.is_bundle && (d.packed_items = d.packed_items.filter((f) => f.bundle_id !== s.bundle_id)), d.expanded = d.expanded.filter((f) => f !== s.posa_row_id);
  }, { getBundleComponents: t } = Cne(), n = async (s, d) => {
    const u = await t(s.item_code);
    if (!(!u || !u.length)) {
      s.is_bundle = 1, s.is_bundle_parent = 1, s.is_stock_item = 0, s.warehouse = null, s.stock_qty = 0, s.bundle_id = d.makeid ? d.makeid(10) : Math.random().toString(36).substr(2, 10), d.items = [...d.items];
      for (const f of u) {
        const _ = {
          parent_item: s.item_code,
          bundle_id: s.bundle_id,
          item_code: f.item_code,
          item_name: f.item_name || f.item_code,
          qty: (s.qty || 1) * f.qty,
          stock_qty: (s.qty || 1) * f.qty,
          uom: f.uom,
          rate: 0,
          child_qty_per_bundle: f.qty,
          warehouse: d.pos_profile.warehouse,
          is_stock_item: 1,
          has_batch_no: f.is_batch,
          has_serial_no: f.is_serial,
          posa_row_id: d.makeid ? d.makeid(20) : Math.random().toString(36).substr(2, 20),
          posa_offers: JSON.stringify([]),
          posa_offer_applied: 0,
          posa_is_offer: 0
        };
        d.packed_items.push(_), d.update_item_detail && (d.update_item_detail(_, !1), d.calc_stock_qty && d.calc_stock_qty(_, _.qty)), d.fetch_available_qty && d.fetch_available_qty(_);
      }
    }
  }, a = async (s, d) => {
    s.uom || (s.uom = s.stock_uom);
    let u = -1;
    d.new_line || (d.pos_profile.posa_auto_set_batch && s.has_batch_no ? u = d.items.findIndex(
      (_) => _.item_code === s.item_code && _.uom === s.uom && !_.posa_is_offer && !_.posa_is_replace
    ) : u = d.items.findIndex(
      (_) => _.item_code === s.item_code && _.uom === s.uom && !_.posa_is_offer && !_.posa_is_replace && (_.batch_no && s.batch_no && _.batch_no === s.batch_no || !_.batch_no && !s.batch_no)
    ));
    let f;
    if (u === -1 || d.new_line) {
      f = r(s, d), s.has_serial_no && s.to_set_serial_no && (f.serial_no_selected = [], f.serial_no_selected.push(s.to_set_serial_no), s.to_set_serial_no = null), s.has_batch_no && s.to_set_batch_no && (f.batch_no = s.to_set_batch_no, s.to_set_batch_no = null, s.batch_no = null, d.setBatchQty && d.setBatchQty(f, f.batch_no, !1)), d.isReturnInvoice && (f.qty = -Math.abs(f.qty || 1)), d.calc_uom && f.uom && await d.calc_uom(f, f.uom);
      try {
        const _ = await frappe.call({
          method: "posawesome.posawesome.api.items.get_price_for_uom",
          args: {
            item_code: f.item_code,
            price_list: d.get_price_list ? d.get_price_list() : null,
            uom: f.uom
          }
        });
        if (_.message) {
          const g = parseFloat(_.message), v = d.price_list_currency || d.pos_profile.currency;
          let w = g;
          d.pos_profile.posa_allow_multi_currency && d.selected_currency && d.selected_currency !== v && (w = g * (d.exchange_rate || 1)), Object.assign(f, {
            rate: w,
            price_list_rate: w,
            base_rate: g,
            base_price_list_rate: g,
            _manual_rate_set: !0,
            skip_force_update: !0
          });
        }
      } catch (_) {
        console.warn("UOM price fetch failed", _);
      }
      if (d.new_line || (d.pos_profile.posa_auto_set_batch && s.has_batch_no ? u = d.items.findIndex(
        (_) => _.item_code === s.item_code && _.uom === s.uom && !_.posa_is_offer && !_.posa_is_replace
      ) : u = d.items.findIndex(
        (_) => _.item_code === s.item_code && _.uom === s.uom && !_.posa_is_offer && !_.posa_is_replace && (_.batch_no && s.batch_no && _.batch_no === s.batch_no || !_.batch_no && !s.batch_no)
      )), u === -1 || d.new_line) {
        if (d.items.unshift(f), await n(f, d), d.update_item_detail && d.update_item_detail(f, !1), d.fetch_available_qty && d.fetch_available_qty(f), d.isReturnInvoice && d.pos_profile.posa_allow_return_without_invoice && f.has_batch_no && !d.pos_profile.posa_auto_set_batch) {
          const _ = Array.isArray(f.batch_no_data) && f.batch_no_data.length > 0 ? f.batch_no_data : null;
          if (_) {
            const g = new frappe.ui.Dialog({
              title: __("Select Batch"),
              fields: [
                {
                  fieldtype: "Select",
                  fieldname: "batch",
                  label: __("Batch"),
                  options: _.map((v) => `${v.batch_no} | ${v.batch_qty}`).join(`
`),
                  reqd: !d.pos_profile.posa_allow_free_batch_return
                }
              ],
              primary_action_label: __("Select"),
              primary_action(v) {
                const w = v.batch ? v.batch.split("|")[0].trim() : null;
                d.setBatchQty(f, w, !1), g.hide();
              }
            });
            g.onhide = () => {
              f.batch_no || d.setBatchQty(f, null, !1);
            }, g.show();
          } else
            d.setBatchQty(f, null, !1);
        }
        (!d.pos_profile.posa_auto_set_batch && f.has_batch_no || f.has_serial_no) && Vt(() => {
          d.expanded = [f.posa_row_id];
        });
      } else {
        const _ = d.items[u];
        d.update_items_details && d.update_items_details([_]), f.serial_no_selected && f.serial_no_selected.length && f.serial_no_selected.forEach((g) => {
          _.serial_no_selected.includes(g) || _.serial_no_selected.push(g);
        }), d.isReturnInvoice ? _.qty -= Math.abs(f.qty || 1) : _.qty += f.qty || 1, d.calc_stock_qty && d.calc_stock_qty(_, _.qty), _.has_batch_no && _.batch_no && d.setBatchQty && d.setBatchQty(_, _.batch_no, !1), d.setSerialNo && d.setSerialNo(_), d.calc_uom && _.uom && await d.calc_uom(_, _.uom), d.fetch_available_qty && d.fetch_available_qty(_);
      }
    } else {
      const _ = d.items[u];
      if (d.update_items_details && d.update_items_details([_]), s.has_serial_no && s.to_set_serial_no) {
        if (_.serial_no_selected.includes(s.to_set_serial_no)) {
          d.eventBus.emit("show_message", {
            title: __("This Serial Number {0} has already been added!", [s.to_set_serial_no]),
            color: "warning"
          }), s.to_set_serial_no = null;
          return;
        }
        _.serial_no_selected.push(s.to_set_serial_no), s.to_set_serial_no = null;
      }
      d.isReturnInvoice ? _.qty -= Math.abs(s.qty || 1) : _.qty += s.qty || 1, d.calc_stock_qty && d.calc_stock_qty(_, _.qty), _.has_batch_no && _.batch_no && d.setBatchQty && d.setBatchQty(_, _.batch_no, !1), d.setSerialNo && d.setSerialNo(_), d.calc_uom && _.uom && await d.calc_uom(_, _.uom), d.fetch_available_qty && d.fetch_available_qty(_);
    }
    d.forceUpdate && d.forceUpdate(), f && (!d.pos_profile.posa_auto_set_batch && f.has_batch_no || f.has_serial_no) && (d.expanded = [f.posa_row_id]);
  }, r = (s, d) => {
    const u = { ...s };
    u.original_item_name = u.item_name, u.name_overridden = 0, u.warehouse || (u.warehouse = d.pos_profile.warehouse), s.qty || (s.qty = 1), s.posa_is_offer || (s.posa_is_offer = 0), s.posa_is_replace || (s.posa_is_replace = ""), u._manual_rate_set = !1, d.isReturnInvoice && s.qty > 0 && (s.qty = -Math.abs(s.qty)), u.stock_qty = s.qty, u.discount_amount = 0, u.discount_percentage = 0, u.discount_amount_per_item = 0, u.price_list_rate = s.rate;
    const f = d.price_list_currency || d.pos_profile.currency;
    return d.selected_currency !== f ? (u.base_price_list_rate = s.rate / d.exchange_rate, u.base_rate = s.rate / d.exchange_rate, u.base_discount_amount = 0) : (u.base_price_list_rate = s.rate, u.base_rate = s.rate, u.base_discount_amount = 0), u.qty = s.qty, u.uom = s.uom ? s.uom : s.stock_uom, u.item_uoms = s.item_uoms || [], u.item_uoms.length === 0 && u.stock_uom && u.item_uoms.push({ uom: u.stock_uom, conversion_factor: 1 }), u.actual_batch_qty = "", u.batch_no_expiry_date = s.batch_no_expiry_date || null, u.conversion_factor = 1, u.posa_offers = JSON.stringify([]), u.posa_offer_applied = 0, u.posa_is_offer = s.posa_is_offer, u.posa_is_replace = s.posa_is_replace || null, u.is_free_item = 0, u.is_bundle = 0, u.is_bundle_parent = 0, u.bundle_id = null, u.posa_notes = "", u.posa_delivery_date = "", u.posa_row_id = d.makeid ? d.makeid(20) : Math.random().toString(36).substr(2, 20), u.has_serial_no && !u.serial_no_selected && (u.serial_no_selected = [], u.serial_no_selected_count = 0), (!d.pos_profile.posa_auto_set_batch && u.has_batch_no || u.has_serial_no) && d.expanded.push(u.posa_row_id), u;
  }, i = (s) => {
    s.items = [], s.packed_items = [], s.posa_offers = [], s.expanded = [], s.eventBus.emit("set_pos_coupons", []), s.posa_coupons = [], s.invoice_doc = "", s.return_doc = "", s.discount_amount = 0, s.additional_discount = 0, s.additional_discount_percentage = 0, s.delivery_charges_rate = 0, s.selected_delivery_charge = "", s.posting_date = frappe.datetime.nowdate(), s.update_price_list && s.update_price_list(), s.customer = s.pos_profile.customer, s.eventBus.emit("set_customer_readonly", !1), s.invoiceType = s.pos_profile.posa_default_sales_order ? "Order" : "Invoice", s.invoiceTypes = ["Invoice", "Order"];
  };
  function o(s, d) {
    const u = s.find(
      (f) => f.item_code === d.item_code && f.uom === d.uom && f.rate === d.rate
    );
    u ? (u.qty += d.qty || 1, u.amount = u.qty * u.rate) : s.push({ ...d });
  }
  const l = Ni.debounce(o, 50);
  return {
    removeItem: e,
    addItem: a,
    getNewItem: r,
    clearInvoice: i,
    groupAndAddItem: o,
    groupAndAddItemDebounced: l
  };
}
function xne() {
  return {
    calcUom: async (n, a, r) => {
      let i = n.item_uoms.find((u) => u.uom == a);
      if (!i && r.getItemUOMs) {
        const u = r.getItemUOMs(n.item_code);
        u.length && (n.item_uoms = u, i = u.find((f) => f.uom == a));
      }
      if (!i && n.stock_uom === a && (i = { uom: n.stock_uom, conversion_factor: 1 }, n.item_uoms || (n.item_uoms = []), n.item_uoms.push(i)), !i) {
        r.eventBus.emit("show_message", {
          title: __("UOM not found"),
          color: "error"
        });
        return;
      }
      const o = n.conversion_factor || 1;
      n.conversion_factor = i.conversion_factor;
      const l = n.conversion_factor / o, s = r.get_price_list ? r.get_price_list() : null;
      let d = null;
      if (s && r.getCachedPriceListItems) {
        const f = (r.getCachedPriceListItems(s) || []).find((_) => _.item_code === n.item_code && _.uom === i.uom);
        f && (d = f.price_list_rate || f.rate);
      }
      if (!d && typeof sn == "function" && !sn())
        try {
          const u = await frappe.call({
            method: "posawesome.posawesome.api.items.get_price_for_uom",
            args: {
              item_code: n.item_code,
              price_list: s,
              uom: i.uom
            }
          });
          u.message && (d = parseFloat(u.message));
        } catch (u) {
          console.error("Failed to fetch UOM price", u);
        }
      if (d) {
        n._manual_rate_set = !0, n.base_price_list_rate = d, n.posa_offer_applied || (n.base_rate = d);
        const u = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== u ? (n.price_list_rate = r.flt(
          n.base_price_list_rate * r.exchange_rate,
          r.currency_precision
        ), n.rate = r.flt(n.base_rate * r.exchange_rate, r.currency_precision)) : (n.price_list_rate = n.base_price_list_rate, n.rate = n.base_rate), r.calc_stock_qty && r.calc_stock_qty(n, n.qty), r.forceUpdate && r.forceUpdate();
        return;
      }
      if (n._manual_rate_set = !1, n.posa_offer_applied || (n.discount_amount = 0, n.discount_percentage = 0), !n.original_base_rate && !n.posa_offer_applied && (n.original_base_rate = n.base_rate / o, n.original_base_price_list_rate = n.base_price_list_rate / o), n.posa_offer_applied) {
        const u = r.posOffers && Array.isArray(r.posOffers) ? r.posOffers.find((f) => {
          if (!f || !f.items) return !1;
          const _ = typeof f.items == "string" ? JSON.parse(f.items) : f.items;
          return Array.isArray(_) && _.includes(n.posa_row_id);
        }) : null;
        if (u && u.discount_type === "Rate") {
          const f = r.flt(u.rate * n.conversion_factor);
          n.base_rate = f, n.base_price_list_rate = f;
          const _ = r.price_list_currency || r.pos_profile.currency;
          r.selected_currency !== _ ? (n.rate = r.flt(f / r.exchange_rate, r.currency_precision), n.price_list_rate = n.rate) : (n.rate = f, n.price_list_rate = f);
        } else if (u && u.discount_type === "Discount Percentage") {
          let f;
          n.original_base_price_list_rate ? f = r.flt(
            n.original_base_price_list_rate * n.conversion_factor,
            r.currency_precision
          ) : f = r.flt(
            n.base_price_list_rate * l,
            r.currency_precision
          ), n.base_price_list_rate = f;
          const _ = r.flt(
            f * u.discount_percentage / 100,
            r.currency_precision
          );
          n.base_discount_amount = _, n.base_rate = r.flt(f - _, r.currency_precision);
          const g = r.price_list_currency || r.pos_profile.currency;
          r.selected_currency !== g ? (n.price_list_rate = r.flt(
            f / r.exchange_rate,
            r.currency_precision
          ), n.discount_amount = r.flt(
            _ / r.exchange_rate,
            r.currency_precision
          ), n.rate = r.flt(n.base_rate / r.exchange_rate, r.currency_precision)) : (n.price_list_rate = f, n.discount_amount = _, n.rate = n.base_rate);
        }
      } else {
        n.batch_price ? (n.base_rate = n.batch_price * n.conversion_factor, n.base_price_list_rate = n.base_rate) : n.original_base_rate && (n.base_rate = n.original_base_rate * n.conversion_factor, n.base_price_list_rate = n.original_base_price_list_rate * n.conversion_factor);
        const u = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== u ? (n.rate = r.flt(n.base_rate / r.exchange_rate, r.currency_precision), n.price_list_rate = r.flt(
          n.base_price_list_rate / r.exchange_rate,
          r.currency_precision
        )) : (n.rate = n.base_rate, n.price_list_rate = n.base_price_list_rate);
      }
      r.calc_stock_qty && r.calc_stock_qty(n, n.qty), r.forceUpdate && r.forceUpdate();
    },
    calcStockQty: (n, a) => {
      n.stock_qty = n.conversion_factor * a;
    }
  };
}
const { setSerialNo: Tne, setBatchQty: Ine } = kne(), { updateDiscountAmount: Ene, calcPrices: Pne, calcItemPrice: One } = Sne(), { removeItem: Dne, addItem: Bne, getNewItem: Vne, clearInvoice: Mne } = Ane(), { calcUom: Rne, calcStockQty: ky } = xne(), Lne = {
  remove_item(e) {
    return Dne(e, this);
  },
  async add_item(e) {
    if (!this.customer)
      return this.eventBus.emit("show_message", {
        title: __("Please select a customer before adding items"),
        color: "error"
      }), !1;
    if (this.pos_profile.posa_enable_restaurant_mode) {
      if (!this.selected_order_type)
        return this.eventBus.emit("show_message", {
          title: __("Please select an Order Type before adding items"),
          color: "error"
        }), !1;
      if (this.selected_order_type.requires_table && !this.selected_table)
        return this.eventBus.emit("show_message", {
          title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
          color: "error"
        }), !1;
    }
    const t = await Bne(e, this), n = this.items.find(
      (a) => a.item_code === e.item_code && a.uom === (e.uom || a.uom) && (!a.batch_no || a.batch_no === e.batch_no)
    );
    return n && this.fetch_available_qty && this.fetch_available_qty(n), t;
  },
  // Create a new item object with default and calculated fields
  get_new_item(e) {
    return Vne(e, this);
  },
  // Reset all invoice fields to default/empty values
  clear_invoice() {
    const e = Mne(this);
    return this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && (this.clear_restaurant_selection(), this.invoiceType = "Order", this.invoiceTypes = ["Order"]), e;
  },
  // Fetch customer balance from backend or cache
  async fetch_customer_balance() {
    try {
      if (!this.customer) {
        this.customer_balance = 0;
        return;
      }
      if (sn()) {
        const n = PA(this.customer);
        if (n !== null) {
          this.customer_balance = n;
          return;
        } else {
          this.customer_balance = 0, this.eventBus.emit("show_message", {
            title: __("Customer balance unavailable offline"),
            text: __("Balance will be updated when connection is restored"),
            color: "warning"
          });
          return;
        }
      }
      const t = (await frappe.call({
        method: "posawesome.posawesome.api.customer.get_customer_balance",
        args: { customer: this.customer }
      }))?.message?.balance || 0;
      this.customer_balance = t, xQ(this.customer, t);
    } catch (e) {
      console.error("Error fetching balance:", e);
      const t = PA(this.customer);
      t !== null ? (this.customer_balance = t, this.eventBus.emit("show_message", {
        title: __("Using cached customer balance"),
        text: __("Could not fetch latest balance from server"),
        color: "warning"
      })) : (this.eventBus.emit("show_message", {
        title: __("Error fetching customer balance"),
        color: "error"
      }), this.customer_balance = 0);
    }
  },
  // Cancel the current invoice, optionally delete from backend
  async cancel_invoice() {
    const e = this.get_invoice_doc();
    this.pos_profile && this.pos_profile.posa_enable_restaurant_mode ? (this.invoiceType = "Order", this.invoiceTypes = ["Order"]) : (this.invoiceType = this.pos_profile.posa_default_sales_order ? "Order" : "Invoice", this.invoiceTypes = ["Invoice", "Order"]), this.posting_date = frappe.datetime.nowdate();
    var t = this;
    e.name && this.pos_profile.posa_allow_delete && await frappe.call({
      method: "posawesome.posawesome.api.invoices.delete_invoice",
      args: { invoice: e.name },
      async: !0,
      callback: function(n) {
        n.message && t.eventBus.emit("show_message", {
          text: n.message,
          color: "warning"
        });
      }
    }), this.clear_invoice(), this.cancel_dialog = !1;
  },
  // Load an invoice (or return invoice) from data, set all fields accordingly
  async load_invoice(e = {}) {
    console.log("=== LOAD_INVOICE START ==="), console.log("load_invoice called with data:", {
      is_return: e.is_return,
      return_against: e.return_against,
      customer: e.customer,
      items_count: e.items ? e.items.length : 0,
      source_orders: e.source_orders,
      multi_order_names: e.multi_order_names,
      is_multi_order_consolidation: e.is_multi_order_consolidation
    }), console.log("Raw data multi-order fields before clear_invoice:", {
      source_orders: e.source_orders,
      multi_order_names: e.multi_order_names,
      is_multi_order_consolidation: e.is_multi_order_consolidation
    }), this.clear_invoice(), e.is_return && (console.log("Processing return invoice"), e.return_against ? (console.log("Return has reference to invoice:", e.return_against), this.eventBus.emit("set_customer_readonly", !0)) : (console.log("Return without invoice reference, customer can be selected"), this.eventBus.emit("set_customer_readonly", !1)), this.invoiceType = "Return", this.invoiceTypes = ["Return"]), this.invoice_doc = JSON.parse(JSON.stringify(e)), console.log("=== DEBUG: After deep cloning to this.invoice_doc ==="), console.log("this.invoice_doc now contains:", {
      name: this.invoice_doc.name,
      doctype: this.invoice_doc.doctype,
      source_orders: this.invoice_doc.source_orders,
      multi_order_names: this.invoice_doc.multi_order_names,
      is_multi_order_consolidation: this.invoice_doc.is_multi_order_consolidation
    }), this.items = e.items || [], this.packed_items = e.packed_items || [], console.log("Items set:", this.items.length, "items"), e.is_return && e.return_against && (this.items.forEach((t) => {
      t.locked_price = !0;
    }), this.packed_items.forEach((t) => {
      t.locked_price = !0;
    })), this.items.length > 0 ? (this.update_items_details(this.items), this.posa_offers = e.posa_offers || [], this.items.forEach((t) => {
      t.posa_row_id || (t.posa_row_id = this.makeid(20)), t.batch_no && this.set_batch_qty(t, t.batch_no), t.original_item_name || (t.original_item_name = t.item_name);
    })) : console.log("Warning: No items in return invoice"), this.packed_items.length > 0 && (this.update_items_details(this.packed_items), this.packed_items.forEach((t) => {
      t.posa_row_id || (t.posa_row_id = this.makeid(20));
    })), this.customer = e.customer, this.posting_date = this.formatDateForBackend(e.posting_date || frappe.datetime.nowdate()), this.discount_amount = e.discount_amount, this.additional_discount_percentage = e.additional_discount_percentage, this.additional_discount = e.discount_amount, this.items.length > 0 && this.items.forEach((t) => {
      t.serial_no && (t.serial_no_selected = [], t.serial_no.split(`
`).forEach((a) => {
        a.length && t.serial_no_selected.push(a);
      }), t.serial_no_selected_count = t.serial_no_selected.length);
    }), e.is_return ? this.return_doc = e : this.eventBus.emit("set_pos_coupons", e.posa_coupons), console.log("load_invoice completed, invoice state:", {
      invoiceType: this.invoiceType,
      is_return: this.invoice_doc.is_return,
      items: this.items.length,
      customer: this.customer
    });
  },
  // Save and clear the current invoice (draft logic)
  save_and_clear_invoice() {
    let e = null;
    const t = this.get_invoice_doc();
    if (console.log("=== SAVE_AND_CLEAR_INVOICE DEBUG ==="), console.log("doc from get_invoice_doc:", {
      name: t.name,
      doctype: t.doctype,
      docstatus: t.docstatus
    }), console.log("this.invoice_doc:", {
      name: this.invoice_doc?.name,
      doctype: this.invoice_doc?.doctype,
      docstatus: this.invoice_doc?.docstatus
    }), console.log("Restaurant mode:", this.pos_profile.posa_enable_restaurant_mode), console.log("=== END SAVE_AND_CLEAR_INVOICE DEBUG ==="), this.pos_profile.posa_enable_restaurant_mode) {
      const n = t.name && t.name.startsWith("ACC-SINV-");
      if (console.log("Is Sales Invoice by name:", n), t.doctype === "Sales Invoice" || n)
        console.log("Processing Sales Invoice for payment, skipping restaurant order validation");
      else {
        if (!this.selected_order_type)
          return this.eventBus.emit("show_message", {
            title: __("Please select an Order Type"),
            color: "error"
          }), !1;
        if (this.selected_order_type.requires_table && !this.selected_table)
          return this.eventBus.emit("show_message", {
            title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
            color: "error"
          }), !1;
        if (this.invoiceType = "Order", t.name && this.invoice_doc && this.invoice_doc.doctype === "Sales Invoice" && t.name.startsWith("SAL-ORD-"))
          return console.error("CRITICAL ERROR: Attempting to update Sales Order but invoice_doc references Sales Invoice"), console.log("invoice_doc doctype:", this.invoice_doc.doctype), console.log("doc name:", t.name), this.eventBus.emit("show_message", {
            title: __("Order state error: Please reload the order from the orders list and try again."),
            color: "error"
          }), !1;
      }
    }
    if (t.name) {
      const n = t.name.startsWith("ACC-SINV-"), a = t.name.startsWith("SAL-ORD-");
      console.log("Document type analysis:", {
        name: t.name,
        doctype: t.doctype,
        isSalesInvoiceByName: n,
        isSalesOrderByName: a
      }), t.doctype === "Sales Invoice" || n ? (console.log("Processing Sales Invoice for payment:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus
      }), e = this.update_invoice(t)) : t.docstatus === 1 && this.pos_profile.posa_enable_restaurant_mode && (t.doctype === "Sales Order" || a) ? (console.log("Attempting to update submitted Sales Order with doc:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus,
        items_count: t.items?.length || 0
      }), e = this.update_submitted_order(t)) : (console.log("Using regular update for doc:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus
      }), e = this.update_invoice(t));
    } else
      t.items.length ? this.pos_profile.posa_enable_restaurant_mode ? e = this.create_restaurant_order(t) : e = this.update_invoice(t) : this.eventBus.emit("show_message", {
        title: __("Nothing to save"),
        color: "error"
      });
    if (!e)
      this.eventBus.emit("show_message", {
        title: __("Error saving the current order"),
        color: "error"
      });
    else
      return this.clear_invoice(), e;
  },
  // Start a new order (or return order) with provided data
  async new_order(e = {}) {
    let t = null;
    if (this.eventBus.emit("set_customer_readonly", !1), this.expanded = [], this.posa_offers = [], this.eventBus.emit("set_pos_coupons", []), this.posa_coupons = [], this.return_doc = "", !e.name && !e.is_return)
      this.items = [], this.customer = this.pos_profile.customer, this.invoice_doc = "", this.discount_amount = 0, this.additional_discount_percentage = 0, this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice", "Order"], this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && this.clear_restaurant_selection();
    else {
      if (e.is_return && (e.return_against ? this.eventBus.emit("set_customer_readonly", !0) : this.eventBus.emit("set_customer_readonly", !1), this.invoiceType = "Return", this.invoiceTypes = ["Return"]), this.invoice_doc = e, this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && (console.log("Loading document for editing - validating consistency"), console.log("Document info:", {
        name: e.name,
        doctype: e.doctype,
        docstatus: e.docstatus
      }), e.name && e.name.startsWith("SAL-ORD-") && e.doctype !== "Sales Order")) {
        console.error("CRITICAL ERROR: Document name suggests Sales Order but doctype is:", e.doctype), this.eventBus.emit("show_message", {
          title: __("Document type mismatch. Please reload from orders list."),
          color: "error"
        });
        return;
      }
      if (this.items = e.items, this.update_items_details(this.items), this.posa_offers = e.posa_offers || [], this.pos_profile && this.pos_profile.posa_enable_restaurant_mode) {
        if (e.doctype === "Sales Order" && (this.invoiceType = "Order", this.invoiceTypes = ["Order"], console.log("Loading Sales Order for editing in restaurant mode:", e.name)), e.restaurant_order_type) {
          const n = this.restaurant_order_types.find((a) => a.name === e.restaurant_order_type);
          n && (this.selected_order_type = n);
        }
        if (e.table_number) {
          const n = this.available_tables.find((a) => a.table_number === e.table_number);
          n && (this.selected_table = n);
        }
      }
      this.items.forEach((n) => {
        n.posa_row_id || (n.posa_row_id = this.makeid(20)), n.batch_no && this.set_batch_qty(n, n.batch_no);
      }), this.customer = e.customer, this.posting_date = this.formatDateForBackend(e.posting_date || frappe.datetime.nowdate()), this.discount_amount = e.discount_amount, this.additional_discount_percentage = e.additional_discount_percentage, this.items.forEach((n) => {
        n.serial_no && (n.serial_no_selected = [], n.serial_no.split(`
`).forEach((r) => {
          r.length && n.serial_no_selected.push(r);
        }), n.serial_no_selected_count = n.serial_no_selected.length);
      });
    }
    return t;
  },
  // Build the invoice document object for backend submission
  get_invoice_doc() {
    let e = {};
    this.invoice_doc.name && (e = { ...this.invoice_doc }, console.log("=== DEBUG: get_invoice_doc - starting with existing doc ==="), console.log("Original this.invoice_doc:", {
      name: this.invoice_doc.name,
      doctype: this.invoice_doc.doctype,
      docstatus: this.invoice_doc.docstatus,
      source_orders: this.invoice_doc.source_orders,
      multi_order_names: this.invoice_doc.multi_order_names,
      is_multi_order_consolidation: this.invoice_doc.is_multi_order_consolidation
    }), console.log("Copied doc after spread:", {
      name: e.name,
      doctype: e.doctype,
      docstatus: e.docstatus,
      source_orders: e.source_orders,
      multi_order_names: e.multi_order_names,
      is_multi_order_consolidation: e.is_multi_order_consolidation
    })), this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order ? e.doctype = "Sales Order" : this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? e.doctype = "POS Invoice" : e.doctype = "Sales Invoice", this.pos_profile.posa_enable_restaurant_mode && (!e.name || e.name && e.name.startsWith("SAL-ORD-") ? (e.doctype = "Sales Order", console.log("=== DEBUG: get_invoice_doc - forced doctype to Sales Order in restaurant mode ===")) : e.name && e.name.startsWith("ACC-SINV-") && (e.doctype = "Sales Invoice", console.log("=== DEBUG: get_invoice_doc - keeping Sales Invoice doctype for converted order ==="))), console.log("=== DEBUG: get_invoice_doc - final doc info ==="), console.log("Final doc:", {
      name: e.name,
      doctype: e.doctype,
      docstatus: e.docstatus,
      invoiceType: this.invoiceType,
      restaurant_mode: this.pos_profile.posa_enable_restaurant_mode
    }), e.is_pos = 1, e.ignore_pricing_rule = 1, e.company = e.company || this.pos_profile.company, e.pos_profile = e.pos_profile || this.pos_profile.name, e.posa_show_custom_name_marker_on_print = this.pos_profile.posa_show_custom_name_marker_on_print, e.currency = this.selected_currency || this.pos_profile.currency, e.conversion_rate = this.invoice_doc && this.invoice_doc.conversion_rate || this.conversion_rate || 1, e.price_list_currency = this.price_list_currency || e.currency, e.plc_conversion_rate = this.invoice_doc && this.invoice_doc.plc_conversion_rate || (e.price_list_currency === e.currency ? 1 : this.exchange_rate), e.campaign = e.campaign || this.pos_profile.campaign, e.selling_price_list = this.pos_profile.selling_price_list, e.naming_series = e.naming_series || this.pos_profile.naming_series, e.customer = this.customer;
    const t = this.isReturnInvoice;
    e.is_return = t ? 1 : 0;
    const n = this.get_invoice_items();
    e.items = n, e.packed_items = (this.packed_items || []).map((s) => ({
      parent_item: s.parent_item,
      item_code: s.item_code,
      item_name: s.item_name,
      qty: flt(s.qty),
      uom: s.uom,
      warehouse: s.warehouse,
      batch_no: s.batch_no,
      serial_no: s.serial_no,
      rate: flt(s.rate)
    }));
    let a = this.Total;
    t && a > 0 && (a = -Math.abs(a)), e.total = a, e.net_total = a, e.base_total = a * (this.exchange_rate || 1), e.base_net_total = a * (this.exchange_rate || 1);
    let r = flt(this.additional_discount);
    t && r > 0 && (r = -Math.abs(r)), e.discount_amount = r, e.base_discount_amount = r * (this.exchange_rate || 1);
    let i = flt(this.additional_discount_percentage);
    t && i > 0 && (i = -Math.abs(i)), e.additional_discount_percentage = i;
    let o = this.subtotal;
    if (e.taxes = [], this.invoice_doc && this.invoice_doc.taxes) {
      let s = 0;
      this.invoice_doc.taxes.forEach((d) => {
        d.tax_amount && (o += flt(d.tax_amount), s += flt(d.tax_amount)), e.taxes.push({
          account_head: d.account_head,
          charge_type: d.charge_type || "On Net Total",
          description: d.description,
          rate: d.rate,
          included_in_print_rate: d.included_in_print_rate || 0,
          tax_amount: d.tax_amount,
          total: d.total,
          base_tax_amount: d.tax_amount * (this.exchange_rate || 1),
          base_total: d.total * (this.exchange_rate || 1)
        });
      }), e.total_taxes_and_charges = s;
    } else if (sn()) {
      const s = X9(this.pos_profile.taxes_and_charges);
      if (s && Array.isArray(s.taxes)) {
        const d = iQ();
        let u = o, f = 0;
        s.taxes.forEach((_) => {
          let g = 0;
          _.charge_type === "Actual" ? g = flt(_.tax_amount || 0) : d ? g = flt(e.total * flt(_.rate) / 100) : g = flt(e.net_total * flt(_.rate) / 100), d || (u += g), f += g, e.taxes.push({
            account_head: _.account_head,
            charge_type: _.charge_type || "On Net Total",
            description: _.description,
            rate: _.rate,
            included_in_print_rate: _.charge_type === "Actual" ? 0 : d ? 1 : 0,
            tax_amount: g,
            total: u,
            base_tax_amount: g * (this.exchange_rate || 1),
            base_total: u * (this.exchange_rate || 1)
          });
        }), d ? (e.net_total = e.total - f, e.base_net_total = e.net_total * (this.exchange_rate || 1), o = e.total) : o = u, e.total_taxes_and_charges = f;
      }
    }
    t && o > 0 && (o = -Math.abs(o)), e.grand_total = o, e.base_grand_total = o * (this.exchange_rate || 1), this.pos_profile.disable_rounded_total ? (e.rounded_total = flt(o, this.currency_precision), e.base_rounded_total = flt(e.base_grand_total, this.currency_precision)) : (e.rounded_total = this.roundAmount(o), e.base_rounded_total = this.roundAmount(e.base_grand_total)), e.posa_pos_opening_shift = this.pos_opening_shift.name, e.payments = this.get_payments(), t && (this.invoice_doc.return_against && (e.return_against = this.invoice_doc.return_against), e.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, e.grand_total > 0 && (e.grand_total = -Math.abs(e.grand_total)), e.base_grand_total > 0 && (e.base_grand_total = -Math.abs(e.base_grand_total)), e.rounded_total > 0 && (e.rounded_total = -Math.abs(e.rounded_total)), e.base_rounded_total > 0 && (e.base_rounded_total = -Math.abs(e.base_rounded_total)), e.total > 0 && (e.total = -Math.abs(e.total)), e.base_total > 0 && (e.base_total = -Math.abs(e.base_total)), e.net_total > 0 && (e.net_total = -Math.abs(e.net_total)), e.base_net_total > 0 && (e.base_net_total = -Math.abs(e.base_net_total)), e.payments && e.payments.length && e.payments.forEach((s) => {
      s.amount > 0 && (s.amount = -Math.abs(s.amount)), s.base_amount > 0 && (s.base_amount = -Math.abs(s.base_amount));
    })), e.posa_offers = this.posa_offers, e.posa_coupons = this.posa_coupons, e.posa_delivery_charges = this.selected_delivery_charge?.name || null, e.posa_delivery_charges_rate = this.delivery_charges_rate || 0, e.posting_date = this.formatDateForBackend(this.posting_date_display), e.ignore_pricing_rule = 1, e.price_list_currency = this.price_list_currency || e.currency, e.plc_conversion_rate = this.exchange_rate || e.conversion_rate, e.ignore_default_fields = 1, e.posa_is_offer_applied = this.posa_offers.length > 0 ? 1 : 0;
    const l = this.price_list_currency || this.pos_profile.currency;
    if (this.selected_currency !== l) {
      const s = t ? -1 : 1;
      e.base_total = a / this.exchange_rate * s, e.base_net_total = a / this.exchange_rate * s, e.base_discount_amount = r / this.exchange_rate * s, e.base_grand_total = o / this.exchange_rate * s, e.base_rounded_total = o / this.exchange_rate * s;
    } else {
      const s = t ? -1 : 1;
      e.base_total = a * s, e.base_net_total = a * s, e.base_discount_amount = r * s, e.base_grand_total = o * s, e.base_rounded_total = o * s;
    }
    return e.payments && e.payments.length && e.payments.forEach((s) => {
      this.selected_currency !== l ? s.base_amount = s.amount / this.exchange_rate : s.base_amount = s.amount, t && (s.amount = -Math.abs(s.amount), s.base_amount = -Math.abs(s.base_amount));
    }), this.pos_profile.posa_enable_restaurant_mode && (this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number), this.selected_order_type && this.selected_order_type.default_preparation_time && (e.expected_preparation_time = this.selected_order_type.default_preparation_time)), console.log("=== INVOICE_ITEM_METHODS get_invoice_doc - Multi-order field preservation ==="), console.log("this.invoice_doc multi-order fields:", {
      source_orders: this.invoice_doc.source_orders,
      multi_order_names: this.invoice_doc.multi_order_names,
      is_multi_order_consolidation: this.invoice_doc.is_multi_order_consolidation,
      is_multi_order_edit: this.invoice_doc.is_multi_order_edit
    }), this.invoice_doc.source_orders ? (e.source_orders = this.invoice_doc.source_orders, console.log("Preserved source_orders:", e.source_orders)) : console.log("WARNING: source_orders not found in this.invoice_doc"), this.invoice_doc.multi_order_names ? (e.multi_order_names = this.invoice_doc.multi_order_names, console.log("Preserved multi_order_names:", e.multi_order_names)) : console.log("WARNING: multi_order_names not found in this.invoice_doc"), this.invoice_doc.is_multi_order_consolidation ? (e.is_multi_order_consolidation = this.invoice_doc.is_multi_order_consolidation, console.log("Preserved is_multi_order_consolidation:", e.is_multi_order_consolidation)) : console.log("WARNING: is_multi_order_consolidation not found in this.invoice_doc"), this.invoice_doc.is_multi_order_edit ? (e.is_multi_order_edit = this.invoice_doc.is_multi_order_edit, console.log("Preserved is_multi_order_edit:", e.is_multi_order_edit)) : console.log("INFO: is_multi_order_edit not found in this.invoice_doc (may be normal)"), console.log("=== DEBUG: get_invoice_doc - final doc before return ==="), console.log("Final doc before return:", {
      name: e.name,
      doctype: e.doctype,
      docstatus: e.docstatus,
      source_orders: e.source_orders,
      multi_order_names: e.multi_order_names,
      is_multi_order_consolidation: e.is_multi_order_consolidation,
      customer: e.customer,
      grand_total: e.grand_total
    }), e;
  },
  // Get invoice doc from order doc (for sales order to invoice conversion)
  async get_invoice_from_order_doc() {
    let e = {};
    this.invoice_doc.doctype == "Sales Order" ? await frappe.call({
      method: "posawesome.posawesome.api.invoices.create_sales_invoice_from_order",
      args: {
        sales_order: this.invoice_doc.name
      },
      // async: false,
      callback: function(i) {
        i.message && (e = i.message);
      }
    }) : e = this.invoice_doc;
    const t = [], n = this.get_invoice_items();
    e.items.forEach((i) => {
      const o = n.find(
        (l) => l.item_code === i.item_code
      );
      o && (i.item_code = o.item_code, i.posa_row_id = o.posa_row_id, i.posa_offers = o.posa_offers, i.posa_offer_applied = o.posa_offer_applied, i.posa_is_offer = o.posa_is_offer, i.posa_is_replace = o.posa_is_replace, i.is_free_item = o.is_free_item, i.qty = flt(o.qty), i.rate = flt(o.rate), i.uom = o.uom, i.amount = flt(o.qty) * flt(o.rate), i.conversion_factor = o.conversion_factor, i.serial_no = o.serial_no, i.discount_percentage = flt(o.discount_percentage), i.discount_amount = flt(o.discount_amount), i.batch_no = o.batch_no, i.posa_notes = o.posa_notes, i.posa_delivery_date = this.formatDateForDisplay(o.posa_delivery_date), i.price_list_rate = o.price_list_rate, t.push(i));
    }), e.items = t;
    const a = [...e.items], r = new Set(a.map((i) => i.item_code));
    return n.forEach((i) => {
      r.has(i.item_code) || a.push(i);
    }), e.items = a, e.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, e.is_pos = 1, e.payments = this.get_payments(), e;
  },
  // Prepare items array for invoice doc
  get_invoice_items() {
    const e = [], t = this.isReturnInvoice, n = this.pos_profile.create_pos_invoice_instead_of_sales_invoice;
    return this.items.forEach((a) => {
      const r = {
        item_code: a.item_code,
        // Retain the item name for offline invoices
        // Fallback to item_code if item_name is not available
        item_name: a.item_name || a.item_code,
        name_overridden: a.name_overridden ? 1 : 0,
        posa_row_id: a.posa_row_id,
        posa_offers: a.posa_offers,
        posa_offer_applied: a.posa_offer_applied,
        posa_is_offer: a.posa_is_offer,
        posa_is_replace: a.posa_is_replace,
        is_free_item: a.is_free_item,
        qty: flt(a.qty),
        uom: a.uom,
        conversion_factor: a.conversion_factor,
        serial_no: a.serial_no,
        // Link to original invoice item when doing returns
        // Needed for backend validation that the item exists in
        // the referenced Sales or POS Invoice
        ...a.sales_invoice_item && { sales_invoice_item: a.sales_invoice_item },
        ...a.pos_invoice_item && { pos_invoice_item: a.pos_invoice_item },
        discount_percentage: flt(a.discount_percentage),
        batch_no: a.batch_no,
        posa_notes: a.posa_notes,
        posa_delivery_date: this.formatDateForBackend(a.posa_delivery_date)
      };
      if (t) {
        const o = n ? "pos_invoice_item" : "sales_invoice_item";
        !r[o] && a.name && (r[o] = a.name);
      }
      const i = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== i ? (r.rate = flt(a.rate), r.base_rate = a.base_rate || flt(a.rate / this.exchange_rate), r.price_list_rate = flt(a.price_list_rate), r.base_price_list_rate = a.base_price_list_rate || flt(a.price_list_rate / this.exchange_rate), r.amount = flt(a.qty) * r.rate, r.base_amount = r.amount / this.exchange_rate, r.discount_amount = flt(a.discount_amount), r.base_discount_amount = a.base_discount_amount || flt(a.discount_amount / this.exchange_rate)) : (r.rate = flt(a.rate), r.base_rate = a.base_rate || flt(a.rate), r.price_list_rate = flt(a.price_list_rate), r.base_price_list_rate = a.base_price_list_rate || flt(a.price_list_rate), r.amount = flt(a.qty) * r.rate, r.base_amount = r.amount, r.discount_amount = flt(a.discount_amount), r.base_discount_amount = a.base_discount_amount || flt(a.discount_amount)), t && (r.qty = -Math.abs(r.qty), r.amount = -Math.abs(r.amount), r.base_amount = -Math.abs(r.base_amount), r.discount_amount = -Math.abs(r.discount_amount), r.base_discount_amount = -Math.abs(r.base_discount_amount)), e.push(r);
    }), e;
  },
  // Prepare items array for order doc
  get_order_items() {
    const e = [];
    return this.items.forEach((t) => {
      const n = {
        item_code: t.item_code,
        // Retain item name to show on offline order documents
        // Use item_code if item_name is missing
        item_name: t.item_name || t.item_code,
        name_overridden: t.name_overridden ? 1 : 0,
        posa_row_id: t.posa_row_id,
        posa_offers: t.posa_offers,
        posa_offer_applied: t.posa_offer_applied,
        posa_is_offer: t.posa_is_offer,
        posa_is_replace: t.posa_is_replace,
        is_free_item: t.is_free_item,
        qty: flt(t.qty),
        rate: flt(t.rate),
        uom: t.uom,
        amount: flt(t.qty) * flt(t.rate),
        conversion_factor: t.conversion_factor,
        serial_no: t.serial_no,
        discount_percentage: flt(t.discount_percentage),
        discount_amount: flt(t.discount_amount),
        batch_no: t.batch_no,
        posa_notes: t.posa_notes,
        posa_delivery_date: t.posa_delivery_date,
        price_list_rate: t.price_list_rate
      };
      e.push(n);
    }), e;
  },
  // Prepare payments array for invoice doc
  get_payments() {
    const e = [];
    let n = this.subtotal;
    return this.pos_profile.payments.forEach((a, r) => {
      const i = r === 0 ? n : a.amount || 0, o = this.isReturnInvoice ? -Math.abs(i) : i, l = this.price_list_currency || this.pos_profile.currency, s = this.selected_currency !== l ? this.flt(o / (this.exchange_rate || 1), this.currency_precision) : o;
      e.push({
        amount: o,
        // Keep in selected currency (e.g. USD)
        base_amount: s,
        // Convert to base currency (e.g. PKR)
        mode_of_payment: a.mode_of_payment,
        default: a.default,
        account: a.account || "",
        type: a.type || "Cash",
        currency: this.selected_currency || this.pos_profile.currency,
        conversion_rate: this.conversion_rate || 1
      }), n -= i;
    }), console.log("Generated payments:", {
      currency: this.selected_currency,
      exchange_rate: this.exchange_rate,
      payments: e.map((a) => ({
        mode: a.mode_of_payment,
        amount: a.amount,
        base_amount: a.base_amount
      }))
    }), e;
  },
  // Convert amount to selected currency
  convert_amount(e) {
    const t = this.price_list_currency || this.pos_profile.currency;
    return this.selected_currency === t ? e : this.flt(e * this.exchange_rate, this.currency_precision);
  },
  // Update invoice in backend
  update_invoice(e) {
    var t = this;
    return sn() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: e.doctype === "Sales Order" && this.pos_profile.posa_create_only_sales_order ? "posawesome.posawesome.api.sales_orders.update_sales_order" : "posawesome.posawesome.api.invoices.update_invoice",
      args: {
        data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message && (t.invoice_doc = n.message, n.message.exchange_rate_date)) {
          t.exchange_rate_date = n.message.exchange_rate_date;
          const a = t.formatDateForBackend(t.posting_date_display);
          a !== t.exchange_rate_date && t.eventBus.emit("show_message", {
            title: __(
              "Exchange rate date " + t.exchange_rate_date + " differs from posting date " + a
            ),
            color: "warning"
          });
        }
      }
    }), this.invoice_doc);
  },
  // Update invoice from order in backend
  update_invoice_from_order(e) {
    var t = this;
    return sn() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: "posawesome.posawesome.api.invoices.update_invoice_from_order",
      args: {
        data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message && (t.invoice_doc = n.message, n.message.exchange_rate_date)) {
          t.exchange_rate_date = n.message.exchange_rate_date;
          const a = t.formatDateForBackend(t.posting_date_display);
          a !== t.exchange_rate_date && t.eventBus.emit("show_message", {
            title: __(
              "Exchange rate date " + t.exchange_rate_date + " differs from posting date " + a
            ),
            color: "warning"
          });
        }
      }
    }), this.invoice_doc);
  },
  // Update submitted restaurant order with new items
  async update_submitted_order(e) {
    var t = this;
    if (sn())
      return t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc;
    try {
      if (console.log("=== DEBUG: update_submitted_order called ==="), console.log("doc parameter:", JSON.stringify({
        name: e.name,
        doctype: e.doctype,
        docstatus: e.docstatus,
        items_count: e.items?.length || 0,
        is_return: e.is_return
      }, null, 2)), console.log("this.invoice_doc:", JSON.stringify({
        name: this.invoice_doc?.name,
        doctype: this.invoice_doc?.doctype,
        docstatus: this.invoice_doc?.docstatus
      }, null, 2)), console.log("this.invoiceType:", this.invoiceType), console.log("this.invoiceTypes:", this.invoiceTypes), console.log("Updating order with doc:", {
        name: e.name,
        doctype: e.doctype,
        items_count: e.items?.length || 0
      }), e.doctype !== "Sales Order")
        return console.error("Expected Sales Order but got:", e.doctype), t.eventBus.emit("show_message", {
          title: __("Invalid document type for order update. Expected Sales Order, got {0}", [e.doctype]),
          color: "error"
        }), !1;
      if (!e.name || !e.name.startsWith("SAL-ORD-"))
        return console.error("Invalid Sales Order name format:", e.name), t.eventBus.emit("show_message", {
          title: __("Invalid Sales Order name format: {0}", [e.name || "undefined"]),
          color: "error"
        }), !1;
      const n = await frappe.call({
        method: "posawesome.posawesome.api.restaurant_orders.update_submitted_order_items",
        args: {
          order_name: e.name,
          items_data: e.items
        }
      });
      return n.message && (t.invoice_doc = n.message, t.invoice_doc.doctype = "Sales Order", console.log("Order updated successfully:", t.invoice_doc.name), t.eventBus.emit("show_message", {
        title: __("Order {0} updated successfully", [n.message.name]),
        color: "success"
      })), t.invoice_doc;
    } catch (n) {
      return console.error("Error updating submitted order:", n), n.message && n.message.includes("not found") ? t.eventBus.emit("show_message", {
        title: __("Sales Order {0} not found. It may have been deleted or converted to an invoice.", [e.name]),
        color: "error"
      }) : n.message && n.message.includes("Sales Invoice") ? t.eventBus.emit("show_message", {
        title: __("Error: Attempting to update a Sales Invoice as Sales Order. Order {0} may have been converted.", [e.name]),
        color: "error"
      }) : t.eventBus.emit("show_message", {
        title: __("Error updating order: {0}", [n.message || "Unknown error"]),
        color: "error"
      }), !1;
    }
  },
  // Create restaurant order
  create_restaurant_order(e) {
    var t = this;
    return sn() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: "posawesome.posawesome.api.restaurant_orders.create_restaurant_order",
      args: {
        order_data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message)
          if (n.message.sales_order)
            if (t.invoice_doc = n.message.sales_order, n.message.auto_print_kot && n.message.kot_data)
              try {
                Promise.resolve().then(() => FD).then((a) => {
                  t.pos_profile.posa_silent_print ? a.printKOTSilent(n.message.kot_data) : a.printKOTWithPreview(n.message.kot_data);
                }), t.eventBus.emit("show_message", {
                  title: __("Restaurant order {0} created and KOT printed", [t.invoice_doc.name]),
                  color: "success"
                });
              } catch (a) {
                console.error("Auto KOT print failed:", a), t.eventBus.emit("show_message", {
                  title: __("Restaurant order {0} created (KOT print failed)", [t.invoice_doc.name]),
                  color: "warning"
                });
              }
            else
              t.eventBus.emit("show_message", {
                title: __("Restaurant order {0} created successfully", [t.invoice_doc.name]),
                color: "success"
              });
          else
            t.invoice_doc = n.message, t.eventBus.emit("show_message", {
              title: __("Restaurant order {0} created successfully", [n.message.name]),
              color: "success"
            });
        else
          t.eventBus.emit("show_message", {
            title: __("Error creating restaurant order"),
            color: "error"
          });
      }
    }), this.invoice_doc);
  },
  // Process and save invoice (handles update or create)
  process_invoice() {
    const e = this.get_invoice_doc();
    try {
      const t = this.update_invoice(e);
      return t && t.posting_date && (this.posting_date = this.formatDateForBackend(t.posting_date)), t;
    } catch (t) {
      return console.error("Error in process_invoice:", t), this.eventBus.emit("show_message", {
        title: __(t.message || "Error processing invoice"),
        color: "error"
      }), !1;
    }
  },
  // Update invoice while preserving Sales Order references
  update_invoice_preserve_so_refs(e) {
    try {
      console.log("Updating invoice while preserving Sales Order references");
      const t = {};
      e.items && e.items.forEach((a, r) => {
        t[r] = {
          sales_order: a.sales_order,
          so_detail: a.so_detail
        };
      });
      const n = this.update_invoice(e);
      return n && n.items && Object.keys(t).length > 0 && (n.items.forEach((a, r) => {
        t[r] && (a.sales_order = t[r].sales_order, a.so_detail = t[r].so_detail);
      }), console.log("Restored Sales Order references in updated invoice")), n;
    } catch (t) {
      return console.error("Error updating invoice with SO refs preservation:", t), e;
    }
  },
  // Process and save invoice from order
  async process_invoice_from_order() {
    const e = await this.get_invoice_from_order_doc();
    var t;
    return e.name ? (t = await this.update_invoice_from_order(e), t) : this.update_invoice_from_order(e);
  },
  // Show payment dialog after validation and processing
  async show_payment() {
    try {
      if (console.log("Starting show_payment process"), console.log("Invoice state before payment:", {
        invoiceType: this.invoiceType,
        is_return: this.invoice_doc ? this.invoice_doc.is_return : !1,
        items_count: this.items.length,
        customer: this.customer,
        invoice_doc_name: this.invoice_doc ? this.invoice_doc.name : null,
        invoice_doc_doctype: this.invoice_doc ? this.invoice_doc.doctype : null
      }), !this.customer) {
        console.log("Customer validation failed"), this.eventBus.emit("show_message", {
          title: __("Select a customer"),
          color: "error"
        });
        return;
      }
      if (!this.items.length) {
        console.log("Items validation failed - no items"), this.eventBus.emit("show_message", {
          title: __("Select items to sell"),
          color: "error"
        });
        return;
      }
      console.log("Basic validations passed, proceeding to main validation");
      const e = this.validate();
      if (console.log("Main validation result:", e), !e) {
        console.log("Main validation failed");
        return;
      }
      let t;
      if (console.log("Determining processing path:", {
        has_invoice_doc: !!this.invoice_doc,
        invoice_doc_name: this.invoice_doc?.name,
        invoice_doc_doctype: this.invoice_doc?.doctype,
        invoiceType: this.invoiceType,
        restaurant_mode: this.pos_profile.posa_enable_restaurant_mode
      }), this.pos_profile.posa_enable_restaurant_mode && this.invoice_doc && this.invoice_doc.name && (this.invoice_doc.doctype === "Sales Order" || this.invoiceType === "Order")) {
        console.log("Processing existing Sales Order for payment in restaurant mode");
        const n = this.get_invoice_doc();
        if (console.log("Document analysis:", {
          name: n.name,
          doctype: n.doctype,
          docstatus: n.docstatus,
          invoice_doc_name: this.invoice_doc.name,
          invoice_doc_doctype: this.invoice_doc.doctype
        }), n.name && n.name.startsWith("ACC-SINV-") && n.doctype === "Sales Invoice")
          console.log("SKIP CONVERSION: Already have Sales Invoice, proceeding directly to payment"), t = n, this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice"], this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Changed invoice type to 'Invoice' for existing Sales Invoice");
        else {
          let a = null;
          if (n.name && n.name.startsWith("SAL-ORD-") ? (a = n.name, console.log("PRESERVE: Original Sales Order name:", a)) : (console.warn("UNEXPECTED: Document doesn't have Sales Order format, using as-is"), a = n.name), this.invoice_doc.docstatus === 1 ? (console.log("Updating submitted Sales Order"), t = await this.update_submitted_order(n)) : (console.log("Updating draft Sales Order (keeping draft status)"), t = this.update_invoice(n)), !t && !a) {
            console.log("Failed to update Sales Order");
            return;
          }
          const r = a || t && t.name;
          if (t && t.docstatus === 0)
            console.log("Draft order - going to payment window without conversion:", r);
          else {
            console.log("Converting submitted Sales Order to Sales Invoice:", r);
            try {
              const i = await frappe.call({
                method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
                args: {
                  sales_order_name: r
                }
              });
              if (i.message)
                t = i.message, console.log("Successfully converted Sales Order to Sales Invoice for payment:", t.name), this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice"], this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Changed invoice type to 'Invoice' to activate payment buttons");
              else
                throw new Error("Failed to convert Sales Order to Sales Invoice");
            } catch (i) {
              console.error("Error converting Sales Order to Invoice:", i), this.eventBus.emit("show_message", {
                title: __("Error converting order to invoice for payment"),
                color: "error"
              });
              return;
            }
          }
        }
      } else this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order && !this.new_delivery_date && !this.invoice_doc.posa_delivery_date ? (console.log("Building local Sales Order doc for payment"), t = this.get_invoice_doc()) : this.invoice_doc.doctype == "Sales Order" && this.invoiceType === "Invoice" ? (console.log("Processing Sales Order payment"), t = await this.process_invoice_from_order()) : t && t.name && t.doctype === "Sales Invoice" ? (console.log("Using existing converted Sales Invoice:", t.name), t = this.update_invoice_preserve_so_refs(t) || t) : (console.log("Processing regular invoice"), t = this.process_invoice());
      if (!t) {
        console.log("Failed to process invoice");
        return;
      }
      t.currency = this.selected_currency || this.pos_profile.currency, t.conversion_rate = this.conversion_rate || 1, t.plc_conversion_rate = this.exchange_rate || 1, t.is_pos = 1, t.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, t.company = t.company || this.pos_profile.company, t.customer = t.customer || this.customer, t.pos_profile = t.pos_profile || this.pos_profile.name, !t.grand_total && this.subtotal && (t.grand_total = this.subtotal), !t.rounded_total && this.subtotal && (t.rounded_total = this.pos_profile.disable_rounded_total ? this.flt(this.subtotal, this.currency_precision) : this.roundAmount(this.subtotal)), console.log("Final invoice_doc for payment:", {
        name: t.name,
        doctype: t.doctype,
        is_pos: t.is_pos,
        grand_total: t.grand_total,
        rounded_total: t.rounded_total,
        customer: t.customer,
        company: t.company,
        currency: t.currency,
        pos_profile: t.pos_profile
      }), (this.isReturnInvoice || t.is_return) && (console.log("Preparing RETURN invoice for payment with:", {
        is_return: t.is_return,
        invoiceType: this.invoiceType,
        return_against: t.return_against,
        items: t.items.length,
        grand_total: t.grand_total
      }), t.is_return = 1, t.grand_total > 0 && (t.grand_total = -Math.abs(t.grand_total)), t.rounded_total > 0 && (t.rounded_total = -Math.abs(t.rounded_total)), t.total > 0 && (t.total = -Math.abs(t.total)), t.base_grand_total > 0 && (t.base_grand_total = -Math.abs(t.base_grand_total)), t.base_rounded_total > 0 && (t.base_rounded_total = -Math.abs(t.base_rounded_total)), t.base_total > 0 && (t.base_total = -Math.abs(t.base_total)), t.items && t.items.length && t.items.forEach((n) => {
        n.qty > 0 && (n.qty = -Math.abs(n.qty)), n.stock_qty > 0 && (n.stock_qty = -Math.abs(n.stock_qty)), n.amount > 0 && (n.amount = -Math.abs(n.amount));
      })), t.payments = this.get_payments(), console.log("Final payment data:", t.payments), (this.isReturnInvoice || t.is_return) && t.payments.length && (t.payments.forEach((n) => {
        n.amount > 0 && (n.amount = -Math.abs(n.amount)), n.base_amount > 0 && (n.base_amount = -Math.abs(n.base_amount));
      }), console.log("Ensured negative payment amounts for return:", t.payments)), console.log("Showing payment dialog with currency:", t.currency), this.eventBus.emit("show_payment", "true"), this.eventBus.emit("send_invoice_doc_payment", t);
    } catch (e) {
      console.error("Error in show_payment:", e), this.eventBus.emit("show_message", {
        title: __("Error processing payment"),
        color: "error",
        message: e.message
      });
    }
  },
  // Validate invoice before payment/submit (return logic, quantity, rates, etc)
  async validate() {
    if (console.log("Starting return validation"), this.isReturnInvoice) {
      console.log("Validating return invoice values");
      const e = this.items.filter((t) => t.qty >= 0 || t.stock_qty >= 0);
      e.length > 0 && (console.log(
        "Found positive quantities in return items:",
        e.map((t) => t.item_code)
      ), this.eventBus.emit("show_message", {
        title: __("Return items must have negative quantities"),
        color: "error"
      }), e.forEach((t) => {
        t.qty = -Math.abs(t.qty), t.stock_qty = -Math.abs(t.stock_qty);
      }), this.$forceUpdate()), this.subtotal > 0 && (console.log("Return has positive subtotal:", this.subtotal), this.eventBus.emit("show_message", {
        title: __("Return total must be negative"),
        color: "warning"
      }));
    }
    if (this.invoice_doc.is_return && this.invoice_doc.return_against) {
      console.log("Return doc:", this.invoice_doc), console.log("Current items:", this.items);
      try {
        const e = await new Promise((t, n) => {
          frappe.call({
            method: "frappe.client.get",
            args: {
              doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice",
              name: this.invoice_doc.return_against
            },
            callback: (a) => {
              a.message ? (console.log("Original invoice data:", a.message), t(a.message.items || [])) : n(new Error("Original invoice not found"));
            }
          });
        });
        console.log("Original invoice items:", e), console.log(
          "Original item codes:",
          e.map((t) => ({
            item_code: t.item_code,
            qty: t.qty,
            rate: t.rate
          }))
        );
        for (const t of this.items) {
          console.log("Validating return item:", {
            item_code: t.item_code,
            rate: t.rate,
            qty: t.qty
          });
          const n = t.item_code.trim().toUpperCase(), a = e.find(
            (l) => l.item_code.trim().toUpperCase() === n
          );
          if (!a)
            return console.log("Item not found in original invoice:", {
              return_item_code: n,
              original_items: e.map((l) => l.item_code.trim().toUpperCase())
            }), this.eventBus.emit("show_message", {
              title: __(`Item ${t.item_code} not found in original invoice`),
              color: "error"
            }), !1;
          const r = Math.abs(a.rate - t.rate);
          if (console.log("Rate comparison:", {
            return_rate: t.rate,
            orig_rate: a.rate,
            difference: r
          }), r > 0.01)
            return this.eventBus.emit("show_message", {
              title: __(`Rate mismatch for item ${t.item_code}`),
              color: "error"
            }), !1;
          const i = Math.abs(t.qty), o = a.qty;
          if (console.log("Quantity comparison:", {
            return_qty: i,
            orig_qty: o
          }), i > o)
            return this.eventBus.emit("show_message", {
              title: __(
                `Return quantity cannot be greater than original quantity for item ${t.item_code}`
              ),
              color: "error"
            }), !1;
        }
      } catch (e) {
        return console.error("Error in validation:", e), this.eventBus.emit("show_message", {
          title: __(`Error validating return: ${e.message}`),
          color: "error"
        }), !1;
      }
    }
    return !0;
  },
  // Get draft invoices from backend
  get_draft_invoices() {
    var e = this;
    frappe.call({
      method: "posawesome.posawesome.api.invoices.get_draft_invoices",
      args: {
        pos_opening_shift: this.pos_opening_shift.name,
        doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
      },
      async: !1,
      callback: function(t) {
        t.message && e.eventBus.emit("open_drafts", t.message);
      }
    });
  },
  // Get draft orders from backend
  get_draft_orders() {
    var e = this;
    frappe.call({
      method: "posawesome.posawesome.api.sales_orders.search_orders",
      args: {
        company: this.pos_profile.company,
        currency: this.pos_profile.currency
      },
      async: !1,
      callback: function(t) {
        t.message && e.eventBus.emit("open_orders", t.message);
      }
    });
  },
  // Open returns dialog
  open_returns() {
    this.eventBus.emit("open_returns", this.pos_profile.company);
  },
  // Close payment dialog
  close_payments() {
    this.eventBus.emit("show_payment", "false");
  },
  // Update details for all items (fetch from backend)
  async update_items_details(e) {
    if (e?.length && this.pos_profile)
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_details",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            items_data: JSON.stringify(e),
            price_list: this.selected_price_list || this.pos_profile.selling_price_list
          }
        });
        t?.message && e.forEach((n) => {
          const a = t.message.find(
            (r) => r.posa_row_id == n.posa_row_id
          );
          a && (n.actual_qty = a.actual_qty, n.item_uoms = a.item_uoms, n.has_batch_no = a.has_batch_no, n.has_serial_no = a.has_serial_no, n.batch_no_data = a.batch_no_data, n.serial_no_data = a.serial_no_data, a.rate !== void 0 && (!n.locked_price && !n.posa_offer_applied ? (a.rate !== 0 || !n.rate) && (n.rate = a.rate, n.price_list_rate = a.price_list_rate || a.rate) : n.price_list_rate || (n.price_list_rate = a.price_list_rate || a.rate)), a.currency && (n.currency = a.currency));
        });
      } catch (t) {
        console.error("Error updating items:", t), this.eventBus.emit("show_message", {
          title: __("Error updating item details"),
          color: "error"
        });
      }
  },
  // Update details for a single item (fetch from backend)
  update_item_detail(e, t = !1) {
    if (console.log("update_item_detail request", {
      code: e.item_code,
      force_update: t
    }), !e.item_code)
      return;
    var n = this;
    if (e._manual_rate_set && !t)
      return;
    const a = this.get_invoice_doc();
    console.log("update_item_detail - currentDoc info:", {
      name: a.name,
      doctype: a.doctype,
      docstatus: a.docstatus
    }), frappe.call({
      method: "posawesome.posawesome.api.items.get_item_detail",
      args: {
        warehouse: e.warehouse || this.pos_profile.warehouse,
        doc: a,
        price_list: this.selected_price_list || this.pos_profile.selling_price_list,
        item: {
          item_code: e.item_code,
          customer: this.customer,
          doctype: a.doctype,
          name: a.name || `New ${a.doctype} 1`,
          company: this.pos_profile.company,
          conversion_rate: 1,
          currency: this.pos_profile.currency,
          qty: e.qty,
          price_list_rate: e.base_price_list_rate || e.price_list_rate,
          child_docname: `New ${a.doctype} Item 1`,
          cost_center: this.pos_profile.cost_center,
          pos_profile: this.pos_profile.name,
          uom: e.uom,
          tax_category: "",
          transaction_type: "selling",
          update_stock: this.pos_profile.posa_enable_restaurant_mode ? 0 : this.pos_profile.update_stock,
          price_list: this.get_price_list(),
          has_batch_no: e.has_batch_no,
          has_serial_no: e.has_serial_no,
          serial_no: e.serial_no,
          batch_no: e.batch_no,
          is_stock_item: e.is_stock_item
        }
      },
      callback: function(r) {
        if (console.log("=== get_item_detail API response ===", r), r.message) {
          const i = r.message;
          if (e.warehouse || (e.warehouse = n.pos_profile.warehouse), i.price_list_currency && (n.price_list_currency = i.price_list_currency), e.original_currency || (e.original_currency = i.price_list_currency || n.price_list_currency || n.selected_currency), e.original_rate || (e.original_rate = i.price_list_rate), i.serial_no_data && (e.serial_no_data = i.serial_no_data), i.batch_no_data && (e.batch_no_data = i.batch_no_data), e.has_batch_no && n.pos_profile.posa_auto_set_batch && !e.batch_no && i.batch_no_data && i.batch_no_data.length > 0 && (e.batch_no_data = i.batch_no_data, n.set_batch_qty(e, null, !1)), !e.locked_price) {
            if ((t || !e.base_rate) && (i.price_list_rate !== 0 || !e.base_price_list_rate) && (e.base_price_list_rate = i.price_list_rate, e.posa_offer_applied || (e.base_rate = i.price_list_rate)), e.posa_offer_applied) {
              const o = n.price_list_currency || n.pos_profile.currency;
              n.selected_currency !== o ? e.price_list_rate = n.flt(
                e.base_rate * n.exchange_rate,
                n.currency_precision
              ) : e.price_list_rate = e.base_rate;
            } else {
              const o = n.pos_profile.currency, l = o;
              if (n.selected_currency === n.price_list_currency && n.selected_currency !== o) {
                const s = n.conversion_rate || 1;
                e.price_list_rate = n.flt(
                  e.base_price_list_rate / s,
                  n.currency_precision
                ), e._manual_rate_set || (e.rate = n.flt(e.base_rate / s, n.currency_precision));
              } else if (n.selected_currency !== l) {
                const s = n.exchange_rate || 1;
                e.price_list_rate = n.flt(
                  e.base_price_list_rate * s,
                  n.currency_precision
                ), e.rate = n.flt(e.base_rate * s, n.currency_precision);
              } else
                e.price_list_rate = e.base_price_list_rate, e._manual_rate_set || (e.rate = e.base_rate);
            }
            if (!e.posa_offer_applied && n.pos_profile.posa_apply_customer_discount && n.customer_info.posa_discount > 0 && n.customer_info.posa_discount <= 100 && e.posa_is_offer == 0 && !e.posa_is_replace) {
              const o = e.max_discount > 0 ? Math.min(e.max_discount, n.customer_info.posa_discount) : n.customer_info.posa_discount;
              e.discount_percentage = o;
              const l = n.flt(
                e.price_list_rate * o / 100,
                n.currency_precision
              );
              e.discount_amount = l, e.base_discount_amount = n.flt(
                e.base_price_list_rate * o / 100,
                n.currency_precision
              ), e.rate = n.flt(e.price_list_rate - l, n.currency_precision), e.base_rate = n.flt(
                e.base_price_list_rate - e.base_discount_amount,
                n.currency_precision
              );
            }
          }
          e.last_purchase_rate = i.last_purchase_rate, e.projected_qty = i.projected_qty, e.reserved_qty = i.reserved_qty, e.conversion_factor = i.conversion_factor, e.stock_qty = i.stock_qty, e.actual_qty = i.actual_qty, e.stock_uom = i.stock_uom, e.has_serial_no = i.has_serial_no, e.has_batch_no = i.has_batch_no, e.amount = n.flt(e.qty * e.rate, n.currency_precision), e.base_amount = n.flt(e.qty * e.base_rate, n.currency_precision), console.log(`Updated rates for ${e.item_code} on expand:`, {
            base_rate: e.base_rate,
            rate: e.rate,
            base_price_list_rate: e.base_price_list_rate,
            price_list_rate: e.price_list_rate,
            exchange_rate: n.exchange_rate,
            selected_currency: n.selected_currency,
            default_currency: n.pos_profile.currency
          }), n.$forceUpdate();
        }
      },
      error: function(r) {
        console.error("=== get_item_detail API ERROR ===", r), console.error("Error details:", {
          status: r.status,
          statusText: r.statusText,
          responseText: r.responseText,
          currentDoc: a,
          item_code: e.item_code
        });
      }
    });
  },
  // Fetch customer details (info, price list, etc)
  async fetch_customer_details() {
    var e = this;
    if (this.customer) {
      if (sn())
        try {
          const n = (await XO() || []).find(
            (r) => r.name === e.customer || r.customer_name === e.customer
          );
          if (n) {
            e.customer_info = { ...n }, e.pos_profile.posa_force_reload_items && n.customer_price_list && (e.selected_price_list = n.customer_price_list, e.eventBus.emit("update_customer_price_list", n.customer_price_list), e.apply_cached_price_list(n.customer_price_list));
            return;
          }
          const a = (r1() || []).map((r) => r.args).find((r) => r.customer_name === e.customer);
          if (a) {
            e.customer_info = { ...a, name: a.customer_name }, e.pos_profile.posa_force_reload_items && a.customer_price_list && (e.selected_price_list = a.customer_price_list, e.eventBus.emit("update_customer_price_list", a.customer_price_list), e.apply_cached_price_list(a.customer_price_list));
            return;
          }
        } catch (t) {
          console.error("Failed to fetch cached customer", t);
        }
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.customers.get_customer_info",
          args: {
            customer: e.customer
          }
        }), n = t.message;
        t.exc || (e.customer_info = {
          ...n
        }), e.pos_profile.posa_force_reload_items && n.customer_price_list && (e.selected_price_list = n.customer_price_list, e.eventBus.emit("update_customer_price_list", n.customer_price_list), e.apply_cached_price_list(n.customer_price_list));
      } catch (t) {
        console.error("Failed to fetch customer details", t);
      }
    }
  },
  // Get price list for current customer
  get_price_list() {
    return this.selected_price_list || this.pos_profile.selling_price_list;
  },
  // Update price list for customer
  update_price_list() {
    const e = this.pos_profile.selling_price_list;
    this.selected_price_list !== e && (this.selected_price_list = e, this.eventBus.emit("update_customer_price_list", null));
  },
  // Apply cached price list rates to existing invoice items
  async apply_cached_price_list(e) {
    const t = await JO(e);
    if (!Array.isArray(t) || !t.length)
      return;
    const n = {};
    t.forEach((a) => {
      n[a.item_code] = a;
    }), this.items.forEach((a) => {
      const r = n[a.item_code];
      if (!r) return;
      const i = r.rate || r.price_list_rate, o = r.currency || this.selected_currency;
      if (a.original_currency || (a.original_currency = o), a.original_rate || (a.original_rate = i), o === this.selected_currency) {
        const l = this.pos_profile.currency;
        if (o !== l) {
          const s = this.conversion_rate || 1;
          a.base_price_list_rate = i * s, a._manual_rate_set || (a.base_rate = i * s);
        } else
          a.base_price_list_rate = i, a._manual_rate_set || (a.base_rate = i);
        a.price_list_rate = i, a._manual_rate_set || (a.rate = i);
      } else {
        (i !== 0 || !a.base_price_list_rate) && (a.base_price_list_rate = i, a._manual_rate_set || (a.base_rate = i));
        const l = this.pos_profile.currency;
        if (this.selected_currency !== l) {
          const s = this.exchange_rate || 1, d = this.flt(i * s, this.currency_precision);
          (i !== 0 || !a.price_list_rate) && (a.price_list_rate = d), !a._manual_rate_set && (i !== 0 || !a.rate) && (a.rate = d);
        } else
          (i !== 0 || !a.price_list_rate) && (a.price_list_rate = i), !a._manual_rate_set && (i !== 0 || !a.rate) && (a.rate = i);
      }
      a.amount = this.flt(a.qty * a.rate, this.currency_precision), a.base_amount = this.flt(a.qty * a.base_rate, this.currency_precision);
    }), this.$forceUpdate();
  },
  // Update additional discount amount based on percentage
  update_discount_umount() {
    return Ene(this);
  },
  // Calculate prices and discounts for an item based on field change
  calc_prices(e, t, n) {
    return Pne(e, t, n, this);
  },
  // Calculate item price and discount fields
  calc_item_price(e) {
    return One(e, this);
  },
  // Update UOM (unit of measure) for an item and recalculate prices
  calc_uom(e, t) {
    return Rne(e, t, this);
  },
  // Calculate stock quantity for an item with stock validation
  calc_stock_qty(e, t) {
    ky(e, t, this), e.is_stock_item && (this.update_qty_limits && this.update_qty_limits(e), e.max_qty !== void 0 && flt(e.qty) > flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e.qty = e.max_qty, ky(e, e.qty, this), this.$forceUpdate(), this.eventBus.emit("show_message", {
      title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
        this.formatFloat(e.max_qty)
      ]),
      color: "error"
    })) : this.eventBus.emit("show_message", {
      title: __("Stock is lower than requested. Proceeding may create negative stock."),
      color: "warning"
    })));
  },
  // Update quantity limits based on available stock
  update_qty_limits(e) {
    e && e.available_qty !== void 0 && e.is_stock_item ? (e.max_qty = flt(e.available_qty / (e.conversion_factor || 1)), e.max_qty !== void 0 && flt(e.qty) > flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e.qty = e.max_qty, ky(e, e.qty, this), this.$forceUpdate(), this.eventBus.emit("show_message", {
      title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
        this.formatFloat(e.max_qty)
      ]),
      color: "error"
    })) : this.eventBus.emit("show_message", {
      title: __("Stock is lower than requested. Proceeding may create negative stock."),
      color: "warning"
    })), e.disable_increment = (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty) && e.qty >= e.max_qty) : e && !e.is_stock_item && (e.max_qty = void 0, e.disable_increment = !1);
  },
  // Fetch available stock for an item and cache it
  async fetch_available_qty(e) {
    if (!e || !e.item_code || !e.warehouse || !e.is_stock_item) {
      e && !e.is_stock_item && (e.available_qty = void 0, e.max_qty = void 0, e.disable_increment = !1);
      return;
    }
    const t = `${e.item_code}:${e.warehouse}:${e.batch_no || ""}:${e.uom}`, n = this.available_stock_cache[t], a = Date.now();
    if (n && a - n.ts < 6e4) {
      e.available_qty = n.qty, this.update_qty_limits(e);
      return;
    }
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.items.get_available_qty",
        args: {
          items: JSON.stringify([
            {
              item_code: e.item_code,
              warehouse: e.warehouse,
              batch_no: e.batch_no
            }
          ])
        }
      }), i = r.message && r.message.length ? flt(r.message[0].available_qty) : 0;
      this.available_stock_cache[t] = { qty: i, ts: a }, e.available_qty = i, this.update_qty_limits(e);
    } catch (r) {
      console.error("Failed to fetch available qty", r);
    }
  },
  // Set serial numbers for an item (and update qty)
  set_serial_no(e) {
    return Tne(e, this);
  },
  // Set batch number for an item (and update batch data)
  set_batch_qty(e, t, n = !0) {
    return Ine(e, t, n, this);
  },
  change_price_list_rate(e) {
    const t = this, n = new frappe.ui.Dialog({
      title: __("Change Price"),
      fields: [
        {
          fieldname: "new_rate",
          fieldtype: "Float",
          label: __("New Price List Rate"),
          default: e.price_list_rate || e.rate,
          reqd: 1
        }
      ],
      primary_action_label: __("Update"),
      primary_action(a) {
        const r = flt(a.new_rate);
        frappe.call({
          method: "posawesome.posawesome.api.items.update_price_list_rate",
          args: {
            item_code: e.item_code,
            price_list: t.get_price_list(),
            rate: r,
            uom: e.uom
          },
          callback(i) {
            i.exc || (e.price_list_rate = r, e.base_price_list_rate = r, e._manual_rate_set || (e.rate = r, e.base_rate = r), t.calc_item_price(e), t.eventBus.emit("show_message", {
              title: i.message || __("Item price updated"),
              color: "success"
            }));
          }
        }), n.hide();
      }
    });
    n.get_field("new_rate").$input.on("keydown", function(a) {
      a.key === "Enter" && n.get_primary_btn().click();
    }), n.show();
  }
}, Fne = {
  // Calculate total quantity of all items
  total_qty() {
    this.close_payments();
    let e = 0;
    return this.items.forEach((t) => {
      e += flt(t.qty);
    }), this.flt(e, this.float_precision);
  },
  // Calculate total amount for all items (handles returns)
  Total() {
    let e = 0;
    return this.items.forEach((t) => {
      const n = this.isReturnInvoice ? Math.abs(flt(t.qty)) : flt(t.qty), a = flt(t.rate);
      e += n * a;
    }), this.flt(e, this.currency_precision);
  },
  // Calculate subtotal after discounts and delivery charges
  subtotal() {
    this.close_payments();
    let e = 0;
    this.items.forEach((a) => {
      const r = this.isReturnInvoice ? Math.abs(flt(a.qty)) : flt(a.qty), i = flt(a.rate);
      e += r * i;
    });
    const t = this.flt(this.additional_discount);
    e -= t;
    const n = this.flt(this.delivery_charges_rate);
    return e += n, this.flt(e, this.currency_precision);
  },
  // Calculate total discount amount for all items
  total_items_discount_amount() {
    let e = 0;
    return this.items.forEach((t) => {
      this.isReturnInvoice ? e += Math.abs(flt(t.qty)) * flt(t.discount_amount) : e += flt(t.qty) * flt(t.discount_amount);
    }), this.flt(e, this.float_precision);
  },
  // Format posting_date for display as DD-MM-YYYY
  formatted_posting_date: {
    get() {
      if (!this.posting_date) return "";
      const e = this.posting_date.split("-");
      return e.length === 3 ? `${e[2]}-${e[1]}-${e[0]}` : this.posting_date;
    },
    set(e) {
      const t = e.split("-");
      t.length === 3 ? this.posting_date = `${t[2]}-${t[1]}-${t[0]}` : this.posting_date = e;
    }
  },
  // Get currency symbol for display
  currencySymbol() {
    return (e) => get_currency_symbol(e || this.selected_currency || this.pos_profile.currency);
  },
  // Get display currency
  displayCurrency() {
    return this.selected_currency || this.pos_profile.currency;
  },
  // Determine if current invoice is a return
  isReturnInvoice() {
    return this.invoiceType === "Return" || this.invoice_doc && this.invoice_doc.is_return;
  },
  // Table headers for item table (for another table if needed)
  itemTableHeaders() {
    return [
      {
        text: __("Item"),
        value: "item_name",
        width: "35%"
      },
      {
        text: __("Qty"),
        value: "qty",
        width: "15%"
      },
      {
        text: __(`Rate (${this.displayCurrency})`),
        value: "rate",
        width: "20%"
      },
      {
        text: __(`Amount (${this.displayCurrency})`),
        value: "amount",
        width: "20%"
      },
      {
        text: __("Action"),
        value: "actions",
        sortable: !1,
        width: "10%"
      }
    ];
  }
}, Nne = {
  // Watch for customer change and update related data
  customer() {
    this.close_payments(), this.eventBus.emit("set_customer", this.customer), this.fetch_customer_details(), this.fetch_customer_balance(), this.set_delivery_charges();
  },
  // Watch for customer_info change and emit to edit form
  customer_info() {
    this.eventBus.emit("set_customer_info_to_edit", this.customer_info);
  },
  // Watch for expanded row change and update item detail
  expanded(e) {
    if (e.length > 0) {
      const t = e[0], n = this.items.find((a) => a.posa_row_id === t);
      n && this.update_item_detail(n);
    }
  },
  // Watch for discount offer name change and emit
  discount_percentage_offer_name() {
    this.eventBus.emit("update_discount_percentage_offer_name", {
      value: this.discount_percentage_offer_name
    });
  },
  // Watch for items array changes (deep) and re-handle offers
  items: {
    deep: !0,
    handler() {
      this.isApplyingOffer || (this.handelOffers(), this.$forceUpdate());
    }
  },
  packed_items: {
    deep: !0,
    handler() {
      this.isApplyingOffer || (this.handelOffers(), this.$forceUpdate());
    }
  },
  // Watch for invoice type change and emit
  invoiceType() {
    this.eventBus.emit("update_invoice_type", this.invoiceType);
  },
  // Watch for additional discount and update percentage accordingly
  additional_discount() {
    !this.additional_discount || this.additional_discount == 0 ? this.additional_discount_percentage = 0 : this.pos_profile.posa_use_percentage_discount ? this.Total && this.Total !== 0 ? this.additional_discount_percentage = this.additional_discount / this.Total * 100 : this.additional_discount_percentage = 0 : this.additional_discount_percentage = 0;
  },
  // Keep display date in sync with posting_date
  posting_date: {
    handler(e) {
      this.posting_date_display = this.formatDateForDisplay(e);
    },
    immediate: !0
  },
  // Update posting_date when user changes the display value
  posting_date_display(e) {
    this.posting_date = this.formatDateForBackend(e);
  },
  selected_price_list(e) {
    Lu();
    const t = e === this.pos_profile.selling_price_list ? null : e;
    this.eventBus.emit("update_customer_price_list", t);
    const n = e || this.pos_profile.selling_price_list;
    this.apply_cached_price_list(n), this.pos_profile.posa_allow_multi_currency && n && frappe.call({
      method: "posawesome.posawesome.api.invoices.get_price_list_currency",
      args: { price_list: n },
      callback: (a) => {
        a.message && (this.price_list_currency = a.message, this.update_currency(a.message));
      }
    });
  },
  // Reactively update item prices when currency changes
  selected_currency() {
    Lu(), this.items && this.items.length && this.update_item_rates();
  },
  // Reactively update item prices when exchange rate changes
  exchange_rate() {
    this.items && this.items.length && this.update_item_rates();
  }
};
function Fp(e) {
  if (e)
    try {
      const t = document.createElement("iframe");
      t.style.position = "fixed", t.style.right = "0", t.style.bottom = "0", t.style.width = "0", t.style.height = "0", t.style.border = "0", t.onload = () => {
        try {
          t.contentWindow.focus(), t.contentWindow.print();
        } finally {
          setTimeout(() => t.remove(), 1e3);
        }
      }, t.src = e, document.body.appendChild(t);
    } catch (t) {
      console.error("Silent print failed, falling back to new window", t);
      const n = window.open(e, "_blank");
      n && n.addEventListener("load", () => n.print(), { once: !0 });
    }
}
const Une = {
  checkOfferIsAppley(e, t) {
    let n = !1;
    const a = JSON.parse(e.posa_offers);
    for (const r of a) {
      const i = this.posa_offers.find((o) => r == o.row_id);
      if (i && i.offer_name == t.name) {
        n = !0;
        break;
      }
    }
    return n;
  },
  handelOffers() {
    const e = [];
    this.posOffers.forEach((t) => {
      if (t.apply_on === "Item Code") {
        const n = this.getItemOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Item Group") {
        const n = this.getGroupOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Brand") {
        const n = this.getBrandOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Transaction") {
        const n = this.getTransactionOffer(t);
        n && e.push(n);
      }
    }), this.setItemGiveOffer(e), this.updatePosOffers(e);
  },
  setItemGiveOffer(e) {
    e.forEach((t) => {
      if (t.apply_on == "Item Code" && t.apply_type == "Item Code" && t.replace_item)
        t.give_item = t.item, t.apply_item_code = t.item;
      else if (t.apply_on == "Item Group" && t.apply_type == "Item Group" && t.replace_cheapest_item) {
        const n = this.getCheapestItem(t).item_code;
        t.give_item = n, t.apply_item_code = n;
      }
    });
  },
  getCheapestItem(e) {
    let t;
    typeof e.items == "string" ? t = JSON.parse(e.items) : t = e.items;
    const n = [];
    return t.forEach((r) => {
      n.push(this.getItemFromRowID(r));
    }), n.reduce(function(r, i) {
      return !i.posa_is_replace && !i.posa_is_offer && i.price_list_rate < r.price_list_rate ? i : r;
    });
  },
  getItemFromRowID(e) {
    return [...this.items, ...this.packed_items].find((n) => n.posa_row_id == e);
  },
  checkQtyAnountOffer(e, t, n) {
    let a = !1, r = !1, i = !1, o = !1;
    const l = [];
    (e.min_qty || e.min_qty == 0) && (t >= e.min_qty && (a = !0), l.push(a)), e.max_qty > 0 && (t <= e.max_qty && (r = !0), l.push(r)), e.min_amt > 0 && (n >= e.min_amt && (i = !0), l.push(i)), e.max_amt > 0 && (n <= e.max_amt && (o = !0), l.push(o));
    let s = !1;
    return l.includes(!1) || (s = !0), {
      apply: s,
      conditions: { min_qty: a, max_qty: r, min_amt: i, max_amt: o }
    };
  },
  checkOfferCoupon(e) {
    if (e.coupon_based) {
      const t = this.posa_coupons.find((n) => e.name == n.pos_offer);
      return t ? (e.coupon = t.coupon, !0) : !1;
    } else
      return e.coupon = null, !0;
  },
  getItemOffer(e) {
    let t = null;
    return e.apply_on === "Item Code" && this.checkOfferCoupon(e) && [...this.items, ...this.packed_items].forEach((a) => {
      if (!a.posa_is_offer && a.item_code === e.item) {
        if (e.offer === "Item Price" && a.posa_offer_applied && !this.checkOfferIsAppley(a, e))
          return;
        const r = [], i = a.original_price_list_rate || a.price_list_rate;
        this.checkQtyAnountOffer(e, a.stock_qty, a.stock_qty * i).apply && (r.push(a.posa_row_id), e.items = r, t = e);
      }
    }), t;
  },
  getGroupOffer(e) {
    let t = null;
    if (e.apply_on === "Item Group" && this.checkOfferCoupon(e)) {
      const n = [];
      let a = 0, r = 0;
      [...this.items, ...this.packed_items].forEach((o) => {
        if (!o.posa_is_offer && o.item_group === e.item_group) {
          if (e.offer === "Item Price" && o.posa_offer_applied && !this.checkOfferIsAppley(o, e))
            return;
          a += o.stock_qty;
          const l = o.original_price_list_rate || o.price_list_rate;
          r += o.stock_qty * l, n.push(o.posa_row_id);
        }
      }), (a || r) && this.checkQtyAnountOffer(e, a, r).apply && (e.items = n, t = e);
    }
    return t;
  },
  getBrandOffer(e) {
    let t = null;
    if (e.apply_on === "Brand" && this.checkOfferCoupon(e)) {
      const n = [];
      let a = 0, r = 0;
      [...this.items, ...this.packed_items].forEach((o) => {
        if (!o.posa_is_offer && o.brand === e.brand) {
          if (e.offer === "Item Price" && o.posa_offer_applied && !this.checkOfferIsAppley(o, e))
            return;
          a += o.stock_qty;
          const l = o.original_price_list_rate || o.price_list_rate;
          r += o.stock_qty * l, n.push(o.posa_row_id);
        }
      }), (a || r) && this.checkQtyAnountOffer(e, a, r).apply && (e.items = n, t = e);
    }
    return t;
  },
  getTransactionOffer(e) {
    let t = null;
    if (e.apply_on === "Transaction" && this.checkOfferCoupon(e)) {
      const n = [...this.items, ...this.packed_items];
      let a = 0, r = 0;
      const i = [];
      n.forEach((l) => {
        if (!l.posa_is_offer && !l.posa_is_replace) {
          a += l.stock_qty;
          const s = l.original_price_list_rate || l.price_list_rate;
          r += l.stock_qty * s, i.push(l.posa_row_id);
        }
      });
      const o = a;
      (o || r) && this.checkQtyAnountOffer(e, o, r).apply && (e.items = i, t = e);
    }
    return t;
  },
  updatePosOffers(e) {
    this.eventBus.emit("update_pos_offers", e);
  },
  updateInvoiceOffers(e) {
    this.posa_offers.forEach((t) => {
      e.find((a) => t.row_id == a.row_id) || this.removeApplyOffer(t);
    }), e.forEach((t) => {
      const n = this.posa_offers.find((a) => a.row_id == t.row_id);
      if (n) {
        if (n.items = JSON.stringify(t.items), n.offer === "Give Product" && n.give_item && n.give_item != t.give_item) {
          const a = [...this.items, ...this.packed_items], r = a.find(
            (o) => o.posa_row_id == n.give_item_row_id
          );
          if (r) {
            const o = t.items.filter(
              (d) => d != r.posa_row_id
            );
            t.items = o;
            const l = this.items.includes(r) ? this.items : this.packed_items, s = l.findIndex(
              (d) => d.posa_row_id == r.posa_row_id
            );
            s > -1 && l.splice(s, 1), n.give_item_row_id = null, n.give_item = null;
          }
          const i = this.ApplyOnGiveProduct(t);
          if (t.replace_cheapest_item) {
            const o = this.getCheapestItem(t), l = a.find(
              (d) => d.posa_row_id == r.posa_is_replace
            );
            if (i.qty = r.qty, l && !l.posa_is_replace)
              l.qty += r.qty;
            else {
              const d = this.ApplyOnGiveProduct(
                {
                  given_qty: r.qty
                },
                r.item_code
              );
              d.posa_is_offer = 0, this.items.unshift(d);
            }
            i.posa_is_offer = 0, i.posa_is_replace = o.posa_row_id;
            const s = o.qty - i.qty;
            if (s <= 0) {
              i.qty += s;
              const d = this.items.includes(o) ? this.items : this.packed_items, u = d.findIndex(
                (f) => f.posa_row_id == o.posa_row_id
              );
              u > -1 && d.splice(u, 1), i.posa_row_id = o.posa_row_id, i.posa_is_replace = i.posa_row_id;
            } else
              o.qty = s;
          }
          this.items.unshift(i), n.give_item_row_id = i.posa_row_id, n.give_item = i.item_code;
        } else n.offer === "Give Product" && n.give_item && n.give_item == t.give_item && (t.replace_item || t.replace_cheapest_item) ? this.$nextTick(function() {
          const a = this.getItemFromRowID(n.give_item_row_id), r = t.given_qty - a.qty;
          if (r > 0) {
            const i = JSON.parse(n.items), o = [];
            i.forEach((s) => {
              o.push(this.getItemFromRowID(s));
            });
            const l = o.find(
              (s) => s.item_code == a.item_code && s.posa_is_replace != a.posa_row_id
            );
            if (l)
              if (l.qty - r > 0)
                a.qty += r, l.qty -= r;
              else {
                a.qty += l.qty;
                const d = this.items.includes(l) ? this.items : this.packed_items, u = d.findIndex(
                  (f) => f.posa_row_id == l.posa_row_id
                );
                u > -1 && d.splice(u, 1);
              }
          }
        }) : n.offer === "Item Price" ? this.ApplyOnPrice(t) : n.offer === "Grand Total" && this.ApplyOnTotal(t);
        this.addOfferToItems(n);
      } else
        this.applyNewOffer(t);
    });
  },
  removeApplyOffer(e) {
    if (e.offer === "Item Price") {
      this.RemoveOnPrice(e);
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    if (e.offer === "Give Product") {
      const n = [...this.items, ...this.packed_items].find((r) => r.posa_row_id == e.give_item_row_id), a = this.posa_offers.findIndex((r) => r.row_id === e.row_id);
      if (this.posa_offers.splice(a, 1), n) {
        const r = this.items.includes(n) ? this.items : this.packed_items, i = r.findIndex((o) => o.posa_row_id == n.posa_row_id);
        i > -1 && r.splice(i, 1);
      }
    }
    if (e.offer === "Grand Total") {
      this.RemoveOnTotal(e);
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    if (e.offer === "Loyalty Point") {
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    this.deleteOfferFromItems(e);
  },
  applyNewOffer(e) {
    if (this.isApplyingOffer = !0, e.offer === "Item Price" && this.ApplyOnPrice(e), e.offer === "Give Product") {
      let n;
      if (typeof e.items == "string" ? n = JSON.parse(e.items) : n = e.items, e.apply_on == "Item Code" && e.apply_type == "Item Code" && e.replace_item) {
        const a = this.ApplyOnGiveProduct(e, e.item);
        a.posa_is_replace = n[0];
        const i = [...this.items, ...this.packed_items].find((l) => l.posa_row_id == a.posa_is_replace), o = i.qty - e.given_qty;
        if (a.posa_is_offer = 0, o <= 0) {
          a.qty = i.qty;
          const l = this.items.includes(i) ? this.items : this.packed_items, s = l.findIndex((d) => d.posa_row_id == i.posa_row_id);
          s > -1 && l.splice(s, 1), a.posa_row_id = a.posa_is_replace;
        } else
          i.qty = o;
        this.items.unshift(a), e.give_item_row_id = a.posa_row_id;
      } else if (e.apply_on == "Item Group" && e.apply_type == "Item Group" && e.replace_cheapest_item) {
        const a = [];
        n.forEach((l) => {
          a.push(this.getItemFromRowID(l));
        });
        const r = a.find((l) => l.item_code == e.give_item), i = this.ApplyOnGiveProduct(e, e.give_item);
        i.posa_is_offer = 0, i.posa_is_replace = r.posa_row_id;
        const o = r.qty - e.given_qty;
        if (o <= 0) {
          i.qty = r.qty;
          const l = this.items.includes(r) ? this.items : this.packed_items, s = l.findIndex((d) => d.posa_row_id == r.posa_row_id);
          s > -1 && l.splice(s, 1), i.posa_row_id = i.posa_is_replace;
        } else
          r.qty = o;
        this.items.unshift(i), e.give_item_row_id = i.posa_row_id;
      } else {
        const a = this.ApplyOnGiveProduct(e);
        this.items.unshift(a), a && (e.give_item_row_id = a.posa_row_id);
      }
    }
    e.offer === "Grand Total" && this.ApplyOnTotal(e), e.offer === "Loyalty Point" && this.eventBus.emit("show_message", {
      title: __("Loyalty Point Offer Applied"),
      color: "success"
    });
    const t = {
      offer_name: e.name,
      row_id: e.row_id,
      apply_on: e.apply_on,
      offer: e.offer,
      items: JSON.stringify(e.items),
      give_item: e.give_item,
      give_item_row_id: e.give_item_row_id,
      offer_applied: e.offer_applied,
      coupon_based: e.coupon_based,
      coupon: e.coupon
    };
    this.posa_offers.push(t), this.addOfferToItems(t), this.isApplyingOffer = !1;
  },
  ApplyOnGiveProduct(e, t) {
    t || (t = e.give_item);
    const a = this.allItems.find((o) => o.item_code == t);
    if (!a)
      return;
    const r = { ...a };
    if (r.qty = e.given_qty, r.stock_qty = e.given_qty, e.discount_type === "Rate") {
      r.base_rate = e.rate;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.rate = this.flt(e.rate * this.exchange_rate, this.currency_precision) : r.rate = e.rate;
    } else if (e.discount_type === "Discount Percentage") {
      const o = a.base_rate || a.rate / this.exchange_rate, l = this.flt(
        o * e.discount_percentage / 100,
        this.currency_precision
      );
      r.base_discount_amount = l, r.base_rate = this.flt(o - l, this.currency_precision);
      const s = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== s ? (r.discount_amount = this.flt(
        l * this.exchange_rate,
        this.currency_precision
      ), r.rate = this.flt(r.base_rate * this.exchange_rate, this.currency_precision)) : (r.discount_amount = l, r.rate = r.base_rate);
    } else {
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? (r.base_rate = a.base_rate || a.rate / this.exchange_rate, r.rate = a.rate) : (r.base_rate = a.rate, r.rate = a.rate);
    }
    if (e.discount_type === "Discount Amount") {
      r.base_discount_amount = e.discount_amount;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.discount_amount = this.flt(
        e.discount_amount * this.exchange_rate,
        this.currency_precision
      ) : r.discount_amount = e.discount_amount;
    } else e.discount_type !== "Discount Percentage" && (r.base_discount_amount = 0, r.discount_amount = 0);
    r.discount_percentage = e.discount_type === "Discount Percentage" ? e.discount_percentage : 0, r.discount_amount_per_item = 0, r.uom = a.uom ? a.uom : a.stock_uom, r.actual_batch_qty = "", r.conversion_factor = 1, r.posa_offers = JSON.stringify([]), r.posa_offer_applied = e.discount_type === "Rate" || e.discount_type === "Discount Amount" || e.discount_type === "Discount Percentage" ? 1 : 0, r.posa_is_offer = 1, r.posa_is_replace = null, r.posa_notes = "", r.posa_delivery_date = "";
    const i = e.discount_type === "Rate" && !e.rate || e.discount_type === "Discount Percentage" && e.discount_percentage == 100;
    if (r.is_free_item = i ? 1 : 0, i)
      r.base_price_list_rate = 0, r.price_list_rate = 0;
    else {
      r.price_list_rate = a.rate;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.base_price_list_rate = this.flt(
        a.rate / this.exchange_rate,
        this.currency_precision
      ) : r.base_price_list_rate = a.rate;
    }
    return r.posa_row_id = this.makeid(20), (!this.pos_profile.posa_auto_set_batch && r.has_batch_no || r.has_serial_no) && this.expanded.push(r.posa_row_id), this.update_item_detail(r), r;
  },
  ApplyOnPrice(e) {
    if (console.log("Applying price offer:", e), !e) return;
    [...this.items, ...this.packed_items].forEach((n) => {
      if (!(!n || !e.items || !Array.isArray(e.items)) && e.items.includes(n.posa_row_id)) {
        const a = n.posa_offers ? JSON.parse(n.posa_offers) : [];
        if (!Array.isArray(a)) return;
        if (!a.includes(e.row_id)) {
          if (!n.posa_offer_applied) {
            const i = flt(n.conversion_factor || 1);
            n.original_base_rate = n.base_rate / i, n.original_base_price_list_rate = n.base_price_list_rate / i, n.original_rate = n.rate / i, n.original_price_list_rate = n.price_list_rate / i, console.log("Storing original rates (normalized to conversion factor 1):", {
              original_base_rate: n.original_base_rate,
              original_base_price_list_rate: n.original_base_price_list_rate,
              original_rate: n.original_rate,
              original_price_list_rate: n.original_price_list_rate,
              conversion_factor: i
            });
          }
          const r = flt(n.conversion_factor || 1);
          if (e.discount_type === "Rate") {
            const i = flt(e.rate * r);
            n.base_rate = i, n.base_price_list_rate = i;
            const o = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== o ? (n.rate = this.flt(
              i * this.exchange_rate,
              this.currency_precision
            ), n.price_list_rate = n.rate) : (n.rate = i, n.price_list_rate = i), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0;
          } else if (e.discount_type === "Discount Percentage") {
            n.discount_percentage = e.discount_percentage;
            const i = this.flt(
              (n.original_base_price_list_rate || n.base_price_list_rate / r) * r,
              this.currency_precision
            ), o = this.flt(
              i * e.discount_percentage / 100,
              this.currency_precision
            );
            n.base_discount_amount = o, n.base_rate = this.flt(i - o, this.currency_precision), n.base_price_list_rate = n.base_rate;
            const l = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== l ? (n.rate = this.flt(
              n.base_rate * this.exchange_rate,
              this.currency_precision
            ), n.price_list_rate = n.rate, n.discount_amount = this.flt(
              o * this.exchange_rate,
              this.currency_precision
            )) : (n.rate = n.base_rate, n.price_list_rate = n.base_rate, n.discount_amount = o);
          }
          n.amount = this.flt(n.qty * n.rate, this.currency_precision), n.base_amount = this.flt(n.qty * n.base_rate, this.currency_precision), console.log("Updated rates after applying offer:", {
            rate: n.rate,
            base_rate: n.base_rate,
            price_list_rate: n.price_list_rate,
            base_price_list_rate: n.base_price_list_rate,
            discount_amount: n.discount_amount,
            base_discount_amount: n.base_discount_amount,
            amount: n.amount,
            base_amount: n.base_amount
          }), n.posa_offer_applied = 1, this.$forceUpdate();
        }
      }
    });
  },
  RemoveOnPrice(e) {
    if (console.log("Removing price offer:", e), !e) return;
    [...this.items, ...this.packed_items].forEach((n) => {
      if (!(!n || !n.posa_offers))
        try {
          const a = JSON.parse(n.posa_offers);
          if (!Array.isArray(a)) return;
          if (a.includes(e.row_id)) {
            if (console.log("Found item with offer:", n), !n.original_base_rate) {
              console.warn("Original rates not found, fetching from server"), this.update_item_detail(n);
              return;
            }
            const r = flt(n.conversion_factor || 1);
            console.log("Restoring original rates with conversion factor:", {
              original_base_rate: n.original_base_rate,
              original_base_price_list_rate: n.original_base_price_list_rate,
              conversion_factor: r
            }), n.base_rate = this.flt(n.original_base_rate * r, this.currency_precision), n.base_price_list_rate = this.flt(
              n.original_base_price_list_rate * r,
              this.currency_precision
            );
            const i = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== i ? (n.rate = this.flt(n.base_rate * this.exchange_rate, this.currency_precision), n.price_list_rate = this.flt(
              n.base_price_list_rate * this.exchange_rate,
              this.currency_precision
            )) : (n.rate = n.base_rate, n.price_list_rate = n.base_price_list_rate), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0, n.amount = this.flt(n.qty * n.rate, this.currency_precision), n.base_amount = this.flt(n.qty * n.base_rate, this.currency_precision);
            const o = a.filter((l) => l !== e.row_id);
            o.length === 0 && (n.original_base_rate = null, n.original_base_price_list_rate = null, n.original_rate = null, n.original_price_list_rate = null, n.posa_offer_applied = 0), n.posa_offers = JSON.stringify(o), console.log("Updated rates after removing offer:", {
              rate: n.rate,
              base_rate: n.base_rate,
              price_list_rate: n.price_list_rate,
              base_price_list_rate: n.base_price_list_rate,
              amount: n.amount,
              base_amount: n.base_amount,
              remaining_offers: o
            }), this.$forceUpdate();
          }
        } catch (a) {
          console.error("Error removing price offer:", a), this.eventBus.emit("show_message", {
            title: __("Error removing price offer"),
            color: "error",
            message: a.message
          });
        }
    });
  },
  ApplyOnTotal(e) {
    e.name || (e = this.posOffers.find((t) => t.name == e.offer_name)), !(this.discount_percentage_offer_name === e.name && this.discount_amount !== 0) && (!this.discount_percentage_offer_name || this.discount_percentage_offer_name == e.name) && e.discount_percentage > 0 && e.discount_percentage <= 100 && (this.discount_amount = this.flt(
      flt(this.Total) * flt(e.discount_percentage) / 100,
      this.currency_precision
    ), this.discount_percentage_offer_name = e.name, this.additional_discount = this.discount_amount, this.Total && this.Total !== 0 ? this.additional_discount_percentage = this.discount_amount / this.Total * 100 : this.additional_discount_percentage = 0);
  },
  RemoveOnTotal(e) {
    this.discount_percentage_offer_name && this.discount_percentage_offer_name == e.offer_name && (this.discount_amount = 0, this.discount_percentage_offer_name = null, this.additional_discount = 0, this.additional_discount_percentage = 0);
  },
  addOfferToItems(e) {
    if (!(!e || !e.items))
      try {
        const t = typeof e.items == "string" ? JSON.parse(e.items) : e.items;
        if (!Array.isArray(t)) return;
        const n = [...this.items, ...this.packed_items];
        t.forEach((a) => {
          n.forEach((r) => {
            if (!(!r || !r.posa_row_id) && r.posa_row_id == a) {
              const i = r.posa_offers ? JSON.parse(r.posa_offers) : [];
              if (!Array.isArray(i)) return;
              i.includes(e.row_id) || (i.push(e.row_id), e.offer === "Item Price" && (r.posa_offer_applied = 1)), r.posa_offers = JSON.stringify(i);
            }
          });
        });
      } catch (t) {
        console.error("Error adding offer to items:", t), this.eventBus.emit("show_message", {
          title: __("Error adding offer to items"),
          color: "error",
          message: t.message
        });
      }
  },
  deleteOfferFromItems(e) {
    if (!(!e || !e.items))
      try {
        const t = typeof e.items == "string" ? JSON.parse(e.items) : e.items;
        if (!Array.isArray(t)) return;
        const n = [...this.items, ...this.packed_items];
        t.forEach((a) => {
          n.forEach((r) => {
            if (!(!r || !r.posa_row_id) && r.posa_row_id == a) {
              const i = r.posa_offers ? JSON.parse(r.posa_offers) : [];
              if (!Array.isArray(i)) return;
              const o = i.filter((l) => l != e.row_id);
              e.offer === "Item Price" && (r.posa_offer_applied = 0), r.posa_offers = JSON.stringify(o);
            }
          });
        });
      } catch (t) {
        console.error("Error deleting offer from items:", t), this.eventBus.emit("show_message", {
          title: __("Error deleting offer from items"),
          color: "error",
          message: t.message
        });
      }
  },
  validate_due_date(e) {
    const t = frappe.datetime.now_date(), n = Date.parse(t), a = this.formatDateForBackend(e.posa_delivery_date), r = Date.parse(a);
    isNaN(r) || r < n ? setTimeout(() => {
      e.posa_delivery_date = this.formatDateForDisplay(t);
    }, 0) : e.posa_delivery_date = this.formatDateForDisplay(a);
  },
  load_print_page(e) {
    const t = this.pos_profile.print_format_for_online || this.pos_profile.print_format, n = this.pos_profile.letter_head || 0, a = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", r = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(a) + "&name=" + e + "&trigger_print=1&format=" + t + "&no_letterhead=" + n;
    if (this.pos_profile.posa_silent_print)
      Fp(r);
    else {
      const i = window.open(r, "Print");
      i.addEventListener(
        "load",
        function() {
          i.print();
        },
        { once: !0 }
      );
    }
  },
  formatDateForBackend(e) {
    if (!e) return null;
    if (typeof e == "string") {
      const n = Rt.fromArabicNumerals(e);
      if (/^\d{4}-\d{2}-\d{2}$/.test(n))
        return n;
      if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(n)) {
        const [a, r, i] = n.split("-");
        return `${i}-${r.padStart(2, "0")}-${a.padStart(2, "0")}`;
      }
      e = n;
    }
    const t = new Date(Rt.fromArabicNumerals(String(e)));
    if (!isNaN(t.getTime())) {
      const n = t.getFullYear(), a = `0${t.getMonth() + 1}`.slice(-2), r = `0${t.getDate()}`.slice(-2);
      return `${n}-${a}-${r}`;
    }
    return Rt.fromArabicNumerals(String(e));
  },
  formatDateForDisplay(e) {
    if (!e) return "";
    const t = Rt.fromArabicNumerals(String(e));
    if (typeof e == "string" && /^\d{4}-\d{2}-\d{2}$/.test(t)) {
      const [a, r, i] = t.split("-");
      return Rt.toArabicNumerals(`${i}-${r}-${a}`);
    }
    const n = new Date(t);
    if (!isNaN(n.getTime())) {
      const a = n.getFullYear(), r = `0${n.getMonth() + 1}`.slice(-2), i = `0${n.getDate()}`.slice(-2);
      return Rt.toArabicNumerals(`${i}-${r}-${a}`);
    }
    return Rt.toArabicNumerals(t);
  },
  toggleOffer(e) {
    this.$nextTick(() => {
      e.posa_is_offer || (e.posa_offers = JSON.stringify([]), e.posa_offer_applied = 0, e.discount_percentage = 0, e.discount_amount = 0, e.rate = e.price_list_rate, this.calc_item_price(e), this.handelOffers()), this.$forceUpdate();
    });
  }
  // Added missing comma here
}, $ne = {
  shortOpenFirstItem(e) {
    if (e.key.toLowerCase() === "a" && (e.ctrlKey || e.metaKey))
      try {
        if (e.preventDefault(), e.stopPropagation(), !this.items || this.items.length === 0) {
          console.log("No items to expand/collapse");
          return;
        }
        const t = this.items[0];
        console.log("Processing first item:", t.item_code), this.expanded.includes(t.posa_row_id) ? (console.log("Collapsing item:", t.item_code), this.expanded = []) : (console.log("Expanding item:", t.item_code), this.expanded = [t.posa_row_id], this.$nextTick(() => {
          this.update_item_detail(t);
        }));
      } catch (t) {
        console.error("Error in shortOpenFirstItem:", t), this.eventBus.emit("show_message", {
          title: __("Error toggling item details"),
          color: "error"
        });
      }
  },
  handleExpandedUpdate(e) {
    if (console.log("Expanded state updated:", e), this.expanded = e, e && e.length > 0) {
      const t = e[0], n = this.items.find((a) => a.posa_row_id === t);
      n && this.$nextTick(() => {
        this.update_item_detail(n);
      });
    }
  },
  // Keyboard shortcut: open payment dialog
  shortOpenPayment(e) {
    e.key === "s" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), this.show_payment());
  },
  // Keyboard shortcut: delete first item from the invoice
  shortDeleteFirstItem(e) {
    e.key === "d" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), this.remove_item(this.items[0]));
  },
  shortSelectDiscount(e) {
    console.log("Shortcut pressed:", e.key, e.ctrlKey), e.key.toLowerCase() === "e" && (e.ctrlKey || e.metaKey) && (console.log("Focusing discount field"), e.preventDefault(), e.stopPropagation(), this.$refs.discount ? (this.$refs.discount.focus(), console.log("Discount field focused")) : console.log("Discount field ref not found"));
  }
};
function s1(e) {
  if (!e) return "";
  const t = (e.items || []).map((r) => {
    const i = r.special_instructions ? `<br><small style="color: #666; font-style: italic;">${r.special_instructions}</small>` : "";
    return `
			<tr>
				<td style="border-bottom: 1px dashed #ccc; padding: 8px 2px; vertical-align: top;">
					<strong>${r.item_name}</strong>${i}
				</td>
				<td style="border-bottom: 1px dashed #ccc; padding: 8px 2px; text-align: center; vertical-align: top;">
					<strong style="font-size: 14px;">${r.qty} ${r.uom}</strong>
				</td>
			</tr>`;
  }).join(""), n = e.table_number ? `<p style="margin: 3px 0;"><strong>Table:</strong> ${e.table_number}</p>` : "", a = e.special_notes ? `
		<div style="border: 1px solid #ccc; padding: 8px; margin: 10px 0; background: #f9f9f9;">
			<strong>Special Notes:</strong><br>
			${e.special_notes}
		</div>` : "";
  return `
	<!DOCTYPE html>
	<html>
	<head>
		<meta charset="utf-8">
		<title>KOT ${e.kot_number}</title>
		<style>
			@media print {
				body { margin: 0; }
				.no-print { display: none; }
			}
			body { 
				font-family: 'Courier New', monospace; 
				width: 300px; 
				margin: 0 auto; 
				padding: 15px; 
				font-size: 12px; 
				line-height: 1.4;
			}
			.header { 
				text-align: center; 
				border-bottom: 2px solid #000; 
				padding-bottom: 10px; 
				margin-bottom: 15px; 
			}
			.kot-title { 
				font-size: 18px; 
				font-weight: bold; 
				margin: 0 0 5px 0; 
				letter-spacing: 1px;
			}
			.kot-number {
				font-size: 14px;
				margin: 0;
				font-weight: normal;
			}
			.kot-info { 
				margin: 15px 0; 
			}
			.kot-info p { 
				margin: 3px 0; 
				font-size: 13px;
			}
			.items-table { 
				width: 100%; 
				border-collapse: collapse; 
				margin: 15px 0; 
			}
			.items-table th { 
				border-bottom: 2px solid #000; 
				padding: 8px 2px; 
				text-align: left; 
				font-size: 13px;
				font-weight: bold;
			}
			.items-table td { 
				padding: 8px 2px; 
				vertical-align: top; 
				font-size: 12px;
			}
			.footer { 
				border-top: 2px solid #000; 
				padding-top: 10px; 
				margin-top: 20px; 
				text-align: center; 
			}
			.dashed-line { 
				border-top: 1px dashed #000; 
				margin: 15px 0; 
			}
			.priority-high {
				background-color: #ffe6e6;
				border-left: 4px solid #ff4444;
			}
			.btn-print {
				background: #4CAF50;
				color: white;
				border: none;
				padding: 8px 16px;
				cursor: pointer;
				margin: 5px;
				border-radius: 4px;
			}
			.btn-close {
				background: #f44336;
				color: white;
				border: none;
				padding: 8px 16px;
				cursor: pointer;
				margin: 5px;
				border-radius: 4px;
			}
		</style>
	</head>
	<body>
		<div class="header">
			<h2 class="kot-title">🍳 KITCHEN ORDER TICKET</h2>
			<p class="kot-number">KOT #: ${e.kot_number}</p>
		</div>
		
		<div class="kot-info">
			<p><strong>Order Type:</strong> ${e.order_type}</p>
			${n}
			<p><strong>Customer:</strong> ${e.customer_name}</p>
			<p><strong>Date & Time:</strong> ${e.datetime}</p>
		</div>
		
		<div class="dashed-line"></div>
		
		<table class="items-table">
			<thead>
				<tr>
					<th style="width: 65%;">ITEM</th>
					<th style="width: 35%; text-align: center;">QUANTITY</th>
				</tr>
			</thead>
			<tbody>
				${t}
			</tbody>
		</table>
		
		<div class="dashed-line"></div>
		
		<div class="kot-info">
			<p><strong>Total Items:</strong> ${e.total_items}</p>
			${a}
		</div>
		
		<div class="footer">
			<p><strong>*** FOR KITCHEN USE ONLY ***</strong></p>
			<p style="font-size: 11px;">Please prepare items as ordered</p>
			<p style="font-size: 10px; color: #666;">Printed on: ${(/* @__PURE__ */ new Date()).toLocaleString()}</p>
		</div>
		
		<div class="no-print" style="text-align: center; margin-top: 20px;">
			<button class="btn-print" onclick="window.print()">🖨️ Print KOT</button>
			<button class="btn-close" onclick="window.close()">❌ Close</button>
		</div>
		
		<script>
			// Auto-print if called from silent print mode
			if (window.opener && window.opener.kotSilentPrint) {
				window.onload = function() {
					window.print();
					setTimeout(function() {
						window.close();
					}, 1000);
				};
			}
		<\/script>
	</body>
	</html>
	`;
}
function qne(e) {
  const t = s1(e), n = window.open("", "_blank", "width=400,height=600,scrollbars=yes");
  n.kotSilentPrint = !0, n.document.write(t), n.document.close(), n.focus();
}
function Hne(e) {
  const t = s1(e), n = window.open("", "_blank", "width=400,height=600,scrollbars=yes,resizable=yes");
  return n.document.write(t), n.document.close(), n.focus(), n;
}
function LD(e, t = !1) {
  const n = window.open("", "_blank", "width=400,height=600,scrollbars=yes,resizable=yes");
  return t && (n.kotSilentPrint = !0), n.document.write(e), n.document.close(), n.focus(), n;
}
const FD = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  generateKOTHTML: s1,
  printKOTHTML: LD,
  printKOTSilent: qne,
  printKOTWithPreview: Hne
}, Symbol.toStringTag, { value: "Module" })), zne = {
  name: "POSInvoice",
  mixins: [Oi],
  data() {
    return {
      // POS profile settings
      pos_profile: "",
      pos_opening_shift: "",
      stock_settings: "",
      invoice_doc: "",
      return_doc: "",
      customer: "",
      customer_info: "",
      customer_balance: 0,
      discount_amount: 0,
      additional_discount: 0,
      additional_discount_percentage: 0,
      total_tax: 0,
      items: [],
      // List of invoice items
      packed_items: [],
      // Packed items for bundles
      packed_dialog_items: [],
      // Packed items displayed in dialog
      show_packed_dialog: !1,
      // Packing list dialog visibility
      posOffers: [],
      // All available offers
      posa_offers: [],
      // Offers applied to this invoice
      posa_coupons: [],
      // Coupons applied
      isApplyingOffer: !1,
      // Flag to prevent offer watcher loops
      allItems: [],
      // All items for offer logic
      discount_percentage_offer_name: null,
      // Track which offer is applied
      invoiceTypes: ["Invoice", "Order"],
      // Types of invoices
      invoiceType: "Invoice",
      // Current invoice type
      itemsPerPage: 1e3,
      // Items per page in table
      expanded: [],
      // Array of expanded row IDs
      singleExpand: !0,
      // Only one row expanded at a time
      cancel_dialog: !1,
      // Cancel dialog visibility
      float_precision: 6,
      // Float precision for calculations
      currency_precision: 6,
      // Currency precision for display
      new_line: !1,
      // Add new line for item
      available_stock_cache: {},
      delivery_charges: [],
      // List of delivery charges
      delivery_charges_rate: 0,
      // Selected delivery charge rate
      selected_delivery_charge: "",
      // Selected delivery charge object
      invoice_posting_date: !1,
      // Posting date dialog
      posting_date: frappe.datetime.nowdate(),
      // Invoice posting date
      posting_date_display: "",
      // Display value for date picker
      items_headers: [],
      packedItemsHeaders: [
        { title: __("No."), key: "index" },
        { title: __("Parent Item"), key: "parent_item" },
        { title: __("Item Code"), key: "item_code" },
        { title: __("Description"), key: "item_name" },
        { title: __("Qty"), key: "qty" },
        { title: __("Rate"), key: "rate" },
        { title: __("Warehouse"), key: "warehouse" },
        { title: __("Batch"), key: "batch_no" },
        { title: __("Serial"), key: "serial_no" }
      ],
      selected_currency: "",
      // Currently selected currency
      exchange_rate: 1,
      // Current exchange rate
      conversion_rate: 1,
      // Currency to company rate
      exchange_rate_date: frappe.datetime.nowdate(),
      // Date of fetched exchange rate
      company: null,
      // Company doc with default currency
      available_currencies: [],
      // List of available currencies
      price_lists: [],
      // Available selling price lists
      selected_price_list: "",
      // Currently selected price list
      price_list_currency: "",
      // Currency of the selected price list
      selected_columns: [],
      // Selected columns for items table
      temp_selected_columns: [],
      // Temporary array for column selection
      available_columns: [],
      // All available columns
      show_column_selector: !1,
      // Column selector dialog visibility
      invoiceHeight: null,
      // Restaurant order fields
      restaurant_order_types: [],
      available_tables: [],
      selected_order_type: null,
      // Always start with null - no default selection
      selected_table: null,
      order_status: null
    };
  },
  components: {
    Customer: RD,
    RestaurantOrderType: Vee,
    DeliveryCharges: Lee,
    PostingDateRow: zee,
    MultiCurrencyRow: Yee,
    InvoiceSummary: ete,
    CancelSaleDialog: Jee,
    ItemsTable: wne
  },
  computed: {
    ...Fne,
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    isEditingExistingOrder() {
      return !!(this.pos_profile?.posa_enable_restaurant_mode && this.invoice_doc?.name && this.invoiceType === "Order");
    }
  },
  methods: {
    ...$ne,
    ...Une,
    ...Lne,
    initializeItemsHeaders() {
      this.available_columns = [
        { title: __("Name"), align: "start", sortable: !0, key: "item_name", required: !0 },
        { title: __("QTY"), key: "qty", align: "start", required: !0 },
        { title: __("UOM"), key: "uom", align: "start", required: !1 },
        { title: __("Rate"), key: "rate", align: "start", required: !0 },
        { title: __("Discount %"), key: "discount_value", align: "start", required: !1 },
        { title: __("Discount Amount"), key: "discount_amount", align: "start", required: !1 },
        { title: __("Amount"), key: "amount", align: "start", required: !0 },
        { title: __("Offer?"), key: "posa_is_offer", align: "center", required: !1 }
      ], (!this.selected_columns || this.selected_columns.length === 0) && (this.selected_columns = this.available_columns.filter((e) => !!(e.required || e.key === "discount_value" && this.pos_profile.posa_display_discount_percentage || e.key === "discount_amount" && this.pos_profile.posa_display_discount_amount)).map((e) => e.key)), this.updateHeadersFromSelection();
    },
    // Handle item dropped from ItemsSelector to ItemsTable
    handleItemDrop(e) {
      console.log("Item dropped:", e), this.add_item(e), this.eventBus.emit("show_message", {
        title: __("Item {0} added to invoice", [e.item_name]),
        color: "success"
      });
    },
    // Show visual feedback when item is being dragged over drop zone
    showDropFeedback(e) {
      const t = this.$el.querySelector(".modern-items-table");
      t && (e ? t.classList.add("drag-over") : t.classList.remove("drag-over"));
    },
    openPackedItems(e) {
      this.packed_dialog_items = this.packed_items.filter((t) => t.bundle_id === e), this.show_packed_dialog = !0;
    },
    toggleColumnSelection() {
      this.temp_selected_columns = [...this.selected_columns], this.show_column_selector = !0;
    },
    cancelColumnSelection() {
      this.show_column_selector = !1;
    },
    updateHeadersFromSelection() {
      this.items_headers = this.available_columns.filter(
        (e) => this.selected_columns.includes(e.key) || e.required
      );
    },
    updateSelectedColumns() {
      this.selected_columns = [...this.temp_selected_columns], this.available_columns.filter((t) => t.required).map((t) => t.key).forEach((t) => {
        this.selected_columns.includes(t) || this.selected_columns.push(t);
      }), this.updateHeadersFromSelection(), this.saveColumnPreferences(), this.show_column_selector = !1;
    },
    saveColumnPreferences() {
      try {
        localStorage.setItem("posawesome_selected_columns", JSON.stringify(this.selected_columns));
      } catch (e) {
        console.error("Failed to save column preferences:", e);
      }
    },
    loadColumnPreferences() {
      try {
        const e = localStorage.getItem("posawesome_selected_columns");
        e && (this.selected_columns = JSON.parse(e));
      } catch (e) {
        console.error("Failed to load column preferences:", e);
      }
    },
    saveInvoiceHeight() {
      if (this.$refs.invoiceCard) {
        this.invoiceHeight = this.$refs.invoiceCard.clientHeight + "px";
        try {
          localStorage.setItem("posawesome_invoice_height", this.invoiceHeight);
        } catch (e) {
          console.error("Failed to save invoice height:", e);
        }
      }
    },
    loadInvoiceHeight() {
      try {
        const e = localStorage.getItem("posawesome_invoice_height");
        e ? this.invoiceHeight = e : this.invoiceHeight = getComputedStyle(document.documentElement).getPropertyValue("--container-height") || "68vh";
      } catch (e) {
        console.error("Failed to load invoice height:", e), this.invoiceHeight = getComputedStyle(document.documentElement).getPropertyValue("--container-height") || "68vh";
      }
    },
    makeid(e) {
      let t = "";
      const n = "abcdefghijklmnopqrstuvwxyz0123456789", a = n.length;
      for (var r = 0; r < e; r++)
        t += n.charAt(Math.floor(Math.random() * a));
      return t;
    },
    handleExpandedUpdate(e) {
      this.expanded = Array.isArray(e) ? e.slice(-1) : [];
    },
    print_draft_invoice() {
      if (!this.pos_profile.posa_allow_print_draft_invoices) {
        this.eventBus.emit("show_message", {
          title: __("You are not allowed to print draft invoices"),
          color: "error"
        });
        return;
      }
      let e = this.invoice_doc.name;
      frappe.run_serially([
        () => {
          const t = this.save_and_clear_invoice();
          e = t.name ? t.name : e;
        },
        () => {
          this.load_print_page(e);
        }
      ]);
    },
    async set_delivery_charges() {
      var e = this;
      if (!this.pos_profile || !this.customer || !this.pos_profile.posa_use_delivery_charges) {
        this.delivery_charges = [], this.delivery_charges_rate = 0, this.selected_delivery_charge = "";
        return;
      }
      this.delivery_charges_rate = 0, this.selected_delivery_charge = "";
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.offers.get_applicable_delivery_charges",
          args: {
            company: this.pos_profile.company,
            pos_profile: this.pos_profile.name,
            customer: this.customer
          }
        });
        t.message && t.message.length && (console.log(t.message), e.delivery_charges = t.message);
      } catch (t) {
        console.error("Failed to fetch delivery charges", t);
      }
    },
    deliveryChargesFilter(e, t, n) {
      const a = n.raw;
      console.log("dl charges", a);
      const r = a.name.toLowerCase(), i = t.toLowerCase();
      return r.indexOf(i) > -1;
    },
    update_delivery_charges() {
      this.selected_delivery_charge ? this.delivery_charges_rate = this.selected_delivery_charge.rate : this.delivery_charges_rate = 0;
    },
    updatePostingDate(e) {
      e && (this.posting_date = e, this.$forceUpdate());
    },
    // Override setFormatedFloat for qty field to handle stock limits and return mode
    setFormatedQty(e, t, n, a, r) {
      let i = this.setFormatedFloat(e, t, n, a, r);
      return e.is_stock_item && e.max_qty !== void 0 && this.flt(e[t]) > this.flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e[t] = e.max_qty, i = e.max_qty, this.eventBus.emit("show_message", {
        title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
          this.formatFloat(e.max_qty)
        ]),
        color: "error"
      })) : this.eventBus.emit("show_message", {
        title: __("Stock is lower than requested. Proceeding may create negative stock."),
        color: "warning"
      })), this.isReturnInvoice && i > 0 && (i = -Math.abs(i), e[t] = i), this.calc_stock_qty(e, e[t]), t === "qty" && e.is_bundle && this.packed_items.filter((o) => o.bundle_id === e.bundle_id).forEach((o) => {
        o.qty = e.qty * (o.child_qty_per_bundle || 1), this.calc_stock_qty(o, o.qty);
      }), i;
    },
    async fetch_available_currencies() {
      try {
        console.log("Fetching available currencies...");
        const e = await frappe.call({
          method: "posawesome.posawesome.api.invoices.get_available_currencies"
        });
        if (e.message) {
          console.log("Received currencies:", e.message);
          const t = this.pos_profile.currency;
          return this.available_currencies = e.message.map((n) => ({
            value: n.name,
            title: n.name
          })), this.available_currencies.sort((n, a) => n.value === t ? -1 : a.value === t ? 1 : n.value.localeCompare(a.value)), this.selected_currency || (this.selected_currency = t), this.available_currencies;
        }
        return [];
      } catch (e) {
        console.error("Error fetching currencies:", e);
        const t = this.pos_profile.currency;
        return this.available_currencies = [
          {
            value: t,
            title: t
          }
        ], this.selected_currency = t, this.available_currencies;
      }
    },
    async fetch_price_lists() {
      if (this.pos_profile.posa_enable_price_list_dropdown)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.utilities.get_selling_price_lists"
          });
          e && e.message && (this.price_lists = e.message.map((t) => t.name));
        } catch (e) {
          console.error("Failed fetching price lists", e), this.price_lists = [this.pos_profile.selling_price_list];
        }
      else
        this.price_lists = [this.pos_profile.selling_price_list];
      this.selected_price_list || (this.selected_price_list = this.pos_profile.selling_price_list);
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.invoices.get_price_list_currency",
          args: { price_list: this.selected_price_list }
        });
        e && e.message && (this.price_list_currency = e.message);
      } catch (e) {
        console.error("Failed fetching price list currency", e);
      }
      return this.price_lists;
    },
    async update_currency(e) {
      e && (this.selected_currency = e, await this.update_currency_and_rate());
    },
    update_exchange_rate() {
      (!this.exchange_rate || this.exchange_rate <= 0) && (this.exchange_rate = 1), this.eventBus.emit("update_currency", {
        currency: this.selected_currency || this.pos_profile.currency,
        exchange_rate: this.exchange_rate
      }), this.update_item_rates();
    },
    update_conversion_rate() {
      (!this.conversion_rate || this.conversion_rate <= 0) && (this.conversion_rate = 1), this.sync_exchange_rate();
    },
    update_item_rates() {
      console.log("Updating item rates with exchange rate:", this.exchange_rate), this.items.forEach((e) => {
        if (e._skip_calc = !0, !e.base_rate) {
          console.log(`Setting base rates for ${e.item_code} for the first time`);
          const n = this.price_list_currency || this.pos_profile.currency;
          this.selected_currency === n ? (e.base_rate = e.rate, e.base_price_list_rate = e.price_list_rate, e.base_discount_amount = e.discount_amount || 0) : (e.base_rate = e.rate / this.exchange_rate, e.base_price_list_rate = e.price_list_rate / this.exchange_rate, e.base_discount_amount = (e.discount_amount || 0) / this.exchange_rate);
        }
        const t = this.price_list_currency || this.pos_profile.currency;
        if (this.selected_currency === t)
          console.log(`Restoring rates for ${e.item_code} from base rates`), e.price_list_rate = e.base_price_list_rate, e.rate = e.base_rate, e.discount_amount = e.base_discount_amount;
        else if (e.original_currency === this.selected_currency)
          console.log(`Using original currency rates for ${e.item_code}`), e.price_list_rate = e.base_price_list_rate, e.rate = e.base_rate, e.discount_amount = e.base_discount_amount;
        else {
          console.log(`Converting rates for ${e.item_code} to ${this.selected_currency}`);
          const n = this.flt(
            e.base_price_list_rate * this.exchange_rate,
            this.currency_precision
          ), a = this.flt(
            e.base_rate * this.exchange_rate,
            this.currency_precision
          ), r = this.flt(
            e.base_discount_amount * this.exchange_rate,
            this.currency_precision
          );
          e.price_list_rate = n < 1e-6 ? 0 : n, e.rate = a < 1e-6 ? 0 : a, e.discount_amount = r < 1e-6 ? 0 : r;
        }
        e.amount = this.flt(e.qty * e.rate, this.currency_precision), e.base_amount = this.flt(e.qty * e.base_rate, this.currency_precision), console.log(`Updated rates for ${e.item_code}:`, {
          price_list_rate: e.price_list_rate,
          base_price_list_rate: e.base_price_list_rate,
          rate: e.rate,
          base_rate: e.base_rate,
          discount: e.discount_amount,
          base_discount: e.base_discount_amount,
          amount: e.amount,
          base_amount: e.base_amount
        }), this.calc_item_price(e);
      }), this.$forceUpdate();
    },
    formatCurrency(e, t = null) {
      const n = t ?? this.currency_precision;
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, n);
    },
    flt(e, t = null) {
      t === null && (t = this.float_precision);
      const n = Number(e);
      return isNaN(n) ? 0 : Math.abs(n) < 1e-6 ? n : Number((n || 0).toFixed(t));
    },
    // Update currency and exchange rate when currency is changed
    async update_currency_and_rate() {
      if (!this.selected_currency) return;
      const e = this.company && this.company.default_currency || this.pos_profile.currency, t = this.price_list_currency || e;
      try {
        if (this.selected_currency === t)
          this.exchange_rate = 1;
        else {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.invoices.fetch_exchange_rate_pair",
            args: {
              from_currency: t,
              to_currency: this.selected_currency
            }
          });
          n && n.message && (this.exchange_rate = n.message.exchange_rate);
        }
        if (this.selected_currency === e)
          this.conversion_rate = 1, this.exchange_rate_date = this.formatDateForBackend(this.posting_date_display);
        else {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.invoices.fetch_exchange_rate_pair",
            args: {
              from_currency: this.selected_currency,
              to_currency: e
            }
          });
          if (n && n.message) {
            this.conversion_rate = n.message.exchange_rate, this.exchange_rate_date = n.message.date;
            const a = this.formatDateForBackend(this.posting_date_display);
            this.exchange_rate_date && a !== this.exchange_rate_date && this.eventBus.emit("show_message", {
              title: __(
                "Exchange rate date " + this.exchange_rate_date + " differs from posting date " + a
              ),
              color: "warning"
            });
          }
        }
      } catch (n) {
        console.error("Error updating currency:", n), this.eventBus.emit("show_message", {
          title: "Error updating currency",
          color: "error"
        });
      }
      if (this.sync_exchange_rate(), this.items && this.items.length) {
        const n = this.get_invoice_doc();
        n.currency = this.selected_currency, n.price_list_currency = t || this.pos_profile.currency, n.conversion_rate = this.conversion_rate, n.plc_conversion_rate = this.exchange_rate;
        try {
          await this.update_invoice(n);
        } catch (a) {
          console.error("Error updating invoice currency:", a), this.eventBus.emit("show_message", {
            title: "Error updating currency",
            color: "error"
          });
        }
      }
    },
    async update_exchange_rate_on_server() {
      if (this.conversion_rate) {
        if (!this.items || !this.items.length) {
          this.sync_exchange_rate();
          return;
        }
        const e = this.get_invoice_doc();
        e.conversion_rate = this.conversion_rate, e.plc_conversion_rate = this.exchange_rate;
        try {
          const t = await this.update_invoice(e);
          if (t && t.exchange_rate_date) {
            this.exchange_rate_date = t.exchange_rate_date;
            const n = this.formatDateForBackend(this.posting_date_display);
            n !== this.exchange_rate_date && this.eventBus.emit("show_message", {
              title: __(
                "Exchange rate date " + this.exchange_rate_date + " differs from posting date " + n
              ),
              color: "warning"
            });
          }
          this.sync_exchange_rate();
        } catch (t) {
          console.error("Error updating exchange rate:", t), this.eventBus.emit("show_message", {
            title: "Error updating exchange rate",
            color: "error"
          });
        }
      }
    },
    sync_exchange_rate() {
      (!this.exchange_rate || this.exchange_rate <= 0) && (this.exchange_rate = 1), (!this.conversion_rate || this.conversion_rate <= 0) && (this.conversion_rate = 1), this.eventBus.emit("update_currency", {
        currency: this.selected_currency || this.pos_profile.currency,
        exchange_rate: this.exchange_rate,
        conversion_rate: this.conversion_rate
      }), this.update_item_rates();
    },
    // Add new rounding function
    roundAmount(e) {
      if (this.pos_profile.disable_rounded_total)
        return this.flt(e, this.currency_precision);
      const t = this.price_list_currency || this.pos_profile.currency;
      return this.pos_profile.posa_allow_multi_currency && this.selected_currency !== t ? this.flt(e, 2) : Math.round(e);
    },
    // Increase quantity of an item (handles return logic)
    add_one(e) {
      if (this.isReturnInvoice)
        e.qty--;
      else {
        const t = e.qty + 1;
        if (e.is_stock_item && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty) && e.max_qty !== void 0 && t > e.max_qty) {
          e.qty = e.max_qty, this.calc_stock_qty(e, e.qty), this.eventBus.emit("show_message", {
            title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
              this.formatFloat(e.max_qty)
            ]),
            color: "error"
          });
          return;
        }
        e.qty = t;
      }
      e.qty == 0 && this.remove_item(e), this.calc_stock_qty(e, e.qty), e.is_bundle && this.packed_items.filter((t) => t.bundle_id === e.bundle_id).forEach((t) => {
        t.qty = e.qty * (t.child_qty_per_bundle || 1), this.calc_stock_qty(t, t.qty);
      }), this.$forceUpdate();
    },
    // Decrease quantity of an item (handles return logic)
    subtract_one(e) {
      this.isReturnInvoice ? e.qty++ : e.qty--, e.qty == 0 && this.remove_item(e), this.calc_stock_qty(e, e.qty), e.is_bundle && this.packed_items.filter((t) => t.bundle_id === e.bundle_id).forEach((t) => {
        t.qty = e.qty * (t.child_qty_per_bundle || 1), this.calc_stock_qty(t, t.qty);
      }), this.$forceUpdate();
    },
    // Handle item reordering from drag and drop
    handleItemReorder(e) {
      const { fromIndex: t, toIndex: n } = e;
      if (t === n) return;
      const a = [...this.items], [r] = a.splice(t, 1);
      a.splice(n, 0, r), this.items = a, this.eventBus.emit("show_message", {
        title: __("Item order updated"),
        color: "success"
      }), this.items.forEach((i, o) => {
        i.idx = o + 1;
      });
    },
    // Restaurant order methods
    async fetch_restaurant_order_types() {
      if (this.pos_profile.posa_enable_restaurant_mode)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_order_types"
          });
          e.message && (this.restaurant_order_types = e.message);
        } catch (e) {
          console.error("Failed to fetch restaurant order types", e);
        }
    },
    async fetch_available_tables() {
      if (this.pos_profile.posa_enable_restaurant_mode)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_available_tables"
          });
          e.message && (this.available_tables = e.message);
        } catch (e) {
          console.error("Failed to fetch available tables", e);
        }
    },
    update_order_type() {
      (!this.selected_order_type || !this.selected_order_type.requires_table) && (this.selected_table = null), this.selected_order_type && this.selected_order_type.requires_table && this.fetch_available_tables();
    },
    update_table_selection() {
      console.log("Table selected:", this.selected_table);
    },
    show_restaurant_orders() {
      this.eventBus.emit("open_restaurant_orders");
    },
    async print_kot() {
      if (this.validate_restaurant_selection()) {
        if (!this.items || !this.items.length) {
          this.eventBus.emit("show_message", {
            title: __("Please add items to print KOT"),
            color: "error"
          });
          return;
        }
        try {
          const e = this.get_invoice_doc();
          this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number);
          const t = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.generate_kot_html",
            args: {
              order_data: e
            }
          });
          t.message && (LD(t.message, this.pos_profile.posa_silent_print), this.eventBus.emit("show_message", {
            title: __("KOT sent to kitchen successfully"),
            color: "success"
          }));
        } catch (e) {
          console.error("KOT Print Error:", e), this.eventBus.emit("show_message", {
            title: __("Failed to print KOT: {0}", [e.message || "Unknown error"]),
            color: "error"
          });
        }
      }
    },
    async submit_restaurant_order() {
      if (this.validate_restaurant_selection()) {
        if (!this.customer) {
          this.eventBus.emit("show_message", {
            title: __("Please select a customer"),
            color: "error"
          });
          return;
        }
        if (!this.items || !this.items.length) {
          this.eventBus.emit("show_message", {
            title: __("Please add items to the order"),
            color: "error"
          });
          return;
        }
        try {
          const e = this.get_invoice_doc();
          let t;
          if (e.name ? t = this.update_invoice(e) : t = this.create_restaurant_order(e), t && t.name) {
            const n = await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.submit_restaurant_order",
              args: {
                order_data: t
              }
            });
            n.message && (this.eventBus.emit("show_message", {
              title: __("Order {0} submitted successfully", [n.message.name]),
              color: "success"
            }), this.clear_invoice());
          }
        } catch (e) {
          console.error("Error submitting restaurant order:", e), this.eventBus.emit("show_message", {
            title: __("Error submitting order"),
            color: "error"
          });
        }
      }
    },
    get_restaurant_invoice_doc() {
      const e = this.get_invoice_doc();
      return this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number), e;
    },
    validate_restaurant_selection() {
      return this.pos_profile.posa_enable_restaurant_mode ? this.selected_order_type ? this.selected_order_type.requires_table && !this.selected_table ? (this.eventBus.emit("show_message", {
        title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
        color: "error"
      }), !1) : !0 : (this.eventBus.emit("show_message", {
        title: __("Please select an Order Type before proceeding"),
        color: "error"
      }), !1) : !0;
    },
    clear_restaurant_selection() {
      this.selected_order_type = null, this.selected_table = null, this.order_status = null;
    }
  },
  mounted() {
    this.loadColumnPreferences(), this.loadInvoiceHeight(), this.eventBus.on("item-drag-start", () => {
      this.showDropFeedback(!0);
    }), this.eventBus.on("item-drag-end", () => {
      this.showDropFeedback(!1);
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.company = e.company || null, this.customer = e.pos_profile.customer, this.pos_opening_shift = e.pos_opening_shift, this.stock_settings = e.stock_settings;
      const t = parseInt(e.pos_profile.posa_decimal_precision);
      isNaN(t) || (this.float_precision = t, this.currency_precision = t), this.pos_profile.posa_enable_restaurant_mode ? (this.invoiceType = "Order", this.invoiceTypes = ["Order"]) : this.invoiceType = this.pos_profile.posa_default_sales_order ? "Order" : "Invoice", this.initializeItemsHeaders(), this.pos_profile.posa_allow_multi_currency && this.fetch_available_currencies().then(async () => {
        this.selected_currency = this.pos_profile.currency, await this.update_currency_and_rate();
      }).catch((n) => {
        console.error("Error initializing currencies:", n), this.eventBus.emit("show_message", {
          title: __("Error loading currencies"),
          color: "error"
        });
      }), this.fetch_price_lists(), this.update_price_list(), this.pos_profile.posa_enable_restaurant_mode && (this.fetch_restaurant_order_types(), this.fetch_available_tables());
    }), this.eventBus.on("add_item", (e) => {
      this.add_item(e);
    }), this.eventBus.on("update_customer", (e) => {
      this.customer = e;
    }), this.eventBus.on("fetch_customer_details", () => {
      this.fetch_customer_details();
    }), this.eventBus.on("clear_invoice", () => {
      this.clear_invoice();
    }), this.eventBus.on("validate_restaurant_selection", () => {
      this.validate_restaurant_selection();
    }), this.eventBus.on("load_invoice", (e) => {
      this.load_invoice(e);
    }), this.eventBus.on("load_order", (e) => {
      this.new_order(e);
    }), this.eventBus.on("change_invoice_type", (e) => {
      console.log("Changing invoice type to:", e), this.invoiceType = e, e === "Invoice" ? this.invoiceTypes = ["Invoice"] : e === "Order" && (this.invoiceTypes = ["Order"]), this.$forceUpdate(), console.log("Invoice type changed and UI updated:", {
        invoiceType: this.invoiceType,
        invoiceTypes: this.invoiceTypes
      });
    }), this.eventBus.on("set_offers", (e) => {
      this.posOffers = e;
    }), this.eventBus.on("update_invoice_offers", (e) => {
      this.updateInvoiceOffers(e);
    }), this.eventBus.on("update_invoice_coupons", (e) => {
      this.posa_coupons = e, this.handelOffers();
    }), this.eventBus.on("set_all_items", (e) => {
      this.allItems = e, this.items.forEach((t) => {
        this.update_item_detail(t);
      });
    }), this.eventBus.on("load_return_invoice", (e) => {
      console.log("Invoice component received load_return_invoice event with data:", e), this.load_invoice(e.invoice_doc), this.invoiceType = "Return", this.invoiceTypes = ["Return"], this.invoice_doc.is_return = 1, this.items && this.items.length && this.items.forEach((t) => {
        t.qty > 0 && (t.qty = -Math.abs(t.qty)), t.stock_qty > 0 && (t.stock_qty = -Math.abs(t.stock_qty));
      }), e.return_doc ? (console.log("Return against existing invoice:", e.return_doc.name), this.discount_amount = e.return_doc.discount_amount || 0, this.additional_discount = e.return_doc.discount_amount || 0, this.return_doc = e.return_doc, this.invoice_doc.return_against = e.return_doc.name) : (console.log("Return without invoice reference"), this.discount_amount = 0, this.additional_discount = 0, this.additional_discount_percentage = 0), console.log("Invoice state after loading return:", {
        invoiceType: this.invoiceType,
        is_return: this.invoice_doc.is_return,
        items: this.items ? this.items.length : 0,
        customer: this.customer
      });
    }), this.eventBus.on("set_new_line", (e) => {
      this.new_line = e;
    }), this.pos_profile.posa_allow_multi_currency && this.fetch_available_currencies(), this.eventBus.on("reset_posting_date", () => {
      this.posting_date = frappe.datetime.nowdate();
    }), this.eventBus.on("calc_uom", this.calc_uom), this.eventBus.on("item-drag-start", () => {
      this.showDropFeedback(!0);
    }), this.eventBus.on("item-drag-end", () => {
      this.showDropFeedback(!1);
    });
  },
  // Cleanup event listeners before component is destroyed
  beforeUnmount() {
    this.eventBus.off("register_pos_profile"), this.eventBus.off("add_item"), this.eventBus.off("update_customer"), this.eventBus.off("fetch_customer_details"), this.eventBus.off("clear_invoice"), this.eventBus.off("reset_posting_date"), this.eventBus.off("change_invoice_type");
  },
  // Register global keyboard shortcuts when component is created
  created() {
    document.addEventListener("keydown", this.shortOpenPayment.bind(this)), document.addEventListener("keydown", this.shortDeleteFirstItem.bind(this)), document.addEventListener("keydown", this.shortOpenFirstItem.bind(this)), document.addEventListener("keydown", this.shortSelectDiscount.bind(this));
  },
  // Remove global keyboard shortcuts when component is unmounted
  unmounted() {
    document.removeEventListener("keydown", this.shortOpenPayment), document.removeEventListener("keydown", this.shortDeleteFirstItem), document.removeEventListener("keydown", this.shortOpenFirstItem), document.removeEventListener("keydown", this.shortSelectDiscount);
  },
  watch: Nne
}, Wne = { class: "pa-0" }, jne = { class: "dynamic-padding" }, Yne = { class: "items-table-wrapper" }, Kne = { class: "column-selector-container" }, Gne = { class: "text-caption mt-2" }, Qne = { class: "currency-display" }, Jne = { class: "currency-symbol" }, Xne = { class: "amount-value" };
function Zne(e, t, n, a, r, i) {
  const o = J("CancelSaleDialog"), l = J("v-alert"), s = J("Customer"), d = J("v-col"), u = J("v-select"), f = J("v-row"), _ = J("RestaurantOrderType"), g = J("DeliveryCharges"), v = J("PostingDateRow"), w = J("MultiCurrencyRow"), b = J("v-btn"), p = J("v-spacer"), y = J("v-card-title"), S = J("v-divider"), E = J("v-switch"), C = J("v-card-text"), B = J("v-card-actions"), O = J("v-card"), D = J("v-dialog"), T = J("ItemsTable"), P = J("v-text-field"), I = J("v-data-table"), M = J("InvoiceSummary");
  return ne(), Be("div", Wne, [
    h(o, {
      modelValue: r.cancel_dialog,
      "onUpdate:modelValue": t[0] || (t[0] = (V) => r.cancel_dialog = V),
      onConfirm: e.cancel_invoice
    }, null, 8, ["modelValue", "onConfirm"]),
    h(O, {
      ref: "invoiceCard",
      style: Xe({
        height: r.invoiceHeight || "var(--container-height)",
        maxHeight: r.invoiceHeight || "var(--container-height)",
        backgroundColor: i.isDarkTheme ? "#121212" : "",
        resize: "vertical",
        overflow: "auto"
      }),
      class: Ee([
        "cards my-0 py-0 mt-3 resizable",
        i.isDarkTheme ? "" : "bg-grey-lighten-5",
        { "return-mode": e.isReturnInvoice },
        { "edit-mode": i.isEditingExistingOrder }
      ]),
      onMouseup: i.saveInvoiceHeight,
      onTouchend: i.saveInvoiceHeight
    }, {
      default: x(() => [
        A("div", jne, [
          r.pos_profile.create_pos_invoice_instead_of_sales_invoice ? (ne(), Fe(l, {
            key: 0,
            type: "info",
            density: "compact",
            class: "mb-2"
          }, {
            default: x(() => [
              ae(W(e.__("Invoices saved as POS Invoices")), 1)
            ]),
            _: 1
          })) : ke("", !0),
          h(f, {
            align: "center",
            class: "items px-3 py-2"
          }, {
            default: x(() => [
              h(d, {
                cols: r.pos_profile.posa_allow_sales_order && !r.pos_profile.posa_enable_restaurant_mode ? 9 : 12,
                class: "pb-0 pr-0"
              }, {
                default: x(() => [
                  h(s)
                ]),
                _: 1
              }, 8, ["cols"]),
              r.pos_profile.posa_allow_sales_order && !r.pos_profile.posa_enable_restaurant_mode ? (ne(), Fe(d, {
                key: 0,
                cols: "3",
                class: "pb-4"
              }, {
                default: x(() => [
                  h(u, {
                    density: "compact",
                    "hide-details": "",
                    variant: "solo",
                    color: "primary",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    items: r.invoiceTypes,
                    label: e.frappe._("Type"),
                    modelValue: r.invoiceType,
                    "onUpdate:modelValue": t[1] || (t[1] = (V) => r.invoiceType = V),
                    disabled: r.invoiceType == "Return"
                  }, null, 8, ["bg-color", "items", "label", "modelValue", "disabled"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          }),
          h(_, {
            pos_profile: r.pos_profile,
            order_types: r.restaurant_order_types,
            available_tables: r.available_tables,
            selected_order_type: r.selected_order_type,
            selected_table: r.selected_table,
            order_status: r.order_status,
            readonly: e.readonly,
            "onUpdate:selected_order_type": t[2] || (t[2] = (V) => {
              r.selected_order_type = V, i.update_order_type();
            }),
            "onUpdate:selected_table": t[3] || (t[3] = (V) => {
              r.selected_table = V, i.update_table_selection();
            })
          }, null, 8, ["pos_profile", "order_types", "available_tables", "selected_order_type", "selected_table", "order_status", "readonly"]),
          h(g, {
            pos_profile: r.pos_profile,
            delivery_charges: r.delivery_charges,
            selected_delivery_charge: r.selected_delivery_charge,
            delivery_charges_rate: r.delivery_charges_rate,
            deliveryChargesFilter: i.deliveryChargesFilter,
            formatCurrency: i.formatCurrency,
            currencySymbol: e.currencySymbol,
            readonly: e.readonly,
            "onUpdate:selected_delivery_charge": t[4] || (t[4] = (V) => {
              r.selected_delivery_charge = V, i.update_delivery_charges();
            })
          }, null, 8, ["pos_profile", "delivery_charges", "selected_delivery_charge", "delivery_charges_rate", "deliveryChargesFilter", "formatCurrency", "currencySymbol", "readonly"]),
          h(v, {
            pos_profile: r.pos_profile,
            posting_date_display: r.posting_date_display,
            customer_balance: r.customer_balance,
            "price-list": r.selected_price_list,
            "price-lists": r.price_lists,
            formatCurrency: i.formatCurrency,
            "onUpdate:posting_date_display": t[5] || (t[5] = (V) => {
              r.posting_date_display = V;
            }),
            "onUpdate:priceList": t[6] || (t[6] = (V) => {
              r.selected_price_list = V;
            })
          }, null, 8, ["pos_profile", "posting_date_display", "customer_balance", "price-list", "price-lists", "formatCurrency"]),
          h(w, {
            pos_profile: r.pos_profile,
            selected_currency: r.selected_currency,
            plc_conversion_rate: r.exchange_rate,
            conversion_rate: r.conversion_rate,
            available_currencies: r.available_currencies,
            isNumber: e.isNumber,
            price_list_currency: r.price_list_currency,
            "onUpdate:selected_currency": t[7] || (t[7] = (V) => {
              r.selected_currency = V, i.update_currency(V);
            }),
            "onUpdate:plc_conversion_rate": t[8] || (t[8] = (V) => {
              r.exchange_rate = V, i.update_exchange_rate();
            }),
            "onUpdate:conversion_rate": t[9] || (t[9] = (V) => {
              r.conversion_rate = V, i.update_conversion_rate();
            })
          }, null, 8, ["pos_profile", "selected_currency", "plc_conversion_rate", "conversion_rate", "available_currencies", "isNumber", "price_list_currency"]),
          A("div", Yne, [
            A("div", Kne, [
              h(b, {
                density: "compact",
                variant: "text",
                color: "primary",
                "prepend-icon": "mdi-cog-outline",
                onClick: i.toggleColumnSelection,
                class: "column-selector-btn"
              }, {
                default: x(() => [
                  ae(W(e.__("Columns")), 1)
                ]),
                _: 1
              }, 8, ["onClick"]),
              h(D, {
                modelValue: r.show_column_selector,
                "onUpdate:modelValue": t[12] || (t[12] = (V) => r.show_column_selector = V),
                "max-width": "500px"
              }, {
                default: x(() => [
                  h(O, null, {
                    default: x(() => [
                      h(y, { class: "text-h6 pa-4 d-flex align-center" }, {
                        default: x(() => [
                          A("span", null, W(e.__("Select Columns to Display")), 1),
                          h(p),
                          h(b, {
                            icon: "mdi-close",
                            variant: "text",
                            density: "compact",
                            onClick: t[10] || (t[10] = (V) => r.show_column_selector = !1)
                          })
                        ]),
                        _: 1
                      }),
                      h(S),
                      h(C, { class: "pa-4" }, {
                        default: x(() => [
                          h(f, { dense: "" }, {
                            default: x(() => [
                              (ne(!0), Be(Qe, null, un(r.available_columns.filter((V) => !V.required), (V) => (ne(), Fe(d, {
                                cols: "12",
                                key: V.key
                              }, {
                                default: x(() => [
                                  h(E, {
                                    modelValue: r.temp_selected_columns,
                                    "onUpdate:modelValue": t[11] || (t[11] = (N) => r.temp_selected_columns = N),
                                    label: V.title,
                                    value: V.key,
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "column-switch mb-1",
                                    disabled: V.required
                                  }, null, 8, ["modelValue", "label", "value", "disabled"])
                                ]),
                                _: 2
                              }, 1024))), 128))
                            ]),
                            _: 1
                          }),
                          A("div", Gne, W(e.__("Required columns cannot be hidden")), 1)
                        ]),
                        _: 1
                      }),
                      h(B, { class: "pa-4 pt-0" }, {
                        default: x(() => [
                          h(b, {
                            color: "error",
                            variant: "text",
                            onClick: i.cancelColumnSelection
                          }, {
                            default: x(() => [
                              ae(W(e.__("Cancel")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"]),
                          h(p),
                          h(b, {
                            color: "primary",
                            variant: "tonal",
                            onClick: i.updateSelectedColumns
                          }, {
                            default: x(() => [
                              ae(W(e.__("Apply")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }, 8, ["modelValue"])
            ]),
            h(T, {
              ref: "itemsTable",
              headers: r.items_headers,
              items: r.items,
              expanded: r.expanded,
              "onUpdate:expanded": [
                t[13] || (t[13] = (V) => r.expanded = V),
                i.handleExpandedUpdate
              ],
              itemsPerPage: r.itemsPerPage,
              itemSearch: e.itemSearch,
              pos_profile: r.pos_profile,
              invoice_doc: r.invoice_doc,
              invoiceType: r.invoiceType,
              stock_settings: r.stock_settings,
              displayCurrency: e.displayCurrency,
              formatFloat: e.formatFloat,
              formatCurrency: i.formatCurrency,
              currencySymbol: e.currencySymbol,
              isNumber: e.isNumber,
              setFormatedQty: i.setFormatedQty,
              setFormatedCurrency: e.setFormatedCurrency,
              calcPrices: e.calc_prices,
              calcUom: e.calc_uom,
              setSerialNo: e.set_serial_no,
              setBatchQty: e.set_batch_qty,
              validateDueDate: e.validate_due_date,
              removeItem: e.remove_item,
              subtractOne: i.subtract_one,
              addOne: i.add_one,
              toggleOffer: e.toggleOffer,
              changePriceListRate: e.change_price_list_rate,
              isNegative: e.isNegative,
              onReorderItems: i.handleItemReorder,
              onAddItemFromDrag: i.handleItemDrop,
              onShowDropFeedback: i.showDropFeedback,
              onItemDropped: t[14] || (t[14] = (V) => i.showDropFeedback(!1)),
              onViewPacked: i.openPackedItems
            }, null, 8, ["headers", "items", "expanded", "itemsPerPage", "itemSearch", "pos_profile", "invoice_doc", "invoiceType", "stock_settings", "displayCurrency", "formatFloat", "formatCurrency", "currencySymbol", "isNumber", "setFormatedQty", "setFormatedCurrency", "calcPrices", "calcUom", "setSerialNo", "setBatchQty", "validateDueDate", "removeItem", "subtractOne", "addOne", "toggleOffer", "changePriceListRate", "isNegative", "onUpdate:expanded", "onReorderItems", "onAddItemFromDrag", "onShowDropFeedback", "onViewPacked"]),
            h(D, {
              modelValue: r.show_packed_dialog,
              "onUpdate:modelValue": t[16] || (t[16] = (V) => r.show_packed_dialog = V),
              "max-width": "800px"
            }, {
              default: x(() => [
                h(O, null, {
                  default: x(() => [
                    h(y, { class: "d-flex align-center" }, {
                      default: x(() => [
                        A("span", null, W(e.__("Packing List")) + " (" + W(r.packed_dialog_items.length) + ")", 1),
                        h(p),
                        h(b, {
                          icon: "mdi-close",
                          variant: "text",
                          density: "compact",
                          onClick: t[15] || (t[15] = (V) => r.show_packed_dialog = !1)
                        })
                      ]),
                      _: 1
                    }),
                    h(S),
                    h(C, null, {
                      default: x(() => [
                        h(l, {
                          type: "warning",
                          density: "compact",
                          class: "mb-2"
                        }, {
                          default: x(() => [
                            ae(W(e.__(
                              "For 'Product Bundle' items, Warehouse, Serial No and Batch No will be considered from the 'Packing List' table. If Warehouse and Batch No are same for all packing items for any 'Product Bundle' item, those values can be entered in the main Item table; values will be copied to 'Packing List' table."
                            )), 1)
                          ]),
                          _: 1
                        }),
                        h(I, {
                          headers: r.packedItemsHeaders,
                          items: r.packed_dialog_items,
                          class: "elevation-1",
                          "hide-default-footer": "",
                          density: "compact"
                        }, {
                          "item.index": x(({ index: V }) => [
                            ae(W(V + 1), 1)
                          ]),
                          "item.qty": x(({ item: V }) => [
                            ae(W(e.formatFloat(V.qty)), 1)
                          ]),
                          "item.rate": x(({ item: V }) => [
                            A("div", Qne, [
                              A("span", Jne, W(e.currencySymbol(e.displayCurrency)), 1),
                              A("span", Xne, W(i.formatCurrency(V.rate)), 1)
                            ])
                          ]),
                          "item.warehouse": x(({ item: V }) => [
                            h(P, {
                              modelValue: V.warehouse,
                              "onUpdate:modelValue": (N) => V.warehouse = N,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          "item.batch_no": x(({ item: V }) => [
                            h(P, {
                              modelValue: V.batch_no,
                              "onUpdate:modelValue": (N) => V.batch_no = N,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          "item.serial_no": x(({ item: V }) => [
                            h(P, {
                              modelValue: V.serial_no,
                              "onUpdate:modelValue": (N) => V.serial_no = N,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          _: 1
                        }, 8, ["headers", "items"])
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }, 8, ["modelValue"])
          ])
        ])
      ]),
      _: 1
    }, 8, ["style", "class", "onMouseup", "onTouchend"]),
    h(M, {
      pos_profile: r.pos_profile,
      invoice_doc: r.invoice_doc,
      items: r.items,
      total_qty: e.total_qty,
      additional_discount: r.additional_discount,
      additional_discount_percentage: r.additional_discount_percentage,
      total_items_discount_amount: e.total_items_discount_amount,
      subtotal: e.subtotal,
      displayCurrency: e.displayCurrency,
      formatFloat: e.formatFloat,
      formatCurrency: i.formatCurrency,
      currencySymbol: e.currencySymbol,
      discount_percentage_offer_name: r.discount_percentage_offer_name,
      isNumber: e.isNumber,
      "onUpdate:additional_discount": t[17] || (t[17] = (V) => r.additional_discount = V),
      "onUpdate:additional_discount_percentage": t[18] || (t[18] = (V) => r.additional_discount_percentage = V),
      onUpdate_discount_umount: e.update_discount_umount,
      onSaveAndClear: e.save_and_clear_invoice,
      onLoadDrafts: e.get_draft_invoices,
      onSelectOrder: e.get_draft_orders,
      onShowOrders: i.show_restaurant_orders,
      onPrintKot: i.print_kot,
      onSubmitOrder: i.submit_restaurant_order,
      onCancelSale: t[19] || (t[19] = (V) => r.cancel_dialog = !0),
      onOpenReturns: e.open_returns,
      onPrintDraft: i.print_draft_invoice,
      onShowPayment: e.show_payment
    }, null, 8, ["pos_profile", "invoice_doc", "items", "total_qty", "additional_discount", "additional_discount_percentage", "total_items_discount_amount", "subtotal", "displayCurrency", "formatFloat", "formatCurrency", "currencySymbol", "discount_percentage_offer_name", "isNumber", "onUpdate_discount_umount", "onSaveAndClear", "onLoadDrafts", "onSelectOrder", "onShowOrders", "onPrintKot", "onSubmitOrder", "onOpenReturns", "onPrintDraft", "onShowPayment"])
  ]);
}
const eae = /* @__PURE__ */ rn(zne, [["render", Zne], ["__scopeId", "data-v-0b191e57"]]), tae = {
  mixins: [Oi],
  props: ["dialog"],
  data() {
    return {
      isOpen: this.dialog ? this.dialog : !1,
      dialog_data: {},
      is_loading: !1,
      companies: [],
      company: "",
      pos_profiles_data: [],
      pos_profiles: [],
      pos_profile: "",
      payments_method_data: [],
      payments_methods: [],
      payments_methods_headers: [
        {
          title: __("Mode of Payment"),
          align: "start",
          sortable: !1,
          value: "mode_of_payment"
        },
        {
          title: __("Opening Amount"),
          value: "amount",
          align: "center",
          sortable: !1
        }
      ],
      itemsPerPage: 100,
      max25chars: (e) => e.length <= 12 || "Input too long!",
      pagination: {},
      snack: !1,
      snackColor: "",
      snackText: ""
    };
  },
  watch: {
    company(e) {
      this.pos_profiles = [], this.pos_profiles_data.forEach((t) => {
        t.company === e && this.pos_profiles.push(t.name), this.pos_profiles.length ? this.pos_profile = this.pos_profiles[0] : this.pos_profile = "";
      });
    },
    pos_profile(e) {
      this.payments_methods = [], this.payments_method_data.forEach((t) => {
        t.parent === e && this.payments_methods.push({
          mode_of_payment: t.mode_of_payment,
          amount: 0,
          currency: t.currency
        });
      });
    }
  },
  methods: {
    close_opening_dialog() {
      this.eventBus.emit("close_opening_dialog");
    },
    async get_opening_dialog_data() {
      const e = this;
      await sm, await ta();
      const t = Q9();
      if (t)
        try {
          e.companies = t.companies.map((n) => n.name), e.pos_profiles_data = t.pos_profiles_data || [], e.payments_method_data = t.payments_method || [], e.company = e.companies[0] || "";
        } catch (n) {
          console.error("Failed to parse opening dialog cache", n);
        }
      frappe.call({
        method: "posawesome.posawesome.api.shifts.get_opening_dialog_data",
        args: {},
        callback: function(n) {
          if (n.message) {
            e.companies = n.message.companies.map((a) => a.name), e.pos_profiles_data = n.message.pos_profiles_data, e.payments_method_data = n.message.payments_method, e.company = e.companies[0] || "";
            try {
              J9(n.message);
            } catch (a) {
              console.error("Failed to cache opening dialog data", a);
            }
          }
        }
      });
    },
    submit_dialog() {
      if (!this.payments_methods.length || !this.company || !this.pos_profile)
        return;
      this.is_loading = !0;
      const e = this;
      return frappe.call("posawesome.posawesome.api.shifts.create_opening_voucher", {
        pos_profile: this.pos_profile,
        company: this.company,
        balance_details: this.payments_methods
      }).then((t) => {
        if (t.message) {
          e.eventBus.emit("register_pos_data", t.message), e.eventBus.emit("set_company", t.message.company);
          try {
            a1(t.message);
          } catch (n) {
            console.error("Failed to cache opening data", n);
          }
          e.close_opening_dialog(), e.is_loading = !1;
        }
      });
    },
    go_desk() {
      frappe.set_route("/"), location.reload();
    }
  },
  mounted() {
    this.get_opening_dialog_data();
  },
  beforeUnmount() {
  }
}, nae = { class: "header-content" }, aae = { class: "header-icon-wrapper" }, rae = { class: "header-text" }, iae = { class: "header-title" }, oae = { class: "header-subtitle" }, sae = { class: "section-header-compact" }, lae = { class: "section-title-compact" };
function cae(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-card-title"), s = J("v-autocomplete"), d = J("v-col"), u = J("v-text-field"), f = J("v-data-table"), _ = J("v-row"), g = J("v-container"), v = J("v-card-text"), w = J("v-btn"), b = J("v-spacer"), p = J("v-card-actions"), y = J("v-card"), S = J("v-dialog");
  return ne(), Fe(_, { justify: "center" }, {
    default: x(() => [
      h(S, {
        modelValue: r.isOpen,
        "onUpdate:modelValue": t[2] || (t[2] = (E) => r.isOpen = E),
        persistent: "",
        "max-width": "800px",
        "max-height": "90vh"
      }, {
        default: x(() => [
          h(y, {
            elevation: "8",
            class: "opening-dialog-card"
          }, {
            default: x(() => [
              h(l, { class: "opening-dialog-header" }, {
                default: x(() => [
                  A("div", nae, [
                    A("div", aae, [
                      h(o, { class: "header-icon" }, {
                        default: x(() => t[3] || (t[3] = [
                          ae("mdi-cash-plus")
                        ])),
                        _: 1,
                        __: [3]
                      })
                    ]),
                    A("div", rae, [
                      A("h5", iae, W(e.__("Create POS Opening Shift")), 1),
                      A("p", oae, W(e.__("Initialize your shift with opening balances")), 1)
                    ])
                  ])
                ]),
                _: 1
              }),
              h(v, { class: "opening-dialog-content" }, {
                default: x(() => [
                  h(g, { class: "pa-0" }, {
                    default: x(() => [
                      h(_, null, {
                        default: x(() => [
                          h(d, {
                            cols: "12",
                            md: "6",
                            class: "form-field"
                          }, {
                            default: x(() => [
                              h(s, {
                                items: r.companies,
                                label: e.frappe._("Company"),
                                modelValue: r.company,
                                "onUpdate:modelValue": t[0] || (t[0] = (E) => r.company = E),
                                required: "",
                                variant: "outlined",
                                color: "primary",
                                density: "compact",
                                "prepend-inner-icon": "mdi-domain",
                                class: Ee(["enhanced-field", { "field-focused": r.company }])
                              }, null, 8, ["items", "label", "modelValue", "class"])
                            ]),
                            _: 1
                          }),
                          h(d, {
                            cols: "12",
                            md: "6",
                            class: "form-field"
                          }, {
                            default: x(() => [
                              h(s, {
                                items: r.pos_profiles,
                                label: e.frappe._("POS Profile"),
                                modelValue: r.pos_profile,
                                "onUpdate:modelValue": t[1] || (t[1] = (E) => r.pos_profile = E),
                                required: "",
                                variant: "outlined",
                                color: "primary",
                                density: "compact",
                                "prepend-inner-icon": "mdi-point-of-sale",
                                class: Ee(["enhanced-field", { "field-focused": r.pos_profile }])
                              }, null, 8, ["items", "label", "modelValue", "class"])
                            ]),
                            _: 1
                          }),
                          h(d, { cols: "12" }, {
                            default: x(() => [
                              A("div", sae, [
                                A("h6", lae, [
                                  h(o, { class: "section-icon" }, {
                                    default: x(() => t[4] || (t[4] = [
                                      ae("mdi-credit-card-multiple")
                                    ])),
                                    _: 1,
                                    __: [4]
                                  }),
                                  ae(" " + W(e.__("Payment Methods")), 1)
                                ])
                              ]),
                              h(f, {
                                headers: r.payments_methods_headers,
                                items: r.payments_methods,
                                "item-key": "mode_of_payment",
                                class: "enhanced-table-compact",
                                "items-per-page": r.itemsPerPage,
                                "hide-default-footer": "",
                                density: "compact",
                                height: "300px",
                                "fixed-header": ""
                              }, {
                                "item.amount": x(({ item: E }) => [
                                  h(u, {
                                    modelValue: E.amount,
                                    "onUpdate:modelValue": (C) => E.amount = C,
                                    rules: [r.max25chars],
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "hide-details": "",
                                    prefix: e.currencySymbol(E.currency),
                                    class: "amount-input"
                                  }, null, 8, ["modelValue", "onUpdate:modelValue", "rules", "prefix"])
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "items-per-page"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(p, { class: "dialog-actions-container" }, {
                default: x(() => [
                  h(w, {
                    theme: "dark",
                    onClick: i.go_desk,
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      h(o, { start: "" }, {
                        default: x(() => t[5] || (t[5] = [
                          ae("mdi-close-circle-outline")
                        ])),
                        _: 1,
                        __: [5]
                      }),
                      A("span", null, W(e.__("Cancel")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  h(b),
                  h(w, {
                    theme: "dark",
                    disabled: r.is_loading,
                    loading: r.is_loading,
                    onClick: i.submit_dialog,
                    class: "pos-action-btn submit-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      h(o, { start: "" }, {
                        default: x(() => t[6] || (t[6] = [
                          ae("mdi-check-circle-outline")
                        ])),
                        _: 1,
                        __: [6]
                      }),
                      A("span", null, W(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["disabled", "loading", "onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const uae = /* @__PURE__ */ rn(tae, [["render", cae], ["__scopeId", "data-v-b71142d6"]]);
var i_ = { exports: {} }, dae = i_.exports, HA;
function fae() {
  return HA || (HA = 1, function(e, t) {
    var n = { env: {} };
    /*! Browser bundle of nunjucks 3.2.4  */
    (function(r, i) {
      e.exports = i();
    })(typeof self < "u" ? self : dae, function() {
      return (
        /******/
        function(a) {
          var r = {};
          function i(o) {
            if (r[o])
              return r[o].exports;
            var l = r[o] = {
              /******/
              i: o,
              /******/
              l: !1,
              /******/
              exports: {}
              /******/
            };
            return a[o].call(l.exports, l, l.exports, i), l.l = !0, l.exports;
          }
          return i.m = a, i.c = r, i.d = function(o, l, s) {
            i.o(o, l) || Object.defineProperty(o, l, {
              /******/
              configurable: !1,
              /******/
              enumerable: !0,
              /******/
              get: s
              /******/
            });
          }, i.n = function(o) {
            var l = o && o.__esModule ? (
              /******/
              function() {
                return o.default;
              }
            ) : (
              /******/
              function() {
                return o;
              }
            );
            return i.d(l, "a", l), l;
          }, i.o = function(o, l) {
            return Object.prototype.hasOwnProperty.call(o, l);
          }, i.p = "", i(i.s = 11);
        }([
          /* 0 */
          /***/
          function(a, u, i) {
            var o = Array.prototype, l = Object.prototype, s = {
              "&": "&amp;",
              '"': "&quot;",
              "'": "&#39;",
              "<": "&lt;",
              ">": "&gt;",
              "\\": "&#92;"
            }, d = /[&"'<>\\]/g, u = a.exports = {};
            function f(F, Y) {
              return l.hasOwnProperty.call(F, Y);
            }
            u.hasOwnProp = f;
            function _(F) {
              return s[F];
            }
            function g(F, Y, se) {
              if (se.Update || (se = new u.TemplateError(se)), se.Update(F), !Y) {
                var X = se;
                se = new Error(X.message), se.name = X.name;
              }
              return se;
            }
            u._prettifyError = g;
            function v(F, Y, se) {
              var X, he;
              F instanceof Error && (he = F, F = he.name + ": " + he.message), Object.setPrototypeOf ? (X = new Error(F), Object.setPrototypeOf(X, v.prototype)) : (X = this, Object.defineProperty(X, "message", {
                enumerable: !1,
                writable: !0,
                value: F
              })), Object.defineProperty(X, "name", {
                value: "Template render error"
              }), Error.captureStackTrace && Error.captureStackTrace(X, this.constructor);
              var ve;
              if (he) {
                var pe = Object.getOwnPropertyDescriptor(he, "stack");
                ve = pe && (pe.get || function() {
                  return pe.value;
                }), ve || (ve = function() {
                  return he.stack;
                });
              } else {
                var H = new Error(F).stack;
                ve = function() {
                  return H;
                };
              }
              return Object.defineProperty(X, "stack", {
                get: function() {
                  return ve.call(X);
                }
              }), Object.defineProperty(X, "cause", {
                value: he
              }), X.lineno = Y, X.colno = se, X.firstUpdate = !0, X.Update = function(Me) {
                var Re = "(" + (Me || "unknown path") + ")";
                return this.firstUpdate && (this.lineno && this.colno ? Re += " [Line " + this.lineno + ", Column " + this.colno + "]" : this.lineno && (Re += " [Line " + this.lineno + "]")), Re += `
 `, this.firstUpdate && (Re += " "), this.message = Re + (this.message || ""), this.firstUpdate = !1, this;
              }, X;
            }
            Object.setPrototypeOf ? Object.setPrototypeOf(v.prototype, Error.prototype) : v.prototype = Object.create(Error.prototype, {
              constructor: {
                value: v
              }
            }), u.TemplateError = v;
            function w(F) {
              return F.replace(d, _);
            }
            u.escape = w;
            function b(F) {
              return l.toString.call(F) === "[object Function]";
            }
            u.isFunction = b;
            function p(F) {
              return l.toString.call(F) === "[object Array]";
            }
            u.isArray = p;
            function y(F) {
              return l.toString.call(F) === "[object String]";
            }
            u.isString = y;
            function S(F) {
              return l.toString.call(F) === "[object Object]";
            }
            u.isObject = S;
            function E(F) {
              return F ? typeof F == "string" ? F.split(".") : [F] : [];
            }
            function C(F) {
              var Y = E(F);
              return function(X) {
                for (var he = X, ve = 0; ve < Y.length; ve++) {
                  var pe = Y[ve];
                  if (f(he, pe))
                    he = he[pe];
                  else
                    return;
                }
                return he;
              };
            }
            u.getAttrGetter = C;
            function B(F, Y, se) {
              for (var X = {}, he = b(Y) ? Y : C(Y), ve = 0; ve < F.length; ve++) {
                var pe = F[ve], H = he(pe, ve);
                if (H === void 0 && se === !0)
                  throw new TypeError('groupby: attribute "' + Y + '" resolved to undefined');
                (X[H] || (X[H] = [])).push(pe);
              }
              return X;
            }
            u.groupBy = B;
            function O(F) {
              return Array.prototype.slice.call(F);
            }
            u.toArray = O;
            function D(F) {
              var Y = [];
              if (!F)
                return Y;
              for (var se = F.length, X = O(arguments).slice(1), he = -1; ++he < se; )
                N(X, F[he]) === -1 && Y.push(F[he]);
              return Y;
            }
            u.without = D;
            function T(F, Y) {
              for (var se = "", X = 0; X < Y; X++)
                se += F;
              return se;
            }
            u.repeat = T;
            function P(F, Y, se) {
              if (F != null) {
                if (o.forEach && F.forEach === o.forEach)
                  F.forEach(Y, se);
                else if (F.length === +F.length)
                  for (var X = 0, he = F.length; X < he; X++)
                    Y.call(se, F[X], X, F);
              }
            }
            u.each = P;
            function I(F, Y) {
              var se = [];
              if (F == null)
                return se;
              if (o.map && F.map === o.map)
                return F.map(Y);
              for (var X = 0; X < F.length; X++)
                se[se.length] = Y(F[X], X);
              return F.length === +F.length && (se.length = F.length), se;
            }
            u.map = I;
            function M(F, Y, se) {
              var X = -1;
              function he() {
                X++, X < F.length ? Y(F[X], X, he, se) : se();
              }
              he();
            }
            u.asyncIter = M;
            function V(F, Y, se) {
              var X = q(F || {}), he = X.length, ve = -1;
              function pe() {
                ve++;
                var H = X[ve];
                ve < he ? Y(H, F[H], ve, he, pe) : se();
              }
              pe();
            }
            u.asyncFor = V;
            function N(F, Y, se) {
              return Array.prototype.indexOf.call(F || [], Y, se);
            }
            u.indexOf = N;
            function q(F) {
              var Y = [];
              for (var se in F)
                f(F, se) && Y.push(se);
              return Y;
            }
            u.keys = q;
            function j(F) {
              return q(F).map(function(Y) {
                return [Y, F[Y]];
              });
            }
            u._entries = j;
            function ee(F) {
              return q(F).map(function(Y) {
                return F[Y];
              });
            }
            u._values = ee;
            function de(F, Y) {
              return F = F || {}, q(Y).forEach(function(se) {
                F[se] = Y[se];
              }), F;
            }
            u._assign = u.extend = de;
            function Z(F, Y) {
              if (p(Y) || y(Y))
                return Y.indexOf(F) !== -1;
              if (S(Y))
                return F in Y;
              throw new Error('Cannot use "in" operator to search for "' + F + '" in unexpected types.');
            }
            u.inOperator = Z;
          },
          /* 1 */
          /***/
          function(a, r, i) {
            function o(y, S) {
              for (var E = 0; E < S.length; E++) {
                var C = S[E];
                C.enumerable = C.enumerable || !1, C.configurable = !0, "value" in C && (C.writable = !0), Object.defineProperty(y, s(C.key), C);
              }
            }
            function l(y, S, E) {
              return S && o(y.prototype, S), Object.defineProperty(y, "prototype", { writable: !1 }), y;
            }
            function s(y) {
              var S = d(y, "string");
              return typeof S == "symbol" ? S : String(S);
            }
            function d(y, S) {
              if (typeof y != "object" || y === null) return y;
              var E = y[Symbol.toPrimitive];
              if (E !== void 0) {
                var C = E.call(y, S);
                if (typeof C != "object") return C;
                throw new TypeError("@@toPrimitive must return a primitive value.");
              }
              return String(y);
            }
            function u(y, S) {
              y.prototype = Object.create(S.prototype), y.prototype.constructor = y, f(y, S);
            }
            function f(y, S) {
              return f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(C, B) {
                return C.__proto__ = B, C;
              }, f(y, S);
            }
            var _ = i(16), g = i(0);
            function v(y, S) {
              return typeof y != "function" || typeof S != "function" ? S : function() {
                var C = this.parent;
                this.parent = y;
                var B = S.apply(this, arguments);
                return this.parent = C, B;
              };
            }
            function w(y, S, E) {
              E = E || {}, g.keys(E).forEach(function(B) {
                E[B] = v(y.prototype[B], E[B]);
              });
              var C = /* @__PURE__ */ function(B) {
                u(O, B);
                function O() {
                  return B.apply(this, arguments) || this;
                }
                return l(O, [{
                  key: "typename",
                  get: function() {
                    return S;
                  }
                }]), O;
              }(y);
              return g._assign(C.prototype, E), C;
            }
            var b = /* @__PURE__ */ function() {
              function y() {
                this.init.apply(this, arguments);
              }
              var S = y.prototype;
              return S.init = function() {
              }, y.extend = function(C, B) {
                return typeof C == "object" && (B = C, C = "anonymous"), w(this, C, B);
              }, l(y, [{
                key: "typename",
                get: function() {
                  return this.constructor.name;
                }
              }]), y;
            }(), p = /* @__PURE__ */ function(y) {
              u(S, y);
              function S() {
                var C, B;
                return B = y.call(this) || this, (C = B).init.apply(C, arguments), B;
              }
              var E = S.prototype;
              return E.init = function() {
              }, S.extend = function(B, O) {
                return typeof B == "object" && (O = B, B = "anonymous"), w(this, B, O);
              }, l(S, [{
                key: "typename",
                get: function() {
                  return this.constructor.name;
                }
              }]), S;
            }(_);
            a.exports = {
              Obj: b,
              EmitterObj: p
            };
          },
          /* 2 */
          /***/
          function(a, r, i) {
            var o = i(0), l = Array.from, s = typeof Symbol == "function" && Symbol.iterator && typeof l == "function", d = /* @__PURE__ */ function() {
              function I(V, N) {
                this.variables = /* @__PURE__ */ Object.create(null), this.parent = V, this.topLevel = !1, this.isolateWrites = N;
              }
              var M = I.prototype;
              return M.set = function(N, q, j) {
                var ee = N.split("."), de = this.variables, Z = this;
                if (j && (Z = this.resolve(ee[0], !0))) {
                  Z.set(N, q);
                  return;
                }
                for (var F = 0; F < ee.length - 1; F++) {
                  var Y = ee[F];
                  de[Y] || (de[Y] = {}), de = de[Y];
                }
                de[ee[ee.length - 1]] = q;
              }, M.get = function(N) {
                var q = this.variables[N];
                return q !== void 0 ? q : null;
              }, M.lookup = function(N) {
                var q = this.parent, j = this.variables[N];
                return j !== void 0 ? j : q && q.lookup(N);
              }, M.resolve = function(N, q) {
                var j = q && this.isolateWrites ? void 0 : this.parent, ee = this.variables[N];
                return ee !== void 0 ? this : j && j.resolve(N);
              }, M.push = function(N) {
                return new I(this, N);
              }, M.pop = function() {
                return this.parent;
              }, I;
            }();
            function u(I, M, V) {
              return function() {
                for (var q = arguments.length, j = new Array(q), ee = 0; ee < q; ee++)
                  j[ee] = arguments[ee];
                var de = v(j), Z, F = g(j);
                if (de > I.length)
                  Z = j.slice(0, I.length), j.slice(Z.length, de).forEach(function(X, he) {
                    he < M.length && (F[M[he]] = X);
                  }), Z.push(F);
                else if (de < I.length) {
                  Z = j.slice(0, de);
                  for (var Y = de; Y < I.length; Y++) {
                    var se = I[Y];
                    Z.push(F[se]), delete F[se];
                  }
                  Z.push(F);
                } else
                  Z = j;
                return V.apply(this, Z);
              };
            }
            function f(I) {
              return I.__keywords = !0, I;
            }
            function _(I) {
              return I && Object.prototype.hasOwnProperty.call(I, "__keywords");
            }
            function g(I) {
              var M = I.length;
              if (M) {
                var V = I[M - 1];
                if (_(V))
                  return V;
              }
              return {};
            }
            function v(I) {
              var M = I.length;
              if (M === 0)
                return 0;
              var V = I[M - 1];
              return _(V) ? M - 1 : M;
            }
            function w(I) {
              if (typeof I != "string")
                return I;
              this.val = I, this.length = I.length;
            }
            w.prototype = Object.create(String.prototype, {
              length: {
                writable: !0,
                configurable: !0,
                value: 0
              }
            }), w.prototype.valueOf = function() {
              return this.val;
            }, w.prototype.toString = function() {
              return this.val;
            };
            function b(I, M) {
              return I instanceof w ? new w(M) : M.toString();
            }
            function p(I) {
              var M = typeof I;
              return M === "string" ? new w(I) : M !== "function" ? I : function(N) {
                var q = I.apply(this, arguments);
                return typeof q == "string" ? new w(q) : q;
              };
            }
            function y(I, M) {
              return I = I ?? "", M && !(I instanceof w) && (I = o.escape(I.toString())), I;
            }
            function S(I, M, V) {
              if (I == null)
                throw new o.TemplateError("attempted to output null or undefined value", M + 1, V + 1);
              return I;
            }
            function E(I, M) {
              if (I != null)
                return typeof I[M] == "function" ? function() {
                  for (var V = arguments.length, N = new Array(V), q = 0; q < V; q++)
                    N[q] = arguments[q];
                  return I[M].apply(I, N);
                } : I[M];
            }
            function C(I, M, V, N) {
              if (I) {
                if (typeof I != "function")
                  throw new Error("Unable to call `" + M + "`, which is not a function");
              } else throw new Error("Unable to call `" + M + "`, which is undefined or falsey");
              return I.apply(V, N);
            }
            function B(I, M, V) {
              var N = M.lookup(V);
              return N !== void 0 ? N : I.lookup(V);
            }
            function O(I, M, V) {
              return I.lineno ? I : new o.TemplateError(I, M, V);
            }
            function D(I, M, V, N) {
              if (o.isArray(I)) {
                var q = I.length;
                o.asyncIter(I, function(ee, de, Z) {
                  switch (M) {
                    case 1:
                      V(ee, de, q, Z);
                      break;
                    case 2:
                      V(ee[0], ee[1], de, q, Z);
                      break;
                    case 3:
                      V(ee[0], ee[1], ee[2], de, q, Z);
                      break;
                    default:
                      ee.push(de, q, Z), V.apply(this, ee);
                  }
                }, N);
              } else
                o.asyncFor(I, function(ee, de, Z, F, Y) {
                  V(ee, de, Z, F, Y);
                }, N);
            }
            function T(I, M, V, N) {
              var q = 0, j, ee;
              function de(he, ve) {
                q++, ee[he] = ve, q === j && N(null, ee.join(""));
              }
              if (o.isArray(I))
                if (j = I.length, ee = new Array(j), j === 0)
                  N(null, "");
                else
                  for (var Z = 0; Z < I.length; Z++) {
                    var F = I[Z];
                    switch (M) {
                      case 1:
                        V(F, Z, j, de);
                        break;
                      case 2:
                        V(F[0], F[1], Z, j, de);
                        break;
                      case 3:
                        V(F[0], F[1], F[2], Z, j, de);
                        break;
                      default:
                        F.push(Z, j, de), V.apply(this, F);
                    }
                  }
              else {
                var Y = o.keys(I || {});
                if (j = Y.length, ee = new Array(j), j === 0)
                  N(null, "");
                else
                  for (var se = 0; se < Y.length; se++) {
                    var X = Y[se];
                    V(X, I[X], se, j, de);
                  }
              }
            }
            function P(I) {
              return typeof I != "object" || I === null || o.isArray(I) ? I : s && Symbol.iterator in I ? l(I) : I;
            }
            a.exports = {
              Frame: d,
              makeMacro: u,
              makeKeywordArgs: f,
              numArgs: v,
              suppressValue: y,
              ensureDefined: S,
              memberLookup: E,
              contextOrFrameLookup: B,
              callWrap: C,
              handleError: O,
              isArray: o.isArray,
              keys: o.keys,
              SafeString: w,
              copySafeness: b,
              markSafe: p,
              asyncEach: D,
              asyncAll: T,
              inOperator: o.inOperator,
              fromIterator: P
            };
          },
          /* 3 */
          /***/
          function(a, r, i) {
            function o(xe, ze) {
              for (var ft = 0; ft < ze.length; ft++) {
                var it = ze[ft];
                it.enumerable = it.enumerable || !1, it.configurable = !0, "value" in it && (it.writable = !0), Object.defineProperty(xe, s(it.key), it);
              }
            }
            function l(xe, ze, ft) {
              return ze && o(xe.prototype, ze), Object.defineProperty(xe, "prototype", { writable: !1 }), xe;
            }
            function s(xe) {
              var ze = d(xe, "string");
              return typeof ze == "symbol" ? ze : String(ze);
            }
            function d(xe, ze) {
              if (typeof xe != "object" || xe === null) return xe;
              var ft = xe[Symbol.toPrimitive];
              if (ft !== void 0) {
                var it = ft.call(xe, ze);
                if (typeof it != "object") return it;
                throw new TypeError("@@toPrimitive must return a primitive value.");
              }
              return String(xe);
            }
            function u(xe, ze) {
              xe.prototype = Object.create(ze.prototype), xe.prototype.constructor = xe, f(xe, ze);
            }
            function f(xe, ze) {
              return f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(it, je) {
                return it.__proto__ = je, it;
              }, f(xe, ze);
            }
            var _ = i(1), g = _.Obj;
            function v(xe, ze, ft) {
              xe instanceof ze && ft.push(xe), xe instanceof w && xe.findAll(ze, ft);
            }
            var w = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(je, st) {
                for (var pt = arguments, xa = this, Ua = arguments.length, _r = new Array(Ua > 2 ? Ua - 2 : 0), Wa = 2; Wa < Ua; Wa++)
                  _r[Wa - 2] = arguments[Wa];
                this.lineno = je, this.colno = st, this.fields.forEach(function(Qi, sl) {
                  var Ji = pt[sl + 2];
                  Ji === void 0 && (Ji = null), xa[Qi] = Ji;
                });
              }, ft.findAll = function(je, st) {
                var pt = this;
                return st = st || [], this instanceof p ? this.children.forEach(function(xa) {
                  return v(xa, je, st);
                }) : this.fields.forEach(function(xa) {
                  return v(pt[xa], je, st);
                }), st;
              }, ft.iterFields = function(je) {
                var st = this;
                this.fields.forEach(function(pt) {
                  je(st[pt], pt);
                });
              }, ze;
            }(g), b = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              return l(ze, [{
                key: "typename",
                get: function() {
                  return "Value";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["value"];
                }
              }]), ze;
            }(w), p = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(je, st, pt) {
                xe.prototype.init.call(this, je, st, pt || []);
              }, ft.addChild = function(je) {
                this.children.push(je);
              }, l(ze, [{
                key: "typename",
                get: function() {
                  return "NodeList";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["children"];
                }
              }]), ze;
            }(w), y = p.extend("Root"), S = b.extend("Literal"), E = b.extend("Symbol"), C = p.extend("Group"), B = p.extend("Array"), O = w.extend("Pair", {
              fields: ["key", "value"]
            }), D = p.extend("Dict"), T = w.extend("LookupVal", {
              fields: ["target", "val"]
            }), P = w.extend("If", {
              fields: ["cond", "body", "else_"]
            }), I = P.extend("IfAsync"), M = w.extend("InlineIf", {
              fields: ["cond", "body", "else_"]
            }), V = w.extend("For", {
              fields: ["arr", "name", "body", "else_"]
            }), N = V.extend("AsyncEach"), q = V.extend("AsyncAll"), j = w.extend("Macro", {
              fields: ["name", "args", "body"]
            }), ee = j.extend("Caller"), de = w.extend("Import", {
              fields: ["template", "target", "withContext"]
            }), Z = /* @__PURE__ */ function(xe) {
              u(ze, xe);
              function ze() {
                return xe.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(je, st, pt, xa, Ua) {
                xe.prototype.init.call(this, je, st, pt, xa || new p(), Ua);
              }, l(ze, [{
                key: "typename",
                get: function() {
                  return "FromImport";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["template", "names", "withContext"];
                }
              }]), ze;
            }(w), F = w.extend("FunCall", {
              fields: ["name", "args"]
            }), Y = F.extend("Filter"), se = Y.extend("FilterAsync", {
              fields: ["name", "args", "symbol"]
            }), X = D.extend("KeywordArgs"), he = w.extend("Block", {
              fields: ["name", "body"]
            }), ve = w.extend("Super", {
              fields: ["blockName", "symbol"]
            }), pe = w.extend("TemplateRef", {
              fields: ["template"]
            }), H = pe.extend("Extends"), we = w.extend("Include", {
              fields: ["template", "ignoreMissing"]
            }), Me = w.extend("Set", {
              fields: ["targets", "value"]
            }), Re = w.extend("Switch", {
              fields: ["expr", "cases", "default"]
            }), ce = w.extend("Case", {
              fields: ["cond", "body"]
            }), te = p.extend("Output"), G = w.extend("Capture", {
              fields: ["body"]
            }), le = S.extend("TemplateData"), K = w.extend("UnaryOp", {
              fields: ["target"]
            }), Ce = w.extend("BinOp", {
              fields: ["left", "right"]
            }), Te = Ce.extend("In"), ie = Ce.extend("Is"), ge = Ce.extend("Or"), Pe = Ce.extend("And"), Ie = K.extend("Not"), Je = Ce.extend("Add"), _e = Ce.extend("Concat"), $e = Ce.extend("Sub"), Ze = Ce.extend("Mul"), _t = Ce.extend("Div"), It = Ce.extend("FloorDiv"), rt = Ce.extend("Mod"), Dt = Ce.extend("Pow"), en = K.extend("Neg"), zn = K.extend("Pos"), na = w.extend("Compare", {
              fields: ["expr", "ops"]
            }), Na = w.extend("CompareOperand", {
              fields: ["expr", "type"]
            }), ya = w.extend("CallExtension", {
              init: function(ze, ft, it, je) {
                this.parent(), this.extName = ze.__name || ze, this.prop = ft, this.args = it || new p(), this.contentArgs = je || [], this.autoescape = ze.autoescape;
              },
              fields: ["extName", "prop", "args", "contentArgs"]
            }), Wn = ya.extend("CallExtensionAsync");
            function Vn(xe, ze, ft) {
              var it = xe.split(`
`);
              it.forEach(function(je, st) {
                je && (ft && st > 0 || !ft) && n.stdout.write(" ".repeat(ze));
                var pt = st === it.length - 1 ? "" : `
`;
                n.stdout.write("" + je + pt);
              });
            }
            function Ja(xe, ze) {
              if (ze = ze || 0, Vn(xe.typename + ": ", ze), xe instanceof p)
                Vn(`
`), xe.children.forEach(function(je) {
                  Ja(je, ze + 2);
                });
              else if (xe instanceof ya)
                Vn(xe.extName + "." + xe.prop + `
`), xe.args && Ja(xe.args, ze + 2), xe.contentArgs && xe.contentArgs.forEach(function(je) {
                  Ja(je, ze + 2);
                });
              else {
                var ft = [], it = null;
                xe.iterFields(function(je, st) {
                  je instanceof w ? ft.push([st, je]) : (it = it || {}, it[st] = je);
                }), it ? Vn(JSON.stringify(it, null, 2) + `
`, null, !0) : Vn(`
`), ft.forEach(function(je) {
                  var st = je[0], pt = je[1];
                  Vn("[" + st + "] =>", ze + 2), Ja(pt, ze + 4);
                });
              }
            }
            a.exports = {
              Node: w,
              Root: y,
              NodeList: p,
              Value: b,
              Literal: S,
              Symbol: E,
              Group: C,
              Array: B,
              Pair: O,
              Dict: D,
              Output: te,
              Capture: G,
              TemplateData: le,
              If: P,
              IfAsync: I,
              InlineIf: M,
              For: V,
              AsyncEach: N,
              AsyncAll: q,
              Macro: j,
              Caller: ee,
              Import: de,
              FromImport: Z,
              FunCall: F,
              Filter: Y,
              FilterAsync: se,
              KeywordArgs: X,
              Block: he,
              Super: ve,
              Extends: H,
              Include: we,
              Set: Me,
              Switch: Re,
              Case: ce,
              LookupVal: T,
              BinOp: Ce,
              In: Te,
              Is: ie,
              Or: ge,
              And: Pe,
              Not: Ie,
              Add: Je,
              Concat: _e,
              Sub: $e,
              Mul: Ze,
              Div: _t,
              FloorDiv: It,
              Mod: rt,
              Pow: Dt,
              Neg: en,
              Pos: zn,
              Compare: na,
              CompareOperand: Na,
              CallExtension: ya,
              CallExtensionAsync: Wn,
              printNodes: Ja
            };
          },
          /* 4 */
          /***/
          function(a, r) {
          },
          /* 5 */
          /***/
          function(a, r, i) {
            function o(S, E) {
              S.prototype = Object.create(E.prototype), S.prototype.constructor = S, l(S, E);
            }
            function l(S, E) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(B, O) {
                return B.__proto__ = O, B;
              }, l(S, E);
            }
            var s = i(8), d = i(17), u = i(3), f = i(0), _ = f.TemplateError, g = i(2), v = g.Frame, w = i(1), b = w.Obj, p = {
              "==": "==",
              "===": "===",
              "!=": "!=",
              "!==": "!==",
              "<": "<",
              ">": ">",
              "<=": "<=",
              ">=": ">="
            }, y = /* @__PURE__ */ function(S) {
              o(E, S);
              function E() {
                return S.apply(this, arguments) || this;
              }
              var C = E.prototype;
              return C.init = function(O, D) {
                this.templateName = O, this.codebuf = [], this.lastId = 0, this.buffer = null, this.bufferStack = [], this._scopeClosers = "", this.inBlock = !1, this.throwOnUndefined = D;
              }, C.fail = function(O, D, T) {
                throw D !== void 0 && (D += 1), T !== void 0 && (T += 1), new _(O, D, T);
              }, C._pushBuffer = function() {
                var O = this._tmpid();
                return this.bufferStack.push(this.buffer), this.buffer = O, this._emit("var " + this.buffer + ' = "";'), O;
              }, C._popBuffer = function() {
                this.buffer = this.bufferStack.pop();
              }, C._emit = function(O) {
                this.codebuf.push(O);
              }, C._emitLine = function(O) {
                this._emit(O + `
`);
              }, C._emitLines = function() {
                for (var O = this, D = arguments.length, T = new Array(D), P = 0; P < D; P++)
                  T[P] = arguments[P];
                T.forEach(function(I) {
                  return O._emitLine(I);
                });
              }, C._emitFuncBegin = function(O, D) {
                this.buffer = "output", this._scopeClosers = "", this._emitLine("function " + D + "(env, context, frame, runtime, cb) {"), this._emitLine("var lineno = " + O.lineno + ";"), this._emitLine("var colno = " + O.colno + ";"), this._emitLine("var " + this.buffer + ' = "";'), this._emitLine("try {");
              }, C._emitFuncEnd = function(O) {
                O || this._emitLine("cb(null, " + this.buffer + ");"), this._closeScopeLevels(), this._emitLine("} catch (e) {"), this._emitLine("  cb(runtime.handleError(e, lineno, colno));"), this._emitLine("}"), this._emitLine("}"), this.buffer = null;
              }, C._addScopeLevel = function() {
                this._scopeClosers += "})";
              }, C._closeScopeLevels = function() {
                this._emitLine(this._scopeClosers + ";"), this._scopeClosers = "";
              }, C._withScopedSyntax = function(O) {
                var D = this._scopeClosers;
                this._scopeClosers = "", O.call(this), this._closeScopeLevels(), this._scopeClosers = D;
              }, C._makeCallback = function(O) {
                var D = this._tmpid();
                return "function(" + D + (O ? "," + O : "") + `) {
if(` + D + ") { cb(" + D + "); return; }";
              }, C._tmpid = function() {
                return this.lastId++, "t_" + this.lastId;
              }, C._templateName = function() {
                return this.templateName == null ? "undefined" : JSON.stringify(this.templateName);
              }, C._compileChildren = function(O, D) {
                var T = this;
                O.children.forEach(function(P) {
                  T.compile(P, D);
                });
              }, C._compileAggregate = function(O, D, T, P) {
                var I = this;
                T && this._emit(T), O.children.forEach(function(M, V) {
                  V > 0 && I._emit(","), I.compile(M, D);
                }), P && this._emit(P);
              }, C._compileExpression = function(O, D) {
                this.assertType(O, u.Literal, u.Symbol, u.Group, u.Array, u.Dict, u.FunCall, u.Caller, u.Filter, u.LookupVal, u.Compare, u.InlineIf, u.In, u.Is, u.And, u.Or, u.Not, u.Add, u.Concat, u.Sub, u.Mul, u.Div, u.FloorDiv, u.Mod, u.Pow, u.Neg, u.Pos, u.Compare, u.NodeList), this.compile(O, D);
              }, C.assertType = function(O) {
                for (var D = arguments.length, T = new Array(D > 1 ? D - 1 : 0), P = 1; P < D; P++)
                  T[P - 1] = arguments[P];
                T.some(function(I) {
                  return O instanceof I;
                }) || this.fail("assertType: invalid type: " + O.typename, O.lineno, O.colno);
              }, C.compileCallExtension = function(O, D, T) {
                var P = this, I = O.args, M = O.contentArgs, V = typeof O.autoescape == "boolean" ? O.autoescape : !0;
                if (T || this._emit(this.buffer + " += runtime.suppressValue("), this._emit('env.getExtension("' + O.extName + '")["' + O.prop + '"]('), this._emit("context"), (I || M) && this._emit(","), I && (I instanceof u.NodeList || this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"), I.children.forEach(function(q, j) {
                  P._compileExpression(q, D), (j !== I.children.length - 1 || M.length) && P._emit(",");
                })), M.length && M.forEach(function(q, j) {
                  if (j > 0 && P._emit(","), q) {
                    P._emitLine("function(cb) {"), P._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");
                    var ee = P._pushBuffer();
                    P._withScopedSyntax(function() {
                      P.compile(q, D), P._emitLine("cb(null, " + ee + ");");
                    }), P._popBuffer(), P._emitLine("return " + ee + ";"), P._emitLine("}");
                  } else
                    P._emit("null");
                }), T) {
                  var N = this._tmpid();
                  this._emitLine(", " + this._makeCallback(N)), this._emitLine(this.buffer + " += runtime.suppressValue(" + N + ", " + V + " && env.opts.autoescape);"), this._addScopeLevel();
                } else
                  this._emit(")"), this._emit(", " + V + ` && env.opts.autoescape);
`);
              }, C.compileCallExtensionAsync = function(O, D) {
                this.compileCallExtension(O, D, !0);
              }, C.compileNodeList = function(O, D) {
                this._compileChildren(O, D);
              }, C.compileLiteral = function(O) {
                if (typeof O.value == "string") {
                  var D = O.value.replace(/\\/g, "\\\\");
                  D = D.replace(/"/g, '\\"'), D = D.replace(/\n/g, "\\n"), D = D.replace(/\r/g, "\\r"), D = D.replace(/\t/g, "\\t"), D = D.replace(/\u2028/g, "\\u2028"), this._emit('"' + D + '"');
                } else O.value === null ? this._emit("null") : this._emit(O.value.toString());
              }, C.compileSymbol = function(O, D) {
                var T = O.value, P = D.lookup(T);
                P ? this._emit(P) : this._emit('runtime.contextOrFrameLookup(context, frame, "' + T + '")');
              }, C.compileGroup = function(O, D) {
                this._compileAggregate(O, D, "(", ")");
              }, C.compileArray = function(O, D) {
                this._compileAggregate(O, D, "[", "]");
              }, C.compileDict = function(O, D) {
                this._compileAggregate(O, D, "{", "}");
              }, C.compilePair = function(O, D) {
                var T = O.key, P = O.value;
                T instanceof u.Symbol ? T = new u.Literal(T.lineno, T.colno, T.value) : T instanceof u.Literal && typeof T.value == "string" || this.fail("compilePair: Dict keys must be strings or names", T.lineno, T.colno), this.compile(T, D), this._emit(": "), this._compileExpression(P, D);
              }, C.compileInlineIf = function(O, D) {
                this._emit("("), this.compile(O.cond, D), this._emit("?"), this.compile(O.body, D), this._emit(":"), O.else_ !== null ? this.compile(O.else_, D) : this._emit('""'), this._emit(")");
              }, C.compileIn = function(O, D) {
                this._emit("runtime.inOperator("), this.compile(O.left, D), this._emit(","), this.compile(O.right, D), this._emit(")");
              }, C.compileIs = function(O, D) {
                var T = O.right.name ? O.right.name.value : O.right.value;
                this._emit('env.getTest("' + T + '").call(context, '), this.compile(O.left, D), O.right.args && (this._emit(","), this.compile(O.right.args, D)), this._emit(") === true");
              }, C._binOpEmitter = function(O, D, T) {
                this.compile(O.left, D), this._emit(T), this.compile(O.right, D);
              }, C.compileOr = function(O, D) {
                return this._binOpEmitter(O, D, " || ");
              }, C.compileAnd = function(O, D) {
                return this._binOpEmitter(O, D, " && ");
              }, C.compileAdd = function(O, D) {
                return this._binOpEmitter(O, D, " + ");
              }, C.compileConcat = function(O, D) {
                return this._binOpEmitter(O, D, ' + "" + ');
              }, C.compileSub = function(O, D) {
                return this._binOpEmitter(O, D, " - ");
              }, C.compileMul = function(O, D) {
                return this._binOpEmitter(O, D, " * ");
              }, C.compileDiv = function(O, D) {
                return this._binOpEmitter(O, D, " / ");
              }, C.compileMod = function(O, D) {
                return this._binOpEmitter(O, D, " % ");
              }, C.compileNot = function(O, D) {
                this._emit("!"), this.compile(O.target, D);
              }, C.compileFloorDiv = function(O, D) {
                this._emit("Math.floor("), this.compile(O.left, D), this._emit(" / "), this.compile(O.right, D), this._emit(")");
              }, C.compilePow = function(O, D) {
                this._emit("Math.pow("), this.compile(O.left, D), this._emit(", "), this.compile(O.right, D), this._emit(")");
              }, C.compileNeg = function(O, D) {
                this._emit("-"), this.compile(O.target, D);
              }, C.compilePos = function(O, D) {
                this._emit("+"), this.compile(O.target, D);
              }, C.compileCompare = function(O, D) {
                var T = this;
                this.compile(O.expr, D), O.ops.forEach(function(P) {
                  T._emit(" " + p[P.type] + " "), T.compile(P.expr, D);
                });
              }, C.compileLookupVal = function(O, D) {
                this._emit("runtime.memberLookup(("), this._compileExpression(O.target, D), this._emit("),"), this._compileExpression(O.val, D), this._emit(")");
              }, C._getNodeName = function(O) {
                switch (O.typename) {
                  case "Symbol":
                    return O.value;
                  case "FunCall":
                    return "the return value of (" + this._getNodeName(O.name) + ")";
                  case "LookupVal":
                    return this._getNodeName(O.target) + '["' + this._getNodeName(O.val) + '"]';
                  case "Literal":
                    return O.value.toString();
                  default:
                    return "--expression--";
                }
              }, C.compileFunCall = function(O, D) {
                this._emit("(lineno = " + O.lineno + ", colno = " + O.colno + ", "), this._emit("runtime.callWrap("), this._compileExpression(O.name, D), this._emit(', "' + this._getNodeName(O.name).replace(/"/g, '\\"') + '", context, '), this._compileAggregate(O.args, D, "[", "])"), this._emit(")");
              }, C.compileFilter = function(O, D) {
                var T = O.name;
                this.assertType(T, u.Symbol), this._emit('env.getFilter("' + T.value + '").call(context, '), this._compileAggregate(O.args, D), this._emit(")");
              }, C.compileFilterAsync = function(O, D) {
                var T = O.name, P = O.symbol.value;
                this.assertType(T, u.Symbol), D.set(P, P), this._emit('env.getFilter("' + T.value + '").call(context, '), this._compileAggregate(O.args, D), this._emitLine(", " + this._makeCallback(P)), this._addScopeLevel();
              }, C.compileKeywordArgs = function(O, D) {
                this._emit("runtime.makeKeywordArgs("), this.compileDict(O, D), this._emit(")");
              }, C.compileSet = function(O, D) {
                var T = this, P = [];
                O.targets.forEach(function(I) {
                  var M = I.value, V = D.lookup(M);
                  V == null && (V = T._tmpid(), T._emitLine("var " + V + ";")), P.push(V);
                }), O.value ? (this._emit(P.join(" = ") + " = "), this._compileExpression(O.value, D), this._emitLine(";")) : (this._emit(P.join(" = ") + " = "), this.compile(O.body, D), this._emitLine(";")), O.targets.forEach(function(I, M) {
                  var V = P[M], N = I.value;
                  T._emitLine('frame.set("' + N + '", ' + V + ", true);"), T._emitLine("if(frame.topLevel) {"), T._emitLine('context.setVariable("' + N + '", ' + V + ");"), T._emitLine("}"), N.charAt(0) !== "_" && (T._emitLine("if(frame.topLevel) {"), T._emitLine('context.addExport("' + N + '", ' + V + ");"), T._emitLine("}"));
                });
              }, C.compileSwitch = function(O, D) {
                var T = this;
                this._emit("switch ("), this.compile(O.expr, D), this._emit(") {"), O.cases.forEach(function(P, I) {
                  T._emit("case "), T.compile(P.cond, D), T._emit(": "), T.compile(P.body, D), P.body.children.length && T._emitLine("break;");
                }), O.default && (this._emit("default:"), this.compile(O.default, D)), this._emit("}");
              }, C.compileIf = function(O, D, T) {
                var P = this;
                this._emit("if("), this._compileExpression(O.cond, D), this._emitLine(") {"), this._withScopedSyntax(function() {
                  P.compile(O.body, D), T && P._emit("cb()");
                }), O.else_ ? (this._emitLine(`}
else {`), this._withScopedSyntax(function() {
                  P.compile(O.else_, D), T && P._emit("cb()");
                })) : T && (this._emitLine(`}
else {`), this._emit("cb()")), this._emitLine("}");
              }, C.compileIfAsync = function(O, D) {
                this._emit("(function(cb) {"), this.compileIf(O, D, !0), this._emit("})(" + this._makeCallback()), this._addScopeLevel();
              }, C._emitLoopBindings = function(O, D, T, P) {
                var I = this, M = [{
                  name: "index",
                  val: T + " + 1"
                }, {
                  name: "index0",
                  val: T
                }, {
                  name: "revindex",
                  val: P + " - " + T
                }, {
                  name: "revindex0",
                  val: P + " - " + T + " - 1"
                }, {
                  name: "first",
                  val: T + " === 0"
                }, {
                  name: "last",
                  val: T + " === " + P + " - 1"
                }, {
                  name: "length",
                  val: P
                }];
                M.forEach(function(V) {
                  I._emitLine('frame.set("loop.' + V.name + '", ' + V.val + ");");
                });
              }, C.compileFor = function(O, D) {
                var T = this, P = this._tmpid(), I = this._tmpid(), M = this._tmpid();
                if (D = D.push(), this._emitLine("frame = frame.push();"), this._emit("var " + M + " = "), this._compileExpression(O.arr, D), this._emitLine(";"), this._emit("if(" + M + ") {"), this._emitLine(M + " = runtime.fromIterator(" + M + ");"), O.name instanceof u.Array) {
                  this._emitLine("var " + P + ";"), this._emitLine("if(runtime.isArray(" + M + ")) {"), this._emitLine("var " + I + " = " + M + ".length;"), this._emitLine("for(" + P + "=0; " + P + " < " + M + ".length; " + P + "++) {"), O.name.children.forEach(function(Z, F) {
                    var Y = T._tmpid();
                    T._emitLine("var " + Y + " = " + M + "[" + P + "][" + F + "];"), T._emitLine('frame.set("' + Z + '", ' + M + "[" + P + "][" + F + "]);"), D.set(O.name.children[F].value, Y);
                  }), this._emitLoopBindings(O, M, P, I), this._withScopedSyntax(function() {
                    T.compile(O.body, D);
                  }), this._emitLine("}"), this._emitLine("} else {");
                  var V = O.name.children, N = V[0], q = V[1], j = this._tmpid(), ee = this._tmpid();
                  D.set(N.value, j), D.set(q.value, ee), this._emitLine(P + " = -1;"), this._emitLine("var " + I + " = runtime.keys(" + M + ").length;"), this._emitLine("for(var " + j + " in " + M + ") {"), this._emitLine(P + "++;"), this._emitLine("var " + ee + " = " + M + "[" + j + "];"), this._emitLine('frame.set("' + N.value + '", ' + j + ");"), this._emitLine('frame.set("' + q.value + '", ' + ee + ");"), this._emitLoopBindings(O, M, P, I), this._withScopedSyntax(function() {
                    T.compile(O.body, D);
                  }), this._emitLine("}"), this._emitLine("}");
                } else {
                  var de = this._tmpid();
                  D.set(O.name.value, de), this._emitLine("var " + I + " = " + M + ".length;"), this._emitLine("for(var " + P + "=0; " + P + " < " + M + ".length; " + P + "++) {"), this._emitLine("var " + de + " = " + M + "[" + P + "];"), this._emitLine('frame.set("' + O.name.value + '", ' + de + ");"), this._emitLoopBindings(O, M, P, I), this._withScopedSyntax(function() {
                    T.compile(O.body, D);
                  }), this._emitLine("}");
                }
                this._emitLine("}"), O.else_ && (this._emitLine("if (!" + I + ") {"), this.compile(O.else_, D), this._emitLine("}")), this._emitLine("frame = frame.pop();");
              }, C._compileAsyncLoop = function(O, D, T) {
                var P = this, I = this._tmpid(), M = this._tmpid(), V = this._tmpid(), N = T ? "asyncAll" : "asyncEach";
                if (D = D.push(), this._emitLine("frame = frame.push();"), this._emit("var " + V + " = runtime.fromIterator("), this._compileExpression(O.arr, D), this._emitLine(");"), O.name instanceof u.Array) {
                  var q = O.name.children.length;
                  this._emit("runtime." + N + "(" + V + ", " + q + ", function("), O.name.children.forEach(function(de) {
                    P._emit(de.value + ",");
                  }), this._emit(I + "," + M + ",next) {"), O.name.children.forEach(function(de) {
                    var Z = de.value;
                    D.set(Z, Z), P._emitLine('frame.set("' + Z + '", ' + Z + ");");
                  });
                } else {
                  var j = O.name.value;
                  this._emitLine("runtime." + N + "(" + V + ", 1, function(" + j + ", " + I + ", " + M + ",next) {"), this._emitLine('frame.set("' + j + '", ' + j + ");"), D.set(j, j);
                }
                this._emitLoopBindings(O, V, I, M), this._withScopedSyntax(function() {
                  var de;
                  T && (de = P._pushBuffer()), P.compile(O.body, D), P._emitLine("next(" + I + (de ? "," + de : "") + ");"), T && P._popBuffer();
                });
                var ee = this._tmpid();
                this._emitLine("}, " + this._makeCallback(ee)), this._addScopeLevel(), T && this._emitLine(this.buffer + " += " + ee + ";"), O.else_ && (this._emitLine("if (!" + V + ".length) {"), this.compile(O.else_, D), this._emitLine("}")), this._emitLine("frame = frame.pop();");
              }, C.compileAsyncEach = function(O, D) {
                this._compileAsyncLoop(O, D);
              }, C.compileAsyncAll = function(O, D) {
                this._compileAsyncLoop(O, D, !0);
              }, C._compileMacro = function(O, D) {
                var T = this, P = [], I = null, M = "macro_" + this._tmpid(), V = D !== void 0;
                O.args.children.forEach(function(Z, F) {
                  F === O.args.children.length - 1 && Z instanceof u.Dict ? I = Z : (T.assertType(Z, u.Symbol), P.push(Z));
                });
                var N = [].concat(P.map(function(Z) {
                  return "l_" + Z.value;
                }), ["kwargs"]), q = P.map(function(Z) {
                  return '"' + Z.value + '"';
                }), j = (I && I.children || []).map(function(Z) {
                  return '"' + Z.key.value + '"';
                }), ee;
                V ? ee = D.push(!0) : ee = new v(), this._emitLines("var " + M + " = runtime.makeMacro(", "[" + q.join(", ") + "], ", "[" + j.join(", ") + "], ", "function (" + N.join(", ") + ") {", "var callerFrame = frame;", "frame = " + (V ? "frame.push(true);" : "new runtime.Frame();"), "kwargs = kwargs || {};", 'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {', 'frame.set("caller", kwargs.caller); }'), P.forEach(function(Z) {
                  T._emitLine('frame.set("' + Z.value + '", l_' + Z.value + ");"), ee.set(Z.value, "l_" + Z.value);
                }), I && I.children.forEach(function(Z) {
                  var F = Z.key.value;
                  T._emit('frame.set("' + F + '", '), T._emit('Object.prototype.hasOwnProperty.call(kwargs, "' + F + '")'), T._emit(' ? kwargs["' + F + '"] : '), T._compileExpression(Z.value, ee), T._emit(");");
                });
                var de = this._pushBuffer();
                return this._withScopedSyntax(function() {
                  T.compile(O.body, ee);
                }), this._emitLine("frame = " + (V ? "frame.pop();" : "callerFrame;")), this._emitLine("return new runtime.SafeString(" + de + ");"), this._emitLine("});"), this._popBuffer(), M;
              }, C.compileMacro = function(O, D) {
                var T = this._compileMacro(O), P = O.name.value;
                D.set(P, T), D.parent ? this._emitLine('frame.set("' + P + '", ' + T + ");") : (O.name.value.charAt(0) !== "_" && this._emitLine('context.addExport("' + P + '");'), this._emitLine('context.setVariable("' + P + '", ' + T + ");"));
              }, C.compileCaller = function(O, D) {
                this._emit("(function (){");
                var T = this._compileMacro(O, D);
                this._emit("return " + T + ";})()");
              }, C._compileGetTemplate = function(O, D, T, P) {
                var I = this._tmpid(), M = this._templateName(), V = this._makeCallback(I), N = T ? "true" : "false", q = P ? "true" : "false";
                return this._emit("env.getTemplate("), this._compileExpression(O.template, D), this._emitLine(", " + N + ", " + M + ", " + q + ", " + V), I;
              }, C.compileImport = function(O, D) {
                var T = O.target.value, P = this._compileGetTemplate(O, D, !1, !1);
                this._addScopeLevel(), this._emitLine(P + ".getExported(" + (O.withContext ? "context.getVariables(), frame, " : "") + this._makeCallback(P)), this._addScopeLevel(), D.set(T, P), D.parent ? this._emitLine('frame.set("' + T + '", ' + P + ");") : this._emitLine('context.setVariable("' + T + '", ' + P + ");");
              }, C.compileFromImport = function(O, D) {
                var T = this, P = this._compileGetTemplate(O, D, !1, !1);
                this._addScopeLevel(), this._emitLine(P + ".getExported(" + (O.withContext ? "context.getVariables(), frame, " : "") + this._makeCallback(P)), this._addScopeLevel(), O.names.children.forEach(function(I) {
                  var M, V, N = T._tmpid();
                  I instanceof u.Pair ? (M = I.key.value, V = I.value.value) : (M = I.value, V = M), T._emitLine("if(Object.prototype.hasOwnProperty.call(" + P + ', "' + M + '")) {'), T._emitLine("var " + N + " = " + P + "." + M + ";"), T._emitLine("} else {"), T._emitLine(`cb(new Error("cannot import '` + M + `'")); return;`), T._emitLine("}"), D.set(V, N), D.parent ? T._emitLine('frame.set("' + V + '", ' + N + ");") : T._emitLine('context.setVariable("' + V + '", ' + N + ");");
                });
              }, C.compileBlock = function(O) {
                var D = this._tmpid();
                this.inBlock || this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '), this._emit('context.getBlock("' + O.name.value + '")'), this.inBlock || this._emit(")"), this._emitLine("(env, context, frame, runtime, " + this._makeCallback(D)), this._emitLine(this.buffer + " += " + D + ";"), this._addScopeLevel();
              }, C.compileSuper = function(O, D) {
                var T = O.blockName.value, P = O.symbol.value, I = this._makeCallback(P);
                this._emitLine('context.getSuper(env, "' + T + '", b_' + T + ", frame, runtime, " + I), this._emitLine(P + " = runtime.markSafe(" + P + ");"), this._addScopeLevel(), D.set(P, P);
              }, C.compileExtends = function(O, D) {
                var T = this._tmpid(), P = this._compileGetTemplate(O, D, !0, !1);
                this._emitLine("parentTemplate = " + P), this._emitLine("for(var " + T + " in parentTemplate.blocks) {"), this._emitLine("context.addBlock(" + T + ", parentTemplate.blocks[" + T + "]);"), this._emitLine("}"), this._addScopeLevel();
              }, C.compileInclude = function(O, D) {
                this._emitLine("var tasks = [];"), this._emitLine("tasks.push("), this._emitLine("function(callback) {");
                var T = this._compileGetTemplate(O, D, !1, O.ignoreMissing);
                this._emitLine("callback(null," + T + ");});"), this._emitLine("});");
                var P = this._tmpid();
                this._emitLine("tasks.push("), this._emitLine("function(template, callback){"), this._emitLine("template.render(context.getVariables(), frame, " + this._makeCallback(P)), this._emitLine("callback(null," + P + ");});"), this._emitLine("});"), this._emitLine("tasks.push("), this._emitLine("function(result, callback){"), this._emitLine(this.buffer + " += result;"), this._emitLine("callback(null);"), this._emitLine("});"), this._emitLine("env.waterfall(tasks, function(){"), this._addScopeLevel();
              }, C.compileTemplateData = function(O, D) {
                this.compileLiteral(O, D);
              }, C.compileCapture = function(O, D) {
                var T = this, P = this.buffer;
                this.buffer = "output", this._emitLine("(function() {"), this._emitLine('var output = "";'), this._withScopedSyntax(function() {
                  T.compile(O.body, D);
                }), this._emitLine("return output;"), this._emitLine("})()"), this.buffer = P;
              }, C.compileOutput = function(O, D) {
                var T = this, P = O.children;
                P.forEach(function(I) {
                  I instanceof u.TemplateData ? I.value && (T._emit(T.buffer + " += "), T.compileLiteral(I, D), T._emitLine(";")) : (T._emit(T.buffer + " += runtime.suppressValue("), T.throwOnUndefined && T._emit("runtime.ensureDefined("), T.compile(I, D), T.throwOnUndefined && T._emit("," + O.lineno + "," + O.colno + ")"), T._emit(`, env.opts.autoescape);
`));
                });
              }, C.compileRoot = function(O, D) {
                var T = this;
                D && this.fail("compileRoot: root node can't have frame"), D = new v(), this._emitFuncBegin(O, "root"), this._emitLine("var parentTemplate = null;"), this._compileChildren(O, D), this._emitLine("if(parentTemplate) {"), this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"), this._emitLine("} else {"), this._emitLine("cb(null, " + this.buffer + ");"), this._emitLine("}"), this._emitFuncEnd(!0), this.inBlock = !0;
                var P = [], I = O.findAll(u.Block);
                I.forEach(function(M, V) {
                  var N = M.name.value;
                  if (P.indexOf(N) !== -1)
                    throw new Error('Block "' + N + '" defined more than once.');
                  P.push(N), T._emitFuncBegin(M, "b_" + N);
                  var q = new v();
                  T._emitLine("var frame = frame.push(true);"), T.compile(M.body, q), T._emitFuncEnd();
                }), this._emitLine("return {"), I.forEach(function(M, V) {
                  var N = "b_" + M.name.value;
                  T._emitLine(N + ": " + N + ",");
                }), this._emitLine(`root: root
};`);
              }, C.compile = function(O, D) {
                var T = this["compile" + O.typename];
                T ? T.call(this, O, D) : this.fail("compile: Cannot compile node: " + O.typename, O.lineno, O.colno);
              }, C.getCode = function() {
                return this.codebuf.join("");
              }, E;
            }(b);
            a.exports = {
              compile: function(E, C, B, O, D) {
                D === void 0 && (D = {});
                var T = new y(O, D.throwOnUndefined), P = (B || []).map(function(M) {
                  return M.preprocess;
                }).filter(function(M) {
                  return !!M;
                }), I = P.reduce(function(M, V) {
                  return V(M);
                }, E);
                return T.compile(d.transform(s.parse(I, B, D), C, O)), T.getCode();
              },
              Compiler: y
            };
          },
          /* 6 */
          /***/
          function(a, r, i) {
            function o(f, _) {
              f.prototype = Object.create(_.prototype), f.prototype.constructor = f, l(f, _);
            }
            function l(f, _) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(v, w) {
                return v.__proto__ = w, v;
              }, l(f, _);
            }
            var s = i(4), d = i(1), u = d.EmitterObj;
            a.exports = /* @__PURE__ */ function(f) {
              o(_, f);
              function _() {
                return f.apply(this, arguments) || this;
              }
              var g = _.prototype;
              return g.resolve = function(w, b) {
                return s.resolve(s.dirname(w), b);
              }, g.isRelative = function(w) {
                return w.indexOf("./") === 0 || w.indexOf("../") === 0;
              }, _;
            }(u);
          },
          /* 7 */
          /***/
          function(a, r, i) {
            function o(q, j) {
              q.prototype = Object.create(j.prototype), q.prototype.constructor = q, l(q, j);
            }
            function l(q, j) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(de, Z) {
                return de.__proto__ = Z, de;
              }, l(q, j);
            }
            var s = i(12), d = i(15), u = i(0), f = i(5), _ = i(18), g = i(10), v = g.FileSystemLoader, w = g.WebLoader, b = g.PrecompiledLoader, p = i(20), y = i(21), S = i(1), E = S.Obj, C = S.EmitterObj, B = i(2), O = B.handleError, D = B.Frame, T = i(22);
            function P(q, j, ee) {
              s(function() {
                q(j, ee);
              });
            }
            var I = {
              type: "code",
              obj: {
                root: function(j, ee, de, Z, F) {
                  try {
                    F(null, "");
                  } catch (Y) {
                    F(O(Y, null, null));
                  }
                }
              }
            }, M = /* @__PURE__ */ function(q) {
              o(j, q);
              function j() {
                return q.apply(this, arguments) || this;
              }
              var ee = j.prototype;
              return ee.init = function(Z, F) {
                var Y = this;
                F = this.opts = F || {}, this.opts.dev = !!F.dev, this.opts.autoescape = F.autoescape != null ? F.autoescape : !0, this.opts.throwOnUndefined = !!F.throwOnUndefined, this.opts.trimBlocks = !!F.trimBlocks, this.opts.lstripBlocks = !!F.lstripBlocks, this.loaders = [], Z ? this.loaders = u.isArray(Z) ? Z : [Z] : v ? this.loaders = [new v("views")] : w && (this.loaders = [new w("/views")]), typeof window < "u" && window.nunjucksPrecompiled && this.loaders.unshift(new b(window.nunjucksPrecompiled)), this._initLoaders(), this.globals = y(), this.filters = {}, this.tests = {}, this.asyncFilters = [], this.extensions = {}, this.extensionsList = [], u._entries(_).forEach(function(se) {
                  var X = se[0], he = se[1];
                  return Y.addFilter(X, he);
                }), u._entries(p).forEach(function(se) {
                  var X = se[0], he = se[1];
                  return Y.addTest(X, he);
                });
              }, ee._initLoaders = function() {
                var Z = this;
                this.loaders.forEach(function(F) {
                  F.cache = {}, typeof F.on == "function" && (F.on("update", function(Y, se) {
                    F.cache[Y] = null, Z.emit("update", Y, se, F);
                  }), F.on("load", function(Y, se) {
                    Z.emit("load", Y, se, F);
                  }));
                });
              }, ee.invalidateCache = function() {
                this.loaders.forEach(function(Z) {
                  Z.cache = {};
                });
              }, ee.addExtension = function(Z, F) {
                return F.__name = Z, this.extensions[Z] = F, this.extensionsList.push(F), this;
              }, ee.removeExtension = function(Z) {
                var F = this.getExtension(Z);
                F && (this.extensionsList = u.without(this.extensionsList, F), delete this.extensions[Z]);
              }, ee.getExtension = function(Z) {
                return this.extensions[Z];
              }, ee.hasExtension = function(Z) {
                return !!this.extensions[Z];
              }, ee.addGlobal = function(Z, F) {
                return this.globals[Z] = F, this;
              }, ee.getGlobal = function(Z) {
                if (typeof this.globals[Z] > "u")
                  throw new Error("global not found: " + Z);
                return this.globals[Z];
              }, ee.addFilter = function(Z, F, Y) {
                var se = F;
                return Y && this.asyncFilters.push(Z), this.filters[Z] = se, this;
              }, ee.getFilter = function(Z) {
                if (!this.filters[Z])
                  throw new Error("filter not found: " + Z);
                return this.filters[Z];
              }, ee.addTest = function(Z, F) {
                return this.tests[Z] = F, this;
              }, ee.getTest = function(Z) {
                if (!this.tests[Z])
                  throw new Error("test not found: " + Z);
                return this.tests[Z];
              }, ee.resolveTemplate = function(Z, F, Y) {
                var se = Z.isRelative && F ? Z.isRelative(Y) : !1;
                return se && Z.resolve ? Z.resolve(F, Y) : Y;
              }, ee.getTemplate = function(Z, F, Y, se, X) {
                var he = this, ve = this, pe = null;
                if (Z && Z.raw && (Z = Z.raw), u.isFunction(Y) && (X = Y, Y = null, F = F || !1), u.isFunction(F) && (X = F, F = !1), Z instanceof N)
                  pe = Z;
                else {
                  if (typeof Z != "string")
                    throw new Error("template names must be a string: " + Z);
                  for (var H = 0; H < this.loaders.length; H++) {
                    var we = this.loaders[H];
                    if (pe = we.cache[this.resolveTemplate(we, Y, Z)], pe)
                      break;
                  }
                }
                if (pe)
                  if (F && pe.compile(), X) {
                    X(null, pe);
                    return;
                  } else
                    return pe;
                var Me, Re = function(te, G) {
                  if (!G && !te && !se && (te = new Error("template not found: " + Z)), te)
                    if (X) {
                      X(te);
                      return;
                    } else
                      throw te;
                  var le;
                  G ? (le = new N(G.src, he, G.path, F), G.noCache || (G.loader.cache[Z] = le)) : le = new N(I, he, "", F), X ? X(null, le) : Me = le;
                };
                return u.asyncIter(this.loaders, function(ce, te, G, le) {
                  function K(Ce, Te) {
                    Ce ? le(Ce) : Te ? (Te.loader = ce, le(null, Te)) : G();
                  }
                  Z = ve.resolveTemplate(ce, Y, Z), ce.async ? ce.getSource(Z, K) : K(null, ce.getSource(Z));
                }, Re), Me;
              }, ee.express = function(Z) {
                return T(this, Z);
              }, ee.render = function(Z, F, Y) {
                u.isFunction(F) && (Y = F, F = null);
                var se = null;
                return this.getTemplate(Z, function(X, he) {
                  if (X && Y)
                    P(Y, X);
                  else {
                    if (X)
                      throw X;
                    se = he.render(F, Y);
                  }
                }), se;
              }, ee.renderString = function(Z, F, Y, se) {
                u.isFunction(Y) && (se = Y, Y = {}), Y = Y || {};
                var X = new N(Z, this, Y.path);
                return X.render(F, se);
              }, ee.waterfall = function(Z, F, Y) {
                return d(Z, F, Y);
              }, j;
            }(C), V = /* @__PURE__ */ function(q) {
              o(j, q);
              function j() {
                return q.apply(this, arguments) || this;
              }
              var ee = j.prototype;
              return ee.init = function(Z, F, Y) {
                var se = this;
                this.env = Y || new M(), this.ctx = u.extend({}, Z), this.blocks = {}, this.exported = [], u.keys(F).forEach(function(X) {
                  se.addBlock(X, F[X]);
                });
              }, ee.lookup = function(Z) {
                return Z in this.env.globals && !(Z in this.ctx) ? this.env.globals[Z] : this.ctx[Z];
              }, ee.setVariable = function(Z, F) {
                this.ctx[Z] = F;
              }, ee.getVariables = function() {
                return this.ctx;
              }, ee.addBlock = function(Z, F) {
                return this.blocks[Z] = this.blocks[Z] || [], this.blocks[Z].push(F), this;
              }, ee.getBlock = function(Z) {
                if (!this.blocks[Z])
                  throw new Error('unknown block "' + Z + '"');
                return this.blocks[Z][0];
              }, ee.getSuper = function(Z, F, Y, se, X, he) {
                var ve = u.indexOf(this.blocks[F] || [], Y), pe = this.blocks[F][ve + 1], H = this;
                if (ve === -1 || !pe)
                  throw new Error('no super block available for "' + F + '"');
                pe(Z, H, se, X, he);
              }, ee.addExport = function(Z) {
                this.exported.push(Z);
              }, ee.getExported = function() {
                var Z = this, F = {};
                return this.exported.forEach(function(Y) {
                  F[Y] = Z.ctx[Y];
                }), F;
              }, j;
            }(E), N = /* @__PURE__ */ function(q) {
              o(j, q);
              function j() {
                return q.apply(this, arguments) || this;
              }
              var ee = j.prototype;
              return ee.init = function(Z, F, Y, se) {
                if (this.env = F || new M(), u.isObject(Z))
                  switch (Z.type) {
                    case "code":
                      this.tmplProps = Z.obj;
                      break;
                    case "string":
                      this.tmplStr = Z.obj;
                      break;
                    default:
                      throw new Error("Unexpected template object type " + Z.type + "; expected 'code', or 'string'");
                  }
                else if (u.isString(Z))
                  this.tmplStr = Z;
                else
                  throw new Error("src must be a string or an object describing the source");
                if (this.path = Y, se)
                  try {
                    this._compile();
                  } catch (X) {
                    throw u._prettifyError(this.path, this.env.opts.dev, X);
                  }
                else
                  this.compiled = !1;
              }, ee.render = function(Z, F, Y) {
                var se = this;
                typeof Z == "function" ? (Y = Z, Z = {}) : typeof F == "function" && (Y = F, F = null);
                var X = !F;
                try {
                  this.compile();
                } catch (Me) {
                  var he = u._prettifyError(this.path, this.env.opts.dev, Me);
                  if (Y)
                    return P(Y, he);
                  throw he;
                }
                var ve = new V(Z || {}, this.blocks, this.env), pe = F ? F.push(!0) : new D();
                pe.topLevel = !0;
                var H = null, we = !1;
                return this.rootRenderFunc(this.env, ve, pe, B, function(Me, Re) {
                  if (!(we && Y && typeof Re < "u"))
                    if (Me && (Me = u._prettifyError(se.path, se.env.opts.dev, Me), we = !0), Y)
                      X ? P(Y, Me, Re) : Y(Me, Re);
                    else {
                      if (Me)
                        throw Me;
                      H = Re;
                    }
                }), H;
              }, ee.getExported = function(Z, F, Y) {
                typeof Z == "function" && (Y = Z, Z = {}), typeof F == "function" && (Y = F, F = null);
                try {
                  this.compile();
                } catch (he) {
                  if (Y)
                    return Y(he);
                  throw he;
                }
                var se = F ? F.push() : new D();
                se.topLevel = !0;
                var X = new V(Z || {}, this.blocks, this.env);
                this.rootRenderFunc(this.env, X, se, B, function(he) {
                  he ? Y(he, null) : Y(null, X.getExported());
                });
              }, ee.compile = function() {
                this.compiled || this._compile();
              }, ee._compile = function() {
                var Z;
                if (this.tmplProps)
                  Z = this.tmplProps;
                else {
                  var F = f.compile(this.tmplStr, this.env.asyncFilters, this.env.extensionsList, this.path, this.env.opts), Y = new Function(F);
                  Z = Y();
                }
                this.blocks = this._getBlocks(Z), this.rootRenderFunc = Z.root, this.compiled = !0;
              }, ee._getBlocks = function(Z) {
                var F = {};
                return u.keys(Z).forEach(function(Y) {
                  Y.slice(0, 2) === "b_" && (F[Y.slice(2)] = Z[Y]);
                }), F;
              }, j;
            }(E);
            a.exports = {
              Environment: M,
              Template: N
            };
          },
          /* 8 */
          /***/
          function(a, r, i) {
            function o(g, v) {
              g.prototype = Object.create(v.prototype), g.prototype.constructor = g, l(g, v);
            }
            function l(g, v) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(b, p) {
                return b.__proto__ = p, b;
              }, l(g, v);
            }
            var s = i(9), d = i(3), u = i(1).Obj, f = i(0), _ = /* @__PURE__ */ function(g) {
              o(v, g);
              function v() {
                return g.apply(this, arguments) || this;
              }
              var w = v.prototype;
              return w.init = function(p) {
                this.tokens = p, this.peeked = null, this.breakOnBlocks = null, this.dropLeadingWhitespace = !1, this.extensions = [];
              }, w.nextToken = function(p) {
                var y;
                if (this.peeked)
                  if (!p && this.peeked.type === s.TOKEN_WHITESPACE)
                    this.peeked = null;
                  else
                    return y = this.peeked, this.peeked = null, y;
                if (y = this.tokens.nextToken(), !p)
                  for (; y && y.type === s.TOKEN_WHITESPACE; )
                    y = this.tokens.nextToken();
                return y;
              }, w.peekToken = function() {
                return this.peeked = this.peeked || this.nextToken(), this.peeked;
              }, w.pushToken = function(p) {
                if (this.peeked)
                  throw new Error("pushToken: can only push one token on between reads");
                this.peeked = p;
              }, w.error = function(p, y, S) {
                if (y === void 0 || S === void 0) {
                  var E = this.peekToken() || {};
                  y = E.lineno, S = E.colno;
                }
                return y !== void 0 && (y += 1), S !== void 0 && (S += 1), new f.TemplateError(p, y, S);
              }, w.fail = function(p, y, S) {
                throw this.error(p, y, S);
              }, w.skip = function(p) {
                var y = this.nextToken();
                return !y || y.type !== p ? (this.pushToken(y), !1) : !0;
              }, w.expect = function(p) {
                var y = this.nextToken();
                return y.type !== p && this.fail("expected " + p + ", got " + y.type, y.lineno, y.colno), y;
              }, w.skipValue = function(p, y) {
                var S = this.nextToken();
                return !S || S.type !== p || S.value !== y ? (this.pushToken(S), !1) : !0;
              }, w.skipSymbol = function(p) {
                return this.skipValue(s.TOKEN_SYMBOL, p);
              }, w.advanceAfterBlockEnd = function(p) {
                var y;
                return p || (y = this.peekToken(), y || this.fail("unexpected end of file"), y.type !== s.TOKEN_SYMBOL && this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"), p = this.nextToken().value), y = this.nextToken(), y && y.type === s.TOKEN_BLOCK_END ? y.value.charAt(0) === "-" && (this.dropLeadingWhitespace = !0) : this.fail("expected block end in " + p + " statement"), y;
              }, w.advanceAfterVariableEnd = function() {
                var p = this.nextToken();
                p && p.type === s.TOKEN_VARIABLE_END ? this.dropLeadingWhitespace = p.value.charAt(p.value.length - this.tokens.tags.VARIABLE_END.length - 1) === "-" : (this.pushToken(p), this.fail("expected variable end"));
              }, w.parseFor = function() {
                var p = this.peekToken(), y, S;
                this.skipSymbol("for") ? (y = new d.For(p.lineno, p.colno), S = "endfor") : this.skipSymbol("asyncEach") ? (y = new d.AsyncEach(p.lineno, p.colno), S = "endeach") : this.skipSymbol("asyncAll") ? (y = new d.AsyncAll(p.lineno, p.colno), S = "endall") : this.fail("parseFor: expected for{Async}", p.lineno, p.colno), y.name = this.parsePrimary(), y.name instanceof d.Symbol || this.fail("parseFor: variable name expected for loop");
                var E = this.peekToken().type;
                if (E === s.TOKEN_COMMA) {
                  var C = y.name;
                  for (y.name = new d.Array(C.lineno, C.colno), y.name.addChild(C); this.skip(s.TOKEN_COMMA); ) {
                    var B = this.parsePrimary();
                    y.name.addChild(B);
                  }
                }
                return this.skipSymbol("in") || this.fail('parseFor: expected "in" keyword for loop', p.lineno, p.colno), y.arr = this.parseExpression(), this.advanceAfterBlockEnd(p.value), y.body = this.parseUntilBlocks(S, "else"), this.skipSymbol("else") && (this.advanceAfterBlockEnd("else"), y.else_ = this.parseUntilBlocks(S)), this.advanceAfterBlockEnd(), y;
              }, w.parseMacro = function() {
                var p = this.peekToken();
                this.skipSymbol("macro") || this.fail("expected macro");
                var y = this.parsePrimary(!0), S = this.parseSignature(), E = new d.Macro(p.lineno, p.colno, y, S);
                return this.advanceAfterBlockEnd(p.value), E.body = this.parseUntilBlocks("endmacro"), this.advanceAfterBlockEnd(), E;
              }, w.parseCall = function() {
                var p = this.peekToken();
                this.skipSymbol("call") || this.fail("expected call");
                var y = this.parseSignature(!0) || new d.NodeList(), S = this.parsePrimary();
                this.advanceAfterBlockEnd(p.value);
                var E = this.parseUntilBlocks("endcall");
                this.advanceAfterBlockEnd();
                var C = new d.Symbol(p.lineno, p.colno, "caller"), B = new d.Caller(p.lineno, p.colno, C, y, E), O = S.args.children;
                O[O.length - 1] instanceof d.KeywordArgs || O.push(new d.KeywordArgs());
                var D = O[O.length - 1];
                return D.addChild(new d.Pair(p.lineno, p.colno, C, B)), new d.Output(p.lineno, p.colno, [S]);
              }, w.parseWithContext = function() {
                var p = this.peekToken(), y = null;
                return this.skipSymbol("with") ? y = !0 : this.skipSymbol("without") && (y = !1), y !== null && (this.skipSymbol("context") || this.fail("parseFrom: expected context after with/without", p.lineno, p.colno)), y;
              }, w.parseImport = function() {
                var p = this.peekToken();
                this.skipSymbol("import") || this.fail("parseImport: expected import", p.lineno, p.colno);
                var y = this.parseExpression();
                this.skipSymbol("as") || this.fail('parseImport: expected "as" keyword', p.lineno, p.colno);
                var S = this.parseExpression(), E = this.parseWithContext(), C = new d.Import(p.lineno, p.colno, y, S, E);
                return this.advanceAfterBlockEnd(p.value), C;
              }, w.parseFrom = function() {
                var p = this.peekToken();
                this.skipSymbol("from") || this.fail("parseFrom: expected from");
                var y = this.parseExpression();
                this.skipSymbol("import") || this.fail("parseFrom: expected import", p.lineno, p.colno);
                for (var S = new d.NodeList(), E; ; ) {
                  var C = this.peekToken();
                  if (C.type === s.TOKEN_BLOCK_END) {
                    S.children.length || this.fail("parseFrom: Expected at least one import name", p.lineno, p.colno), C.value.charAt(0) === "-" && (this.dropLeadingWhitespace = !0), this.nextToken();
                    break;
                  }
                  S.children.length > 0 && !this.skip(s.TOKEN_COMMA) && this.fail("parseFrom: expected comma", p.lineno, p.colno);
                  var B = this.parsePrimary();
                  if (B.value.charAt(0) === "_" && this.fail("parseFrom: names starting with an underscore cannot be imported", B.lineno, B.colno), this.skipSymbol("as")) {
                    var O = this.parsePrimary();
                    S.addChild(new d.Pair(B.lineno, B.colno, B, O));
                  } else
                    S.addChild(B);
                  E = this.parseWithContext();
                }
                return new d.FromImport(p.lineno, p.colno, y, S, E);
              }, w.parseBlock = function() {
                var p = this.peekToken();
                this.skipSymbol("block") || this.fail("parseBlock: expected block", p.lineno, p.colno);
                var y = new d.Block(p.lineno, p.colno);
                y.name = this.parsePrimary(), y.name instanceof d.Symbol || this.fail("parseBlock: variable name expected", p.lineno, p.colno), this.advanceAfterBlockEnd(p.value), y.body = this.parseUntilBlocks("endblock"), this.skipSymbol("endblock"), this.skipSymbol(y.name.value);
                var S = this.peekToken();
                return S || this.fail("parseBlock: expected endblock, got end of file"), this.advanceAfterBlockEnd(S.value), y;
              }, w.parseExtends = function() {
                var p = "extends", y = this.peekToken();
                this.skipSymbol(p) || this.fail("parseTemplateRef: expected " + p);
                var S = new d.Extends(y.lineno, y.colno);
                return S.template = this.parseExpression(), this.advanceAfterBlockEnd(y.value), S;
              }, w.parseInclude = function() {
                var p = "include", y = this.peekToken();
                this.skipSymbol(p) || this.fail("parseInclude: expected " + p);
                var S = new d.Include(y.lineno, y.colno);
                return S.template = this.parseExpression(), this.skipSymbol("ignore") && this.skipSymbol("missing") && (S.ignoreMissing = !0), this.advanceAfterBlockEnd(y.value), S;
              }, w.parseIf = function() {
                var p = this.peekToken(), y;
                this.skipSymbol("if") || this.skipSymbol("elif") || this.skipSymbol("elseif") ? y = new d.If(p.lineno, p.colno) : this.skipSymbol("ifAsync") ? y = new d.IfAsync(p.lineno, p.colno) : this.fail("parseIf: expected if, elif, or elseif", p.lineno, p.colno), y.cond = this.parseExpression(), this.advanceAfterBlockEnd(p.value), y.body = this.parseUntilBlocks("elif", "elseif", "else", "endif");
                var S = this.peekToken();
                switch (S && S.value) {
                  case "elseif":
                  case "elif":
                    y.else_ = this.parseIf();
                    break;
                  case "else":
                    this.advanceAfterBlockEnd(), y.else_ = this.parseUntilBlocks("endif"), this.advanceAfterBlockEnd();
                    break;
                  case "endif":
                    y.else_ = null, this.advanceAfterBlockEnd();
                    break;
                  default:
                    this.fail("parseIf: expected elif, else, or endif, got end of file");
                }
                return y;
              }, w.parseSet = function() {
                var p = this.peekToken();
                this.skipSymbol("set") || this.fail("parseSet: expected set", p.lineno, p.colno);
                for (var y = new d.Set(p.lineno, p.colno, []), S; (S = this.parsePrimary()) && (y.targets.push(S), !!this.skip(s.TOKEN_COMMA)); )
                  ;
                return this.skipValue(s.TOKEN_OPERATOR, "=") ? (y.value = this.parseExpression(), this.advanceAfterBlockEnd(p.value)) : this.skip(s.TOKEN_BLOCK_END) ? (y.body = new d.Capture(p.lineno, p.colno, this.parseUntilBlocks("endset")), y.value = null, this.advanceAfterBlockEnd()) : this.fail("parseSet: expected = or block end in set tag", p.lineno, p.colno), y;
              }, w.parseSwitch = function() {
                var p = "switch", y = "endswitch", S = "case", E = "default", C = this.peekToken();
                !this.skipSymbol(p) && !this.skipSymbol(S) && !this.skipSymbol(E) && this.fail('parseSwitch: expected "switch," "case" or "default"', C.lineno, C.colno);
                var B = this.parseExpression();
                this.advanceAfterBlockEnd(p), this.parseUntilBlocks(S, E, y);
                var O = this.peekToken(), D = [], T;
                do {
                  this.skipSymbol(S);
                  var P = this.parseExpression();
                  this.advanceAfterBlockEnd(p);
                  var I = this.parseUntilBlocks(S, E, y);
                  D.push(new d.Case(O.line, O.col, P, I)), O = this.peekToken();
                } while (O && O.value === S);
                switch (O.value) {
                  case E:
                    this.advanceAfterBlockEnd(), T = this.parseUntilBlocks(y), this.advanceAfterBlockEnd();
                    break;
                  case y:
                    this.advanceAfterBlockEnd();
                    break;
                  default:
                    this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.');
                }
                return new d.Switch(C.lineno, C.colno, B, D, T);
              }, w.parseStatement = function() {
                var p = this.peekToken(), y;
                if (p.type !== s.TOKEN_SYMBOL && this.fail("tag name expected", p.lineno, p.colno), this.breakOnBlocks && f.indexOf(this.breakOnBlocks, p.value) !== -1)
                  return null;
                switch (p.value) {
                  case "raw":
                    return this.parseRaw();
                  case "verbatim":
                    return this.parseRaw("verbatim");
                  case "if":
                  case "ifAsync":
                    return this.parseIf();
                  case "for":
                  case "asyncEach":
                  case "asyncAll":
                    return this.parseFor();
                  case "block":
                    return this.parseBlock();
                  case "extends":
                    return this.parseExtends();
                  case "include":
                    return this.parseInclude();
                  case "set":
                    return this.parseSet();
                  case "macro":
                    return this.parseMacro();
                  case "call":
                    return this.parseCall();
                  case "import":
                    return this.parseImport();
                  case "from":
                    return this.parseFrom();
                  case "filter":
                    return this.parseFilterStatement();
                  case "switch":
                    return this.parseSwitch();
                  default:
                    if (this.extensions.length)
                      for (var S = 0; S < this.extensions.length; S++) {
                        var E = this.extensions[S];
                        if (f.indexOf(E.tags || [], p.value) !== -1)
                          return E.parse(this, d, s);
                      }
                    this.fail("unknown block tag: " + p.value, p.lineno, p.colno);
                }
                return y;
              }, w.parseRaw = function(p) {
                p = p || "raw";
                for (var y = "end" + p, S = new RegExp("([\\s\\S]*?){%\\s*(" + p + "|" + y + ")\\s*(?=%})%}"), E = 1, C = "", B = null, O = this.advanceAfterBlockEnd(); (B = this.tokens._extractRegex(S)) && E > 0; ) {
                  var D = B[0], T = B[1], P = B[2];
                  P === p ? E += 1 : P === y && (E -= 1), E === 0 ? (C += T, this.tokens.backN(D.length - T.length)) : C += D;
                }
                return new d.Output(O.lineno, O.colno, [new d.TemplateData(O.lineno, O.colno, C)]);
              }, w.parsePostfix = function(p) {
                for (var y, S = this.peekToken(); S; ) {
                  if (S.type === s.TOKEN_LEFT_PAREN)
                    p = new d.FunCall(S.lineno, S.colno, p, this.parseSignature());
                  else if (S.type === s.TOKEN_LEFT_BRACKET)
                    y = this.parseAggregate(), y.children.length > 1 && this.fail("invalid index"), p = new d.LookupVal(S.lineno, S.colno, p, y.children[0]);
                  else if (S.type === s.TOKEN_OPERATOR && S.value === ".") {
                    this.nextToken();
                    var E = this.nextToken();
                    E.type !== s.TOKEN_SYMBOL && this.fail("expected name as lookup value, got " + E.value, E.lineno, E.colno), y = new d.Literal(E.lineno, E.colno, E.value), p = new d.LookupVal(S.lineno, S.colno, p, y);
                  } else
                    break;
                  S = this.peekToken();
                }
                return p;
              }, w.parseExpression = function() {
                var p = this.parseInlineIf();
                return p;
              }, w.parseInlineIf = function() {
                var p = this.parseOr();
                if (this.skipSymbol("if")) {
                  var y = this.parseOr(), S = p;
                  p = new d.InlineIf(p.lineno, p.colno), p.body = S, p.cond = y, this.skipSymbol("else") ? p.else_ = this.parseOr() : p.else_ = null;
                }
                return p;
              }, w.parseOr = function() {
                for (var p = this.parseAnd(); this.skipSymbol("or"); ) {
                  var y = this.parseAnd();
                  p = new d.Or(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseAnd = function() {
                for (var p = this.parseNot(); this.skipSymbol("and"); ) {
                  var y = this.parseNot();
                  p = new d.And(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseNot = function() {
                var p = this.peekToken();
                return this.skipSymbol("not") ? new d.Not(p.lineno, p.colno, this.parseNot()) : this.parseIn();
              }, w.parseIn = function() {
                for (var p = this.parseIs(); ; ) {
                  var y = this.nextToken();
                  if (!y)
                    break;
                  var S = y.type === s.TOKEN_SYMBOL && y.value === "not";
                  if (S || this.pushToken(y), this.skipSymbol("in")) {
                    var E = this.parseIs();
                    p = new d.In(p.lineno, p.colno, p, E), S && (p = new d.Not(p.lineno, p.colno, p));
                  } else {
                    S && this.pushToken(y);
                    break;
                  }
                }
                return p;
              }, w.parseIs = function() {
                var p = this.parseCompare();
                if (this.skipSymbol("is")) {
                  var y = this.skipSymbol("not"), S = this.parseCompare();
                  p = new d.Is(p.lineno, p.colno, p, S), y && (p = new d.Not(p.lineno, p.colno, p));
                }
                return p;
              }, w.parseCompare = function() {
                for (var p = ["==", "===", "!=", "!==", "<", ">", "<=", ">="], y = this.parseConcat(), S = []; ; ) {
                  var E = this.nextToken();
                  if (E)
                    if (p.indexOf(E.value) !== -1)
                      S.push(new d.CompareOperand(E.lineno, E.colno, this.parseConcat(), E.value));
                    else {
                      this.pushToken(E);
                      break;
                    }
                  else break;
                }
                return S.length ? new d.Compare(S[0].lineno, S[0].colno, y, S) : y;
              }, w.parseConcat = function() {
                for (var p = this.parseAdd(); this.skipValue(s.TOKEN_TILDE, "~"); ) {
                  var y = this.parseAdd();
                  p = new d.Concat(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseAdd = function() {
                for (var p = this.parseSub(); this.skipValue(s.TOKEN_OPERATOR, "+"); ) {
                  var y = this.parseSub();
                  p = new d.Add(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseSub = function() {
                for (var p = this.parseMul(); this.skipValue(s.TOKEN_OPERATOR, "-"); ) {
                  var y = this.parseMul();
                  p = new d.Sub(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseMul = function() {
                for (var p = this.parseDiv(); this.skipValue(s.TOKEN_OPERATOR, "*"); ) {
                  var y = this.parseDiv();
                  p = new d.Mul(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseDiv = function() {
                for (var p = this.parseFloorDiv(); this.skipValue(s.TOKEN_OPERATOR, "/"); ) {
                  var y = this.parseFloorDiv();
                  p = new d.Div(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseFloorDiv = function() {
                for (var p = this.parseMod(); this.skipValue(s.TOKEN_OPERATOR, "//"); ) {
                  var y = this.parseMod();
                  p = new d.FloorDiv(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseMod = function() {
                for (var p = this.parsePow(); this.skipValue(s.TOKEN_OPERATOR, "%"); ) {
                  var y = this.parsePow();
                  p = new d.Mod(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parsePow = function() {
                for (var p = this.parseUnary(); this.skipValue(s.TOKEN_OPERATOR, "**"); ) {
                  var y = this.parseUnary();
                  p = new d.Pow(p.lineno, p.colno, p, y);
                }
                return p;
              }, w.parseUnary = function(p) {
                var y = this.peekToken(), S;
                return this.skipValue(s.TOKEN_OPERATOR, "-") ? S = new d.Neg(y.lineno, y.colno, this.parseUnary(!0)) : this.skipValue(s.TOKEN_OPERATOR, "+") ? S = new d.Pos(y.lineno, y.colno, this.parseUnary(!0)) : S = this.parsePrimary(), p || (S = this.parseFilter(S)), S;
              }, w.parsePrimary = function(p) {
                var y = this.nextToken(), S, E = null;
                if (y ? y.type === s.TOKEN_STRING ? S = y.value : y.type === s.TOKEN_INT ? S = parseInt(y.value, 10) : y.type === s.TOKEN_FLOAT ? S = parseFloat(y.value) : y.type === s.TOKEN_BOOLEAN ? y.value === "true" ? S = !0 : y.value === "false" ? S = !1 : this.fail("invalid boolean: " + y.value, y.lineno, y.colno) : y.type === s.TOKEN_NONE ? S = null : y.type === s.TOKEN_REGEX && (S = new RegExp(y.value.body, y.value.flags)) : this.fail("expected expression, got end of file"), S !== void 0 ? E = new d.Literal(y.lineno, y.colno, S) : y.type === s.TOKEN_SYMBOL ? E = new d.Symbol(y.lineno, y.colno, y.value) : (this.pushToken(y), E = this.parseAggregate()), p || (E = this.parsePostfix(E)), E)
                  return E;
                throw this.error("unexpected token: " + y.value, y.lineno, y.colno);
              }, w.parseFilterName = function() {
                for (var p = this.expect(s.TOKEN_SYMBOL), y = p.value; this.skipValue(s.TOKEN_OPERATOR, "."); )
                  y += "." + this.expect(s.TOKEN_SYMBOL).value;
                return new d.Symbol(p.lineno, p.colno, y);
              }, w.parseFilterArgs = function(p) {
                if (this.peekToken().type === s.TOKEN_LEFT_PAREN) {
                  var y = this.parsePostfix(p);
                  return y.args.children;
                }
                return [];
              }, w.parseFilter = function(p) {
                for (; this.skip(s.TOKEN_PIPE); ) {
                  var y = this.parseFilterName();
                  p = new d.Filter(y.lineno, y.colno, y, new d.NodeList(y.lineno, y.colno, [p].concat(this.parseFilterArgs(p))));
                }
                return p;
              }, w.parseFilterStatement = function() {
                var p = this.peekToken();
                this.skipSymbol("filter") || this.fail("parseFilterStatement: expected filter");
                var y = this.parseFilterName(), S = this.parseFilterArgs(y);
                this.advanceAfterBlockEnd(p.value);
                var E = new d.Capture(y.lineno, y.colno, this.parseUntilBlocks("endfilter"));
                this.advanceAfterBlockEnd();
                var C = new d.Filter(y.lineno, y.colno, y, new d.NodeList(y.lineno, y.colno, [E].concat(S)));
                return new d.Output(y.lineno, y.colno, [C]);
              }, w.parseAggregate = function() {
                var p = this.nextToken(), y;
                switch (p.type) {
                  case s.TOKEN_LEFT_PAREN:
                    y = new d.Group(p.lineno, p.colno);
                    break;
                  case s.TOKEN_LEFT_BRACKET:
                    y = new d.Array(p.lineno, p.colno);
                    break;
                  case s.TOKEN_LEFT_CURLY:
                    y = new d.Dict(p.lineno, p.colno);
                    break;
                  default:
                    return null;
                }
                for (; ; ) {
                  var S = this.peekToken().type;
                  if (S === s.TOKEN_RIGHT_PAREN || S === s.TOKEN_RIGHT_BRACKET || S === s.TOKEN_RIGHT_CURLY) {
                    this.nextToken();
                    break;
                  }
                  if (y.children.length > 0 && (this.skip(s.TOKEN_COMMA) || this.fail("parseAggregate: expected comma after expression", p.lineno, p.colno)), y instanceof d.Dict) {
                    var E = this.parsePrimary();
                    this.skip(s.TOKEN_COLON) || this.fail("parseAggregate: expected colon after dict key", p.lineno, p.colno);
                    var C = this.parseExpression();
                    y.addChild(new d.Pair(E.lineno, E.colno, E, C));
                  } else {
                    var B = this.parseExpression();
                    y.addChild(B);
                  }
                }
                return y;
              }, w.parseSignature = function(p, y) {
                var S = this.peekToken();
                if (!y && S.type !== s.TOKEN_LEFT_PAREN) {
                  if (p)
                    return null;
                  this.fail("expected arguments", S.lineno, S.colno);
                }
                S.type === s.TOKEN_LEFT_PAREN && (S = this.nextToken());
                for (var E = new d.NodeList(S.lineno, S.colno), C = new d.KeywordArgs(S.lineno, S.colno), B = !1; ; ) {
                  if (S = this.peekToken(), !y && S.type === s.TOKEN_RIGHT_PAREN) {
                    this.nextToken();
                    break;
                  } else if (y && S.type === s.TOKEN_BLOCK_END)
                    break;
                  if (B && !this.skip(s.TOKEN_COMMA))
                    this.fail("parseSignature: expected comma after expression", S.lineno, S.colno);
                  else {
                    var O = this.parseExpression();
                    this.skipValue(s.TOKEN_OPERATOR, "=") ? C.addChild(new d.Pair(O.lineno, O.colno, O, this.parseExpression())) : E.addChild(O);
                  }
                  B = !0;
                }
                return C.children.length && E.addChild(C), E;
              }, w.parseUntilBlocks = function() {
                for (var p = this.breakOnBlocks, y = arguments.length, S = new Array(y), E = 0; E < y; E++)
                  S[E] = arguments[E];
                this.breakOnBlocks = S;
                var C = this.parse();
                return this.breakOnBlocks = p, C;
              }, w.parseNodes = function() {
                for (var p, y = []; p = this.nextToken(); )
                  if (p.type === s.TOKEN_DATA) {
                    var S = p.value, E = this.peekToken(), C = E && E.value;
                    this.dropLeadingWhitespace && (S = S.replace(/^\s*/, ""), this.dropLeadingWhitespace = !1), E && (E.type === s.TOKEN_BLOCK_START && C.charAt(C.length - 1) === "-" || E.type === s.TOKEN_VARIABLE_START && C.charAt(this.tokens.tags.VARIABLE_START.length) === "-" || E.type === s.TOKEN_COMMENT && C.charAt(this.tokens.tags.COMMENT_START.length) === "-") && (S = S.replace(/\s*$/, "")), y.push(new d.Output(p.lineno, p.colno, [new d.TemplateData(p.lineno, p.colno, S)]));
                  } else if (p.type === s.TOKEN_BLOCK_START) {
                    this.dropLeadingWhitespace = !1;
                    var B = this.parseStatement();
                    if (!B)
                      break;
                    y.push(B);
                  } else if (p.type === s.TOKEN_VARIABLE_START) {
                    var O = this.parseExpression();
                    this.dropLeadingWhitespace = !1, this.advanceAfterVariableEnd(), y.push(new d.Output(p.lineno, p.colno, [O]));
                  } else p.type === s.TOKEN_COMMENT ? this.dropLeadingWhitespace = p.value.charAt(p.value.length - this.tokens.tags.COMMENT_END.length - 1) === "-" : this.fail("Unexpected token at top-level: " + p.type, p.lineno, p.colno);
                return y;
              }, w.parse = function() {
                return new d.NodeList(0, 0, this.parseNodes());
              }, w.parseAsRoot = function() {
                return new d.Root(0, 0, this.parseNodes());
              }, v;
            }(u);
            a.exports = {
              parse: function(v, w, b) {
                var p = new _(s.lex(v, b));
                return w !== void 0 && (p.extensions = w), p.parseAsRoot();
              },
              Parser: _
            };
          },
          /* 9 */
          /***/
          function(a, r, i) {
            var o = i(0), l = ` 
	\r `, s = "()[]{}%*-+~/#,:|.<>=!", d = "0123456789", u = "{%", f = "%}", _ = "{{", g = "}}", v = "{#", w = "#}", b = "string", p = "whitespace", y = "data", S = "block-start", E = "block-end", C = "variable-start", B = "variable-end", O = "comment", D = "left-paren", T = "right-paren", P = "left-bracket", I = "right-bracket", M = "left-curly", V = "right-curly", N = "operator", q = "comma", j = "colon", ee = "tilde", de = "pipe", Z = "int", F = "float", Y = "boolean", se = "none", X = "symbol", he = "special", ve = "regex";
            function pe(we, Me, Re, ce) {
              return {
                type: we,
                value: Me,
                lineno: Re,
                colno: ce
              };
            }
            var H = /* @__PURE__ */ function() {
              function we(Re, ce) {
                this.str = Re, this.index = 0, this.len = Re.length, this.lineno = 0, this.colno = 0, this.in_code = !1, ce = ce || {};
                var te = ce.tags || {};
                this.tags = {
                  BLOCK_START: te.blockStart || u,
                  BLOCK_END: te.blockEnd || f,
                  VARIABLE_START: te.variableStart || _,
                  VARIABLE_END: te.variableEnd || g,
                  COMMENT_START: te.commentStart || v,
                  COMMENT_END: te.commentEnd || w
                }, this.trimBlocks = !!ce.trimBlocks, this.lstripBlocks = !!ce.lstripBlocks;
              }
              var Me = we.prototype;
              return Me.nextToken = function() {
                var ce = this.lineno, te = this.colno, G;
                if (this.in_code) {
                  var le = this.current();
                  if (this.isFinished())
                    return null;
                  if (le === '"' || le === "'")
                    return pe(b, this._parseString(le), ce, te);
                  if (G = this._extract(l))
                    return pe(p, G, ce, te);
                  if ((G = this._extractString(this.tags.BLOCK_END)) || (G = this._extractString("-" + this.tags.BLOCK_END)))
                    return this.in_code = !1, this.trimBlocks && (le = this.current(), le === `
` ? this.forward() : le === "\r" && (this.forward(), le = this.current(), le === `
` ? this.forward() : this.back())), pe(E, G, ce, te);
                  if ((G = this._extractString(this.tags.VARIABLE_END)) || (G = this._extractString("-" + this.tags.VARIABLE_END)))
                    return this.in_code = !1, pe(B, G, ce, te);
                  if (le === "r" && this.str.charAt(this.index + 1) === "/") {
                    this.forwardN(2);
                    for (var K = ""; !this.isFinished(); )
                      if (this.current() === "/" && this.previous() !== "\\") {
                        this.forward();
                        break;
                      } else
                        K += this.current(), this.forward();
                    for (var Ce = ["g", "i", "m", "y"], Te = ""; !this.isFinished(); ) {
                      var ie = Ce.indexOf(this.current()) !== -1;
                      if (ie)
                        Te += this.current(), this.forward();
                      else
                        break;
                    }
                    return pe(ve, {
                      body: K,
                      flags: Te
                    }, ce, te);
                  } else if (s.indexOf(le) !== -1) {
                    this.forward();
                    var ge = ["==", "===", "!=", "!==", "<=", ">=", "//", "**"], Pe = le + this.current(), Ie;
                    switch (o.indexOf(ge, Pe) !== -1 && (this.forward(), le = Pe, o.indexOf(ge, Pe + this.current()) !== -1 && (le = Pe + this.current(), this.forward())), le) {
                      case "(":
                        Ie = D;
                        break;
                      case ")":
                        Ie = T;
                        break;
                      case "[":
                        Ie = P;
                        break;
                      case "]":
                        Ie = I;
                        break;
                      case "{":
                        Ie = M;
                        break;
                      case "}":
                        Ie = V;
                        break;
                      case ",":
                        Ie = q;
                        break;
                      case ":":
                        Ie = j;
                        break;
                      case "~":
                        Ie = ee;
                        break;
                      case "|":
                        Ie = de;
                        break;
                      default:
                        Ie = N;
                    }
                    return pe(Ie, le, ce, te);
                  } else if (G = this._extractUntil(l + s), G.match(/^[-+]?[0-9]+$/))
                    if (this.current() === ".") {
                      this.forward();
                      var Je = this._extract(d);
                      return pe(F, G + "." + Je, ce, te);
                    } else
                      return pe(Z, G, ce, te);
                  else {
                    if (G.match(/^(true|false)$/))
                      return pe(Y, G, ce, te);
                    if (G === "none")
                      return pe(se, G, ce, te);
                    if (G === "null")
                      return pe(se, G, ce, te);
                    if (G)
                      return pe(X, G, ce, te);
                    throw new Error("Unexpected value while parsing: " + G);
                  }
                } else {
                  var _e = this.tags.BLOCK_START.charAt(0) + this.tags.VARIABLE_START.charAt(0) + this.tags.COMMENT_START.charAt(0) + this.tags.COMMENT_END.charAt(0);
                  if (this.isFinished())
                    return null;
                  if ((G = this._extractString(this.tags.BLOCK_START + "-")) || (G = this._extractString(this.tags.BLOCK_START)))
                    return this.in_code = !0, pe(S, G, ce, te);
                  if ((G = this._extractString(this.tags.VARIABLE_START + "-")) || (G = this._extractString(this.tags.VARIABLE_START)))
                    return this.in_code = !0, pe(C, G, ce, te);
                  G = "";
                  var $e, Ze = !1;
                  for (this._matches(this.tags.COMMENT_START) && (Ze = !0, G = this._extractString(this.tags.COMMENT_START)); ($e = this._extractUntil(_e)) !== null; )
                    if (G += $e, (this._matches(this.tags.BLOCK_START) || this._matches(this.tags.VARIABLE_START) || this._matches(this.tags.COMMENT_START)) && !Ze) {
                      if (this.lstripBlocks && this._matches(this.tags.BLOCK_START) && this.colno > 0 && this.colno <= G.length) {
                        var _t = G.slice(-this.colno);
                        if (/^\s+$/.test(_t) && (G = G.slice(0, -this.colno), !G.length))
                          return this.nextToken();
                      }
                      break;
                    } else if (this._matches(this.tags.COMMENT_END)) {
                      if (!Ze)
                        throw new Error("unexpected end of comment");
                      G += this._extractString(this.tags.COMMENT_END);
                      break;
                    } else
                      G += this.current(), this.forward();
                  if ($e === null && Ze)
                    throw new Error("expected end of comment, got end of file");
                  return pe(Ze ? O : y, G, ce, te);
                }
              }, Me._parseString = function(ce) {
                this.forward();
                for (var te = ""; !this.isFinished() && this.current() !== ce; ) {
                  var G = this.current();
                  if (G === "\\") {
                    switch (this.forward(), this.current()) {
                      case "n":
                        te += `
`;
                        break;
                      case "t":
                        te += "	";
                        break;
                      case "r":
                        te += "\r";
                        break;
                      default:
                        te += this.current();
                    }
                    this.forward();
                  } else
                    te += G, this.forward();
                }
                return this.forward(), te;
              }, Me._matches = function(ce) {
                if (this.index + ce.length > this.len)
                  return null;
                var te = this.str.slice(this.index, this.index + ce.length);
                return te === ce;
              }, Me._extractString = function(ce) {
                return this._matches(ce) ? (this.forwardN(ce.length), ce) : null;
              }, Me._extractUntil = function(ce) {
                return this._extractMatching(!0, ce || "");
              }, Me._extract = function(ce) {
                return this._extractMatching(!1, ce);
              }, Me._extractMatching = function(ce, te) {
                if (this.isFinished())
                  return null;
                var G = te.indexOf(this.current());
                if (ce && G === -1 || !ce && G !== -1) {
                  var le = this.current();
                  this.forward();
                  for (var K = te.indexOf(this.current()); (ce && K === -1 || !ce && K !== -1) && !this.isFinished(); )
                    le += this.current(), this.forward(), K = te.indexOf(this.current());
                  return le;
                }
                return "";
              }, Me._extractRegex = function(ce) {
                var te = this.currentStr().match(ce);
                return te ? (this.forwardN(te[0].length), te) : null;
              }, Me.isFinished = function() {
                return this.index >= this.len;
              }, Me.forwardN = function(ce) {
                for (var te = 0; te < ce; te++)
                  this.forward();
              }, Me.forward = function() {
                this.index++, this.previous() === `
` ? (this.lineno++, this.colno = 0) : this.colno++;
              }, Me.backN = function(ce) {
                for (var te = 0; te < ce; te++)
                  this.back();
              }, Me.back = function() {
                if (this.index--, this.current() === `
`) {
                  this.lineno--;
                  var ce = this.src.lastIndexOf(`
`, this.index - 1);
                  ce === -1 ? this.colno = this.index : this.colno = this.index - ce;
                } else
                  this.colno--;
              }, Me.current = function() {
                return this.isFinished() ? "" : this.str.charAt(this.index);
              }, Me.currentStr = function() {
                return this.isFinished() ? "" : this.str.substr(this.index);
              }, Me.previous = function() {
                return this.str.charAt(this.index - 1);
              }, we;
            }();
            a.exports = {
              lex: function(Me, Re) {
                return new H(Me, Re);
              },
              TOKEN_STRING: b,
              TOKEN_WHITESPACE: p,
              TOKEN_DATA: y,
              TOKEN_BLOCK_START: S,
              TOKEN_BLOCK_END: E,
              TOKEN_VARIABLE_START: C,
              TOKEN_VARIABLE_END: B,
              TOKEN_COMMENT: O,
              TOKEN_LEFT_PAREN: D,
              TOKEN_RIGHT_PAREN: T,
              TOKEN_LEFT_BRACKET: P,
              TOKEN_RIGHT_BRACKET: I,
              TOKEN_LEFT_CURLY: M,
              TOKEN_RIGHT_CURLY: V,
              TOKEN_OPERATOR: N,
              TOKEN_COMMA: q,
              TOKEN_COLON: j,
              TOKEN_TILDE: ee,
              TOKEN_PIPE: de,
              TOKEN_INT: Z,
              TOKEN_FLOAT: F,
              TOKEN_BOOLEAN: Y,
              TOKEN_NONE: se,
              TOKEN_SYMBOL: X,
              TOKEN_SPECIAL: he,
              TOKEN_REGEX: ve
            };
          },
          /* 10 */
          /***/
          function(a, r, i) {
            function o(_, g) {
              _.prototype = Object.create(g.prototype), _.prototype.constructor = _, l(_, g);
            }
            function l(_, g) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(w, b) {
                return w.__proto__ = b, w;
              }, l(_, g);
            }
            var s = i(6), d = i(19), u = d.PrecompiledLoader, f = /* @__PURE__ */ function(_) {
              o(g, _);
              function g(w, b) {
                var p;
                return p = _.call(this) || this, p.baseURL = w || ".", b = b || {}, p.useCache = !!b.useCache, p.async = !!b.async, p;
              }
              var v = g.prototype;
              return v.resolve = function(b, p) {
                throw new Error("relative templates not support in the browser yet");
              }, v.getSource = function(b, p) {
                var y = this, S = this.useCache, E;
                return this.fetch(this.baseURL + "/" + b, function(C, B) {
                  if (C)
                    if (p)
                      p(C.content);
                    else if (C.status === 404)
                      E = null;
                    else
                      throw C.content;
                  else
                    E = {
                      src: B,
                      path: b,
                      noCache: !S
                    }, y.emit("load", b, E), p && p(null, E);
                }), E;
              }, v.fetch = function(b, p) {
                if (typeof window > "u")
                  throw new Error("WebLoader can only by used in a browser");
                var y = new XMLHttpRequest(), S = !0;
                y.onreadystatechange = function() {
                  y.readyState === 4 && S && (S = !1, y.status === 0 || y.status === 200 ? p(null, y.responseText) : p({
                    status: y.status,
                    content: y.responseText
                  }));
                }, b += (b.indexOf("?") === -1 ? "?" : "&") + "s=" + (/* @__PURE__ */ new Date()).getTime(), y.open("GET", b, this.async), y.send();
              }, g;
            }(s);
            a.exports = {
              WebLoader: f,
              PrecompiledLoader: u
            };
          },
          /* 11 */
          /***/
          function(a, r, i) {
            var o = i(0), l = i(7), s = l.Environment, d = l.Template, u = i(6), f = i(10), _ = i(23), g = i(5), v = i(8), w = i(9), b = i(2), p = i(3), y = i(25), S;
            function E(C, B) {
              B = B || {}, o.isObject(C) && (B = C, C = null);
              var O;
              return f.FileSystemLoader ? O = new f.FileSystemLoader(C, {
                watch: B.watch,
                noCache: B.noCache
              }) : f.WebLoader && (O = new f.WebLoader(C, {
                useCache: B.web && B.web.useCache,
                async: B.web && B.web.async
              })), S = new s(O, B), B && B.express && S.express(B.express), S;
            }
            a.exports = {
              Environment: s,
              Template: d,
              Loader: u,
              FileSystemLoader: f.FileSystemLoader,
              NodeResolveLoader: f.NodeResolveLoader,
              PrecompiledLoader: f.PrecompiledLoader,
              WebLoader: f.WebLoader,
              compiler: g,
              parser: v,
              lexer: w,
              runtime: b,
              lib: o,
              nodes: p,
              installJinjaCompat: y,
              configure: E,
              reset: function() {
                S = void 0;
              },
              compile: function(B, O, D, T) {
                return S || E(), new d(B, O, D, T);
              },
              render: function(B, O, D) {
                return S || E(), S.render(B, O, D);
              },
              renderString: function(B, O, D) {
                return S || E(), S.renderString(B, O, D);
              },
              precompile: _ ? _.precompile : void 0,
              precompileString: _ ? _.precompileString : void 0
            };
          },
          /* 12 */
          /***/
          function(a, r, i) {
            var o = i(13), l = [], s = [], d = o.makeRequestCallFromTimer(u);
            function u() {
              if (s.length)
                throw s.shift();
            }
            a.exports = f;
            function f(g) {
              var v;
              l.length ? v = l.pop() : v = new _(), v.task = g, o(v);
            }
            function _() {
              this.task = null;
            }
            _.prototype.call = function() {
              try {
                this.task.call();
              } catch (g) {
                f.onerror ? f.onerror(g) : (s.push(g), d());
              } finally {
                this.task = null, l[l.length] = this;
              }
            };
          },
          /* 13 */
          /***/
          function(a, r, i) {
            (function(o) {
              a.exports = l;
              function l(p) {
                s.length || d(), s[s.length] = p;
              }
              var s = [], d, u = 0, f = 1024;
              function _() {
                for (; u < s.length; ) {
                  var p = u;
                  if (u = u + 1, s[p].call(), u > f) {
                    for (var y = 0, S = s.length - u; y < S; y++)
                      s[y] = s[y + u];
                    s.length -= u, u = 0;
                  }
                }
                s.length = 0, u = 0;
              }
              var g = typeof o < "u" ? o : self, v = g.MutationObserver || g.WebKitMutationObserver;
              typeof v == "function" ? d = w(_) : d = b(_), l.requestFlush = d;
              function w(p) {
                var y = 1, S = new v(p), E = document.createTextNode("");
                return S.observe(E, { characterData: !0 }), function() {
                  y = -y, E.data = y;
                };
              }
              function b(p) {
                return function() {
                  var S = setTimeout(C, 0), E = setInterval(C, 50);
                  function C() {
                    clearTimeout(S), clearInterval(E), p();
                  }
                };
              }
              l.makeRequestCallFromTimer = b;
            }).call(r, i(14));
          },
          /* 14 */
          /***/
          function(a, r) {
            var i;
            i = /* @__PURE__ */ function() {
              return this;
            }();
            try {
              i = i || Function("return this")() || (0, eval)("this");
            } catch {
              typeof window == "object" && (i = window);
            }
            a.exports = i;
          },
          /* 15 */
          /***/
          function(a, r, i) {
            var o, l;
            (function(s) {
              var d = function() {
                var v = Array.prototype.slice.call(arguments);
                typeof v[0] == "function" && v[0].apply(null, v.splice(1));
              }, u = function(v) {
                typeof setImmediate == "function" ? setImmediate(v) : typeof n < "u" && n.nextTick ? n.nextTick(v) : setTimeout(v, 0);
              }, f = function(v) {
                var w = function(b) {
                  var p = function() {
                    return v.length && v[b].apply(null, arguments), p.next();
                  };
                  return p.next = function() {
                    return b < v.length - 1 ? w(b + 1) : null;
                  }, p;
                };
                return w(0);
              }, _ = Array.isArray || function(v) {
                return Object.prototype.toString.call(v) === "[object Array]";
              }, g = function(v, w, b) {
                var p = b ? u : d;
                if (w = w || function() {
                }, !_(v)) {
                  var y = new Error("First argument to waterfall must be an array of functions");
                  return w(y);
                }
                if (!v.length)
                  return w();
                var S = function(E) {
                  return function(C) {
                    if (C)
                      w.apply(null, arguments), w = function() {
                      };
                    else {
                      var B = Array.prototype.slice.call(arguments, 1), O = E.next();
                      O ? B.push(S(O)) : B.push(w), p(function() {
                        E.apply(null, B);
                      });
                    }
                  };
                };
                S(f(v))();
              };
              o = [], l = function() {
                return g;
              }.apply(r, o), l !== void 0 && (a.exports = l);
            })();
          },
          /* 16 */
          /***/
          function(a, r, i) {
            var o = typeof Reflect == "object" ? Reflect : null, l = o && typeof o.apply == "function" ? o.apply : function(I, M, V) {
              return Function.prototype.apply.call(I, M, V);
            }, s;
            o && typeof o.ownKeys == "function" ? s = o.ownKeys : Object.getOwnPropertySymbols ? s = function(I) {
              return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I));
            } : s = function(I) {
              return Object.getOwnPropertyNames(I);
            };
            function d(P) {
              console && console.warn && console.warn(P);
            }
            var u = Number.isNaN || function(I) {
              return I !== I;
            };
            function f() {
              f.init.call(this);
            }
            a.exports = f, a.exports.once = O, f.EventEmitter = f, f.prototype._events = void 0, f.prototype._eventsCount = 0, f.prototype._maxListeners = void 0;
            var _ = 10;
            function g(P) {
              if (typeof P != "function")
                throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof P);
            }
            Object.defineProperty(f, "defaultMaxListeners", {
              enumerable: !0,
              get: function() {
                return _;
              },
              set: function(P) {
                if (typeof P != "number" || P < 0 || u(P))
                  throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + P + ".");
                _ = P;
              }
            }), f.init = function() {
              (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
            }, f.prototype.setMaxListeners = function(I) {
              if (typeof I != "number" || I < 0 || u(I))
                throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + I + ".");
              return this._maxListeners = I, this;
            };
            function v(P) {
              return P._maxListeners === void 0 ? f.defaultMaxListeners : P._maxListeners;
            }
            f.prototype.getMaxListeners = function() {
              return v(this);
            }, f.prototype.emit = function(I) {
              for (var M = [], V = 1; V < arguments.length; V++) M.push(arguments[V]);
              var N = I === "error", q = this._events;
              if (q !== void 0)
                N = N && q.error === void 0;
              else if (!N)
                return !1;
              if (N) {
                var j;
                if (M.length > 0 && (j = M[0]), j instanceof Error)
                  throw j;
                var ee = new Error("Unhandled error." + (j ? " (" + j.message + ")" : ""));
                throw ee.context = j, ee;
              }
              var de = q[I];
              if (de === void 0)
                return !1;
              if (typeof de == "function")
                l(de, this, M);
              else
                for (var Z = de.length, F = E(de, Z), V = 0; V < Z; ++V)
                  l(F[V], this, M);
              return !0;
            };
            function w(P, I, M, V) {
              var N, q, j;
              if (g(M), q = P._events, q === void 0 ? (q = P._events = /* @__PURE__ */ Object.create(null), P._eventsCount = 0) : (q.newListener !== void 0 && (P.emit(
                "newListener",
                I,
                M.listener ? M.listener : M
              ), q = P._events), j = q[I]), j === void 0)
                j = q[I] = M, ++P._eventsCount;
              else if (typeof j == "function" ? j = q[I] = V ? [M, j] : [j, M] : V ? j.unshift(M) : j.push(M), N = v(P), N > 0 && j.length > N && !j.warned) {
                j.warned = !0;
                var ee = new Error("Possible EventEmitter memory leak detected. " + j.length + " " + String(I) + " listeners added. Use emitter.setMaxListeners() to increase limit");
                ee.name = "MaxListenersExceededWarning", ee.emitter = P, ee.type = I, ee.count = j.length, d(ee);
              }
              return P;
            }
            f.prototype.addListener = function(I, M) {
              return w(this, I, M, !1);
            }, f.prototype.on = f.prototype.addListener, f.prototype.prependListener = function(I, M) {
              return w(this, I, M, !0);
            };
            function b() {
              if (!this.fired)
                return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
            }
            function p(P, I, M) {
              var V = { fired: !1, wrapFn: void 0, target: P, type: I, listener: M }, N = b.bind(V);
              return N.listener = M, V.wrapFn = N, N;
            }
            f.prototype.once = function(I, M) {
              return g(M), this.on(I, p(this, I, M)), this;
            }, f.prototype.prependOnceListener = function(I, M) {
              return g(M), this.prependListener(I, p(this, I, M)), this;
            }, f.prototype.removeListener = function(I, M) {
              var V, N, q, j, ee;
              if (g(M), N = this._events, N === void 0)
                return this;
              if (V = N[I], V === void 0)
                return this;
              if (V === M || V.listener === M)
                --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete N[I], N.removeListener && this.emit("removeListener", I, V.listener || M));
              else if (typeof V != "function") {
                for (q = -1, j = V.length - 1; j >= 0; j--)
                  if (V[j] === M || V[j].listener === M) {
                    ee = V[j].listener, q = j;
                    break;
                  }
                if (q < 0)
                  return this;
                q === 0 ? V.shift() : C(V, q), V.length === 1 && (N[I] = V[0]), N.removeListener !== void 0 && this.emit("removeListener", I, ee || M);
              }
              return this;
            }, f.prototype.off = f.prototype.removeListener, f.prototype.removeAllListeners = function(I) {
              var M, V, N;
              if (V = this._events, V === void 0)
                return this;
              if (V.removeListener === void 0)
                return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : V[I] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete V[I]), this;
              if (arguments.length === 0) {
                var q = Object.keys(V), j;
                for (N = 0; N < q.length; ++N)
                  j = q[N], j !== "removeListener" && this.removeAllListeners(j);
                return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
              }
              if (M = V[I], typeof M == "function")
                this.removeListener(I, M);
              else if (M !== void 0)
                for (N = M.length - 1; N >= 0; N--)
                  this.removeListener(I, M[N]);
              return this;
            };
            function y(P, I, M) {
              var V = P._events;
              if (V === void 0)
                return [];
              var N = V[I];
              return N === void 0 ? [] : typeof N == "function" ? M ? [N.listener || N] : [N] : M ? B(N) : E(N, N.length);
            }
            f.prototype.listeners = function(I) {
              return y(this, I, !0);
            }, f.prototype.rawListeners = function(I) {
              return y(this, I, !1);
            }, f.listenerCount = function(P, I) {
              return typeof P.listenerCount == "function" ? P.listenerCount(I) : S.call(P, I);
            }, f.prototype.listenerCount = S;
            function S(P) {
              var I = this._events;
              if (I !== void 0) {
                var M = I[P];
                if (typeof M == "function")
                  return 1;
                if (M !== void 0)
                  return M.length;
              }
              return 0;
            }
            f.prototype.eventNames = function() {
              return this._eventsCount > 0 ? s(this._events) : [];
            };
            function E(P, I) {
              for (var M = new Array(I), V = 0; V < I; ++V)
                M[V] = P[V];
              return M;
            }
            function C(P, I) {
              for (; I + 1 < P.length; I++)
                P[I] = P[I + 1];
              P.pop();
            }
            function B(P) {
              for (var I = new Array(P.length), M = 0; M < I.length; ++M)
                I[M] = P[M].listener || P[M];
              return I;
            }
            function O(P, I) {
              return new Promise(function(M, V) {
                function N(j) {
                  P.removeListener(I, q), V(j);
                }
                function q() {
                  typeof P.removeListener == "function" && P.removeListener("error", N), M([].slice.call(arguments));
                }
                T(P, I, q, { once: !0 }), I !== "error" && D(P, N, { once: !0 });
              });
            }
            function D(P, I, M) {
              typeof P.on == "function" && T(P, "error", I, M);
            }
            function T(P, I, M, V) {
              if (typeof P.on == "function")
                V.once ? P.once(I, M) : P.on(I, M);
              else if (typeof P.addEventListener == "function")
                P.addEventListener(I, function N(q) {
                  V.once && P.removeEventListener(I, N), M(q);
                });
              else
                throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof P);
            }
          },
          /* 17 */
          /***/
          function(a, r, i) {
            var o = i(3), l = i(0), s = 0;
            function d() {
              return "hole_" + s++;
            }
            function u(S, E) {
              for (var C = null, B = 0; B < S.length; B++) {
                var O = E(S[B]);
                O !== S[B] && (C || (C = S.slice()), C[B] = O);
              }
              return C || S;
            }
            function f(S, E, C) {
              if (!(S instanceof o.Node))
                return S;
              if (!C) {
                var B = E(S);
                if (B && B !== S)
                  return B;
              }
              if (S instanceof o.NodeList) {
                var O = u(S.children, function(M) {
                  return f(M, E, C);
                });
                O !== S.children && (S = new o[S.typename](S.lineno, S.colno, O));
              } else if (S instanceof o.CallExtension) {
                var D = f(S.args, E, C), T = u(S.contentArgs, function(M) {
                  return f(M, E, C);
                });
                (D !== S.args || T !== S.contentArgs) && (S = new o[S.typename](S.extName, S.prop, D, T));
              } else {
                var P = S.fields.map(function(M) {
                  return S[M];
                }), I = u(P, function(M) {
                  return f(M, E, C);
                });
                I !== P && (S = new o[S.typename](S.lineno, S.colno), I.forEach(function(M, V) {
                  S[S.fields[V]] = M;
                }));
              }
              return C && E(S) || S;
            }
            function _(S, E) {
              return f(S, E, !0);
            }
            function g(S, E, C) {
              var B = [], O = _(C ? S[C] : S, function(D) {
                var T;
                return D instanceof o.Block ? D : ((D instanceof o.Filter && l.indexOf(E, D.name.value) !== -1 || D instanceof o.CallExtensionAsync) && (T = new o.Symbol(D.lineno, D.colno, d()), B.push(new o.FilterAsync(D.lineno, D.colno, D.name, D.args, T))), T);
              });
              return C ? S[C] = O : S = O, B.length ? (B.push(S), new o.NodeList(S.lineno, S.colno, B)) : S;
            }
            function v(S, E) {
              return _(S, function(C) {
                return C instanceof o.Output ? g(C, E) : C instanceof o.Set ? g(C, E, "value") : C instanceof o.For ? g(C, E, "arr") : C instanceof o.If ? g(C, E, "cond") : C instanceof o.CallExtension ? g(C, E, "args") : void 0;
              });
            }
            function w(S) {
              return f(S, function(E) {
                if (E instanceof o.Block) {
                  var C = !1, B = d();
                  E.body = f(E.body, function(O) {
                    if (O instanceof o.FunCall && O.name.value === "super")
                      return C = !0, new o.Symbol(O.lineno, O.colno, B);
                  }), C && E.body.children.unshift(new o.Super(0, 0, E.name, new o.Symbol(0, 0, B)));
                }
              });
            }
            function b(S) {
              return _(S, function(E) {
                if (!(!(E instanceof o.If) && !(E instanceof o.For))) {
                  var C = !1;
                  if (f(E, function(B) {
                    if (B instanceof o.FilterAsync || B instanceof o.IfAsync || B instanceof o.AsyncEach || B instanceof o.AsyncAll || B instanceof o.CallExtensionAsync)
                      return C = !0, B;
                  }), C) {
                    if (E instanceof o.If)
                      return new o.IfAsync(E.lineno, E.colno, E.cond, E.body, E.else_);
                    if (E instanceof o.For && !(E instanceof o.AsyncAll))
                      return new o.AsyncEach(E.lineno, E.colno, E.arr, E.name, E.body, E.else_);
                  }
                }
              });
            }
            function p(S, E) {
              return b(w(v(S, E)));
            }
            function y(S, E) {
              return p(S, E || []);
            }
            a.exports = {
              transform: y
            };
          },
          /* 18 */
          /***/
          function(a, s, i) {
            var o = i(0), l = i(2), s = a.exports = {};
            function d(ie, ge) {
              return ie == null || ie === !1 ? ge : ie;
            }
            s.abs = Math.abs;
            function u(ie) {
              return ie !== ie;
            }
            function f(ie, ge, Pe) {
              var Ie, Je = [], _e = [];
              for (Ie = 0; Ie < ie.length; Ie++)
                Ie % ge === 0 && _e.length && (Je.push(_e), _e = []), _e.push(ie[Ie]);
              if (_e.length) {
                if (Pe)
                  for (Ie = _e.length; Ie < ge; Ie++)
                    _e.push(Pe);
                Je.push(_e);
              }
              return Je;
            }
            s.batch = f;
            function _(ie) {
              ie = d(ie, "");
              var ge = ie.toLowerCase();
              return l.copySafeness(ie, ge.charAt(0).toUpperCase() + ge.slice(1));
            }
            s.capitalize = _;
            function g(ie, ge) {
              if (ie = d(ie, ""), ge = ge || 80, ie.length >= ge)
                return ie;
              var Pe = ge - ie.length, Ie = o.repeat(" ", Pe / 2 - Pe % 2), Je = o.repeat(" ", Pe / 2);
              return l.copySafeness(ie, Ie + ie + Je);
            }
            s.center = g;
            function v(ie, ge, Pe) {
              return Pe ? ie || ge : ie !== void 0 ? ie : ge;
            }
            s.default = v;
            function w(ie, ge, Pe) {
              if (!o.isObject(ie))
                throw new o.TemplateError("dictsort filter: val must be an object");
              var Ie = [];
              for (var Je in ie)
                Ie.push([Je, ie[Je]]);
              var _e;
              if (Pe === void 0 || Pe === "key")
                _e = 0;
              else if (Pe === "value")
                _e = 1;
              else
                throw new o.TemplateError("dictsort filter: You can only sort by either key or value");
              return Ie.sort(function($e, Ze) {
                var _t = $e[_e], It = Ze[_e];
                return ge || (o.isString(_t) && (_t = _t.toUpperCase()), o.isString(It) && (It = It.toUpperCase())), _t > It ? 1 : _t === It ? 0 : -1;
              }), Ie;
            }
            s.dictsort = w;
            function b(ie, ge) {
              return JSON.stringify(ie, null, ge);
            }
            s.dump = b;
            function p(ie) {
              return ie instanceof l.SafeString ? ie : (ie = ie ?? "", l.markSafe(o.escape(ie.toString())));
            }
            s.escape = p;
            function y(ie) {
              return ie instanceof l.SafeString ? ie : (ie = ie ?? "", l.markSafe(ie.toString()));
            }
            s.safe = y;
            function S(ie) {
              return ie[0];
            }
            s.first = S;
            function E(ie) {
              return ie = ie ?? "", l.markSafe(o.escape(ie.toString()));
            }
            s.forceescape = E;
            function C(ie, ge) {
              return o.groupBy(ie, ge, this.env.opts.throwOnUndefined);
            }
            s.groupby = C;
            function B(ie, ge, Pe) {
              if (ie = d(ie, ""), ie === "")
                return "";
              ge = ge || 4;
              var Ie = ie.split(`
`), Je = o.repeat(" ", ge), _e = Ie.map(function($e, Ze) {
                return Ze === 0 && !Pe ? $e : "" + Je + $e;
              }).join(`
`);
              return l.copySafeness(ie, _e);
            }
            s.indent = B;
            function O(ie, ge, Pe) {
              return ge = ge || "", Pe && (ie = o.map(ie, function(Ie) {
                return Ie[Pe];
              })), ie.join(ge);
            }
            s.join = O;
            function D(ie) {
              return ie[ie.length - 1];
            }
            s.last = D;
            function T(ie) {
              var ge = d(ie, "");
              return ge !== void 0 ? typeof Map == "function" && ge instanceof Map || typeof Set == "function" && ge instanceof Set ? ge.size : o.isObject(ge) && !(ge instanceof l.SafeString) ? o.keys(ge).length : ge.length : 0;
            }
            s.length = T;
            function P(ie) {
              if (o.isString(ie))
                return ie.split("");
              if (o.isObject(ie))
                return o._entries(ie || {}).map(function(ge) {
                  var Pe = ge[0], Ie = ge[1];
                  return {
                    key: Pe,
                    value: Ie
                  };
                });
              if (o.isArray(ie))
                return ie;
              throw new o.TemplateError("list filter: type not iterable");
            }
            s.list = P;
            function I(ie) {
              return ie = d(ie, ""), ie.toLowerCase();
            }
            s.lower = I;
            function M(ie) {
              return ie == null ? "" : l.copySafeness(ie, ie.replace(/\r\n|\n/g, `<br />
`));
            }
            s.nl2br = M;
            function V(ie) {
              return ie[Math.floor(Math.random() * ie.length)];
            }
            s.random = V;
            function N(ie) {
              function ge(Pe, Ie, Je) {
                Ie === void 0 && (Ie = "truthy");
                var _e = this, $e = _e.env.getTest(Ie);
                return o.toArray(Pe).filter(function(_t) {
                  return $e.call(_e, _t, Je) === ie;
                });
              }
              return ge;
            }
            s.reject = N(!1);
            function q(ie, ge) {
              return ie.filter(function(Pe) {
                return !Pe[ge];
              });
            }
            s.rejectattr = q, s.select = N(!0);
            function j(ie, ge) {
              return ie.filter(function(Pe) {
                return !!Pe[ge];
              });
            }
            s.selectattr = j;
            function ee(ie, ge, Pe, Ie) {
              var Je = ie;
              if (ge instanceof RegExp)
                return ie.replace(ge, Pe);
              typeof Ie > "u" && (Ie = -1);
              var _e = "";
              if (typeof ge == "number")
                ge = "" + ge;
              else if (typeof ge != "string")
                return ie;
              if (typeof ie == "number" && (ie = "" + ie), typeof ie != "string" && !(ie instanceof l.SafeString))
                return ie;
              if (ge === "")
                return _e = Pe + ie.split("").join(Pe) + Pe, l.copySafeness(ie, _e);
              var $e = ie.indexOf(ge);
              if (Ie === 0 || $e === -1)
                return ie;
              for (var Ze = 0, _t = 0; $e > -1 && (Ie === -1 || _t < Ie); )
                _e += ie.substring(Ze, $e) + Pe, Ze = $e + ge.length, _t++, $e = ie.indexOf(ge, Ze);
              return Ze < ie.length && (_e += ie.substring(Ze)), l.copySafeness(Je, _e);
            }
            s.replace = ee;
            function de(ie) {
              var ge;
              return o.isString(ie) ? ge = P(ie) : ge = o.map(ie, function(Pe) {
                return Pe;
              }), ge.reverse(), o.isString(ie) ? l.copySafeness(ie, ge.join("")) : ge;
            }
            s.reverse = de;
            function Z(ie, ge, Pe) {
              ge = ge || 0;
              var Ie = Math.pow(10, ge), Je;
              return Pe === "ceil" ? Je = Math.ceil : Pe === "floor" ? Je = Math.floor : Je = Math.round, Je(ie * Ie) / Ie;
            }
            s.round = Z;
            function F(ie, ge, Pe) {
              for (var Ie = Math.floor(ie.length / ge), Je = ie.length % ge, _e = [], $e = 0, Ze = 0; Ze < ge; Ze++) {
                var _t = $e + Ze * Ie;
                Ze < Je && $e++;
                var It = $e + (Ze + 1) * Ie, rt = ie.slice(_t, It);
                Pe && Ze >= Je && rt.push(Pe), _e.push(rt);
              }
              return _e;
            }
            s.slice = F;
            function Y(ie, ge, Pe) {
              return Pe === void 0 && (Pe = 0), ge && (ie = o.map(ie, function(Ie) {
                return Ie[ge];
              })), Pe + ie.reduce(function(Ie, Je) {
                return Ie + Je;
              }, 0);
            }
            s.sum = Y, s.sort = l.makeMacro(["value", "reverse", "case_sensitive", "attribute"], [], function(ge, Pe, Ie, Je) {
              var _e = this, $e = o.map(ge, function(_t) {
                return _t;
              }), Ze = o.getAttrGetter(Je);
              return $e.sort(function(_t, It) {
                var rt = Je ? Ze(_t) : _t, Dt = Je ? Ze(It) : It;
                if (_e.env.opts.throwOnUndefined && Je && (rt === void 0 || Dt === void 0))
                  throw new TypeError('sort: attribute "' + Je + '" resolved to undefined');
                return !Ie && o.isString(rt) && o.isString(Dt) && (rt = rt.toLowerCase(), Dt = Dt.toLowerCase()), rt < Dt ? Pe ? 1 : -1 : rt > Dt ? Pe ? -1 : 1 : 0;
              }), $e;
            });
            function se(ie) {
              return l.copySafeness(ie, ie);
            }
            s.string = se;
            function X(ie, ge) {
              ie = d(ie, "");
              var Pe = /<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi, Ie = ve(ie.replace(Pe, "")), Je = "";
              return ge ? Je = Ie.replace(/^ +| +$/gm, "").replace(/ +/g, " ").replace(/(\r\n)/g, `
`).replace(/\n\n\n+/g, `

`) : Je = Ie.replace(/\s+/gi, " "), l.copySafeness(ie, Je);
            }
            s.striptags = X;
            function he(ie) {
              ie = d(ie, "");
              var ge = ie.split(" ").map(function(Pe) {
                return _(Pe);
              });
              return l.copySafeness(ie, ge.join(" "));
            }
            s.title = he;
            function ve(ie) {
              return l.copySafeness(ie, ie.replace(/^\s*|\s*$/g, ""));
            }
            s.trim = ve;
            function pe(ie, ge, Pe, Ie) {
              var Je = ie;
              if (ie = d(ie, ""), ge = ge || 255, ie.length <= ge)
                return ie;
              if (Pe)
                ie = ie.substring(0, ge);
              else {
                var _e = ie.lastIndexOf(" ", ge);
                _e === -1 && (_e = ge), ie = ie.substring(0, _e);
              }
              return ie += Ie ?? "...", l.copySafeness(Je, ie);
            }
            s.truncate = pe;
            function H(ie) {
              return ie = d(ie, ""), ie.toUpperCase();
            }
            s.upper = H;
            function we(ie) {
              var ge = encodeURIComponent;
              if (o.isString(ie))
                return ge(ie);
              var Pe = o.isArray(ie) ? ie : o._entries(ie);
              return Pe.map(function(Ie) {
                var Je = Ie[0], _e = Ie[1];
                return ge(Je) + "=" + ge(_e);
              }).join("&");
            }
            s.urlencode = we;
            var Me = /^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/, Re = /^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i, ce = /^https?:\/\/.*$/, te = /^www\./, G = /\.(?:org|net|com)(?:\:|\/|$)/;
            function le(ie, ge, Pe) {
              u(ge) && (ge = 1 / 0);
              var Ie = Pe === !0 ? ' rel="nofollow"' : "", Je = ie.split(/(\s+)/).filter(function(_e) {
                return _e && _e.length;
              }).map(function(_e) {
                var $e = _e.match(Me), Ze = $e ? $e[1] : _e, _t = Ze.substr(0, ge);
                return ce.test(Ze) ? '<a href="' + Ze + '"' + Ie + ">" + _t + "</a>" : te.test(Ze) ? '<a href="http://' + Ze + '"' + Ie + ">" + _t + "</a>" : Re.test(Ze) ? '<a href="mailto:' + Ze + '">' + Ze + "</a>" : G.test(Ze) ? '<a href="http://' + Ze + '"' + Ie + ">" + _t + "</a>" : _e;
              });
              return Je.join("");
            }
            s.urlize = le;
            function K(ie) {
              ie = d(ie, "");
              var ge = ie ? ie.match(/\w+/g) : null;
              return ge ? ge.length : null;
            }
            s.wordcount = K;
            function Ce(ie, ge) {
              var Pe = parseFloat(ie);
              return u(Pe) ? ge : Pe;
            }
            s.float = Ce;
            var Te = l.makeMacro(["value", "default", "base"], [], function(ge, Pe, Ie) {
              Ie === void 0 && (Ie = 10);
              var Je = parseInt(ge, Ie);
              return u(Je) ? Pe : Je;
            });
            s.int = Te, s.d = s.default, s.e = s.escape;
          },
          /* 19 */
          /***/
          function(a, r, i) {
            function o(u, f) {
              u.prototype = Object.create(f.prototype), u.prototype.constructor = u, l(u, f);
            }
            function l(u, f) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(g, v) {
                return g.__proto__ = v, g;
              }, l(u, f);
            }
            var s = i(6), d = /* @__PURE__ */ function(u) {
              o(f, u);
              function f(g) {
                var v;
                return v = u.call(this) || this, v.precompiled = g || {}, v;
              }
              var _ = f.prototype;
              return _.getSource = function(v) {
                return this.precompiled[v] ? {
                  src: {
                    type: "code",
                    obj: this.precompiled[v]
                  },
                  path: v
                } : null;
              }, f;
            }(s);
            a.exports = {
              PrecompiledLoader: d
            };
          },
          /* 20 */
          /***/
          function(a, r, i) {
            var o = i(2).SafeString;
            function l(V) {
              return typeof V == "function";
            }
            r.callable = l;
            function s(V) {
              return V !== void 0;
            }
            r.defined = s;
            function d(V, N) {
              return V % N === 0;
            }
            r.divisibleby = d;
            function u(V) {
              return V instanceof o;
            }
            r.escaped = u;
            function f(V, N) {
              return V === N;
            }
            r.equalto = f, r.eq = r.equalto, r.sameas = r.equalto;
            function _(V) {
              return V % 2 === 0;
            }
            r.even = _;
            function g(V) {
              return !V;
            }
            r.falsy = g;
            function v(V, N) {
              return V >= N;
            }
            r.ge = v;
            function w(V, N) {
              return V > N;
            }
            r.greaterthan = w, r.gt = r.greaterthan;
            function b(V, N) {
              return V <= N;
            }
            r.le = b;
            function p(V, N) {
              return V < N;
            }
            r.lessthan = p, r.lt = r.lessthan;
            function y(V) {
              return V.toLowerCase() === V;
            }
            r.lower = y;
            function S(V, N) {
              return V !== N;
            }
            r.ne = S;
            function E(V) {
              return V === null;
            }
            r.null = E;
            function C(V) {
              return typeof V == "number";
            }
            r.number = C;
            function B(V) {
              return V % 2 === 1;
            }
            r.odd = B;
            function O(V) {
              return typeof V == "string";
            }
            r.string = O;
            function D(V) {
              return !!V;
            }
            r.truthy = D;
            function T(V) {
              return V === void 0;
            }
            r.undefined = T;
            function P(V) {
              return V.toUpperCase() === V;
            }
            r.upper = P;
            function I(V) {
              return typeof Symbol < "u" ? !!V[Symbol.iterator] : Array.isArray(V) || typeof V == "string";
            }
            r.iterable = I;
            function M(V) {
              var N = V != null && typeof V == "object" && !Array.isArray(V);
              return Set ? N && !(V instanceof Set) : N;
            }
            r.mapping = M;
          },
          /* 21 */
          /***/
          function(a, r, i) {
            function o(d) {
              var u = -1;
              return {
                current: null,
                reset: function() {
                  u = -1, this.current = null;
                },
                next: function() {
                  return u++, u >= d.length && (u = 0), this.current = d[u], this.current;
                }
              };
            }
            function l(d) {
              d = d || ",";
              var u = !0;
              return function() {
                var f = u ? "" : d;
                return u = !1, f;
              };
            }
            function s() {
              return {
                range: function(u, f, _) {
                  typeof f > "u" ? (f = u, u = 0, _ = 1) : _ || (_ = 1);
                  var g = [];
                  if (_ > 0)
                    for (var v = u; v < f; v += _)
                      g.push(v);
                  else
                    for (var w = u; w > f; w += _)
                      g.push(w);
                  return g;
                },
                cycler: function() {
                  return o(Array.prototype.slice.call(arguments));
                },
                joiner: function(u) {
                  return l(u);
                }
              };
            }
            a.exports = s;
          },
          /* 22 */
          /***/
          function(a, r, i) {
            var o = i(4);
            a.exports = function(s, d) {
              function u(f, _) {
                if (this.name = f, this.path = f, this.defaultEngine = _.defaultEngine, this.ext = o.extname(f), !this.ext && !this.defaultEngine)
                  throw new Error("No default engine was specified and no extension was provided.");
                this.ext || (this.name += this.ext = (this.defaultEngine[0] !== "." ? "." : "") + this.defaultEngine);
              }
              return u.prototype.render = function(_, g) {
                s.render(this.name, _, g);
              }, d.set("view", u), d.set("nunjucksEnv", s), s;
            };
          },
          /* 23 */
          /***/
          function(a, r, i) {
            var o = i(4), l = i(4), s = i(0), d = s._prettifyError, u = i(5), f = i(7), _ = f.Environment, g = i(24);
            function v(y, S) {
              return Array.isArray(S) ? S.some(function(E) {
                return y.match(E);
              }) : !1;
            }
            function w(y, S) {
              S = S || {}, S.isString = !0;
              var E = S.env || new _([]), C = S.wrapper || g;
              if (!S.name)
                throw new Error('the "name" option is required when compiling a string');
              return C([p(y, S.name, E)], S);
            }
            function b(y, S) {
              S = S || {};
              var E = S.env || new _([]), C = S.wrapper || g;
              if (S.isString)
                return w(y, S);
              var B = o.existsSync(y) && o.statSync(y), O = [], D = [];
              function T(M) {
                o.readdirSync(M).forEach(function(V) {
                  var N = l.join(M, V), q = N.substr(l.join(y, "/").length), j = o.statSync(N);
                  j && j.isDirectory() ? (q += "/", v(q, S.exclude) || T(N)) : v(q, S.include) && D.push(N);
                });
              }
              if (B.isFile())
                O.push(p(o.readFileSync(y, "utf-8"), S.name || y, E));
              else if (B.isDirectory()) {
                T(y);
                for (var P = 0; P < D.length; P++) {
                  var I = D[P].replace(l.join(y, "/"), "");
                  try {
                    O.push(p(o.readFileSync(D[P], "utf-8"), I, E));
                  } catch (M) {
                    if (S.force)
                      console.error(M);
                    else
                      throw M;
                  }
                }
              }
              return C(O, S);
            }
            function p(y, S, E) {
              E = E || new _([]);
              var C = E.asyncFilters, B = E.extensionsList, O;
              S = S.replace(/\\/g, "/");
              try {
                O = u.compile(y, C, B, S, E.opts);
              } catch (D) {
                throw d(S, !1, D);
              }
              return {
                name: S,
                template: O
              };
            }
            a.exports = {
              precompile: b,
              precompileString: w
            };
          },
          /* 24 */
          /***/
          function(a, r, i) {
            function o(l, s) {
              var d = "";
              s = s || {};
              for (var u = 0; u < l.length; u++) {
                var f = JSON.stringify(l[u].name), _ = l[u].template;
                d += "(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})[" + f + `] = (function() {
` + _ + `
})();
`, s.asFunction && (d += "return function(ctx, cb) { return nunjucks.render(" + f + `, ctx, cb); }
`), d += `})();
`;
              }
              return d;
            }
            a.exports = o;
          },
          /* 25 */
          /***/
          function(a, r, i) {
            function o() {
              var l = this.runtime, s = this.lib, d = this.compiler.Compiler, u = this.parser.Parser, f = this.nodes, _ = this.lexer, g = l.contextOrFrameLookup, v = l.memberLookup, w, b;
              d && (w = d.prototype.assertType), u && (b = u.prototype.parseAggregate);
              function p() {
                l.contextOrFrameLookup = g, l.memberLookup = v, d && (d.prototype.assertType = w), u && (u.prototype.parseAggregate = b);
              }
              l.contextOrFrameLookup = function(T, P, I) {
                var M = g.apply(this, arguments);
                if (M !== void 0)
                  return M;
                switch (I) {
                  case "True":
                    return !0;
                  case "False":
                    return !1;
                  case "None":
                    return null;
                  default:
                    return;
                }
              };
              function y(D) {
                return {
                  index: D.index,
                  lineno: D.lineno,
                  colno: D.colno
                };
              }
              if (f && d && u) {
                var S = f.Node.extend("Slice", {
                  fields: ["start", "stop", "step"],
                  init: function(T, P, I, M, V) {
                    I = I || new f.Literal(T, P, null), M = M || new f.Literal(T, P, null), V = V || new f.Literal(T, P, 1), this.parent(T, P, I, M, V);
                  }
                });
                d.prototype.assertType = function(T) {
                  T instanceof S || w.apply(this, arguments);
                }, d.prototype.compileSlice = function(T, P) {
                  this._emit("("), this._compileExpression(T.start, P), this._emit("),("), this._compileExpression(T.stop, P), this._emit("),("), this._compileExpression(T.step, P), this._emit(")");
                }, u.prototype.parseAggregate = function() {
                  var T = this, P = y(this.tokens);
                  P.colno--, P.index--;
                  try {
                    return b.apply(this);
                  } catch (de) {
                    var I = y(this.tokens), M = function() {
                      return s._assign(T.tokens, I), de;
                    };
                    s._assign(this.tokens, P), this.peeked = !1;
                    var V = this.peekToken();
                    if (V.type !== _.TOKEN_LEFT_BRACKET)
                      throw M();
                    this.nextToken();
                    for (var N = new S(V.lineno, V.colno), q = !1, j = 0; j <= N.fields.length && !this.skip(_.TOKEN_RIGHT_BRACKET); j++) {
                      if (j === N.fields.length)
                        if (q)
                          this.fail("parseSlice: too many slice components", V.lineno, V.colno);
                        else
                          break;
                      if (this.skip(_.TOKEN_COLON))
                        q = !0;
                      else {
                        var ee = N.fields[j];
                        N[ee] = this.parseExpression(), q = this.skip(_.TOKEN_COLON) || q;
                      }
                    }
                    if (!q)
                      throw M();
                    return new f.Array(V.lineno, V.colno, [N]);
                  }
                };
              }
              function E(D, T, P, I) {
                D = D || [], T === null && (T = I < 0 ? D.length - 1 : 0), P === null ? P = I < 0 ? -1 : D.length : P < 0 && (P += D.length), T < 0 && (T += D.length);
                for (var M = [], V = T; !(V < 0 || V > D.length || I > 0 && V >= P || I < 0 && V <= P); V += I)
                  M.push(l.memberLookup(D, V));
                return M;
              }
              function C(D, T) {
                return Object.prototype.hasOwnProperty.call(D, T);
              }
              var B = {
                pop: function(T) {
                  if (T === void 0)
                    return this.pop();
                  if (T >= this.length || T < 0)
                    throw new Error("KeyError");
                  return this.splice(T, 1);
                },
                append: function(T) {
                  return this.push(T);
                },
                remove: function(T) {
                  for (var P = 0; P < this.length; P++)
                    if (this[P] === T)
                      return this.splice(P, 1);
                  throw new Error("ValueError");
                },
                count: function(T) {
                  for (var P = 0, I = 0; I < this.length; I++)
                    this[I] === T && P++;
                  return P;
                },
                index: function(T) {
                  var P;
                  if ((P = this.indexOf(T)) === -1)
                    throw new Error("ValueError");
                  return P;
                },
                find: function(T) {
                  return this.indexOf(T);
                },
                insert: function(T, P) {
                  return this.splice(T, 0, P);
                }
              }, O = {
                items: function() {
                  return s._entries(this);
                },
                values: function() {
                  return s._values(this);
                },
                keys: function() {
                  return s.keys(this);
                },
                get: function(T, P) {
                  var I = this[T];
                  return I === void 0 && (I = P), I;
                },
                has_key: function(T) {
                  return C(this, T);
                },
                pop: function(T, P) {
                  var I = this[T];
                  if (I === void 0 && P !== void 0)
                    I = P;
                  else {
                    if (I === void 0)
                      throw new Error("KeyError");
                    delete this[T];
                  }
                  return I;
                },
                popitem: function() {
                  var T = s.keys(this);
                  if (!T.length)
                    throw new Error("KeyError");
                  var P = T[0], I = this[P];
                  return delete this[P], [P, I];
                },
                setdefault: function(T, P) {
                  return P === void 0 && (P = null), T in this || (this[T] = P), this[T];
                },
                update: function(T) {
                  return s._assign(this, T), null;
                }
              };
              return O.iteritems = O.items, O.itervalues = O.values, O.iterkeys = O.keys, l.memberLookup = function(T, P, I) {
                return arguments.length === 4 ? E.apply(this, arguments) : (T = T || {}, s.isArray(T) && C(B, P) ? B[P].bind(T) : s.isObject(T) && C(O, P) ? O[P].bind(T) : v.apply(this, arguments));
              }, p;
            }
            a.exports = o;
          }
          /******/
        ])
      );
    });
  }(i_)), i_.exports;
}
var mae = fae();
const zA = /* @__PURE__ */ aD(mae);
function hae(e) {
  return e && e.replace(/"""([\s\S]*?)"""/g, (t, n) => `"${n.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\r?\n/g, "\\n")}"`);
}
function Sy(e) {
  !e || typeof e != "object" || e.get_formatted || (e.get_formatted = function(t) {
    return this?.[t];
  });
}
function WA(e, t = "") {
  if (!e) return "";
  const n = (e.items || []).map((l) => {
    const s = l.serial_no ? `<br><b>SR.No:</b><br>${l.serial_no.replace(/\n/g, ", ")}` : "", d = e.posa_show_custom_name_marker_on_print && l.name_overridden ? " (custom)" : "";
    return `<tr>
        <td>${l.item_code}${l.item_name && l.item_name !== l.item_code ? `<br>${l.item_name}${d}` : ""}${s}</td>
        <td style="text-align:right">${l.qty} ${l.uom || ""}<br>@ ${l.rate}</td>
        <td style="text-align:right">${l.amount}</td>
      </tr>`;
  }).join(""), a = (e.taxes || []).map(
    (l) => `<tr>
      <td class="text-right" style="width:70%">${l.description}@${l.rate}%</td>
      <td class="text-right">${l.tax_amount}</td>
    </tr>`
  ).join(""), r = e.discount_amount ? `<tr>
      <td class="text-right" style="width:75%">Discount</td>
      <td class="text-right">${e.discount_amount}</td>
    </tr>` : "", i = e.change_amount ? `<tr>
      <td class="text-right" style="width:75%">Change Amount</td>
      <td class="text-right">${e.change_amount}</td>
    </tr>` : "", o = t ? `<div style="margin-top:5px;">${t}</div>` : "";
  return `<!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>Invoice ${e.name || ""}</title>
    <style>
      table, tr, td, div, p { line-height:120%; vertical-align:middle; font-size:10px; }
      .print-format { width:3.5in; padding:0.1in; min-height:7in; }
      .text-right { text-align:right; }
    </style>
  </head>
  <body class="print-format">
    <div style="text-align:center; margin-bottom:0"><h5 style="margin:0; font-size:11px;">${e.is_duplicate ? "Duplicate" : "Original"}</h5></div>
    <p style="margin-top:0">
      <b>Invoice Status:</b> ${e.status || ""}<br>
      <b>Receipt No:</b> ${e.name || ""}<br>
      <b>Customer:</b> ${e.customer_name || e.customer || ""}<br>
      <b>Mobile:</b> ${e.contact_mobile || ""}<br>
      <b>Date:</b> ${e.posting_date || ""}
      <b>Time:</b> ${e.posting_time || ""}<br>
    </p>
    <p style="margin-top:3px;"><b>Additional Note:</b> <strong>${e.posa_notes || ""}</strong></p>
    <table cellpadding="0" cellspacing="0" style="width:100%">
      <thead>
        <tr><th width="50%"><b>Item</b></th><th width="25%" class="text-right"><b>Qty</b></th><th width="25%" class="text-right"><b>Amount</b></th></tr>
      </thead>
      <tbody>${n}</tbody>
    </table>
    <table cellpadding="0" cellspacing="0" style="width:100%">
      <tbody>
        <tr><td class="text-right" style="width:70%"><b>Total</b></td><td class="text-right">${e.total}</td></tr>
        ${a}
        ${r}
        <tr><td class="text-right" style="width:70%"><b>Grand Total</b></td><td class="text-right">${e.grand_total}</td></tr>
        <tr><td class="text-right" style="width:75%"><b>Paid Amount</b></td><td class="text-right">${e.paid_amount}</td></tr>
        ${i}
      </tbody>
    </table>
    ${o}
    <p class="text-center" style="margin-top:3px;">Thank you, please visit again.</p>
  </body>
  </html>`;
}
async function _ae(e) {
  if (!e) return "";
  await _u;
  const t = hae(eQ()), n = nQ(), a = {
    ...e,
    terms: e.terms || n,
    terms_and_conditions: e.terms_and_conditions || n
  };
  if (Sy(a), (a.items || []).forEach(Sy), (a.taxes || []).forEach(Sy), !t)
    return console.warn("No offline print template cached; using fallback template"), WA(a, a.terms_and_conditions);
  try {
    zA.configure({ autoescape: !1 });
    const r = {
      doc: a,
      terms: a.terms,
      terms_and_conditions: a.terms_and_conditions,
      _: frappe?._ ? frappe._ : (i) => i,
      frappe: {
        db: { get_value: () => "", sql: () => [] },
        get_list: () => []
      }
    };
    return zA.renderString(t, r);
  } catch (r) {
    return console.error("Failed to render offline invoice", r), WA(a, a.terms_and_conditions);
  }
}
const pae = {
  // Using format mixin for shared formatting methods
  mixins: [Oi],
  data() {
    return {
      loading: !1,
      // UI loading state
      pos_profile: "",
      // POS profile settings
      pos_settings: "",
      // POS settings
      invoice_doc: "",
      // Current invoice document
      stock_settings: "",
      // Stock settings
      invoiceType: "Invoice",
      // Type of invoice
      is_return: !1,
      // Is this a return invoice?
      loyalty_amount: 0,
      // Loyalty points to redeem
      redeemed_customer_credit: 0,
      // Customer credit to redeem
      credit_change: 0,
      // Change to be given as credit
      paid_change: 0,
      // Change to be given as paid
      is_credit_sale: !1,
      // Is this a credit sale?
      is_write_off_change: !1,
      // Write-off for change enabled
      is_cashback: !0,
      // Cashback enabled
      is_credit_return: !1,
      // Is this a credit return?
      redeem_customer_credit: !1,
      // Redeem customer credit?
      customer_credit_dict: [],
      // List of available customer credits
      paid_change_rules: [],
      // Validation rules for paid change
      phone_dialog: !1,
      // Show phone payment dialog
      custom_days_dialog: !1,
      // Show custom days dialog
      custom_days_value: null,
      // Custom days entry
      new_delivery_date: null,
      // New delivery date value
      new_po_date: null,
      // New PO date value
      new_credit_due_date: null,
      // New credit due date value
      credit_due_days: null,
      // Number of days until due
      credit_due_presets: [7, 14, 30],
      // Preset options for due days
      customer_info: "",
      // Customer info
      mpesa_modes: [],
      // List of available M-Pesa modes
      sales_persons: [],
      // List of sales persons
      sales_person: "",
      // Selected sales person
      addresses: [],
      // List of customer addresses
      is_user_editing_paid_change: !1,
      // User interaction flag
      highlightSubmit: !1,
      // Highlight state for submit button
      showDebugInfo: !1
      // Show debug information panel
    };
  },
  computed: {
    // Get currency symbol for given or current currency
    currencySymbol() {
      return (e) => get_currency_symbol(e || this.invoice_doc.currency);
    },
    // Display currency for invoice
    displayCurrency() {
      return this.invoice_doc ? this.invoice_doc.currency : "";
    },
    // Calculate total payments (all methods, loyalty, credit)
    total_payments() {
      let e = 0;
      return this.invoice_doc && this.invoice_doc.payments && this.invoice_doc.payments.forEach((t) => {
        e += parseFloat(Rt.fromArabicNumerals(String(t.amount))) || 0;
      }), this.loyalty_amount && (this.invoice_doc.currency !== this.pos_profile.currency ? e += this.flt(
        this.loyalty_amount / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ) : e += parseFloat(Rt.fromArabicNumerals(String(this.loyalty_amount))) || 0), this.redeemed_customer_credit && (this.invoice_doc.currency !== this.pos_profile.currency ? e += this.flt(
        this.redeemed_customer_credit / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ) : e += parseFloat(Rt.fromArabicNumerals(String(this.redeemed_customer_credit))) || 0), this.flt(e, this.currency_precision);
    },
    // Calculate difference between invoice total and payments
    diff_payment() {
      if (!this.invoice_doc) return 0;
      let e;
      this.pos_profile.posa_allow_multi_currency && this.invoice_doc.currency !== this.pos_profile.currency ? e = this.flt(this.invoice_doc.grand_total, this.currency_precision) : e = this.flt(
        this.invoice_doc.rounded_total || this.invoice_doc.grand_total,
        this.currency_precision
      );
      let t = this.flt(e - this.total_payments, this.currency_precision);
      return this.invoice_doc.is_return, t >= 0 ? t : 0;
    },
    // Calculate change to be given back to customer
    credit_change() {
      let e;
      this.pos_profile.posa_allow_multi_currency && this.invoice_doc.currency !== this.pos_profile.currency ? e = this.flt(this.invoice_doc.grand_total, this.currency_precision) : e = this.flt(
        this.invoice_doc.rounded_total || this.invoice_doc.grand_total,
        this.currency_precision
      );
      let t = this.flt(this.total_payments - e, this.currency_precision);
      return t > 0 ? t : 0;
    },
    // Label for the difference field (To Be Paid/Change)
    diff_label() {
      return this.diff_payment > 0 ? `To Be Paid (${this.displayCurrency})` : `Change (${this.displayCurrency})`;
    },
    // Display formatted total payments
    total_payments_display() {
      return this.formatCurrency(this.total_payments, this.displayCurrency);
    },
    // Display formatted difference payment
    diff_payment_display() {
      return this.formatCurrency(this.diff_payment, this.displayCurrency);
    },
    // Calculate available loyalty points amount in selected currency
    available_points_amount() {
      let e = 0;
      return this.customer_info.loyalty_points && (e = this.customer_info.loyalty_points * this.customer_info.conversion_factor, this.invoice_doc.currency !== this.pos_profile.currency && (e = this.flt(
        e / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ))), e;
    },
    // Calculate total available customer credit
    available_customer_credit() {
      return this.customer_credit_dict.reduce((e, t) => e + this.flt(t.total_credit), 0);
    },
    // Validate if payment can be submitted
    vaildatPayment() {
      return this.pos_profile.posa_enable_restaurant_mode ? !1 : !!(this.pos_profile.posa_allow_sales_order && this.invoiceType === "Order" && !this.invoice_doc.posa_delivery_date);
    },
    // Should request payment field be shown?
    request_payment_field() {
      return this.pos_settings?.invoice_fields?.some(
        (e) => e.fieldtype === "Button" && e.fieldname === "request_for_payment"
      ) || !1;
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {
    // Watch diff_payment to update paid_change
    diff_payment(e) {
      this.is_user_editing_paid_change || (this.paid_change = -e);
    },
    // Watch paid_change to validate and update credit_change
    paid_change(e) {
      const t = -this.diff_payment;
      e > t ? (this.paid_change = t, this.credit_change = 0, this.paid_change_rules = ["Paid change can not be greater than total change!"]) : (this.paid_change_rules = [], this.credit_change = this.flt(e - t, this.currency_precision));
    },
    // Watch loyalty_amount to handle loyalty points redemption
    loyalty_amount(e) {
      e > this.available_points_amount ? (this.invoice_doc.loyalty_amount = 0, this.invoice_doc.redeem_loyalty_points = 0, this.invoice_doc.loyalty_points = 0, this.loyalty_amount = 0, this.eventBus.emit("show_message", {
        title: `Loyalty Amount can not be more than ${this.available_points_amount}`,
        color: "error"
      })) : (this.invoice_doc.loyalty_amount = this.flt(this.loyalty_amount), this.invoice_doc.redeem_loyalty_points = 1, this.invoice_doc.loyalty_points = this.flt(this.loyalty_amount) / this.customer_info.conversion_factor);
    },
    // Watch redeemed_customer_credit to validate
    redeemed_customer_credit(e) {
      e > this.available_customer_credit && (this.redeemed_customer_credit = this.available_customer_credit, this.eventBus.emit("show_message", {
        title: `You can redeem customer credit up to ${this.available_customer_credit}`,
        color: "error"
      }));
    },
    // Recalculate total redeemed credit whenever credit entries change
    customer_credit_dict: {
      handler(e) {
        const t = e.reduce((n, a) => n + this.flt(a.credit_to_redeem || 0), 0);
        this.redeemed_customer_credit = this.flt(t, this.currency_precision);
      },
      deep: !0
    },
    // Watch sales_person to update sales_team
    sales_person(e) {
      e ? (this.invoice_doc.sales_team = [
        {
          sales_person: e,
          allocated_percentage: 100
        }
      ], console.log("Updated sales_team with sales_person:", e)) : (this.invoice_doc.sales_team = [], console.log("Cleared sales_team"));
    },
    // Watch is_credit_sale to reset cash payments
    is_credit_sale(e) {
      e ? this.invoice_doc.payments.forEach((t) => {
        t.mode_of_payment.toLowerCase() === "cash" && (t.amount = 0);
      }) : this.invoice_doc.payments.forEach((t) => {
        t.mode_of_payment.toLowerCase() === "cash" && (t.amount = this.invoice_doc.rounded_total || this.invoice_doc.grand_total);
      });
    },
    // Watch is_credit_return to toggle cashback payments
    is_credit_return(e) {
      e ? (this.is_cashback = !1, this.invoice_doc.payments.forEach((t) => {
        t.amount = 0, t.base_amount !== void 0 && (t.base_amount = 0);
      })) : (this.is_cashback = !0, this.ensureReturnPaymentsAreNegative());
    }
  },
  methods: {
    // Go back to invoice view and reset customer readonly
    back_to_invoice() {
      this.eventBus.emit("show_payment", "false"), this.eventBus.emit("set_customer_readonly", !1);
    },
    // Highlight and focus the submit button when payment screen opens
    handleShowPayment(e) {
      e === "true" ? this.$nextTick(() => {
        setTimeout(() => {
          const t = this.$refs.submitButton, n = t && t.$el ? t.$el : t;
          n && (n.scrollIntoView({ behavior: "smooth", block: "center" }), n.focus(), this.highlightSubmit = !0);
        }, 100);
      }) : this.highlightSubmit = !1;
    },
    // Reset all cash payments to zero
    reset_cash_payments() {
      this.invoice_doc.payments.forEach((e) => {
        e.mode_of_payment.toLowerCase() === "cash" && (e.amount = 0);
      });
    },
    // Get dynamic submit button text based on document type and status
    getSubmitButtonText() {
      return this.invoice_doc.is_multi_order_edit ? this.__("Submit {0} Orders", [this.invoice_doc.multi_order_count || "Multiple"]) : this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 ? this.__("Submit Order") : this.invoice_doc.doctype === "Sales Invoice" ? this.__("Pay") : this.__("Submit");
    },
    // Get dynamic submit and print button text based on document type and status
    getSubmitPrintButtonText() {
      return this.invoice_doc.is_multi_order_edit ? this.__("Submit & Print {0} Orders", [this.invoice_doc.multi_order_count || "Multiple"]) : this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 ? this.__("Submit & Print Order") : this.invoice_doc.doctype === "Sales Invoice" ? this.__("Pay & Print") : this.__("Submit & Print");
    },
    // Ensure all payments are negative for return invoices
    ensureReturnPaymentsAreNegative() {
      if (!this.invoice_doc || !this.invoice_doc.is_return || !this.is_cashback)
        return;
      let e = !1;
      if (this.invoice_doc.payments.forEach((t) => {
        Math.abs(t.amount) > 0 && (e = !0);
      }), !e) {
        const t = this.invoice_doc.payments.find((n) => n.default === 1);
        if (t) {
          const n = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
          t.amount = -Math.abs(n), t.base_amount !== void 0 && (t.base_amount = -Math.abs(n));
        }
      }
      this.invoice_doc.payments.forEach((t) => {
        t.amount > 0 && (t.amount = -Math.abs(t.amount)), t.base_amount !== void 0 && t.base_amount > 0 && (t.base_amount = -Math.abs(t.base_amount));
      });
    },
    // Submit payment after validation
    async submit(e, t = !1, n = !1) {
      if (this.invoice_doc.is_multi_order_edit && this.invoice_doc.multi_order_names) {
        console.log("Submitting multiple draft restaurant orders:", this.invoice_doc.multi_order_names);
        try {
          const o = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
          console.log("Preserving payment amounts for multi-order submission:", o);
          const l = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_multiple_orders_and_create_invoice",
            args: {
              order_names: this.invoice_doc.multi_order_names,
              updated_order_data: this.invoice_doc,
              pos_profile_name: this.pos_profile.name
            }
          });
          if (l.message)
            console.log("Successfully submitted multiple orders and created consolidated invoice:", l.message.name), this.invoice_doc = l.message, o && o.length > 0 && (console.log("Restoring payment amounts to consolidated invoice..."), o.forEach((s) => {
              const d = this.invoice_doc.payments.find(
                (u) => u.mode_of_payment === s.mode_of_payment
              );
              d && s.amount > 0 && (d.amount = s.amount, d.base_amount = s.base_amount || s.amount, console.log(`Restored ${s.mode_of_payment}: ${s.amount}`));
            }), console.log("Payment amounts successfully restored to consolidated invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("show_message", {
              title: __("{0} orders submitted and consolidated into invoice for payment", [this.invoice_doc.multi_order_names.length]),
              color: "success"
            });
          else
            throw new Error("Failed to submit multiple orders and create invoice");
        } catch (o) {
          console.error("Error submitting multiple draft restaurant orders:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting multiple orders: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      } else if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0) {
        console.log("Submitting draft restaurant order:", this.invoice_doc.name);
        try {
          const o = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_restaurant_order",
            args: {
              order_data: this.invoice_doc
            }
          });
          if (o.message) {
            console.log("Successfully submitted Sales Order:", o.message.name);
            const l = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
            console.log("Preserving original payment amounts:", l);
            const s = await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
              args: {
                sales_order_name: o.message.name,
                pos_profile_name: this.pos_profile.name
              }
            });
            if (s.message)
              this.invoice_doc = s.message, console.log("Successfully converted to Sales Invoice for payment:", this.invoice_doc.name), l && l.length > 0 && (console.log("Restoring payment amounts to new Sales Invoice..."), l.forEach((d) => {
                const u = this.invoice_doc.payments.find(
                  (f) => f.mode_of_payment === d.mode_of_payment
                );
                u && d.amount > 0 && (u.amount = d.amount, u.base_amount = d.base_amount || d.amount, console.log(`Restored ${d.mode_of_payment}: ${d.amount}`));
              }), console.log("Payment amounts successfully restored to Sales Invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("show_message", {
                title: __("Order submitted and converted to invoice for payment"),
                color: "success"
              });
            else
              throw new Error("Failed to convert submitted order to invoice");
          } else
            throw new Error("Failed to submit draft order");
        } catch (o) {
          console.error("Error submitting draft restaurant order:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting order: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      }
      if (this.invoice_doc.is_return && this.ensureReturnPaymentsAreNegative(), !this.is_credit_sale && !this.invoice_doc.is_return && this.total_payments <= 0 && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
        this.eventBus.emit("show_message", {
          title: "Please enter payment amount",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!this.is_credit_sale && !this.invoice_doc.is_return) {
        let o = !1, l = 0;
        if (this.invoice_doc.payments.forEach((s) => {
          s.mode_of_payment.toLowerCase().includes("cash") && (o = !0, l = this.flt(s.amount));
        }), o && l > 0 && !this.pos_profile.posa_allow_partial_payment && l < (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
          this.eventBus.emit("show_message", {
            title: "Cash payment cannot be less than invoice total when partial payment is not allowed",
            color: "error"
          }), frappe.utils.play_sound("error");
          return;
        }
      }
      if (!this.is_credit_sale && !this.pos_profile.posa_allow_partial_payment && this.total_payments < (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
        this.eventBus.emit("show_message", {
          title: "The amount paid is not complete",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      let a = !0;
      if (!t && (this.invoice_doc.payments.forEach((o) => {
        o.type === "Phone" && ![0, "0", "", null, void 0].includes(o.amount) && (a = !1);
      }), !a)) {
        this.eventBus.emit("show_message", {
          title: __("Please request phone payment or use another payment method"),
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (this.paid_change > -this.diff_payment) {
        this.eventBus.emit("show_message", {
          title: "Paid change cannot be greater than total change!",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      let r = this.flt(this.flt(this.paid_change) + this.flt(-this.credit_change));
      if (this.is_cashback && r !== -this.diff_payment) {
        this.eventBus.emit("show_message", {
          title: "Error in change calculations!",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (this.customer_credit_dict.filter((o) => this.flt(o.credit_to_redeem) > this.flt(o.total_credit)).length > 0) {
        this.eventBus.emit("show_message", {
          title: "Redeemed credit cannot be greater than its total.",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!this.invoice_doc.is_return && this.redeemed_customer_credit > (this.invoice_doc.rounded_total || this.invoice_doc.grand_total)) {
        this.eventBus.emit("show_message", {
          title: "Cannot redeem customer credit more than invoice total",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!sn())
        try {
          const o = this.invoice_doc.items.filter((s) => !s.is_bundle), l = await frappe.call({
            method: "posawesome.posawesome.api.invoices.validate_cart_items",
            args: {
              items: JSON.stringify(o),
              pos_profile: this.pos_profile.name
            }
          });
          if (l.message && l.message.length) {
            const s = l.message.map(
              (u) => `${u.item_code} (${u.warehouse}) - ${this.formatFloat(u.available_qty)}`
            ).join(`
`), d = !this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty;
            if (this.eventBus.emit("show_message", {
              title: d ? __(`Insufficient stock:
{0}`, [s]) : __(`Stock is lower than requested:
{0}`, [s]),
              color: d ? "error" : "warning"
            }), d) {
              frappe.utils.play_sound("error"), this.loading = !1;
              return;
            }
          }
        } catch (o) {
          console.error("Stock validation failed", o);
        }
      this.loading = !0, this.submit_invoice(n);
    },
    // Submit invoice to backend after all validations
    submit_invoice(e) {
      console.log("=== PAYMENTS.VUE SUBMIT_INVOICE START ==="), console.log("this.invoice_doc before get_invoice_doc():", {
        name: this.invoice_doc?.name,
        doctype: this.invoice_doc?.doctype,
        source_orders: this.invoice_doc?.source_orders,
        multi_order_names: this.invoice_doc?.multi_order_names,
        is_multi_order_consolidation: this.invoice_doc?.is_multi_order_consolidation
      });
      const t = this.get_invoice_doc();
      console.log("=== SUBMIT INVOICE DEBUG ==="), console.log("Original this.invoice_doc multi-order fields:", {
        source_orders: this.invoice_doc.source_orders,
        multi_order_names: this.invoice_doc.multi_order_names,
        is_multi_order_consolidation: this.invoice_doc.is_multi_order_consolidation
      }), console.log("Updated currentInvoiceDoc multi-order fields:", {
        source_orders: t.source_orders,
        multi_order_names: t.multi_order_names,
        is_multi_order_consolidation: t.is_multi_order_consolidation
      }), t.is_return && this.ensureReturnPaymentsAreNegative();
      let n = 0;
      t.payments.forEach((o) => {
        o.amount = this.flt(o.amount), n += o.amount;
      }), t.is_return && n === 0 && (t.is_pos = 0), this.customer_credit_dict.length && this.customer_credit_dict.forEach((o) => {
        o.credit_to_redeem = this.flt(o.credit_to_redeem);
      });
      let a = {
        total_change: t.is_return ? 0 : -this.diff_payment,
        paid_change: t.is_return ? 0 : this.paid_change,
        credit_change: -this.credit_change,
        redeemed_customer_credit: this.redeemed_customer_credit,
        customer_credit_dict: this.customer_credit_dict,
        is_cashback: this.is_cashback
      };
      const r = this;
      if (sn())
        try {
          _Q({ data: a, invoice: t }), this.eventBus.emit("pending_invoices_changed", $s()), r.eventBus.emit("show_message", {
            title: __("Invoice saved offline"),
            color: "warning"
          }), e && this.print_offline_invoice(t), r.eventBus.emit("clear_invoice"), r.eventBus.emit("reset_posting_date"), r.back_to_invoice(), r.loading = !1;
          return;
        } catch (o) {
          r.eventBus.emit("show_message", {
            title: __("Cannot Save Offline Invoice: ") + (o.message || __("Unknown error")),
            color: "error"
          }), r.loading = !1;
          return;
        }
      let i;
      t.doctype === "Sales Order" || this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order ? i = "posawesome.posawesome.api.sales_orders.submit_sales_order" : i = "posawesome.posawesome.api.invoices.submit_invoice", console.log("Submitting with method:", i, "for doctype:", t.doctype), console.log("Final invoice data being sent:", {
        name: t.name,
        doctype: t.doctype,
        source_orders: t.source_orders,
        multi_order_names: t.multi_order_names,
        is_multi_order_consolidation: t.is_multi_order_consolidation,
        customer: t.customer,
        grand_total: t.grand_total
      }), frappe.call({
        method: i,
        args: {
          data: a,
          invoice: t,
          order: t
        },
        callback: function(o) {
          if (o.exc) {
            console.error("Error submitting invoice:", o.exc);
            let l = o.exc.toString();
            l.includes("Amount must be negative") ? (r.eventBus.emit("show_message", {
              title: __("Fixing payment amounts for return invoice..."),
              color: "warning"
            }), r.invoice_doc.payments.forEach((s) => {
              s.amount > 0 && (s.amount = -Math.abs(s.amount)), s.base_amount > 0 && (s.base_amount = -Math.abs(s.base_amount));
            }), console.log("Retrying submission with fixed payment amounts"), setTimeout(() => {
              r.submit_invoice(e);
            }, 500)) : r.eventBus.emit("show_message", {
              title: __("Error submitting invoice: ") + l,
              color: "error"
            }), r.loading = !1;
            return;
          }
          if (!o.message) {
            r.eventBus.emit("show_message", {
              title: __("Error submitting invoice: No response from server"),
              color: "error"
            }), r.loading = !1;
            return;
          }
          e && r.load_print_page(), r.customer_credit_dict = [], r.redeem_customer_credit = !1, r.is_cashback = !0, r.is_credit_return = !1, r.sales_person = "", r.eventBus.emit("set_last_invoice", r.invoice_doc.name), r.eventBus.emit("show_message", {
            title: r.invoice_doc.doctype === "Sales Order" ? __("Sales Order {0} is Submitted", [o.message.name]) : __("Invoice {0} is Submitted", [o.message.name]),
            color: "success"
          }), frappe.utils.play_sound("submit"), ZO(r.invoice_doc.items || []), r.addresses = [], r.eventBus.emit("clear_invoice"), r.eventBus.emit("reset_posting_date"), r.back_to_invoice(), r.loading = !1;
        }
      });
    },
    // Set full amount for a payment method (or negative for returns)
    set_full_amount(e) {
      const t = this.invoice_doc.is_return || this.invoiceType === "Return";
      let n = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
      console.log("Setting full amount for payment method idx:", e), console.log("Current payments:", JSON.stringify(this.invoice_doc.payments)), this.invoice_doc.payments.forEach((i) => {
        i.amount = 0, i.base_amount !== void 0 && (i.base_amount = 0);
      });
      const a = event?.target?.textContent?.trim();
      console.log("Clicked button text:", a);
      const r = this.invoice_doc.payments.find(
        (i) => i.mode_of_payment === a
      );
      if (r) {
        console.log("Found clicked payment:", r.mode_of_payment);
        let i = t ? -Math.abs(n) : n;
        r.amount = i, r.base_amount !== void 0 && (r.base_amount = t ? -Math.abs(i) : i), console.log("Set amount for payment:", r.mode_of_payment, "amount:", i);
      } else
        console.log("No payment found for button text:", a);
      this.$forceUpdate();
    },
    // Set remaining amount for a payment method when focused
    set_rest_amount(e) {
      const t = this.invoice_doc.is_return || this.invoiceType === "Return";
      this.invoice_doc.payments.forEach((n) => {
        if (n.idx === e && n.amount === 0 && this.diff_payment > 0) {
          let a = this.diff_payment;
          t && (a = -Math.abs(a)), n.amount = a, n.base_amount !== void 0 && (n.base_amount = t ? -Math.abs(a) : a);
        }
      });
    },
    // Clear all payment amounts
    clear_all_amounts() {
      this.invoice_doc.payments.forEach((e) => {
        e.amount = 0;
      });
    },
    // Open print page for invoice
    load_print_page() {
      const e = this.pos_profile.print_format_for_online || this.pos_profile.print_format, t = this.pos_profile.letter_head || 0, n = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", a = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(n) + "&name=" + this.invoice_doc.name + "&trigger_print=1&format=" + e + "&no_letterhead=" + t;
      if (this.pos_profile.posa_silent_print)
        Fp(a);
      else {
        const r = window.open(a, "Print");
        r.addEventListener(
          "load",
          function() {
            r.print();
          },
          { once: !0 }
        );
      }
    },
    // Print invoice using a more detailed offline template
    async print_offline_invoice(e) {
      if (!e) return;
      const t = await _ae(e), n = window.open("", "_blank");
      n.document.write(t), n.document.close(), n.focus(), n.print();
    },
    // Validate due date (should not be in the past)
    validate_due_date() {
      const e = frappe.datetime.now_date(), t = Date.parse(this.invoice_doc.due_date), n = Date.parse(e);
      t < n && (this.invoice_doc.due_date = e);
    },
    // Keyboard shortcut for payment submit (Ctrl+X)
    shortPay(e) {
      e.key.toLowerCase() === "x" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), e.stopPropagation(), this.invoice_doc && this.invoice_doc.payments && this.submit_invoice());
    },
    // Get available customer credit and auto-allocate
    get_available_credit(e) {
      this.clear_all_amounts(), e ? frappe.call("posawesome.posawesome.api.payments.get_available_credit", {
        customer: this.invoice_doc.customer,
        company: this.pos_profile.company
      }).then((t) => {
        const n = t.message;
        if (n.length) {
          let r = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
          n.forEach((i) => {
            r > 0 ? r >= i.total_credit ? (i.credit_to_redeem = i.total_credit, r -= i.total_credit) : (i.credit_to_redeem = r, r = 0) : i.credit_to_redeem = 0;
          }), this.customer_credit_dict = n;
        } else
          this.customer_credit_dict = [];
      }) : this.customer_credit_dict = [];
    },
    // Get customer addresses for shipping
    get_addresses() {
      const e = this;
      if (!e.invoice_doc || !e.invoice_doc.customer) {
        e.addresses = [];
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.customers.get_customer_addresses",
        args: { customer: e.invoice_doc.customer },
        async: !0,
        callback: function(t) {
          t.exc ? e.addresses = [] : e.addresses = t.message;
        }
      });
    },
    // Filter addresses for autocomplete
    addressFilter(e, t) {
      const n = t.toLowerCase();
      return e.address_title && e.address_title.toLowerCase().includes(n) || e.address_line1 && e.address_line1.toLowerCase().includes(n) || e.address_line2 && e.address_line2.toLowerCase().includes(n) || e.city && e.city.toLowerCase().includes(n) || e.name && e.name.toLowerCase().includes(n);
    },
    // Open dialog to add new address
    new_address() {
      if (!this.invoice_doc || !this.invoice_doc.customer) {
        this.eventBus.emit("show_message", {
          title: __("Please select a customer first"),
          color: "error"
        });
        return;
      }
      this.eventBus.emit("open_new_address", this.invoice_doc.customer);
    },
    // Get sales person names from API/localStorage
    get_sales_person_names() {
      const e = this;
      if (e.pos_profile.posa_local_storage && AA().length)
        try {
          e.sales_persons = AA();
        } catch (t) {
          console.error(t);
        }
      frappe.call({
        method: "posawesome.posawesome.api.utilities.get_sales_person_names",
        callback: function(t) {
          t.message && t.message.length > 0 ? (e.sales_persons = t.message.map((n) => ({
            value: n.name,
            title: n.sales_person_name,
            sales_person_name: n.sales_person_name,
            name: n.name
          })), e.pos_profile.posa_local_storage && K9(e.sales_persons)) : e.sales_persons = [];
        }
      });
    },
    // Request payment for phone type
    request_payment() {
      this.phone_dialog = !1;
      const e = this;
      if (!this.invoice_doc.contact_mobile) {
        this.eventBus.emit("show_message", {
          title: __("Please set the customer's mobile number"),
          color: "error"
        }), this.eventBus.emit("open_edit_customer"), this.back_to_invoice();
        return;
      }
      this.eventBus.emit("freeze", { title: __("Waiting for payment...") }), this.invoice_doc.payments.forEach((n) => {
        n.amount = this.flt(n.amount);
      });
      let t = { ...this.invoice_doc };
      t.total_change = this.invoice_doc.is_return ? 0 : -this.diff_payment, t.paid_change = this.invoice_doc.is_return ? 0 : this.paid_change, t.credit_change = -this.credit_change, t.redeemed_customer_credit = this.redeemed_customer_credit, t.customer_credit_dict = this.customer_credit_dict, t.is_cashback = this.is_cashback, frappe.call({
        method: "posawesome.posawesome.api.invoices.update_invoice",
        args: { data: t },
        async: !1,
        callback: function(n) {
          n.message && (e.invoice_doc = n.message);
        }
      }).then(() => {
        frappe.call({
          method: "posawesome.posawesome.api.payments.create_payment_request",
          args: { doc: e.invoice_doc }
        }).fail(() => {
          e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
            title: __("Payment request failed"),
            color: "error"
          });
        }).then(({ message: n }) => {
          const a = n.name;
          setTimeout(() => {
            frappe.db.get_value("Payment Request", a, [
              "status",
              "grand_total"
            ]).then(({ message: r }) => {
              r.status !== "Paid" ? (e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
                title: __(
                  "Payment Request took too long to respond. Please try requesting for payment again"
                ),
                color: "error"
              })) : (e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
                title: __("Payment of {0} received successfully.", [
                  e.formatCurrency(
                    r.grand_total,
                    e.invoice_doc.currency,
                    0
                  )
                ]),
                color: "success"
              }), frappe.db.get_doc(e.invoice_doc.doctype, e.invoice_doc.name).then((i) => {
                e.invoice_doc = i, e.submit(null, !0);
              }));
            });
          }, 3e4);
        });
      });
    },
    // Get M-Pesa payment modes from backend
    get_mpesa_modes() {
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.m_pesa.get_mpesa_mode_of_payment",
        args: { company: e.pos_profile.company },
        async: !0,
        callback: function(t) {
          t.exc ? e.mpesa_modes = [] : e.mpesa_modes = t.message;
        }
      });
    },
    // Check if payment is M-Pesa C2B
    is_mpesa_c2b_payment(e) {
      return this.mpesa_modes.includes(e.mode_of_payment) && e.type === "Bank" ? (e.amount = 0, !0) : !1;
    },
    // Open M-Pesa payment dialog
    mpesa_c2b_dialog(e) {
      const t = {
        company: this.pos_profile.company,
        mode_of_payment: e.mode_of_payment,
        customer: this.invoice_doc.customer
      };
      this.eventBus.emit("open_mpesa_payments", t);
    },
    // Set M-Pesa payment as customer credit
    set_mpesa_payment(e) {
      this.pos_profile.use_customer_credit = !0, this.redeem_customer_credit = !0;
      const t = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
      let n = e.unallocated_amount > t ? t : e.unallocated_amount;
      n = n > 0 ? n : 0;
      const a = {
        type: "Advance",
        credit_origin: e.name,
        total_credit: this.flt(e.unallocated_amount),
        credit_to_redeem: this.flt(n)
      };
      this.clear_all_amounts(), this.customer_credit_dict.push(a);
    },
    // Update delivery date after selection
    update_delivery_date() {
      this.invoice_doc.posa_delivery_date = this.formatDate(this.new_delivery_date), this.invoice_doc.customer && (!this.addresses || this.addresses.length === 0) && this.get_addresses();
    },
    // Update purchase order date after selection
    update_po_date() {
      this.invoice_doc.po_date = this.formatDate(this.new_po_date);
    },
    // Update credit due date after selection
    update_credit_due_date() {
      this.invoice_doc.due_date = this.formatDate(this.new_credit_due_date);
    },
    // Apply preset or typed number of days to set due date
    applyDuePreset(e) {
      if (e === null || e === "")
        return;
      const t = Rt.fromArabicNumerals(String(e));
      if (isNaN(t))
        return;
      const n = parseInt(t, 10), a = /* @__PURE__ */ new Date();
      a.setDate(a.getDate() + n), this.new_credit_due_date = this.formatDateDisplay(a), this.credit_due_days = n, this.update_credit_due_date();
    },
    // Apply days entered in dialog
    applyCustomDays() {
      this.applyDuePreset(this.custom_days_value), this.custom_days_dialog = !1;
    },
    // Format date to YYYY-MM-DD
    formatDate(e) {
      if (!e) return null;
      if (typeof e == "string") {
        const n = Rt.fromArabicNumerals(e);
        if (/^\d{4}-\d{2}-\d{2}$/.test(n))
          return n;
        if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(n)) {
          const [a, r, i] = n.split("-");
          return `${i}-${r.padStart(2, "0")}-${a.padStart(2, "0")}`;
        }
        e = n;
      }
      const t = new Date(Rt.fromArabicNumerals(String(e)));
      if (!isNaN(t.getTime())) {
        const n = t.getFullYear(), a = `0${t.getMonth() + 1}`.slice(-2), r = `0${t.getDate()}`.slice(-2);
        return `${n}-${a}-${r}`;
      }
      return Rt.fromArabicNumerals(String(e));
    },
    formatDateDisplay(e) {
      if (!e) return "";
      const t = Rt.fromArabicNumerals(String(e));
      if (typeof e == "string" && /^\d{4}-\d{2}-\d{2}$/.test(t)) {
        const [a, r, i] = t.split("-");
        return Rt.toArabicNumerals(`${i}-${r}-${a}`);
      }
      const n = new Date(t);
      if (!isNaN(n.getTime())) {
        const a = n.getFullYear(), r = `0${n.getMonth() + 1}`.slice(-2), i = `0${n.getDate()}`.slice(-2);
        return Rt.toArabicNumerals(`${i}-${r}-${a}`);
      }
      return Rt.toArabicNumerals(t);
    },
    // Show paid amount info message
    showPaidAmount() {
      this.eventBus.emit("show_message", {
        title: `Total Paid Amount: ${this.formatCurrency(this.total_payments)}`,
        color: "info"
      });
    },
    // Show diff payment info message
    showDiffPayment() {
      this.invoice_doc && this.eventBus.emit("show_message", {
        title: `To Be Paid: ${this.formatCurrency(this.diff_payment)}`,
        color: "info"
      });
    },
    // Show paid change info message
    showPaidChange() {
      this.eventBus.emit("show_message", {
        title: `Paid Change: ${this.formatCurrency(this.paid_change)}`,
        color: "info"
      });
    },
    // Show credit change info message
    showCreditChange(e) {
      e > 0 ? (this.credit_change = e, this.paid_change = -this.diff_payment) : this.credit_change = 0;
    },
    // Get reason why submit buttons are disabled (for debugging)
    getDisabledReason() {
      return this.loading ? "Loading in progress" : this.invoice_doc ? this.pos_profile.posa_enable_restaurant_mode ? "Restaurant mode - buttons should be enabled" : this.pos_profile.posa_allow_sales_order && this.invoiceType === "Order" && !this.invoice_doc.posa_delivery_date ? "Delivery date required for sales order" : "Unknown reason" : "No invoice document";
    },
    // Format currency value
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, this.currency_precision);
    },
    // Get change amount for display
    get_change_amount() {
      return Math.max(0, this.total_payments - this.invoice_doc.grand_total);
    },
    // Sync any invoices stored offline and show pending/synced counts
    async syncPendingInvoices() {
      const e = $s();
      if (e && (this.eventBus.emit("show_message", {
        title: `${e} invoice${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), this.eventBus.emit("pending_invoices_changed", e)), sn())
        return;
      const t = await tD();
      t && (t.synced || t.drafted) && (t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline invoice${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      }), t.drafted && this.eventBus.emit("show_message", {
        title: `${t.drafted} offline invoice${t.drafted > 1 ? "s" : ""} saved as draft`,
        color: "warning"
      })), this.eventBus.emit("pending_invoices_changed", $s());
    },
    // Get invoice document with all custom fields preserved
    get_invoice_doc() {
      console.log("=== PAYMENTS.VUE GET_INVOICE_DOC CALLED ==="), console.log("Original this.invoice_doc:", {
        name: this.invoice_doc?.name,
        doctype: this.invoice_doc?.doctype,
        source_orders: this.invoice_doc?.source_orders,
        multi_order_names: this.invoice_doc?.multi_order_names,
        is_multi_order_consolidation: this.invoice_doc?.is_multi_order_consolidation,
        is_multi_order_edit: this.invoice_doc?.is_multi_order_edit
      });
      let e = JSON.parse(JSON.stringify(this.invoice_doc));
      return this.invoice_doc.source_orders ? (e.source_orders = this.invoice_doc.source_orders, console.log("Preserved source_orders:", e.source_orders)) : console.log("❌ WARNING: source_orders NOT FOUND in this.invoice_doc"), this.invoice_doc.multi_order_names ? (e.multi_order_names = this.invoice_doc.multi_order_names, console.log("Preserved multi_order_names:", e.multi_order_names)) : console.log("❌ WARNING: multi_order_names NOT FOUND in this.invoice_doc"), this.invoice_doc.is_multi_order_consolidation ? (e.is_multi_order_consolidation = this.invoice_doc.is_multi_order_consolidation, console.log("Preserved is_multi_order_consolidation:", e.is_multi_order_consolidation)) : console.log("❌ WARNING: is_multi_order_consolidation NOT FOUND in this.invoice_doc"), this.invoice_doc.is_multi_order_edit ? (e.is_multi_order_edit = this.invoice_doc.is_multi_order_edit, console.log("Preserved is_multi_order_edit:", e.is_multi_order_edit)) : console.log("INFO: is_multi_order_edit not found (may be normal)"), console.log("Final document with preserved fields:", {
        name: e.name,
        doctype: e.doctype,
        source_orders: e.source_orders,
        multi_order_names: e.multi_order_names,
        is_multi_order_consolidation: e.is_multi_order_consolidation,
        is_multi_order_edit: e.is_multi_order_edit
      }), e;
    }
  },
  // Lifecycle hook: created
  created() {
    document.addEventListener("keydown", this.shortPay.bind(this)), this.syncPendingInvoices(), this.eventBus.on("network-online", this.syncPendingInvoices), this.eventBus.on("server-online", this.syncPendingInvoices);
  },
  // Lifecycle hook: mounted
  mounted() {
    this.$nextTick(() => {
      this.eventBus.on("send_invoice_doc_payment", (e) => {
        console.log("Payments component received invoice doc:", {
          name: e.name,
          doctype: e.doctype,
          is_return: e.is_return,
          grand_total: e.grand_total,
          current_invoiceType: this.invoiceType
        }), this.invoice_doc = e, e.doctype === "Sales Invoice" || e.doctype === "POS Invoice" ? (this.invoiceType = "Invoice", console.log("Set invoice type to 'Invoice' based on doctype:", e.doctype)) : e.doctype === "Sales Order" && (this.invoiceType = "Order", console.log("Set invoice type to 'Order' based on doctype:", e.doctype));
        const t = this.invoice_doc.payments.find((n) => n.default === 1);
        if (this.is_credit_sale = !1, this.is_write_off_change = !1, e.is_return) {
          if (this.is_return = !0, this.is_credit_return = !1, e.payments.forEach((n) => {
            n.amount = 0, n.base_amount = 0;
          }), t) {
            const n = e.rounded_total || e.grand_total;
            t.amount = -Math.abs(n), t.base_amount !== void 0 && (t.base_amount = -Math.abs(n));
          }
        } else t && (t.amount = this.flt(
          e.rounded_total || e.grand_total,
          this.currency_precision
        ), this.is_credit_return = !1);
        this.loyalty_amount = 0, this.redeemed_customer_credit = 0, e.customer && this.get_addresses(), this.get_sales_person_names(), this.$forceUpdate(), console.log("Payments component setup complete, invoice type:", this.invoiceType);
      }), this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile, this.stock_settings = e.stock_settings || {}, this.get_mpesa_modes();
      }), this.eventBus.on("add_the_new_address", (e) => {
        this.addresses.push(e), this.$forceUpdate();
      }), this.eventBus.on("update_invoice_type", (e) => {
        console.log("Payments component received invoice type update:", e), this.invoiceType = e, this.invoice_doc && e !== "Order" ? (this.invoice_doc.posa_delivery_date = null, this.invoice_doc.posa_notes = null, this.invoice_doc.shipping_address_name = null) : this.invoice_doc && e === "Order" && (this.new_delivery_date = this.formatDateDisplay(frappe.datetime.now_date()), this.update_delivery_date()), this.invoice_doc && e === "Return" && (this.invoice_doc.is_return = 1, this.ensureReturnPaymentsAreNegative(), this.is_credit_return = !1), this.$forceUpdate(), console.log("Payments component updated invoice type to:", this.invoiceType);
      }), this.eventBus.on("change_invoice_type", (e) => {
        console.log("Payments component received change_invoice_type:", e), this.invoiceType = e, this.$forceUpdate(), console.log("Payments component changed invoice type to:", this.invoiceType);
      }), this.eventBus.on("update_customer", (e) => {
        this.customer !== e && (this.customer_credit_dict = [], this.redeem_customer_credit = !1, this.is_cashback = !0, this.is_credit_return = !1);
      }), this.eventBus.on("set_pos_settings", (e) => {
        this.pos_settings = e;
      }), this.eventBus.on("set_customer_info_to_edit", (e) => {
        this.customer_info = e;
      }), this.eventBus.on("set_mpesa_payment", (e) => {
        this.set_mpesa_payment(e);
      }), this.eventBus.on("clear_invoice", () => {
        this.invoice_doc = "", this.is_return = !1, this.is_credit_return = !1;
      }), this.eventBus.on("show_payment", this.handleShowPayment);
    });
  },
  // Lifecycle hook: beforeUnmount
  beforeUnmount() {
    this.eventBus.off("send_invoice_doc_payment"), this.eventBus.off("register_pos_profile"), this.eventBus.off("add_the_new_address"), this.eventBus.off("update_invoice_type"), this.eventBus.off("change_invoice_type"), this.eventBus.off("update_customer"), this.eventBus.off("set_pos_settings"), this.eventBus.off("set_customer_info_to_edit"), this.eventBus.off("set_mpesa_payment"), this.eventBus.off("clear_invoice"), this.eventBus.off("network-online", this.syncPendingInvoices), this.eventBus.off("server-online", this.syncPendingInvoices), this.eventBus.off("show_payment", this.handleShowPayment);
  },
  // Lifecycle hook: unmounted
  unmounted() {
    document.removeEventListener("keydown", this.shortPay);
  }
}, vae = { class: "pa-0" }, gae = {
  ref: "paymentContainer",
  class: "overflow-y-auto pa-2",
  style: { "max-height": "67vh" }
}, yae = { key: 1 }, bae = ["innerHTML"], wae = ["innerHTML"], kae = ["innerHTML"], Sae = ["innerHTML"], Cae = ["innerHTML"], Aae = ["innerHTML"], xae = ["innerHTML"], Tae = ["innerHTML"], Iae = { key: 4 }, Eae = { class: "mt-1" }, Pae = { key: 5 }, Oae = { class: "pa-2 py-3" }, Dae = {
  key: 0,
  class: "mt-1 mb-1 text-subtitle-2"
}, Bae = {
  key: 1,
  class: "mt-1 mb-1 text-subtitle-2 text-red"
}, Vae = { class: "text-h5 text-primary" };
function Mae(e, t, n, a, r, i) {
  const o = J("v-progress-linear"), l = J("v-text-field"), s = J("v-col"), d = J("v-row"), u = J("v-divider"), f = J("v-btn"), _ = J("VueDatePicker"), g = J("v-list-item-title"), v = J("v-list-item-subtitle"), w = J("v-list-item"), b = J("v-autocomplete"), p = J("v-textarea"), y = J("v-switch"), S = J("v-chip"), E = J("v-select"), C = J("v-card"), B = J("v-tooltip"), O = J("v-card-title"), D = J("v-container"), T = J("v-card-text"), P = J("v-spacer"), I = J("v-card-actions"), M = J("v-dialog");
  return ne(), Be("div", vae, [
    h(C, {
      class: Ee(["selection mx-auto pa-1 my-0 mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "68vh", height: "68vh" }])
    }, {
      default: x(() => [
        h(o, {
          active: r.loading,
          indeterminate: r.loading,
          absolute: "",
          location: "top",
          color: "info"
        }, null, 8, ["active", "indeterminate"]),
        A("div", gae, [
          r.invoice_doc ? (ne(), Fe(d, {
            key: 0,
            class: "pa-1",
            dense: ""
          }, {
            default: x(() => [
              h(s, { cols: "7" }, {
                default: x(() => [
                  h(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Paid Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    modelValue: i.total_payments_display,
                    "onUpdate:modelValue": t[0] || (t[0] = (V) => i.total_payments_display = V),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    onClick: i.showPaidAmount
                  }, null, 8, ["label", "bg-color", "modelValue", "prefix", "onClick"])
                ]),
                _: 1
              }),
              h(s, { cols: "5" }, {
                default: x(() => [
                  h(l, {
                    variant: "solo",
                    color: "primary",
                    label: "To Be Paid",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    modelValue: i.diff_payment_display,
                    "onUpdate:modelValue": t[1] || (t[1] = (V) => i.diff_payment_display = V),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    onFocus: i.showDiffPayment,
                    "persistent-placeholder": ""
                  }, null, 8, ["bg-color", "modelValue", "prefix", "onFocus"])
                ]),
                _: 1
              }),
              i.credit_change > 0 && !r.invoice_doc.is_return ? (ne(), Fe(s, {
                key: 0,
                cols: "7"
              }, {
                default: x(() => [
                  h(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Paid Change"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(r.paid_change),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    rules: r.paid_change_rules,
                    density: "compact",
                    readonly: "",
                    type: "text",
                    onClick: i.showPaidChange
                  }, null, 8, ["label", "bg-color", "model-value", "prefix", "rules", "onClick"])
                ]),
                _: 1
              })) : ke("", !0),
              i.credit_change > 0 && !r.invoice_doc.is_return ? (ne(), Fe(s, {
                key: 1,
                cols: "5"
              }, {
                default: x(() => [
                  h(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Credit Change"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(i.credit_change),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    type: "text",
                    onChange: t[2] || (t[2] = (V) => {
                      e.setFormatedCurrency(this, "credit_change", null, !1, V), e.updateCreditChange(this.credit_change);
                    })
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          })) : ke("", !0),
          h(u),
          r.is_cashback ? (ne(), Be("div", yae, [
            (ne(!0), Be(Qe, null, un(r.invoice_doc.payments, (V) => (ne(), Fe(d, {
              class: "payments pa-1",
              key: V.name
            }, {
              default: x(() => [
                i.is_mpesa_c2b_payment(V) ? ke("", !0) : (ne(), Fe(s, {
                  key: 0,
                  cols: "6"
                }, {
                  default: x(() => [
                    h(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._(V.mode_of_payment),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      "model-value": i.formatCurrency(V.amount),
                      onChange: (N) => e.setFormatedCurrency(V, "amount", null, !1, N),
                      rules: [
                        e.isNumber,
                        (N) => !V.mode_of_payment.toLowerCase().includes("cash") || this.is_credit_sale || N >= (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) || "Cash payment cannot be less than invoice total when credit sale is off"
                      ],
                      prefix: i.currencySymbol(r.invoice_doc.currency),
                      onFocus: (N) => i.set_rest_amount(V.idx),
                      readonly: r.invoice_doc.is_return
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "rules", "prefix", "onFocus", "readonly"])
                  ]),
                  _: 2
                }, 1024)),
                i.is_mpesa_c2b_payment(V) ? ke("", !0) : (ne(), Fe(s, {
                  key: 1,
                  cols: "6"
                }, {
                  default: x(() => [
                    h(f, {
                      block: "",
                      color: "primary",
                      theme: "dark",
                      onClick: (N) => i.set_full_amount(V.idx)
                    }, {
                      default: x(() => [
                        ae(W(V.mode_of_payment), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ]),
                  _: 2
                }, 1024)),
                i.is_mpesa_c2b_payment(V) ? (ne(), Fe(s, {
                  key: 2,
                  cols: "12",
                  class: "pl-3"
                }, {
                  default: x(() => [
                    h(f, {
                      block: "",
                      color: "success",
                      theme: "dark",
                      onClick: (N) => i.mpesa_c2b_dialog(V)
                    }, {
                      default: x(() => [
                        ae(W(e.__("Get Payments")) + " " + W(V.mode_of_payment), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ]),
                  _: 2
                }, 1024)) : ke("", !0),
                V.type === "Phone" && V.amount > 0 && i.request_payment_field ? (ne(), Fe(s, {
                  key: 3,
                  cols: "3",
                  class: "pl-1"
                }, {
                  default: x(() => [
                    h(f, {
                      block: "",
                      color: "success",
                      theme: "dark",
                      disabled: V.amount === 0,
                      onClick: (N) => i.request_payment(V)
                    }, {
                      default: x(() => [
                        ae(W(e.__("Request")), 1)
                      ]),
                      _: 2
                    }, 1032, ["disabled", "onClick"])
                  ]),
                  _: 2
                }, 1024)) : ke("", !0)
              ]),
              _: 2
            }, 1024))), 128))
          ])) : ke("", !0),
          r.invoice_doc && i.available_points_amount > 0 && !r.invoice_doc.is_return ? (ne(), Fe(d, {
            key: 2,
            class: "payments pa-1"
          }, {
            default: x(() => [
              h(s, { cols: "7" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Redeem Loyalty Points"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.loyalty_amount),
                    type: "text",
                    onChange: t[3] || (t[3] = (V) => e.setFormatedCurrency(this, "loyalty_amount", null, !1, V)),
                    prefix: i.currencySymbol(r.invoice_doc.currency)
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "5" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("You can redeem up to"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": e.formatFloat(i.available_points_amount),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })) : ke("", !0),
          r.invoice_doc && i.available_customer_credit > 0 && !r.invoice_doc.is_return && r.redeem_customer_credit ? (ne(), Fe(d, {
            key: 3,
            class: "payments pa-1"
          }, {
            default: x(() => [
              h(s, { cols: "7" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Redeemed Customer Credit"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.redeemed_customer_credit),
                    type: "text",
                    onChange: t[4] || (t[4] = (V) => e.setFormatedCurrency(this, "redeemed_customer_credit", null, !1, V)),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "5" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("You can redeem credit up to"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(i.available_customer_credit),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })) : ke("", !0),
          h(u),
          h(d, { class: "pa-1" }, {
            default: x(() => [
              h(s, { cols: "6" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Net Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(r.invoice_doc.net_total, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "6" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Tax and Charges"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.total_taxes_and_charges, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "6" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Total Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.total, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "6" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: i.diff_label,
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(i.diff_payment, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "6" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Discount Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.discount_amount),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              h(s, { cols: "6" }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Grand Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.grand_total),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              r.invoice_doc.rounded_total ? (ne(), Fe(s, {
                key: 0,
                cols: "6"
              }, {
                default: x(() => [
                  h(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Rounded Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.rounded_total),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })) : ke("", !0),
              r.pos_profile.posa_allow_sales_order && r.invoiceType === "Order" ? (ne(), Fe(s, {
                key: 1,
                cols: "6"
              }, {
                default: x(() => [
                  h(_, {
                    modelValue: r.new_delivery_date,
                    "onUpdate:modelValue": [
                      t[5] || (t[5] = (V) => r.new_delivery_date = V),
                      t[6] || (t[6] = (V) => i.update_delivery_date())
                    ],
                    "model-type": "format",
                    format: "dd-MM-yyyy",
                    "min-date": /* @__PURE__ */ new Date(),
                    "auto-apply": "",
                    dark: i.isDarkTheme,
                    class: "dark-field sleek-field"
                  }, null, 8, ["modelValue", "min-date", "dark"])
                ]),
                _: 1
              })) : ke("", !0),
              r.invoice_doc.posa_delivery_date ? (ne(), Fe(s, {
                key: 2,
                cols: "12"
              }, {
                default: x(() => [
                  h(b, {
                    density: "compact",
                    clearable: "",
                    "auto-select-first": "",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Address"),
                    modelValue: r.invoice_doc.shipping_address_name,
                    "onUpdate:modelValue": t[7] || (t[7] = (V) => r.invoice_doc.shipping_address_name = V),
                    items: r.addresses,
                    "item-title": "address_title",
                    "item-value": "name",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "no-data-text": e.__("Address not found"),
                    "hide-details": "",
                    customFilter: i.addressFilter,
                    "append-icon": "mdi-plus",
                    "onClick:append": i.new_address
                  }, {
                    item: x(({ item: V }) => [
                      h(w, null, {
                        default: x(() => [
                          h(g, { class: "text-primary text-subtitle-1" }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.address_title
                              }, null, 8, bae)
                            ]),
                            _: 2
                          }, 1024),
                          h(v, null, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.address_line1
                              }, null, 8, wae)
                            ]),
                            _: 2
                          }, 1024),
                          V.address_line2 ? (ne(), Fe(v, { key: 0 }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.address_line2
                              }, null, 8, kae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          V.city ? (ne(), Fe(v, { key: 1 }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.city
                              }, null, 8, Sae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          V.state ? (ne(), Fe(v, { key: 2 }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.state
                              }, null, 8, Cae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          V.country ? (ne(), Fe(v, { key: 3 }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.country
                              }, null, 8, Aae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          V.mobile_no ? (ne(), Fe(v, { key: 4 }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.mobile_no
                              }, null, 8, xae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          V.address_type ? (ne(), Fe(v, { key: 5 }, {
                            default: x(() => [
                              A("div", {
                                innerHTML: V.address_type
                              }, null, 8, Tae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0)
                        ]),
                        _: 2
                      }, 1024)
                    ]),
                    _: 1
                  }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "customFilter", "onClick:append"])
                ]),
                _: 1
              })) : ke("", !0),
              r.pos_profile.posa_display_additional_notes ? (ne(), Fe(s, {
                key: 3,
                cols: "12"
              }, {
                default: x(() => [
                  h(p, {
                    class: "pa-0 dark-field sleek-field",
                    variant: "solo",
                    density: "compact",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    clearable: "",
                    color: "primary",
                    "auto-grow": "",
                    rows: "2",
                    label: e.frappe._("Additional Notes"),
                    modelValue: r.invoice_doc.posa_notes,
                    "onUpdate:modelValue": t[8] || (t[8] = (V) => r.invoice_doc.posa_notes = V)
                  }, null, 8, ["bg-color", "label", "modelValue"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          }),
          r.pos_profile.posa_allow_customer_purchase_order ? (ne(), Be("div", Iae, [
            h(u),
            h(d, {
              class: "pa-1",
              justify: "center",
              align: "start"
            }, {
              default: x(() => [
                h(s, { cols: "6" }, {
                  default: x(() => [
                    h(l, {
                      modelValue: r.invoice_doc.po_no,
                      "onUpdate:modelValue": t[9] || (t[9] = (V) => r.invoice_doc.po_no = V),
                      label: e.frappe._("Purchase Order"),
                      variant: "solo",
                      density: "compact",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      clearable: "",
                      color: "primary",
                      "hide-details": ""
                    }, null, 8, ["modelValue", "label", "bg-color"])
                  ]),
                  _: 1
                }),
                h(s, { cols: "6" }, {
                  default: x(() => [
                    h(_, {
                      modelValue: r.new_po_date,
                      "onUpdate:modelValue": [
                        t[10] || (t[10] = (V) => r.new_po_date = V),
                        t[11] || (t[11] = (V) => i.update_po_date())
                      ],
                      "model-type": "format",
                      format: "dd-MM-yyyy",
                      "min-date": /* @__PURE__ */ new Date(),
                      "auto-apply": "",
                      dark: i.isDarkTheme,
                      class: "dark-field sleek-field"
                    }, null, 8, ["modelValue", "min-date", "dark"]),
                    h(l, {
                      modelValue: r.invoice_doc.po_date,
                      "onUpdate:modelValue": t[12] || (t[12] = (V) => r.invoice_doc.po_date = V),
                      label: e.frappe._("Purchase Order Date"),
                      readonly: "",
                      variant: "solo",
                      density: "compact",
                      "hide-details": "",
                      color: "primary"
                    }, null, 8, ["modelValue", "label"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ])) : ke("", !0),
          h(u),
          h(d, {
            class: "pa-1",
            align: "start",
            "no-gutters": ""
          }, {
            default: x(() => [
              r.pos_profile.posa_allow_write_off_change && i.credit_change > 0 && !r.invoice_doc.is_return ? (ne(), Fe(s, {
                key: 0,
                cols: "6"
              }, {
                default: x(() => [
                  h(y, {
                    modelValue: r.is_write_off_change,
                    "onUpdate:modelValue": t[13] || (t[13] = (V) => r.is_write_off_change = V),
                    flat: "",
                    label: e.frappe._("Write Off Difference Amount"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.pos_profile.posa_allow_credit_sale && !r.invoice_doc.is_return ? (ne(), Fe(s, {
                key: 1,
                cols: "6"
              }, {
                default: x(() => [
                  h(y, {
                    modelValue: r.is_credit_sale,
                    "onUpdate:modelValue": t[14] || (t[14] = (V) => r.is_credit_sale = V),
                    label: e.frappe._("Credit Sale?")
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.invoice_doc.is_return && r.pos_profile.use_cashback ? (ne(), Fe(s, {
                key: 2,
                cols: "6"
              }, {
                default: x(() => [
                  h(y, {
                    modelValue: r.is_cashback,
                    "onUpdate:modelValue": t[15] || (t[15] = (V) => r.is_cashback = V),
                    flat: "",
                    label: e.frappe._("Cashback?"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.invoice_doc.is_return ? (ne(), Fe(s, {
                key: 3,
                cols: "6"
              }, {
                default: x(() => [
                  h(y, {
                    modelValue: r.is_credit_return,
                    "onUpdate:modelValue": t[16] || (t[16] = (V) => r.is_credit_return = V),
                    flat: "",
                    label: e.frappe._("Credit Return?"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.is_credit_sale ? (ne(), Fe(s, {
                key: 4,
                cols: "6"
              }, {
                default: x(() => [
                  h(_, {
                    modelValue: r.new_credit_due_date,
                    "onUpdate:modelValue": [
                      t[17] || (t[17] = (V) => r.new_credit_due_date = V),
                      t[18] || (t[18] = (V) => i.update_credit_due_date())
                    ],
                    "model-type": "format",
                    format: "dd-MM-yyyy",
                    "min-date": /* @__PURE__ */ new Date(),
                    "auto-apply": "",
                    dark: i.isDarkTheme,
                    class: "dark-field sleek-field"
                  }, null, 8, ["modelValue", "min-date", "dark"]),
                  h(l, {
                    class: "mt-2 dark-field sleek-field",
                    density: "compact",
                    variant: "solo",
                    type: "number",
                    min: "0",
                    max: "365",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    modelValue: r.credit_due_days,
                    "onUpdate:modelValue": t[19] || (t[19] = (V) => r.credit_due_days = V),
                    modelModifiers: { number: !0 },
                    label: e.frappe._("Days until due"),
                    "hide-details": "",
                    onChange: t[20] || (t[20] = (V) => i.applyDuePreset(r.credit_due_days))
                  }, null, 8, ["bg-color", "modelValue", "label"]),
                  A("div", Eae, [
                    (ne(!0), Be(Qe, null, un(r.credit_due_presets, (V) => (ne(), Fe(S, {
                      key: V,
                      size: "small",
                      class: "ma-1",
                      variant: "solo",
                      color: "primary",
                      onClick: (N) => i.applyDuePreset(V)
                    }, {
                      default: x(() => [
                        ae(W(V) + " " + W(e.frappe._("days")), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"]))), 128))
                  ])
                ]),
                _: 1
              })) : ke("", !0),
              !r.invoice_doc.is_return && r.pos_profile.use_customer_credit ? (ne(), Fe(s, {
                key: 5,
                cols: "6"
              }, {
                default: x(() => [
                  h(y, {
                    modelValue: r.redeem_customer_credit,
                    "onUpdate:modelValue": [
                      t[21] || (t[21] = (V) => r.redeem_customer_credit = V),
                      t[22] || (t[22] = (V) => i.get_available_credit(r.redeem_customer_credit))
                    ],
                    flat: "",
                    label: e.frappe._("Use Customer Credit"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          }),
          r.invoice_doc && i.available_customer_credit > 0 && !r.invoice_doc.is_return && r.redeem_customer_credit ? (ne(), Be("div", Pae, [
            (ne(!0), Be(Qe, null, un(r.customer_credit_dict, (V, N) => (ne(), Fe(d, { key: N }, {
              default: x(() => [
                h(s, { cols: "4" }, {
                  default: x(() => [
                    A("div", Oae, W(V.credit_origin), 1)
                  ]),
                  _: 2
                }, 1024),
                h(s, { cols: "4" }, {
                  default: x(() => [
                    h(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Available Credit"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      "model-value": i.formatCurrency(V.total_credit),
                      readonly: "",
                      prefix: i.currencySymbol(r.invoice_doc.currency)
                    }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                  ]),
                  _: 2
                }, 1024),
                h(s, { cols: "4" }, {
                  default: x(() => [
                    h(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Redeem Credit"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      type: "text",
                      "model-value": i.formatCurrency(V.credit_to_redeem),
                      onChange: (q) => e.setFormatedCurrency(V, "credit_to_redeem", null, !1, q),
                      prefix: i.currencySymbol(r.invoice_doc.currency)
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "prefix"])
                  ]),
                  _: 2
                }, 1024)
              ]),
              _: 2
            }, 1024))), 128))
          ])) : ke("", !0),
          h(u),
          h(d, {
            class: "pb-0 mb-2",
            align: "start"
          }, {
            default: x(() => [
              h(s, { cols: "12" }, {
                default: x(() => [
                  r.sales_persons && r.sales_persons.length > 0 ? (ne(), Be("p", Dae, W(r.sales_persons.length) + " sales persons found ", 1)) : (ne(), Be("p", Bae, "No sales persons found")),
                  h(E, {
                    density: "compact",
                    clearable: "",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Sales Person"),
                    modelValue: r.sales_person,
                    "onUpdate:modelValue": t[23] || (t[23] = (V) => r.sales_person = V),
                    items: r.sales_persons,
                    "item-title": "title",
                    "item-value": "value",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "no-data-text": e.__("Sales Person not found"),
                    "hide-details": "",
                    disabled: e.readonly
                  }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "disabled"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ], 512)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    h(C, {
      flat: "",
      class: "cards mb-0 mt-3 pa-0"
    }, {
      default: x(() => [
        h(d, {
          align: "start",
          "no-gutters": ""
        }, {
          default: x(() => [
            h(s, { cols: "6" }, {
              default: x(() => [
                h(f, {
                  ref: "submitButton",
                  block: "",
                  size: "large",
                  color: "primary",
                  theme: "dark",
                  onClick: i.submit,
                  loading: r.loading,
                  disabled: r.loading || i.vaildatPayment,
                  class: Ee({ "submit-highlight": r.highlightSubmit })
                }, {
                  default: x(() => [
                    ae(W(i.getSubmitButtonText()) + " ", 1),
                    i.vaildatPayment ? (ne(), Fe(B, {
                      key: 0,
                      activator: "parent",
                      location: "top"
                    }, {
                      default: x(() => [
                        A("span", null, "Button disabled: " + W(i.getDisabledReason()), 1)
                      ]),
                      _: 1
                    })) : ke("", !0)
                  ]),
                  _: 1
                }, 8, ["onClick", "loading", "disabled", "class"])
              ]),
              _: 1
            }),
            h(s, {
              cols: "6",
              class: "pl-1"
            }, {
              default: x(() => [
                h(f, {
                  block: "",
                  size: "large",
                  color: "success",
                  theme: "dark",
                  onClick: t[24] || (t[24] = (V) => i.submit(void 0, !1, !0)),
                  loading: r.loading,
                  disabled: r.loading || i.vaildatPayment
                }, {
                  default: x(() => [
                    ae(W(i.getSubmitPrintButtonText()) + " ", 1),
                    i.vaildatPayment ? (ne(), Fe(B, {
                      key: 0,
                      activator: "parent",
                      location: "top"
                    }, {
                      default: x(() => [
                        A("span", null, "Button disabled: " + W(i.getDisabledReason()), 1)
                      ]),
                      _: 1
                    })) : ke("", !0)
                  ]),
                  _: 1
                }, 8, ["loading", "disabled"])
              ]),
              _: 1
            }),
            h(s, { cols: "12" }, {
              default: x(() => [
                h(f, {
                  block: "",
                  class: "mt-2 pa-1",
                  size: "large",
                  color: "error",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: x(() => [
                    ae(W(e.__("Cancel Payment")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    r.showDebugInfo ? (ne(), Fe(C, {
      key: 0,
      flat: "",
      class: "cards mb-0 mt-2 pa-2",
      style: { "font-size": "12px" }
    }, {
      default: x(() => [
        h(d, { dense: "" }, {
          default: x(() => [
            h(s, { cols: "12" }, {
              default: x(() => [
                t[33] || (t[33] = A("strong", null, "Payment Debug Info:", -1)),
                t[34] || (t[34] = A("br", null, null, -1)),
                ae(" Invoice Type: " + W(r.invoiceType), 1),
                t[35] || (t[35] = A("br", null, null, -1)),
                ae(" Invoice Doc Type: " + W(r.invoice_doc?.doctype), 1),
                t[36] || (t[36] = A("br", null, null, -1)),
                ae(" Invoice Doc Name: " + W(r.invoice_doc?.name), 1),
                t[37] || (t[37] = A("br", null, null, -1)),
                ae(" Is Return: " + W(r.invoice_doc?.is_return), 1),
                t[38] || (t[38] = A("br", null, null, -1)),
                ae(" Restaurant Mode: " + W(r.pos_profile?.posa_enable_restaurant_mode), 1),
                t[39] || (t[39] = A("br", null, null, -1)),
                ae(" Validation Result: " + W(i.vaildatPayment), 1),
                t[40] || (t[40] = A("br", null, null, -1)),
                ae(" Loading: " + W(r.loading), 1),
                t[41] || (t[41] = A("br", null, null, -1)),
                ae(" Grand Total: " + W(r.invoice_doc?.grand_total), 1),
                t[42] || (t[42] = A("br", null, null, -1)),
                ae(" Rounded Total: " + W(r.invoice_doc?.rounded_total), 1),
                t[43] || (t[43] = A("br", null, null, -1)),
                ae(" Delivery Date: " + W(r.invoice_doc?.posa_delivery_date), 1),
                t[44] || (t[44] = A("br", null, null, -1)),
                ae(" Disabled Reason: " + W(i.getDisabledReason()), 1)
              ]),
              _: 1,
              __: [33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44]
            })
          ]),
          _: 1
        }),
        h(f, {
          size: "small",
          onClick: t[25] || (t[25] = (V) => r.showDebugInfo = !1),
          class: "mt-2"
        }, {
          default: x(() => t[45] || (t[45] = [
            ae("Hide Debug")
          ])),
          _: 1,
          __: [45]
        })
      ]),
      _: 1
    })) : ke("", !0),
    r.showDebugInfo ? ke("", !0) : (ne(), Fe(f, {
      key: 1,
      size: "small",
      variant: "text",
      onClick: t[26] || (t[26] = (V) => r.showDebugInfo = !0),
      class: "mt-1"
    }, {
      default: x(() => t[46] || (t[46] = [
        ae(" Show Debug Info ")
      ])),
      _: 1,
      __: [46]
    })),
    h(M, {
      modelValue: r.custom_days_dialog,
      "onUpdate:modelValue": t[29] || (t[29] = (V) => r.custom_days_dialog = V),
      "max-width": "300px"
    }, {
      default: x(() => [
        h(C, null, {
          default: x(() => [
            h(O, { class: "text-h6" }, {
              default: x(() => [
                ae(W(e.__("Custom Due Days")), 1)
              ]),
              _: 1
            }),
            h(T, { class: "pa-0" }, {
              default: x(() => [
                h(D, null, {
                  default: x(() => [
                    h(l, {
                      density: "compact",
                      variant: "solo",
                      type: "number",
                      min: "0",
                      max: "365",
                      class: "dark-field sleek-field",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      modelValue: r.custom_days_value,
                      "onUpdate:modelValue": t[27] || (t[27] = (V) => r.custom_days_value = V),
                      modelModifiers: { number: !0 },
                      label: e.frappe._("Days"),
                      "hide-details": ""
                    }, null, 8, ["bg-color", "modelValue", "label"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            h(I, null, {
              default: x(() => [
                h(P),
                h(f, {
                  color: "error",
                  theme: "dark",
                  onClick: t[28] || (t[28] = (V) => r.custom_days_dialog = !1)
                }, {
                  default: x(() => [
                    ae(W(e.__("Close")), 1)
                  ]),
                  _: 1
                }),
                h(f, {
                  color: "primary",
                  theme: "dark",
                  onClick: i.applyCustomDays
                }, {
                  default: x(() => [
                    ae(W(e.__("Apply")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    h(M, {
      modelValue: r.phone_dialog,
      "onUpdate:modelValue": t[32] || (t[32] = (V) => r.phone_dialog = V),
      "max-width": "400px"
    }, {
      default: x(() => [
        h(C, null, {
          default: x(() => [
            h(O, null, {
              default: x(() => [
                A("span", Vae, W(e.__("Confirm Mobile Number")), 1)
              ]),
              _: 1
            }),
            h(T, { class: "pa-0" }, {
              default: x(() => [
                h(D, null, {
                  default: x(() => [
                    h(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Mobile Number"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      modelValue: r.invoice_doc.contact_mobile,
                      "onUpdate:modelValue": t[30] || (t[30] = (V) => r.invoice_doc.contact_mobile = V),
                      type: "number"
                    }, null, 8, ["label", "bg-color", "modelValue"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            h(I, null, {
              default: x(() => [
                h(P),
                h(f, {
                  color: "error",
                  theme: "dark",
                  onClick: t[31] || (t[31] = (V) => r.phone_dialog = !1)
                }, {
                  default: x(() => [
                    ae(W(e.__("Close")), 1)
                  ]),
                  _: 1
                }),
                h(f, {
                  color: "primary",
                  theme: "dark",
                  onClick: i.request_payment
                }, {
                  default: x(() => [
                    ae(W(e.__("Request")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ]);
}
const Rae = /* @__PURE__ */ rn(pae, [["render", Mae], ["__scopeId", "data-v-4fa5a18c"]]), Lae = {
  mixins: [Oi],
  data: () => ({
    loading: !1,
    pos_profile: "",
    pos_offers: [],
    allItems: [],
    groupItemCache: {},
    discount_percentage_offer_name: null,
    itemsPerPage: 1e3,
    expanded: [],
    singleExpand: !0,
    items_headers: [
      { title: __("Name"), value: "name", align: "start" },
      { title: __("Apply On"), value: "apply_on", align: "start" },
      { title: __("Offer"), value: "offer", align: "start" },
      { title: __("Applied"), value: "offer_applied", align: "start" }
    ]
  }),
  computed: {
    offersCount() {
      return this.pos_offers.length;
    },
    appliedOffersCount() {
      return this.pos_offers.filter((e) => !!e.offer_applied).length;
    },
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  methods: {
    back_to_invoice() {
      this.eventBus.emit("show_offers", "false");
    },
    async fetchGroupItems(e) {
      try {
        const { message: t } = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            item_group: e
            // fetch complete inventory; backend paginates internally
          }
        }), n = t || [];
        this.groupItemCache[e] = n.map((i) => ({
          item_code: i.item_code,
          item_name: i.item_name || i.item_code,
          rate: i.price_list_rate
        }));
        const a = new Set(this.allItems.map((i) => i.item_code)), r = n.filter((i) => !a.has(i.item_code));
        r.length && (this.allItems.push(...r), this.eventBus.emit("set_all_items", this.allItems)), this.forceUpdateItem();
      } catch (t) {
        console.error("Failed to fetch group items", t);
      }
    },
    forceUpdateItem() {
      let e = [];
      e = [...this.pos_offers], this.pos_offers = e;
    },
    toggleOfferApplied() {
      this.forceUpdateItem();
    },
    makeid(e) {
      let t = "";
      const n = "abcdefghijklmnopqrstuvwxyz0123456789", a = n.length;
      for (var r = 0; r < e; r++)
        t += n.charAt(Math.floor(Math.random() * a));
      return t;
    },
    updatePosOffers(e) {
      const t = [];
      this.pos_offers.forEach((n) => {
        e.find((r) => r.name === n.name) || t.push(n.row_id);
      }), this.removeOffers(t), e.forEach((n) => {
        const a = this.pos_offers.find((r) => n.name === r.name);
        if (a)
          a.items = n.items, a.offer === "Grand Total" && !this.discount_percentage_offer_name && (a.offer_applied = !!a.auto), n.apply_on == "Item Group" && n.apply_type == "Item Group" && n.replace_cheapest_item && (a.give_item = n.give_item, a.apply_item_code = n.apply_item_code);
        else {
          const r = { ...n };
          if (n.row_id || (r.row_id = this.makeid(20)), n.apply_type == "Item Code" && (r.give_item = n.apply_item_code || "Nothing"), n.offer_applied ? r.offer_applied == !!n.offer_applied : n.apply_type == "Item Group" && n.offer == "Give Product" && !n.replace_cheapest_item && !n.replace_item || n.offer === "Grand Total" && this.discount_percentage_offer_name ? r.offer_applied = !1 : r.offer_applied = !!n.auto, r.offer == "Give Product" && !r.give_item) {
            const i = this.get_give_items(r);
            i.length && (r.give_item = i[0].item_code);
          }
          this.pos_offers.push(r), this.eventBus.emit("show_message", {
            title: __("New Offer Available"),
            color: "warning"
          });
        }
      });
    },
    removeOffers(e) {
      this.pos_offers = this.pos_offers.filter((t) => !e.includes(t.row_id));
    },
    handelOffers() {
      const e = this.pos_offers.filter((t) => t.offer_applied);
      this.eventBus.emit("update_invoice_offers", e);
    },
    handleNewLine(e) {
      return e ? e.replace(/(?:\r\n|\r|\n)/g, "<br />") : "";
    },
    get_give_items(e) {
      if (e.apply_type === "Item Code")
        return [
          {
            item_code: e.apply_item_code,
            item_name: e.apply_item_code
          }
        ];
      if (e.apply_type === "Item Group") {
        const t = e.apply_item_group;
        if (!this.groupItemCache[t])
          return this.fetchGroupItems(t), [];
        let n = this.groupItemCache[t];
        e.less_then > 0 && (n = n.filter(
          (i) => i.rate < e.less_then
        ));
        const a = [], r = /* @__PURE__ */ new Set();
        return n.forEach((i) => {
          r.has(i.item_code) || (r.add(i.item_code), a.push({
            item_code: i.item_code,
            item_name: i.item_name || i.item_code
          }));
        }), a;
      }
      return [];
    },
    updateCounters() {
      this.eventBus.emit("update_offers_counters", {
        offersCount: this.offersCount,
        appliedOffersCount: this.appliedOffersCount
      });
    },
    updatePosCoupuns() {
      const e = this.pos_offers.filter(
        (t) => t.offer_applied && t.coupon_based
      );
      this.eventBus.emit("update_pos_coupons", e);
    }
  },
  watch: {
    pos_offers: {
      deep: !0,
      handler() {
        this.handelOffers(), this.updateCounters(), this.updatePosCoupuns();
      }
    }
  },
  created: function() {
    this.$nextTick(function() {
      this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile;
      });
    }), this.eventBus.on("update_customer", (e) => {
      this.customer != e && (this.offers = []);
    }), this.eventBus.on("update_pos_offers", (e) => {
      this.updatePosOffers(e);
    }), this.eventBus.on("update_discount_percentage_offer_name", (e) => {
      this.discount_percentage_offer_name = e.value;
    }), this.eventBus.on("set_all_items", (e) => {
      this.allItems = e;
    });
  }
}, Fae = { class: "text-h6 text-primary" }, Nae = ["colspan"], Uae = ["innerHTML"];
function $ae(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-checkbox-btn"), s = J("v-col"), d = J("v-autocomplete"), u = J("v-row"), f = J("v-data-table"), _ = J("v-card"), g = J("v-btn");
  return ne(), Be("div", null, [
    h(_, {
      class: Ee(["selection mx-auto mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "80vh", height: "80vh" }])
    }, {
      default: x(() => [
        h(o, null, {
          default: x(() => [
            A("span", Fae, W(e.__("Offers")), 1)
          ]),
          _: 1
        }),
        A("div", {
          class: "my-0 py-0 overflow-y-auto",
          style: { "max-height": "75vh" },
          onMouseover: t[1] || (t[1] = (v) => e.style = "cursor: pointer")
        }, [
          h(f, {
            headers: e.items_headers,
            items: e.pos_offers,
            "single-expand": e.singleExpand,
            expanded: e.expanded,
            "onUpdate:expanded": t[0] || (t[0] = (v) => e.expanded = v),
            "show-expand": "",
            "item-value": "row_id",
            class: "elevation-1",
            "items-per-page": e.itemsPerPage,
            "hide-default-footer": ""
          }, {
            "item.offer_applied": x(({ item: v }) => [
              h(l, {
                onClick: i.toggleOfferApplied,
                modelValue: v.offer_applied,
                "onUpdate:modelValue": (w) => v.offer_applied = w,
                disabled: v.offer == "Give Product" && !v.give_item && (!v.replace_cheapest_item || !v.replace_item) || v.offer == "Grand Total" && e.discount_percentage_offer_name && e.discount_percentage_offer_name != v.name
              }, null, 8, ["onClick", "modelValue", "onUpdate:modelValue", "disabled"])
            ]),
            "expanded-row": x(({ item: v }) => [
              A("td", {
                colspan: e.items_headers.length
              }, [
                h(u, { class: "mt-2" }, {
                  default: x(() => [
                    v.description ? (ne(), Fe(s, { key: 0 }, {
                      default: x(() => [
                        A("div", {
                          class: "text-primary",
                          innerHTML: i.handleNewLine(v.description)
                        }, null, 8, Uae)
                      ]),
                      _: 2
                    }, 1024)) : ke("", !0),
                    v.offer == "Give Product" ? (ne(), Fe(s, { key: 1 }, {
                      default: x(() => [
                        h(d, {
                          modelValue: v.give_item,
                          "onUpdate:modelValue": (w) => v.give_item = w,
                          items: i.get_give_items(v),
                          "item-title": "item_name",
                          "item-value": "item_code",
                          variant: "outlined",
                          density: "compact",
                          color: "primary",
                          label: e.frappe._("Give Item"),
                          disabled: v.apply_type != "Item Group" || v.replace_item || v.replace_cheapest_item
                        }, null, 8, ["modelValue", "onUpdate:modelValue", "items", "label", "disabled"])
                      ]),
                      _: 2
                    }, 1024)) : ke("", !0)
                  ]),
                  _: 2
                }, 1024)
              ], 8, Nae)
            ]),
            _: 1
          }, 8, ["headers", "items", "single-expand", "expanded", "items-per-page"])
        ], 32)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    h(_, {
      flat: "",
      style: { "max-height": "11vh", height: "11vh" },
      class: "cards mb-0 mt-3 py-0"
    }, {
      default: x(() => [
        h(u, {
          align: "start",
          "no-gutters": ""
        }, {
          default: x(() => [
            h(s, { cols: "12" }, {
              default: x(() => [
                h(g, {
                  block: "",
                  class: "pa-1",
                  size: "large",
                  color: "warning",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: x(() => [
                    ae(W(e.__("Back")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    })
  ]);
}
const qae = /* @__PURE__ */ rn(Lae, [["render", $ae]]), Hae = {
  data: () => ({
    loading: !1,
    pos_profile: "",
    customer: "",
    posa_coupons: [],
    new_coupon: null,
    itemsPerPage: 1e3,
    singleExpand: !0,
    items_headers: [
      { title: __("Coupon"), value: "coupon_code", align: "start" },
      { title: __("Type"), value: "type", align: "start" },
      { title: __("Offer"), value: "pos_offer", align: "start" },
      { title: __("Applied"), value: "applied", align: "start" }
    ]
  }),
  computed: {
    couponsCount() {
      return this.posa_coupons.length;
    },
    appliedCouponsCount() {
      return this.posa_coupons.filter((e) => !!e.applied).length;
    },
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  methods: {
    back_to_invoice() {
      this.eventBus.emit("show_coupons", "false");
    },
    add_coupon(e) {
      if (!this.customer || !e) {
        this.eventBus.emit("show_message", {
          title: __("Select a customer to use coupon"),
          color: "error"
        });
        return;
      }
      if (this.posa_coupons.find((a) => a.coupon_code == e)) {
        this.eventBus.emit("show_message", {
          title: __("This coupon already used !"),
          color: "error"
        });
        return;
      }
      const n = this;
      frappe.call({
        method: "posawesome.posawesome.api.offers.get_pos_coupon",
        args: {
          coupon: e,
          customer: n.customer,
          company: n.pos_profile.company
        },
        callback: function(a) {
          if (a.message) {
            const r = a.message;
            if (r.msg != "Apply" || !r.coupon)
              n.eventBus.emit("show_message", {
                title: r.msg,
                color: "error"
              });
            else {
              n.new_coupon = null;
              const i = r.coupon;
              n.posa_coupons.push({
                coupon: i.name,
                coupon_code: i.coupon_code,
                type: i.coupon_type,
                applied: 0,
                pos_offer: i.pos_offer,
                customer: i.customer || n.customer
              });
            }
          }
        }
      });
    },
    setActiveGiftCoupons() {
      if (!this.customer) return;
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.offers.get_active_gift_coupons",
        args: {
          customer: e.customer,
          company: e.pos_profile.company
        },
        callback: function(t) {
          t.message && t.message.forEach((a) => {
            e.add_coupon(a);
          });
        }
      });
    },
    updatePosCoupons(e) {
      this.posa_coupons.forEach((t) => {
        e.find((a) => a.offer_applied && a.coupon == t.coupon) ? t.applied = 1 : t.applied = 0;
      });
    },
    removeCoupon(e) {
      this.posa_coupons = this.posa_coupons.filter((t) => !e.includes(t.coupon));
    },
    updateInvoice() {
      this.eventBus.emit("update_invoice_coupons", this.posa_coupons);
    },
    updateCounters() {
      this.eventBus.emit("update_coupons_counters", {
        couponsCount: this.couponsCount,
        appliedCouponsCount: this.appliedCouponsCount
      });
    }
  },
  watch: {
    posa_coupons: {
      deep: !0,
      handler() {
        this.updateInvoice(), this.updateCounters();
      }
    }
  },
  created: function() {
    this.$nextTick(function() {
      this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile;
      });
    }), this.eventBus.on("update_customer", (e) => {
      if (this.customer != e) {
        const t = [];
        this.posa_coupons.forEach((n) => {
          n.type == "Promotional" ? n.customer = e : t.push(n.coupon);
        }), this.customer = e, t.length && this.removeCoupon(t);
      }
      this.setActiveGiftCoupons();
    }), this.eventBus.on("update_pos_coupons", (e) => {
      this.updatePosCoupons(e);
    }), this.eventBus.on("set_pos_coupons", (e) => {
      this.posa_coupons = e;
    });
  }
}, zae = { class: "text-h6 text-primary" };
function Wae(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-col"), d = J("v-btn"), u = J("v-row"), f = J("v-checkbox-btn"), _ = J("v-data-table"), g = J("v-card");
  return ne(), Be("div", null, [
    h(g, {
      class: Ee(["selection mx-auto mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "80vh", height: "80vh" }])
    }, {
      default: x(() => [
        h(o, null, {
          default: x(() => [
            A("span", zae, W(e.__("Coupons")), 1)
          ]),
          _: 1
        }),
        h(u, {
          class: "px-4 pb-2",
          "no-gutters": ""
        }, {
          default: x(() => [
            h(s, {
              cols: "8",
              class: "pr-2"
            }, {
              default: x(() => [
                h(l, {
                  density: "compact",
                  variant: "outlined",
                  color: "primary",
                  label: e.frappe._("Coupon"),
                  "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                  "hide-details": "",
                  modelValue: e.new_coupon,
                  "onUpdate:modelValue": t[0] || (t[0] = (v) => e.new_coupon = v),
                  class: "coupon-input",
                  onKeydown: t[1] || (t[1] = Rl((v) => i.add_coupon(e.new_coupon), ["enter"]))
                }, null, 8, ["label", "bg-color", "modelValue"])
              ]),
              _: 1
            }),
            h(s, { cols: "4" }, {
              default: x(() => [
                h(d, {
                  class: "add-coupon-btn",
                  color: "success",
                  theme: "dark",
                  block: "",
                  onClick: t[2] || (t[2] = (v) => i.add_coupon(e.new_coupon))
                }, {
                  default: x(() => [
                    ae(W(e.__("add")), 1)
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        }),
        A("div", {
          class: "my-0 py-0 overflow-y-auto",
          style: { "max-height": "75vh" },
          onMouseover: t[4] || (t[4] = (v) => e.style = "cursor: pointer")
        }, [
          h(_, {
            headers: e.items_headers,
            items: e.posa_coupons,
            "single-expand": e.singleExpand,
            expanded: e.expanded,
            "onUpdate:expanded": t[3] || (t[3] = (v) => e.expanded = v),
            "item-key": "coupon",
            class: "elevation-1",
            "items-per-page": e.itemsPerPage,
            "hide-default-footer": ""
          }, {
            "item.applied": x(({ item: v }) => [
              h(f, {
                modelValue: v.applied,
                "onUpdate:modelValue": (w) => v.applied = w,
                disabled: ""
              }, null, 8, ["modelValue", "onUpdate:modelValue"])
            ]),
            _: 1
          }, 8, ["headers", "items", "single-expand", "expanded", "items-per-page"])
        ], 32)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    h(g, {
      flat: "",
      style: { "max-height": "11vh", height: "11vh" },
      class: "cards mb-0 mt-3 py-0"
    }, {
      default: x(() => [
        h(u, {
          align: "start",
          "no-gutters": ""
        }, {
          default: x(() => [
            h(s, { cols: "12" }, {
              default: x(() => [
                h(d, {
                  block: "",
                  class: "pa-1",
                  size: "large",
                  color: "warning",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: x(() => [
                    ae(W(e.__("Back")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    })
  ]);
}
const jae = /* @__PURE__ */ rn(Hae, [["render", Wae], ["__scopeId", "data-v-9520f66e"]]), Yae = {
  // props: ["draftsDialog"],
  mixins: [Oi],
  data: () => ({
    draftsDialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: {},
    headers: [
      {
        title: __("Customer"),
        value: "customer_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      },
      {
        title: __("Time"),
        align: "start",
        sortable: !0,
        value: "posting_time"
      },
      {
        title: __("Invoice"),
        value: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.draftsDialog = !1;
    },
    submit_dialog() {
      this.selected.length > 0 ? (this.eventBus.emit("load_invoice", this.selected[0]), this.draftsDialog = !1) : this.eventBus.emit("show_message", {
        title: "Select an invoice to load",
        color: "error"
      });
    }
  },
  created: function() {
    this.eventBus.on("open_drafts", (e) => {
      this.draftsDialog = !0, this.dialog_data = e;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_drafts");
  }
}, Kae = { class: "text-h5 text-primary" }, Gae = { class: "text-primary" };
function Qae(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-card-subtitle"), s = J("v-data-table"), d = J("v-col"), u = J("v-row"), f = J("v-container"), _ = J("v-card-text"), g = J("v-spacer"), v = J("v-btn"), w = J("v-card-actions"), b = J("v-card"), p = J("v-dialog");
  return ne(), Fe(u, { justify: "center" }, {
    default: x(() => [
      h(p, {
        modelValue: e.draftsDialog,
        "onUpdate:modelValue": t[1] || (t[1] = (y) => e.draftsDialog = y),
        "max-width": "900px"
      }, {
        default: x(() => [
          h(b, {
            variant: "flat",
            color: i.isDarkTheme ? e.$vuetify.theme.themes.dark.colors.surface : "white"
          }, {
            default: x(() => [
              h(o, null, {
                default: x(() => [
                  A("span", Kae, W(e.__("Load Sales Invoice")), 1)
                ]),
                _: 1
              }),
              h(l, null, {
                default: x(() => [
                  A("span", Gae, W(e.__("Load previously saved invoices")), 1)
                ]),
                _: 1
              }),
              h(_, { class: "pa-0" }, {
                default: x(() => [
                  h(f, null, {
                    default: x(() => [
                      h(u, { "no-gutters": "" }, {
                        default: x(() => [
                          h(d, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              h(s, {
                                headers: e.headers,
                                items: e.dialog_data,
                                "item-value": "name",
                                class: "elevation-1",
                                theme: i.isDarkTheme ? "dark" : "light",
                                "show-select": "",
                                modelValue: e.selected,
                                "onUpdate:modelValue": t[0] || (t[0] = (y) => e.selected = y),
                                "select-strategy": "single",
                                "return-object": ""
                              }, {
                                "item.posting_time": x(({ item: y }) => [
                                  ae(W(y.posting_time.split(".")[0]), 1)
                                ]),
                                "item.grand_total": x(({ item: y }) => [
                                  ae(W(e.currencySymbol(y.currency)) + " " + W(e.formatCurrency(y.grand_total)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "theme", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(w, null, {
                default: x(() => [
                  h(g),
                  h(v, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[2] || (t[2] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [2]
                  }, 8, ["onClick"]),
                  h(v, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => t[3] || (t[3] = [
                      ae("Load Sale")
                    ])),
                    _: 1,
                    __: [3]
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 8, ["color"])
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Jae = /* @__PURE__ */ rn(Yae, [["render", Qae]]), Xae = {
  // props: ["draftsDialog"],
  mixins: [Oi],
  data: () => ({
    draftsDialog: !1,
    singleSelect: !0,
    pos_profile: {},
    selected: [],
    dialog_data: {},
    order_name: "",
    headers: [
      {
        title: __("Customer"),
        key: "customer_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        key: "transaction_date"
      },
      //   {
      //     title: __("Time"),
      //     align: "start",
      //     sortable: true,
      //     key: "posting_time",
      //   },
      {
        title: __("Order"),
        key: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        key: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.draftsDialog = !1;
    },
    clearSelected() {
      this.selected = [];
    },
    search_orders() {
      frappe.call({
        method: "posawesome.posawesome.api.sales_orders.search_orders",
        args: {
          order_name: vm.order_name,
          company: this.pos_profile.company,
          currency: this.pos_profile.currency
        },
        async: !1,
        callback: function(e) {
          e.message && (vm.dialog_data = e.message);
        }
      });
    },
    async submit_dialog() {
      if (this.selected.length > 0) {
        var e = {};
        if (await frappe.call({
          method: "posawesome.posawesome.api.invoices.create_sales_invoice_from_order",
          args: {
            sales_order: this.selected[0].name
          },
          callback: function(t) {
            t.message && (e = t.message);
          }
        }), e.items) {
          const t = this.selected[0].items, n = e.items, a = {};
          n.forEach((r) => {
            a[r.item_code] = r;
          });
          for (let r = 0; r < t.length; r++) {
            const i = t[r], o = a[i.item_code];
            o ? (i.qty = o.qty, i.amount = o.amount, i.uom = o.uom, i.rate = o.rate) : (t.splice(r, 1), r--);
          }
        }
        this.eventBus.emit("load_order", this.selected[0]), this.draftsDialog = !1, frappe.call({
          method: "posawesome.posawesome.api.invoices.delete_sales_invoice",
          args: {
            sales_invoice: e.name
          },
          callback: function(t) {
            t.message;
          }
        });
      }
    }
  },
  created: function() {
    this.eventBus.on("open_orders", (e) => {
      this.clearSelected(), this.draftsDialog = !0, this.dialog_data = e, this.order_name = "";
    });
  },
  mounted() {
    this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_orders"), this.eventBus.off("register_pos_profile");
  }
}, Zae = { class: "text-h5 text-primary" };
function ere(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-btn"), d = J("v-row"), u = J("v-data-table"), f = J("v-col"), _ = J("v-container"), g = J("v-card-text"), v = J("v-spacer"), w = J("v-card-actions"), b = J("v-card"), p = J("v-dialog");
  return ne(), Fe(d, { justify: "center" }, {
    default: x(() => [
      h(p, {
        modelValue: e.draftsDialog,
        "onUpdate:modelValue": t[2] || (t[2] = (y) => e.draftsDialog = y),
        "max-width": "900px"
      }, {
        default: x(() => [
          h(b, null, {
            default: x(() => [
              h(o, null, {
                default: x(() => [
                  A("span", Zae, W(e.__("Select Sales Orders")), 1)
                ]),
                _: 1
              }),
              h(g, { class: "pa-0" }, {
                default: x(() => [
                  h(_, null, {
                    default: x(() => [
                      h(d, { class: "mb-4" }, {
                        default: x(() => [
                          h(l, {
                            color: "primary",
                            label: e.frappe._("Order ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            modelValue: e.order_name,
                            "onUpdate:modelValue": t[0] || (t[0] = (y) => e.order_name = y),
                            density: "compact",
                            clearable: "",
                            class: "mx-4"
                          }, null, 8, ["label", "bg-color", "modelValue"]),
                          h(s, {
                            variant: "text",
                            class: "ml-2",
                            color: "primary",
                            theme: "dark",
                            onClick: i.search_orders
                          }, {
                            default: x(() => [
                              ae(W(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      }),
                      h(d, { "no-gutters": "" }, {
                        default: x(() => [
                          h(f, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              h(u, {
                                headers: e.headers,
                                items: e.dialog_data,
                                "item-key": "name",
                                class: "elevation-1",
                                "show-select": "",
                                modelValue: e.selected,
                                "onUpdate:modelValue": t[1] || (t[1] = (y) => e.selected = y),
                                "return-object": "",
                                "select-strategy": "single"
                              }, {
                                "item.grand_total": x(({ item: y }) => [
                                  ae(W(e.currencySymbol(y.currency)) + " " + W(e.formatCurrency(y.grand_total)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(w, null, {
                default: x(() => [
                  h(v),
                  h(s, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[3] || (t[3] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [3]
                  }, 8, ["onClick"]),
                  e.selected.length ? (ne(), Fe(s, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => t[4] || (t[4] = [
                      ae("Select")
                    ])),
                    _: 1,
                    __: [4]
                  }, 8, ["onClick"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const tre = /* @__PURE__ */ rn(Xae, [["render", ere]]), nre = {
  mixins: [Oi],
  data() {
    return {
      ordersDialog: !1,
      pos_profile: {},
      pos_opening_shift: null,
      selected: [],
      orders_data: [],
      filtered_orders: [],
      loading: !1,
      converting: !1,
      multiSelectMode: !1,
      expanded: [],
      // Track expanded rows
      filter_order_type: null,
      filter_status: null,
      filter_date: null,
      search_text: "",
      kotReprintLoading: {},
      // Track loading state for each order's KOT reprint
      voidItemsDialog: !1,
      selectedOrderForVoid: null,
      voidLoading: !1,
      selectedItemsToVoid: [],
      voidItemHeaders: [
        {
          title: __("Item"),
          key: "item_name",
          align: "start",
          sortable: !1
        },
        {
          title: __("Qty"),
          key: "qty",
          align: "center",
          sortable: !1
        },
        {
          title: __("Rate"),
          key: "rate",
          align: "end",
          sortable: !1
        },
        {
          title: __("Amount"),
          key: "amount",
          align: "end",
          sortable: !1
        }
      ],
      headers: [
        {
          title: __("Order"),
          key: "name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Customer"),
          key: "customer_name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "transaction_date"
        },
        {
          title: __("Order Type"),
          key: "order_type_name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Table"),
          key: "table_number",
          align: "center",
          sortable: !0
        },
        {
          title: __("Status"),
          key: "order_status",
          align: "center",
          sortable: !0
        },
        {
          title: __("Amount"),
          key: "grand_total",
          align: "end",
          sortable: !1
        },
        {
          title: __("Actions"),
          key: "actions",
          align: "center",
          sortable: !1
        }
      ],
      order_type_options: [],
      status_options: [
        { title: __("Draft"), value: "Draft" },
        { title: __("Submitted"), value: "Submitted" },
        { title: __("Billed"), value: "Billed" },
        { title: __("Cancelled"), value: "Cancelled" }
      ]
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    filter_status() {
      this.ordersDialog && this.fetch_orders();
    },
    filter_date() {
      this.ordersDialog && this.fetch_orders();
    },
    selectedItemsToVoid: {
      handler(e, t) {
        console.log("selectedItemsToVoid changed:", {
          new: e,
          old: t,
          count: e?.length || 0
        });
      },
      deep: !0
    }
  },
  methods: {
    async open_orders_dialog() {
      if (this.ordersDialog = !0, this.clearSelected(), !this.filter_date) {
        const e = /* @__PURE__ */ new Date();
        this.filter_date = e.toISOString().split("T")[0];
      }
      await this.fetch_orders();
    },
    close_dialog() {
      this.ordersDialog = !1, this.clearSelected();
    },
    clearSelected() {
      this.selected = [];
    },
    async fetch_orders() {
      this.loading = !0;
      try {
        console.log("Fetching orders with filters:", {
          pos_opening_shift: this.pos_opening_shift?.name || null,
          status: this.filter_status || null,
          date_filter: this.filter_date || null
        });
        const e = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_orders",
          args: {
            pos_opening_shift: this.pos_opening_shift?.name || null,
            status: this.filter_status || null,
            date_filter: this.filter_date || null
          }
        });
        if (console.log("=== FETCH ORDERS DEBUG ==="), console.log("Raw API response:", e), console.log("Response message:", e.message), e.message && e.message.length > 0) {
          console.log("First few orders from API:"), e.message.slice(0, 5).forEach((n, a) => {
            console.log(`  Order ${a + 1}:`, {
              name: n.name,
              doctype: n.doctype || "not specified",
              customer: n.customer,
              docstatus: n.docstatus
            });
          });
          const t = e.message.filter((n) => !n.name || !n.name.startsWith("SAL-ORD-"));
          t.length > 0 && (console.error("CRITICAL: API returned orders with invalid names:"), t.forEach((n) => {
            console.error("  INVALID ORDER:", n);
          }));
        }
        if (console.log("=== END FETCH ORDERS DEBUG ==="), console.log("API response:", e), e.message) {
          const t = e.message.filter((a) => {
            const r = a.name && a.name.startsWith("SAL-ORD-");
            return r || console.warn("Filtering out invalid order entry:", a.name), r;
          });
          this.orders_data = t, console.log("Orders data (filtered):", this.orders_data), this.filter_orders();
          const n = [...new Set(t.map((a) => a.order_type_name).filter(Boolean))];
          this.order_type_options = n.map((a) => ({ title: a, value: a }));
        }
      } catch (e) {
        console.error("Failed to fetch restaurant orders", e), this.eventBus.emit("show_message", {
          title: __("Error fetching orders"),
          color: "error"
        });
      } finally {
        this.loading = !1;
      }
    },
    async refresh_orders() {
      await this.fetch_orders(), this.eventBus.emit("show_message", {
        title: __("Orders refreshed"),
        color: "success"
      });
    },
    filter_orders() {
      let e = [...this.orders_data];
      if (this.filter_order_type && (e = e.filter((t) => t.order_type_name === this.filter_order_type)), this.filter_status && (e = e.filter((t) => this.getOrderStatus(t) === this.filter_status)), this.filter_date && (e = e.filter((t) => new Date(t.transaction_date).toISOString().split("T")[0] === this.filter_date)), this.search_text) {
        const t = this.search_text.toLowerCase();
        e = e.filter(
          (n) => n.name.toLowerCase().includes(t) || n.customer_name.toLowerCase().includes(t)
        );
      }
      this.filtered_orders = e;
    },
    getOrderStatus(e) {
      return e.docstatus === 0 ? "Draft" : e.docstatus === 1 && e.per_billed < 100 ? "Submitted" : e.per_billed >= 100 ? "Billed" : "Unknown";
    },
    getStatusColor(e) {
      const t = this.getOrderStatus(e);
      return {
        Draft: "orange",
        Submitted: "blue",
        Billed: "success"
      }[t] || "grey";
    },
    getStatusIcon(e) {
      const t = this.getOrderStatus(e);
      return {
        Draft: "mdi-file-document-outline",
        Submitted: "mdi-check-circle-outline",
        Billed: "mdi-receipt"
      }[t] || "mdi-information-outline";
    },
    getOrderTypeColor(e) {
      return {
        "Dine In": "purple",
        "Take Away": "orange",
        Delivery: "green"
      }[e] || "grey";
    },
    canConvertToPayment(e) {
      const t = (e.docstatus === 0 || e.docstatus === 1) && e.per_billed < 100;
      return console.log("Can convert to payment:", {
        order: e.name,
        docstatus: e.docstatus,
        per_billed: e.per_billed,
        canConvert: t
      }), t;
    },
    canEdit(e) {
      return e.docstatus === 0;
    },
    canCancel(e) {
      return e.docstatus === 1;
    },
    canDelete(e) {
      return e.docstatus === 0;
    },
    canConvertMultipleToInvoice() {
      if (!this.selected || this.selected.length === 0)
        return console.log("No orders selected for multiple conversion"), !1;
      if (this.selected.length < 2)
        return console.log("Need at least 2 orders for multiple conversion"), !1;
      console.log("Checking multiple selection:", {
        selected_count: this.selected.length,
        multiSelectMode: this.multiSelectMode,
        selected_orders: this.selected.map((a) => ({
          name: a.name,
          customer: a.customer,
          customer_name: a.customer_name,
          docstatus: a.docstatus,
          per_billed: a.per_billed,
          status: this.getOrderStatus(a)
        }))
      });
      const e = this.selected[0].customer, t = this.selected.every((a) => a.customer === e);
      if (console.log("Same customer check:", {
        firstCustomer: e,
        sameCustomer: t,
        customers: this.selected.map((a) => a.customer)
      }), !t)
        return console.log("Orders are not from the same customer"), !1;
      const n = this.selected.every((a) => {
        const r = a.docstatus === 0;
        return console.log(`Order ${a.name} eligible for multi-edit:`, {
          docstatus: a.docstatus,
          status: this.getOrderStatus(a),
          eligible: r
        }), r;
      });
      return console.log("All draft orders check:", n), n || console.log("Some orders are not draft - multi-edit only supports draft orders"), n;
    },
    toggleMultiSelect() {
      this.multiSelectMode = !this.multiSelectMode, this.clearSelected();
    },
    async convert_to_payment() {
      if (!this.selected.length) return;
      const e = this.selected[0];
      console.log("=== CONVERT TO PAYMENT DEBUG ==="), console.log("Selected order object:", JSON.stringify(e, null, 2)), console.log("Order name:", e.name), console.log("Order doctype (if available):", e.doctype), console.log("All orders data:", JSON.stringify(this.orders_data.map((n) => ({ name: n.name, docstatus: n.docstatus })), null, 2)), console.log("=== END DEBUG ===");
      let t = e.name;
      if (!e.name || !e.name.startsWith("SAL-ORD-")) {
        console.error("CRITICAL: Selected order has invalid name, attempting to find correct order...");
        const n = this.orders_data.find(
          (a) => a.customer === e.customer && Math.abs(a.grand_total - e.grand_total) < 0.01 && a.name && a.name.startsWith("SAL-ORD-")
        );
        if (n)
          console.log("RECOVERY: Found correct order:", n.name), t = n.name, Object.assign(e, n);
        else {
          console.error("RECOVERY FAILED: Could not find correct order"), this.eventBus.emit("show_message", {
            title: __("Invalid order format: {0}. Please refresh the orders list and try again.", [e.name || "undefined"]),
            color: "error"
          });
          return;
        }
      }
      this.converting = !0;
      try {
        if (console.log("Using validated order name:", t), e.docstatus === 0) {
          console.log("Loading draft order into cart for editing:", t);
          const n = await frappe.call({
            method: "frappe.client.get",
            args: {
              doctype: "Sales Order",
              name: t
            }
          });
          if (n.message) {
            const a = n.message;
            console.log("Fetched complete order data:", a), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_invoice", a), this.close_dialog(), this.eventBus.emit("show_message", {
              title: __("Draft Order {0} loaded for editing. Make changes and click SUBMIT when ready.", [t]),
              color: "success"
            });
          } else
            throw new Error("Failed to fetch order data");
        } else {
          console.log("Converting submitted order to invoice for payment:", t);
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
            args: {
              sales_order_name: t,
              pos_profile_name: this.pos_profile?.name || null
            }
          });
          n.message && (this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("load_invoice", n.message), this.close_dialog(), this.eventBus.emit("show_message", {
            title: __("Order {0} converted to invoice for payment. Review items and click PAY when ready.", [t]),
            color: "success"
          }));
        }
      } catch (n) {
        console.error("Failed to convert order to payment", n), this.eventBus.emit("show_message", {
          title: __("Error converting order to payment: {0}", [n.message || "Unknown error"]),
          color: "error"
        });
      } finally {
        this.converting = !1;
      }
    },
    async edit_order(e) {
      try {
        if (console.log("Loading order for editing:", e.name), !e.name.startsWith("SAL-ORD-")) {
          this.eventBus.emit("show_message", {
            title: __("Invalid order format. Expected Sales Order name."),
            color: "error"
          });
          return;
        }
        const t = await frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Order",
            name: e.name
          }
        });
        if (t.message) {
          if (t.message.doctype !== "Sales Order") {
            console.error("Loaded document has wrong doctype:", t.message.doctype), this.eventBus.emit("show_message", {
              title: __("Error: Loaded document is not a Sales Order. Expected Sales Order, got {0}", [t.message.doctype]),
              color: "error"
            });
            return;
          }
          console.log("Successfully loaded Sales Order:", t.message.name, "doctype:", t.message.doctype), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_order", t.message), this.close_dialog();
          const n = e.docstatus === 1 ? "editing (submitted)" : "editing";
          this.eventBus.emit("show_message", {
            title: __("Order {0} loaded for {1}", [e.name, n]),
            color: "success"
          });
        }
      } catch (t) {
        console.error("Failed to load Sales Order for editing", t), t.message && t.message.includes("not found") ? this.eventBus.emit("show_message", {
          title: __("Sales Order {0} not found. It may have been deleted or moved.", [e.name]),
          color: "error"
        }) : t.message && t.message.includes("Sales Invoice") ? this.eventBus.emit("show_message", {
          title: __("Error: Trying to load Sales Invoice instead of Sales Order. Order {0} should be a Sales Order.", [e.name]),
          color: "error"
        }) : this.eventBus.emit("show_message", {
          title: __("Error loading Sales Order: {0}", [t.message || "Unknown error"]),
          color: "error"
        });
      }
    },
    async convert_multiple_to_payment() {
      if (!this.selected.length) return;
      console.log(`Loading ${this.selected.length} draft orders for editing...`);
      const e = [];
      for (const a of this.selected) {
        if (a.docstatus !== 0) {
          this.eventBus.emit("show_message", {
            title: __("Order {0} is not in draft status. Only draft orders can be loaded for editing.", [a.name]),
            color: "error"
          });
          return;
        }
        e.push(a.name);
      }
      const t = this.selected[0].customer;
      if (!this.selected.every((a) => a.customer === t)) {
        this.eventBus.emit("show_message", {
          title: __("All selected orders must be from the same customer"),
          color: "error"
        });
        return;
      }
      this.converting = !0;
      try {
        console.log("Calling backend API with order names:", e), console.log("Selected orders data for debugging:", JSON.stringify(this.selected.map((r) => ({
          name: r.name,
          customer: r.customer,
          customer_name: r.customer_name,
          docstatus: r.docstatus
        })), null, 2));
        const a = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.load_multiple_draft_orders_for_editing",
          args: {
            sales_order_names: e,
            pos_profile_name: this.pos_profile?.name || null
          }
        });
        if (console.log("Backend API response:", a), console.log("Response message properties:", a.message ? Object.keys(a.message) : "No message"), a && a.message) {
          console.log("Successfully received consolidated order data from backend"), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_invoice", a.message), this.close_dialog();
          const r = a.message.customer_name || a.message.customer || this.selected[0].customer_name || this.selected[0].customer || "customer";
          this.eventBus.emit("show_message", {
            title: __("✅ {0} draft orders consolidated for payment. IMPORTANT: Original orders remain as drafts. When you complete payment, a new invoice will be created while keeping original orders unchanged.", [e.length]),
            color: "success",
            timeout: 8e3
            // Show longer message for important info
          }), console.log(`Successfully loaded ${e.length} draft orders for editing`);
        } else
          throw console.error("Backend API returned empty response"), new Error("No data returned from backend");
      } catch (a) {
        console.error("Failed to load draft orders for editing", a), this.eventBus.emit("show_message", {
          title: __("Error loading draft orders: {0}", [a.message || "Unknown error"]),
          color: "error"
        });
      } finally {
        this.converting = !1;
      }
    },
    async cancel_order(e) {
      if (await new Promise((n) => {
        frappe.confirm(
          __("Are you sure you want to cancel order {0}?", [e.name]),
          () => n(!0),
          () => n(!1)
        );
      }))
        try {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.cancel_restaurant_order",
            args: {
              sales_order_name: e.name
            }
          });
          n.message && n.message.success && (this.eventBus.emit("show_message", {
            title: n.message.message,
            color: "success"
          }), await this.fetch_orders());
        } catch (n) {
          console.error("Failed to cancel order", n), this.eventBus.emit("show_message", {
            title: __("Error cancelling order"),
            color: "error"
          });
        }
    },
    async delete_order(e) {
      if (await new Promise((n) => {
        frappe.confirm(
          __("Are you sure you want to delete order {0}?", [e.name]),
          () => n(!0),
          () => n(!1)
        );
      }))
        try {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.delete_restaurant_order",
            args: {
              sales_order_name: e.name
            }
          });
          n.message && n.message.success && (this.eventBus.emit("show_message", {
            title: n.message.message,
            color: "success"
          }), await this.fetch_orders());
        } catch (n) {
          console.error("Failed to delete order", n), this.eventBus.emit("show_message", {
            title: __("Error deleting order"),
            color: "error"
          });
        }
    },
    formatDate(e) {
      return e ? frappe.datetime.str_to_user(e) : "";
    },
    async reprint_kot(e) {
      this.$set(this.kotReprintLoading, e.name, !0);
      try {
        console.log("Reprinting KOT for order:", e.name);
        const t = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.reprint_kot",
          args: {
            order_name: e.name
          }
        });
        t.message && (await (await Promise.resolve().then(() => FD)).printKOTHTML(t.message), this.eventBus.emit("show_message", {
          title: __("KOT reprinted successfully"),
          color: "success"
        }));
      } catch (t) {
        console.error("Error reprinting KOT:", t), this.eventBus.emit("show_message", {
          title: __("Error reprinting KOT: ") + (t.message || t),
          color: "error"
        });
      } finally {
        this.$set(this.kotReprintLoading, e.name, !1);
      }
    },
    async void_items(e) {
      console.log("Opening void items dialog for order:", e);
      try {
        const t = await frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Order",
            name: e.name
          }
        });
        if (t.message)
          this.selectedOrderForVoid = t.message, this.selectedItemsToVoid = [], this.voidLoading = !1, this.voidItemsDialog = !0;
        else
          throw new Error("Failed to fetch order details");
      } catch (t) {
        console.error("Error fetching order for voiding:", t), this.eventBus.emit("show_message", {
          title: __("Error fetching order details"),
          color: "error"
        });
      }
    },
    async confirmVoidItems(e, t) {
      this.voidLoading = !0;
      try {
        if (console.log("Voiding items from order:", e.name, t), !t || t.length === 0) {
          this.eventBus.emit("show_message", {
            title: __("Please select items to void"),
            color: "warning"
          });
          return;
        }
        const n = t.map((r) => ({
          idx: r.idx,
          item_code: r.item_code,
          qty: r.qty
        }));
        if ((await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.void_order_items",
          args: {
            order_name: e.name,
            items_to_void: n
          }
        })).message) {
          this.eventBus.emit("show_message", {
            title: __("Items voided successfully"),
            color: "success"
          }), this.expanded = [], this.selectedOrderForVoid = null, await this.fetch_orders();
          const r = this.orders_data.findIndex((i) => i.name === e.name);
          if (r !== -1)
            try {
              const i = await frappe.call({
                method: "frappe.client.get",
                args: {
                  doctype: "Sales Order",
                  name: e.name
                }
              });
              i.message && (this.orders_data[r] = {
                ...this.orders_data[r],
                items: i.message.items,
                grand_total: i.message.grand_total,
                net_total: i.message.net_total
              }, this.filter_orders());
            } catch (i) {
              console.log("Could not update local order data:", i);
            }
          try {
            window.frappe && window.frappe.get_route && window.frappe.get_route()[0] === "Form" && window.frappe.get_route()[1] === "Sales Order" && window.frappe.get_route()[2] === e.name && window.frappe.set_route("Form", "Sales Order", e.name);
          } catch (i) {
            console.log("Could not refresh Sales Order form:", i);
          }
          this.voidItemsDialog = !1, this.selectedOrderForVoid = null, this.selectedItemsToVoid = [];
        }
      } catch (n) {
        console.error("Error voiding items:", n), this.eventBus.emit("show_message", {
          title: __("Error voiding items: ") + (n.message || n),
          color: "error"
        });
      } finally {
        this.voidLoading = !1;
      }
    }
  },
  created() {
    this.eventBus.on("open_restaurant_orders", () => {
      this.open_orders_dialog();
    });
  },
  mounted() {
    this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.pos_opening_shift = e.pos_opening_shift;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_restaurant_orders"), this.eventBus.off("register_pos_profile");
  }
}, are = { class: "text-h5 text-primary" }, rre = {
  key: 1,
  class: "text-grey"
}, ire = ["colspan"], ore = { class: "text-subtitle-2 mb-2" }, sre = { class: "text-subtitle-2 mb-2" }, lre = { class: "text-left" }, cre = { class: "text-center" }, ure = { class: "text-right" }, dre = { class: "text-right" }, fre = { class: "text-left" }, mre = { class: "text-center" }, hre = { class: "text-right" }, _re = { class: "text-right" }, pre = {
  key: 1,
  class: "text-grey text-center py-4"
}, vre = { class: "text-right font-weight-medium" }, gre = { class: "text-right" }, yre = { key: 0 }, bre = { class: "text-right font-weight-medium" }, wre = { class: "text-right" }, kre = { key: 1 }, Sre = { class: "text-right font-weight-medium" }, Cre = { class: "text-right text-error" }, Are = { class: "font-weight-bold" }, xre = { class: "text-right" }, Tre = { class: "text-right text-primary" }, Ire = { class: "text-h6 text-warning" };
function Ere(e, t, n, a, r, i) {
  const o = J("v-spacer"), l = J("v-btn"), s = J("v-card-title"), d = J("v-select"), u = J("v-col"), f = J("v-text-field"), _ = J("v-icon"), g = J("v-row"), v = J("v-chip"), w = J("v-list-item-title"), b = J("v-list-item"), p = J("v-list"), y = J("v-table"), S = J("v-divider"), E = J("v-card-text"), C = J("v-card"), B = J("v-data-table"), O = J("v-container"), D = J("v-card-actions"), T = J("v-dialog"), P = J("v-alert");
  return ne(), Fe(g, { justify: "center" }, {
    default: x(() => [
      h(T, {
        modelValue: r.ordersDialog,
        "onUpdate:modelValue": t[7] || (t[7] = (I) => r.ordersDialog = I),
        "max-width": "1200px"
      }, {
        default: x(() => [
          h(C, null, {
            default: x(() => [
              h(s, { class: "d-flex align-center" }, {
                default: x(() => [
                  A("span", are, W(e.__("Restaurant Orders")), 1),
                  h(o),
                  h(l, {
                    icon: "mdi-close",
                    variant: "text",
                    density: "compact",
                    onClick: i.close_dialog
                  }, null, 8, ["onClick"])
                ]),
                _: 1
              }),
              h(E, { class: "pa-0" }, {
                default: x(() => [
                  h(O, null, {
                    default: x(() => [
                      h(g, { class: "mb-4" }, {
                        default: x(() => [
                          h(u, {
                            cols: "12",
                            md: "3"
                          }, {
                            default: x(() => [
                              h(d, {
                                color: "primary",
                                label: e.frappe._("Order Type"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_order_type,
                                "onUpdate:modelValue": [
                                  t[0] || (t[0] = (I) => r.filter_order_type = I),
                                  i.filter_orders
                                ],
                                items: r.order_type_options,
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, {
                            cols: "12",
                            md: "3"
                          }, {
                            default: x(() => [
                              h(d, {
                                color: "primary",
                                label: e.frappe._("Status"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_status,
                                "onUpdate:modelValue": [
                                  t[1] || (t[1] = (I) => r.filter_status = I),
                                  i.filter_orders
                                ],
                                items: r.status_options,
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: x(() => [
                              h(f, {
                                color: "primary",
                                label: e.frappe._("Date"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_date,
                                "onUpdate:modelValue": [
                                  t[2] || (t[2] = (I) => r.filter_date = I),
                                  i.filter_orders
                                ],
                                type: "date",
                                density: "compact",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          h(u, {
                            cols: "12",
                            md: "3"
                          }, {
                            default: x(() => [
                              h(f, {
                                color: "primary",
                                label: e.frappe._("Search Order/Customer"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.search_text,
                                "onUpdate:modelValue": t[3] || (t[3] = (I) => r.search_text = I),
                                density: "compact",
                                clearable: "",
                                class: "mx-2",
                                "prepend-inner-icon": "mdi-magnify",
                                onInput: i.filter_orders
                              }, null, 8, ["label", "bg-color", "modelValue", "onInput"])
                            ]),
                            _: 1
                          }),
                          h(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: x(() => [
                              h(l, {
                                variant: "text",
                                color: "primary",
                                theme: "dark",
                                onClick: i.refresh_orders,
                                class: "mx-2",
                                loading: r.loading
                              }, {
                                default: x(() => [
                                  h(_, null, {
                                    default: x(() => t[13] || (t[13] = [
                                      ae("mdi-refresh")
                                    ])),
                                    _: 1,
                                    __: [13]
                                  }),
                                  ae(" " + W(e.__("Refresh")), 1)
                                ]),
                                _: 1
                              }, 8, ["onClick", "loading"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }),
                      h(g, { "no-gutters": "" }, {
                        default: x(() => [
                          h(u, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              h(B, {
                                headers: r.headers,
                                items: r.filtered_orders,
                                "item-key": "name",
                                class: "elevation-1",
                                "show-select": "",
                                modelValue: r.selected,
                                "onUpdate:modelValue": t[4] || (t[4] = (I) => r.selected = I),
                                "return-object": "",
                                "select-strategy": r.multiSelectMode ? "page" : "single",
                                loading: r.loading,
                                density: "compact",
                                "show-expand": "",
                                expanded: r.expanded,
                                "onUpdate:expanded": t[5] || (t[5] = (I) => r.expanded = I)
                              }, {
                                "item.transaction_date": x(({ item: I }) => [
                                  ae(W(i.formatDate(I.transaction_date)), 1)
                                ]),
                                "item.grand_total": x(({ item: I }) => [
                                  ae(W(e.currencySymbol(I.currency)) + " " + W(e.formatCurrency(I.grand_total)), 1)
                                ]),
                                "item.order_status": x(({ item: I }) => [
                                  h(v, {
                                    color: i.getStatusColor(I),
                                    size: "small",
                                    variant: "flat"
                                  }, {
                                    default: x(() => [
                                      h(_, {
                                        start: "",
                                        size: "small"
                                      }, {
                                        default: x(() => [
                                          ae(W(i.getStatusIcon(I)), 1)
                                        ]),
                                        _: 2
                                      }, 1024),
                                      ae(" " + W(i.getOrderStatus(I)), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["color"])
                                ]),
                                "item.table_number": x(({ item: I }) => [
                                  I.table_number ? (ne(), Fe(v, {
                                    key: 0,
                                    color: "info",
                                    size: "small",
                                    variant: "outlined"
                                  }, {
                                    default: x(() => [
                                      h(_, {
                                        start: "",
                                        size: "small"
                                      }, {
                                        default: x(() => t[14] || (t[14] = [
                                          ae("mdi-table-furniture")
                                        ])),
                                        _: 1,
                                        __: [14]
                                      }),
                                      ae(" " + W(I.table_number), 1)
                                    ]),
                                    _: 2
                                  }, 1024)) : (ne(), Be("span", rre, "-"))
                                ]),
                                "item.order_type_name": x(({ item: I }) => [
                                  h(v, {
                                    color: i.getOrderTypeColor(I.order_type_name),
                                    size: "small",
                                    variant: "tonal"
                                  }, {
                                    default: x(() => [
                                      ae(W(I.order_type_name || "N/A"), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["color"])
                                ]),
                                "item.actions": x(({ item: I }) => [
                                  h(l, {
                                    size: "small",
                                    color: "orange-darken-1",
                                    variant: "tonal",
                                    onClick: (M) => i.reprint_kot(I),
                                    class: "mr-1",
                                    loading: r.kotReprintLoading[I.name]
                                  }, {
                                    default: x(() => [
                                      h(_, { size: "small" }, {
                                        default: x(() => t[15] || (t[15] = [
                                          ae("mdi-silverware-fork-knife")
                                        ])),
                                        _: 1,
                                        __: [15]
                                      }),
                                      ae(" " + W(e.__("Reprint KOT")), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["onClick", "loading"]),
                                  i.canEdit(I) ? (ne(), Fe(l, {
                                    key: 0,
                                    size: "small",
                                    color: "primary",
                                    variant: "tonal",
                                    onClick: (M) => i.edit_order(I),
                                    class: "mr-1"
                                  }, {
                                    default: x(() => [
                                      h(_, { size: "small" }, {
                                        default: x(() => t[16] || (t[16] = [
                                          ae("mdi-pencil")
                                        ])),
                                        _: 1,
                                        __: [16]
                                      }),
                                      ae(" " + W(e.__("Edit")), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["onClick"])) : ke("", !0),
                                  i.canEdit(I) ? (ne(), Fe(l, {
                                    key: 1,
                                    size: "small",
                                    color: "warning",
                                    variant: "tonal",
                                    onClick: (M) => i.void_items(I),
                                    class: "mr-1"
                                  }, {
                                    default: x(() => [
                                      h(_, { size: "small" }, {
                                        default: x(() => t[17] || (t[17] = [
                                          ae("mdi-close-circle")
                                        ])),
                                        _: 1,
                                        __: [17]
                                      }),
                                      ae(" " + W(e.__("Void Items")), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["onClick"])) : ke("", !0),
                                  i.canDelete(I) ? (ne(), Fe(l, {
                                    key: 2,
                                    size: "small",
                                    color: "error",
                                    variant: "tonal",
                                    onClick: (M) => i.delete_order(I),
                                    class: "mr-1"
                                  }, {
                                    default: x(() => [
                                      h(_, { size: "small" }, {
                                        default: x(() => t[18] || (t[18] = [
                                          ae("mdi-delete")
                                        ])),
                                        _: 1,
                                        __: [18]
                                      }),
                                      ae(" " + W(e.__("Delete")), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["onClick"])) : i.canCancel(I) ? (ne(), Fe(l, {
                                    key: 3,
                                    size: "small",
                                    color: "error",
                                    variant: "tonal",
                                    onClick: (M) => i.cancel_order(I)
                                  }, {
                                    default: x(() => [
                                      h(_, { size: "small" }, {
                                        default: x(() => t[19] || (t[19] = [
                                          ae("mdi-cancel")
                                        ])),
                                        _: 1,
                                        __: [19]
                                      }),
                                      ae(" " + W(e.__("Cancel")), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["onClick"])) : ke("", !0)
                                ]),
                                "expanded-row": x(({ item: I }) => [
                                  A("td", {
                                    colspan: r.headers.length + 2
                                  }, [
                                    h(C, {
                                      flat: "",
                                      class: "ma-2"
                                    }, {
                                      default: x(() => [
                                        h(s, { class: "text-h6 text-primary" }, {
                                          default: x(() => [
                                            h(_, { class: "mr-2" }, {
                                              default: x(() => t[20] || (t[20] = [
                                                ae("mdi-receipt")
                                              ])),
                                              _: 1,
                                              __: [20]
                                            }),
                                            ae(" " + W(e.__("Order Details: {0}", [I.name])), 1)
                                          ]),
                                          _: 2
                                        }, 1024),
                                        h(E, null, {
                                          default: x(() => [
                                            h(g, null, {
                                              default: x(() => [
                                                h(u, {
                                                  cols: "12",
                                                  md: "6"
                                                }, {
                                                  default: x(() => [
                                                    A("div", ore, W(e.__("Order Information")), 1),
                                                    h(p, { density: "compact" }, {
                                                      default: x(() => [
                                                        h(b, null, {
                                                          prepend: x(() => [
                                                            h(_, null, {
                                                              default: x(() => t[21] || (t[21] = [
                                                                ae("mdi-calendar")
                                                              ])),
                                                              _: 1,
                                                              __: [21]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            h(w, null, {
                                                              default: x(() => [
                                                                ae(W(e.__("Date")) + ": " + W(i.formatDate(I.transaction_date)), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024),
                                                        h(b, null, {
                                                          prepend: x(() => [
                                                            h(_, null, {
                                                              default: x(() => t[22] || (t[22] = [
                                                                ae("mdi-account")
                                                              ])),
                                                              _: 1,
                                                              __: [22]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            h(w, null, {
                                                              default: x(() => [
                                                                ae(W(e.__("Customer")) + ": " + W(I.customer), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024),
                                                        I.table_number ? (ne(), Fe(b, { key: 0 }, {
                                                          prepend: x(() => [
                                                            h(_, null, {
                                                              default: x(() => t[23] || (t[23] = [
                                                                ae("mdi-table-furniture")
                                                              ])),
                                                              _: 1,
                                                              __: [23]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            h(w, null, {
                                                              default: x(() => [
                                                                ae(W(e.__("Table")) + ": " + W(I.table_number), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024)) : ke("", !0),
                                                        h(b, null, {
                                                          prepend: x(() => [
                                                            h(_, null, {
                                                              default: x(() => t[24] || (t[24] = [
                                                                ae("mdi-food")
                                                              ])),
                                                              _: 1,
                                                              __: [24]
                                                            })
                                                          ]),
                                                          default: x(() => [
                                                            h(w, null, {
                                                              default: x(() => [
                                                                ae(W(e.__("Order Type")) + ": " + W(I.order_type_name || "N/A"), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024)
                                                      ]),
                                                      _: 2
                                                    }, 1024)
                                                  ]),
                                                  _: 2
                                                }, 1024),
                                                h(u, {
                                                  cols: "12",
                                                  md: "6"
                                                }, {
                                                  default: x(() => [
                                                    A("div", sre, W(e.__("Items")), 1),
                                                    I.items && I.items.length ? (ne(), Fe(y, {
                                                      key: 0,
                                                      density: "compact"
                                                    }, {
                                                      default: x(() => [
                                                        A("thead", null, [
                                                          A("tr", null, [
                                                            A("th", lre, W(e.__("Item")), 1),
                                                            A("th", cre, W(e.__("Qty")), 1),
                                                            A("th", ure, W(e.__("Rate")), 1),
                                                            A("th", dre, W(e.__("Amount")), 1)
                                                          ])
                                                        ]),
                                                        A("tbody", null, [
                                                          (ne(!0), Be(Qe, null, un(I.items, (M) => (ne(), Be("tr", {
                                                            key: M.name
                                                          }, [
                                                            A("td", fre, W(M.item_name || M.item_code), 1),
                                                            A("td", mre, W(M.qty) + " " + W(M.uom || ""), 1),
                                                            A("td", hre, W(e.currencySymbol(I.currency)) + W(e.formatCurrency(M.rate)), 1),
                                                            A("td", _re, W(e.currencySymbol(I.currency)) + W(e.formatCurrency(M.amount)), 1)
                                                          ]))), 128))
                                                        ])
                                                      ]),
                                                      _: 2
                                                    }, 1024)) : (ne(), Be("div", pre, W(e.__("No items available")), 1))
                                                  ]),
                                                  _: 2
                                                }, 1024)
                                              ]),
                                              _: 2
                                            }, 1024),
                                            h(S, { class: "my-3" }),
                                            h(g, null, {
                                              default: x(() => [
                                                h(u, {
                                                  cols: "12",
                                                  md: "8"
                                                }),
                                                h(u, {
                                                  cols: "12",
                                                  md: "4"
                                                }, {
                                                  default: x(() => [
                                                    h(y, { density: "compact" }, {
                                                      default: x(() => [
                                                        A("tbody", null, [
                                                          A("tr", null, [
                                                            A("td", vre, W(e.__("Subtotal")) + ":", 1),
                                                            A("td", gre, W(e.currencySymbol(I.currency)) + W(e.formatCurrency(I.net_total || 0)), 1)
                                                          ]),
                                                          I.total_taxes_and_charges ? (ne(), Be("tr", yre, [
                                                            A("td", bre, W(e.__("Tax")) + ":", 1),
                                                            A("td", wre, W(e.currencySymbol(I.currency)) + W(e.formatCurrency(I.total_taxes_and_charges)), 1)
                                                          ])) : ke("", !0),
                                                          I.discount_amount ? (ne(), Be("tr", kre, [
                                                            A("td", Sre, W(e.__("Discount")) + ":", 1),
                                                            A("td", Cre, "-" + W(e.currencySymbol(I.currency)) + W(e.formatCurrency(I.discount_amount)), 1)
                                                          ])) : ke("", !0),
                                                          A("tr", Are, [
                                                            A("td", xre, W(e.__("Total")) + ":", 1),
                                                            A("td", Tre, W(e.currencySymbol(I.currency)) + W(e.formatCurrency(I.grand_total)), 1)
                                                          ])
                                                        ])
                                                      ]),
                                                      _: 2
                                                    }, 1024)
                                                  ]),
                                                  _: 2
                                                }, 1024)
                                              ]),
                                              _: 2
                                            }, 1024)
                                          ]),
                                          _: 2
                                        }, 1024)
                                      ]),
                                      _: 2
                                    }, 1024)
                                  ], 8, ire)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue", "select-strategy", "loading", "expanded"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(D, null, {
                default: x(() => [
                  h(l, {
                    color: "secondary",
                    variant: "outlined",
                    onClick: i.toggleMultiSelect,
                    class: "mr-2"
                  }, {
                    default: x(() => [
                      h(_, { start: "" }, {
                        default: x(() => [
                          ae(W(r.multiSelectMode ? "mdi-checkbox-multiple-marked" : "mdi-checkbox-multiple-blank"), 1)
                        ]),
                        _: 1
                      }),
                      ae(" " + W(r.multiSelectMode ? e.__("Single Select") : e.__("Multi Select")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  h(o),
                  h(l, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  r.selected.length === 1 && i.canConvertToPayment(r.selected[0]) ? (ne(), Fe(l, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.convert_to_payment,
                    loading: r.converting
                  }, {
                    default: x(() => [
                      ae(W(e.__("Convert to Payment")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick", "loading"])) : ke("", !0),
                  r.selected.length > 1 && i.canConvertMultipleToInvoice() ? (ne(), Fe(l, {
                    key: 1,
                    color: "primary",
                    theme: "dark",
                    onClick: i.convert_multiple_to_payment,
                    loading: r.converting
                  }, {
                    default: x(() => [
                      ae(W(e.__("Add {0} Draft Orders to Cart", [r.selected.length])), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick", "loading"])) : ke("", !0),
                  r.selected.length === 1 && i.canEdit(r.selected[0]) ? (ne(), Fe(l, {
                    key: 2,
                    color: "warning",
                    theme: "dark",
                    onClick: t[6] || (t[6] = (I) => i.edit_order(r.selected[0])),
                    loading: r.converting,
                    class: "mr-2"
                  }, {
                    default: x(() => [
                      ae(W(e.__("Edit Order")), 1)
                    ]),
                    _: 1
                  }, 8, ["loading"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"]),
      h(T, {
        modelValue: r.voidItemsDialog,
        "onUpdate:modelValue": t[12] || (t[12] = (I) => r.voidItemsDialog = I),
        "max-width": "800px"
      }, {
        default: x(() => [
          h(C, null, {
            default: x(() => [
              h(s, { class: "d-flex align-center" }, {
                default: x(() => [
                  A("span", Ire, W(e.__("Void Items")), 1),
                  h(o),
                  h(l, {
                    icon: "mdi-close",
                    variant: "text",
                    density: "compact",
                    onClick: t[8] || (t[8] = (I) => r.voidItemsDialog = !1)
                  })
                ]),
                _: 1
              }),
              r.selectedOrderForVoid ? (ne(), Fe(E, { key: 0 }, {
                default: x(() => [
                  h(O, null, {
                    default: x(() => [
                      h(g, { class: "mb-4" }, {
                        default: x(() => [
                          h(u, { cols: "12" }, {
                            default: x(() => [
                              h(P, {
                                type: "warning",
                                border: "start",
                                variant: "tonal"
                              }, {
                                default: x(() => [
                                  ae(W(e.__("Select items to void from order: ") + r.selectedOrderForVoid.name), 1)
                                ]),
                                _: 1
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }),
                      h(g, null, {
                        default: x(() => [
                          h(u, { cols: "12" }, {
                            default: x(() => [
                              h(B, {
                                headers: r.voidItemHeaders,
                                items: r.selectedOrderForVoid.items || [],
                                "item-value": "idx",
                                "show-select": "",
                                modelValue: r.selectedItemsToVoid,
                                "onUpdate:modelValue": t[9] || (t[9] = (I) => r.selectedItemsToVoid = I),
                                density: "compact",
                                loading: r.voidLoading,
                                "return-object": ""
                              }, {
                                "item.rate": x(({ item: I }) => [
                                  ae(W(e.formatCurrency(I.rate)), 1)
                                ]),
                                "item.amount": x(({ item: I }) => [
                                  ae(W(e.formatCurrency(I.amount)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue", "loading"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })) : ke("", !0),
              h(D, null, {
                default: x(() => [
                  h(o),
                  h(l, {
                    color: "grey",
                    variant: "text",
                    onClick: t[10] || (t[10] = (I) => r.voidItemsDialog = !1)
                  }, {
                    default: x(() => [
                      ae(W(e.__("Cancel")), 1)
                    ]),
                    _: 1
                  }),
                  h(l, {
                    color: "warning",
                    variant: "flat",
                    onClick: t[11] || (t[11] = (I) => i.confirmVoidItems(r.selectedOrderForVoid, r.selectedItemsToVoid)),
                    loading: r.voidLoading,
                    disabled: !r.selectedItemsToVoid || r.selectedItemsToVoid.length === 0
                  }, {
                    default: x(() => [
                      ae(W(e.__("Void Selected Items")), 1)
                    ]),
                    _: 1
                  }, 8, ["loading", "disabled"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Pre = /* @__PURE__ */ rn(nre, [["render", Ere], ["__scopeId", "data-v-f3714392"]]), Ore = {
  mixins: [Oi],
  data: () => ({
    closingDialog: !1,
    itemsPerPage: 20,
    dialog_data: {},
    pos_profile: "",
    headers: [
      {
        title: __("Mode of Payment"),
        value: "mode_of_payment",
        align: "start",
        sortable: !0
      },
      {
        title: __("Opening Amount"),
        align: "end",
        sortable: !0,
        value: "opening_amount"
      },
      {
        title: __("Closing Amount"),
        value: "closing_amount",
        align: "end",
        sortable: !0
      }
    ],
    max25chars: (e) => e.length <= 20 || "Input too long!",
    // TODO : should validate as number
    pagination: {}
  }),
  watch: {},
  methods: {
    close_dialog() {
      this.closingDialog = !1;
    },
    submit_dialog() {
      if ((this.dialog_data.payments || []).some(
        (t) => isNaN(parseFloat(t.closing_amount))
      )) {
        alert(this.__("Invalid closing amount"));
        return;
      }
      this.eventBus.emit("submit_closing_pos", this.dialog_data), this.closingDialog = !1;
    }
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  created: function() {
    this.eventBus.on("open_ClosingDialog", (e) => {
      this.closingDialog = !0, this.dialog_data = e;
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.pos_profile.hide_expected_amount || (this.headers.push({
        title: __("Expected Amount"),
        value: "expected_amount",
        align: "end",
        sortable: !1
      }), this.headers.push({
        title: __("Difference"),
        value: "difference",
        align: "end",
        sortable: !1
      }));
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_ClosingDialog"), this.eventBus.off("register_pos_profile");
  }
}, Dre = { class: "header-content" }, Bre = { class: "header-icon-wrapper" }, Vre = { class: "header-text" }, Mre = { class: "header-title" }, Rre = { class: "header-subtitle" }, Lre = { class: "table-header mb-4" }, Fre = { class: "text-h6 text-grey-darken-2 mb-1" }, Nre = { class: "text-body-2 text-grey" };
function Ure(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-card-title"), s = J("v-divider"), d = J("v-text-field"), u = J("v-data-table"), f = J("v-col"), _ = J("v-row"), g = J("v-container"), v = J("v-card-text"), w = J("v-btn"), b = J("v-spacer"), p = J("v-card-actions"), y = J("v-card"), S = J("v-dialog");
  return ne(), Fe(_, { justify: "center" }, {
    default: x(() => [
      h(S, {
        modelValue: e.closingDialog,
        "onUpdate:modelValue": t[0] || (t[0] = (E) => e.closingDialog = E),
        "max-width": "900px",
        persistent: ""
      }, {
        default: x(() => [
          h(y, {
            elevation: "8",
            class: "closing-dialog-card"
          }, {
            default: x(() => [
              h(l, { class: "closing-header pa-6" }, {
                default: x(() => [
                  A("div", Dre, [
                    A("div", Bre, [
                      h(o, {
                        class: "header-icon",
                        size: "40"
                      }, {
                        default: x(() => t[1] || (t[1] = [
                          ae("mdi-store-clock-outline")
                        ])),
                        _: 1,
                        __: [1]
                      })
                    ]),
                    A("div", Vre, [
                      A("h3", Mre, W(e.__("Closing POS Shift")), 1),
                      A("p", Rre, W(e.__("Reconcile payment methods and close shift")), 1)
                    ])
                  ])
                ]),
                _: 1
              }),
              h(s, { class: "header-divider" }),
              h(v, { class: "pa-0 white-background" }, {
                default: x(() => [
                  h(g, { class: "pa-6" }, {
                    default: x(() => [
                      h(_, null, {
                        default: x(() => [
                          h(f, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: x(() => [
                              A("div", Lre, [
                                A("h4", Fre, W(e.__("Payment Reconciliation")), 1),
                                A("p", Nre, W(e.__("Verify closing amounts for each payment method")), 1)
                              ]),
                              h(u, {
                                headers: e.headers,
                                items: e.dialog_data.payment_reconciliation,
                                "item-key": "mode_of_payment",
                                class: "elevation-0 rounded-lg white-table",
                                "items-per-page": e.itemsPerPage,
                                "hide-default-footer": "",
                                density: "compact"
                              }, {
                                "item.closing_amount": x((E) => [
                                  h(d, {
                                    modelValue: E.item.closing_amount,
                                    "onUpdate:modelValue": (C) => E.item.closing_amount = C,
                                    rules: [e.max25chars],
                                    label: e.frappe._("Edit"),
                                    "single-line": "",
                                    counter: "",
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                    class: "dark-field",
                                    "hide-details": "",
                                    prefix: e.currencySymbol(e.pos_profile.currency)
                                  }, null, 8, ["modelValue", "onUpdate:modelValue", "rules", "label", "bg-color", "prefix"])
                                ]),
                                "item.difference": x(({ item: E }) => [
                                  ae(W(e.currencySymbol(e.pos_profile.currency)) + " " + W(E.difference = e.formatCurrency(
                                    E.expected_amount - E.closing_amount
                                  )), 1)
                                ]),
                                "item.opening_amount": x(({ item: E }) => [
                                  ae(W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(E.opening_amount)), 1)
                                ]),
                                "item.expected_amount": x(({ item: E }) => [
                                  ae(W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(E.expected_amount)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "items-per-page"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(s),
              h(p, { class: "dialog-actions-container" }, {
                default: x(() => [
                  h(w, {
                    theme: "dark",
                    onClick: i.submit_dialog,
                    class: "pos-action-btn submit-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      h(o, { start: "" }, {
                        default: x(() => t[2] || (t[2] = [
                          ae("mdi-check-circle-outline")
                        ])),
                        _: 1,
                        __: [2]
                      }),
                      A("span", null, W(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  h(b),
                  h(w, {
                    theme: "dark",
                    onClick: i.close_dialog,
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: x(() => [
                      h(o, { start: "" }, {
                        default: x(() => t[3] || (t[3] = [
                          ae("mdi-close-circle-outline")
                        ])),
                        _: 1,
                        __: [3]
                      }),
                      A("span", null, W(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const $re = /* @__PURE__ */ rn(Ore, [["render", Ure], ["__scopeId", "data-v-6e72da1a"]]), qre = {
  data: () => ({
    addressDialog: !1,
    address: {},
    customer: ""
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  methods: {
    close_dialog() {
      this.addressDialog = !1;
    },
    submit_dialog() {
      var e = this;
      this.address.customer = this.customer, this.address.doctype = "Customer", frappe.call({
        method: "posawesome.posawesome.api.customers.make_address",
        args: {
          args: this.address
        },
        callback: (t) => {
          t.exc || (e.eventBus.emit("add_the_new_address", t.message), e.eventBus.emit("show_message", {
            text: "Customer Address created successfully.",
            color: "success"
          }), e.addressDialog = !1, e.customer = "", e.address = {});
        }
      });
    }
  },
  created: function() {
    this.eventBus.on("open_new_address", (e) => {
      this.addressDialog = !0, this.customer = e;
    });
  }
}, Hre = { class: "text-h5 text-primary" };
function zre(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-col"), d = J("v-row"), u = J("v-container"), f = J("v-card-text"), _ = J("v-spacer"), g = J("v-btn"), v = J("v-card-actions"), w = J("v-card"), b = J("v-dialog");
  return ne(), Fe(d, { justify: "center" }, {
    default: x(() => [
      h(b, {
        modelValue: e.addressDialog,
        "onUpdate:modelValue": t[5] || (t[5] = (p) => e.addressDialog = p),
        "max-width": "600px"
      }, {
        default: x(() => [
          h(w, null, {
            default: x(() => [
              h(o, null, {
                default: x(() => [
                  A("span", Hre, W(e.__("Add New Address")), 1)
                ]),
                _: 1
              }),
              h(f, { class: "pa-0" }, {
                default: x(() => [
                  h(u, null, {
                    default: x(() => [
                      h(d, null, {
                        default: x(() => [
                          h(s, { cols: "12" }, {
                            default: x(() => [
                              h(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Name"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.name,
                                "onUpdate:modelValue": t[0] || (t[0] = (p) => e.address.name = p)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(s, { cols: "12" }, {
                            default: x(() => [
                              h(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Line 1"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.address_line1,
                                "onUpdate:modelValue": t[1] || (t[1] = (p) => e.address.address_line1 = p)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(s, { cols: "12" }, {
                            default: x(() => [
                              h(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Line 2"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.address_line2,
                                "onUpdate:modelValue": t[2] || (t[2] = (p) => e.address.address_line2 = p)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(s, { cols: "6" }, {
                            default: x(() => [
                              h(l, {
                                label: "City",
                                density: "compact",
                                color: "primary",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.city,
                                "onUpdate:modelValue": t[3] || (t[3] = (p) => e.address.city = p)
                              }, null, 8, ["bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          h(s, { cols: "6" }, {
                            default: x(() => [
                              h(l, {
                                label: "State",
                                density: "compact",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.state,
                                "onUpdate:modelValue": t[4] || (t[4] = (p) => e.address.state = p)
                              }, null, 8, ["bg-color", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(v, null, {
                default: x(() => [
                  h(_),
                  h(g, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  h(g, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Wre = /* @__PURE__ */ rn(qre, [["render", zre], ["__scopeId", "data-v-b00b18cc"]]), jre = {
  data: () => ({
    varaintsDialog: !1,
    parentItem: null,
    items: null,
    filters: {},
    filterdItems: [],
    pos_profile: null,
    attributes_meta: {},
    displayCount: 100,
    placeholderImage: BD
  }),
  computed: {
    variantsItems() {
      return !this.parentItem || !Array.isArray(this.items) ? [] : this.items.filter((e) => e.variant_of == this.parentItem.item_code);
    },
    displayItems() {
      return this.filterdItems.slice(0, this.displayCount);
    }
  },
  watch: {
    items: {
      handler() {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      },
      deep: !0
    },
    parentItem() {
      this.filterdItems = this.variantsItems, this.displayCount = 100;
    },
    attributes_meta: {
      handler(e) {
        this.parentItem && e && Object.keys(e).length ? this.parentItem.attributes = Object.keys(e).map((t) => ({
          attribute: t,
          values: e[t].map((n) => ({ attribute_value: n, abbr: n }))
        })) : this.parentItem && (this.parentItem.attributes = []), this.$nextTick(() => {
          this.filterdItems = this.variantsItems, this.displayCount = 100;
        });
      },
      deep: !0
    },
    filters: {
      handler() {
        this.updateFiltredItems();
      },
      deep: !0
    }
  },
  methods: {
    close_dialog() {
      this.varaintsDialog = !1;
    },
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, 2);
    },
    formatCurrencySafe(e) {
      const t = this.$options.mixins && this.$options.mixins[0] && this.$options.mixins[0].methods && this.$options.mixins[0].methods.formatCurrency;
      return t ? t.call(this, e, 2) : new Intl.NumberFormat("en-PK", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 2
      }).format(e);
    },
    applyCurrencyConversionToItem(e) {
      e && (e.original_rate || (e.original_rate = e.price_list_rate || e.rate, e.original_currency = e.currency || this.pos_profile && this.pos_profile.currency), e.base_price_list_rate = e.price_list_rate || e.original_rate, e.base_rate = e.base_rate || e.base_price_list_rate, e.rate = e.price_list_rate || e.rate, e.currency = e.currency || this.pos_profile && this.pos_profile.currency, console.log("after currency conversion", {
        code: e.item_code,
        rate: e.rate,
        currency: e.currency
      }));
    },
    async fetchVariants(e, t) {
      console.log("fetchVariants called with", e, t);
      try {
        const n = await frappe.call({
          method: "posawesome.posawesome.api.items.get_item_variants",
          args: {
            pos_profile: JSON.stringify(t || this.pos_profile || {}),
            parent_item_code: e
          }
        });
        if (console.log("variants API result", n), n.message) {
          const a = n.message.variants || n.message;
          this.attributes_meta = n.message.attributes_meta || this.attributes_meta;
          const r = new Set((this.items || []).map((o) => o.item_code)), i = a.filter((o) => !r.has(o.item_code));
          console.log("new variant items", i), await Promise.all(i.map((o) => this.fetchVariantRate(o))), this.items = (this.items || []).concat(i);
        }
      } catch (n) {
        console.error("Failed to fetch variants", n);
      }
    },
    updateFiltredItems: Ni.debounce(function() {
      this.$nextTick(() => {
        const e = [];
        if (Object.entries(this.filters).forEach(([, t]) => {
          t && e.push(t);
        }), !e.length)
          this.filterdItems = this.variantsItems;
        else {
          const t = [];
          this.filterdItems = [], this.variantsItems.forEach((n) => {
            let a = !0, r = [];
            if (Array.isArray(n.item_attributes))
              r = n.item_attributes;
            else if (typeof n.item_attributes == "string" && n.item_attributes.trim().startsWith("["))
              try {
                r = JSON.parse(n.item_attributes);
              } catch {
                r = [];
              }
            for (const [i, o] of Object.entries(this.filters)) {
              if (!o) continue;
              if (!r.find(
                (s) => s.attribute === i && String(s.attribute_value) === String(o)
              )) {
                a = !1;
                break;
              }
            }
            a && !t.includes(n.item_code) && (this.filterdItems.push(n), t.push(n.item_code));
          });
        }
        console.log(
          "filtered items",
          this.filterdItems.map((t) => t.item_code)
        ), this.displayCount = 100;
      });
    }, 200),
    clearFilter(e) {
      this.filters[e] = null, this.$nextTick(() => {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      });
    },
    loadMore() {
      this.displayCount < this.filterdItems.length && (this.displayCount += 100);
    },
    async fetchVariantRate(e) {
      if (this.pos_profile || (this.pos_profile = await Gb()), !this.pos_profile.warehouse)
        try {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.utils.get_default_warehouse",
            args: { company: this.pos_profile.company }
          });
          t.message && (this.pos_profile.warehouse = t.message);
        } catch (t) {
          console.error("Failed to fetch default warehouse", t);
        }
      console.log("fetchVariantRate called for", e.item_code);
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.items.get_item_detail",
          args: {
            warehouse: e.warehouse || this.pos_profile.warehouse,
            price_list: this.pos_profile.selling_price_list,
            company: this.pos_profile.company,
            item: JSON.stringify({
              item_code: e.item_code,
              pos_profile: this.pos_profile.name,
              qty: e.qty || 1,
              uom: e.uom || e.stock_uom,
              doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
            })
          }
        });
        if (console.log("variant rate result", t), t.message) {
          const n = t.message;
          e.rate = n.price_list_rate, e.price_list_rate = n.price_list_rate, e.base_rate = n.price_list_rate, e.base_price_list_rate = n.price_list_rate, e.currency = n.currency || n.price_list_currency || this.pos_profile.currency, this.applyCurrencyConversionToItem(e), console.log("rate applied", {
            code: e.item_code,
            rate: e.rate
          });
        }
      } catch (t) {
        console.error("Failed to fetch variant rate", t);
      }
    },
    async add_item(e) {
      console.log("add_item called", e.item_code), await this.fetchVariantRate(e);
      const t = { ...e, code: e.item_code };
      console.log("emitting add_item", {
        code: t.code,
        rate: t.rate
      }), this.eventBus.emit("add_item", t), this.close_dialog();
    }
  },
  created: function() {
    this.eventBus.on("open_variants_model", async (e, t, n, a) => {
      if (console.log("open_variants_model", { item: e, items: t, profile: n, attrsMeta: a }), this.varaintsDialog = !0, this.parentItem = e || null, this.items = Array.isArray(t) ? t : [], this.filters = {}, this.attributes_meta = a || this.attributes_meta, !this.parentItem.attributes && this.attributes_meta && Object.keys(this.attributes_meta).length && (this.parentItem.attributes = Object.keys(this.attributes_meta).map((r) => ({
        attribute: r,
        values: this.attributes_meta[r].map((i) => ({ attribute_value: i, abbr: i }))
      }))), n ? this.pos_profile = n : this.pos_profile = await Gb(), !this.items || this.items.length === 0) {
        const r = e.item_code || e.code || e.name;
        await this.fetchVariants(r, this.pos_profile);
      }
      this.$nextTick(() => {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      });
    });
  },
  beforeUnmount() {
    console.log("variants dialog destroyed"), this.eventBus.off("open_variants_model");
  }
}, Yre = { class: "text-caption text-primary text-accent-3" };
function Kre(e, t, n, a, r, i) {
  const o = J("v-spacer"), l = J("v-btn"), s = J("v-card-title"), d = J("v-chip"), u = J("v-chip-group"), f = J("v-divider"), _ = J("v-card-text"), g = J("v-img"), v = J("v-card"), w = J("v-col"), b = J("v-row"), p = J("v-container"), y = J("v-dialog"), S = UF("intersect");
  return ne(), Fe(b, { justify: "center" }, {
    default: x(() => [
      h(y, {
        modelValue: e.varaintsDialog,
        "onUpdate:modelValue": t[0] || (t[0] = (E) => e.varaintsDialog = E),
        "max-width": "600px"
      }, {
        default: x(() => [
          h(v, { "min-height": "500px" }, {
            default: x(() => [
              h(s, null, {
                default: x(() => [
                  t[2] || (t[2] = A("span", { class: "text-h5 text-primary" }, "Select Item", -1)),
                  h(o),
                  h(l, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[1] || (t[1] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [1]
                  }, 8, ["onClick"])
                ]),
                _: 1,
                __: [2]
              }),
              h(_, { class: "pa-0" }, {
                default: x(() => [
                  e.parentItem ? (ne(), Fe(p, { key: 0 }, {
                    default: x(() => [
                      (ne(!0), Be(Qe, null, un(e.parentItem.attributes, (E) => (ne(), Be("div", {
                        key: E.attribute
                      }, [
                        h(u, {
                          modelValue: e.filters[E.attribute],
                          "onUpdate:modelValue": [(C) => e.filters[E.attribute] = C, i.updateFiltredItems],
                          "selected-class": "green--text text--accent-4",
                          column: ""
                        }, {
                          default: x(() => [
                            (ne(!0), Be(Qe, null, un(E.values, (C) => (ne(), Fe(d, {
                              key: C.abbr,
                              value: C.attribute_value,
                              variant: "outlined",
                              label: ""
                            }, {
                              default: x(() => [
                                ae(W(C.attribute_value), 1)
                              ]),
                              _: 2
                            }, 1032, ["value"]))), 128)),
                            e.filters[E.attribute] ? (ne(), Fe(d, {
                              key: 0,
                              value: null,
                              variant: "text",
                              color: "primary",
                              onClick: Jn((C) => i.clearFilter(E.attribute), ["stop"])
                            }, {
                              default: x(() => [
                                ae(W(e.__("Clear")), 1)
                              ]),
                              _: 2
                            }, 1032, ["onClick"])) : ke("", !0)
                          ]),
                          _: 2
                        }, 1032, ["modelValue", "onUpdate:modelValue"]),
                        h(f, { class: "p-0 m-0" })
                      ]))), 128)),
                      A("div", null, [
                        h(b, {
                          density: "default",
                          class: "overflow-y-auto",
                          style: { "max-height": "500px" }
                        }, {
                          default: x(() => [
                            (ne(!0), Be(Qe, null, un(i.displayItems, (E, C) => (ne(), Fe(w, {
                              key: C,
                              xl: "2",
                              lg: "3",
                              md: "4",
                              sm: "4",
                              cols: "6",
                              "min-height": "50"
                            }, {
                              default: x(() => [
                                h(v, {
                                  hover: "hover",
                                  onClick: (B) => i.add_item(E)
                                }, {
                                  default: x(() => [
                                    h(g, {
                                      src: E.image || e.placeholderImage,
                                      class: "text-white align-end",
                                      gradient: "to bottom, rgba(0,0,0,.2), rgba(0,0,0,.7)",
                                      height: "100px"
                                    }, {
                                      default: x(() => [
                                        h(_, {
                                          textContent: W(E.item_name),
                                          class: "text-subtitle-2 px-1 pb-2"
                                        }, null, 8, ["textContent"])
                                      ]),
                                      _: 2
                                    }, 1032, ["src"]),
                                    h(_, { class: "text--primary pa-1" }, {
                                      default: x(() => [
                                        A("div", Yre, W(i.formatCurrencySafe(E.price_list_rate || E.rate || 0)) + " " + W(E.currency || ""), 1)
                                      ]),
                                      _: 2
                                    }, 1024)
                                  ]),
                                  _: 2
                                }, 1032, ["onClick"])
                              ]),
                              _: 2
                            }, 1024))), 128)),
                            ln(A("div", null, null, 512), [
                              [S, i.loadMore]
                            ])
                          ]),
                          _: 1
                        })
                      ])
                    ]),
                    _: 1
                  })) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Gre = /* @__PURE__ */ rn(jre, [["render", Kre]]), Qre = {
  mixins: [Oi],
  data: () => ({
    invoicesDialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: [],
    company: "",
    invoice_name: "",
    customer_name: "",
    customer_id: "",
    mobile_no: "",
    tax_id: "",
    from_date: null,
    to_date: null,
    from_date_formatted: null,
    to_date_formatted: null,
    min_amount: "",
    max_amount: "",
    pos_profile: "",
    page: 1,
    has_more_invoices: !1,
    loading_more: !1,
    searched_once: !1,
    current_search_params: null,
    headers: [
      {
        title: __("Customer"),
        value: "customer",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      },
      {
        title: __("Invoice"),
        value: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    from_date() {
      this.formatFromDate();
    },
    to_date() {
      this.formatToDate();
    }
  },
  methods: {
    formatDateDisplay(e) {
      if (!e) return "";
      try {
        const n = Rt.fromArabicNumerals(String(e)).split("-");
        if (n.length === 3) {
          const a = `${n[2]}-${n[1]}-${n[0]}`;
          return Rt.toArabicNumerals(a);
        }
      } catch (t) {
        console.error("Error formatting date:", t);
      }
      return Rt.toArabicNumerals(String(e));
    },
    formatFromDate() {
      if (this.from_date)
        try {
          let e = "";
          if (typeof this.from_date == "object" && this.from_date instanceof Date) {
            const t = String(this.from_date.getDate()).padStart(2, "0"), n = String(this.from_date.getMonth() + 1).padStart(2, "0"), a = this.from_date.getFullYear();
            e = `${t}-${n}-${a}`;
          } else if (typeof this.from_date == "string" && this.from_date.includes("-")) {
            const t = Rt.fromArabicNumerals(this.from_date).split("-");
            t.length === 3 ? e = `${t[2]}-${t[1]}-${t[0]}` : e = Rt.fromArabicNumerals(this.from_date);
          } else
            e = Rt.fromArabicNumerals(String(this.from_date));
          this.from_date_formatted = Rt.toArabicNumerals(e);
        } catch (e) {
          console.error("Error formatting from_date:", e), this.from_date_formatted = Rt.toArabicNumerals(String(this.from_date));
        }
      else
        this.from_date_formatted = null;
    },
    formatToDate() {
      if (this.to_date)
        try {
          let e = "";
          if (typeof this.to_date == "object" && this.to_date instanceof Date) {
            const t = String(this.to_date.getDate()).padStart(2, "0"), n = String(this.to_date.getMonth() + 1).padStart(2, "0"), a = this.to_date.getFullYear();
            e = `${t}-${n}-${a}`;
          } else if (typeof this.to_date == "string" && this.to_date.includes("-")) {
            const t = Rt.fromArabicNumerals(this.to_date).split("-");
            t.length === 3 ? e = `${t[2]}-${t[1]}-${t[0]}` : e = Rt.fromArabicNumerals(this.to_date);
          } else
            e = Rt.fromArabicNumerals(String(this.to_date));
          this.to_date_formatted = Rt.toArabicNumerals(e);
        } catch (e) {
          console.error("Error formatting to_date:", e), this.to_date_formatted = Rt.toArabicNumerals(String(this.to_date));
        }
      else
        this.to_date_formatted = null;
    },
    clearFromDate() {
      this.from_date = null, this.from_date_formatted = null;
    },
    clearToDate() {
      this.to_date = null, this.to_date_formatted = null;
    },
    close_dialog() {
      this.invoicesDialog = !1;
    },
    clear_search() {
      this.invoice_name = "", this.customer_name = "", this.customer_id = "", this.mobile_no = "", this.tax_id = "", this.from_date = null, this.to_date = null, this.from_date_formatted = null, this.to_date_formatted = null, this.min_amount = "", this.max_amount = "", this.dialog_data = [], this.page = 1, this.has_more_invoices = !1, this.searched_once = !1;
    },
    search_invoices_by_enter(e) {
      e.keyCode === 13 && this.search_invoices();
    },
    search_invoices() {
      this.page = 1, this.dialog_data = [], this.perform_search();
    },
    perform_search() {
      const e = this;
      e.loading_more = !0;
      let t = null, n = null;
      if (e.from_date) {
        if (typeof e.from_date == "object" && e.from_date instanceof Date)
          t = [
            e.from_date.getFullYear(),
            String(e.from_date.getMonth() + 1).padStart(2, "0"),
            String(e.from_date.getDate()).padStart(2, "0")
          ].join("-");
        else if (typeof e.from_date == "string") {
          const i = Rt.fromArabicNumerals(e.from_date);
          if (i.includes("/")) {
            const o = i.split("/");
            o.length === 3 && (t = `${o[2]}-${o[1]}-${o[0]}`);
          } else if (i.includes("-")) {
            const o = i.split("-");
            o.length === 3 && (o[0].length === 4 ? t = i : t = `${o[2]}-${o[1]}-${o[0]}`);
          } else
            t = null;
        }
      }
      if (e.to_date) {
        if (typeof e.to_date == "object" && e.to_date instanceof Date)
          n = [
            e.to_date.getFullYear(),
            String(e.to_date.getMonth() + 1).padStart(2, "0"),
            String(e.to_date.getDate()).padStart(2, "0")
          ].join("-");
        else if (typeof e.to_date == "string") {
          const i = Rt.fromArabicNumerals(e.to_date);
          if (i.includes("/")) {
            const o = i.split("/");
            o.length === 3 && (n = `${o[2]}-${o[1]}-${o[0]}`);
          } else if (i.includes("-")) {
            const o = i.split("-");
            o.length === 3 && (o[0].length === 4 ? n = i : n = `${o[2]}-${o[1]}-${o[0]}`);
          } else
            n = null;
        }
      }
      let a = e.min_amount ? parseFloat(Rt.fromArabicNumerals(e.min_amount)) : null, r = e.max_amount ? parseFloat(Rt.fromArabicNumerals(e.max_amount)) : null;
      this.current_search_params = {
        invoice_name: e.invoice_name,
        customer_name: e.customer_name,
        customer_id: e.customer_id,
        mobile_no: e.mobile_no,
        tax_id: e.tax_id,
        from_date: t,
        to_date: n,
        min_amount: a,
        max_amount: r,
        company: e.company,
        page: e.page,
        doctype: e.pos_profile && e.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
      }, frappe.call({
        method: "posawesome.posawesome.api.invoices.search_invoices_for_return",
        args: this.current_search_params,
        callback: function(i) {
          e.loading_more = !1, e.searched_once = !0, i.message ? (e.page === 1 ? e.dialog_data = i.message.invoices : e.dialog_data = [...e.dialog_data, ...i.message.invoices], e.has_more_invoices = i.message.has_more) : (e.dialog_data = [], e.has_more_invoices = !1, e.eventBus.emit("show_message", {
            title: __("No invoices found"),
            color: "warning"
          }));
        },
        error: function(i) {
          e.loading_more = !1, console.error("Error searching invoices:", i), e.eventBus.emit("show_message", {
            title: __("Error searching invoices"),
            color: "error"
          });
        }
      });
    },
    load_more_invoices() {
      this.page += 1, this.perform_search();
    },
    return_without_invoice() {
      console.log("Starting return without invoice flow");
      const e = {};
      e.items = [], e.is_return = 1;
      const t = { invoice_doc: e };
      console.log("Emitting load_return_invoice event with data:", t), this.eventBus.emit("load_return_invoice", t), this.invoicesDialog = !1;
    },
    submit_dialog() {
      if (this.selected.length > 0) {
        console.log("Starting return with invoice flow");
        const e = this.selected[0], t = {}, n = [];
        console.log("Original return doc:", e), e.items.forEach((r) => {
          const i = { ...r };
          e.doctype === "POS Invoice" ? i.pos_invoice_item = r.name : i.sales_invoice_item = r.name, delete i.name, i.rate = r.rate, i.price_list_rate = r.price_list_rate, i.discount_percentage = r.discount_percentage, i.discount_amount = r.discount_amount, i.is_free_item = r.is_free_item, i.net_rate = r.net_rate, i.net_amount = r.net_amount > 0 ? r.net_amount * -1 : r.net_amount, i.locked_price = !0, i.qty = r.qty > 0 ? r.qty * -1 : r.qty, i.stock_qty = r.stock_qty > 0 ? r.stock_qty * -1 : r.stock_qty, i.amount = r.amount > 0 ? r.amount * -1 : r.amount, n.push(i);
        }), t.items = n, t.is_return = 1, t.return_against = e.name, t.customer = e.customer, t.discount_amount = e.discount_amount, t.additional_discount_percentage = e.additional_discount_percentage, e.grand_total > 0 ? t.grand_total = e.grand_total * -1 : t.grand_total = e.grand_total, t.update_stock = 1, t.pos_profile = this.pos_profile.name, t.company = this.company;
        const a = { invoice_doc: t, return_doc: e };
        console.log("Emitting load_return_invoice event with data:", a), this.eventBus.emit("load_return_invoice", a), this.invoicesDialog = !1;
      }
    }
  },
  created: function() {
    this.eventBus.on("open_returns", (e) => {
      this.invoicesDialog = !0, this.company = e, this.invoice_name = "", this.customer_name = "", this.customer_id = "", this.mobile_no = "", this.tax_id = "", this.from_date = null, this.to_date = null, this.from_date_formatted = null, this.to_date_formatted = null, this.min_amount = "", this.max_amount = "", this.dialog_data = [], this.selected = [], this.page = 1, this.has_more_invoices = !1, this.searched_once = !1;
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_returns"), this.eventBus.off("register_pos_profile");
  }
}, Jre = { class: "text-h5 text-primary" }, Xre = {
  key: 0,
  class: "text-center mt-3"
};
function Zre(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-alert"), s = J("v-col"), d = J("v-row"), u = J("v-text-field"), f = J("VueDatePicker"), _ = J("v-divider"), g = J("v-spacer"), v = J("v-icon"), w = J("v-btn"), b = J("v-data-table"), p = J("v-container"), y = J("v-card-actions"), S = J("v-card"), E = J("v-dialog");
  return ne(), Fe(d, { justify: "center" }, {
    default: x(() => [
      h(E, {
        modelValue: e.invoicesDialog,
        "onUpdate:modelValue": t[12] || (t[12] = (C) => e.invoicesDialog = C),
        "max-width": "800px",
        "min-width": "800px"
      }, {
        default: x(() => [
          h(S, null, {
            default: x(() => [
              h(o, null, {
                default: x(() => [
                  A("span", Jre, W(e.__("Select Return Invoice")), 1)
                ]),
                _: 1
              }),
              h(p, null, {
                default: x(() => [
                  h(d, { class: "mb-2" }, {
                    default: x(() => [
                      h(s, { cols: "12" }, {
                        default: x(() => [
                          !e.from_date && !e.to_date ? (ne(), Fe(l, {
                            key: 0,
                            density: "compact",
                            type: "info",
                            variant: "outlined"
                          }, {
                            default: x(() => [
                              A("small", null, W(e.__("Use date range to search for older invoices")), 1)
                            ]),
                            _: 1
                          })) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, { class: "mb-3" }, {
                    default: x(() => [
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Invoice ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.invoice_name,
                            "onUpdate:modelValue": t[0] || (t[0] = (C) => e.invoice_name = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        cols: "12",
                        sm: "3"
                      }, {
                        default: x(() => [
                          h(f, {
                            modelValue: e.from_date,
                            "onUpdate:modelValue": [
                              t[1] || (t[1] = (C) => e.from_date = C),
                              t[2] || (t[2] = (C) => i.formatFromDate())
                            ],
                            "model-type": "format",
                            format: "dd-MM-yyyy",
                            "enable-time-picker": !1,
                            "auto-apply": "",
                            dark: i.isDarkTheme
                          }, null, 8, ["modelValue", "dark"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        cols: "12",
                        sm: "3"
                      }, {
                        default: x(() => [
                          h(f, {
                            modelValue: e.to_date,
                            "onUpdate:modelValue": [
                              t[3] || (t[3] = (C) => e.to_date = C),
                              t[4] || (t[4] = (C) => i.formatToDate())
                            ],
                            "model-type": "format",
                            format: "dd-MM-yyyy",
                            "enable-time-picker": !1,
                            "auto-apply": "",
                            dark: i.isDarkTheme
                          }, null, 8, ["modelValue", "dark"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, { class: "mb-2" }, {
                    default: x(() => [
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Customer Name"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.customer_name,
                            "onUpdate:modelValue": t[5] || (t[5] = (C) => e.customer_name = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Customer ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.customer_id,
                            "onUpdate:modelValue": t[6] || (t[6] = (C) => e.customer_id = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, { class: "mb-3" }, {
                    default: x(() => [
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Mobile Number"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.mobile_no,
                            "onUpdate:modelValue": t[7] || (t[7] = (C) => e.mobile_no = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Tax ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.tax_id,
                            "onUpdate:modelValue": t[8] || (t[8] = (C) => e.tax_id = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, { class: "mb-3" }, {
                    default: x(() => [
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Minimum Amount"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.min_amount,
                            "onUpdate:modelValue": t[9] || (t[9] = (C) => e.min_amount = C),
                            density: "compact",
                            clearable: "",
                            type: "number",
                            min: "0",
                            placeholder: "0"
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: x(() => [
                          h(u, {
                            color: "primary",
                            label: e.frappe._("Maximum Amount"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.max_amount,
                            "onUpdate:modelValue": t[10] || (t[10] = (C) => e.max_amount = C),
                            density: "compact",
                            clearable: "",
                            type: "number",
                            min: "0",
                            placeholder: "No limit"
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, null, {
                    default: x(() => [
                      h(s, {
                        cols: "12",
                        class: "pt-0 pb-0"
                      }, {
                        default: x(() => [
                          h(_)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, { class: "mt-2 mb-2" }, {
                    default: x(() => [
                      h(g),
                      h(w, {
                        variant: "text",
                        class: "ml-2",
                        color: "primary",
                        theme: "dark",
                        onClick: i.search_invoices
                      }, {
                        default: x(() => [
                          h(v, { start: "" }, {
                            default: x(() => t[13] || (t[13] = [
                              ae("mdi-magnify")
                            ])),
                            _: 1,
                            __: [13]
                          }),
                          ae(" " + W(e.__("Search")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      h(w, {
                        variant: "text",
                        class: "ml-2",
                        color: "warning",
                        theme: "dark",
                        onClick: i.clear_search
                      }, {
                        default: x(() => [
                          h(v, { start: "" }, {
                            default: x(() => t[14] || (t[14] = [
                              ae("mdi-refresh")
                            ])),
                            _: 1,
                            __: [14]
                          }),
                          ae(" " + W(e.__("Clear")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      e.pos_profile.posa_allow_return_without_invoice == 1 ? (ne(), Fe(w, {
                        key: 0,
                        variant: "text",
                        class: "ml-2",
                        color: "secondary",
                        theme: "dark",
                        onClick: i.return_without_invoice
                      }, {
                        default: x(() => [
                          ae(W(e.__("Return without Invoice")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"])) : ke("", !0)
                    ]),
                    _: 1
                  }),
                  h(d, null, {
                    default: x(() => [
                      e.dialog_data && e.dialog_data.length > 0 ? (ne(), Fe(s, {
                        key: 0,
                        cols: "12",
                        class: "pa-0 mt-1"
                      }, {
                        default: x(() => [
                          h(b, {
                            headers: e.headers,
                            items: e.dialog_data,
                            "item-key": "name",
                            class: "elevation-1",
                            "show-select": "",
                            modelValue: e.selected,
                            "onUpdate:modelValue": t[11] || (t[11] = (C) => e.selected = C),
                            "select-strategy": "single",
                            "return-object": "",
                            "footer-props": {
                              "items-per-page-options": [10, 25, 50, 100],
                              "items-per-page-text": "Invoices per page"
                            },
                            "items-per-page": 25
                          }, {
                            "item.posting_date": x(({ item: C }) => [
                              ae(W(i.formatDateDisplay(C.posting_date)), 1)
                            ]),
                            "item.grand_total": x(({ item: C }) => [
                              ae(W(e.currencySymbol(C.currency)) + " " + W(e.formatCurrency(C.grand_total)), 1)
                            ]),
                            _: 1
                          }, 8, ["headers", "items", "modelValue"]),
                          e.has_more_invoices ? (ne(), Be("div", Xre, [
                            h(w, {
                              color: "primary",
                              variant: "outlined",
                              loading: e.loading_more,
                              onClick: i.load_more_invoices
                            }, {
                              default: x(() => [
                                ae(W(e.__("Load More Invoices")), 1)
                              ]),
                              _: 1
                            }, 8, ["loading", "onClick"])
                          ])) : ke("", !0)
                        ]),
                        _: 1
                      })) : e.searched_once && (!e.dialog_data || e.dialog_data.length === 0) ? (ne(), Fe(s, {
                        key: 1,
                        cols: "12",
                        class: "text-center"
                      }, {
                        default: x(() => [
                          h(l, {
                            type: "warning",
                            text: ""
                          }, {
                            default: x(() => [
                              ae(W(e.__("No invoices found. Try different search criteria.")), 1)
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })) : ke("", !0)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(y, { class: "mt-1" }, {
                default: x(() => [
                  h(g),
                  h(w, {
                    color: "error mx-2",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  e.selected.length ? (ne(), Fe(w, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Select")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const eie = /* @__PURE__ */ rn(Qre, [["render", Zre]]), tie = {
  data: () => ({
    dialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: "",
    company: "",
    customer: "",
    mode_of_payment: "",
    full_name: "",
    mobile_no: "",
    headers: [
      {
        title: __("Full Name"),
        value: "full_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Mobile No"),
        value: "mobile_no",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "amount",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.dialog = !1;
    },
    search_by_enter(e) {
      e.keyCode === 13 && this.search();
    },
    search() {
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.m_pesa.get_mpesa_draft_payments",
        args: {
          company: this.company,
          mode_of_payment: this.mode_of_payment,
          mobile_no: this.mobile_no,
          full_name: this.full_name
        },
        async: !1,
        callback: function(t) {
          t.exc || (e.dialog_data = t.message);
        }
      });
    },
    submit_dialog() {
      var e = this;
      if (this.selected.length > 0) {
        const t = this.selected[0].name;
        frappe.call({
          method: "posawesome.posawesome.api.m_pesa.submit_mpesa_payment",
          args: {
            mpesa_payment: t,
            customer: this.customer
          },
          async: !1,
          callback: function(n) {
            n.exc || (e.eventBus.emit("set_mpesa_payment", n.message), e.dialog = !1);
          }
        });
      }
    },
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, 2);
    }
  },
  created: function() {
    this.eventBus.on("open_mpesa_payments", (e) => {
      this.dialog = !0, this.full_name = "", this.mobile_no = "", this.company = e.company, this.customer = e.customer, this.mode_of_payment = e.mode_of_payment, this.dialog_data = "", this.selected = [];
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_mpesa_payments");
  }
}, nie = { class: "text-h5 text-primary" };
function aie(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-btn"), d = J("v-row"), u = J("v-data-table"), f = J("v-col"), _ = J("v-container"), g = J("v-spacer"), v = J("v-card-actions"), w = J("v-card"), b = J("v-dialog");
  return ne(), Fe(d, { justify: "center" }, {
    default: x(() => [
      h(b, {
        modelValue: e.dialog,
        "onUpdate:modelValue": t[3] || (t[3] = (p) => e.dialog = p),
        "max-width": "800px",
        "min-width": "800px"
      }, {
        default: x(() => [
          h(w, null, {
            default: x(() => [
              h(o, null, {
                default: x(() => [
                  A("span", nie, W(e.__("Select Payment")), 1)
                ]),
                _: 1
              }),
              h(_, null, {
                default: x(() => [
                  h(d, { class: "mb-4" }, {
                    default: x(() => [
                      h(l, {
                        color: "primary",
                        label: e.frappe._("Full Name"),
                        "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                        "hide-details": "",
                        modelValue: e.full_name,
                        "onUpdate:modelValue": t[0] || (t[0] = (p) => e.full_name = p),
                        density: "compact",
                        clearable: "",
                        class: "mx-4"
                      }, null, 8, ["label", "bg-color", "modelValue"]),
                      h(l, {
                        color: "primary",
                        label: e.frappe._("Mobile No"),
                        "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                        "hide-details": "",
                        modelValue: e.mobile_no,
                        "onUpdate:modelValue": t[1] || (t[1] = (p) => e.mobile_no = p),
                        density: "compact",
                        clearable: "",
                        class: "mx-4"
                      }, null, 8, ["label", "bg-color", "modelValue"]),
                      h(s, {
                        variant: "text",
                        class: "ml-2",
                        color: "primary",
                        theme: "dark",
                        onClick: i.search
                      }, {
                        default: x(() => [
                          ae(W(e.__("Search")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ]),
                    _: 1
                  }),
                  h(d, null, {
                    default: x(() => [
                      e.dialog_data ? (ne(), Fe(f, {
                        key: 0,
                        cols: "12",
                        class: "pa-1"
                      }, {
                        default: x(() => [
                          h(u, {
                            headers: e.headers,
                            items: e.dialog_data,
                            "item-key": "name",
                            class: "elevation-1",
                            "show-select": "",
                            modelValue: e.selected,
                            "onUpdate:modelValue": t[2] || (t[2] = (p) => e.selected = p),
                            "return-object": "",
                            "select-strategy": "single"
                          }, {
                            "item.amount": x(({ item: p }) => [
                              ae(W(i.formatCurrency(p.amount)), 1)
                            ]),
                            "item.posting_date": x(({ item: p }) => [
                              ae(W(p.posting_date.slice(0, 16)), 1)
                            ]),
                            _: 1
                          }, 8, ["headers", "items", "modelValue"])
                        ]),
                        _: 1
                      })) : ke("", !0)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              h(v, { class: "mt-4" }, {
                default: x(() => [
                  h(g),
                  h(s, {
                    color: "error mx-2",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: x(() => t[4] || (t[4] = [
                      ae("Close")
                    ])),
                    _: 1,
                    __: [4]
                  }, 8, ["onClick"]),
                  e.selected.length ? (ne(), Fe(s, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: x(() => [
                      ae(W(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const rie = /* @__PURE__ */ rn(tie, [["render", aie]]);
function iie(e) {
  const { proxy: t } = cs(), n = t?.eventBus, a = Se(null), r = Se(null);
  async function i() {
    return await sm, await ta(), frappe.call("posawesome.posawesome.api.shifts.check_opening_shift", {
      user: frappe.session.user
    }).then((s) => {
      if (s.message) {
        a.value = s.message.pos_profile, r.value = s.message.pos_opening_shift, a.value.taxes_and_charges && frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Taxes and Charges Template",
            name: a.value.taxes_and_charges
          },
          callback: (d) => {
            d.message && Z9(
              a.value.taxes_and_charges,
              d.message
            );
          }
        }), n?.emit("register_pos_profile", s.message), n?.emit("set_company", s.message.company);
        try {
          frappe.realtime.emit("pos_profile_registered");
        } catch (d) {
          console.warn("Realtime emit failed", d);
        }
        console.info("LoadPosProfile");
        try {
          a1(s.message);
        } catch (d) {
          console.error("Failed to cache opening data", d);
        }
      } else {
        const d = Fu();
        if (d) {
          a.value = d.pos_profile, r.value = d.pos_opening_shift, n?.emit("register_pos_profile", d), n?.emit("set_company", d.company);
          try {
            frappe.realtime.emit("pos_profile_registered");
          } catch (u) {
            console.warn("Realtime emit failed", u);
          }
          console.info("LoadPosProfile (cached)");
          return;
        }
        e && e();
      }
    }).catch(() => {
      const s = Fu();
      if (s) {
        a.value = s.pos_profile, r.value = s.pos_opening_shift, n?.emit("register_pos_profile", s), n?.emit("set_company", s.company);
        try {
          frappe.realtime.emit("pos_profile_registered");
        } catch (d) {
          console.warn("Realtime emit failed", d);
        }
        console.info("LoadPosProfile (cached)");
        return;
      }
      e && e();
    });
  }
  function o() {
    return frappe.call(
      "posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.make_closing_shift_from_opening",
      { opening_shift: r.value }
    ).then((s) => {
      s.message && n?.emit("open_ClosingDialog", s.message);
    });
  }
  function l(s) {
    frappe.call(
      "posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.submit_closing_shift",
      { closing_shift: s }
    ).then((d) => {
      d.message && (r.value = null, a.value = null, G9(), n?.emit("show_message", {
        title: "POS Shift Closed",
        color: "success"
      }), i());
    });
  }
  return { pos_profile: a, pos_opening_shift: r, check_opening_entry: i, get_closing_data: o, submit_closing_pos: l };
}
function oie() {
  const { proxy: e } = cs(), t = e?.eventBus, n = Se([]);
  function a(r, i) {
    if (i && i.posa_local_storage) {
      const o = yA();
      o.length && (n.value = o, t?.emit("set_offers", o));
    }
    return frappe.call("posawesome.posawesome.api.offers.get_offers", { profile: r }).then((o) => {
      o.message && (console.info("LoadOffers"), U9(o.message), n.value = o.message, t?.emit("set_offers", o.message));
    }).catch((o) => {
      console.error("Failed to fetch offers:", o);
      const l = yA();
      l.length && (n.value = l, t?.emit("set_offers", l));
    });
  }
  return { offers: n, get_offers: a };
}
const sie = {
  setup() {
    const e = cs(), t = DD(), n = bc(), a = iie(() => {
      e && e.proxy && (e.proxy.dialog = !0);
    }), r = oie();
    return { ...t, ...n, ...a, ...r };
  },
  data: function() {
    return {
      dialog: !1,
      payment: !1,
      showOffers: !1,
      coupons: !1,
      itemsLoaded: !1,
      customersLoaded: !1
    };
  },
  components: {
    ItemsSelector: vee,
    Invoice: eae,
    OpeningDialog: uae,
    Payments: Rae,
    Drafts: Jae,
    ClosingDialog: $re,
    Returns: eie,
    PosOffers: qae,
    PosCoupons: jae,
    NewAddress: Wre,
    Variants: Gre,
    MpesaPayments: rie,
    SalesOrders: tre,
    RestaurantOrders: Pre
  },
  methods: {
    create_opening_voucher() {
      this.dialog = !0;
    },
    get_pos_setting() {
      frappe.db.get_doc("POS Settings", void 0).then((e) => {
        this.eventBus.emit("set_pos_settings", e);
      });
    },
    checkLoadingComplete() {
      this.itemsLoaded && this.customersLoaded && console.info("Loading completed");
    }
  },
  mounted: function() {
    this.$nextTick(function() {
      this.check_opening_entry(), this.get_pos_setting(), this.eventBus.on("close_opening_dialog", () => {
        this.dialog = !1;
      }), this.eventBus.on("register_pos_data", (e) => {
        this.pos_profile = e.pos_profile, this.get_offers(this.pos_profile.name, this.pos_profile), this.pos_opening_shift = e.pos_opening_shift, this.eventBus.emit("register_pos_profile", e), console.info("LoadPosProfile");
      }), this.eventBus.on("register_pos_profile", (e) => {
        e && e.pos_profile && this.get_offers(e.pos_profile.name, e.pos_profile);
      }), this.eventBus.on("show_payment", (e) => {
        this.payment = e === "true", this.showOffers = !1, this.coupons = !1;
      }), this.eventBus.on("show_offers", (e) => {
        this.showOffers = e === "true", this.payment = !1, this.coupons = !1;
      }), this.eventBus.on("show_coupons", (e) => {
        this.coupons = e === "true", this.showOffers = !1, this.payment = !1;
      }), this.eventBus.on("open_closing_dialog", () => {
        this.get_closing_data();
      }), this.eventBus.on("submit_closing_pos", (e) => {
        this.submit_closing_pos(e);
      }), this.eventBus.on("items_loaded", () => {
        this.itemsLoaded = !0, this.checkLoadingComplete();
      }), this.eventBus.on("customers_loaded", () => {
        this.customersLoaded = !0, this.checkLoadingComplete();
      });
    });
  },
  beforeUnmount() {
    this.eventBus.off("close_opening_dialog"), this.eventBus.off("register_pos_data"), this.eventBus.off("register_pos_profile"), this.eventBus.off("LoadPosProfile"), this.eventBus.off("show_offers"), this.eventBus.off("show_coupons"), this.eventBus.off("open_closing_dialog"), this.eventBus.off("submit_closing_pos"), this.eventBus.off("items_loaded"), this.eventBus.off("customers_loaded");
  },
  // In the created() or mounted() lifecycle hook
  created() {
    TQ();
  }
};
function lie(e, t, n, a, r, i) {
  const o = J("ClosingDialog"), l = J("Drafts"), s = J("SalesOrders"), d = J("RestaurantOrders"), u = J("Returns"), f = J("NewAddress"), _ = J("MpesaPayments"), g = J("Variants"), v = J("OpeningDialog"), w = J("ItemsSelector"), b = J("v-col"), p = J("PosOffers"), y = J("PosCoupons"), S = J("Payments"), E = J("Invoice"), C = J("v-row");
  return ne(), Be("div", {
    class: Ee(["pos-main-container dynamic-container", e.rtlClasses]),
    style: Xe([e.responsiveStyles, e.rtlStyles])
  }, [
    h(o),
    h(l),
    h(s),
    h(d),
    h(u),
    h(f),
    h(_),
    h(g),
    e.dialog ? (ne(), Fe(v, {
      key: 0,
      dialog: e.dialog
    }, null, 8, ["dialog"])) : ke("", !0),
    ln(h(C, {
      dense: "",
      class: "ma-0 dynamic-main-row"
    }, {
      default: x(() => [
        ln(h(b, {
          xl: "5",
          lg: "5",
          md: "5",
          sm: "5",
          cols: "12",
          class: "pos dynamic-col"
        }, {
          default: x(() => [
            h(w)
          ]),
          _: 1
        }, 512), [
          [Sa, !e.payment && !e.showOffers && !e.coupons]
        ]),
        ln(h(b, {
          xl: "5",
          lg: "5",
          md: "5",
          sm: "5",
          cols: "12",
          class: "pos dynamic-col"
        }, {
          default: x(() => [
            h(p)
          ]),
          _: 1
        }, 512), [
          [Sa, e.showOffers]
        ]),
        ln(h(b, {
          xl: "5",
          lg: "5",
          md: "5",
          sm: "5",
          cols: "12",
          class: "pos dynamic-col"
        }, {
          default: x(() => [
            h(y)
          ]),
          _: 1
        }, 512), [
          [Sa, e.coupons]
        ]),
        ln(h(b, {
          xl: "5",
          lg: "5",
          md: "5",
          sm: "5",
          cols: "12",
          class: "pos dynamic-col"
        }, {
          default: x(() => [
            h(S)
          ]),
          _: 1
        }, 512), [
          [Sa, e.payment]
        ]),
        h(b, {
          xl: "7",
          lg: "7",
          md: "7",
          sm: "7",
          cols: "12",
          class: "pos dynamic-col"
        }, {
          default: x(() => [
            h(E)
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 512), [
      [Sa, !e.dialog]
    ])
  ], 6);
}
const cie = /* @__PURE__ */ rn(sie, [["render", lie], ["__scopeId", "data-v-ecadef30"]]), uie = {
  mixins: [Oi],
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  data: function() {
    return {
      dialog: !1,
      pos_profile: "",
      pos_opening_shift: "",
      customer_name: "",
      customer_info: "",
      company: "",
      singleSelect: !0,
      invoices_loading: !1,
      unallocated_payments_loading: !1,
      mpesa_payments_loading: !1,
      payment_methods: [],
      outstanding_invoices: [],
      unallocated_payments: [],
      mpesa_payments: [],
      selected_invoices: [],
      selected_payments: [],
      selected_mpesa_payments: [],
      pos_profiles_list: [],
      pos_profile_search: "",
      payment_methods_list: [],
      mpesa_search_name: "",
      mpesa_search_mobile: "",
      invoices_headers: [
        {
          title: "",
          align: "start",
          sortable: !1,
          key: "actions",
          width: "50px"
        },
        {
          title: __("Invoice"),
          align: "start",
          sortable: !0,
          key: "voucher_no"
        },
        {
          title: __("Customer"),
          align: "start",
          sortable: !0,
          key: "customer_name"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Due Date"),
          align: "start",
          sortable: !0,
          key: "due_date"
        },
        {
          title: __("Total"),
          align: "end",
          sortable: !0,
          key: "invoice_amount"
        },
        {
          title: __("Outstanding"),
          align: "end",
          sortable: !0,
          key: "outstanding_amount"
        }
      ],
      unallocated_payments_headers: [
        {
          title: "",
          align: "center",
          sortable: !1,
          key: "select",
          width: "50px"
        },
        {
          title: __("Payment ID"),
          align: "start",
          sortable: !0,
          key: "name"
        },
        {
          title: __("Customer"),
          align: "start",
          sortable: !0,
          key: "customer_name"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Mode"),
          align: "start",
          sortable: !0,
          key: "mode_of_payment"
        },
        {
          title: __("Paid"),
          align: "end",
          sortable: !0,
          key: "paid_amount"
        },
        {
          title: __("Unallocated"),
          align: "end",
          sortable: !0,
          key: "unallocated_amount"
        }
      ],
      mpesa_payment_headers: [
        {
          title: __("Payment ID"),
          align: "start",
          sortable: !0,
          key: "transid"
        },
        {
          title: __("Full Name"),
          align: "start",
          sortable: !0,
          key: "full_name"
        },
        {
          title: __("Nobile Number"),
          align: "start",
          sortable: !0,
          key: "mobile_no"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Amount"),
          align: "end",
          sortable: !0,
          key: "amount"
        }
      ],
      isSubmitting: !1
    };
  },
  components: {
    Customer: RD,
    UpdateCustomer: MD
  },
  methods: {
    async check_opening_entry() {
      var e = this;
      return await sm, await ta(), frappe.call("posawesome.posawesome.api.shifts.check_opening_shift", {
        user: frappe.session.user
      }).then((t) => {
        if (t.message) {
          this.pos_profile = t.message.pos_profile, this.pos_opening_shift = t.message.pos_opening_shift, this.company = t.message.company.name, e.eventBus.emit("payments_register_pos_profile", t.message), e.eventBus.emit("set_company", t.message.company), this.set_payment_methods();
          try {
            a1(t.message);
          } catch (n) {
            console.error("Failed to cache opening data", n);
          }
          this.pos_profile_search = "", this.pos_profiles_list = [], t.message.pos_profile && t.message.pos_profile.name && this.pos_profiles_list.push(t.message.pos_profile.name), this.payment_methods_list = [], this.pos_profile.payments.forEach((n) => {
            this.payment_methods_list.push(n.mode_of_payment);
          }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
        } else {
          const n = Fu();
          if (n) {
            this.pos_profile = n.pos_profile, this.pos_opening_shift = n.pos_opening_shift, this.company = n.company.name, e.eventBus.emit("payments_register_pos_profile", n), e.eventBus.emit("set_company", n.company), this.set_payment_methods(), this.payment_methods_list = [], this.pos_profile.payments.forEach((a) => {
              this.payment_methods_list.push(a.mode_of_payment);
            }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
            return;
          }
          this.create_opening_voucher();
        }
      }).catch(() => {
        const t = Fu();
        if (t) {
          this.pos_profile = t.pos_profile, this.pos_opening_shift = t.pos_opening_shift, this.company = t.company.name, e.eventBus.emit("payments_register_pos_profile", t), e.eventBus.emit("set_company", t.company), this.set_payment_methods(), this.payment_methods_list = [], this.pos_profile.payments.forEach((n) => {
            this.payment_methods_list.push(n.mode_of_payment);
          }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
          return;
        }
        this.create_opening_voucher();
      });
    },
    get_available_pos_profiles() {
      if (this.pos_profile.posa_allow_mpesa_reconcile_payments)
        return frappe.call("posawesome.posawesome.api.payment_entry.get_available_pos_profiles", {
          company: this.company,
          currency: this.pos_profile.currency
        }).then((e) => {
          e.message && (this.pos_profiles_list = e.message);
        });
    },
    create_opening_voucher() {
      this.dialog = !0;
    },
    async fetch_customer_details() {
      var e = this;
      if (this.customer_name) {
        if (sn()) {
          try {
            const n = (await XO() || []).find(
              (r) => r.name === e.customer_name || r.customer_name === e.customer_name
            );
            if (n) {
              e.customer_info = { ...n }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info);
              return;
            }
            const a = (r1() || []).map((r) => r.args).find((r) => r.customer_name === e.customer_name);
            a && (e.customer_info = { ...a, name: a.customer_name }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info));
          } catch (t) {
            console.error("Failed to fetch cached customer", t);
          }
          return;
        }
        try {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customer_info",
            args: {
              customer: e.customer_name
            }
          }), n = t.message;
          t.exc || (e.customer_info = {
            ...n
          }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info));
        } catch (t) {
          console.error("Failed to fetch customer details", t);
        }
      }
    },
    onInvoiceSelected(e) {
      e && e.item && e.item.customer && (this.eventBus.emit("set_customer", e.item.customer), this.$nextTick(() => {
        this.$forceUpdate();
      }));
    },
    get_outstanding_invoices() {
      if (this.invoices_loading = !0, this.selected_invoices = [], sn()) {
        this.outstanding_invoices = [], this.invoices_loading = !1;
        return;
      }
      return frappe.call("posawesome.posawesome.api.payment_entry.get_outstanding_invoices", {
        customer: this.customer_name,
        company: this.company,
        currency: this.pos_profile.currency,
        pos_profile: this.pos_profile_search || null
      }).then((e) => {
        e.message && (this.outstanding_invoices = e.message, this.invoices_loading = !1, this.$nextTick(() => {
          this.$forceUpdate();
        }));
      });
    },
    get_unallocated_payments() {
      if (this.pos_profile.posa_allow_reconcile_payments) {
        if (this.unallocated_payments_loading = !0, !this.customer_name) {
          this.unallocated_payments = [], this.unallocated_payments_loading = !1;
          return;
        }
        if (sn()) {
          this.unallocated_payments = [], this.unallocated_payments_loading = !1;
          return;
        }
        return frappe.call("posawesome.posawesome.api.payment_entry.get_unallocated_payments", {
          customer: this.customer_name,
          company: this.company,
          currency: this.pos_profile.currency
        }).then((e) => {
          e.message && (this.unallocated_payments = e.message, this.unallocated_payments_loading = !1);
        });
      }
    },
    set_mpesa_search_params() {
      this.pos_profile.posa_allow_mpesa_reconcile_payments && this.customer_name && (this.mpesa_search_name = this.customer_info.customer_name.split(" ")[0], this.customer_info.mobile_no && (this.mpesa_search_mobile = this.customer_info.mobile_no.substring(0, 4) + " ***** " + this.customer_info.mobile_no.substring(9)));
    },
    get_draft_mpesa_payments_register() {
      if (!this.pos_profile.posa_allow_mpesa_reconcile_payments) return;
      const e = this;
      if (this.mpesa_payments_loading = !0, sn()) {
        this.mpesa_payments = [], this.mpesa_payments_loading = !1;
        return;
      }
      return frappe.call("posawesome.posawesome.api.m_pesa.get_mpesa_draft_payments", {
        company: e.company,
        mode_of_payment: null,
        full_name: e.mpesa_search_name || null,
        mobile_no: e.mpesa_search_mobile || null,
        payment_methods_list: e.payment_methods_list
      }).then((t) => {
        t.message ? e.mpesa_payments = t.message : e.mpesa_payments = [], e.mpesa_payments_loading = !1;
      });
    },
    set_payment_methods() {
      this.pos_profile.posa_allow_make_new_payments && (this.payment_methods = [], this.pos_profile.payments.forEach((e) => {
        this.payment_methods.push({
          mode_of_payment: e.mode_of_payment,
          amount: 0,
          row_id: e.name
        });
      }));
    },
    clear_all(e = !0) {
      this.customer_name = "", e && (this.customer_info = ""), this.mpesa_search_mobile = "", this.mpesa_search_name = "", this.mpesa_payments = [], this.selected_mpesa_payments = [], this.outstanding_invoices = [], this.unallocated_payments = [], this.selected_invoices = [], this.selected_payments = [], this.selected_mpesa_payments = [], this.set_payment_methods();
    },
    submit() {
      if (this.isSubmitting) return;
      this.isSubmitting = !0;
      const e = this.customer_name, t = this;
      if (!e) {
        this.isSubmitting = !1, frappe.throw(__("Please select a customer"));
        return;
      }
      if (this.selected_invoices.length == 0) {
        this.isSubmitting = !1, frappe.throw(__("Please select an invoice"));
        return;
      }
      if (this.total_selected_payments + this.total_selected_mpesa_payments + this.total_payment_methods <= 0) {
        this.isSubmitting = !1, frappe.throw(__("Please make a payment or select an payment"));
        return;
      }
      this.payment_methods.forEach((r) => {
        r.amount = flt(r.amount);
      });
      const a = {};
      if (a.customer = e, a.company = this.company, a.currency = this.pos_profile.currency, a.pos_opening_shift_name = this.pos_opening_shift.name, a.pos_profile_name = this.pos_profile.name, a.pos_profile = this.pos_profile, a.payment_methods = this.payment_methods, a.selected_invoices = this.selected_invoices, a.selected_payments = this.selected_payments, a.total_selected_invoices = flt(this.total_selected_invoices), a.selected_mpesa_payments = this.selected_mpesa_payments, a.total_selected_payments = flt(this.total_selected_payments), a.total_payment_methods = flt(this.total_payment_methods), a.total_selected_mpesa_payments = flt(this.total_selected_mpesa_payments), sn()) {
        try {
          IA({ args: { payload: a } }), t.eventBus.emit("show_message", {
            title: __("Payment saved offline"),
            color: "warning"
          }), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
        } catch (r) {
          frappe.msgprint(
            __("Cannot Save Offline Payment: ") + (r.message || __("Unknown error"))
          );
        }
        t.isSubmitting = !1;
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: { payload: a },
        freeze: !0,
        freeze_message: __("Processing Payment"),
        callback: function(r) {
          t.isSubmitting = !1, r.message && (frappe.utils.play_sound("submit"), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register());
        },
        error: function() {
          t.isSubmitting = !1;
        }
      });
    },
    submit_and_print() {
      if (this.isSubmitting) return;
      this.isSubmitting = !0;
      const e = this.customer_name, t = this;
      if (!e) {
        this.isSubmitting = !1, frappe.throw(__("Please select a customer"));
        return;
      }
      if (this.selected_invoices.length == 0) {
        this.isSubmitting = !1, frappe.throw(__("Please select an invoice"));
        return;
      }
      if (this.total_selected_payments + this.total_selected_mpesa_payments + this.total_payment_methods <= 0) {
        this.isSubmitting = !1, frappe.throw(__("Please make a payment or select an payment"));
        return;
      }
      this.payment_methods.forEach((r) => {
        r.amount = flt(r.amount);
      });
      const a = {};
      if (a.customer = e, a.company = this.company, a.currency = this.pos_profile.currency, a.pos_opening_shift_name = this.pos_opening_shift.name, a.pos_profile_name = this.pos_profile.name, a.pos_profile = this.pos_profile, a.payment_methods = this.payment_methods, a.selected_invoices = this.selected_invoices, a.selected_payments = this.selected_payments, a.total_selected_invoices = flt(this.total_selected_invoices), a.selected_mpesa_payments = this.selected_mpesa_payments, a.total_selected_payments = flt(this.total_selected_payments), a.total_payment_methods = flt(this.total_payment_methods), a.total_selected_mpesa_payments = flt(this.total_selected_mpesa_payments), sn()) {
        try {
          IA({ args: { payload: a } }), t.eventBus.emit("show_message", {
            title: __("Payment saved offline"),
            color: "warning"
          }), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
        } catch (r) {
          frappe.msgprint(
            __("Cannot Save Offline Payment: ") + (r.message || __("Unknown error"))
          );
        }
        t.isSubmitting = !1;
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: { payload: a },
        freeze: !0,
        freeze_message: __("Processing Payment"),
        callback: function(r) {
          if (t.isSubmitting = !1, r.message) {
            console.log("Server response:", JSON.stringify(r.message)), frappe.utils.play_sound("submit");
            const i = r.message.new_payments_entry && r.message.new_payments_entry.length > 0 ? r.message.new_payments_entry[0].name : null;
            i ? (console.log("Opening print view with payment name:", i), t.load_print_page(i)) : (console.log("No payment_name found in response"), frappe.msgprint(
              __(
                "Payment submitted but print function could not be executed. Payment name not found."
              )
            )), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
          }
        },
        error: function() {
          t.isSubmitting = !1;
        }
      });
    },
    selectSingleInvoice(e) {
      console.log("Row clicked:", e), e && this.toggleInvoiceSelection(e);
    },
    isInvoiceSelected(e) {
      return this.selected_invoices.some((t) => t.voucher_no === e.voucher_no);
    },
    toggleInvoiceSelection(e) {
      this.isInvoiceSelected(e) ? this.selected_invoices = this.selected_invoices.filter(
        (t) => t.voucher_no !== e.voucher_no
      ) : (this.selected_invoices.push(e), e.customer && !this.customer_name && this.eventBus.emit("set_customer", e.customer)), this.$nextTick(() => {
        console.log("Selected invoices:", this.selected_invoices), console.log("Total selected amount:", this.total_selected_invoices), this.$forceUpdate();
      });
    },
    isSelected(e) {
      return this.isInvoiceSelected(e) ? "selected-row bg-primary bg-lighten-4" : "";
    },
    load_print_page(e) {
      if (!e) {
        frappe.msgprint(__("Payment name not found. Cannot open print view."));
        return;
      }
      const t = frappe.urllib.get_base_url() + "/printview?doctype=Payment%20Entry&name=" + e + "&trigger_print=1";
      console.log("Opening printing URL:", t), this.pos_profile?.posa_silent_print ? Fp(t) : window.open(t, "_blank");
    },
    async syncPendingPayments() {
      const e = bQ();
      if (e && this.eventBus.emit("show_message", {
        title: `${e} payment${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), sn())
        return;
      const t = await CQ();
      t && t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline payment${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      });
    }
  },
  computed: {
    total_outstanding_amount() {
      return !this.outstanding_invoices || !this.outstanding_invoices.length ? 0 : this.outstanding_invoices.reduce((e, t) => e + flt(t?.outstanding_amount || 0), 0);
    },
    total_unallocated_amount() {
      return !this.unallocated_payments || !this.unallocated_payments.length ? 0 : this.unallocated_payments.reduce((e, t) => e + flt(t?.unallocated_amount || 0), 0);
    },
    total_selected_invoices() {
      if (!this.selected_invoices || !this.selected_invoices.length)
        return console.log("No selected invoices"), 0;
      const e = this.selected_invoices.reduce(
        (t, n) => t + flt(n?.outstanding_amount || 0),
        0
      );
      return console.log("Calculated total selected invoices:", e, "from", this.selected_invoices), e;
    },
    total_selected_payments() {
      return !this.selected_payments || !this.selected_payments.length ? 0 : this.selected_payments.reduce((e, t) => e + flt(t?.unallocated_amount || 0), 0);
    },
    total_selected_mpesa_payments() {
      return !this.selected_mpesa_payments || !this.selected_mpesa_payments.length ? 0 : this.selected_mpesa_payments.reduce((e, t) => e + flt(t?.amount || 0), 0);
    },
    total_payment_methods() {
      if (!this.payment_methods || !this.payment_methods.length) return 0;
      const e = this.payment_methods.reduce((t, n) => {
        const a = parseFloat(n?.amount || 0);
        return t + (isNaN(a) ? 0 : a);
      }, 0);
      return console.log("Payment methods total:", e, "from", this.payment_methods), e;
    },
    total_of_diff() {
      const e = this.total_selected_invoices || 0, t = (this.total_selected_payments || 0) + (this.total_selected_mpesa_payments || 0) + (this.total_payment_methods || 0);
      return console.log("Difference calculation:", {
        invoiceTotal: e,
        paymentTotal: t,
        selectedPayments: this.total_selected_payments,
        mpesaPayments: this.total_selected_mpesa_payments,
        methodPayments: this.total_payment_methods
      }), flt(e - t);
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  created() {
    this.syncPendingPayments(), this.eventBus.on("network-online", this.syncPendingPayments), this.eventBus.on("server-online", this.syncPendingPayments);
  },
  mounted: function() {
    this.$nextTick(function() {
      this.check_opening_entry(), this.eventBus.on("update_customer", (e) => {
        this.clear_all(!0), this.customer_name = e, this.fetch_customer_details(), this.get_outstanding_invoices(), this.get_unallocated_payments(), this.get_draft_mpesa_payments_register();
      }), this.eventBus.on("fetch_customer_details", () => {
        this.fetch_customer_details();
      });
    });
  },
  beforeUnmount() {
    this.eventBus.off("update_customer"), this.eventBus.off("fetch_customer_details"), this.eventBus.off("network-online", this.syncPendingPayments), this.eventBus.off("server-online", this.syncPendingPayments);
  }
}, die = {
  key: 0,
  class: "text-primary"
}, fie = {
  key: 0,
  class: "golden--text text-end"
}, mie = { class: "text-primary" }, hie = { key: 0 }, _ie = {
  key: 0,
  class: "text-primary"
}, pie = {
  key: 0,
  class: "golden--text text-end"
}, vie = { class: "text-primary" }, gie = { key: 1 }, yie = { class: "golden--text text-end" }, bie = { class: "text-primary" }, wie = {
  key: 0,
  class: "text-primary"
}, kie = { key: 3 }, Sie = { class: "mt-1" }, Cie = { class: "d-flex align-center" }, Aie = { class: "mr-1 text-primary" }, xie = { class: "text-primary mt-1" }, Tie = {
  class: "pb-6 pr-6",
  style: { position: "absolute", bottom: "0", width: "100%" }
};
function Iie(e, t, n, a, r, i) {
  const o = J("Customer"), l = J("v-divider"), s = J("v-col"), d = J("v-row"), u = J("v-select"), f = J("v-btn"), _ = J("v-checkbox"), g = J("v-data-table"), v = J("v-text-field"), w = J("v-card");
  return ne(), Be("div", {
    fluid: "",
    class: Ee(a.rtlClasses)
  }, [
    ln(h(d, null, {
      default: x(() => [
        h(s, {
          md: "8",
          cols: "12",
          class: "pb-2 pr-0"
        }, {
          default: x(() => [
            h(w, {
              class: Ee([
                "main mx-auto mt-3 p-3 pb-16 overflow-y-auto",
                i.isDarkTheme ? "" : "bg-grey-lighten-5"
              ]),
              style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "94vh", height: "94vh" }])
            }, {
              default: x(() => [
                h(o),
                h(l),
                A("div", null, [
                  h(d, null, {
                    default: x(() => [
                      h(s, {
                        md: "7",
                        cols: "12"
                      }, {
                        default: x(() => [
                          A("p", null, [
                            A("strong", null, W(e.__("Invoices")), 1),
                            i.total_outstanding_amount ? (ne(), Be("span", die, W(e.__("- Total Outstanding")) + " : " + W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(i.total_outstanding_amount)), 1)) : ke("", !0)
                          ])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        md: "5",
                        cols: "12"
                      }, {
                        default: x(() => [
                          i.total_selected_invoices ? (ne(), Be("p", fie, [
                            A("span", null, W(e.__("Total Selected :")), 1),
                            A("span", null, W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(i.total_selected_invoices)), 1),
                            A("small", null, "(" + W(e.selected_invoices.length) + " invoice(s))", 1)
                          ])) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(d, {
                    align: "center",
                    "no-gutters": "",
                    class: "mb-1"
                  }, {
                    default: x(() => [
                      h(s, {
                        md: "4",
                        cols: "12"
                      }, {
                        default: x(() => [
                          h(u, {
                            density: "compact",
                            variant: "outlined",
                            "hide-details": "",
                            clearable: "",
                            class: "dark-field",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            modelValue: e.pos_profile_search,
                            "onUpdate:modelValue": t[0] || (t[0] = (b) => e.pos_profile_search = b),
                            items: e.pos_profiles_list,
                            "item-value": "name",
                            label: "Select POS Profile"
                          }, null, 8, ["bg-color", "modelValue", "items"])
                        ]),
                        _: 1
                      }),
                      h(s),
                      h(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: x(() => [
                          h(f, {
                            block: "",
                            color: "warning",
                            theme: "dark",
                            onClick: i.get_outstanding_invoices
                          }, {
                            default: x(() => [
                              ae(W(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: x(() => [
                          e.selected_invoices.length ? (ne(), Fe(f, {
                            key: 0,
                            block: "",
                            color: "error",
                            theme: "dark",
                            onClick: t[1] || (t[1] = (b) => {
                              e.selected_invoices = [], e.$forceUpdate();
                            })
                          }, {
                            default: x(() => [
                              ae(W(e.__("Clear")), 1)
                            ]),
                            _: 1
                          })) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(g, {
                    headers: e.invoices_headers,
                    items: e.outstanding_invoices,
                    "item-key": "voucher_no",
                    class: "elevation-1 mt-0",
                    loading: e.invoices_loading,
                    "onClick:row": i.selectSingleInvoice,
                    "item-class": i.isSelected
                  }, {
                    "item.actions": x(({ item: b }) => [
                      h(_, {
                        "model-value": i.isInvoiceSelected(b),
                        color: "primary",
                        onClick: Jn((p) => i.toggleInvoiceSelection(b), ["stop"])
                      }, null, 8, ["model-value", "onClick"])
                    ]),
                    "item.invoice_amount": x(({ item: b }) => [
                      ae(W(e.currencySymbol(b.currency)) + " " + W(e.formatCurrency(b.invoice_amount)), 1)
                    ]),
                    "item.outstanding_amount": x(({ item: b }) => [
                      A("span", mie, W(e.currencySymbol(b?.currency || e.pos_profile.currency)) + " " + W(e.formatCurrency(b?.outstanding_amount || 0)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "loading", "onClick:row", "item-class"]),
                  h(l)
                ]),
                e.pos_profile.posa_allow_reconcile_payments && e.unallocated_payments.length ? (ne(), Be("div", hie, [
                  h(d, null, {
                    default: x(() => [
                      h(s, {
                        md: "7",
                        cols: "12"
                      }, {
                        default: x(() => [
                          A("p", null, [
                            A("strong", null, W(e.__("Payments")), 1),
                            i.total_unallocated_amount ? (ne(), Be("span", _ie, W(e.__("- Total Unallocated")) + " : " + W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(i.total_unallocated_amount)), 1)) : ke("", !0)
                          ])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        md: "5",
                        cols: "12"
                      }, {
                        default: x(() => [
                          i.total_selected_payments ? (ne(), Be("p", pie, [
                            A("span", null, W(e.__("Total Selected :")), 1),
                            A("span", null, W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(i.total_selected_payments)), 1)
                          ])) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(g, {
                    headers: e.unallocated_payments_headers,
                    items: e.unallocated_payments,
                    "item-key": "name",
                    class: "elevation-1 mt-0",
                    loading: e.unallocated_payments_loading
                  }, {
                    "item.select": x(({ item: b }) => [
                      h(_, {
                        modelValue: e.selected_payments,
                        "onUpdate:modelValue": t[2] || (t[2] = (p) => e.selected_payments = p),
                        value: b,
                        color: "primary",
                        "hide-details": "",
                        onClick: t[3] || (t[3] = Jn(() => {
                        }, ["stop"]))
                      }, null, 8, ["modelValue", "value"])
                    ]),
                    "item.paid_amount": x(({ item: b }) => [
                      ae(W(e.currencySymbol(b.currency)) + " " + W(e.formatCurrency(b.paid_amount)), 1)
                    ]),
                    "item.unallocated_amount": x(({ item: b }) => [
                      A("span", vie, W(e.currencySymbol(b.currency)) + " " + W(e.formatCurrency(b.unallocated_amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "loading"]),
                  h(l)
                ])) : ke("", !0),
                e.pos_profile.posa_allow_mpesa_reconcile_payments ? (ne(), Be("div", gie, [
                  h(d, null, {
                    default: x(() => [
                      h(s, {
                        md: "8",
                        cols: "12"
                      }, {
                        default: x(() => [
                          A("p", null, [
                            A("span", null, [
                              A("strong", null, W(e.__("Search Mpesa Payments")), 1)
                            ])
                          ])
                        ]),
                        _: 1
                      }),
                      i.total_selected_mpesa_payments ? (ne(), Fe(s, {
                        key: 0,
                        md: "4",
                        cols: "12"
                      }, {
                        default: x(() => [
                          A("p", yie, [
                            A("span", null, W(e.__("Total Selected :")), 1),
                            A("span", null, W(e.currencySymbol(e.pos_profile.currency)) + " " + W(e.formatCurrency(i.total_selected_mpesa_payments)), 1)
                          ])
                        ]),
                        _: 1
                      })) : ke("", !0)
                    ]),
                    _: 1
                  }),
                  h(d, {
                    align: "center",
                    "no-gutters": "",
                    class: "mb-1"
                  }, {
                    default: x(() => [
                      h(s, {
                        md: "4",
                        cols: "12",
                        class: "mr-1"
                      }, {
                        default: x(() => [
                          h(v, {
                            density: "compact",
                            variant: "outlined",
                            color: "primary",
                            label: e.frappe._("Search by Name"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            class: "dark-field",
                            modelValue: e.mpesa_search_name,
                            "onUpdate:modelValue": t[4] || (t[4] = (b) => e.mpesa_search_name = b),
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        md: "4",
                        cols: "12",
                        class: "mr-1"
                      }, {
                        default: x(() => [
                          h(v, {
                            density: "compact",
                            variant: "outlined",
                            color: "primary",
                            label: e.frappe._("Search by Mobile"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            class: "dark-field",
                            modelValue: e.mpesa_search_mobile,
                            "onUpdate:modelValue": t[5] || (t[5] = (b) => e.mpesa_search_mobile = b),
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      h(s),
                      h(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: x(() => [
                          h(f, {
                            block: "",
                            color: "warning",
                            theme: "dark",
                            onClick: i.get_draft_mpesa_payments_register
                          }, {
                            default: x(() => [
                              ae(W(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  h(g, {
                    headers: e.mpesa_payment_headers,
                    items: e.mpesa_payments,
                    "item-key": "name",
                    class: "elevation-1 mt-0",
                    "single-select": e.singleSelect,
                    "show-select": "",
                    modelValue: e.selected_mpesa_payments,
                    "onUpdate:modelValue": t[6] || (t[6] = (b) => e.selected_mpesa_payments = b),
                    loading: e.mpesa_payments_loading,
                    "checkbox-color": "primary"
                  }, {
                    "item.amount": x(({ item: b }) => [
                      A("span", bie, W(e.currencySymbol(b.currency)) + " " + W(e.formatCurrency(b.amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "single-select", "modelValue", "loading"])
                ])) : ke("", !0)
              ]),
              _: 1
            }, 8, ["class", "style"])
          ]),
          _: 1
        }),
        h(s, {
          md: "4",
          cols: "12",
          class: "pb-3"
        }, {
          default: x(() => [
            h(w, {
              class: Ee(["invoices mx-auto mt-3 p-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
              style: Xe([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "94vh", height: "94vh" }])
            }, {
              default: x(() => [
                A("strong", null, [
                  t[10] || (t[10] = A("h4", { class: "text-primary" }, "Totals", -1)),
                  h(d, null, {
                    default: x(() => [
                      h(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: x(() => [
                          A("span", null, W(e.__("Total Invoices:")), 1)
                        ]),
                        _: 1
                      }),
                      h(s, { md: "5" }, {
                        default: x(() => [
                          h(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_invoices),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"]),
                          e.selected_invoices.length ? (ne(), Be("small", wie, W(e.selected_invoices.length) + " invoice(s) selected", 1)) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  i.total_selected_payments ? (ne(), Fe(d, { key: 0 }, {
                    default: x(() => [
                      h(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: x(() => [
                          A("span", null, W(e.__("Total Payments:")), 1)
                        ]),
                        _: 1
                      }),
                      h(s, { md: "5" }, {
                        default: x(() => [
                          h(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_payments),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : ke("", !0),
                  i.total_selected_mpesa_payments ? (ne(), Fe(d, { key: 1 }, {
                    default: x(() => [
                      h(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: x(() => [
                          A("span", null, W(e.__("Total Mpesa:")), 1)
                        ]),
                        _: 1
                      }),
                      h(s, { md: "5" }, {
                        default: x(() => [
                          h(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_mpesa_payments),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : ke("", !0),
                  e.payment_methods.length ? (ne(), Fe(l, { key: 2 })) : ke("", !0),
                  e.pos_profile.posa_allow_make_new_payments ? (ne(), Be("div", kie, [
                    t[9] || (t[9] = A("h4", { class: "text-primary" }, "Make New Payment", -1)),
                    e.payment_methods.length ? (ne(!0), Be(Qe, { key: 0 }, un(e.payment_methods, (b) => (ne(), Fe(d, {
                      key: b.row_id
                    }, {
                      default: x(() => [
                        h(s, { md: "7" }, {
                          default: x(() => [
                            A("span", Sie, W(e.__(b.mode_of_payment)) + ":", 1)
                          ]),
                          _: 2
                        }, 1024),
                        h(s, { md: "5" }, {
                          default: x(() => [
                            A("div", Cie, [
                              A("div", Aie, W(e.currencySymbol(e.pos_profile.currency)), 1),
                              h(v, {
                                class: "p-0 m-0 dark-field",
                                density: "compact",
                                color: "primary",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: b.amount,
                                "onUpdate:modelValue": (p) => b.amount = p,
                                type: "number",
                                flat: "",
                                onInput: t[7] || (t[7] = (p) => e.$forceUpdate())
                              }, null, 8, ["bg-color", "modelValue", "onUpdate:modelValue"])
                            ])
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 2
                    }, 1024))), 128)) : ke("", !0)
                  ])) : ke("", !0),
                  h(l),
                  h(d, null, {
                    default: x(() => [
                      h(s, { md: "7" }, {
                        default: x(() => [
                          A("h4", xie, W(e.__("Difference:")), 1)
                        ]),
                        _: 1
                      }),
                      h(s, { md: "5" }, {
                        default: x(() => [
                          h(v, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_of_diff),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                A("div", Tie, [
                  h(d, null, {
                    default: x(() => [
                      h(s, {
                        cols: "6",
                        class: "pr-1"
                      }, {
                        default: x(() => [
                          h(f, {
                            block: "",
                            size: "large",
                            color: "primary",
                            theme: "dark",
                            onClick: i.submit,
                            disabled: e.vaildatPayment || e.isSubmitting,
                            loading: e.isSubmitting
                          }, {
                            default: x(() => [
                              ae(W(e.__("Submit")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick", "disabled", "loading"])
                        ]),
                        _: 1
                      }),
                      h(s, {
                        cols: "6",
                        class: "pl-1"
                      }, {
                        default: x(() => [
                          h(f, {
                            block: "",
                            size: "large",
                            color: "success",
                            theme: "dark",
                            onClick: t[8] || (t[8] = (b) => i.submit_and_print()),
                            disabled: e.vaildatPayment || e.isSubmitting,
                            loading: e.isSubmitting
                          }, {
                            default: x(() => [
                              ae(W(e.__("Submit & Print")), 1)
                            ]),
                            _: 1
                          }, 8, ["disabled", "loading"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ])
              ]),
              _: 1
            }, 8, ["class", "style"])
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 512), [
      [Sa, !e.dialog]
    ])
  ], 2);
}
const Eie = /* @__PURE__ */ rn(uie, [["render", Iie]]);
let j_ = 0, Y_ = 0, gu = !1;
const Qn = oa({
  active: !1,
  progress: 0,
  sources: {},
  message: __("Loading app data..."),
  sourceMessages: {
    init: __("Initializing application..."),
    items: __("Loading product catalog..."),
    customers: __("Loading customer database...")
  }
});
function Pie(e) {
  if (Qn.sources = {}, j_ = e.length, Y_ = 0, gu = !1, !e || e.length === 0) {
    console.warn("No loading sources provided");
    return;
  }
  e.forEach((t) => {
    Qn.sources[t] = 0;
  }), Qn.progress = 0, Qn.active = !0, Die();
}
function ND(e, t) {
  if (!(e in Qn.sources) || gu || j_ === 0) return;
  t = Math.max(0, Math.min(100, t));
  const n = Qn.sources[e];
  Qn.sources[e] = t;
  const a = Qn.sourceMessages[e] || __(`Loading ${e}...`);
  Qn.message !== a && (Qn.message = a), Y_ += t - n;
  const r = Math.round(Y_ / j_);
  r !== Qn.progress && r <= 100 && Oie(Qn.progress, r), r >= 100 && !gu && UD();
}
function Oie(e, t) {
  if (e === t) return;
  const n = performance.now(), a = 300;
  function r(i) {
    const o = i - n, l = Math.min(o / a, 1), s = 1 - Math.pow(1 - l, 3);
    Qn.progress = Math.round(e + (t - e) * s), l < 1 ? requestAnimationFrame(r) : Qn.progress = t;
  }
  requestAnimationFrame(r);
}
function UD() {
  gu || (gu = !0, $D(), Qn.progress = 100, Qn.message = __("Setup complete!"), setTimeout(() => {
    Qn.active && (Qn.message = __("Ready!"), setTimeout(() => {
      Qn.active = !1, Qn.message = __("Loading app data..."), j_ = 0, Y_ = 0, gu = !1;
    }, 600));
  }, 400));
}
let yu = null;
function Die() {
  yu && clearTimeout(yu), yu = setTimeout(() => {
    console.warn("Loading timeout reached, forcing loading state to complete"), Qn.message = __("Taking longer than expected..."), UD();
  }, 3e4);
}
function $D() {
  yu && (clearTimeout(yu), yu = null);
}
function $h(e) {
  console.log(`Loading source marked as loaded: ${e}`), ND(e, 100);
}
let $d = 0, qh = 0;
const jA = 2, Bie = 1, Vie = 8e3, Mie = 8e3, Rie = 8e3;
let Hh = 15e3;
const Lie = 12e4, Fie = 15e3;
function of(e, t) {
  localStorage.setItem("networkOnline", JSON.stringify(e)), localStorage.setItem("serverOnline", JSON.stringify(t));
}
function Nie() {
  return {
    networkOnline: JSON.parse(localStorage.getItem("networkOnline") || "true"),
    serverOnline: JSON.parse(localStorage.getItem("serverOnline") || "true")
  };
}
function Qb(e) {
  setTimeout(async () => {
    if (Yo()) {
      e.serverConnecting = !1, e.networkOnline = !1, e.serverOnline = !1, window.serverOnline = !1, of(!1, !1), e.$forceUpdate(), Qb(e);
      return;
    }
    e.serverConnecting = !0, e.$forceUpdate(), await e.checkNetworkConnectivity(), e.serverConnecting = !1, e.$forceUpdate(), e.serverOnline ? Hh = Fie : Hh = Math.min(Hh * 2, Lie), Qb(e);
  }, Hh);
}
function Uie() {
  window.addEventListener("online", () => {
    Yo() || (this.networkOnline = !0, this.internetReachable = !0, console.log("Network: Online"), this.checkNetworkConnectivity());
  }), window.addEventListener("offline", () => {
    Yo() || (this.networkOnline = !1, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, console.log("Network: Offline"), this.$forceUpdate());
  });
  const e = Nie();
  this.networkOnline = e.networkOnline, this.serverOnline = e.serverOnline, this.internetReachable = !1, this.serverConnecting = !1, window.serverOnline = this.serverOnline, Yo() ? (this.networkOnline = !1, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, of(!1, !1)) : (this.networkOnline = navigator.onLine, this.serverConnecting = !0, this.$forceUpdate(), this.checkNetworkConnectivity().then(() => {
    this.serverConnecting = !1, this.$forceUpdate();
  })), Qb(this);
}
async function $ie() {
  try {
    let e = !1, t = !1;
    const n = fetch("/app", {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(Vie)
    }).then((d) => d.status < 500), a = fetch("/assets/frappe/images/frappe-logo.png", {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(Mie)
    }).then((d) => d.status < 500), r = fetch(window.location.origin, {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(Rie)
    }).then((d) => d.status < 500), i = Promise.any([n, a, r]).catch(() => !1), o = (async () => {
      try {
        const d = new AbortController(), u = setTimeout(() => d.abort(), 5e3);
        return await fetch("https://www.google.com/generate_204", {
          method: "GET",
          mode: "no-cors",
          cache: "no-cache",
          signal: d.signal
        }), clearTimeout(u), !0;
      } catch {
        return !1;
      }
    })(), [l, s] = await Promise.all([i, o]);
    e = l, t = s, e ? (qh++, $d = 0, qh >= Bie && (!this.networkOnline || !this.serverOnline) && (this.networkOnline = e, this.internetReachable = t, this.serverOnline = !0, window.serverOnline = !0, of(this.networkOnline, !0), console.log("Network: Connected"), this.$forceUpdate())) : ($d++, qh = 0, $d >= jA && (this.networkOnline || this.serverOnline) && (this.networkOnline = e, this.internetReachable = t, this.serverOnline = !1, window.serverOnline = !1, of(this.networkOnline, !1), console.log("Network: Disconnected"), this.$forceUpdate()));
  } catch (e) {
    console.warn("Network connectivity check failed:", e), $d++, qh = 0, $d >= jA && (this.networkOnline = navigator.onLine, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, of(this.networkOnline, !1), this.$forceUpdate());
  }
}
function qie(e) {
  const t = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/, n = /^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::1$|^::/, a = ["localhost", "127.0.0.1", "::1", "0.0.0.0"];
  return t.test(e) || n.test(e) || a.includes(e.toLowerCase());
}
async function Hie(e, t, n) {
  const a = [];
  a.push(this.checkFrappePing()), a.push(this.checkCurrentOrigin(t, e, n)), this.isIpHost || a.push(this.checkExternalConnectivity()), frappe.realtime && frappe.realtime.socket && a.push(this.checkWebSocketConnectivity());
  try {
    return (await Promise.allSettled(a)).some((i) => i.status === "fulfilled" && i.value === !0);
  } catch (r) {
    return console.warn("All connectivity checks failed:", r), !1;
  }
}
async function zie() {
  try {
    const e = new AbortController(), t = setTimeout(() => e.abort(), 5e3), n = await fetch("/api/method/ping", {
      method: "HEAD",
      cache: "no-cache",
      signal: e.signal,
      headers: {
        "Cache-Control": "no-cache, no-store, must-revalidate",
        Pragma: "no-cache",
        Expires: "0"
      }
    });
    return clearTimeout(t), n.ok;
  } catch (e) {
    return e.name !== "AbortError" && console.warn("Frappe ping check failed:", e), !1;
  }
}
async function Wie(e, t, n) {
  try {
    const a = new AbortController(), r = setTimeout(() => a.abort(), 5e3), i = `${e}//${t}${n ? ":" + n : ""}`, o = await fetch(`${i}/api/method/frappe.auth.get_logged_user`, {
      method: "HEAD",
      cache: "no-cache",
      signal: a.signal,
      headers: {
        "Cache-Control": "no-cache, no-store, must-revalidate"
      }
    });
    return clearTimeout(r), o.status < 500;
  } catch (a) {
    return a.name !== "AbortError" && console.warn("Current origin check failed:", a), !1;
  }
}
async function jie() {
  try {
    const e = new AbortController(), t = setTimeout(() => e.abort(), 3e3);
    return await fetch("https://httpbin.org/status/200", {
      method: "HEAD",
      mode: "no-cors",
      cache: "no-cache",
      signal: e.signal
    }), clearTimeout(t), !0;
  } catch (e) {
    return e.name !== "AbortError" && console.warn("External connectivity check failed:", e), !1;
  }
}
async function Yie() {
  try {
    return frappe.realtime && frappe.realtime.socket ? frappe.realtime.socket.readyState === 1 : !1;
  } catch (e) {
    return console.warn("WebSocket connectivity check failed:", e), !1;
  }
}
const Kie = {
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = bc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  data: function() {
    return {
      page: "POS",
      // POS Profile data
      posProfile: {},
      pendingInvoices: 0,
      lastInvoiceId: "",
      // Network status
      networkOnline: navigator.onLine || !1,
      serverOnline: !1,
      serverConnecting: !1,
      internetReachable: !1,
      isIpHost: !1,
      // Sync data
      syncTotals: { pending: 0, synced: 0, drafted: 0 },
      manualOffline: !1,
      // Cache data
      cacheUsage: 0,
      cacheUsageLoading: !1,
      cacheUsageDetails: { total: 0, indexedDB: 0, localStorage: 0 },
      cacheReady: !1
      // Loading progress handled via utility
    };
  },
  computed: {
    isDark() {
      return this.$theme?.current === "dark";
    },
    loadingProgress() {
      return Qn.progress;
    },
    loadingActive() {
      return Qn.active;
    },
    loadingMessage() {
      return Qn.message;
    }
  },
  watch: {
    networkOnline(e, t) {
      e && !t && (this.refreshTaxInclusiveSetting(), this.eventBus.emit("network-online"), this.handleSyncInvoices());
    },
    serverOnline(e, t) {
      e && !t && (this.eventBus.emit("server-online"), this.handleSyncInvoices());
    }
  },
  components: {
    Navbar: hX,
    POS: cie,
    Payments: Eie
  },
  mounted() {
    this.remove_frappe_nav(), this.cacheReady = oQ(), Pie(["init", "items", "customers"]), this.initializeData(), this.setupNetworkListeners(), this.setupEventListeners(), this.handleRefreshCacheUsage();
  },
  methods: {
    setupNetworkListeners: Uie,
    checkNetworkConnectivity: $ie,
    detectHostType: qie,
    performConnectivityChecks: Hie,
    checkFrappePing: zie,
    checkCurrentOrigin: Wie,
    checkExternalConnectivity: jie,
    checkWebSocketConnectivity: Yie,
    setPage(e) {
      this.page = e;
    },
    async initializeData() {
      await sm, await _u, this.cacheReady = !0, ta().catch(() => {
      });
      const e = Fu();
      e && e.pos_profile && (this.posProfile = e.pos_profile, navigator.onLine && await this.refreshTaxInclusiveSetting()), cQ() && (alert("Offline queue is too large. Old entries will be purged."), uQ()), this.pendingInvoices = $s(), this.syncTotals = rQ(), xA().then((t) => {
        t.percentage > 90 && alert("Local cache nearing capacity. Consider going online to sync.");
      }).catch(() => {
      }), this.isIpHost = /^\d+\.\d+\.\d+\.\d+/.test(window.location.hostname), this.manualOffline = Yo(), this.manualOffline && (this.networkOnline = !1, this.serverOnline = !1, window.serverOnline = !1), $h("init"), setTimeout(() => {
        Qn.active && (console.warn("Forcing items/customers to complete due to delay"), $h("items"), $h("customers"));
      }, 1e4);
    },
    setupEventListeners() {
      this.eventBus && (this.eventBus.on("register_pos_profile", (e) => {
        this.posProfile = e.pos_profile || {}, navigator.onLine && this.refreshTaxInclusiveSetting();
      }), this.eventBus.on("set_last_invoice", (e) => {
        this.lastInvoiceId = e;
      }), this.eventBus.on("data-loaded", (e) => {
        $h(e);
      }), this.eventBus.on("data-load-progress", ({ name: e, progress: t }) => {
        ND(e, t);
      }), this.eventBus.on("print_last_invoice", () => {
        this.handlePrintLastInvoice();
      }), this.eventBus.on("sync_invoices", () => {
        this.handleSyncInvoices();
      }), this.eventBus.on("pending_invoices_changed", (e) => {
        this.pendingInvoices = e;
      })), frappe.realtime && (frappe.realtime.on("connect", () => {
        this.serverOnline = !0, window.serverOnline = !0, this.serverConnecting = !1, console.log("Server: Connected via WebSocket"), this.$forceUpdate();
      }), frappe.realtime.on("disconnect", () => {
        this.serverOnline = !1, window.serverOnline = !1, this.serverConnecting = !1, console.log("Server: Disconnected from WebSocket"), setTimeout(() => {
          Yo() || this.checkNetworkConnectivity();
        }, 1e3);
      }), frappe.realtime.on("connecting", () => {
        this.serverConnecting = !0, console.log("Server: Connecting to WebSocket..."), this.$forceUpdate();
      }), frappe.realtime.on("reconnect", () => {
        console.log("Server: Reconnected to WebSocket"), window.serverOnline = !0, Yo() || this.checkNetworkConnectivity();
      })), document.addEventListener("visibilitychange", () => {
        !document.hidden && navigator.onLine && !Yo() && this.checkNetworkConnectivity();
      });
    },
    // Event handlers for navbar events
    handleNavClick() {
    },
    handleCloseShift() {
      this.eventBus.emit("open_closing_dialog");
    },
    handlePrintLastInvoice() {
      if (!this.lastInvoiceId)
        return;
      const e = this.posProfile.print_format_for_online || this.posProfile.print_format, t = this.posProfile.letter_head || 0, n = this.posProfile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", a = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(n) + "&name=" + this.lastInvoiceId + "&trigger_print=1&format=" + e + "&no_letterhead=" + t;
      if (this.posProfile.posa_silent_print)
        Fp(a);
      else {
        const r = window.open(a, "Print");
        r.addEventListener(
          "load",
          function() {
            r.print();
          },
          { once: !0 }
        );
      }
    },
    async handleSyncInvoices() {
      const e = $s();
      if (e && this.eventBus.emit("show_message", {
        title: `${e} invoice${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), sn())
        return;
      const t = await tD();
      t && (t.synced || t.drafted) && (t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline invoice${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      }), t.drafted && this.eventBus.emit("show_message", {
        title: `${t.drafted} offline invoice${t.drafted > 1 ? "s" : ""} saved as draft`,
        color: "warning"
      })), this.pendingInvoices = $s(), this.syncTotals = t || this.syncTotals;
    },
    handleToggleOffline() {
      lQ(), this.manualOffline = Yo(), this.manualOffline ? (this.networkOnline = !1, this.serverOnline = !1, window.serverOnline = !1) : this.checkNetworkConnectivity();
    },
    handleToggleTheme() {
      this.$theme.toggle();
    },
    handleLogout() {
      frappe.call("logout").finally(() => {
        window.location.href = "/app";
      });
    },
    handleRefreshCacheUsage() {
      this.cacheUsageLoading = !0, xA().then((e) => {
        this.cacheUsage = e.percentage || 0, this.cacheUsageDetails = {
          total: e.total || 0,
          indexedDB: e.indexedDB || 0,
          localStorage: e.localStorage || 0
        };
      }).catch((e) => {
        console.error("Failed to refresh cache usage", e);
      }).finally(() => {
        this.cacheUsageLoading = !1;
      });
    },
    async refreshTaxInclusiveSetting() {
      if (!(!this.posProfile || !this.posProfile.name || !navigator.onLine))
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.utilities.get_pos_profile_tax_inclusive",
            args: {
              pos_profile: this.posProfile.name
            }
          });
          if (e.message !== void 0) {
            const t = e.message;
            try {
              localStorage.setItem("posa_tax_inclusive", JSON.stringify(t));
            } catch (n) {
              console.warn("Failed to cache tax inclusive setting", n);
            }
            import("./index-DXE5lAOa.js").then((n) => {
              n && n.setTaxInclusiveSetting && n.setTaxInclusiveSetting(t);
            }).catch(() => {
            });
          }
        } catch (e) {
          console.warn("Failed to refresh tax inclusive setting", e);
        }
    },
    handleUpdateAfterDelete() {
    },
    remove_frappe_nav() {
      this.$nextTick(function() {
        $(".page-head").remove(), $(".navbar.navbar-default.navbar-fixed-top").remove();
      });
    }
  },
  beforeUnmount() {
    this.eventBus && (this.eventBus.off("pending_invoices_changed"), this.eventBus.off("data-loaded")), $D();
  },
  created: function() {
    setTimeout(() => {
      this.remove_frappe_nav();
    }, 1e3);
  }
}, Gie = { class: "page-content" };
function Qie(e, t, n, a, r, i) {
  const o = J("Navbar"), l = J("v-main"), s = J("v-app");
  return ne(), Fe(s, {
    class: Ee(["container1", a.rtlClasses])
  }, {
    default: x(() => [
      h(l, { class: "main-content" }, {
        default: x(() => [
          h(o, {
            "pos-profile": e.posProfile,
            "pending-invoices": e.pendingInvoices,
            "last-invoice-id": e.lastInvoiceId,
            "network-online": e.networkOnline,
            "server-online": e.serverOnline,
            "server-connecting": e.serverConnecting,
            "is-ip-host": e.isIpHost,
            "sync-totals": e.syncTotals,
            "manual-offline": e.manualOffline,
            "is-dark": i.isDark,
            "cache-usage": e.cacheUsage,
            "cache-usage-loading": e.cacheUsageLoading,
            "cache-usage-details": e.cacheUsageDetails,
            "cache-ready": e.cacheReady,
            "loading-progress": i.loadingProgress,
            "loading-active": i.loadingActive,
            "loading-message": i.loadingMessage,
            onChangePage: t[0] || (t[0] = (d) => i.setPage(d)),
            onNavClick: i.handleNavClick,
            onCloseShift: i.handleCloseShift,
            onPrintLastInvoice: i.handlePrintLastInvoice,
            onSyncInvoices: i.handleSyncInvoices,
            onToggleOffline: i.handleToggleOffline,
            onToggleTheme: i.handleToggleTheme,
            onLogout: i.handleLogout,
            onRefreshCacheUsage: i.handleRefreshCacheUsage,
            onUpdateAfterDelete: i.handleUpdateAfterDelete
          }, null, 8, ["pos-profile", "pending-invoices", "last-invoice-id", "network-online", "server-online", "server-connecting", "is-ip-host", "sync-totals", "manual-offline", "is-dark", "cache-usage", "cache-usage-loading", "cache-usage-details", "cache-ready", "loading-progress", "loading-active", "loading-message", "onNavClick", "onCloseShift", "onPrintLastInvoice", "onSyncInvoices", "onToggleOffline", "onToggleTheme", "onLogout", "onRefreshCacheUsage", "onUpdateAfterDelete"]),
          A("div", Gie, [
            (ne(), Fe(Hu(e.page), { class: "mx-4 md-4" }))
          ])
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["class"]);
}
const Jie = /* @__PURE__ */ rn(Kie, [["render", Qie], ["__scopeId", "data-v-0e831dc8"]]);
typeof window < "u" && !window.Dexie && (window.Dexie = ji);
frappe.provide("frappe.PosApp");
frappe.PosApp.posapp = class {
  constructor({ parent: e }) {
    this.$parent = $(document), this.page = e.page, this.make_body();
  }
  make_body() {
    this.$el = this.$parent.find(".main-section");
    const e = ZT({
      components: FK,
      directives: QK,
      locale: {
        rtl: frappe.utils.is_rtl()
      },
      theme: {
        defaultTheme: "light",
        themes: {
          light: {
            colors: {
              background: "#FFFFFF",
              primary: "#0097A7",
              secondary: "#00BCD4",
              accent: "#9575CD",
              success: "#66BB6A",
              info: "#2196F3",
              warning: "#FF9800",
              error: "#E86674",
              orange: "#E65100",
              golden: "#A68C59",
              badge: "#F5528C",
              customPrimary: "#085294"
            }
          },
          dark: {
            dark: !0,
            colors: {
              background: "#121212",
              surface: "#1E1E1E",
              primary: "#BB86FC",
              primaryVariant: "#985EFF",
              secondary: "#03DAC6",
              accent: "#9575CD",
              success: "#66BB6A",
              info: "#2196F3",
              warning: "#FF9800",
              error: "#CF6679",
              orange: "#FF6F00",
              golden: "#A68C59",
              badge: "#F5528C",
              customPrimary: "#4FC3F7",
              onBackground: "#FFFFFF",
              onSurface: "#FFFFFF",
              divider: "#373737"
            }
          }
        }
      }
    }), t = i3(Jie);
    if (t.component("VueDatePicker", g0), t.use(sH), t.use(e), t.use(lH, { vuetify: e }), t.mount(this.$el[0]), !document.querySelector('link[rel="manifest"]')) {
      const n = document.createElement("link");
      n.rel = "manifest", n.href = "/manifest.json", document.head.appendChild(n);
    }
    ("serviceWorker" in navigator && window.location.protocol === "https:" || window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") && navigator.serviceWorker.register("/sw.js").catch((n) => console.error("SW registration failed", n));
  }
  setup_header() {
  }
};
export {
  ooe as $,
  Q9 as A,
  J9 as B,
  X9 as C,
  Z9 as D,
  eQ as E,
  tQ as F,
  nQ as G,
  aQ as H,
  vy as I,
  rQ as J,
  iQ as K,
  aoe as L,
  Yo as M,
  sQ as N,
  lQ as O,
  cQ as P,
  uQ as Q,
  Js as R,
  H9 as S,
  z9 as T,
  roe as U,
  z_ as V,
  xA as W,
  oQ as X,
  dQ as Y,
  fQ as Z,
  ioe as _,
  Xie as a,
  ZO as a0,
  TA as a1,
  gy as a2,
  soe as a3,
  hQ as a4,
  coe as a5,
  mQ as a6,
  loe as a7,
  sn as a8,
  _Q as a9,
  Zie as aA,
  q9 as aB,
  EA as aC,
  AQ as aD,
  doe as aE,
  xQ as aF,
  PA as aG,
  foe as aH,
  TQ as aI,
  toe as aJ,
  noe as aK,
  eD as aa,
  pQ as ab,
  vQ as ac,
  $s as ad,
  IA as ae,
  gQ as af,
  yQ as ag,
  uoe as ah,
  bQ as ai,
  wQ as aj,
  kQ as ak,
  r1 as al,
  SQ as am,
  tD as an,
  nD as ao,
  CQ as ap,
  Mh as aq,
  gA as ar,
  U9 as as,
  yA as at,
  $9 as au,
  JO as av,
  Lu as aw,
  bA as ax,
  wA as ay,
  Ud as az,
  n1 as b,
  ta as c,
  gt as d,
  _u as e,
  kA as f,
  eoe as g,
  _y as h,
  sm as i,
  XO as j,
  Rh as k,
  SA as l,
  Ae as m,
  j9 as n,
  Y9 as o,
  Tt as p,
  CA as q,
  py as r,
  W9 as s,
  QO as t,
  Lh as u,
  AA as v,
  K9 as w,
  Fu as x,
  a1 as y,
  G9 as z
};
