$(function() {
  frappe.realtime.on("toconsole", function(e) {
    e.forEach((t) => {
      console.log(t);
    });
  });
});
/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function sw(e) {
  const t = /* @__PURE__ */ Object.create(null);
  for (const n of e.split(",")) t[n] = 1;
  return (n) => n in t;
}
const $n = {}, cu = [], bo = () => {
}, lF = () => !1, tv = (e) => e.charCodeAt(0) === 111 && e.charCodeAt(1) === 110 && // uppercase letter
(e.charCodeAt(2) > 122 || e.charCodeAt(2) < 97), lw = (e) => e.startsWith("onUpdate:"), Qa = Object.assign, cw = (e, t) => {
  const n = e.indexOf(t);
  n > -1 && e.splice(n, 1);
}, cF = Object.prototype.hasOwnProperty, xn = (e, t) => cF.call(e, t), Rt = Array.isArray, uu = (e) => nv(e) === "[object Map]", rx = (e) => nv(e) === "[object Set]", Yt = (e) => typeof e == "function", da = (e) => typeof e == "string", ls = (e) => typeof e == "symbol", Wn = (e) => e !== null && typeof e == "object", ix = (e) => (Wn(e) || Yt(e)) && Yt(e.then) && Yt(e.catch), ox = Object.prototype.toString, nv = (e) => ox.call(e), uF = (e) => nv(e).slice(8, -1), sx = (e) => nv(e) === "[object Object]", uw = (e) => da(e) && e !== "NaN" && e[0] !== "-" && "" + parseInt(e, 10) === e, ef = /* @__PURE__ */ sw(
  // the leading comma is intentional so empty string "" is also included
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
), av = (e) => {
  const t = /* @__PURE__ */ Object.create(null);
  return (n) => t[n] || (t[n] = e(n));
}, dF = /-(\w)/g, Ur = av(
  (e) => e.replace(dF, (t, n) => n ? n.toUpperCase() : "")
), fF = /\B([A-Z])/g, tl = av(
  (e) => e.replace(fF, "-$1").toLowerCase()
), To = av((e) => e.charAt(0).toUpperCase() + e.slice(1)), Ig = av(
  (e) => e ? `on${To(e)}` : ""
), Fs = (e, t) => !Object.is(e, t), Qh = (e, ...t) => {
  for (let n = 0; n < e.length; n++)
    e[n](...t);
}, Py = (e, t, n, a = !1) => {
  Object.defineProperty(e, t, {
    configurable: !0,
    enumerable: !1,
    writable: a,
    value: n
  });
}, Oy = (e) => {
  const t = parseFloat(e);
  return isNaN(t) ? e : t;
}, mF = (e) => {
  const t = da(e) ? Number(e) : NaN;
  return isNaN(t) ? e : t;
};
let aS;
const rv = () => aS || (aS = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : typeof global < "u" ? global : {});
function Je(e) {
  if (Rt(e)) {
    const t = {};
    for (let n = 0; n < e.length; n++) {
      const a = e[n], r = da(a) ? pF(a) : Je(a);
      if (r)
        for (const i in r)
          t[i] = r[i];
    }
    return t;
  } else if (da(e) || Wn(e))
    return e;
}
const hF = /;(?![^(]*\))/g, _F = /:([^]+)/, vF = /\/\*[^]*?\*\//g;
function pF(e) {
  const t = {};
  return e.replace(vF, "").split(hF).forEach((n) => {
    if (n) {
      const a = n.split(_F);
      a.length > 1 && (t[a[0].trim()] = a[1].trim());
    }
  }), t;
}
function Ae(e) {
  let t = "";
  if (da(e))
    t = e;
  else if (Rt(e))
    for (let n = 0; n < e.length; n++) {
      const a = Ae(e[n]);
      a && (t += a + " ");
    }
  else if (Wn(e))
    for (const n in e)
      e[n] && (t += n + " ");
  return t.trim();
}
function ea(e) {
  if (!e) return null;
  let { class: t, style: n } = e;
  return t && !da(t) && (e.class = Ae(t)), n && (e.style = Je(n)), e;
}
const gF = "itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly", yF = /* @__PURE__ */ sw(gF);
function lx(e) {
  return !!e || e === "";
}
const cx = (e) => !!(e && e.__v_isRef === !0), j = (e) => da(e) ? e : e == null ? "" : Rt(e) || Wn(e) && (e.toString === ox || !Yt(e.toString)) ? cx(e) ? j(e.value) : JSON.stringify(e, ux, 2) : String(e), ux = (e, t) => cx(t) ? ux(e, t.value) : uu(t) ? {
  [`Map(${t.size})`]: [...t.entries()].reduce(
    (n, [a, r], i) => (n[Eg(a, i) + " =>"] = r, n),
    {}
  )
} : rx(t) ? {
  [`Set(${t.size})`]: [...t.values()].map((n) => Eg(n))
} : ls(t) ? Eg(t) : Wn(t) && !Rt(t) && !sx(t) ? String(t) : t, Eg = (e, t = "") => {
  var n;
  return (
    // Symbol.description in es2019+ so we need to cast here to pass
    // the lib: es2016 check
    ls(e) ? `Symbol(${(n = e.description) != null ? n : t})` : e
  );
};
/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let yr;
class dx {
  constructor(t = !1) {
    this.detached = t, this._active = !0, this._on = 0, this.effects = [], this.cleanups = [], this._isPaused = !1, this.parent = yr, !t && yr && (this.index = (yr.scopes || (yr.scopes = [])).push(
      this
    ) - 1);
  }
  get active() {
    return this._active;
  }
  pause() {
    if (this._active) {
      this._isPaused = !0;
      let t, n;
      if (this.scopes)
        for (t = 0, n = this.scopes.length; t < n; t++)
          this.scopes[t].pause();
      for (t = 0, n = this.effects.length; t < n; t++)
        this.effects[t].pause();
    }
  }
  /**
   * Resumes the effect scope, including all child scopes and effects.
   */
  resume() {
    if (this._active && this._isPaused) {
      this._isPaused = !1;
      let t, n;
      if (this.scopes)
        for (t = 0, n = this.scopes.length; t < n; t++)
          this.scopes[t].resume();
      for (t = 0, n = this.effects.length; t < n; t++)
        this.effects[t].resume();
    }
  }
  run(t) {
    if (this._active) {
      const n = yr;
      try {
        return yr = this, t();
      } finally {
        yr = n;
      }
    }
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  on() {
    ++this._on === 1 && (this.prevScope = yr, yr = this);
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  off() {
    this._on > 0 && --this._on === 0 && (yr = this.prevScope, this.prevScope = void 0);
  }
  stop(t) {
    if (this._active) {
      this._active = !1;
      let n, a;
      for (n = 0, a = this.effects.length; n < a; n++)
        this.effects[n].stop();
      for (this.effects.length = 0, n = 0, a = this.cleanups.length; n < a; n++)
        this.cleanups[n]();
      if (this.cleanups.length = 0, this.scopes) {
        for (n = 0, a = this.scopes.length; n < a; n++)
          this.scopes[n].stop(!0);
        this.scopes.length = 0;
      }
      if (!this.detached && this.parent && !t) {
        const r = this.parent.scopes.pop();
        r && r !== this && (this.parent.scopes[this.index] = r, r.index = this.index);
      }
      this.parent = void 0;
    }
  }
}
function ku(e) {
  return new dx(e);
}
function dw() {
  return yr;
}
function Fa(e, t = !1) {
  yr && yr.cleanups.push(e);
}
let zn;
const Pg = /* @__PURE__ */ new WeakSet();
class fx {
  constructor(t) {
    this.fn = t, this.deps = void 0, this.depsTail = void 0, this.flags = 5, this.next = void 0, this.cleanup = void 0, this.scheduler = void 0, yr && yr.active && yr.effects.push(this);
  }
  pause() {
    this.flags |= 64;
  }
  resume() {
    this.flags & 64 && (this.flags &= -65, Pg.has(this) && (Pg.delete(this), this.trigger()));
  }
  /**
   * @internal
   */
  notify() {
    this.flags & 2 && !(this.flags & 32) || this.flags & 8 || hx(this);
  }
  run() {
    if (!(this.flags & 1))
      return this.fn();
    this.flags |= 2, rS(this), _x(this);
    const t = zn, n = Wi;
    zn = this, Wi = !0;
    try {
      return this.fn();
    } finally {
      vx(this), zn = t, Wi = n, this.flags &= -3;
    }
  }
  stop() {
    if (this.flags & 1) {
      for (let t = this.deps; t; t = t.nextDep)
        hw(t);
      this.deps = this.depsTail = void 0, rS(this), this.onStop && this.onStop(), this.flags &= -2;
    }
  }
  trigger() {
    this.flags & 64 ? Pg.add(this) : this.scheduler ? this.scheduler() : this.runIfDirty();
  }
  /**
   * @internal
   */
  runIfDirty() {
    Dy(this) && this.run();
  }
  get dirty() {
    return Dy(this);
  }
}
let mx = 0, tf, nf;
function hx(e, t = !1) {
  if (e.flags |= 8, t) {
    e.next = nf, nf = e;
    return;
  }
  e.next = tf, tf = e;
}
function fw() {
  mx++;
}
function mw() {
  if (--mx > 0)
    return;
  if (nf) {
    let t = nf;
    for (nf = void 0; t; ) {
      const n = t.next;
      t.next = void 0, t.flags &= -9, t = n;
    }
  }
  let e;
  for (; tf; ) {
    let t = tf;
    for (tf = void 0; t; ) {
      const n = t.next;
      if (t.next = void 0, t.flags &= -9, t.flags & 1)
        try {
          t.trigger();
        } catch (a) {
          e || (e = a);
        }
      t = n;
    }
  }
  if (e) throw e;
}
function _x(e) {
  for (let t = e.deps; t; t = t.nextDep)
    t.version = -1, t.prevActiveLink = t.dep.activeLink, t.dep.activeLink = t;
}
function vx(e) {
  let t, n = e.depsTail, a = n;
  for (; a; ) {
    const r = a.prevDep;
    a.version === -1 ? (a === n && (n = r), hw(a), bF(a)) : t = a, a.dep.activeLink = a.prevActiveLink, a.prevActiveLink = void 0, a = r;
  }
  e.deps = t, e.depsTail = n;
}
function Dy(e) {
  for (let t = e.deps; t; t = t.nextDep)
    if (t.dep.version !== t.version || t.dep.computed && (px(t.dep.computed) || t.dep.version !== t.version))
      return !0;
  return !!e._dirty;
}
function px(e) {
  if (e.flags & 4 && !(e.flags & 16) || (e.flags &= -17, e.globalVersion === mf) || (e.globalVersion = mf, !e.isSSR && e.flags & 128 && (!e.deps && !e._dirty || !Dy(e))))
    return;
  e.flags |= 2;
  const t = e.dep, n = zn, a = Wi;
  zn = e, Wi = !0;
  try {
    _x(e);
    const r = e.fn(e._value);
    (t.version === 0 || Fs(r, e._value)) && (e.flags |= 128, e._value = r, t.version++);
  } catch (r) {
    throw t.version++, r;
  } finally {
    zn = n, Wi = a, vx(e), e.flags &= -3;
  }
}
function hw(e, t = !1) {
  const { dep: n, prevSub: a, nextSub: r } = e;
  if (a && (a.nextSub = r, e.prevSub = void 0), r && (r.prevSub = a, e.nextSub = void 0), n.subs === e && (n.subs = a, !a && n.computed)) {
    n.computed.flags &= -5;
    for (let i = n.computed.deps; i; i = i.nextDep)
      hw(i, !0);
  }
  !t && !--n.sc && n.map && n.map.delete(n.key);
}
function bF(e) {
  const { prevDep: t, nextDep: n } = e;
  t && (t.nextDep = n, e.prevDep = void 0), n && (n.prevDep = t, e.nextDep = void 0);
}
let Wi = !0;
const gx = [];
function ts() {
  gx.push(Wi), Wi = !1;
}
function ns() {
  const e = gx.pop();
  Wi = e === void 0 ? !0 : e;
}
function rS(e) {
  const { cleanup: t } = e;
  if (e.cleanup = void 0, t) {
    const n = zn;
    zn = void 0;
    try {
      t();
    } finally {
      zn = n;
    }
  }
}
let mf = 0;
class wF {
  constructor(t, n) {
    this.sub = t, this.dep = n, this.version = n.version, this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;
  }
}
class _w {
  // TODO isolatedDeclarations "__v_skip"
  constructor(t) {
    this.computed = t, this.version = 0, this.activeLink = void 0, this.subs = void 0, this.map = void 0, this.key = void 0, this.sc = 0, this.__v_skip = !0;
  }
  track(t) {
    if (!zn || !Wi || zn === this.computed)
      return;
    let n = this.activeLink;
    if (n === void 0 || n.sub !== zn)
      n = this.activeLink = new wF(zn, this), zn.deps ? (n.prevDep = zn.depsTail, zn.depsTail.nextDep = n, zn.depsTail = n) : zn.deps = zn.depsTail = n, yx(n);
    else if (n.version === -1 && (n.version = this.version, n.nextDep)) {
      const a = n.nextDep;
      a.prevDep = n.prevDep, n.prevDep && (n.prevDep.nextDep = a), n.prevDep = zn.depsTail, n.nextDep = void 0, zn.depsTail.nextDep = n, zn.depsTail = n, zn.deps === n && (zn.deps = a);
    }
    return n;
  }
  trigger(t) {
    this.version++, mf++, this.notify(t);
  }
  notify(t) {
    fw();
    try {
      for (let n = this.subs; n; n = n.prevSub)
        n.sub.notify() && n.sub.dep.notify();
    } finally {
      mw();
    }
  }
}
function yx(e) {
  if (e.dep.sc++, e.sub.flags & 4) {
    const t = e.dep.computed;
    if (t && !e.dep.subs) {
      t.flags |= 20;
      for (let a = t.deps; a; a = a.nextDep)
        yx(a);
    }
    const n = e.dep.subs;
    n !== e && (e.prevSub = n, n && (n.nextSub = e)), e.dep.subs = e;
  }
}
const f_ = /* @__PURE__ */ new WeakMap(), ql = Symbol(
  ""
), By = Symbol(
  ""
), hf = Symbol(
  ""
);
function wr(e, t, n) {
  if (Wi && zn) {
    let a = f_.get(e);
    a || f_.set(e, a = /* @__PURE__ */ new Map());
    let r = a.get(n);
    r || (a.set(n, r = new _w()), r.map = a, r.key = n), r.track();
  }
}
function Yo(e, t, n, a, r, i) {
  const o = f_.get(e);
  if (!o) {
    mf++;
    return;
  }
  const l = (s) => {
    s && s.trigger();
  };
  if (fw(), t === "clear")
    o.forEach(l);
  else {
    const s = Rt(e), d = s && uw(n);
    if (s && n === "length") {
      const u = Number(a);
      o.forEach((f, h) => {
        (h === "length" || h === hf || !ls(h) && h >= u) && l(f);
      });
    } else
      switch ((n !== void 0 || o.has(void 0)) && l(o.get(n)), d && l(o.get(hf)), t) {
        case "add":
          s ? d && l(o.get("length")) : (l(o.get(ql)), uu(e) && l(o.get(By)));
          break;
        case "delete":
          s || (l(o.get(ql)), uu(e) && l(o.get(By)));
          break;
        case "set":
          uu(e) && l(o.get(ql));
          break;
      }
  }
  mw();
}
function kF(e, t) {
  const n = f_.get(e);
  return n && n.get(t);
}
function Kc(e) {
  const t = Ot(e);
  return t === e ? t : (wr(t, "iterate", hf), Pi(e) ? t : t.map(cr));
}
function iv(e) {
  return wr(e = Ot(e), "iterate", hf), e;
}
const SF = {
  __proto__: null,
  [Symbol.iterator]() {
    return Og(this, Symbol.iterator, cr);
  },
  concat(...e) {
    return Kc(this).concat(
      ...e.map((t) => Rt(t) ? Kc(t) : t)
    );
  },
  entries() {
    return Og(this, "entries", (e) => (e[1] = cr(e[1]), e));
  },
  every(e, t) {
    return Ho(this, "every", e, t, void 0, arguments);
  },
  filter(e, t) {
    return Ho(this, "filter", e, t, (n) => n.map(cr), arguments);
  },
  find(e, t) {
    return Ho(this, "find", e, t, cr, arguments);
  },
  findIndex(e, t) {
    return Ho(this, "findIndex", e, t, void 0, arguments);
  },
  findLast(e, t) {
    return Ho(this, "findLast", e, t, cr, arguments);
  },
  findLastIndex(e, t) {
    return Ho(this, "findLastIndex", e, t, void 0, arguments);
  },
  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement
  forEach(e, t) {
    return Ho(this, "forEach", e, t, void 0, arguments);
  },
  includes(...e) {
    return Dg(this, "includes", e);
  },
  indexOf(...e) {
    return Dg(this, "indexOf", e);
  },
  join(e) {
    return Kc(this).join(e);
  },
  // keys() iterator only reads `length`, no optimisation required
  lastIndexOf(...e) {
    return Dg(this, "lastIndexOf", e);
  },
  map(e, t) {
    return Ho(this, "map", e, t, void 0, arguments);
  },
  pop() {
    return Nd(this, "pop");
  },
  push(...e) {
    return Nd(this, "push", e);
  },
  reduce(e, ...t) {
    return iS(this, "reduce", e, t);
  },
  reduceRight(e, ...t) {
    return iS(this, "reduceRight", e, t);
  },
  shift() {
    return Nd(this, "shift");
  },
  // slice could use ARRAY_ITERATE but also seems to beg for range tracking
  some(e, t) {
    return Ho(this, "some", e, t, void 0, arguments);
  },
  splice(...e) {
    return Nd(this, "splice", e);
  },
  toReversed() {
    return Kc(this).toReversed();
  },
  toSorted(e) {
    return Kc(this).toSorted(e);
  },
  toSpliced(...e) {
    return Kc(this).toSpliced(...e);
  },
  unshift(...e) {
    return Nd(this, "unshift", e);
  },
  values() {
    return Og(this, "values", cr);
  }
};
function Og(e, t, n) {
  const a = iv(e), r = a[t]();
  return a !== e && !Pi(e) && (r._next = r.next, r.next = () => {
    const i = r._next();
    return i.value && (i.value = n(i.value)), i;
  }), r;
}
const CF = Array.prototype;
function Ho(e, t, n, a, r, i) {
  const o = iv(e), l = o !== e && !Pi(e), s = o[t];
  if (s !== CF[t]) {
    const f = s.apply(e, i);
    return l ? cr(f) : f;
  }
  let d = n;
  o !== e && (l ? d = function(f, h) {
    return n.call(this, cr(f), h, e);
  } : n.length > 2 && (d = function(f, h) {
    return n.call(this, f, h, e);
  }));
  const u = s.call(o, d, a);
  return l && r ? r(u) : u;
}
function iS(e, t, n, a) {
  const r = iv(e);
  let i = n;
  return r !== e && (Pi(e) ? n.length > 3 && (i = function(o, l, s) {
    return n.call(this, o, l, s, e);
  }) : i = function(o, l, s) {
    return n.call(this, o, cr(l), s, e);
  }), r[t](i, ...a);
}
function Dg(e, t, n) {
  const a = Ot(e);
  wr(a, "iterate", hf);
  const r = a[t](...n);
  return (r === -1 || r === !1) && gw(n[0]) ? (n[0] = Ot(n[0]), a[t](...n)) : r;
}
function Nd(e, t, n = []) {
  ts(), fw();
  const a = Ot(e)[t].apply(e, n);
  return mw(), ns(), a;
}
const AF = /* @__PURE__ */ sw("__proto__,__v_isRef,__isVue"), bx = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((e) => e !== "arguments" && e !== "caller").map((e) => Symbol[e]).filter(ls)
);
function xF(e) {
  ls(e) || (e = String(e));
  const t = Ot(this);
  return wr(t, "has", e), t.hasOwnProperty(e);
}
class wx {
  constructor(t = !1, n = !1) {
    this._isReadonly = t, this._isShallow = n;
  }
  get(t, n, a) {
    if (n === "__v_skip") return t.__v_skip;
    const r = this._isReadonly, i = this._isShallow;
    if (n === "__v_isReactive")
      return !r;
    if (n === "__v_isReadonly")
      return r;
    if (n === "__v_isShallow")
      return i;
    if (n === "__v_raw")
      return a === (r ? i ? LF : Ax : i ? Cx : Sx).get(t) || // receiver is not the reactive proxy, but has the same prototype
      // this means the receiver is a user proxy of the reactive proxy
      Object.getPrototypeOf(t) === Object.getPrototypeOf(a) ? t : void 0;
    const o = Rt(t);
    if (!r) {
      let s;
      if (o && (s = SF[n]))
        return s;
      if (n === "hasOwnProperty")
        return xF;
    }
    const l = Reflect.get(
      t,
      n,
      // if this is a proxy wrapping a ref, return methods using the raw ref
      // as receiver so that we don't have to call `toRaw` on the ref in all
      // its class methods
      ga(t) ? t : a
    );
    return (ls(n) ? bx.has(n) : AF(n)) || (r || wr(t, "get", n), i) ? l : ga(l) ? o && uw(n) ? l : l.value : Wn(l) ? r ? Hu(l) : Zn(l) : l;
  }
}
class kx extends wx {
  constructor(t = !1) {
    super(!1, t);
  }
  set(t, n, a, r) {
    let i = t[n];
    if (!this._isShallow) {
      const s = Hs(i);
      if (!Pi(a) && !Hs(a) && (i = Ot(i), a = Ot(a)), !Rt(t) && ga(i) && !ga(a))
        return s ? !1 : (i.value = a, !0);
    }
    const o = Rt(t) && uw(n) ? Number(n) < t.length : xn(t, n), l = Reflect.set(
      t,
      n,
      a,
      ga(t) ? t : r
    );
    return t === Ot(r) && (o ? Fs(a, i) && Yo(t, "set", n, a) : Yo(t, "add", n, a)), l;
  }
  deleteProperty(t, n) {
    const a = xn(t, n);
    t[n];
    const r = Reflect.deleteProperty(t, n);
    return r && a && Yo(t, "delete", n, void 0), r;
  }
  has(t, n) {
    const a = Reflect.has(t, n);
    return (!ls(n) || !bx.has(n)) && wr(t, "has", n), a;
  }
  ownKeys(t) {
    return wr(
      t,
      "iterate",
      Rt(t) ? "length" : ql
    ), Reflect.ownKeys(t);
  }
}
class TF extends wx {
  constructor(t = !1) {
    super(!0, t);
  }
  set(t, n) {
    return !0;
  }
  deleteProperty(t, n) {
    return !0;
  }
}
const IF = /* @__PURE__ */ new kx(), EF = /* @__PURE__ */ new TF(), PF = /* @__PURE__ */ new kx(!0);
const Vy = (e) => e, kh = (e) => Reflect.getPrototypeOf(e);
function OF(e, t, n) {
  return function(...a) {
    const r = this.__v_raw, i = Ot(r), o = uu(i), l = e === "entries" || e === Symbol.iterator && o, s = e === "keys" && o, d = r[e](...a), u = n ? Vy : t ? m_ : cr;
    return !t && wr(
      i,
      "iterate",
      s ? By : ql
    ), {
      // iterator protocol
      next() {
        const { value: f, done: h } = d.next();
        return h ? { value: f, done: h } : {
          value: l ? [u(f[0]), u(f[1])] : u(f),
          done: h
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function Sh(e) {
  return function(...t) {
    return e === "delete" ? !1 : e === "clear" ? void 0 : this;
  };
}
function DF(e, t) {
  const n = {
    get(r) {
      const i = this.__v_raw, o = Ot(i), l = Ot(r);
      e || (Fs(r, l) && wr(o, "get", r), wr(o, "get", l));
      const { has: s } = kh(o), d = t ? Vy : e ? m_ : cr;
      if (s.call(o, r))
        return d(i.get(r));
      if (s.call(o, l))
        return d(i.get(l));
      i !== o && i.get(r);
    },
    get size() {
      const r = this.__v_raw;
      return !e && wr(Ot(r), "iterate", ql), Reflect.get(r, "size", r);
    },
    has(r) {
      const i = this.__v_raw, o = Ot(i), l = Ot(r);
      return e || (Fs(r, l) && wr(o, "has", r), wr(o, "has", l)), r === l ? i.has(r) : i.has(r) || i.has(l);
    },
    forEach(r, i) {
      const o = this, l = o.__v_raw, s = Ot(l), d = t ? Vy : e ? m_ : cr;
      return !e && wr(s, "iterate", ql), l.forEach((u, f) => r.call(i, d(u), d(f), o));
    }
  };
  return Qa(
    n,
    e ? {
      add: Sh("add"),
      set: Sh("set"),
      delete: Sh("delete"),
      clear: Sh("clear")
    } : {
      add(r) {
        !t && !Pi(r) && !Hs(r) && (r = Ot(r));
        const i = Ot(this);
        return kh(i).has.call(i, r) || (i.add(r), Yo(i, "add", r, r)), this;
      },
      set(r, i) {
        !t && !Pi(i) && !Hs(i) && (i = Ot(i));
        const o = Ot(this), { has: l, get: s } = kh(o);
        let d = l.call(o, r);
        d || (r = Ot(r), d = l.call(o, r));
        const u = s.call(o, r);
        return o.set(r, i), d ? Fs(i, u) && Yo(o, "set", r, i) : Yo(o, "add", r, i), this;
      },
      delete(r) {
        const i = Ot(this), { has: o, get: l } = kh(i);
        let s = o.call(i, r);
        s || (r = Ot(r), s = o.call(i, r)), l && l.call(i, r);
        const d = i.delete(r);
        return s && Yo(i, "delete", r, void 0), d;
      },
      clear() {
        const r = Ot(this), i = r.size !== 0, o = r.clear();
        return i && Yo(
          r,
          "clear",
          void 0,
          void 0
        ), o;
      }
    }
  ), [
    "keys",
    "values",
    "entries",
    Symbol.iterator
  ].forEach((r) => {
    n[r] = OF(r, e, t);
  }), n;
}
function vw(e, t) {
  const n = DF(e, t);
  return (a, r, i) => r === "__v_isReactive" ? !e : r === "__v_isReadonly" ? e : r === "__v_raw" ? a : Reflect.get(
    xn(n, r) && r in a ? n : a,
    r,
    i
  );
}
const BF = {
  get: /* @__PURE__ */ vw(!1, !1)
}, VF = {
  get: /* @__PURE__ */ vw(!1, !0)
}, MF = {
  get: /* @__PURE__ */ vw(!0, !1)
};
const Sx = /* @__PURE__ */ new WeakMap(), Cx = /* @__PURE__ */ new WeakMap(), Ax = /* @__PURE__ */ new WeakMap(), LF = /* @__PURE__ */ new WeakMap();
function RF(e) {
  switch (e) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function FF(e) {
  return e.__v_skip || !Object.isExtensible(e) ? 0 : RF(uF(e));
}
function Zn(e) {
  return Hs(e) ? e : pw(
    e,
    !1,
    IF,
    BF,
    Sx
  );
}
function NF(e) {
  return pw(
    e,
    !1,
    PF,
    VF,
    Cx
  );
}
function Hu(e) {
  return pw(
    e,
    !0,
    EF,
    MF,
    Ax
  );
}
function pw(e, t, n, a, r) {
  if (!Wn(e) || e.__v_raw && !(t && e.__v_isReactive))
    return e;
  const i = FF(e);
  if (i === 0)
    return e;
  const o = r.get(e);
  if (o)
    return o;
  const l = new Proxy(
    e,
    i === 2 ? a : n
  );
  return r.set(e, l), l;
}
function du(e) {
  return Hs(e) ? du(e.__v_raw) : !!(e && e.__v_isReactive);
}
function Hs(e) {
  return !!(e && e.__v_isReadonly);
}
function Pi(e) {
  return !!(e && e.__v_isShallow);
}
function gw(e) {
  return e ? !!e.__v_raw : !1;
}
function Ot(e) {
  const t = e && e.__v_raw;
  return t ? Ot(t) : e;
}
function xx(e) {
  return !xn(e, "__v_skip") && Object.isExtensible(e) && Py(e, "__v_skip", !0), e;
}
const cr = (e) => Wn(e) ? Zn(e) : e, m_ = (e) => Wn(e) ? Hu(e) : e;
function ga(e) {
  return e ? e.__v_isRef === !0 : !1;
}
function be(e) {
  return Tx(e, !1);
}
function rt(e) {
  return Tx(e, !0);
}
function Tx(e, t) {
  return ga(e) ? e : new UF(e, t);
}
class UF {
  constructor(t, n) {
    this.dep = new _w(), this.__v_isRef = !0, this.__v_isShallow = !1, this._rawValue = n ? t : Ot(t), this._value = n ? t : cr(t), this.__v_isShallow = n;
  }
  get value() {
    return this.dep.track(), this._value;
  }
  set value(t) {
    const n = this._rawValue, a = this.__v_isShallow || Pi(t) || Hs(t);
    t = a ? t : Ot(t), Fs(t, n) && (this._rawValue = t, this._value = a ? t : cr(t), this.dep.trigger());
  }
}
function fe(e) {
  return ga(e) ? e.value : e;
}
function ji(e) {
  return Yt(e) ? e() : fe(e);
}
const $F = {
  get: (e, t, n) => t === "__v_raw" ? e : fe(Reflect.get(e, t, n)),
  set: (e, t, n, a) => {
    const r = e[t];
    return ga(r) && !ga(n) ? (r.value = n, !0) : Reflect.set(e, t, n, a);
  }
};
function Ix(e) {
  return du(e) ? e : new Proxy(e, $F);
}
function zu(e) {
  const t = Rt(e) ? new Array(e.length) : {};
  for (const n in e)
    t[n] = Ex(e, n);
  return t;
}
class qF {
  constructor(t, n, a) {
    this._object = t, this._key = n, this._defaultValue = a, this.__v_isRef = !0, this._value = void 0;
  }
  get value() {
    const t = this._object[this._key];
    return this._value = t === void 0 ? this._defaultValue : t;
  }
  set value(t) {
    this._object[this._key] = t;
  }
  get dep() {
    return kF(Ot(this._object), this._key);
  }
}
class HF {
  constructor(t) {
    this._getter = t, this.__v_isRef = !0, this.__v_isReadonly = !0, this._value = void 0;
  }
  get value() {
    return this._value = this._getter();
  }
}
function ye(e, t, n) {
  return ga(e) ? e : Yt(e) ? new HF(e) : Wn(e) && arguments.length > 1 ? Ex(e, t, n) : be(e);
}
function Ex(e, t, n) {
  const a = e[t];
  return ga(a) ? a : new qF(e, t, n);
}
class zF {
  constructor(t, n, a) {
    this.fn = t, this.setter = n, this._value = void 0, this.dep = new _w(this), this.__v_isRef = !0, this.deps = void 0, this.depsTail = void 0, this.flags = 16, this.globalVersion = mf - 1, this.next = void 0, this.effect = this, this.__v_isReadonly = !n, this.isSSR = a;
  }
  /**
   * @internal
   */
  notify() {
    if (this.flags |= 16, !(this.flags & 8) && // avoid infinite self recursion
    zn !== this)
      return hx(this, !0), !0;
  }
  get value() {
    const t = this.dep.track();
    return px(this), t && (t.version = this.dep.version), this._value;
  }
  set value(t) {
    this.setter && this.setter(t);
  }
}
function WF(e, t, n = !1) {
  let a, r;
  return Yt(e) ? a = e : (a = e.get, r = e.set), new zF(a, r, n);
}
const Ch = {}, h_ = /* @__PURE__ */ new WeakMap();
let Pl;
function KF(e, t = !1, n = Pl) {
  if (n) {
    let a = h_.get(n);
    a || h_.set(n, a = []), a.push(e);
  }
}
function jF(e, t, n = $n) {
  const { immediate: a, deep: r, once: i, scheduler: o, augmentJob: l, call: s } = n, d = (A) => r ? A : Pi(A) || r === !1 || r === 0 ? Go(A, 1) : Go(A);
  let u, f, h, y, p = !1, w = !1;
  if (ga(e) ? (f = () => e.value, p = Pi(e)) : du(e) ? (f = () => d(e), p = !0) : Rt(e) ? (w = !0, p = e.some((A) => du(A) || Pi(A)), f = () => e.map((A) => {
    if (ga(A))
      return A.value;
    if (du(A))
      return d(A);
    if (Yt(A))
      return s ? s(A, 2) : A();
  })) : Yt(e) ? t ? f = s ? () => s(e, 2) : e : f = () => {
    if (h) {
      ts();
      try {
        h();
      } finally {
        ns();
      }
    }
    const A = Pl;
    Pl = u;
    try {
      return s ? s(e, 3, [y]) : e(y);
    } finally {
      Pl = A;
    }
  } : f = bo, t && r) {
    const A = f, C = r === !0 ? 1 / 0 : r;
    f = () => Go(A(), C);
  }
  const b = dw(), v = () => {
    u.stop(), b && b.active && cw(b.effects, u);
  };
  if (i && t) {
    const A = t;
    t = (...C) => {
      A(...C), v();
    };
  }
  let g = w ? new Array(e.length).fill(Ch) : Ch;
  const k = (A) => {
    if (!(!(u.flags & 1) || !u.dirty && !A))
      if (t) {
        const C = u.run();
        if (r || p || (w ? C.some((D, P) => Fs(D, g[P])) : Fs(C, g))) {
          h && h();
          const D = Pl;
          Pl = u;
          try {
            const P = [
              C,
              // pass undefined as the old value when it's changed for the first time
              g === Ch ? void 0 : w && g[0] === Ch ? [] : g,
              y
            ];
            g = C, s ? s(t, 3, P) : (
              // @ts-expect-error
              t(...P)
            );
          } finally {
            Pl = D;
          }
        }
      } else
        u.run();
  };
  return l && l(k), u = new fx(f), u.scheduler = o ? () => o(k, !1) : k, y = (A) => KF(A, !1, u), h = u.onStop = () => {
    const A = h_.get(u);
    if (A) {
      if (s)
        s(A, 4);
      else
        for (const C of A) C();
      h_.delete(u);
    }
  }, t ? a ? k(!0) : g = u.run() : o ? o(k.bind(null, !0), !0) : u.run(), v.pause = u.pause.bind(u), v.resume = u.resume.bind(u), v.stop = v, v;
}
function Go(e, t = 1 / 0, n) {
  if (t <= 0 || !Wn(e) || e.__v_skip || (n = n || /* @__PURE__ */ new Set(), n.has(e)))
    return e;
  if (n.add(e), t--, ga(e))
    Go(e.value, t, n);
  else if (Rt(e))
    for (let a = 0; a < e.length; a++)
      Go(e[a], t, n);
  else if (rx(e) || uu(e))
    e.forEach((a) => {
      Go(a, t, n);
    });
  else if (sx(e)) {
    for (const a in e)
      Go(e[a], t, n);
    for (const a of Object.getOwnPropertySymbols(e))
      Object.prototype.propertyIsEnumerable.call(e, a) && Go(e[a], t, n);
  }
  return e;
}
/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function qf(e, t, n, a) {
  try {
    return a ? e(...a) : e();
  } catch (r) {
    ov(r, t, n);
  }
}
function Yi(e, t, n, a) {
  if (Yt(e)) {
    const r = qf(e, t, n, a);
    return r && ix(r) && r.catch((i) => {
      ov(i, t, n);
    }), r;
  }
  if (Rt(e)) {
    const r = [];
    for (let i = 0; i < e.length; i++)
      r.push(Yi(e[i], t, n, a));
    return r;
  }
}
function ov(e, t, n, a = !0) {
  const r = t ? t.vnode : null, { errorHandler: i, throwUnhandledErrorInProduction: o } = t && t.appContext.config || $n;
  if (t) {
    let l = t.parent;
    const s = t.proxy, d = `https://vuejs.org/error-reference/#runtime-${n}`;
    for (; l; ) {
      const u = l.ec;
      if (u) {
        for (let f = 0; f < u.length; f++)
          if (u[f](e, s, d) === !1)
            return;
      }
      l = l.parent;
    }
    if (i) {
      ts(), qf(i, null, 10, [
        e,
        s,
        d
      ]), ns();
      return;
    }
  }
  YF(e, n, r, a, o);
}
function YF(e, t, n, a = !0, r = !1) {
  if (r)
    throw e;
  console.error(e);
}
const Rr = [];
let ho = -1;
const fu = [];
let Os = null, tu = 0;
const Px = /* @__PURE__ */ Promise.resolve();
let v_ = null;
function Dt(e) {
  const t = v_ || Px;
  return e ? t.then(this ? e.bind(this) : e) : t;
}
function GF(e) {
  let t = ho + 1, n = Rr.length;
  for (; t < n; ) {
    const a = t + n >>> 1, r = Rr[a], i = _f(r);
    i < e || i === e && r.flags & 2 ? t = a + 1 : n = a;
  }
  return t;
}
function yw(e) {
  if (!(e.flags & 1)) {
    const t = _f(e), n = Rr[Rr.length - 1];
    !n || // fast path when the job id is larger than the tail
    !(e.flags & 2) && t >= _f(n) ? Rr.push(e) : Rr.splice(GF(t), 0, e), e.flags |= 1, Ox();
  }
}
function Ox() {
  v_ || (v_ = Px.then(Bx));
}
function QF(e) {
  Rt(e) ? fu.push(...e) : Os && e.id === -1 ? Os.splice(tu + 1, 0, e) : e.flags & 1 || (fu.push(e), e.flags |= 1), Ox();
}
function oS(e, t, n = ho + 1) {
  for (; n < Rr.length; n++) {
    const a = Rr[n];
    if (a && a.flags & 2) {
      if (e && a.id !== e.uid)
        continue;
      Rr.splice(n, 1), n--, a.flags & 4 && (a.flags &= -2), a(), a.flags & 4 || (a.flags &= -2);
    }
  }
}
function Dx(e) {
  if (fu.length) {
    const t = [...new Set(fu)].sort(
      (n, a) => _f(n) - _f(a)
    );
    if (fu.length = 0, Os) {
      Os.push(...t);
      return;
    }
    for (Os = t, tu = 0; tu < Os.length; tu++) {
      const n = Os[tu];
      n.flags & 4 && (n.flags &= -2), n.flags & 8 || n(), n.flags &= -2;
    }
    Os = null, tu = 0;
  }
}
const _f = (e) => e.id == null ? e.flags & 2 ? -1 : 1 / 0 : e.id;
function Bx(e) {
  try {
    for (ho = 0; ho < Rr.length; ho++) {
      const t = Rr[ho];
      t && !(t.flags & 8) && (t.flags & 4 && (t.flags &= -2), qf(
        t,
        t.i,
        t.i ? 15 : 14
      ), t.flags & 4 || (t.flags &= -2));
    }
  } finally {
    for (; ho < Rr.length; ho++) {
      const t = Rr[ho];
      t && (t.flags &= -2);
    }
    ho = -1, Rr.length = 0, Dx(), v_ = null, (Rr.length || fu.length) && Bx();
  }
}
let fr = null, Vx = null;
function p_(e) {
  const t = fr;
  return fr = e, Vx = e && e.type.__scopeId || null, t;
}
function E(e, t = fr, n) {
  if (!t || e._n)
    return e;
  const a = (...r) => {
    a._d && bS(-1);
    const i = p_(t);
    let o;
    try {
      o = e(...r);
    } finally {
      p_(i), a._d && bS(1);
    }
    return o;
  };
  return a._n = !0, a._c = !0, a._d = !0, a;
}
function sn(e, t) {
  if (fr === null)
    return e;
  const n = uv(fr), a = e.dirs || (e.dirs = []);
  for (let r = 0; r < t.length; r++) {
    let [i, o, l, s = $n] = t[r];
    i && (Yt(i) && (i = {
      mounted: i,
      updated: i
    }), i.deep && Go(o), a.push({
      dir: i,
      instance: n,
      value: o,
      oldValue: void 0,
      arg: l,
      modifiers: s
    }));
  }
  return e;
}
function Al(e, t, n, a) {
  const r = e.dirs, i = t && t.dirs;
  for (let o = 0; o < r.length; o++) {
    const l = r[o];
    i && (l.oldValue = i[o].value);
    let s = l.dir[a];
    s && (ts(), Yi(s, n, 8, [
      e.el,
      l,
      e,
      t
    ]), ns());
  }
}
const Mx = Symbol("_vte"), Lx = (e) => e.__isTeleport, af = (e) => e && (e.disabled || e.disabled === ""), sS = (e) => e && (e.defer || e.defer === ""), lS = (e) => typeof SVGElement < "u" && e instanceof SVGElement, cS = (e) => typeof MathMLElement == "function" && e instanceof MathMLElement, My = (e, t) => {
  const n = e && e.to;
  return da(n) ? t ? t(n) : null : n;
}, Rx = {
  name: "Teleport",
  __isTeleport: !0,
  process(e, t, n, a, r, i, o, l, s, d) {
    const {
      mc: u,
      pc: f,
      pbc: h,
      o: { insert: y, querySelector: p, createText: w, createComment: b }
    } = d, v = af(t.props);
    let { shapeFlag: g, children: k, dynamicChildren: A } = t;
    if (e == null) {
      const C = t.el = w(""), D = t.anchor = w("");
      y(C, n, a), y(D, n, a);
      const P = (I, x) => {
        g & 16 && (r && r.isCE && (r.ce._teleportTarget = I), u(
          k,
          I,
          x,
          r,
          i,
          o,
          l,
          s
        ));
      }, O = () => {
        const I = t.target = My(t.props, p), x = Nx(I, t, w, y);
        I && (o !== "svg" && lS(I) ? o = "svg" : o !== "mathml" && cS(I) && (o = "mathml"), v || (P(I, x), Jh(t, !1)));
      };
      v && (P(n, D), Jh(t, !0)), sS(t.props) ? (t.el.__isMounted = !1, Lr(() => {
        O(), delete t.el.__isMounted;
      }, i)) : O();
    } else {
      if (sS(t.props) && e.el.__isMounted === !1) {
        Lr(() => {
          Rx.process(
            e,
            t,
            n,
            a,
            r,
            i,
            o,
            l,
            s,
            d
          );
        }, i);
        return;
      }
      t.el = e.el, t.targetStart = e.targetStart;
      const C = t.anchor = e.anchor, D = t.target = e.target, P = t.targetAnchor = e.targetAnchor, O = af(e.props), I = O ? n : D, x = O ? C : P;
      if (o === "svg" || lS(D) ? o = "svg" : (o === "mathml" || cS(D)) && (o = "mathml"), A ? (h(
        e.dynamicChildren,
        A,
        I,
        r,
        i,
        o,
        l
      ), Iw(e, t, !0)) : s || f(
        e,
        t,
        I,
        x,
        r,
        i,
        o,
        l,
        !1
      ), v)
        O ? t.props && e.props && t.props.to !== e.props.to && (t.props.to = e.props.to) : Ah(
          t,
          n,
          C,
          d,
          1
        );
      else if ((t.props && t.props.to) !== (e.props && e.props.to)) {
        const M = t.target = My(
          t.props,
          p
        );
        M && Ah(
          t,
          M,
          null,
          d,
          0
        );
      } else O && Ah(
        t,
        D,
        P,
        d,
        1
      );
      Jh(t, v);
    }
  },
  remove(e, t, n, { um: a, o: { remove: r } }, i) {
    const {
      shapeFlag: o,
      children: l,
      anchor: s,
      targetStart: d,
      targetAnchor: u,
      target: f,
      props: h
    } = e;
    if (f && (r(d), r(u)), i && r(s), o & 16) {
      const y = i || !af(h);
      for (let p = 0; p < l.length; p++) {
        const w = l[p];
        a(
          w,
          t,
          n,
          y,
          !!w.dynamicChildren
        );
      }
    }
  },
  move: Ah,
  hydrate: JF
};
function Ah(e, t, n, { o: { insert: a }, m: r }, i = 2) {
  i === 0 && a(e.targetAnchor, t, n);
  const { el: o, anchor: l, shapeFlag: s, children: d, props: u } = e, f = i === 2;
  if (f && a(o, t, n), (!f || af(u)) && s & 16)
    for (let h = 0; h < d.length; h++)
      r(
        d[h],
        t,
        n,
        2
      );
  f && a(l, t, n);
}
function JF(e, t, n, a, r, i, {
  o: { nextSibling: o, parentNode: l, querySelector: s, insert: d, createText: u }
}, f) {
  const h = t.target = My(
    t.props,
    s
  );
  if (h) {
    const y = af(t.props), p = h._lpa || h.firstChild;
    if (t.shapeFlag & 16)
      if (y)
        t.anchor = f(
          o(e),
          t,
          l(e),
          n,
          a,
          r,
          i
        ), t.targetStart = p, t.targetAnchor = p && o(p);
      else {
        t.anchor = o(e);
        let w = p;
        for (; w; ) {
          if (w && w.nodeType === 8) {
            if (w.data === "teleport start anchor")
              t.targetStart = w;
            else if (w.data === "teleport anchor") {
              t.targetAnchor = w, h._lpa = t.targetAnchor && o(t.targetAnchor);
              break;
            }
          }
          w = o(w);
        }
        t.targetAnchor || Nx(h, t, u, d), f(
          p && o(p),
          t,
          h,
          n,
          a,
          r,
          i
        );
      }
    Jh(t, y);
  }
  return t.anchor && o(t.anchor);
}
const Fx = Rx;
function Jh(e, t) {
  const n = e.ctx;
  if (n && n.ut) {
    let a, r;
    for (t ? (a = e.el, r = e.anchor) : (a = e.targetStart, r = e.targetAnchor); a && a !== r; )
      a.nodeType === 1 && a.setAttribute("data-v-owner", n.uid), a = a.nextSibling;
    n.ut();
  }
}
function Nx(e, t, n, a) {
  const r = t.targetStart = n(""), i = t.targetAnchor = n("");
  return r[Mx] = i, e && (a(r, e), a(i, e)), i;
}
const Ds = Symbol("_leaveCb"), xh = Symbol("_enterCb");
function Ux() {
  const e = {
    isMounted: !1,
    isLeaving: !1,
    isUnmounting: !1,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  return an(() => {
    e.isMounted = !0;
  }), Ja(() => {
    e.isUnmounting = !0;
  }), e;
}
const Ii = [Function, Array], $x = {
  mode: String,
  appear: Boolean,
  persisted: Boolean,
  // enter
  onBeforeEnter: Ii,
  onEnter: Ii,
  onAfterEnter: Ii,
  onEnterCancelled: Ii,
  // leave
  onBeforeLeave: Ii,
  onLeave: Ii,
  onAfterLeave: Ii,
  onLeaveCancelled: Ii,
  // appear
  onBeforeAppear: Ii,
  onAppear: Ii,
  onAfterAppear: Ii,
  onAppearCancelled: Ii
}, qx = (e) => {
  const t = e.subTree;
  return t.component ? qx(t.component) : t;
}, XF = {
  name: "BaseTransition",
  props: $x,
  setup(e, { slots: t }) {
    const n = Io(), a = Ux();
    return () => {
      const r = t.default && bw(t.default(), !0);
      if (!r || !r.length)
        return;
      const i = Hx(r), o = Ot(e), { mode: l } = o;
      if (a.isLeaving)
        return Bg(i);
      const s = uS(i);
      if (!s)
        return Bg(i);
      let d = vf(
        s,
        o,
        a,
        n,
        // #11061, ensure enterHooks is fresh after clone
        (f) => d = f
      );
      s.type !== dr && Jl(s, d);
      let u = n.subTree && uS(n.subTree);
      if (u && u.type !== dr && !Bl(s, u) && qx(n).type !== dr) {
        let f = vf(
          u,
          o,
          a,
          n
        );
        if (Jl(u, f), l === "out-in" && s.type !== dr)
          return a.isLeaving = !0, f.afterLeave = () => {
            a.isLeaving = !1, n.job.flags & 8 || n.update(), delete f.afterLeave, u = void 0;
          }, Bg(i);
        l === "in-out" && s.type !== dr ? f.delayLeave = (h, y, p) => {
          const w = zx(
            a,
            u
          );
          w[String(u.key)] = u, h[Ds] = () => {
            y(), h[Ds] = void 0, delete d.delayedLeave, u = void 0;
          }, d.delayedLeave = () => {
            p(), delete d.delayedLeave, u = void 0;
          };
        } : u = void 0;
      } else u && (u = void 0);
      return i;
    };
  }
};
function Hx(e) {
  let t = e[0];
  if (e.length > 1) {
    for (const n of e)
      if (n.type !== dr) {
        t = n;
        break;
      }
  }
  return t;
}
const ZF = XF;
function zx(e, t) {
  const { leavingVNodes: n } = e;
  let a = n.get(t.type);
  return a || (a = /* @__PURE__ */ Object.create(null), n.set(t.type, a)), a;
}
function vf(e, t, n, a, r) {
  const {
    appear: i,
    mode: o,
    persisted: l = !1,
    onBeforeEnter: s,
    onEnter: d,
    onAfterEnter: u,
    onEnterCancelled: f,
    onBeforeLeave: h,
    onLeave: y,
    onAfterLeave: p,
    onLeaveCancelled: w,
    onBeforeAppear: b,
    onAppear: v,
    onAfterAppear: g,
    onAppearCancelled: k
  } = t, A = String(e.key), C = zx(n, e), D = (I, x) => {
    I && Yi(
      I,
      a,
      9,
      x
    );
  }, P = (I, x) => {
    const M = x[1];
    D(I, x), Rt(I) ? I.every((V) => V.length <= 1) && M() : I.length <= 1 && M();
  }, O = {
    mode: o,
    persisted: l,
    beforeEnter(I) {
      let x = s;
      if (!n.isMounted)
        if (i)
          x = b || s;
        else
          return;
      I[Ds] && I[Ds](
        !0
        /* cancelled */
      );
      const M = C[A];
      M && Bl(e, M) && M.el[Ds] && M.el[Ds](), D(x, [I]);
    },
    enter(I) {
      let x = d, M = u, V = f;
      if (!n.isMounted)
        if (i)
          x = v || d, M = g || u, V = k || f;
        else
          return;
      let B = !1;
      const F = I[xh] = (H) => {
        B || (B = !0, H ? D(V, [I]) : D(M, [I]), O.delayedLeave && O.delayedLeave(), I[xh] = void 0);
      };
      x ? P(x, [I, F]) : F();
    },
    leave(I, x) {
      const M = String(e.key);
      if (I[xh] && I[xh](
        !0
        /* cancelled */
      ), n.isUnmounting)
        return x();
      D(h, [I]);
      let V = !1;
      const B = I[Ds] = (F) => {
        V || (V = !0, x(), F ? D(w, [I]) : D(p, [I]), I[Ds] = void 0, C[M] === e && delete C[M]);
      };
      C[M] = e, y ? P(y, [I, B]) : B();
    },
    clone(I) {
      const x = vf(
        I,
        t,
        n,
        a,
        r
      );
      return r && r(x), x;
    }
  };
  return O;
}
function Bg(e) {
  if (sv(e))
    return e = as(e), e.children = null, e;
}
function uS(e) {
  if (!sv(e))
    return Lx(e.type) && e.children ? Hx(e.children) : e;
  if (e.component)
    return e.component.subTree;
  const { shapeFlag: t, children: n } = e;
  if (n) {
    if (t & 16)
      return n[0];
    if (t & 32 && Yt(n.default))
      return n.default();
  }
}
function Jl(e, t) {
  e.shapeFlag & 6 && e.component ? (e.transition = t, Jl(e.component.subTree, t)) : e.shapeFlag & 128 ? (e.ssContent.transition = t.clone(e.ssContent), e.ssFallback.transition = t.clone(e.ssFallback)) : e.transition = t;
}
function bw(e, t = !1, n) {
  let a = [], r = 0;
  for (let i = 0; i < e.length; i++) {
    let o = e[i];
    const l = n == null ? o.key : String(n) + String(o.key != null ? o.key : i);
    o.type === Ge ? (o.patchFlag & 128 && r++, a = a.concat(
      bw(o.children, t, l)
    )) : (t || o.type !== dr) && a.push(l != null ? as(o, { key: l }) : o);
  }
  if (r > 1)
    for (let i = 0; i < a.length; i++)
      a[i].patchFlag = -2;
  return a;
}
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function za(e, t) {
  return Yt(e) ? (
    // #8236: extend call and options.name access are considered side-effects
    // by Rollup, so we have to wrap it in a pure-annotated IIFE.
    Qa({ name: e.name }, t, { setup: e })
  ) : e;
}
function qr() {
  const e = Io();
  return e ? (e.appContext.config.idPrefix || "v") + "-" + e.ids[0] + e.ids[1]++ : "";
}
function Wx(e) {
  e.ids = [e.ids[0] + e.ids[2]++ + "-", 0, 0];
}
function rf(e, t, n, a, r = !1) {
  if (Rt(e)) {
    e.forEach(
      (p, w) => rf(
        p,
        t && (Rt(t) ? t[w] : t),
        n,
        a,
        r
      )
    );
    return;
  }
  if (mu(a) && !r) {
    a.shapeFlag & 512 && a.type.__asyncResolved && a.component.subTree.component && rf(e, t, n, a.component.subTree);
    return;
  }
  const i = a.shapeFlag & 4 ? uv(a.component) : a.el, o = r ? null : i, { i: l, r: s } = e, d = t && t.r, u = l.refs === $n ? l.refs = {} : l.refs, f = l.setupState, h = Ot(f), y = f === $n ? () => !1 : (p) => xn(h, p);
  if (d != null && d !== s && (da(d) ? (u[d] = null, y(d) && (f[d] = null)) : ga(d) && (d.value = null)), Yt(s))
    qf(s, l, 12, [o, u]);
  else {
    const p = da(s), w = ga(s);
    if (p || w) {
      const b = () => {
        if (e.f) {
          const v = p ? y(s) ? f[s] : u[s] : s.value;
          r ? Rt(v) && cw(v, i) : Rt(v) ? v.includes(i) || v.push(i) : p ? (u[s] = [i], y(s) && (f[s] = u[s])) : (s.value = [i], e.k && (u[e.k] = s.value));
        } else p ? (u[s] = o, y(s) && (f[s] = o)) : w && (s.value = o, e.k && (u[e.k] = o));
      };
      o ? (b.id = -1, Lr(b, n)) : b();
    }
  }
}
rv().requestIdleCallback;
rv().cancelIdleCallback;
const mu = (e) => !!e.type.__asyncLoader, sv = (e) => e.type.__isKeepAlive;
function Kx(e, t) {
  jx(e, "a", t);
}
function ww(e, t) {
  jx(e, "da", t);
}
function jx(e, t, n = kr) {
  const a = e.__wdc || (e.__wdc = () => {
    let r = n;
    for (; r; ) {
      if (r.isDeactivated)
        return;
      r = r.parent;
    }
    return e();
  });
  if (lv(t, a, n), n) {
    let r = n.parent;
    for (; r && r.parent; )
      sv(r.parent.vnode) && eN(a, t, n, r), r = r.parent;
  }
}
function eN(e, t, n, a) {
  const r = lv(
    t,
    e,
    a,
    !0
    /* prepend */
  );
  _i(() => {
    cw(a[t], r);
  }, n);
}
function lv(e, t, n = kr, a = !1) {
  if (n) {
    const r = n[e] || (n[e] = []), i = t.__weh || (t.__weh = (...o) => {
      ts();
      const l = zf(n), s = Yi(t, n, e, o);
      return l(), ns(), s;
    });
    return a ? r.unshift(i) : r.push(i), i;
  }
}
const cs = (e) => (t, n = kr) => {
  (!gf || e === "sp") && lv(e, (...a) => t(...a), n);
}, Wu = cs("bm"), an = cs("m"), kw = cs(
  "bu"
), Sw = cs("u"), Ja = cs(
  "bum"
), _i = cs("um"), tN = cs(
  "sp"
), nN = cs("rtg"), aN = cs("rtc");
function rN(e, t = kr) {
  lv("ec", e, t);
}
const Cw = "components", iN = "directives";
function J(e, t) {
  return Aw(Cw, e, !0, t) || e;
}
const Yx = Symbol.for("v-ndc");
function Ku(e) {
  return da(e) ? Aw(Cw, e, !1) || e : e || Yx;
}
function oN(e) {
  return Aw(iN, e);
}
function Aw(e, t, n = !0, a = !1) {
  const r = fr || kr;
  if (r) {
    const i = r.type;
    if (e === Cw) {
      const l = zN(
        i,
        !1
      );
      if (l && (l === t || l === Ur(t) || l === To(Ur(t))))
        return i;
    }
    const o = (
      // local registration
      // check instance[type] first which is resolved for options API
      dS(r[e] || i[e], t) || // global registration
      dS(r.appContext[e], t)
    );
    return !o && a ? i : o;
  }
}
function dS(e, t) {
  return e && (e[t] || e[Ur(t)] || e[To(Ur(t))]);
}
function ln(e, t, n, a) {
  let r;
  const i = n, o = Rt(e);
  if (o || da(e)) {
    const l = o && du(e);
    let s = !1, d = !1;
    l && (s = !Pi(e), d = Hs(e), e = iv(e)), r = new Array(e.length);
    for (let u = 0, f = e.length; u < f; u++)
      r[u] = t(
        s ? d ? m_(cr(e[u])) : cr(e[u]) : e[u],
        u,
        void 0,
        i
      );
  } else if (typeof e == "number") {
    r = new Array(e);
    for (let l = 0; l < e; l++)
      r[l] = t(l + 1, l, void 0, i);
  } else if (Wn(e))
    if (e[Symbol.iterator])
      r = Array.from(
        e,
        (l, s) => t(l, s, void 0, i)
      );
    else {
      const l = Object.keys(e);
      r = new Array(l.length);
      for (let s = 0, d = l.length; s < d; s++) {
        const u = l[s];
        r[s] = t(e[u], u, s, i);
      }
    }
  else
    r = [];
  return r;
}
function mr(e, t) {
  for (let n = 0; n < t.length; n++) {
    const a = t[n];
    if (Rt(a))
      for (let r = 0; r < a.length; r++)
        e[a[r].name] = a[r].fn;
    else a && (e[a.name] = a.key ? (...r) => {
      const i = a.fn(...r);
      return i && (i.key = a.key), i;
    } : a.fn);
  }
  return e;
}
function bt(e, t, n = {}, a, r) {
  if (fr.ce || fr.parent && mu(fr.parent) && fr.parent.ce)
    return t !== "default" && (n.name = t), te(), Le(
      Ge,
      null,
      [_("slot", n, a)],
      64
    );
  let i = e[t];
  i && i._c && (i._d = !1), te();
  const o = i && Gx(i(n)), l = n.key || // slot content array of a dynamic conditional slot may have a branch
  // key attached in the `createSlots` helper, respect that
  o && o.key, s = Le(
    Ge,
    {
      key: (l && !ls(l) ? l : `_${t}`) + // #7256 force differentiate fallback content from actual content
      (!o && a ? "_fb" : "")
    },
    o || [],
    o && e._ === 1 ? 64 : -2
  );
  return !r && s.scopeId && (s.slotScopeIds = [s.scopeId + "-s"]), i && i._c && (i._d = !0), s;
}
function Gx(e) {
  return e.some((t) => Su(t) ? !(t.type === dr || t.type === Ge && !Gx(t.children)) : !0) ? e : null;
}
const Ly = (e) => e ? hT(e) ? uv(e) : Ly(e.parent) : null, of = (
  // Move PURE marker to new line to workaround compiler discarding it
  // due to type annotation
  /* @__PURE__ */ Qa(/* @__PURE__ */ Object.create(null), {
    $: (e) => e,
    $el: (e) => e.vnode.el,
    $data: (e) => e.data,
    $props: (e) => e.props,
    $attrs: (e) => e.attrs,
    $slots: (e) => e.slots,
    $refs: (e) => e.refs,
    $parent: (e) => Ly(e.parent),
    $root: (e) => Ly(e.root),
    $host: (e) => e.ce,
    $emit: (e) => e.emit,
    $options: (e) => Xx(e),
    $forceUpdate: (e) => e.f || (e.f = () => {
      yw(e.update);
    }),
    $nextTick: (e) => e.n || (e.n = Dt.bind(e.proxy)),
    $watch: (e) => IN.bind(e)
  })
), Vg = (e, t) => e !== $n && !e.__isScriptSetup && xn(e, t), sN = {
  get({ _: e }, t) {
    if (t === "__v_skip")
      return !0;
    const { ctx: n, setupState: a, data: r, props: i, accessCache: o, type: l, appContext: s } = e;
    let d;
    if (t[0] !== "$") {
      const y = o[t];
      if (y !== void 0)
        switch (y) {
          case 1:
            return a[t];
          case 2:
            return r[t];
          case 4:
            return n[t];
          case 3:
            return i[t];
        }
      else {
        if (Vg(a, t))
          return o[t] = 1, a[t];
        if (r !== $n && xn(r, t))
          return o[t] = 2, r[t];
        if (
          // only cache other properties when instance has declared (thus stable)
          // props
          (d = e.propsOptions[0]) && xn(d, t)
        )
          return o[t] = 3, i[t];
        if (n !== $n && xn(n, t))
          return o[t] = 4, n[t];
        Ry && (o[t] = 0);
      }
    }
    const u = of[t];
    let f, h;
    if (u)
      return t === "$attrs" && wr(e.attrs, "get", ""), u(e);
    if (
      // css module (injected by vue-loader)
      (f = l.__cssModules) && (f = f[t])
    )
      return f;
    if (n !== $n && xn(n, t))
      return o[t] = 4, n[t];
    if (
      // global properties
      h = s.config.globalProperties, xn(h, t)
    )
      return h[t];
  },
  set({ _: e }, t, n) {
    const { data: a, setupState: r, ctx: i } = e;
    return Vg(r, t) ? (r[t] = n, !0) : a !== $n && xn(a, t) ? (a[t] = n, !0) : xn(e.props, t) || t[0] === "$" && t.slice(1) in e ? !1 : (i[t] = n, !0);
  },
  has({
    _: { data: e, setupState: t, accessCache: n, ctx: a, appContext: r, propsOptions: i }
  }, o) {
    let l;
    return !!n[o] || e !== $n && xn(e, o) || Vg(t, o) || (l = i[0]) && xn(l, o) || xn(a, o) || xn(of, o) || xn(r.config.globalProperties, o);
  },
  defineProperty(e, t, n) {
    return n.get != null ? e._.accessCache[t] = 0 : xn(n, "value") && this.set(e, t, n.value, null), Reflect.defineProperty(e, t, n);
  }
};
function uc() {
  return Qx().slots;
}
function lN() {
  return Qx().attrs;
}
function Qx(e) {
  const t = Io();
  return t.setupContext || (t.setupContext = vT(t));
}
function fS(e) {
  return Rt(e) ? e.reduce(
    (t, n) => (t[n] = null, t),
    {}
  ) : e;
}
let Ry = !0;
function cN(e) {
  const t = Xx(e), n = e.proxy, a = e.ctx;
  Ry = !1, t.beforeCreate && mS(t.beforeCreate, e, "bc");
  const {
    // state
    data: r,
    computed: i,
    methods: o,
    watch: l,
    provide: s,
    inject: d,
    // lifecycle
    created: u,
    beforeMount: f,
    mounted: h,
    beforeUpdate: y,
    updated: p,
    activated: w,
    deactivated: b,
    beforeDestroy: v,
    beforeUnmount: g,
    destroyed: k,
    unmounted: A,
    render: C,
    renderTracked: D,
    renderTriggered: P,
    errorCaptured: O,
    serverPrefetch: I,
    // public API
    expose: x,
    inheritAttrs: M,
    // assets
    components: V,
    directives: B,
    filters: F
  } = t;
  if (d && uN(d, a, null), o)
    for (const Z in o) {
      const ue = o[Z];
      Yt(ue) && (a[Z] = ue.bind(n));
    }
  if (r) {
    const Z = r.call(n, n);
    Wn(Z) && (e.data = Zn(Z));
  }
  if (Ry = !0, i)
    for (const Z in i) {
      const ue = i[Z], Y = Yt(ue) ? ue.bind(n, n) : Yt(ue.get) ? ue.get.bind(n, n) : bo, U = !Yt(ue) && Yt(ue.set) ? ue.set.bind(n) : bo, q = W({
        get: Y,
        set: U
      });
      Object.defineProperty(a, Z, {
        enumerable: !0,
        configurable: !0,
        get: () => q.value,
        set: (oe) => q.value = oe
      });
    }
  if (l)
    for (const Z in l)
      Jx(l[Z], a, n, Z);
  if (s) {
    const Z = Yt(s) ? s.call(n) : s;
    Reflect.ownKeys(Z).forEach((ue) => {
      Ln(ue, Z[ue]);
    });
  }
  u && mS(u, e, "c");
  function K(Z, ue) {
    Rt(ue) ? ue.forEach((Y) => Z(Y.bind(n))) : ue && Z(ue.bind(n));
  }
  if (K(Wu, f), K(an, h), K(kw, y), K(Sw, p), K(Kx, w), K(ww, b), K(rN, O), K(aN, D), K(nN, P), K(Ja, g), K(_i, A), K(tN, I), Rt(x))
    if (x.length) {
      const Z = e.exposed || (e.exposed = {});
      x.forEach((ue) => {
        Object.defineProperty(Z, ue, {
          get: () => n[ue],
          set: (Y) => n[ue] = Y,
          enumerable: !0
        });
      });
    } else e.exposed || (e.exposed = {});
  C && e.render === bo && (e.render = C), M != null && (e.inheritAttrs = M), V && (e.components = V), B && (e.directives = B), I && Wx(e);
}
function uN(e, t, n = bo) {
  Rt(e) && (e = Fy(e));
  for (const a in e) {
    const r = e[a];
    let i;
    Wn(r) ? "default" in r ? i = Gt(
      r.from || a,
      r.default,
      !0
    ) : i = Gt(r.from || a) : i = Gt(r), ga(i) ? Object.defineProperty(t, a, {
      enumerable: !0,
      configurable: !0,
      get: () => i.value,
      set: (o) => i.value = o
    }) : t[a] = i;
  }
}
function mS(e, t, n) {
  Yi(
    Rt(e) ? e.map((a) => a.bind(t.proxy)) : e.bind(t.proxy),
    t,
    n
  );
}
function Jx(e, t, n, a) {
  let r = a.includes(".") ? cT(n, a) : () => n[a];
  if (da(e)) {
    const i = t[e];
    Yt(i) && tt(r, i);
  } else if (Yt(e))
    tt(r, e.bind(n));
  else if (Wn(e))
    if (Rt(e))
      e.forEach((i) => Jx(i, t, n, a));
    else {
      const i = Yt(e.handler) ? e.handler.bind(n) : t[e.handler];
      Yt(i) && tt(r, i, e);
    }
}
function Xx(e) {
  const t = e.type, { mixins: n, extends: a } = t, {
    mixins: r,
    optionsCache: i,
    config: { optionMergeStrategies: o }
  } = e.appContext, l = i.get(t);
  let s;
  return l ? s = l : !r.length && !n && !a ? s = t : (s = {}, r.length && r.forEach(
    (d) => g_(s, d, o, !0)
  ), g_(s, t, o)), Wn(t) && i.set(t, s), s;
}
function g_(e, t, n, a = !1) {
  const { mixins: r, extends: i } = t;
  i && g_(e, i, n, !0), r && r.forEach(
    (o) => g_(e, o, n, !0)
  );
  for (const o in t)
    if (!(a && o === "expose")) {
      const l = dN[o] || n && n[o];
      e[o] = l ? l(e[o], t[o]) : t[o];
    }
  return e;
}
const dN = {
  data: hS,
  props: _S,
  emits: _S,
  // objects
  methods: Yd,
  computed: Yd,
  // lifecycle
  beforeCreate: Vr,
  created: Vr,
  beforeMount: Vr,
  mounted: Vr,
  beforeUpdate: Vr,
  updated: Vr,
  beforeDestroy: Vr,
  beforeUnmount: Vr,
  destroyed: Vr,
  unmounted: Vr,
  activated: Vr,
  deactivated: Vr,
  errorCaptured: Vr,
  serverPrefetch: Vr,
  // assets
  components: Yd,
  directives: Yd,
  // watch
  watch: mN,
  // provide / inject
  provide: hS,
  inject: fN
};
function hS(e, t) {
  return t ? e ? function() {
    return Qa(
      Yt(e) ? e.call(this, this) : e,
      Yt(t) ? t.call(this, this) : t
    );
  } : t : e;
}
function fN(e, t) {
  return Yd(Fy(e), Fy(t));
}
function Fy(e) {
  if (Rt(e)) {
    const t = {};
    for (let n = 0; n < e.length; n++)
      t[e[n]] = e[n];
    return t;
  }
  return e;
}
function Vr(e, t) {
  return e ? [...new Set([].concat(e, t))] : t;
}
function Yd(e, t) {
  return e ? Qa(/* @__PURE__ */ Object.create(null), e, t) : t;
}
function _S(e, t) {
  return e ? Rt(e) && Rt(t) ? [.../* @__PURE__ */ new Set([...e, ...t])] : Qa(
    /* @__PURE__ */ Object.create(null),
    fS(e),
    fS(t ?? {})
  ) : t;
}
function mN(e, t) {
  if (!e) return t;
  if (!t) return e;
  const n = Qa(/* @__PURE__ */ Object.create(null), e);
  for (const a in t)
    n[a] = Vr(e[a], t[a]);
  return n;
}
function Zx() {
  return {
    app: null,
    config: {
      isNativeTag: lF,
      performance: !1,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let hN = 0;
function _N(e, t) {
  return function(a, r = null) {
    Yt(a) || (a = Qa({}, a)), r != null && !Wn(r) && (r = null);
    const i = Zx(), o = /* @__PURE__ */ new WeakSet(), l = [];
    let s = !1;
    const d = i.app = {
      _uid: hN++,
      _component: a,
      _props: r,
      _container: null,
      _context: i,
      _instance: null,
      version: KN,
      get config() {
        return i.config;
      },
      set config(u) {
      },
      use(u, ...f) {
        return o.has(u) || (u && Yt(u.install) ? (o.add(u), u.install(d, ...f)) : Yt(u) && (o.add(u), u(d, ...f))), d;
      },
      mixin(u) {
        return i.mixins.includes(u) || i.mixins.push(u), d;
      },
      component(u, f) {
        return f ? (i.components[u] = f, d) : i.components[u];
      },
      directive(u, f) {
        return f ? (i.directives[u] = f, d) : i.directives[u];
      },
      mount(u, f, h) {
        if (!s) {
          const y = d._ceVNode || _(a, r);
          return y.appContext = i, h === !0 ? h = "svg" : h === !1 && (h = void 0), e(y, u, h), s = !0, d._container = u, u.__vue_app__ = d, uv(y.component);
        }
      },
      onUnmount(u) {
        l.push(u);
      },
      unmount() {
        s && (Yi(
          l,
          d._instance,
          16
        ), e(null, d._container), delete d._container.__vue_app__);
      },
      provide(u, f) {
        return i.provides[u] = f, d;
      },
      runWithContext(u) {
        const f = hu;
        hu = d;
        try {
          return u();
        } finally {
          hu = f;
        }
      }
    };
    return d;
  };
}
let hu = null;
function Ln(e, t) {
  if (kr) {
    let n = kr.provides;
    const a = kr.parent && kr.parent.provides;
    a === n && (n = kr.provides = Object.create(a)), n[e] = t;
  }
}
function Gt(e, t, n = !1) {
  const a = Io();
  if (a || hu) {
    let r = hu ? hu._context.provides : a ? a.parent == null || a.ce ? a.vnode.appContext && a.vnode.appContext.provides : a.parent.provides : void 0;
    if (r && e in r)
      return r[e];
    if (arguments.length > 1)
      return n && Yt(t) ? t.call(a && a.proxy) : t;
  }
}
const eT = {}, tT = () => Object.create(eT), nT = (e) => Object.getPrototypeOf(e) === eT;
function vN(e, t, n, a = !1) {
  const r = {}, i = tT();
  e.propsDefaults = /* @__PURE__ */ Object.create(null), aT(e, t, r, i);
  for (const o in e.propsOptions[0])
    o in r || (r[o] = void 0);
  n ? e.props = a ? r : NF(r) : e.type.props ? e.props = r : e.props = i, e.attrs = i;
}
function pN(e, t, n, a) {
  const {
    props: r,
    attrs: i,
    vnode: { patchFlag: o }
  } = e, l = Ot(r), [s] = e.propsOptions;
  let d = !1;
  if (
    // always force full diff in dev
    // - #1942 if hmr is enabled with sfc component
    // - vite#872 non-sfc component used by sfc component
    (a || o > 0) && !(o & 16)
  ) {
    if (o & 8) {
      const u = e.vnode.dynamicProps;
      for (let f = 0; f < u.length; f++) {
        let h = u[f];
        if (cv(e.emitsOptions, h))
          continue;
        const y = t[h];
        if (s)
          if (xn(i, h))
            y !== i[h] && (i[h] = y, d = !0);
          else {
            const p = Ur(h);
            r[p] = Ny(
              s,
              l,
              p,
              y,
              e,
              !1
            );
          }
        else
          y !== i[h] && (i[h] = y, d = !0);
      }
    }
  } else {
    aT(e, t, r, i) && (d = !0);
    let u;
    for (const f in l)
      (!t || // for camelCase
      !xn(t, f) && // it's possible the original props was passed in as kebab-case
      // and converted to camelCase (#955)
      ((u = tl(f)) === f || !xn(t, u))) && (s ? n && // for camelCase
      (n[f] !== void 0 || // for kebab-case
      n[u] !== void 0) && (r[f] = Ny(
        s,
        l,
        f,
        void 0,
        e,
        !0
      )) : delete r[f]);
    if (i !== l)
      for (const f in i)
        (!t || !xn(t, f)) && (delete i[f], d = !0);
  }
  d && Yo(e.attrs, "set", "");
}
function aT(e, t, n, a) {
  const [r, i] = e.propsOptions;
  let o = !1, l;
  if (t)
    for (let s in t) {
      if (ef(s))
        continue;
      const d = t[s];
      let u;
      r && xn(r, u = Ur(s)) ? !i || !i.includes(u) ? n[u] = d : (l || (l = {}))[u] = d : cv(e.emitsOptions, s) || (!(s in a) || d !== a[s]) && (a[s] = d, o = !0);
    }
  if (i) {
    const s = Ot(n), d = l || $n;
    for (let u = 0; u < i.length; u++) {
      const f = i[u];
      n[f] = Ny(
        r,
        s,
        f,
        d[f],
        e,
        !xn(d, f)
      );
    }
  }
  return o;
}
function Ny(e, t, n, a, r, i) {
  const o = e[n];
  if (o != null) {
    const l = xn(o, "default");
    if (l && a === void 0) {
      const s = o.default;
      if (o.type !== Function && !o.skipFactory && Yt(s)) {
        const { propsDefaults: d } = r;
        if (n in d)
          a = d[n];
        else {
          const u = zf(r);
          a = d[n] = s.call(
            null,
            t
          ), u();
        }
      } else
        a = s;
      r.ce && r.ce._setProp(n, a);
    }
    o[
      0
      /* shouldCast */
    ] && (i && !l ? a = !1 : o[
      1
      /* shouldCastTrue */
    ] && (a === "" || a === tl(n)) && (a = !0));
  }
  return a;
}
const gN = /* @__PURE__ */ new WeakMap();
function rT(e, t, n = !1) {
  const a = n ? gN : t.propsCache, r = a.get(e);
  if (r)
    return r;
  const i = e.props, o = {}, l = [];
  let s = !1;
  if (!Yt(e)) {
    const u = (f) => {
      s = !0;
      const [h, y] = rT(f, t, !0);
      Qa(o, h), y && l.push(...y);
    };
    !n && t.mixins.length && t.mixins.forEach(u), e.extends && u(e.extends), e.mixins && e.mixins.forEach(u);
  }
  if (!i && !s)
    return Wn(e) && a.set(e, cu), cu;
  if (Rt(i))
    for (let u = 0; u < i.length; u++) {
      const f = Ur(i[u]);
      vS(f) && (o[f] = $n);
    }
  else if (i)
    for (const u in i) {
      const f = Ur(u);
      if (vS(f)) {
        const h = i[u], y = o[f] = Rt(h) || Yt(h) ? { type: h } : Qa({}, h), p = y.type;
        let w = !1, b = !0;
        if (Rt(p))
          for (let v = 0; v < p.length; ++v) {
            const g = p[v], k = Yt(g) && g.name;
            if (k === "Boolean") {
              w = !0;
              break;
            } else k === "String" && (b = !1);
          }
        else
          w = Yt(p) && p.name === "Boolean";
        y[
          0
          /* shouldCast */
        ] = w, y[
          1
          /* shouldCastTrue */
        ] = b, (w || xn(y, "default")) && l.push(f);
      }
    }
  const d = [o, l];
  return Wn(e) && a.set(e, d), d;
}
function vS(e) {
  return e[0] !== "$" && !ef(e);
}
const xw = (e) => e === "_" || e === "__" || e === "_ctx" || e === "$stable", Tw = (e) => Rt(e) ? e.map(vo) : [vo(e)], yN = (e, t, n) => {
  if (t._n)
    return t;
  const a = E((...r) => Tw(t(...r)), n);
  return a._c = !1, a;
}, iT = (e, t, n) => {
  const a = e._ctx;
  for (const r in e) {
    if (xw(r)) continue;
    const i = e[r];
    if (Yt(i))
      t[r] = yN(r, i, a);
    else if (i != null) {
      const o = Tw(i);
      t[r] = () => o;
    }
  }
}, oT = (e, t) => {
  const n = Tw(t);
  e.slots.default = () => n;
}, sT = (e, t, n) => {
  for (const a in t)
    (n || !xw(a)) && (e[a] = t[a]);
}, bN = (e, t, n) => {
  const a = e.slots = tT();
  if (e.vnode.shapeFlag & 32) {
    const r = t.__;
    r && Py(a, "__", r, !0);
    const i = t._;
    i ? (sT(a, t, n), n && Py(a, "_", i, !0)) : iT(t, a);
  } else t && oT(e, t);
}, wN = (e, t, n) => {
  const { vnode: a, slots: r } = e;
  let i = !0, o = $n;
  if (a.shapeFlag & 32) {
    const l = t._;
    l ? n && l === 1 ? i = !1 : sT(r, t, n) : (i = !t.$stable, iT(t, r)), o = t;
  } else t && (oT(e, t), o = { default: 1 });
  if (i)
    for (const l in r)
      !xw(l) && o[l] == null && delete r[l];
}, Lr = MN;
function kN(e) {
  return SN(e);
}
function SN(e, t) {
  const n = rv();
  n.__VUE__ = !0;
  const {
    insert: a,
    remove: r,
    patchProp: i,
    createElement: o,
    createText: l,
    createComment: s,
    setText: d,
    setElementText: u,
    parentNode: f,
    nextSibling: h,
    setScopeId: y = bo,
    insertStaticContent: p
  } = e, w = (ne, Q, le, G = null, Ce = null, Ie = null, ie = void 0, we = null, Ee = !!Q.dynamicChildren) => {
    if (ne === Q)
      return;
    ne && !Bl(ne, Q) && (G = z(ne), oe(ne, Ce, Ie, !0), ne = null), Q.patchFlag === -2 && (Ee = !1, Q.dynamicChildren = null);
    const { type: Pe, ref: Xe, shapeFlag: _e } = Q;
    switch (Pe) {
      case Hf:
        b(ne, Q, le, G);
        break;
      case dr:
        v(ne, Q, le, G);
        break;
      case Lg:
        ne == null && g(Q, le, G, ie);
        break;
      case Ge:
        V(
          ne,
          Q,
          le,
          G,
          Ce,
          Ie,
          ie,
          we,
          Ee
        );
        break;
      default:
        _e & 1 ? C(
          ne,
          Q,
          le,
          G,
          Ce,
          Ie,
          ie,
          we,
          Ee
        ) : _e & 6 ? B(
          ne,
          Q,
          le,
          G,
          Ce,
          Ie,
          ie,
          we,
          Ee
        ) : (_e & 64 || _e & 128) && Pe.process(
          ne,
          Q,
          le,
          G,
          Ce,
          Ie,
          ie,
          we,
          Ee,
          Ne
        );
    }
    Xe != null && Ce ? rf(Xe, ne && ne.ref, Ie, Q || ne, !Q) : Xe == null && ne && ne.ref != null && rf(ne.ref, null, Ie, ne, !0);
  }, b = (ne, Q, le, G) => {
    if (ne == null)
      a(
        Q.el = l(Q.children),
        le,
        G
      );
    else {
      const Ce = Q.el = ne.el;
      Q.children !== ne.children && d(Ce, Q.children);
    }
  }, v = (ne, Q, le, G) => {
    ne == null ? a(
      Q.el = s(Q.children || ""),
      le,
      G
    ) : Q.el = ne.el;
  }, g = (ne, Q, le, G) => {
    [ne.el, ne.anchor] = p(
      ne.children,
      Q,
      le,
      G,
      ne.el,
      ne.anchor
    );
  }, k = ({ el: ne, anchor: Q }, le, G) => {
    let Ce;
    for (; ne && ne !== Q; )
      Ce = h(ne), a(ne, le, G), ne = Ce;
    a(Q, le, G);
  }, A = ({ el: ne, anchor: Q }) => {
    let le;
    for (; ne && ne !== Q; )
      le = h(ne), r(ne), ne = le;
    r(Q);
  }, C = (ne, Q, le, G, Ce, Ie, ie, we, Ee) => {
    Q.type === "svg" ? ie = "svg" : Q.type === "math" && (ie = "mathml"), ne == null ? D(
      Q,
      le,
      G,
      Ce,
      Ie,
      ie,
      we,
      Ee
    ) : I(
      ne,
      Q,
      Ce,
      Ie,
      ie,
      we,
      Ee
    );
  }, D = (ne, Q, le, G, Ce, Ie, ie, we) => {
    let Ee, Pe;
    const { props: Xe, shapeFlag: _e, transition: qe, dirs: Ze } = ne;
    if (Ee = ne.el = o(
      ne.type,
      Ie,
      Xe && Xe.is,
      Xe
    ), _e & 8 ? u(Ee, ne.children) : _e & 16 && O(
      ne.children,
      Ee,
      null,
      G,
      Ce,
      Mg(ne, Ie),
      ie,
      we
    ), Ze && Al(ne, null, G, "created"), P(Ee, ne, ne.scopeId, ie, G), Xe) {
      for (const It in Xe)
        It !== "value" && !ef(It) && i(Ee, It, null, Xe[It], Ie, G);
      "value" in Xe && i(Ee, "value", null, Xe.value, Ie), (Pe = Xe.onVnodeBeforeMount) && uo(Pe, G, ne);
    }
    Ze && Al(ne, null, G, "beforeMount");
    const _t = CN(Ce, qe);
    _t && qe.beforeEnter(Ee), a(Ee, Q, le), ((Pe = Xe && Xe.onVnodeMounted) || _t || Ze) && Lr(() => {
      Pe && uo(Pe, G, ne), _t && qe.enter(Ee), Ze && Al(ne, null, G, "mounted");
    }, Ce);
  }, P = (ne, Q, le, G, Ce) => {
    if (le && y(ne, le), G)
      for (let Ie = 0; Ie < G.length; Ie++)
        y(ne, G[Ie]);
    if (Ce) {
      let Ie = Ce.subTree;
      if (Q === Ie || dT(Ie.type) && (Ie.ssContent === Q || Ie.ssFallback === Q)) {
        const ie = Ce.vnode;
        P(
          ne,
          ie,
          ie.scopeId,
          ie.slotScopeIds,
          Ce.parent
        );
      }
    }
  }, O = (ne, Q, le, G, Ce, Ie, ie, we, Ee = 0) => {
    for (let Pe = Ee; Pe < ne.length; Pe++) {
      const Xe = ne[Pe] = we ? Bs(ne[Pe]) : vo(ne[Pe]);
      w(
        null,
        Xe,
        Q,
        le,
        G,
        Ce,
        Ie,
        ie,
        we
      );
    }
  }, I = (ne, Q, le, G, Ce, Ie, ie) => {
    const we = Q.el = ne.el;
    let { patchFlag: Ee, dynamicChildren: Pe, dirs: Xe } = Q;
    Ee |= ne.patchFlag & 16;
    const _e = ne.props || $n, qe = Q.props || $n;
    let Ze;
    if (le && xl(le, !1), (Ze = qe.onVnodeBeforeUpdate) && uo(Ze, le, Q, ne), Xe && Al(Q, ne, le, "beforeUpdate"), le && xl(le, !0), (_e.innerHTML && qe.innerHTML == null || _e.textContent && qe.textContent == null) && u(we, ""), Pe ? x(
      ne.dynamicChildren,
      Pe,
      we,
      le,
      G,
      Mg(Q, Ce),
      Ie
    ) : ie || ue(
      ne,
      Q,
      we,
      null,
      le,
      G,
      Mg(Q, Ce),
      Ie,
      !1
    ), Ee > 0) {
      if (Ee & 16)
        M(we, _e, qe, le, Ce);
      else if (Ee & 2 && _e.class !== qe.class && i(we, "class", null, qe.class, Ce), Ee & 4 && i(we, "style", _e.style, qe.style, Ce), Ee & 8) {
        const _t = Q.dynamicProps;
        for (let It = 0; It < _t.length; It++) {
          const it = _t[It], Bt = _e[it], tn = qe[it];
          (tn !== Bt || it === "value") && i(we, it, Bt, tn, Ce, le);
        }
      }
      Ee & 1 && ne.children !== Q.children && u(we, Q.children);
    } else !ie && Pe == null && M(we, _e, qe, le, Ce);
    ((Ze = qe.onVnodeUpdated) || Xe) && Lr(() => {
      Ze && uo(Ze, le, Q, ne), Xe && Al(Q, ne, le, "updated");
    }, G);
  }, x = (ne, Q, le, G, Ce, Ie, ie) => {
    for (let we = 0; we < Q.length; we++) {
      const Ee = ne[we], Pe = Q[we], Xe = (
        // oldVNode may be an errored async setup() component inside Suspense
        // which will not have a mounted element
        Ee.el && // - In the case of a Fragment, we need to provide the actual parent
        // of the Fragment itself so it can move its children.
        (Ee.type === Ge || // - In the case of different nodes, there is going to be a replacement
        // which also requires the correct parent container
        !Bl(Ee, Pe) || // - In the case of a component, it could contain anything.
        Ee.shapeFlag & 198) ? f(Ee.el) : (
          // In other cases, the parent container is not actually used so we
          // just pass the block element here to avoid a DOM parentNode call.
          le
        )
      );
      w(
        Ee,
        Pe,
        Xe,
        null,
        G,
        Ce,
        Ie,
        ie,
        !0
      );
    }
  }, M = (ne, Q, le, G, Ce) => {
    if (Q !== le) {
      if (Q !== $n)
        for (const Ie in Q)
          !ef(Ie) && !(Ie in le) && i(
            ne,
            Ie,
            Q[Ie],
            null,
            Ce,
            G
          );
      for (const Ie in le) {
        if (ef(Ie)) continue;
        const ie = le[Ie], we = Q[Ie];
        ie !== we && Ie !== "value" && i(ne, Ie, we, ie, Ce, G);
      }
      "value" in le && i(ne, "value", Q.value, le.value, Ce);
    }
  }, V = (ne, Q, le, G, Ce, Ie, ie, we, Ee) => {
    const Pe = Q.el = ne ? ne.el : l(""), Xe = Q.anchor = ne ? ne.anchor : l("");
    let { patchFlag: _e, dynamicChildren: qe, slotScopeIds: Ze } = Q;
    Ze && (we = we ? we.concat(Ze) : Ze), ne == null ? (a(Pe, le, G), a(Xe, le, G), O(
      // #10007
      // such fragment like `<></>` will be compiled into
      // a fragment which doesn't have a children.
      // In this case fallback to an empty array
      Q.children || [],
      le,
      Xe,
      Ce,
      Ie,
      ie,
      we,
      Ee
    )) : _e > 0 && _e & 64 && qe && // #2715 the previous fragment could've been a BAILed one as a result
    // of renderSlot() with no valid children
    ne.dynamicChildren ? (x(
      ne.dynamicChildren,
      qe,
      le,
      Ce,
      Ie,
      ie,
      we
    ), // #2080 if the stable fragment has a key, it's a <template v-for> that may
    //  get moved around. Make sure all root level vnodes inherit el.
    // #2134 or if it's a component root, it may also get moved around
    // as the component is being moved.
    (Q.key != null || Ce && Q === Ce.subTree) && Iw(
      ne,
      Q,
      !0
      /* shallow */
    )) : ue(
      ne,
      Q,
      le,
      Xe,
      Ce,
      Ie,
      ie,
      we,
      Ee
    );
  }, B = (ne, Q, le, G, Ce, Ie, ie, we, Ee) => {
    Q.slotScopeIds = we, ne == null ? Q.shapeFlag & 512 ? Ce.ctx.activate(
      Q,
      le,
      G,
      ie,
      Ee
    ) : F(
      Q,
      le,
      G,
      Ce,
      Ie,
      ie,
      Ee
    ) : H(ne, Q, Ee);
  }, F = (ne, Q, le, G, Ce, Ie, ie) => {
    const we = ne.component = UN(
      ne,
      G,
      Ce
    );
    if (sv(ne) && (we.ctx.renderer = Ne), $N(we, !1, ie), we.asyncDep) {
      if (Ce && Ce.registerDep(we, K, ie), !ne.el) {
        const Ee = we.subTree = _(dr);
        v(null, Ee, Q, le), ne.placeholder = Ee.el;
      }
    } else
      K(
        we,
        ne,
        Q,
        le,
        Ce,
        Ie,
        ie
      );
  }, H = (ne, Q, le) => {
    const G = Q.component = ne.component;
    if (BN(ne, Q, le))
      if (G.asyncDep && !G.asyncResolved) {
        Z(G, Q, le);
        return;
      } else
        G.next = Q, G.update();
    else
      Q.el = ne.el, G.vnode = Q;
  }, K = (ne, Q, le, G, Ce, Ie, ie) => {
    const we = () => {
      if (ne.isMounted) {
        let { next: _e, bu: qe, u: Ze, parent: _t, vnode: It } = ne;
        {
          const oa = lT(ne);
          if (oa) {
            _e && (_e.el = It.el, Z(ne, _e, ie)), oa.asyncDep.then(() => {
              ne.isUnmounted || we();
            });
            return;
          }
        }
        let it = _e, Bt;
        xl(ne, !1), _e ? (_e.el = It.el, Z(ne, _e, ie)) : _e = It, qe && Qh(qe), (Bt = _e.props && _e.props.onVnodeBeforeUpdate) && uo(Bt, _t, _e, It), xl(ne, !0);
        const tn = gS(ne), Kn = ne.subTree;
        ne.subTree = tn, w(
          Kn,
          tn,
          // parent may have changed if it's in a teleport
          f(Kn.el),
          // anchor may have changed if it's in a fragment
          z(Kn),
          ne,
          Ce,
          Ie
        ), _e.el = tn.el, it === null && VN(ne, tn.el), Ze && Lr(Ze, Ce), (Bt = _e.props && _e.props.onVnodeUpdated) && Lr(
          () => uo(Bt, _t, _e, It),
          Ce
        );
      } else {
        let _e;
        const { el: qe, props: Ze } = Q, { bm: _t, m: It, parent: it, root: Bt, type: tn } = ne, Kn = mu(Q);
        xl(ne, !1), _t && Qh(_t), !Kn && (_e = Ze && Ze.onVnodeBeforeMount) && uo(_e, it, Q), xl(ne, !0);
        {
          Bt.ce && // @ts-expect-error _def is private
          Bt.ce._def.shadowRoot !== !1 && Bt.ce._injectChildStyle(tn);
          const oa = ne.subTree = gS(ne);
          w(
            null,
            oa,
            le,
            G,
            ne,
            Ce,
            Ie
          ), Q.el = oa.el;
        }
        if (It && Lr(It, Ce), !Kn && (_e = Ze && Ze.onVnodeMounted)) {
          const oa = Q;
          Lr(
            () => uo(_e, it, oa),
            Ce
          );
        }
        (Q.shapeFlag & 256 || it && mu(it.vnode) && it.vnode.shapeFlag & 256) && ne.a && Lr(ne.a, Ce), ne.isMounted = !0, Q = le = G = null;
      }
    };
    ne.scope.on();
    const Ee = ne.effect = new fx(we);
    ne.scope.off();
    const Pe = ne.update = Ee.run.bind(Ee), Xe = ne.job = Ee.runIfDirty.bind(Ee);
    Xe.i = ne, Xe.id = ne.uid, Ee.scheduler = () => yw(Xe), xl(ne, !0), Pe();
  }, Z = (ne, Q, le) => {
    Q.component = ne;
    const G = ne.vnode.props;
    ne.vnode = Q, ne.next = null, pN(ne, Q.props, G, le), wN(ne, Q.children, le), ts(), oS(ne), ns();
  }, ue = (ne, Q, le, G, Ce, Ie, ie, we, Ee = !1) => {
    const Pe = ne && ne.children, Xe = ne ? ne.shapeFlag : 0, _e = Q.children, { patchFlag: qe, shapeFlag: Ze } = Q;
    if (qe > 0) {
      if (qe & 128) {
        U(
          Pe,
          _e,
          le,
          G,
          Ce,
          Ie,
          ie,
          we,
          Ee
        );
        return;
      } else if (qe & 256) {
        Y(
          Pe,
          _e,
          le,
          G,
          Ce,
          Ie,
          ie,
          we,
          Ee
        );
        return;
      }
    }
    Ze & 8 ? (Xe & 16 && pe(Pe, Ce, Ie), _e !== Pe && u(le, _e)) : Xe & 16 ? Ze & 16 ? U(
      Pe,
      _e,
      le,
      G,
      Ce,
      Ie,
      ie,
      we,
      Ee
    ) : pe(Pe, Ce, Ie, !0) : (Xe & 8 && u(le, ""), Ze & 16 && O(
      _e,
      le,
      G,
      Ce,
      Ie,
      ie,
      we,
      Ee
    ));
  }, Y = (ne, Q, le, G, Ce, Ie, ie, we, Ee) => {
    ne = ne || cu, Q = Q || cu;
    const Pe = ne.length, Xe = Q.length, _e = Math.min(Pe, Xe);
    let qe;
    for (qe = 0; qe < _e; qe++) {
      const Ze = Q[qe] = Ee ? Bs(Q[qe]) : vo(Q[qe]);
      w(
        ne[qe],
        Ze,
        le,
        null,
        Ce,
        Ie,
        ie,
        we,
        Ee
      );
    }
    Pe > Xe ? pe(
      ne,
      Ce,
      Ie,
      !0,
      !1,
      _e
    ) : O(
      Q,
      le,
      G,
      Ce,
      Ie,
      ie,
      we,
      Ee,
      _e
    );
  }, U = (ne, Q, le, G, Ce, Ie, ie, we, Ee) => {
    let Pe = 0;
    const Xe = Q.length;
    let _e = ne.length - 1, qe = Xe - 1;
    for (; Pe <= _e && Pe <= qe; ) {
      const Ze = ne[Pe], _t = Q[Pe] = Ee ? Bs(Q[Pe]) : vo(Q[Pe]);
      if (Bl(Ze, _t))
        w(
          Ze,
          _t,
          le,
          null,
          Ce,
          Ie,
          ie,
          we,
          Ee
        );
      else
        break;
      Pe++;
    }
    for (; Pe <= _e && Pe <= qe; ) {
      const Ze = ne[_e], _t = Q[qe] = Ee ? Bs(Q[qe]) : vo(Q[qe]);
      if (Bl(Ze, _t))
        w(
          Ze,
          _t,
          le,
          null,
          Ce,
          Ie,
          ie,
          we,
          Ee
        );
      else
        break;
      _e--, qe--;
    }
    if (Pe > _e) {
      if (Pe <= qe) {
        const Ze = qe + 1, _t = Ze < Xe ? Q[Ze].el : G;
        for (; Pe <= qe; )
          w(
            null,
            Q[Pe] = Ee ? Bs(Q[Pe]) : vo(Q[Pe]),
            le,
            _t,
            Ce,
            Ie,
            ie,
            we,
            Ee
          ), Pe++;
      }
    } else if (Pe > qe)
      for (; Pe <= _e; )
        oe(ne[Pe], Ce, Ie, !0), Pe++;
    else {
      const Ze = Pe, _t = Pe, It = /* @__PURE__ */ new Map();
      for (Pe = _t; Pe <= qe; Pe++) {
        const jn = Q[Pe] = Ee ? Bs(Q[Pe]) : vo(Q[Pe]);
        jn.key != null && It.set(jn.key, Pe);
      }
      let it, Bt = 0;
      const tn = qe - _t + 1;
      let Kn = !1, oa = 0;
      const $a = new Array(tn);
      for (Pe = 0; Pe < tn; Pe++) $a[Pe] = 0;
      for (Pe = Ze; Pe <= _e; Pe++) {
        const jn = ne[Pe];
        if (Bt >= tn) {
          oe(jn, Ce, Ie, !0);
          continue;
        }
        let Rn;
        if (jn.key != null)
          Rn = It.get(jn.key);
        else
          for (it = _t; it <= qe; it++)
            if ($a[it - _t] === 0 && Bl(jn, Q[it])) {
              Rn = it;
              break;
            }
        Rn === void 0 ? oe(jn, Ce, Ie, !0) : ($a[Rn - _t] = Pe + 1, Rn >= oa ? oa = Rn : Kn = !0, w(
          jn,
          Q[Rn],
          le,
          null,
          Ce,
          Ie,
          ie,
          we,
          Ee
        ), Bt++);
      }
      const ba = Kn ? AN($a) : cu;
      for (it = ba.length - 1, Pe = tn - 1; Pe >= 0; Pe--) {
        const jn = _t + Pe, Rn = Q[jn], er = Q[jn + 1], Te = jn + 1 < Xe ? (
          // #13559, fallback to el placeholder for unresolved async component
          er.el || er.placeholder
        ) : G;
        $a[Pe] === 0 ? w(
          null,
          Rn,
          le,
          Te,
          Ce,
          Ie,
          ie,
          we,
          Ee
        ) : Kn && (it < 0 || Pe !== ba[it] ? q(Rn, le, Te, 2) : it--);
      }
    }
  }, q = (ne, Q, le, G, Ce = null) => {
    const { el: Ie, type: ie, transition: we, children: Ee, shapeFlag: Pe } = ne;
    if (Pe & 6) {
      q(ne.component.subTree, Q, le, G);
      return;
    }
    if (Pe & 128) {
      ne.suspense.move(Q, le, G);
      return;
    }
    if (Pe & 64) {
      ie.move(ne, Q, le, Ne);
      return;
    }
    if (ie === Ge) {
      a(Ie, Q, le);
      for (let _e = 0; _e < Ee.length; _e++)
        q(Ee[_e], Q, le, G);
      a(ne.anchor, Q, le);
      return;
    }
    if (ie === Lg) {
      k(ne, Q, le);
      return;
    }
    if (G !== 2 && Pe & 1 && we)
      if (G === 0)
        we.beforeEnter(Ie), a(Ie, Q, le), Lr(() => we.enter(Ie), Ce);
      else {
        const { leave: _e, delayLeave: qe, afterLeave: Ze } = we, _t = () => {
          ne.ctx.isUnmounted ? r(Ie) : a(Ie, Q, le);
        }, It = () => {
          _e(Ie, () => {
            _t(), Ze && Ze();
          });
        };
        qe ? qe(Ie, _t, It) : It();
      }
    else
      a(Ie, Q, le);
  }, oe = (ne, Q, le, G = !1, Ce = !1) => {
    const {
      type: Ie,
      props: ie,
      ref: we,
      children: Ee,
      dynamicChildren: Pe,
      shapeFlag: Xe,
      patchFlag: _e,
      dirs: qe,
      cacheIndex: Ze
    } = ne;
    if (_e === -2 && (Ce = !1), we != null && (ts(), rf(we, null, le, ne, !0), ns()), Ze != null && (Q.renderCache[Ze] = void 0), Xe & 256) {
      Q.ctx.deactivate(ne);
      return;
    }
    const _t = Xe & 1 && qe, It = !mu(ne);
    let it;
    if (It && (it = ie && ie.onVnodeBeforeUnmount) && uo(it, Q, ne), Xe & 6)
      ve(ne.component, le, G);
    else {
      if (Xe & 128) {
        ne.suspense.unmount(le, G);
        return;
      }
      _t && Al(ne, null, Q, "beforeUnmount"), Xe & 64 ? ne.type.remove(
        ne,
        Q,
        le,
        Ne,
        G
      ) : Pe && // #5154
      // when v-once is used inside a block, setBlockTracking(-1) marks the
      // parent block with hasOnce: true
      // so that it doesn't take the fast path during unmount - otherwise
      // components nested in v-once are never unmounted.
      !Pe.hasOnce && // #1153: fast path should not be taken for non-stable (v-for) fragments
      (Ie !== Ge || _e > 0 && _e & 64) ? pe(
        Pe,
        Q,
        le,
        !1,
        !0
      ) : (Ie === Ge && _e & 384 || !Ce && Xe & 16) && pe(Ee, Q, le), G && ee(ne);
    }
    (It && (it = ie && ie.onVnodeUnmounted) || _t) && Lr(() => {
      it && uo(it, Q, ne), _t && Al(ne, null, Q, "unmounted");
    }, le);
  }, ee = (ne) => {
    const { type: Q, el: le, anchor: G, transition: Ce } = ne;
    if (Q === Ge) {
      he(le, G);
      return;
    }
    if (Q === Lg) {
      A(ne);
      return;
    }
    const Ie = () => {
      r(le), Ce && !Ce.persisted && Ce.afterLeave && Ce.afterLeave();
    };
    if (ne.shapeFlag & 1 && Ce && !Ce.persisted) {
      const { leave: ie, delayLeave: we } = Ce, Ee = () => ie(le, Ie);
      we ? we(ne.el, Ie, Ee) : Ee();
    } else
      Ie();
  }, he = (ne, Q) => {
    let le;
    for (; ne !== Q; )
      le = h(ne), r(ne), ne = le;
    r(Q);
  }, ve = (ne, Q, le) => {
    const {
      bum: G,
      scope: Ce,
      job: Ie,
      subTree: ie,
      um: we,
      m: Ee,
      a: Pe,
      parent: Xe,
      slots: { __: _e }
    } = ne;
    pS(Ee), pS(Pe), G && Qh(G), Xe && Rt(_e) && _e.forEach((qe) => {
      Xe.renderCache[qe] = void 0;
    }), Ce.stop(), Ie && (Ie.flags |= 8, oe(ie, ne, Q, le)), we && Lr(we, Q), Lr(() => {
      ne.isUnmounted = !0;
    }, Q), Q && Q.pendingBranch && !Q.isUnmounted && ne.asyncDep && !ne.asyncResolved && ne.suspenseId === Q.pendingId && (Q.deps--, Q.deps === 0 && Q.resolve());
  }, pe = (ne, Q, le, G = !1, Ce = !1, Ie = 0) => {
    for (let ie = Ie; ie < ne.length; ie++)
      oe(ne[ie], Q, le, G, Ce);
  }, z = (ne) => {
    if (ne.shapeFlag & 6)
      return z(ne.component.subTree);
    if (ne.shapeFlag & 128)
      return ne.suspense.next();
    const Q = h(ne.anchor || ne.el), le = Q && Q[Mx];
    return le ? h(le) : Q;
  };
  let ge = !1;
  const Ve = (ne, Q, le) => {
    ne == null ? Q._vnode && oe(Q._vnode, null, null, !0) : w(
      Q._vnode || null,
      ne,
      Q,
      null,
      null,
      null,
      le
    ), Q._vnode = ne, ge || (ge = !0, oS(), Dx(), ge = !1);
  }, Ne = {
    p: w,
    um: oe,
    m: q,
    r: ee,
    mt: F,
    mc: O,
    pc: ue,
    pbc: x,
    n: z,
    o: e
  };
  return {
    render: Ve,
    hydrate: void 0,
    createApp: _N(Ve)
  };
}
function Mg({ type: e, props: t }, n) {
  return n === "svg" && e === "foreignObject" || n === "mathml" && e === "annotation-xml" && t && t.encoding && t.encoding.includes("html") ? void 0 : n;
}
function xl({ effect: e, job: t }, n) {
  n ? (e.flags |= 32, t.flags |= 4) : (e.flags &= -33, t.flags &= -5);
}
function CN(e, t) {
  return (!e || e && !e.pendingBranch) && t && !t.persisted;
}
function Iw(e, t, n = !1) {
  const a = e.children, r = t.children;
  if (Rt(a) && Rt(r))
    for (let i = 0; i < a.length; i++) {
      const o = a[i];
      let l = r[i];
      l.shapeFlag & 1 && !l.dynamicChildren && ((l.patchFlag <= 0 || l.patchFlag === 32) && (l = r[i] = Bs(r[i]), l.el = o.el), !n && l.patchFlag !== -2 && Iw(o, l)), l.type === Hf && (l.el = o.el), l.type === dr && !l.el && (l.el = o.el);
    }
}
function AN(e) {
  const t = e.slice(), n = [0];
  let a, r, i, o, l;
  const s = e.length;
  for (a = 0; a < s; a++) {
    const d = e[a];
    if (d !== 0) {
      if (r = n[n.length - 1], e[r] < d) {
        t[a] = r, n.push(a);
        continue;
      }
      for (i = 0, o = n.length - 1; i < o; )
        l = i + o >> 1, e[n[l]] < d ? i = l + 1 : o = l;
      d < e[n[i]] && (i > 0 && (t[a] = n[i - 1]), n[i] = a);
    }
  }
  for (i = n.length, o = n[i - 1]; i-- > 0; )
    n[i] = o, o = t[o];
  return n;
}
function lT(e) {
  const t = e.subTree.component;
  if (t)
    return t.asyncDep && !t.asyncResolved ? t : lT(t);
}
function pS(e) {
  if (e)
    for (let t = 0; t < e.length; t++)
      e[t].flags |= 8;
}
const xN = Symbol.for("v-scx"), TN = () => Gt(xN);
function na(e, t) {
  return Ew(e, null, t);
}
function tt(e, t, n) {
  return Ew(e, t, n);
}
function Ew(e, t, n = $n) {
  const { immediate: a, deep: r, flush: i, once: o } = n, l = Qa({}, n), s = t && a || !t && i !== "post";
  let d;
  if (gf) {
    if (i === "sync") {
      const y = TN();
      d = y.__watcherHandles || (y.__watcherHandles = []);
    } else if (!s) {
      const y = () => {
      };
      return y.stop = bo, y.resume = bo, y.pause = bo, y;
    }
  }
  const u = kr;
  l.call = (y, p, w) => Yi(y, u, p, w);
  let f = !1;
  i === "post" ? l.scheduler = (y) => {
    Lr(y, u && u.suspense);
  } : i !== "sync" && (f = !0, l.scheduler = (y, p) => {
    p ? y() : yw(y);
  }), l.augmentJob = (y) => {
    t && (y.flags |= 4), f && (y.flags |= 2, u && (y.id = u.uid, y.i = u));
  };
  const h = jF(e, t, l);
  return gf && (d ? d.push(h) : s && h()), h;
}
function IN(e, t, n) {
  const a = this.proxy, r = da(e) ? e.includes(".") ? cT(a, e) : () => a[e] : e.bind(a, a);
  let i;
  Yt(t) ? i = t : (i = t.handler, n = t);
  const o = zf(this), l = Ew(r, i.bind(a), n);
  return o(), l;
}
function cT(e, t) {
  const n = t.split(".");
  return () => {
    let a = e;
    for (let r = 0; r < n.length && a; r++)
      a = a[n[r]];
    return a;
  };
}
const EN = (e, t) => t === "modelValue" || t === "model-value" ? e.modelModifiers : e[`${t}Modifiers`] || e[`${Ur(t)}Modifiers`] || e[`${tl(t)}Modifiers`];
function PN(e, t, ...n) {
  if (e.isUnmounted) return;
  const a = e.vnode.props || $n;
  let r = n;
  const i = t.startsWith("update:"), o = i && EN(a, t.slice(7));
  o && (o.trim && (r = n.map((u) => da(u) ? u.trim() : u)), o.number && (r = n.map(Oy)));
  let l, s = a[l = Ig(t)] || // also try camelCase event handler (#2249)
  a[l = Ig(Ur(t))];
  !s && i && (s = a[l = Ig(tl(t))]), s && Yi(
    s,
    e,
    6,
    r
  );
  const d = a[l + "Once"];
  if (d) {
    if (!e.emitted)
      e.emitted = {};
    else if (e.emitted[l])
      return;
    e.emitted[l] = !0, Yi(
      d,
      e,
      6,
      r
    );
  }
}
function uT(e, t, n = !1) {
  const a = t.emitsCache, r = a.get(e);
  if (r !== void 0)
    return r;
  const i = e.emits;
  let o = {}, l = !1;
  if (!Yt(e)) {
    const s = (d) => {
      const u = uT(d, t, !0);
      u && (l = !0, Qa(o, u));
    };
    !n && t.mixins.length && t.mixins.forEach(s), e.extends && s(e.extends), e.mixins && e.mixins.forEach(s);
  }
  return !i && !l ? (Wn(e) && a.set(e, null), null) : (Rt(i) ? i.forEach((s) => o[s] = null) : Qa(o, i), Wn(e) && a.set(e, o), o);
}
function cv(e, t) {
  return !e || !tv(t) ? !1 : (t = t.slice(2).replace(/Once$/, ""), xn(e, t[0].toLowerCase() + t.slice(1)) || xn(e, tl(t)) || xn(e, t));
}
function gS(e) {
  const {
    type: t,
    vnode: n,
    proxy: a,
    withProxy: r,
    propsOptions: [i],
    slots: o,
    attrs: l,
    emit: s,
    render: d,
    renderCache: u,
    props: f,
    data: h,
    setupState: y,
    ctx: p,
    inheritAttrs: w
  } = e, b = p_(e);
  let v, g;
  try {
    if (n.shapeFlag & 4) {
      const A = r || a, C = A;
      v = vo(
        d.call(
          C,
          A,
          u,
          f,
          y,
          h,
          p
        )
      ), g = l;
    } else {
      const A = t;
      v = vo(
        A.length > 1 ? A(
          f,
          { attrs: l, slots: o, emit: s }
        ) : A(
          f,
          null
        )
      ), g = t.props ? l : ON(l);
    }
  } catch (A) {
    sf.length = 0, ov(A, e, 1), v = _(dr);
  }
  let k = v;
  if (g && w !== !1) {
    const A = Object.keys(g), { shapeFlag: C } = k;
    A.length && C & 7 && (i && A.some(lw) && (g = DN(
      g,
      i
    )), k = as(k, g, !1, !0));
  }
  return n.dirs && (k = as(k, null, !1, !0), k.dirs = k.dirs ? k.dirs.concat(n.dirs) : n.dirs), n.transition && Jl(k, n.transition), v = k, p_(b), v;
}
const ON = (e) => {
  let t;
  for (const n in e)
    (n === "class" || n === "style" || tv(n)) && ((t || (t = {}))[n] = e[n]);
  return t;
}, DN = (e, t) => {
  const n = {};
  for (const a in e)
    (!lw(a) || !(a.slice(9) in t)) && (n[a] = e[a]);
  return n;
};
function BN(e, t, n) {
  const { props: a, children: r, component: i } = e, { props: o, children: l, patchFlag: s } = t, d = i.emitsOptions;
  if (t.dirs || t.transition)
    return !0;
  if (n && s >= 0) {
    if (s & 1024)
      return !0;
    if (s & 16)
      return a ? yS(a, o, d) : !!o;
    if (s & 8) {
      const u = t.dynamicProps;
      for (let f = 0; f < u.length; f++) {
        const h = u[f];
        if (o[h] !== a[h] && !cv(d, h))
          return !0;
      }
    }
  } else
    return (r || l) && (!l || !l.$stable) ? !0 : a === o ? !1 : a ? o ? yS(a, o, d) : !0 : !!o;
  return !1;
}
function yS(e, t, n) {
  const a = Object.keys(t);
  if (a.length !== Object.keys(e).length)
    return !0;
  for (let r = 0; r < a.length; r++) {
    const i = a[r];
    if (t[i] !== e[i] && !cv(n, i))
      return !0;
  }
  return !1;
}
function VN({ vnode: e, parent: t }, n) {
  for (; t; ) {
    const a = t.subTree;
    if (a.suspense && a.suspense.activeBranch === e && (a.el = e.el), a === e)
      (e = t.vnode).el = n, t = t.parent;
    else
      break;
  }
}
const dT = (e) => e.__isSuspense;
function MN(e, t) {
  t && t.pendingBranch ? Rt(e) ? t.effects.push(...e) : t.effects.push(e) : QF(e);
}
const Ge = Symbol.for("v-fgt"), Hf = Symbol.for("v-txt"), dr = Symbol.for("v-cmt"), Lg = Symbol.for("v-stc"), sf = [];
let li = null;
function te(e = !1) {
  sf.push(li = e ? null : []);
}
function LN() {
  sf.pop(), li = sf[sf.length - 1] || null;
}
let pf = 1;
function bS(e, t = !1) {
  pf += e, e < 0 && li && t && (li.hasOnce = !0);
}
function fT(e) {
  return e.dynamicChildren = pf > 0 ? li || cu : null, LN(), pf > 0 && li && li.push(e), e;
}
function Oe(e, t, n, a, r, i) {
  return fT(
    T(
      e,
      t,
      n,
      a,
      r,
      i,
      !0
    )
  );
}
function Le(e, t, n, a, r) {
  return fT(
    _(
      e,
      t,
      n,
      a,
      r,
      !0
    )
  );
}
function Su(e) {
  return e ? e.__v_isVNode === !0 : !1;
}
function Bl(e, t) {
  return e.type === t.type && e.key === t.key;
}
const mT = ({ key: e }) => e ?? null, Xh = ({
  ref: e,
  ref_key: t,
  ref_for: n
}) => (typeof e == "number" && (e = "" + e), e != null ? da(e) || ga(e) || Yt(e) ? { i: fr, r: e, k: t, f: !!n } : e : null);
function T(e, t = null, n = null, a = 0, r = null, i = e === Ge ? 0 : 1, o = !1, l = !1) {
  const s = {
    __v_isVNode: !0,
    __v_skip: !0,
    type: e,
    props: t,
    key: t && mT(t),
    ref: t && Xh(t),
    scopeId: Vx,
    slotScopeIds: null,
    children: n,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetStart: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag: i,
    patchFlag: a,
    dynamicProps: r,
    dynamicChildren: null,
    appContext: null,
    ctx: fr
  };
  return l ? (Pw(s, n), i & 128 && e.normalize(s)) : n && (s.shapeFlag |= da(n) ? 8 : 16), pf > 0 && // avoid a block node from tracking itself
  !o && // has current parent block
  li && // presence of a patch flag indicates this node needs patching on updates.
  // component nodes also should always be patched, because even if the
  // component doesn't need to update, it needs to persist the instance on to
  // the next vnode so that it can be properly unmounted later.
  (s.patchFlag > 0 || i & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
  // vnode should not be considered dynamic due to handler caching.
  s.patchFlag !== 32 && li.push(s), s;
}
const _ = RN;
function RN(e, t = null, n = null, a = 0, r = null, i = !1) {
  if ((!e || e === Yx) && (e = dr), Su(e)) {
    const l = as(
      e,
      t,
      !0
      /* mergeRef: true */
    );
    return n && Pw(l, n), pf > 0 && !i && li && (l.shapeFlag & 6 ? li[li.indexOf(e)] = l : li.push(l)), l.patchFlag = -2, l;
  }
  if (WN(e) && (e = e.__vccOpts), t) {
    t = Aa(t);
    let { class: l, style: s } = t;
    l && !da(l) && (t.class = Ae(l)), Wn(s) && (gw(s) && !Rt(s) && (s = Qa({}, s)), t.style = Je(s));
  }
  const o = da(e) ? 1 : dT(e) ? 128 : Lx(e) ? 64 : Wn(e) ? 4 : Yt(e) ? 2 : 0;
  return T(
    e,
    t,
    n,
    a,
    r,
    o,
    i,
    !0
  );
}
function Aa(e) {
  return e ? gw(e) || nT(e) ? Qa({}, e) : e : null;
}
function as(e, t, n = !1, a = !1) {
  const { props: r, ref: i, patchFlag: o, children: l, transition: s } = e, d = t ? Fe(r || {}, t) : r, u = {
    __v_isVNode: !0,
    __v_skip: !0,
    type: e.type,
    props: d,
    key: d && mT(d),
    ref: t && t.ref ? (
      // #2078 in the case of <component :is="vnode" ref="extra"/>
      // if the vnode itself already has a ref, cloneVNode will need to merge
      // the refs so the single vnode can be set on multiple refs
      n && i ? Rt(i) ? i.concat(Xh(t)) : [i, Xh(t)] : Xh(t)
    ) : i,
    scopeId: e.scopeId,
    slotScopeIds: e.slotScopeIds,
    children: l,
    target: e.target,
    targetStart: e.targetStart,
    targetAnchor: e.targetAnchor,
    staticCount: e.staticCount,
    shapeFlag: e.shapeFlag,
    // if the vnode is cloned with extra props, we can no longer assume its
    // existing patch flag to be reliable and need to add the FULL_PROPS flag.
    // note: preserve flag for fragments since they use the flag for children
    // fast paths only.
    patchFlag: t && e.type !== Ge ? o === -1 ? 16 : o | 16 : o,
    dynamicProps: e.dynamicProps,
    dynamicChildren: e.dynamicChildren,
    appContext: e.appContext,
    dirs: e.dirs,
    transition: s,
    // These should technically only be non-null on mounted VNodes. However,
    // they *should* be copied for kept-alive vnodes. So we just always copy
    // them since them being non-null during a mount doesn't affect the logic as
    // they will simply be overwritten.
    component: e.component,
    suspense: e.suspense,
    ssContent: e.ssContent && as(e.ssContent),
    ssFallback: e.ssFallback && as(e.ssFallback),
    placeholder: e.placeholder,
    el: e.el,
    anchor: e.anchor,
    ctx: e.ctx,
    ce: e.ce
  };
  return s && a && Jl(
    u,
    s.clone(u)
  ), u;
}
function ae(e = " ", t = 0) {
  return _(Hf, null, e, t);
}
function ke(e = "", t = !1) {
  return t ? (te(), Le(dr, null, e)) : _(dr, null, e);
}
function vo(e) {
  return e == null || typeof e == "boolean" ? _(dr) : Rt(e) ? _(
    Ge,
    null,
    // #3666, avoid reference pollution when reusing vnode
    e.slice()
  ) : Su(e) ? Bs(e) : _(Hf, null, String(e));
}
function Bs(e) {
  return e.el === null && e.patchFlag !== -1 || e.memo ? e : as(e);
}
function Pw(e, t) {
  let n = 0;
  const { shapeFlag: a } = e;
  if (t == null)
    t = null;
  else if (Rt(t))
    n = 16;
  else if (typeof t == "object")
    if (a & 65) {
      const r = t.default;
      r && (r._c && (r._d = !1), Pw(e, r()), r._c && (r._d = !0));
      return;
    } else {
      n = 32;
      const r = t._;
      !r && !nT(t) ? t._ctx = fr : r === 3 && fr && (fr.slots._ === 1 ? t._ = 1 : (t._ = 2, e.patchFlag |= 1024));
    }
  else Yt(t) ? (t = { default: t, _ctx: fr }, n = 32) : (t = String(t), a & 64 ? (n = 16, t = [ae(t)]) : n = 8);
  e.children = t, e.shapeFlag |= n;
}
function Fe(...e) {
  const t = {};
  for (let n = 0; n < e.length; n++) {
    const a = e[n];
    for (const r in a)
      if (r === "class")
        t.class !== a.class && (t.class = Ae([t.class, a.class]));
      else if (r === "style")
        t.style = Je([t.style, a.style]);
      else if (tv(r)) {
        const i = t[r], o = a[r];
        o && i !== o && !(Rt(i) && i.includes(o)) && (t[r] = i ? [].concat(i, o) : o);
      } else r !== "" && (t[r] = a[r]);
  }
  return t;
}
function uo(e, t, n, a = null) {
  Yi(e, t, 7, [
    n,
    a
  ]);
}
const FN = Zx();
let NN = 0;
function UN(e, t, n) {
  const a = e.type, r = (t ? t.appContext : e.appContext) || FN, i = {
    uid: NN++,
    vnode: e,
    type: a,
    parent: t,
    appContext: r,
    root: null,
    // to be immediately set
    next: null,
    subTree: null,
    // will be set synchronously right after creation
    effect: null,
    update: null,
    // will be set synchronously right after creation
    job: null,
    scope: new dx(
      !0
      /* detached */
    ),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: t ? t.provides : Object.create(r.provides),
    ids: t ? t.ids : ["", 0, 0],
    accessCache: null,
    renderCache: [],
    // local resolved assets
    components: null,
    directives: null,
    // resolved props and emits options
    propsOptions: rT(a, r),
    emitsOptions: uT(a, r),
    // emit
    emit: null,
    // to be set immediately
    emitted: null,
    // props default value
    propsDefaults: $n,
    // inheritAttrs
    inheritAttrs: a.inheritAttrs,
    // state
    ctx: $n,
    data: $n,
    props: $n,
    attrs: $n,
    slots: $n,
    refs: $n,
    setupState: $n,
    setupContext: null,
    // suspense related
    suspense: n,
    suspenseId: n ? n.pendingId : 0,
    asyncDep: null,
    asyncResolved: !1,
    // lifecycle hooks
    // not using enums here because it results in computed properties
    isMounted: !1,
    isUnmounted: !1,
    isDeactivated: !1,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  return i.ctx = { _: i }, i.root = t ? t.root : i, i.emit = PN.bind(null, i), e.ce && e.ce(i), i;
}
let kr = null;
const Io = () => kr || fr;
let y_, Uy;
{
  const e = rv(), t = (n, a) => {
    let r;
    return (r = e[n]) || (r = e[n] = []), r.push(a), (i) => {
      r.length > 1 ? r.forEach((o) => o(i)) : r[0](i);
    };
  };
  y_ = t(
    "__VUE_INSTANCE_SETTERS__",
    (n) => kr = n
  ), Uy = t(
    "__VUE_SSR_SETTERS__",
    (n) => gf = n
  );
}
const zf = (e) => {
  const t = kr;
  return y_(e), e.scope.on(), () => {
    e.scope.off(), y_(t);
  };
}, wS = () => {
  kr && kr.scope.off(), y_(null);
};
function hT(e) {
  return e.vnode.shapeFlag & 4;
}
let gf = !1;
function $N(e, t = !1, n = !1) {
  t && Uy(t);
  const { props: a, children: r } = e.vnode, i = hT(e);
  vN(e, a, i, t), bN(e, r, n || t);
  const o = i ? qN(e, t) : void 0;
  return t && Uy(!1), o;
}
function qN(e, t) {
  const n = e.type;
  e.accessCache = /* @__PURE__ */ Object.create(null), e.proxy = new Proxy(e.ctx, sN);
  const { setup: a } = n;
  if (a) {
    ts();
    const r = e.setupContext = a.length > 1 ? vT(e) : null, i = zf(e), o = qf(
      a,
      e,
      0,
      [
        e.props,
        r
      ]
    ), l = ix(o);
    if (ns(), i(), (l || e.sp) && !mu(e) && Wx(e), l) {
      if (o.then(wS, wS), t)
        return o.then((s) => {
          kS(e, s);
        }).catch((s) => {
          ov(s, e, 0);
        });
      e.asyncDep = o;
    } else
      kS(e, o);
  } else
    _T(e);
}
function kS(e, t, n) {
  Yt(t) ? e.type.__ssrInlineRender ? e.ssrRender = t : e.render = t : Wn(t) && (e.setupState = Ix(t)), _T(e);
}
function _T(e, t, n) {
  const a = e.type;
  e.render || (e.render = a.render || bo);
  {
    const r = zf(e);
    ts();
    try {
      cN(e);
    } finally {
      ns(), r();
    }
  }
}
const HN = {
  get(e, t) {
    return wr(e, "get", ""), e[t];
  }
};
function vT(e) {
  const t = (n) => {
    e.exposed = n || {};
  };
  return {
    attrs: new Proxy(e.attrs, HN),
    slots: e.slots,
    emit: e.emit,
    expose: t
  };
}
function uv(e) {
  return e.exposed ? e.exposeProxy || (e.exposeProxy = new Proxy(Ix(xx(e.exposed)), {
    get(t, n) {
      if (n in t)
        return t[n];
      if (n in of)
        return of[n](e);
    },
    has(t, n) {
      return n in t || n in of;
    }
  })) : e.proxy;
}
function zN(e, t = !0) {
  return Yt(e) ? e.displayName || e.name : e.name || t && e.__name;
}
function WN(e) {
  return Yt(e) && "__vccOpts" in e;
}
const W = (e, t) => WF(e, t, gf);
function Eo(e, t, n) {
  const a = arguments.length;
  return a === 2 ? Wn(t) && !Rt(t) ? Su(t) ? _(e, null, [t]) : _(e, t) : _(e, null, t) : (a > 3 ? n = Array.prototype.slice.call(arguments, 2) : a === 3 && Su(n) && (n = [n]), _(e, t, n));
}
const KN = "3.5.18";
/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let $y;
const SS = typeof window < "u" && window.trustedTypes;
if (SS)
  try {
    $y = /* @__PURE__ */ SS.createPolicy("vue", {
      createHTML: (e) => e
    });
  } catch {
  }
const pT = $y ? (e) => $y.createHTML(e) : (e) => e, jN = "http://www.w3.org/2000/svg", YN = "http://www.w3.org/1998/Math/MathML", Ko = typeof document < "u" ? document : null, CS = Ko && /* @__PURE__ */ Ko.createElement("template"), GN = {
  insert: (e, t, n) => {
    t.insertBefore(e, n || null);
  },
  remove: (e) => {
    const t = e.parentNode;
    t && t.removeChild(e);
  },
  createElement: (e, t, n, a) => {
    const r = t === "svg" ? Ko.createElementNS(jN, e) : t === "mathml" ? Ko.createElementNS(YN, e) : n ? Ko.createElement(e, { is: n }) : Ko.createElement(e);
    return e === "select" && a && a.multiple != null && r.setAttribute("multiple", a.multiple), r;
  },
  createText: (e) => Ko.createTextNode(e),
  createComment: (e) => Ko.createComment(e),
  setText: (e, t) => {
    e.nodeValue = t;
  },
  setElementText: (e, t) => {
    e.textContent = t;
  },
  parentNode: (e) => e.parentNode,
  nextSibling: (e) => e.nextSibling,
  querySelector: (e) => Ko.querySelector(e),
  setScopeId(e, t) {
    e.setAttribute(t, "");
  },
  // __UNSAFE__
  // Reason: innerHTML.
  // Static content here can only come from compiled templates.
  // As long as the user only uses trusted templates, this is safe.
  insertStaticContent(e, t, n, a, r, i) {
    const o = n ? n.previousSibling : t.lastChild;
    if (r && (r === i || r.nextSibling))
      for (; t.insertBefore(r.cloneNode(!0), n), !(r === i || !(r = r.nextSibling)); )
        ;
    else {
      CS.innerHTML = pT(
        a === "svg" ? `<svg>${e}</svg>` : a === "mathml" ? `<math>${e}</math>` : e
      );
      const l = CS.content;
      if (a === "svg" || a === "mathml") {
        const s = l.firstChild;
        for (; s.firstChild; )
          l.appendChild(s.firstChild);
        l.removeChild(s);
      }
      t.insertBefore(l, n);
    }
    return [
      // first
      o ? o.nextSibling : t.firstChild,
      // last
      n ? n.previousSibling : t.lastChild
    ];
  }
}, xs = "transition", Ud = "animation", Cu = Symbol("_vtc"), gT = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: !0
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
}, yT = /* @__PURE__ */ Qa(
  {},
  $x,
  gT
), QN = (e) => (e.displayName = "Transition", e.props = yT, e), $r = /* @__PURE__ */ QN(
  (e, { slots: t }) => Eo(ZF, bT(e), t)
), Tl = (e, t = []) => {
  Rt(e) ? e.forEach((n) => n(...t)) : e && e(...t);
}, AS = (e) => e ? Rt(e) ? e.some((t) => t.length > 1) : e.length > 1 : !1;
function bT(e) {
  const t = {};
  for (const V in e)
    V in gT || (t[V] = e[V]);
  if (e.css === !1)
    return t;
  const {
    name: n = "v",
    type: a,
    duration: r,
    enterFromClass: i = `${n}-enter-from`,
    enterActiveClass: o = `${n}-enter-active`,
    enterToClass: l = `${n}-enter-to`,
    appearFromClass: s = i,
    appearActiveClass: d = o,
    appearToClass: u = l,
    leaveFromClass: f = `${n}-leave-from`,
    leaveActiveClass: h = `${n}-leave-active`,
    leaveToClass: y = `${n}-leave-to`
  } = e, p = JN(r), w = p && p[0], b = p && p[1], {
    onBeforeEnter: v,
    onEnter: g,
    onEnterCancelled: k,
    onLeave: A,
    onLeaveCancelled: C,
    onBeforeAppear: D = v,
    onAppear: P = g,
    onAppearCancelled: O = k
  } = t, I = (V, B, F, H) => {
    V._enterCancelled = H, Es(V, B ? u : l), Es(V, B ? d : o), F && F();
  }, x = (V, B) => {
    V._isLeaving = !1, Es(V, f), Es(V, y), Es(V, h), B && B();
  }, M = (V) => (B, F) => {
    const H = V ? P : g, K = () => I(B, V, F);
    Tl(H, [B, K]), xS(() => {
      Es(B, V ? s : i), mo(B, V ? u : l), AS(H) || TS(B, a, w, K);
    });
  };
  return Qa(t, {
    onBeforeEnter(V) {
      Tl(v, [V]), mo(V, i), mo(V, o);
    },
    onBeforeAppear(V) {
      Tl(D, [V]), mo(V, s), mo(V, d);
    },
    onEnter: M(!1),
    onAppear: M(!0),
    onLeave(V, B) {
      V._isLeaving = !0;
      const F = () => x(V, B);
      mo(V, f), V._enterCancelled ? (mo(V, h), qy()) : (qy(), mo(V, h)), xS(() => {
        V._isLeaving && (Es(V, f), mo(V, y), AS(A) || TS(V, a, b, F));
      }), Tl(A, [V, F]);
    },
    onEnterCancelled(V) {
      I(V, !1, void 0, !0), Tl(k, [V]);
    },
    onAppearCancelled(V) {
      I(V, !0, void 0, !0), Tl(O, [V]);
    },
    onLeaveCancelled(V) {
      x(V), Tl(C, [V]);
    }
  });
}
function JN(e) {
  if (e == null)
    return null;
  if (Wn(e))
    return [Rg(e.enter), Rg(e.leave)];
  {
    const t = Rg(e);
    return [t, t];
  }
}
function Rg(e) {
  return mF(e);
}
function mo(e, t) {
  t.split(/\s+/).forEach((n) => n && e.classList.add(n)), (e[Cu] || (e[Cu] = /* @__PURE__ */ new Set())).add(t);
}
function Es(e, t) {
  t.split(/\s+/).forEach((a) => a && e.classList.remove(a));
  const n = e[Cu];
  n && (n.delete(t), n.size || (e[Cu] = void 0));
}
function xS(e) {
  requestAnimationFrame(() => {
    requestAnimationFrame(e);
  });
}
let XN = 0;
function TS(e, t, n, a) {
  const r = e._endId = ++XN, i = () => {
    r === e._endId && a();
  };
  if (n != null)
    return setTimeout(i, n);
  const { type: o, timeout: l, propCount: s } = wT(e, t);
  if (!o)
    return a();
  const d = o + "end";
  let u = 0;
  const f = () => {
    e.removeEventListener(d, h), i();
  }, h = (y) => {
    y.target === e && ++u >= s && f();
  };
  setTimeout(() => {
    u < s && f();
  }, l + 1), e.addEventListener(d, h);
}
function wT(e, t) {
  const n = window.getComputedStyle(e), a = (p) => (n[p] || "").split(", "), r = a(`${xs}Delay`), i = a(`${xs}Duration`), o = IS(r, i), l = a(`${Ud}Delay`), s = a(`${Ud}Duration`), d = IS(l, s);
  let u = null, f = 0, h = 0;
  t === xs ? o > 0 && (u = xs, f = o, h = i.length) : t === Ud ? d > 0 && (u = Ud, f = d, h = s.length) : (f = Math.max(o, d), u = f > 0 ? o > d ? xs : Ud : null, h = u ? u === xs ? i.length : s.length : 0);
  const y = u === xs && /\b(transform|all)(,|$)/.test(
    a(`${xs}Property`).toString()
  );
  return {
    type: u,
    timeout: f,
    propCount: h,
    hasTransform: y
  };
}
function IS(e, t) {
  for (; e.length < t.length; )
    e = e.concat(e);
  return Math.max(...t.map((n, a) => ES(n) + ES(e[a])));
}
function ES(e) {
  return e === "auto" ? 0 : Number(e.slice(0, -1).replace(",", ".")) * 1e3;
}
function qy() {
  return document.body.offsetHeight;
}
function ZN(e, t, n) {
  const a = e[Cu];
  a && (t = (t ? [t, ...a] : [...a]).join(" ")), t == null ? e.removeAttribute("class") : n ? e.setAttribute("class", t) : e.className = t;
}
const b_ = Symbol("_vod"), kT = Symbol("_vsh"), _a = {
  beforeMount(e, { value: t }, { transition: n }) {
    e[b_] = e.style.display === "none" ? "" : e.style.display, n && t ? n.beforeEnter(e) : $d(e, t);
  },
  mounted(e, { value: t }, { transition: n }) {
    n && t && n.enter(e);
  },
  updated(e, { value: t, oldValue: n }, { transition: a }) {
    !t != !n && (a ? t ? (a.beforeEnter(e), $d(e, !0), a.enter(e)) : a.leave(e, () => {
      $d(e, !1);
    }) : $d(e, t));
  },
  beforeUnmount(e, { value: t }) {
    $d(e, t);
  }
};
function $d(e, t) {
  e.style.display = t ? e[b_] : "none", e[kT] = !t;
}
const e3 = Symbol(""), t3 = /(^|;)\s*display\s*:/;
function n3(e, t, n) {
  const a = e.style, r = da(n);
  let i = !1;
  if (n && !r) {
    if (t)
      if (da(t))
        for (const o of t.split(";")) {
          const l = o.slice(0, o.indexOf(":")).trim();
          n[l] == null && Zh(a, l, "");
        }
      else
        for (const o in t)
          n[o] == null && Zh(a, o, "");
    for (const o in n)
      o === "display" && (i = !0), Zh(a, o, n[o]);
  } else if (r) {
    if (t !== n) {
      const o = a[e3];
      o && (n += ";" + o), a.cssText = n, i = t3.test(n);
    }
  } else t && e.removeAttribute("style");
  b_ in e && (e[b_] = i ? a.display : "", e[kT] && (a.display = "none"));
}
const PS = /\s*!important$/;
function Zh(e, t, n) {
  if (Rt(n))
    n.forEach((a) => Zh(e, t, a));
  else if (n == null && (n = ""), t.startsWith("--"))
    e.setProperty(t, n);
  else {
    const a = a3(e, t);
    PS.test(n) ? e.setProperty(
      tl(a),
      n.replace(PS, ""),
      "important"
    ) : e[a] = n;
  }
}
const OS = ["Webkit", "Moz", "ms"], Fg = {};
function a3(e, t) {
  const n = Fg[t];
  if (n)
    return n;
  let a = Ur(t);
  if (a !== "filter" && a in e)
    return Fg[t] = a;
  a = To(a);
  for (let r = 0; r < OS.length; r++) {
    const i = OS[r] + a;
    if (i in e)
      return Fg[t] = i;
  }
  return t;
}
const DS = "http://www.w3.org/1999/xlink";
function BS(e, t, n, a, r, i = yF(t)) {
  a && t.startsWith("xlink:") ? n == null ? e.removeAttributeNS(DS, t.slice(6, t.length)) : e.setAttributeNS(DS, t, n) : n == null || i && !lx(n) ? e.removeAttribute(t) : e.setAttribute(
    t,
    i ? "" : ls(n) ? String(n) : n
  );
}
function VS(e, t, n, a, r) {
  if (t === "innerHTML" || t === "textContent") {
    n != null && (e[t] = t === "innerHTML" ? pT(n) : n);
    return;
  }
  const i = e.tagName;
  if (t === "value" && i !== "PROGRESS" && // custom elements may use _value internally
  !i.includes("-")) {
    const l = i === "OPTION" ? e.getAttribute("value") || "" : e.value, s = n == null ? (
      // #11647: value should be set as empty string for null and undefined,
      // but <input type="checkbox"> should be set as 'on'.
      e.type === "checkbox" ? "on" : ""
    ) : String(n);
    (l !== s || !("_value" in e)) && (e.value = s), n == null && e.removeAttribute(t), e._value = n;
    return;
  }
  let o = !1;
  if (n === "" || n == null) {
    const l = typeof e[t];
    l === "boolean" ? n = lx(n) : n == null && l === "string" ? (n = "", o = !0) : l === "number" && (n = 0, o = !0);
  }
  try {
    e[t] = n;
  } catch {
  }
  o && e.removeAttribute(r || t);
}
function nu(e, t, n, a) {
  e.addEventListener(t, n, a);
}
function r3(e, t, n, a) {
  e.removeEventListener(t, n, a);
}
const MS = Symbol("_vei");
function i3(e, t, n, a, r = null) {
  const i = e[MS] || (e[MS] = {}), o = i[t];
  if (a && o)
    o.value = a;
  else {
    const [l, s] = o3(t);
    if (a) {
      const d = i[t] = c3(
        a,
        r
      );
      nu(e, l, d, s);
    } else o && (r3(e, l, o, s), i[t] = void 0);
  }
}
const LS = /(?:Once|Passive|Capture)$/;
function o3(e) {
  let t;
  if (LS.test(e)) {
    t = {};
    let a;
    for (; a = e.match(LS); )
      e = e.slice(0, e.length - a[0].length), t[a[0].toLowerCase()] = !0;
  }
  return [e[2] === ":" ? e.slice(3) : tl(e.slice(2)), t];
}
let Ng = 0;
const s3 = /* @__PURE__ */ Promise.resolve(), l3 = () => Ng || (s3.then(() => Ng = 0), Ng = Date.now());
function c3(e, t) {
  const n = (a) => {
    if (!a._vts)
      a._vts = Date.now();
    else if (a._vts <= n.attached)
      return;
    Yi(
      u3(a, n.value),
      t,
      5,
      [a]
    );
  };
  return n.value = e, n.attached = l3(), n;
}
function u3(e, t) {
  if (Rt(t)) {
    const n = e.stopImmediatePropagation;
    return e.stopImmediatePropagation = () => {
      n.call(e), e._stopped = !0;
    }, t.map(
      (a) => (r) => !r._stopped && a && a(r)
    );
  } else
    return t;
}
const RS = (e) => e.charCodeAt(0) === 111 && e.charCodeAt(1) === 110 && // lowercase letter
e.charCodeAt(2) > 96 && e.charCodeAt(2) < 123, d3 = (e, t, n, a, r, i) => {
  const o = r === "svg";
  t === "class" ? ZN(e, a, o) : t === "style" ? n3(e, n, a) : tv(t) ? lw(t) || i3(e, t, n, a, i) : (t[0] === "." ? (t = t.slice(1), !0) : t[0] === "^" ? (t = t.slice(1), !1) : f3(e, t, a, o)) ? (VS(e, t, a), !e.tagName.includes("-") && (t === "value" || t === "checked" || t === "selected") && BS(e, t, a, o, i, t !== "value")) : /* #11081 force set props for possible async custom element */ e._isVueCE && (/[A-Z]/.test(t) || !da(a)) ? VS(e, Ur(t), a, i, t) : (t === "true-value" ? e._trueValue = a : t === "false-value" && (e._falseValue = a), BS(e, t, a, o));
};
function f3(e, t, n, a) {
  if (a)
    return !!(t === "innerHTML" || t === "textContent" || t in e && RS(t) && Yt(n));
  if (t === "spellcheck" || t === "draggable" || t === "translate" || t === "autocorrect" || t === "form" || t === "list" && e.tagName === "INPUT" || t === "type" && e.tagName === "TEXTAREA")
    return !1;
  if (t === "width" || t === "height") {
    const r = e.tagName;
    if (r === "IMG" || r === "VIDEO" || r === "CANVAS" || r === "SOURCE")
      return !1;
  }
  return RS(t) && da(n) ? !1 : t in e;
}
const ST = /* @__PURE__ */ new WeakMap(), CT = /* @__PURE__ */ new WeakMap(), w_ = Symbol("_moveCb"), FS = Symbol("_enterCb"), m3 = (e) => (delete e.props.mode, e), h3 = /* @__PURE__ */ m3({
  name: "TransitionGroup",
  props: /* @__PURE__ */ Qa({}, yT, {
    tag: String,
    moveClass: String
  }),
  setup(e, { slots: t }) {
    const n = Io(), a = Ux();
    let r, i;
    return Sw(() => {
      if (!r.length)
        return;
      const o = e.moveClass || `${e.name || "v"}-move`;
      if (!g3(
        r[0].el,
        n.vnode.el,
        o
      )) {
        r = [];
        return;
      }
      r.forEach(_3), r.forEach(v3);
      const l = r.filter(p3);
      qy(), l.forEach((s) => {
        const d = s.el, u = d.style;
        mo(d, o), u.transform = u.webkitTransform = u.transitionDuration = "";
        const f = d[w_] = (h) => {
          h && h.target !== d || (!h || /transform$/.test(h.propertyName)) && (d.removeEventListener("transitionend", f), d[w_] = null, Es(d, o));
        };
        d.addEventListener("transitionend", f);
      }), r = [];
    }), () => {
      const o = Ot(e), l = bT(o);
      let s = o.tag || Ge;
      if (r = [], i)
        for (let d = 0; d < i.length; d++) {
          const u = i[d];
          u.el && u.el instanceof Element && (r.push(u), Jl(
            u,
            vf(
              u,
              l,
              a,
              n
            )
          ), ST.set(
            u,
            u.el.getBoundingClientRect()
          ));
        }
      i = t.default ? bw(t.default()) : [];
      for (let d = 0; d < i.length; d++) {
        const u = i[d];
        u.key != null && Jl(
          u,
          vf(u, l, a, n)
        );
      }
      return _(s, null, i);
    };
  }
}), Ow = h3;
function _3(e) {
  const t = e.el;
  t[w_] && t[w_](), t[FS] && t[FS]();
}
function v3(e) {
  CT.set(e, e.el.getBoundingClientRect());
}
function p3(e) {
  const t = ST.get(e), n = CT.get(e), a = t.left - n.left, r = t.top - n.top;
  if (a || r) {
    const i = e.el.style;
    return i.transform = i.webkitTransform = `translate(${a}px,${r}px)`, i.transitionDuration = "0s", e;
  }
}
function g3(e, t, n) {
  const a = e.cloneNode(), r = e[Cu];
  r && r.forEach((l) => {
    l.split(/\s+/).forEach((s) => s && a.classList.remove(s));
  }), n.split(/\s+/).forEach((l) => l && a.classList.add(l)), a.style.display = "none";
  const i = t.nodeType === 1 ? t : t.parentNode;
  i.appendChild(a);
  const { hasTransform: o } = wT(a);
  return i.removeChild(a), o;
}
const NS = (e) => {
  const t = e.props["onUpdate:modelValue"] || !1;
  return Rt(t) ? (n) => Qh(t, n) : t;
};
function y3(e) {
  e.target.composing = !0;
}
function US(e) {
  const t = e.target;
  t.composing && (t.composing = !1, t.dispatchEvent(new Event("input")));
}
const Ug = Symbol("_assign"), b3 = {
  created(e, { modifiers: { lazy: t, trim: n, number: a } }, r) {
    e[Ug] = NS(r);
    const i = a || r.props && r.props.type === "number";
    nu(e, t ? "change" : "input", (o) => {
      if (o.target.composing) return;
      let l = e.value;
      n && (l = l.trim()), i && (l = Oy(l)), e[Ug](l);
    }), n && nu(e, "change", () => {
      e.value = e.value.trim();
    }), t || (nu(e, "compositionstart", y3), nu(e, "compositionend", US), nu(e, "change", US));
  },
  // set value on mounted so it's after min/max for type="range"
  mounted(e, { value: t }) {
    e.value = t ?? "";
  },
  beforeUpdate(e, { value: t, oldValue: n, modifiers: { lazy: a, trim: r, number: i } }, o) {
    if (e[Ug] = NS(o), e.composing) return;
    const l = (i || e.type === "number") && !/^0\d/.test(e.value) ? Oy(e.value) : e.value, s = t ?? "";
    l !== s && (document.activeElement === e && e.type !== "range" && (a && t === n || r && e.value.trim() === s) || (e.value = s));
  }
}, w3 = ["ctrl", "shift", "alt", "meta"], k3 = {
  stop: (e) => e.stopPropagation(),
  prevent: (e) => e.preventDefault(),
  self: (e) => e.target !== e.currentTarget,
  ctrl: (e) => !e.ctrlKey,
  shift: (e) => !e.shiftKey,
  alt: (e) => !e.altKey,
  meta: (e) => !e.metaKey,
  left: (e) => "button" in e && e.button !== 0,
  middle: (e) => "button" in e && e.button !== 1,
  right: (e) => "button" in e && e.button !== 2,
  exact: (e, t) => w3.some((n) => e[`${n}Key`] && !t.includes(n))
}, ua = (e, t) => {
  const n = e._withMods || (e._withMods = {}), a = t.join(".");
  return n[a] || (n[a] = (r, ...i) => {
    for (let o = 0; o < t.length; o++) {
      const l = k3[t[o]];
      if (l && l(r, t)) return;
    }
    return e(r, ...i);
  });
}, S3 = {
  esc: "escape",
  space: " ",
  up: "arrow-up",
  left: "arrow-left",
  right: "arrow-right",
  down: "arrow-down",
  delete: "backspace"
}, Ll = (e, t) => {
  const n = e._withKeys || (e._withKeys = {}), a = t.join(".");
  return n[a] || (n[a] = (r) => {
    if (!("key" in r))
      return;
    const i = tl(r.key);
    if (t.some(
      (o) => o === i || S3[o] === i
    ))
      return e(r);
  });
}, C3 = /* @__PURE__ */ Qa({ patchProp: d3 }, GN);
let $S;
function AT() {
  return $S || ($S = kN(C3));
}
const k_ = (...e) => {
  AT().render(...e);
}, A3 = (...e) => {
  const t = AT().createApp(...e), { mount: n } = t;
  return t.mount = (a) => {
    const r = T3(a);
    if (!r) return;
    const i = t._component;
    !Yt(i) && !i.render && !i.template && (i.template = r.innerHTML), r.nodeType === 1 && (r.textContent = "");
    const o = n(r, !1, x3(r));
    return r instanceof Element && (r.removeAttribute("v-cloak"), r.setAttribute("data-v-app", "")), o;
  }, t;
};
function x3(e) {
  if (e instanceof SVGElement)
    return "svg";
  if (typeof MathMLElement == "function" && e instanceof MathMLElement)
    return "mathml";
}
function T3(e) {
  return da(e) ? document.querySelector(e) : e;
}
function Ar(e, t) {
  let n;
  function a() {
    n = ku(), n.run(() => t.length ? t(() => {
      n?.stop(), a();
    }) : t());
  }
  tt(e, (r) => {
    r && !n ? a() : r || (n?.stop(), n = void 0);
  }, {
    immediate: !0
  }), Fa(() => {
    n?.stop();
  });
}
const _n = typeof window < "u", Dw = _n && "IntersectionObserver" in window, I3 = _n && ("ontouchstart" in window || window.navigator.maxTouchPoints > 0), qS = _n && "EyeDropper" in window, E3 = _n && "matchMedia" in window && typeof window.matchMedia == "function";
function HS(e, t, n) {
  P3(e, t), t.set(e, n);
}
function P3(e, t) {
  if (t.has(e)) throw new TypeError("Cannot initialize the same private elements twice on an object");
}
function zS(e, t, n) {
  return e.set(xT(e, t), n), n;
}
function zo(e, t) {
  return e.get(xT(e, t));
}
function xT(e, t, n) {
  if (typeof e == "function" ? e === t : e.has(t)) return arguments.length < 3 ? t : n;
  throw new TypeError("Private element is not present on this object");
}
function TT(e, t, n) {
  const a = t.length - 1;
  if (a < 0) return e === void 0 ? n : e;
  for (let r = 0; r < a; r++) {
    if (e == null)
      return n;
    e = e[t[r]];
  }
  return e == null || e[t[a]] === void 0 ? n : e[t[a]];
}
function Ga(e, t) {
  if (e === t) return !0;
  if (e instanceof Date && t instanceof Date && e.getTime() !== t.getTime() || e !== Object(e) || t !== Object(t))
    return !1;
  const n = Object.keys(e);
  return n.length !== Object.keys(t).length ? !1 : n.every((a) => Ga(e[a], t[a]));
}
function Xl(e, t, n) {
  return e == null || !t || typeof t != "string" ? n : e[t] !== void 0 ? e[t] : (t = t.replace(/\[(\w+)\]/g, ".$1"), t = t.replace(/^\./, ""), TT(e, t.split("."), n));
}
function Ca(e, t, n) {
  if (t === !0) return e === void 0 ? n : e;
  if (t == null || typeof t == "boolean") return n;
  if (e !== Object(e)) {
    if (typeof t != "function") return n;
    const r = t(e, n);
    return typeof r > "u" ? n : r;
  }
  if (typeof t == "string") return Xl(e, t, n);
  if (Array.isArray(t)) return TT(e, t, n);
  if (typeof t != "function") return n;
  const a = t(e, n);
  return typeof a > "u" ? n : a;
}
function ci(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return Array.from({
    length: e
  }, (n, a) => t + a);
}
function ht(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "px";
  if (e == null || e === "")
    return;
  const n = Number(e);
  return isNaN(n) ? String(e) : isFinite(n) ? `${n}${t}` : void 0;
}
function yf(e) {
  return e !== null && typeof e == "object" && !Array.isArray(e);
}
function WS(e) {
  let t;
  return e !== null && typeof e == "object" && ((t = Object.getPrototypeOf(e)) === Object.prototype || t === null);
}
function Bw(e) {
  if (e && "$el" in e) {
    const t = e.$el;
    return t?.nodeType === Node.TEXT_NODE ? t.nextElementSibling : t;
  }
  return e;
}
const Hy = Object.freeze({
  enter: "Enter",
  tab: "Tab",
  delete: "Delete",
  esc: "Escape",
  space: "Space",
  up: "ArrowUp",
  down: "ArrowDown",
  left: "ArrowLeft",
  right: "ArrowRight",
  end: "End",
  home: "Home",
  del: "Delete",
  backspace: "Backspace",
  insert: "Insert",
  pageup: "PageUp",
  pagedown: "PageDown",
  shift: "Shift"
});
function IT(e) {
  return Object.keys(e);
}
function Rl(e, t) {
  return t.every((n) => e.hasOwnProperty(n));
}
function us(e, t) {
  const n = {};
  for (const a of t)
    Object.prototype.hasOwnProperty.call(e, a) && (n[a] = e[a]);
  return n;
}
function zy(e, t, n) {
  const a = /* @__PURE__ */ Object.create(null), r = /* @__PURE__ */ Object.create(null);
  for (const i in e)
    t.some((o) => o instanceof RegExp ? o.test(i) : o === i) ? a[i] = e[i] : r[i] = e[i];
  return [a, r];
}
function Tn(e, t) {
  const n = {
    ...e
  };
  return t.forEach((a) => delete n[a]), n;
}
const ET = /^on[^a-z]/, Vw = (e) => ET.test(e), O3 = ["onAfterscriptexecute", "onAnimationcancel", "onAnimationend", "onAnimationiteration", "onAnimationstart", "onAuxclick", "onBeforeinput", "onBeforescriptexecute", "onChange", "onClick", "onCompositionend", "onCompositionstart", "onCompositionupdate", "onContextmenu", "onCopy", "onCut", "onDblclick", "onFocusin", "onFocusout", "onFullscreenchange", "onFullscreenerror", "onGesturechange", "onGestureend", "onGesturestart", "onGotpointercapture", "onInput", "onKeydown", "onKeypress", "onKeyup", "onLostpointercapture", "onMousedown", "onMousemove", "onMouseout", "onMouseover", "onMouseup", "onMousewheel", "onPaste", "onPointercancel", "onPointerdown", "onPointerenter", "onPointerleave", "onPointermove", "onPointerout", "onPointerover", "onPointerup", "onReset", "onSelect", "onSubmit", "onTouchcancel", "onTouchend", "onTouchmove", "onTouchstart", "onTransitioncancel", "onTransitionend", "onTransitionrun", "onTransitionstart", "onWheel"], D3 = ["ArrowUp", "ArrowDown", "ArrowRight", "ArrowLeft", "Enter", "Escape", "Tab", " "];
function B3(e) {
  return e.isComposing && D3.includes(e.key);
}
function nl(e) {
  const [t, n] = zy(e, [ET]), a = Tn(t, O3), [r, i] = zy(n, ["class", "style", "id", /^data-/]);
  return Object.assign(r, t), Object.assign(i, a), [r, i];
}
function ta(e) {
  return e == null ? [] : Array.isArray(e) ? e : [e];
}
function PT(e, t) {
  let n = 0;
  const a = function() {
    for (var r = arguments.length, i = new Array(r), o = 0; o < r; o++)
      i[o] = arguments[o];
    clearTimeout(n), n = setTimeout(() => e(...i), fe(t));
  };
  return a.clear = () => {
    clearTimeout(n);
  }, a.immediate = e, a;
}
function Dn(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1;
  return Math.max(t, Math.min(n, e));
}
function KS(e) {
  const t = e.toString().trim();
  return t.includes(".") ? t.length - t.indexOf(".") - 1 : 0;
}
function jS(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "0";
  return e + n.repeat(Math.max(0, t - e.length));
}
function YS(e, t) {
  return (arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "0").repeat(Math.max(0, t - e.length)) + e;
}
function V3(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
  const n = [];
  let a = 0;
  for (; a < e.length; )
    n.push(e.substr(a, t)), a += t;
  return n;
}
function GS(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e3;
  if (e < t)
    return `${e} B`;
  const n = t === 1024 ? ["Ki", "Mi", "Gi"] : ["k", "M", "G"];
  let a = -1;
  for (; Math.abs(e) >= t && a < n.length - 1; )
    e /= t, ++a;
  return `${e.toFixed(1)} ${n[a]}B`;
}
function Sr() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n = arguments.length > 2 ? arguments[2] : void 0;
  const a = {};
  for (const r in e)
    a[r] = e[r];
  for (const r in t) {
    const i = e[r], o = t[r];
    if (WS(i) && WS(o)) {
      a[r] = Sr(i, o, n);
      continue;
    }
    if (n && Array.isArray(i) && Array.isArray(o)) {
      a[r] = n(i, o);
      continue;
    }
    a[r] = o;
  }
  return a;
}
function OT(e) {
  return e.map((t) => t.type === Ge ? OT(t.children) : t).flat();
}
function Hl() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  if (Hl.cache.has(e)) return Hl.cache.get(e);
  const t = e.replace(/[^a-z]/gi, "-").replace(/\B([A-Z])/g, "-$1").toLowerCase();
  return Hl.cache.set(e, t), t;
}
Hl.cache = /* @__PURE__ */ new Map();
function iu(e, t) {
  if (!t || typeof t != "object") return [];
  if (Array.isArray(t))
    return t.map((n) => iu(e, n)).flat(1);
  if (t.suspense)
    return iu(e, t.ssContent);
  if (Array.isArray(t.children))
    return t.children.map((n) => iu(e, n)).flat(1);
  if (t.component) {
    if (Object.getOwnPropertySymbols(t.component.provides).includes(e))
      return [t.component];
    if (t.component.subTree)
      return iu(e, t.component.subTree).flat(1);
  }
  return [];
}
var jc = /* @__PURE__ */ new WeakMap(), Il = /* @__PURE__ */ new WeakMap();
class DT {
  constructor(t) {
    HS(this, jc, []), HS(this, Il, 0), this.size = t;
  }
  get isFull() {
    return zo(jc, this).length === this.size;
  }
  push(t) {
    zo(jc, this)[zo(Il, this)] = t, zS(Il, this, (zo(Il, this) + 1) % this.size);
  }
  values() {
    return zo(jc, this).slice(zo(Il, this)).concat(zo(jc, this).slice(0, zo(Il, this)));
  }
  clear() {
    zo(jc, this).length = 0, zS(Il, this, 0);
  }
}
function M3(e) {
  return "touches" in e ? {
    clientX: e.touches[0].clientX,
    clientY: e.touches[0].clientY
  } : {
    clientX: e.clientX,
    clientY: e.clientY
  };
}
function Mw(e) {
  const t = Zn({});
  na(() => {
    const a = e();
    for (const r in a)
      t[r] = a[r];
  }, {
    flush: "sync"
  });
  const n = {};
  for (const a in t)
    n[a] = ye(() => t[a]);
  return n;
}
function S_(e, t) {
  return e.includes(t);
}
function BT(e) {
  return e[2].toLowerCase() + e.slice(3);
}
const rr = () => [Function, Array];
function QS(e, t) {
  return t = "on" + To(t), !!(e[t] || e[`${t}Once`] || e[`${t}Capture`] || e[`${t}OnceCapture`] || e[`${t}CaptureOnce`]);
}
function dv(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), a = 1; a < t; a++)
    n[a - 1] = arguments[a];
  if (Array.isArray(e))
    for (const r of e)
      r(...n);
  else typeof e == "function" && e(...n);
}
function bf(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
  const n = ["button", "[href]", 'input:not([type="hidden"])', "select", "textarea", "[tabindex]"].map((a) => `${a}${t ? ':not([tabindex="-1"])' : ""}:not([disabled])`).join(", ");
  return [...e.querySelectorAll(n)];
}
function VT(e, t, n) {
  let a, r = e.indexOf(document.activeElement);
  const i = t === "next" ? 1 : -1;
  do
    r += i, a = e[r];
  while ((!a || a.offsetParent == null || !(n?.(a) ?? !0)) && r < e.length && r >= 0);
  return a;
}
function zl(e, t) {
  const n = bf(e);
  if (t == null)
    (e === document.activeElement || !e.contains(document.activeElement)) && n[0]?.focus();
  else if (t === "first")
    n[0]?.focus();
  else if (t === "last")
    n.at(-1)?.focus();
  else if (typeof t == "number")
    n[t]?.focus();
  else {
    const a = VT(n, t);
    a ? a.focus() : zl(e, t === "next" ? "first" : "last");
  }
}
function Th(e) {
  return e == null || typeof e == "string" && e.trim() === "";
}
function MT() {
}
function Au(e, t) {
  if (!(_n && typeof CSS < "u" && typeof CSS.supports < "u" && CSS.supports(`selector(${t})`))) return null;
  try {
    return !!e && e.matches(t);
  } catch {
    return null;
  }
}
function fv(e) {
  return e.some((t) => Su(t) ? t.type === dr ? !1 : t.type !== Ge || fv(t.children) : !0) ? e : null;
}
function $g(e, t, n) {
  return e?.(t) ?? n?.(t);
}
function L3(e, t) {
  if (!_n || e === 0)
    return t(), () => {
    };
  const n = window.setTimeout(t, e);
  return () => window.clearTimeout(n);
}
function R3(e, t) {
  const n = e.clientX, a = e.clientY, r = t.getBoundingClientRect(), i = r.left, o = r.top, l = r.right, s = r.bottom;
  return n >= i && n <= l && a >= o && a <= s;
}
function C_() {
  const e = rt(), t = (n) => {
    e.value = n;
  };
  return Object.defineProperty(t, "value", {
    enumerable: !0,
    get: () => e.value,
    set: (n) => e.value = n
  }), Object.defineProperty(t, "el", {
    enumerable: !0,
    get: () => Bw(e.value)
  }), t;
}
function xu(e) {
  const t = e.key.length === 1, n = !e.ctrlKey && !e.metaKey && !e.altKey;
  return t && n;
}
function Wy(e) {
  return typeof e == "string" || typeof e == "number" || typeof e == "boolean" || typeof e == "bigint";
}
function A_(e) {
  return "\\^$*+?.()|{}[]".includes(e) ? `\\${e}` : e;
}
function F3(e, t, n) {
  const a = new RegExp(`[\\d\\-${A_(n)}]`), r = e.split("").filter((o) => a.test(o)).filter((o, l, s) => l === 0 && /[-]/.test(o) || // sign allowed at the start
  o === n && l === s.indexOf(o) || // decimal separator allowed only once
  /\d/.test(o)).join("");
  if (t === 0)
    return r.split(n)[0];
  const i = new RegExp(`${A_(n)}\\d`);
  if (t !== null && i.test(r)) {
    const o = r.split(n);
    return [o[0], o[1].substring(0, t)].join(n);
  }
  return r;
}
function N3(e) {
  const t = {};
  for (const n in e)
    t[Ur(n)] = e[n];
  return t;
}
function U3(e) {
  const t = ["checked", "disabled"];
  return Object.fromEntries(Object.entries(e).filter((n) => {
    let [a, r] = n;
    return t.includes(a) ? !!r : r !== void 0;
  }));
}
const LT = ["top", "bottom"], $3 = ["start", "end", "left", "right"];
function Ky(e, t) {
  let [n, a] = e.split(" ");
  return a || (a = S_(LT, n) ? "start" : S_($3, n) ? "top" : "center"), {
    side: jy(n, t),
    align: jy(a, t)
  };
}
function jy(e, t) {
  return e === "start" ? t ? "right" : "left" : e === "end" ? t ? "left" : "right" : e;
}
function qg(e) {
  return {
    side: {
      center: "center",
      top: "bottom",
      bottom: "top",
      left: "right",
      right: "left"
    }[e.side],
    align: e.align
  };
}
function Hg(e) {
  return {
    side: e.side,
    align: {
      center: "center",
      top: "bottom",
      bottom: "top",
      left: "right",
      right: "left"
    }[e.align]
  };
}
function JS(e) {
  return {
    side: e.align,
    align: e.side
  };
}
function XS(e) {
  return S_(LT, e.side) ? "y" : "x";
}
class wo {
  constructor(t) {
    let {
      x: n,
      y: a,
      width: r,
      height: i
    } = t;
    this.x = n, this.y = a, this.width = r, this.height = i;
  }
  get top() {
    return this.y;
  }
  get bottom() {
    return this.y + this.height;
  }
  get left() {
    return this.x;
  }
  get right() {
    return this.x + this.width;
  }
}
function ZS(e, t) {
  return {
    x: {
      before: Math.max(0, t.left - e.left),
      after: Math.max(0, e.right - t.right)
    },
    y: {
      before: Math.max(0, t.top - e.top),
      after: Math.max(0, e.bottom - t.bottom)
    }
  };
}
function RT(e) {
  return Array.isArray(e) ? new wo({
    x: e[0],
    y: e[1],
    width: 0,
    height: 0
  }) : e.getBoundingClientRect();
}
function q3(e) {
  if (e === document.documentElement)
    return visualViewport ? new wo({
      x: visualViewport.scale > 1 ? 0 : visualViewport.offsetLeft,
      y: visualViewport.scale > 1 ? 0 : visualViewport.offsetTop,
      width: visualViewport.width * visualViewport.scale,
      height: visualViewport.height * visualViewport.scale
    }) : new wo({
      x: 0,
      y: 0,
      width: document.documentElement.clientWidth,
      height: document.documentElement.clientHeight
    });
  {
    const t = e.getBoundingClientRect();
    return new wo({
      x: t.x,
      y: t.y,
      width: e.clientWidth,
      height: e.clientHeight
    });
  }
}
function Lw(e) {
  const t = e.getBoundingClientRect(), n = getComputedStyle(e), a = n.transform;
  if (a) {
    let r, i, o, l, s;
    if (a.startsWith("matrix3d("))
      r = a.slice(9, -1).split(/, /), i = Number(r[0]), o = Number(r[5]), l = Number(r[12]), s = Number(r[13]);
    else if (a.startsWith("matrix("))
      r = a.slice(7, -1).split(/, /), i = Number(r[0]), o = Number(r[3]), l = Number(r[4]), s = Number(r[5]);
    else
      return new wo(t);
    const d = n.transformOrigin, u = t.x - l - (1 - i) * parseFloat(d), f = t.y - s - (1 - o) * parseFloat(d.slice(d.indexOf(" ") + 1)), h = i ? t.width / i : e.offsetWidth + 1, y = o ? t.height / o : e.offsetHeight + 1;
    return new wo({
      x: u,
      y: f,
      width: h,
      height: y
    });
  } else
    return new wo(t);
}
function Fl(e, t, n) {
  if (typeof e.animate > "u") return {
    finished: Promise.resolve()
  };
  let a;
  try {
    a = e.animate(t, n);
  } catch {
    return {
      finished: Promise.resolve()
    };
  }
  return typeof a.finished > "u" && (a.finished = new Promise((r) => {
    a.onfinish = () => {
      r(a);
    };
  })), a;
}
const e_ = /* @__PURE__ */ new WeakMap();
function H3(e, t) {
  Object.keys(t).forEach((n) => {
    if (Vw(n)) {
      const a = BT(n), r = e_.get(e);
      if (t[n] == null)
        r?.forEach((i) => {
          const [o, l] = i;
          o === a && (e.removeEventListener(a, l), r.delete(i));
        });
      else if (!r || ![...r].some((i) => i[0] === a && i[1] === t[n])) {
        e.addEventListener(a, t[n]);
        const i = r || /* @__PURE__ */ new Set();
        i.add([a, t[n]]), e_.has(e) || e_.set(e, i);
      }
    } else
      t[n] == null ? e.removeAttribute(n) : e.setAttribute(n, t[n]);
  });
}
function z3(e, t) {
  Object.keys(t).forEach((n) => {
    if (Vw(n)) {
      const a = BT(n), r = e_.get(e);
      r?.forEach((i) => {
        const [o, l] = i;
        o === a && (e.removeEventListener(a, l), r.delete(i));
      });
    } else
      e.removeAttribute(n);
  });
}
const Yc = 2.4, eC = 0.2126729, tC = 0.7151522, nC = 0.072175, W3 = 0.55, K3 = 0.58, j3 = 0.57, Y3 = 0.62, Ih = 0.03, aC = 1.45, G3 = 5e-4, Q3 = 1.25, J3 = 1.25, rC = 0.078, iC = 12.82051282051282, Eh = 0.06, oC = 1e-3;
function sC(e, t) {
  const n = (e.r / 255) ** Yc, a = (e.g / 255) ** Yc, r = (e.b / 255) ** Yc, i = (t.r / 255) ** Yc, o = (t.g / 255) ** Yc, l = (t.b / 255) ** Yc;
  let s = n * eC + a * tC + r * nC, d = i * eC + o * tC + l * nC;
  if (s <= Ih && (s += (Ih - s) ** aC), d <= Ih && (d += (Ih - d) ** aC), Math.abs(d - s) < G3) return 0;
  let u;
  if (d > s) {
    const f = (d ** W3 - s ** K3) * Q3;
    u = f < oC ? 0 : f < rC ? f - f * iC * Eh : f - Eh;
  } else {
    const f = (d ** Y3 - s ** j3) * J3;
    u = f > -oC ? 0 : f > -rC ? f - f * iC * Eh : f + Eh;
  }
  return u * 100;
}
function FT(e, t) {
  t = Array.isArray(t) ? t.slice(0, -1).map((n) => `'${n}'`).join(", ") + ` or '${t.at(-1)}'` : `'${t}'`;
}
const x_ = 0.20689655172413793, X3 = (e) => e > x_ ** 3 ? Math.cbrt(e) : e / (3 * x_ ** 2) + 4 / 29, Z3 = (e) => e > x_ ? e ** 3 : 3 * x_ ** 2 * (e - 4 / 29);
function NT(e) {
  const t = X3, n = t(e[1]);
  return [116 * n - 16, 500 * (t(e[0] / 0.95047) - n), 200 * (n - t(e[2] / 1.08883))];
}
function UT(e) {
  const t = Z3, n = (e[0] + 16) / 116;
  return [t(n + e[1] / 500) * 0.95047, t(n), t(n - e[2] / 200) * 1.08883];
}
const e4 = [[3.2406, -1.5372, -0.4986], [-0.9689, 1.8758, 0.0415], [0.0557, -0.204, 1.057]], t4 = (e) => e <= 31308e-7 ? e * 12.92 : 1.055 * e ** (1 / 2.4) - 0.055, n4 = [[0.4124, 0.3576, 0.1805], [0.2126, 0.7152, 0.0722], [0.0193, 0.1192, 0.9505]], a4 = (e) => e <= 0.04045 ? e / 12.92 : ((e + 0.055) / 1.055) ** 2.4;
function $T(e) {
  const t = Array(3), n = t4, a = e4;
  for (let r = 0; r < 3; ++r)
    t[r] = Math.round(Dn(n(a[r][0] * e[0] + a[r][1] * e[1] + a[r][2] * e[2])) * 255);
  return {
    r: t[0],
    g: t[1],
    b: t[2]
  };
}
function Rw(e) {
  let {
    r: t,
    g: n,
    b: a
  } = e;
  const r = [0, 0, 0], i = a4, o = n4;
  t = i(t / 255), n = i(n / 255), a = i(a / 255);
  for (let l = 0; l < 3; ++l)
    r[l] = o[l][0] * t + o[l][1] * n + o[l][2] * a;
  return r;
}
function Yy(e) {
  return !!e && /^(#|var\(--|(rgb|hsl)a?\()/.test(e);
}
function r4(e) {
  return Yy(e) && !/^((rgb|hsl)a?\()?var\(--/.test(e);
}
const lC = /^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/, i4 = {
  rgb: (e, t, n, a) => ({
    r: e,
    g: t,
    b: n,
    a
  }),
  rgba: (e, t, n, a) => ({
    r: e,
    g: t,
    b: n,
    a
  }),
  hsl: (e, t, n, a) => cC({
    h: e,
    s: t,
    l: n,
    a
  }),
  hsla: (e, t, n, a) => cC({
    h: e,
    s: t,
    l: n,
    a
  }),
  hsv: (e, t, n, a) => So({
    h: e,
    s: t,
    v: n,
    a
  }),
  hsva: (e, t, n, a) => So({
    h: e,
    s: t,
    v: n,
    a
  })
};
function ui(e) {
  if (typeof e == "number")
    return {
      r: (e & 16711680) >> 16,
      g: (e & 65280) >> 8,
      b: e & 255
    };
  if (typeof e == "string" && lC.test(e)) {
    const {
      groups: t
    } = e.match(lC), {
      fn: n,
      values: a
    } = t, r = a.split(/,\s*|\s*\/\s*|\s+/).map((i, o) => i.endsWith("%") || // unitless slv are %
    o > 0 && o < 3 && ["hsl", "hsla", "hsv", "hsva"].includes(n) ? parseFloat(i) / 100 : parseFloat(i));
    return i4[n](...r);
  } else if (typeof e == "string") {
    let t = e.startsWith("#") ? e.slice(1) : e;
    return [3, 4].includes(t.length) ? t = t.split("").map((n) => n + n).join("") : [6, 8].includes(t.length), WT(t);
  } else if (typeof e == "object") {
    if (Rl(e, ["r", "g", "b"]))
      return e;
    if (Rl(e, ["h", "s", "l"]))
      return So(Fw(e));
    if (Rl(e, ["h", "s", "v"]))
      return So(e);
  }
  throw new TypeError(`Invalid color: ${e == null ? e : String(e) || e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`);
}
function So(e) {
  const {
    h: t,
    s: n,
    v: a,
    a: r
  } = e, i = (l) => {
    const s = (l + t / 60) % 6;
    return a - a * n * Math.max(Math.min(s, 4 - s, 1), 0);
  }, o = [i(5), i(3), i(1)].map((l) => Math.round(l * 255));
  return {
    r: o[0],
    g: o[1],
    b: o[2],
    a: r
  };
}
function cC(e) {
  return So(Fw(e));
}
function Wf(e) {
  if (!e) return {
    h: 0,
    s: 1,
    v: 1,
    a: 1
  };
  const t = e.r / 255, n = e.g / 255, a = e.b / 255, r = Math.max(t, n, a), i = Math.min(t, n, a);
  let o = 0;
  r !== i && (r === t ? o = 60 * (0 + (n - a) / (r - i)) : r === n ? o = 60 * (2 + (a - t) / (r - i)) : r === a && (o = 60 * (4 + (t - n) / (r - i)))), o < 0 && (o = o + 360);
  const l = r === 0 ? 0 : (r - i) / r, s = [o, l, r];
  return {
    h: s[0],
    s: s[1],
    v: s[2],
    a: e.a
  };
}
function Gy(e) {
  const {
    h: t,
    s: n,
    v: a,
    a: r
  } = e, i = a - a * n / 2, o = i === 1 || i === 0 ? 0 : (a - i) / Math.min(i, 1 - i);
  return {
    h: t,
    s: o,
    l: i,
    a: r
  };
}
function Fw(e) {
  const {
    h: t,
    s: n,
    l: a,
    a: r
  } = e, i = a + n * Math.min(a, 1 - a), o = i === 0 ? 0 : 2 - 2 * a / i;
  return {
    h: t,
    s: o,
    v: i,
    a: r
  };
}
function qT(e) {
  let {
    r: t,
    g: n,
    b: a,
    a: r
  } = e;
  return r === void 0 ? `rgb(${t}, ${n}, ${a})` : `rgba(${t}, ${n}, ${a}, ${r})`;
}
function HT(e) {
  return qT(So(e));
}
function Ph(e) {
  const t = Math.round(e).toString(16);
  return ("00".substr(0, 2 - t.length) + t).toUpperCase();
}
function zT(e) {
  let {
    r: t,
    g: n,
    b: a,
    a: r
  } = e;
  return `#${[Ph(t), Ph(n), Ph(a), r !== void 0 ? Ph(Math.round(r * 255)) : ""].join("")}`;
}
function WT(e) {
  e = s4(e);
  let [t, n, a, r] = V3(e, 2).map((i) => parseInt(i, 16));
  return r = r === void 0 ? r : r / 255, {
    r: t,
    g: n,
    b: a,
    a: r
  };
}
function o4(e) {
  const t = WT(e);
  return Wf(t);
}
function KT(e) {
  return zT(So(e));
}
function s4(e) {
  return e.startsWith("#") && (e = e.slice(1)), e = e.replace(/([^0-9a-f])/gi, "F"), (e.length === 3 || e.length === 4) && (e = e.split("").map((t) => t + t).join("")), e.length !== 6 && (e = jS(jS(e, 6), 8, "F")), e;
}
function l4(e, t) {
  const n = NT(Rw(e));
  return n[0] = n[0] + t * 10, $T(UT(n));
}
function c4(e, t) {
  const n = NT(Rw(e));
  return n[0] = n[0] - t * 10, $T(UT(n));
}
function Qy(e) {
  const t = ui(e);
  return Rw(t)[1];
}
function u4(e, t) {
  const n = Qy(e), a = Qy(t), r = Math.max(n, a), i = Math.min(n, a);
  return (r + 0.05) / (i + 0.05);
}
function jT(e) {
  const t = Math.abs(sC(ui(0), ui(e)));
  return Math.abs(sC(ui(16777215), ui(e))) > Math.min(t, 50) ? "#fff" : "#000";
}
function Be(e, t) {
  return (n) => Object.keys(e).reduce((a, r) => {
    const o = typeof e[r] == "object" && e[r] != null && !Array.isArray(e[r]) ? e[r] : {
      type: e[r]
    };
    return n && r in n ? a[r] = {
      ...o,
      default: n[r]
    } : a[r] = o, t && !a[r].source && (a[r].source = t), a;
  }, {});
}
const pt = Be({
  class: [String, Array, Object],
  style: {
    type: [String, Array, Object],
    default: null
  }
}, "component");
function ya(e, t) {
  const n = Io();
  if (!n)
    throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);
  return n;
}
function Po() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "composables";
  const t = ya(e).type;
  return Hl(t?.aliasName || t?.name);
}
function d4(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : ya("injectSelf");
  const {
    provides: n
  } = t;
  if (n && e in n)
    return n[e];
}
const Tu = Symbol.for("vuetify:defaults");
function f4(e) {
  return be(e);
}
function Nw() {
  const e = Gt(Tu);
  if (!e) throw new Error("[Vuetify] Could not find defaults instance");
  return e;
}
function aa(e, t) {
  const n = Nw(), a = be(e), r = W(() => {
    if (fe(t?.disabled)) return n.value;
    const o = fe(t?.scoped), l = fe(t?.reset), s = fe(t?.root);
    if (a.value == null && !(o || l || s)) return n.value;
    let d = Sr(a.value, {
      prev: n.value
    });
    if (o) return d;
    if (l || s) {
      const u = Number(l || 1 / 0);
      for (let f = 0; f <= u && !(!d || !("prev" in d)); f++)
        d = d.prev;
      return d && typeof s == "string" && s in d && (d = Sr(Sr(d, {
        prev: d
      }), d[s])), d;
    }
    return d.prev ? Sr(d.prev, d) : d;
  });
  return Ln(Tu, r), r;
}
function m4(e, t) {
  return e.props && (typeof e.props[t] < "u" || typeof e.props[Hl(t)] < "u");
}
function h4() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, t = arguments.length > 1 ? arguments[1] : void 0, n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Nw();
  const a = ya("useDefaults");
  if (t = t ?? a.type.name ?? a.type.__name, !t)
    throw new Error("[Vuetify] Could not determine component name");
  const r = W(() => n.value?.[e._as ?? t]), i = new Proxy(e, {
    get(s, d) {
      const u = Reflect.get(s, d);
      if (d === "class" || d === "style")
        return [r.value?.[d], u].filter((y) => y != null);
      if (m4(a.vnode, d)) return u;
      const f = r.value?.[d];
      if (f !== void 0) return f;
      const h = n.value?.global?.[d];
      return h !== void 0 ? h : u;
    }
  }), o = rt();
  na(() => {
    if (r.value) {
      const s = Object.entries(r.value).filter((d) => {
        let [u] = d;
        return u.startsWith(u[0].toUpperCase());
      });
      o.value = s.length ? Object.fromEntries(s) : void 0;
    } else
      o.value = void 0;
  });
  function l() {
    const s = d4(Tu, a);
    Ln(Tu, W(() => o.value ? Sr(s?.value ?? {}, o.value) : s?.value));
  }
  return {
    props: i,
    provideSubDefaults: l
  };
}
function vi(e) {
  if (e._setup = e._setup ?? e.setup, !e.name)
    return e;
  if (e._setup) {
    e.props = Be(e.props ?? {}, e.name)();
    const t = Object.keys(e.props).filter((n) => n !== "class" && n !== "style");
    e.filterProps = function(a) {
      return us(a, t);
    }, e.props._as = String, e.setup = function(a, r) {
      const i = Nw();
      if (!i.value) return e._setup(a, r);
      const {
        props: o,
        provideSubDefaults: l
      } = h4(a, a._as ?? e.name, i), s = e._setup(o, r);
      return l(), s;
    };
  }
  return e;
}
function We() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
  return (t) => (e ? vi : za)(t);
}
function _4(e, t) {
  return t.props = e, t;
}
function ds(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "div", n = arguments.length > 2 ? arguments[2] : void 0;
  return We()({
    name: n ?? To(Ur(e.replace(/__/g, "-"))),
    props: {
      tag: {
        type: String,
        default: t
      },
      ...pt()
    },
    setup(a, r) {
      let {
        slots: i
      } = r;
      return () => Eo(a.tag, {
        class: [e, a.class],
        style: a.style
      }, i.default?.());
    }
  });
}
function YT(e) {
  if (typeof e.getRootNode != "function") {
    for (; e.parentNode; ) e = e.parentNode;
    return e !== document ? null : document;
  }
  const t = e.getRootNode();
  return t !== document && t.getRootNode({
    composed: !0
  }) !== document ? null : t;
}
const wf = "cubic-bezier(0.4, 0, 0.2, 1)", v4 = "cubic-bezier(0.0, 0, 0.2, 1)", p4 = "cubic-bezier(0.4, 0, 1, 1)", g4 = {
  linear: (e) => e,
  easeInQuad: (e) => e ** 2,
  easeOutQuad: (e) => e * (2 - e),
  easeInOutQuad: (e) => e < 0.5 ? 2 * e ** 2 : -1 + (4 - 2 * e) * e,
  easeInCubic: (e) => e ** 3,
  easeOutCubic: (e) => --e ** 3 + 1,
  easeInOutCubic: (e) => e < 0.5 ? 4 * e ** 3 : (e - 1) * (2 * e - 2) * (2 * e - 2) + 1,
  easeInQuart: (e) => e ** 4,
  easeOutQuart: (e) => 1 - --e ** 4,
  easeInOutQuart: (e) => e < 0.5 ? 8 * e ** 4 : 1 - 8 * --e ** 4,
  easeInQuint: (e) => e ** 5,
  easeOutQuint: (e) => 1 + --e ** 5,
  easeInOutQuint: (e) => e < 0.5 ? 16 * e ** 5 : 1 + 16 * --e ** 5
};
function uC(e, t, n) {
  return Object.keys(e).filter((a) => Vw(a) && a.endsWith(t)).reduce((a, r) => (a[r.slice(0, -t.length)] = (i) => e[r](i, n(i)), a), {});
}
function Uw(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
  for (; e; ) {
    if (t ? y4(e) : $w(e)) return e;
    e = e.parentElement;
  }
  return document.scrollingElement;
}
function T_(e, t) {
  const n = [];
  if (t && e && !t.contains(e)) return n;
  for (; e && ($w(e) && n.push(e), e !== t); )
    e = e.parentElement;
  return n;
}
function $w(e) {
  if (!e || e.nodeType !== Node.ELEMENT_NODE) return !1;
  const t = window.getComputedStyle(e), n = t.overflowY === "scroll" || t.overflowY === "auto" && e.scrollHeight > e.clientHeight, a = t.overflowX === "scroll" || t.overflowX === "auto" && e.scrollWidth > e.clientWidth;
  return n || a;
}
function y4(e) {
  if (!e || e.nodeType !== Node.ELEMENT_NODE) return !1;
  const t = window.getComputedStyle(e);
  return ["scroll", "auto"].includes(t.overflowY);
}
function b4(e) {
  let {
    depth: t,
    isLast: n,
    isLastGroup: a,
    leafLinks: r,
    separateRoots: i,
    parentIndentLines: o,
    variant: l
  } = e;
  if (!o || !t)
    return {
      leaf: void 0,
      node: void 0,
      children: o
    };
  if (l === "simple")
    return {
      leaf: [...o, "line"],
      node: [...o, "line"],
      children: [...o, "line"]
    };
  const s = n && (!a || i || t > 1);
  return {
    leaf: [...o, s ? "last-leaf" : "leaf", ...r ? ["leaf-link"] : []],
    node: [...o, s ? "last-leaf" : "leaf"],
    children: [...o, s ? "none" : "line"]
  };
}
function w4(e) {
  for (; e; ) {
    if (window.getComputedStyle(e).position === "fixed")
      return !0;
    e = e.offsetParent;
  }
  return !1;
}
function Ye(e) {
  const t = ya("useRender");
  t.render = e;
}
function wt(e, t, n) {
  let a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : (f) => f, r = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : (f) => f;
  const i = ya("useProxiedModel"), o = be(e[t] !== void 0 ? e[t] : n), l = Hl(t), d = W(l !== t ? () => (e[t], !!((i.vnode.props?.hasOwnProperty(t) || i.vnode.props?.hasOwnProperty(l)) && (i.vnode.props?.hasOwnProperty(`onUpdate:${t}`) || i.vnode.props?.hasOwnProperty(`onUpdate:${l}`)))) : () => (e[t], !!(i.vnode.props?.hasOwnProperty(t) && i.vnode.props?.hasOwnProperty(`onUpdate:${t}`))));
  Ar(() => !d.value, () => {
    tt(() => e[t], (f) => {
      o.value = f;
    });
  });
  const u = W({
    get() {
      const f = e[t];
      return a(d.value ? f : o.value);
    },
    set(f) {
      const h = r(f), y = Ot(d.value ? e[t] : o.value);
      y === h || a(y) === f || (o.value = h, i?.emit(`update:${t}`, h));
    }
  });
  return Object.defineProperty(u, "externalValue", {
    get: () => d.value ? e[t] : o.value
  }), u;
}
const k4 = {
  badge: "Badge",
  open: "Open",
  close: "Close",
  dismiss: "Dismiss",
  confirmEdit: {
    ok: "OK",
    cancel: "Cancel"
  },
  dataIterator: {
    noResultsText: "No matching records found",
    loadingText: "Loading items..."
  },
  dataTable: {
    itemsPerPageText: "Rows per page:",
    ariaLabel: {
      sortDescending: "Sorted descending.",
      sortAscending: "Sorted ascending.",
      sortNone: "Not sorted.",
      activateNone: "Activate to remove sorting.",
      activateDescending: "Activate to sort descending.",
      activateAscending: "Activate to sort ascending."
    },
    sortBy: "Sort by"
  },
  dataFooter: {
    itemsPerPageText: "Items per page:",
    itemsPerPageAll: "All",
    nextPage: "Next page",
    prevPage: "Previous page",
    firstPage: "First page",
    lastPage: "Last page",
    pageText: "{0}-{1} of {2}"
  },
  dateRangeInput: {
    divider: "to"
  },
  datePicker: {
    itemsSelected: "{0} selected",
    range: {
      title: "Select dates",
      header: "Enter dates"
    },
    title: "Select date",
    header: "Enter date",
    input: {
      placeholder: "Enter date"
    },
    ariaLabel: {
      previousMonth: "Previous month",
      nextMonth: "Next month",
      selectYear: "Select year",
      selectDate: "{0}",
      // Full date format
      currentDate: "Today, {0}"
    }
  },
  noDataText: "No data available",
  carousel: {
    prev: "Previous visual",
    next: "Next visual",
    ariaLabel: {
      delimiter: "Carousel slide {0} of {1}"
    }
  },
  calendar: {
    moreEvents: "{0} more",
    today: "Today"
  },
  input: {
    clear: "Clear {0}",
    prependAction: "{0} prepended action",
    appendAction: "{0} appended action",
    otp: "Please enter OTP character {0}"
  },
  fileInput: {
    counter: "{0} files",
    counterSize: "{0} files ({1} in total)"
  },
  fileUpload: {
    title: "Drag and drop files here",
    divider: "or",
    browse: "Browse Files"
  },
  timePicker: {
    am: "AM",
    pm: "PM",
    title: "Select Time"
  },
  pagination: {
    ariaLabel: {
      root: "Pagination Navigation",
      next: "Next page",
      previous: "Previous page",
      page: "Go to page {0}",
      currentPage: "Page {0}, Current page",
      first: "First page",
      last: "Last page"
    }
  },
  stepper: {
    next: "Next",
    prev: "Previous"
  },
  rating: {
    ariaLabel: {
      item: "Rating {0} of {1}"
    }
  },
  loading: "Loading...",
  infiniteScroll: {
    loadMore: "Load more",
    empty: "No more"
  },
  rules: {
    required: "This field is required",
    email: "Please enter a valid email",
    number: "This field can only contain numbers",
    integer: "This field can only contain integer values",
    capital: "This field can only contain uppercase letters",
    maxLength: "You must enter a maximum of {0} characters",
    minLength: "You must enter a minimum of {0} characters",
    strictLength: "The length of the entered field is invalid",
    exclude: "The {0} character is not allowed",
    notEmpty: "Please choose at least one value",
    pattern: "Invalid format"
  },
  hotkey: {
    then: "then",
    ctrl: "Ctrl",
    command: "Command",
    space: "Space",
    shift: "Shift",
    alt: "Alt",
    enter: "Enter",
    escape: "Escape",
    upArrow: "Up Arrow",
    downArrow: "Down Arrow",
    leftArrow: "Left Arrow",
    rightArrow: "Right Arrow",
    backspace: "Backspace",
    option: "Option",
    plus: "plus",
    shortcut: "Keyboard shortcut: {0}"
  },
  video: {
    play: "Play",
    pause: "Pause",
    seek: "Seek",
    volume: "Volume",
    showVolume: "Show volume control",
    mute: "Mute",
    unmute: "Unmute",
    enterFullscreen: "Full screen",
    exitFullscreen: "Exit full screen"
  },
  colorPicker: {
    ariaLabel: {
      eyedropper: "Select color with eyedropper",
      hueSlider: "Hue",
      alphaSlider: "Alpha",
      redInput: "Red value",
      greenInput: "Green value",
      blueInput: "Blue value",
      alphaInput: "Alpha value",
      hueInput: "Hue value",
      saturationInput: "Saturation value",
      lightnessInput: "Lightness value",
      hexInput: "HEX value",
      hexaInput: "HEX with alpha value",
      changeFormat: "Change color format"
    }
  }
}, dC = "$vuetify.", fC = (e, t) => e.replace(/\{(\d+)\}/g, (n, a) => String(t[Number(a)])), GT = (e, t, n) => function(a) {
  for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
    i[o - 1] = arguments[o];
  if (!a.startsWith(dC))
    return fC(a, i);
  const l = a.replace(dC, ""), s = e.value && n.value[e.value], d = t.value && n.value[t.value];
  let u = Xl(s, l, null);
  return u || (`${a}${e.value}`, u = Xl(d, l, null)), u || (u = a), typeof u != "string" && (u = a), fC(u, i);
};
function qw(e, t) {
  return (n, a) => new Intl.NumberFormat([e.value, t.value], a).format(n);
}
function QT(e, t) {
  return qw(e, t)(0.1).includes(",") ? "," : ".";
}
function zg(e, t, n) {
  const a = wt(e, t, e[t] ?? n.value);
  return a.value = e[t] ?? n.value, tt(n, (r) => {
    e[t] == null && (a.value = n.value);
  }), a;
}
function JT(e) {
  return (t) => {
    const n = zg(t, "locale", e.current), a = zg(t, "fallback", e.fallback), r = zg(t, "messages", e.messages);
    return {
      name: "vuetify",
      current: n,
      fallback: a,
      messages: r,
      decimalSeparator: ye(() => QT(n, a)),
      t: GT(n, a, r),
      n: qw(n, a),
      provide: JT({
        current: n,
        fallback: a,
        messages: r
      })
    };
  };
}
function S4(e) {
  const t = rt(e?.locale ?? "en"), n = rt(e?.fallback ?? "en"), a = be({
    en: k4,
    ...e?.messages
  });
  return {
    name: "vuetify",
    current: t,
    fallback: n,
    messages: a,
    decimalSeparator: ye(() => e?.decimalSeparator ?? QT(t, n)),
    t: GT(t, n, a),
    n: qw(t, n),
    provide: JT({
      current: t,
      fallback: n,
      messages: a
    })
  };
}
const Iu = Symbol.for("vuetify:locale");
function C4(e) {
  return e.name != null;
}
function A4(e) {
  const t = e?.adapter && C4(e?.adapter) ? e?.adapter : S4(e), n = I4(t, e);
  return {
    ...t,
    ...n
  };
}
function kn() {
  const e = Gt(Iu);
  if (!e) throw new Error("[Vuetify] Could not find injected locale instance");
  return e;
}
function x4(e) {
  const t = Gt(Iu);
  if (!t) throw new Error("[Vuetify] Could not find injected locale instance");
  const n = t.provide(e), a = E4(n, t.rtl, e), r = {
    ...n,
    ...a
  };
  return Ln(Iu, r), r;
}
function T4() {
  return {
    af: !1,
    ar: !0,
    bg: !1,
    ca: !1,
    ckb: !1,
    cs: !1,
    de: !1,
    el: !1,
    en: !1,
    es: !1,
    et: !1,
    fa: !0,
    fi: !1,
    fr: !1,
    hr: !1,
    hu: !1,
    he: !0,
    id: !1,
    it: !1,
    ja: !1,
    km: !1,
    ko: !1,
    lv: !1,
    lt: !1,
    nl: !1,
    no: !1,
    pl: !1,
    pt: !1,
    ro: !1,
    ru: !1,
    sk: !1,
    sl: !1,
    srCyrl: !1,
    srLatn: !1,
    sv: !1,
    th: !1,
    tr: !1,
    az: !1,
    uk: !1,
    vi: !1,
    zhHans: !1,
    zhHant: !1
  };
}
function I4(e, t) {
  const n = be(t?.rtl ?? T4()), a = W(() => n.value[e.current.value] ?? !1);
  return {
    isRtl: a,
    rtl: n,
    rtlClasses: ye(() => `v-locale--is-${a.value ? "rtl" : "ltr"}`)
  };
}
function E4(e, t, n) {
  const a = W(() => n.rtl ?? t.value[e.current.value] ?? !1);
  return {
    isRtl: a,
    rtl: t,
    rtlClasses: ye(() => `v-locale--is-${a.value ? "rtl" : "ltr"}`)
  };
}
function Na() {
  const e = Gt(Iu);
  if (!e) throw new Error("[Vuetify] Could not find injected rtl instance");
  return {
    isRtl: e.isRtl,
    rtlClasses: e.rtlClasses
  };
}
function Kf(e) {
  const t = e.slice(-2).toUpperCase();
  switch (!0) {
    case e === "GB-alt-variant":
      return {
        firstDay: 0,
        firstWeekSize: 4
      };
    case e === "001":
      return {
        firstDay: 1,
        firstWeekSize: 1
      };
    case `AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):
      return {
        firstDay: 0,
        firstWeekSize: 1
      };
    case `AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):
      return {
        firstDay: 1,
        firstWeekSize: 1
      };
    case `AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):
      return {
        firstDay: 1,
        firstWeekSize: 4
      };
    case "AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):
      return {
        firstDay: 6,
        firstWeekSize: 1
      };
    case t === "MV":
      return {
        firstDay: 5,
        firstWeekSize: 1
      };
    case t === "PT":
      return {
        firstDay: 0,
        firstWeekSize: 4
      };
    default:
      return null;
  }
}
function P4(e, t, n) {
  const a = [];
  let r = [];
  const i = XT(e), o = ZT(e), l = n ?? Kf(t)?.firstDay ?? 0, s = (i.getDay() - l + 7) % 7, d = (o.getDay() - l + 7) % 7;
  for (let u = 0; u < s; u++) {
    const f = new Date(i);
    f.setDate(f.getDate() - (s - u)), r.push(f);
  }
  for (let u = 1; u <= o.getDate(); u++) {
    const f = new Date(e.getFullYear(), e.getMonth(), u);
    r.push(f), r.length === 7 && (a.push(r), r = []);
  }
  for (let u = 1; u < 7 - d; u++) {
    const f = new Date(o);
    f.setDate(f.getDate() + u), r.push(f);
  }
  return r.length > 0 && a.push(r), a;
}
function Jy(e, t, n) {
  let a = (n ?? Kf(t)?.firstDay ?? 0) % 7;
  [0, 1, 2, 3, 4, 5, 6].includes(a) || (a = 0);
  const r = new Date(e);
  for (; r.getDay() !== a; )
    r.setDate(r.getDate() - 1);
  return r;
}
function O4(e, t) {
  const n = new Date(e), a = ((Kf(t)?.firstDay ?? 0) + 6) % 7;
  for (; n.getDay() !== a; )
    n.setDate(n.getDate() + 1);
  return n;
}
function XT(e) {
  return new Date(e.getFullYear(), e.getMonth(), 1);
}
function ZT(e) {
  return new Date(e.getFullYear(), e.getMonth() + 1, 0);
}
function D4(e) {
  const t = e.split("-").map(Number);
  return new Date(t[0], t[1] - 1, t[2]);
}
const B4 = /^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;
function eI(e) {
  if (e == null) return /* @__PURE__ */ new Date();
  if (e instanceof Date) return e;
  if (typeof e == "string") {
    let t;
    if (B4.test(e))
      return D4(e);
    if (t = Date.parse(e), !isNaN(t)) return new Date(t);
  }
  return null;
}
const mC = new Date(2e3, 0, 2);
function V4(e, t, n) {
  const a = t ?? Kf(e)?.firstDay ?? 0;
  return ci(7).map((r) => {
    const i = new Date(mC);
    return i.setDate(mC.getDate() + a + r), new Intl.DateTimeFormat(e, {
      weekday: n ?? "narrow"
    }).format(i);
  });
}
function M4(e, t, n, a) {
  const r = eI(e) ?? /* @__PURE__ */ new Date(), i = a?.[t];
  if (typeof i == "function")
    return i(r, t, n);
  let o = {};
  switch (t) {
    case "fullDate":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric"
      };
      break;
    case "fullDateWithWeekday":
      o = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric"
      };
      break;
    case "normalDate":
      const l = r.getDate(), s = new Intl.DateTimeFormat(n, {
        month: "long"
      }).format(r);
      return `${l} ${s}`;
    case "normalDateWithWeekday":
      o = {
        weekday: "short",
        day: "numeric",
        month: "short"
      };
      break;
    case "shortDate":
      o = {
        month: "short",
        day: "numeric"
      };
      break;
    case "year":
      o = {
        year: "numeric"
      };
      break;
    case "month":
      o = {
        month: "long"
      };
      break;
    case "monthShort":
      o = {
        month: "short"
      };
      break;
    case "monthAndYear":
      o = {
        month: "long",
        year: "numeric"
      };
      break;
    case "monthAndDate":
      o = {
        month: "long",
        day: "numeric"
      };
      break;
    case "weekday":
      o = {
        weekday: "long"
      };
      break;
    case "weekdayShort":
      o = {
        weekday: "short"
      };
      break;
    case "dayOfMonth":
      return new Intl.NumberFormat(n).format(r.getDate());
    case "hours12h":
      o = {
        hour: "numeric",
        hour12: !0
      };
      break;
    case "hours24h":
      o = {
        hour: "numeric",
        hour12: !1
      };
      break;
    case "minutes":
      o = {
        minute: "numeric"
      };
      break;
    case "seconds":
      o = {
        second: "numeric"
      };
      break;
    case "fullTime":
      o = {
        hour: "numeric",
        minute: "numeric"
      };
      break;
    case "fullTime12h":
      o = {
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      };
      break;
    case "fullTime24h":
      o = {
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      };
      break;
    case "fullDateTime":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric"
      };
      break;
    case "fullDateTime12h":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      };
      break;
    case "fullDateTime24h":
      o = {
        year: "numeric",
        month: "short",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      };
      break;
    case "keyboardDate":
      o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit"
      };
      break;
    case "keyboardDateTime":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric"
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    case "keyboardDateTime12h":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: !0
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    case "keyboardDateTime24h":
      return o = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: !1
      }, new Intl.DateTimeFormat(n, o).format(r).replace(/, /g, " ");
    default:
      o = i ?? {
        timeZone: "UTC",
        timeZoneName: "short"
      };
  }
  return new Intl.DateTimeFormat(n, o).format(r);
}
function L4(e, t) {
  const n = e.toJsDate(t), a = n.getFullYear(), r = YS(String(n.getMonth() + 1), 2, "0"), i = YS(String(n.getDate()), 2, "0");
  return `${a}-${r}-${i}`;
}
function R4(e) {
  const [t, n, a] = e.split("-").map(Number);
  return new Date(t, n - 1, a);
}
function F4(e, t) {
  const n = new Date(e);
  return n.setMinutes(n.getMinutes() + t), n;
}
function N4(e, t) {
  const n = new Date(e);
  return n.setHours(n.getHours() + t), n;
}
function t_(e, t) {
  const n = new Date(e);
  return n.setDate(n.getDate() + t), n;
}
function U4(e, t) {
  const n = new Date(e);
  return n.setDate(n.getDate() + t * 7), n;
}
function $4(e, t) {
  const n = new Date(e);
  return n.setDate(1), n.setMonth(n.getMonth() + t), n;
}
function Xy(e) {
  return e.getFullYear();
}
function q4(e) {
  return e.getMonth();
}
function H4(e, t, n, a) {
  const r = Kf(t), i = n ?? r?.firstDay ?? 0, o = a ?? r?.firstWeekSize ?? 1;
  function l(y) {
    const p = new Date(y, 0, 1);
    return 7 - Zy(p, Jy(p, t, i), "days");
  }
  let s = Xy(e);
  const d = t_(Jy(e, t, i), 6);
  s < Xy(d) && l(s + 1) >= o && s++;
  const u = new Date(s, 0, 1), f = l(s), h = f >= o ? t_(u, f - 7) : t_(u, f);
  return 1 + Zy(tI(e), E_(h), "weeks");
}
function z4(e) {
  return e.getDate();
}
function W4(e) {
  return new Date(e.getFullYear(), e.getMonth() + 1, 1);
}
function K4(e) {
  return new Date(e.getFullYear(), e.getMonth() - 1, 1);
}
function j4(e) {
  return e.getHours();
}
function Y4(e) {
  return e.getMinutes();
}
function G4(e) {
  return new Date(e.getFullYear(), 0, 1);
}
function Q4(e) {
  return new Date(e.getFullYear(), 11, 31);
}
function J4(e, t) {
  return I_(e, t[0]) && e8(e, t[1]);
}
function X4(e) {
  const t = new Date(e);
  return t instanceof Date && !isNaN(t.getTime());
}
function I_(e, t) {
  return e.getTime() > t.getTime();
}
function Z4(e, t) {
  return I_(E_(e), E_(t));
}
function e8(e, t) {
  return e.getTime() < t.getTime();
}
function hC(e, t) {
  return e.getTime() === t.getTime();
}
function t8(e, t) {
  return e.getDate() === t.getDate() && e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear();
}
function n8(e, t) {
  return e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear();
}
function a8(e, t) {
  return e.getFullYear() === t.getFullYear();
}
function Zy(e, t, n) {
  const a = new Date(e), r = new Date(t);
  switch (n) {
    case "years":
      return a.getFullYear() - r.getFullYear();
    case "quarters":
      return Math.floor((a.getMonth() - r.getMonth() + (a.getFullYear() - r.getFullYear()) * 12) / 4);
    case "months":
      return a.getMonth() - r.getMonth() + (a.getFullYear() - r.getFullYear()) * 12;
    case "weeks":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60 * 24 * 7));
    case "days":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60 * 24));
    case "hours":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60 * 60));
    case "minutes":
      return Math.floor((a.getTime() - r.getTime()) / (1e3 * 60));
    case "seconds":
      return Math.floor((a.getTime() - r.getTime()) / 1e3);
    default:
      return a.getTime() - r.getTime();
  }
}
function r8(e, t) {
  const n = new Date(e);
  return n.setHours(t), n;
}
function i8(e, t) {
  const n = new Date(e);
  return n.setMinutes(t), n;
}
function o8(e, t) {
  const n = new Date(e);
  return n.setMonth(t), n;
}
function s8(e, t) {
  const n = new Date(e);
  return n.setDate(t), n;
}
function l8(e, t) {
  const n = new Date(e);
  return n.setFullYear(t), n;
}
function E_(e) {
  return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0, 0);
}
function tI(e) {
  return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 23, 59, 59, 999);
}
class c8 {
  constructor(t) {
    this.locale = t.locale, this.formats = t.formats;
  }
  date(t) {
    return eI(t);
  }
  toJsDate(t) {
    return t;
  }
  toISO(t) {
    return L4(this, t);
  }
  parseISO(t) {
    return R4(t);
  }
  addMinutes(t, n) {
    return F4(t, n);
  }
  addHours(t, n) {
    return N4(t, n);
  }
  addDays(t, n) {
    return t_(t, n);
  }
  addWeeks(t, n) {
    return U4(t, n);
  }
  addMonths(t, n) {
    return $4(t, n);
  }
  getWeekArray(t, n) {
    const a = n !== void 0 ? Number(n) : void 0;
    return P4(t, this.locale, a);
  }
  startOfWeek(t, n) {
    const a = n !== void 0 ? Number(n) : void 0;
    return Jy(t, this.locale, a);
  }
  endOfWeek(t) {
    return O4(t, this.locale);
  }
  startOfMonth(t) {
    return XT(t);
  }
  endOfMonth(t) {
    return ZT(t);
  }
  format(t, n) {
    return M4(t, n, this.locale, this.formats);
  }
  isEqual(t, n) {
    return hC(t, n);
  }
  isValid(t) {
    return X4(t);
  }
  isWithinRange(t, n) {
    return J4(t, n);
  }
  isAfter(t, n) {
    return I_(t, n);
  }
  isAfterDay(t, n) {
    return Z4(t, n);
  }
  isBefore(t, n) {
    return !I_(t, n) && !hC(t, n);
  }
  isSameDay(t, n) {
    return t8(t, n);
  }
  isSameMonth(t, n) {
    return n8(t, n);
  }
  isSameYear(t, n) {
    return a8(t, n);
  }
  setMinutes(t, n) {
    return i8(t, n);
  }
  setHours(t, n) {
    return r8(t, n);
  }
  setMonth(t, n) {
    return o8(t, n);
  }
  setDate(t, n) {
    return s8(t, n);
  }
  setYear(t, n) {
    return l8(t, n);
  }
  getDiff(t, n, a) {
    return Zy(t, n, a);
  }
  getWeekdays(t, n) {
    const a = t !== void 0 ? Number(t) : void 0;
    return V4(this.locale, a, n);
  }
  getYear(t) {
    return Xy(t);
  }
  getMonth(t) {
    return q4(t);
  }
  getWeek(t, n, a) {
    const r = n !== void 0 ? Number(n) : void 0;
    return H4(t, this.locale, r, a);
  }
  getDate(t) {
    return z4(t);
  }
  getNextMonth(t) {
    return W4(t);
  }
  getPreviousMonth(t) {
    return K4(t);
  }
  getHours(t) {
    return j4(t);
  }
  getMinutes(t) {
    return Y4(t);
  }
  startOfDay(t) {
    return E_(t);
  }
  endOfDay(t) {
    return tI(t);
  }
  startOfYear(t) {
    return G4(t);
  }
  endOfYear(t) {
    return Q4(t);
  }
}
const nI = Symbol.for("vuetify:date-options"), _C = Symbol.for("vuetify:date-adapter");
function u8(e, t) {
  const n = Sr({
    adapter: c8,
    locale: {
      af: "af-ZA",
      // ar: '', # not the same value for all variants
      bg: "bg-BG",
      ca: "ca-ES",
      ckb: "",
      cs: "cs-CZ",
      de: "de-DE",
      el: "el-GR",
      en: "en-US",
      // es: '', # not the same value for all variants
      et: "et-EE",
      fa: "fa-IR",
      fi: "fi-FI",
      // fr: '', #not the same value for all variants
      hr: "hr-HR",
      hu: "hu-HU",
      he: "he-IL",
      id: "id-ID",
      it: "it-IT",
      ja: "ja-JP",
      ko: "ko-KR",
      lv: "lv-LV",
      lt: "lt-LT",
      nl: "nl-NL",
      no: "no-NO",
      pl: "pl-PL",
      pt: "pt-PT",
      ro: "ro-RO",
      ru: "ru-RU",
      sk: "sk-SK",
      sl: "sl-SI",
      srCyrl: "sr-SP",
      srLatn: "sr-SP",
      sv: "sv-SE",
      th: "th-TH",
      tr: "tr-TR",
      az: "az-AZ",
      uk: "uk-UA",
      vi: "vi-VN",
      zhHans: "zh-CN",
      zhHant: "zh-TW"
    }
  }, e);
  return {
    options: n,
    instance: aI(n, t)
  };
}
function d8(e, t, n) {
  const a = e.getDiff(e.endOfDay(n ?? t), e.startOfDay(t), "days"), r = [t];
  for (let i = 1; i < a; i++) {
    const o = e.addDays(t, i);
    r.push(o);
  }
  return n && r.push(e.endOfDay(n)), r;
}
function aI(e, t) {
  const n = Zn(typeof e.adapter == "function" ? new e.adapter({
    locale: e.locale[t.current.value] ?? t.current.value,
    formats: e.formats
  }) : e.adapter);
  return tt(t.current, (a) => {
    n.locale = e.locale[a] ?? a ?? n.locale;
  }), n;
}
function jf() {
  const e = Gt(nI);
  if (!e) throw new Error("[Vuetify] Could not find injected date options");
  const t = kn();
  return aI(e, t);
}
const mv = ["sm", "md", "lg", "xl", "xxl"], eb = Symbol.for("vuetify:display"), vC = {
  mobileBreakpoint: "lg",
  thresholds: {
    xs: 0,
    sm: 600,
    md: 960,
    lg: 1280,
    xl: 1920,
    xxl: 2560
  }
}, f8 = function() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : vC;
  return Sr(vC, e);
};
function pC(e) {
  return _n && !e ? window.innerWidth : typeof e == "object" && e.clientWidth || 0;
}
function gC(e) {
  return _n && !e ? window.innerHeight : typeof e == "object" && e.clientHeight || 0;
}
function yC(e) {
  const t = _n && !e ? window.navigator.userAgent : "ssr";
  function n(p) {
    return !!t.match(p);
  }
  const a = n(/android/i), r = n(/iphone|ipad|ipod/i), i = n(/cordova/i), o = n(/electron/i), l = n(/chrome/i), s = n(/edge/i), d = n(/firefox/i), u = n(/opera/i), f = n(/win/i), h = n(/mac/i), y = n(/linux/i);
  return {
    android: a,
    ios: r,
    cordova: i,
    electron: o,
    chrome: l,
    edge: s,
    firefox: d,
    opera: u,
    win: f,
    mac: h,
    linux: y,
    touch: I3,
    ssr: t === "ssr"
  };
}
function m8(e, t) {
  const {
    thresholds: n,
    mobileBreakpoint: a
  } = f8(e), r = rt(gC(t)), i = rt(yC(t)), o = Zn({}), l = rt(pC(t));
  function s() {
    r.value = gC(), l.value = pC();
  }
  function d() {
    s(), i.value = yC();
  }
  return na(() => {
    const u = l.value < n.sm, f = l.value < n.md && !u, h = l.value < n.lg && !(f || u), y = l.value < n.xl && !(h || f || u), p = l.value < n.xxl && !(y || h || f || u), w = l.value >= n.xxl, b = u ? "xs" : f ? "sm" : h ? "md" : y ? "lg" : p ? "xl" : "xxl", v = typeof a == "number" ? a : n[a], g = l.value < v;
    o.xs = u, o.sm = f, o.md = h, o.lg = y, o.xl = p, o.xxl = w, o.smAndUp = !u, o.mdAndUp = !(u || f), o.lgAndUp = !(u || f || h), o.xlAndUp = !(u || f || h || y), o.smAndDown = !(h || y || p || w), o.mdAndDown = !(y || p || w), o.lgAndDown = !(p || w), o.xlAndDown = !w, o.name = b, o.height = r.value, o.width = l.value, o.mobile = g, o.mobileBreakpoint = a, o.platform = i.value, o.thresholds = n;
  }), _n && (window.addEventListener("resize", s, {
    passive: !0
  }), Fa(() => {
    window.removeEventListener("resize", s);
  }, !0)), {
    ...zu(o),
    update: d,
    ssr: !!t
  };
}
const dc = Be({
  mobile: {
    type: Boolean,
    default: !1
  },
  mobileBreakpoint: [Number, String]
}, "display");
function pi() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
    mobile: null
  }, t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  const n = Gt(eb);
  if (!n) throw new Error("Could not find Vuetify display injection");
  const a = W(() => e.mobile ? !0 : typeof e.mobileBreakpoint == "number" ? n.width.value < e.mobileBreakpoint : e.mobileBreakpoint ? n.width.value < n.thresholds.value[e.mobileBreakpoint] : e.mobile === null ? n.mobile.value : !1), r = ye(() => t ? {
    [`${t}--mobile`]: a.value
  } : {});
  return {
    ...n,
    displayClasses: r,
    mobile: a
  };
}
const rI = Symbol.for("vuetify:goto");
function iI() {
  return {
    container: void 0,
    duration: 300,
    layout: !1,
    offset: 0,
    easing: "easeInOutCubic",
    patterns: g4
  };
}
function h8(e) {
  return Hw(e) ?? (document.scrollingElement || document.body);
}
function Hw(e) {
  return typeof e == "string" ? document.querySelector(e) : Bw(e);
}
function Wg(e, t, n) {
  if (typeof e == "number") return t && n ? -e : e;
  let a = Hw(e), r = 0;
  for (; a; )
    r += t ? a.offsetLeft : a.offsetTop, a = a.offsetParent;
  return r;
}
function _8(e, t) {
  return {
    rtl: t.isRtl,
    options: Sr(iI(), e)
  };
}
async function bC(e, t, n, a) {
  const r = n ? "scrollLeft" : "scrollTop", i = Sr(a?.options ?? iI(), t), o = a?.rtl.value, l = (typeof e == "number" ? e : Hw(e)) ?? 0, s = i.container === "parent" && l instanceof HTMLElement ? l.parentElement : h8(i.container), d = typeof i.easing == "function" ? i.easing : i.patterns[i.easing];
  if (!d) throw new TypeError(`Easing function "${i.easing}" not found.`);
  let u;
  if (typeof l == "number")
    u = Wg(l, n, o);
  else if (u = Wg(l, n, o) - Wg(s, n, o), i.layout) {
    const p = window.getComputedStyle(l).getPropertyValue("--v-layout-top");
    p && (u -= parseInt(p, 10));
  }
  u += i.offset, u = p8(s, u, !!o, !!n);
  const f = s[r] ?? 0;
  if (u === f) return Promise.resolve(u);
  const h = performance.now();
  return new Promise((y) => requestAnimationFrame(function p(w) {
    const v = (w - h) / i.duration, g = Math.floor(f + (u - f) * d(Dn(v, 0, 1)));
    if (s[r] = g, v >= 1 && Math.abs(g - s[r]) < 10)
      return y(u);
    if (v > 2)
      return y(s[r]);
    requestAnimationFrame(p);
  }));
}
function v8() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const t = Gt(rI), {
    isRtl: n
  } = Na();
  if (!t) throw new Error("[Vuetify] Could not find injected goto instance");
  const a = {
    ...t,
    // can be set via VLocaleProvider
    rtl: ye(() => t.rtl.value || n.value)
  };
  async function r(i, o) {
    return bC(i, Sr(e, o), !1, a);
  }
  return r.horizontal = async (i, o) => bC(i, Sr(e, o), !0, a), r;
}
function p8(e, t, n, a) {
  const {
    scrollWidth: r,
    scrollHeight: i
  } = e, [o, l] = e === document.scrollingElement ? [window.innerWidth, window.innerHeight] : [e.offsetWidth, e.offsetHeight];
  let s, d;
  return a ? n ? (s = -(r - o), d = 0) : (s = 0, d = r - o) : (s = 0, d = i + -l), Dn(t, s, d);
}
const g8 = {
  collapse: "mdi-chevron-up",
  complete: "mdi-check",
  cancel: "mdi-close-circle",
  close: "mdi-close",
  delete: "mdi-close-circle",
  // delete (e.g. v-chip close)
  clear: "mdi-close-circle",
  success: "mdi-check-circle",
  info: "mdi-information",
  warning: "mdi-alert-circle",
  error: "mdi-close-circle",
  prev: "mdi-chevron-left",
  next: "mdi-chevron-right",
  checkboxOn: "mdi-checkbox-marked",
  checkboxOff: "mdi-checkbox-blank-outline",
  checkboxIndeterminate: "mdi-minus-box",
  delimiter: "mdi-circle",
  // for carousel
  sortAsc: "mdi-arrow-up",
  sortDesc: "mdi-arrow-down",
  expand: "mdi-chevron-down",
  menu: "mdi-menu",
  subgroup: "mdi-menu-down",
  dropdown: "mdi-menu-down",
  radioOn: "mdi-radiobox-marked",
  radioOff: "mdi-radiobox-blank",
  edit: "mdi-pencil",
  ratingEmpty: "mdi-star-outline",
  ratingFull: "mdi-star",
  ratingHalf: "mdi-star-half-full",
  loading: "mdi-cached",
  first: "mdi-page-first",
  last: "mdi-page-last",
  unfold: "mdi-unfold-more-horizontal",
  file: "mdi-paperclip",
  plus: "mdi-plus",
  minus: "mdi-minus",
  calendar: "mdi-calendar",
  treeviewCollapse: "mdi-menu-down",
  treeviewExpand: "mdi-menu-right",
  eyeDropper: "mdi-eyedropper",
  upload: "mdi-cloud-upload",
  color: "mdi-palette",
  command: "mdi-apple-keyboard-command",
  ctrl: "mdi-apple-keyboard-control",
  space: "mdi-keyboard-space",
  shift: "mdi-apple-keyboard-shift",
  alt: "mdi-apple-keyboard-option",
  enter: "mdi-keyboard-return",
  arrowup: "mdi-arrow-up",
  arrowdown: "mdi-arrow-down",
  arrowleft: "mdi-arrow-left",
  arrowright: "mdi-arrow-right",
  backspace: "mdi-backspace",
  play: "mdi-play",
  pause: "mdi-pause",
  fullscreen: "mdi-fullscreen",
  fullscreenExit: "mdi-fullscreen-exit",
  volumeHigh: "mdi-volume-high",
  volumeMedium: "mdi-volume-medium",
  volumeLow: "mdi-volume-low",
  volumeOff: "mdi-volume-variant-off"
}, y8 = {
  // Not using mergeProps here, functional components merge props by default (?)
  component: (e) => Eo(Ww, {
    ...e,
    class: "mdi"
  })
}, St = [String, Function, Object, Array], tb = Symbol.for("vuetify:icons"), hv = Be({
  icon: {
    type: St
  },
  // Could not remove this and use makeTagProps, types complained because it is not required
  tag: {
    type: [String, Object, Function],
    required: !0
  }
}, "icon"), nb = We()({
  name: "VComponentIcon",
  props: hv(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return () => {
      const a = e.icon;
      return _(e.tag, null, {
        default: () => [e.icon ? _(a, null, null) : n.default?.()]
      });
    };
  }
}), zw = vi({
  name: "VSvgIcon",
  inheritAttrs: !1,
  props: hv(),
  setup(e, t) {
    let {
      attrs: n
    } = t;
    return () => _(e.tag, Fe(n, {
      style: null
    }), {
      default: () => [T("svg", {
        class: "v-icon__svg",
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: "0 0 24 24",
        role: "img",
        "aria-hidden": "true"
      }, [Array.isArray(e.icon) ? e.icon.map((a) => Array.isArray(a) ? T("path", {
        d: a[0],
        "fill-opacity": a[1]
      }, null) : T("path", {
        d: a
      }, null)) : T("path", {
        d: e.icon
      }, null)])]
    });
  }
}), b8 = vi({
  name: "VLigatureIcon",
  props: hv(),
  setup(e) {
    return () => _(e.tag, null, {
      default: () => [e.icon]
    });
  }
}), Ww = vi({
  name: "VClassIcon",
  props: hv(),
  setup(e) {
    return () => _(e.tag, {
      class: Ae(e.icon)
    }, null);
  }
});
function w8() {
  return {
    svg: {
      component: zw
    },
    class: {
      component: Ww
    }
  };
}
function k8(e) {
  const t = w8(), n = e?.defaultSet ?? "mdi";
  return n === "mdi" && !t.mdi && (t.mdi = y8), Sr({
    defaultSet: n,
    sets: t,
    aliases: {
      ...g8,
      /* eslint-disable max-len */
      vuetify: ["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z", ["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z", 0.6]],
      "vuetify-outline": "svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z",
      "vuetify-play": ["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z", ["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z", 0.6]]
      /* eslint-enable max-len */
    }
  }, e);
}
const S8 = (e) => {
  const t = Gt(tb);
  if (!t) throw new Error("Missing Vuetify Icons provide!");
  return {
    iconData: W(() => {
      const a = ji(e);
      if (!a) return {
        component: nb
      };
      let r = a;
      if (typeof r == "string" && (r = r.trim(), r.startsWith("$") && (r = t.aliases?.[r.slice(1)])), Array.isArray(r))
        return {
          component: zw,
          icon: r
        };
      if (typeof r != "string")
        return {
          component: nb,
          icon: r
        };
      const i = Object.keys(t.sets).find((s) => typeof r == "string" && r.startsWith(`${s}:`)), o = i ? r.slice(i.length + 1) : r;
      return {
        component: t.sets[i ?? t.defaultSet].component,
        icon: o
      };
    })
  };
}, kf = Symbol.for("vuetify:theme"), rn = Be({
  theme: String
}, "theme");
function wC() {
  return {
    defaultTheme: "light",
    prefix: "v-",
    variations: {
      colors: [],
      lighten: 0,
      darken: 0
    },
    themes: {
      light: {
        dark: !1,
        colors: {
          background: "#FFFFFF",
          surface: "#FFFFFF",
          "surface-bright": "#FFFFFF",
          "surface-light": "#EEEEEE",
          "surface-variant": "#424242",
          "on-surface-variant": "#EEEEEE",
          primary: "#1867C0",
          "primary-darken-1": "#1F5592",
          secondary: "#48A9A6",
          "secondary-darken-1": "#018786",
          error: "#B00020",
          info: "#2196F3",
          success: "#4CAF50",
          warning: "#FB8C00"
        },
        variables: {
          "border-color": "#000000",
          "border-opacity": 0.12,
          "high-emphasis-opacity": 0.87,
          "medium-emphasis-opacity": 0.6,
          "disabled-opacity": 0.38,
          "idle-opacity": 0.04,
          "hover-opacity": 0.04,
          "focus-opacity": 0.12,
          "selected-opacity": 0.08,
          "activated-opacity": 0.12,
          "pressed-opacity": 0.12,
          "dragged-opacity": 0.08,
          "theme-kbd": "#EEEEEE",
          "theme-on-kbd": "#000000",
          "theme-code": "#F5F5F5",
          "theme-on-code": "#000000"
        }
      },
      dark: {
        dark: !0,
        colors: {
          background: "#121212",
          surface: "#212121",
          "surface-bright": "#ccbfd6",
          "surface-light": "#424242",
          "surface-variant": "#c8c8c8",
          "on-surface-variant": "#000000",
          primary: "#2196F3",
          "primary-darken-1": "#277CC1",
          secondary: "#54B6B2",
          "secondary-darken-1": "#48A9A6",
          error: "#CF6679",
          info: "#2196F3",
          success: "#4CAF50",
          warning: "#FB8C00"
        },
        variables: {
          "border-color": "#FFFFFF",
          "border-opacity": 0.12,
          "high-emphasis-opacity": 1,
          "medium-emphasis-opacity": 0.7,
          "disabled-opacity": 0.5,
          "idle-opacity": 0.1,
          "hover-opacity": 0.04,
          "focus-opacity": 0.12,
          "selected-opacity": 0.08,
          "activated-opacity": 0.12,
          "pressed-opacity": 0.16,
          "dragged-opacity": 0.08,
          "theme-kbd": "#424242",
          "theme-on-kbd": "#FFFFFF",
          "theme-code": "#343434",
          "theme-on-code": "#CCCCCC"
        }
      }
    },
    stylesheetId: "vuetify-theme-stylesheet",
    scoped: !1,
    unimportant: !1,
    utilities: !0
  };
}
function C8() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : wC();
  const t = wC();
  if (!e) return {
    ...t,
    isDisabled: !0
  };
  const n = {};
  for (const [a, r] of Object.entries(e.themes ?? {})) {
    const i = r.dark || a === "dark" ? t.themes?.dark : t.themes?.light;
    n[a] = Sr(i, r);
  }
  return Sr(t, {
    ...e,
    themes: n
  });
}
function El(e, t, n, a) {
  e.push(`${I8(t, a)} {
`, ...n.map((r) => `  ${r};
`), `}
`);
}
function kC(e, t) {
  const n = e.dark ? 2 : 1, a = e.dark ? 1 : 2, r = [];
  for (const [i, o] of Object.entries(e.colors)) {
    const l = ui(o);
    r.push(`--${t}theme-${i}: ${l.r},${l.g},${l.b}`), i.startsWith("on-") || r.push(`--${t}theme-${i}-overlay-multiplier: ${Qy(o) > 0.18 ? n : a}`);
  }
  for (const [i, o] of Object.entries(e.variables)) {
    const l = typeof o == "string" && o.startsWith("#") ? ui(o) : void 0, s = l ? `${l.r}, ${l.g}, ${l.b}` : void 0;
    r.push(`--${t}${i}: ${s ?? o}`);
  }
  return r;
}
function A8(e, t, n) {
  const a = {};
  if (n)
    for (const r of ["lighten", "darken"]) {
      const i = r === "lighten" ? l4 : c4;
      for (const o of ci(n[r], 1))
        a[`${e}-${r}-${o}`] = zT(i(ui(t), o));
    }
  return a;
}
function x8(e, t) {
  if (!t) return {};
  let n = {};
  for (const a of t.colors) {
    const r = e[a];
    r && (n = {
      ...n,
      ...A8(a, r, t)
    });
  }
  return n;
}
function T8(e) {
  const t = {};
  for (const n of Object.keys(e)) {
    if (n.startsWith("on-") || e[`on-${n}`]) continue;
    const a = `on-${n}`, r = ui(e[n]);
    t[a] = jT(r);
  }
  return t;
}
function I8(e, t) {
  if (!t) return e;
  const n = `:where(${t})`;
  return e === ":root" ? n : `${n} ${e}`;
}
function E8(e, t, n) {
  const a = P8(e, t);
  a && (a.innerHTML = n);
}
function P8(e, t) {
  if (!_n) return null;
  let n = document.getElementById(e);
  return n || (n = document.createElement("style"), n.id = e, n.type = "text/css", t && n.setAttribute("nonce", t), document.head.appendChild(n)), n;
}
function O8(e) {
  const t = C8(e), n = rt(t.defaultTheme), a = be(t.themes), r = rt("light"), i = W({
    get() {
      return n.value === "system" ? r.value : n.value;
    },
    set(v) {
      n.value = v;
    }
  }), o = W(() => {
    const v = {};
    for (const [g, k] of Object.entries(a.value)) {
      const A = {
        ...k.colors,
        ...x8(k.colors, t.variations)
      };
      v[g] = {
        ...k,
        colors: {
          ...A,
          ...T8(A)
        }
      };
    }
    return v;
  }), l = ye(() => o.value[i.value]), s = ye(() => n.value === "system"), d = W(() => {
    const v = [], g = t.unimportant ? "" : " !important", k = t.scoped ? t.prefix : "";
    l.value?.dark && El(v, ":root", ["color-scheme: dark"], t.scope), El(v, ":root", kC(l.value, t.prefix), t.scope);
    for (const [A, C] of Object.entries(o.value))
      El(v, `.${t.prefix}theme--${A}`, [`color-scheme: ${C.dark ? "dark" : "normal"}`, ...kC(C, t.prefix)], t.scope);
    if (t.utilities) {
      const A = [], C = [], D = new Set(Object.values(o.value).flatMap((P) => Object.keys(P.colors)));
      for (const P of D)
        P.startsWith("on-") ? El(C, `.${P}`, [`color: rgb(var(--${t.prefix}theme-${P}))${g}`], t.scope) : (El(A, `.${k}bg-${P}`, [`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${P}-overlay-multiplier)`, `background-color: rgb(var(--${t.prefix}theme-${P}))${g}`, `color: rgb(var(--${t.prefix}theme-on-${P}))${g}`], t.scope), El(C, `.${k}text-${P}`, [`color: rgb(var(--${t.prefix}theme-${P}))${g}`], t.scope), El(C, `.${k}border-${P}`, [`--${t.prefix}border-color: var(--${t.prefix}theme-${P})`], t.scope));
      v.push(...A, ...C);
    }
    return v.map((A, C) => C === 0 ? A : `    ${A}`).join("");
  }), u = ye(() => t.isDisabled ? void 0 : `${t.prefix}theme--${i.value}`), f = ye(() => Object.keys(o.value));
  if (E3) {
    let g = function() {
      r.value = v.matches ? "dark" : "light";
    };
    const v = window.matchMedia("(prefers-color-scheme: dark)");
    g(), v.addEventListener("change", g, {
      passive: !0
    }), dw() && Fa(() => {
      v.removeEventListener("change", g);
    });
  }
  function h(v) {
    if (t.isDisabled) return;
    const g = v._context.provides.usehead;
    if (g) {
      let k = function() {
        return {
          style: [{
            textContent: d.value,
            id: t.stylesheetId,
            nonce: t.cspNonce || !1
          }]
        };
      };
      if (g.push) {
        const A = g.push(k);
        _n && tt(d, () => {
          A.patch(k);
        });
      } else
        _n ? (g.addHeadObjs(ye(k)), na(() => g.updateDOM())) : g.addHeadObjs(k());
    } else {
      let k = function() {
        E8(t.stylesheetId, t.cspNonce, d.value);
      };
      _n ? tt(d, k, {
        immediate: !0
      }) : k();
    }
  }
  function y(v) {
    v !== "system" && !f.value.includes(v) || (i.value = v);
  }
  function p() {
    let v = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : f.value;
    const g = v.indexOf(i.value), k = g === -1 ? 0 : (g + 1) % v.length;
    y(v[k]);
  }
  function w() {
    let v = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ["light", "dark"];
    p(v);
  }
  const b = new Proxy(i, {
    get(v, g) {
      return Reflect.get(v, g);
    },
    set(v, g, k) {
      return g === "value" && FT(`theme.global.name.value = ${k}`, `theme.change('${k}')`), Reflect.set(v, g, k);
    }
  });
  return {
    install: h,
    change: y,
    cycle: p,
    toggle: w,
    isDisabled: t.isDisabled,
    isSystem: s,
    name: i,
    themes: a,
    current: l,
    computedThemes: o,
    prefix: t.prefix,
    themeClasses: u,
    styles: d,
    global: {
      name: b,
      current: l
    }
  };
}
function gn(e) {
  ya("provideTheme");
  const t = Gt(kf, null);
  if (!t) throw new Error("Could not find Vuetify theme injection");
  const n = ye(() => e.theme ?? t.name.value), a = ye(() => t.themes.value[n.value]), r = ye(() => t.isDisabled ? void 0 : `${t.prefix}theme--${n.value}`), i = {
    ...t,
    name: n,
    current: a,
    themeClasses: r
  };
  return Ln(kf, i), i;
}
function Kw() {
  ya("useTheme");
  const e = Gt(kf, null);
  if (!e) throw new Error("Could not find Vuetify theme injection");
  return e;
}
function Gi(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "content";
  const n = C_(), a = be();
  if (_n) {
    const r = new ResizeObserver((i) => {
      e?.(i, r), i.length && (t === "content" ? a.value = i[0].contentRect : a.value = i[0].target.getBoundingClientRect());
    });
    Ja(() => {
      r.disconnect();
    }), tt(() => n.el, (i, o) => {
      o && (r.unobserve(o), a.value = void 0), i && r.observe(i);
    }, {
      flush: "post"
    });
  }
  return {
    resizeRef: n,
    contentRect: Hu(a)
  };
}
const Sf = Symbol.for("vuetify:layout"), oI = Symbol.for("vuetify:layout-item"), SC = 1e3, sI = Be({
  overlaps: {
    type: Array,
    default: () => []
  },
  fullHeight: Boolean
}, "layout"), fc = Be({
  name: {
    type: String
  },
  order: {
    type: [Number, String],
    default: 0
  },
  absolute: Boolean
}, "layout-item");
function lI() {
  const e = Gt(Sf);
  if (!e) throw new Error("[Vuetify] Could not find injected layout");
  return {
    getLayoutItem: e.getLayoutItem,
    mainRect: e.mainRect,
    mainStyles: e.mainStyles
  };
}
function mc(e) {
  const t = Gt(Sf);
  if (!t) throw new Error("[Vuetify] Could not find injected layout");
  const n = e.id ?? `layout-item-${qr()}`, a = ya("useLayoutItem");
  Ln(oI, {
    id: n
  });
  const r = rt(!1);
  ww(() => r.value = !0), Kx(() => r.value = !1);
  const {
    layoutItemStyles: i,
    layoutItemScrimStyles: o
  } = t.register(a, {
    ...e,
    active: W(() => r.value ? !1 : e.active.value),
    id: n
  });
  return Ja(() => t.unregister(n)), {
    layoutItemStyles: i,
    layoutRect: t.layoutRect,
    layoutItemScrimStyles: o
  };
}
const D8 = (e, t, n, a) => {
  let r = {
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  };
  const i = [{
    id: "",
    layer: {
      ...r
    }
  }];
  for (const o of e) {
    const l = t.get(o), s = n.get(o), d = a.get(o);
    if (!l || !s || !d) continue;
    const u = {
      ...r,
      [l.value]: parseInt(r[l.value], 10) + (d.value ? parseInt(s.value, 10) : 0)
    };
    i.push({
      id: o,
      layer: u
    }), r = u;
  }
  return i;
};
function cI(e) {
  const t = Gt(Sf, null), n = W(() => t ? t.rootZIndex.value - 100 : SC), a = be([]), r = Zn(/* @__PURE__ */ new Map()), i = Zn(/* @__PURE__ */ new Map()), o = Zn(/* @__PURE__ */ new Map()), l = Zn(/* @__PURE__ */ new Map()), s = Zn(/* @__PURE__ */ new Map()), {
    resizeRef: d,
    contentRect: u
  } = Gi(), f = W(() => {
    const D = /* @__PURE__ */ new Map(), P = e.overlaps ?? [];
    for (const O of P.filter((I) => I.includes(":"))) {
      const [I, x] = O.split(":");
      if (!a.value.includes(I) || !a.value.includes(x)) continue;
      const M = r.get(I), V = r.get(x), B = i.get(I), F = i.get(x);
      !M || !V || !B || !F || (D.set(x, {
        position: M.value,
        amount: parseInt(B.value, 10)
      }), D.set(I, {
        position: V.value,
        amount: -parseInt(F.value, 10)
      }));
    }
    return D;
  }), h = W(() => {
    const D = [...new Set([...o.values()].map((O) => O.value))].sort((O, I) => O - I), P = [];
    for (const O of D) {
      const I = a.value.filter((x) => o.get(x)?.value === O);
      P.push(...I);
    }
    return D8(P, r, i, l);
  }), y = W(() => !Array.from(s.values()).some((D) => D.value)), p = W(() => h.value[h.value.length - 1].layer), w = ye(() => ({
    "--v-layout-left": ht(p.value.left),
    "--v-layout-right": ht(p.value.right),
    "--v-layout-top": ht(p.value.top),
    "--v-layout-bottom": ht(p.value.bottom),
    ...y.value ? void 0 : {
      transition: "none"
    }
  })), b = W(() => h.value.slice(1).map((D, P) => {
    let {
      id: O
    } = D;
    const {
      layer: I
    } = h.value[P], x = i.get(O), M = r.get(O);
    return {
      id: O,
      ...I,
      size: Number(x.value),
      position: M.value
    };
  })), v = (D) => b.value.find((P) => P.id === D), g = ya("createLayout"), k = rt(!1);
  an(() => {
    k.value = !0;
  }), Ln(Sf, {
    register: (D, P) => {
      let {
        id: O,
        order: I,
        position: x,
        layoutSize: M,
        elementSize: V,
        active: B,
        disableTransitions: F,
        absolute: H
      } = P;
      o.set(O, I), r.set(O, x), i.set(O, M), l.set(O, B), F && s.set(O, F);
      const Z = iu(oI, g?.vnode).indexOf(D);
      Z > -1 ? a.value.splice(Z, 0, O) : a.value.push(O);
      const ue = W(() => b.value.findIndex((oe) => oe.id === O)), Y = W(() => n.value + h.value.length * 2 - ue.value * 2), U = W(() => {
        const oe = x.value === "left" || x.value === "right", ee = x.value === "right", he = x.value === "bottom", ve = V.value ?? M.value, pe = ve === 0 ? "%" : "px", z = {
          [x.value]: 0,
          zIndex: Y.value,
          transform: `translate${oe ? "X" : "Y"}(${(B.value ? 0 : -(ve === 0 ? 100 : ve)) * (ee || he ? -1 : 1)}${pe})`,
          position: H.value || n.value !== SC ? "absolute" : "fixed",
          ...y.value ? void 0 : {
            transition: "none"
          }
        };
        if (!k.value) return z;
        const ge = b.value[ue.value], Ve = f.value.get(O);
        return Ve && (ge[Ve.position] += Ve.amount), {
          ...z,
          height: oe ? `calc(100% - ${ge.top}px - ${ge.bottom}px)` : V.value ? `${V.value}px` : void 0,
          left: ee ? void 0 : `${ge.left}px`,
          right: ee ? `${ge.right}px` : void 0,
          top: x.value !== "bottom" ? `${ge.top}px` : void 0,
          bottom: x.value !== "top" ? `${ge.bottom}px` : void 0,
          width: oe ? V.value ? `${V.value}px` : void 0 : `calc(100% - ${ge.left}px - ${ge.right}px)`
        };
      }), q = W(() => ({
        zIndex: Y.value - 1
      }));
      return {
        layoutItemStyles: U,
        layoutItemScrimStyles: q,
        zIndex: Y
      };
    },
    unregister: (D) => {
      o.delete(D), r.delete(D), i.delete(D), l.delete(D), s.delete(D), a.value = a.value.filter((P) => P !== D);
    },
    mainRect: p,
    mainStyles: w,
    getLayoutItem: v,
    items: b,
    layoutRect: u,
    rootZIndex: n
  });
  const A = ye(() => ["v-layout", {
    "v-layout--full-height": e.fullHeight
  }]), C = ye(() => ({
    zIndex: t ? n.value : void 0,
    position: t ? "relative" : void 0,
    overflow: t ? "hidden" : void 0
  }));
  return {
    layoutClasses: A,
    layoutStyles: C,
    getLayoutItem: v,
    items: b,
    layoutRect: u,
    layoutRef: d
  };
}
function uI() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const {
    blueprint: t,
    ...n
  } = e, a = Sr(t, n), {
    aliases: r = {},
    components: i = {},
    directives: o = {}
  } = a, l = ku();
  return l.run(() => {
    const s = f4(a.defaults), d = m8(a.display, a.ssr), u = O8(a.theme), f = k8(a.icons), h = A4(a.locale), y = u8(a.date, h), p = _8(a.goTo, h);
    function w(v) {
      for (const k in o)
        v.directive(k, o[k]);
      for (const k in i)
        v.component(k, i[k]);
      for (const k in r)
        v.component(k, vi({
          ...r[k],
          name: k,
          aliasName: r[k].name
        }));
      const g = ku();
      if (g.run(() => {
        u.install(v);
      }), v.onUnmount(() => g.stop()), v.provide(Tu, s), v.provide(eb, d), v.provide(kf, u), v.provide(tb, f), v.provide(Iu, h), v.provide(nI, y.options), v.provide(_C, y.instance), v.provide(rI, p), _n && a.ssr)
        if (v.$nuxt)
          v.$nuxt.hook("app:suspense:resolve", () => {
            d.update();
          });
        else {
          const {
            mount: k
          } = v;
          v.mount = function() {
            const A = k(...arguments);
            return Dt(() => d.update()), v.mount = k, A;
          };
        }
      v.mixin({
        computed: {
          $vuetify() {
            return Zn({
              defaults: Gc.call(this, Tu),
              display: Gc.call(this, eb),
              theme: Gc.call(this, kf),
              icons: Gc.call(this, tb),
              locale: Gc.call(this, Iu),
              date: Gc.call(this, _C)
            });
          }
        }
      });
    }
    function b() {
      l.stop();
    }
    return {
      install: w,
      unmount: b,
      defaults: s,
      display: d,
      theme: u,
      icons: f,
      locale: h,
      date: y,
      goTo: p
    };
  });
}
const B8 = "3.9.5";
uI.version = B8;
function Gc(e) {
  const t = this.$, n = t.parent?.provides ?? t.vnode.appContext?.provides;
  if (n && e in n)
    return n[e];
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ab = function(e, t) {
  return ab = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, a) {
    n.__proto__ = a;
  } || function(n, a) {
    for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (n[r] = a[r]);
  }, ab(e, t);
};
function V8(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
  ab(e, t);
  function n() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
var Jt = function() {
  return Jt = Object.assign || function(t) {
    for (var n, a = 1, r = arguments.length; a < r; a++) {
      n = arguments[a];
      for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
    }
    return t;
  }, Jt.apply(this, arguments);
};
function P_(e, t, n) {
  for (var a = 0, r = t.length, i; a < r; a++)
    (i || !(a in t)) && (i || (i = Array.prototype.slice.call(t, 0, a)), i[a] = t[a]);
  return e.concat(i || Array.prototype.slice.call(t));
}
var ur = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, ir = Object.keys, pa = Array.isArray;
typeof Promise < "u" && !ur.Promise && (ur.Promise = Promise);
function hi(e, t) {
  return typeof t != "object" || ir(t).forEach(function(n) {
    e[n] = t[n];
  }), e;
}
var Eu = Object.getPrototypeOf, M8 = {}.hasOwnProperty;
function Jr(e, t) {
  return M8.call(e, t);
}
function Pu(e, t) {
  typeof t == "function" && (t = t(Eu(e))), (typeof Reflect > "u" ? ir : Reflect.ownKeys)(t).forEach(function(n) {
    zs(e, n, t[n]);
  });
}
var dI = Object.defineProperty;
function zs(e, t, n, a) {
  dI(e, t, hi(n && Jr(n, "get") && typeof n.get == "function" ? { get: n.get, set: n.set, configurable: !0 } : { value: n, configurable: !0, writable: !0 }, a));
}
function ju(e) {
  return {
    from: function(t) {
      return e.prototype = Object.create(t.prototype), zs(e.prototype, "constructor", e), {
        extend: Pu.bind(null, e.prototype)
      };
    }
  };
}
var L8 = Object.getOwnPropertyDescriptor;
function fI(e, t) {
  var n = L8(e, t), a;
  return n || (a = Eu(e)) && fI(a, t);
}
var R8 = [].slice;
function _v(e, t, n) {
  return R8.call(e, t, n);
}
function mI(e, t) {
  return t(e);
}
function Gd(e) {
  if (!e)
    throw new Error("Assertion Failed");
}
function hI(e) {
  ur.setImmediate ? setImmediate(e) : setTimeout(e, 0);
}
function F8(e, t) {
  return e.reduce(function(n, a, r) {
    var i = t(a, r);
    return i && (n[i[0]] = i[1]), n;
  }, {});
}
function es(e, t) {
  if (typeof t == "string" && Jr(e, t))
    return e[t];
  if (!t)
    return e;
  if (typeof t != "string") {
    for (var n = [], a = 0, r = t.length; a < r; ++a) {
      var i = es(e, t[a]);
      n.push(i);
    }
    return n;
  }
  var o = t.indexOf(".");
  if (o !== -1) {
    var l = e[t.substr(0, o)];
    return l == null ? void 0 : es(l, t.substr(o + 1));
  }
}
function mi(e, t, n) {
  if (!(!e || t === void 0) && !("isFrozen" in Object && Object.isFrozen(e)))
    if (typeof t != "string" && "length" in t) {
      Gd(typeof n != "string" && "length" in n);
      for (var a = 0, r = t.length; a < r; ++a)
        mi(e, t[a], n[a]);
    } else {
      var i = t.indexOf(".");
      if (i !== -1) {
        var o = t.substr(0, i), l = t.substr(i + 1);
        if (l === "")
          n === void 0 ? pa(e) && !isNaN(parseInt(o)) ? e.splice(o, 1) : delete e[o] : e[o] = n;
        else {
          var s = e[o];
          (!s || !Jr(e, o)) && (s = e[o] = {}), mi(s, l, n);
        }
      } else
        n === void 0 ? pa(e) && !isNaN(parseInt(t)) ? e.splice(t, 1) : delete e[t] : e[t] = n;
    }
}
function N8(e, t) {
  typeof t == "string" ? mi(e, t, void 0) : "length" in t && [].map.call(t, function(n) {
    mi(e, n, void 0);
  });
}
function _I(e) {
  var t = {};
  for (var n in e)
    Jr(e, n) && (t[n] = e[n]);
  return t;
}
var U8 = [].concat;
function vI(e) {
  return U8.apply([], e);
}
var $8 = "BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(vI([8, 16, 32, 64].map(function(e) {
  return ["Int", "Uint", "Float"].map(function(t) {
    return t + e + "Array";
  });
}))).filter(function(e) {
  return ur[e];
}), pI = new Set($8.map(function(e) {
  return ur[e];
}));
function gI(e) {
  var t = {};
  for (var n in e)
    if (Jr(e, n)) {
      var a = e[n];
      t[n] = !a || typeof a != "object" || pI.has(a.constructor) ? a : gI(a);
    }
  return t;
}
function q8(e) {
  for (var t in e)
    if (Jr(e, t))
      return !1;
  return !0;
}
var lf = null;
function Zl(e) {
  lf = /* @__PURE__ */ new WeakMap();
  var t = rb(e);
  return lf = null, t;
}
function rb(e) {
  if (!e || typeof e != "object")
    return e;
  var t = lf.get(e);
  if (t)
    return t;
  if (pa(e)) {
    t = [], lf.set(e, t);
    for (var n = 0, a = e.length; n < a; ++n)
      t.push(rb(e[n]));
  } else if (pI.has(e.constructor))
    t = e;
  else {
    var r = Eu(e);
    t = r === Object.prototype ? {} : Object.create(r), lf.set(e, t);
    for (var i in e)
      Jr(e, i) && (t[i] = rb(e[i]));
  }
  return t;
}
var H8 = {}.toString;
function ib(e) {
  return H8.call(e).slice(8, -1);
}
var ob = typeof Symbol < "u" ? Symbol.iterator : "@@iterator", z8 = typeof ob == "symbol" ? function(e) {
  var t;
  return e != null && (t = e[ob]) && t.apply(e);
} : function() {
  return null;
};
function Ol(e, t) {
  var n = e.indexOf(t);
  return n >= 0 && e.splice(n, 1), n >= 0;
}
var au = {};
function Qo(e) {
  var t, n, a, r;
  if (arguments.length === 1) {
    if (pa(e))
      return e.slice();
    if (this === au && typeof e == "string")
      return [e];
    if (r = z8(e)) {
      for (n = []; a = r.next(), !a.done; )
        n.push(a.value);
      return n;
    }
    if (e == null)
      return [e];
    if (t = e.length, typeof t == "number") {
      for (n = new Array(t); t--; )
        n[t] = e[t];
      return n;
    }
    return [e];
  }
  for (t = arguments.length, n = new Array(t); t--; )
    n[t] = arguments[t];
  return n;
}
var jw = typeof Symbol < "u" ? function(e) {
  return e[Symbol.toStringTag] === "AsyncFunction";
} : function() {
  return !1;
}, W8 = [
  "Modify",
  "Bulk",
  "OpenFailed",
  "VersionChange",
  "Schema",
  "Upgrade",
  "InvalidTable",
  "MissingAPI",
  "NoSuchDatabase",
  "InvalidArgument",
  "SubTransaction",
  "Unsupported",
  "Internal",
  "DatabaseClosed",
  "PrematureCommit",
  "ForeignAwait"
], yI = [
  "Unknown",
  "Constraint",
  "Data",
  "TransactionInactive",
  "ReadOnly",
  "Version",
  "NotFound",
  "InvalidState",
  "InvalidAccess",
  "Abort",
  "Timeout",
  "QuotaExceeded",
  "Syntax",
  "DataClone"
], Yw = W8.concat(yI), K8 = {
  VersionChanged: "Database version changed by other database connection",
  DatabaseClosed: "Database has been closed",
  Abort: "Transaction aborted",
  TransactionInactive: "Transaction has already completed or failed",
  MissingAPI: "IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"
};
function Yu(e, t) {
  this.name = e, this.message = t;
}
ju(Yu).from(Error).extend({
  toString: function() {
    return this.name + ": " + this.message;
  }
});
function bI(e, t) {
  return e + ". Errors: " + Object.keys(t).map(function(n) {
    return t[n].toString();
  }).filter(function(n, a, r) {
    return r.indexOf(n) === a;
  }).join(`
`);
}
function O_(e, t, n, a) {
  this.failures = t, this.failedKeys = a, this.successCount = n, this.message = bI(e, t);
}
ju(O_).from(Yu);
function ou(e, t) {
  this.name = "BulkError", this.failures = Object.keys(t).map(function(n) {
    return t[n];
  }), this.failuresByPos = t, this.message = bI(e, this.failures);
}
ju(ou).from(Yu);
var Gw = Yw.reduce(function(e, t) {
  return e[t] = t + "Error", e;
}, {}), j8 = Yu, Vt = Yw.reduce(function(e, t) {
  var n = t + "Error";
  function a(r, i) {
    this.name = n, r ? typeof r == "string" ? (this.message = "".concat(r).concat(i ? `
 ` + i : ""), this.inner = i || null) : typeof r == "object" && (this.message = "".concat(r.name, " ").concat(r.message), this.inner = r) : (this.message = K8[t] || n, this.inner = null);
  }
  return ju(a).from(j8), e[t] = a, e;
}, {});
Vt.Syntax = SyntaxError;
Vt.Type = TypeError;
Vt.Range = RangeError;
var CC = yI.reduce(function(e, t) {
  return e[t + "Error"] = Vt[t], e;
}, {});
function Y8(e, t) {
  if (!e || e instanceof Yu || e instanceof TypeError || e instanceof SyntaxError || !e.name || !CC[e.name])
    return e;
  var n = new CC[e.name](t || e.message, e);
  return "stack" in e && zs(n, "stack", { get: function() {
    return this.inner.stack;
  } }), n;
}
var vv = Yw.reduce(function(e, t) {
  return ["Syntax", "Type", "Range"].indexOf(t) === -1 && (e[t + "Error"] = Vt[t]), e;
}, {});
vv.ModifyError = O_;
vv.DexieError = Yu;
vv.BulkError = ou;
function Vn() {
}
function Yf(e) {
  return e;
}
function G8(e, t) {
  return e == null || e === Yf ? t : function(n) {
    return t(e(n));
  };
}
function ec(e, t) {
  return function() {
    e.apply(this, arguments), t.apply(this, arguments);
  };
}
function Q8(e, t) {
  return e === Vn ? t : function() {
    var n = e.apply(this, arguments);
    n !== void 0 && (arguments[0] = n);
    var a = this.onsuccess, r = this.onerror;
    this.onsuccess = null, this.onerror = null;
    var i = t.apply(this, arguments);
    return a && (this.onsuccess = this.onsuccess ? ec(a, this.onsuccess) : a), r && (this.onerror = this.onerror ? ec(r, this.onerror) : r), i !== void 0 ? i : n;
  };
}
function J8(e, t) {
  return e === Vn ? t : function() {
    e.apply(this, arguments);
    var n = this.onsuccess, a = this.onerror;
    this.onsuccess = this.onerror = null, t.apply(this, arguments), n && (this.onsuccess = this.onsuccess ? ec(n, this.onsuccess) : n), a && (this.onerror = this.onerror ? ec(a, this.onerror) : a);
  };
}
function X8(e, t) {
  return e === Vn ? t : function(n) {
    var a = e.apply(this, arguments);
    hi(n, a);
    var r = this.onsuccess, i = this.onerror;
    this.onsuccess = null, this.onerror = null;
    var o = t.apply(this, arguments);
    return r && (this.onsuccess = this.onsuccess ? ec(r, this.onsuccess) : r), i && (this.onerror = this.onerror ? ec(i, this.onerror) : i), a === void 0 ? o === void 0 ? void 0 : o : hi(a, o);
  };
}
function Z8(e, t) {
  return e === Vn ? t : function() {
    return t.apply(this, arguments) === !1 ? !1 : e.apply(this, arguments);
  };
}
function Qw(e, t) {
  return e === Vn ? t : function() {
    var n = e.apply(this, arguments);
    if (n && typeof n.then == "function") {
      for (var a = this, r = arguments.length, i = new Array(r); r--; )
        i[r] = arguments[r];
      return n.then(function() {
        return t.apply(a, i);
      });
    }
    return t.apply(this, arguments);
  };
}
var Co = typeof location < "u" && /^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);
function wI(e, t) {
  Co = e;
}
var Cf = {}, kI = 100, Jw = typeof Promise > "u" ? [] : (function() {
  var e = Promise.resolve();
  if (typeof crypto > "u" || !crypto.subtle)
    return [e, Eu(e), e];
  var t = crypto.subtle.digest("SHA-512", new Uint8Array([0]));
  return [
    t,
    Eu(t),
    e
  ];
})(), AC = Jw[0], xC = Jw[1], eU = Jw[2], tU = xC && xC.then, Vl = AC && AC.constructor, Xw = !!eU;
function nU() {
  queueMicrotask(rU);
}
var Af = function(e, t) {
  Qd.push([e, t]), D_ && (nU(), D_ = !1);
}, sb = !0, D_ = !0, Wl = [], n_ = [], lb = Yf, Ns = {
  id: "global",
  global: !0,
  ref: 0,
  unhandleds: [],
  onunhandled: Vn,
  pgp: !1,
  env: {},
  finalize: Vn
}, Pt = Ns, Qd = [], Kl = 0, a_ = [];
function kt(e) {
  if (typeof this != "object")
    throw new TypeError("Promises must be constructed via new");
  this._listeners = [], this._lib = !1;
  var t = this._PSD = Pt;
  if (typeof e != "function") {
    if (e !== Cf)
      throw new TypeError("Not a function");
    this._state = arguments[1], this._value = arguments[2], this._state === !1 && ub(this, this._value);
    return;
  }
  this._state = null, this._value = null, ++t.ref, CI(this, e);
}
var cb = {
  get: function() {
    var e = Pt, t = B_;
    function n(a, r) {
      var i = this, o = !e.global && (e !== Pt || t !== B_), l = o && !Ks(), s = new kt(function(d, u) {
        Zw(i, new SI(TC(a, e, o, l), TC(r, e, o, l), d, u, e));
      });
      return this._consoleTask && (s._consoleTask = this._consoleTask), s;
    }
    return n.prototype = Cf, n;
  },
  set: function(e) {
    zs(this, "then", e && e.prototype === Cf ? cb : {
      get: function() {
        return e;
      },
      set: cb.set
    });
  }
};
Pu(kt.prototype, {
  then: cb,
  _then: function(e, t) {
    Zw(this, new SI(null, null, e, t, Pt));
  },
  catch: function(e) {
    if (arguments.length === 1)
      return this.then(null, e);
    var t = arguments[0], n = arguments[1];
    return typeof t == "function" ? this.then(null, function(a) {
      return a instanceof t ? n(a) : r_(a);
    }) : this.then(null, function(a) {
      return a && a.name === t ? n(a) : r_(a);
    });
  },
  finally: function(e) {
    return this.then(function(t) {
      return kt.resolve(e()).then(function() {
        return t;
      });
    }, function(t) {
      return kt.resolve(e()).then(function() {
        return r_(t);
      });
    });
  },
  timeout: function(e, t) {
    var n = this;
    return e < 1 / 0 ? new kt(function(a, r) {
      var i = setTimeout(function() {
        return r(new Vt.Timeout(t));
      }, e);
      n.then(a, r).finally(clearTimeout.bind(null, i));
    }) : this;
  }
});
typeof Symbol < "u" && Symbol.toStringTag && zs(kt.prototype, Symbol.toStringTag, "Dexie.Promise");
Ns.env = xI();
function SI(e, t, n, a, r) {
  this.onFulfilled = typeof e == "function" ? e : null, this.onRejected = typeof t == "function" ? t : null, this.resolve = n, this.reject = a, this.psd = r;
}
Pu(kt, {
  all: function() {
    var e = Qo.apply(null, arguments).map(V_);
    return new kt(function(t, n) {
      e.length === 0 && t([]);
      var a = e.length;
      e.forEach(function(r, i) {
        return kt.resolve(r).then(function(o) {
          e[i] = o, --a || t(e);
        }, n);
      });
    });
  },
  resolve: function(e) {
    if (e instanceof kt)
      return e;
    if (e && typeof e.then == "function")
      return new kt(function(n, a) {
        e.then(n, a);
      });
    var t = new kt(Cf, !0, e);
    return t;
  },
  reject: r_,
  race: function() {
    var e = Qo.apply(null, arguments).map(V_);
    return new kt(function(t, n) {
      e.map(function(a) {
        return kt.resolve(a).then(t, n);
      });
    });
  },
  PSD: {
    get: function() {
      return Pt;
    },
    set: function(e) {
      return Pt = e;
    }
  },
  totalEchoes: { get: function() {
    return B_;
  } },
  newPSD: Ws,
  usePSD: tc,
  scheduler: {
    get: function() {
      return Af;
    },
    set: function(e) {
      Af = e;
    }
  },
  rejectionMapper: {
    get: function() {
      return lb;
    },
    set: function(e) {
      lb = e;
    }
  },
  follow: function(e, t) {
    return new kt(function(n, a) {
      return Ws(function(r, i) {
        var o = Pt;
        o.unhandleds = [], o.onunhandled = i, o.finalize = ec(function() {
          var l = this;
          iU(function() {
            l.unhandleds.length === 0 ? r() : i(l.unhandleds[0]);
          });
        }, o.finalize), e();
      }, t, n, a);
    });
  }
});
Vl && (Vl.allSettled && zs(kt, "allSettled", function() {
  var e = Qo.apply(null, arguments).map(V_);
  return new kt(function(t) {
    e.length === 0 && t([]);
    var n = e.length, a = new Array(n);
    e.forEach(function(r, i) {
      return kt.resolve(r).then(function(o) {
        return a[i] = { status: "fulfilled", value: o };
      }, function(o) {
        return a[i] = { status: "rejected", reason: o };
      }).then(function() {
        return --n || t(a);
      });
    });
  });
}), Vl.any && typeof AggregateError < "u" && zs(kt, "any", function() {
  var e = Qo.apply(null, arguments).map(V_);
  return new kt(function(t, n) {
    e.length === 0 && n(new AggregateError([]));
    var a = e.length, r = new Array(a);
    e.forEach(function(i, o) {
      return kt.resolve(i).then(function(l) {
        return t(l);
      }, function(l) {
        r[o] = l, --a || n(new AggregateError(r));
      });
    });
  });
}), Vl.withResolvers && (kt.withResolvers = Vl.withResolvers));
function CI(e, t) {
  try {
    t(function(n) {
      if (e._state === null) {
        if (n === e)
          throw new TypeError("A promise cannot be resolved with itself.");
        var a = e._lib && Gu();
        n && typeof n.then == "function" ? CI(e, function(r, i) {
          n instanceof kt ? n._then(r, i) : n.then(r, i);
        }) : (e._state = !0, e._value = n, AI(e)), a && Qu();
      }
    }, ub.bind(null, e));
  } catch (n) {
    ub(e, n);
  }
}
function ub(e, t) {
  if (n_.push(t), e._state === null) {
    var n = e._lib && Gu();
    t = lb(t), e._state = !1, e._value = t, oU(e), AI(e), n && Qu();
  }
}
function AI(e) {
  var t = e._listeners;
  e._listeners = [];
  for (var n = 0, a = t.length; n < a; ++n)
    Zw(e, t[n]);
  var r = e._PSD;
  --r.ref || r.finalize(), Kl === 0 && (++Kl, Af(function() {
    --Kl === 0 && e0();
  }, []));
}
function Zw(e, t) {
  if (e._state === null) {
    e._listeners.push(t);
    return;
  }
  var n = e._state ? t.onFulfilled : t.onRejected;
  if (n === null)
    return (e._state ? t.resolve : t.reject)(e._value);
  ++t.psd.ref, ++Kl, Af(aU, [n, e, t]);
}
function aU(e, t, n) {
  try {
    var a, r = t._value;
    !t._state && n_.length && (n_ = []), a = Co && t._consoleTask ? t._consoleTask.run(function() {
      return e(r);
    }) : e(r), !t._state && n_.indexOf(r) === -1 && sU(t), n.resolve(a);
  } catch (i) {
    n.reject(i);
  } finally {
    --Kl === 0 && e0(), --n.psd.ref || n.psd.finalize();
  }
}
function rU() {
  tc(Ns, function() {
    Gu() && Qu();
  });
}
function Gu() {
  var e = sb;
  return sb = !1, D_ = !1, e;
}
function Qu() {
  var e, t, n;
  do
    for (; Qd.length > 0; )
      for (e = Qd, Qd = [], n = e.length, t = 0; t < n; ++t) {
        var a = e[t];
        a[0].apply(null, a[1]);
      }
  while (Qd.length > 0);
  sb = !0, D_ = !0;
}
function e0() {
  var e = Wl;
  Wl = [], e.forEach(function(a) {
    a._PSD.onunhandled.call(null, a._value, a);
  });
  for (var t = a_.slice(0), n = t.length; n; )
    t[--n]();
}
function iU(e) {
  function t() {
    e(), a_.splice(a_.indexOf(t), 1);
  }
  a_.push(t), ++Kl, Af(function() {
    --Kl === 0 && e0();
  }, []);
}
function oU(e) {
  Wl.some(function(t) {
    return t._value === e._value;
  }) || Wl.push(e);
}
function sU(e) {
  for (var t = Wl.length; t; )
    if (Wl[--t]._value === e._value) {
      Wl.splice(t, 1);
      return;
    }
}
function r_(e) {
  return new kt(Cf, !1, e);
}
function ca(e, t) {
  var n = Pt;
  return function() {
    var a = Gu(), r = Pt;
    try {
      return js(n, !0), e.apply(this, arguments);
    } catch (i) {
      t && t(i);
    } finally {
      js(r, !1), a && Qu();
    }
  };
}
var ar = { awaits: 0, echoes: 0, id: 0 }, lU = 0, i_ = [], o_ = 0, B_ = 0, cU = 0;
function Ws(e, t, n, a) {
  var r = Pt, i = Object.create(r);
  i.parent = r, i.ref = 0, i.global = !1, i.id = ++cU, Ns.env, i.env = Xw ? {
    Promise: kt,
    PromiseProp: { value: kt, configurable: !0, writable: !0 },
    all: kt.all,
    race: kt.race,
    allSettled: kt.allSettled,
    any: kt.any,
    resolve: kt.resolve,
    reject: kt.reject
  } : {}, t && hi(i, t), ++r.ref, i.finalize = function() {
    --this.parent.ref || this.parent.finalize();
  };
  var o = tc(i, e, n, a);
  return i.ref === 0 && i.finalize(), o;
}
function Ju() {
  return ar.id || (ar.id = ++lU), ++ar.awaits, ar.echoes += kI, ar.id;
}
function Ks() {
  return ar.awaits ? (--ar.awaits === 0 && (ar.id = 0), ar.echoes = ar.awaits * kI, !0) : !1;
}
("" + tU).indexOf("[native code]") === -1 && (Ju = Ks = Vn);
function V_(e) {
  return ar.echoes && e && e.constructor === Vl ? (Ju(), e.then(function(t) {
    return Ks(), t;
  }, function(t) {
    return Ks(), Ra(t);
  })) : e;
}
function uU(e) {
  ++B_, (!ar.echoes || --ar.echoes === 0) && (ar.echoes = ar.awaits = ar.id = 0), i_.push(Pt), js(e, !0);
}
function dU() {
  var e = i_[i_.length - 1];
  i_.pop(), js(e, !1);
}
function js(e, t) {
  var n = Pt;
  if ((t ? ar.echoes && (!o_++ || e !== Pt) : o_ && (!--o_ || e !== Pt)) && queueMicrotask(t ? uU.bind(null, e) : dU), e !== Pt && (Pt = e, n === Ns && (Ns.env = xI()), Xw)) {
    var a = Ns.env.Promise, r = e.env;
    (n.global || e.global) && (Object.defineProperty(ur, "Promise", r.PromiseProp), a.all = r.all, a.race = r.race, a.resolve = r.resolve, a.reject = r.reject, r.allSettled && (a.allSettled = r.allSettled), r.any && (a.any = r.any));
  }
}
function xI() {
  var e = ur.Promise;
  return Xw ? {
    Promise: e,
    PromiseProp: Object.getOwnPropertyDescriptor(ur, "Promise"),
    all: e.all,
    race: e.race,
    allSettled: e.allSettled,
    any: e.any,
    resolve: e.resolve,
    reject: e.reject
  } : {};
}
function tc(e, t, n, a, r) {
  var i = Pt;
  try {
    return js(e, !0), t(n, a, r);
  } finally {
    js(i, !1);
  }
}
function TC(e, t, n, a) {
  return typeof e != "function" ? e : function() {
    var r = Pt;
    n && Ju(), js(t, !0);
    try {
      return e.apply(this, arguments);
    } finally {
      js(r, !1), a && queueMicrotask(Ks);
    }
  };
}
function Kg(e) {
  Promise === Vl && ar.echoes === 0 ? o_ === 0 ? e() : enqueueNativeMicroTask(e) : setTimeout(e, 0);
}
var Ra = kt.reject;
function db(e, t, n, a) {
  if (!e.idbdb || !e._state.openComplete && !Pt.letThrough && !e._vip) {
    if (e._state.openComplete)
      return Ra(new Vt.DatabaseClosed(e._state.dbOpenError));
    if (!e._state.isBeingOpened) {
      if (!e._state.autoOpen)
        return Ra(new Vt.DatabaseClosed());
      e.open().catch(Vn);
    }
    return e._state.dbReadyPromise.then(function() {
      return db(e, t, n, a);
    });
  } else {
    var r = e._createTransaction(t, n, e._dbSchema);
    try {
      r.create(), e._state.PR1398_maxLoop = 3;
    } catch (i) {
      return i.name === Gw.InvalidState && e.isOpen() && --e._state.PR1398_maxLoop > 0 ? (console.warn("Dexie: Need to reopen db"), e.close({ disableAutoOpen: !1 }), e.open().then(function() {
        return db(e, t, n, a);
      })) : Ra(i);
    }
    return r._promise(t, function(i, o) {
      return Ws(function() {
        return Pt.trans = r, a(i, o, r);
      });
    }).then(function(i) {
      if (t === "readwrite")
        try {
          r.idbtrans.commit();
        } catch {
        }
      return t === "readonly" ? i : r._completion.then(function() {
        return i;
      });
    });
  }
}
var IC = "4.0.11", Nl = "￿", fb = -1 / 0, Wo = "Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.", TI = "String expected.", _u = [], pv = "__dbnames", jg = "readonly", Yg = "readwrite";
function nc(e, t) {
  return e ? t ? function() {
    return e.apply(this, arguments) && t.apply(this, arguments);
  } : e : t;
}
var II = {
  type: 3,
  lower: -1 / 0,
  lowerOpen: !1,
  upper: [[]],
  upperOpen: !1
};
function Oh(e) {
  return typeof e == "string" && !/\./.test(e) ? function(t) {
    return t[e] === void 0 && e in t && (t = Zl(t), delete t[e]), t;
  } : function(t) {
    return t;
  };
}
function fU() {
  throw Vt.Type();
}
function vn(e, t) {
  try {
    var n = EC(e), a = EC(t);
    if (n !== a)
      return n === "Array" ? 1 : a === "Array" ? -1 : n === "binary" ? 1 : a === "binary" ? -1 : n === "string" ? 1 : a === "string" ? -1 : n === "Date" ? 1 : a !== "Date" ? NaN : -1;
    switch (n) {
      case "number":
      case "Date":
      case "string":
        return e > t ? 1 : e < t ? -1 : 0;
      case "binary":
        return hU(PC(e), PC(t));
      case "Array":
        return mU(e, t);
    }
  } catch {
  }
  return NaN;
}
function mU(e, t) {
  for (var n = e.length, a = t.length, r = n < a ? n : a, i = 0; i < r; ++i) {
    var o = vn(e[i], t[i]);
    if (o !== 0)
      return o;
  }
  return n === a ? 0 : n < a ? -1 : 1;
}
function hU(e, t) {
  for (var n = e.length, a = t.length, r = n < a ? n : a, i = 0; i < r; ++i)
    if (e[i] !== t[i])
      return e[i] < t[i] ? -1 : 1;
  return n === a ? 0 : n < a ? -1 : 1;
}
function EC(e) {
  var t = typeof e;
  if (t !== "object")
    return t;
  if (ArrayBuffer.isView(e))
    return "binary";
  var n = ib(e);
  return n === "ArrayBuffer" ? "binary" : n;
}
function PC(e) {
  return e instanceof Uint8Array ? e : ArrayBuffer.isView(e) ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength) : new Uint8Array(e);
}
var EI = (function() {
  function e() {
  }
  return e.prototype._trans = function(t, n, a) {
    var r = this._tx || Pt.trans, i = this.name, o = Co && typeof console < "u" && console.createTask && console.createTask("Dexie: ".concat(t === "readonly" ? "read" : "write", " ").concat(this.name));
    function l(u, f, h) {
      if (!h.schema[i])
        throw new Vt.NotFound("Table " + i + " not part of transaction");
      return n(h.idbtrans, h);
    }
    var s = Gu();
    try {
      var d = r && r.db._novip === this.db._novip ? r === Pt.trans ? r._promise(t, l, a) : Ws(function() {
        return r._promise(t, l, a);
      }, { trans: r, transless: Pt.transless || Pt }) : db(this.db, t, [this.name], l);
      return o && (d._consoleTask = o, d = d.catch(function(u) {
        return console.trace(u), Ra(u);
      })), d;
    } finally {
      s && Qu();
    }
  }, e.prototype.get = function(t, n) {
    var a = this;
    return t && t.constructor === Object ? this.where(t).first(n) : t == null ? Ra(new Vt.Type("Invalid argument to Table.get()")) : this._trans("readonly", function(r) {
      return a.core.get({ trans: r, key: t }).then(function(i) {
        return a.hook.reading.fire(i);
      });
    }).then(n);
  }, e.prototype.where = function(t) {
    if (typeof t == "string")
      return new this.db.WhereClause(this, t);
    if (pa(t))
      return new this.db.WhereClause(this, "[".concat(t.join("+"), "]"));
    var n = ir(t);
    if (n.length === 1)
      return this.where(n[0]).equals(t[n[0]]);
    var a = this.schema.indexes.concat(this.schema.primKey).filter(function(u) {
      if (u.compound && n.every(function(h) {
        return u.keyPath.indexOf(h) >= 0;
      })) {
        for (var f = 0; f < n.length; ++f)
          if (n.indexOf(u.keyPath[f]) === -1)
            return !1;
        return !0;
      }
      return !1;
    }).sort(function(u, f) {
      return u.keyPath.length - f.keyPath.length;
    })[0];
    if (a && this.db._maxKey !== Nl) {
      var r = a.keyPath.slice(0, n.length);
      return this.where(r).equals(r.map(function(u) {
        return t[u];
      }));
    }
    !a && Co && console.warn("The query ".concat(JSON.stringify(t), " on ").concat(this.name, " would benefit from a ") + "compound index [".concat(n.join("+"), "]"));
    var i = this.schema.idxByName;
    function o(u, f) {
      return vn(u, f) === 0;
    }
    var l = n.reduce(function(u, f) {
      var h = u[0], y = u[1], p = i[f], w = t[f];
      return [
        h || p,
        h || !p ? nc(y, p && p.multi ? function(b) {
          var v = es(b, f);
          return pa(v) && v.some(function(g) {
            return o(w, g);
          });
        } : function(b) {
          return o(w, es(b, f));
        }) : y
      ];
    }, [null, null]), s = l[0], d = l[1];
    return s ? this.where(s.name).equals(t[s.keyPath]).filter(d) : a ? this.filter(d) : this.where(n).equals("");
  }, e.prototype.filter = function(t) {
    return this.toCollection().and(t);
  }, e.prototype.count = function(t) {
    return this.toCollection().count(t);
  }, e.prototype.offset = function(t) {
    return this.toCollection().offset(t);
  }, e.prototype.limit = function(t) {
    return this.toCollection().limit(t);
  }, e.prototype.each = function(t) {
    return this.toCollection().each(t);
  }, e.prototype.toArray = function(t) {
    return this.toCollection().toArray(t);
  }, e.prototype.toCollection = function() {
    return new this.db.Collection(new this.db.WhereClause(this));
  }, e.prototype.orderBy = function(t) {
    return new this.db.Collection(new this.db.WhereClause(this, pa(t) ? "[".concat(t.join("+"), "]") : t));
  }, e.prototype.reverse = function() {
    return this.toCollection().reverse();
  }, e.prototype.mapToClass = function(t) {
    var n = this, a = n.db, r = n.name;
    this.schema.mappedClass = t, t.prototype instanceof fU && (t = (function(s) {
      V8(d, s);
      function d() {
        return s !== null && s.apply(this, arguments) || this;
      }
      return Object.defineProperty(d.prototype, "db", {
        get: function() {
          return a;
        },
        enumerable: !1,
        configurable: !0
      }), d.prototype.table = function() {
        return r;
      }, d;
    })(t));
    for (var i = /* @__PURE__ */ new Set(), o = t.prototype; o; o = Eu(o))
      Object.getOwnPropertyNames(o).forEach(function(s) {
        return i.add(s);
      });
    var l = function(s) {
      if (!s)
        return s;
      var d = Object.create(t.prototype);
      for (var u in s)
        if (!i.has(u))
          try {
            d[u] = s[u];
          } catch {
          }
      return d;
    };
    return this.schema.readHook && this.hook.reading.unsubscribe(this.schema.readHook), this.schema.readHook = l, this.hook("reading", l), t;
  }, e.prototype.defineClass = function() {
    function t(n) {
      hi(this, n);
    }
    return this.mapToClass(t);
  }, e.prototype.add = function(t, n) {
    var a = this, r = this.schema.primKey, i = r.auto, o = r.keyPath, l = t;
    return o && i && (l = Oh(o)(t)), this._trans("readwrite", function(s) {
      return a.core.mutate({ trans: s, type: "add", keys: n != null ? [n] : null, values: [l] });
    }).then(function(s) {
      return s.numFailures ? kt.reject(s.failures[0]) : s.lastResult;
    }).then(function(s) {
      if (o)
        try {
          mi(t, o, s);
        } catch {
        }
      return s;
    });
  }, e.prototype.update = function(t, n) {
    if (typeof t == "object" && !pa(t)) {
      var a = es(t, this.schema.primKey.keyPath);
      return a === void 0 ? Ra(new Vt.InvalidArgument("Given object does not contain its primary key")) : this.where(":id").equals(a).modify(n);
    } else
      return this.where(":id").equals(t).modify(n);
  }, e.prototype.put = function(t, n) {
    var a = this, r = this.schema.primKey, i = r.auto, o = r.keyPath, l = t;
    return o && i && (l = Oh(o)(t)), this._trans("readwrite", function(s) {
      return a.core.mutate({ trans: s, type: "put", values: [l], keys: n != null ? [n] : null });
    }).then(function(s) {
      return s.numFailures ? kt.reject(s.failures[0]) : s.lastResult;
    }).then(function(s) {
      if (o)
        try {
          mi(t, o, s);
        } catch {
        }
      return s;
    });
  }, e.prototype.delete = function(t) {
    var n = this;
    return this._trans("readwrite", function(a) {
      return n.core.mutate({ trans: a, type: "delete", keys: [t] });
    }).then(function(a) {
      return a.numFailures ? kt.reject(a.failures[0]) : void 0;
    });
  }, e.prototype.clear = function() {
    var t = this;
    return this._trans("readwrite", function(n) {
      return t.core.mutate({ trans: n, type: "deleteRange", range: II });
    }).then(function(n) {
      return n.numFailures ? kt.reject(n.failures[0]) : void 0;
    });
  }, e.prototype.bulkGet = function(t) {
    var n = this;
    return this._trans("readonly", function(a) {
      return n.core.getMany({
        keys: t,
        trans: a
      }).then(function(r) {
        return r.map(function(i) {
          return n.hook.reading.fire(i);
        });
      });
    });
  }, e.prototype.bulkAdd = function(t, n, a) {
    var r = this, i = Array.isArray(n) ? n : void 0;
    a = a || (i ? void 0 : n);
    var o = a ? a.allKeys : void 0;
    return this._trans("readwrite", function(l) {
      var s = r.schema.primKey, d = s.auto, u = s.keyPath;
      if (u && i)
        throw new Vt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");
      if (i && i.length !== t.length)
        throw new Vt.InvalidArgument("Arguments objects and keys must have the same length");
      var f = t.length, h = u && d ? t.map(Oh(u)) : t;
      return r.core.mutate({ trans: l, type: "add", keys: i, values: h, wantResults: o }).then(function(y) {
        var p = y.numFailures, w = y.results, b = y.lastResult, v = y.failures, g = o ? w : b;
        if (p === 0)
          return g;
        throw new ou("".concat(r.name, ".bulkAdd(): ").concat(p, " of ").concat(f, " operations failed"), v);
      });
    });
  }, e.prototype.bulkPut = function(t, n, a) {
    var r = this, i = Array.isArray(n) ? n : void 0;
    a = a || (i ? void 0 : n);
    var o = a ? a.allKeys : void 0;
    return this._trans("readwrite", function(l) {
      var s = r.schema.primKey, d = s.auto, u = s.keyPath;
      if (u && i)
        throw new Vt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");
      if (i && i.length !== t.length)
        throw new Vt.InvalidArgument("Arguments objects and keys must have the same length");
      var f = t.length, h = u && d ? t.map(Oh(u)) : t;
      return r.core.mutate({ trans: l, type: "put", keys: i, values: h, wantResults: o }).then(function(y) {
        var p = y.numFailures, w = y.results, b = y.lastResult, v = y.failures, g = o ? w : b;
        if (p === 0)
          return g;
        throw new ou("".concat(r.name, ".bulkPut(): ").concat(p, " of ").concat(f, " operations failed"), v);
      });
    });
  }, e.prototype.bulkUpdate = function(t) {
    var n = this, a = this.core, r = t.map(function(l) {
      return l.key;
    }), i = t.map(function(l) {
      return l.changes;
    }), o = [];
    return this._trans("readwrite", function(l) {
      return a.getMany({ trans: l, keys: r, cache: "clone" }).then(function(s) {
        var d = [], u = [];
        t.forEach(function(h, y) {
          var p = h.key, w = h.changes, b = s[y];
          if (b) {
            for (var v = 0, g = Object.keys(w); v < g.length; v++) {
              var k = g[v], A = w[k];
              if (k === n.schema.primKey.keyPath) {
                if (vn(A, p) !== 0)
                  throw new Vt.Constraint("Cannot update primary key in bulkUpdate()");
              } else
                mi(b, k, A);
            }
            o.push(y), d.push(p), u.push(b);
          }
        });
        var f = d.length;
        return a.mutate({
          trans: l,
          type: "put",
          keys: d,
          values: u,
          updates: {
            keys: r,
            changeSpecs: i
          }
        }).then(function(h) {
          var y = h.numFailures, p = h.failures;
          if (y === 0)
            return f;
          for (var w = 0, b = Object.keys(p); w < b.length; w++) {
            var v = b[w], g = o[Number(v)];
            if (g != null) {
              var k = p[v];
              delete p[v], p[g] = k;
            }
          }
          throw new ou("".concat(n.name, ".bulkUpdate(): ").concat(y, " of ").concat(f, " operations failed"), p);
        });
      });
    });
  }, e.prototype.bulkDelete = function(t) {
    var n = this, a = t.length;
    return this._trans("readwrite", function(r) {
      return n.core.mutate({ trans: r, type: "delete", keys: t });
    }).then(function(r) {
      var i = r.numFailures, o = r.lastResult, l = r.failures;
      if (i === 0)
        return o;
      throw new ou("".concat(n.name, ".bulkDelete(): ").concat(i, " of ").concat(a, " operations failed"), l);
    });
  }, e;
})();
function Gf(e) {
  var t = {}, n = function(l, s) {
    if (s) {
      for (var d = arguments.length, u = new Array(d - 1); --d; )
        u[d - 1] = arguments[d];
      return t[l].subscribe.apply(null, u), e;
    } else if (typeof l == "string")
      return t[l];
  };
  n.addEventType = i;
  for (var a = 1, r = arguments.length; a < r; ++a)
    i(arguments[a]);
  return n;
  function i(l, s, d) {
    if (typeof l == "object")
      return o(l);
    s || (s = Z8), d || (d = Vn);
    var u = {
      subscribers: [],
      fire: d,
      subscribe: function(f) {
        u.subscribers.indexOf(f) === -1 && (u.subscribers.push(f), u.fire = s(u.fire, f));
      },
      unsubscribe: function(f) {
        u.subscribers = u.subscribers.filter(function(h) {
          return h !== f;
        }), u.fire = u.subscribers.reduce(s, d);
      }
    };
    return t[l] = n[l] = u, u;
  }
  function o(l) {
    ir(l).forEach(function(s) {
      var d = l[s];
      if (pa(d))
        i(s, l[s][0], l[s][1]);
      else if (d === "asap")
        var u = i(s, Yf, function() {
          for (var h = arguments.length, y = new Array(h); h--; )
            y[h] = arguments[h];
          u.subscribers.forEach(function(p) {
            hI(function() {
              p.apply(null, y);
            });
          });
        });
      else
        throw new Vt.InvalidArgument("Invalid event config");
    });
  }
}
function Qf(e, t) {
  return ju(t).from({ prototype: e }), t;
}
function _U(e) {
  return Qf(EI.prototype, function(n, a, r) {
    this.db = e, this._tx = r, this.name = n, this.schema = a, this.hook = e._allTables[n] ? e._allTables[n].hook : Gf(null, {
      creating: [Q8, Vn],
      reading: [G8, Yf],
      updating: [X8, Vn],
      deleting: [J8, Vn]
    });
  });
}
function Qc(e, t) {
  return !(e.filter || e.algorithm || e.or) && (t ? e.justLimit : !e.replayFilter);
}
function Gg(e, t) {
  e.filter = nc(e.filter, t);
}
function Qg(e, t, n) {
  var a = e.replayFilter;
  e.replayFilter = a ? function() {
    return nc(a(), t());
  } : t, e.justLimit = n && !a;
}
function vU(e, t) {
  e.isMatch = nc(e.isMatch, t);
}
function s_(e, t) {
  if (e.isPrimKey)
    return t.primaryKey;
  var n = t.getIndexByKeyPath(e.index);
  if (!n)
    throw new Vt.Schema("KeyPath " + e.index + " on object store " + t.name + " is not indexed");
  return n;
}
function OC(e, t, n) {
  var a = s_(e, t.schema);
  return t.openCursor({
    trans: n,
    values: !e.keysOnly,
    reverse: e.dir === "prev",
    unique: !!e.unique,
    query: {
      index: a,
      range: e.range
    }
  });
}
function Dh(e, t, n, a) {
  var r = e.replayFilter ? nc(e.filter, e.replayFilter()) : e.filter;
  if (e.or) {
    var i = {}, o = function(l, s, d) {
      if (!r || r(s, d, function(h) {
        return s.stop(h);
      }, function(h) {
        return s.fail(h);
      })) {
        var u = s.primaryKey, f = "" + u;
        f === "[object ArrayBuffer]" && (f = "" + new Uint8Array(u)), Jr(i, f) || (i[f] = !0, t(l, s, d));
      }
    };
    return Promise.all([
      e.or._iterate(o, n),
      DC(OC(e, a, n), e.algorithm, o, !e.keysOnly && e.valueMapper)
    ]);
  } else
    return DC(OC(e, a, n), nc(e.algorithm, r), t, !e.keysOnly && e.valueMapper);
}
function DC(e, t, n, a) {
  var r = a ? function(o, l, s) {
    return n(a(o), l, s);
  } : n, i = ca(r);
  return e.then(function(o) {
    if (o)
      return o.start(function() {
        var l = function() {
          return o.continue();
        };
        (!t || t(o, function(s) {
          return l = s;
        }, function(s) {
          o.stop(s), l = Vn;
        }, function(s) {
          o.fail(s), l = Vn;
        })) && i(o.value, o, function(s) {
          return l = s;
        }), l();
      });
  });
}
var pU = (function() {
  function e(t) {
    this["@@propmod"] = t;
  }
  return e.prototype.execute = function(t) {
    var n, a = this["@@propmod"];
    if (a.add !== void 0) {
      var r = a.add;
      if (pa(r))
        return P_(P_([], pa(t) ? t : [], !0), r).sort();
      if (typeof r == "number")
        return (Number(t) || 0) + r;
      if (typeof r == "bigint")
        try {
          return BigInt(t) + r;
        } catch {
          return BigInt(0) + r;
        }
      throw new TypeError("Invalid term ".concat(r));
    }
    if (a.remove !== void 0) {
      var i = a.remove;
      if (pa(i))
        return pa(t) ? t.filter(function(l) {
          return !i.includes(l);
        }).sort() : [];
      if (typeof i == "number")
        return Number(t) - i;
      if (typeof i == "bigint")
        try {
          return BigInt(t) - i;
        } catch {
          return BigInt(0) - i;
        }
      throw new TypeError("Invalid subtrahend ".concat(i));
    }
    var o = (n = a.replacePrefix) === null || n === void 0 ? void 0 : n[0];
    return o && typeof t == "string" && t.startsWith(o) ? a.replacePrefix[1] + t.substring(o.length) : t;
  }, e;
})(), gU = (function() {
  function e() {
  }
  return e.prototype._read = function(t, n) {
    var a = this._ctx;
    return a.error ? a.table._trans(null, Ra.bind(null, a.error)) : a.table._trans("readonly", t).then(n);
  }, e.prototype._write = function(t) {
    var n = this._ctx;
    return n.error ? n.table._trans(null, Ra.bind(null, n.error)) : n.table._trans("readwrite", t, "locked");
  }, e.prototype._addAlgorithm = function(t) {
    var n = this._ctx;
    n.algorithm = nc(n.algorithm, t);
  }, e.prototype._iterate = function(t, n) {
    return Dh(this._ctx, t, n, this._ctx.table.core);
  }, e.prototype.clone = function(t) {
    var n = Object.create(this.constructor.prototype), a = Object.create(this._ctx);
    return t && hi(a, t), n._ctx = a, n;
  }, e.prototype.raw = function() {
    return this._ctx.valueMapper = null, this;
  }, e.prototype.each = function(t) {
    var n = this._ctx;
    return this._read(function(a) {
      return Dh(n, t, a, n.table.core);
    });
  }, e.prototype.count = function(t) {
    var n = this;
    return this._read(function(a) {
      var r = n._ctx, i = r.table.core;
      if (Qc(r, !0))
        return i.count({
          trans: a,
          query: {
            index: s_(r, i.schema),
            range: r.range
          }
        }).then(function(l) {
          return Math.min(l, r.limit);
        });
      var o = 0;
      return Dh(r, function() {
        return ++o, !1;
      }, a, i).then(function() {
        return o;
      });
    }).then(t);
  }, e.prototype.sortBy = function(t, n) {
    var a = t.split(".").reverse(), r = a[0], i = a.length - 1;
    function o(d, u) {
      return u ? o(d[a[u]], u - 1) : d[r];
    }
    var l = this._ctx.dir === "next" ? 1 : -1;
    function s(d, u) {
      var f = o(d, i), h = o(u, i);
      return vn(f, h) * l;
    }
    return this.toArray(function(d) {
      return d.sort(s);
    }).then(n);
  }, e.prototype.toArray = function(t) {
    var n = this;
    return this._read(function(a) {
      var r = n._ctx;
      if (r.dir === "next" && Qc(r, !0) && r.limit > 0) {
        var i = r.valueMapper, o = s_(r, r.table.core.schema);
        return r.table.core.query({
          trans: a,
          limit: r.limit,
          values: !0,
          query: {
            index: o,
            range: r.range
          }
        }).then(function(s) {
          var d = s.result;
          return i ? d.map(i) : d;
        });
      } else {
        var l = [];
        return Dh(r, function(s) {
          return l.push(s);
        }, a, r.table.core).then(function() {
          return l;
        });
      }
    }, t);
  }, e.prototype.offset = function(t) {
    var n = this._ctx;
    return t <= 0 ? this : (n.offset += t, Qc(n) ? Qg(n, function() {
      var a = t;
      return function(r, i) {
        return a === 0 ? !0 : a === 1 ? (--a, !1) : (i(function() {
          r.advance(a), a = 0;
        }), !1);
      };
    }) : Qg(n, function() {
      var a = t;
      return function() {
        return --a < 0;
      };
    }), this);
  }, e.prototype.limit = function(t) {
    return this._ctx.limit = Math.min(this._ctx.limit, t), Qg(this._ctx, function() {
      var n = t;
      return function(a, r, i) {
        return --n <= 0 && r(i), n >= 0;
      };
    }, !0), this;
  }, e.prototype.until = function(t, n) {
    return Gg(this._ctx, function(a, r, i) {
      return t(a.value) ? (r(i), n) : !0;
    }), this;
  }, e.prototype.first = function(t) {
    return this.limit(1).toArray(function(n) {
      return n[0];
    }).then(t);
  }, e.prototype.last = function(t) {
    return this.reverse().first(t);
  }, e.prototype.filter = function(t) {
    return Gg(this._ctx, function(n) {
      return t(n.value);
    }), vU(this._ctx, t), this;
  }, e.prototype.and = function(t) {
    return this.filter(t);
  }, e.prototype.or = function(t) {
    return new this.db.WhereClause(this._ctx.table, t, this);
  }, e.prototype.reverse = function() {
    return this._ctx.dir = this._ctx.dir === "prev" ? "next" : "prev", this._ondirectionchange && this._ondirectionchange(this._ctx.dir), this;
  }, e.prototype.desc = function() {
    return this.reverse();
  }, e.prototype.eachKey = function(t) {
    var n = this._ctx;
    return n.keysOnly = !n.isMatch, this.each(function(a, r) {
      t(r.key, r);
    });
  }, e.prototype.eachUniqueKey = function(t) {
    return this._ctx.unique = "unique", this.eachKey(t);
  }, e.prototype.eachPrimaryKey = function(t) {
    var n = this._ctx;
    return n.keysOnly = !n.isMatch, this.each(function(a, r) {
      t(r.primaryKey, r);
    });
  }, e.prototype.keys = function(t) {
    var n = this._ctx;
    n.keysOnly = !n.isMatch;
    var a = [];
    return this.each(function(r, i) {
      a.push(i.key);
    }).then(function() {
      return a;
    }).then(t);
  }, e.prototype.primaryKeys = function(t) {
    var n = this._ctx;
    if (n.dir === "next" && Qc(n, !0) && n.limit > 0)
      return this._read(function(r) {
        var i = s_(n, n.table.core.schema);
        return n.table.core.query({
          trans: r,
          values: !1,
          limit: n.limit,
          query: {
            index: i,
            range: n.range
          }
        });
      }).then(function(r) {
        var i = r.result;
        return i;
      }).then(t);
    n.keysOnly = !n.isMatch;
    var a = [];
    return this.each(function(r, i) {
      a.push(i.primaryKey);
    }).then(function() {
      return a;
    }).then(t);
  }, e.prototype.uniqueKeys = function(t) {
    return this._ctx.unique = "unique", this.keys(t);
  }, e.prototype.firstKey = function(t) {
    return this.limit(1).keys(function(n) {
      return n[0];
    }).then(t);
  }, e.prototype.lastKey = function(t) {
    return this.reverse().firstKey(t);
  }, e.prototype.distinct = function() {
    var t = this._ctx, n = t.index && t.table.schema.idxByName[t.index];
    if (!n || !n.multi)
      return this;
    var a = {};
    return Gg(this._ctx, function(r) {
      var i = r.primaryKey.toString(), o = Jr(a, i);
      return a[i] = !0, !o;
    }), this;
  }, e.prototype.modify = function(t) {
    var n = this, a = this._ctx;
    return this._write(function(r) {
      var i;
      if (typeof t == "function")
        i = t;
      else {
        var o = ir(t), l = o.length;
        i = function(g) {
          for (var k = !1, A = 0; A < l; ++A) {
            var C = o[A], D = t[C], P = es(g, C);
            D instanceof pU ? (mi(g, C, D.execute(P)), k = !0) : P !== D && (mi(g, C, D), k = !0);
          }
          return k;
        };
      }
      var s = a.table.core, d = s.schema.primaryKey, u = d.outbound, f = d.extractKey, h = 200, y = n.db._options.modifyChunkSize;
      y && (typeof y == "object" ? h = y[s.name] || y["*"] || 200 : h = y);
      var p = [], w = 0, b = [], v = function(g, k) {
        var A = k.failures, C = k.numFailures;
        w += g - C;
        for (var D = 0, P = ir(A); D < P.length; D++) {
          var O = P[D];
          p.push(A[O]);
        }
      };
      return n.clone().primaryKeys().then(function(g) {
        var k = Qc(a) && a.limit === 1 / 0 && (typeof t != "function" || t === Jg) && {
          index: a.index,
          range: a.range
        }, A = function(C) {
          var D = Math.min(h, g.length - C);
          return s.getMany({
            trans: r,
            keys: g.slice(C, C + D),
            cache: "immutable"
          }).then(function(P) {
            for (var O = [], I = [], x = u ? [] : null, M = [], V = 0; V < D; ++V) {
              var B = P[V], F = {
                value: Zl(B),
                primKey: g[C + V]
              };
              i.call(F, F.value, F) !== !1 && (F.value == null ? M.push(g[C + V]) : !u && vn(f(B), f(F.value)) !== 0 ? (M.push(g[C + V]), O.push(F.value)) : (I.push(F.value), u && x.push(g[C + V])));
            }
            return Promise.resolve(O.length > 0 && s.mutate({ trans: r, type: "add", values: O }).then(function(H) {
              for (var K in H.failures)
                M.splice(parseInt(K), 1);
              v(O.length, H);
            })).then(function() {
              return (I.length > 0 || k && typeof t == "object") && s.mutate({
                trans: r,
                type: "put",
                keys: x,
                values: I,
                criteria: k,
                changeSpec: typeof t != "function" && t,
                isAdditionalChunk: C > 0
              }).then(function(H) {
                return v(I.length, H);
              });
            }).then(function() {
              return (M.length > 0 || k && t === Jg) && s.mutate({
                trans: r,
                type: "delete",
                keys: M,
                criteria: k,
                isAdditionalChunk: C > 0
              }).then(function(H) {
                return v(M.length, H);
              });
            }).then(function() {
              return g.length > C + D && A(C + h);
            });
          });
        };
        return A(0).then(function() {
          if (p.length > 0)
            throw new O_("Error modifying one or more objects", p, w, b);
          return g.length;
        });
      });
    });
  }, e.prototype.delete = function() {
    var t = this._ctx, n = t.range;
    return Qc(t) && (t.isPrimKey || n.type === 3) ? this._write(function(a) {
      var r = t.table.core.schema.primaryKey, i = n;
      return t.table.core.count({ trans: a, query: { index: r, range: i } }).then(function(o) {
        return t.table.core.mutate({ trans: a, type: "deleteRange", range: i }).then(function(l) {
          var s = l.failures;
          l.lastResult, l.results;
          var d = l.numFailures;
          if (d)
            throw new O_("Could not delete some values", Object.keys(s).map(function(u) {
              return s[u];
            }), o - d);
          return o - d;
        });
      });
    }) : this.modify(Jg);
  }, e;
})(), Jg = function(e, t) {
  return t.value = null;
};
function yU(e) {
  return Qf(gU.prototype, function(n, a) {
    this.db = e;
    var r = II, i = null;
    if (a)
      try {
        r = a();
      } catch (d) {
        i = d;
      }
    var o = n._ctx, l = o.table, s = l.hook.reading.fire;
    this._ctx = {
      table: l,
      index: o.index,
      isPrimKey: !o.index || l.schema.primKey.keyPath && o.index === l.schema.primKey.name,
      range: r,
      keysOnly: !1,
      dir: "next",
      unique: "",
      algorithm: null,
      filter: null,
      replayFilter: null,
      justLimit: !0,
      isMatch: null,
      offset: 0,
      limit: 1 / 0,
      error: i,
      or: o.or,
      valueMapper: s !== Yf ? s : null
    };
  });
}
function bU(e, t) {
  return e < t ? -1 : e === t ? 0 : 1;
}
function wU(e, t) {
  return e > t ? -1 : e === t ? 0 : 1;
}
function oi(e, t, n) {
  var a = e instanceof OI ? new e.Collection(e) : e;
  return a._ctx.error = n ? new n(t) : new TypeError(t), a;
}
function Jc(e) {
  return new e.Collection(e, function() {
    return PI("");
  }).limit(0);
}
function kU(e) {
  return e === "next" ? function(t) {
    return t.toUpperCase();
  } : function(t) {
    return t.toLowerCase();
  };
}
function SU(e) {
  return e === "next" ? function(t) {
    return t.toLowerCase();
  } : function(t) {
    return t.toUpperCase();
  };
}
function CU(e, t, n, a, r, i) {
  for (var o = Math.min(e.length, a.length), l = -1, s = 0; s < o; ++s) {
    var d = t[s];
    if (d !== a[s])
      return r(e[s], n[s]) < 0 ? e.substr(0, s) + n[s] + n.substr(s + 1) : r(e[s], a[s]) < 0 ? e.substr(0, s) + a[s] + n.substr(s + 1) : l >= 0 ? e.substr(0, l) + t[l] + n.substr(l + 1) : null;
    r(e[s], d) < 0 && (l = s);
  }
  return o < a.length && i === "next" ? e + n.substr(e.length) : o < e.length && i === "prev" ? e.substr(0, n.length) : l < 0 ? null : e.substr(0, l) + a[l] + n.substr(l + 1);
}
function Bh(e, t, n, a) {
  var r, i, o, l, s, d, u, f = n.length;
  if (!n.every(function(w) {
    return typeof w == "string";
  }))
    return oi(e, TI);
  function h(w) {
    r = kU(w), i = SU(w), o = w === "next" ? bU : wU;
    var b = n.map(function(v) {
      return { lower: i(v), upper: r(v) };
    }).sort(function(v, g) {
      return o(v.lower, g.lower);
    });
    l = b.map(function(v) {
      return v.upper;
    }), s = b.map(function(v) {
      return v.lower;
    }), d = w, u = w === "next" ? "" : a;
  }
  h("next");
  var y = new e.Collection(e, function() {
    return Ps(l[0], s[f - 1] + a);
  });
  y._ondirectionchange = function(w) {
    h(w);
  };
  var p = 0;
  return y._addAlgorithm(function(w, b, v) {
    var g = w.key;
    if (typeof g != "string")
      return !1;
    var k = i(g);
    if (t(k, s, p))
      return !0;
    for (var A = null, C = p; C < f; ++C) {
      var D = CU(g, k, l[C], s[C], o, d);
      D === null && A === null ? p = C + 1 : (A === null || o(A, D) > 0) && (A = D);
    }
    return b(A !== null ? function() {
      w.continue(A + u);
    } : v), !1;
  }), y;
}
function Ps(e, t, n, a) {
  return {
    type: 2,
    lower: e,
    upper: t,
    lowerOpen: n,
    upperOpen: a
  };
}
function PI(e) {
  return {
    type: 1,
    lower: e,
    upper: e
  };
}
var OI = (function() {
  function e() {
  }
  return Object.defineProperty(e.prototype, "Collection", {
    get: function() {
      return this._ctx.table.db.Collection;
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.between = function(t, n, a, r) {
    a = a !== !1, r = r === !0;
    try {
      return this._cmp(t, n) > 0 || this._cmp(t, n) === 0 && (a || r) && !(a && r) ? Jc(this) : new this.Collection(this, function() {
        return Ps(t, n, !a, !r);
      });
    } catch {
      return oi(this, Wo);
    }
  }, e.prototype.equals = function(t) {
    return t == null ? oi(this, Wo) : new this.Collection(this, function() {
      return PI(t);
    });
  }, e.prototype.above = function(t) {
    return t == null ? oi(this, Wo) : new this.Collection(this, function() {
      return Ps(t, void 0, !0);
    });
  }, e.prototype.aboveOrEqual = function(t) {
    return t == null ? oi(this, Wo) : new this.Collection(this, function() {
      return Ps(t, void 0, !1);
    });
  }, e.prototype.below = function(t) {
    return t == null ? oi(this, Wo) : new this.Collection(this, function() {
      return Ps(void 0, t, !1, !0);
    });
  }, e.prototype.belowOrEqual = function(t) {
    return t == null ? oi(this, Wo) : new this.Collection(this, function() {
      return Ps(void 0, t);
    });
  }, e.prototype.startsWith = function(t) {
    return typeof t != "string" ? oi(this, TI) : this.between(t, t + Nl, !0, !0);
  }, e.prototype.startsWithIgnoreCase = function(t) {
    return t === "" ? this.startsWith(t) : Bh(this, function(n, a) {
      return n.indexOf(a[0]) === 0;
    }, [t], Nl);
  }, e.prototype.equalsIgnoreCase = function(t) {
    return Bh(this, function(n, a) {
      return n === a[0];
    }, [t], "");
  }, e.prototype.anyOfIgnoreCase = function() {
    var t = Qo.apply(au, arguments);
    return t.length === 0 ? Jc(this) : Bh(this, function(n, a) {
      return a.indexOf(n) !== -1;
    }, t, "");
  }, e.prototype.startsWithAnyOfIgnoreCase = function() {
    var t = Qo.apply(au, arguments);
    return t.length === 0 ? Jc(this) : Bh(this, function(n, a) {
      return a.some(function(r) {
        return n.indexOf(r) === 0;
      });
    }, t, Nl);
  }, e.prototype.anyOf = function() {
    var t = this, n = Qo.apply(au, arguments), a = this._cmp;
    try {
      n.sort(a);
    } catch {
      return oi(this, Wo);
    }
    if (n.length === 0)
      return Jc(this);
    var r = new this.Collection(this, function() {
      return Ps(n[0], n[n.length - 1]);
    });
    r._ondirectionchange = function(o) {
      a = o === "next" ? t._ascending : t._descending, n.sort(a);
    };
    var i = 0;
    return r._addAlgorithm(function(o, l, s) {
      for (var d = o.key; a(d, n[i]) > 0; )
        if (++i, i === n.length)
          return l(s), !1;
      return a(d, n[i]) === 0 ? !0 : (l(function() {
        o.continue(n[i]);
      }), !1);
    }), r;
  }, e.prototype.notEqual = function(t) {
    return this.inAnyRange([[fb, t], [t, this.db._maxKey]], { includeLowers: !1, includeUppers: !1 });
  }, e.prototype.noneOf = function() {
    var t = Qo.apply(au, arguments);
    if (t.length === 0)
      return new this.Collection(this);
    try {
      t.sort(this._ascending);
    } catch {
      return oi(this, Wo);
    }
    var n = t.reduce(function(a, r) {
      return a ? a.concat([[a[a.length - 1][1], r]]) : [[fb, r]];
    }, null);
    return n.push([t[t.length - 1], this.db._maxKey]), this.inAnyRange(n, { includeLowers: !1, includeUppers: !1 });
  }, e.prototype.inAnyRange = function(t, n) {
    var a = this, r = this._cmp, i = this._ascending, o = this._descending, l = this._min, s = this._max;
    if (t.length === 0)
      return Jc(this);
    if (!t.every(function(C) {
      return C[0] !== void 0 && C[1] !== void 0 && i(C[0], C[1]) <= 0;
    }))
      return oi(this, "First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower", Vt.InvalidArgument);
    var d = !n || n.includeLowers !== !1, u = n && n.includeUppers === !0;
    function f(C, D) {
      for (var P = 0, O = C.length; P < O; ++P) {
        var I = C[P];
        if (r(D[0], I[1]) < 0 && r(D[1], I[0]) > 0) {
          I[0] = l(I[0], D[0]), I[1] = s(I[1], D[1]);
          break;
        }
      }
      return P === O && C.push(D), C;
    }
    var h = i;
    function y(C, D) {
      return h(C[0], D[0]);
    }
    var p;
    try {
      p = t.reduce(f, []), p.sort(y);
    } catch {
      return oi(this, Wo);
    }
    var w = 0, b = u ? function(C) {
      return i(C, p[w][1]) > 0;
    } : function(C) {
      return i(C, p[w][1]) >= 0;
    }, v = d ? function(C) {
      return o(C, p[w][0]) > 0;
    } : function(C) {
      return o(C, p[w][0]) >= 0;
    };
    function g(C) {
      return !b(C) && !v(C);
    }
    var k = b, A = new this.Collection(this, function() {
      return Ps(p[0][0], p[p.length - 1][1], !d, !u);
    });
    return A._ondirectionchange = function(C) {
      C === "next" ? (k = b, h = i) : (k = v, h = o), p.sort(y);
    }, A._addAlgorithm(function(C, D, P) {
      for (var O = C.key; k(O); )
        if (++w, w === p.length)
          return D(P), !1;
      return g(O) ? !0 : (a._cmp(O, p[w][1]) === 0 || a._cmp(O, p[w][0]) === 0 || D(function() {
        h === i ? C.continue(p[w][0]) : C.continue(p[w][1]);
      }), !1);
    }), A;
  }, e.prototype.startsWithAnyOf = function() {
    var t = Qo.apply(au, arguments);
    return t.every(function(n) {
      return typeof n == "string";
    }) ? t.length === 0 ? Jc(this) : this.inAnyRange(t.map(function(n) {
      return [n, n + Nl];
    })) : oi(this, "startsWithAnyOf() only works with strings");
  }, e;
})();
function AU(e) {
  return Qf(OI.prototype, function(n, a, r) {
    if (this.db = e, this._ctx = {
      table: n,
      index: a === ":id" ? null : a,
      or: r
    }, this._cmp = this._ascending = vn, this._descending = function(i, o) {
      return vn(o, i);
    }, this._max = function(i, o) {
      return vn(i, o) > 0 ? i : o;
    }, this._min = function(i, o) {
      return vn(i, o) < 0 ? i : o;
    }, this._IDBKeyRange = e._deps.IDBKeyRange, !this._IDBKeyRange)
      throw new Vt.MissingAPI();
  });
}
function _o(e) {
  return ca(function(t) {
    return xf(t), e(t.target.error), !1;
  });
}
function xf(e) {
  e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault();
}
var Jf = "storagemutated", mb = "x-storagemutated-1", Ys = Gf(null, Jf), xU = (function() {
  function e() {
  }
  return e.prototype._lock = function() {
    return Gd(!Pt.global), ++this._reculock, this._reculock === 1 && !Pt.global && (Pt.lockOwnerFor = this), this;
  }, e.prototype._unlock = function() {
    if (Gd(!Pt.global), --this._reculock === 0)
      for (Pt.global || (Pt.lockOwnerFor = null); this._blockedFuncs.length > 0 && !this._locked(); ) {
        var t = this._blockedFuncs.shift();
        try {
          tc(t[1], t[0]);
        } catch {
        }
      }
    return this;
  }, e.prototype._locked = function() {
    return this._reculock && Pt.lockOwnerFor !== this;
  }, e.prototype.create = function(t) {
    var n = this;
    if (!this.mode)
      return this;
    var a = this.db.idbdb, r = this.db._state.dbOpenError;
    if (Gd(!this.idbtrans), !t && !a)
      switch (r && r.name) {
        case "DatabaseClosedError":
          throw new Vt.DatabaseClosed(r);
        case "MissingAPIError":
          throw new Vt.MissingAPI(r.message, r);
        default:
          throw new Vt.OpenFailed(r);
      }
    if (!this.active)
      throw new Vt.TransactionInactive();
    return Gd(this._completion._state === null), t = this.idbtrans = t || (this.db.core ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }) : a.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })), t.onerror = ca(function(i) {
      xf(i), n._reject(t.error);
    }), t.onabort = ca(function(i) {
      xf(i), n.active && n._reject(new Vt.Abort(t.error)), n.active = !1, n.on("abort").fire(i);
    }), t.oncomplete = ca(function() {
      n.active = !1, n._resolve(), "mutatedParts" in t && Ys.storagemutated.fire(t.mutatedParts);
    }), this;
  }, e.prototype._promise = function(t, n, a) {
    var r = this;
    if (t === "readwrite" && this.mode !== "readwrite")
      return Ra(new Vt.ReadOnly("Transaction is readonly"));
    if (!this.active)
      return Ra(new Vt.TransactionInactive());
    if (this._locked())
      return new kt(function(o, l) {
        r._blockedFuncs.push([function() {
          r._promise(t, n, a).then(o, l);
        }, Pt]);
      });
    if (a)
      return Ws(function() {
        var o = new kt(function(l, s) {
          r._lock();
          var d = n(l, s, r);
          d && d.then && d.then(l, s);
        });
        return o.finally(function() {
          return r._unlock();
        }), o._lib = !0, o;
      });
    var i = new kt(function(o, l) {
      var s = n(o, l, r);
      s && s.then && s.then(o, l);
    });
    return i._lib = !0, i;
  }, e.prototype._root = function() {
    return this.parent ? this.parent._root() : this;
  }, e.prototype.waitFor = function(t) {
    var n = this._root(), a = kt.resolve(t);
    if (n._waitingFor)
      n._waitingFor = n._waitingFor.then(function() {
        return a;
      });
    else {
      n._waitingFor = a, n._waitingQueue = [];
      var r = n.idbtrans.objectStore(n.storeNames[0]);
      (function o() {
        for (++n._spinCount; n._waitingQueue.length; )
          n._waitingQueue.shift()();
        n._waitingFor && (r.get(-1 / 0).onsuccess = o);
      })();
    }
    var i = n._waitingFor;
    return new kt(function(o, l) {
      a.then(function(s) {
        return n._waitingQueue.push(ca(o.bind(null, s)));
      }, function(s) {
        return n._waitingQueue.push(ca(l.bind(null, s)));
      }).finally(function() {
        n._waitingFor === i && (n._waitingFor = null);
      });
    });
  }, e.prototype.abort = function() {
    this.active && (this.active = !1, this.idbtrans && this.idbtrans.abort(), this._reject(new Vt.Abort()));
  }, e.prototype.table = function(t) {
    var n = this._memoizedTables || (this._memoizedTables = {});
    if (Jr(n, t))
      return n[t];
    var a = this.schema[t];
    if (!a)
      throw new Vt.NotFound("Table " + t + " not part of transaction");
    var r = new this.db.Table(t, a, this);
    return r.core = this.db.core.table(t), n[t] = r, r;
  }, e;
})();
function TU(e) {
  return Qf(xU.prototype, function(n, a, r, i, o) {
    var l = this;
    this.db = e, this.mode = n, this.storeNames = a, this.schema = r, this.chromeTransactionDurability = i, this.idbtrans = null, this.on = Gf(this, "complete", "error", "abort"), this.parent = o || null, this.active = !0, this._reculock = 0, this._blockedFuncs = [], this._resolve = null, this._reject = null, this._waitingFor = null, this._waitingQueue = null, this._spinCount = 0, this._completion = new kt(function(s, d) {
      l._resolve = s, l._reject = d;
    }), this._completion.then(function() {
      l.active = !1, l.on.complete.fire();
    }, function(s) {
      var d = l.active;
      return l.active = !1, l.on.error.fire(s), l.parent ? l.parent._reject(s) : d && l.idbtrans && l.idbtrans.abort(), Ra(s);
    });
  });
}
function hb(e, t, n, a, r, i, o) {
  return {
    name: e,
    keyPath: t,
    unique: n,
    multi: a,
    auto: r,
    compound: i,
    src: (n && !o ? "&" : "") + (a ? "*" : "") + (r ? "++" : "") + DI(t)
  };
}
function DI(e) {
  return typeof e == "string" ? e : e ? "[" + [].join.call(e, "+") + "]" : "";
}
function t0(e, t, n) {
  return {
    name: e,
    primKey: t,
    indexes: n,
    mappedClass: null,
    idxByName: F8(n, function(a) {
      return [a.name, a];
    })
  };
}
function IU(e) {
  return e.length === 1 ? e[0] : e;
}
var Tf = function(e) {
  try {
    return e.only([[]]), Tf = function() {
      return [[]];
    }, [[]];
  } catch {
    return Tf = function() {
      return Nl;
    }, Nl;
  }
};
function _b(e) {
  return e == null ? function() {
  } : typeof e == "string" ? EU(e) : function(t) {
    return es(t, e);
  };
}
function EU(e) {
  var t = e.split(".");
  return t.length === 1 ? function(n) {
    return n[e];
  } : function(n) {
    return es(n, e);
  };
}
function BC(e) {
  return [].slice.call(e);
}
var PU = 0;
function cf(e) {
  return e == null ? ":id" : typeof e == "string" ? e : "[".concat(e.join("+"), "]");
}
function OU(e, t, n) {
  function a(f, h) {
    var y = BC(f.objectStoreNames);
    return {
      schema: {
        name: f.name,
        tables: y.map(function(p) {
          return h.objectStore(p);
        }).map(function(p) {
          var w = p.keyPath, b = p.autoIncrement, v = pa(w), g = w == null, k = {}, A = {
            name: p.name,
            primaryKey: {
              name: null,
              isPrimaryKey: !0,
              outbound: g,
              compound: v,
              keyPath: w,
              autoIncrement: b,
              unique: !0,
              extractKey: _b(w)
            },
            indexes: BC(p.indexNames).map(function(C) {
              return p.index(C);
            }).map(function(C) {
              var D = C.name, P = C.unique, O = C.multiEntry, I = C.keyPath, x = pa(I), M = {
                name: D,
                compound: x,
                keyPath: I,
                unique: P,
                multiEntry: O,
                extractKey: _b(I)
              };
              return k[cf(I)] = M, M;
            }),
            getIndexByKeyPath: function(C) {
              return k[cf(C)];
            }
          };
          return k[":id"] = A.primaryKey, w != null && (k[cf(w)] = A.primaryKey), A;
        })
      },
      hasGetAll: y.length > 0 && "getAll" in h.objectStore(y[0]) && !(typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604)
    };
  }
  function r(f) {
    if (f.type === 3)
      return null;
    if (f.type === 4)
      throw new Error("Cannot convert never type to IDBKeyRange");
    var h = f.lower, y = f.upper, p = f.lowerOpen, w = f.upperOpen, b = h === void 0 ? y === void 0 ? null : t.upperBound(y, !!w) : y === void 0 ? t.lowerBound(h, !!p) : t.bound(h, y, !!p, !!w);
    return b;
  }
  function i(f) {
    var h = f.name;
    function y(b) {
      var v = b.trans, g = b.type, k = b.keys, A = b.values, C = b.range;
      return new Promise(function(D, P) {
        D = ca(D);
        var O = v.objectStore(h), I = O.keyPath == null, x = g === "put" || g === "add";
        if (!x && g !== "delete" && g !== "deleteRange")
          throw new Error("Invalid operation type: " + g);
        var M = (k || A || { length: 1 }).length;
        if (k && A && k.length !== A.length)
          throw new Error("Given keys array must have same length as given values array.");
        if (M === 0)
          return D({ numFailures: 0, failures: {}, results: [], lastResult: void 0 });
        var V, B = [], F = [], H = 0, K = function(oe) {
          ++H, xf(oe);
        };
        if (g === "deleteRange") {
          if (C.type === 4)
            return D({ numFailures: H, failures: F, results: [], lastResult: void 0 });
          C.type === 3 ? B.push(V = O.clear()) : B.push(V = O.delete(r(C)));
        } else {
          var Z = x ? I ? [A, k] : [A, null] : [k, null], ue = Z[0], Y = Z[1];
          if (x)
            for (var U = 0; U < M; ++U)
              B.push(V = Y && Y[U] !== void 0 ? O[g](ue[U], Y[U]) : O[g](ue[U])), V.onerror = K;
          else
            for (var U = 0; U < M; ++U)
              B.push(V = O[g](ue[U])), V.onerror = K;
        }
        var q = function(oe) {
          var ee = oe.target.result;
          B.forEach(function(he, ve) {
            return he.error != null && (F[ve] = he.error);
          }), D({
            numFailures: H,
            failures: F,
            results: g === "delete" ? k : B.map(function(he) {
              return he.result;
            }),
            lastResult: ee
          });
        };
        V.onerror = function(oe) {
          K(oe), q(oe);
        }, V.onsuccess = q;
      });
    }
    function p(b) {
      var v = b.trans, g = b.values, k = b.query, A = b.reverse, C = b.unique;
      return new Promise(function(D, P) {
        D = ca(D);
        var O = k.index, I = k.range, x = v.objectStore(h), M = O.isPrimaryKey ? x : x.index(O.name), V = A ? C ? "prevunique" : "prev" : C ? "nextunique" : "next", B = g || !("openKeyCursor" in M) ? M.openCursor(r(I), V) : M.openKeyCursor(r(I), V);
        B.onerror = _o(P), B.onsuccess = ca(function(F) {
          var H = B.result;
          if (!H) {
            D(null);
            return;
          }
          H.___id = ++PU, H.done = !1;
          var K = H.continue.bind(H), Z = H.continuePrimaryKey;
          Z && (Z = Z.bind(H));
          var ue = H.advance.bind(H), Y = function() {
            throw new Error("Cursor not started");
          }, U = function() {
            throw new Error("Cursor not stopped");
          };
          H.trans = v, H.stop = H.continue = H.continuePrimaryKey = H.advance = Y, H.fail = ca(P), H.next = function() {
            var q = this, oe = 1;
            return this.start(function() {
              return oe-- ? q.continue() : q.stop();
            }).then(function() {
              return q;
            });
          }, H.start = function(q) {
            var oe = new Promise(function(he, ve) {
              he = ca(he), B.onerror = _o(ve), H.fail = ve, H.stop = function(pe) {
                H.stop = H.continue = H.continuePrimaryKey = H.advance = U, he(pe);
              };
            }), ee = function() {
              if (B.result)
                try {
                  q();
                } catch (he) {
                  H.fail(he);
                }
              else
                H.done = !0, H.start = function() {
                  throw new Error("Cursor behind last entry");
                }, H.stop();
            };
            return B.onsuccess = ca(function(he) {
              B.onsuccess = ee, ee();
            }), H.continue = K, H.continuePrimaryKey = Z, H.advance = ue, ee(), oe;
          }, D(H);
        }, P);
      });
    }
    function w(b) {
      return function(v) {
        return new Promise(function(g, k) {
          g = ca(g);
          var A = v.trans, C = v.values, D = v.limit, P = v.query, O = D === 1 / 0 ? void 0 : D, I = P.index, x = P.range, M = A.objectStore(h), V = I.isPrimaryKey ? M : M.index(I.name), B = r(x);
          if (D === 0)
            return g({ result: [] });
          if (b) {
            var F = C ? V.getAll(B, O) : V.getAllKeys(B, O);
            F.onsuccess = function(ue) {
              return g({ result: ue.target.result });
            }, F.onerror = _o(k);
          } else {
            var H = 0, K = C || !("openKeyCursor" in V) ? V.openCursor(B) : V.openKeyCursor(B), Z = [];
            K.onsuccess = function(ue) {
              var Y = K.result;
              if (!Y)
                return g({ result: Z });
              if (Z.push(C ? Y.value : Y.primaryKey), ++H === D)
                return g({ result: Z });
              Y.continue();
            }, K.onerror = _o(k);
          }
        });
      };
    }
    return {
      name: h,
      schema: f,
      mutate: y,
      getMany: function(b) {
        var v = b.trans, g = b.keys;
        return new Promise(function(k, A) {
          k = ca(k);
          for (var C = v.objectStore(h), D = g.length, P = new Array(D), O = 0, I = 0, x, M = function(H) {
            var K = H.target;
            (P[K._pos] = K.result) != null, ++I === O && k(P);
          }, V = _o(A), B = 0; B < D; ++B) {
            var F = g[B];
            F != null && (x = C.get(g[B]), x._pos = B, x.onsuccess = M, x.onerror = V, ++O);
          }
          O === 0 && k(P);
        });
      },
      get: function(b) {
        var v = b.trans, g = b.key;
        return new Promise(function(k, A) {
          k = ca(k);
          var C = v.objectStore(h), D = C.get(g);
          D.onsuccess = function(P) {
            return k(P.target.result);
          }, D.onerror = _o(A);
        });
      },
      query: w(s),
      openCursor: p,
      count: function(b) {
        var v = b.query, g = b.trans, k = v.index, A = v.range;
        return new Promise(function(C, D) {
          var P = g.objectStore(h), O = k.isPrimaryKey ? P : P.index(k.name), I = r(A), x = I ? O.count(I) : O.count();
          x.onsuccess = ca(function(M) {
            return C(M.target.result);
          }), x.onerror = _o(D);
        });
      }
    };
  }
  var o = a(e, n), l = o.schema, s = o.hasGetAll, d = l.tables.map(function(f) {
    return i(f);
  }), u = {};
  return d.forEach(function(f) {
    return u[f.name] = f;
  }), {
    stack: "dbcore",
    transaction: e.transaction.bind(e),
    table: function(f) {
      var h = u[f];
      if (!h)
        throw new Error("Table '".concat(f, "' not found"));
      return u[f];
    },
    MIN_KEY: -1 / 0,
    MAX_KEY: Tf(t),
    schema: l
  };
}
function DU(e, t) {
  return t.reduce(function(n, a) {
    var r = a.create;
    return Jt(Jt({}, n), r(n));
  }, e);
}
function BU(e, t, n, a) {
  var r = n.IDBKeyRange;
  n.indexedDB;
  var i = DU(OU(t, r, a), e.dbcore);
  return {
    dbcore: i
  };
}
function M_(e, t) {
  var n = t.db, a = BU(e._middlewares, n, e._deps, t);
  e.core = a.dbcore, e.tables.forEach(function(r) {
    var i = r.name;
    e.core.schema.tables.some(function(o) {
      return o.name === i;
    }) && (r.core = e.core.table(i), e[i] instanceof e.Table && (e[i].core = r.core));
  });
}
function L_(e, t, n, a) {
  n.forEach(function(r) {
    var i = a[r];
    t.forEach(function(o) {
      var l = fI(o, r);
      (!l || "value" in l && l.value === void 0) && (o === e.Transaction.prototype || o instanceof e.Transaction ? zs(o, r, {
        get: function() {
          return this.table(r);
        },
        set: function(s) {
          dI(this, r, { value: s, writable: !0, configurable: !0, enumerable: !0 });
        }
      }) : o[r] = new e.Table(r, i));
    });
  });
}
function vb(e, t) {
  t.forEach(function(n) {
    for (var a in n)
      n[a] instanceof e.Table && delete n[a];
  });
}
function VU(e, t) {
  return e._cfg.version - t._cfg.version;
}
function MU(e, t, n, a) {
  var r = e._dbSchema;
  n.objectStoreNames.contains("$meta") && !r.$meta && (r.$meta = t0("$meta", VI("")[0], []), e._storeNames.push("$meta"));
  var i = e._createTransaction("readwrite", e._storeNames, r);
  i.create(n), i._completion.catch(a);
  var o = i._reject.bind(i), l = Pt.transless || Pt;
  Ws(function() {
    if (Pt.trans = i, Pt.transless = l, t === 0)
      ir(r).forEach(function(s) {
        a0(n, s, r[s].primKey, r[s].indexes);
      }), M_(e, n), kt.follow(function() {
        return e.on.populate.fire(i);
      }).catch(o);
    else
      return M_(e, n), RU(e, i, t).then(function(s) {
        return FU(e, s, i, n);
      }).catch(o);
  });
}
function LU(e, t) {
  BI(e._dbSchema, t), t.db.version % 10 === 0 && !t.objectStoreNames.contains("$meta") && t.db.createObjectStore("$meta").add(Math.ceil(t.db.version / 10 - 1), "version");
  var n = gv(e, e.idbdb, t);
  F_(e, e._dbSchema, t);
  for (var a = n0(n, e._dbSchema), r = function(d) {
    if (d.change.length || d.recreate)
      return console.warn("Unable to patch indexes of table ".concat(d.name, " because it has changes on the type of index or primary key.")), { value: void 0 };
    var u = t.objectStore(d.name);
    d.add.forEach(function(f) {
      Co && console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name, ".").concat(f.src)), R_(u, f);
    });
  }, i = 0, o = a.change; i < o.length; i++) {
    var l = o[i], s = r(l);
    if (typeof s == "object")
      return s.value;
  }
}
function RU(e, t, n) {
  return t.storeNames.includes("$meta") ? t.table("$meta").get("version").then(function(a) {
    return a ?? n;
  }) : kt.resolve(n);
}
function FU(e, t, n, a) {
  var r = [], i = e._versions, o = e._dbSchema = gv(e, e.idbdb, a), l = i.filter(function(d) {
    return d._cfg.version >= t;
  });
  if (l.length === 0)
    return kt.resolve();
  l.forEach(function(d) {
    r.push(function() {
      var u = o, f = d._cfg.dbschema;
      F_(e, u, a), F_(e, f, a), o = e._dbSchema = f;
      var h = n0(u, f);
      h.add.forEach(function(g) {
        a0(a, g[0], g[1].primKey, g[1].indexes);
      }), h.change.forEach(function(g) {
        if (g.recreate)
          throw new Vt.Upgrade("Not yet support for changing primary key");
        var k = a.objectStore(g.name);
        g.add.forEach(function(A) {
          return R_(k, A);
        }), g.change.forEach(function(A) {
          k.deleteIndex(A.name), R_(k, A);
        }), g.del.forEach(function(A) {
          return k.deleteIndex(A);
        });
      });
      var y = d._cfg.contentUpgrade;
      if (y && d._cfg.version > t) {
        M_(e, a), n._memoizedTables = {};
        var p = _I(f);
        h.del.forEach(function(g) {
          p[g] = u[g];
        }), vb(e, [e.Transaction.prototype]), L_(e, [e.Transaction.prototype], ir(p), p), n.schema = p;
        var w = jw(y);
        w && Ju();
        var b, v = kt.follow(function() {
          if (b = y(n), b && w) {
            var g = Ks.bind(null, null);
            b.then(g, g);
          }
        });
        return b && typeof b.then == "function" ? kt.resolve(b) : v.then(function() {
          return b;
        });
      }
    }), r.push(function(u) {
      var f = d._cfg.dbschema;
      NU(f, u), vb(e, [e.Transaction.prototype]), L_(e, [e.Transaction.prototype], e._storeNames, e._dbSchema), n.schema = e._dbSchema;
    }), r.push(function(u) {
      e.idbdb.objectStoreNames.contains("$meta") && (Math.ceil(e.idbdb.version / 10) === d._cfg.version ? (e.idbdb.deleteObjectStore("$meta"), delete e._dbSchema.$meta, e._storeNames = e._storeNames.filter(function(f) {
        return f !== "$meta";
      })) : u.objectStore("$meta").put(d._cfg.version, "version"));
    });
  });
  function s() {
    return r.length ? kt.resolve(r.shift()(n.idbtrans)).then(s) : kt.resolve();
  }
  return s().then(function() {
    BI(o, a);
  });
}
function n0(e, t) {
  var n = {
    del: [],
    add: [],
    change: []
  }, a;
  for (a in e)
    t[a] || n.del.push(a);
  for (a in t) {
    var r = e[a], i = t[a];
    if (!r)
      n.add.push([a, i]);
    else {
      var o = {
        name: a,
        def: i,
        recreate: !1,
        del: [],
        add: [],
        change: []
      };
      if ("" + (r.primKey.keyPath || "") != "" + (i.primKey.keyPath || "") || r.primKey.auto !== i.primKey.auto)
        o.recreate = !0, n.change.push(o);
      else {
        var l = r.idxByName, s = i.idxByName, d = void 0;
        for (d in l)
          s[d] || o.del.push(d);
        for (d in s) {
          var u = l[d], f = s[d];
          u ? u.src !== f.src && o.change.push(f) : o.add.push(f);
        }
        (o.del.length > 0 || o.add.length > 0 || o.change.length > 0) && n.change.push(o);
      }
    }
  }
  return n;
}
function a0(e, t, n, a) {
  var r = e.db.createObjectStore(t, n.keyPath ? { keyPath: n.keyPath, autoIncrement: n.auto } : { autoIncrement: n.auto });
  return a.forEach(function(i) {
    return R_(r, i);
  }), r;
}
function BI(e, t) {
  ir(e).forEach(function(n) {
    t.db.objectStoreNames.contains(n) || (Co && console.debug("Dexie: Creating missing table", n), a0(t, n, e[n].primKey, e[n].indexes));
  });
}
function NU(e, t) {
  [].slice.call(t.db.objectStoreNames).forEach(function(n) {
    return e[n] == null && t.db.deleteObjectStore(n);
  });
}
function R_(e, t) {
  e.createIndex(t.name, t.keyPath, { unique: t.unique, multiEntry: t.multi });
}
function gv(e, t, n) {
  var a = {}, r = _v(t.objectStoreNames, 0);
  return r.forEach(function(i) {
    for (var o = n.objectStore(i), l = o.keyPath, s = hb(DI(l), l || "", !0, !1, !!o.autoIncrement, l && typeof l != "string", !0), d = [], u = 0; u < o.indexNames.length; ++u) {
      var f = o.index(o.indexNames[u]);
      l = f.keyPath;
      var h = hb(f.name, l, !!f.unique, !!f.multiEntry, !1, l && typeof l != "string", !1);
      d.push(h);
    }
    a[i] = t0(i, s, d);
  }), a;
}
function UU(e, t, n) {
  e.verno = t.version / 10;
  var a = e._dbSchema = gv(e, t, n);
  e._storeNames = _v(t.objectStoreNames, 0), L_(e, [e._allTables], ir(a), a);
}
function $U(e, t) {
  var n = gv(e, e.idbdb, t), a = n0(n, e._dbSchema);
  return !(a.add.length || a.change.some(function(r) {
    return r.add.length || r.change.length;
  }));
}
function F_(e, t, n) {
  for (var a = n.db.objectStoreNames, r = 0; r < a.length; ++r) {
    var i = a[r], o = n.objectStore(i);
    e._hasGetAll = "getAll" in o;
    for (var l = 0; l < o.indexNames.length; ++l) {
      var s = o.indexNames[l], d = o.index(s).keyPath, u = typeof d == "string" ? d : "[" + _v(d).join("+") + "]";
      if (t[i]) {
        var f = t[i].idxByName[u];
        f && (f.name = s, delete t[i].idxByName[u], t[i].idxByName[s] = f);
      }
    }
  }
  typeof navigator < "u" && /Safari/.test(navigator.userAgent) && !/(Chrome\/|Edge\/)/.test(navigator.userAgent) && ur.WorkerGlobalScope && ur instanceof ur.WorkerGlobalScope && [].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1] < 604 && (e._hasGetAll = !1);
}
function VI(e) {
  return e.split(",").map(function(t, n) {
    t = t.trim();
    var a = t.replace(/([&*]|\+\+)/g, ""), r = /^\[/.test(a) ? a.match(/^\[(.*)\]$/)[1].split("+") : a;
    return hb(a, r || null, /\&/.test(t), /\*/.test(t), /\+\+/.test(t), pa(r), n === 0);
  });
}
var qU = (function() {
  function e() {
  }
  return e.prototype._parseStoresSpec = function(t, n) {
    ir(t).forEach(function(a) {
      if (t[a] !== null) {
        var r = VI(t[a]), i = r.shift();
        if (i.unique = !0, i.multi)
          throw new Vt.Schema("Primary key cannot be multi-valued");
        r.forEach(function(o) {
          if (o.auto)
            throw new Vt.Schema("Only primary key can be marked as autoIncrement (++)");
          if (!o.keyPath)
            throw new Vt.Schema("Index must have a name and cannot be an empty string");
        }), n[a] = t0(a, i, r);
      }
    });
  }, e.prototype.stores = function(t) {
    var n = this.db;
    this._cfg.storesSource = this._cfg.storesSource ? hi(this._cfg.storesSource, t) : t;
    var a = n._versions, r = {}, i = {};
    return a.forEach(function(o) {
      hi(r, o._cfg.storesSource), i = o._cfg.dbschema = {}, o._parseStoresSpec(r, i);
    }), n._dbSchema = i, vb(n, [n._allTables, n, n.Transaction.prototype]), L_(n, [n._allTables, n, n.Transaction.prototype, this._cfg.tables], ir(i), i), n._storeNames = ir(i), this;
  }, e.prototype.upgrade = function(t) {
    return this._cfg.contentUpgrade = Qw(this._cfg.contentUpgrade || Vn, t), this;
  }, e;
})();
function HU(e) {
  return Qf(qU.prototype, function(n) {
    this.db = e, this._cfg = {
      version: n,
      storesSource: null,
      dbschema: {},
      tables: {},
      contentUpgrade: null
    };
  });
}
function r0(e, t) {
  var n = e._dbNamesDB;
  return n || (n = e._dbNamesDB = new Qi(pv, {
    addons: [],
    indexedDB: e,
    IDBKeyRange: t
  }), n.version(1).stores({ dbnames: "name" })), n.table("dbnames");
}
function i0(e) {
  return e && typeof e.databases == "function";
}
function zU(e) {
  var t = e.indexedDB, n = e.IDBKeyRange;
  return i0(t) ? Promise.resolve(t.databases()).then(function(a) {
    return a.map(function(r) {
      return r.name;
    }).filter(function(r) {
      return r !== pv;
    });
  }) : r0(t, n).toCollection().primaryKeys();
}
function WU(e, t) {
  var n = e.indexedDB, a = e.IDBKeyRange;
  !i0(n) && t !== pv && r0(n, a).put({ name: t }).catch(Vn);
}
function KU(e, t) {
  var n = e.indexedDB, a = e.IDBKeyRange;
  !i0(n) && t !== pv && r0(n, a).delete(t).catch(Vn);
}
function pb(e) {
  return Ws(function() {
    return Pt.letThrough = !0, e();
  });
}
function jU() {
  var e = !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent);
  if (!e || !indexedDB.databases)
    return Promise.resolve();
  var t;
  return new Promise(function(n) {
    var a = function() {
      return indexedDB.databases().finally(n);
    };
    t = setInterval(a, 100), a();
  }).finally(function() {
    return clearInterval(t);
  });
}
var Xg;
function o0(e) {
  return !("from" in e);
}
var Fr = function(e, t) {
  if (this)
    hi(this, arguments.length ? { d: 1, from: e, to: arguments.length > 1 ? t : e } : { d: 0 });
  else {
    var n = new Fr();
    return e && "d" in e && hi(n, e), n;
  }
};
Pu(Fr.prototype, (Xg = {
  add: function(e) {
    return N_(this, e), this;
  },
  addKey: function(e) {
    return If(this, e, e), this;
  },
  addKeys: function(e) {
    var t = this;
    return e.forEach(function(n) {
      return If(t, n, n);
    }), this;
  },
  hasKey: function(e) {
    var t = U_(this).next(e).value;
    return t && vn(t.from, e) <= 0 && vn(t.to, e) >= 0;
  }
}, Xg[ob] = function() {
  return U_(this);
}, Xg));
function If(e, t, n) {
  var a = vn(t, n);
  if (!isNaN(a)) {
    if (a > 0)
      throw RangeError();
    if (o0(e))
      return hi(e, { from: t, to: n, d: 1 });
    var r = e.l, i = e.r;
    if (vn(n, e.from) < 0)
      return r ? If(r, t, n) : e.l = { from: t, to: n, d: 1, l: null, r: null }, VC(e);
    if (vn(t, e.to) > 0)
      return i ? If(i, t, n) : e.r = { from: t, to: n, d: 1, l: null, r: null }, VC(e);
    vn(t, e.from) < 0 && (e.from = t, e.l = null, e.d = i ? i.d + 1 : 1), vn(n, e.to) > 0 && (e.to = n, e.r = null, e.d = e.l ? e.l.d + 1 : 1);
    var o = !e.r;
    r && !e.l && N_(e, r), i && o && N_(e, i);
  }
}
function N_(e, t) {
  function n(a, r) {
    var i = r.from, o = r.to, l = r.l, s = r.r;
    If(a, i, o), l && n(a, l), s && n(a, s);
  }
  o0(t) || n(e, t);
}
function YU(e, t) {
  var n = U_(t), a = n.next();
  if (a.done)
    return !1;
  for (var r = a.value, i = U_(e), o = i.next(r.from), l = o.value; !a.done && !o.done; ) {
    if (vn(l.from, r.to) <= 0 && vn(l.to, r.from) >= 0)
      return !0;
    vn(r.from, l.from) < 0 ? r = (a = n.next(l.from)).value : l = (o = i.next(r.from)).value;
  }
  return !1;
}
function U_(e) {
  var t = o0(e) ? null : { s: 0, n: e };
  return {
    next: function(n) {
      for (var a = arguments.length > 0; t; )
        switch (t.s) {
          case 0:
            if (t.s = 1, a)
              for (; t.n.l && vn(n, t.n.from) < 0; )
                t = { up: t, n: t.n.l, s: 1 };
            else
              for (; t.n.l; )
                t = { up: t, n: t.n.l, s: 1 };
          case 1:
            if (t.s = 2, !a || vn(n, t.n.to) <= 0)
              return { value: t.n, done: !1 };
          case 2:
            if (t.n.r) {
              t.s = 3, t = { up: t, n: t.n.r, s: 0 };
              continue;
            }
          case 3:
            t = t.up;
        }
      return { done: !0 };
    }
  };
}
function VC(e) {
  var t, n, a = (((t = e.r) === null || t === void 0 ? void 0 : t.d) || 0) - (((n = e.l) === null || n === void 0 ? void 0 : n.d) || 0), r = a > 1 ? "r" : a < -1 ? "l" : "";
  if (r) {
    var i = r === "r" ? "l" : "r", o = Jt({}, e), l = e[r];
    e.from = l.from, e.to = l.to, e[r] = l[r], o[r] = l[i], e[i] = o, o.d = MC(o);
  }
  e.d = MC(e);
}
function MC(e) {
  var t = e.r, n = e.l;
  return (t ? n ? Math.max(t.d, n.d) : t.d : n ? n.d : 0) + 1;
}
function yv(e, t) {
  return ir(t).forEach(function(n) {
    e[n] ? N_(e[n], t[n]) : e[n] = gI(t[n]);
  }), e;
}
function s0(e, t) {
  return e.all || t.all || Object.keys(e).some(function(n) {
    return t[n] && YU(t[n], e[n]);
  });
}
var jl = {}, Zg = {}, ey = !1;
function Vh(e, t) {
  yv(Zg, e), ey || (ey = !0, setTimeout(function() {
    ey = !1;
    var n = Zg;
    Zg = {}, l0(n, !1);
  }, 0));
}
function l0(e, t) {
  t === void 0 && (t = !1);
  var n = /* @__PURE__ */ new Set();
  if (e.all)
    for (var a = 0, r = Object.values(jl); a < r.length; a++) {
      var i = r[a];
      LC(i, e, n, t);
    }
  else
    for (var o in e) {
      var l = /^idb\:\/\/(.*)\/(.*)\//.exec(o);
      if (l) {
        var s = l[1], d = l[2], i = jl["idb://".concat(s, "/").concat(d)];
        i && LC(i, e, n, t);
      }
    }
  n.forEach(function(u) {
    return u();
  });
}
function LC(e, t, n, a) {
  for (var r = [], i = 0, o = Object.entries(e.queries.query); i < o.length; i++) {
    for (var l = o[i], s = l[0], d = l[1], u = [], f = 0, h = d; f < h.length; f++) {
      var y = h[f];
      s0(t, y.obsSet) ? y.subscribers.forEach(function(v) {
        return n.add(v);
      }) : a && u.push(y);
    }
    a && r.push([s, u]);
  }
  if (a)
    for (var p = 0, w = r; p < w.length; p++) {
      var b = w[p], s = b[0], u = b[1];
      e.queries.query[s] = u;
    }
}
function GU(e) {
  var t = e._state, n = e._deps.indexedDB;
  if (t.isBeingOpened || e.idbdb)
    return t.dbReadyPromise.then(function() {
      return t.dbOpenError ? Ra(t.dbOpenError) : e;
    });
  t.isBeingOpened = !0, t.dbOpenError = null, t.openComplete = !1;
  var a = t.openCanceller, r = Math.round(e.verno * 10), i = !1;
  function o() {
    if (t.openCanceller !== a)
      throw new Vt.DatabaseClosed("db.open() was cancelled");
  }
  var l = t.dbReadyResolve, s = null, d = !1, u = function() {
    return new kt(function(f, h) {
      if (o(), !n)
        throw new Vt.MissingAPI();
      var y = e.name, p = t.autoSchema || !r ? n.open(y) : n.open(y, r);
      if (!p)
        throw new Vt.MissingAPI();
      p.onerror = _o(h), p.onblocked = ca(e._fireOnBlocked), p.onupgradeneeded = ca(function(w) {
        if (s = p.transaction, t.autoSchema && !e._options.allowEmptyDB) {
          p.onerror = xf, s.abort(), p.result.close();
          var b = n.deleteDatabase(y);
          b.onsuccess = b.onerror = ca(function() {
            h(new Vt.NoSuchDatabase("Database ".concat(y, " doesnt exist")));
          });
        } else {
          s.onerror = _o(h);
          var v = w.oldVersion > Math.pow(2, 62) ? 0 : w.oldVersion;
          d = v < 1, e.idbdb = p.result, i && LU(e, s), MU(e, v / 10, s, h);
        }
      }, h), p.onsuccess = ca(function() {
        s = null;
        var w = e.idbdb = p.result, b = _v(w.objectStoreNames);
        if (b.length > 0)
          try {
            var v = w.transaction(IU(b), "readonly");
            if (t.autoSchema)
              UU(e, w, v);
            else if (F_(e, e._dbSchema, v), !$U(e, v) && !i)
              return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."), w.close(), r = w.version + 1, i = !0, f(u());
            M_(e, v);
          } catch {
          }
        _u.push(e), w.onversionchange = ca(function(g) {
          t.vcFired = !0, e.on("versionchange").fire(g);
        }), w.onclose = ca(function(g) {
          e.on("close").fire(g);
        }), d && WU(e._deps, y), f();
      }, h);
    }).catch(function(f) {
      switch (f?.name) {
        case "UnknownError":
          if (t.PR1398_maxLoop > 0)
            return t.PR1398_maxLoop--, console.warn("Dexie: Workaround for Chrome UnknownError on open()"), u();
          break;
        case "VersionError":
          if (r > 0)
            return r = 0, u();
          break;
      }
      return kt.reject(f);
    });
  };
  return kt.race([
    a,
    (typeof navigator > "u" ? kt.resolve() : jU()).then(u)
  ]).then(function() {
    return o(), t.onReadyBeingFired = [], kt.resolve(pb(function() {
      return e.on.ready.fire(e.vip);
    })).then(function f() {
      if (t.onReadyBeingFired.length > 0) {
        var h = t.onReadyBeingFired.reduce(Qw, Vn);
        return t.onReadyBeingFired = [], kt.resolve(pb(function() {
          return h(e.vip);
        })).then(f);
      }
    });
  }).finally(function() {
    t.openCanceller === a && (t.onReadyBeingFired = null, t.isBeingOpened = !1);
  }).catch(function(f) {
    t.dbOpenError = f;
    try {
      s && s.abort();
    } catch {
    }
    return a === t.openCanceller && e._close(), Ra(f);
  }).finally(function() {
    t.openComplete = !0, l();
  }).then(function() {
    if (d) {
      var f = {};
      e.tables.forEach(function(h) {
        h.schema.indexes.forEach(function(y) {
          y.name && (f["idb://".concat(e.name, "/").concat(h.name, "/").concat(y.name)] = new Fr(-1 / 0, [[[]]]));
        }), f["idb://".concat(e.name, "/").concat(h.name, "/")] = f["idb://".concat(e.name, "/").concat(h.name, "/:dels")] = new Fr(-1 / 0, [[[]]]);
      }), Ys(Jf).fire(f), l0(f, !0);
    }
    return e;
  });
}
function gb(e) {
  var t = function(o) {
    return e.next(o);
  }, n = function(o) {
    return e.throw(o);
  }, a = i(t), r = i(n);
  function i(o) {
    return function(l) {
      var s = o(l), d = s.value;
      return s.done ? d : !d || typeof d.then != "function" ? pa(d) ? Promise.all(d).then(a, r) : a(d) : d.then(a, r);
    };
  }
  return i(t)();
}
function QU(e, t, n) {
  var a = arguments.length;
  if (a < 2)
    throw new Vt.InvalidArgument("Too few arguments");
  for (var r = new Array(a - 1); --a; )
    r[a - 1] = arguments[a];
  n = r.pop();
  var i = vI(r);
  return [e, i, n];
}
function MI(e, t, n, a, r) {
  return kt.resolve().then(function() {
    var i = Pt.transless || Pt, o = e._createTransaction(t, n, e._dbSchema, a);
    o.explicit = !0;
    var l = {
      trans: o,
      transless: i
    };
    if (a)
      o.idbtrans = a.idbtrans;
    else
      try {
        o.create(), o.idbtrans._explicit = !0, e._state.PR1398_maxLoop = 3;
      } catch (f) {
        return f.name === Gw.InvalidState && e.isOpen() && --e._state.PR1398_maxLoop > 0 ? (console.warn("Dexie: Need to reopen db"), e.close({ disableAutoOpen: !1 }), e.open().then(function() {
          return MI(e, t, n, null, r);
        })) : Ra(f);
      }
    var s = jw(r);
    s && Ju();
    var d, u = kt.follow(function() {
      if (d = r.call(o, o), d)
        if (s) {
          var f = Ks.bind(null, null);
          d.then(f, f);
        } else typeof d.next == "function" && typeof d.throw == "function" && (d = gb(d));
    }, l);
    return (d && typeof d.then == "function" ? kt.resolve(d).then(function(f) {
      return o.active ? f : Ra(new Vt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"));
    }) : u.then(function() {
      return d;
    })).then(function(f) {
      return a && o._resolve(), o._completion.then(function() {
        return f;
      });
    }).catch(function(f) {
      return o._reject(f), Ra(f);
    });
  });
}
function Mh(e, t, n) {
  for (var a = pa(e) ? e.slice() : [e], r = 0; r < n; ++r)
    a.push(t);
  return a;
}
function JU(e) {
  return Jt(Jt({}, e), { table: function(t) {
    var n = e.table(t), a = n.schema, r = {}, i = [];
    function o(w, b, v) {
      var g = cf(w), k = r[g] = r[g] || [], A = w == null ? 0 : typeof w == "string" ? 1 : w.length, C = b > 0, D = Jt(Jt({}, v), { name: C ? "".concat(g, "(virtual-from:").concat(v.name, ")") : v.name, lowLevelIndex: v, isVirtual: C, keyTail: b, keyLength: A, extractKey: _b(w), unique: !C && v.unique });
      if (k.push(D), D.isPrimaryKey || i.push(D), A > 1) {
        var P = A === 2 ? w[0] : w.slice(0, A - 1);
        o(P, b + 1, v);
      }
      return k.sort(function(O, I) {
        return O.keyTail - I.keyTail;
      }), D;
    }
    var l = o(a.primaryKey.keyPath, 0, a.primaryKey);
    r[":id"] = [l];
    for (var s = 0, d = a.indexes; s < d.length; s++) {
      var u = d[s];
      o(u.keyPath, 0, u);
    }
    function f(w) {
      var b = r[cf(w)];
      return b && b[0];
    }
    function h(w, b) {
      return {
        type: w.type === 1 ? 2 : w.type,
        lower: Mh(w.lower, w.lowerOpen ? e.MAX_KEY : e.MIN_KEY, b),
        lowerOpen: !0,
        upper: Mh(w.upper, w.upperOpen ? e.MIN_KEY : e.MAX_KEY, b),
        upperOpen: !0
      };
    }
    function y(w) {
      var b = w.query.index;
      return b.isVirtual ? Jt(Jt({}, w), { query: {
        index: b.lowLevelIndex,
        range: h(w.query.range, b.keyTail)
      } }) : w;
    }
    var p = Jt(Jt({}, n), { schema: Jt(Jt({}, a), { primaryKey: l, indexes: i, getIndexByKeyPath: f }), count: function(w) {
      return n.count(y(w));
    }, query: function(w) {
      return n.query(y(w));
    }, openCursor: function(w) {
      var b = w.query.index, v = b.keyTail, g = b.isVirtual, k = b.keyLength;
      if (!g)
        return n.openCursor(w);
      function A(C) {
        function D(O) {
          O != null ? C.continue(Mh(O, w.reverse ? e.MAX_KEY : e.MIN_KEY, v)) : w.unique ? C.continue(C.key.slice(0, k).concat(w.reverse ? e.MIN_KEY : e.MAX_KEY, v)) : C.continue();
        }
        var P = Object.create(C, {
          continue: { value: D },
          continuePrimaryKey: {
            value: function(O, I) {
              C.continuePrimaryKey(Mh(O, e.MAX_KEY, v), I);
            }
          },
          primaryKey: {
            get: function() {
              return C.primaryKey;
            }
          },
          key: {
            get: function() {
              var O = C.key;
              return k === 1 ? O[0] : O.slice(0, k);
            }
          },
          value: {
            get: function() {
              return C.value;
            }
          }
        });
        return P;
      }
      return n.openCursor(y(w)).then(function(C) {
        return C && A(C);
      });
    } });
    return p;
  } });
}
var XU = {
  stack: "dbcore",
  name: "VirtualIndexMiddleware",
  level: 1,
  create: JU
};
function c0(e, t, n, a) {
  return n = n || {}, a = a || "", ir(e).forEach(function(r) {
    if (!Jr(t, r))
      n[a + r] = void 0;
    else {
      var i = e[r], o = t[r];
      if (typeof i == "object" && typeof o == "object" && i && o) {
        var l = ib(i), s = ib(o);
        l !== s ? n[a + r] = t[r] : l === "Object" ? c0(i, o, n, a + r + ".") : i !== o && (n[a + r] = t[r]);
      } else i !== o && (n[a + r] = t[r]);
    }
  }), ir(t).forEach(function(r) {
    Jr(e, r) || (n[a + r] = t[r]);
  }), n;
}
function u0(e, t) {
  return t.type === "delete" ? t.keys : t.keys || t.values.map(e.extractKey);
}
var ZU = {
  stack: "dbcore",
  name: "HooksMiddleware",
  level: 2,
  create: function(e) {
    return Jt(Jt({}, e), { table: function(t) {
      var n = e.table(t), a = n.schema.primaryKey, r = Jt(Jt({}, n), { mutate: function(i) {
        var o = Pt.trans, l = o.table(t).hook, s = l.deleting, d = l.creating, u = l.updating;
        switch (i.type) {
          case "add":
            if (d.fire === Vn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "put":
            if (d.fire === Vn && u.fire === Vn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "delete":
            if (s.fire === Vn)
              break;
            return o._promise("readwrite", function() {
              return f(i);
            }, !0);
          case "deleteRange":
            if (s.fire === Vn)
              break;
            return o._promise("readwrite", function() {
              return h(i);
            }, !0);
        }
        return n.mutate(i);
        function f(p) {
          var w = Pt.trans, b = p.keys || u0(a, p);
          if (!b)
            throw new Error("Keys missing");
          return p = p.type === "add" || p.type === "put" ? Jt(Jt({}, p), { keys: b }) : Jt({}, p), p.type !== "delete" && (p.values = P_([], p.values)), p.keys && (p.keys = P_([], p.keys)), e5(n, p, b).then(function(v) {
            var g = b.map(function(k, A) {
              var C = v[A], D = { onerror: null, onsuccess: null };
              if (p.type === "delete")
                s.fire.call(D, k, C, w);
              else if (p.type === "add" || C === void 0) {
                var P = d.fire.call(D, k, p.values[A], w);
                k == null && P != null && (k = P, p.keys[A] = k, a.outbound || mi(p.values[A], a.keyPath, k));
              } else {
                var O = c0(C, p.values[A]), I = u.fire.call(D, O, k, C, w);
                if (I) {
                  var x = p.values[A];
                  Object.keys(I).forEach(function(M) {
                    Jr(x, M) ? x[M] = I[M] : mi(x, M, I[M]);
                  });
                }
              }
              return D;
            });
            return n.mutate(p).then(function(k) {
              for (var A = k.failures, C = k.results, D = k.numFailures, P = k.lastResult, O = 0; O < b.length; ++O) {
                var I = C ? C[O] : b[O], x = g[O];
                I == null ? x.onerror && x.onerror(A[O]) : x.onsuccess && x.onsuccess(
                  p.type === "put" && v[O] ? p.values[O] : I
                );
              }
              return { failures: A, results: C, numFailures: D, lastResult: P };
            }).catch(function(k) {
              return g.forEach(function(A) {
                return A.onerror && A.onerror(k);
              }), Promise.reject(k);
            });
          });
        }
        function h(p) {
          return y(p.trans, p.range, 1e4);
        }
        function y(p, w, b) {
          return n.query({ trans: p, values: !1, query: { index: a, range: w }, limit: b }).then(function(v) {
            var g = v.result;
            return f({ type: "delete", keys: g, trans: p }).then(function(k) {
              return k.numFailures > 0 ? Promise.reject(k.failures[0]) : g.length < b ? { failures: [], numFailures: 0, lastResult: void 0 } : y(p, Jt(Jt({}, w), { lower: g[g.length - 1], lowerOpen: !0 }), b);
            });
          });
        }
      } });
      return r;
    } });
  }
};
function e5(e, t, n) {
  return t.type === "add" ? Promise.resolve([]) : e.getMany({ trans: t.trans, keys: n, cache: "immutable" });
}
function LI(e, t, n) {
  try {
    if (!t || t.keys.length < e.length)
      return null;
    for (var a = [], r = 0, i = 0; r < t.keys.length && i < e.length; ++r)
      vn(t.keys[r], e[i]) === 0 && (a.push(n ? Zl(t.values[r]) : t.values[r]), ++i);
    return a.length === e.length ? a : null;
  } catch {
    return null;
  }
}
var t5 = {
  stack: "dbcore",
  level: -1,
  create: function(e) {
    return {
      table: function(t) {
        var n = e.table(t);
        return Jt(Jt({}, n), { getMany: function(a) {
          if (!a.cache)
            return n.getMany(a);
          var r = LI(a.keys, a.trans._cache, a.cache === "clone");
          return r ? kt.resolve(r) : n.getMany(a).then(function(i) {
            return a.trans._cache = {
              keys: a.keys,
              values: a.cache === "clone" ? Zl(i) : i
            }, i;
          });
        }, mutate: function(a) {
          return a.type !== "add" && (a.trans._cache = null), n.mutate(a);
        } });
      }
    };
  }
};
function RI(e, t) {
  return e.trans.mode === "readonly" && !!e.subscr && !e.trans.explicit && e.trans.db._options.cache !== "disabled" && !t.schema.primaryKey.outbound;
}
function FI(e, t) {
  switch (e) {
    case "query":
      return t.values && !t.unique;
    case "get":
      return !1;
    case "getMany":
      return !1;
    case "count":
      return !1;
    case "openCursor":
      return !1;
  }
}
var n5 = {
  stack: "dbcore",
  level: 0,
  name: "Observability",
  create: function(e) {
    var t = e.schema.name, n = new Fr(e.MIN_KEY, e.MAX_KEY);
    return Jt(Jt({}, e), { transaction: function(a, r, i) {
      if (Pt.subscr && r !== "readonly")
        throw new Vt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Pt.querier));
      return e.transaction(a, r, i);
    }, table: function(a) {
      var r = e.table(a), i = r.schema, o = i.primaryKey, l = i.indexes, s = o.extractKey, d = o.outbound, u = o.autoIncrement && l.filter(function(p) {
        return p.compound && p.keyPath.includes(o.keyPath);
      }), f = Jt(Jt({}, r), { mutate: function(p) {
        var w, b, v = p.trans, g = p.mutatedParts || (p.mutatedParts = {}), k = function(B) {
          var F = "idb://".concat(t, "/").concat(a, "/").concat(B);
          return g[F] || (g[F] = new Fr());
        }, A = k(""), C = k(":dels"), D = p.type, P = p.type === "deleteRange" ? [p.range] : p.type === "delete" ? [p.keys] : p.values.length < 50 ? [u0(o, p).filter(function(B) {
          return B;
        }), p.values] : [], O = P[0], I = P[1], x = p.trans._cache;
        if (pa(O)) {
          A.addKeys(O);
          var M = D === "delete" || O.length === I.length ? LI(O, x) : null;
          M || C.addKeys(O), (M || I) && a5(k, i, M, I);
        } else if (O) {
          var V = {
            from: (w = O.lower) !== null && w !== void 0 ? w : e.MIN_KEY,
            to: (b = O.upper) !== null && b !== void 0 ? b : e.MAX_KEY
          };
          C.add(V), A.add(V);
        } else
          A.add(n), C.add(n), i.indexes.forEach(function(B) {
            return k(B.name).add(n);
          });
        return r.mutate(p).then(function(B) {
          return O && (p.type === "add" || p.type === "put") && (A.addKeys(B.results), u && u.forEach(function(F) {
            for (var H = p.values.map(function(Y) {
              return F.extractKey(Y);
            }), K = F.keyPath.findIndex(function(Y) {
              return Y === o.keyPath;
            }), Z = 0, ue = B.results.length; Z < ue; ++Z)
              H[Z][K] = B.results[Z];
            k(F.name).addKeys(H);
          })), v.mutatedParts = yv(v.mutatedParts || {}, g), B;
        });
      } }), h = function(p) {
        var w, b, v = p.query, g = v.index, k = v.range;
        return [
          g,
          new Fr((w = k.lower) !== null && w !== void 0 ? w : e.MIN_KEY, (b = k.upper) !== null && b !== void 0 ? b : e.MAX_KEY)
        ];
      }, y = {
        get: function(p) {
          return [o, new Fr(p.key)];
        },
        getMany: function(p) {
          return [o, new Fr().addKeys(p.keys)];
        },
        count: h,
        query: h,
        openCursor: h
      };
      return ir(y).forEach(function(p) {
        f[p] = function(w) {
          var b = Pt.subscr, v = !!b, g = RI(Pt, r) && FI(p, w), k = g ? w.obsSet = {} : b;
          if (v) {
            var A = function(M) {
              var V = "idb://".concat(t, "/").concat(a, "/").concat(M);
              return k[V] || (k[V] = new Fr());
            }, C = A(""), D = A(":dels"), P = y[p](w), O = P[0], I = P[1];
            if (p === "query" && O.isPrimaryKey && !w.values ? D.add(I) : A(O.name || "").add(I), !O.isPrimaryKey)
              if (p === "count")
                D.add(n);
              else {
                var x = p === "query" && d && w.values && r.query(Jt(Jt({}, w), { values: !1 }));
                return r[p].apply(this, arguments).then(function(M) {
                  if (p === "query") {
                    if (d && w.values)
                      return x.then(function(H) {
                        var K = H.result;
                        return C.addKeys(K), M;
                      });
                    var V = w.values ? M.result.map(s) : M.result;
                    w.values ? C.addKeys(V) : D.addKeys(V);
                  } else if (p === "openCursor") {
                    var B = M, F = w.values;
                    return B && Object.create(B, {
                      key: {
                        get: function() {
                          return D.addKey(B.primaryKey), B.key;
                        }
                      },
                      primaryKey: {
                        get: function() {
                          var H = B.primaryKey;
                          return D.addKey(H), H;
                        }
                      },
                      value: {
                        get: function() {
                          return F && C.addKey(B.primaryKey), B.value;
                        }
                      }
                    });
                  }
                  return M;
                });
              }
          }
          return r[p].apply(this, arguments);
        };
      }), f;
    } });
  }
};
function a5(e, t, n, a) {
  function r(i) {
    var o = e(i.name || "");
    function l(d) {
      return d != null ? i.extractKey(d) : null;
    }
    var s = function(d) {
      return i.multiEntry && pa(d) ? d.forEach(function(u) {
        return o.addKey(u);
      }) : o.addKey(d);
    };
    (n || a).forEach(function(d, u) {
      var f = n && l(n[u]), h = a && l(a[u]);
      vn(f, h) !== 0 && (f != null && s(f), h != null && s(h));
    });
  }
  t.indexes.forEach(r);
}
function RC(e, t, n) {
  if (n.numFailures === 0)
    return t;
  if (t.type === "deleteRange")
    return null;
  var a = t.keys ? t.keys.length : "values" in t && t.values ? t.values.length : 1;
  if (n.numFailures === a)
    return null;
  var r = Jt({}, t);
  return pa(r.keys) && (r.keys = r.keys.filter(function(i, o) {
    return !(o in n.failures);
  })), "values" in r && pa(r.values) && (r.values = r.values.filter(function(i, o) {
    return !(o in n.failures);
  })), r;
}
function r5(e, t) {
  return t.lower === void 0 ? !0 : t.lowerOpen ? vn(e, t.lower) > 0 : vn(e, t.lower) >= 0;
}
function i5(e, t) {
  return t.upper === void 0 ? !0 : t.upperOpen ? vn(e, t.upper) < 0 : vn(e, t.upper) <= 0;
}
function ty(e, t) {
  return r5(e, t) && i5(e, t);
}
function FC(e, t, n, a, r, i) {
  if (!n || n.length === 0)
    return e;
  var o = t.query.index, l = o.multiEntry, s = t.query.range, d = a.schema.primaryKey, u = d.extractKey, f = o.extractKey, h = (o.lowLevelIndex || o).extractKey, y = n.reduce(function(p, w) {
    var b = p, v = [];
    if (w.type === "add" || w.type === "put")
      for (var g = new Fr(), k = w.values.length - 1; k >= 0; --k) {
        var A = w.values[k], C = u(A);
        if (!g.hasKey(C)) {
          var D = f(A);
          (l && pa(D) ? D.some(function(M) {
            return ty(M, s);
          }) : ty(D, s)) && (g.addKey(C), v.push(A));
        }
      }
    switch (w.type) {
      case "add": {
        var P = new Fr().addKeys(t.values ? p.map(function(M) {
          return u(M);
        }) : p);
        b = p.concat(t.values ? v.filter(function(M) {
          var V = u(M);
          return P.hasKey(V) ? !1 : (P.addKey(V), !0);
        }) : v.map(function(M) {
          return u(M);
        }).filter(function(M) {
          return P.hasKey(M) ? !1 : (P.addKey(M), !0);
        }));
        break;
      }
      case "put": {
        var O = new Fr().addKeys(w.values.map(function(M) {
          return u(M);
        }));
        b = p.filter(
          function(M) {
            return !O.hasKey(t.values ? u(M) : M);
          }
        ).concat(
          t.values ? v : v.map(function(M) {
            return u(M);
          })
        );
        break;
      }
      case "delete":
        var I = new Fr().addKeys(w.keys);
        b = p.filter(function(M) {
          return !I.hasKey(t.values ? u(M) : M);
        });
        break;
      case "deleteRange":
        var x = w.range;
        b = p.filter(function(M) {
          return !ty(u(M), x);
        });
        break;
    }
    return b;
  }, e);
  return y === e ? e : (y.sort(function(p, w) {
    return vn(h(p), h(w)) || vn(u(p), u(w));
  }), t.limit && t.limit < 1 / 0 && (y.length > t.limit ? y.length = t.limit : e.length === t.limit && y.length < t.limit && (r.dirty = !0)), i ? Object.freeze(y) : y);
}
function NC(e, t) {
  return vn(e.lower, t.lower) === 0 && vn(e.upper, t.upper) === 0 && !!e.lowerOpen == !!t.lowerOpen && !!e.upperOpen == !!t.upperOpen;
}
function o5(e, t, n, a) {
  if (e === void 0)
    return t !== void 0 ? -1 : 0;
  if (t === void 0)
    return 1;
  var r = vn(e, t);
  if (r === 0) {
    if (n && a)
      return 0;
    if (n)
      return 1;
    if (a)
      return -1;
  }
  return r;
}
function s5(e, t, n, a) {
  if (e === void 0)
    return t !== void 0 ? 1 : 0;
  if (t === void 0)
    return -1;
  var r = vn(e, t);
  if (r === 0) {
    if (n && a)
      return 0;
    if (n)
      return -1;
    if (a)
      return 1;
  }
  return r;
}
function l5(e, t) {
  return o5(e.lower, t.lower, e.lowerOpen, t.lowerOpen) <= 0 && s5(e.upper, t.upper, e.upperOpen, t.upperOpen) >= 0;
}
function c5(e, t, n, a) {
  var r = jl["idb://".concat(e, "/").concat(t)];
  if (!r)
    return [];
  var i = r.queries[n];
  if (!i)
    return [null, !1, r, null];
  var o = a.query ? a.query.index.name : null, l = i[o || ""];
  if (!l)
    return [null, !1, r, null];
  switch (n) {
    case "query":
      var s = l.find(function(f) {
        return f.req.limit === a.limit && f.req.values === a.values && NC(f.req.query.range, a.query.range);
      });
      if (s)
        return [
          s,
          !0,
          r,
          l
        ];
      var d = l.find(function(f) {
        var h = "limit" in f.req ? f.req.limit : 1 / 0;
        return h >= a.limit && (a.values ? f.req.values : !0) && l5(f.req.query.range, a.query.range);
      });
      return [d, !1, r, l];
    case "count":
      var u = l.find(function(f) {
        return NC(f.req.query.range, a.query.range);
      });
      return [u, !!u, r, l];
  }
}
function u5(e, t, n, a) {
  e.subscribers.add(n), a.addEventListener("abort", function() {
    e.subscribers.delete(n), e.subscribers.size === 0 && d5(e, t);
  });
}
function d5(e, t) {
  setTimeout(function() {
    e.subscribers.size === 0 && Ol(t, e);
  }, 3e3);
}
var f5 = {
  stack: "dbcore",
  level: 0,
  name: "Cache",
  create: function(e) {
    var t = e.schema.name, n = Jt(Jt({}, e), { transaction: function(a, r, i) {
      var o = e.transaction(a, r, i);
      if (r === "readwrite") {
        var l = new AbortController(), s = l.signal, d = function(u) {
          return function() {
            if (l.abort(), r === "readwrite") {
              for (var f = /* @__PURE__ */ new Set(), h = 0, y = a; h < y.length; h++) {
                var p = y[h], w = jl["idb://".concat(t, "/").concat(p)];
                if (w) {
                  var b = e.table(p), v = w.optimisticOps.filter(function(F) {
                    return F.trans === o;
                  });
                  if (o._explicit && u && o.mutatedParts)
                    for (var g = 0, k = Object.values(w.queries.query); g < k.length; g++)
                      for (var A = k[g], C = 0, D = A.slice(); C < D.length; C++) {
                        var P = D[C];
                        s0(P.obsSet, o.mutatedParts) && (Ol(A, P), P.subscribers.forEach(function(F) {
                          return f.add(F);
                        }));
                      }
                  else if (v.length > 0) {
                    w.optimisticOps = w.optimisticOps.filter(function(F) {
                      return F.trans !== o;
                    });
                    for (var O = 0, I = Object.values(w.queries.query); O < I.length; O++)
                      for (var A = I[O], x = 0, M = A.slice(); x < M.length; x++) {
                        var P = M[x];
                        if (P.res != null && o.mutatedParts)
                          if (u && !P.dirty) {
                            var V = Object.isFrozen(P.res), B = FC(P.res, P.req, v, b, P, V);
                            P.dirty ? (Ol(A, P), P.subscribers.forEach(function(K) {
                              return f.add(K);
                            })) : B !== P.res && (P.res = B, P.promise = kt.resolve({ result: B }));
                          } else
                            P.dirty && Ol(A, P), P.subscribers.forEach(function(K) {
                              return f.add(K);
                            });
                      }
                  }
                }
              }
              f.forEach(function(F) {
                return F();
              });
            }
          };
        };
        o.addEventListener("abort", d(!1), {
          signal: s
        }), o.addEventListener("error", d(!1), {
          signal: s
        }), o.addEventListener("complete", d(!0), {
          signal: s
        });
      }
      return o;
    }, table: function(a) {
      var r = e.table(a), i = r.schema.primaryKey, o = Jt(Jt({}, r), { mutate: function(l) {
        var s = Pt.trans;
        if (i.outbound || s.db._options.cache === "disabled" || s.explicit || s.idbtrans.mode !== "readwrite")
          return r.mutate(l);
        var d = jl["idb://".concat(t, "/").concat(a)];
        if (!d)
          return r.mutate(l);
        var u = r.mutate(l);
        return (l.type === "add" || l.type === "put") && (l.values.length >= 50 || u0(i, l).some(function(f) {
          return f == null;
        })) ? u.then(function(f) {
          var h = Jt(Jt({}, l), { values: l.values.map(function(p, w) {
            var b;
            if (f.failures[w])
              return p;
            var v = !((b = i.keyPath) === null || b === void 0) && b.includes(".") ? Zl(p) : Jt({}, p);
            return mi(v, i.keyPath, f.results[w]), v;
          }) }), y = RC(d, h, f);
          d.optimisticOps.push(y), queueMicrotask(function() {
            return l.mutatedParts && Vh(l.mutatedParts);
          });
        }) : (d.optimisticOps.push(l), l.mutatedParts && Vh(l.mutatedParts), u.then(function(f) {
          if (f.numFailures > 0) {
            Ol(d.optimisticOps, l);
            var h = RC(d, l, f);
            h && d.optimisticOps.push(h), l.mutatedParts && Vh(l.mutatedParts);
          }
        }), u.catch(function() {
          Ol(d.optimisticOps, l), l.mutatedParts && Vh(l.mutatedParts);
        })), u;
      }, query: function(l) {
        var s;
        if (!RI(Pt, r) || !FI("query", l))
          return r.query(l);
        var d = ((s = Pt.trans) === null || s === void 0 ? void 0 : s.db._options.cache) === "immutable", u = Pt, f = u.requery, h = u.signal, y = c5(t, a, "query", l), p = y[0], w = y[1], b = y[2], v = y[3];
        if (p && w)
          p.obsSet = l.obsSet;
        else {
          var g = r.query(l).then(function(k) {
            var A = k.result;
            if (p && (p.res = A), d) {
              for (var C = 0, D = A.length; C < D; ++C)
                Object.freeze(A[C]);
              Object.freeze(A);
            } else
              k.result = Zl(A);
            return k;
          }).catch(function(k) {
            return v && p && Ol(v, p), Promise.reject(k);
          });
          p = {
            obsSet: l.obsSet,
            promise: g,
            subscribers: /* @__PURE__ */ new Set(),
            type: "query",
            req: l,
            dirty: !1
          }, v ? v.push(p) : (v = [p], b || (b = jl["idb://".concat(t, "/").concat(a)] = {
            queries: {
              query: {},
              count: {}
            },
            objs: /* @__PURE__ */ new Map(),
            optimisticOps: [],
            unsignaledParts: {}
          }), b.queries.query[l.query.index.name || ""] = v);
        }
        return u5(p, v, f, h), p.promise.then(function(k) {
          return {
            result: FC(k.result, l, b?.optimisticOps, r, p, d)
          };
        });
      } });
      return o;
    } });
    return n;
  }
};
function Lh(e, t) {
  return new Proxy(e, {
    get: function(n, a, r) {
      return a === "db" ? t : Reflect.get(n, a, r);
    }
  });
}
var Qi = (function() {
  function e(t, n) {
    var a = this;
    this._middlewares = {}, this.verno = 0;
    var r = e.dependencies;
    this._options = n = Jt({
      addons: e.addons,
      autoOpen: !0,
      indexedDB: r.indexedDB,
      IDBKeyRange: r.IDBKeyRange,
      cache: "cloned"
    }, n), this._deps = {
      indexedDB: n.indexedDB,
      IDBKeyRange: n.IDBKeyRange
    };
    var i = n.addons;
    this._dbSchema = {}, this._versions = [], this._storeNames = [], this._allTables = {}, this.idbdb = null, this._novip = this;
    var o = {
      dbOpenError: null,
      isBeingOpened: !1,
      onReadyBeingFired: null,
      openComplete: !1,
      dbReadyResolve: Vn,
      dbReadyPromise: null,
      cancelOpen: Vn,
      openCanceller: null,
      autoSchema: !0,
      PR1398_maxLoop: 3,
      autoOpen: n.autoOpen
    };
    o.dbReadyPromise = new kt(function(s) {
      o.dbReadyResolve = s;
    }), o.openCanceller = new kt(function(s, d) {
      o.cancelOpen = d;
    }), this._state = o, this.name = t, this.on = Gf(this, "populate", "blocked", "versionchange", "close", { ready: [Qw, Vn] }), this.on.ready.subscribe = mI(this.on.ready.subscribe, function(s) {
      return function(d, u) {
        e.vip(function() {
          var f = a._state;
          if (f.openComplete)
            f.dbOpenError || kt.resolve().then(d), u && s(d);
          else if (f.onReadyBeingFired)
            f.onReadyBeingFired.push(d), u && s(d);
          else {
            s(d);
            var h = a;
            u || s(function y() {
              h.on.ready.unsubscribe(d), h.on.ready.unsubscribe(y);
            });
          }
        });
      };
    }), this.Collection = yU(this), this.Table = _U(this), this.Transaction = TU(this), this.Version = HU(this), this.WhereClause = AU(this), this.on("versionchange", function(s) {
      s.newVersion > 0 ? console.warn("Another connection wants to upgrade database '".concat(a.name, "'. Closing db now to resume the upgrade.")) : console.warn("Another connection wants to delete database '".concat(a.name, "'. Closing db now to resume the delete request.")), a.close({ disableAutoOpen: !1 });
    }), this.on("blocked", function(s) {
      !s.newVersion || s.newVersion < s.oldVersion ? console.warn("Dexie.delete('".concat(a.name, "') was blocked")) : console.warn("Upgrade '".concat(a.name, "' blocked by other connection holding version ").concat(s.oldVersion / 10));
    }), this._maxKey = Tf(n.IDBKeyRange), this._createTransaction = function(s, d, u, f) {
      return new a.Transaction(s, d, u, a._options.chromeTransactionDurability, f);
    }, this._fireOnBlocked = function(s) {
      a.on("blocked").fire(s), _u.filter(function(d) {
        return d.name === a.name && d !== a && !d._state.vcFired;
      }).map(function(d) {
        return d.on("versionchange").fire(s);
      });
    }, this.use(t5), this.use(f5), this.use(n5), this.use(XU), this.use(ZU);
    var l = new Proxy(this, {
      get: function(s, d, u) {
        if (d === "_vip")
          return !0;
        if (d === "table")
          return function(h) {
            return Lh(a.table(h), l);
          };
        var f = Reflect.get(s, d, u);
        return f instanceof EI ? Lh(f, l) : d === "tables" ? f.map(function(h) {
          return Lh(h, l);
        }) : d === "_createTransaction" ? function() {
          var h = f.apply(this, arguments);
          return Lh(h, l);
        } : f;
      }
    });
    this.vip = l, i.forEach(function(s) {
      return s(a);
    });
  }
  return e.prototype.version = function(t) {
    if (isNaN(t) || t < 0.1)
      throw new Vt.Type("Given version is not a positive number");
    if (t = Math.round(t * 10) / 10, this.idbdb || this._state.isBeingOpened)
      throw new Vt.Schema("Cannot add version when database is open");
    this.verno = Math.max(this.verno, t);
    var n = this._versions, a = n.filter(function(r) {
      return r._cfg.version === t;
    })[0];
    return a || (a = new this.Version(t), n.push(a), n.sort(VU), a.stores({}), this._state.autoSchema = !1, a);
  }, e.prototype._whenReady = function(t) {
    var n = this;
    return this.idbdb && (this._state.openComplete || Pt.letThrough || this._vip) ? t() : new kt(function(a, r) {
      if (n._state.openComplete)
        return r(new Vt.DatabaseClosed(n._state.dbOpenError));
      if (!n._state.isBeingOpened) {
        if (!n._state.autoOpen) {
          r(new Vt.DatabaseClosed());
          return;
        }
        n.open().catch(Vn);
      }
      n._state.dbReadyPromise.then(a, r);
    }).then(t);
  }, e.prototype.use = function(t) {
    var n = t.stack, a = t.create, r = t.level, i = t.name;
    i && this.unuse({ stack: n, name: i });
    var o = this._middlewares[n] || (this._middlewares[n] = []);
    return o.push({ stack: n, create: a, level: r ?? 10, name: i }), o.sort(function(l, s) {
      return l.level - s.level;
    }), this;
  }, e.prototype.unuse = function(t) {
    var n = t.stack, a = t.name, r = t.create;
    return n && this._middlewares[n] && (this._middlewares[n] = this._middlewares[n].filter(function(i) {
      return r ? i.create !== r : a ? i.name !== a : !1;
    })), this;
  }, e.prototype.open = function() {
    var t = this;
    return tc(
      Ns,
      function() {
        return GU(t);
      }
    );
  }, e.prototype._close = function() {
    var t = this._state, n = _u.indexOf(this);
    if (n >= 0 && _u.splice(n, 1), this.idbdb) {
      try {
        this.idbdb.close();
      } catch {
      }
      this.idbdb = null;
    }
    t.isBeingOpened || (t.dbReadyPromise = new kt(function(a) {
      t.dbReadyResolve = a;
    }), t.openCanceller = new kt(function(a, r) {
      t.cancelOpen = r;
    }));
  }, e.prototype.close = function(t) {
    var n = t === void 0 ? { disableAutoOpen: !0 } : t, a = n.disableAutoOpen, r = this._state;
    a ? (r.isBeingOpened && r.cancelOpen(new Vt.DatabaseClosed()), this._close(), r.autoOpen = !1, r.dbOpenError = new Vt.DatabaseClosed()) : (this._close(), r.autoOpen = this._options.autoOpen || r.isBeingOpened, r.openComplete = !1, r.dbOpenError = null);
  }, e.prototype.delete = function(t) {
    var n = this;
    t === void 0 && (t = { disableAutoOpen: !0 });
    var a = arguments.length > 0 && typeof arguments[0] != "object", r = this._state;
    return new kt(function(i, o) {
      var l = function() {
        n.close(t);
        var s = n._deps.indexedDB.deleteDatabase(n.name);
        s.onsuccess = ca(function() {
          KU(n._deps, n.name), i();
        }), s.onerror = _o(o), s.onblocked = n._fireOnBlocked;
      };
      if (a)
        throw new Vt.InvalidArgument("Invalid closeOptions argument to db.delete()");
      r.isBeingOpened ? r.dbReadyPromise.then(l) : l();
    });
  }, e.prototype.backendDB = function() {
    return this.idbdb;
  }, e.prototype.isOpen = function() {
    return this.idbdb !== null;
  }, e.prototype.hasBeenClosed = function() {
    var t = this._state.dbOpenError;
    return t && t.name === "DatabaseClosed";
  }, e.prototype.hasFailed = function() {
    return this._state.dbOpenError !== null;
  }, e.prototype.dynamicallyOpened = function() {
    return this._state.autoSchema;
  }, Object.defineProperty(e.prototype, "tables", {
    get: function() {
      var t = this;
      return ir(this._allTables).map(function(n) {
        return t._allTables[n];
      });
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.transaction = function() {
    var t = QU.apply(this, arguments);
    return this._transaction.apply(this, t);
  }, e.prototype._transaction = function(t, n, a) {
    var r = this, i = Pt.trans;
    (!i || i.db !== this || t.indexOf("!") !== -1) && (i = null);
    var o = t.indexOf("?") !== -1;
    t = t.replace("!", "").replace("?", "");
    var l, s;
    try {
      if (s = n.map(function(u) {
        var f = u instanceof r.Table ? u.name : u;
        if (typeof f != "string")
          throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");
        return f;
      }), t == "r" || t === jg)
        l = jg;
      else if (t == "rw" || t == Yg)
        l = Yg;
      else
        throw new Vt.InvalidArgument("Invalid transaction mode: " + t);
      if (i) {
        if (i.mode === jg && l === Yg)
          if (o)
            i = null;
          else
            throw new Vt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");
        i && s.forEach(function(u) {
          if (i && i.storeNames.indexOf(u) === -1)
            if (o)
              i = null;
            else
              throw new Vt.SubTransaction("Table " + u + " not included in parent transaction.");
        }), o && i && !i.active && (i = null);
      }
    } catch (u) {
      return i ? i._promise(null, function(f, h) {
        h(u);
      }) : Ra(u);
    }
    var d = MI.bind(null, this, l, s, i, a);
    return i ? i._promise(l, d, "lock") : Pt.trans ? tc(Pt.transless, function() {
      return r._whenReady(d);
    }) : this._whenReady(d);
  }, e.prototype.table = function(t) {
    if (!Jr(this._allTables, t))
      throw new Vt.InvalidTable("Table ".concat(t, " does not exist"));
    return this._allTables[t];
  }, e;
})(), m5 = typeof Symbol < "u" && "observable" in Symbol ? Symbol.observable : "@@observable", h5 = (function() {
  function e(t) {
    this._subscribe = t;
  }
  return e.prototype.subscribe = function(t, n, a) {
    return this._subscribe(!t || typeof t == "function" ? { next: t, error: n, complete: a } : t);
  }, e.prototype[m5] = function() {
    return this;
  }, e;
})(), $_;
try {
  $_ = {
    indexedDB: ur.indexedDB || ur.mozIndexedDB || ur.webkitIndexedDB || ur.msIndexedDB,
    IDBKeyRange: ur.IDBKeyRange || ur.webkitIDBKeyRange
  };
} catch {
  $_ = { indexedDB: null, IDBKeyRange: null };
}
function _5(e) {
  var t = !1, n, a = new h5(function(r) {
    var i = jw(e);
    function o(v) {
      var g = Gu();
      try {
        i && Ju();
        var k = Ws(e, v);
        return i && (k = k.finally(Ks)), k;
      } finally {
        g && Qu();
      }
    }
    var l = !1, s, d = {}, u = {}, f = {
      get closed() {
        return l;
      },
      unsubscribe: function() {
        l || (l = !0, s && s.abort(), h && Ys.storagemutated.unsubscribe(w));
      }
    };
    r.start && r.start(f);
    var h = !1, y = function() {
      return Kg(b);
    };
    function p() {
      return s0(u, d);
    }
    var w = function(v) {
      yv(d, v), p() && y();
    }, b = function() {
      if (!(l || !$_.indexedDB)) {
        d = {};
        var v = {};
        s && s.abort(), s = new AbortController();
        var g = {
          subscr: v,
          signal: s.signal,
          requery: y,
          querier: e,
          trans: null
        }, k = o(g);
        Promise.resolve(k).then(function(A) {
          t = !0, n = A, !(l || g.signal.aborted) && (d = {}, u = v, !q8(u) && !h && (Ys(Jf, w), h = !0), Kg(function() {
            return !l && r.next && r.next(A);
          }));
        }, function(A) {
          t = !1, ["DatabaseClosedError", "AbortError"].includes(A?.name) || l || Kg(function() {
            l || r.error && r.error(A);
          });
        });
      }
    };
    return setTimeout(y, 0), f;
  });
  return a.hasValue = function() {
    return t;
  }, a.getValue = function() {
    return n;
  }, a;
}
var Ml = Qi;
Pu(Ml, Jt(Jt({}, vv), {
  delete: function(e) {
    var t = new Ml(e, { addons: [] });
    return t.delete();
  },
  exists: function(e) {
    return new Ml(e, { addons: [] }).open().then(function(t) {
      return t.close(), !0;
    }).catch("NoSuchDatabaseError", function() {
      return !1;
    });
  },
  getDatabaseNames: function(e) {
    try {
      return zU(Ml.dependencies).then(e);
    } catch {
      return Ra(new Vt.MissingAPI());
    }
  },
  defineClass: function() {
    function e(t) {
      hi(this, t);
    }
    return e;
  },
  ignoreTransaction: function(e) {
    return Pt.trans ? tc(Pt.transless, e) : e();
  },
  vip: pb,
  async: function(e) {
    return function() {
      try {
        var t = gb(e.apply(this, arguments));
        return !t || typeof t.then != "function" ? kt.resolve(t) : t;
      } catch (n) {
        return Ra(n);
      }
    };
  },
  spawn: function(e, t, n) {
    try {
      var a = gb(e.apply(n, t || []));
      return !a || typeof a.then != "function" ? kt.resolve(a) : a;
    } catch (r) {
      return Ra(r);
    }
  },
  currentTransaction: {
    get: function() {
      return Pt.trans || null;
    }
  },
  waitFor: function(e, t) {
    var n = kt.resolve(typeof e == "function" ? Ml.ignoreTransaction(e) : e).timeout(t || 6e4);
    return Pt.trans ? Pt.trans.waitFor(n) : n;
  },
  Promise: kt,
  debug: {
    get: function() {
      return Co;
    },
    set: function(e) {
      wI(e);
    }
  },
  derive: ju,
  extend: hi,
  props: Pu,
  override: mI,
  Events: Gf,
  on: Ys,
  liveQuery: _5,
  extendObservabilitySet: yv,
  getByKeyPath: es,
  setByKeyPath: mi,
  delByKeyPath: N8,
  shallowClone: _I,
  deepClone: Zl,
  getObjectDiff: c0,
  cmp: vn,
  asap: hI,
  minKey: fb,
  addons: [],
  connections: _u,
  errnames: Gw,
  dependencies: $_,
  cache: jl,
  semVer: IC,
  version: IC.split(".").map(function(e) {
    return parseInt(e);
  }).reduce(function(e, t, n) {
    return e + t / Math.pow(10, n * 2);
  })
}));
Ml.maxKey = Tf(Ml.dependencies.IDBKeyRange);
typeof dispatchEvent < "u" && typeof addEventListener < "u" && (Ys(Jf, function(e) {
  if (!Ls) {
    var t;
    t = new CustomEvent(mb, {
      detail: e
    }), Ls = !0, dispatchEvent(t), Ls = !1;
  }
}), addEventListener(mb, function(e) {
  var t = e.detail;
  Ls || d0(t);
}));
function d0(e) {
  var t = Ls;
  try {
    Ls = !0, Ys.storagemutated.fire(e), l0(e, !0);
  } finally {
    Ls = t;
  }
}
var Ls = !1, Vs, yb = function() {
};
typeof BroadcastChannel < "u" && (yb = function() {
  Vs = new BroadcastChannel(mb), Vs.onmessage = function(e) {
    return e.data && d0(e.data);
  };
}, yb(), typeof Vs.unref == "function" && Vs.unref(), Ys(Jf, function(e) {
  Ls || Vs.postMessage(e);
}));
typeof addEventListener < "u" && (addEventListener("pagehide", function(e) {
  if (!Qi.disableBfCache && e.persisted) {
    Co && console.debug("Dexie: handling persisted pagehide"), Vs?.close();
    for (var t = 0, n = _u; t < n.length; t++) {
      var a = n[t];
      a.close({ disableAutoOpen: !1 });
    }
  }
}), addEventListener("pageshow", function(e) {
  !Qi.disableBfCache && e.persisted && (Co && console.debug("Dexie: handling persisted pageshow"), yb(), d0({ all: new Fr(-1 / 0, [[]]) }));
}));
kt.rejectionMapper = Y8;
wI(Co);
const NI = 6048e5, v5 = 864e5, p5 = 6e4, UI = 36e5, g5 = 1e3, UC = Symbol.for("constructDateFrom");
function Bn(e, t) {
  return typeof e == "function" ? e(t) : e && typeof e == "object" && UC in e ? e[UC](t) : e instanceof Date ? new e.constructor(t) : new Date(t);
}
function Ft(e, t) {
  return Bn(t || e, e);
}
function Ei(e, t, n) {
  const a = Ft(e, n?.in);
  return isNaN(t) ? Bn(n?.in || e, NaN) : (t && a.setDate(a.getDate() + t), a);
}
function Ki(e, t, n) {
  const a = Ft(e, n?.in);
  if (isNaN(t)) return Bn(e, NaN);
  if (!t)
    return a;
  const r = a.getDate(), i = Bn(e, a.getTime());
  i.setMonth(a.getMonth() + t + 1, 0);
  const o = i.getDate();
  return r >= o ? i : (a.setFullYear(
    i.getFullYear(),
    i.getMonth(),
    r
  ), a);
}
function $I(e, t, n) {
  const {
    years: a = 0,
    months: r = 0,
    weeks: i = 0,
    days: o = 0,
    hours: l = 0,
    minutes: s = 0,
    seconds: d = 0
  } = t, u = Ft(e, n?.in), f = r || a ? Ki(u, r + a * 12) : u, h = o || i ? Ei(f, o + i * 7) : f, y = s + l * 60, w = (d + y * 60) * 1e3;
  return Bn(e, +h + w);
}
function y5(e, t, n) {
  return Bn(e, +Ft(e) + t);
}
function b5(e, t, n) {
  return y5(e, t * UI);
}
let w5 = {};
function hc() {
  return w5;
}
function Ji(e, t) {
  const n = hc(), a = t?.weekStartsOn ?? t?.locale?.options?.weekStartsOn ?? n.weekStartsOn ?? n.locale?.options?.weekStartsOn ?? 0, r = Ft(e, t?.in), i = r.getDay(), o = (i < a ? 7 : 0) + i - a;
  return r.setDate(r.getDate() - o), r.setHours(0, 0, 0, 0), r;
}
function Ou(e, t) {
  return Ji(e, { ...t, weekStartsOn: 1 });
}
function qI(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = Bn(n, 0);
  r.setFullYear(a + 1, 0, 4), r.setHours(0, 0, 0, 0);
  const i = Ou(r), o = Bn(n, 0);
  o.setFullYear(a, 0, 4), o.setHours(0, 0, 0, 0);
  const l = Ou(o);
  return n.getTime() >= i.getTime() ? a + 1 : n.getTime() >= l.getTime() ? a : a - 1;
}
function q_(e) {
  const t = Ft(e), n = new Date(
    Date.UTC(
      t.getFullYear(),
      t.getMonth(),
      t.getDate(),
      t.getHours(),
      t.getMinutes(),
      t.getSeconds(),
      t.getMilliseconds()
    )
  );
  return n.setUTCFullYear(t.getFullYear()), +e - +n;
}
function Xf(e, ...t) {
  const n = Bn.bind(
    null,
    t.find((a) => typeof a == "object")
  );
  return t.map(n);
}
function $C(e, t) {
  const n = Ft(e, t?.in);
  return n.setHours(0, 0, 0, 0), n;
}
function HI(e, t, n) {
  const [a, r] = Xf(
    n?.in,
    e,
    t
  ), i = $C(a), o = $C(r), l = +i - q_(i), s = +o - q_(o);
  return Math.round((l - s) / v5);
}
function k5(e, t) {
  const n = qI(e, t), a = Bn(e, 0);
  return a.setFullYear(n, 0, 4), a.setHours(0, 0, 0, 0), Ou(a);
}
function S5(e, t, n) {
  return Ki(e, t * 3, n);
}
function f0(e, t, n) {
  return Ki(e, t * 12, n);
}
function qC(e, t) {
  const n = +Ft(e) - +Ft(t);
  return n < 0 ? -1 : n > 0 ? 1 : n;
}
function zI(e) {
  return e instanceof Date || typeof e == "object" && Object.prototype.toString.call(e) === "[object Date]";
}
function uf(e) {
  return !(!zI(e) && typeof e != "number" || isNaN(+Ft(e)));
}
function HC(e, t) {
  const n = Ft(e, t?.in);
  return Math.trunc(n.getMonth() / 3) + 1;
}
function C5(e, t, n) {
  const [a, r] = Xf(
    n?.in,
    e,
    t
  );
  return a.getFullYear() - r.getFullYear();
}
function A5(e, t, n) {
  const [a, r] = Xf(
    n?.in,
    e,
    t
  ), i = qC(a, r), o = Math.abs(C5(a, r));
  a.setFullYear(1584), r.setFullYear(1584);
  const l = qC(a, r) === -i, s = i * (o - +l);
  return s === 0 ? 0 : s;
}
function WI(e, t) {
  const [n, a] = Xf(e, t.start, t.end);
  return { start: n, end: a };
}
function KI(e, t) {
  const { start: n, end: a } = WI(t?.in, e);
  let r = +n > +a;
  const i = r ? +n : +a, o = r ? a : n;
  o.setHours(0, 0, 0, 0);
  let l = 1;
  const s = [];
  for (; +o <= i; )
    s.push(Bn(n, o)), o.setDate(o.getDate() + l), o.setHours(0, 0, 0, 0);
  return r ? s.reverse() : s;
}
function Ul(e, t) {
  const n = Ft(e, t?.in), a = n.getMonth(), r = a - a % 3;
  return n.setMonth(r, 1), n.setHours(0, 0, 0, 0), n;
}
function x5(e, t) {
  const { start: n, end: a } = WI(t?.in, e);
  let r = +n > +a;
  const i = r ? +Ul(n) : +Ul(a);
  let o = Ul(r ? a : n), l = 1;
  const s = [];
  for (; +o <= i; )
    s.push(Bn(n, o)), o = S5(o, l);
  return r ? s.reverse() : s;
}
function T5(e, t) {
  const n = Ft(e, t?.in);
  return n.setDate(1), n.setHours(0, 0, 0, 0), n;
}
function jI(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear();
  return n.setFullYear(a + 1, 0, 0), n.setHours(23, 59, 59, 999), n;
}
function Ef(e, t) {
  const n = Ft(e, t?.in);
  return n.setFullYear(n.getFullYear(), 0, 1), n.setHours(0, 0, 0, 0), n;
}
function YI(e, t) {
  const n = hc(), a = t?.weekStartsOn ?? t?.locale?.options?.weekStartsOn ?? n.weekStartsOn ?? n.locale?.options?.weekStartsOn ?? 0, r = Ft(e, t?.in), i = r.getDay(), o = (i < a ? -7 : 0) + 6 - (i - a);
  return r.setDate(r.getDate() + o), r.setHours(23, 59, 59, 999), r;
}
function zC(e, t) {
  const n = Ft(e, t?.in), a = n.getMonth(), r = a - a % 3 + 3;
  return n.setMonth(r, 0), n.setHours(23, 59, 59, 999), n;
}
const I5 = {
  lessThanXSeconds: {
    one: "less than a second",
    other: "less than {{count}} seconds"
  },
  xSeconds: {
    one: "1 second",
    other: "{{count}} seconds"
  },
  halfAMinute: "half a minute",
  lessThanXMinutes: {
    one: "less than a minute",
    other: "less than {{count}} minutes"
  },
  xMinutes: {
    one: "1 minute",
    other: "{{count}} minutes"
  },
  aboutXHours: {
    one: "about 1 hour",
    other: "about {{count}} hours"
  },
  xHours: {
    one: "1 hour",
    other: "{{count}} hours"
  },
  xDays: {
    one: "1 day",
    other: "{{count}} days"
  },
  aboutXWeeks: {
    one: "about 1 week",
    other: "about {{count}} weeks"
  },
  xWeeks: {
    one: "1 week",
    other: "{{count}} weeks"
  },
  aboutXMonths: {
    one: "about 1 month",
    other: "about {{count}} months"
  },
  xMonths: {
    one: "1 month",
    other: "{{count}} months"
  },
  aboutXYears: {
    one: "about 1 year",
    other: "about {{count}} years"
  },
  xYears: {
    one: "1 year",
    other: "{{count}} years"
  },
  overXYears: {
    one: "over 1 year",
    other: "over {{count}} years"
  },
  almostXYears: {
    one: "almost 1 year",
    other: "almost {{count}} years"
  }
}, E5 = (e, t, n) => {
  let a;
  const r = I5[e];
  return typeof r == "string" ? a = r : t === 1 ? a = r.one : a = r.other.replace("{{count}}", t.toString()), n?.addSuffix ? n.comparison && n.comparison > 0 ? "in " + a : a + " ago" : a;
};
function ny(e) {
  return (t = {}) => {
    const n = t.width ? String(t.width) : e.defaultWidth;
    return e.formats[n] || e.formats[e.defaultWidth];
  };
}
const P5 = {
  full: "EEEE, MMMM do, y",
  long: "MMMM do, y",
  medium: "MMM d, y",
  short: "MM/dd/yyyy"
}, O5 = {
  full: "h:mm:ss a zzzz",
  long: "h:mm:ss a z",
  medium: "h:mm:ss a",
  short: "h:mm a"
}, D5 = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: "{{date}}, {{time}}",
  short: "{{date}}, {{time}}"
}, B5 = {
  date: ny({
    formats: P5,
    defaultWidth: "full"
  }),
  time: ny({
    formats: O5,
    defaultWidth: "full"
  }),
  dateTime: ny({
    formats: D5,
    defaultWidth: "full"
  })
}, V5 = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: "P"
}, M5 = (e, t, n, a) => V5[e];
function qd(e) {
  return (t, n) => {
    const a = n?.context ? String(n.context) : "standalone";
    let r;
    if (a === "formatting" && e.formattingValues) {
      const o = e.defaultFormattingWidth || e.defaultWidth, l = n?.width ? String(n.width) : o;
      r = e.formattingValues[l] || e.formattingValues[o];
    } else {
      const o = e.defaultWidth, l = n?.width ? String(n.width) : e.defaultWidth;
      r = e.values[l] || e.values[o];
    }
    const i = e.argumentCallback ? e.argumentCallback(t) : t;
    return r[i];
  };
}
const L5 = {
  narrow: ["B", "A"],
  abbreviated: ["BC", "AD"],
  wide: ["Before Christ", "Anno Domini"]
}, R5 = {
  narrow: ["1", "2", "3", "4"],
  abbreviated: ["Q1", "Q2", "Q3", "Q4"],
  wide: ["1st quarter", "2nd quarter", "3rd quarter", "4th quarter"]
}, F5 = {
  narrow: ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"],
  abbreviated: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
  ],
  wide: [
    "January",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
  ]
}, N5 = {
  narrow: ["S", "M", "T", "W", "T", "F", "S"],
  short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
  abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  wide: [
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
  ]
}, U5 = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "morning",
    afternoon: "afternoon",
    evening: "evening",
    night: "night"
  }
}, $5 = {
  narrow: {
    am: "a",
    pm: "p",
    midnight: "mi",
    noon: "n",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  abbreviated: {
    am: "AM",
    pm: "PM",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  },
  wide: {
    am: "a.m.",
    pm: "p.m.",
    midnight: "midnight",
    noon: "noon",
    morning: "in the morning",
    afternoon: "in the afternoon",
    evening: "in the evening",
    night: "at night"
  }
}, q5 = (e, t) => {
  const n = Number(e), a = n % 100;
  if (a > 20 || a < 10)
    switch (a % 10) {
      case 1:
        return n + "st";
      case 2:
        return n + "nd";
      case 3:
        return n + "rd";
    }
  return n + "th";
}, H5 = {
  ordinalNumber: q5,
  era: qd({
    values: L5,
    defaultWidth: "wide"
  }),
  quarter: qd({
    values: R5,
    defaultWidth: "wide",
    argumentCallback: (e) => e - 1
  }),
  month: qd({
    values: F5,
    defaultWidth: "wide"
  }),
  day: qd({
    values: N5,
    defaultWidth: "wide"
  }),
  dayPeriod: qd({
    values: U5,
    defaultWidth: "wide",
    formattingValues: $5,
    defaultFormattingWidth: "wide"
  })
};
function Hd(e) {
  return (t, n = {}) => {
    const a = n.width, r = a && e.matchPatterns[a] || e.matchPatterns[e.defaultMatchWidth], i = t.match(r);
    if (!i)
      return null;
    const o = i[0], l = a && e.parsePatterns[a] || e.parsePatterns[e.defaultParseWidth], s = Array.isArray(l) ? W5(l, (f) => f.test(o)) : (
      // [TODO] -- I challenge you to fix the type
      z5(l, (f) => f.test(o))
    );
    let d;
    d = e.valueCallback ? e.valueCallback(s) : s, d = n.valueCallback ? (
      // [TODO] -- I challenge you to fix the type
      n.valueCallback(d)
    ) : d;
    const u = t.slice(o.length);
    return { value: d, rest: u };
  };
}
function z5(e, t) {
  for (const n in e)
    if (Object.prototype.hasOwnProperty.call(e, n) && t(e[n]))
      return n;
}
function W5(e, t) {
  for (let n = 0; n < e.length; n++)
    if (t(e[n]))
      return n;
}
function K5(e) {
  return (t, n = {}) => {
    const a = t.match(e.matchPattern);
    if (!a) return null;
    const r = a[0], i = t.match(e.parsePattern);
    if (!i) return null;
    let o = e.valueCallback ? e.valueCallback(i[0]) : i[0];
    o = n.valueCallback ? n.valueCallback(o) : o;
    const l = t.slice(r.length);
    return { value: o, rest: l };
  };
}
const j5 = /^(\d+)(th|st|nd|rd)?/i, Y5 = /\d+/i, G5 = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
}, Q5 = {
  any: [/^b/i, /^(a|c)/i]
}, J5 = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
}, X5 = {
  any: [/1/i, /2/i, /3/i, /4/i]
}, Z5 = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
}, e$ = {
  narrow: [
    /^j/i,
    /^f/i,
    /^m/i,
    /^a/i,
    /^m/i,
    /^j/i,
    /^j/i,
    /^a/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ],
  any: [
    /^ja/i,
    /^f/i,
    /^mar/i,
    /^ap/i,
    /^may/i,
    /^jun/i,
    /^jul/i,
    /^au/i,
    /^s/i,
    /^o/i,
    /^n/i,
    /^d/i
  ]
}, t$ = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
}, n$ = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
}, a$ = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
}, r$ = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
}, i$ = {
  ordinalNumber: K5({
    matchPattern: j5,
    parsePattern: Y5,
    valueCallback: (e) => parseInt(e, 10)
  }),
  era: Hd({
    matchPatterns: G5,
    defaultMatchWidth: "wide",
    parsePatterns: Q5,
    defaultParseWidth: "any"
  }),
  quarter: Hd({
    matchPatterns: J5,
    defaultMatchWidth: "wide",
    parsePatterns: X5,
    defaultParseWidth: "any",
    valueCallback: (e) => e + 1
  }),
  month: Hd({
    matchPatterns: Z5,
    defaultMatchWidth: "wide",
    parsePatterns: e$,
    defaultParseWidth: "any"
  }),
  day: Hd({
    matchPatterns: t$,
    defaultMatchWidth: "wide",
    parsePatterns: n$,
    defaultParseWidth: "any"
  }),
  dayPeriod: Hd({
    matchPatterns: a$,
    defaultMatchWidth: "any",
    parsePatterns: r$,
    defaultParseWidth: "any"
  })
}, GI = {
  code: "en-US",
  formatDistance: E5,
  formatLong: B5,
  formatRelative: M5,
  localize: H5,
  match: i$,
  options: {
    weekStartsOn: 0,
    firstWeekContainsDate: 1
  }
};
function o$(e, t) {
  const n = Ft(e, t?.in);
  return HI(n, Ef(n)) + 1;
}
function m0(e, t) {
  const n = Ft(e, t?.in), a = +Ou(n) - +k5(n);
  return Math.round(a / NI) + 1;
}
function h0(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = hc(), i = t?.firstWeekContainsDate ?? t?.locale?.options?.firstWeekContainsDate ?? r.firstWeekContainsDate ?? r.locale?.options?.firstWeekContainsDate ?? 1, o = Bn(t?.in || e, 0);
  o.setFullYear(a + 1, 0, i), o.setHours(0, 0, 0, 0);
  const l = Ji(o, t), s = Bn(t?.in || e, 0);
  s.setFullYear(a, 0, i), s.setHours(0, 0, 0, 0);
  const d = Ji(s, t);
  return +n >= +l ? a + 1 : +n >= +d ? a : a - 1;
}
function s$(e, t) {
  const n = hc(), a = t?.firstWeekContainsDate ?? t?.locale?.options?.firstWeekContainsDate ?? n.firstWeekContainsDate ?? n.locale?.options?.firstWeekContainsDate ?? 1, r = h0(e, t), i = Bn(t?.in || e, 0);
  return i.setFullYear(r, 0, a), i.setHours(0, 0, 0, 0), Ji(i, t);
}
function _0(e, t) {
  const n = Ft(e, t?.in), a = +Ji(n, t) - +s$(n, t);
  return Math.round(a / NI) + 1;
}
function On(e, t) {
  const n = e < 0 ? "-" : "", a = Math.abs(e).toString().padStart(t, "0");
  return n + a;
}
const Ts = {
  // Year
  y(e, t) {
    const n = e.getFullYear(), a = n > 0 ? n : 1 - n;
    return On(t === "yy" ? a % 100 : a, t.length);
  },
  // Month
  M(e, t) {
    const n = e.getMonth();
    return t === "M" ? String(n + 1) : On(n + 1, 2);
  },
  // Day of the month
  d(e, t) {
    return On(e.getDate(), t.length);
  },
  // AM or PM
  a(e, t) {
    const n = e.getHours() / 12 >= 1 ? "pm" : "am";
    switch (t) {
      case "a":
      case "aa":
        return n.toUpperCase();
      case "aaa":
        return n;
      case "aaaaa":
        return n[0];
      case "aaaa":
      default:
        return n === "am" ? "a.m." : "p.m.";
    }
  },
  // Hour [1-12]
  h(e, t) {
    return On(e.getHours() % 12 || 12, t.length);
  },
  // Hour [0-23]
  H(e, t) {
    return On(e.getHours(), t.length);
  },
  // Minute
  m(e, t) {
    return On(e.getMinutes(), t.length);
  },
  // Second
  s(e, t) {
    return On(e.getSeconds(), t.length);
  },
  // Fraction of second
  S(e, t) {
    const n = t.length, a = e.getMilliseconds(), r = Math.trunc(
      a * Math.pow(10, n - 3)
    );
    return On(r, t.length);
  }
}, Xc = {
  midnight: "midnight",
  noon: "noon",
  morning: "morning",
  afternoon: "afternoon",
  evening: "evening",
  night: "night"
}, WC = {
  // Era
  G: function(e, t, n) {
    const a = e.getFullYear() > 0 ? 1 : 0;
    switch (t) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return n.era(a, { width: "abbreviated" });
      // A, B
      case "GGGGG":
        return n.era(a, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return n.era(a, { width: "wide" });
    }
  },
  // Year
  y: function(e, t, n) {
    if (t === "yo") {
      const a = e.getFullYear(), r = a > 0 ? a : 1 - a;
      return n.ordinalNumber(r, { unit: "year" });
    }
    return Ts.y(e, t);
  },
  // Local week-numbering year
  Y: function(e, t, n, a) {
    const r = h0(e, a), i = r > 0 ? r : 1 - r;
    if (t === "YY") {
      const o = i % 100;
      return On(o, 2);
    }
    return t === "Yo" ? n.ordinalNumber(i, { unit: "year" }) : On(i, t.length);
  },
  // ISO week-numbering year
  R: function(e, t) {
    const n = qI(e);
    return On(n, t.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function(e, t) {
    const n = e.getFullYear();
    return On(n, t.length);
  },
  // Quarter
  Q: function(e, t, n) {
    const a = Math.ceil((e.getMonth() + 1) / 3);
    switch (t) {
      // 1, 2, 3, 4
      case "Q":
        return String(a);
      // 01, 02, 03, 04
      case "QQ":
        return On(a, 2);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return n.ordinalNumber(a, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return n.quarter(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return n.quarter(a, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return n.quarter(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone quarter
  q: function(e, t, n) {
    const a = Math.ceil((e.getMonth() + 1) / 3);
    switch (t) {
      // 1, 2, 3, 4
      case "q":
        return String(a);
      // 01, 02, 03, 04
      case "qq":
        return On(a, 2);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return n.ordinalNumber(a, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return n.quarter(a, {
          width: "abbreviated",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return n.quarter(a, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return n.quarter(a, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // Month
  M: function(e, t, n) {
    const a = e.getMonth();
    switch (t) {
      case "M":
      case "MM":
        return Ts.M(e, t);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return n.ordinalNumber(a + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "MMM":
        return n.month(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // J, F, ..., D
      case "MMMMM":
        return n.month(a, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return n.month(a, { width: "wide", context: "formatting" });
    }
  },
  // Stand-alone month
  L: function(e, t, n) {
    const a = e.getMonth();
    switch (t) {
      // 1, 2, ..., 12
      case "L":
        return String(a + 1);
      // 01, 02, ..., 12
      case "LL":
        return On(a + 1, 2);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return n.ordinalNumber(a + 1, { unit: "month" });
      // Jan, Feb, ..., Dec
      case "LLL":
        return n.month(a, {
          width: "abbreviated",
          context: "standalone"
        });
      // J, F, ..., D
      case "LLLLL":
        return n.month(a, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return n.month(a, { width: "wide", context: "standalone" });
    }
  },
  // Local week of year
  w: function(e, t, n, a) {
    const r = _0(e, a);
    return t === "wo" ? n.ordinalNumber(r, { unit: "week" }) : On(r, t.length);
  },
  // ISO week of year
  I: function(e, t, n) {
    const a = m0(e);
    return t === "Io" ? n.ordinalNumber(a, { unit: "week" }) : On(a, t.length);
  },
  // Day of the month
  d: function(e, t, n) {
    return t === "do" ? n.ordinalNumber(e.getDate(), { unit: "date" }) : Ts.d(e, t);
  },
  // Day of year
  D: function(e, t, n) {
    const a = o$(e);
    return t === "Do" ? n.ordinalNumber(a, { unit: "dayOfYear" }) : On(a, t.length);
  },
  // Day of week
  E: function(e, t, n) {
    const a = e.getDay();
    switch (t) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return n.day(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "EEEEE":
        return n.day(a, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return n.day(a, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "EEEE":
      default:
        return n.day(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Local day of week
  e: function(e, t, n, a) {
    const r = e.getDay(), i = (r - a.weekStartsOn + 8) % 7 || 7;
    switch (t) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case "e":
        return String(i);
      // Padded numerical value
      case "ee":
        return On(i, 2);
      // 1st, 2nd, ..., 7th
      case "eo":
        return n.ordinalNumber(i, { unit: "day" });
      case "eee":
        return n.day(r, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "eeeee":
        return n.day(r, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return n.day(r, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "eeee":
      default:
        return n.day(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Stand-alone local day of week
  c: function(e, t, n, a) {
    const r = e.getDay(), i = (r - a.weekStartsOn + 8) % 7 || 7;
    switch (t) {
      // Numerical value (same as in `e`)
      case "c":
        return String(i);
      // Padded numerical value
      case "cc":
        return On(i, t.length);
      // 1st, 2nd, ..., 7th
      case "co":
        return n.ordinalNumber(i, { unit: "day" });
      case "ccc":
        return n.day(r, {
          width: "abbreviated",
          context: "standalone"
        });
      // T
      case "ccccc":
        return n.day(r, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return n.day(r, {
          width: "short",
          context: "standalone"
        });
      // Tuesday
      case "cccc":
      default:
        return n.day(r, {
          width: "wide",
          context: "standalone"
        });
    }
  },
  // ISO day of week
  i: function(e, t, n) {
    const a = e.getDay(), r = a === 0 ? 7 : a;
    switch (t) {
      // 2
      case "i":
        return String(r);
      // 02
      case "ii":
        return On(r, t.length);
      // 2nd
      case "io":
        return n.ordinalNumber(r, { unit: "day" });
      // Tue
      case "iii":
        return n.day(a, {
          width: "abbreviated",
          context: "formatting"
        });
      // T
      case "iiiii":
        return n.day(a, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "iiiiii":
        return n.day(a, {
          width: "short",
          context: "formatting"
        });
      // Tuesday
      case "iiii":
      default:
        return n.day(a, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM or PM
  a: function(e, t, n) {
    const r = e.getHours() / 12 >= 1 ? "pm" : "am";
    switch (t) {
      case "a":
      case "aa":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "aaa":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "aaaaa":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // AM, PM, midnight, noon
  b: function(e, t, n) {
    const a = e.getHours();
    let r;
    switch (a === 12 ? r = Xc.noon : a === 0 ? r = Xc.midnight : r = a / 12 >= 1 ? "pm" : "am", t) {
      case "b":
      case "bb":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "bbb":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        }).toLowerCase();
      case "bbbbb":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function(e, t, n) {
    const a = e.getHours();
    let r;
    switch (a >= 17 ? r = Xc.evening : a >= 12 ? r = Xc.afternoon : a >= 4 ? r = Xc.morning : r = Xc.night, t) {
      case "B":
      case "BB":
      case "BBB":
        return n.dayPeriod(r, {
          width: "abbreviated",
          context: "formatting"
        });
      case "BBBBB":
        return n.dayPeriod(r, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return n.dayPeriod(r, {
          width: "wide",
          context: "formatting"
        });
    }
  },
  // Hour [1-12]
  h: function(e, t, n) {
    if (t === "ho") {
      let a = e.getHours() % 12;
      return a === 0 && (a = 12), n.ordinalNumber(a, { unit: "hour" });
    }
    return Ts.h(e, t);
  },
  // Hour [0-23]
  H: function(e, t, n) {
    return t === "Ho" ? n.ordinalNumber(e.getHours(), { unit: "hour" }) : Ts.H(e, t);
  },
  // Hour [0-11]
  K: function(e, t, n) {
    const a = e.getHours() % 12;
    return t === "Ko" ? n.ordinalNumber(a, { unit: "hour" }) : On(a, t.length);
  },
  // Hour [1-24]
  k: function(e, t, n) {
    let a = e.getHours();
    return a === 0 && (a = 24), t === "ko" ? n.ordinalNumber(a, { unit: "hour" }) : On(a, t.length);
  },
  // Minute
  m: function(e, t, n) {
    return t === "mo" ? n.ordinalNumber(e.getMinutes(), { unit: "minute" }) : Ts.m(e, t);
  },
  // Second
  s: function(e, t, n) {
    return t === "so" ? n.ordinalNumber(e.getSeconds(), { unit: "second" }) : Ts.s(e, t);
  },
  // Fraction of second
  S: function(e, t) {
    return Ts.S(e, t);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function(e, t, n) {
    const a = e.getTimezoneOffset();
    if (a === 0)
      return "Z";
    switch (t) {
      // Hours and optional minutes
      case "X":
        return jC(a);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case "XXXX":
      case "XX":
        return Dl(a);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case "XXXXX":
      case "XXX":
      // Hours and minutes with `:` delimiter
      default:
        return Dl(a, ":");
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Hours and optional minutes
      case "x":
        return jC(a);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case "xxxx":
      case "xx":
        return Dl(a);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case "xxxxx":
      case "xxx":
      // Hours and minutes with `:` delimiter
      default:
        return Dl(a, ":");
    }
  },
  // Timezone (GMT)
  O: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Short
      case "O":
      case "OO":
      case "OOO":
        return "GMT" + KC(a, ":");
      // Long
      case "OOOO":
      default:
        return "GMT" + Dl(a, ":");
    }
  },
  // Timezone (specific non-location)
  z: function(e, t, n) {
    const a = e.getTimezoneOffset();
    switch (t) {
      // Short
      case "z":
      case "zz":
      case "zzz":
        return "GMT" + KC(a, ":");
      // Long
      case "zzzz":
      default:
        return "GMT" + Dl(a, ":");
    }
  },
  // Seconds timestamp
  t: function(e, t, n) {
    const a = Math.trunc(+e / 1e3);
    return On(a, t.length);
  },
  // Milliseconds timestamp
  T: function(e, t, n) {
    return On(+e, t.length);
  }
};
function KC(e, t = "") {
  const n = e > 0 ? "-" : "+", a = Math.abs(e), r = Math.trunc(a / 60), i = a % 60;
  return i === 0 ? n + String(r) : n + String(r) + t + On(i, 2);
}
function jC(e, t) {
  return e % 60 === 0 ? (e > 0 ? "-" : "+") + On(Math.abs(e) / 60, 2) : Dl(e, t);
}
function Dl(e, t = "") {
  const n = e > 0 ? "-" : "+", a = Math.abs(e), r = On(Math.trunc(a / 60), 2), i = On(a % 60, 2);
  return n + r + t + i;
}
const YC = (e, t) => {
  switch (e) {
    case "P":
      return t.date({ width: "short" });
    case "PP":
      return t.date({ width: "medium" });
    case "PPP":
      return t.date({ width: "long" });
    case "PPPP":
    default:
      return t.date({ width: "full" });
  }
}, QI = (e, t) => {
  switch (e) {
    case "p":
      return t.time({ width: "short" });
    case "pp":
      return t.time({ width: "medium" });
    case "ppp":
      return t.time({ width: "long" });
    case "pppp":
    default:
      return t.time({ width: "full" });
  }
}, l$ = (e, t) => {
  const n = e.match(/(P+)(p+)?/) || [], a = n[1], r = n[2];
  if (!r)
    return YC(e, t);
  let i;
  switch (a) {
    case "P":
      i = t.dateTime({ width: "short" });
      break;
    case "PP":
      i = t.dateTime({ width: "medium" });
      break;
    case "PPP":
      i = t.dateTime({ width: "long" });
      break;
    case "PPPP":
    default:
      i = t.dateTime({ width: "full" });
      break;
  }
  return i.replace("{{date}}", YC(a, t)).replace("{{time}}", QI(r, t));
}, bb = {
  p: QI,
  P: l$
}, c$ = /^D+$/, u$ = /^Y+$/, d$ = ["D", "DD", "YY", "YYYY"];
function JI(e) {
  return c$.test(e);
}
function XI(e) {
  return u$.test(e);
}
function wb(e, t, n) {
  const a = f$(e, t, n);
  if (console.warn(a), d$.includes(e)) throw new RangeError(a);
}
function f$(e, t, n) {
  const a = e[0] === "Y" ? "years" : "days of the month";
  return `Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;
}
const m$ = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, h$ = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, _$ = /^'([^]*?)'?$/, v$ = /''/g, p$ = /[a-zA-Z]/;
function ko(e, t, n) {
  const a = hc(), r = n?.locale ?? a.locale ?? GI, i = n?.firstWeekContainsDate ?? n?.locale?.options?.firstWeekContainsDate ?? a.firstWeekContainsDate ?? a.locale?.options?.firstWeekContainsDate ?? 1, o = n?.weekStartsOn ?? n?.locale?.options?.weekStartsOn ?? a.weekStartsOn ?? a.locale?.options?.weekStartsOn ?? 0, l = Ft(e, n?.in);
  if (!uf(l))
    throw new RangeError("Invalid time value");
  let s = t.match(h$).map((u) => {
    const f = u[0];
    if (f === "p" || f === "P") {
      const h = bb[f];
      return h(u, r.formatLong);
    }
    return u;
  }).join("").match(m$).map((u) => {
    if (u === "''")
      return { isToken: !1, value: "'" };
    const f = u[0];
    if (f === "'")
      return { isToken: !1, value: g$(u) };
    if (WC[f])
      return { isToken: !0, value: u };
    if (f.match(p$))
      throw new RangeError(
        "Format string contains an unescaped latin alphabet character `" + f + "`"
      );
    return { isToken: !1, value: u };
  });
  r.localize.preprocessor && (s = r.localize.preprocessor(l, s));
  const d = {
    firstWeekContainsDate: i,
    weekStartsOn: o,
    locale: r
  };
  return s.map((u) => {
    if (!u.isToken) return u.value;
    const f = u.value;
    (!n?.useAdditionalWeekYearTokens && XI(f) || !n?.useAdditionalDayOfYearTokens && JI(f)) && wb(f, t, String(e));
    const h = WC[f[0]];
    return h(l, f, r.localize, d);
  }).join("");
}
function g$(e) {
  const t = e.match(_$);
  return t ? t[1].replace(v$, "'") : e;
}
function y$(e, t) {
  return Ft(e, t?.in).getDay();
}
function b$(e, t) {
  const n = Ft(e, t?.in), a = n.getFullYear(), r = n.getMonth(), i = Bn(n, 0);
  return i.setFullYear(a, r + 1, 0), i.setHours(0, 0, 0, 0), i.getDate();
}
function w$() {
  return Object.assign({}, hc());
}
function rs(e, t) {
  return Ft(e, t?.in).getHours();
}
function k$(e, t) {
  const n = Ft(e, t?.in).getDay();
  return n === 0 ? 7 : n;
}
function Gs(e, t) {
  return Ft(e, t?.in).getMinutes();
}
function fn(e, t) {
  return Ft(e, t?.in).getMonth();
}
function Du(e) {
  return Ft(e).getSeconds();
}
function jt(e, t) {
  return Ft(e, t?.in).getFullYear();
}
function ac(e, t) {
  return +Ft(e) > +Ft(t);
}
function Bu(e, t) {
  return +Ft(e) < +Ft(t);
}
function su(e, t) {
  return +Ft(e) == +Ft(t);
}
function S$(e, t) {
  const n = C$(t) ? new t(0) : Bn(t, 0);
  return n.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), n.setHours(
    e.getHours(),
    e.getMinutes(),
    e.getSeconds(),
    e.getMilliseconds()
  ), n;
}
function C$(e) {
  return typeof e == "function" && e.prototype?.constructor === e;
}
const A$ = 10;
class ZI {
  subPriority = 0;
  validate(t, n) {
    return !0;
  }
}
class x$ extends ZI {
  constructor(t, n, a, r, i) {
    super(), this.value = t, this.validateValue = n, this.setValue = a, this.priority = r, i && (this.subPriority = i);
  }
  validate(t, n) {
    return this.validateValue(t, this.value, n);
  }
  set(t, n, a) {
    return this.setValue(t, n, this.value, a);
  }
}
class T$ extends ZI {
  priority = A$;
  subPriority = -1;
  constructor(t, n) {
    super(), this.context = t || ((a) => Bn(n, a));
  }
  set(t, n) {
    return n.timestampIsSet ? t : Bn(t, S$(t, this.context));
  }
}
class Sn {
  run(t, n, a, r) {
    const i = this.parse(t, n, a, r);
    return i ? {
      setter: new x$(
        i.value,
        this.validate,
        this.set,
        this.priority,
        this.subPriority
      ),
      rest: i.rest
    } : null;
  }
  validate(t, n, a) {
    return !0;
  }
}
class I$ extends Sn {
  priority = 140;
  parse(t, n, a) {
    switch (n) {
      // AD, BC
      case "G":
      case "GG":
      case "GGG":
        return a.era(t, { width: "abbreviated" }) || a.era(t, { width: "narrow" });
      // A, B
      case "GGGGG":
        return a.era(t, { width: "narrow" });
      // Anno Domini, Before Christ
      case "GGGG":
      default:
        return a.era(t, { width: "wide" }) || a.era(t, { width: "abbreviated" }) || a.era(t, { width: "narrow" });
    }
  }
  set(t, n, a) {
    return n.era = a, t.setFullYear(a, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["R", "u", "t", "T"];
}
const Ma = {
  month: /^(1[0-2]|0?\d)/,
  // 0 to 12
  date: /^(3[0-1]|[0-2]?\d)/,
  // 0 to 31
  dayOfYear: /^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,
  // 0 to 366
  week: /^(5[0-3]|[0-4]?\d)/,
  // 0 to 53
  hour23h: /^(2[0-3]|[0-1]?\d)/,
  // 0 to 23
  hour24h: /^(2[0-4]|[0-1]?\d)/,
  // 0 to 24
  hour11h: /^(1[0-1]|0?\d)/,
  // 0 to 11
  hour12h: /^(1[0-2]|0?\d)/,
  // 0 to 12
  minute: /^[0-5]?\d/,
  // 0 to 59
  second: /^[0-5]?\d/,
  // 0 to 59
  singleDigit: /^\d/,
  // 0 to 9
  twoDigits: /^\d{1,2}/,
  // 0 to 99
  threeDigits: /^\d{1,3}/,
  // 0 to 999
  fourDigits: /^\d{1,4}/,
  // 0 to 9999
  anyDigitsSigned: /^-?\d+/,
  singleDigitSigned: /^-?\d/,
  // 0 to 9, -0 to -9
  twoDigitsSigned: /^-?\d{1,2}/,
  // 0 to 99, -0 to -99
  threeDigitsSigned: /^-?\d{1,3}/,
  // 0 to 999, -0 to -999
  fourDigitsSigned: /^-?\d{1,4}/
  // 0 to 9999, -0 to -9999
}, po = {
  basicOptionalMinutes: /^([+-])(\d{2})(\d{2})?|Z/,
  basic: /^([+-])(\d{2})(\d{2})|Z/,
  basicOptionalSeconds: /^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,
  extended: /^([+-])(\d{2}):(\d{2})|Z/,
  extendedOptionalSeconds: /^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/
};
function La(e, t) {
  return e && {
    value: t(e.value),
    rest: e.rest
  };
}
function va(e, t) {
  const n = t.match(e);
  return n ? {
    value: parseInt(n[0], 10),
    rest: t.slice(n[0].length)
  } : null;
}
function go(e, t) {
  const n = t.match(e);
  if (!n)
    return null;
  if (n[0] === "Z")
    return {
      value: 0,
      rest: t.slice(1)
    };
  const a = n[1] === "+" ? 1 : -1, r = n[2] ? parseInt(n[2], 10) : 0, i = n[3] ? parseInt(n[3], 10) : 0, o = n[5] ? parseInt(n[5], 10) : 0;
  return {
    value: a * (r * UI + i * p5 + o * g5),
    rest: t.slice(n[0].length)
  };
}
function eE(e) {
  return va(Ma.anyDigitsSigned, e);
}
function xa(e, t) {
  switch (e) {
    case 1:
      return va(Ma.singleDigit, t);
    case 2:
      return va(Ma.twoDigits, t);
    case 3:
      return va(Ma.threeDigits, t);
    case 4:
      return va(Ma.fourDigits, t);
    default:
      return va(new RegExp("^\\d{1," + e + "}"), t);
  }
}
function H_(e, t) {
  switch (e) {
    case 1:
      return va(Ma.singleDigitSigned, t);
    case 2:
      return va(Ma.twoDigitsSigned, t);
    case 3:
      return va(Ma.threeDigitsSigned, t);
    case 4:
      return va(Ma.fourDigitsSigned, t);
    default:
      return va(new RegExp("^-?\\d{1," + e + "}"), t);
  }
}
function v0(e) {
  switch (e) {
    case "morning":
      return 4;
    case "evening":
      return 17;
    case "pm":
    case "noon":
    case "afternoon":
      return 12;
    case "am":
    case "midnight":
    case "night":
    default:
      return 0;
  }
}
function tE(e, t) {
  const n = t > 0, a = n ? t : 1 - t;
  let r;
  if (a <= 50)
    r = e || 100;
  else {
    const i = a + 50, o = Math.trunc(i / 100) * 100, l = e >= i % 100;
    r = e + o - (l ? 100 : 0);
  }
  return n ? r : 1 - r;
}
function nE(e) {
  return e % 400 === 0 || e % 4 === 0 && e % 100 !== 0;
}
class E$ extends Sn {
  priority = 130;
  incompatibleTokens = ["Y", "R", "u", "w", "I", "i", "e", "c", "t", "T"];
  parse(t, n, a) {
    const r = (i) => ({
      year: i,
      isTwoDigitYear: n === "yy"
    });
    switch (n) {
      case "y":
        return La(xa(4, t), r);
      case "yo":
        return La(
          a.ordinalNumber(t, {
            unit: "year"
          }),
          r
        );
      default:
        return La(xa(n.length, t), r);
    }
  }
  validate(t, n) {
    return n.isTwoDigitYear || n.year > 0;
  }
  set(t, n, a) {
    const r = t.getFullYear();
    if (a.isTwoDigitYear) {
      const o = tE(
        a.year,
        r
      );
      return t.setFullYear(o, 0, 1), t.setHours(0, 0, 0, 0), t;
    }
    const i = !("era" in n) || n.era === 1 ? a.year : 1 - a.year;
    return t.setFullYear(i, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
}
class P$ extends Sn {
  priority = 130;
  parse(t, n, a) {
    const r = (i) => ({
      year: i,
      isTwoDigitYear: n === "YY"
    });
    switch (n) {
      case "Y":
        return La(xa(4, t), r);
      case "Yo":
        return La(
          a.ordinalNumber(t, {
            unit: "year"
          }),
          r
        );
      default:
        return La(xa(n.length, t), r);
    }
  }
  validate(t, n) {
    return n.isTwoDigitYear || n.year > 0;
  }
  set(t, n, a, r) {
    const i = h0(t, r);
    if (a.isTwoDigitYear) {
      const l = tE(
        a.year,
        i
      );
      return t.setFullYear(
        l,
        0,
        r.firstWeekContainsDate
      ), t.setHours(0, 0, 0, 0), Ji(t, r);
    }
    const o = !("era" in n) || n.era === 1 ? a.year : 1 - a.year;
    return t.setFullYear(o, 0, r.firstWeekContainsDate), t.setHours(0, 0, 0, 0), Ji(t, r);
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "Q",
    "q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "i",
    "t",
    "T"
  ];
}
class O$ extends Sn {
  priority = 130;
  parse(t, n) {
    return H_(n === "R" ? 4 : n.length, t);
  }
  set(t, n, a) {
    const r = Bn(t, 0);
    return r.setFullYear(a, 0, 4), r.setHours(0, 0, 0, 0), Ou(r);
  }
  incompatibleTokens = [
    "G",
    "y",
    "Y",
    "u",
    "Q",
    "q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "e",
    "c",
    "t",
    "T"
  ];
}
class D$ extends Sn {
  priority = 130;
  parse(t, n) {
    return H_(n === "u" ? 4 : n.length, t);
  }
  set(t, n, a) {
    return t.setFullYear(a, 0, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["G", "y", "Y", "R", "w", "I", "i", "e", "c", "t", "T"];
}
class B$ extends Sn {
  priority = 120;
  parse(t, n, a) {
    switch (n) {
      // 1, 2, 3, 4
      case "Q":
      case "QQ":
        return xa(n.length, t);
      // 1st, 2nd, 3rd, 4th
      case "Qo":
        return a.ordinalNumber(t, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "QQQ":
        return a.quarter(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "QQQQQ":
        return a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
      // 1st quarter, 2nd quarter, ...
      case "QQQQ":
      default:
        return a.quarter(t, {
          width: "wide",
          context: "formatting"
        }) || a.quarter(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.quarter(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 4;
  }
  set(t, n, a) {
    return t.setMonth((a - 1) * 3, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class V$ extends Sn {
  priority = 120;
  parse(t, n, a) {
    switch (n) {
      // 1, 2, 3, 4
      case "q":
      case "qq":
        return xa(n.length, t);
      // 1st, 2nd, 3rd, 4th
      case "qo":
        return a.ordinalNumber(t, { unit: "quarter" });
      // Q1, Q2, Q3, Q4
      case "qqq":
        return a.quarter(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case "qqqqq":
        return a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
      // 1st quarter, 2nd quarter, ...
      case "qqqq":
      default:
        return a.quarter(t, {
          width: "wide",
          context: "standalone"
        }) || a.quarter(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.quarter(t, {
          width: "narrow",
          context: "standalone"
        });
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 4;
  }
  set(t, n, a) {
    return t.setMonth((a - 1) * 3, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "Q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class M$ extends Sn {
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "L",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
  priority = 110;
  parse(t, n, a) {
    const r = (i) => i - 1;
    switch (n) {
      // 1, 2, ..., 12
      case "M":
        return La(
          va(Ma.month, t),
          r
        );
      // 01, 02, ..., 12
      case "MM":
        return La(xa(2, t), r);
      // 1st, 2nd, ..., 12th
      case "Mo":
        return La(
          a.ordinalNumber(t, {
            unit: "month"
          }),
          r
        );
      // Jan, Feb, ..., Dec
      case "MMM":
        return a.month(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.month(t, { width: "narrow", context: "formatting" });
      // J, F, ..., D
      case "MMMMM":
        return a.month(t, {
          width: "narrow",
          context: "formatting"
        });
      // January, February, ..., December
      case "MMMM":
      default:
        return a.month(t, { width: "wide", context: "formatting" }) || a.month(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.month(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.setMonth(a, 1), t.setHours(0, 0, 0, 0), t;
  }
}
class L$ extends Sn {
  priority = 110;
  parse(t, n, a) {
    const r = (i) => i - 1;
    switch (n) {
      // 1, 2, ..., 12
      case "L":
        return La(
          va(Ma.month, t),
          r
        );
      // 01, 02, ..., 12
      case "LL":
        return La(xa(2, t), r);
      // 1st, 2nd, ..., 12th
      case "Lo":
        return La(
          a.ordinalNumber(t, {
            unit: "month"
          }),
          r
        );
      // Jan, Feb, ..., Dec
      case "LLL":
        return a.month(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.month(t, { width: "narrow", context: "standalone" });
      // J, F, ..., D
      case "LLLLL":
        return a.month(t, {
          width: "narrow",
          context: "standalone"
        });
      // January, February, ..., December
      case "LLLL":
      default:
        return a.month(t, { width: "wide", context: "standalone" }) || a.month(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.month(t, { width: "narrow", context: "standalone" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.setMonth(a, 1), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "M",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
function R$(e, t, n) {
  const a = Ft(e, n?.in), r = _0(a, n) - t;
  return a.setDate(a.getDate() - r * 7), Ft(a, n?.in);
}
class F$ extends Sn {
  priority = 100;
  parse(t, n, a) {
    switch (n) {
      case "w":
        return va(Ma.week, t);
      case "wo":
        return a.ordinalNumber(t, { unit: "week" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 53;
  }
  set(t, n, a, r) {
    return Ji(R$(t, a, r), r);
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "i",
    "t",
    "T"
  ];
}
function N$(e, t, n) {
  const a = Ft(e, n?.in), r = m0(a, n) - t;
  return a.setDate(a.getDate() - r * 7), a;
}
class U$ extends Sn {
  priority = 100;
  parse(t, n, a) {
    switch (n) {
      case "I":
        return va(Ma.week, t);
      case "Io":
        return a.ordinalNumber(t, { unit: "week" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 53;
  }
  set(t, n, a) {
    return Ou(N$(t, a));
  }
  incompatibleTokens = [
    "y",
    "Y",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "e",
    "c",
    "t",
    "T"
  ];
}
const $$ = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], q$ = [
  31,
  29,
  31,
  30,
  31,
  30,
  31,
  31,
  30,
  31,
  30,
  31
];
class H$ extends Sn {
  priority = 90;
  subPriority = 1;
  parse(t, n, a) {
    switch (n) {
      case "d":
        return va(Ma.date, t);
      case "do":
        return a.ordinalNumber(t, { unit: "date" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    const a = t.getFullYear(), r = nE(a), i = t.getMonth();
    return r ? n >= 1 && n <= q$[i] : n >= 1 && n <= $$[i];
  }
  set(t, n, a) {
    return t.setDate(a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "w",
    "I",
    "D",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
class z$ extends Sn {
  priority = 90;
  subpriority = 1;
  parse(t, n, a) {
    switch (n) {
      case "D":
      case "DD":
        return va(Ma.dayOfYear, t);
      case "Do":
        return a.ordinalNumber(t, { unit: "date" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    const a = t.getFullYear();
    return nE(a) ? n >= 1 && n <= 366 : n >= 1 && n <= 365;
  }
  set(t, n, a) {
    return t.setMonth(0, a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "Y",
    "R",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "I",
    "d",
    "E",
    "i",
    "e",
    "c",
    "t",
    "T"
  ];
}
function p0(e, t, n) {
  const a = hc(), r = n?.weekStartsOn ?? n?.locale?.options?.weekStartsOn ?? a.weekStartsOn ?? a.locale?.options?.weekStartsOn ?? 0, i = Ft(e, n?.in), o = i.getDay(), s = (t % 7 + 7) % 7, d = 7 - r, u = t < 0 || t > 6 ? t - (o + d) % 7 : (s + d) % 7 - (o + d) % 7;
  return Ei(i, u, n);
}
class W$ extends Sn {
  priority = 90;
  parse(t, n, a) {
    switch (n) {
      // Tue
      case "E":
      case "EE":
      case "EEE":
        return a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // T
      case "EEEEE":
        return a.day(t, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "EEEEEE":
        return a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // Tuesday
      case "EEEE":
      default:
        return a.day(t, { width: "wide", context: "formatting" }) || a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = p0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = ["D", "i", "e", "c", "t", "T"];
}
class K$ extends Sn {
  priority = 90;
  parse(t, n, a, r) {
    const i = (o) => {
      const l = Math.floor((o - 1) / 7) * 7;
      return (o + r.weekStartsOn + 6) % 7 + l;
    };
    switch (n) {
      // 3
      case "e":
      case "ee":
        return La(xa(n.length, t), i);
      // 3rd
      case "eo":
        return La(
          a.ordinalNumber(t, {
            unit: "day"
          }),
          i
        );
      // Tue
      case "eee":
        return a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // T
      case "eeeee":
        return a.day(t, {
          width: "narrow",
          context: "formatting"
        });
      // Tu
      case "eeeeee":
        return a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
      // Tuesday
      case "eeee":
      default:
        return a.day(t, { width: "wide", context: "formatting" }) || a.day(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.day(t, { width: "short", context: "formatting" }) || a.day(t, { width: "narrow", context: "formatting" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = p0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "E",
    "i",
    "c",
    "t",
    "T"
  ];
}
class j$ extends Sn {
  priority = 90;
  parse(t, n, a, r) {
    const i = (o) => {
      const l = Math.floor((o - 1) / 7) * 7;
      return (o + r.weekStartsOn + 6) % 7 + l;
    };
    switch (n) {
      // 3
      case "c":
      case "cc":
        return La(xa(n.length, t), i);
      // 3rd
      case "co":
        return La(
          a.ordinalNumber(t, {
            unit: "day"
          }),
          i
        );
      // Tue
      case "ccc":
        return a.day(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
      // T
      case "ccccc":
        return a.day(t, {
          width: "narrow",
          context: "standalone"
        });
      // Tu
      case "cccccc":
        return a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
      // Tuesday
      case "cccc":
      default:
        return a.day(t, { width: "wide", context: "standalone" }) || a.day(t, {
          width: "abbreviated",
          context: "standalone"
        }) || a.day(t, { width: "short", context: "standalone" }) || a.day(t, { width: "narrow", context: "standalone" });
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 6;
  }
  set(t, n, a, r) {
    return t = p0(t, a, r), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "R",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "I",
    "d",
    "D",
    "E",
    "i",
    "e",
    "t",
    "T"
  ];
}
function Y$(e, t, n) {
  const a = Ft(e, n?.in), r = k$(a, n), i = t - r;
  return Ei(a, i, n);
}
class G$ extends Sn {
  priority = 90;
  parse(t, n, a) {
    const r = (i) => i === 0 ? 7 : i;
    switch (n) {
      // 2
      case "i":
      case "ii":
        return xa(n.length, t);
      // 2nd
      case "io":
        return a.ordinalNumber(t, { unit: "day" });
      // Tue
      case "iii":
        return La(
          a.day(t, {
            width: "abbreviated",
            context: "formatting"
          }) || a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // T
      case "iiiii":
        return La(
          a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // Tu
      case "iiiiii":
        return La(
          a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
      // Tuesday
      case "iiii":
      default:
        return La(
          a.day(t, {
            width: "wide",
            context: "formatting"
          }) || a.day(t, {
            width: "abbreviated",
            context: "formatting"
          }) || a.day(t, {
            width: "short",
            context: "formatting"
          }) || a.day(t, {
            width: "narrow",
            context: "formatting"
          }),
          r
        );
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 7;
  }
  set(t, n, a) {
    return t = Y$(t, a), t.setHours(0, 0, 0, 0), t;
  }
  incompatibleTokens = [
    "y",
    "Y",
    "u",
    "q",
    "Q",
    "M",
    "L",
    "w",
    "d",
    "D",
    "E",
    "e",
    "c",
    "t",
    "T"
  ];
}
class Q$ extends Sn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "a":
      case "aa":
      case "aaa":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaaa":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "aaaa":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(v0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["b", "B", "H", "k", "t", "T"];
}
class J$ extends Sn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "b":
      case "bb":
      case "bbb":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbbb":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "bbbb":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(v0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "B", "H", "k", "t", "T"];
}
class X$ extends Sn {
  priority = 80;
  parse(t, n, a) {
    switch (n) {
      case "B":
      case "BB":
      case "BBB":
        return a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBBB":
        return a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
      case "BBBB":
      default:
        return a.dayPeriod(t, {
          width: "wide",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "abbreviated",
          context: "formatting"
        }) || a.dayPeriod(t, {
          width: "narrow",
          context: "formatting"
        });
    }
  }
  set(t, n, a) {
    return t.setHours(v0(a), 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "t", "T"];
}
class Z$ extends Sn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "h":
        return va(Ma.hour12h, t);
      case "ho":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 12;
  }
  set(t, n, a) {
    const r = t.getHours() >= 12;
    return r && a < 12 ? t.setHours(a + 12, 0, 0, 0) : !r && a === 12 ? t.setHours(0, 0, 0, 0) : t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["H", "K", "k", "t", "T"];
}
class eq extends Sn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "H":
        return va(Ma.hour23h, t);
      case "Ho":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 23;
  }
  set(t, n, a) {
    return t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "h", "K", "k", "t", "T"];
}
class tq extends Sn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "K":
        return va(Ma.hour11h, t);
      case "Ko":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 11;
  }
  set(t, n, a) {
    return t.getHours() >= 12 && a < 12 ? t.setHours(a + 12, 0, 0, 0) : t.setHours(a, 0, 0, 0), t;
  }
  incompatibleTokens = ["h", "H", "k", "t", "T"];
}
class nq extends Sn {
  priority = 70;
  parse(t, n, a) {
    switch (n) {
      case "k":
        return va(Ma.hour24h, t);
      case "ko":
        return a.ordinalNumber(t, { unit: "hour" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 1 && n <= 24;
  }
  set(t, n, a) {
    const r = a <= 24 ? a % 24 : a;
    return t.setHours(r, 0, 0, 0), t;
  }
  incompatibleTokens = ["a", "b", "h", "H", "K", "t", "T"];
}
class aq extends Sn {
  priority = 60;
  parse(t, n, a) {
    switch (n) {
      case "m":
        return va(Ma.minute, t);
      case "mo":
        return a.ordinalNumber(t, { unit: "minute" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 59;
  }
  set(t, n, a) {
    return t.setMinutes(a, 0, 0), t;
  }
  incompatibleTokens = ["t", "T"];
}
class rq extends Sn {
  priority = 50;
  parse(t, n, a) {
    switch (n) {
      case "s":
        return va(Ma.second, t);
      case "so":
        return a.ordinalNumber(t, { unit: "second" });
      default:
        return xa(n.length, t);
    }
  }
  validate(t, n) {
    return n >= 0 && n <= 59;
  }
  set(t, n, a) {
    return t.setSeconds(a, 0), t;
  }
  incompatibleTokens = ["t", "T"];
}
class iq extends Sn {
  priority = 30;
  parse(t, n) {
    const a = (r) => Math.trunc(r * Math.pow(10, -n.length + 3));
    return La(xa(n.length, t), a);
  }
  set(t, n, a) {
    return t.setMilliseconds(a), t;
  }
  incompatibleTokens = ["t", "T"];
}
class oq extends Sn {
  priority = 10;
  parse(t, n) {
    switch (n) {
      case "X":
        return go(
          po.basicOptionalMinutes,
          t
        );
      case "XX":
        return go(po.basic, t);
      case "XXXX":
        return go(
          po.basicOptionalSeconds,
          t
        );
      case "XXXXX":
        return go(
          po.extendedOptionalSeconds,
          t
        );
      case "XXX":
      default:
        return go(po.extended, t);
    }
  }
  set(t, n, a) {
    return n.timestampIsSet ? t : Bn(
      t,
      t.getTime() - q_(t) - a
    );
  }
  incompatibleTokens = ["t", "T", "x"];
}
class sq extends Sn {
  priority = 10;
  parse(t, n) {
    switch (n) {
      case "x":
        return go(
          po.basicOptionalMinutes,
          t
        );
      case "xx":
        return go(po.basic, t);
      case "xxxx":
        return go(
          po.basicOptionalSeconds,
          t
        );
      case "xxxxx":
        return go(
          po.extendedOptionalSeconds,
          t
        );
      case "xxx":
      default:
        return go(po.extended, t);
    }
  }
  set(t, n, a) {
    return n.timestampIsSet ? t : Bn(
      t,
      t.getTime() - q_(t) - a
    );
  }
  incompatibleTokens = ["t", "T", "X"];
}
class lq extends Sn {
  priority = 40;
  parse(t) {
    return eE(t);
  }
  set(t, n, a) {
    return [Bn(t, a * 1e3), { timestampIsSet: !0 }];
  }
  incompatibleTokens = "*";
}
class cq extends Sn {
  priority = 20;
  parse(t) {
    return eE(t);
  }
  set(t, n, a) {
    return [Bn(t, a), { timestampIsSet: !0 }];
  }
  incompatibleTokens = "*";
}
const uq = {
  G: new I$(),
  y: new E$(),
  Y: new P$(),
  R: new O$(),
  u: new D$(),
  Q: new B$(),
  q: new V$(),
  M: new M$(),
  L: new L$(),
  w: new F$(),
  I: new U$(),
  d: new H$(),
  D: new z$(),
  E: new W$(),
  e: new K$(),
  c: new j$(),
  i: new G$(),
  a: new Q$(),
  b: new J$(),
  B: new X$(),
  h: new Z$(),
  H: new eq(),
  K: new tq(),
  k: new nq(),
  m: new aq(),
  s: new rq(),
  S: new iq(),
  X: new oq(),
  x: new sq(),
  t: new lq(),
  T: new cq()
}, dq = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g, fq = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g, mq = /^'([^]*?)'?$/, hq = /''/g, _q = /\S/, vq = /[a-zA-Z]/;
function kb(e, t, n, a) {
  const r = () => Bn(a?.in || n, NaN), i = w$(), o = a?.locale ?? i.locale ?? GI, l = a?.firstWeekContainsDate ?? a?.locale?.options?.firstWeekContainsDate ?? i.firstWeekContainsDate ?? i.locale?.options?.firstWeekContainsDate ?? 1, s = a?.weekStartsOn ?? a?.locale?.options?.weekStartsOn ?? i.weekStartsOn ?? i.locale?.options?.weekStartsOn ?? 0;
  if (!t)
    return e ? r() : Ft(n, a?.in);
  const d = {
    firstWeekContainsDate: l,
    weekStartsOn: s,
    locale: o
  }, u = [new T$(a?.in, n)], f = t.match(fq).map((b) => {
    const v = b[0];
    if (v in bb) {
      const g = bb[v];
      return g(b, o.formatLong);
    }
    return b;
  }).join("").match(dq), h = [];
  for (let b of f) {
    !a?.useAdditionalWeekYearTokens && XI(b) && wb(b, t, e), !a?.useAdditionalDayOfYearTokens && JI(b) && wb(b, t, e);
    const v = b[0], g = uq[v];
    if (g) {
      const { incompatibleTokens: k } = g;
      if (Array.isArray(k)) {
        const C = h.find(
          (D) => k.includes(D.token) || D.token === v
        );
        if (C)
          throw new RangeError(
            `The format string mustn't contain \`${C.fullToken}\` and \`${b}\` at the same time`
          );
      } else if (g.incompatibleTokens === "*" && h.length > 0)
        throw new RangeError(
          `The format string mustn't contain \`${b}\` and any other token at the same time`
        );
      h.push({ token: v, fullToken: b });
      const A = g.run(
        e,
        b,
        o.match,
        d
      );
      if (!A)
        return r();
      u.push(A.setter), e = A.rest;
    } else {
      if (v.match(vq))
        throw new RangeError(
          "Format string contains an unescaped latin alphabet character `" + v + "`"
        );
      if (b === "''" ? b = "'" : v === "'" && (b = pq(b)), e.indexOf(b) === 0)
        e = e.slice(b.length);
      else
        return r();
    }
  }
  if (e.length > 0 && _q.test(e))
    return r();
  const y = u.map((b) => b.priority).sort((b, v) => v - b).filter((b, v, g) => g.indexOf(b) === v).map(
    (b) => u.filter((v) => v.priority === b).sort((v, g) => g.subPriority - v.subPriority)
  ).map((b) => b[0]);
  let p = Ft(n, a?.in);
  if (isNaN(+p)) return r();
  const w = {};
  for (const b of y) {
    if (!b.validate(p, d))
      return r();
    const v = b.set(p, w, d);
    Array.isArray(v) ? (p = v[0], Object.assign(w, v[1])) : p = v;
  }
  return p;
}
function pq(e) {
  return e.match(mq)[1].replace(hq, "'");
}
function GC(e, t, n) {
  const [a, r] = Xf(
    n?.in,
    e,
    t
  );
  return +Ul(a) == +Ul(r);
}
function aE(e, t, n) {
  return Ei(e, -t, n);
}
function rE(e, t, n) {
  const a = Ft(e, n?.in), r = a.getFullYear(), i = a.getDate(), o = Bn(e, 0);
  o.setFullYear(r, t, 15), o.setHours(0, 0, 0, 0);
  const l = b$(o);
  return a.setMonth(t, Math.min(i, l)), a;
}
function Mn(e, t, n) {
  let a = Ft(e, n?.in);
  return isNaN(+a) ? Bn(e, NaN) : (t.year != null && a.setFullYear(t.year), t.month != null && (a = rE(a, t.month)), t.date != null && a.setDate(t.date), t.hours != null && a.setHours(t.hours), t.minutes != null && a.setMinutes(t.minutes), t.seconds != null && a.setSeconds(t.seconds), t.milliseconds != null && a.setMilliseconds(t.milliseconds), a);
}
function gq(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setHours(t), a;
}
function iE(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setMilliseconds(t), a;
}
function yq(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setMinutes(t), a;
}
function oE(e, t, n) {
  const a = Ft(e, n?.in);
  return a.setSeconds(t), a;
}
function yo(e, t, n) {
  const a = Ft(e, n?.in);
  return isNaN(+a) ? Bn(e, NaN) : (a.setFullYear(t), a);
}
function Vu(e, t, n) {
  return Ki(e, -t, n);
}
function bq(e, t, n) {
  const {
    years: a = 0,
    months: r = 0,
    weeks: i = 0,
    days: o = 0,
    hours: l = 0,
    minutes: s = 0,
    seconds: d = 0
  } = t, u = Vu(e, r + a * 12, n), f = aE(u, o + i * 7, n), h = s + l * 60, p = (d + h * 60) * 1e3;
  return Bn(e, +f - p);
}
function sE(e, t, n) {
  return f0(e, -t, n);
}
function Xu() {
  const e = lN();
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img",
      ...e
    },
    [
      T("path", {
        d: "M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"
      }),
      T("path", {
        d: "M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      T("path", {
        d: "M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      }),
      T("path", {
        d: "M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"
      })
    ]
  );
}
Xu.compatConfig = {
  MODE: 3
};
function lE() {
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      T("path", {
        d: "M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"
      }),
      T("path", {
        d: "M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
lE.compatConfig = {
  MODE: 3
};
function g0() {
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      T("path", {
        d: "M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
g0.compatConfig = {
  MODE: 3
};
function y0() {
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      T("path", {
        d: "M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"
      })
    ]
  );
}
y0.compatConfig = {
  MODE: 3
};
function b0() {
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      T("path", {
        d: "M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"
      }),
      T("path", {
        d: "M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"
      })
    ]
  );
}
b0.compatConfig = {
  MODE: 3
};
function w0() {
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      T("path", {
        d: "M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"
      })
    ]
  );
}
w0.compatConfig = {
  MODE: 3
};
function k0() {
  return te(), Oe(
    "svg",
    {
      xmlns: "http://www.w3.org/2000/svg",
      viewBox: "0 0 32 32",
      fill: "currentColor",
      "aria-hidden": "true",
      class: "dp__icon",
      role: "img"
    },
    [
      T("path", {
        d: "M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"
      })
    ]
  );
}
k0.compatConfig = {
  MODE: 3
};
const Qr = (e, t) => t ? new Date(e.toLocaleString("en-US", { timeZone: t })) : new Date(e), S0 = (e, t, n) => Sb(e, t, n) || ut(), wq = (e, t, n) => {
  const a = t.dateInTz ? Qr(new Date(e), t.dateInTz) : ut(e);
  return n ? or(a, !0) : a;
}, Sb = (e, t, n) => {
  if (!e) return null;
  const a = n ? or(ut(e), !0) : ut(e);
  return t ? t.exactMatch ? wq(e, t, n) : Qr(a, t.timezone) : a;
}, kq = (e) => {
  const t = new Date(e.getFullYear(), 0, 1).getTimezoneOffset();
  return e.getTimezoneOffset() < t;
}, Sq = (e, t) => {
  if (!e) return 0;
  const n = /* @__PURE__ */ new Date(), a = new Date(n.toLocaleString("en-US", { timeZone: "UTC" })), r = new Date(n.toLocaleString("en-US", { timeZone: e })), i = (kq(t ?? r) ? r : t ?? r).getTimezoneOffset() / 60;
  return (+a - +r) / (1e3 * 60 * 60) - i;
};
var Ni = /* @__PURE__ */ ((e) => (e.month = "month", e.year = "year", e))(Ni || {}), Ui = /* @__PURE__ */ ((e) => (e.top = "top", e.bottom = "bottom", e))(Ui || {}), Yl = /* @__PURE__ */ ((e) => (e.header = "header", e.calendar = "calendar", e.timePicker = "timePicker", e))(Yl || {}), br = /* @__PURE__ */ ((e) => (e.month = "month", e.year = "year", e.calendar = "calendar", e.time = "time", e.minutes = "minutes", e.hours = "hours", e.seconds = "seconds", e))(br || {});
const Cq = ["timestamp", "date", "iso"];
var Mr = /* @__PURE__ */ ((e) => (e.up = "up", e.down = "down", e.left = "left", e.right = "right", e))(Mr || {}), Jn = /* @__PURE__ */ ((e) => (e.arrowUp = "ArrowUp", e.arrowDown = "ArrowDown", e.arrowLeft = "ArrowLeft", e.arrowRight = "ArrowRight", e.enter = "Enter", e.space = " ", e.esc = "Escape", e.tab = "Tab", e.home = "Home", e.end = "End", e.pageUp = "PageUp", e.pageDown = "PageDown", e))(Jn || {}), vu = /* @__PURE__ */ ((e) => (e.MONTH_AND_YEAR = "MM-yyyy", e.YEAR = "yyyy", e.DATE = "dd-MM-yyyy", e))(vu || {});
function QC(e) {
  return (t) => {
    const n = new Intl.DateTimeFormat(e, {
      weekday: "short",
      timeZone: "UTC"
    }).format(/* @__PURE__ */ new Date(`2017-01-0${t}T00:00:00+00:00`));
    return e === "ar" ? n.slice(2, 5) : n.slice(0, 2);
  };
}
function Aq(e) {
  return (t) => ko(Qr(/* @__PURE__ */ new Date(`2017-01-0${t}T00:00:00+00:00`), "UTC"), "EEEEEE", { locale: e });
}
const xq = (e, t, n) => {
  const a = [1, 2, 3, 4, 5, 6, 7];
  let r;
  if (e !== null)
    try {
      r = a.map(Aq(e));
    } catch {
      r = a.map(QC(t));
    }
  else
    r = a.map(QC(t));
  const i = r.slice(0, n), o = r.slice(n + 1, r.length);
  return [r[n]].concat(...o).concat(...i);
}, C0 = (e, t, n) => {
  const a = [];
  for (let r = +e[0]; r <= +e[1]; r++)
    a.push({ value: +r, text: fE(r, t) });
  return n ? a.reverse() : a;
}, cE = (e, t, n) => {
  const a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].map((i) => {
    const o = i < 10 ? `0${i}` : i;
    return /* @__PURE__ */ new Date(`2017-${o}-01T00:00:00+00:00`);
  });
  if (e !== null)
    try {
      const i = n === "long" ? "LLLL" : "LLL";
      return a.map((o, l) => {
        const s = ko(Qr(o, "UTC"), i, { locale: e });
        return {
          text: s.charAt(0).toUpperCase() + s.substring(1),
          value: l
        };
      });
    } catch {
    }
  const r = new Intl.DateTimeFormat(t, { month: n, timeZone: "UTC" });
  return a.map((i, o) => {
    const l = r.format(i);
    return {
      text: l.charAt(0).toUpperCase() + l.substring(1),
      value: o
    };
  });
}, Tq = (e) => [12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11][e], Ha = (e) => {
  const t = fe(e);
  return t != null && t.$el ? t?.$el : t;
}, Iq = (e) => ({ type: "dot", ...e ?? {} }), uE = (e) => Array.isArray(e) ? !!e[0] && !!e[1] : !1, A0 = {
  prop: (e) => `"${e}" prop must be enabled!`,
  dateArr: (e) => `You need to use array as "model-value" binding in order to support "${e}"`
}, nr = (e) => e, JC = (e) => e === 0 ? e : !e || isNaN(+e) ? null : +e, XC = (e) => e === null, dE = (e) => {
  if (e)
    return [...e.querySelectorAll("input, button, select, textarea, a[href]")][0];
}, Eq = (e) => {
  const t = [], n = (a) => a.filter((r) => r);
  for (let a = 0; a < e.length; a += 3) {
    const r = [e[a], e[a + 1], e[a + 2]];
    t.push(n(r));
  }
  return t;
}, Pf = (e, t, n) => {
  const a = n != null, r = t != null;
  if (!a && !r) return !1;
  const i = +n, o = +t;
  return a && r ? +e > i || +e < o : a ? +e > i : r ? +e < o : !1;
}, Mu = (e, t) => Eq(e).map((n) => n.map((a) => {
  const { active: r, disabled: i, isBetween: o, highlighted: l } = t(a);
  return {
    ...a,
    active: r,
    disabled: i,
    className: {
      dp__overlay_cell_active: r,
      dp__overlay_cell: !r,
      dp__overlay_cell_disabled: i,
      dp__overlay_cell_pad: !0,
      dp__overlay_cell_active_disabled: i && r,
      dp__cell_in_between: o,
      "dp--highlighted": l
    }
  };
})), Us = (e, t, n = !1) => {
  e && t.allowStopPropagation && (n && e.stopImmediatePropagation(), e.stopPropagation());
}, Pq = () => [
  "a[href]",
  "area[href]",
  "input:not([disabled]):not([type='hidden'])",
  "select:not([disabled])",
  "textarea:not([disabled])",
  "button:not([disabled])",
  "[tabindex]:not([tabindex='-1'])",
  "[data-datepicker-instance]"
].join(", ");
function Oq(e, t) {
  let n = [...document.querySelectorAll(Pq())];
  n = n.filter((r) => !e.contains(r) || r.hasAttribute("data-datepicker-instance"));
  const a = n.indexOf(e);
  if (a >= 0 && (t ? a - 1 >= 0 : a + 1 <= n.length))
    return n[a + (t ? -1 : 1)];
}
const Cb = (e, t) => e?.querySelector(`[data-dp-element="${t}"]`), fE = (e, t) => new Intl.NumberFormat(t, { useGrouping: !1, style: "decimal" }).format(e), x0 = (e, t) => ko(e, t ?? vu.DATE), ay = (e) => Array.isArray(e), z_ = (e, t, n) => t.get(x0(e, n)), Dq = (e, t) => e ? t ? t instanceof Map ? !!z_(e, t) : t(ut(e)) : !1 : !0, Nr = (e, t, n = !1, a) => {
  if (e.key === Jn.enter || e.key === Jn.space)
    return n && e.preventDefault(), t();
  if (a) return a(e);
}, Bq = () => "ontouchstart" in window || navigator.maxTouchPoints > 0, mE = (e, t) => e ? vu.MONTH_AND_YEAR : t ? vu.YEAR : vu.DATE, hE = (e) => e < 10 ? `0${e}` : e, ZC = (e, t, n, a, r, i) => {
  const o = kb(e, t.slice(0, e.length), /* @__PURE__ */ new Date(), { locale: i });
  return uf(o) && zI(o) ? a || r ? o : Mn(o, {
    hours: +n.hours,
    minutes: +n?.minutes,
    seconds: +n?.seconds,
    milliseconds: 0
  }) : null;
}, Vq = (e, t, n, a, r, i) => {
  const o = Array.isArray(n) ? n[0] : n;
  if (typeof t == "string")
    return ZC(e, t, o, a, r, i);
  if (Array.isArray(t)) {
    let l = null;
    for (const s of t)
      if (l = ZC(e, s, o, a, r, i), l)
        break;
    return l;
  }
  return typeof t == "function" ? t(e) : null;
}, ut = (e) => e ? new Date(e) : /* @__PURE__ */ new Date(), Mq = (e, t, n) => {
  if (t) {
    const r = (e.getMonth() + 1).toString().padStart(2, "0"), i = e.getDate().toString().padStart(2, "0"), o = e.getHours().toString().padStart(2, "0"), l = e.getMinutes().toString().padStart(2, "0"), s = n ? e.getSeconds().toString().padStart(2, "0") : "00";
    return `${e.getFullYear()}-${r}-${i}T${o}:${l}:${s}.000Z`;
  }
  const a = Date.UTC(
    e.getUTCFullYear(),
    e.getUTCMonth(),
    e.getUTCDate(),
    e.getUTCHours(),
    e.getUTCMinutes(),
    e.getUTCSeconds()
  );
  return new Date(a).toISOString();
}, or = (e, t) => {
  const n = ut(JSON.parse(JSON.stringify(e))), a = Mn(n, { hours: 0, minutes: 0, seconds: 0, milliseconds: 0 });
  return t ? T5(a) : a;
}, $s = (e, t, n, a) => {
  let r = e ? ut(e) : ut();
  return (t || t === 0) && (r = gq(r, +t)), (n || n === 0) && (r = yq(r, +n)), (a || a === 0) && (r = oE(r, +a)), iE(r, 0);
}, Sa = (e, t) => !e || !t ? !1 : Bu(or(e), or(t)), mn = (e, t) => !e || !t ? !1 : su(or(e), or(t)), Va = (e, t) => !e || !t ? !1 : ac(or(e), or(t)), Of = (e, t, n) => e != null && e[0] && e != null && e[1] ? Va(n, e[0]) && Sa(n, e[1]) : e != null && e[0] && t ? Va(n, e[0]) && Sa(n, t) || Sa(n, e[0]) && Va(n, t) : !1, qi = (e) => {
  const t = Mn(new Date(e), { date: 1 });
  return or(t);
}, ry = (e, t, n) => t && (n || n === 0) ? Object.fromEntries(
  ["hours", "minutes", "seconds"].map((a) => a === t ? [a, n] : [a, isNaN(+e[a]) ? void 0 : +e[a]])
) : {
  hours: isNaN(+e.hours) ? void 0 : +e.hours,
  minutes: isNaN(+e.minutes) ? void 0 : +e.minutes,
  seconds: isNaN(+e.seconds) ? void 0 : +e.seconds
}, Gl = (e) => ({
  hours: rs(e),
  minutes: Gs(e),
  seconds: Du(e)
}), _E = (e, t) => {
  if (t) {
    const n = jt(ut(t));
    if (n > e) return 12;
    if (n === e) return fn(ut(t));
  }
}, vE = (e, t) => {
  if (t) {
    const n = jt(ut(t));
    return n < e ? -1 : n === e ? fn(ut(t)) : void 0;
  }
}, Lu = (e) => {
  if (e) return jt(ut(e));
}, pE = (e, t) => {
  const n = Va(e, t) ? t : e, a = Va(t, e) ? t : e;
  return KI({ start: n, end: a });
}, Lq = (e) => {
  const t = Ki(e, 1);
  return { month: fn(t), year: jt(t) };
}, jo = (e, t) => {
  const n = Ji(e, { weekStartsOn: +t }), a = YI(e, { weekStartsOn: +t });
  return [n, a];
}, gE = (e, t) => {
  const n = {
    hours: rs(ut()),
    minutes: Gs(ut()),
    seconds: t ? Du(ut()) : 0
  };
  return Object.assign(n, e);
}, Rs = (e, t, n) => [Mn(ut(e), { date: 1 }), Mn(ut(), { month: t, year: n, date: 1 })], Xo = (e, t, n) => {
  let a = e ? ut(e) : ut();
  return (t || t === 0) && (a = rE(a, t)), n && (a = yo(a, n)), a;
}, yE = (e, t, n, a, r) => {
  if (!a || r && !t || !r && !n) return !1;
  const i = r ? Ki(e, 1) : Vu(e, 1), o = [fn(i), jt(i)];
  return r ? !Fq(...o, t) : !Rq(...o, n);
}, Rq = (e, t, n) => Sa(...Rs(n, e, t)) || mn(...Rs(n, e, t)), Fq = (e, t, n) => Va(...Rs(n, e, t)) || mn(...Rs(n, e, t)), bE = (e, t, n, a, r, i, o) => {
  if (typeof t == "function" && !o) return t(e);
  const l = n ? { locale: n } : void 0;
  return Array.isArray(e) ? `${ko(e[0], i, l)}${r && !e[1] ? "" : a}${e[1] ? ko(e[1], i, l) : ""}` : ko(e, i, l);
}, Zc = (e) => {
  if (e) return null;
  throw new Error(A0.prop("partial-range"));
}, Rh = (e, t) => {
  if (t) return e();
  throw new Error(A0.prop("range"));
}, Ab = (e) => Array.isArray(e) ? uf(e[0]) && (e[1] ? uf(e[1]) : !0) : e ? uf(e) : !1, Nq = (e, t) => Mn(t ?? ut(), {
  hours: +e.hours || 0,
  minutes: +e.minutes || 0,
  seconds: +e.seconds || 0
}), iy = (e, t, n, a) => {
  if (!e) return !0;
  if (a) {
    const r = n === "max" ? Bu(e, t) : ac(e, t), i = { seconds: 0, milliseconds: 0 };
    return r || su(Mn(e, i), Mn(t, i));
  }
  return n === "max" ? e.getTime() <= t.getTime() : e.getTime() >= t.getTime();
}, oy = (e, t, n) => e ? Nq(e, t) : ut(n ?? t), eA = (e, t, n, a, r) => {
  if (Array.isArray(a)) {
    const o = oy(e, a[0], t), l = oy(e, a[1], t);
    return iy(a[0], o, n, !!t) && iy(a[1], l, n, !!t) && r;
  }
  const i = oy(e, a, t);
  return iy(a, i, n, !!t) && r;
}, sy = (e) => Mn(ut(), Gl(e)), Uq = (e, t, n) => {
  if (e instanceof Map) {
    const a = `${hE(n + 1)}-${t}`;
    return e.size ? e.has(a) : !1;
  }
  return typeof e == "function" ? e(or(Mn(ut(), { month: n, year: t }), !0)) : !1;
}, $q = (e, t, n) => {
  if (e instanceof Map) {
    const a = `${hE(n + 1)}-${t}`;
    return e.size ? e.has(a) : !0;
  }
  return !0;
}, wE = (e, t, n) => typeof e == "function" ? e({ month: t, year: n }) : !!e.months.find((a) => a.month === t && a.year === n), T0 = (e, t) => typeof e == "function" ? e(t) : e.years.includes(t), xb = (e) => `dp-${ko(e, "yyyy-MM-dd")}`, tA = (e, t) => {
  const n = aE(or(t), e), a = Ei(or(t), e);
  return { before: n, after: a };
}, zd = Zn({
  menuFocused: !1,
  shiftKeyInMenu: !1
}), kE = () => {
  const e = (n) => {
    zd.menuFocused = n;
  }, t = (n) => {
    zd.shiftKeyInMenu !== n && (zd.shiftKeyInMenu = n);
  };
  return {
    control: W(() => ({ shiftKeyInMenu: zd.shiftKeyInMenu, menuFocused: zd.menuFocused })),
    setMenuFocused: e,
    setShiftKey: t
  };
}, Qn = Zn({
  monthYear: [],
  calendar: [],
  time: [],
  actionRow: [],
  selectionGrid: [],
  timePicker: {
    0: [],
    1: []
  },
  monthPicker: []
}), ly = be(null), Fh = be(!1), cy = be(!1), uy = be(!1), dy = be(!1), gr = be(0), Ba = be(0), al = () => {
  const e = W(() => Fh.value ? [...Qn.selectionGrid, Qn.actionRow].filter((f) => f.length) : cy.value ? [
    ...Qn.timePicker[0],
    ...Qn.timePicker[1],
    dy.value ? [] : [ly.value],
    Qn.actionRow
  ].filter((f) => f.length) : uy.value ? [...Qn.monthPicker, Qn.actionRow] : [Qn.monthYear, ...Qn.calendar, Qn.time, Qn.actionRow].filter((f) => f.length)), t = (f) => {
    gr.value = f ? gr.value + 1 : gr.value - 1;
    let h = null;
    e.value[Ba.value] && (h = e.value[Ba.value][gr.value]), !h && e.value[Ba.value + (f ? 1 : -1)] ? (Ba.value = Ba.value + (f ? 1 : -1), gr.value = f ? 0 : e.value[Ba.value].length - 1) : h || (gr.value = f ? gr.value - 1 : gr.value + 1);
  }, n = (f) => {
    Ba.value === 0 && !f || Ba.value === e.value.length && f || (Ba.value = f ? Ba.value + 1 : Ba.value - 1, e.value[Ba.value] ? e.value[Ba.value] && !e.value[Ba.value][gr.value] && gr.value !== 0 && (gr.value = e.value[Ba.value].length - 1) : Ba.value = f ? Ba.value - 1 : Ba.value + 1);
  }, a = (f) => {
    let h = null;
    e.value[Ba.value] && (h = e.value[Ba.value][gr.value]), h ? h.focus({ preventScroll: !Fh.value }) : gr.value = f ? gr.value - 1 : gr.value + 1;
  }, r = () => {
    t(!0), a(!0);
  }, i = () => {
    t(!1), a(!1);
  }, o = () => {
    n(!1), a(!0);
  }, l = () => {
    n(!0), a(!0);
  }, s = (f, h) => {
    Qn[h] = f;
  }, d = (f, h) => {
    Qn[h] = f;
  }, u = () => {
    gr.value = 0, Ba.value = 0;
  };
  return {
    buildMatrix: s,
    buildMultiLevelMatrix: d,
    setTimePickerBackRef: (f) => {
      ly.value = f;
    },
    setSelectionGrid: (f) => {
      Fh.value = f, u(), f || (Qn.selectionGrid = []);
    },
    setTimePicker: (f, h = !1) => {
      cy.value = f, dy.value = h, u(), f || (Qn.timePicker[0] = [], Qn.timePicker[1] = []);
    },
    setTimePickerElements: (f, h = 0) => {
      Qn.timePicker[h] = f;
    },
    arrowRight: r,
    arrowLeft: i,
    arrowUp: o,
    arrowDown: l,
    clearArrowNav: () => {
      Qn.monthYear = [], Qn.calendar = [], Qn.time = [], Qn.actionRow = [], Qn.selectionGrid = [], Qn.timePicker[0] = [], Qn.timePicker[1] = [], Fh.value = !1, cy.value = !1, dy.value = !1, uy.value = !1, u(), ly.value = null;
    },
    setMonthPicker: (f) => {
      uy.value = f, u();
    },
    refSets: Qn
    // exposed for testing
  };
}, nA = (e) => ({
  menuAppearTop: "dp-menu-appear-top",
  menuAppearBottom: "dp-menu-appear-bottom",
  open: "dp-slide-down",
  close: "dp-slide-up",
  next: "calendar-next",
  previous: "calendar-prev",
  vNext: "dp-slide-up",
  vPrevious: "dp-slide-down",
  ...e ?? {}
}), qq = (e) => ({
  toggleOverlay: "Toggle overlay",
  menu: "Datepicker menu",
  input: "Datepicker input",
  openTimePicker: "Open time picker",
  closeTimePicker: "Close time Picker",
  incrementValue: (t) => `Increment ${t}`,
  decrementValue: (t) => `Decrement ${t}`,
  openTpOverlay: (t) => `Open ${t} overlay`,
  amPmButton: "Switch AM/PM mode",
  openYearsOverlay: "Open years overlay",
  openMonthsOverlay: "Open months overlay",
  nextMonth: "Next month",
  prevMonth: "Previous month",
  nextYear: "Next year",
  prevYear: "Previous year",
  day: void 0,
  weekDay: void 0,
  clearInput: "Clear value",
  calendarIcon: "Calendar icon",
  timePicker: "Time picker",
  monthPicker: (t) => `Month picker${t ? " overlay" : ""}`,
  yearPicker: (t) => `Year picker${t ? " overlay" : ""}`,
  timeOverlay: (t) => `${t} overlay`,
  ...e ?? {}
}), aA = (e) => e ? typeof e == "boolean" ? e ? 2 : 0 : +e >= 2 ? +e : 2 : 0, Hq = (e) => {
  const t = typeof e == "object" && e, n = {
    static: !0,
    solo: !1
  };
  if (!e) return { ...n, count: aA(!1) };
  const a = t ? e : {}, r = t ? a.count ?? !0 : e, i = aA(r);
  return Object.assign(n, a, { count: i });
}, zq = (e, t, n) => e || (typeof n == "string" ? n : t), Wq = (e) => typeof e == "boolean" ? e ? nA({}) : !1 : nA(e), Kq = (e) => {
  const t = {
    enterSubmit: !0,
    tabSubmit: !0,
    openMenu: "open",
    selectOnFocus: !1,
    rangeSeparator: " - ",
    escClose: !0
  };
  return typeof e == "object" ? { ...t, ...e ?? {}, enabled: !0 } : { ...t, enabled: e };
}, jq = (e) => ({
  months: [],
  years: [],
  times: { hours: [], minutes: [], seconds: [] },
  ...e ?? {}
}), Yq = (e) => ({
  showSelect: !0,
  showCancel: !0,
  showNow: !1,
  showPreview: !0,
  ...e ?? {}
}), Gq = (e) => {
  const t = { input: !1 };
  return typeof e == "object" ? { ...t, ...e ?? {}, enabled: !0 } : {
    enabled: e,
    ...t
  };
}, Qq = (e) => ({ allowStopPropagation: !0, closeOnScroll: !1, modeHeight: 255, allowPreventDefault: !1, closeOnClearValue: !0, closeOnAutoApply: !0, noSwipe: !1, keepActionRow: !1, onClickOutside: void 0, tabOutClosesMenu: !0, arrowLeft: void 0, keepViewOnOffsetClick: !1, timeArrowHoldThreshold: 0, shadowDom: !1, mobileBreakpoint: 600, setDateOnMenuClose: !1, ...e ?? {} }), Jq = (e) => {
  const t = {
    dates: Array.isArray(e) ? e.map((n) => ut(n)) : [],
    years: [],
    months: [],
    quarters: [],
    weeks: [],
    weekdays: [],
    options: { highlightDisabled: !1 }
  };
  return typeof e == "function" ? e : { ...t, ...e ?? {} };
}, Xq = (e) => typeof e == "object" ? {
  type: e?.type ?? "local",
  hideOnOffsetDates: e?.hideOnOffsetDates ?? !1
} : {
  type: e,
  hideOnOffsetDates: !1
}, Zq = (e) => {
  const t = {
    noDisabledRange: !1,
    showLastInRange: !0,
    minMaxRawRange: !1,
    partialRange: !0,
    disableTimeRangeValidation: !1,
    maxRange: void 0,
    minRange: void 0,
    autoRange: void 0,
    fixedStart: !1,
    fixedEnd: !1
  };
  return typeof e == "object" ? { enabled: !0, ...t, ...e } : {
    enabled: e,
    ...t
  };
}, e6 = (e) => e ? typeof e == "string" ? {
  timezone: e,
  exactMatch: !1,
  dateInTz: void 0,
  emitTimezone: void 0,
  convertModel: !0
} : {
  timezone: e.timezone,
  exactMatch: e.exactMatch ?? !1,
  dateInTz: e.dateInTz ?? void 0,
  emitTimezone: e.emitTimezone ?? void 0,
  convertModel: e.convertModel ?? !0
} : { timezone: void 0, exactMatch: !1, emitTimezone: void 0 }, fy = (e, t, n, a) => new Map(
  e.map((r) => {
    const i = S0(r, t, a);
    return [x0(i, n), i];
  })
), t6 = (e, t) => e.length ? new Map(
  e.map((n) => {
    const a = S0(n.date, t);
    return [x0(a, vu.DATE), n];
  })
) : null, n6 = (e) => {
  var t;
  const n = mE(e.isMonthPicker, e.isYearPicker);
  return {
    minDate: Sb(e.minDate, e.timezone, e.isSpecific),
    maxDate: Sb(e.maxDate, e.timezone, e.isSpecific),
    disabledDates: ay(e.disabledDates) ? fy(e.disabledDates, e.timezone, n, e.isSpecific) : e.disabledDates,
    allowedDates: ay(e.allowedDates) ? fy(e.allowedDates, e.timezone, n, e.isSpecific) : null,
    highlight: typeof e.highlight == "object" && ay((t = e.highlight) == null ? void 0 : t.dates) ? fy(e.highlight.dates, e.timezone, n) : e.highlight,
    markers: t6(e.markers, e.timezone)
  };
}, a6 = (e) => typeof e == "boolean" ? { enabled: e, dragSelect: !0, limit: null } : {
  enabled: !!e,
  limit: e.limit ? +e.limit : null,
  dragSelect: e.dragSelect ?? !0
}, r6 = (e) => ({
  ...Object.fromEntries(
    Object.keys(e).map((t) => {
      const n = t, a = e[n], r = typeof e[n] == "string" ? { [a]: !0 } : Object.fromEntries(a.map((i) => [i, !0]));
      return [t, r];
    })
  )
}), fa = (e) => {
  const t = () => {
    const D = e.enableSeconds ? ":ss" : "", P = e.enableMinutes ? ":mm" : "";
    return e.is24 ? `HH${P}${D}` : `hh${P}${D} aa`;
  }, n = () => {
    var D;
    return e.format ? e.format : e.monthPicker ? "MM/yyyy" : e.timePicker ? t() : e.weekPicker ? `${((D = b.value) == null ? void 0 : D.type) === "iso" ? "II" : "ww"}-RR` : e.yearPicker ? "yyyy" : e.quarterPicker ? "QQQ/yyyy" : e.enableTimePicker ? `MM/dd/yyyy, ${t()}` : "MM/dd/yyyy";
  }, a = (D) => gE(D, e.enableSeconds), r = () => A.value.enabled ? e.startTime && Array.isArray(e.startTime) ? [a(e.startTime[0]), a(e.startTime[1])] : null : e.startTime && !Array.isArray(e.startTime) ? a(e.startTime) : null, i = W(() => Hq(e.multiCalendars)), o = W(() => r()), l = W(() => qq(e.ariaLabels)), s = W(() => jq(e.filters)), d = W(() => Wq(e.transitions)), u = W(() => Yq(e.actionRow)), f = W(
    () => zq(e.previewFormat, e.format, n())
  ), h = W(() => Kq(e.textInput)), y = W(() => Gq(e.inline)), p = W(() => Qq(e.config)), w = W(() => Jq(e.highlight)), b = W(() => Xq(e.weekNumbers)), v = W(() => e6(e.timezone)), g = W(() => a6(e.multiDates)), k = W(
    () => n6({
      minDate: e.minDate,
      maxDate: e.maxDate,
      disabledDates: e.disabledDates,
      allowedDates: e.allowedDates,
      highlight: w.value,
      markers: e.markers,
      timezone: v.value,
      isSpecific: e.monthPicker || e.yearPicker || e.quarterPicker,
      isMonthPicker: e.monthPicker,
      isYearPicker: e.yearPicker
    })
  ), A = W(() => Zq(e.range)), C = W(() => r6(e.ui));
  return {
    defaultedTransitions: d,
    defaultedMultiCalendars: i,
    defaultedStartTime: o,
    defaultedAriaLabels: l,
    defaultedFilters: s,
    defaultedActionRow: u,
    defaultedPreviewFormat: f,
    defaultedTextInput: h,
    defaultedInline: y,
    defaultedConfig: p,
    defaultedHighlight: w,
    defaultedWeekNumbers: b,
    defaultedRange: A,
    propDates: k,
    defaultedTz: v,
    defaultedMultiDates: g,
    defaultedUI: C,
    getDefaultPattern: n,
    getDefaultStartTime: r,
    handleEventPropagation: (D) => {
      p.value.allowStopPropagation && D.stopPropagation(), p.value.allowPreventDefault && D.preventDefault();
    }
  };
}, i6 = (e, t, n) => {
  const a = be(), { defaultedTextInput: r, defaultedRange: i, defaultedTz: o, defaultedMultiDates: l, getDefaultPattern: s } = fa(t), d = be(""), u = ye(t, "format"), f = ye(t, "formatLocale");
  tt(
    a,
    () => {
      typeof t.onInternalModelChange == "function" && e("internal-model-change", a.value, pe(!0));
    },
    { deep: !0 }
  ), tt(i, (z, ge) => {
    z.enabled !== ge.enabled && (a.value = null);
  }), tt(u, () => {
    ue();
  });
  const h = (z) => o.value.timezone && o.value.convertModel ? Qr(z, o.value.timezone) : z, y = (z) => {
    if (o.value.timezone && o.value.convertModel) {
      const ge = Sq(o.value.timezone, z);
      return b5(z, ge);
    }
    return z;
  }, p = (z, ge, Ve = !1) => bE(
    z,
    t.format,
    t.formatLocale,
    r.value.rangeSeparator,
    t.modelAuto,
    ge ?? s(),
    Ve
  ), w = (z) => z ? t.modelType ? U(z) : {
    hours: rs(z),
    minutes: Gs(z),
    seconds: t.enableSeconds ? Du(z) : 0
  } : null, b = (z) => t.modelType ? U(z) : { month: fn(z), year: jt(z) }, v = (z) => Array.isArray(z) ? l.value.enabled ? z.map((ge) => g(ge, yo(ut(), ge))) : Rh(
    () => [
      yo(ut(), z[0]),
      z[1] ? yo(ut(), z[1]) : Zc(i.value.partialRange)
    ],
    i.value.enabled
  ) : yo(ut(), +z), g = (z, ge) => (typeof z == "string" || typeof z == "number") && t.modelType ? Y(z) : ge, k = (z) => Array.isArray(z) ? [
    g(
      z[0],
      $s(null, +z[0].hours, +z[0].minutes, z[0].seconds)
    ),
    g(
      z[1],
      $s(null, +z[1].hours, +z[1].minutes, z[1].seconds)
    )
  ] : g(z, $s(null, z.hours, z.minutes, z.seconds)), A = (z) => {
    const ge = Mn(ut(), { date: 1 });
    return Array.isArray(z) ? l.value.enabled ? z.map((Ve) => g(Ve, Xo(ge, +Ve.month, +Ve.year))) : Rh(
      () => [
        g(z[0], Xo(ge, +z[0].month, +z[0].year)),
        g(
          z[1],
          z[1] ? Xo(ge, +z[1].month, +z[1].year) : Zc(i.value.partialRange)
        )
      ],
      i.value.enabled
    ) : g(z, Xo(ge, +z.month, +z.year));
  }, C = (z) => {
    if (Array.isArray(z))
      return z.map((ge) => Y(ge));
    throw new Error(A0.dateArr("multi-dates"));
  }, D = (z) => {
    if (Array.isArray(z) && i.value.enabled) {
      const ge = z[0], Ve = z[1];
      return [
        ut(Array.isArray(ge) ? ge[0] : null),
        Array.isArray(Ve) && Ve.length ? ut(Ve[0]) : null
      ];
    }
    return ut(z[0]);
  }, P = (z) => t.modelAuto ? Array.isArray(z) ? [Y(z[0]), Y(z[1])] : t.autoApply ? [Y(z)] : [Y(z), null] : Array.isArray(z) ? Rh(
    () => z[1] ? [
      Y(z[0]),
      z[1] ? Y(z[1]) : Zc(i.value.partialRange)
    ] : [Y(z[0])],
    i.value.enabled
  ) : Y(z), O = () => {
    Array.isArray(a.value) && i.value.enabled && a.value.length === 1 && a.value.push(Zc(i.value.partialRange));
  }, I = () => {
    const z = a.value;
    return [
      U(z[0]),
      z[1] ? U(z[1]) : Zc(i.value.partialRange)
    ];
  }, x = () => Array.isArray(a.value) ? a.value[1] ? I() : U(nr(a.value[0])) : [], M = () => (a.value || []).map((z) => U(z)), V = (z = !1) => (z || O(), t.modelAuto ? x() : l.value.enabled ? M() : Array.isArray(a.value) ? Rh(() => I(), i.value.enabled) : U(nr(a.value))), B = (z) => !z || Array.isArray(z) && !z.length ? null : t.timePicker ? k(nr(z)) : t.monthPicker ? A(nr(z)) : t.yearPicker ? v(nr(z)) : l.value.enabled ? C(nr(z)) : t.weekPicker ? D(nr(z)) : P(nr(z)), F = (z) => {
    const ge = B(z);
    Ab(nr(ge)) ? (a.value = nr(ge), ue()) : (a.value = null, d.value = "");
  }, H = () => {
    const z = (ge) => ko(ge, r.value.format);
    return `${z(a.value[0])} ${r.value.rangeSeparator} ${a.value[1] ? z(a.value[1]) : ""}`;
  }, K = () => n.value && a.value ? Array.isArray(a.value) ? H() : ko(a.value, r.value.format) : p(a.value), Z = () => a.value ? l.value.enabled ? a.value.map((z) => p(z)).join("; ") : r.value.enabled && typeof r.value.format == "string" ? K() : p(a.value) : "", ue = () => {
    !t.format || typeof t.format == "string" || r.value.enabled && typeof r.value.format == "string" ? d.value = Z() : d.value = t.format(a.value);
  }, Y = (z) => {
    if (t.utc) {
      const ge = new Date(z);
      return t.utc === "preserve" ? new Date(ge.getTime() + ge.getTimezoneOffset() * 6e4) : ge;
    }
    return t.modelType ? Cq.includes(t.modelType) ? h(new Date(z)) : t.modelType === "format" && (typeof t.format == "string" || !t.format) ? h(
      kb(z, s(), /* @__PURE__ */ new Date(), { locale: f.value })
    ) : h(
      kb(z, t.modelType, /* @__PURE__ */ new Date(), { locale: f.value })
    ) : h(new Date(z));
  }, U = (z) => z ? t.utc ? Mq(z, t.utc === "preserve", t.enableSeconds) : t.modelType ? t.modelType === "timestamp" ? +y(z) : t.modelType === "iso" ? y(z).toISOString() : t.modelType === "format" && (typeof t.format == "string" || !t.format) ? p(y(z)) : p(y(z), t.modelType, !0) : y(z) : "", q = (z, ge = !1, Ve = !1) => {
    if (Ve) return z;
    if (e("update:model-value", z), o.value.emitTimezone && ge) {
      const Ne = Array.isArray(z) ? z.map((ce) => Qr(nr(ce), o.value.emitTimezone)) : Qr(nr(z), o.value.emitTimezone);
      e("update:model-timezone-value", Ne);
    }
  }, oe = (z) => Array.isArray(a.value) ? l.value.enabled ? a.value.map((ge) => z(ge)) : [
    z(a.value[0]),
    a.value[1] ? z(a.value[1]) : Zc(i.value.partialRange)
  ] : z(nr(a.value)), ee = () => {
    if (Array.isArray(a.value)) {
      const z = jo(a.value[0], t.weekStart), ge = a.value[1] ? jo(a.value[1], t.weekStart) : [];
      return [z.map((Ve) => ut(Ve)), ge.map((Ve) => ut(Ve))];
    }
    return jo(a.value, t.weekStart).map((z) => ut(z));
  }, he = (z, ge) => q(nr(oe(z)), !1, ge), ve = (z) => {
    const ge = ee();
    return z ? ge : e("update:model-value", ee());
  }, pe = (z = !1) => (z || ue(), t.monthPicker ? he(b, z) : t.timePicker ? he(w, z) : t.yearPicker ? he(jt, z) : t.weekPicker ? ve(z) : q(V(z), !0, z));
  return {
    inputValue: d,
    internalModelValue: a,
    checkBeforeEmit: () => a.value ? i.value.enabled ? i.value.partialRange ? a.value.length >= 1 : a.value.length === 2 : !!a.value : !1,
    parseExternalModelValue: F,
    formatInputValue: ue,
    emitModelValue: pe
  };
}, o6 = (e, t) => {
  const { defaultedFilters: n, propDates: a } = fa(e), { validateMonthYearInRange: r } = rl(e), i = (u, f) => {
    let h = u;
    return n.value.months.includes(fn(h)) ? (h = f ? Ki(u, 1) : Vu(u, 1), i(h, f)) : h;
  }, o = (u, f) => {
    let h = u;
    return n.value.years.includes(jt(h)) ? (h = f ? f0(u, 1) : sE(u, 1), o(h, f)) : h;
  }, l = (u, f = !1) => {
    const h = Mn(ut(), { month: e.month, year: e.year });
    let y = u ? Ki(h, 1) : Vu(h, 1);
    e.disableYearSelect && (y = yo(y, e.year));
    let p = fn(y), w = jt(y);
    n.value.months.includes(p) && (y = i(y, u), p = fn(y), w = jt(y)), n.value.years.includes(w) && (y = o(y, u), w = jt(y)), r(p, w, u, e.preventMinMaxNavigation) && s(p, w, f);
  }, s = (u, f, h) => {
    t("update-month-year", { month: u, year: f, fromNav: h });
  }, d = W(() => (u) => yE(
    Mn(ut(), { month: e.month, year: e.year }),
    a.value.maxDate,
    a.value.minDate,
    e.preventMinMaxNavigation,
    u
  ));
  return { handleMonthYearChange: l, isDisabled: d, updateMonthYear: s };
}, bv = {
  multiCalendars: { type: [Boolean, Number, String, Object], default: void 0 },
  modelValue: { type: [String, Date, Array, Object, Number], default: null },
  modelType: { type: String, default: null },
  position: { type: String, default: "center" },
  dark: { type: Boolean, default: !1 },
  format: {
    type: [String, Function],
    default: () => null
  },
  autoPosition: { type: [Boolean, String], default: !0 },
  altPosition: { type: Function, default: null },
  transitions: { type: [Boolean, Object], default: !0 },
  formatLocale: { type: Object, default: null },
  utc: { type: [Boolean, String], default: !1 },
  ariaLabels: { type: Object, default: () => ({}) },
  offset: { type: [Number, String], default: 10 },
  hideNavigation: { type: Array, default: () => [] },
  timezone: { type: [String, Object], default: null },
  vertical: { type: Boolean, default: !1 },
  disableMonthYearSelect: { type: Boolean, default: !1 },
  disableYearSelect: { type: Boolean, default: !1 },
  dayClass: {
    type: Function,
    default: null
  },
  yearRange: { type: Array, default: () => [1900, 2100] },
  enableTimePicker: { type: Boolean, default: !0 },
  autoApply: { type: Boolean, default: !1 },
  disabledDates: { type: [Array, Function], default: () => [] },
  monthNameFormat: { type: String, default: "short" },
  startDate: { type: [Date, String], default: null },
  startTime: { type: [Object, Array], default: null },
  hideOffsetDates: { type: Boolean, default: !1 },
  noToday: { type: Boolean, default: !1 },
  disabledWeekDays: { type: Array, default: () => [] },
  allowedDates: { type: Array, default: null },
  nowButtonLabel: { type: String, default: "Now" },
  markers: { type: Array, default: () => [] },
  escClose: { type: Boolean, default: !0 },
  spaceConfirm: { type: Boolean, default: !0 },
  monthChangeOnArrows: { type: Boolean, default: !0 },
  presetDates: { type: Array, default: () => [] },
  flow: { type: Array, default: () => [] },
  partialFlow: { type: Boolean, default: !1 },
  preventMinMaxNavigation: { type: Boolean, default: !1 },
  reverseYears: { type: Boolean, default: !1 },
  weekPicker: { type: Boolean, default: !1 },
  filters: { type: Object, default: () => ({}) },
  arrowNavigation: { type: Boolean, default: !1 },
  highlight: {
    type: [Function, Object],
    default: null
  },
  teleport: { type: [Boolean, String, Object], default: null },
  teleportCenter: { type: Boolean, default: !1 },
  locale: { type: String, default: "en-Us" },
  weekNumName: { type: String, default: "W" },
  weekStart: { type: [Number, String], default: 1 },
  weekNumbers: {
    type: [String, Function, Object],
    default: null
  },
  monthChangeOnScroll: { type: [Boolean, String], default: !0 },
  dayNames: {
    type: [Function, Array],
    default: null
  },
  monthPicker: { type: Boolean, default: !1 },
  customProps: { type: Object, default: null },
  yearPicker: { type: Boolean, default: !1 },
  modelAuto: { type: Boolean, default: !1 },
  selectText: { type: String, default: "Select" },
  cancelText: { type: String, default: "Cancel" },
  previewFormat: {
    type: [String, Function],
    default: () => ""
  },
  multiDates: { type: [Object, Boolean], default: !1 },
  ignoreTimeValidation: { type: Boolean, default: !1 },
  minDate: { type: [Date, String], default: null },
  maxDate: { type: [Date, String], default: null },
  minTime: { type: Object, default: null },
  maxTime: { type: Object, default: null },
  name: { type: String, default: null },
  placeholder: { type: String, default: "" },
  hideInputIcon: { type: Boolean, default: !1 },
  clearable: { type: Boolean, default: !0 },
  alwaysClearable: { type: Boolean, default: !1 },
  state: { type: Boolean, default: null },
  required: { type: Boolean, default: !1 },
  autocomplete: { type: String, default: "off" },
  timePicker: { type: Boolean, default: !1 },
  enableSeconds: { type: Boolean, default: !1 },
  is24: { type: Boolean, default: !0 },
  noHoursOverlay: { type: Boolean, default: !1 },
  noMinutesOverlay: { type: Boolean, default: !1 },
  noSecondsOverlay: { type: Boolean, default: !1 },
  hoursGridIncrement: { type: [String, Number], default: 1 },
  minutesGridIncrement: { type: [String, Number], default: 5 },
  secondsGridIncrement: { type: [String, Number], default: 5 },
  hoursIncrement: { type: [Number, String], default: 1 },
  minutesIncrement: { type: [Number, String], default: 1 },
  secondsIncrement: { type: [Number, String], default: 1 },
  range: { type: [Boolean, Object], default: !1 },
  uid: { type: String, default: null },
  disabled: { type: Boolean, default: !1 },
  readonly: { type: Boolean, default: !1 },
  inline: { type: [Boolean, Object], default: !1 },
  textInput: { type: [Boolean, Object], default: !1 },
  sixWeeks: { type: [Boolean, String], default: !1 },
  actionRow: { type: Object, default: () => ({}) },
  focusStartDate: { type: Boolean, default: !1 },
  disabledTimes: { type: [Function, Array], default: void 0 },
  timePickerInline: { type: Boolean, default: !1 },
  calendar: { type: Function, default: null },
  config: { type: Object, default: void 0 },
  quarterPicker: { type: Boolean, default: !1 },
  yearFirst: { type: Boolean, default: !1 },
  loading: { type: Boolean, default: !1 },
  onInternalModelChange: { type: [Function, Object], default: null },
  enableMinutes: { type: Boolean, default: !0 },
  ui: { type: Object, default: () => ({}) }
}, Zi = {
  ...bv,
  shadow: { type: Boolean, default: !1 },
  flowStep: { type: Number, default: 0 },
  internalModelValue: { type: [Date, Array], default: null },
  noOverlayFocus: { type: Boolean, default: !1 },
  collapse: { type: Boolean, default: !1 },
  menuWrapRef: { type: Object, default: null },
  getInputRect: { type: Function, default: () => ({}) },
  isTextInputDate: { type: Boolean, default: !1 },
  isMobile: { type: Boolean, default: void 0 }
}, s6 = ["title"], l6 = ["disabled"], c6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "ActionRow",
  props: {
    menuMount: { type: Boolean, default: !1 },
    calendarWidth: { type: Number, default: 0 },
    ...Zi
  },
  emits: ["close-picker", "select-date", "select-now", "invalid-select"],
  setup(e, { emit: t }) {
    const n = t, a = e, {
      defaultedActionRow: r,
      defaultedPreviewFormat: i,
      defaultedMultiCalendars: o,
      defaultedTextInput: l,
      defaultedInline: s,
      defaultedRange: d,
      defaultedMultiDates: u
    } = fa(a), { isTimeValid: f, isMonthValid: h } = rl(a), { buildMatrix: y } = al(), p = be(null), w = be(null), b = be(!1), v = be({}), g = be(null), k = be(null);
    an(() => {
      a.arrowNavigation && y([Ha(p), Ha(w)], "actionRow"), A(), window.addEventListener("resize", A);
    }), _i(() => {
      window.removeEventListener("resize", A);
    });
    const A = () => {
      b.value = !1, setTimeout(() => {
        var F, H;
        const K = (F = g.value) == null ? void 0 : F.getBoundingClientRect(), Z = (H = k.value) == null ? void 0 : H.getBoundingClientRect();
        K && Z && (v.value.maxWidth = `${Z.width - K.width - 20}px`), b.value = !0;
      }, 0);
    }, C = W(() => d.value.enabled && !d.value.partialRange && a.internalModelValue ? a.internalModelValue.length === 2 : !0), D = W(
      () => !f.value(a.internalModelValue) || !h.value(a.internalModelValue) || !C.value
    ), P = () => {
      const F = i.value;
      return a.timePicker || a.monthPicker, F(nr(a.internalModelValue));
    }, O = () => {
      const F = a.internalModelValue;
      return o.value.count > 0 ? `${I(F[0])} - ${I(F[1])}` : [I(F[0]), I(F[1])];
    }, I = (F) => bE(
      F,
      i.value,
      a.formatLocale,
      l.value.rangeSeparator,
      a.modelAuto,
      i.value
    ), x = W(() => !a.internalModelValue || !a.menuMount ? "" : typeof i.value == "string" ? Array.isArray(a.internalModelValue) ? a.internalModelValue.length === 2 && a.internalModelValue[1] ? O() : u.value.enabled ? a.internalModelValue.map((F) => `${I(F)}`) : a.modelAuto ? `${I(a.internalModelValue[0])}` : `${I(a.internalModelValue[0])} -` : I(a.internalModelValue) : P()), M = () => u.value.enabled ? "; " : " - ", V = W(
      () => Array.isArray(x.value) ? x.value.join(M()) : x.value
    ), B = () => {
      f.value(a.internalModelValue) && h.value(a.internalModelValue) && C.value ? n("select-date") : n("invalid-select");
    };
    return (F, H) => (te(), Oe("div", {
      ref_key: "actionRowRef",
      ref: k,
      class: "dp__action_row"
    }, [
      F.$slots["action-row"] ? bt(F.$slots, "action-row", ea(Fe({ key: 0 }, {
        internalModelValue: F.internalModelValue,
        disabled: D.value,
        selectDate: () => F.$emit("select-date"),
        closePicker: () => F.$emit("close-picker")
      }))) : (te(), Oe(Ge, { key: 1 }, [
        fe(r).showPreview ? (te(), Oe("div", {
          key: 0,
          class: "dp__selection_preview",
          title: V.value,
          style: Je(v.value)
        }, [
          F.$slots["action-preview"] && b.value ? bt(F.$slots, "action-preview", {
            key: 0,
            value: F.internalModelValue
          }) : ke("", !0),
          !F.$slots["action-preview"] && b.value ? (te(), Oe(Ge, { key: 1 }, [
            ae(j(V.value), 1)
          ], 64)) : ke("", !0)
        ], 12, s6)) : ke("", !0),
        T("div", {
          ref_key: "actionBtnContainer",
          ref: g,
          class: "dp__action_buttons",
          "data-dp-element": "action-row"
        }, [
          F.$slots["action-buttons"] ? bt(F.$slots, "action-buttons", {
            key: 0,
            value: F.internalModelValue
          }) : ke("", !0),
          F.$slots["action-buttons"] ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
            !fe(s).enabled && fe(r).showCancel ? (te(), Oe("button", {
              key: 0,
              ref_key: "cancelButtonRef",
              ref: p,
              type: "button",
              class: "dp__action_button dp__action_cancel",
              onClick: H[0] || (H[0] = (K) => F.$emit("close-picker")),
              onKeydown: H[1] || (H[1] = (K) => fe(Nr)(K, () => F.$emit("close-picker")))
            }, j(F.cancelText), 545)) : ke("", !0),
            fe(r).showNow ? (te(), Oe("button", {
              key: 1,
              type: "button",
              class: "dp__action_button dp__action_cancel",
              onClick: H[2] || (H[2] = (K) => F.$emit("select-now")),
              onKeydown: H[3] || (H[3] = (K) => fe(Nr)(K, () => F.$emit("select-now")))
            }, j(F.nowButtonLabel), 33)) : ke("", !0),
            fe(r).showSelect ? (te(), Oe("button", {
              key: 2,
              ref_key: "selectButtonRef",
              ref: w,
              type: "button",
              class: "dp__action_button dp__action_select",
              disabled: D.value,
              "data-test-id": "select-button",
              onKeydown: H[4] || (H[4] = (K) => fe(Nr)(K, () => B())),
              onClick: B
            }, j(F.selectText), 41, l6)) : ke("", !0)
          ], 64))
        ], 512)
      ], 64))
    ], 512));
  }
}), u6 = ["role", "aria-label", "tabindex"], d6 = { class: "dp__selection_grid_header" }, f6 = ["aria-selected", "aria-disabled", "data-test-id", "onClick", "onKeydown", "onMouseover"], m6 = ["aria-label"], Zf = /* @__PURE__ */ za({
  __name: "SelectionOverlay",
  props: {
    items: {},
    type: {},
    isLast: { type: Boolean },
    arrowNavigation: { type: Boolean },
    skipButtonRef: { type: Boolean },
    headerRefs: {},
    hideNavigation: {},
    escClose: { type: Boolean },
    useRelative: { type: Boolean },
    height: {},
    textInput: { type: [Boolean, Object] },
    config: {},
    noOverlayFocus: { type: Boolean },
    focusValue: {},
    menuWrapRef: {},
    ariaLabels: {},
    overlayLabel: {}
  },
  emits: ["selected", "toggle", "reset-flow", "hover-value"],
  setup(e, { expose: t, emit: n }) {
    const { setSelectionGrid: a, buildMultiLevelMatrix: r, setMonthPicker: i } = al(), o = n, l = e, { defaultedAriaLabels: s, defaultedTextInput: d, defaultedConfig: u, handleEventPropagation: f } = fa(
      l
    ), { hideNavigationButtons: h } = Sv(), y = be(!1), p = be(null), w = be(null), b = be([]), v = be(), g = be(null), k = be(0), A = be(null);
    kw(() => {
      p.value = null;
    }), an(() => {
      Dt().then(() => V()), l.noOverlayFocus || D(), C(!0);
    }), _i(() => C(!1));
    const C = (ee) => {
      var he;
      l.arrowNavigation && ((he = l.headerRefs) != null && he.length ? i(ee) : a(ee));
    }, D = () => {
      var ee;
      const he = Ha(w);
      he && (d.value.enabled || (p.value ? (ee = p.value) == null || ee.focus({ preventScroll: !0 }) : he.focus({ preventScroll: !0 })), y.value = he.clientHeight < he.scrollHeight);
    }, P = W(
      () => ({
        dp__overlay: !0,
        "dp--overlay-absolute": !l.useRelative,
        "dp--overlay-relative": l.useRelative
      })
    ), O = W(
      () => l.useRelative ? { height: `${l.height}px`, width: "var(--dp-menu-min-width)" } : void 0
    ), I = W(() => ({
      dp__overlay_col: !0
    })), x = W(
      () => ({
        dp__btn: !0,
        dp__button: !0,
        dp__overlay_action: !0,
        dp__over_action_scroll: y.value,
        dp__button_bottom: l.isLast
      })
    ), M = W(() => {
      var ee, he;
      return {
        dp__overlay_container: !0,
        dp__container_flex: ((ee = l.items) == null ? void 0 : ee.length) <= 6,
        dp__container_block: ((he = l.items) == null ? void 0 : he.length) > 6
      };
    });
    tt(
      () => l.items,
      () => V(!1),
      { deep: !0 }
    );
    const V = (ee = !0) => {
      Dt().then(() => {
        const he = Ha(p), ve = Ha(w), pe = Ha(g), z = Ha(A), ge = pe ? pe.getBoundingClientRect().height : 0;
        ve && (ve.getBoundingClientRect().height ? k.value = ve.getBoundingClientRect().height - ge : k.value = u.value.modeHeight - ge), he && z && ee && (z.scrollTop = he.offsetTop - z.offsetTop - (k.value / 2 - he.getBoundingClientRect().height) - ge);
      });
    }, B = (ee) => {
      ee.disabled || o("selected", ee.value);
    }, F = () => {
      o("toggle"), o("reset-flow");
    }, H = (ee) => {
      l.escClose && (F(), f(ee));
    }, K = (ee, he, ve, pe) => {
      ee && ((he.active || he.value === l.focusValue) && (p.value = ee), l.arrowNavigation && (Array.isArray(b.value[ve]) ? b.value[ve][pe] = ee : b.value[ve] = [ee], Z()));
    }, Z = () => {
      var ee, he;
      const ve = (ee = l.headerRefs) != null && ee.length ? [l.headerRefs].concat(b.value) : b.value.concat([l.skipButtonRef ? [] : [g.value]]);
      r(nr(ve), (he = l.headerRefs) != null && he.length ? "monthPicker" : "selectionGrid");
    }, ue = (ee) => {
      l.arrowNavigation || Us(ee, u.value, !0);
    }, Y = (ee) => {
      v.value = ee, o("hover-value", ee);
    }, U = () => {
      if (F(), !l.isLast) {
        const ee = Cb(l.menuWrapRef ?? null, "action-row");
        if (ee) {
          const he = dE(ee);
          he?.focus();
        }
      }
    }, q = (ee) => {
      switch (ee.key) {
        case Jn.esc:
          return H(ee);
        case Jn.arrowLeft:
          return ue(ee);
        case Jn.arrowRight:
          return ue(ee);
        case Jn.arrowUp:
          return ue(ee);
        case Jn.arrowDown:
          return ue(ee);
        default:
          return;
      }
    }, oe = (ee) => {
      if (ee.key === Jn.enter) return F();
      if (ee.key === Jn.tab) return U();
    };
    return t({ focusGrid: D }), (ee, he) => {
      var ve;
      return te(), Oe("div", {
        ref_key: "gridWrapRef",
        ref: w,
        class: Ae(P.value),
        style: Je(O.value),
        role: ee.useRelative ? void 0 : "dialog",
        "aria-label": ee.overlayLabel,
        tabindex: ee.useRelative ? void 0 : "0",
        onKeydown: q,
        onClick: he[0] || (he[0] = ua(() => {
        }, ["prevent"]))
      }, [
        T("div", {
          ref_key: "containerRef",
          ref: A,
          class: Ae(M.value),
          style: Je({ "--dp-overlay-height": `${k.value}px` }),
          role: "grid"
        }, [
          T("div", d6, [
            bt(ee.$slots, "header")
          ]),
          ee.$slots.overlay ? bt(ee.$slots, "overlay", { key: 0 }) : (te(!0), Oe(Ge, { key: 1 }, ln(ee.items, (pe, z) => (te(), Oe("div", {
            key: z,
            class: Ae(["dp__overlay_row", { dp__flex_row: ee.items.length >= 3 }]),
            role: "row"
          }, [
            (te(!0), Oe(Ge, null, ln(pe, (ge, Ve) => (te(), Oe("div", {
              key: ge.value,
              ref_for: !0,
              ref: (Ne) => K(Ne, ge, z, Ve),
              role: "gridcell",
              class: Ae(I.value),
              "aria-selected": ge.active || void 0,
              "aria-disabled": ge.disabled || void 0,
              tabindex: "0",
              "data-test-id": ge.text,
              onClick: ua((Ne) => B(ge), ["prevent"]),
              onKeydown: (Ne) => fe(Nr)(Ne, () => B(ge), !0),
              onMouseover: (Ne) => Y(ge.value)
            }, [
              T("div", {
                class: Ae(ge.className)
              }, [
                ee.$slots.item ? bt(ee.$slots, "item", {
                  key: 0,
                  item: ge
                }) : ke("", !0),
                ee.$slots.item ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
                  ae(j(ge.text), 1)
                ], 64))
              ], 2)
            ], 42, f6))), 128))
          ], 2))), 128))
        ], 6),
        ee.$slots["button-icon"] ? sn((te(), Oe("button", {
          key: 0,
          ref_key: "toggleButton",
          ref: g,
          type: "button",
          "aria-label": (ve = fe(s)) == null ? void 0 : ve.toggleOverlay,
          class: Ae(x.value),
          tabindex: "0",
          onClick: F,
          onKeydown: oe
        }, [
          bt(ee.$slots, "button-icon")
        ], 42, m6)), [
          [_a, !fe(h)(ee.hideNavigation, ee.type)]
        ]) : ke("", !0)
      ], 46, u6);
    };
  }
}), h6 = ["data-dp-mobile"], wv = /* @__PURE__ */ za({
  __name: "InstanceWrap",
  props: {
    multiCalendars: {},
    stretch: { type: Boolean },
    collapse: { type: Boolean },
    isMobile: { type: Boolean }
  },
  setup(e) {
    const t = e, n = W(
      () => t.multiCalendars > 0 ? [...Array(t.multiCalendars).keys()] : [0]
    ), a = W(() => ({
      dp__instance_calendar: t.multiCalendars > 0
    }));
    return (r, i) => (te(), Oe("div", {
      class: Ae({
        dp__menu_inner: !r.stretch,
        "dp--menu--inner-stretched": r.stretch,
        dp__flex_display: r.multiCalendars > 0,
        "dp--flex-display-collapsed": r.collapse
      }),
      "data-dp-mobile": r.isMobile
    }, [
      (te(!0), Oe(Ge, null, ln(n.value, (o, l) => (te(), Oe("div", {
        key: o,
        class: Ae(a.value)
      }, [
        bt(r.$slots, "default", {
          instance: o,
          index: l
        })
      ], 2))), 128))
    ], 10, h6));
  }
}), _6 = ["data-dp-element", "aria-label", "aria-disabled"], df = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "ArrowBtn",
  props: {
    ariaLabel: {},
    elName: {},
    disabled: { type: Boolean }
  },
  emits: ["activate", "set-ref"],
  setup(e, { emit: t }) {
    const n = t, a = be(null);
    return an(() => n("set-ref", a)), (r, i) => (te(), Oe("button", {
      ref_key: "elRef",
      ref: a,
      type: "button",
      "data-dp-element": r.elName,
      class: "dp__btn dp--arrow-btn-nav",
      tabindex: "0",
      "aria-label": r.ariaLabel,
      "aria-disabled": r.disabled || void 0,
      onClick: i[0] || (i[0] = (o) => r.$emit("activate")),
      onKeydown: i[1] || (i[1] = (o) => fe(Nr)(o, () => r.$emit("activate"), !0))
    }, [
      T("span", {
        class: Ae(["dp__inner_nav", { dp__inner_nav_disabled: r.disabled }])
      }, [
        bt(r.$slots, "default")
      ], 2)
    ], 40, _6));
  }
}), v6 = ["aria-label", "data-test-id"], SE = /* @__PURE__ */ za({
  __name: "YearModePicker",
  props: {
    ...Zi,
    showYearPicker: { type: Boolean, default: !1 },
    items: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    isDisabled: { type: Function, default: () => !1 }
  },
  emits: ["toggle-year-picker", "year-select", "handle-year"],
  setup(e, { emit: t }) {
    const n = t, a = e, { showRightIcon: r, showLeftIcon: i } = Sv(), { defaultedConfig: o, defaultedMultiCalendars: l, defaultedAriaLabels: s, defaultedTransitions: d, defaultedUI: u } = fa(a), { showTransition: f, transitionName: h } = em(d), y = be(!1), p = (v = !1, g) => {
      y.value = !y.value, n("toggle-year-picker", { flow: v, show: g });
    }, w = (v) => {
      y.value = !1, n("year-select", v);
    }, b = (v = !1) => {
      n("handle-year", v);
    };
    return (v, g) => {
      var k, A, C, D, P;
      return te(), Oe(Ge, null, [
        T("div", {
          class: Ae(["dp--year-mode-picker", { "dp--hidden-el": y.value }])
        }, [
          fe(i)(fe(l), e.instance) ? (te(), Le(df, {
            key: 0,
            ref: "mpPrevIconRef",
            "aria-label": (k = fe(s)) == null ? void 0 : k.prevYear,
            disabled: e.isDisabled(!1),
            class: Ae((A = fe(u)) == null ? void 0 : A.navBtnPrev),
            onActivate: g[0] || (g[0] = (O) => b(!1))
          }, {
            default: E(() => [
              v.$slots["arrow-left"] ? bt(v.$slots, "arrow-left", { key: 0 }) : ke("", !0),
              v.$slots["arrow-left"] ? ke("", !0) : (te(), Le(fe(g0), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled", "class"])) : ke("", !0),
          T("button", {
            ref: "mpYearButtonRef",
            class: "dp__btn dp--year-select",
            type: "button",
            "aria-label": `${e.year}-${(C = fe(s)) == null ? void 0 : C.openYearsOverlay}`,
            "data-test-id": `year-mode-btn-${e.instance}`,
            onClick: g[1] || (g[1] = () => p(!1)),
            onKeydown: g[2] || (g[2] = Ll(() => p(!1), ["enter"]))
          }, [
            v.$slots.year ? bt(v.$slots, "year", {
              key: 0,
              year: e.year
            }) : ke("", !0),
            v.$slots.year ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
              ae(j(e.year), 1)
            ], 64))
          ], 40, v6),
          fe(r)(fe(l), e.instance) ? (te(), Le(df, {
            key: 1,
            ref: "mpNextIconRef",
            "aria-label": (D = fe(s)) == null ? void 0 : D.nextYear,
            disabled: e.isDisabled(!0),
            class: Ae((P = fe(u)) == null ? void 0 : P.navBtnNext),
            onActivate: g[3] || (g[3] = (O) => b(!0))
          }, {
            default: E(() => [
              v.$slots["arrow-right"] ? bt(v.$slots, "arrow-right", { key: 0 }) : ke("", !0),
              v.$slots["arrow-right"] ? ke("", !0) : (te(), Le(fe(y0), { key: 1 }))
            ]),
            _: 3
          }, 8, ["aria-label", "disabled", "class"])) : ke("", !0)
        ], 2),
        _($r, {
          name: fe(h)(e.showYearPicker),
          css: fe(f)
        }, {
          default: E(() => {
            var O, I;
            return [
              e.showYearPicker ? (te(), Le(Zf, {
                key: 0,
                items: e.items,
                "text-input": v.textInput,
                "esc-close": v.escClose,
                config: v.config,
                "is-last": v.autoApply && !fe(o).keepActionRow,
                "hide-navigation": v.hideNavigation,
                "aria-labels": v.ariaLabels,
                "overlay-label": (I = (O = fe(s)) == null ? void 0 : O.yearPicker) == null ? void 0 : I.call(O, !0),
                type: "year",
                onToggle: p,
                onSelected: g[4] || (g[4] = (x) => w(x))
              }, mr({
                "button-icon": E(() => [
                  v.$slots["calendar-icon"] ? bt(v.$slots, "calendar-icon", { key: 0 }) : ke("", !0),
                  v.$slots["calendar-icon"] ? ke("", !0) : (te(), Le(fe(Xu), { key: 1 }))
                ]),
                _: 2
              }, [
                v.$slots["year-overlay-value"] ? {
                  name: "item",
                  fn: E(({ item: x }) => [
                    bt(v.$slots, "year-overlay-value", {
                      text: x.text,
                      value: x.value
                    })
                  ]),
                  key: "0"
                } : void 0
              ]), 1032, ["items", "text-input", "esc-close", "config", "is-last", "hide-navigation", "aria-labels", "overlay-label"])) : ke("", !0)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ], 64);
    };
  }
}), I0 = (e, t, n) => {
  if (t.value && Array.isArray(t.value))
    if (t.value.some((a) => mn(e, a))) {
      const a = t.value.filter((r) => !mn(r, e));
      t.value = a.length ? a : null;
    } else (n && +n > t.value.length || !n) && t.value.push(e);
  else
    t.value = [e];
}, E0 = (e, t, n) => {
  let a = e.value ? e.value.slice() : [];
  return a.length === 2 && a[1] !== null && (a = []), a.length ? (Sa(t, a[0]) ? a.unshift(t) : a[1] = t, n("range-end", t)) : (a = [t], n("range-start", t)), a;
}, kv = (e, t, n, a) => {
  e && (e[0] && e[1] && n && t("auto-apply"), e[0] && !e[1] && a && n && t("auto-apply"));
}, CE = (e) => {
  Array.isArray(e.value) && e.value.length <= 2 && e.range ? e.modelValue.value = e.value.map((t) => Qr(ut(t), e.timezone)) : Array.isArray(e.value) || (e.modelValue.value = Qr(ut(e.value), e.timezone));
}, AE = (e, t, n, a) => Array.isArray(t.value) && (t.value.length === 2 || t.value.length === 1 && a.value.partialRange) ? a.value.fixedStart && (Va(e, t.value[0]) || mn(e, t.value[0])) ? [t.value[0], e] : a.value.fixedEnd && (Sa(e, t.value[1]) || mn(e, t.value[1])) ? [e, t.value[1]] : (n("invalid-fixed-range", e), t.value) : [], xE = ({
  multiCalendars: e,
  range: t,
  highlight: n,
  propDates: a,
  calendars: r,
  modelValue: i,
  props: o,
  filters: l,
  year: s,
  month: d,
  emit: u
}) => {
  const f = W(() => C0(o.yearRange, o.locale, o.reverseYears)), h = be([!1]), y = W(() => (x, M) => {
    const V = Mn(qi(/* @__PURE__ */ new Date()), {
      month: d.value(x),
      year: s.value(x)
    }), B = M ? jI(V) : Ef(V);
    return yE(
      B,
      a.value.maxDate,
      a.value.minDate,
      o.preventMinMaxNavigation,
      M
    );
  }), p = () => Array.isArray(i.value) && e.value.solo && i.value[1], w = () => {
    for (let x = 0; x < e.value.count; x++)
      if (x === 0)
        r.value[x] = r.value[0];
      else if (x === e.value.count - 1 && p())
        r.value[x] = {
          month: fn(i.value[1]),
          year: jt(i.value[1])
        };
      else {
        const M = Mn(ut(), r.value[x - 1]);
        r.value[x] = { month: fn(M), year: jt(f0(M, 1)) };
      }
  }, b = (x) => {
    if (!x) return w();
    const M = Mn(ut(), r.value[x]);
    return r.value[0].year = jt(sE(M, e.value.count - 1)), w();
  }, v = (x, M) => {
    const V = A5(M, x);
    return t.value.showLastInRange && V > 1 ? M : x;
  }, g = (x) => o.focusStartDate || e.value.solo ? x[0] : x[1] ? v(x[0], x[1]) : x[0], k = () => {
    if (i.value) {
      const x = Array.isArray(i.value) ? g(i.value) : i.value;
      r.value[0] = { month: fn(x), year: jt(x) };
    }
  }, A = () => {
    k(), e.value.count && w();
  };
  tt(i, (x, M) => {
    o.isTextInputDate && JSON.stringify(x ?? {}) !== JSON.stringify(M ?? {}) && A();
  }), an(() => {
    A();
  });
  const C = (x, M) => {
    r.value[M].year = x, u("update-month-year", { instance: M, year: x, month: r.value[M].month }), e.value.count && !e.value.solo && b(M);
  }, D = W(() => (x) => Mu(f.value, (M) => {
    var V;
    const B = s.value(x) === M.value, F = Pf(
      M.value,
      Lu(a.value.minDate),
      Lu(a.value.maxDate)
    ) || ((V = l.value.years) == null ? void 0 : V.includes(s.value(x))), H = T0(n.value, M.value);
    return { active: B, disabled: F, highlighted: H };
  })), P = (x, M) => {
    C(x, M), I(M);
  }, O = (x, M = !1) => {
    if (!y.value(x, M)) {
      const V = M ? s.value(x) + 1 : s.value(x) - 1;
      C(V, x);
    }
  }, I = (x, M = !1, V) => {
    M || u("reset-flow"), V !== void 0 ? h.value[x] = V : h.value[x] = !h.value[x], h.value[x] ? u("overlay-toggle", { open: !0, overlay: br.year }) : (u("overlay-closed"), u("overlay-toggle", { open: !1, overlay: br.year }));
  };
  return {
    isDisabled: y,
    groupedYears: D,
    showYearPicker: h,
    selectYear: C,
    toggleYearPicker: I,
    handleYearSelect: P,
    handleYear: O
  };
}, p6 = (e, t) => {
  const {
    defaultedMultiCalendars: n,
    defaultedAriaLabels: a,
    defaultedTransitions: r,
    defaultedConfig: i,
    defaultedRange: o,
    defaultedHighlight: l,
    propDates: s,
    defaultedTz: d,
    defaultedFilters: u,
    defaultedMultiDates: f
  } = fa(e), h = () => {
    e.isTextInputDate && A(jt(ut(e.startDate)), 0);
  }, { modelValue: y, year: p, month: w, calendars: b } = tm(e, t, h), v = W(() => cE(e.formatLocale, e.locale, e.monthNameFormat)), g = be(null), { checkMinMaxRange: k } = rl(e), {
    selectYear: A,
    groupedYears: C,
    showYearPicker: D,
    toggleYearPicker: P,
    handleYearSelect: O,
    handleYear: I,
    isDisabled: x
  } = xE({
    modelValue: y,
    multiCalendars: n,
    range: o,
    highlight: l,
    calendars: b,
    year: p,
    propDates: s,
    month: w,
    filters: u,
    props: e,
    emit: t
  });
  an(() => {
    e.startDate && (y.value && e.focusStartDate || !y.value) && A(jt(ut(e.startDate)), 0);
  });
  const M = (he) => he ? { month: fn(he), year: jt(he) } : { month: null, year: null }, V = () => y.value ? Array.isArray(y.value) ? y.value.map((he) => M(he)) : M(y.value) : M(), B = (he, ve) => {
    const pe = b.value[he], z = V();
    return Array.isArray(z) ? z.some((ge) => ge.year === pe?.year && ge.month === ve) : pe?.year === z.year && ve === z.month;
  }, F = (he, ve, pe) => {
    var z, ge;
    const Ve = V();
    return Array.isArray(Ve) ? p.value(ve) === ((z = Ve[pe]) == null ? void 0 : z.year) && he === ((ge = Ve[pe]) == null ? void 0 : ge.month) : !1;
  }, H = (he, ve) => {
    if (o.value.enabled) {
      const pe = V();
      if (Array.isArray(y.value) && Array.isArray(pe)) {
        const z = F(he, ve, 0) || F(he, ve, 1), ge = Xo(qi(ut()), he, p.value(ve));
        return Of(y.value, g.value, ge) && !z;
      }
      return !1;
    }
    return !1;
  }, K = W(() => (he) => Mu(v.value, (ve) => {
    var pe;
    const z = B(he, ve.value), ge = Pf(
      ve.value,
      _E(p.value(he), s.value.minDate),
      vE(p.value(he), s.value.maxDate)
    ) || Uq(s.value.disabledDates, p.value(he), ve.value) || ((pe = u.value.months) == null ? void 0 : pe.includes(ve.value)) || !$q(s.value.allowedDates, p.value(he), ve.value), Ve = H(ve.value, he), Ne = wE(l.value, ve.value, p.value(he));
    return { active: z, disabled: ge, isBetween: Ve, highlighted: Ne };
  })), Z = (he, ve) => Xo(qi(ut()), he, p.value(ve)), ue = (he, ve) => {
    const pe = y.value ? y.value : qi(/* @__PURE__ */ new Date());
    y.value = Xo(pe, he, p.value(ve)), t("auto-apply"), t("update-flow-step");
  }, Y = (he, ve) => {
    const pe = Z(he, ve);
    o.value.fixedEnd || o.value.fixedStart ? y.value = AE(pe, y, t, o) : y.value ? k(pe, y.value) && (y.value = E0(y, Z(he, ve), t)) : y.value = [Z(he, ve)], Dt().then(() => {
      kv(y.value, t, e.autoApply, e.modelAuto);
    });
  }, U = (he, ve) => {
    I0(Z(he, ve), y, f.value.limit), t("auto-apply", !0);
  }, q = (he, ve) => (b.value[ve].month = he, ee(ve, b.value[ve].year, he), f.value.enabled ? U(he, ve) : o.value.enabled ? Y(he, ve) : ue(he, ve)), oe = (he, ve) => {
    A(he, ve), ee(ve, he, null);
  }, ee = (he, ve, pe) => {
    let z = pe;
    if (!z && z !== 0) {
      const ge = V();
      z = Array.isArray(ge) ? ge[he].month : ge.month;
    }
    t("update-month-year", { instance: he, year: ve, month: z });
  };
  return {
    groupedMonths: K,
    groupedYears: C,
    year: p,
    isDisabled: x,
    defaultedMultiCalendars: n,
    defaultedAriaLabels: a,
    defaultedTransitions: r,
    defaultedConfig: i,
    showYearPicker: D,
    modelValue: y,
    presetDate: (he, ve) => {
      CE({
        value: he,
        modelValue: y,
        range: o.value.enabled,
        timezone: ve ? void 0 : d.value.timezone
      }), t("auto-apply");
    },
    setHoverDate: (he, ve) => {
      g.value = Z(he, ve);
    },
    selectMonth: q,
    selectYear: oe,
    toggleYearPicker: P,
    handleYearSelect: O,
    handleYear: I,
    getModelMonthYear: V
  };
}, g6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "MonthPicker",
  props: {
    ...Zi
  },
  emits: [
    "update:internal-model-value",
    "overlay-closed",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year",
    "update-flow-step",
    "mount",
    "invalid-fixed-range",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = uc(), i = di(r, "yearMode"), o = e;
    an(() => {
      o.shadow || a("mount", null);
    });
    const {
      groupedMonths: l,
      groupedYears: s,
      year: d,
      isDisabled: u,
      defaultedMultiCalendars: f,
      defaultedConfig: h,
      showYearPicker: y,
      modelValue: p,
      presetDate: w,
      setHoverDate: b,
      selectMonth: v,
      selectYear: g,
      toggleYearPicker: k,
      handleYearSelect: A,
      handleYear: C,
      getModelMonthYear: D
    } = p6(o, a);
    return t({ getSidebarProps: () => ({
      modelValue: p,
      year: d,
      getModelMonthYear: D,
      selectMonth: v,
      selectYear: g,
      handleYear: C
    }), presetDate: w, toggleYearPicker: (P) => k(0, P) }), (P, O) => (te(), Le(wv, {
      "multi-calendars": fe(f).count,
      collapse: P.collapse,
      stretch: "",
      "is-mobile": P.isMobile
    }, {
      default: E(({ instance: I }) => [
        P.$slots["top-extra"] ? bt(P.$slots, "top-extra", {
          key: 0,
          value: P.internalModelValue
        }) : ke("", !0),
        P.$slots["month-year"] ? bt(P.$slots, "month-year", ea(Fe({ key: 1 }, {
          year: fe(d),
          months: fe(l)(I),
          years: fe(s)(I),
          selectMonth: fe(v),
          selectYear: fe(g),
          instance: I
        }))) : (te(), Le(Zf, {
          key: 2,
          items: fe(l)(I),
          "arrow-navigation": P.arrowNavigation,
          "is-last": P.autoApply && !fe(h).keepActionRow,
          "esc-close": P.escClose,
          height: fe(h).modeHeight,
          config: P.config,
          "no-overlay-focus": !!(P.noOverlayFocus || P.textInput),
          "use-relative": "",
          type: "month",
          onSelected: (x) => fe(v)(x, I),
          onHoverValue: (x) => fe(b)(x, I)
        }, mr({
          header: E(() => [
            _(SE, Fe(P.$props, {
              items: fe(s)(I),
              instance: I,
              "show-year-picker": fe(y)[I],
              year: fe(d)(I),
              "is-disabled": (x) => fe(u)(I, x),
              onHandleYear: (x) => fe(C)(I, x),
              onYearSelect: (x) => fe(A)(x, I),
              onToggleYearPicker: (x) => fe(k)(I, x?.flow, x?.show)
            }), mr({ _: 2 }, [
              ln(fe(i), (x, M) => ({
                name: x,
                fn: E((V) => [
                  bt(P.$slots, x, ea(Aa(V)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          _: 2
        }, [
          P.$slots["month-overlay-value"] ? {
            name: "item",
            fn: E(({ item: x }) => [
              bt(P.$slots, "month-overlay-value", {
                text: x.text,
                value: x.value
              })
            ]),
            key: "0"
          } : void 0
        ]), 1032, ["items", "arrow-navigation", "is-last", "esc-close", "height", "config", "no-overlay-focus", "onSelected", "onHoverValue"]))
      ]),
      _: 3
    }, 8, ["multi-calendars", "collapse", "is-mobile"]));
  }
}), y6 = (e, t) => {
  const n = () => {
    e.isTextInputDate && (u.value = jt(ut(e.startDate)));
  }, { modelValue: a } = tm(e, t, n), r = be(null), { defaultedHighlight: i, defaultedMultiDates: o, defaultedFilters: l, defaultedRange: s, propDates: d } = fa(e), u = be();
  an(() => {
    e.startDate && (a.value && e.focusStartDate || !a.value) && (u.value = jt(ut(e.startDate)));
  });
  const f = (v) => Array.isArray(a.value) ? a.value.some((g) => jt(g) === v) : a.value ? jt(a.value) === v : !1, h = (v) => s.value.enabled && Array.isArray(a.value) ? Of(a.value, r.value, b(v)) : !1, y = (v) => d.value.allowedDates instanceof Map ? d.value.allowedDates.size ? d.value.allowedDates.has(`${v}`) : !1 : !0, p = (v) => d.value.disabledDates instanceof Map ? d.value.disabledDates.size ? d.value.disabledDates.has(`${v}`) : !1 : !0, w = W(() => Mu(C0(e.yearRange, e.locale, e.reverseYears), (v) => {
    const g = f(v.value), k = Pf(
      v.value,
      Lu(d.value.minDate),
      Lu(d.value.maxDate)
    ) || l.value.years.includes(v.value) || !y(v.value) || p(v.value), A = h(v.value) && !g, C = T0(i.value, v.value);
    return { active: g, disabled: k, isBetween: A, highlighted: C };
  })), b = (v) => yo(qi(Ef(/* @__PURE__ */ new Date())), v);
  return {
    groupedYears: w,
    modelValue: a,
    focusYear: u,
    setHoverValue: (v) => {
      r.value = yo(qi(/* @__PURE__ */ new Date()), v);
    },
    selectYear: (v) => {
      var g;
      if (t("update-month-year", { instance: 0, year: v }), o.value.enabled)
        return a.value ? Array.isArray(a.value) && (((g = a.value) == null ? void 0 : g.map((k) => jt(k))).includes(v) ? a.value = a.value.filter((k) => jt(k) !== v) : a.value.push(yo(or(ut()), v))) : a.value = [yo(or(Ef(ut())), v)], t("auto-apply", !0);
      s.value.enabled ? (a.value = E0(a, b(v), t), Dt().then(() => {
        kv(a.value, t, e.autoApply, e.modelAuto);
      })) : (a.value = b(v), t("auto-apply"));
    }
  };
}, b6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "YearPicker",
  props: {
    ...Zi
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "range-start",
    "range-end",
    "auto-apply",
    "update-month-year"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { groupedYears: i, modelValue: o, focusYear: l, selectYear: s, setHoverValue: d } = y6(r, a), { defaultedConfig: u } = fa(r);
    return t({ getSidebarProps: () => ({
      modelValue: o,
      selectYear: s
    }) }), (f, h) => (te(), Oe("div", null, [
      f.$slots["top-extra"] ? bt(f.$slots, "top-extra", {
        key: 0,
        value: f.internalModelValue
      }) : ke("", !0),
      f.$slots["month-year"] ? bt(f.$slots, "month-year", ea(Fe({ key: 1 }, {
        years: fe(i),
        selectYear: fe(s)
      }))) : (te(), Le(Zf, {
        key: 2,
        items: fe(i),
        "is-last": f.autoApply && !fe(u).keepActionRow,
        height: fe(u).modeHeight,
        config: f.config,
        "no-overlay-focus": !!(f.noOverlayFocus || f.textInput),
        "focus-value": fe(l),
        type: "year",
        "use-relative": "",
        onSelected: fe(s),
        onHoverValue: fe(d)
      }, mr({ _: 2 }, [
        f.$slots["year-overlay-value"] ? {
          name: "item",
          fn: E(({ item: y }) => [
            bt(f.$slots, "year-overlay-value", {
              text: y.text,
              value: y.value
            })
          ]),
          key: "0"
        } : void 0
      ]), 1032, ["items", "is-last", "height", "config", "no-overlay-focus", "focus-value", "onSelected", "onHoverValue"]))
    ]));
  }
}), w6 = {
  key: 0,
  class: "dp__time_input"
}, k6 = ["data-compact", "data-collapsed"], S6 = ["data-test-id", "aria-label", "onKeydown", "onClick", "onMousedown"], C6 = ["aria-label", "disabled", "data-test-id", "onKeydown", "onClick"], A6 = ["data-test-id", "aria-label", "onKeydown", "onClick", "onMousedown"], x6 = { key: 0 }, T6 = ["aria-label", "data-compact"], I6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "TimeInput",
  props: {
    hours: { type: Number, default: 0 },
    minutes: { type: Number, default: 0 },
    seconds: { type: Number, default: 0 },
    closeTimePickerBtn: { type: Object, default: null },
    order: { type: Number, default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: { type: Function, default: () => !1 },
    ...Zi
  },
  emits: [
    "set-hours",
    "set-minutes",
    "update:hours",
    "update:minutes",
    "update:seconds",
    "reset-flow",
    "mounted",
    "overlay-closed",
    "overlay-opened",
    "am-pm-change"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { setTimePickerElements: i, setTimePickerBackRef: o } = al(), {
      defaultedAriaLabels: l,
      defaultedTransitions: s,
      defaultedFilters: d,
      defaultedConfig: u,
      defaultedRange: f,
      defaultedMultiCalendars: h
    } = fa(r), { transitionName: y, showTransition: p } = em(s), w = Zn({
      hours: !1,
      minutes: !1,
      seconds: !1
    }), b = be("AM"), v = be(null), g = be([]), k = be(), A = be(!1);
    an(() => {
      a("mounted");
    });
    const C = (G) => Mn(/* @__PURE__ */ new Date(), {
      hours: G.hours,
      minutes: G.minutes,
      seconds: r.enableSeconds ? G.seconds : 0,
      milliseconds: 0
    }), D = W(
      () => (G) => Y(G, r[G]) || O(G, r[G])
    ), P = W(() => ({ hours: r.hours, minutes: r.minutes, seconds: r.seconds })), O = (G, Ce) => f.value.enabled && !f.value.disableTimeRangeValidation ? !r.validateTime(G, Ce) : !1, I = (G, Ce) => {
      if (f.value.enabled && !f.value.disableTimeRangeValidation) {
        const Ie = Ce ? +r[`${G}Increment`] : -+r[`${G}Increment`], ie = r[G] + Ie;
        return !r.validateTime(G, ie);
      }
      return !1;
    }, x = W(() => (G) => !he(+r[G] + +r[`${G}Increment`], G) || I(G, !0)), M = W(() => (G) => !he(+r[G] - +r[`${G}Increment`], G) || I(G, !1)), V = (G, Ce) => $I(Mn(ut(), G), Ce), B = (G, Ce) => bq(Mn(ut(), G), Ce), F = W(
      () => ({
        dp__time_col: !0,
        dp__time_col_block: !r.timePickerInline,
        dp__time_col_reg_block: !r.enableSeconds && r.is24 && !r.timePickerInline,
        dp__time_col_reg_inline: !r.enableSeconds && r.is24 && r.timePickerInline,
        dp__time_col_reg_with_button: !r.enableSeconds && !r.is24,
        dp__time_col_sec: r.enableSeconds && r.is24,
        dp__time_col_sec_with_button: r.enableSeconds && !r.is24
      })
    ), H = W(
      () => r.timePickerInline && f.value.enabled && !h.value.count
    ), K = W(() => {
      const G = [{ type: "hours" }];
      return r.enableMinutes && G.push({ type: "", separator: !0 }, {
        type: "minutes"
      }), r.enableSeconds && G.push({ type: "", separator: !0 }, {
        type: "seconds"
      }), G;
    }), Z = W(() => K.value.filter((G) => !G.separator)), ue = W(() => (G) => {
      if (G === "hours") {
        const Ce = Ne(+r.hours);
        return { text: Ce < 10 ? `0${Ce}` : `${Ce}`, value: Ce };
      }
      return { text: r[G] < 10 ? `0${r[G]}` : `${r[G]}`, value: r[G] };
    }), Y = (G, Ce) => {
      var Ie;
      if (!r.disabledTimesConfig) return !1;
      const ie = r.disabledTimesConfig(r.order, G === "hours" ? Ce : void 0);
      return ie[G] ? !!((Ie = ie[G]) != null && Ie.includes(Ce)) : !0;
    }, U = (G, Ce) => Ce !== "hours" || b.value === "AM" ? G : G + 12, q = (G) => {
      const Ce = r.is24 ? 24 : 12, Ie = G === "hours" ? Ce : 60, ie = +r[`${G}GridIncrement`], we = G === "hours" && !r.is24 ? ie : 0, Ee = [];
      for (let Pe = we; Pe < Ie; Pe += ie)
        Ee.push({ value: r.is24 ? Pe : U(Pe, G), text: Pe < 10 ? `0${Pe}` : `${Pe}` });
      return G === "hours" && !r.is24 && Ee.unshift({ value: b.value === "PM" ? 12 : 0, text: "12" }), Mu(Ee, (Pe) => ({ active: !1, disabled: d.value.times[G].includes(Pe.value) || !he(Pe.value, G) || Y(G, Pe.value) || O(G, Pe.value) }));
    }, oe = (G) => G >= 0 ? G : 59, ee = (G) => G >= 0 ? G : 23, he = (G, Ce) => {
      const Ie = r.minTime ? C(ry(r.minTime)) : null, ie = r.maxTime ? C(ry(r.maxTime)) : null, we = C(
        ry(
          P.value,
          Ce,
          Ce === "minutes" || Ce === "seconds" ? oe(G) : ee(G)
        )
      );
      return Ie && ie ? (Bu(we, ie) || su(we, ie)) && (ac(we, Ie) || su(we, Ie)) : Ie ? ac(we, Ie) || su(we, Ie) : ie ? Bu(we, ie) || su(we, ie) : !0;
    }, ve = (G) => r[`no${G[0].toUpperCase() + G.slice(1)}Overlay`], pe = (G) => {
      ve(G) || (w[G] = !w[G], w[G] ? (A.value = !0, a("overlay-opened", G)) : (A.value = !1, a("overlay-closed", G)));
    }, z = (G) => G === "hours" ? rs : G === "minutes" ? Gs : Du, ge = () => {
      k.value && clearTimeout(k.value);
    }, Ve = (G, Ce = !0, Ie) => {
      const ie = Ce ? V : B, we = Ce ? +r[`${G}Increment`] : -+r[`${G}Increment`];
      he(+r[G] + we, G) && a(
        `update:${G}`,
        z(G)(ie({ [G]: +r[G] }, { [G]: +r[`${G}Increment`] }))
      ), !(Ie != null && Ie.keyboard) && u.value.timeArrowHoldThreshold && (k.value = setTimeout(() => {
        Ve(G, Ce);
      }, u.value.timeArrowHoldThreshold));
    }, Ne = (G) => r.is24 ? G : (G >= 12 ? b.value = "PM" : b.value = "AM", Tq(G)), ce = () => {
      b.value === "PM" ? (b.value = "AM", a("update:hours", r.hours - 12)) : (b.value = "PM", a("update:hours", r.hours + 12)), a("am-pm-change", b.value);
    }, ne = (G) => {
      w[G] = !0;
    }, Q = (G, Ce, Ie) => {
      if (G && r.arrowNavigation) {
        Array.isArray(g.value[Ce]) ? g.value[Ce][Ie] = G : g.value[Ce] = [G];
        const ie = g.value.reduce(
          (we, Ee) => Ee.map((Pe, Xe) => [...we[Xe] || [], Ee[Xe]]),
          []
        );
        o(r.closeTimePickerBtn), v.value && (ie[1] = ie[1].concat(v.value)), i(ie, r.order);
      }
    }, le = (G, Ce) => (pe(G), a(`update:${G}`, Ce));
    return t({ openChildCmp: ne }), (G, Ce) => {
      var Ie;
      return G.disabled ? ke("", !0) : (te(), Oe("div", w6, [
        (te(!0), Oe(Ge, null, ln(K.value, (ie, we) => {
          var Ee, Pe, Xe;
          return te(), Oe("div", {
            key: we,
            class: Ae(F.value),
            "data-compact": H.value && !G.enableSeconds,
            "data-collapsed": H.value && G.enableSeconds
          }, [
            ie.separator ? (te(), Oe(Ge, { key: 0 }, [
              A.value ? ke("", !0) : (te(), Oe(Ge, { key: 0 }, [
                ae(":")
              ], 64))
            ], 64)) : (te(), Oe(Ge, { key: 1 }, [
              T("button", {
                ref_for: !0,
                ref: (_e) => Q(_e, we, 0),
                type: "button",
                class: Ae({
                  dp__btn: !0,
                  dp__inc_dec_button: !G.timePickerInline,
                  dp__inc_dec_button_inline: G.timePickerInline,
                  dp__tp_inline_btn_top: G.timePickerInline,
                  dp__inc_dec_button_disabled: x.value(ie.type),
                  "dp--hidden-el": A.value
                }),
                "data-test-id": `${ie.type}-time-inc-btn-${r.order}`,
                "aria-label": (Ee = fe(l)) == null ? void 0 : Ee.incrementValue(ie.type),
                tabindex: "0",
                onKeydown: (_e) => fe(Nr)(_e, () => Ve(ie.type, !0, { keyboard: !0 }), !0),
                onClick: (_e) => fe(u).timeArrowHoldThreshold ? void 0 : Ve(ie.type, !0),
                onMousedown: (_e) => fe(u).timeArrowHoldThreshold ? Ve(ie.type, !0) : void 0,
                onMouseup: ge
              }, [
                r.timePickerInline ? (te(), Oe(Ge, { key: 1 }, [
                  G.$slots["tp-inline-arrow-up"] ? bt(G.$slots, "tp-inline-arrow-up", { key: 0 }) : (te(), Oe(Ge, { key: 1 }, [
                    Ce[2] || (Ce[2] = T("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1)),
                    Ce[3] || (Ce[3] = T("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1))
                  ], 64))
                ], 64)) : (te(), Oe(Ge, { key: 0 }, [
                  G.$slots["arrow-up"] ? bt(G.$slots, "arrow-up", { key: 0 }) : ke("", !0),
                  G.$slots["arrow-up"] ? ke("", !0) : (te(), Le(fe(w0), { key: 1 }))
                ], 64))
              ], 42, S6),
              T("button", {
                ref_for: !0,
                ref: (_e) => Q(_e, we, 1),
                type: "button",
                "aria-label": `${ue.value(ie.type).text}-${(Pe = fe(l)) == null ? void 0 : Pe.openTpOverlay(ie.type)}`,
                class: Ae({
                  dp__time_display: !0,
                  dp__time_display_block: !G.timePickerInline,
                  dp__time_display_inline: G.timePickerInline,
                  "dp--time-invalid": D.value(ie.type),
                  "dp--time-overlay-btn": !D.value(ie.type),
                  "dp--hidden-el": A.value
                }),
                disabled: ve(ie.type),
                tabindex: "0",
                "data-test-id": `${ie.type}-toggle-overlay-btn-${r.order}`,
                onKeydown: (_e) => fe(Nr)(_e, () => pe(ie.type), !0),
                onClick: (_e) => pe(ie.type)
              }, [
                G.$slots[ie.type] ? bt(G.$slots, ie.type, {
                  key: 0,
                  text: ue.value(ie.type).text,
                  value: ue.value(ie.type).value
                }) : ke("", !0),
                G.$slots[ie.type] ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
                  ae(j(ue.value(ie.type).text), 1)
                ], 64))
              ], 42, C6),
              T("button", {
                ref_for: !0,
                ref: (_e) => Q(_e, we, 2),
                type: "button",
                class: Ae({
                  dp__btn: !0,
                  dp__inc_dec_button: !G.timePickerInline,
                  dp__inc_dec_button_inline: G.timePickerInline,
                  dp__tp_inline_btn_bottom: G.timePickerInline,
                  dp__inc_dec_button_disabled: M.value(ie.type),
                  "dp--hidden-el": A.value
                }),
                "data-test-id": `${ie.type}-time-dec-btn-${r.order}`,
                "aria-label": (Xe = fe(l)) == null ? void 0 : Xe.decrementValue(ie.type),
                tabindex: "0",
                onKeydown: (_e) => fe(Nr)(_e, () => Ve(ie.type, !1, { keyboard: !0 }), !0),
                onClick: (_e) => fe(u).timeArrowHoldThreshold ? void 0 : Ve(ie.type, !1),
                onMousedown: (_e) => fe(u).timeArrowHoldThreshold ? Ve(ie.type, !1) : void 0,
                onMouseup: ge
              }, [
                r.timePickerInline ? (te(), Oe(Ge, { key: 1 }, [
                  G.$slots["tp-inline-arrow-down"] ? bt(G.$slots, "tp-inline-arrow-down", { key: 0 }) : (te(), Oe(Ge, { key: 1 }, [
                    Ce[4] || (Ce[4] = T("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_l" }, null, -1)),
                    Ce[5] || (Ce[5] = T("span", { class: "dp__tp_inline_btn_bar dp__tp_btn_in_r" }, null, -1))
                  ], 64))
                ], 64)) : (te(), Oe(Ge, { key: 0 }, [
                  G.$slots["arrow-down"] ? bt(G.$slots, "arrow-down", { key: 0 }) : ke("", !0),
                  G.$slots["arrow-down"] ? ke("", !0) : (te(), Le(fe(k0), { key: 1 }))
                ], 64))
              ], 42, A6)
            ], 64))
          ], 10, k6);
        }), 128)),
        G.is24 ? ke("", !0) : (te(), Oe("div", x6, [
          G.$slots["am-pm-button"] ? bt(G.$slots, "am-pm-button", {
            key: 0,
            toggle: ce,
            value: b.value
          }) : ke("", !0),
          G.$slots["am-pm-button"] ? ke("", !0) : (te(), Oe("button", {
            key: 1,
            ref_key: "amPmButton",
            ref: v,
            type: "button",
            class: "dp__pm_am_button",
            role: "button",
            "aria-label": (Ie = fe(l)) == null ? void 0 : Ie.amPmButton,
            tabindex: "0",
            "data-compact": H.value,
            onClick: ce,
            onKeydown: Ce[0] || (Ce[0] = (ie) => fe(Nr)(ie, () => ce(), !0))
          }, j(b.value), 41, T6))
        ])),
        (te(!0), Oe(Ge, null, ln(Z.value, (ie, we) => (te(), Le($r, {
          key: we,
          name: fe(y)(w[ie.type]),
          css: fe(p)
        }, {
          default: E(() => {
            var Ee, Pe;
            return [
              w[ie.type] ? (te(), Le(Zf, {
                key: 0,
                items: q(ie.type),
                "is-last": G.autoApply && !fe(u).keepActionRow,
                "esc-close": G.escClose,
                type: ie.type,
                "text-input": G.textInput,
                config: G.config,
                "arrow-navigation": G.arrowNavigation,
                "aria-labels": G.ariaLabels,
                "overlay-label": (Pe = (Ee = fe(l)).timeOverlay) == null ? void 0 : Pe.call(Ee, ie.type),
                onSelected: (Xe) => le(ie.type, Xe),
                onToggle: (Xe) => pe(ie.type),
                onResetFlow: Ce[1] || (Ce[1] = (Xe) => G.$emit("reset-flow"))
              }, mr({
                "button-icon": E(() => [
                  G.$slots["clock-icon"] ? bt(G.$slots, "clock-icon", { key: 0 }) : ke("", !0),
                  G.$slots["clock-icon"] ? ke("", !0) : (te(), Le(Ku(G.timePickerInline ? fe(Xu) : fe(b0)), { key: 1 }))
                ]),
                _: 2
              }, [
                G.$slots[`${ie.type}-overlay-value`] ? {
                  name: "item",
                  fn: E(({ item: Xe }) => [
                    bt(G.$slots, `${ie.type}-overlay-value`, {
                      text: Xe.text,
                      value: Xe.value
                    })
                  ]),
                  key: "0"
                } : void 0,
                G.$slots[`${ie.type}-overlay-header`] ? {
                  name: "header",
                  fn: E(() => [
                    bt(G.$slots, `${ie.type}-overlay-header`, {
                      toggle: () => pe(ie.type)
                    })
                  ]),
                  key: "1"
                } : void 0
              ]), 1032, ["items", "is-last", "esc-close", "type", "text-input", "config", "arrow-navigation", "aria-labels", "overlay-label", "onSelected", "onToggle"])) : ke("", !0)
            ];
          }),
          _: 2
        }, 1032, ["name", "css"]))), 128))
      ]));
    };
  }
}), E6 = ["data-dp-mobile"], P6 = ["aria-label", "tabindex"], O6 = ["role", "aria-label", "tabindex"], D6 = ["aria-label"], TE = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePicker",
  props: {
    hours: { type: [Number, Array], default: 0 },
    minutes: { type: [Number, Array], default: 0 },
    seconds: { type: [Number, Array], default: 0 },
    disabledTimesConfig: { type: Function, default: null },
    validateTime: {
      type: Function,
      default: () => !1
    },
    ...Zi
  },
  emits: [
    "update:hours",
    "update:minutes",
    "update:seconds",
    "mount",
    "reset-flow",
    "overlay-opened",
    "overlay-closed",
    "am-pm-change"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { buildMatrix: i, setTimePicker: o } = al(), l = uc(), { defaultedTransitions: s, defaultedAriaLabels: d, defaultedTextInput: u, defaultedConfig: f, defaultedRange: h } = fa(r), { transitionName: y, showTransition: p } = em(s), { hideNavigationButtons: w } = Sv(), b = be(null), v = be(null), g = be([]), k = be(null), A = be(!1);
    an(() => {
      a("mount"), !r.timePicker && r.arrowNavigation ? i([Ha(b.value)], "time") : o(!0, r.timePicker);
    });
    const C = W(() => h.value.enabled && r.modelAuto ? uE(r.internalModelValue) : !0), D = be(!1), P = (Y) => ({
      hours: Array.isArray(r.hours) ? r.hours[Y] : r.hours,
      minutes: Array.isArray(r.minutes) ? r.minutes[Y] : r.minutes,
      seconds: Array.isArray(r.seconds) ? r.seconds[Y] : r.seconds
    }), O = W(() => {
      const Y = [];
      if (h.value.enabled)
        for (let U = 0; U < 2; U++)
          Y.push(P(U));
      else
        Y.push(P(0));
      return Y;
    }), I = (Y, U = !1, q = "") => {
      U || a("reset-flow"), D.value = Y, a(Y ? "overlay-opened" : "overlay-closed", br.time), r.arrowNavigation && o(Y), Dt(() => {
        q !== "" && g.value[0] && g.value[0].openChildCmp(q);
      });
    }, x = W(() => ({
      dp__btn: !0,
      dp__button: !0,
      dp__button_bottom: r.autoApply && !f.value.keepActionRow
    })), M = di(l, "timePicker"), V = (Y, U, q) => h.value.enabled ? U === 0 ? [Y, O.value[1][q]] : [O.value[0][q], Y] : Y, B = (Y) => {
      a("update:hours", Y);
    }, F = (Y) => {
      a("update:minutes", Y);
    }, H = (Y) => {
      a("update:seconds", Y);
    }, K = () => {
      if (k.value && !u.value.enabled && !r.noOverlayFocus) {
        const Y = dE(k.value);
        Y && Y.focus({ preventScroll: !0 });
      }
    }, Z = (Y) => {
      A.value = !1, a("overlay-closed", Y);
    }, ue = (Y) => {
      A.value = !0, a("overlay-opened", Y);
    };
    return t({ toggleTimePicker: I }), (Y, U) => {
      var q;
      return te(), Oe("div", {
        class: "dp--tp-wrap",
        "data-dp-mobile": Y.isMobile
      }, [
        !Y.timePicker && !Y.timePickerInline ? sn((te(), Oe("button", {
          key: 0,
          ref_key: "openTimePickerBtn",
          ref: b,
          type: "button",
          class: Ae({ ...x.value, "dp--hidden-el": D.value }),
          "aria-label": (q = fe(d)) == null ? void 0 : q.openTimePicker,
          tabindex: Y.noOverlayFocus ? void 0 : 0,
          "data-test-id": "open-time-picker-btn",
          onKeydown: U[0] || (U[0] = (oe) => fe(Nr)(oe, () => I(!0))),
          onClick: U[1] || (U[1] = (oe) => I(!0))
        }, [
          Y.$slots["clock-icon"] ? bt(Y.$slots, "clock-icon", { key: 0 }) : ke("", !0),
          Y.$slots["clock-icon"] ? ke("", !0) : (te(), Le(fe(b0), { key: 1 }))
        ], 42, P6)), [
          [_a, !fe(w)(Y.hideNavigation, "time")]
        ]) : ke("", !0),
        _($r, {
          name: fe(y)(D.value),
          css: fe(p) && !Y.timePickerInline
        }, {
          default: E(() => {
            var oe, ee;
            return [
              D.value || Y.timePicker || Y.timePickerInline ? (te(), Oe("div", {
                key: 0,
                ref_key: "overlayRef",
                ref: k,
                role: Y.timePickerInline ? void 0 : "dialog",
                class: Ae({
                  dp__overlay: !Y.timePickerInline,
                  "dp--overlay-absolute": !r.timePicker && !Y.timePickerInline,
                  "dp--overlay-relative": r.timePicker
                }),
                style: Je(Y.timePicker ? { height: `${fe(f).modeHeight}px` } : void 0),
                "aria-label": (oe = fe(d)) == null ? void 0 : oe.timePicker,
                tabindex: Y.timePickerInline ? void 0 : 0
              }, [
                T("div", {
                  class: Ae(
                    Y.timePickerInline ? "dp__time_picker_inline_container" : "dp__overlay_container dp__container_flex dp__time_picker_overlay_container"
                  ),
                  style: { display: "flex" }
                }, [
                  Y.$slots["time-picker-overlay"] ? bt(Y.$slots, "time-picker-overlay", {
                    key: 0,
                    hours: e.hours,
                    minutes: e.minutes,
                    seconds: e.seconds,
                    setHours: B,
                    setMinutes: F,
                    setSeconds: H
                  }) : ke("", !0),
                  Y.$slots["time-picker-overlay"] ? ke("", !0) : (te(), Oe("div", {
                    key: 1,
                    class: Ae(Y.timePickerInline ? "dp__flex" : "dp__overlay_row dp__flex_row")
                  }, [
                    (te(!0), Oe(Ge, null, ln(O.value, (he, ve) => sn((te(), Le(I6, Fe({
                      key: ve,
                      ref_for: !0
                    }, {
                      ...Y.$props,
                      order: ve,
                      hours: he.hours,
                      minutes: he.minutes,
                      seconds: he.seconds,
                      closeTimePickerBtn: v.value,
                      disabledTimesConfig: e.disabledTimesConfig,
                      disabled: ve === 0 ? fe(h).fixedStart : fe(h).fixedEnd
                    }, {
                      ref_for: !0,
                      ref_key: "timeInputRefs",
                      ref: g,
                      "validate-time": (pe, z) => e.validateTime(pe, V(z, ve, pe)),
                      "onUpdate:hours": (pe) => B(V(pe, ve, "hours")),
                      "onUpdate:minutes": (pe) => F(V(pe, ve, "minutes")),
                      "onUpdate:seconds": (pe) => H(V(pe, ve, "seconds")),
                      onMounted: K,
                      onOverlayClosed: Z,
                      onOverlayOpened: ue,
                      onAmPmChange: U[2] || (U[2] = (pe) => Y.$emit("am-pm-change", pe))
                    }), mr({ _: 2 }, [
                      ln(fe(M), (pe, z) => ({
                        name: pe,
                        fn: E((ge) => [
                          bt(Y.$slots, pe, Fe({ ref_for: !0 }, ge))
                        ])
                      }))
                    ]), 1040, ["validate-time", "onUpdate:hours", "onUpdate:minutes", "onUpdate:seconds"])), [
                      [_a, ve === 0 ? !0 : C.value]
                    ])), 128))
                  ], 2)),
                  !Y.timePicker && !Y.timePickerInline ? sn((te(), Oe("button", {
                    key: 2,
                    ref_key: "closeTimePickerBtn",
                    ref: v,
                    type: "button",
                    class: Ae({ ...x.value, "dp--hidden-el": A.value }),
                    "aria-label": (ee = fe(d)) == null ? void 0 : ee.closeTimePicker,
                    tabindex: "0",
                    onKeydown: U[3] || (U[3] = (he) => fe(Nr)(he, () => I(!1))),
                    onClick: U[4] || (U[4] = (he) => I(!1))
                  }, [
                    Y.$slots["calendar-icon"] ? bt(Y.$slots, "calendar-icon", { key: 0 }) : ke("", !0),
                    Y.$slots["calendar-icon"] ? ke("", !0) : (te(), Le(fe(Xu), { key: 1 }))
                  ], 42, D6)), [
                    [_a, !fe(w)(Y.hideNavigation, "time")]
                  ]) : ke("", !0)
                ], 2)
              ], 14, O6)) : ke("", !0)
            ];
          }),
          _: 3
        }, 8, ["name", "css"])
      ], 8, E6);
    };
  }
}), IE = (e, t, n, a) => {
  const { defaultedRange: r } = fa(e), i = (k, A) => Array.isArray(t[k]) ? t[k][A] : t[k], o = (k) => e.enableSeconds ? Array.isArray(t.seconds) ? t.seconds[k] : t.seconds : 0, l = (k, A) => k ? A !== void 0 ? $s(k, i("hours", A), i("minutes", A), o(A)) : $s(k, t.hours, t.minutes, o()) : oE(ut(), o(A)), s = (k, A) => {
    t[k] = A;
  }, d = W(() => e.modelAuto && r.value.enabled ? Array.isArray(n.value) ? n.value.length > 1 : !1 : r.value.enabled), u = (k, A) => {
    const C = Object.fromEntries(
      Object.keys(t).map((D) => D === k ? [D, A] : [D, t[D]].slice())
    );
    if (d.value && !r.value.disableTimeRangeValidation) {
      const D = (O) => n.value ? $s(
        n.value[O],
        C.hours[O],
        C.minutes[O],
        C.seconds[O]
      ) : null, P = (O) => iE(n.value[O], 0);
      return !(mn(D(0), D(1)) && (ac(D(0), P(1)) || Bu(D(1), P(0))));
    }
    return !0;
  }, f = (k, A) => {
    u(k, A) && (s(k, A), a && a());
  }, h = (k) => {
    f("hours", k);
  }, y = (k) => {
    f("minutes", k);
  }, p = (k) => {
    f("seconds", k);
  }, w = (k, A, C, D) => {
    A && h(k), !A && !C && y(k), C && p(k), n.value && D(n.value);
  }, b = (k) => {
    if (k) {
      const A = Array.isArray(k), C = A ? [+k[0].hours, +k[1].hours] : +k.hours, D = A ? [+k[0].minutes, +k[1].minutes] : +k.minutes, P = A ? [+k[0].seconds, +k[1].seconds] : +k.seconds;
      s("hours", C), s("minutes", D), e.enableSeconds && s("seconds", P);
    }
  }, v = (k, A) => {
    const C = {
      hours: Array.isArray(t.hours) ? t.hours[k] : t.hours,
      disabledArr: []
    };
    return (A || A === 0) && (C.hours = A), Array.isArray(e.disabledTimes) && (C.disabledArr = r.value.enabled && Array.isArray(e.disabledTimes[k]) ? e.disabledTimes[k] : e.disabledTimes), C;
  }, g = W(() => (k, A) => {
    var C;
    if (Array.isArray(e.disabledTimes)) {
      const { disabledArr: D, hours: P } = v(k, A), O = D.filter((I) => +I.hours === P);
      return ((C = O[0]) == null ? void 0 : C.minutes) === "*" ? { hours: [P], minutes: void 0, seconds: void 0 } : {
        hours: [],
        minutes: O?.map((I) => +I.minutes) ?? [],
        seconds: O?.map((I) => I.seconds ? +I.seconds : void 0) ?? []
      };
    }
    return { hours: [], minutes: [], seconds: [] };
  });
  return {
    setTime: s,
    updateHours: h,
    updateMinutes: y,
    updateSeconds: p,
    getSetDateTime: l,
    updateTimeValues: w,
    getSecondsValue: o,
    assignStartTime: b,
    validateTime: u,
    disabledTimesConfig: g
  };
}, B6 = (e, t) => {
  const n = () => {
    e.isTextInputDate && A();
  }, { modelValue: a, time: r } = tm(e, t, n), { defaultedStartTime: i, defaultedRange: o, defaultedTz: l } = fa(e), { updateTimeValues: s, getSetDateTime: d, setTime: u, assignStartTime: f, disabledTimesConfig: h, validateTime: y } = IE(e, r, a, p);
  function p() {
    t("update-flow-step");
  }
  const w = (D) => {
    const { hours: P, minutes: O, seconds: I } = D;
    return { hours: +P, minutes: +O, seconds: I ? +I : 0 };
  }, b = () => {
    if (e.startTime) {
      if (Array.isArray(e.startTime)) {
        const P = w(e.startTime[0]), O = w(e.startTime[1]);
        return [Mn(ut(), P), Mn(ut(), O)];
      }
      const D = w(e.startTime);
      return Mn(ut(), D);
    }
    return o.value.enabled ? [null, null] : null;
  }, v = () => {
    if (o.value.enabled) {
      const [D, P] = b();
      a.value = [
        Qr(d(D, 0), l.value.timezone),
        Qr(d(P, 1), l.value.timezone)
      ];
    } else
      a.value = Qr(d(b()), l.value.timezone);
  }, g = (D) => Array.isArray(D) ? [Gl(ut(D[0])), Gl(ut(D[1]))] : [Gl(D ?? ut())], k = (D, P, O) => {
    u("hours", D), u("minutes", P), u("seconds", e.enableSeconds ? O : 0);
  }, A = () => {
    const [D, P] = g(a.value);
    return o.value.enabled ? k(
      [D.hours, P.hours],
      [D.minutes, P.minutes],
      [D.seconds, P.seconds]
    ) : k(D.hours, D.minutes, D.seconds);
  };
  an(() => {
    if (!e.shadow)
      return f(i.value), a.value ? A() : v();
  });
  const C = () => {
    Array.isArray(a.value) ? a.value = a.value.map((D, P) => D && d(D, P)) : a.value = d(a.value), t("time-update");
  };
  return {
    modelValue: a,
    time: r,
    disabledTimesConfig: h,
    updateTime: (D, P = !0, O = !1) => {
      s(D, P, O, C);
    },
    validateTime: y
  };
}, V6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "TimePickerSolo",
  props: {
    ...Zi
  },
  emits: [
    "update:internal-model-value",
    "time-update",
    "am-pm-change",
    "mount",
    "reset-flow",
    "update-flow-step",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = uc(), o = di(i, "timePicker"), l = be(null), { time: s, modelValue: d, disabledTimesConfig: u, updateTime: f, validateTime: h } = B6(r, a);
    return an(() => {
      r.shadow || a("mount", null);
    }), t({ getSidebarProps: () => ({
      modelValue: d,
      time: s,
      updateTime: f
    }), toggleTimePicker: (y, p = !1, w = "") => {
      var b;
      (b = l.value) == null || b.toggleTimePicker(y, p, w);
    } }), (y, p) => (te(), Le(wv, {
      "multi-calendars": 0,
      stretch: "",
      "is-mobile": y.isMobile
    }, {
      default: E(() => [
        _(TE, Fe({
          ref_key: "tpRef",
          ref: l
        }, y.$props, {
          hours: fe(s).hours,
          minutes: fe(s).minutes,
          seconds: fe(s).seconds,
          "internal-model-value": y.internalModelValue,
          "disabled-times-config": fe(u),
          "validate-time": fe(h),
          "onUpdate:hours": p[0] || (p[0] = (w) => fe(f)(w)),
          "onUpdate:minutes": p[1] || (p[1] = (w) => fe(f)(w, !1)),
          "onUpdate:seconds": p[2] || (p[2] = (w) => fe(f)(w, !1, !0)),
          onAmPmChange: p[3] || (p[3] = (w) => y.$emit("am-pm-change", w)),
          onResetFlow: p[4] || (p[4] = (w) => y.$emit("reset-flow")),
          onOverlayClosed: p[5] || (p[5] = (w) => y.$emit("overlay-toggle", { open: !1, overlay: w })),
          onOverlayOpened: p[6] || (p[6] = (w) => y.$emit("overlay-toggle", { open: !0, overlay: w }))
        }), mr({ _: 2 }, [
          ln(fe(o), (w, b) => ({
            name: w,
            fn: E((v) => [
              bt(y.$slots, w, ea(Aa(v)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"])
      ]),
      _: 3
    }, 8, ["is-mobile"]));
  }
}), M6 = { class: "dp--header-wrap" }, L6 = {
  key: 0,
  class: "dp__month_year_wrap"
}, R6 = { key: 0 }, F6 = { class: "dp__month_year_wrap" }, N6 = ["data-dp-element", "aria-label", "data-test-id", "onClick", "onKeydown"], U6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "DpHeader",
  props: {
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    instance: { type: Number, default: 0 },
    years: { type: Array, default: () => [] },
    months: { type: Array, default: () => [] },
    ...Zi
  },
  emits: ["update-month-year", "mount", "reset-flow", "overlay-closed", "overlay-opened"],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      defaultedTransitions: i,
      defaultedAriaLabels: o,
      defaultedMultiCalendars: l,
      defaultedFilters: s,
      defaultedConfig: d,
      defaultedHighlight: u,
      propDates: f,
      defaultedUI: h
    } = fa(r), { transitionName: y, showTransition: p } = em(i), { buildMatrix: w } = al(), { handleMonthYearChange: b, isDisabled: v, updateMonthYear: g } = o6(r, a), { showLeftIcon: k, showRightIcon: A } = Sv(), C = be(!1), D = be(!1), P = be(!1), O = be([null, null, null, null]);
    an(() => {
      a("mount");
    });
    const I = (ee) => ({
      get: () => r[ee],
      set: (he) => {
        const ve = ee === Ni.month ? Ni.year : Ni.month;
        a("update-month-year", { [ee]: he, [ve]: r[ve] }), ee === Ni.month ? Z(!0) : ue(!0);
      }
    }), x = W(I(Ni.month)), M = W(I(Ni.year)), V = W(() => (ee) => ({
      month: r.month,
      year: r.year,
      items: ee === Ni.month ? r.months : r.years,
      instance: r.instance,
      updateMonthYear: g,
      toggle: ee === Ni.month ? Z : ue
    })), B = W(() => r.months.find((he) => he.value === r.month) || { text: "", value: 0 }), F = W(() => Mu(r.months, (ee) => {
      const he = r.month === ee.value, ve = Pf(
        ee.value,
        _E(r.year, f.value.minDate),
        vE(r.year, f.value.maxDate)
      ) || s.value.months.includes(ee.value), pe = wE(u.value, ee.value, r.year);
      return { active: he, disabled: ve, highlighted: pe };
    })), H = W(() => Mu(r.years, (ee) => {
      const he = r.year === ee.value, ve = Pf(
        ee.value,
        Lu(f.value.minDate),
        Lu(f.value.maxDate)
      ) || s.value.years.includes(ee.value), pe = T0(u.value, ee.value);
      return { active: he, disabled: ve, highlighted: pe };
    })), K = (ee, he, ve) => {
      ve !== void 0 ? ee.value = ve : ee.value = !ee.value, ee.value ? (P.value = !0, a("overlay-opened", he)) : (P.value = !1, a("overlay-closed", he));
    }, Z = (ee = !1, he) => {
      Y(ee), K(C, br.month, he);
    }, ue = (ee = !1, he) => {
      Y(ee), K(D, br.year, he);
    }, Y = (ee) => {
      ee || a("reset-flow");
    }, U = (ee, he) => {
      r.arrowNavigation && (O.value[he] = Ha(ee), w(O.value, "monthYear"));
    }, q = W(() => {
      var ee, he, ve, pe, z, ge;
      return [
        {
          type: Ni.month,
          index: 1,
          toggle: Z,
          modelValue: x.value,
          updateModelValue: (Ve) => x.value = Ve,
          text: B.value.text,
          showSelectionGrid: C.value,
          items: F.value,
          ariaLabel: (ee = o.value) == null ? void 0 : ee.openMonthsOverlay,
          overlayLabel: ((ve = (he = o.value).monthPicker) == null ? void 0 : ve.call(he, !0)) ?? void 0
        },
        {
          type: Ni.year,
          index: 2,
          toggle: ue,
          modelValue: M.value,
          updateModelValue: (Ve) => M.value = Ve,
          text: fE(r.year, r.locale),
          showSelectionGrid: D.value,
          items: H.value,
          ariaLabel: (pe = o.value) == null ? void 0 : pe.openYearsOverlay,
          overlayLabel: ((ge = (z = o.value).yearPicker) == null ? void 0 : ge.call(z, !0)) ?? void 0
        }
      ];
    }), oe = W(() => r.disableYearSelect ? [q.value[0]] : r.yearFirst ? [...q.value].reverse() : q.value);
    return t({
      toggleMonthPicker: Z,
      toggleYearPicker: ue,
      handleMonthYearChange: b
    }), (ee, he) => {
      var ve, pe, z, ge, Ve, Ne;
      return te(), Oe("div", M6, [
        ee.$slots["month-year"] ? (te(), Oe("div", L6, [
          bt(ee.$slots, "month-year", ea(Aa({
            month: e.month,
            year: e.year,
            months: e.months,
            years: e.years,
            updateMonthYear: fe(g),
            handleMonthYearChange: fe(b),
            instance: e.instance,
            isDisabled: fe(v)
          })))
        ])) : (te(), Oe(Ge, { key: 1 }, [
          ee.$slots["top-extra"] ? (te(), Oe("div", R6, [
            bt(ee.$slots, "top-extra", { value: ee.internalModelValue })
          ])) : ke("", !0),
          T("div", F6, [
            fe(k)(fe(l), e.instance) && !ee.vertical ? (te(), Le(df, {
              key: 0,
              "aria-label": (ve = fe(o)) == null ? void 0 : ve.prevMonth,
              disabled: fe(v)(!1),
              class: Ae((pe = fe(h)) == null ? void 0 : pe.navBtnPrev),
              "el-name": "action-prev",
              onActivate: he[0] || (he[0] = (ce) => fe(b)(!1, !0)),
              onSetRef: he[1] || (he[1] = (ce) => U(ce, 0))
            }, {
              default: E(() => [
                ee.$slots["arrow-left"] ? bt(ee.$slots, "arrow-left", { key: 0 }) : ke("", !0),
                ee.$slots["arrow-left"] ? ke("", !0) : (te(), Le(fe(g0), { key: 1 }))
              ]),
              _: 3
            }, 8, ["aria-label", "disabled", "class"])) : ke("", !0),
            T("div", {
              class: Ae(["dp__month_year_wrap", {
                dp__year_disable_select: ee.disableYearSelect
              }])
            }, [
              (te(!0), Oe(Ge, null, ln(oe.value, (ce, ne) => (te(), Oe(Ge, {
                key: ce.type
              }, [
                T("button", {
                  ref_for: !0,
                  ref: (Q) => U(Q, ne + 1),
                  type: "button",
                  "data-dp-element": `overlay-${ce.type}`,
                  class: Ae(["dp__btn dp__month_year_select", { "dp--hidden-el": P.value }]),
                  "aria-label": `${ce.text}-${ce.ariaLabel}`,
                  "data-test-id": `${ce.type}-toggle-overlay-${e.instance}`,
                  onClick: ce.toggle,
                  onKeydown: (Q) => fe(Nr)(Q, () => ce.toggle(), !0)
                }, [
                  ee.$slots[ce.type] ? bt(ee.$slots, ce.type, {
                    key: 0,
                    text: ce.text,
                    value: r[ce.type]
                  }) : ke("", !0),
                  ee.$slots[ce.type] ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
                    ae(j(ce.text), 1)
                  ], 64))
                ], 42, N6),
                _($r, {
                  name: fe(y)(ce.showSelectionGrid),
                  css: fe(p)
                }, {
                  default: E(() => [
                    ce.showSelectionGrid ? (te(), Le(Zf, {
                      key: 0,
                      items: ce.items,
                      "arrow-navigation": ee.arrowNavigation,
                      "hide-navigation": ee.hideNavigation,
                      "is-last": ee.autoApply && !fe(d).keepActionRow,
                      "skip-button-ref": !1,
                      config: ee.config,
                      type: ce.type,
                      "header-refs": [],
                      "esc-close": ee.escClose,
                      "menu-wrap-ref": ee.menuWrapRef,
                      "text-input": ee.textInput,
                      "aria-labels": ee.ariaLabels,
                      "overlay-label": ce.overlayLabel,
                      onSelected: ce.updateModelValue,
                      onToggle: ce.toggle
                    }, mr({
                      "button-icon": E(() => [
                        ee.$slots["calendar-icon"] ? bt(ee.$slots, "calendar-icon", { key: 0 }) : ke("", !0),
                        ee.$slots["calendar-icon"] ? ke("", !0) : (te(), Le(fe(Xu), { key: 1 }))
                      ]),
                      _: 2
                    }, [
                      ee.$slots[`${ce.type}-overlay-value`] ? {
                        name: "item",
                        fn: E(({ item: Q }) => [
                          bt(ee.$slots, `${ce.type}-overlay-value`, {
                            text: Q.text,
                            value: Q.value
                          })
                        ]),
                        key: "0"
                      } : void 0,
                      ee.$slots[`${ce.type}-overlay`] ? {
                        name: "overlay",
                        fn: E(() => [
                          bt(ee.$slots, `${ce.type}-overlay`, Fe({ ref_for: !0 }, V.value(ce.type)))
                        ]),
                        key: "1"
                      } : void 0,
                      ee.$slots[`${ce.type}-overlay-header`] ? {
                        name: "header",
                        fn: E(() => [
                          bt(ee.$slots, `${ce.type}-overlay-header`, {
                            toggle: ce.toggle
                          })
                        ]),
                        key: "2"
                      } : void 0
                    ]), 1032, ["items", "arrow-navigation", "hide-navigation", "is-last", "config", "type", "esc-close", "menu-wrap-ref", "text-input", "aria-labels", "overlay-label", "onSelected", "onToggle"])) : ke("", !0)
                  ]),
                  _: 2
                }, 1032, ["name", "css"])
              ], 64))), 128))
            ], 2),
            fe(k)(fe(l), e.instance) && ee.vertical ? (te(), Le(df, {
              key: 1,
              "aria-label": (z = fe(o)) == null ? void 0 : z.prevMonth,
              "el-name": "action-prev",
              disabled: fe(v)(!1),
              class: Ae((ge = fe(h)) == null ? void 0 : ge.navBtnPrev),
              onActivate: he[2] || (he[2] = (ce) => fe(b)(!1, !0))
            }, {
              default: E(() => [
                ee.$slots["arrow-up"] ? bt(ee.$slots, "arrow-up", { key: 0 }) : ke("", !0),
                ee.$slots["arrow-up"] ? ke("", !0) : (te(), Le(fe(w0), { key: 1 }))
              ]),
              _: 3
            }, 8, ["aria-label", "disabled", "class"])) : ke("", !0),
            fe(A)(fe(l), e.instance) ? (te(), Le(df, {
              key: 2,
              ref: "rightIcon",
              "el-name": "action-next",
              disabled: fe(v)(!0),
              "aria-label": (Ve = fe(o)) == null ? void 0 : Ve.nextMonth,
              class: Ae((Ne = fe(h)) == null ? void 0 : Ne.navBtnNext),
              onActivate: he[3] || (he[3] = (ce) => fe(b)(!0, !0)),
              onSetRef: he[4] || (he[4] = (ce) => U(ce, ee.disableYearSelect ? 2 : 3))
            }, {
              default: E(() => [
                ee.$slots[ee.vertical ? "arrow-down" : "arrow-right"] ? bt(ee.$slots, ee.vertical ? "arrow-down" : "arrow-right", { key: 0 }) : ke("", !0),
                ee.$slots[ee.vertical ? "arrow-down" : "arrow-right"] ? ke("", !0) : (te(), Le(Ku(ee.vertical ? fe(k0) : fe(y0)), { key: 1 }))
              ]),
              _: 3
            }, 8, ["disabled", "aria-label", "class"])) : ke("", !0)
          ])
        ], 64))
      ]);
    };
  }
}), $6 = {
  class: "dp__calendar_header",
  role: "row"
}, q6 = {
  key: 0,
  class: "dp__calendar_header_item",
  role: "gridcell"
}, H6 = ["aria-label"], z6 = {
  key: 0,
  class: "dp__calendar_item dp__week_num",
  role: "gridcell"
}, W6 = { class: "dp__cell_inner" }, K6 = ["id", "aria-pressed", "aria-disabled", "aria-label", "tabindex", "data-test-id", "onClick", "onTouchend", "onKeydown", "onMouseenter", "onMouseleave", "onMousedown"], j6 = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "DpCalendar",
  props: {
    mappedDates: { type: Array, default: () => [] },
    instance: { type: Number, default: 0 },
    month: { type: Number, default: 0 },
    year: { type: Number, default: 0 },
    ...Zi
  },
  emits: [
    "select-date",
    "set-hover-date",
    "handle-scroll",
    "mount",
    "handle-swipe",
    "handle-space",
    "tooltip-open",
    "tooltip-close"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, { buildMultiLevelMatrix: i } = al(), {
      defaultedTransitions: o,
      defaultedConfig: l,
      defaultedAriaLabels: s,
      defaultedMultiCalendars: d,
      defaultedWeekNumbers: u,
      defaultedMultiDates: f,
      defaultedUI: h
    } = fa(r), y = be(null), p = be({
      bottom: "",
      left: "",
      transform: ""
    }), w = be([]), b = be(null), v = be(!0), g = be(""), k = be({ startX: 0, endX: 0, startY: 0, endY: 0 }), A = be([]), C = be({ left: "50%" }), D = be(!1), P = W(() => r.calendar ? r.calendar(r.mappedDates) : r.mappedDates), O = W(() => r.dayNames ? Array.isArray(r.dayNames) ? r.dayNames : r.dayNames(r.locale, +r.weekStart) : xq(r.formatLocale, r.locale, +r.weekStart));
    an(() => {
      a("mount", { cmp: "calendar", refs: w }), l.value.noSwipe || b.value && (b.value.addEventListener("touchstart", U, { passive: !1 }), b.value.addEventListener("touchend", q, { passive: !1 }), b.value.addEventListener("touchmove", oe, { passive: !1 })), r.monthChangeOnScroll && b.value && b.value.addEventListener("wheel", ve, { passive: !1 });
    }), _i(() => {
      l.value.noSwipe || b.value && (b.value.removeEventListener("touchstart", U), b.value.removeEventListener("touchend", q), b.value.removeEventListener("touchmove", oe)), r.monthChangeOnScroll && b.value && b.value.removeEventListener("wheel", ve);
    });
    const I = (ce) => ce ? r.vertical ? "vNext" : "next" : r.vertical ? "vPrevious" : "previous", x = (ce, ne) => {
      if (r.transitions) {
        const Q = or(Xo(ut(), r.month, r.year));
        g.value = Va(or(Xo(ut(), ce, ne)), Q) ? o.value[I(!0)] : o.value[I(!1)], v.value = !1, Dt(() => {
          v.value = !0;
        });
      }
    }, M = W(
      () => ({
        ...h.value.calendar ?? {}
      })
    ), V = W(() => (ce) => {
      const ne = Iq(ce);
      return {
        dp__marker_dot: ne.type === "dot",
        dp__marker_line: ne.type === "line"
      };
    }), B = W(() => (ce) => mn(ce, y.value)), F = W(() => ({
      dp__calendar: !0,
      dp__calendar_next: d.value.count > 0 && r.instance !== 0
    })), H = W(() => (ce) => r.hideOffsetDates ? ce.current : !0), K = async (ce, ne) => {
      const { width: Q, height: le } = ce.getBoundingClientRect();
      y.value = ne.value;
      let G = { left: `${Q / 2}px` }, Ce = -50;
      if (await Dt(), A.value[0]) {
        const { left: Ie, width: ie } = A.value[0].getBoundingClientRect();
        Ie < 0 && (G = { left: "0" }, Ce = 0, C.value.left = `${Q / 2}px`), window.innerWidth < Ie + ie && (G = { right: "0" }, Ce = 0, C.value.left = `${ie - Q / 2}px`);
      }
      p.value = {
        bottom: `${le}px`,
        ...G,
        transform: `translateX(${Ce}%)`
      };
    }, Z = async (ce, ne, Q) => {
      var le, G, Ce;
      const Ie = Ha(w.value[ne][Q]);
      Ie && ((le = ce.marker) != null && le.customPosition && (Ce = (G = ce.marker) == null ? void 0 : G.tooltip) != null && Ce.length ? p.value = ce.marker.customPosition(Ie) : await K(Ie, ce), a("tooltip-open", ce.marker));
    }, ue = async (ce, ne, Q) => {
      var le, G;
      if (D.value && f.value.enabled && f.value.dragSelect)
        return a("select-date", ce);
      if (a("set-hover-date", ce), (G = (le = ce.marker) == null ? void 0 : le.tooltip) != null && G.length) {
        if (r.hideOffsetDates && !ce.current) return;
        await Z(ce, ne, Q);
      }
    }, Y = (ce) => {
      y.value && (y.value = null, p.value = JSON.parse(JSON.stringify({ bottom: "", left: "", transform: "" })), a("tooltip-close", ce.marker));
    }, U = (ce) => {
      k.value.startX = ce.changedTouches[0].screenX, k.value.startY = ce.changedTouches[0].screenY;
    }, q = (ce) => {
      k.value.endX = ce.changedTouches[0].screenX, k.value.endY = ce.changedTouches[0].screenY, ee();
    }, oe = (ce) => {
      r.vertical && !r.inline && ce.preventDefault();
    }, ee = () => {
      const ce = r.vertical ? "Y" : "X";
      Math.abs(k.value[`start${ce}`] - k.value[`end${ce}`]) > 10 && a("handle-swipe", k.value[`start${ce}`] > k.value[`end${ce}`] ? "right" : "left");
    }, he = (ce, ne, Q) => {
      ce && (Array.isArray(w.value[ne]) ? w.value[ne][Q] = ce : w.value[ne] = [ce]), r.arrowNavigation && i(w.value, "calendar");
    }, ve = (ce) => {
      r.monthChangeOnScroll && (ce.preventDefault(), a("handle-scroll", ce));
    }, pe = (ce) => u.value.type === "local" ? _0(ce.value, { weekStartsOn: +r.weekStart }) : u.value.type === "iso" ? m0(ce.value) : typeof u.value.type == "function" ? u.value.type(ce.value) : "", z = (ce) => {
      const ne = ce[0];
      return u.value.hideOnOffsetDates ? ce.some((Q) => Q.current) ? pe(ne) : "" : pe(ne);
    }, ge = (ce, ne, Q = !0) => {
      !Q && Bq() || (!f.value.enabled || l.value.allowPreventDefault) && (Us(ce, l.value), a("select-date", ne));
    }, Ve = (ce) => {
      Us(ce, l.value);
    }, Ne = (ce) => {
      f.value.enabled && f.value.dragSelect ? (D.value = !0, a("select-date", ce)) : f.value.enabled && a("select-date", ce);
    };
    return t({ triggerTransition: x }), (ce, ne) => (te(), Oe("div", {
      class: Ae(F.value)
    }, [
      T("div", {
        ref_key: "calendarWrapRef",
        ref: b,
        class: Ae(M.value),
        role: "grid"
      }, [
        T("div", $6, [
          ce.weekNumbers ? (te(), Oe("div", q6, j(ce.weekNumName), 1)) : ke("", !0),
          (te(!0), Oe(Ge, null, ln(O.value, (Q, le) => {
            var G, Ce;
            return te(), Oe("div", {
              key: le,
              class: "dp__calendar_header_item",
              role: "gridcell",
              "data-test-id": "calendar-header",
              "aria-label": (Ce = (G = fe(s)) == null ? void 0 : G.weekDay) == null ? void 0 : Ce.call(G, le)
            }, [
              ce.$slots["calendar-header"] ? bt(ce.$slots, "calendar-header", {
                key: 0,
                day: Q,
                index: le
              }) : ke("", !0),
              ce.$slots["calendar-header"] ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
                ae(j(Q), 1)
              ], 64))
            ], 8, H6);
          }), 128))
        ]),
        ne[2] || (ne[2] = T("div", { class: "dp__calendar_header_separator" }, null, -1)),
        _($r, {
          name: g.value,
          css: !!ce.transitions
        }, {
          default: E(() => [
            v.value ? (te(), Oe("div", {
              key: 0,
              class: "dp__calendar",
              role: "rowgroup",
              onMouseleave: ne[1] || (ne[1] = (Q) => D.value = !1)
            }, [
              (te(!0), Oe(Ge, null, ln(P.value, (Q, le) => (te(), Oe("div", {
                key: le,
                class: "dp__calendar_row",
                role: "row"
              }, [
                ce.weekNumbers ? (te(), Oe("div", z6, [
                  T("div", W6, j(z(Q.days)), 1)
                ])) : ke("", !0),
                (te(!0), Oe(Ge, null, ln(Q.days, (G, Ce) => {
                  var Ie, ie, we;
                  return te(), Oe("div", {
                    id: fe(xb)(G.value),
                    ref_for: !0,
                    ref: (Ee) => he(Ee, le, Ce),
                    key: Ce + le,
                    role: "gridcell",
                    class: "dp__calendar_item",
                    "aria-pressed": (G.classData.dp__active_date || G.classData.dp__range_start || G.classData.dp__range_start) ?? void 0,
                    "aria-disabled": G.classData.dp__cell_disabled || void 0,
                    "aria-label": (ie = (Ie = fe(s)) == null ? void 0 : Ie.day) == null ? void 0 : ie.call(Ie, G),
                    tabindex: !G.current && ce.hideOffsetDates ? void 0 : 0,
                    "data-test-id": fe(xb)(G.value),
                    onClick: ua((Ee) => ge(Ee, G), ["prevent"]),
                    onTouchend: (Ee) => ge(Ee, G, !1),
                    onKeydown: (Ee) => fe(Nr)(Ee, () => ce.$emit("select-date", G)),
                    onMouseenter: (Ee) => ue(G, le, Ce),
                    onMouseleave: (Ee) => Y(G),
                    onMousedown: (Ee) => Ne(G),
                    onMouseup: ne[0] || (ne[0] = (Ee) => D.value = !1)
                  }, [
                    T("div", {
                      class: Ae(["dp__cell_inner", G.classData])
                    }, [
                      ce.$slots.day && H.value(G) ? bt(ce.$slots, "day", {
                        key: 0,
                        day: +G.text,
                        date: G.value
                      }) : ke("", !0),
                      ce.$slots.day ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
                        ae(j(G.text), 1)
                      ], 64)),
                      G.marker && H.value(G) ? (te(), Oe(Ge, { key: 2 }, [
                        ce.$slots.marker ? bt(ce.$slots, "marker", {
                          key: 0,
                          marker: G.marker,
                          day: +G.text,
                          date: G.value
                        }) : (te(), Oe("div", {
                          key: 1,
                          class: Ae(V.value(G.marker)),
                          style: Je(G.marker.color ? { backgroundColor: G.marker.color } : {})
                        }, null, 6))
                      ], 64)) : ke("", !0),
                      B.value(G.value) ? (te(), Oe("div", {
                        key: 3,
                        ref_for: !0,
                        ref_key: "activeTooltip",
                        ref: A,
                        class: "dp__marker_tooltip",
                        style: Je(p.value)
                      }, [
                        (we = G.marker) != null && we.tooltip ? (te(), Oe("div", {
                          key: 0,
                          class: "dp__tooltip_content",
                          onClick: Ve
                        }, [
                          (te(!0), Oe(Ge, null, ln(G.marker.tooltip, (Ee, Pe) => (te(), Oe("div", {
                            key: Pe,
                            class: "dp__tooltip_text"
                          }, [
                            ce.$slots["marker-tooltip"] ? bt(ce.$slots, "marker-tooltip", {
                              key: 0,
                              tooltip: Ee,
                              day: G.value
                            }) : ke("", !0),
                            ce.$slots["marker-tooltip"] ? ke("", !0) : (te(), Oe(Ge, { key: 1 }, [
                              T("div", {
                                class: "dp__tooltip_mark",
                                style: Je(Ee.color ? { backgroundColor: Ee.color } : {})
                              }, null, 4),
                              T("div", null, j(Ee.text), 1)
                            ], 64))
                          ]))), 128)),
                          T("div", {
                            class: "dp__arrow_bottom_tp",
                            style: Je(C.value)
                          }, null, 4)
                        ])) : ke("", !0)
                      ], 4)) : ke("", !0)
                    ], 2)
                  ], 40, K6);
                }), 128))
              ]))), 128))
            ], 32)) : ke("", !0)
          ]),
          _: 3
        }, 8, ["name", "css"])
      ], 2)
    ], 2));
  }
}), rA = (e) => Array.isArray(e), Y6 = (e, t, n, a) => {
  const r = be([]), i = be(/* @__PURE__ */ new Date()), o = be(), l = () => q(e.isTextInputDate), { modelValue: s, calendars: d, time: u, today: f } = tm(e, t, l), {
    defaultedMultiCalendars: h,
    defaultedStartTime: y,
    defaultedRange: p,
    defaultedConfig: w,
    defaultedTz: b,
    propDates: v,
    defaultedMultiDates: g
  } = fa(e), { validateMonthYearInRange: k, isDisabled: A, isDateRangeAllowed: C, checkMinMaxRange: D } = rl(e), { updateTimeValues: P, getSetDateTime: O, setTime: I, assignStartTime: x, validateTime: M, disabledTimesConfig: V } = IE(e, u, s, a), B = W(
    () => (Te) => d.value[Te] ? d.value[Te].month : 0
  ), F = W(
    () => (Te) => d.value[Te] ? d.value[Te].year : 0
  ), H = (Te) => !w.value.keepViewOnOffsetClick || Te ? !0 : !o.value, K = (Te, ze, ft, ot = !1) => {
    var Ke, st;
    H(ot) && (d.value[Te] || (d.value[Te] = { month: 0, year: 0 }), d.value[Te].month = XC(ze) ? (Ke = d.value[Te]) == null ? void 0 : Ke.month : ze, d.value[Te].year = XC(ft) ? (st = d.value[Te]) == null ? void 0 : st.year : ft);
  }, Z = () => {
    e.autoApply && t("select-date");
  }, ue = () => {
    y.value && x(y.value);
  };
  an(() => {
    e.shadow || (s.value || (ne(), ue()), q(!0), e.focusStartDate && e.startDate && ne());
  });
  const Y = W(() => {
    var Te;
    return (Te = e.flow) != null && Te.length && !e.partialFlow ? e.flowStep === e.flow.length : !0;
  }), U = () => {
    e.autoApply && Y.value && t("auto-apply", e.partialFlow ? e.flowStep !== e.flow.length : !1);
  }, q = (Te = !1) => {
    if (s.value)
      return Array.isArray(s.value) ? (r.value = s.value, ge(Te)) : he(s.value, Te);
    if (h.value.count && Te && !e.startDate)
      return ee(ut(), Te);
  }, oe = () => Array.isArray(s.value) && p.value.enabled ? fn(s.value[0]) === fn(s.value[1] ?? s.value[0]) : !1, ee = (Te = /* @__PURE__ */ new Date(), ze = !1) => {
    if ((!h.value.count || !h.value.static || ze) && K(0, fn(Te), jt(Te)), h.value.count && (!s.value || oe() || !h.value.solo) && (!h.value.solo || ze))
      for (let ft = 1; ft < h.value.count; ft++) {
        const ot = Mn(ut(), { month: B.value(ft - 1), year: F.value(ft - 1) }), Ke = $I(ot, { months: 1 });
        d.value[ft] = { month: fn(Ke), year: jt(Ke) };
      }
  }, he = (Te, ze) => {
    ee(Te), I("hours", rs(Te)), I("minutes", Gs(Te)), I("seconds", Du(Te)), h.value.count && ze && ce();
  }, ve = (Te) => {
    if (h.value.count) {
      if (h.value.solo) return 0;
      const ze = fn(Te[0]), ft = fn(Te[1]);
      return Math.abs(ft - ze) < h.value.count ? 0 : 1;
    }
    return 1;
  }, pe = (Te, ze) => {
    Te[1] && p.value.showLastInRange ? ee(Te[ve(Te)], ze) : ee(Te[0], ze);
    const ft = (ot, Ke) => [
      ot(Te[0]),
      Te[1] ? ot(Te[1]) : u[Ke][1]
    ];
    I("hours", ft(rs, "hours")), I("minutes", ft(Gs, "minutes")), I("seconds", ft(Du, "seconds"));
  }, z = (Te, ze) => {
    if ((p.value.enabled || e.weekPicker) && !g.value.enabled)
      return pe(Te, ze);
    if (g.value.enabled && ze) {
      const ft = Te[Te.length - 1];
      return he(ft, ze);
    }
  }, ge = (Te) => {
    const ze = s.value;
    z(ze, Te), h.value.count && h.value.solo && ce();
  }, Ve = (Te, ze) => {
    const ft = Mn(ut(), { month: B.value(ze), year: F.value(ze) }), ot = Te < 0 ? Ki(ft, 1) : Vu(ft, 1);
    k(fn(ot), jt(ot), Te < 0, e.preventMinMaxNavigation) && (K(ze, fn(ot), jt(ot)), t("update-month-year", { instance: ze, month: fn(ot), year: jt(ot) }), h.value.count && !h.value.solo && Ne(ze), n());
  }, Ne = (Te) => {
    for (let ze = Te - 1; ze >= 0; ze--) {
      const ft = Vu(Mn(ut(), { month: B.value(ze + 1), year: F.value(ze + 1) }), 1);
      K(ze, fn(ft), jt(ft));
    }
    for (let ze = Te + 1; ze <= h.value.count - 1; ze++) {
      const ft = Ki(Mn(ut(), { month: B.value(ze - 1), year: F.value(ze - 1) }), 1);
      K(ze, fn(ft), jt(ft));
    }
  }, ce = () => {
    if (Array.isArray(s.value) && s.value.length === 2) {
      const Te = ut(
        ut(s.value[1] ? s.value[1] : Ki(s.value[0], 1))
      ), [ze, ft] = [fn(s.value[0]), jt(s.value[0])], [ot, Ke] = [fn(s.value[1]), jt(s.value[1])];
      (ze !== ot || ze === ot && ft !== Ke) && h.value.solo && K(1, fn(Te), jt(Te));
    } else s.value && !Array.isArray(s.value) && (K(0, fn(s.value), jt(s.value)), ee(ut()));
  }, ne = () => {
    e.startDate && (K(0, fn(ut(e.startDate)), jt(ut(e.startDate))), h.value.count && Ne(0));
  }, Q = (Te, ze) => {
    if (e.monthChangeOnScroll) {
      const ft = (/* @__PURE__ */ new Date()).getTime() - i.value.getTime(), ot = Math.abs(Te.deltaY);
      let Ke = 500;
      ot > 1 && (Ke = 100), ot > 100 && (Ke = 0), ft > Ke && (i.value = /* @__PURE__ */ new Date(), Ve(e.monthChangeOnScroll !== "inverse" ? -Te.deltaY : Te.deltaY, ze));
    }
  }, le = (Te, ze, ft = !1) => {
    e.monthChangeOnArrows && e.vertical === ft && G(Te, ze);
  }, G = (Te, ze) => {
    Ve(Te === "right" ? -1 : 1, ze);
  }, Ce = (Te) => {
    if (v.value.markers)
      return z_(Te.value, v.value.markers);
  }, Ie = (Te, ze) => {
    switch (e.sixWeeks === !0 ? "append" : e.sixWeeks) {
      case "prepend":
        return [!0, !1];
      case "center":
        return [Te == 0, !0];
      case "fair":
        return [Te == 0 || ze > Te, !0];
      case "append":
        return [!1, !1];
      default:
        return [!1, !1];
    }
  }, ie = (Te, ze, ft, ot) => {
    if (e.sixWeeks && Te.length < 6) {
      const Ke = 6 - Te.length, st = (ze.getDay() + 7 - ot) % 7, vt = 6 - (ft.getDay() + 7 - ot) % 7, [Ea, qa] = Ie(st, vt);
      for (let _r = 1; _r <= Ke; _r++)
        if (qa ? !!(_r % 2) == Ea : Ea) {
          const Ka = Te[0].days[0], to = we(Ei(Ka.value, -7), fn(ze));
          Te.unshift({ days: to });
        } else {
          const Ka = Te[Te.length - 1], to = Ka.days[Ka.days.length - 1], sl = we(Ei(to.value, 1), fn(ze));
          Te.push({ days: sl });
        }
    }
    return Te;
  }, we = (Te, ze) => {
    const ft = ut(Te), ot = [];
    for (let Ke = 0; Ke < 7; Ke++) {
      const st = Ei(ft, Ke), vt = fn(st) !== ze;
      ot.push({
        text: e.hideOffsetDates && vt ? "" : st.getDate(),
        value: st,
        current: !vt,
        classData: {}
      });
    }
    return ot;
  }, Ee = (Te, ze) => {
    const ft = [], ot = new Date(ze, Te), Ke = new Date(ze, Te + 1, 0), st = e.weekStart, vt = Ji(ot, { weekStartsOn: st }), Ea = (qa) => {
      const _r = we(qa, Te);
      if (ft.push({ days: _r }), !ft[ft.length - 1].days.some(
        (Ka) => mn(or(Ka.value), or(Ke))
      )) {
        const Ka = Ei(qa, 7);
        Ea(Ka);
      }
    };
    return Ea(vt), ie(ft, ot, Ke, st);
  }, Pe = (Te) => {
    const ze = $s(ut(Te.value), u.hours, u.minutes, it());
    t("date-update", ze), g.value.enabled ? I0(ze, s, g.value.limit) : s.value = ze, a(), Dt().then(() => {
      U();
    });
  }, Xe = (Te) => p.value.noDisabledRange ? pE(r.value[0], Te).some((ze) => A(ze)) : !1, _e = () => {
    r.value = s.value ? s.value.slice() : [], r.value.length === 2 && !(p.value.fixedStart || p.value.fixedEnd) && (r.value = []);
  }, qe = (Te, ze) => {
    const ft = [
      ut(Te.value),
      Ei(ut(Te.value), +p.value.autoRange)
    ];
    C(ft) ? (ze && Ze(Te.value), r.value = ft) : t("invalid-date", Te.value);
  }, Ze = (Te) => {
    const ze = fn(ut(Te)), ft = jt(ut(Te));
    if (K(0, ze, ft), h.value.count > 0)
      for (let ot = 1; ot < h.value.count; ot++) {
        const Ke = Lq(
          Mn(ut(Te), { year: F.value(ot - 1), month: B.value(ot - 1) })
        );
        K(ot, Ke.month, Ke.year);
      }
  }, _t = (Te) => {
    if (Xe(Te.value) || !D(Te.value, s.value, p.value.fixedStart ? 0 : 1))
      return t("invalid-date", Te.value);
    r.value = AE(ut(Te.value), s, t, p);
  }, It = (Te, ze) => {
    if (_e(), p.value.autoRange) return qe(Te, ze);
    if (p.value.fixedStart || p.value.fixedEnd) return _t(Te);
    r.value[0] ? D(ut(Te.value), s.value) && !Xe(Te.value) ? Sa(ut(Te.value), ut(r.value[0])) ? (r.value.unshift(ut(Te.value)), t("range-end", r.value[0])) : (r.value[1] = ut(Te.value), t("range-end", r.value[1])) : (e.autoApply && t("auto-apply-invalid", Te.value), t("invalid-date", Te.value)) : (r.value[0] = ut(Te.value), t("range-start", r.value[0]));
  }, it = (Te = !0) => e.enableSeconds ? Array.isArray(u.seconds) ? Te ? u.seconds[0] : u.seconds[1] : u.seconds : 0, Bt = (Te) => {
    r.value[Te] = $s(
      r.value[Te],
      u.hours[Te],
      u.minutes[Te],
      it(Te !== 1)
    );
  }, tn = () => {
    var Te, ze;
    r.value[0] && r.value[1] && +((Te = r.value) == null ? void 0 : Te[0]) > +((ze = r.value) == null ? void 0 : ze[1]) && (r.value.reverse(), t("range-start", r.value[0]), t("range-end", r.value[1]));
  }, Kn = () => {
    r.value.length && (r.value[0] && !r.value[1] ? Bt(0) : (Bt(0), Bt(1), a()), tn(), s.value = r.value.slice(), kv(r.value, t, e.autoApply, e.modelAuto));
  }, oa = (Te, ze = !1) => {
    if (A(Te.value) || !Te.current && e.hideOffsetDates) return t("invalid-date", Te.value);
    if (o.value = JSON.parse(JSON.stringify(Te)), !p.value.enabled) return Pe(Te);
    rA(u.hours) && rA(u.minutes) && !g.value.enabled && (It(Te, ze), Kn());
  }, $a = (Te, ze) => {
    var ft;
    K(Te, ze.month, ze.year, !0), h.value.count && !h.value.solo && Ne(Te), t("update-month-year", { instance: Te, month: ze.month, year: ze.year }), n(h.value.solo ? Te : void 0);
    const ot = (ft = e.flow) != null && ft.length ? e.flow[e.flowStep] : void 0;
    !ze.fromNav && (ot === br.month || ot === br.year) && a();
  }, ba = (Te, ze) => {
    CE({
      value: Te,
      modelValue: s,
      range: p.value.enabled,
      timezone: ze ? void 0 : b.value.timezone
    }), Z(), e.multiCalendars && Dt().then(() => q(!0));
  }, jn = () => {
    const Te = S0(ut(), b.value);
    !p.value.enabled && !g.value.enabled ? s.value = Te : s.value && Array.isArray(s.value) && s.value[0] ? g.value.enabled ? s.value = [...s.value, Te] : s.value = Sa(Te, s.value[0]) ? [Te, s.value[0]] : [s.value[0], Te] : s.value = [Te], Z();
  }, Rn = () => {
    if (Array.isArray(s.value))
      if (g.value.enabled) {
        const Te = er();
        s.value[s.value.length - 1] = O(Te);
      } else
        s.value = s.value.map((Te, ze) => Te && O(Te, ze));
    else
      s.value = O(s.value);
    t("time-update");
  }, er = () => Array.isArray(s.value) && s.value.length ? s.value[s.value.length - 1] : null;
  return {
    calendars: d,
    modelValue: s,
    month: B,
    year: F,
    time: u,
    disabledTimesConfig: V,
    today: f,
    validateTime: M,
    getCalendarDays: Ee,
    getMarker: Ce,
    handleScroll: Q,
    handleSwipe: G,
    handleArrow: le,
    selectDate: oa,
    updateMonthYear: $a,
    presetDate: ba,
    selectCurrentDate: jn,
    updateTime: (Te, ze = !0, ft = !1) => {
      P(Te, ze, ft, Rn);
    },
    assignMonthAndYear: ee,
    setStartTime: ue
  };
}, G6 = { key: 0 }, Q6 = /* @__PURE__ */ za({
  __name: "DatePicker",
  props: {
    ...Zi
  },
  emits: [
    "tooltip-open",
    "tooltip-close",
    "mount",
    "update:internal-model-value",
    "update-flow-step",
    "reset-flow",
    "auto-apply",
    "focus-menu",
    "select-date",
    "range-start",
    "range-end",
    "invalid-fixed-range",
    "time-update",
    "am-pm-change",
    "time-picker-open",
    "time-picker-close",
    "recalculate-position",
    "update-month-year",
    "auto-apply-invalid",
    "date-update",
    "invalid-date",
    "overlay-toggle"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      calendars: i,
      month: o,
      year: l,
      modelValue: s,
      time: d,
      disabledTimesConfig: u,
      today: f,
      validateTime: h,
      getCalendarDays: y,
      getMarker: p,
      handleArrow: w,
      handleScroll: b,
      handleSwipe: v,
      selectDate: g,
      updateMonthYear: k,
      presetDate: A,
      selectCurrentDate: C,
      updateTime: D,
      assignMonthAndYear: P,
      setStartTime: O
    } = Y6(r, a, oe, ee), I = uc(), { setHoverDate: x, getDayClassData: M, clearHoverDate: V } = mH(s, r), { defaultedMultiCalendars: B } = fa(r), F = be([]), H = be([]), K = be(null), Z = di(I, "calendar"), ue = di(I, "monthYear"), Y = di(I, "timePicker"), U = (Q) => {
      r.shadow || a("mount", Q);
    };
    tt(
      i,
      () => {
        r.shadow || setTimeout(() => {
          a("recalculate-position");
        }, 0);
      },
      { deep: !0 }
    ), tt(
      B,
      (Q, le) => {
        Q.count - le.count > 0 && P();
      },
      { deep: !0 }
    );
    const q = W(() => (Q) => y(o.value(Q), l.value(Q)).map((le) => ({
      ...le,
      days: le.days.map((G) => (G.marker = p(G), G.classData = M(G), G))
    })));
    function oe(Q) {
      var le;
      Q || Q === 0 ? (le = H.value[Q]) == null || le.triggerTransition(o.value(Q), l.value(Q)) : H.value.forEach((G, Ce) => G.triggerTransition(o.value(Ce), l.value(Ce)));
    }
    function ee() {
      a("update-flow-step");
    }
    const he = (Q, le = !1) => {
      g(Q, le), r.spaceConfirm && a("select-date");
    }, ve = (Q, le, G = 0) => {
      var Ce;
      (Ce = F.value[G]) == null || Ce.toggleMonthPicker(Q, le);
    }, pe = (Q, le, G = 0) => {
      var Ce;
      (Ce = F.value[G]) == null || Ce.toggleYearPicker(Q, le);
    }, z = (Q, le, G) => {
      var Ce;
      (Ce = K.value) == null || Ce.toggleTimePicker(Q, le, G);
    }, ge = (Q, le) => {
      var G;
      if (!r.range) {
        const Ce = s.value ? s.value : f, Ie = le ? new Date(le) : Ce, ie = Q ? Ji(Ie, { weekStartsOn: 1 }) : YI(Ie, { weekStartsOn: 1 });
        g({
          value: ie,
          current: fn(Ie) === o.value(0),
          text: "",
          classData: {}
        }), (G = document.getElementById(xb(ie))) == null || G.focus();
      }
    }, Ve = (Q) => {
      var le;
      (le = F.value[0]) == null || le.handleMonthYearChange(Q, !0);
    }, Ne = (Q) => {
      k(0, { month: o.value(0), year: l.value(0) + (Q ? 1 : -1), fromNav: !0 });
    }, ce = (Q, le) => {
      Q === br.time && a(`time-picker-${le ? "open" : "close"}`), a("overlay-toggle", { open: le, overlay: Q });
    }, ne = (Q) => {
      a("overlay-toggle", { open: !1, overlay: Q }), a("focus-menu");
    };
    return t({
      clearHoverDate: V,
      presetDate: A,
      selectCurrentDate: C,
      toggleMonthPicker: ve,
      toggleYearPicker: pe,
      toggleTimePicker: z,
      handleArrow: w,
      updateMonthYear: k,
      getSidebarProps: () => ({
        modelValue: s,
        month: o,
        year: l,
        time: d,
        updateTime: D,
        updateMonthYear: k,
        selectDate: g,
        presetDate: A
      }),
      changeMonth: Ve,
      changeYear: Ne,
      selectWeekDate: ge,
      setStartTime: O
    }), (Q, le) => (te(), Oe(Ge, null, [
      _(wv, {
        "multi-calendars": fe(B).count,
        collapse: Q.collapse,
        "is-mobile": Q.isMobile
      }, {
        default: E(({ instance: G, index: Ce }) => [
          Q.disableMonthYearSelect ? ke("", !0) : (te(), Le(U6, Fe({
            key: 0,
            ref: (Ie) => {
              Ie && (F.value[Ce] = Ie);
            },
            months: fe(cE)(Q.formatLocale, Q.locale, Q.monthNameFormat),
            years: fe(C0)(Q.yearRange, Q.locale, Q.reverseYears),
            month: fe(o)(G),
            year: fe(l)(G),
            instance: G
          }, Q.$props, {
            onMount: le[0] || (le[0] = (Ie) => U(fe(Yl).header)),
            onResetFlow: le[1] || (le[1] = (Ie) => Q.$emit("reset-flow")),
            onUpdateMonthYear: (Ie) => fe(k)(G, Ie),
            onOverlayClosed: ne,
            onOverlayOpened: le[2] || (le[2] = (Ie) => Q.$emit("overlay-toggle", { open: !0, overlay: Ie }))
          }), mr({ _: 2 }, [
            ln(fe(ue), (Ie, ie) => ({
              name: Ie,
              fn: E((we) => [
                bt(Q.$slots, Ie, ea(Aa(we)))
              ])
            }))
          ]), 1040, ["months", "years", "month", "year", "instance", "onUpdateMonthYear"])),
          _(j6, Fe({
            ref: (Ie) => {
              Ie && (H.value[Ce] = Ie);
            },
            "mapped-dates": q.value(G),
            month: fe(o)(G),
            year: fe(l)(G),
            instance: G
          }, Q.$props, {
            onSelectDate: (Ie) => fe(g)(Ie, G !== 1),
            onHandleSpace: (Ie) => he(Ie, G !== 1),
            onSetHoverDate: le[3] || (le[3] = (Ie) => fe(x)(Ie)),
            onHandleScroll: (Ie) => fe(b)(Ie, G),
            onHandleSwipe: (Ie) => fe(v)(Ie, G),
            onMount: le[4] || (le[4] = (Ie) => U(fe(Yl).calendar)),
            onResetFlow: le[5] || (le[5] = (Ie) => Q.$emit("reset-flow")),
            onTooltipOpen: le[6] || (le[6] = (Ie) => Q.$emit("tooltip-open", Ie)),
            onTooltipClose: le[7] || (le[7] = (Ie) => Q.$emit("tooltip-close", Ie))
          }), mr({ _: 2 }, [
            ln(fe(Z), (Ie, ie) => ({
              name: Ie,
              fn: E((we) => [
                bt(Q.$slots, Ie, ea(Aa({ ...we })))
              ])
            }))
          ]), 1040, ["mapped-dates", "month", "year", "instance", "onSelectDate", "onHandleSpace", "onHandleScroll", "onHandleSwipe"])
        ]),
        _: 3
      }, 8, ["multi-calendars", "collapse", "is-mobile"]),
      Q.enableTimePicker ? (te(), Oe("div", G6, [
        Q.$slots["time-picker"] ? bt(Q.$slots, "time-picker", ea(Fe({ key: 0 }, { time: fe(d), updateTime: fe(D) }))) : (te(), Le(TE, Fe({
          key: 1,
          ref_key: "timePickerRef",
          ref: K
        }, Q.$props, {
          hours: fe(d).hours,
          minutes: fe(d).minutes,
          seconds: fe(d).seconds,
          "internal-model-value": Q.internalModelValue,
          "disabled-times-config": fe(u),
          "validate-time": fe(h),
          onMount: le[8] || (le[8] = (G) => U(fe(Yl).timePicker)),
          "onUpdate:hours": le[9] || (le[9] = (G) => fe(D)(G)),
          "onUpdate:minutes": le[10] || (le[10] = (G) => fe(D)(G, !1)),
          "onUpdate:seconds": le[11] || (le[11] = (G) => fe(D)(G, !1, !0)),
          onResetFlow: le[12] || (le[12] = (G) => Q.$emit("reset-flow")),
          onOverlayClosed: le[13] || (le[13] = (G) => ce(G, !1)),
          onOverlayOpened: le[14] || (le[14] = (G) => ce(G, !0)),
          onAmPmChange: le[15] || (le[15] = (G) => Q.$emit("am-pm-change", G))
        }), mr({ _: 2 }, [
          ln(fe(Y), (G, Ce) => ({
            name: G,
            fn: E((Ie) => [
              bt(Q.$slots, G, ea(Aa(Ie)))
            ])
          }))
        ]), 1040, ["hours", "minutes", "seconds", "internal-model-value", "disabled-times-config", "validate-time"]))
      ])) : ke("", !0)
    ], 64));
  }
}), J6 = (e, t) => {
  const n = be(), {
    defaultedMultiCalendars: a,
    defaultedConfig: r,
    defaultedHighlight: i,
    defaultedRange: o,
    propDates: l,
    defaultedFilters: s,
    defaultedMultiDates: d
  } = fa(e), { modelValue: u, year: f, month: h, calendars: y } = tm(e, t), { isDisabled: p } = rl(e), { selectYear: w, groupedYears: b, showYearPicker: v, isDisabled: g, toggleYearPicker: k, handleYearSelect: A, handleYear: C } = xE({
    modelValue: u,
    multiCalendars: a,
    range: o,
    highlight: i,
    calendars: y,
    propDates: l,
    month: h,
    year: f,
    filters: s,
    props: e,
    emit: t
  }), D = (H, K) => [H, K].map((Z) => ko(Z, "MMMM", { locale: e.formatLocale })).join("-"), P = W(() => (H) => u.value ? Array.isArray(u.value) ? u.value.some((K) => GC(H, K)) : GC(u.value, H) : !1), O = (H) => {
    if (o.value.enabled) {
      if (Array.isArray(u.value)) {
        const K = mn(H, u.value[0]) || mn(H, u.value[1]);
        return Of(u.value, n.value, H) && !K;
      }
      return !1;
    }
    return !1;
  }, I = (H, K) => H.quarter === HC(K) && H.year === jt(K), x = (H) => typeof i.value == "function" ? i.value({ quarter: HC(H), year: jt(H) }) : !!i.value.quarters.find((K) => I(K, H)), M = W(() => (H) => {
    const K = Mn(/* @__PURE__ */ new Date(), { year: f.value(H) });
    return x5({
      start: Ef(K),
      end: jI(K)
    }).map((Z) => {
      const ue = Ul(Z), Y = zC(Z), U = p(Z), q = O(ue), oe = x(ue);
      return {
        text: D(ue, Y),
        value: ue,
        active: P.value(ue),
        highlighted: oe,
        disabled: U,
        isBetween: q
      };
    });
  }), V = (H) => {
    I0(H, u, d.value.limit), t("auto-apply", !0);
  }, B = (H) => {
    u.value = E0(u, H, t), kv(u.value, t, e.autoApply, e.modelAuto);
  }, F = (H) => {
    u.value = H, t("auto-apply");
  };
  return {
    defaultedConfig: r,
    defaultedMultiCalendars: a,
    groupedYears: b,
    year: f,
    isDisabled: g,
    quarters: M,
    showYearPicker: v,
    modelValue: u,
    setHoverDate: (H) => {
      n.value = H;
    },
    selectYear: w,
    selectQuarter: (H, K, Z) => {
      if (!Z)
        return y.value[K].month = fn(zC(H)), d.value.enabled ? V(H) : o.value.enabled ? B(H) : F(H);
    },
    toggleYearPicker: k,
    handleYearSelect: A,
    handleYear: C
  };
}, X6 = { class: "dp--quarter-items" }, Z6 = ["data-test-id", "disabled", "onClick", "onMouseover"], eH = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "QuarterPicker",
  props: {
    ...Zi
  },
  emits: [
    "update:internal-model-value",
    "reset-flow",
    "overlay-closed",
    "auto-apply",
    "range-start",
    "range-end",
    "overlay-toggle",
    "update-month-year"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = uc(), o = di(i, "yearMode"), {
      defaultedMultiCalendars: l,
      defaultedConfig: s,
      groupedYears: d,
      year: u,
      isDisabled: f,
      quarters: h,
      modelValue: y,
      showYearPicker: p,
      setHoverDate: w,
      selectQuarter: b,
      toggleYearPicker: v,
      handleYearSelect: g,
      handleYear: k
    } = J6(r, a);
    return t({ getSidebarProps: () => ({
      modelValue: y,
      year: u,
      selectQuarter: b,
      handleYearSelect: g,
      handleYear: k
    }) }), (A, C) => (te(), Le(wv, {
      "multi-calendars": fe(l).count,
      collapse: A.collapse,
      stretch: "",
      "is-mobile": A.isMobile
    }, {
      default: E(({ instance: D }) => [
        T("div", {
          class: "dp-quarter-picker-wrap",
          style: Je({ minHeight: `${fe(s).modeHeight}px` })
        }, [
          A.$slots["top-extra"] ? bt(A.$slots, "top-extra", {
            key: 0,
            value: A.internalModelValue
          }) : ke("", !0),
          T("div", null, [
            _(SE, Fe(A.$props, {
              items: fe(d)(D),
              instance: D,
              "show-year-picker": fe(p)[D],
              year: fe(u)(D),
              "is-disabled": (P) => fe(f)(D, P),
              onHandleYear: (P) => fe(k)(D, P),
              onYearSelect: (P) => fe(g)(P, D),
              onToggleYearPicker: (P) => fe(v)(D, P?.flow, P?.show)
            }), mr({ _: 2 }, [
              ln(fe(o), (P, O) => ({
                name: P,
                fn: E((I) => [
                  bt(A.$slots, P, ea(Aa(I)))
                ])
              }))
            ]), 1040, ["items", "instance", "show-year-picker", "year", "is-disabled", "onHandleYear", "onYearSelect", "onToggleYearPicker"])
          ]),
          T("div", X6, [
            (te(!0), Oe(Ge, null, ln(fe(h)(D), (P, O) => (te(), Oe("div", { key: O }, [
              T("button", {
                type: "button",
                class: Ae(["dp--qr-btn", {
                  "dp--qr-btn-active": P.active,
                  "dp--qr-btn-between": P.isBetween,
                  "dp--qr-btn-disabled": P.disabled,
                  "dp--highlighted": P.highlighted
                }]),
                "data-test-id": P.value,
                disabled: P.disabled,
                onClick: (I) => fe(b)(P.value, D, P.disabled),
                onMouseover: (I) => fe(w)(P.value)
              }, [
                A.$slots.quarter ? bt(A.$slots, "quarter", {
                  key: 0,
                  value: P.value,
                  text: P.text
                }) : (te(), Oe(Ge, { key: 1 }, [
                  ae(j(P.text), 1)
                ], 64))
              ], 42, Z6)
            ]))), 128))
          ])
        ], 4)
      ]),
      _: 3
    }, 8, ["multi-calendars", "collapse", "is-mobile"]));
  }
}), EE = (e, t) => {
  const n = be(0);
  an(() => {
    a(), window.addEventListener("resize", a, { passive: !0 });
  }), _i(() => {
    window.removeEventListener("resize", a);
  });
  const a = () => {
    n.value = window.document.documentElement.clientWidth;
  };
  return {
    isMobile: W(
      () => n.value <= e.value.mobileBreakpoint && !t ? !0 : void 0
    )
  };
}, tH = ["id", "tabindex", "role", "aria-label"], nH = {
  key: 0,
  class: "dp--menu-load-container"
}, aH = {
  key: 1,
  class: "dp--menu-header"
}, rH = ["data-dp-mobile"], iH = {
  key: 0,
  class: "dp__sidebar_left"
}, oH = ["data-dp-mobile"], sH = ["data-test-id", "data-dp-mobile", "onClick", "onKeydown"], lH = {
  key: 2,
  class: "dp__sidebar_right"
}, cH = {
  key: 3,
  class: "dp__action_extra"
}, iA = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerMenu",
  props: {
    ...bv,
    shadow: { type: Boolean, default: !1 },
    openOnTop: { type: Boolean, default: !1 },
    internalModelValue: { type: [Date, Array], default: null },
    noOverlayFocus: { type: Boolean, default: !1 },
    collapse: { type: Boolean, default: !1 },
    getInputRect: { type: Function, default: () => ({}) },
    isTextInputDate: { type: Boolean, default: !1 }
  },
  emits: [
    "close-picker",
    "select-date",
    "auto-apply",
    "time-update",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "update:internal-model-value",
    "recalculate-position",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "auto-apply-invalid",
    "date-update",
    "invalid-date",
    "overlay-toggle",
    "menu-blur"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = be(null), o = W(() => {
      const { openOnTop: _e, ...qe } = r;
      return {
        ...qe,
        isMobile: b.value,
        flowStep: B.value,
        menuWrapRef: i.value
      };
    }), { setMenuFocused: l, setShiftKey: s, control: d } = kE(), u = uc(), { defaultedTextInput: f, defaultedInline: h, defaultedConfig: y, defaultedUI: p, handleEventPropagation: w } = fa(r), { isMobile: b } = EE(y, r.shadow), v = be(null), g = be(0), k = be(null), A = be(!1), C = be(null), D = be(!1), P = (_e) => {
      D.value = !0, y.value.allowPreventDefault && _e.preventDefault(), Us(_e, y.value, !0);
    };
    an(() => {
      if (!r.shadow) {
        A.value = !0, O(), window.addEventListener("resize", O);
        const _e = Ha(i);
        _e && !f.value.enabled && !h.value.enabled && (l(!0), U()), _e && (_e.addEventListener("pointerdown", P), _e.addEventListener("mousedown", P));
      }
      document.addEventListener("mousedown", Xe);
    }), _i(() => {
      window.removeEventListener("resize", O), document.removeEventListener("mousedown", Xe);
      const _e = Ha(i);
      _e && (_e.removeEventListener("pointerdown", P), _e.removeEventListener("mousedown", P));
    });
    const O = () => {
      const _e = Ha(k);
      _e && (g.value = _e.getBoundingClientRect().width);
    }, { arrowRight: I, arrowLeft: x, arrowDown: M, arrowUp: V } = al(), { flowStep: B, updateFlowStep: F, childMount: H, resetFlow: K, handleFlow: Z } = hH(r, a, C), ue = W(() => r.monthPicker ? g6 : r.yearPicker ? b6 : r.timePicker ? V6 : r.quarterPicker ? eH : Q6), Y = W(() => {
      var _e;
      if (y.value.arrowLeft) return y.value.arrowLeft;
      const qe = (_e = i.value) == null ? void 0 : _e.getBoundingClientRect(), Ze = r.getInputRect();
      return Ze?.width < g?.value && Ze?.left <= (qe?.left ?? 0) ? `${Ze?.width / 2}px` : Ze?.right >= (qe?.right ?? 0) && Ze?.width < g?.value ? `${g?.value - Ze?.width / 2}px` : "50%";
    }), U = () => {
      const _e = Ha(i);
      _e && _e.focus({ preventScroll: !0 });
    }, q = W(() => {
      var _e;
      return ((_e = C.value) == null ? void 0 : _e.getSidebarProps()) || {};
    }), oe = () => {
      r.openOnTop && a("recalculate-position");
    }, ee = di(u, "action"), he = W(() => r.monthPicker || r.yearPicker ? di(u, "monthYear") : r.timePicker ? di(u, "timePicker") : di(u, "shared")), ve = W(() => r.openOnTop ? "dp__arrow_bottom" : "dp__arrow_top"), pe = W(() => ({
      dp__menu_disabled: r.disabled,
      dp__menu_readonly: r.readonly,
      "dp-menu-loading": r.loading
    })), z = W(
      () => ({
        dp__menu: !0,
        dp__menu_index: !h.value.enabled,
        dp__relative: h.value.enabled,
        ...p.value.menu ?? {}
      })
    ), ge = (_e) => {
      Us(_e, y.value, !0);
    }, Ve = (_e) => {
      r.escClose && (a("close-picker"), w(_e));
    }, Ne = (_e) => {
      if (r.arrowNavigation) {
        if (_e === Mr.up) return V();
        if (_e === Mr.down) return M();
        if (_e === Mr.left) return x();
        if (_e === Mr.right) return I();
      } else _e === Mr.left || _e === Mr.up ? G("handleArrow", Mr.left, 0, _e === Mr.up) : G("handleArrow", Mr.right, 0, _e === Mr.down);
    }, ce = (_e) => {
      s(_e.shiftKey), !r.disableMonthYearSelect && _e.code === Jn.tab && _e.target.classList.contains("dp__menu") && d.value.shiftKeyInMenu && (_e.preventDefault(), Us(_e, y.value, !0), a("close-picker"));
    }, ne = () => {
      U(), a("time-picker-close");
    }, Q = (_e) => {
      var qe, Ze, _t;
      (qe = C.value) == null || qe.toggleTimePicker(!1, !1), (Ze = C.value) == null || Ze.toggleMonthPicker(!1, !1, _e), (_t = C.value) == null || _t.toggleYearPicker(!1, !1, _e);
    }, le = (_e, qe = 0) => {
      var Ze, _t, It;
      return _e === "month" ? (Ze = C.value) == null ? void 0 : Ze.toggleMonthPicker(!1, !0, qe) : _e === "year" ? (_t = C.value) == null ? void 0 : _t.toggleYearPicker(!1, !0, qe) : _e === "time" ? (It = C.value) == null ? void 0 : It.toggleTimePicker(!0, !1) : Q(qe);
    }, G = (_e, ...qe) => {
      var Ze, _t;
      (Ze = C.value) != null && Ze[_e] && ((_t = C.value) == null || _t[_e](...qe));
    }, Ce = () => {
      G("selectCurrentDate");
    }, Ie = (_e, qe) => {
      G("presetDate", ji(_e), qe);
    }, ie = () => {
      G("clearHoverDate");
    }, we = (_e, qe) => {
      G("updateMonthYear", _e, qe);
    }, Ee = (_e, qe) => {
      _e.preventDefault(), Ne(qe);
    }, Pe = (_e) => {
      var qe, Ze, _t;
      if (ce(_e), _e.key === Jn.home || _e.key === Jn.end)
        return G(
          "selectWeekDate",
          _e.key === Jn.home,
          _e.target.getAttribute("id")
        );
      switch ((_e.key === Jn.pageUp || _e.key === Jn.pageDown) && (_e.shiftKey ? (G("changeYear", _e.key === Jn.pageUp), (qe = Cb(i.value, "overlay-year")) == null || qe.focus()) : (G("changeMonth", _e.key === Jn.pageUp), (Ze = Cb(i.value, _e.key === Jn.pageUp ? "action-prev" : "action-next")) == null || Ze.focus()), _e.target.getAttribute("id") && ((_t = i.value) == null || _t.focus({ preventScroll: !0 }))), _e.key) {
        case Jn.esc:
          return Ve(_e);
        case Jn.arrowLeft:
          return Ee(_e, Mr.left);
        case Jn.arrowRight:
          return Ee(_e, Mr.right);
        case Jn.arrowUp:
          return Ee(_e, Mr.up);
        case Jn.arrowDown:
          return Ee(_e, Mr.down);
        default:
          return;
      }
    }, Xe = (_e) => {
      var qe;
      h.value.enabled && !h.value.input && !((qe = i.value) != null && qe.contains(_e.target)) && D.value && (D.value = !1, a("menu-blur"));
    };
    return t({
      updateMonthYear: we,
      switchView: le,
      handleFlow: Z,
      onValueCleared: () => {
        var _e, qe;
        (qe = (_e = C.value) == null ? void 0 : _e.setStartTime) == null || qe.call(_e);
      }
    }), (_e, qe) => {
      var Ze, _t, It;
      return te(), Oe("div", {
        id: _e.uid ? `dp-menu-${_e.uid}` : void 0,
        ref_key: "dpMenuRef",
        ref: i,
        tabindex: fe(h).enabled ? void 0 : "0",
        role: fe(h).enabled ? void 0 : "dialog",
        "aria-label": (Ze = _e.ariaLabels) == null ? void 0 : Ze.menu,
        class: Ae(z.value),
        style: Je({ "--dp-arrow-left": Y.value }),
        onMouseleave: ie,
        onClick: ge,
        onKeydown: Pe
      }, [
        (_e.disabled || _e.readonly) && fe(h).enabled || _e.loading ? (te(), Oe("div", {
          key: 0,
          class: Ae(pe.value)
        }, [
          _e.loading ? (te(), Oe("div", nH, qe[19] || (qe[19] = [
            T("span", { class: "dp--menu-loader" }, null, -1)
          ]))) : ke("", !0)
        ], 2)) : ke("", !0),
        _e.$slots["menu-header"] ? (te(), Oe("div", aH, [
          bt(_e.$slots, "menu-header")
        ])) : ke("", !0),
        !fe(h).enabled && !_e.teleportCenter ? (te(), Oe("div", {
          key: 2,
          class: Ae(ve.value)
        }, null, 2)) : ke("", !0),
        T("div", {
          ref_key: "innerMenuRef",
          ref: k,
          class: Ae({
            dp__menu_content_wrapper: ((_t = _e.presetDates) == null ? void 0 : _t.length) || !!_e.$slots["left-sidebar"] || !!_e.$slots["right-sidebar"],
            "dp--menu-content-wrapper-collapsed": e.collapse && (((It = _e.presetDates) == null ? void 0 : It.length) || !!_e.$slots["left-sidebar"] || !!_e.$slots["right-sidebar"])
          }),
          "data-dp-mobile": fe(b),
          style: Je({ "--dp-menu-width": `${g.value}px` })
        }, [
          _e.$slots["left-sidebar"] ? (te(), Oe("div", iH, [
            bt(_e.$slots, "left-sidebar", ea(Aa(q.value)))
          ])) : ke("", !0),
          _e.presetDates.length ? (te(), Oe("div", {
            key: 1,
            class: Ae({ "dp--preset-dates-collapsed": e.collapse, "dp--preset-dates": !0 }),
            "data-dp-mobile": fe(b)
          }, [
            (te(!0), Oe(Ge, null, ln(_e.presetDates, (it, Bt) => (te(), Oe(Ge, { key: Bt }, [
              it.slot ? bt(_e.$slots, it.slot, {
                key: 0,
                presetDate: Ie,
                label: it.label,
                value: it.value
              }) : (te(), Oe("button", {
                key: 1,
                type: "button",
                style: Je(it.style || {}),
                class: Ae(["dp__btn dp--preset-range", { "dp--preset-range-collapsed": e.collapse }]),
                "data-test-id": it.testId ?? void 0,
                "data-dp-mobile": fe(b),
                onClick: ua((tn) => Ie(it.value, it.noTz), ["prevent"]),
                onKeydown: (tn) => fe(Nr)(tn, () => Ie(it.value, it.noTz), !0)
              }, j(it.label), 47, sH))
            ], 64))), 128))
          ], 10, oH)) : ke("", !0),
          T("div", {
            ref_key: "calendarWrapperRef",
            ref: v,
            class: "dp__instance_calendar",
            role: "document"
          }, [
            (te(), Le(Ku(ue.value), Fe({
              ref_key: "dynCmpRef",
              ref: C
            }, o.value, {
              "flow-step": fe(B),
              onMount: fe(H),
              onUpdateFlowStep: fe(F),
              onResetFlow: fe(K),
              onFocusMenu: U,
              onSelectDate: qe[0] || (qe[0] = (it) => _e.$emit("select-date")),
              onDateUpdate: qe[1] || (qe[1] = (it) => _e.$emit("date-update", it)),
              onTooltipOpen: qe[2] || (qe[2] = (it) => _e.$emit("tooltip-open", it)),
              onTooltipClose: qe[3] || (qe[3] = (it) => _e.$emit("tooltip-close", it)),
              onAutoApply: qe[4] || (qe[4] = (it) => _e.$emit("auto-apply", it)),
              onRangeStart: qe[5] || (qe[5] = (it) => _e.$emit("range-start", it)),
              onRangeEnd: qe[6] || (qe[6] = (it) => _e.$emit("range-end", it)),
              onInvalidFixedRange: qe[7] || (qe[7] = (it) => _e.$emit("invalid-fixed-range", it)),
              onTimeUpdate: qe[8] || (qe[8] = (it) => _e.$emit("time-update")),
              onAmPmChange: qe[9] || (qe[9] = (it) => _e.$emit("am-pm-change", it)),
              onTimePickerOpen: qe[10] || (qe[10] = (it) => _e.$emit("time-picker-open", it)),
              onTimePickerClose: ne,
              onRecalculatePosition: oe,
              onUpdateMonthYear: qe[11] || (qe[11] = (it) => _e.$emit("update-month-year", it)),
              onAutoApplyInvalid: qe[12] || (qe[12] = (it) => _e.$emit("auto-apply-invalid", it)),
              onInvalidDate: qe[13] || (qe[13] = (it) => _e.$emit("invalid-date", it)),
              onOverlayToggle: qe[14] || (qe[14] = (it) => _e.$emit("overlay-toggle", it)),
              "onUpdate:internalModelValue": qe[15] || (qe[15] = (it) => _e.$emit("update:internal-model-value", it))
            }), mr({ _: 2 }, [
              ln(he.value, (it, Bt) => ({
                name: it,
                fn: E((tn) => [
                  bt(_e.$slots, it, ea(Aa({ ...tn })))
                ])
              }))
            ]), 1040, ["flow-step", "onMount", "onUpdateFlowStep", "onResetFlow"]))
          ], 512),
          _e.$slots["right-sidebar"] ? (te(), Oe("div", lH, [
            bt(_e.$slots, "right-sidebar", ea(Aa(q.value)))
          ])) : ke("", !0),
          _e.$slots["action-extra"] ? (te(), Oe("div", cH, [
            _e.$slots["action-extra"] ? bt(_e.$slots, "action-extra", {
              key: 0,
              selectCurrentDate: Ce
            }) : ke("", !0)
          ])) : ke("", !0)
        ], 14, rH),
        !_e.autoApply || fe(y).keepActionRow ? (te(), Le(c6, Fe({
          key: 3,
          "menu-mount": A.value
        }, o.value, {
          "calendar-width": g.value,
          onClosePicker: qe[16] || (qe[16] = (it) => _e.$emit("close-picker")),
          onSelectDate: qe[17] || (qe[17] = (it) => _e.$emit("select-date")),
          onInvalidSelect: qe[18] || (qe[18] = (it) => _e.$emit("invalid-select")),
          onSelectNow: Ce
        }), mr({ _: 2 }, [
          ln(fe(ee), (it, Bt) => ({
            name: it,
            fn: E((tn) => [
              bt(_e.$slots, it, ea(Aa({ ...tn })))
            ])
          }))
        ]), 1040, ["menu-mount", "calendar-width"])) : ke("", !0)
      ], 46, tH);
    };
  }
});
var ru = /* @__PURE__ */ ((e) => (e.center = "center", e.left = "left", e.right = "right", e))(ru || {});
const uH = ({
  menuRef: e,
  menuRefInner: t,
  inputRef: n,
  pickerWrapperRef: a,
  inline: r,
  emit: i,
  props: o,
  slots: l
}) => {
  const { defaultedConfig: s } = fa(o), d = be({}), u = be(!1), f = be({
    top: "0",
    left: "0"
  }), h = be(!1), y = ye(o, "teleportCenter");
  tt(y, () => {
    f.value = JSON.parse(JSON.stringify({})), C();
  });
  const p = (K) => {
    if (o.teleport) {
      const Z = K.getBoundingClientRect();
      return {
        left: Z.left + window.scrollX,
        top: Z.top + window.scrollY
      };
    }
    return { top: 0, left: 0 };
  }, w = (K, Z) => {
    f.value.left = `${K + Z - d.value.width}px`;
  }, b = (K) => {
    f.value.left = `${K}px`;
  }, v = (K, Z) => {
    o.position === ru.left && b(K), o.position === ru.right && w(K, Z), o.position === ru.center && (f.value.left = `${K + Z / 2 - d.value.width / 2}px`);
  }, g = (K) => {
    const { width: Z, height: ue } = K.getBoundingClientRect(), { top: Y, left: U } = p(K);
    return { top: +Y, left: +U, width: Z, height: ue };
  }, k = () => {
    f.value.left = "50%", f.value.top = "50%", f.value.transform = "translate(-50%, -50%)", f.value.position = "fixed", delete f.value.opacity;
  }, A = () => {
    const K = Ha(n);
    f.value = o.altPosition(K);
  }, C = (K = !0) => {
    var Z;
    if (!r.value.enabled) {
      if (y.value) return k();
      if (o.altPosition !== null) return A();
      if (K) {
        const ue = o.teleport ? (Z = t.value) == null ? void 0 : Z.$el : e.value;
        ue && (d.value = ue.getBoundingClientRect()), i("recalculate-position");
      }
      return V();
    }
  }, D = ({ inputEl: K, left: Z, width: ue }) => {
    window.screen.width > 768 && !u.value && v(Z, ue), I(K);
  }, P = (K) => {
    const { top: Z, left: ue, height: Y, width: U } = g(K);
    f.value.top = `${Y + Z + +o.offset}px`, h.value = !1, u.value || (f.value.left = `${ue + U / 2 - d.value.width / 2}px`), D({ inputEl: K, left: ue, width: U });
  }, O = (K) => {
    const { top: Z, left: ue, width: Y } = g(K);
    f.value.top = `${Z - +o.offset - d.value.height}px`, h.value = !0, D({ inputEl: K, left: ue, width: Y });
  }, I = (K) => {
    if (o.autoPosition) {
      const { left: Z, width: ue } = g(K), { left: Y, right: U } = d.value;
      if (!u.value) {
        if (Math.abs(Y) !== Math.abs(U)) {
          if (Y <= 0)
            return u.value = !0, b(Z);
          if (U >= document.documentElement.clientWidth)
            return u.value = !0, w(Z, ue);
        }
        return v(Z, ue);
      }
    }
  }, x = () => {
    const K = Ha(n);
    if (K) {
      if (o.autoPosition === Ui.top) return Ui.top;
      if (o.autoPosition === Ui.bottom) return Ui.bottom;
      const { height: Z } = d.value, { top: ue, height: Y } = K.getBoundingClientRect(), U = window.innerHeight - ue - Y, q = ue;
      return Z <= U ? Ui.bottom : Z > U && Z <= q ? Ui.top : U >= q ? Ui.bottom : Ui.top;
    }
    return Ui.bottom;
  }, M = (K) => x() === Ui.bottom ? P(K) : O(K), V = () => {
    const K = Ha(n);
    if (K)
      return o.autoPosition ? M(K) : P(K);
  }, B = function(K) {
    if (K) {
      const Z = K.scrollHeight > K.clientHeight, ue = window.getComputedStyle(K).overflowY.indexOf("hidden") !== -1;
      return Z && !ue;
    }
    return !0;
  }, F = function(K) {
    return !K || K === document.body || K.nodeType === Node.DOCUMENT_FRAGMENT_NODE ? window : B(K) ? K : F(
      K.assignedSlot && s.value.shadowDom ? K.assignedSlot.parentNode : K.parentNode
    );
  }, H = (K) => {
    if (K)
      switch (o.position) {
        case ru.left:
          return { left: 0, transform: "translateX(0)" };
        case ru.right:
          return { left: `${K.width}px`, transform: "translateX(-100%)" };
        default:
          return { left: `${K.width / 2}px`, transform: "translateX(-50%)" };
      }
    return {};
  };
  return {
    openOnTop: h,
    menuStyle: f,
    xCorrect: u,
    setMenuPosition: C,
    getScrollableParent: F,
    shadowRender: (K, Z, ue) => {
      var Y, U, q;
      const oe = document.createElement("div"), ee = (Y = Ha(n)) == null ? void 0 : Y.getBoundingClientRect();
      oe.setAttribute("id", "dp--temp-container");
      const he = (U = a.value) != null && U.clientWidth ? a.value : document.body;
      he.append(oe);
      const ve = H(ee), pe = s.value.shadowDom ? Object.keys(l).filter(
        (ge) => ["right-sidebar", "left-sidebar", "top-extra", "action-extra"].includes(ge)
      ) : Object.keys(l), z = Eo(
        Z,
        {
          ...ue,
          shadow: !0,
          style: { opacity: 0, position: "absolute", ...ve }
        },
        Object.fromEntries(pe.map((ge) => [ge, l[ge]]))
      );
      K != null && (z.appContext = K.appContext), k_(z, oe), d.value = (q = z.el) == null ? void 0 : q.getBoundingClientRect(), k_(null, oe), he.removeChild(oe);
    }
  };
}, Is = [
  { name: "clock-icon", use: ["time", "calendar", "shared"] },
  { name: "arrow-left", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-right", use: ["month-year", "calendar", "shared", "year-mode"] },
  { name: "arrow-up", use: ["time", "calendar", "month-year", "shared"] },
  { name: "arrow-down", use: ["time", "calendar", "month-year", "shared"] },
  { name: "calendar-icon", use: ["month-year", "time", "calendar", "shared", "year-mode"] },
  { name: "day", use: ["calendar", "shared"] },
  { name: "month-overlay-value", use: ["calendar", "month-year", "shared"] },
  { name: "year-overlay-value", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "year-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay", use: ["month-year", "shared"] },
  { name: "month-overlay-header", use: ["month-year", "shared"] },
  { name: "year-overlay-header", use: ["month-year", "shared"] },
  { name: "hours-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "hours-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "minutes-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-value", use: ["calendar", "time", "shared"] },
  { name: "seconds-overlay-header", use: ["calendar", "time", "shared"] },
  { name: "hours", use: ["calendar", "time", "shared"] },
  { name: "minutes", use: ["calendar", "time", "shared"] },
  { name: "month", use: ["calendar", "month-year", "shared"] },
  { name: "year", use: ["calendar", "month-year", "shared", "year-mode"] },
  { name: "action-buttons", use: ["action"] },
  { name: "action-preview", use: ["action"] },
  { name: "calendar-header", use: ["calendar", "shared"] },
  { name: "marker-tooltip", use: ["calendar", "shared"] },
  { name: "action-extra", use: ["menu"] },
  { name: "time-picker-overlay", use: ["calendar", "time", "shared"] },
  { name: "am-pm-button", use: ["calendar", "time", "shared"] },
  { name: "left-sidebar", use: ["menu"] },
  { name: "right-sidebar", use: ["menu"] },
  { name: "month-year", use: ["month-year", "shared"] },
  { name: "time-picker", use: ["menu", "shared"] },
  { name: "action-row", use: ["action"] },
  { name: "marker", use: ["calendar", "shared"] },
  { name: "quarter", use: ["shared"] },
  { name: "top-extra", use: ["shared", "month-year"] },
  { name: "tp-inline-arrow-up", use: ["shared", "time"] },
  { name: "tp-inline-arrow-down", use: ["shared", "time"] },
  { name: "menu-header", use: ["menu"] }
], dH = [{ name: "trigger" }, { name: "input-icon" }, { name: "clear-icon" }, { name: "dp-input" }], fH = {
  all: () => Is,
  monthYear: () => Is.filter((e) => e.use.includes("month-year")),
  input: () => dH,
  timePicker: () => Is.filter((e) => e.use.includes("time")),
  action: () => Is.filter((e) => e.use.includes("action")),
  calendar: () => Is.filter((e) => e.use.includes("calendar")),
  menu: () => Is.filter((e) => e.use.includes("menu")),
  shared: () => Is.filter((e) => e.use.includes("shared")),
  yearMode: () => Is.filter((e) => e.use.includes("year-mode"))
}, di = (e, t, n) => {
  const a = [];
  return fH[t]().forEach((r) => {
    e[r.name] && a.push(r.name);
  }), n != null && n.length && n.forEach((r) => {
    r.slot && a.push(r.slot);
  }), a;
}, em = (e) => {
  const t = W(() => (a) => e.value ? a ? e.value.open : e.value.close : ""), n = W(() => (a) => e.value ? a ? e.value.menuAppearTop : e.value.menuAppearBottom : "");
  return { transitionName: t, showTransition: !!e.value, menuTransition: n };
}, tm = (e, t, n) => {
  const { defaultedRange: a, defaultedTz: r } = fa(e), i = ut(Qr(ut(), r.value.timezone)), o = be([{ month: fn(i), year: jt(i) }]), l = (h) => {
    const y = {
      hours: rs(i),
      minutes: Gs(i),
      seconds: 0
    };
    return a.value.enabled ? [y[h], y[h]] : y[h];
  }, s = Zn({
    hours: l("hours"),
    minutes: l("minutes"),
    seconds: l("seconds")
  });
  tt(
    a,
    (h, y) => {
      h.enabled !== y.enabled && (s.hours = l("hours"), s.minutes = l("minutes"), s.seconds = l("seconds"));
    },
    { deep: !0 }
  );
  const d = W({
    get: () => e.internalModelValue,
    set: (h) => {
      !e.readonly && !e.disabled && t("update:internal-model-value", h);
    }
  }), u = W(
    () => (h) => o.value[h] ? o.value[h].month : 0
  ), f = W(
    () => (h) => o.value[h] ? o.value[h].year : 0
  );
  return tt(
    d,
    (h, y) => {
      n && JSON.stringify(h ?? {}) !== JSON.stringify(y ?? {}) && n();
    },
    { deep: !0 }
  ), {
    calendars: o,
    time: s,
    modelValue: d,
    month: u,
    year: f,
    today: i
  };
}, mH = (e, t) => {
  const {
    defaultedMultiCalendars: n,
    defaultedMultiDates: a,
    defaultedUI: r,
    defaultedHighlight: i,
    defaultedTz: o,
    propDates: l,
    defaultedRange: s
  } = fa(t), { isDisabled: d } = rl(t), u = be(null), f = be(Qr(/* @__PURE__ */ new Date(), o.value.timezone)), h = (z) => {
    !z.current && t.hideOffsetDates || (u.value = z.value);
  }, y = () => {
    u.value = null;
  }, p = (z) => Array.isArray(e.value) && s.value.enabled && e.value[0] && u.value ? z ? Va(u.value, e.value[0]) : Sa(u.value, e.value[0]) : !0, w = (z, ge) => {
    const Ve = () => e.value ? ge ? e.value[0] || null : e.value[1] : null, Ne = e.value && Array.isArray(e.value) ? Ve() : null;
    return mn(ut(z.value), Ne);
  }, b = (z) => {
    const ge = Array.isArray(e.value) ? e.value[0] : null;
    return z ? !Sa(u.value ?? null, ge) : !0;
  }, v = (z, ge = !0) => (s.value.enabled || t.weekPicker) && Array.isArray(e.value) && e.value.length === 2 ? t.hideOffsetDates && !z.current ? !1 : mn(ut(z.value), e.value[ge ? 0 : 1]) : s.value.enabled ? w(z, ge) && b(ge) || mn(z.value, Array.isArray(e.value) ? e.value[0] : null) && p(ge) : !1, g = (z, ge) => {
    if (Array.isArray(e.value) && e.value[0] && e.value.length === 1) {
      const Ve = mn(z.value, u.value);
      return ge ? Va(e.value[0], z.value) && Ve : Sa(e.value[0], z.value) && Ve;
    }
    return !1;
  }, k = (z) => !e.value || t.hideOffsetDates && !z.current ? !1 : s.value.enabled ? t.modelAuto && Array.isArray(e.value) ? mn(z.value, e.value[0] ? e.value[0] : f.value) : !1 : a.value.enabled && Array.isArray(e.value) ? e.value.some((ge) => mn(ge, z.value)) : mn(z.value, e.value ? e.value : f.value), A = (z) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        if (t.hideOffsetDates && !z.current) return !1;
        const ge = Ei(u.value, +s.value.autoRange), Ve = jo(ut(u.value), t.weekStart);
        return t.weekPicker ? mn(Ve[1], ut(z.value)) : mn(ge, ut(z.value));
      }
      return !1;
    }
    return !1;
  }, C = (z) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        const ge = Ei(u.value, +s.value.autoRange);
        if (t.hideOffsetDates && !z.current) return !1;
        const Ve = jo(ut(u.value), t.weekStart);
        return t.weekPicker ? Va(z.value, Ve[0]) && Sa(z.value, Ve[1]) : Va(z.value, u.value) && Sa(z.value, ge);
      }
      return !1;
    }
    return !1;
  }, D = (z) => {
    if (s.value.autoRange || t.weekPicker) {
      if (u.value) {
        if (t.hideOffsetDates && !z.current) return !1;
        const ge = jo(ut(u.value), t.weekStart);
        return t.weekPicker ? mn(ge[0], z.value) : mn(u.value, z.value);
      }
      return !1;
    }
    return !1;
  }, P = (z) => Of(e.value, u.value, z.value), O = () => t.modelAuto && Array.isArray(t.internalModelValue) ? !!t.internalModelValue[0] : !1, I = () => t.modelAuto ? uE(t.internalModelValue) : !0, x = (z) => {
    if (t.weekPicker) return !1;
    const ge = s.value.enabled ? !v(z) && !v(z, !1) : !0;
    return !d(z.value) && !k(z) && !(!z.current && t.hideOffsetDates) && ge;
  }, M = (z) => s.value.enabled ? t.modelAuto ? O() && k(z) : !1 : k(z), V = (z) => i.value ? Dq(z.value, l.value.highlight) : !1, B = (z) => {
    const ge = d(z.value);
    return ge && (typeof i.value == "function" ? !i.value(z.value, ge) : !i.value.options.highlightDisabled);
  }, F = (z) => {
    var ge;
    return typeof i.value == "function" ? i.value(z.value) : (ge = i.value.weekdays) == null ? void 0 : ge.includes(z.value.getDay());
  }, H = (z) => (s.value.enabled || t.weekPicker) && (!(n.value.count > 0) || z.current) && I() && !(!z.current && t.hideOffsetDates) && !k(z) ? P(z) : !1, K = (z) => {
    if (Array.isArray(e.value) && e.value.length === 1) {
      const { before: ge, after: Ve } = tA(+s.value.maxRange, e.value[0]);
      return Bu(z.value, ge) || ac(z.value, Ve);
    }
    return !1;
  }, Z = (z) => {
    if (Array.isArray(e.value) && e.value.length === 1) {
      const { before: ge, after: Ve } = tA(+s.value.minRange, e.value[0]);
      return Of([ge, Ve], e.value[0], z.value);
    }
    return !1;
  }, ue = (z) => s.value.enabled && (s.value.maxRange || s.value.minRange) ? s.value.maxRange && s.value.minRange ? K(z) || Z(z) : s.value.maxRange ? K(z) : Z(z) : !1, Y = (z) => {
    const { isRangeStart: ge, isRangeEnd: Ve } = ee(z), Ne = s.value.enabled ? ge || Ve : !1;
    return {
      dp__cell_offset: !z.current,
      dp__pointer: !t.disabled && !(!z.current && t.hideOffsetDates) && !d(z.value) && !ue(z),
      dp__cell_disabled: d(z.value) || ue(z),
      dp__cell_highlight: !B(z) && (V(z) || F(z)) && !M(z) && !Ne && !D(z) && !(H(z) && t.weekPicker) && !Ve,
      dp__cell_highlight_active: !B(z) && (V(z) || F(z)) && M(z),
      dp__today: !t.noToday && mn(z.value, f.value) && z.current,
      "dp--past": Sa(z.value, f.value),
      "dp--future": Va(z.value, f.value)
    };
  }, U = (z) => ({
    dp__active_date: M(z),
    dp__date_hover: x(z)
  }), q = (z) => {
    if (e.value && !Array.isArray(e.value)) {
      const ge = jo(e.value, t.weekStart);
      return {
        ...ve(z),
        dp__range_start: mn(ge[0], z.value),
        dp__range_end: mn(ge[1], z.value),
        dp__range_between_week: Va(z.value, ge[0]) && Sa(z.value, ge[1])
      };
    }
    return {
      ...ve(z)
    };
  }, oe = (z) => {
    if (e.value && Array.isArray(e.value)) {
      const ge = jo(e.value[0], t.weekStart), Ve = e.value[1] ? jo(e.value[1], t.weekStart) : [];
      return {
        ...ve(z),
        dp__range_start: mn(ge[0], z.value) || mn(Ve[0], z.value),
        dp__range_end: mn(ge[1], z.value) || mn(Ve[1], z.value),
        dp__range_between_week: Va(z.value, ge[0]) && Sa(z.value, ge[1]) || Va(z.value, Ve[0]) && Sa(z.value, Ve[1]),
        dp__range_between: Va(z.value, ge[1]) && Sa(z.value, Ve[0])
      };
    }
    return {
      ...ve(z)
    };
  }, ee = (z) => {
    const ge = n.value.count > 0 ? z.current && v(z) && I() : v(z) && I(), Ve = n.value.count > 0 ? z.current && v(z, !1) && I() : v(z, !1) && I();
    return { isRangeStart: ge, isRangeEnd: Ve };
  }, he = (z) => {
    const { isRangeStart: ge, isRangeEnd: Ve } = ee(z);
    return {
      dp__range_start: ge,
      dp__range_end: Ve,
      dp__range_between: H(z),
      dp__date_hover: mn(z.value, u.value) && !ge && !Ve && !t.weekPicker,
      dp__date_hover_start: g(z, !0),
      dp__date_hover_end: g(z, !1)
    };
  }, ve = (z) => ({
    ...he(z),
    dp__cell_auto_range: C(z),
    dp__cell_auto_range_start: D(z),
    dp__cell_auto_range_end: A(z)
  }), pe = (z) => s.value.enabled ? s.value.autoRange ? ve(z) : t.modelAuto ? { ...U(z), ...he(z) } : t.weekPicker ? oe(z) : he(z) : t.weekPicker ? q(z) : U(z);
  return {
    setHoverDate: h,
    clearHoverDate: y,
    getDayClassData: (z) => t.hideOffsetDates && !z.current ? {} : {
      ...Y(z),
      ...pe(z),
      [t.dayClass ? t.dayClass(z.value, t.internalModelValue) : ""]: !0,
      ...r.value.calendarCell ?? {}
    }
  };
}, rl = (e) => {
  const { defaultedFilters: t, defaultedRange: n, propDates: a, defaultedMultiDates: r } = fa(e), i = (F) => a.value.disabledDates ? typeof a.value.disabledDates == "function" ? a.value.disabledDates(ut(F)) : !!z_(F, a.value.disabledDates) : !1, o = (F) => a.value.maxDate ? e.yearPicker ? jt(F) > jt(a.value.maxDate) : Va(F, a.value.maxDate) : !1, l = (F) => a.value.minDate ? e.yearPicker ? jt(F) < jt(a.value.minDate) : Sa(F, a.value.minDate) : !1, s = (F) => {
    const H = o(F), K = l(F), Z = i(F), ue = t.value.months.map((ee) => +ee).includes(fn(F)), Y = e.disabledWeekDays.length ? e.disabledWeekDays.some((ee) => +ee === y$(F)) : !1, U = y(F), q = jt(F), oe = q < +e.yearRange[0] || q > +e.yearRange[1];
    return !(H || K || Z || ue || oe || Y || U);
  }, d = (F, H) => Sa(...Rs(a.value.minDate, F, H)) || mn(...Rs(a.value.minDate, F, H)), u = (F, H) => Va(...Rs(a.value.maxDate, F, H)) || mn(...Rs(a.value.maxDate, F, H)), f = (F, H, K) => {
    let Z = !1;
    return a.value.maxDate && K && u(F, H) && (Z = !0), a.value.minDate && !K && d(F, H) && (Z = !0), Z;
  }, h = (F, H, K, Z) => {
    let ue = !1;
    return Z && (a.value.minDate || a.value.maxDate) ? a.value.minDate && a.value.maxDate ? ue = f(F, H, K) : (a.value.minDate && d(F, H) || a.value.maxDate && u(F, H)) && (ue = !0) : ue = !0, ue;
  }, y = (F) => Array.isArray(a.value.allowedDates) && !a.value.allowedDates.length ? !0 : a.value.allowedDates ? !z_(F, a.value.allowedDates, mE(e.monthPicker, e.yearPicker)) : !1, p = (F) => !s(F), w = (F) => n.value.noDisabledRange ? !KI({ start: F[0], end: F[1] }).some((H) => p(H)) : !0, b = (F) => {
    if (F) {
      const H = jt(F);
      return H >= +e.yearRange[0] && H <= e.yearRange[1];
    }
    return !0;
  }, v = (F, H) => !!(Array.isArray(F) && F[H] && (n.value.maxRange || n.value.minRange) && b(F[H])), g = (F, H, K = 0) => {
    if (v(H, K) && b(F)) {
      const Z = HI(F, H[K]), ue = pE(H[K], F), Y = ue.length === 1 ? 0 : ue.filter((q) => p(q)).length, U = Math.abs(Z) - (n.value.minMaxRawRange ? 0 : Y);
      if (n.value.minRange && n.value.maxRange)
        return U >= +n.value.minRange && U <= +n.value.maxRange;
      if (n.value.minRange) return U >= +n.value.minRange;
      if (n.value.maxRange) return U <= +n.value.maxRange;
    }
    return !0;
  }, k = () => !e.enableTimePicker || e.monthPicker || e.yearPicker || e.ignoreTimeValidation, A = (F) => Array.isArray(F) ? [F[0] ? sy(F[0]) : null, F[1] ? sy(F[1]) : null] : sy(F), C = (F, H, K) => F.find(
    (Z) => +Z.hours === rs(H) && Z.minutes === "*" ? !0 : +Z.minutes === Gs(H) && +Z.hours === rs(H)
  ) && K, D = (F, H, K) => {
    const [Z, ue] = F, [Y, U] = H;
    return !C(Z, Y, K) && !C(ue, U, K) && K;
  }, P = (F, H) => {
    const K = Array.isArray(H) ? H : [H];
    return Array.isArray(e.disabledTimes) ? Array.isArray(e.disabledTimes[0]) ? D(e.disabledTimes, K, F) : !K.some((Z) => C(e.disabledTimes, Z, F)) : F;
  }, O = (F, H) => {
    const K = Array.isArray(H) ? [Gl(H[0]), H[1] ? Gl(H[1]) : void 0] : Gl(H), Z = !e.disabledTimes(K);
    return F && Z;
  }, I = (F, H) => e.disabledTimes ? Array.isArray(e.disabledTimes) ? P(H, F) : O(H, F) : H, x = (F) => {
    let H = !0;
    if (!F || k()) return !0;
    const K = !a.value.minDate && !a.value.maxDate ? A(F) : F;
    return (e.maxTime || a.value.maxDate) && (H = eA(
      e.maxTime,
      a.value.maxDate,
      "max",
      nr(K),
      H
    )), (e.minTime || a.value.minDate) && (H = eA(
      e.minTime,
      a.value.minDate,
      "min",
      nr(K),
      H
    )), I(F, H);
  }, M = (F) => {
    if (!e.monthPicker) return !0;
    let H = !0;
    const K = ut(qi(F));
    if (a.value.minDate && a.value.maxDate) {
      const Z = ut(qi(a.value.minDate)), ue = ut(qi(a.value.maxDate));
      return Va(K, Z) && Sa(K, ue) || mn(K, Z) || mn(K, ue);
    }
    if (a.value.minDate) {
      const Z = ut(qi(a.value.minDate));
      H = Va(K, Z) || mn(K, Z);
    }
    if (a.value.maxDate) {
      const Z = ut(qi(a.value.maxDate));
      H = Sa(K, Z) || mn(K, Z);
    }
    return H;
  }, V = W(() => (F) => !e.enableTimePicker || e.ignoreTimeValidation ? !0 : x(F)), B = W(() => (F) => e.monthPicker ? Array.isArray(F) && (n.value.enabled || r.value.enabled) ? !F.filter((H) => !M(H)).length : M(F) : !0);
  return {
    isDisabled: p,
    validateDate: s,
    validateMonthYearInRange: h,
    isDateRangeAllowed: w,
    checkMinMaxRange: g,
    isValidTime: x,
    isTimeValid: V,
    isMonthValid: B
  };
}, Sv = () => {
  const e = W(() => (a, r) => a?.includes(r)), t = W(() => (a, r) => a.count ? a.solo ? !0 : r === 0 : !0), n = W(() => (a, r) => a.count ? a.solo ? !0 : r === a.count - 1 : !0);
  return { hideNavigationButtons: e, showLeftIcon: t, showRightIcon: n };
}, hH = (e, t, n) => {
  const a = be(0), r = Zn({
    [Yl.timePicker]: !e.enableTimePicker || e.timePicker || e.monthPicker,
    [Yl.calendar]: !1,
    [Yl.header]: !1
  }), i = W(() => e.monthPicker || e.timePicker), o = (f) => {
    var h;
    if ((h = e.flow) != null && h.length) {
      if (!f && i.value) return u();
      r[f] = !0, Object.keys(r).filter((y) => !r[y]).length || u();
    }
  }, l = () => {
    var f, h;
    (f = e.flow) != null && f.length && a.value !== -1 && (a.value += 1, t("flow-step", a.value), u()), ((h = e.flow) == null ? void 0 : h.length) === a.value && Dt().then(() => s());
  }, s = () => {
    a.value = -1;
  }, d = (f, h, ...y) => {
    var p, w;
    e.flow[a.value] === f && n.value && ((w = (p = n.value)[h]) == null || w.call(p, ...y));
  }, u = (f = 0) => {
    f && (a.value += f), d(br.month, "toggleMonthPicker", !0), d(br.year, "toggleYearPicker", !0), d(br.calendar, "toggleTimePicker", !1, !0), d(br.time, "toggleTimePicker", !0, !0);
    const h = e.flow[a.value];
    (h === br.hours || h === br.minutes || h === br.seconds) && d(h, "toggleTimePicker", !0, !0, h);
  };
  return { childMount: o, updateFlowStep: l, resetFlow: s, handleFlow: u, flowStep: a };
}, _H = {
  key: 1,
  class: "dp__input_wrap"
}, vH = ["id", "name", "inputmode", "placeholder", "disabled", "readonly", "required", "value", "autocomplete", "aria-label", "aria-disabled", "aria-invalid"], pH = {
  key: 2,
  class: "dp--clear-btn"
}, gH = ["aria-label"], yH = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "DatepickerInput",
  props: {
    isMenuOpen: { type: Boolean, default: !1 },
    inputValue: { type: String, default: "" },
    ...bv
  },
  emits: [
    "clear",
    "open",
    "update:input-value",
    "set-input-date",
    "close",
    "select-date",
    "set-empty-date",
    "toggle",
    "focus-prev",
    "focus",
    "blur",
    "real-blur",
    "text-input"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, {
      defaultedTextInput: i,
      defaultedAriaLabels: o,
      defaultedInline: l,
      defaultedConfig: s,
      defaultedRange: d,
      defaultedMultiDates: u,
      defaultedUI: f,
      getDefaultPattern: h,
      getDefaultStartTime: y
    } = fa(r), { checkMinMaxRange: p } = rl(r), w = be(), b = be(null), v = be(!1), g = be(!1), k = W(
      () => ({
        dp__pointer: !r.disabled && !r.readonly && !i.value.enabled,
        dp__disabled: r.disabled,
        dp__input_readonly: !i.value.enabled,
        dp__input: !0,
        dp__input_icon_pad: !r.hideInputIcon,
        dp__input_valid: typeof r.state == "boolean" ? r.state : !1,
        dp__input_invalid: typeof r.state == "boolean" ? !r.state : !1,
        dp__input_focus: v.value || r.isMenuOpen,
        dp__input_reg: !i.value.enabled,
        ...f.value.input ?? {}
      })
    ), A = () => {
      a("set-input-date", null), r.clearable && r.autoApply && (a("set-empty-date"), w.value = null);
    }, C = (q) => {
      const oe = y();
      return Vq(
        q,
        i.value.format ?? h(),
        oe ?? gE({}, r.enableSeconds),
        r.inputValue,
        g.value,
        r.formatLocale
      );
    }, D = (q) => {
      const { rangeSeparator: oe } = i.value, [ee, he] = q.split(`${oe}`);
      if (ee) {
        const ve = C(ee.trim()), pe = he ? C(he.trim()) : void 0;
        if (ac(ve, pe)) return;
        const z = ve && pe ? [ve, pe] : [ve];
        p(pe, z, 0) && (w.value = ve ? z : null);
      }
    }, P = () => {
      g.value = !0;
    }, O = (q) => {
      if (d.value.enabled)
        D(q);
      else if (u.value.enabled) {
        const oe = q.split(";");
        w.value = oe.map((ee) => C(ee.trim())).filter((ee) => ee);
      } else
        w.value = C(q);
    }, I = (q) => {
      var oe;
      const ee = typeof q == "string" ? q : (oe = q.target) == null ? void 0 : oe.value;
      ee !== "" ? (i.value.openMenu && !r.isMenuOpen && a("open"), O(ee), a("set-input-date", w.value)) : A(), g.value = !1, a("update:input-value", ee), a("text-input", q, w.value);
    }, x = (q) => {
      i.value.enabled ? (O(q.target.value), i.value.enterSubmit && Ab(w.value) && r.inputValue !== "" ? (a("set-input-date", w.value, !0), w.value = null) : i.value.enterSubmit && r.inputValue === "" && (w.value = null, a("clear"))) : B(q);
    }, M = (q, oe) => {
      i.value.enabled && i.value.tabSubmit && !oe && O(q.target.value), i.value.tabSubmit && Ab(w.value) && r.inputValue !== "" ? (a("set-input-date", w.value, !0, !0), w.value = null) : i.value.tabSubmit && r.inputValue === "" && (w.value = null, a("clear", !0));
    }, V = () => {
      v.value = !0, a("focus"), Dt().then(() => {
        var q;
        i.value.enabled && i.value.selectOnFocus && ((q = b.value) == null || q.select());
      });
    }, B = (q) => {
      if (Us(q, s.value, !0), i.value.enabled && i.value.openMenu && !l.value.input) {
        if (i.value.openMenu === "open" && !r.isMenuOpen) return a("open");
        if (i.value.openMenu === "toggle") return a("toggle");
      } else i.value.enabled || a("toggle");
    }, F = () => {
      a("real-blur"), v.value = !1, (!r.isMenuOpen || l.value.enabled && l.value.input) && a("blur"), r.autoApply && i.value.enabled && w.value && !r.isMenuOpen && (a("set-input-date", w.value), a("select-date"), w.value = null);
    }, H = (q) => {
      Us(q, s.value, !0), a("clear");
    }, K = () => {
      a("close");
    }, Z = (q) => {
      if (q.key === "Tab" && M(q), q.key === "Enter" && x(q), q.key === "Escape" && i.value.escClose && K(), !i.value.enabled) {
        if (q.code === "Tab") return;
        q.preventDefault();
      }
    }, ue = () => {
      var q;
      (q = b.value) == null || q.focus({ preventScroll: !0 });
    }, Y = (q) => {
      w.value = q;
    }, U = (q) => {
      q.key === Jn.tab && M(q, !0);
    };
    return t({
      focusInput: ue,
      setParsedDate: Y
    }), (q, oe) => {
      var ee, he, ve;
      return te(), Oe("div", { onClick: B }, [
        q.$slots.trigger && !q.$slots["dp-input"] && !fe(l).enabled ? bt(q.$slots, "trigger", { key: 0 }) : ke("", !0),
        !q.$slots.trigger && (!fe(l).enabled || fe(l).input) ? (te(), Oe("div", _H, [
          q.$slots["dp-input"] && !q.$slots.trigger && (!fe(l).enabled || fe(l).enabled && fe(l).input) ? bt(q.$slots, "dp-input", {
            key: 0,
            value: e.inputValue,
            isMenuOpen: e.isMenuOpen,
            onInput: I,
            onEnter: x,
            onTab: M,
            onClear: H,
            onBlur: F,
            onKeypress: Z,
            onPaste: P,
            onFocus: V,
            openMenu: () => q.$emit("open"),
            closeMenu: () => q.$emit("close"),
            toggleMenu: () => q.$emit("toggle")
          }) : ke("", !0),
          q.$slots["dp-input"] ? ke("", !0) : (te(), Oe("input", {
            key: 1,
            id: q.uid ? `dp-input-${q.uid}` : void 0,
            ref_key: "inputRef",
            ref: b,
            "data-test-id": "dp-input",
            name: q.name,
            class: Ae(k.value),
            inputmode: fe(i).enabled ? "text" : "none",
            placeholder: q.placeholder,
            disabled: q.disabled,
            readonly: q.readonly,
            required: q.required,
            value: e.inputValue,
            autocomplete: q.autocomplete,
            "aria-label": (ee = fe(o)) == null ? void 0 : ee.input,
            "aria-disabled": q.disabled || void 0,
            "aria-invalid": q.state === !1 ? !0 : void 0,
            onInput: I,
            onBlur: F,
            onFocus: V,
            onKeypress: Z,
            onKeydown: oe[0] || (oe[0] = (pe) => Z(pe)),
            onPaste: P
          }, null, 42, vH)),
          T("div", {
            onClick: oe[3] || (oe[3] = (pe) => a("toggle"))
          }, [
            q.$slots["input-icon"] && !q.hideInputIcon ? (te(), Oe("span", {
              key: 0,
              class: "dp__input_icon",
              onClick: oe[1] || (oe[1] = (pe) => a("toggle"))
            }, [
              bt(q.$slots, "input-icon")
            ])) : ke("", !0),
            !q.$slots["input-icon"] && !q.hideInputIcon && !q.$slots["dp-input"] ? (te(), Le(fe(Xu), {
              key: 1,
              "aria-label": (he = fe(o)) == null ? void 0 : he.calendarIcon,
              class: "dp__input_icon dp__input_icons",
              onClick: oe[2] || (oe[2] = (pe) => a("toggle"))
            }, null, 8, ["aria-label"])) : ke("", !0)
          ]),
          q.$slots["clear-icon"] && (q.alwaysClearable || e.inputValue && q.clearable && !q.disabled && !q.readonly) ? (te(), Oe("span", pH, [
            bt(q.$slots, "clear-icon", { clear: H })
          ])) : ke("", !0),
          !q.$slots["clear-icon"] && (q.alwaysClearable || q.clearable && e.inputValue && !q.disabled && !q.readonly) ? (te(), Oe("button", {
            key: 3,
            "aria-label": (ve = fe(o)) == null ? void 0 : ve.clearInput,
            class: "dp--clear-btn",
            type: "button",
            onKeydown: oe[4] || (oe[4] = (pe) => fe(Nr)(pe, () => H(pe), !0, U)),
            onClick: oe[5] || (oe[5] = ua((pe) => H(pe), ["prevent"]))
          }, [
            _(fe(lE), {
              class: "dp__input_icons",
              "data-test-id": "clear-icon"
            })
          ], 40, gH)) : ke("", !0)
        ])) : ke("", !0)
      ]);
    };
  }
}), bH = typeof window < "u" ? window : void 0, my = () => {
}, wH = (e) => dw() ? (Fa(e), !0) : !1, kH = (e, t, n, a) => {
  if (!e) return my;
  let r = my;
  const i = tt(
    () => fe(e),
    (l) => {
      r(), l && (l.removeEventListener(t, n), l.addEventListener(t, n, a), r = () => {
        l.removeEventListener(t, n, a), r = my;
      });
    },
    { immediate: !0, flush: "post" }
  ), o = () => {
    i(), r();
  };
  return wH(o), o;
}, SH = (e, t, n, a = {}) => {
  const { window: r = bH, event: i = "pointerdown" } = a;
  return r ? kH(r, i, (o) => {
    const l = Ha(e), s = Ha(t);
    !l || !s || l === o.target || o.composedPath().includes(l) || o.composedPath().includes(s) || n(o);
  }, { passive: !0 }) : void 0;
}, CH = ["data-dp-mobile"], AH = /* @__PURE__ */ za({
  compatConfig: {
    MODE: 3
  },
  __name: "VueDatePicker",
  props: {
    ...bv
  },
  emits: [
    "update:model-value",
    "update:model-timezone-value",
    "text-submit",
    "closed",
    "cleared",
    "open",
    "focus",
    "blur",
    "internal-model-change",
    "recalculate-position",
    "flow-step",
    "update-month-year",
    "invalid-select",
    "invalid-fixed-range",
    "tooltip-open",
    "tooltip-close",
    "time-picker-open",
    "time-picker-close",
    "am-pm-change",
    "range-start",
    "range-end",
    "date-update",
    "invalid-date",
    "overlay-toggle",
    "text-input"
  ],
  setup(e, { expose: t, emit: n }) {
    const a = n, r = e, i = uc(), o = be(!1), l = ye(r, "modelValue"), s = ye(r, "timezone"), d = be(null), u = be(null), f = be(null), h = be(!1), y = be(null), p = be(!1), w = be(!1), b = be(!1), v = be(!1), { setMenuFocused: g, setShiftKey: k } = kE(), { clearArrowNav: A } = al(), { validateDate: C, isValidTime: D } = rl(r), {
      defaultedTransitions: P,
      defaultedTextInput: O,
      defaultedInline: I,
      defaultedConfig: x,
      defaultedRange: M,
      defaultedMultiDates: V
    } = fa(r), { menuTransition: B, showTransition: F } = em(P), { isMobile: H } = EE(x), K = Io();
    an(() => {
      z(r.modelValue), Dt().then(() => {
        if (!I.value.enabled) {
          const Ke = ee(y.value);
          Ke?.addEventListener("scroll", Ie), window?.addEventListener("resize", ie);
        }
      }), I.value.enabled && (o.value = !0), window?.addEventListener("keyup", we), window?.addEventListener("keydown", Ee);
    }), _i(() => {
      if (!I.value.enabled) {
        const Ke = ee(y.value);
        Ke?.removeEventListener("scroll", Ie), window?.removeEventListener("resize", ie);
      }
      window?.removeEventListener("keyup", we), window?.removeEventListener("keydown", Ee);
    });
    const Z = di(i, "all", r.presetDates), ue = di(i, "input");
    tt(
      [l, s],
      () => {
        z(l.value);
      },
      { deep: !0 }
    );
    const { openOnTop: Y, menuStyle: U, xCorrect: q, setMenuPosition: oe, getScrollableParent: ee, shadowRender: he } = uH({
      menuRef: d,
      menuRefInner: u,
      inputRef: f,
      pickerWrapperRef: y,
      inline: I,
      emit: a,
      props: r,
      slots: i
    }), {
      inputValue: ve,
      internalModelValue: pe,
      parseExternalModelValue: z,
      emitModelValue: ge,
      formatInputValue: Ve,
      checkBeforeEmit: Ne
    } = i6(a, r, h), ce = W(
      () => ({
        dp__main: !0,
        dp__theme_dark: r.dark,
        dp__theme_light: !r.dark,
        dp__flex_display: I.value.enabled,
        "dp--flex-display-collapsed": b.value,
        dp__flex_display_with_input: I.value.input
      })
    ), ne = W(() => r.dark ? "dp__theme_dark" : "dp__theme_light"), Q = W(() => r.teleport ? {
      to: typeof r.teleport == "boolean" ? "body" : r.teleport,
      disabled: !r.teleport || I.value.enabled
    } : {}), le = W(() => ({ class: "dp__outer_menu_wrap" })), G = W(() => I.value.enabled && (r.timePicker || r.monthPicker || r.yearPicker || r.quarterPicker)), Ce = () => {
      var Ke, st;
      return ((st = (Ke = f.value) == null ? void 0 : Ke.$el) == null ? void 0 : st.getBoundingClientRect()) ?? { width: 0, left: 0, right: 0 };
    }, Ie = () => {
      o.value && (x.value.closeOnScroll ? Bt() : oe());
    }, ie = () => {
      var Ke;
      o.value && oe();
      const st = ((Ke = u.value) == null ? void 0 : Ke.$el.getBoundingClientRect().width) ?? 0;
      b.value = document.body.offsetWidth <= st;
    }, we = (Ke) => {
      Ke.key === "Tab" && !I.value.enabled && !r.teleport && x.value.tabOutClosesMenu && (y.value.contains(document.activeElement) || Bt()), w.value = Ke.shiftKey;
    }, Ee = (Ke) => {
      w.value = Ke.shiftKey;
    }, Pe = () => {
      !r.disabled && !r.readonly && (he(K, iA, r), oe(!1), o.value = !0, o.value && a("open"), o.value || it(), z(r.modelValue));
    }, Xe = () => {
      var Ke, st;
      ve.value = "", it(), (Ke = u.value) == null || Ke.onValueCleared(), (st = f.value) == null || st.setParsedDate(null), a("update:model-value", null), a("update:model-timezone-value", null), a("cleared"), x.value.closeOnClearValue && Bt();
    }, _e = () => {
      const Ke = pe.value;
      return !Ke || !Array.isArray(Ke) && C(Ke) ? !0 : Array.isArray(Ke) ? V.value.enabled || Ke.length === 2 && C(Ke[0]) && C(Ke[1]) ? !0 : M.value.partialRange && !r.timePicker ? C(Ke[0]) : !1 : !1;
    }, qe = () => {
      Ne() && _e() ? (ge(), Bt()) : a("invalid-select", pe.value);
    }, Ze = (Ke) => {
      _t(), ge(), x.value.closeOnAutoApply && !Ke && Bt();
    }, _t = () => {
      f.value && O.value.enabled && f.value.setParsedDate(pe.value);
    }, It = (Ke = !1) => {
      r.autoApply && D(pe.value) && _e() && (M.value.enabled && Array.isArray(pe.value) ? (M.value.partialRange || pe.value.length === 2) && Ze(Ke) : Ze(Ke));
    }, it = () => {
      O.value.enabled || (pe.value = null);
    }, Bt = (Ke = !1) => {
      var st, vt;
      Ke && pe.value && x.value.setDateOnMenuClose && qe(), I.value.enabled || (o.value && (o.value = !1, q.value = !1, g(!1), k(!1), A(), a("closed"), ve.value && z(l.value)), it(), a("blur"), (vt = (st = u.value) == null ? void 0 : st.$el) == null || vt.remove());
    }, tn = (Ke, st, vt = !1) => {
      if (!Ke) {
        pe.value = null;
        return;
      }
      const Ea = Array.isArray(Ke) ? !Ke.some((_r) => !C(_r)) : C(Ke), qa = D(Ke);
      Ea && qa ? (v.value = !0, pe.value = Ke, st ? (p.value = vt, qe(), a("text-submit")) : r.autoApply && It(), Dt().then(() => {
        v.value = !1;
      })) : a("invalid-date", Ke);
    }, Kn = () => {
      r.autoApply && D(pe.value) && ge(), _t();
    }, oa = () => o.value ? Bt() : Pe(), $a = (Ke) => {
      pe.value = Ke;
    }, ba = () => {
      O.value.enabled && (h.value = !0, Ve()), a("focus");
    }, jn = () => {
      if (O.value.enabled && (h.value = !1, z(r.modelValue), p.value)) {
        const Ke = Oq(y.value, w.value);
        Ke?.focus();
      }
      a("blur");
    }, Rn = (Ke) => {
      u.value && u.value.updateMonthYear(0, {
        month: JC(Ke.month),
        year: JC(Ke.year)
      });
    }, er = (Ke) => {
      z(Ke ?? r.modelValue);
    }, Te = (Ke, st) => {
      var vt;
      (vt = u.value) == null || vt.switchView(Ke, st);
    }, ze = (Ke, st) => x.value.onClickOutside ? x.value.onClickOutside(Ke, st) : Bt(!0), ft = (Ke = 0) => {
      var st;
      (st = u.value) == null || st.handleFlow(Ke);
    }, ot = () => d;
    return SH(
      d,
      f,
      (Ke) => ze(_e, Ke)
    ), t({
      closeMenu: Bt,
      selectDate: qe,
      clearValue: Xe,
      openMenu: Pe,
      onScroll: Ie,
      formatInputValue: Ve,
      // exposed for testing purposes
      updateInternalModelValue: $a,
      // modify internal modelValue
      setMonthYear: Rn,
      parseModel: er,
      switchView: Te,
      toggleMenu: oa,
      handleFlow: ft,
      getDpWrapMenuRef: ot
    }), (Ke, st) => (te(), Oe("div", {
      ref_key: "pickerWrapperRef",
      ref: y,
      class: Ae(ce.value),
      "data-datepicker-instance": "",
      "data-dp-mobile": fe(H)
    }, [
      _(yH, Fe({
        ref_key: "inputRef",
        ref: f,
        "input-value": fe(ve),
        "onUpdate:inputValue": st[0] || (st[0] = (vt) => ga(ve) ? ve.value = vt : null),
        "is-menu-open": o.value
      }, Ke.$props, {
        onClear: Xe,
        onOpen: Pe,
        onSetInputDate: tn,
        onSetEmptyDate: fe(ge),
        onSelectDate: qe,
        onToggle: oa,
        onClose: Bt,
        onFocus: ba,
        onBlur: jn,
        onRealBlur: st[1] || (st[1] = (vt) => h.value = !1),
        onTextInput: st[2] || (st[2] = (vt) => Ke.$emit("text-input", vt))
      }), mr({ _: 2 }, [
        ln(fe(ue), (vt, Ea) => ({
          name: vt,
          fn: E((qa) => [
            bt(Ke.$slots, vt, ea(Aa(qa)))
          ])
        }))
      ]), 1040, ["input-value", "is-menu-open", "onSetEmptyDate"]),
      (te(), Le(Ku(Ke.teleport ? Fx : "div"), ea(Aa(Q.value)), {
        default: E(() => [
          _($r, {
            name: fe(B)(fe(Y)),
            css: fe(F) && !fe(I).enabled
          }, {
            default: E(() => [
              o.value ? (te(), Oe("div", Fe({
                key: 0,
                ref_key: "dpWrapMenuRef",
                ref: d
              }, le.value, {
                class: { "dp--menu-wrapper": !fe(I).enabled },
                style: fe(I).enabled ? void 0 : fe(U)
              }), [
                _(iA, Fe({
                  ref_key: "dpMenuRef",
                  ref: u
                }, Ke.$props, {
                  "internal-model-value": fe(pe),
                  "onUpdate:internalModelValue": st[3] || (st[3] = (vt) => ga(pe) ? pe.value = vt : null),
                  class: { [ne.value]: !0, "dp--menu-wrapper": Ke.teleport },
                  "open-on-top": fe(Y),
                  "no-overlay-focus": G.value,
                  collapse: b.value,
                  "get-input-rect": Ce,
                  "is-text-input-date": v.value,
                  onClosePicker: Bt,
                  onSelectDate: qe,
                  onAutoApply: It,
                  onTimeUpdate: Kn,
                  onFlowStep: st[4] || (st[4] = (vt) => Ke.$emit("flow-step", vt)),
                  onUpdateMonthYear: st[5] || (st[5] = (vt) => Ke.$emit("update-month-year", vt)),
                  onInvalidSelect: st[6] || (st[6] = (vt) => Ke.$emit("invalid-select", fe(pe))),
                  onAutoApplyInvalid: st[7] || (st[7] = (vt) => Ke.$emit("invalid-select", vt)),
                  onInvalidFixedRange: st[8] || (st[8] = (vt) => Ke.$emit("invalid-fixed-range", vt)),
                  onRecalculatePosition: fe(oe),
                  onTooltipOpen: st[9] || (st[9] = (vt) => Ke.$emit("tooltip-open", vt)),
                  onTooltipClose: st[10] || (st[10] = (vt) => Ke.$emit("tooltip-close", vt)),
                  onTimePickerOpen: st[11] || (st[11] = (vt) => Ke.$emit("time-picker-open", vt)),
                  onTimePickerClose: st[12] || (st[12] = (vt) => Ke.$emit("time-picker-close", vt)),
                  onAmPmChange: st[13] || (st[13] = (vt) => Ke.$emit("am-pm-change", vt)),
                  onRangeStart: st[14] || (st[14] = (vt) => Ke.$emit("range-start", vt)),
                  onRangeEnd: st[15] || (st[15] = (vt) => Ke.$emit("range-end", vt)),
                  onDateUpdate: st[16] || (st[16] = (vt) => Ke.$emit("date-update", vt)),
                  onInvalidDate: st[17] || (st[17] = (vt) => Ke.$emit("invalid-date", vt)),
                  onOverlayToggle: st[18] || (st[18] = (vt) => Ke.$emit("overlay-toggle", vt)),
                  onMenuBlur: st[19] || (st[19] = (vt) => Ke.$emit("blur"))
                }), mr({ _: 2 }, [
                  ln(fe(Z), (vt, Ea) => ({
                    name: vt,
                    fn: E((qa) => [
                      bt(Ke.$slots, vt, ea(Aa({ ...qa })))
                    ])
                  }))
                ]), 1040, ["internal-model-value", "class", "open-on-top", "no-overlay-focus", "collapse", "is-text-input-date", "onRecalculatePosition"])
              ], 16)) : ke("", !0)
            ]),
            _: 3
          }, 8, ["name", "css"])
        ]),
        _: 3
      }, 16))
    ], 10, CH));
  }
}), P0 = /* @__PURE__ */ (() => {
  const e = AH;
  return e.install = (t) => {
    t.component("Vue3DatePicker", e);
  }, e;
})(), xH = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: P0
}, Symbol.toStringTag, { value: "Module" }));
Object.entries(xH).forEach(([e, t]) => {
  e !== "default" && (P0[e] = t);
});
function TH(e) {
  return { all: e = e || /* @__PURE__ */ new Map(), on: function(t, n) {
    var a = e.get(t);
    a ? a.push(n) : e.set(t, [n]);
  }, off: function(t, n) {
    var a = e.get(t);
    a && (n ? a.splice(a.indexOf(n) >>> 0, 1) : e.set(t, []));
  }, emit: function(t, n) {
    var a = e.get(t);
    a && a.slice().map(function(r) {
      r(n);
    }), (a = e.get("*")) && a.slice().map(function(r) {
      r(t, n);
    });
  } };
}
const IH = {
  install: (e, t) => {
    e.config.globalProperties.__ = window.__, e.config.globalProperties.frappe = window.frappe, e.config.globalProperties.eventBus = TH();
  }
}, EH = {
  install(e, { vuetify: t }) {
    const n = document.documentElement, a = () => {
      const l = n.getAttribute("data-theme-mode") || "light";
      return l === "automatic" ? window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" : l;
    }, r = be(a());
    t.theme.global.name.value = r.value, new MutationObserver(() => {
      r.value = a(), t.theme.global.name.value = r.value;
    }).observe(n, { attributes: !0, attributeFilter: ["data-theme-mode", "data-theme"] });
    const o = () => {
      const s = (n.getAttribute("data-theme-mode") || "light") === "dark" ? "light" : "dark";
      n.setAttribute("data-theme-mode", s), window.frappe?.ui?.set_theme ? window.frappe.ui.set_theme(s) : n.setAttribute("data-theme", s), window.frappe?.xcall && window.frappe.xcall("frappe.core.doctype.user.user.switch_theme", {
        theme: s.charAt(0).toUpperCase() + s.slice(1)
      }).catch(() => {
      });
    };
    e.config.globalProperties.$theme = {
      get current() {
        return r.value;
      },
      toggle: o,
      isDark: r
    };
  }
}, PH = Be({
  ...pt(),
  ...Tn(sI(), ["fullHeight"]),
  ...rn()
}, "VApp"), OH = We()({
  name: "VApp",
  props: PH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = gn(e), {
      layoutClasses: r,
      getLayoutItem: i,
      items: o,
      layoutRef: l
    } = cI({
      ...e,
      fullHeight: !0
    }), {
      rtlClasses: s
    } = Na();
    return Ye(() => T("div", {
      ref: l,
      class: Ae(["v-application", a.themeClasses.value, r.value, s.value, e.class]),
      style: Je([e.style])
    }, [T("div", {
      class: "v-application__wrap"
    }, [n.default?.()])])), {
      getLayoutItem: i,
      items: o,
      theme: a
    };
  }
}), $t = Be({
  tag: {
    type: [String, Object, Function],
    default: "div"
  }
}, "tag"), PE = Be({
  text: String,
  ...pt(),
  ...$t()
}, "VToolbarTitle"), O0 = We()({
  name: "VToolbarTitle",
  props: PE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => {
      const a = !!(n.default || n.text || e.text);
      return _(e.tag, {
        class: Ae(["v-toolbar-title", e.class]),
        style: Je(e.style)
      }, {
        default: () => [a && T("div", {
          class: "v-toolbar-title__placeholder"
        }, [n.text ? n.text() : e.text, n.default?.()])]
      });
    }), {};
  }
}), DH = Be({
  disabled: Boolean,
  group: Boolean,
  hideOnLeave: Boolean,
  leaveAbsolute: Boolean,
  mode: String,
  origin: String
}, "transition");
function gi(e, t, n) {
  return We()({
    name: e,
    props: DH({
      mode: n,
      origin: t
    }),
    setup(a, r) {
      let {
        slots: i
      } = r;
      const o = {
        onBeforeEnter(l) {
          a.origin && (l.style.transformOrigin = a.origin);
        },
        onLeave(l) {
          if (a.leaveAbsolute) {
            const {
              offsetTop: s,
              offsetLeft: d,
              offsetWidth: u,
              offsetHeight: f
            } = l;
            l._transitionInitialStyles = {
              position: l.style.position,
              top: l.style.top,
              left: l.style.left,
              width: l.style.width,
              height: l.style.height
            }, l.style.position = "absolute", l.style.top = `${s}px`, l.style.left = `${d}px`, l.style.width = `${u}px`, l.style.height = `${f}px`;
          }
          a.hideOnLeave && l.style.setProperty("display", "none", "important");
        },
        onAfterLeave(l) {
          if (a.leaveAbsolute && l?._transitionInitialStyles) {
            const {
              position: s,
              top: d,
              left: u,
              width: f,
              height: h
            } = l._transitionInitialStyles;
            delete l._transitionInitialStyles, l.style.position = s || "", l.style.top = d || "", l.style.left = u || "", l.style.width = f || "", l.style.height = h || "";
          }
        }
      };
      return () => {
        const l = a.group ? Ow : $r;
        return Eo(l, {
          name: a.disabled ? "" : e,
          css: !a.disabled,
          ...a.group ? void 0 : {
            mode: a.mode
          },
          ...a.disabled ? {} : o
        }, i.default);
      };
    }
  });
}
function OE(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "in-out";
  return We()({
    name: e,
    props: {
      mode: {
        type: String,
        default: n
      },
      disabled: Boolean,
      group: Boolean
    },
    setup(a, r) {
      let {
        slots: i
      } = r;
      const o = a.group ? Ow : $r;
      return () => Eo(o, {
        name: a.disabled ? "" : e,
        css: !a.disabled,
        // mode: props.mode, // TODO: vuejs/vue-next#3104
        ...a.disabled ? {} : t
      }, i.default);
    }
  });
}
function DE() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
  const n = (arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1) ? "width" : "height", a = Ur(`offset-${n}`);
  return {
    onBeforeEnter(o) {
      o._parent = o.parentNode, o._initialStyle = {
        transition: o.style.transition,
        overflow: o.style.overflow,
        [n]: o.style[n]
      };
    },
    onEnter(o) {
      const l = o._initialStyle;
      if (!l) return;
      o.style.setProperty("transition", "none", "important"), o.style.overflow = "hidden";
      const s = `${o[a]}px`;
      o.style[n] = "0", o.offsetHeight, o.style.transition = l.transition, e && o._parent && o._parent.classList.add(e), requestAnimationFrame(() => {
        o.style[n] = s;
      });
    },
    onAfterEnter: i,
    onEnterCancelled: i,
    onLeave(o) {
      o._initialStyle = {
        transition: "",
        overflow: o.style.overflow,
        [n]: o.style[n]
      }, o.style.overflow = "hidden", o.style[n] = `${o[a]}px`, o.offsetHeight, requestAnimationFrame(() => o.style[n] = "0");
    },
    onAfterLeave: r,
    onLeaveCancelled: r
  };
  function r(o) {
    e && o._parent && o._parent.classList.remove(e), i(o);
  }
  function i(o) {
    if (!o._initialStyle) return;
    const l = o._initialStyle[n];
    o.style.overflow = o._initialStyle.overflow, l != null && (o.style[n] = l), delete o._initialStyle;
  }
}
const BH = Be({
  target: [Object, Array]
}, "v-dialog-transition"), hy = /* @__PURE__ */ new WeakMap(), Cv = We()({
  name: "VDialogTransition",
  props: BH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = {
      onBeforeEnter(r) {
        r.style.pointerEvents = "none", r.style.visibility = "hidden";
      },
      async onEnter(r, i) {
        await new Promise((y) => requestAnimationFrame(y)), await new Promise((y) => requestAnimationFrame(y)), r.style.visibility = "";
        const o = sA(e.target, r), {
          x: l,
          y: s,
          sx: d,
          sy: u,
          speed: f
        } = o;
        hy.set(r, o);
        const h = Fl(r, [{
          transform: `translate(${l}px, ${s}px) scale(${d}, ${u})`,
          opacity: 0
        }, {}], {
          duration: 225 * f,
          easing: v4
        });
        oA(r)?.forEach((y) => {
          Fl(y, [{
            opacity: 0
          }, {
            opacity: 0,
            offset: 0.33
          }, {}], {
            duration: 450 * f,
            easing: wf
          });
        }), h.finished.then(() => i());
      },
      onAfterEnter(r) {
        r.style.removeProperty("pointer-events");
      },
      onBeforeLeave(r) {
        r.style.pointerEvents = "none";
      },
      async onLeave(r, i) {
        await new Promise((y) => requestAnimationFrame(y));
        let o;
        !hy.has(r) || Array.isArray(e.target) || e.target.offsetParent || e.target.getClientRects().length ? o = sA(e.target, r) : o = hy.get(r);
        const {
          x: l,
          y: s,
          sx: d,
          sy: u,
          speed: f
        } = o;
        Fl(r, [{}, {
          transform: `translate(${l}px, ${s}px) scale(${d}, ${u})`,
          opacity: 0
        }], {
          duration: 125 * f,
          easing: p4
        }).finished.then(() => i()), oA(r)?.forEach((y) => {
          Fl(y, [{}, {
            opacity: 0,
            offset: 0.2
          }, {
            opacity: 0
          }], {
            duration: 250 * f,
            easing: wf
          });
        });
      },
      onAfterLeave(r) {
        r.style.removeProperty("pointer-events");
      }
    };
    return () => e.target ? _($r, Fe({
      name: "dialog-transition"
    }, a, {
      css: !1
    }), n) : _($r, {
      name: "dialog-transition"
    }, n);
  }
});
function oA(e) {
  const t = e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;
  return t && [...t];
}
function sA(e, t) {
  const n = RT(e), a = Lw(t), [r, i] = getComputedStyle(t).transformOrigin.split(" ").map((v) => parseFloat(v)), [o, l] = getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");
  let s = n.left + n.width / 2;
  o === "left" || l === "left" ? s -= n.width / 2 : (o === "right" || l === "right") && (s += n.width / 2);
  let d = n.top + n.height / 2;
  o === "top" || l === "top" ? d -= n.height / 2 : (o === "bottom" || l === "bottom") && (d += n.height / 2);
  const u = n.width / a.width, f = n.height / a.height, h = Math.max(1, u, f), y = u / h || 0, p = f / h || 0, w = a.width * a.height / (window.innerWidth * window.innerHeight), b = w > 0.12 ? Math.min(1.5, (w - 0.12) * 10 + 1) : 1;
  return {
    x: s - (r + a.left),
    y: d - (i + a.top),
    sx: y,
    sy: p,
    speed: b
  };
}
const VH = gi("fab-transition", "center center", "out-in"), MH = gi("dialog-bottom-transition"), LH = gi("dialog-top-transition"), Df = gi("fade-transition"), D0 = gi("scale-transition"), RH = gi("scroll-x-transition"), FH = gi("scroll-x-reverse-transition"), NH = gi("scroll-y-transition"), UH = gi("scroll-y-reverse-transition"), $H = gi("slide-x-transition"), qH = gi("slide-x-reverse-transition"), B0 = gi("slide-y-transition"), HH = gi("slide-y-reverse-transition"), Av = OE("expand-transition", DE()), V0 = OE("expand-x-transition", DE("", !0)), zH = Be({
  defaults: Object,
  disabled: Boolean,
  reset: [Number, String],
  root: [Boolean, String],
  scoped: Boolean
}, "VDefaultsProvider"), Ht = We(!1)({
  name: "VDefaultsProvider",
  props: zH(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      defaults: a,
      disabled: r,
      reset: i,
      root: o,
      scoped: l
    } = zu(e);
    return aa(a, {
      reset: i,
      root: o,
      scoped: l,
      disabled: r
    }), () => n.default?.();
  }
}), Ta = Be({
  height: [Number, String],
  maxHeight: [Number, String],
  maxWidth: [Number, String],
  minHeight: [Number, String],
  minWidth: [Number, String],
  width: [Number, String]
}, "dimension");
function Ia(e) {
  return {
    dimensionStyles: W(() => {
      const n = {}, a = ht(e.height), r = ht(e.maxHeight), i = ht(e.maxWidth), o = ht(e.minHeight), l = ht(e.minWidth), s = ht(e.width);
      return a != null && (n.height = a), r != null && (n.maxHeight = r), i != null && (n.maxWidth = i), o != null && (n.minHeight = o), l != null && (n.minWidth = l), s != null && (n.width = s), n;
    })
  };
}
function WH(e) {
  return {
    aspectStyles: W(() => {
      const t = Number(e.aspectRatio);
      return t ? {
        paddingBottom: String(1 / t * 100) + "%"
      } : void 0;
    })
  };
}
const BE = Be({
  aspectRatio: [String, Number],
  contentClass: null,
  inline: Boolean,
  ...pt(),
  ...Ta()
}, "VResponsive"), Tb = We()({
  name: "VResponsive",
  props: BE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      aspectStyles: a
    } = WH(e), {
      dimensionStyles: r
    } = Ia(e);
    return Ye(() => T("div", {
      class: Ae(["v-responsive", {
        "v-responsive--inline": e.inline
      }, e.class]),
      style: Je([r.value, e.style])
    }, [T("div", {
      class: "v-responsive__sizer",
      style: Je(a.value)
    }, null), n.additional?.(), n.default && T("div", {
      class: Ae(["v-responsive__content", e.contentClass])
    }, [n.default()])])), {};
  }
});
function M0(e) {
  return Mw(() => {
    const t = ji(e), n = [], a = {};
    if (t.background)
      if (Yy(t.background)) {
        if (a.backgroundColor = t.background, !t.text && r4(t.background)) {
          const r = ui(t.background);
          if (r.a == null || r.a === 1) {
            const i = jT(r);
            a.color = i, a.caretColor = i;
          }
        }
      } else
        n.push(`bg-${t.background}`);
    return t.text && (Yy(t.text) ? (a.color = t.text, a.caretColor = t.text) : n.push(`text-${t.text}`)), {
      colorClasses: n,
      colorStyles: a
    };
  });
}
function sr(e) {
  const {
    colorClasses: t,
    colorStyles: n
  } = M0(() => ({
    text: ji(e)
  }));
  return {
    textColorClasses: t,
    textColorStyles: n
  };
}
function bn(e) {
  const {
    colorClasses: t,
    colorStyles: n
  } = M0(() => ({
    background: ji(e)
  }));
  return {
    backgroundColorClasses: t,
    backgroundColorStyles: n
  };
}
const qn = Be({
  rounded: {
    type: [Boolean, Number, String],
    default: void 0
  },
  tile: Boolean
}, "rounded");
function ra(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  return {
    roundedClasses: W(() => {
      const a = ga(e) ? e.value : e.rounded, r = ga(e) ? e.value : e.tile, i = [];
      if (a === !0 || a === "")
        i.push(`${t}--rounded`);
      else if (typeof a == "string" || a === 0)
        for (const o of String(a).split(" "))
          i.push(`rounded-${o}`);
      else (r || a === !1) && i.push("rounded-0");
      return i;
    })
  };
}
const eo = Be({
  transition: {
    type: null,
    default: "fade-transition",
    validator: (e) => e !== !0
  }
}, "transition"), Cr = (e, t) => {
  let {
    slots: n
  } = t;
  const {
    transition: a,
    disabled: r,
    group: i,
    ...o
  } = e, {
    component: l = i ? Ow : $r,
    ...s
  } = yf(a) ? a : {};
  let d;
  return yf(a) ? d = Fe(s, U3({
    disabled: r,
    group: i
  }), o) : d = Fe({
    name: r || !a ? "" : a
  }, o), Eo(l, d, n);
};
function KH(e, t) {
  if (!Dw) return;
  const n = t.modifiers || {}, a = t.value, {
    handler: r,
    options: i
  } = typeof a == "object" ? a : {
    handler: a,
    options: {}
  }, o = new IntersectionObserver(function() {
    let l = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], s = arguments.length > 1 ? arguments[1] : void 0;
    const d = e._observe?.[t.instance.$.uid];
    if (!d) return;
    const u = l.some((f) => f.isIntersecting);
    r && (!n.quiet || d.init) && (!n.once || u || d.init) && r(u, l, s), u && n.once ? VE(e, t) : d.init = !0;
  }, i);
  e._observe = Object(e._observe), e._observe[t.instance.$.uid] = {
    init: !1,
    observer: o
  }, o.observe(e);
}
function VE(e, t) {
  const n = e._observe?.[t.instance.$.uid];
  n && (n.observer.unobserve(e), delete e._observe[t.instance.$.uid]);
}
const is = {
  mounted: KH,
  unmounted: VE
}, ME = Be({
  absolute: Boolean,
  alt: String,
  cover: Boolean,
  color: String,
  draggable: {
    type: [Boolean, String],
    default: void 0
  },
  eager: Boolean,
  gradient: String,
  lazySrc: String,
  options: {
    type: Object,
    // For more information on types, navigate to:
    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    default: () => ({
      root: void 0,
      rootMargin: void 0,
      threshold: void 0
    })
  },
  sizes: String,
  src: {
    type: [String, Object],
    default: ""
  },
  crossorigin: String,
  referrerpolicy: String,
  srcset: String,
  position: String,
  ...BE(),
  ...pt(),
  ...qn(),
  ...eo()
}, "VImg"), os = We()({
  name: "VImg",
  directives: {
    vIntersect: is
  },
  props: ME(),
  emits: {
    loadstart: (e) => !0,
    load: (e) => !0,
    error: (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = bn(() => e.color), {
      roundedClasses: o
    } = ra(e), l = ya("VImg"), s = rt(""), d = be(), u = rt(e.eager ? "loading" : "idle"), f = rt(), h = rt(), y = W(() => e.src && typeof e.src == "object" ? {
      src: e.src.src,
      srcset: e.srcset || e.src.srcset,
      lazySrc: e.lazySrc || e.src.lazySrc,
      aspect: Number(e.aspectRatio || e.src.aspect || 0)
    } : {
      src: e.src,
      srcset: e.srcset,
      lazySrc: e.lazySrc,
      aspect: Number(e.aspectRatio || 0)
    }), p = W(() => y.value.aspect || f.value / h.value || 0);
    tt(() => e.src, () => {
      w(u.value !== "idle");
    }), tt(p, (V, B) => {
      !V && B && d.value && A(d.value);
    }), Wu(() => w());
    function w(V) {
      if (!(e.eager && V) && !(Dw && !V && !e.eager)) {
        if (u.value = "loading", y.value.lazySrc) {
          const B = new Image();
          B.src = y.value.lazySrc, A(B, null);
        }
        y.value.src && Dt(() => {
          n("loadstart", d.value?.currentSrc || y.value.src), setTimeout(() => {
            if (!l.isUnmounted)
              if (d.value?.complete) {
                if (d.value.naturalWidth || v(), u.value === "error") return;
                p.value || A(d.value, null), u.value === "loading" && b();
              } else
                p.value || A(d.value), g();
          });
        });
      }
    }
    function b() {
      l.isUnmounted || (g(), A(d.value), u.value = "loaded", n("load", d.value?.currentSrc || y.value.src));
    }
    function v() {
      l.isUnmounted || (u.value = "error", n("error", d.value?.currentSrc || y.value.src));
    }
    function g() {
      const V = d.value;
      V && (s.value = V.currentSrc || V.src);
    }
    let k = -1;
    Ja(() => {
      clearTimeout(k);
    });
    function A(V) {
      let B = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;
      const F = () => {
        if (clearTimeout(k), l.isUnmounted) return;
        const {
          naturalHeight: H,
          naturalWidth: K
        } = V;
        H || K ? (f.value = K, h.value = H) : !V.complete && u.value === "loading" && B != null ? k = window.setTimeout(F, B) : (V.currentSrc.endsWith(".svg") || V.currentSrc.startsWith("data:image/svg+xml")) && (f.value = 1, h.value = 1);
      };
      F();
    }
    const C = ye(() => ({
      "v-img__img--cover": e.cover,
      "v-img__img--contain": !e.cover
    })), D = () => {
      if (!y.value.src || u.value === "idle") return null;
      const V = T("img", {
        class: Ae(["v-img__img", C.value]),
        style: {
          objectPosition: e.position
        },
        crossorigin: e.crossorigin,
        src: y.value.src,
        srcset: y.value.srcset,
        alt: e.alt,
        referrerpolicy: e.referrerpolicy,
        draggable: e.draggable,
        sizes: e.sizes,
        ref: d,
        onLoad: b,
        onError: v
      }, null), B = a.sources?.();
      return _(Cr, {
        transition: e.transition,
        appear: !0
      }, {
        default: () => [sn(B ? T("picture", {
          class: "v-img__picture"
        }, [B, V]) : V, [[_a, u.value === "loaded"]])]
      });
    }, P = () => _(Cr, {
      transition: e.transition
    }, {
      default: () => [y.value.lazySrc && u.value !== "loaded" && T("img", {
        class: Ae(["v-img__img", "v-img__img--preload", C.value]),
        style: {
          objectPosition: e.position
        },
        crossorigin: e.crossorigin,
        src: y.value.lazySrc,
        alt: e.alt,
        referrerpolicy: e.referrerpolicy,
        draggable: e.draggable
      }, null)]
    }), O = () => a.placeholder ? _(Cr, {
      transition: e.transition,
      appear: !0
    }, {
      default: () => [(u.value === "loading" || u.value === "error" && !a.error) && T("div", {
        class: "v-img__placeholder"
      }, [a.placeholder()])]
    }) : null, I = () => a.error ? _(Cr, {
      transition: e.transition,
      appear: !0
    }, {
      default: () => [u.value === "error" && T("div", {
        class: "v-img__error"
      }, [a.error()])]
    }) : null, x = () => e.gradient ? T("div", {
      class: "v-img__gradient",
      style: {
        backgroundImage: `linear-gradient(${e.gradient})`
      }
    }, null) : null, M = rt(!1);
    {
      const V = tt(p, (B) => {
        B && (requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            M.value = !0;
          });
        }), V());
      });
    }
    return Ye(() => {
      const V = Tb.filterProps(e);
      return sn(_(Tb, Fe({
        class: ["v-img", {
          "v-img--absolute": e.absolute,
          "v-img--booting": !M.value
        }, r.value, o.value, e.class],
        style: [{
          width: ht(e.width === "auto" ? f.value : e.width)
        }, i.value, e.style]
      }, V, {
        aspectRatio: p.value,
        "aria-label": e.alt,
        role: e.alt ? "img" : void 0
      }), {
        additional: () => T(Ge, null, [_(D, null, null), _(P, null, null), _(x, null, null), _(O, null, null), _(I, null, null)]),
        default: a.default
      }), [[is, {
        handler: w,
        options: e.options
      }, null, {
        once: !0
      }]]);
    }), {
      currentSrc: s,
      image: d,
      state: u,
      naturalWidth: f,
      naturalHeight: h
    };
  }
}), Hr = Be({
  border: [Boolean, Number, String]
}, "border");
function Xr(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  return {
    borderClasses: W(() => {
      const a = e.border;
      return a === !0 || a === "" ? `${t}--border` : typeof a == "string" || a === 0 ? String(a).split(" ").map((r) => `border-${r}`) : [];
    })
  };
}
const Ua = Be({
  elevation: {
    type: [Number, String],
    validator(e) {
      const t = parseInt(e);
      return !isNaN(t) && t >= 0 && // Material Design has a maximum elevation of 24
      // https://material.io/design/environment/elevation.html#default-elevations
      t <= 24;
    }
  }
}, "elevation");
function Xa(e) {
  return {
    elevationClasses: ye(() => {
      const n = ga(e) ? e.value : e.elevation;
      return n == null ? [] : [`elevation-${n}`];
    })
  };
}
const jH = [null, "prominent", "default", "comfortable", "compact"], LE = Be({
  absolute: Boolean,
  collapse: Boolean,
  color: String,
  density: {
    type: String,
    default: "default",
    validator: (e) => jH.includes(e)
  },
  extended: {
    type: Boolean,
    default: null
  },
  extensionHeight: {
    type: [Number, String],
    default: 48
  },
  flat: Boolean,
  floating: Boolean,
  height: {
    type: [Number, String],
    default: 64
  },
  image: String,
  title: String,
  ...Hr(),
  ...pt(),
  ...Ua(),
  ...qn(),
  ...$t({
    tag: "header"
  }),
  ...rn()
}, "VToolbar"), Ib = We()({
  name: "VToolbar",
  props: LE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = bn(() => e.color), {
      borderClasses: i
    } = Xr(e), {
      elevationClasses: o
    } = Xa(e), {
      roundedClasses: l
    } = ra(e), {
      themeClasses: s
    } = gn(e), {
      rtlClasses: d
    } = Na(), u = rt(e.extended === null ? !!n.extension?.() : e.extended), f = W(() => parseInt(Number(e.height) + (e.density === "prominent" ? Number(e.height) : 0) - (e.density === "comfortable" ? 8 : 0) - (e.density === "compact" ? 16 : 0), 10)), h = W(() => u.value ? parseInt(Number(e.extensionHeight) + (e.density === "prominent" ? Number(e.extensionHeight) : 0) - (e.density === "comfortable" ? 4 : 0) - (e.density === "compact" ? 8 : 0), 10) : 0);
    return aa({
      VBtn: {
        variant: "text"
      }
    }), Ye(() => {
      const y = !!(e.title || n.title), p = !!(n.image || e.image), w = n.extension?.();
      return u.value = e.extended === null ? !!w : e.extended, _(e.tag, {
        class: Ae(["v-toolbar", {
          "v-toolbar--absolute": e.absolute,
          "v-toolbar--collapse": e.collapse,
          "v-toolbar--flat": e.flat,
          "v-toolbar--floating": e.floating,
          [`v-toolbar--density-${e.density}`]: !0
        }, a.value, i.value, o.value, l.value, s.value, d.value, e.class]),
        style: Je([r.value, e.style])
      }, {
        default: () => [p && T("div", {
          key: "image",
          class: "v-toolbar__image"
        }, [n.image ? _(Ht, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              cover: !0,
              src: e.image
            }
          }
        }, n.image) : _(os, {
          key: "image-img",
          cover: !0,
          src: e.image
        }, null)]), _(Ht, {
          defaults: {
            VTabs: {
              height: ht(f.value)
            }
          }
        }, {
          default: () => [T("div", {
            class: "v-toolbar__content",
            style: {
              height: ht(f.value)
            }
          }, [n.prepend && T("div", {
            class: "v-toolbar__prepend"
          }, [n.prepend?.()]), y && _(O0, {
            key: "title",
            text: e.title
          }, {
            text: n.title
          }), n.default?.(), n.append && T("div", {
            class: "v-toolbar__append"
          }, [n.append?.()])])]
        }), _(Ht, {
          defaults: {
            VTabs: {
              height: ht(h.value)
            }
          }
        }, {
          default: () => [_(Av, null, {
            default: () => [u.value && T("div", {
              class: "v-toolbar__extension",
              style: {
                height: ht(h.value)
              }
            }, [w])]
          })]
        })]
      });
    }), {
      contentHeight: f,
      extensionHeight: h
    };
  }
}), YH = Be({
  scrollTarget: {
    type: String
  },
  scrollThreshold: {
    type: [String, Number],
    default: 300
  }
}, "scroll");
function GH(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  const {
    canScroll: n
  } = t;
  let a = 0, r = 0;
  const i = be(null), o = rt(0), l = rt(0), s = rt(0), d = rt(!1), u = rt(!1), f = W(() => Number(e.scrollThreshold)), h = W(() => Dn((f.value - o.value) / f.value || 0)), y = () => {
    const p = i.value;
    if (!p || n && !n.value) return;
    a = o.value, o.value = "window" in p ? p.pageYOffset : p.scrollTop;
    const w = p instanceof Window ? document.documentElement.scrollHeight : p.scrollHeight;
    if (r !== w) {
      r = w;
      return;
    }
    u.value = o.value < a, s.value = Math.abs(o.value - f.value);
  };
  return tt(u, () => {
    l.value = l.value || o.value;
  }), tt(d, () => {
    l.value = 0;
  }), an(() => {
    tt(() => e.scrollTarget, (p) => {
      const w = p ? document.querySelector(p) : window;
      w && w !== i.value && (i.value?.removeEventListener("scroll", y), i.value = w, i.value.addEventListener("scroll", y, {
        passive: !0
      }));
    }, {
      immediate: !0
    });
  }), Ja(() => {
    i.value?.removeEventListener("scroll", y);
  }), n && tt(n, y, {
    immediate: !0
  }), {
    scrollThreshold: f,
    currentScroll: o,
    currentThreshold: s,
    isScrollActive: d,
    scrollRatio: h,
    // required only for testing
    // probably can be removed
    // later (2 chars chlng)
    isScrollingUp: u,
    savedScroll: l
  };
}
function _c() {
  const e = rt(!1);
  return an(() => {
    window.requestAnimationFrame(() => {
      e.value = !0;
    });
  }), {
    ssrBootStyles: ye(() => e.value ? void 0 : {
      transition: "none !important"
    }),
    isBooted: Hu(e)
  };
}
const QH = Be({
  scrollBehavior: String,
  modelValue: {
    type: Boolean,
    default: !0
  },
  location: {
    type: String,
    default: "top",
    validator: (e) => ["top", "bottom"].includes(e)
  },
  ...LE(),
  ...fc(),
  ...YH(),
  height: {
    type: [Number, String],
    default: 64
  }
}, "VAppBar"), JH = We()({
  name: "VAppBar",
  props: QH(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = be(), r = wt(e, "modelValue"), i = W(() => {
      const g = new Set(e.scrollBehavior?.split(" ") ?? []);
      return {
        hide: g.has("hide"),
        fullyHide: g.has("fully-hide"),
        inverted: g.has("inverted"),
        collapse: g.has("collapse"),
        elevate: g.has("elevate"),
        fadeImage: g.has("fade-image")
        // shrink: behavior.has('shrink'),
      };
    }), o = W(() => {
      const g = i.value;
      return g.hide || g.fullyHide || g.inverted || g.collapse || g.elevate || g.fadeImage || // behavior.shrink ||
      !r.value;
    }), {
      currentScroll: l,
      scrollThreshold: s,
      isScrollingUp: d,
      scrollRatio: u
    } = GH(e, {
      canScroll: o
    }), f = ye(() => i.value.hide || i.value.fullyHide), h = W(() => e.collapse || i.value.collapse && (i.value.inverted ? u.value > 0 : u.value === 0)), y = W(() => e.flat || i.value.fullyHide && !r.value || i.value.elevate && (i.value.inverted ? l.value > 0 : l.value === 0)), p = W(() => i.value.fadeImage ? i.value.inverted ? 1 - u.value : u.value : void 0), w = W(() => {
      if (i.value.hide && i.value.inverted) return 0;
      const g = a.value?.contentHeight ?? 0, k = a.value?.extensionHeight ?? 0;
      return f.value ? l.value < s.value || i.value.fullyHide ? g + k : g : g + k;
    });
    Ar(() => !!e.scrollBehavior, () => {
      na(() => {
        f.value ? i.value.inverted ? r.value = l.value > s.value : r.value = d.value || l.value < s.value : r.value = !0;
      });
    });
    const {
      ssrBootStyles: b
    } = _c(), {
      layoutItemStyles: v
    } = mc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: ye(() => e.location),
      layoutSize: w,
      elementSize: rt(void 0),
      active: r,
      absolute: ye(() => e.absolute)
    });
    return Ye(() => {
      const g = Ib.filterProps(e);
      return _(Ib, Fe({
        ref: a,
        class: ["v-app-bar", {
          "v-app-bar--bottom": e.location === "bottom"
        }, e.class],
        style: [{
          ...v.value,
          "--v-toolbar-image-opacity": p.value,
          height: void 0,
          ...b.value
        }, e.style]
      }, g, {
        collapse: h.value,
        flat: y.value
      }), n);
    }), {};
  }
}), XH = [null, "default", "comfortable", "compact"], Wa = Be({
  density: {
    type: String,
    default: "default",
    validator: (e) => XH.includes(e)
  }
}, "density");
function Tr(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  return {
    densityClasses: ye(() => `${t}--density-${e.density}`)
  };
}
const ZH = ["elevated", "flat", "tonal", "outlined", "text", "plain"];
function il(e, t) {
  return T(Ge, null, [e && T("span", {
    key: "overlay",
    class: Ae(`${t}__overlay`)
  }, null), T("span", {
    key: "underlay",
    class: Ae(`${t}__underlay`)
  }, null)]);
}
const Di = Be({
  color: String,
  variant: {
    type: String,
    default: "elevated",
    validator: (e) => ZH.includes(e)
  }
}, "variant");
function vc(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  const n = ye(() => {
    const {
      variant: i
    } = ji(e);
    return `${t}--variant-${i}`;
  }), {
    colorClasses: a,
    colorStyles: r
  } = M0(() => {
    const {
      variant: i,
      color: o
    } = ji(e);
    return {
      [["elevated", "flat"].includes(i) ? "background" : "text"]: o
    };
  });
  return {
    colorClasses: a,
    colorStyles: r,
    variantClasses: n
  };
}
const RE = Be({
  baseColor: String,
  divided: Boolean,
  direction: {
    type: String,
    default: "horizontal"
  },
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ua(),
  ...qn(),
  ...$t(),
  ...rn(),
  ...Di()
}, "VBtnGroup"), Eb = We()({
  name: "VBtnGroup",
  props: RE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      densityClasses: r
    } = Tr(e), {
      borderClasses: i
    } = Xr(e), {
      elevationClasses: o
    } = Xa(e), {
      roundedClasses: l
    } = ra(e);
    aa({
      VBtn: {
        height: ye(() => e.direction === "horizontal" ? "auto" : null),
        baseColor: ye(() => e.baseColor),
        color: ye(() => e.color),
        density: ye(() => e.density),
        flat: !0,
        variant: ye(() => e.variant)
      }
    }), Ye(() => _(e.tag, {
      class: Ae(["v-btn-group", `v-btn-group--${e.direction}`, {
        "v-btn-group--divided": e.divided
      }, a.value, i.value, r.value, o.value, l.value, e.class]),
      style: Je(e.style)
    }, n));
  }
}), pc = Be({
  modelValue: {
    type: null,
    default: void 0
  },
  multiple: Boolean,
  mandatory: [Boolean, String],
  max: Number,
  selectedClass: String,
  disabled: Boolean
}, "group"), gc = Be({
  value: null,
  disabled: Boolean,
  selectedClass: String
}, "group-item");
function yc(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0;
  const a = ya("useGroupItem");
  if (!a)
    throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");
  const r = qr();
  Ln(Symbol.for(`${t.description}:id`), r);
  const i = Gt(t, null);
  if (!i) {
    if (!n) return i;
    throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`);
  }
  const o = ye(() => e.value), l = W(() => !!(i.disabled.value || e.disabled));
  i.register({
    id: r,
    value: o,
    disabled: l
  }, a), Ja(() => {
    i.unregister(r);
  });
  const s = W(() => i.isSelected(r)), d = W(() => i.items.value[0].id === r), u = W(() => i.items.value[i.items.value.length - 1].id === r), f = W(() => s.value && [i.selectedClass.value, e.selectedClass]);
  return tt(s, (h) => {
    a.emit("group:selected", {
      value: h
    });
  }, {
    flush: "sync"
  }), {
    id: r,
    isSelected: s,
    isFirst: d,
    isLast: u,
    toggle: () => i.select(r, !s.value),
    select: (h) => i.select(r, h),
    selectedClass: f,
    value: o,
    disabled: l,
    group: i
  };
}
function ol(e, t) {
  let n = !1;
  const a = Zn([]), r = wt(e, "modelValue", [], (h) => h == null ? [] : FE(a, ta(h)), (h) => {
    const y = tz(a, h);
    return e.multiple ? y : y[0];
  }), i = ya("useGroup");
  function o(h, y) {
    const p = h, w = Symbol.for(`${t.description}:id`), v = iu(w, i?.vnode).indexOf(y);
    fe(p.value) == null && (p.value = v, p.useIndexAsValue = !0), v > -1 ? a.splice(v, 0, p) : a.push(p);
  }
  function l(h) {
    if (n) return;
    s();
    const y = a.findIndex((p) => p.id === h);
    a.splice(y, 1);
  }
  function s() {
    const h = a.find((y) => !y.disabled);
    h && e.mandatory === "force" && !r.value.length && (r.value = [h.id]);
  }
  an(() => {
    s();
  }), Ja(() => {
    n = !0;
  }), Sw(() => {
    for (let h = 0; h < a.length; h++)
      a[h].useIndexAsValue && (a[h].value = h);
  });
  function d(h, y) {
    const p = a.find((w) => w.id === h);
    if (!(y && p?.disabled))
      if (e.multiple) {
        const w = r.value.slice(), b = w.findIndex((g) => g === h), v = ~b;
        if (y = y ?? !v, v && e.mandatory && w.length <= 1 || !v && e.max != null && w.length + 1 > e.max) return;
        b < 0 && y ? w.push(h) : b >= 0 && !y && w.splice(b, 1), r.value = w;
      } else {
        const w = r.value.includes(h);
        if (e.mandatory && w || !w && !y) return;
        r.value = y ?? !w ? [h] : [];
      }
  }
  function u(h) {
    if (e.multiple, r.value.length) {
      const y = r.value[0], p = a.findIndex((v) => v.id === y);
      let w = (p + h) % a.length, b = a[w];
      for (; b.disabled && w !== p; )
        w = (w + h) % a.length, b = a[w];
      if (b.disabled) return;
      r.value = [a[w].id];
    } else {
      const y = a.find((p) => !p.disabled);
      y && (r.value = [y.id]);
    }
  }
  const f = {
    register: o,
    unregister: l,
    selected: r,
    select: d,
    disabled: ye(() => e.disabled),
    prev: () => u(a.length - 1),
    next: () => u(1),
    isSelected: (h) => r.value.includes(h),
    selectedClass: ye(() => e.selectedClass),
    items: ye(() => a),
    getItemIndex: (h) => ez(a, h)
  };
  return Ln(t, f), f;
}
function ez(e, t) {
  const n = FE(e, [t]);
  return n.length ? e.findIndex((a) => a.id === n[0]) : -1;
}
function FE(e, t) {
  const n = [];
  return t.forEach((a) => {
    const r = e.find((o) => Ga(a, o.value)), i = e[a];
    r?.value != null ? n.push(r.id) : i?.useIndexAsValue && n.push(i.id);
  }), n;
}
function tz(e, t) {
  const n = [];
  return t.forEach((a) => {
    const r = e.findIndex((i) => i.id === a);
    if (~r) {
      const i = e[r];
      n.push(i.value != null ? i.value : r);
    }
  }), n;
}
const L0 = Symbol.for("vuetify:v-btn-toggle"), nz = Be({
  ...RE(),
  ...pc()
}, "VBtnToggle"), az = We()({
  name: "VBtnToggle",
  props: nz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isSelected: a,
      next: r,
      prev: i,
      select: o,
      selected: l
    } = ol(e, L0);
    return Ye(() => {
      const s = Eb.filterProps(e);
      return _(Eb, Fe({
        class: ["v-btn-toggle", e.class]
      }, s, {
        style: e.style
      }), {
        default: () => [n.default?.({
          isSelected: a,
          next: r,
          prev: i,
          select: o,
          selected: l
        })]
      });
    }), {
      next: r,
      prev: i,
      select: o
    };
  }
}), rz = ["x-small", "small", "default", "large", "x-large"], Oo = Be({
  size: {
    type: [String, Number],
    default: "default"
  }
}, "size");
function Zu(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  return Mw(() => {
    const n = e.size;
    let a, r;
    return S_(rz, n) ? a = `${t}--size-${n}` : n && (r = {
      width: ht(n),
      height: ht(n)
    }), {
      sizeClasses: a,
      sizeStyles: r
    };
  });
}
const iz = Be({
  color: String,
  disabled: Boolean,
  start: Boolean,
  end: Boolean,
  icon: St,
  opacity: [String, Number],
  ...pt(),
  ...Oo(),
  ...$t({
    tag: "i"
  }),
  ...rn()
}, "VIcon"), pn = We()({
  name: "VIcon",
  props: iz(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = rt(), {
      themeClasses: i
    } = Kw(), {
      iconData: o
    } = S8(() => r.value || e.icon), {
      sizeClasses: l
    } = Zu(e), {
      textColorClasses: s,
      textColorStyles: d
    } = sr(() => e.color);
    return Ye(() => {
      const u = a.default?.();
      u && (r.value = OT(u).filter((h) => h.type === Hf && h.children && typeof h.children == "string")[0]?.children);
      const f = !!(n.onClick || n.onClickOnce);
      return _(o.value.component, {
        tag: e.tag,
        icon: o.value.icon,
        class: Ae(["v-icon", "notranslate", i.value, l.value, s.value, {
          "v-icon--clickable": f,
          "v-icon--disabled": e.disabled,
          "v-icon--start": e.start,
          "v-icon--end": e.end
        }, e.class]),
        style: Je([{
          "--v-icon-opacity": e.opacity
        }, l.value ? void 0 : {
          fontSize: ht(e.size),
          height: ht(e.size),
          width: ht(e.size)
        }, d.value, e.style]),
        role: f ? "button" : void 0,
        "aria-hidden": !f,
        tabindex: f ? e.disabled ? -1 : 0 : void 0
      }, {
        default: () => [u]
      });
    }), {};
  }
});
function nm(e, t) {
  const n = be(), a = rt(!1);
  if (Dw) {
    const r = new IntersectionObserver((i) => {
      a.value = !!i.find((o) => o.isIntersecting);
    }, t);
    Fa(() => {
      r.disconnect();
    }), tt(n, (i, o) => {
      o && (r.unobserve(o), a.value = !1), i && r.observe(i);
    }, {
      flush: "post"
    });
  }
  return {
    intersectionRef: n,
    isIntersecting: a
  };
}
const oz = Be({
  bgColor: String,
  color: String,
  indeterminate: [Boolean, String],
  modelValue: {
    type: [Number, String],
    default: 0
  },
  rotate: {
    type: [Number, String],
    default: 0
  },
  width: {
    type: [Number, String],
    default: 4
  },
  ...pt(),
  ...Oo(),
  ...$t({
    tag: "div"
  }),
  ...rn()
}, "VProgressCircular"), rc = We()({
  name: "VProgressCircular",
  props: oz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = 20, r = 2 * Math.PI * a, i = be(), {
      themeClasses: o
    } = gn(e), {
      sizeClasses: l,
      sizeStyles: s
    } = Zu(e), {
      textColorClasses: d,
      textColorStyles: u
    } = sr(() => e.color), {
      textColorClasses: f,
      textColorStyles: h
    } = sr(() => e.bgColor), {
      intersectionRef: y,
      isIntersecting: p
    } = nm(), {
      resizeRef: w,
      contentRect: b
    } = Gi(), v = ye(() => Dn(parseFloat(e.modelValue), 0, 100)), g = ye(() => Number(e.width)), k = ye(() => s.value ? Number(e.size) : b.value ? b.value.width : Math.max(g.value, 32)), A = ye(() => a / (1 - g.value / k.value) * 2), C = ye(() => g.value / k.value * A.value), D = ye(() => ht((100 - v.value) / 100 * r));
    return na(() => {
      y.value = i.value, w.value = i.value;
    }), Ye(() => _(e.tag, {
      ref: i,
      class: Ae(["v-progress-circular", {
        "v-progress-circular--indeterminate": !!e.indeterminate,
        "v-progress-circular--visible": p.value,
        "v-progress-circular--disable-shrink": e.indeterminate === "disable-shrink"
      }, o.value, l.value, d.value, e.class]),
      style: Je([s.value, u.value, e.style]),
      role: "progressbar",
      "aria-valuemin": "0",
      "aria-valuemax": "100",
      "aria-valuenow": e.indeterminate ? void 0 : v.value
    }, {
      default: () => [T("svg", {
        style: {
          transform: `rotate(calc(-90deg + ${Number(e.rotate)}deg))`
        },
        xmlns: "http://www.w3.org/2000/svg",
        viewBox: `0 0 ${A.value} ${A.value}`
      }, [T("circle", {
        class: Ae(["v-progress-circular__underlay", f.value]),
        style: Je(h.value),
        fill: "transparent",
        cx: "50%",
        cy: "50%",
        r: a,
        "stroke-width": C.value,
        "stroke-dasharray": r,
        "stroke-dashoffset": 0
      }, null), T("circle", {
        class: "v-progress-circular__overlay",
        fill: "transparent",
        cx: "50%",
        cy: "50%",
        r: a,
        "stroke-width": C.value,
        "stroke-dasharray": r,
        "stroke-dashoffset": D.value
      }, null)]), n.default && T("div", {
        class: "v-progress-circular__content"
      }, [n.default({
        value: v.value
      })])]
    })), {};
  }
}), lA = {
  center: "center",
  top: "bottom",
  bottom: "top",
  left: "right",
  right: "left"
}, fs = Be({
  location: String
}, "location");
function bc(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1, n = arguments.length > 2 ? arguments[2] : void 0;
  const {
    isRtl: a
  } = Na();
  return {
    locationStyles: W(() => {
      if (!e.location) return {};
      const {
        side: i,
        align: o
      } = Ky(e.location.split(" ").length > 1 ? e.location : `${e.location} center`, a.value);
      function l(d) {
        return n ? n(d) : 0;
      }
      const s = {};
      return i !== "center" && (t ? s[lA[i]] = `calc(100% - ${l(i)}px)` : s[i] = 0), o !== "center" ? t ? s[lA[o]] = `calc(100% - ${l(o)}px)` : s[o] = 0 : (i === "center" ? s.top = s.left = "50%" : s[{
        top: "left",
        bottom: "left",
        left: "top",
        right: "top"
      }[i]] = "50%", s.transform = {
        top: "translateX(-50%)",
        bottom: "translateX(-50%)",
        left: "translateY(-50%)",
        right: "translateY(-50%)",
        center: "translate(-50%, -50%)"
      }[i]), s;
    })
  };
}
const sz = Be({
  absolute: Boolean,
  active: {
    type: Boolean,
    default: !0
  },
  bgColor: String,
  bgOpacity: [Number, String],
  bufferValue: {
    type: [Number, String],
    default: 0
  },
  bufferColor: String,
  bufferOpacity: [Number, String],
  clickable: Boolean,
  color: String,
  height: {
    type: [Number, String],
    default: 4
  },
  indeterminate: Boolean,
  max: {
    type: [Number, String],
    default: 100
  },
  modelValue: {
    type: [Number, String],
    default: 0
  },
  opacity: [Number, String],
  reverse: Boolean,
  stream: Boolean,
  striped: Boolean,
  roundedBar: Boolean,
  ...pt(),
  ...fs({
    location: "top"
  }),
  ...qn(),
  ...$t(),
  ...rn()
}, "VProgressLinear"), xv = We()({
  name: "VProgressLinear",
  props: sz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), {
      isRtl: r,
      rtlClasses: i
    } = Na(), {
      themeClasses: o
    } = gn(e), {
      locationStyles: l
    } = bc(e), {
      textColorClasses: s,
      textColorStyles: d
    } = sr(() => e.color), {
      backgroundColorClasses: u,
      backgroundColorStyles: f
    } = bn(() => e.bgColor || e.color), {
      backgroundColorClasses: h,
      backgroundColorStyles: y
    } = bn(() => e.bufferColor || e.bgColor || e.color), {
      backgroundColorClasses: p,
      backgroundColorStyles: w
    } = bn(() => e.color), {
      roundedClasses: b
    } = ra(e), {
      intersectionRef: v,
      isIntersecting: g
    } = nm(), k = W(() => parseFloat(e.max)), A = W(() => parseFloat(e.height)), C = W(() => Dn(parseFloat(e.bufferValue) / k.value * 100, 0, 100)), D = W(() => Dn(parseFloat(a.value) / k.value * 100, 0, 100)), P = W(() => r.value !== e.reverse), O = W(() => e.indeterminate ? "fade-transition" : "slide-x-transition"), I = _n && window.matchMedia?.("(forced-colors: active)").matches;
    function x(M) {
      if (!v.value) return;
      const {
        left: V,
        right: B,
        width: F
      } = v.value.getBoundingClientRect(), H = P.value ? F - M.clientX + (B - F) : M.clientX - V;
      a.value = Math.round(H / F * k.value);
    }
    return Ye(() => _(e.tag, {
      ref: v,
      class: Ae(["v-progress-linear", {
        "v-progress-linear--absolute": e.absolute,
        "v-progress-linear--active": e.active && g.value,
        "v-progress-linear--reverse": P.value,
        "v-progress-linear--rounded": e.rounded,
        "v-progress-linear--rounded-bar": e.roundedBar,
        "v-progress-linear--striped": e.striped,
        "v-progress-linear--clickable": e.clickable
      }, b.value, o.value, i.value, e.class]),
      style: Je([{
        bottom: e.location === "bottom" ? 0 : void 0,
        top: e.location === "top" ? 0 : void 0,
        height: e.active ? ht(A.value) : 0,
        "--v-progress-linear-height": ht(A.value),
        ...e.absolute ? l.value : {}
      }, e.style]),
      role: "progressbar",
      "aria-hidden": e.active ? "false" : "true",
      "aria-valuemin": "0",
      "aria-valuemax": e.max,
      "aria-valuenow": e.indeterminate ? void 0 : Math.min(parseFloat(a.value), k.value),
      onClick: e.clickable && x
    }, {
      default: () => [e.stream && T("div", {
        key: "stream",
        class: Ae(["v-progress-linear__stream", s.value]),
        style: {
          ...d.value,
          [P.value ? "left" : "right"]: ht(-A.value),
          borderTop: `${ht(A.value / 2)} dotted`,
          opacity: parseFloat(e.bufferOpacity),
          top: `calc(50% - ${ht(A.value / 4)})`,
          width: ht(100 - C.value, "%"),
          "--v-progress-linear-stream-to": ht(A.value * (P.value ? 1 : -1))
        }
      }, null), T("div", {
        class: Ae(["v-progress-linear__background", I ? void 0 : u.value]),
        style: Je([f.value, {
          opacity: parseFloat(e.bgOpacity),
          width: e.stream ? 0 : void 0
        }])
      }, null), T("div", {
        class: Ae(["v-progress-linear__buffer", I ? void 0 : h.value]),
        style: Je([y.value, {
          opacity: parseFloat(e.bufferOpacity),
          width: ht(C.value, "%")
        }])
      }, null), _($r, {
        name: O.value
      }, {
        default: () => [e.indeterminate ? T("div", {
          class: "v-progress-linear__indeterminate"
        }, [["long", "short"].map((M) => T("div", {
          key: M,
          class: Ae(["v-progress-linear__indeterminate", M, I ? void 0 : p.value]),
          style: Je(w.value)
        }, null))]) : T("div", {
          class: Ae(["v-progress-linear__determinate", I ? void 0 : p.value]),
          style: Je([w.value, {
            width: ht(D.value, "%")
          }])
        }, null)]
      }), n.default && T("div", {
        class: "v-progress-linear__content"
      }, [n.default({
        value: D.value,
        buffer: C.value
      })])]
    })), {};
  }
}), Tv = Be({
  loading: [Boolean, String]
}, "loader");
function am(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  return {
    loaderClasses: ye(() => ({
      [`${t}--loading`]: e.loading
    }))
  };
}
function rm(e, t) {
  let {
    slots: n
  } = t;
  return T("div", {
    class: Ae(`${e.name}__loader`)
  }, [n.default?.({
    color: e.color,
    isActive: e.active
  }) || _(xv, {
    absolute: e.absolute,
    active: e.active,
    color: e.color,
    height: "2",
    indeterminate: !0
  }, null)]);
}
const lz = ["static", "relative", "fixed", "absolute", "sticky"], ed = Be({
  position: {
    type: String,
    validator: (
      /* istanbul ignore next */
      (e) => lz.includes(e)
    )
  }
}, "position");
function td(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  return {
    positionClasses: ye(() => e.position ? `${t}--${e.position}` : void 0)
  };
}
function cz() {
  const e = ya("useRoute");
  return W(() => e?.proxy?.$route);
}
function NE() {
  return ya("useRouter")?.proxy?.$router;
}
function im(e, t) {
  const n = Ku("RouterLink"), a = ye(() => !!(e.href || e.to)), r = W(() => a?.value || QS(t, "click") || QS(e, "click"));
  if (typeof n == "string" || !("useLink" in n)) {
    const u = ye(() => e.href);
    return {
      isLink: a,
      isClickable: r,
      href: u,
      linkProps: Zn({
        href: u
      })
    };
  }
  const i = n.useLink({
    to: ye(() => e.to || ""),
    replace: ye(() => e.replace)
  }), o = W(() => e.to ? i : void 0), l = cz(), s = W(() => o.value ? e.exact ? l.value ? o.value.isExactActive?.value && Ga(o.value.route.value.query, l.value.query) : o.value.isExactActive?.value ?? !1 : o.value.isActive?.value ?? !1 : !1), d = W(() => e.to ? o.value?.route.value.href : e.href);
  return {
    isLink: a,
    isClickable: r,
    isActive: s,
    route: o.value?.route,
    navigate: o.value?.navigate,
    href: d,
    linkProps: Zn({
      href: d,
      "aria-current": ye(() => s.value ? "page" : void 0)
    })
  };
}
const om = Be({
  href: String,
  replace: Boolean,
  to: [String, Object],
  exact: Boolean
}, "router");
let _y = !1;
function uz(e, t) {
  let n = !1, a, r;
  _n && e?.beforeEach && (Dt(() => {
    window.addEventListener("popstate", i), a = e.beforeEach((o, l, s) => {
      _y ? n ? t(s) : s() : setTimeout(() => n ? t(s) : s()), _y = !0;
    }), r = e?.afterEach(() => {
      _y = !1;
    });
  }), Fa(() => {
    window.removeEventListener("popstate", i), a?.(), r?.();
  }));
  function i(o) {
    o.state?.replaced || (n = !0, setTimeout(() => n = !1));
  }
}
function dz(e, t) {
  tt(() => e.isActive?.value, (n) => {
    e.isLink.value && n != null && t && Dt(() => {
      t(n);
    });
  }, {
    immediate: !0
  });
}
const Pb = Symbol("rippleStop"), fz = 80;
function cA(e, t) {
  e.style.transform = t, e.style.webkitTransform = t;
}
function Ob(e) {
  return e.constructor.name === "TouchEvent";
}
function UE(e) {
  return e.constructor.name === "KeyboardEvent";
}
const mz = function(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, a = 0, r = 0;
  if (!UE(e)) {
    const f = t.getBoundingClientRect(), h = Ob(e) ? e.touches[e.touches.length - 1] : e;
    a = h.clientX - f.left, r = h.clientY - f.top;
  }
  let i = 0, o = 0.3;
  t._ripple?.circle ? (o = 0.15, i = t.clientWidth / 2, i = n.center ? i : i + Math.sqrt((a - i) ** 2 + (r - i) ** 2) / 4) : i = Math.sqrt(t.clientWidth ** 2 + t.clientHeight ** 2) / 2;
  const l = `${(t.clientWidth - i * 2) / 2}px`, s = `${(t.clientHeight - i * 2) / 2}px`, d = n.center ? l : `${a - i}px`, u = n.center ? s : `${r - i}px`;
  return {
    radius: i,
    scale: o,
    x: d,
    y: u,
    centerX: l,
    centerY: s
  };
}, W_ = {
  /* eslint-disable max-statements */
  show(e, t) {
    let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    if (!t?._ripple?.enabled)
      return;
    const a = document.createElement("span"), r = document.createElement("span");
    a.appendChild(r), a.className = "v-ripple__container", n.class && (a.className += ` ${n.class}`);
    const {
      radius: i,
      scale: o,
      x: l,
      y: s,
      centerX: d,
      centerY: u
    } = mz(e, t, n), f = `${i * 2}px`;
    r.className = "v-ripple__animation", r.style.width = f, r.style.height = f, t.appendChild(a);
    const h = window.getComputedStyle(t);
    h && h.position === "static" && (t.style.position = "relative", t.dataset.previousPosition = "static"), r.classList.add("v-ripple__animation--enter"), r.classList.add("v-ripple__animation--visible"), cA(r, `translate(${l}, ${s}) scale3d(${o},${o},${o})`), r.dataset.activated = String(performance.now()), requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        r.classList.remove("v-ripple__animation--enter"), r.classList.add("v-ripple__animation--in"), cA(r, `translate(${d}, ${u}) scale3d(1,1,1)`);
      });
    });
  },
  hide(e) {
    if (!e?._ripple?.enabled) return;
    const t = e.getElementsByClassName("v-ripple__animation");
    if (t.length === 0) return;
    const n = Array.from(t).findLast((i) => !i.dataset.isHiding);
    if (n) n.dataset.isHiding = "true";
    else return;
    const a = performance.now() - Number(n.dataset.activated), r = Math.max(250 - a, 0);
    setTimeout(() => {
      n.classList.remove("v-ripple__animation--in"), n.classList.add("v-ripple__animation--out"), setTimeout(() => {
        e.getElementsByClassName("v-ripple__animation").length === 1 && e.dataset.previousPosition && (e.style.position = e.dataset.previousPosition, delete e.dataset.previousPosition), n.parentNode?.parentNode === e && e.removeChild(n.parentNode);
      }, 300);
    }, r);
  }
};
function $E(e) {
  return typeof e > "u" || !!e;
}
function Bf(e) {
  const t = {}, n = e.currentTarget;
  if (!(!n?._ripple || n._ripple.touched || e[Pb])) {
    if (e[Pb] = !0, Ob(e))
      n._ripple.touched = !0, n._ripple.isTouch = !0;
    else if (n._ripple.isTouch) return;
    if (t.center = n._ripple.centered || UE(e), n._ripple.class && (t.class = n._ripple.class), Ob(e)) {
      if (n._ripple.showTimerCommit) return;
      n._ripple.showTimerCommit = () => {
        W_.show(e, n, t);
      }, n._ripple.showTimer = window.setTimeout(() => {
        n?._ripple?.showTimerCommit && (n._ripple.showTimerCommit(), n._ripple.showTimerCommit = null);
      }, fz);
    } else
      W_.show(e, n, t);
  }
}
function uA(e) {
  e[Pb] = !0;
}
function si(e) {
  const t = e.currentTarget;
  if (t?._ripple) {
    if (window.clearTimeout(t._ripple.showTimer), e.type === "touchend" && t._ripple.showTimerCommit) {
      t._ripple.showTimerCommit(), t._ripple.showTimerCommit = null, t._ripple.showTimer = window.setTimeout(() => {
        si(e);
      });
      return;
    }
    window.setTimeout(() => {
      t._ripple && (t._ripple.touched = !1);
    }), W_.hide(t);
  }
}
function qE(e) {
  const t = e.currentTarget;
  t?._ripple && (t._ripple.showTimerCommit && (t._ripple.showTimerCommit = null), window.clearTimeout(t._ripple.showTimer));
}
let Vf = !1;
function dA(e, t) {
  !Vf && t.includes(e.key) && (Vf = !0, Bf(e));
}
function HE(e) {
  Vf = !1, si(e);
}
function zE(e) {
  Vf && (Vf = !1, si(e));
}
function WE(e, t, n) {
  const {
    value: a,
    modifiers: r
  } = t, i = $E(a);
  i || W_.hide(e), e._ripple = e._ripple ?? {}, e._ripple.enabled = i, e._ripple.centered = r.center, e._ripple.circle = r.circle;
  const o = yf(a) ? a : {};
  o.class && (e._ripple.class = o.class);
  const l = o.keys ?? ["Enter", "Space"];
  if (e._ripple.keyDownHandler = (s) => dA(s, l), i && !n) {
    if (r.stop) {
      e.addEventListener("touchstart", uA, {
        passive: !0
      }), e.addEventListener("mousedown", uA);
      return;
    }
    e.addEventListener("touchstart", Bf, {
      passive: !0
    }), e.addEventListener("touchend", si, {
      passive: !0
    }), e.addEventListener("touchmove", qE, {
      passive: !0
    }), e.addEventListener("touchcancel", si), e.addEventListener("mousedown", Bf), e.addEventListener("mouseup", si), e.addEventListener("mouseleave", si), e.addEventListener("keydown", (s) => dA(s, l)), e.addEventListener("keyup", HE), e.addEventListener("blur", zE), e.addEventListener("dragstart", si, {
      passive: !0
    });
  } else !i && n && KE(e);
}
function KE(e) {
  e.removeEventListener("mousedown", Bf), e.removeEventListener("touchstart", Bf), e.removeEventListener("touchend", si), e.removeEventListener("touchmove", qE), e.removeEventListener("touchcancel", si), e.removeEventListener("mouseup", si), e.removeEventListener("mouseleave", si), e._ripple?.keyDownHandler && e.removeEventListener("keydown", e._ripple.keyDownHandler), e.removeEventListener("keyup", HE), e.removeEventListener("dragstart", si), e.removeEventListener("blur", zE);
}
function hz(e, t) {
  WE(e, t, !1);
}
function _z(e) {
  KE(e), delete e._ripple;
}
function vz(e, t) {
  if (t.value === t.oldValue)
    return;
  const n = $E(t.oldValue);
  WE(e, t, n);
}
const xr = {
  mounted: hz,
  unmounted: _z,
  updated: vz
}, Iv = Be({
  active: {
    type: Boolean,
    default: void 0
  },
  activeColor: String,
  baseColor: String,
  symbol: {
    type: null,
    default: L0
  },
  flat: Boolean,
  icon: [Boolean, String, Function, Object],
  prependIcon: St,
  appendIcon: St,
  block: Boolean,
  readonly: Boolean,
  slim: Boolean,
  stacked: Boolean,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ta(),
  ...Ua(),
  ...gc(),
  ...Tv(),
  ...fs(),
  ...ed(),
  ...qn(),
  ...om(),
  ...Oo(),
  ...$t({
    tag: "button"
  }),
  ...rn(),
  ...Di({
    variant: "elevated"
  })
}, "VBtn"), Xt = We()({
  name: "VBtn",
  props: Iv(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = gn(e), {
      borderClasses: i
    } = Xr(e), {
      densityClasses: o
    } = Tr(e), {
      dimensionStyles: l
    } = Ia(e), {
      elevationClasses: s
    } = Xa(e), {
      loaderClasses: d
    } = am(e), {
      locationStyles: u
    } = bc(e), {
      positionClasses: f
    } = td(e), {
      roundedClasses: h
    } = ra(e), {
      sizeClasses: y,
      sizeStyles: p
    } = Zu(e), w = yc(e, e.symbol, !1), b = im(e, n), v = W(() => e.active !== void 0 ? e.active : b.isLink.value ? b.isActive?.value : w?.isSelected.value), g = ye(() => v.value ? e.activeColor ?? e.color : e.color), k = W(() => ({
      color: w?.isSelected.value && (!b.isLink.value || b.isActive?.value) || !w || b.isActive?.value ? g.value ?? e.baseColor : e.baseColor,
      variant: e.variant
    })), {
      colorClasses: A,
      colorStyles: C,
      variantClasses: D
    } = vc(k), P = W(() => w?.disabled.value || e.disabled), O = ye(() => e.variant === "elevated" && !(e.disabled || e.flat || e.border)), I = W(() => {
      if (!(e.value === void 0 || typeof e.value == "symbol"))
        return Object(e.value) === e.value ? JSON.stringify(e.value, null, 0) : e.value;
    });
    function x(M) {
      P.value || b.isLink.value && (M.metaKey || M.ctrlKey || M.shiftKey || M.button !== 0 || n.target === "_blank") || (b.navigate?.(M), w?.toggle());
    }
    return dz(b, w?.select), Ye(() => {
      const M = b.isLink.value ? "a" : e.tag, V = !!(e.prependIcon || a.prepend), B = !!(e.appendIcon || a.append), F = !!(e.icon && e.icon !== !0);
      return sn(_(M, Fe({
        type: M === "a" ? void 0 : "button",
        class: ["v-btn", w?.selectedClass.value, {
          "v-btn--active": v.value,
          "v-btn--block": e.block,
          "v-btn--disabled": P.value,
          "v-btn--elevated": O.value,
          "v-btn--flat": e.flat,
          "v-btn--icon": !!e.icon,
          "v-btn--loading": e.loading,
          "v-btn--readonly": e.readonly,
          "v-btn--slim": e.slim,
          "v-btn--stacked": e.stacked
        }, r.value, i.value, A.value, o.value, s.value, d.value, f.value, h.value, y.value, D.value, e.class],
        style: [C.value, l.value, u.value, p.value, e.style],
        "aria-busy": e.loading ? !0 : void 0,
        disabled: P.value || void 0,
        tabindex: e.loading || e.readonly ? -1 : void 0,
        onClick: x,
        value: I.value
      }, b.linkProps), {
        default: () => [il(!0, "v-btn"), !e.icon && V && T("span", {
          key: "prepend",
          class: "v-btn__prepend"
        }, [a.prepend ? _(Ht, {
          key: "prepend-defaults",
          disabled: !e.prependIcon,
          defaults: {
            VIcon: {
              icon: e.prependIcon
            }
          }
        }, a.prepend) : _(pn, {
          key: "prepend-icon",
          icon: e.prependIcon
        }, null)]), T("span", {
          class: "v-btn__content",
          "data-no-activator": ""
        }, [!a.default && F ? _(pn, {
          key: "content-icon",
          icon: e.icon
        }, null) : _(Ht, {
          key: "content-defaults",
          disabled: !F,
          defaults: {
            VIcon: {
              icon: e.icon
            }
          }
        }, {
          default: () => [a.default?.() ?? j(e.text)]
        })]), !e.icon && B && T("span", {
          key: "append",
          class: "v-btn__append"
        }, [a.append ? _(Ht, {
          key: "append-defaults",
          disabled: !e.appendIcon,
          defaults: {
            VIcon: {
              icon: e.appendIcon
            }
          }
        }, a.append) : _(pn, {
          key: "append-icon",
          icon: e.appendIcon
        }, null)]), !!e.loading && T("span", {
          key: "loader",
          class: "v-btn__loader"
        }, [a.loader?.() ?? _(rc, {
          color: typeof e.loading == "boolean" ? void 0 : e.loading,
          indeterminate: !0,
          width: "2"
        }, null)])]
      }), [[xr, !P.value && e.ripple, "", {
        center: !!e.icon
      }]]);
    }), {
      group: w
    };
  }
}), pz = Be({
  ...Iv({
    icon: "$menu",
    variant: "text"
  })
}, "VAppBarNavIcon"), gz = We()({
  name: "VAppBarNavIcon",
  props: pz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(Xt, Fe(e, {
      class: ["v-app-bar-nav-icon"]
    }), n)), {};
  }
}), yz = We()({
  name: "VAppBarTitle",
  props: PE(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(O0, Fe(e, {
      class: "v-app-bar-title"
    }), n)), {};
  }
}), jE = ds("v-alert-title"), bz = Be({
  iconSize: [Number, String],
  iconSizes: {
    type: Array,
    default: () => [["x-small", 10], ["small", 16], ["default", 24], ["large", 28], ["x-large", 32]]
  }
}, "iconSize");
function wz(e, t) {
  return {
    iconSize: W(() => {
      const a = new Map(e.iconSizes), r = e.iconSize ?? t() ?? "default";
      return a.has(r) ? a.get(r) : r;
    })
  };
}
const kz = ["success", "info", "warning", "error"], Sz = Be({
  border: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || ["top", "end", "bottom", "start"].includes(e)
  },
  borderColor: String,
  closable: Boolean,
  closeIcon: {
    type: St,
    default: "$close"
  },
  closeLabel: {
    type: String,
    default: "$vuetify.close"
  },
  icon: {
    type: [Boolean, String, Function, Object],
    default: null
  },
  modelValue: {
    type: Boolean,
    default: !0
  },
  prominent: Boolean,
  title: String,
  text: String,
  type: {
    type: String,
    validator: (e) => kz.includes(e)
  },
  ...pt(),
  ...Wa(),
  ...Ta(),
  ...Ua(),
  ...bz(),
  ...fs(),
  ...ed(),
  ...qn(),
  ...$t(),
  ...rn(),
  ...Di({
    variant: "flat"
  })
}, "VAlert"), Cz = We()({
  name: "VAlert",
  props: Sz(),
  emits: {
    "click:close": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = wt(e, "modelValue"), i = ye(() => {
      if (e.icon !== !1)
        return e.type ? e.icon ?? `$${e.type}` : e.icon;
    }), {
      iconSize: o
    } = wz(e, () => e.prominent ? 44 : void 0), {
      themeClasses: l
    } = gn(e), {
      colorClasses: s,
      colorStyles: d,
      variantClasses: u
    } = vc(() => ({
      color: e.color ?? e.type,
      variant: e.variant
    })), {
      densityClasses: f
    } = Tr(e), {
      dimensionStyles: h
    } = Ia(e), {
      elevationClasses: y
    } = Xa(e), {
      locationStyles: p
    } = bc(e), {
      positionClasses: w
    } = td(e), {
      roundedClasses: b
    } = ra(e), {
      textColorClasses: v,
      textColorStyles: g
    } = sr(() => e.borderColor), {
      t: k
    } = kn(), A = ye(() => ({
      "aria-label": k(e.closeLabel),
      onClick(C) {
        r.value = !1, n("click:close", C);
      }
    }));
    return () => {
      const C = !!(a.prepend || i.value), D = !!(a.title || e.title), P = !!(a.close || e.closable), O = {
        density: e.density,
        icon: i.value,
        size: e.iconSize || e.prominent ? o.value : void 0
      };
      return r.value && _(e.tag, {
        class: Ae(["v-alert", e.border && {
          "v-alert--border": !!e.border,
          [`v-alert--border-${e.border === !0 ? "start" : e.border}`]: !0
        }, {
          "v-alert--prominent": e.prominent
        }, l.value, s.value, f.value, y.value, w.value, b.value, u.value, e.class]),
        style: Je([d.value, h.value, p.value, e.style]),
        role: "alert"
      }, {
        default: () => [il(!1, "v-alert"), e.border && T("div", {
          key: "border",
          class: Ae(["v-alert__border", v.value]),
          style: Je(g.value)
        }, null), C && T("div", {
          key: "prepend",
          class: "v-alert__prepend"
        }, [a.prepend ? _(Ht, {
          key: "prepend-defaults",
          disabled: !i.value,
          defaults: {
            VIcon: {
              ...O
            }
          }
        }, a.prepend) : _(pn, Fe({
          key: "prepend-icon"
        }, O), null)]), T("div", {
          class: "v-alert__content"
        }, [D && _(jE, {
          key: "title"
        }, {
          default: () => [a.title?.() ?? e.title]
        }), a.text?.() ?? e.text, a.default?.()]), a.append && T("div", {
          key: "append",
          class: "v-alert__append"
        }, [a.append()]), P && T("div", {
          key: "close",
          class: "v-alert__close"
        }, [a.close ? _(Ht, {
          key: "close-defaults",
          defaults: {
            VBtn: {
              icon: e.closeIcon,
              size: "x-small",
              variant: "text"
            }
          }
        }, {
          default: () => [a.close?.({
            props: A.value
          })]
        }) : _(Xt, Fe({
          key: "close-btn",
          icon: e.closeIcon,
          size: "x-small",
          variant: "text"
        }, A.value), null)])]
      });
    };
  }
}), Az = Be({
  start: Boolean,
  end: Boolean,
  icon: St,
  image: String,
  text: String,
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...qn(),
  ...Oo(),
  ...$t(),
  ...rn(),
  ...Di({
    variant: "flat"
  })
}, "VAvatar"), Oi = We()({
  name: "VAvatar",
  props: Az(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      borderClasses: r
    } = Xr(e), {
      colorClasses: i,
      colorStyles: o,
      variantClasses: l
    } = vc(e), {
      densityClasses: s
    } = Tr(e), {
      roundedClasses: d
    } = ra(e), {
      sizeClasses: u,
      sizeStyles: f
    } = Zu(e);
    return Ye(() => _(e.tag, {
      class: Ae(["v-avatar", {
        "v-avatar--start": e.start,
        "v-avatar--end": e.end
      }, a.value, r.value, i.value, s.value, d.value, u.value, l.value, e.class]),
      style: Je([o.value, f.value, e.style])
    }, {
      default: () => [n.default ? _(Ht, {
        key: "content-defaults",
        defaults: {
          VImg: {
            cover: !0,
            src: e.image
          },
          VIcon: {
            icon: e.icon
          }
        }
      }, {
        default: () => [n.default()]
      }) : e.image ? _(os, {
        key: "image",
        src: e.image,
        alt: "",
        cover: !0
      }, null) : e.icon ? _(pn, {
        key: "icon",
        icon: e.icon
      }, null) : e.text, il(!1, "v-avatar")]
    })), {};
  }
}), xz = Be({
  text: String,
  onClick: rr(),
  ...pt(),
  ...rn()
}, "VLabel"), nd = We()({
  name: "VLabel",
  props: xz(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => T("label", {
      class: Ae(["v-label", {
        "v-label--clickable": !!e.onClick
      }, e.class]),
      style: Je(e.style),
      onClick: e.onClick
    }, [e.text, n.default?.()])), {};
  }
}), YE = Symbol.for("vuetify:selection-control-group"), R0 = Be({
  color: String,
  disabled: {
    type: Boolean,
    default: null
  },
  defaultsTarget: String,
  error: Boolean,
  id: String,
  inline: Boolean,
  falseIcon: St,
  trueIcon: St,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  multiple: {
    type: Boolean,
    default: null
  },
  name: String,
  readonly: {
    type: Boolean,
    default: null
  },
  modelValue: null,
  type: String,
  valueComparator: {
    type: Function,
    default: Ga
  },
  ...pt(),
  ...Wa(),
  ...rn()
}, "SelectionControlGroup"), Tz = Be({
  ...R0({
    defaultsTarget: "VSelectionControl"
  })
}, "VSelectionControlGroup"), GE = We()({
  name: "VSelectionControlGroup",
  props: Tz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), r = qr(), i = ye(() => e.id || `v-selection-control-group-${r}`), o = ye(() => e.name || i.value), l = /* @__PURE__ */ new Set();
    return Ln(YE, {
      modelValue: a,
      forceUpdate: () => {
        l.forEach((s) => s());
      },
      onForceUpdate: (s) => {
        l.add(s), Fa(() => {
          l.delete(s);
        });
      }
    }), aa({
      [e.defaultsTarget]: {
        color: ye(() => e.color),
        disabled: ye(() => e.disabled),
        density: ye(() => e.density),
        error: ye(() => e.error),
        inline: ye(() => e.inline),
        modelValue: a,
        multiple: ye(() => !!e.multiple || e.multiple == null && Array.isArray(a.value)),
        name: o,
        falseIcon: ye(() => e.falseIcon),
        trueIcon: ye(() => e.trueIcon),
        readonly: ye(() => e.readonly),
        ripple: ye(() => e.ripple),
        type: ye(() => e.type),
        valueComparator: ye(() => e.valueComparator)
      }
    }), Ye(() => T("div", {
      class: Ae(["v-selection-control-group", {
        "v-selection-control-group--inline": e.inline
      }, e.class]),
      style: Je(e.style),
      role: e.type === "radio" ? "radiogroup" : void 0
    }, [n.default?.()])), {};
  }
}), Ev = Be({
  label: String,
  baseColor: String,
  trueValue: null,
  falseValue: null,
  value: null,
  ...pt(),
  ...R0()
}, "VSelectionControl");
function Iz(e) {
  const t = Gt(YE, void 0), {
    densityClasses: n
  } = Tr(e), a = wt(e, "modelValue"), r = W(() => e.trueValue !== void 0 ? e.trueValue : e.value !== void 0 ? e.value : !0), i = W(() => e.falseValue !== void 0 ? e.falseValue : !1), o = W(() => !!e.multiple || e.multiple == null && Array.isArray(a.value)), l = W({
    get() {
      const y = t ? t.modelValue.value : a.value;
      return o.value ? ta(y).some((p) => e.valueComparator(p, r.value)) : e.valueComparator(y, r.value);
    },
    set(y) {
      if (e.readonly) return;
      const p = y ? r.value : i.value;
      let w = p;
      o.value && (w = y ? [...ta(a.value), p] : ta(a.value).filter((b) => !e.valueComparator(b, r.value))), t ? t.modelValue.value = w : a.value = w;
    }
  }), {
    textColorClasses: s,
    textColorStyles: d
  } = sr(() => {
    if (!(e.error || e.disabled))
      return l.value ? e.color : e.baseColor;
  }), {
    backgroundColorClasses: u,
    backgroundColorStyles: f
  } = bn(() => l.value && !e.error && !e.disabled ? e.color : e.baseColor), h = W(() => l.value ? e.trueIcon : e.falseIcon);
  return {
    group: t,
    densityClasses: n,
    trueValue: r,
    falseValue: i,
    model: l,
    textColorClasses: s,
    textColorStyles: d,
    backgroundColorClasses: u,
    backgroundColorStyles: f,
    icon: h
  };
}
const Qs = We()({
  name: "VSelectionControl",
  directives: {
    vRipple: xr
  },
  inheritAttrs: !1,
  props: Ev(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      group: r,
      densityClasses: i,
      icon: o,
      model: l,
      textColorClasses: s,
      textColorStyles: d,
      backgroundColorClasses: u,
      backgroundColorStyles: f,
      trueValue: h
    } = Iz(e), y = qr(), p = rt(!1), w = rt(!1), b = be(), v = ye(() => e.id || `input-${y}`), g = ye(() => !e.disabled && !e.readonly);
    r?.onForceUpdate(() => {
      b.value && (b.value.checked = l.value);
    });
    function k(P) {
      g.value && (p.value = !0, Au(P.target, ":focus-visible") !== !1 && (w.value = !0));
    }
    function A() {
      p.value = !1, w.value = !1;
    }
    function C(P) {
      P.stopPropagation();
    }
    function D(P) {
      if (!g.value) {
        b.value && (b.value.checked = l.value);
        return;
      }
      e.readonly && r && Dt(() => r.forceUpdate()), l.value = P.target.checked;
    }
    return Ye(() => {
      const P = a.label ? a.label({
        label: e.label,
        props: {
          for: v.value
        }
      }) : e.label, [O, I] = nl(n), x = T("input", Fe({
        ref: b,
        checked: l.value,
        disabled: !!e.disabled,
        id: v.value,
        onBlur: A,
        onFocus: k,
        onInput: D,
        "aria-disabled": !!e.disabled,
        "aria-label": e.label,
        type: e.type,
        value: h.value,
        name: e.name,
        "aria-checked": e.type === "checkbox" ? l.value : void 0
      }, I), null);
      return T("div", Fe({
        class: ["v-selection-control", {
          "v-selection-control--dirty": l.value,
          "v-selection-control--disabled": e.disabled,
          "v-selection-control--error": e.error,
          "v-selection-control--focused": p.value,
          "v-selection-control--focus-visible": w.value,
          "v-selection-control--inline": e.inline
        }, i.value, e.class]
      }, O, {
        style: e.style
      }), [T("div", {
        class: Ae(["v-selection-control__wrapper", s.value]),
        style: Je(d.value)
      }, [a.default?.({
        backgroundColorClasses: u,
        backgroundColorStyles: f
      }), sn(T("div", {
        class: Ae(["v-selection-control__input"])
      }, [a.input?.({
        model: l,
        textColorClasses: s,
        textColorStyles: d,
        backgroundColorClasses: u,
        backgroundColorStyles: f,
        inputNode: x,
        icon: o.value,
        props: {
          onFocus: k,
          onBlur: A,
          id: v.value
        }
      }) ?? T(Ge, null, [o.value && _(pn, {
        key: "icon",
        icon: o.value
      }, null), x])]), [[xr, !e.disabled && !e.readonly && e.ripple, null, {
        center: !0,
        circle: !0
      }]])]), P && _(nd, {
        for: v.value,
        onClick: C
      }, {
        default: () => [P]
      })]);
    }), {
      isFocused: p,
      input: b
    };
  }
}), QE = Be({
  indeterminate: Boolean,
  indeterminateIcon: {
    type: St,
    default: "$checkboxIndeterminate"
  },
  ...Ev({
    falseIcon: "$checkboxOff",
    trueIcon: "$checkboxOn"
  })
}, "VCheckboxBtn"), Ao = We()({
  name: "VCheckboxBtn",
  props: QE(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:indeterminate": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "indeterminate"), r = wt(e, "modelValue");
    function i(s) {
      a.value && (a.value = !1);
    }
    const o = ye(() => a.value ? e.indeterminateIcon : e.falseIcon), l = ye(() => a.value ? e.indeterminateIcon : e.trueIcon);
    return Ye(() => {
      const s = Tn(Qs.filterProps(e), ["modelValue"]);
      return _(Qs, Fe(s, {
        modelValue: r.value,
        "onUpdate:modelValue": [(d) => r.value = d, i],
        class: ["v-checkbox-btn", e.class],
        style: e.style,
        type: "checkbox",
        falseIcon: o.value,
        trueIcon: l.value,
        "aria-checked": a.value ? "mixed" : void 0
      }), n);
    }), {};
  }
});
function JE(e) {
  const {
    t
  } = kn();
  function n(a) {
    let {
      name: r,
      color: i,
      ...o
    } = a;
    const l = {
      prepend: "prependAction",
      prependInner: "prependAction",
      append: "appendAction",
      appendInner: "appendAction",
      clear: "clear"
    }[r], s = e[`onClick:${r}`];
    function d(f) {
      f.key !== "Enter" && f.key !== " " || (f.preventDefault(), f.stopPropagation(), dv(s, new PointerEvent("click", f)));
    }
    const u = s && l ? t(`$vuetify.input.${l}`, e.label ?? "") : void 0;
    return _(pn, Fe({
      icon: e[`${r}Icon`],
      "aria-label": u,
      onClick: s,
      onKeydown: d,
      color: i
    }, o), null);
  }
  return {
    InputIcon: n
  };
}
const Ez = Be({
  active: Boolean,
  color: String,
  messages: {
    type: [Array, String],
    default: () => []
  },
  ...pt(),
  ...eo({
    transition: {
      component: B0,
      leaveAbsolute: !0,
      group: !0
    }
  })
}, "VMessages"), XE = We()({
  name: "VMessages",
  props: Ez(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = W(() => ta(e.messages)), {
      textColorClasses: r,
      textColorStyles: i
    } = sr(() => e.color);
    return Ye(() => _(Cr, {
      transition: e.transition,
      tag: "div",
      class: Ae(["v-messages", r.value, e.class]),
      style: Je([i.value, e.style])
    }, {
      default: () => [e.active && a.value.map((o, l) => T("div", {
        class: "v-messages__message",
        key: `${l}-${a.value}`
      }, [n.message ? n.message({
        message: o
      }) : o]))]
    })), {};
  }
}), sm = Be({
  focused: Boolean,
  "onUpdate:focused": rr()
}, "focus");
function ms(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po();
  const n = wt(e, "focused"), a = ye(() => ({
    [`${t}--focused`]: n.value
  }));
  function r() {
    n.value = !0;
  }
  function i() {
    n.value = !1;
  }
  return {
    focusClasses: a,
    isFocused: n,
    focus: r,
    blur: i
  };
}
const ZE = Symbol.for("vuetify:form"), Pz = Be({
  disabled: Boolean,
  fastFail: Boolean,
  readonly: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  validateOn: {
    type: String,
    default: "input"
  }
}, "form");
function Oz(e) {
  const t = wt(e, "modelValue"), n = ye(() => e.disabled), a = ye(() => e.readonly), r = rt(!1), i = be([]), o = be([]);
  async function l() {
    const u = [];
    let f = !0;
    o.value = [], r.value = !0;
    for (const h of i.value) {
      const y = await h.validate();
      if (y.length > 0 && (f = !1, u.push({
        id: h.id,
        errorMessages: y
      })), !f && e.fastFail) break;
    }
    return o.value = u, r.value = !1, {
      valid: f,
      errors: o.value
    };
  }
  function s() {
    i.value.forEach((u) => u.reset());
  }
  function d() {
    i.value.forEach((u) => u.resetValidation());
  }
  return tt(i, () => {
    let u = 0, f = 0;
    const h = [];
    for (const y of i.value)
      y.isValid === !1 ? (f++, h.push({
        id: y.id,
        errorMessages: y.errorMessages
      })) : y.isValid === !0 && u++;
    o.value = h, t.value = f > 0 ? !1 : u === i.value.length ? !0 : null;
  }, {
    deep: !0,
    flush: "post"
  }), Ln(ZE, {
    register: (u) => {
      let {
        id: f,
        vm: h,
        validate: y,
        reset: p,
        resetValidation: w
      } = u;
      i.value.some((b) => b.id === f), i.value.push({
        id: f,
        validate: y,
        reset: p,
        resetValidation: w,
        vm: xx(h),
        isValid: null,
        errorMessages: []
      });
    },
    unregister: (u) => {
      i.value = i.value.filter((f) => f.id !== u);
    },
    update: (u, f, h) => {
      const y = i.value.find((p) => p.id === u);
      y && (y.isValid = f, y.errorMessages = h);
    },
    isDisabled: n,
    isReadonly: a,
    isValidating: r,
    isValid: t,
    items: i,
    validateOn: ye(() => e.validateOn)
  }), {
    errors: o,
    isDisabled: n,
    isReadonly: a,
    isValidating: r,
    isValid: t,
    items: i,
    validate: l,
    reset: s,
    resetValidation: d
  };
}
function lm(e) {
  const t = Gt(ZE, null);
  return {
    ...t,
    isReadonly: W(() => !!(e?.readonly ?? t?.isReadonly.value)),
    isDisabled: W(() => !!(e?.disabled ?? t?.isDisabled.value))
  };
}
const Dz = Symbol.for("vuetify:rules");
function Bz(e) {
  const t = Gt(Dz, null);
  if (!e) {
    if (!t)
      throw new Error("Could not find Vuetify rules injection");
    return t.aliases;
  }
  return t?.resolve(e) ?? ye(e);
}
const eP = Be({
  disabled: {
    type: Boolean,
    default: null
  },
  error: Boolean,
  errorMessages: {
    type: [Array, String],
    default: () => []
  },
  maxErrors: {
    type: [Number, String],
    default: 1
  },
  name: String,
  label: String,
  readonly: {
    type: Boolean,
    default: null
  },
  rules: {
    type: Array,
    default: () => []
  },
  modelValue: null,
  validateOn: String,
  validationValue: null,
  ...sm()
}, "validation");
function tP(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Po(), n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : qr();
  const a = wt(e, "modelValue"), r = W(() => e.validationValue === void 0 ? a.value : e.validationValue), i = lm(e), o = Bz(() => e.rules), l = be([]), s = rt(!0), d = W(() => !!(ta(a.value === "" ? null : a.value).length || ta(r.value === "" ? null : r.value).length)), u = W(() => e.errorMessages?.length ? ta(e.errorMessages).concat(l.value).slice(0, Math.max(0, Number(e.maxErrors))) : l.value), f = W(() => {
    let A = (e.validateOn ?? i.validateOn?.value) || "input";
    A === "lazy" && (A = "input lazy"), A === "eager" && (A = "input eager");
    const C = new Set(A?.split(" ") ?? []);
    return {
      input: C.has("input"),
      blur: C.has("blur") || C.has("input") || C.has("invalid-input"),
      invalidInput: C.has("invalid-input"),
      lazy: C.has("lazy"),
      eager: C.has("eager")
    };
  }), h = W(() => e.error || e.errorMessages?.length ? !1 : e.rules.length ? s.value ? l.value.length || f.value.lazy ? null : !0 : !l.value.length : !0), y = rt(!1), p = W(() => ({
    [`${t}--error`]: h.value === !1,
    [`${t}--dirty`]: d.value,
    [`${t}--disabled`]: i.isDisabled.value,
    [`${t}--readonly`]: i.isReadonly.value
  })), w = ya("validation"), b = W(() => e.name ?? fe(n));
  Wu(() => {
    i.register?.({
      id: b.value,
      vm: w,
      validate: k,
      reset: v,
      resetValidation: g
    });
  }), Ja(() => {
    i.unregister?.(b.value);
  }), an(async () => {
    f.value.lazy || await k(!f.value.eager), i.update?.(b.value, h.value, u.value);
  }), Ar(() => f.value.input || f.value.invalidInput && h.value === !1, () => {
    tt(r, () => {
      if (r.value != null)
        k();
      else if (e.focused) {
        const A = tt(() => e.focused, (C) => {
          C || k(), A();
        });
      }
    });
  }), Ar(() => f.value.blur, () => {
    tt(() => e.focused, (A) => {
      A || k();
    });
  }), tt([h, u], () => {
    i.update?.(b.value, h.value, u.value);
  });
  async function v() {
    a.value = null, await Dt(), await g();
  }
  async function g() {
    s.value = !0, f.value.lazy ? l.value = [] : await k(!f.value.eager);
  }
  async function k() {
    let A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1;
    const C = [];
    y.value = !0;
    for (const D of o.value) {
      if (C.length >= Number(e.maxErrors ?? 1))
        break;
      const O = await (typeof D == "function" ? D : () => D)(r.value);
      if (O !== !0) {
        if (O !== !1 && typeof O != "string") {
          console.warn(`${O} is not a valid value. Rule functions must return boolean true or a string.`);
          continue;
        }
        C.push(O || "");
      }
    }
    return l.value = C, y.value = !1, s.value = A, l.value;
  }
  return {
    errorMessages: u,
    isDirty: d,
    isDisabled: i.isDisabled,
    isReadonly: i.isReadonly,
    isPristine: s,
    isValid: h,
    isValidating: y,
    reset: v,
    resetValidation: g,
    validate: k,
    validationClasses: p
  };
}
const hs = Be({
  id: String,
  appendIcon: St,
  baseColor: String,
  centerAffix: {
    type: Boolean,
    default: !0
  },
  color: String,
  glow: Boolean,
  iconColor: [Boolean, String],
  prependIcon: St,
  hideDetails: [Boolean, String],
  hideSpinButtons: Boolean,
  hint: String,
  persistentHint: Boolean,
  messages: {
    type: [Array, String],
    default: () => []
  },
  direction: {
    type: String,
    default: "horizontal",
    validator: (e) => ["horizontal", "vertical"].includes(e)
  },
  "onClick:prepend": rr(),
  "onClick:append": rr(),
  ...pt(),
  ...Wa(),
  ...us(Ta(), ["maxWidth", "minWidth", "width"]),
  ...rn(),
  ...eP()
}, "VInput"), hr = We()({
  name: "VInput",
  props: {
    ...hs()
  },
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a,
      emit: r
    } = t;
    const {
      densityClasses: i
    } = Tr(e), {
      dimensionStyles: o
    } = Ia(e), {
      themeClasses: l
    } = gn(e), {
      rtlClasses: s
    } = Na(), {
      InputIcon: d
    } = JE(e), u = qr(), f = W(() => e.id || `input-${u}`), {
      errorMessages: h,
      isDirty: y,
      isDisabled: p,
      isReadonly: w,
      isPristine: b,
      isValid: v,
      isValidating: g,
      reset: k,
      resetValidation: A,
      validate: C,
      validationClasses: D
    } = tP(e, "v-input", f), P = W(() => e.errorMessages?.length || !b.value && h.value.length ? h.value : e.hint && (e.persistentHint || e.focused) ? e.hint : e.messages), O = ye(() => P.value.length > 0), I = ye(() => !e.hideDetails || e.hideDetails === "auto" && (O.value || !!a.details)), x = W(() => I.value ? `${f.value}-messages` : void 0), M = W(() => ({
      id: f,
      messagesId: x,
      isDirty: y,
      isDisabled: p,
      isReadonly: w,
      isPristine: b,
      isValid: v,
      isValidating: g,
      hasDetails: I,
      reset: k,
      resetValidation: A,
      validate: C
    })), V = ye(() => e.error || e.disabled ? void 0 : e.focused ? e.color : e.baseColor), B = ye(() => {
      if (e.iconColor)
        return e.iconColor === !0 ? V.value : e.iconColor;
    });
    return Ye(() => {
      const F = !!(a.prepend || e.prependIcon), H = !!(a.append || e.appendIcon);
      return T("div", {
        class: Ae(["v-input", `v-input--${e.direction}`, {
          "v-input--center-affix": e.centerAffix,
          "v-input--focused": e.focused,
          "v-input--glow": e.glow,
          "v-input--hide-spin-buttons": e.hideSpinButtons
        }, i.value, l.value, s.value, D.value, e.class]),
        style: Je([o.value, e.style])
      }, [F && T("div", {
        key: "prepend",
        class: "v-input__prepend"
      }, [a.prepend?.(M.value), e.prependIcon && _(d, {
        key: "prepend-icon",
        name: "prepend",
        color: B.value
      }, null)]), a.default && T("div", {
        class: "v-input__control"
      }, [a.default?.(M.value)]), H && T("div", {
        key: "append",
        class: "v-input__append"
      }, [e.appendIcon && _(d, {
        key: "append-icon",
        name: "append",
        color: B.value
      }, null), a.append?.(M.value)]), I.value && T("div", {
        id: x.value,
        class: "v-input__details",
        role: "alert",
        "aria-live": "polite"
      }, [_(XE, {
        active: O.value,
        messages: P.value
      }, {
        message: a.message
      }), a.details?.(M.value)])]);
    }), {
      reset: k,
      resetValidation: A,
      validate: C,
      isValid: v,
      errorMessages: h
    };
  }
}), vy = Symbol("Forwarded refs");
function py(e, t) {
  let n = e;
  for (; n; ) {
    const a = Reflect.getOwnPropertyDescriptor(n, t);
    if (a) return a;
    n = Object.getPrototypeOf(n);
  }
}
function Za(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), a = 1; a < t; a++)
    n[a - 1] = arguments[a];
  return e[vy] = n, new Proxy(e, {
    get(r, i) {
      if (Reflect.has(r, i))
        return Reflect.get(r, i);
      if (!(typeof i == "symbol" || i.startsWith("$") || i.startsWith("__"))) {
        for (const o of n)
          if (o.value && Reflect.has(o.value, i)) {
            const l = Reflect.get(o.value, i);
            return typeof l == "function" ? l.bind(o.value) : l;
          }
      }
    },
    has(r, i) {
      if (Reflect.has(r, i))
        return !0;
      if (typeof i == "symbol" || i.startsWith("$") || i.startsWith("__")) return !1;
      for (const o of n)
        if (o.value && Reflect.has(o.value, i))
          return !0;
      return !1;
    },
    set(r, i, o) {
      if (Reflect.has(r, i))
        return Reflect.set(r, i, o);
      if (typeof i == "symbol" || i.startsWith("$") || i.startsWith("__")) return !1;
      for (const l of n)
        if (l.value && Reflect.has(l.value, i))
          return Reflect.set(l.value, i, o);
      return !1;
    },
    getOwnPropertyDescriptor(r, i) {
      const o = Reflect.getOwnPropertyDescriptor(r, i);
      if (o) return o;
      if (!(typeof i == "symbol" || i.startsWith("$") || i.startsWith("__"))) {
        for (const l of n) {
          if (!l.value) continue;
          const s = py(l.value, i) ?? ("_" in l.value ? py(l.value._?.setupState, i) : void 0);
          if (s) return s;
        }
        for (const l of n) {
          const s = l.value && l.value[vy];
          if (!s) continue;
          const d = s.slice();
          for (; d.length; ) {
            const u = d.shift(), f = py(u.value, i);
            if (f) return f;
            const h = u.value && u.value[vy];
            h && d.push(...h);
          }
        }
      }
    }
  });
}
const Vz = Be({
  ...hs(),
  ...Tn(QE(), ["inline"])
}, "VCheckbox"), Mz = We()({
  name: "VCheckbox",
  inheritAttrs: !1,
  props: Vz(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:focused": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = wt(e, "modelValue"), {
      isFocused: i,
      focus: o,
      blur: l
    } = ms(e), s = be(), d = qr();
    return Ye(() => {
      const [u, f] = nl(n), h = hr.filterProps(e), y = Ao.filterProps(e);
      return _(hr, Fe({
        ref: s,
        class: ["v-checkbox", e.class]
      }, u, h, {
        modelValue: r.value,
        "onUpdate:modelValue": (p) => r.value = p,
        id: e.id || `checkbox-${d}`,
        focused: i.value,
        style: e.style
      }), {
        ...a,
        default: (p) => {
          let {
            id: w,
            messagesId: b,
            isDisabled: v,
            isReadonly: g,
            isValid: k
          } = p;
          return _(Ao, Fe(y, {
            id: w.value,
            "aria-describedby": b.value,
            disabled: v.value,
            readonly: g.value
          }, f, {
            error: k.value === !1,
            modelValue: r.value,
            "onUpdate:modelValue": (A) => r.value = A,
            onFocus: o,
            onBlur: l
          }), a);
        }
      });
    }), Za({}, s);
  }
});
function Lz(e) {
  let {
    selectedElement: t,
    containerElement: n,
    isRtl: a,
    isHorizontal: r
  } = e;
  const i = Mf(r, n), o = nP(r, a, n), l = Mf(r, t), s = aP(r, t), d = l * 0.4;
  return o > s ? s - d : o + i < s + l ? s - i + l + d : o;
}
function Rz(e) {
  let {
    selectedElement: t,
    containerElement: n,
    isHorizontal: a
  } = e;
  const r = Mf(a, n), i = aP(a, t), o = Mf(a, t);
  return i - r / 2 + o / 2;
}
function fA(e, t) {
  return t?.[e ? "scrollWidth" : "scrollHeight"] || 0;
}
function Fz(e, t) {
  return t?.[e ? "clientWidth" : "clientHeight"] || 0;
}
function nP(e, t, n) {
  if (!n)
    return 0;
  const {
    scrollLeft: a,
    offsetWidth: r,
    scrollWidth: i
  } = n;
  return e ? t ? i - r + a : a : n.scrollTop;
}
function Mf(e, t) {
  return t?.[e ? "offsetWidth" : "offsetHeight"] || 0;
}
function aP(e, t) {
  return t?.[e ? "offsetLeft" : "offsetTop"] || 0;
}
const rP = Symbol.for("vuetify:v-slide-group"), F0 = Be({
  centerActive: Boolean,
  contentClass: null,
  direction: {
    type: String,
    default: "horizontal"
  },
  symbol: {
    type: null,
    default: rP
  },
  nextIcon: {
    type: St,
    default: "$next"
  },
  prevIcon: {
    type: St,
    default: "$prev"
  },
  showArrows: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || ["always", "desktop", "mobile"].includes(e)
  },
  ...pt(),
  ...dc({
    mobile: null
  }),
  ...$t(),
  ...pc({
    selectedClass: "v-slide-group-item--active"
  })
}, "VSlideGroup"), Lf = We()({
  name: "VSlideGroup",
  props: F0(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isRtl: a
    } = Na(), {
      displayClasses: r,
      mobile: i
    } = pi(e), o = ol(e, e.symbol), l = rt(!1), s = rt(0), d = rt(0), u = rt(0), f = W(() => e.direction === "horizontal"), {
      resizeRef: h,
      contentRect: y
    } = Gi(), {
      resizeRef: p,
      contentRect: w
    } = Gi(), b = v8(), v = W(() => ({
      container: h.el,
      duration: 200,
      easing: "easeOutQuart"
    })), g = W(() => o.selected.value.length ? o.items.value.findIndex((q) => q.id === o.selected.value[0]) : -1), k = W(() => o.selected.value.length ? o.items.value.findIndex((q) => q.id === o.selected.value[o.selected.value.length - 1]) : -1);
    if (_n) {
      let q = -1;
      tt(() => [o.selected.value, y.value, w.value, f.value], () => {
        cancelAnimationFrame(q), q = requestAnimationFrame(() => {
          if (y.value && w.value) {
            const oe = f.value ? "width" : "height";
            d.value = y.value[oe], u.value = w.value[oe], l.value = d.value + 1 < u.value;
          }
          if (g.value >= 0 && p.el) {
            const oe = p.el.children[k.value];
            C(oe, e.centerActive);
          }
        });
      });
    }
    const A = rt(!1);
    function C(q, oe) {
      let ee = 0;
      oe ? ee = Rz({
        containerElement: h.el,
        isHorizontal: f.value,
        selectedElement: q
      }) : ee = Lz({
        containerElement: h.el,
        isHorizontal: f.value,
        isRtl: a.value,
        selectedElement: q
      }), D(ee);
    }
    function D(q) {
      if (!_n || !h.el) return;
      const oe = Mf(f.value, h.el), ee = nP(f.value, a.value, h.el);
      if (!(fA(f.value, h.el) <= oe || // Prevent scrolling by only a couple of pixels, which doesn't look smooth
      Math.abs(q - ee) < 16)) {
        if (f.value && a.value && h.el) {
          const {
            scrollWidth: ve,
            offsetWidth: pe
          } = h.el;
          q = ve - pe - q;
        }
        f.value ? b.horizontal(q, v.value) : b(q, v.value);
      }
    }
    function P(q) {
      const {
        scrollTop: oe,
        scrollLeft: ee
      } = q.target;
      s.value = f.value ? ee : oe;
    }
    function O(q) {
      if (A.value = !0, !(!l.value || !p.el)) {
        for (const oe of q.composedPath())
          for (const ee of p.el.children)
            if (ee === oe) {
              C(ee);
              return;
            }
      }
    }
    function I(q) {
      A.value = !1;
    }
    let x = !1;
    function M(q) {
      !x && !A.value && !(q.relatedTarget && p.el?.contains(q.relatedTarget)) && H(), x = !1;
    }
    function V() {
      x = !0;
    }
    function B(q) {
      if (!p.el) return;
      function oe(ee) {
        q.preventDefault(), H(ee);
      }
      f.value ? q.key === "ArrowRight" ? oe(a.value ? "prev" : "next") : q.key === "ArrowLeft" && oe(a.value ? "next" : "prev") : q.key === "ArrowDown" ? oe("next") : q.key === "ArrowUp" && oe("prev"), q.key === "Home" ? oe("first") : q.key === "End" && oe("last");
    }
    function F(q, oe) {
      if (!q) return;
      let ee = q;
      do
        ee = ee?.[oe === "next" ? "nextElementSibling" : "previousElementSibling"];
      while (ee?.hasAttribute("disabled"));
      return ee;
    }
    function H(q) {
      if (!p.el) return;
      let oe;
      if (!q)
        oe = bf(p.el)[0];
      else if (q === "next") {
        if (oe = F(p.el.querySelector(":focus"), q), !oe) return H("first");
      } else if (q === "prev") {
        if (oe = F(p.el.querySelector(":focus"), q), !oe) return H("last");
      } else q === "first" ? (oe = p.el.firstElementChild, oe?.hasAttribute("disabled") && (oe = F(oe, "next"))) : q === "last" && (oe = p.el.lastElementChild, oe?.hasAttribute("disabled") && (oe = F(oe, "prev")));
      oe && oe.focus({
        preventScroll: !0
      });
    }
    function K(q) {
      const oe = f.value && a.value ? -1 : 1, ee = (q === "prev" ? -oe : oe) * d.value;
      let he = s.value + ee;
      if (f.value && a.value && h.el) {
        const {
          scrollWidth: ve,
          offsetWidth: pe
        } = h.el;
        he += ve - pe;
      }
      D(he);
    }
    const Z = W(() => ({
      next: o.next,
      prev: o.prev,
      select: o.select,
      isSelected: o.isSelected
    })), ue = W(() => {
      switch (e.showArrows) {
        // Always show arrows on desktop & mobile
        case "always":
          return !0;
        // Always show arrows on desktop
        case "desktop":
          return !i.value;
        // Show arrows on mobile when overflowing.
        // This matches the default 2.2 behavior
        case !0:
          return l.value || Math.abs(s.value) > 0;
        // Always show on mobile
        case "mobile":
          return i.value || l.value || Math.abs(s.value) > 0;
        // https://material.io/components/tabs#scrollable-tabs
        // Always show arrows when
        // overflowed on desktop
        default:
          return !i.value && (l.value || Math.abs(s.value) > 0);
      }
    }), Y = W(() => Math.abs(s.value) > 1), U = W(() => {
      if (!h.value) return !1;
      const q = fA(f.value, h.el), oe = Fz(f.value, h.el);
      return q - oe - Math.abs(s.value) > 1;
    });
    return Ye(() => _(e.tag, {
      class: Ae(["v-slide-group", {
        "v-slide-group--vertical": !f.value,
        "v-slide-group--has-affixes": ue.value,
        "v-slide-group--is-overflowing": l.value
      }, r.value, e.class]),
      style: Je(e.style),
      tabindex: A.value || o.selected.value.length ? -1 : 0,
      onFocus: M
    }, {
      default: () => [ue.value && T("div", {
        key: "prev",
        class: Ae(["v-slide-group__prev", {
          "v-slide-group__prev--disabled": !Y.value
        }]),
        onMousedown: V,
        onClick: () => Y.value && K("prev")
      }, [n.prev?.(Z.value) ?? _(Df, null, {
        default: () => [_(pn, {
          icon: a.value ? e.nextIcon : e.prevIcon
        }, null)]
      })]), T("div", {
        key: "container",
        ref: h,
        class: Ae(["v-slide-group__container", e.contentClass]),
        onScroll: P
      }, [T("div", {
        ref: p,
        class: "v-slide-group__content",
        onFocusin: O,
        onFocusout: I,
        onKeydown: B
      }, [n.default?.(Z.value)])]), ue.value && T("div", {
        key: "next",
        class: Ae(["v-slide-group__next", {
          "v-slide-group__next--disabled": !U.value
        }]),
        onMousedown: V,
        onClick: () => U.value && K("next")
      }, [n.next?.(Z.value) ?? _(Df, null, {
        default: () => [_(pn, {
          icon: a.value ? e.prevIcon : e.nextIcon
        }, null)]
      })])]
    })), {
      selected: o.selected,
      scrollTo: K,
      scrollOffset: s,
      focus: H,
      hasPrev: Y,
      hasNext: U
    };
  }
}), iP = Symbol.for("vuetify:v-chip-group"), Nz = Be({
  baseColor: String,
  column: Boolean,
  filter: Boolean,
  valueComparator: {
    type: Function,
    default: Ga
  },
  ...F0(),
  ...pt(),
  ...pc({
    selectedClass: "v-chip--selected"
  }),
  ...$t(),
  ...rn(),
  ...Di({
    variant: "tonal"
  })
}, "VChipGroup"), Uz = We()({
  name: "VChipGroup",
  props: Nz(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      isSelected: r,
      select: i,
      next: o,
      prev: l,
      selected: s
    } = ol(e, iP);
    return aa({
      VChip: {
        baseColor: ye(() => e.baseColor),
        color: ye(() => e.color),
        disabled: ye(() => e.disabled),
        filter: ye(() => e.filter),
        variant: ye(() => e.variant)
      }
    }), Ye(() => {
      const d = Lf.filterProps(e);
      return _(Lf, Fe(d, {
        class: ["v-chip-group", {
          "v-chip-group--column": e.column
        }, a.value, e.class],
        style: e.style
      }), {
        default: () => [n.default?.({
          isSelected: r,
          select: i,
          next: o,
          prev: l,
          selected: s.value
        })]
      });
    }), {};
  }
}), $z = Be({
  activeClass: String,
  appendAvatar: String,
  appendIcon: St,
  baseColor: String,
  closable: Boolean,
  closeIcon: {
    type: St,
    default: "$delete"
  },
  closeLabel: {
    type: String,
    default: "$vuetify.close"
  },
  draggable: Boolean,
  filter: Boolean,
  filterIcon: {
    type: St,
    default: "$complete"
  },
  label: Boolean,
  link: {
    type: Boolean,
    default: void 0
  },
  pill: Boolean,
  prependAvatar: String,
  prependIcon: St,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  modelValue: {
    type: Boolean,
    default: !0
  },
  onClick: rr(),
  onClickOnce: rr(),
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ua(),
  ...gc(),
  ...qn(),
  ...om(),
  ...Oo(),
  ...$t({
    tag: "span"
  }),
  ...rn(),
  ...Di({
    variant: "tonal"
  })
}, "VChip"), ad = We()({
  name: "VChip",
  directives: {
    vRipple: xr
  },
  props: $z(),
  emits: {
    "click:close": (e) => !0,
    "update:modelValue": (e) => !0,
    "group:selected": (e) => !0,
    click: (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      t: i
    } = kn(), {
      borderClasses: o
    } = Xr(e), {
      densityClasses: l
    } = Tr(e), {
      elevationClasses: s
    } = Xa(e), {
      roundedClasses: d
    } = ra(e), {
      sizeClasses: u
    } = Zu(e), {
      themeClasses: f
    } = gn(e), h = wt(e, "modelValue"), y = yc(e, iP, !1), p = im(e, n), w = ye(() => e.link !== !1 && p.isLink.value), b = W(() => !e.disabled && e.link !== !1 && (!!y || e.link || p.isClickable.value)), v = ye(() => ({
      "aria-label": i(e.closeLabel),
      disabled: e.disabled,
      onClick(P) {
        P.preventDefault(), P.stopPropagation(), h.value = !1, a("click:close", P);
      }
    })), {
      colorClasses: g,
      colorStyles: k,
      variantClasses: A
    } = vc(() => ({
      color: !y || y.isSelected.value ? e.color ?? e.baseColor : e.baseColor,
      variant: e.variant
    }));
    function C(P) {
      a("click", P), b.value && (p.navigate?.(P), y?.toggle());
    }
    function D(P) {
      (P.key === "Enter" || P.key === " ") && (P.preventDefault(), C(P));
    }
    return () => {
      const P = p.isLink.value ? "a" : e.tag, O = !!(e.appendIcon || e.appendAvatar), I = !!(O || r.append), x = !!(r.close || e.closable), M = !!(r.filter || e.filter) && y, V = !!(e.prependIcon || e.prependAvatar), B = !!(V || r.prepend);
      return h.value && sn(_(P, Fe({
        class: ["v-chip", {
          "v-chip--disabled": e.disabled,
          "v-chip--label": e.label,
          "v-chip--link": b.value,
          "v-chip--filter": M,
          "v-chip--pill": e.pill,
          [`${e.activeClass}`]: e.activeClass && p.isActive?.value
        }, f.value, o.value, g.value, l.value, s.value, d.value, u.value, A.value, y?.selectedClass.value, e.class],
        style: [k.value, e.style],
        disabled: e.disabled || void 0,
        draggable: e.draggable,
        tabindex: b.value ? 0 : void 0,
        onClick: C,
        onKeydown: b.value && !w.value && D
      }, p.linkProps), {
        default: () => [il(b.value, "v-chip"), M && _(V0, {
          key: "filter"
        }, {
          default: () => [sn(T("div", {
            class: "v-chip__filter"
          }, [r.filter ? _(Ht, {
            key: "filter-defaults",
            disabled: !e.filterIcon,
            defaults: {
              VIcon: {
                icon: e.filterIcon
              }
            }
          }, r.filter) : _(pn, {
            key: "filter-icon",
            icon: e.filterIcon
          }, null)]), [[_a, y.isSelected.value]])]
        }), B && T("div", {
          key: "prepend",
          class: "v-chip__prepend"
        }, [r.prepend ? _(Ht, {
          key: "prepend-defaults",
          disabled: !V,
          defaults: {
            VAvatar: {
              image: e.prependAvatar,
              start: !0
            },
            VIcon: {
              icon: e.prependIcon,
              start: !0
            }
          }
        }, r.prepend) : T(Ge, null, [e.prependIcon && _(pn, {
          key: "prepend-icon",
          icon: e.prependIcon,
          start: !0
        }, null), e.prependAvatar && _(Oi, {
          key: "prepend-avatar",
          image: e.prependAvatar,
          start: !0
        }, null)])]), T("div", {
          class: "v-chip__content",
          "data-no-activator": ""
        }, [r.default?.({
          isSelected: y?.isSelected.value,
          selectedClass: y?.selectedClass.value,
          select: y?.select,
          toggle: y?.toggle,
          value: y?.value.value,
          disabled: e.disabled
        }) ?? j(e.text)]), I && T("div", {
          key: "append",
          class: "v-chip__append"
        }, [r.append ? _(Ht, {
          key: "append-defaults",
          disabled: !O,
          defaults: {
            VAvatar: {
              end: !0,
              image: e.appendAvatar
            },
            VIcon: {
              end: !0,
              icon: e.appendIcon
            }
          }
        }, r.append) : T(Ge, null, [e.appendIcon && _(pn, {
          key: "append-icon",
          end: !0,
          icon: e.appendIcon
        }, null), e.appendAvatar && _(Oi, {
          key: "append-avatar",
          end: !0,
          image: e.appendAvatar
        }, null)])]), x && T("button", Fe({
          key: "close",
          class: "v-chip__close",
          type: "button",
          "data-testid": "close-chip"
        }, v.value), [r.close ? _(Ht, {
          key: "close-defaults",
          defaults: {
            VIcon: {
              icon: e.closeIcon,
              size: "x-small"
            }
          }
        }, r.close) : _(pn, {
          key: "close-icon",
          icon: e.closeIcon,
          size: "x-small"
        }, null)])]
      }), [[xr, b.value && e.ripple, null]]);
    };
  }
}), qz = Be({
  color: String,
  inset: Boolean,
  length: [Number, String],
  opacity: [Number, String],
  thickness: [Number, String],
  vertical: Boolean,
  ...pt(),
  ...rn()
}, "VDivider"), fi = We()({
  name: "VDivider",
  props: qz(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = gn(e), {
      textColorClasses: i,
      textColorStyles: o
    } = sr(() => e.color), l = W(() => {
      const s = {};
      return e.length && (s[e.vertical ? "height" : "width"] = ht(e.length)), e.thickness && (s[e.vertical ? "borderRightWidth" : "borderTopWidth"] = ht(e.thickness)), s;
    });
    return Ye(() => {
      const s = T("hr", {
        class: Ae([{
          "v-divider": !0,
          "v-divider--inset": e.inset,
          "v-divider--vertical": e.vertical
        }, r.value, i.value, e.class]),
        style: Je([l.value, o.value, {
          "--v-border-opacity": e.opacity
        }, e.style]),
        "aria-orientation": !n.role || n.role === "separator" ? e.vertical ? "vertical" : "horizontal" : void 0,
        role: `${n.role || "separator"}`
      }, null);
      return a.default ? T("div", {
        class: Ae(["v-divider__wrapper", {
          "v-divider__wrapper--vertical": e.vertical,
          "v-divider__wrapper--inset": e.inset
        }])
      }, [s, T("div", {
        class: "v-divider__content"
      }, [a.default()]), s]) : s;
    }), {};
  }
}), Db = Symbol.for("vuetify:list");
function oP() {
  let {
    filterable: e
  } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
    filterable: !1
  };
  const t = Gt(Db, {
    filterable: !1,
    hasPrepend: rt(!1),
    updateHasPrepend: () => null
  }), n = {
    filterable: t.filterable || e,
    hasPrepend: rt(!1),
    updateHasPrepend: (a) => {
      a && (n.hasPrepend.value = a);
    }
  };
  return Ln(Db, n), t;
}
function sP() {
  return Gt(Db, null);
}
const N0 = (e) => {
  const t = {
    activate: (n) => {
      let {
        id: a,
        value: r,
        activated: i
      } = n;
      return a = Ot(a), e && !r && i.size === 1 && i.has(a) || (r ? i.add(a) : i.delete(a)), i;
    },
    in: (n, a, r) => {
      let i = /* @__PURE__ */ new Set();
      if (n != null)
        for (const o of ta(n))
          i = t.activate({
            id: o,
            value: !0,
            activated: new Set(i),
            children: a,
            parents: r
          });
      return i;
    },
    out: (n) => Array.from(n)
  };
  return t;
}, lP = (e) => {
  const t = N0(e);
  return {
    activate: (a) => {
      let {
        activated: r,
        id: i,
        ...o
      } = a;
      i = Ot(i);
      const l = r.has(i) ? /* @__PURE__ */ new Set([i]) : /* @__PURE__ */ new Set();
      return t.activate({
        ...o,
        id: i,
        activated: l
      });
    },
    in: (a, r, i) => {
      let o = /* @__PURE__ */ new Set();
      if (a != null) {
        const l = ta(a);
        l.length && (o = t.in(l.slice(0, 1), r, i));
      }
      return o;
    },
    out: (a, r, i) => t.out(a, r, i)
  };
}, Hz = (e) => {
  const t = N0(e);
  return {
    activate: (a) => {
      let {
        id: r,
        activated: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.activate({
        id: r,
        activated: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, zz = (e) => {
  const t = lP(e);
  return {
    activate: (a) => {
      let {
        id: r,
        activated: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.activate({
        id: r,
        activated: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, Wz = {
  open: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (n) {
      const i = /* @__PURE__ */ new Set();
      i.add(t);
      let o = r.get(t);
      for (; o != null; )
        i.add(o), o = r.get(o);
      return i;
    } else
      return a.delete(t), a;
  },
  select: () => null
}, cP = {
  open: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (n) {
      let i = r.get(t);
      for (a.add(t); i != null && i !== t; )
        a.add(i), i = r.get(i);
      return a;
    } else
      a.delete(t);
    return a;
  },
  select: () => null
}, Kz = {
  open: cP.open,
  select: (e) => {
    let {
      id: t,
      value: n,
      opened: a,
      parents: r
    } = e;
    if (!n) return a;
    const i = [];
    let o = r.get(t);
    for (; o != null; )
      i.push(o), o = r.get(o);
    return new Set(i);
  }
}, U0 = (e) => {
  const t = {
    select: (n) => {
      let {
        id: a,
        value: r,
        selected: i
      } = n;
      if (a = Ot(a), e && !r) {
        const o = Array.from(i.entries()).reduce((l, s) => {
          let [d, u] = s;
          return u === "on" && l.push(d), l;
        }, []);
        if (o.length === 1 && o[0] === a) return i;
      }
      return i.set(a, r ? "on" : "off"), i;
    },
    in: (n, a, r, i) => {
      const o = /* @__PURE__ */ new Map();
      for (const l of n || [])
        t.select({
          id: l,
          value: !0,
          selected: o,
          children: a,
          parents: r,
          disabled: i
        });
      return o;
    },
    out: (n) => {
      const a = [];
      for (const [r, i] of n.entries())
        i === "on" && a.push(r);
      return a;
    }
  };
  return t;
}, uP = (e) => {
  const t = U0(e);
  return {
    select: (a) => {
      let {
        selected: r,
        id: i,
        ...o
      } = a;
      i = Ot(i);
      const l = r.has(i) ? /* @__PURE__ */ new Map([[i, r.get(i)]]) : /* @__PURE__ */ new Map();
      return t.select({
        ...o,
        id: i,
        selected: l
      });
    },
    in: (a, r, i, o) => a?.length ? t.in(a.slice(0, 1), r, i, o) : /* @__PURE__ */ new Map(),
    out: (a, r, i) => t.out(a, r, i)
  };
}, jz = (e) => {
  const t = U0(e);
  return {
    select: (a) => {
      let {
        id: r,
        selected: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.select({
        id: r,
        selected: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, Yz = (e) => {
  const t = uP(e);
  return {
    select: (a) => {
      let {
        id: r,
        selected: i,
        children: o,
        ...l
      } = a;
      return r = Ot(r), o.has(r) ? i : t.select({
        id: r,
        selected: i,
        children: o,
        ...l
      });
    },
    in: t.in,
    out: t.out
  };
}, dP = (e) => {
  const t = {
    select: (n) => {
      let {
        id: a,
        value: r,
        selected: i,
        children: o,
        parents: l,
        disabled: s
      } = n;
      a = Ot(a);
      const d = new Map(i), u = [a];
      for (; u.length; ) {
        const h = u.shift();
        s.has(h) || i.set(Ot(h), r ? "on" : "off"), o.has(h) && u.push(...o.get(h));
      }
      let f = Ot(l.get(a));
      for (; f; ) {
        let h = !0, y = !0;
        for (const p of o.get(f)) {
          const w = Ot(p);
          if (!s.has(w) && (i.get(w) !== "on" && (h = !1), i.has(w) && i.get(w) !== "off" && (y = !1), !h && !y))
            break;
        }
        i.set(f, h ? "on" : y ? "off" : "indeterminate"), f = Ot(l.get(f));
      }
      return e && !r && Array.from(i.entries()).reduce((y, p) => {
        let [w, b] = p;
        return b === "on" && y.push(w), y;
      }, []).length === 0 ? d : i;
    },
    in: (n, a, r, i) => {
      let o = /* @__PURE__ */ new Map();
      for (const l of n || [])
        o = t.select({
          id: l,
          value: !0,
          selected: o,
          children: a,
          parents: r,
          disabled: i
        });
      return o;
    },
    out: (n, a) => {
      const r = [];
      for (const [i, o] of n.entries())
        o === "on" && !a.has(i) && r.push(i);
      return r;
    }
  };
  return t;
}, Gz = (e) => {
  const t = dP(e);
  return {
    select: t.select,
    in: t.in,
    out: (a, r, i) => {
      const o = [];
      for (const [l, s] of a.entries())
        if (s === "on") {
          if (i.has(l)) {
            const d = i.get(l);
            if (a.get(d) === "on") continue;
          }
          o.push(l);
        }
      return o;
    }
  };
}, Rf = Symbol.for("vuetify:nested"), fP = {
  id: rt(),
  root: {
    register: () => null,
    unregister: () => null,
    children: be(/* @__PURE__ */ new Map()),
    parents: be(/* @__PURE__ */ new Map()),
    disabled: be(/* @__PURE__ */ new Set()),
    open: () => null,
    openOnSelect: () => null,
    activate: () => null,
    select: () => null,
    activatable: be(!1),
    selectable: be(!1),
    opened: be(/* @__PURE__ */ new Set()),
    activated: be(/* @__PURE__ */ new Set()),
    selected: be(/* @__PURE__ */ new Map()),
    selectedValues: be([]),
    getPath: () => []
  }
}, Qz = Be({
  activatable: Boolean,
  selectable: Boolean,
  activeStrategy: [String, Function, Object],
  selectStrategy: [String, Function, Object],
  openStrategy: [String, Object],
  opened: null,
  activated: null,
  selected: null,
  mandatory: Boolean
}, "nested"), Jz = (e) => {
  let t = !1;
  const n = rt(/* @__PURE__ */ new Map()), a = rt(/* @__PURE__ */ new Map()), r = rt(/* @__PURE__ */ new Set()), i = wt(e, "opened", e.opened, (w) => new Set(Array.isArray(w) ? w.map((b) => Ot(b)) : w), (w) => [...w.values()]), o = W(() => {
    if (typeof e.activeStrategy == "object") return e.activeStrategy;
    if (typeof e.activeStrategy == "function") return e.activeStrategy(e.mandatory);
    switch (e.activeStrategy) {
      case "leaf":
        return Hz(e.mandatory);
      case "single-leaf":
        return zz(e.mandatory);
      case "independent":
        return N0(e.mandatory);
      case "single-independent":
      default:
        return lP(e.mandatory);
    }
  }), l = W(() => {
    if (typeof e.selectStrategy == "object") return e.selectStrategy;
    if (typeof e.selectStrategy == "function") return e.selectStrategy(e.mandatory);
    switch (e.selectStrategy) {
      case "single-leaf":
        return Yz(e.mandatory);
      case "leaf":
        return jz(e.mandatory);
      case "independent":
        return U0(e.mandatory);
      case "single-independent":
        return uP(e.mandatory);
      case "trunk":
        return Gz(e.mandatory);
      case "classic":
      default:
        return dP(e.mandatory);
    }
  }), s = W(() => {
    if (typeof e.openStrategy == "object") return e.openStrategy;
    switch (e.openStrategy) {
      case "list":
        return Kz;
      case "single":
        return Wz;
      case "multiple":
      default:
        return cP;
    }
  }), d = wt(e, "activated", e.activated, (w) => o.value.in(w, n.value, a.value), (w) => o.value.out(w, n.value, a.value)), u = wt(e, "selected", e.selected, (w) => l.value.in(w, n.value, a.value, r.value), (w) => l.value.out(w, n.value, a.value));
  Ja(() => {
    t = !0;
  });
  function f(w) {
    const b = [];
    let v = Ot(w);
    for (; v != null; )
      b.unshift(v), v = a.value.get(v);
    return b;
  }
  const h = ya("nested"), y = /* @__PURE__ */ new Set(), p = {
    id: rt(),
    root: {
      opened: i,
      activatable: ye(() => e.activatable),
      selectable: ye(() => e.selectable),
      activated: d,
      selected: u,
      selectedValues: W(() => {
        const w = [];
        for (const [b, v] of u.value.entries())
          v === "on" && w.push(b);
        return w;
      }),
      register: (w, b, v, g) => {
        if (y.has(w)) {
          f(w).map(String).join(" -> "), f(b).concat(w).map(String).join(" -> ");
          return;
        } else
          y.add(w);
        b && w !== b && a.value.set(w, b), v && r.value.add(w), g && n.value.set(w, []), b != null && n.value.set(b, [...n.value.get(b) || [], w]);
      },
      unregister: (w) => {
        if (t) return;
        y.delete(w), n.value.delete(w), r.value.delete(w);
        const b = a.value.get(w);
        if (b) {
          const v = n.value.get(b) ?? [];
          n.value.set(b, v.filter((g) => g !== w));
        }
        a.value.delete(w);
      },
      open: (w, b, v) => {
        h.emit("click:open", {
          id: w,
          value: b,
          path: f(w),
          event: v
        });
        const g = s.value.open({
          id: w,
          value: b,
          opened: new Set(i.value),
          children: n.value,
          parents: a.value,
          event: v
        });
        g && (i.value = g);
      },
      openOnSelect: (w, b, v) => {
        const g = s.value.select({
          id: w,
          value: b,
          selected: new Map(u.value),
          opened: new Set(i.value),
          children: n.value,
          parents: a.value,
          event: v
        });
        g && (i.value = g);
      },
      select: (w, b, v) => {
        h.emit("click:select", {
          id: w,
          value: b,
          path: f(w),
          event: v
        });
        const g = l.value.select({
          id: w,
          value: b,
          selected: new Map(u.value),
          children: n.value,
          parents: a.value,
          disabled: r.value,
          event: v
        });
        g && (u.value = g), p.root.openOnSelect(w, b, v);
      },
      activate: (w, b, v) => {
        if (!e.activatable)
          return p.root.select(w, !0, v);
        h.emit("click:activate", {
          id: w,
          value: b,
          path: f(w),
          event: v
        });
        const g = o.value.activate({
          id: w,
          value: b,
          activated: new Set(d.value),
          children: n.value,
          parents: a.value,
          event: v
        });
        if (g.size !== d.value.size)
          d.value = g;
        else {
          for (const k of g)
            if (!d.value.has(k)) {
              d.value = g;
              return;
            }
          for (const k of d.value)
            if (!g.has(k)) {
              d.value = g;
              return;
            }
        }
      },
      children: n,
      parents: a,
      disabled: r,
      getPath: f
    }
  };
  return Ln(Rf, p), p.root;
}, mP = (e, t, n) => {
  const a = Gt(Rf, fP), r = Symbol("nested item"), i = W(() => Ot(ji(e)) ?? r), o = {
    ...a,
    id: i,
    open: (l, s) => a.root.open(i.value, l, s),
    openOnSelect: (l, s) => a.root.openOnSelect(i.value, l, s),
    isOpen: W(() => a.root.opened.value.has(i.value)),
    parent: W(() => a.root.parents.value.get(i.value)),
    activate: (l, s) => a.root.activate(i.value, l, s),
    isActivated: W(() => a.root.activated.value.has(i.value)),
    select: (l, s) => a.root.select(i.value, l, s),
    isSelected: W(() => a.root.selected.value.get(i.value) === "on"),
    isIndeterminate: W(() => a.root.selected.value.get(i.value) === "indeterminate"),
    isLeaf: W(() => !a.root.children.value.get(i.value)),
    isGroupActivator: a.isGroupActivator
  };
  return Wu(() => {
    a.isGroupActivator || a.root.register(i.value, a.id.value, ji(t), n);
  }), Ja(() => {
    a.isGroupActivator || a.root.unregister(i.value);
  }), n && Ln(Rf, o), o;
}, Xz = () => {
  const e = Gt(Rf, fP);
  Ln(Rf, {
    ...e,
    isGroupActivator: !0
  });
}, Zz = vi({
  name: "VListGroupActivator",
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Xz(), () => n.default?.();
  }
}), hP = Be({
  /* @deprecated */
  activeColor: String,
  baseColor: String,
  color: String,
  collapseIcon: {
    type: St,
    default: "$collapse"
  },
  disabled: Boolean,
  expandIcon: {
    type: St,
    default: "$expand"
  },
  rawId: [String, Number],
  prependIcon: St,
  appendIcon: St,
  fluid: Boolean,
  subgroup: Boolean,
  title: String,
  value: null,
  ...pt(),
  ...$t()
}, "VListGroup"), Ff = We()({
  name: "VListGroup",
  props: hP(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isOpen: a,
      open: r,
      id: i
    } = mP(() => e.value, () => e.disabled, !0), o = W(() => `v-list-group--id-${String(e.rawId ?? i.value)}`), l = sP(), {
      isBooted: s
    } = _c();
    function d(y) {
      ["INPUT", "TEXTAREA"].includes(y.target?.tagName) || r(!a.value, y);
    }
    const u = W(() => ({
      onClick: d,
      class: "v-list-group__header",
      id: o.value
    })), f = W(() => a.value ? e.collapseIcon : e.expandIcon), h = W(() => ({
      VListItem: {
        activeColor: e.activeColor,
        baseColor: e.baseColor,
        color: e.color,
        prependIcon: e.prependIcon || e.subgroup && f.value,
        appendIcon: e.appendIcon || !e.subgroup && f.value,
        title: e.title,
        value: e.value
      }
    }));
    return Ye(() => _(e.tag, {
      class: Ae(["v-list-group", {
        "v-list-group--prepend": l?.hasPrepend.value,
        "v-list-group--fluid": e.fluid,
        "v-list-group--subgroup": e.subgroup,
        "v-list-group--open": a.value
      }, e.class]),
      style: Je(e.style)
    }, {
      default: () => [n.activator && _(Ht, {
        defaults: h.value
      }, {
        default: () => [_(Zz, null, {
          default: () => [n.activator({
            props: u.value,
            isOpen: a.value
          })]
        })]
      }), _(Cr, {
        transition: {
          component: Av
        },
        disabled: !s.value
      }, {
        default: () => [sn(T("div", {
          class: "v-list-group__items",
          role: "group",
          "aria-labelledby": o.value
        }, [n.default?.()]), [[_a, a.value]])]
      })]
    })), {
      isOpen: a
    };
  }
}), eW = Be({
  opacity: [Number, String],
  ...pt(),
  ...$t()
}, "VListItemSubtitle"), _P = We()({
  name: "VListItemSubtitle",
  props: eW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(e.tag, {
      class: Ae(["v-list-item-subtitle", e.class]),
      style: Je([{
        "--v-list-item-subtitle-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), vP = ds("v-list-item-title"), pP = Be({
  active: {
    type: Boolean,
    default: void 0
  },
  activeClass: String,
  /* @deprecated */
  activeColor: String,
  appendAvatar: String,
  appendIcon: St,
  baseColor: String,
  disabled: Boolean,
  lines: [Boolean, String],
  link: {
    type: Boolean,
    default: void 0
  },
  nav: Boolean,
  prependAvatar: String,
  prependIcon: St,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  slim: Boolean,
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  value: null,
  onClick: rr(),
  onClickOnce: rr(),
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ta(),
  ...Ua(),
  ...qn(),
  ...om(),
  ...$t(),
  ...rn(),
  ...Di({
    variant: "text"
  })
}, "VListItem"), Xi = We()({
  name: "VListItem",
  directives: {
    vRipple: xr
  },
  props: pP(),
  emits: {
    click: (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a,
      emit: r
    } = t;
    const i = im(e, n), o = W(() => e.value === void 0 ? i.href.value : e.value), {
      activate: l,
      isActivated: s,
      select: d,
      isOpen: u,
      isSelected: f,
      isIndeterminate: h,
      isGroupActivator: y,
      root: p,
      parent: w,
      openOnSelect: b,
      id: v
    } = mP(o, () => e.disabled, !1), g = sP(), k = W(() => e.active !== !1 && (e.active || i.isActive?.value || (p.activatable.value ? s.value : f.value))), A = ye(() => e.link !== !1 && i.isLink.value), C = W(() => !!g && (p.selectable.value || p.activatable.value || e.value != null)), D = W(() => !e.disabled && e.link !== !1 && (e.link || i.isClickable.value || C.value)), P = ye(() => e.rounded || e.nav), O = ye(() => e.color ?? e.activeColor), I = ye(() => ({
      color: k.value ? O.value ?? e.baseColor : e.baseColor,
      variant: e.variant
    }));
    tt(() => i.isActive?.value, (ve) => {
      ve && x();
    }), Wu(() => {
      i.isActive?.value && x();
    });
    function x() {
      w.value != null && p.open(w.value, !0), b(!0);
    }
    const {
      themeClasses: M
    } = gn(e), {
      borderClasses: V
    } = Xr(e), {
      colorClasses: B,
      colorStyles: F,
      variantClasses: H
    } = vc(I), {
      densityClasses: K
    } = Tr(e), {
      dimensionStyles: Z
    } = Ia(e), {
      elevationClasses: ue
    } = Xa(e), {
      roundedClasses: Y
    } = ra(P), U = ye(() => e.lines ? `v-list-item--${e.lines}-line` : void 0), q = ye(() => e.ripple !== void 0 && e.ripple && g?.filterable ? {
      keys: ["Enter"]
    } : e.ripple), oe = W(() => ({
      isActive: k.value,
      select: d,
      isOpen: u.value,
      isSelected: f.value,
      isIndeterminate: h.value
    }));
    function ee(ve) {
      r("click", ve), !["INPUT", "TEXTAREA"].includes(ve.target?.tagName) && D.value && (i.navigate?.(ve), !y && (p.activatable.value ? l(!s.value, ve) : (p.selectable.value || e.value != null) && d(!f.value, ve)));
    }
    function he(ve) {
      const pe = ve.target;
      ["INPUT", "TEXTAREA"].includes(pe.tagName) || (ve.key === "Enter" || ve.key === " " && !g?.filterable) && (ve.preventDefault(), ve.stopPropagation(), ve.target.dispatchEvent(new MouseEvent("click", ve)));
    }
    return Ye(() => {
      const ve = A.value ? "a" : e.tag, pe = a.title || e.title != null, z = a.subtitle || e.subtitle != null, ge = !!(e.appendAvatar || e.appendIcon), Ve = !!(ge || a.append), Ne = !!(e.prependAvatar || e.prependIcon), ce = !!(Ne || a.prepend);
      return g?.updateHasPrepend(ce), e.activeColor && FT("active-color", ["color", "base-color"]), sn(_(ve, Fe({
        class: ["v-list-item", {
          "v-list-item--active": k.value,
          "v-list-item--disabled": e.disabled,
          "v-list-item--link": D.value,
          "v-list-item--nav": e.nav,
          "v-list-item--prepend": !ce && g?.hasPrepend.value,
          "v-list-item--slim": e.slim,
          [`${e.activeClass}`]: e.activeClass && k.value
        }, M.value, V.value, B.value, K.value, ue.value, U.value, Y.value, H.value, e.class],
        style: [F.value, Z.value, e.style],
        tabindex: D.value ? g ? -2 : 0 : void 0,
        "aria-selected": C.value ? p.activatable.value ? s.value : p.selectable.value ? f.value : k.value : void 0,
        onClick: ee,
        onKeydown: D.value && !A.value && he
      }, i.linkProps), {
        default: () => [il(D.value || k.value, "v-list-item"), ce && T("div", {
          key: "prepend",
          class: "v-list-item__prepend"
        }, [a.prepend ? _(Ht, {
          key: "prepend-defaults",
          disabled: !Ne,
          defaults: {
            VAvatar: {
              density: e.density,
              image: e.prependAvatar
            },
            VIcon: {
              density: e.density,
              icon: e.prependIcon
            },
            VListItemAction: {
              start: !0
            }
          }
        }, {
          default: () => [a.prepend?.(oe.value)]
        }) : T(Ge, null, [e.prependAvatar && _(Oi, {
          key: "prepend-avatar",
          density: e.density,
          image: e.prependAvatar
        }, null), e.prependIcon && _(pn, {
          key: "prepend-icon",
          density: e.density,
          icon: e.prependIcon
        }, null)]), T("div", {
          class: "v-list-item__spacer"
        }, null)]), T("div", {
          class: "v-list-item__content",
          "data-no-activator": ""
        }, [pe && _(vP, {
          key: "title"
        }, {
          default: () => [a.title?.({
            title: e.title
          }) ?? j(e.title)]
        }), z && _(_P, {
          key: "subtitle"
        }, {
          default: () => [a.subtitle?.({
            subtitle: e.subtitle
          }) ?? j(e.subtitle)]
        }), a.default?.(oe.value)]), Ve && T("div", {
          key: "append",
          class: "v-list-item__append"
        }, [a.append ? _(Ht, {
          key: "append-defaults",
          disabled: !ge,
          defaults: {
            VAvatar: {
              density: e.density,
              image: e.appendAvatar
            },
            VIcon: {
              density: e.density,
              icon: e.appendIcon
            },
            VListItemAction: {
              end: !0
            }
          }
        }, {
          default: () => [a.append?.(oe.value)]
        }) : T(Ge, null, [e.appendIcon && _(pn, {
          key: "append-icon",
          density: e.density,
          icon: e.appendIcon
        }, null), e.appendAvatar && _(Oi, {
          key: "append-avatar",
          density: e.density,
          image: e.appendAvatar
        }, null)]), T("div", {
          class: "v-list-item__spacer"
        }, null)])]
      }), [[xr, D.value && q.value]]);
    }), {
      activate: l,
      isActivated: s,
      isGroupActivator: y,
      isSelected: f,
      list: g,
      select: d,
      root: p,
      id: v,
      link: i
    };
  }
}), tW = Be({
  color: String,
  inset: Boolean,
  sticky: Boolean,
  title: String,
  ...pt(),
  ...$t()
}, "VListSubheader"), rd = We()({
  name: "VListSubheader",
  props: tW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      textColorClasses: a,
      textColorStyles: r
    } = sr(() => e.color);
    return Ye(() => {
      const i = !!(n.default || e.title);
      return _(e.tag, {
        class: Ae(["v-list-subheader", {
          "v-list-subheader--inset": e.inset,
          "v-list-subheader--sticky": e.sticky
        }, a.value, e.class]),
        style: Je([{
          textColorStyles: r
        }, e.style])
      }, {
        default: () => [i && T("div", {
          class: "v-list-subheader__text"
        }, [n.default?.() ?? e.title])]
      });
    }), {};
  }
}), nW = Be({
  items: Array,
  returnObject: Boolean
}, "VListChildren"), gP = We()({
  name: "VListChildren",
  props: nW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return oP(), () => n.default?.() ?? e.items?.map((a) => {
      let {
        children: r,
        props: i,
        type: o,
        raw: l
      } = a;
      if (o === "divider")
        return n.divider?.({
          props: i
        }) ?? _(fi, i, null);
      if (o === "subheader")
        return n.subheader?.({
          props: i
        }) ?? _(rd, i, null);
      const s = {
        subtitle: n.subtitle ? (u) => n.subtitle?.({
          ...u,
          item: l
        }) : void 0,
        prepend: n.prepend ? (u) => n.prepend?.({
          ...u,
          item: l
        }) : void 0,
        append: n.append ? (u) => n.append?.({
          ...u,
          item: l
        }) : void 0,
        title: n.title ? (u) => n.title?.({
          ...u,
          item: l
        }) : void 0
      }, d = Ff.filterProps(i);
      return r ? _(Ff, Fe(d, {
        value: e.returnObject ? l : i?.value,
        rawId: i?.value
      }), {
        activator: (u) => {
          let {
            props: f
          } = u;
          const h = Fe(i, f, {
            value: e.returnObject ? l : i.value
          });
          return n.header ? n.header({
            props: h
          }) : _(Xi, h, s);
        },
        default: () => _(gP, {
          items: r,
          returnObject: e.returnObject
        }, n)
      }) : n.item ? n.item({
        props: i
      }) : _(Xi, Fe(i, {
        value: e.returnObject ? l : i.value
      }), s);
    });
  }
}), yP = Be({
  items: {
    type: Array,
    default: () => []
  },
  itemTitle: {
    type: [String, Array, Function],
    default: "title"
  },
  itemValue: {
    type: [String, Array, Function],
    default: "value"
  },
  itemChildren: {
    type: [Boolean, String, Array, Function],
    default: "children"
  },
  itemProps: {
    type: [Boolean, String, Array, Function],
    default: "props"
  },
  itemType: {
    type: [Boolean, String, Array, Function],
    default: "type"
  },
  returnObject: Boolean,
  valueComparator: Function
}, "list-items"), aW = /* @__PURE__ */ new Set(["item", "divider", "subheader"]);
function Hi(e, t) {
  const n = Ca(t, e.itemTitle, t), a = Ca(t, e.itemValue, n), r = Ca(t, e.itemChildren), i = e.itemProps === !0 ? typeof t == "object" && t != null && !Array.isArray(t) ? "children" in t ? Tn(t, ["children"]) : t : void 0 : Ca(t, e.itemProps);
  let o = Ca(t, e.itemType, "item");
  aW.has(o) || (o = "item");
  const l = {
    title: n,
    value: a,
    ...i
  };
  return {
    type: o,
    title: String(l.title ?? ""),
    value: l.value,
    props: l,
    children: o === "item" && Array.isArray(r) ? bP(e, r) : void 0,
    raw: t
  };
}
Hi.neededProps = ["itemTitle", "itemValue", "itemChildren", "itemProps", "itemType"];
function bP(e, t) {
  const n = us(e, Hi.neededProps), a = [];
  for (const r of t)
    a.push(Hi(n, r));
  return a;
}
function $0(e) {
  const t = W(() => bP(e, e.items)), n = W(() => t.value.some((l) => l.value === null)), a = rt(/* @__PURE__ */ new Map()), r = rt([]);
  na(() => {
    const l = t.value, s = /* @__PURE__ */ new Map(), d = [];
    for (let u = 0; u < l.length; u++) {
      const f = l[u];
      if (Wy(f.value) || f.value === null) {
        let h = s.get(f.value);
        h || (h = [], s.set(f.value, h)), h.push(f);
      } else
        d.push(f);
    }
    a.value = s, r.value = d;
  });
  function i(l) {
    const s = a.value, d = t.value, u = r.value, f = n.value, h = e.returnObject, y = !!e.valueComparator, p = e.valueComparator || Ga, w = us(e, Hi.neededProps), b = [];
    e: for (const v of l) {
      if (!f && v === null) continue;
      if (h && typeof v == "string") {
        b.push(Hi(w, v));
        continue;
      }
      const g = s.get(v);
      if (y || !g) {
        for (const k of y ? d : u)
          if (p(v, k.value)) {
            b.push(k);
            continue e;
          }
        b.push(Hi(w, v));
        continue;
      }
      b.push(...g);
    }
    return b;
  }
  function o(l) {
    return e.returnObject ? l.map((s) => {
      let {
        raw: d
      } = s;
      return d;
    }) : l.map((s) => {
      let {
        value: d
      } = s;
      return d;
    });
  }
  return {
    items: t,
    transformIn: i,
    transformOut: o
  };
}
const rW = /* @__PURE__ */ new Set(["item", "divider", "subheader"]);
function iW(e, t) {
  const n = Wy(t) ? t : Ca(t, e.itemTitle), a = Wy(t) ? t : Ca(t, e.itemValue, void 0), r = Ca(t, e.itemChildren), i = e.itemProps === !0 ? Tn(t, ["children"]) : Ca(t, e.itemProps);
  let o = Ca(t, e.itemType, "item");
  rW.has(o) || (o = "item");
  const l = {
    title: n,
    value: a,
    ...i
  };
  return {
    type: o,
    title: l.title,
    value: l.value,
    props: l,
    children: o === "item" && r ? wP(e, r) : void 0,
    raw: t
  };
}
function wP(e, t) {
  const n = [];
  for (const a of t)
    n.push(iW(e, a));
  return n;
}
function kP(e) {
  return {
    items: W(() => wP(e, e.items))
  };
}
const SP = Be({
  baseColor: String,
  /* @deprecated */
  activeColor: String,
  activeClass: String,
  bgColor: String,
  disabled: Boolean,
  filterable: Boolean,
  expandIcon: St,
  collapseIcon: St,
  lines: {
    type: [Boolean, String],
    default: "one"
  },
  slim: Boolean,
  nav: Boolean,
  "onClick:open": rr(),
  "onClick:select": rr(),
  "onUpdate:opened": rr(),
  ...Qz({
    selectStrategy: "single-leaf",
    openStrategy: "list"
  }),
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ta(),
  ...Ua(),
  ...yP(),
  ...qn(),
  ...$t(),
  ...rn(),
  ...Di({
    variant: "text"
  })
}, "VList"), Ru = We()({
  name: "VList",
  props: SP(),
  emits: {
    "update:selected": (e) => !0,
    "update:activated": (e) => !0,
    "update:opened": (e) => !0,
    "click:open": (e) => !0,
    "click:activate": (e) => !0,
    "click:select": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      items: a
    } = kP(e), {
      themeClasses: r
    } = gn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = bn(() => e.bgColor), {
      borderClasses: l
    } = Xr(e), {
      densityClasses: s
    } = Tr(e), {
      dimensionStyles: d
    } = Ia(e), {
      elevationClasses: u
    } = Xa(e), {
      roundedClasses: f
    } = ra(e), {
      children: h,
      open: y,
      parents: p,
      select: w,
      getPath: b
    } = Jz(e), v = ye(() => e.lines ? `v-list--${e.lines}-line` : void 0), g = ye(() => e.activeColor), k = ye(() => e.baseColor), A = ye(() => e.color);
    oP({
      filterable: e.filterable
    }), aa({
      VListGroup: {
        activeColor: g,
        baseColor: k,
        color: A,
        expandIcon: ye(() => e.expandIcon),
        collapseIcon: ye(() => e.collapseIcon)
      },
      VListItem: {
        activeClass: ye(() => e.activeClass),
        activeColor: g,
        baseColor: k,
        color: A,
        density: ye(() => e.density),
        disabled: ye(() => e.disabled),
        lines: ye(() => e.lines),
        nav: ye(() => e.nav),
        slim: ye(() => e.slim),
        variant: ye(() => e.variant)
      }
    });
    const C = rt(!1), D = be();
    function P(B) {
      C.value = !0;
    }
    function O(B) {
      C.value = !1;
    }
    function I(B) {
      !C.value && !(B.relatedTarget && D.value?.contains(B.relatedTarget)) && V();
    }
    function x(B) {
      const F = B.target;
      if (!(!D.value || F.tagName === "INPUT" && ["Home", "End"].includes(B.key) || F.tagName === "TEXTAREA")) {
        if (B.key === "ArrowDown")
          V("next");
        else if (B.key === "ArrowUp")
          V("prev");
        else if (B.key === "Home")
          V("first");
        else if (B.key === "End")
          V("last");
        else
          return;
        B.preventDefault();
      }
    }
    function M(B) {
      C.value = !0;
    }
    function V(B) {
      if (D.value)
        return zl(D.value, B);
    }
    return Ye(() => _(e.tag, {
      ref: D,
      class: Ae(["v-list", {
        "v-list--disabled": e.disabled,
        "v-list--nav": e.nav,
        "v-list--slim": e.slim
      }, r.value, i.value, l.value, s.value, u.value, v.value, f.value, e.class]),
      style: Je([o.value, d.value, e.style]),
      tabindex: e.disabled ? -1 : 0,
      role: "listbox",
      "aria-activedescendant": void 0,
      onFocusin: P,
      onFocusout: O,
      onFocus: I,
      onKeydown: x,
      onMousedown: M
    }, {
      default: () => [_(gP, {
        items: a.value,
        returnObject: e.returnObject
      }, n)]
    })), {
      open: y,
      select: w,
      focus: V,
      children: h,
      parents: p,
      getPath: b
    };
  }
}), oW = ds("v-list-img"), sW = Be({
  start: Boolean,
  end: Boolean,
  ...pt(),
  ...$t()
}, "VListItemAction"), CP = We()({
  name: "VListItemAction",
  props: sW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(e.tag, {
      class: Ae(["v-list-item-action", {
        "v-list-item-action--start": e.start,
        "v-list-item-action--end": e.end
      }, e.class]),
      style: Je(e.style)
    }, n)), {};
  }
}), lW = Be({
  start: Boolean,
  end: Boolean,
  ...pt(),
  ...$t()
}, "VListItemMedia"), cW = We()({
  name: "VListItemMedia",
  props: lW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(e.tag, {
      class: Ae(["v-list-item-media", {
        "v-list-item-media--start": e.start,
        "v-list-item-media--end": e.end
      }, e.class]),
      style: Je(e.style)
    }, n)), {};
  }
});
function gy(e, t) {
  return {
    x: e.x + t.x,
    y: e.y + t.y
  };
}
function uW(e, t) {
  return {
    x: e.x - t.x,
    y: e.y - t.y
  };
}
function mA(e, t) {
  if (e.side === "top" || e.side === "bottom") {
    const {
      side: n,
      align: a
    } = e, r = a === "left" ? 0 : a === "center" ? t.width / 2 : a === "right" ? t.width : a, i = n === "top" ? 0 : n === "bottom" ? t.height : n;
    return gy({
      x: r,
      y: i
    }, t);
  } else if (e.side === "left" || e.side === "right") {
    const {
      side: n,
      align: a
    } = e, r = n === "left" ? 0 : n === "right" ? t.width : n, i = a === "top" ? 0 : a === "center" ? t.height / 2 : a === "bottom" ? t.height : a;
    return gy({
      x: r,
      y: i
    }, t);
  }
  return gy({
    x: t.width / 2,
    y: t.height / 2
  }, t);
}
const AP = {
  static: mW,
  // specific viewport position, usually centered
  connected: _W
  // connected to a certain element
}, dW = Be({
  locationStrategy: {
    type: [String, Function],
    default: "static",
    validator: (e) => typeof e == "function" || e in AP
  },
  location: {
    type: String,
    default: "bottom"
  },
  origin: {
    type: String,
    default: "auto"
  },
  offset: [Number, String, Array]
}, "VOverlay-location-strategies");
function fW(e, t) {
  const n = be({}), a = be();
  _n && Ar(() => !!(t.isActive.value && e.locationStrategy), (l) => {
    tt(() => e.locationStrategy, l), Fa(() => {
      window.removeEventListener("resize", r), visualViewport?.removeEventListener("resize", i), visualViewport?.removeEventListener("scroll", o), a.value = void 0;
    }), window.addEventListener("resize", r, {
      passive: !0
    }), visualViewport?.addEventListener("resize", i, {
      passive: !0
    }), visualViewport?.addEventListener("scroll", o, {
      passive: !0
    }), typeof e.locationStrategy == "function" ? a.value = e.locationStrategy(t, e, n)?.updateLocation : a.value = AP[e.locationStrategy](t, e, n)?.updateLocation;
  });
  function r(l) {
    a.value?.(l);
  }
  function i(l) {
    a.value?.(l);
  }
  function o(l) {
    a.value?.(l);
  }
  return {
    contentStyles: n,
    updateLocation: a
  };
}
function mW() {
}
function hW(e, t) {
  const n = Lw(e);
  return t ? n.x += parseFloat(e.style.right || 0) : n.x -= parseFloat(e.style.left || 0), n.y -= parseFloat(e.style.top || 0), n;
}
function _W(e, t, n) {
  (Array.isArray(e.target.value) || w4(e.target.value)) && Object.assign(n.value, {
    position: "fixed",
    top: 0,
    [e.isRtl.value ? "right" : "left"]: 0
  });
  const {
    preferredAnchor: r,
    preferredOrigin: i
  } = Mw(() => {
    const v = Ky(t.location, e.isRtl.value), g = t.origin === "overlap" ? v : t.origin === "auto" ? qg(v) : Ky(t.origin, e.isRtl.value);
    return v.side === g.side && v.align === Hg(g).align ? {
      preferredAnchor: JS(v),
      preferredOrigin: JS(g)
    } : {
      preferredAnchor: v,
      preferredOrigin: g
    };
  }), [o, l, s, d] = ["minWidth", "minHeight", "maxWidth", "maxHeight"].map((v) => W(() => {
    const g = parseFloat(t[v]);
    return isNaN(g) ? 1 / 0 : g;
  })), u = W(() => {
    if (Array.isArray(t.offset))
      return t.offset;
    if (typeof t.offset == "string") {
      const v = t.offset.split(" ").map(parseFloat);
      return v.length < 2 && v.push(0), v;
    }
    return typeof t.offset == "number" ? [t.offset, 0] : [0, 0];
  });
  let f = !1, h = -1;
  const y = new DT(4), p = new ResizeObserver(() => {
    if (!f) return;
    if (requestAnimationFrame((g) => {
      g !== h && y.clear(), requestAnimationFrame((k) => {
        h = k;
      });
    }), y.isFull) {
      const g = y.values();
      if (Ga(g.at(-1), g.at(-3)) && !Ga(g.at(-1), g.at(-2)))
        return;
    }
    const v = b();
    v && y.push(v.flipped);
  });
  let w = new wo({
    x: 0,
    y: 0,
    width: 0,
    height: 0
  });
  tt(e.target, (v, g) => {
    g && !Array.isArray(g) && p.unobserve(g), Array.isArray(v) ? Ga(v, g) || b() : v && p.observe(v);
  }, {
    immediate: !0
  }), tt(e.contentEl, (v, g) => {
    g && p.unobserve(g), v && p.observe(v);
  }, {
    immediate: !0
  }), Fa(() => {
    p.disconnect();
  });
  function b() {
    if (f = !1, requestAnimationFrame(() => f = !0), !e.target.value || !e.contentEl.value) return;
    (Array.isArray(e.target.value) || e.target.value.offsetParent || e.target.value.getClientRects().length) && (w = RT(e.target.value));
    const v = hW(e.contentEl.value, e.isRtl.value), g = T_(e.contentEl.value), k = 12;
    g.length || (g.push(document.documentElement), e.contentEl.value.style.top && e.contentEl.value.style.left || (v.x -= parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x") || 0), v.y -= parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y") || 0)));
    const A = g.reduce((B, F) => {
      const H = q3(F);
      return B ? new wo({
        x: Math.max(B.left, H.left),
        y: Math.max(B.top, H.top),
        width: Math.min(B.right, H.right) - Math.max(B.left, H.left),
        height: Math.min(B.bottom, H.bottom) - Math.max(B.top, H.top)
      }) : H;
    }, void 0);
    A.x += k, A.y += k, A.width -= k * 2, A.height -= k * 2;
    let C = {
      anchor: r.value,
      origin: i.value
    };
    function D(B) {
      const F = new wo(v), H = mA(B.anchor, w), K = mA(B.origin, F);
      let {
        x: Z,
        y: ue
      } = uW(H, K);
      switch (B.anchor.side) {
        case "top":
          ue -= u.value[0];
          break;
        case "bottom":
          ue += u.value[0];
          break;
        case "left":
          Z -= u.value[0];
          break;
        case "right":
          Z += u.value[0];
          break;
      }
      switch (B.anchor.align) {
        case "top":
          ue -= u.value[1];
          break;
        case "bottom":
          ue += u.value[1];
          break;
        case "left":
          Z -= u.value[1];
          break;
        case "right":
          Z += u.value[1];
          break;
      }
      return F.x += Z, F.y += ue, F.width = Math.min(F.width, s.value), F.height = Math.min(F.height, d.value), {
        overflows: ZS(F, A),
        x: Z,
        y: ue
      };
    }
    let P = 0, O = 0;
    const I = {
      x: 0,
      y: 0
    }, x = {
      x: !1,
      y: !1
    };
    let M = -1;
    for (; !(M++ > 10); ) {
      const {
        x: B,
        y: F,
        overflows: H
      } = D(C);
      P += B, O += F, v.x += B, v.y += F;
      {
        const K = XS(C.anchor), Z = H.x.before || H.x.after, ue = H.y.before || H.y.after;
        let Y = !1;
        if (["x", "y"].forEach((U) => {
          if (U === "x" && Z && !x.x || U === "y" && ue && !x.y) {
            const q = {
              anchor: {
                ...C.anchor
              },
              origin: {
                ...C.origin
              }
            }, oe = U === "x" ? K === "y" ? Hg : qg : K === "y" ? qg : Hg;
            q.anchor = oe(q.anchor), q.origin = oe(q.origin);
            const {
              overflows: ee
            } = D(q);
            (ee[U].before <= H[U].before && ee[U].after <= H[U].after || ee[U].before + ee[U].after < (H[U].before + H[U].after) / 2) && (C = q, Y = x[U] = !0);
          }
        }), Y) continue;
      }
      H.x.before && (P += H.x.before, v.x += H.x.before), H.x.after && (P -= H.x.after, v.x -= H.x.after), H.y.before && (O += H.y.before, v.y += H.y.before), H.y.after && (O -= H.y.after, v.y -= H.y.after);
      {
        const K = ZS(v, A);
        I.x = A.width - K.x.before - K.x.after, I.y = A.height - K.y.before - K.y.after, P += K.x.before, v.x += K.x.before, O += K.y.before, v.y += K.y.before;
      }
      break;
    }
    const V = XS(C.anchor);
    return Object.assign(n.value, {
      "--v-overlay-anchor-origin": `${C.anchor.side} ${C.anchor.align}`,
      transformOrigin: `${C.origin.side} ${C.origin.align}`,
      // transform: `translate(${pixelRound(x)}px, ${pixelRound(y)}px)`,
      top: ht(yy(O)),
      left: e.isRtl.value ? void 0 : ht(yy(P)),
      right: e.isRtl.value ? ht(yy(-P)) : void 0,
      minWidth: ht(V === "y" ? Math.min(o.value, w.width) : o.value),
      maxWidth: ht(hA(Dn(I.x, o.value === 1 / 0 ? 0 : o.value, s.value))),
      maxHeight: ht(hA(Dn(I.y, l.value === 1 / 0 ? 0 : l.value, d.value)))
    }), {
      available: I,
      contentBox: v,
      flipped: x
    };
  }
  return tt(() => [r.value, i.value, t.offset, t.minWidth, t.minHeight, t.maxWidth, t.maxHeight], () => b()), Dt(() => {
    const v = b();
    if (!v) return;
    const {
      available: g,
      contentBox: k
    } = v;
    k.height > g.y && requestAnimationFrame(() => {
      b(), requestAnimationFrame(() => {
        b();
      });
    });
  }), {
    updateLocation: b
  };
}
function yy(e) {
  return Math.round(e * devicePixelRatio) / devicePixelRatio;
}
function hA(e) {
  return Math.ceil(e * devicePixelRatio) / devicePixelRatio;
}
let Bb = !0;
const K_ = [];
function vW(e) {
  !Bb || K_.length ? (K_.push(e), Vb()) : (Bb = !1, e(), Vb());
}
let _A = -1;
function Vb() {
  cancelAnimationFrame(_A), _A = requestAnimationFrame(() => {
    const e = K_.shift();
    e && e(), K_.length ? Vb() : Bb = !0;
  });
}
const xP = {
  none: null,
  close: yW,
  block: bW,
  reposition: wW
}, pW = Be({
  scrollStrategy: {
    type: [String, Function],
    default: "block",
    validator: (e) => typeof e == "function" || e in xP
  }
}, "VOverlay-scroll-strategies");
function gW(e, t) {
  if (!_n) return;
  let n;
  na(async () => {
    n?.stop(), t.isActive.value && e.scrollStrategy && (n = ku(), await new Promise((a) => setTimeout(a)), n.active && n.run(() => {
      typeof e.scrollStrategy == "function" ? e.scrollStrategy(t, e, n) : xP[e.scrollStrategy]?.(t, e, n);
    }));
  }), Fa(() => {
    n?.stop();
  });
}
function yW(e) {
  function t(n) {
    e.isActive.value = !1;
  }
  TP(q0(e.target.value, e.contentEl.value), t);
}
function bW(e, t) {
  const n = e.root.value?.offsetParent, a = q0(e.target.value, e.contentEl.value), r = [.../* @__PURE__ */ new Set([...T_(a, t.contained ? n : void 0), ...T_(e.contentEl.value, t.contained ? n : void 0)])].filter((l) => !l.classList.contains("v-overlay-scroll-blocked")), i = window.innerWidth - document.documentElement.offsetWidth, o = ((l) => $w(l) && l)(n || document.documentElement);
  o && e.root.value.classList.add("v-overlay--scroll-blocked"), r.forEach((l, s) => {
    l.style.setProperty("--v-body-scroll-x", ht(-l.scrollLeft)), l.style.setProperty("--v-body-scroll-y", ht(-l.scrollTop)), l !== document.documentElement && l.style.setProperty("--v-scrollbar-offset", ht(i)), l.classList.add("v-overlay-scroll-blocked");
  }), Fa(() => {
    r.forEach((l, s) => {
      const d = parseFloat(l.style.getPropertyValue("--v-body-scroll-x")), u = parseFloat(l.style.getPropertyValue("--v-body-scroll-y")), f = l.style.scrollBehavior;
      l.style.scrollBehavior = "auto", l.style.removeProperty("--v-body-scroll-x"), l.style.removeProperty("--v-body-scroll-y"), l.style.removeProperty("--v-scrollbar-offset"), l.classList.remove("v-overlay-scroll-blocked"), l.scrollLeft = -d, l.scrollTop = -u, l.style.scrollBehavior = f;
    }), o && e.root.value.classList.remove("v-overlay--scroll-blocked");
  });
}
function wW(e, t, n) {
  let a = !1, r = -1, i = -1;
  function o(l) {
    vW(() => {
      const s = performance.now();
      e.updateLocation.value?.(l), a = (performance.now() - s) / (1e3 / 60) > 2;
    });
  }
  i = (typeof requestIdleCallback > "u" ? (l) => l() : requestIdleCallback)(() => {
    n.run(() => {
      TP(q0(e.target.value, e.contentEl.value), (l) => {
        a ? (cancelAnimationFrame(r), r = requestAnimationFrame(() => {
          r = requestAnimationFrame(() => {
            o(l);
          });
        })) : o(l);
      });
    });
  }), Fa(() => {
    typeof cancelIdleCallback < "u" && cancelIdleCallback(i), cancelAnimationFrame(r);
  });
}
function q0(e, t) {
  return Array.isArray(e) ? document.elementsFromPoint(...e).find((n) => !t?.contains(n)) : e ?? t;
}
function TP(e, t) {
  const n = [document, ...T_(e)];
  n.forEach((a) => {
    a.addEventListener("scroll", t, {
      passive: !0
    });
  }), Fa(() => {
    n.forEach((a) => {
      a.removeEventListener("scroll", t);
    });
  });
}
const Mb = Symbol.for("vuetify:v-menu"), H0 = Be({
  closeDelay: [Number, String],
  openDelay: [Number, String]
}, "delay");
function z0(e, t) {
  let n = () => {
  };
  function a(o) {
    n?.();
    const l = Number(o ? e.openDelay : e.closeDelay);
    return new Promise((s) => {
      n = L3(l, () => {
        t?.(o), s(o);
      });
    });
  }
  function r() {
    return a(!0);
  }
  function i() {
    return a(!1);
  }
  return {
    clearDelay: n,
    runOpenDelay: r,
    runCloseDelay: i
  };
}
const kW = Be({
  target: [String, Object],
  activator: [String, Object],
  activatorProps: {
    type: Object,
    default: () => ({})
  },
  openOnClick: {
    type: Boolean,
    default: void 0
  },
  openOnHover: Boolean,
  openOnFocus: {
    type: Boolean,
    default: void 0
  },
  closeOnContentClick: Boolean,
  ...H0()
}, "VOverlay-activator");
function SW(e, t) {
  let {
    isActive: n,
    isTop: a,
    contentEl: r
  } = t;
  const i = ya("useActivator"), o = be();
  let l = !1, s = !1, d = !0;
  const u = W(() => e.openOnFocus || e.openOnFocus == null && e.openOnHover), f = W(() => e.openOnClick || e.openOnClick == null && !e.openOnHover && !u.value), {
    runOpenDelay: h,
    runCloseDelay: y
  } = z0(e, (O) => {
    O === (e.openOnHover && l || u.value && s) && !(e.openOnHover && n.value && !a.value) && (n.value !== O && (d = !0), n.value = O);
  }), p = be(), w = {
    onClick: (O) => {
      O.stopPropagation(), o.value = O.currentTarget || O.target, n.value || (p.value = [O.clientX, O.clientY]), n.value = !n.value;
    },
    onMouseenter: (O) => {
      O.sourceCapabilities?.firesTouchEvents || (l = !0, o.value = O.currentTarget || O.target, h());
    },
    onMouseleave: (O) => {
      l = !1, y();
    },
    onFocus: (O) => {
      Au(O.target, ":focus-visible") !== !1 && (s = !0, O.stopPropagation(), o.value = O.currentTarget || O.target, h());
    },
    onBlur: (O) => {
      s = !1, O.stopPropagation(), y();
    }
  }, b = W(() => {
    const O = {};
    return f.value && (O.onClick = w.onClick), e.openOnHover && (O.onMouseenter = w.onMouseenter, O.onMouseleave = w.onMouseleave), u.value && (O.onFocus = w.onFocus, O.onBlur = w.onBlur), O;
  }), v = W(() => {
    const O = {};
    if (e.openOnHover && (O.onMouseenter = () => {
      l = !0, h();
    }, O.onMouseleave = () => {
      l = !1, y();
    }), u.value && (O.onFocusin = () => {
      s = !0, h();
    }, O.onFocusout = () => {
      s = !1, y();
    }), e.closeOnContentClick) {
      const I = Gt(Mb, null);
      O.onClick = () => {
        n.value = !1, I?.closeParents();
      };
    }
    return O;
  }), g = W(() => {
    const O = {};
    return e.openOnHover && (O.onMouseenter = () => {
      d && (l = !0, d = !1, h());
    }, O.onMouseleave = () => {
      l = !1, y();
    }), O;
  });
  tt(a, (O) => {
    O && (e.openOnHover && !l && (!u.value || !s) || u.value && !s && (!e.openOnHover || !l)) && !r.value?.contains(document.activeElement) && (n.value = !1);
  }), tt(n, (O) => {
    O || setTimeout(() => {
      p.value = void 0;
    });
  }, {
    flush: "post"
  });
  const k = C_();
  na(() => {
    k.value && Dt(() => {
      o.value = k.el;
    });
  });
  const A = C_(), C = W(() => e.target === "cursor" && p.value ? p.value : A.value ? A.el : IP(e.target, i) || o.value), D = W(() => Array.isArray(C.value) ? void 0 : C.value);
  let P;
  return tt(() => !!e.activator, (O) => {
    O && _n ? (P = ku(), P.run(() => {
      CW(e, i, {
        activatorEl: o,
        activatorEvents: b
      });
    })) : P && P.stop();
  }, {
    flush: "post",
    immediate: !0
  }), Fa(() => {
    P?.stop();
  }), {
    activatorEl: o,
    activatorRef: k,
    target: C,
    targetEl: D,
    targetRef: A,
    activatorEvents: b,
    contentEvents: v,
    scrimEvents: g
  };
}
function CW(e, t, n) {
  let {
    activatorEl: a,
    activatorEvents: r
  } = n;
  tt(() => e.activator, (s, d) => {
    if (d && s !== d) {
      const u = l(d);
      u && o(u);
    }
    s && Dt(() => i());
  }, {
    immediate: !0
  }), tt(() => e.activatorProps, () => {
    i();
  }), Fa(() => {
    o();
  });
  function i() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : l(), d = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.activatorProps;
    s && H3(s, Fe(r.value, d));
  }
  function o() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : l(), d = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.activatorProps;
    s && z3(s, Fe(r.value, d));
  }
  function l() {
    let s = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : e.activator;
    const d = IP(s, t);
    return a.value = d?.nodeType === Node.ELEMENT_NODE ? d : void 0, a.value;
  }
}
function IP(e, t) {
  if (!e) return;
  let n;
  if (e === "parent") {
    let a = t?.proxy?.$el?.parentNode;
    for (; a?.hasAttribute("data-no-activator"); )
      a = a.parentNode;
    n = a;
  } else typeof e == "string" ? n = document.querySelector(e) : "$el" in e ? n = e.$el : n = e;
  return n;
}
function EP() {
  if (!_n) return rt(!1);
  const {
    ssr: e
  } = pi();
  if (e) {
    const t = rt(!1);
    return an(() => {
      t.value = !0;
    }), t;
  } else
    return rt(!0);
}
const W0 = Be({
  eager: Boolean
}, "lazy");
function K0(e, t) {
  const n = rt(!1), a = ye(() => n.value || e.eager || t.value);
  tt(t, () => n.value = !0);
  function r() {
    e.eager || (n.value = !1);
  }
  return {
    isBooted: n,
    hasContent: a,
    onAfterLeave: r
  };
}
function wc() {
  const t = ya("useScopeId").vnode.scopeId;
  return {
    scopeId: t ? {
      [t]: ""
    } : void 0
  };
}
const vA = Symbol.for("vuetify:stack"), Wd = Zn([]);
function AW(e, t, n) {
  const a = ya("useStack"), r = !n, i = Gt(vA, void 0), o = Zn({
    activeChildren: /* @__PURE__ */ new Set()
  });
  Ln(vA, o);
  const l = rt(Number(ji(t)));
  Ar(e, () => {
    const u = Wd.at(-1)?.[1];
    l.value = u ? u + 10 : Number(ji(t)), r && Wd.push([a.uid, l.value]), i?.activeChildren.add(a.uid), Fa(() => {
      if (r) {
        const f = Ot(Wd).findIndex((h) => h[0] === a.uid);
        Wd.splice(f, 1);
      }
      i?.activeChildren.delete(a.uid);
    });
  });
  const s = rt(!0);
  r && na(() => {
    const u = Wd.at(-1)?.[0] === a.uid;
    setTimeout(() => s.value = u);
  });
  const d = ye(() => !o.activeChildren.size);
  return {
    globalTop: Hu(s),
    localTop: d,
    stackStyles: ye(() => ({
      zIndex: l.value
    }))
  };
}
function xW(e) {
  return {
    teleportTarget: W(() => {
      const n = e();
      if (n === !0 || !_n) return;
      const a = n === !1 ? document.body : typeof n == "string" ? document.querySelector(n) : n;
      if (a == null)
        return;
      let r = [...a.children].find((i) => i.matches(".v-overlay-container"));
      return r || (r = document.createElement("div"), r.className = "v-overlay-container", a.appendChild(r)), r;
    })
  };
}
function TW() {
  return !0;
}
function PP(e, t, n) {
  if (!e || OP(e, n) === !1) return !1;
  const a = YT(t);
  if (typeof ShadowRoot < "u" && a instanceof ShadowRoot && a.host === e.target) return !1;
  const r = (typeof n.value == "object" && n.value.include || (() => []))();
  return r.push(t), !r.some((i) => i?.contains(e.target));
}
function OP(e, t) {
  return (typeof t.value == "object" && t.value.closeConditional || TW)(e);
}
function IW(e, t, n) {
  const a = typeof n.value == "function" ? n.value : n.value.handler;
  e.shadowTarget = e.target, t._clickOutside.lastMousedownWasOutside && PP(e, t, n) && setTimeout(() => {
    OP(e, n) && a && a(e);
  }, 0);
}
function pA(e, t) {
  const n = YT(e);
  t(document), typeof ShadowRoot < "u" && n instanceof ShadowRoot && t(n);
}
const Lb = {
  // [data-app] may not be found
  // if using bind, inserted makes
  // sure that the root element is
  // available, iOS does not support
  // clicks on body
  mounted(e, t) {
    const n = (r) => IW(r, e, t), a = (r) => {
      e._clickOutside.lastMousedownWasOutside = PP(r, e, t);
    };
    pA(e, (r) => {
      r.addEventListener("click", n, !0), r.addEventListener("mousedown", a, !0);
    }), e._clickOutside || (e._clickOutside = {
      lastMousedownWasOutside: !1
    }), e._clickOutside[t.instance.$.uid] = {
      onClick: n,
      onMousedown: a
    };
  },
  beforeUnmount(e, t) {
    e._clickOutside && (pA(e, (n) => {
      if (!n || !e._clickOutside?.[t.instance.$.uid]) return;
      const {
        onClick: a,
        onMousedown: r
      } = e._clickOutside[t.instance.$.uid];
      n.removeEventListener("click", a, !0), n.removeEventListener("mousedown", r, !0);
    }), delete e._clickOutside[t.instance.$.uid]);
  }
};
function EW(e) {
  const {
    modelValue: t,
    color: n,
    ...a
  } = e;
  return _($r, {
    name: "fade-transition",
    appear: !0
  }, {
    default: () => [e.modelValue && T("div", Fe({
      class: ["v-overlay__scrim", e.color.backgroundColorClasses.value],
      style: e.color.backgroundColorStyles.value
    }, a), null)]
  });
}
const cm = Be({
  absolute: Boolean,
  attach: [Boolean, String, Object],
  closeOnBack: {
    type: Boolean,
    default: !0
  },
  contained: Boolean,
  contentClass: null,
  contentProps: null,
  disabled: Boolean,
  opacity: [Number, String],
  noClickAnimation: Boolean,
  modelValue: Boolean,
  persistent: Boolean,
  scrim: {
    type: [Boolean, String],
    default: !0
  },
  zIndex: {
    type: [Number, String],
    default: 2e3
  },
  ...kW(),
  ...pt(),
  ...Ta(),
  ...W0(),
  ...dW(),
  ...pW(),
  ...rn(),
  ...eo()
}, "VOverlay"), xo = We()({
  name: "VOverlay",
  directives: {
    vClickOutside: Lb
  },
  inheritAttrs: !1,
  props: {
    _disableGlobalStack: Boolean,
    ...cm()
  },
  emits: {
    "click:outside": (e) => !0,
    "update:modelValue": (e) => !0,
    keydown: (e) => !0,
    afterEnter: () => !0,
    afterLeave: () => !0
  },
  setup(e, t) {
    let {
      slots: n,
      attrs: a,
      emit: r
    } = t;
    const i = ya("VOverlay"), o = be(), l = be(), s = be(), d = wt(e, "modelValue"), u = W({
      get: () => d.value,
      set: (z) => {
        z && e.disabled || (d.value = z);
      }
    }), {
      themeClasses: f
    } = gn(e), {
      rtlClasses: h,
      isRtl: y
    } = Na(), {
      hasContent: p,
      onAfterLeave: w
    } = K0(e, u), b = bn(() => typeof e.scrim == "string" ? e.scrim : null), {
      globalTop: v,
      localTop: g,
      stackStyles: k
    } = AW(u, () => e.zIndex, e._disableGlobalStack), {
      activatorEl: A,
      activatorRef: C,
      target: D,
      targetEl: P,
      targetRef: O,
      activatorEvents: I,
      contentEvents: x,
      scrimEvents: M
    } = SW(e, {
      isActive: u,
      isTop: g,
      contentEl: s
    }), {
      teleportTarget: V
    } = xW(() => {
      const z = e.attach || e.contained;
      if (z) return z;
      const ge = A?.value?.getRootNode() || i.proxy?.$el?.getRootNode();
      return ge instanceof ShadowRoot ? ge : !1;
    }), {
      dimensionStyles: B
    } = Ia(e), F = EP(), {
      scopeId: H
    } = wc();
    tt(() => e.disabled, (z) => {
      z && (u.value = !1);
    });
    const {
      contentStyles: K,
      updateLocation: Z
    } = fW(e, {
      isRtl: y,
      contentEl: s,
      target: D,
      isActive: u
    });
    gW(e, {
      root: o,
      contentEl: s,
      targetEl: P,
      target: D,
      isActive: u,
      updateLocation: Z
    });
    function ue(z) {
      r("click:outside", z), e.persistent ? he() : u.value = !1;
    }
    function Y(z) {
      return u.value && v.value && // If using scrim, only close if clicking on it rather than anything opened on top
      (!e.scrim || z.target === l.value || z instanceof MouseEvent && z.shadowTarget === l.value);
    }
    _n && tt(u, (z) => {
      z ? window.addEventListener("keydown", U) : window.removeEventListener("keydown", U);
    }, {
      immediate: !0
    }), Ja(() => {
      _n && window.removeEventListener("keydown", U);
    });
    function U(z) {
      z.key === "Escape" && v.value && (s.value?.contains(document.activeElement) || r("keydown", z), e.persistent ? he() : (u.value = !1, s.value?.contains(document.activeElement) && A.value?.focus()));
    }
    function q(z) {
      z.key === "Escape" && !v.value || r("keydown", z);
    }
    const oe = NE();
    Ar(() => e.closeOnBack, () => {
      uz(oe, (z) => {
        v.value && u.value ? (z(!1), e.persistent ? he() : u.value = !1) : z();
      });
    });
    const ee = be();
    tt(() => u.value && (e.absolute || e.contained) && V.value == null, (z) => {
      if (z) {
        const ge = Uw(o.value);
        ge && ge !== document.scrollingElement && (ee.value = ge.scrollTop);
      }
    });
    function he() {
      e.noClickAnimation || s.value && Fl(s.value, [{
        transformOrigin: "center"
      }, {
        transform: "scale(1.03)"
      }, {
        transformOrigin: "center"
      }], {
        duration: 150,
        easing: wf
      });
    }
    function ve() {
      r("afterEnter");
    }
    function pe() {
      w(), r("afterLeave");
    }
    return Ye(() => T(Ge, null, [n.activator?.({
      isActive: u.value,
      targetRef: O,
      props: Fe({
        ref: C
      }, I.value, e.activatorProps)
    }), F.value && p.value && _(Fx, {
      disabled: !V.value,
      to: V.value
    }, {
      default: () => [T("div", Fe({
        class: ["v-overlay", {
          "v-overlay--absolute": e.absolute || e.contained,
          "v-overlay--active": u.value,
          "v-overlay--contained": e.contained
        }, f.value, h.value, e.class],
        style: [k.value, {
          "--v-overlay-opacity": e.opacity,
          top: ht(ee.value)
        }, e.style],
        ref: o,
        onKeydown: q
      }, H, a), [_(EW, Fe({
        color: b,
        modelValue: u.value && !!e.scrim,
        ref: l
      }, M.value), null), _(Cr, {
        appear: !0,
        persisted: !0,
        transition: e.transition,
        target: D.value,
        onAfterEnter: ve,
        onAfterLeave: pe
      }, {
        default: () => [sn(T("div", Fe({
          ref: s,
          class: ["v-overlay__content", e.contentClass],
          style: [B.value, K.value]
        }, x.value, e.contentProps), [n.default?.({
          isActive: u
        })]), [[_a, u.value], [Lb, {
          handler: ue,
          closeConditional: Y,
          include: () => [A.value]
        }]])]
      })])]
    })])), {
      activatorEl: A,
      scrimEl: l,
      target: D,
      animateClick: he,
      contentEl: s,
      globalTop: v,
      localTop: g,
      updateLocation: Z
    };
  }
}), DP = Be({
  // TODO
  // disableKeys: Boolean,
  id: String,
  submenu: Boolean,
  disableInitialFocus: Boolean,
  ...Tn(cm({
    closeDelay: 250,
    closeOnContentClick: !0,
    locationStrategy: "connected",
    location: void 0,
    openDelay: 300,
    scrim: !1,
    scrollStrategy: "reposition",
    transition: {
      component: Cv
    }
  }), ["absolute"])
}, "VMenu"), Fu = We()({
  name: "VMenu",
  props: DP(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), {
      scopeId: r
    } = wc(), {
      isRtl: i
    } = Na(), o = qr(), l = ye(() => e.id || `v-menu-${o}`), s = be(), d = Gt(Mb, null), u = rt(/* @__PURE__ */ new Set());
    Ln(Mb, {
      register() {
        u.value.add(o);
      },
      unregister() {
        u.value.delete(o);
      },
      closeParents(b) {
        setTimeout(() => {
          !u.value.size && !e.persistent && (b == null || s.value?.contentEl && !R3(b, s.value.contentEl)) && (a.value = !1, d?.closeParents());
        }, 40);
      }
    }), Ja(() => {
      d?.unregister(), document.removeEventListener("focusin", f);
    }), ww(() => a.value = !1);
    async function f(b) {
      const v = b.relatedTarget, g = b.target;
      await Dt(), a.value && v !== g && s.value?.contentEl && // We're the topmost menu
      s.value?.globalTop && // It isn't the document or the menu body
      ![document, s.value.contentEl].includes(g) && // It isn't inside the menu body
      !s.value.contentEl.contains(g) && bf(s.value.contentEl)[0]?.focus();
    }
    tt(a, (b) => {
      b ? (d?.register(), _n && !e.disableInitialFocus && document.addEventListener("focusin", f, {
        once: !0
      })) : (d?.unregister(), _n && document.removeEventListener("focusin", f));
    }, {
      immediate: !0
    });
    function h(b) {
      d?.closeParents(b);
    }
    function y(b) {
      if (!e.disabled)
        if (b.key === "Tab" || b.key === "Enter" && !e.closeOnContentClick) {
          if (b.key === "Enter" && (b.target instanceof HTMLTextAreaElement || b.target instanceof HTMLInputElement && b.target.closest("form"))) return;
          b.key === "Enter" && b.preventDefault(), VT(bf(s.value?.contentEl, !1), b.shiftKey ? "prev" : "next", (g) => g.tabIndex >= 0) || (a.value = !1, s.value?.activatorEl?.focus());
        } else e.submenu && b.key === (i.value ? "ArrowRight" : "ArrowLeft") && (a.value = !1, s.value?.activatorEl?.focus());
    }
    function p(b) {
      if (e.disabled) return;
      const v = s.value?.contentEl;
      v && a.value ? b.key === "ArrowDown" ? (b.preventDefault(), b.stopImmediatePropagation(), zl(v, "next")) : b.key === "ArrowUp" ? (b.preventDefault(), b.stopImmediatePropagation(), zl(v, "prev")) : e.submenu && (b.key === (i.value ? "ArrowRight" : "ArrowLeft") ? a.value = !1 : b.key === (i.value ? "ArrowLeft" : "ArrowRight") && (b.preventDefault(), zl(v, "first"))) : (e.submenu ? b.key === (i.value ? "ArrowLeft" : "ArrowRight") : ["ArrowDown", "ArrowUp"].includes(b.key)) && (a.value = !0, b.preventDefault(), setTimeout(() => setTimeout(() => p(b))));
    }
    const w = W(() => Fe({
      "aria-haspopup": "menu",
      "aria-expanded": String(a.value),
      "aria-controls": l.value,
      onKeydown: p
    }, e.activatorProps));
    return Ye(() => {
      const b = xo.filterProps(e);
      return _(xo, Fe({
        ref: s,
        id: l.value,
        class: ["v-menu", e.class],
        style: e.style
      }, b, {
        modelValue: a.value,
        "onUpdate:modelValue": (v) => a.value = v,
        absolute: !0,
        activatorProps: w.value,
        location: e.location ?? (e.submenu ? "end" : "bottom"),
        "onClick:outside": h,
        onKeydown: y
      }, r), {
        activator: n.activator,
        default: function() {
          for (var v = arguments.length, g = new Array(v), k = 0; k < v; k++)
            g[k] = arguments[k];
          return _(Ht, {
            root: "VMenu"
          }, {
            default: () => [n.default?.(...g)]
          });
        }
      });
    }), Za({
      id: l,
      ΨopenChildren: u
    }, s);
  }
}), PW = Be({
  active: Boolean,
  disabled: Boolean,
  max: [Number, String],
  value: {
    type: [Number, String],
    default: 0
  },
  ...pt(),
  ...eo({
    transition: {
      component: B0
    }
  })
}, "VCounter"), Pv = We()({
  name: "VCounter",
  functional: !0,
  props: PW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = ye(() => e.max ? `${e.value} / ${e.max}` : String(e.value));
    return Ye(() => _(Cr, {
      transition: e.transition
    }, {
      default: () => [sn(T("div", {
        class: Ae(["v-counter", {
          "text-error": e.max && !e.disabled && parseFloat(e.value) > parseFloat(e.max)
        }, e.class]),
        style: Je(e.style)
      }, [n.default ? n.default({
        counter: a.value,
        max: e.max,
        value: e.value
      }) : a.value]), [[_a, e.active]])]
    })), {};
  }
}), OW = Be({
  floating: Boolean,
  ...pt()
}, "VFieldLabel"), Jd = We()({
  name: "VFieldLabel",
  props: OW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(nd, {
      class: Ae(["v-field-label", {
        "v-field-label--floating": e.floating
      }, e.class]),
      style: Je(e.style)
    }, n)), {};
  }
}), DW = ["underlined", "outlined", "filled", "solo", "solo-inverted", "solo-filled", "plain"], um = Be({
  appendInnerIcon: St,
  bgColor: String,
  clearable: Boolean,
  clearIcon: {
    type: St,
    default: "$clear"
  },
  active: Boolean,
  centerAffix: {
    type: Boolean,
    default: void 0
  },
  color: String,
  baseColor: String,
  details: Boolean,
  dirty: Boolean,
  disabled: {
    type: Boolean,
    default: null
  },
  glow: Boolean,
  error: Boolean,
  flat: Boolean,
  iconColor: [Boolean, String],
  label: String,
  persistentClear: Boolean,
  prependInnerIcon: St,
  reverse: Boolean,
  singleLine: Boolean,
  variant: {
    type: String,
    default: "filled",
    validator: (e) => DW.includes(e)
  },
  "onClick:clear": rr(),
  "onClick:appendInner": rr(),
  "onClick:prependInner": rr(),
  ...pt(),
  ...Tv(),
  ...qn(),
  ...rn()
}, "VField"), Js = We()({
  name: "VField",
  inheritAttrs: !1,
  props: {
    id: String,
    ...sm(),
    ...um()
  },
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      themeClasses: i
    } = gn(e), {
      loaderClasses: o
    } = am(e), {
      focusClasses: l,
      isFocused: s,
      focus: d,
      blur: u
    } = ms(e), {
      InputIcon: f
    } = JE(e), {
      roundedClasses: h
    } = ra(e), {
      rtlClasses: y
    } = Na(), p = ye(() => e.dirty || e.active), w = ye(() => !!(e.label || r.label)), b = ye(() => !e.singleLine && w.value), v = qr(), g = W(() => e.id || `input-${v}`), k = ye(() => e.details ? `${g.value}-messages` : void 0), A = be(), C = be(), D = be(), P = W(() => ["plain", "underlined"].includes(e.variant)), O = W(() => e.error || e.disabled ? void 0 : p.value && s.value ? e.color : e.baseColor), I = W(() => {
      if (!(!e.iconColor || e.glow && !s.value))
        return e.iconColor === !0 ? O.value : e.iconColor;
    }), {
      backgroundColorClasses: x,
      backgroundColorStyles: M
    } = bn(() => e.bgColor), {
      textColorClasses: V,
      textColorStyles: B
    } = sr(O);
    tt(p, (K) => {
      if (b.value) {
        const Z = A.value.$el, ue = C.value.$el;
        requestAnimationFrame(() => {
          const Y = Lw(Z), U = ue.getBoundingClientRect(), q = U.x - Y.x, oe = U.y - Y.y - (Y.height / 2 - U.height / 2), ee = U.width / 0.75, he = Math.abs(ee - Y.width) > 1 ? {
            maxWidth: ht(ee)
          } : void 0, ve = getComputedStyle(Z), pe = getComputedStyle(ue), z = parseFloat(ve.transitionDuration) * 1e3 || 150, ge = parseFloat(pe.getPropertyValue("--v-field-label-scale")), Ve = pe.getPropertyValue("color");
          Z.style.visibility = "visible", ue.style.visibility = "hidden", Fl(Z, {
            transform: `translate(${q}px, ${oe}px) scale(${ge})`,
            color: Ve,
            ...he
          }, {
            duration: z,
            easing: wf,
            direction: K ? "normal" : "reverse"
          }).finished.then(() => {
            Z.style.removeProperty("visibility"), ue.style.removeProperty("visibility");
          });
        });
      }
    }, {
      flush: "post"
    });
    const F = W(() => ({
      isActive: p,
      isFocused: s,
      controlRef: D,
      blur: u,
      focus: d
    }));
    function H(K) {
      K.target !== document.activeElement && K.preventDefault();
    }
    return Ye(() => {
      const K = e.variant === "outlined", Z = !!(r["prepend-inner"] || e.prependInnerIcon), ue = !!(e.clearable || r.clear) && !e.disabled, Y = !!(r["append-inner"] || e.appendInnerIcon || ue), U = () => r.label ? r.label({
        ...F.value,
        label: e.label,
        props: {
          for: g.value
        }
      }) : e.label;
      return T("div", Fe({
        class: ["v-field", {
          "v-field--active": p.value,
          "v-field--appended": Y,
          "v-field--center-affix": e.centerAffix ?? !P.value,
          "v-field--disabled": e.disabled,
          "v-field--dirty": e.dirty,
          "v-field--error": e.error,
          "v-field--glow": e.glow,
          "v-field--flat": e.flat,
          "v-field--has-background": !!e.bgColor,
          "v-field--persistent-clear": e.persistentClear,
          "v-field--prepended": Z,
          "v-field--reverse": e.reverse,
          "v-field--single-line": e.singleLine,
          "v-field--no-label": !U(),
          [`v-field--variant-${e.variant}`]: !0
        }, i.value, x.value, l.value, o.value, h.value, y.value, e.class],
        style: [M.value, e.style],
        onClick: H
      }, n), [T("div", {
        class: "v-field__overlay"
      }, null), _(rm, {
        name: "v-field",
        active: !!e.loading,
        color: e.error ? "error" : typeof e.loading == "string" ? e.loading : e.color
      }, {
        default: r.loader
      }), Z && T("div", {
        key: "prepend",
        class: "v-field__prepend-inner"
      }, [e.prependInnerIcon && _(f, {
        key: "prepend-icon",
        name: "prependInner",
        color: I.value
      }, null), r["prepend-inner"]?.(F.value)]), T("div", {
        class: "v-field__field",
        "data-no-activator": ""
      }, [["filled", "solo", "solo-inverted", "solo-filled"].includes(e.variant) && b.value && _(Jd, {
        key: "floating-label",
        ref: C,
        class: Ae([V.value]),
        floating: !0,
        for: g.value,
        "aria-hidden": !p.value,
        style: Je(B.value)
      }, {
        default: () => [U()]
      }), w.value && _(Jd, {
        key: "label",
        ref: A,
        for: g.value
      }, {
        default: () => [U()]
      }), r.default?.({
        ...F.value,
        props: {
          id: g.value,
          class: "v-field__input",
          "aria-describedby": k.value
        },
        focus: d,
        blur: u
      }) ?? T("div", {
        id: g.value,
        class: "v-field__input",
        "aria-describedby": k.value
      }, null)]), ue && _(V0, {
        key: "clear"
      }, {
        default: () => [sn(T("div", {
          class: "v-field__clearable",
          onMousedown: (q) => {
            q.preventDefault(), q.stopPropagation();
          }
        }, [_(Ht, {
          defaults: {
            VIcon: {
              icon: e.clearIcon
            }
          }
        }, {
          default: () => [r.clear ? r.clear({
            ...F.value,
            props: {
              onFocus: d,
              onBlur: u,
              onClick: e["onClick:clear"],
              tabindex: -1
            }
          }) : _(f, {
            name: "clear",
            onFocus: d,
            onBlur: u,
            tabindex: -1
          }, null)]
        })]), [[_a, e.dirty]])]
      }), Y && T("div", {
        key: "append",
        class: "v-field__append-inner"
      }, [r["append-inner"]?.(F.value), e.appendInnerIcon && _(f, {
        key: "append-icon",
        name: "appendInner",
        color: I.value
      }, null)]), T("div", {
        class: Ae(["v-field__outline", V.value]),
        style: Je(B.value)
      }, [K && T(Ge, null, [T("div", {
        class: "v-field__outline__start"
      }, null), b.value && T("div", {
        class: "v-field__outline__notch"
      }, [_(Jd, {
        ref: C,
        floating: !0,
        for: g.value,
        "aria-hidden": !p.value
      }, {
        default: () => [U()]
      })]), T("div", {
        class: "v-field__outline__end"
      }, null)]), P.value && b.value && _(Jd, {
        ref: C,
        floating: !0,
        for: g.value,
        "aria-hidden": !p.value
      }, {
        default: () => [U()]
      })])]);
    }), {
      controlRef: D,
      fieldIconColor: I
    };
  }
});
function BP(e) {
  function t(n, a) {
    !e.autofocus || !n || a[0].target?.focus?.();
  }
  return {
    onIntersect: t
  };
}
const BW = ["color", "file", "time", "date", "datetime-local", "week", "month"], dm = Be({
  autofocus: Boolean,
  counter: [Boolean, Number, String],
  counterValue: [Number, Function],
  prefix: String,
  placeholder: String,
  persistentPlaceholder: Boolean,
  persistentCounter: Boolean,
  suffix: String,
  role: String,
  type: {
    type: String,
    default: "text"
  },
  modelModifiers: Object,
  ...hs(),
  ...um()
}, "VTextField"), ss = We()({
  name: "VTextField",
  directives: {
    vIntersect: is
  },
  inheritAttrs: !1,
  props: dm(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const i = wt(e, "modelValue"), {
      isFocused: o,
      focus: l,
      blur: s
    } = ms(e), {
      onIntersect: d
    } = BP(e), u = W(() => typeof e.counterValue == "function" ? e.counterValue(i.value) : typeof e.counterValue == "number" ? e.counterValue : (i.value ?? "").toString().length), f = W(() => {
      if (n.maxlength) return n.maxlength;
      if (!(!e.counter || typeof e.counter != "number" && typeof e.counter != "string"))
        return e.counter;
    }), h = W(() => ["plain", "underlined"].includes(e.variant)), y = be(), p = be(), w = be(), b = W(() => BW.includes(e.type) || e.persistentPlaceholder || o.value || e.active);
    function v() {
      o.value || l(), Dt(() => {
        w.value !== document.activeElement && w.value?.focus();
      });
    }
    function g(D) {
      a("mousedown:control", D), D.target !== w.value && (v(), D.preventDefault());
    }
    function k(D) {
      a("click:control", D);
    }
    function A(D, P) {
      D.stopPropagation(), v(), Dt(() => {
        i.value = null, P(), dv(e["onClick:clear"], D);
      });
    }
    function C(D) {
      const P = D.target;
      if (i.value = P.value, e.modelModifiers?.trim && ["text", "search", "password", "tel", "url"].includes(e.type)) {
        const O = [P.selectionStart, P.selectionEnd];
        Dt(() => {
          P.selectionStart = O[0], P.selectionEnd = O[1];
        });
      }
    }
    return Ye(() => {
      const D = !!(r.counter || e.counter !== !1 && e.counter != null), P = !!(D || r.details), [O, I] = nl(n), {
        modelValue: x,
        ...M
      } = hr.filterProps(e), V = Js.filterProps(e);
      return _(hr, Fe({
        ref: y,
        modelValue: i.value,
        "onUpdate:modelValue": (B) => i.value = B,
        class: ["v-text-field", {
          "v-text-field--prefixed": e.prefix,
          "v-text-field--suffixed": e.suffix,
          "v-input--plain-underlined": h.value
        }, e.class],
        style: e.style
      }, O, M, {
        centerAffix: !h.value,
        focused: o.value
      }), {
        ...r,
        default: (B) => {
          let {
            id: F,
            isDisabled: H,
            isDirty: K,
            isReadonly: Z,
            isValid: ue,
            hasDetails: Y,
            reset: U
          } = B;
          return _(Js, Fe({
            ref: p,
            onMousedown: g,
            onClick: k,
            "onClick:clear": (q) => A(q, U),
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"],
            role: e.role
          }, V, {
            id: F.value,
            active: b.value || K.value,
            dirty: K.value || e.dirty,
            disabled: H.value,
            focused: o.value,
            details: Y.value,
            error: ue.value === !1
          }), {
            ...r,
            default: (q) => {
              let {
                props: {
                  class: oe,
                  ...ee
                }
              } = q;
              const he = sn(T("input", Fe({
                ref: w,
                value: i.value,
                onInput: C,
                autofocus: e.autofocus,
                readonly: Z.value,
                disabled: H.value,
                name: e.name,
                placeholder: e.placeholder,
                size: 1,
                role: e.role,
                type: e.type,
                onFocus: l,
                onBlur: s
              }, ee, I), null), [[is, {
                handler: d
              }, null, {
                once: !0
              }]]);
              return T(Ge, null, [e.prefix && T("span", {
                class: "v-text-field__prefix"
              }, [T("span", {
                class: "v-text-field__prefix__text"
              }, [e.prefix])]), r.default ? T("div", {
                class: Ae(oe),
                "data-no-activator": ""
              }, [r.default(), he]) : as(he, {
                class: oe
              }), e.suffix && T("span", {
                class: "v-text-field__suffix"
              }, [T("span", {
                class: "v-text-field__suffix__text"
              }, [e.suffix])])]);
            }
          });
        },
        details: P ? (B) => T(Ge, null, [r.details?.(B), D && T(Ge, null, [T("span", null, null), _(Pv, {
          active: e.persistentCounter || o.value,
          value: u.value,
          max: f.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), Za({}, y, p, w);
  }
}), VW = Be({
  renderless: Boolean,
  ...pt()
}, "VVirtualScrollItem"), VP = We()({
  name: "VVirtualScrollItem",
  inheritAttrs: !1,
  props: VW(),
  emits: {
    "update:height": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      resizeRef: i,
      contentRect: o
    } = Gi(void 0, "border");
    tt(() => o.value?.height, (l) => {
      l != null && a("update:height", l);
    }), Ye(() => e.renderless ? T(Ge, null, [r.default?.({
      itemRef: i
    })]) : T("div", Fe({
      ref: i,
      class: ["v-virtual-scroll__item", e.class],
      style: e.style
    }, n), [r.default?.()]));
  }
}), MW = -1, LW = 1, by = 100, MP = Be({
  itemHeight: {
    type: [Number, String],
    default: null
  },
  itemKey: {
    type: [String, Array, Function],
    default: null
  },
  height: [Number, String]
}, "virtual");
function LP(e, t) {
  const n = pi(), a = rt(0);
  na(() => {
    a.value = parseFloat(e.itemHeight || 0);
  });
  const r = rt(0), i = rt(Math.ceil(
    // Assume 16px items filling the entire screen height if
    // not provided. This is probably incorrect but it minimises
    // the chance of ending up with empty space at the bottom.
    // The default value is set here to avoid poisoning getSize()
    (parseInt(e.height) || n.height.value) / (a.value || 16)
  ) || 1), o = rt(0), l = rt(0), s = be(), d = be();
  let u = 0;
  const {
    resizeRef: f,
    contentRect: h
  } = Gi();
  na(() => {
    f.value = s.value;
  });
  const y = W(() => s.value === document.documentElement ? n.height.value : h.value?.height || parseInt(e.height) || 0), p = W(() => !!(s.value && d.value && y.value && a.value));
  let w = Array.from({
    length: t.value.length
  }), b = Array.from({
    length: t.value.length
  });
  const v = rt(0);
  let g = -1;
  function k(U) {
    return w[U] || a.value;
  }
  const A = PT(() => {
    const U = performance.now();
    b[0] = 0;
    const q = t.value.length;
    for (let oe = 1; oe <= q - 1; oe++)
      b[oe] = (b[oe - 1] || 0) + k(oe - 1);
    v.value = Math.max(v.value, performance.now() - U);
  }, v), C = tt(p, (U) => {
    U && (C(), u = d.value.offsetTop, A.immediate(), K(), ~g && Dt(() => {
      _n && window.requestAnimationFrame(() => {
        ue(g), g = -1;
      });
    }));
  });
  Fa(() => {
    A.clear();
  });
  function D(U, q) {
    const oe = w[U], ee = a.value;
    a.value = ee ? Math.min(a.value, q) : q, (oe !== q || ee !== a.value) && (w[U] = q, A());
  }
  function P(U) {
    U = Dn(U, 0, t.value.length - 1);
    const q = Math.floor(U), oe = U % 1, ee = q + 1, he = b[q] || 0, ve = b[ee] || he;
    return he + (ve - he) * oe;
  }
  function O(U) {
    return RW(b, U);
  }
  let I = 0, x = 0, M = 0;
  tt(y, (U, q) => {
    q && (K(), U < q && requestAnimationFrame(() => {
      x = 0, K();
    }));
  });
  let V = -1;
  function B() {
    if (!s.value || !d.value) return;
    const U = s.value.scrollTop, q = performance.now();
    q - M > 500 ? (x = Math.sign(U - I), u = d.value.offsetTop) : x = U - I, I = U, M = q, window.clearTimeout(V), V = window.setTimeout(F, 500), K();
  }
  function F() {
    !s.value || !d.value || (x = 0, M = 0, window.clearTimeout(V), K());
  }
  let H = -1;
  function K() {
    cancelAnimationFrame(H), H = requestAnimationFrame(Z);
  }
  function Z() {
    if (!s.value || !y.value || !a.value) return;
    const U = I - u, q = Math.sign(x), oe = Math.max(0, U - by), ee = Dn(O(oe), 0, t.value.length), he = U + y.value + by, ve = Dn(O(he) + 1, ee + 1, t.value.length);
    if (
      // Only update the side we're scrolling towards,
      // the other side will be updated incidentally
      (q !== MW || ee < r.value) && (q !== LW || ve > i.value)
    ) {
      const pe = P(r.value) - P(ee), z = P(ve) - P(i.value);
      Math.max(pe, z) > by ? (r.value = ee, i.value = ve) : (ee <= 0 && (r.value = ee), ve >= t.value.length && (i.value = ve));
    }
    o.value = P(r.value), l.value = P(t.value.length) - P(i.value);
  }
  function ue(U) {
    const q = P(U);
    !s.value || U && !q ? g = U : s.value.scrollTop = q;
  }
  const Y = W(() => t.value.slice(r.value, i.value).map((U, q) => {
    const oe = q + r.value;
    return {
      raw: U,
      index: oe,
      key: Ca(U, e.itemKey, oe)
    };
  }));
  return tt(t, () => {
    w = Array.from({
      length: t.value.length
    }), b = Array.from({
      length: t.value.length
    }), A.immediate(), K();
  }, {
    deep: 1
  }), {
    calculateVisibleItems: K,
    containerRef: s,
    markerRef: d,
    computedItems: Y,
    paddingTop: o,
    paddingBottom: l,
    scrollToIndex: ue,
    handleScroll: B,
    handleScrollend: F,
    handleItemResize: D
  };
}
function RW(e, t) {
  let n = e.length - 1, a = 0, r = 0, i = null, o = -1;
  if (e[n] < t)
    return n;
  for (; a <= n; )
    if (r = a + n >> 1, i = e[r], i > t)
      n = r - 1;
    else if (i < t)
      o = r, a = r + 1;
    else return i === t ? r : a;
  return o;
}
const FW = Be({
  items: {
    type: Array,
    default: () => []
  },
  renderless: Boolean,
  ...MP(),
  ...pt(),
  ...Ta()
}, "VVirtualScroll"), Ov = We()({
  name: "VVirtualScroll",
  props: FW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = ya("VVirtualScroll"), {
      dimensionStyles: r
    } = Ia(e), {
      calculateVisibleItems: i,
      containerRef: o,
      markerRef: l,
      handleScroll: s,
      handleScrollend: d,
      handleItemResize: u,
      scrollToIndex: f,
      paddingTop: h,
      paddingBottom: y,
      computedItems: p
    } = LP(e, ye(() => e.items));
    return Ar(() => e.renderless, () => {
      function w() {
        const v = (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !1) ? "addEventListener" : "removeEventListener";
        o.value === document.documentElement ? (document[v]("scroll", s, {
          passive: !0
        }), document[v]("scrollend", d)) : (o.value?.[v]("scroll", s, {
          passive: !0
        }), o.value?.[v]("scrollend", d));
      }
      an(() => {
        o.value = Uw(a.vnode.el, !0), w(!0);
      }), Fa(w);
    }), Ye(() => {
      const w = p.value.map((b) => _(VP, {
        key: b.key,
        renderless: e.renderless,
        "onUpdate:height": (v) => u(b.index, v)
      }, {
        default: (v) => n.default?.({
          item: b.raw,
          index: b.index,
          ...v
        })
      }));
      return e.renderless ? T(Ge, null, [T("div", {
        ref: l,
        class: "v-virtual-scroll__spacer",
        style: {
          paddingTop: ht(h.value)
        }
      }, null), w, T("div", {
        class: "v-virtual-scroll__spacer",
        style: {
          paddingBottom: ht(y.value)
        }
      }, null)]) : T("div", {
        ref: o,
        class: Ae(["v-virtual-scroll", e.class]),
        onScrollPassive: s,
        onScrollend: d,
        style: Je([r.value, e.style])
      }, [T("div", {
        ref: l,
        class: "v-virtual-scroll__container",
        style: {
          paddingTop: ht(h.value),
          paddingBottom: ht(y.value)
        }
      }, [w])]);
    }), {
      calculateVisibleItems: i,
      scrollToIndex: f
    };
  }
});
function j0(e, t) {
  const n = rt(!1);
  let a;
  function r(l) {
    cancelAnimationFrame(a), n.value = !0, a = requestAnimationFrame(() => {
      a = requestAnimationFrame(() => {
        n.value = !1;
      });
    });
  }
  async function i() {
    await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => requestAnimationFrame(l)), await new Promise((l) => {
      if (n.value) {
        const s = tt(n, () => {
          s(), l();
        });
      } else l();
    });
  }
  async function o(l) {
    if (l.key === "Tab" && t.value?.focus(), !["PageDown", "PageUp", "Home", "End"].includes(l.key)) return;
    const s = e.value?.$el;
    if (!s) return;
    (l.key === "Home" || l.key === "End") && s.scrollTo({
      top: l.key === "Home" ? 0 : s.scrollHeight,
      behavior: "smooth"
    }), await i();
    const d = s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");
    if (l.key === "PageDown" || l.key === "Home") {
      const u = s.getBoundingClientRect().top;
      for (const f of d)
        if (f.getBoundingClientRect().top >= u) {
          f.focus();
          break;
        }
    } else {
      const u = s.getBoundingClientRect().bottom;
      for (const f of [...d].reverse())
        if (f.getBoundingClientRect().bottom <= u) {
          f.focus();
          break;
        }
    }
  }
  return {
    onScrollPassive: r,
    onKeydown: o
  };
}
const Y0 = Be({
  chips: Boolean,
  closableChips: Boolean,
  closeText: {
    type: String,
    default: "$vuetify.close"
  },
  openText: {
    type: String,
    default: "$vuetify.open"
  },
  eager: Boolean,
  hideNoData: Boolean,
  hideSelected: Boolean,
  listProps: {
    type: Object
  },
  menu: Boolean,
  menuIcon: {
    type: St,
    default: "$dropdown"
  },
  menuProps: {
    type: Object
  },
  multiple: Boolean,
  noDataText: {
    type: String,
    default: "$vuetify.noDataText"
  },
  openOnClear: Boolean,
  itemColor: String,
  noAutoScroll: Boolean,
  ...yP({
    itemChildren: !1
  })
}, "Select"), NW = Be({
  ...Y0(),
  ...Tn(dm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...eo({
    transition: {
      component: Cv
    }
  })
}, "VSelect"), G0 = We()({
  name: "VSelect",
  props: NW(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = kn(), r = be(), i = be(), o = be(), {
      items: l,
      transformIn: s,
      transformOut: d
    } = $0(e), u = wt(e, "modelValue", [], (U) => s(U === null ? [null] : ta(U)), (U) => {
      const q = d(U);
      return e.multiple ? q : q[0] ?? null;
    }), f = W(() => typeof e.counterValue == "function" ? e.counterValue(u.value) : typeof e.counterValue == "number" ? e.counterValue : u.value.length), h = lm(e), y = W(() => u.value.map((U) => U.value)), p = rt(!1);
    let w = "", b = -1, v;
    const g = W(() => e.hideSelected ? l.value.filter((U) => !u.value.some((q) => (e.valueComparator || Ga)(q, U))) : l.value), k = W(() => e.hideNoData && !g.value.length || h.isReadonly.value || h.isDisabled.value), A = wt(e, "menu"), C = W({
      get: () => A.value,
      set: (U) => {
        A.value && !U && i.value?.ΨopenChildren.size || U && k.value || (A.value = U);
      }
    }), D = ye(() => C.value ? e.closeText : e.openText), P = W(() => ({
      ...e.menuProps,
      activatorProps: {
        ...e.menuProps?.activatorProps || {},
        "aria-haspopup": "listbox"
        // Set aria-haspopup to 'listbox'
      }
    })), O = be(), I = j0(O, r);
    function x(U) {
      e.openOnClear && (C.value = !0);
    }
    function M() {
      k.value || (C.value = !C.value);
    }
    function V(U) {
      xu(U) && B(U);
    }
    function B(U) {
      if (!U.key || h.isReadonly.value) return;
      ["Enter", " ", "ArrowDown", "ArrowUp", "Home", "End"].includes(U.key) && U.preventDefault(), ["Enter", "ArrowDown", " "].includes(U.key) && (C.value = !0), ["Escape", "Tab"].includes(U.key) && (C.value = !1), U.key === "Home" ? O.value?.focus("first") : U.key === "End" && O.value?.focus("last");
      const q = 1e3;
      if (!xu(U)) return;
      const oe = performance.now();
      oe - v > q && (w = "", b = -1), w += U.key.toLowerCase(), v = oe;
      const ee = g.value;
      function he() {
        let Ve = ve();
        return Ve || w.at(-1) === w.at(-2) && (w = w.slice(0, -1), Ve = ve(), Ve) || (b = -1, Ve = ve(), Ve) ? Ve : (w = U.key.toLowerCase(), ve());
      }
      function ve() {
        for (let Ve = b + 1; Ve < ee.length; Ve++) {
          const Ne = ee[Ve];
          if (Ne.title.toLowerCase().startsWith(w))
            return [Ne, Ve];
        }
      }
      const pe = he();
      if (!pe) return;
      const [z, ge] = pe;
      b = ge, O.value?.focus(ge), e.multiple || (u.value = [z]);
    }
    function F(U) {
      let q = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!U.props.disabled)
        if (e.multiple) {
          const oe = u.value.findIndex((he) => (e.valueComparator || Ga)(he.value, U.value)), ee = q ?? !~oe;
          if (~oe) {
            const he = ee ? [...u.value, U] : [...u.value];
            he.splice(oe, 1), u.value = he;
          } else ee && (u.value = [...u.value, U]);
        } else {
          const oe = q !== !1;
          u.value = oe ? [U] : [], Dt(() => {
            C.value = !1;
          });
        }
    }
    function H(U) {
      O.value?.$el.contains(U.relatedTarget) || (C.value = !1);
    }
    function K() {
      e.eager && o.value?.calculateVisibleItems();
    }
    function Z() {
      p.value && r.value?.focus();
    }
    function ue(U) {
      p.value = !0;
    }
    function Y(U) {
      if (U == null) u.value = [];
      else if (Au(r.value, ":autofill") || Au(r.value, ":-webkit-autofill")) {
        const q = l.value.find((oe) => oe.title === U);
        q && F(q);
      } else r.value && (r.value.value = "");
    }
    return tt(C, () => {
      if (!e.hideSelected && C.value && u.value.length) {
        const U = g.value.findIndex((q) => u.value.some((oe) => (e.valueComparator || Ga)(oe.value, q.value)));
        _n && !e.noAutoScroll && window.requestAnimationFrame(() => {
          U >= 0 && o.value?.scrollToIndex(U);
        });
      }
    }), tt(() => e.items, (U, q) => {
      C.value || p.value && e.hideNoData && !q.length && U.length && (C.value = !0);
    }), Ye(() => {
      const U = !!(e.chips || n.chip), q = !!(!e.hideNoData || g.value.length || n["prepend-item"] || n["append-item"] || n["no-data"]), oe = u.value.length > 0, ee = ss.filterProps(e), he = oe || !p.value && e.label && !e.persistentPlaceholder ? void 0 : e.placeholder;
      return _(ss, Fe({
        ref: r
      }, ee, {
        modelValue: u.value.map((ve) => ve.props.title).join(", "),
        "onUpdate:modelValue": Y,
        focused: p.value,
        "onUpdate:focused": (ve) => p.value = ve,
        validationValue: u.externalValue,
        counterValue: f.value,
        dirty: oe,
        class: ["v-select", {
          "v-select--active-menu": C.value,
          "v-select--chips": !!e.chips,
          [`v-select--${e.multiple ? "multiple" : "single"}`]: !0,
          "v-select--selected": u.value.length,
          "v-select--selection-slot": !!n.selection
        }, e.class],
        style: e.style,
        inputmode: "none",
        placeholder: he,
        "onClick:clear": x,
        "onMousedown:control": M,
        onBlur: H,
        onKeydown: B,
        "aria-label": a(D.value),
        title: a(D.value)
      }), {
        ...n,
        default: () => T(Ge, null, [_(Fu, Fe({
          ref: i,
          modelValue: C.value,
          "onUpdate:modelValue": (ve) => C.value = ve,
          activator: "parent",
          contentClass: "v-select__content",
          disabled: k.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: K,
          onAfterLeave: Z
        }, P.value), {
          default: () => [q && _(Ru, Fe({
            ref: O,
            selected: y.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (ve) => ve.preventDefault(),
            onKeydown: V,
            onFocusin: ue,
            tabindex: "-1",
            "aria-live": "polite",
            "aria-label": `${e.label}-list`,
            color: e.itemColor ?? e.color
          }, I, e.listProps), {
            default: () => [n["prepend-item"]?.(), !g.value.length && !e.hideNoData && (n["no-data"]?.() ?? _(Xi, {
              key: "no-data",
              title: a(e.noDataText)
            }, null)), _(Ov, {
              ref: o,
              renderless: !0,
              items: g.value,
              itemKey: "value"
            }, {
              default: (ve) => {
                let {
                  item: pe,
                  index: z,
                  itemRef: ge
                } = ve;
                const Ve = N3(pe.props), Ne = Fe(pe.props, {
                  ref: ge,
                  key: pe.value,
                  onClick: () => F(pe, null)
                });
                return pe.type === "divider" ? n.divider?.({
                  props: pe.raw,
                  index: z
                }) ?? _(fi, Fe(pe.props, {
                  key: `divider-${z}`
                }), null) : pe.type === "subheader" ? n.subheader?.({
                  props: pe.raw,
                  index: z
                }) ?? _(rd, Fe(pe.props, {
                  key: `subheader-${z}`
                }), null) : n.item?.({
                  item: pe,
                  index: z,
                  props: Ne
                }) ?? _(Xi, Fe(Ne, {
                  role: "option"
                }), {
                  prepend: (ce) => {
                    let {
                      isSelected: ne
                    } = ce;
                    return T(Ge, null, [e.multiple && !e.hideSelected ? _(Ao, {
                      key: pe.value,
                      modelValue: ne,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, Ve.prependAvatar && _(Oi, {
                      image: Ve.prependAvatar
                    }, null), Ve.prependIcon && _(pn, {
                      icon: Ve.prependIcon
                    }, null)]);
                  }
                });
              }
            }), n["append-item"]?.()]
          })]
        }), u.value.map((ve, pe) => {
          function z(ce) {
            ce.stopPropagation(), ce.preventDefault(), F(ve, !1);
          }
          const ge = {
            "onClick:close": z,
            onKeydown(ce) {
              ce.key !== "Enter" && ce.key !== " " || (ce.preventDefault(), ce.stopPropagation(), z(ce));
            },
            onMousedown(ce) {
              ce.preventDefault(), ce.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, Ve = U ? !!n.chip : !!n.selection, Ne = Ve ? fv(U ? n.chip({
            item: ve,
            index: pe,
            props: ge
          }) : n.selection({
            item: ve,
            index: pe
          })) : void 0;
          if (!(Ve && !Ne))
            return T("div", {
              key: ve.value,
              class: "v-select__selection"
            }, [U ? n.chip ? _(Ht, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: ve.title
                }
              }
            }, {
              default: () => [Ne]
            }) : _(ad, Fe({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: ve.title,
              disabled: ve.props.disabled
            }, ge), null) : Ne ?? T("span", {
              class: "v-select__selection-text"
            }, [ve.title, e.multiple && pe < u.value.length - 1 && T("span", {
              class: "v-select__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var ve = arguments.length, pe = new Array(ve), z = 0; z < ve; z++)
            pe[z] = arguments[z];
          return T(Ge, null, [n["append-inner"]?.(...pe), e.menuIcon ? _(pn, {
            class: "v-select__menu-icon",
            color: r.value?.fieldIconColor,
            icon: e.menuIcon
          }, null) : void 0]);
        }
      });
    }), Za({
      isFocused: p,
      menu: C,
      select: F
    }, r);
  }
}), UW = (e, t, n) => {
  if (e == null || t == null) return -1;
  if (!t.length) return 0;
  e = e.toString().toLocaleLowerCase(), t = t.toString().toLocaleLowerCase();
  const a = [];
  let r = e.indexOf(t);
  for (; ~r; )
    a.push([r, r + t.length]), r = e.indexOf(t, r + t.length);
  return a.length ? a : -1;
};
function wy(e, t) {
  if (!(e == null || typeof e == "boolean" || e === -1))
    return typeof e == "number" ? [[e, e + t.length]] : Array.isArray(e[0]) ? e : [e];
}
const id = Be({
  customFilter: Function,
  customKeyFilter: Object,
  filterKeys: [Array, String],
  filterMode: {
    type: String,
    default: "intersection"
  },
  noFilter: Boolean
}, "filter");
function $W(e, t, n) {
  const a = [], r = n?.default ?? UW, i = n?.filterKeys ? ta(n.filterKeys) : !1, o = Object.keys(n?.customKeyFilter ?? {}).length;
  if (!e?.length) return a;
  e: for (let l = 0; l < e.length; l++) {
    const [s, d = s] = ta(e[l]), u = {}, f = {};
    let h = -1;
    if ((t || o > 0) && !n?.noFilter) {
      if (typeof s == "object") {
        if (s.type === "divider" || s.type === "subheader")
          continue;
        const w = i || Object.keys(d);
        for (const b of w) {
          const v = Ca(d, b), g = n?.customKeyFilter?.[b];
          if (h = g ? g(v, t, s) : r(v, t, s), h !== -1 && h !== !1)
            g ? u[b] = wy(h, t) : f[b] = wy(h, t);
          else if (n?.filterMode === "every")
            continue e;
        }
      } else
        h = r(s, t, s), h !== -1 && h !== !1 && (f.title = wy(h, t));
      const y = Object.keys(f).length, p = Object.keys(u).length;
      if (!y && !p || n?.filterMode === "union" && p !== o && !y || n?.filterMode === "intersection" && (p !== o || !y)) continue;
    }
    a.push({
      index: l,
      matches: {
        ...f,
        ...u
      }
    });
  }
  return a;
}
function od(e, t, n, a) {
  const r = rt([]), i = rt(/* @__PURE__ */ new Map()), o = W(() => a?.transform ? fe(t).map((s) => [s, a.transform(s)]) : fe(t));
  na(() => {
    const s = typeof n == "function" ? n() : fe(n), d = typeof s != "string" && typeof s != "number" ? "" : String(s), u = $W(o.value, d, {
      customKeyFilter: {
        ...e.customKeyFilter,
        ...fe(a?.customKeyFilter)
      },
      default: e.customFilter,
      filterKeys: e.filterKeys,
      filterMode: e.filterMode,
      noFilter: e.noFilter
    }), f = fe(t), h = [], y = /* @__PURE__ */ new Map();
    u.forEach((p) => {
      let {
        index: w,
        matches: b
      } = p;
      const v = f[w];
      h.push(v), y.set(v.value, b);
    }), r.value = h, i.value = y;
  });
  function l(s) {
    return i.value.get(s.value);
  }
  return {
    filteredItems: r,
    filteredMatches: i,
    getMatches: l
  };
}
function RP(e, t, n) {
  return n == null || !n.length ? t : n.map((a, r) => {
    const i = r === 0 ? 0 : n[r - 1][1], o = [T("span", {
      class: Ae(`${e}__unmask`)
    }, [t.slice(i, a[0])]), T("span", {
      class: Ae(`${e}__mask`)
    }, [t.slice(a[0], a[1])])];
    return r === n.length - 1 && o.push(T("span", {
      class: Ae(`${e}__unmask`)
    }, [t.slice(a[1])])), T(Ge, null, [o]);
  });
}
const qW = Be({
  autoSelectFirst: {
    type: [Boolean, String]
  },
  clearOnSelect: Boolean,
  search: String,
  ...id({
    filterKeys: ["title"]
  }),
  ...Y0(),
  ...Tn(dm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...eo({
    transition: !1
  })
}, "VAutocomplete"), HW = We()({
  name: "VAutocomplete",
  props: qW(),
  emits: {
    "update:focused": (e) => !0,
    "update:search": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = kn(), r = be(), i = rt(!1), o = rt(!0), l = rt(!1), s = be(), d = be(), u = rt(-1), {
      items: f,
      transformIn: h,
      transformOut: y
    } = $0(e), {
      textColorClasses: p,
      textColorStyles: w
    } = sr(() => r.value?.color), b = wt(e, "search", ""), v = wt(e, "modelValue", [], (Ne) => h(Ne === null ? [null] : ta(Ne)), (Ne) => {
      const ce = y(Ne);
      return e.multiple ? ce : ce[0] ?? null;
    }), g = W(() => typeof e.counterValue == "function" ? e.counterValue(v.value) : typeof e.counterValue == "number" ? e.counterValue : v.value.length), k = lm(e), {
      filteredItems: A,
      getMatches: C
    } = od(e, f, () => o.value ? "" : b.value), D = W(() => e.hideSelected ? A.value.filter((Ne) => !v.value.some((ce) => ce.value === Ne.value)) : A.value), P = W(() => !!(e.chips || n.chip)), O = W(() => P.value || !!n.selection), I = W(() => v.value.map((Ne) => Ne.props.value)), x = W(() => (e.autoSelectFirst === !0 || e.autoSelectFirst === "exact" && b.value === D.value[0]?.title) && D.value.length > 0 && !o.value && !l.value), M = W(() => e.hideNoData && !D.value.length || k.isReadonly.value || k.isDisabled.value), V = wt(e, "menu"), B = W({
      get: () => V.value,
      set: (Ne) => {
        V.value && !Ne && s.value?.ΨopenChildren.size || Ne && M.value || (V.value = Ne);
      }
    }), F = W(() => B.value ? e.closeText : e.openText), H = be(), K = j0(H, r);
    function Z(Ne) {
      e.openOnClear && (B.value = !0), b.value = "";
    }
    function ue() {
      M.value || (B.value = !0);
    }
    function Y(Ne) {
      M.value || (i.value && (Ne.preventDefault(), Ne.stopPropagation()), B.value = !B.value);
    }
    function U(Ne) {
      (xu(Ne) || Ne.key === "Backspace") && r.value?.focus();
    }
    function q(Ne) {
      if (k.isReadonly.value) return;
      const ce = r.value?.selectionStart, ne = v.value.length;
      if (["Enter", "ArrowDown", "ArrowUp"].includes(Ne.key) && Ne.preventDefault(), ["Enter", "ArrowDown"].includes(Ne.key) && (B.value = !0), ["Escape"].includes(Ne.key) && (B.value = !1), x.value && ["Enter", "Tab"].includes(Ne.key) && !v.value.some((Q) => {
        let {
          value: le
        } = Q;
        return le === D.value[0].value;
      }) && Ve(D.value[0]), Ne.key === "ArrowDown" && x.value && H.value?.focus("next"), ["Backspace", "Delete"].includes(Ne.key)) {
        if (!e.multiple && O.value && v.value.length > 0 && !b.value) return Ve(v.value[0], !1);
        if (~u.value) {
          Ne.preventDefault();
          const Q = u.value;
          Ve(v.value[u.value], !1), u.value = Q >= ne - 1 ? ne - 2 : Q;
        } else Ne.key === "Backspace" && !b.value && (u.value = ne - 1);
        return;
      }
      if (e.multiple)
        if (Ne.key === "ArrowLeft") {
          if (u.value < 0 && ce && ce > 0) return;
          const Q = u.value > -1 ? u.value - 1 : ne - 1;
          if (v.value[Q])
            u.value = Q;
          else {
            const le = b.value?.length ?? null;
            u.value = -1, r.value?.setSelectionRange(le, le);
          }
        } else if (Ne.key === "ArrowRight") {
          if (u.value < 0) return;
          const Q = u.value + 1;
          v.value[Q] ? u.value = Q : (u.value = -1, r.value?.setSelectionRange(0, 0));
        } else ~u.value && xu(Ne) && (u.value = -1);
    }
    function oe(Ne) {
      if (Au(r.value, ":autofill") || Au(r.value, ":-webkit-autofill")) {
        const ce = f.value.find((ne) => ne.title === Ne.target.value);
        ce && Ve(ce);
      }
    }
    function ee() {
      e.eager && d.value?.calculateVisibleItems();
    }
    function he() {
      i.value && (o.value = !0, r.value?.focus());
    }
    function ve(Ne) {
      i.value = !0, setTimeout(() => {
        l.value = !0;
      });
    }
    function pe(Ne) {
      l.value = !1;
    }
    function z(Ne) {
      (Ne == null || Ne === "" && !e.multiple && !O.value) && (v.value = []);
    }
    const ge = rt(!1);
    function Ve(Ne) {
      let ce = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!(!Ne || Ne.props.disabled))
        if (e.multiple) {
          const ne = v.value.findIndex((le) => (e.valueComparator || Ga)(le.value, Ne.value)), Q = ce ?? !~ne;
          if (~ne) {
            const le = Q ? [...v.value, Ne] : [...v.value];
            le.splice(ne, 1), v.value = le;
          } else Q && (v.value = [...v.value, Ne]);
          e.clearOnSelect && (b.value = "");
        } else {
          const ne = ce !== !1;
          v.value = ne ? [Ne] : [], b.value = ne && !O.value ? Ne.title : "", Dt(() => {
            B.value = !1, o.value = !0;
          });
        }
    }
    return tt(i, (Ne, ce) => {
      Ne !== ce && (Ne ? (ge.value = !0, b.value = e.multiple || O.value ? "" : String(v.value.at(-1)?.props.title ?? ""), o.value = !0, Dt(() => ge.value = !1)) : (!e.multiple && b.value == null && (v.value = []), B.value = !1, (e.multiple || O.value) && (b.value = ""), u.value = -1));
    }), tt(b, (Ne) => {
      !i.value || ge.value || (Ne && (B.value = !0), o.value = !Ne);
    }), tt(B, () => {
      if (!e.hideSelected && B.value && v.value.length) {
        const Ne = D.value.findIndex((ce) => v.value.some((ne) => ce.value === ne.value));
        _n && window.requestAnimationFrame(() => {
          Ne >= 0 && d.value?.scrollToIndex(Ne);
        });
      }
    }), tt(() => e.items, (Ne, ce) => {
      B.value || i.value && !ce.length && Ne.length && (B.value = !0);
    }), Ye(() => {
      const Ne = !!(!e.hideNoData || D.value.length || n["prepend-item"] || n["append-item"] || n["no-data"]), ce = v.value.length > 0, ne = ss.filterProps(e);
      return _(ss, Fe({
        ref: r
      }, ne, {
        modelValue: b.value,
        "onUpdate:modelValue": [(Q) => b.value = Q, z],
        focused: i.value,
        "onUpdate:focused": (Q) => i.value = Q,
        validationValue: v.externalValue,
        counterValue: g.value,
        dirty: ce,
        onChange: oe,
        class: ["v-autocomplete", `v-autocomplete--${e.multiple ? "multiple" : "single"}`, {
          "v-autocomplete--active-menu": B.value,
          "v-autocomplete--chips": !!e.chips,
          "v-autocomplete--selection-slot": !!O.value,
          "v-autocomplete--selecting-index": u.value > -1
        }, e.class],
        style: e.style,
        readonly: k.isReadonly.value,
        placeholder: ce ? void 0 : e.placeholder,
        "onClick:clear": Z,
        "onMousedown:control": ue,
        onKeydown: q
      }), {
        ...n,
        default: () => T(Ge, null, [_(Fu, Fe({
          ref: s,
          modelValue: B.value,
          "onUpdate:modelValue": (Q) => B.value = Q,
          activator: "parent",
          contentClass: "v-autocomplete__content",
          disabled: M.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: ee,
          onAfterLeave: he
        }, e.menuProps), {
          default: () => [Ne && _(Ru, Fe({
            ref: H,
            filterable: !0,
            selected: I.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (Q) => Q.preventDefault(),
            onKeydown: U,
            onFocusin: ve,
            onFocusout: pe,
            tabindex: "-1",
            "aria-live": "polite",
            color: e.itemColor ?? e.color
          }, K, e.listProps), {
            default: () => [n["prepend-item"]?.(), !D.value.length && !e.hideNoData && (n["no-data"]?.() ?? _(Xi, {
              key: "no-data",
              title: a(e.noDataText)
            }, null)), _(Ov, {
              ref: d,
              renderless: !0,
              items: D.value,
              itemKey: "value"
            }, {
              default: (Q) => {
                let {
                  item: le,
                  index: G,
                  itemRef: Ce
                } = Q;
                const Ie = Fe(le.props, {
                  ref: Ce,
                  key: le.value,
                  active: x.value && G === 0 ? !0 : void 0,
                  onClick: () => Ve(le, null)
                });
                return le.type === "divider" ? n.divider?.({
                  props: le.raw,
                  index: G
                }) ?? _(fi, Fe(le.props, {
                  key: `divider-${G}`
                }), null) : le.type === "subheader" ? n.subheader?.({
                  props: le.raw,
                  index: G
                }) ?? _(rd, Fe(le.props, {
                  key: `subheader-${G}`
                }), null) : n.item?.({
                  item: le,
                  index: G,
                  props: Ie
                }) ?? _(Xi, Fe(Ie, {
                  role: "option"
                }), {
                  prepend: (ie) => {
                    let {
                      isSelected: we
                    } = ie;
                    return T(Ge, null, [e.multiple && !e.hideSelected ? _(Ao, {
                      key: le.value,
                      modelValue: we,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, le.props.prependAvatar && _(Oi, {
                      image: le.props.prependAvatar
                    }, null), le.props.prependIcon && _(pn, {
                      icon: le.props.prependIcon
                    }, null)]);
                  },
                  title: () => o.value ? le.title : RP("v-autocomplete", le.title, C(le)?.title)
                });
              }
            }), n["append-item"]?.()]
          })]
        }), v.value.map((Q, le) => {
          function G(we) {
            we.stopPropagation(), we.preventDefault(), Ve(Q, !1);
          }
          const Ce = {
            "onClick:close": G,
            onKeydown(we) {
              we.key !== "Enter" && we.key !== " " || (we.preventDefault(), we.stopPropagation(), G(we));
            },
            onMousedown(we) {
              we.preventDefault(), we.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, Ie = P.value ? !!n.chip : !!n.selection, ie = Ie ? fv(P.value ? n.chip({
            item: Q,
            index: le,
            props: Ce
          }) : n.selection({
            item: Q,
            index: le
          })) : void 0;
          if (!(Ie && !ie))
            return T("div", {
              key: Q.value,
              class: Ae(["v-autocomplete__selection", le === u.value && ["v-autocomplete__selection--selected", p.value]]),
              style: Je(le === u.value ? w.value : {})
            }, [P.value ? n.chip ? _(Ht, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: Q.title
                }
              }
            }, {
              default: () => [ie]
            }) : _(ad, Fe({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: Q.title,
              disabled: Q.props.disabled
            }, Ce), null) : ie ?? T("span", {
              class: "v-autocomplete__selection-text"
            }, [Q.title, e.multiple && le < v.value.length - 1 && T("span", {
              class: "v-autocomplete__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var Q = arguments.length, le = new Array(Q), G = 0; G < Q; G++)
            le[G] = arguments[G];
          return T(Ge, null, [n["append-inner"]?.(...le), e.menuIcon ? _(pn, {
            class: "v-autocomplete__menu-icon",
            color: r.value?.fieldIconColor,
            icon: e.menuIcon,
            onMousedown: Y,
            onClick: MT,
            "aria-label": a(F.value),
            title: a(F.value),
            tabindex: "-1"
          }, null) : void 0]);
        }
      });
    }), Za({
      isFocused: i,
      isPristine: o,
      menu: B,
      search: b,
      filteredItems: A,
      select: Ve
    }, r);
  }
}), zW = Be({
  bordered: Boolean,
  color: String,
  content: [Number, String],
  dot: Boolean,
  floating: Boolean,
  icon: St,
  inline: Boolean,
  label: {
    type: String,
    default: "$vuetify.badge"
  },
  max: [Number, String],
  modelValue: {
    type: Boolean,
    default: !0
  },
  offsetX: [Number, String],
  offsetY: [Number, String],
  textColor: String,
  ...pt(),
  ...fs({
    location: "top end"
  }),
  ...qn(),
  ...$t(),
  ...rn(),
  ...eo({
    transition: "scale-rotate-transition"
  }),
  ...Ta()
}, "VBadge"), WW = We()({
  name: "VBadge",
  inheritAttrs: !1,
  props: zW(),
  setup(e, t) {
    const {
      backgroundColorClasses: n,
      backgroundColorStyles: a
    } = bn(() => e.color), {
      roundedClasses: r
    } = ra(e), {
      t: i
    } = kn(), {
      textColorClasses: o,
      textColorStyles: l
    } = sr(() => e.textColor), {
      themeClasses: s
    } = Kw(), {
      locationStyles: d
    } = bc(e, !0, (f) => (e.floating ? e.dot ? 2 : 4 : e.dot ? 8 : 12) + (["top", "bottom"].includes(f) ? Number(e.offsetY ?? 0) : ["left", "right"].includes(f) ? Number(e.offsetX ?? 0) : 0)), {
      dimensionStyles: u
    } = Ia(e);
    return Ye(() => {
      const f = Number(e.content), h = !e.max || isNaN(f) ? e.content : f <= Number(e.max) ? f : `${e.max}+`, [y, p] = zy(t.attrs, ["aria-atomic", "aria-label", "aria-live", "role", "title"]);
      return _(e.tag, Fe({
        class: ["v-badge", {
          "v-badge--bordered": e.bordered,
          "v-badge--dot": e.dot,
          "v-badge--floating": e.floating,
          "v-badge--inline": e.inline
        }, e.class]
      }, p, {
        style: e.style
      }), {
        default: () => [T("div", {
          class: "v-badge__wrapper"
        }, [t.slots.default?.(), _(Cr, {
          transition: e.transition
        }, {
          default: () => [sn(T("span", Fe({
            class: ["v-badge__badge", s.value, n.value, r.value, o.value],
            style: [a.value, l.value, u.value, e.inline ? {} : d.value],
            "aria-atomic": "true",
            "aria-label": i(e.label, f),
            "aria-live": "polite",
            role: "status"
          }, y), [e.dot ? void 0 : t.slots.badge ? t.slots.badge?.() : e.icon ? _(pn, {
            icon: e.icon
          }, null) : h]), [[_a, e.modelValue]])]
        })])]
      });
    }), {};
  }
}), KW = Be({
  color: String,
  density: String,
  ...pt()
}, "VBannerActions"), FP = We()({
  name: "VBannerActions",
  props: KW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return aa({
      VBtn: {
        color: e.color,
        density: e.density,
        slim: !0,
        variant: "text"
      }
    }), Ye(() => T("div", {
      class: Ae(["v-banner-actions", e.class]),
      style: Je(e.style)
    }, [n.default?.()])), {};
  }
}), NP = ds("v-banner-text"), jW = Be({
  avatar: String,
  bgColor: String,
  color: String,
  icon: St,
  lines: String,
  stacked: Boolean,
  sticky: Boolean,
  text: String,
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ta(),
  ...dc({
    mobile: null
  }),
  ...Ua(),
  ...fs(),
  ...ed(),
  ...qn(),
  ...$t(),
  ...rn()
}, "VBanner"), YW = We()({
  name: "VBanner",
  props: jW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = bn(() => e.bgColor), {
      borderClasses: i
    } = Xr(e), {
      densityClasses: o
    } = Tr(e), {
      displayClasses: l,
      mobile: s
    } = pi(e), {
      dimensionStyles: d
    } = Ia(e), {
      elevationClasses: u
    } = Xa(e), {
      locationStyles: f
    } = bc(e), {
      positionClasses: h
    } = td(e), {
      roundedClasses: y
    } = ra(e), {
      themeClasses: p
    } = gn(e), w = ye(() => e.color), b = ye(() => e.density);
    aa({
      VBannerActions: {
        color: w,
        density: b
      }
    }), Ye(() => {
      const v = !!(e.text || n.text), g = !!(e.avatar || e.icon), k = !!(g || n.prepend);
      return _(e.tag, {
        class: Ae(["v-banner", {
          "v-banner--stacked": e.stacked || s.value,
          "v-banner--sticky": e.sticky,
          [`v-banner--${e.lines}-line`]: !!e.lines
        }, p.value, a.value, i.value, o.value, l.value, u.value, h.value, y.value, e.class]),
        style: Je([r.value, d.value, f.value, e.style]),
        role: "banner"
      }, {
        default: () => [k && T("div", {
          key: "prepend",
          class: "v-banner__prepend"
        }, [n.prepend ? _(Ht, {
          key: "prepend-defaults",
          disabled: !g,
          defaults: {
            VAvatar: {
              color: w.value,
              density: b.value,
              icon: e.icon,
              image: e.avatar
            }
          }
        }, n.prepend) : _(Oi, {
          key: "prepend-avatar",
          color: w.value,
          density: b.value,
          icon: e.icon,
          image: e.avatar
        }, null)]), T("div", {
          class: "v-banner__content"
        }, [v && _(NP, {
          key: "text"
        }, {
          default: () => [n.text?.() ?? e.text]
        }), n.default?.()]), n.actions && _(FP, {
          key: "actions"
        }, n.actions)]
      });
    });
  }
}), GW = Be({
  baseColor: String,
  bgColor: String,
  color: String,
  grow: Boolean,
  mode: {
    type: String,
    validator: (e) => !e || ["horizontal", "shift"].includes(e)
  },
  height: {
    type: [Number, String],
    default: 56
  },
  active: {
    type: Boolean,
    default: !0
  },
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ua(),
  ...qn(),
  ...fc({
    name: "bottom-navigation"
  }),
  ...$t({
    tag: "header"
  }),
  ...pc({
    selectedClass: "v-btn--selected"
  }),
  ...rn()
}, "VBottomNavigation"), QW = We()({
  name: "VBottomNavigation",
  props: GW(),
  emits: {
    "update:active": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = Kw(), {
      borderClasses: r
    } = Xr(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = bn(() => e.bgColor), {
      densityClasses: l
    } = Tr(e), {
      elevationClasses: s
    } = Xa(e), {
      roundedClasses: d
    } = ra(e), {
      ssrBootStyles: u
    } = _c(), f = W(() => Number(e.height) - (e.density === "comfortable" ? 8 : 0) - (e.density === "compact" ? 16 : 0)), h = wt(e, "active", e.active), {
      layoutItemStyles: y
    } = mc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: ye(() => "bottom"),
      layoutSize: ye(() => h.value ? f.value : 0),
      elementSize: f,
      active: h,
      absolute: ye(() => e.absolute)
    });
    return ol(e, L0), aa({
      VBtn: {
        baseColor: ye(() => e.baseColor),
        color: ye(() => e.color),
        density: ye(() => e.density),
        stacked: ye(() => e.mode !== "horizontal"),
        variant: "text"
      }
    }, {
      scoped: !0
    }), Ye(() => _(e.tag, {
      class: Ae(["v-bottom-navigation", {
        "v-bottom-navigation--active": h.value,
        "v-bottom-navigation--grow": e.grow,
        "v-bottom-navigation--shift": e.mode === "shift"
      }, a.value, i.value, r.value, l.value, s.value, d.value, e.class]),
      style: Je([o.value, y.value, {
        height: ht(f.value)
      }, u.value, e.style])
    }, {
      default: () => [n.default && T("div", {
        class: "v-bottom-navigation__content"
      }, [n.default()])]
    })), {};
  }
}), UP = Be({
  fullscreen: Boolean,
  retainFocus: {
    type: Boolean,
    default: !0
  },
  scrollable: Boolean,
  ...cm({
    origin: "center center",
    scrollStrategy: "block",
    transition: {
      component: Cv
    },
    zIndex: 2400
  })
}, "VDialog"), Rb = We()({
  name: "VDialog",
  props: UP(),
  emits: {
    "update:modelValue": (e) => !0,
    afterEnter: () => !0,
    afterLeave: () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = wt(e, "modelValue"), {
      scopeId: i
    } = wc(), o = be();
    function l(u) {
      const f = u.relatedTarget, h = u.target;
      if (f !== h && o.value?.contentEl && // We're the topmost dialog
      o.value?.globalTop && // It isn't the document or the dialog body
      ![document, o.value.contentEl].includes(h) && // It isn't inside the dialog body
      !o.value.contentEl.contains(h)) {
        const y = bf(o.value.contentEl);
        if (!y.length) return;
        const p = y[0], w = y[y.length - 1];
        f === p ? w.focus() : p.focus();
      }
    }
    Ja(() => {
      document.removeEventListener("focusin", l);
    }), _n && tt(() => r.value && e.retainFocus, (u) => {
      u ? document.addEventListener("focusin", l) : document.removeEventListener("focusin", l);
    }, {
      immediate: !0
    });
    function s() {
      n("afterEnter"), (e.scrim || e.retainFocus) && o.value?.contentEl && !o.value.contentEl.contains(document.activeElement) && o.value.contentEl.focus({
        preventScroll: !0
      });
    }
    function d() {
      n("afterLeave");
    }
    return tt(r, async (u) => {
      u || (await Dt(), o.value.activatorEl?.focus({
        preventScroll: !0
      }));
    }), Ye(() => {
      const u = xo.filterProps(e), f = Fe({
        "aria-haspopup": "dialog"
      }, e.activatorProps), h = Fe({
        tabindex: -1
      }, e.contentProps);
      return _(xo, Fe({
        ref: o,
        class: ["v-dialog", {
          "v-dialog--fullscreen": e.fullscreen,
          "v-dialog--scrollable": e.scrollable
        }, e.class],
        style: e.style
      }, u, {
        modelValue: r.value,
        "onUpdate:modelValue": (y) => r.value = y,
        "aria-modal": "true",
        activatorProps: f,
        contentProps: h,
        height: e.fullscreen ? void 0 : e.height,
        width: e.fullscreen ? void 0 : e.width,
        maxHeight: e.fullscreen ? void 0 : e.maxHeight,
        maxWidth: e.fullscreen ? void 0 : e.maxWidth,
        role: "dialog",
        onAfterEnter: s,
        onAfterLeave: d
      }, i), {
        activator: a.activator,
        default: function() {
          for (var y = arguments.length, p = new Array(y), w = 0; w < y; w++)
            p[w] = arguments[w];
          return _(Ht, {
            root: "VDialog"
          }, {
            default: () => [a.default?.(...p)]
          });
        }
      });
    }), Za({}, o);
  }
}), JW = Be({
  inset: Boolean,
  ...UP({
    transition: "bottom-sheet-transition"
  })
}, "VBottomSheet"), XW = We()({
  name: "VBottomSheet",
  props: JW(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue");
    return Ye(() => {
      const r = Rb.filterProps(e);
      return _(Rb, Fe(r, {
        contentClass: ["v-bottom-sheet__content", e.contentClass],
        modelValue: a.value,
        "onUpdate:modelValue": (i) => a.value = i,
        class: ["v-bottom-sheet", {
          "v-bottom-sheet--inset": e.inset
        }, e.class],
        style: e.style
      }), n);
    }), {};
  }
}), ZW = Be({
  divider: [Number, String],
  ...pt()
}, "VBreadcrumbsDivider"), $P = We()({
  name: "VBreadcrumbsDivider",
  props: ZW(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => T("li", {
      "aria-hidden": "true",
      class: Ae(["v-breadcrumbs-divider", e.class]),
      style: Je(e.style)
    }, [n?.default?.() ?? e.divider])), {};
  }
}), eK = Be({
  active: Boolean,
  activeClass: String,
  activeColor: String,
  color: String,
  disabled: Boolean,
  title: String,
  ...pt(),
  ...om(),
  ...$t({
    tag: "li"
  })
}, "VBreadcrumbsItem"), qP = We()({
  name: "VBreadcrumbsItem",
  props: eK(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    const r = im(e, a), i = W(() => e.active || r.isActive?.value), {
      textColorClasses: o,
      textColorStyles: l
    } = sr(() => i.value ? e.activeColor : e.color);
    return Ye(() => _(e.tag, {
      class: Ae(["v-breadcrumbs-item", {
        "v-breadcrumbs-item--active": i.value,
        "v-breadcrumbs-item--disabled": e.disabled,
        [`${e.activeClass}`]: i.value && e.activeClass
      }, o.value, e.class]),
      style: Je([l.value, e.style]),
      "aria-current": i.value ? "page" : void 0
    }, {
      default: () => [r.isLink.value ? T("a", Fe({
        class: "v-breadcrumbs-item--link",
        onClick: r.navigate
      }, r.linkProps), [n.default?.() ?? e.title]) : n.default?.() ?? e.title]
    })), {};
  }
}), tK = Be({
  activeClass: String,
  activeColor: String,
  bgColor: String,
  color: String,
  disabled: Boolean,
  divider: {
    type: String,
    default: "/"
  },
  icon: St,
  items: {
    type: Array,
    default: () => []
  },
  ...pt(),
  ...Wa(),
  ...qn(),
  ...$t({
    tag: "ul"
  })
}, "VBreadcrumbs"), nK = We()({
  name: "VBreadcrumbs",
  props: tK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = bn(() => e.bgColor), {
      densityClasses: i
    } = Tr(e), {
      roundedClasses: o
    } = ra(e);
    aa({
      VBreadcrumbsDivider: {
        divider: ye(() => e.divider)
      },
      VBreadcrumbsItem: {
        activeClass: ye(() => e.activeClass),
        activeColor: ye(() => e.activeColor),
        color: ye(() => e.color),
        disabled: ye(() => e.disabled)
      }
    });
    const l = W(() => e.items.map((s) => typeof s == "string" ? {
      item: {
        title: s
      },
      raw: s
    } : {
      item: s,
      raw: s
    }));
    return Ye(() => {
      const s = !!(n.prepend || e.icon);
      return _(e.tag, {
        class: Ae(["v-breadcrumbs", a.value, i.value, o.value, e.class]),
        style: Je([r.value, e.style])
      }, {
        default: () => [s && T("li", {
          key: "prepend",
          class: "v-breadcrumbs__prepend"
        }, [n.prepend ? _(Ht, {
          key: "prepend-defaults",
          disabled: !e.icon,
          defaults: {
            VIcon: {
              icon: e.icon,
              start: !0
            }
          }
        }, n.prepend) : _(pn, {
          key: "prepend-icon",
          start: !0,
          icon: e.icon
        }, null)]), l.value.map((d, u, f) => {
          let {
            item: h,
            raw: y
          } = d;
          return T(Ge, null, [n.item?.({
            item: h,
            index: u
          }) ?? _(qP, Fe({
            key: u,
            disabled: u >= f.length - 1
          }, typeof h == "string" ? {
            title: h
          } : h), {
            default: n.title ? () => n.title?.({
              item: h,
              index: u
            }) : void 0
          }), u < f.length - 1 && _($P, null, {
            default: n.divider ? () => n.divider?.({
              item: y,
              index: u
            }) : void 0
          })]);
        }), n.default?.()]
      });
    }), {};
  }
}), HP = We()({
  name: "VCardActions",
  props: pt(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return aa({
      VBtn: {
        slim: !0,
        variant: "text"
      }
    }), Ye(() => T("div", {
      class: Ae(["v-card-actions", e.class]),
      style: Je(e.style)
    }, [n.default?.()])), {};
  }
}), aK = Be({
  opacity: [Number, String],
  ...pt(),
  ...$t()
}, "VCardSubtitle"), zP = We()({
  name: "VCardSubtitle",
  props: aK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(e.tag, {
      class: Ae(["v-card-subtitle", e.class]),
      style: Je([{
        "--v-card-subtitle-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), WP = ds("v-card-title"), rK = Be({
  appendAvatar: String,
  appendIcon: St,
  prependAvatar: String,
  prependIcon: St,
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...pt(),
  ...Wa()
}, "VCardItem"), KP = We()({
  name: "VCardItem",
  props: rK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => {
      const a = !!(e.prependAvatar || e.prependIcon), r = !!(a || n.prepend), i = !!(e.appendAvatar || e.appendIcon), o = !!(i || n.append), l = !!(e.title != null || n.title), s = !!(e.subtitle != null || n.subtitle);
      return T("div", {
        class: Ae(["v-card-item", e.class]),
        style: Je(e.style)
      }, [r && T("div", {
        key: "prepend",
        class: "v-card-item__prepend"
      }, [n.prepend ? _(Ht, {
        key: "prepend-defaults",
        disabled: !a,
        defaults: {
          VAvatar: {
            density: e.density,
            image: e.prependAvatar
          },
          VIcon: {
            density: e.density,
            icon: e.prependIcon
          }
        }
      }, n.prepend) : T(Ge, null, [e.prependAvatar && _(Oi, {
        key: "prepend-avatar",
        density: e.density,
        image: e.prependAvatar
      }, null), e.prependIcon && _(pn, {
        key: "prepend-icon",
        density: e.density,
        icon: e.prependIcon
      }, null)])]), T("div", {
        class: "v-card-item__content"
      }, [l && _(WP, {
        key: "title"
      }, {
        default: () => [n.title?.() ?? j(e.title)]
      }), s && _(zP, {
        key: "subtitle"
      }, {
        default: () => [n.subtitle?.() ?? j(e.subtitle)]
      }), n.default?.()]), o && T("div", {
        key: "append",
        class: "v-card-item__append"
      }, [n.append ? _(Ht, {
        key: "append-defaults",
        disabled: !i,
        defaults: {
          VAvatar: {
            density: e.density,
            image: e.appendAvatar
          },
          VIcon: {
            density: e.density,
            icon: e.appendIcon
          }
        }
      }, n.append) : T(Ge, null, [e.appendIcon && _(pn, {
        key: "append-icon",
        density: e.density,
        icon: e.appendIcon
      }, null), e.appendAvatar && _(Oi, {
        key: "append-avatar",
        density: e.density,
        image: e.appendAvatar
      }, null)])])]);
    }), {};
  }
}), iK = Be({
  opacity: [Number, String],
  ...pt(),
  ...$t()
}, "VCardText"), jP = We()({
  name: "VCardText",
  props: iK(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => _(e.tag, {
      class: Ae(["v-card-text", e.class]),
      style: Je([{
        "--v-card-text-opacity": e.opacity
      }, e.style])
    }, n)), {};
  }
}), oK = Be({
  appendAvatar: String,
  appendIcon: St,
  disabled: Boolean,
  flat: Boolean,
  hover: Boolean,
  image: String,
  link: {
    type: Boolean,
    default: void 0
  },
  prependAvatar: String,
  prependIcon: St,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  subtitle: {
    type: [String, Number, Boolean],
    default: void 0
  },
  text: {
    type: [String, Number, Boolean],
    default: void 0
  },
  title: {
    type: [String, Number, Boolean],
    default: void 0
  },
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ta(),
  ...Ua(),
  ...Tv(),
  ...fs(),
  ...ed(),
  ...qn(),
  ...om(),
  ...$t(),
  ...rn(),
  ...Di({
    variant: "elevated"
  })
}, "VCard"), sK = We()({
  name: "VCard",
  directives: {
    vRipple: xr
  },
  props: oK(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = gn(e), {
      borderClasses: i
    } = Xr(e), {
      colorClasses: o,
      colorStyles: l,
      variantClasses: s
    } = vc(e), {
      densityClasses: d
    } = Tr(e), {
      dimensionStyles: u
    } = Ia(e), {
      elevationClasses: f
    } = Xa(e), {
      loaderClasses: h
    } = am(e), {
      locationStyles: y
    } = bc(e), {
      positionClasses: p
    } = td(e), {
      roundedClasses: w
    } = ra(e), b = im(e, n);
    return Ye(() => {
      const v = e.link !== !1 && b.isLink.value, g = !e.disabled && e.link !== !1 && (e.link || b.isClickable.value), k = v ? "a" : e.tag, A = !!(a.title || e.title != null), C = !!(a.subtitle || e.subtitle != null), D = A || C, P = !!(a.append || e.appendAvatar || e.appendIcon), O = !!(a.prepend || e.prependAvatar || e.prependIcon), I = !!(a.image || e.image), x = D || O || P, M = !!(a.text || e.text != null);
      return sn(_(k, Fe({
        class: ["v-card", {
          "v-card--disabled": e.disabled,
          "v-card--flat": e.flat,
          "v-card--hover": e.hover && !(e.disabled || e.flat),
          "v-card--link": g
        }, r.value, i.value, o.value, d.value, f.value, h.value, p.value, w.value, s.value, e.class],
        style: [l.value, u.value, y.value, e.style],
        onClick: g && b.navigate,
        tabindex: e.disabled ? -1 : void 0
      }, b.linkProps), {
        default: () => [I && T("div", {
          key: "image",
          class: "v-card__image"
        }, [a.image ? _(Ht, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              cover: !0,
              src: e.image
            }
          }
        }, a.image) : _(os, {
          key: "image-img",
          cover: !0,
          src: e.image
        }, null)]), _(rm, {
          name: "v-card",
          active: !!e.loading,
          color: typeof e.loading == "boolean" ? void 0 : e.loading
        }, {
          default: a.loader
        }), x && _(KP, {
          key: "item",
          prependAvatar: e.prependAvatar,
          prependIcon: e.prependIcon,
          title: e.title,
          subtitle: e.subtitle,
          appendAvatar: e.appendAvatar,
          appendIcon: e.appendIcon
        }, {
          default: a.item,
          prepend: a.prepend,
          title: a.title,
          subtitle: a.subtitle,
          append: a.append
        }), M && _(jP, {
          key: "text"
        }, {
          default: () => [a.text?.() ?? e.text]
        }), a.default?.(), a.actions && _(HP, null, {
          default: a.actions
        }), il(g, "v-card")]
      }), [[xr, g && e.ripple]]);
    }), {};
  }
}), lK = (e) => {
  const {
    touchstartX: t,
    touchendX: n,
    touchstartY: a,
    touchendY: r
  } = e, i = 0.5, o = 16;
  e.offsetX = n - t, e.offsetY = r - a, Math.abs(e.offsetY) < i * Math.abs(e.offsetX) && (e.left && n < t - o && e.left(e), e.right && n > t + o && e.right(e)), Math.abs(e.offsetX) < i * Math.abs(e.offsetY) && (e.up && r < a - o && e.up(e), e.down && r > a + o && e.down(e));
};
function cK(e, t) {
  const n = e.changedTouches[0];
  t.touchstartX = n.clientX, t.touchstartY = n.clientY, t.start?.({
    originalEvent: e,
    ...t
  });
}
function uK(e, t) {
  const n = e.changedTouches[0];
  t.touchendX = n.clientX, t.touchendY = n.clientY, t.end?.({
    originalEvent: e,
    ...t
  }), lK(t);
}
function dK(e, t) {
  const n = e.changedTouches[0];
  t.touchmoveX = n.clientX, t.touchmoveY = n.clientY, t.move?.({
    originalEvent: e,
    ...t
  });
}
function fK() {
  let e = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  const t = {
    touchstartX: 0,
    touchstartY: 0,
    touchendX: 0,
    touchendY: 0,
    touchmoveX: 0,
    touchmoveY: 0,
    offsetX: 0,
    offsetY: 0,
    left: e.left,
    right: e.right,
    up: e.up,
    down: e.down,
    start: e.start,
    move: e.move,
    end: e.end
  };
  return {
    touchstart: (n) => cK(n, t),
    touchend: (n) => uK(n, t),
    touchmove: (n) => dK(n, t)
  };
}
function mK(e, t) {
  const n = t.value, a = n?.parent ? e.parentElement : e, r = n?.options ?? {
    passive: !0
  }, i = t.instance?.$.uid;
  if (!a || !i) return;
  const o = fK(t.value);
  a._touchHandlers = a._touchHandlers ?? /* @__PURE__ */ Object.create(null), a._touchHandlers[i] = o, IT(o).forEach((l) => {
    a.addEventListener(l, o[l], r);
  });
}
function hK(e, t) {
  const n = t.value?.parent ? e.parentElement : e, a = t.instance?.$.uid;
  if (!n?._touchHandlers || !a) return;
  const r = n._touchHandlers[a];
  IT(r).forEach((i) => {
    n.removeEventListener(i, r[i]);
  }), delete n._touchHandlers[a];
}
const j_ = {
  mounted: mK,
  unmounted: hK
}, YP = Symbol.for("vuetify:v-window"), GP = Symbol.for("vuetify:v-window-group"), Dv = Be({
  continuous: Boolean,
  nextIcon: {
    type: [Boolean, String, Function, Object],
    default: "$next"
  },
  prevIcon: {
    type: [Boolean, String, Function, Object],
    default: "$prev"
  },
  reverse: Boolean,
  showArrows: {
    type: [Boolean, String],
    validator: (e) => typeof e == "boolean" || e === "hover"
  },
  verticalArrows: [Boolean, String],
  touch: {
    type: [Object, Boolean],
    default: void 0
  },
  direction: {
    type: String,
    default: "horizontal"
  },
  modelValue: null,
  disabled: Boolean,
  selectedClass: {
    type: String,
    default: "v-window-item--active"
  },
  // TODO: mandatory should probably not be exposed but do this for now
  mandatory: {
    type: [Boolean, String],
    default: "force"
  },
  ...pt(),
  ...$t(),
  ...rn()
}, "VWindow"), ic = We()({
  name: "VWindow",
  directives: {
    vTouch: j_
  },
  props: Dv(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      isRtl: r
    } = Na(), {
      t: i
    } = kn(), o = ol(e, GP), l = be(), s = W(() => r.value ? !e.reverse : e.reverse), d = rt(!1), u = W(() => {
      const A = e.direction === "vertical" ? "y" : "x", D = (s.value ? !d.value : d.value) ? "-reverse" : "";
      return `v-window-${A}${D}-transition`;
    }), f = rt(0), h = be(void 0), y = W(() => o.items.value.findIndex((A) => o.selected.value.includes(A.id)));
    tt(y, (A, C) => {
      const D = o.items.value.length, P = D - 1;
      D <= 2 ? d.value = A < C : A === P && C === 0 ? d.value = !0 : A === 0 && C === P ? d.value = !1 : d.value = A < C;
    }), Ln(YP, {
      transition: u,
      isReversed: d,
      transitionCount: f,
      transitionHeight: h,
      rootRef: l
    });
    const p = ye(() => e.continuous || y.value !== 0), w = ye(() => e.continuous || y.value !== o.items.value.length - 1);
    function b() {
      p.value && o.prev();
    }
    function v() {
      w.value && o.next();
    }
    const g = W(() => {
      const A = [], C = {
        icon: r.value ? e.nextIcon : e.prevIcon,
        class: `v-window__${s.value ? "right" : "left"}`,
        onClick: o.prev,
        "aria-label": i("$vuetify.carousel.prev")
      };
      A.push(p.value ? n.prev ? n.prev({
        props: C
      }) : _(Xt, C, null) : T("div", null, null));
      const D = {
        icon: r.value ? e.prevIcon : e.nextIcon,
        class: `v-window__${s.value ? "left" : "right"}`,
        onClick: o.next,
        "aria-label": i("$vuetify.carousel.next")
      };
      return A.push(w.value ? n.next ? n.next({
        props: D
      }) : _(Xt, D, null) : T("div", null, null)), A;
    }), k = W(() => e.touch === !1 ? e.touch : {
      ...{
        left: () => {
          s.value ? b() : v();
        },
        right: () => {
          s.value ? v() : b();
        },
        start: (C) => {
          let {
            originalEvent: D
          } = C;
          D.stopPropagation();
        }
      },
      ...e.touch === !0 ? {} : e.touch
    });
    return Ye(() => sn(_(e.tag, {
      ref: l,
      class: Ae(["v-window", {
        "v-window--show-arrows-on-hover": e.showArrows === "hover",
        "v-window--vertical-arrows": !!e.verticalArrows
      }, a.value, e.class]),
      style: Je(e.style)
    }, {
      default: () => [T("div", {
        class: "v-window__container",
        style: {
          height: h.value
        }
      }, [n.default?.({
        group: o
      }), e.showArrows !== !1 && T("div", {
        class: Ae(["v-window__controls", {
          "v-window__controls--left": e.verticalArrows === "left" || e.verticalArrows === !0
        }, {
          "v-window__controls--right": e.verticalArrows === "right"
        }])
      }, [g.value])]), n.additional?.({
        group: o
      })]
    }), [[j_, k.value]])), {
      group: o
    };
  }
}), _K = Be({
  color: String,
  cycle: Boolean,
  delimiterIcon: {
    type: St,
    default: "$delimiter"
  },
  height: {
    type: [Number, String],
    default: 500
  },
  hideDelimiters: Boolean,
  hideDelimiterBackground: Boolean,
  interval: {
    type: [Number, String],
    default: 6e3,
    validator: (e) => Number(e) > 0
  },
  progress: [Boolean, String],
  verticalDelimiters: [Boolean, String],
  ...Dv({
    continuous: !0,
    mandatory: "force",
    showArrows: !0
  })
}, "VCarousel"), vK = We()({
  name: "VCarousel",
  props: _K(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), {
      t: r
    } = kn(), i = be();
    let o = -1;
    tt(a, s), tt(() => e.interval, s), tt(() => e.cycle, (d) => {
      d ? s() : window.clearTimeout(o);
    }), an(l);
    function l() {
      !e.cycle || !i.value || (o = window.setTimeout(i.value.group.next, Number(e.interval) > 0 ? Number(e.interval) : 6e3));
    }
    function s() {
      window.clearTimeout(o), window.requestAnimationFrame(l);
    }
    return Ye(() => {
      const d = ic.filterProps(e);
      return _(ic, Fe({
        ref: i
      }, d, {
        modelValue: a.value,
        "onUpdate:modelValue": (u) => a.value = u,
        class: ["v-carousel", {
          "v-carousel--hide-delimiter-background": e.hideDelimiterBackground,
          "v-carousel--vertical-delimiters": e.verticalDelimiters
        }, e.class],
        style: [{
          height: ht(e.height)
        }, e.style]
      }), {
        default: n.default,
        additional: (u) => {
          let {
            group: f
          } = u;
          return T(Ge, null, [!e.hideDelimiters && T("div", {
            class: "v-carousel__controls",
            style: {
              left: e.verticalDelimiters === "left" && e.verticalDelimiters ? 0 : "auto",
              right: e.verticalDelimiters === "right" ? 0 : "auto"
            }
          }, [f.items.value.length > 0 && _(Ht, {
            defaults: {
              VBtn: {
                color: e.color,
                icon: e.delimiterIcon,
                size: "x-small",
                variant: "text"
              }
            },
            scoped: !0
          }, {
            default: () => [f.items.value.map((h, y) => {
              const p = {
                id: `carousel-item-${h.id}`,
                "aria-label": r("$vuetify.carousel.ariaLabel.delimiter", y + 1, f.items.value.length),
                class: ["v-carousel__controls__item", f.isSelected(h.id) && "v-btn--active"],
                onClick: () => f.select(h.id, !0)
              };
              return n.item ? n.item({
                props: p,
                item: h
              }) : _(Xt, Fe(h, p), null);
            })]
          })]), e.progress && _(xv, {
            absolute: !0,
            class: "v-carousel__progress",
            color: typeof e.progress == "string" ? e.progress : void 0,
            modelValue: (f.getItemIndex(a.value) + 1) / f.items.value.length * 100
          }, null)]);
        },
        prev: n.prev,
        next: n.next
      });
    }), {};
  }
}), Bv = Be({
  reverseTransition: {
    type: [Boolean, String],
    default: void 0
  },
  transition: {
    type: [Boolean, String],
    default: void 0
  },
  ...pt(),
  ...gc(),
  ...W0()
}, "VWindowItem"), oc = We()({
  name: "VWindowItem",
  directives: {
    vTouch: j_
  },
  props: Bv(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(YP), r = yc(e, GP), {
      isBooted: i
    } = _c();
    if (!a || !r) throw new Error("[Vuetify] VWindowItem must be used inside VWindow");
    const o = rt(!1), l = W(() => i.value && (a.isReversed.value ? e.reverseTransition !== !1 : e.transition !== !1));
    function s() {
      !o.value || !a || (o.value = !1, a.transitionCount.value > 0 && (a.transitionCount.value -= 1, a.transitionCount.value === 0 && (a.transitionHeight.value = void 0)));
    }
    function d() {
      o.value || !a || (o.value = !0, a.transitionCount.value === 0 && (a.transitionHeight.value = ht(a.rootRef.value?.clientHeight)), a.transitionCount.value += 1);
    }
    function u() {
      s();
    }
    function f(p) {
      o.value && Dt(() => {
        !l.value || !o.value || !a || (a.transitionHeight.value = ht(p.clientHeight));
      });
    }
    const h = W(() => {
      const p = a.isReversed.value ? e.reverseTransition : e.transition;
      return l.value ? {
        name: typeof p != "string" ? a.transition.value : p,
        onBeforeEnter: d,
        onAfterEnter: s,
        onEnterCancelled: u,
        onBeforeLeave: d,
        onAfterLeave: s,
        onLeaveCancelled: u,
        onEnter: f
      } : !1;
    }), {
      hasContent: y
    } = K0(e, r.isSelected);
    return Ye(() => _(Cr, {
      transition: h.value,
      disabled: !i.value
    }, {
      default: () => [sn(T("div", {
        class: Ae(["v-window-item", r.selectedClass.value, e.class]),
        style: Je(e.style)
      }, [y.value && n.default?.()]), [[_a, r.isSelected.value]])]
    })), {
      groupItem: r
    };
  }
}), pK = Be({
  ...ME(),
  ...Bv()
}, "VCarouselItem"), gK = We()({
  name: "VCarouselItem",
  inheritAttrs: !1,
  props: pK(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    Ye(() => {
      const r = os.filterProps(e), i = oc.filterProps(e);
      return _(oc, Fe({
        class: ["v-carousel-item", e.class]
      }, i), {
        default: () => [_(os, Fe(a, r), n)]
      });
    });
  }
}), yK = ds("v-code", "code"), bK = Be({
  color: {
    type: Object
  },
  disabled: Boolean,
  dotSize: {
    type: [Number, String],
    default: 10
  },
  height: {
    type: [Number, String],
    default: 150
  },
  width: {
    type: [Number, String],
    default: 300
  },
  ...pt()
}, "VColorPickerCanvas"), wK = vi({
  name: "VColorPickerCanvas",
  props: bK(),
  emits: {
    "update:color": (e) => !0,
    "update:position": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = rt(!1), r = be(), i = rt(parseFloat(e.width)), o = rt(parseFloat(e.height)), l = be({
      x: 0,
      y: 0
    }), s = W({
      get: () => l.value,
      set(b) {
        if (!r.value) return;
        const {
          x: v,
          y: g
        } = b;
        l.value = b, n("update:color", {
          h: e.color?.h ?? 0,
          s: Dn(v, 0, i.value) / i.value,
          v: 1 - Dn(g, 0, o.value) / o.value,
          a: e.color?.a ?? 1
        });
      }
    }), d = W(() => {
      const {
        x: b,
        y: v
      } = s.value, g = parseInt(e.dotSize, 10) / 2;
      return {
        width: ht(e.dotSize),
        height: ht(e.dotSize),
        transform: `translate(${ht(b - g)}, ${ht(v - g)})`
      };
    }), {
      resizeRef: u
    } = Gi((b) => {
      if (!u.el?.offsetParent) return;
      const {
        width: v,
        height: g
      } = b[0].contentRect;
      i.value = v, o.value = g;
    });
    function f(b, v, g) {
      const {
        left: k,
        top: A,
        width: C,
        height: D
      } = g;
      s.value = {
        x: Dn(b - k, 0, C),
        y: Dn(v - A, 0, D)
      };
    }
    function h(b) {
      b.type === "mousedown" && b.preventDefault(), !e.disabled && (y(b), window.addEventListener("mousemove", y), window.addEventListener("mouseup", p), window.addEventListener("touchmove", y), window.addEventListener("touchend", p));
    }
    function y(b) {
      if (e.disabled || !r.value) return;
      a.value = !0;
      const v = M3(b);
      f(v.clientX, v.clientY, r.value.getBoundingClientRect());
    }
    function p() {
      window.removeEventListener("mousemove", y), window.removeEventListener("mouseup", p), window.removeEventListener("touchmove", y), window.removeEventListener("touchend", p);
    }
    function w() {
      if (!r.value) return;
      const b = r.value, v = b.getContext("2d");
      if (!v) return;
      const g = v.createLinearGradient(0, 0, b.width, 0);
      g.addColorStop(0, "hsla(0, 0%, 100%, 1)"), g.addColorStop(1, `hsla(${e.color?.h ?? 0}, 100%, 50%, 1)`), v.fillStyle = g, v.fillRect(0, 0, b.width, b.height);
      const k = v.createLinearGradient(0, 0, 0, b.height);
      k.addColorStop(0, "hsla(0, 0%, 0%, 0)"), k.addColorStop(1, "hsla(0, 0%, 0%, 1)"), v.fillStyle = k, v.fillRect(0, 0, b.width, b.height);
    }
    return tt(() => e.color?.h, w, {
      immediate: !0
    }), tt(() => [i.value, o.value], (b, v) => {
      w(), l.value = {
        x: s.value.x * b[0] / v[0],
        y: s.value.y * b[1] / v[1]
      };
    }, {
      flush: "post"
    }), tt(() => e.color, () => {
      if (a.value) {
        a.value = !1;
        return;
      }
      l.value = e.color ? {
        x: e.color.s * i.value,
        y: (1 - e.color.v) * o.value
      } : {
        x: 0,
        y: 0
      };
    }, {
      deep: !0,
      immediate: !0
    }), an(() => w()), Ye(() => T("div", {
      ref: u,
      class: Ae(["v-color-picker-canvas", e.class]),
      style: Je(e.style),
      onMousedown: h,
      onTouchstartPassive: h
    }, [T("canvas", {
      ref: r,
      width: i.value,
      height: o.value
    }, null), e.color && T("div", {
      class: Ae(["v-color-picker-canvas__dot", {
        "v-color-picker-canvas__dot--disabled": e.disabled
      }]),
      style: Je(d.value)
    }, null)])), {};
  }
});
function kK(e, t) {
  if (t) {
    const {
      a: n,
      ...a
    } = e;
    return a;
  }
  return e;
}
function SK(e, t) {
  if (t == null || typeof t == "string") {
    const n = e.a !== 1;
    if (t?.startsWith("rgb(")) {
      const {
        r,
        g: i,
        b: o,
        a: l
      } = So(e);
      return `rgb(${r} ${i} ${o}` + (n ? ` / ${l})` : ")");
    } else if (t?.startsWith("hsl(")) {
      const {
        h: r,
        s: i,
        l: o,
        a: l
      } = Gy(e);
      return `hsl(${r} ${Math.round(i * 100)} ${Math.round(o * 100)}` + (n ? ` / ${l})` : ")");
    }
    const a = KT(e);
    return e.a === 1 ? a.slice(0, 7) : a;
  }
  if (typeof t == "object") {
    let n;
    return Rl(t, ["r", "g", "b"]) ? n = So(e) : Rl(t, ["h", "s", "l"]) ? n = Gy(e) : Rl(t, ["h", "s", "v"]) && (n = e), kK(n, !Rl(t, ["a"]) && e.a === 1);
  }
  return e;
}
const lu = {
  h: 0,
  s: 0,
  v: 0,
  a: 1
}, Fb = {
  inputProps: {
    type: "number",
    min: 0
  },
  inputs: [{
    label: "R",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.r),
    getColor: (e, t) => ({
      ...e,
      r: Number(t)
    }),
    localeKey: "redInput"
  }, {
    label: "G",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.g),
    getColor: (e, t) => ({
      ...e,
      g: Number(t)
    }),
    localeKey: "greenInput"
  }, {
    label: "B",
    max: 255,
    step: 1,
    getValue: (e) => Math.round(e.b),
    getColor: (e, t) => ({
      ...e,
      b: Number(t)
    }),
    localeKey: "blueInput"
  }, {
    label: "A",
    max: 1,
    step: 0.01,
    getValue: (e) => {
      let {
        a: t
      } = e;
      return t != null ? Math.round(t * 100) / 100 : 1;
    },
    getColor: (e, t) => ({
      ...e,
      a: Number(t)
    }),
    localeKey: "alphaInput"
  }],
  to: So,
  from: Wf
}, CK = {
  ...Fb,
  inputs: Fb.inputs?.slice(0, 3)
}, Nb = {
  inputProps: {
    type: "number",
    min: 0
  },
  inputs: [{
    label: "H",
    max: 360,
    step: 1,
    getValue: (e) => Math.round(e.h),
    getColor: (e, t) => ({
      ...e,
      h: Number(t)
    }),
    localeKey: "hueInput"
  }, {
    label: "S",
    max: 1,
    step: 0.01,
    getValue: (e) => Math.round(e.s * 100) / 100,
    getColor: (e, t) => ({
      ...e,
      s: Number(t)
    }),
    localeKey: "saturationInput"
  }, {
    label: "L",
    max: 1,
    step: 0.01,
    getValue: (e) => Math.round(e.l * 100) / 100,
    getColor: (e, t) => ({
      ...e,
      l: Number(t)
    }),
    localeKey: "lightnessInput"
  }, {
    label: "A",
    max: 1,
    step: 0.01,
    getValue: (e) => {
      let {
        a: t
      } = e;
      return t != null ? Math.round(t * 100) / 100 : 1;
    },
    getColor: (e, t) => ({
      ...e,
      a: Number(t)
    }),
    localeKey: "alphaInput"
  }],
  to: Gy,
  from: Fw
}, AK = {
  ...Nb,
  inputs: Nb.inputs.slice(0, 3)
}, QP = {
  inputProps: {
    type: "text"
  },
  inputs: [{
    label: "HEXA",
    getValue: (e) => e,
    getColor: (e, t) => t,
    localeKey: "hexaInput"
  }],
  to: KT,
  from: o4
}, xK = {
  ...QP,
  inputs: [{
    label: "HEX",
    getValue: (e) => e.slice(0, 7),
    getColor: (e, t) => t,
    localeKey: "hexInput"
  }]
}, Ql = {
  rgb: CK,
  rgba: Fb,
  hsl: AK,
  hsla: Nb,
  hex: xK,
  hexa: QP
}, TK = (e) => {
  let {
    label: t,
    ...n
  } = e;
  return T("div", {
    class: "v-color-picker-edit__input"
  }, [T("input", ea(Aa(n)), null), T("span", null, [t])]);
}, IK = Be({
  color: Object,
  disabled: Boolean,
  mode: {
    type: String,
    default: "rgba",
    validator: (e) => Object.keys(Ql).includes(e)
  },
  modes: {
    type: Array,
    default: () => Object.keys(Ql),
    validator: (e) => Array.isArray(e) && e.every((t) => Object.keys(Ql).includes(t))
  },
  ...pt()
}, "VColorPickerEdit"), EK = vi({
  name: "VColorPickerEdit",
  props: IK(),
  emits: {
    "update:color": (e) => !0,
    "update:mode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const {
      t: a
    } = kn(), r = W(() => e.modes.map((o) => ({
      ...Ql[o],
      name: o
    }))), i = W(() => {
      const o = r.value.find((s) => s.name === e.mode);
      if (!o) return [];
      const l = e.color ? o.to(e.color) : null;
      return o.inputs?.map((s) => {
        let {
          getValue: d,
          getColor: u,
          localeKey: f,
          ...h
        } = s;
        return {
          ...o.inputProps,
          ...h,
          ariaLabel: a(`$vuetify.colorPicker.ariaLabel.${f}`),
          disabled: e.disabled,
          value: l && d(l),
          onChange: (y) => {
            const p = y.target;
            p && n("update:color", o.from(u(l ?? o.to(lu), p.value)));
          }
        };
      });
    });
    return Ye(() => T("div", {
      class: Ae(["v-color-picker-edit", e.class]),
      style: Je(e.style)
    }, [i.value?.map((o) => _(TK, o, null)), r.value.length > 1 && _(Xt, {
      icon: "$unfold",
      size: "x-small",
      variant: "plain",
      "aria-label": a("$vuetify.colorPicker.ariaLabel.changeFormat"),
      onClick: () => {
        const o = r.value.findIndex((l) => l.name === e.mode);
        n("update:mode", r.value[(o + 1) % r.value.length].name);
      }
    }, null)])), {};
  }
}), Q0 = Symbol.for("vuetify:v-slider");
function Ub(e, t, n) {
  const a = n === "vertical", r = t.getBoundingClientRect(), i = "touches" in e ? e.touches[0] : e;
  return a ? i.clientY - (r.top + r.height / 2) : i.clientX - (r.left + r.width / 2);
}
function PK(e, t) {
  return "touches" in e && e.touches.length ? e.touches[0][t] : "changedTouches" in e && e.changedTouches.length ? e.changedTouches[0][t] : e[t];
}
const JP = Be({
  disabled: {
    type: Boolean,
    default: null
  },
  error: Boolean,
  readonly: {
    type: Boolean,
    default: null
  },
  max: {
    type: [Number, String],
    default: 100
  },
  min: {
    type: [Number, String],
    default: 0
  },
  step: {
    type: [Number, String],
    default: 0
  },
  thumbColor: String,
  thumbLabel: {
    type: [Boolean, String],
    default: void 0,
    validator: (e) => typeof e == "boolean" || e === "always"
  },
  thumbSize: {
    type: [Number, String],
    default: 20
  },
  showTicks: {
    type: [Boolean, String],
    default: !1,
    validator: (e) => typeof e == "boolean" || e === "always"
  },
  ticks: {
    type: [Array, Object]
  },
  tickSize: {
    type: [Number, String],
    default: 2
  },
  color: String,
  trackColor: String,
  trackFillColor: String,
  trackSize: {
    type: [Number, String],
    default: 4
  },
  direction: {
    type: String,
    default: "horizontal",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  reverse: Boolean,
  noKeyboard: Boolean,
  ...qn(),
  ...Ua({
    elevation: 2
  }),
  ripple: {
    type: Boolean,
    default: !0
  }
}, "Slider"), XP = (e) => {
  const t = W(() => parseFloat(e.min)), n = W(() => parseFloat(e.max)), a = W(() => Number(e.step) > 0 ? parseFloat(e.step) : 0), r = W(() => Math.max(KS(a.value), KS(t.value)));
  function i(o) {
    if (o = parseFloat(o), a.value <= 0) return o;
    const l = Dn(o, t.value, n.value), s = t.value % a.value;
    let d = Math.round((l - s) / a.value) * a.value + s;
    return l > d && d + a.value > n.value && (d = n.value), parseFloat(Math.min(d, n.value).toFixed(r.value));
  }
  return {
    min: t,
    max: n,
    step: a,
    decimals: r,
    roundValue: i
  };
}, ZP = (e) => {
  let {
    props: t,
    steps: n,
    onSliderStart: a,
    onSliderMove: r,
    onSliderEnd: i,
    getActiveThumb: o
  } = e;
  const {
    isRtl: l
  } = Na(), s = ye(() => t.reverse), d = W(() => t.direction === "vertical"), u = W(() => d.value !== s.value), {
    min: f,
    max: h,
    step: y,
    decimals: p,
    roundValue: w
  } = n, b = W(() => parseInt(t.thumbSize, 10)), v = W(() => parseInt(t.tickSize, 10)), g = W(() => parseInt(t.trackSize, 10)), k = W(() => (h.value - f.value) / y.value), A = ye(() => t.disabled), C = W(() => t.error || t.disabled ? void 0 : t.thumbColor ?? t.color), D = W(() => t.error || t.disabled ? void 0 : t.thumbColor), P = W(() => t.error || t.disabled ? void 0 : t.trackColor ?? t.color), O = W(() => t.error || t.disabled ? void 0 : t.trackFillColor ?? t.color), I = rt(!1), x = rt(0), M = be(), V = be();
  function B(z) {
    const ge = M.value?.$el;
    if (!ge) return;
    const Ve = t.direction === "vertical", Ne = Ve ? "top" : "left", ce = Ve ? "height" : "width", ne = Ve ? "clientY" : "clientX", {
      [Ne]: Q,
      [ce]: le
    } = ge.getBoundingClientRect(), G = PK(z, ne);
    let Ce = Dn((G - Q - x.value) / le) || 0;
    return (Ve ? u.value : u.value !== l.value) && (Ce = 1 - Ce), w(f.value + Ce * (h.value - f.value));
  }
  const F = (z) => {
    const ge = B(z);
    ge != null && i({
      value: ge
    }), I.value = !1, x.value = 0;
  }, H = (z) => {
    const ge = B(z);
    V.value = o(z), V.value && (I.value = !0, V.value.contains(z.target) ? x.value = Ub(z, V.value, t.direction) : (x.value = 0, ge != null && r({
      value: ge
    })), ge != null && a({
      value: ge
    }), Dt(() => V.value?.focus()));
  }, K = {
    passive: !0,
    capture: !0
  };
  function Z(z) {
    const ge = B(z);
    ge != null && r({
      value: ge
    });
  }
  function ue(z) {
    z.stopPropagation(), z.preventDefault(), F(z), window.removeEventListener("mousemove", Z, K), window.removeEventListener("mouseup", ue);
  }
  function Y(z) {
    F(z), window.removeEventListener("touchmove", Z, K), z.target?.removeEventListener("touchend", Y);
  }
  function U(z) {
    H(z), window.addEventListener("touchmove", Z, K), z.target?.addEventListener("touchend", Y, {
      passive: !1
    });
  }
  function q(z) {
    z.button === 0 && (z.preventDefault(), H(z), window.addEventListener("mousemove", Z, K), window.addEventListener("mouseup", ue, {
      passive: !1
    }));
  }
  const oe = (z) => {
    const ge = (z - f.value) / (h.value - f.value) * 100;
    return Dn(isNaN(ge) ? 0 : ge, 0, 100);
  }, ee = ye(() => t.showTicks), he = W(() => ee.value ? t.ticks ? Array.isArray(t.ticks) ? t.ticks.map((z) => ({
    value: z,
    position: oe(z),
    label: z.toString()
  })) : Object.keys(t.ticks).map((z) => ({
    value: parseFloat(z),
    position: oe(parseFloat(z)),
    label: t.ticks[z]
  })) : k.value !== 1 / 0 ? ci(k.value + 1).map((z) => {
    const ge = f.value + z * y.value;
    return {
      value: ge,
      position: oe(ge)
    };
  }) : [] : []), ve = W(() => he.value.some((z) => {
    let {
      label: ge
    } = z;
    return !!ge;
  })), pe = {
    activeThumbRef: V,
    color: ye(() => t.color),
    decimals: p,
    disabled: A,
    direction: ye(() => t.direction),
    elevation: ye(() => t.elevation),
    hasLabels: ve,
    isReversed: s,
    indexFromEnd: u,
    min: f,
    max: h,
    mousePressed: I,
    noKeyboard: ye(() => t.noKeyboard),
    numTicks: k,
    onSliderMousedown: q,
    onSliderTouchstart: U,
    parsedTicks: he,
    parseMouseMove: B,
    position: oe,
    readonly: ye(() => t.readonly),
    rounded: ye(() => t.rounded),
    roundValue: w,
    showTicks: ee,
    startOffset: x,
    step: y,
    thumbSize: b,
    thumbColor: C,
    thumbLabelColor: D,
    thumbLabel: ye(() => t.thumbLabel),
    ticks: ye(() => t.ticks),
    tickSize: v,
    trackColor: P,
    trackContainerRef: M,
    trackFillColor: O,
    trackSize: g,
    vertical: d
  };
  return Ln(Q0, pe), pe;
}, OK = Be({
  focused: Boolean,
  max: {
    type: Number,
    required: !0
  },
  min: {
    type: Number,
    required: !0
  },
  modelValue: {
    type: Number,
    required: !0
  },
  position: {
    type: Number,
    required: !0
  },
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  name: String,
  noKeyboard: Boolean,
  ...pt()
}, "VSliderThumb"), $b = We()({
  name: "VSliderThumb",
  directives: {
    vRipple: xr
  },
  props: OK(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Gt(Q0), {
      isRtl: i,
      rtlClasses: o
    } = Na();
    if (!r) throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");
    const {
      min: l,
      max: s,
      thumbColor: d,
      thumbLabelColor: u,
      step: f,
      disabled: h,
      thumbSize: y,
      thumbLabel: p,
      direction: w,
      isReversed: b,
      vertical: v,
      readonly: g,
      elevation: k,
      mousePressed: A,
      decimals: C,
      indexFromEnd: D
    } = r, P = W(() => h.value ? void 0 : k.value), {
      elevationClasses: O
    } = Xa(P), {
      textColorClasses: I,
      textColorStyles: x
    } = sr(d), {
      backgroundColorClasses: M,
      backgroundColorStyles: V
    } = bn(u), {
      pageup: B,
      pagedown: F,
      end: H,
      home: K,
      left: Z,
      right: ue,
      down: Y,
      up: U
    } = Hy, q = [B, F, H, K, Z, ue, Y, U], oe = W(() => f.value ? [1, 2, 3] : [1, 5, 10]);
    function ee(ve, pe) {
      if (e.noKeyboard || !q.includes(ve.key)) return;
      ve.preventDefault();
      const z = f.value || 0.1, ge = (s.value - l.value) / z;
      if ([Z, ue, Y, U].includes(ve.key)) {
        const Ne = (v.value ? [i.value ? Z : ue, b.value ? Y : U] : D.value !== i.value ? [Z, U] : [ue, U]).includes(ve.key) ? 1 : -1, ce = ve.shiftKey ? 2 : ve.ctrlKey ? 1 : 0;
        Ne === -1 && pe === s.value && !ce && !Number.isInteger(ge) ? pe = pe - ge % 1 * z : pe = pe + Ne * z * oe.value[ce];
      } else if (ve.key === K)
        pe = l.value;
      else if (ve.key === H)
        pe = s.value;
      else {
        const Ve = ve.key === F ? 1 : -1;
        pe = pe - Ve * z * (ge > 100 ? ge / 10 : 10);
      }
      return Math.max(e.min, Math.min(e.max, pe));
    }
    function he(ve) {
      const pe = ee(ve, e.modelValue);
      pe != null && a("update:modelValue", pe);
    }
    return Ye(() => {
      const ve = ht(D.value ? 100 - e.position : e.position, "%");
      return T("div", {
        class: Ae(["v-slider-thumb", {
          "v-slider-thumb--focused": e.focused,
          "v-slider-thumb--pressed": e.focused && A.value
        }, e.class, o.value]),
        style: Je([{
          "--v-slider-thumb-position": ve,
          "--v-slider-thumb-size": ht(y.value)
        }, e.style]),
        role: "slider",
        tabindex: h.value ? -1 : 0,
        "aria-label": e.name,
        "aria-valuemin": l.value,
        "aria-valuemax": s.value,
        "aria-valuenow": e.modelValue,
        "aria-readonly": !!g.value,
        "aria-orientation": w.value,
        onKeydown: g.value ? void 0 : he
      }, [T("div", {
        class: Ae(["v-slider-thumb__surface", I.value, O.value]),
        style: Je(x.value)
      }, null), sn(T("div", {
        class: Ae(["v-slider-thumb__ripple", I.value]),
        style: Je(x.value)
      }, null), [[xr, e.ripple, null, {
        circle: !0,
        center: !0
      }]]), _(D0, {
        origin: "bottom center"
      }, {
        default: () => [sn(T("div", {
          class: "v-slider-thumb__label-container"
        }, [T("div", {
          class: Ae(["v-slider-thumb__label", M.value]),
          style: Je(V.value)
        }, [T("div", null, [n["thumb-label"]?.({
          modelValue: e.modelValue
        }) ?? e.modelValue.toFixed(f.value ? C.value : 1)]), T("div", {
          class: "v-slider-thumb__label-wedge"
        }, null)])]), [[_a, p.value && e.focused || p.value === "always"]])]
      })]);
    }), {};
  }
}), DK = Be({
  start: {
    type: Number,
    required: !0
  },
  stop: {
    type: Number,
    required: !0
  },
  ...pt()
}, "VSliderTrack"), eO = We()({
  name: "VSliderTrack",
  props: DK(),
  emits: {},
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(Q0);
    if (!a) throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");
    const {
      color: r,
      parsedTicks: i,
      rounded: o,
      showTicks: l,
      tickSize: s,
      trackColor: d,
      trackFillColor: u,
      trackSize: f,
      vertical: h,
      min: y,
      max: p,
      indexFromEnd: w
    } = a, {
      roundedClasses: b
    } = ra(o), {
      backgroundColorClasses: v,
      backgroundColorStyles: g
    } = bn(u), {
      backgroundColorClasses: k,
      backgroundColorStyles: A
    } = bn(d), C = W(() => `inset-${h.value ? "block" : "inline"}-${w.value ? "end" : "start"}`), D = W(() => h.value ? "height" : "width"), P = W(() => ({
      [C.value]: "0%",
      [D.value]: "100%"
    })), O = W(() => e.stop - e.start), I = W(() => ({
      [C.value]: ht(e.start, "%"),
      [D.value]: ht(O.value, "%")
    })), x = W(() => l.value ? (h.value ? i.value.slice().reverse() : i.value).map((V, B) => {
      const F = V.value !== y.value && V.value !== p.value ? ht(V.position, "%") : void 0;
      return T("div", {
        key: V.value,
        class: Ae(["v-slider-track__tick", {
          "v-slider-track__tick--filled": V.position >= e.start && V.position <= e.stop,
          "v-slider-track__tick--first": V.value === y.value,
          "v-slider-track__tick--last": V.value === p.value
        }]),
        style: {
          [C.value]: F
        }
      }, [(V.label || n["tick-label"]) && T("div", {
        class: "v-slider-track__tick-label"
      }, [n["tick-label"]?.({
        tick: V,
        index: B
      }) ?? V.label])]);
    }) : []);
    return Ye(() => T("div", {
      class: Ae(["v-slider-track", b.value, e.class]),
      style: Je([{
        "--v-slider-track-size": ht(f.value),
        "--v-slider-tick-size": ht(s.value)
      }, e.style])
    }, [T("div", {
      class: Ae(["v-slider-track__background", k.value, {
        "v-slider-track__background--opacity": !!r.value || !u.value
      }]),
      style: {
        ...P.value,
        ...A.value
      }
    }, null), T("div", {
      class: Ae(["v-slider-track__fill", v.value]),
      style: {
        ...I.value,
        ...g.value
      }
    }, null), l.value && T("div", {
      class: Ae(["v-slider-track__ticks", {
        "v-slider-track__ticks--always-show": l.value === "always"
      }])
    }, [x.value])])), {};
  }
}), BK = Be({
  ...sm(),
  ...JP(),
  ...hs(),
  modelValue: {
    type: [Number, String],
    default: 0
  }
}, "VSlider"), qb = We()({
  name: "VSlider",
  props: BK(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    start: (e) => !0,
    end: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = be(), i = be(), {
      rtlClasses: o
    } = Na(), l = XP(e), s = wt(e, "modelValue", void 0, (O) => l.roundValue(O ?? l.min.value)), {
      min: d,
      max: u,
      mousePressed: f,
      roundValue: h,
      onSliderMousedown: y,
      onSliderTouchstart: p,
      trackContainerRef: w,
      position: b,
      hasLabels: v,
      readonly: g,
      noKeyboard: k
    } = ZP({
      props: e,
      steps: l,
      onSliderStart: () => {
        a("start", s.value);
      },
      onSliderEnd: (O) => {
        let {
          value: I
        } = O;
        const x = h(I);
        s.value = x, a("end", x);
      },
      onSliderMove: (O) => {
        let {
          value: I
        } = O;
        return s.value = h(I);
      },
      getActiveThumb: () => r.value?.$el
    }), {
      isFocused: A,
      focus: C,
      blur: D
    } = ms(e), P = W(() => b(s.value));
    return Ye(() => {
      const O = hr.filterProps(e), I = !!(e.label || n.label || n.prepend);
      return _(hr, Fe({
        ref: i,
        class: ["v-slider", {
          "v-slider--has-labels": !!n["tick-label"] || v.value,
          "v-slider--focused": A.value,
          "v-slider--pressed": f.value,
          "v-slider--disabled": e.disabled
        }, o.value, e.class],
        style: e.style
      }, O, {
        focused: A.value
      }), {
        ...n,
        prepend: I ? (x) => T(Ge, null, [n.label?.(x) ?? (e.label ? _(nd, {
          id: x.id.value,
          class: "v-slider__label",
          text: e.label
        }, null) : void 0), n.prepend?.(x)]) : void 0,
        default: (x) => {
          let {
            id: M,
            messagesId: V
          } = x;
          return T("div", {
            class: "v-slider__container",
            onMousedown: g.value ? void 0 : y,
            onTouchstartPassive: g.value ? void 0 : p
          }, [T("input", {
            id: M.value,
            name: e.name || M.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: s.value
          }, null), _(eO, {
            ref: w,
            start: 0,
            stop: P.value
          }, {
            "tick-label": n["tick-label"]
          }), _($b, {
            ref: r,
            "aria-describedby": V.value,
            focused: A.value,
            noKeyboard: k.value,
            min: d.value,
            max: u.value,
            modelValue: s.value,
            "onUpdate:modelValue": (B) => s.value = B,
            position: P.value,
            elevation: e.elevation,
            onFocus: C,
            onBlur: D,
            ripple: e.ripple,
            name: e.name
          }, {
            "thumb-label": n["thumb-label"]
          })]);
        }
      });
    }), Za({
      focus: () => r.value?.$el.focus()
    }, i);
  }
}), VK = Be({
  color: {
    type: Object
  },
  disabled: Boolean,
  hideAlpha: Boolean,
  ...pt()
}, "VColorPickerPreview"), MK = vi({
  name: "VColorPickerPreview",
  props: VK(),
  emits: {
    "update:color": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const {
      t: a
    } = kn(), r = new AbortController();
    _i(() => r.abort());
    async function i() {
      if (!qS || e.disabled) return;
      const o = new window.EyeDropper();
      try {
        const l = await o.open({
          signal: r.signal
        }), s = Wf(ui(l.sRGBHex));
        n("update:color", {
          ...e.color ?? lu,
          ...s
        });
      } catch {
      }
    }
    return Ye(() => T("div", {
      class: Ae(["v-color-picker-preview", {
        "v-color-picker-preview--hide-alpha": e.hideAlpha
      }, e.class]),
      style: Je(e.style)
    }, [qS && T("div", {
      class: "v-color-picker-preview__eye-dropper",
      key: "eyeDropper"
    }, [_(Xt, {
      "aria-label": a("$vuetify.colorPicker.ariaLabel.eyedropper"),
      density: "comfortable",
      disabled: e.disabled,
      icon: "$eyeDropper",
      variant: "plain",
      onClick: i
    }, null)]), T("div", {
      class: "v-color-picker-preview__dot"
    }, [T("div", {
      style: {
        background: HT(e.color ?? lu)
      }
    }, null)]), T("div", {
      class: "v-color-picker-preview__sliders"
    }, [_(qb, {
      class: "v-color-picker-preview__track v-color-picker-preview__hue",
      name: a("$vuetify.colorPicker.ariaLabel.hueSlider"),
      modelValue: e.color?.h,
      "onUpdate:modelValue": (o) => n("update:color", {
        ...e.color ?? lu,
        h: o
      }),
      step: 0,
      min: 0,
      max: 360,
      disabled: e.disabled,
      thumbSize: 14,
      trackSize: 8,
      trackFillColor: "white",
      hideDetails: !0
    }, null), !e.hideAlpha && _(qb, {
      class: "v-color-picker-preview__track v-color-picker-preview__alpha",
      name: a("$vuetify.colorPicker.ariaLabel.alphaSlider"),
      modelValue: e.color?.a ?? 1,
      "onUpdate:modelValue": (o) => n("update:color", {
        ...e.color ?? lu,
        a: o
      }),
      step: 1 / 256,
      min: 0,
      max: 1,
      disabled: e.disabled,
      thumbSize: 14,
      trackSize: 8,
      trackFillColor: "white",
      hideDetails: !0
    }, null)])])), {};
  }
}), LK = {
  base: "#f44336",
  lighten5: "#ffebee",
  lighten4: "#ffcdd2",
  lighten3: "#ef9a9a",
  lighten2: "#e57373",
  lighten1: "#ef5350",
  darken1: "#e53935",
  darken2: "#d32f2f",
  darken3: "#c62828",
  darken4: "#b71c1c",
  accent1: "#ff8a80",
  accent2: "#ff5252",
  accent3: "#ff1744",
  accent4: "#d50000"
}, RK = {
  base: "#e91e63",
  lighten5: "#fce4ec",
  lighten4: "#f8bbd0",
  lighten3: "#f48fb1",
  lighten2: "#f06292",
  lighten1: "#ec407a",
  darken1: "#d81b60",
  darken2: "#c2185b",
  darken3: "#ad1457",
  darken4: "#880e4f",
  accent1: "#ff80ab",
  accent2: "#ff4081",
  accent3: "#f50057",
  accent4: "#c51162"
}, FK = {
  base: "#9c27b0",
  lighten5: "#f3e5f5",
  lighten4: "#e1bee7",
  lighten3: "#ce93d8",
  lighten2: "#ba68c8",
  lighten1: "#ab47bc",
  darken1: "#8e24aa",
  darken2: "#7b1fa2",
  darken3: "#6a1b9a",
  darken4: "#4a148c",
  accent1: "#ea80fc",
  accent2: "#e040fb",
  accent3: "#d500f9",
  accent4: "#aa00ff"
}, NK = {
  base: "#673ab7",
  lighten5: "#ede7f6",
  lighten4: "#d1c4e9",
  lighten3: "#b39ddb",
  lighten2: "#9575cd",
  lighten1: "#7e57c2",
  darken1: "#5e35b1",
  darken2: "#512da8",
  darken3: "#4527a0",
  darken4: "#311b92",
  accent1: "#b388ff",
  accent2: "#7c4dff",
  accent3: "#651fff",
  accent4: "#6200ea"
}, UK = {
  base: "#3f51b5",
  lighten5: "#e8eaf6",
  lighten4: "#c5cae9",
  lighten3: "#9fa8da",
  lighten2: "#7986cb",
  lighten1: "#5c6bc0",
  darken1: "#3949ab",
  darken2: "#303f9f",
  darken3: "#283593",
  darken4: "#1a237e",
  accent1: "#8c9eff",
  accent2: "#536dfe",
  accent3: "#3d5afe",
  accent4: "#304ffe"
}, $K = {
  base: "#2196f3",
  lighten5: "#e3f2fd",
  lighten4: "#bbdefb",
  lighten3: "#90caf9",
  lighten2: "#64b5f6",
  lighten1: "#42a5f5",
  darken1: "#1e88e5",
  darken2: "#1976d2",
  darken3: "#1565c0",
  darken4: "#0d47a1",
  accent1: "#82b1ff",
  accent2: "#448aff",
  accent3: "#2979ff",
  accent4: "#2962ff"
}, qK = {
  base: "#03a9f4",
  lighten5: "#e1f5fe",
  lighten4: "#b3e5fc",
  lighten3: "#81d4fa",
  lighten2: "#4fc3f7",
  lighten1: "#29b6f6",
  darken1: "#039be5",
  darken2: "#0288d1",
  darken3: "#0277bd",
  darken4: "#01579b",
  accent1: "#80d8ff",
  accent2: "#40c4ff",
  accent3: "#00b0ff",
  accent4: "#0091ea"
}, HK = {
  base: "#00bcd4",
  lighten5: "#e0f7fa",
  lighten4: "#b2ebf2",
  lighten3: "#80deea",
  lighten2: "#4dd0e1",
  lighten1: "#26c6da",
  darken1: "#00acc1",
  darken2: "#0097a7",
  darken3: "#00838f",
  darken4: "#006064",
  accent1: "#84ffff",
  accent2: "#18ffff",
  accent3: "#00e5ff",
  accent4: "#00b8d4"
}, zK = {
  base: "#009688",
  lighten5: "#e0f2f1",
  lighten4: "#b2dfdb",
  lighten3: "#80cbc4",
  lighten2: "#4db6ac",
  lighten1: "#26a69a",
  darken1: "#00897b",
  darken2: "#00796b",
  darken3: "#00695c",
  darken4: "#004d40",
  accent1: "#a7ffeb",
  accent2: "#64ffda",
  accent3: "#1de9b6",
  accent4: "#00bfa5"
}, WK = {
  base: "#4caf50",
  lighten5: "#e8f5e9",
  lighten4: "#c8e6c9",
  lighten3: "#a5d6a7",
  lighten2: "#81c784",
  lighten1: "#66bb6a",
  darken1: "#43a047",
  darken2: "#388e3c",
  darken3: "#2e7d32",
  darken4: "#1b5e20",
  accent1: "#b9f6ca",
  accent2: "#69f0ae",
  accent3: "#00e676",
  accent4: "#00c853"
}, KK = {
  base: "#8bc34a",
  lighten5: "#f1f8e9",
  lighten4: "#dcedc8",
  lighten3: "#c5e1a5",
  lighten2: "#aed581",
  lighten1: "#9ccc65",
  darken1: "#7cb342",
  darken2: "#689f38",
  darken3: "#558b2f",
  darken4: "#33691e",
  accent1: "#ccff90",
  accent2: "#b2ff59",
  accent3: "#76ff03",
  accent4: "#64dd17"
}, jK = {
  base: "#cddc39",
  lighten5: "#f9fbe7",
  lighten4: "#f0f4c3",
  lighten3: "#e6ee9c",
  lighten2: "#dce775",
  lighten1: "#d4e157",
  darken1: "#c0ca33",
  darken2: "#afb42b",
  darken3: "#9e9d24",
  darken4: "#827717",
  accent1: "#f4ff81",
  accent2: "#eeff41",
  accent3: "#c6ff00",
  accent4: "#aeea00"
}, YK = {
  base: "#ffeb3b",
  lighten5: "#fffde7",
  lighten4: "#fff9c4",
  lighten3: "#fff59d",
  lighten2: "#fff176",
  lighten1: "#ffee58",
  darken1: "#fdd835",
  darken2: "#fbc02d",
  darken3: "#f9a825",
  darken4: "#f57f17",
  accent1: "#ffff8d",
  accent2: "#ffff00",
  accent3: "#ffea00",
  accent4: "#ffd600"
}, GK = {
  base: "#ffc107",
  lighten5: "#fff8e1",
  lighten4: "#ffecb3",
  lighten3: "#ffe082",
  lighten2: "#ffd54f",
  lighten1: "#ffca28",
  darken1: "#ffb300",
  darken2: "#ffa000",
  darken3: "#ff8f00",
  darken4: "#ff6f00",
  accent1: "#ffe57f",
  accent2: "#ffd740",
  accent3: "#ffc400",
  accent4: "#ffab00"
}, QK = {
  base: "#ff9800",
  lighten5: "#fff3e0",
  lighten4: "#ffe0b2",
  lighten3: "#ffcc80",
  lighten2: "#ffb74d",
  lighten1: "#ffa726",
  darken1: "#fb8c00",
  darken2: "#f57c00",
  darken3: "#ef6c00",
  darken4: "#e65100",
  accent1: "#ffd180",
  accent2: "#ffab40",
  accent3: "#ff9100",
  accent4: "#ff6d00"
}, JK = {
  base: "#ff5722",
  lighten5: "#fbe9e7",
  lighten4: "#ffccbc",
  lighten3: "#ffab91",
  lighten2: "#ff8a65",
  lighten1: "#ff7043",
  darken1: "#f4511e",
  darken2: "#e64a19",
  darken3: "#d84315",
  darken4: "#bf360c",
  accent1: "#ff9e80",
  accent2: "#ff6e40",
  accent3: "#ff3d00",
  accent4: "#dd2c00"
}, XK = {
  base: "#795548",
  lighten5: "#efebe9",
  lighten4: "#d7ccc8",
  lighten3: "#bcaaa4",
  lighten2: "#a1887f",
  lighten1: "#8d6e63",
  darken1: "#6d4c41",
  darken2: "#5d4037",
  darken3: "#4e342e",
  darken4: "#3e2723"
}, ZK = {
  base: "#607d8b",
  lighten5: "#eceff1",
  lighten4: "#cfd8dc",
  lighten3: "#b0bec5",
  lighten2: "#90a4ae",
  lighten1: "#78909c",
  darken1: "#546e7a",
  darken2: "#455a64",
  darken3: "#37474f",
  darken4: "#263238"
}, ej = {
  base: "#9e9e9e",
  lighten5: "#fafafa",
  lighten4: "#f5f5f5",
  lighten3: "#eeeeee",
  lighten2: "#e0e0e0",
  lighten1: "#bdbdbd",
  darken1: "#757575",
  darken2: "#616161",
  darken3: "#424242",
  darken4: "#212121"
}, tj = {
  black: "#000000",
  white: "#ffffff",
  transparent: "#ffffff00"
}, nj = {
  red: LK,
  pink: RK,
  purple: FK,
  deepPurple: NK,
  indigo: UK,
  blue: $K,
  lightBlue: qK,
  cyan: HK,
  teal: zK,
  green: WK,
  lightGreen: KK,
  lime: jK,
  yellow: YK,
  amber: GK,
  orange: QK,
  deepOrange: JK,
  brown: XK,
  blueGrey: ZK,
  grey: ej,
  shades: tj
}, aj = Be({
  swatches: {
    type: Array,
    default: () => rj(nj)
  },
  disabled: Boolean,
  color: Object,
  maxHeight: [Number, String],
  ...pt()
}, "VColorPickerSwatches");
function rj(e) {
  return Object.keys(e).map((t) => {
    const n = e[t];
    return n.base ? [n.base, n.darken4, n.darken3, n.darken2, n.darken1, n.lighten1, n.lighten2, n.lighten3, n.lighten4, n.lighten5] : [n.black, n.white, n.transparent];
  });
}
const ij = vi({
  name: "VColorPickerSwatches",
  props: aj(),
  emits: {
    "update:color": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    return Ye(() => T("div", {
      class: Ae(["v-color-picker-swatches", e.class]),
      style: Je([{
        maxHeight: ht(e.maxHeight)
      }, e.style])
    }, [T("div", null, [e.swatches.map((a) => T("div", {
      class: "v-color-picker-swatches__swatch"
    }, [a.map((r) => {
      const i = ui(r), o = Wf(i), l = qT(i);
      return T("div", {
        class: "v-color-picker-swatches__color",
        onClick: () => o && n("update:color", o)
      }, [T("div", {
        style: {
          background: l
        }
      }, [e.color && Ga(e.color, o) ? _(pn, {
        size: "x-small",
        icon: "$success",
        color: u4(r, "#FFFFFF") > 2 ? "white" : "black"
      }, null) : void 0])]);
    })]))])])), {};
  }
}), oj = ds("v-picker-title"), J0 = Be({
  color: String,
  ...Hr(),
  ...pt(),
  ...Ta(),
  ...Ua(),
  ...fs(),
  ...ed(),
  ...qn(),
  ...$t(),
  ...rn()
}, "VSheet"), Nf = We()({
  name: "VSheet",
  props: J0(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = bn(() => e.color), {
      borderClasses: o
    } = Xr(e), {
      dimensionStyles: l
    } = Ia(e), {
      elevationClasses: s
    } = Xa(e), {
      locationStyles: d
    } = bc(e), {
      positionClasses: u
    } = td(e), {
      roundedClasses: f
    } = ra(e);
    return Ye(() => _(e.tag, {
      class: Ae(["v-sheet", a.value, r.value, o.value, s.value, u.value, f.value, e.class]),
      style: Je([i.value, l.value, d.value, e.style])
    }, n)), {};
  }
}), Vv = Be({
  bgColor: String,
  divided: Boolean,
  landscape: Boolean,
  title: String,
  hideHeader: Boolean,
  ...J0()
}, "VPicker"), Nu = We()({
  name: "VPicker",
  props: Vv(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = bn(() => e.color);
    return Ye(() => {
      const i = Nf.filterProps(e), o = !!(e.title || n.title);
      return _(Nf, Fe(i, {
        color: e.bgColor,
        class: ["v-picker", {
          "v-picker--divided": e.divided,
          "v-picker--landscape": e.landscape,
          "v-picker--with-actions": !!n.actions
        }, e.class],
        style: e.style
      }), {
        default: () => [!e.hideHeader && T("div", {
          key: "header",
          class: Ae([a.value]),
          style: Je([r.value])
        }, [o && _(oj, {
          key: "picker-title"
        }, {
          default: () => [n.title?.() ?? e.title]
        }), n.header && T("div", {
          class: "v-picker__header"
        }, [n.header()])]), T("div", {
          class: "v-picker__body"
        }, [n.default?.()]), n.actions && _(Ht, {
          defaults: {
            VBtn: {
              slim: !0,
              variant: "text"
            }
          }
        }, {
          default: () => [T("div", {
            class: "v-picker__actions"
          }, [n.actions()])]
        })]
      });
    }), {};
  }
}), sj = Be({
  canvasHeight: {
    type: [String, Number],
    default: 150
  },
  disabled: Boolean,
  dotSize: {
    type: [Number, String],
    default: 10
  },
  hideCanvas: Boolean,
  hideSliders: Boolean,
  hideInputs: Boolean,
  mode: {
    type: String,
    default: "rgba",
    validator: (e) => Object.keys(Ql).includes(e)
  },
  modes: {
    type: Array,
    default: () => Object.keys(Ql),
    validator: (e) => Array.isArray(e) && e.every((t) => Object.keys(Ql).includes(t))
  },
  showSwatches: Boolean,
  swatches: Array,
  swatchesMaxHeight: {
    type: [Number, String],
    default: 150
  },
  modelValue: {
    type: [Object, String]
  },
  ...Vv({
    hideHeader: !0
  })
}, "VColorPicker"), lj = vi({
  name: "VColorPicker",
  props: sj(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:mode": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "mode"), r = be(null), i = wt(e, "modelValue", void 0, (u) => {
      if (u == null || u === "") return null;
      let f;
      try {
        f = Wf(ui(u));
      } catch {
        return null;
      }
      return f;
    }, (u) => u ? SK(u, e.modelValue) : null), o = W(() => i.value ? {
      ...i.value,
      h: r.value ?? i.value.h
    } : null), {
      rtlClasses: l
    } = Na();
    let s = !0;
    tt(i, (u) => {
      if (!s) {
        s = !0;
        return;
      }
      u && (r.value = u.h);
    }, {
      immediate: !0
    });
    const d = (u) => {
      s = !1, r.value = u.h, i.value = u;
    };
    return Wu(() => {
      e.modes.includes(a.value) || (a.value = e.modes[0]);
    }), aa({
      VSlider: {
        color: void 0,
        trackColor: void 0,
        trackFillColor: void 0
      }
    }), Ye(() => {
      const u = Nu.filterProps(e);
      return _(Nu, Fe(u, {
        class: ["v-color-picker", l.value, e.class],
        style: [{
          "--v-color-picker-color-hsv": HT({
            ...o.value ?? lu,
            a: 1
          })
        }, e.style]
      }), {
        ...n,
        default: () => T(Ge, null, [!e.hideCanvas && _(wK, {
          key: "canvas",
          color: o.value,
          "onUpdate:color": d,
          disabled: e.disabled,
          dotSize: e.dotSize,
          width: e.width,
          height: e.canvasHeight
        }, null), (!e.hideSliders || !e.hideInputs) && T("div", {
          key: "controls",
          class: "v-color-picker__controls"
        }, [!e.hideSliders && _(MK, {
          key: "preview",
          color: o.value,
          "onUpdate:color": d,
          hideAlpha: !a.value.endsWith("a"),
          disabled: e.disabled
        }, null), !e.hideInputs && _(EK, {
          key: "edit",
          modes: e.modes,
          mode: a.value,
          "onUpdate:mode": (f) => a.value = f,
          color: o.value,
          "onUpdate:color": d,
          disabled: e.disabled
        }, null)]), e.showSwatches && _(ij, {
          key: "swatches",
          color: o.value,
          "onUpdate:color": d,
          maxHeight: e.swatchesMaxHeight,
          swatches: e.swatches,
          disabled: e.disabled
        }, null)])
      });
    }), {};
  }
}), cj = Be({
  autoSelectFirst: {
    type: [Boolean, String]
  },
  clearOnSelect: {
    type: Boolean,
    default: !0
  },
  delimiters: Array,
  ...id({
    filterKeys: ["title"]
  }),
  ...Y0({
    hideNoData: !0,
    returnObject: !0
  }),
  ...Tn(dm({
    modelValue: null,
    role: "combobox"
  }), ["validationValue", "dirty", "appendInnerIcon"]),
  ...eo({
    transition: !1
  })
}, "VCombobox"), uj = We()({
  name: "VCombobox",
  props: cj(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:search": (e) => !0,
    "update:menu": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = kn(), i = be(), o = rt(!1), l = rt(!0), s = rt(!1), d = be(), u = be(), f = rt(-1);
    let h = !1;
    const {
      items: y,
      transformIn: p,
      transformOut: w
    } = $0(e), {
      textColorClasses: b,
      textColorStyles: v
    } = sr(() => i.value?.color), g = wt(e, "modelValue", [], (ce) => p(ta(ce)), (ce) => {
      const ne = w(ce);
      return e.multiple ? ne : ne[0] ?? null;
    }), k = lm(e), A = W(() => !!(e.chips || a.chip)), C = W(() => A.value || !!a.selection), D = rt(!e.multiple && !C.value ? g.value[0]?.title ?? "" : ""), P = W({
      get: () => D.value,
      set: async (ce) => {
        if (D.value = ce ?? "", !e.multiple && !C.value && (g.value = [Hi(e, ce)], Dt(() => u.value?.scrollToIndex(0))), ce && e.multiple && e.delimiters?.length) {
          const ne = e.delimiters.map(A_).join("|"), Q = ce.split(new RegExp(`(?:${ne})+`));
          if (Q.length > 1) {
            for (let le of Q)
              le = le.trim(), le && (z(Hi(e, le)), await Dt());
            D.value = "";
          }
        }
        ce || (f.value = -1), l.value = !ce;
      }
    }), O = W(() => typeof e.counterValue == "function" ? e.counterValue(g.value) : typeof e.counterValue == "number" ? e.counterValue : e.multiple ? g.value.length : P.value.length), {
      filteredItems: I,
      getMatches: x
    } = od(e, y, () => l.value ? "" : P.value), M = W(() => e.hideSelected ? I.value.filter((ce) => !g.value.some((ne) => ne.value === ce.value)) : I.value), V = W(() => e.hideNoData && !M.value.length || k.isReadonly.value || k.isDisabled.value), B = wt(e, "menu"), F = W({
      get: () => B.value,
      set: (ce) => {
        B.value && !ce && d.value?.ΨopenChildren.size || ce && V.value || (B.value = ce);
      }
    }), H = ye(() => F.value ? e.closeText : e.openText);
    tt(D, (ce) => {
      h ? Dt(() => h = !1) : o.value && !F.value && (F.value = !0), n("update:search", ce);
    }), tt(g, (ce) => {
      !e.multiple && !C.value && (D.value = ce[0]?.title ?? "");
    });
    const K = W(() => g.value.map((ce) => ce.value)), Z = W(() => (e.autoSelectFirst === !0 || e.autoSelectFirst === "exact" && P.value === M.value[0]?.title) && M.value.length > 0 && !l.value && !s.value), ue = be(), Y = j0(ue, i);
    function U(ce) {
      h = !0, e.openOnClear && (F.value = !0);
    }
    function q() {
      V.value || (F.value = !0);
    }
    function oe(ce) {
      V.value || (o.value && (ce.preventDefault(), ce.stopPropagation()), F.value = !F.value);
    }
    function ee(ce) {
      (xu(ce) || ce.key === "Backspace") && i.value?.focus();
    }
    function he(ce) {
      if (B3(ce) || k.isReadonly.value) return;
      const ne = i.value?.selectionStart, Q = g.value.length;
      if (["Enter", "ArrowDown", "ArrowUp"].includes(ce.key) && ce.preventDefault(), ["Enter", "ArrowDown"].includes(ce.key) && (F.value = !0), ["Escape"].includes(ce.key) && (F.value = !1), ["Enter", "Escape", "Tab"].includes(ce.key) && (Z.value && ["Enter", "Tab"].includes(ce.key) && !g.value.some((le) => {
        let {
          value: G
        } = le;
        return G === M.value[0].value;
      }) && z(I.value[0]), l.value = !0), ce.key === "ArrowDown" && Z.value && ue.value?.focus("next"), ce.key === "Enter" && P.value && (z(Hi(e, P.value)), C.value && (D.value = "")), ["Backspace", "Delete"].includes(ce.key)) {
        if (!e.multiple && C.value && g.value.length > 0 && !P.value) return z(g.value[0], !1);
        if (~f.value) {
          ce.preventDefault();
          const le = f.value;
          z(g.value[f.value], !1), f.value = le >= Q - 1 ? Q - 2 : le;
        } else ce.key === "Backspace" && !P.value && (f.value = Q - 1);
        return;
      }
      if (e.multiple)
        if (ce.key === "ArrowLeft") {
          if (f.value < 0 && ne && ne > 0) return;
          const le = f.value > -1 ? f.value - 1 : Q - 1;
          g.value[le] ? f.value = le : (f.value = -1, i.value?.setSelectionRange(P.value.length, P.value.length));
        } else if (ce.key === "ArrowRight") {
          if (f.value < 0) return;
          const le = f.value + 1;
          g.value[le] ? f.value = le : (f.value = -1, i.value?.setSelectionRange(0, 0));
        } else ~f.value && xu(ce) && (f.value = -1);
    }
    function ve() {
      e.eager && u.value?.calculateVisibleItems();
    }
    function pe() {
      o.value && (l.value = !0, i.value?.focus());
    }
    function z(ce) {
      let ne = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
      if (!(!ce || ce.props.disabled))
        if (e.multiple) {
          const Q = g.value.findIndex((G) => (e.valueComparator || Ga)(G.value, ce.value)), le = ne ?? !~Q;
          if (~Q) {
            const G = le ? [...g.value, ce] : [...g.value];
            G.splice(Q, 1), g.value = G;
          } else le && (g.value = [...g.value, ce]);
          e.clearOnSelect && (P.value = "");
        } else {
          const Q = ne !== !1;
          g.value = Q ? [ce] : [], D.value = Q && !C.value ? ce.title : "", Dt(() => {
            F.value = !1, l.value = !0;
          });
        }
    }
    function ge(ce) {
      o.value = !0, setTimeout(() => {
        s.value = !0;
      });
    }
    function Ve(ce) {
      s.value = !1;
    }
    function Ne(ce) {
      (ce == null || ce === "" && !e.multiple && !C.value) && (g.value = []);
    }
    return tt(o, (ce, ne) => {
      if (!(ce || ce === ne) && (f.value = -1, F.value = !1, P.value)) {
        if (e.multiple) {
          z(Hi(e, P.value));
          return;
        }
        if (!C.value) return;
        g.value.some((Q) => {
          let {
            title: le
          } = Q;
          return le === P.value;
        }) ? D.value = "" : z(Hi(e, P.value));
      }
    }), tt(F, () => {
      if (!e.hideSelected && F.value && g.value.length) {
        const ce = M.value.findIndex((ne) => g.value.some((Q) => (e.valueComparator || Ga)(Q.value, ne.value)));
        _n && window.requestAnimationFrame(() => {
          ce >= 0 && u.value?.scrollToIndex(ce);
        });
      }
    }), tt(() => e.items, (ce, ne) => {
      F.value || o.value && !ne.length && ce.length && (F.value = !0);
    }), Ye(() => {
      const ce = !!(!e.hideNoData || M.value.length || a["prepend-item"] || a["append-item"] || a["no-data"]), ne = g.value.length > 0, Q = ss.filterProps(e);
      return _(ss, Fe({
        ref: i
      }, Q, {
        modelValue: P.value,
        "onUpdate:modelValue": [(le) => P.value = le, Ne],
        focused: o.value,
        "onUpdate:focused": (le) => o.value = le,
        validationValue: g.externalValue,
        counterValue: O.value,
        dirty: ne,
        class: ["v-combobox", {
          "v-combobox--active-menu": F.value,
          "v-combobox--chips": !!e.chips,
          "v-combobox--selection-slot": !!C.value,
          "v-combobox--selecting-index": f.value > -1,
          [`v-combobox--${e.multiple ? "multiple" : "single"}`]: !0
        }, e.class],
        style: e.style,
        readonly: k.isReadonly.value,
        placeholder: ne ? void 0 : e.placeholder,
        "onClick:clear": U,
        "onMousedown:control": q,
        onKeydown: he
      }), {
        ...a,
        default: () => T(Ge, null, [_(Fu, Fe({
          ref: d,
          modelValue: F.value,
          "onUpdate:modelValue": (le) => F.value = le,
          activator: "parent",
          contentClass: "v-combobox__content",
          disabled: V.value,
          eager: e.eager,
          maxHeight: 310,
          openOnClick: !1,
          closeOnContentClick: !1,
          transition: e.transition,
          onAfterEnter: ve,
          onAfterLeave: pe
        }, e.menuProps), {
          default: () => [ce && _(Ru, Fe({
            ref: ue,
            filterable: !0,
            selected: K.value,
            selectStrategy: e.multiple ? "independent" : "single-independent",
            onMousedown: (le) => le.preventDefault(),
            onKeydown: ee,
            onFocusin: ge,
            onFocusout: Ve,
            tabindex: "-1",
            "aria-live": "polite",
            color: e.itemColor ?? e.color
          }, Y, e.listProps), {
            default: () => [a["prepend-item"]?.(), !M.value.length && !e.hideNoData && (a["no-data"]?.() ?? _(Xi, {
              key: "no-data",
              title: r(e.noDataText)
            }, null)), _(Ov, {
              ref: u,
              renderless: !0,
              items: M.value,
              itemKey: "value"
            }, {
              default: (le) => {
                let {
                  item: G,
                  index: Ce,
                  itemRef: Ie
                } = le;
                const ie = Fe(G.props, {
                  ref: Ie,
                  key: G.value,
                  active: Z.value && Ce === 0 ? !0 : void 0,
                  onClick: () => z(G, null)
                });
                return G.type === "divider" ? a.divider?.({
                  props: G.raw,
                  index: Ce
                }) ?? _(fi, Fe(G.props, {
                  key: `divider-${Ce}`
                }), null) : G.type === "subheader" ? a.subheader?.({
                  props: G.raw,
                  index: Ce
                }) ?? _(rd, Fe(G.props, {
                  key: `subheader-${Ce}`
                }), null) : a.item?.({
                  item: G,
                  index: Ce,
                  props: ie
                }) ?? _(Xi, Fe(ie, {
                  role: "option"
                }), {
                  prepend: (we) => {
                    let {
                      isSelected: Ee
                    } = we;
                    return T(Ge, null, [e.multiple && !e.hideSelected ? _(Ao, {
                      key: G.value,
                      modelValue: Ee,
                      ripple: !1,
                      tabindex: "-1"
                    }, null) : void 0, G.props.prependAvatar && _(Oi, {
                      image: G.props.prependAvatar
                    }, null), G.props.prependIcon && _(pn, {
                      icon: G.props.prependIcon
                    }, null)]);
                  },
                  title: () => l.value ? G.title : RP("v-combobox", G.title, x(G)?.title)
                });
              }
            }), a["append-item"]?.()]
          })]
        }), g.value.map((le, G) => {
          function Ce(Ee) {
            Ee.stopPropagation(), Ee.preventDefault(), z(le, !1);
          }
          const Ie = {
            "onClick:close": Ce,
            onKeydown(Ee) {
              Ee.key !== "Enter" && Ee.key !== " " || (Ee.preventDefault(), Ee.stopPropagation(), Ce(Ee));
            },
            onMousedown(Ee) {
              Ee.preventDefault(), Ee.stopPropagation();
            },
            modelValue: !0,
            "onUpdate:modelValue": void 0
          }, ie = A.value ? !!a.chip : !!a.selection, we = ie ? fv(A.value ? a.chip({
            item: le,
            index: G,
            props: Ie
          }) : a.selection({
            item: le,
            index: G
          })) : void 0;
          if (!(ie && !we))
            return T("div", {
              key: le.value,
              class: Ae(["v-combobox__selection", G === f.value && ["v-combobox__selection--selected", b.value]]),
              style: Je(G === f.value ? v.value : {})
            }, [A.value ? a.chip ? _(Ht, {
              key: "chip-defaults",
              defaults: {
                VChip: {
                  closable: e.closableChips,
                  size: "small",
                  text: le.title
                }
              }
            }, {
              default: () => [we]
            }) : _(ad, Fe({
              key: "chip",
              closable: e.closableChips,
              size: "small",
              text: le.title,
              disabled: le.props.disabled
            }, Ie), null) : we ?? T("span", {
              class: "v-combobox__selection-text"
            }, [le.title, e.multiple && G < g.value.length - 1 && T("span", {
              class: "v-combobox__selection-comma"
            }, [ae(",")])])]);
        })]),
        "append-inner": function() {
          for (var le = arguments.length, G = new Array(le), Ce = 0; Ce < le; Ce++)
            G[Ce] = arguments[Ce];
          return T(Ge, null, [a["append-inner"]?.(...G), (!e.hideNoData || e.items.length) && e.menuIcon ? _(pn, {
            class: "v-combobox__menu-icon",
            color: i.value?.fieldIconColor,
            icon: e.menuIcon,
            onMousedown: oe,
            onClick: MT,
            "aria-label": r(H.value),
            title: r(H.value),
            tabindex: "-1"
          }, null) : void 0]);
        }
      });
    }), Za({
      isFocused: o,
      isPristine: l,
      menu: F,
      search: P,
      selectionIndex: f,
      filteredItems: I,
      select: z
    }, i);
  }
}), dj = Be({
  modelValue: null,
  color: String,
  cancelText: {
    type: String,
    default: "$vuetify.confirmEdit.cancel"
  },
  okText: {
    type: String,
    default: "$vuetify.confirmEdit.ok"
  },
  disabled: {
    type: [Boolean, Array],
    default: void 0
  },
  hideActions: Boolean
}, "VConfirmEdit"), fj = We()({
  name: "VConfirmEdit",
  props: dj(),
  emits: {
    cancel: () => !0,
    save: (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = wt(e, "modelValue"), i = be();
    na(() => {
      i.value = structuredClone(Ot(r.value));
    });
    const {
      t: o
    } = kn(), l = W(() => Ga(r.value, i.value));
    function s(w) {
      return typeof e.disabled == "boolean" ? e.disabled : Array.isArray(e.disabled) ? e.disabled.includes(w) : l.value;
    }
    const d = W(() => s("save")), u = W(() => s("cancel"));
    function f() {
      r.value = i.value, n("save", i.value);
    }
    function h() {
      i.value = structuredClone(Ot(r.value)), n("cancel");
    }
    function y(w) {
      return T(Ge, null, [_(Xt, Fe({
        disabled: u.value,
        variant: "text",
        color: e.color,
        onClick: h,
        text: o(e.cancelText)
      }, w), null), _(Xt, Fe({
        disabled: d.value,
        variant: "text",
        color: e.color,
        onClick: f,
        text: o(e.okText)
      }, w), null)]);
    }
    let p = !1;
    return Ye(() => T(Ge, null, [a.default?.({
      model: i,
      save: f,
      cancel: h,
      isPristine: l.value,
      get actions() {
        return p = !0, y;
      }
    }), !e.hideActions && !p && y()])), {
      save: f,
      cancel: h,
      isPristine: l
    };
  }
}), tO = Be({
  expandOnClick: Boolean,
  showExpand: Boolean,
  expanded: {
    type: Array,
    default: () => []
  }
}, "DataTable-expand"), nO = Symbol.for("vuetify:datatable:expanded");
function Mv(e) {
  const t = ye(() => e.expandOnClick), n = wt(e, "expanded", e.expanded, (l) => new Set(l), (l) => [...l.values()]);
  function a(l, s) {
    const d = new Set(n.value);
    s ? d.add(l.value) : d.delete(l.value), n.value = d;
  }
  function r(l) {
    return n.value.has(l.value);
  }
  function i(l) {
    a(l, !r(l));
  }
  const o = {
    expand: a,
    expanded: n,
    expandOnClick: t,
    isExpanded: r,
    toggleExpand: i
  };
  return Ln(nO, o), o;
}
function aO() {
  const e = Gt(nO);
  if (!e) throw new Error("foo");
  return e;
}
const X0 = Be({
  groupBy: {
    type: Array,
    default: () => []
  }
}, "DataTable-group"), rO = Symbol.for("vuetify:data-table-group");
function Z0(e) {
  return {
    groupBy: wt(e, "groupBy")
  };
}
function Lv(e) {
  const {
    disableSort: t,
    groupBy: n,
    sortBy: a
  } = e, r = be(/* @__PURE__ */ new Set()), i = W(() => n.value.map((u) => ({
    ...u,
    order: u.order ?? !1
  })).concat(t?.value ? [] : a.value));
  function o(u) {
    return r.value.has(u.id);
  }
  function l(u) {
    const f = new Set(r.value);
    o(u) ? f.delete(u.id) : f.add(u.id), r.value = f;
  }
  function s(u) {
    function f(h) {
      const y = [];
      for (const p of h.items)
        "type" in p && p.type === "group" ? y.push(...f(p)) : y.push(p);
      return [...new Set(y)];
    }
    return f({
      items: u
    });
  }
  const d = {
    sortByWithGroups: i,
    toggleGroup: l,
    opened: r,
    groupBy: n,
    extractRows: s,
    isGroupOpen: o
  };
  return Ln(rO, d), d;
}
function iO() {
  const e = Gt(rO);
  if (!e) throw new Error("Missing group!");
  return e;
}
function mj(e, t) {
  if (!e.length) return [];
  const n = /* @__PURE__ */ new Map();
  for (const a of e) {
    const r = Xl(a.raw, t);
    n.has(r) || n.set(r, []), n.get(r).push(a);
  }
  return n;
}
function oO(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "root";
  if (!t.length) return [];
  const r = mj(e, t[0]), i = [], o = t.slice(1);
  return r.forEach((l, s) => {
    const d = t[0], u = `${a}_${d}_${s}`;
    i.push({
      depth: n,
      id: u,
      key: d,
      value: s,
      items: o.length ? oO(l, o, n + 1, u) : l,
      type: "group"
    });
  }), i;
}
function sO(e, t) {
  const n = [];
  for (const a of e)
    "type" in a && a.type === "group" ? (a.value != null && n.push(a), (t.has(a.id) || a.value == null) && n.push(...sO(a.items, t))) : n.push(a);
  return n;
}
function Rv(e, t, n) {
  return {
    flatItems: W(() => {
      if (!t.value.length) return e.value;
      const r = oO(e.value, t.value.map((i) => i.key));
      return sO(r, n.value);
    })
  };
}
function Fv(e) {
  let {
    page: t,
    itemsPerPage: n,
    sortBy: a,
    groupBy: r,
    search: i
  } = e;
  const o = ya("VDataTable"), l = () => ({
    page: t.value,
    itemsPerPage: n.value,
    sortBy: a.value,
    groupBy: r.value,
    search: i.value
  });
  let s = null;
  tt(l, (d) => {
    Ga(s, d) || (s && s.search !== d.search && (t.value = 1), o.emit("update:options", d), s = d);
  }, {
    deep: !0,
    immediate: !0
  });
}
const e1 = Be({
  page: {
    type: [Number, String],
    default: 1
  },
  itemsPerPage: {
    type: [Number, String],
    default: 10
  }
}, "DataTable-paginate"), lO = Symbol.for("vuetify:data-table-pagination");
function t1(e) {
  const t = wt(e, "page", void 0, (a) => Number(a ?? 1)), n = wt(e, "itemsPerPage", void 0, (a) => Number(a ?? 10));
  return {
    page: t,
    itemsPerPage: n
  };
}
function n1(e) {
  const {
    page: t,
    itemsPerPage: n,
    itemsLength: a
  } = e, r = W(() => n.value === -1 ? 0 : n.value * (t.value - 1)), i = W(() => n.value === -1 ? a.value : Math.min(a.value, r.value + n.value)), o = W(() => n.value === -1 || a.value === 0 ? 1 : Math.ceil(a.value / n.value));
  tt([t, o], () => {
    t.value > o.value && (t.value = o.value);
  });
  function l(h) {
    n.value = h, t.value = 1;
  }
  function s() {
    t.value = Dn(t.value + 1, 1, o.value);
  }
  function d() {
    t.value = Dn(t.value - 1, 1, o.value);
  }
  function u(h) {
    t.value = Dn(h, 1, o.value);
  }
  const f = {
    page: t,
    itemsPerPage: n,
    startIndex: r,
    stopIndex: i,
    pageCount: o,
    itemsLength: a,
    nextPage: s,
    prevPage: d,
    setPage: u,
    setItemsPerPage: l
  };
  return Ln(lO, f), f;
}
function hj() {
  const e = Gt(lO);
  if (!e) throw new Error("Missing pagination!");
  return e;
}
function cO(e) {
  const t = ya("usePaginatedItems"), {
    items: n,
    startIndex: a,
    stopIndex: r,
    itemsPerPage: i
  } = e, o = W(() => i.value <= 0 ? n.value : n.value.slice(a.value, r.value));
  return tt(o, (l) => {
    t.emit("update:currentItems", l);
  }, {
    immediate: !0
  }), {
    paginatedItems: o
  };
}
const _j = {
  showSelectAll: !1,
  allSelected: () => [],
  select: (e) => {
    let {
      items: t,
      value: n
    } = e;
    return new Set(n ? [t[0]?.value] : []);
  },
  selectAll: (e) => {
    let {
      selected: t
    } = e;
    return t;
  }
}, uO = {
  showSelectAll: !0,
  allSelected: (e) => {
    let {
      currentPage: t
    } = e;
    return t;
  },
  select: (e) => {
    let {
      items: t,
      value: n,
      selected: a
    } = e;
    for (const r of t)
      n ? a.add(r.value) : a.delete(r.value);
    return a;
  },
  selectAll: (e) => {
    let {
      value: t,
      currentPage: n,
      selected: a
    } = e;
    return uO.select({
      items: n,
      value: t,
      selected: a
    });
  }
}, dO = {
  showSelectAll: !0,
  allSelected: (e) => {
    let {
      allItems: t
    } = e;
    return t;
  },
  select: (e) => {
    let {
      items: t,
      value: n,
      selected: a
    } = e;
    for (const r of t)
      n ? a.add(r.value) : a.delete(r.value);
    return a;
  },
  selectAll: (e) => {
    let {
      value: t,
      allItems: n,
      selected: a
    } = e;
    return dO.select({
      items: n,
      value: t,
      selected: a
    });
  }
}, fO = Be({
  showSelect: Boolean,
  selectStrategy: {
    type: [String, Object],
    default: "page"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  valueComparator: {
    type: Function,
    default: Ga
  }
}, "DataTable-select"), mO = Symbol.for("vuetify:data-table-selection");
function Nv(e, t) {
  let {
    allItems: n,
    currentPage: a
  } = t;
  const r = wt(e, "modelValue", e.modelValue, (g) => new Set(ta(g).map((k) => n.value.find((A) => e.valueComparator(k, A.value))?.value ?? k)), (g) => [...g.values()]), i = W(() => n.value.filter((g) => g.selectable)), o = W(() => a.value.filter((g) => g.selectable)), l = W(() => {
    if (typeof e.selectStrategy == "object") return e.selectStrategy;
    switch (e.selectStrategy) {
      case "single":
        return _j;
      case "all":
        return dO;
      case "page":
      default:
        return uO;
    }
  }), s = rt(null);
  function d(g) {
    return ta(g).every((k) => r.value.has(k.value));
  }
  function u(g) {
    return ta(g).some((k) => r.value.has(k.value));
  }
  function f(g, k) {
    const A = l.value.select({
      items: g,
      value: k,
      selected: new Set(r.value)
    });
    r.value = A;
  }
  function h(g, k, A) {
    const C = [];
    if (k = k ?? a.value.findIndex((D) => D.value === g.value), e.selectStrategy !== "single" && A?.shiftKey && s.value !== null) {
      const [D, P] = [s.value, k].sort((O, I) => O - I);
      C.push(...a.value.slice(D, P + 1).filter((O) => O.selectable));
    } else
      C.push(g), s.value = k;
    f(C, !d([g]));
  }
  function y(g) {
    const k = l.value.selectAll({
      value: g,
      allItems: i.value,
      currentPage: o.value,
      selected: new Set(r.value)
    });
    r.value = k;
  }
  const p = W(() => r.value.size > 0), w = W(() => {
    const g = l.value.allSelected({
      allItems: i.value,
      currentPage: o.value
    });
    return !!g.length && d(g);
  }), b = ye(() => l.value.showSelectAll), v = {
    toggleSelect: h,
    select: f,
    selectAll: y,
    isSelected: d,
    isSomeSelected: u,
    someSelected: p,
    allSelected: w,
    showSelectAll: b,
    lastSelectedIndex: s,
    selectStrategy: l
  };
  return Ln(mO, v), v;
}
function Uv() {
  const e = Gt(mO);
  if (!e) throw new Error("Missing selection!");
  return e;
}
const hO = Be({
  sortBy: {
    type: Array,
    default: () => []
  },
  customKeySort: Object,
  multiSort: Boolean,
  mustSort: Boolean
}, "DataTable-sort"), _O = Symbol.for("vuetify:data-table-sort");
function $v(e) {
  const t = wt(e, "sortBy"), n = ye(() => e.mustSort), a = ye(() => e.multiSort);
  return {
    sortBy: t,
    mustSort: n,
    multiSort: a
  };
}
function qv(e) {
  const {
    sortBy: t,
    mustSort: n,
    multiSort: a,
    page: r
  } = e, i = (s) => {
    if (s.key == null) return;
    let d = t.value.map((f) => ({
      ...f
    })) ?? [];
    const u = d.find((f) => f.key === s.key);
    u ? u.order === "desc" ? n.value && d.length === 1 ? u.order = "asc" : d = d.filter((f) => f.key !== s.key) : u.order = "desc" : a.value ? d.push({
      key: s.key,
      order: "asc"
    }) : d = [{
      key: s.key,
      order: "asc"
    }], t.value = d, r && (r.value = 1);
  };
  function o(s) {
    return !!t.value.find((d) => d.key === s.key);
  }
  const l = {
    sortBy: t,
    toggleSort: i,
    isSorted: o
  };
  return Ln(_O, l), l;
}
function vO() {
  const e = Gt(_O);
  if (!e) throw new Error("Missing sort!");
  return e;
}
function a1(e, t, n, a) {
  const r = kn();
  return {
    sortedItems: W(() => n.value.length ? vj(t.value, n.value, r.current.value, {
      transform: a?.transform,
      sortFunctions: {
        ...e.customKeySort,
        ...a?.sortFunctions?.value
      },
      sortRawFunctions: a?.sortRawFunctions?.value
    }) : t.value)
  };
}
function vj(e, t, n, a) {
  const r = new Intl.Collator(n, {
    sensitivity: "accent",
    usage: "sort"
  });
  return e.map((o) => [o, a?.transform ? a.transform(o) : o]).sort((o, l) => {
    for (let s = 0; s < t.length; s++) {
      let d = !1;
      const u = t[s].key, f = t[s].order ?? "asc";
      if (f === !1) continue;
      let h = Xl(o[1], u), y = Xl(l[1], u), p = o[0].raw, w = l[0].raw;
      if (f === "desc" && ([h, y] = [y, h], [p, w] = [w, p]), a?.sortRawFunctions?.[u]) {
        const b = a.sortRawFunctions[u](p, w);
        if (b == null) continue;
        if (d = !0, b) return b;
      }
      if (a?.sortFunctions?.[u]) {
        const b = a.sortFunctions[u](h, y);
        if (b == null) continue;
        if (d = !0, b) return b;
      }
      if (!d && (h instanceof Date && y instanceof Date && (h = h.getTime(), y = y.getTime()), [h, y] = [h, y].map((b) => b != null ? b.toString().toLocaleLowerCase() : b), h !== y))
        return Th(h) && Th(y) ? 0 : Th(h) ? -1 : Th(y) ? 1 : !isNaN(h) && !isNaN(y) ? Number(h) - Number(y) : r.compare(h, y);
    }
    return 0;
  }).map((o) => {
    let [l] = o;
    return l;
  });
}
const pj = Be({
  items: {
    type: Array,
    default: () => []
  },
  itemValue: {
    type: [String, Array, Function],
    default: "id"
  },
  itemSelectable: {
    type: [String, Array, Function],
    default: null
  },
  returnObject: Boolean
}, "DataIterator-items");
function gj(e, t) {
  const n = e.returnObject ? t : Ca(t, e.itemValue), a = Ca(t, e.itemSelectable, !0);
  return {
    type: "item",
    value: n,
    selectable: a,
    raw: t
  };
}
function yj(e, t) {
  const n = [];
  for (const a of t)
    n.push(gj(e, a));
  return n;
}
function bj(e) {
  return {
    items: W(() => yj(e, e.items))
  };
}
const wj = Be({
  search: String,
  loading: Boolean,
  ...pt(),
  ...pj(),
  ...fO(),
  ...hO(),
  ...e1({
    itemsPerPage: 5
  }),
  ...tO(),
  ...X0(),
  ...id(),
  ...$t(),
  ...eo({
    transition: {
      component: Df,
      hideOnLeave: !0
    }
  })
}, "VDataIterator"), kj = We()({
  name: "VDataIterator",
  props: wj(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:expanded": (e) => !0,
    "update:currentItems": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "groupBy"), r = ye(() => e.search), {
      items: i
    } = bj(e), {
      filteredItems: o
    } = od(e, i, r, {
      transform: (q) => q.raw
    }), {
      sortBy: l,
      multiSort: s,
      mustSort: d
    } = $v(e), {
      page: u,
      itemsPerPage: f
    } = t1(e), {
      toggleSort: h
    } = qv({
      sortBy: l,
      multiSort: s,
      mustSort: d,
      page: u
    }), {
      sortByWithGroups: y,
      opened: p,
      extractRows: w,
      isGroupOpen: b,
      toggleGroup: v
    } = Lv({
      groupBy: a,
      sortBy: l
    }), {
      sortedItems: g
    } = a1(e, o, y, {
      transform: (q) => q.raw
    }), {
      flatItems: k
    } = Rv(g, a, p), A = ye(() => k.value.length), {
      startIndex: C,
      stopIndex: D,
      pageCount: P,
      prevPage: O,
      nextPage: I,
      setItemsPerPage: x,
      setPage: M
    } = n1({
      page: u,
      itemsPerPage: f,
      itemsLength: A
    }), {
      paginatedItems: V
    } = cO({
      items: k,
      startIndex: C,
      stopIndex: D,
      itemsPerPage: f
    }), B = W(() => w(V.value)), {
      isSelected: F,
      select: H,
      selectAll: K,
      toggleSelect: Z
    } = Nv(e, {
      allItems: i,
      currentPage: B
    }), {
      isExpanded: ue,
      toggleExpand: Y
    } = Mv(e);
    Fv({
      page: u,
      itemsPerPage: f,
      sortBy: l,
      groupBy: a,
      search: r
    });
    const U = W(() => ({
      page: u.value,
      itemsPerPage: f.value,
      sortBy: l.value,
      pageCount: P.value,
      toggleSort: h,
      prevPage: O,
      nextPage: I,
      setPage: M,
      setItemsPerPage: x,
      isSelected: F,
      select: H,
      selectAll: K,
      toggleSelect: Z,
      isExpanded: ue,
      toggleExpand: Y,
      isGroupOpen: b,
      toggleGroup: v,
      items: B.value,
      groupedItems: V.value
    }));
    return Ye(() => _(e.tag, {
      class: Ae(["v-data-iterator", {
        "v-data-iterator--loading": e.loading
      }, e.class]),
      style: Je(e.style)
    }, {
      default: () => [n.header?.(U.value), _(Cr, {
        transition: e.transition
      }, {
        default: () => [e.loading ? _(rm, {
          key: "loader",
          name: "v-data-iterator",
          active: !0
        }, {
          default: (q) => n.loader?.(q)
        }) : T("div", {
          key: "items"
        }, [V.value.length ? n.default?.(U.value) : n["no-data"]?.()])]
      }), n.footer?.(U.value)]
    })), {};
  }
});
function Sj() {
  const e = be([]);
  kw(() => e.value = []);
  function t(n, a) {
    e.value[a] = n;
  }
  return {
    refs: e,
    updateRef: t
  };
}
const Cj = Be({
  activeColor: String,
  start: {
    type: [Number, String],
    default: 1
  },
  modelValue: {
    type: Number,
    default: (e) => e.start
  },
  disabled: Boolean,
  length: {
    type: [Number, String],
    default: 1,
    validator: (e) => e % 1 === 0
  },
  totalVisible: [Number, String],
  firstIcon: {
    type: St,
    default: "$first"
  },
  prevIcon: {
    type: St,
    default: "$prev"
  },
  nextIcon: {
    type: St,
    default: "$next"
  },
  lastIcon: {
    type: St,
    default: "$last"
  },
  ariaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.root"
  },
  pageAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.page"
  },
  currentPageAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.currentPage"
  },
  firstAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.first"
  },
  previousAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.previous"
  },
  nextAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.next"
  },
  lastAriaLabel: {
    type: String,
    default: "$vuetify.pagination.ariaLabel.last"
  },
  ellipsis: {
    type: String,
    default: "..."
  },
  showFirstLastPage: Boolean,
  ...Hr(),
  ...pt(),
  ...Wa(),
  ...Ua(),
  ...qn(),
  ...Oo(),
  ...$t({
    tag: "nav"
  }),
  ...rn(),
  ...Di({
    variant: "text"
  })
}, "VPagination"), Hb = We()({
  name: "VPagination",
  props: Cj(),
  emits: {
    "update:modelValue": (e) => !0,
    first: (e) => !0,
    prev: (e) => !0,
    next: (e) => !0,
    last: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = wt(e, "modelValue"), {
      t: i,
      n: o
    } = kn(), {
      isRtl: l
    } = Na(), {
      themeClasses: s
    } = gn(e), {
      width: d
    } = pi(), u = rt(-1);
    aa(void 0, {
      scoped: !0
    });
    const {
      resizeRef: f
    } = Gi((O) => {
      if (!O.length) return;
      const {
        target: I,
        contentRect: x
      } = O[0], M = I.querySelector(".v-pagination__list > *");
      if (!M) return;
      const V = x.width, B = M.offsetWidth + parseFloat(getComputedStyle(M).marginRight) * 2;
      u.value = w(V, B);
    }), h = W(() => parseInt(e.length, 10)), y = W(() => parseInt(e.start, 10)), p = W(() => e.totalVisible != null ? parseInt(e.totalVisible, 10) : u.value >= 0 ? u.value : w(d.value, 58));
    function w(O, I) {
      const x = e.showFirstLastPage ? 5 : 3;
      return Math.max(0, Math.floor(
        // Round to two decimal places to avoid floating point errors
        Number(((O - I * x) / I).toFixed(2))
      ));
    }
    const b = W(() => {
      if (h.value <= 0 || isNaN(h.value) || h.value > Number.MAX_SAFE_INTEGER) return [];
      if (p.value <= 0) return [];
      if (p.value === 1) return [r.value];
      if (h.value <= p.value)
        return ci(h.value, y.value);
      const O = p.value % 2 === 0, I = O ? p.value / 2 : Math.floor(p.value / 2), x = O ? I : I + 1, M = h.value - I;
      if (x - r.value >= 0)
        return [...ci(Math.max(1, p.value - 1), y.value), e.ellipsis, h.value];
      if (r.value - M >= (O ? 1 : 0)) {
        const V = p.value - 1, B = h.value - V + y.value;
        return [y.value, e.ellipsis, ...ci(V, B)];
      } else {
        const V = Math.max(1, p.value - 2), B = V === 1 ? r.value : r.value - Math.ceil(V / 2) + y.value;
        return [y.value, e.ellipsis, ...ci(V, B), e.ellipsis, h.value];
      }
    });
    function v(O, I, x) {
      O.preventDefault(), r.value = I, x && a(x, I);
    }
    const {
      refs: g,
      updateRef: k
    } = Sj();
    aa({
      VPaginationBtn: {
        color: ye(() => e.color),
        border: ye(() => e.border),
        density: ye(() => e.density),
        size: ye(() => e.size),
        variant: ye(() => e.variant),
        rounded: ye(() => e.rounded),
        elevation: ye(() => e.elevation)
      }
    });
    const A = W(() => b.value.map((O, I) => {
      const x = (M) => k(M, I);
      if (typeof O == "string")
        return {
          isActive: !1,
          key: `ellipsis-${I}`,
          page: O,
          props: {
            ref: x,
            ellipsis: !0,
            icon: !0,
            disabled: !0
          }
        };
      {
        const M = O === r.value;
        return {
          isActive: M,
          key: O,
          page: o(O),
          props: {
            ref: x,
            ellipsis: !1,
            icon: !0,
            disabled: !!e.disabled || Number(e.length) < 2,
            color: M ? e.activeColor : e.color,
            "aria-current": M,
            "aria-label": i(M ? e.currentPageAriaLabel : e.pageAriaLabel, O),
            onClick: (V) => v(V, O)
          }
        };
      }
    })), C = W(() => {
      const O = !!e.disabled || r.value <= y.value, I = !!e.disabled || r.value >= y.value + h.value - 1;
      return {
        first: e.showFirstLastPage ? {
          icon: l.value ? e.lastIcon : e.firstIcon,
          onClick: (x) => v(x, y.value, "first"),
          disabled: O,
          "aria-label": i(e.firstAriaLabel),
          "aria-disabled": O
        } : void 0,
        prev: {
          icon: l.value ? e.nextIcon : e.prevIcon,
          onClick: (x) => v(x, r.value - 1, "prev"),
          disabled: O,
          "aria-label": i(e.previousAriaLabel),
          "aria-disabled": O
        },
        next: {
          icon: l.value ? e.prevIcon : e.nextIcon,
          onClick: (x) => v(x, r.value + 1, "next"),
          disabled: I,
          "aria-label": i(e.nextAriaLabel),
          "aria-disabled": I
        },
        last: e.showFirstLastPage ? {
          icon: l.value ? e.firstIcon : e.lastIcon,
          onClick: (x) => v(x, y.value + h.value - 1, "last"),
          disabled: I,
          "aria-label": i(e.lastAriaLabel),
          "aria-disabled": I
        } : void 0
      };
    });
    function D() {
      const O = r.value - y.value;
      g.value[O]?.$el.focus();
    }
    function P(O) {
      O.key === Hy.left && !e.disabled && r.value > Number(e.start) ? (r.value = r.value - 1, Dt(D)) : O.key === Hy.right && !e.disabled && r.value < y.value + h.value - 1 && (r.value = r.value + 1, Dt(D));
    }
    return Ye(() => _(e.tag, {
      ref: f,
      class: Ae(["v-pagination", s.value, e.class]),
      style: Je(e.style),
      role: "navigation",
      "aria-label": i(e.ariaLabel),
      onKeydown: P,
      "data-test": "v-pagination-root"
    }, {
      default: () => [T("ul", {
        class: "v-pagination__list"
      }, [e.showFirstLastPage && T("li", {
        key: "first",
        class: "v-pagination__first",
        "data-test": "v-pagination-first"
      }, [n.first ? n.first(C.value.first) : _(Xt, Fe({
        _as: "VPaginationBtn"
      }, C.value.first), null)]), T("li", {
        key: "prev",
        class: "v-pagination__prev",
        "data-test": "v-pagination-prev"
      }, [n.prev ? n.prev(C.value.prev) : _(Xt, Fe({
        _as: "VPaginationBtn"
      }, C.value.prev), null)]), A.value.map((O, I) => T("li", {
        key: O.key,
        class: Ae(["v-pagination__item", {
          "v-pagination__item--is-active": O.isActive
        }]),
        "data-test": "v-pagination-item"
      }, [n.item ? n.item(O) : _(Xt, Fe({
        _as: "VPaginationBtn"
      }, O.props), {
        default: () => [O.page]
      })])), T("li", {
        key: "next",
        class: "v-pagination__next",
        "data-test": "v-pagination-next"
      }, [n.next ? n.next(C.value.next) : _(Xt, Fe({
        _as: "VPaginationBtn"
      }, C.value.next), null)]), e.showFirstLastPage && T("li", {
        key: "last",
        class: "v-pagination__last",
        "data-test": "v-pagination-last"
      }, [n.last ? n.last(C.value.last) : _(Xt, Fe({
        _as: "VPaginationBtn"
      }, C.value.last), null)])])]
    })), {};
  }
}), r1 = Be({
  prevIcon: {
    type: St,
    default: "$prev"
  },
  nextIcon: {
    type: St,
    default: "$next"
  },
  firstIcon: {
    type: St,
    default: "$first"
  },
  lastIcon: {
    type: St,
    default: "$last"
  },
  itemsPerPageText: {
    type: String,
    default: "$vuetify.dataFooter.itemsPerPageText"
  },
  pageText: {
    type: String,
    default: "$vuetify.dataFooter.pageText"
  },
  firstPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.firstPage"
  },
  prevPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.prevPage"
  },
  nextPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.nextPage"
  },
  lastPageLabel: {
    type: String,
    default: "$vuetify.dataFooter.lastPage"
  },
  itemsPerPageOptions: {
    type: Array,
    default: () => [{
      value: 10,
      title: "10"
    }, {
      value: 25,
      title: "25"
    }, {
      value: 50,
      title: "50"
    }, {
      value: 100,
      title: "100"
    }, {
      value: -1,
      title: "$vuetify.dataFooter.itemsPerPageAll"
    }]
  },
  showCurrentPage: Boolean
}, "VDataTableFooter"), Uf = We()({
  name: "VDataTableFooter",
  props: r1(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = kn(), {
      page: r,
      pageCount: i,
      startIndex: o,
      stopIndex: l,
      itemsLength: s,
      itemsPerPage: d,
      setItemsPerPage: u
    } = hj(), f = W(() => e.itemsPerPageOptions.map((h) => typeof h == "number" ? {
      value: h,
      title: h === -1 ? a("$vuetify.dataFooter.itemsPerPageAll") : String(h)
    } : {
      ...h,
      title: isNaN(Number(h.title)) ? a(h.title) : h.title
    }));
    return Ye(() => {
      const h = Hb.filterProps(e);
      return T("div", {
        class: "v-data-table-footer"
      }, [n.prepend?.(), T("div", {
        class: "v-data-table-footer__items-per-page"
      }, [T("span", {
        "aria-label": a(e.itemsPerPageText)
      }, [a(e.itemsPerPageText)]), _(G0, {
        items: f.value,
        modelValue: d.value,
        "onUpdate:modelValue": (y) => u(Number(y)),
        density: "compact",
        variant: "outlined",
        hideDetails: !0
      }, null)]), T("div", {
        class: "v-data-table-footer__info"
      }, [T("div", null, [a(e.pageText, s.value ? o.value + 1 : 0, l.value, s.value)])]), T("div", {
        class: "v-data-table-footer__pagination"
      }, [_(Hb, Fe({
        modelValue: r.value,
        "onUpdate:modelValue": (y) => r.value = y,
        density: "comfortable",
        firstAriaLabel: e.firstPageLabel,
        lastAriaLabel: e.lastPageLabel,
        length: i.value,
        nextAriaLabel: e.nextPageLabel,
        previousAriaLabel: e.prevPageLabel,
        rounded: !0,
        showFirstLastPage: !0,
        totalVisible: e.showCurrentPage ? 1 : 0,
        variant: "plain"
      }, h), null)])]);
    }), {};
  }
}), Y_ = _4({
  align: {
    type: String,
    default: "start"
  },
  fixed: {
    type: [Boolean, String],
    default: !1
  },
  fixedOffset: [Number, String],
  fixedEndOffset: [Number, String],
  height: [Number, String],
  lastFixed: Boolean,
  firstFixedEnd: Boolean,
  noPadding: Boolean,
  tag: String,
  width: [Number, String],
  maxWidth: [Number, String],
  nowrap: Boolean
}, (e, t) => {
  let {
    slots: n
  } = t;
  const a = e.tag ?? "td", r = typeof e.fixed == "string" ? e.fixed : e.fixed ? "start" : "none";
  return _(a, {
    class: Ae(["v-data-table__td", {
      "v-data-table-column--fixed": r === "start",
      "v-data-table-column--fixed-end": r === "end",
      "v-data-table-column--last-fixed": e.lastFixed,
      "v-data-table-column--first-fixed-end": e.firstFixedEnd,
      "v-data-table-column--no-padding": e.noPadding,
      "v-data-table-column--nowrap": e.nowrap
    }, `v-data-table-column--align-${e.align}`]),
    style: {
      height: ht(e.height),
      width: ht(e.width),
      maxWidth: ht(e.maxWidth),
      left: r === "start" ? ht(e.fixedOffset || null) : void 0,
      right: r === "end" ? ht(e.fixedEndOffset || null) : void 0
    }
  }, {
    default: () => [n.default?.()]
  });
}), Aj = Be({
  headers: Array
}, "DataTable-header"), pO = Symbol.for("vuetify:data-table-headers"), gO = {
  title: "",
  sortable: !1
}, xj = {
  ...gO,
  width: 48
};
function Tj() {
  const t = (arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : []).map((n) => ({
    element: n,
    priority: 0
  }));
  return {
    enqueue: (n, a) => {
      let r = !1;
      for (let i = 0; i < t.length; i++)
        if (t[i].priority > a) {
          t.splice(i, 0, {
            element: n,
            priority: a
          }), r = !0;
          break;
        }
      r || t.push({
        element: n,
        priority: a
      });
    },
    size: () => t.length,
    count: () => {
      let n = 0;
      if (!t.length) return 0;
      const a = Math.floor(t[0].priority);
      for (let r = 0; r < t.length; r++)
        Math.floor(t[r].priority) === a && (n += 1);
      return n;
    },
    dequeue: () => t.shift()
  };
}
function zb(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  if (!e.children)
    t.push(e);
  else
    for (const n of e.children)
      zb(n, t);
  return t;
}
function yO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : /* @__PURE__ */ new Set();
  for (const n of e)
    n.key && t.add(n.key), n.children && yO(n.children, t);
  return t;
}
function Ij(e) {
  if (e.key) {
    if (e.key === "data-table-group") return gO;
    if (["data-table-expand", "data-table-select"].includes(e.key)) return xj;
  }
}
function i1(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return e.children ? Math.max(t, ...e.children.map((n) => i1(n, t + 1))) : t;
}
function Ej(e) {
  let t = !1;
  function n(i, o) {
    let l = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "none";
    if (i)
      if (l !== "none" && (i.fixed = l), i.fixed === !0 && (i.fixed = "start"), i.fixed === o)
        if (i.children)
          if (o === "start")
            for (let s = i.children.length - 1; s >= 0; s--)
              n(i.children[s], o, o);
          else
            for (let s = 0; s < i.children.length; s++)
              n(i.children[s], o, o);
        else
          !t && o === "start" ? i.lastFixed = !0 : !t && o === "end" ? i.firstFixedEnd = !0 : isNaN(Number(i.width)) ? (`${i.key}`, void 0) : i.minWidth = Math.max(Number(i.width) || 0, Number(i.minWidth) || 0), t = !0;
      else if (i.children)
        if (o === "start")
          for (let s = i.children.length - 1; s >= 0; s--)
            n(i.children[s], o);
        else
          for (let s = 0; s < i.children.length; s++)
            n(i.children[s], o);
      else
        t = !1;
  }
  for (let i = e.length - 1; i >= 0; i--)
    n(e[i], "start");
  for (let i = 0; i < e.length; i++)
    n(e[i], "end");
  let a = 0;
  for (let i = 0; i < e.length; i++)
    a = bO(e[i], a);
  let r = 0;
  for (let i = e.length - 1; i >= 0; i--)
    r = wO(e[i], r);
}
function bO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  if (!e) return t;
  if (e.children) {
    e.fixedOffset = t;
    for (const n of e.children)
      t = bO(n, t);
  } else e.fixed && e.fixed !== "end" && (e.fixedOffset = t, t += parseFloat(e.width || "0") || 0);
  return t;
}
function wO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  if (!e) return t;
  if (e.children) {
    e.fixedEndOffset = t;
    for (const n of e.children)
      t = wO(n, t);
  } else e.fixed === "end" && (e.fixedEndOffset = t, t += parseFloat(e.width || "0") || 0);
  return t;
}
function Pj(e, t) {
  const n = [];
  let a = 0;
  const r = Tj(e);
  for (; r.size() > 0; ) {
    let o = r.count();
    const l = [];
    let s = 1;
    for (; o > 0; ) {
      const {
        element: d,
        priority: u
      } = r.dequeue(), f = t - a - i1(d);
      if (l.push({
        ...d,
        rowspan: f ?? 1,
        colspan: d.children ? zb(d).length : 1
      }), d.children)
        for (const h of d.children) {
          const y = u % 1 + s / Math.pow(10, a + 2);
          r.enqueue(h, a + f + y);
        }
      s += 1, o -= 1;
    }
    a += 1, n.push(l);
  }
  return {
    columns: e.map((o) => zb(o)).flat(),
    headers: n
  };
}
function kO(e) {
  const t = [];
  for (const n of e) {
    const a = {
      ...Ij(n),
      ...n
    }, r = a.key ?? (typeof a.value == "string" ? a.value : null), i = a.value ?? r ?? null, o = {
      ...a,
      key: r,
      value: i,
      sortable: a.sortable ?? (a.key != null || !!a.sort),
      children: a.children ? kO(a.children) : void 0
    };
    t.push(o);
  }
  return t;
}
function o1(e, t) {
  const n = be([]), a = be([]), r = be({}), i = be({}), o = be({});
  na(() => {
    const d = (e.headers || Object.keys(e.items[0] ?? {}).map((w) => ({
      key: w,
      title: To(w)
    }))).slice(), u = yO(d);
    t?.groupBy?.value.length && !u.has("data-table-group") && d.unshift({
      key: "data-table-group",
      title: "Group"
    }), t?.showSelect?.value && !u.has("data-table-select") && d.unshift({
      key: "data-table-select"
    }), t?.showExpand?.value && !u.has("data-table-expand") && d.push({
      key: "data-table-expand"
    });
    const f = kO(d);
    Ej(f);
    const h = Math.max(...f.map((w) => i1(w))) + 1, y = Pj(f, h);
    n.value = y.headers, a.value = y.columns;
    const p = y.headers.flat(1);
    for (const w of p)
      w.key && (w.sortable && (w.sort && (r.value[w.key] = w.sort), w.sortRaw && (i.value[w.key] = w.sortRaw)), w.filter && (o.value[w.key] = w.filter));
  });
  const l = {
    headers: n,
    columns: a,
    sortFunctions: r,
    sortRawFunctions: i,
    filterFunctions: o
  };
  return Ln(pO, l), l;
}
function Hv() {
  const e = Gt(pO);
  if (!e) throw new Error("Missing headers!");
  return e;
}
const SO = Be({
  color: String,
  disableSort: Boolean,
  fixedHeader: Boolean,
  multiSort: Boolean,
  sortAscIcon: {
    type: St,
    default: "$sortAsc"
  },
  sortDescIcon: {
    type: St,
    default: "$sortDesc"
  },
  headerProps: {
    type: Object
  },
  /** @deprecated */
  sticky: Boolean,
  ...dc(),
  ...Tv()
}, "VDataTableHeaders"), sc = We()({
  name: "VDataTableHeaders",
  props: SO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = kn(), {
      toggleSort: r,
      sortBy: i,
      isSorted: o
    } = vO(), {
      someSelected: l,
      allSelected: s,
      selectAll: d,
      showSelectAll: u
    } = Uv(), {
      columns: f,
      headers: h
    } = Hv(), {
      loaderClasses: y
    } = am(e);
    function p(I, x) {
      if (!(e.sticky || e.fixedHeader) && !I.fixed) return;
      const M = typeof I.fixed == "string" ? I.fixed : I.fixed ? "start" : "none";
      return {
        position: "sticky",
        left: M === "start" ? ht(I.fixedOffset) : void 0,
        right: M === "end" ? ht(I.fixedEndOffset) : void 0,
        top: e.sticky || e.fixedHeader ? `calc(var(--v-table-header-height) * ${x})` : void 0
      };
    }
    function w(I, x) {
      I.key === "Enter" && !e.disableSort && r(x);
    }
    function b(I) {
      const x = i.value.find((M) => M.key === I.key);
      return x ? x.order === "asc" ? e.sortAscIcon : e.sortDescIcon : e.sortAscIcon;
    }
    const {
      backgroundColorClasses: v,
      backgroundColorStyles: g
    } = bn(() => e.color), {
      displayClasses: k,
      mobile: A
    } = pi(e), C = W(() => ({
      headers: h.value,
      columns: f.value,
      toggleSort: r,
      isSorted: o,
      sortBy: i.value,
      someSelected: l.value,
      allSelected: s.value,
      selectAll: d,
      getSortIcon: b
    })), D = W(() => ["v-data-table__th", {
      "v-data-table__th--sticky": e.sticky || e.fixedHeader
    }, k.value, y.value]), P = (I) => {
      let {
        column: x,
        x: M,
        y: V
      } = I;
      const B = x.key === "data-table-select" || x.key === "data-table-expand", F = Fe(e.headerProps ?? {}, x.headerProps ?? {});
      return _(Y_, Fe({
        tag: "th",
        align: x.align,
        class: [{
          "v-data-table__th--sortable": x.sortable && !e.disableSort,
          "v-data-table__th--sorted": o(x),
          "v-data-table__th--fixed": x.fixed
        }, ...D.value],
        style: {
          width: ht(x.width),
          minWidth: ht(x.minWidth),
          maxWidth: ht(x.maxWidth),
          ...p(x, V)
        },
        colspan: x.colspan,
        rowspan: x.rowspan,
        fixed: x.fixed,
        nowrap: x.nowrap,
        lastFixed: x.lastFixed,
        firstFixedEnd: x.firstFixedEnd,
        noPadding: B,
        tabindex: x.sortable ? 0 : void 0,
        onClick: x.sortable ? () => r(x) : void 0,
        onKeydown: x.sortable ? (H) => w(H, x) : void 0
      }, F), {
        default: () => {
          const H = `header.${x.key}`, K = {
            column: x,
            selectAll: d,
            isSorted: o,
            toggleSort: r,
            sortBy: i.value,
            someSelected: l.value,
            allSelected: s.value,
            getSortIcon: b
          };
          return n[H] ? n[H](K) : x.key === "data-table-select" ? n["header.data-table-select"]?.(K) ?? (u.value && _(Ao, {
            modelValue: s.value,
            indeterminate: l.value && !s.value,
            "onUpdate:modelValue": d
          }, null)) : T("div", {
            class: "v-data-table-header__content"
          }, [T("span", null, [x.title]), x.sortable && !e.disableSort && _(pn, {
            key: "icon",
            class: "v-data-table-header__sort-icon",
            icon: b(x)
          }, null), e.multiSort && o(x) && T("div", {
            key: "badge",
            class: Ae(["v-data-table-header__sort-badge", ...v.value]),
            style: Je(g.value)
          }, [i.value.findIndex((Z) => Z.key === x.key) + 1])]);
        }
      });
    }, O = () => {
      const I = W(() => f.value.filter((M) => M?.sortable && !e.disableSort)), x = W(() => {
        if (f.value.find((V) => V.key === "data-table-select") != null)
          return s.value ? "$checkboxOn" : l.value ? "$checkboxIndeterminate" : "$checkboxOff";
      });
      return _(Y_, Fe({
        tag: "th",
        class: [...D.value],
        colspan: h.value.length + 1
      }, e.headerProps), {
        default: () => [T("div", {
          class: "v-data-table-header__content"
        }, [_(G0, {
          chips: !0,
          class: "v-data-table__td-sort-select",
          clearable: !0,
          density: "default",
          items: I.value,
          label: a("$vuetify.dataTable.sortBy"),
          multiple: e.multiSort,
          variant: "underlined",
          "onClick:clear": () => i.value = [],
          appendIcon: x.value,
          "onClick:append": () => d(!s.value)
        }, {
          chip: (M) => _(ad, {
            onClick: M.item.raw?.sortable ? () => r(M.item.raw) : void 0,
            onMousedown: (V) => {
              V.preventDefault(), V.stopPropagation();
            }
          }, {
            default: () => [M.item.title, _(pn, {
              class: Ae(["v-data-table__td-sort-icon", o(M.item.raw) && "v-data-table__td-sort-icon-active"]),
              icon: b(M.item.raw),
              size: "small"
            }, null)]
          })
        })])]
      });
    };
    Ye(() => A.value ? T("tr", null, [_(O, null, null)]) : T(Ge, null, [n.headers ? n.headers(C.value) : h.value.map((I, x) => T("tr", null, [I.map((M, V) => _(P, {
      column: M,
      x: V,
      y: x
    }, null))])), e.loading && T("tr", {
      class: "v-data-table-progress"
    }, [T("th", {
      colspan: f.value.length
    }, [_(rm, {
      name: "v-data-table-progress",
      absolute: !0,
      active: !0,
      color: typeof e.loading == "boolean" ? void 0 : e.loading,
      indeterminate: !0
    }, {
      default: n.loader
    })])])]));
  }
}), Oj = Be({
  item: {
    type: Object,
    required: !0
  }
}, "VDataTableGroupHeaderRow"), Dj = We()({
  name: "VDataTableGroupHeaderRow",
  props: Oj(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isGroupOpen: a,
      toggleGroup: r,
      extractRows: i
    } = iO(), {
      isSelected: o,
      isSomeSelected: l,
      select: s
    } = Uv(), {
      columns: d
    } = Hv(), u = W(() => i([e.item]));
    return () => T("tr", {
      class: "v-data-table-group-header-row",
      style: {
        "--v-data-table-group-header-row-depth": e.item.depth
      }
    }, [d.value.map((f) => {
      if (f.key === "data-table-group") {
        const h = a(e.item) ? "$expand" : "$next", y = () => r(e.item);
        return n["data-table-group"]?.({
          item: e.item,
          count: u.value.length,
          props: {
            icon: h,
            onClick: y
          }
        }) ?? _(Y_, {
          class: "v-data-table-group-header-row__column"
        }, {
          default: () => [_(Xt, {
            size: "small",
            variant: "text",
            icon: h,
            onClick: y
          }, null), T("span", null, [e.item.value]), T("span", null, [ae("("), u.value.length, ae(")")])]
        });
      }
      if (f.key === "data-table-select") {
        const h = o(u.value), y = l(u.value) && !h, p = (w) => s(u.value, w);
        return n["data-table-select"]?.({
          props: {
            modelValue: h,
            indeterminate: y,
            "onUpdate:modelValue": p
          }
        }) ?? T("td", null, [_(Ao, {
          modelValue: h,
          indeterminate: y,
          "onUpdate:modelValue": p
        }, null)]);
      }
      return T("td", null, null);
    })]);
  }
}), Bj = Be({
  index: Number,
  item: Object,
  cellProps: [Object, Function],
  onClick: rr(),
  onContextmenu: rr(),
  onDblclick: rr(),
  ...dc()
}, "VDataTableRow"), s1 = We()({
  name: "VDataTableRow",
  props: Bj(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      displayClasses: a,
      mobile: r
    } = pi(e, "v-data-table__tr"), {
      isSelected: i,
      toggleSelect: o,
      someSelected: l,
      allSelected: s,
      selectAll: d
    } = Uv(), {
      isExpanded: u,
      toggleExpand: f
    } = aO(), {
      toggleSort: h,
      sortBy: y,
      isSorted: p
    } = vO(), {
      columns: w
    } = Hv();
    Ye(() => T("tr", {
      class: Ae(["v-data-table__tr", {
        "v-data-table__tr--clickable": !!(e.onClick || e.onContextmenu || e.onDblclick)
      }, a.value]),
      onClick: e.onClick,
      onContextmenu: e.onContextmenu,
      onDblclick: e.onDblclick
    }, [e.item && w.value.map((b, v) => {
      const g = e.item, k = `item.${b.key}`, A = `header.${b.key}`, C = {
        index: e.index,
        item: g.raw,
        internalItem: g,
        value: Xl(g.columns, b.key),
        column: b,
        isSelected: i,
        toggleSelect: o,
        isExpanded: u,
        toggleExpand: f
      }, D = {
        column: b,
        selectAll: d,
        isSorted: p,
        toggleSort: h,
        sortBy: y.value,
        someSelected: l.value,
        allSelected: s.value,
        getSortIcon: () => ""
      }, P = typeof e.cellProps == "function" ? e.cellProps({
        index: C.index,
        item: C.item,
        internalItem: C.internalItem,
        value: C.value,
        column: b
      }) : e.cellProps, O = typeof b.cellProps == "function" ? b.cellProps({
        index: C.index,
        item: C.item,
        internalItem: C.internalItem,
        value: C.value
      }) : b.cellProps;
      return _(Y_, Fe({
        align: b.align,
        class: {
          "v-data-table__td--expanded-row": b.key === "data-table-expand",
          "v-data-table__td--select-row": b.key === "data-table-select"
        },
        fixed: b.fixed,
        fixedOffset: b.fixedOffset,
        fixedEndOffset: b.fixedEndOffset,
        lastFixed: b.lastFixed,
        firstFixedEnd: b.firstFixedEnd,
        maxWidth: r.value ? void 0 : b.maxWidth,
        noPadding: b.key === "data-table-select" || b.key === "data-table-expand",
        nowrap: b.nowrap,
        width: r.value ? void 0 : b.width
      }, P, O), {
        default: () => {
          if (b.key === "data-table-select")
            return n["item.data-table-select"]?.({
              ...C,
              props: {
                disabled: !g.selectable,
                modelValue: i([g]),
                onClick: ua(() => o(g), ["stop"])
              }
            }) ?? _(Ao, {
              disabled: !g.selectable,
              modelValue: i([g]),
              onClick: ua((x) => o(g, e.index, x), ["stop"])
            }, null);
          if (b.key === "data-table-expand")
            return n["item.data-table-expand"]?.({
              ...C,
              props: {
                icon: u(g) ? "$collapse" : "$expand",
                size: "small",
                variant: "text",
                onClick: ua(() => f(g), ["stop"])
              }
            }) ?? _(Xt, {
              icon: u(g) ? "$collapse" : "$expand",
              size: "small",
              variant: "text",
              onClick: ua(() => f(g), ["stop"])
            }, null);
          if (n[k] && !r.value) return n[k](C);
          const I = j(C.value);
          return r.value ? T(Ge, null, [T("div", {
            class: "v-data-table__td-title"
          }, [n[A]?.(D) ?? b.title]), T("div", {
            class: "v-data-table__td-value"
          }, [n[k]?.(C) ?? I])]) : I;
        }
      });
    })]));
  }
}), CO = Be({
  loading: [Boolean, String],
  loadingText: {
    type: String,
    default: "$vuetify.dataIterator.loadingText"
  },
  hideNoData: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  noDataText: {
    type: String,
    default: "$vuetify.noDataText"
  },
  rowProps: [Object, Function],
  cellProps: [Object, Function],
  ...dc()
}, "VDataTableRows"), lc = We()({
  name: "VDataTableRows",
  inheritAttrs: !1,
  props: CO(),
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      columns: r
    } = Hv(), {
      expandOnClick: i,
      toggleExpand: o,
      isExpanded: l
    } = aO(), {
      isSelected: s,
      toggleSelect: d
    } = Uv(), {
      toggleGroup: u,
      isGroupOpen: f
    } = iO(), {
      t: h
    } = kn(), {
      mobile: y
    } = pi(e);
    return Ye(() => e.loading && (!e.items.length || a.loading) ? T("tr", {
      class: "v-data-table-rows-loading",
      key: "loading"
    }, [T("td", {
      colspan: r.value.length
    }, [a.loading?.() ?? h(e.loadingText)])]) : !e.loading && !e.items.length && !e.hideNoData ? T("tr", {
      class: "v-data-table-rows-no-data",
      key: "no-data"
    }, [T("td", {
      colspan: r.value.length
    }, [a["no-data"]?.() ?? h(e.noDataText)])]) : T(Ge, null, [e.items.map((p, w) => {
      if (p.type === "group") {
        const g = {
          index: w,
          item: p,
          columns: r.value,
          isExpanded: l,
          toggleExpand: o,
          isSelected: s,
          toggleSelect: d,
          toggleGroup: u,
          isGroupOpen: f
        };
        return a["group-header"] ? a["group-header"](g) : _(Dj, Fe({
          key: `group-header_${p.id}`,
          item: p
        }, uC(n, ":group-header", () => g)), a);
      }
      const b = {
        index: w,
        item: p.raw,
        internalItem: p,
        columns: r.value,
        isExpanded: l,
        toggleExpand: o,
        isSelected: s,
        toggleSelect: d
      }, v = {
        ...b,
        props: Fe({
          key: `item_${p.key ?? p.index}`,
          onClick: i.value ? () => {
            o(p);
          } : void 0,
          index: w,
          item: p,
          cellProps: e.cellProps,
          mobile: y.value
        }, uC(n, ":row", () => b), typeof e.rowProps == "function" ? e.rowProps({
          item: b.item,
          index: b.index,
          internalItem: b.internalItem
        }) : e.rowProps)
      };
      return T(Ge, {
        key: v.props.key
      }, [a.item ? a.item(v) : _(s1, v.props, a), l(p) && a["expanded-row"]?.(b)]);
    })])), {};
  }
}), AO = Be({
  fixedHeader: Boolean,
  fixedFooter: Boolean,
  height: [Number, String],
  hover: Boolean,
  striped: {
    type: String,
    default: null,
    validator: (e) => ["even", "odd"].includes(e)
  },
  ...pt(),
  ...Wa(),
  ...$t(),
  ...rn()
}, "VTable"), cc = We()({
  name: "VTable",
  props: AO(),
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const {
      themeClasses: r
    } = gn(e), {
      densityClasses: i
    } = Tr(e);
    return Ye(() => {
      const o = {
        VCheckboxBtn: {
          density: e.density
        }
      };
      return _(e.tag, {
        class: Ae(["v-table", {
          "v-table--fixed-height": !!e.height,
          "v-table--fixed-header": e.fixedHeader,
          "v-table--fixed-footer": e.fixedFooter,
          "v-table--has-top": !!n.top,
          "v-table--has-bottom": !!n.bottom,
          "v-table--hover": e.hover,
          "v-table--striped-even": e.striped === "even",
          "v-table--striped-odd": e.striped === "odd"
        }, r.value, i.value, e.class]),
        style: Je(e.style)
      }, {
        default: () => [n.top?.(), _(Ht, {
          defaults: o
        }, {
          default: () => [n.default ? T("div", {
            class: "v-table__wrapper",
            style: {
              height: ht(e.height)
            }
          }, [T("table", null, [n.default()])]) : n.wrapper?.()]
        }), n.bottom?.()]
      });
    }), {};
  }
}), Vj = Be({
  items: {
    type: Array,
    default: () => []
  },
  itemValue: {
    type: [String, Array, Function],
    default: "id"
  },
  itemSelectable: {
    type: [String, Array, Function],
    default: null
  },
  rowProps: [Object, Function],
  cellProps: [Object, Function],
  returnObject: Boolean
}, "DataTable-items");
function Mj(e, t, n, a) {
  const r = e.returnObject ? t : Ca(t, e.itemValue), i = Ca(t, e.itemSelectable, !0), o = a.reduce((l, s) => (s.key != null && (l[s.key] = Ca(t, s.value)), l), {});
  return {
    type: "item",
    key: e.returnObject ? Ca(t, e.itemValue) : r,
    index: n,
    value: r,
    selectable: i,
    columns: o,
    raw: t
  };
}
function Lj(e, t, n) {
  return t.map((a, r) => Mj(e, a, r, n));
}
function l1(e, t) {
  return {
    items: W(() => Lj(e, e.items, t.value))
  };
}
const c1 = Be({
  ...CO(),
  hideDefaultBody: Boolean,
  hideDefaultFooter: Boolean,
  hideDefaultHeader: Boolean,
  width: [String, Number],
  search: String,
  ...tO(),
  ...X0(),
  ...Aj(),
  ...Vj(),
  ...fO(),
  ...hO(),
  ...SO(),
  ...AO()
}, "DataTable"), Rj = Be({
  ...e1(),
  ...c1(),
  ...id(),
  ...r1()
}, "VDataTable"), Fj = We()({
  name: "VDataTable",
  props: Rj(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:expanded": (e) => !0,
    "update:currentItems": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = Z0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = $v(e), {
      page: s,
      itemsPerPage: d
    } = t1(e), {
      disableSort: u
    } = zu(e), {
      columns: f,
      headers: h,
      sortFunctions: y,
      sortRawFunctions: p,
      filterFunctions: w
    } = o1(e, {
      groupBy: r,
      showSelect: ye(() => e.showSelect),
      showExpand: ye(() => e.showExpand)
    }), {
      items: b
    } = l1(e, f), v = ye(() => e.search), {
      filteredItems: g
    } = od(e, b, v, {
      transform: (z) => z.columns,
      customKeyFilter: w
    }), {
      toggleSort: k
    } = qv({
      sortBy: i,
      multiSort: o,
      mustSort: l,
      page: s
    }), {
      sortByWithGroups: A,
      opened: C,
      extractRows: D,
      isGroupOpen: P,
      toggleGroup: O
    } = Lv({
      groupBy: r,
      sortBy: i,
      disableSort: u
    }), {
      sortedItems: I
    } = a1(e, g, A, {
      transform: (z) => ({
        ...z.raw,
        ...z.columns
      }),
      sortFunctions: y,
      sortRawFunctions: p
    }), {
      flatItems: x
    } = Rv(I, r, C), M = W(() => x.value.length), {
      startIndex: V,
      stopIndex: B,
      pageCount: F,
      setItemsPerPage: H
    } = n1({
      page: s,
      itemsPerPage: d,
      itemsLength: M
    }), {
      paginatedItems: K
    } = cO({
      items: x,
      startIndex: V,
      stopIndex: B,
      itemsPerPage: d
    }), Z = W(() => D(K.value)), {
      isSelected: ue,
      select: Y,
      selectAll: U,
      toggleSelect: q,
      someSelected: oe,
      allSelected: ee
    } = Nv(e, {
      allItems: b,
      currentPage: Z
    }), {
      isExpanded: he,
      toggleExpand: ve
    } = Mv(e);
    Fv({
      page: s,
      itemsPerPage: d,
      sortBy: i,
      groupBy: r,
      search: v
    }), aa({
      VDataTableRows: {
        hideNoData: ye(() => e.hideNoData),
        noDataText: ye(() => e.noDataText),
        loading: ye(() => e.loading),
        loadingText: ye(() => e.loadingText)
      }
    });
    const pe = W(() => ({
      page: s.value,
      itemsPerPage: d.value,
      sortBy: i.value,
      pageCount: F.value,
      toggleSort: k,
      setItemsPerPage: H,
      someSelected: oe.value,
      allSelected: ee.value,
      isSelected: ue,
      select: Y,
      selectAll: U,
      toggleSelect: q,
      isExpanded: he,
      toggleExpand: ve,
      isGroupOpen: P,
      toggleGroup: O,
      items: Z.value.map((z) => z.raw),
      internalItems: Z.value,
      groupedItems: K.value,
      columns: f.value,
      headers: h.value
    }));
    return Ye(() => {
      const z = Uf.filterProps(e), ge = sc.filterProps(e), Ve = lc.filterProps(e), Ne = cc.filterProps(e);
      return _(cc, Fe({
        class: ["v-data-table", {
          "v-data-table--show-select": e.showSelect,
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, Ne, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(pe.value),
        default: () => a.default ? a.default(pe.value) : T(Ge, null, [a.colgroup?.(pe.value), !e.hideDefaultHeader && T("thead", {
          key: "thead"
        }, [_(sc, ge, a)]), a.thead?.(pe.value), !e.hideDefaultBody && T("tbody", null, [a["body.prepend"]?.(pe.value), a.body ? a.body(pe.value) : _(lc, Fe(n, Ve, {
          items: K.value
        }), a), a["body.append"]?.(pe.value)]), a.tbody?.(pe.value), a.tfoot?.(pe.value)]),
        bottom: () => a.bottom ? a.bottom(pe.value) : !e.hideDefaultFooter && T(Ge, null, [_(fi, null, null), _(Uf, z, {
          prepend: a["footer.prepend"]
        })])
      });
    }), {};
  }
}), Nj = Be({
  ...Tn(c1(), ["hideDefaultFooter"]),
  ...X0(),
  ...MP(),
  ...id()
}, "VDataTableVirtual"), Uj = We()({
  name: "VDataTableVirtual",
  props: Nj(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:groupBy": (e) => !0,
    "update:expanded": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = Z0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = $v(e), {
      disableSort: s
    } = zu(e), {
      columns: d,
      headers: u,
      filterFunctions: f,
      sortFunctions: h,
      sortRawFunctions: y
    } = o1(e, {
      groupBy: r,
      showSelect: ye(() => e.showSelect),
      showExpand: ye(() => e.showExpand)
    }), {
      items: p
    } = l1(e, d), w = ye(() => e.search), {
      filteredItems: b
    } = od(e, p, w, {
      transform: (Ne) => Ne.columns,
      customKeyFilter: f
    }), {
      toggleSort: v
    } = qv({
      sortBy: i,
      multiSort: o,
      mustSort: l
    }), {
      sortByWithGroups: g,
      opened: k,
      extractRows: A,
      isGroupOpen: C,
      toggleGroup: D
    } = Lv({
      groupBy: r,
      sortBy: i,
      disableSort: s
    }), {
      sortedItems: P
    } = a1(e, b, g, {
      transform: (Ne) => ({
        ...Ne.raw,
        ...Ne.columns
      }),
      sortFunctions: h,
      sortRawFunctions: y
    }), {
      flatItems: O
    } = Rv(P, r, k), I = W(() => A(O.value)), {
      isSelected: x,
      select: M,
      selectAll: V,
      toggleSelect: B,
      someSelected: F,
      allSelected: H
    } = Nv(e, {
      allItems: I,
      currentPage: I
    }), {
      isExpanded: K,
      toggleExpand: Z
    } = Mv(e), {
      containerRef: ue,
      markerRef: Y,
      paddingTop: U,
      paddingBottom: q,
      computedItems: oe,
      handleItemResize: ee,
      handleScroll: he,
      handleScrollend: ve,
      calculateVisibleItems: pe,
      scrollToIndex: z
    } = LP(e, O), ge = W(() => oe.value.map((Ne) => Ne.raw));
    Fv({
      sortBy: i,
      page: rt(1),
      itemsPerPage: rt(-1),
      groupBy: r,
      search: w
    }), aa({
      VDataTableRows: {
        hideNoData: ye(() => e.hideNoData),
        noDataText: ye(() => e.noDataText),
        loading: ye(() => e.loading),
        loadingText: ye(() => e.loadingText)
      }
    });
    const Ve = W(() => ({
      sortBy: i.value,
      toggleSort: v,
      someSelected: F.value,
      allSelected: H.value,
      isSelected: x,
      select: M,
      selectAll: V,
      toggleSelect: B,
      isExpanded: K,
      toggleExpand: Z,
      isGroupOpen: C,
      toggleGroup: D,
      items: I.value.map((Ne) => Ne.raw),
      internalItems: I.value,
      groupedItems: O.value,
      columns: d.value,
      headers: u.value
    }));
    return Ye(() => {
      const Ne = sc.filterProps(e), ce = lc.filterProps(e), ne = cc.filterProps(e);
      return _(cc, Fe({
        class: ["v-data-table", {
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, ne, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(Ve.value),
        wrapper: () => T("div", {
          ref: ue,
          onScrollPassive: he,
          onScrollend: ve,
          class: "v-table__wrapper",
          style: {
            height: ht(e.height)
          }
        }, [T("table", null, [a.colgroup?.(Ve.value), !e.hideDefaultHeader && T("thead", {
          key: "thead"
        }, [_(sc, Ne, a)]), a.thead?.(Ve.value), !e.hideDefaultBody && T("tbody", {
          key: "tbody"
        }, [T("tr", {
          ref: Y,
          style: {
            height: ht(U.value),
            border: 0
          }
        }, [T("td", {
          colspan: d.value.length,
          style: {
            height: 0,
            border: 0
          }
        }, null)]), a["body.prepend"]?.(Ve.value), _(lc, Fe(n, ce, {
          items: ge.value
        }), {
          ...a,
          item: (Q) => _(VP, {
            key: Q.internalItem.index,
            renderless: !0,
            "onUpdate:height": (le) => ee(Q.internalItem.index, le)
          }, {
            default: (le) => {
              let {
                itemRef: G
              } = le;
              return a.item?.({
                ...Q,
                itemRef: G
              }) ?? _(s1, Fe(Q.props, {
                ref: G,
                key: Q.internalItem.index,
                index: Q.internalItem.index
              }), a);
            }
          })
        }), a["body.append"]?.(Ve.value), T("tr", {
          style: {
            height: ht(q.value),
            border: 0
          }
        }, [T("td", {
          colspan: d.value.length,
          style: {
            height: 0,
            border: 0
          }
        }, null)])]), a.tbody?.(Ve.value), a.tfoot?.(Ve.value)])]),
        bottom: () => a.bottom?.(Ve.value)
      });
    }), {
      calculateVisibleItems: pe,
      scrollToIndex: z
    };
  }
}), $j = Be({
  itemsLength: {
    type: [Number, String],
    required: !0
  },
  ...e1(),
  ...c1(),
  ...r1()
}, "VDataTableServer"), qj = We()({
  name: "VDataTableServer",
  props: $j(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:page": (e) => !0,
    "update:itemsPerPage": (e) => !0,
    "update:sortBy": (e) => !0,
    "update:options": (e) => !0,
    "update:expanded": (e) => !0,
    "update:groupBy": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const {
      groupBy: r
    } = Z0(e), {
      sortBy: i,
      multiSort: o,
      mustSort: l
    } = $v(e), {
      page: s,
      itemsPerPage: d
    } = t1(e), {
      disableSort: u
    } = zu(e), f = W(() => parseInt(e.itemsLength, 10)), {
      columns: h,
      headers: y
    } = o1(e, {
      groupBy: r,
      showSelect: ye(() => e.showSelect),
      showExpand: ye(() => e.showExpand)
    }), {
      items: p
    } = l1(e, h), {
      toggleSort: w
    } = qv({
      sortBy: i,
      multiSort: o,
      mustSort: l,
      page: s
    }), {
      opened: b,
      isGroupOpen: v,
      toggleGroup: g,
      extractRows: k
    } = Lv({
      groupBy: r,
      sortBy: i,
      disableSort: u
    }), {
      pageCount: A,
      setItemsPerPage: C
    } = n1({
      page: s,
      itemsPerPage: d,
      itemsLength: f
    }), {
      flatItems: D
    } = Rv(p, r, b), {
      isSelected: P,
      select: O,
      selectAll: I,
      toggleSelect: x,
      someSelected: M,
      allSelected: V
    } = Nv(e, {
      allItems: p,
      currentPage: p
    }), {
      isExpanded: B,
      toggleExpand: F
    } = Mv(e), H = W(() => k(p.value));
    Fv({
      page: s,
      itemsPerPage: d,
      sortBy: i,
      groupBy: r,
      search: ye(() => e.search)
    }), Ln("v-data-table", {
      toggleSort: w,
      sortBy: i
    }), aa({
      VDataTableRows: {
        hideNoData: ye(() => e.hideNoData),
        noDataText: ye(() => e.noDataText),
        loading: ye(() => e.loading),
        loadingText: ye(() => e.loadingText)
      }
    });
    const K = W(() => ({
      page: s.value,
      itemsPerPage: d.value,
      sortBy: i.value,
      pageCount: A.value,
      toggleSort: w,
      setItemsPerPage: C,
      someSelected: M.value,
      allSelected: V.value,
      isSelected: P,
      select: O,
      selectAll: I,
      toggleSelect: x,
      isExpanded: B,
      toggleExpand: F,
      isGroupOpen: v,
      toggleGroup: g,
      items: H.value.map((Z) => Z.raw),
      internalItems: H.value,
      groupedItems: D.value,
      columns: h.value,
      headers: y.value
    }));
    Ye(() => {
      const Z = Uf.filterProps(e), ue = sc.filterProps(e), Y = lc.filterProps(e), U = cc.filterProps(e);
      return _(cc, Fe({
        class: ["v-data-table", {
          "v-data-table--loading": e.loading
        }, e.class],
        style: e.style
      }, U, {
        fixedHeader: e.fixedHeader || e.sticky
      }), {
        top: () => a.top?.(K.value),
        default: () => a.default ? a.default(K.value) : T(Ge, null, [a.colgroup?.(K.value), !e.hideDefaultHeader && T("thead", {
          key: "thead",
          class: "v-data-table__thead",
          role: "rowgroup"
        }, [_(sc, ue, a)]), a.thead?.(K.value), !e.hideDefaultBody && T("tbody", {
          class: "v-data-table__tbody",
          role: "rowgroup"
        }, [a["body.prepend"]?.(K.value), a.body ? a.body(K.value) : _(lc, Fe(n, Y, {
          items: D.value
        }), a), a["body.append"]?.(K.value)]), a.tbody?.(K.value), a.tfoot?.(K.value)]),
        bottom: () => a.bottom ? a.bottom(K.value) : !e.hideDefaultFooter && T(Ge, null, [_(fi, null, null), _(Uf, Z, {
          prepend: a["footer.prepend"]
        })])
      });
    });
  }
}), Hj = Be({
  fluid: {
    type: Boolean,
    default: !1
  },
  ...pt(),
  ...Ta(),
  ...$t()
}, "VContainer"), zj = We()({
  name: "VContainer",
  props: Hj(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      rtlClasses: a
    } = Na(), {
      dimensionStyles: r
    } = Ia(e);
    return Ye(() => _(e.tag, {
      class: Ae(["v-container", {
        "v-container--fluid": e.fluid
      }, a.value, e.class]),
      style: Je([r.value, e.style])
    }, n)), {};
  }
}), xO = mv.reduce((e, t) => (e[t] = {
  type: [Boolean, String, Number],
  default: !1
}, e), {}), TO = mv.reduce((e, t) => {
  const n = "offset" + To(t);
  return e[n] = {
    type: [String, Number],
    default: null
  }, e;
}, {}), IO = mv.reduce((e, t) => {
  const n = "order" + To(t);
  return e[n] = {
    type: [String, Number],
    default: null
  }, e;
}, {}), gA = {
  col: Object.keys(xO),
  offset: Object.keys(TO),
  order: Object.keys(IO)
};
function Wj(e, t, n) {
  let a = e;
  if (!(n == null || n === !1)) {
    if (t) {
      const r = t.replace(e, "");
      a += `-${r}`;
    }
    return e === "col" && (a = "v-" + a), e === "col" && (n === "" || n === !0) || (a += `-${n}`), a.toLowerCase();
  }
}
const Kj = ["auto", "start", "end", "center", "baseline", "stretch"], jj = Be({
  cols: {
    type: [Boolean, String, Number],
    default: !1
  },
  ...xO,
  offset: {
    type: [String, Number],
    default: null
  },
  ...TO,
  order: {
    type: [String, Number],
    default: null
  },
  ...IO,
  alignSelf: {
    type: String,
    default: null,
    validator: (e) => Kj.includes(e)
  },
  ...pt(),
  ...$t()
}, "VCol"), Yj = We()({
  name: "VCol",
  props: jj(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = W(() => {
      const r = [];
      let i;
      for (i in gA)
        gA[i].forEach((l) => {
          const s = e[l], d = Wj(i, l, s);
          d && r.push(d);
        });
      const o = r.some((l) => l.startsWith("v-col-"));
      return r.push({
        // Default to .v-col if no other col-{bp}-* classes generated nor `cols` specified.
        "v-col": !o || !e.cols,
        [`v-col-${e.cols}`]: e.cols,
        [`offset-${e.offset}`]: e.offset,
        [`order-${e.order}`]: e.order,
        [`align-self-${e.alignSelf}`]: e.alignSelf
      }), r;
    });
    return () => Eo(e.tag, {
      class: [a.value, e.class],
      style: e.style
    }, n.default?.());
  }
}), u1 = ["start", "end", "center"], EO = ["space-between", "space-around", "space-evenly"];
function d1(e, t) {
  return mv.reduce((n, a) => {
    const r = e + To(a);
    return n[r] = t(), n;
  }, {});
}
const Gj = [...u1, "baseline", "stretch"], PO = (e) => Gj.includes(e), OO = d1("align", () => ({
  type: String,
  default: null,
  validator: PO
})), Qj = [...u1, ...EO], DO = (e) => Qj.includes(e), BO = d1("justify", () => ({
  type: String,
  default: null,
  validator: DO
})), Jj = [...u1, ...EO, "stretch"], VO = (e) => Jj.includes(e), MO = d1("alignContent", () => ({
  type: String,
  default: null,
  validator: VO
})), yA = {
  align: Object.keys(OO),
  justify: Object.keys(BO),
  alignContent: Object.keys(MO)
}, Xj = {
  align: "align",
  justify: "justify",
  alignContent: "align-content"
};
function Zj(e, t, n) {
  let a = Xj[e];
  if (n != null) {
    if (t) {
      const r = t.replace(e, "");
      a += `-${r}`;
    }
    return a += `-${n}`, a.toLowerCase();
  }
}
const eY = Be({
  dense: Boolean,
  noGutters: Boolean,
  align: {
    type: String,
    default: null,
    validator: PO
  },
  ...OO,
  justify: {
    type: String,
    default: null,
    validator: DO
  },
  ...BO,
  alignContent: {
    type: String,
    default: null,
    validator: VO
  },
  ...MO,
  ...pt(),
  ...$t()
}, "VRow"), tY = We()({
  name: "VRow",
  props: eY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = W(() => {
      const r = [];
      let i;
      for (i in yA)
        yA[i].forEach((o) => {
          const l = e[o], s = Zj(i, o, l);
          s && r.push(s);
        });
      return r.push({
        "v-row--no-gutters": e.noGutters,
        "v-row--dense": e.dense,
        [`align-${e.align}`]: e.align,
        [`justify-${e.justify}`]: e.justify,
        [`align-content-${e.alignContent}`]: e.alignContent
      }), r;
    });
    return () => Eo(e.tag, {
      class: ["v-row", a.value, e.class],
      style: e.style
    }, n.default?.());
  }
}), LO = ds("v-spacer", "div", "VSpacer"), RO = Be({
  active: {
    type: [String, Array],
    default: void 0
  },
  controlHeight: [Number, String],
  disabled: {
    type: [Boolean, String, Array],
    default: null
  },
  nextIcon: {
    type: St,
    default: "$next"
  },
  prevIcon: {
    type: St,
    default: "$prev"
  },
  modeIcon: {
    type: St,
    default: "$subgroup"
  },
  text: String,
  viewMode: {
    type: String,
    default: "month"
  }
}, "VDatePickerControls"), Wb = We()({
  name: "VDatePickerControls",
  props: RO(),
  emits: {
    "click:year": () => !0,
    "click:month": () => !0,
    "click:prev": () => !0,
    "click:next": () => !0,
    "click:text": () => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const {
      t: a
    } = kn(), r = W(() => Array.isArray(e.disabled) ? e.disabled.includes("text") : !!e.disabled), i = W(() => Array.isArray(e.disabled) ? e.disabled.includes("mode") : !!e.disabled), o = W(() => Array.isArray(e.disabled) ? e.disabled.includes("prev") : !!e.disabled), l = W(() => Array.isArray(e.disabled) ? e.disabled.includes("next") : !!e.disabled);
    function s() {
      n("click:prev");
    }
    function d() {
      n("click:next");
    }
    function u() {
      n("click:year");
    }
    function f() {
      n("click:month");
    }
    return Ye(() => T("div", {
      class: Ae(["v-date-picker-controls"]),
      style: {
        "--v-date-picker-controls-height": ht(e.controlHeight)
      }
    }, [_(Xt, {
      class: "v-date-picker-controls__month-btn",
      "data-testid": "month-btn",
      disabled: r.value,
      text: e.text,
      variant: "text",
      rounded: !0,
      onClick: f
    }, null), _(Xt, {
      class: "v-date-picker-controls__mode-btn",
      "data-testid": "year-btn",
      disabled: i.value,
      density: "comfortable",
      icon: e.modeIcon,
      variant: "text",
      "aria-label": a("$vuetify.datePicker.ariaLabel.selectYear"),
      onClick: u
    }, null), _(LO, null, null), T("div", {
      class: "v-date-picker-controls__month"
    }, [_(Xt, {
      "data-testid": "prev-month",
      disabled: o.value,
      density: "comfortable",
      icon: e.prevIcon,
      variant: "text",
      "aria-label": a("$vuetify.datePicker.ariaLabel.previousMonth"),
      onClick: s
    }, null), _(Xt, {
      "data-testid": "next-month",
      disabled: l.value,
      icon: e.nextIcon,
      density: "comfortable",
      variant: "text",
      "aria-label": a("$vuetify.datePicker.ariaLabel.nextMonth"),
      onClick: d
    }, null)])])), {};
  }
}), nY = Be({
  appendIcon: St,
  color: String,
  header: String,
  transition: String,
  onClick: rr()
}, "VDatePickerHeader"), Kb = We()({
  name: "VDatePickerHeader",
  props: nY(),
  emits: {
    click: () => !0,
    "click:append": () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = bn(() => e.color);
    function o() {
      n("click");
    }
    function l() {
      n("click:append");
    }
    return Ye(() => {
      const s = !!(a.default || e.header), d = !!(a.append || e.appendIcon);
      return T("div", {
        class: Ae(["v-date-picker-header", {
          "v-date-picker-header--clickable": !!e.onClick
        }, r.value]),
        style: Je(i.value),
        onClick: o
      }, [a.prepend && T("div", {
        key: "prepend",
        class: "v-date-picker-header__prepend"
      }, [a.prepend()]), s && _(Cr, {
        key: "content",
        name: e.transition
      }, {
        default: () => [T("div", {
          key: e.header,
          class: "v-date-picker-header__content"
        }, [a.default?.() ?? e.header])]
      }), d && T("div", {
        class: "v-date-picker-header__append"
      }, [a.append ? _(Ht, {
        key: "append-defaults",
        disabled: !e.appendIcon,
        defaults: {
          VBtn: {
            icon: e.appendIcon,
            variant: "text"
          }
        }
      }, {
        default: () => [a.append?.()]
      }) : _(Xt, {
        key: "append-btn",
        icon: e.appendIcon,
        variant: "text",
        onClick: l
      }, null)])]);
    }), {};
  }
}), aY = Be({
  allowedDates: [Array, Function],
  disabled: {
    type: Boolean,
    default: null
  },
  displayValue: null,
  modelValue: Array,
  month: [Number, String],
  max: null,
  min: null,
  showAdjacentMonths: Boolean,
  year: [Number, String],
  weekdays: {
    type: Array,
    default: () => [0, 1, 2, 3, 4, 5, 6]
  },
  weeksInMonth: {
    type: String,
    default: "dynamic"
  },
  firstDayOfWeek: {
    type: [Number, String],
    default: void 0
  },
  weekdayFormat: String
}, "calendar");
function rY(e) {
  const t = jf(), n = wt(e, "modelValue", [], (y) => ta(y).map((p) => t.date(p))), a = W(() => e.displayValue ? t.date(e.displayValue) : n.value.length > 0 ? t.date(n.value[0]) : e.min ? t.date(e.min) : Array.isArray(e.allowedDates) ? t.date(e.allowedDates[0]) : t.date()), r = wt(e, "year", void 0, (y) => {
    const p = y != null ? Number(y) : t.getYear(a.value);
    return t.startOfYear(t.setYear(t.date(), p));
  }, (y) => t.getYear(y)), i = wt(e, "month", void 0, (y) => {
    const p = y != null ? Number(y) : t.getMonth(a.value), w = t.setYear(t.startOfMonth(t.date()), t.getYear(r.value));
    return t.setMonth(w, p);
  }, (y) => t.getMonth(y)), o = W(() => {
    const y = t.toJsDate(t.startOfWeek(t.date(), e.firstDayOfWeek)).getDay();
    return t.getWeekdays(e.firstDayOfWeek, e.weekdayFormat).filter((p, w) => e.weekdays.includes((w + y) % 7));
  }), l = W(() => {
    const y = t.getWeekArray(i.value, e.firstDayOfWeek), p = y.flat(), w = 42;
    if (e.weeksInMonth === "static" && p.length < w) {
      const b = p[p.length - 1];
      let v = [];
      for (let g = 1; g <= w - p.length; g++)
        v.push(t.addDays(b, g)), g % 7 === 0 && (y.push(v), v = []);
    }
    return y;
  });
  function s(y, p) {
    return y.filter((w) => e.weekdays.includes(t.toJsDate(w).getDay())).map((w, b) => {
      const v = t.toISO(w), g = !t.isSameMonth(w, i.value), k = t.isSameDay(w, t.startOfMonth(i.value)), A = t.isSameDay(w, t.endOfMonth(i.value)), C = t.isSameDay(w, i.value), D = e.weekdays.length;
      return {
        date: w,
        formatted: t.format(w, "keyboardDate"),
        isAdjacent: g,
        isDisabled: h(w),
        isEnd: A,
        isHidden: g && !e.showAdjacentMonths,
        isSame: C,
        isSelected: n.value.some((P) => t.isSameDay(w, P)),
        isStart: k,
        isToday: t.isSameDay(w, p),
        isWeekEnd: b % D === D - 1,
        isWeekStart: b % D === 0,
        isoDate: v,
        localized: t.format(w, "dayOfMonth"),
        month: t.getMonth(w),
        year: t.getYear(w)
      };
    });
  }
  const d = W(() => {
    const y = t.startOfWeek(a.value, e.firstDayOfWeek), p = [];
    for (let b = 0; b <= 6; b++)
      p.push(t.addDays(y, b));
    const w = t.date();
    return s(p, w);
  }), u = W(() => {
    const y = l.value.flat(), p = t.date();
    return s(y, p);
  }), f = W(() => l.value.map((y) => y.length ? t.getWeek(y[0], e.firstDayOfWeek) : null));
  function h(y) {
    if (e.disabled) return !0;
    const p = t.date(y);
    return e.min && t.isBefore(t.endOfDay(p), t.date(e.min)) || e.max && t.isAfter(p, t.date(e.max)) ? !0 : Array.isArray(e.allowedDates) && e.allowedDates.length > 0 ? !e.allowedDates.some((w) => t.isSameDay(t.date(w), p)) : typeof e.allowedDates == "function" ? !e.allowedDates(p) : !1;
  }
  return {
    displayValue: a,
    daysInMonth: u,
    daysInWeek: d,
    genDays: s,
    model: n,
    weeksInMonth: l,
    weekdayLabels: o,
    weekNumbers: f
  };
}
const FO = Be({
  color: String,
  hideWeekdays: Boolean,
  multiple: [Boolean, Number, String],
  showWeek: Boolean,
  transition: {
    type: String,
    default: "picker-transition"
  },
  reverseTransition: {
    type: String,
    default: "picker-reverse-transition"
  },
  ...Tn(aY(), ["displayValue"])
}, "VDatePickerMonth"), jb = We()({
  name: "VDatePickerMonth",
  props: FO(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:month": (e) => !0,
    "update:year": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = be(), {
      t: i
    } = kn(), {
      daysInMonth: o,
      model: l,
      weekNumbers: s,
      weekdayLabels: d
    } = rY(e), u = jf(), f = rt(), h = rt(), y = rt(!1), p = ye(() => y.value ? e.reverseTransition : e.transition);
    e.multiple === "range" && l.value.length > 0 && (f.value = l.value[0], l.value.length > 1 && (h.value = l.value[l.value.length - 1]));
    const w = W(() => {
      const A = ["number", "string"].includes(typeof e.multiple) ? Number(e.multiple) : 1 / 0;
      return l.value.length >= A;
    });
    tt(o, (A, C) => {
      C && (y.value = u.isBefore(A[0].date, C[0].date));
    });
    function b(A) {
      const C = u.startOfDay(A);
      if (l.value.length === 0 ? f.value = void 0 : l.value.length === 1 && (f.value = l.value[0], h.value = void 0), !f.value)
        f.value = C, l.value = [f.value];
      else if (h.value)
        f.value = A, h.value = void 0, l.value = [f.value];
      else {
        if (u.isSameDay(C, f.value)) {
          f.value = void 0, l.value = [];
          return;
        } else u.isBefore(C, f.value) ? (h.value = u.endOfDay(f.value), f.value = C) : h.value = u.endOfDay(C);
        l.value = d8(u, f.value, h.value);
      }
    }
    function v(A) {
      const C = u.format(A.date, "fullDateWithWeekday"), D = A.isToday ? "currentDate" : "selectDate";
      return i(`$vuetify.datePicker.ariaLabel.${D}`, C);
    }
    function g(A) {
      const C = l.value.findIndex((D) => u.isSameDay(D, A));
      if (C === -1)
        l.value = [...l.value, A];
      else {
        const D = [...l.value];
        D.splice(C, 1), l.value = D;
      }
    }
    function k(A) {
      e.multiple === "range" ? b(A) : e.multiple ? g(A) : l.value = [A];
    }
    Ye(() => T("div", {
      class: "v-date-picker-month",
      style: {
        "--v-date-picker-days-in-week": e.weekdays.length
      }
    }, [e.showWeek && T("div", {
      key: "weeks",
      class: "v-date-picker-month__weeks"
    }, [!e.hideWeekdays && T("div", {
      key: "hide-week-days",
      class: "v-date-picker-month__day"
    }, [ae(" ")]), s.value.map((A) => T("div", {
      class: Ae(["v-date-picker-month__day", "v-date-picker-month__day--adjacent"])
    }, [A]))]), _(Cr, {
      name: p.value
    }, {
      default: () => [T("div", {
        ref: r,
        key: o.value[0].date?.toString(),
        class: "v-date-picker-month__days"
      }, [!e.hideWeekdays && d.value.map((A) => T("div", {
        class: Ae(["v-date-picker-month__day", "v-date-picker-month__weekday"])
      }, [A])), o.value.map((A, C) => {
        const D = {
          props: {
            class: "v-date-picker-month__day-btn",
            color: A.isSelected || A.isToday ? e.color : void 0,
            disabled: A.isDisabled,
            icon: !0,
            ripple: !1,
            text: A.localized,
            variant: A.isSelected ? "flat" : A.isToday ? "outlined" : "text",
            "aria-label": v(A),
            "aria-current": A.isToday ? "date" : void 0,
            onClick: () => k(A.date)
          },
          item: A,
          i: C
        };
        return w.value && !A.isSelected && (A.isDisabled = !0), T("div", {
          class: Ae(["v-date-picker-month__day", {
            "v-date-picker-month__day--adjacent": A.isAdjacent,
            "v-date-picker-month__day--hide-adjacent": A.isHidden,
            "v-date-picker-month__day--selected": A.isSelected,
            "v-date-picker-month__day--week-end": A.isWeekEnd,
            "v-date-picker-month__day--week-start": A.isWeekStart
          }]),
          "data-v-date": A.isDisabled ? void 0 : A.isoDate
        }, [(e.showAdjacentMonths || !A.isAdjacent) && (a.day?.(D) ?? _(Xt, D.props, null))]);
      })])]
    })]));
  }
}), NO = Be({
  color: String,
  height: [String, Number],
  min: null,
  max: null,
  modelValue: Number,
  year: Number,
  allowedMonths: [Array, Function]
}, "VDatePickerMonths"), Yb = We()({
  name: "VDatePickerMonths",
  props: NO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = jf(), i = wt(e, "modelValue"), o = W(() => {
      let s = r.startOfYear(r.date());
      return e.year && (s = r.setYear(s, e.year)), ci(12).map((d) => {
        const u = r.format(s, "monthShort"), f = r.format(s, "month"), h = !!(!l(d) || e.min && r.isAfter(r.startOfMonth(r.date(e.min)), s) || e.max && r.isAfter(s, r.startOfMonth(r.date(e.max))));
        return s = r.getNextMonth(s), {
          isDisabled: h,
          text: u,
          label: f,
          value: d
        };
      });
    });
    na(() => {
      i.value = i.value ?? r.getMonth(r.date());
    });
    function l(s) {
      return Array.isArray(e.allowedMonths) && e.allowedMonths.length ? e.allowedMonths.includes(s) : typeof e.allowedMonths == "function" ? e.allowedMonths(s) : !0;
    }
    return Ye(() => T("div", {
      class: "v-date-picker-months",
      style: {
        height: ht(e.height)
      }
    }, [T("div", {
      class: "v-date-picker-months__content"
    }, [o.value.map((s, d) => {
      const u = {
        active: i.value === d,
        ariaLabel: s.label,
        color: i.value === d ? e.color : void 0,
        disabled: s.isDisabled,
        rounded: !0,
        text: s.text,
        variant: i.value === s.value ? "flat" : "text",
        onClick: () => f(d)
      };
      function f(h) {
        if (i.value === h) {
          n("update:modelValue", i.value);
          return;
        }
        i.value = h;
      }
      return a.month?.({
        month: s,
        i: d,
        props: u
      }) ?? _(Xt, Fe({
        key: "month"
      }, u), null);
    })])])), {};
  }
}), UO = Be({
  color: String,
  height: [String, Number],
  min: null,
  max: null,
  modelValue: Number,
  allowedYears: [Array, Function]
}, "VDatePickerYears"), Gb = We()({
  name: "VDatePickerYears",
  props: UO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = jf(), i = wt(e, "modelValue"), o = W(() => {
      const d = r.getYear(r.date());
      let u = d - 100, f = d + 52;
      e.min && (u = r.getYear(r.date(e.min))), e.max && (f = r.getYear(r.date(e.max)));
      let h = r.startOfYear(r.date());
      return h = r.setYear(h, u), ci(f - u + 1, u).map((y) => {
        const p = r.format(h, "year");
        return h = r.setYear(h, r.getYear(h) + 1), {
          text: p,
          value: y,
          isDisabled: !s(y)
        };
      });
    });
    na(() => {
      i.value = i.value ?? r.getYear(r.date());
    });
    const l = C_();
    an(async () => {
      await Dt(), l.el?.focus();
    });
    function s(d) {
      return Array.isArray(e.allowedYears) && e.allowedYears.length ? e.allowedYears.includes(d) : typeof e.allowedYears == "function" ? e.allowedYears(d) : !0;
    }
    return Ye(() => T("div", {
      class: "v-date-picker-years",
      style: {
        height: ht(e.height)
      }
    }, [T("div", {
      class: "v-date-picker-years__content"
    }, [o.value.map((d, u) => {
      const f = {
        ref: i.value === d.value ? l : void 0,
        active: i.value === d.value,
        color: i.value === d.value ? e.color : void 0,
        rounded: !0,
        text: d.text,
        disabled: d.isDisabled,
        variant: i.value === d.value ? "flat" : "text",
        onClick: () => {
          if (i.value === d.value) {
            n("update:modelValue", i.value);
            return;
          }
          i.value = d.value;
        }
      };
      return a.year?.({
        year: d,
        i: u,
        props: f
      }) ?? _(Xt, Fe({
        key: "month"
      }, f), null);
    })])])), {};
  }
}), iY = Be({
  // TODO: implement in v3.5
  // calendarIcon: {
  //   type: String,
  //   default: '$calendar',
  // },
  // keyboardIcon: {
  //   type: String,
  //   default: '$edit',
  // },
  // inputMode: {
  //   type: String as PropType<'calendar' | 'keyboard'>,
  //   default: 'calendar',
  // },
  // inputText: {
  //   type: String,
  //   default: '$vuetify.datePicker.input.placeholder',
  // },
  // inputPlaceholder: {
  //   type: String,
  //   default: 'dd/mm/yyyy',
  // },
  header: {
    type: String,
    default: "$vuetify.datePicker.header"
  },
  headerColor: String,
  ...RO(),
  ...FO({
    weeksInMonth: "static"
  }),
  ...Tn(NO(), ["modelValue"]),
  ...Tn(UO(), ["modelValue"]),
  ...Vv({
    title: "$vuetify.datePicker.title"
  }),
  modelValue: null
}, "VDatePicker"), oY = We()({
  name: "VDatePicker",
  props: iY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:month": (e) => !0,
    "update:year": (e) => !0,
    // 'update:inputMode': (date: any) => true,
    "update:viewMode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const r = jf(), {
      t: i
    } = kn(), {
      rtlClasses: o
    } = Na(), l = wt(e, "modelValue", void 0, (K) => ta(K).map((Z) => r.date(Z)), (K) => e.multiple ? K : K[0]), s = wt(e, "viewMode"), d = W(() => {
      const K = r.date(e.min);
      return e.min && r.isValid(K) ? K : null;
    }), u = W(() => {
      const K = r.date(e.max);
      return e.max && r.isValid(K) ? K : null;
    }), f = W(() => {
      const K = r.date();
      let Z = K;
      return l.value?.[0] ? Z = r.date(l.value[0]) : d.value && r.isBefore(K, d.value) ? Z = d.value : u.value && r.isAfter(K, u.value) && (Z = u.value), Z && r.isValid(Z) ? Z : K;
    }), h = ye(() => e.headerColor ?? e.color), y = wt(e, "month"), p = W({
      get: () => Number(y.value ?? r.getMonth(r.startOfMonth(f.value))),
      set: (K) => y.value = K
    }), w = wt(e, "year"), b = W({
      get: () => Number(w.value ?? r.getYear(r.startOfYear(r.setMonth(f.value, p.value)))),
      set: (K) => w.value = K
    }), v = rt(!1), g = W(() => e.multiple && l.value.length > 1 ? i("$vuetify.datePicker.itemsSelected", l.value.length) : l.value[0] && r.isValid(l.value[0]) ? r.format(r.date(l.value[0]), "normalDateWithWeekday") : i(e.header)), k = W(() => {
      let K = r.date();
      return K = r.setDate(K, 1), K = r.setMonth(K, p.value), K = r.setYear(K, b.value), r.format(K, "monthAndYear");
    }), A = ye(() => `date-picker-header${v.value ? "-reverse" : ""}-transition`), C = W(() => {
      if (e.disabled) return !0;
      const K = [];
      if (s.value !== "month")
        K.push("prev", "next");
      else {
        let Z = r.date();
        if (Z = r.startOfMonth(Z), Z = r.setMonth(Z, p.value), Z = r.setYear(Z, b.value), d.value) {
          const ue = r.addDays(r.startOfMonth(Z), -1);
          r.isAfter(d.value, ue) && K.push("prev");
        }
        if (u.value) {
          const ue = r.addDays(r.endOfMonth(Z), 1);
          r.isAfter(ue, u.value) && K.push("next");
        }
      }
      return K;
    });
    function D(K, Z) {
      const ue = e.allowedDates;
      if (typeof ue != "function") return !0;
      const Y = r.getDiff(Z, K, "days");
      for (let U = 0; U < Y; U++)
        if (ue(r.addDays(K, U))) return !0;
      return !1;
    }
    function P(K) {
      if (typeof e.allowedDates == "function") {
        const Z = r.parseISO(`${K}-01-01`);
        return D(Z, r.endOfYear(Z));
      }
      if (Array.isArray(e.allowedDates) && e.allowedDates.length) {
        for (const Z of e.allowedDates)
          if (r.getYear(r.date(Z)) === K) return !0;
        return !1;
      }
      return !0;
    }
    function O(K) {
      if (typeof e.allowedDates == "function") {
        const Z = String(K + 1).padStart(2, "0"), ue = r.parseISO(`${b.value}-${Z}-01`);
        return D(ue, r.endOfMonth(ue));
      }
      if (Array.isArray(e.allowedDates) && e.allowedDates.length) {
        for (const Z of e.allowedDates)
          if (r.getYear(r.date(Z)) === b.value && r.getMonth(r.date(Z)) === K) return !0;
        return !1;
      }
      return !0;
    }
    function I() {
      p.value < 11 ? p.value++ : (b.value++, p.value = 0, H()), F();
    }
    function x() {
      p.value > 0 ? p.value-- : (b.value--, p.value = 11, H()), F();
    }
    function M() {
      s.value = "month";
    }
    function V() {
      s.value = s.value === "months" ? "month" : "months";
    }
    function B() {
      s.value = s.value === "year" ? "month" : "year";
    }
    function F() {
      s.value === "months" && V();
    }
    function H() {
      s.value === "year" && B();
    }
    return tt(l, (K, Z) => {
      const ue = ta(Z), Y = ta(K);
      if (!Y.length) return;
      const U = r.date(ue[ue.length - 1]), q = r.date(Y[Y.length - 1]), oe = r.getMonth(q), ee = r.getYear(q);
      oe !== p.value && (p.value = oe, F()), ee !== b.value && (b.value = ee, H()), v.value = r.isBefore(U, q);
    }), Ye(() => {
      const K = Nu.filterProps(e), Z = Wb.filterProps(e), ue = Kb.filterProps(e), Y = jb.filterProps(e), U = Tn(Yb.filterProps(e), ["modelValue"]), q = Tn(Gb.filterProps(e), ["modelValue"]), oe = {
        color: h.value,
        header: g.value,
        transition: A.value
      };
      return _(Nu, Fe(K, {
        color: h.value,
        class: ["v-date-picker", `v-date-picker--${s.value}`, {
          "v-date-picker--show-week": e.showWeek
        }, o.value, e.class],
        style: e.style
      }), {
        title: () => a.title?.() ?? T("div", {
          class: "v-date-picker__title"
        }, [i(e.title)]),
        header: () => a.header ? _(Ht, {
          defaults: {
            VDatePickerHeader: {
              ...oe
            }
          }
        }, {
          default: () => [a.header?.(oe)]
        }) : _(Kb, Fe({
          key: "header"
        }, ue, oe, {
          onClick: s.value !== "month" ? M : void 0
        }), {
          prepend: a.prepend,
          append: a.append
        }),
        default: () => T(Ge, null, [_(Wb, Fe(Z, {
          disabled: C.value,
          text: k.value,
          "onClick:next": I,
          "onClick:prev": x,
          "onClick:month": V,
          "onClick:year": B
        }), null), _(Df, {
          hideOnLeave: !0
        }, {
          default: () => [s.value === "months" ? _(Yb, Fe({
            key: "date-picker-months"
          }, U, {
            modelValue: p.value,
            "onUpdate:modelValue": [(ee) => p.value = ee, F],
            min: d.value,
            max: u.value,
            year: b.value,
            allowedMonths: O
          }), {
            month: a.month
          }) : s.value === "year" ? _(Gb, Fe({
            key: "date-picker-years"
          }, q, {
            modelValue: b.value,
            "onUpdate:modelValue": [(ee) => b.value = ee, H],
            min: d.value,
            max: u.value,
            allowedYears: P
          }), {
            year: a.year
          }) : _(jb, Fe({
            key: "date-picker-month"
          }, Y, {
            modelValue: l.value,
            "onUpdate:modelValue": (ee) => l.value = ee,
            month: p.value,
            "onUpdate:month": [(ee) => p.value = ee, F],
            year: b.value,
            "onUpdate:year": [(ee) => b.value = ee, H],
            min: d.value,
            max: u.value
          }), {
            day: a.day
          })]
        })]),
        actions: a.actions
      });
    }), {};
  }
}), sY = Be({
  actionText: String,
  bgColor: String,
  color: String,
  icon: St,
  image: String,
  justify: {
    type: String,
    default: "center"
  },
  headline: String,
  title: String,
  text: String,
  textWidth: {
    type: [Number, String],
    default: 500
  },
  href: String,
  to: String,
  ...pt(),
  ...Ta(),
  ...Oo({
    size: void 0
  }),
  ...rn()
}, "VEmptyState"), lY = We()({
  name: "VEmptyState",
  props: sY(),
  emits: {
    "click:action": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      themeClasses: r
    } = gn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = bn(() => e.bgColor), {
      dimensionStyles: l
    } = Ia(e), {
      displayClasses: s
    } = pi();
    function d(u) {
      n("click:action", u);
    }
    return Ye(() => {
      const u = !!(a.actions || e.actionText), f = !!(a.headline || e.headline), h = !!(a.title || e.title), y = !!(a.text || e.text), p = !!(a.media || e.image || e.icon), w = e.size || (e.image ? 200 : 96);
      return T("div", {
        class: Ae(["v-empty-state", {
          [`v-empty-state--${e.justify}`]: !0
        }, r.value, i.value, s.value, e.class]),
        style: Je([o.value, l.value, e.style])
      }, [p && T("div", {
        key: "media",
        class: "v-empty-state__media"
      }, [a.media ? _(Ht, {
        key: "media-defaults",
        defaults: {
          VImg: {
            src: e.image,
            height: w
          },
          VIcon: {
            size: w,
            icon: e.icon
          }
        }
      }, {
        default: () => [a.media()]
      }) : T(Ge, null, [e.image ? _(os, {
        key: "image",
        src: e.image,
        height: w
      }, null) : e.icon ? _(pn, {
        key: "icon",
        color: e.color,
        size: w,
        icon: e.icon
      }, null) : void 0])]), f && T("div", {
        key: "headline",
        class: "v-empty-state__headline"
      }, [a.headline?.() ?? e.headline]), h && T("div", {
        key: "title",
        class: "v-empty-state__title"
      }, [a.title?.() ?? e.title]), y && T("div", {
        key: "text",
        class: "v-empty-state__text",
        style: {
          maxWidth: ht(e.textWidth)
        }
      }, [a.text?.() ?? e.text]), a.default && T("div", {
        key: "content",
        class: "v-empty-state__content"
      }, [a.default()]), u && T("div", {
        key: "actions",
        class: "v-empty-state__actions"
      }, [_(Ht, {
        defaults: {
          VBtn: {
            class: "v-empty-state__action-btn",
            color: e.color ?? "surface-variant",
            href: e.href,
            text: e.actionText,
            to: e.to
          }
        }
      }, {
        default: () => [a.actions?.({
          props: {
            onClick: d
          }
        }) ?? _(Xt, {
          onClick: d
        }, null)]
      })])]);
    }), {};
  }
}), $f = Symbol.for("vuetify:v-expansion-panel"), $O = Be({
  ...pt(),
  ...W0()
}, "VExpansionPanelText"), Qb = We()({
  name: "VExpansionPanelText",
  props: $O(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt($f);
    if (!a) throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");
    const {
      hasContent: r,
      onAfterLeave: i
    } = K0(e, a.isSelected);
    return Ye(() => _(Av, {
      onAfterLeave: i
    }, {
      default: () => [sn(T("div", {
        class: Ae(["v-expansion-panel-text", e.class]),
        style: Je(e.style)
      }, [n.default && r.value && T("div", {
        class: "v-expansion-panel-text__wrapper"
      }, [n.default?.()])]), [[_a, a.isSelected.value]])]
    })), {};
  }
}), qO = Be({
  color: String,
  expandIcon: {
    type: St,
    default: "$expand"
  },
  collapseIcon: {
    type: St,
    default: "$collapse"
  },
  hideActions: Boolean,
  focusable: Boolean,
  static: Boolean,
  ripple: {
    type: [Boolean, Object],
    default: !1
  },
  readonly: Boolean,
  ...pt(),
  ...Ta()
}, "VExpansionPanelTitle"), Jb = We()({
  name: "VExpansionPanelTitle",
  directives: {
    vRipple: xr
  },
  props: qO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt($f);
    if (!a) throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");
    const {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = bn(() => e.color), {
      dimensionStyles: o
    } = Ia(e), l = W(() => ({
      collapseIcon: e.collapseIcon,
      disabled: a.disabled.value,
      expanded: a.isSelected.value,
      expandIcon: e.expandIcon,
      readonly: e.readonly
    })), s = ye(() => a.isSelected.value ? e.collapseIcon : e.expandIcon);
    return Ye(() => sn(T("button", {
      class: Ae(["v-expansion-panel-title", {
        "v-expansion-panel-title--active": a.isSelected.value,
        "v-expansion-panel-title--focusable": e.focusable,
        "v-expansion-panel-title--static": e.static
      }, r.value, e.class]),
      style: Je([i.value, o.value, e.style]),
      type: "button",
      tabindex: a.disabled.value ? -1 : void 0,
      disabled: a.disabled.value,
      "aria-expanded": a.isSelected.value,
      onClick: e.readonly ? void 0 : a.toggle
    }, [T("span", {
      class: "v-expansion-panel-title__overlay"
    }, null), n.default?.(l.value), !e.hideActions && _(Ht, {
      defaults: {
        VIcon: {
          icon: s.value
        }
      }
    }, {
      default: () => [T("span", {
        class: "v-expansion-panel-title__icon"
      }, [n.actions?.(l.value) ?? _(pn, null, null)])]
    })]), [[xr, e.ripple]])), {};
  }
}), HO = Be({
  title: String,
  text: String,
  bgColor: String,
  ...Ua(),
  ...gc(),
  ...qn(),
  ...$t(),
  ...qO(),
  ...$O()
}, "VExpansionPanel"), cY = We()({
  name: "VExpansionPanel",
  props: HO(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = yc(e, $f), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = bn(() => e.bgColor), {
      elevationClasses: o
    } = Xa(e), {
      roundedClasses: l
    } = ra(e), s = ye(() => a?.disabled.value || e.disabled), d = W(() => a.group.items.value.reduce((h, y, p) => (a.group.selected.value.includes(y.id) && h.push(p), h), [])), u = W(() => {
      const h = a.group.items.value.findIndex((y) => y.id === a.id);
      return !a.isSelected.value && d.value.some((y) => y - h === 1);
    }), f = W(() => {
      const h = a.group.items.value.findIndex((y) => y.id === a.id);
      return !a.isSelected.value && d.value.some((y) => y - h === -1);
    });
    return Ln($f, a), Ye(() => {
      const h = !!(n.text || e.text), y = !!(n.title || e.title), p = Jb.filterProps(e), w = Qb.filterProps(e);
      return _(e.tag, {
        class: Ae(["v-expansion-panel", {
          "v-expansion-panel--active": a.isSelected.value,
          "v-expansion-panel--before-active": u.value,
          "v-expansion-panel--after-active": f.value,
          "v-expansion-panel--disabled": s.value
        }, l.value, r.value, e.class]),
        style: Je([i.value, e.style])
      }, {
        default: () => [T("div", {
          class: Ae(["v-expansion-panel__shadow", ...o.value])
        }, null), _(Ht, {
          defaults: {
            VExpansionPanelTitle: {
              ...p
            },
            VExpansionPanelText: {
              ...w
            }
          }
        }, {
          default: () => [y && _(Jb, {
            key: "title"
          }, {
            default: () => [n.title ? n.title() : e.title]
          }), h && _(Qb, {
            key: "text"
          }, {
            default: () => [n.text ? n.text() : e.text]
          }), n.default?.()]
        })]
      });
    }), {
      groupItem: a
    };
  }
}), uY = ["default", "accordion", "inset", "popout"], dY = Be({
  flat: Boolean,
  ...pc(),
  ...us(HO(), ["bgColor", "collapseIcon", "color", "eager", "elevation", "expandIcon", "focusable", "hideActions", "readonly", "ripple", "rounded", "tile", "static"]),
  ...rn(),
  ...pt(),
  ...$t(),
  variant: {
    type: String,
    default: "default",
    validator: (e) => uY.includes(e)
  }
}, "VExpansionPanels"), fY = We()({
  name: "VExpansionPanels",
  props: dY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      next: a,
      prev: r
    } = ol(e, $f), {
      themeClasses: i
    } = gn(e), o = ye(() => e.variant && `v-expansion-panels--variant-${e.variant}`);
    return aa({
      VExpansionPanel: {
        bgColor: ye(() => e.bgColor),
        collapseIcon: ye(() => e.collapseIcon),
        color: ye(() => e.color),
        eager: ye(() => e.eager),
        elevation: ye(() => e.elevation),
        expandIcon: ye(() => e.expandIcon),
        focusable: ye(() => e.focusable),
        hideActions: ye(() => e.hideActions),
        readonly: ye(() => e.readonly),
        ripple: ye(() => e.ripple),
        rounded: ye(() => e.rounded),
        static: ye(() => e.static)
      }
    }), Ye(() => _(e.tag, {
      class: Ae(["v-expansion-panels", {
        "v-expansion-panels--flat": e.flat,
        "v-expansion-panels--tile": e.tile
      }, i.value, o.value, e.class]),
      style: Je(e.style)
    }, {
      default: () => [n.default?.({
        prev: r,
        next: a
      })]
    })), {
      next: a,
      prev: r
    };
  }
}), mY = Be({
  app: Boolean,
  appear: Boolean,
  extended: Boolean,
  layout: Boolean,
  offset: Boolean,
  modelValue: {
    type: Boolean,
    default: !0
  },
  ...Tn(Iv({
    active: !0
  }), ["location"]),
  ...fc(),
  ...fs(),
  ...eo({
    transition: "fab-transition"
  })
}, "VFab"), hY = We()({
  name: "VFab",
  props: mY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), r = rt(56), i = be(), {
      resizeRef: o
    } = Gi((f) => {
      f.length && (r.value = f[0].target.clientHeight);
    }), l = ye(() => e.app || e.absolute), s = W(() => l.value ? e.location?.split(" ").shift() ?? "bottom" : !1), d = W(() => l.value ? e.location?.split(" ")[1] ?? "end" : !1);
    Ar(() => e.app, () => {
      const f = mc({
        id: e.name,
        order: W(() => parseInt(e.order, 10)),
        position: s,
        layoutSize: W(() => e.layout ? r.value + 24 : 0),
        elementSize: W(() => r.value + 24),
        active: W(() => e.app && a.value),
        absolute: ye(() => e.absolute)
      });
      na(() => {
        i.value = f.layoutItemStyles.value;
      });
    });
    const u = be();
    return Ye(() => {
      const f = Xt.filterProps(e);
      return T("div", {
        ref: u,
        class: Ae(["v-fab", {
          "v-fab--absolute": e.absolute,
          "v-fab--app": !!e.app,
          "v-fab--extended": e.extended,
          "v-fab--offset": e.offset,
          [`v-fab--${s.value}`]: l.value,
          [`v-fab--${d.value}`]: l.value
        }, e.class]),
        style: Je([e.app ? {
          ...i.value
        } : {
          height: e.absolute ? "100%" : "inherit"
        }, e.style])
      }, [T("div", {
        class: "v-fab__container"
      }, [_(Cr, {
        appear: e.appear,
        transition: e.transition
      }, {
        default: () => [sn(_(Xt, Fe({
          ref: o
        }, f, {
          active: void 0,
          location: void 0
        }), n), [[_a, e.active]])]
      })])]);
    }), {};
  }
});
function _Y() {
  function e(n) {
    return [...n.dataTransfer?.items ?? []].filter((r) => r.kind === "file").map((r) => r.webkitGetAsEntry()).filter(Boolean).length > 0 || [...n.dataTransfer?.files ?? []].length > 0;
  }
  async function t(n) {
    const a = [], r = [...n.dataTransfer?.items ?? []].filter((i) => i.kind === "file").map((i) => i.webkitGetAsEntry()).filter(Boolean);
    if (r.length)
      for (const i of r) {
        const o = await zO(i, WO(".", i));
        a.push(...o.map((l) => l.file));
      }
    else
      a.push(...n.dataTransfer?.files ?? []);
    return a;
  }
  return {
    handleDrop: t,
    hasFilesOrFolders: e
  };
}
function zO(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
  return new Promise((n, a) => {
    e.isFile ? e.file((i) => n([{
      file: i,
      path: t
    }]), a) : e.isDirectory && e.createReader().readEntries(async (i) => {
      const o = [];
      for (const l of i)
        o.push(...await zO(l, WO(t, l)));
      n(o);
    });
  });
}
function WO(e, t) {
  return t.isDirectory ? `${e}/${t.name}` : e;
}
const vY = Be({
  chips: Boolean,
  counter: Boolean,
  counterSizeString: {
    type: String,
    default: "$vuetify.fileInput.counterSize"
  },
  counterString: {
    type: String,
    default: "$vuetify.fileInput.counter"
  },
  hideInput: Boolean,
  multiple: Boolean,
  showSize: {
    type: [Boolean, Number, String],
    default: !1,
    validator: (e) => typeof e == "boolean" || [1e3, 1024].includes(Number(e))
  },
  ...hs({
    prependIcon: "$file"
  }),
  modelValue: {
    type: [Array, Object],
    default: (e) => e.multiple ? [] : null,
    validator: (e) => ta(e).every((t) => t != null && typeof t == "object")
  },
  ...um({
    clearable: !0
  })
}, "VFileInput"), pY = We()({
  name: "VFileInput",
  inheritAttrs: !1,
  props: vY(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      t: i
    } = kn(), o = wt(e, "modelValue", e.modelValue, (H) => ta(H), (H) => !e.multiple && Array.isArray(H) ? H[0] : H), {
      isFocused: l,
      focus: s,
      blur: d
    } = ms(e), u = W(() => typeof e.showSize != "boolean" ? e.showSize : void 0), f = W(() => (o.value ?? []).reduce((H, K) => {
      let {
        size: Z = 0
      } = K;
      return H + Z;
    }, 0)), h = W(() => GS(f.value, u.value)), y = W(() => (o.value ?? []).map((H) => {
      const {
        name: K = "",
        size: Z = 0
      } = H;
      return e.showSize ? `${K} (${GS(Z, u.value)})` : K;
    })), p = W(() => {
      const H = o.value?.length ?? 0;
      return e.showSize ? i(e.counterSizeString, H, h.value) : i(e.counterString, H);
    }), w = be(), b = be(), v = be(), g = ye(() => l.value || e.active), k = W(() => ["plain", "underlined"].includes(e.variant)), A = rt(!1), {
      handleDrop: C,
      hasFilesOrFolders: D
    } = _Y();
    function P() {
      v.value !== document.activeElement && v.value?.focus(), l.value || s();
    }
    function O(H) {
      v.value?.click();
    }
    function I(H) {
      a("mousedown:control", H);
    }
    function x(H) {
      v.value?.click(), a("click:control", H);
    }
    function M(H) {
      H.stopPropagation(), P(), Dt(() => {
        o.value = [], dv(e["onClick:clear"], H);
      });
    }
    function V(H) {
      H.preventDefault(), H.stopImmediatePropagation(), A.value = !0;
    }
    function B(H) {
      H.preventDefault(), A.value = !1;
    }
    async function F(H) {
      if (H.preventDefault(), H.stopImmediatePropagation(), A.value = !1, !v.value || !D(H)) return;
      const K = new DataTransfer();
      for (const Z of await C(H))
        K.items.add(Z);
      v.value.files = K.files, v.value.dispatchEvent(new Event("change", {
        bubbles: !0
      }));
    }
    return tt(o, (H) => {
      (!Array.isArray(H) || !H.length) && v.value && (v.value.value = "");
    }), Ye(() => {
      const H = !!(r.counter || e.counter), K = !!(H || r.details), [Z, ue] = nl(n), {
        modelValue: Y,
        ...U
      } = hr.filterProps(e), q = Js.filterProps(e);
      return _(hr, Fe({
        ref: w,
        modelValue: e.multiple ? o.value : o.value[0],
        class: ["v-file-input", {
          "v-file-input--chips": !!e.chips,
          "v-file-input--dragging": A.value,
          "v-file-input--hide": e.hideInput,
          "v-input--plain-underlined": k.value
        }, e.class],
        style: e.style,
        "onClick:prepend": O
      }, Z, U, {
        centerAffix: !k.value,
        focused: l.value
      }), {
        ...r,
        default: (oe) => {
          let {
            id: ee,
            isDisabled: he,
            isDirty: ve,
            isReadonly: pe,
            isValid: z,
            hasDetails: ge
          } = oe;
          return _(Js, Fe({
            ref: b,
            prependIcon: e.prependIcon,
            onMousedown: I,
            onClick: x,
            "onClick:clear": M,
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"]
          }, q, {
            id: ee.value,
            active: g.value || ve.value,
            dirty: ve.value || e.dirty,
            disabled: he.value,
            focused: l.value,
            details: ge.value,
            error: z.value === !1,
            onDragover: V,
            onDrop: F
          }), {
            ...r,
            default: (Ve) => {
              let {
                props: {
                  class: Ne,
                  ...ce
                }
              } = Ve;
              return T(Ge, null, [T("input", Fe({
                ref: v,
                type: "file",
                readonly: pe.value,
                disabled: he.value,
                multiple: e.multiple,
                name: e.name,
                onClick: (ne) => {
                  ne.stopPropagation(), pe.value && ne.preventDefault(), P();
                },
                onChange: (ne) => {
                  if (!ne.target) return;
                  const Q = ne.target;
                  o.value = [...Q.files ?? []];
                },
                onDragleave: B,
                onFocus: P,
                onBlur: d
              }, ce, ue), null), T("div", {
                class: Ae(Ne)
              }, [!!o.value?.length && !e.hideInput && (r.selection ? r.selection({
                fileNames: y.value,
                totalBytes: f.value,
                totalBytesReadable: h.value
              }) : e.chips ? y.value.map((ne) => _(ad, {
                key: ne,
                size: "small",
                text: ne
              }, null)) : y.value.join(", "))])]);
            }
          });
        },
        details: K ? (oe) => T(Ge, null, [r.details?.(oe), H && T(Ge, null, [T("span", null, null), _(Pv, {
          active: !!o.value?.length,
          value: p.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), Za({}, w, b, v);
  }
}), gY = Be({
  app: Boolean,
  color: String,
  height: {
    type: [Number, String],
    default: "auto"
  },
  ...Hr(),
  ...pt(),
  ...Ua(),
  ...fc(),
  ...qn(),
  ...$t({
    tag: "footer"
  }),
  ...rn()
}, "VFooter"), yY = We()({
  name: "VFooter",
  props: gY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = be(), {
      themeClasses: r
    } = gn(e), {
      backgroundColorClasses: i,
      backgroundColorStyles: o
    } = bn(() => e.color), {
      borderClasses: l
    } = Xr(e), {
      elevationClasses: s
    } = Xa(e), {
      roundedClasses: d
    } = ra(e), u = rt(32), {
      resizeRef: f
    } = Gi((y) => {
      y.length && (u.value = y[0].target.clientHeight);
    }), h = W(() => e.height === "auto" ? u.value : parseInt(e.height, 10));
    return Ar(() => e.app, () => {
      const y = mc({
        id: e.name,
        order: W(() => parseInt(e.order, 10)),
        position: ye(() => "bottom"),
        layoutSize: h,
        elementSize: W(() => e.height === "auto" ? void 0 : h.value),
        active: ye(() => e.app),
        absolute: ye(() => e.absolute)
      });
      na(() => {
        a.value = y.layoutItemStyles.value;
      });
    }), Ye(() => _(e.tag, {
      ref: f,
      class: Ae(["v-footer", r.value, i.value, l.value, s.value, d.value, e.class]),
      style: Je([o.value, e.app ? a.value : {
        height: ht(e.height)
      }, e.style])
    }, n)), {};
  }
}), bY = Be({
  ...pt(),
  ...Pz()
}, "VForm"), wY = We()({
  name: "VForm",
  props: bY(),
  emits: {
    "update:modelValue": (e) => !0,
    submit: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Oz(e), i = be();
    function o(s) {
      s.preventDefault(), r.reset();
    }
    function l(s) {
      const d = s, u = r.validate();
      d.then = u.then.bind(u), d.catch = u.catch.bind(u), d.finally = u.finally.bind(u), a("submit", d), d.defaultPrevented || u.then((f) => {
        let {
          valid: h
        } = f;
        h && i.value?.submit();
      }), d.preventDefault();
    }
    return Ye(() => T("form", {
      ref: i,
      class: Ae(["v-form", e.class]),
      style: Je(e.style),
      novalidate: !0,
      onReset: o,
      onSubmit: l
    }, [n.default?.(r)])), Za(r, i);
  }
}), kY = Be({
  disabled: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  ...H0()
}, "VHover"), SY = We()({
  name: "VHover",
  props: kY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), {
      runOpenDelay: r,
      runCloseDelay: i
    } = z0(e, (o) => !e.disabled && (a.value = o));
    return () => n.default?.({
      isHovering: a.value,
      props: {
        onMouseenter: r,
        onMouseleave: i
      }
    });
  }
}), CY = Be({
  color: String,
  direction: {
    type: String,
    default: "vertical",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  side: {
    type: String,
    default: "end",
    validator: (e) => ["start", "end", "both"].includes(e)
  },
  mode: {
    type: String,
    default: "intersect",
    validator: (e) => ["intersect", "manual"].includes(e)
  },
  margin: [Number, String],
  loadMoreText: {
    type: String,
    default: "$vuetify.infiniteScroll.loadMore"
  },
  emptyText: {
    type: String,
    default: "$vuetify.infiniteScroll.empty"
  },
  ...Ta(),
  ...$t()
}, "VInfiniteScroll"), bA = vi({
  name: "VInfiniteScrollIntersect",
  props: {
    side: {
      type: String,
      required: !0
    },
    rootMargin: String
  },
  emits: {
    intersect: (e, t) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const {
      intersectionRef: a,
      isIntersecting: r
    } = nm();
    return tt(r, async (i) => {
      n("intersect", e.side, i);
    }), Ye(() => T("div", {
      class: "v-infinite-scroll-intersect",
      style: {
        "--v-infinite-margin-size": e.rootMargin
      },
      ref: a
    }, [ae(" ")])), {};
  }
}), AY = We()({
  name: "VInfiniteScroll",
  props: CY(),
  emits: {
    load: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = be(), i = rt("ok"), o = rt("ok"), l = W(() => ht(e.margin)), s = rt(!1);
    function d(D) {
      if (!r.value) return;
      const P = e.direction === "vertical" ? "scrollTop" : "scrollLeft";
      r.value[P] = D;
    }
    function u() {
      if (!r.value) return 0;
      const D = e.direction === "vertical" ? "scrollTop" : "scrollLeft";
      return r.value[D];
    }
    function f() {
      if (!r.value) return 0;
      const D = e.direction === "vertical" ? "scrollHeight" : "scrollWidth";
      return r.value[D];
    }
    function h() {
      if (!r.value) return 0;
      const D = e.direction === "vertical" ? "clientHeight" : "clientWidth";
      return r.value[D];
    }
    an(() => {
      r.value && (e.side === "start" ? d(f()) : e.side === "both" && d(f() / 2 - h() / 2));
    });
    function y(D, P) {
      D === "start" ? i.value = P : D === "end" ? o.value = P : D === "both" && (i.value = P, o.value = P);
    }
    function p(D) {
      return D === "start" ? i.value : o.value;
    }
    let w = 0;
    function b(D, P) {
      s.value = P, s.value && v(D);
    }
    function v(D) {
      if (e.mode !== "manual" && !s.value) return;
      const P = p(D);
      if (!r.value || ["empty", "loading"].includes(P)) return;
      w = f(), y(D, "loading");
      function O(I) {
        y(D, I), Dt(() => {
          I === "empty" || I === "error" || (I === "ok" && D === "start" && d(f() - w + u()), e.mode !== "manual" && Dt(() => {
            window.requestAnimationFrame(() => {
              window.requestAnimationFrame(() => {
                window.requestAnimationFrame(() => {
                  v(D);
                });
              });
            });
          }));
        });
      }
      a("load", {
        side: D,
        done: O
      });
    }
    const {
      t: g
    } = kn();
    function k(D, P) {
      if (e.side !== D && e.side !== "both") return;
      const O = () => v(D), I = {
        side: D,
        props: {
          onClick: O,
          color: e.color
        }
      };
      return P === "error" ? n.error?.(I) : P === "empty" ? n.empty?.(I) ?? T("div", null, [g(e.emptyText)]) : e.mode === "manual" ? P === "loading" ? n.loading?.(I) ?? _(rc, {
        indeterminate: !0,
        color: e.color
      }, null) : n["load-more"]?.(I) ?? _(Xt, {
        variant: "outlined",
        color: e.color,
        onClick: O
      }, {
        default: () => [g(e.loadMoreText)]
      }) : n.loading?.(I) ?? _(rc, {
        indeterminate: !0,
        color: e.color
      }, null);
    }
    const {
      dimensionStyles: A
    } = Ia(e);
    Ye(() => {
      const D = e.tag, P = e.side === "start" || e.side === "both", O = e.side === "end" || e.side === "both", I = e.mode === "intersect";
      return _(D, {
        ref: r,
        class: Ae(["v-infinite-scroll", `v-infinite-scroll--${e.direction}`, {
          "v-infinite-scroll--start": P,
          "v-infinite-scroll--end": O
        }]),
        style: Je(A.value)
      }, {
        default: () => [T("div", {
          class: "v-infinite-scroll__side"
        }, [k("start", i.value)]), P && I && _(bA, {
          key: "start",
          side: "start",
          onIntersect: b,
          rootMargin: l.value
        }, null), n.default?.(), O && I && _(bA, {
          key: "end",
          side: "end",
          onIntersect: b,
          rootMargin: l.value
        }, null), T("div", {
          class: "v-infinite-scroll__side"
        }, [k("end", o.value)])]
      });
    });
    function C(D) {
      const P = D ?? e.side;
      y(P, "ok"), Dt(() => {
        d(f() - w + u()), e.mode !== "manual" && Dt(() => {
          window.requestAnimationFrame(() => {
            window.requestAnimationFrame(() => {
              window.requestAnimationFrame(() => {
                P === "both" ? (v("start"), v("end")) : v(P);
              });
            });
          });
        });
      });
    }
    return {
      reset: C
    };
  }
}), KO = Symbol.for("vuetify:v-item-group"), xY = Be({
  ...pt(),
  ...pc({
    selectedClass: "v-item--selected"
  }),
  ...$t(),
  ...rn()
}, "VItemGroup"), TY = We()({
  name: "VItemGroup",
  props: xY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      isSelected: r,
      select: i,
      next: o,
      prev: l,
      selected: s
    } = ol(e, KO);
    return () => _(e.tag, {
      class: Ae(["v-item-group", a.value, e.class]),
      style: Je(e.style)
    }, {
      default: () => [n.default?.({
        isSelected: r,
        select: i,
        next: o,
        prev: l,
        selected: s.value
      })]
    });
  }
}), IY = We()({
  name: "VItem",
  props: gc(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      isSelected: a,
      select: r,
      toggle: i,
      selectedClass: o,
      value: l,
      disabled: s
    } = yc(e, KO);
    return () => n.default?.({
      isSelected: a.value,
      selectedClass: o.value,
      select: r,
      toggle: i,
      value: l.value,
      disabled: s.value
    });
  }
}), EY = Be({
  color: String,
  ...Hr(),
  ...pt(),
  ...qn(),
  ...$t({
    tag: "kbd"
  }),
  ...rn(),
  ...Ua()
}, "VKbd"), PY = We()({
  name: "VKbd",
  props: EY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      borderClasses: r
    } = Xr(e), {
      roundedClasses: i
    } = ra(e), {
      backgroundColorClasses: o,
      backgroundColorStyles: l
    } = bn(() => e.color), {
      elevationClasses: s
    } = Xa(e);
    return Ye(() => _(e.tag, {
      class: Ae(["v-kbd", a.value, o.value, r.value, s.value, i.value, e.class]),
      style: Je([l.value, e.style])
    }, n)), {};
  }
}), OY = Be({
  ...pt(),
  ...Ta(),
  ...sI()
}, "VLayout"), DY = We()({
  name: "VLayout",
  props: OY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      layoutClasses: a,
      layoutStyles: r,
      getLayoutItem: i,
      items: o,
      layoutRef: l
    } = cI(e), {
      dimensionStyles: s
    } = Ia(e);
    return Ye(() => T("div", {
      ref: l,
      class: Ae([a.value, e.class]),
      style: Je([s.value, r.value, e.style])
    }, [n.default?.()])), {
      getLayoutItem: i,
      items: o
    };
  }
}), BY = Be({
  position: {
    type: String,
    required: !0
  },
  size: {
    type: [Number, String],
    default: 300
  },
  modelValue: Boolean,
  ...pt(),
  ...fc()
}, "VLayoutItem"), VY = We()({
  name: "VLayoutItem",
  props: BY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      layoutItemStyles: a
    } = mc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: ye(() => e.position),
      elementSize: ye(() => e.size),
      layoutSize: ye(() => e.size),
      active: ye(() => e.modelValue),
      absolute: ye(() => e.absolute)
    });
    return () => T("div", {
      class: Ae(["v-layout-item", e.class]),
      style: Je([a.value, e.style])
    }, [n.default?.()]);
  }
}), MY = Be({
  modelValue: Boolean,
  options: {
    type: Object,
    // For more information on types, navigate to:
    // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API
    default: () => ({
      root: void 0,
      rootMargin: void 0,
      threshold: void 0
    })
  },
  ...pt(),
  ...Ta(),
  ...$t(),
  ...eo({
    transition: "fade-transition"
  })
}, "VLazy"), LY = We()({
  name: "VLazy",
  directives: {
    vIntersect: is
  },
  props: MY(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Ia(e), r = wt(e, "modelValue");
    function i(o) {
      r.value || (r.value = o);
    }
    return Ye(() => sn(_(e.tag, {
      class: Ae(["v-lazy", e.class]),
      style: Je([a.value, e.style])
    }, {
      default: () => [r.value && _(Cr, {
        transition: e.transition,
        appear: !0
      }, {
        default: () => [n.default?.()]
      })]
    }), [[is, {
      handler: i,
      options: e.options
    }, null]])), {};
  }
}), RY = Be({
  locale: String,
  fallbackLocale: String,
  messages: Object,
  rtl: {
    type: Boolean,
    default: void 0
  },
  ...pt()
}, "VLocaleProvider"), FY = We()({
  name: "VLocaleProvider",
  props: RY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      rtlClasses: a
    } = x4(e);
    return Ye(() => T("div", {
      class: Ae(["v-locale-provider", a.value, e.class]),
      style: Je(e.style)
    }, [n.default?.()])), {};
  }
}), NY = Be({
  scrollable: Boolean,
  ...pt(),
  ...Ta(),
  ...$t({
    tag: "main"
  })
}, "VMain"), UY = We()({
  name: "VMain",
  props: NY(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Ia(e), {
      mainStyles: r
    } = lI(), {
      ssrBootStyles: i
    } = _c();
    return Ye(() => _(e.tag, {
      class: Ae(["v-main", {
        "v-main--scrollable": e.scrollable
      }, e.class]),
      style: Je([r.value, i.value, a.value, e.style])
    }, {
      default: () => [e.scrollable ? T("div", {
        class: "v-main__scroller"
      }, [n.default?.()]) : n.default?.()]
    })), {};
  }
});
function $Y(e) {
  let {
    rootEl: t,
    isSticky: n,
    layoutItemStyles: a
  } = e;
  const r = rt(!1), i = rt(0), o = W(() => {
    const d = typeof r.value == "boolean" ? "top" : r.value;
    return [n.value ? {
      top: "auto",
      bottom: "auto",
      height: void 0
    } : void 0, r.value ? {
      [d]: ht(i.value)
    } : {
      top: a.value.top
    }];
  });
  an(() => {
    tt(n, (d) => {
      d ? window.addEventListener("scroll", s, {
        passive: !0
      }) : window.removeEventListener("scroll", s);
    }, {
      immediate: !0
    });
  }), Ja(() => {
    window.removeEventListener("scroll", s);
  });
  let l = 0;
  function s() {
    const d = l > window.scrollY ? "up" : "down", u = t.value.getBoundingClientRect(), f = parseFloat(a.value.top ?? 0), h = window.scrollY - Math.max(0, i.value - f), y = u.height + Math.max(i.value, f) - window.scrollY - window.innerHeight, p = parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y")) || 0;
    u.height < window.innerHeight - f ? (r.value = "top", i.value = f) : d === "up" && r.value === "bottom" || d === "down" && r.value === "top" ? (i.value = window.scrollY + u.top - p, r.value = !0) : d === "down" && y <= 0 ? (i.value = 0, r.value = "bottom") : d === "up" && h <= 0 && (p ? r.value !== "top" && (i.value = -h + p + f, r.value = "top") : (i.value = u.top + h, r.value = "top")), l = window.scrollY;
  }
  return {
    isStuck: r,
    stickyStyles: o
  };
}
const qY = 100, HY = 20;
function wA(e) {
  return (e < 0 ? -1 : 1) * Math.sqrt(Math.abs(e)) * 1.41421356237;
}
function kA(e) {
  if (e.length < 2)
    return 0;
  if (e.length === 2)
    return e[1].t === e[0].t ? 0 : (e[1].d - e[0].d) / (e[1].t - e[0].t);
  let t = 0;
  for (let n = e.length - 1; n > 0; n--) {
    if (e[n].t === e[n - 1].t)
      continue;
    const a = wA(t), r = (e[n].d - e[n - 1].d) / (e[n].t - e[n - 1].t);
    t += (r - a) * Math.abs(r), n === e.length - 1 && (t *= 0.5);
  }
  return wA(t) * 1e3;
}
function zY() {
  const e = {};
  function t(r) {
    Array.from(r.changedTouches).forEach((i) => {
      (e[i.identifier] ?? (e[i.identifier] = new DT(HY))).push([r.timeStamp, i]);
    });
  }
  function n(r) {
    Array.from(r.changedTouches).forEach((i) => {
      delete e[i.identifier];
    });
  }
  function a(r) {
    const i = e[r]?.values().reverse();
    if (!i)
      throw new Error(`No samples for touch id ${r}`);
    const o = i[0], l = [], s = [];
    for (const d of i) {
      if (o[0] - d[0] > qY) break;
      l.push({
        t: d[0],
        d: d[1].clientX
      }), s.push({
        t: d[0],
        d: d[1].clientY
      });
    }
    return {
      x: kA(l),
      y: kA(s),
      get direction() {
        const {
          x: d,
          y: u
        } = this, [f, h] = [Math.abs(d), Math.abs(u)];
        return f > h && d >= 0 ? "right" : f > h && d <= 0 ? "left" : h > f && u >= 0 ? "down" : h > f && u <= 0 ? "up" : WY();
      }
    };
  }
  return {
    addMovement: t,
    endTouch: n,
    getVelocity: a
  };
}
function WY() {
  throw new Error();
}
function KY(e) {
  let {
    el: t,
    isActive: n,
    isTemporary: a,
    width: r,
    touchless: i,
    position: o
  } = e;
  an(() => {
    window.addEventListener("touchstart", g, {
      passive: !0
    }), window.addEventListener("touchmove", k, {
      passive: !1
    }), window.addEventListener("touchend", A, {
      passive: !0
    });
  }), Ja(() => {
    window.removeEventListener("touchstart", g), window.removeEventListener("touchmove", k), window.removeEventListener("touchend", A);
  });
  const l = W(() => ["left", "right"].includes(o.value)), {
    addMovement: s,
    endTouch: d,
    getVelocity: u
  } = zY();
  let f = !1;
  const h = rt(!1), y = rt(0), p = rt(0);
  let w;
  function b(D, P) {
    return (o.value === "left" ? D : o.value === "right" ? document.documentElement.clientWidth - D : o.value === "top" ? D : o.value === "bottom" ? document.documentElement.clientHeight - D : eu()) - (P ? r.value : 0);
  }
  function v(D) {
    let P = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !0;
    const O = o.value === "left" ? (D - p.value) / r.value : o.value === "right" ? (document.documentElement.clientWidth - D - p.value) / r.value : o.value === "top" ? (D - p.value) / r.value : o.value === "bottom" ? (document.documentElement.clientHeight - D - p.value) / r.value : eu();
    return P ? Dn(O) : O;
  }
  function g(D) {
    if (i.value) return;
    const P = D.changedTouches[0].clientX, O = D.changedTouches[0].clientY, I = 25, x = o.value === "left" ? P < I : o.value === "right" ? P > document.documentElement.clientWidth - I : o.value === "top" ? O < I : o.value === "bottom" ? O > document.documentElement.clientHeight - I : eu(), M = n.value && (o.value === "left" ? P < r.value : o.value === "right" ? P > document.documentElement.clientWidth - r.value : o.value === "top" ? O < r.value : o.value === "bottom" ? O > document.documentElement.clientHeight - r.value : eu());
    (x || M || n.value && a.value) && (w = [P, O], p.value = b(l.value ? P : O, n.value), y.value = v(l.value ? P : O), f = p.value > -20 && p.value < 80, d(D), s(D));
  }
  function k(D) {
    const P = D.changedTouches[0].clientX, O = D.changedTouches[0].clientY;
    if (f) {
      if (!D.cancelable) {
        f = !1;
        return;
      }
      const x = Math.abs(P - w[0]), M = Math.abs(O - w[1]);
      (l.value ? x > M && x > 3 : M > x && M > 3) ? (h.value = !0, f = !1) : (l.value ? M : x) > 3 && (f = !1);
    }
    if (!h.value) return;
    D.preventDefault(), s(D);
    const I = v(l.value ? P : O, !1);
    y.value = Math.max(0, Math.min(1, I)), I > 1 ? p.value = b(l.value ? P : O, !0) : I < 0 && (p.value = b(l.value ? P : O, !1));
  }
  function A(D) {
    if (f = !1, !h.value) return;
    s(D), h.value = !1;
    const P = u(D.changedTouches[0].identifier), O = Math.abs(P.x), I = Math.abs(P.y);
    (l.value ? O > I && O > 400 : I > O && I > 3) ? n.value = P.direction === ({
      left: "right",
      right: "left",
      top: "down",
      bottom: "up"
    }[o.value] || eu()) : n.value = y.value > 0.5;
  }
  const C = W(() => h.value ? {
    transform: o.value === "left" ? `translateX(calc(-100% + ${y.value * r.value}px))` : o.value === "right" ? `translateX(calc(100% - ${y.value * r.value}px))` : o.value === "top" ? `translateY(calc(-100% + ${y.value * r.value}px))` : o.value === "bottom" ? `translateY(calc(100% - ${y.value * r.value}px))` : eu(),
    transition: "none"
  } : void 0);
  return Ar(h, () => {
    const D = t.value?.style.transform ?? null, P = t.value?.style.transition ?? null;
    na(() => {
      t.value?.style.setProperty("transform", C.value?.transform || "none"), t.value?.style.setProperty("transition", C.value?.transition || null);
    }), Fa(() => {
      t.value?.style.setProperty("transform", D), t.value?.style.setProperty("transition", P);
    });
  }), {
    isDragging: h,
    dragProgress: y,
    dragStyles: C
  };
}
function eu() {
  throw new Error();
}
const jY = ["start", "end", "left", "right", "top", "bottom"], YY = Be({
  color: String,
  disableResizeWatcher: Boolean,
  disableRouteWatcher: Boolean,
  expandOnHover: Boolean,
  floating: Boolean,
  modelValue: {
    type: Boolean,
    default: null
  },
  permanent: Boolean,
  rail: {
    type: Boolean,
    default: null
  },
  railWidth: {
    type: [Number, String],
    default: 56
  },
  scrim: {
    type: [Boolean, String],
    default: !0
  },
  image: String,
  temporary: Boolean,
  persistent: Boolean,
  touchless: Boolean,
  width: {
    type: [Number, String],
    default: 256
  },
  location: {
    type: String,
    default: "start",
    validator: (e) => jY.includes(e)
  },
  sticky: Boolean,
  ...Hr(),
  ...pt(),
  ...H0(),
  ...dc({
    mobile: null
  }),
  ...Ua(),
  ...fc(),
  ...qn(),
  ...$t({
    tag: "nav"
  }),
  ...rn()
}, "VNavigationDrawer"), GY = We()({
  name: "VNavigationDrawer",
  props: YY(),
  emits: {
    "update:modelValue": (e) => !0,
    "update:rail": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      isRtl: i
    } = Na(), {
      themeClasses: o
    } = gn(e), {
      borderClasses: l
    } = Xr(e), {
      backgroundColorClasses: s,
      backgroundColorStyles: d
    } = bn(() => e.color), {
      elevationClasses: u
    } = Xa(e), {
      displayClasses: f,
      mobile: h
    } = pi(e), {
      roundedClasses: y
    } = ra(e), p = NE(), w = wt(e, "modelValue", null, (U) => !!U), {
      ssrBootStyles: b
    } = _c(), {
      scopeId: v
    } = wc(), g = be(), k = rt(!1), {
      runOpenDelay: A,
      runCloseDelay: C
    } = z0(e, (U) => {
      k.value = U;
    }), D = W(() => e.rail && e.expandOnHover && k.value ? Number(e.width) : Number(e.rail ? e.railWidth : e.width)), P = W(() => jy(e.location, i.value)), O = ye(() => e.persistent), I = W(() => !e.permanent && (h.value || e.temporary)), x = W(() => e.sticky && !I.value && P.value !== "bottom");
    Ar(() => e.expandOnHover && e.rail != null, () => {
      tt(k, (U) => a("update:rail", !U));
    }), Ar(() => !e.disableResizeWatcher, () => {
      tt(I, (U) => !e.permanent && Dt(() => w.value = !U));
    }), Ar(() => !e.disableRouteWatcher && !!p, () => {
      tt(p.currentRoute, () => I.value && (w.value = !1));
    }), tt(() => e.permanent, (U) => {
      U && (w.value = !0);
    }), e.modelValue == null && !I.value && (w.value = e.permanent || !h.value);
    const {
      isDragging: M,
      dragProgress: V
    } = KY({
      el: g,
      isActive: w,
      isTemporary: I,
      width: D,
      touchless: ye(() => e.touchless),
      position: P
    }), B = W(() => {
      const U = I.value ? 0 : e.rail && e.expandOnHover ? Number(e.railWidth) : D.value;
      return M.value ? U * V.value : U;
    }), {
      layoutItemStyles: F,
      layoutItemScrimStyles: H
    } = mc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: P,
      layoutSize: B,
      elementSize: D,
      active: Hu(w),
      disableTransitions: ye(() => M.value),
      absolute: W(() => (
        // eslint-disable-next-line @typescript-eslint/no-use-before-define
        e.absolute || x.value && typeof K.value != "string"
      ))
    }), {
      isStuck: K,
      stickyStyles: Z
    } = $Y({
      rootEl: g,
      isSticky: x,
      layoutItemStyles: F
    }), ue = bn(() => typeof e.scrim == "string" ? e.scrim : null), Y = W(() => ({
      ...M.value ? {
        opacity: V.value * 0.2,
        transition: "none"
      } : void 0,
      ...H.value
    }));
    return aa({
      VList: {
        bgColor: "transparent"
      }
    }), Ye(() => {
      const U = r.image || e.image;
      return T(Ge, null, [_(e.tag, Fe({
        ref: g,
        onMouseenter: A,
        onMouseleave: C,
        class: ["v-navigation-drawer", `v-navigation-drawer--${P.value}`, {
          "v-navigation-drawer--expand-on-hover": e.expandOnHover,
          "v-navigation-drawer--floating": e.floating,
          "v-navigation-drawer--is-hovering": k.value,
          "v-navigation-drawer--rail": e.rail,
          "v-navigation-drawer--temporary": I.value,
          "v-navigation-drawer--persistent": O.value,
          "v-navigation-drawer--active": w.value,
          "v-navigation-drawer--sticky": x.value
        }, o.value, s.value, l.value, f.value, u.value, y.value, e.class],
        style: [d.value, F.value, b.value, Z.value, e.style]
      }, v, n), {
        default: () => [U && T("div", {
          key: "image",
          class: "v-navigation-drawer__img"
        }, [r.image ? _(Ht, {
          key: "image-defaults",
          disabled: !e.image,
          defaults: {
            VImg: {
              alt: "",
              cover: !0,
              height: "inherit",
              src: e.image
            }
          }
        }, r.image) : _(os, {
          key: "image-img",
          alt: "",
          cover: !0,
          height: "inherit",
          src: e.image
        }, null)]), r.prepend && T("div", {
          class: "v-navigation-drawer__prepend"
        }, [r.prepend?.()]), T("div", {
          class: "v-navigation-drawer__content"
        }, [r.default?.()]), r.append && T("div", {
          class: "v-navigation-drawer__append"
        }, [r.append?.()])]
      }), _($r, {
        name: "fade-transition"
      }, {
        default: () => [I.value && (M.value || w.value) && !!e.scrim && T("div", Fe({
          class: ["v-navigation-drawer__scrim", ue.backgroundColorClasses.value],
          style: [Y.value, ue.backgroundColorStyles.value],
          onClick: () => {
            O.value || (w.value = !1);
          }
        }, v), null)]
      })]);
    }), {
      isStuck: K
    };
  }
}), QY = vi({
  name: "VNoSsr",
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = EP();
    return () => a.value && n.default?.();
  }
}), JY = 50, XY = 500;
function ZY(e) {
  let {
    toggleUpDown: t
  } = e, n = -1, a = -1;
  Fa(i);
  function r(l) {
    i(), o(l), window.addEventListener("pointerup", i), document.addEventListener("blur", i), n = window.setTimeout(() => {
      a = window.setInterval(() => o(l), JY);
    }, XY);
  }
  function i() {
    window.clearTimeout(n), window.clearInterval(a), window.removeEventListener("pointerup", i), document.removeEventListener("blur", i);
  }
  function o(l) {
    t(l === "up");
  }
  return {
    holdStart: r,
    holdStop: i
  };
}
const e7 = Be({
  controlVariant: {
    type: String,
    default: "default"
  },
  inset: Boolean,
  hideInput: Boolean,
  modelValue: {
    type: Number,
    default: null
  },
  min: {
    type: Number,
    default: Number.MIN_SAFE_INTEGER
  },
  max: {
    type: Number,
    default: Number.MAX_SAFE_INTEGER
  },
  step: {
    type: Number,
    default: 1
  },
  precision: {
    type: Number,
    default: 0
  },
  minFractionDigits: {
    type: Number,
    default: null
  },
  decimalSeparator: {
    type: String,
    validator: (e) => !e || e.length === 1
  },
  ...Tn(dm(), ["modelValue", "validationValue"])
}, "VNumberInput"), t7 = We()({
  name: "VNumberInput",
  props: {
    ...e7()
  },
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = be(), {
      holdStart: r,
      holdStop: i
    } = ZY({
      toggleUpDown: I
    }), o = lm(e), l = W(() => o.isDisabled.value || o.isReadonly.value), s = rt(e.focused), {
      decimalSeparator: d
    } = kn(), u = W(() => e.decimalSeparator?.[0] || d.value);
    function f(q) {
      let oe = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : e.precision, ee = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !0;
      const he = oe == null ? String(q) : q.toFixed(oe);
      if (s.value && ee)
        return Number(he).toString().replace(".", u.value);
      if (e.minFractionDigits === null || oe !== null && oe < e.minFractionDigits)
        return he.replace(".", u.value);
      let [ve, pe] = he.split(".");
      return pe = (pe ?? "").padEnd(e.minFractionDigits, "0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`, "g"), ""), [ve, pe].filter(Boolean).join(u.value);
    }
    const h = wt(e, "modelValue", null, (q) => q ?? null, (q) => q == null ? q ?? null : Dn(Number(q), e.min, e.max)), y = rt(null);
    na(() => {
      s.value && !l.value || (h.value == null ? y.value = null : isNaN(h.value) || (y.value = f(h.value)));
    });
    const p = W({
      get: () => y.value,
      set(q) {
        if (q === null || q === "") {
          h.value = null, y.value = null;
          return;
        }
        const oe = Number(q.replace(u.value, "."));
        !isNaN(oe) && oe <= e.max && oe >= e.min && (h.value = oe, y.value = q);
      }
    }), w = W(() => l.value ? !1 : (h.value ?? 0) + e.step <= e.max), b = W(() => l.value ? !1 : (h.value ?? 0) - e.step >= e.min), v = W(() => e.hideInput ? "stacked" : e.controlVariant), g = ye(() => v.value === "split" ? "$plus" : "$collapse"), k = ye(() => v.value === "split" ? "$minus" : "$expand"), A = ye(() => v.value === "split" ? "default" : "small"), C = ye(() => v.value === "stacked" ? "auto" : "100%"), D = {
      props: {
        onClick: V,
        onPointerup: B,
        onPointerdown: F,
        onPointercancel: B
      }
    }, P = {
      props: {
        onClick: V,
        onPointerup: B,
        onPointerdown: H,
        onPointercancel: B
      }
    };
    tt(() => e.precision, () => Z()), tt(() => e.minFractionDigits, () => Z()), an(() => {
      K();
    });
    function O(q) {
      if (q == null) return 0;
      const oe = q.toString(), ee = oe.indexOf(".");
      return ~ee ? oe.length - ee : 0;
    }
    function I() {
      let q = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : !0;
      if (l.value) return;
      if (h.value == null) {
        p.value = f(Dn(0, e.min, e.max));
        return;
      }
      let oe = Math.max(O(h.value), O(e.step));
      e.precision != null && (oe = Math.max(oe, e.precision)), q ? w.value && (p.value = f(h.value + e.step, oe)) : b.value && (p.value = f(h.value - e.step, oe));
    }
    function x(q) {
      if (!q.data) return;
      const oe = q.target, {
        value: ee,
        selectionStart: he,
        selectionEnd: ve
      } = oe ?? {}, pe = ee ? ee.slice(0, he) + q.data + ee.slice(ve) : q.data, z = F3(pe, e.precision, u.value);
      if (new RegExp(`^-?\\d*${A_(u.value)}?\\d*$`).test(pe) || (q.preventDefault(), oe.value = z), e.precision != null) {
        if (pe.split(u.value)[1]?.length > e.precision) {
          q.preventDefault(), oe.value = z;
          const ge = (he ?? 0) + q.data.length;
          oe.setSelectionRange(ge, ge);
        }
        e.precision === 0 && pe.includes(u.value) && (q.preventDefault(), oe.value = z);
      }
    }
    async function M(q) {
      ["Enter", "ArrowLeft", "ArrowRight", "Backspace", "Delete", "Tab"].includes(q.key) || q.ctrlKey || ["ArrowDown", "ArrowUp"].includes(q.key) && (q.preventDefault(), q.stopPropagation(), K(), await Dt(), q.key === "ArrowDown" ? I(!1) : I());
    }
    function V(q) {
      q.stopPropagation();
    }
    function B(q) {
      q.currentTarget?.releasePointerCapture(q.pointerId), q.preventDefault(), i();
    }
    function F(q) {
      q.currentTarget?.setPointerCapture(q.pointerId), q.preventDefault(), q.stopPropagation(), r("up");
    }
    function H(q) {
      q.currentTarget?.setPointerCapture(q.pointerId), q.preventDefault(), q.stopPropagation(), r("down");
    }
    function K() {
      if (l.value || !a.value) return;
      const q = a.value.value, oe = Number(q.replace(u.value, "."));
      q && !isNaN(oe) ? p.value = f(Dn(oe, e.min, e.max)) : p.value = null;
    }
    function Z() {
      l.value || (p.value = h.value !== null && !isNaN(h.value) ? f(h.value, e.precision, !1) : null);
    }
    function ue() {
      if (!l.value) {
        if (h.value === null || isNaN(h.value)) {
          p.value = null;
          return;
        }
        p.value = h.value.toString().replace(".", u.value);
      }
    }
    function Y() {
      ue();
    }
    function U() {
      K();
    }
    return Ye(() => {
      const {
        modelValue: q,
        ...oe
      } = ss.filterProps(e);
      function ee() {
        return n.increment ? _(Ht, {
          key: "increment-defaults",
          defaults: {
            VBtn: {
              disabled: !w.value,
              flat: !0,
              height: C.value,
              size: A.value,
              icon: g.value
            }
          }
        }, {
          default: () => [n.increment(D)]
        }) : _(Xt, {
          "aria-hidden": "true",
          "data-testid": "increment",
          disabled: !w.value,
          flat: !0,
          height: C.value,
          icon: g.value,
          key: "increment-btn",
          onClick: V,
          onPointerdown: F,
          onPointerup: B,
          onPointercancel: B,
          size: A.value,
          tabindex: "-1"
        }, null);
      }
      function he() {
        return n.decrement ? _(Ht, {
          key: "decrement-defaults",
          defaults: {
            VBtn: {
              disabled: !b.value,
              flat: !0,
              height: C.value,
              size: A.value,
              icon: k.value
            }
          }
        }, {
          default: () => [n.decrement(P)]
        }) : _(Xt, {
          "aria-hidden": "true",
          "data-testid": "decrement",
          disabled: !b.value,
          flat: !0,
          height: C.value,
          icon: k.value,
          key: "decrement-btn",
          onClick: V,
          onPointerdown: H,
          onPointerup: B,
          onPointercancel: B,
          size: A.value,
          tabindex: "-1"
        }, null);
      }
      function ve() {
        return T("div", {
          class: "v-number-input__control"
        }, [he(), _(fi, {
          vertical: v.value !== "stacked"
        }, null), ee()]);
      }
      function pe() {
        return !e.hideInput && !e.inset ? _(fi, {
          vertical: !0
        }, null) : void 0;
      }
      const z = v.value === "split" ? T("div", {
        class: "v-number-input__control"
      }, [_(fi, {
        vertical: !0
      }, null), ee()]) : e.reverse || v.value === "hidden" ? void 0 : T(Ge, null, [pe(), ve()]), ge = n["append-inner"] || z, Ve = v.value === "split" ? T("div", {
        class: "v-number-input__control"
      }, [he(), _(fi, {
        vertical: !0
      }, null)]) : e.reverse && v.value !== "hidden" ? T(Ge, null, [ve(), pe()]) : void 0, Ne = n["prepend-inner"] || Ve;
      return _(ss, Fe({
        ref: a
      }, oe, {
        modelValue: p.value,
        "onUpdate:modelValue": (ce) => p.value = ce,
        focused: s.value,
        "onUpdate:focused": (ce) => s.value = ce,
        validationValue: h.value,
        onBeforeinput: x,
        onFocus: Y,
        onBlur: U,
        onKeydown: M,
        class: ["v-number-input", {
          "v-number-input--default": v.value === "default",
          "v-number-input--hide-input": e.hideInput,
          "v-number-input--inset": e.inset,
          "v-number-input--reverse": e.reverse,
          "v-number-input--split": v.value === "split",
          "v-number-input--stacked": v.value === "stacked"
        }, e.class],
        style: e.style,
        inputmode: "decimal"
      }), {
        ...n,
        "append-inner": ge ? function() {
          for (var ce = arguments.length, ne = new Array(ce), Q = 0; Q < ce; Q++)
            ne[Q] = arguments[Q];
          return T(Ge, null, [n["append-inner"]?.(...ne), z]);
        } : void 0,
        "prepend-inner": Ne ? function() {
          for (var ce = arguments.length, ne = new Array(ce), Q = 0; Q < ce; Q++)
            ne[Q] = arguments[Q];
          return T(Ge, null, [Ve, n["prepend-inner"]?.(...ne)]);
        } : void 0
      });
    }), Za({}, a);
  }
}), n7 = Be({
  autofocus: Boolean,
  divider: String,
  focusAll: Boolean,
  label: {
    type: String,
    default: "$vuetify.input.otp"
  },
  length: {
    type: [Number, String],
    default: 6
  },
  modelValue: {
    type: [Number, String],
    default: void 0
  },
  placeholder: String,
  type: {
    type: String,
    default: "number"
  },
  ...Ta(),
  ...sm(),
  ...us(um({
    variant: "outlined"
  }), ["baseColor", "bgColor", "class", "color", "disabled", "error", "loading", "rounded", "style", "theme", "variant"])
}, "VOtpInput"), a7 = We()({
  name: "VOtpInput",
  props: n7(),
  emits: {
    finish: (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const {
      dimensionStyles: i
    } = Ia(e), {
      isFocused: o,
      focus: l,
      blur: s
    } = ms(e), d = wt(e, "modelValue", "", (O) => O == null ? [] : String(O).split(""), (O) => O.join("")), {
      t: u
    } = kn(), f = W(() => Number(e.length)), h = W(() => Array(f.value).fill(0)), y = be(-1), p = be(), w = be([]), b = W(() => w.value[y.value]);
    Ar(() => e.autofocus, () => {
      const O = ku();
      O.run(() => {
        const {
          intersectionRef: I,
          isIntersecting: x
        } = nm();
        na(() => {
          I.value = w.value[0];
        }), tt(x, (M) => {
          M && (I.value?.focus(), O.stop());
        });
      });
    });
    function v() {
      if (P(b.value.value)) {
        b.value.value = "";
        return;
      }
      const O = d.value.slice(), I = b.value.value;
      O[y.value] = I;
      let x = null;
      y.value > d.value.length ? x = d.value.length + 1 : y.value + 1 !== f.value && (x = "next"), d.value = O, x && zl(p.value, x);
    }
    function g(O) {
      const I = d.value.slice(), x = y.value;
      let M = null;
      ["ArrowLeft", "ArrowRight", "Backspace", "Delete"].includes(O.key) && (O.preventDefault(), O.key === "ArrowLeft" ? M = "prev" : O.key === "ArrowRight" ? M = "next" : ["Backspace", "Delete"].includes(O.key) && (I[y.value] = "", d.value = I, y.value > 0 && O.key === "Backspace" ? M = "prev" : requestAnimationFrame(() => {
        w.value[x]?.select();
      })), requestAnimationFrame(() => {
        M != null && zl(p.value, M);
      }));
    }
    function k(O, I) {
      I.preventDefault(), I.stopPropagation();
      const x = I?.clipboardData?.getData("Text").trim().slice(0, f.value) ?? "", M = x.length - 1 === -1 ? O : x.length - 1;
      P(x) || (d.value = x.split(""), w.value?.[M].focus());
    }
    function A() {
      d.value = [];
    }
    function C(O, I) {
      l(), y.value = I;
    }
    function D() {
      s(), y.value = -1;
    }
    function P(O) {
      return e.type === "number" && /[^0-9]/g.test(O);
    }
    return aa({
      VField: {
        color: ye(() => e.color),
        bgColor: ye(() => e.color),
        baseColor: ye(() => e.baseColor),
        disabled: ye(() => e.disabled),
        error: ye(() => e.error),
        variant: ye(() => e.variant)
      }
    }, {
      scoped: !0
    }), tt(d, (O) => {
      O.length === f.value && (y.value = f.value - 1, a("finish", O.join("")));
    }, {
      deep: !0
    }), tt(y, (O) => {
      O < 0 || Dt(() => {
        w.value[O]?.select();
      });
    }), Ye(() => {
      const [O, I] = nl(n);
      return T("div", Fe({
        class: ["v-otp-input", {
          "v-otp-input--divided": !!e.divider
        }, e.class],
        style: [e.style]
      }, O), [T("div", {
        ref: p,
        class: "v-otp-input__content",
        style: Je([i.value])
      }, [h.value.map((x, M) => T(Ge, null, [e.divider && M !== 0 && T("span", {
        class: "v-otp-input__divider"
      }, [e.divider]), _(Js, {
        focused: o.value && e.focusAll || y.value === M,
        key: M
      }, {
        ...r,
        loader: void 0,
        default: () => T("input", {
          ref: (V) => w.value[M] = V,
          "aria-label": u(e.label, M + 1),
          autofocus: M === 0 && e.autofocus,
          autocomplete: "one-time-code",
          class: Ae(["v-otp-input__field"]),
          disabled: e.disabled,
          inputmode: e.type === "number" ? "numeric" : "text",
          min: e.type === "number" ? 0 : void 0,
          maxlength: M === 0 ? f.value : "1",
          placeholder: e.placeholder,
          type: e.type === "number" ? "text" : e.type,
          value: d.value[M],
          onInput: v,
          onFocus: (V) => C(V, M),
          onBlur: D,
          onKeydown: g,
          onPaste: (V) => k(M, V)
        }, null)
      })])), T("input", Fe({
        class: "v-otp-input-input",
        type: "hidden"
      }, I, {
        value: d.value.join("")
      }), null), _(xo, {
        contained: !0,
        contentClass: "v-otp-input__loader",
        modelValue: !!e.loading,
        persistent: !0
      }, {
        default: () => [r.loader?.() ?? _(rc, {
          color: typeof e.loading == "boolean" ? void 0 : e.loading,
          indeterminate: !0,
          size: "24",
          width: "2"
        }, null)]
      }), r.default?.()])]);
    }), {
      blur: () => {
        w.value?.some((O) => O.blur());
      },
      focus: () => {
        w.value?.[0].focus();
      },
      reset: A,
      isFocused: o
    };
  }
});
function r7(e) {
  return Math.floor(Math.abs(e)) * Math.sign(e);
}
const i7 = Be({
  scale: {
    type: [Number, String],
    default: 0.5
  },
  ...pt()
}, "VParallax"), o7 = We()({
  name: "VParallax",
  props: i7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      intersectionRef: a,
      isIntersecting: r
    } = nm(), {
      resizeRef: i,
      contentRect: o
    } = Gi(), {
      height: l
    } = pi(), s = be();
    na(() => {
      a.value = i.value = s.value?.$el;
    });
    let d;
    tt(r, (y) => {
      y ? (d = Uw(a.value), d = d === document.scrollingElement ? document : d, d.addEventListener("scroll", h, {
        passive: !0
      }), h()) : d.removeEventListener("scroll", h);
    }), Ja(() => {
      d?.removeEventListener("scroll", h);
    }), tt(l, h), tt(() => o.value?.height, h);
    const u = W(() => 1 - Dn(Number(e.scale)));
    let f = -1;
    function h() {
      r.value && (cancelAnimationFrame(f), f = requestAnimationFrame(() => {
        const y = (s.value?.$el).querySelector(".v-img__img");
        if (!y) return;
        const p = d instanceof Document ? document.documentElement.clientHeight : d.clientHeight, w = d instanceof Document ? window.scrollY : d.scrollTop, b = a.value.getBoundingClientRect().top + w, v = o.value.height, g = b + (v - p) / 2, k = r7((w - g) * u.value), A = Math.max(1, (u.value * (p - v) + v) / v);
        y.style.setProperty("transform", `translateY(${k}px) scale(${A})`);
      }));
    }
    return Ye(() => _(os, {
      class: Ae(["v-parallax", {
        "v-parallax--active": r.value
      }, e.class]),
      style: Je(e.style),
      ref: s,
      cover: !0,
      onLoadstart: h,
      onLoad: h
    }, n)), {};
  }
}), s7 = Be({
  ...Ev({
    falseIcon: "$radioOff",
    trueIcon: "$radioOn"
  })
}, "VRadio"), l7 = We()({
  name: "VRadio",
  props: s7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => {
      const a = Qs.filterProps(e);
      return _(Qs, Fe(a, {
        class: ["v-radio", e.class],
        style: e.style,
        type: "radio"
      }), n);
    }), {};
  }
}), c7 = Be({
  height: {
    type: [Number, String],
    default: "auto"
  },
  ...hs(),
  ...Tn(R0(), ["multiple"]),
  trueIcon: {
    type: St,
    default: "$radioOn"
  },
  falseIcon: {
    type: St,
    default: "$radioOff"
  },
  type: {
    type: String,
    default: "radio"
  }
}, "VRadioGroup"), u7 = We()({
  name: "VRadioGroup",
  inheritAttrs: !1,
  props: c7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = qr(), i = W(() => e.id || `radio-group-${r}`), o = wt(e, "modelValue"), l = be();
    return Ye(() => {
      const [s, d] = nl(n), u = hr.filterProps(e), f = Qs.filterProps(e), h = a.label ? a.label({
        label: e.label,
        props: {
          for: i.value
        }
      }) : e.label;
      return _(hr, Fe({
        ref: l,
        class: ["v-radio-group", e.class],
        style: e.style
      }, s, u, {
        modelValue: o.value,
        "onUpdate:modelValue": (y) => o.value = y,
        id: i.value
      }), {
        ...a,
        default: (y) => {
          let {
            id: p,
            messagesId: w,
            isDisabled: b,
            isReadonly: v
          } = y;
          return T(Ge, null, [h && _(nd, {
            id: p.value
          }, {
            default: () => [h]
          }), _(GE, Fe(f, {
            id: p.value,
            "aria-describedby": w.value,
            defaultsTarget: "VRadio",
            trueIcon: e.trueIcon,
            falseIcon: e.falseIcon,
            type: e.type,
            disabled: b.value,
            readonly: v.value,
            "aria-labelledby": h ? p.value : void 0,
            multiple: !1
          }, d, {
            modelValue: o.value,
            "onUpdate:modelValue": (g) => o.value = g
          }), a)]);
        }
      });
    }), Za({}, l);
  }
}), d7 = Be({
  ...sm(),
  ...hs(),
  ...JP(),
  strict: Boolean,
  modelValue: {
    type: Array,
    default: () => [0, 0]
  }
}, "VRangeSlider"), f7 = We()({
  name: "VRangeSlider",
  props: d7(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    end: (e) => !0,
    start: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = be(), i = be(), o = be(), {
      rtlClasses: l
    } = Na();
    function s(x) {
      if (!r.value || !i.value) return;
      const M = Ub(x, r.value.$el, e.direction), V = Ub(x, i.value.$el, e.direction), B = Math.abs(M), F = Math.abs(V);
      return B < F || B === F && M < 0 ? r.value.$el : i.value.$el;
    }
    const d = XP(e), u = wt(e, "modelValue", void 0, (x) => x?.length ? x.map((M) => d.roundValue(M)) : [0, 0]), {
      activeThumbRef: f,
      hasLabels: h,
      max: y,
      min: p,
      mousePressed: w,
      onSliderMousedown: b,
      onSliderTouchstart: v,
      position: g,
      trackContainerRef: k,
      readonly: A
    } = ZP({
      props: e,
      steps: d,
      onSliderStart: () => {
        a("start", u.value);
      },
      onSliderEnd: (x) => {
        let {
          value: M
        } = x;
        const V = f.value === r.value?.$el ? [M, u.value[1]] : [u.value[0], M];
        !e.strict && V[0] < V[1] && (u.value = V), a("end", u.value);
      },
      onSliderMove: (x) => {
        let {
          value: M
        } = x;
        const [V, B] = u.value;
        !e.strict && V === B && V !== p.value && (f.value = M > V ? i.value?.$el : r.value?.$el, f.value?.focus()), f.value === r.value?.$el ? u.value = [Math.min(M, B), B] : u.value = [V, Math.max(V, M)];
      },
      getActiveThumb: s
    }), {
      isFocused: C,
      focus: D,
      blur: P
    } = ms(e), O = W(() => g(u.value[0])), I = W(() => g(u.value[1]));
    return Ye(() => {
      const x = hr.filterProps(e), M = !!(e.label || n.label || n.prepend);
      return _(hr, Fe({
        class: ["v-slider", "v-range-slider", {
          "v-slider--has-labels": !!n["tick-label"] || h.value,
          "v-slider--focused": C.value,
          "v-slider--pressed": w.value,
          "v-slider--disabled": e.disabled
        }, l.value, e.class],
        style: e.style,
        ref: o
      }, x, {
        focused: C.value
      }), {
        ...n,
        prepend: M ? (V) => T(Ge, null, [n.label?.(V) ?? (e.label ? _(nd, {
          class: "v-slider__label",
          text: e.label
        }, null) : void 0), n.prepend?.(V)]) : void 0,
        default: (V) => {
          let {
            id: B,
            messagesId: F
          } = V;
          return T("div", {
            class: "v-slider__container",
            onMousedown: A.value ? void 0 : b,
            onTouchstartPassive: A.value ? void 0 : v
          }, [T("input", {
            id: `${B.value}_start`,
            name: e.name || B.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: u.value[0]
          }, null), T("input", {
            id: `${B.value}_stop`,
            name: e.name || B.value,
            disabled: !!e.disabled,
            readonly: !!e.readonly,
            tabindex: "-1",
            value: u.value[1]
          }, null), _(eO, {
            ref: k,
            start: O.value,
            stop: I.value
          }, {
            "tick-label": n["tick-label"]
          }), _($b, {
            ref: r,
            "aria-describedby": F.value,
            focused: C && f.value === r.value?.$el,
            modelValue: u.value[0],
            "onUpdate:modelValue": (H) => u.value = [H, u.value[1]],
            onFocus: (H) => {
              D(), f.value = r.value?.$el, y.value !== p.value && u.value[0] === u.value[1] && u.value[1] === p.value && H.relatedTarget !== i.value?.$el && (r.value?.$el.blur(), i.value?.$el.focus());
            },
            onBlur: () => {
              P(), f.value = void 0;
            },
            min: p.value,
            max: u.value[1],
            position: O.value,
            ripple: e.ripple
          }, {
            "thumb-label": n["thumb-label"]
          }), _($b, {
            ref: i,
            "aria-describedby": F.value,
            focused: C && f.value === i.value?.$el,
            modelValue: u.value[1],
            "onUpdate:modelValue": (H) => u.value = [u.value[0], H],
            onFocus: (H) => {
              D(), f.value = i.value?.$el, y.value !== p.value && u.value[0] === u.value[1] && u.value[0] === y.value && H.relatedTarget !== r.value?.$el && (i.value?.$el.blur(), r.value?.$el.focus());
            },
            onBlur: () => {
              P(), f.value = void 0;
            },
            min: u.value[0],
            max: y.value,
            position: I.value,
            ripple: e.ripple
          }, {
            "thumb-label": n["thumb-label"]
          })]);
        }
      });
    }), Za({
      focus: () => r.value?.$el.focus()
    }, o);
  }
}), m7 = Be({
  name: String,
  itemAriaLabel: {
    type: String,
    default: "$vuetify.rating.ariaLabel.item"
  },
  activeColor: String,
  color: String,
  clearable: Boolean,
  disabled: Boolean,
  emptyIcon: {
    type: St,
    default: "$ratingEmpty"
  },
  fullIcon: {
    type: St,
    default: "$ratingFull"
  },
  halfIncrements: Boolean,
  hover: Boolean,
  length: {
    type: [Number, String],
    default: 5
  },
  readonly: Boolean,
  modelValue: {
    type: [Number, String],
    default: 0
  },
  itemLabels: Array,
  itemLabelPosition: {
    type: String,
    default: "top",
    validator: (e) => ["top", "bottom"].includes(e)
  },
  ripple: Boolean,
  ...pt(),
  ...Wa(),
  ...Oo(),
  ...$t(),
  ...rn()
}, "VRating"), h7 = We()({
  name: "VRating",
  props: m7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      t: a
    } = kn(), {
      themeClasses: r
    } = gn(e), i = wt(e, "modelValue"), o = W(() => Dn(parseFloat(i.value), 0, Number(e.length))), l = W(() => ci(Number(e.length), 1)), s = W(() => l.value.flatMap((b) => e.halfIncrements ? [b - 0.5, b] : [b])), d = rt(-1), u = W(() => s.value.map((b) => {
      const v = e.hover && d.value > -1, g = o.value >= b, k = d.value >= b, C = (v ? k : g) ? e.fullIcon : e.emptyIcon, D = e.activeColor ?? e.color, P = g || k ? D : e.color;
      return {
        isFilled: g,
        isHovered: k,
        icon: C,
        color: P
      };
    })), f = W(() => [0, ...s.value].map((b) => {
      function v() {
        d.value = b;
      }
      function g() {
        d.value = -1;
      }
      function k() {
        e.disabled || e.readonly || (i.value = o.value === b && e.clearable ? 0 : b);
      }
      return {
        onMouseenter: e.hover ? v : void 0,
        onMouseleave: e.hover ? g : void 0,
        onClick: k
      };
    })), h = qr(), y = W(() => e.name ?? `v-rating-${h}`);
    function p(b) {
      let {
        value: v,
        index: g,
        showStar: k = !0
      } = b;
      const {
        onMouseenter: A,
        onMouseleave: C,
        onClick: D
      } = f.value[g + 1], P = `${y.value}-${String(v).replace(".", "-")}`, O = {
        color: u.value[g]?.color,
        density: e.density,
        disabled: e.disabled,
        icon: u.value[g]?.icon,
        ripple: e.ripple,
        size: e.size,
        variant: "plain"
      };
      return T(Ge, null, [T("label", {
        for: P,
        class: Ae({
          "v-rating__item--half": e.halfIncrements && v % 1 > 0,
          "v-rating__item--full": e.halfIncrements && v % 1 === 0
        }),
        onMouseenter: A,
        onMouseleave: C,
        onClick: D
      }, [T("span", {
        class: "v-rating__hidden"
      }, [a(e.itemAriaLabel, v, e.length)]), k ? n.item ? n.item({
        ...u.value[g],
        props: O,
        value: v,
        index: g,
        rating: o.value
      }) : _(Xt, Fe({
        "aria-label": a(e.itemAriaLabel, v, e.length)
      }, O), null) : void 0]), T("input", {
        class: "v-rating__hidden",
        name: y.value,
        id: P,
        type: "radio",
        value: v,
        checked: o.value === v,
        tabindex: -1,
        readonly: e.readonly,
        disabled: e.disabled
      }, null)]);
    }
    function w(b) {
      return n["item-label"] ? n["item-label"](b) : b.label ? T("span", null, [b.label]) : T("span", null, [ae(" ")]);
    }
    return Ye(() => {
      const b = !!e.itemLabels?.length || n["item-label"];
      return _(e.tag, {
        class: Ae(["v-rating", {
          "v-rating--hover": e.hover,
          "v-rating--readonly": e.readonly
        }, r.value, e.class]),
        style: Je(e.style)
      }, {
        default: () => [_(p, {
          value: 0,
          index: -1,
          showStar: !1
        }, null), l.value.map((v, g) => T("div", {
          class: "v-rating__wrapper"
        }, [b && e.itemLabelPosition === "top" ? w({
          value: v,
          index: g,
          label: e.itemLabels?.[g]
        }) : void 0, T("div", {
          class: "v-rating__item"
        }, [e.halfIncrements ? T(Ge, null, [_(p, {
          value: v - 0.5,
          index: g * 2
        }, null), _(p, {
          value: v,
          index: g * 2 + 1
        }, null)]) : _(p, {
          value: v,
          index: g
        }, null)]), b && e.itemLabelPosition === "bottom" ? w({
          value: v,
          index: g,
          label: e.itemLabels?.[g]
        }) : void 0]))]
      });
    }), {};
  }
}), _7 = {
  actions: "button@2",
  article: "heading, paragraph",
  avatar: "avatar",
  button: "button",
  card: "image, heading",
  "card-avatar": "image, list-item-avatar",
  chip: "chip",
  "date-picker": "list-item, heading, divider, date-picker-options, date-picker-days, actions",
  "date-picker-options": "text, avatar@2",
  "date-picker-days": "avatar@28",
  divider: "divider",
  heading: "heading",
  image: "image",
  "list-item": "text",
  "list-item-avatar": "avatar, text",
  "list-item-two-line": "sentences",
  "list-item-avatar-two-line": "avatar, sentences",
  "list-item-three-line": "paragraph",
  "list-item-avatar-three-line": "avatar, paragraph",
  ossein: "ossein",
  paragraph: "text@3",
  sentences: "text@2",
  subtitle: "text",
  table: "table-heading, table-thead, table-tbody, table-tfoot",
  "table-heading": "chip, text",
  "table-thead": "heading@6",
  "table-tbody": "table-row-divider@6",
  "table-row-divider": "table-row, divider",
  "table-row": "text@6",
  "table-tfoot": "text@2, avatar@2",
  text: "text"
};
function v7(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  return T("div", {
    class: Ae(["v-skeleton-loader__bone", `v-skeleton-loader__${e}`])
  }, [t]);
}
function SA(e) {
  const [t, n] = e.split("@");
  return Array.from({
    length: n
  }).map(() => zv(t));
}
function zv(e) {
  let t = [];
  if (!e) return t;
  const n = _7[e];
  if (e !== n) {
    if (e.includes(",")) return CA(e);
    if (e.includes("@")) return SA(e);
    n.includes(",") ? t = CA(n) : n.includes("@") ? t = SA(n) : n && t.push(zv(n));
  }
  return [v7(e, t)];
}
function CA(e) {
  return e.replace(/\s/g, "").split(",").map(zv);
}
const p7 = Be({
  boilerplate: Boolean,
  color: String,
  loading: Boolean,
  loadingText: {
    type: String,
    default: "$vuetify.loading"
  },
  type: {
    type: [String, Array],
    default: "ossein"
  },
  ...Ta(),
  ...Ua(),
  ...rn()
}, "VSkeletonLoader"), g7 = We()({
  name: "VSkeletonLoader",
  props: p7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      backgroundColorClasses: a,
      backgroundColorStyles: r
    } = bn(() => e.color), {
      dimensionStyles: i
    } = Ia(e), {
      elevationClasses: o
    } = Xa(e), {
      themeClasses: l
    } = gn(e), {
      t: s
    } = kn(), d = W(() => zv(ta(e.type).join(",")));
    return Ye(() => {
      const u = !n.default || e.loading, f = e.boilerplate || !u ? {} : {
        ariaLive: "polite",
        ariaLabel: s(e.loadingText),
        role: "alert"
      };
      return T("div", Fe({
        class: ["v-skeleton-loader", {
          "v-skeleton-loader--boilerplate": e.boilerplate
        }, l.value, a.value, o.value],
        style: [r.value, u ? i.value : {}]
      }, f), [u ? d.value : n.default?.()]);
    }), {};
  }
}), y7 = We()({
  name: "VSlideGroupItem",
  props: gc(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = yc(e, rP);
    return () => n.default?.({
      isSelected: a.isSelected.value,
      select: a.select,
      toggle: a.toggle,
      selectedClass: a.selectedClass.value
    });
  }
});
function b7(e) {
  const t = rt(e());
  let n = -1;
  function a() {
    clearInterval(n);
  }
  function r() {
    a(), Dt(() => t.value = e());
  }
  function i(o) {
    const l = o ? getComputedStyle(o) : {
      transitionDuration: 0.2
    }, s = parseFloat(l.transitionDuration) * 1e3 || 200;
    if (a(), t.value <= 0) return;
    const d = performance.now();
    n = window.setInterval(() => {
      const u = performance.now() - d + s;
      t.value = Math.max(e() - u, 0), t.value <= 0 && a();
    }, s);
  }
  return Fa(a), {
    clear: a,
    time: t,
    start: i,
    reset: r
  };
}
const jO = Be({
  multiLine: Boolean,
  text: String,
  timer: [Boolean, String],
  timeout: {
    type: [Number, String],
    default: 5e3
  },
  vertical: Boolean,
  ...fs({
    location: "bottom"
  }),
  ...ed(),
  ...qn(),
  ...Di(),
  ...rn(),
  ...Tn(cm({
    transition: "v-snackbar-transition"
  }), ["persistent", "noClickAnimation", "scrim", "scrollStrategy"])
}, "VSnackbar"), Xb = We()({
  name: "VSnackbar",
  props: jO(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), {
      positionClasses: r
    } = td(e), {
      scopeId: i
    } = wc(), {
      themeClasses: o
    } = gn(e), {
      colorClasses: l,
      colorStyles: s,
      variantClasses: d
    } = vc(e), {
      roundedClasses: u
    } = ra(e), f = b7(() => Number(e.timeout)), h = be(), y = be(), p = rt(!1), w = rt(0), b = be(), v = Gt(Sf, void 0);
    Ar(() => !!v, () => {
      const M = lI();
      na(() => {
        b.value = M.mainStyles.value;
      });
    }), tt(a, k), tt(() => e.timeout, k), an(() => {
      a.value && k();
    });
    let g = -1;
    function k() {
      f.reset(), window.clearTimeout(g);
      const M = Number(e.timeout);
      if (!a.value || M === -1) return;
      const V = Bw(y.value);
      f.start(V), g = window.setTimeout(() => {
        a.value = !1;
      }, M);
    }
    function A() {
      f.reset(), window.clearTimeout(g);
    }
    function C() {
      p.value = !0, A();
    }
    function D() {
      p.value = !1, k();
    }
    function P(M) {
      w.value = M.touches[0].clientY;
    }
    function O(M) {
      Math.abs(w.value - M.changedTouches[0].clientY) > 50 && (a.value = !1);
    }
    function I() {
      p.value && D();
    }
    const x = W(() => e.location.split(" ").reduce((M, V) => (M[`v-snackbar--${V}`] = !0, M), {}));
    return Ye(() => {
      const M = xo.filterProps(e), V = !!(n.default || n.text || e.text);
      return _(xo, Fe({
        ref: h,
        class: ["v-snackbar", {
          "v-snackbar--active": a.value,
          "v-snackbar--multi-line": e.multiLine && !e.vertical,
          "v-snackbar--timer": !!e.timer,
          "v-snackbar--vertical": e.vertical
        }, x.value, r.value, e.class],
        style: [b.value, e.style]
      }, M, {
        modelValue: a.value,
        "onUpdate:modelValue": (B) => a.value = B,
        contentProps: Fe({
          class: ["v-snackbar__wrapper", o.value, l.value, u.value, d.value],
          style: [s.value],
          onPointerenter: C,
          onPointerleave: D
        }, M.contentProps),
        persistent: !0,
        noClickAnimation: !0,
        scrim: !1,
        scrollStrategy: "none",
        _disableGlobalStack: !0,
        onTouchstartPassive: P,
        onTouchend: O,
        onAfterLeave: I
      }, i), {
        default: () => [il(!1, "v-snackbar"), e.timer && !p.value && T("div", {
          key: "timer",
          class: "v-snackbar__timer"
        }, [_(xv, {
          ref: y,
          color: typeof e.timer == "string" ? e.timer : "info",
          max: e.timeout,
          modelValue: f.time.value
        }, null)]), V && T("div", {
          key: "content",
          class: "v-snackbar__content",
          role: "status",
          "aria-live": "polite"
        }, [n.text?.() ?? e.text, n.default?.()]), n.actions && _(Ht, {
          defaults: {
            VBtn: {
              variant: "text",
              ripple: !1,
              slim: !0
            }
          }
        }, {
          default: () => [T("div", {
            class: "v-snackbar__actions"
          }, [n.actions({
            isActive: a
          })])]
        })],
        activator: n.activator
      });
    }), Za({}, h);
  }
}), w7 = Be({
  // TODO: Port this to Snackbar on dev
  closable: [Boolean, String],
  closeText: {
    type: String,
    default: "$vuetify.dismiss"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  ...Tn(jO(), ["modelValue"])
}, "VSnackbarQueue"), k7 = We()({
  name: "VSnackbarQueue",
  props: w7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = kn(), i = rt(!1), o = rt(!1), l = rt();
    tt(() => e.modelValue.length, (h, y) => {
      !o.value && h > y && d();
    }), tt(i, (h) => {
      h && (o.value = !0);
    });
    function s() {
      e.modelValue.length ? d() : (l.value = void 0, o.value = !1);
    }
    function d() {
      const [h, ...y] = e.modelValue;
      n("update:modelValue", y), l.value = typeof h == "string" ? {
        text: h
      } : h, Dt(() => {
        i.value = !0;
      });
    }
    function u() {
      i.value = !1;
    }
    const f = W(() => ({
      color: typeof e.closable == "string" ? e.closable : void 0,
      text: r(e.closeText)
    }));
    Ye(() => {
      const h = !!(e.closable || a.actions), {
        modelValue: y,
        ...p
      } = Xb.filterProps(e);
      return T(Ge, null, [o.value && !!l.value && (a.default ? _(Ht, {
        defaults: {
          VSnackbar: l.value
        }
      }, {
        default: () => [a.default({
          item: l.value
        })]
      }) : _(Xb, Fe(p, l.value, {
        modelValue: i.value,
        "onUpdate:modelValue": (w) => i.value = w,
        onAfterLeave: s
      }), {
        text: a.text ? () => a.text?.({
          item: l.value
        }) : void 0,
        actions: h ? () => T(Ge, null, [a.actions ? _(Ht, {
          defaults: {
            VBtn: f.value
          }
        }, {
          default: () => [a.actions({
            item: l.value,
            props: {
              onClick: u
            }
          })]
        }) : _(Xt, Fe(f.value, {
          onClick: u
        }), null)]) : void 0
      }))]);
    });
  }
}), YO = Be({
  autoDraw: Boolean,
  autoDrawDuration: [Number, String],
  autoDrawEasing: {
    type: String,
    default: "ease"
  },
  color: String,
  gradient: {
    type: Array,
    default: () => []
  },
  gradientDirection: {
    type: String,
    validator: (e) => ["top", "bottom", "left", "right"].includes(e),
    default: "top"
  },
  height: {
    type: [String, Number],
    default: 75
  },
  labels: {
    type: Array,
    default: () => []
  },
  labelSize: {
    type: [Number, String],
    default: 7
  },
  lineWidth: {
    type: [String, Number],
    default: 4
  },
  id: String,
  itemValue: {
    type: String,
    default: "value"
  },
  modelValue: {
    type: Array,
    default: () => []
  },
  min: [String, Number],
  max: [String, Number],
  padding: {
    type: [String, Number],
    default: 8
  },
  showLabels: Boolean,
  smooth: [Boolean, String, Number],
  width: {
    type: [Number, String],
    default: 300
  }
}, "Line"), GO = Be({
  autoLineWidth: Boolean,
  ...YO()
}, "VBarline"), AA = We()({
  name: "VBarline",
  props: GO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = qr(), r = W(() => e.id || `barline-${a}`), i = W(() => Number(e.autoDrawDuration) || 500), o = W(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), l = W(() => parseFloat(e.lineWidth) || 4), s = W(() => Math.max(e.modelValue.length * l.value, Number(e.width))), d = W(() => ({
      minX: 0,
      maxX: s.value,
      minY: 0,
      maxY: parseInt(e.height, 10)
    })), u = W(() => e.modelValue.map((b) => Ca(b, e.itemValue, b)));
    function f(b, v) {
      const {
        minX: g,
        maxX: k,
        minY: A,
        maxY: C
      } = v, D = b.length;
      let P = e.max != null ? Number(e.max) : Math.max(...b), O = e.min != null ? Number(e.min) : Math.min(...b);
      O > 0 && e.min == null && (O = 0), P < 0 && e.max == null && (P = 0);
      const I = k / D, x = (C - A) / (P - O || 1), M = C - Math.abs(O * x);
      return b.map((V, B) => {
        const F = Math.abs(x * V);
        return {
          x: g + B * I,
          y: M - F + +(V < 0) * F,
          height: F,
          value: V
        };
      });
    }
    const h = W(() => {
      const b = [], v = f(u.value, d.value), g = v.length;
      for (let k = 0; b.length < g; k++) {
        const A = v[k];
        let C = e.labels[k];
        C || (C = typeof A == "object" ? A.value : A), b.push({
          x: A.x,
          value: String(C)
        });
      }
      return b;
    }), y = W(() => f(u.value, d.value)), p = W(() => (Math.abs(y.value[0].x - y.value[1].x) - l.value) / 2), w = W(() => typeof e.smooth == "boolean" ? e.smooth ? 2 : 0 : Number(e.smooth));
    Ye(() => {
      const b = e.gradient.slice().length ? e.gradient.slice().reverse() : [""];
      return T("svg", {
        display: "block"
      }, [T("defs", null, [T("linearGradient", {
        id: r.value,
        gradientUnits: "userSpaceOnUse",
        x1: e.gradientDirection === "left" ? "100%" : "0",
        y1: e.gradientDirection === "top" ? "100%" : "0",
        x2: e.gradientDirection === "right" ? "100%" : "0",
        y2: e.gradientDirection === "bottom" ? "100%" : "0"
      }, [b.map((v, g) => T("stop", {
        offset: g / Math.max(b.length - 1, 1),
        "stop-color": v || "currentColor"
      }, null))])]), T("clipPath", {
        id: `${r.value}-clip`
      }, [y.value.map((v) => T("rect", {
        x: v.x + p.value,
        y: v.y,
        width: l.value,
        height: v.height,
        rx: w.value,
        ry: w.value
      }, [e.autoDraw && T(Ge, null, [T("animate", {
        attributeName: "y",
        from: v.y + v.height,
        to: v.y,
        dur: `${i.value}ms`,
        fill: "freeze"
      }, null), T("animate", {
        attributeName: "height",
        from: "0",
        to: v.height,
        dur: `${i.value}ms`,
        fill: "freeze"
      }, null)])]))]), o.value && T("g", {
        key: "labels",
        style: {
          textAnchor: "middle",
          dominantBaseline: "mathematical",
          fill: "currentColor"
        }
      }, [h.value.map((v, g) => T("text", {
        x: v.x + p.value + l.value / 2,
        y: parseInt(e.height, 10) - 2 + (parseInt(e.labelSize, 10) || 7 * 0.75),
        "font-size": Number(e.labelSize) || 7
      }, [n.label?.({
        index: g,
        value: v.value
      }) ?? v.value]))]), T("g", {
        "clip-path": `url(#${r.value}-clip)`,
        fill: `url(#${r.value})`
      }, [T("rect", {
        x: 0,
        y: 0,
        width: Math.max(e.modelValue.length * l.value, Number(e.width)),
        height: e.height
      }, null)])]);
    });
  }
});
function S7(e, t) {
  let n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, a = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 75;
  if (e.length === 0) return "";
  const r = e.shift(), i = e[e.length - 1];
  return (n ? `M${r.x} ${a - r.x + 2} L${r.x} ${r.y}` : `M${r.x} ${r.y}`) + e.map((o, l) => {
    const s = e[l + 1], d = e[l - 1] || r, u = s && C7(s, o, d);
    if (!s || u)
      return `L${o.x} ${o.y}`;
    const f = Math.min(xA(d, o), xA(s, o)), y = f / 2 < t ? f / 2 : t, p = TA(d, o, y), w = TA(s, o, y);
    return `L${p.x} ${p.y}S${o.x} ${o.y} ${w.x} ${w.y}`;
  }).join("") + (n ? `L${i.x} ${a - r.x + 2} Z` : "");
}
function Nh(e) {
  return parseInt(e, 10);
}
function C7(e, t, n) {
  return Nh(e.x + n.x) === Nh(2 * t.x) && Nh(e.y + n.y) === Nh(2 * t.y);
}
function xA(e, t) {
  return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2));
}
function TA(e, t, n) {
  const a = {
    x: e.x - t.x,
    y: e.y - t.y
  }, r = Math.sqrt(a.x * a.x + a.y * a.y), i = {
    x: a.x / r,
    y: a.y / r
  };
  return {
    x: t.x + i.x * n,
    y: t.y + i.y * n
  };
}
const QO = Be({
  fill: Boolean,
  ...YO()
}, "VTrendline"), IA = We()({
  name: "VTrendline",
  props: QO(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = qr(), r = W(() => e.id || `trendline-${a}`), i = W(() => Number(e.autoDrawDuration) || (e.fill ? 500 : 2e3)), o = be(0), l = be(null);
    function s(b, v) {
      const {
        minX: g,
        maxX: k,
        minY: A,
        maxY: C
      } = v, D = b.length, P = e.max != null ? Number(e.max) : Math.max(...b), O = e.min != null ? Number(e.min) : Math.min(...b), I = (k - g) / (D - 1), x = (C - A) / (P - O || 1);
      return b.map((M, V) => ({
        x: g + V * I,
        y: C - (M - O) * x,
        value: M
      }));
    }
    const d = W(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), u = W(() => parseFloat(e.lineWidth) || 4), f = W(() => Number(e.width)), h = W(() => {
      const b = Number(e.padding);
      return {
        minX: b,
        maxX: f.value - b,
        minY: b,
        maxY: parseInt(e.height, 10) - b
      };
    }), y = W(() => e.modelValue.map((b) => Ca(b, e.itemValue, b))), p = W(() => {
      const b = [], v = s(y.value, h.value), g = v.length;
      for (let k = 0; b.length < g; k++) {
        const A = v[k];
        let C = e.labels[k];
        C || (C = typeof A == "object" ? A.value : A), b.push({
          x: A.x,
          value: String(C)
        });
      }
      return b;
    });
    tt(() => e.modelValue, async () => {
      if (await Dt(), !e.autoDraw || !l.value) return;
      const b = l.value, v = b.getTotalLength();
      e.fill ? (b.style.transformOrigin = "bottom center", b.style.transition = "none", b.style.transform = "scaleY(0)", b.getBoundingClientRect(), b.style.transition = `transform ${i.value}ms ${e.autoDrawEasing}`, b.style.transform = "scaleY(1)") : (b.style.strokeDasharray = `${v}`, b.style.strokeDashoffset = `${v}`, b.getBoundingClientRect(), b.style.transition = `stroke-dashoffset ${i.value}ms ${e.autoDrawEasing}`, b.style.strokeDashoffset = "0"), o.value = v;
    }, {
      immediate: !0
    });
    function w(b) {
      const v = typeof e.smooth == "boolean" ? e.smooth ? 8 : 0 : Number(e.smooth);
      return S7(s(y.value, h.value), v, b, parseInt(e.height, 10));
    }
    Ye(() => {
      const b = e.gradient.slice().length ? e.gradient.slice().reverse() : [""];
      return T("svg", {
        display: "block",
        "stroke-width": parseFloat(e.lineWidth) ?? 4
      }, [T("defs", null, [T("linearGradient", {
        id: r.value,
        gradientUnits: "userSpaceOnUse",
        x1: e.gradientDirection === "left" ? "100%" : "0",
        y1: e.gradientDirection === "top" ? "100%" : "0",
        x2: e.gradientDirection === "right" ? "100%" : "0",
        y2: e.gradientDirection === "bottom" ? "100%" : "0"
      }, [b.map((v, g) => T("stop", {
        offset: g / Math.max(b.length - 1, 1),
        "stop-color": v || "currentColor"
      }, null))])]), d.value && T("g", {
        key: "labels",
        style: {
          textAnchor: "middle",
          dominantBaseline: "mathematical",
          fill: "currentColor"
        }
      }, [p.value.map((v, g) => T("text", {
        x: v.x + u.value / 2 + u.value / 2,
        y: parseInt(e.height, 10) - 4 + (parseInt(e.labelSize, 10) || 7 * 0.75),
        "font-size": Number(e.labelSize) || 7
      }, [n.label?.({
        index: g,
        value: v.value
      }) ?? v.value]))]), T("path", {
        ref: l,
        d: w(e.fill),
        fill: e.fill ? `url(#${r.value})` : "none",
        stroke: e.fill ? "none" : `url(#${r.value})`
      }, null), e.fill && T("path", {
        d: w(!1),
        fill: "none",
        stroke: e.color ?? e.gradient?.[0]
      }, null)]);
    });
  }
}), A7 = Be({
  type: {
    type: String,
    default: "trend"
  },
  ...GO(),
  ...QO()
}, "VSparkline"), x7 = We()({
  name: "VSparkline",
  props: A7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      textColorClasses: a,
      textColorStyles: r
    } = sr(() => e.color), i = W(() => !!(e.showLabels || e.labels.length > 0 || n?.label)), o = W(() => {
      let l = parseInt(e.height, 10);
      return i.value && (l += parseInt(e.labelSize, 10) * 1.5), l;
    });
    Ye(() => {
      const l = e.type === "trend" ? IA : AA, s = e.type === "trend" ? IA.filterProps(e) : AA.filterProps(e);
      return _(l, Fe({
        key: e.type,
        class: a.value,
        style: r.value,
        viewBox: `0 0 ${e.width} ${parseInt(o.value, 10)}`
      }, s), n);
    });
  }
}), T7 = Be({
  ...pt(),
  ...DP({
    offset: 8,
    minWidth: 0,
    openDelay: 0,
    closeDelay: 100,
    location: "top center",
    transition: "scale-transition"
  })
}, "VSpeedDial"), I7 = We()({
  name: "VSpeedDial",
  props: T7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), r = be(), i = W(() => {
      const [l, s = "center"] = e.location?.split(" ") ?? [];
      return `${l} ${s}`;
    }), o = W(() => ({
      [`v-speed-dial__content--${i.value.replace(" ", "-")}`]: !0
    }));
    return Ye(() => {
      const l = Fu.filterProps(e);
      return _(Fu, Fe(l, {
        modelValue: a.value,
        "onUpdate:modelValue": (s) => a.value = s,
        class: e.class,
        style: e.style,
        contentClass: ["v-speed-dial__content", o.value, e.contentClass],
        location: i.value,
        ref: r,
        transition: "fade-transition"
      }), {
        ...n,
        default: (s) => _(Ht, {
          defaults: {
            VBtn: {
              size: "small"
            }
          }
        }, {
          default: () => [_(Cr, {
            appear: !0,
            group: !0,
            transition: e.transition
          }, {
            default: () => [n.default?.(s)]
          })]
        })
      });
    }), {};
  }
}), f1 = Symbol.for("vuetify:v-stepper"), JO = Be({
  color: String,
  disabled: {
    type: [Boolean, String],
    default: !1
  },
  prevText: {
    type: String,
    default: "$vuetify.stepper.prev"
  },
  nextText: {
    type: String,
    default: "$vuetify.stepper.next"
  }
}, "VStepperActions"), XO = We()({
  name: "VStepperActions",
  props: JO(),
  emits: {
    "click:prev": () => !0,
    "click:next": () => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = kn();
    function i() {
      n("click:prev");
    }
    function o() {
      n("click:next");
    }
    return Ye(() => {
      const l = {
        onClick: i
      }, s = {
        onClick: o
      };
      return T("div", {
        class: "v-stepper-actions"
      }, [_(Ht, {
        defaults: {
          VBtn: {
            disabled: ["prev", !0].includes(e.disabled),
            text: r(e.prevText),
            variant: "text"
          }
        }
      }, {
        default: () => [a.prev?.({
          props: l
        }) ?? _(Xt, l, null)]
      }), _(Ht, {
        defaults: {
          VBtn: {
            color: e.color,
            disabled: ["next", !0].includes(e.disabled),
            text: r(e.nextText),
            variant: "tonal"
          }
        }
      }, {
        default: () => [a.next?.({
          props: s
        }) ?? _(Xt, s, null)]
      })]);
    }), {};
  }
}), ZO = ds("v-stepper-header"), E7 = Be({
  color: String,
  title: String,
  subtitle: String,
  complete: Boolean,
  completeIcon: {
    type: St,
    default: "$complete"
  },
  editable: Boolean,
  editIcon: {
    type: St,
    default: "$edit"
  },
  error: Boolean,
  errorIcon: {
    type: St,
    default: "$error"
  },
  icon: St,
  ripple: {
    type: [Boolean, Object],
    default: !0
  },
  rules: {
    type: Array,
    default: () => []
  }
}, "StepperItem"), P7 = Be({
  ...E7(),
  ...gc()
}, "VStepperItem"), eD = We()({
  name: "VStepperItem",
  directives: {
    vRipple: xr
  },
  props: P7(),
  emits: {
    "group:selected": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = yc(e, f1, !0), r = W(() => a?.value.value ?? e.value), i = W(() => e.rules.every((h) => h() === !0)), o = W(() => !e.disabled && e.editable), l = W(() => !e.disabled && e.editable), s = W(() => e.error || !i.value), d = W(() => e.complete || e.rules.length > 0 && i.value), u = W(() => s.value ? e.errorIcon : d.value ? e.completeIcon : a.isSelected.value && e.editable ? e.editIcon : e.icon), f = W(() => ({
      canEdit: l.value,
      hasError: s.value,
      hasCompleted: d.value,
      title: e.title,
      subtitle: e.subtitle,
      step: r.value,
      value: e.value
    }));
    return Ye(() => {
      const h = (!a || a.isSelected.value || d.value || l.value) && !s.value && !e.disabled, y = !!(e.title != null || n.title), p = !!(e.subtitle != null || n.subtitle);
      function w() {
        a?.toggle();
      }
      return sn(T("button", {
        class: Ae(["v-stepper-item", {
          "v-stepper-item--complete": d.value,
          "v-stepper-item--disabled": e.disabled,
          "v-stepper-item--error": s.value
        }, a?.selectedClass.value]),
        disabled: !e.editable,
        type: "button",
        onClick: w
      }, [o.value && il(!0, "v-stepper-item"), _(Oi, {
        key: "stepper-avatar",
        class: "v-stepper-item__avatar",
        color: h ? e.color : void 0,
        size: 24
      }, {
        default: () => [n.icon?.(f.value) ?? (u.value ? _(pn, {
          icon: u.value
        }, null) : r.value)]
      }), T("div", {
        class: "v-stepper-item__content"
      }, [y && T("div", {
        key: "title",
        class: "v-stepper-item__title"
      }, [n.title?.(f.value) ?? e.title]), p && T("div", {
        key: "subtitle",
        class: "v-stepper-item__subtitle"
      }, [n.subtitle?.(f.value) ?? e.subtitle]), n.default?.(f.value)])]), [[xr, e.editable && e.ripple, null]]);
    }), {};
  }
}), O7 = Be({
  ...Tn(Dv(), ["continuous", "nextIcon", "prevIcon", "showArrows", "touch", "mandatory"])
}, "VStepperWindow"), tD = We()({
  name: "VStepperWindow",
  props: O7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(f1, null), r = wt(e, "modelValue"), i = W({
      get() {
        return r.value != null || !a ? r.value : a.items.value.find((o) => a.selected.value.includes(o.id))?.value;
      },
      set(o) {
        r.value = o;
      }
    });
    return Ye(() => {
      const o = ic.filterProps(e);
      return _(ic, Fe({
        _as: "VStepperWindow"
      }, o, {
        modelValue: i.value,
        "onUpdate:modelValue": (l) => i.value = l,
        class: ["v-stepper-window", e.class],
        style: e.style,
        mandatory: !1,
        touch: !1
      }), n);
    }), {};
  }
}), D7 = Be({
  ...Bv()
}, "VStepperWindowItem"), nD = We()({
  name: "VStepperWindowItem",
  props: D7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => {
      const a = oc.filterProps(e);
      return _(oc, Fe({
        _as: "VStepperWindowItem"
      }, a, {
        class: ["v-stepper-window-item", e.class],
        style: e.style
      }), n);
    }), {};
  }
}), B7 = Be({
  altLabels: Boolean,
  bgColor: String,
  completeIcon: St,
  editIcon: St,
  editable: Boolean,
  errorIcon: St,
  hideActions: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  itemTitle: {
    type: String,
    default: "title"
  },
  itemValue: {
    type: String,
    default: "value"
  },
  nonLinear: Boolean,
  flat: Boolean,
  ...dc()
}, "Stepper"), V7 = Be({
  ...B7(),
  ...pc({
    mandatory: "force",
    selectedClass: "v-stepper-item--selected"
  }),
  ...J0(),
  ...us(JO(), ["prevText", "nextText"])
}, "VStepper"), M7 = We()({
  name: "VStepper",
  props: V7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      items: a,
      next: r,
      prev: i,
      selected: o
    } = ol(e, f1), {
      displayClasses: l,
      mobile: s
    } = pi(e), {
      completeIcon: d,
      editIcon: u,
      errorIcon: f,
      color: h,
      editable: y,
      prevText: p,
      nextText: w
    } = zu(e), b = W(() => e.items.map((k, A) => {
      const C = Ca(k, e.itemTitle, k), D = Ca(k, e.itemValue, A + 1);
      return {
        title: C,
        value: D,
        raw: k
      };
    })), v = W(() => a.value.findIndex((k) => o.value.includes(k.id))), g = W(() => e.disabled ? e.disabled : v.value === 0 ? "prev" : v.value === a.value.length - 1 ? "next" : !1);
    return aa({
      VStepperItem: {
        editable: y,
        errorIcon: f,
        completeIcon: d,
        editIcon: u,
        prevText: p,
        nextText: w
      },
      VStepperActions: {
        color: h,
        disabled: g,
        prevText: p,
        nextText: w
      }
    }), Ye(() => {
      const k = Nf.filterProps(e), A = !!(n.header || e.items.length), C = e.items.length > 0, D = !e.hideActions && !!(C || n.actions);
      return _(Nf, Fe(k, {
        color: e.bgColor,
        class: ["v-stepper", {
          "v-stepper--alt-labels": e.altLabels,
          "v-stepper--flat": e.flat,
          "v-stepper--non-linear": e.nonLinear,
          "v-stepper--mobile": s.value
        }, l.value, e.class],
        style: e.style
      }), {
        default: () => [A && _(ZO, {
          key: "stepper-header"
        }, {
          default: () => [b.value.map((P, O) => {
            let {
              raw: I,
              ...x
            } = P;
            return T(Ge, null, [!!O && _(fi, null, null), _(eD, x, {
              default: n[`header-item.${x.value}`] ?? n.header,
              icon: n.icon,
              title: n.title,
              subtitle: n.subtitle
            })]);
          })]
        }), C && _(tD, {
          key: "stepper-window"
        }, {
          default: () => [b.value.map((P) => _(nD, {
            value: P.value
          }, {
            default: () => n[`item.${P.value}`]?.(P) ?? n.item?.(P)
          }))]
        }), n.default?.({
          prev: i,
          next: r
        }), D && (n.actions?.({
          next: r,
          prev: i
        }) ?? _(XO, {
          key: "stepper-actions",
          "onClick:prev": i,
          "onClick:next": r
        }, n))]
      });
    }), {
      prev: i,
      next: r
    };
  }
}), L7 = Be({
  indeterminate: Boolean,
  inset: Boolean,
  flat: Boolean,
  loading: {
    type: [Boolean, String],
    default: !1
  },
  ...hs(),
  ...Ev()
}, "VSwitch"), R7 = We()({
  name: "VSwitch",
  inheritAttrs: !1,
  props: L7(),
  emits: {
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:indeterminate": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = wt(e, "indeterminate"), i = wt(e, "modelValue"), {
      loaderClasses: o
    } = am(e), {
      isFocused: l,
      focus: s,
      blur: d
    } = ms(e), u = be(), f = be(), h = _n && window.matchMedia("(forced-colors: active)").matches, y = ye(() => typeof e.loading == "string" && e.loading !== "" ? e.loading : e.color), p = qr(), w = ye(() => e.id || `switch-${p}`);
    function b() {
      r.value && (r.value = !1);
    }
    function v(g) {
      g.stopPropagation(), g.preventDefault(), u.value?.input?.click();
    }
    return Ye(() => {
      const [g, k] = nl(n), A = hr.filterProps(e), C = Qs.filterProps(e);
      return _(hr, Fe({
        ref: f,
        class: ["v-switch", {
          "v-switch--flat": e.flat
        }, {
          "v-switch--inset": e.inset
        }, {
          "v-switch--indeterminate": r.value
        }, o.value, e.class]
      }, g, A, {
        modelValue: i.value,
        "onUpdate:modelValue": (D) => i.value = D,
        id: w.value,
        focused: l.value,
        style: e.style
      }), {
        ...a,
        default: (D) => {
          let {
            id: P,
            messagesId: O,
            isDisabled: I,
            isReadonly: x,
            isValid: M
          } = D;
          const V = {
            model: i,
            isValid: M
          };
          return _(Qs, Fe({
            ref: u
          }, C, {
            modelValue: i.value,
            "onUpdate:modelValue": [(B) => i.value = B, b],
            id: P.value,
            "aria-describedby": O.value,
            type: "checkbox",
            "aria-checked": r.value ? "mixed" : void 0,
            disabled: I.value,
            readonly: x.value,
            onFocus: s,
            onBlur: d
          }, k), {
            ...a,
            default: (B) => {
              let {
                backgroundColorClasses: F,
                backgroundColorStyles: H
              } = B;
              return T("div", {
                class: Ae(["v-switch__track", h ? void 0 : F.value]),
                style: Je(H.value),
                onClick: v
              }, [a["track-true"] && T("div", {
                key: "prepend",
                class: "v-switch__track-true"
              }, [a["track-true"](V)]), a["track-false"] && T("div", {
                key: "append",
                class: "v-switch__track-false"
              }, [a["track-false"](V)])]);
            },
            input: (B) => {
              let {
                inputNode: F,
                icon: H,
                backgroundColorClasses: K,
                backgroundColorStyles: Z
              } = B;
              return T(Ge, null, [F, T("div", {
                class: Ae(["v-switch__thumb", {
                  "v-switch__thumb--filled": H || e.loading
                }, e.inset || h ? void 0 : K.value]),
                style: Je(e.inset ? void 0 : Z.value)
              }, [a.thumb ? _(Ht, {
                defaults: {
                  VIcon: {
                    icon: H,
                    size: "x-small"
                  }
                }
              }, {
                default: () => [a.thumb({
                  ...V,
                  icon: H
                })]
              }) : _(D0, null, {
                default: () => [e.loading ? _(rm, {
                  name: "v-switch",
                  active: !0,
                  color: M.value === !1 ? void 0 : y.value
                }, {
                  default: (ue) => a.loader ? a.loader(ue) : _(rc, {
                    active: ue.isActive,
                    color: ue.color,
                    indeterminate: !0,
                    size: "16",
                    width: "2"
                  }, null)
                }) : H && _(pn, {
                  key: String(H),
                  icon: H,
                  size: "x-small"
                }, null)]
              })])]);
            }
          });
        }
      });
    }), Za({}, f);
  }
}), F7 = Be({
  color: String,
  height: [Number, String],
  window: Boolean,
  ...pt(),
  ...Ua(),
  ...fc(),
  ...qn(),
  ...$t(),
  ...rn()
}, "VSystemBar"), N7 = We()({
  name: "VSystemBar",
  props: F7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      backgroundColorClasses: r,
      backgroundColorStyles: i
    } = bn(() => e.color), {
      elevationClasses: o
    } = Xa(e), {
      roundedClasses: l
    } = ra(e), {
      ssrBootStyles: s
    } = _c(), d = W(() => e.height ?? (e.window ? 32 : 24)), {
      layoutItemStyles: u
    } = mc({
      id: e.name,
      order: W(() => parseInt(e.order, 10)),
      position: rt("top"),
      layoutSize: d,
      elementSize: d,
      active: W(() => !0),
      absolute: ye(() => e.absolute)
    });
    return Ye(() => _(e.tag, {
      class: Ae(["v-system-bar", {
        "v-system-bar--window": e.window
      }, a.value, r.value, o.value, l.value, e.class]),
      style: Je([i.value, u.value, s.value, e.style])
    }, n)), {};
  }
}), m1 = Symbol.for("vuetify:v-tabs"), U7 = Be({
  fixed: Boolean,
  sliderColor: String,
  hideSlider: Boolean,
  direction: {
    type: String,
    default: "horizontal"
  },
  ...Tn(Iv({
    selectedClass: "v-tab--selected",
    variant: "text"
  }), ["active", "block", "flat", "location", "position", "symbol"])
}, "VTab"), aD = We()({
  name: "VTab",
  props: U7(),
  setup(e, t) {
    let {
      slots: n,
      attrs: a
    } = t;
    const {
      textColorClasses: r,
      textColorStyles: i
    } = sr(() => e.sliderColor), o = be(), l = be(), s = W(() => e.direction === "horizontal"), d = W(() => o.value?.group?.isSelected.value ?? !1);
    function u(f) {
      let {
        value: h
      } = f;
      if (h) {
        const y = o.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"), p = l.value;
        if (!y || !p) return;
        const w = getComputedStyle(y).color, b = y.getBoundingClientRect(), v = p.getBoundingClientRect(), g = s.value ? "x" : "y", k = s.value ? "X" : "Y", A = s.value ? "right" : "bottom", C = s.value ? "width" : "height", D = b[g], P = v[g], O = D > P ? b[A] - v[A] : b[g] - v[g], I = Math.sign(O) > 0 ? s.value ? "right" : "bottom" : Math.sign(O) < 0 ? s.value ? "left" : "top" : "center", M = (Math.abs(O) + (Math.sign(O) < 0 ? b[C] : v[C])) / Math.max(b[C], v[C]) || 0, V = b[C] / v[C] || 0, B = 1.5;
        Fl(p, {
          backgroundColor: [w, "currentcolor"],
          transform: [`translate${k}(${O}px) scale${k}(${V})`, `translate${k}(${O / B}px) scale${k}(${(M - 1) / B + 1})`, "none"],
          transformOrigin: Array(3).fill(I)
        }, {
          duration: 225,
          easing: wf
        });
      }
    }
    return Ye(() => {
      const f = Xt.filterProps(e);
      return _(Xt, Fe({
        symbol: m1,
        ref: o,
        class: ["v-tab", e.class],
        style: e.style,
        tabindex: d.value ? 0 : -1,
        role: "tab",
        "aria-selected": String(d.value),
        active: !1
      }, f, a, {
        block: e.fixed,
        maxWidth: e.fixed ? 300 : void 0,
        "onGroup:selected": u
      }), {
        ...n,
        default: () => T(Ge, null, [n.default?.() ?? e.text, !e.hideSlider && T("div", {
          ref: l,
          class: Ae(["v-tab__slider", r.value]),
          style: Je(i.value)
        }, null)])
      });
    }), Za({}, o);
  }
}), $7 = Be({
  ...Tn(Dv(), ["continuous", "nextIcon", "prevIcon", "showArrows", "touch", "mandatory"])
}, "VTabsWindow"), rD = We()({
  name: "VTabsWindow",
  props: $7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Gt(m1, null), r = wt(e, "modelValue"), i = W({
      get() {
        return r.value != null || !a ? r.value : a.items.value.find((o) => a.selected.value.includes(o.id))?.value;
      },
      set(o) {
        r.value = o;
      }
    });
    return Ye(() => {
      const o = ic.filterProps(e);
      return _(ic, Fe({
        _as: "VTabsWindow"
      }, o, {
        modelValue: i.value,
        "onUpdate:modelValue": (l) => i.value = l,
        class: ["v-tabs-window", e.class],
        style: e.style,
        mandatory: !1,
        touch: !1
      }), n);
    }), {};
  }
}), q7 = Be({
  ...Bv()
}, "VTabsWindowItem"), iD = We()({
  name: "VTabsWindowItem",
  props: q7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return Ye(() => {
      const a = oc.filterProps(e);
      return _(oc, Fe({
        _as: "VTabsWindowItem"
      }, a, {
        class: ["v-tabs-window-item", e.class],
        style: e.style
      }), n);
    }), {};
  }
});
function H7(e) {
  return e ? e.map((t) => yf(t) ? t : {
    text: t,
    value: t
  }) : [];
}
const z7 = Be({
  alignTabs: {
    type: String,
    default: "start"
  },
  color: String,
  fixedTabs: Boolean,
  items: {
    type: Array,
    default: () => []
  },
  stacked: Boolean,
  bgColor: String,
  grow: Boolean,
  height: {
    type: [Number, String],
    default: void 0
  },
  hideSlider: Boolean,
  sliderColor: String,
  ...F0({
    mandatory: "force",
    selectedClass: "v-tab-item--selected"
  }),
  ...Wa(),
  ...$t()
}, "VTabs"), W7 = We()({
  name: "VTabs",
  props: z7(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      slots: a
    } = t;
    const r = wt(e, "modelValue"), i = W(() => H7(e.items)), {
      densityClasses: o
    } = Tr(e), {
      backgroundColorClasses: l,
      backgroundColorStyles: s
    } = bn(() => e.bgColor), {
      scopeId: d
    } = wc();
    return aa({
      VTab: {
        color: ye(() => e.color),
        direction: ye(() => e.direction),
        stacked: ye(() => e.stacked),
        fixed: ye(() => e.fixedTabs),
        sliderColor: ye(() => e.sliderColor),
        hideSlider: ye(() => e.hideSlider)
      }
    }), Ye(() => {
      const u = Lf.filterProps(e), f = !!(a.window || e.items.length > 0);
      return T(Ge, null, [_(Lf, Fe(u, {
        modelValue: r.value,
        "onUpdate:modelValue": (h) => r.value = h,
        class: ["v-tabs", `v-tabs--${e.direction}`, `v-tabs--align-tabs-${e.alignTabs}`, {
          "v-tabs--fixed-tabs": e.fixedTabs,
          "v-tabs--grow": e.grow,
          "v-tabs--stacked": e.stacked
        }, o.value, l.value, e.class],
        style: [{
          "--v-tabs-height": ht(e.height)
        }, s.value, e.style],
        role: "tablist",
        symbol: m1
      }, d, n), {
        default: () => [a.default?.() ?? i.value.map((h) => a.tab?.({
          item: h
        }) ?? _(aD, Fe(h, {
          key: h.text,
          value: h.value
        }), {
          default: a[`tab.${h.value}`] ? () => a[`tab.${h.value}`]?.({
            item: h
          }) : void 0
        }))]
      }), f && _(rD, Fe({
        modelValue: r.value,
        "onUpdate:modelValue": (h) => r.value = h,
        key: "tabs-window"
      }, d), {
        default: () => [i.value.map((h) => a.item?.({
          item: h
        }) ?? _(iD, {
          value: h.value
        }, {
          default: () => a[`item.${h.value}`]?.({
            item: h
          })
        })), a.window?.()]
      })]);
    }), {};
  }
}), K7 = Be({
  autoGrow: Boolean,
  autofocus: Boolean,
  counter: [Boolean, Number, String],
  counterValue: Function,
  prefix: String,
  placeholder: String,
  persistentPlaceholder: Boolean,
  persistentCounter: Boolean,
  noResize: Boolean,
  rows: {
    type: [Number, String],
    default: 5,
    validator: (e) => !isNaN(parseFloat(e))
  },
  maxRows: {
    type: [Number, String],
    validator: (e) => !isNaN(parseFloat(e))
  },
  suffix: String,
  modelModifiers: Object,
  ...hs(),
  ...um()
}, "VTextarea"), j7 = We()({
  name: "VTextarea",
  directives: {
    vIntersect: is
  },
  inheritAttrs: !1,
  props: K7(),
  emits: {
    "click:control": (e) => !0,
    "mousedown:control": (e) => !0,
    "update:focused": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:rows": (e) => !0
  },
  setup(e, t) {
    let {
      attrs: n,
      emit: a,
      slots: r
    } = t;
    const i = wt(e, "modelValue"), {
      isFocused: o,
      focus: l,
      blur: s
    } = ms(e), {
      onIntersect: d
    } = BP(e), u = W(() => typeof e.counterValue == "function" ? e.counterValue(i.value) : (i.value || "").toString().length), f = W(() => {
      if (n.maxlength) return n.maxlength;
      if (!(!e.counter || typeof e.counter != "number" && typeof e.counter != "string"))
        return e.counter;
    }), h = be(), y = be(), p = rt(""), w = be(), b = W(() => e.persistentPlaceholder || o.value || e.active);
    function v() {
      w.value !== document.activeElement && w.value?.focus(), o.value || l();
    }
    function g(M) {
      v(), a("click:control", M);
    }
    function k(M) {
      a("mousedown:control", M);
    }
    function A(M) {
      M.stopPropagation(), v(), Dt(() => {
        i.value = "", dv(e["onClick:clear"], M);
      });
    }
    function C(M) {
      const V = M.target;
      if (i.value = V.value, e.modelModifiers?.trim) {
        const B = [V.selectionStart, V.selectionEnd];
        Dt(() => {
          V.selectionStart = B[0], V.selectionEnd = B[1];
        });
      }
    }
    const D = be(), P = be(Number(e.rows)), O = W(() => ["plain", "underlined"].includes(e.variant));
    na(() => {
      e.autoGrow || (P.value = Number(e.rows));
    });
    function I() {
      e.autoGrow && Dt(() => {
        if (!D.value || !y.value) return;
        const M = getComputedStyle(D.value), V = getComputedStyle(y.value.$el), B = parseFloat(M.getPropertyValue("--v-field-padding-top")) + parseFloat(M.getPropertyValue("--v-input-padding-top")) + parseFloat(M.getPropertyValue("--v-field-padding-bottom")), F = D.value.scrollHeight, H = parseFloat(M.lineHeight), K = Math.max(parseFloat(e.rows) * H + B, parseFloat(V.getPropertyValue("--v-input-control-height"))), Z = parseFloat(e.maxRows) * H + B || 1 / 0, ue = Dn(F ?? 0, K, Z);
        P.value = Math.floor((ue - B) / H), p.value = ht(ue);
      });
    }
    an(I), tt(i, I), tt(() => e.rows, I), tt(() => e.maxRows, I), tt(() => e.density, I), tt(P, (M) => {
      a("update:rows", M);
    });
    let x;
    return tt(D, (M) => {
      M ? (x = new ResizeObserver(I), x.observe(D.value)) : x?.disconnect();
    }), Ja(() => {
      x?.disconnect();
    }), Ye(() => {
      const M = !!(r.counter || e.counter || e.counterValue), V = !!(M || r.details), [B, F] = nl(n), {
        modelValue: H,
        ...K
      } = hr.filterProps(e), Z = Js.filterProps(e);
      return _(hr, Fe({
        ref: h,
        modelValue: i.value,
        "onUpdate:modelValue": (ue) => i.value = ue,
        class: ["v-textarea v-text-field", {
          "v-textarea--prefixed": e.prefix,
          "v-textarea--suffixed": e.suffix,
          "v-text-field--prefixed": e.prefix,
          "v-text-field--suffixed": e.suffix,
          "v-textarea--auto-grow": e.autoGrow,
          "v-textarea--no-resize": e.noResize || e.autoGrow,
          "v-input--plain-underlined": O.value
        }, e.class],
        style: e.style
      }, B, K, {
        centerAffix: P.value === 1 && !O.value,
        focused: o.value
      }), {
        ...r,
        default: (ue) => {
          let {
            id: Y,
            isDisabled: U,
            isDirty: q,
            isReadonly: oe,
            isValid: ee,
            hasDetails: he
          } = ue;
          return _(Js, Fe({
            ref: y,
            style: {
              "--v-textarea-control-height": p.value
            },
            onClick: g,
            onMousedown: k,
            "onClick:clear": A,
            "onClick:prependInner": e["onClick:prependInner"],
            "onClick:appendInner": e["onClick:appendInner"]
          }, Z, {
            id: Y.value,
            active: b.value || q.value,
            centerAffix: P.value === 1 && !O.value,
            dirty: q.value || e.dirty,
            disabled: U.value,
            focused: o.value,
            details: he.value,
            error: ee.value === !1
          }), {
            ...r,
            default: (ve) => {
              let {
                props: {
                  class: pe,
                  ...z
                }
              } = ve;
              return T(Ge, null, [e.prefix && T("span", {
                class: "v-text-field__prefix"
              }, [e.prefix]), sn(T("textarea", Fe({
                ref: w,
                class: pe,
                value: i.value,
                onInput: C,
                autofocus: e.autofocus,
                readonly: oe.value,
                disabled: U.value,
                placeholder: e.placeholder,
                rows: e.rows,
                name: e.name,
                onFocus: v,
                onBlur: s
              }, z, F), null), [[is, {
                handler: d
              }, null, {
                once: !0
              }]]), e.autoGrow && sn(T("textarea", {
                class: Ae([pe, "v-textarea__sizer"]),
                id: `${z.id}-sizer`,
                "onUpdate:modelValue": (ge) => i.value = ge,
                ref: D,
                readonly: !0,
                "aria-hidden": "true"
              }, null), [[b3, i.value]]), e.suffix && T("span", {
                class: "v-text-field__suffix"
              }, [e.suffix])]);
            }
          });
        },
        details: V ? (ue) => T(Ge, null, [r.details?.(ue), M && T(Ge, null, [T("span", null, null), _(Pv, {
          active: e.persistentCounter || o.value,
          value: u.value,
          max: f.value,
          disabled: e.disabled
        }, r.counter)])]) : void 0
      });
    }), Za({}, h, y, w);
  }
}), Y7 = Be({
  withBackground: Boolean,
  ...pt(),
  ...rn(),
  ...$t()
}, "VThemeProvider"), G7 = We()({
  name: "VThemeProvider",
  props: Y7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e);
    return () => e.withBackground ? _(e.tag, {
      class: Ae(["v-theme-provider", a.value, e.class]),
      style: Je(e.style)
    }, {
      default: () => [n.default?.()]
    }) : n.default?.();
  }
}), Q7 = Be({
  dotColor: String,
  fillDot: Boolean,
  hideDot: Boolean,
  icon: St,
  iconColor: String,
  lineColor: String,
  ...pt(),
  ...qn(),
  ...Oo(),
  ...Ua()
}, "VTimelineDivider"), J7 = We()({
  name: "VTimelineDivider",
  props: Q7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      sizeClasses: a,
      sizeStyles: r
    } = Zu(e, "v-timeline-divider__dot"), {
      backgroundColorStyles: i,
      backgroundColorClasses: o
    } = bn(() => e.dotColor), {
      roundedClasses: l
    } = ra(e, "v-timeline-divider__dot"), {
      elevationClasses: s
    } = Xa(e), {
      backgroundColorClasses: d,
      backgroundColorStyles: u
    } = bn(() => e.lineColor);
    return Ye(() => T("div", {
      class: Ae(["v-timeline-divider", {
        "v-timeline-divider--fill-dot": e.fillDot
      }, e.class]),
      style: Je(e.style)
    }, [T("div", {
      class: Ae(["v-timeline-divider__before", d.value]),
      style: Je(u.value)
    }, null), !e.hideDot && T("div", {
      key: "dot",
      class: Ae(["v-timeline-divider__dot", s.value, l.value, a.value]),
      style: Je(r.value)
    }, [T("div", {
      class: Ae(["v-timeline-divider__inner-dot", o.value, l.value]),
      style: Je(i.value)
    }, [n.default ? _(Ht, {
      key: "icon-defaults",
      disabled: !e.icon,
      defaults: {
        VIcon: {
          color: e.iconColor,
          icon: e.icon,
          size: e.size
        }
      }
    }, n.default) : _(pn, {
      key: "icon",
      color: e.iconColor,
      icon: e.icon,
      size: e.size
    }, null)])]), T("div", {
      class: Ae(["v-timeline-divider__after", d.value]),
      style: Je(u.value)
    }, null)])), {};
  }
}), oD = Be({
  density: String,
  dotColor: String,
  fillDot: Boolean,
  hideDot: Boolean,
  hideOpposite: {
    type: Boolean,
    default: void 0
  },
  icon: St,
  iconColor: String,
  lineInset: [Number, String],
  side: {
    type: String,
    validator: (e) => e == null || ["start", "end"].includes(e)
  },
  ...pt(),
  ...Ta(),
  ...Ua(),
  ...qn(),
  ...Oo(),
  ...$t()
}, "VTimelineItem"), X7 = We()({
  name: "VTimelineItem",
  props: oD(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      dimensionStyles: a
    } = Ia(e), r = rt(0), i = be();
    return tt(i, (o) => {
      o && (r.value = o.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width ?? 0);
    }, {
      flush: "post"
    }), Ye(() => T("div", {
      class: Ae(["v-timeline-item", {
        "v-timeline-item--fill-dot": e.fillDot,
        "v-timeline-item--side-start": e.side === "start",
        "v-timeline-item--side-end": e.side === "end"
      }, e.class]),
      style: Je([{
        "--v-timeline-dot-size": ht(r.value),
        "--v-timeline-line-inset": e.lineInset ? `calc(var(--v-timeline-dot-size) / 2 + ${ht(e.lineInset)})` : ht(0)
      }, e.style])
    }, [T("div", {
      class: "v-timeline-item__body",
      style: Je(a.value)
    }, [n.default?.()]), _(J7, {
      ref: i,
      hideDot: e.hideDot,
      icon: e.icon,
      iconColor: e.iconColor,
      size: e.size,
      elevation: e.elevation,
      dotColor: e.dotColor,
      fillDot: e.fillDot,
      rounded: e.rounded
    }, {
      default: n.icon
    }), e.density !== "compact" && T("div", {
      class: "v-timeline-item__opposite"
    }, [!e.hideOpposite && n.opposite?.()])])), {};
  }
}), Z7 = Be({
  align: {
    type: String,
    default: "center",
    validator: (e) => ["center", "start"].includes(e)
  },
  direction: {
    type: String,
    default: "vertical",
    validator: (e) => ["vertical", "horizontal"].includes(e)
  },
  justify: {
    type: String,
    default: "auto",
    validator: (e) => ["auto", "center"].includes(e)
  },
  side: {
    type: String,
    validator: (e) => e == null || ["start", "end"].includes(e)
  },
  lineThickness: {
    type: [String, Number],
    default: 2
  },
  lineColor: String,
  truncateLine: {
    type: String,
    validator: (e) => ["start", "end", "both"].includes(e)
  },
  ...us(oD({
    lineInset: 0
  }), ["dotColor", "fillDot", "hideOpposite", "iconColor", "lineInset", "size"]),
  ...pt(),
  ...Wa(),
  ...$t(),
  ...rn()
}, "VTimeline"), eG = We()({
  name: "VTimeline",
  props: Z7(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const {
      themeClasses: a
    } = gn(e), {
      densityClasses: r
    } = Tr(e), {
      rtlClasses: i
    } = Na();
    aa({
      VTimelineDivider: {
        lineColor: ye(() => e.lineColor)
      },
      VTimelineItem: {
        density: ye(() => e.density),
        dotColor: ye(() => e.dotColor),
        fillDot: ye(() => e.fillDot),
        hideOpposite: ye(() => e.hideOpposite),
        iconColor: ye(() => e.iconColor),
        lineColor: ye(() => e.lineColor),
        lineInset: ye(() => e.lineInset),
        size: ye(() => e.size)
      }
    });
    const o = W(() => {
      const s = e.side ? e.side : e.density !== "default" ? "end" : null;
      return s && `v-timeline--side-${s}`;
    }), l = W(() => {
      const s = ["v-timeline--truncate-line-start", "v-timeline--truncate-line-end"];
      switch (e.truncateLine) {
        case "both":
          return s;
        case "start":
          return s[0];
        case "end":
          return s[1];
        default:
          return null;
      }
    });
    return Ye(() => _(e.tag, {
      class: Ae(["v-timeline", `v-timeline--${e.direction}`, `v-timeline--align-${e.align}`, `v-timeline--justify-${e.justify}`, l.value, {
        "v-timeline--inset-line": !!e.lineInset
      }, a.value, r.value, o.value, i.value, e.class]),
      style: Je([{
        "--v-timeline-line-thickness": ht(e.lineThickness)
      }, e.style])
    }, n)), {};
  }
});
function $l(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 2;
  return String(e).padStart(t, "0");
}
const tG = Be({
  allowedValues: Function,
  ampm: Boolean,
  color: String,
  disabled: Boolean,
  displayedValue: null,
  double: Boolean,
  format: {
    type: Function,
    default: (e) => e
  },
  max: {
    type: Number,
    required: !0
  },
  min: {
    type: Number,
    required: !0
  },
  scrollable: Boolean,
  readonly: Boolean,
  rotate: {
    type: Number,
    default: 0
  },
  step: {
    type: Number,
    default: 1
  },
  modelValue: {
    type: Number
  }
}, "VTimePickerClock"), Zb = We()({
  name: "VTimePickerClock",
  props: tG(),
  emits: {
    change: (e) => !0,
    input: (e) => !0
  },
  setup(e, t) {
    let {
      emit: n
    } = t;
    const a = be(null), r = be(null), i = be(void 0), o = be(!1), l = be(null), s = be(null), d = PT((Y) => n("change", Y), 750), {
      textColorClasses: u,
      textColorStyles: f
    } = sr(() => e.color), {
      backgroundColorClasses: h,
      backgroundColorStyles: y
    } = bn(() => e.color), p = W(() => e.max - e.min + 1), w = W(() => e.double ? p.value / 2 : p.value), b = W(() => 360 / w.value), v = W(() => b.value * Math.PI / 180), g = W(() => e.modelValue == null ? e.min : e.modelValue), k = W(() => 0.62), A = W(() => {
      const Y = [];
      for (let U = e.min; U <= e.max; U = U + e.step)
        Y.push(U);
      return Y;
    });
    tt(() => e.modelValue, (Y) => {
      i.value = Y;
    });
    function C(Y) {
      i.value !== Y && (i.value = Y), n("input", Y);
    }
    function D(Y) {
      return !e.allowedValues || e.allowedValues(Y);
    }
    function P(Y) {
      if (!e.scrollable || e.disabled) return;
      Y.preventDefault();
      const U = Math.sign(-Y.deltaY || 1);
      let q = g.value;
      do
        q = q + U, q = (q - e.min + p.value) % p.value + e.min;
      while (!D(q) && q !== g.value);
      q !== e.displayedValue && C(q), d(q);
    }
    function O(Y) {
      return e.double && Y - e.min >= w.value;
    }
    function I(Y) {
      return O(Y) ? k.value : 1;
    }
    function x(Y) {
      const U = e.rotate * Math.PI / 180;
      return {
        x: Math.sin((Y - e.min) * v.value + U) * I(Y),
        y: -Math.cos((Y - e.min) * v.value + U) * I(Y)
      };
    }
    function M(Y, U) {
      const q = (Math.round(Y / b.value) + (U ? w.value : 0)) % p.value + e.min;
      return Y < 360 - b.value / 2 ? q : U ? e.max - w.value + 1 : e.min;
    }
    function V(Y) {
      const {
        x: U,
        y: q
      } = x(Y);
      return {
        left: `${Math.round(50 + U * 50)}%`,
        top: `${Math.round(50 + q * 50)}%`
      };
    }
    function B(Y, U) {
      const q = U.x - Y.x, oe = U.y - Y.y;
      return Math.sqrt(q * q + oe * oe);
    }
    function F(Y, U) {
      const q = 2 * Math.atan2(U.y - Y.y - B(Y, U), U.x - Y.x);
      return Math.abs(q * 180 / Math.PI);
    }
    function H(Y) {
      l.value === null && (l.value = Y), s.value = Y, C(Y);
    }
    function K(Y) {
      if (Y.preventDefault(), !o.value && Y.type !== "click" || !a.value) return;
      const {
        width: U,
        top: q,
        left: oe
      } = a.value?.getBoundingClientRect(), {
        width: ee
      } = r.value?.getBoundingClientRect() ?? {
        width: 0
      }, {
        clientX: he,
        clientY: ve
      } = "touches" in Y ? Y.touches[0] : Y, pe = {
        x: U / 2,
        y: -U / 2
      }, z = {
        x: he - oe,
        y: q - ve
      }, ge = Math.round(F(pe, z) - e.rotate + 360) % 360, Ve = e.double && B(pe, z) < (ee + ee * k.value) / 4, Ne = Math.ceil(15 / b.value);
      let ce;
      for (let ne = 0; ne < Ne; ne++)
        if (ce = M(ge + ne * b.value, Ve), D(ce) || (ce = M(ge - ne * b.value, Ve), D(ce))) return H(ce);
    }
    function Z(Y) {
      e.disabled || (Y.preventDefault(), window.addEventListener("mousemove", K), window.addEventListener("touchmove", K), window.addEventListener("mouseup", ue), window.addEventListener("touchend", ue), l.value = null, s.value = null, o.value = !0, K(Y));
    }
    function ue(Y) {
      Y.stopPropagation(), window.removeEventListener("mousemove", K), window.removeEventListener("touchmove", K), window.removeEventListener("mouseup", ue), window.removeEventListener("touchend", ue), o.value = !1, s.value !== null && D(s.value) && n("change", s.value);
    }
    Ye(() => T("div", {
      class: Ae([{
        "v-time-picker-clock": !0,
        "v-time-picker-clock--indeterminate": e.modelValue == null,
        "v-time-picker-clock--readonly": e.readonly
      }]),
      onMousedown: Z,
      onTouchstart: Z,
      onWheel: P,
      ref: a
    }, [T("div", {
      class: "v-time-picker-clock__inner",
      ref: r
    }, [T("div", {
      class: Ae([{
        "v-time-picker-clock__hand": !0,
        "v-time-picker-clock__hand--inner": O(e.modelValue)
      }, u.value]),
      style: Je([{
        transform: `rotate(${e.rotate + b.value * (g.value - e.min)}deg) scaleY(${I(g.value)})`
      }, f.value])
    }, null), A.value.map((Y) => {
      const U = Y === g.value;
      return T("div", {
        class: Ae([{
          "v-time-picker-clock__item": !0,
          "v-time-picker-clock__item--active": U,
          "v-time-picker-clock__item--disabled": e.disabled || !D(Y)
        }, U && h.value]),
        style: Je([V(Y), U && y.value])
      }, [T("span", null, [e.format(Y)])]);
    })])]));
  }
}), nG = Be({
  ampm: Boolean,
  color: String,
  disabled: Boolean,
  hour: Number,
  minute: Number,
  second: Number,
  period: String,
  readonly: Boolean,
  useSeconds: Boolean,
  value: Number,
  viewMode: String
}, "VTimePickerControls"), ew = We()({
  name: "VTimePickerControls",
  props: nG(),
  emits: {
    "update:period": (e) => !0,
    "update:viewMode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = kn();
    return Ye(() => {
      let i = e.hour;
      return e.ampm && (i = i ? (i - 1) % 12 + 1 : 12), T("div", {
        class: "v-time-picker-controls"
      }, [T("div", {
        class: Ae({
          "v-time-picker-controls__time": !0,
          "v-time-picker-controls__time--with-seconds": e.useSeconds
        })
      }, [_(Xt, {
        active: e.viewMode === "hour",
        color: e.viewMode === "hour" ? e.color : void 0,
        disabled: e.disabled,
        variant: "tonal",
        class: Ae({
          "v-time-picker-controls__time__btn": !0,
          "v-time-picker-controls__time--with-ampm__btn": e.ampm,
          "v-time-picker-controls__time--with-seconds__btn": e.useSeconds
        }),
        text: e.hour == null ? "--" : $l(`${i}`),
        onClick: () => n("update:viewMode", "hour")
      }, null), T("span", {
        class: Ae(["v-time-picker-controls__time__separator", {
          "v-time-picker-controls--with-seconds__time__separator": e.useSeconds
        }])
      }, [ae(":")]), _(Xt, {
        active: e.viewMode === "minute",
        color: e.viewMode === "minute" ? e.color : void 0,
        class: Ae({
          "v-time-picker-controls__time__btn": !0,
          "v-time-picker-controls__time__btn__active": e.viewMode === "minute",
          "v-time-picker-controls__time--with-ampm__btn": e.ampm,
          "v-time-picker-controls__time--with-seconds__btn": e.useSeconds
        }),
        disabled: e.disabled,
        variant: "tonal",
        text: e.minute == null ? "--" : $l(e.minute),
        onClick: () => n("update:viewMode", "minute")
      }, null), e.useSeconds && T("span", {
        class: Ae(["v-time-picker-controls__time__separator", {
          "v-time-picker-controls--with-seconds__time__separator": e.useSeconds
        }]),
        key: "secondsDivider"
      }, [ae(":")]), e.useSeconds && _(Xt, {
        key: "secondsVal",
        active: e.viewMode === "second",
        color: e.viewMode === "second" ? e.color : void 0,
        variant: "tonal",
        onClick: () => n("update:viewMode", "second"),
        class: Ae({
          "v-time-picker-controls__time__btn": !0,
          "v-time-picker-controls__time__btn__active": e.viewMode === "second",
          "v-time-picker-controls__time--with-seconds__btn": e.useSeconds
        }),
        disabled: e.disabled,
        text: e.second == null ? "--" : $l(e.second)
      }, null), e.ampm && T("div", {
        class: "v-time-picker-controls__ampm"
      }, [_(Xt, {
        active: e.period === "am",
        color: e.period === "am" ? e.color : void 0,
        class: Ae({
          "v-time-picker-controls__ampm__am": !0,
          "v-time-picker-controls__ampm__btn": !0,
          "v-time-picker-controls__ampm__btn__active": e.period === "am"
        }),
        disabled: e.disabled,
        text: r("$vuetify.timePicker.am"),
        variant: e.disabled && e.period === "am" ? "elevated" : "tonal",
        onClick: () => e.period !== "am" ? n("update:period", "am") : null
      }, null), _(Xt, {
        active: e.period === "pm",
        color: e.period === "pm" ? e.color : void 0,
        class: Ae({
          "v-time-picker-controls__ampm__pm": !0,
          "v-time-picker-controls__ampm__btn": !0,
          "v-time-picker-controls__ampm__btn__active": e.period === "pm"
        }),
        disabled: e.disabled,
        text: r("$vuetify.timePicker.pm"),
        variant: e.disabled && e.period === "pm" ? "elevated" : "tonal",
        onClick: () => e.period !== "pm" ? n("update:period", "pm") : null
      }, null)])])]);
    }), {};
  }
}), aG = ci(24), sD = ci(12), rG = sD.map((e) => e + 12);
ci(60);
const iG = Be({
  allowedHours: [Function, Array],
  allowedMinutes: [Function, Array],
  allowedSeconds: [Function, Array],
  disabled: Boolean,
  format: {
    type: String,
    default: "ampm"
  },
  max: String,
  min: String,
  viewMode: {
    type: String,
    default: "hour"
  },
  modelValue: null,
  readonly: Boolean,
  scrollable: Boolean,
  useSeconds: Boolean,
  ...Tn(Vv({
    title: "$vuetify.timePicker.title"
  }), ["landscape"])
}, "VTimePicker"), oG = We()({
  name: "VTimePicker",
  props: iG(),
  emits: {
    "update:hour": (e) => !0,
    "update:minute": (e) => !0,
    "update:period": (e) => !0,
    "update:second": (e) => !0,
    "update:modelValue": (e) => !0,
    "update:viewMode": (e) => !0
  },
  setup(e, t) {
    let {
      emit: n,
      slots: a
    } = t;
    const {
      t: r
    } = kn(), i = be(null), o = be(null), l = be(null), s = be(null), d = be(null), u = be(null), f = be("am"), h = wt(e, "viewMode", "hour"), y = be(null), p = be(null), w = W(() => {
      let V;
      if (e.allowedHours instanceof Array ? V = (H) => e.allowedHours.includes(H) : V = e.allowedHours, !e.min && !e.max) return V;
      const B = e.min ? Number(e.min.split(":")[0]) : 0, F = e.max ? Number(e.max.split(":")[0]) : 23;
      return (H) => H >= Number(B) && H <= Number(F) && (!V || V(H));
    }), b = W(() => {
      let V;
      const B = !w.value || i.value === null || w.value(i.value);
      if (e.allowedMinutes instanceof Array ? V = (U) => e.allowedMinutes.includes(U) : V = e.allowedMinutes, !e.min && !e.max)
        return B ? V : () => !1;
      const [F, H] = e.min ? e.min.split(":").map(Number) : [0, 0], [K, Z] = e.max ? e.max.split(":").map(Number) : [23, 59], ue = F * 60 + Number(H), Y = K * 60 + Number(Z);
      return (U) => {
        const q = 60 * i.value + U;
        return q >= ue && q <= Y && B && (!V || V(U));
      };
    }), v = W(() => {
      let V;
      const F = (!w.value || i.value === null || w.value(i.value)) && (!b.value || o.value === null || b.value(o.value));
      if (e.allowedSeconds instanceof Array ? V = (ee) => e.allowedSeconds.includes(ee) : V = e.allowedSeconds, !e.min && !e.max)
        return F ? V : () => !1;
      const [H, K, Z] = e.min ? e.min.split(":").map(Number) : [0, 0, 0], [ue, Y, U] = e.max ? e.max.split(":").map(Number) : [23, 59, 59], q = H * 3600 + K * 60 + Number(Z || 0), oe = ue * 3600 + Y * 60 + Number(U || 0);
      return (ee) => {
        const he = 3600 * i.value + 60 * o.value + ee;
        return he >= q && he <= oe && F && (!V || V(ee));
      };
    }), g = W(() => e.format === "ampm");
    tt(() => e.modelValue, (V) => P(V)), an(() => {
      P(e.modelValue);
    });
    function k() {
      return i.value != null && o.value != null && (!e.useSeconds || l.value != null) ? `${$l(i.value)}:${$l(o.value)}` + (e.useSeconds ? `:${$l(l.value)}` : "") : null;
    }
    function A() {
      const V = k();
      V !== null && n("update:modelValue", V);
    }
    function C(V) {
      return V ? (V - 1) % 12 + 1 : 12;
    }
    function D(V, B) {
      return V % 12 + (B === "pm" ? 12 : 0);
    }
    function P(V) {
      if (V == null || V === "")
        i.value = null, o.value = null, l.value = null;
      else if (V instanceof Date)
        i.value = V.getHours(), o.value = V.getMinutes(), l.value = V.getSeconds();
      else {
        const [B, , F, , H, K] = V.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/) || new Array(6);
        i.value = K ? D(parseInt(B, 10), K) : parseInt(B, 10), o.value = parseInt(F, 10), l.value = parseInt(H || 0, 10);
      }
      f.value = i.value == null || i.value < 12 ? "am" : "pm";
    }
    function O(V, B) {
      const F = w.value;
      if (!F) return B;
      const H = g.value ? B < 12 ? sD : rG : aG;
      return ((H.find((Z) => F((Z + B) % H.length + H[0])) || 0) + B) % H.length + H[0];
    }
    function I(V) {
      if (f.value = V, i.value != null) {
        const B = i.value + (f.value === "am" ? -12 : 12);
        i.value = O("hour", B);
      }
      return n("update:period", V), A(), !0;
    }
    function x(V) {
      h.value === "hour" ? i.value = g.value ? D(V, f.value) : V : h.value === "minute" ? o.value = V : l.value = V;
    }
    function M(V) {
      switch (h.value || "hour") {
        case "hour":
          n("update:hour", V);
          break;
        case "minute":
          n("update:minute", V);
          break;
        case "second":
          n("update:second", V);
          break;
      }
      const B = i.value !== null && o.value !== null && (e.useSeconds ? l.value !== null : !0);
      h.value === "hour" ? h.value = "minute" : e.useSeconds && h.value === "minute" && (h.value = "second"), !(i.value === s.value && o.value === d.value && (!e.useSeconds || l.value === u.value) || k() === null) && (s.value = i.value, d.value = o.value, e.useSeconds && (u.value = l.value), B && A());
    }
    Ye(() => {
      const V = Nu.filterProps(e), B = ew.filterProps(e), F = Zb.filterProps(Tn(e, ["format", "modelValue", "min", "max"]));
      return _(Nu, Fe(V, {
        color: void 0,
        class: ["v-time-picker", e.class],
        style: e.style
      }), {
        title: () => a.title?.() ?? T("div", {
          class: "v-time-picker__title"
        }, [r(e.title)]),
        header: () => _(ew, Fe(B, {
          ampm: g.value,
          hour: i.value,
          minute: o.value,
          period: f.value,
          second: l.value,
          viewMode: h.value,
          "onUpdate:period": (H) => I(H),
          "onUpdate:viewMode": (H) => h.value = H,
          ref: y
        }), null),
        default: () => _(Zb, Fe(F, {
          allowedValues: h.value === "hour" ? w.value : h.value === "minute" ? b.value : v.value,
          double: h.value === "hour" && !g.value,
          format: h.value === "hour" ? g.value ? C : (H) => H : (H) => $l(H, 2),
          max: h.value === "hour" ? g.value && f.value === "am" ? 11 : 23 : 59,
          min: h.value === "hour" && g.value && f.value === "pm" ? 12 : 0,
          size: 20,
          step: h.value === "hour" ? 1 : 5,
          modelValue: h.value === "hour" ? i.value : h.value === "minute" ? o.value : l.value,
          onChange: M,
          onInput: x,
          ref: p
        }), null),
        actions: a.actions
      });
    });
  }
}), sG = Be({
  ...pt(),
  ...Di({
    variant: "text"
  })
}, "VToolbarItems"), lG = We()({
  name: "VToolbarItems",
  props: sG(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    return aa({
      VBtn: {
        color: ye(() => e.color),
        height: "inherit",
        variant: ye(() => e.variant)
      }
    }), Ye(() => T("div", {
      class: Ae(["v-toolbar-items", e.class]),
      style: Je(e.style)
    }, [n.default?.()])), {};
  }
}), cG = Be({
  id: String,
  interactive: Boolean,
  text: String,
  ...Tn(cm({
    closeOnBack: !1,
    location: "end",
    locationStrategy: "connected",
    eager: !0,
    minWidth: 0,
    offset: 10,
    openOnClick: !1,
    openOnHover: !0,
    origin: "auto",
    scrim: !1,
    scrollStrategy: "reposition",
    transition: null
  }), ["absolute", "persistent"])
}, "VTooltip"), lD = We()({
  name: "VTooltip",
  props: cG(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = wt(e, "modelValue"), {
      scopeId: r
    } = wc(), i = qr(), o = ye(() => e.id || `v-tooltip-${i}`), l = be(), s = W(() => e.location.split(" ").length > 1 ? e.location : e.location + " center"), d = W(() => e.origin === "auto" || e.origin === "overlap" || e.origin.split(" ").length > 1 || e.location.split(" ").length > 1 ? e.origin : e.origin + " center"), u = ye(() => e.transition != null ? e.transition : a.value ? "scale-transition" : "fade-transition"), f = W(() => Fe({
      "aria-describedby": o.value
    }, e.activatorProps));
    return Ye(() => {
      const h = xo.filterProps(e);
      return _(xo, Fe({
        ref: l,
        class: ["v-tooltip", {
          "v-tooltip--interactive": e.interactive
        }, e.class],
        style: e.style,
        id: o.value
      }, h, {
        modelValue: a.value,
        "onUpdate:modelValue": (y) => a.value = y,
        transition: u.value,
        absolute: !0,
        location: s.value,
        origin: d.value,
        persistent: !0,
        role: "tooltip",
        activatorProps: f.value,
        _disableGlobalStack: !0
      }, r), {
        activator: n.activator,
        default: function() {
          for (var y = arguments.length, p = new Array(y), w = 0; w < y; w++)
            p[w] = arguments[w];
          return n.default?.(...p) ?? e.text;
        }
      });
    }), Za({}, l);
  }
}), uG = Be({
  ...Tn(hP({
    collapseIcon: "$treeviewCollapse",
    expandIcon: "$treeviewExpand"
  }), ["subgroup"])
}, "VTreeviewGroup"), tw = We()({
  name: "VTreeviewGroup",
  props: uG(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = be(), r = W(() => a.value?.isOpen ? e.collapseIcon : e.expandIcon), i = W(() => ({
      VTreeviewItem: {
        prependIcon: void 0,
        appendIcon: void 0,
        toggleIcon: r.value
      }
    }));
    return Ye(() => {
      const o = Ff.filterProps(e);
      return _(Ff, Fe(o, {
        ref: a,
        class: ["v-treeview-group", e.class],
        subgroup: !0
      }), {
        ...n,
        activator: n.activator ? (l) => T(Ge, null, [_(Ht, {
          defaults: i.value
        }, {
          default: () => [n.activator?.(l)]
        })]) : void 0
      });
    }), {};
  }
}), cD = Symbol.for("vuetify:v-treeview"), uD = Be({
  loading: Boolean,
  hideActions: Boolean,
  indentLines: Array,
  toggleIcon: St,
  ...pP({
    slim: !0
  })
}, "VTreeviewItem"), nw = We()({
  name: "VTreeviewItem",
  props: uD(),
  emits: {
    toggleExpand: (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const r = Gt(cD, {
      visibleIds: be()
    }).visibleIds, i = be(), o = W(() => i.value?.root.activatable.value && i.value?.isGroupActivator), l = W(() => i.value?.link.isClickable.value || e.value != null && !!i.value?.list), s = W(() => !e.disabled && e.link !== !1 && (e.link || l.value || o.value)), d = W(() => r.value && !r.value.has(Ot(i.value?.id)));
    function u(h) {
      s.value && o.value && i.value?.activate(!i.value?.isActivated, h);
    }
    function f(h) {
      h.preventDefault(), h.stopPropagation(), a("toggleExpand", h);
    }
    return Ye(() => {
      const h = Xi.filterProps(e), y = n.prepend || e.toggleIcon || e.indentLines;
      return _(Xi, Fe({
        ref: i
      }, h, {
        active: i.value?.isActivated || void 0,
        class: ["v-treeview-item", {
          "v-treeview-item--activatable-group-activator": o.value,
          "v-treeview-item--filtered": d.value
        }, e.class],
        ripple: !1,
        onClick: u
      }), {
        ...n,
        prepend: y ? (p) => T(Ge, null, [e.indentLines && e.indentLines.length > 0 ? T("div", {
          key: "indent-lines",
          class: "v-treeview-indent-lines",
          style: {
            "--v-indent-parts": e.indentLines.length
          }
        }, [e.indentLines.map((w) => T("div", {
          class: Ae(`v-treeview-indent-line v-treeview-indent-line--${w}`)
        }, null))]) : "", !e.hideActions && _(CP, {
          start: !0
        }, {
          default: () => [e.toggleIcon ? _(Xt, {
            density: "compact",
            icon: e.toggleIcon,
            loading: e.loading,
            variant: "text",
            onClick: f
          }, {
            loader: () => _(rc, {
              indeterminate: "disable-shrink",
              size: "20",
              width: "2"
            }, null)
          }) : T("div", {
            class: "v-treeview-item__level"
          }, null)]
        }), n.prepend?.(p)]) : void 0
      });
    }), Za({}, i);
  }
}), dD = Be({
  fluid: Boolean,
  disabled: Boolean,
  loadChildren: Function,
  loadingIcon: {
    type: String,
    default: "$loading"
  },
  items: Array,
  openOnClick: {
    type: Boolean,
    default: void 0
  },
  indeterminateIcon: {
    type: St,
    default: "$checkboxIndeterminate"
  },
  falseIcon: St,
  trueIcon: St,
  returnObject: Boolean,
  activatable: Boolean,
  selectable: Boolean,
  selectedColor: String,
  selectStrategy: [String, Function, Object],
  index: Number,
  isLastGroup: Boolean,
  separateRoots: Boolean,
  parentIndentLines: Array,
  indentLinesVariant: String,
  path: {
    type: Array,
    default: () => []
  },
  ...us(uD(), ["hideActions"]),
  ...Wa()
}, "VTreeviewChildren"), G_ = We()({
  name: "VTreeviewChildren",
  props: dD(),
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = Zn(/* @__PURE__ */ new Set()), r = be([]), i = W(() => !e.disabled && (e.openOnClick != null ? e.openOnClick : e.selectable && !e.activatable));
    async function o(s) {
      try {
        if (!e.items?.length || !e.loadChildren) return;
        s?.children?.length === 0 && (a.add(s.value), await e.loadChildren(s.raw));
      } finally {
        a.delete(s.value);
      }
    }
    function l(s, d) {
      e.selectable && s(d);
    }
    return () => n.default?.() ?? e.items?.map((s, d, u) => {
      const {
        children: f,
        props: h
      } = s, y = a.has(s.value), p = !!u.at(d + 1)?.children, w = e.path?.length ?? 0, b = u.length - 1 === d, v = {
        index: d,
        depth: w,
        isFirst: d === 0,
        isLast: b,
        path: [...e.path, d],
        hideAction: e.hideActions
      }, g = b4({
        depth: w,
        isLast: b,
        isLastGroup: e.isLastGroup,
        leafLinks: !e.hideActions && !e.fluid,
        separateRoots: e.separateRoots,
        parentIndentLines: e.parentIndentLines,
        variant: e.indentLinesVariant
      }), k = {
        prepend: (D) => T(Ge, null, [e.selectable && (!f || f && !["leaf", "single-leaf"].includes(e.selectStrategy)) && T("div", null, [_(Ao, {
          key: s.value,
          modelValue: D.isSelected,
          disabled: e.disabled,
          loading: y,
          color: e.selectedColor,
          density: e.density,
          indeterminate: D.isIndeterminate,
          indeterminateIcon: e.indeterminateIcon,
          falseIcon: e.falseIcon,
          trueIcon: e.trueIcon,
          "onUpdate:modelValue": (P) => l(D.select, P),
          onClick: (P) => P.stopPropagation(),
          onKeydown: (P) => {
            ["Enter", "Space"].includes(P.key) && (P.stopPropagation(), l(D.select, D.isSelected));
          }
        }, null)]), n.prepend?.({
          ...D,
          ...v,
          item: s.raw,
          internalItem: s
        })]),
        append: n.append ? (D) => n.append?.({
          ...D,
          ...v,
          item: s.raw,
          internalItem: s
        }) : void 0,
        title: n.title ? (D) => n.title?.({
          ...D,
          item: s.raw,
          internalItem: s
        }) : void 0,
        subtitle: n.subtitle ? (D) => n.subtitle?.({
          ...D,
          item: s.raw,
          internalItem: s
        }) : void 0
      }, A = tw.filterProps(h), C = G_.filterProps({
        ...e,
        ...v
      });
      return f ? _(tw, Fe(A, {
        value: e.returnObject ? s.raw : A?.value,
        rawId: A?.value
      }), {
        activator: (D) => {
          let {
            props: P
          } = D;
          const O = {
            ...h,
            ...P,
            value: h?.value,
            onToggleExpand: [() => o(s), P.onClick],
            onClick: i.value ? [() => o(s), P.onClick] : () => l(r.value[d]?.select, !r.value[d]?.isSelected)
          };
          return _(nw, Fe({
            ref: (I) => r.value[d] = I
          }, O, {
            hideActions: e.hideActions,
            indentLines: g.node,
            value: e.returnObject ? s.raw : h.value,
            loading: y
          }), k);
        },
        default: () => _(G_, Fe(C, {
          items: f,
          indentLinesVariant: e.indentLinesVariant,
          parentIndentLines: g.children,
          isLastGroup: p,
          returnObject: e.returnObject
        }), n)
      }) : $g(n.item, {
        props: h,
        item: s.raw,
        internalItem: s
      }, () => s.type === "divider" ? $g(n.divider, {
        props: s.raw
      }, () => _(fi, s.props, null)) : s.type === "subheader" ? $g(n.subheader, {
        props: s.raw
      }, () => _(rd, s.props, null)) : _(nw, Fe(h, {
        hideActions: e.hideActions,
        indentLines: g.leaf,
        value: e.returnObject ? Ot(s.raw) : h.value
      }), k));
    });
  }
});
function fD(e) {
  let t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
  for (const n of e)
    t.push(n), n.children && fD(n.children, t);
  return t;
}
const dG = Be({
  openAll: Boolean,
  indentLines: [Boolean, String],
  search: String,
  ...id({
    filterKeys: ["title"]
  }),
  ...Tn(dD(), ["index", "path", "indentLinesVariant", "parentIndentLines", "isLastGroup"]),
  ...Tn(SP({
    collapseIcon: "$treeviewCollapse",
    expandIcon: "$treeviewExpand",
    slim: !0
  }), ["nav", "openStrategy"]),
  modelValue: Array
}, "VTreeview"), fG = We()({
  name: "VTreeview",
  props: dG(),
  emits: {
    "update:opened": (e) => !0,
    "update:activated": (e) => !0,
    "update:selected": (e) => !0,
    "update:modelValue": (e) => !0,
    "click:open": (e) => !0,
    "click:select": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n,
      emit: a
    } = t;
    const {
      items: r
    } = kP(e), i = ye(() => e.activeColor), o = ye(() => e.baseColor), l = ye(() => e.color), s = wt(e, "activated"), d = wt(e, "selected"), u = W({
      get: () => e.modelValue ?? d.value,
      set(k) {
        d.value = k, a("update:modelValue", k);
      }
    }), f = be(), h = W(() => e.openAll ? g(r.value) : e.opened), y = W(() => fD(r.value)), p = ye(() => e.search), {
      filteredItems: w
    } = od(e, y, p), b = W(() => {
      if (!p.value) return null;
      const k = f.value?.getPath;
      return k ? new Set(w.value.flatMap((A) => {
        const C = e.returnObject ? A.raw : A.props.value;
        return [...k(C), ...v(C)].map(Ot);
      })) : null;
    });
    function v(k) {
      const A = [], C = (f.value?.children.get(k) ?? []).slice();
      for (; C.length; ) {
        const D = C.shift();
        D && (A.push(D), C.push(...(f.value?.children.get(D) ?? []).slice()));
      }
      return A;
    }
    function g(k) {
      let A = [];
      for (const C of k)
        C.children && (A.push(e.returnObject ? Ot(C.raw) : C.value), C.children && (A = A.concat(g(C.children))));
      return A;
    }
    return Ln(cD, {
      visibleIds: b
    }), aa({
      VTreeviewGroup: {
        activeColor: i,
        baseColor: o,
        color: l,
        collapseIcon: ye(() => e.collapseIcon),
        expandIcon: ye(() => e.expandIcon)
      },
      VTreeviewItem: {
        activeClass: ye(() => e.activeClass),
        activeColor: i,
        baseColor: o,
        color: l,
        density: ye(() => e.density),
        disabled: ye(() => e.disabled),
        lines: ye(() => e.lines),
        variant: ye(() => e.variant)
      }
    }), Ye(() => {
      const k = Ru.filterProps(e), A = G_.filterProps(e), C = typeof e.indentLines == "boolean" ? "default" : e.indentLines;
      return _(Ru, Fe({
        ref: f
      }, k, {
        class: ["v-treeview", {
          "v-treeview--fluid": e.fluid
        }, e.class],
        openStrategy: "multiple",
        style: e.style,
        opened: h.value,
        activated: s.value,
        "onUpdate:activated": (D) => s.value = D,
        selected: u.value,
        "onUpdate:selected": (D) => u.value = D
      }), {
        default: () => [_(G_, Fe(A, {
          density: e.density,
          returnObject: e.returnObject,
          items: r.value,
          parentIndentLines: e.indentLines ? [] : void 0,
          indentLinesVariant: C
        }), n)]
      });
    }), {};
  }
}), mG = We()({
  name: "VValidation",
  props: eP(),
  emits: {
    "update:modelValue": (e) => !0
  },
  setup(e, t) {
    let {
      slots: n
    } = t;
    const a = tP(e, "validation");
    return () => n.default?.(a);
  }
}), hG = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  VAlert: Cz,
  VAlertTitle: jE,
  VApp: OH,
  VAppBar: JH,
  VAppBarNavIcon: gz,
  VAppBarTitle: yz,
  VAutocomplete: HW,
  VAvatar: Oi,
  VBadge: WW,
  VBanner: YW,
  VBannerActions: FP,
  VBannerText: NP,
  VBottomNavigation: QW,
  VBottomSheet: XW,
  VBreadcrumbs: nK,
  VBreadcrumbsDivider: $P,
  VBreadcrumbsItem: qP,
  VBtn: Xt,
  VBtnGroup: Eb,
  VBtnToggle: az,
  VCard: sK,
  VCardActions: HP,
  VCardItem: KP,
  VCardSubtitle: zP,
  VCardText: jP,
  VCardTitle: WP,
  VCarousel: vK,
  VCarouselItem: gK,
  VCheckbox: Mz,
  VCheckboxBtn: Ao,
  VChip: ad,
  VChipGroup: Uz,
  VClassIcon: Ww,
  VCode: yK,
  VCol: Yj,
  VColorPicker: lj,
  VCombobox: uj,
  VComponentIcon: nb,
  VConfirmEdit: fj,
  VContainer: zj,
  VCounter: Pv,
  VDataIterator: kj,
  VDataTable: Fj,
  VDataTableFooter: Uf,
  VDataTableHeaders: sc,
  VDataTableRow: s1,
  VDataTableRows: lc,
  VDataTableServer: qj,
  VDataTableVirtual: Uj,
  VDatePicker: oY,
  VDatePickerControls: Wb,
  VDatePickerHeader: Kb,
  VDatePickerMonth: jb,
  VDatePickerMonths: Yb,
  VDatePickerYears: Gb,
  VDefaultsProvider: Ht,
  VDialog: Rb,
  VDialogBottomTransition: MH,
  VDialogTopTransition: LH,
  VDialogTransition: Cv,
  VDivider: fi,
  VEmptyState: lY,
  VExpandTransition: Av,
  VExpandXTransition: V0,
  VExpansionPanel: cY,
  VExpansionPanelText: Qb,
  VExpansionPanelTitle: Jb,
  VExpansionPanels: fY,
  VFab: hY,
  VFabTransition: VH,
  VFadeTransition: Df,
  VField: Js,
  VFieldLabel: Jd,
  VFileInput: pY,
  VFooter: yY,
  VForm: wY,
  VHover: SY,
  VIcon: pn,
  VImg: os,
  VInfiniteScroll: AY,
  VInput: hr,
  VItem: IY,
  VItemGroup: TY,
  VKbd: PY,
  VLabel: nd,
  VLayout: DY,
  VLayoutItem: VY,
  VLazy: LY,
  VLigatureIcon: b8,
  VList: Ru,
  VListGroup: Ff,
  VListImg: oW,
  VListItem: Xi,
  VListItemAction: CP,
  VListItemMedia: cW,
  VListItemSubtitle: _P,
  VListItemTitle: vP,
  VListSubheader: rd,
  VLocaleProvider: FY,
  VMain: UY,
  VMenu: Fu,
  VMessages: XE,
  VNavigationDrawer: GY,
  VNoSsr: QY,
  VNumberInput: t7,
  VOtpInput: a7,
  VOverlay: xo,
  VPagination: Hb,
  VParallax: o7,
  VProgressCircular: rc,
  VProgressLinear: xv,
  VRadio: l7,
  VRadioGroup: u7,
  VRangeSlider: f7,
  VRating: h7,
  VResponsive: Tb,
  VRow: tY,
  VScaleTransition: D0,
  VScrollXReverseTransition: FH,
  VScrollXTransition: RH,
  VScrollYReverseTransition: UH,
  VScrollYTransition: NH,
  VSelect: G0,
  VSelectionControl: Qs,
  VSelectionControlGroup: GE,
  VSheet: Nf,
  VSkeletonLoader: g7,
  VSlideGroup: Lf,
  VSlideGroupItem: y7,
  VSlideXReverseTransition: qH,
  VSlideXTransition: $H,
  VSlideYReverseTransition: HH,
  VSlideYTransition: B0,
  VSlider: qb,
  VSnackbar: Xb,
  VSnackbarQueue: k7,
  VSpacer: LO,
  VSparkline: x7,
  VSpeedDial: I7,
  VStepper: M7,
  VStepperActions: XO,
  VStepperHeader: ZO,
  VStepperItem: eD,
  VStepperWindow: tD,
  VStepperWindowItem: nD,
  VSvgIcon: zw,
  VSwitch: R7,
  VSystemBar: N7,
  VTab: aD,
  VTable: cc,
  VTabs: W7,
  VTabsWindow: rD,
  VTabsWindowItem: iD,
  VTextField: ss,
  VTextarea: j7,
  VThemeProvider: G7,
  VTimePicker: oG,
  VTimePickerClock: Zb,
  VTimePickerControls: ew,
  VTimeline: eG,
  VTimelineItem: X7,
  VToolbar: Ib,
  VToolbarItems: lG,
  VToolbarTitle: O0,
  VTooltip: lD,
  VTreeview: fG,
  VTreeviewGroup: tw,
  VTreeviewItem: nw,
  VValidation: mG,
  VVirtualScroll: Ov,
  VWindow: ic,
  VWindowItem: oc
}, Symbol.toStringTag, { value: "Module" }));
function _G(e, t) {
  const n = t.modifiers || {}, a = t.value, {
    once: r,
    immediate: i,
    ...o
  } = n, l = !Object.keys(o).length, {
    handler: s,
    options: d
  } = typeof a == "object" ? a : {
    handler: a,
    options: {
      attributes: o?.attr ?? l,
      characterData: o?.char ?? l,
      childList: o?.child ?? l,
      subtree: o?.sub ?? l
    }
  }, u = new MutationObserver(function() {
    let f = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [], h = arguments.length > 1 ? arguments[1] : void 0;
    s?.(f, h), r && mD(e, t);
  });
  i && s?.([], u), e._mutate = Object(e._mutate), e._mutate[t.instance.$.uid] = {
    observer: u
  }, u.observe(e, d);
}
function mD(e, t) {
  e._mutate?.[t.instance.$.uid] && (e._mutate[t.instance.$.uid].observer.disconnect(), delete e._mutate[t.instance.$.uid]);
}
const vG = {
  mounted: _G,
  unmounted: mD
};
function pG(e, t) {
  const n = t.value, a = {
    passive: !t.modifiers?.active
  };
  window.addEventListener("resize", n, a), e._onResize = Object(e._onResize), e._onResize[t.instance.$.uid] = {
    handler: n,
    options: a
  }, t.modifiers?.quiet || n();
}
function gG(e, t) {
  if (!e._onResize?.[t.instance.$.uid]) return;
  const {
    handler: n,
    options: a
  } = e._onResize[t.instance.$.uid];
  window.removeEventListener("resize", n, a), delete e._onResize[t.instance.$.uid];
}
const yG = {
  mounted: pG,
  unmounted: gG
};
function hD(e, t) {
  const {
    self: n = !1
  } = t.modifiers ?? {}, a = t.value, r = typeof a == "object" && a.options || {
    passive: !0
  }, i = typeof a == "function" || "handleEvent" in a ? a : a.handler, o = n ? e : t.arg ? document.querySelector(t.arg) : window;
  o && (o.addEventListener("scroll", i, r), e._onScroll = Object(e._onScroll), e._onScroll[t.instance.$.uid] = {
    handler: i,
    options: r,
    // Don't reference self
    target: n ? void 0 : o
  });
}
function _D(e, t) {
  if (!e._onScroll?.[t.instance.$.uid]) return;
  const {
    handler: n,
    options: a,
    target: r = e
  } = e._onScroll[t.instance.$.uid];
  r.removeEventListener("scroll", n, a), delete e._onScroll[t.instance.$.uid];
}
function bG(e, t) {
  t.value !== t.oldValue && (_D(e, t), hD(e, t));
}
const wG = {
  mounted: hD,
  unmounted: _D,
  updated: bG
};
function kG(e, t) {
  const n = typeof e == "string" ? J(e) : e, a = SG(n, t);
  return {
    mounted: a,
    updated: a,
    unmounted(r) {
      k_(null, r);
    }
  };
}
function SG(e, t) {
  return function(n, a, r) {
    const i = typeof t == "function" ? t(a) : t, o = a.value?.text ?? a.value ?? i?.text, l = yf(a.value) ? a.value : {}, s = () => o ?? n.textContent, d = (r.ctx === a.instance.$ ? CG(r, a.instance.$)?.provides : r.ctx?.provides) ?? a.instance.$.provides, u = Eo(e, Fe(i, l), s);
    u.appContext = Object.assign(/* @__PURE__ */ Object.create(null), a.instance.$.appContext, {
      provides: d
    }), k_(u, n);
  };
}
function CG(e, t) {
  const n = /* @__PURE__ */ new Set(), a = (i) => {
    for (const o of i) {
      if (!o) continue;
      if (o === e || o.el && e.el && o.el === e.el)
        return !0;
      n.add(o);
      let l;
      if (o.suspense ? l = a([o.ssContent]) : Array.isArray(o.children) ? l = a(o.children) : o.component?.vnode && (l = a([o.component?.subTree])), l)
        return l;
      n.delete(o);
    }
    return !1;
  };
  if (!a([t.subTree]))
    return t;
  const r = Array.from(n).reverse();
  for (const i of r)
    if (i.component)
      return i.component;
  return t;
}
const AG = kG(lD, (e) => ({
  activator: "parent",
  location: e.arg?.replace("-", " "),
  text: typeof e.value == "boolean" ? void 0 : e.value
})), xG = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ClickOutside: Lb,
  Intersect: is,
  Mutate: vG,
  Resize: yG,
  Ripple: xr,
  Scroll: wG,
  Tooltip: AG,
  Touch: j_
}, Symbol.toStringTag, { value: "Module" }));
function kc() {
  const { name: e } = pi(), t = be(!1);
  an(() => {
    if (typeof frappe < "u" && frappe.utils && typeof frappe.utils.is_rtl == "function" && (t.value = frappe.utils.is_rtl()), !t.value) {
      const h = document.documentElement.dir || document.body.dir || "";
      t.value = h.toLowerCase() === "rtl";
    }
    if (!t.value) {
      const h = document.documentElement.lang || "", y = ["ar", "he", "fa", "ur", "ps", "sd", "ku", "dv"];
      t.value = y.some((p) => h.toLowerCase().startsWith(p));
    }
  });
  const n = W(() => ({
    direction: t.value ? "rtl" : "ltr",
    textAlign: t.value ? "right" : "left"
  })), a = (h = 0, y = 0, p = 0, w = 0) => t.value ? {
    marginLeft: `${y}px`,
    marginRight: `${h}px`,
    marginTop: `${p}px`,
    marginBottom: `${w}px`
  } : {
    marginLeft: `${h}px`,
    marginRight: `${y}px`,
    marginTop: `${p}px`,
    marginBottom: `${w}px`
  }, r = (h = 0, y = 0, p = 0, w = 0) => t.value ? {
    paddingLeft: `${y}px`,
    paddingRight: `${h}px`,
    paddingTop: `${p}px`,
    paddingBottom: `${w}px`
  } : {
    paddingLeft: `${h}px`,
    paddingRight: `${y}px`,
    paddingTop: `${p}px`,
    paddingBottom: `${w}px`
  }, i = (h = null, y = null, p = null, w = null) => {
    const b = {};
    return h !== null && y !== null ? t.value ? (b.left = `${y}px`, b.right = `${h}px`) : (b.left = `${h}px`, b.right = `${y}px`) : h !== null ? b[t.value ? "right" : "left"] = `${h}px` : y !== null && (b[t.value ? "left" : "right"] = `${y}px`), p !== null && (b.top = `${p}px`), w !== null && (b.bottom = `${w}px`), b;
  }, o = (h = "row") => t.value && h === "row" ? "row-reverse" : t.value && h === "row-reverse" ? "row" : h, l = (h = "left") => {
    if (t.value) {
      if (h === "left") return "right";
      if (h === "right") return "left";
    }
    return h;
  }, s = (h = "left") => {
    if (t.value) {
      if (h === "left") return "right";
      if (h === "right") return "left";
    }
    return h;
  }, d = (h = 0, y = 0, p = "") => `translateX(${t.value ? -h : h}px) translateY(${y}px) ${p}`.trim(), u = W(() => ({
    "rtl-layout": t.value,
    "ltr-layout": !t.value
  })), f = W(() => {
    const h = n.value, y = ["xs", "sm"].includes(e.value);
    return {
      ...h,
      // Adjust text alignment for mobile RTL
      ...y && t.value && {
        textAlign: "right"
      }
    };
  });
  return {
    // Reactive state
    isRtl: t,
    // Computed styles
    rtlStyles: n,
    rtlClasses: u,
    responsiveRtlStyles: f,
    // Helper functions
    getMarginStyle: a,
    getPaddingStyle: r,
    getPositionStyle: i,
    getFlexDirection: o,
    getTextAlign: l,
    getFloat: s,
    getTransform: d
  };
}
const vD = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7N13mB1nfTb++zszp20v2l31YlnNBQwYbHCnB0IIxQZCwi8k7xsSkpjgF0s2JVEKAUy1IYTkDT8SSAjY1AAGjAvNwbhg4ybJslVstdVqi7acOvN83z9WUmRZu9oyc56ZOffnunRd0u7ZZ+5dnT1zn5lnngGIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiCgZxHYAIpqbTzz1VCHITCwEnF51TCeM06minVDphGgnBB1QaYNqkwpyouiAIAegGUABkPz/jGZygDSdsIkRQPR//qk+gLEj/6gJZNxAhwUYF2BcoeOAc1hUR+HImEJHBRiAOAc8Mf2j/f7A5jPPrEb6QyGiGWMBIIqhDw48uigbeMuNY5apynKILBejiyBYBKAXwGIArZZjzsUQBP1QDADSD9V+FdktYnZBsMutya73LF53yHZIokbAAkBkwWa9w8sNLFvpwj8dcNao0bUQnA7IakCXA8jZzmjROCC7RMxOY2QXBLscwVYxumWib93uzSLGdkCiNGABIIrQZr3Dyw4uPt01ehZUzgTkTIieBcXpADK28yWPFgFsBZwtEH3EUWxVCR4u9vTv3CyX+bbTESUJCwBRSCbPyZeeZUSfB8FzoXgugDPQ2O/m66UCxUMQvVdU7gsc576unsMPv0POrdkORhRXLABEc3Cjqrujf+sZjrgvNNAXCvA8ABsAeLaz0TFlAA8CuFdE7xPFvSt61z1yhUhgOxhRHLAAEM3ADYPb24pGL4Ka80XlhQBegGROwmt0h6G4Ew5+Lqo/zY+69165Zk3FdigiG1gAiE7iw0NPtDvV4CIVvRSKSyB4DgDXdi4KXRnA3Sr6U0fdnxWl+t+be88ctx2KqB5YAIgAbH7kkWyhy71ARF4OkZcp9Bxwh9+IagB+IYofBq75YWXB+vt51QGlFQsANazrDj66RuG+AsAroLgUQIvlSBQ/BwH5EaA/9JG55X19p/XbDkQUFhYAahg3qro7BrZf4Kh5jUJ+C8Ba25koURTAAxC92Yh+89qeDffZDkQ0HywAlGqb9+1rKnijr1KV1wjwagDdtjNRWuiTKs43NQi+tXrh+p/x6gJKGhYASp1PPPVUoZopv1TEXA7gdeChfYreEIDvieh3xFRuvnrhsydsByI6FRYASoWPHvh1c4DCayH6RgFeCaBgOxM1rDEFvunA+Y+VvaffxiMDFFcsAJRYm1Wd/MBjLxLF7wF4C3hdPsXPIICvq+BL1/Su+7ntMETHYwGgxLnu4GPnGNW3CfBmAIts5yGaEcEWGPkPo8F/XLtowy7bcYhYACgRPjm8s6NSq75VVP8AkOfazkM0DyoiP4HBP+fH5BtciZBsYQGgWPvQwJbnOcb5IwBvBdBsOw9RyEYA3KhqPnPNwg0P2Q5DjYUFgGLnhsHtbWVf36zQKwGcaTsPUT0I5D4A/1wMWv598+LFRdt5KP1YACg2rjv42Dmq+k5A3wpIk+08RJYMAfhXY8ynOVeAosQCQFbdqOruGtj2elV5F4ALbOchipFAod+CyKd4BQFFgQWArPjIwNZWCfAHKvIXAFbazkMUb/orhVzf2Tv2n++Qc2u201A6sABQXX1o/5aV4jhXAvhDAdps5yFKEgX2QvCZbMX/56uWnTlkOw8lGwsA1cWHDj5+uqPB1QD+AIBnOw9Rwk1A9fMZT667asG6vbbDUDKxAFCkjkzsuwrA7wBwbechSpkqgK8acf/m2t7TH7cdhpKFBYAicd3BbRcZxV8K8FLbWYgaQBWCLxm4H2YRoJliAaBQXde/9QKF/DWAl9jOQtSAAkC+4hr5+/csWvOo7TAUbywAFIqPHNh+PhzzPih+03YWIoIB5OsCuXZj35onbIeheGIBoHn5aP/WZxmVD0HwKttZiOgZqqr4p0AyH3xf32n9tsNQvLAA0Jx8fO/jy3wveD+APwQn9xHF3QQgn8lmMx9+d+eqEdthKB5YAGhWPrZv2wLfxXsFeCeAnO08RDQrQ4B8OFMtfOaqZctKtsOQXSwANCM3bN+eK7YF7xLIewG0285DRPOhT6rKpk19a78qImo7DdnBAkCn9OED218jYj4JYLXtLEQUHhHcI+q86+q+Nb+wnYXqjwWApnTdwPbnahB8AiKX2M5CRJFRQL6mgfueaxavftJ2GKofFgB6ho/t27Yg8PAhKP4AgGM7DxHVxTgEf1+ayH5y86pVZdthKHosAHTMZlUnf3D7/xbo3wPosp2HiKzYKSpXbly49ru2g1C0WAAIwJHD/cb8A4DzbWchohgQfFd97095WiC9WAAa3EcGtrbCyIcB/DF4uJ+IjqPAqIh8YFXPmn+4QiSwnYfCxQLQwD7cv+UVAvlnQJbbzkJEsfYADN6xadG6u20HofDMqQCc88k7OoIhXQ2gJeQ8p5RpyowvdwsjbkZ57eocdS3x2haelduUycmbwBJIRDNjahW90e3Xd2++7MwDtsPQ/M3oxf9Zm+/sLWn5r8er/ivH/WBpOQg81Gn32+S5WNqSR08hi/ZsBlmH+ysiIlsyBQnae3Mb//G1z/qE7Sw0P9PuTdduvmNBxa/+50Cx9pKaal33vM0ZD2d2tmBxU47vUYmIYqa5y7tnZEBe/q13P4f3FkioKXeta/7y1uv2T1SuqhhT1xu9OBCc0dWM09qawTf7RETx5WZlwgT6lhv/9AXfsZ2FZu+Zu9jN6qwKbvvB3vHyy7Rex/mPyLoOnt/bgZ58pq7bJSKiuRORL2pWrrzpHecetp2FZu4Zl30tqf1oy57xUt13/nnXwSWLu7jzJyJKGFV9GyrBr6/41N0X285CM/e0IwAr33/LD/dOVF5e7xCuABcs6kJXjjt/IqIEUwU+PYHOjd+/ck3Fdhia3rEjAGv+8tYP7Juo1n3nDwDP6m7jzp+IKPlEgCtbZPiuN3zm7jNth6HpOQDwvM33Nh0sVT9Q78P+ANCZy2BFS6Hu2yUioogoznEM7r3803e/y3YUmpoDACP+8BeKfmDlLfgZXa28zI+IKH3yUHzq8k/f/Y3f+ezPOm2HoWdyztx8Y7a/XH2DjY0vyGc46Y+IKM0Ur6sFuXsvv+GeF9iOQk/n+FjwF5Wgvtf6H7WUh/6JiNJPcRqgP7v8+l9ehTovKkdTc0o138q7fwDoK2RtbZqIiOorC5GPX/7pe77925+8v8N2GAKckq9rbWw47zooeFYOPBARkT2vybi1u950/T1n2Q7S6JxyUGuzseHmDHf+REQNap0RveuKG375FttBGplTC/QZqwHWQ8ZhASAiamDNCvnyG2+4+/pLN9/h2Q7TiJzA0oZdTgMhImp4AlzZ09X8w9d95pfdtrM0Givv/omIiI7zYk/lbs4LqC8WACIisk9xmhHzi8uv/+XrbEdpFCwAREQUE9ICka9dccM977WdpBGwABARUZw4Cv3g5Tfc/YXLNz/CxWIixAJARERx9Pvomrj9LR+7d4HtIGnFAkBERHF1gZ8NfvGG6+9aYztIGrEAEBFRjMnpjjg/582EwscCQEREcdcL6O1XXH/Pq2wHSRMWACIiSoJmFf325Z/+5R/aDpIWLABERJQUHlT+7xXX/3Kz7SBpwAJARERJIiryV5ffcM/HocpF5eeBBYCIiBJIr3rjDfd8kTcSmjsWACIiSiQR/G5PV/O//9E/3ZuxnSWJWACIiCjJ3jRc0W/+/hfuyNsOkjSxPXSyvCvAsk5Fe8HAc22nISKiGHt1U8Z7+MV33vmit11wwUHbYZIiVgUg6wGvPLOKl26oobfV2I5DRETJsfqJAXfLz7f+fOWF6y8csx0mCWJTANb1BbjyJSV0N6vtKERElECre4Kuwojer3rHWSKXlW3nibtYzAE4b1UN7381d/5ERDQ/izvM6tKYfl/15pztLHFnvQCs6g7wzksryLjc+RMR0fzlMnqplvPfYgmYntUC4AjwZ5eVkfO48yciovAo9JVazn2TJWBqVgvApetqWNLJyX5ERBQ+BX5DK7kvq3KdgJOxXgCIiIiioorXa2XkP1W5YuCJrBWAribBmh6++yciomipyhtM2XxR9UauKnMcawVgRScgwnP/RERUF28x5e7/q7yB0DHWCsACXvJHRET19XZTvv1vbYeIC2sFIMuzMUREVH/vC8q3/bntEHFgfR0AIiKiulJ8yi/e/gbbMWxjASAiokbjiOi/a+lHF9oOYhMLABERNaK8gfNdrfzobNtBbGEBICKiRtVujHOzFn+4zHYQG1gAiIiokS014t2sw3d02A5SbywARETU6M4K8tpw9w1gASAiooYn0EtNOf952znqiQWAiIgIAKBvDYq3X207Rb2kfzkeNQC46iBRuAQQS+8fVAHwPiIUmQ/7xe/t8Jpe/XXbQaKWygIgfgmoDEOC0pEXCyIKnQDqNgG5DqjXFO22jA+pDEJqE0dKPVFkHIhzkw596TXS9Xvfsx0mSqk7BSCVw5CJvRC/yJ0/UZQUEL8ImdgHqY5Et52gDGf8KUh1jDt/qg81glr1G1q6cbntKFFKVwEIKpDygO0URA1HSoeAoBz+wGrgFA8AGoQ/NtF01M9ivHy36uZUHikHUlYApBLhuxAimlYUv3/ijwPGD31cohkJSn06tOY22zGikq4CEMU7ECKakUh+/4JK+GMSzYLUxi8OBr/8cds5opCqAsBz/kQWRXF+3vB3muxz/OK7dehrr7GdI2zpKgBERERh00DUP/x1Hf76CttRwsQCQEREdApi/Az8ibtUVWxnCQsLABER0UwEpYUY+urXbMcICwsAERHRTPmjr9fhm95uO0YYUnt9IxE1GGNghgeg5YlkTgjO5OB0LoBk81ZjaK0GM9wPVGN0BYY4kOYWOO0LAIngCLwqzMgAtDQ+s4mnrvt53fHZ++S0dz4Yfpj6YQEgouRTRbB/F7RctJ1k7iolBBOjcJethmQs3ZXW9xHseRww8Vt4ScsT0GoFbu/S0McODjwJLY7N5kskcA78QlVbRCSBbXMSTwEQUeJppZjsnf9RaqCHh6xt3owNx3Lnf5SOjQB+uAtDabU8253/5NeNDzcF2z92Z6hh6owFgIgST2tV2xFCY/N70VqMDvtPIfSM8/h566E9Lwx2feZPQ0xTVywARJR8iT0IezKp+mbCF6eL8NRAB3Z/Wnd9aZHtKHPBAkBERDRHWi2Lmdh1v+0cc8ECQERENA9m5GCf/8SnPmc7x2yxABBR4omTopcyce1tOgk/Rwk5Y0jfsx566h26+3NnhDJYnSTgf5uIaHqSLyBeJ4fnTpqa7G0732xt2zPiuqGvkyC5QjglwK8iGN3/i/kPVD8sAESUfF4WzoJFSHoJkOY2OK3d9rbf0gantdPa9qflOJNrAIS9EJDjwu1ZEsq4OjrUZrZ/8sYQUtUFFwIiolRw2rsgza1AuQg1EdyaOEoCSCZ/5EiG3SBO7xJIeze0WorNBQniupB8E+BGs8uSlnZ4+ebJxYbm+9xx9Y068JW10vPmx8JJFx0WACJKDfEyQEt7wo8D2Ce5PCRnd0niuvM8SDjPHYFT+xGA2N86mKcAiIiIwlQrLg+GvvIh2zFOhUcAyCKFmRiBKY5MHm40BnAcSLYAp6kDTnMHkn5Ol4gak9TGN+rw1z8nnW/YbTvLVFgAqO6CwwcRDOyEP/gktDIx5eMk2wyvexnc3lVw2/vqmJCIaH5EAwem9F0AZ9vOMhUWAKobUxxBbdcD8A/tmtHjtTqB2v6tqO3fCrdzMbKrzoXT0hVtSIoXHgCiJKtNnBUMff2dbtcbPms7yslwDgDVgaK6+wGU7vv2jHf+JwqG96F0/3dQ3fUrxGZqMkVP+B6Fks3xD39C9duttnOcDAsARcsEqGz9OWq7HwB0njtuVdSefBDlh2+D+rVw8lGsacbeojhEoTC1HEZK37Ad42RYACg6qig/egf8g0+EOmwwtAeVLXfMv1BQ/Ll5aDaWb56IZq4y+lIdufHFtmOciAWAIlPdcQ+CoT2RjB0M70P1ibsjGZviRfO90Gyb7RhE86DQWvmrtlOciCfYKBLB4FOo7X000m3U9m2B07EQ3oLYr7dB8yECLfRCs+0QfwIwPjg7kBJogY59+0+k9bX/aDvIUSwAFD5VVHfcM6OHOs1d8HpXwmnuhmRz0GoFZmII/sBOmPGhU359bed98LqXWr2DGtWJm4O6OdspiOZMgfeq3vElkcvGbWcBWAAoAv7+x2BKo9M+RrwssmteCK9nJU58N+d2LUFm2VnwB3ahuv0uqF+ZchxTGkVt/2PILN4QQnIiokgtNRX9AIBNtoMAnANAEagd2Dbt5yVbQP45vwmvZxWmPpQr8HpWIf+cV0Oy098gxd8//faIiGJD9S+0fMsa2zEAFgAKmVbGYcaHp36ACHIbLoVTmNmkLqfQhvwZL572Vp1mYgSmNDbbqERENmQV7nW2QwAsABQyf/ApTLdQj9cz+2V9nbYeeL2rp31MMPjkrMYkIrJFFb9dK9/2cts5WAAoVGZs+ol73qK1cxrXWzj915mJwTmNS0Rkg6P4pOodVufhsQBQqLQ8zaF4ceG2ze2mPm5bD+BMPdNfy7GYVEtENFNnmErwhzYDsABQqDTwp/ycZPPTnsuflgic3NTLwnJpYCJKHJW/Uf25taUuWQAoZMGUn5Fp3sHPiDPN0TJj5jc2EVH99Zpy5SpbG2cBICIisuc9On7r3M6NzhMLABERkT0txpH329gwVwKkcGiAYPQQtDb1uXg1PvxDu+a+Cb86zdg1BIf7JycLCnstESWI4B1avuN6yV/2eD03ywJA82ZGB1DZ9rNTLv+rlSIqj/44kgxaKaL86+9D8i3IrbsYbntvJNuh+FMNgGDquSixJAJxM7ZTPI0GPqDxmFsjjgc40Rd7NQFgrDx3MgHMRwG8rp4bZQGgedFaGeVHboPWyrajAJi8HLDyyK0onPtaSLbZdhyqI1Mrwh/eCxOT5+JsiePBa++D29RlNUdQHIZ/+ADUTH1Fjw1OrgWZzqWRFCVTK8Mf3gNTK4U+9iz8dnngy6/J9/zOd+q1QR4rpXnx922Nzc7/KPWrqO3j/QEaiWqA2qHdid35A5OnyGrDe2EqE9YymGoRteE9sdv5A4CpjKM2FMGKn6qoDe62vfOfjFIpfrqe22MBoHmx+WI1Ha1wYaBGopXxWO605iIoHba47RFr254JUy2GvuaHqRahwdTzi+rJVCZW+ENf+c16bY8FgOZlpjf1qTcn3247AtWR+unY+QOABvYWtZpuIa+4UBPyzydOxVEVfql+RwFYAGhevN7T6jI5Z1ZE4PVNf/MgIqI4CspjK/0DX31NPbbFSYA0a1oeRzC878ifvfFbhU8VxXu/Cbe9D27HYrgLlsEp8IgAESWAKvxg/HoAkU8GZAGgGTGlMfgHn0AwsAumGO/zhAAAExwrKdh5L5ymDrg9K+H1roZTsLb0NhHRKQXl8VW1wa+8PNP95lui3A4LAE1J/RqCwScnd/zD+wGo7UhzZoojMLsfQG33A3BaFsDrOw1e32qIl7MdjUIgXnpeysS1973EbS2CkxEn3Iw63T1GbJmcC3ADgPVRbiaG3znZZkqjqO15GH7/jnhNkAmJGT+E6vghVHfeB693NTLLzuQpgoSTXAvE8VJxJYBr8bnoFtoQjB+ytv1TcTJNEC/cAuBmm+C7GauTL0/GVMbWVQe/cn62+813RbUNFgA6xowfQm3vFvgHdwCa3Hf7M2YC+Aceg39gO9zORcgs3gC3e5ntVDQHIi4y3Svgj+yBqVVsx5kTcVx4bQvh5FqsZXCyzch0Lo31QkChE0Gme2UcFgJ6OlWYUvGfATwrqk2wABCCkf2o7voVzOiA7SiW6LH5Ak5bD7IrngO3c7HtUDRLTrYJ2d61kzuuuE1MPZUYLQXsNnXCbeqcfEcclzcCjgeJ8GojJ5NHtvf0+C0jLbJWx2/tk5aX9kcxPAtAAzPFEdR2PTCvG/SkjRkdQPmhW+B2LkZ21blwWuwuy0qzN7luvO0UyReXQlJPIi7gubZjHC9nIO8E8FdRDM5fkwak1QlUtt2J0n3f5s5/CsHwPpTu/w4q234Gjelqh0TUCPTPVH8YyY1NeASgkajCP7Ad1R33xG7CSyypwu9/Av7ALmRXPAeZpWcCIrZTEVFj6TIV93cB/FPYA/MIQIMwEyMo/fpmVLb/N3f+s2UCVHfei9L934GJ8QxpIkoplatUN4e+v2YBSDsNUN31K5Tu/68GnuQXDjM+hNIDN6O661eAxmiiEBGl3dqgcuGrwh6UBSDFtDKB0q9/gNqTDyZvVnRcGYPakw+idP/NMKVR22mIqEE46rwr9DHDHpDiITj0JEr3fZvv+iNixgdRvv878Ad22o5CRA1AoS/Ryh2hrgzIApA2alB9/JcoP3o71I/HPa7TSv0aKlt+gurjdwGGpwSIKFJiAvPHYQ7IApAi6ldQfvAW1PZtsR2lodT2bUXpwR9Aa2XbUYgozQS/H+YlgSwAKWFKYyjf/z0Ehw/YjtKQzOgASvd/F6Z02HYUIkqvdlPJvDWswVgAUsCMDqD8wPc4Kc0yLY+zhBFRtIy+M6yhuBBQwgWHdqO85SeAcpZ/HKhfRfnBHyG3/mJ4PStsx0mXoALxJzjfghrds3XwxjdJ9xVfne9ALAAJ5g/sRmUbd/6xowEqW38M6IXwelfbTpN8qpDSAKTGI1xEAKBe818CmHcB4CmAhPIPHdn58/r+eFJFZdvP4ffvsJ0k8aR0kDt/ouOIKW/Q0e8smO84LAAJ5A/sRGXLj7nzjztVVB77GfyDLAFzFpQhtTHbKYjixQQCM/638x2GBSBhguE9qGz9aXzu003TU0Vl288QDD5lO0kiSa1oOwJRLGmt+ub5jsECkCBmfBCVR3/MnX/SqKK85SdclXEu1LedgCiWJCh36Mg3XjyfMVgAEkLL4yg/fCs04AtiIhkf5Udu46Was8aySzQlU/7L+Xw5C0ACqF+Z3PlXS7aj0DxorYzKw7dC/YrtKESUBn7xAlWd836cBSDuVFHZ8jOY4ojtJBQCUxrlaRwiCocJPAx/dc73B2ABiLnaUw8hGN5jOwaFKBjZP3mLZiKi+VL/T+b6pVwIKMaCwwdQ3X2/7RgUgeqTD8Bp64Hbudh2lFTRWg2oTEBN8o6wSDYHyTfZjgEA0EoJWi3HZgqGuA4k3wy4Ee6y/Bq0XITG5fJqASRXgGTz0z5M/dKZql9sFnnbxGw3wQIQU1otobLlJzxUnFaqqGz9KQrP/S1ILh4v+klnRgdhDh1I9O+MNLfC7VsBiK0EiuDgXuhYDE85Og7c3mWQ5tbQh9axEQQD+2K5qqrT3g1nwaIpPy9qxIzk3gPgr2c99nyCUXQqj/2ck/5STmtlVB77OWLzNivB1K8lfucPADoxBjM6aG/746Px3PkDgDEIDu4Jfydtgtju/AHAHB6EFqdfDMsJqr83l7FZAGLI738cwdBe2zGoDoLhffAPPG47RvKVi4nf+R+lJXuLH2l51keR68sE0Gq4V9FouRTbnf9RWj7FcyIon6bD3+yY7bgsADGj1RKqT9xtOwbVUXXHPdBqzF94Yy42523DoPbudpiIn2PYO+uY7/wBAKea06JGjFavnu2wLAAxU3n8LqhftR2D6kj9KiqP/cJ2DCJKMMdUfmfWXxNFEJob/9AuBId2245BFgRDe+AP7LQdg4iSKqiu0MGb22bzJSwAcaEBajvvs52CLKo+cS9guNTznFibNR+FVH0z4UvHVI9ZmsE3rYHAm7hyNqOyAMREbe+jMCXe9rSRaXUCtb2P2o6RSOJlbUcIjWRz9radsbftmQr955OA7xnZmT2/1a+8ZTbDsgDEgNbKqD35kO0YFAO1Jx/i5Z9zIIVmSCEF6yk4DqSty97m2zoB17W2/VOR1o7QFwOSbC6StQVC42XgNM9wgr9fXq9644z/A7kQUAzUdj/AiX8EANCghuruB5Bb80LbURLHXbgSZnhg8lK2JF4SmM3B6eyBZCwezXA9uEtWQ4cHJlcCjAvHgTS1wmnvjmR4t28ZzPAhaGk8Ps8dASRbgNPZM+NSJho4GJG3AvjiTB7PAmCZViZQO/CY7RgUI/6Bx5BddjYk32I7SrI4DpzuPtspEk8yWUjvEtsx6kscOF29AHptJ5k/U/lfmGEB4CkAy2p7HgaScO0t1Y8qak89bDsFESWQ+rXnz/SxLAAWqV+Bf2C77RgUQ7X+7ZwLQESzJlrN6+GvnD+Tx7IAWFTb8wg04GVfdBImQG3vFtspiCiBTIAZ3SKYBcASDWrw9221HYNizN+/lZNDiWjWHFN78YweF3UQOrng4E6+uNO01K/CP7jDdgy7JL6XpBHFVlBZonrzKRc4YAGwhDP/aSYa/k6Bbt52AqLk0UAwNP67p3oYC4AFpjgCM3bIdgxKADN+CGZ8yHYMa9RrBpyM7RhEiaPiv/VUj2EBsIAz/2k2/P4Gfr6IwDQt5KkAolkSU3veqR7DAlBvGsDvf8J2CkoQv39HMu5ZHhU3B9OyDJptYxEgmim/0qYTX1803UO4EmCdBSP90FqMltik2FO/gmBkH9zOpbaj2ON40EIvtIAjS7U2cCEimiF18BwA+6f6PAtAnQWDT9mOQAkUDO5p7AJwPBEAPBJAdCqiuAjAzVN9nqcA6swfYgGg2fMHn0SD3gidiOZIoZdO93kWgDoy40PQ8rjtGJRAWik29NUARDR7AjlX9edT3uuYBaCOePif5sPn84eIZsfzK9UXTfVJFoA6CkamnItBdEpmZJ/tCESUMI6CBcA6YxBw8R+ah2D0UGNfDkhEsybQF071ORaAOjHFYcDwzn80D2pgxgZtpyCiBFHgPNUbT3rZDAtAnQSHD9qOQCkQjPJ5RESz0oZqz4aTfYIFoE4MX7gpBGaMzyMimp3AmJOeBmABqBMzMWw7AqWAGefziIhmkuUdoQAAIABJREFURwAWAKsc/qgpBMLnERHN2rkn+yCXAq4Tr3s5qlzIhebJXbDCdoT4UkUwMQRTLUITuGqi4+XgtnRDHLsvy2oCBOOHYPyK1RzHE3HgFlrh5Nsj20YwMQxTHYdqXJ47Aiebh9e84Mjy1/Nyhup3mkReUzz+gywAdZJZdhaC4f0IRvttR6GEctt7kV12lu0YsVUd2g1THrMdY84MgKA4jGzv6dZKgGqA6sHt0KBmZfvTCYrD8Fp74bX1hT52bfgpBMWR0MedL1MCTPEwsj2r51sCXJSazwbwy+M/yAJQL46H/LNfCf/gEwgO9wN+/H7BKKZcD25HH7ze08N4J5BKplpM9M7/KA1qCMYHI9nJzUQwPhTLnf9R/vgA3JYeSIinVE2tEsud/1GmVkJQPgy30DG/cRx9LlgALBKB13c6vL7TbSchSpU03WLb5qH32P8cVaFBBeIUwhsziPn3DEBrFWC+37LiOSd+iDOKiCj5YnPeNgQWv5dEzJ0I++eTgG85lBVABc898UMsAERERGmnOEv1jqcd9WcBICIiSr8cKrr6+A+wABBR8jkpmhxpcaKnJGGSaehrYTTO9xwYnHn8v1kAiCjxJNNkO0Jo3Ky978WJ+c9RHBeOlwt3zGyIEwoj4oT0nBBhASCilHEyeXgtPbZjzJuTbYLb3G1t+25zF5xss7XtT0sEXvvi0I+QiJuxdtnlTDiFdjj51rCGe1oB4GWARJQKXvtCOIVWmMoEYEKYNV1PInAyeTj5NrtrPYggu2AVTHkUplaOz9UVrgcn1wInk49keK+1F06+BaY8Hp/njgicbFOYO38AygJAROnkZJvj+w42KUQm33UWolt2N46cTFPsT4GEYK3qHZ7IZT7AUwBERESNIouKOXZDERYAIiKiBuFD1xz9O08BhM0E8If2QMtjyVhhipJNAMm3wOtaCli+ixwRxZ8DObYWPV8xQhQM7UVl28/iv542pU41k0du3UVwu5bYjkJEcWb+5wgATwGEJBjZj/Kjt3HnT1ZorYzyI7ciGN5nOwoRxZjI/xwBYAEIgwlQ2XZnfC4focakOnkEireaJqIpKMAjAGGq7X8MWhm3HYMIWi3BP/CY7RhEFF8rVDc7AAtAKPyDT9iOQHQMn49ENI0sii/uA1gA5i+owYwP2k5BdIwZH4b6VdsxiCiuxF8OsADMmymNx2e5TCIAgE5ehkpEdBIBlAUgDBpUbEcgegat8XlJRCcnRwoA1wGYJ+HiKxRHaX1eagAY33YKokRz4JwBsADMm+Tify9pajxOLmU3NQnKcEqHgIDrbBDNl3qFVwA8BTBvkm2GZFkCKD4kk4fk03NHPKlNwBnfy50/UViMaQVYAELhLlhuOwLRMZPPR4v3lA+TGkjpIHhjDaLwiJo8wAIQisyiDYCk5AWXkk1k8vmYElIbmzzvT0QhMhmABSAUTnMHMkvOsB2DCJlF6+G0dNqOEZ6A6xkQhU4D0dF/62YBCEl21bnwFqy0HYMamLdgBbKnPd92jHBxjQ2iaPiFDbwKICwiyJ1xCdz+5fD7t8MURwDDQ5cUMceFU2iHt/B0eH2rkZpz/0QULTFrWABCJfD6ToPXd5rtIERERFNzZAlPARARETWaQHtZAIiIiBqNY3p4CoCI0sGvIjh0AFqeAIKkzb8RSC4Pp6sX0tRqNYmWJ2AG+6GVMqDGapZjXA9OUyucBQsBxw1//MBHcGg/tDQen+eOOJBcAc6ChdGsOBsorwIgohRQRbBvF3RiND4v4LOi0EoJwYHd0ErJXopaBcG+3dByMT47fwAIfJixYQQHngp/bAWC/buh44fj9dxRAy1PINi3C/BrEYyvHSwARJR4WpqA1lKwZoACOjZsb/NjI/Ha8Z9AS+PQkHeGWi1ZLV2nZAKY8dEoRm5jASCixNMggndIltgsMmHvXCPhh/zz8RNwd8ko/l8kaGIBIKLk43pBNGcN+uRRybIAEBERNRo1LABERESNRtVkWACIKPEkikvDbHHtXZ0tTgKuDA/7/9pNwHPHiWBXrfBYAIgo8aTQFM2LpAWOxXUApKnF2rZnQjJZSCYf7pjZgtXSNRPSHP5zQkTddPzGEFFjcz24fcuiWSSmjpyOBZCWdmvbl6YWOF19gMTvplKSycLpWxb+/a4cB+7CZYCXCXngEIgDp2dxNAsBQZNwvIeI6NSkqRXeyvXQajl5d+IUgWTzsSgwTmcPnPauyZUA4zJD3vUm3/lH1Esk3wxv+VporRyfxYDEOfKciOp9ugoLABGlh0hE75YajONCCs22U9SXyOTpgEahEJ4CICIiajgCFgAiIqIGo2p4BICIiKjRiCBlRwDiN3GVqIFE8HLC32miaKimqwCoE8PLOIgaRRS/f/ydJopMqgoAMvYW0CBqdJoJfxGZyTF5GIAoCqkqAJptBdxwV4kiohlw89BsBAvYOBloriP8cYkaXuquAhCY5sWRvBMhopPTTAtM8+LI3qhrvhua747l6nREiSWK9C0EJA60aSHU1CB+CdCYrOpElDbiQr1CXc7Ta64Tmm078jvtAxqTFeqIkquUvgJwlJOBZjmBiCg1xOXRPaLwjKfsFAARERGdmvosAERERA3HYQEgIiJqPFplASAiImo0yjkAREREDUeFBYCIiKjhOFAWACIioobDIwBERESNR9VhASAiImo4aiZYAIiIiBqNwyMAREREjUfNYRYAIiKiRiPOIRYAIiKiBqMGh9J7N0AA6lehqbodsEDcDMRx67dJVRi/CsDUb5uRc+B42breX15NAA1qANJzG1sRF+Jl7Ww8AOALoPX7PyRKE9egmMoCEEwMwR87eOQFN2VE4OTakOlYCHEjfPFVhT96AEFxCGrStPOfJI4Lp6kTmdY+wInuQJgGNdRG9sNURlN5D3txM/Bae+A2d9dngyUH6M8AxTqWYKI06q42pa4A1A7vQzA+aDtGdFRhyodRPTiBbM9pEC8XwTYMqod2wlSL4Y8dE2oCBOOHoJUisj2nRXI0QP0KqgM7oMYPfey4mCw4+2D8CjLti6Pd2LgDPJVP00EUInt881iq5gCY8li6d/7HUeOjNrwnkrH9sYOp3vkfz9SK8Ef7Ixm7Nrw31Tv/4wXjgzDlsQg3AGAvd/5EoRAAq5duT1UB8CeGbEeoK1MtwtRKoY8bTAyHPmacBRNDoR+eN7UyTHUi1DHjzp+IsHyPeZMlgIjmz4MRWVNJVQFQv2w7Qt1pLdzvWQO/Yd61HqUaQIOQv2c+F8NViWCyn1Gg5j/9TwrnaRCdSB1TBYB0zQEwDfjLG/YEPU3fhL+ZUA0gyIQ3XgonTp5SlN9zmLP9KxXgsUeB4cFn7vAdB+hdCJy+HnA50ZDSyXF1DEhbASAiOpUtDwGHpzjNZQxwYN9kEVizob65psoTRFwmXSfSK2EoftTRIYAFgIgaSaUy9c7/eAf77RaAUgnYvmUya9RHk0SAjs7J77fQFO22KBbUkX4AYO0josZRq8zscX7N3ilFY4BHHpg8RVGPU0mqwPAQ8ND99dkeWSeueQpgASAiipeJMWBivP7bLRWBscP13y7VnYG7E2ABICKKl8oMj1KkbdtUN56rDwEsAERERI1Fg3sAFgAiIqLG4arKykt4CoCIiKiRqIdj67yzABARxUnG0i2WbW+b6kI8c+jo37kOABGlQ60G7HwcGB2ZevEcncUNBe69c+oVCD0X6F4ALD8t/EV0WtuAXB6o1Hk56VwOaGuv7zap7tTDk0f/zgJARMlnDPDgfcB4iHckLJ3iRlvjY0CxCJzxrPC2CUwWirOeDWx5GCjW6YZShSZgw9lc/rgROLr16F9ZAIgo+Q4Ph7vzn6mB/slL53K5cMdtaQOe/6LJowDVarhjnyiTBfL5aLdBseF6ev/Rv7MAEFHynerdepTKpfALwFG5/OQforBI9c6jf+UkQCJKAYt3AuUthCkpXCiWvuSho/9kASAiImoEGTMuIscaKwsAERFRAxAPe4//NwsAESWfa3E6k8epVJQQnj76tH/aykFEFJr2jsnL5+p9O9tsDmhqjmbsA3uBkRHAzGLtAkoPEaClBViyHHDCuTxTM3rn8f9mASCi5MsXgNPXA49vrV8JyGSBDWeFvxAQAGx7dLIAUGM7COBgP/CcF4TyPHOM9/3j/52uAjDFol2pJiF/02GPlxDCn+P82f6eFy2ZXJ1vbGzqd83lErBj+8zG23D21N+T5wGt7dEc/i+VuPOn/zE+BhzqB3oXzW+cjBpZ+aItx38oVQVAvCw0qNmOUV9euNcfi+MB4gBa50OpNolA3Ey4Q4b8/5IE4sVgHflsDuie5mc/PjrzsRb0AY6FUlMcr/82Kd4mQnhOZMzIiR9K1SRAt9BhO0JdiZuBm20KeVCBW2gLd8yYc/Jtk6UnzDEzBYgbgx1iHTXa719kuK4AnSiEp4R6+viJH0tXAWjqhJONaEJODGU6lkRy2NVrWzh5JKABiOMh0z7PQ2snHViQ6Vgc/rgx5WSb4DZ32Y5BRFNxcM8zP5QmIsh0r0j9OxFxM8h2r4STb41u/J7VcDIhH12IGSfThEzPaaEf/j82fr4V2e6VkY0fF06hHZnuVfbnABDRlFxXv3/ix1L3Nk8cF5muZfD8PphqEWrSMydAIBAvByfXEvmLrXhZZHtXw9SK0GoZOpvbqMaciAvJ5OGEffrkJJx8K3J962AqE1C/DLW5ZG3IxPHgZJvjce4/TaK4qoCSbb6nKF0oDm255cQPp64AHCVeFi5fmObNyTQBKT8SEDkROPkWAC22k1AStLROFnzOBaCj2trn9/UZMyLnvOMZ74ZZNYmocczmnZStMxrZHLBqDU+p0KSevsnLW+dBs7r1ZB9P7REAIqJnKDQBrgsEpzil1dpmdwe8bAXQ0QkMDwGNdmkzTXLcyedh1/x2/gAgnv70ZB9nASCixuE4kysGbntk6se4LrB6Xf0yTaW1bfIP0Tw52fJXT/ZxFgAiaiwLF0+eZx88BBj/6Z/LZCYXAMoX7GQjCltGfVnysvtP9ikWACJqPC2tk3+IUk6yZs9Un+MkQCIiopRST++e6nMsAERERCnluPjWlJ+rZxAiIiKqEwcK+N+c+tNERESUOpIPDsmqy8pTfZ6TAImo8RgzeWvgSuXpHy8UgBZeekfpYLJ673SfZwEgosYyNgo88mugMsUbo5ZW4KxzgFy+vrmIQuZ6+uXpPs8CQESNZcuDU+/8AWB8DHh8K3DmOfXLdDLGABPjgO+f+rHz4XlAcwtvQpQ2riqWN510AaCjWACIqHGUSpN/TmVoaPJmPLaWAx4ZAh59CKhV67O9TAbYcDbQ2V2f7VHkJK97Rc6ddh3pVBcA9aupuo0tIBA3A3Hc+m1SFcavACm6jS0gcLxcXV/c1QTQoIY0/RxF3OTdCnim6+qbYPK/ysb+PwiARx8EanW8B0CtNlk4zrtw8ogAJZ5m9Senekwq/6eDiUH4YwNHXnDTxym0IdO2KNoXX2NQG+1HUBqaPBSZNo4Dt6kLmda+SA99ql9D7fA+mMpYKm/vKk4GXmsP3Ba+cwyLjo9C6rnzP8qvAWOHeRQgJRwn+P9P9ZjUFYDa4X0Ixgdtx4iUKY2iWplApmf15DvZsKmiOrgTploMf+y4MAbB+CFopYjsglWRlAD1K6gO7ICeuN58iqg5UnD8MjIdS2zHSQUrO/+jbG6bwuOpLysvuf1UD0vVrA9THkv9zv8oNQH84SmXeJ4Xf7Q/3Tv/45haEf5YfyRj14b3pHrnf7xgYgimNGo7BhEBkJw+MZPHpaoA+BNDtiPUlakWYWrTzGaeo6A4HPqYcRZMDId+eN7Uyg1Too7yG+x5QxRXQcafcvnf46WqAKgf/s4w7jTkAqBBrWHetR6lGkCDcL/nxnwuzmB2PZ2arSsPKB0E8Fy5fiYPTdccAJO+SVanZEK+yiGFE9VmQjWAIBPegGmcOHkqcfmeTQAEUzyP/Vn8vvhVQKa44sZ1ops8motgXs9M5Qv2tk2hkEIwICsv3j+Tx6arABBR4xobBR7bMrnEbxh+8dOpPycCdHQB684If8XAljagtX1yRn49tbQBrVwGOelM1tw208eyABBR8tV84OEHgGrl1I8NgyowPDi5pPBzzwt//LPOAXZsB0YGwz/KdyLHBdo7gdVrefohBdxmZ0aH/wEWACJKg8ND9dv5H29sFChOAE3N4Y6bzQLrzwx3TEq/nBZl4YV3zfThqZoESEQNysbO/9i267RcL9EpSM5Me/e/E7EAEBERpYB45h9n83gWACIioqTz1MfKi6a9+9+JWACIiIgSTvPmARGZ1XXcLABElHwZi3clzCbsjoiUSm5eb5jt1/AqACJKvs6uyRJQq/OEvJZWoNAU/ri+D+x8fPJSQ5+TDMPnAK2twMrT07H2QRY1LL/wP2b7ZSwARJR8XgY469nA1keAUp3uwdDeDqw7K/xr51WBh+8HDo+EOy493dAgMDICnHt+NCWujjQf3Csis16KkwWAiNKhrQN4wQWTlwROtXjOxMTkgkEz8fwXAc4UO3cvM/knChPj3PnXiwmAA3uBVWtsJ5kXNxfMePGf47EAEFG6ZKdZS9+fxU2f8k1TF4AoVRrvRlJWlRP+886ZCpZdfONcvpSTAImI4qRBb8hFc6MF/elsZ/8fxQJARESUUG4m+Lu5fi0LABERUQJp3ozK8kumuW3l9FgAiIjixOPUrLpyE/zzzprvzufLWQCIiOKkpS26KwzomTq7bCeYG1G4nv+++QzBAkBEjWOm7/YcB7BwAQCAySMAG84CMgl+Z5oUS5YDPX22U8yJNOkuWXXZrvmMwWcYETWOfAHI5U99qV1HZ/gL/MxG1wLgvIuA0VHAr9nLkVYikysA5vK2k8yZNuHT8x0jXQXA4u+rNWG/SNl80bNI+HOcvyi/57CGFgE2nA08+mugOsUSu03NwJr1IW1wHlwvuYenKVpZrTnL9s5p8Z/jpaoAiJeFBo3VlsWbZtGTuYzneJMvko10LbIIxA33nKt4jXeDmEi/Z2/Wq5xOrf3IioGjh5+5MFAmO7mioI0FgIhmSAvBrSJXTLHc5cylqgC4hQ6YyoTtGHUjbgZONuQ1rEXgFtoRFBtnKVIn3wZIuNNhnGzzZCFtoBu5uE0d0Q3eHgADAMLqAa4HdHaHNBhRHYnCzZlNYQyVqkmAblMnnFyz7Rh1k+lYGslhV69t4eSRgAYgjodM+6JIxs50LGmYUwFOthluU4SHqz0Fehrr6B7RyUiT7pFllzwUxlipKgAQQbZrJdymTttJIiVuBtnulXDyLdGN33Na+EcXYsbJNiHbc1roh/+PjZ9rQbZrRWTjx4Vb6ECme0X0Zae7BiysAm4DnZ4iOkGQ8/8hrLHS9zbPcZDpXAqvrRemUoSa9LxrEDiQTA5OtjnyF1vxcsj2rIaplaDVElTnfbopNkRcSDYPJxN9wXHyrcj1rYOpTkBrFWhox7DtEydz5FRHHQtOlw+0+0DRBarpev9CdEqKQ97Siz8a1nDpKwBHiJuF29R4E7HC5mQKQKZgO0ayicDJtQC5aI7YNBwXQGsAID2llGhGFB8UkdCe+KzQRERE8TfmFMwXwhyQBYCIiCjuVL8g8rLDYQ7JAkBERBRv6jjOZ8MelAWAiIgoxkTxXcm/eFvY47IAEBERxVggMu9lf0+GBYCIiCi+Hvbyl90excAsAERERDGlwHUiEsnqV6ldB4CIiCjZ5Ck33/aVqEa3dgTAaGOskU5ERDQnoteJnBvZcrbWCsBwket5ExERTWHQyfmhLvxzImsFoH/c1paJiIhi75Mir4j0/vbWCsCuIWBwgnMQiYiITjDmVLKhL/xzImt7YFXgnp2urc0TERHFk+Cz0nHRcNSbsfoW/Nu/zqLiczIgERHREeNOLfPxemzIagEYLjr45v28ZS8REdEkuUFaLx6ox5asn4T/9gNZ3LWDyxEQEVHDG3Wq1bq8+wdiUAAUwKfvKOAHD2dsRyEiIrJIPiXtrxyq19asFwAACAzwr7/I42O3FLB3JBaRiIiI6kYNRp2yfLKe24zVsfd7d3v41ZMezlgc4NzlNSzvMmgvKDxeLEBERCk2UnS+fMaqS0bquc1YFQAAMAo8vNfFw3u51yciooZwsFKqbqz3Rnm8nYiIyCIB3v9fmy4cq/d2WQCIiIjs2XpwaCLSNf+nwgJARERkjb7nx5sv821smQWAiIjIjp/cdOV537O1cRYAIiKi+lMj+h6bAVgAiIiI6kyAL3/9z8+712YGFgAiIqL6KjtB8H7bIVgAiIiI6kgVH/3Ku1+4y3YOFgAiIqL6eapQzX3EdgiABYCIiKh+VN/1paufPWE7BsACQEREVB+KH930rvO+aTvGUSwARERE0atC5c9thzgeCwAREVHERPDxm/7i+dts5zgeCwAREVG09qjT/Pe2Q5zIEUsbVkvbJSIiqi95901/eua47RQncjzHsbIv9o2xsVkiIqI6km/ddOXzv2Y7xck4eVfKNjZc9FkAiIgo1Q7Dr/2Z7RBTcQqet9/Ghou+D195IoCIiNJJVd9z01Uv2ms7x1ScQsb5sY0NGwUGSzUbmyYiIora7V+78gWftx1iOk4+kL+3NRNwX9HK2QciIqIoFR04fwSRWB/mdh7+u5c8sSCf225j43snKqgEnAtAREQpovqBr1557hO2Y5yKAwBdrvcWV+p/GMA3BttGYrEkMhERURjuxqLd19sOMRMOADz0ty++r6+QvctGgF1jRYzXfBubJiIiClMJMG+/6YorAttBZuLYSoALMl0v6chmR+odwCjwy/7DqJlYnyohIiKalqpuuunK8x+1nWOmjhWA+zafW1yQkRcUPLfuU/PHaj7uGxiFcn1AIiJKIsWPvnblCz5jO8ZsPO1eAFv+7uXbV+TzL2vJeHWfnn+gWMa9B0cR8EgAERElicgwAv/tcZ/1f6KTzvzb8MEfLBoal/uHytW+egfqyHo4v68TeY/3KSIiovgTxZtufNcLbrSdY7amnfq/bvPtGw8WK389XvPz9QoEAJ4ITmsrYE1HCzLWbldEREQ0veYO77//9W3PvcB2jrk45d71eZvvbTocjFx/uFZ7w+GK31nP4xt518HKtgKWNRfQnHHruGUiIqLpZQtSa+3OLv3c65990HaWuZjV2+sNH/zBIr+WeatvzLkmQC+ghaiCnSifcUe7stn+9pw3Usg4ZRfOrFYQcjLI9qzM/r7joTOqjFQ/h0cq+PUD/bZjEM3KypUdWL6yzXYMCoEqFHDe+ZmXn/0521nmqqGOr39oYMvzHOP8N4Cs7Sw0Pzt3jODz//SA7RhEs/KSl6/CZS9ZYTsGhUBUPrBx4dq/s51jPhpqpt21PRvuU+gHbOcgIqIEE9yxsm/Nh2zHmK+GKgAAsKl33Ueh+J7tHERElEj9vgRvvUIkEav9TafhCoCIqAP3DwAcsJ2FiIgSxTiQ331fzxn7bQcJQ8MVAAC4euHpBx3I7wFIfIMjIqJ60c1X96291XaKsDRkAQCAq/vW3qqQa2znICKiRPh+qXfdB22HCFPDFgAAuKZv7ccA/JvtHEREFGu7gpr5vc0is7r8PO4augAAQKba9CcCuc92DiIiiqWSEef17126YdB2kLA1fAG4atmykhP4bwAwYDsLERHFiyjefm3vmvtt54hCwxcAAHjP4jN2G9U3A/BtZ6GZaagVrCg9knWzuIYn0I9tXLjuq7ZzRIUF4IhrF66/XYFNtnPQzBSaM7YjEM1acxOftwlyW7F3/7W2Q0SJBeA41/St+wRUv2A7B51aa1vOdgSiWWtrq+uNVWnudrgB3rxZLkv1UWEWgBOUSrl3QnGv7Rw0vaaCh96+ZtsxiGbMcQTLeCOgBJBhOPqq9yxed8h2kqixAJxg86pVZdcEbwTAW83F3JlnLbAdgWjGVq5q5ymA+KsZNW/c1LN+m+0g9cACcBLvWXzGbuOYVwMYt52Fpnb+hUuRz3u2YxDNyMUv5l0A40+vvHbh+tttp6gXFoApXNuz4T4VXAFeGRBbzU0ZXMpbq1ICnHHWApx+eqftGDS9j2/qW/852yHqiQVgGtf0rvu+KP7Edg6a2gUXLcOzzumzHYNoSgt6m/D6y9fbjkHTEODbq3rXNtxVYCwAp7Bx4bp/UeBvbOegkxMB3vim9TjvRUtsRyF6huUr2vGHf3QOT1XF292i5VTc3ne2uJ7KDKiqXNe/7fMQebvtLDS1Bx/oxy3f34GRkYrtKNTgcjkXF16yHBddugyey/dZMfZ4YJwXvXfRmoZcCZYFYIb+Se/NjBxs+w6gr7CdhabmBwbbHh3Eo48MYP++CYyNVVAqchoHRSuTcdHWkcWCBU1Yv6EbZ5zdwxn/8bffGPOiaxdt2GU7iC0sALPwkYGtrTDyEwDPsZ2F7PnOLQfxy1+N2I5Bc9S3IIs//18rbccgu8aMOJekdY3/meKxqVnY1LN+zHeCVwPYbTsLERHNSdWBvL7Rd/4AC8Csva/njP0I5DfAuwcSESWNL5Dfubpv7a22g8QBC8AcbFq8dosDfSmA1N0fmogopRSqf7yxb+3XbQeJCxaAObq6b/2DIvJSQIZtZyEioumJ4v9sWrj+87ZzxAkLwDxs7F37AFReBWDMdhYiIjo5FVy7ceG6T9rOETcsAPO0aeGauwT6G+B9A4iI4kf0g9f0rvuw7RhxxAIQgo196+90IK8DULadhYiIjvnEpt7177cdIq5YAEJydd/aWwXOawFwGToiIvs+salv3f+xHSLOWABCtLFvzS0A3gygZjsLEVED485/BlgAQrapb923VPR3ATTcjSWIiGwT6Me4858ZFoAIXNO7/kaovh6cE0BEVE+f2Ni3/mrbIZKCBSAimxau/68jcwImbGchIko90Q/ynf/ssABEaGPfmluMwWXgioFERFFRhW7ibP8595zZAAAObUlEQVTZYwGI2LWL1t2jxrkEwD7bWYiIUkYh8hfX9K2/znaQJGIBqINrFq15xEAuArDDdhYiopQIIHj7pt61N9gOklQsAHVybd/aHRp4lwHYZjsLEVHCVQC5YlPvun+zHSTJWADq6JrFq5901L0YwAO2sxARJdSIMeaVm/rWfsN2kKRjAaizqxeefjCbzV4G4E7bWYiIEma/iFx27aINP7YdJA1YACx4d+eqkVLQ+nIAbLBERDPziOe7523sXcsjqCHxbAdoVJsXLy6q6huvO/jYXwH4K9t5qPEIBAXPQWvWRbPnwXMEnuPAE8BXIDAGgQITNR/jNR8TNQMDtR2bGpL+IqjpazYtXcdLqkPEAmCRiCiAzdcd2LZHBZ8FkLGdidKtI+uht5DFgkIOXfkMPJEZf60CGKnUMFCu4lCpioFSlXWA6kBuKhWzb9u8ahVXVg0ZC0AMbFy47l8+cmDbTgi+BqDDdh5Kl7zrYEVrActa8mjJzP1XXgB05jLozGWwtr0Z5cBg70QZT46VcLjqhxeY6CjVG0p9a9+9WcTYjpJGLAAxsWnhutuuO/joC1Td7wJYazsPJV+T52J1exNWtjbBnfkb/RnLuw5WtzVhdVsTBstVbD9cxIEi74ZNoaiIyB9v7Fv3r7aDpBknAcbIxt4ztgc18yIAP7WdhZIr4zh4dncrXrZ0AVa3RbPzP1F3Povz+zrwwr5ONGfc6DdIaTYojvOKjb1r/9V2kLRjAYiZ9y7dMFgYdV4uwL/bzkLJs7Qlj5cs7caqtibM4vR+aPqasnjJkm6s72yGY2H7lHTysKP6/I09a35iO0kjYAGIoSvXrKlc3bv2bQr8DcB5VnRqrgjO7m7FuT3tyLt2f60dEazvaMFFi7rQ5PFoAM2Q4LsFTy64euH6nbajNAoWgJgSEb2mb91ficpvATJsOw/FV5Pn4tIlXVjd1mQ7ytN05jK4dEk3evJZ21Eo3hSQj5R61r72yu41o7bDNBIWgJjbuHDtd404LwDwoO0sFD+tWQ8XL+pC6zxm90cp6wheuKgDS5rztqNQDCkw6gBv2NS39hrO9K8/FoAEuLb39MdLxex5EPyL7SwUH525DC5e1Im8F+9fYweCc3vbsKK1YDsKxYgotkog51/dt+6btrM0qni/ctAxm1etKm/qXfe/Ffj/AJRs5yG7mjMezuvrQMZJxq+wQHBOdxsW80gAARDg2/mMc96mxWu32M7SyJLx6kHHXNO37otw9GIAu21nITvyroMLF3ZYn+w3WyLA83ra0c05AY2sCpF3/b/27jU4yuqMA/j/OXvJ5kYCYXcTxAuXvUAQvMCoWCoqVarI1Ha0+EHG0c6kV0ut2U2knUZnWkTbzkg/dEw7OhV1rNDqTEBLRRlExFZp1TYVRbloiwSQSwLJJtn3ffrBFS8IBnI52X3/v5l8y4f/fjj7Pnve5zynPhK/lu/77cuvbxACAKTDyVecXvd8AH+xnYWGlkBwXrgCxXnaXe8TYEa4AkV5snNBA2on1FySjsSX5cagk2VchXnqjrGTPkhF4ldBtAEAm2c8Il5Zgkhxfv+CDvkNzguP+HC2MHmCAk+4Rd3npqtjL9nOQh8bnq3D1Ce5Knrpkt1bXjYifwAw1nYmGjzlQT8SlWW2YwyIaEkRziwrxs4OtrMUuIxCb2uIJn9rOwgdizsABaCxOvmcW9Q9FYLHbGehQSLAtFHlBTVdr3ZkGV8FFDLBGyJyER/+wxdXX4ForJx6IB1J3CCi1wPYbzsPDayxpSGMzvOt/88K+gwSI0ttx6CBpwCajZuZkYrEX7Udho6PBUCBSUWSK9TxnwvBOttZaGAIBImKwnxQnlVenHenGeiE9ojK/HQ0UVdfPe2I7TB0Ylx5BahhzIR3U+H45aK6CADvZ81zNaVFKA8WZruOEcHEysIsbrxGgSd8DmpT1fFVtrNQ3xTmtwp91CB43z173lqvqg8DqLWdiU7NhIrCnqB3VlkIW/YfRlZ5MiwfKdBuRH+UjiQfsJ2FTg53AApcKhJ/taszOF1F7gNvFsw7JX4fqoKF9e7/s/zGoKa0yHYMOhWKpwJZ35QUH/55iQWABzSNG5dpiMQXCXQWgFbbeajvzigLeeK8/OllHBGcZw4KpC5dnbj6x6dNfM92GDo1LAA8JBVNbqyMdJybGx6UsZ2HvliNR2bnh4uLECikM46FTLE64MOUVDTebDsK9Q8LAI+pk+m96UhyKYyeA9X1tvPQ8QWNYEQwP0f+niwBUBUK2I5BJ9amihvS1Yl5t41O/M92GOo/FgAelQ4n30xFE5fmbhfcZzsPHauqOAjxwv5/zuhi9gEMUwpgudPr1jZUJzhsrIDwFICH5U4KPPTztm1r/Oi9F8CNtjPRxyqLvPWLuDLAr6Nh6HUD8+36aGyT7SA08LgDQFgcHd+WjiYWquAqADts56EPlefpjX+nqqxAZx3kJ+0EcGfXvuwMPvwLFwsAOqohknjaaGYKFEvAJkHryjz2izjkM2wEHBZkpT/rT6ajiaam2toe22lo8LAAoE+pr552JF2duAN+EwOwHJwdYE2RB0fkBj34mYcNwRsKd246Gr+OR/u8gauNPle6KvbfdDSx0HVxAYCNtvN4kd+Dv4YDvB3Qhv2iumhcOH52Q3TSGtthaOhwtdEJNdYkXk5F4rNytwzusJ3HK0QAn3ivAPB78DNblAXQ7HOQSFUn77texLEdiIaWt14y0inJnRZY0bRr1+oSX8ftCqQA8AaXQWQ8+iD0efNjDzVV6J/FYHE6nHzTdhiyhwUA9VnTmDGdAO5aunfL7+HKzwDcAsBbrepE+e0lEaTSkeQG20HIPr4CoJOWDid3paOJOlfMDBFtARsFiYa7VlUzPx1NXJSKJPjwJwAsAKgfGiOxf6YiyfmuiwugeMp2HiI6xg6I3DwuEp/WUB1rsR2GhhcWANRvjTWJl9PViasVOAeQFbbzEJG+K6qLittNMh2JP8gGP/o87AGgAdMQTbwG4Pqlu7deCOMuhmKe7UxE3qLviuLXnV1F9zeNG8dhXnRCLABowKWrYy8BuObuPW9+ySjuVOAy25mICtxOhSzJ7Ms+yOl91FcsAGjQNEQSLwC4/J69Wy9xXfcnAsyxnYmosMi/Ab2nMtLxWJ1M77WdhvILCwAadKlwbD2A9fe2bZnqQr4HYCGAkOVYRHlLIJsh7tL6cHxlbk4H0UljEyANmfpo8vV0NFGXNc54FfwCwAe2MxHlEYVglQpmpaLx6alIcgUf/tQf3AGgIbc4PPl9AIuXbd16V+cI95siaIBiku1cRMPUYQCPqmuWNdTEWm2HocLBAoCsuTUW6wbwUJPqw6V7tl7miv6QJweIjtoG0eZAt/O7206v3W87DBUeFgBkXZOIC2AtgLVL9r5xvnHNDwC9DpAS29mIhpgCWKtqfpOJTlydWxtEg4IFAA0rjeFJmwHctOyDrbdmsrpAoQsBXGw7F9Ega4PqH1V9zdzmp6HCAoCGpVurYu0AmgE0//L9rZMdowsBvQXAaMvRiAaKq8BzRrS5Inz4SR7jo6HGAoCGvdtrYv8B0NC0fXtTcUn3NyByCxSzAfDyWMpHO1V0uc/FA/XVye22w5B3sQCgvJEbbfoIgEfuads6wRX3ZlHcBGCM3WREX+ggBCsVsjwdjm3g8T0aDlgAUF5KRWPvAFjcpPrT0N63Zoqr10FkAYCI7WxEOY4C6wAszzjlK5vGjOkEgAbLoYg+wgKA8lquS/oFAC80tbbWh6qCVxpxFihkPoAyy/HIe3oAPCuiK/3dzpM8vkfDGQsAKhi5S1BaALQ0bd8eChVnvyLizgPwNXBngAZPtwIbjOqqrPoevaMmttd2IKK+YAFABSnXL9ACoOV+feX7B/eMmA24XwdkHoCxdtNRATgIwRqotmggsKph1IRDtgMRnSwWAFTwcsernsn9fWdJ21vjfcAcFb0GijngxUTUN9ugusqIaTmyr/d5XrtL+Y4FAHlOYzS+DbkZA/fufq3U8RXPFkfnQuRKQGO289GwcRiK9QJ9xjH+1Y2RiW/bDkQ0kFgAkKfVV087AmB17g9HdweAOYBeAaDCakAaSo5AXlVgrQHWFrXLhtx9FUQFiQUA0Sd8cnegqbU1GBptpkPMl8XFLAguBguCQtINYDOgG0XN8+pz16fCiQ7boYiGCgsAouPIveN9Mfd39+Oqvnf2vj21rNRXN/6Mkrn7DvSc1t6R5RrKE6UlPnf0qODecFVwkwp+lTkSfCXXLErkSRylStQPlz/+/ORMNxZ0djmzDx7KTt63r2dUpsft97ryGcE1Z3rv5OKm3QfQ1tX/3rpAwOjokcH2igr/2+WlgRfLyuXJNdfOXMcJfEQfYwFANMDm/mnjjO4endvV7VzU3uHU7j/QW7P/YG9Ate/PHhYAfRcqMm7liEB7xQj/tpJS/9+LQljV2V7y1811vFyH6ERYABANgdmPr6vOdvu/mnV0ZleXM+VIl3NW+2Gnqr29J+A4x/4/C4BPEwHKywPZynL/odJi33uhkK/V78ff1Pif3nTjTHbnE50CFgBEFl3x0GulPaH2WT1d7oU9Wa3t6dYJnRm3JtPpVF5QXhEy4p0l6kLRevhwtjeoB0uKfbuDAewIFJlWv+hmpyf47KZvzeRYXaIB5J1vF6I8NOfBF8/2q1yqrjsdDsapY05DViuMq6UC8Rs1JiCQgDG2ox6Xo4oeQB3XVRVk1WjG9eGAMboHfrPN8eFfAbibnr754udsZyXyEhYARAXgu+tay957/8A52u2b1KtmAhzndDgYBchIV7VcFEF1USKqRarwGzUBVf1w/YsaUTluBaECB4qjDQxipFehWTXIwGgGKt3iQzvE7fCJ75D63F3GL++IX1qzXfqPNfzlTkRERERERERERERERERERERERERENHD+D8ma6aCoLQqmAAAAAElFTkSuQmCC", on = (e, t) => {
  const n = e.__vccOpts || e;
  for (const [a, r] of t)
    n[a] = r;
  return n;
}, TG = {
  name: "NavbarAppBar",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = kc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n,
      posLogo: vD
    };
  },
  props: {
    posProfile: {
      type: Object,
      default: () => ({})
    },
    pendingInvoices: {
      type: Number,
      deflt: 0
    },
    isDark: Boolean,
    loadingProgress: {
      type: Number,
      default: 0
    },
    loadingActive: {
      type: Boolean,
      default: !1
    },
    loadingMessage: {
      type: String,
      default: "Loading app data..."
    },
    company: {
      type: String,
      default: "POS System"
    }
  },
  computed: {
    appBarColor() {
      return this.isDark ? this.$vuetify.theme.themes.dark.colors.surface : "white";
    },
    displayName() {
      return this.posProfile && this.posProfile.name ? this.posProfile.name : frappe.session && frappe.session.user_fullname ? frappe.session.user_fullname : frappe.session && frappe.session.user ? frappe.session.user : "User";
    }
  },
  emits: ["nav-click", "go-desk", "show-offline-invoices"]
}, IG = {
  key: 0,
  class: "loading-container"
}, EG = { class: "glass-card" }, PG = { class: "loading-message" }, OG = { class: "progress-badge" };
function DG(e, t, n, a, r, i) {
  const o = J("v-app-bar-nav-icon"), l = J("v-img"), s = J("v-toolbar-title"), d = J("v-spacer"), u = J("v-icon"), f = J("v-chip"), h = J("v-badge"), y = J("v-tooltip"), p = J("v-btn"), w = J("v-progress-linear"), b = J("v-app-bar");
  return te(), Le(b, {
    app: "",
    flat: "",
    height: "56",
    color: i.appBarColor,
    theme: n.isDark ? "dark" : "light",
    class: Ae(["navbar-enhanced elevation-2 px-2 pb-1", a.rtlClasses, a.isRtl ? "rtl-app-bar" : "ltr-app-bar"]),
    style: Je([a.rtlStyles, { flexDirection: a.isRtl ? "row-reverse" : "row" }])
  }, {
    default: E(() => [
      T("div", {
        class: Ae(["navbar-brand-section", a.isRtl ? "rtl-brand-section" : "ltr-brand-section"])
      }, [
        _(o, {
          ref: "navIcon",
          onClick: t[0] || (t[0] = (v) => e.$emit("nav-click")),
          class: Ae(["text-secondary nav-icon", a.isRtl ? "rtl-nav-icon" : "ltr-nav-icon"])
        }, null, 8, ["class"]),
        _(l, {
          src: a.posLogo,
          alt: "POS Awesome",
          "max-width": "32",
          class: Ae(["navbar-logo", a.isRtl ? "rtl-logo" : "ltr-logo"])
        }, null, 8, ["src", "class"]),
        _(s, {
          onClick: t[1] || (t[1] = (v) => e.$emit("go-desk")),
          class: Ae(["text-h6 font-weight-bold text-primary navbar-title", a.isRtl ? "rtl-title" : "ltr-title"]),
          style: { cursor: "pointer", "text-decoration": "none" }
        }, {
          default: E(() => [
            ae(j(n.company), 1)
          ]),
          _: 1
        }, 8, ["class"])
      ], 2),
      _(d),
      T("div", {
        class: Ae(["navbar-actions-section", a.isRtl ? "rtl-actions-section" : "ltr-actions-section"])
      }, [
        bt(e.$slots, "status-indicator", {}, void 0, !0),
        bt(e.$slots, "cache-usage-meter", {}, void 0, !0),
        bt(e.$slots, "db-usage-gadget", {}, void 0, !0),
        bt(e.$slots, "cpu-gadget", {}, void 0, !0),
        T("div", {
          class: Ae(["profile-section", a.isRtl ? "rtl-profile-section" : "ltr-profile-section"])
        }, [
          _(f, {
            color: "primary",
            variant: "outlined",
            class: Ae(["profile-chip", a.isRtl ? "rtl-profile-chip" : "ltr-profile-chip"])
          }, {
            default: E(() => [
              _(u, {
                start: !a.isRtl,
                end: a.isRtl,
                class: Ae(a.isRtl ? "rtl-profile-icon" : "ltr-profile-icon")
              }, {
                default: E(() => t[3] || (t[3] = [
                  ae(" mdi-account-circle ", -1)
                ])),
                _: 1,
                __: [3]
              }, 8, ["start", "end", "class"]),
              T("span", {
                class: Ae(a.isRtl ? "rtl-profile-text" : "ltr-profile-text")
              }, j(i.displayName), 3)
            ]),
            _: 1
          }, 8, ["class"])
        ], 2),
        _(p, {
          icon: "",
          color: "primary",
          class: Ae(["offline-invoices-btn", a.isRtl ? "rtl-offline-btn" : "ltr-offline-btn", { "has-pending": n.pendingInvoices > 0 }]),
          onClick: t[2] || (t[2] = (v) => e.$emit("show-offline-invoices"))
        }, {
          default: E(() => [
            n.pendingInvoices > 0 ? (te(), Le(h, {
              key: 0,
              content: n.pendingInvoices,
              color: "error",
              overlap: ""
            }, {
              default: E(() => [
                _(u, null, {
                  default: E(() => t[4] || (t[4] = [
                    ae("mdi-file-document-multiple-outline", -1)
                  ])),
                  _: 1,
                  __: [4]
                })
              ]),
              _: 1
            }, 8, ["content"])) : (te(), Le(u, { key: 1 }, {
              default: E(() => t[5] || (t[5] = [
                ae("mdi-file-document-multiple-outline", -1)
              ])),
              _: 1,
              __: [5]
            })),
            _(y, {
              activator: "parent",
              location: a.isRtl ? "bottom start" : "bottom end"
            }, {
              default: E(() => [
                ae(j(e.__("Offline Invoices")) + " (" + j(n.pendingInvoices) + ") ", 1)
              ]),
              _: 1
            }, 8, ["location"])
          ]),
          _: 1
        }, 8, ["class"]),
        bt(e.$slots, "menu", {}, void 0, !0)
      ], 2),
      _($r, { name: "loading-fade" }, {
        default: E(() => [
          n.loadingActive ? (te(), Oe("div", IG, [
            T("div", EG, [
              T("span", PG, j(n.loadingMessage), 1),
              T("div", OG, j(n.loadingProgress) + "%", 1)
            ]),
            _(w, {
              "model-value": n.loadingProgress,
              color: "primary",
              height: "4",
              absolute: "",
              location: "bottom",
              class: "glass-progress"
            }, null, 8, ["model-value"])
          ])) : ke("", !0)
        ]),
        _: 1
      })
    ]),
    _: 3
  }, 8, ["color", "theme", "class", "style"]);
}
const BG = /* @__PURE__ */ on(TG, [["render", DG], ["__scopeId", "data-v-ad919662"]]), VG = {
  name: "NavbarDrawer",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = kc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  props: {
    drawer: Boolean,
    company: String,
    companyImg: String,
    items: Array,
    item: Number,
    isDark: Boolean
  },
  data() {
    return {
      mini: !1,
      drawerOpen: this.drawer,
      activeItem: this.item,
      showSport: !0
    };
  },
  computed: {
    scrimColor() {
      return this.isDark ? !0 : "rgba(255,255,255,1)";
    }
  },
  watch: {
    drawer(e) {
      this.drawerOpen = e, e && (this.mini = !1);
    },
    drawerOpen(e) {
      document.body.style.overflow = e ? "hidden" : "", this.$emit("update:drawer", e);
    },
    item(e) {
      this.activeItem = e;
    },
    activeItem(e) {
      this.$emit("update:item", e);
    }
  },
  mounted() {
  },
  methods: {
    handleMouseLeave() {
      this.drawerOpen && (clearTimeout(this._closeTimeout), this._closeTimeout = setTimeout(() => {
        this.drawerOpen = !1, this.mini = !0;
      }, 250));
    },
    changePage(e) {
      this.$emit("change-page", e), window.innerWidth < 1024 && this.closeDrawer();
    },
    closeDrawer() {
      this.drawerOpen = !1, this.mini = !0;
    }
  }
}, MG = {
  key: 0,
  class: "drawer-header"
}, LG = { class: "drawer-company" }, RG = {
  key: 1,
  class: "drawer-header-mini"
}, FG = { key: 2 };
function NG(e, t, n, a, r, i) {
  const o = J("v-img"), l = J("v-avatar"), s = J("v-divider"), d = J("v-icon"), u = J("v-list-item-title"), f = J("v-list-item"), h = J("v-list"), y = J("v-navigation-drawer");
  return te(), Le(y, {
    modelValue: r.drawerOpen,
    "onUpdate:modelValue": t[1] || (t[1] = (p) => r.drawerOpen = p),
    rail: r.mini,
    "expand-on-hover": "",
    width: "220",
    class: Ae(["drawer-custom", { "drawer-visible": r.drawerOpen }, a.rtlClasses]),
    onMouseleave: i.handleMouseLeave,
    temporary: "",
    location: a.isRtl ? "right" : "left",
    scrim: i.scrimColor
  }, {
    default: E(() => [
      r.mini ? (te(), Oe("div", RG, [
        _(l, { size: "40" }, {
          default: E(() => [
            _(o, {
              src: n.companyImg,
              alt: "Company logo"
            }, null, 8, ["src"])
          ]),
          _: 1
        })
      ])) : (te(), Oe("div", MG, [
        _(l, { size: "40" }, {
          default: E(() => [
            _(o, {
              src: n.companyImg,
              alt: "Company logo"
            }, null, 8, ["src"])
          ]),
          _: 1
        }),
        T("span", LG, j(n.company), 1)
      ])),
      _(s),
      _(h, {
        density: "compact",
        nav: "",
        selected: r.activeItem,
        "onUpdate:selected": t[0] || (t[0] = (p) => r.activeItem = p),
        "selected-class": "active-item"
      }, {
        default: E(() => [
          (te(!0), Oe(Ge, null, ln(n.items, (p, w) => (te(), Le(f, {
            key: p.text,
            value: w,
            onClick: (b) => i.changePage(p.text),
            class: "drawer-item"
          }, {
            prepend: E(() => [
              _(d, { class: "drawer-icon" }, {
                default: E(() => [
                  ae(j(p.icon), 1)
                ]),
                _: 2
              }, 1024)
            ]),
            default: E(() => [
              _(u, { class: "drawer-item-title" }, {
                default: E(() => [
                  ae(j(p.text), 1)
                ]),
                _: 2
              }, 1024)
            ]),
            _: 2
          }, 1032, ["value", "onClick"]))), 128))
        ]),
        _: 1
      }, 8, ["selected"]),
      r.showSport ? (te(), Oe("div", FG)) : ke("", !0)
    ]),
    _: 1
  }, 8, ["modelValue", "rail", "class", "onMouseleave", "location", "scrim"]);
}
const UG = /* @__PURE__ */ on(VG, [["render", NG], ["__scopeId", "data-v-900e46f4"]]), $G = [
  { code: "en", name: "English", native_name: "English" },
  { code: "ar", name: "العربية", native_name: "العربية" },
  { code: "es", name: "Español", native_name: "Español" },
  { code: "pt", name: "Português", native_name: "Português" }
], qG = {
  name: "NavbarMenu",
  props: {
    posProfile: { type: Object, default: () => ({}) },
    lastInvoiceId: String,
    manualOffline: Boolean,
    networkOnline: Boolean,
    serverOnline: Boolean,
    isDark: Boolean
  },
  data() {
    return {
      showLanguageDialog: !1,
      selectedLanguage: "en",
      currentLanguage: "en",
      availableLanguages: $G,
      loading: !1,
      changing: !1,
      useWesternNumerals: !1,
      originalWesternNumerals: !1,
      notification: {
        show: !1,
        message: "",
        type: "info",
        timeout: 3e3
      }
    };
  },
  computed: {
    canChangeLanguage() {
      return (this.selectedLanguage !== this.currentLanguage || this.useWesternNumerals !== this.originalWesternNumerals) && !this.changing;
    },
    selectedLanguageName() {
      return this.availableLanguages.find((t) => t.code === this.selectedLanguage)?.name || this.selectedLanguage.toUpperCase();
    }
  },
  async mounted() {
    await this.initializeLanguage(), this.initializeWesternNumerals();
  },
  methods: {
    initializeWesternNumerals() {
      try {
        const e = localStorage.getItem("use_western_numerals");
        if (e !== null)
          this.useWesternNumerals = ["1", "true", "yes"].includes(e.toLowerCase());
        else if (window.frappe && window.frappe.boot) {
          const t = window.frappe.boot.use_western_numerals || window.frappe.boot.pos_profile?.use_western_numerals;
          typeof t < "u" && (this.useWesternNumerals = !!t);
        }
      } catch {
        this.useWesternNumerals = !1;
      }
      this.originalWesternNumerals = this.useWesternNumerals;
    },
    saveWesternPreference() {
      try {
        localStorage.setItem("use_western_numerals", this.useWesternNumerals ? "1" : "0");
      } catch {
      }
      window.frappe && window.frappe.boot && (window.frappe.boot.use_western_numerals = this.useWesternNumerals), this.showNotification(
        this.useWesternNumerals ? "Western numerals enabled" : "Western numerals disabled"
      );
    },
    async changeLanguage() {
      if (this.selectedLanguage === this.currentLanguage) {
        this.originalWesternNumerals = this.useWesternNumerals, this.showNotification("Settings updated. Reloading...", "success"), this.closeLanguageDialog(), this.$emit("clear-cache"), setTimeout(() => {
          window.location.reload();
        }, 200);
        return;
      }
      this.changing = !0;
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.utilities.set_current_user_language",
          args: { lang_code: this.selectedLanguage }
        }), t = e?.message || e;
        if (t?.success)
          this.currentLanguage = this.selectedLanguage, window.frappe && window.frappe.boot && (window.frappe.boot.lang = this.selectedLanguage), this.showNotification("Language changed successfully! Reloading...", "success"), this.closeLanguageDialog(), this.$emit("clear-cache"), setTimeout(() => {
            window.location.reload();
          }, 2e3);
        else {
          const n = t?.message || "Failed to change language";
          this.showNotification(n, "error");
        }
      } catch (e) {
        this.showNotification(
          `Failed to change language: ${e.message || "Unknown error"}`,
          "error"
        );
      } finally {
        this.changing = !1;
      }
    },
    async initializeLanguage() {
      this.loading = !0;
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.utilities.get_current_user_language"
        }), t = e?.message || e;
        t?.success && Object.assign(this, {
          availableLanguages: t.available_languages,
          currentLanguage: t.language_code,
          selectedLanguage: t.language_code
        });
      } catch (e) {
        console.error("Error initializing language:", e);
      } finally {
        this.loading = !1;
      }
    },
    closeLanguageDialog() {
      this.showLanguageDialog = !1, this.selectedLanguage = this.currentLanguage, this.originalWesternNumerals = this.useWesternNumerals;
    },
    showNotification(e, t = "info", n = 3e3) {
      Object.assign(this.notification, {
        show: !0,
        message: this.__(e),
        type: t,
        timeout: n
      });
    },
    hideNotification() {
      this.notification.show = !1;
    },
    __(e) {
      return window.__ ? window.__(e) : e;
    }
  },
  emits: [
    "close-shift",
    "print-last-invoice",
    "sync-invoices",
    "toggle-offline",
    "clear-cache",
    "show-about",
    "toggle-theme",
    "logout"
  ]
}, HG = { class: "menu-header-compact" }, zG = { class: "menu-header-text-compact" }, WG = { class: "menu-icon-wrapper-compact primary-icon" }, KG = { class: "menu-content-compact" }, jG = { class: "menu-icon-wrapper-compact secondary-icon" }, YG = { class: "menu-content-compact" }, GG = { class: "menu-icon-wrapper-compact info-icon" }, QG = { class: "menu-content-compact" }, JG = { class: "menu-icon-wrapper-compact warning-icon" }, XG = { class: "menu-content-compact" }, ZG = { class: "menu-icon-wrapper-compact neutral-icon" }, e9 = { class: "menu-content-compact" }, t9 = { class: "menu-icon-wrapper-compact neutral-icon" }, n9 = { class: "menu-content-compact" }, a9 = { class: "menu-icon-wrapper-compact primary-icon" }, r9 = { class: "menu-content-compact" }, i9 = { class: "menu-icon-wrapper-compact info-icon" }, o9 = { class: "menu-content-compact" }, s9 = { class: "menu-icon-wrapper-compact danger-icon" }, l9 = { class: "menu-content-compact" }, c9 = { class: "text-body-2 mb-3" };
function u9(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-btn"), s = J("v-list-item-title"), d = J("v-list-item-subtitle"), u = J("v-list-item"), f = J("v-divider"), h = J("v-list"), y = J("v-card"), p = J("v-menu"), w = J("v-card-title"), b = J("v-select"), v = J("v-switch"), g = J("v-alert"), k = J("v-card-text"), A = J("v-spacer"), C = J("v-card-actions"), D = J("v-dialog"), P = J("v-snackbar");
  return te(), Oe(Ge, null, [
    _(p, {
      "min-width": 240,
      "close-on-content-click": !0,
      location: "bottom end",
      offset: [0, 4]
    }, {
      activator: E(({ props: O }) => [
        _(l, Fe(O, {
          color: "primary",
          variant: "elevated",
          class: "menu-btn-compact"
        }), {
          default: E(() => [
            ae(j(i.__("Menu")) + " ", 1),
            _(o, {
              end: "",
              size: "16",
              class: "ml-1"
            }, {
              default: E(() => t[13] || (t[13] = [
                ae("mdi-menu-down", -1)
              ])),
              _: 1,
              __: [13]
            })
          ]),
          _: 2
        }, 1040)
      ]),
      default: E(() => [
        _(y, {
          class: "menu-card-compact",
          elevation: "12"
        }, {
          default: E(() => [
            T("div", HG, [
              _(o, {
                color: "primary",
                size: "20"
              }, {
                default: E(() => t[14] || (t[14] = [
                  ae("mdi-menu", -1)
                ])),
                _: 1,
                __: [14]
              }),
              T("span", zG, j(i.__("Actions")), 1)
            ]),
            _(h, {
              density: "compact",
              class: "menu-list-compact"
            }, {
              default: E(() => [
                n.posProfile.posa_hide_closing_shift ? ke("", !0) : (te(), Le(u, {
                  key: 0,
                  onClick: t[0] || (t[0] = (O) => e.$emit("close-shift")),
                  class: "menu-item-compact primary-action"
                }, {
                  prepend: E(() => [
                    T("div", WG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[15] || (t[15] = [
                          ae("mdi-content-save-move-outline", -1)
                        ])),
                        _: 1,
                        __: [15]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", KG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Close Shift")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("End current session")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                })),
                n.posProfile.posa_allow_print_last_invoice ? (te(), Le(u, {
                  key: 1,
                  onClick: t[1] || (t[1] = (O) => e.$emit("print-last-invoice")),
                  disabled: !n.lastInvoiceId,
                  class: "menu-item-compact secondary-action"
                }, {
                  prepend: E(() => [
                    T("div", jG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[16] || (t[16] = [
                          ae("mdi-printer", -1)
                        ])),
                        _: 1,
                        __: [16]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", YG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Print Last Invoice")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Reprint previous transaction")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }, 8, ["disabled"])) : ke("", !0),
                _(u, {
                  onClick: t[2] || (t[2] = (O) => e.$emit("sync-invoices")),
                  class: "menu-item-compact info-action"
                }, {
                  prepend: E(() => [
                    T("div", GG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[17] || (t[17] = [
                          ae("mdi-sync", -1)
                        ])),
                        _: 1,
                        __: [17]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", QG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Sync Offline Invoices")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Upload pending transactions")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[3] || (t[3] = (O) => e.$emit("toggle-offline")),
                  class: "menu-item-compact warning-action"
                }, {
                  prepend: E(() => [
                    T("div", JG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[18] || (t[18] = [
                          ae("mdi-wifi-off", -1)
                        ])),
                        _: 1,
                        __: [18]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", XG, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(n.manualOffline ? i.__("Go Online") : i.__("Go Offline")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(n.manualOffline ? i.__("Disable offline mode") : i.__("Work without server connection")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[4] || (t[4] = (O) => e.$emit("clear-cache")),
                  disabled: n.manualOffline || !n.networkOnline || !n.serverOnline,
                  class: "menu-item-compact neutral-action"
                }, {
                  prepend: E(() => [
                    T("div", ZG, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[19] || (t[19] = [
                          ae("mdi-delete-sweep-outline", -1)
                        ])),
                        _: 1,
                        __: [19]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", e9, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Clear Cache")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Remove local data and refresh")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }, 8, ["disabled"]),
                _(f, { class: "menu-section-divider-compact" }),
                _(u, {
                  onClick: t[5] || (t[5] = (O) => e.$emit("show-about")),
                  class: "menu-item-compact neutral-action"
                }, {
                  prepend: E(() => [
                    T("div", t9, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[20] || (t[20] = [
                          ae("mdi-information-outline", -1)
                        ])),
                        _: 1,
                        __: [20]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", n9, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("About")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("App information")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[6] || (t[6] = (O) => r.showLanguageDialog = !0),
                  class: "menu-item-compact primary-action"
                }, {
                  prepend: E(() => [
                    T("div", a9, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[21] || (t[21] = [
                          ae("mdi-translate", -1)
                        ])),
                        _: 1,
                        __: [21]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", r9, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Language")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Change interface language")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[7] || (t[7] = (O) => e.$emit("toggle-theme")),
                  class: "menu-item-compact info-action"
                }, {
                  prepend: E(() => [
                    T("div", i9, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => [
                          ae(j(n.isDark ? "mdi-white-balance-sunny" : "mdi-moon-waning-crescent"), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", o9, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(n.isDark ? i.__("Light Mode") : i.__("Dark Mode")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Switch theme appearance")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                }),
                _(u, {
                  onClick: t[8] || (t[8] = (O) => e.$emit("logout")),
                  class: "menu-item-compact danger-action"
                }, {
                  prepend: E(() => [
                    T("div", s9, [
                      _(o, {
                        color: "white",
                        size: "16"
                      }, {
                        default: E(() => t[22] || (t[22] = [
                          ae("mdi-logout", -1)
                        ])),
                        _: 1,
                        __: [22]
                      })
                    ])
                  ]),
                  default: E(() => [
                    T("div", l9, [
                      _(s, { class: "menu-item-title-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Logout")), 1)
                        ]),
                        _: 1
                      }),
                      _(d, { class: "menu-item-subtitle-compact" }, {
                        default: E(() => [
                          ae(j(i.__("Sign out of session")), 1)
                        ]),
                        _: 1
                      })
                    ])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    _(D, {
      modelValue: r.showLanguageDialog,
      "onUpdate:modelValue": t[11] || (t[11] = (O) => r.showLanguageDialog = O),
      "max-width": "400",
      persistent: ""
    }, {
      default: E(() => [
        _(y, null, {
          default: E(() => [
            _(w, { class: "text-h6 d-flex align-center" }, {
              default: E(() => [
                _(o, {
                  start: "",
                  color: "primary",
                  class: "mr-2"
                }, {
                  default: E(() => t[23] || (t[23] = [
                    ae("mdi-translate", -1)
                  ])),
                  _: 1,
                  __: [23]
                }),
                ae(" " + j(i.__("Select Language")), 1)
              ]),
              _: 1
            }),
            _(k, null, {
              default: E(() => [
                T("div", c9, j(i.__("Choose your preferred language for the POS interface")), 1),
                _(b, {
                  modelValue: r.selectedLanguage,
                  "onUpdate:modelValue": t[9] || (t[9] = (O) => r.selectedLanguage = O),
                  items: r.availableLanguages,
                  "item-title": "name",
                  "item-value": "code",
                  label: i.__("Language"),
                  variant: "outlined",
                  density: "compact",
                  loading: r.loading,
                  disabled: r.loading
                }, {
                  item: E(({ item: O, props: I }) => [
                    _(u, ea(Aa(I)), {
                      prepend: E(() => [
                        _(o, {
                          color: O.raw.code === r.currentLanguage ? "primary" : "grey"
                        }, {
                          default: E(() => [
                            ae(j(O.raw.code === r.currentLanguage ? "mdi-check-circle" : "mdi-circle-outline"), 1)
                          ]),
                          _: 2
                        }, 1032, ["color"])
                      ]),
                      default: E(() => [
                        _(s, null, {
                          default: E(() => [
                            ae(j(O.raw.name) + " (" + j(O.raw.code.toUpperCase()) + ") ", 1)
                          ]),
                          _: 2
                        }, 1024),
                        O.raw.code !== "en" ? (te(), Le(d, { key: 0 }, {
                          default: E(() => [
                            ae(j(O.raw.native_name), 1)
                          ]),
                          _: 2
                        }, 1024)) : ke("", !0)
                      ]),
                      _: 2
                    }, 1040)
                  ]),
                  _: 1
                }, 8, ["modelValue", "items", "label", "loading", "disabled"]),
                _(v, {
                  modelValue: r.useWesternNumerals,
                  "onUpdate:modelValue": [
                    t[10] || (t[10] = (O) => r.useWesternNumerals = O),
                    i.saveWesternPreference
                  ],
                  class: "mt-3",
                  density: "compact",
                  inset: "",
                  label: i.__("Use Western numerals")
                }, null, 8, ["modelValue", "label", "onUpdate:modelValue"]),
                r.selectedLanguage !== r.currentLanguage ? (te(), Le(g, {
                  key: 0,
                  type: "info",
                  variant: "tonal",
                  density: "compact",
                  class: "mt-3"
                }, {
                  default: E(() => [
                    ae(j(i.__("Language will be changed to")) + ": ", 1),
                    T("strong", null, j(i.selectedLanguageName), 1)
                  ]),
                  _: 1
                })) : ke("", !0)
              ]),
              _: 1
            }),
            _(C, { class: "pa-4 pt-0" }, {
              default: E(() => [
                _(A),
                _(l, {
                  color: "grey",
                  variant: "text",
                  onClick: i.closeLanguageDialog,
                  disabled: r.changing
                }, {
                  default: E(() => [
                    ae(j(i.__("Cancel")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "disabled"]),
                _(l, {
                  color: "primary",
                  loading: r.changing,
                  disabled: !i.canChangeLanguage,
                  onClick: i.changeLanguage
                }, {
                  default: E(() => [
                    ae(j(i.__("Change Language")), 1)
                  ]),
                  _: 1
                }, 8, ["loading", "disabled", "onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    _(P, {
      modelValue: r.notification.show,
      "onUpdate:modelValue": t[12] || (t[12] = (O) => r.notification.show = O),
      timeout: r.notification.timeout,
      color: r.notification.type,
      location: "top right"
    }, {
      actions: E(() => [
        _(l, {
          color: "white",
          variant: "text",
          onClick: i.hideNotification
        }, {
          default: E(() => [
            ae(j(i.__("Close")), 1)
          ]),
          _: 1
        }, 8, ["onClick"])
      ]),
      default: E(() => [
        ae(j(r.notification.message) + " ", 1)
      ]),
      _: 1
    }, 8, ["modelValue", "timeout", "color"])
  ], 64);
}
const d9 = /* @__PURE__ */ on(qG, [["render", u9], ["__scopeId", "data-v-1b76f713"]]), f9 = {
  name: "StatusIndicator",
  props: {
    networkOnline: Boolean,
    serverOnline: Boolean,
    serverConnecting: Boolean,
    isIpHost: Boolean,
    syncTotals: Object,
    cacheReady: Boolean
  },
  computed: {
    /**
     * Determines the color of the status icon based on current network and server connectivity.
     * @returns {string} A Vuetify color string ('green', 'red').
     */
    statusColor() {
      return this.serverConnecting ? "orange" : this.isIpHost ? this.networkOnline ? "green" : "red" : this.networkOnline && this.serverOnline ? "green" : this.networkOnline && !this.serverOnline ? "orange" : "red";
    },
    /**
     * Determines the Material Design Icon to display based on network and server status.
     * @returns {string} A Material Design Icon class string.
     */
    statusIcon() {
      return this.serverConnecting ? "mdi-wifi-sync" : this.isIpHost ? this.networkOnline ? "mdi-wifi" : "mdi-wifi-off" : this.networkOnline && this.serverOnline ? "mdi-wifi" : this.networkOnline && !this.serverOnline ? "mdi-wifi-strength-alert-outline" : "mdi-wifi-off";
    },
    /**
     * Provides a descriptive text for the tooltip that appears when hovering over the status icon.
     * This text is also used for the `title` attribute of the button.
     * @returns {string} A localized status message.
     */
    statusText() {
      const e = window.location.hostname, t = this.isIpHost ? "Local/IP Host" : "Domain Host";
      return this.serverConnecting ? this.__(`Connecting to server... (${t}: ${e})`) : this.networkOnline ? this.isIpHost ? this.__(`Connected to ${e}`) : this.serverOnline ? this.__(`Connected to Server (${e})`) : this.__(`Server Offline (${e})`) : this.__(`No Internet Connection (${t}: ${e})`);
    },
    /**
     * Returns a short string summarizing the last offline invoice sync results.
     */
    syncInfoText() {
      const { pending: e, synced: t, drafted: n } = this.syncTotals;
      if (!this.cacheReady)
        return this.__("Loading cache...");
      const a = e || 0, r = t || 0, i = n || 0;
      return this.networkOnline ? `To Sync: ${a} | Synced: ${r} | Draft: ${i}` : a > 0 || r > 0 || i > 0 ? `Pending: ${a} | Synced: ${r} | Draft: ${i}` : "Offline Mode";
    }
  }
}, m9 = { class: "status-section-enhanced mx-1" }, h9 = { class: "status-info-always-visible" }, _9 = { class: "status-detail-inline" };
function v9(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-btn");
  return te(), Oe("div", m9, [
    _(l, {
      icon: "",
      title: i.statusText,
      class: "status-btn-enhanced",
      color: i.statusColor
    }, {
      default: E(() => [
        _(o, { color: i.statusColor }, {
          default: E(() => [
            ae(j(i.statusIcon), 1)
          ]),
          _: 1
        }, 8, ["color"])
      ]),
      _: 1
    }, 8, ["title", "color"]),
    T("div", h9, [
      T("div", {
        class: Ae(["status-title-inline", {
          "status-connected": i.statusColor === "green",
          "status-offline": i.statusColor === "red"
        }])
      }, j(i.statusText), 3),
      T("div", _9, j(i.syncInfoText), 1)
    ])
  ]);
}
const p9 = /* @__PURE__ */ on(f9, [["render", v9], ["__scopeId", "data-v-d7d26c06"]]), g9 = {
  name: "CacheUsageMeter",
  props: {
    cacheUsage: {
      type: Number,
      default: 0
    },
    cacheUsageLoading: {
      type: Boolean,
      default: !1
    },
    cacheUsageDetails: {
      type: Object,
      default: () => ({
        total: 0,
        indexedDB: 0,
        localStorage: 0
      })
    }
  },
  computed: {
    cacheUsageColor() {
      return this.cacheUsage < 50 ? "success" : this.cacheUsage < 80 ? "warning" : "error";
    },
    cacheBarGradient() {
      return this.cacheUsage < 50 ? "linear-gradient(90deg, #43e97b 0%, #38f9d7 100%)" : this.cacheUsage < 80 ? "linear-gradient(90deg, #f7971e 0%, #ffd200 100%)" : "linear-gradient(90deg, #f953c6 0%, #b91d73 100%)";
    }
  },
  methods: {
    refreshCacheUsage() {
      this.$emit("refresh");
    },
    formatBytes(e) {
      if (e === 0) return "0 Bytes";
      const t = 1024, n = ["Bytes", "KB", "MB", "GB"], a = Math.floor(Math.log(e) / Math.log(t));
      return parseFloat((e / Math.pow(t, a)).toFixed(2)) + " " + n[a];
    }
  }
}, y9 = { class: "cache-usage-section mx-1" }, b9 = { class: "cache-tooltip-content" }, w9 = { class: "cache-tooltip-title" }, k9 = { class: "cache-tooltip-section-title mb-1" }, S9 = { class: "cache-tooltip-bar mb-2" }, C9 = { class: "cache-bar-bg" }, A9 = { class: "cache-bar-label-inside" }, x9 = { key: 0 }, T9 = { class: "cache-tooltip-section-title mb-1" }, I9 = { class: "cache-tooltip-detail" }, E9 = { class: "cache-tooltip-detail" }, P9 = { class: "cache-tooltip-detail" }, O9 = {
  key: 1,
  class: "cache-tooltip-detail"
}, D9 = {
  key: 2,
  class: "cache-tooltip-warning"
}, B9 = { class: "cache-tooltip-tip mt-2" }, V9 = { class: "cache-tooltip-explanation mt-2" }, M9 = { class: "cache-tooltip-action mt-2" };
function L9(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-progress-circular"), s = J("v-divider"), d = J("v-tooltip");
  return te(), Oe("div", y9, [
    _(d, { location: "bottom" }, {
      activator: E(({ props: u }) => [
        T("div", Fe(u, {
          class: "cache-meter-container",
          onClick: t[0] || (t[0] = (...f) => i.refreshCacheUsage && i.refreshCacheUsage(...f))
        }), [
          _(l, {
            "model-value": n.cacheUsage,
            color: i.cacheUsageColor,
            size: 32,
            width: 3,
            class: "cache-meter"
          }, {
            default: E(() => [
              _(o, {
                size: "16",
                color: "info"
              }, {
                default: E(() => t[1] || (t[1] = [
                  ae("mdi-database-clock", -1)
                ])),
                _: 1,
                __: [1]
              })
            ]),
            _: 1
          }, 8, ["model-value", "color"])
        ], 16)
      ]),
      default: E(() => [
        T("div", b9, [
          T("div", w9, [
            _(o, {
              size: "14",
              color: "info",
              class: "mr-1"
            }, {
              default: E(() => t[2] || (t[2] = [
                ae("mdi-database-clock", -1)
              ])),
              _: 1,
              __: [2]
            }),
            ae(" " + j(e.__("Cache Usage")), 1)
          ]),
          _(s, { class: "my-2" }),
          T("div", k9, j(e.__("Usage")), 1),
          T("div", S9, [
            T("div", C9, [
              T("div", {
                class: "cache-bar-fill",
                style: Je({ width: n.cacheUsage + "%", background: i.cacheBarGradient })
              }, [
                T("span", A9, j(n.cacheUsage) + "%", 1)
              ], 4),
              t[3] || (t[3] = T("span", { class: "cache-bar-max" }, "100%", -1))
            ])
          ]),
          n.cacheUsageLoading ? (te(), Oe("div", O9, j(e.__("Calculating...")), 1)) : (te(), Oe("div", x9, [
            T("div", T9, j(e.__("Breakdown")), 1),
            T("div", I9, [
              _(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: E(() => t[4] || (t[4] = [
                  ae("mdi-database-clock", -1)
                ])),
                _: 1,
                __: [4]
              }),
              ae(j(e.__("Total Size")) + ": ", 1),
              T("b", null, j(i.formatBytes(n.cacheUsageDetails.total)), 1)
            ]),
            T("div", E9, [
              _(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: E(() => t[5] || (t[5] = [
                  ae("mdi-database", -1)
                ])),
                _: 1,
                __: [5]
              }),
              ae(j(e.__("IndexedDB")) + ": ", 1),
              T("b", null, j(i.formatBytes(n.cacheUsageDetails.indexedDB)), 1)
            ]),
            T("div", P9, [
              _(o, {
                size: "14",
                color: "info",
                class: "mr-1"
              }, {
                default: E(() => t[6] || (t[6] = [
                  ae("mdi-folder", -1)
                ])),
                _: 1,
                __: [6]
              }),
              ae(j(e.__("localStorage")) + ": ", 1),
              T("b", null, j(i.formatBytes(n.cacheUsageDetails.localStorage)), 1)
            ])
          ])),
          _(s, { class: "my-2" }),
          n.cacheUsage >= 80 ? (te(), Oe("div", D9, [
            _(o, {
              size: "14",
              color: "error",
              class: "mr-1"
            }, {
              default: E(() => t[7] || (t[7] = [
                ae("mdi-alert", -1)
              ])),
              _: 1,
              __: [7]
            }),
            ae(" " + j(e.__("Warning: High cache usage may affect performance.")), 1)
          ])) : ke("", !0),
          T("div", B9, [
            _(o, {
              size: "14",
              color: "primary",
              class: "mr-1"
            }, {
              default: E(() => t[8] || (t[8] = [
                ae("mdi-lightbulb-on-outline", -1)
              ])),
              _: 1,
              __: [8]
            }),
            ae(" " + j(e.__("Tip: Clear cache regularly to free up space and keep the app fast.")), 1)
          ]),
          T("div", V9, [
            _(o, {
              size: "14",
              color: "info",
              class: "mr-1"
            }, {
              default: E(() => t[9] || (t[9] = [
                ae("mdi-database-clock", -1)
              ])),
              _: 1,
              __: [9]
            }),
            ae(" " + j(e.__("The app stores data locally for offline use. This is called cache.")), 1)
          ]),
          T("div", M9, [
            _(o, {
              size: "14",
              class: "mr-1"
            }, {
              default: E(() => t[10] || (t[10] = [
                ae("mdi-refresh", -1)
              ])),
              _: 1,
              __: [10]
            }),
            ae(" " + j(e.__("Click to refresh")), 1)
          ])
        ])
      ]),
      _: 1
    })
  ]);
}
const R9 = /* @__PURE__ */ on(g9, [["render", L9], ["__scopeId", "data-v-485036e0"]]), F9 = {
  name: "AboutDialog",
  props: {
    modelValue: Boolean
  },
  data() {
    return {
      dialogOpen: this.modelValue,
      loadingAppInfo: !1,
      appInfoError: !1,
      appInfo: []
    };
  },
  watch: {
    modelValue(e) {
      this.dialogOpen = e, e && this.loadAppInfo();
    },
    dialogOpen(e) {
      this.$emit("update:modelValue", e);
    }
  },
  methods: {
    close() {
      this.dialogOpen = !1;
    },
    loadAppInfo() {
      this.loadingAppInfo = !0, this.appInfoError = !1, frappe.call({
        method: "posawesome.posawesome.api.utilities.get_app_info",
        callback: (e) => {
          this.loadingAppInfo = !1, Array.isArray(e.message.apps) ? this.appInfo = e.message.apps : this.appInfoError = !0;
        },
        error: () => {
          this.loadingAppInfo = !1, this.appInfoError = !0;
        }
      });
    }
  }
}, N9 = { class: "header-content-improved" }, U9 = { class: "header-icon-wrapper-improved" }, $9 = { class: "header-text-improved" }, q9 = { class: "header-title-improved" }, H9 = { class: "header-subtitle-improved" }, z9 = {
  key: 0,
  class: "header-stats-improved"
}, W9 = { class: "content-container-improved" }, K9 = {
  key: 0,
  class: "empty-state-improved text-center"
}, j9 = { class: "text-body-2 mt-3 mb-0" }, Y9 = {
  key: 1,
  class: "empty-state-improved text-center"
}, G9 = { class: "text-body-2 mb-3" }, Q9 = {
  key: 2,
  class: "apps-list-improved"
}, J9 = { class: "apps-header-improved" }, X9 = { class: "text-h6 mb-2" }, Z9 = { class: "apps-grid-improved" }, eQ = { class: "app-icon-improved" }, tQ = { class: "app-details-improved" }, nQ = { class: "app-name-improved" }, aQ = { class: "app-version-improved" }, rQ = { class: "footer-info-improved" }, iQ = { class: "footer-text-improved" };
function oQ(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-chip"), s = J("v-btn"), d = J("v-card-title"), u = J("v-progress-circular"), f = J("v-card-text"), h = J("v-spacer"), y = J("v-card-actions"), p = J("v-card"), w = J("v-dialog");
  return te(), Le(w, {
    modelValue: r.dialogOpen,
    "onUpdate:modelValue": t[0] || (t[0] = (b) => r.dialogOpen = b),
    "max-width": "650",
    persistent: ""
  }, {
    default: E(() => [
      _(p, { class: "about-dialog-card-improved" }, {
        default: E(() => [
          _(d, { class: "about-header-improved pa-5" }, {
            default: E(() => [
              T("div", N9, [
                T("div", U9, [
                  _(o, {
                    size: "22",
                    class: "header-icon"
                  }, {
                    default: E(() => t[1] || (t[1] = [
                      ae("mdi-information-outline", -1)
                    ])),
                    _: 1,
                    __: [1]
                  })
                ]),
                T("div", $9, [
                  T("h3", q9, j(e.__("About")), 1),
                  T("p", H9, j(e.__("System Information")), 1)
                ]),
                !r.loadingAppInfo && !r.appInfoError ? (te(), Oe("div", z9, [
                  _(l, {
                    size: "small",
                    color: "primary",
                    variant: "tonal",
                    class: "status-chip-improved"
                  }, {
                    default: E(() => [
                      _(o, {
                        start: "",
                        size: "14"
                      }, {
                        default: E(() => t[2] || (t[2] = [
                          ae("mdi-application-outline", -1)
                        ])),
                        _: 1,
                        __: [2]
                      }),
                      ae(" " + j(r.appInfo.length) + " " + j(e.__("Apps")), 1)
                    ]),
                    _: 1
                  })
                ])) : ke("", !0)
              ]),
              _(s, {
                icon: "mdi-close",
                variant: "text",
                size: "default",
                onClick: i.close,
                class: "close-btn-improved"
              }, null, 8, ["onClick"])
            ]),
            _: 1
          }),
          _(f, { class: "pa-0 white-background" }, {
            default: E(() => [
              T("div", W9, [
                r.loadingAppInfo ? (te(), Oe("div", K9, [
                  _(u, {
                    indeterminate: "",
                    color: "primary",
                    size: "50"
                  }),
                  T("p", j9, j(e.__("Loading...")), 1)
                ])) : r.appInfoError ? (te(), Oe("div", Y9, [
                  _(o, {
                    size: "50",
                    color: "error",
                    class: "mb-3"
                  }, {
                    default: E(() => t[3] || (t[3] = [
                      ae("mdi-alert-circle-outline", -1)
                    ])),
                    _: 1,
                    __: [3]
                  }),
                  T("p", G9, j(e.__("Error Loading Data")), 1),
                  _(s, {
                    color: "primary",
                    variant: "outlined",
                    size: "default",
                    onClick: i.loadAppInfo
                  }, {
                    default: E(() => [
                      _(o, {
                        start: "",
                        size: "18"
                      }, {
                        default: E(() => t[4] || (t[4] = [
                          ae("mdi-refresh", -1)
                        ])),
                        _: 1,
                        __: [4]
                      }),
                      ae(" " + j(e.__("Retry")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ])) : (te(), Oe("div", Q9, [
                  T("div", J9, [
                    T("h4", X9, j(e.__("Installed Applications")), 1)
                  ]),
                  T("div", Z9, [
                    (te(!0), Oe(Ge, null, ln(r.appInfo, (b) => (te(), Oe("div", {
                      key: b.app_name,
                      class: "app-item-improved"
                    }, [
                      T("div", eQ, [
                        _(o, {
                          size: "18",
                          color: "white"
                        }, {
                          default: E(() => t[5] || (t[5] = [
                            ae("mdi-application-outline", -1)
                          ])),
                          _: 1,
                          __: [5]
                        })
                      ]),
                      T("div", tQ, [
                        T("div", nQ, j(b.app_name), 1),
                        T("div", aQ, "v" + j(b.installed_version), 1)
                      ])
                    ]))), 128))
                  ])
                ]))
              ])
            ]),
            _: 1
          }),
          _(y, { class: "dialog-actions-improved pa-4" }, {
            default: E(() => [
              T("div", rQ, [
                T("span", iQ, [
                  _(o, {
                    start: "",
                    size: "16",
                    color: "error"
                  }, {
                    default: E(() => t[6] || (t[6] = [
                      ae("mdi-heart", -1)
                    ])),
                    _: 1,
                    __: [6]
                  }),
                  ae(" " + j(e.__("Built with Frappe")), 1)
                ])
              ]),
              _(h),
              _(s, {
                color: "primary",
                onClick: i.close,
                class: "close-btn-action-improved"
              }, {
                default: E(() => [
                  ae(j(e.__("Close")), 1)
                ]),
                _: 1
              }, 8, ["onClick"])
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["modelValue"]);
}
const sQ = /* @__PURE__ */ on(F9, [["render", oQ], ["__scopeId", "data-v-2c67391c"]]), Lt = {
  // Check if current language/layout is RTL
  isRtl() {
    if (typeof frappe < "u" && frappe.utils && typeof frappe.utils.is_rtl == "function")
      return frappe.utils.is_rtl();
    if ((document.documentElement.dir || document.body.dir || "").toLowerCase() === "rtl") return !0;
    const t = document.documentElement.lang || "";
    return ["ar", "he", "fa", "ur", "ps", "sd", "ku", "dv"].some((a) => t.toLowerCase().startsWith(a));
  },
  // Determine if user prefers Western numerals even in RTL
  useWestern() {
    try {
      const e = localStorage.getItem("use_western_numerals");
      if (e !== null)
        return ["1", "true", "yes"].includes(e.toLowerCase());
    } catch {
    }
    if (typeof frappe < "u") {
      const e = frappe.boot?.use_western_numerals || frappe.boot?.pos_profile?.use_western_numerals;
      if (typeof e < "u")
        return !!e;
    }
    return !1;
  },
  // Helper to check if Arabic numerals should be used
  shouldUseArabic() {
    return this.isRtl() && !this.useWestern();
  },
  // Convert Western numerals to Arabic-Indic numerals
  toArabicNumerals(e) {
    if (!this.shouldUseArabic()) return e;
    const t = {
      0: "٠",
      1: "١",
      2: "٢",
      3: "٣",
      4: "٤",
      5: "٥",
      6: "٦",
      7: "٧",
      8: "٨",
      9: "٩"
    };
    return String(e).replace(/[0-9]/g, (n) => t[n]);
  },
  // Convert Arabic-Indic numerals back to Western numerals for parsing
  fromArabicNumerals(e) {
    const t = {
      "٠": "0",
      "١": "1",
      "٢": "2",
      "٣": "3",
      "٤": "4",
      "٥": "5",
      "٦": "6",
      "٧": "7",
      "٨": "8",
      "٩": "9"
    };
    return String(e).replace(/[٠-٩]/g, (n) => t[n]).replace(/٬/g, ",").replace(/٫/g, ".");
  },
  // Get appropriate locale for number formatting
  getNumberLocale() {
    if (this.shouldUseArabic()) {
      const e = document.documentElement.lang || "ar";
      return e.startsWith("ar") ? "ar-SA" : e.startsWith("fa") ? "fa-IR" : "ar-SA";
    }
    return "en-US";
  }
}, Bi = {
  data() {
    return {
      float_precision: 2,
      currency_precision: 2
    };
  },
  methods: {
    flt(e, t, n, a) {
      return !t && t != 0 && (t = this.currency_precision || 2), a || (a = "Banker's Rounding (legacy)"), flt(e, t, n, a);
    },
    formatCurrency(e, t) {
      e == null && (e = 0);
      let n = Number(Lt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.currency_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Lt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Lt.toArabicNumerals(i), i;
    },
    formatFloat(e, t) {
      e == null && (e = 0);
      let n = Number(Lt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.float_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Lt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Lt.toArabicNumerals(i), i;
    },
    setFormatedCurrency(e, t, n, a = !1, r) {
      let i = r && r.target ? r.target.value : r;
      typeof i == "string" && (i = Lt.fromArabicNumerals(i), i = i.replace(/,/g, ""));
      let o = parseFloat(i);
      return isNaN(o) ? o = 0 : a && o < 0 && (o = Math.abs(o)), typeof e == "object" ? e[t] = o : this[t] = o, this.formatCurrency(o, n);
    },
    setFormatedFloat(e, t, n, a = !1, r) {
      let i = r && r.target ? r.target.value : r;
      typeof i == "string" && (i = Lt.fromArabicNumerals(i), i = i.replace(/,/g, ""));
      let o = parseFloat(i);
      return isNaN(o) ? o = 0 : a && o < 0 && (o = Math.abs(o)), typeof e == "object" ? e[t] = o : this[t] = o, this.formatFloat(o, n);
    },
    currencySymbol(e) {
      return get_currency_symbol(e);
    },
    isNumber(e) {
      const t = Lt.fromArabicNumerals(String(e));
      return /^-?(\d+|\d{1,3}(\.\d{3})*)(,\d+)?$/.test(t) || "invalid number";
    },
    // Check if a value is negative for CSS class binding
    isNegative(e) {
      if (e == null) return !1;
      const t = Number(Lt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      return !isNaN(t) && t < 0;
    },
    // Format currency without HTML spans (for class binding approach)
    formatCurrencyPlain(e, t) {
      e == null && (e = 0);
      let n = Number(Lt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.currency_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Lt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Lt.toArabicNumerals(i), i;
    },
    // Format float without HTML spans (for class binding approach)
    formatFloatPlain(e, t) {
      e == null && (e = 0);
      let n = Number(Lt.fromArabicNumerals(String(e)).replace(/,/g, ""));
      isNaN(n) && (n = 0);
      let a = t != null ? Number(t) : Number(this.float_precision) || 2;
      (!Number.isInteger(a) || a < 0 || a > 20) && (a = Math.min(Math.max(parseInt(a) || 2, 0), 20));
      const r = Lt.getNumberLocale();
      let i = n.toLocaleString(r, {
        minimumFractionDigits: a,
        maximumFractionDigits: a,
        useGrouping: !0
      });
      return i = Lt.toArabicNumerals(i), i;
    }
  },
  mounted() {
    this.float_precision = frappe.defaults.get_default("float_precision") || 2, this.currency_precision = frappe.defaults.get_default("currency_precision") || 2;
    const e = (t) => {
      const n = t.pos_profile || t, a = parseInt(n.posa_decimal_precision);
      isNaN(a) || (this.float_precision = a, this.currency_precision = a);
    };
    this.eventBus && this.eventBus.on && (this.eventBus.on("register_pos_profile", e), this.eventBus.on("payments_register_pos_profile", e));
  }
};
let ky = Promise.resolve();
function lQ(e) {
  return ky = ky.then(() => e()).catch((t) => {
    console.error("DB operation failed", t);
  }), ky;
}
async function cQ(e, t = 1 / 0) {
  const n = [];
  try {
    await gt.transaction("r", gt.table(e), async () => {
      let a = 0;
      await gt.table(e).each((r) => {
        if (n.push(r), a += 1, a >= t) throw Qi.IterationComplete;
      });
    });
  } catch (a) {
    a !== Qi.IterationComplete && console.error("Cursor read failed", a);
  }
  return n;
}
const gt = new Qi("posawesome_offline");
gt.version(7).stores({
  keyval: "&key",
  queue: "&key",
  cache: "&key",
  items: "&item_code,item_name,item_group,*barcodes,*name_keywords,*serials,*batches",
  item_prices: "&[price_list+item_code],price_list,item_code",
  customers: "&name,customer_name,mobile_no,email_id,tax_id"
}).upgrade(
  (e) => e.table("items").toCollection().modify((t) => {
    t.barcodes = Array.isArray(t.item_barcode) ? t.item_barcode.map((n) => n.barcode).filter(Boolean) : t.item_barcode ? [String(t.item_barcode)] : [], t.name_keywords = t.item_name ? t.item_name.toLowerCase().split(/\s+/).filter(Boolean) : [], t.serials = Array.isArray(t.serial_no_data) ? t.serial_no_data.map((n) => n.serial_no).filter(Boolean) : [], t.batches = Array.isArray(t.batch_no_data) ? t.batch_no_data.map((n) => n.batch_no).filter(Boolean) : [];
  })
);
const uQ = {
  offline_invoices: "queue",
  offline_customers: "queue",
  offline_payments: "queue",
  item_details_cache: "cache",
  customer_storage: "cache"
}, dQ = /* @__PURE__ */ new Set(["items", "item_details_cache", "local_stock_cache"]);
function Q_(e) {
  return uQ[e] || "keyval";
}
function fQ(e) {
  if (!e) return !1;
  const t = e.message ? e.message.toLowerCase() : "";
  return ["VersionError", "InvalidStateError", "NotFoundError"].includes(e.name) || t.includes("corrupt");
}
async function ia() {
  try {
    return await gt.table(Q_("health_check")).get("health_check"), !0;
  } catch (e) {
    console.error("IndexedDB health check failed", e);
    try {
      return gt.isOpen() && await gt.close(), console.log("Attempting to reopen IndexedDB without deleting"), await gt.open(), console.log("IndexedDB reopened successfully"), !0;
    } catch (t) {
      if (console.error("Failed to reopen IndexedDB", t), fQ(t)) {
        console.log("IndexedDB appears corrupted. Recreating database...");
        try {
          return await Qi.delete("posawesome_offline"), await gt.open(), console.log("IndexedDB recreated and opened successfully"), !0;
        } catch (n) {
          console.error("Failed to recreate IndexedDB", n);
        }
      }
      return !1;
    }
  }
}
let Zo = null;
function h1() {
  if (!(Zo || typeof Worker > "u"))
    try {
      const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
      try {
        Zo = new Worker(e, { type: "classic" });
      } catch {
        Zo = new Worker(e, { type: "module" });
      }
    } catch (e) {
      console.error("Failed to init persist worker", e), Zo = null;
    }
}
function pD() {
  if (Zo) {
    try {
      Zo.terminate();
    } catch (e) {
      console.error("Failed to terminate persist worker", e);
    }
    Zo = null;
  }
}
h1();
const l_ = {};
let aw = null;
function Toe(e, t) {
  l_[e] = t, aw || (aw = setTimeout(mQ, 100));
}
function mQ() {
  const e = Object.keys(l_);
  e.length && e.forEach((t) => {
    Tt(t, l_[t]), delete l_[t];
  }), aw = null;
}
function Tt(e, t) {
  if (ia().catch(() => {
  }), Zo) {
    let a = t;
    try {
      a = typeof structuredClone == "function" ? structuredClone(t) : JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize", e, r);
    }
    try {
      Zo.postMessage({ type: "persist", key: e, value: a });
    } catch (r) {
      console.error(`Failed to postMessage for ${e}`, r);
    }
    return;
  }
  const n = Q_(e);
  if (lQ(
    () => gt.table(n).put({ key: e, value: t }).catch((a) => console.error(`Failed to persist ${e}`, a))
  ), typeof localStorage < "u" && e !== "price_list_cache" && !dQ.has(e))
    try {
      localStorage.setItem(`posa_${e}`, JSON.stringify(t));
    } catch (a) {
      console.error("Failed to persist", e, "to localStorage", a);
    }
}
const fm = new Promise((e) => {
  const t = async () => {
    try {
      await gt.open(), e();
    } catch (n) {
      console.error("Failed to initialize offline DB", n), e();
    }
  };
  typeof requestIdleCallback == "function" ? requestIdleCallback(t) : setTimeout(t, 0);
});
function Uh(e, t) {
  try {
    const n = xe.uom_cache;
    let a;
    try {
      a = JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize UOMs", r), a = [];
    }
    n[e] = a, xe.uom_cache = n, Tt("uom_cache", xe.uom_cache);
  } catch (n) {
    console.error("Failed to cache UOMs", n);
  }
}
function EA(e) {
  try {
    return (xe.uom_cache || {})[e] || [];
  } catch {
    return [];
  }
}
function hQ(e) {
  try {
    xe.offers_cache = e, Tt("offers_cache", xe.offers_cache);
  } catch (t) {
    console.error("Failed to cache offers", t);
  }
}
function PA() {
  try {
    return xe.offers_cache || [];
  } catch {
    return [];
  }
}
async function _Q(e, t) {
  try {
    if (!e) return;
    await ia(), gt.isOpen() || await gt.open();
    const n = t.map((a) => ({
      price_list: e,
      item_code: a.item_code,
      rate: a.rate,
      price_list_rate: a.price_list_rate || a.rate,
      timestamp: Date.now()
    }));
    await gt.table("item_prices").bulkPut(n);
  } catch (n) {
    console.error("Failed to save price list items", n);
  }
}
async function gD(e, t = 1440 * 60 * 1e3) {
  try {
    if (!e) return null;
    await ia(), gt.isOpen() || await gt.open();
    const n = Date.now(), a = await gt.table("item_prices").where("price_list").equals(e).toArray();
    if (!a.length) return null;
    const r = a.filter((d) => n - d.timestamp < t);
    if (!r.length) return null;
    const i = r.map((d) => d.item_code), o = await gt.table("items").where("item_code").anyOf(i).toArray(), l = new Map(o.map((d) => [d.item_code, d]));
    return r.map((d) => {
      const u = l.get(d.item_code);
      return u ? {
        ...u,
        rate: d.rate,
        price_list_rate: d.price_list_rate || d.rate
      } : null;
    }).filter(Boolean);
  } catch (n) {
    return console.error("Failed to get cached price list items", n), null;
  }
}
async function Uu(e = null) {
  try {
    await ia(), gt.isOpen() || await gt.open(), e ? await gt.table("item_prices").where("price_list").equals(e).delete() : await gt.table("item_prices").clear();
  } catch (t) {
    console.error("Failed to clear price list cache", t);
  }
}
function OA(e, t, n) {
  try {
    const a = xe.item_details_cache || {}, r = a[e] || {}, i = r[t] || {};
    let o;
    try {
      o = n.map((l) => ({
        item_code: l.item_code,
        actual_qty: l.actual_qty,
        has_batch_no: l.has_batch_no,
        has_serial_no: l.has_serial_no,
        item_uoms: l.item_uoms,
        batch_no_data: l.batch_no_data,
        serial_no_data: l.serial_no_data,
        rate: l.rate,
        price_list_rate: l.price_list_rate,
        currency: l.currency
      })), o = JSON.parse(JSON.stringify(o));
    } catch (l) {
      console.error("Failed to serialize item details", l), o = [];
    }
    o.forEach((l) => {
      i[l.item_code] = {
        data: l,
        timestamp: Date.now()
      };
    }), r[t] = i, a[e] = r, xe.item_details_cache = a, Tt("item_details_cache", xe.item_details_cache);
  } catch (a) {
    console.error("Failed to cache item details", a);
  }
}
async function DA(e, t, n, a = 900 * 1e3) {
  try {
    const i = (xe.item_details_cache || {})[e]?.[t] || {}, o = Date.now(), l = [], s = [];
    if (n.forEach((d) => {
      const u = i[d];
      u && o - u.timestamp < a ? l.push(u.data) : s.push(d);
    }), l.length) {
      await ia(), gt.isOpen() || await gt.open();
      const d = await gt.table("items").where("item_code").anyOf(l.map((f) => f.item_code)).toArray(), u = new Map(d.map((f) => [f.item_code, f]));
      l.forEach((f, h) => {
        const y = u.get(f.item_code) || {};
        l[h] = { ...y, ...f };
      });
    }
    return { cached: l, missing: s };
  } catch (r) {
    return console.error("Failed to get cached item details", r), { cached: [], missing: n };
  }
}
async function Kd(e) {
  try {
    await ia(), gt.isOpen() || await gt.open();
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (a) {
      console.error("Failed to serialize items", a), t = [];
    }
    t = t.map((a) => ({
      ...a,
      barcodes: Array.isArray(a.item_barcode) ? a.item_barcode.map((r) => r.barcode).filter(Boolean) : a.item_barcode ? [String(a.item_barcode)] : [],
      name_keywords: a.item_name ? a.item_name.toLowerCase().split(/\s+/).filter(Boolean) : [],
      serials: Array.isArray(a.serial_no_data) ? a.serial_no_data.map((r) => r.serial_no).filter(Boolean) : [],
      batches: Array.isArray(a.batch_no_data) ? a.batch_no_data.map((r) => r.batch_no).filter(Boolean) : []
    }));
    const n = 1e3;
    await gt.transaction("rw", gt.table("items"), async () => {
      for (let a = 0; a < t.length; a += n) {
        const r = t.slice(a, a + n);
        await gt.table("items").bulkPut(r);
      }
    });
  } catch (t) {
    console.error("Failed to save items", t);
  }
}
async function Ioe() {
  try {
    return await ia(), gt.isOpen() || await gt.open(), await gt.table("items").toArray();
  } catch (e) {
    return console.error("Failed to read stored items", e), [];
  }
}
async function vQ({ search: e = "", itemGroup: t = "", limit: n = 100, offset: a = 0 } = {}) {
  try {
    await ia(), gt.isOpen() || await gt.open();
    const r = e.toLowerCase();
    if (r) {
      let l = gt.table("items").where("item_code").startsWithIgnoreCase(r).or("item_name").startsWithIgnoreCase(r).or("barcodes").equalsIgnoreCase(r).or("name_keywords").startsWithIgnoreCase(r).or("serials").equalsIgnoreCase(r).or("batches").equalsIgnoreCase(r);
      if (t && t.toLowerCase() !== "all") {
        const f = t.toLowerCase();
        l = l.and((h) => h.item_group && h.item_group.toLowerCase() === f);
      }
      let s = await l.toArray();
      if (!s.length) {
        let f = gt.table("items");
        t && t.toLowerCase() !== "all" && (f = f.where("item_group").equalsIgnoreCase(t)), s = await f.filter((h) => {
          const y = h.item_name && h.item_name.toLowerCase().includes(r), p = h.item_code && h.item_code.toLowerCase().includes(r), w = Array.isArray(h.item_barcode) ? h.item_barcode.some((g) => g.barcode && g.barcode.toLowerCase() === r) : h.item_barcode && String(h.item_barcode).toLowerCase().includes(r), b = Array.isArray(h.serial_no_data) ? h.serial_no_data.some((g) => g.serial_no && g.serial_no.toLowerCase() === r) : Array.isArray(h.serials) ? h.serials.some((g) => g && g.toLowerCase() === r) : !1, v = Array.isArray(h.batch_no_data) ? h.batch_no_data.some((g) => g.batch_no && g.batch_no.toLowerCase() === r) : Array.isArray(h.batches) ? h.batches.some((g) => g && g.toLowerCase() === r) : !1;
          return y || p || w || b || v;
        }).toArray();
      }
      const d = /* @__PURE__ */ new Map();
      return s.forEach((f) => {
        d.has(f.item_code) || d.set(f.item_code, f);
      }), Array.from(d.values()).slice(a, a + n);
    }
    let i = gt.table("items");
    if (t && t.toLowerCase() !== "all" && (i = i.where("item_group").equalsIgnoreCase(t)), e) {
      const l = e.toLowerCase();
      i = i.filter((s) => {
        const d = s.item_name && s.item_name.toLowerCase().includes(l), u = s.item_code && s.item_code.toLowerCase().includes(l), f = Array.isArray(s.item_barcode) ? s.item_barcode.some((p) => p.barcode && p.barcode.toLowerCase() === l) : s.item_barcode && String(s.item_barcode).toLowerCase().includes(l), h = Array.isArray(s.serial_no_data) ? s.serial_no_data.some((p) => p.serial_no && p.serial_no.toLowerCase() === l) : Array.isArray(s.serials) ? s.serials.some((p) => p && p.toLowerCase() === l) : !1, y = Array.isArray(s.batch_no_data) ? s.batch_no_data.some((p) => p.batch_no && p.batch_no.toLowerCase() === l) : Array.isArray(s.batches) ? s.batches.some((p) => p && p.toLowerCase() === l) : !1;
        return d || u || f || h || y;
      });
    }
    return await i.offset(a).limit(n).toArray();
  } catch (r) {
    return console.error("Failed to query stored items", r), [];
  }
}
const zi = 1, Xs = 1e3, xe = {
  offline_invoices: [],
  offline_customers: [],
  offline_payments: [],
  pos_last_sync_totals: { pending: 0, synced: 0, drafted: 0 },
  uom_cache: {},
  offers_cache: [],
  customer_balance_cache: {},
  local_stock_cache: {},
  stock_cache_ready: !1,
  customer_storage: [],
  pos_opening_storage: null,
  opening_dialog_storage: null,
  sales_persons_storage: [],
  item_details_cache: {},
  tax_template_cache: {},
  translation_cache: {},
  coupons_cache: {},
  item_groups_cache: [],
  items_last_sync: null,
  customers_last_sync: null,
  // Track the current cache schema version
  cache_version: zi,
  cache_ready: !1,
  tax_inclusive: !1,
  manual_offline: !1,
  print_template: "",
  terms_and_conditions: ""
}, pu = (async () => {
  try {
    await ia();
    for (const n of Object.keys(xe)) {
      const a = await gt.table(Q_(n)).get(n);
      if (a && a.value !== void 0) {
        xe[n] = a.value;
        continue;
      }
      if (typeof localStorage < "u") {
        const r = localStorage.getItem(`posa_${n}`);
        if (r)
          try {
            xe[n] = JSON.parse(r);
            continue;
          } catch (i) {
            console.error("Failed to parse localStorage for", n, i);
          }
      }
    }
    const e = await gt.table(Q_("cache_version")).get("cache_version");
    let t = e ? e.value : null;
    if (!t && typeof localStorage < "u") {
      const n = localStorage.getItem("posa_cache_version");
      n && (t = parseInt(n, 10));
    }
    t !== zi ? (await J_(), xe.cache_version = zi, typeof localStorage < "u" && localStorage.setItem("posa_cache_version", zi), Tt("cache_version", zi)) : xe.cache_version = t || zi, xe.cache_ready = !0, Tt("cache_ready", !0);
  } catch (e) {
    console.error("Failed to initialize memory from DB", e);
  }
})();
function pQ() {
  xe.offline_invoices = [], xe.offline_customers = [], xe.offline_payments = [], xe.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, Tt("offline_invoices", xe.offline_invoices), Tt("offline_customers", xe.offline_customers), Tt("offline_payments", xe.offline_payments), Tt("pos_last_sync_totals", xe.pos_last_sync_totals);
}
function gQ() {
  Uu(), xe.item_details_cache = {}, xe.uom_cache = {}, xe.offers_cache = [], xe.customer_balance_cache = {}, xe.local_stock_cache = {}, xe.stock_cache_ready = !1, xe.coupons_cache = {}, xe.item_groups_cache = [], Tt("item_details_cache", xe.item_details_cache), Tt("uom_cache", xe.uom_cache), Tt("offers_cache", xe.offers_cache), Tt("customer_balance_cache", xe.customer_balance_cache), Tt("local_stock_cache", xe.local_stock_cache), Tt("stock_cache_ready", xe.stock_cache_ready), Tt("coupons_cache", xe.coupons_cache), Tt("item_groups_cache", xe.item_groups_cache);
}
async function Eoe() {
  try {
    return await ia(), gt.isOpen() || await gt.open(), await gt.table("items").toArray();
  } catch (e) {
    return console.error("Failed to get stored items", e), [];
  }
}
async function BA() {
  try {
    return await ia(), gt.isOpen() || await gt.open(), await gt.table("items").count();
  } catch (e) {
    return console.error("Failed to count stored items", e), 0;
  }
}
async function yQ(e) {
  try {
    await ia(), gt.isOpen() || await gt.open();
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize items", n), t = [];
    }
    await gt.table("items").bulkPut(t);
  } catch (t) {
    console.error("Failed to save items", t);
  }
}
async function $h() {
  try {
    await ia(), gt.isOpen() || await gt.open(), await gt.table("items").clear();
  } catch (e) {
    console.error("Failed to clear stored items", e);
  }
}
async function yD(e = 1 / 0, t = 0) {
  try {
    return await ia(), gt.isOpen() || await gt.open(), await gt.table("customers").offset(t).limit(e).toArray();
  } catch (n) {
    return console.error("Failed to get customers from storage", n), [];
  }
}
async function qh(e) {
  try {
    await ia(), gt.isOpen() || await gt.open();
    const t = e.map((a) => ({
      name: a.name,
      customer_name: a.customer_name,
      mobile_no: a.mobile_no,
      email_id: a.email_id,
      primary_address: a.primary_address,
      tax_id: a.tax_id
    })), n = 1e3;
    await gt.transaction("rw", gt.table("customers"), async () => {
      for (let a = 0; a < t.length; a += n) {
        const r = t.slice(a, a + n);
        await gt.table("customers").bulkPut(r);
      }
    });
  } catch (t) {
    console.error("Failed to set customer storage", t);
  }
}
async function VA() {
  try {
    return await ia(), gt.isOpen() || await gt.open(), await gt.table("customers").count();
  } catch (e) {
    return console.error("Failed to count customers", e), 0;
  }
}
async function bQ() {
  try {
    await ia(), gt.isOpen() || await gt.open(), await gt.table("customers").clear();
  } catch (e) {
    console.error("Failed to clear customer storage", e);
  }
}
function wQ() {
  return xe.items_last_sync || null;
}
function MA(e) {
  xe.items_last_sync = e, Tt("items_last_sync", xe.items_last_sync);
}
function Sy() {
  return xe.customers_last_sync || null;
}
function Hh(e) {
  xe.customers_last_sync = e, Tt("customers_last_sync", xe.customers_last_sync);
}
function LA() {
  return xe.sales_persons_storage || [];
}
function kQ(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize sales persons", n), t = [];
    }
    xe.sales_persons_storage = t, Tt("sales_persons_storage", xe.sales_persons_storage);
  } catch (t) {
    console.error("Failed to set sales persons storage", t);
  }
}
function $u() {
  return xe.pos_opening_storage || null;
}
function _1(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize opening storage", n), t = {};
    }
    xe.pos_opening_storage = t, Tt("pos_opening_storage", xe.pos_opening_storage);
  } catch (t) {
    console.error("Failed to set opening storage", t);
  }
}
function SQ() {
  try {
    xe.pos_opening_storage = null, Tt("pos_opening_storage", xe.pos_opening_storage);
  } catch (e) {
    console.error("Failed to clear opening storage", e);
  }
}
function CQ() {
  return xe.opening_dialog_storage || null;
}
function AQ(e) {
  try {
    let t;
    try {
      t = JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize opening dialog", n), t = {};
    }
    xe.opening_dialog_storage = t, Tt("opening_dialog_storage", xe.opening_dialog_storage);
  } catch (t) {
    console.error("Failed to set opening dialog storage", t);
  }
}
function xQ(e) {
  try {
    return (xe.tax_template_cache || {})[e] || null;
  } catch (t) {
    return console.error("Failed to get cached tax template", t), null;
  }
}
function TQ(e, t) {
  try {
    const n = xe.tax_template_cache || {};
    let a;
    try {
      a = JSON.parse(JSON.stringify(t));
    } catch (r) {
      console.error("Failed to serialize tax template", r), a = t ? { ...t } : {};
    }
    n[e] = a, xe.tax_template_cache = n, Tt("tax_template_cache", xe.tax_template_cache);
  } catch (n) {
    console.error("Failed to cache tax template", n);
  }
}
function IQ() {
  try {
    return xe.print_template || "";
  } catch (e) {
    return console.error("Failed to get print template", e), "";
  }
}
function EQ(e) {
  try {
    xe.print_template = e || "", Tt("print_template", xe.print_template);
  } catch (t) {
    console.error("Failed to set print template", t);
  }
}
function PQ() {
  try {
    return xe.terms_and_conditions || "";
  } catch (e) {
    return console.error("Failed to get terms and conditions", e), "";
  }
}
function OQ(e) {
  try {
    xe.terms_and_conditions = e || "", Tt("terms_and_conditions", xe.terms_and_conditions);
  } catch (t) {
    console.error("Failed to set terms and conditions", t);
  }
}
function Poe(e) {
  try {
    return (xe.translation_cache || {})[e] || null;
  } catch (t) {
    return console.error("Failed to get cached translations", t), null;
  }
}
function Ooe(e, t) {
  try {
    const n = xe.translation_cache || {};
    n[e] = t, xe.translation_cache = n, Tt("translation_cache", xe.translation_cache);
  } catch (n) {
    console.error("Failed to cache translations", n);
  }
}
function Cy(e) {
  xe.pos_last_sync_totals = e, Tt("pos_last_sync_totals", xe.pos_last_sync_totals);
}
function DQ() {
  return xe.pos_last_sync_totals;
}
function BQ() {
  return !!xe.tax_inclusive;
}
function Doe(e) {
  xe.tax_inclusive = !!e, Tt("tax_inclusive", xe.tax_inclusive);
}
function VQ() {
  return !!xe.cache_ready;
}
function Jo() {
  return xe.manual_offline || !1;
}
function MQ(e) {
  xe.manual_offline = !!e, Tt("manual_offline", xe.manual_offline);
}
function LQ() {
  MQ(!xe.manual_offline);
}
function RQ(e = Xs) {
  const t = (xe.offline_invoices || []).length > e, n = (xe.offline_customers || []).length > e, a = (xe.offline_payments || []).length > e;
  return t || n || a;
}
function FQ(e = Xs) {
  Array.isArray(xe.offline_invoices) && xe.offline_invoices.length > e && (xe.offline_invoices.splice(0, xe.offline_invoices.length - e), Tt("offline_invoices", xe.offline_invoices)), Array.isArray(xe.offline_customers) && xe.offline_customers.length > e && (xe.offline_customers.splice(0, xe.offline_customers.length - e), Tt("offline_customers", xe.offline_customers)), Array.isArray(xe.offline_payments) && xe.offline_payments.length > e && (xe.offline_payments.splice(0, xe.offline_payments.length - e), Tt("offline_payments", xe.offline_payments));
}
async function Boe() {
  try {
    await ia(), pD(), gt.isOpen() && await gt.close(), await Qi.delete("posawesome_offline"), await gt.open(), h1();
  } catch (e) {
    console.error("Failed to clear IndexedDB cache", e);
  }
  typeof localStorage < "u" && Object.keys(localStorage).forEach((e) => {
    e.startsWith("posa_") && localStorage.removeItem(e);
  }), xe.offline_invoices = [], xe.offline_customers = [], xe.offline_payments = [], xe.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, xe.uom_cache = {}, xe.offers_cache = [], xe.coupons_cache = {}, xe.customer_balance_cache = {}, xe.local_stock_cache = {}, xe.stock_cache_ready = !1, xe.customer_storage = [], xe.items_last_sync = null, xe.customers_last_sync = null, xe.pos_opening_storage = null, xe.opening_dialog_storage = null, xe.sales_persons_storage = [], xe.item_details_cache = {}, xe.tax_template_cache = {}, xe.item_groups_cache = [], xe.cache_version = zi, xe.tax_inclusive = !1, xe.manual_offline = !1, await Uu(), Tt("cache_version", zi);
}
async function J_() {
  pD(), typeof localStorage < "u" && Object.keys(localStorage).forEach((e) => {
    e.startsWith("posa_") && localStorage.removeItem(e);
  }), xe.offline_invoices = [], xe.offline_customers = [], xe.offline_payments = [], xe.pos_last_sync_totals = { pending: 0, synced: 0, drafted: 0 }, xe.uom_cache = {}, xe.offers_cache = [], xe.coupons_cache = {}, xe.customer_balance_cache = {}, xe.local_stock_cache = {}, xe.stock_cache_ready = !1, xe.customer_storage = [], xe.items_last_sync = null, xe.customers_last_sync = null, xe.pos_opening_storage = null, xe.opening_dialog_storage = null, xe.sales_persons_storage = [], xe.item_details_cache = {}, xe.tax_template_cache = {}, xe.item_groups_cache = [], xe.cache_version = zi, xe.tax_inclusive = !1, xe.manual_offline = !1, typeof localStorage < "u" && localStorage.setItem("posa_cache_version", zi), await Uu();
  try {
    await Qi.delete("posawesome_offline"), await gt.open(), h1();
  } catch (e) {
    console.error("Failed to clear IndexedDB cache", e);
  }
  Tt("cache_version", zi);
}
async function RA() {
  try {
    await ia();
    let e = 0;
    if (typeof localStorage < "u")
      for (let i = 0; i < localStorage.length; i++) {
        const o = localStorage.key(i);
        if (o && o.startsWith("posa_")) {
          const l = localStorage.getItem(o) || "";
          e += (o.length + l.length) * 2;
        }
      }
    let t = 0;
    try {
      if (gt.isOpen())
        for (const i of gt.tables) {
          const o = await cQ(i.name);
          t += o.reduce((l, s) => {
            const d = JSON.stringify(s).length * 2;
            return l + d;
          }, 0);
        }
    } catch (i) {
      console.error("Failed to calculate IndexedDB size", i);
    }
    const n = e + t, a = 50 * 1024 * 1024, r = Math.min(100, Math.round(n / a * 100));
    return {
      total: n,
      localStorage: e,
      indexedDB: t,
      percentage: r
    };
  } catch (e) {
    return console.error("Failed to estimate cache usage", e), {
      total: 0,
      localStorage: 0,
      indexedDB: 0,
      percentage: 0
    };
  }
}
async function NQ(e, t) {
  try {
    const n = xe.local_stock_cache || {}, a = Array.isArray(e) ? e.filter((i) => !n[i.item_code]) : [];
    if (a.length === 0)
      return xe.stock_cache_ready || (xe.stock_cache_ready = !0, Tt("stock_cache_ready", xe.stock_cache_ready)), console.debug("Stock cache already initialized"), console.info("Stock cache initialized with", Object.keys(n).length, "items"), !0;
    console.info("Initializing stock cache for", a.length, "new items");
    const r = await $Q(a, t);
    return r && r.length > 0 ? (r.forEach((i) => {
      i.actual_qty !== void 0 && (n[i.item_code] = {
        actual_qty: i.actual_qty,
        last_updated: (/* @__PURE__ */ new Date()).toISOString()
      });
    }), xe.local_stock_cache = n, xe.stock_cache_ready = !0, Tt("local_stock_cache", xe.local_stock_cache), Tt("stock_cache_ready", xe.stock_cache_ready), console.info("Stock cache initialized with", Object.keys(n).length, "items"), !0) : !1;
  } catch (n) {
    return console.error("Failed to initialize stock cache:", n), !1;
  }
}
function UQ() {
  return xe.stock_cache_ready || !1;
}
function Voe(e) {
  xe.stock_cache_ready = e, Tt("stock_cache_ready", xe.stock_cache_ready);
}
function Moe(e) {
  if (xe.pos_opening_storage?.stock_settings?.allow_negative_stock)
    return { isValid: !0, invalidItems: [], errorMessage: "" };
  const n = xe.local_stock_cache || {}, a = [];
  e.forEach((i) => {
    const o = i.item_code, l = Math.abs(i.qty || 0), s = n[o]?.actual_qty || 0;
    s - l < 0 && a.push({
      item_code: o,
      item_name: i.item_name || o,
      requested_qty: l,
      available_qty: s
    });
  });
  let r = "";
  if (a.length === 1) {
    const i = a[0];
    r = `Not enough stock for ${i.item_name}. You need ${i.requested_qty} but only ${i.available_qty} available.`;
  } else a.length > 1 && (r = `Insufficient stock for multiple items:
` + a.map((i) => `• ${i.item_name}: Need ${i.requested_qty}, Have ${i.available_qty}`).join(`
`));
  return {
    isValid: a.length === 0,
    invalidItems: a,
    errorMessage: r
  };
}
function bD(e) {
  try {
    const t = xe.local_stock_cache || {};
    e.forEach((n) => {
      const a = n.item_code;
      if (t[a]) {
        const r = Math.abs(n.qty || 0);
        t[a].actual_qty = Math.max(0, t[a].actual_qty - r), t[a].last_updated = (/* @__PURE__ */ new Date()).toISOString();
      }
    }), xe.local_stock_cache = t, Tt("local_stock_cache", xe.local_stock_cache);
  } catch (t) {
    console.error("Failed to update local stock", t);
  }
}
function FA(e) {
  try {
    return (xe.local_stock_cache || {})[e]?.actual_qty || null;
  } catch {
    return null;
  }
}
function Ay(e) {
  try {
    const t = xe.local_stock_cache || {};
    e.forEach((n) => {
      !n || !n.item_code || n.actual_qty !== void 0 && (t[n.item_code] = {
        actual_qty: n.actual_qty,
        last_updated: (/* @__PURE__ */ new Date()).toISOString()
      });
    }), xe.local_stock_cache = t, Tt("local_stock_cache", xe.local_stock_cache);
  } catch (t) {
    console.error("Failed to refresh local stock cache", t);
  }
}
function Loe() {
  xe.local_stock_cache = {}, Tt("local_stock_cache", xe.local_stock_cache);
}
async function $Q(e, t, n = 100) {
  const a = [];
  try {
    for (let r = 0; r < e.length; r += n) {
      const i = e.slice(r, r + n), o = await new Promise((l, s) => {
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items_details",
          args: {
            pos_profile: JSON.stringify(t),
            items_data: JSON.stringify(i)
          },
          freeze: !1,
          callback: function(d) {
            d.message ? l(d.message) : s(new Error("No response from server"));
          },
          error: function(d) {
            s(d);
          }
        });
      });
      o && a.push(...o);
    }
    return a;
  } catch (r) {
    return console.error("Failed to fetch item stock quantities:", r), null;
  }
}
function Roe(e, t) {
  try {
    const n = xe.local_stock_cache || {};
    e.forEach((a) => {
      const r = a.item_code, i = t.find((o) => o.item_code === a.item_code);
      if (i && i.actual_qty !== void 0) {
        n[r] ? (n[r].actual_qty = i.actual_qty, n[r].last_updated = (/* @__PURE__ */ new Date()).toISOString()) : n[r] = {
          actual_qty: i.actual_qty,
          last_updated: (/* @__PURE__ */ new Date()).toISOString()
        };
        const o = Math.abs(a.qty || 0);
        n[r].actual_qty = Math.max(0, n[r].actual_qty - o);
      }
    }), xe.local_stock_cache = n, Tt("local_stock_cache", xe.local_stock_cache);
  } catch (n) {
    console.error("Failed to update local stock with actual quantities", n);
  }
}
function qQ() {
  return xe.local_stock_cache || {};
}
function Foe(e) {
  xe.local_stock_cache = e || {}, Tt("local_stock_cache", xe.local_stock_cache);
}
let xy = !1;
function HQ(e) {
  if (!e.invoice || !Array.isArray(e.invoice.items) || !e.invoice.items.length)
    throw new Error("Cart is empty. Add items before saving.");
  const t = "offline_invoices", n = xe.offline_invoices;
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline invoice", r), r;
  }
  n.push(a), n.length > Xs && n.splice(0, n.length - Xs), xe.offline_invoices = n, Tt(t, xe.offline_invoices), e.invoice && e.invoice.items && bD(e.invoice.items);
}
function un() {
  if (typeof window > "u")
    return xe.manual_offline || !1;
  const { protocol: e, hostname: t, navigator: n } = window, a = n.onLine, r = typeof window.serverOnline == "boolean" ? window.serverOnline : !0, l = !/^(?:\d{1,3}\.){3}\d{1,3}$/.test(t) && !(t === "localhost" || t === "127.0.0.1");
  return xe.manual_offline ? !0 : !a || !r;
}
function wD() {
  return xe.offline_invoices;
}
function zQ() {
  xe.offline_invoices = [], Tt("offline_invoices", xe.offline_invoices);
}
function WQ(e) {
  Array.isArray(xe.offline_invoices) && e >= 0 && e < xe.offline_invoices.length && (xe.offline_invoices.splice(e, 1), Tt("offline_invoices", xe.offline_invoices));
}
function qs() {
  return xe.offline_invoices.length;
}
function NA(e) {
  const t = "offline_payments", n = xe.offline_payments;
  if (e?.args?.payload?.pos_profile) {
    const r = e.args.payload.pos_profile;
    e.args.payload.pos_profile = {
      posa_use_pos_awesome_payments: r.posa_use_pos_awesome_payments,
      posa_allow_make_new_payments: r.posa_allow_make_new_payments,
      posa_allow_reconcile_payments: r.posa_allow_reconcile_payments,
      posa_allow_mpesa_reconcile_payments: r.posa_allow_mpesa_reconcile_payments,
      posa_force_server_items: r.posa_force_server_items,
      cost_center: r.cost_center,
      posa_cash_mode_of_payment: r.posa_cash_mode_of_payment,
      name: r.name
    };
  }
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline payment", r), r;
  }
  n.push(a), n.length > Xs && n.splice(0, n.length - Xs), xe.offline_payments = n, Tt(t, xe.offline_payments);
}
function KQ() {
  return xe.offline_payments;
}
function jQ() {
  xe.offline_payments = [], Tt("offline_payments", xe.offline_payments);
}
function Noe(e) {
  Array.isArray(xe.offline_payments) && e >= 0 && e < xe.offline_payments.length && (xe.offline_payments.splice(e, 1), Tt("offline_payments", xe.offline_payments));
}
function YQ() {
  return xe.offline_payments.length;
}
function GQ(e) {
  const t = "offline_customers", n = xe.offline_customers;
  let a;
  try {
    a = JSON.parse(JSON.stringify(e));
  } catch (r) {
    throw console.error("Failed to serialize offline customer", r), r;
  }
  n.push(a), n.length > Xs && n.splice(0, n.length - Xs), xe.offline_customers = n, Tt(t, xe.offline_customers);
}
function QQ(e, t) {
  let n = !1;
  const a = xe.offline_invoices || [];
  a.forEach((r) => {
    r.invoice && r.invoice.customer === e && (r.invoice.customer = t, r.invoice.customer_name && (r.invoice.customer_name = t), n = !0);
  }), n && (xe.offline_invoices = a, Tt("offline_invoices", xe.offline_invoices));
}
function v1() {
  return xe.offline_customers;
}
function JQ() {
  xe.offline_customers = [], Tt("offline_customers", xe.offline_customers);
}
async function kD() {
  if (xy)
    return { pending: qs(), synced: 0, drafted: 0 };
  xy = !0;
  try {
    await SD();
    const e = wD();
    if (!e.length) {
      const o = { pending: 0, synced: 0, drafted: 0 };
      return Cy(o), o;
    }
    if (un())
      return { pending: e.length, synced: 0, drafted: 0 };
    const t = [];
    let n = 0, a = 0;
    for (const o of e)
      try {
        await frappe.call({
          method: "posawesome.posawesome.api.invoices.submit_invoice",
          args: {
            invoice: o.invoice,
            data: o.data
          }
        }), n++;
      } catch (l) {
        console.error("Failed to submit invoice, saving as draft", l);
        try {
          await frappe.call({
            method: "posawesome.posawesome.api.invoices.update_invoice",
            args: { data: o.invoice }
          }), a += 1;
        } catch (s) {
          console.error("Failed to save invoice as draft", s), t.push(o);
        }
      }
    n > 0 && pQ();
    const r = t.length;
    r ? (xe.offline_invoices = t, Tt("offline_invoices", xe.offline_invoices)) : (zQ(), n > 0 && a === 0 && gQ());
    const i = { pending: r, synced: n, drafted: a };
    return Cy(r || a ? i : { pending: 0, synced: 0, drafted: 0 }), i;
  } finally {
    xy = !1;
  }
}
async function SD() {
  const e = v1();
  if (!e.length)
    return { pending: 0, synced: 0 };
  if (un())
    return { pending: e.length, synced: 0 };
  const t = [];
  let n = 0;
  for (const a of e)
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.customers.create_customer",
        args: a.args
      });
      n++, r && r.message && r.message.name && r.message.name !== a.args.customer_name && QQ(a.args.customer_name, r.message.name);
    } catch (r) {
      console.error("Failed to create customer", r), t.push(a);
    }
  return t.length ? (xe.offline_customers = t, Tt("offline_customers", xe.offline_customers)) : JQ(), { pending: t.length, synced: n };
}
async function XQ() {
  await SD();
  const e = KQ();
  if (!e.length)
    return { pending: 0, synced: 0 };
  if (un())
    return { pending: e.length, synced: 0 };
  const t = [];
  let n = 0;
  for (const a of e)
    try {
      await frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: a.args
      }), n++;
    } catch (r) {
      console.error("Failed to submit payment", r), t.push(a);
    }
  return t.length ? (xe.offline_payments = t, Tt("offline_payments", xe.offline_payments)) : jQ(), { pending: t.length, synced: n };
}
function UA(e) {
  try {
    let t;
    try {
      t = typeof structuredClone == "function" ? structuredClone(e) : JSON.parse(JSON.stringify(e));
    } catch (n) {
      console.error("Failed to serialize item groups", n), t = [];
    }
    xe.item_groups_cache = t, Tt("item_groups_cache", xe.item_groups_cache);
  } catch (t) {
    console.error("Failed to cache item groups", t);
  }
}
function ZQ() {
  try {
    return xe.item_groups_cache || [];
  } catch (e) {
    return console.error("Failed to get cached item groups", e), [];
  }
}
function Uoe() {
  try {
    xe.item_groups_cache = [], Tt("item_groups_cache", xe.item_groups_cache);
  } catch (e) {
    console.error("Failed to clear item groups cache", e);
  }
}
function eJ(e, t) {
  try {
    const n = xe.customer_balance_cache;
    n[e] = {
      balance: t,
      timestamp: Date.now()
    }, xe.customer_balance_cache = n, Tt("customer_balance_cache", xe.customer_balance_cache);
  } catch (n) {
    console.error("Failed to cache customer balance", n);
  }
}
function $A(e) {
  try {
    const n = (xe.customer_balance_cache || {})[e];
    return n && Date.now() - n.timestamp < 864e5 ? n.balance : null;
  } catch (t) {
    return console.error("Failed to get cached customer balance", t), null;
  }
}
function $oe() {
  try {
    xe.customer_balance_cache = {}, Tt("customer_balance_cache", xe.customer_balance_cache);
  } catch (e) {
    console.error("Failed to clear customer balance cache", e);
  }
}
function tJ() {
  try {
    const e = xe.customer_balance_cache || {}, t = Date.now(), n = {};
    Object.keys(e).forEach((a) => {
      const r = e[a];
      r && t - r.timestamp < 1440 * 60 * 1e3 && (n[a] = r);
    }), xe.customer_balance_cache = n, Tt("customer_balance_cache", xe.customer_balance_cache);
  } catch (e) {
    console.error("Failed to clear expired customer balances", e);
  }
}
const nJ = {
  name: "OfflineInvoicesDialog",
  mixins: [Bi],
  props: {
    modelValue: Boolean,
    posProfile: {
      type: Object,
      default: () => ({})
    }
  },
  emits: ["update:modelValue", "deleted", "sync-all"],
  data() {
    return {
      dialog: this.modelValue,
      invoices: [],
      headers: [
        {
          title: this.__("Customer"),
          value: "customer",
          align: "start",
          width: "35%"
        },
        {
          title: this.__("Date"),
          value: "posting_date",
          align: "center",
          width: "20%"
        },
        {
          title: this.__("Amount"),
          value: "grand_total",
          align: "end",
          width: "25%"
        },
        {
          title: this.__("Actions"),
          value: "actions",
          align: "center",
          width: "20%",
          sortable: !1
        }
      ]
    };
  },
  watch: {
    modelValue(e) {
      this.dialog = e, e && this.loadInvoices();
    },
    dialog(e) {
      this.$emit("update:modelValue", e);
    }
  },
  methods: {
    loadInvoices() {
      this.invoices = wD();
    },
    removeInvoice(e) {
      this.posProfile.posa_allow_delete_offline_invoice && (WQ(e), this.loadInvoices(), this.$emit("deleted", qs()));
    }
  }
}, aJ = { class: "header-content" }, rJ = { class: "header-icon-wrapper" }, iJ = { class: "header-text" }, oJ = { class: "header-title" }, sJ = { class: "header-subtitle" }, lJ = { class: "header-stats" }, cJ = {
  key: 0,
  class: "empty-state text-center py-12"
}, uJ = { class: "empty-icon-wrapper mb-4" }, dJ = { class: "text-h5 mb-3 text-grey-darken-2 font-weight-medium" }, fJ = { class: "text-body-1 text-grey-darken-1 mb-0" }, mJ = {
  key: 1,
  class: "table-container"
}, hJ = { class: "table-header mb-4" }, _J = { class: "text-h6 text-grey-darken-2 mb-1" }, vJ = { class: "text-body-2 text-grey" }, pJ = { class: "customer-cell" }, gJ = { class: "font-weight-medium text-grey-darken-2" }, yJ = { class: "text-caption text-grey" }, bJ = { class: "amount-cell text-right" }, wJ = { class: "text-h6 font-weight-bold text-success" }, kJ = { class: "text-caption text-grey" };
function SJ(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-chip"), s = J("v-spacer"), d = J("v-card-title"), u = J("v-divider"), f = J("v-avatar"), h = J("v-tooltip"), y = J("v-btn"), p = J("v-data-table"), w = J("v-container"), b = J("v-card-text"), v = J("v-card-actions"), g = J("v-card"), k = J("v-dialog"), A = J("v-row");
  return te(), Le(A, { justify: "center" }, {
    default: E(() => [
      _(k, {
        modelValue: r.dialog,
        "onUpdate:modelValue": t[2] || (t[2] = (C) => r.dialog = C),
        "max-width": "1000px",
        persistent: ""
      }, {
        default: E(() => [
          _(g, { class: "pos-card offline-invoices-card" }, {
            default: E(() => [
              _(d, { class: "offline-header pa-6" }, {
                default: E(() => [
                  T("div", aJ, [
                    T("div", rJ, [
                      _(o, {
                        class: "header-icon",
                        size: "40"
                      }, {
                        default: E(() => t[3] || (t[3] = [
                          ae("mdi-file-document-multiple", -1)
                        ])),
                        _: 1,
                        __: [3]
                      })
                    ]),
                    T("div", iJ, [
                      T("h3", oJ, j(e.__("Offline Invoices")), 1),
                      T("p", sJ, j(e.__("Manage your offline transactions")), 1),
                      T("div", lJ, [
                        r.invoices.length > 0 ? (te(), Le(l, {
                          key: 0,
                          color: "primary",
                          variant: "flat",
                          size: "small",
                          class: "status-chip mr-2"
                        }, {
                          default: E(() => [
                            _(o, {
                              start: "",
                              size: "14"
                            }, {
                              default: E(() => t[4] || (t[4] = [
                                ae("mdi-clock-outline", -1)
                              ])),
                              _: 1,
                              __: [4]
                            }),
                            ae(" " + j(r.invoices.length) + " " + j(e.__("Pending")), 1)
                          ]),
                          _: 1
                        })) : (te(), Le(l, {
                          key: 1,
                          color: "success",
                          variant: "flat",
                          size: "small",
                          class: "status-chip"
                        }, {
                          default: E(() => [
                            _(o, {
                              start: "",
                              size: "14"
                            }, {
                              default: E(() => t[5] || (t[5] = [
                                ae("mdi-check-circle", -1)
                              ])),
                              _: 1,
                              __: [5]
                            }),
                            ae(" " + j(e.__("All Synced")), 1)
                          ]),
                          _: 1
                        }))
                      ])
                    ])
                  ]),
                  _(s)
                ]),
                _: 1
              }),
              _(u, { class: "header-divider" }),
              _(b, { class: "pa-0 white-background" }, {
                default: E(() => [
                  _(w, {
                    fluid: "",
                    class: "pa-6"
                  }, {
                    default: E(() => [
                      r.invoices.length ? (te(), Oe("div", mJ, [
                        T("div", hJ, [
                          T("h4", _J, j(e.__("Pending Invoices")), 1),
                          T("p", vJ, j(e.__("These invoices will be synced when connection is restored")), 1)
                        ]),
                        _(p, {
                          headers: r.headers,
                          items: r.invoices,
                          class: "elevation-0 rounded-lg white-table",
                          "items-per-page": 15,
                          "items-per-page-options": [15, 25, 50]
                        }, {
                          "item.customer": E(({ item: C }) => [
                            T("div", pJ, [
                              _(f, {
                                size: "32",
                                color: "primary",
                                class: "mr-3"
                              }, {
                                default: E(() => [
                                  _(o, {
                                    size: "18",
                                    color: "white"
                                  }, {
                                    default: E(() => t[7] || (t[7] = [
                                      ae("mdi-account", -1)
                                    ])),
                                    _: 1,
                                    __: [7]
                                  })
                                ]),
                                _: 1
                              }),
                              T("div", null, [
                                T("div", gJ, j(C.invoice.customer_name || C.invoice.customer), 1),
                                T("div", yJ, j(e.__("Customer")), 1)
                              ])
                            ])
                          ]),
                          "item.posting_date": E(({ item: C }) => [
                            _(l, {
                              size: "small",
                              color: "info",
                              variant: "tonal",
                              class: "date-chip"
                            }, {
                              default: E(() => [
                                _(o, {
                                  start: "",
                                  size: "14"
                                }, {
                                  default: E(() => t[8] || (t[8] = [
                                    ae("mdi-calendar", -1)
                                  ])),
                                  _: 1,
                                  __: [8]
                                }),
                                ae(" " + j(C.invoice.posting_date), 1)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          "item.grand_total": E(({ item: C }) => [
                            T("div", bJ, [
                              T("div", wJ, j(e.currencySymbol(C.invoice.currency)) + " " + j(e.formatCurrency(
                                C.invoice.grand_total || C.invoice.rounded_total
                              )), 1),
                              T("div", kJ, j(e.__("Total Amount")), 1)
                            ])
                          ]),
                          "item.actions": E(({ index: C }) => [
                            n.posProfile.posa_allow_delete_offline_invoice ? (te(), Le(y, {
                              key: 0,
                              icon: "",
                              color: "error",
                              size: "small",
                              variant: "text",
                              onClick: (D) => i.removeInvoice(C),
                              class: "delete-btn"
                            }, {
                              default: E(() => [
                                _(o, { size: "18" }, {
                                  default: E(() => t[9] || (t[9] = [
                                    ae("mdi-delete-outline", -1)
                                  ])),
                                  _: 1,
                                  __: [9]
                                }),
                                _(h, {
                                  activator: "parent",
                                  location: "top"
                                }, {
                                  default: E(() => [
                                    ae(j(e.__("Delete Invoice")), 1)
                                  ]),
                                  _: 1
                                })
                              ]),
                              _: 2
                            }, 1032, ["onClick"])) : ke("", !0)
                          ]),
                          _: 1
                        }, 8, ["headers", "items"])
                      ])) : (te(), Oe("div", cJ, [
                        T("div", uJ, [
                          _(o, {
                            size: "80",
                            color: "success",
                            class: "empty-icon"
                          }, {
                            default: E(() => t[6] || (t[6] = [
                              ae("mdi-check-circle-outline", -1)
                            ])),
                            _: 1,
                            __: [6]
                          })
                        ]),
                        T("h3", dJ, j(e.__("All Caught Up!")), 1),
                        T("p", fJ, j(e.__("No offline invoices pending synchronization")), 1)
                      ]))
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(u),
              _(v, { class: "dialog-actions-container" }, {
                default: E(() => [
                  r.invoices.length > 0 ? (te(), Le(y, {
                    key: 0,
                    theme: "dark",
                    variant: "elevated",
                    "prepend-icon": "mdi-sync",
                    onClick: t[0] || (t[0] = (C) => e.$emit("sync-all")),
                    class: "pos-action-btn sync-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: E(() => [
                      ae(j(e.__("Sync All")), 1)
                    ]),
                    _: 1
                  })) : ke("", !0),
                  _(s),
                  _(y, {
                    color: "error",
                    variant: "flat",
                    onClick: t[1] || (t[1] = (C) => r.dialog = !1),
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: E(() => [
                      _(o, { start: "" }, {
                        default: E(() => t[10] || (t[10] = [
                          ae("mdi-close-circle-outline", -1)
                        ])),
                        _: 1,
                        __: [10]
                      }),
                      T("span", null, j(e.__("Close")), 1)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const CJ = /* @__PURE__ */ on(nJ, [["render", SJ]]);
function AJ(e = 1e3, t = 60) {
  const n = be(0), a = be([]), r = be([]), i = be(0), o = Zn({
    cores: navigator.hardwareConcurrency || 1,
    gbMemory: navigator.deviceMemory || void 0
  });
  let l = null, s = performance.now(), d = null;
  function u() {
    const w = performance.now(), b = w - s - e;
    n.value = Math.max(0, b), s = w, a.value.push(n.value), a.value.length > t && a.value.shift();
  }
  function f() {
    performance.memory && (i.value = performance.memory.usedJSHeapSize);
  }
  function h() {
    s = performance.now(), l = window.setInterval(() => {
      u(), f();
    }, e), window.PerformanceObserver && PerformanceObserver.supportedEntryTypes.includes("longtask") && (d = new PerformanceObserver((w) => {
      r.value.push(...w.getEntries()), r.value.length > t && r.value.splice(0, r.value.length - t);
    }), d.observe({ entryTypes: ["longtask"] }));
  }
  function y() {
    l !== null && (clearInterval(l), l = null), d && (d.disconnect(), d = null);
  }
  const p = () => {
    document.hidden ? y() : h();
  };
  return document.addEventListener("visibilitychange", p), _i(() => {
    y(), document.removeEventListener("visibilitychange", p);
  }), h(), {
    cpuLag: n,
    history: a,
    longTasks: r,
    memoryUsage: i,
    device: o,
    stop: y
  };
}
function xJ(e = 1e4, t = 60) {
  const n = be(null), a = be(null), r = be(null), i = be(null), o = be(null), l = be([]), s = be(!0), d = be(null);
  let u = null;
  async function f() {
    s.value = !0, d.value = null;
    try {
      const h = await frappe.call({
        method: "posawesome.posawesome.api.utilities.get_server_usage"
      });
      if (h && h.message) {
        n.value = h.message.cpu_percent, a.value = h.message.memory_percent, r.value = h.message.memory_total, i.value = h.message.memory_used, o.value = h.message.memory_available;
        const y = h.message.uptime;
        l.value.push({
          cpu: n.value,
          memory: a.value,
          memoryTotal: r.value,
          memoryUsed: i.value,
          memoryAvailable: o.value,
          uptime: y
        }), l.value.length > t && l.value.shift();
      } else
        d.value = "No data from server";
    } catch (h) {
      d.value = h.message || h;
    } finally {
      s.value = !1;
    }
  }
  return f(), u = window.setInterval(f, e), _i(() => {
    u && clearInterval(u);
  }), { cpu: n, memory: a, memoryTotal: r, memoryUsed: i, memoryAvailable: o, history: l, loading: s, error: d };
}
const TJ = { class: "cpu-gadget-section mx-1" }, IJ = { class: "cpu-current-lag" }, EJ = { class: "cpu-tooltip-content" }, PJ = { class: "cpu-tooltip-title" }, OJ = { class: "cpu-tooltip-section-title mb-1" }, DJ = { class: "cpu-tooltip-peak mb-1" }, BJ = { class: "cpu-tooltip-sparkline mb-2" }, VJ = {
  width: 180,
  height: 40,
  class: "cpu-sparkline-large"
}, MJ = ["points"], LJ = ["points"], RJ = { class: "cpu-tooltip-detail" }, FJ = {
  key: 0,
  class: "cpu-tooltip-warning"
}, NJ = {
  key: 1,
  class: "cpu-tooltip-detail"
}, UJ = {
  key: 2,
  class: "cpu-tooltip-warning"
}, $J = { key: 3 }, qJ = { class: "cpu-tooltip-detail" }, HJ = { class: "ml-2" }, zJ = { class: "cpu-tooltip-detail" }, WJ = { class: "ml-2" }, KJ = { class: "cpu-tooltip-bar" }, jJ = { class: "cpu-bar-bg" }, YJ = { class: "cpu-bar-label" }, GJ = { class: "cpu-tooltip-detail" }, QJ = { class: "ml-2" }, JJ = { class: "ml-2" }, XJ = { class: "cpu-tooltip-detail" }, ZJ = { class: "cpu-tooltip-section-title mb-1" }, eX = { class: "cpu-tooltip-detail" }, tX = { class: "cpu-tooltip-detail" }, nX = { class: "cpu-tooltip-detail" }, aX = {
  key: 0,
  class: "ml-2"
}, rX = { class: "cpu-tooltip-tip mt-2" }, iX = { class: "cpu-tooltip-explanation mt-2" }, oX = { class: "cpu-tooltip-action mt-2" }, sX = /* @__PURE__ */ za({
  __name: "ServerUsageGadget",
  setup(e) {
    const { cpuLag: t, history: n, memoryUsage: a, device: r } = AJ(1e3, 60), i = Gt("__", (I) => I), {
      cpu: o,
      memory: l,
      memoryTotal: s,
      memoryUsed: d,
      memoryAvailable: u,
      history: f,
      loading: h,
      error: y
    } = xJ(1e4, 60), p = W(() => Math.max(...f.value.map((I) => I.cpu ?? 0), 0)), w = W(() => Math.max(...f.value.map((I) => I.memory ?? 0), 0)), b = be(null);
    tt(
      f,
      (I) => {
        I.length && I[I.length - 1].uptime != null && (b.value = I[I.length - 1].uptime);
      },
      { immediate: !0, deep: !0 }
    );
    function v(I) {
      if (I == null) return "N/A";
      const x = Math.floor(I / (3600 * 24)), M = Math.floor(I % (3600 * 24) / 3600), V = Math.floor(I % 3600 / 60);
      let B = "";
      return x > 0 && (B += `${x}d `), (M > 0 || x > 0) && (B += `${M}h `), B += `${V}m`, B.trim();
    }
    function g(I) {
      return I == null ? "N/A" : I < 1024 ? `${I} B` : I < 1024 * 1024 ? `${(I / 1024).toFixed(1)} KB` : I < 1024 * 1024 * 1024 ? `${(I / 1024 / 1024).toFixed(1)} MB` : `${(I / 1024 / 1024 / 1024).toFixed(2)} GB`;
    }
    function k(I, x, M) {
      if (!I.length) return "";
      const V = Math.max(...I, 100), B = 0, F = I.length > 1 ? x / (I.length - 1) : x;
      return I.map((H, K) => `${K * F},${M - (H - B) / (V - B || 1) * M}`).join(" ");
    }
    function A(I, x, M) {
      if (!I.length) return "";
      const V = Math.max(...I, 100), B = 0, F = I.length > 1 ? x / (I.length - 1) : x;
      let H = I.map((K, Z) => `${Z * F},${M - (K - B) / (V - B || 1) * M}`).join(" ");
      return H += ` ${x},${M} 0,${M}`, H;
    }
    const C = W(() => k(n.value, 180, 40)), D = W(() => A(n.value, 180, 40)), P = W(() => Math.max(...n.value, 0)), O = W(() => Math.round(Math.min(P.value, 100)));
    return (I, x) => {
      const M = J("v-icon"), V = J("v-divider"), B = J("v-tooltip");
      return te(), Oe("div", TJ, [
        _(B, { location: "bottom" }, {
          activator: E(({ props: F }) => [
            T("div", Fe(F, { class: "cpu-meter-container" }), [
              _(M, {
                size: "22",
                color: "primary"
              }, {
                default: E(() => x[0] || (x[0] = [
                  ae("mdi-server", -1)
                ])),
                _: 1,
                __: [0]
              }),
              T("span", IJ, j(fe(t).toFixed(1)) + " ms", 1)
            ], 16)
          ]),
          default: E(() => [
            T("div", EJ, [
              T("div", PJ, [
                _(M, {
                  size: "16",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => x[1] || (x[1] = [
                    ae("mdi-server", -1)
                  ])),
                  _: 1,
                  __: [1]
                }),
                ae(" " + j(fe(i)("Server Health")), 1)
              ]),
              _(V, { class: "my-2" }),
              T("div", OJ, j(fe(i)("Server Metrics")), 1),
              T("div", DJ, [
                _(M, {
                  size: "14",
                  color: "success",
                  class: "mr-1"
                }, {
                  default: E(() => x[2] || (x[2] = [
                    ae("mdi-arrow-up-bold", -1)
                  ])),
                  _: 1,
                  __: [2]
                }),
                ae(" " + j(fe(i)("Peak:")) + " ", 1),
                T("b", null, j(P.value.toFixed(1)) + " ms", 1),
                ae(" (" + j(O.value) + "%) ", 1)
              ]),
              T("div", BJ, [
                (te(), Oe("svg", VJ, [
                  x[3] || (x[3] = T("defs", null, [
                    T("linearGradient", {
                      id: "cpuAreaGradient",
                      x1: "0",
                      y1: "0",
                      x2: "0",
                      y2: "1"
                    }, [
                      T("stop", {
                        offset: "0%",
                        "stop-color": "#4caf50",
                        "stop-opacity": "0.35"
                      }),
                      T("stop", {
                        offset: "100%",
                        "stop-color": "#4caf50",
                        "stop-opacity": "0"
                      })
                    ])
                  ], -1)),
                  T("polyline", {
                    points: C.value,
                    fill: "none",
                    stroke: "#4caf50",
                    "stroke-width": "2"
                  }, null, 8, MJ),
                  T("polygon", {
                    points: D.value,
                    fill: "url(#cpuAreaGradient)",
                    stroke: "none"
                  }, null, 8, LJ)
                ]))
              ]),
              T("div", RJ, [
                _(M, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => x[4] || (x[4] = [
                    ae("mdi-chip", -1)
                  ])),
                  _: 1,
                  __: [4]
                }),
                ae(" " + j(fe(i)("Current Event Loop Lag:")) + " ", 1),
                T("b", null, j(fe(t).toFixed(1)), 1),
                x[5] || (x[5] = ae(" ms ", -1))
              ]),
              fe(t) >= 80 ? (te(), Oe("div", FJ, [
                _(M, {
                  size: "14",
                  color: "error",
                  class: "mr-1"
                }, {
                  default: E(() => x[6] || (x[6] = [
                    ae("mdi-alert", -1)
                  ])),
                  _: 1,
                  __: [6]
                }),
                ae(" " + j(fe(i)("Warning: High lag may indicate heavy processing or browser slowness.")), 1)
              ])) : ke("", !0),
              fe(h) ? (te(), Oe("div", NJ, j(fe(i)("Loading server CPU/memory usage...")), 1)) : fe(y) ? (te(), Oe("div", UJ, j(fe(y)), 1)) : (te(), Oe("div", $J, [
                T("div", qJ, [
                  _(M, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: E(() => x[7] || (x[7] = [
                      ae("mdi-chip", -1)
                    ])),
                    _: 1,
                    __: [7]
                  }),
                  ae(" " + j(fe(i)("Server CPU Usage:")) + " ", 1),
                  T("b", null, j(fe(o) !== null ? fe(o).toFixed(1) + "%" : "N/A"), 1),
                  T("span", HJ, [
                    ae(j(fe(i)("Peak Server:")) + " ", 1),
                    T("b", null, j(p.value.toFixed(1)) + "%", 1)
                  ])
                ]),
                T("div", zJ, [
                  _(M, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: E(() => x[8] || (x[8] = [
                      ae("mdi-memory", -1)
                    ])),
                    _: 1,
                    __: [8]
                  }),
                  ae(" " + j(fe(i)("Server Memory Usage:")) + " ", 1),
                  T("b", null, j(fe(l) !== null ? fe(l).toFixed(1) + "%" : "N/A"), 1),
                  T("span", WJ, [
                    ae(j(fe(i)("Peak Memory:")) + " ", 1),
                    T("b", null, j(w.value.toFixed(1)) + "%", 1)
                  ])
                ]),
                T("div", KJ, [
                  T("div", jJ, [
                    T("div", {
                      class: "cpu-bar-fill",
                      style: Je({
                        width: (fe(l) || 0) + "%",
                        background: "linear-gradient(90deg,#1976d2 0%,#42a5f5 100%)"
                      })
                    }, null, 4)
                  ]),
                  T("span", YJ, j(fe(l) !== null ? fe(l).toFixed(1) + "%" : "N/A"), 1)
                ]),
                T("div", GJ, [
                  _(M, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: E(() => x[9] || (x[9] = [
                      ae("mdi-database", -1)
                    ])),
                    _: 1,
                    __: [9]
                  }),
                  ae(" " + j(fe(i)("Total:")) + " ", 1),
                  T("b", null, j(g(fe(s))), 1),
                  T("span", QJ, [
                    ae(j(fe(i)("Used:")) + " ", 1),
                    T("b", null, j(g(fe(d))), 1)
                  ]),
                  T("span", JJ, [
                    ae(j(fe(i)("Available:")) + " ", 1),
                    T("b", null, j(g(fe(u))), 1)
                  ])
                ]),
                T("div", XJ, [
                  _(M, {
                    size: "14",
                    color: "primary",
                    class: "mr-1"
                  }, {
                    default: E(() => x[10] || (x[10] = [
                      ae("mdi-timer-outline", -1)
                    ])),
                    _: 1,
                    __: [10]
                  }),
                  ae(" " + j(fe(i)("Server Uptime:")) + " ", 1),
                  T("b", null, j(v(b.value)), 1)
                ])
              ])),
              _(V, { class: "my-2" }),
              T("div", ZJ, j(fe(i)("Client Metrics")), 1),
              T("div", eX, [
                _(M, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => x[11] || (x[11] = [
                    ae("mdi-monitor", -1)
                  ])),
                  _: 1,
                  __: [11]
                }),
                ae(" " + j(fe(i)("Client CPU Lag:")) + " ", 1),
                T("b", null, j(fe(t).toFixed(1)), 1),
                x[12] || (x[12] = ae(" ms ", -1))
              ]),
              T("div", tX, [
                _(M, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => x[13] || (x[13] = [
                    ae("mdi-memory", -1)
                  ])),
                  _: 1,
                  __: [13]
                }),
                ae(" " + j(fe(i)("Client Memory Usage:")) + " ", 1),
                T("b", null, j(g(fe(a))), 1)
              ]),
              T("div", nX, [
                _(M, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => x[14] || (x[14] = [
                    ae("mdi-chip", -1)
                  ])),
                  _: 1,
                  __: [14]
                }),
                ae(" " + j(fe(i)("CPU Cores:")) + " ", 1),
                T("b", null, j(fe(r).cores), 1),
                fe(r).gbMemory ? (te(), Oe("span", aX, [
                  ae(j(fe(i)("Device Memory:")) + " ", 1),
                  T("b", null, j(fe(r).gbMemory) + " GB", 1)
                ])) : ke("", !0)
              ]),
              _(V, { class: "my-2" }),
              T("div", rX, [
                _(M, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => x[15] || (x[15] = [
                    ae("mdi-lightbulb-on-outline", -1)
                  ])),
                  _: 1,
                  __: [15]
                }),
                ae(" " + j(fe(i)("Tip: Close unused tabs or apps to reduce lag.")), 1)
              ]),
              T("div", iX, [
                _(M, {
                  size: "14",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: E(() => x[16] || (x[16] = [
                    ae("mdi-chip", -1)
                  ])),
                  _: 1,
                  __: [16]
                }),
                ae(" " + j(fe(i)("Event-loop lag measures how busy your browser is. Lower is better.")), 1)
              ]),
              T("div", oX, [
                _(M, {
                  size: "14",
                  class: "mr-1"
                }, {
                  default: E(() => x[17] || (x[17] = [
                    ae("mdi-refresh", -1)
                  ])),
                  _: 1,
                  __: [17]
                }),
                ae(" " + j(fe(i)("Updates automatically")), 1)
              ])
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
}), lX = /* @__PURE__ */ on(sX, [["__scopeId", "data-v-70efd328"]]);
function cX(e = 1e4, t = 60) {
  const n = be(null), a = be([]), r = be(!0), i = be(null);
  let o = null;
  async function l() {
    r.value = !0, i.value = null;
    try {
      const s = await frappe.call({
        method: "posawesome.posawesome.api.utilities.get_database_usage"
      });
      s && s.message ? (n.value = s.message, a.value.push(s.message), a.value.length > t && a.value.shift()) : i.value = "No data from server";
    } catch (s) {
      i.value = s.message || s;
    } finally {
      r.value = !1;
    }
  }
  return l(), o = window.setInterval(l, e), _i(() => {
    o && clearInterval(o);
  }), { dbStats: n, history: a, loading: r, error: i };
}
const uX = { class: "db-gadget-section mx-1" }, dX = { class: "db-current-size" }, fX = { class: "db-tooltip-content p-3 min-w-[220px]" }, mX = { class: "db-tooltip-title flex items-center font-semibold text-[14px] mb-2" }, hX = {
  key: 0,
  class: "db-tooltip-detail"
}, _X = {
  key: 1,
  class: "db-tooltip-warning"
}, vX = { key: 2 }, pX = { class: "db-tooltip-section-title mb-1" }, gX = { class: "db-tooltip-sparkline mb-2" }, yX = {
  width: 120,
  height: 32,
  class: "db-sparkline"
}, bX = ["points"], wX = { class: "db-tooltip-detail flex items-center mb-1" }, kX = { class: "ml-2" }, SX = { class: "db-tooltip-section-title mb-1" }, CX = { class: "db-tooltip-detail flex items-center mb-1" }, AX = { class: "ml-2 flex items-center" }, xX = { class: "ml-2 flex items-center" }, TX = { class: "db-tooltip-detail flex items-center mb-1" }, IX = { class: "ml-2 flex items-center" }, EX = { key: 0 }, PX = { class: "db-tooltip-section-title mb-1 flex items-center" }, OX = { class: "db-top-tables ml-2" }, DX = { class: "db-tooltip-tip mt-2 flex items-center" }, BX = { class: "db-tooltip-explanation mt-2 flex items-center" }, VX = {
  __name: "DatabaseUsageGadget",
  setup(e) {
    const { dbStats: t, history: n, loading: a, error: r } = cX(1e4, 30), i = Gt("__", (d) => d), o = W(() => l(t.value?.db_size));
    function l(d) {
      return d == null ? "N/A" : d < 1024 ? `${d} B` : d < 1024 * 1024 ? `${(d / 1024).toFixed(1)} KB` : d < 1024 * 1024 * 1024 ? `${(d / 1024 / 1024).toFixed(1)} MB` : `${(d / 1024 / 1024 / 1024).toFixed(2)} GB`;
    }
    const s = W(() => {
      const d = n.value.map((w) => w.db_size || 0), u = 120, f = 32;
      if (!d.length) return "";
      const h = Math.max(...d, 100), y = 0, p = d.length > 1 ? u / (d.length - 1) : u;
      return d.map((w, b) => `${b * p},${f - (w - y) / (h - y || 1) * f}`).join(" ");
    });
    return (d, u) => {
      const f = J("v-icon"), h = J("v-divider"), y = J("v-tooltip");
      return te(), Oe("div", uX, [
        _(y, { location: "bottom" }, {
          activator: E(({ props: p }) => [
            T("div", Fe(p, { class: "db-meter-container" }), [
              _(f, {
                size: "22",
                color: "info"
              }, {
                default: E(() => u[0] || (u[0] = [
                  ae("mdi-database", -1)
                ])),
                _: 1,
                __: [0]
              }),
              T("span", dX, j(o.value), 1)
            ], 16)
          ]),
          default: E(() => [
            T("div", fX, [
              T("div", mX, [
                _(f, {
                  size: "16",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: E(() => u[1] || (u[1] = [
                    ae("mdi-database-settings", -1)
                  ])),
                  _: 1,
                  __: [1]
                }),
                ae(" " + j(fe(i)("Database Health")), 1)
              ]),
              _(h, { class: "my-2" }),
              fe(a) ? (te(), Oe("div", hX, j(fe(i)("Loading database stats...")), 1)) : fe(r) ? (te(), Oe("div", _X, j(fe(r)), 1)) : (te(), Oe("div", vX, [
                T("div", pX, j(fe(i)("Database Info")), 1),
                T("div", gX, [
                  (te(), Oe("svg", yX, [
                    T("polyline", {
                      points: s.value,
                      fill: "none",
                      stroke: "#1976d2",
                      "stroke-width": "2"
                    }, null, 8, bX)
                  ]))
                ]),
                T("div", wX, [
                  _(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: E(() => u[2] || (u[2] = [
                      ae("mdi-database-settings", -1)
                    ])),
                    _: 1,
                    __: [2]
                  }),
                  T("b", null, j(fe(t).db_engine), 1),
                  T("span", kX, j(fe(t).db_version), 1)
                ]),
                _(h, { class: "my-2" }),
                T("div", SX, j(fe(i)("Usage Stats")), 1),
                T("div", CX, [
                  _(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: E(() => u[3] || (u[3] = [
                      ae("mdi-database", -1)
                    ])),
                    _: 1,
                    __: [3]
                  }),
                  ae(" " + j(fe(i)("Size:")) + " ", 1),
                  T("b", null, j(o.value), 1),
                  T("span", AX, [
                    _(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: E(() => u[4] || (u[4] = [
                        ae("mdi-table", -1)
                      ])),
                      _: 1,
                      __: [4]
                    }),
                    ae(j(fe(i)("Tables:")) + " ", 1),
                    T("b", null, j(fe(t).db_table_count), 1)
                  ]),
                  T("span", xX, [
                    _(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: E(() => u[5] || (u[5] = [
                        ae("mdi-format-list-numbered", -1)
                      ])),
                      _: 1,
                      __: [5]
                    }),
                    ae(j(fe(i)("Rows:")) + " ", 1),
                    T("b", null, j(fe(t).db_total_rows), 1)
                  ])
                ]),
                T("div", TX, [
                  _(f, {
                    size: "14",
                    color: "info",
                    class: "mr-1"
                  }, {
                    default: E(() => u[6] || (u[6] = [
                      ae("mdi-connection", -1)
                    ])),
                    _: 1,
                    __: [6]
                  }),
                  ae(" " + j(fe(i)("Connections:")) + " ", 1),
                  T("b", null, j(fe(t).db_connections), 1),
                  T("span", IX, [
                    _(f, {
                      size: "14",
                      color: "warning",
                      class: "mr-1"
                    }, {
                      default: E(() => u[7] || (u[7] = [
                        ae("mdi-timer-sand", -1)
                      ])),
                      _: 1,
                      __: [7]
                    }),
                    ae(j(fe(i)("Slow Queries:")) + " ", 1),
                    T("b", null, j(fe(t).db_slow_queries), 1)
                  ])
                ]),
                _(h, { class: "my-2" }),
                fe(t).db_top_tables && fe(t).db_top_tables.length ? (te(), Oe("div", EX, [
                  T("div", PX, [
                    _(f, {
                      size: "14",
                      color: "info",
                      class: "mr-1"
                    }, {
                      default: E(() => u[8] || (u[8] = [
                        ae("mdi-database-outline", -1)
                      ])),
                      _: 1,
                      __: [8]
                    }),
                    ae(" " + j(fe(i)("Top Tables")), 1)
                  ]),
                  T("ul", OX, [
                    (te(!0), Oe(Ge, null, ln(fe(t).db_top_tables, (p) => (te(), Oe("li", {
                      key: p.name,
                      class: "flex items-center mb-1"
                    }, [
                      _(f, {
                        size: "12",
                        color: "info",
                        class: "mr-1"
                      }, {
                        default: E(() => u[9] || (u[9] = [
                          ae("mdi-table", -1)
                        ])),
                        _: 1,
                        __: [9]
                      }),
                      T("b", null, j(p.name), 1),
                      ae(": " + j(l(p.size)), 1)
                    ]))), 128))
                  ])
                ])) : ke("", !0)
              ])),
              _(h, { class: "my-2" }),
              T("div", DX, [
                _(f, {
                  size: "14",
                  color: "primary",
                  class: "mr-1"
                }, {
                  default: E(() => u[10] || (u[10] = [
                    ae("mdi-lightbulb-on-outline", -1)
                  ])),
                  _: 1,
                  __: [10]
                }),
                ae(" " + j(fe(i)("Tip: Monitor slow queries and table size for optimal performance.")), 1)
              ]),
              T("div", BX, [
                _(f, {
                  size: "14",
                  color: "info",
                  class: "mr-1"
                }, {
                  default: E(() => u[11] || (u[11] = [
                    ae("mdi-database", -1)
                  ])),
                  _: 1,
                  __: [11]
                }),
                ae(" " + j(fe(i)("Database health affects overall system speed and reliability.")), 1)
              ])
            ])
          ]),
          _: 1
        })
      ]);
    };
  }
}, MX = /* @__PURE__ */ on(VX, [["__scopeId", "data-v-b6c4c127"]]);
async function LX(e = []) {
  if (!(typeof localStorage > "u"))
    try {
      e.length ? e.forEach((t) => localStorage.removeItem(t)) : Object.keys(localStorage).forEach((t) => localStorage.removeItem(t)), console.log("[ClearAllCaches] localStorage cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear localStorage", t), t;
    }
}
async function RX(e = []) {
  if (!(typeof sessionStorage > "u"))
    try {
      e.length ? e.forEach((t) => sessionStorage.removeItem(t)) : sessionStorage.clear(), console.log("[ClearAllCaches] sessionStorage cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear sessionStorage", t), t;
    }
}
async function FX(e = []) {
  if (!(typeof indexedDB > "u"))
    try {
      !e.length && indexedDB.databases && (e = (await indexedDB.databases()).map((n) => n.name).filter(Boolean)), await Promise.all(
        e.map(
          (t) => new Promise((n, a) => {
            const r = indexedDB.deleteDatabase(t);
            r.onsuccess = () => n(), r.onblocked = () => n(), r.onerror = () => a(r.error);
          })
        )
      ), console.log("[ClearAllCaches] IndexedDB cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear IndexedDB", t), t;
    }
}
async function NX(e = []) {
  if (!(typeof caches > "u"))
    try {
      e.length || (e = await caches.keys()), await Promise.all(e.map((t) => caches.delete(t))), console.log("[ClearAllCaches] Cache API cleared", e.length ? e : "all");
    } catch (t) {
      throw console.error("[ClearAllCaches] Failed to clear Cache API", t), t;
    }
}
async function rw(e = {
  confirmBeforeClear: !0,
  onSuccess: () => {
  },
  onError: () => {
  },
  specificKeys: [],
  specificDatabases: [],
  specificCaches: [],
  skipStorage: []
}) {
  const t = Object.assign(
    {
      confirmBeforeClear: !0,
      onSuccess: () => {
      },
      onError: () => {
      },
      specificKeys: [],
      specificDatabases: [],
      specificCaches: [],
      skipStorage: []
    },
    e || {}
  );
  try {
    if (t.confirmBeforeClear && typeof window < "u" && !window.confirm("Are you sure you want to clear application cache?"))
      return;
    const n = [];
    t.skipStorage.includes("localStorage") || n.push(LX(t.specificKeys)), t.skipStorage.includes("sessionStorage") || n.push(RX(t.specificKeys)), t.skipStorage.includes("indexedDB") || n.push(FX(t.specificDatabases)), t.skipStorage.includes("caches") || n.push(NX(t.specificCaches)), await Promise.all(n), t.onSuccess();
  } catch (n) {
    t.onError(n);
  }
}
typeof window < "u" && (document.addEventListener("keydown", (e) => {
  e.ctrlKey && e.shiftKey && e.code === "KeyR" && (e.preventDefault(), rw().catch(() => {
  }));
}), document.addEventListener("DOMContentLoaded", () => {
  const e = document.getElementById("clear-cache-btn");
  e && e.addEventListener("click", () => rw().catch(() => {
  }));
}));
const UX = {
  name: "NavBar",
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = kc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  components: {
    NavbarAppBar: BG,
    NavbarDrawer: UG,
    NavbarMenu: d9,
    StatusIndicator: p9,
    CacheUsageMeter: R9,
    AboutDialog: sQ,
    OfflineInvoicesDialog: CJ,
    ServerUsageGadget: lX,
    DatabaseUsageGadget: MX
  },
  props: {
    posProfile: {
      type: Object,
      default: () => ({})
    },
    pendingInvoices: {
      type: Number,
      default: 0
    },
    lastInvoiceId: String,
    networkOnline: Boolean,
    serverOnline: Boolean,
    serverConnecting: Boolean,
    isIpHost: Boolean,
    syncTotals: {
      type: Object,
      default: () => ({ pending: 0, synced: 0, drafted: 0 })
    },
    manualOffline: Boolean,
    isDark: Boolean,
    cacheUsage: {
      type: Number,
      default: 0
    },
    cacheUsageLoading: {
      type: Boolean,
      default: !1
    },
    cacheUsageDetails: {
      type: Object,
      default: () => ({ total: 0, indexedDB: 0, localStorage: 0 })
    },
    cacheReady: Boolean,
    loadingProgress: {
      type: Number,
      default: 0
    },
    loadingActive: {
      type: Boolean,
      default: !1
    },
    loadingMessage: {
      type: String,
      default: "Loading app data..."
    }
  },
  data() {
    return {
      drawer: !1,
      mini: !0,
      item: 0,
      items: [
        { text: "POS", icon: "mdi-network-pos" },
        { text: "Payments", icon: "mdi-credit-card" }
      ],
      company: "",
      companyImg: vD,
      showAboutDialog: !1,
      showOfflineInvoices: !1,
      freeze: !1,
      freezeTitle: "",
      freezeMsg: "",
      snack: !1,
      snackText: "",
      snackColor: "success",
      snackTimeout: 3e3
    };
  },
  computed: {
    appBarColor() {
      return this.isDark ? this.$vuetify.theme.themes.dark.colors.surface : "white";
    }
  },
  mounted() {
    this.initializeNavbar(), this.eventBus && (this.eventBus.on("show_message", this.showMessage), this.eventBus.on("freeze", this.handleFreeze), this.eventBus.on("unfreeze", this.handleUnfreeze), this.eventBus.on("set_company", this.handleSetCompany));
  },
  unmounted() {
    this.eventBus && (this.eventBus.off("show_message", this.showMessage), this.eventBus.off("freeze", this.handleFreeze), this.eventBus.off("unfreeze", this.handleUnfreeze), this.eventBus.off("set_company", this.handleSetCompany));
  },
  methods: {
    initializeNavbar() {
      frappe.boot && frappe.boot.sysdefaults && frappe.boot.sysdefaults.company ? this.company = frappe.boot.sysdefaults.company : this.company = "POS System", frappe.boot && frappe.boot.website_settings && frappe.boot.website_settings.app_logo ? this.companyImg = frappe.boot.website_settings.app_logo : frappe.boot && frappe.boot.website_settings && frappe.boot.website_settings.banner_image && (this.companyImg = frappe.boot.website_settings.banner_image), this.$forceUpdate();
    },
    handleNavClick() {
      this.drawer = !this.drawer, this.$emit("nav-click");
    },
    goDesk() {
      window.location.href = "/app";
    },
    changePage(e) {
      this.$emit("change-page", e);
    },
    openCloseShift() {
      this.$emit("close-shift");
    },
    printLastInvoice() {
      this.$emit("print-last-invoice");
    },
    syncPendingInvoices() {
      this.$emit("sync-invoices");
    },
    toggleManualOffline() {
      this.$emit("toggle-offline");
    },
    async clearCache() {
      if (un()) {
        this.showMessage({
          color: "warning",
          title: this.__("Cannot clear cache while offline")
        });
        return;
      }
      try {
        let e = null;
        typeof localStorage < "u" && (e = localStorage.getItem("use_western_numerals")), await J_(), await rw({ confirmBeforeClear: !1 }).catch(() => {
        }), e !== null && typeof localStorage < "u" && localStorage.setItem("use_western_numerals", e), this.showMessage({
          color: "success",
          title: this.__("Cache cleared successfully")
        });
      } catch (e) {
        console.error("Failed to clear cache", e), this.showMessage({
          color: "error",
          title: this.__("Failed to clear cache")
        });
      } finally {
        setTimeout(() => location.reload(), 1e3);
      }
    },
    toggleTheme() {
      this.$emit("toggle-theme");
    },
    logOut() {
      this.$emit("logout");
    },
    refreshCacheUsage() {
      this.$emit("refresh-cache-usage");
    },
    updateAfterDelete() {
      this.$emit("update-after-delete");
    },
    showMessage(e) {
      this.snackText = e.title, this.snackColor = e.color || "success", this.snack = !0;
    },
    handleFreeze(e) {
      this.freezeTitle = e?.title || "", this.freezeMsg = e?.message || "", this.freeze = !0;
    },
    handleUnfreeze() {
      this.freeze = !1, this.freezeTitle = "", this.freezeMsg = "";
    },
    handleSetCompany(e) {
      typeof e == "string" ? this.company = e : e && e.name && (this.company = e.name, e.company_image && (this.companyImg = e.company_image));
    },
    handleMouseLeave() {
      this.drawer && (clearTimeout(this._closeTimeout), this._closeTimeout = setTimeout(() => {
        this.drawer = !1, this.mini = !0;
      }, 250));
    }
  },
  emits: [
    "nav-click",
    "change-page",
    "close-shift",
    "print-last-invoice",
    "sync-invoices",
    "toggle-offline",
    "toggle-theme",
    "logout",
    "refresh-cache-usage",
    "update-after-delete"
  ]
};
function $X(e, t, n, a, r, i) {
  const o = J("StatusIndicator"), l = J("CacheUsageMeter"), s = J("ServerUsageGadget"), d = J("DatabaseUsageGadget"), u = J("NavbarMenu"), f = J("NavbarAppBar"), h = J("NavbarDrawer"), y = J("AboutDialog"), p = J("v-card-title"), w = J("v-card-text"), b = J("v-card"), v = J("v-dialog"), g = J("OfflineInvoicesDialog"), k = J("v-btn"), A = J("v-snackbar");
  return te(), Oe("nav", {
    class: Ae(a.rtlClasses)
  }, [
    _(f, {
      "pos-profile": n.posProfile,
      "pending-invoices": n.pendingInvoices,
      "is-dark": n.isDark,
      "loading-progress": n.loadingProgress,
      "loading-active": n.loadingActive,
      "loading-message": n.loadingMessage,
      company: r.company,
      onNavClick: i.handleNavClick,
      onGoDesk: i.goDesk,
      onShowOfflineInvoices: t[1] || (t[1] = (C) => r.showOfflineInvoices = !0)
    }, {
      "status-indicator": E(() => [
        _(o, {
          "network-online": n.networkOnline,
          "server-online": n.serverOnline,
          "server-connecting": n.serverConnecting,
          "is-ip-host": n.isIpHost,
          "sync-totals": n.syncTotals,
          "cache-ready": n.cacheReady
        }, null, 8, ["network-online", "server-online", "server-connecting", "is-ip-host", "sync-totals", "cache-ready"])
      ]),
      "cache-usage-meter": E(() => [
        _(l, {
          "cache-usage": n.cacheUsage,
          "cache-usage-loading": n.cacheUsageLoading,
          "cache-usage-details": n.cacheUsageDetails,
          onRefresh: i.refreshCacheUsage
        }, null, 8, ["cache-usage", "cache-usage-loading", "cache-usage-details", "onRefresh"])
      ]),
      "cpu-gadget": E(() => [
        _(s)
      ]),
      "db-usage-gadget": E(() => [
        _(d)
      ]),
      menu: E(() => [
        _(u, {
          "pos-profile": n.posProfile,
          "last-invoice-id": n.lastInvoiceId,
          "manual-offline": n.manualOffline,
          "network-online": n.networkOnline,
          "server-online": n.serverOnline,
          "is-dark": n.isDark,
          onCloseShift: i.openCloseShift,
          onPrintLastInvoice: i.printLastInvoice,
          onSyncInvoices: i.syncPendingInvoices,
          onToggleOffline: i.toggleManualOffline,
          onClearCache: i.clearCache,
          onShowAbout: t[0] || (t[0] = (C) => r.showAboutDialog = !0),
          onToggleTheme: i.toggleTheme,
          onLogout: i.logOut
        }, null, 8, ["pos-profile", "last-invoice-id", "manual-offline", "network-online", "server-online", "is-dark", "onCloseShift", "onPrintLastInvoice", "onSyncInvoices", "onToggleOffline", "onClearCache", "onToggleTheme", "onLogout"])
      ]),
      _: 1
    }, 8, ["pos-profile", "pending-invoices", "is-dark", "loading-progress", "loading-active", "loading-message", "company", "onNavClick", "onGoDesk"]),
    _(h, {
      drawer: r.drawer,
      "onUpdate:drawer": t[2] || (t[2] = (C) => r.drawer = C),
      item: r.item,
      "onUpdate:item": t[3] || (t[3] = (C) => r.item = C),
      company: r.company,
      "company-img": r.companyImg,
      items: r.items,
      "is-dark": n.isDark,
      onChangePage: i.changePage
    }, null, 8, ["drawer", "item", "company", "company-img", "items", "is-dark", "onChangePage"]),
    _(y, {
      modelValue: r.showAboutDialog,
      "onUpdate:modelValue": t[4] || (t[4] = (C) => r.showAboutDialog = C)
    }, null, 8, ["modelValue"]),
    _(v, {
      modelValue: r.freeze,
      "onUpdate:modelValue": t[5] || (t[5] = (C) => r.freeze = C),
      persistent: "",
      "max-width": "290"
    }, {
      default: E(() => [
        _(b, null, {
          default: E(() => [
            _(p, { class: "text-h5" }, {
              default: E(() => [
                ae(j(r.freezeTitle), 1)
              ]),
              _: 1
            }),
            _(w, null, {
              default: E(() => [
                ae(j(r.freezeMsg), 1)
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    _(g, {
      modelValue: r.showOfflineInvoices,
      "onUpdate:modelValue": t[6] || (t[6] = (C) => r.showOfflineInvoices = C),
      "pos-profile": n.posProfile,
      onDeleted: i.updateAfterDelete,
      onSyncAll: i.syncPendingInvoices
    }, null, 8, ["modelValue", "pos-profile", "onDeleted", "onSyncAll"]),
    _(A, {
      modelValue: r.snack,
      "onUpdate:modelValue": t[8] || (t[8] = (C) => r.snack = C),
      timeout: r.snackTimeout,
      color: r.snackColor,
      location: a.isRtl ? "top left" : "top right"
    }, {
      actions: E(() => [
        _(k, {
          color: "white",
          variant: "text",
          onClick: t[7] || (t[7] = (C) => r.snack = !1)
        }, {
          default: E(() => [
            ae(j(e.__("Close")), 1)
          ]),
          _: 1
        })
      ]),
      default: E(() => [
        ae(j(r.snackText) + " ", 1)
      ]),
      _: 1
    }, 8, ["modelValue", "timeout", "color", "location"])
  ], 2);
}
const qX = /* @__PURE__ */ on(UX, [["render", $X], ["__scopeId", "data-v-09e74fbc"]]);
var zh = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function CD(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
var Xd = { exports: {} };
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var HX = Xd.exports, qA;
function zX() {
  return qA || (qA = 1, (function(e, t) {
    (function() {
      var n, a = "4.17.21", r = 200, i = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", o = "Expected a function", l = "Invalid `variable` option passed into `_.template`", s = "__lodash_hash_undefined__", d = 500, u = "__lodash_placeholder__", f = 1, h = 2, y = 4, p = 1, w = 2, b = 1, v = 2, g = 4, k = 8, A = 16, C = 32, D = 64, P = 128, O = 256, I = 512, x = 30, M = "...", V = 800, B = 16, F = 1, H = 2, K = 3, Z = 1 / 0, ue = 9007199254740991, Y = 17976931348623157e292, U = NaN, q = 4294967295, oe = q - 1, ee = q >>> 1, he = [
        ["ary", P],
        ["bind", b],
        ["bindKey", v],
        ["curry", k],
        ["curryRight", A],
        ["flip", I],
        ["partial", C],
        ["partialRight", D],
        ["rearg", O]
      ], ve = "[object Arguments]", pe = "[object Array]", z = "[object AsyncFunction]", ge = "[object Boolean]", Ve = "[object Date]", Ne = "[object DOMException]", ce = "[object Error]", ne = "[object Function]", Q = "[object GeneratorFunction]", le = "[object Map]", G = "[object Number]", Ce = "[object Null]", Ie = "[object Object]", ie = "[object Promise]", we = "[object Proxy]", Ee = "[object RegExp]", Pe = "[object Set]", Xe = "[object String]", _e = "[object Symbol]", qe = "[object Undefined]", Ze = "[object WeakMap]", _t = "[object WeakSet]", It = "[object ArrayBuffer]", it = "[object DataView]", Bt = "[object Float32Array]", tn = "[object Float64Array]", Kn = "[object Int8Array]", oa = "[object Int16Array]", $a = "[object Int32Array]", ba = "[object Uint8Array]", jn = "[object Uint8ClampedArray]", Rn = "[object Uint16Array]", er = "[object Uint32Array]", Te = /\b__p \+= '';/g, ze = /\b(__p \+=) '' \+/g, ft = /(__e\(.*?\)|\b__t\)) \+\n'';/g, ot = /&(?:amp|lt|gt|quot|#39);/g, Ke = /[&<>"']/g, st = RegExp(ot.source), vt = RegExp(Ke.source), Ea = /<%-([\s\S]+?)%>/g, qa = /<%([\s\S]+?)%>/g, _r = /<%=([\s\S]+?)%>/g, Ka = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, to = /^\w*$/, sl = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, no = /[\\^$.*+?()[\]{}|]/g, mm = RegExp(no.source), Sc = /^\s+/, Kv = /\s/, jv = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, ll = /\{\n\/\* \[wrapped with (.+)\] \*/, sd = /,? & /, cl = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, Yv = /[()=,{}\[\]\/\s]/, Gv = /\\(\\)?/g, ul = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, hm = /\w*$/, Qv = /^[-+]0x[0-9a-f]+$/i, Cc = /^0b[01]+$/i, Jv = /^\[object .+?Constructor\]$/, dl = /^0o[0-7]+$/i, Xv = /^(?:0|[1-9]\d*)$/, Ac = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, ao = /($^)/, _m = /['\n\r\u2028\u2029\\]/g, _s = "\\ud800-\\udfff", Zv = "\\u0300-\\u036f", ep = "\\ufe20-\\ufe2f", tp = "\\u20d0-\\u20ff", pm = Zv + ep + tp, xc = "\\u2700-\\u27bf", gm = "a-z\\xdf-\\xf6\\xf8-\\xff", np = "\\xac\\xb1\\xd7\\xf7", ap = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", ym = "\\u2000-\\u206f", rp = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", fl = "A-Z\\xc0-\\xd6\\xd8-\\xde", ld = "\\ufe0e\\ufe0f", bm = np + ap + ym + rp, vs = "['’]", wm = "[" + _s + "]", Yn = "[" + bm + "]", Tc = "[" + pm + "]", km = "\\d+", ei = "[" + xc + "]", Sm = "[" + gm + "]", cd = "[^" + _s + bm + km + xc + gm + fl + "]", Ic = "\\ud83c[\\udffb-\\udfff]", Ec = "(?:" + Tc + "|" + Ic + ")", Cm = "[^" + _s + "]", ml = "(?:\\ud83c[\\udde6-\\uddff]){2}", ud = "[\\ud800-\\udbff][\\udc00-\\udfff]", ro = "[" + fl + "]", Am = "\\u200d", dd = "(?:" + Sm + "|" + cd + ")", ip = "(?:" + ro + "|" + cd + ")", xm = "(?:" + vs + "(?:d|ll|m|re|s|t|ve))?", fd = "(?:" + vs + "(?:D|LL|M|RE|S|T|VE))?", Ir = Ec + "?", Pc = "[" + ld + "]?", op = "(?:" + Am + "(?:" + [Cm, ml, ud].join("|") + ")" + Pc + Ir + ")*", sp = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", Vi = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", Tm = Pc + Ir + op, lp = "(?:" + [ei, ml, ud].join("|") + ")" + Tm, cp = "(?:" + [Cm + Tc + "?", Tc, ml, ud, wm].join("|") + ")", md = RegExp(vs, "g"), up = RegExp(Tc, "g"), hl = RegExp(Ic + "(?=" + Ic + ")|" + cp + Tm, "g"), dp = RegExp([
        ro + "?" + Sm + "+" + xm + "(?=" + [Yn, ro, "$"].join("|") + ")",
        ip + "+" + fd + "(?=" + [Yn, ro + dd, "$"].join("|") + ")",
        ro + "?" + dd + "+" + xm,
        ro + "+" + fd,
        Vi,
        sp,
        km,
        lp
      ].join("|"), "g"), fp = RegExp("[" + Am + _s + pm + ld + "]"), mp = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, hp = [
        "Array",
        "Buffer",
        "DataView",
        "Date",
        "Error",
        "Float32Array",
        "Float64Array",
        "Function",
        "Int8Array",
        "Int16Array",
        "Int32Array",
        "Map",
        "Math",
        "Object",
        "Promise",
        "RegExp",
        "Set",
        "String",
        "Symbol",
        "TypeError",
        "Uint8Array",
        "Uint8ClampedArray",
        "Uint16Array",
        "Uint32Array",
        "WeakMap",
        "_",
        "clearTimeout",
        "isFinite",
        "parseInt",
        "setTimeout"
      ], _p = -1, Fn = {};
      Fn[Bt] = Fn[tn] = Fn[Kn] = Fn[oa] = Fn[$a] = Fn[ba] = Fn[jn] = Fn[Rn] = Fn[er] = !0, Fn[ve] = Fn[pe] = Fn[It] = Fn[ge] = Fn[it] = Fn[Ve] = Fn[ce] = Fn[ne] = Fn[le] = Fn[G] = Fn[Ie] = Fn[Ee] = Fn[Pe] = Fn[Xe] = Fn[Ze] = !1;
      var In = {};
      In[ve] = In[pe] = In[It] = In[it] = In[ge] = In[Ve] = In[Bt] = In[tn] = In[Kn] = In[oa] = In[$a] = In[le] = In[G] = In[Ie] = In[Ee] = In[Pe] = In[Xe] = In[_e] = In[ba] = In[jn] = In[Rn] = In[er] = !0, In[ce] = In[ne] = In[Ze] = !1;
      var vp = {
        // Latin-1 Supplement block.
        À: "A",
        Á: "A",
        Â: "A",
        Ã: "A",
        Ä: "A",
        Å: "A",
        à: "a",
        á: "a",
        â: "a",
        ã: "a",
        ä: "a",
        å: "a",
        Ç: "C",
        ç: "c",
        Ð: "D",
        ð: "d",
        È: "E",
        É: "E",
        Ê: "E",
        Ë: "E",
        è: "e",
        é: "e",
        ê: "e",
        ë: "e",
        Ì: "I",
        Í: "I",
        Î: "I",
        Ï: "I",
        ì: "i",
        í: "i",
        î: "i",
        ï: "i",
        Ñ: "N",
        ñ: "n",
        Ò: "O",
        Ó: "O",
        Ô: "O",
        Õ: "O",
        Ö: "O",
        Ø: "O",
        ò: "o",
        ó: "o",
        ô: "o",
        õ: "o",
        ö: "o",
        ø: "o",
        Ù: "U",
        Ú: "U",
        Û: "U",
        Ü: "U",
        ù: "u",
        ú: "u",
        û: "u",
        ü: "u",
        Ý: "Y",
        ý: "y",
        ÿ: "y",
        Æ: "Ae",
        æ: "ae",
        Þ: "Th",
        þ: "th",
        ß: "ss",
        // Latin Extended-A block.
        Ā: "A",
        Ă: "A",
        Ą: "A",
        ā: "a",
        ă: "a",
        ą: "a",
        Ć: "C",
        Ĉ: "C",
        Ċ: "C",
        Č: "C",
        ć: "c",
        ĉ: "c",
        ċ: "c",
        č: "c",
        Ď: "D",
        Đ: "D",
        ď: "d",
        đ: "d",
        Ē: "E",
        Ĕ: "E",
        Ė: "E",
        Ę: "E",
        Ě: "E",
        ē: "e",
        ĕ: "e",
        ė: "e",
        ę: "e",
        ě: "e",
        Ĝ: "G",
        Ğ: "G",
        Ġ: "G",
        Ģ: "G",
        ĝ: "g",
        ğ: "g",
        ġ: "g",
        ģ: "g",
        Ĥ: "H",
        Ħ: "H",
        ĥ: "h",
        ħ: "h",
        Ĩ: "I",
        Ī: "I",
        Ĭ: "I",
        Į: "I",
        İ: "I",
        ĩ: "i",
        ī: "i",
        ĭ: "i",
        į: "i",
        ı: "i",
        Ĵ: "J",
        ĵ: "j",
        Ķ: "K",
        ķ: "k",
        ĸ: "k",
        Ĺ: "L",
        Ļ: "L",
        Ľ: "L",
        Ŀ: "L",
        Ł: "L",
        ĺ: "l",
        ļ: "l",
        ľ: "l",
        ŀ: "l",
        ł: "l",
        Ń: "N",
        Ņ: "N",
        Ň: "N",
        Ŋ: "N",
        ń: "n",
        ņ: "n",
        ň: "n",
        ŋ: "n",
        Ō: "O",
        Ŏ: "O",
        Ő: "O",
        ō: "o",
        ŏ: "o",
        ő: "o",
        Ŕ: "R",
        Ŗ: "R",
        Ř: "R",
        ŕ: "r",
        ŗ: "r",
        ř: "r",
        Ś: "S",
        Ŝ: "S",
        Ş: "S",
        Š: "S",
        ś: "s",
        ŝ: "s",
        ş: "s",
        š: "s",
        Ţ: "T",
        Ť: "T",
        Ŧ: "T",
        ţ: "t",
        ť: "t",
        ŧ: "t",
        Ũ: "U",
        Ū: "U",
        Ŭ: "U",
        Ů: "U",
        Ű: "U",
        Ų: "U",
        ũ: "u",
        ū: "u",
        ŭ: "u",
        ů: "u",
        ű: "u",
        ų: "u",
        Ŵ: "W",
        ŵ: "w",
        Ŷ: "Y",
        ŷ: "y",
        Ÿ: "Y",
        Ź: "Z",
        Ż: "Z",
        Ž: "Z",
        ź: "z",
        ż: "z",
        ž: "z",
        Ĳ: "IJ",
        ĳ: "ij",
        Œ: "Oe",
        œ: "oe",
        ŉ: "'n",
        ſ: "s"
      }, Im = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      }, Em = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
      }, pp = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029"
      }, hd = parseFloat, gp = parseInt, _d = typeof zh == "object" && zh && zh.Object === Object && zh, yp = typeof self == "object" && self && self.Object === Object && self, ja = _d || yp || Function("return this")(), vd = t && !t.nodeType && t, Bo = vd && !0 && e && !e.nodeType && e, Pm = Bo && Bo.exports === vd, pd = Pm && _d.process, zr = (function() {
        try {
          var Re = Bo && Bo.require && Bo.require("util").types;
          return Re || pd && pd.binding && pd.binding("util");
        } catch {
        }
      })(), Om = zr && zr.isArrayBuffer, Dm = zr && zr.isDate, Bm = zr && zr.isMap, Oc = zr && zr.isRegExp, Vm = zr && zr.isSet, Mm = zr && zr.isTypedArray;
      function Er(Re, et, je) {
        switch (je.length) {
          case 0:
            return Re.call(et);
          case 1:
            return Re.call(et, je[0]);
          case 2:
            return Re.call(et, je[0], je[1]);
          case 3:
            return Re.call(et, je[0], je[1], je[2]);
        }
        return Re.apply(et, je);
      }
      function Lm(Re, et, je, At) {
        for (var Kt = -1, yn = Re == null ? 0 : Re.length; ++Kt < yn; ) {
          var Pa = Re[Kt];
          et(At, Pa, je(Pa), Re);
        }
        return At;
      }
      function Wr(Re, et) {
        for (var je = -1, At = Re == null ? 0 : Re.length; ++je < At && et(Re[je], je, Re) !== !1; )
          ;
        return Re;
      }
      function bp(Re, et) {
        for (var je = Re == null ? 0 : Re.length; je-- && et(Re[je], je, Re) !== !1; )
          ;
        return Re;
      }
      function Rm(Re, et) {
        for (var je = -1, At = Re == null ? 0 : Re.length; ++je < At; )
          if (!et(Re[je], je, Re))
            return !1;
        return !0;
      }
      function io(Re, et) {
        for (var je = -1, At = Re == null ? 0 : Re.length, Kt = 0, yn = []; ++je < At; ) {
          var Pa = Re[je];
          et(Pa, je, Re) && (yn[Kt++] = Pa);
        }
        return yn;
      }
      function Dc(Re, et) {
        var je = Re == null ? 0 : Re.length;
        return !!je && yi(Re, et, 0) > -1;
      }
      function gd(Re, et, je) {
        for (var At = -1, Kt = Re == null ? 0 : Re.length; ++At < Kt; )
          if (je(et, Re[At]))
            return !0;
        return !1;
      }
      function Hn(Re, et) {
        for (var je = -1, At = Re == null ? 0 : Re.length, Kt = Array(At); ++je < At; )
          Kt[je] = et(Re[je], je, Re);
        return Kt;
      }
      function oo(Re, et) {
        for (var je = -1, At = et.length, Kt = Re.length; ++je < At; )
          Re[Kt + je] = et[je];
        return Re;
      }
      function yd(Re, et, je, At) {
        var Kt = -1, yn = Re == null ? 0 : Re.length;
        for (At && yn && (je = Re[++Kt]); ++Kt < yn; )
          je = et(je, Re[Kt], Kt, Re);
        return je;
      }
      function wp(Re, et, je, At) {
        var Kt = Re == null ? 0 : Re.length;
        for (At && Kt && (je = Re[--Kt]); Kt--; )
          je = et(je, Re[Kt], Kt, Re);
        return je;
      }
      function bd(Re, et) {
        for (var je = -1, At = Re == null ? 0 : Re.length; ++je < At; )
          if (et(Re[je], je, Re))
            return !0;
        return !1;
      }
      var kp = wd("length");
      function Sp(Re) {
        return Re.split("");
      }
      function Cp(Re) {
        return Re.match(cl) || [];
      }
      function Bc(Re, et, je) {
        var At;
        return je(Re, function(Kt, yn, Pa) {
          if (et(Kt, yn, Pa))
            return At = yn, !1;
        }), At;
      }
      function Vc(Re, et, je, At) {
        for (var Kt = Re.length, yn = je + (At ? 1 : -1); At ? yn-- : ++yn < Kt; )
          if (et(Re[yn], yn, Re))
            return yn;
        return -1;
      }
      function yi(Re, et, je) {
        return et === et ? Ip(Re, et, je) : Vc(Re, Fm, je);
      }
      function Ap(Re, et, je, At) {
        for (var Kt = je - 1, yn = Re.length; ++Kt < yn; )
          if (At(Re[Kt], et))
            return Kt;
        return -1;
      }
      function Fm(Re) {
        return Re !== Re;
      }
      function Nm(Re, et) {
        var je = Re == null ? 0 : Re.length;
        return je ? Mc(Re, et) / je : U;
      }
      function wd(Re) {
        return function(et) {
          return et == null ? n : et[Re];
        };
      }
      function ps(Re) {
        return function(et) {
          return Re == null ? n : Re[et];
        };
      }
      function Um(Re, et, je, At, Kt) {
        return Kt(Re, function(yn, Pa, Pn) {
          je = At ? (At = !1, yn) : et(je, yn, Pa, Pn);
        }), je;
      }
      function $m(Re, et) {
        var je = Re.length;
        for (Re.sort(et); je--; )
          Re[je] = Re[je].value;
        return Re;
      }
      function Mc(Re, et) {
        for (var je, At = -1, Kt = Re.length; ++At < Kt; ) {
          var yn = et(Re[At]);
          yn !== n && (je = je === n ? yn : je + yn);
        }
        return je;
      }
      function kd(Re, et) {
        for (var je = -1, At = Array(Re); ++je < Re; )
          At[je] = et(je);
        return At;
      }
      function xp(Re, et) {
        return Hn(et, function(je) {
          return [je, Re[je]];
        });
      }
      function qm(Re) {
        return Re && Re.slice(0, Km(Re) + 1).replace(Sc, "");
      }
      function Pr(Re) {
        return function(et) {
          return Re(et);
        };
      }
      function Sd(Re, et) {
        return Hn(et, function(je) {
          return Re[je];
        });
      }
      function _l(Re, et) {
        return Re.has(et);
      }
      function sa(Re, et) {
        for (var je = -1, At = Re.length; ++je < At && yi(et, Re[je], 0) > -1; )
          ;
        return je;
      }
      function bi(Re, et) {
        for (var je = Re.length; je-- && yi(et, Re[je], 0) > -1; )
          ;
        return je;
      }
      function Cd(Re, et) {
        for (var je = Re.length, At = 0; je--; )
          Re[je] === et && ++At;
        return At;
      }
      var Hm = ps(vp), Gn = ps(Im);
      function vl(Re) {
        return "\\" + pp[Re];
      }
      function la(Re, et) {
        return Re == null ? n : Re[et];
      }
      function En(Re) {
        return fp.test(Re);
      }
      function zm(Re) {
        return mp.test(Re);
      }
      function Wm(Re) {
        for (var et, je = []; !(et = Re.next()).done; )
          je.push(et.value);
        return je;
      }
      function Lc(Re) {
        var et = -1, je = Array(Re.size);
        return Re.forEach(function(At, Kt) {
          je[++et] = [Kt, At];
        }), je;
      }
      function Ad(Re, et) {
        return function(je) {
          return Re(et(je));
        };
      }
      function Mi(Re, et) {
        for (var je = -1, At = Re.length, Kt = 0, yn = []; ++je < At; ) {
          var Pa = Re[je];
          (Pa === et || Pa === u) && (Re[je] = u, yn[Kt++] = je);
        }
        return yn;
      }
      function Rc(Re) {
        var et = -1, je = Array(Re.size);
        return Re.forEach(function(At) {
          je[++et] = At;
        }), je;
      }
      function Tp(Re) {
        var et = -1, je = Array(Re.size);
        return Re.forEach(function(At) {
          je[++et] = [At, At];
        }), je;
      }
      function Ip(Re, et, je) {
        for (var At = je - 1, Kt = Re.length; ++At < Kt; )
          if (Re[At] === et)
            return At;
        return -1;
      }
      function Ep(Re, et, je) {
        for (var At = je + 1; At--; )
          if (Re[At] === et)
            return At;
        return At;
      }
      function gs(Re) {
        return En(Re) ? Op(Re) : kp(Re);
      }
      function ti(Re) {
        return En(Re) ? Dp(Re) : Sp(Re);
      }
      function Km(Re) {
        for (var et = Re.length; et-- && Kv.test(Re.charAt(et)); )
          ;
        return et;
      }
      var Pp = ps(Em);
      function Op(Re) {
        for (var et = hl.lastIndex = 0; hl.test(Re); )
          ++et;
        return et;
      }
      function Dp(Re) {
        return Re.match(hl) || [];
      }
      function Bp(Re) {
        return Re.match(dp) || [];
      }
      var Vp = (function Re(et) {
        et = et == null ? ja : ys.defaults(ja.Object(), et, ys.pick(ja, hp));
        var je = et.Array, At = et.Date, Kt = et.Error, yn = et.Function, Pa = et.Math, Pn = et.Object, bs = et.RegExp, jm = et.String, R = et.TypeError, N = je.prototype, re = yn.prototype, me = Pn.prototype, Me = et["__core-js_shared__"], He = re.toString, $e = me.hasOwnProperty, Qe = 0, lt = (function() {
          var c = /[^.]+$/.exec(Me && Me.keys && Me.keys.IE_PROTO || "");
          return c ? "Symbol(src)_1." + c : "";
        })(), mt = me.toString, Ct = He.call(Pn), qt = ja._, zt = bs(
          "^" + He.call($e).replace(no, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
        ), Wt = Pm ? et.Buffer : n, wn = et.Symbol, Nn = et.Uint8Array, Cn = Wt ? Wt.allocUnsafe : n, ma = Ad(Pn.getPrototypeOf, Pn), dt = Pn.create, xt = me.propertyIsEnumerable, Un = N.splice, wa = wn ? wn.isConcatSpreadable : n, wi = wn ? wn.iterator : n, ki = wn ? wn.toStringTag : n, pl = (function() {
          try {
            var c = kl(Pn, "defineProperty");
            return c({}, "", {}), c;
          } catch {
          }
        })(), Ym = et.clearTimeout !== ja.clearTimeout && et.clearTimeout, lB = At && At.now !== ja.Date.now && At.now, cB = et.setTimeout !== ja.setTimeout && et.setTimeout, Gm = Pa.ceil, Qm = Pa.floor, Mp = Pn.getOwnPropertySymbols, uB = Wt ? Wt.isBuffer : n, y1 = et.isFinite, dB = N.join, fB = Ad(Pn.keys, Pn), Ya = Pa.max, vr = Pa.min, mB = At.now, hB = et.parseInt, b1 = Pa.random, _B = N.reverse, Lp = kl(et, "DataView"), xd = kl(et, "Map"), Rp = kl(et, "Promise"), Fc = kl(et, "Set"), Td = kl(et, "WeakMap"), Id = kl(Pn, "create"), Jm = Td && new Td(), Nc = {}, vB = Sl(Lp), pB = Sl(xd), gB = Sl(Rp), yB = Sl(Fc), bB = Sl(Td), Xm = wn ? wn.prototype : n, Ed = Xm ? Xm.valueOf : n, w1 = Xm ? Xm.toString : n;
        function se(c) {
          if (ka(c) && !Qt(c) && !(c instanceof dn)) {
            if (c instanceof Si)
              return c;
            if ($e.call(c, "__wrapped__"))
              return kk(c);
          }
          return new Si(c);
        }
        var Uc = /* @__PURE__ */ (function() {
          function c() {
          }
          return function(m) {
            if (!ha(m))
              return {};
            if (dt)
              return dt(m);
            c.prototype = m;
            var S = new c();
            return c.prototype = n, S;
          };
        })();
        function Zm() {
        }
        function Si(c, m) {
          this.__wrapped__ = c, this.__actions__ = [], this.__chain__ = !!m, this.__index__ = 0, this.__values__ = n;
        }
        se.templateSettings = {
          /**
           * Used to detect `data` property values to be HTML-escaped.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          escape: Ea,
          /**
           * Used to detect code to be evaluated.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          evaluate: qa,
          /**
           * Used to detect `data` property values to inject.
           *
           * @memberOf _.templateSettings
           * @type {RegExp}
           */
          interpolate: _r,
          /**
           * Used to reference the data object in the template text.
           *
           * @memberOf _.templateSettings
           * @type {string}
           */
          variable: "",
          /**
           * Used to import variables into the compiled template.
           *
           * @memberOf _.templateSettings
           * @type {Object}
           */
          imports: {
            /**
             * A reference to the `lodash` function.
             *
             * @memberOf _.templateSettings.imports
             * @type {Function}
             */
            _: se
          }
        }, se.prototype = Zm.prototype, se.prototype.constructor = se, Si.prototype = Uc(Zm.prototype), Si.prototype.constructor = Si;
        function dn(c) {
          this.__wrapped__ = c, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = q, this.__views__ = [];
        }
        function wB() {
          var c = new dn(this.__wrapped__);
          return c.__actions__ = Kr(this.__actions__), c.__dir__ = this.__dir__, c.__filtered__ = this.__filtered__, c.__iteratees__ = Kr(this.__iteratees__), c.__takeCount__ = this.__takeCount__, c.__views__ = Kr(this.__views__), c;
        }
        function kB() {
          if (this.__filtered__) {
            var c = new dn(this);
            c.__dir__ = -1, c.__filtered__ = !0;
          } else
            c = this.clone(), c.__dir__ *= -1;
          return c;
        }
        function SB() {
          var c = this.__wrapped__.value(), m = this.__dir__, S = Qt(c), L = m < 0, X = S ? c.length : 0, de = M2(0, X, this.__views__), Se = de.start, De = de.end, Ue = De - Se, nt = L ? De : Se - 1, at = this.__iteratees__, ct = at.length, yt = 0, Et = vr(Ue, this.__takeCount__);
          if (!S || !L && X == Ue && Et == Ue)
            return W1(c, this.__actions__);
          var Nt = [];
          e:
            for (; Ue-- && yt < Et; ) {
              nt += m;
              for (var en = -1, Ut = c[nt]; ++en < ct; ) {
                var cn = at[en], hn = cn.iteratee, ri = cn.type, Br = hn(Ut);
                if (ri == H)
                  Ut = Br;
                else if (!Br) {
                  if (ri == F)
                    continue e;
                  break e;
                }
              }
              Nt[yt++] = Ut;
            }
          return Nt;
        }
        dn.prototype = Uc(Zm.prototype), dn.prototype.constructor = dn;
        function gl(c) {
          var m = -1, S = c == null ? 0 : c.length;
          for (this.clear(); ++m < S; ) {
            var L = c[m];
            this.set(L[0], L[1]);
          }
        }
        function CB() {
          this.__data__ = Id ? Id(null) : {}, this.size = 0;
        }
        function AB(c) {
          var m = this.has(c) && delete this.__data__[c];
          return this.size -= m ? 1 : 0, m;
        }
        function xB(c) {
          var m = this.__data__;
          if (Id) {
            var S = m[c];
            return S === s ? n : S;
          }
          return $e.call(m, c) ? m[c] : n;
        }
        function TB(c) {
          var m = this.__data__;
          return Id ? m[c] !== n : $e.call(m, c);
        }
        function IB(c, m) {
          var S = this.__data__;
          return this.size += this.has(c) ? 0 : 1, S[c] = Id && m === n ? s : m, this;
        }
        gl.prototype.clear = CB, gl.prototype.delete = AB, gl.prototype.get = xB, gl.prototype.has = TB, gl.prototype.set = IB;
        function Vo(c) {
          var m = -1, S = c == null ? 0 : c.length;
          for (this.clear(); ++m < S; ) {
            var L = c[m];
            this.set(L[0], L[1]);
          }
        }
        function EB() {
          this.__data__ = [], this.size = 0;
        }
        function PB(c) {
          var m = this.__data__, S = eh(m, c);
          if (S < 0)
            return !1;
          var L = m.length - 1;
          return S == L ? m.pop() : Un.call(m, S, 1), --this.size, !0;
        }
        function OB(c) {
          var m = this.__data__, S = eh(m, c);
          return S < 0 ? n : m[S][1];
        }
        function DB(c) {
          return eh(this.__data__, c) > -1;
        }
        function BB(c, m) {
          var S = this.__data__, L = eh(S, c);
          return L < 0 ? (++this.size, S.push([c, m])) : S[L][1] = m, this;
        }
        Vo.prototype.clear = EB, Vo.prototype.delete = PB, Vo.prototype.get = OB, Vo.prototype.has = DB, Vo.prototype.set = BB;
        function Mo(c) {
          var m = -1, S = c == null ? 0 : c.length;
          for (this.clear(); ++m < S; ) {
            var L = c[m];
            this.set(L[0], L[1]);
          }
        }
        function VB() {
          this.size = 0, this.__data__ = {
            hash: new gl(),
            map: new (xd || Vo)(),
            string: new gl()
          };
        }
        function MB(c) {
          var m = fh(this, c).delete(c);
          return this.size -= m ? 1 : 0, m;
        }
        function LB(c) {
          return fh(this, c).get(c);
        }
        function RB(c) {
          return fh(this, c).has(c);
        }
        function FB(c, m) {
          var S = fh(this, c), L = S.size;
          return S.set(c, m), this.size += S.size == L ? 0 : 1, this;
        }
        Mo.prototype.clear = VB, Mo.prototype.delete = MB, Mo.prototype.get = LB, Mo.prototype.has = RB, Mo.prototype.set = FB;
        function yl(c) {
          var m = -1, S = c == null ? 0 : c.length;
          for (this.__data__ = new Mo(); ++m < S; )
            this.add(c[m]);
        }
        function NB(c) {
          return this.__data__.set(c, s), this;
        }
        function UB(c) {
          return this.__data__.has(c);
        }
        yl.prototype.add = yl.prototype.push = NB, yl.prototype.has = UB;
        function Li(c) {
          var m = this.__data__ = new Vo(c);
          this.size = m.size;
        }
        function $B() {
          this.__data__ = new Vo(), this.size = 0;
        }
        function qB(c) {
          var m = this.__data__, S = m.delete(c);
          return this.size = m.size, S;
        }
        function HB(c) {
          return this.__data__.get(c);
        }
        function zB(c) {
          return this.__data__.has(c);
        }
        function WB(c, m) {
          var S = this.__data__;
          if (S instanceof Vo) {
            var L = S.__data__;
            if (!xd || L.length < r - 1)
              return L.push([c, m]), this.size = ++S.size, this;
            S = this.__data__ = new Mo(L);
          }
          return S.set(c, m), this.size = S.size, this;
        }
        Li.prototype.clear = $B, Li.prototype.delete = qB, Li.prototype.get = HB, Li.prototype.has = zB, Li.prototype.set = WB;
        function k1(c, m) {
          var S = Qt(c), L = !S && Cl(c), X = !S && !L && As(c), de = !S && !L && !X && zc(c), Se = S || L || X || de, De = Se ? kd(c.length, jm) : [], Ue = De.length;
          for (var nt in c)
            (m || $e.call(c, nt)) && !(Se && // Safari 9 has enumerable `arguments.length` in strict mode.
            (nt == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
            X && (nt == "offset" || nt == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
            de && (nt == "buffer" || nt == "byteLength" || nt == "byteOffset") || // Skip index properties.
            No(nt, Ue))) && De.push(nt);
          return De;
        }
        function S1(c) {
          var m = c.length;
          return m ? c[Yp(0, m - 1)] : n;
        }
        function KB(c, m) {
          return mh(Kr(c), bl(m, 0, c.length));
        }
        function jB(c) {
          return mh(Kr(c));
        }
        function Fp(c, m, S) {
          (S !== n && !Ri(c[m], S) || S === n && !(m in c)) && Lo(c, m, S);
        }
        function Pd(c, m, S) {
          var L = c[m];
          (!($e.call(c, m) && Ri(L, S)) || S === n && !(m in c)) && Lo(c, m, S);
        }
        function eh(c, m) {
          for (var S = c.length; S--; )
            if (Ri(c[S][0], m))
              return S;
          return -1;
        }
        function YB(c, m, S, L) {
          return ws(c, function(X, de, Se) {
            m(L, X, S(X), Se);
          }), L;
        }
        function C1(c, m) {
          return c && lo(m, tr(m), c);
        }
        function GB(c, m) {
          return c && lo(m, Yr(m), c);
        }
        function Lo(c, m, S) {
          m == "__proto__" && pl ? pl(c, m, {
            configurable: !0,
            enumerable: !0,
            value: S,
            writable: !0
          }) : c[m] = S;
        }
        function Np(c, m) {
          for (var S = -1, L = m.length, X = je(L), de = c == null; ++S < L; )
            X[S] = de ? n : yg(c, m[S]);
          return X;
        }
        function bl(c, m, S) {
          return c === c && (S !== n && (c = c <= S ? c : S), m !== n && (c = c >= m ? c : m)), c;
        }
        function Ci(c, m, S, L, X, de) {
          var Se, De = m & f, Ue = m & h, nt = m & y;
          if (S && (Se = X ? S(c, L, X, de) : S(c)), Se !== n)
            return Se;
          if (!ha(c))
            return c;
          var at = Qt(c);
          if (at) {
            if (Se = R2(c), !De)
              return Kr(c, Se);
          } else {
            var ct = pr(c), yt = ct == ne || ct == Q;
            if (As(c))
              return Y1(c, De);
            if (ct == Ie || ct == ve || yt && !X) {
              if (Se = Ue || yt ? {} : mk(c), !De)
                return Ue ? x2(c, GB(Se, c)) : A2(c, C1(Se, c));
            } else {
              if (!In[ct])
                return X ? c : {};
              Se = F2(c, ct, De);
            }
          }
          de || (de = new Li());
          var Et = de.get(c);
          if (Et)
            return Et;
          de.set(c, Se), qk(c) ? c.forEach(function(Ut) {
            Se.add(Ci(Ut, m, S, Ut, c, de));
          }) : Uk(c) && c.forEach(function(Ut, cn) {
            Se.set(cn, Ci(Ut, m, S, cn, c, de));
          });
          var Nt = nt ? Ue ? ig : rg : Ue ? Yr : tr, en = at ? n : Nt(c);
          return Wr(en || c, function(Ut, cn) {
            en && (cn = Ut, Ut = c[cn]), Pd(Se, cn, Ci(Ut, m, S, cn, c, de));
          }), Se;
        }
        function QB(c) {
          var m = tr(c);
          return function(S) {
            return A1(S, c, m);
          };
        }
        function A1(c, m, S) {
          var L = S.length;
          if (c == null)
            return !L;
          for (c = Pn(c); L--; ) {
            var X = S[L], de = m[X], Se = c[X];
            if (Se === n && !(X in c) || !de(Se))
              return !1;
          }
          return !0;
        }
        function x1(c, m, S) {
          if (typeof c != "function")
            throw new R(o);
          return Rd(function() {
            c.apply(n, S);
          }, m);
        }
        function Od(c, m, S, L) {
          var X = -1, de = Dc, Se = !0, De = c.length, Ue = [], nt = m.length;
          if (!De)
            return Ue;
          S && (m = Hn(m, Pr(S))), L ? (de = gd, Se = !1) : m.length >= r && (de = _l, Se = !1, m = new yl(m));
          e:
            for (; ++X < De; ) {
              var at = c[X], ct = S == null ? at : S(at);
              if (at = L || at !== 0 ? at : 0, Se && ct === ct) {
                for (var yt = nt; yt--; )
                  if (m[yt] === ct)
                    continue e;
                Ue.push(at);
              } else de(m, ct, L) || Ue.push(at);
            }
          return Ue;
        }
        var ws = Z1(so), T1 = Z1($p, !0);
        function JB(c, m) {
          var S = !0;
          return ws(c, function(L, X, de) {
            return S = !!m(L, X, de), S;
          }), S;
        }
        function th(c, m, S) {
          for (var L = -1, X = c.length; ++L < X; ) {
            var de = c[L], Se = m(de);
            if (Se != null && (De === n ? Se === Se && !ai(Se) : S(Se, De)))
              var De = Se, Ue = de;
          }
          return Ue;
        }
        function XB(c, m, S, L) {
          var X = c.length;
          for (S = Zt(S), S < 0 && (S = -S > X ? 0 : X + S), L = L === n || L > X ? X : Zt(L), L < 0 && (L += X), L = S > L ? 0 : zk(L); S < L; )
            c[S++] = m;
          return c;
        }
        function I1(c, m) {
          var S = [];
          return ws(c, function(L, X, de) {
            m(L, X, de) && S.push(L);
          }), S;
        }
        function lr(c, m, S, L, X) {
          var de = -1, Se = c.length;
          for (S || (S = U2), X || (X = []); ++de < Se; ) {
            var De = c[de];
            m > 0 && S(De) ? m > 1 ? lr(De, m - 1, S, L, X) : oo(X, De) : L || (X[X.length] = De);
          }
          return X;
        }
        var Up = ek(), E1 = ek(!0);
        function so(c, m) {
          return c && Up(c, m, tr);
        }
        function $p(c, m) {
          return c && E1(c, m, tr);
        }
        function nh(c, m) {
          return io(m, function(S) {
            return Uo(c[S]);
          });
        }
        function wl(c, m) {
          m = Ss(m, c);
          for (var S = 0, L = m.length; c != null && S < L; )
            c = c[co(m[S++])];
          return S && S == L ? c : n;
        }
        function P1(c, m, S) {
          var L = m(c);
          return Qt(c) ? L : oo(L, S(c));
        }
        function Or(c) {
          return c == null ? c === n ? qe : Ce : ki && ki in Pn(c) ? V2(c) : j2(c);
        }
        function qp(c, m) {
          return c > m;
        }
        function ZB(c, m) {
          return c != null && $e.call(c, m);
        }
        function e2(c, m) {
          return c != null && m in Pn(c);
        }
        function t2(c, m, S) {
          return c >= vr(m, S) && c < Ya(m, S);
        }
        function Hp(c, m, S) {
          for (var L = S ? gd : Dc, X = c[0].length, de = c.length, Se = de, De = je(de), Ue = 1 / 0, nt = []; Se--; ) {
            var at = c[Se];
            Se && m && (at = Hn(at, Pr(m))), Ue = vr(at.length, Ue), De[Se] = !S && (m || X >= 120 && at.length >= 120) ? new yl(Se && at) : n;
          }
          at = c[0];
          var ct = -1, yt = De[0];
          e:
            for (; ++ct < X && nt.length < Ue; ) {
              var Et = at[ct], Nt = m ? m(Et) : Et;
              if (Et = S || Et !== 0 ? Et : 0, !(yt ? _l(yt, Nt) : L(nt, Nt, S))) {
                for (Se = de; --Se; ) {
                  var en = De[Se];
                  if (!(en ? _l(en, Nt) : L(c[Se], Nt, S)))
                    continue e;
                }
                yt && yt.push(Nt), nt.push(Et);
              }
            }
          return nt;
        }
        function n2(c, m, S, L) {
          return so(c, function(X, de, Se) {
            m(L, S(X), de, Se);
          }), L;
        }
        function Dd(c, m, S) {
          m = Ss(m, c), c = pk(c, m);
          var L = c == null ? c : c[co(xi(m))];
          return L == null ? n : Er(L, c, S);
        }
        function O1(c) {
          return ka(c) && Or(c) == ve;
        }
        function a2(c) {
          return ka(c) && Or(c) == It;
        }
        function r2(c) {
          return ka(c) && Or(c) == Ve;
        }
        function Bd(c, m, S, L, X) {
          return c === m ? !0 : c == null || m == null || !ka(c) && !ka(m) ? c !== c && m !== m : i2(c, m, S, L, Bd, X);
        }
        function i2(c, m, S, L, X, de) {
          var Se = Qt(c), De = Qt(m), Ue = Se ? pe : pr(c), nt = De ? pe : pr(m);
          Ue = Ue == ve ? Ie : Ue, nt = nt == ve ? Ie : nt;
          var at = Ue == Ie, ct = nt == Ie, yt = Ue == nt;
          if (yt && As(c)) {
            if (!As(m))
              return !1;
            Se = !0, at = !1;
          }
          if (yt && !at)
            return de || (de = new Li()), Se || zc(c) ? uk(c, m, S, L, X, de) : D2(c, m, Ue, S, L, X, de);
          if (!(S & p)) {
            var Et = at && $e.call(c, "__wrapped__"), Nt = ct && $e.call(m, "__wrapped__");
            if (Et || Nt) {
              var en = Et ? c.value() : c, Ut = Nt ? m.value() : m;
              return de || (de = new Li()), X(en, Ut, S, L, de);
            }
          }
          return yt ? (de || (de = new Li()), B2(c, m, S, L, X, de)) : !1;
        }
        function o2(c) {
          return ka(c) && pr(c) == le;
        }
        function zp(c, m, S, L) {
          var X = S.length, de = X, Se = !L;
          if (c == null)
            return !de;
          for (c = Pn(c); X--; ) {
            var De = S[X];
            if (Se && De[2] ? De[1] !== c[De[0]] : !(De[0] in c))
              return !1;
          }
          for (; ++X < de; ) {
            De = S[X];
            var Ue = De[0], nt = c[Ue], at = De[1];
            if (Se && De[2]) {
              if (nt === n && !(Ue in c))
                return !1;
            } else {
              var ct = new Li();
              if (L)
                var yt = L(nt, at, Ue, c, m, ct);
              if (!(yt === n ? Bd(at, nt, p | w, L, ct) : yt))
                return !1;
            }
          }
          return !0;
        }
        function D1(c) {
          if (!ha(c) || q2(c))
            return !1;
          var m = Uo(c) ? zt : Jv;
          return m.test(Sl(c));
        }
        function s2(c) {
          return ka(c) && Or(c) == Ee;
        }
        function l2(c) {
          return ka(c) && pr(c) == Pe;
        }
        function c2(c) {
          return ka(c) && yh(c.length) && !!Fn[Or(c)];
        }
        function B1(c) {
          return typeof c == "function" ? c : c == null ? Gr : typeof c == "object" ? Qt(c) ? L1(c[0], c[1]) : M1(c) : tS(c);
        }
        function Wp(c) {
          if (!Ld(c))
            return fB(c);
          var m = [];
          for (var S in Pn(c))
            $e.call(c, S) && S != "constructor" && m.push(S);
          return m;
        }
        function u2(c) {
          if (!ha(c))
            return K2(c);
          var m = Ld(c), S = [];
          for (var L in c)
            L == "constructor" && (m || !$e.call(c, L)) || S.push(L);
          return S;
        }
        function Kp(c, m) {
          return c < m;
        }
        function V1(c, m) {
          var S = -1, L = jr(c) ? je(c.length) : [];
          return ws(c, function(X, de, Se) {
            L[++S] = m(X, de, Se);
          }), L;
        }
        function M1(c) {
          var m = sg(c);
          return m.length == 1 && m[0][2] ? _k(m[0][0], m[0][1]) : function(S) {
            return S === c || zp(S, c, m);
          };
        }
        function L1(c, m) {
          return cg(c) && hk(m) ? _k(co(c), m) : function(S) {
            var L = yg(S, c);
            return L === n && L === m ? bg(S, c) : Bd(m, L, p | w);
          };
        }
        function ah(c, m, S, L, X) {
          c !== m && Up(m, function(de, Se) {
            if (X || (X = new Li()), ha(de))
              d2(c, m, Se, S, ah, L, X);
            else {
              var De = L ? L(dg(c, Se), de, Se + "", c, m, X) : n;
              De === n && (De = de), Fp(c, Se, De);
            }
          }, Yr);
        }
        function d2(c, m, S, L, X, de, Se) {
          var De = dg(c, S), Ue = dg(m, S), nt = Se.get(Ue);
          if (nt) {
            Fp(c, S, nt);
            return;
          }
          var at = de ? de(De, Ue, S + "", c, m, Se) : n, ct = at === n;
          if (ct) {
            var yt = Qt(Ue), Et = !yt && As(Ue), Nt = !yt && !Et && zc(Ue);
            at = Ue, yt || Et || Nt ? Qt(De) ? at = De : Oa(De) ? at = Kr(De) : Et ? (ct = !1, at = Y1(Ue, !0)) : Nt ? (ct = !1, at = G1(Ue, !0)) : at = [] : Fd(Ue) || Cl(Ue) ? (at = De, Cl(De) ? at = Wk(De) : (!ha(De) || Uo(De)) && (at = mk(Ue))) : ct = !1;
          }
          ct && (Se.set(Ue, at), X(at, Ue, L, de, Se), Se.delete(Ue)), Fp(c, S, at);
        }
        function R1(c, m) {
          var S = c.length;
          if (S)
            return m += m < 0 ? S : 0, No(m, S) ? c[m] : n;
        }
        function F1(c, m, S) {
          m.length ? m = Hn(m, function(de) {
            return Qt(de) ? function(Se) {
              return wl(Se, de.length === 1 ? de[0] : de);
            } : de;
          }) : m = [Gr];
          var L = -1;
          m = Hn(m, Pr(Mt()));
          var X = V1(c, function(de, Se, De) {
            var Ue = Hn(m, function(nt) {
              return nt(de);
            });
            return { criteria: Ue, index: ++L, value: de };
          });
          return $m(X, function(de, Se) {
            return C2(de, Se, S);
          });
        }
        function f2(c, m) {
          return N1(c, m, function(S, L) {
            return bg(c, L);
          });
        }
        function N1(c, m, S) {
          for (var L = -1, X = m.length, de = {}; ++L < X; ) {
            var Se = m[L], De = wl(c, Se);
            S(De, Se) && Vd(de, Ss(Se, c), De);
          }
          return de;
        }
        function m2(c) {
          return function(m) {
            return wl(m, c);
          };
        }
        function jp(c, m, S, L) {
          var X = L ? Ap : yi, de = -1, Se = m.length, De = c;
          for (c === m && (m = Kr(m)), S && (De = Hn(c, Pr(S))); ++de < Se; )
            for (var Ue = 0, nt = m[de], at = S ? S(nt) : nt; (Ue = X(De, at, Ue, L)) > -1; )
              De !== c && Un.call(De, Ue, 1), Un.call(c, Ue, 1);
          return c;
        }
        function U1(c, m) {
          for (var S = c ? m.length : 0, L = S - 1; S--; ) {
            var X = m[S];
            if (S == L || X !== de) {
              var de = X;
              No(X) ? Un.call(c, X, 1) : Jp(c, X);
            }
          }
          return c;
        }
        function Yp(c, m) {
          return c + Qm(b1() * (m - c + 1));
        }
        function h2(c, m, S, L) {
          for (var X = -1, de = Ya(Gm((m - c) / (S || 1)), 0), Se = je(de); de--; )
            Se[L ? de : ++X] = c, c += S;
          return Se;
        }
        function Gp(c, m) {
          var S = "";
          if (!c || m < 1 || m > ue)
            return S;
          do
            m % 2 && (S += c), m = Qm(m / 2), m && (c += c);
          while (m);
          return S;
        }
        function nn(c, m) {
          return fg(vk(c, m, Gr), c + "");
        }
        function _2(c) {
          return S1(Wc(c));
        }
        function v2(c, m) {
          var S = Wc(c);
          return mh(S, bl(m, 0, S.length));
        }
        function Vd(c, m, S, L) {
          if (!ha(c))
            return c;
          m = Ss(m, c);
          for (var X = -1, de = m.length, Se = de - 1, De = c; De != null && ++X < de; ) {
            var Ue = co(m[X]), nt = S;
            if (Ue === "__proto__" || Ue === "constructor" || Ue === "prototype")
              return c;
            if (X != Se) {
              var at = De[Ue];
              nt = L ? L(at, Ue, De) : n, nt === n && (nt = ha(at) ? at : No(m[X + 1]) ? [] : {});
            }
            Pd(De, Ue, nt), De = De[Ue];
          }
          return c;
        }
        var $1 = Jm ? function(c, m) {
          return Jm.set(c, m), c;
        } : Gr, p2 = pl ? function(c, m) {
          return pl(c, "toString", {
            configurable: !0,
            enumerable: !1,
            value: kg(m),
            writable: !0
          });
        } : Gr;
        function g2(c) {
          return mh(Wc(c));
        }
        function Ai(c, m, S) {
          var L = -1, X = c.length;
          m < 0 && (m = -m > X ? 0 : X + m), S = S > X ? X : S, S < 0 && (S += X), X = m > S ? 0 : S - m >>> 0, m >>>= 0;
          for (var de = je(X); ++L < X; )
            de[L] = c[L + m];
          return de;
        }
        function y2(c, m) {
          var S;
          return ws(c, function(L, X, de) {
            return S = m(L, X, de), !S;
          }), !!S;
        }
        function rh(c, m, S) {
          var L = 0, X = c == null ? L : c.length;
          if (typeof m == "number" && m === m && X <= ee) {
            for (; L < X; ) {
              var de = L + X >>> 1, Se = c[de];
              Se !== null && !ai(Se) && (S ? Se <= m : Se < m) ? L = de + 1 : X = de;
            }
            return X;
          }
          return Qp(c, m, Gr, S);
        }
        function Qp(c, m, S, L) {
          var X = 0, de = c == null ? 0 : c.length;
          if (de === 0)
            return 0;
          m = S(m);
          for (var Se = m !== m, De = m === null, Ue = ai(m), nt = m === n; X < de; ) {
            var at = Qm((X + de) / 2), ct = S(c[at]), yt = ct !== n, Et = ct === null, Nt = ct === ct, en = ai(ct);
            if (Se)
              var Ut = L || Nt;
            else nt ? Ut = Nt && (L || yt) : De ? Ut = Nt && yt && (L || !Et) : Ue ? Ut = Nt && yt && !Et && (L || !en) : Et || en ? Ut = !1 : Ut = L ? ct <= m : ct < m;
            Ut ? X = at + 1 : de = at;
          }
          return vr(de, oe);
        }
        function q1(c, m) {
          for (var S = -1, L = c.length, X = 0, de = []; ++S < L; ) {
            var Se = c[S], De = m ? m(Se) : Se;
            if (!S || !Ri(De, Ue)) {
              var Ue = De;
              de[X++] = Se === 0 ? 0 : Se;
            }
          }
          return de;
        }
        function H1(c) {
          return typeof c == "number" ? c : ai(c) ? U : +c;
        }
        function ni(c) {
          if (typeof c == "string")
            return c;
          if (Qt(c))
            return Hn(c, ni) + "";
          if (ai(c))
            return w1 ? w1.call(c) : "";
          var m = c + "";
          return m == "0" && 1 / c == -Z ? "-0" : m;
        }
        function ks(c, m, S) {
          var L = -1, X = Dc, de = c.length, Se = !0, De = [], Ue = De;
          if (S)
            Se = !1, X = gd;
          else if (de >= r) {
            var nt = m ? null : P2(c);
            if (nt)
              return Rc(nt);
            Se = !1, X = _l, Ue = new yl();
          } else
            Ue = m ? [] : De;
          e:
            for (; ++L < de; ) {
              var at = c[L], ct = m ? m(at) : at;
              if (at = S || at !== 0 ? at : 0, Se && ct === ct) {
                for (var yt = Ue.length; yt--; )
                  if (Ue[yt] === ct)
                    continue e;
                m && Ue.push(ct), De.push(at);
              } else X(Ue, ct, S) || (Ue !== De && Ue.push(ct), De.push(at));
            }
          return De;
        }
        function Jp(c, m) {
          return m = Ss(m, c), c = pk(c, m), c == null || delete c[co(xi(m))];
        }
        function z1(c, m, S, L) {
          return Vd(c, m, S(wl(c, m)), L);
        }
        function ih(c, m, S, L) {
          for (var X = c.length, de = L ? X : -1; (L ? de-- : ++de < X) && m(c[de], de, c); )
            ;
          return S ? Ai(c, L ? 0 : de, L ? de + 1 : X) : Ai(c, L ? de + 1 : 0, L ? X : de);
        }
        function W1(c, m) {
          var S = c;
          return S instanceof dn && (S = S.value()), yd(m, function(L, X) {
            return X.func.apply(X.thisArg, oo([L], X.args));
          }, S);
        }
        function Xp(c, m, S) {
          var L = c.length;
          if (L < 2)
            return L ? ks(c[0]) : [];
          for (var X = -1, de = je(L); ++X < L; )
            for (var Se = c[X], De = -1; ++De < L; )
              De != X && (de[X] = Od(de[X] || Se, c[De], m, S));
          return ks(lr(de, 1), m, S);
        }
        function K1(c, m, S) {
          for (var L = -1, X = c.length, de = m.length, Se = {}; ++L < X; ) {
            var De = L < de ? m[L] : n;
            S(Se, c[L], De);
          }
          return Se;
        }
        function Zp(c) {
          return Oa(c) ? c : [];
        }
        function eg(c) {
          return typeof c == "function" ? c : Gr;
        }
        function Ss(c, m) {
          return Qt(c) ? c : cg(c, m) ? [c] : wk(An(c));
        }
        var b2 = nn;
        function Cs(c, m, S) {
          var L = c.length;
          return S = S === n ? L : S, !m && S >= L ? c : Ai(c, m, S);
        }
        var j1 = Ym || function(c) {
          return ja.clearTimeout(c);
        };
        function Y1(c, m) {
          if (m)
            return c.slice();
          var S = c.length, L = Cn ? Cn(S) : new c.constructor(S);
          return c.copy(L), L;
        }
        function tg(c) {
          var m = new c.constructor(c.byteLength);
          return new Nn(m).set(new Nn(c)), m;
        }
        function w2(c, m) {
          var S = m ? tg(c.buffer) : c.buffer;
          return new c.constructor(S, c.byteOffset, c.byteLength);
        }
        function k2(c) {
          var m = new c.constructor(c.source, hm.exec(c));
          return m.lastIndex = c.lastIndex, m;
        }
        function S2(c) {
          return Ed ? Pn(Ed.call(c)) : {};
        }
        function G1(c, m) {
          var S = m ? tg(c.buffer) : c.buffer;
          return new c.constructor(S, c.byteOffset, c.length);
        }
        function Q1(c, m) {
          if (c !== m) {
            var S = c !== n, L = c === null, X = c === c, de = ai(c), Se = m !== n, De = m === null, Ue = m === m, nt = ai(m);
            if (!De && !nt && !de && c > m || de && Se && Ue && !De && !nt || L && Se && Ue || !S && Ue || !X)
              return 1;
            if (!L && !de && !nt && c < m || nt && S && X && !L && !de || De && S && X || !Se && X || !Ue)
              return -1;
          }
          return 0;
        }
        function C2(c, m, S) {
          for (var L = -1, X = c.criteria, de = m.criteria, Se = X.length, De = S.length; ++L < Se; ) {
            var Ue = Q1(X[L], de[L]);
            if (Ue) {
              if (L >= De)
                return Ue;
              var nt = S[L];
              return Ue * (nt == "desc" ? -1 : 1);
            }
          }
          return c.index - m.index;
        }
        function J1(c, m, S, L) {
          for (var X = -1, de = c.length, Se = S.length, De = -1, Ue = m.length, nt = Ya(de - Se, 0), at = je(Ue + nt), ct = !L; ++De < Ue; )
            at[De] = m[De];
          for (; ++X < Se; )
            (ct || X < de) && (at[S[X]] = c[X]);
          for (; nt--; )
            at[De++] = c[X++];
          return at;
        }
        function X1(c, m, S, L) {
          for (var X = -1, de = c.length, Se = -1, De = S.length, Ue = -1, nt = m.length, at = Ya(de - De, 0), ct = je(at + nt), yt = !L; ++X < at; )
            ct[X] = c[X];
          for (var Et = X; ++Ue < nt; )
            ct[Et + Ue] = m[Ue];
          for (; ++Se < De; )
            (yt || X < de) && (ct[Et + S[Se]] = c[X++]);
          return ct;
        }
        function Kr(c, m) {
          var S = -1, L = c.length;
          for (m || (m = je(L)); ++S < L; )
            m[S] = c[S];
          return m;
        }
        function lo(c, m, S, L) {
          var X = !S;
          S || (S = {});
          for (var de = -1, Se = m.length; ++de < Se; ) {
            var De = m[de], Ue = L ? L(S[De], c[De], De, S, c) : n;
            Ue === n && (Ue = c[De]), X ? Lo(S, De, Ue) : Pd(S, De, Ue);
          }
          return S;
        }
        function A2(c, m) {
          return lo(c, lg(c), m);
        }
        function x2(c, m) {
          return lo(c, dk(c), m);
        }
        function oh(c, m) {
          return function(S, L) {
            var X = Qt(S) ? Lm : YB, de = m ? m() : {};
            return X(S, c, Mt(L, 2), de);
          };
        }
        function $c(c) {
          return nn(function(m, S) {
            var L = -1, X = S.length, de = X > 1 ? S[X - 1] : n, Se = X > 2 ? S[2] : n;
            for (de = c.length > 3 && typeof de == "function" ? (X--, de) : n, Se && Dr(S[0], S[1], Se) && (de = X < 3 ? n : de, X = 1), m = Pn(m); ++L < X; ) {
              var De = S[L];
              De && c(m, De, L, de);
            }
            return m;
          });
        }
        function Z1(c, m) {
          return function(S, L) {
            if (S == null)
              return S;
            if (!jr(S))
              return c(S, L);
            for (var X = S.length, de = m ? X : -1, Se = Pn(S); (m ? de-- : ++de < X) && L(Se[de], de, Se) !== !1; )
              ;
            return S;
          };
        }
        function ek(c) {
          return function(m, S, L) {
            for (var X = -1, de = Pn(m), Se = L(m), De = Se.length; De--; ) {
              var Ue = Se[c ? De : ++X];
              if (S(de[Ue], Ue, de) === !1)
                break;
            }
            return m;
          };
        }
        function T2(c, m, S) {
          var L = m & b, X = Md(c);
          function de() {
            var Se = this && this !== ja && this instanceof de ? X : c;
            return Se.apply(L ? S : this, arguments);
          }
          return de;
        }
        function tk(c) {
          return function(m) {
            m = An(m);
            var S = En(m) ? ti(m) : n, L = S ? S[0] : m.charAt(0), X = S ? Cs(S, 1).join("") : m.slice(1);
            return L[c]() + X;
          };
        }
        function qc(c) {
          return function(m) {
            return yd(Zk(Xk(m).replace(md, "")), c, "");
          };
        }
        function Md(c) {
          return function() {
            var m = arguments;
            switch (m.length) {
              case 0:
                return new c();
              case 1:
                return new c(m[0]);
              case 2:
                return new c(m[0], m[1]);
              case 3:
                return new c(m[0], m[1], m[2]);
              case 4:
                return new c(m[0], m[1], m[2], m[3]);
              case 5:
                return new c(m[0], m[1], m[2], m[3], m[4]);
              case 6:
                return new c(m[0], m[1], m[2], m[3], m[4], m[5]);
              case 7:
                return new c(m[0], m[1], m[2], m[3], m[4], m[5], m[6]);
            }
            var S = Uc(c.prototype), L = c.apply(S, m);
            return ha(L) ? L : S;
          };
        }
        function I2(c, m, S) {
          var L = Md(c);
          function X() {
            for (var de = arguments.length, Se = je(de), De = de, Ue = Hc(X); De--; )
              Se[De] = arguments[De];
            var nt = de < 3 && Se[0] !== Ue && Se[de - 1] !== Ue ? [] : Mi(Se, Ue);
            if (de -= nt.length, de < S)
              return ok(
                c,
                m,
                sh,
                X.placeholder,
                n,
                Se,
                nt,
                n,
                n,
                S - de
              );
            var at = this && this !== ja && this instanceof X ? L : c;
            return Er(at, this, Se);
          }
          return X;
        }
        function nk(c) {
          return function(m, S, L) {
            var X = Pn(m);
            if (!jr(m)) {
              var de = Mt(S, 3);
              m = tr(m), S = function(De) {
                return de(X[De], De, X);
              };
            }
            var Se = c(m, S, L);
            return Se > -1 ? X[de ? m[Se] : Se] : n;
          };
        }
        function ak(c) {
          return Fo(function(m) {
            var S = m.length, L = S, X = Si.prototype.thru;
            for (c && m.reverse(); L--; ) {
              var de = m[L];
              if (typeof de != "function")
                throw new R(o);
              if (X && !Se && dh(de) == "wrapper")
                var Se = new Si([], !0);
            }
            for (L = Se ? L : S; ++L < S; ) {
              de = m[L];
              var De = dh(de), Ue = De == "wrapper" ? og(de) : n;
              Ue && ug(Ue[0]) && Ue[1] == (P | k | C | O) && !Ue[4].length && Ue[9] == 1 ? Se = Se[dh(Ue[0])].apply(Se, Ue[3]) : Se = de.length == 1 && ug(de) ? Se[De]() : Se.thru(de);
            }
            return function() {
              var nt = arguments, at = nt[0];
              if (Se && nt.length == 1 && Qt(at))
                return Se.plant(at).value();
              for (var ct = 0, yt = S ? m[ct].apply(this, nt) : at; ++ct < S; )
                yt = m[ct].call(this, yt);
              return yt;
            };
          });
        }
        function sh(c, m, S, L, X, de, Se, De, Ue, nt) {
          var at = m & P, ct = m & b, yt = m & v, Et = m & (k | A), Nt = m & I, en = yt ? n : Md(c);
          function Ut() {
            for (var cn = arguments.length, hn = je(cn), ri = cn; ri--; )
              hn[ri] = arguments[ri];
            if (Et)
              var Br = Hc(Ut), ii = Cd(hn, Br);
            if (L && (hn = J1(hn, L, X, Et)), de && (hn = X1(hn, de, Se, Et)), cn -= ii, Et && cn < nt) {
              var Da = Mi(hn, Br);
              return ok(
                c,
                m,
                sh,
                Ut.placeholder,
                S,
                hn,
                Da,
                De,
                Ue,
                nt - cn
              );
            }
            var Fi = ct ? S : this, qo = yt ? Fi[c] : c;
            return cn = hn.length, De ? hn = Y2(hn, De) : Nt && cn > 1 && hn.reverse(), at && Ue < cn && (hn.length = Ue), this && this !== ja && this instanceof Ut && (qo = en || Md(qo)), qo.apply(Fi, hn);
          }
          return Ut;
        }
        function rk(c, m) {
          return function(S, L) {
            return n2(S, c, m(L), {});
          };
        }
        function lh(c, m) {
          return function(S, L) {
            var X;
            if (S === n && L === n)
              return m;
            if (S !== n && (X = S), L !== n) {
              if (X === n)
                return L;
              typeof S == "string" || typeof L == "string" ? (S = ni(S), L = ni(L)) : (S = H1(S), L = H1(L)), X = c(S, L);
            }
            return X;
          };
        }
        function ng(c) {
          return Fo(function(m) {
            return m = Hn(m, Pr(Mt())), nn(function(S) {
              var L = this;
              return c(m, function(X) {
                return Er(X, L, S);
              });
            });
          });
        }
        function ch(c, m) {
          m = m === n ? " " : ni(m);
          var S = m.length;
          if (S < 2)
            return S ? Gp(m, c) : m;
          var L = Gp(m, Gm(c / gs(m)));
          return En(m) ? Cs(ti(L), 0, c).join("") : L.slice(0, c);
        }
        function E2(c, m, S, L) {
          var X = m & b, de = Md(c);
          function Se() {
            for (var De = -1, Ue = arguments.length, nt = -1, at = L.length, ct = je(at + Ue), yt = this && this !== ja && this instanceof Se ? de : c; ++nt < at; )
              ct[nt] = L[nt];
            for (; Ue--; )
              ct[nt++] = arguments[++De];
            return Er(yt, X ? S : this, ct);
          }
          return Se;
        }
        function ik(c) {
          return function(m, S, L) {
            return L && typeof L != "number" && Dr(m, S, L) && (S = L = n), m = $o(m), S === n ? (S = m, m = 0) : S = $o(S), L = L === n ? m < S ? 1 : -1 : $o(L), h2(m, S, L, c);
          };
        }
        function uh(c) {
          return function(m, S) {
            return typeof m == "string" && typeof S == "string" || (m = Ti(m), S = Ti(S)), c(m, S);
          };
        }
        function ok(c, m, S, L, X, de, Se, De, Ue, nt) {
          var at = m & k, ct = at ? Se : n, yt = at ? n : Se, Et = at ? de : n, Nt = at ? n : de;
          m |= at ? C : D, m &= ~(at ? D : C), m & g || (m &= -4);
          var en = [
            c,
            m,
            X,
            Et,
            ct,
            Nt,
            yt,
            De,
            Ue,
            nt
          ], Ut = S.apply(n, en);
          return ug(c) && gk(Ut, en), Ut.placeholder = L, yk(Ut, c, m);
        }
        function ag(c) {
          var m = Pa[c];
          return function(S, L) {
            if (S = Ti(S), L = L == null ? 0 : vr(Zt(L), 292), L && y1(S)) {
              var X = (An(S) + "e").split("e"), de = m(X[0] + "e" + (+X[1] + L));
              return X = (An(de) + "e").split("e"), +(X[0] + "e" + (+X[1] - L));
            }
            return m(S);
          };
        }
        var P2 = Fc && 1 / Rc(new Fc([, -0]))[1] == Z ? function(c) {
          return new Fc(c);
        } : Ag;
        function sk(c) {
          return function(m) {
            var S = pr(m);
            return S == le ? Lc(m) : S == Pe ? Tp(m) : xp(m, c(m));
          };
        }
        function Ro(c, m, S, L, X, de, Se, De) {
          var Ue = m & v;
          if (!Ue && typeof c != "function")
            throw new R(o);
          var nt = L ? L.length : 0;
          if (nt || (m &= -97, L = X = n), Se = Se === n ? Se : Ya(Zt(Se), 0), De = De === n ? De : Zt(De), nt -= X ? X.length : 0, m & D) {
            var at = L, ct = X;
            L = X = n;
          }
          var yt = Ue ? n : og(c), Et = [
            c,
            m,
            S,
            L,
            X,
            at,
            ct,
            de,
            Se,
            De
          ];
          if (yt && W2(Et, yt), c = Et[0], m = Et[1], S = Et[2], L = Et[3], X = Et[4], De = Et[9] = Et[9] === n ? Ue ? 0 : c.length : Ya(Et[9] - nt, 0), !De && m & (k | A) && (m &= -25), !m || m == b)
            var Nt = T2(c, m, S);
          else m == k || m == A ? Nt = I2(c, m, De) : (m == C || m == (b | C)) && !X.length ? Nt = E2(c, m, S, L) : Nt = sh.apply(n, Et);
          var en = yt ? $1 : gk;
          return yk(en(Nt, Et), c, m);
        }
        function lk(c, m, S, L) {
          return c === n || Ri(c, me[S]) && !$e.call(L, S) ? m : c;
        }
        function ck(c, m, S, L, X, de) {
          return ha(c) && ha(m) && (de.set(m, c), ah(c, m, n, ck, de), de.delete(m)), c;
        }
        function O2(c) {
          return Fd(c) ? n : c;
        }
        function uk(c, m, S, L, X, de) {
          var Se = S & p, De = c.length, Ue = m.length;
          if (De != Ue && !(Se && Ue > De))
            return !1;
          var nt = de.get(c), at = de.get(m);
          if (nt && at)
            return nt == m && at == c;
          var ct = -1, yt = !0, Et = S & w ? new yl() : n;
          for (de.set(c, m), de.set(m, c); ++ct < De; ) {
            var Nt = c[ct], en = m[ct];
            if (L)
              var Ut = Se ? L(en, Nt, ct, m, c, de) : L(Nt, en, ct, c, m, de);
            if (Ut !== n) {
              if (Ut)
                continue;
              yt = !1;
              break;
            }
            if (Et) {
              if (!bd(m, function(cn, hn) {
                if (!_l(Et, hn) && (Nt === cn || X(Nt, cn, S, L, de)))
                  return Et.push(hn);
              })) {
                yt = !1;
                break;
              }
            } else if (!(Nt === en || X(Nt, en, S, L, de))) {
              yt = !1;
              break;
            }
          }
          return de.delete(c), de.delete(m), yt;
        }
        function D2(c, m, S, L, X, de, Se) {
          switch (S) {
            case it:
              if (c.byteLength != m.byteLength || c.byteOffset != m.byteOffset)
                return !1;
              c = c.buffer, m = m.buffer;
            case It:
              return !(c.byteLength != m.byteLength || !de(new Nn(c), new Nn(m)));
            case ge:
            case Ve:
            case G:
              return Ri(+c, +m);
            case ce:
              return c.name == m.name && c.message == m.message;
            case Ee:
            case Xe:
              return c == m + "";
            case le:
              var De = Lc;
            case Pe:
              var Ue = L & p;
              if (De || (De = Rc), c.size != m.size && !Ue)
                return !1;
              var nt = Se.get(c);
              if (nt)
                return nt == m;
              L |= w, Se.set(c, m);
              var at = uk(De(c), De(m), L, X, de, Se);
              return Se.delete(c), at;
            case _e:
              if (Ed)
                return Ed.call(c) == Ed.call(m);
          }
          return !1;
        }
        function B2(c, m, S, L, X, de) {
          var Se = S & p, De = rg(c), Ue = De.length, nt = rg(m), at = nt.length;
          if (Ue != at && !Se)
            return !1;
          for (var ct = Ue; ct--; ) {
            var yt = De[ct];
            if (!(Se ? yt in m : $e.call(m, yt)))
              return !1;
          }
          var Et = de.get(c), Nt = de.get(m);
          if (Et && Nt)
            return Et == m && Nt == c;
          var en = !0;
          de.set(c, m), de.set(m, c);
          for (var Ut = Se; ++ct < Ue; ) {
            yt = De[ct];
            var cn = c[yt], hn = m[yt];
            if (L)
              var ri = Se ? L(hn, cn, yt, m, c, de) : L(cn, hn, yt, c, m, de);
            if (!(ri === n ? cn === hn || X(cn, hn, S, L, de) : ri)) {
              en = !1;
              break;
            }
            Ut || (Ut = yt == "constructor");
          }
          if (en && !Ut) {
            var Br = c.constructor, ii = m.constructor;
            Br != ii && "constructor" in c && "constructor" in m && !(typeof Br == "function" && Br instanceof Br && typeof ii == "function" && ii instanceof ii) && (en = !1);
          }
          return de.delete(c), de.delete(m), en;
        }
        function Fo(c) {
          return fg(vk(c, n, Ak), c + "");
        }
        function rg(c) {
          return P1(c, tr, lg);
        }
        function ig(c) {
          return P1(c, Yr, dk);
        }
        var og = Jm ? function(c) {
          return Jm.get(c);
        } : Ag;
        function dh(c) {
          for (var m = c.name + "", S = Nc[m], L = $e.call(Nc, m) ? S.length : 0; L--; ) {
            var X = S[L], de = X.func;
            if (de == null || de == c)
              return X.name;
          }
          return m;
        }
        function Hc(c) {
          var m = $e.call(se, "placeholder") ? se : c;
          return m.placeholder;
        }
        function Mt() {
          var c = se.iteratee || Sg;
          return c = c === Sg ? B1 : c, arguments.length ? c(arguments[0], arguments[1]) : c;
        }
        function fh(c, m) {
          var S = c.__data__;
          return $2(m) ? S[typeof m == "string" ? "string" : "hash"] : S.map;
        }
        function sg(c) {
          for (var m = tr(c), S = m.length; S--; ) {
            var L = m[S], X = c[L];
            m[S] = [L, X, hk(X)];
          }
          return m;
        }
        function kl(c, m) {
          var S = la(c, m);
          return D1(S) ? S : n;
        }
        function V2(c) {
          var m = $e.call(c, ki), S = c[ki];
          try {
            c[ki] = n;
            var L = !0;
          } catch {
          }
          var X = mt.call(c);
          return L && (m ? c[ki] = S : delete c[ki]), X;
        }
        var lg = Mp ? function(c) {
          return c == null ? [] : (c = Pn(c), io(Mp(c), function(m) {
            return xt.call(c, m);
          }));
        } : xg, dk = Mp ? function(c) {
          for (var m = []; c; )
            oo(m, lg(c)), c = ma(c);
          return m;
        } : xg, pr = Or;
        (Lp && pr(new Lp(new ArrayBuffer(1))) != it || xd && pr(new xd()) != le || Rp && pr(Rp.resolve()) != ie || Fc && pr(new Fc()) != Pe || Td && pr(new Td()) != Ze) && (pr = function(c) {
          var m = Or(c), S = m == Ie ? c.constructor : n, L = S ? Sl(S) : "";
          if (L)
            switch (L) {
              case vB:
                return it;
              case pB:
                return le;
              case gB:
                return ie;
              case yB:
                return Pe;
              case bB:
                return Ze;
            }
          return m;
        });
        function M2(c, m, S) {
          for (var L = -1, X = S.length; ++L < X; ) {
            var de = S[L], Se = de.size;
            switch (de.type) {
              case "drop":
                c += Se;
                break;
              case "dropRight":
                m -= Se;
                break;
              case "take":
                m = vr(m, c + Se);
                break;
              case "takeRight":
                c = Ya(c, m - Se);
                break;
            }
          }
          return { start: c, end: m };
        }
        function L2(c) {
          var m = c.match(ll);
          return m ? m[1].split(sd) : [];
        }
        function fk(c, m, S) {
          m = Ss(m, c);
          for (var L = -1, X = m.length, de = !1; ++L < X; ) {
            var Se = co(m[L]);
            if (!(de = c != null && S(c, Se)))
              break;
            c = c[Se];
          }
          return de || ++L != X ? de : (X = c == null ? 0 : c.length, !!X && yh(X) && No(Se, X) && (Qt(c) || Cl(c)));
        }
        function R2(c) {
          var m = c.length, S = new c.constructor(m);
          return m && typeof c[0] == "string" && $e.call(c, "index") && (S.index = c.index, S.input = c.input), S;
        }
        function mk(c) {
          return typeof c.constructor == "function" && !Ld(c) ? Uc(ma(c)) : {};
        }
        function F2(c, m, S) {
          var L = c.constructor;
          switch (m) {
            case It:
              return tg(c);
            case ge:
            case Ve:
              return new L(+c);
            case it:
              return w2(c, S);
            case Bt:
            case tn:
            case Kn:
            case oa:
            case $a:
            case ba:
            case jn:
            case Rn:
            case er:
              return G1(c, S);
            case le:
              return new L();
            case G:
            case Xe:
              return new L(c);
            case Ee:
              return k2(c);
            case Pe:
              return new L();
            case _e:
              return S2(c);
          }
        }
        function N2(c, m) {
          var S = m.length;
          if (!S)
            return c;
          var L = S - 1;
          return m[L] = (S > 1 ? "& " : "") + m[L], m = m.join(S > 2 ? ", " : " "), c.replace(jv, `{
/* [wrapped with ` + m + `] */
`);
        }
        function U2(c) {
          return Qt(c) || Cl(c) || !!(wa && c && c[wa]);
        }
        function No(c, m) {
          var S = typeof c;
          return m = m ?? ue, !!m && (S == "number" || S != "symbol" && Xv.test(c)) && c > -1 && c % 1 == 0 && c < m;
        }
        function Dr(c, m, S) {
          if (!ha(S))
            return !1;
          var L = typeof m;
          return (L == "number" ? jr(S) && No(m, S.length) : L == "string" && m in S) ? Ri(S[m], c) : !1;
        }
        function cg(c, m) {
          if (Qt(c))
            return !1;
          var S = typeof c;
          return S == "number" || S == "symbol" || S == "boolean" || c == null || ai(c) ? !0 : to.test(c) || !Ka.test(c) || m != null && c in Pn(m);
        }
        function $2(c) {
          var m = typeof c;
          return m == "string" || m == "number" || m == "symbol" || m == "boolean" ? c !== "__proto__" : c === null;
        }
        function ug(c) {
          var m = dh(c), S = se[m];
          if (typeof S != "function" || !(m in dn.prototype))
            return !1;
          if (c === S)
            return !0;
          var L = og(S);
          return !!L && c === L[0];
        }
        function q2(c) {
          return !!lt && lt in c;
        }
        var H2 = Me ? Uo : Tg;
        function Ld(c) {
          var m = c && c.constructor, S = typeof m == "function" && m.prototype || me;
          return c === S;
        }
        function hk(c) {
          return c === c && !ha(c);
        }
        function _k(c, m) {
          return function(S) {
            return S == null ? !1 : S[c] === m && (m !== n || c in Pn(S));
          };
        }
        function z2(c) {
          var m = ph(c, function(L) {
            return S.size === d && S.clear(), L;
          }), S = m.cache;
          return m;
        }
        function W2(c, m) {
          var S = c[1], L = m[1], X = S | L, de = X < (b | v | P), Se = L == P && S == k || L == P && S == O && c[7].length <= m[8] || L == (P | O) && m[7].length <= m[8] && S == k;
          if (!(de || Se))
            return c;
          L & b && (c[2] = m[2], X |= S & b ? 0 : g);
          var De = m[3];
          if (De) {
            var Ue = c[3];
            c[3] = Ue ? J1(Ue, De, m[4]) : De, c[4] = Ue ? Mi(c[3], u) : m[4];
          }
          return De = m[5], De && (Ue = c[5], c[5] = Ue ? X1(Ue, De, m[6]) : De, c[6] = Ue ? Mi(c[5], u) : m[6]), De = m[7], De && (c[7] = De), L & P && (c[8] = c[8] == null ? m[8] : vr(c[8], m[8])), c[9] == null && (c[9] = m[9]), c[0] = m[0], c[1] = X, c;
        }
        function K2(c) {
          var m = [];
          if (c != null)
            for (var S in Pn(c))
              m.push(S);
          return m;
        }
        function j2(c) {
          return mt.call(c);
        }
        function vk(c, m, S) {
          return m = Ya(m === n ? c.length - 1 : m, 0), function() {
            for (var L = arguments, X = -1, de = Ya(L.length - m, 0), Se = je(de); ++X < de; )
              Se[X] = L[m + X];
            X = -1;
            for (var De = je(m + 1); ++X < m; )
              De[X] = L[X];
            return De[m] = S(Se), Er(c, this, De);
          };
        }
        function pk(c, m) {
          return m.length < 2 ? c : wl(c, Ai(m, 0, -1));
        }
        function Y2(c, m) {
          for (var S = c.length, L = vr(m.length, S), X = Kr(c); L--; ) {
            var de = m[L];
            c[L] = No(de, S) ? X[de] : n;
          }
          return c;
        }
        function dg(c, m) {
          if (!(m === "constructor" && typeof c[m] == "function") && m != "__proto__")
            return c[m];
        }
        var gk = bk($1), Rd = cB || function(c, m) {
          return ja.setTimeout(c, m);
        }, fg = bk(p2);
        function yk(c, m, S) {
          var L = m + "";
          return fg(c, N2(L, G2(L2(L), S)));
        }
        function bk(c) {
          var m = 0, S = 0;
          return function() {
            var L = mB(), X = B - (L - S);
            if (S = L, X > 0) {
              if (++m >= V)
                return arguments[0];
            } else
              m = 0;
            return c.apply(n, arguments);
          };
        }
        function mh(c, m) {
          var S = -1, L = c.length, X = L - 1;
          for (m = m === n ? L : m; ++S < m; ) {
            var de = Yp(S, X), Se = c[de];
            c[de] = c[S], c[S] = Se;
          }
          return c.length = m, c;
        }
        var wk = z2(function(c) {
          var m = [];
          return c.charCodeAt(0) === 46 && m.push(""), c.replace(sl, function(S, L, X, de) {
            m.push(X ? de.replace(Gv, "$1") : L || S);
          }), m;
        });
        function co(c) {
          if (typeof c == "string" || ai(c))
            return c;
          var m = c + "";
          return m == "0" && 1 / c == -Z ? "-0" : m;
        }
        function Sl(c) {
          if (c != null) {
            try {
              return He.call(c);
            } catch {
            }
            try {
              return c + "";
            } catch {
            }
          }
          return "";
        }
        function G2(c, m) {
          return Wr(he, function(S) {
            var L = "_." + S[0];
            m & S[1] && !Dc(c, L) && c.push(L);
          }), c.sort();
        }
        function kk(c) {
          if (c instanceof dn)
            return c.clone();
          var m = new Si(c.__wrapped__, c.__chain__);
          return m.__actions__ = Kr(c.__actions__), m.__index__ = c.__index__, m.__values__ = c.__values__, m;
        }
        function Q2(c, m, S) {
          (S ? Dr(c, m, S) : m === n) ? m = 1 : m = Ya(Zt(m), 0);
          var L = c == null ? 0 : c.length;
          if (!L || m < 1)
            return [];
          for (var X = 0, de = 0, Se = je(Gm(L / m)); X < L; )
            Se[de++] = Ai(c, X, X += m);
          return Se;
        }
        function J2(c) {
          for (var m = -1, S = c == null ? 0 : c.length, L = 0, X = []; ++m < S; ) {
            var de = c[m];
            de && (X[L++] = de);
          }
          return X;
        }
        function X2() {
          var c = arguments.length;
          if (!c)
            return [];
          for (var m = je(c - 1), S = arguments[0], L = c; L--; )
            m[L - 1] = arguments[L];
          return oo(Qt(S) ? Kr(S) : [S], lr(m, 1));
        }
        var Z2 = nn(function(c, m) {
          return Oa(c) ? Od(c, lr(m, 1, Oa, !0)) : [];
        }), eV = nn(function(c, m) {
          var S = xi(m);
          return Oa(S) && (S = n), Oa(c) ? Od(c, lr(m, 1, Oa, !0), Mt(S, 2)) : [];
        }), tV = nn(function(c, m) {
          var S = xi(m);
          return Oa(S) && (S = n), Oa(c) ? Od(c, lr(m, 1, Oa, !0), n, S) : [];
        });
        function nV(c, m, S) {
          var L = c == null ? 0 : c.length;
          return L ? (m = S || m === n ? 1 : Zt(m), Ai(c, m < 0 ? 0 : m, L)) : [];
        }
        function aV(c, m, S) {
          var L = c == null ? 0 : c.length;
          return L ? (m = S || m === n ? 1 : Zt(m), m = L - m, Ai(c, 0, m < 0 ? 0 : m)) : [];
        }
        function rV(c, m) {
          return c && c.length ? ih(c, Mt(m, 3), !0, !0) : [];
        }
        function iV(c, m) {
          return c && c.length ? ih(c, Mt(m, 3), !0) : [];
        }
        function oV(c, m, S, L) {
          var X = c == null ? 0 : c.length;
          return X ? (S && typeof S != "number" && Dr(c, m, S) && (S = 0, L = X), XB(c, m, S, L)) : [];
        }
        function Sk(c, m, S) {
          var L = c == null ? 0 : c.length;
          if (!L)
            return -1;
          var X = S == null ? 0 : Zt(S);
          return X < 0 && (X = Ya(L + X, 0)), Vc(c, Mt(m, 3), X);
        }
        function Ck(c, m, S) {
          var L = c == null ? 0 : c.length;
          if (!L)
            return -1;
          var X = L - 1;
          return S !== n && (X = Zt(S), X = S < 0 ? Ya(L + X, 0) : vr(X, L - 1)), Vc(c, Mt(m, 3), X, !0);
        }
        function Ak(c) {
          var m = c == null ? 0 : c.length;
          return m ? lr(c, 1) : [];
        }
        function sV(c) {
          var m = c == null ? 0 : c.length;
          return m ? lr(c, Z) : [];
        }
        function lV(c, m) {
          var S = c == null ? 0 : c.length;
          return S ? (m = m === n ? 1 : Zt(m), lr(c, m)) : [];
        }
        function cV(c) {
          for (var m = -1, S = c == null ? 0 : c.length, L = {}; ++m < S; ) {
            var X = c[m];
            L[X[0]] = X[1];
          }
          return L;
        }
        function xk(c) {
          return c && c.length ? c[0] : n;
        }
        function uV(c, m, S) {
          var L = c == null ? 0 : c.length;
          if (!L)
            return -1;
          var X = S == null ? 0 : Zt(S);
          return X < 0 && (X = Ya(L + X, 0)), yi(c, m, X);
        }
        function dV(c) {
          var m = c == null ? 0 : c.length;
          return m ? Ai(c, 0, -1) : [];
        }
        var fV = nn(function(c) {
          var m = Hn(c, Zp);
          return m.length && m[0] === c[0] ? Hp(m) : [];
        }), mV = nn(function(c) {
          var m = xi(c), S = Hn(c, Zp);
          return m === xi(S) ? m = n : S.pop(), S.length && S[0] === c[0] ? Hp(S, Mt(m, 2)) : [];
        }), hV = nn(function(c) {
          var m = xi(c), S = Hn(c, Zp);
          return m = typeof m == "function" ? m : n, m && S.pop(), S.length && S[0] === c[0] ? Hp(S, n, m) : [];
        });
        function _V(c, m) {
          return c == null ? "" : dB.call(c, m);
        }
        function xi(c) {
          var m = c == null ? 0 : c.length;
          return m ? c[m - 1] : n;
        }
        function vV(c, m, S) {
          var L = c == null ? 0 : c.length;
          if (!L)
            return -1;
          var X = L;
          return S !== n && (X = Zt(S), X = X < 0 ? Ya(L + X, 0) : vr(X, L - 1)), m === m ? Ep(c, m, X) : Vc(c, Fm, X, !0);
        }
        function pV(c, m) {
          return c && c.length ? R1(c, Zt(m)) : n;
        }
        var gV = nn(Tk);
        function Tk(c, m) {
          return c && c.length && m && m.length ? jp(c, m) : c;
        }
        function yV(c, m, S) {
          return c && c.length && m && m.length ? jp(c, m, Mt(S, 2)) : c;
        }
        function bV(c, m, S) {
          return c && c.length && m && m.length ? jp(c, m, n, S) : c;
        }
        var wV = Fo(function(c, m) {
          var S = c == null ? 0 : c.length, L = Np(c, m);
          return U1(c, Hn(m, function(X) {
            return No(X, S) ? +X : X;
          }).sort(Q1)), L;
        });
        function kV(c, m) {
          var S = [];
          if (!(c && c.length))
            return S;
          var L = -1, X = [], de = c.length;
          for (m = Mt(m, 3); ++L < de; ) {
            var Se = c[L];
            m(Se, L, c) && (S.push(Se), X.push(L));
          }
          return U1(c, X), S;
        }
        function mg(c) {
          return c == null ? c : _B.call(c);
        }
        function SV(c, m, S) {
          var L = c == null ? 0 : c.length;
          return L ? (S && typeof S != "number" && Dr(c, m, S) ? (m = 0, S = L) : (m = m == null ? 0 : Zt(m), S = S === n ? L : Zt(S)), Ai(c, m, S)) : [];
        }
        function CV(c, m) {
          return rh(c, m);
        }
        function AV(c, m, S) {
          return Qp(c, m, Mt(S, 2));
        }
        function xV(c, m) {
          var S = c == null ? 0 : c.length;
          if (S) {
            var L = rh(c, m);
            if (L < S && Ri(c[L], m))
              return L;
          }
          return -1;
        }
        function TV(c, m) {
          return rh(c, m, !0);
        }
        function IV(c, m, S) {
          return Qp(c, m, Mt(S, 2), !0);
        }
        function EV(c, m) {
          var S = c == null ? 0 : c.length;
          if (S) {
            var L = rh(c, m, !0) - 1;
            if (Ri(c[L], m))
              return L;
          }
          return -1;
        }
        function PV(c) {
          return c && c.length ? q1(c) : [];
        }
        function OV(c, m) {
          return c && c.length ? q1(c, Mt(m, 2)) : [];
        }
        function DV(c) {
          var m = c == null ? 0 : c.length;
          return m ? Ai(c, 1, m) : [];
        }
        function BV(c, m, S) {
          return c && c.length ? (m = S || m === n ? 1 : Zt(m), Ai(c, 0, m < 0 ? 0 : m)) : [];
        }
        function VV(c, m, S) {
          var L = c == null ? 0 : c.length;
          return L ? (m = S || m === n ? 1 : Zt(m), m = L - m, Ai(c, m < 0 ? 0 : m, L)) : [];
        }
        function MV(c, m) {
          return c && c.length ? ih(c, Mt(m, 3), !1, !0) : [];
        }
        function LV(c, m) {
          return c && c.length ? ih(c, Mt(m, 3)) : [];
        }
        var RV = nn(function(c) {
          return ks(lr(c, 1, Oa, !0));
        }), FV = nn(function(c) {
          var m = xi(c);
          return Oa(m) && (m = n), ks(lr(c, 1, Oa, !0), Mt(m, 2));
        }), NV = nn(function(c) {
          var m = xi(c);
          return m = typeof m == "function" ? m : n, ks(lr(c, 1, Oa, !0), n, m);
        });
        function UV(c) {
          return c && c.length ? ks(c) : [];
        }
        function $V(c, m) {
          return c && c.length ? ks(c, Mt(m, 2)) : [];
        }
        function qV(c, m) {
          return m = typeof m == "function" ? m : n, c && c.length ? ks(c, n, m) : [];
        }
        function hg(c) {
          if (!(c && c.length))
            return [];
          var m = 0;
          return c = io(c, function(S) {
            if (Oa(S))
              return m = Ya(S.length, m), !0;
          }), kd(m, function(S) {
            return Hn(c, wd(S));
          });
        }
        function Ik(c, m) {
          if (!(c && c.length))
            return [];
          var S = hg(c);
          return m == null ? S : Hn(S, function(L) {
            return Er(m, n, L);
          });
        }
        var HV = nn(function(c, m) {
          return Oa(c) ? Od(c, m) : [];
        }), zV = nn(function(c) {
          return Xp(io(c, Oa));
        }), WV = nn(function(c) {
          var m = xi(c);
          return Oa(m) && (m = n), Xp(io(c, Oa), Mt(m, 2));
        }), KV = nn(function(c) {
          var m = xi(c);
          return m = typeof m == "function" ? m : n, Xp(io(c, Oa), n, m);
        }), jV = nn(hg);
        function YV(c, m) {
          return K1(c || [], m || [], Pd);
        }
        function GV(c, m) {
          return K1(c || [], m || [], Vd);
        }
        var QV = nn(function(c) {
          var m = c.length, S = m > 1 ? c[m - 1] : n;
          return S = typeof S == "function" ? (c.pop(), S) : n, Ik(c, S);
        });
        function Ek(c) {
          var m = se(c);
          return m.__chain__ = !0, m;
        }
        function JV(c, m) {
          return m(c), c;
        }
        function hh(c, m) {
          return m(c);
        }
        var XV = Fo(function(c) {
          var m = c.length, S = m ? c[0] : 0, L = this.__wrapped__, X = function(de) {
            return Np(de, c);
          };
          return m > 1 || this.__actions__.length || !(L instanceof dn) || !No(S) ? this.thru(X) : (L = L.slice(S, +S + (m ? 1 : 0)), L.__actions__.push({
            func: hh,
            args: [X],
            thisArg: n
          }), new Si(L, this.__chain__).thru(function(de) {
            return m && !de.length && de.push(n), de;
          }));
        });
        function ZV() {
          return Ek(this);
        }
        function eM() {
          return new Si(this.value(), this.__chain__);
        }
        function tM() {
          this.__values__ === n && (this.__values__ = Hk(this.value()));
          var c = this.__index__ >= this.__values__.length, m = c ? n : this.__values__[this.__index__++];
          return { done: c, value: m };
        }
        function nM() {
          return this;
        }
        function aM(c) {
          for (var m, S = this; S instanceof Zm; ) {
            var L = kk(S);
            L.__index__ = 0, L.__values__ = n, m ? X.__wrapped__ = L : m = L;
            var X = L;
            S = S.__wrapped__;
          }
          return X.__wrapped__ = c, m;
        }
        function rM() {
          var c = this.__wrapped__;
          if (c instanceof dn) {
            var m = c;
            return this.__actions__.length && (m = new dn(this)), m = m.reverse(), m.__actions__.push({
              func: hh,
              args: [mg],
              thisArg: n
            }), new Si(m, this.__chain__);
          }
          return this.thru(mg);
        }
        function iM() {
          return W1(this.__wrapped__, this.__actions__);
        }
        var oM = oh(function(c, m, S) {
          $e.call(c, S) ? ++c[S] : Lo(c, S, 1);
        });
        function sM(c, m, S) {
          var L = Qt(c) ? Rm : JB;
          return S && Dr(c, m, S) && (m = n), L(c, Mt(m, 3));
        }
        function lM(c, m) {
          var S = Qt(c) ? io : I1;
          return S(c, Mt(m, 3));
        }
        var cM = nk(Sk), uM = nk(Ck);
        function dM(c, m) {
          return lr(_h(c, m), 1);
        }
        function fM(c, m) {
          return lr(_h(c, m), Z);
        }
        function mM(c, m, S) {
          return S = S === n ? 1 : Zt(S), lr(_h(c, m), S);
        }
        function Pk(c, m) {
          var S = Qt(c) ? Wr : ws;
          return S(c, Mt(m, 3));
        }
        function Ok(c, m) {
          var S = Qt(c) ? bp : T1;
          return S(c, Mt(m, 3));
        }
        var hM = oh(function(c, m, S) {
          $e.call(c, S) ? c[S].push(m) : Lo(c, S, [m]);
        });
        function _M(c, m, S, L) {
          c = jr(c) ? c : Wc(c), S = S && !L ? Zt(S) : 0;
          var X = c.length;
          return S < 0 && (S = Ya(X + S, 0)), bh(c) ? S <= X && c.indexOf(m, S) > -1 : !!X && yi(c, m, S) > -1;
        }
        var vM = nn(function(c, m, S) {
          var L = -1, X = typeof m == "function", de = jr(c) ? je(c.length) : [];
          return ws(c, function(Se) {
            de[++L] = X ? Er(m, Se, S) : Dd(Se, m, S);
          }), de;
        }), pM = oh(function(c, m, S) {
          Lo(c, S, m);
        });
        function _h(c, m) {
          var S = Qt(c) ? Hn : V1;
          return S(c, Mt(m, 3));
        }
        function gM(c, m, S, L) {
          return c == null ? [] : (Qt(m) || (m = m == null ? [] : [m]), S = L ? n : S, Qt(S) || (S = S == null ? [] : [S]), F1(c, m, S));
        }
        var yM = oh(function(c, m, S) {
          c[S ? 0 : 1].push(m);
        }, function() {
          return [[], []];
        });
        function bM(c, m, S) {
          var L = Qt(c) ? yd : Um, X = arguments.length < 3;
          return L(c, Mt(m, 4), S, X, ws);
        }
        function wM(c, m, S) {
          var L = Qt(c) ? wp : Um, X = arguments.length < 3;
          return L(c, Mt(m, 4), S, X, T1);
        }
        function kM(c, m) {
          var S = Qt(c) ? io : I1;
          return S(c, gh(Mt(m, 3)));
        }
        function SM(c) {
          var m = Qt(c) ? S1 : _2;
          return m(c);
        }
        function CM(c, m, S) {
          (S ? Dr(c, m, S) : m === n) ? m = 1 : m = Zt(m);
          var L = Qt(c) ? KB : v2;
          return L(c, m);
        }
        function AM(c) {
          var m = Qt(c) ? jB : g2;
          return m(c);
        }
        function xM(c) {
          if (c == null)
            return 0;
          if (jr(c))
            return bh(c) ? gs(c) : c.length;
          var m = pr(c);
          return m == le || m == Pe ? c.size : Wp(c).length;
        }
        function TM(c, m, S) {
          var L = Qt(c) ? bd : y2;
          return S && Dr(c, m, S) && (m = n), L(c, Mt(m, 3));
        }
        var IM = nn(function(c, m) {
          if (c == null)
            return [];
          var S = m.length;
          return S > 1 && Dr(c, m[0], m[1]) ? m = [] : S > 2 && Dr(m[0], m[1], m[2]) && (m = [m[0]]), F1(c, lr(m, 1), []);
        }), vh = lB || function() {
          return ja.Date.now();
        };
        function EM(c, m) {
          if (typeof m != "function")
            throw new R(o);
          return c = Zt(c), function() {
            if (--c < 1)
              return m.apply(this, arguments);
          };
        }
        function Dk(c, m, S) {
          return m = S ? n : m, m = c && m == null ? c.length : m, Ro(c, P, n, n, n, n, m);
        }
        function Bk(c, m) {
          var S;
          if (typeof m != "function")
            throw new R(o);
          return c = Zt(c), function() {
            return --c > 0 && (S = m.apply(this, arguments)), c <= 1 && (m = n), S;
          };
        }
        var _g = nn(function(c, m, S) {
          var L = b;
          if (S.length) {
            var X = Mi(S, Hc(_g));
            L |= C;
          }
          return Ro(c, L, m, S, X);
        }), Vk = nn(function(c, m, S) {
          var L = b | v;
          if (S.length) {
            var X = Mi(S, Hc(Vk));
            L |= C;
          }
          return Ro(m, L, c, S, X);
        });
        function Mk(c, m, S) {
          m = S ? n : m;
          var L = Ro(c, k, n, n, n, n, n, m);
          return L.placeholder = Mk.placeholder, L;
        }
        function Lk(c, m, S) {
          m = S ? n : m;
          var L = Ro(c, A, n, n, n, n, n, m);
          return L.placeholder = Lk.placeholder, L;
        }
        function Rk(c, m, S) {
          var L, X, de, Se, De, Ue, nt = 0, at = !1, ct = !1, yt = !0;
          if (typeof c != "function")
            throw new R(o);
          m = Ti(m) || 0, ha(S) && (at = !!S.leading, ct = "maxWait" in S, de = ct ? Ya(Ti(S.maxWait) || 0, m) : de, yt = "trailing" in S ? !!S.trailing : yt);
          function Et(Da) {
            var Fi = L, qo = X;
            return L = X = n, nt = Da, Se = c.apply(qo, Fi), Se;
          }
          function Nt(Da) {
            return nt = Da, De = Rd(cn, m), at ? Et(Da) : Se;
          }
          function en(Da) {
            var Fi = Da - Ue, qo = Da - nt, nS = m - Fi;
            return ct ? vr(nS, de - qo) : nS;
          }
          function Ut(Da) {
            var Fi = Da - Ue, qo = Da - nt;
            return Ue === n || Fi >= m || Fi < 0 || ct && qo >= de;
          }
          function cn() {
            var Da = vh();
            if (Ut(Da))
              return hn(Da);
            De = Rd(cn, en(Da));
          }
          function hn(Da) {
            return De = n, yt && L ? Et(Da) : (L = X = n, Se);
          }
          function ri() {
            De !== n && j1(De), nt = 0, L = Ue = X = De = n;
          }
          function Br() {
            return De === n ? Se : hn(vh());
          }
          function ii() {
            var Da = vh(), Fi = Ut(Da);
            if (L = arguments, X = this, Ue = Da, Fi) {
              if (De === n)
                return Nt(Ue);
              if (ct)
                return j1(De), De = Rd(cn, m), Et(Ue);
            }
            return De === n && (De = Rd(cn, m)), Se;
          }
          return ii.cancel = ri, ii.flush = Br, ii;
        }
        var PM = nn(function(c, m) {
          return x1(c, 1, m);
        }), OM = nn(function(c, m, S) {
          return x1(c, Ti(m) || 0, S);
        });
        function DM(c) {
          return Ro(c, I);
        }
        function ph(c, m) {
          if (typeof c != "function" || m != null && typeof m != "function")
            throw new R(o);
          var S = function() {
            var L = arguments, X = m ? m.apply(this, L) : L[0], de = S.cache;
            if (de.has(X))
              return de.get(X);
            var Se = c.apply(this, L);
            return S.cache = de.set(X, Se) || de, Se;
          };
          return S.cache = new (ph.Cache || Mo)(), S;
        }
        ph.Cache = Mo;
        function gh(c) {
          if (typeof c != "function")
            throw new R(o);
          return function() {
            var m = arguments;
            switch (m.length) {
              case 0:
                return !c.call(this);
              case 1:
                return !c.call(this, m[0]);
              case 2:
                return !c.call(this, m[0], m[1]);
              case 3:
                return !c.call(this, m[0], m[1], m[2]);
            }
            return !c.apply(this, m);
          };
        }
        function BM(c) {
          return Bk(2, c);
        }
        var VM = b2(function(c, m) {
          m = m.length == 1 && Qt(m[0]) ? Hn(m[0], Pr(Mt())) : Hn(lr(m, 1), Pr(Mt()));
          var S = m.length;
          return nn(function(L) {
            for (var X = -1, de = vr(L.length, S); ++X < de; )
              L[X] = m[X].call(this, L[X]);
            return Er(c, this, L);
          });
        }), vg = nn(function(c, m) {
          var S = Mi(m, Hc(vg));
          return Ro(c, C, n, m, S);
        }), Fk = nn(function(c, m) {
          var S = Mi(m, Hc(Fk));
          return Ro(c, D, n, m, S);
        }), MM = Fo(function(c, m) {
          return Ro(c, O, n, n, n, m);
        });
        function LM(c, m) {
          if (typeof c != "function")
            throw new R(o);
          return m = m === n ? m : Zt(m), nn(c, m);
        }
        function RM(c, m) {
          if (typeof c != "function")
            throw new R(o);
          return m = m == null ? 0 : Ya(Zt(m), 0), nn(function(S) {
            var L = S[m], X = Cs(S, 0, m);
            return L && oo(X, L), Er(c, this, X);
          });
        }
        function FM(c, m, S) {
          var L = !0, X = !0;
          if (typeof c != "function")
            throw new R(o);
          return ha(S) && (L = "leading" in S ? !!S.leading : L, X = "trailing" in S ? !!S.trailing : X), Rk(c, m, {
            leading: L,
            maxWait: m,
            trailing: X
          });
        }
        function NM(c) {
          return Dk(c, 1);
        }
        function UM(c, m) {
          return vg(eg(m), c);
        }
        function $M() {
          if (!arguments.length)
            return [];
          var c = arguments[0];
          return Qt(c) ? c : [c];
        }
        function qM(c) {
          return Ci(c, y);
        }
        function HM(c, m) {
          return m = typeof m == "function" ? m : n, Ci(c, y, m);
        }
        function zM(c) {
          return Ci(c, f | y);
        }
        function WM(c, m) {
          return m = typeof m == "function" ? m : n, Ci(c, f | y, m);
        }
        function KM(c, m) {
          return m == null || A1(c, m, tr(m));
        }
        function Ri(c, m) {
          return c === m || c !== c && m !== m;
        }
        var jM = uh(qp), YM = uh(function(c, m) {
          return c >= m;
        }), Cl = O1(/* @__PURE__ */ (function() {
          return arguments;
        })()) ? O1 : function(c) {
          return ka(c) && $e.call(c, "callee") && !xt.call(c, "callee");
        }, Qt = je.isArray, GM = Om ? Pr(Om) : a2;
        function jr(c) {
          return c != null && yh(c.length) && !Uo(c);
        }
        function Oa(c) {
          return ka(c) && jr(c);
        }
        function QM(c) {
          return c === !0 || c === !1 || ka(c) && Or(c) == ge;
        }
        var As = uB || Tg, JM = Dm ? Pr(Dm) : r2;
        function XM(c) {
          return ka(c) && c.nodeType === 1 && !Fd(c);
        }
        function ZM(c) {
          if (c == null)
            return !0;
          if (jr(c) && (Qt(c) || typeof c == "string" || typeof c.splice == "function" || As(c) || zc(c) || Cl(c)))
            return !c.length;
          var m = pr(c);
          if (m == le || m == Pe)
            return !c.size;
          if (Ld(c))
            return !Wp(c).length;
          for (var S in c)
            if ($e.call(c, S))
              return !1;
          return !0;
        }
        function eL(c, m) {
          return Bd(c, m);
        }
        function tL(c, m, S) {
          S = typeof S == "function" ? S : n;
          var L = S ? S(c, m) : n;
          return L === n ? Bd(c, m, n, S) : !!L;
        }
        function pg(c) {
          if (!ka(c))
            return !1;
          var m = Or(c);
          return m == ce || m == Ne || typeof c.message == "string" && typeof c.name == "string" && !Fd(c);
        }
        function nL(c) {
          return typeof c == "number" && y1(c);
        }
        function Uo(c) {
          if (!ha(c))
            return !1;
          var m = Or(c);
          return m == ne || m == Q || m == z || m == we;
        }
        function Nk(c) {
          return typeof c == "number" && c == Zt(c);
        }
        function yh(c) {
          return typeof c == "number" && c > -1 && c % 1 == 0 && c <= ue;
        }
        function ha(c) {
          var m = typeof c;
          return c != null && (m == "object" || m == "function");
        }
        function ka(c) {
          return c != null && typeof c == "object";
        }
        var Uk = Bm ? Pr(Bm) : o2;
        function aL(c, m) {
          return c === m || zp(c, m, sg(m));
        }
        function rL(c, m, S) {
          return S = typeof S == "function" ? S : n, zp(c, m, sg(m), S);
        }
        function iL(c) {
          return $k(c) && c != +c;
        }
        function oL(c) {
          if (H2(c))
            throw new Kt(i);
          return D1(c);
        }
        function sL(c) {
          return c === null;
        }
        function lL(c) {
          return c == null;
        }
        function $k(c) {
          return typeof c == "number" || ka(c) && Or(c) == G;
        }
        function Fd(c) {
          if (!ka(c) || Or(c) != Ie)
            return !1;
          var m = ma(c);
          if (m === null)
            return !0;
          var S = $e.call(m, "constructor") && m.constructor;
          return typeof S == "function" && S instanceof S && He.call(S) == Ct;
        }
        var gg = Oc ? Pr(Oc) : s2;
        function cL(c) {
          return Nk(c) && c >= -ue && c <= ue;
        }
        var qk = Vm ? Pr(Vm) : l2;
        function bh(c) {
          return typeof c == "string" || !Qt(c) && ka(c) && Or(c) == Xe;
        }
        function ai(c) {
          return typeof c == "symbol" || ka(c) && Or(c) == _e;
        }
        var zc = Mm ? Pr(Mm) : c2;
        function uL(c) {
          return c === n;
        }
        function dL(c) {
          return ka(c) && pr(c) == Ze;
        }
        function fL(c) {
          return ka(c) && Or(c) == _t;
        }
        var mL = uh(Kp), hL = uh(function(c, m) {
          return c <= m;
        });
        function Hk(c) {
          if (!c)
            return [];
          if (jr(c))
            return bh(c) ? ti(c) : Kr(c);
          if (wi && c[wi])
            return Wm(c[wi]());
          var m = pr(c), S = m == le ? Lc : m == Pe ? Rc : Wc;
          return S(c);
        }
        function $o(c) {
          if (!c)
            return c === 0 ? c : 0;
          if (c = Ti(c), c === Z || c === -Z) {
            var m = c < 0 ? -1 : 1;
            return m * Y;
          }
          return c === c ? c : 0;
        }
        function Zt(c) {
          var m = $o(c), S = m % 1;
          return m === m ? S ? m - S : m : 0;
        }
        function zk(c) {
          return c ? bl(Zt(c), 0, q) : 0;
        }
        function Ti(c) {
          if (typeof c == "number")
            return c;
          if (ai(c))
            return U;
          if (ha(c)) {
            var m = typeof c.valueOf == "function" ? c.valueOf() : c;
            c = ha(m) ? m + "" : m;
          }
          if (typeof c != "string")
            return c === 0 ? c : +c;
          c = qm(c);
          var S = Cc.test(c);
          return S || dl.test(c) ? gp(c.slice(2), S ? 2 : 8) : Qv.test(c) ? U : +c;
        }
        function Wk(c) {
          return lo(c, Yr(c));
        }
        function _L(c) {
          return c ? bl(Zt(c), -ue, ue) : c === 0 ? c : 0;
        }
        function An(c) {
          return c == null ? "" : ni(c);
        }
        var vL = $c(function(c, m) {
          if (Ld(m) || jr(m)) {
            lo(m, tr(m), c);
            return;
          }
          for (var S in m)
            $e.call(m, S) && Pd(c, S, m[S]);
        }), Kk = $c(function(c, m) {
          lo(m, Yr(m), c);
        }), wh = $c(function(c, m, S, L) {
          lo(m, Yr(m), c, L);
        }), pL = $c(function(c, m, S, L) {
          lo(m, tr(m), c, L);
        }), gL = Fo(Np);
        function yL(c, m) {
          var S = Uc(c);
          return m == null ? S : C1(S, m);
        }
        var bL = nn(function(c, m) {
          c = Pn(c);
          var S = -1, L = m.length, X = L > 2 ? m[2] : n;
          for (X && Dr(m[0], m[1], X) && (L = 1); ++S < L; )
            for (var de = m[S], Se = Yr(de), De = -1, Ue = Se.length; ++De < Ue; ) {
              var nt = Se[De], at = c[nt];
              (at === n || Ri(at, me[nt]) && !$e.call(c, nt)) && (c[nt] = de[nt]);
            }
          return c;
        }), wL = nn(function(c) {
          return c.push(n, ck), Er(jk, n, c);
        });
        function kL(c, m) {
          return Bc(c, Mt(m, 3), so);
        }
        function SL(c, m) {
          return Bc(c, Mt(m, 3), $p);
        }
        function CL(c, m) {
          return c == null ? c : Up(c, Mt(m, 3), Yr);
        }
        function AL(c, m) {
          return c == null ? c : E1(c, Mt(m, 3), Yr);
        }
        function xL(c, m) {
          return c && so(c, Mt(m, 3));
        }
        function TL(c, m) {
          return c && $p(c, Mt(m, 3));
        }
        function IL(c) {
          return c == null ? [] : nh(c, tr(c));
        }
        function EL(c) {
          return c == null ? [] : nh(c, Yr(c));
        }
        function yg(c, m, S) {
          var L = c == null ? n : wl(c, m);
          return L === n ? S : L;
        }
        function PL(c, m) {
          return c != null && fk(c, m, ZB);
        }
        function bg(c, m) {
          return c != null && fk(c, m, e2);
        }
        var OL = rk(function(c, m, S) {
          m != null && typeof m.toString != "function" && (m = mt.call(m)), c[m] = S;
        }, kg(Gr)), DL = rk(function(c, m, S) {
          m != null && typeof m.toString != "function" && (m = mt.call(m)), $e.call(c, m) ? c[m].push(S) : c[m] = [S];
        }, Mt), BL = nn(Dd);
        function tr(c) {
          return jr(c) ? k1(c) : Wp(c);
        }
        function Yr(c) {
          return jr(c) ? k1(c, !0) : u2(c);
        }
        function VL(c, m) {
          var S = {};
          return m = Mt(m, 3), so(c, function(L, X, de) {
            Lo(S, m(L, X, de), L);
          }), S;
        }
        function ML(c, m) {
          var S = {};
          return m = Mt(m, 3), so(c, function(L, X, de) {
            Lo(S, X, m(L, X, de));
          }), S;
        }
        var LL = $c(function(c, m, S) {
          ah(c, m, S);
        }), jk = $c(function(c, m, S, L) {
          ah(c, m, S, L);
        }), RL = Fo(function(c, m) {
          var S = {};
          if (c == null)
            return S;
          var L = !1;
          m = Hn(m, function(de) {
            return de = Ss(de, c), L || (L = de.length > 1), de;
          }), lo(c, ig(c), S), L && (S = Ci(S, f | h | y, O2));
          for (var X = m.length; X--; )
            Jp(S, m[X]);
          return S;
        });
        function FL(c, m) {
          return Yk(c, gh(Mt(m)));
        }
        var NL = Fo(function(c, m) {
          return c == null ? {} : f2(c, m);
        });
        function Yk(c, m) {
          if (c == null)
            return {};
          var S = Hn(ig(c), function(L) {
            return [L];
          });
          return m = Mt(m), N1(c, S, function(L, X) {
            return m(L, X[0]);
          });
        }
        function UL(c, m, S) {
          m = Ss(m, c);
          var L = -1, X = m.length;
          for (X || (X = 1, c = n); ++L < X; ) {
            var de = c == null ? n : c[co(m[L])];
            de === n && (L = X, de = S), c = Uo(de) ? de.call(c) : de;
          }
          return c;
        }
        function $L(c, m, S) {
          return c == null ? c : Vd(c, m, S);
        }
        function qL(c, m, S, L) {
          return L = typeof L == "function" ? L : n, c == null ? c : Vd(c, m, S, L);
        }
        var Gk = sk(tr), Qk = sk(Yr);
        function HL(c, m, S) {
          var L = Qt(c), X = L || As(c) || zc(c);
          if (m = Mt(m, 4), S == null) {
            var de = c && c.constructor;
            X ? S = L ? new de() : [] : ha(c) ? S = Uo(de) ? Uc(ma(c)) : {} : S = {};
          }
          return (X ? Wr : so)(c, function(Se, De, Ue) {
            return m(S, Se, De, Ue);
          }), S;
        }
        function zL(c, m) {
          return c == null ? !0 : Jp(c, m);
        }
        function WL(c, m, S) {
          return c == null ? c : z1(c, m, eg(S));
        }
        function KL(c, m, S, L) {
          return L = typeof L == "function" ? L : n, c == null ? c : z1(c, m, eg(S), L);
        }
        function Wc(c) {
          return c == null ? [] : Sd(c, tr(c));
        }
        function jL(c) {
          return c == null ? [] : Sd(c, Yr(c));
        }
        function YL(c, m, S) {
          return S === n && (S = m, m = n), S !== n && (S = Ti(S), S = S === S ? S : 0), m !== n && (m = Ti(m), m = m === m ? m : 0), bl(Ti(c), m, S);
        }
        function GL(c, m, S) {
          return m = $o(m), S === n ? (S = m, m = 0) : S = $o(S), c = Ti(c), t2(c, m, S);
        }
        function QL(c, m, S) {
          if (S && typeof S != "boolean" && Dr(c, m, S) && (m = S = n), S === n && (typeof m == "boolean" ? (S = m, m = n) : typeof c == "boolean" && (S = c, c = n)), c === n && m === n ? (c = 0, m = 1) : (c = $o(c), m === n ? (m = c, c = 0) : m = $o(m)), c > m) {
            var L = c;
            c = m, m = L;
          }
          if (S || c % 1 || m % 1) {
            var X = b1();
            return vr(c + X * (m - c + hd("1e-" + ((X + "").length - 1))), m);
          }
          return Yp(c, m);
        }
        var JL = qc(function(c, m, S) {
          return m = m.toLowerCase(), c + (S ? Jk(m) : m);
        });
        function Jk(c) {
          return wg(An(c).toLowerCase());
        }
        function Xk(c) {
          return c = An(c), c && c.replace(Ac, Hm).replace(up, "");
        }
        function XL(c, m, S) {
          c = An(c), m = ni(m);
          var L = c.length;
          S = S === n ? L : bl(Zt(S), 0, L);
          var X = S;
          return S -= m.length, S >= 0 && c.slice(S, X) == m;
        }
        function ZL(c) {
          return c = An(c), c && vt.test(c) ? c.replace(Ke, Gn) : c;
        }
        function eR(c) {
          return c = An(c), c && mm.test(c) ? c.replace(no, "\\$&") : c;
        }
        var tR = qc(function(c, m, S) {
          return c + (S ? "-" : "") + m.toLowerCase();
        }), nR = qc(function(c, m, S) {
          return c + (S ? " " : "") + m.toLowerCase();
        }), aR = tk("toLowerCase");
        function rR(c, m, S) {
          c = An(c), m = Zt(m);
          var L = m ? gs(c) : 0;
          if (!m || L >= m)
            return c;
          var X = (m - L) / 2;
          return ch(Qm(X), S) + c + ch(Gm(X), S);
        }
        function iR(c, m, S) {
          c = An(c), m = Zt(m);
          var L = m ? gs(c) : 0;
          return m && L < m ? c + ch(m - L, S) : c;
        }
        function oR(c, m, S) {
          c = An(c), m = Zt(m);
          var L = m ? gs(c) : 0;
          return m && L < m ? ch(m - L, S) + c : c;
        }
        function sR(c, m, S) {
          return S || m == null ? m = 0 : m && (m = +m), hB(An(c).replace(Sc, ""), m || 0);
        }
        function lR(c, m, S) {
          return (S ? Dr(c, m, S) : m === n) ? m = 1 : m = Zt(m), Gp(An(c), m);
        }
        function cR() {
          var c = arguments, m = An(c[0]);
          return c.length < 3 ? m : m.replace(c[1], c[2]);
        }
        var uR = qc(function(c, m, S) {
          return c + (S ? "_" : "") + m.toLowerCase();
        });
        function dR(c, m, S) {
          return S && typeof S != "number" && Dr(c, m, S) && (m = S = n), S = S === n ? q : S >>> 0, S ? (c = An(c), c && (typeof m == "string" || m != null && !gg(m)) && (m = ni(m), !m && En(c)) ? Cs(ti(c), 0, S) : c.split(m, S)) : [];
        }
        var fR = qc(function(c, m, S) {
          return c + (S ? " " : "") + wg(m);
        });
        function mR(c, m, S) {
          return c = An(c), S = S == null ? 0 : bl(Zt(S), 0, c.length), m = ni(m), c.slice(S, S + m.length) == m;
        }
        function hR(c, m, S) {
          var L = se.templateSettings;
          S && Dr(c, m, S) && (m = n), c = An(c), m = wh({}, m, L, lk);
          var X = wh({}, m.imports, L.imports, lk), de = tr(X), Se = Sd(X, de), De, Ue, nt = 0, at = m.interpolate || ao, ct = "__p += '", yt = bs(
            (m.escape || ao).source + "|" + at.source + "|" + (at === _r ? ul : ao).source + "|" + (m.evaluate || ao).source + "|$",
            "g"
          ), Et = "//# sourceURL=" + ($e.call(m, "sourceURL") ? (m.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++_p + "]") + `
`;
          c.replace(yt, function(Ut, cn, hn, ri, Br, ii) {
            return hn || (hn = ri), ct += c.slice(nt, ii).replace(_m, vl), cn && (De = !0, ct += `' +
__e(` + cn + `) +
'`), Br && (Ue = !0, ct += `';
` + Br + `;
__p += '`), hn && (ct += `' +
((__t = (` + hn + `)) == null ? '' : __t) +
'`), nt = ii + Ut.length, Ut;
          }), ct += `';
`;
          var Nt = $e.call(m, "variable") && m.variable;
          if (!Nt)
            ct = `with (obj) {
` + ct + `
}
`;
          else if (Yv.test(Nt))
            throw new Kt(l);
          ct = (Ue ? ct.replace(Te, "") : ct).replace(ze, "$1").replace(ft, "$1;"), ct = "function(" + (Nt || "obj") + `) {
` + (Nt ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (De ? ", __e = _.escape" : "") + (Ue ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + ct + `return __p
}`;
          var en = eS(function() {
            return yn(de, Et + "return " + ct).apply(n, Se);
          });
          if (en.source = ct, pg(en))
            throw en;
          return en;
        }
        function _R(c) {
          return An(c).toLowerCase();
        }
        function vR(c) {
          return An(c).toUpperCase();
        }
        function pR(c, m, S) {
          if (c = An(c), c && (S || m === n))
            return qm(c);
          if (!c || !(m = ni(m)))
            return c;
          var L = ti(c), X = ti(m), de = sa(L, X), Se = bi(L, X) + 1;
          return Cs(L, de, Se).join("");
        }
        function gR(c, m, S) {
          if (c = An(c), c && (S || m === n))
            return c.slice(0, Km(c) + 1);
          if (!c || !(m = ni(m)))
            return c;
          var L = ti(c), X = bi(L, ti(m)) + 1;
          return Cs(L, 0, X).join("");
        }
        function yR(c, m, S) {
          if (c = An(c), c && (S || m === n))
            return c.replace(Sc, "");
          if (!c || !(m = ni(m)))
            return c;
          var L = ti(c), X = sa(L, ti(m));
          return Cs(L, X).join("");
        }
        function bR(c, m) {
          var S = x, L = M;
          if (ha(m)) {
            var X = "separator" in m ? m.separator : X;
            S = "length" in m ? Zt(m.length) : S, L = "omission" in m ? ni(m.omission) : L;
          }
          c = An(c);
          var de = c.length;
          if (En(c)) {
            var Se = ti(c);
            de = Se.length;
          }
          if (S >= de)
            return c;
          var De = S - gs(L);
          if (De < 1)
            return L;
          var Ue = Se ? Cs(Se, 0, De).join("") : c.slice(0, De);
          if (X === n)
            return Ue + L;
          if (Se && (De += Ue.length - De), gg(X)) {
            if (c.slice(De).search(X)) {
              var nt, at = Ue;
              for (X.global || (X = bs(X.source, An(hm.exec(X)) + "g")), X.lastIndex = 0; nt = X.exec(at); )
                var ct = nt.index;
              Ue = Ue.slice(0, ct === n ? De : ct);
            }
          } else if (c.indexOf(ni(X), De) != De) {
            var yt = Ue.lastIndexOf(X);
            yt > -1 && (Ue = Ue.slice(0, yt));
          }
          return Ue + L;
        }
        function wR(c) {
          return c = An(c), c && st.test(c) ? c.replace(ot, Pp) : c;
        }
        var kR = qc(function(c, m, S) {
          return c + (S ? " " : "") + m.toUpperCase();
        }), wg = tk("toUpperCase");
        function Zk(c, m, S) {
          return c = An(c), m = S ? n : m, m === n ? zm(c) ? Bp(c) : Cp(c) : c.match(m) || [];
        }
        var eS = nn(function(c, m) {
          try {
            return Er(c, n, m);
          } catch (S) {
            return pg(S) ? S : new Kt(S);
          }
        }), SR = Fo(function(c, m) {
          return Wr(m, function(S) {
            S = co(S), Lo(c, S, _g(c[S], c));
          }), c;
        });
        function CR(c) {
          var m = c == null ? 0 : c.length, S = Mt();
          return c = m ? Hn(c, function(L) {
            if (typeof L[1] != "function")
              throw new R(o);
            return [S(L[0]), L[1]];
          }) : [], nn(function(L) {
            for (var X = -1; ++X < m; ) {
              var de = c[X];
              if (Er(de[0], this, L))
                return Er(de[1], this, L);
            }
          });
        }
        function AR(c) {
          return QB(Ci(c, f));
        }
        function kg(c) {
          return function() {
            return c;
          };
        }
        function xR(c, m) {
          return c == null || c !== c ? m : c;
        }
        var TR = ak(), IR = ak(!0);
        function Gr(c) {
          return c;
        }
        function Sg(c) {
          return B1(typeof c == "function" ? c : Ci(c, f));
        }
        function ER(c) {
          return M1(Ci(c, f));
        }
        function PR(c, m) {
          return L1(c, Ci(m, f));
        }
        var OR = nn(function(c, m) {
          return function(S) {
            return Dd(S, c, m);
          };
        }), DR = nn(function(c, m) {
          return function(S) {
            return Dd(c, S, m);
          };
        });
        function Cg(c, m, S) {
          var L = tr(m), X = nh(m, L);
          S == null && !(ha(m) && (X.length || !L.length)) && (S = m, m = c, c = this, X = nh(m, tr(m)));
          var de = !(ha(S) && "chain" in S) || !!S.chain, Se = Uo(c);
          return Wr(X, function(De) {
            var Ue = m[De];
            c[De] = Ue, Se && (c.prototype[De] = function() {
              var nt = this.__chain__;
              if (de || nt) {
                var at = c(this.__wrapped__), ct = at.__actions__ = Kr(this.__actions__);
                return ct.push({ func: Ue, args: arguments, thisArg: c }), at.__chain__ = nt, at;
              }
              return Ue.apply(c, oo([this.value()], arguments));
            });
          }), c;
        }
        function BR() {
          return ja._ === this && (ja._ = qt), this;
        }
        function Ag() {
        }
        function VR(c) {
          return c = Zt(c), nn(function(m) {
            return R1(m, c);
          });
        }
        var MR = ng(Hn), LR = ng(Rm), RR = ng(bd);
        function tS(c) {
          return cg(c) ? wd(co(c)) : m2(c);
        }
        function FR(c) {
          return function(m) {
            return c == null ? n : wl(c, m);
          };
        }
        var NR = ik(), UR = ik(!0);
        function xg() {
          return [];
        }
        function Tg() {
          return !1;
        }
        function $R() {
          return {};
        }
        function qR() {
          return "";
        }
        function HR() {
          return !0;
        }
        function zR(c, m) {
          if (c = Zt(c), c < 1 || c > ue)
            return [];
          var S = q, L = vr(c, q);
          m = Mt(m), c -= q;
          for (var X = kd(L, m); ++S < c; )
            m(S);
          return X;
        }
        function WR(c) {
          return Qt(c) ? Hn(c, co) : ai(c) ? [c] : Kr(wk(An(c)));
        }
        function KR(c) {
          var m = ++Qe;
          return An(c) + m;
        }
        var jR = lh(function(c, m) {
          return c + m;
        }, 0), YR = ag("ceil"), GR = lh(function(c, m) {
          return c / m;
        }, 1), QR = ag("floor");
        function JR(c) {
          return c && c.length ? th(c, Gr, qp) : n;
        }
        function XR(c, m) {
          return c && c.length ? th(c, Mt(m, 2), qp) : n;
        }
        function ZR(c) {
          return Nm(c, Gr);
        }
        function eF(c, m) {
          return Nm(c, Mt(m, 2));
        }
        function tF(c) {
          return c && c.length ? th(c, Gr, Kp) : n;
        }
        function nF(c, m) {
          return c && c.length ? th(c, Mt(m, 2), Kp) : n;
        }
        var aF = lh(function(c, m) {
          return c * m;
        }, 1), rF = ag("round"), iF = lh(function(c, m) {
          return c - m;
        }, 0);
        function oF(c) {
          return c && c.length ? Mc(c, Gr) : 0;
        }
        function sF(c, m) {
          return c && c.length ? Mc(c, Mt(m, 2)) : 0;
        }
        return se.after = EM, se.ary = Dk, se.assign = vL, se.assignIn = Kk, se.assignInWith = wh, se.assignWith = pL, se.at = gL, se.before = Bk, se.bind = _g, se.bindAll = SR, se.bindKey = Vk, se.castArray = $M, se.chain = Ek, se.chunk = Q2, se.compact = J2, se.concat = X2, se.cond = CR, se.conforms = AR, se.constant = kg, se.countBy = oM, se.create = yL, se.curry = Mk, se.curryRight = Lk, se.debounce = Rk, se.defaults = bL, se.defaultsDeep = wL, se.defer = PM, se.delay = OM, se.difference = Z2, se.differenceBy = eV, se.differenceWith = tV, se.drop = nV, se.dropRight = aV, se.dropRightWhile = rV, se.dropWhile = iV, se.fill = oV, se.filter = lM, se.flatMap = dM, se.flatMapDeep = fM, se.flatMapDepth = mM, se.flatten = Ak, se.flattenDeep = sV, se.flattenDepth = lV, se.flip = DM, se.flow = TR, se.flowRight = IR, se.fromPairs = cV, se.functions = IL, se.functionsIn = EL, se.groupBy = hM, se.initial = dV, se.intersection = fV, se.intersectionBy = mV, se.intersectionWith = hV, se.invert = OL, se.invertBy = DL, se.invokeMap = vM, se.iteratee = Sg, se.keyBy = pM, se.keys = tr, se.keysIn = Yr, se.map = _h, se.mapKeys = VL, se.mapValues = ML, se.matches = ER, se.matchesProperty = PR, se.memoize = ph, se.merge = LL, se.mergeWith = jk, se.method = OR, se.methodOf = DR, se.mixin = Cg, se.negate = gh, se.nthArg = VR, se.omit = RL, se.omitBy = FL, se.once = BM, se.orderBy = gM, se.over = MR, se.overArgs = VM, se.overEvery = LR, se.overSome = RR, se.partial = vg, se.partialRight = Fk, se.partition = yM, se.pick = NL, se.pickBy = Yk, se.property = tS, se.propertyOf = FR, se.pull = gV, se.pullAll = Tk, se.pullAllBy = yV, se.pullAllWith = bV, se.pullAt = wV, se.range = NR, se.rangeRight = UR, se.rearg = MM, se.reject = kM, se.remove = kV, se.rest = LM, se.reverse = mg, se.sampleSize = CM, se.set = $L, se.setWith = qL, se.shuffle = AM, se.slice = SV, se.sortBy = IM, se.sortedUniq = PV, se.sortedUniqBy = OV, se.split = dR, se.spread = RM, se.tail = DV, se.take = BV, se.takeRight = VV, se.takeRightWhile = MV, se.takeWhile = LV, se.tap = JV, se.throttle = FM, se.thru = hh, se.toArray = Hk, se.toPairs = Gk, se.toPairsIn = Qk, se.toPath = WR, se.toPlainObject = Wk, se.transform = HL, se.unary = NM, se.union = RV, se.unionBy = FV, se.unionWith = NV, se.uniq = UV, se.uniqBy = $V, se.uniqWith = qV, se.unset = zL, se.unzip = hg, se.unzipWith = Ik, se.update = WL, se.updateWith = KL, se.values = Wc, se.valuesIn = jL, se.without = HV, se.words = Zk, se.wrap = UM, se.xor = zV, se.xorBy = WV, se.xorWith = KV, se.zip = jV, se.zipObject = YV, se.zipObjectDeep = GV, se.zipWith = QV, se.entries = Gk, se.entriesIn = Qk, se.extend = Kk, se.extendWith = wh, Cg(se, se), se.add = jR, se.attempt = eS, se.camelCase = JL, se.capitalize = Jk, se.ceil = YR, se.clamp = YL, se.clone = qM, se.cloneDeep = zM, se.cloneDeepWith = WM, se.cloneWith = HM, se.conformsTo = KM, se.deburr = Xk, se.defaultTo = xR, se.divide = GR, se.endsWith = XL, se.eq = Ri, se.escape = ZL, se.escapeRegExp = eR, se.every = sM, se.find = cM, se.findIndex = Sk, se.findKey = kL, se.findLast = uM, se.findLastIndex = Ck, se.findLastKey = SL, se.floor = QR, se.forEach = Pk, se.forEachRight = Ok, se.forIn = CL, se.forInRight = AL, se.forOwn = xL, se.forOwnRight = TL, se.get = yg, se.gt = jM, se.gte = YM, se.has = PL, se.hasIn = bg, se.head = xk, se.identity = Gr, se.includes = _M, se.indexOf = uV, se.inRange = GL, se.invoke = BL, se.isArguments = Cl, se.isArray = Qt, se.isArrayBuffer = GM, se.isArrayLike = jr, se.isArrayLikeObject = Oa, se.isBoolean = QM, se.isBuffer = As, se.isDate = JM, se.isElement = XM, se.isEmpty = ZM, se.isEqual = eL, se.isEqualWith = tL, se.isError = pg, se.isFinite = nL, se.isFunction = Uo, se.isInteger = Nk, se.isLength = yh, se.isMap = Uk, se.isMatch = aL, se.isMatchWith = rL, se.isNaN = iL, se.isNative = oL, se.isNil = lL, se.isNull = sL, se.isNumber = $k, se.isObject = ha, se.isObjectLike = ka, se.isPlainObject = Fd, se.isRegExp = gg, se.isSafeInteger = cL, se.isSet = qk, se.isString = bh, se.isSymbol = ai, se.isTypedArray = zc, se.isUndefined = uL, se.isWeakMap = dL, se.isWeakSet = fL, se.join = _V, se.kebabCase = tR, se.last = xi, se.lastIndexOf = vV, se.lowerCase = nR, se.lowerFirst = aR, se.lt = mL, se.lte = hL, se.max = JR, se.maxBy = XR, se.mean = ZR, se.meanBy = eF, se.min = tF, se.minBy = nF, se.stubArray = xg, se.stubFalse = Tg, se.stubObject = $R, se.stubString = qR, se.stubTrue = HR, se.multiply = aF, se.nth = pV, se.noConflict = BR, se.noop = Ag, se.now = vh, se.pad = rR, se.padEnd = iR, se.padStart = oR, se.parseInt = sR, se.random = QL, se.reduce = bM, se.reduceRight = wM, se.repeat = lR, se.replace = cR, se.result = UL, se.round = rF, se.runInContext = Re, se.sample = SM, se.size = xM, se.snakeCase = uR, se.some = TM, se.sortedIndex = CV, se.sortedIndexBy = AV, se.sortedIndexOf = xV, se.sortedLastIndex = TV, se.sortedLastIndexBy = IV, se.sortedLastIndexOf = EV, se.startCase = fR, se.startsWith = mR, se.subtract = iF, se.sum = oF, se.sumBy = sF, se.template = hR, se.times = zR, se.toFinite = $o, se.toInteger = Zt, se.toLength = zk, se.toLower = _R, se.toNumber = Ti, se.toSafeInteger = _L, se.toString = An, se.toUpper = vR, se.trim = pR, se.trimEnd = gR, se.trimStart = yR, se.truncate = bR, se.unescape = wR, se.uniqueId = KR, se.upperCase = kR, se.upperFirst = wg, se.each = Pk, se.eachRight = Ok, se.first = xk, Cg(se, (function() {
          var c = {};
          return so(se, function(m, S) {
            $e.call(se.prototype, S) || (c[S] = m);
          }), c;
        })(), { chain: !1 }), se.VERSION = a, Wr(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(c) {
          se[c].placeholder = se;
        }), Wr(["drop", "take"], function(c, m) {
          dn.prototype[c] = function(S) {
            S = S === n ? 1 : Ya(Zt(S), 0);
            var L = this.__filtered__ && !m ? new dn(this) : this.clone();
            return L.__filtered__ ? L.__takeCount__ = vr(S, L.__takeCount__) : L.__views__.push({
              size: vr(S, q),
              type: c + (L.__dir__ < 0 ? "Right" : "")
            }), L;
          }, dn.prototype[c + "Right"] = function(S) {
            return this.reverse()[c](S).reverse();
          };
        }), Wr(["filter", "map", "takeWhile"], function(c, m) {
          var S = m + 1, L = S == F || S == K;
          dn.prototype[c] = function(X) {
            var de = this.clone();
            return de.__iteratees__.push({
              iteratee: Mt(X, 3),
              type: S
            }), de.__filtered__ = de.__filtered__ || L, de;
          };
        }), Wr(["head", "last"], function(c, m) {
          var S = "take" + (m ? "Right" : "");
          dn.prototype[c] = function() {
            return this[S](1).value()[0];
          };
        }), Wr(["initial", "tail"], function(c, m) {
          var S = "drop" + (m ? "" : "Right");
          dn.prototype[c] = function() {
            return this.__filtered__ ? new dn(this) : this[S](1);
          };
        }), dn.prototype.compact = function() {
          return this.filter(Gr);
        }, dn.prototype.find = function(c) {
          return this.filter(c).head();
        }, dn.prototype.findLast = function(c) {
          return this.reverse().find(c);
        }, dn.prototype.invokeMap = nn(function(c, m) {
          return typeof c == "function" ? new dn(this) : this.map(function(S) {
            return Dd(S, c, m);
          });
        }), dn.prototype.reject = function(c) {
          return this.filter(gh(Mt(c)));
        }, dn.prototype.slice = function(c, m) {
          c = Zt(c);
          var S = this;
          return S.__filtered__ && (c > 0 || m < 0) ? new dn(S) : (c < 0 ? S = S.takeRight(-c) : c && (S = S.drop(c)), m !== n && (m = Zt(m), S = m < 0 ? S.dropRight(-m) : S.take(m - c)), S);
        }, dn.prototype.takeRightWhile = function(c) {
          return this.reverse().takeWhile(c).reverse();
        }, dn.prototype.toArray = function() {
          return this.take(q);
        }, so(dn.prototype, function(c, m) {
          var S = /^(?:filter|find|map|reject)|While$/.test(m), L = /^(?:head|last)$/.test(m), X = se[L ? "take" + (m == "last" ? "Right" : "") : m], de = L || /^find/.test(m);
          X && (se.prototype[m] = function() {
            var Se = this.__wrapped__, De = L ? [1] : arguments, Ue = Se instanceof dn, nt = De[0], at = Ue || Qt(Se), ct = function(cn) {
              var hn = X.apply(se, oo([cn], De));
              return L && yt ? hn[0] : hn;
            };
            at && S && typeof nt == "function" && nt.length != 1 && (Ue = at = !1);
            var yt = this.__chain__, Et = !!this.__actions__.length, Nt = de && !yt, en = Ue && !Et;
            if (!de && at) {
              Se = en ? Se : new dn(this);
              var Ut = c.apply(Se, De);
              return Ut.__actions__.push({ func: hh, args: [ct], thisArg: n }), new Si(Ut, yt);
            }
            return Nt && en ? c.apply(this, De) : (Ut = this.thru(ct), Nt ? L ? Ut.value()[0] : Ut.value() : Ut);
          });
        }), Wr(["pop", "push", "shift", "sort", "splice", "unshift"], function(c) {
          var m = N[c], S = /^(?:push|sort|unshift)$/.test(c) ? "tap" : "thru", L = /^(?:pop|shift)$/.test(c);
          se.prototype[c] = function() {
            var X = arguments;
            if (L && !this.__chain__) {
              var de = this.value();
              return m.apply(Qt(de) ? de : [], X);
            }
            return this[S](function(Se) {
              return m.apply(Qt(Se) ? Se : [], X);
            });
          };
        }), so(dn.prototype, function(c, m) {
          var S = se[m];
          if (S) {
            var L = S.name + "";
            $e.call(Nc, L) || (Nc[L] = []), Nc[L].push({ name: m, func: S });
          }
        }), Nc[sh(n, v).name] = [{
          name: "wrapper",
          func: n
        }], dn.prototype.clone = wB, dn.prototype.reverse = kB, dn.prototype.value = SB, se.prototype.at = XV, se.prototype.chain = ZV, se.prototype.commit = eM, se.prototype.next = tM, se.prototype.plant = aM, se.prototype.reverse = rM, se.prototype.toJSON = se.prototype.valueOf = se.prototype.value = iM, se.prototype.first = se.prototype.head, wi && (se.prototype[wi] = nM), se;
      }), ys = Vp();
      Bo ? ((Bo.exports = ys)._ = ys, vd._ = ys) : ja._ = ys;
    }).call(HX);
  })(Xd, Xd.exports)), Xd.exports;
}
var AD = zX();
const $i = /* @__PURE__ */ CD(AD);
var Ty = {}, xD = (e, t, n) => {
  if (!t.has(e))
    throw TypeError("Cannot " + n);
}, HA = (e, t, n) => (xD(e, t, "read from private field"), n ? n.call(e) : t.get(e)), WX = (e, t, n) => {
  if (t.has(e))
    throw TypeError("Cannot add the same private member more than once");
  t instanceof WeakSet ? t.add(e) : t.set(e, n);
}, KX = (e, t, n, a) => (xD(e, t, "write to private field"), t.set(e, n), n);
const TD = [
  ["aztec", "Aztec"],
  ["code_128", "Code128"],
  ["code_39", "Code39"],
  ["code_93", "Code93"],
  ["codabar", "Codabar"],
  ["databar", "DataBar"],
  ["databar_expanded", "DataBarExpanded"],
  ["data_matrix", "DataMatrix"],
  ["dx_film_edge", "DXFilmEdge"],
  ["ean_13", "EAN-13"],
  ["ean_8", "EAN-8"],
  ["itf", "ITF"],
  ["maxi_code", "MaxiCode"],
  ["micro_qr_code", "MicroQRCode"],
  ["pdf417", "PDF417"],
  ["qr_code", "QRCode"],
  ["rm_qr_code", "rMQRCode"],
  ["upc_a", "UPC-A"],
  ["upc_e", "UPC-E"],
  ["linear_codes", "Linear-Codes"],
  ["matrix_codes", "Matrix-Codes"]
], jX = [...TD, ["unknown"]].map((e) => e[0]), c_ = new Map(
  TD
);
function YX(e) {
  for (const [t, n] of c_)
    if (e === n)
      return t;
  return "unknown";
}
function GX(e) {
  if (ID(e))
    return {
      width: e.naturalWidth,
      height: e.naturalHeight
    };
  if (ED(e))
    return {
      width: e.width.baseVal.value,
      height: e.height.baseVal.value
    };
  if (PD(e))
    return {
      width: e.videoWidth,
      height: e.videoHeight
    };
  if (DD(e))
    return {
      width: e.width,
      height: e.height
    };
  if (VD(e))
    return {
      width: e.displayWidth,
      height: e.displayHeight
    };
  if (OD(e))
    return {
      width: e.width,
      height: e.height
    };
  if (BD(e))
    return {
      width: e.width,
      height: e.height
    };
  throw new TypeError(
    "The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'."
  );
}
function ID(e) {
  try {
    return e instanceof HTMLImageElement;
  } catch {
    return !1;
  }
}
function ED(e) {
  try {
    return e instanceof SVGImageElement;
  } catch {
    return !1;
  }
}
function PD(e) {
  try {
    return e instanceof HTMLVideoElement;
  } catch {
    return !1;
  }
}
function OD(e) {
  try {
    return e instanceof HTMLCanvasElement;
  } catch {
    return !1;
  }
}
function DD(e) {
  try {
    return e instanceof ImageBitmap;
  } catch {
    return !1;
  }
}
function BD(e) {
  try {
    return e instanceof OffscreenCanvas;
  } catch {
    return !1;
  }
}
function VD(e) {
  try {
    return e instanceof VideoFrame;
  } catch {
    return !1;
  }
}
function MD(e) {
  try {
    return e instanceof Blob;
  } catch {
    return !1;
  }
}
function QX(e) {
  try {
    return e instanceof ImageData;
  } catch {
    return !1;
  }
}
function JX(e, t) {
  try {
    const n = new OffscreenCanvas(e, t);
    if (n.getContext("2d") instanceof OffscreenCanvasRenderingContext2D)
      return n;
    throw void 0;
  } catch {
    const a = document.createElement("canvas");
    return a.width = e, a.height = t, a;
  }
}
async function LD(e) {
  if (ID(e) && !await tZ(e))
    throw new DOMException(
      "Failed to load or decode HTMLImageElement.",
      "InvalidStateError"
    );
  if (ED(e) && !await nZ(e))
    throw new DOMException(
      "Failed to load or decode SVGImageElement.",
      "InvalidStateError"
    );
  if (VD(e) && aZ(e))
    throw new DOMException("VideoFrame is closed.", "InvalidStateError");
  if (PD(e) && (e.readyState === 0 || e.readyState === 1))
    throw new DOMException("Invalid element or state.", "InvalidStateError");
  if (DD(e) && iZ(e))
    throw new DOMException(
      "The image source is detached.",
      "InvalidStateError"
    );
  const { width: t, height: n } = GX(e);
  if (t === 0 || n === 0)
    return null;
  const a = JX(t, n).getContext("2d");
  a.drawImage(e, 0, 0);
  try {
    return a.getImageData(0, 0, t, n);
  } catch {
    throw new DOMException("Source would taint origin.", "SecurityError");
  }
}
async function XX(e) {
  let t;
  try {
    if (globalThis.createImageBitmap)
      t = await createImageBitmap(e);
    else if (globalThis.Image) {
      t = new Image();
      let n = "";
      try {
        n = URL.createObjectURL(e), t.src = n, await t.decode();
      } finally {
        URL.revokeObjectURL(n);
      }
    } else
      return e;
  } catch {
    throw new DOMException(
      "Failed to load or decode Blob.",
      "InvalidStateError"
    );
  }
  return await LD(t);
}
function ZX(e) {
  const { width: t, height: n } = e;
  if (t === 0 || n === 0)
    return null;
  const a = e.getContext("2d");
  try {
    return a.getImageData(0, 0, t, n);
  } catch {
    throw new DOMException("Source would taint origin.", "SecurityError");
  }
}
async function eZ(e) {
  if (MD(e))
    return await XX(e);
  if (QX(e)) {
    if (rZ(e))
      throw new DOMException(
        "The image data has been detached.",
        "InvalidStateError"
      );
    return e;
  }
  return OD(e) || BD(e) ? ZX(e) : await LD(e);
}
async function tZ(e) {
  try {
    return await e.decode(), !0;
  } catch {
    return !1;
  }
}
async function nZ(e) {
  var t;
  try {
    return await ((t = e.decode) == null ? void 0 : t.call(e)), !0;
  } catch {
    return !1;
  }
}
function aZ(e) {
  return e.format === null;
}
function rZ(e) {
  return e.data.buffer.byteLength === 0;
}
function iZ(e) {
  return e.width === 0 && e.height === 0;
}
function zA(e, t) {
  return e instanceof DOMException ? new DOMException(`${t}: ${e.message}`, e.name) : e instanceof Error ? new e.constructor(`${t}: ${e.message}`) : new Error(`${t}: ${e}`);
}
const WA = [
  "Aztec",
  "Codabar",
  "Code128",
  "Code39",
  "Code93",
  "DataBar",
  "DataBarExpanded",
  "DataMatrix",
  "DXFilmEdge",
  "EAN-13",
  "EAN-8",
  "ITF",
  "Linear-Codes",
  "Matrix-Codes",
  "MaxiCode",
  "MicroQRCode",
  "None",
  "PDF417",
  "QRCode",
  "rMQRCode",
  "UPC-A",
  "UPC-E"
];
function oZ(e) {
  return e.join("|");
}
function sZ(e) {
  const t = KA(e);
  let n = 0, a = WA.length - 1;
  for (; n <= a; ) {
    const r = Math.floor((n + a) / 2), i = WA[r], o = KA(i);
    if (o === t)
      return i;
    o < t ? n = r + 1 : a = r - 1;
  }
  return "None";
}
function KA(e) {
  return e.toLowerCase().replace(/_-\[\]/g, "");
}
function lZ(e, t) {
  return e.Binarizer[t];
}
function cZ(e, t) {
  return e.CharacterSet[t];
}
const uZ = [
  "Text",
  "Binary",
  "Mixed",
  "GS1",
  "ISO15434",
  "UnknownECI"
];
function dZ(e) {
  return uZ[e.value];
}
function fZ(e, t) {
  return e.EanAddOnSymbol[t];
}
function mZ(e, t) {
  return e.TextMode[t];
}
const qu = {
  formats: [],
  tryHarder: !0,
  tryRotate: !0,
  tryInvert: !0,
  tryDownscale: !0,
  binarizer: "LocalAverage",
  isPure: !1,
  downscaleFactor: 3,
  downscaleThreshold: 500,
  minLineCount: 2,
  maxNumberOfSymbols: 255,
  tryCode39ExtendedMode: !1,
  validateCode39CheckSum: !1,
  validateITFCheckSum: !1,
  returnCodabarStartEnd: !1,
  returnErrors: !1,
  eanAddOnSymbol: "Read",
  textMode: "Plain",
  characterSet: "Unknown"
};
function RD(e, t) {
  return {
    ...t,
    formats: oZ(t.formats),
    binarizer: lZ(e, t.binarizer),
    eanAddOnSymbol: fZ(
      e,
      t.eanAddOnSymbol
    ),
    textMode: mZ(e, t.textMode),
    characterSet: cZ(
      e,
      t.characterSet
    )
  };
}
function FD(e) {
  return {
    ...e,
    format: sZ(e.format),
    eccLevel: e.eccLevel,
    contentType: dZ(e.contentType)
  };
}
const hZ = {
  locateFile: (e, t) => {
    const n = e.match(/_(.+?)\.wasm$/);
    return n ? `https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${n[1]}/${e}` : t + e;
  }
};
let jA = /* @__PURE__ */ new WeakMap();
function p1(e, t) {
  var n;
  const a = jA.get(e);
  if (a != null && a.modulePromise && t === void 0)
    return a.modulePromise;
  const r = (n = a?.moduleOverrides) != null ? n : hZ, i = e({
    ...r
  });
  return jA.set(e, {
    moduleOverrides: r,
    modulePromise: i
  }), i;
}
async function _Z(e, t, n = qu) {
  const a = {
    ...qu,
    ...n
  }, r = await p1(e), { size: i } = t, o = new Uint8Array(await t.arrayBuffer()), l = r._malloc(i);
  r.HEAPU8.set(o, l);
  const s = r.readBarcodesFromImage(
    l,
    i,
    RD(r, a)
  );
  r._free(l);
  const d = [];
  for (let u = 0; u < s.size(); ++u)
    d.push(
      FD(s.get(u))
    );
  return d;
}
async function vZ(e, t, n = qu) {
  const a = {
    ...qu,
    ...n
  }, r = await p1(e), {
    data: i,
    width: o,
    height: l,
    data: { byteLength: s }
  } = t, d = r._malloc(s);
  r.HEAPU8.set(i, d);
  const u = r.readBarcodesFromPixmap(
    d,
    o,
    l,
    RD(r, a)
  );
  r._free(d);
  const f = [];
  for (let h = 0; h < u.size(); ++h)
    f.push(
      FD(u.get(h))
    );
  return f;
}
({
  ...qu,
  formats: [...qu.formats]
});
var g1 = (() => {
  var e = typeof document < "u" && document.currentScript ? document.currentScript.src : void 0;
  return function(t = {}) {
    var n = t, a, r;
    n.ready = new Promise((R, N) => {
      a = R, r = N;
    });
    var i = Object.assign({}, n), o = "./this.program", l = typeof window == "object", s = typeof importScripts == "function";
    typeof Ty == "object" && typeof Ty.versions == "object" && Ty.versions.node;
    var d = "";
    function u(R) {
      return n.locateFile ? n.locateFile(R, d) : d + R;
    }
    var f;
    (l || s) && (s ? d = self.location.href : typeof document < "u" && document.currentScript && (d = document.currentScript.src), e && (d = e), d.indexOf("blob:") !== 0 ? d = d.substr(0, d.replace(/[?#].*/, "").lastIndexOf("/") + 1) : d = "", s && (f = (R) => {
      var N = new XMLHttpRequest();
      return N.open("GET", R, !1), N.responseType = "arraybuffer", N.send(null), new Uint8Array(N.response);
    })), n.print || console.log.bind(console);
    var h = n.printErr || console.error.bind(console);
    Object.assign(n, i), i = null, n.arguments && n.arguments, n.thisProgram && (o = n.thisProgram), n.quit && n.quit;
    var y;
    n.wasmBinary && (y = n.wasmBinary), typeof WebAssembly != "object" && oe("no native wasm support detected");
    var p, w = !1, b, v, g, k, A, C, D, P;
    function O() {
      var R = p.buffer;
      n.HEAP8 = b = new Int8Array(R), n.HEAP16 = g = new Int16Array(R), n.HEAPU8 = v = new Uint8Array(R), n.HEAPU16 = k = new Uint16Array(R), n.HEAP32 = A = new Int32Array(R), n.HEAPU32 = C = new Uint32Array(R), n.HEAPF32 = D = new Float32Array(R), n.HEAPF64 = P = new Float64Array(R);
    }
    var I = [], x = [], M = [];
    function V() {
      if (n.preRun)
        for (typeof n.preRun == "function" && (n.preRun = [n.preRun]); n.preRun.length; )
          H(n.preRun.shift());
      ce(I);
    }
    function B() {
      ce(x);
    }
    function F() {
      if (n.postRun)
        for (typeof n.postRun == "function" && (n.postRun = [n.postRun]); n.postRun.length; )
          Z(n.postRun.shift());
      ce(M);
    }
    function H(R) {
      I.unshift(R);
    }
    function K(R) {
      x.unshift(R);
    }
    function Z(R) {
      M.unshift(R);
    }
    var ue = 0, Y = null;
    function U(R) {
      var N;
      ue++, (N = n.monitorRunDependencies) === null || N === void 0 || N.call(n, ue);
    }
    function q(R) {
      var N;
      if (ue--, (N = n.monitorRunDependencies) === null || N === void 0 || N.call(n, ue), ue == 0 && Y) {
        var re = Y;
        Y = null, re();
      }
    }
    function oe(R) {
      var N;
      (N = n.onAbort) === null || N === void 0 || N.call(n, R), R = "Aborted(" + R + ")", h(R), w = !0, R += ". Build with -sASSERTIONS for more info.";
      var re = new WebAssembly.RuntimeError(R);
      throw r(re), re;
    }
    var ee = "data:application/octet-stream;base64,", he = (R) => R.startsWith(ee), ve;
    ve = "zxing_reader.wasm", he(ve) || (ve = u(ve));
    function pe(R) {
      if (R == ve && y)
        return new Uint8Array(y);
      if (f)
        return f(R);
      throw "both async and sync fetching of the wasm failed";
    }
    function z(R) {
      return !y && (l || s) && typeof fetch == "function" ? fetch(R, {
        credentials: "same-origin"
      }).then((N) => {
        if (!N.ok)
          throw "failed to load wasm binary file at '" + R + "'";
        return N.arrayBuffer();
      }).catch(() => pe(R)) : Promise.resolve().then(() => pe(R));
    }
    function ge(R, N, re) {
      return z(R).then((me) => WebAssembly.instantiate(me, N)).then((me) => me).then(re, (me) => {
        h(`failed to asynchronously prepare wasm: ${me}`), oe(me);
      });
    }
    function Ve(R, N, re, me) {
      return !R && typeof WebAssembly.instantiateStreaming == "function" && !he(N) && typeof fetch == "function" ? fetch(N, {
        credentials: "same-origin"
      }).then((Me) => {
        var He = WebAssembly.instantiateStreaming(Me, re);
        return He.then(me, function($e) {
          return h(`wasm streaming compile failed: ${$e}`), h("falling back to ArrayBuffer instantiation"), ge(N, re, me);
        });
      }) : ge(N, re, me);
    }
    function Ne() {
      var R = {
        a: _l
      };
      function N(me, Me) {
        return sa = me.exports, p = sa.ia, O(), wm = sa.ma, K(sa.ja), q(), sa;
      }
      U();
      function re(me) {
        N(me.instance);
      }
      if (n.instantiateWasm)
        try {
          return n.instantiateWasm(R, N);
        } catch (me) {
          h(`Module.instantiateWasm callback failed with error: ${me}`), r(me);
        }
      return Ve(y, ve, R, re).catch(r), {};
    }
    var ce = (R) => {
      for (; R.length > 0; )
        R.shift()(n);
    };
    n.noExitRuntime;
    var ne = [], Q = 0, le = (R) => {
      var N = new Ie(R);
      return N.get_caught() || (N.set_caught(!0), Q--), N.set_rethrown(!1), ne.push(N), Wm(N.excPtr), N.get_exception_ptr();
    }, G = 0, Ce = () => {
      Gn(0, 0);
      var R = ne.pop();
      zm(R.excPtr), G = 0;
    };
    function Ie(R) {
      this.excPtr = R, this.ptr = R - 24, this.set_type = function(N) {
        C[this.ptr + 4 >> 2] = N;
      }, this.get_type = function() {
        return C[this.ptr + 4 >> 2];
      }, this.set_destructor = function(N) {
        C[this.ptr + 8 >> 2] = N;
      }, this.get_destructor = function() {
        return C[this.ptr + 8 >> 2];
      }, this.set_caught = function(N) {
        N = N ? 1 : 0, b[this.ptr + 12 >> 0] = N;
      }, this.get_caught = function() {
        return b[this.ptr + 12 >> 0] != 0;
      }, this.set_rethrown = function(N) {
        N = N ? 1 : 0, b[this.ptr + 13 >> 0] = N;
      }, this.get_rethrown = function() {
        return b[this.ptr + 13 >> 0] != 0;
      }, this.init = function(N, re) {
        this.set_adjusted_ptr(0), this.set_type(N), this.set_destructor(re);
      }, this.set_adjusted_ptr = function(N) {
        C[this.ptr + 16 >> 2] = N;
      }, this.get_adjusted_ptr = function() {
        return C[this.ptr + 16 >> 2];
      }, this.get_exception_ptr = function() {
        var N = Ad(this.get_type());
        if (N)
          return C[this.excPtr >> 2];
        var re = this.get_adjusted_ptr();
        return re !== 0 ? re : this.excPtr;
      };
    }
    var ie = (R) => {
      throw G || (G = R), G;
    }, we = (R) => {
      var N = G;
      if (!N)
        return vl(0), 0;
      var re = new Ie(N);
      re.set_adjusted_ptr(N);
      var me = re.get_type();
      if (!me)
        return vl(0), N;
      for (var Me in R) {
        var He = R[Me];
        if (He === 0 || He === me)
          break;
        var $e = re.ptr + 16;
        if (Lc(He, me, $e))
          return vl(He), N;
      }
      return vl(me), N;
    }, Ee = () => we([]), Pe = (R) => we([R]), Xe = (R, N) => we([R, N]), _e = () => {
      var R = ne.pop();
      R || oe("no exception to throw");
      var N = R.excPtr;
      throw R.get_rethrown() || (ne.push(R), R.set_rethrown(!0), R.set_caught(!1), Q++), G = N, G;
    }, qe = (R, N, re) => {
      var me = new Ie(R);
      throw me.init(N, re), G = R, Q++, G;
    }, Ze = () => Q, _t = {}, It = (R) => {
      for (; R.length; ) {
        var N = R.pop(), re = R.pop();
        re(N);
      }
    };
    function it(R) {
      return this.fromWireType(A[R >> 2]);
    }
    var Bt = {}, tn = {}, Kn = {}, oa, $a = (R) => {
      throw new oa(R);
    }, ba = (R, N, re) => {
      R.forEach(function(Qe) {
        Kn[Qe] = N;
      });
      function me(Qe) {
        var lt = re(Qe);
        lt.length !== R.length && $a("Mismatched type converter count");
        for (var mt = 0; mt < R.length; ++mt)
          st(R[mt], lt[mt]);
      }
      var Me = new Array(N.length), He = [], $e = 0;
      N.forEach((Qe, lt) => {
        tn.hasOwnProperty(Qe) ? Me[lt] = tn[Qe] : (He.push(Qe), Bt.hasOwnProperty(Qe) || (Bt[Qe] = []), Bt[Qe].push(() => {
          Me[lt] = tn[Qe], ++$e, $e === He.length && me(Me);
        }));
      }), He.length === 0 && me(Me);
    }, jn = (R) => {
      var N = _t[R];
      delete _t[R];
      var re = N.rawConstructor, me = N.rawDestructor, Me = N.fields, He = Me.map(($e) => $e.getterReturnType).concat(Me.map(($e) => $e.setterArgumentType));
      ba([R], He, ($e) => {
        var Qe = {};
        return Me.forEach((lt, mt) => {
          var Ct = lt.fieldName, qt = $e[mt], zt = lt.getter, Wt = lt.getterContext, wn = $e[mt + Me.length], Nn = lt.setter, Cn = lt.setterContext;
          Qe[Ct] = {
            read: (ma) => qt.fromWireType(zt(Wt, ma)),
            write: (ma, dt) => {
              var xt = [];
              Nn(Cn, ma, wn.toWireType(xt, dt)), It(xt);
            }
          };
        }), [{
          name: N.name,
          fromWireType: (lt) => {
            var mt = {};
            for (var Ct in Qe)
              mt[Ct] = Qe[Ct].read(lt);
            return me(lt), mt;
          },
          toWireType: (lt, mt) => {
            for (var Ct in Qe)
              if (!(Ct in mt))
                throw new TypeError(`Missing field: "${Ct}"`);
            var qt = re();
            for (Ct in Qe)
              Qe[Ct].write(qt, mt[Ct]);
            return lt !== null && lt.push(me, qt), qt;
          },
          argPackAdvance: vt,
          readValueFromPointer: it,
          destructorFunction: me
        }];
      });
    }, Rn = (R, N, re, me, Me) => {
    }, er = () => {
      for (var R = new Array(256), N = 0; N < 256; ++N)
        R[N] = String.fromCharCode(N);
      Te = R;
    }, Te, ze = (R) => {
      for (var N = "", re = R; v[re]; )
        N += Te[v[re++]];
      return N;
    }, ft, ot = (R) => {
      throw new ft(R);
    };
    function Ke(R, N) {
      let re = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      var me = N.name;
      if (R || ot(`type "${me}" must have a positive integer typeid pointer`), tn.hasOwnProperty(R)) {
        if (re.ignoreDuplicateRegistrations)
          return;
        ot(`Cannot register type '${me}' twice`);
      }
      if (tn[R] = N, delete Kn[R], Bt.hasOwnProperty(R)) {
        var Me = Bt[R];
        delete Bt[R], Me.forEach((He) => He());
      }
    }
    function st(R, N) {
      let re = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
      if (!("argPackAdvance" in N))
        throw new TypeError("registerType registeredInstance requires argPackAdvance");
      return Ke(R, N, re);
    }
    var vt = 8, Ea = (R, N, re, me) => {
      N = ze(N), st(R, {
        name: N,
        fromWireType: function(Me) {
          return !!Me;
        },
        toWireType: function(Me, He) {
          return He ? re : me;
        },
        argPackAdvance: vt,
        readValueFromPointer: function(Me) {
          return this.fromWireType(v[Me]);
        },
        destructorFunction: null
      });
    }, qa = (R) => ({
      count: R.count,
      deleteScheduled: R.deleteScheduled,
      preservePointerOnDelete: R.preservePointerOnDelete,
      ptr: R.ptr,
      ptrType: R.ptrType,
      smartPtr: R.smartPtr,
      smartPtrType: R.smartPtrType
    }), _r = (R) => {
      function N(re) {
        return re.$$.ptrType.registeredClass.name;
      }
      ot(N(R) + " instance already deleted");
    }, Ka = !1, to = (R) => {
    }, sl = (R) => {
      R.smartPtr ? R.smartPtrType.rawDestructor(R.smartPtr) : R.ptrType.registeredClass.rawDestructor(R.ptr);
    }, no = (R) => {
      R.count.value -= 1;
      var N = R.count.value === 0;
      N && sl(R);
    }, mm = (R, N, re) => {
      if (N === re)
        return R;
      if (re.baseClass === void 0)
        return null;
      var me = mm(R, N, re.baseClass);
      return me === null ? null : re.downcast(me);
    }, Sc = {}, Kv = () => Object.keys(ul).length, jv = () => {
      var R = [];
      for (var N in ul)
        ul.hasOwnProperty(N) && R.push(ul[N]);
      return R;
    }, ll = [], sd = () => {
      for (; ll.length; ) {
        var R = ll.pop();
        R.$$.deleteScheduled = !1, R.delete();
      }
    }, cl, Yv = (R) => {
      cl = R, ll.length && cl && cl(sd);
    }, Gv = () => {
      n.getInheritedInstanceCount = Kv, n.getLiveInheritedInstances = jv, n.flushPendingDeletes = sd, n.setDelayFunction = Yv;
    }, ul = {}, hm = (R, N) => {
      for (N === void 0 && ot("ptr should not be undefined"); R.baseClass; )
        N = R.upcast(N), R = R.baseClass;
      return N;
    }, Qv = (R, N) => (N = hm(R, N), ul[N]), Cc = (R, N) => {
      (!N.ptrType || !N.ptr) && $a("makeClassHandle requires ptr and ptrType");
      var re = !!N.smartPtrType, me = !!N.smartPtr;
      return re !== me && $a("Both smartPtrType and smartPtr must be specified"), N.count = {
        value: 1
      }, dl(Object.create(R, {
        $$: {
          value: N,
          writable: !0
        }
      }));
    };
    function Jv(R) {
      var N = this.getPointee(R);
      if (!N)
        return this.destructor(R), null;
      var re = Qv(this.registeredClass, N);
      if (re !== void 0) {
        if (re.$$.count.value === 0)
          return re.$$.ptr = N, re.$$.smartPtr = R, re.clone();
        var me = re.clone();
        return this.destructor(R), me;
      }
      function Me() {
        return this.isSmartPointer ? Cc(this.registeredClass.instancePrototype, {
          ptrType: this.pointeeType,
          ptr: N,
          smartPtrType: this,
          smartPtr: R
        }) : Cc(this.registeredClass.instancePrototype, {
          ptrType: this,
          ptr: R
        });
      }
      var He = this.registeredClass.getActualType(N), $e = Sc[He];
      if (!$e)
        return Me.call(this);
      var Qe;
      this.isConst ? Qe = $e.constPointerType : Qe = $e.pointerType;
      var lt = mm(N, this.registeredClass, Qe.registeredClass);
      return lt === null ? Me.call(this) : this.isSmartPointer ? Cc(Qe.registeredClass.instancePrototype, {
        ptrType: Qe,
        ptr: lt,
        smartPtrType: this,
        smartPtr: R
      }) : Cc(Qe.registeredClass.instancePrototype, {
        ptrType: Qe,
        ptr: lt
      });
    }
    var dl = (R) => typeof FinalizationRegistry > "u" ? (dl = (N) => N, R) : (Ka = new FinalizationRegistry((N) => {
      no(N.$$);
    }), dl = (N) => {
      var re = N.$$, me = !!re.smartPtr;
      if (me) {
        var Me = {
          $$: re
        };
        Ka.register(N, Me, N);
      }
      return N;
    }, to = (N) => Ka.unregister(N), dl(R)), Xv = () => {
      Object.assign(Ac.prototype, {
        isAliasOf(R) {
          if (!(this instanceof Ac) || !(R instanceof Ac))
            return !1;
          var N = this.$$.ptrType.registeredClass, re = this.$$.ptr;
          R.$$ = R.$$;
          for (var me = R.$$.ptrType.registeredClass, Me = R.$$.ptr; N.baseClass; )
            re = N.upcast(re), N = N.baseClass;
          for (; me.baseClass; )
            Me = me.upcast(Me), me = me.baseClass;
          return N === me && re === Me;
        },
        clone() {
          if (this.$$.ptr || _r(this), this.$$.preservePointerOnDelete)
            return this.$$.count.value += 1, this;
          var R = dl(Object.create(Object.getPrototypeOf(this), {
            $$: {
              value: qa(this.$$)
            }
          }));
          return R.$$.count.value += 1, R.$$.deleteScheduled = !1, R;
        },
        delete() {
          this.$$.ptr || _r(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && ot("Object already scheduled for deletion"), to(this), no(this.$$), this.$$.preservePointerOnDelete || (this.$$.smartPtr = void 0, this.$$.ptr = void 0);
        },
        isDeleted() {
          return !this.$$.ptr;
        },
        deleteLater() {
          return this.$$.ptr || _r(this), this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && ot("Object already scheduled for deletion"), ll.push(this), ll.length === 1 && cl && cl(sd), this.$$.deleteScheduled = !0, this;
        }
      });
    };
    function Ac() {
    }
    var ao = (R, N) => Object.defineProperty(N, "name", {
      value: R
    }), _m = (R, N, re) => {
      if (R[N].overloadTable === void 0) {
        var me = R[N];
        R[N] = function() {
          return R[N].overloadTable.hasOwnProperty(arguments.length) || ot(`Function '${re}' called with an invalid number of arguments (${arguments.length}) - expects one of (${R[N].overloadTable})!`), R[N].overloadTable[arguments.length].apply(this, arguments);
        }, R[N].overloadTable = [], R[N].overloadTable[me.argCount] = me;
      }
    }, _s = (R, N, re) => {
      n.hasOwnProperty(R) ? ((re === void 0 || n[R].overloadTable !== void 0 && n[R].overloadTable[re] !== void 0) && ot(`Cannot register public name '${R}' twice`), _m(n, R, R), n.hasOwnProperty(re) && ot(`Cannot register multiple overloads of a function with the same number of arguments (${re})!`), n[R].overloadTable[re] = N) : (n[R] = N, re !== void 0 && (n[R].numArguments = re));
    }, Zv = 48, ep = 57, tp = (R) => {
      if (R === void 0)
        return "_unknown";
      R = R.replace(/[^a-zA-Z0-9_]/g, "$");
      var N = R.charCodeAt(0);
      return N >= Zv && N <= ep ? `_${R}` : R;
    };
    function pm(R, N, re, me, Me, He, $e, Qe) {
      this.name = R, this.constructor = N, this.instancePrototype = re, this.rawDestructor = me, this.baseClass = Me, this.getActualType = He, this.upcast = $e, this.downcast = Qe, this.pureVirtualFunctions = [];
    }
    var xc = (R, N, re) => {
      for (; N !== re; )
        N.upcast || ot(`Expected null or instance of ${re.name}, got an instance of ${N.name}`), R = N.upcast(R), N = N.baseClass;
      return R;
    };
    function gm(R, N) {
      if (N === null)
        return this.isReference && ot(`null is not a valid ${this.name}`), 0;
      N.$$ || ot(`Cannot pass "${hl(N)}" as a ${this.name}`), N.$$.ptr || ot(`Cannot pass deleted object as a pointer of type ${this.name}`);
      var re = N.$$.ptrType.registeredClass, me = xc(N.$$.ptr, re, this.registeredClass);
      return me;
    }
    function np(R, N) {
      var re;
      if (N === null)
        return this.isReference && ot(`null is not a valid ${this.name}`), this.isSmartPointer ? (re = this.rawConstructor(), R !== null && R.push(this.rawDestructor, re), re) : 0;
      (!N || !N.$$) && ot(`Cannot pass "${hl(N)}" as a ${this.name}`), N.$$.ptr || ot(`Cannot pass deleted object as a pointer of type ${this.name}`), !this.isConst && N.$$.ptrType.isConst && ot(`Cannot convert argument of type ${N.$$.smartPtrType ? N.$$.smartPtrType.name : N.$$.ptrType.name} to parameter type ${this.name}`);
      var me = N.$$.ptrType.registeredClass;
      if (re = xc(N.$$.ptr, me, this.registeredClass), this.isSmartPointer)
        switch (N.$$.smartPtr === void 0 && ot("Passing raw pointer to smart pointer is illegal"), this.sharingPolicy) {
          case 0:
            N.$$.smartPtrType === this ? re = N.$$.smartPtr : ot(`Cannot convert argument of type ${N.$$.smartPtrType ? N.$$.smartPtrType.name : N.$$.ptrType.name} to parameter type ${this.name}`);
            break;
          case 1:
            re = N.$$.smartPtr;
            break;
          case 2:
            if (N.$$.smartPtrType === this)
              re = N.$$.smartPtr;
            else {
              var Me = N.clone();
              re = this.rawShare(re, Vi.toHandle(() => Me.delete())), R !== null && R.push(this.rawDestructor, re);
            }
            break;
          default:
            ot("Unsupporting sharing policy");
        }
      return re;
    }
    function ap(R, N) {
      if (N === null)
        return this.isReference && ot(`null is not a valid ${this.name}`), 0;
      N.$$ || ot(`Cannot pass "${hl(N)}" as a ${this.name}`), N.$$.ptr || ot(`Cannot pass deleted object as a pointer of type ${this.name}`), N.$$.ptrType.isConst && ot(`Cannot convert argument of type ${N.$$.ptrType.name} to parameter type ${this.name}`);
      var re = N.$$.ptrType.registeredClass, me = xc(N.$$.ptr, re, this.registeredClass);
      return me;
    }
    function ym(R) {
      return this.fromWireType(C[R >> 2]);
    }
    var rp = () => {
      Object.assign(fl.prototype, {
        getPointee(R) {
          return this.rawGetPointee && (R = this.rawGetPointee(R)), R;
        },
        destructor(R) {
          var N;
          (N = this.rawDestructor) === null || N === void 0 || N.call(this, R);
        },
        argPackAdvance: vt,
        readValueFromPointer: ym,
        deleteObject(R) {
          R !== null && R.delete();
        },
        fromWireType: Jv
      });
    };
    function fl(R, N, re, me, Me, He, $e, Qe, lt, mt, Ct) {
      this.name = R, this.registeredClass = N, this.isReference = re, this.isConst = me, this.isSmartPointer = Me, this.pointeeType = He, this.sharingPolicy = $e, this.rawGetPointee = Qe, this.rawConstructor = lt, this.rawShare = mt, this.rawDestructor = Ct, !Me && N.baseClass === void 0 ? me ? (this.toWireType = gm, this.destructorFunction = null) : (this.toWireType = ap, this.destructorFunction = null) : this.toWireType = np;
    }
    var ld = (R, N, re) => {
      n.hasOwnProperty(R) || $a("Replacing nonexistant public symbol"), n[R].overloadTable !== void 0 && re !== void 0 ? n[R].overloadTable[re] = N : (n[R] = N, n[R].argCount = re);
    }, bm = (R, N, re) => {
      var me = n["dynCall_" + R];
      return re && re.length ? me.apply(null, [N].concat(re)) : me.call(null, N);
    }, vs = [], wm, Yn = (R) => {
      var N = vs[R];
      return N || (R >= vs.length && (vs.length = R + 1), vs[R] = N = wm.get(R)), N;
    }, Tc = (R, N, re) => {
      if (R.includes("j"))
        return bm(R, N, re);
      var me = Yn(N).apply(null, re);
      return me;
    }, km = (R, N) => {
      var re = [];
      return function() {
        return re.length = 0, Object.assign(re, arguments), Tc(R, N, re);
      };
    }, ei = (R, N) => {
      R = ze(R);
      function re() {
        return R.includes("j") ? km(R, N) : Yn(N);
      }
      var me = re();
      return typeof me != "function" && ot(`unknown function pointer with signature ${R}: ${N}`), me;
    }, Sm = (R, N) => {
      var re = ao(N, function(me) {
        this.name = N, this.message = me;
        var Me = new Error(me).stack;
        Me !== void 0 && (this.stack = this.toString() + `
` + Me.replace(/^Error(:[^\n]*)?\n/, ""));
      });
      return re.prototype = Object.create(R.prototype), re.prototype.constructor = re, re.prototype.toString = function() {
        return this.message === void 0 ? this.name : `${this.name}: ${this.message}`;
      }, re;
    }, cd, Ic = (R) => {
      var N = Hm(R), re = ze(N);
      return bi(N), re;
    }, Ec = (R, N) => {
      var re = [], me = {};
      function Me(He) {
        if (!me[He] && !tn[He]) {
          if (Kn[He]) {
            Kn[He].forEach(Me);
            return;
          }
          re.push(He), me[He] = !0;
        }
      }
      throw N.forEach(Me), new cd(`${R}: ` + re.map(Ic).join([", "]));
    }, Cm = (R, N, re, me, Me, He, $e, Qe, lt, mt, Ct, qt, zt) => {
      Ct = ze(Ct), He = ei(Me, He), Qe && (Qe = ei($e, Qe)), mt && (mt = ei(lt, mt)), zt = ei(qt, zt);
      var Wt = tp(Ct);
      _s(Wt, function() {
        Ec(`Cannot construct ${Ct} due to unbound types`, [me]);
      }), ba([R, N, re], me ? [me] : [], function(wn) {
        wn = wn[0];
        var Nn, Cn;
        me ? (Nn = wn.registeredClass, Cn = Nn.instancePrototype) : Cn = Ac.prototype;
        var ma = ao(Ct, function() {
          if (Object.getPrototypeOf(this) !== dt)
            throw new ft("Use 'new' to construct " + Ct);
          if (xt.constructor_body === void 0)
            throw new ft(Ct + " has no accessible constructor");
          var Ym = xt.constructor_body[arguments.length];
          if (Ym === void 0)
            throw new ft(`Tried to invoke ctor of ${Ct} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(xt.constructor_body).toString()}) parameters instead!`);
          return Ym.apply(this, arguments);
        }), dt = Object.create(Cn, {
          constructor: {
            value: ma
          }
        });
        ma.prototype = dt;
        var xt = new pm(Ct, ma, dt, zt, Nn, He, Qe, mt);
        if (xt.baseClass) {
          var Un, wa;
          (wa = (Un = xt.baseClass).__derivedClasses) !== null && wa !== void 0 || (Un.__derivedClasses = []), xt.baseClass.__derivedClasses.push(xt);
        }
        var wi = new fl(Ct, xt, !0, !1, !1), ki = new fl(Ct + "*", xt, !1, !1, !1), pl = new fl(Ct + " const*", xt, !1, !0, !1);
        return Sc[R] = {
          pointerType: ki,
          constPointerType: pl
        }, ld(Wt, ma), [wi, ki, pl];
      });
    }, ml = (R, N) => {
      for (var re = [], me = 0; me < R; me++)
        re.push(C[N + me * 4 >> 2]);
      return re;
    };
    function ud(R) {
      for (var N = 1; N < R.length; ++N)
        if (R[N] !== null && R[N].destructorFunction === void 0)
          return !0;
      return !1;
    }
    function ro(R, N, re, me, Me, He) {
      var $e = N.length;
      $e < 2 && ot("argTypes array size mismatch! Must at least get return value and 'this' types!");
      var Qe = N[1] !== null && re !== null, lt = ud(N), mt = N[0].name !== "void", Ct = $e - 2, qt = new Array(Ct), zt = [], Wt = [], wn = function() {
        arguments.length !== Ct && ot(`function ${R} called with ${arguments.length} arguments, expected ${Ct}`), Wt.length = 0;
        var Nn;
        zt.length = Qe ? 2 : 1, zt[0] = Me, Qe && (Nn = N[1].toWireType(Wt, this), zt[1] = Nn);
        for (var Cn = 0; Cn < Ct; ++Cn)
          qt[Cn] = N[Cn + 2].toWireType(Wt, arguments[Cn]), zt.push(qt[Cn]);
        var ma = me.apply(null, zt);
        function dt(xt) {
          if (lt)
            It(Wt);
          else
            for (var Un = Qe ? 1 : 2; Un < N.length; Un++) {
              var wa = Un === 1 ? Nn : qt[Un - 2];
              N[Un].destructorFunction !== null && N[Un].destructorFunction(wa);
            }
          if (mt)
            return N[0].fromWireType(xt);
        }
        return dt(ma);
      };
      return ao(R, wn);
    }
    var Am = (R, N, re, me, Me, He) => {
      var $e = ml(N, re);
      Me = ei(me, Me), ba([], [R], function(Qe) {
        Qe = Qe[0];
        var lt = `constructor ${Qe.name}`;
        if (Qe.registeredClass.constructor_body === void 0 && (Qe.registeredClass.constructor_body = []), Qe.registeredClass.constructor_body[N - 1] !== void 0)
          throw new ft(`Cannot register multiple constructors with identical number of parameters (${N - 1}) for class '${Qe.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);
        return Qe.registeredClass.constructor_body[N - 1] = () => {
          Ec(`Cannot construct ${Qe.name} due to unbound types`, $e);
        }, ba([], $e, (mt) => (mt.splice(1, 0, null), Qe.registeredClass.constructor_body[N - 1] = ro(lt, mt, null, Me, He), [])), [];
      });
    }, dd = (R) => {
      R = R.trim();
      const N = R.indexOf("(");
      return N !== -1 ? R.substr(0, N) : R;
    }, ip = (R, N, re, me, Me, He, $e, Qe, lt) => {
      var mt = ml(re, me);
      N = ze(N), N = dd(N), He = ei(Me, He), ba([], [R], function(Ct) {
        Ct = Ct[0];
        var qt = `${Ct.name}.${N}`;
        N.startsWith("@@") && (N = Symbol[N.substring(2)]), Qe && Ct.registeredClass.pureVirtualFunctions.push(N);
        function zt() {
          Ec(`Cannot call ${qt} due to unbound types`, mt);
        }
        var Wt = Ct.registeredClass.instancePrototype, wn = Wt[N];
        return wn === void 0 || wn.overloadTable === void 0 && wn.className !== Ct.name && wn.argCount === re - 2 ? (zt.argCount = re - 2, zt.className = Ct.name, Wt[N] = zt) : (_m(Wt, N, qt), Wt[N].overloadTable[re - 2] = zt), ba([], mt, function(Nn) {
          var Cn = ro(qt, Nn, Ct, He, $e);
          return Wt[N].overloadTable === void 0 ? (Cn.argCount = re - 2, Wt[N] = Cn) : Wt[N].overloadTable[re - 2] = Cn, [];
        }), [];
      });
    };
    function xm() {
      Object.assign(fd.prototype, {
        get(R) {
          return this.allocated[R];
        },
        has(R) {
          return this.allocated[R] !== void 0;
        },
        allocate(R) {
          var N = this.freelist.pop() || this.allocated.length;
          return this.allocated[N] = R, N;
        },
        free(R) {
          this.allocated[R] = void 0, this.freelist.push(R);
        }
      });
    }
    function fd() {
      this.allocated = [void 0], this.freelist = [];
    }
    var Ir = new fd(), Pc = (R) => {
      R >= Ir.reserved && --Ir.get(R).refcount === 0 && Ir.free(R);
    }, op = () => {
      for (var R = 0, N = Ir.reserved; N < Ir.allocated.length; ++N)
        Ir.allocated[N] !== void 0 && ++R;
      return R;
    }, sp = () => {
      Ir.allocated.push({
        value: void 0
      }, {
        value: null
      }, {
        value: !0
      }, {
        value: !1
      }), Ir.reserved = Ir.allocated.length, n.count_emval_handles = op;
    }, Vi = {
      toValue: (R) => (R || ot("Cannot use deleted val. handle = " + R), Ir.get(R).value),
      toHandle: (R) => {
        switch (R) {
          case void 0:
            return 1;
          case null:
            return 2;
          case !0:
            return 3;
          case !1:
            return 4;
          default:
            return Ir.allocate({
              refcount: 1,
              value: R
            });
        }
      }
    }, Tm = (R, N) => {
      N = ze(N), st(R, {
        name: N,
        fromWireType: (re) => {
          var me = Vi.toValue(re);
          return Pc(re), me;
        },
        toWireType: (re, me) => Vi.toHandle(me),
        argPackAdvance: vt,
        readValueFromPointer: it,
        destructorFunction: null
      });
    }, lp = (R, N, re) => {
      switch (N) {
        case 1:
          return re ? function(me) {
            return this.fromWireType(b[me >> 0]);
          } : function(me) {
            return this.fromWireType(v[me >> 0]);
          };
        case 2:
          return re ? function(me) {
            return this.fromWireType(g[me >> 1]);
          } : function(me) {
            return this.fromWireType(k[me >> 1]);
          };
        case 4:
          return re ? function(me) {
            return this.fromWireType(A[me >> 2]);
          } : function(me) {
            return this.fromWireType(C[me >> 2]);
          };
        default:
          throw new TypeError(`invalid integer width (${N}): ${R}`);
      }
    }, cp = (R, N, re, me) => {
      N = ze(N);
      function Me() {
      }
      Me.values = {}, st(R, {
        name: N,
        constructor: Me,
        fromWireType: function(He) {
          return this.constructor.values[He];
        },
        toWireType: (He, $e) => $e.value,
        argPackAdvance: vt,
        readValueFromPointer: lp(N, re, me),
        destructorFunction: null
      }), _s(N, Me);
    }, md = (R, N) => {
      var re = tn[R];
      return re === void 0 && ot(N + " has unknown type " + Ic(R)), re;
    }, up = (R, N, re) => {
      var me = md(R, "enum");
      N = ze(N);
      var Me = me.constructor, He = Object.create(me.constructor.prototype, {
        value: {
          value: re
        },
        constructor: {
          value: ao(`${me.name}_${N}`, function() {
          })
        }
      });
      Me.values[re] = He, Me[N] = He;
    }, hl = (R) => {
      if (R === null)
        return "null";
      var N = typeof R;
      return N === "object" || N === "array" || N === "function" ? R.toString() : "" + R;
    }, dp = (R, N) => {
      switch (N) {
        case 4:
          return function(re) {
            return this.fromWireType(D[re >> 2]);
          };
        case 8:
          return function(re) {
            return this.fromWireType(P[re >> 3]);
          };
        default:
          throw new TypeError(`invalid float width (${N}): ${R}`);
      }
    }, fp = (R, N, re) => {
      N = ze(N), st(R, {
        name: N,
        fromWireType: (me) => me,
        toWireType: (me, Me) => Me,
        argPackAdvance: vt,
        readValueFromPointer: dp(N, re),
        destructorFunction: null
      });
    }, mp = (R, N, re, me, Me, He, $e) => {
      var Qe = ml(N, re);
      R = ze(R), R = dd(R), Me = ei(me, Me), _s(R, function() {
        Ec(`Cannot call ${R} due to unbound types`, Qe);
      }, N - 1), ba([], Qe, function(lt) {
        var mt = [lt[0], null].concat(lt.slice(1));
        return ld(R, ro(R, mt, null, Me, He), N - 1), [];
      });
    }, hp = (R, N, re) => {
      switch (N) {
        case 1:
          return re ? (me) => b[me >> 0] : (me) => v[me >> 0];
        case 2:
          return re ? (me) => g[me >> 1] : (me) => k[me >> 1];
        case 4:
          return re ? (me) => A[me >> 2] : (me) => C[me >> 2];
        default:
          throw new TypeError(`invalid integer width (${N}): ${R}`);
      }
    }, _p = (R, N, re, me, Me) => {
      N = ze(N);
      var He = (Ct) => Ct;
      if (me === 0) {
        var $e = 32 - 8 * re;
        He = (Ct) => Ct << $e >>> $e;
      }
      var Qe = N.includes("unsigned"), lt = (Ct, qt) => {
      }, mt;
      Qe ? mt = function(Ct, qt) {
        return lt(qt, this.name), qt >>> 0;
      } : mt = function(Ct, qt) {
        return lt(qt, this.name), qt;
      }, st(R, {
        name: N,
        fromWireType: He,
        toWireType: mt,
        argPackAdvance: vt,
        readValueFromPointer: hp(N, re, me !== 0),
        destructorFunction: null
      });
    }, Fn = (R, N, re) => {
      var me = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array], Me = me[N];
      function He($e) {
        var Qe = C[$e >> 2], lt = C[$e + 4 >> 2];
        return new Me(b.buffer, lt, Qe);
      }
      re = ze(re), st(R, {
        name: re,
        fromWireType: He,
        argPackAdvance: vt,
        readValueFromPointer: He
      }, {
        ignoreDuplicateRegistrations: !0
      });
    }, In = (R, N, re, me) => {
      if (!(me > 0))
        return 0;
      for (var Me = re, He = re + me - 1, $e = 0; $e < R.length; ++$e) {
        var Qe = R.charCodeAt($e);
        if (Qe >= 55296 && Qe <= 57343) {
          var lt = R.charCodeAt(++$e);
          Qe = 65536 + ((Qe & 1023) << 10) | lt & 1023;
        }
        if (Qe <= 127) {
          if (re >= He)
            break;
          N[re++] = Qe;
        } else if (Qe <= 2047) {
          if (re + 1 >= He)
            break;
          N[re++] = 192 | Qe >> 6, N[re++] = 128 | Qe & 63;
        } else if (Qe <= 65535) {
          if (re + 2 >= He)
            break;
          N[re++] = 224 | Qe >> 12, N[re++] = 128 | Qe >> 6 & 63, N[re++] = 128 | Qe & 63;
        } else {
          if (re + 3 >= He)
            break;
          N[re++] = 240 | Qe >> 18, N[re++] = 128 | Qe >> 12 & 63, N[re++] = 128 | Qe >> 6 & 63, N[re++] = 128 | Qe & 63;
        }
      }
      return N[re] = 0, re - Me;
    }, vp = (R, N, re) => In(R, v, N, re), Im = (R) => {
      for (var N = 0, re = 0; re < R.length; ++re) {
        var me = R.charCodeAt(re);
        me <= 127 ? N++ : me <= 2047 ? N += 2 : me >= 55296 && me <= 57343 ? (N += 4, ++re) : N += 3;
      }
      return N;
    }, Em = typeof TextDecoder < "u" ? new TextDecoder("utf8") : void 0, pp = (R, N, re) => {
      for (var me = N + re, Me = N; R[Me] && !(Me >= me); )
        ++Me;
      if (Me - N > 16 && R.buffer && Em)
        return Em.decode(R.subarray(N, Me));
      for (var He = ""; N < Me; ) {
        var $e = R[N++];
        if (!($e & 128)) {
          He += String.fromCharCode($e);
          continue;
        }
        var Qe = R[N++] & 63;
        if (($e & 224) == 192) {
          He += String.fromCharCode(($e & 31) << 6 | Qe);
          continue;
        }
        var lt = R[N++] & 63;
        if (($e & 240) == 224 ? $e = ($e & 15) << 12 | Qe << 6 | lt : $e = ($e & 7) << 18 | Qe << 12 | lt << 6 | R[N++] & 63, $e < 65536)
          He += String.fromCharCode($e);
        else {
          var mt = $e - 65536;
          He += String.fromCharCode(55296 | mt >> 10, 56320 | mt & 1023);
        }
      }
      return He;
    }, hd = (R, N) => R ? pp(v, R, N) : "", gp = (R, N) => {
      N = ze(N);
      var re = N === "std::string";
      st(R, {
        name: N,
        fromWireType(me) {
          var Me = C[me >> 2], He = me + 4, $e;
          if (re)
            for (var Qe = He, lt = 0; lt <= Me; ++lt) {
              var mt = He + lt;
              if (lt == Me || v[mt] == 0) {
                var Ct = mt - Qe, qt = hd(Qe, Ct);
                $e === void 0 ? $e = qt : ($e += "\0", $e += qt), Qe = mt + 1;
              }
            }
          else {
            for (var zt = new Array(Me), lt = 0; lt < Me; ++lt)
              zt[lt] = String.fromCharCode(v[He + lt]);
            $e = zt.join("");
          }
          return bi(me), $e;
        },
        toWireType(me, Me) {
          Me instanceof ArrayBuffer && (Me = new Uint8Array(Me));
          var He, $e = typeof Me == "string";
          $e || Me instanceof Uint8Array || Me instanceof Uint8ClampedArray || Me instanceof Int8Array || ot("Cannot pass non-string to std::string"), re && $e ? He = Im(Me) : He = Me.length;
          var Qe = Cd(4 + He + 1), lt = Qe + 4;
          if (C[Qe >> 2] = He, re && $e)
            vp(Me, lt, He + 1);
          else if ($e)
            for (var mt = 0; mt < He; ++mt) {
              var Ct = Me.charCodeAt(mt);
              Ct > 255 && (bi(lt), ot("String has UTF-16 code units that do not fit in 8 bits")), v[lt + mt] = Ct;
            }
          else
            for (var mt = 0; mt < He; ++mt)
              v[lt + mt] = Me[mt];
          return me !== null && me.push(bi, Qe), Qe;
        },
        argPackAdvance: vt,
        readValueFromPointer: ym,
        destructorFunction(me) {
          bi(me);
        }
      });
    }, _d = typeof TextDecoder < "u" ? new TextDecoder("utf-16le") : void 0, yp = (R, N) => {
      for (var re = R, me = re >> 1, Me = me + N / 2; !(me >= Me) && k[me]; )
        ++me;
      if (re = me << 1, re - R > 32 && _d)
        return _d.decode(v.subarray(R, re));
      for (var He = "", $e = 0; !($e >= N / 2); ++$e) {
        var Qe = g[R + $e * 2 >> 1];
        if (Qe == 0)
          break;
        He += String.fromCharCode(Qe);
      }
      return He;
    }, ja = (R, N, re) => {
      var me;
      if ((me = re) !== null && me !== void 0 || (re = 2147483647), re < 2)
        return 0;
      re -= 2;
      for (var Me = N, He = re < R.length * 2 ? re / 2 : R.length, $e = 0; $e < He; ++$e) {
        var Qe = R.charCodeAt($e);
        g[N >> 1] = Qe, N += 2;
      }
      return g[N >> 1] = 0, N - Me;
    }, vd = (R) => R.length * 2, Bo = (R, N) => {
      for (var re = 0, me = ""; !(re >= N / 4); ) {
        var Me = A[R + re * 4 >> 2];
        if (Me == 0)
          break;
        if (++re, Me >= 65536) {
          var He = Me - 65536;
          me += String.fromCharCode(55296 | He >> 10, 56320 | He & 1023);
        } else
          me += String.fromCharCode(Me);
      }
      return me;
    }, Pm = (R, N, re) => {
      var me;
      if ((me = re) !== null && me !== void 0 || (re = 2147483647), re < 4)
        return 0;
      for (var Me = N, He = Me + re - 4, $e = 0; $e < R.length; ++$e) {
        var Qe = R.charCodeAt($e);
        if (Qe >= 55296 && Qe <= 57343) {
          var lt = R.charCodeAt(++$e);
          Qe = 65536 + ((Qe & 1023) << 10) | lt & 1023;
        }
        if (A[N >> 2] = Qe, N += 4, N + 4 > He)
          break;
      }
      return A[N >> 2] = 0, N - Me;
    }, pd = (R) => {
      for (var N = 0, re = 0; re < R.length; ++re) {
        var me = R.charCodeAt(re);
        me >= 55296 && me <= 57343 && ++re, N += 4;
      }
      return N;
    }, zr = (R, N, re) => {
      re = ze(re);
      var me, Me, He, $e, Qe;
      N === 2 ? (me = yp, Me = ja, $e = vd, He = () => k, Qe = 1) : N === 4 && (me = Bo, Me = Pm, $e = pd, He = () => C, Qe = 2), st(R, {
        name: re,
        fromWireType: (lt) => {
          for (var mt = C[lt >> 2], Ct = He(), qt, zt = lt + 4, Wt = 0; Wt <= mt; ++Wt) {
            var wn = lt + 4 + Wt * N;
            if (Wt == mt || Ct[wn >> Qe] == 0) {
              var Nn = wn - zt, Cn = me(zt, Nn);
              qt === void 0 ? qt = Cn : (qt += "\0", qt += Cn), zt = wn + N;
            }
          }
          return bi(lt), qt;
        },
        toWireType: (lt, mt) => {
          typeof mt != "string" && ot(`Cannot pass non-string to C++ string type ${re}`);
          var Ct = $e(mt), qt = Cd(4 + Ct + N);
          return C[qt >> 2] = Ct >> Qe, Me(mt, qt + 4, Ct + N), lt !== null && lt.push(bi, qt), qt;
        },
        argPackAdvance: vt,
        readValueFromPointer: it,
        destructorFunction(lt) {
          bi(lt);
        }
      });
    }, Om = (R, N, re, me, Me, He) => {
      _t[R] = {
        name: ze(N),
        rawConstructor: ei(re, me),
        rawDestructor: ei(Me, He),
        fields: []
      };
    }, Dm = (R, N, re, me, Me, He, $e, Qe, lt, mt) => {
      _t[R].fields.push({
        fieldName: ze(N),
        getterReturnType: re,
        getter: ei(me, Me),
        getterContext: He,
        setterArgumentType: $e,
        setter: ei(Qe, lt),
        setterContext: mt
      });
    }, Bm = (R, N) => {
      N = ze(N), st(R, {
        isVoid: !0,
        name: N,
        argPackAdvance: 0,
        fromWireType: () => {
        },
        toWireType: (re, me) => {
        }
      });
    }, Oc = [], Vm = (R, N, re, me) => (R = Oc[R], N = Vi.toValue(N), R(null, N, re, me)), Mm = {}, Er = (R) => {
      var N = Mm[R];
      return N === void 0 ? ze(R) : N;
    }, Lm = () => {
      if (typeof globalThis == "object")
        return globalThis;
      function R(N) {
        N.$$$embind_global$$$ = N;
        var re = typeof $$$embind_global$$$ == "object" && N.$$$embind_global$$$ == N;
        return re || delete N.$$$embind_global$$$, re;
      }
      if (typeof $$$embind_global$$$ == "object" || (typeof global == "object" && R(global) ? $$$embind_global$$$ = global : typeof self == "object" && R(self) && ($$$embind_global$$$ = self), typeof $$$embind_global$$$ == "object"))
        return $$$embind_global$$$;
      throw Error("unable to get global object.");
    }, Wr = (R) => R === 0 ? Vi.toHandle(Lm()) : (R = Er(R), Vi.toHandle(Lm()[R])), bp = (R) => {
      var N = Oc.length;
      return Oc.push(R), N;
    }, Rm = (R, N) => {
      for (var re = new Array(R), me = 0; me < R; ++me)
        re[me] = md(C[N + me * 4 >> 2], "parameter " + me);
      return re;
    }, io = Reflect.construct, Dc = (R, N, re) => {
      var me = [], Me = R.toWireType(me, re);
      return me.length && (C[N >> 2] = Vi.toHandle(me)), Me;
    }, gd = (R, N, re) => {
      var me = Rm(R, N), Me = me.shift();
      R--;
      var He = new Array(R), $e = (lt, mt, Ct, qt) => {
        for (var zt = 0, Wt = 0; Wt < R; ++Wt)
          He[Wt] = me[Wt].readValueFromPointer(qt + zt), zt += me[Wt].argPackAdvance;
        for (var wn = re === 1 ? io(mt, He) : mt.apply(lt, He), Wt = 0; Wt < R; ++Wt) {
          var Nn, Cn;
          (Nn = (Cn = me[Wt]).deleteObject) === null || Nn === void 0 || Nn.call(Cn, He[Wt]);
        }
        return Dc(Me, Ct, wn);
      }, Qe = `methodCaller<(${me.map((lt) => lt.name).join(", ")}) => ${Me.name}>`;
      return bp(ao(Qe, $e));
    }, Hn = (R) => {
      R > 4 && (Ir.get(R).refcount += 1);
    }, oo = (R) => {
      var N = Vi.toValue(R);
      It(N), Pc(R);
    }, yd = (R, N) => {
      R = md(R, "_emval_take_value");
      var re = R.readValueFromPointer(N);
      return Vi.toHandle(re);
    }, wp = () => {
      oe("");
    }, bd = (R, N, re) => v.copyWithin(R, N, N + re), kp = () => 2147483648, Sp = (R) => {
      var N = p.buffer, re = (R - N.byteLength + 65535) / 65536;
      try {
        return p.grow(re), O(), 1;
      } catch {
      }
    }, Cp = (R) => {
      var N = v.length;
      R >>>= 0;
      var re = kp();
      if (R > re)
        return !1;
      for (var me = (lt, mt) => lt + (mt - lt % mt) % mt, Me = 1; Me <= 4; Me *= 2) {
        var He = N * (1 + 0.2 / Me);
        He = Math.min(He, R + 100663296);
        var $e = Math.min(re, me(Math.max(R, He), 65536)), Qe = Sp($e);
        if (Qe)
          return !0;
      }
      return !1;
    }, Bc = {}, Vc = () => o || "./this.program", yi = () => {
      if (!yi.strings) {
        var R = (typeof navigator == "object" && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", N = {
          USER: "web_user",
          LOGNAME: "web_user",
          PATH: "/",
          PWD: "/",
          HOME: "/home/web_user",
          LANG: R,
          _: Vc()
        };
        for (var re in Bc)
          Bc[re] === void 0 ? delete N[re] : N[re] = Bc[re];
        var me = [];
        for (var re in N)
          me.push(`${re}=${N[re]}`);
        yi.strings = me;
      }
      return yi.strings;
    }, Ap = (R, N) => {
      for (var re = 0; re < R.length; ++re)
        b[N++ >> 0] = R.charCodeAt(re);
      b[N >> 0] = 0;
    }, Fm = (R, N) => {
      var re = 0;
      return yi().forEach((me, Me) => {
        var He = N + re;
        C[R + Me * 4 >> 2] = He, Ap(me, He), re += me.length + 1;
      }), 0;
    }, Nm = (R, N) => {
      var re = yi();
      C[R >> 2] = re.length;
      var me = 0;
      return re.forEach((Me) => me += Me.length + 1), C[N >> 2] = me, 0;
    }, wd = (R) => R, ps = (R) => R % 4 === 0 && (R % 100 !== 0 || R % 400 === 0), Um = (R, N) => {
      for (var re = 0, me = 0; me <= N; re += R[me++])
        ;
      return re;
    }, $m = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], Mc = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], kd = (R, N) => {
      for (var re = new Date(R.getTime()); N > 0; ) {
        var me = ps(re.getFullYear()), Me = re.getMonth(), He = (me ? $m : Mc)[Me];
        if (N > He - re.getDate())
          N -= He - re.getDate() + 1, re.setDate(1), Me < 11 ? re.setMonth(Me + 1) : (re.setMonth(0), re.setFullYear(re.getFullYear() + 1));
        else
          return re.setDate(re.getDate() + N), re;
      }
      return re;
    };
    function xp(R, N, re) {
      var me = Im(R) + 1, Me = new Array(me);
      return In(R, Me, 0, Me.length), Me;
    }
    var qm = (R, N) => {
      b.set(R, N);
    }, Pr = (R, N, re, me) => {
      var Me = C[me + 40 >> 2], He = {
        tm_sec: A[me >> 2],
        tm_min: A[me + 4 >> 2],
        tm_hour: A[me + 8 >> 2],
        tm_mday: A[me + 12 >> 2],
        tm_mon: A[me + 16 >> 2],
        tm_year: A[me + 20 >> 2],
        tm_wday: A[me + 24 >> 2],
        tm_yday: A[me + 28 >> 2],
        tm_isdst: A[me + 32 >> 2],
        tm_gmtoff: A[me + 36 >> 2],
        tm_zone: Me ? hd(Me) : ""
      }, $e = hd(re), Qe = {
        "%c": "%a %b %d %H:%M:%S %Y",
        "%D": "%m/%d/%y",
        "%F": "%Y-%m-%d",
        "%h": "%b",
        "%r": "%I:%M:%S %p",
        "%R": "%H:%M",
        "%T": "%H:%M:%S",
        "%x": "%m/%d/%y",
        "%X": "%H:%M:%S",
        "%Ec": "%c",
        "%EC": "%C",
        "%Ex": "%m/%d/%y",
        "%EX": "%H:%M:%S",
        "%Ey": "%y",
        "%EY": "%Y",
        "%Od": "%d",
        "%Oe": "%e",
        "%OH": "%H",
        "%OI": "%I",
        "%Om": "%m",
        "%OM": "%M",
        "%OS": "%S",
        "%Ou": "%u",
        "%OU": "%U",
        "%OV": "%V",
        "%Ow": "%w",
        "%OW": "%W",
        "%Oy": "%y"
      };
      for (var lt in Qe)
        $e = $e.replace(new RegExp(lt, "g"), Qe[lt]);
      var mt = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], Ct = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      function qt(dt, xt, Un) {
        for (var wa = typeof dt == "number" ? dt.toString() : dt || ""; wa.length < xt; )
          wa = Un[0] + wa;
        return wa;
      }
      function zt(dt, xt) {
        return qt(dt, xt, "0");
      }
      function Wt(dt, xt) {
        function Un(wi) {
          return wi < 0 ? -1 : wi > 0 ? 1 : 0;
        }
        var wa;
        return (wa = Un(dt.getFullYear() - xt.getFullYear())) === 0 && (wa = Un(dt.getMonth() - xt.getMonth())) === 0 && (wa = Un(dt.getDate() - xt.getDate())), wa;
      }
      function wn(dt) {
        switch (dt.getDay()) {
          case 0:
            return new Date(dt.getFullYear() - 1, 11, 29);
          case 1:
            return dt;
          case 2:
            return new Date(dt.getFullYear(), 0, 3);
          case 3:
            return new Date(dt.getFullYear(), 0, 2);
          case 4:
            return new Date(dt.getFullYear(), 0, 1);
          case 5:
            return new Date(dt.getFullYear() - 1, 11, 31);
          case 6:
            return new Date(dt.getFullYear() - 1, 11, 30);
        }
      }
      function Nn(dt) {
        var xt = kd(new Date(dt.tm_year + 1900, 0, 1), dt.tm_yday), Un = new Date(xt.getFullYear(), 0, 4), wa = new Date(xt.getFullYear() + 1, 0, 4), wi = wn(Un), ki = wn(wa);
        return Wt(wi, xt) <= 0 ? Wt(ki, xt) <= 0 ? xt.getFullYear() + 1 : xt.getFullYear() : xt.getFullYear() - 1;
      }
      var Cn = {
        "%a": (dt) => mt[dt.tm_wday].substring(0, 3),
        "%A": (dt) => mt[dt.tm_wday],
        "%b": (dt) => Ct[dt.tm_mon].substring(0, 3),
        "%B": (dt) => Ct[dt.tm_mon],
        "%C": (dt) => {
          var xt = dt.tm_year + 1900;
          return zt(xt / 100 | 0, 2);
        },
        "%d": (dt) => zt(dt.tm_mday, 2),
        "%e": (dt) => qt(dt.tm_mday, 2, " "),
        "%g": (dt) => Nn(dt).toString().substring(2),
        "%G": (dt) => Nn(dt),
        "%H": (dt) => zt(dt.tm_hour, 2),
        "%I": (dt) => {
          var xt = dt.tm_hour;
          return xt == 0 ? xt = 12 : xt > 12 && (xt -= 12), zt(xt, 2);
        },
        "%j": (dt) => zt(dt.tm_mday + Um(ps(dt.tm_year + 1900) ? $m : Mc, dt.tm_mon - 1), 3),
        "%m": (dt) => zt(dt.tm_mon + 1, 2),
        "%M": (dt) => zt(dt.tm_min, 2),
        "%n": () => `
`,
        "%p": (dt) => dt.tm_hour >= 0 && dt.tm_hour < 12 ? "AM" : "PM",
        "%S": (dt) => zt(dt.tm_sec, 2),
        "%t": () => "	",
        "%u": (dt) => dt.tm_wday || 7,
        "%U": (dt) => {
          var xt = dt.tm_yday + 7 - dt.tm_wday;
          return zt(Math.floor(xt / 7), 2);
        },
        "%V": (dt) => {
          var xt = Math.floor((dt.tm_yday + 7 - (dt.tm_wday + 6) % 7) / 7);
          if ((dt.tm_wday + 371 - dt.tm_yday - 2) % 7 <= 2 && xt++, xt) {
            if (xt == 53) {
              var Un = (dt.tm_wday + 371 - dt.tm_yday) % 7;
              Un != 4 && (Un != 3 || !ps(dt.tm_year)) && (xt = 1);
            }
          } else {
            xt = 52;
            var wa = (dt.tm_wday + 7 - dt.tm_yday - 1) % 7;
            (wa == 4 || wa == 5 && ps(dt.tm_year % 400 - 1)) && xt++;
          }
          return zt(xt, 2);
        },
        "%w": (dt) => dt.tm_wday,
        "%W": (dt) => {
          var xt = dt.tm_yday + 7 - (dt.tm_wday + 6) % 7;
          return zt(Math.floor(xt / 7), 2);
        },
        "%y": (dt) => (dt.tm_year + 1900).toString().substring(2),
        "%Y": (dt) => dt.tm_year + 1900,
        "%z": (dt) => {
          var xt = dt.tm_gmtoff, Un = xt >= 0;
          return xt = Math.abs(xt) / 60, xt = xt / 60 * 100 + xt % 60, (Un ? "+" : "-") + ("0000" + xt).slice(-4);
        },
        "%Z": (dt) => dt.tm_zone,
        "%%": () => "%"
      };
      $e = $e.replace(/%%/g, "\0\0");
      for (var lt in Cn)
        $e.includes(lt) && ($e = $e.replace(new RegExp(lt, "g"), Cn[lt](He)));
      $e = $e.replace(/\0\0/g, "%");
      var ma = xp($e);
      return ma.length > N ? 0 : (qm(ma, R), ma.length - 1);
    }, Sd = (R, N, re, me, Me) => Pr(R, N, re, me);
    oa = n.InternalError = class extends Error {
      constructor(R) {
        super(R), this.name = "InternalError";
      }
    }, er(), ft = n.BindingError = class extends Error {
      constructor(R) {
        super(R), this.name = "BindingError";
      }
    }, Xv(), Gv(), rp(), cd = n.UnboundTypeError = Sm(Error, "UnboundTypeError"), xm(), sp();
    var _l = {
      s: le,
      u: Ce,
      b: Ee,
      g: Pe,
      q: Xe,
      J: _e,
      f: qe,
      V: Ze,
      d: ie,
      da: jn,
      Q: Rn,
      _: Ea,
      ca: Cm,
      ba: Am,
      w: ip,
      Y: Tm,
      x: cp,
      h: up,
      L: fp,
      M: mp,
      t: _p,
      o: Fn,
      K: gp,
      C: zr,
      A: Om,
      ea: Dm,
      $: Bm,
      R: Vm,
      ha: Pc,
      fa: Wr,
      Z: gd,
      N: Hn,
      O: oo,
      aa: yd,
      B: wp,
      X: bd,
      W: Cp,
      T: Fm,
      U: Nm,
      E: je,
      D: gs,
      F: et,
      n: At,
      a: Rc,
      e: Km,
      m: Ep,
      k: Op,
      H: ys,
      v: Bp,
      G: Re,
      z: yn,
      P: Pn,
      l: Pp,
      j: ti,
      c: Ip,
      p: Tp,
      I: Vp,
      r: Kt,
      i: Dp,
      y: Pa,
      ga: wd,
      S: Sd
    }, sa = Ne(), bi = n._free = (R) => (bi = n._free = sa.ka)(R), Cd = n._malloc = (R) => (Cd = n._malloc = sa.la)(R), Hm = (R) => (Hm = sa.na)(R), Gn = (R, N) => (Gn = sa.oa)(R, N), vl = (R) => (vl = sa.pa)(R), la = () => (la = sa.qa)(), En = (R) => (En = sa.ra)(R), zm = (R) => (zm = sa.sa)(R), Wm = (R) => (Wm = sa.ta)(R), Lc = (R, N, re) => (Lc = sa.ua)(R, N, re), Ad = (R) => (Ad = sa.va)(R);
    n.dynCall_viijii = (R, N, re, me, Me, He, $e) => (n.dynCall_viijii = sa.wa)(R, N, re, me, Me, He, $e);
    var Mi = n.dynCall_jiiii = (R, N, re, me, Me) => (Mi = n.dynCall_jiiii = sa.xa)(R, N, re, me, Me);
    n.dynCall_iiiiij = (R, N, re, me, Me, He, $e) => (n.dynCall_iiiiij = sa.ya)(R, N, re, me, Me, He, $e), n.dynCall_iiiiijj = (R, N, re, me, Me, He, $e, Qe, lt) => (n.dynCall_iiiiijj = sa.za)(R, N, re, me, Me, He, $e, Qe, lt), n.dynCall_iiiiiijj = (R, N, re, me, Me, He, $e, Qe, lt, mt) => (n.dynCall_iiiiiijj = sa.Aa)(R, N, re, me, Me, He, $e, Qe, lt, mt);
    function Rc(R, N) {
      var re = la();
      try {
        return Yn(R)(N);
      } catch (me) {
        if (En(re), me !== me + 0)
          throw me;
        Gn(1, 0);
      }
    }
    function Tp(R, N, re, me) {
      var Me = la();
      try {
        Yn(R)(N, re, me);
      } catch (He) {
        if (En(Me), He !== He + 0)
          throw He;
        Gn(1, 0);
      }
    }
    function Ip(R, N, re) {
      var me = la();
      try {
        Yn(R)(N, re);
      } catch (Me) {
        if (En(me), Me !== Me + 0)
          throw Me;
        Gn(1, 0);
      }
    }
    function Ep(R, N, re, me) {
      var Me = la();
      try {
        return Yn(R)(N, re, me);
      } catch (He) {
        if (En(Me), He !== He + 0)
          throw He;
        Gn(1, 0);
      }
    }
    function gs(R, N, re, me, Me) {
      var He = la();
      try {
        return Yn(R)(N, re, me, Me);
      } catch ($e) {
        if (En(He), $e !== $e + 0)
          throw $e;
        Gn(1, 0);
      }
    }
    function ti(R, N) {
      var re = la();
      try {
        Yn(R)(N);
      } catch (me) {
        if (En(re), me !== me + 0)
          throw me;
        Gn(1, 0);
      }
    }
    function Km(R, N, re) {
      var me = la();
      try {
        return Yn(R)(N, re);
      } catch (Me) {
        if (En(me), Me !== Me + 0)
          throw Me;
        Gn(1, 0);
      }
    }
    function Pp(R) {
      var N = la();
      try {
        Yn(R)();
      } catch (re) {
        if (En(N), re !== re + 0)
          throw re;
        Gn(1, 0);
      }
    }
    function Op(R, N, re, me, Me) {
      var He = la();
      try {
        return Yn(R)(N, re, me, Me);
      } catch ($e) {
        if (En(He), $e !== $e + 0)
          throw $e;
        Gn(1, 0);
      }
    }
    function Dp(R, N, re, me, Me, He, $e, Qe, lt, mt, Ct) {
      var qt = la();
      try {
        Yn(R)(N, re, me, Me, He, $e, Qe, lt, mt, Ct);
      } catch (zt) {
        if (En(qt), zt !== zt + 0)
          throw zt;
        Gn(1, 0);
      }
    }
    function Bp(R, N, re, me, Me, He, $e) {
      var Qe = la();
      try {
        return Yn(R)(N, re, me, Me, He, $e);
      } catch (lt) {
        if (En(Qe), lt !== lt + 0)
          throw lt;
        Gn(1, 0);
      }
    }
    function Vp(R, N, re, me, Me) {
      var He = la();
      try {
        Yn(R)(N, re, me, Me);
      } catch ($e) {
        if (En(He), $e !== $e + 0)
          throw $e;
        Gn(1, 0);
      }
    }
    function ys(R, N, re, me, Me, He) {
      var $e = la();
      try {
        return Yn(R)(N, re, me, Me, He);
      } catch (Qe) {
        if (En($e), Qe !== Qe + 0)
          throw Qe;
        Gn(1, 0);
      }
    }
    function Re(R, N, re, me, Me, He, $e, Qe) {
      var lt = la();
      try {
        return Yn(R)(N, re, me, Me, He, $e, Qe);
      } catch (mt) {
        if (En(lt), mt !== mt + 0)
          throw mt;
        Gn(1, 0);
      }
    }
    function et(R, N, re, me) {
      var Me = la();
      try {
        return Yn(R)(N, re, me);
      } catch (He) {
        if (En(Me), He !== He + 0)
          throw He;
        Gn(1, 0);
      }
    }
    function je(R, N, re, me) {
      var Me = la();
      try {
        return Yn(R)(N, re, me);
      } catch (He) {
        if (En(Me), He !== He + 0)
          throw He;
        Gn(1, 0);
      }
    }
    function At(R) {
      var N = la();
      try {
        return Yn(R)();
      } catch (re) {
        if (En(N), re !== re + 0)
          throw re;
        Gn(1, 0);
      }
    }
    function Kt(R, N, re, me, Me, He, $e, Qe) {
      var lt = la();
      try {
        Yn(R)(N, re, me, Me, He, $e, Qe);
      } catch (mt) {
        if (En(lt), mt !== mt + 0)
          throw mt;
        Gn(1, 0);
      }
    }
    function yn(R, N, re, me, Me, He, $e, Qe, lt, mt, Ct, qt) {
      var zt = la();
      try {
        return Yn(R)(N, re, me, Me, He, $e, Qe, lt, mt, Ct, qt);
      } catch (Wt) {
        if (En(zt), Wt !== Wt + 0)
          throw Wt;
        Gn(1, 0);
      }
    }
    function Pa(R, N, re, me, Me, He, $e, Qe, lt, mt, Ct, qt, zt, Wt, wn, Nn) {
      var Cn = la();
      try {
        Yn(R)(N, re, me, Me, He, $e, Qe, lt, mt, Ct, qt, zt, Wt, wn, Nn);
      } catch (ma) {
        if (En(Cn), ma !== ma + 0)
          throw ma;
        Gn(1, 0);
      }
    }
    function Pn(R, N, re, me, Me) {
      var He = la();
      try {
        return Mi(R, N, re, me, Me);
      } catch ($e) {
        if (En(He), $e !== $e + 0)
          throw $e;
        Gn(1, 0);
      }
    }
    var bs;
    Y = function R() {
      bs || jm(), bs || (Y = R);
    };
    function jm() {
      if (ue > 0 || (V(), ue > 0))
        return;
      function R() {
        bs || (bs = !0, n.calledRun = !0, !w && (B(), a(n), n.onRuntimeInitialized && n.onRuntimeInitialized(), F()));
      }
      n.setStatus ? (n.setStatus("Running..."), setTimeout(function() {
        setTimeout(function() {
          n.setStatus("");
        }, 1), R();
      }, 1)) : R();
    }
    if (n.preInit)
      for (typeof n.preInit == "function" && (n.preInit = [n.preInit]); n.preInit.length > 0; )
        n.preInit.pop()();
    return jm(), t.ready;
  };
})();
function pZ(e) {
  return p1(
    g1,
    e
  );
}
async function gZ(e, t) {
  return _Z(
    g1,
    e,
    t
  );
}
async function yZ(e, t) {
  return vZ(
    g1,
    e,
    t
  );
}
var Zd;
class bZ extends EventTarget {
  constructor(t = {}) {
    var n;
    super(), WX(this, Zd, void 0);
    try {
      const a = (n = t?.formats) == null ? void 0 : n.filter(
        (r) => r !== "unknown"
      );
      if (a?.length === 0)
        throw new TypeError("Hint option provided, but is empty.");
      a?.forEach((r) => {
        if (!c_.has(r))
          throw new TypeError(
            `Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${r}' is not a valid enum value of type BarcodeFormat.`
          );
      }), KX(this, Zd, a ?? []), pZ().then((r) => {
        this.dispatchEvent(
          new CustomEvent("load", {
            detail: r
          })
        );
      }).catch((r) => {
        this.dispatchEvent(new CustomEvent("error", { detail: r }));
      });
    } catch (a) {
      throw zA(
        a,
        "Failed to construct 'BarcodeDetector'"
      );
    }
  }
  static async getSupportedFormats() {
    return jX.filter((t) => t !== "unknown");
  }
  async detect(t) {
    try {
      const n = await eZ(t);
      if (n === null)
        return [];
      let a;
      try {
        MD(n) ? a = await gZ(n, {
          tryHarder: !0,
          formats: HA(this, Zd).map((r) => c_.get(r))
        }) : a = await yZ(n, {
          tryHarder: !0,
          formats: HA(this, Zd).map((r) => c_.get(r))
        });
      } catch (r) {
        throw console.error(r), new DOMException(
          "Barcode detection service unavailable.",
          "NotSupportedError"
        );
      }
      return a.map((r) => {
        const {
          topLeft: { x: i, y: o },
          topRight: { x: l, y: s },
          bottomLeft: { x: d, y: u },
          bottomRight: { x: f, y: h }
        } = r.position, y = Math.min(i, l, d, f), p = Math.min(o, s, u, h), w = Math.max(i, l, d, f), b = Math.max(o, s, u, h);
        return {
          boundingBox: new DOMRectReadOnly(
            y,
            p,
            w - y,
            b - p
          ),
          rawValue: r.text,
          format: YX(r.format),
          cornerPoints: [
            {
              x: i,
              y: o
            },
            {
              x: l,
              y: s
            },
            {
              x: f,
              y: h
            },
            {
              x: d,
              y: u
            }
          ]
        };
      });
    } catch (n) {
      throw zA(
        n,
        "Failed to execute 'detect' on 'BarcodeDetector'"
      );
    }
  }
}
Zd = /* @__PURE__ */ new WeakMap();
const ND = (e, t, n = "error") => {
  let a, r;
  const i = new Promise(
    (o, l) => {
      a = o, r = l, e.addEventListener(t, a), e.addEventListener(n, r);
    }
  );
  return i.finally(() => {
    e.removeEventListener(t, a), e.removeEventListener(n, r);
  }), i;
}, YA = (e) => new Promise((t) => setTimeout(t, e));
class UD extends Error {
  constructor() {
    super("this browser has no Stream API support"), this.name = "StreamApiNotSupportedError";
  }
}
class wZ extends Error {
  constructor() {
    super(
      "camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."
    ), this.name = "InsecureContextError";
  }
}
class kZ extends Error {
  constructor() {
    super(
      "Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"
    ), this.name = "StreamLoadTimeoutError";
  }
}
let $D;
function qD(e) {
  $D = new bZ({ formats: e });
}
const SZ = async (e, {
  detectHandler: t,
  locateHandler: n,
  minDelay: a,
  formats: r
}) => {
  console.debug("[vue-qrcode-reader] start scanning"), qD(r);
  const i = (o) => async (l) => {
    if (e.readyState === 0)
      console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");
    else {
      const { lastScanned: s, contentBefore: d, lastScanHadContent: u } = o;
      if (l - s < a)
        window.requestAnimationFrame(i(o));
      else {
        const f = await $D.detect(e), h = f.some((w) => !d.includes(w.rawValue));
        h && t(f);
        const y = f.length > 0;
        y && n(f), !y && u && n(f);
        const p = {
          lastScanned: l,
          lastScanHadContent: y,
          // It can happen that a QR code is constantly in view of the camera but
          // maybe a scanned frame is a bit blurry and we detect nothing but in the
          // next frame we detect the code again. We also want to avoid emitting
          // a `detect` event in such a case. So we don't reset `contentBefore`,
          // if we detect nothing, only if we detect something new.
          contentBefore: h ? f.map((w) => w.rawValue) : d
        };
        window.requestAnimationFrame(i(p));
      }
    }
  };
  i({
    lastScanned: performance.now(),
    contentBefore: [],
    lastScanHadContent: !1
  })(performance.now());
};
var HD = {}, Zr = {};
Object.defineProperty(Zr, "__esModule", {
  value: !0
});
Zr.compactObject = KD;
Zr.deprecated = DZ;
var CZ = Zr.detectBrowser = BZ;
Zr.disableLog = EZ;
Zr.disableWarnings = PZ;
Zr.extractVersion = u_;
Zr.filterStats = VZ;
Zr.log = OZ;
Zr.walkStats = X_;
Zr.wrapPeerConnectionEvent = IZ;
function AZ(e, t, n) {
  return t = xZ(t), t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e;
}
function xZ(e) {
  var t = TZ(e, "string");
  return Zs(t) === "symbol" ? t : String(t);
}
function TZ(e, t) {
  if (Zs(e) !== "object" || e === null)
    return e;
  var n = e[Symbol.toPrimitive];
  if (n !== void 0) {
    var a = n.call(e, t);
    if (Zs(a) !== "object")
      return a;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (t === "string" ? String : Number)(e);
}
function Zs(e) {
  "@babel/helpers - typeof";
  return Zs = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Zs(e);
}
var zD = !0, WD = !0;
function u_(e, t, n) {
  var a = e.match(t);
  return a && a.length >= n && parseInt(a[n], 10);
}
function IZ(e, t, n) {
  if (e.RTCPeerConnection) {
    var a = e.RTCPeerConnection.prototype, r = a.addEventListener;
    a.addEventListener = function(o, l) {
      if (o !== t)
        return r.apply(this, arguments);
      var s = function(d) {
        var u = n(d);
        u && (l.handleEvent ? l.handleEvent(u) : l(u));
      };
      return this._eventMap = this._eventMap || {}, this._eventMap[t] || (this._eventMap[t] = /* @__PURE__ */ new Map()), this._eventMap[t].set(l, s), r.apply(this, [o, s]);
    };
    var i = a.removeEventListener;
    a.removeEventListener = function(o, l) {
      if (o !== t || !this._eventMap || !this._eventMap[t])
        return i.apply(this, arguments);
      if (!this._eventMap[t].has(l))
        return i.apply(this, arguments);
      var s = this._eventMap[t].get(l);
      return this._eventMap[t].delete(l), this._eventMap[t].size === 0 && delete this._eventMap[t], Object.keys(this._eventMap).length === 0 && delete this._eventMap, i.apply(this, [o, s]);
    }, Object.defineProperty(a, "on" + t, {
      get: function() {
        return this["_on" + t];
      },
      set: function(o) {
        this["_on" + t] && (this.removeEventListener(t, this["_on" + t]), delete this["_on" + t]), o && this.addEventListener(t, this["_on" + t] = o);
      },
      enumerable: !0,
      configurable: !0
    });
  }
}
function EZ(e) {
  return typeof e != "boolean" ? new Error("Argument type: " + Zs(e) + ". Please use a boolean.") : (zD = e, e ? "adapter.js logging disabled" : "adapter.js logging enabled");
}
function PZ(e) {
  return typeof e != "boolean" ? new Error("Argument type: " + Zs(e) + ". Please use a boolean.") : (WD = !e, "adapter.js deprecation warnings " + (e ? "disabled" : "enabled"));
}
function OZ() {
  if ((typeof window > "u" ? "undefined" : Zs(window)) === "object") {
    if (zD)
      return;
    typeof console < "u" && typeof console.log == "function" && console.log.apply(console, arguments);
  }
}
function DZ(e, t) {
  WD && console.warn(e + " is deprecated, please use " + t + " instead.");
}
function BZ(e) {
  var t = {
    browser: null,
    version: null
  };
  if (typeof e > "u" || !e.navigator || !e.navigator.userAgent)
    return t.browser = "Not a browser.", t;
  var n = e.navigator;
  if (n.mozGetUserMedia)
    t.browser = "firefox", t.version = u_(n.userAgent, /Firefox\/(\d+)\./, 1);
  else if (n.webkitGetUserMedia || e.isSecureContext === !1 && e.webkitRTCPeerConnection)
    t.browser = "chrome", t.version = u_(n.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
  else if (e.RTCPeerConnection && n.userAgent.match(/AppleWebKit\/(\d+)\./))
    t.browser = "safari", t.version = u_(n.userAgent, /AppleWebKit\/(\d+)\./, 1), t.supportsUnifiedPlan = e.RTCRtpTransceiver && "currentDirection" in e.RTCRtpTransceiver.prototype;
  else
    return t.browser = "Not a supported browser.", t;
  return t;
}
function GA(e) {
  return Object.prototype.toString.call(e) === "[object Object]";
}
function KD(e) {
  return GA(e) ? Object.keys(e).reduce(function(t, n) {
    var a = GA(e[n]), r = a ? KD(e[n]) : e[n], i = a && !Object.keys(r).length;
    return r === void 0 || i ? t : Object.assign(t, AZ({}, n, r));
  }, {}) : e;
}
function X_(e, t, n) {
  !t || n.has(t.id) || (n.set(t.id, t), Object.keys(t).forEach(function(a) {
    a.endsWith("Id") ? X_(e, e.get(t[a]), n) : a.endsWith("Ids") && t[a].forEach(function(r) {
      X_(e, e.get(r), n);
    });
  }));
}
function VZ(e, t, n) {
  var a = n ? "outbound-rtp" : "inbound-rtp", r = /* @__PURE__ */ new Map();
  if (t === null)
    return r;
  var i = [];
  return e.forEach(function(o) {
    o.type === "track" && o.trackIdentifier === t.id && i.push(o);
  }), i.forEach(function(o) {
    e.forEach(function(l) {
      l.type === a && l.trackId === o.id && X_(e, l, r);
    });
  }), r;
}
Object.defineProperty(HD, "__esModule", {
  value: !0
});
var MZ = HD.shimGetUserMedia = FZ, LZ = RZ(Zr);
function jD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (jD = function(a) {
    return a ? n : t;
  })(e);
}
function RZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || Ms(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = jD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function Ms(e) {
  "@babel/helpers - typeof";
  return Ms = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, Ms(e);
}
var QA = LZ.log;
function FZ(e, t) {
  var n = e && e.navigator;
  if (n.mediaDevices) {
    var a = function(s) {
      if (Ms(s) !== "object" || s.mandatory || s.optional)
        return s;
      var d = {};
      return Object.keys(s).forEach(function(u) {
        if (!(u === "require" || u === "advanced" || u === "mediaSource")) {
          var f = Ms(s[u]) === "object" ? s[u] : {
            ideal: s[u]
          };
          f.exact !== void 0 && typeof f.exact == "number" && (f.min = f.max = f.exact);
          var h = function(p, w) {
            return p ? p + w.charAt(0).toUpperCase() + w.slice(1) : w === "deviceId" ? "sourceId" : w;
          };
          if (f.ideal !== void 0) {
            d.optional = d.optional || [];
            var y = {};
            typeof f.ideal == "number" ? (y[h("min", u)] = f.ideal, d.optional.push(y), y = {}, y[h("max", u)] = f.ideal, d.optional.push(y)) : (y[h("", u)] = f.ideal, d.optional.push(y));
          }
          f.exact !== void 0 && typeof f.exact != "number" ? (d.mandatory = d.mandatory || {}, d.mandatory[h("", u)] = f.exact) : ["min", "max"].forEach(function(p) {
            f[p] !== void 0 && (d.mandatory = d.mandatory || {}, d.mandatory[h(p, u)] = f[p]);
          });
        }
      }), s.advanced && (d.optional = (d.optional || []).concat(s.advanced)), d;
    }, r = function(s, d) {
      if (t.version >= 61)
        return d(s);
      if (s = JSON.parse(JSON.stringify(s)), s && Ms(s.audio) === "object") {
        var u = function(p, w, b) {
          w in p && !(b in p) && (p[b] = p[w], delete p[w]);
        };
        s = JSON.parse(JSON.stringify(s)), u(s.audio, "autoGainControl", "googAutoGainControl"), u(s.audio, "noiseSuppression", "googNoiseSuppression"), s.audio = a(s.audio);
      }
      if (s && Ms(s.video) === "object") {
        var f = s.video.facingMode;
        f = f && (Ms(f) === "object" ? f : {
          ideal: f
        });
        var h = t.version < 66;
        if (f && (f.exact === "user" || f.exact === "environment" || f.ideal === "user" || f.ideal === "environment") && !(n.mediaDevices.getSupportedConstraints && n.mediaDevices.getSupportedConstraints().facingMode && !h)) {
          delete s.video.facingMode;
          var y;
          if (f.exact === "environment" || f.ideal === "environment" ? y = ["back", "rear"] : (f.exact === "user" || f.ideal === "user") && (y = ["front"]), y)
            return n.mediaDevices.enumerateDevices().then(function(p) {
              p = p.filter(function(b) {
                return b.kind === "videoinput";
              });
              var w = p.find(function(b) {
                return y.some(function(v) {
                  return b.label.toLowerCase().includes(v);
                });
              });
              return !w && p.length && y.includes("back") && (w = p[p.length - 1]), w && (s.video.deviceId = f.exact ? {
                exact: w.deviceId
              } : {
                ideal: w.deviceId
              }), s.video = a(s.video), QA("chrome: " + JSON.stringify(s)), d(s);
            });
        }
        s.video = a(s.video);
      }
      return QA("chrome: " + JSON.stringify(s)), d(s);
    }, i = function(s) {
      return t.version >= 64 ? s : {
        name: {
          PermissionDeniedError: "NotAllowedError",
          PermissionDismissedError: "NotAllowedError",
          InvalidStateError: "NotAllowedError",
          DevicesNotFoundError: "NotFoundError",
          ConstraintNotSatisfiedError: "OverconstrainedError",
          TrackStartError: "NotReadableError",
          MediaDeviceFailedDueToShutdown: "NotAllowedError",
          MediaDeviceKillSwitchOn: "NotAllowedError",
          TabCaptureError: "AbortError",
          ScreenCaptureError: "AbortError",
          DeviceCaptureError: "AbortError"
        }[s.name] || s.name,
        message: s.message,
        constraint: s.constraint || s.constraintName,
        toString: function() {
          return this.name + (this.message && ": ") + this.message;
        }
      };
    }, o = function(s, d, u) {
      r(s, function(f) {
        n.webkitGetUserMedia(f, d, function(h) {
          u && u(i(h));
        });
      });
    };
    if (n.getUserMedia = o.bind(n), n.mediaDevices.getUserMedia) {
      var l = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
      n.mediaDevices.getUserMedia = function(s) {
        return r(s, function(d) {
          return l(d).then(function(u) {
            if (d.audio && !u.getAudioTracks().length || d.video && !u.getVideoTracks().length)
              throw u.getTracks().forEach(function(f) {
                f.stop();
              }), new DOMException("", "NotFoundError");
            return u;
          }, function(u) {
            return Promise.reject(i(u));
          });
        });
      };
    }
  }
}
var YD = {};
Object.defineProperty(YD, "__esModule", {
  value: !0
});
var NZ = YD.shimGetUserMedia = qZ, UZ = $Z(Zr);
function GD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (GD = function(a) {
    return a ? n : t;
  })(e);
}
function $Z(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || gu(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = GD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function gu(e) {
  "@babel/helpers - typeof";
  return gu = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, gu(e);
}
function qZ(e, t) {
  var n = e && e.navigator, a = e && e.MediaStreamTrack;
  if (n.getUserMedia = function(s, d, u) {
    UZ.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), n.mediaDevices.getUserMedia(s).then(d, u);
  }, !(t.version > 55 && "autoGainControl" in n.mediaDevices.getSupportedConstraints())) {
    var r = function(s, d, u) {
      d in s && !(u in s) && (s[u] = s[d], delete s[d]);
    }, i = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
    if (n.mediaDevices.getUserMedia = function(s) {
      return gu(s) === "object" && gu(s.audio) === "object" && (s = JSON.parse(JSON.stringify(s)), r(s.audio, "autoGainControl", "mozAutoGainControl"), r(s.audio, "noiseSuppression", "mozNoiseSuppression")), i(s);
    }, a && a.prototype.getSettings) {
      var o = a.prototype.getSettings;
      a.prototype.getSettings = function() {
        var s = o.apply(this, arguments);
        return r(s, "mozAutoGainControl", "autoGainControl"), r(s, "mozNoiseSuppression", "noiseSuppression"), s;
      };
    }
    if (a && a.prototype.applyConstraints) {
      var l = a.prototype.applyConstraints;
      a.prototype.applyConstraints = function(s) {
        return this.kind === "audio" && gu(s) === "object" && (s = JSON.parse(JSON.stringify(s)), r(s, "autoGainControl", "mozAutoGainControl"), r(s, "noiseSuppression", "mozNoiseSuppression")), l.apply(this, [s]);
      };
    }
  }
}
var Do = {};
Object.defineProperty(Do, "__esModule", {
  value: !0
});
Do.shimAudioContext = XZ;
Do.shimCallbacksAPI = jZ;
Do.shimConstraints = XD;
Do.shimCreateOfferLegacy = JZ;
var HZ = Do.shimGetUserMedia = YZ;
Do.shimLocalStreamsAPI = WZ;
Do.shimRTCIceServerUrls = GZ;
Do.shimRemoteStreamsAPI = KZ;
Do.shimTrackEventTransceiver = QZ;
var QD = zZ(Zr);
function JD(e) {
  if (typeof WeakMap != "function")
    return null;
  var t = /* @__PURE__ */ new WeakMap(), n = /* @__PURE__ */ new WeakMap();
  return (JD = function(a) {
    return a ? n : t;
  })(e);
}
function zZ(e, t) {
  if (e && e.__esModule)
    return e;
  if (e === null || el(e) !== "object" && typeof e != "function")
    return { default: e };
  var n = JD(t);
  if (n && n.has(e))
    return n.get(e);
  var a = {}, r = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var i in e)
    if (i !== "default" && Object.prototype.hasOwnProperty.call(e, i)) {
      var o = r ? Object.getOwnPropertyDescriptor(e, i) : null;
      o && (o.get || o.set) ? Object.defineProperty(a, i, o) : a[i] = e[i];
    }
  return a.default = e, n && n.set(e, a), a;
}
function el(e) {
  "@babel/helpers - typeof";
  return el = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, el(e);
}
function WZ(e) {
  if (!(el(e) !== "object" || !e.RTCPeerConnection)) {
    if ("getLocalStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function() {
      return this._localStreams || (this._localStreams = []), this._localStreams;
    }), !("addStream" in e.RTCPeerConnection.prototype)) {
      var t = e.RTCPeerConnection.prototype.addTrack;
      e.RTCPeerConnection.prototype.addStream = function(n) {
        var a = this;
        this._localStreams || (this._localStreams = []), this._localStreams.includes(n) || this._localStreams.push(n), n.getAudioTracks().forEach(function(r) {
          return t.call(a, r, n);
        }), n.getVideoTracks().forEach(function(r) {
          return t.call(a, r, n);
        });
      }, e.RTCPeerConnection.prototype.addTrack = function(n) {
        for (var a = this, r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)
          i[o - 1] = arguments[o];
        return i && i.forEach(function(l) {
          a._localStreams ? a._localStreams.includes(l) || a._localStreams.push(l) : a._localStreams = [l];
        }), t.apply(this, arguments);
      };
    }
    "removeStream" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function(n) {
      var a = this;
      this._localStreams || (this._localStreams = []);
      var r = this._localStreams.indexOf(n);
      if (r !== -1) {
        this._localStreams.splice(r, 1);
        var i = n.getTracks();
        this.getSenders().forEach(function(o) {
          i.includes(o.track) && a.removeTrack(o);
        });
      }
    });
  }
}
function KZ(e) {
  if (!(el(e) !== "object" || !e.RTCPeerConnection) && ("getRemoteStreams" in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function() {
    return this._remoteStreams ? this._remoteStreams : [];
  }), !("onaddstream" in e.RTCPeerConnection.prototype))) {
    Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
      get: function() {
        return this._onaddstream;
      },
      set: function(n) {
        var a = this;
        this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = n), this.addEventListener("track", this._onaddstreampoly = function(r) {
          r.streams.forEach(function(i) {
            if (a._remoteStreams || (a._remoteStreams = []), !a._remoteStreams.includes(i)) {
              a._remoteStreams.push(i);
              var o = new Event("addstream");
              o.stream = i, a.dispatchEvent(o);
            }
          });
        });
      }
    });
    var t = e.RTCPeerConnection.prototype.setRemoteDescription;
    e.RTCPeerConnection.prototype.setRemoteDescription = function() {
      var n = this;
      return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(a) {
        a.streams.forEach(function(r) {
          if (n._remoteStreams || (n._remoteStreams = []), !(n._remoteStreams.indexOf(r) >= 0)) {
            n._remoteStreams.push(r);
            var i = new Event("addstream");
            i.stream = r, n.dispatchEvent(i);
          }
        });
      }), t.apply(n, arguments);
    };
  }
}
function jZ(e) {
  if (!(el(e) !== "object" || !e.RTCPeerConnection)) {
    var t = e.RTCPeerConnection.prototype, n = t.createOffer, a = t.createAnswer, r = t.setLocalDescription, i = t.setRemoteDescription, o = t.addIceCandidate;
    t.createOffer = function(s, d) {
      var u = arguments.length >= 2 ? arguments[2] : arguments[0], f = n.apply(this, [u]);
      return d ? (f.then(s, d), Promise.resolve()) : f;
    }, t.createAnswer = function(s, d) {
      var u = arguments.length >= 2 ? arguments[2] : arguments[0], f = a.apply(this, [u]);
      return d ? (f.then(s, d), Promise.resolve()) : f;
    };
    var l = function(s, d, u) {
      var f = r.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    };
    t.setLocalDescription = l, l = function(s, d, u) {
      var f = i.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    }, t.setRemoteDescription = l, l = function(s, d, u) {
      var f = o.apply(this, [s]);
      return u ? (f.then(d, u), Promise.resolve()) : f;
    }, t.addIceCandidate = l;
  }
}
function YZ(e) {
  var t = e && e.navigator;
  if (t.mediaDevices && t.mediaDevices.getUserMedia) {
    var n = t.mediaDevices, a = n.getUserMedia.bind(n);
    t.mediaDevices.getUserMedia = function(r) {
      return a(XD(r));
    };
  }
  !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = (function(r, i, o) {
    t.mediaDevices.getUserMedia(r).then(i, o);
  }).bind(t));
}
function XD(e) {
  return e && e.video !== void 0 ? Object.assign({}, e, {
    video: QD.compactObject(e.video)
  }) : e;
}
function GZ(e) {
  if (e.RTCPeerConnection) {
    var t = e.RTCPeerConnection;
    e.RTCPeerConnection = function(n, a) {
      if (n && n.iceServers) {
        for (var r = [], i = 0; i < n.iceServers.length; i++) {
          var o = n.iceServers[i];
          o.urls === void 0 && o.url ? (QD.deprecated("RTCIceServer.url", "RTCIceServer.urls"), o = JSON.parse(JSON.stringify(o)), o.urls = o.url, delete o.url, r.push(o)) : r.push(n.iceServers[i]);
        }
        n.iceServers = r;
      }
      return new t(n, a);
    }, e.RTCPeerConnection.prototype = t.prototype, "generateCertificate" in t && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
      get: function() {
        return t.generateCertificate;
      }
    });
  }
}
function QZ(e) {
  el(e) === "object" && e.RTCTrackEvent && "receiver" in e.RTCTrackEvent.prototype && !("transceiver" in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
    get: function() {
      return {
        receiver: this.receiver
      };
    }
  });
}
function JZ(e) {
  var t = e.RTCPeerConnection.prototype.createOffer;
  e.RTCPeerConnection.prototype.createOffer = function(n) {
    if (n) {
      typeof n.offerToReceiveAudio < "u" && (n.offerToReceiveAudio = !!n.offerToReceiveAudio);
      var a = this.getTransceivers().find(function(i) {
        return i.receiver.track.kind === "audio";
      });
      n.offerToReceiveAudio === !1 && a ? a.direction === "sendrecv" ? a.setDirection ? a.setDirection("sendonly") : a.direction = "sendonly" : a.direction === "recvonly" && (a.setDirection ? a.setDirection("inactive") : a.direction = "inactive") : n.offerToReceiveAudio === !0 && !a && this.addTransceiver("audio", {
        direction: "recvonly"
      }), typeof n.offerToReceiveVideo < "u" && (n.offerToReceiveVideo = !!n.offerToReceiveVideo);
      var r = this.getTransceivers().find(function(i) {
        return i.receiver.track.kind === "video";
      });
      n.offerToReceiveVideo === !1 && r ? r.direction === "sendrecv" ? r.setDirection ? r.setDirection("sendonly") : r.direction = "sendonly" : r.direction === "recvonly" && (r.setDirection ? r.setDirection("inactive") : r.direction = "inactive") : n.offerToReceiveVideo === !0 && !r && this.addTransceiver("video", {
        direction: "recvonly"
      });
    }
    return t.apply(this, arguments);
  };
}
function XZ(e) {
  el(e) !== "object" || e.AudioContext || (e.AudioContext = e.webkitAudioContext);
}
const ZZ = (e) => {
  let t = !1, n;
  return (...a) => (t || (n = e(a), t = !0), n);
};
function fo(e, t) {
  if (e === !1)
    throw new Error(t ?? "assertion failure");
}
function JA(e) {
  throw new Error("this code should be unreachable");
}
const eee = ZZ(() => {
  const e = CZ(window);
  switch (e.browser) {
    case "chrome":
      MZ(window, e);
      break;
    case "firefox":
      NZ(window, e);
      break;
    case "safari":
      HZ(window, e);
      break;
    default:
      throw new UD();
  }
});
let yu = Promise.resolve({ type: "stop", data: {} });
async function XA(e, t, n) {
  var a, r, i;
  if (console.debug(
    "[vue-qrcode-reader] starting camera with constraints: ",
    JSON.stringify(t)
  ), window.isSecureContext !== !0)
    throw new wZ();
  if (((a = navigator?.mediaDevices) == null ? void 0 : a.getUserMedia) === void 0)
    throw new UD();
  eee(), console.debug("[vue-qrcode-reader] calling getUserMedia");
  const o = await navigator.mediaDevices.getUserMedia({
    audio: !1,
    video: t
  });
  e.srcObject !== void 0 ? e.srcObject = o : e.mozSrcObject !== void 0 ? e.mozSrcObject = o : window.URL.createObjectURL ? e.src = window.URL.createObjectURL(o) : window.webkitURL ? e.src = window.webkitURL.createObjectURL(o) : e.src = o.id, e.play(), console.debug("[vue-qrcode-reader] waiting for video element to load"), await Promise.race([
    ND(e, "loadeddata"),
    // On iOS devices in PWA mode, QrcodeStream works initially, but after
    // killing and restarting the PWA, all video elements fail to load camera
    // streams and never emit the `loadeddata` event. Looks like this is
    // related to a WebKit issue (see #298). No workarounds at the moment.
    // To at least detect this situation, we throw an error if the event
    // has not been emitted after a 6 second timeout.
    YA(6e3).then(() => {
      throw new kZ();
    })
  ]), console.debug("[vue-qrcode-reader] video element loaded"), await YA(500);
  const [l] = o.getVideoTracks(), s = (i = (r = l?.getCapabilities) == null ? void 0 : r.call(l)) != null ? i : {};
  let d = !1;
  return n && s.torch && (await l.applyConstraints({ advanced: [{ torch: !0 }] }), d = !0), console.debug("[vue-qrcode-reader] camera ready"), {
    type: "start",
    data: {
      videoEl: e,
      stream: o,
      capabilities: s,
      constraints: t,
      isTorchOn: d
    }
  };
}
async function tee(e, {
  constraints: t,
  torch: n,
  restart: a = !1
}) {
  yu = yu.then((i) => {
    if (i.type === "start") {
      const {
        data: {
          videoEl: o,
          stream: l,
          constraints: s,
          isTorchOn: d
        }
      } = i;
      return !a && e === o && t === s && n === d ? i : ZD(o, l, d).then(
        () => XA(e, t, n)
      );
    } else if (i.type === "stop" || i.type === "failed")
      return XA(e, t, n);
    JA();
  }).catch((i) => (console.debug(`[vue-qrcode-reader] starting camera failed with "${i}"`), { type: "failed", error: i }));
  const r = await yu;
  if (r.type === "stop")
    throw new Error("Something went wrong with the camera task queue (start task).");
  if (r.type === "failed")
    throw r.error;
  if (r.type === "start")
    return r.data.capabilities;
  JA();
}
async function ZD(e, t, n) {
  console.debug("[vue-qrcode-reader] stopping camera"), e.src = "", e.srcObject = null, e.load(), await ND(e, "error");
  for (const a of t.getTracks())
    n != null || await a.applyConstraints({ advanced: [{ torch: !1 }] }), t.removeTrack(a), a.stop();
  return {
    type: "stop",
    data: {}
  };
}
async function Wh() {
  if (yu = yu.then((e) => {
    if (e.type === "stop" || e.type === "failed")
      return e;
    const {
      data: { videoEl: t, stream: n, isTorchOn: a }
    } = e;
    return ZD(t, n, a);
  }), (await yu).type === "start")
    throw new Error("Something went wrong with the camera task queue (stop task).");
}
const nee = /* @__PURE__ */ za({
  __name: "QrcodeStream",
  props: {
    constraints: { default: () => ({ facingMode: "environment" }) },
    formats: { default: () => ["qr_code"] },
    paused: { type: Boolean, default: !1 },
    torch: { type: Boolean, default: !1 },
    track: { type: Function, default: void 0 }
  },
  emits: ["detect", "camera-on", "camera-off", "error"],
  setup(e, { emit: t }) {
    const n = e, a = t, r = be(n.constraints), i = be(n.formats);
    tt(
      () => n.constraints,
      (k, A) => {
        JSON.stringify(k) !== JSON.stringify(A) && (r.value = k);
      },
      { deep: !0 }
    ), tt(
      () => n.formats,
      (k, A) => {
        JSON.stringify(k) !== JSON.stringify(A) && (i.value = k);
      },
      { deep: !0 }
    );
    const o = be(), l = be(), s = be(), d = be(!1), u = be(!1);
    an(() => {
      u.value = !0;
    }), _i(() => {
      Wh();
    });
    const f = W(() => ({
      torch: n.torch,
      constraints: r.value,
      shouldStream: u.value && !n.paused
    }));
    tt(
      f,
      async (k) => {
        const A = s.value;
        fo(
          A !== void 0,
          "cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined."
        );
        const C = o.value;
        fo(
          C !== void 0,
          "cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined."
        );
        const D = C.getContext("2d");
        if (fo(D !== null, "if cavnas is defined, canvas 2d context should also be non-null"), k.shouldStream) {
          Wh(), d.value = !1;
          try {
            const P = await tee(A, k);
            u.value ? (d.value = !0, a("camera-on", P)) : await Wh();
          } catch (P) {
            a("error", P);
          }
        } else
          C.width = A.videoWidth, C.height = A.videoHeight, D.drawImage(A, 0, 0, A.videoWidth, A.videoHeight), Wh(), d.value = !1, a("camera-off");
      },
      { deep: !0 }
    ), tt(i, (k) => {
      u.value && qD(k);
    });
    const h = W(() => f.value.shouldStream && d.value);
    tt(h, (k) => {
      if (k) {
        fo(
          o.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"
        ), y(o.value), fo(
          l.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"
        ), y(l.value);
        const A = () => n.track === void 0 ? 500 : 40;
        fo(
          s.value !== void 0,
          "shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"
        ), SZ(s.value, {
          detectHandler: (C) => a("detect", C),
          formats: i.value,
          locateHandler: p,
          minDelay: A()
        });
      }
    });
    const y = (k) => {
      const A = k.getContext("2d");
      fo(A !== null, "canvas 2d context should always be non-null"), A.clearRect(0, 0, k.width, k.height);
    }, p = (k) => {
      const A = l.value;
      fo(
        A !== void 0,
        "onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined."
      );
      const C = s.value;
      if (fo(
        C !== void 0,
        "onLocate handler should only be called when component is mounted. Thus video element is always defined."
      ), k.length === 0 || n.track === void 0)
        y(A);
      else {
        const D = C.offsetWidth, P = C.offsetHeight, O = C.videoWidth, I = C.videoHeight, x = Math.max(D / O, P / I), M = O * x, V = I * x, B = M / O, F = V / I, H = (D - M) / 2, K = (P - V) / 2, Z = ({ x: q, y: oe }) => ({
          x: Math.floor(q * B),
          y: Math.floor(oe * F)
        }), ue = ({ x: q, y: oe }) => ({
          x: Math.floor(q + H),
          y: Math.floor(oe + K)
        }), Y = k.map((q) => {
          const { boundingBox: oe, cornerPoints: ee } = q, { x: he, y: ve } = ue(
            Z({
              x: oe.x,
              y: oe.y
            })
          ), { x: pe, y: z } = Z({
            x: oe.width,
            y: oe.height
          });
          return {
            ...q,
            cornerPoints: ee.map((ge) => ue(Z(ge))),
            boundingBox: DOMRectReadOnly.fromRect({ x: he, y: ve, width: pe, height: z })
          };
        });
        A.width = C.offsetWidth, A.height = C.offsetHeight;
        const U = A.getContext("2d");
        fo(U !== null, "canvas 2d context should always be non-null"), n.track(Y, U);
      }
    }, w = {
      width: "100%",
      height: "100%",
      position: "relative",
      // notice that we use z-index only once for the wrapper div.
      // If z-index is not defined, elements are stacked in the order they appear in the DOM.
      // The first element is at the very bottom and subsequent elements are added on top.
      "z-index": "0"
    }, b = {
      width: "100%",
      height: "100%",
      position: "absolute",
      top: "0",
      left: "0"
    }, v = {
      width: "100%",
      height: "100%",
      "object-fit": "cover"
    }, g = W(() => h.value ? v : {
      ...v,
      visibility: "hidden",
      position: "absolute"
    });
    return (k, A) => (te(), Oe("div", { style: w }, [
      T("video", {
        ref_key: "videoRef",
        ref: s,
        style: Je(g.value),
        autoplay: "",
        muted: "",
        playsinline: ""
      }, null, 4),
      sn(T("canvas", {
        id: "qrcode-stream-pause-frame",
        ref_key: "pauseFrameRef",
        ref: o,
        style: v
      }, null, 512), [
        [_a, !h.value]
      ]),
      T("canvas", {
        id: "qrcode-stream-tracking-layer",
        ref_key: "trackingLayerRef",
        ref: l,
        style: b
      }, null, 512),
      T("div", { style: b }, [
        bt(k.$slots, "default")
      ])
    ]));
  }
}), aee = {
  name: "CameraScanner",
  components: {
    QrcodeStream: nee
  },
  props: {
    scanType: {
      type: String,
      default: "Both"
      // 'QR Code', 'Barcode', 'Both'. Note: vue-qrcode-reader uses a 'formats' prop.
    }
  },
  data() {
    return {
      scannerDialog: !1,
      scanResult: "",
      scanFormat: "",
      // We might get this from the 'detect' event payload
      errorMessage: "",
      cameraPermissionDenied: !1,
      isScanning: !1,
      torchActive: !1,
      selectedDeviceId: null,
      // For camera switching
      cameras: []
      // To store available cameras
      // Old properties to be removed or re-evaluated:
      // qrScanner: null,
      // flashlightSupported: false, // vue-qrcode-reader handles this via QrcodeStream's torch prop
      // flashlightOn: false, // replaced by torchActive
      // multipleCameras: false, // Handled by checking cameras.length
      // currentCameraId: null, // replaced by selectedDeviceId
      // availableCameras: [], // replaced by cameras
      // barcodeDetectionInterval: null,
      // isDecodingBarcode: false,
      // videoStream: null
    };
  },
  computed: {
    readerFormats() {
      const e = [
        "qr_code",
        "ean_13",
        "ean_8",
        "code_128",
        "code_39",
        "code_93",
        "codabar",
        "upc_a",
        "upc_e",
        "itf"
        // ITF (Interleaved 2 of 5)
        // Add other formats if needed and supported by zxing-wasm
      ];
      return this.scanType === "QR Code" ? ["qr_code"] : this.scanType === "Barcode" ? e.filter((t) => t !== "qr_code") : e;
    }
  },
  methods: {
    async startScanning() {
      this.scannerDialog = !0, this.errorMessage = "", this.scanResult = "", this.scanFormat = "", this.cameraPermissionDenied = !1, this.isScanning = !0, await this.$nextTick(), await this.listCameras();
    },
    async listCameras() {
      try {
        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
          console.warn("MediaDevices API not supported."), this.cameras = [];
          return;
        }
        const e = await navigator.mediaDevices.enumerateDevices();
        if (this.cameras = e.filter((t) => t.kind === "videoinput"), this.cameras.length > 0 && !this.selectedDeviceId) {
          const t = this.cameras.find(
            (n) => /back|rear|environment/i.test(n.label)
          );
          this.selectedDeviceId = t ? t.deviceId : this.cameras[0].deviceId;
        }
      } catch (e) {
        console.error("Error listing cameras:", e), this.cameras = [];
      }
    },
    onDetect(e) {
      if (e && e.length > 0) {
        const t = e[0];
        this.scanResult = t.rawValue, this.scanFormat = t.format, this.errorMessage = "", this.$emit("barcode-scanned", this.scanResult), typeof frappe < "u" && frappe.show_alert && frappe.show_alert(
          {
            message: this.__("Code scanned successfully") + ` (${this.scanFormat})`,
            indicator: "green"
          },
          3
        ), this.isScanning = !1, setTimeout(() => {
          this.scanResult = "", this.scanFormat = "", this.isScanning = !0;
        }, 1e3);
      }
    },
    onError(e) {
      this.errorMessage = e.name || "Unknown error", e.name === "NotAllowedError" ? (this.cameraPermissionDenied = !0, this.errorMessage = this.__(
        "Camera permission denied. Please allow camera access in your browser settings."
      )) : e.name === "NotFoundError" || e.name === "DevicesNotFoundError" ? this.errorMessage = this.__("No camera found on this device.") : e.name === "NotSupportedError" ? this.errorMessage = this.__("Secure context (HTTPS) required for camera access.") : e.name === "AbortError" ? this.errorMessage = this.__("Camera access aborted.") : this.errorMessage = this.__("Error accessing camera:") + ` ${e.message}`, console.error("Camera error:", e), this.isScanning = !1;
    },
    stopScanning() {
      this.isScanning = !1, this.scannerDialog = !1, this.scanResult = "", this.scanFormat = "", this.errorMessage = "", this.torchActive = !1, this.$emit("scanner-closed");
    },
    async toggleTorch() {
      this.torchActive = !this.torchActive;
    },
    async switchCamera() {
      if (this.cameras.length > 1) {
        const t = (this.cameras.findIndex((n) => n.deviceId === this.selectedDeviceId) + 1) % this.cameras.length;
        this.selectedDeviceId = this.cameras[t].deviceId, this.isScanning = !1, await this.$nextTick(), this.isScanning = !0, typeof frappe < "u" && frappe.show_alert && frappe.show_alert(
          {
            message: this.__("Switched to: ") + (this.cameras[t].label || `Camera ${t + 1}`),
            indicator: "blue"
          },
          2
        );
      }
    },
    // Old methods to remove or adapt:
    // initializeAutoDetectionScanner, startBarcodeDetection, detectBarcodeInImageData,
    // onScanSuccess (replaced by onDetect), stopCurrentScanner, toggleFlashlight (replaced by toggleTorch)
    // handleScannerError (replaced by onError)
    handleEscKey(e) {
      e.key === "Escape" && this.scannerDialog && (e.preventDefault(), this.stopScanning());
    }
  },
  watch: {
    scannerDialog(e) {
      e ? !this.selectedDeviceId && this.cameras.length === 0 && this.listCameras() : (this.isScanning = !1, this.torchActive = !1);
    }
  },
  mounted() {
    typeof document < "u" && document.addEventListener("keydown", this.handleEscKey);
  },
  beforeUnmount() {
    typeof document < "u" && document.removeEventListener("keydown", this.handleEscKey), this.stopScanning();
  }
}, ree = { key: 0 }, iee = {
  key: 0,
  class: "scanner-container"
}, oee = {
  key: 0,
  class: "scanning-overlay"
}, see = { class: "status-messages pa-3" }, lee = {
  key: 1,
  class: "pa-4 text-center"
}, cee = { class: "mt-2" }, uee = { class: "mt-2" }, dee = { class: "d-flex gap-2" };
function fee(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-chip"), s = J("v-spacer"), d = J("v-btn"), u = J("v-card-title"), f = J("qrcode-stream"), h = J("v-alert"), y = J("v-card-text"), p = J("v-card-actions"), w = J("v-card"), b = J("v-dialog");
  return te(), Le(b, {
    modelValue: r.scannerDialog,
    "onUpdate:modelValue": t[2] || (t[2] = (v) => r.scannerDialog = v),
    "max-width": "600px",
    persistent: "false"
  }, {
    default: E(() => [
      _(w, null, {
        default: E(() => [
          _(u, { class: "text-h5 text-primary d-flex align-center" }, {
            default: E(() => [
              _(o, {
                class: "mr-2",
                size: "large"
              }, {
                default: E(() => t[3] || (t[3] = [
                  ae("mdi-camera", -1)
                ])),
                _: 1,
                __: [3]
              }),
              ae(" " + j(e.__("Scan QR Code/Barcode")) + " ", 1),
              _(l, {
                class: "ml-2",
                size: "small",
                color: "primary"
              }, {
                default: E(() => [
                  ae(j(n.scanType === "Both" ? "Auto Detect" : n.scanType), 1)
                ]),
                _: 1
              }),
              _(s),
              _(d, {
                icon: "mdi-close",
                onClick: ua(i.stopScanning, ["stop"]),
                color: "error",
                variant: "text",
                size: "large",
                title: e.__("Close Scanner")
              }, null, 8, ["onClick", "title"])
            ]),
            _: 1
          }),
          _(y, { class: "pa-0" }, {
            default: E(() => [
              r.cameraPermissionDenied ? (te(), Oe("div", lee, [
                _(o, {
                  size: "64",
                  color: "error"
                }, {
                  default: E(() => t[9] || (t[9] = [
                    ae("mdi-camera-off", -1)
                  ])),
                  _: 1,
                  __: [9]
                }),
                T("h3", cee, j(e.__("Camera Access Required")), 1),
                T("p", uee, j(e.__("Please allow camera access to scan codes")), 1)
              ])) : (te(), Oe("div", ree, [
                r.isScanning && r.scannerDialog ? (te(), Oe("div", iee, [
                  _(f, {
                    formats: i.readerFormats,
                    torch: r.torchActive,
                    camera: r.selectedDeviceId ? { deviceId: r.selectedDeviceId, exact: r.selectedDeviceId } : "auto",
                    onDetect: i.onDetect,
                    onError: i.onError,
                    onCameraOn: t[0] || (t[0] = (v) => r.isScanning = !0),
                    onCameraOff: t[1] || (t[1] = (v) => r.isScanning = !1),
                    style: { width: "100%", height: "350px", "object-fit": "cover" }
                  }, {
                    default: E(() => [
                      r.scanResult ? ke("", !0) : (te(), Oe("div", oee, t[4] || (t[4] = [
                        T("div", { class: "scan-line" }, null, -1),
                        T("div", { class: "scan-corners" }, [
                          T("div", { class: "corner top-left" }),
                          T("div", { class: "corner top-right" }),
                          T("div", { class: "corner bottom-left" }),
                          T("div", { class: "corner bottom-right" })
                        ], -1)
                      ])))
                    ]),
                    _: 1
                  }, 8, ["formats", "torch", "camera", "onDetect", "onError"])
                ])) : ke("", !0),
                T("div", see, [
                  r.errorMessage ? (te(), Le(h, {
                    key: 0,
                    type: "error",
                    variant: "tonal",
                    class: "mb-2"
                  }, {
                    default: E(() => [
                      _(o, null, {
                        default: E(() => t[5] || (t[5] = [
                          ae("mdi-alert-circle", -1)
                        ])),
                        _: 1,
                        __: [5]
                      }),
                      ae(" " + j(r.errorMessage), 1)
                    ]),
                    _: 1
                  })) : ke("", !0),
                  r.scanResult ? (te(), Le(h, {
                    key: 1,
                    type: "success",
                    variant: "tonal",
                    class: "mb-2"
                  }, {
                    default: E(() => [
                      ae(j(e.__("Successfully scanned:")) + " ", 1),
                      T("strong", null, j(r.scanResult), 1),
                      t[6] || (t[6] = ae()),
                      t[7] || (t[7] = T("br", null, null, -1)),
                      T("small", null, "Format: " + j(r.scanFormat), 1)
                    ]),
                    _: 1,
                    __: [6, 7]
                  })) : ke("", !0),
                  !r.scanResult && !r.errorMessage && r.isScanning && r.scannerDialog ? (te(), Le(h, {
                    key: 2,
                    type: "info",
                    variant: "tonal"
                  }, {
                    default: E(() => [
                      ae(j(e.__("Position the QR code or barcode within the scanning area")) + " ", 1),
                      t[8] || (t[8] = T("br", null, null, -1)),
                      T("small", null, j(e.__("Detecting formats:")) + " " + j(i.readerFormats.join(", ")), 1)
                    ]),
                    _: 1,
                    __: [8]
                  })) : ke("", !0)
                ])
              ]))
            ]),
            _: 1
          }),
          _(p, { class: "justify-space-between pa-3" }, {
            default: E(() => [
              T("div", dee, [
                r.isScanning && r.cameras.length > 0 ? (te(), Le(d, {
                  key: 0,
                  onClick: i.toggleTorch,
                  color: r.torchActive ? "warning" : "default",
                  variant: "outlined",
                  size: "small"
                }, {
                  default: E(() => [
                    _(o, null, {
                      default: E(() => [
                        ae(j(r.torchActive ? "mdi-flashlight" : "mdi-flashlight-off"), 1)
                      ]),
                      _: 1
                    }),
                    ae(" " + j(r.torchActive ? e.__("Flash On") : e.__("Flash Off")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "color"])) : ke("", !0),
                r.isScanning && r.cameras.length > 1 ? (te(), Le(d, {
                  key: 1,
                  onClick: i.switchCamera,
                  color: "default",
                  variant: "outlined",
                  size: "small"
                }, {
                  default: E(() => [
                    _(o, null, {
                      default: E(() => t[10] || (t[10] = [
                        ae("mdi-camera-switch", -1)
                      ])),
                      _: 1,
                      __: [10]
                    }),
                    ae(" " + j(e.__("Switch Camera")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])) : ke("", !0)
              ]),
              _(d, {
                onClick: ua(i.stopScanning, ["stop"]),
                color: "error",
                variant: "outlined"
              }, {
                default: E(() => [
                  ae(j(e.__("Cancel")), 1)
                ]),
                _: 1
              }, 8, ["onClick"])
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["modelValue"]);
}
const mee = /* @__PURE__ */ on(aee, [["render", fee], ["__scopeId", "data-v-b26be293"]]);
async function Kh(e) {
  if (!(!e || typeof frappe > "u" || !navigator.onLine)) {
    try {
      if (e.print_format) {
        const t = await frappe.call({
          method: "frappe.client.get_value",
          args: {
            doctype: "Print Format",
            fieldname: "html",
            filters: { name: e.print_format }
          }
        });
        t.message && t.message.html && EQ(t.message.html);
      }
    } catch (t) {
      console.error("Failed to fetch print format", t);
    }
    try {
      const t = e.tc_name || e.terms_and_conditions;
      if (t) {
        const n = await frappe.call({
          method: "frappe.client.get_value",
          args: {
            doctype: "Terms and Conditions",
            fieldname: "terms",
            filters: { name: t }
          }
        });
        n.message && n.message.terms && OQ(n.message.terms);
      }
    } catch (t) {
      console.error("Failed to fetch terms and conditions", t);
    }
  }
}
async function iw() {
  const e = frappe?.boot?.pos_profile;
  if (e && e.warehouse && e.selling_price_list)
    return await Kh(e), e;
  try {
    const n = await frappe.call({
      method: "posawesome.posawesome.api.utils.get_active_pos_profile",
      args: { user: frappe.session.user }
    });
    if (n.message)
      return frappe.boot.pos_profile = n.message, await Kh(n.message), n.message;
  } catch (n) {
    console.error("Failed to fetch active POS profile", n);
  }
  const t = $u();
  return t && t.pos_profile ? (await Kh(t.pos_profile), t.pos_profile) : (await Kh(e), e || null);
}
function eB() {
  const e = be(window.innerWidth), t = be(window.innerHeight), n = be(window.innerWidth), a = be(window.innerHeight), r = W(() => e.value / n.value), i = W(() => t.value / a.value), o = W(() => (r.value + i.value) / 2), l = W(() => {
    const u = {
      xs: 4,
      sm: 8,
      md: 16,
      lg: 24,
      xl: 32
    };
    return {
      xs: Math.max(2, Math.round(u.xs * o.value)),
      sm: Math.max(4, Math.round(u.sm * o.value)),
      md: Math.max(8, Math.round(u.md * o.value)),
      lg: Math.max(12, Math.round(u.lg * o.value)),
      xl: Math.max(16, Math.round(u.xl * o.value))
    };
  }), s = W(() => {
    let u;
    return e.value <= 480 ? u = Math.round(45 * i.value) : e.value <= 768 ? u = Math.round(55 * i.value) : u = Math.round(60 * i.value), u = Math.max(30, Math.min(u, 70)), {
      "--dynamic-xs": `${l.value.xs}px`,
      "--dynamic-sm": `${l.value.sm}px`,
      "--dynamic-md": `${l.value.md}px`,
      "--dynamic-lg": `${l.value.lg}px`,
      "--dynamic-xl": `${l.value.xl}px`,
      "--container-height": `${Math.round(68 * i.value)}vh`,
      "--card-height": `${u}vh`,
      "--font-scale": o.value.toFixed(2)
    };
  }), d = () => {
    e.value = window.innerWidth, t.value = window.innerHeight;
  };
  return an(() => {
    d(), window.addEventListener("resize", d);
  }), Ja(() => {
    window.removeEventListener("resize", d);
  }), {
    windowWidth: e,
    windowHeight: t,
    baseWidth: n,
    baseHeight: a,
    widthScale: r,
    heightScale: i,
    averageScale: o,
    dynamicSpacing: l,
    responsiveStyles: s
  };
}
const tB = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYBAMAAABoWJ9DAAAALVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBoCg+AAAAD3RSTlMAXgYsRRgTViRKHAw8UTLfejSWAAAG1UlEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD27V8nqiAKwPjJggi7hOQIAosswT+FhSRa2kHiA7CVLVhQWLkxoZCG7WiJdjYkvsB2tKyllcsTQOdjaBaVuXPuXkHu3BnN93uFL7lzMnMPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMD1IBZBjicDjaV5JPA1BhrPrMA3rjFtCjzbGtOJwNPVmL4KkgryRkCQtBEkMQRJzDDIhxfV2yDI6CBHUr0pghDkX0CQxBAkMQRJDEESQ5DEECQxBEkMQRJDkMQQJDEESQxBEkOQxOQEaezsSA6CVMEGmXiuqq0vYhCkAjZI/VCH3q6KhyDh2SCNDf3pnXgIEp4N0tXfPksWQYKzQab1UqsnGQQJzgbpq+NUsggSmA0ypq6mZBAkNBukrRln4iJIaDbIQDPuSgZBwrJBxjSrKS6CBGaD3C5ccCJIYDZIt3DBiSCB2SAb6rkjDoIEZoOob0kcBAnLBplQ34o4CBKWDTKpvjlxECQsG2RGfS1xECRXpUEWxEGQXAT5z/HJSgyHemKcILfUtywOgoRlg9TUtygOgoRlg8iheu6JiyAFqrlcXBcHQQKzQe6rZ18cBAnMBpm50dRb+/StR5BSg9Q6N7jsrZ2rNo8IUmYQ6d7gferlcE7uEaTMINPqaq3K1dV1aJcgZQWxb4a7cg1tvbBFkDKDPNJLC1tydY2OXtgjSDlB7L+kH687xA41CVJqkHrn755vz/WXM4KUGUQeDovYealY3ZmVCVJqEHnc1x/e9+Q6jp2jp0eQkpc+Xx8cvJKrstPZOkGir0XPqGOFINGDtNW1SZDIQRodde0RJHKQcc2YI0jkIM806ylBogaZUM88QaIGWVNPa5UgMYP01XdCkIhBJtVYJEjEINtqbREkWpDaQK1TgkQLMq05lgkSLUhX8+wTJFKQRkfz7BEkUpApzdUkSKQg55rvjCBRgtR1hCWCRAlyrCMs9AgSI8iGjrJOkAhBxnSkWYJECNLW0TYJUmEQs79gnRKk8iDTWmCZIJUH6WqRfYJUHGRCC80TpOIga1qotUqQaoP0tdgJQSoNMql/sEiQSoN8Z++OVdSIojCOg6viqggfuuvqumKXStAiveYJtEiXgDaBkMq0NvoGTp9AfAOtbPUR9AmybxLYpEsOc++dc25c+P7tTPerLt8dZo+0dgQxAPnw/du/nydIa0MQfZDPAFoT4cp7Sl2CqIOUxUPeFulNCKINssZL74TtNqWvBFEGKeB3rZ683UKuQRBlkIN4phjCpQFBdEESad4owKk7gqiC1MTboQc41ewRRBNkKs4bY7g1IogiSGUhzRs3cKxOEEWQvDhvzOHajCB6IENp3sid4dqFIGogRXHeqMK5DkHUQPrivLGGeyuCaIGcpHmjCI8eCaIEUhLnjT48ahFECWQuzhsn+HQkiApI7izNGyV41SaICkgVf/XnvQO8au4IogGyFj9US+DXhiAKIJWFNG/U4FmXIAogt+K8sYVvE4JkB3mW5o3KAr4tCZIZpCzOG3l41yBIZpCDeKYYwr8BQbKCjKV5o4CA7gmSEeQGQrM+AnrqESQbyBRClxNCOhIkE4g8QLUQ1ANBMoFUod2MIFlA1tDuQpAMIEWo1yFIBpA+9FsRJBzkBP2WBAkGKcGgFkGCQfaw6CdBQkESWNQmSCBIDSY1dwQJA9nCphFBgkAqC9hUJ0gQSB5WTQgSAjKEVReCBIAUYFaHIAEgb2DXiiD+IGPYdU8Qb5AbGPbUI4gvyByWHQniCZI7w7IHgniCVGHbjiB+IGvYtiGIF0gFxnUJ4gVyC+t+EMQH5BnWLQniAVKGeQ2CeIAcYN+AIO4gCey7I4gzSA0RavYI4goyRYxGBHEEyS0QozpBHEHyiNOMIG4gQ8TpQhAnkCIi1SGIE0gfsVoRxAXkhFg9EsQBpIRotQjiALJHvI4ESQdJEK82QVJBcp8i9oUgaSBW8f8hBHnlEeTKIsiVRZAr6wXk7fv4fSSIAPK/IghBfrFHxzQAAjEAAJswMlUACUggbNjDABbQxYIU9kdAn+TOwv2BkM4I6YyQzlxZ6QwaS1Z6gsaQhaY5aK1Z5w4+xmOrsgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALztwSEBAAAAgKD/r51hAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgFJxAtJ60EBzsAAAAAElFTkSuQmCC", hee = {
  name: "LoadingOverlay",
  props: {
    loading: {
      type: Boolean,
      default: !1
    },
    message: {
      type: String,
      default: ""
    },
    progress: {
      type: Number,
      default: 0
    }
  }
}, _ee = { class: "mt-4 text-subtitle-1" };
function vee(e, t, n, a, r, i) {
  const o = J("v-progress-linear"), l = J("v-overlay");
  return te(), Le(l, {
    "model-value": n.loading,
    class: "d-flex flex-column align-center justify-center fancy-overlay",
    contained: ""
  }, {
    default: E(() => [
      _(o, {
        "model-value": n.progress,
        height: "8",
        color: "primary",
        rounded: "",
        class: "elegant-progress"
      }, null, 8, ["model-value"]),
      T("div", _ee, j(n.message), 1)
    ]),
    _: 1
  }, 8, ["model-value"]);
}
const nB = /* @__PURE__ */ on(hee, [["render", vee], ["__scopeId", "data-v-25095eef"]]), pee = {
  mixins: [Bi],
  setup() {
    const e = eB(), t = kc();
    return { ...e, ...t };
  },
  components: {
    CameraScanner: mee,
    LoadingOverlay: nB
  },
  data: () => ({
    pos_profile: {},
    flags: {},
    items_view: "list",
    item_group: "ALL",
    loading: !1,
    items_group: ["ALL"],
    items: [],
    search: "",
    first_search: "",
    search_backup: "",
    // Limit the displayed items to avoid overly large lists
    itemsPerPage: 50,
    offersCount: 0,
    appliedOffersCount: 0,
    couponsCount: 0,
    appliedCouponsCount: 0,
    customer_price_list: null,
    customer: null,
    new_line: !1,
    qty: 1,
    refresh_interval: null,
    abortController: null,
    itemDetailsRequestCache: { key: null, promise: null, result: null },
    itemDetailsRetryCount: 0,
    itemDetailsRetryTimeout: null,
    items_loaded: !1,
    selected_currency: "",
    exchange_rate: 1,
    prePopulateInProgress: !1,
    itemWorker: null,
    storageAvailable: !0,
    localStorageAvailable: !0,
    items_request_token: 0,
    pendingGetItems: null,
    lastGetItemsKey: "",
    show_item_settings: !1,
    hide_qty_decimals: !1,
    temp_hide_qty_decimals: !1,
    hide_zero_rate_items: !1,
    temp_hide_zero_rate_items: !1,
    show_available_qty: !1,
    temp_show_available_qty: !1,
    show_uom: !1,
    temp_show_uom: !1,
    isDragging: !1,
    // Items per page configuration
    enable_custom_items_per_page: !1,
    temp_enable_custom_items_per_page: !1,
    items_per_page: 50,
    temp_items_per_page: 50,
    temp_force_server_items: !1,
    // Performance optimizations
    searchCache: /* @__PURE__ */ new Map(),
    itemCache: /* @__PURE__ */ new Map(),
    virtualScrollEnabled: !0,
    renderBuffer: 10,
    lastScrollTop: 0,
    scrollThrottle: null,
    searchDebounce: null,
    // Prevent repeated server fetches when local storage is empty
    fallbackAttempted: !1,
    // Fixed page size for incremental item loading to avoid
    // pulling the entire catalog at once.
    itemsPageLimit: 100,
    // Track if the current search was triggered by a scanner
    search_from_scanner: !1,
    currentPage: 0,
    isOverflowing: !1,
    // Track background loading state and pending searches
    isBackgroundLoading: !1,
    pendingItemSearch: null,
    loadProgress: 0,
    totalItemCount: 0
  }),
  watch: {
    customer: $i.debounce(function() {
      if (this.pos_profile.posa_force_reload_items) {
        this.pos_profile.posa_smart_reload_mode ? !this.items_loaded || !this.filtered_items.length ? (this.items_loaded = !1, un() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0)) : this.$nextTick(() => this.refreshPricesForVisibleItems()) : (this.items_loaded = !1, un() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0));
        return;
      }
      this.items_loaded && this.filtered_items && this.filtered_items.length > 0 ? this.$nextTick(() => this.refreshPricesForVisibleItems()) : this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items();
    }, 300),
    customer_price_list: $i.debounce(async function() {
      if (this.pos_profile.posa_force_reload_items) {
        this.pos_profile.posa_smart_reload_mode ? !this.items_loaded || !this.items.length ? (this.items_loaded = !1, un() ? this.get_items() : this.get_items(!0)) : this.$nextTick(() => this.refreshPricesForVisibleItems()) : (this.items_loaded = !1, un() ? this.get_items() : this.get_items(!0));
        return;
      }
      if (this.items_loaded && this.items && this.items.length > 0) {
        const e = await gD(this.customer_price_list);
        if (e && e.length) {
          const t = {};
          e.forEach((n) => {
            t[n.item_code] = n;
          }), this.items.forEach((n) => {
            const a = t[n.item_code];
            a && (n.rate = a.rate, n.price_list_rate = a.price_list_rate || a.rate);
          }), this.eventBus.emit("set_all_items", this.items), this.update_items_details(this.items);
          return;
        }
      }
      this.items_loaded = !1, un() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.get_items(!0);
    }, 300),
    new_line() {
      this.eventBus.emit("set_new_line", this.new_line);
    },
    item_group(e, t) {
      this.pos_profile && this.pos_profile.pose_use_limit_search && e !== t ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? this.get_items(!0) : this.get_items() : this.pos_profile && this.pos_profile.posa_local_storage && e !== t && (this.storageAvailable ? this.loadVisibleItems(!0) : this.get_items(!0));
    },
    filtered_items(e, t) {
      this.pos_profile && !this.pos_profile.pose_use_limit_search && e.length !== t.length && this.update_items_details(e), this.$nextTick(this.checkItemContainerOverflow);
    },
    // Automatically search when the query has at least 3 characters
    first_search: $i.debounce(function(e, t) {
      const n = (e || "").trim().length, a = (t || "").trim().length;
      n >= 3 ? this.search_onchange() : a >= 3 && n === 0 && this.clearSearch();
    }, 300),
    // Refresh item prices whenever the user changes currency
    selected_currency() {
      this.applyCurrencyConversionToItems();
    },
    // Also react when exchange rate is adjusted manually
    exchange_rate() {
      this.applyCurrencyConversionToItems();
    },
    windowWidth() {
      this.itemsPerPage = this.items_per_page;
    },
    windowHeight() {
      this.itemsPerPage = this.items_per_page;
    },
    items_loaded(e) {
      e && (this.eventBus.emit("items_loaded"), this.eventBus.emit("data-loaded", "items"));
    },
    items_view() {
      this.$nextTick(() => {
        this.items_view === "card" ? this.checkItemContainerOverflow() : this.isOverflowing = !1;
      });
    }
  },
  methods: {
    // Performance optimization: Memoized search function
    memoizedSearch(e, t) {
      const n = `${e || ""}_${t || "ALL"}`;
      if (this.searchCache && this.searchCache.has(n))
        return this.searchCache.get(n);
      const a = this.performSearch(e, t);
      return this.searchCache && this.searchCache.set(n, a), a;
    },
    performSearch(e, t) {
      if (!this.items || !this.items.length)
        return [];
      let n = this.items;
      if (t !== "ALL" && (n = n.filter(
        (a) => a.item_group && a.item_group.toLowerCase().includes(t.toLowerCase())
      )), e && e.trim() && e.trim().length >= 3) {
        const a = e.toLowerCase();
        n = n.filter((r) => {
          const i = Array.isArray(r.item_barcode) && r.item_barcode.some(
            (o) => o.barcode && o.barcode.toLowerCase().includes(a)
          ) || Array.isArray(r.barcodes) && r.barcodes.some((o) => String(o).toLowerCase().includes(a)) || r.barcode && String(r.barcode).toLowerCase().includes(a);
          return r.item_code.toLowerCase().includes(a) || r.item_name.toLowerCase().includes(a) || i;
        });
      }
      return n;
    },
    async fetchServerItemsTimestamp() {
      try {
        const { message: e } = await frappe.call({
          method: "frappe.client.get_list",
          args: {
            doctype: "Item",
            fields: ["modified"],
            order_by: "modified desc",
            limit_page_length: 1
          }
        });
        return e && e[0] && e[0].modified;
      } catch (e) {
        return console.error("Failed to fetch server items timestamp", e), null;
      }
    },
    // Optimized scroll handler with throttling
    onCardScroll() {
      this.scrollThrottle || (this.scrollThrottle = requestAnimationFrame(() => {
        try {
          const e = this.$refs.itemsContainer;
          if (!e) return;
          const t = e.scrollTop, n = e.clientHeight, a = e.scrollHeight;
          t + n >= a - 50 && (this.currentPage += 1, this.loadVisibleItems()), this.lastScrollTop = t;
        } catch (e) {
          console.error("Error in card scroll handler:", e);
        } finally {
          this.scrollThrottle = null;
        }
      }));
    },
    markStorageUnavailable(e = !1) {
      if (e) {
        this.localStorageAvailable = !1;
        return;
      }
      this.storageAvailable = !1, this.localStorageAvailable = !1, this.itemsPageLimit = null, this.itemWorker && (this.itemWorker.terminate(), this.itemWorker = null), this.pos_profile && (this.pos_profile.posa_local_storage = !1);
    },
    async ensureStorageHealth() {
      let e = !0;
      try {
        if (typeof localStorage < "u") {
          const n = "posa_test";
          localStorage.setItem(n, "1"), localStorage.removeItem(n);
        }
      } catch (n) {
        console.warn("localStorage unavailable", n), e = !1;
      }
      const t = await ia().catch(() => !1);
      if (t) {
        if (this.storageAvailable = !0, e ? this.localStorageAvailable = !0 : this.markStorageUnavailable(!0), this.pos_profile && this.pos_profile.posa_local_storage && typeof Worker < "u" && !this.itemWorker)
          try {
            const n = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
            this.itemWorker = new Worker(n, { type: "classic" }), this.itemWorker.onerror = function(a) {
              console.error("Worker error:", a), console.error("Message:", a.message), console.error("Filename:", a.filename), console.error("Line number:", a.lineno);
            };
          } catch (n) {
            console.error("Failed to start item worker", n), this.itemWorker = null;
          }
      } else
        this.markStorageUnavailable();
      return t;
    },
    async loadVisibleItems(e = !1) {
      this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "items", progress: 0 }), await fm, await this.ensureStorageHealth(), e && (this.currentPage = 0, this.items = []);
      const t = this.get_search(this.first_search), n = this.item_group !== "ALL" ? this.item_group.toLowerCase() : "", a = await vQ({
        search: t,
        itemGroup: n,
        limit: this.itemsPerPage,
        offset: this.currentPage * this.itemsPerPage
      }), r = a.length || 1;
      a.forEach((i, o) => {
        this.items.push(i);
        const l = Math.round((o + 1) / r * 100);
        this.loadProgress = l, this.eventBus.emit("data-load-progress", {
          name: "items",
          progress: l
        });
      }), this.eventBus.emit("set_all_items", this.items), a.length && this.update_items_details(a);
    },
    onListScroll(e) {
      this.scrollThrottle || (this.scrollThrottle = requestAnimationFrame(() => {
        try {
          const t = e.target;
          t.scrollTop + t.clientHeight >= t.scrollHeight - 50 && (this.currentPage += 1, this.loadVisibleItems());
        } catch (t) {
          console.error("Error in list scroll handler:", t);
        } finally {
          this.scrollThrottle = null;
        }
      }));
    },
    checkItemContainerOverflow() {
      const e = this.$refs.itemsContainer;
      if (!e) {
        this.isOverflowing = !1;
        return;
      }
      const t = parseFloat(getComputedStyle(e).getPropertyValue("--container-height"));
      if (isNaN(t)) {
        this.isOverflowing = !1;
        return;
      }
      const n = e.closest(".dynamic-padding")?.querySelector(".sticky-header"), a = n ? n.offsetHeight : 0, r = t - a;
      e.style.maxHeight = `${r}px`, this.isOverflowing = e.scrollHeight > r;
    },
    async fetchItemDetails(e) {
      if (!e || e.length === 0)
        return [];
      const t = [
        this.pos_profile.name,
        this.active_price_list,
        e.map((a) => a.item_code).join(",")
      ].join(":");
      if (this.itemDetailsRequestCache.key === t && this.itemDetailsRequestCache.result)
        return this.itemDetailsRequestCache.result;
      if (this.itemDetailsRequestCache.key === t && this.itemDetailsRequestCache.promise)
        return this.itemDetailsRequestCache.promise;
      this.cancelItemDetailsRequest(), this.itemDetailsRequestCache.key = t, this.abortController = new AbortController();
      const n = frappe.call({
        method: "posawesome.posawesome.api.items.get_items_details",
        args: {
          pos_profile: JSON.stringify(this.pos_profile),
          items_data: JSON.stringify(e),
          price_list: this.active_price_list
        },
        freeze: !1,
        signal: this.abortController.signal
      });
      this.itemDetailsRequestCache.promise = n;
      try {
        const a = await n, r = a && a.message || [];
        return this.itemDetailsRequestCache.key === t && (this.itemDetailsRequestCache.result = r), r;
      } catch (a) {
        throw a.name !== "AbortError" && console.error("Error fetching item details:", a), a;
      } finally {
        this.itemDetailsRequestCache.key === t && (this.itemDetailsRequestCache.promise = null), this.abortController = null;
      }
    },
    cancelItemDetailsRequest() {
      this.abortController && (this.abortController.abort(), this.abortController = null), this.itemDetailsRequestCache && (this.itemDetailsRequestCache.key = null, this.itemDetailsRequestCache.promise = null, this.itemDetailsRequestCache.result = null);
    },
    async refreshPricesForVisibleItems() {
      const e = this;
      if (!e.filtered_items || e.filtered_items.length === 0) return;
      e.loading = !0;
      const t = e.filtered_items.map((i) => i.item_code), n = await DA(
        e.pos_profile.name,
        e.active_price_list,
        t
      ), a = [];
      if (n.cached.forEach((i) => {
        const o = e.filtered_items.find((l) => l.item_code === i.item_code);
        if (o) {
          const l = { actual_qty: i.actual_qty };
          i.item_uoms && i.item_uoms.length > 0 && (l.item_uoms = i.item_uoms, Uh(o.item_code, i.item_uoms)), i.rate !== void 0 && (i.rate !== 0 || !o.rate) && (l.rate = i.rate, l.price_list_rate = i.price_list_rate || i.rate), i.currency && (l.currency = i.currency), a.push({ item: o, upd: l });
        }
      }), n.missing.length === 0) {
        e.$nextTick(() => {
          a.forEach(({ item: i, upd: o }) => Object.assign(i, o)), Ay(n.cached), e.loading = !1;
        });
        return;
      }
      const r = e.filtered_items.filter((i) => n.missing.includes(i.item_code));
      try {
        const i = await e.fetchItemDetails(r);
        i.forEach((o) => {
          const l = e.filtered_items.find((s) => s.item_code === o.item_code);
          if (l) {
            const s = { actual_qty: o.actual_qty };
            o.item_uoms && o.item_uoms.length > 0 && (s.item_uoms = o.item_uoms, Uh(l.item_code, o.item_uoms)), o.rate !== void 0 && (o.rate !== 0 || !l.rate) && (s.rate = o.rate, s.price_list_rate = o.price_list_rate || o.rate), o.currency && (s.currency = o.currency), o.batch_no_data && (s.batch_no_data = o.batch_no_data), o.serial_no_data && (s.serial_no_data = o.serial_no_data), a.push({ item: l, upd: s });
          }
        }), e.$nextTick(async () => {
          if (a.forEach(({ item: o, upd: l }) => Object.assign(o, l)), Ay(i), OA(e.pos_profile.name, e.active_price_list, i), e.pos_profile && e.pos_profile.posa_local_storage && e.storageAvailable && !e.pos_profile.pose_use_limit_search)
            try {
              await Kd(i);
            } catch (o) {
              console.error("Failed to persist item details", o), e.markStorageUnavailable && e.markStorageUnavailable();
            }
          e.loading = !1;
        });
      } catch (i) {
        i.name !== "AbortError" && (console.error("Error fetching item details:", i), e.loading = !1);
      }
    },
    show_offers() {
      this.eventBus.emit("show_offers", "true");
    },
    show_coupons() {
      this.eventBus.emit("show_coupons", "true");
    },
    async initializeItems() {
      if (await this.ensureStorageHealth(), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && await BA() > 0) {
        await this.loadVisibleItems(!0), this.items_loaded = !0, this.emitItemGroupsData(), await this.verifyServerItemCount();
        return;
      }
      await this.get_items(!0);
    },
    async forceReloadItems() {
      console.log("[ItemsSelector] forceReloadItems called"), await Uu(), console.log("[ItemsSelector] price list cache cleared"), await $h(), console.log("[ItemsSelector] stored items cleared"), await this.ensureStorageHealth(), console.log("[ItemsSelector] storage health ensured"), this.items = [], console.log("[ItemsSelector] items array cleared"), this.items_loaded = !1, (!this.first_search || !this.first_search.trim()) && (console.log("[ItemsSelector] resetting empty search before reload"), this.first_search = "", this.search = ""), console.log("[ItemsSelector] loading items from server"), await this.get_items(!0), console.log("[ItemsSelector] forceReloadItems finished");
    },
    async verifyServerItemCount() {
      if (un()) {
        console.log("[ItemsSelector] offline, skipping server item count check");
        return;
      }
      try {
        const e = await BA();
        console.log("[ItemsSelector] verifying server item count", { localCount: e });
        const t = (this.pos_profile?.item_groups || []).map((r) => r.item_group), a = (await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_count",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            item_groups: t
          }
        })).message || 0;
        if (console.log("[ItemsSelector] server item count result", { serverCount: a }), typeof a == "number")
          if (this.totalItemCount = a, this.loadProgress = a ? Math.round(e / a * 100) : 0, a > e) {
            const r = wQ(), i = ++this.items_request_token;
            await this.backgroundLoadItems(null, r, !1, i, e);
          } else a < e && (console.log("[ItemsSelector] local cache has extra items, forcing reload"), await this.forceReloadItems());
      } catch (e) {
        console.error("Error checking item count:", e);
      }
    },
    async get_items(e = !1) {
      if (console.log("[ItemsSelector] get_items called", {
        force_server: e,
        first_search: this.first_search,
        item_group: this.item_group
      }), !this.pos_profile || !this.pos_profile.name) {
        console.warn("No POS Profile available, attempting to get it...");
        try {
          if (frappe.boot && frappe.boot.pos_profile)
            this.pos_profile = frappe.boot.pos_profile;
          else {
            console.error("No POS Profile configured"), frappe.msgprint(__("Please configure a POS Profile first"));
            return;
          }
        } catch (l) {
          console.error("Failed to get POS Profile:", l);
          return;
        }
      }
      const t = this;
      t.pos_profile?.pose_use_limit_search && (t.itemsPageLimit = parseInt(t.pos_profile.posa_search_limit) || t.itemsPageLimit);
      const n = this.get_search(this.first_search), a = t.item_group !== "ALL" ? t.item_group.toLowerCase() : "", r = n || "", i = (t.pos_profile?.item_groups || []).map((l) => l.item_group);
      if (console.log("[ItemsSelector] prepared fetch params", { search: r, item_group: a }), !e && this.items_loaded && this.items.length > 0) {
        console.log("[ItemsSelector] items already loaded, skipping fetch"), this.loading = !1;
        return;
      }
      e && (console.log("[ItemsSelector] force_server=true, clearing items array"), this.items = [], this.items_loaded = !1), this.loading = !0;
      const o = ++this.items_request_token;
      console.log("[ItemsSelector] sending request", { requestToken: o }), this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "items", progress: 0 }), console.log("[ItemsSelector] data-load-progress emitted", { progress: 0 });
      try {
        const l = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_count",
          args: {
            pos_profile: JSON.stringify(t.pos_profile),
            item_groups: i
          }
        });
        this.totalItemCount = l.message || 0;
      } catch (l) {
        console.error("Failed to fetch item count", l), this.totalItemCount = 0;
      }
      try {
        const l = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(t.pos_profile),
            price_list: t.customer_price_list,
            item_group: a,
            search_value: r,
            customer: t.customer,
            limit: t.itemsPageLimit,
            start_after: null,
            include_image: 1,
            item_groups: i
          }
        });
        console.log("[ItemsSelector] server responded", { count: l.message?.length });
        const s = l.message || [];
        s.forEach((u) => {
          (!u.item_uoms || u.item_uoms.length === 0) && (u.item_uoms = u.stock_uom ? [{ uom: u.stock_uom, conversion_factor: 1 }] : []), u.actual_qty === void 0 && (u.actual_qty = 0);
        }), t.items = s, t.items_loaded = !0, t.eventBus.emit("set_all_items", t.items), console.log("[ItemsSelector] set_all_items emitted", { itemsLength: t.items.length });
        const d = !t.pos_profile.pose_use_limit_search && s.length === t.itemsPageLimit;
        if (t.loadProgress = t.totalItemCount ? Math.round(s.length / t.totalItemCount * 100) : 100, t.eventBus.emit("data-load-progress", { name: "items", progress: t.loadProgress }), console.log("[ItemsSelector] data-load-progress emitted", { progress: t.loadProgress }), t.pos_profile && t.pos_profile.posa_local_storage && t.storageAvailable && !t.pos_profile.pose_use_limit_search)
          try {
            e && (console.log("[ItemsSelector] clearing local items before save"), await $h()), await Kd(s), console.log("[ItemsSelector] items persisted locally", { length: s.length });
          } catch (u) {
            console.error("Failed to persist items locally", u), t.markStorageUnavailable();
          }
        if (d) {
          const u = s[s.length - 1]?.item_name || null;
          console.log("[ItemsSelector] more items available, starting background load", {
            last: u,
            requestToken: o
          }), this.backgroundLoadItems(u, null, !1, o, s.length);
        }
      } catch (l) {
        console.error("Failed to load items:", l), frappe.msgprint(__("Failed to load items. Please try again."));
      } finally {
        t.loading = !1, console.log("[ItemsSelector] get_items finished");
      }
    },
    finishBackgroundLoad() {
      if (this.isBackgroundLoading = !1, this.pendingItemSearch) {
        const e = this.pendingItemSearch;
        this.pendingItemSearch = null, this.search_onchange(e), this.search_onchange.flush && this.search_onchange.flush();
      }
    },
    async backgroundLoadItems(e, t, n = !1, a, r = 0) {
      this.isBackgroundLoading = !0, console.log("[ItemsSelector] backgroundLoadItems called", {
        startAfter: e,
        syncSince: t,
        clearBefore: n,
        requestToken: a,
        loaded: r
      });
      const i = this.itemsPageLimit, o = (this.pos_profile?.item_groups || []).map((s) => s.item_group);
      if (!i || i >= 1e4) {
        console.log("[ItemsSelector] background load skipped due to high limit", { limit: i }), r === 0 && this.finishBackgroundLoad();
        return;
      }
      if (this.items_request_token !== a) {
        console.log("[ItemsSelector] background load token mismatch, aborting"), r === 0 && this.finishBackgroundLoad();
        return;
      }
      const l = t;
      if (this.itemWorker && this.storageAvailable)
        try {
          const s = await frappe.call({
            method: "posawesome.posawesome.api.items.get_items",
            args: {
              pos_profile: JSON.stringify(this.pos_profile),
              price_list: this.customer_price_list,
              item_group: this.item_group !== "ALL" ? this.item_group.toLowerCase() : "",
              search_value: this.search || "",
              customer: this.customer,
              modified_after: l,
              limit: i,
              start_after: e,
              include_image: 1,
              item_groups: o
            },
            freeze: !1
          });
          console.log("[ItemsSelector] background load server response", {
            count: s.message?.length
          });
          const d = JSON.stringify(s);
          if (this.items_request_token !== a) {
            console.log("[ItemsSelector] background load token mismatch after response"), r === 0 && this.finishBackgroundLoad();
            return;
          }
          let u = null;
          const f = await new Promise((p) => {
            this.itemWorker.onmessage = async (w) => {
              if (this.items_request_token !== a) {
                console.log(
                  "[ItemsSelector] background load token mismatch during worker message"
                ), r === 0 && this.finishBackgroundLoad(), p(0);
                return;
              }
              if (w.data.type === "parsed") {
                const b = w.data.items || [];
                if (console.log("[ItemsSelector] processing newItems batch", {
                  count: b.length,
                  currentItemsCount: this.items.length
                }), b.forEach((v) => {
                  const g = this.items.find((k) => k.item_code === v.item_code);
                  g ? (console.log("[ItemsSelector] updating existing item", v.item_code), Object.assign(g, v)) : (console.log("[ItemsSelector] adding new item", v.item_code), this.items.push(v));
                }), u = b[b.length - 1]?.item_name || null, this.eventBus.emit("set_all_items", this.items), console.log("[ItemsSelector] background load set_all_items emitted", {
                  length: this.items.length
                }), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && !this.pos_profile.pose_use_limit_search)
                  try {
                    n && (await $h(), n = !1), await Kd(b), console.log("[ItemsSelector] background load items persisted", {
                      length: b.length
                    });
                  } catch (v) {
                    console.error(v), this.markStorageUnavailable();
                  }
                p(b.length);
              } else w.data.type === "error" && (console.error("Item worker parse error:", w.data.error), p(0));
            }, this.itemWorker.postMessage({
              type: "parse_and_cache",
              json: d,
              priceList: this.customer_price_list || ""
            });
          });
          if (this.items_request_token !== a) {
            console.log("[ItemsSelector] background load token mismatch after worker"), r === 0 && this.finishBackgroundLoad();
            return;
          }
          const h = r + f, y = this.totalItemCount ? Math.min(99, Math.round(h / this.totalItemCount * 100)) : Math.min(99, Math.round(h / (h + i) * 100));
          this.loadProgress = y, this.eventBus.emit("data-load-progress", { name: "items", progress: y }), console.log("[ItemsSelector] background load progress", { progress: y }), f === i ? await this.backgroundLoadItems(
            u,
            t,
            n,
            a,
            h
          ) : (this.storageAvailable && this.localStorageAvailable && MA((/* @__PURE__ */ new Date()).toISOString()), this.itemWorker && (this.itemWorker.terminate(), this.itemWorker = null), this.items && this.items.length > 0 && await this.prePopulateStockCache(this.items), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "items", progress: 100 }), console.log("[ItemsSelector] background load completed"), this.items_loaded = !0, this.finishBackgroundLoad());
        } catch (s) {
          return console.error("Failed to background load items", s), this.markStorageUnavailable(), this.backgroundLoadItems(e, t, n, a, r);
        }
      else
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            price_list: this.customer_price_list,
            item_group: this.item_group !== "ALL" ? this.item_group.toLowerCase() : "",
            search_value: this.search || "",
            customer: this.customer,
            modified_after: l,
            limit: i,
            start_after: e,
            include_image: 1,
            item_groups: o
          },
          callback: async (s) => {
            if (this.items_request_token !== a) {
              console.log("[ItemsSelector] background load token mismatch in callback"), r === 0 && this.finishBackgroundLoad();
              return;
            }
            const d = s.message || [];
            if (console.log("[ItemsSelector] background load callback items", { count: d.length }), d.forEach((h) => {
              const y = this.items.find((p) => p.item_code === h.item_code);
              y ? Object.assign(y, h) : this.items.push(h);
            }), this.eventBus.emit("set_all_items", this.items), console.log("[ItemsSelector] background load set_all_items emitted", {
              length: this.items.length
            }), this.pos_profile && this.pos_profile.posa_local_storage && this.storageAvailable && !this.pos_profile.pose_use_limit_search)
              try {
                n && (await $h(), n = !1), await Kd(d), console.log("[ItemsSelector] background load items persisted", {
                  length: d.length
                });
              } catch (h) {
                console.error(h), this.markStorageUnavailable();
              }
            const u = r + d.length, f = this.totalItemCount ? Math.min(99, Math.round(u / this.totalItemCount * 100)) : Math.min(99, Math.round(u / (u + i) * 100));
            if (this.loadProgress = f, this.eventBus.emit("data-load-progress", { name: "items", progress: f }), console.log("[ItemsSelector] background load progress", { progress: f }), d.length === i) {
              const h = d[d.length - 1]?.item_name || null;
              await this.backgroundLoadItems(
                h,
                t,
                n,
                a,
                u
              );
            } else
              this.storageAvailable && this.localStorageAvailable && MA((/* @__PURE__ */ new Date()).toISOString()), this.items && this.items.length > 0 && await this.prePopulateStockCache(this.items), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "items", progress: 100 }), console.log("[ItemsSelector] background load completed"), this.items_loaded = !0, this.finishBackgroundLoad();
          },
          error: (s) => {
            console.error("Failed to background load items", s);
          }
        });
    },
    get_items_groups() {
      if (!this.pos_profile) {
        console.log("No POS Profile");
        return;
      }
      if (this.items_group = ["ALL"], this.pos_profile.item_groups.length > 0) {
        const e = [];
        this.pos_profile.item_groups.forEach((t) => {
          t.item_group !== "All Item Groups" && (this.items_group.push(t.item_group), e.push(t.item_group));
        }), UA(e), this.emitItemGroupsData();
      } else if (un())
        ZQ().forEach((t) => {
          this.items_group.push(t);
        }), this.emitItemGroupsData();
      else {
        const e = this;
        frappe.call({
          method: "posawesome.posawesome.api.items.get_items_groups",
          args: {},
          callback: function(t) {
            if (t.message) {
              const n = [];
              t.message.forEach((a) => {
                e.items_group.push(a.name), n.push(a.name);
              }), UA(n), e.emitItemGroupsData();
            }
          }
        });
      }
    },
    emitItemGroupsData() {
      const e = this.items_group.map((t) => {
        let n = 0, a = 0;
        if (t === "ALL")
          n = this.items.length, a = this.items.reduce((r, i) => r + (i.rate * i.actual_qty || 0), 0);
        else {
          const r = this.items.filter((i) => i.item_group === t);
          n = r.length, a = r.reduce((i, o) => i + (o.rate * o.actual_qty || 0), 0);
        }
        return {
          name: t,
          item_count: n,
          stock_value: a
        };
      });
      this.eventBus.emit("item_groups_data", e);
    },
    getItemsHeaders() {
      const e = [
        {
          title: __("Name"),
          align: "start",
          sortable: !0,
          key: "item_name"
        },
        {
          title: __("Code"),
          align: "start",
          sortable: !0,
          key: "item_code"
        },
        { title: __("Rate"), key: "rate", align: "start" }
      ];
      return this.show_available_qty && e.push({ title: __("Available QTY"), key: "actual_qty", align: "start" }), this.show_uom && e.push({ title: __("UOM"), key: "stock_uom", align: "start" }), this.pos_profile.posa_display_item_code || e.splice(1, 1), e;
    },
    async click_item_row(e, { item: t }) {
      await this.add_item(t);
    },
    async add_item(e) {
      if (e = { ...e }, e.has_variants) {
        let t = this.items.filter((a) => a.variant_of == e.item_code), n = {};
        if (!t.length)
          try {
            const a = await frappe.call({
              method: "posawesome.posawesome.api.items.get_item_variants",
              args: {
                pos_profile: JSON.stringify(this.pos_profile),
                parent_item_code: e.item_code,
                price_list: this.active_price_list,
                customer: this.customer
              }
            });
            a.message && (t = a.message.variants || a.message, n = a.message.attributes_meta || {}, this.items.push(...t));
          } catch (a) {
            console.error("Failed to fetch variants", a);
          }
        this.eventBus.emit("show_message", {
          title: __("This is an item template. Please choose a variant."),
          color: "warning"
        }), console.log("sending profile", this.pos_profile), n = n || {}, this.eventBus.emit("open_variants_model", e, t, this.pos_profile, n);
      } else {
        if (e.actual_qty === 0 && this.pos_profile.posa_display_items_in_stock) {
          this.eventBus.emit("show_message", {
            title: `No stock available for ${e.item_name}`,
            color: "warning"
          }), await this.update_items_details([e]);
          return;
        }
        if ((!e.item_uoms || e.item_uoms.length === 0) && (await this.update_items_details([e]), (!e.item_uoms || e.item_uoms.length === 0) && (e.item_uoms = [{ uom: e.stock_uom, conversion_factor: 1 }])), this.pos_profile.posa_allow_multi_currency) {
          this.applyCurrencyConversionToItem(e);
          const a = e.original_currency === this.pos_profile.currency ? e.original_rate : e.original_rate * (e.plc_conversion_rate || this.exchange_rate);
          e.base_rate = a, e.base_price_list_rate = a;
        }
        const t = e._barcode_qty;
        if (!e.qty || e.qty === 1 && !t) {
          let a = this.qty != null ? this.qty : 1;
          a = Math.abs(a), this.hide_qty_decimals && (a = Math.trunc(a)), e.qty = a;
        }
        const n = { ...e };
        delete n._barcode_qty, this.eventBus.emit("add_item", n), this.qty = 1;
      }
    },
    async enter_event() {
      if (!this.filtered_items.length || !this.first_search)
        return;
      const e = this.get_search(this.first_search), t = this.pos_profile?.posa_scale_barcode_start && this.first_search.startsWith(this.pos_profile.posa_scale_barcode_start);
      this.search = e;
      const n = parseFloat(this.get_item_qty(this.first_search)), a = { ...this.filtered_items[0] };
      a.qty = flt(n), t && (a._barcode_qty = !0);
      let r = !1;
      Array.isArray(a.item_barcode) && a.item_barcode.forEach((i) => {
        e === i.barcode && (a.uom = i.posa_uom, r = !0);
      }), !r && a.item_code === e && (r = !0), this.flags.serial_no && (a.to_set_serial_no = this.flags.serial_no), this.flags.batch_no && (a.to_set_batch_no = this.flags.batch_no), r && (await this.add_item(a), this.flags.serial_no = null, this.flags.batch_no = null, this.qty = 1, this.clearSearch(), this.$refs.debounce_search.focus());
    },
    search_onchange: $i.debounce(async function(e) {
      const t = this;
      t.cancelItemDetailsRequest();
      const a = ((typeof e == "string" ? e : t.first_search) || "").trim();
      if (!a || a.length < 3) {
        t.search_from_scanner = !1;
        return;
      }
      if (t.isBackgroundLoading) {
        t.pendingItemSearch = a;
        return;
      }
      t.search = a;
      const r = t.search_from_scanner;
      t.pos_profile && t.pos_profile.pose_use_limit_search ? t.pos_profile && (!t.pos_profile.posa_local_storage || !t.storageAvailable) ? t.get_items(!0) : t.get_items() : t.pos_profile && t.pos_profile.posa_local_storage ? t.storageAvailable ? (await t.loadVisibleItems(!0), t.enter_event()) : t.get_items(!0) : (await t.get_items(!0), t.enter_event(), t.filtered_items && t.filtered_items.length > 0 && setTimeout(() => {
        t.update_items_details(t.filtered_items);
      }, 300)), r && (t.clearSearch(), t.$refs.debounce_search && t.$refs.debounce_search.focus(), t.search_from_scanner = !1);
    }, 300),
    get_item_qty(e) {
      const t = this.qty != null ? this.qty : 1;
      let n = Math.abs(t);
      const a = this.pos_profile.posa_scale_barcode_start?.length || 0;
      if (e.startsWith(this.pos_profile.posa_scale_barcode_start)) {
        const r = e.length - a - 6;
        let i = e.substr(
          a + r,
          5
        ), o;
        i.startsWith("0000") ? o = "0.00" + i.substr(4) : i.startsWith("000") ? o = "0.0" + i.substr(3) : i.startsWith("00") ? o = "0." + i.substr(2) : i.startsWith("0") ? o = i.substr(1, 1) + "." + i.substr(2, i.length) : i.startsWith("0") || (o = i.substr(0, 2) + "." + i.substr(2, i.length)), n = o;
      }
      return this.hide_qty_decimals && (n = Math.trunc(n)), n;
    },
    get_search(e) {
      if (!e) return "";
      const t = this.pos_profile.posa_scale_barcode_start?.length || 0;
      if (!e.startsWith(this.pos_profile.posa_scale_barcode_start))
        return e;
      const n = e.length - t - 6;
      return e.substr(0, t + n);
    },
    esc_event() {
      this.search = null, this.first_search = null, this.search_backup = null, this.qty = 1, this.$refs.debounce_search.focus();
    },
    async update_items_details(e) {
      const t = this;
      if (!e || !e.length) return;
      t.itemDetailsRetryTimeout && (clearTimeout(t.itemDetailsRetryTimeout), t.itemDetailsRetryTimeout = null);
      const n = e.map((o) => o.item_code), a = await DA(
        t.pos_profile.name,
        t.active_price_list,
        n
      );
      a.cached.forEach((o) => {
        const l = e.find((s) => s.item_code === o.item_code);
        l && (Object.assign(l, {
          actual_qty: o.actual_qty,
          has_batch_no: o.has_batch_no,
          has_serial_no: o.has_serial_no
        }), o.item_uoms && o.item_uoms.length > 0 && (l.item_uoms = o.item_uoms, Uh(l.item_code, o.item_uoms)), o.rate !== void 0 && (o.rate !== 0 || !l.rate) && (l.rate = o.rate, l.price_list_rate = o.price_list_rate || o.rate), o.currency && (l.currency = o.currency), l.original_rate || (l.original_rate = l.rate, l.original_currency = l.currency || t.pos_profile.currency), t.applyCurrencyConversionToItem(l));
      });
      let r = a.missing.length === 0;
      if (e.forEach((o) => {
        const l = FA(o.item_code);
        if (l !== null ? o.actual_qty = l : r = !1, !o.item_uoms || o.item_uoms.length === 0) {
          const s = EA(o.item_code);
          s.length > 0 ? o.item_uoms = s : un() ? o.item_uoms = [{ uom: o.stock_uom, conversion_factor: 1 }] : r = !1;
        }
      }), un() || r) {
        t.itemDetailsRetryCount = 0;
        return;
      }
      const i = e.filter(
        (o) => a.missing.includes(o.item_code) && !o.has_variants
      );
      if (i.length === 0) {
        t.itemDetailsRetryCount = 0;
        return;
      }
      try {
        const o = await t.fetchItemDetails(i);
        if (o && o.length) {
          t.itemDetailsRetryCount = 0;
          let l = !1, s = [];
          if (e.forEach((d) => {
            const u = o.find((f) => f.item_code == d.item_code);
            if (u) {
              const f = d.actual_qty;
              s.push({
                item: d,
                updates: {
                  actual_qty: u.actual_qty,
                  has_batch_no: u.has_batch_no,
                  has_serial_no: u.has_serial_no,
                  batch_no_data: u.batch_no_data && u.batch_no_data.length > 0 ? u.batch_no_data : d.batch_no_data,
                  serial_no_data: u.serial_no_data && u.serial_no_data.length > 0 ? u.serial_no_data : d.serial_no_data,
                  item_uoms: u.item_uoms && u.item_uoms.length > 0 ? u.item_uoms : d.item_uoms,
                  rate: u.rate !== void 0 ? u.rate : d.rate,
                  price_list_rate: u.price_list_rate !== void 0 ? u.price_list_rate : d.price_list_rate,
                  currency: u.currency || d.currency
                }
              }), f > 0 && u.actual_qty === 0 && (l = !0), u.item_uoms && u.item_uoms.length > 0 && Uh(d.item_code, u.item_uoms);
            }
          }), s.forEach(({ item: d, updates: u }) => {
            Object.assign(d, u), t.applyCurrencyConversionToItem(d);
          }), Ay(o), OA(t.pos_profile.name, t.active_price_list, o), t.pos_profile && t.pos_profile.posa_local_storage && t.storageAvailable && !t.pos_profile.pose_use_limit_search)
            try {
              await Kd(o);
            } catch (d) {
              console.error("Failed to persist item details", d), t.markStorageUnavailable && t.markStorageUnavailable();
            }
          l && t.$forceUpdate();
        }
      } catch (o) {
        if (o.name !== "AbortError" && (console.error("Error fetching item details:", o), e.forEach((l) => {
          const s = FA(l.item_code);
          if (s !== null && (l.actual_qty = s), !l.item_uoms || l.item_uoms.length === 0) {
            const d = EA(l.item_code);
            d.length > 0 && (l.item_uoms = d);
          }
        }), !un())) {
          t.itemDetailsRetryCount += 1;
          const l = Math.min(32e3, 1e3 * Math.pow(2, t.itemDetailsRetryCount - 1));
          t.itemDetailsRetryTimeout = setTimeout(() => {
            t.update_items_details(e);
          }, l);
        }
      }
      this.cleanupBeforeDestroy = () => {
        t.abortController && t.abortController.abort();
      };
    },
    update_cur_items_details() {
      this.filtered_items && this.filtered_items.length > 0 && this.update_items_details(this.filtered_items);
    },
    async prePopulateStockCache(e) {
      if (!this.prePopulateInProgress && !(!Array.isArray(e) || e.length === 0)) {
        this.prePopulateInProgress = !0;
        try {
          const t = qQ(), n = Object.keys(t).length;
          if (UQ() && n >= e.length) {
            console.debug("Stock cache already initialized");
            return;
          }
          e.length > 500 ? console.info("Pre-populating stock cache for", e.length, "items in batches") : console.info("Pre-populating stock cache for", e.length, "items"), await NQ(e, this.pos_profile);
        } catch (t) {
          console.error("Failed to pre-populate stock cache:", t);
        } finally {
          this.prePopulateInProgress = !1;
        }
      }
    },
    applyCurrencyConversionToItems() {
      !this.items || !this.items.length || this.items.forEach((e) => this.applyCurrencyConversionToItem(e));
    },
    applyCurrencyConversionToItem(e) {
      if (!e) return;
      const t = this.pos_profile.currency;
      e.original_rate || (e.original_rate = e.rate, e.original_currency = e.currency || t);
      const n = e.original_rate, a = n * (e.plc_conversion_rate || 1);
      e.base_rate = a, e.base_price_list_rate = n;
      const r = e.original_currency === this.selected_currency ? n : n * (this.exchange_rate || 1);
      e.rate = this.flt(r, this.currency_precision), e.currency = this.selected_currency, e.price_list_rate = e.rate;
    },
    scan_barcoud() {
      const e = this;
      try {
        if (document._scannerAttached)
          return;
        onScan.attachTo(document, {
          suffixKeyCodes: [],
          keyCodeMapper: function(t) {
            return t.stopImmediatePropagation(), t.preventDefault(), onScan.decodeKeyEvent(t);
          },
          onScan: function(t) {
            setTimeout(() => {
              e.trigger_onscan(t);
            }, 300);
          }
        }), document._scannerAttached = !0;
      } catch (t) {
        console.warn("Scanner initialization error:", t.message);
      }
    },
    trigger_onscan(e) {
      this.search_from_scanner = !0, this.first_search = e, this.search = e, this.$nextTick(() => {
        this.filtered_items.length == 0 ? (this.eventBus.emit("show_message", {
          title: `No Item has this barcode "${e}"`,
          color: "error"
        }), frappe.utils.play_sound("error")) : this.enter_event(), this.clearSearch(), this.$refs.debounce_search && this.$refs.debounce_search.focus();
      });
    },
    generateWordCombinations(e) {
      const t = e.split(" ");
      t.length;
      const n = [];
      function a(r, i = []) {
        if (r.length === 0)
          n.push(i.join(" "));
        else
          for (let o = 0; o < r.length; o++) {
            const l = r.slice(), s = l.splice(o, 1);
            a(l.slice(), i.concat(s));
          }
      }
      return a(t), n;
    },
    clearSearch() {
      this.search_backup = this.first_search, this.first_search = "", this.search = "", this.loadVisibleItems(!0), this.get_items();
    },
    restoreSearch() {
      this.first_search === "" && (this.first_search = this.search_backup, this.search = this.search_backup);
    },
    handleItemSearchFocus() {
      this.first_search = "", this.search = "";
    },
    clearQty() {
      this.qty = null;
    },
    startCameraScanning() {
      this.$refs.cameraScanner && this.$refs.cameraScanner.startScanning();
    },
    onBarcodeScanned(e) {
      console.log("Barcode scanned:", e), this.search_from_scanner = !0, this.search = "", this.first_search = "", this.first_search = e, this.search = e, frappe.show_alert(
        {
          message: `Scanning for: ${e}`,
          indicator: "blue"
        },
        2
      ), setTimeout(() => {
        this.processScannedItem(e);
      }, 300);
    },
    async processScannedItem(e) {
      let t = e, n = null;
      this.pos_profile?.posa_scale_barcode_start && e.startsWith(this.pos_profile.posa_scale_barcode_start) && (t = this.get_search(e), n = parseFloat(this.get_item_qty(e)));
      let a = this.items.find((r) => r.barcode === t || Array.isArray(r.item_barcode) && r.item_barcode.some((o) => o.barcode === t) || Array.isArray(r.barcodes) && r.barcodes.some((o) => String(o) === t) || r.item_code === t);
      if (a) {
        console.log("Found item by processed code:", a), this.addScannedItemToInvoice(a, t, n);
        return;
      }
      try {
        const r = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_from_barcode",
          args: {
            selling_price_list: this.active_price_list,
            currency: this.pos_profile.currency,
            barcode: t
          }
        });
        if (r && r.message) {
          const i = r.message;
          this.items.push(i), this.searchCache && this.searchCache.clear(), await yQ(this.items), await _Q(this.customer_price_list, this.items), this.eventBus.emit("set_all_items", this.items), await this.update_items_details([i]), this.addScannedItemToInvoice(i, t, n);
          return;
        }
        frappe.show_alert(
          {
            message: `${this.__("Item not found")}: ${e}`,
            indicator: "red"
          },
          5
        );
        return;
      } catch (r) {
        console.error("Error fetching item from barcode:", r), frappe.show_alert(
          {
            message: `${this.__("Item not found")}: ${e}`,
            indicator: "red"
          },
          5
        );
        return;
      }
    },
    searchItemsByCode(e) {
      return this.items.filter((t) => {
        const n = e.toLowerCase(), a = t.barcode && t.barcode.toLowerCase().includes(n) || Array.isArray(t.barcodes) && t.barcodes.some((r) => String(r).toLowerCase().includes(n)) || Array.isArray(t.item_barcode) && t.item_barcode.some(
          (r) => r.barcode && r.barcode.toLowerCase().includes(n)
        );
        return t.item_code.toLowerCase().includes(n) || t.item_name.toLowerCase().includes(n) || a;
      });
    },
    async addScannedItemToInvoice(e, t, n = null) {
      console.log("Adding scanned item to invoice:", e, t);
      const a = { ...e };
      if (Array.isArray(a.item_barcode)) {
        const r = a.item_barcode.find((i) => i.barcode === t);
        if (r && r.posa_uom) {
          a.uom = r.posa_uom;
          try {
            const i = await frappe.call({
              method: "posawesome.posawesome.api.items.get_price_for_uom",
              args: {
                item_code: a.item_code,
                price_list: this.active_price_list,
                uom: r.posa_uom
              }
            });
            if (i.message) {
              const o = parseFloat(i.message);
              a.rate = o, a.price_list_rate = o, a.base_rate = o, a.base_price_list_rate = o, a._manual_rate_set = !0, a.skip_force_update = !0;
            }
          } catch (i) {
            console.error("Failed to fetch UOM price", i);
          }
        }
      }
      n !== null && !isNaN(n) && (a.qty = n, a._barcode_qty = !0), await this.add_item(a), frappe.show_alert(
        {
          message: `Added: ${e.item_name}`,
          indicator: "green"
        },
        3
      ), this.clearSearch(), this.$refs.debounce_search && this.$refs.debounce_search.focus();
    },
    showMultipleItemsDialog(e, t) {
      const n = new frappe.ui.Dialog({
        title: __("Multiple Items Found"),
        fields: [
          {
            fieldtype: "HTML",
            fieldname: "items_html",
            options: this.generateItemSelectionHTML(e, t)
          }
        ],
        primary_action_label: __("Cancel"),
        primary_action: () => n.hide()
      });
      n.show(), setTimeout(() => {
        e.forEach((a, r) => {
          n.$wrapper.find(`[data-item-index="${r}"]`).on("click", () => {
            this.addScannedItemToInvoice(a, t), n.hide();
          });
        });
      }, 100);
    },
    generateItemSelectionHTML(e, t) {
      let n = `<div class="mb-3"><strong>Scanned Code:</strong> ${t}</div>`;
      return n += '<div class="item-selection-list">', e.forEach((a, r) => {
        n += `
		<div class="item-option p-3 mb-2 border rounded cursor-pointer" data-item-index="${r}" style="border: 1px solid #ddd; cursor: pointer;">
			<div class="d-flex align-items-center">
			<img src="${a.image || tB}"
				style="width: 50px; height: 50px; object-fit: cover; margin-right: 15px;" />
			<div>
				<div class="font-weight-bold">${a.item_name}</div>
				<div class="text-muted small">${a.item_code}</div>
				<div class="text-primary">${this.format_currency(a.rate, this.pos_profile.currency, this.ratePrecision(a.rate))}</div>
			</div>
			</div>
		</div>
		`;
      }), n += "</div>", n;
    },
    handleItemNotFound(e) {
      console.warn("Item not found for scanned code:", e), frappe.show_alert(
        {
          message: `Item not found: ${e}`,
          indicator: "red"
        },
        5
      ), this.trigger_onscan(e);
    },
    currencySymbol(e) {
      return get_currency_symbol(e);
    },
    format_currency(e, t, n) {
      const a = typeof n == "number" ? n : this.currency_precision;
      return this.formatCurrencyPlain(e, a);
    },
    ratePrecision(e) {
      const t = typeof e == "string" ? parseFloat(e) : e;
      return Number.isInteger(t) ? 0 : this.currency_precision;
    },
    format_number(e, t) {
      const n = typeof t == "number" ? t : this.float_precision;
      return this.formatFloatPlain(e, n);
    },
    hasDecimalPrecision(e) {
      if (this.exchange_rate && this.exchange_rate !== 1) {
        let t = e * this.exchange_rate;
        return !Number.isInteger(t);
      }
      return !Number.isInteger(e);
    },
    // Force load quantities for all visible items
    forceLoadQuantities() {
      this.filtered_items && this.filtered_items.length > 0 && (this.filtered_items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      }), this.update_items_details(this.filtered_items));
    },
    // Ensure all items have quantities set
    ensureAllItemsHaveQuantities() {
      this.items && this.items.length > 0 && this.items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      }), this.filtered_items && this.filtered_items.length > 0 && this.filtered_items.forEach((e) => {
        (e.actual_qty === void 0 || e.actual_qty === null) && (e.actual_qty = 0);
      });
    },
    toggleItemSettings() {
      this.temp_hide_qty_decimals = this.hide_qty_decimals, this.temp_hide_zero_rate_items = this.hide_zero_rate_items, this.temp_show_available_qty = this.show_available_qty, this.temp_show_uom = this.show_uom, this.temp_enable_custom_items_per_page = this.enable_custom_items_per_page, this.temp_items_per_page = this.items_per_page, this.temp_force_server_items = !!(this.pos_profile && this.pos_profile.posa_force_server_items), this.show_item_settings = !0;
    },
    cancelItemSettings() {
      this.show_item_settings = !1;
    },
    applyItemSettings() {
      this.hide_qty_decimals = this.temp_hide_qty_decimals, this.hide_zero_rate_items = this.temp_hide_zero_rate_items, this.show_available_qty = this.temp_show_available_qty, this.show_uom = this.temp_show_uom, this.enable_custom_items_per_page = this.temp_enable_custom_items_per_page, this.enable_custom_items_per_page ? this.items_per_page = parseInt(this.temp_items_per_page) || 50 : this.items_per_page = 50, this.itemsPerPage = this.items_per_page, this.pos_profile.posa_force_server_items = this.temp_force_server_items ? 1 : 0, this.savePosProfileSetting("posa_force_server_items", this.pos_profile.posa_force_server_items), this.saveItemSettings(), this.show_item_settings = !1;
    },
    onDragStart(e, t) {
      this.isDragging = !0, e.dataTransfer.setData(
        "application/json",
        JSON.stringify({
          type: "item-from-selector",
          item: t
        })
      ), e.dataTransfer.effectAllowed = "copy", this.eventBus.emit("item-drag-start", t);
    },
    onDragEnd(e) {
      this.isDragging = !1, this.eventBus.emit("item-drag-end");
    },
    saveItemSettings() {
      if (this.localStorageAvailable)
        try {
          const e = {
            hide_qty_decimals: this.hide_qty_decimals,
            hide_zero_rate_items: this.hide_zero_rate_items,
            show_available_qty: this.show_available_qty,
            show_uom: this.show_uom,
            enable_custom_items_per_page: this.enable_custom_items_per_page,
            items_per_page: this.items_per_page
          };
          localStorage.setItem("posawesome_item_selector_settings", JSON.stringify(e));
        } catch (e) {
          console.error("Failed to save item selector settings:", e);
        }
    },
    savePosProfileSetting(e, t) {
      !this.pos_profile || !this.pos_profile.name || frappe.db.set_value("POS Profile", this.pos_profile.name, e, t ? 1 : 0).catch((n) => {
        console.error("Failed to save POS Profile setting", n);
      });
    },
    loadItemSettings() {
      if (this.localStorageAvailable)
        try {
          const e = localStorage.getItem("posawesome_item_selector_settings");
          if (e) {
            const t = JSON.parse(e);
            typeof t.hide_qty_decimals == "boolean" && (this.hide_qty_decimals = t.hide_qty_decimals), typeof t.hide_zero_rate_items == "boolean" && (this.hide_zero_rate_items = t.hide_zero_rate_items), typeof t.show_available_qty == "boolean" && (this.show_available_qty = t.show_available_qty), typeof t.show_uom == "boolean" && (this.show_uom = t.show_uom), typeof t.enable_custom_items_per_page == "boolean" && (this.enable_custom_items_per_page = t.enable_custom_items_per_page), typeof t.items_per_page == "number" && (this.items_per_page = t.items_per_page, this.itemsPerPage = this.items_per_page);
          }
        } catch (e) {
          console.error("Failed to load item selector settings:", e);
        }
    }
  },
  computed: {
    headers() {
      return this.getItemsHeaders();
    },
    filtered_items() {
      if (!this.items || this.items.length === 0)
        return [];
      const e = this.get_search(this.first_search).trim().toLowerCase();
      let t = [...this.items];
      e.length >= 3 && (t = t.filter((a) => {
        const r = [];
        return Array.isArray(a.item_barcode) ? r.push(...a.item_barcode.map((o) => o.barcode).filter(Boolean)) : a.item_barcode && r.push(String(a.item_barcode)), Array.isArray(a.barcodes) && r.push(...a.barcodes.map((o) => String(o)).filter(Boolean)), [
          a.item_code,
          a.item_name,
          a.barcode,
          a.description,
          ...r,
          ...this.pos_profile?.posa_search_serial_no && Array.isArray(a.serial_no_data) ? a.serial_no_data.map((o) => o.serial_no) : [],
          ...this.pos_profile?.posa_search_batch_no && Array.isArray(a.batch_no_data) ? a.batch_no_data.map((o) => o.batch_no) : []
        ].filter(Boolean).map((o) => o.toLowerCase()).some((o) => o.includes(e));
      })), this.item_group !== "ALL" && (t = t.filter(
        (a) => a.item_group && a.item_group.toLowerCase() === this.item_group.toLowerCase()
      )), this.hide_zero_rate_items && (t = t.filter((a) => parseFloat(a.rate || 0) > 0)), this.pos_profile?.posa_hide_variants_items && (t = t.filter((a) => !a.variant_of));
      const n = this.enable_custom_items_per_page ? this.items_per_page : this.itemsPerPage;
      return t = t.slice(0, n), t.forEach((a) => {
        (a.actual_qty === void 0 || a.actual_qty === null) && (a.actual_qty = 0);
      }), t;
    },
    debounce_search: {
      get() {
        return this.first_search;
      },
      set: $i.debounce(function(e) {
        this.first_search = (e || "").trim();
      }, 200)
    },
    debounce_qty: {
      get() {
        return this.qty === null || this.qty === "" ? "" : this.hide_qty_decimals ? Math.trunc(this.qty) : this.qty;
      },
      set: $i.debounce(function(e) {
        let t = parseFloat(String(e).replace(/,/g, ""));
        isNaN(t) && (t = null), this.hide_qty_decimals && t != null && (t = Math.trunc(t)), this.qty = t;
      }, 200)
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    active_price_list() {
      return this.customer_price_list || this.pos_profile && this.pos_profile.selling_price_list;
    }
  },
  created() {
    if (console.log("ItemsSelector created - starting initialization"), this.searchDebounce = $i.debounce(() => {
      this.get_items();
    }, 300), this.loadItemSettings(), pu.then(async () => {
      try {
        if (!this.pos_profile || !this.pos_profile.name) {
          if (frappe.boot && frappe.boot.pos_profile)
            this.pos_profile = frappe.boot.pos_profile;
          else if (frappe.router && frappe.router.current_route) {
            const e = frappe.router.current_route;
            e.pos_profile && (this.pos_profile = e.pos_profile);
          }
          (!this.pos_profile || !this.pos_profile.name) && (this.pos_profile = await iw());
        }
        this.pos_profile && this.pos_profile.name ? (console.log("Loading items with POS Profile:", this.pos_profile.name), this.get_items_groups(), await this.initializeItems()) : console.warn("No POS Profile available during initialization");
      } catch (e) {
        console.error("Error during initialization:", e);
      }
    }), this.eventBus.on("register_pos_profile", async (e) => {
      this.pos_profile = e.pos_profile, this.get_items_groups(), await this.initializeItems(), this.items_view = this.pos_profile.posa_default_card_view ? "card" : "list";
    }), this.eventBus.on("update_cur_items_details", () => {
      this.update_cur_items_details();
    }), this.eventBus.on("update_offers_counters", (e) => {
      this.offersCount = e.offersCount, this.appliedOffersCount = e.appliedOffersCount;
    }), this.eventBus.on("update_coupons_counters", (e) => {
      this.couponsCount = e.couponsCount, this.appliedCouponsCount = e.appliedCouponsCount;
    }), this.eventBus.on("update_customer_price_list", (e) => {
      this.customer_price_list = e;
    }), this.eventBus.on("update_customer", (e) => {
      this.customer = e;
    }), this.eventBus.on("item_group_changed", (e) => {
      this.item_group = e;
    }), this.eventBus.on("force_reload_items", async () => {
      await this.ensureStorageHealth(), this.items_loaded = !1, un() ? this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) ? (await J_(), await this.get_items(!0)) : await this.get_items() : (this.pos_profile && (!this.pos_profile.posa_local_storage || !this.storageAvailable) && await J_(), await this.get_items(!0));
    }), this.eventBus.on("server-online", async () => {
      this.items && this.items.length > 0 && await this.update_items_details(this.items);
    }), typeof Worker < "u")
      try {
        const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
        this.itemWorker = new Worker(e, { type: "classic" }), this.itemWorker.onerror = function(t) {
          console.error("Worker error:", t), console.error("Message:", t.message), console.error("Filename:", t.filename), console.error("Line number:", t.lineno);
        }, console.log("Created worker");
      } catch (e) {
        console.error("Failed to start item worker", e), this.itemWorker = null;
      }
    if (typeof Worker < "u")
      try {
        const e = "/assets/posawesome/dist/js/posapp/workers/itemWorker.js";
        this.itemWorker = new Worker(e, { type: "classic" }), this.itemWorker.onerror = function(t) {
          console.error("Worker error:", t), console.error("Message:", t.message), console.error("Filename:", t.filename), console.error("Line number:", t.lineno);
        }, console.log("Created worker");
      } catch (e) {
        console.error("Failed to start item worker", e), this.itemWorker = null;
      }
    this.update_cur_items_details(), this.refresh_interval = setInterval(() => {
      this.filtered_items && this.filtered_items.length > 0 && this.update_cur_items_details();
    }, 3e4), this.eventBus.on("update_currency", (e) => {
      this.selected_currency = e.currency, this.exchange_rate = e.exchange_rate, this.applyCurrencyConversionToItems(), this.update_cur_items_details();
    });
  },
  async mounted() {
    if (this.items = [], console.log("[ItemsSelector] mounted: cleared items array to prevent duplicates"), !this.pos_profile || !this.pos_profile.name)
      try {
        frappe.boot && frappe.boot.pos_profile ? this.pos_profile = frappe.boot.pos_profile : window.cur_pos && window.cur_pos.pos_profile && (this.pos_profile = window.cur_pos.pos_profile);
      } catch (e) {
        console.warn("Could not get POS profile in mounted:", e);
      }
    this.pos_profile && this.pos_profile.name && !this.items_loaded && (this.get_items_groups(), await this.get_items()), this.pos_profile?.posa_enable_barcode_scanning && this.scan_barcoud(), this.itemsPerPage = this.items_per_page, window.addEventListener("resize", this.checkItemContainerOverflow), this.$nextTick(this.checkItemContainerOverflow);
  },
  beforeUnmount() {
    if (this.refresh_interval && clearInterval(this.refresh_interval), this.itemDetailsRetryTimeout && clearTimeout(this.itemDetailsRetryTimeout), this.itemDetailsRetryCount = 0, this.cleanupBeforeDestroy && this.cleanupBeforeDestroy(), document._scannerAttached)
      try {
        onScan.detachFrom(document), document._scannerAttached = !1;
      } catch (e) {
        console.warn("Scanner detach error:", e.message);
      }
    this.itemWorker && this.itemWorker.terminate(), this.eventBus.off("update_currency"), this.eventBus.off("server-online"), this.eventBus.off("register_pos_profile"), this.eventBus.off("update_cur_items_details"), this.eventBus.off("update_offers_counters"), this.eventBus.off("update_coupons_counters"), this.eventBus.off("update_customer_price_list"), this.eventBus.off("update_customer"), this.eventBus.off("force_reload_items"), window.removeEventListener("resize", this.checkItemContainerOverflow);
  }
}, gee = { class: "dynamic-padding" }, yee = { class: "sticky-header" }, bee = { class: "settings-container" }, wee = {
  key: 0,
  class: "items-card-container"
}, kee = ["onClick", "onDragstart"], See = { class: "card-item-image-container" }, Cee = { class: "image-placeholder" }, Aee = { class: "card-item-content" }, xee = { class: "card-item-header" }, Tee = { class: "card-item-name" }, Iee = { class: "card-item-rate" }, Eee = {
  key: 1,
  class: "items-table-container"
}, Pee = { class: "text-primary" }, Oee = {
  key: 0,
  class: "text-success"
};
function Dee(e, t, n, a, r, i) {
  const o = J("v-progress-linear"), l = J("LoadingOverlay"), s = J("v-btn"), d = J("v-text-field"), u = J("v-col"), f = J("v-checkbox"), h = J("v-spacer"), y = J("v-card-title"), p = J("v-divider"), w = J("v-switch"), b = J("v-card-text"), v = J("v-card-actions"), g = J("v-card"), k = J("v-dialog"), A = J("v-row"), C = J("v-icon"), D = J("v-img"), P = J("v-data-table-virtual"), O = J("v-btn-toggle"), I = J("CameraScanner");
  return te(), Oe("div", {
    style: Je(e.responsiveStyles)
  }, [
    _(g, {
      class: Ae([
        "selection mx-auto my-0 py-0 mt-3 pos-card dynamic-card resizable",
        i.isDarkTheme ? "" : "bg-grey-lighten-5",
        e.rtlClasses
      ]),
      style: Je({
        height: e.responsiveStyles["--container-height"],
        maxHeight: e.responsiveStyles["--container-height"],
        backgroundColor: i.isDarkTheme ? "#121212" : "",
        resize: "vertical",
        overflow: "auto",
        position: "relative"
      })
    }, {
      default: E(() => [
        _(o, {
          active: e.loading,
          indeterminate: e.loading,
          absolute: "",
          location: "top",
          color: "info"
        }, null, 8, ["active", "indeterminate"]),
        _(l, {
          loading: e.loading || e.isBackgroundLoading,
          message: e.__("Loading item data..."),
          progress: e.loadProgress
        }, null, 8, ["loading", "message", "progress"]),
        T("div", gee, [
          T("div", yee, [
            _(A, { class: "items" }, {
              default: E(() => [
                _(u, { class: "pb-0" }, {
                  default: E(() => [
                    _(d, {
                      density: "compact",
                      clearable: "",
                      autofocus: "",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Search Items"),
                      hint: "Search by item code, serial number, batch no or barcode",
                      "hide-details": "",
                      modelValue: i.debounce_search,
                      "onUpdate:modelValue": t[0] || (t[0] = (x) => i.debounce_search = x),
                      onKeydown: [
                        Ll(i.esc_event, ["esc"]),
                        Ll(i.search_onchange, ["enter"])
                      ],
                      "onClick:clear": i.clearSearch,
                      "prepend-inner-icon": "mdi-magnify",
                      onFocus: i.handleItemSearchFocus,
                      ref: "debounce_search"
                    }, mr({ _: 2 }, [
                      e.pos_profile.posa_enable_camera_scanning ? {
                        name: "append-inner",
                        fn: E(() => [
                          _(s, {
                            icon: "mdi-camera",
                            size: "small",
                            color: "primary",
                            variant: "text",
                            onClick: i.startCameraScanning,
                            title: e.__("Scan with Camera")
                          }, null, 8, ["onClick", "title"])
                        ]),
                        key: "0"
                      } : void 0
                    ]), 1032, ["label", "modelValue", "onKeydown", "onClick:clear", "onFocus"])
                  ]),
                  _: 1
                }),
                e.pos_profile.posa_input_qty ? (te(), Le(u, {
                  key: 0,
                  cols: "3",
                  class: "pb-0"
                }, {
                  default: E(() => [
                    _(d, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("QTY"),
                      "hide-details": "",
                      modelValue: i.debounce_qty,
                      "onUpdate:modelValue": t[1] || (t[1] = (x) => i.debounce_qty = x),
                      type: "text",
                      onKeydown: [
                        Ll(i.enter_event, ["enter"]),
                        Ll(i.esc_event, ["esc"])
                      ],
                      onFocus: i.clearQty
                    }, null, 8, ["label", "modelValue", "onKeydown", "onFocus"])
                  ]),
                  _: 1
                })) : ke("", !0),
                e.pos_profile.posa_new_line ? (te(), Le(u, {
                  key: 1,
                  cols: "2",
                  class: "pb-0"
                }, {
                  default: E(() => [
                    _(f, {
                      modelValue: e.new_line,
                      "onUpdate:modelValue": t[2] || (t[2] = (x) => e.new_line = x),
                      color: "accent",
                      value: "true",
                      label: "NLine",
                      density: "default",
                      "hide-details": ""
                    }, null, 8, ["modelValue"])
                  ]),
                  _: 1
                })) : ke("", !0),
                _(u, {
                  cols: "12",
                  class: "dynamic-margin-xs"
                }, {
                  default: E(() => [
                    T("div", bee, [
                      _(s, {
                        density: "compact",
                        variant: "text",
                        color: "primary",
                        "prepend-icon": "mdi-cog-outline",
                        onClick: i.toggleItemSettings,
                        class: "settings-btn"
                      }, {
                        default: E(() => [
                          ae(j(e.__("Settings")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      _(h),
                      _(s, {
                        density: "compact",
                        variant: "text",
                        color: "primary",
                        "prepend-icon": "mdi-refresh",
                        onClick: i.forceReloadItems,
                        class: "settings-btn"
                      }, {
                        default: E(() => [
                          ae(j(e.__("Reload Items")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      _(k, {
                        modelValue: e.show_item_settings,
                        "onUpdate:modelValue": t[11] || (t[11] = (x) => e.show_item_settings = x),
                        "max-width": "400px"
                      }, {
                        default: E(() => [
                          _(g, null, {
                            default: E(() => [
                              _(y, { class: "text-h6 pa-4 d-flex align-center" }, {
                                default: E(() => [
                                  T("span", null, j(e.__("Item Selector Settings")), 1),
                                  _(h),
                                  _(s, {
                                    icon: "mdi-close",
                                    variant: "text",
                                    density: "compact",
                                    onClick: t[3] || (t[3] = (x) => e.show_item_settings = !1)
                                  })
                                ]),
                                _: 1
                              }),
                              _(p),
                              _(b, { class: "pa-4" }, {
                                default: E(() => [
                                  _(w, {
                                    modelValue: e.temp_hide_qty_decimals,
                                    "onUpdate:modelValue": t[4] || (t[4] = (x) => e.temp_hide_qty_decimals = x),
                                    label: e.__("Hide quantity decimals"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_hide_zero_rate_items,
                                    "onUpdate:modelValue": t[5] || (t[5] = (x) => e.temp_hide_zero_rate_items = x),
                                    label: e.__("Hide zero rated items"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_show_available_qty,
                                    "onUpdate:modelValue": t[6] || (t[6] = (x) => e.temp_show_available_qty = x),
                                    label: e.__("Show Available Qty"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_show_uom,
                                    "onUpdate:modelValue": t[7] || (t[7] = (x) => e.temp_show_uom = x),
                                    label: e.__("Show UOM"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(w, {
                                    modelValue: e.temp_enable_custom_items_per_page,
                                    "onUpdate:modelValue": t[8] || (t[8] = (x) => e.temp_enable_custom_items_per_page = x),
                                    label: e.__("Custom items per page"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  _(f, {
                                    modelValue: e.temp_force_server_items,
                                    "onUpdate:modelValue": t[9] || (t[9] = (x) => e.temp_force_server_items = x),
                                    label: e.__("Always fetch items from server (ignore local cache)"),
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "mb-2"
                                  }, null, 8, ["modelValue", "label"]),
                                  e.temp_enable_custom_items_per_page ? (te(), Le(d, {
                                    key: 0,
                                    modelValue: e.temp_items_per_page,
                                    "onUpdate:modelValue": t[10] || (t[10] = (x) => e.temp_items_per_page = x),
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                    "hide-details": "",
                                    label: e.__("Items per page"),
                                    class: "mb-2 dark-field"
                                  }, null, 8, ["modelValue", "bg-color", "label"])) : ke("", !0)
                                ]),
                                _: 1
                              }),
                              _(v, { class: "pa-4 pt-0" }, {
                                default: E(() => [
                                  _(s, {
                                    color: "error",
                                    variant: "text",
                                    onClick: i.cancelItemSettings
                                  }, {
                                    default: E(() => [
                                      ae(j(e.__("Cancel")), 1)
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"]),
                                  _(h),
                                  _(s, {
                                    color: "primary",
                                    variant: "tonal",
                                    onClick: i.applyItemSettings
                                  }, {
                                    default: E(() => [
                                      ae(j(e.__("Apply")), 1)
                                    ]),
                                    _: 1
                                  }, 8, ["onClick"])
                                ]),
                                _: 1
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _(A, { class: "items" }, {
            default: E(() => [
              _(u, {
                cols: "12",
                class: "pt-0 mt-0"
              }, {
                default: E(() => [
                  e.items_view == "card" ? (te(), Oe("div", wee, [
                    T("div", {
                      class: Ae(["items-card-grid", { "item-container": e.isOverflowing }]),
                      ref: "itemsContainer",
                      onScrollPassive: t[13] || (t[13] = (...x) => i.onCardScroll && i.onCardScroll(...x))
                    }, [
                      (te(!0), Oe(Ge, null, ln(i.filtered_items, (x) => (te(), Oe("div", {
                        key: x.item_code,
                        class: "card-item-card",
                        onClick: (M) => i.add_item(x),
                        draggable: !0,
                        onDragstart: (M) => i.onDragStart(M, x),
                        onDragend: t[12] || (t[12] = (...M) => i.onDragEnd && i.onDragEnd(...M))
                      }, [
                        T("div", See, [
                          _(D, {
                            src: x.image || e.placeholderImage,
                            class: "card-item-image",
                            "aspect-ratio": "1",
                            alt: x.item_name
                          }, {
                            placeholder: E(() => [
                              T("div", Cee, [
                                _(C, {
                                  size: "40",
                                  color: "grey-lighten-2"
                                }, {
                                  default: E(() => t[15] || (t[15] = [
                                    ae("mdi-image", -1)
                                  ])),
                                  _: 1,
                                  __: [15]
                                })
                              ])
                            ]),
                            _: 2
                          }, 1032, ["src", "alt"])
                        ]),
                        T("div", Aee, [
                          T("div", xee, [
                            T("h4", Tee, j(x.item_name), 1),
                            T("span", Iee, j(i.currencySymbol(x.original_currency || e.pos_profile.currency)) + " " + j(i.format_currency(x.base_price_list_rate || x.rate, x.original_currency || e.pos_profile.currency, i.ratePrecision(x.base_price_list_rate || x.rate))), 1)
                          ])
                        ])
                      ], 40, kee))), 128))
                    ], 34)
                  ])) : (te(), Oe("div", Eee, [
                    _(P, {
                      headers: i.headers,
                      items: i.filtered_items,
                      class: "sleek-data-table overflow-y-auto",
                      style: { height: "calc(100% - 80px)" },
                      "item-key": "item_code",
                      "fixed-header": "",
                      height: "100%",
                      "header-props": e.headerProps,
                      "no-data-text": e.__("No items found"),
                      "onClick:row": i.click_item_row,
                      onScrollPassive: i.onListScroll
                    }, {
                      "item.rate": E(({ item: x }) => [
                        T("div", null, [
                          T("div", Pee, j(i.currencySymbol(x.original_currency || e.pos_profile.currency)) + " " + j(i.format_currency(
                            x.base_price_list_rate || x.rate,
                            x.original_currency || e.pos_profile.currency,
                            i.ratePrecision(x.base_price_list_rate || x.rate)
                          )), 1),
                          e.pos_profile.posa_allow_multi_currency && e.selected_currency !== e.pos_profile.currency ? (te(), Oe("div", Oee, j(i.currencySymbol(e.selected_currency)) + " " + j(i.format_currency(
                            x.rate,
                            e.selected_currency,
                            i.ratePrecision(x.rate)
                          )), 1)) : ke("", !0)
                        ])
                      ]),
                      "item.actual_qty": E(({ item: x }) => [
                        T("span", {
                          class: Ae(["golden--text", { "negative-number": e.isNegative(x.actual_qty) }])
                        }, j(i.format_number(x.actual_qty, e.hide_qty_decimals ? 0 : 4)), 3)
                      ]),
                      _: 1
                    }, 8, ["headers", "items", "header-props", "no-data-text", "onClick:row", "onScrollPassive"])
                  ]))
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ])
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(g, {
      class: "cards mb-0 mt-3 dynamic-padding resizable",
      style: { resize: "vertical", overflow: "auto" }
    }, {
      default: E(() => [
        _(A, {
          "no-gutters": "",
          align: "center",
          justify: "center",
          class: "dynamic-spacing-sm"
        }, {
          default: E(() => [
            e.pos_profile.posa_enable_price_list_dropdown !== !1 ? (te(), Le(u, {
              key: 0,
              cols: "12",
              class: "mb-2"
            }, {
              default: E(() => [
                _(d, {
                  density: "compact",
                  variant: "solo",
                  color: "primary",
                  label: e.frappe._("Price List"),
                  "hide-details": "",
                  "model-value": i.active_price_list,
                  readonly: ""
                }, null, 8, ["label", "model-value"])
              ]),
              _: 1
            })) : ke("", !0),
            _(u, {
              cols: "3",
              class: "dynamic-margin-xs"
            }, {
              default: E(() => [
                _(O, {
                  modelValue: e.items_view,
                  "onUpdate:modelValue": t[14] || (t[14] = (x) => e.items_view = x),
                  color: "primary",
                  group: "",
                  density: "compact",
                  rounded: ""
                }, {
                  default: E(() => [
                    _(s, {
                      size: "small",
                      value: "list"
                    }, {
                      default: E(() => [
                        ae(j(e.__("List")), 1)
                      ]),
                      _: 1
                    }),
                    _(s, {
                      size: "small",
                      value: "card"
                    }, {
                      default: E(() => [
                        ae(j(e.__("Card")), 1)
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                }, 8, ["modelValue"])
              ]),
              _: 1
            }),
            _(u, {
              cols: "5",
              class: "dynamic-margin-xs"
            }, {
              default: E(() => [
                _(s, {
                  size: "small",
                  block: "",
                  color: "warning",
                  variant: "text",
                  onClick: i.show_offers,
                  class: "action-btn-consistent"
                }, {
                  default: E(() => [
                    ae(j(e.offersCount) + " " + j(e.__("Offers")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            }),
            _(u, {
              cols: "4",
              class: "dynamic-margin-xs"
            }, {
              default: E(() => [
                _(s, {
                  size: "small",
                  block: "",
                  color: "primary",
                  variant: "text",
                  onClick: i.show_coupons,
                  class: "action-btn-consistent"
                }, {
                  default: E(() => [
                    ae(j(e.couponsCount) + " " + j(e.__("Coupons")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    e.pos_profile.posa_enable_camera_scanning ? (te(), Le(I, {
      key: 0,
      ref: "cameraScanner",
      "scan-type": e.pos_profile.posa_camera_scan_type || "Both",
      onBarcodeScanned: i.onBarcodeScanned
    }, null, 8, ["scan-type", "onBarcodeScanned"])) : ke("", !0)
  ], 4);
}
const Bee = /* @__PURE__ */ on(pee, [["render", Dee], ["__scopeId", "data-v-ccae45ca"]]), Vee = {
  data: () => ({
    customerDialog: !1,
    confirmDialog: !1,
    pos_profile: "",
    customer_id: "",
    customer_name: "",
    tax_id: "",
    mobile_no: "",
    address_line1: "",
    city: "",
    country: "Pakistan",
    email_id: "",
    referral_code: "",
    birthday: "",
    birthday_menu: !1,
    group: "",
    groups: [],
    territory: "",
    territorys: [],
    genders: [],
    customer_type: "Individual",
    gender: "",
    loyalty_points: null,
    loyalty_program: null,
    hideNonEssential: !0,
    // Default to hiding non-essential fields
    countries: [
      "Afghanistan",
      "Australia",
      "Bahrain",
      "Bangladesh",
      "Canada",
      "China",
      "Denmark",
      "France",
      "Germany",
      "India",
      "Indonesia",
      "Italy",
      "Japan",
      "Kuwait",
      "Malaysia",
      "Nepal",
      "Netherlands",
      "New Zealand",
      "Norway",
      "Oman",
      "Pakistan",
      "Philippines",
      "Qatar",
      "Saudi Arabia",
      "Singapore",
      "South Korea",
      "Spain",
      "Sri Lanka",
      "Sweden",
      "Switzerland",
      "Syria",
      "Thailand",
      "United Arab Emirates",
      "United Kingdom",
      "United States",
      "Vietnam",
      "Yemen"
    ]
  }),
  watch: {
    hideNonEssential(e) {
      typeof localStorage < "u" && localStorage.setItem("posawesome_hide_non_essential_fields", JSON.stringify(e));
    },
    birthday(e) {
      if (e && /^\d{8}$/.test(e))
        try {
          const t = e.substring(0, 2), n = e.substring(2, 4), a = e.substring(4);
          this.birthday = `${t}-${n}-${a}`, this.updateCalendarDate(t, n, a);
        } catch (t) {
          console.error("Error processing 8-digit date:", t);
        }
      else if (e && /^\d{2}-\d{2}-\d{4}$/.test(e))
        try {
          const t = e.split("-"), n = t[0], a = t[1], r = t[2];
          this.updateCalendarDate(n, a, r);
        } catch (t) {
          console.error("Error processing formatted date:", t);
        }
    },
    // Add a watcher for the calendar menu to ensure it shows the right date when opened
    birthday_menu(e) {
      if (e && this.birthday && /^\d{2}-\d{2}-\d{4}$/.test(this.birthday))
        try {
          const t = this.birthday.split("-"), n = t[0], a = t[1], r = t[2];
          this.$nextTick(() => {
            this.updateCalendarDate(n, a, r);
          });
        } catch (t) {
          console.error("Error updating calendar on menu open:", t);
        }
    }
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  methods: {
    // Add a new method to update calendar date
    updateCalendarDate(e, t, n) {
      const a = this.birthday_menu;
      this.birthday_menu = !1, this.$nextTick(() => {
        const r = `${n}-${t}-${e}`;
        setTimeout(() => {
          this.$refs.birthday_menu && (this.$refs.birthday_menu.date = r, a && (this.birthday_menu = !0));
        }, 50);
      });
    },
    confirm_close() {
      this.customer_name || this.tax_id || this.mobile_no || this.address_line1 || this.email_id || this.referral_code || this.birthday ? this.confirmDialog = !0 : this.close_dialog();
    },
    confirmClose() {
      this.confirmDialog = !1, this.close_dialog();
    },
    close_dialog() {
      this.customerDialog = !1, this.clear_customer();
    },
    clear_customer() {
      this.customer_name = "", this.tax_id = "", this.mobile_no = "", this.address_line1 = "", this.city = "", this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan", this.email_id = "", this.referral_code = "", this.birthday = "", this.group = frappe.defaults.get_user_default("Customer Group"), this.territory = frappe.defaults.get_user_default("Territory"), this.customer_id = "", this.customer_type = "Individual", this.gender = "", this.loyalty_points = null, this.loyalty_program = null;
    },
    getCustomerGroups() {
      if (this.groups.length > 0) return;
      const e = this;
      frappe.db.get_list("Customer Group", {
        fields: ["name"],
        filters: { is_group: 0 },
        limit: 1e3,
        order_by: "name"
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.groups.push(n.name);
        });
      });
    },
    getCustomerTerritorys() {
      if (this.territorys.length > 0) return;
      const e = this;
      frappe.db.get_list("Territory", {
        fields: ["name"],
        filters: { is_group: 0 },
        limit: 5e3,
        order_by: "name"
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.territorys.push(n.name);
        });
      });
    },
    getGenders() {
      const e = this;
      frappe.db.get_list("Gender", {
        fields: ["name"],
        page_length: 10
      }).then((t) => {
        t.length > 0 && t.forEach((n) => {
          e.genders.push(n.name);
        });
      });
    },
    formatBirthdayOnInput() {
      if (this.birthday && /^\d{8}$/.test(this.birthday))
        try {
          const e = this.birthday.substring(0, 2), t = this.birthday.substring(2, 4), n = this.birthday.substring(4);
          this.birthday = `${e}-${t}-${n}`;
        } catch (e) {
          console.error("Error formatting date:", e);
        }
    },
    submit_dialog() {
      const e = this;
      if (!this.customer_name) {
        frappe.throw(__("Customer Name is required"));
        return;
      }
      if (!this.group) {
        frappe.throw(__("Customer group is required"));
        return;
      }
      if (!this.territory) {
        frappe.throw(__("Customer territory is required"));
        return;
      }
      let t = null;
      if (this.birthday)
        try {
          if (/^\d{8}$/.test(this.birthday)) {
            const r = this.birthday.substring(0, 2), i = this.birthday.substring(2, 4);
            t = `${this.birthday.substring(4)}-${i}-${r}`;
          } else if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(this.birthday)) {
            const r = this.birthday.split("-");
            if (r.length === 3) {
              const i = r[0].padStart(2, "0"), o = r[1].padStart(2, "0");
              t = `${r[2]}-${o}-${i}`;
            }
          } else if (/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(this.birthday)) {
            const r = this.birthday.split("/");
            if (r.length === 3) {
              const i = r[0].padStart(2, "0"), o = r[1].padStart(2, "0");
              t = `${r[2]}-${o}-${i}`;
            }
          } else if (this.birthday)
            try {
              const r = new Date(this.birthday);
              if (!isNaN(r.getTime())) {
                const i = r.getFullYear(), o = String(r.getMonth() + 1).padStart(2, "0"), l = String(r.getDate()).padStart(2, "0");
                t = `${i}-${o}-${l}`;
              }
            } catch (r) {
              console.error("Failed to parse date:", r);
            }
        } catch (r) {
          console.error("Error formatting date:", r), t = null;
        }
      const n = {
        customer_id: this.customer_id,
        customer_name: this.customer_name,
        tax_id: this.tax_id,
        mobile_no: this.mobile_no,
        address_line1: this.address_line1,
        city: this.city,
        country: this.country,
        email_id: this.email_id,
        referral_code: this.referral_code,
        birthday: t || this.birthday,
        customer_group: this.group,
        territory: this.territory,
        customer_type: this.customer_type,
        gender: this.gender
      }, a = {
        ...n,
        company: e.pos_profile.company,
        pos_profile_doc: JSON.stringify(e.pos_profile),
        method: this.customer_id ? "update" : "create"
      };
      if (un()) {
        GQ({ args: a }), e.eventBus.emit("show_message", { title: __("Customer saved offline"), color: "warning" }), n.name = this.customer_name, e.eventBus.emit("add_customer_to_list", n), e.eventBus.emit("set_customer", n.name), e.close_dialog();
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.customers.create_customer",
        args: a,
        callback: (r) => {
          if (!r.exc && r.message.name) {
            let i = __("Customer created successfully.");
            e.customer_id && (i = __("Customer updated successfully.")), e.eventBus.emit("show_message", {
              title: i,
              color: "success"
            }), n.name = r.message.name, frappe.utils.play_sound("submit"), e.eventBus.emit("add_customer_to_list", n), e.eventBus.emit("set_customer", r.message.name), e.eventBus.emit("fetch_customer_details"), e.close_dialog();
          } else
            frappe.utils.play_sound("error"), e.eventBus.emit("show_message", {
              title: __("Customer creation failed."),
              color: "error"
            });
        }
      });
    },
    onDateSelect() {
      if (this.birthday_menu = !1, this.birthday)
        try {
          let e;
          if (typeof this.birthday == "object")
            e = this.birthday;
          else if (typeof this.birthday == "string" && (this.birthday.includes("GMT") || this.birthday.includes("T")))
            e = new Date(this.birthday);
          else
            return;
          const t = e.getFullYear(), n = String(e.getMonth() + 1).padStart(2, "0"), a = String(e.getDate()).padStart(2, "0");
          this.birthday = `${a}-${n}-${t}`;
        } catch (e) {
          console.error("Error formatting date from picker:", e);
        }
    }
  },
  created: function() {
    if (typeof localStorage < "u") {
      const e = localStorage.getItem("posawesome_hide_non_essential_fields");
      e !== null ? this.hideNonEssential = JSON.parse(e) : (this.hideNonEssential = !0, localStorage.setItem("posawesome_hide_non_essential_fields", JSON.stringify(!0)));
    }
    this.eventBus.on("open_update_customer", (e) => {
      this.customerDialog = !0, e ? (this.customer_name = e.customer_name, this.customer_id = e.name, this.address_line1 = e.address_line1 || "", this.city = e.city || "", this.country = e.country || this.pos_profile && this.pos_profile.posa_default_country || "Pakistan", this.tax_id = e.tax_id, this.mobile_no = e.mobile_no, this.email_id = e.email_id, this.referral_code = e.referral_code, this.birthday = e.birthday, this.group = e.customer_group, this.territory = e.territory, this.loyalty_points = e.loyalty_points, this.loyalty_program = e.loyalty_program, this.gender = e.gender) : this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.eventBus.on("payments_register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.country = this.pos_profile && this.pos_profile.posa_default_country || "Pakistan";
    }), this.getCustomerGroups(), this.getCustomerTerritorys(), this.getGenders(), this.group = frappe.defaults.get_user_default("Customer Group"), this.territory = frappe.defaults.get_user_default("Territory");
  }
}, Mee = {
  key: 0,
  class: "text-h5 text-primary"
}, Lee = {
  key: 1,
  class: "text-h5 text-primary"
};
function Ree(e, t, n, a, r, i) {
  const o = J("v-spacer"), l = J("v-switch"), s = J("v-card-title"), d = J("v-text-field"), u = J("v-col"), f = J("v-select"), h = J("v-autocomplete"), y = J("v-row"), p = J("v-container"), w = J("v-card-text"), b = J("v-btn"), v = J("v-card-actions"), g = J("v-card"), k = J("v-dialog");
  return te(), Le(y, { justify: "center" }, {
    default: E(() => [
      _(k, {
        modelValue: e.customerDialog,
        "onUpdate:modelValue": t[15] || (t[15] = (A) => e.customerDialog = A),
        "max-width": "600px",
        persistent: ""
      }, {
        default: E(() => [
          _(g, null, {
            default: E(() => [
              _(s, { class: "d-flex align-center" }, {
                default: E(() => [
                  e.customer_id ? (te(), Oe("span", Mee, j(e.__("Update Customer")), 1)) : (te(), Oe("span", Lee, j(e.__("Create Customer")), 1)),
                  _(o),
                  _(l, {
                    modelValue: e.hideNonEssential,
                    "onUpdate:modelValue": t[0] || (t[0] = (A) => e.hideNonEssential = A),
                    density: "compact",
                    inset: "",
                    "hide-details": "",
                    color: "primary",
                    label: e.__("Hide Non Essential Fields")
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              }),
              _(w, { class: "pa-0" }, {
                default: E(() => [
                  _(p, null, {
                    default: E(() => [
                      _(y, null, {
                        default: E(() => [
                          _(u, { cols: "12" }, {
                            default: E(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Customer Name") + " *",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                class: "dark-field",
                                modelValue: e.customer_name,
                                "onUpdate:modelValue": t[1] || (t[1] = (A) => e.customer_name = A)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: E(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Tax ID"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.tax_id,
                                "onUpdate:modelValue": t[2] || (t[2] = (A) => e.tax_id = A)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: E(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Mobile No"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.mobile_no,
                                "onUpdate:modelValue": t[3] || (t[3] = (A) => e.mobile_no = A)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          e.hideNonEssential ? ke("", !0) : (te(), Le(u, {
                            key: 0,
                            cols: "12"
                          }, {
                            default: E(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.__("Address Line 1"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                class: "dark-field",
                                modelValue: e.address_line1,
                                "onUpdate:modelValue": t[4] || (t[4] = (A) => e.address_line1 = A)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ke("", !0) : (te(), Le(u, {
                            key: 1,
                            cols: "12",
                            sm: "6"
                          }, {
                            default: E(() => [
                              _(d, {
                                modelValue: e.city,
                                "onUpdate:modelValue": t[5] || (t[5] = (A) => e.city = A),
                                variant: "outlined",
                                density: "compact",
                                label: e.__("City"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ke("", !0) : (te(), Le(u, {
                            key: 2,
                            cols: "12",
                            sm: "6"
                          }, {
                            default: E(() => [
                              _(f, {
                                modelValue: e.country,
                                "onUpdate:modelValue": t[6] || (t[6] = (A) => e.country = A),
                                items: e.countries,
                                variant: "outlined",
                                density: "compact",
                                label: e.__("Country"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "items", "label", "bg-color"])
                            ]),
                            _: 1
                          })),
                          _(u, { cols: "6" }, {
                            default: E(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Email Id"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.email_id,
                                "onUpdate:modelValue": t[7] || (t[7] = (A) => e.email_id = A)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: E(() => [
                              _(f, {
                                density: "compact",
                                label: "Gender",
                                items: e.genders,
                                modelValue: e.gender,
                                "onUpdate:modelValue": t[8] || (t[8] = (A) => e.gender = A),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["items", "modelValue", "bg-color"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: E(() => [
                              _(d, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Referral Code"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.referral_code,
                                "onUpdate:modelValue": t[9] || (t[9] = (A) => e.referral_code = A)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, { cols: "6" }, {
                            default: E(() => [
                              _(d, {
                                modelValue: e.birthday,
                                "onUpdate:modelValue": [
                                  t[10] || (t[10] = (A) => e.birthday = A),
                                  i.formatBirthdayOnInput
                                ],
                                label: e.frappe._("Birthday (DD-MM-YYYY)"),
                                density: "compact",
                                clearable: "",
                                "hide-details": "",
                                color: "primary",
                                placeholder: "DD-MM-YYYY",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "onUpdate:modelValue", "bg-color"])
                            ]),
                            _: 1
                          }),
                          e.hideNonEssential ? ke("", !0) : (te(), Le(u, {
                            key: 3,
                            cols: "6"
                          }, {
                            default: E(() => [
                              _(h, {
                                clearable: "",
                                density: "compact",
                                "auto-select-first": "",
                                color: "primary",
                                label: e.frappe._("Customer Group") + " *",
                                modelValue: e.group,
                                "onUpdate:modelValue": t[11] || (t[11] = (A) => e.group = A),
                                items: e.groups,
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "no-data-text": e.__("Group not found"),
                                "hide-details": "",
                                required: ""
                              }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text"])
                            ]),
                            _: 1
                          })),
                          e.hideNonEssential ? ke("", !0) : (te(), Le(u, {
                            key: 4,
                            cols: "6"
                          }, {
                            default: E(() => [
                              _(h, {
                                clearable: "",
                                density: "compact",
                                "auto-select-first": "",
                                color: "primary",
                                label: e.frappe._("Territory") + " *",
                                modelValue: e.territory,
                                "onUpdate:modelValue": t[12] || (t[12] = (A) => e.territory = A),
                                items: e.territorys,
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "no-data-text": e.__("Territory not found"),
                                "hide-details": "",
                                required: ""
                              }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text"])
                            ]),
                            _: 1
                          })),
                          e.loyalty_program ? (te(), Le(u, {
                            key: 5,
                            cols: "6"
                          }, {
                            default: E(() => [
                              _(d, {
                                modelValue: e.loyalty_program,
                                "onUpdate:modelValue": t[13] || (t[13] = (A) => e.loyalty_program = A),
                                label: e.frappe._("Loyalty Program"),
                                density: "compact",
                                readonly: "",
                                "hide-details": "",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })) : ke("", !0),
                          e.loyalty_points ? (te(), Le(u, {
                            key: 6,
                            cols: "6"
                          }, {
                            default: E(() => [
                              _(d, {
                                modelValue: e.loyalty_points,
                                "onUpdate:modelValue": t[14] || (t[14] = (A) => e.loyalty_points = A),
                                label: e.frappe._("Loyalty Points"),
                                density: "compact",
                                readonly: "",
                                "hide-details": "",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field"
                              }, null, 8, ["modelValue", "label", "bg-color"])
                            ]),
                            _: 1
                          })) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(v, null, {
                default: E(() => [
                  _(o),
                  _(b, {
                    color: "error",
                    theme: "dark",
                    onClick: i.confirm_close
                  }, {
                    default: E(() => [
                      ae(j(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(b, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"]),
      _(k, {
        modelValue: e.confirmDialog,
        "onUpdate:modelValue": t[17] || (t[17] = (A) => e.confirmDialog = A),
        "max-width": "400px"
      }, {
        default: E(() => [
          _(g, null, {
            default: E(() => [
              _(s, { class: "text-h5 text-primary" }, {
                default: E(() => [
                  ae(j(e.__("Confirm Close")), 1)
                ]),
                _: 1
              }),
              _(w, null, {
                default: E(() => [
                  ae(j(e.__("Are you sure you want to close? All entered data will be lost.")), 1)
                ]),
                _: 1
              }),
              _(v, null, {
                default: E(() => [
                  _(o),
                  _(b, {
                    color: "primary",
                    onClick: t[16] || (t[16] = (A) => e.confirmDialog = !1)
                  }, {
                    default: E(() => [
                      ae(j(e.__("Continue Editing")), 1)
                    ]),
                    _: 1
                  }),
                  _(b, {
                    color: "error",
                    onClick: i.confirmClose
                  }, {
                    default: E(() => [
                      ae(j(e.__("Yes, Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const aB = /* @__PURE__ */ on(Vee, [["render", Ree], ["__scopeId", "data-v-5d9c4969"]]), Fee = {
  props: {
    pos_profile: Object
  },
  data: () => ({
    pos_profile: "",
    customers: [],
    customer: "",
    internalCustomer: null,
    tempSelectedCustomer: null,
    isMenuOpen: !1,
    readonly: !1,
    effectiveReadonly: !1,
    customer_info: {},
    loadingCustomers: !1,
    customers_loaded: !1,
    searchTerm: "",
    page: 0,
    pageSize: 200,
    hasMore: !0,
    nextCustomerStart: null,
    searchDebounce: null,
    // Track background loading state and pending searches
    isCustomerBackgroundLoading: !1,
    pendingCustomerSearch: null,
    loadProgress: 0,
    totalCustomerCount: 0,
    loadedCustomerCount: 0
  }),
  components: {
    UpdateCustomer: aB,
    LoadingOverlay: nB
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    filteredCustomers() {
      return this.isCustomerBackgroundLoading ? [] : this.customers;
    }
  },
  watch: {
    readonly(e) {
      this.effectiveReadonly = e && navigator.onLine;
    },
    customers_loaded(e) {
      e && this.eventBus.emit("customers_loaded");
    }
  },
  methods: {
    // Called when dropdown opens or closes
    onCustomerMenuToggle(e) {
      if (this.isMenuOpen = e, e)
        this.internalCustomer = null, this.$nextTick(() => {
          setTimeout(() => {
            const t = this.$refs.customerDropdown?.$el?.querySelector(
              ".v-overlay__content .v-select-list"
            );
            t && (t.scrollTop = 0, t.addEventListener("scroll", this.onCustomerScroll));
          }, 50);
        });
      else {
        const t = this.$refs.customerDropdown?.$el?.querySelector(
          ".v-overlay__content .v-select-list"
        );
        t && t.removeEventListener("scroll", this.onCustomerScroll), this.tempSelectedCustomer ? (this.internalCustomer = this.tempSelectedCustomer, this.customer = this.tempSelectedCustomer, this.eventBus.emit("update_customer", this.customer)) : this.customer && (this.internalCustomer = this.customer), this.tempSelectedCustomer = null;
      }
    },
    onCustomerScroll(e) {
      const t = e.target;
      t.scrollTop + t.clientHeight >= t.scrollHeight - 50 && this.loadMoreCustomers();
    },
    // Called when a customer is selected
    onCustomerChange(e) {
      if (e && e === this.customer) {
        this.internalCustomer = this.customer, this.eventBus.emit("show_message", {
          title: __("Customer already selected"),
          color: "error"
        });
        return;
      }
      this.tempSelectedCustomer = e, !this.isMenuOpen && e && (this.customer = e, this.eventBus.emit("update_customer", e));
    },
    onCustomerSearch(e) {
      if (this.isCustomerBackgroundLoading) {
        this.pendingCustomerSearch = e;
        return;
      }
      this.searchDebounce(e);
    },
    // Pressing Enter in input
    handleEnter(e) {
      const t = e.target.value?.toLowerCase() || "", n = this.customers.find((a) => a.customer_name?.toLowerCase().includes(t) || a.name?.toLowerCase().includes(t));
      n && (this.tempSelectedCustomer = n.name, this.internalCustomer = n.name, this.customer = n.name, this.eventBus.emit("update_customer", n.name), this.isMenuOpen = !1, e.target.blur());
    },
    async searchCustomers(e, t = !1) {
      try {
        await ia(), gt.isOpen() || await gt.open();
        let n = gt.table("customers");
        e && (n = gt.table("customers").where("customer_name").startsWithIgnoreCase(e).or("mobile_no").startsWithIgnoreCase(e).or("email_id").startsWithIgnoreCase(e).or("tax_id").startsWithIgnoreCase(e).or("name").startsWithIgnoreCase(e));
        const a = await n.offset(this.page * this.pageSize).limit(this.pageSize).toArray();
        return t ? this.customers.push(...a) : this.customers = a, this.hasMore = a.length === this.pageSize, this.hasMore && (this.page += 1), a.length;
      } catch (n) {
        return console.error("Failed to search customers", n), 0;
      }
    },
    async loadMoreCustomers() {
      this.loadingCustomers || await this.searchCustomers(this.searchTerm, !0) === this.pageSize || this.nextCustomerStart && (await this.backgroundLoadCustomers(this.nextCustomerStart, Sy()), await this.searchCustomers(this.searchTerm, !0));
    },
    async backgroundLoadCustomers(e, t) {
      const n = this.pageSize;
      this.isCustomerBackgroundLoading = !0;
      try {
        let a = e;
        for (; a; ) {
          const r = await this.fetchCustomerPage(a, t, n);
          if (await qh(r), this.loadedCustomerCount += r.length, this.totalCustomerCount) {
            const i = Math.min(
              99,
              Math.round(this.loadedCustomerCount / this.totalCustomerCount * 100)
            );
            this.loadProgress = i, this.eventBus.emit("data-load-progress", { name: "customers", progress: i });
          }
          r.length === n ? (a = r[r.length - 1]?.name || null, this.nextCustomerStart = a) : (a = null, this.nextCustomerStart = null, Hh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers"));
        }
      } catch (a) {
        console.error("Failed to background load customers", a);
      } finally {
        this.isCustomerBackgroundLoading = !1, this.pendingCustomerSearch !== null && (this.searchDebounce(this.pendingCustomerSearch), this.searchDebounce.flush && this.searchDebounce.flush(), this.pendingCustomerSearch = null);
      }
    },
    async verifyServerCustomerCount() {
      if (!un())
        try {
          const e = await VA(), n = (await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customers_count",
            args: { pos_profile: this.pos_profile.pos_profile }
          })).message || 0;
          if (typeof n == "number")
            if (this.totalCustomerCount = n, this.loadedCustomerCount = e, this.loadProgress = n ? Math.round(e / n * 100) : 0, this.eventBus.emit("data-load-progress", {
              name: "customers",
              progress: this.loadProgress
            }), n > e) {
              const a = Sy(), r = await this.fetchCustomerPage(null, a, this.pageSize);
              await qh(r), this.loadedCustomerCount += r.length, this.totalCustomerCount && (this.loadProgress = Math.round(
                this.loadedCustomerCount / this.totalCustomerCount * 100
              ), this.eventBus.emit("data-load-progress", {
                name: "customers",
                progress: this.loadProgress
              }));
              const i = r.length === this.pageSize && r[r.length - 1]?.name || null;
              i ? this.backgroundLoadCustomers(i, a) : (Hh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers")), await this.searchCustomers(this.searchTerm);
            } else n < e && (await bQ(), Hh(null), this.customers = [], await this.get_customer_names());
        } catch (e) {
          console.error("Error verifying customer count:", e);
        }
    },
    fetchCustomerPage(e, t, n) {
      return new Promise((a, r) => {
        frappe.call({
          method: "posawesome.posawesome.api.customers.get_customer_names",
          args: {
            pos_profile: this.pos_profile.pos_profile,
            modified_after: t,
            limit: n,
            start_after: e
          },
          callback: (i) => a(i.message || []),
          error: (i) => {
            console.error("Failed to fetch customers", i), r(i);
          }
        });
      });
    },
    async get_customer_names() {
      if (await VA() > 0) {
        this.customers_loaded = !0, await this.searchCustomers(this.searchTerm), await this.verifyServerCustomerCount();
        return;
      }
      const t = Sy();
      this.loadProgress = 0, this.eventBus.emit("data-load-progress", { name: "customers", progress: 0 }), this.loadingCustomers = !0;
      try {
        try {
          const a = await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customers_count",
            args: { pos_profile: this.pos_profile.pos_profile }
          });
          this.totalCustomerCount = a.message || 0;
        } catch (a) {
          console.error("Failed to fetch customer count", a), this.totalCustomerCount = 0;
        }
        const n = await this.fetchCustomerPage(null, t, this.pageSize);
        await qh(n), this.loadedCustomerCount = n.length, this.totalCustomerCount && (this.loadProgress = Math.round(
          this.loadedCustomerCount / this.totalCustomerCount * 100
        ), this.eventBus.emit("data-load-progress", {
          name: "customers",
          progress: this.loadProgress
        })), this.nextCustomerStart = n.length === this.pageSize && n[n.length - 1]?.name || null, this.nextCustomerStart ? this.backgroundLoadCustomers(this.nextCustomerStart, t) : (Hh((/* @__PURE__ */ new Date()).toISOString()), this.loadProgress = 100, this.eventBus.emit("data-load-progress", { name: "customers", progress: 100 }), this.eventBus.emit("data-loaded", "customers")), this.customers_loaded = !0;
      } catch (n) {
        console.error("Failed to fetch customers:", n);
      } finally {
        this.loadingCustomers = !1, await this.searchCustomers(this.searchTerm);
      }
    },
    new_customer() {
      this.eventBus.emit("open_update_customer", null);
    },
    edit_customer() {
      this.eventBus.emit("open_update_customer", this.customer_info);
    }
  },
  created() {
    pu.then(async () => {
      await this.searchCustomers(""), this.effectiveReadonly = this.readonly && navigator.onLine;
    }), this.searchDebounce = $i.debounce(async (e) => {
      this.searchTerm = e || "", this.page = 0, this.customers = [], this.hasMore = !0, await this.searchCustomers(this.searchTerm);
    }, 300), this.effectiveReadonly = this.readonly && navigator.onLine, this.$nextTick(() => {
      this.eventBus.on("register_pos_profile", async (e) => {
        await pu, this.pos_profile = e, await this.get_customer_names();
      }), this.eventBus.on("payments_register_pos_profile", async (e) => {
        await pu, this.pos_profile = e, await this.get_customer_names();
      }), this.eventBus.on("set_customer", (e) => {
        this.customer = e, this.internalCustomer = e;
      }), this.eventBus.on("add_customer_to_list", async (e) => {
        const t = this.customers.findIndex((n) => n.name === e.name);
        t !== -1 ? this.customers.splice(t, 1, e) : this.customers.push(e), await qh([e]), this.customer = e.name, this.internalCustomer = e.name, this.eventBus.emit("update_customer", e.name);
      }), this.eventBus.on("set_customer_readonly", (e) => {
        this.readonly = e;
      }), this.eventBus.on("set_customer_info_to_edit", (e) => {
        this.customer_info = e;
      }), this.eventBus.on("fetch_customer_details", async () => {
        await this.get_customer_names();
      });
    });
  }
}, Nee = { class: "customer-input-wrapper" }, Uee = ["innerHTML"], $ee = ["innerHTML"], qee = ["innerHTML"], Hee = ["innerHTML"], zee = ["innerHTML"], Wee = { class: "mt-4" };
function Kee(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-tooltip"), s = J("v-list-item-subtitle"), d = J("v-list-item"), u = J("v-autocomplete"), f = J("UpdateCustomer"), h = J("LoadingOverlay");
  return te(), Oe("div", Nee, [
    _(u, {
      ref: "customerDropdown",
      class: "customer-autocomplete sleek-field",
      density: "compact",
      clearable: "",
      variant: "solo",
      color: "primary",
      label: e.frappe._("Customer"),
      modelValue: e.internalCustomer,
      "onUpdate:modelValue": [
        t[2] || (t[2] = (y) => e.internalCustomer = y),
        i.onCustomerChange
      ],
      items: i.filteredCustomers,
      "item-title": "customer_name",
      "item-value": "name",
      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
      "no-data-text": e.isCustomerBackgroundLoading ? e.__("Loading customer data...") : e.__("Customers not found"),
      "hide-details": "",
      customFilter: () => !0,
      disabled: e.effectiveReadonly || e.loadingCustomers,
      "menu-props": { closeOnContentClick: !1 },
      "onUpdate:menu": i.onCustomerMenuToggle,
      "onUpdate:search": i.onCustomerSearch,
      onKeydown: Ll(i.handleEnter, ["enter"]),
      "virtual-scroll": !0,
      "virtual-scroll-item-height": 48
    }, {
      "prepend-inner": E(() => [
        _(l, { text: "Edit customer" }, {
          activator: E(({ props: y }) => [
            _(o, Fe(y, {
              class: "icon-button",
              onMousedown: t[0] || (t[0] = ua(() => {
              }, ["prevent", "stop"])),
              onClick: ua(i.edit_customer, ["stop"])
            }), {
              default: E(() => t[3] || (t[3] = [
                ae(" mdi-account-edit ", -1)
              ])),
              _: 2,
              __: [3]
            }, 1040, ["onClick"])
          ]),
          _: 1
        })
      ]),
      "append-inner": E(() => [
        _(l, { text: "Add new customer" }, {
          activator: E(({ props: y }) => [
            _(o, Fe(y, {
              class: "icon-button",
              onMousedown: t[1] || (t[1] = ua(() => {
              }, ["prevent", "stop"])),
              onClick: ua(i.new_customer, ["stop"])
            }), {
              default: E(() => t[4] || (t[4] = [
                ae(" mdi-plus ", -1)
              ])),
              _: 2,
              __: [4]
            }, 1040, ["onClick"])
          ]),
          _: 1
        })
      ]),
      item: E(({ props: y, item: p }) => [
        _(d, ea(Aa(y)), {
          default: E(() => [
            p.raw.customer_name !== p.raw.name ? (te(), Le(s, { key: 0 }, {
              default: E(() => [
                T("div", {
                  innerHTML: `ID: ${p.raw.name}`
                }, null, 8, Uee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            p.raw.tax_id ? (te(), Le(s, { key: 1 }, {
              default: E(() => [
                T("div", {
                  innerHTML: `TAX ID: ${p.raw.tax_id}`
                }, null, 8, $ee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            p.raw.email_id ? (te(), Le(s, { key: 2 }, {
              default: E(() => [
                T("div", {
                  innerHTML: `Email: ${p.raw.email_id}`
                }, null, 8, qee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            p.raw.mobile_no ? (te(), Le(s, { key: 3 }, {
              default: E(() => [
                T("div", {
                  innerHTML: `Mobile No: ${p.raw.mobile_no}`
                }, null, 8, Hee)
              ]),
              _: 2
            }, 1024)) : ke("", !0),
            p.raw.primary_address ? (te(), Le(s, { key: 4 }, {
              default: E(() => [
                T("div", {
                  innerHTML: `Primary Address: ${p.raw.primary_address}`
                }, null, 8, zee)
              ]),
              _: 2
            }, 1024)) : ke("", !0)
          ]),
          _: 2
        }, 1040)
      ]),
      _: 1
    }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "disabled", "onUpdate:menu", "onUpdate:modelValue", "onUpdate:search", "onKeydown"]),
    T("div", Wee, [
      _(f)
    ]),
    _(h, {
      loading: e.loadingCustomers || e.isCustomerBackgroundLoading,
      message: e.__("Loading customer data..."),
      progress: e.loadProgress
    }, null, 8, ["loading", "message", "progress"])
  ]);
}
const rB = /* @__PURE__ */ on(Fee, [["render", Kee], ["__scopeId", "data-v-17cef21d"]]), jee = {
  props: {
    pos_profile: Object,
    order_types: Array,
    available_tables: Array,
    selected_order_type: [Object, String],
    selected_table: [Object, String],
    order_status: String,
    readonly: Boolean
  },
  data() {
    return {
      internal_selected_order_type: this.selected_order_type,
      internal_selected_table: this.selected_table,
      showValidation: !1
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    // Check if we're in standard restaurant mode (not direct order modes)
    isStandardMode() {
      return !this.pos_profile.posa_order_mode || this.pos_profile.posa_order_mode === "Standard";
    },
    // Check if we're in any direct order mode
    isDirectMode() {
      return this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT";
    },
    // Check if we're in direct order with KOT mode
    isDirectOrderWithKOT() {
      return this.pos_profile.posa_order_mode === "Direct Order + KOT";
    },
    // Order type is only required in standard mode
    isOrderTypeRequired() {
      return this.isStandardMode;
    },
    // Dynamic label for order type field
    orderTypeLabel() {
      return this.isOrderTypeRequired ? this.frappe._("Order Type") + " *" : this.frappe._("Order Type");
    },
    // Dynamic placeholder for order type field  
    orderTypePlaceholder() {
      return this.isOrderTypeRequired ? this.frappe._("Select Order Type (Required)") : this.frappe._("Select Order Type (Optional)");
    },
    // Message for direct order modes
    directModeMessage() {
      return this.isDirectOrderWithKOT ? this.__("Direct Order + KOT Mode: Orders will be billed immediately with KOT print") : this.isDirectMode ? this.__("Direct Order Mode: Orders will be billed immediately without order creation") : "";
    },
    showTableSelection() {
      return this.internal_selected_order_type && this.internal_selected_order_type.requires_table && this.available_tables && this.available_tables.length > 0;
    },
    showValidationMessage() {
      return this.showValidation && this.validationMessage;
    },
    validationMessage() {
      return this.isOrderTypeRequired && !this.internal_selected_order_type ? __("⚠️ Order Type is mandatory - Please select before adding items") : this.showTableSelection && !this.internal_selected_table ? __("⚠️ Table selection required for {0} orders", [this.internal_selected_order_type.order_type_name]) : "";
    }
  },
  watch: {
    selected_order_type(e) {
      this.internal_selected_order_type = e;
    },
    selected_table(e) {
      this.internal_selected_table = e;
    },
    available_tables: {
      handler(e) {
        e && e.forEach((t) => {
          t.table_display = t.table_name ? `${t.table_number} - ${t.table_name}` : t.table_number;
        });
      },
      immediate: !0
    }
  },
  methods: {
    onOrderTypeUpdate(e) {
      this.$emit("update:selected_order_type", e), (!e || !e.requires_table) && (this.internal_selected_table = null, this.$emit("update:selected_table", null));
    },
    onTableUpdate(e) {
      this.$emit("update:selected_table", e);
    },
    getStatusColor(e) {
      return {
        Draft: "orange",
        Submitted: "blue",
        Preparing: "amber",
        Ready: "green",
        Served: "success",
        Billed: "purple",
        Cancelled: "error"
      }[e] || "grey";
    },
    getStatusIcon(e) {
      return {
        Draft: "mdi-file-document-outline",
        Submitted: "mdi-check-circle-outline",
        Preparing: "mdi-chef-hat",
        Ready: "mdi-bell-ring",
        Served: "mdi-silverware-fork-knife",
        Billed: "mdi-receipt",
        Cancelled: "mdi-cancel"
      }[e] || "mdi-information-outline";
    },
    validateSelection() {
      return this.showValidation = !0, this.internal_selected_order_type && (!this.showTableSelection || this.internal_selected_table);
    }
  }
}, Yee = { key: 0 };
function Gee(e, t, n, a, r, i) {
  const o = J("v-list-item-title"), l = J("v-list-item-subtitle"), s = J("v-list-item"), d = J("v-select"), u = J("v-col"), f = J("v-icon"), h = J("v-chip"), y = J("v-alert"), p = J("v-row");
  return n.pos_profile.posa_enable_restaurant_mode && i.isStandardMode ? (te(), Le(p, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: E(() => [
      _(u, {
        cols: "12",
        sm: "6",
        class: "pb-0 mb-0 pr-2 pt-0"
      }, {
        default: E(() => [
          _(d, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: i.orderTypeLabel,
            placeholder: i.orderTypePlaceholder,
            modelValue: r.internal_selected_order_type,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (w) => r.internal_selected_order_type = w),
              i.onOrderTypeUpdate
            ],
            items: n.order_types,
            "item-title": "order_type_name",
            "item-value": "name",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: Ae(["dark-field sleek-field", { "error-field": !r.internal_selected_order_type && r.showValidation && i.isOrderTypeRequired }]),
            "no-data-text": e.__("No order types found"),
            "hide-details": "",
            disabled: n.readonly
          }, {
            item: E(({ props: w, item: b }) => [
              _(s, ea(Aa(w)), {
                default: E(() => [
                  _(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: b.raw.order_type_name
                  }, null, 8, ["innerHTML"]),
                  b.raw.default_preparation_time ? (te(), Le(l, { key: 0 }, {
                    default: E(() => [
                      ae(j(e.__("Prep Time: {0} min", [b.raw.default_preparation_time])), 1)
                    ]),
                    _: 2
                  }, 1024)) : ke("", !0)
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "placeholder", "modelValue", "items", "bg-color", "class", "no-data-text", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      i.showTableSelection ? (te(), Le(u, {
        key: 0,
        cols: "12",
        sm: "6",
        class: "pb-0 mb-0 pl-2 pt-0"
      }, {
        default: E(() => [
          _(d, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Table Number") + " *",
            modelValue: r.internal_selected_table,
            "onUpdate:modelValue": [
              t[1] || (t[1] = (w) => r.internal_selected_table = w),
              i.onTableUpdate
            ],
            items: n.available_tables,
            "item-title": "table_display",
            "item-value": "table_number",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: Ae(["dark-field sleek-field", { "error-field": i.showTableSelection && !r.internal_selected_table && r.showValidation }]),
            "no-data-text": e.__("No tables available"),
            "hide-details": "",
            disabled: n.readonly
          }, {
            item: E(({ props: w, item: b }) => [
              _(s, ea(Aa(w)), {
                default: E(() => [
                  _(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: b.raw.table_display
                  }, null, 8, ["innerHTML"]),
                  b.raw.capacity ? (te(), Le(l, { key: 0 }, {
                    default: E(() => [
                      ae(j(e.__("Capacity: {0} seats", [b.raw.capacity])) + " ", 1),
                      b.raw.location ? (te(), Oe("span", Yee, " • " + j(b.raw.location), 1)) : ke("", !0)
                    ]),
                    _: 2
                  }, 1024)) : ke("", !0)
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "modelValue", "items", "bg-color", "class", "no-data-text", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      })) : ke("", !0),
      n.order_status ? (te(), Le(u, {
        key: 1,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: E(() => [
          _(h, {
            color: i.getStatusColor(n.order_status),
            size: "small",
            variant: "flat"
          }, {
            default: E(() => [
              _(f, {
                start: "",
                size: "small"
              }, {
                default: E(() => [
                  ae(j(i.getStatusIcon(n.order_status)), 1)
                ]),
                _: 1
              }),
              ae(" " + j(n.order_status), 1)
            ]),
            _: 1
          }, 8, ["color"])
        ]),
        _: 1
      })) : ke("", !0),
      i.showValidationMessage ? (te(), Le(u, {
        key: 2,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: E(() => [
          _(y, {
            type: "error",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: E(() => [
              _(f, { start: "" }, {
                default: E(() => t[2] || (t[2] = [
                  ae("mdi-alert-circle", -1)
                ])),
                _: 1,
                __: [2]
              }),
              ae(" " + j(i.validationMessage), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      })) : ke("", !0),
      !r.internal_selected_order_type && i.isStandardMode ? (te(), Le(u, {
        key: 3,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: E(() => [
          _(y, {
            type: "info",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: E(() => [
              _(f, { start: "" }, {
                default: E(() => t[3] || (t[3] = [
                  ae("mdi-information", -1)
                ])),
                _: 1,
                __: [3]
              }),
              ae(" " + j(e.__("Order Type selection is mandatory before adding items to cart")), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      })) : ke("", !0),
      i.isDirectMode ? (te(), Le(u, {
        key: 4,
        cols: "12",
        class: "pt-1 pb-0"
      }, {
        default: E(() => [
          _(y, {
            type: i.isDirectOrderWithKOT ? "success" : "info",
            density: "compact",
            class: "mb-0",
            variant: "tonal"
          }, {
            default: E(() => [
              _(f, { start: "" }, {
                default: E(() => [
                  ae(j(i.isDirectOrderWithKOT ? "mdi-printer" : "mdi-lightning-bolt"), 1)
                ]),
                _: 1
              }),
              ae(" " + j(i.directModeMessage), 1)
            ]),
            _: 1
          }, 8, ["type"])
        ]),
        _: 1
      })) : ke("", !0)
    ]),
    _: 1
  })) : ke("", !0);
}
const Qee = /* @__PURE__ */ on(jee, [["render", Gee], ["__scopeId", "data-v-283c9582"]]), Jee = {
  props: {
    pos_profile: Object,
    delivery_charges: Array,
    selected_delivery_charge: [Object, String],
    delivery_charges_rate: Number,
    deliveryChargesFilter: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    readonly: Boolean
  },
  data() {
    return {
      internal_selected_delivery_charge: this.selected_delivery_charge
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    selected_delivery_charge(e) {
      this.internal_selected_delivery_charge = e;
    }
  },
  methods: {
    onUpdate(e) {
      this.$emit("update:selected_delivery_charge", e);
    }
  }
};
function Xee(e, t, n, a, r, i) {
  const o = J("v-list-item-title"), l = J("v-list-item-subtitle"), s = J("v-list-item"), d = J("v-autocomplete"), u = J("v-col"), f = J("v-text-field"), h = J("v-row");
  return n.pos_profile.posa_use_delivery_charges ? (te(), Le(h, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: E(() => [
      _(u, {
        cols: "12",
        sm: "8",
        class: "pb-0 mb-0 pr-0 pt-0"
      }, {
        default: E(() => [
          _(d, {
            density: "compact",
            clearable: "",
            "auto-select-first": "",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Delivery Charges"),
            modelValue: r.internal_selected_delivery_charge,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (y) => r.internal_selected_delivery_charge = y),
              i.onUpdate
            ],
            items: n.delivery_charges,
            "item-title": "name",
            "item-value": "name",
            "return-object": "",
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "no-data-text": e.__("Charges not found"),
            "hide-details": "",
            customFilter: n.deliveryChargesFilter,
            disabled: n.readonly
          }, {
            item: E(({ props: y, item: p }) => [
              _(s, ea(Aa(y)), {
                default: E(() => [
                  _(o, {
                    class: "text-primary text-subtitle-1",
                    innerHTML: p.raw.name
                  }, null, 8, ["innerHTML"]),
                  _(l, {
                    innerHTML: `Rate: ${p.raw.rate}`
                  }, null, 8, ["innerHTML"])
                ]),
                _: 2
              }, 1040)
            ]),
            _: 1
          }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "customFilter", "disabled", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      _(u, {
        cols: "12",
        sm: "4",
        class: "pb-0 mb-0 pt-0"
      }, {
        default: E(() => [
          _(f, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Delivery Charges Rate"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            "model-value": n.formatCurrency(n.delivery_charges_rate),
            prefix: n.currencySymbol(n.pos_profile.currency),
            disabled: ""
          }, null, 8, ["label", "bg-color", "model-value", "prefix"])
        ]),
        _: 1
      })
    ]),
    _: 1
  })) : ke("", !0);
}
const Zee = /* @__PURE__ */ on(Jee, [["render", Xee], ["__scopeId", "data-v-eede760a"]]), ete = {
  props: {
    pos_profile: Object,
    posting_date_display: String,
    customer_balance: Number,
    formatCurrency: Function,
    priceList: String,
    priceLists: Array
  },
  data() {
    return {
      internal_posting_date_display: this.posting_date_display,
      internal_price_list: this.priceList
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    posting_date_display(e) {
      this.internal_posting_date_display = e;
    },
    priceList(e) {
      this.internal_price_list = e;
    }
  },
  methods: {
    onUpdate(e) {
      this.$emit("update:posting_date_display", e);
    },
    onPriceListUpdate(e) {
      this.$emit("update:priceList", e);
    }
  }
}, tte = {
  key: 0,
  class: "balance-field ml-3"
}, nte = { class: "balance-value" }, ate = { class: "balance-field" }, rte = { class: "balance-value" };
function ite(e, t, n, a, r, i) {
  const o = J("VueDatePicker"), l = J("v-col"), s = J("v-select"), d = J("v-row");
  return n.pos_profile.posa_allow_change_posting_date ? (te(), Le(d, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: E(() => [
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: E(() => [
          _(o, {
            modelValue: r.internal_posting_date_display,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (u) => r.internal_posting_date_display = u),
              i.onUpdate
            ],
            "model-type": "format",
            format: "dd-MM-yyyy",
            "auto-apply": "",
            placeholder: e.frappe._("Posting Date"),
            dark: i.isDarkTheme,
            class: "dark-field sleek-field posting-date-input"
          }, null, 8, ["modelValue", "placeholder", "dark", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      n.pos_profile.posa_enable_price_list_dropdown ? (te(), Le(l, {
        key: 0,
        cols: "12",
        sm: "6",
        class: "pb-2 d-flex align-center"
      }, {
        default: E(() => [
          _(s, {
            density: "comfortable",
            variant: "solo",
            color: "primary",
            items: n.priceLists,
            label: e.frappe._("Price List"),
            modelValue: r.internal_price_list,
            "onUpdate:modelValue": [
              t[1] || (t[1] = (u) => r.internal_price_list = u),
              i.onPriceListUpdate
            ],
            "hide-details": "",
            class: "flex-grow-1 sleek-field"
          }, null, 8, ["items", "label", "modelValue", "onUpdate:modelValue"]),
          n.pos_profile.posa_show_customer_balance ? (te(), Oe("div", tte, [
            T("strong", null, j(e.__("Customer Balance")) + ":", 1),
            T("span", nte, j(n.formatCurrency(n.customer_balance)), 1)
          ])) : ke("", !0)
        ]),
        _: 1
      })) : n.pos_profile.posa_show_customer_balance ? (te(), Le(l, {
        key: 1,
        cols: "12",
        sm: "8",
        class: "pb-2 d-flex align-center"
      }, {
        default: E(() => [
          T("div", ate, [
            T("strong", null, j(e.__("Customer Balance")) + ":", 1),
            T("span", rte, j(n.formatCurrency(n.customer_balance)), 1)
          ])
        ]),
        _: 1
      })) : ke("", !0)
    ]),
    _: 1
  })) : ke("", !0);
}
const ote = /* @__PURE__ */ on(ete, [["render", ite], ["__scopeId", "data-v-59819b3f"]]), ste = {
  props: {
    pos_profile: Object,
    selected_currency: String,
    plc_conversion_rate: Number,
    conversion_rate: Number,
    available_currencies: Array,
    isNumber: Function,
    price_list_currency: String
  },
  data() {
    return {
      internal_selected_currency: this.selected_currency,
      internal_plc_rate: this.plc_conversion_rate,
      internal_conversion_rate: this.conversion_rate
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    selected_currency(e) {
      this.internal_selected_currency = e;
    },
    plc_conversion_rate(e) {
      this.internal_plc_rate = e;
    },
    conversion_rate(e) {
      this.internal_conversion_rate = e;
    }
  },
  methods: {
    onCurrencyUpdate(e) {
      this.$emit("update:selected_currency", e);
    },
    onPlcRateChange() {
      this.$emit("update:plc_conversion_rate", this.internal_plc_rate);
    },
    onConversionChange() {
      this.$emit("update:conversion_rate", this.internal_conversion_rate);
    }
  }
};
function lte(e, t, n, a, r, i) {
  const o = J("v-select"), l = J("v-col"), s = J("v-text-field"), d = J("v-row");
  return n.pos_profile.posa_allow_multi_currency ? (te(), Le(d, {
    key: 0,
    align: "center",
    class: "items px-3 py-2 mt-0"
  }, {
    default: E(() => [
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: E(() => [
          _(o, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Currency"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_selected_currency,
            "onUpdate:modelValue": [
              t[0] || (t[0] = (u) => r.internal_selected_currency = u),
              i.onCurrencyUpdate
            ],
            items: n.available_currencies
          }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
        ]),
        _: 1
      }),
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: E(() => [
          _(s, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: "Price List " + n.price_list_currency + " to " + r.internal_selected_currency,
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_plc_rate,
            "onUpdate:modelValue": t[1] || (t[1] = (u) => r.internal_plc_rate = u),
            rules: [n.isNumber],
            onChange: i.onPlcRateChange
          }, null, 8, ["label", "bg-color", "modelValue", "rules", "onChange"])
        ]),
        _: 1
      }),
      _(l, {
        cols: "12",
        sm: "4",
        class: "pb-2"
      }, {
        default: E(() => [
          _(s, {
            density: "compact",
            variant: "solo",
            color: "primary",
            label: e.frappe._("Conversion Rate"),
            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
            class: "dark-field sleek-field",
            "hide-details": "",
            modelValue: r.internal_conversion_rate,
            "onUpdate:modelValue": t[2] || (t[2] = (u) => r.internal_conversion_rate = u),
            rules: [n.isNumber],
            onChange: i.onConversionChange
          }, null, 8, ["label", "bg-color", "modelValue", "rules", "onChange"])
        ]),
        _: 1
      })
    ]),
    _: 1
  })) : ke("", !0);
}
const cte = /* @__PURE__ */ on(ste, [["render", lte], ["__scopeId", "data-v-2d2e6b2b"]]), ute = {
  props: {
    modelValue: Boolean
  },
  emits: ["update:modelValue", "confirm"],
  methods: {
    onConfirm() {
      this.$emit("confirm");
    }
  }
}, dte = { class: "text-h5 text-primary" };
function fte(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-card-text"), s = J("v-spacer"), d = J("v-btn"), u = J("v-card-actions"), f = J("v-card"), h = J("v-dialog");
  return te(), Le(h, {
    "model-value": n.modelValue,
    "max-width": "330",
    "onUpdate:modelValue": t[1] || (t[1] = (y) => e.$emit("update:modelValue", y))
  }, {
    default: E(() => [
      _(f, null, {
        default: E(() => [
          _(o, { class: "text-h5" }, {
            default: E(() => [
              T("span", dte, j(e.__("Cancel Sale ?")), 1)
            ]),
            _: 1
          }),
          _(l, null, {
            default: E(() => t[2] || (t[2] = [
              ae(' This would cancel and delete the current sale. To save it as Draft, click the "Save and Clear" instead. ', -1)
            ])),
            _: 1,
            __: [2]
          }),
          _(u, null, {
            default: E(() => [
              _(s),
              _(d, {
                color: "error",
                onClick: i.onConfirm
              }, {
                default: E(() => [
                  ae(j(e.__("Yes, Cancel sale")), 1)
                ]),
                _: 1
              }, 8, ["onClick"]),
              _(d, {
                color: "warning",
                onClick: t[0] || (t[0] = (y) => e.$emit("update:modelValue", !1))
              }, {
                default: E(() => [
                  ae(j(e.__("Back")), 1)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["model-value"]);
}
const mte = /* @__PURE__ */ on(ute, [["render", fte]]), hte = {
  props: {
    pos_profile: Object,
    invoice_doc: Object,
    total_qty: [Number, String],
    additional_discount: Number,
    additional_discount_percentage: Number,
    total_items_discount_amount: Number,
    subtotal: Number,
    displayCurrency: String,
    formatFloat: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    discount_percentage_offer_name: [String, Number],
    isNumber: Function,
    restaurant_add_items_context: Object
  },
  data() {
    return {
      // Loading states for better UX
      saveLoading: !1,
      loadDraftsLoading: !1,
      selectOrderLoading: !1,
      showOrdersLoading: !1,
      submitOrderLoading: !1,
      cancelLoading: !1,
      returnsLoading: !1,
      printLoading: !1,
      paymentLoading: !1
    };
  },
  emits: [
    "update:additional_discount",
    "update:additional_discount_percentage",
    "update_discount_umount",
    "save-and-clear",
    "load-drafts",
    "select-order",
    "show-orders",
    "submit-order",
    "cancel-sale",
    "open-returns",
    "print-draft",
    "show-payment"
  ],
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    // Check if we're in standard restaurant mode (not direct order modes)
    isStandardRestaurantMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (!this.pos_profile.posa_order_mode || this.pos_profile.posa_order_mode === "Standard");
    },
    // Check if we're in any direct order mode
    isDirectOrderMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT");
    },
    // Check if we're in standard restaurant mode (not direct order modes)
    isStandardRestaurantMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (!this.pos_profile.posa_order_mode || this.pos_profile.posa_order_mode === "Standard");
    },
    // Check if we're in any direct order mode
    isDirectOrderMode() {
      return this.pos_profile.posa_enable_restaurant_mode && (this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT");
    },
    // Check if we're in direct order with KOT mode  
    isDirectOrderWithKOT() {
      return this.pos_profile.posa_enable_restaurant_mode && this.pos_profile.posa_order_mode === "Direct Order + KOT";
    },
    hide_qty_decimals() {
      try {
        const e = localStorage.getItem("posawesome_item_selector_settings");
        if (e)
          return !!JSON.parse(e).hide_qty_decimals;
      } catch (e) {
        console.error("Failed to load item selector settings:", e);
      }
      return !1;
    },
    hasExistingOrder() {
      return !!(this.invoice_doc && this.invoice_doc.name) || !!(this.restaurant_add_items_context && this.restaurant_add_items_context.is_updating_order);
    }
  },
  methods: {
    // Debounced handlers for better performance
    handleAdditionalDiscountUpdate(e) {
      this.$emit("update:additional_discount", e);
    },
    handleAdditionalDiscountPercentageUpdate(e) {
      this.$emit("update:additional_discount_percentage", e);
    },
    async handleSaveAndClear() {
      this.saveLoading = !0;
      try {
        await this.$emit("save-and-clear");
      } finally {
        this.saveLoading = !1;
      }
    },
    async handleLoadDrafts() {
      this.loadDraftsLoading = !0;
      try {
        await this.$emit("load-drafts");
      } finally {
        this.loadDraftsLoading = !1;
      }
    },
    async handleSelectOrder() {
      this.selectOrderLoading = !0;
      try {
        await this.$emit("select-order");
      } finally {
        this.selectOrderLoading = !1;
      }
    },
    async handleShowOrders() {
      this.showOrdersLoading = !0;
      try {
        await this.$emit("show-orders");
      } finally {
        this.showOrdersLoading = !1;
      }
    },
    async handleSubmitOrder() {
      this.submitOrderLoading = !0;
      try {
        await this.$emit("submit-order");
      } finally {
        this.submitOrderLoading = !1;
      }
    },
    async handleCancelSale() {
      this.cancelLoading = !0;
      try {
        await this.$emit("cancel-sale");
      } finally {
        this.cancelLoading = !1;
      }
    },
    async handleOpenReturns() {
      this.returnsLoading = !0;
      try {
        await this.$emit("open-returns");
      } finally {
        this.returnsLoading = !1;
      }
    },
    async handlePrintDraft() {
      this.printLoading = !0;
      try {
        await this.$emit("print-draft");
      } finally {
        this.printLoading = !1;
      }
    },
    async handleShowPayment() {
      this.paymentLoading = !0;
      try {
        await this.$emit("show-payment");
      } finally {
        this.paymentLoading = !1;
      }
    }
  }
};
function _te(e, t, n, a, r, i) {
  const o = J("v-text-field"), l = J("v-col"), s = J("v-btn"), d = J("v-row"), u = J("v-card");
  return te(), Le(u, {
    class: Ae(["cards mb-0 mt-3 py-2 px-3 rounded-lg resizable", i.isDarkTheme ? "" : "bg-grey-lighten-4"]),
    style: Je((i.isDarkTheme ? "background-color:#1E1E1E;" : "") + "resize: vertical; overflow: auto;")
  }, {
    default: E(() => [
      _(d, {
        dense: "",
        class: "mb-1"
      }, {
        default: E(() => [
          _(l, { cols: "4" }, {
            default: E(() => [
              _(o, {
                "model-value": n.formatFloat(n.subtotal),
                label: e.frappe._("Total"),
                "prepend-inner-icon": "mdi-cash",
                variant: "solo",
                density: "compact",
                readonly: "",
                color: "success",
                class: "summary-field"
              }, null, 8, ["model-value", "label"])
            ]),
            _: 1
          }),
          i.isDirectOrderMode ? (te(), Le(l, {
            key: 0,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "success",
                theme: "dark",
                "prepend-icon": "mdi-cash-multiple",
                onClick: i.handleShowPayment,
                class: "summary-btn pay-btn",
                loading: r.paymentLoading
              }, {
                default: E(() => [
                  ae(j(e.__("PAY")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : i.isStandardRestaurantMode ? (te(), Le(l, {
            key: 1,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "accent",
                theme: "dark",
                "prepend-icon": "mdi-receipt",
                onClick: i.handleSaveAndClear,
                class: "summary-btn",
                loading: r.saveLoading
              }, {
                default: E(() => [
                  ae(j(i.hasExistingOrder ? e.__("Update Order") : e.__("Make Order")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : (te(), Le(l, {
            key: 2,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "accent",
                theme: "dark",
                "prepend-icon": "mdi-content-save",
                onClick: i.handleSaveAndClear,
                class: "summary-btn",
                loading: r.saveLoading
              }, {
                default: E(() => [
                  ae(j(e.__("Save & Clear")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })),
          i.isStandardRestaurantMode ? (te(), Le(l, {
            key: 3,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "info",
                theme: "dark",
                "prepend-icon": "mdi-view-list",
                onClick: i.handleShowOrders,
                class: "summary-btn",
                loading: r.showOrdersLoading
              }, {
                default: E(() => [
                  ae(j(e.__("Show Orders")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : !n.pos_profile.posa_enable_restaurant_mode && n.pos_profile.custom_allow_select_sales_order == 1 ? (te(), Le(l, {
            key: 4,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "info",
                theme: "dark",
                "prepend-icon": "mdi-file-search",
                onClick: i.handleSelectOrder,
                class: "summary-btn",
                loading: r.selectOrderLoading
              }, {
                default: E(() => [
                  ae(j(e.__("Select S.O")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : i.isDirectOrderMode ? (te(), Le(l, {
            key: 5,
            cols: "4"
          })) : ke("", !0)
        ]),
        _: 1
      }),
      _(d, { dense: "" }, {
        default: E(() => [
          _(l, { cols: "4" }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "error",
                theme: "dark",
                "prepend-icon": "mdi-cancel",
                onClick: i.handleCancelSale,
                class: "summary-btn",
                loading: r.cancelLoading
              }, {
                default: E(() => [
                  ae(j(e.__("Cancel Sale")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          }),
          n.pos_profile.posa_allow_return == 1 ? (te(), Le(l, {
            key: 0,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "secondary",
                theme: "dark",
                "prepend-icon": "mdi-undo-variant",
                onClick: i.handleOpenReturns,
                class: "summary-btn",
                loading: r.returnsLoading
              }, {
                default: E(() => [
                  ae(j(e.__("Sales Return")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : n.pos_profile.posa_allow_print_draft_invoices ? (te(), Le(l, {
            key: 1,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "primary",
                theme: "dark",
                "prepend-icon": "mdi-printer",
                onClick: i.handlePrintDraft,
                class: "summary-btn",
                loading: r.printLoading
              }, {
                default: E(() => [
                  ae(j(e.__("Print Draft")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          })) : ke("", !0),
          i.isDirectOrderMode ? ke("", !0) : (te(), Le(l, {
            key: 2,
            cols: "4"
          }, {
            default: E(() => [
              _(s, {
                block: "",
                color: "success",
                theme: "dark",
                "prepend-icon": "mdi-cash-multiple",
                onClick: i.handleShowPayment,
                class: "summary-btn pay-btn",
                loading: r.paymentLoading
              }, {
                default: E(() => [
                  ae(j(e.__("PAY")), 1)
                ]),
                _: 1
              }, 8, ["onClick", "loading"])
            ]),
            _: 1
          }))
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["class", "style"]);
}
const vte = /* @__PURE__ */ on(hte, [["render", _te], ["__scopeId", "data-v-40b26cd5"]]), pte = {
  name: "ItemsTable",
  props: {
    headers: Array,
    items: Array,
    expanded: Array,
    itemsPerPage: Number,
    itemSearch: String,
    pos_profile: Object,
    invoice_doc: Object,
    invoiceType: String,
    stock_settings: Object,
    displayCurrency: String,
    formatFloat: Function,
    formatCurrency: Function,
    currencySymbol: Function,
    isNumber: Function,
    setFormatedQty: Function,
    setFormatedCurrency: Function,
    calcPrices: Function,
    calcUom: Function,
    setSerialNo: Function,
    setBatchQty: Function,
    validateDueDate: Function,
    removeItem: Function,
    subtractOne: Function,
    addOne: Function,
    isReturnInvoice: Boolean,
    toggleOffer: Function,
    changePriceListRate: Function,
    isNegative: Function
  },
  data() {
    return {
      draggedItem: null,
      draggedIndex: null,
      dragOverIndex: null,
      isDragging: !1,
      pendingAdd: null,
      editNameDialog: !1,
      editNameTarget: null,
      editedName: ""
    };
  },
  computed: {
    headerProps() {
      return this.isDarkTheme ? { style: "background-color:#121212;color:#fff" } : {};
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    hide_qty_decimals() {
      try {
        const e = localStorage.getItem("posawesome_item_selector_settings");
        if (e)
          return !!JSON.parse(e).hide_qty_decimals;
      } catch (e) {
        console.error("Failed to load item selector settings:", e);
      }
      return !1;
    }
  },
  methods: {
    onDragOverFromSelector(e) {
      e.dataTransfer.types.includes("application/json") && (e.preventDefault(), e.dataTransfer.dropEffect = "copy");
    },
    onDragEnterFromSelector() {
      this.$emit("show-drop-feedback", !0);
    },
    onDragLeaveFromSelector(e) {
      e.currentTarget.contains(e.relatedTarget) || this.$emit("show-drop-feedback", !1);
    },
    onDropFromSelector(e) {
      e.preventDefault();
      try {
        const t = JSON.parse(e.dataTransfer.getData("application/json"));
        t.type === "item-from-selector" && (this.addItemDebounced(t.item), this.$emit("item-dropped", !1));
      } catch (t) {
        console.error("Error parsing drag data:", t);
      }
    },
    addItem(e) {
      const t = this.items.find(
        (n) => n.item_code === e.item_code && n.uom === e.uom && n.rate === e.rate
      );
      t ? (t.qty += e.qty || 1, t.amount = t.qty * t.rate, this.$forceUpdate()) : this.items.push({ ...e });
    },
    addItemDebounced: $i.debounce(function(e) {
      this.addItem(e);
    }, 50),
    openNameDialog(e) {
      this.editNameTarget = e, this.editedName = e.item_name, this.editNameDialog = !0;
    },
    sanitizeName(e) {
      const t = document.createElement("div");
      return t.innerHTML = e, (t.textContent || t.innerText || "").trim().slice(0, 140);
    },
    saveItemName() {
      if (!this.editNameTarget) return;
      const e = this.sanitizeName(this.editedName);
      this.editNameTarget.original_item_name || (this.editNameTarget.original_item_name = this.editNameTarget.item_name), this.editNameTarget.item_name = e, this.editNameTarget.name_overridden = e !== this.editNameTarget.original_item_name ? 1 : 0, this.editNameDialog = !1;
    },
    resetItemName(e) {
      e && e.original_item_name && (e.item_name = e.original_item_name, e.name_overridden = 0), this.editNameTarget === e && (this.editedName = e.item_name);
    }
  }
}, gte = { class: "d-flex align-center" }, yte = {
  class: "qty-controls",
  style: { display: "flex", "align-items": "center", gap: "4px" }
}, bte = { style: { display: "flex", "justify-content": "flex-start", "align-items": "center" } }, wte = { class: "amount-value" }, kte = { class: "currency-display" }, Ste = { class: "currency-symbol" }, Cte = { class: "currency-display" }, Ate = { class: "currency-symbol" }, xte = ["colspan"], Tte = { class: "expanded-content" }, Ite = { class: "item-details-form" }, Ete = { class: "form-section" }, Pte = { class: "section-header" }, Ote = { class: "section-title" }, Dte = { class: "form-row" }, Bte = { class: "form-field" }, Vte = { class: "form-field" }, Mte = {
  key: 0,
  class: "text-caption mt-1"
}, Lte = { class: "form-field" }, Rte = { class: "form-section" }, Fte = { class: "section-header" }, Nte = { class: "section-title" }, Ute = { class: "form-row" }, $te = { class: "form-field" }, qte = { class: "form-field" }, Hte = { class: "form-field" }, zte = { class: "form-row" }, Wte = { class: "form-field" }, Kte = { class: "form-field" }, jte = {
  key: 0,
  class: "form-field"
}, Yte = { class: "form-section" }, Gte = { class: "section-header" }, Qte = { class: "section-title" }, Jte = { class: "form-row" }, Xte = { class: "form-field" }, Zte = { class: "form-field" }, ene = { class: "form-field" }, tne = { class: "form-row" }, nne = { class: "form-field" }, ane = { class: "form-field" }, rne = {
  key: 0,
  class: "form-field"
}, ine = {
  key: 0,
  class: "form-section"
}, one = { class: "section-header" }, sne = { class: "section-title" }, lne = { class: "form-row" }, cne = { class: "form-field" }, une = { class: "form-row" }, dne = { class: "form-field full-width" }, fne = {
  key: 1,
  class: "form-section"
}, mne = { class: "section-header" }, hne = { class: "section-title" }, _ne = { class: "form-row" }, vne = { class: "form-field" }, pne = { class: "form-field" }, gne = { class: "form-field" }, yne = {
  key: 2,
  class: "form-section"
}, bne = { class: "section-header" }, wne = { class: "section-title" }, kne = { class: "form-row" }, Sne = { class: "form-field" };
function Cne(e, t, n, a, r, i) {
  const o = J("v-chip"), l = J("v-icon"), s = J("v-btn"), d = J("v-checkbox-btn"), u = J("v-text-field"), f = J("v-select"), h = J("v-checkbox"), y = J("v-autocomplete"), p = J("v-list-item-title"), w = J("v-list-item-subtitle"), b = J("v-list-item"), v = J("VueDatePicker"), g = J("v-data-table-virtual"), k = J("v-card-title"), A = J("v-card-text"), C = J("v-spacer"), D = J("v-card-actions"), P = J("v-card"), O = J("v-dialog");
  return te(), Oe("div", {
    class: "my-0 py-0 overflow-y-auto items-table-container",
    style: { height: "calc(100% - 80px)", maxHeight: "calc(100% - 80px)" },
    onDragover: t[5] || (t[5] = (I) => i.onDragOverFromSelector(I)),
    onDrop: t[6] || (t[6] = (I) => i.onDropFromSelector(I)),
    onDragenter: t[7] || (t[7] = (...I) => i.onDragEnterFromSelector && i.onDragEnterFromSelector(...I)),
    onDragleave: t[8] || (t[8] = (...I) => i.onDragLeaveFromSelector && i.onDragLeaveFromSelector(...I))
  }, [
    _(g, {
      headers: n.headers,
      items: n.items,
      theme: e.$theme.current,
      expanded: n.expanded,
      "show-expand": "",
      "item-value": "posa_row_id",
      class: "modern-items-table elevation-2",
      "items-per-page": n.itemsPerPage,
      "expand-on-click": "",
      density: "compact",
      "hide-default-footer": "",
      "single-expand": !0,
      "header-props": i.headerProps,
      "no-data-text": e.__("No items in cart"),
      "onUpdate:expanded": t[0] || (t[0] = (I) => e.$emit(
        "update:expanded",
        I.map((x) => typeof x == "object" ? x.posa_row_id : x)
      )),
      search: n.itemSearch
    }, {
      "item.item_name": E(({ item: I }) => [
        T("div", gte, [
          T("span", null, j(I.item_name), 1),
          I.is_bundle ? (te(), Le(o, {
            key: 0,
            color: "secondary",
            size: "x-small",
            class: "ml-1"
          }, {
            default: E(() => [
              ae(j(e.__("Bundle")), 1)
            ]),
            _: 1
          })) : ke("", !0),
          I.name_overridden ? (te(), Le(o, {
            key: 1,
            color: "primary",
            size: "x-small",
            class: "ml-1"
          }, {
            default: E(() => [
              ae(j(e.__("Edited")), 1)
            ]),
            _: 1
          })) : ke("", !0),
          n.pos_profile.posa_allow_line_item_name_override && !I.posa_is_replace ? (te(), Le(l, {
            key: 2,
            size: "x-small",
            class: "ml-1",
            onClick: ua((x) => i.openNameDialog(I), ["stop"])
          }, {
            default: E(() => t[9] || (t[9] = [
              ae("mdi-pencil", -1)
            ])),
            _: 2,
            __: [9]
          }, 1032, ["onClick"])) : ke("", !0),
          I.name_overridden ? (te(), Le(l, {
            key: 3,
            size: "x-small",
            class: "ml-1",
            onClick: ua((x) => i.resetItemName(I), ["stop"])
          }, {
            default: E(() => t[10] || (t[10] = [
              ae("mdi-undo", -1)
            ])),
            _: 2,
            __: [10]
          }, 1032, ["onClick"])) : ke("", !0)
        ])
      ]),
      "item.qty": E(({ item: I }) => [
        T("div", yte, [
          _(s, {
            disabled: !!I.posa_is_replace,
            size: "x-small",
            color: "warning",
            variant: "text",
            icon: "",
            onClick: ua((x) => n.subtractOne(I), ["stop"])
          }, {
            default: E(() => [
              _(l, {
                size: "small",
                style: { "font-weight": "bold" }
              }, {
                default: E(() => t[11] || (t[11] = [
                  ae("mdi-minus", -1)
                ])),
                _: 1,
                __: [11]
              })
            ]),
            _: 2
          }, 1032, ["disabled", "onClick"]),
          T("div", {
            class: Ae(["amount-value", { "negative-number": n.isNegative(I.qty) }]),
            style: { "min-width": "40px", "text-align": "center" }
          }, j(n.formatFloat(I.qty, i.hide_qty_decimals ? 0 : void 0)), 3),
          _(s, {
            disabled: !!I.posa_is_replace || I.is_stock_item && (!n.stock_settings.allow_negative_stock || n.pos_profile.posa_block_sale_beyond_available_qty) && I.max_qty !== void 0 && I.qty >= I.max_qty,
            size: "x-small",
            color: "success",
            variant: "text",
            icon: "",
            onClick: ua((x) => n.addOne(I), ["stop"])
          }, {
            default: E(() => [
              _(l, {
                size: "small",
                style: { "font-weight": "bold" }
              }, {
                default: E(() => t[12] || (t[12] = [
                  ae("mdi-plus", -1)
                ])),
                _: 1,
                __: [12]
              })
            ]),
            _: 2
          }, 1032, ["disabled", "onClick"])
        ])
      ]),
      "item.rate": E(({ item: I }) => [
        T("span", {
          class: Ae(["amount-value", { "negative-number": n.isNegative(I.rate) }])
        }, j(n.formatFloat(I.rate)), 3)
      ]),
      "item.amount": E(({ item: I }) => [
        T("span", {
          class: Ae(["amount-value", { "negative-number": n.isNegative(I.qty * I.rate) }])
        }, j(n.formatFloat(I.qty * I.rate)), 3)
      ]),
      "item.actions": E(({ item: I }) => [
        T("div", bte, [
          _(s, {
            disabled: !!I.posa_is_replace,
            size: "small",
            color: "error",
            variant: "text",
            icon: "",
            onClick: ua((x) => n.removeItem(I), ["stop"])
          }, {
            default: E(() => [
              _(l, { size: "small" }, {
                default: E(() => t[13] || (t[13] = [
                  ae("mdi-trash-can-outline", -1)
                ])),
                _: 1,
                __: [13]
              })
            ]),
            _: 2
          }, 1032, ["disabled", "onClick"])
        ])
      ]),
      "item.discount_value": E(({ item: I }) => [
        T("div", wte, j(n.formatFloat(
          I.discount_percentage || (I.price_list_rate ? I.discount_amount / I.price_list_rate * 100 : 0)
        )) + "% ", 1)
      ]),
      "item.discount_amount": E(({ item: I }) => [
        T("div", kte, [
          T("span", Ste, j(n.currencySymbol(n.displayCurrency)), 1),
          T("span", {
            class: Ae(["amount-value", { "negative-number": n.isNegative(I.discount_amount || 0) }])
          }, j(n.formatCurrency(I.discount_amount || 0)), 3)
        ])
      ]),
      "item.price_list_rate": E(({ item: I }) => [
        T("div", Cte, [
          T("span", Ate, j(n.currencySymbol(n.displayCurrency)), 1),
          T("span", {
            class: Ae(["amount-value", { "negative-number": n.isNegative(I.price_list_rate) }])
          }, j(n.formatCurrency(I.price_list_rate)), 3)
        ])
      ]),
      "item.posa_is_offer": E(({ item: I }) => [
        _(d, {
          modelValue: I.posa_is_offer,
          "onUpdate:modelValue": (x) => I.posa_is_offer = x,
          class: "center",
          onChange: (x) => n.toggleOffer(I)
        }, null, 8, ["modelValue", "onUpdate:modelValue", "onChange"])
      ]),
      "expanded-row": E(({ item: I }) => [
        T("td", {
          colspan: n.headers.length,
          class: "ma-0 pa-0"
        }, [
          T("div", Tte, [
            T("div", Ite, [
              T("div", Ete, [
                T("div", Pte, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: E(() => t[14] || (t[14] = [
                      ae("mdi-information-outline", -1)
                    ])),
                    _: 1,
                    __: [14]
                  }),
                  T("span", Ote, j(e.__("Basic Information")), 1)
                ]),
                T("div", Dte, [
                  T("div", Bte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Item Code"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: I.item_code,
                      "onUpdate:modelValue": (x) => I.item_code = x,
                      disabled: "",
                      "prepend-inner-icon": "mdi-barcode"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  T("div", Vte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(I.qty, i.hide_qty_decimals ? 0 : void 0),
                      onChange: (x) => n.setFormatedQty(I, "qty", null, !1, x.target.value),
                      rules: [n.isNumber],
                      disabled: !!I.posa_is_replace,
                      "prepend-inner-icon": "mdi-numeric"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "rules", "disabled"]),
                    I.is_stock_item && I.max_qty !== void 0 ? (te(), Oe("div", Mte, j(e.__("In stock: {0}", [
                      n.formatFloat(
                        I.max_qty,
                        i.hide_qty_decimals ? 0 : void 0
                      )
                    ])), 1)) : ke("", !0)
                  ]),
                  T("div", Lte, [
                    _(f, {
                      density: "compact",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("UOM"),
                      modelValue: I.uom,
                      "onUpdate:modelValue": [(x) => I.uom = x, (x) => n.calcUom(I, x)],
                      items: I.item_uoms,
                      variant: "outlined",
                      "item-title": "uom",
                      "item-value": "uom",
                      "hide-details": "",
                      disabled: !!I.posa_is_replace || n.isReturnInvoice && n.invoice_doc.return_against,
                      "prepend-inner-icon": "mdi-weight"
                    }, null, 8, ["bg-color", "label", "modelValue", "onUpdate:modelValue", "items", "disabled"])
                  ])
                ])
              ]),
              T("div", Rte, [
                T("div", Fte, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: E(() => t[15] || (t[15] = [
                      ae("mdi-currency-usd", -1)
                    ])),
                    _: 1,
                    __: [15]
                  }),
                  T("span", Nte, j(e.__("Pricing & Discounts")), 1)
                ]),
                T("div", Ute, [
                  T("div", $te, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "rate",
                      label: e.frappe._("Rate"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(I.rate),
                      onChange: (x) => [
                        n.setFormatedCurrency(I, "rate", null, !1, x),
                        n.calcPrices(I, x.target.value, x)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_rate || !!I.posa_is_replace || !!I.posa_offer_applied,
                      "prepend-inner-icon": "mdi-currency-usd"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ]),
                  T("div", qte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "discount_percentage",
                      label: e.frappe._("Discount %"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(I.discount_percentage || 0),
                      onChange: (x) => [
                        n.setFormatedCurrency(
                          I,
                          "discount_percentage",
                          null,
                          !1,
                          x
                        ),
                        n.calcPrices(I, x.target.value, x)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_item_discount || !!I.posa_is_replace || !!I.posa_offer_applied,
                      "prepend-inner-icon": "mdi-percent"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ]),
                  T("div", Hte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      id: "discount_amount",
                      label: e.frappe._("Discount Amount"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(I.discount_amount || 0),
                      onChange: (x) => [
                        n.setFormatedCurrency(
                          I,
                          "discount_amount",
                          null,
                          !1,
                          x
                        ),
                        n.calcPrices(I, x.target.value, x)
                      ],
                      disabled: !n.pos_profile.posa_allow_user_to_edit_item_discount || !!I.posa_is_replace || !!I.posa_offer_applied,
                      "prepend-inner-icon": "mdi-tag-minus"
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "disabled"])
                  ])
                ]),
                T("div", zte, [
                  T("div", Wte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Price List Rate"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(I.price_list_rate || 0),
                      disabled: !n.pos_profile.posa_allow_price_list_rate_change,
                      "prepend-inner-icon": "mdi-format-list-numbered",
                      prefix: n.currencySymbol(n.pos_profile.currency),
                      onChange: (x) => n.changePriceListRate(I)
                    }, null, 8, ["label", "bg-color", "model-value", "disabled", "prefix", "onChange"])
                  ]),
                  T("div", Kte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Total Amount"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatCurrency(I.qty * I.rate),
                      disabled: "",
                      "prepend-inner-icon": "mdi-calculator"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  n.pos_profile.posa_allow_price_list_rate_change ? (te(), Oe("div", jte, [
                    _(s, {
                      size: "small",
                      color: "primary",
                      variant: "outlined",
                      class: "change-price-btn",
                      onClick: ua((x) => n.changePriceListRate(I), ["stop"])
                    }, {
                      default: E(() => [
                        _(l, {
                          size: "small",
                          class: "mr-1"
                        }, {
                          default: E(() => t[16] || (t[16] = [
                            ae("mdi-pencil", -1)
                          ])),
                          _: 1,
                          __: [16]
                        }),
                        ae(" " + j(e.__("Change Price")), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ])) : ke("", !0)
                ])
              ]),
              T("div", Yte, [
                T("div", Gte, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: E(() => t[17] || (t[17] = [
                      ae("mdi-warehouse", -1)
                    ])),
                    _: 1,
                    __: [17]
                  }),
                  T("span", Qte, j(e.__("Stock Information")), 1)
                ]),
                T("div", Jte, [
                  T("div", Xte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Available QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(I.actual_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-package-variant"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  T("div", Zte, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Stock QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(I.stock_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-scale-balance"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  T("div", ene, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Stock UOM"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: I.stock_uom,
                      "onUpdate:modelValue": (x) => I.stock_uom = x,
                      disabled: "",
                      "prepend-inner-icon": "mdi-weight-pound"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ])
                ]),
                T("div", tne, [
                  T("div", nne, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Warehouse"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: I.warehouse,
                      "onUpdate:modelValue": (x) => I.warehouse = x,
                      disabled: "",
                      "prepend-inner-icon": "mdi-warehouse"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  T("div", ane, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Group"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: I.item_group,
                      "onUpdate:modelValue": (x) => I.item_group = x,
                      disabled: "",
                      "prepend-inner-icon": "mdi-folder-outline"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  I.posa_offer_applied ? (te(), Oe("div", rne, [
                    _(h, {
                      density: "compact",
                      label: e.frappe._("Offer Applied"),
                      modelValue: I.posa_offer_applied,
                      "onUpdate:modelValue": (x) => I.posa_offer_applied = x,
                      readonly: "",
                      "hide-details": "",
                      class: "mt-1",
                      color: "success"
                    }, null, 8, ["label", "modelValue", "onUpdate:modelValue"])
                  ])) : ke("", !0)
                ])
              ]),
              I.has_serial_no || I.serial_no ? (te(), Oe("div", ine, [
                T("div", one, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: E(() => t[18] || (t[18] = [
                      ae("mdi-barcode-scan", -1)
                    ])),
                    _: 1,
                    __: [18]
                  }),
                  T("span", sne, j(e.__("Serial Numbers")), 1)
                ]),
                T("div", lne, [
                  T("div", cne, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Serial No QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: I.serial_no_selected_count,
                      "onUpdate:modelValue": (x) => I.serial_no_selected_count = x,
                      type: "number",
                      disabled: "",
                      "prepend-inner-icon": "mdi-counter"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ])
                ]),
                T("div", une, [
                  T("div", dne, [
                    _(y, {
                      modelValue: I.serial_no_selected,
                      "onUpdate:modelValue": [(x) => I.serial_no_selected = x, (x) => n.setSerialNo(I)],
                      items: I.serial_no_data,
                      "item-title": "serial_no",
                      "item-value": "serial_no",
                      variant: "outlined",
                      density: "compact",
                      chips: "",
                      color: "primary",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("Serial No"),
                      multiple: "",
                      "prepend-inner-icon": "mdi-barcode"
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "items", "bg-color", "label"])
                  ])
                ])
              ])) : ke("", !0),
              I.has_batch_no || I.batch_no ? (te(), Oe("div", fne, [
                T("div", mne, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: E(() => t[19] || (t[19] = [
                      ae("mdi-package-variant-closed", -1)
                    ])),
                    _: 1,
                    __: [19]
                  }),
                  T("span", hne, j(e.__("Batch Information")), 1)
                ]),
                T("div", _ne, [
                  T("div", vne, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Batch No. Available QTY"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      "model-value": n.formatFloat(I.actual_batch_qty),
                      disabled: "",
                      "prepend-inner-icon": "mdi-package-variant"
                    }, null, 8, ["label", "bg-color", "model-value"])
                  ]),
                  T("div", pne, [
                    _(u, {
                      density: "compact",
                      variant: "outlined",
                      color: "primary",
                      label: e.frappe._("Batch No Expiry Date"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      "hide-details": "",
                      modelValue: I.batch_no_expiry_date,
                      "onUpdate:modelValue": (x) => I.batch_no_expiry_date = x,
                      disabled: "",
                      "prepend-inner-icon": "mdi-calendar-clock"
                    }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                  ]),
                  T("div", gne, [
                    _(y, {
                      modelValue: I.batch_no,
                      "onUpdate:modelValue": [(x) => I.batch_no = x, (x) => n.setBatchQty(I, x)],
                      items: I.batch_no_data,
                      "item-title": "batch_no",
                      variant: "outlined",
                      density: "compact",
                      color: "primary",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field",
                      label: e.frappe._("Batch No"),
                      "hide-details": "",
                      "prepend-inner-icon": "mdi-package-variant-closed"
                    }, {
                      item: E(({ props: x, item: M }) => [
                        _(b, ea(Aa(x)), {
                          default: E(() => [
                            _(p, {
                              innerHTML: M.raw.batch_no
                            }, null, 8, ["innerHTML"]),
                            _(w, {
                              innerHTML: `Available QTY  '${M.raw.batch_qty}' - Expiry Date ${M.raw.expiry_date}`
                            }, null, 8, ["innerHTML"])
                          ]),
                          _: 2
                        }, 1040)
                      ]),
                      _: 2
                    }, 1032, ["modelValue", "onUpdate:modelValue", "items", "bg-color", "label"])
                  ])
                ])
              ])) : ke("", !0),
              n.pos_profile.posa_allow_sales_order && n.invoiceType == "Order" ? (te(), Oe("div", yne, [
                T("div", bne, [
                  _(l, {
                    size: "small",
                    class: "section-icon"
                  }, {
                    default: E(() => t[20] || (t[20] = [
                      ae("mdi-calendar-check", -1)
                    ])),
                    _: 1,
                    __: [20]
                  }),
                  T("span", wne, j(e.__("Delivery Information")), 1)
                ]),
                T("div", kne, [
                  T("div", Sne, [
                    _(v, {
                      modelValue: I.posa_delivery_date,
                      "onUpdate:modelValue": [(x) => I.posa_delivery_date = x, (x) => n.validateDueDate(I)],
                      "model-type": "format",
                      format: "dd-MM-yyyy",
                      "min-date": /* @__PURE__ */ new Date(),
                      "auto-apply": "",
                      dark: i.isDarkTheme
                    }, null, 8, ["modelValue", "onUpdate:modelValue", "min-date", "dark"])
                  ])
                ])
              ])) : ke("", !0)
            ])
          ])
        ], 8, xte)
      ]),
      _: 1
    }, 8, ["headers", "items", "theme", "expanded", "items-per-page", "header-props", "no-data-text", "search"]),
    _(O, {
      modelValue: r.editNameDialog,
      "onUpdate:modelValue": t[4] || (t[4] = (I) => r.editNameDialog = I),
      "max-width": "400"
    }, {
      default: E(() => [
        _(P, null, {
          default: E(() => [
            _(k, null, {
              default: E(() => [
                ae(j(e.__("Item Name")), 1)
              ]),
              _: 1
            }),
            _(A, null, {
              default: E(() => [
                _(u, {
                  modelValue: r.editedName,
                  "onUpdate:modelValue": t[1] || (t[1] = (I) => r.editedName = I),
                  maxlength: 140
                }, null, 8, ["modelValue"])
              ]),
              _: 1
            }),
            _(D, null, {
              default: E(() => [
                r.editNameTarget && r.editNameTarget.name_overridden ? (te(), Le(s, {
                  key: 0,
                  variant: "text",
                  onClick: t[2] || (t[2] = (I) => i.resetItemName(r.editNameTarget))
                }, {
                  default: E(() => [
                    ae(j(e.__("Reset")), 1)
                  ]),
                  _: 1
                })) : ke("", !0),
                _(C),
                _(s, {
                  variant: "text",
                  onClick: t[3] || (t[3] = (I) => r.editNameDialog = !1)
                }, {
                  default: E(() => [
                    ae(j(e.__("Cancel")), 1)
                  ]),
                  _: 1
                }),
                _(s, {
                  color: "primary",
                  variant: "text",
                  onClick: i.saveItemName
                }, {
                  default: E(() => [
                    ae(j(e.__("Save")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ], 32);
}
const Ane = /* @__PURE__ */ on(pte, [["render", Cne], ["__scopeId", "data-v-a7f78f42"]]);
function xne() {
  return {
    setSerialNo: (n, a) => {
      console.log(n), n.has_serial_no && (n.serial_no = "", n.serial_no_selected.forEach((r) => {
        n.serial_no += r + `
`;
      }), n.serial_no_selected_count = n.serial_no_selected.length, n.serial_no_selected_count != n.stock_qty && (n.qty = n.serial_no_selected_count, a && a()));
    },
    setBatchQty: (n, a, r = !0, i) => {
      console.log("Setting batch quantity:", n, a);
      const o = i.items.filter(
        (d) => d.item_code == n.item_code && d.posa_row_id != n.posa_row_id
      ), l = {};
      n.batch_no_data.forEach((d) => {
        l[d.batch_no] = {
          ...d,
          used_qty: 0,
          remaining_qty: d.batch_qty
        }, o.forEach((u) => {
          u.batch_no && u.batch_no == d.batch_no && (l[d.batch_no].used_qty += u.qty, l[d.batch_no].remaining_qty -= u.qty, l[d.batch_no].batch_qty -= u.qty);
        });
      });
      const s = Object.values(l).filter((d) => d.remaining_qty > 0).sort((d, u) => d.expiry_date && u.expiry_date ? new Date(d.expiry_date) - new Date(u.expiry_date) : d.expiry_date ? -1 : u.expiry_date ? 1 : d.manufacturing_date && u.manufacturing_date ? new Date(d.manufacturing_date) - new Date(u.manufacturing_date) : d.manufacturing_date ? -1 : u.manufacturing_date ? 1 : u.remaining_qty - d.remaining_qty);
      if (s.length > 0) {
        let d = null;
        if (a && (d = s.find((u) => u.batch_no == a)), d || (d = s[0]), n.batch_no = d.batch_no, n.actual_batch_qty = d.batch_qty, n.batch_no_expiry_date = d.expiry_date, d.batch_price) {
          n.base_batch_price = d.batch_price;
          const u = i.price_list_currency || i.pos_profile.currency;
          i.selected_currency !== u ? n.batch_price = i.flt(
            d.batch_price / i.exchange_rate,
            i.currency_precision
          ) : n.batch_price = d.batch_price, n.base_price_list_rate = n.base_batch_price, n.base_rate = n.base_batch_price, i.selected_currency !== u ? (n.price_list_rate = n.batch_price, n.rate = n.batch_price) : (n.price_list_rate = n.base_batch_price, n.rate = n.base_batch_price), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0, n.amount = i.flt(n.qty * n.rate, i.currency_precision), n.base_amount = i.flt(n.qty * n.base_rate, i.currency_precision), console.log("Updated batch prices:", {
            base_batch_price: n.base_batch_price,
            batch_price: n.batch_price,
            rate: n.rate,
            base_rate: n.base_rate,
            price_list_rate: n.price_list_rate,
            exchange_rate: i.exchange_rate
          });
        } else r && i.update_item_detail && (n.batch_price = null, n.base_batch_price = null, i.update_item_detail(n));
      } else
        n.batch_no = null, n.actual_batch_qty = null, n.batch_no_expiry_date = null, n.batch_price = null, n.base_batch_price = null;
      n.batch_no_data = s, i.forceUpdate && i.forceUpdate();
    }
  };
}
function Tne() {
  return {
    updateDiscountAmount: (a) => {
      const r = flt(a.additional_discount_percentage);
      if (r < -100 || r > 100) {
        a.additional_discount_percentage = 0, a.additional_discount = 0;
        return;
      }
      a.Total && a.Total !== 0 ? a.additional_discount = a.Total * r / 100 : a.additional_discount = 0;
    },
    calcPrices: (a, r, i, o) => {
      if (!i?.target?.id || !a) return;
      const l = i.target.id;
      let s = flt(r, o.currency_precision);
      try {
        l === "rate" && (a._manual_rate_set = !0), s < 0 && (s = 0, o.eventBus.emit("show_message", {
          title: __("Negative values not allowed"),
          color: "error"
        }));
        const d = o.price_list_currency || o.pos_profile.currency, u = o.selected_currency !== d ? o.flt(a.price_list_rate / o.exchange_rate, o.currency_precision) : a.price_list_rate;
        switch (l) {
          case "rate":
            a.base_rate = o.flt(
              s / o.exchange_rate,
              o.currency_precision
            ), a.rate = s, a.discount_amount = o.flt(
              u - a.rate,
              o.currency_precision
            ), a.base_discount_amount = o.flt(
              a.price_list_rate - a.base_rate,
              o.currency_precision
            ), u && (a.discount_percentage = o.flt(
              a.discount_amount / u * 100,
              o.float_precision
            ));
            break;
          case "discount_amount":
            s = Math.min(s, u), a.base_discount_amount = o.flt(
              s / o.exchange_rate,
              o.currency_precision
            ), a.discount_amount = s, a.rate = o.flt(
              u - a.discount_amount,
              o.currency_precision
            ), a.base_rate = o.flt(
              a.price_list_rate - a.base_discount_amount,
              o.currency_precision
            ), u ? a.discount_percentage = o.flt(
              a.discount_amount / u * 100,
              o.float_precision
            ) : a.discount_percentage = 0;
            break;
          case "discount_percentage":
            s = Math.min(s, 100), a.discount_percentage = o.flt(s, o.float_precision), a.discount_amount = o.flt(
              u * a.discount_percentage / 100,
              o.currency_precision
            ), a.base_discount_amount = o.flt(
              a.price_list_rate * a.discount_percentage / 100,
              o.currency_precision
            ), a.rate = o.flt(
              u - a.discount_amount,
              o.currency_precision
            ), a.base_rate = o.flt(
              a.price_list_rate - a.base_discount_amount,
              o.currency_precision
            );
            break;
        }
        a.rate < 0 && (a.rate = 0, a.base_rate = 0, a.discount_amount = u, a.base_discount_amount = a.price_list_rate, a.discount_percentage = 100), o.calc_stock_qty && o.calc_stock_qty(a, a.qty), o.forceUpdate && o.forceUpdate();
      } catch (d) {
        console.error("Error calculating prices:", d), o.eventBus.emit("show_message", {
          title: __("Error calculating prices"),
          color: "error"
        });
      }
    },
    calcItemPrice: (a, r) => {
      if (a._skip_calc) {
        a._skip_calc = !1;
        return;
      }
      if (a.locked_price) {
        a.amount = r.flt(a.qty * a.rate, r.currency_precision);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? a.base_amount = r.flt(
          a.amount / r.exchange_rate,
          r.currency_precision
        ) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
        return;
      }
      if (a.posa_offer_applied) {
        a.amount = r.flt(a.qty * a.rate, r.currency_precision);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? a.base_amount = r.flt(
          a.amount / r.exchange_rate,
          r.currency_precision
        ) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
        return;
      }
      if (a.price_list_rate) {
        a.base_price_list_rate || (a.base_price_list_rate = a.price_list_rate, a.base_rate = a.rate);
        const o = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== o ? (a.price_list_rate = r.flt(
          a.base_price_list_rate / r.exchange_rate,
          r.currency_precision
        ), a.rate = r.flt(
          a.base_rate / r.exchange_rate,
          r.currency_precision
        )) : (a.price_list_rate = a.base_price_list_rate, a.rate = a.base_rate);
      }
      if (a.discount_percentage) {
        const o = a.price_list_rate, l = r.flt(
          o * a.discount_percentage / 100,
          r.currency_precision
        );
        a.discount_amount = l, a.rate = r.flt(o - l, r.currency_precision);
        const s = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== s ? a.base_discount_amount = r.flt(
          l / r.exchange_rate,
          r.currency_precision
        ) : a.base_discount_amount = a.discount_amount;
      }
      a.amount = r.flt(a.qty * a.rate, r.currency_precision);
      const i = r.price_list_currency || r.pos_profile.currency;
      r.selected_currency !== i ? a.base_amount = r.flt(a.amount / r.exchange_rate, r.currency_precision) : a.base_amount = a.amount, r.forceUpdate && r.forceUpdate();
    }
  };
}
const ZA = /* @__PURE__ */ new Map();
function Ine() {
  return { getBundleComponents: async (t) => {
    const n = ZA.get(t), a = Date.now();
    if (n && a - n.ts < 6e4)
      return n.data;
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.bundles.get_bundle_components",
        args: { bundles: [t] }
      }), i = r.message && r.message[t] ? r.message[t] : [];
      return ZA.set(t, { data: i, ts: a }), i;
    } catch (r) {
      return console.error("Failed to fetch bundle components", r), [];
    }
  } };
}
function Ene() {
  const e = (s, d) => {
    const u = d.items.findIndex((f) => f.posa_row_id == s.posa_row_id);
    u >= 0 && d.items.splice(u, 1), s.is_bundle && (d.packed_items = d.packed_items.filter((f) => f.bundle_id !== s.bundle_id)), d.expanded = d.expanded.filter((f) => f !== s.posa_row_id);
  }, { getBundleComponents: t } = Ine(), n = async (s, d) => {
    const u = await t(s.item_code);
    if (!(!u || !u.length)) {
      s.is_bundle = 1, s.is_bundle_parent = 1, s.is_stock_item = 0, s.warehouse = null, s.stock_qty = 0, s.bundle_id = d.makeid ? d.makeid(10) : Math.random().toString(36).substr(2, 10), d.items = [...d.items];
      for (const f of u) {
        const h = {
          parent_item: s.item_code,
          bundle_id: s.bundle_id,
          item_code: f.item_code,
          item_name: f.item_name || f.item_code,
          qty: (s.qty || 1) * f.qty,
          stock_qty: (s.qty || 1) * f.qty,
          uom: f.uom,
          rate: 0,
          child_qty_per_bundle: f.qty,
          warehouse: d.pos_profile.warehouse,
          is_stock_item: 1,
          has_batch_no: f.is_batch,
          has_serial_no: f.is_serial,
          posa_row_id: d.makeid ? d.makeid(20) : Math.random().toString(36).substr(2, 20),
          posa_offers: JSON.stringify([]),
          posa_offer_applied: 0,
          posa_is_offer: 0
        };
        d.packed_items.push(h), d.update_item_detail && (d.update_item_detail(h, !1), d.calc_stock_qty && d.calc_stock_qty(h, h.qty)), d.fetch_available_qty && d.fetch_available_qty(h);
      }
    }
  }, a = async (s, d) => {
    s.uom || (s.uom = s.stock_uom);
    let u = -1;
    d.new_line || (d.pos_profile.posa_auto_set_batch && s.has_batch_no ? u = d.items.findIndex(
      (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace
    ) : u = d.items.findIndex(
      (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace && (h.batch_no && s.batch_no && h.batch_no === s.batch_no || !h.batch_no && !s.batch_no)
    ));
    let f;
    if (u === -1 || d.new_line) {
      f = r(s, d), s.has_serial_no && s.to_set_serial_no && (f.serial_no_selected = [], f.serial_no_selected.push(s.to_set_serial_no), s.to_set_serial_no = null), s.has_batch_no && s.to_set_batch_no && (f.batch_no = s.to_set_batch_no, s.to_set_batch_no = null, s.batch_no = null, d.setBatchQty && d.setBatchQty(f, f.batch_no, !1)), d.isReturnInvoice && (f.qty = -Math.abs(f.qty || 1)), d.calc_uom && f.uom && await d.calc_uom(f, f.uom);
      try {
        const h = await frappe.call({
          method: "posawesome.posawesome.api.items.get_price_for_uom",
          args: {
            item_code: f.item_code,
            price_list: d.get_price_list ? d.get_price_list() : null,
            uom: f.uom
          }
        });
        if (h.message) {
          const y = parseFloat(h.message), p = d.price_list_currency || d.pos_profile.currency;
          let w = y;
          d.pos_profile.posa_allow_multi_currency && d.selected_currency && d.selected_currency !== p && (w = y * (d.exchange_rate || 1)), Object.assign(f, {
            rate: w,
            price_list_rate: w,
            base_rate: y,
            base_price_list_rate: y,
            _manual_rate_set: !0,
            skip_force_update: !0
          });
        }
      } catch (h) {
        console.warn("UOM price fetch failed", h);
      }
      if (d.new_line || (d.pos_profile.posa_auto_set_batch && s.has_batch_no ? u = d.items.findIndex(
        (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace
      ) : u = d.items.findIndex(
        (h) => h.item_code === s.item_code && h.uom === s.uom && !h.posa_is_offer && !h.posa_is_replace && (h.batch_no && s.batch_no && h.batch_no === s.batch_no || !h.batch_no && !s.batch_no)
      )), u === -1 || d.new_line) {
        if (d.items.unshift(f), await n(f, d), d.update_item_detail && d.update_item_detail(f, !1), d.fetch_available_qty && d.fetch_available_qty(f), d.isReturnInvoice && d.pos_profile.posa_allow_return_without_invoice && f.has_batch_no && !d.pos_profile.posa_auto_set_batch) {
          const h = Array.isArray(f.batch_no_data) && f.batch_no_data.length > 0 ? f.batch_no_data : null;
          if (h) {
            const y = new frappe.ui.Dialog({
              title: __("Select Batch"),
              fields: [
                {
                  fieldtype: "Select",
                  fieldname: "batch",
                  label: __("Batch"),
                  options: h.map((p) => `${p.batch_no} | ${p.batch_qty}`).join(`
`),
                  reqd: !d.pos_profile.posa_allow_free_batch_return
                }
              ],
              primary_action_label: __("Select"),
              primary_action(p) {
                const w = p.batch ? p.batch.split("|")[0].trim() : null;
                d.setBatchQty(f, w, !1), y.hide();
              }
            });
            y.onhide = () => {
              f.batch_no || d.setBatchQty(f, null, !1);
            }, y.show();
          } else
            d.setBatchQty(f, null, !1);
        }
        (!d.pos_profile.posa_auto_set_batch && f.has_batch_no || f.has_serial_no) && Dt(() => {
          d.expanded = [f.posa_row_id];
        });
      } else {
        const h = d.items[u];
        d.update_items_details && d.update_items_details([h]), f.serial_no_selected && f.serial_no_selected.length && f.serial_no_selected.forEach((y) => {
          h.serial_no_selected.includes(y) || h.serial_no_selected.push(y);
        }), d.isReturnInvoice ? h.qty -= Math.abs(f.qty || 1) : h.qty += f.qty || 1, d.calc_stock_qty && d.calc_stock_qty(h, h.qty), h.has_batch_no && h.batch_no && d.setBatchQty && d.setBatchQty(h, h.batch_no, !1), d.setSerialNo && d.setSerialNo(h), d.calc_uom && h.uom && await d.calc_uom(h, h.uom), d.fetch_available_qty && d.fetch_available_qty(h);
      }
    } else {
      const h = d.items[u];
      if (d.update_items_details && d.update_items_details([h]), s.has_serial_no && s.to_set_serial_no) {
        if (h.serial_no_selected.includes(s.to_set_serial_no)) {
          d.eventBus.emit("show_message", {
            title: __("This Serial Number {0} has already been added!", [s.to_set_serial_no]),
            color: "warning"
          }), s.to_set_serial_no = null;
          return;
        }
        h.serial_no_selected.push(s.to_set_serial_no), s.to_set_serial_no = null;
      }
      d.isReturnInvoice ? h.qty -= Math.abs(s.qty || 1) : h.qty += s.qty || 1, d.calc_stock_qty && d.calc_stock_qty(h, h.qty), h.has_batch_no && h.batch_no && d.setBatchQty && d.setBatchQty(h, h.batch_no, !1), d.setSerialNo && d.setSerialNo(h), d.calc_uom && h.uom && await d.calc_uom(h, h.uom), d.fetch_available_qty && d.fetch_available_qty(h);
    }
    d.forceUpdate && d.forceUpdate(), f && (!d.pos_profile.posa_auto_set_batch && f.has_batch_no || f.has_serial_no) && (d.expanded = [f.posa_row_id]);
  }, r = (s, d) => {
    const u = { ...s };
    u.original_item_name = u.item_name, u.name_overridden = 0, u.warehouse || (u.warehouse = d.pos_profile.warehouse), s.qty || (s.qty = 1), s.posa_is_offer || (s.posa_is_offer = 0), s.posa_is_replace || (s.posa_is_replace = ""), u._manual_rate_set = !1, d.isReturnInvoice && s.qty > 0 && (s.qty = -Math.abs(s.qty)), u.stock_qty = s.qty, u.discount_amount = 0, u.discount_percentage = 0, u.discount_amount_per_item = 0, u.price_list_rate = s.rate;
    const f = d.price_list_currency || d.pos_profile.currency;
    return d.selected_currency !== f ? (u.base_price_list_rate = s.rate / d.exchange_rate, u.base_rate = s.rate / d.exchange_rate, u.base_discount_amount = 0) : (u.base_price_list_rate = s.rate, u.base_rate = s.rate, u.base_discount_amount = 0), u.qty = s.qty, u.uom = s.uom ? s.uom : s.stock_uom, u.item_uoms = s.item_uoms || [], u.item_uoms.length === 0 && u.stock_uom && u.item_uoms.push({ uom: u.stock_uom, conversion_factor: 1 }), u.actual_batch_qty = "", u.batch_no_expiry_date = s.batch_no_expiry_date || null, u.conversion_factor = 1, u.posa_offers = JSON.stringify([]), u.posa_offer_applied = 0, u.posa_is_offer = s.posa_is_offer, u.posa_is_replace = s.posa_is_replace || null, u.is_free_item = 0, u.is_bundle = 0, u.is_bundle_parent = 0, u.bundle_id = null, u.posa_notes = "", u.posa_delivery_date = "", u.posa_row_id = d.makeid ? d.makeid(20) : Math.random().toString(36).substr(2, 20), u.has_serial_no && !u.serial_no_selected && (u.serial_no_selected = [], u.serial_no_selected_count = 0), (!d.pos_profile.posa_auto_set_batch && u.has_batch_no || u.has_serial_no) && d.expanded.push(u.posa_row_id), u;
  }, i = (s) => {
    s.items = [], s.packed_items = [], s.posa_offers = [], s.expanded = [], s.eventBus.emit("set_pos_coupons", []), s.posa_coupons = [], s.invoice_doc = "", s.return_doc = "", s.discount_amount = 0, s.additional_discount = 0, s.additional_discount_percentage = 0, s.delivery_charges_rate = 0, s.selected_delivery_charge = "", s.posting_date = frappe.datetime.nowdate(), s.update_price_list && s.update_price_list(), s.customer = s.pos_profile.customer, s.eventBus.emit("set_customer_readonly", !1), s.invoiceType = s.pos_profile.posa_default_sales_order ? "Order" : "Invoice", s.invoiceTypes = ["Invoice", "Order"];
  };
  function o(s, d) {
    const u = s.find(
      (f) => f.item_code === d.item_code && f.uom === d.uom && f.rate === d.rate
    );
    u ? (u.qty += d.qty || 1, u.amount = u.qty * u.rate) : s.push({ ...d });
  }
  const l = $i.debounce(o, 50);
  return {
    removeItem: e,
    addItem: a,
    getNewItem: r,
    clearInvoice: i,
    groupAndAddItem: o,
    groupAndAddItemDebounced: l
  };
}
function Pne() {
  return {
    calcUom: async (n, a, r) => {
      let i = n.item_uoms.find((u) => u.uom == a);
      if (!i && r.getItemUOMs) {
        const u = r.getItemUOMs(n.item_code);
        u.length && (n.item_uoms = u, i = u.find((f) => f.uom == a));
      }
      if (!i && n.stock_uom === a && (i = { uom: n.stock_uom, conversion_factor: 1 }, n.item_uoms || (n.item_uoms = []), n.item_uoms.push(i)), !i) {
        r.eventBus.emit("show_message", {
          title: __("UOM not found"),
          color: "error"
        });
        return;
      }
      const o = n.conversion_factor || 1;
      n.conversion_factor = i.conversion_factor;
      const l = n.conversion_factor / o, s = r.get_price_list ? r.get_price_list() : null;
      let d = null;
      if (s && r.getCachedPriceListItems) {
        const f = (r.getCachedPriceListItems(s) || []).find((h) => h.item_code === n.item_code && h.uom === i.uom);
        f && (d = f.price_list_rate || f.rate);
      }
      if (!d && typeof un == "function" && !un())
        try {
          const u = await frappe.call({
            method: "posawesome.posawesome.api.items.get_price_for_uom",
            args: {
              item_code: n.item_code,
              price_list: s,
              uom: i.uom
            }
          });
          u.message && (d = parseFloat(u.message));
        } catch (u) {
          console.error("Failed to fetch UOM price", u);
        }
      if (d) {
        n._manual_rate_set = !0, n.base_price_list_rate = d, n.posa_offer_applied || (n.base_rate = d);
        const u = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== u ? (n.price_list_rate = r.flt(
          n.base_price_list_rate * r.exchange_rate,
          r.currency_precision
        ), n.rate = r.flt(n.base_rate * r.exchange_rate, r.currency_precision)) : (n.price_list_rate = n.base_price_list_rate, n.rate = n.base_rate), r.calc_stock_qty && r.calc_stock_qty(n, n.qty), r.forceUpdate && r.forceUpdate();
        return;
      }
      if (n._manual_rate_set = !1, n.posa_offer_applied || (n.discount_amount = 0, n.discount_percentage = 0), !n.original_base_rate && !n.posa_offer_applied && (n.original_base_rate = n.base_rate / o, n.original_base_price_list_rate = n.base_price_list_rate / o), n.posa_offer_applied) {
        const u = r.posOffers && Array.isArray(r.posOffers) ? r.posOffers.find((f) => {
          if (!f || !f.items) return !1;
          const h = typeof f.items == "string" ? JSON.parse(f.items) : f.items;
          return Array.isArray(h) && h.includes(n.posa_row_id);
        }) : null;
        if (u && u.discount_type === "Rate") {
          const f = r.flt(u.rate * n.conversion_factor);
          n.base_rate = f, n.base_price_list_rate = f;
          const h = r.price_list_currency || r.pos_profile.currency;
          r.selected_currency !== h ? (n.rate = r.flt(f / r.exchange_rate, r.currency_precision), n.price_list_rate = n.rate) : (n.rate = f, n.price_list_rate = f);
        } else if (u && u.discount_type === "Discount Percentage") {
          let f;
          n.original_base_price_list_rate ? f = r.flt(
            n.original_base_price_list_rate * n.conversion_factor,
            r.currency_precision
          ) : f = r.flt(
            n.base_price_list_rate * l,
            r.currency_precision
          ), n.base_price_list_rate = f;
          const h = r.flt(
            f * u.discount_percentage / 100,
            r.currency_precision
          );
          n.base_discount_amount = h, n.base_rate = r.flt(f - h, r.currency_precision);
          const y = r.price_list_currency || r.pos_profile.currency;
          r.selected_currency !== y ? (n.price_list_rate = r.flt(
            f / r.exchange_rate,
            r.currency_precision
          ), n.discount_amount = r.flt(
            h / r.exchange_rate,
            r.currency_precision
          ), n.rate = r.flt(n.base_rate / r.exchange_rate, r.currency_precision)) : (n.price_list_rate = f, n.discount_amount = h, n.rate = n.base_rate);
        }
      } else {
        n.batch_price ? (n.base_rate = n.batch_price * n.conversion_factor, n.base_price_list_rate = n.base_rate) : n.original_base_rate && (n.base_rate = n.original_base_rate * n.conversion_factor, n.base_price_list_rate = n.original_base_price_list_rate * n.conversion_factor);
        const u = r.price_list_currency || r.pos_profile.currency;
        r.selected_currency !== u ? (n.rate = r.flt(n.base_rate / r.exchange_rate, r.currency_precision), n.price_list_rate = r.flt(
          n.base_price_list_rate / r.exchange_rate,
          r.currency_precision
        )) : (n.rate = n.base_rate, n.price_list_rate = n.base_price_list_rate);
      }
      r.calc_stock_qty && r.calc_stock_qty(n, n.qty), r.forceUpdate && r.forceUpdate();
    },
    calcStockQty: (n, a) => {
      n.stock_qty = n.conversion_factor * a;
    }
  };
}
const { setSerialNo: One, setBatchQty: Dne } = xne(), { updateDiscountAmount: Bne, calcPrices: Vne, calcItemPrice: Mne } = Tne(), { removeItem: Lne, addItem: Rne, getNewItem: Fne, clearInvoice: Nne } = Ene(), { calcUom: Une, calcStockQty: Iy } = Pne(), $ne = {
  remove_item(e) {
    return Lne(e, this);
  },
  async add_item(e) {
    if (!this.customer)
      return this.eventBus.emit("show_message", {
        title: __("Please select a customer before adding items"),
        color: "error"
      }), !1;
    if (this.pos_profile.posa_enable_restaurant_mode) {
      if (!(this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT") && !this.selected_order_type)
        return this.eventBus.emit("show_message", {
          title: __("Please select an Order Type before adding items"),
          color: "error"
        }), !1;
      if (this.selected_order_type && this.selected_order_type.requires_table && !this.selected_table)
        return this.eventBus.emit("show_message", {
          title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
          color: "error"
        }), !1;
    }
    const t = await Rne(e, this), n = this.items.find(
      (a) => a.item_code === e.item_code && a.uom === (e.uom || a.uom) && (!a.batch_no || a.batch_no === e.batch_no)
    );
    return n && this.fetch_available_qty && this.fetch_available_qty(n), t;
  },
  // Create a new item object with default and calculated fields
  get_new_item(e) {
    return Fne(e, this);
  },
  // Reset all invoice fields to default/empty values
  clear_invoice() {
    const e = Nne(this);
    return this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && (this.clear_restaurant_selection(), this.invoiceType = "Order", this.invoiceTypes = ["Order"]), e;
  },
  // Fetch customer balance from backend or cache
  async fetch_customer_balance() {
    try {
      if (!this.customer) {
        this.customer_balance = 0;
        return;
      }
      if (un()) {
        const n = $A(this.customer);
        if (n !== null) {
          this.customer_balance = n;
          return;
        } else {
          this.customer_balance = 0, this.eventBus.emit("show_message", {
            title: __("Customer balance unavailable offline"),
            text: __("Balance will be updated when connection is restored"),
            color: "warning"
          });
          return;
        }
      }
      const t = (await frappe.call({
        method: "posawesome.posawesome.api.customer.get_customer_balance",
        args: { customer: this.customer }
      }))?.message?.balance || 0;
      this.customer_balance = t, eJ(this.customer, t);
    } catch (e) {
      console.error("Error fetching balance:", e);
      const t = $A(this.customer);
      t !== null ? (this.customer_balance = t, this.eventBus.emit("show_message", {
        title: __("Using cached customer balance"),
        text: __("Could not fetch latest balance from server"),
        color: "warning"
      })) : (this.eventBus.emit("show_message", {
        title: __("Error fetching customer balance"),
        color: "error"
      }), this.customer_balance = 0);
    }
  },
  // Cancel the current invoice, optionally delete from backend
  async cancel_invoice() {
    const e = this.get_invoice_doc();
    this.pos_profile && this.pos_profile.posa_enable_restaurant_mode ? (this.invoiceType = "Order", this.invoiceTypes = ["Order"]) : (this.invoiceType = this.pos_profile.posa_default_sales_order ? "Order" : "Invoice", this.invoiceTypes = ["Invoice", "Order"]), this.posting_date = frappe.datetime.nowdate();
    var t = this;
    e.name && this.pos_profile.posa_allow_delete && await frappe.call({
      method: "posawesome.posawesome.api.invoices.delete_invoice",
      args: { invoice: e.name },
      async: !0,
      callback: function(n) {
        n.message && t.eventBus.emit("show_message", {
          text: n.message,
          color: "warning"
        });
      }
    }), this.clear_invoice(), this.cancel_dialog = !1;
  },
  // Load an invoice (or return invoice) from data, set all fields accordingly
  async load_invoice(e = {}) {
    console.log("load_invoice called with data:", {
      is_return: e.is_return,
      return_against: e.return_against,
      customer: e.customer,
      items_count: e.items ? e.items.length : 0
    }), this.clear_invoice(), e.is_return && (console.log("Processing return invoice"), e.return_against ? (console.log("Return has reference to invoice:", e.return_against), this.eventBus.emit("set_customer_readonly", !0)) : (console.log("Return without invoice reference, customer can be selected"), this.eventBus.emit("set_customer_readonly", !1)), this.invoiceType = "Return", this.invoiceTypes = ["Return"]), this.invoice_doc = e, this.items = e.items || [], this.packed_items = e.packed_items || [], console.log("Items set:", this.items.length, "items"), e.is_return && e.return_against && (this.items.forEach((t) => {
      t.locked_price = !0;
    }), this.packed_items.forEach((t) => {
      t.locked_price = !0;
    })), this.items.length > 0 ? (this.update_items_details(this.items), this.posa_offers = e.posa_offers || [], this.items.forEach((t) => {
      t.posa_row_id || (t.posa_row_id = this.makeid(20)), t.batch_no && this.set_batch_qty(t, t.batch_no), t.original_item_name || (t.original_item_name = t.item_name);
    })) : console.log("Warning: No items in return invoice"), this.packed_items.length > 0 && (this.update_items_details(this.packed_items), this.packed_items.forEach((t) => {
      t.posa_row_id || (t.posa_row_id = this.makeid(20));
    })), this.customer = e.customer, this.posting_date = this.formatDateForBackend(e.posting_date || frappe.datetime.nowdate()), this.discount_amount = e.discount_amount, this.additional_discount_percentage = e.additional_discount_percentage, this.additional_discount = e.discount_amount, this.items.length > 0 && this.items.forEach((t) => {
      t.serial_no && (t.serial_no_selected = [], t.serial_no.split(`
`).forEach((a) => {
        a.length && t.serial_no_selected.push(a);
      }), t.serial_no_selected_count = t.serial_no_selected.length);
    }), e.is_return ? this.return_doc = e : this.eventBus.emit("set_pos_coupons", e.posa_coupons), console.log("load_invoice completed, invoice state:", {
      invoiceType: this.invoiceType,
      is_return: this.invoice_doc.is_return,
      items: this.items.length,
      customer: this.customer
    });
  },
  // Save and clear the current invoice (draft logic)
  save_and_clear_invoice() {
    let e = null;
    const t = this.get_invoice_doc();
    if (console.log("=== SAVE_AND_CLEAR_INVOICE DEBUG ==="), console.log("doc from get_invoice_doc:", {
      name: t.name,
      doctype: t.doctype,
      docstatus: t.docstatus
    }), console.log("this.invoice_doc:", {
      name: this.invoice_doc?.name,
      doctype: this.invoice_doc?.doctype,
      docstatus: this.invoice_doc?.docstatus
    }), console.log("Restaurant mode:", this.pos_profile.posa_enable_restaurant_mode), console.log("=== END SAVE_AND_CLEAR_INVOICE DEBUG ==="), this.pos_profile.posa_enable_restaurant_mode) {
      const n = t.name && t.name.startsWith("ACC-SINV-");
      if (console.log("Is Sales Invoice by name:", n), t.doctype === "Sales Invoice" || n)
        console.log("Processing Sales Invoice for payment, skipping restaurant order validation");
      else {
        if (!(this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT") && !this.selected_order_type)
          return this.eventBus.emit("show_message", {
            title: __("Please select an Order Type"),
            color: "error"
          }), !1;
        if (this.selected_order_type && this.selected_order_type.requires_table && !this.selected_table)
          return this.eventBus.emit("show_message", {
            title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
            color: "error"
          }), !1;
        if (this.invoiceType = "Order", t.name && this.invoice_doc && this.invoice_doc.doctype === "Sales Invoice" && t.name.startsWith("SAL-ORD-"))
          return console.error("CRITICAL ERROR: Attempting to update Sales Order but invoice_doc references Sales Invoice"), console.log("invoice_doc doctype:", this.invoice_doc.doctype), console.log("doc name:", t.name), this.eventBus.emit("show_message", {
            title: __("Order state error: Please reload the order from the orders list and try again."),
            color: "error"
          }), !1;
      }
    }
    if (t.name) {
      const n = t.name.startsWith("ACC-SINV-"), a = t.name.startsWith("SAL-ORD-");
      console.log("Document type analysis:", {
        name: t.name,
        doctype: t.doctype,
        isSalesInvoiceByName: n,
        isSalesOrderByName: a
      }), t.doctype === "Sales Invoice" || n ? (console.log("Processing Sales Invoice for payment:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus
      }), e = this.update_invoice(t)) : t.docstatus === 1 && this.pos_profile.posa_enable_restaurant_mode && (t.doctype === "Sales Order" || a) ? (console.log("Attempting to update submitted Sales Order with doc:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus,
        items_count: t.items?.length || 0
      }), e = this.update_submitted_order(t)) : (console.log("Using regular update for doc:", {
        name: t.name,
        doctype: t.doctype,
        docstatus: t.docstatus
      }), e = this.update_invoice(t));
    } else
      t.items.length ? this.pos_profile.posa_enable_restaurant_mode ? e = this.create_restaurant_order(t) : e = this.update_invoice(t) : this.eventBus.emit("show_message", {
        title: __("Nothing to save"),
        color: "error"
      });
    if (!e)
      this.eventBus.emit("show_message", {
        title: __("Error saving the current order"),
        color: "error"
      });
    else
      return this.clear_invoice(), e;
  },
  // Start a new order (or return order) with provided data
  async new_order(e = {}) {
    let t = null;
    if (this.eventBus.emit("set_customer_readonly", !1), this.expanded = [], this.posa_offers = [], this.eventBus.emit("set_pos_coupons", []), this.posa_coupons = [], this.return_doc = "", !e.name && !e.is_return)
      this.items = [], this.customer = this.pos_profile.customer, this.invoice_doc = "", this.discount_amount = 0, this.additional_discount_percentage = 0, this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice", "Order"], this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && this.clear_restaurant_selection();
    else {
      if (e.is_return && (e.return_against ? this.eventBus.emit("set_customer_readonly", !0) : this.eventBus.emit("set_customer_readonly", !1), this.invoiceType = "Return", this.invoiceTypes = ["Return"]), this.invoice_doc = e, this.pos_profile && this.pos_profile.posa_enable_restaurant_mode && (console.log("Loading document for editing - validating consistency"), console.log("Document info:", {
        name: e.name,
        doctype: e.doctype,
        docstatus: e.docstatus
      }), e.name && e.name.startsWith("SAL-ORD-") && e.doctype !== "Sales Order")) {
        console.error("CRITICAL ERROR: Document name suggests Sales Order but doctype is:", e.doctype), this.eventBus.emit("show_message", {
          title: __("Document type mismatch. Please reload from orders list."),
          color: "error"
        });
        return;
      }
      if (this.items = e.items, this.update_items_details(this.items), this.posa_offers = e.posa_offers || [], this.pos_profile && this.pos_profile.posa_enable_restaurant_mode) {
        if (e.doctype === "Sales Order" && (this.invoiceType = "Order", this.invoiceTypes = ["Order"], console.log("Loading Sales Order for editing in restaurant mode:", e.name)), e.restaurant_order_type) {
          const n = this.restaurant_order_types.find((a) => a.name === e.restaurant_order_type);
          n && (this.selected_order_type = n);
        }
        if (e.table_number) {
          const n = this.available_tables.find((a) => a.table_number === e.table_number);
          n && (this.selected_table = n);
        }
      }
      this.items.forEach((n) => {
        n.posa_row_id || (n.posa_row_id = this.makeid(20)), n.batch_no && this.set_batch_qty(n, n.batch_no);
      }), this.customer = e.customer, this.posting_date = this.formatDateForBackend(e.posting_date || frappe.datetime.nowdate()), this.discount_amount = e.discount_amount, this.additional_discount_percentage = e.additional_discount_percentage, this.items.forEach((n) => {
        n.serial_no && (n.serial_no_selected = [], n.serial_no.split(`
`).forEach((r) => {
          r.length && n.serial_no_selected.push(r);
        }), n.serial_no_selected_count = n.serial_no_selected.length);
      });
    }
    return t;
  },
  // Build the invoice document object for backend submission
  get_invoice_doc() {
    let e = {};
    this.invoice_doc.name && (e = { ...this.invoice_doc }, console.log("=== DEBUG: get_invoice_doc - starting with existing doc ==="), console.log("Original this.invoice_doc:", {
      name: this.invoice_doc.name,
      doctype: this.invoice_doc.doctype,
      docstatus: this.invoice_doc.docstatus
    })), this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order ? e.doctype = "Sales Order" : this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? e.doctype = "POS Invoice" : e.doctype = "Sales Invoice", this.pos_profile.posa_enable_restaurant_mode && (!e.name || e.name && e.name.startsWith("SAL-ORD-") ? (e.doctype = "Sales Order", console.log("=== DEBUG: get_invoice_doc - forced doctype to Sales Order in restaurant mode ===")) : e.name && e.name.startsWith("ACC-SINV-") && (e.doctype = "Sales Invoice", console.log("=== DEBUG: get_invoice_doc - keeping Sales Invoice doctype for converted order ==="))), console.log("=== DEBUG: get_invoice_doc - final doc info ==="), console.log("Final doc:", {
      name: e.name,
      doctype: e.doctype,
      docstatus: e.docstatus,
      invoiceType: this.invoiceType,
      restaurant_mode: this.pos_profile.posa_enable_restaurant_mode
    }), e.is_pos = 1, e.ignore_pricing_rule = 1, e.company = e.company || this.pos_profile.company, e.pos_profile = e.pos_profile || this.pos_profile.name, e.posa_show_custom_name_marker_on_print = this.pos_profile.posa_show_custom_name_marker_on_print, e.currency = this.selected_currency || this.pos_profile.currency, e.conversion_rate = this.invoice_doc && this.invoice_doc.conversion_rate || this.conversion_rate || 1, e.price_list_currency = this.price_list_currency || e.currency, e.plc_conversion_rate = this.invoice_doc && this.invoice_doc.plc_conversion_rate || (e.price_list_currency === e.currency ? 1 : this.exchange_rate), e.campaign = e.campaign || this.pos_profile.campaign, e.selling_price_list = this.pos_profile.selling_price_list, e.naming_series = e.naming_series || this.pos_profile.naming_series, e.customer = this.customer;
    const t = this.isReturnInvoice;
    e.is_return = t ? 1 : 0;
    const n = this.get_invoice_items();
    e.items = n, e.packed_items = (this.packed_items || []).map((s) => ({
      parent_item: s.parent_item,
      item_code: s.item_code,
      item_name: s.item_name,
      qty: flt(s.qty),
      uom: s.uom,
      warehouse: s.warehouse,
      batch_no: s.batch_no,
      serial_no: s.serial_no,
      rate: flt(s.rate)
    }));
    let a = this.Total;
    t && a > 0 && (a = -Math.abs(a)), e.total = a, e.net_total = a, e.base_total = a * (this.exchange_rate || 1), e.base_net_total = a * (this.exchange_rate || 1);
    let r = flt(this.additional_discount);
    t && r > 0 && (r = -Math.abs(r)), e.discount_amount = r, e.base_discount_amount = r * (this.exchange_rate || 1);
    let i = flt(this.additional_discount_percentage);
    t && i > 0 && (i = -Math.abs(i)), e.additional_discount_percentage = i;
    let o = this.subtotal;
    if (e.taxes = [], this.invoice_doc && this.invoice_doc.taxes) {
      let s = 0;
      this.invoice_doc.taxes.forEach((d) => {
        d.tax_amount && (o += flt(d.tax_amount), s += flt(d.tax_amount)), e.taxes.push({
          account_head: d.account_head,
          charge_type: d.charge_type || "On Net Total",
          description: d.description,
          rate: d.rate,
          included_in_print_rate: d.included_in_print_rate || 0,
          tax_amount: d.tax_amount,
          total: d.total,
          base_tax_amount: d.tax_amount * (this.exchange_rate || 1),
          base_total: d.total * (this.exchange_rate || 1)
        });
      }), e.total_taxes_and_charges = s;
    } else if (un()) {
      const s = xQ(this.pos_profile.taxes_and_charges);
      if (s && Array.isArray(s.taxes)) {
        const d = BQ();
        let u = o, f = 0;
        s.taxes.forEach((h) => {
          let y = 0;
          h.charge_type === "Actual" ? y = flt(h.tax_amount || 0) : d ? y = flt(e.total * flt(h.rate) / 100) : y = flt(e.net_total * flt(h.rate) / 100), d || (u += y), f += y, e.taxes.push({
            account_head: h.account_head,
            charge_type: h.charge_type || "On Net Total",
            description: h.description,
            rate: h.rate,
            included_in_print_rate: h.charge_type === "Actual" ? 0 : d ? 1 : 0,
            tax_amount: y,
            total: u,
            base_tax_amount: y * (this.exchange_rate || 1),
            base_total: u * (this.exchange_rate || 1)
          });
        }), d ? (e.net_total = e.total - f, e.base_net_total = e.net_total * (this.exchange_rate || 1), o = e.total) : o = u, e.total_taxes_and_charges = f;
      }
    }
    t && o > 0 && (o = -Math.abs(o)), e.grand_total = o, e.base_grand_total = o * (this.exchange_rate || 1), this.pos_profile.disable_rounded_total ? (e.rounded_total = flt(o, this.currency_precision), e.base_rounded_total = flt(e.base_grand_total, this.currency_precision)) : (e.rounded_total = this.roundAmount(o), e.base_rounded_total = this.roundAmount(e.base_grand_total)), e.posa_pos_opening_shift = this.pos_opening_shift.name, e.payments = this.get_payments(), t && (this.invoice_doc.return_against && (e.return_against = this.invoice_doc.return_against), e.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, e.grand_total > 0 && (e.grand_total = -Math.abs(e.grand_total)), e.base_grand_total > 0 && (e.base_grand_total = -Math.abs(e.base_grand_total)), e.rounded_total > 0 && (e.rounded_total = -Math.abs(e.rounded_total)), e.base_rounded_total > 0 && (e.base_rounded_total = -Math.abs(e.base_rounded_total)), e.total > 0 && (e.total = -Math.abs(e.total)), e.base_total > 0 && (e.base_total = -Math.abs(e.base_total)), e.net_total > 0 && (e.net_total = -Math.abs(e.net_total)), e.base_net_total > 0 && (e.base_net_total = -Math.abs(e.base_net_total)), e.payments && e.payments.length && e.payments.forEach((s) => {
      s.amount > 0 && (s.amount = -Math.abs(s.amount)), s.base_amount > 0 && (s.base_amount = -Math.abs(s.base_amount));
    })), e.posa_offers = this.posa_offers, e.posa_coupons = this.posa_coupons, e.posa_delivery_charges = this.selected_delivery_charge?.name || null, e.posa_delivery_charges_rate = this.delivery_charges_rate || 0, e.posting_date = this.formatDateForBackend(this.posting_date_display), e.ignore_pricing_rule = 1, e.price_list_currency = this.price_list_currency || e.currency, e.plc_conversion_rate = this.exchange_rate || e.conversion_rate, e.ignore_default_fields = 1, e.posa_is_offer_applied = this.posa_offers.length > 0 ? 1 : 0;
    const l = this.price_list_currency || this.pos_profile.currency;
    if (this.selected_currency !== l) {
      const s = t ? -1 : 1;
      e.base_total = a / this.exchange_rate * s, e.base_net_total = a / this.exchange_rate * s, e.base_discount_amount = r / this.exchange_rate * s, e.base_grand_total = o / this.exchange_rate * s, e.base_rounded_total = o / this.exchange_rate * s;
    } else {
      const s = t ? -1 : 1;
      e.base_total = a * s, e.base_net_total = a * s, e.base_discount_amount = r * s, e.base_grand_total = o * s, e.base_rounded_total = o * s;
    }
    return e.payments && e.payments.length && e.payments.forEach((s) => {
      this.selected_currency !== l ? s.base_amount = s.amount / this.exchange_rate : s.base_amount = s.amount, t && (s.amount = -Math.abs(s.amount), s.base_amount = -Math.abs(s.base_amount));
    }), this.pos_profile.posa_enable_restaurant_mode && (this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number), this.selected_order_type && this.selected_order_type.default_preparation_time && (e.expected_preparation_time = this.selected_order_type.default_preparation_time)), e;
  },
  // Get invoice doc from order doc (for sales order to invoice conversion)
  async get_invoice_from_order_doc() {
    let e = {};
    this.invoice_doc.doctype == "Sales Order" ? await frappe.call({
      method: "posawesome.posawesome.api.invoices.create_sales_invoice_from_order",
      args: {
        sales_order: this.invoice_doc.name
      },
      // async: false,
      callback: function(i) {
        i.message && (e = i.message);
      }
    }) : e = this.invoice_doc;
    const t = [], n = this.get_invoice_items();
    e.items.forEach((i) => {
      const o = n.find(
        (l) => l.item_code === i.item_code
      );
      o && (i.item_code = o.item_code, i.posa_row_id = o.posa_row_id, i.posa_offers = o.posa_offers, i.posa_offer_applied = o.posa_offer_applied, i.posa_is_offer = o.posa_is_offer, i.posa_is_replace = o.posa_is_replace, i.is_free_item = o.is_free_item, i.qty = flt(o.qty), i.rate = flt(o.rate), i.uom = o.uom, i.amount = flt(o.qty) * flt(o.rate), i.conversion_factor = o.conversion_factor, i.serial_no = o.serial_no, i.discount_percentage = flt(o.discount_percentage), i.discount_amount = flt(o.discount_amount), i.batch_no = o.batch_no, i.posa_notes = o.posa_notes, i.posa_delivery_date = this.formatDateForDisplay(o.posa_delivery_date), i.price_list_rate = o.price_list_rate, t.push(i));
    }), e.items = t;
    const a = [...e.items], r = new Set(a.map((i) => i.item_code));
    return n.forEach((i) => {
      r.has(i.item_code) || a.push(i);
    }), e.items = a, e.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, e.is_pos = 1, e.payments = this.get_payments(), e;
  },
  // Prepare items array for invoice doc
  get_invoice_items() {
    const e = [], t = this.isReturnInvoice, n = this.pos_profile.create_pos_invoice_instead_of_sales_invoice;
    return this.items.forEach((a) => {
      const r = {
        item_code: a.item_code,
        // Retain the item name for offline invoices
        // Fallback to item_code if item_name is not available
        item_name: a.item_name || a.item_code,
        name_overridden: a.name_overridden ? 1 : 0,
        posa_row_id: a.posa_row_id,
        posa_offers: a.posa_offers,
        posa_offer_applied: a.posa_offer_applied,
        posa_is_offer: a.posa_is_offer,
        posa_is_replace: a.posa_is_replace,
        is_free_item: a.is_free_item,
        qty: flt(a.qty),
        uom: a.uom,
        conversion_factor: a.conversion_factor,
        serial_no: a.serial_no,
        // Link to original invoice item when doing returns
        // Needed for backend validation that the item exists in
        // the referenced Sales or POS Invoice
        ...a.sales_invoice_item && { sales_invoice_item: a.sales_invoice_item },
        ...a.pos_invoice_item && { pos_invoice_item: a.pos_invoice_item },
        discount_percentage: flt(a.discount_percentage),
        batch_no: a.batch_no,
        posa_notes: a.posa_notes,
        posa_delivery_date: this.formatDateForBackend(a.posa_delivery_date)
      };
      if (t) {
        const o = n ? "pos_invoice_item" : "sales_invoice_item";
        !r[o] && a.name && (r[o] = a.name);
      }
      const i = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== i ? (r.rate = flt(a.rate), r.base_rate = a.base_rate || flt(a.rate / this.exchange_rate), r.price_list_rate = flt(a.price_list_rate), r.base_price_list_rate = a.base_price_list_rate || flt(a.price_list_rate / this.exchange_rate), r.amount = flt(a.qty) * r.rate, r.base_amount = r.amount / this.exchange_rate, r.discount_amount = flt(a.discount_amount), r.base_discount_amount = a.base_discount_amount || flt(a.discount_amount / this.exchange_rate)) : (r.rate = flt(a.rate), r.base_rate = a.base_rate || flt(a.rate), r.price_list_rate = flt(a.price_list_rate), r.base_price_list_rate = a.base_price_list_rate || flt(a.price_list_rate), r.amount = flt(a.qty) * r.rate, r.base_amount = r.amount, r.discount_amount = flt(a.discount_amount), r.base_discount_amount = a.base_discount_amount || flt(a.discount_amount)), t && (r.qty = -Math.abs(r.qty), r.amount = -Math.abs(r.amount), r.base_amount = -Math.abs(r.base_amount), r.discount_amount = -Math.abs(r.discount_amount), r.base_discount_amount = -Math.abs(r.base_discount_amount)), e.push(r);
    }), e;
  },
  // Prepare items array for order doc
  get_order_items() {
    const e = [];
    return this.items.forEach((t) => {
      const n = {
        item_code: t.item_code,
        // Retain item name to show on offline order documents
        // Use item_code if item_name is missing
        item_name: t.item_name || t.item_code,
        name_overridden: t.name_overridden ? 1 : 0,
        posa_row_id: t.posa_row_id,
        posa_offers: t.posa_offers,
        posa_offer_applied: t.posa_offer_applied,
        posa_is_offer: t.posa_is_offer,
        posa_is_replace: t.posa_is_replace,
        is_free_item: t.is_free_item,
        qty: flt(t.qty),
        rate: flt(t.rate),
        uom: t.uom,
        amount: flt(t.qty) * flt(t.rate),
        conversion_factor: t.conversion_factor,
        serial_no: t.serial_no,
        discount_percentage: flt(t.discount_percentage),
        discount_amount: flt(t.discount_amount),
        batch_no: t.batch_no,
        posa_notes: t.posa_notes,
        posa_delivery_date: t.posa_delivery_date,
        price_list_rate: t.price_list_rate
      };
      e.push(n);
    }), e;
  },
  // Prepare payments array for invoice doc
  get_payments() {
    const e = [];
    let n = this.subtotal;
    return this.pos_profile.payments.forEach((a, r) => {
      const i = r === 0 ? n : a.amount || 0, o = this.isReturnInvoice ? -Math.abs(i) : i, l = this.price_list_currency || this.pos_profile.currency, s = this.selected_currency !== l ? this.flt(o / (this.exchange_rate || 1), this.currency_precision) : o;
      e.push({
        amount: o,
        // Keep in selected currency (e.g. USD)
        base_amount: s,
        // Convert to base currency (e.g. PKR)
        mode_of_payment: a.mode_of_payment,
        default: a.default,
        account: a.account || "",
        type: a.type || "Cash",
        currency: this.selected_currency || this.pos_profile.currency,
        conversion_rate: this.conversion_rate || 1
      }), n -= i;
    }), console.log("Generated payments:", {
      currency: this.selected_currency,
      exchange_rate: this.exchange_rate,
      payments: e.map((a) => ({
        mode: a.mode_of_payment,
        amount: a.amount,
        base_amount: a.base_amount
      }))
    }), e;
  },
  // Convert amount to selected currency
  convert_amount(e) {
    const t = this.price_list_currency || this.pos_profile.currency;
    return this.selected_currency === t ? e : this.flt(e * this.exchange_rate, this.currency_precision);
  },
  // Update invoice in backend
  update_invoice(e) {
    var t = this;
    return un() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: e.doctype === "Sales Order" && this.pos_profile.posa_create_only_sales_order ? "posawesome.posawesome.api.sales_orders.update_sales_order" : "posawesome.posawesome.api.invoices.update_invoice",
      args: {
        data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message && (t.invoice_doc = n.message, n.message.exchange_rate_date)) {
          t.exchange_rate_date = n.message.exchange_rate_date;
          const a = t.formatDateForBackend(t.posting_date_display);
          a !== t.exchange_rate_date && t.eventBus.emit("show_message", {
            title: __(
              "Exchange rate date " + t.exchange_rate_date + " differs from posting date " + a
            ),
            color: "warning"
          });
        }
      }
    }), this.invoice_doc);
  },
  // Update invoice from order in backend
  update_invoice_from_order(e) {
    var t = this;
    return un() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: "posawesome.posawesome.api.invoices.update_invoice_from_order",
      args: {
        data: e
      },
      async: !1,
      callback: function(n) {
        if (n.message && (t.invoice_doc = n.message, n.message.exchange_rate_date)) {
          t.exchange_rate_date = n.message.exchange_rate_date;
          const a = t.formatDateForBackend(t.posting_date_display);
          a !== t.exchange_rate_date && t.eventBus.emit("show_message", {
            title: __(
              "Exchange rate date " + t.exchange_rate_date + " differs from posting date " + a
            ),
            color: "warning"
          });
        }
      }
    }), this.invoice_doc);
  },
  // Update submitted restaurant order with new items
  async update_submitted_order(e) {
    var t = this;
    if (un())
      return t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc;
    try {
      if (console.log("=== DEBUG: update_submitted_order called ==="), console.log("doc parameter:", JSON.stringify({
        name: e.name,
        doctype: e.doctype,
        docstatus: e.docstatus,
        items_count: e.items?.length || 0,
        is_return: e.is_return
      }, null, 2)), console.log("this.invoice_doc:", JSON.stringify({
        name: this.invoice_doc?.name,
        doctype: this.invoice_doc?.doctype,
        docstatus: this.invoice_doc?.docstatus
      }, null, 2)), console.log("this.invoiceType:", this.invoiceType), console.log("this.invoiceTypes:", this.invoiceTypes), console.log("Updating order with doc:", {
        name: e.name,
        doctype: e.doctype,
        items_count: e.items?.length || 0
      }), e.doctype !== "Sales Order")
        return console.error("Expected Sales Order but got:", e.doctype), t.eventBus.emit("show_message", {
          title: __("Invalid document type for order update. Expected Sales Order, got {0}", [e.doctype]),
          color: "error"
        }), !1;
      if (!e.name || !e.name.startsWith("SAL-ORD-"))
        return console.error("Invalid Sales Order name format:", e.name), t.eventBus.emit("show_message", {
          title: __("Invalid Sales Order name format: {0}", [e.name || "undefined"]),
          color: "error"
        }), !1;
      const n = await frappe.call({
        method: "posawesome.posawesome.api.restaurant_orders.update_submitted_order_items",
        args: {
          order_name: e.name,
          items_data: e.items
        }
      });
      return n.message && (t.invoice_doc = n.message, t.invoice_doc.doctype = "Sales Order", console.log("Order updated successfully:", t.invoice_doc.name), t.eventBus.emit("show_message", {
        title: __("Order {0} updated successfully", [n.message.name]),
        color: "success"
      })), t.invoice_doc;
    } catch (n) {
      return console.error("Error updating submitted order:", n), n.message && n.message.includes("not found") ? t.eventBus.emit("show_message", {
        title: __("Sales Order {0} not found. It may have been deleted or converted to an invoice.", [e.name]),
        color: "error"
      }) : n.message && n.message.includes("Sales Invoice") ? t.eventBus.emit("show_message", {
        title: __("Error: Attempting to update a Sales Invoice as Sales Order. Order {0} may have been converted.", [e.name]),
        color: "error"
      }) : t.eventBus.emit("show_message", {
        title: __("Error updating order: {0}", [n.message || "Unknown error"]),
        color: "error"
      }), !1;
    }
  },
  // Create restaurant order
  create_restaurant_order(e) {
    var t = this;
    return un() ? (t.invoice_doc = Object.assign({}, t.invoice_doc || {}, e), t.invoice_doc) : (frappe.call({
      method: "posawesome.posawesome.api.restaurant_orders.create_restaurant_order",
      args: {
        order_data: e
      },
      async: !1,
      callback: async function(n) {
        if (n.message) {
          let a, r = null, i = !1;
          if (n.message.sales_order ? (a = n.message.sales_order, r = n.message.kot_data, i = n.message.auto_print_kot) : a = n.message, t.invoice_doc = a, t.eventBus.emit("show_message", {
            title: __("Restaurant order {0} created successfully", [a.name]),
            color: "success"
          }), t.pos_profile.posa_enable_restaurant_mode)
            try {
              await t.fetch_available_tables();
            } catch (o) {
              console.error("Failed to refresh available tables:", o);
            }
          if (r && i)
            try {
              const { printKot: o } = await import("./kot_print-MHdNXsuH.js");
              await o(r);
            } catch (o) {
              console.error("Error auto-printing KOT:", o);
            }
          else if (r && await new Promise((l) => {
            frappe.confirm(
              __("Order created successfully. Print KOT for kitchen?"),
              () => l(!0),
              () => l(!1)
            );
          }))
            try {
              const { printKot: l } = await import("./kot_print-MHdNXsuH.js");
              await l(r);
            } catch (l) {
              console.error("Error printing KOT:", l), t.eventBus.emit("show_message", {
                title: __("Error printing KOT"),
                color: "error"
              });
            }
        } else
          t.eventBus.emit("show_message", {
            title: __("Error creating restaurant order"),
            color: "error"
          });
      }
    }), this.invoice_doc);
  },
  // Process and save invoice (handles update or create)
  process_invoice() {
    const e = this.get_invoice_doc();
    try {
      const t = this.update_invoice(e);
      return t && t.posting_date && (this.posting_date = this.formatDateForBackend(t.posting_date)), t;
    } catch (t) {
      return console.error("Error in process_invoice:", t), this.eventBus.emit("show_message", {
        title: __(t.message || "Error processing invoice"),
        color: "error"
      }), !1;
    }
  },
  // Update invoice while preserving Sales Order references
  update_invoice_preserve_so_refs(e) {
    try {
      console.log("Updating invoice while preserving Sales Order references");
      const t = {};
      e.items && e.items.forEach((a, r) => {
        t[r] = {
          sales_order: a.sales_order,
          so_detail: a.so_detail
        };
      });
      const n = this.update_invoice(e);
      return n && n.items && Object.keys(t).length > 0 && (n.items.forEach((a, r) => {
        t[r] && (a.sales_order = t[r].sales_order, a.so_detail = t[r].so_detail);
      }), console.log("Restored Sales Order references in updated invoice")), n;
    } catch (t) {
      return console.error("Error updating invoice with SO refs preservation:", t), e;
    }
  },
  // Process and save invoice from order
  async process_invoice_from_order() {
    const e = await this.get_invoice_from_order_doc();
    var t;
    return e.name ? (t = await this.update_invoice_from_order(e), t) : this.update_invoice_from_order(e);
  },
  // Show payment dialog after validation and processing
  async show_payment() {
    try {
      if (console.log("Starting show_payment process"), console.log("Invoice state before payment:", {
        invoiceType: this.invoiceType,
        is_return: this.invoice_doc ? this.invoice_doc.is_return : !1,
        items_count: this.items.length,
        customer: this.customer,
        invoice_doc_name: this.invoice_doc ? this.invoice_doc.name : null,
        invoice_doc_doctype: this.invoice_doc ? this.invoice_doc.doctype : null,
        order_mode: this.pos_profile.posa_order_mode
      }), !this.customer) {
        console.log("Customer validation failed"), this.eventBus.emit("show_message", {
          title: __("Select a customer"),
          color: "error"
        });
        return;
      }
      if (!this.items.length) {
        console.log("Items validation failed - no items"), this.eventBus.emit("show_message", {
          title: __("Select items to sell"),
          color: "error"
        });
        return;
      }
      console.log("Basic validations passed, proceeding to main validation");
      const e = this.validate();
      if (console.log("Main validation result:", e), !e) {
        console.log("Main validation failed");
        return;
      }
      if (this.pos_profile.posa_enable_restaurant_mode && (this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT"))
        return console.log("Processing direct order mode:", this.pos_profile.posa_order_mode), await this.handle_direct_order_payment();
      let n;
      if (console.log("Determining processing path:", {
        has_invoice_doc: !!this.invoice_doc,
        invoice_doc_name: this.invoice_doc?.name,
        invoice_doc_doctype: this.invoice_doc?.doctype,
        invoiceType: this.invoiceType,
        restaurant_mode: this.pos_profile.posa_enable_restaurant_mode
      }), this.pos_profile.posa_enable_restaurant_mode && this.invoice_doc && this.invoice_doc.name && (this.invoice_doc.doctype === "Sales Order" || this.invoiceType === "Order")) {
        console.log("Processing existing Sales Order for payment in restaurant mode");
        const a = this.get_invoice_doc();
        if (console.log("Document analysis:", {
          name: a.name,
          doctype: a.doctype,
          docstatus: a.docstatus,
          invoice_doc_name: this.invoice_doc.name,
          invoice_doc_doctype: this.invoice_doc.doctype
        }), a.name && a.name.startsWith("ACC-SINV-") && a.doctype === "Sales Invoice")
          console.log("SKIP CONVERSION: Already have Sales Invoice, proceeding directly to payment"), n = a, this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice"], this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Changed invoice type to 'Invoice' for existing Sales Invoice");
        else {
          let r = null;
          if (a.name && a.name.startsWith("SAL-ORD-") ? (r = a.name, console.log("PRESERVE: Original Sales Order name:", r)) : (console.warn("UNEXPECTED: Document doesn't have Sales Order format, using as-is"), r = a.name), this.invoice_doc.docstatus === 1 ? (console.log("Updating submitted Sales Order"), n = await this.update_submitted_order(a)) : (console.log("Updating draft Sales Order (keeping draft status)"), n = this.update_invoice(a)), !n && !r) {
            console.log("Failed to update Sales Order");
            return;
          }
          const i = r || n && n.name;
          if (n && n.docstatus === 0)
            console.log("Draft order - going to payment window without conversion:", i);
          else {
            console.log("Converting submitted Sales Order to Sales Invoice:", i);
            try {
              const o = await frappe.call({
                method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
                args: {
                  sales_order_name: i
                }
              });
              if (o.message)
                n = o.message, console.log("Successfully converted Sales Order to Sales Invoice for payment:", n.name), this.invoiceType = "Invoice", this.invoiceTypes = ["Invoice"], this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Changed invoice type to 'Invoice' to activate payment buttons");
              else
                throw new Error("Failed to convert Sales Order to Sales Invoice");
            } catch (o) {
              console.error("Error converting Sales Order to Invoice:", o), this.eventBus.emit("show_message", {
                title: __("Error converting order to invoice for payment"),
                color: "error"
              });
              return;
            }
          }
        }
      } else this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order && !this.new_delivery_date && !this.invoice_doc.posa_delivery_date ? (console.log("Building local Sales Order doc for payment"), n = this.get_invoice_doc()) : this.invoice_doc.doctype == "Sales Order" && this.invoiceType === "Invoice" ? (console.log("Processing Sales Order payment"), n = await this.process_invoice_from_order()) : n && n.name && n.doctype === "Sales Invoice" ? (console.log("Using existing converted Sales Invoice:", n.name), n = this.update_invoice_preserve_so_refs(n) || n) : (console.log("Processing regular invoice"), n = this.process_invoice());
      if (!n) {
        console.log("Failed to process invoice");
        return;
      }
      n.currency = this.selected_currency || this.pos_profile.currency, n.conversion_rate = this.conversion_rate || 1, n.plc_conversion_rate = this.exchange_rate || 1, n.is_pos = 1, n.update_stock = this.pos_profile.posa_enable_restaurant_mode ? 0 : 1, n.company = n.company || this.pos_profile.company, n.customer = n.customer || this.customer, n.pos_profile = n.pos_profile || this.pos_profile.name, !n.grand_total && this.subtotal && (n.grand_total = this.subtotal), !n.rounded_total && this.subtotal && (n.rounded_total = this.pos_profile.disable_rounded_total ? this.flt(this.subtotal, this.currency_precision) : this.roundAmount(this.subtotal)), console.log("Final invoice_doc for payment:", {
        name: n.name,
        doctype: n.doctype,
        is_pos: n.is_pos,
        grand_total: n.grand_total,
        rounded_total: n.rounded_total,
        customer: n.customer,
        company: n.company,
        currency: n.currency,
        pos_profile: n.pos_profile
      }), (this.isReturnInvoice || n.is_return) && (console.log("Preparing RETURN invoice for payment with:", {
        is_return: n.is_return,
        invoiceType: this.invoiceType,
        return_against: n.return_against,
        items: n.items.length,
        grand_total: n.grand_total
      }), n.is_return = 1, n.grand_total > 0 && (n.grand_total = -Math.abs(n.grand_total)), n.rounded_total > 0 && (n.rounded_total = -Math.abs(n.rounded_total)), n.total > 0 && (n.total = -Math.abs(n.total)), n.base_grand_total > 0 && (n.base_grand_total = -Math.abs(n.base_grand_total)), n.base_rounded_total > 0 && (n.base_rounded_total = -Math.abs(n.base_rounded_total)), n.base_total > 0 && (n.base_total = -Math.abs(n.base_total)), n.items && n.items.length && n.items.forEach((a) => {
        a.qty > 0 && (a.qty = -Math.abs(a.qty)), a.stock_qty > 0 && (a.stock_qty = -Math.abs(a.stock_qty)), a.amount > 0 && (a.amount = -Math.abs(a.amount));
      })), n.payments = this.get_payments(), console.log("Final payment data:", n.payments), (this.isReturnInvoice || n.is_return) && n.payments.length && (n.payments.forEach((a) => {
        a.amount > 0 && (a.amount = -Math.abs(a.amount)), a.base_amount > 0 && (a.base_amount = -Math.abs(a.base_amount));
      }), console.log("Ensured negative payment amounts for return:", n.payments)), console.log("Showing payment dialog with currency:", n.currency), this.eventBus.emit("show_payment", "true"), this.eventBus.emit("send_invoice_doc_payment", n);
    } catch (e) {
      console.error("Error in show_payment:", e), this.eventBus.emit("show_message", {
        title: __("Error processing payment"),
        color: "error",
        message: e.message
      });
    }
  },
  // Handle direct order payment flow - bypasses order creation and goes straight to invoice
  async handle_direct_order_payment() {
    try {
      console.log("Processing direct order payment");
      const e = await frappe.call({
        method: "posawesome.posawesome.api.direct_orders.create_direct_invoice",
        args: {
          customer: this.customer,
          items: this.items.map((t) => ({
            item_code: t.item_code,
            qty: t.qty,
            rate: t.rate,
            amount: t.amount,
            description: t.description,
            warehouse: t.warehouse || this.pos_profile.warehouse,
            uom: t.uom,
            stock_uom: t.stock_uom,
            conversion_factor: t.conversion_factor || 1
          })),
          pos_profile: this.pos_profile.name,
          company: this.pos_profile.company,
          currency: this.selected_currency || this.pos_profile.currency,
          conversion_rate: this.conversion_rate || 1,
          plc_conversion_rate: this.exchange_rate || 1,
          taxes_and_charges: this.pos_profile.taxes_and_charges,
          // Include KOT flag for Direct Order + KOT mode
          print_kot: this.pos_profile.posa_order_mode === "Direct Order + KOT"
        }
      });
      if (e.message && e.message.invoice) {
        const t = e.message.invoice;
        console.log("Direct order invoice created:", t.name), e.message.kot_printed && this.eventBus.emit("show_message", {
          title: __("KOT printed successfully"),
          color: "success"
        }), t.currency = this.selected_currency || this.pos_profile.currency, t.conversion_rate = this.conversion_rate || 1, t.plc_conversion_rate = this.exchange_rate || 1, t.is_pos = 1, t.payments = this.get_payments(), console.log("Showing payment dialog for direct order"), this.eventBus.emit("show_payment", "true"), this.eventBus.emit("send_invoice_doc_payment", t);
      } else
        throw new Error("Failed to create direct order invoice");
    } catch (e) {
      console.error("Error in direct order payment:", e), this.eventBus.emit("show_message", {
        title: __("Error processing direct order"),
        color: "error",
        message: e.message
      });
    }
  },
  // Validate invoice before payment/submit (return logic, quantity, rates, etc)
  async validate() {
    if (console.log("Starting return validation"), this.isReturnInvoice) {
      console.log("Validating return invoice values");
      const e = this.items.filter((t) => t.qty >= 0 || t.stock_qty >= 0);
      e.length > 0 && (console.log(
        "Found positive quantities in return items:",
        e.map((t) => t.item_code)
      ), this.eventBus.emit("show_message", {
        title: __("Return items must have negative quantities"),
        color: "error"
      }), e.forEach((t) => {
        t.qty = -Math.abs(t.qty), t.stock_qty = -Math.abs(t.stock_qty);
      }), this.$forceUpdate()), this.subtotal > 0 && (console.log("Return has positive subtotal:", this.subtotal), this.eventBus.emit("show_message", {
        title: __("Return total must be negative"),
        color: "warning"
      }));
    }
    if (this.invoice_doc.is_return && this.invoice_doc.return_against) {
      console.log("Return doc:", this.invoice_doc), console.log("Current items:", this.items);
      try {
        const e = await new Promise((t, n) => {
          frappe.call({
            method: "frappe.client.get",
            args: {
              doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice",
              name: this.invoice_doc.return_against
            },
            callback: (a) => {
              a.message ? (console.log("Original invoice data:", a.message), t(a.message.items || [])) : n(new Error("Original invoice not found"));
            }
          });
        });
        console.log("Original invoice items:", e), console.log(
          "Original item codes:",
          e.map((t) => ({
            item_code: t.item_code,
            qty: t.qty,
            rate: t.rate
          }))
        );
        for (const t of this.items) {
          console.log("Validating return item:", {
            item_code: t.item_code,
            rate: t.rate,
            qty: t.qty
          });
          const n = t.item_code.trim().toUpperCase(), a = e.find(
            (l) => l.item_code.trim().toUpperCase() === n
          );
          if (!a)
            return console.log("Item not found in original invoice:", {
              return_item_code: n,
              original_items: e.map((l) => l.item_code.trim().toUpperCase())
            }), this.eventBus.emit("show_message", {
              title: __(`Item ${t.item_code} not found in original invoice`),
              color: "error"
            }), !1;
          const r = Math.abs(a.rate - t.rate);
          if (console.log("Rate comparison:", {
            return_rate: t.rate,
            orig_rate: a.rate,
            difference: r
          }), r > 0.01)
            return this.eventBus.emit("show_message", {
              title: __(`Rate mismatch for item ${t.item_code}`),
              color: "error"
            }), !1;
          const i = Math.abs(t.qty), o = a.qty;
          if (console.log("Quantity comparison:", {
            return_qty: i,
            orig_qty: o
          }), i > o)
            return this.eventBus.emit("show_message", {
              title: __(
                `Return quantity cannot be greater than original quantity for item ${t.item_code}`
              ),
              color: "error"
            }), !1;
        }
      } catch (e) {
        return console.error("Error in validation:", e), this.eventBus.emit("show_message", {
          title: __(`Error validating return: ${e.message}`),
          color: "error"
        }), !1;
      }
    }
    return !0;
  },
  // Get draft invoices from backend
  get_draft_invoices() {
    var e = this;
    frappe.call({
      method: "posawesome.posawesome.api.invoices.get_draft_invoices",
      args: {
        pos_opening_shift: this.pos_opening_shift.name,
        doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
      },
      async: !1,
      callback: function(t) {
        t.message && e.eventBus.emit("open_drafts", t.message);
      }
    });
  },
  // Get draft orders from backend
  get_draft_orders() {
    var e = this;
    frappe.call({
      method: "posawesome.posawesome.api.sales_orders.search_orders",
      args: {
        company: this.pos_profile.company,
        currency: this.pos_profile.currency
      },
      async: !1,
      callback: function(t) {
        t.message && e.eventBus.emit("open_orders", t.message);
      }
    });
  },
  // Open returns dialog
  open_returns() {
    this.eventBus.emit("open_returns", this.pos_profile.company);
  },
  // Close payment dialog
  close_payments() {
    this.eventBus.emit("show_payment", "false");
  },
  // Update details for all items (fetch from backend)
  async update_items_details(e) {
    if (e?.length && this.pos_profile)
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items_details",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            items_data: JSON.stringify(e),
            price_list: this.selected_price_list || this.pos_profile.selling_price_list
          }
        });
        t?.message && e.forEach((n) => {
          const a = t.message.find(
            (r) => r.posa_row_id == n.posa_row_id
          );
          a && (n.actual_qty = a.actual_qty, n.item_uoms = a.item_uoms, n.has_batch_no = a.has_batch_no, n.has_serial_no = a.has_serial_no, n.batch_no_data = a.batch_no_data, n.serial_no_data = a.serial_no_data, a.rate !== void 0 && (!n.locked_price && !n.posa_offer_applied ? (a.rate !== 0 || !n.rate) && (n.rate = a.rate, n.price_list_rate = a.price_list_rate || a.rate) : n.price_list_rate || (n.price_list_rate = a.price_list_rate || a.rate)), a.currency && (n.currency = a.currency));
        });
      } catch (t) {
        console.error("Error updating items:", t), this.eventBus.emit("show_message", {
          title: __("Error updating item details"),
          color: "error"
        });
      }
  },
  // Update details for a single item (fetch from backend)
  update_item_detail(e, t = !1) {
    if (console.log("update_item_detail request", {
      code: e.item_code,
      force_update: t
    }), !e.item_code)
      return;
    var n = this;
    if (e._manual_rate_set && !t)
      return;
    const a = this.get_invoice_doc();
    console.log("update_item_detail - currentDoc info:", {
      name: a.name,
      doctype: a.doctype,
      docstatus: a.docstatus
    }), frappe.call({
      method: "posawesome.posawesome.api.items.get_item_detail",
      args: {
        warehouse: e.warehouse || this.pos_profile.warehouse,
        doc: a,
        price_list: this.selected_price_list || this.pos_profile.selling_price_list,
        item: {
          item_code: e.item_code,
          customer: this.customer,
          doctype: a.doctype,
          name: a.name || `New ${a.doctype} 1`,
          company: this.pos_profile.company,
          conversion_rate: 1,
          currency: this.pos_profile.currency,
          qty: e.qty,
          price_list_rate: e.base_price_list_rate || e.price_list_rate,
          child_docname: `New ${a.doctype} Item 1`,
          cost_center: this.pos_profile.cost_center,
          pos_profile: this.pos_profile.name,
          uom: e.uom,
          tax_category: "",
          transaction_type: "selling",
          update_stock: this.pos_profile.posa_enable_restaurant_mode ? 0 : this.pos_profile.update_stock,
          price_list: this.get_price_list(),
          has_batch_no: e.has_batch_no,
          has_serial_no: e.has_serial_no,
          serial_no: e.serial_no,
          batch_no: e.batch_no,
          is_stock_item: e.is_stock_item
        }
      },
      callback: function(r) {
        if (console.log("=== get_item_detail API response ===", r), r.message) {
          const i = r.message;
          if (e.warehouse || (e.warehouse = n.pos_profile.warehouse), i.price_list_currency && (n.price_list_currency = i.price_list_currency), e.original_currency || (e.original_currency = i.price_list_currency || n.price_list_currency || n.selected_currency), e.original_rate || (e.original_rate = i.price_list_rate), i.serial_no_data && (e.serial_no_data = i.serial_no_data), i.batch_no_data && (e.batch_no_data = i.batch_no_data), e.has_batch_no && n.pos_profile.posa_auto_set_batch && !e.batch_no && i.batch_no_data && i.batch_no_data.length > 0 && (e.batch_no_data = i.batch_no_data, n.set_batch_qty(e, null, !1)), !e.locked_price) {
            if ((t || !e.base_rate) && (i.price_list_rate !== 0 || !e.base_price_list_rate) && (e.base_price_list_rate = i.price_list_rate, e.posa_offer_applied || (e.base_rate = i.price_list_rate)), e.posa_offer_applied) {
              const o = n.price_list_currency || n.pos_profile.currency;
              n.selected_currency !== o ? e.price_list_rate = n.flt(
                e.base_rate * n.exchange_rate,
                n.currency_precision
              ) : e.price_list_rate = e.base_rate;
            } else {
              const o = n.pos_profile.currency, l = o;
              if (n.selected_currency === n.price_list_currency && n.selected_currency !== o) {
                const s = n.conversion_rate || 1;
                e.price_list_rate = n.flt(
                  e.base_price_list_rate / s,
                  n.currency_precision
                ), e._manual_rate_set || (e.rate = n.flt(e.base_rate / s, n.currency_precision));
              } else if (n.selected_currency !== l) {
                const s = n.exchange_rate || 1;
                e.price_list_rate = n.flt(
                  e.base_price_list_rate * s,
                  n.currency_precision
                ), e.rate = n.flt(e.base_rate * s, n.currency_precision);
              } else
                e.price_list_rate = e.base_price_list_rate, e._manual_rate_set || (e.rate = e.base_rate);
            }
            if (!e.posa_offer_applied && n.pos_profile.posa_apply_customer_discount && n.customer_info.posa_discount > 0 && n.customer_info.posa_discount <= 100 && e.posa_is_offer == 0 && !e.posa_is_replace) {
              const o = e.max_discount > 0 ? Math.min(e.max_discount, n.customer_info.posa_discount) : n.customer_info.posa_discount;
              e.discount_percentage = o;
              const l = n.flt(
                e.price_list_rate * o / 100,
                n.currency_precision
              );
              e.discount_amount = l, e.base_discount_amount = n.flt(
                e.base_price_list_rate * o / 100,
                n.currency_precision
              ), e.rate = n.flt(e.price_list_rate - l, n.currency_precision), e.base_rate = n.flt(
                e.base_price_list_rate - e.base_discount_amount,
                n.currency_precision
              );
            }
          }
          e.last_purchase_rate = i.last_purchase_rate, e.projected_qty = i.projected_qty, e.reserved_qty = i.reserved_qty, e.conversion_factor = i.conversion_factor, e.stock_qty = i.stock_qty, e.actual_qty = i.actual_qty, e.stock_uom = i.stock_uom, e.has_serial_no = i.has_serial_no, e.has_batch_no = i.has_batch_no, e.amount = n.flt(e.qty * e.rate, n.currency_precision), e.base_amount = n.flt(e.qty * e.base_rate, n.currency_precision), console.log(`Updated rates for ${e.item_code} on expand:`, {
            base_rate: e.base_rate,
            rate: e.rate,
            base_price_list_rate: e.base_price_list_rate,
            price_list_rate: e.price_list_rate,
            exchange_rate: n.exchange_rate,
            selected_currency: n.selected_currency,
            default_currency: n.pos_profile.currency
          }), n.$forceUpdate();
        }
      },
      error: function(r) {
        console.error("=== get_item_detail API ERROR ===", r), console.error("Error details:", {
          status: r.status,
          statusText: r.statusText,
          responseText: r.responseText,
          currentDoc: a,
          item_code: e.item_code
        });
      }
    });
  },
  // Fetch customer details (info, price list, etc)
  async fetch_customer_details() {
    var e = this;
    if (this.customer) {
      if (un())
        try {
          const n = (await yD() || []).find(
            (r) => r.name === e.customer || r.customer_name === e.customer
          );
          if (n) {
            e.customer_info = { ...n }, e.pos_profile.posa_force_reload_items && n.customer_price_list && (e.selected_price_list = n.customer_price_list, e.eventBus.emit("update_customer_price_list", n.customer_price_list), e.apply_cached_price_list(n.customer_price_list));
            return;
          }
          const a = (v1() || []).map((r) => r.args).find((r) => r.customer_name === e.customer);
          if (a) {
            e.customer_info = { ...a, name: a.customer_name }, e.pos_profile.posa_force_reload_items && a.customer_price_list && (e.selected_price_list = a.customer_price_list, e.eventBus.emit("update_customer_price_list", a.customer_price_list), e.apply_cached_price_list(a.customer_price_list));
            return;
          }
        } catch (t) {
          console.error("Failed to fetch cached customer", t);
        }
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.customers.get_customer_info",
          args: {
            customer: e.customer
          }
        }), n = t.message;
        t.exc || (e.customer_info = {
          ...n
        }), e.pos_profile.posa_force_reload_items && n.customer_price_list && (e.selected_price_list = n.customer_price_list, e.eventBus.emit("update_customer_price_list", n.customer_price_list), e.apply_cached_price_list(n.customer_price_list));
      } catch (t) {
        console.error("Failed to fetch customer details", t);
      }
    }
  },
  // Get price list for current customer
  get_price_list() {
    return this.selected_price_list || this.pos_profile.selling_price_list;
  },
  // Update price list for customer
  update_price_list() {
    const e = this.pos_profile.selling_price_list;
    this.selected_price_list !== e && (this.selected_price_list = e, this.eventBus.emit("update_customer_price_list", null));
  },
  // Apply cached price list rates to existing invoice items
  async apply_cached_price_list(e) {
    const t = await gD(e);
    if (!Array.isArray(t) || !t.length)
      return;
    const n = {};
    t.forEach((a) => {
      n[a.item_code] = a;
    }), this.items.forEach((a) => {
      const r = n[a.item_code];
      if (!r) return;
      const i = r.rate || r.price_list_rate, o = r.currency || this.selected_currency;
      if (a.original_currency || (a.original_currency = o), a.original_rate || (a.original_rate = i), o === this.selected_currency) {
        const l = this.pos_profile.currency;
        if (o !== l) {
          const s = this.conversion_rate || 1;
          a.base_price_list_rate = i * s, a._manual_rate_set || (a.base_rate = i * s);
        } else
          a.base_price_list_rate = i, a._manual_rate_set || (a.base_rate = i);
        a.price_list_rate = i, a._manual_rate_set || (a.rate = i);
      } else {
        (i !== 0 || !a.base_price_list_rate) && (a.base_price_list_rate = i, a._manual_rate_set || (a.base_rate = i));
        const l = this.pos_profile.currency;
        if (this.selected_currency !== l) {
          const s = this.exchange_rate || 1, d = this.flt(i * s, this.currency_precision);
          (i !== 0 || !a.price_list_rate) && (a.price_list_rate = d), !a._manual_rate_set && (i !== 0 || !a.rate) && (a.rate = d);
        } else
          (i !== 0 || !a.price_list_rate) && (a.price_list_rate = i), !a._manual_rate_set && (i !== 0 || !a.rate) && (a.rate = i);
      }
      a.amount = this.flt(a.qty * a.rate, this.currency_precision), a.base_amount = this.flt(a.qty * a.base_rate, this.currency_precision);
    }), this.$forceUpdate();
  },
  // Update additional discount amount based on percentage
  update_discount_umount() {
    return Bne(this);
  },
  // Calculate prices and discounts for an item based on field change
  calc_prices(e, t, n) {
    return Vne(e, t, n, this);
  },
  // Calculate item price and discount fields
  calc_item_price(e) {
    return Mne(e, this);
  },
  // Update UOM (unit of measure) for an item and recalculate prices
  calc_uom(e, t) {
    return Une(e, t, this);
  },
  // Calculate stock quantity for an item with stock validation
  calc_stock_qty(e, t) {
    Iy(e, t, this), e.is_stock_item && (this.update_qty_limits && this.update_qty_limits(e), e.max_qty !== void 0 && flt(e.qty) > flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e.qty = e.max_qty, Iy(e, e.qty, this), this.$forceUpdate(), this.eventBus.emit("show_message", {
      title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
        this.formatFloat(e.max_qty)
      ]),
      color: "error"
    })) : this.eventBus.emit("show_message", {
      title: __("Stock is lower than requested. Proceeding may create negative stock."),
      color: "warning"
    })));
  },
  // Update quantity limits based on available stock
  update_qty_limits(e) {
    e && e.available_qty !== void 0 && e.is_stock_item ? (e.max_qty = flt(e.available_qty / (e.conversion_factor || 1)), e.max_qty !== void 0 && flt(e.qty) > flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e.qty = e.max_qty, Iy(e, e.qty, this), this.$forceUpdate(), this.eventBus.emit("show_message", {
      title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
        this.formatFloat(e.max_qty)
      ]),
      color: "error"
    })) : this.eventBus.emit("show_message", {
      title: __("Stock is lower than requested. Proceeding may create negative stock."),
      color: "warning"
    })), e.disable_increment = (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty) && e.qty >= e.max_qty) : e && !e.is_stock_item && (e.max_qty = void 0, e.disable_increment = !1);
  },
  // Fetch available stock for an item and cache it
  async fetch_available_qty(e) {
    if (!e || !e.item_code || !e.warehouse || !e.is_stock_item) {
      e && !e.is_stock_item && (e.available_qty = void 0, e.max_qty = void 0, e.disable_increment = !1);
      return;
    }
    const t = `${e.item_code}:${e.warehouse}:${e.batch_no || ""}:${e.uom}`, n = this.available_stock_cache[t], a = Date.now();
    if (n && a - n.ts < 6e4) {
      e.available_qty = n.qty, this.update_qty_limits(e);
      return;
    }
    try {
      const r = await frappe.call({
        method: "posawesome.posawesome.api.items.get_available_qty",
        args: {
          items: JSON.stringify([
            {
              item_code: e.item_code,
              warehouse: e.warehouse,
              batch_no: e.batch_no
            }
          ])
        }
      }), i = r.message && r.message.length ? flt(r.message[0].available_qty) : 0;
      this.available_stock_cache[t] = { qty: i, ts: a }, e.available_qty = i, this.update_qty_limits(e);
    } catch (r) {
      console.error("Failed to fetch available qty", r);
    }
  },
  // Set serial numbers for an item (and update qty)
  set_serial_no(e) {
    return One(e, this);
  },
  // Set batch number for an item (and update batch data)
  set_batch_qty(e, t, n = !0) {
    return Dne(e, t, n, this);
  },
  change_price_list_rate(e) {
    const t = this, n = new frappe.ui.Dialog({
      title: __("Change Price"),
      fields: [
        {
          fieldname: "new_rate",
          fieldtype: "Float",
          label: __("New Price List Rate"),
          default: e.price_list_rate || e.rate,
          reqd: 1
        }
      ],
      primary_action_label: __("Update"),
      primary_action(a) {
        const r = flt(a.new_rate);
        frappe.call({
          method: "posawesome.posawesome.api.items.update_price_list_rate",
          args: {
            item_code: e.item_code,
            price_list: t.get_price_list(),
            rate: r,
            uom: e.uom
          },
          callback(i) {
            i.exc || (e.price_list_rate = r, e.base_price_list_rate = r, e._manual_rate_set || (e.rate = r, e.base_rate = r), t.calc_item_price(e), t.eventBus.emit("show_message", {
              title: i.message || __("Item price updated"),
              color: "success"
            }));
          }
        }), n.hide();
      }
    });
    n.get_field("new_rate").$input.on("keydown", function(a) {
      a.key === "Enter" && n.get_primary_btn().click();
    }), n.show();
  }
}, qne = {
  // Calculate total quantity of all items
  total_qty() {
    this.close_payments();
    let e = 0;
    return this.items.forEach((t) => {
      e += flt(t.qty);
    }), this.flt(e, this.float_precision);
  },
  // Calculate total amount for all items (handles returns)
  Total() {
    let e = 0;
    return this.items.forEach((t) => {
      const n = this.isReturnInvoice ? Math.abs(flt(t.qty)) : flt(t.qty), a = flt(t.rate);
      e += n * a;
    }), this.flt(e, this.currency_precision);
  },
  // Calculate subtotal after discounts and delivery charges
  subtotal() {
    this.close_payments();
    let e = 0;
    this.items.forEach((a) => {
      const r = this.isReturnInvoice ? Math.abs(flt(a.qty)) : flt(a.qty), i = flt(a.rate);
      e += r * i;
    });
    const t = this.flt(this.additional_discount);
    e -= t;
    const n = this.flt(this.delivery_charges_rate);
    return e += n, this.flt(e, this.currency_precision);
  },
  // Calculate total discount amount for all items
  total_items_discount_amount() {
    let e = 0;
    return this.items.forEach((t) => {
      this.isReturnInvoice ? e += Math.abs(flt(t.qty)) * flt(t.discount_amount) : e += flt(t.qty) * flt(t.discount_amount);
    }), this.flt(e, this.float_precision);
  },
  // Format posting_date for display as DD-MM-YYYY
  formatted_posting_date: {
    get() {
      if (!this.posting_date) return "";
      const e = this.posting_date.split("-");
      return e.length === 3 ? `${e[2]}-${e[1]}-${e[0]}` : this.posting_date;
    },
    set(e) {
      const t = e.split("-");
      t.length === 3 ? this.posting_date = `${t[2]}-${t[1]}-${t[0]}` : this.posting_date = e;
    }
  },
  // Get currency symbol for display
  currencySymbol() {
    return (e) => get_currency_symbol(e || this.selected_currency || this.pos_profile.currency);
  },
  // Get display currency
  displayCurrency() {
    return this.selected_currency || this.pos_profile.currency;
  },
  // Determine if current invoice is a return
  isReturnInvoice() {
    return this.invoiceType === "Return" || this.invoice_doc && this.invoice_doc.is_return;
  },
  // Table headers for item table (for another table if needed)
  itemTableHeaders() {
    return [
      {
        text: __("Item"),
        value: "item_name",
        width: "35%"
      },
      {
        text: __("Qty"),
        value: "qty",
        width: "15%"
      },
      {
        text: __(`Rate (${this.displayCurrency})`),
        value: "rate",
        width: "20%"
      },
      {
        text: __(`Amount (${this.displayCurrency})`),
        value: "amount",
        width: "20%"
      },
      {
        text: __("Action"),
        value: "actions",
        sortable: !1,
        width: "10%"
      }
    ];
  }
}, Hne = {
  // Watch for customer change and update related data
  customer() {
    this.close_payments(), this.eventBus.emit("set_customer", this.customer), this.fetch_customer_details(), this.fetch_customer_balance(), this.set_delivery_charges();
  },
  // Watch for customer_info change and emit to edit form
  customer_info() {
    this.eventBus.emit("set_customer_info_to_edit", this.customer_info);
  },
  // Watch for expanded row change and update item detail
  expanded(e) {
    if (e.length > 0) {
      const t = e[0], n = this.items.find((a) => a.posa_row_id === t);
      n && this.update_item_detail(n);
    }
  },
  // Watch for discount offer name change and emit
  discount_percentage_offer_name() {
    this.eventBus.emit("update_discount_percentage_offer_name", {
      value: this.discount_percentage_offer_name
    });
  },
  // Watch for items array changes (deep) and re-handle offers
  items: {
    deep: !0,
    handler() {
      this.isApplyingOffer || (this.handelOffers(), this.$forceUpdate());
    }
  },
  packed_items: {
    deep: !0,
    handler() {
      this.isApplyingOffer || (this.handelOffers(), this.$forceUpdate());
    }
  },
  // Watch for invoice type change and emit
  invoiceType() {
    this.eventBus.emit("update_invoice_type", this.invoiceType);
  },
  // Watch for additional discount and update percentage accordingly
  additional_discount() {
    !this.additional_discount || this.additional_discount == 0 ? this.additional_discount_percentage = 0 : this.pos_profile.posa_use_percentage_discount ? this.Total && this.Total !== 0 ? this.additional_discount_percentage = this.additional_discount / this.Total * 100 : this.additional_discount_percentage = 0 : this.additional_discount_percentage = 0;
  },
  // Keep display date in sync with posting_date
  posting_date: {
    handler(e) {
      this.posting_date_display = this.formatDateForDisplay(e);
    },
    immediate: !0
  },
  // Update posting_date when user changes the display value
  posting_date_display(e) {
    this.posting_date = this.formatDateForBackend(e);
  },
  selected_price_list(e) {
    Uu();
    const t = e === this.pos_profile.selling_price_list ? null : e;
    this.eventBus.emit("update_customer_price_list", t);
    const n = e || this.pos_profile.selling_price_list;
    this.apply_cached_price_list(n), this.pos_profile.posa_allow_multi_currency && n && frappe.call({
      method: "posawesome.posawesome.api.invoices.get_price_list_currency",
      args: { price_list: n },
      callback: (a) => {
        a.message && (this.price_list_currency = a.message, this.update_currency(a.message));
      }
    });
  },
  // Reactively update item prices when currency changes
  selected_currency() {
    Uu(), this.items && this.items.length && this.update_item_rates();
  },
  // Reactively update item prices when exchange rate changes
  exchange_rate() {
    this.items && this.items.length && this.update_item_rates();
  }
};
function Wv(e) {
  if (e)
    try {
      const t = document.createElement("iframe");
      t.style.position = "fixed", t.style.right = "0", t.style.bottom = "0", t.style.width = "0", t.style.height = "0", t.style.border = "0", t.onload = () => {
        try {
          t.contentWindow.focus(), t.contentWindow.print();
        } finally {
          setTimeout(() => t.remove(), 1e3);
        }
      }, t.src = e, document.body.appendChild(t);
    } catch (t) {
      console.error("Silent print failed, falling back to new window", t);
      const n = window.open(e, "_blank");
      n && n.addEventListener("load", () => n.print(), { once: !0 });
    }
}
const zne = {
  checkOfferIsAppley(e, t) {
    let n = !1;
    const a = JSON.parse(e.posa_offers);
    for (const r of a) {
      const i = this.posa_offers.find((o) => r == o.row_id);
      if (i && i.offer_name == t.name) {
        n = !0;
        break;
      }
    }
    return n;
  },
  handelOffers() {
    const e = [];
    this.posOffers.forEach((t) => {
      if (t.apply_on === "Item Code") {
        const n = this.getItemOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Item Group") {
        const n = this.getGroupOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Brand") {
        const n = this.getBrandOffer(t);
        n && e.push(n);
      } else if (t.apply_on === "Transaction") {
        const n = this.getTransactionOffer(t);
        n && e.push(n);
      }
    }), this.setItemGiveOffer(e), this.updatePosOffers(e);
  },
  setItemGiveOffer(e) {
    e.forEach((t) => {
      if (t.apply_on == "Item Code" && t.apply_type == "Item Code" && t.replace_item)
        t.give_item = t.item, t.apply_item_code = t.item;
      else if (t.apply_on == "Item Group" && t.apply_type == "Item Group" && t.replace_cheapest_item) {
        const n = this.getCheapestItem(t).item_code;
        t.give_item = n, t.apply_item_code = n;
      }
    });
  },
  getCheapestItem(e) {
    let t;
    typeof e.items == "string" ? t = JSON.parse(e.items) : t = e.items;
    const n = [];
    return t.forEach((r) => {
      n.push(this.getItemFromRowID(r));
    }), n.reduce(function(r, i) {
      return !i.posa_is_replace && !i.posa_is_offer && i.price_list_rate < r.price_list_rate ? i : r;
    });
  },
  getItemFromRowID(e) {
    return [...this.items, ...this.packed_items].find((n) => n.posa_row_id == e);
  },
  checkQtyAnountOffer(e, t, n) {
    let a = !1, r = !1, i = !1, o = !1;
    const l = [];
    (e.min_qty || e.min_qty == 0) && (t >= e.min_qty && (a = !0), l.push(a)), e.max_qty > 0 && (t <= e.max_qty && (r = !0), l.push(r)), e.min_amt > 0 && (n >= e.min_amt && (i = !0), l.push(i)), e.max_amt > 0 && (n <= e.max_amt && (o = !0), l.push(o));
    let s = !1;
    return l.includes(!1) || (s = !0), {
      apply: s,
      conditions: { min_qty: a, max_qty: r, min_amt: i, max_amt: o }
    };
  },
  checkOfferCoupon(e) {
    if (e.coupon_based) {
      const t = this.posa_coupons.find((n) => e.name == n.pos_offer);
      return t ? (e.coupon = t.coupon, !0) : !1;
    } else
      return e.coupon = null, !0;
  },
  getItemOffer(e) {
    let t = null;
    return e.apply_on === "Item Code" && this.checkOfferCoupon(e) && [...this.items, ...this.packed_items].forEach((a) => {
      if (!a.posa_is_offer && a.item_code === e.item) {
        if (e.offer === "Item Price" && a.posa_offer_applied && !this.checkOfferIsAppley(a, e))
          return;
        const r = [], i = a.original_price_list_rate || a.price_list_rate;
        this.checkQtyAnountOffer(e, a.stock_qty, a.stock_qty * i).apply && (r.push(a.posa_row_id), e.items = r, t = e);
      }
    }), t;
  },
  getGroupOffer(e) {
    let t = null;
    if (e.apply_on === "Item Group" && this.checkOfferCoupon(e)) {
      const n = [];
      let a = 0, r = 0;
      [...this.items, ...this.packed_items].forEach((o) => {
        if (!o.posa_is_offer && o.item_group === e.item_group) {
          if (e.offer === "Item Price" && o.posa_offer_applied && !this.checkOfferIsAppley(o, e))
            return;
          a += o.stock_qty;
          const l = o.original_price_list_rate || o.price_list_rate;
          r += o.stock_qty * l, n.push(o.posa_row_id);
        }
      }), (a || r) && this.checkQtyAnountOffer(e, a, r).apply && (e.items = n, t = e);
    }
    return t;
  },
  getBrandOffer(e) {
    let t = null;
    if (e.apply_on === "Brand" && this.checkOfferCoupon(e)) {
      const n = [];
      let a = 0, r = 0;
      [...this.items, ...this.packed_items].forEach((o) => {
        if (!o.posa_is_offer && o.brand === e.brand) {
          if (e.offer === "Item Price" && o.posa_offer_applied && !this.checkOfferIsAppley(o, e))
            return;
          a += o.stock_qty;
          const l = o.original_price_list_rate || o.price_list_rate;
          r += o.stock_qty * l, n.push(o.posa_row_id);
        }
      }), (a || r) && this.checkQtyAnountOffer(e, a, r).apply && (e.items = n, t = e);
    }
    return t;
  },
  getTransactionOffer(e) {
    let t = null;
    if (e.apply_on === "Transaction" && this.checkOfferCoupon(e)) {
      const n = [...this.items, ...this.packed_items];
      let a = 0, r = 0;
      const i = [];
      n.forEach((l) => {
        if (!l.posa_is_offer && !l.posa_is_replace) {
          a += l.stock_qty;
          const s = l.original_price_list_rate || l.price_list_rate;
          r += l.stock_qty * s, i.push(l.posa_row_id);
        }
      });
      const o = a;
      (o || r) && this.checkQtyAnountOffer(e, o, r).apply && (e.items = i, t = e);
    }
    return t;
  },
  updatePosOffers(e) {
    this.eventBus.emit("update_pos_offers", e);
  },
  updateInvoiceOffers(e) {
    this.posa_offers.forEach((t) => {
      e.find((a) => t.row_id == a.row_id) || this.removeApplyOffer(t);
    }), e.forEach((t) => {
      const n = this.posa_offers.find((a) => a.row_id == t.row_id);
      if (n) {
        if (n.items = JSON.stringify(t.items), n.offer === "Give Product" && n.give_item && n.give_item != t.give_item) {
          const a = [...this.items, ...this.packed_items], r = a.find(
            (o) => o.posa_row_id == n.give_item_row_id
          );
          if (r) {
            const o = t.items.filter(
              (d) => d != r.posa_row_id
            );
            t.items = o;
            const l = this.items.includes(r) ? this.items : this.packed_items, s = l.findIndex(
              (d) => d.posa_row_id == r.posa_row_id
            );
            s > -1 && l.splice(s, 1), n.give_item_row_id = null, n.give_item = null;
          }
          const i = this.ApplyOnGiveProduct(t);
          if (t.replace_cheapest_item) {
            const o = this.getCheapestItem(t), l = a.find(
              (d) => d.posa_row_id == r.posa_is_replace
            );
            if (i.qty = r.qty, l && !l.posa_is_replace)
              l.qty += r.qty;
            else {
              const d = this.ApplyOnGiveProduct(
                {
                  given_qty: r.qty
                },
                r.item_code
              );
              d.posa_is_offer = 0, this.items.unshift(d);
            }
            i.posa_is_offer = 0, i.posa_is_replace = o.posa_row_id;
            const s = o.qty - i.qty;
            if (s <= 0) {
              i.qty += s;
              const d = this.items.includes(o) ? this.items : this.packed_items, u = d.findIndex(
                (f) => f.posa_row_id == o.posa_row_id
              );
              u > -1 && d.splice(u, 1), i.posa_row_id = o.posa_row_id, i.posa_is_replace = i.posa_row_id;
            } else
              o.qty = s;
          }
          this.items.unshift(i), n.give_item_row_id = i.posa_row_id, n.give_item = i.item_code;
        } else n.offer === "Give Product" && n.give_item && n.give_item == t.give_item && (t.replace_item || t.replace_cheapest_item) ? this.$nextTick(function() {
          const a = this.getItemFromRowID(n.give_item_row_id), r = t.given_qty - a.qty;
          if (r > 0) {
            const i = JSON.parse(n.items), o = [];
            i.forEach((s) => {
              o.push(this.getItemFromRowID(s));
            });
            const l = o.find(
              (s) => s.item_code == a.item_code && s.posa_is_replace != a.posa_row_id
            );
            if (l)
              if (l.qty - r > 0)
                a.qty += r, l.qty -= r;
              else {
                a.qty += l.qty;
                const d = this.items.includes(l) ? this.items : this.packed_items, u = d.findIndex(
                  (f) => f.posa_row_id == l.posa_row_id
                );
                u > -1 && d.splice(u, 1);
              }
          }
        }) : n.offer === "Item Price" ? this.ApplyOnPrice(t) : n.offer === "Grand Total" && this.ApplyOnTotal(t);
        this.addOfferToItems(n);
      } else
        this.applyNewOffer(t);
    });
  },
  removeApplyOffer(e) {
    if (e.offer === "Item Price") {
      this.RemoveOnPrice(e);
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    if (e.offer === "Give Product") {
      const n = [...this.items, ...this.packed_items].find((r) => r.posa_row_id == e.give_item_row_id), a = this.posa_offers.findIndex((r) => r.row_id === e.row_id);
      if (this.posa_offers.splice(a, 1), n) {
        const r = this.items.includes(n) ? this.items : this.packed_items, i = r.findIndex((o) => o.posa_row_id == n.posa_row_id);
        i > -1 && r.splice(i, 1);
      }
    }
    if (e.offer === "Grand Total") {
      this.RemoveOnTotal(e);
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    if (e.offer === "Loyalty Point") {
      const t = this.posa_offers.findIndex((n) => n.row_id === e.row_id);
      this.posa_offers.splice(t, 1);
    }
    this.deleteOfferFromItems(e);
  },
  applyNewOffer(e) {
    if (this.isApplyingOffer = !0, e.offer === "Item Price" && this.ApplyOnPrice(e), e.offer === "Give Product") {
      let n;
      if (typeof e.items == "string" ? n = JSON.parse(e.items) : n = e.items, e.apply_on == "Item Code" && e.apply_type == "Item Code" && e.replace_item) {
        const a = this.ApplyOnGiveProduct(e, e.item);
        a.posa_is_replace = n[0];
        const i = [...this.items, ...this.packed_items].find((l) => l.posa_row_id == a.posa_is_replace), o = i.qty - e.given_qty;
        if (a.posa_is_offer = 0, o <= 0) {
          a.qty = i.qty;
          const l = this.items.includes(i) ? this.items : this.packed_items, s = l.findIndex((d) => d.posa_row_id == i.posa_row_id);
          s > -1 && l.splice(s, 1), a.posa_row_id = a.posa_is_replace;
        } else
          i.qty = o;
        this.items.unshift(a), e.give_item_row_id = a.posa_row_id;
      } else if (e.apply_on == "Item Group" && e.apply_type == "Item Group" && e.replace_cheapest_item) {
        const a = [];
        n.forEach((l) => {
          a.push(this.getItemFromRowID(l));
        });
        const r = a.find((l) => l.item_code == e.give_item), i = this.ApplyOnGiveProduct(e, e.give_item);
        i.posa_is_offer = 0, i.posa_is_replace = r.posa_row_id;
        const o = r.qty - e.given_qty;
        if (o <= 0) {
          i.qty = r.qty;
          const l = this.items.includes(r) ? this.items : this.packed_items, s = l.findIndex((d) => d.posa_row_id == r.posa_row_id);
          s > -1 && l.splice(s, 1), i.posa_row_id = i.posa_is_replace;
        } else
          r.qty = o;
        this.items.unshift(i), e.give_item_row_id = i.posa_row_id;
      } else {
        const a = this.ApplyOnGiveProduct(e);
        this.items.unshift(a), a && (e.give_item_row_id = a.posa_row_id);
      }
    }
    e.offer === "Grand Total" && this.ApplyOnTotal(e), e.offer === "Loyalty Point" && this.eventBus.emit("show_message", {
      title: __("Loyalty Point Offer Applied"),
      color: "success"
    });
    const t = {
      offer_name: e.name,
      row_id: e.row_id,
      apply_on: e.apply_on,
      offer: e.offer,
      items: JSON.stringify(e.items),
      give_item: e.give_item,
      give_item_row_id: e.give_item_row_id,
      offer_applied: e.offer_applied,
      coupon_based: e.coupon_based,
      coupon: e.coupon
    };
    this.posa_offers.push(t), this.addOfferToItems(t), this.isApplyingOffer = !1;
  },
  ApplyOnGiveProduct(e, t) {
    t || (t = e.give_item);
    const a = this.allItems.find((o) => o.item_code == t);
    if (!a)
      return;
    const r = { ...a };
    if (r.qty = e.given_qty, r.stock_qty = e.given_qty, e.discount_type === "Rate") {
      r.base_rate = e.rate;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.rate = this.flt(e.rate * this.exchange_rate, this.currency_precision) : r.rate = e.rate;
    } else if (e.discount_type === "Discount Percentage") {
      const o = a.base_rate || a.rate / this.exchange_rate, l = this.flt(
        o * e.discount_percentage / 100,
        this.currency_precision
      );
      r.base_discount_amount = l, r.base_rate = this.flt(o - l, this.currency_precision);
      const s = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== s ? (r.discount_amount = this.flt(
        l * this.exchange_rate,
        this.currency_precision
      ), r.rate = this.flt(r.base_rate * this.exchange_rate, this.currency_precision)) : (r.discount_amount = l, r.rate = r.base_rate);
    } else {
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? (r.base_rate = a.base_rate || a.rate / this.exchange_rate, r.rate = a.rate) : (r.base_rate = a.rate, r.rate = a.rate);
    }
    if (e.discount_type === "Discount Amount") {
      r.base_discount_amount = e.discount_amount;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.discount_amount = this.flt(
        e.discount_amount * this.exchange_rate,
        this.currency_precision
      ) : r.discount_amount = e.discount_amount;
    } else e.discount_type !== "Discount Percentage" && (r.base_discount_amount = 0, r.discount_amount = 0);
    r.discount_percentage = e.discount_type === "Discount Percentage" ? e.discount_percentage : 0, r.discount_amount_per_item = 0, r.uom = a.uom ? a.uom : a.stock_uom, r.actual_batch_qty = "", r.conversion_factor = 1, r.posa_offers = JSON.stringify([]), r.posa_offer_applied = e.discount_type === "Rate" || e.discount_type === "Discount Amount" || e.discount_type === "Discount Percentage" ? 1 : 0, r.posa_is_offer = 1, r.posa_is_replace = null, r.posa_notes = "", r.posa_delivery_date = "";
    const i = e.discount_type === "Rate" && !e.rate || e.discount_type === "Discount Percentage" && e.discount_percentage == 100;
    if (r.is_free_item = i ? 1 : 0, i)
      r.base_price_list_rate = 0, r.price_list_rate = 0;
    else {
      r.price_list_rate = a.rate;
      const o = this.price_list_currency || this.pos_profile.currency;
      this.selected_currency !== o ? r.base_price_list_rate = this.flt(
        a.rate / this.exchange_rate,
        this.currency_precision
      ) : r.base_price_list_rate = a.rate;
    }
    return r.posa_row_id = this.makeid(20), (!this.pos_profile.posa_auto_set_batch && r.has_batch_no || r.has_serial_no) && this.expanded.push(r.posa_row_id), this.update_item_detail(r), r;
  },
  ApplyOnPrice(e) {
    if (console.log("Applying price offer:", e), !e) return;
    [...this.items, ...this.packed_items].forEach((n) => {
      if (!(!n || !e.items || !Array.isArray(e.items)) && e.items.includes(n.posa_row_id)) {
        const a = n.posa_offers ? JSON.parse(n.posa_offers) : [];
        if (!Array.isArray(a)) return;
        if (!a.includes(e.row_id)) {
          if (!n.posa_offer_applied) {
            const i = flt(n.conversion_factor || 1);
            n.original_base_rate = n.base_rate / i, n.original_base_price_list_rate = n.base_price_list_rate / i, n.original_rate = n.rate / i, n.original_price_list_rate = n.price_list_rate / i, console.log("Storing original rates (normalized to conversion factor 1):", {
              original_base_rate: n.original_base_rate,
              original_base_price_list_rate: n.original_base_price_list_rate,
              original_rate: n.original_rate,
              original_price_list_rate: n.original_price_list_rate,
              conversion_factor: i
            });
          }
          const r = flt(n.conversion_factor || 1);
          if (e.discount_type === "Rate") {
            const i = flt(e.rate * r);
            n.base_rate = i, n.base_price_list_rate = i;
            const o = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== o ? (n.rate = this.flt(
              i * this.exchange_rate,
              this.currency_precision
            ), n.price_list_rate = n.rate) : (n.rate = i, n.price_list_rate = i), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0;
          } else if (e.discount_type === "Discount Percentage") {
            n.discount_percentage = e.discount_percentage;
            const i = this.flt(
              (n.original_base_price_list_rate || n.base_price_list_rate / r) * r,
              this.currency_precision
            ), o = this.flt(
              i * e.discount_percentage / 100,
              this.currency_precision
            );
            n.base_discount_amount = o, n.base_rate = this.flt(i - o, this.currency_precision), n.base_price_list_rate = n.base_rate;
            const l = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== l ? (n.rate = this.flt(
              n.base_rate * this.exchange_rate,
              this.currency_precision
            ), n.price_list_rate = n.rate, n.discount_amount = this.flt(
              o * this.exchange_rate,
              this.currency_precision
            )) : (n.rate = n.base_rate, n.price_list_rate = n.base_rate, n.discount_amount = o);
          }
          n.amount = this.flt(n.qty * n.rate, this.currency_precision), n.base_amount = this.flt(n.qty * n.base_rate, this.currency_precision), console.log("Updated rates after applying offer:", {
            rate: n.rate,
            base_rate: n.base_rate,
            price_list_rate: n.price_list_rate,
            base_price_list_rate: n.base_price_list_rate,
            discount_amount: n.discount_amount,
            base_discount_amount: n.base_discount_amount,
            amount: n.amount,
            base_amount: n.base_amount
          }), n.posa_offer_applied = 1, this.$forceUpdate();
        }
      }
    });
  },
  RemoveOnPrice(e) {
    if (console.log("Removing price offer:", e), !e) return;
    [...this.items, ...this.packed_items].forEach((n) => {
      if (!(!n || !n.posa_offers))
        try {
          const a = JSON.parse(n.posa_offers);
          if (!Array.isArray(a)) return;
          if (a.includes(e.row_id)) {
            if (console.log("Found item with offer:", n), !n.original_base_rate) {
              console.warn("Original rates not found, fetching from server"), this.update_item_detail(n);
              return;
            }
            const r = flt(n.conversion_factor || 1);
            console.log("Restoring original rates with conversion factor:", {
              original_base_rate: n.original_base_rate,
              original_base_price_list_rate: n.original_base_price_list_rate,
              conversion_factor: r
            }), n.base_rate = this.flt(n.original_base_rate * r, this.currency_precision), n.base_price_list_rate = this.flt(
              n.original_base_price_list_rate * r,
              this.currency_precision
            );
            const i = this.price_list_currency || this.pos_profile.currency;
            this.selected_currency !== i ? (n.rate = this.flt(n.base_rate * this.exchange_rate, this.currency_precision), n.price_list_rate = this.flt(
              n.base_price_list_rate * this.exchange_rate,
              this.currency_precision
            )) : (n.rate = n.base_rate, n.price_list_rate = n.base_price_list_rate), n.discount_percentage = 0, n.discount_amount = 0, n.base_discount_amount = 0, n.amount = this.flt(n.qty * n.rate, this.currency_precision), n.base_amount = this.flt(n.qty * n.base_rate, this.currency_precision);
            const o = a.filter((l) => l !== e.row_id);
            o.length === 0 && (n.original_base_rate = null, n.original_base_price_list_rate = null, n.original_rate = null, n.original_price_list_rate = null, n.posa_offer_applied = 0), n.posa_offers = JSON.stringify(o), console.log("Updated rates after removing offer:", {
              rate: n.rate,
              base_rate: n.base_rate,
              price_list_rate: n.price_list_rate,
              base_price_list_rate: n.base_price_list_rate,
              amount: n.amount,
              base_amount: n.base_amount,
              remaining_offers: o
            }), this.$forceUpdate();
          }
        } catch (a) {
          console.error("Error removing price offer:", a), this.eventBus.emit("show_message", {
            title: __("Error removing price offer"),
            color: "error",
            message: a.message
          });
        }
    });
  },
  ApplyOnTotal(e) {
    e.name || (e = this.posOffers.find((t) => t.name == e.offer_name)), !(this.discount_percentage_offer_name === e.name && this.discount_amount !== 0) && (!this.discount_percentage_offer_name || this.discount_percentage_offer_name == e.name) && e.discount_percentage > 0 && e.discount_percentage <= 100 && (this.discount_amount = this.flt(
      flt(this.Total) * flt(e.discount_percentage) / 100,
      this.currency_precision
    ), this.discount_percentage_offer_name = e.name, this.additional_discount = this.discount_amount, this.Total && this.Total !== 0 ? this.additional_discount_percentage = this.discount_amount / this.Total * 100 : this.additional_discount_percentage = 0);
  },
  RemoveOnTotal(e) {
    this.discount_percentage_offer_name && this.discount_percentage_offer_name == e.offer_name && (this.discount_amount = 0, this.discount_percentage_offer_name = null, this.additional_discount = 0, this.additional_discount_percentage = 0);
  },
  addOfferToItems(e) {
    if (!(!e || !e.items))
      try {
        const t = typeof e.items == "string" ? JSON.parse(e.items) : e.items;
        if (!Array.isArray(t)) return;
        const n = [...this.items, ...this.packed_items];
        t.forEach((a) => {
          n.forEach((r) => {
            if (!(!r || !r.posa_row_id) && r.posa_row_id == a) {
              const i = r.posa_offers ? JSON.parse(r.posa_offers) : [];
              if (!Array.isArray(i)) return;
              i.includes(e.row_id) || (i.push(e.row_id), e.offer === "Item Price" && (r.posa_offer_applied = 1)), r.posa_offers = JSON.stringify(i);
            }
          });
        });
      } catch (t) {
        console.error("Error adding offer to items:", t), this.eventBus.emit("show_message", {
          title: __("Error adding offer to items"),
          color: "error",
          message: t.message
        });
      }
  },
  deleteOfferFromItems(e) {
    if (!(!e || !e.items))
      try {
        const t = typeof e.items == "string" ? JSON.parse(e.items) : e.items;
        if (!Array.isArray(t)) return;
        const n = [...this.items, ...this.packed_items];
        t.forEach((a) => {
          n.forEach((r) => {
            if (!(!r || !r.posa_row_id) && r.posa_row_id == a) {
              const i = r.posa_offers ? JSON.parse(r.posa_offers) : [];
              if (!Array.isArray(i)) return;
              const o = i.filter((l) => l != e.row_id);
              e.offer === "Item Price" && (r.posa_offer_applied = 0), r.posa_offers = JSON.stringify(o);
            }
          });
        });
      } catch (t) {
        console.error("Error deleting offer from items:", t), this.eventBus.emit("show_message", {
          title: __("Error deleting offer from items"),
          color: "error",
          message: t.message
        });
      }
  },
  validate_due_date(e) {
    const t = frappe.datetime.now_date(), n = Date.parse(t), a = this.formatDateForBackend(e.posa_delivery_date), r = Date.parse(a);
    isNaN(r) || r < n ? setTimeout(() => {
      e.posa_delivery_date = this.formatDateForDisplay(t);
    }, 0) : e.posa_delivery_date = this.formatDateForDisplay(a);
  },
  load_print_page(e) {
    const t = this.pos_profile.print_format_for_online || this.pos_profile.print_format, n = this.pos_profile.letter_head || 0, a = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", r = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(a) + "&name=" + e + "&trigger_print=1&format=" + t + "&no_letterhead=" + n;
    if (this.pos_profile.posa_silent_print)
      Wv(r);
    else {
      const i = window.open(r, "Print");
      i.addEventListener(
        "load",
        function() {
          i.print();
        },
        { once: !0 }
      );
    }
  },
  formatDateForBackend(e) {
    if (!e) return null;
    if (typeof e == "string") {
      const n = Lt.fromArabicNumerals(e);
      if (/^\d{4}-\d{2}-\d{2}$/.test(n))
        return n;
      if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(n)) {
        const [a, r, i] = n.split("-");
        return `${i}-${r.padStart(2, "0")}-${a.padStart(2, "0")}`;
      }
      e = n;
    }
    const t = new Date(Lt.fromArabicNumerals(String(e)));
    if (!isNaN(t.getTime())) {
      const n = t.getFullYear(), a = `0${t.getMonth() + 1}`.slice(-2), r = `0${t.getDate()}`.slice(-2);
      return `${n}-${a}-${r}`;
    }
    return Lt.fromArabicNumerals(String(e));
  },
  formatDateForDisplay(e) {
    if (!e) return "";
    const t = Lt.fromArabicNumerals(String(e));
    if (typeof e == "string" && /^\d{4}-\d{2}-\d{2}$/.test(t)) {
      const [a, r, i] = t.split("-");
      return Lt.toArabicNumerals(`${i}-${r}-${a}`);
    }
    const n = new Date(t);
    if (!isNaN(n.getTime())) {
      const a = n.getFullYear(), r = `0${n.getMonth() + 1}`.slice(-2), i = `0${n.getDate()}`.slice(-2);
      return Lt.toArabicNumerals(`${i}-${r}-${a}`);
    }
    return Lt.toArabicNumerals(t);
  },
  toggleOffer(e) {
    this.$nextTick(() => {
      e.posa_is_offer || (e.posa_offers = JSON.stringify([]), e.posa_offer_applied = 0, e.discount_percentage = 0, e.discount_amount = 0, e.rate = e.price_list_rate, this.calc_item_price(e), this.handelOffers()), this.$forceUpdate();
    });
  }
  // Added missing comma here
}, Wne = {
  shortOpenFirstItem(e) {
    if (e.key.toLowerCase() === "a" && (e.ctrlKey || e.metaKey))
      try {
        if (e.preventDefault(), e.stopPropagation(), !this.items || this.items.length === 0) {
          console.log("No items to expand/collapse");
          return;
        }
        const t = this.items[0];
        console.log("Processing first item:", t.item_code), this.expanded.includes(t.posa_row_id) ? (console.log("Collapsing item:", t.item_code), this.expanded = []) : (console.log("Expanding item:", t.item_code), this.expanded = [t.posa_row_id], this.$nextTick(() => {
          this.update_item_detail(t);
        }));
      } catch (t) {
        console.error("Error in shortOpenFirstItem:", t), this.eventBus.emit("show_message", {
          title: __("Error toggling item details"),
          color: "error"
        });
      }
  },
  handleExpandedUpdate(e) {
    if (console.log("Expanded state updated:", e), this.expanded = e, e && e.length > 0) {
      const t = e[0], n = this.items.find((a) => a.posa_row_id === t);
      n && this.$nextTick(() => {
        this.update_item_detail(n);
      });
    }
  },
  // Keyboard shortcut: open payment dialog
  shortOpenPayment(e) {
    e.key === "s" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), this.show_payment());
  },
  // Keyboard shortcut: delete first item from the invoice
  shortDeleteFirstItem(e) {
    e.key === "d" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), this.remove_item(this.items[0]));
  },
  shortSelectDiscount(e) {
    console.log("Shortcut pressed:", e.key, e.ctrlKey), e.key.toLowerCase() === "e" && (e.ctrlKey || e.metaKey) && (console.log("Focusing discount field"), e.preventDefault(), e.stopPropagation(), this.$refs.discount ? (this.$refs.discount.focus(), console.log("Discount field focused")) : console.log("Discount field ref not found"));
  }
}, Kne = {
  name: "POSInvoice",
  mixins: [Bi],
  data() {
    return {
      // POS profile settings
      pos_profile: "",
      pos_opening_shift: "",
      stock_settings: "",
      invoice_doc: "",
      return_doc: "",
      customer: "",
      customer_info: "",
      customer_balance: 0,
      discount_amount: 0,
      additional_discount: 0,
      additional_discount_percentage: 0,
      total_tax: 0,
      items: [],
      // List of invoice items
      packed_items: [],
      // Packed items for bundles
      packed_dialog_items: [],
      // Packed items displayed in dialog
      show_packed_dialog: !1,
      // Packing list dialog visibility
      posOffers: [],
      // All available offers
      posa_offers: [],
      // Offers applied to this invoice
      posa_coupons: [],
      // Coupons applied
      isApplyingOffer: !1,
      // Flag to prevent offer watcher loops
      allItems: [],
      // All items for offer logic
      discount_percentage_offer_name: null,
      // Track which offer is applied
      invoiceTypes: ["Invoice", "Order"],
      // Types of invoices
      invoiceType: "Invoice",
      // Current invoice type
      itemsPerPage: 1e3,
      // Items per page in table
      expanded: [],
      // Array of expanded row IDs
      singleExpand: !0,
      // Only one row expanded at a time
      cancel_dialog: !1,
      // Cancel dialog visibility
      float_precision: 6,
      // Float precision for calculations
      currency_precision: 6,
      // Currency precision for display
      new_line: !1,
      // Add new line for item
      available_stock_cache: {},
      delivery_charges: [],
      // List of delivery charges
      delivery_charges_rate: 0,
      // Selected delivery charge rate
      selected_delivery_charge: "",
      // Selected delivery charge object
      invoice_posting_date: !1,
      // Posting date dialog
      posting_date: frappe.datetime.nowdate(),
      // Invoice posting date
      posting_date_display: "",
      // Display value for date picker
      items_headers: [],
      packedItemsHeaders: [
        { title: __("No."), key: "index" },
        { title: __("Parent Item"), key: "parent_item" },
        { title: __("Item Code"), key: "item_code" },
        { title: __("Description"), key: "item_name" },
        { title: __("Qty"), key: "qty" },
        { title: __("Rate"), key: "rate" },
        { title: __("Warehouse"), key: "warehouse" },
        { title: __("Batch"), key: "batch_no" },
        { title: __("Serial"), key: "serial_no" }
      ],
      selected_currency: "",
      // Currently selected currency
      exchange_rate: 1,
      // Current exchange rate
      conversion_rate: 1,
      // Currency to company rate
      exchange_rate_date: frappe.datetime.nowdate(),
      // Date of fetched exchange rate
      company: null,
      // Company doc with default currency
      available_currencies: [],
      // List of available currencies
      price_lists: [],
      // Available selling price lists
      selected_price_list: "",
      // Currently selected price list
      price_list_currency: "",
      // Currency of the selected price list
      selected_columns: [],
      // Selected columns for items table
      temp_selected_columns: [],
      // Temporary array for column selection
      available_columns: [],
      // All available columns
      show_column_selector: !1,
      // Column selector dialog visibility
      invoiceHeight: null,
      // Restaurant order fields
      restaurant_order_types: [],
      available_tables: [],
      selected_order_type: null,
      // Always start with null - no default selection
      selected_table: null,
      order_status: null,
      restaurant_add_items_context: null
      // Store context for updating existing orders
    };
  },
  components: {
    Customer: rB,
    RestaurantOrderType: Qee,
    DeliveryCharges: Zee,
    PostingDateRow: ote,
    MultiCurrencyRow: cte,
    InvoiceSummary: vte,
    CancelSaleDialog: mte,
    ItemsTable: Ane
  },
  computed: {
    ...qne,
    isDarkTheme() {
      return this.$theme.current === "dark";
    },
    isEditingExistingOrder() {
      return !!(this.pos_profile?.posa_enable_restaurant_mode && this.invoice_doc?.name && this.invoiceType === "Order");
    }
  },
  methods: {
    ...Wne,
    ...zne,
    ...$ne,
    initializeItemsHeaders() {
      this.available_columns = [
        { title: __("Item"), align: "start", sortable: !0, key: "item_name", required: !0, width: "50%" },
        { title: __("Qty"), key: "qty", align: "center", required: !0, width: "15%" },
        { title: __("Rate"), key: "rate", align: "end", required: !1, width: "15%" },
        { title: __("Total"), key: "amount", align: "end", required: !0, width: "15%" },
        { title: "", key: "actions", align: "start", required: !0, width: "3%", sortable: !1 },
        { title: __("UOM"), key: "uom", align: "start", required: !1 },
        { title: __("Discount %"), key: "discount_value", align: "start", required: !1 },
        { title: __("Discount Amount"), key: "discount_amount", align: "start", required: !1 },
        { title: __("Offer?"), key: "posa_is_offer", align: "center", required: !1 }
      ], (!this.selected_columns || this.selected_columns.length === 0) && (this.selected_columns = this.available_columns.filter((e) => !!e.required).map((e) => e.key)), this.updateHeadersFromSelection();
    },
    // Handle item dropped from ItemsSelector to ItemsTable
    handleItemDrop(e) {
      console.log("Item dropped:", e), this.add_item(e), this.eventBus.emit("show_message", {
        title: __("Item {0} added to invoice", [e.item_name]),
        color: "success"
      });
    },
    // Show visual feedback when item is being dragged over drop zone
    showDropFeedback(e) {
      const t = this.$el.querySelector(".modern-items-table");
      t && (e ? t.classList.add("drag-over") : t.classList.remove("drag-over"));
    },
    openPackedItems(e) {
      this.packed_dialog_items = this.packed_items.filter((t) => t.bundle_id === e), this.show_packed_dialog = !0;
    },
    toggleColumnSelection() {
      this.temp_selected_columns = [...this.selected_columns], this.show_column_selector = !0;
    },
    cancelColumnSelection() {
      this.show_column_selector = !1;
    },
    updateHeadersFromSelection() {
      this.items_headers = this.available_columns.filter(
        (e) => this.selected_columns.includes(e.key) || e.required
      );
    },
    updateSelectedColumns() {
      this.selected_columns = [...this.temp_selected_columns], this.available_columns.filter((t) => t.required).map((t) => t.key).forEach((t) => {
        this.selected_columns.includes(t) || this.selected_columns.push(t);
      }), this.updateHeadersFromSelection(), this.saveColumnPreferences(), this.show_column_selector = !1;
    },
    saveColumnPreferences() {
      try {
        localStorage.setItem("posawesome_selected_columns", JSON.stringify(this.selected_columns));
      } catch (e) {
        console.error("Failed to save column preferences:", e);
      }
    },
    loadColumnPreferences() {
      try {
        const e = localStorage.getItem("posawesome_selected_columns");
        e && (this.selected_columns = JSON.parse(e));
      } catch (e) {
        console.error("Failed to load column preferences:", e);
      }
    },
    saveInvoiceHeight() {
      if (this.$refs.invoiceCard) {
        this.invoiceHeight = this.$refs.invoiceCard.clientHeight + "px";
        try {
          localStorage.setItem("posawesome_invoice_height", this.invoiceHeight);
        } catch (e) {
          console.error("Failed to save invoice height:", e);
        }
      }
    },
    loadInvoiceHeight() {
      try {
        const e = localStorage.getItem("posawesome_invoice_height");
        e ? this.invoiceHeight = e : this.invoiceHeight = getComputedStyle(document.documentElement).getPropertyValue("--container-height") || "68vh";
      } catch (e) {
        console.error("Failed to load invoice height:", e), this.invoiceHeight = getComputedStyle(document.documentElement).getPropertyValue("--container-height") || "68vh";
      }
    },
    makeid(e) {
      let t = "";
      const n = "abcdefghijklmnopqrstuvwxyz0123456789", a = n.length;
      for (var r = 0; r < e; r++)
        t += n.charAt(Math.floor(Math.random() * a));
      return t;
    },
    handleExpandedUpdate(e) {
      this.expanded = Array.isArray(e) ? e.slice(-1) : [];
    },
    print_draft_invoice() {
      if (!this.pos_profile.posa_allow_print_draft_invoices) {
        this.eventBus.emit("show_message", {
          title: __("You are not allowed to print draft invoices"),
          color: "error"
        });
        return;
      }
      let e = this.invoice_doc.name;
      frappe.run_serially([
        () => {
          const t = this.save_and_clear_invoice();
          e = t.name ? t.name : e;
        },
        () => {
          this.load_print_page(e);
        }
      ]);
    },
    async set_delivery_charges() {
      var e = this;
      if (!this.pos_profile || !this.customer || !this.pos_profile.posa_use_delivery_charges) {
        this.delivery_charges = [], this.delivery_charges_rate = 0, this.selected_delivery_charge = "";
        return;
      }
      this.delivery_charges_rate = 0, this.selected_delivery_charge = "";
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.offers.get_applicable_delivery_charges",
          args: {
            company: this.pos_profile.company,
            pos_profile: this.pos_profile.name,
            customer: this.customer
          }
        });
        t.message && t.message.length && (console.log(t.message), e.delivery_charges = t.message);
      } catch (t) {
        console.error("Failed to fetch delivery charges", t);
      }
    },
    deliveryChargesFilter(e, t, n) {
      const a = n.raw;
      console.log("dl charges", a);
      const r = a.name.toLowerCase(), i = t.toLowerCase();
      return r.indexOf(i) > -1;
    },
    update_delivery_charges() {
      this.selected_delivery_charge ? this.delivery_charges_rate = this.selected_delivery_charge.rate : this.delivery_charges_rate = 0;
    },
    updatePostingDate(e) {
      e && (this.posting_date = e, this.$forceUpdate());
    },
    // Override setFormatedFloat for qty field to handle stock limits and return mode
    setFormatedQty(e, t, n, a, r) {
      let i = this.setFormatedFloat(e, t, n, a, r);
      return e.is_stock_item && e.max_qty !== void 0 && this.flt(e[t]) > this.flt(e.max_qty) && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty ? (e[t] = e.max_qty, i = e.max_qty, this.eventBus.emit("show_message", {
        title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
          this.formatFloat(e.max_qty)
        ]),
        color: "error"
      })) : this.eventBus.emit("show_message", {
        title: __("Stock is lower than requested. Proceeding may create negative stock."),
        color: "warning"
      })), this.isReturnInvoice && i > 0 && (i = -Math.abs(i), e[t] = i), this.calc_stock_qty(e, e[t]), t === "qty" && e.is_bundle && this.packed_items.filter((o) => o.bundle_id === e.bundle_id).forEach((o) => {
        o.qty = e.qty * (o.child_qty_per_bundle || 1), this.calc_stock_qty(o, o.qty);
      }), i;
    },
    async fetch_available_currencies() {
      try {
        console.log("Fetching available currencies...");
        const e = await frappe.call({
          method: "posawesome.posawesome.api.invoices.get_available_currencies"
        });
        if (e.message) {
          console.log("Received currencies:", e.message);
          const t = this.pos_profile.currency;
          return this.available_currencies = e.message.map((n) => ({
            value: n.name,
            title: n.name
          })), this.available_currencies.sort((n, a) => n.value === t ? -1 : a.value === t ? 1 : n.value.localeCompare(a.value)), this.selected_currency || (this.selected_currency = t), this.available_currencies;
        }
        return [];
      } catch (e) {
        console.error("Error fetching currencies:", e);
        const t = this.pos_profile.currency;
        return this.available_currencies = [
          {
            value: t,
            title: t
          }
        ], this.selected_currency = t, this.available_currencies;
      }
    },
    async fetch_price_lists() {
      if (this.pos_profile.posa_enable_price_list_dropdown)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.utilities.get_selling_price_lists"
          });
          e && e.message && (this.price_lists = e.message.map((t) => t.name));
        } catch (e) {
          console.error("Failed fetching price lists", e), this.price_lists = [this.pos_profile.selling_price_list];
        }
      else
        this.price_lists = [this.pos_profile.selling_price_list];
      this.selected_price_list || (this.selected_price_list = this.pos_profile.selling_price_list);
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.invoices.get_price_list_currency",
          args: { price_list: this.selected_price_list }
        });
        e && e.message && (this.price_list_currency = e.message);
      } catch (e) {
        console.error("Failed fetching price list currency", e);
      }
      return this.price_lists;
    },
    async update_currency(e) {
      e && (this.selected_currency = e, await this.update_currency_and_rate());
    },
    update_exchange_rate() {
      (!this.exchange_rate || this.exchange_rate <= 0) && (this.exchange_rate = 1), this.eventBus.emit("update_currency", {
        currency: this.selected_currency || this.pos_profile.currency,
        exchange_rate: this.exchange_rate
      }), this.update_item_rates();
    },
    update_conversion_rate() {
      (!this.conversion_rate || this.conversion_rate <= 0) && (this.conversion_rate = 1), this.sync_exchange_rate();
    },
    update_item_rates() {
      console.log("Updating item rates with exchange rate:", this.exchange_rate), this.items.forEach((e) => {
        if (e._skip_calc = !0, !e.base_rate) {
          console.log(`Setting base rates for ${e.item_code} for the first time`);
          const n = this.price_list_currency || this.pos_profile.currency;
          this.selected_currency === n ? (e.base_rate = e.rate, e.base_price_list_rate = e.price_list_rate, e.base_discount_amount = e.discount_amount || 0) : (e.base_rate = e.rate / this.exchange_rate, e.base_price_list_rate = e.price_list_rate / this.exchange_rate, e.base_discount_amount = (e.discount_amount || 0) / this.exchange_rate);
        }
        const t = this.price_list_currency || this.pos_profile.currency;
        if (this.selected_currency === t)
          console.log(`Restoring rates for ${e.item_code} from base rates`), e.price_list_rate = e.base_price_list_rate, e.rate = e.base_rate, e.discount_amount = e.base_discount_amount;
        else if (e.original_currency === this.selected_currency)
          console.log(`Using original currency rates for ${e.item_code}`), e.price_list_rate = e.base_price_list_rate, e.rate = e.base_rate, e.discount_amount = e.base_discount_amount;
        else {
          console.log(`Converting rates for ${e.item_code} to ${this.selected_currency}`);
          const n = this.flt(
            e.base_price_list_rate * this.exchange_rate,
            this.currency_precision
          ), a = this.flt(
            e.base_rate * this.exchange_rate,
            this.currency_precision
          ), r = this.flt(
            e.base_discount_amount * this.exchange_rate,
            this.currency_precision
          );
          e.price_list_rate = n < 1e-6 ? 0 : n, e.rate = a < 1e-6 ? 0 : a, e.discount_amount = r < 1e-6 ? 0 : r;
        }
        e.amount = this.flt(e.qty * e.rate, this.currency_precision), e.base_amount = this.flt(e.qty * e.base_rate, this.currency_precision), console.log(`Updated rates for ${e.item_code}:`, {
          price_list_rate: e.price_list_rate,
          base_price_list_rate: e.base_price_list_rate,
          rate: e.rate,
          base_rate: e.base_rate,
          discount: e.discount_amount,
          base_discount: e.base_discount_amount,
          amount: e.amount,
          base_amount: e.base_amount
        }), this.calc_item_price(e);
      }), this.$forceUpdate();
    },
    formatCurrency(e, t = null) {
      const n = t ?? this.currency_precision;
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, n);
    },
    flt(e, t = null) {
      t === null && (t = this.float_precision);
      const n = Number(e);
      return isNaN(n) ? 0 : Math.abs(n) < 1e-6 ? n : Number((n || 0).toFixed(t));
    },
    // Update currency and exchange rate when currency is changed
    async update_currency_and_rate() {
      if (!this.selected_currency) return;
      const e = this.company && this.company.default_currency || this.pos_profile.currency, t = this.price_list_currency || e;
      try {
        if (this.selected_currency === t)
          this.exchange_rate = 1;
        else {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.invoices.fetch_exchange_rate_pair",
            args: {
              from_currency: t,
              to_currency: this.selected_currency
            }
          });
          n && n.message && (this.exchange_rate = n.message.exchange_rate);
        }
        if (this.selected_currency === e)
          this.conversion_rate = 1, this.exchange_rate_date = this.formatDateForBackend(this.posting_date_display);
        else {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.invoices.fetch_exchange_rate_pair",
            args: {
              from_currency: this.selected_currency,
              to_currency: e
            }
          });
          if (n && n.message) {
            this.conversion_rate = n.message.exchange_rate, this.exchange_rate_date = n.message.date;
            const a = this.formatDateForBackend(this.posting_date_display);
            this.exchange_rate_date && a !== this.exchange_rate_date && this.eventBus.emit("show_message", {
              title: __(
                "Exchange rate date " + this.exchange_rate_date + " differs from posting date " + a
              ),
              color: "warning"
            });
          }
        }
      } catch (n) {
        console.error("Error updating currency:", n), this.eventBus.emit("show_message", {
          title: "Error updating currency",
          color: "error"
        });
      }
      if (this.sync_exchange_rate(), this.items.length) {
        const n = this.get_invoice_doc();
        n.currency = this.selected_currency, n.price_list_currency = t || this.pos_profile.currency, n.conversion_rate = this.conversion_rate, n.plc_conversion_rate = this.exchange_rate;
        try {
          await this.update_invoice(n);
        } catch (a) {
          console.error("Error updating invoice currency:", a), this.eventBus.emit("show_message", {
            title: "Error updating currency",
            color: "error"
          });
        }
      }
    },
    async update_exchange_rate_on_server() {
      if (this.conversion_rate) {
        if (!this.items.length) {
          this.sync_exchange_rate();
          return;
        }
        const e = this.get_invoice_doc();
        e.conversion_rate = this.conversion_rate, e.plc_conversion_rate = this.exchange_rate;
        try {
          const t = await this.update_invoice(e);
          if (t && t.exchange_rate_date) {
            this.exchange_rate_date = t.exchange_rate_date;
            const n = this.formatDateForBackend(this.posting_date_display);
            n !== this.exchange_rate_date && this.eventBus.emit("show_message", {
              title: __(
                "Exchange rate date " + this.exchange_rate_date + " differs from posting date " + n
              ),
              color: "warning"
            });
          }
          this.sync_exchange_rate();
        } catch (t) {
          console.error("Error updating exchange rate:", t), this.eventBus.emit("show_message", {
            title: "Error updating exchange rate",
            color: "error"
          });
        }
      }
    },
    sync_exchange_rate() {
      (!this.exchange_rate || this.exchange_rate <= 0) && (this.exchange_rate = 1), (!this.conversion_rate || this.conversion_rate <= 0) && (this.conversion_rate = 1), this.eventBus.emit("update_currency", {
        currency: this.selected_currency || this.pos_profile.currency,
        exchange_rate: this.exchange_rate,
        conversion_rate: this.conversion_rate
      }), this.update_item_rates();
    },
    // Add new rounding function
    roundAmount(e) {
      if (this.pos_profile.disable_rounded_total)
        return this.flt(e, this.currency_precision);
      const t = this.price_list_currency || this.pos_profile.currency;
      return this.pos_profile.posa_allow_multi_currency && this.selected_currency !== t ? this.flt(e, 2) : Math.round(e);
    },
    // Increase quantity of an item (handles return logic)
    add_one(e) {
      if (this.isReturnInvoice)
        e.qty--;
      else {
        const t = e.qty + 1;
        if (e.is_stock_item && (!this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty) && e.max_qty !== void 0 && t > e.max_qty) {
          e.qty = e.max_qty, this.calc_stock_qty(e, e.qty), this.eventBus.emit("show_message", {
            title: __("Maximum available quantity is {0}. Quantity adjusted to match stock.", [
              this.formatFloat(e.max_qty)
            ]),
            color: "error"
          });
          return;
        }
        e.qty = t;
      }
      e.qty == 0 && this.remove_item(e), this.calc_stock_qty(e, e.qty), e.is_bundle && this.packed_items.filter((t) => t.bundle_id === e.bundle_id).forEach((t) => {
        t.qty = e.qty * (t.child_qty_per_bundle || 1), this.calc_stock_qty(t, t.qty);
      }), this.$forceUpdate();
    },
    // Decrease quantity of an item (handles return logic)
    subtract_one(e) {
      this.isReturnInvoice ? e.qty++ : e.qty--, e.qty == 0 && this.remove_item(e), this.calc_stock_qty(e, e.qty), e.is_bundle && this.packed_items.filter((t) => t.bundle_id === e.bundle_id).forEach((t) => {
        t.qty = e.qty * (t.child_qty_per_bundle || 1), this.calc_stock_qty(t, t.qty);
      }), this.$forceUpdate();
    },
    // Handle item reordering from drag and drop
    handleItemReorder(e) {
      const { fromIndex: t, toIndex: n } = e;
      if (t === n) return;
      const a = [...this.items], [r] = a.splice(t, 1);
      a.splice(n, 0, r), this.items = a, this.eventBus.emit("show_message", {
        title: __("Item order updated"),
        color: "success"
      }), this.items.forEach((i, o) => {
        i.idx = o + 1;
      });
    },
    // Restaurant order methods
    async fetch_restaurant_order_types() {
      if (this.pos_profile.posa_enable_restaurant_mode)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_order_types"
          });
          e.message && (this.restaurant_order_types = e.message);
        } catch (e) {
          console.error("Failed to fetch restaurant order types", e);
        }
    },
    async fetch_available_tables() {
      if (this.pos_profile.posa_enable_restaurant_mode)
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_available_tables"
          });
          e.message && (this.available_tables = e.message);
        } catch (e) {
          console.error("Failed to fetch available tables", e);
        }
    },
    update_order_type() {
      (!this.selected_order_type || !this.selected_order_type.requires_table) && (this.selected_table = null), this.selected_order_type && this.selected_order_type.requires_table && this.fetch_available_tables();
    },
    update_table_selection() {
      console.log("Table selected:", this.selected_table);
    },
    show_restaurant_orders() {
      this.eventBus.emit("open_restaurant_orders");
    },
    handle_save_and_clear() {
      this.pos_profile.posa_enable_restaurant_mode ? this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT" ? (console.log("Direct order mode detected - proceeding to payment"), this.show_payment()) : this.restaurant_add_items_context && this.restaurant_add_items_context.is_updating_order ? (console.log("Routing to update_existing_order for order update"), this.update_existing_order()) : (console.log("Routing to create_new_restaurant_order for new restaurant order"), this.create_new_restaurant_order()) : (console.log("Routing to save_and_clear_invoice for regular POS"), this.save_and_clear_invoice());
    },
    async submit_restaurant_order() {
      if (console.log("=== SUBMIT RESTAURANT ORDER DEBUG ==="), console.log("restaurant_add_items_context:", this.restaurant_add_items_context), console.log("is_updating_order:", this.restaurant_add_items_context?.is_updating_order), console.log("original_order:", this.restaurant_add_items_context?.original_order), console.log("=========================================="), !!this.validate_restaurant_selection()) {
        if (!this.customer) {
          this.eventBus.emit("show_message", {
            title: __("Please select a customer"),
            color: "error"
          });
          return;
        }
        if (!this.items.length) {
          this.eventBus.emit("show_message", {
            title: __("Please add items to the order"),
            color: "error"
          });
          return;
        }
        try {
          this.restaurant_add_items_context && this.restaurant_add_items_context.is_updating_order ? (console.log("Taking update path..."), await this.update_existing_order()) : (console.log("Taking create new order path..."), await this.create_new_restaurant_order());
        } catch (e) {
          console.error("Error submitting restaurant order:", e), this.eventBus.emit("show_message", {
            title: __("Error submitting order"),
            color: "error"
          });
        }
      }
    },
    async create_new_restaurant_order() {
      const e = this.get_invoice_doc();
      if (e.name) {
        const t = this.update_invoice(e);
        t && t.name && (this.eventBus.emit("show_message", {
          title: __("Order {0} updated successfully as draft", [t.name]),
          color: "success"
        }), this.clear_invoice());
      } else {
        const t = this.create_restaurant_order(e);
        t && t.name && (this.eventBus.emit("show_message", {
          title: __("Draft order {0} created successfully", [t.name]),
          color: "success"
        }), this.clear_invoice());
      }
    },
    async update_existing_order() {
      const e = this.restaurant_add_items_context.original_order, t = this.items.map((i) => ({
        item_code: i.item_code,
        item_name: i.item_name,
        qty: i.qty,
        rate: i.rate,
        uom: i.uom,
        warehouse: i.warehouse,
        description: i.description,
        discount_percentage: i.discount_percentage || 0,
        discount_amount: i.discount_amount || 0
      }));
      console.log("Adding items to order:", e, "with items:", t);
      const n = this.restaurant_add_items_context.order_status === 0, a = n ? "posawesome.posawesome.api.restaurant_orders.add_items_to_draft_order" : "posawesome.posawesome.api.restaurant_orders.add_items_to_existing_order";
      if (console.log(`Using API method: ${a} for ${n ? "draft" : "submitted"} order`), (await frappe.call({
        method: a,
        args: {
          order_name: e,
          items_data: t
        }
      })).message) {
        this.eventBus.emit("show_message", {
          title: __("Added {0} new items to order {1} successfully", [t.length, e]),
          color: "success"
        });
        try {
          const { printKot: i } = await import("./kot_print-MHdNXsuH.js"), o = {
            order_name: e,
            table_number: this.restaurant_add_items_context.table_number,
            order_type: this.restaurant_add_items_context.order_type,
            items: t.map((l) => ({
              item_name: l.item_name,
              qty: l.qty,
              notes: l.notes || ""
            })),
            timestamp: frappe.datetime.now_datetime(),
            is_additional: !0
            // Flag to indicate this is additional items KOT
          };
          await i(o);
        } catch (i) {
          console.error("Error printing KOT for additional items:", i);
        }
        this.clear_invoice(), this.restaurant_add_items_context = null;
      }
    },
    get_restaurant_invoice_doc() {
      const e = this.get_invoice_doc();
      return this.selected_order_type && (e.restaurant_order_type = this.selected_order_type.name), this.selected_table && (e.table_number = this.selected_table.table_number), e;
    },
    validate_restaurant_selection() {
      return this.pos_profile.posa_enable_restaurant_mode ? !(this.pos_profile.posa_order_mode === "Direct Order" || this.pos_profile.posa_order_mode === "Direct Order + KOT") && !this.selected_order_type ? (this.eventBus.emit("show_message", {
        title: __("Please select an Order Type before proceeding"),
        color: "error"
      }), !1) : this.selected_order_type && this.selected_order_type.requires_table && !this.selected_table ? (this.eventBus.emit("show_message", {
        title: __("Please select a table for {0} orders", [this.selected_order_type.order_type_name]),
        color: "error"
      }), !1) : !0 : !0;
    },
    clear_restaurant_selection() {
      this.selected_order_type = null, this.selected_table = null, this.order_status = null, this.restaurant_add_items_context = null;
    },
    async set_restaurant_context(e) {
      try {
        if (console.log("=== SET RESTAURANT CONTEXT DEBUG ==="), console.log("Incoming context:", e), console.log("is_updating_order flag:", e.is_updating_order), console.log("====================================="), this.clear_invoice(), this.restaurant_add_items_context = e, console.log("Stored context after clear:", this.restaurant_add_items_context), e.customer && this.eventBus.emit("update_customer", e.customer), e.order_type) {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_order_types"
          });
          if (t.message) {
            const n = t.message.find((a) => a.order_type_name === e.order_type);
            n && (this.selected_order_type = n, console.log("Order type set:", n));
          }
        }
        if (e.table_number) {
          const t = await frappe.call({
            method: "posawesome.posawesome.doctype.restaurant_table.restaurant_table.get_all_tables"
          });
          if (t.message) {
            const n = t.message.find((a) => a.table_number === e.table_number);
            n ? (n.table_display = n.table_name ? `${n.table_number} - ${n.table_name}` : n.table_number, this.selected_table = n, console.log("Table set:", n)) : console.warn("Table not found:", e.table_number);
          }
        }
        setTimeout(() => {
          this.$forceUpdate();
        }, 100), console.log("Restaurant context set:", {
          order_type: this.selected_order_type?.order_type_name,
          table: this.selected_table?.table_number,
          customer: e.customer_name,
          is_updating_order: e.is_updating_order
        });
      } catch (t) {
        console.error("Error setting restaurant context:", t);
      }
    }
  },
  mounted() {
    this.loadColumnPreferences(), this.loadInvoiceHeight(), this.eventBus.on("item-drag-start", () => {
      this.showDropFeedback(!0);
    }), this.eventBus.on("item-drag-end", () => {
      this.showDropFeedback(!1);
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.company = e.company || null, this.customer = e.pos_profile.customer, this.pos_opening_shift = e.pos_opening_shift, this.stock_settings = e.stock_settings;
      const t = parseInt(e.pos_profile.posa_decimal_precision);
      isNaN(t) || (this.float_precision = t, this.currency_precision = t), this.pos_profile.posa_enable_restaurant_mode ? (this.invoiceType = "Order", this.invoiceTypes = ["Order"]) : this.invoiceType = this.pos_profile.posa_default_sales_order ? "Order" : "Invoice", this.initializeItemsHeaders(), this.pos_profile.posa_allow_multi_currency && this.fetch_available_currencies().then(async () => {
        this.selected_currency = this.pos_profile.currency, await this.update_currency_and_rate();
      }).catch((n) => {
        console.error("Error initializing currencies:", n), this.eventBus.emit("show_message", {
          title: __("Error loading currencies"),
          color: "error"
        });
      }), this.fetch_price_lists(), this.update_price_list(), this.pos_profile.posa_enable_restaurant_mode && (this.fetch_restaurant_order_types(), this.fetch_available_tables());
    }), this.eventBus.on("add_item", (e) => {
      this.add_item(e);
    }), this.eventBus.on("update_customer", (e) => {
      this.customer = e;
    }), this.eventBus.on("fetch_customer_details", () => {
      this.fetch_customer_details();
    }), this.eventBus.on("clear_invoice", () => {
      this.clear_invoice();
    }), this.eventBus.on("validate_restaurant_selection", () => {
      this.validate_restaurant_selection();
    }), this.eventBus.on("set_restaurant_context", (e) => {
      this.set_restaurant_context(e);
    }), this.eventBus.on("load_invoice", (e) => {
      this.load_invoice(e);
    }), this.eventBus.on("load_order", (e) => {
      this.new_order(e);
    }), this.eventBus.on("change_invoice_type", (e) => {
      console.log("Changing invoice type to:", e), this.invoiceType = e, e === "Invoice" ? this.invoiceTypes = ["Invoice"] : e === "Order" && (this.invoiceTypes = ["Order"]), this.$forceUpdate(), console.log("Invoice type changed and UI updated:", {
        invoiceType: this.invoiceType,
        invoiceTypes: this.invoiceTypes
      });
    }), this.eventBus.on("set_offers", (e) => {
      this.posOffers = e;
    }), this.eventBus.on("update_invoice_offers", (e) => {
      this.updateInvoiceOffers(e);
    }), this.eventBus.on("update_invoice_coupons", (e) => {
      this.posa_coupons = e, this.handelOffers();
    }), this.eventBus.on("set_all_items", (e) => {
      this.allItems = e, this.items.forEach((t) => {
        this.update_item_detail(t);
      });
    }), this.eventBus.on("load_return_invoice", (e) => {
      console.log("Invoice component received load_return_invoice event with data:", e), this.load_invoice(e.invoice_doc), this.invoiceType = "Return", this.invoiceTypes = ["Return"], this.invoice_doc.is_return = 1, this.items && this.items.length && this.items.forEach((t) => {
        t.qty > 0 && (t.qty = -Math.abs(t.qty)), t.stock_qty > 0 && (t.stock_qty = -Math.abs(t.stock_qty));
      }), e.return_doc ? (console.log("Return against existing invoice:", e.return_doc.name), this.discount_amount = e.return_doc.discount_amount || 0, this.additional_discount = e.return_doc.discount_amount || 0, this.return_doc = e.return_doc, this.invoice_doc.return_against = e.return_doc.name) : (console.log("Return without invoice reference"), this.discount_amount = 0, this.additional_discount = 0, this.additional_discount_percentage = 0), console.log("Invoice state after loading return:", {
        invoiceType: this.invoiceType,
        is_return: this.invoice_doc.is_return,
        items: this.items.length,
        customer: this.customer
      });
    }), this.eventBus.on("set_new_line", (e) => {
      this.new_line = e;
    }), this.pos_profile.posa_allow_multi_currency && this.fetch_available_currencies(), this.eventBus.on("reset_posting_date", () => {
      this.posting_date = frappe.datetime.nowdate();
    }), this.eventBus.on("calc_uom", this.calc_uom), this.eventBus.on("item-drag-start", () => {
      this.showDropFeedback(!0);
    }), this.eventBus.on("item-drag-end", () => {
      this.showDropFeedback(!1);
    });
  },
  // Cleanup event listeners before component is destroyed
  beforeUnmount() {
    this.eventBus.off("register_pos_profile"), this.eventBus.off("add_item"), this.eventBus.off("update_customer"), this.eventBus.off("fetch_customer_details"), this.eventBus.off("clear_invoice"), this.eventBus.off("reset_posting_date"), this.eventBus.off("change_invoice_type");
  },
  // Register global keyboard shortcuts when component is created
  created() {
    document.addEventListener("keydown", this.shortOpenPayment.bind(this)), document.addEventListener("keydown", this.shortDeleteFirstItem.bind(this)), document.addEventListener("keydown", this.shortOpenFirstItem.bind(this)), document.addEventListener("keydown", this.shortSelectDiscount.bind(this));
  },
  // Remove global keyboard shortcuts when component is unmounted
  unmounted() {
    document.removeEventListener("keydown", this.shortOpenPayment), document.removeEventListener("keydown", this.shortDeleteFirstItem), document.removeEventListener("keydown", this.shortOpenFirstItem), document.removeEventListener("keydown", this.shortSelectDiscount);
  },
  watch: Hne
}, jne = { class: "pa-0" }, Yne = { class: "dynamic-padding" }, Gne = { class: "items-table-wrapper" }, Qne = { class: "column-selector-container" }, Jne = { class: "text-caption mt-2" }, Xne = { class: "amount-value" };
function Zne(e, t, n, a, r, i) {
  const o = J("CancelSaleDialog"), l = J("v-alert"), s = J("Customer"), d = J("v-col"), u = J("v-select"), f = J("v-row"), h = J("RestaurantOrderType"), y = J("DeliveryCharges"), p = J("PostingDateRow"), w = J("MultiCurrencyRow"), b = J("v-btn"), v = J("v-spacer"), g = J("v-card-title"), k = J("v-divider"), A = J("v-switch"), C = J("v-card-text"), D = J("v-card-actions"), P = J("v-card"), O = J("v-dialog"), I = J("ItemsTable"), x = J("v-text-field"), M = J("v-data-table"), V = J("InvoiceSummary");
  return te(), Oe("div", jne, [
    _(o, {
      modelValue: r.cancel_dialog,
      "onUpdate:modelValue": t[0] || (t[0] = (B) => r.cancel_dialog = B),
      onConfirm: e.cancel_invoice
    }, null, 8, ["modelValue", "onConfirm"]),
    _(P, {
      ref: "invoiceCard",
      style: Je({
        height: r.invoiceHeight || "var(--container-height)",
        maxHeight: r.invoiceHeight || "var(--container-height)",
        backgroundColor: i.isDarkTheme ? "#121212" : "",
        resize: "vertical",
        overflow: "auto"
      }),
      class: Ae([
        "cards my-0 py-0 mt-3 resizable",
        i.isDarkTheme ? "" : "bg-grey-lighten-5",
        { "return-mode": e.isReturnInvoice },
        { "edit-mode": i.isEditingExistingOrder }
      ]),
      onMouseup: i.saveInvoiceHeight,
      onTouchend: i.saveInvoiceHeight
    }, {
      default: E(() => [
        T("div", Yne, [
          r.pos_profile.create_pos_invoice_instead_of_sales_invoice ? (te(), Le(l, {
            key: 0,
            type: "info",
            density: "compact",
            class: "mb-2"
          }, {
            default: E(() => [
              ae(j(e.__("Invoices saved as POS Invoices")), 1)
            ]),
            _: 1
          })) : ke("", !0),
          _(f, {
            align: "center",
            class: "items px-3 py-2"
          }, {
            default: E(() => [
              _(d, {
                cols: r.pos_profile.posa_allow_sales_order && !r.pos_profile.posa_enable_restaurant_mode ? 9 : 12,
                class: "pb-0 pr-0"
              }, {
                default: E(() => [
                  _(s)
                ]),
                _: 1
              }, 8, ["cols"]),
              r.pos_profile.posa_allow_sales_order && !r.pos_profile.posa_enable_restaurant_mode ? (te(), Le(d, {
                key: 0,
                cols: "3",
                class: "pb-4"
              }, {
                default: E(() => [
                  _(u, {
                    density: "compact",
                    "hide-details": "",
                    variant: "solo",
                    color: "primary",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    items: r.invoiceTypes,
                    label: e.frappe._("Type"),
                    modelValue: r.invoiceType,
                    "onUpdate:modelValue": t[1] || (t[1] = (B) => r.invoiceType = B),
                    disabled: r.invoiceType == "Return"
                  }, null, 8, ["bg-color", "items", "label", "modelValue", "disabled"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          }),
          _(h, {
            pos_profile: r.pos_profile,
            order_types: r.restaurant_order_types,
            available_tables: r.available_tables,
            selected_order_type: r.selected_order_type,
            selected_table: r.selected_table,
            order_status: r.order_status,
            readonly: e.readonly,
            "onUpdate:selected_order_type": t[2] || (t[2] = (B) => {
              r.selected_order_type = B, i.update_order_type();
            }),
            "onUpdate:selected_table": t[3] || (t[3] = (B) => {
              r.selected_table = B, i.update_table_selection();
            })
          }, null, 8, ["pos_profile", "order_types", "available_tables", "selected_order_type", "selected_table", "order_status", "readonly"]),
          _(y, {
            pos_profile: r.pos_profile,
            delivery_charges: r.delivery_charges,
            selected_delivery_charge: r.selected_delivery_charge,
            delivery_charges_rate: r.delivery_charges_rate,
            deliveryChargesFilter: i.deliveryChargesFilter,
            formatCurrency: i.formatCurrency,
            currencySymbol: e.currencySymbol,
            readonly: e.readonly,
            "onUpdate:selected_delivery_charge": t[4] || (t[4] = (B) => {
              r.selected_delivery_charge = B, i.update_delivery_charges();
            })
          }, null, 8, ["pos_profile", "delivery_charges", "selected_delivery_charge", "delivery_charges_rate", "deliveryChargesFilter", "formatCurrency", "currencySymbol", "readonly"]),
          _(p, {
            pos_profile: r.pos_profile,
            posting_date_display: r.posting_date_display,
            customer_balance: r.customer_balance,
            "price-list": r.selected_price_list,
            "price-lists": r.price_lists,
            formatCurrency: i.formatCurrency,
            "onUpdate:posting_date_display": t[5] || (t[5] = (B) => {
              r.posting_date_display = B;
            }),
            "onUpdate:priceList": t[6] || (t[6] = (B) => {
              r.selected_price_list = B;
            })
          }, null, 8, ["pos_profile", "posting_date_display", "customer_balance", "price-list", "price-lists", "formatCurrency"]),
          _(w, {
            pos_profile: r.pos_profile,
            selected_currency: r.selected_currency,
            plc_conversion_rate: r.exchange_rate,
            conversion_rate: r.conversion_rate,
            available_currencies: r.available_currencies,
            isNumber: e.isNumber,
            price_list_currency: r.price_list_currency,
            "onUpdate:selected_currency": t[7] || (t[7] = (B) => {
              r.selected_currency = B, i.update_currency(B);
            }),
            "onUpdate:plc_conversion_rate": t[8] || (t[8] = (B) => {
              r.exchange_rate = B, i.update_exchange_rate();
            }),
            "onUpdate:conversion_rate": t[9] || (t[9] = (B) => {
              r.conversion_rate = B, i.update_conversion_rate();
            })
          }, null, 8, ["pos_profile", "selected_currency", "plc_conversion_rate", "conversion_rate", "available_currencies", "isNumber", "price_list_currency"]),
          T("div", Gne, [
            T("div", Qne, [
              _(b, {
                density: "compact",
                variant: "text",
                color: "primary",
                "prepend-icon": "mdi-cog-outline",
                onClick: i.toggleColumnSelection,
                class: "column-selector-btn"
              }, {
                default: E(() => [
                  ae(j(e.__("Columns")), 1)
                ]),
                _: 1
              }, 8, ["onClick"]),
              _(O, {
                modelValue: r.show_column_selector,
                "onUpdate:modelValue": t[12] || (t[12] = (B) => r.show_column_selector = B),
                "max-width": "500px"
              }, {
                default: E(() => [
                  _(P, null, {
                    default: E(() => [
                      _(g, { class: "text-h6 pa-4 d-flex align-center" }, {
                        default: E(() => [
                          T("span", null, j(e.__("Select Columns to Display")), 1),
                          _(v),
                          _(b, {
                            icon: "mdi-close",
                            variant: "text",
                            density: "compact",
                            onClick: t[10] || (t[10] = (B) => r.show_column_selector = !1)
                          })
                        ]),
                        _: 1
                      }),
                      _(k),
                      _(C, { class: "pa-4" }, {
                        default: E(() => [
                          _(f, { dense: "" }, {
                            default: E(() => [
                              (te(!0), Oe(Ge, null, ln(r.available_columns.filter((B) => !B.required), (B) => (te(), Le(d, {
                                cols: "12",
                                key: B.key
                              }, {
                                default: E(() => [
                                  _(A, {
                                    modelValue: r.temp_selected_columns,
                                    "onUpdate:modelValue": t[11] || (t[11] = (F) => r.temp_selected_columns = F),
                                    label: B.title,
                                    value: B.key,
                                    "hide-details": "",
                                    density: "compact",
                                    color: "primary",
                                    class: "column-switch mb-1",
                                    disabled: B.required
                                  }, null, 8, ["modelValue", "label", "value", "disabled"])
                                ]),
                                _: 2
                              }, 1024))), 128))
                            ]),
                            _: 1
                          }),
                          T("div", Jne, j(e.__("Required columns cannot be hidden")), 1)
                        ]),
                        _: 1
                      }),
                      _(D, { class: "pa-4 pt-0" }, {
                        default: E(() => [
                          _(b, {
                            color: "error",
                            variant: "text",
                            onClick: i.cancelColumnSelection
                          }, {
                            default: E(() => [
                              ae(j(e.__("Cancel")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"]),
                          _(v),
                          _(b, {
                            color: "primary",
                            variant: "tonal",
                            onClick: i.updateSelectedColumns
                          }, {
                            default: E(() => [
                              ae(j(e.__("Apply")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }, 8, ["modelValue"])
            ]),
            _(I, {
              ref: "itemsTable",
              headers: r.items_headers,
              items: r.items,
              expanded: r.expanded,
              "onUpdate:expanded": [
                t[13] || (t[13] = (B) => r.expanded = B),
                i.handleExpandedUpdate
              ],
              itemsPerPage: r.itemsPerPage,
              itemSearch: e.itemSearch,
              pos_profile: r.pos_profile,
              invoice_doc: r.invoice_doc,
              invoiceType: r.invoiceType,
              stock_settings: r.stock_settings,
              displayCurrency: e.displayCurrency,
              formatFloat: e.formatFloat,
              formatCurrency: i.formatCurrency,
              currencySymbol: e.currencySymbol,
              isNumber: e.isNumber,
              setFormatedQty: i.setFormatedQty,
              setFormatedCurrency: e.setFormatedCurrency,
              calcPrices: e.calc_prices,
              calcUom: e.calc_uom,
              setSerialNo: e.set_serial_no,
              setBatchQty: e.set_batch_qty,
              validateDueDate: e.validate_due_date,
              removeItem: e.remove_item,
              subtractOne: i.subtract_one,
              addOne: i.add_one,
              toggleOffer: e.toggleOffer,
              changePriceListRate: e.change_price_list_rate,
              isNegative: e.isNegative,
              onReorderItems: i.handleItemReorder,
              onAddItemFromDrag: i.handleItemDrop,
              onShowDropFeedback: i.showDropFeedback,
              onItemDropped: t[14] || (t[14] = (B) => i.showDropFeedback(!1)),
              onViewPacked: i.openPackedItems
            }, null, 8, ["headers", "items", "expanded", "itemsPerPage", "itemSearch", "pos_profile", "invoice_doc", "invoiceType", "stock_settings", "displayCurrency", "formatFloat", "formatCurrency", "currencySymbol", "isNumber", "setFormatedQty", "setFormatedCurrency", "calcPrices", "calcUom", "setSerialNo", "setBatchQty", "validateDueDate", "removeItem", "subtractOne", "addOne", "toggleOffer", "changePriceListRate", "isNegative", "onUpdate:expanded", "onReorderItems", "onAddItemFromDrag", "onShowDropFeedback", "onViewPacked"]),
            _(O, {
              modelValue: r.show_packed_dialog,
              "onUpdate:modelValue": t[16] || (t[16] = (B) => r.show_packed_dialog = B),
              "max-width": "800px"
            }, {
              default: E(() => [
                _(P, null, {
                  default: E(() => [
                    _(g, { class: "d-flex align-center" }, {
                      default: E(() => [
                        T("span", null, j(e.__("Packing List")) + " (" + j(r.packed_dialog_items.length) + ")", 1),
                        _(v),
                        _(b, {
                          icon: "mdi-close",
                          variant: "text",
                          density: "compact",
                          onClick: t[15] || (t[15] = (B) => r.show_packed_dialog = !1)
                        })
                      ]),
                      _: 1
                    }),
                    _(k),
                    _(C, null, {
                      default: E(() => [
                        _(l, {
                          type: "warning",
                          density: "compact",
                          class: "mb-2"
                        }, {
                          default: E(() => [
                            ae(j(e.__(
                              "For 'Product Bundle' items, Warehouse, Serial No and Batch No will be considered from the 'Packing List' table. If Warehouse and Batch No are same for all packing items for any 'Product Bundle' item, those values can be entered in the main Item table; values will be copied to 'Packing List' table."
                            )), 1)
                          ]),
                          _: 1
                        }),
                        _(M, {
                          headers: r.packedItemsHeaders,
                          items: r.packed_dialog_items,
                          class: "elevation-1",
                          "hide-default-footer": "",
                          density: "compact"
                        }, {
                          "item.index": E(({ index: B }) => [
                            ae(j(B + 1), 1)
                          ]),
                          "item.qty": E(({ item: B }) => [
                            ae(j(e.formatFloat(B.qty)), 1)
                          ]),
                          "item.rate": E(({ item: B }) => [
                            T("span", Xne, j(e.formatFloat(B.rate)), 1)
                          ]),
                          "item.warehouse": E(({ item: B }) => [
                            _(x, {
                              modelValue: B.warehouse,
                              "onUpdate:modelValue": (F) => B.warehouse = F,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          "item.batch_no": E(({ item: B }) => [
                            _(x, {
                              modelValue: B.batch_no,
                              "onUpdate:modelValue": (F) => B.batch_no = F,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          "item.serial_no": E(({ item: B }) => [
                            _(x, {
                              modelValue: B.serial_no,
                              "onUpdate:modelValue": (F) => B.serial_no = F,
                              "hide-details": "",
                              density: "compact"
                            }, null, 8, ["modelValue", "onUpdate:modelValue"])
                          ]),
                          _: 1
                        }, 8, ["headers", "items"])
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }, 8, ["modelValue"])
          ])
        ])
      ]),
      _: 1
    }, 8, ["style", "class", "onMouseup", "onTouchend"]),
    _(V, {
      pos_profile: r.pos_profile,
      invoice_doc: r.invoice_doc,
      total_qty: e.total_qty,
      additional_discount: r.additional_discount,
      additional_discount_percentage: r.additional_discount_percentage,
      total_items_discount_amount: e.total_items_discount_amount,
      subtotal: e.subtotal,
      displayCurrency: e.displayCurrency,
      formatFloat: e.formatFloat,
      formatCurrency: i.formatCurrency,
      currencySymbol: e.currencySymbol,
      discount_percentage_offer_name: r.discount_percentage_offer_name,
      isNumber: e.isNumber,
      restaurant_add_items_context: r.restaurant_add_items_context,
      "onUpdate:additional_discount": t[17] || (t[17] = (B) => r.additional_discount = B),
      "onUpdate:additional_discount_percentage": t[18] || (t[18] = (B) => r.additional_discount_percentage = B),
      onUpdate_discount_umount: e.update_discount_umount,
      onSaveAndClear: i.handle_save_and_clear,
      onLoadDrafts: e.get_draft_invoices,
      onSelectOrder: e.get_draft_orders,
      onShowOrders: i.show_restaurant_orders,
      onSubmitOrder: i.submit_restaurant_order,
      onCancelSale: t[19] || (t[19] = (B) => r.cancel_dialog = !0),
      onOpenReturns: e.open_returns,
      onPrintDraft: i.print_draft_invoice,
      onShowPayment: e.show_payment
    }, null, 8, ["pos_profile", "invoice_doc", "total_qty", "additional_discount", "additional_discount_percentage", "total_items_discount_amount", "subtotal", "displayCurrency", "formatFloat", "formatCurrency", "currencySymbol", "discount_percentage_offer_name", "isNumber", "restaurant_add_items_context", "onUpdate_discount_umount", "onSaveAndClear", "onLoadDrafts", "onSelectOrder", "onShowOrders", "onSubmitOrder", "onOpenReturns", "onPrintDraft", "onShowPayment"])
  ]);
}
const eae = /* @__PURE__ */ on(Kne, [["render", Zne], ["__scopeId", "data-v-fd3f0d9a"]]), tae = {
  mixins: [Bi],
  props: ["dialog"],
  data() {
    return {
      isOpen: this.dialog ? this.dialog : !1,
      dialog_data: {},
      is_loading: !1,
      companies: [],
      company: "",
      pos_profiles_data: [],
      pos_profiles: [],
      pos_profile: "",
      payments_method_data: [],
      payments_methods: [],
      payments_methods_headers: [
        {
          title: __("Mode of Payment"),
          align: "start",
          sortable: !1,
          value: "mode_of_payment"
        },
        {
          title: __("Opening Amount"),
          value: "amount",
          align: "center",
          sortable: !1
        }
      ],
      itemsPerPage: 100,
      max25chars: (e) => e.length <= 12 || "Input too long!",
      pagination: {},
      snack: !1,
      snackColor: "",
      snackText: ""
    };
  },
  watch: {
    company(e) {
      this.pos_profiles = [], this.pos_profiles_data.forEach((t) => {
        t.company === e && this.pos_profiles.push(t.name), this.pos_profiles.length ? this.pos_profile = this.pos_profiles[0] : this.pos_profile = "";
      });
    },
    pos_profile(e) {
      this.payments_methods = [], this.payments_method_data.forEach((t) => {
        t.parent === e && this.payments_methods.push({
          mode_of_payment: t.mode_of_payment,
          amount: 0,
          currency: t.currency
        });
      });
    }
  },
  methods: {
    close_opening_dialog() {
      this.eventBus.emit("close_opening_dialog");
    },
    async get_opening_dialog_data() {
      const e = this;
      await fm, await ia();
      const t = CQ();
      if (t)
        try {
          e.companies = t.companies.map((n) => n.name), e.pos_profiles_data = t.pos_profiles_data || [], e.payments_method_data = t.payments_method || [], e.company = e.companies[0] || "";
        } catch (n) {
          console.error("Failed to parse opening dialog cache", n);
        }
      frappe.call({
        method: "posawesome.posawesome.api.shifts.get_opening_dialog_data",
        args: {},
        callback: function(n) {
          if (n.message) {
            e.companies = n.message.companies.map((a) => a.name), e.pos_profiles_data = n.message.pos_profiles_data, e.payments_method_data = n.message.payments_method, e.company = e.companies[0] || "";
            try {
              AQ(n.message);
            } catch (a) {
              console.error("Failed to cache opening dialog data", a);
            }
          }
        }
      });
    },
    submit_dialog() {
      if (!this.payments_methods.length || !this.company || !this.pos_profile)
        return;
      this.is_loading = !0;
      const e = this;
      return frappe.call("posawesome.posawesome.api.shifts.create_opening_voucher", {
        pos_profile: this.pos_profile,
        company: this.company,
        balance_details: this.payments_methods
      }).then((t) => {
        if (t.message) {
          e.eventBus.emit("register_pos_data", t.message), e.eventBus.emit("set_company", t.message.company);
          try {
            _1(t.message);
          } catch (n) {
            console.error("Failed to cache opening data", n);
          }
          e.close_opening_dialog(), e.is_loading = !1;
        }
      });
    },
    go_desk() {
      frappe.set_route("/"), location.reload();
    }
  },
  mounted() {
    this.get_opening_dialog_data();
  },
  beforeUnmount() {
  }
}, nae = { class: "header-content" }, aae = { class: "header-icon-wrapper" }, rae = { class: "header-text" }, iae = { class: "header-title" }, oae = { class: "header-subtitle" }, sae = { class: "section-header-compact" }, lae = { class: "section-title-compact" };
function cae(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-card-title"), s = J("v-autocomplete"), d = J("v-col"), u = J("v-text-field"), f = J("v-data-table"), h = J("v-row"), y = J("v-container"), p = J("v-card-text"), w = J("v-btn"), b = J("v-spacer"), v = J("v-card-actions"), g = J("v-card"), k = J("v-dialog");
  return te(), Le(h, { justify: "center" }, {
    default: E(() => [
      _(k, {
        modelValue: r.isOpen,
        "onUpdate:modelValue": t[2] || (t[2] = (A) => r.isOpen = A),
        persistent: "",
        "max-width": "800px",
        "max-height": "90vh"
      }, {
        default: E(() => [
          _(g, {
            elevation: "8",
            class: "opening-dialog-card"
          }, {
            default: E(() => [
              _(l, { class: "opening-dialog-header" }, {
                default: E(() => [
                  T("div", nae, [
                    T("div", aae, [
                      _(o, { class: "header-icon" }, {
                        default: E(() => t[3] || (t[3] = [
                          ae("mdi-cash-plus", -1)
                        ])),
                        _: 1,
                        __: [3]
                      })
                    ]),
                    T("div", rae, [
                      T("h5", iae, j(e.__("Create POS Opening Shift")), 1),
                      T("p", oae, j(e.__("Initialize your shift with opening balances")), 1)
                    ])
                  ])
                ]),
                _: 1
              }),
              _(p, { class: "opening-dialog-content" }, {
                default: E(() => [
                  _(y, { class: "pa-0" }, {
                    default: E(() => [
                      _(h, null, {
                        default: E(() => [
                          _(d, {
                            cols: "12",
                            md: "6",
                            class: "form-field"
                          }, {
                            default: E(() => [
                              _(s, {
                                items: r.companies,
                                label: e.frappe._("Company"),
                                modelValue: r.company,
                                "onUpdate:modelValue": t[0] || (t[0] = (A) => r.company = A),
                                required: "",
                                variant: "outlined",
                                color: "primary",
                                density: "compact",
                                "prepend-inner-icon": "mdi-domain",
                                class: Ae(["enhanced-field", { "field-focused": r.company }])
                              }, null, 8, ["items", "label", "modelValue", "class"])
                            ]),
                            _: 1
                          }),
                          _(d, {
                            cols: "12",
                            md: "6",
                            class: "form-field"
                          }, {
                            default: E(() => [
                              _(s, {
                                items: r.pos_profiles,
                                label: e.frappe._("POS Profile"),
                                modelValue: r.pos_profile,
                                "onUpdate:modelValue": t[1] || (t[1] = (A) => r.pos_profile = A),
                                required: "",
                                variant: "outlined",
                                color: "primary",
                                density: "compact",
                                "prepend-inner-icon": "mdi-point-of-sale",
                                class: Ae(["enhanced-field", { "field-focused": r.pos_profile }])
                              }, null, 8, ["items", "label", "modelValue", "class"])
                            ]),
                            _: 1
                          }),
                          _(d, { cols: "12" }, {
                            default: E(() => [
                              T("div", sae, [
                                T("h6", lae, [
                                  _(o, { class: "section-icon" }, {
                                    default: E(() => t[4] || (t[4] = [
                                      ae("mdi-credit-card-multiple", -1)
                                    ])),
                                    _: 1,
                                    __: [4]
                                  }),
                                  ae(" " + j(e.__("Payment Methods")), 1)
                                ])
                              ]),
                              _(f, {
                                headers: r.payments_methods_headers,
                                items: r.payments_methods,
                                "item-key": "mode_of_payment",
                                class: "enhanced-table-compact",
                                "items-per-page": r.itemsPerPage,
                                "hide-default-footer": "",
                                density: "compact",
                                height: "300px",
                                "fixed-header": ""
                              }, {
                                "item.amount": E(({ item: A }) => [
                                  _(u, {
                                    modelValue: A.amount,
                                    "onUpdate:modelValue": (C) => A.amount = C,
                                    rules: [r.max25chars],
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "hide-details": "",
                                    prefix: e.currencySymbol(A.currency),
                                    class: "amount-input"
                                  }, null, 8, ["modelValue", "onUpdate:modelValue", "rules", "prefix"])
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "items-per-page"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(v, { class: "dialog-actions-container" }, {
                default: E(() => [
                  _(w, {
                    theme: "dark",
                    onClick: i.go_desk,
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: E(() => [
                      _(o, { start: "" }, {
                        default: E(() => t[5] || (t[5] = [
                          ae("mdi-close-circle-outline", -1)
                        ])),
                        _: 1,
                        __: [5]
                      }),
                      T("span", null, j(e.__("Cancel")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(b),
                  _(w, {
                    theme: "dark",
                    disabled: r.is_loading,
                    loading: r.is_loading,
                    onClick: i.submit_dialog,
                    class: "pos-action-btn submit-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: E(() => [
                      _(o, { start: "" }, {
                        default: E(() => t[6] || (t[6] = [
                          ae("mdi-check-circle-outline", -1)
                        ])),
                        _: 1,
                        __: [6]
                      }),
                      T("span", null, j(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["disabled", "loading", "onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const uae = /* @__PURE__ */ on(tae, [["render", cae], ["__scopeId", "data-v-b71142d6"]]);
var d_ = { exports: {} }, dae = d_.exports, ex;
function fae() {
  return ex || (ex = 1, (function(e, t) {
    var n = { env: {} };
    /*! Browser bundle of nunjucks 3.2.4  */
    (function(r, i) {
      e.exports = i();
    })(typeof self < "u" ? self : dae, function() {
      return (
        /******/
        (function(a) {
          var r = {};
          function i(o) {
            if (r[o])
              return r[o].exports;
            var l = r[o] = {
              /******/
              i: o,
              /******/
              l: !1,
              /******/
              exports: {}
              /******/
            };
            return a[o].call(l.exports, l, l.exports, i), l.l = !0, l.exports;
          }
          return i.m = a, i.c = r, i.d = function(o, l, s) {
            i.o(o, l) || Object.defineProperty(o, l, {
              /******/
              configurable: !1,
              /******/
              enumerable: !0,
              /******/
              get: s
              /******/
            });
          }, i.n = function(o) {
            var l = o && o.__esModule ? (
              /******/
              (function() {
                return o.default;
              })
            ) : (
              /******/
              (function() {
                return o;
              })
            );
            return i.d(l, "a", l), l;
          }, i.o = function(o, l) {
            return Object.prototype.hasOwnProperty.call(o, l);
          }, i.p = "", i(i.s = 11);
        })([
          /* 0 */
          /***/
          (function(a, u, i) {
            var o = Array.prototype, l = Object.prototype, s = {
              "&": "&amp;",
              '"': "&quot;",
              "'": "&#39;",
              "<": "&lt;",
              ">": "&gt;",
              "\\": "&#92;"
            }, d = /[&"'<>\\]/g, u = a.exports = {};
            function f(U, q) {
              return l.hasOwnProperty.call(U, q);
            }
            u.hasOwnProp = f;
            function h(U) {
              return s[U];
            }
            function y(U, q, oe) {
              if (oe.Update || (oe = new u.TemplateError(oe)), oe.Update(U), !q) {
                var ee = oe;
                oe = new Error(ee.message), oe.name = ee.name;
              }
              return oe;
            }
            u._prettifyError = y;
            function p(U, q, oe) {
              var ee, he;
              U instanceof Error && (he = U, U = he.name + ": " + he.message), Object.setPrototypeOf ? (ee = new Error(U), Object.setPrototypeOf(ee, p.prototype)) : (ee = this, Object.defineProperty(ee, "message", {
                enumerable: !1,
                writable: !0,
                value: U
              })), Object.defineProperty(ee, "name", {
                value: "Template render error"
              }), Error.captureStackTrace && Error.captureStackTrace(ee, this.constructor);
              var ve;
              if (he) {
                var pe = Object.getOwnPropertyDescriptor(he, "stack");
                ve = pe && (pe.get || function() {
                  return pe.value;
                }), ve || (ve = function() {
                  return he.stack;
                });
              } else {
                var z = new Error(U).stack;
                ve = function() {
                  return z;
                };
              }
              return Object.defineProperty(ee, "stack", {
                get: function() {
                  return ve.call(ee);
                }
              }), Object.defineProperty(ee, "cause", {
                value: he
              }), ee.lineno = q, ee.colno = oe, ee.firstUpdate = !0, ee.Update = function(Ve) {
                var Ne = "(" + (Ve || "unknown path") + ")";
                return this.firstUpdate && (this.lineno && this.colno ? Ne += " [Line " + this.lineno + ", Column " + this.colno + "]" : this.lineno && (Ne += " [Line " + this.lineno + "]")), Ne += `
 `, this.firstUpdate && (Ne += " "), this.message = Ne + (this.message || ""), this.firstUpdate = !1, this;
              }, ee;
            }
            Object.setPrototypeOf ? Object.setPrototypeOf(p.prototype, Error.prototype) : p.prototype = Object.create(Error.prototype, {
              constructor: {
                value: p
              }
            }), u.TemplateError = p;
            function w(U) {
              return U.replace(d, h);
            }
            u.escape = w;
            function b(U) {
              return l.toString.call(U) === "[object Function]";
            }
            u.isFunction = b;
            function v(U) {
              return l.toString.call(U) === "[object Array]";
            }
            u.isArray = v;
            function g(U) {
              return l.toString.call(U) === "[object String]";
            }
            u.isString = g;
            function k(U) {
              return l.toString.call(U) === "[object Object]";
            }
            u.isObject = k;
            function A(U) {
              return U ? typeof U == "string" ? U.split(".") : [U] : [];
            }
            function C(U) {
              var q = A(U);
              return function(ee) {
                for (var he = ee, ve = 0; ve < q.length; ve++) {
                  var pe = q[ve];
                  if (f(he, pe))
                    he = he[pe];
                  else
                    return;
                }
                return he;
              };
            }
            u.getAttrGetter = C;
            function D(U, q, oe) {
              for (var ee = {}, he = b(q) ? q : C(q), ve = 0; ve < U.length; ve++) {
                var pe = U[ve], z = he(pe, ve);
                if (z === void 0 && oe === !0)
                  throw new TypeError('groupby: attribute "' + q + '" resolved to undefined');
                (ee[z] || (ee[z] = [])).push(pe);
              }
              return ee;
            }
            u.groupBy = D;
            function P(U) {
              return Array.prototype.slice.call(U);
            }
            u.toArray = P;
            function O(U) {
              var q = [];
              if (!U)
                return q;
              for (var oe = U.length, ee = P(arguments).slice(1), he = -1; ++he < oe; )
                F(ee, U[he]) === -1 && q.push(U[he]);
              return q;
            }
            u.without = O;
            function I(U, q) {
              for (var oe = "", ee = 0; ee < q; ee++)
                oe += U;
              return oe;
            }
            u.repeat = I;
            function x(U, q, oe) {
              if (U != null) {
                if (o.forEach && U.forEach === o.forEach)
                  U.forEach(q, oe);
                else if (U.length === +U.length)
                  for (var ee = 0, he = U.length; ee < he; ee++)
                    q.call(oe, U[ee], ee, U);
              }
            }
            u.each = x;
            function M(U, q) {
              var oe = [];
              if (U == null)
                return oe;
              if (o.map && U.map === o.map)
                return U.map(q);
              for (var ee = 0; ee < U.length; ee++)
                oe[oe.length] = q(U[ee], ee);
              return U.length === +U.length && (oe.length = U.length), oe;
            }
            u.map = M;
            function V(U, q, oe) {
              var ee = -1;
              function he() {
                ee++, ee < U.length ? q(U[ee], ee, he, oe) : oe();
              }
              he();
            }
            u.asyncIter = V;
            function B(U, q, oe) {
              var ee = H(U || {}), he = ee.length, ve = -1;
              function pe() {
                ve++;
                var z = ee[ve];
                ve < he ? q(z, U[z], ve, he, pe) : oe();
              }
              pe();
            }
            u.asyncFor = B;
            function F(U, q, oe) {
              return Array.prototype.indexOf.call(U || [], q, oe);
            }
            u.indexOf = F;
            function H(U) {
              var q = [];
              for (var oe in U)
                f(U, oe) && q.push(oe);
              return q;
            }
            u.keys = H;
            function K(U) {
              return H(U).map(function(q) {
                return [q, U[q]];
              });
            }
            u._entries = K;
            function Z(U) {
              return H(U).map(function(q) {
                return U[q];
              });
            }
            u._values = Z;
            function ue(U, q) {
              return U = U || {}, H(q).forEach(function(oe) {
                U[oe] = q[oe];
              }), U;
            }
            u._assign = u.extend = ue;
            function Y(U, q) {
              if (v(q) || g(q))
                return q.indexOf(U) !== -1;
              if (k(q))
                return U in q;
              throw new Error('Cannot use "in" operator to search for "' + U + '" in unexpected types.');
            }
            u.inOperator = Y;
          }),
          /* 1 */
          /***/
          (function(a, r, i) {
            function o(g, k) {
              for (var A = 0; A < k.length; A++) {
                var C = k[A];
                C.enumerable = C.enumerable || !1, C.configurable = !0, "value" in C && (C.writable = !0), Object.defineProperty(g, s(C.key), C);
              }
            }
            function l(g, k, A) {
              return k && o(g.prototype, k), Object.defineProperty(g, "prototype", { writable: !1 }), g;
            }
            function s(g) {
              var k = d(g, "string");
              return typeof k == "symbol" ? k : String(k);
            }
            function d(g, k) {
              if (typeof g != "object" || g === null) return g;
              var A = g[Symbol.toPrimitive];
              if (A !== void 0) {
                var C = A.call(g, k);
                if (typeof C != "object") return C;
                throw new TypeError("@@toPrimitive must return a primitive value.");
              }
              return String(g);
            }
            function u(g, k) {
              g.prototype = Object.create(k.prototype), g.prototype.constructor = g, f(g, k);
            }
            function f(g, k) {
              return f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(C, D) {
                return C.__proto__ = D, C;
              }, f(g, k);
            }
            var h = i(16), y = i(0);
            function p(g, k) {
              return typeof g != "function" || typeof k != "function" ? k : function() {
                var C = this.parent;
                this.parent = g;
                var D = k.apply(this, arguments);
                return this.parent = C, D;
              };
            }
            function w(g, k, A) {
              A = A || {}, y.keys(A).forEach(function(D) {
                A[D] = p(g.prototype[D], A[D]);
              });
              var C = /* @__PURE__ */ (function(D) {
                u(P, D);
                function P() {
                  return D.apply(this, arguments) || this;
                }
                return l(P, [{
                  key: "typename",
                  get: function() {
                    return k;
                  }
                }]), P;
              })(g);
              return y._assign(C.prototype, A), C;
            }
            var b = /* @__PURE__ */ (function() {
              function g() {
                this.init.apply(this, arguments);
              }
              var k = g.prototype;
              return k.init = function() {
              }, g.extend = function(C, D) {
                return typeof C == "object" && (D = C, C = "anonymous"), w(this, C, D);
              }, l(g, [{
                key: "typename",
                get: function() {
                  return this.constructor.name;
                }
              }]), g;
            })(), v = /* @__PURE__ */ (function(g) {
              u(k, g);
              function k() {
                var C, D;
                return D = g.call(this) || this, (C = D).init.apply(C, arguments), D;
              }
              var A = k.prototype;
              return A.init = function() {
              }, k.extend = function(D, P) {
                return typeof D == "object" && (P = D, D = "anonymous"), w(this, D, P);
              }, l(k, [{
                key: "typename",
                get: function() {
                  return this.constructor.name;
                }
              }]), k;
            })(h);
            a.exports = {
              Obj: b,
              EmitterObj: v
            };
          }),
          /* 2 */
          /***/
          (function(a, r, i) {
            var o = i(0), l = Array.from, s = typeof Symbol == "function" && Symbol.iterator && typeof l == "function", d = /* @__PURE__ */ (function() {
              function M(B, F) {
                this.variables = /* @__PURE__ */ Object.create(null), this.parent = B, this.topLevel = !1, this.isolateWrites = F;
              }
              var V = M.prototype;
              return V.set = function(F, H, K) {
                var Z = F.split("."), ue = this.variables, Y = this;
                if (K && (Y = this.resolve(Z[0], !0))) {
                  Y.set(F, H);
                  return;
                }
                for (var U = 0; U < Z.length - 1; U++) {
                  var q = Z[U];
                  ue[q] || (ue[q] = {}), ue = ue[q];
                }
                ue[Z[Z.length - 1]] = H;
              }, V.get = function(F) {
                var H = this.variables[F];
                return H !== void 0 ? H : null;
              }, V.lookup = function(F) {
                var H = this.parent, K = this.variables[F];
                return K !== void 0 ? K : H && H.lookup(F);
              }, V.resolve = function(F, H) {
                var K = H && this.isolateWrites ? void 0 : this.parent, Z = this.variables[F];
                return Z !== void 0 ? this : K && K.resolve(F);
              }, V.push = function(F) {
                return new M(this, F);
              }, V.pop = function() {
                return this.parent;
              }, M;
            })();
            function u(M, V, B) {
              return function() {
                for (var H = arguments.length, K = new Array(H), Z = 0; Z < H; Z++)
                  K[Z] = arguments[Z];
                var ue = p(K), Y, U = y(K);
                if (ue > M.length)
                  Y = K.slice(0, M.length), K.slice(Y.length, ue).forEach(function(ee, he) {
                    he < V.length && (U[V[he]] = ee);
                  }), Y.push(U);
                else if (ue < M.length) {
                  Y = K.slice(0, ue);
                  for (var q = ue; q < M.length; q++) {
                    var oe = M[q];
                    Y.push(U[oe]), delete U[oe];
                  }
                  Y.push(U);
                } else
                  Y = K;
                return B.apply(this, Y);
              };
            }
            function f(M) {
              return M.__keywords = !0, M;
            }
            function h(M) {
              return M && Object.prototype.hasOwnProperty.call(M, "__keywords");
            }
            function y(M) {
              var V = M.length;
              if (V) {
                var B = M[V - 1];
                if (h(B))
                  return B;
              }
              return {};
            }
            function p(M) {
              var V = M.length;
              if (V === 0)
                return 0;
              var B = M[V - 1];
              return h(B) ? V - 1 : V;
            }
            function w(M) {
              if (typeof M != "string")
                return M;
              this.val = M, this.length = M.length;
            }
            w.prototype = Object.create(String.prototype, {
              length: {
                writable: !0,
                configurable: !0,
                value: 0
              }
            }), w.prototype.valueOf = function() {
              return this.val;
            }, w.prototype.toString = function() {
              return this.val;
            };
            function b(M, V) {
              return M instanceof w ? new w(V) : V.toString();
            }
            function v(M) {
              var V = typeof M;
              return V === "string" ? new w(M) : V !== "function" ? M : function(F) {
                var H = M.apply(this, arguments);
                return typeof H == "string" ? new w(H) : H;
              };
            }
            function g(M, V) {
              return M = M ?? "", V && !(M instanceof w) && (M = o.escape(M.toString())), M;
            }
            function k(M, V, B) {
              if (M == null)
                throw new o.TemplateError("attempted to output null or undefined value", V + 1, B + 1);
              return M;
            }
            function A(M, V) {
              if (M != null)
                return typeof M[V] == "function" ? function() {
                  for (var B = arguments.length, F = new Array(B), H = 0; H < B; H++)
                    F[H] = arguments[H];
                  return M[V].apply(M, F);
                } : M[V];
            }
            function C(M, V, B, F) {
              if (M) {
                if (typeof M != "function")
                  throw new Error("Unable to call `" + V + "`, which is not a function");
              } else throw new Error("Unable to call `" + V + "`, which is undefined or falsey");
              return M.apply(B, F);
            }
            function D(M, V, B) {
              var F = V.lookup(B);
              return F !== void 0 ? F : M.lookup(B);
            }
            function P(M, V, B) {
              return M.lineno ? M : new o.TemplateError(M, V, B);
            }
            function O(M, V, B, F) {
              if (o.isArray(M)) {
                var H = M.length;
                o.asyncIter(M, function(Z, ue, Y) {
                  switch (V) {
                    case 1:
                      B(Z, ue, H, Y);
                      break;
                    case 2:
                      B(Z[0], Z[1], ue, H, Y);
                      break;
                    case 3:
                      B(Z[0], Z[1], Z[2], ue, H, Y);
                      break;
                    default:
                      Z.push(ue, H, Y), B.apply(this, Z);
                  }
                }, F);
              } else
                o.asyncFor(M, function(Z, ue, Y, U, q) {
                  B(Z, ue, Y, U, q);
                }, F);
            }
            function I(M, V, B, F) {
              var H = 0, K, Z;
              function ue(he, ve) {
                H++, Z[he] = ve, H === K && F(null, Z.join(""));
              }
              if (o.isArray(M))
                if (K = M.length, Z = new Array(K), K === 0)
                  F(null, "");
                else
                  for (var Y = 0; Y < M.length; Y++) {
                    var U = M[Y];
                    switch (V) {
                      case 1:
                        B(U, Y, K, ue);
                        break;
                      case 2:
                        B(U[0], U[1], Y, K, ue);
                        break;
                      case 3:
                        B(U[0], U[1], U[2], Y, K, ue);
                        break;
                      default:
                        U.push(Y, K, ue), B.apply(this, U);
                    }
                  }
              else {
                var q = o.keys(M || {});
                if (K = q.length, Z = new Array(K), K === 0)
                  F(null, "");
                else
                  for (var oe = 0; oe < q.length; oe++) {
                    var ee = q[oe];
                    B(ee, M[ee], oe, K, ue);
                  }
              }
            }
            function x(M) {
              return typeof M != "object" || M === null || o.isArray(M) ? M : s && Symbol.iterator in M ? l(M) : M;
            }
            a.exports = {
              Frame: d,
              makeMacro: u,
              makeKeywordArgs: f,
              numArgs: p,
              suppressValue: g,
              ensureDefined: k,
              memberLookup: A,
              contextOrFrameLookup: D,
              callWrap: C,
              handleError: P,
              isArray: o.isArray,
              keys: o.keys,
              SafeString: w,
              copySafeness: b,
              markSafe: v,
              asyncEach: O,
              asyncAll: I,
              inOperator: o.inOperator,
              fromIterator: x
            };
          }),
          /* 3 */
          /***/
          (function(a, r, i) {
            function o(Te, ze) {
              for (var ft = 0; ft < ze.length; ft++) {
                var ot = ze[ft];
                ot.enumerable = ot.enumerable || !1, ot.configurable = !0, "value" in ot && (ot.writable = !0), Object.defineProperty(Te, s(ot.key), ot);
              }
            }
            function l(Te, ze, ft) {
              return ze && o(Te.prototype, ze), Object.defineProperty(Te, "prototype", { writable: !1 }), Te;
            }
            function s(Te) {
              var ze = d(Te, "string");
              return typeof ze == "symbol" ? ze : String(ze);
            }
            function d(Te, ze) {
              if (typeof Te != "object" || Te === null) return Te;
              var ft = Te[Symbol.toPrimitive];
              if (ft !== void 0) {
                var ot = ft.call(Te, ze);
                if (typeof ot != "object") return ot;
                throw new TypeError("@@toPrimitive must return a primitive value.");
              }
              return String(Te);
            }
            function u(Te, ze) {
              Te.prototype = Object.create(ze.prototype), Te.prototype.constructor = Te, f(Te, ze);
            }
            function f(Te, ze) {
              return f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(ot, Ke) {
                return ot.__proto__ = Ke, ot;
              }, f(Te, ze);
            }
            var h = i(1), y = h.Obj;
            function p(Te, ze, ft) {
              Te instanceof ze && ft.push(Te), Te instanceof w && Te.findAll(ze, ft);
            }
            var w = /* @__PURE__ */ (function(Te) {
              u(ze, Te);
              function ze() {
                return Te.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(Ke, st) {
                for (var vt = arguments, Ea = this, qa = arguments.length, _r = new Array(qa > 2 ? qa - 2 : 0), Ka = 2; Ka < qa; Ka++)
                  _r[Ka - 2] = arguments[Ka];
                this.lineno = Ke, this.colno = st, this.fields.forEach(function(to, sl) {
                  var no = vt[sl + 2];
                  no === void 0 && (no = null), Ea[to] = no;
                });
              }, ft.findAll = function(Ke, st) {
                var vt = this;
                return st = st || [], this instanceof v ? this.children.forEach(function(Ea) {
                  return p(Ea, Ke, st);
                }) : this.fields.forEach(function(Ea) {
                  return p(vt[Ea], Ke, st);
                }), st;
              }, ft.iterFields = function(Ke) {
                var st = this;
                this.fields.forEach(function(vt) {
                  Ke(st[vt], vt);
                });
              }, ze;
            })(y), b = /* @__PURE__ */ (function(Te) {
              u(ze, Te);
              function ze() {
                return Te.apply(this, arguments) || this;
              }
              return l(ze, [{
                key: "typename",
                get: function() {
                  return "Value";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["value"];
                }
              }]), ze;
            })(w), v = /* @__PURE__ */ (function(Te) {
              u(ze, Te);
              function ze() {
                return Te.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(Ke, st, vt) {
                Te.prototype.init.call(this, Ke, st, vt || []);
              }, ft.addChild = function(Ke) {
                this.children.push(Ke);
              }, l(ze, [{
                key: "typename",
                get: function() {
                  return "NodeList";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["children"];
                }
              }]), ze;
            })(w), g = v.extend("Root"), k = b.extend("Literal"), A = b.extend("Symbol"), C = v.extend("Group"), D = v.extend("Array"), P = w.extend("Pair", {
              fields: ["key", "value"]
            }), O = v.extend("Dict"), I = w.extend("LookupVal", {
              fields: ["target", "val"]
            }), x = w.extend("If", {
              fields: ["cond", "body", "else_"]
            }), M = x.extend("IfAsync"), V = w.extend("InlineIf", {
              fields: ["cond", "body", "else_"]
            }), B = w.extend("For", {
              fields: ["arr", "name", "body", "else_"]
            }), F = B.extend("AsyncEach"), H = B.extend("AsyncAll"), K = w.extend("Macro", {
              fields: ["name", "args", "body"]
            }), Z = K.extend("Caller"), ue = w.extend("Import", {
              fields: ["template", "target", "withContext"]
            }), Y = /* @__PURE__ */ (function(Te) {
              u(ze, Te);
              function ze() {
                return Te.apply(this, arguments) || this;
              }
              var ft = ze.prototype;
              return ft.init = function(Ke, st, vt, Ea, qa) {
                Te.prototype.init.call(this, Ke, st, vt, Ea || new v(), qa);
              }, l(ze, [{
                key: "typename",
                get: function() {
                  return "FromImport";
                }
              }, {
                key: "fields",
                get: function() {
                  return ["template", "names", "withContext"];
                }
              }]), ze;
            })(w), U = w.extend("FunCall", {
              fields: ["name", "args"]
            }), q = U.extend("Filter"), oe = q.extend("FilterAsync", {
              fields: ["name", "args", "symbol"]
            }), ee = O.extend("KeywordArgs"), he = w.extend("Block", {
              fields: ["name", "body"]
            }), ve = w.extend("Super", {
              fields: ["blockName", "symbol"]
            }), pe = w.extend("TemplateRef", {
              fields: ["template"]
            }), z = pe.extend("Extends"), ge = w.extend("Include", {
              fields: ["template", "ignoreMissing"]
            }), Ve = w.extend("Set", {
              fields: ["targets", "value"]
            }), Ne = w.extend("Switch", {
              fields: ["expr", "cases", "default"]
            }), ce = w.extend("Case", {
              fields: ["cond", "body"]
            }), ne = v.extend("Output"), Q = w.extend("Capture", {
              fields: ["body"]
            }), le = k.extend("TemplateData"), G = w.extend("UnaryOp", {
              fields: ["target"]
            }), Ce = w.extend("BinOp", {
              fields: ["left", "right"]
            }), Ie = Ce.extend("In"), ie = Ce.extend("Is"), we = Ce.extend("Or"), Ee = Ce.extend("And"), Pe = G.extend("Not"), Xe = Ce.extend("Add"), _e = Ce.extend("Concat"), qe = Ce.extend("Sub"), Ze = Ce.extend("Mul"), _t = Ce.extend("Div"), It = Ce.extend("FloorDiv"), it = Ce.extend("Mod"), Bt = Ce.extend("Pow"), tn = G.extend("Neg"), Kn = G.extend("Pos"), oa = w.extend("Compare", {
              fields: ["expr", "ops"]
            }), $a = w.extend("CompareOperand", {
              fields: ["expr", "type"]
            }), ba = w.extend("CallExtension", {
              init: function(ze, ft, ot, Ke) {
                this.parent(), this.extName = ze.__name || ze, this.prop = ft, this.args = ot || new v(), this.contentArgs = Ke || [], this.autoescape = ze.autoescape;
              },
              fields: ["extName", "prop", "args", "contentArgs"]
            }), jn = ba.extend("CallExtensionAsync");
            function Rn(Te, ze, ft) {
              var ot = Te.split(`
`);
              ot.forEach(function(Ke, st) {
                Ke && (ft && st > 0 || !ft) && n.stdout.write(" ".repeat(ze));
                var vt = st === ot.length - 1 ? "" : `
`;
                n.stdout.write("" + Ke + vt);
              });
            }
            function er(Te, ze) {
              if (ze = ze || 0, Rn(Te.typename + ": ", ze), Te instanceof v)
                Rn(`
`), Te.children.forEach(function(Ke) {
                  er(Ke, ze + 2);
                });
              else if (Te instanceof ba)
                Rn(Te.extName + "." + Te.prop + `
`), Te.args && er(Te.args, ze + 2), Te.contentArgs && Te.contentArgs.forEach(function(Ke) {
                  er(Ke, ze + 2);
                });
              else {
                var ft = [], ot = null;
                Te.iterFields(function(Ke, st) {
                  Ke instanceof w ? ft.push([st, Ke]) : (ot = ot || {}, ot[st] = Ke);
                }), ot ? Rn(JSON.stringify(ot, null, 2) + `
`, null, !0) : Rn(`
`), ft.forEach(function(Ke) {
                  var st = Ke[0], vt = Ke[1];
                  Rn("[" + st + "] =>", ze + 2), er(vt, ze + 4);
                });
              }
            }
            a.exports = {
              Node: w,
              Root: g,
              NodeList: v,
              Value: b,
              Literal: k,
              Symbol: A,
              Group: C,
              Array: D,
              Pair: P,
              Dict: O,
              Output: ne,
              Capture: Q,
              TemplateData: le,
              If: x,
              IfAsync: M,
              InlineIf: V,
              For: B,
              AsyncEach: F,
              AsyncAll: H,
              Macro: K,
              Caller: Z,
              Import: ue,
              FromImport: Y,
              FunCall: U,
              Filter: q,
              FilterAsync: oe,
              KeywordArgs: ee,
              Block: he,
              Super: ve,
              Extends: z,
              Include: ge,
              Set: Ve,
              Switch: Ne,
              Case: ce,
              LookupVal: I,
              BinOp: Ce,
              In: Ie,
              Is: ie,
              Or: we,
              And: Ee,
              Not: Pe,
              Add: Xe,
              Concat: _e,
              Sub: qe,
              Mul: Ze,
              Div: _t,
              FloorDiv: It,
              Mod: it,
              Pow: Bt,
              Neg: tn,
              Pos: Kn,
              Compare: oa,
              CompareOperand: $a,
              CallExtension: ba,
              CallExtensionAsync: jn,
              printNodes: er
            };
          }),
          /* 4 */
          /***/
          (function(a, r) {
          }),
          /* 5 */
          /***/
          (function(a, r, i) {
            function o(k, A) {
              k.prototype = Object.create(A.prototype), k.prototype.constructor = k, l(k, A);
            }
            function l(k, A) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(D, P) {
                return D.__proto__ = P, D;
              }, l(k, A);
            }
            var s = i(8), d = i(17), u = i(3), f = i(0), h = f.TemplateError, y = i(2), p = y.Frame, w = i(1), b = w.Obj, v = {
              "==": "==",
              "===": "===",
              "!=": "!=",
              "!==": "!==",
              "<": "<",
              ">": ">",
              "<=": "<=",
              ">=": ">="
            }, g = /* @__PURE__ */ (function(k) {
              o(A, k);
              function A() {
                return k.apply(this, arguments) || this;
              }
              var C = A.prototype;
              return C.init = function(P, O) {
                this.templateName = P, this.codebuf = [], this.lastId = 0, this.buffer = null, this.bufferStack = [], this._scopeClosers = "", this.inBlock = !1, this.throwOnUndefined = O;
              }, C.fail = function(P, O, I) {
                throw O !== void 0 && (O += 1), I !== void 0 && (I += 1), new h(P, O, I);
              }, C._pushBuffer = function() {
                var P = this._tmpid();
                return this.bufferStack.push(this.buffer), this.buffer = P, this._emit("var " + this.buffer + ' = "";'), P;
              }, C._popBuffer = function() {
                this.buffer = this.bufferStack.pop();
              }, C._emit = function(P) {
                this.codebuf.push(P);
              }, C._emitLine = function(P) {
                this._emit(P + `
`);
              }, C._emitLines = function() {
                for (var P = this, O = arguments.length, I = new Array(O), x = 0; x < O; x++)
                  I[x] = arguments[x];
                I.forEach(function(M) {
                  return P._emitLine(M);
                });
              }, C._emitFuncBegin = function(P, O) {
                this.buffer = "output", this._scopeClosers = "", this._emitLine("function " + O + "(env, context, frame, runtime, cb) {"), this._emitLine("var lineno = " + P.lineno + ";"), this._emitLine("var colno = " + P.colno + ";"), this._emitLine("var " + this.buffer + ' = "";'), this._emitLine("try {");
              }, C._emitFuncEnd = function(P) {
                P || this._emitLine("cb(null, " + this.buffer + ");"), this._closeScopeLevels(), this._emitLine("} catch (e) {"), this._emitLine("  cb(runtime.handleError(e, lineno, colno));"), this._emitLine("}"), this._emitLine("}"), this.buffer = null;
              }, C._addScopeLevel = function() {
                this._scopeClosers += "})";
              }, C._closeScopeLevels = function() {
                this._emitLine(this._scopeClosers + ";"), this._scopeClosers = "";
              }, C._withScopedSyntax = function(P) {
                var O = this._scopeClosers;
                this._scopeClosers = "", P.call(this), this._closeScopeLevels(), this._scopeClosers = O;
              }, C._makeCallback = function(P) {
                var O = this._tmpid();
                return "function(" + O + (P ? "," + P : "") + `) {
if(` + O + ") { cb(" + O + "); return; }";
              }, C._tmpid = function() {
                return this.lastId++, "t_" + this.lastId;
              }, C._templateName = function() {
                return this.templateName == null ? "undefined" : JSON.stringify(this.templateName);
              }, C._compileChildren = function(P, O) {
                var I = this;
                P.children.forEach(function(x) {
                  I.compile(x, O);
                });
              }, C._compileAggregate = function(P, O, I, x) {
                var M = this;
                I && this._emit(I), P.children.forEach(function(V, B) {
                  B > 0 && M._emit(","), M.compile(V, O);
                }), x && this._emit(x);
              }, C._compileExpression = function(P, O) {
                this.assertType(P, u.Literal, u.Symbol, u.Group, u.Array, u.Dict, u.FunCall, u.Caller, u.Filter, u.LookupVal, u.Compare, u.InlineIf, u.In, u.Is, u.And, u.Or, u.Not, u.Add, u.Concat, u.Sub, u.Mul, u.Div, u.FloorDiv, u.Mod, u.Pow, u.Neg, u.Pos, u.Compare, u.NodeList), this.compile(P, O);
              }, C.assertType = function(P) {
                for (var O = arguments.length, I = new Array(O > 1 ? O - 1 : 0), x = 1; x < O; x++)
                  I[x - 1] = arguments[x];
                I.some(function(M) {
                  return P instanceof M;
                }) || this.fail("assertType: invalid type: " + P.typename, P.lineno, P.colno);
              }, C.compileCallExtension = function(P, O, I) {
                var x = this, M = P.args, V = P.contentArgs, B = typeof P.autoescape == "boolean" ? P.autoescape : !0;
                if (I || this._emit(this.buffer + " += runtime.suppressValue("), this._emit('env.getExtension("' + P.extName + '")["' + P.prop + '"]('), this._emit("context"), (M || V) && this._emit(","), M && (M instanceof u.NodeList || this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"), M.children.forEach(function(H, K) {
                  x._compileExpression(H, O), (K !== M.children.length - 1 || V.length) && x._emit(",");
                })), V.length && V.forEach(function(H, K) {
                  if (K > 0 && x._emit(","), H) {
                    x._emitLine("function(cb) {"), x._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");
                    var Z = x._pushBuffer();
                    x._withScopedSyntax(function() {
                      x.compile(H, O), x._emitLine("cb(null, " + Z + ");");
                    }), x._popBuffer(), x._emitLine("return " + Z + ";"), x._emitLine("}");
                  } else
                    x._emit("null");
                }), I) {
                  var F = this._tmpid();
                  this._emitLine(", " + this._makeCallback(F)), this._emitLine(this.buffer + " += runtime.suppressValue(" + F + ", " + B + " && env.opts.autoescape);"), this._addScopeLevel();
                } else
                  this._emit(")"), this._emit(", " + B + ` && env.opts.autoescape);
`);
              }, C.compileCallExtensionAsync = function(P, O) {
                this.compileCallExtension(P, O, !0);
              }, C.compileNodeList = function(P, O) {
                this._compileChildren(P, O);
              }, C.compileLiteral = function(P) {
                if (typeof P.value == "string") {
                  var O = P.value.replace(/\\/g, "\\\\");
                  O = O.replace(/"/g, '\\"'), O = O.replace(/\n/g, "\\n"), O = O.replace(/\r/g, "\\r"), O = O.replace(/\t/g, "\\t"), O = O.replace(/\u2028/g, "\\u2028"), this._emit('"' + O + '"');
                } else P.value === null ? this._emit("null") : this._emit(P.value.toString());
              }, C.compileSymbol = function(P, O) {
                var I = P.value, x = O.lookup(I);
                x ? this._emit(x) : this._emit('runtime.contextOrFrameLookup(context, frame, "' + I + '")');
              }, C.compileGroup = function(P, O) {
                this._compileAggregate(P, O, "(", ")");
              }, C.compileArray = function(P, O) {
                this._compileAggregate(P, O, "[", "]");
              }, C.compileDict = function(P, O) {
                this._compileAggregate(P, O, "{", "}");
              }, C.compilePair = function(P, O) {
                var I = P.key, x = P.value;
                I instanceof u.Symbol ? I = new u.Literal(I.lineno, I.colno, I.value) : I instanceof u.Literal && typeof I.value == "string" || this.fail("compilePair: Dict keys must be strings or names", I.lineno, I.colno), this.compile(I, O), this._emit(": "), this._compileExpression(x, O);
              }, C.compileInlineIf = function(P, O) {
                this._emit("("), this.compile(P.cond, O), this._emit("?"), this.compile(P.body, O), this._emit(":"), P.else_ !== null ? this.compile(P.else_, O) : this._emit('""'), this._emit(")");
              }, C.compileIn = function(P, O) {
                this._emit("runtime.inOperator("), this.compile(P.left, O), this._emit(","), this.compile(P.right, O), this._emit(")");
              }, C.compileIs = function(P, O) {
                var I = P.right.name ? P.right.name.value : P.right.value;
                this._emit('env.getTest("' + I + '").call(context, '), this.compile(P.left, O), P.right.args && (this._emit(","), this.compile(P.right.args, O)), this._emit(") === true");
              }, C._binOpEmitter = function(P, O, I) {
                this.compile(P.left, O), this._emit(I), this.compile(P.right, O);
              }, C.compileOr = function(P, O) {
                return this._binOpEmitter(P, O, " || ");
              }, C.compileAnd = function(P, O) {
                return this._binOpEmitter(P, O, " && ");
              }, C.compileAdd = function(P, O) {
                return this._binOpEmitter(P, O, " + ");
              }, C.compileConcat = function(P, O) {
                return this._binOpEmitter(P, O, ' + "" + ');
              }, C.compileSub = function(P, O) {
                return this._binOpEmitter(P, O, " - ");
              }, C.compileMul = function(P, O) {
                return this._binOpEmitter(P, O, " * ");
              }, C.compileDiv = function(P, O) {
                return this._binOpEmitter(P, O, " / ");
              }, C.compileMod = function(P, O) {
                return this._binOpEmitter(P, O, " % ");
              }, C.compileNot = function(P, O) {
                this._emit("!"), this.compile(P.target, O);
              }, C.compileFloorDiv = function(P, O) {
                this._emit("Math.floor("), this.compile(P.left, O), this._emit(" / "), this.compile(P.right, O), this._emit(")");
              }, C.compilePow = function(P, O) {
                this._emit("Math.pow("), this.compile(P.left, O), this._emit(", "), this.compile(P.right, O), this._emit(")");
              }, C.compileNeg = function(P, O) {
                this._emit("-"), this.compile(P.target, O);
              }, C.compilePos = function(P, O) {
                this._emit("+"), this.compile(P.target, O);
              }, C.compileCompare = function(P, O) {
                var I = this;
                this.compile(P.expr, O), P.ops.forEach(function(x) {
                  I._emit(" " + v[x.type] + " "), I.compile(x.expr, O);
                });
              }, C.compileLookupVal = function(P, O) {
                this._emit("runtime.memberLookup(("), this._compileExpression(P.target, O), this._emit("),"), this._compileExpression(P.val, O), this._emit(")");
              }, C._getNodeName = function(P) {
                switch (P.typename) {
                  case "Symbol":
                    return P.value;
                  case "FunCall":
                    return "the return value of (" + this._getNodeName(P.name) + ")";
                  case "LookupVal":
                    return this._getNodeName(P.target) + '["' + this._getNodeName(P.val) + '"]';
                  case "Literal":
                    return P.value.toString();
                  default:
                    return "--expression--";
                }
              }, C.compileFunCall = function(P, O) {
                this._emit("(lineno = " + P.lineno + ", colno = " + P.colno + ", "), this._emit("runtime.callWrap("), this._compileExpression(P.name, O), this._emit(', "' + this._getNodeName(P.name).replace(/"/g, '\\"') + '", context, '), this._compileAggregate(P.args, O, "[", "])"), this._emit(")");
              }, C.compileFilter = function(P, O) {
                var I = P.name;
                this.assertType(I, u.Symbol), this._emit('env.getFilter("' + I.value + '").call(context, '), this._compileAggregate(P.args, O), this._emit(")");
              }, C.compileFilterAsync = function(P, O) {
                var I = P.name, x = P.symbol.value;
                this.assertType(I, u.Symbol), O.set(x, x), this._emit('env.getFilter("' + I.value + '").call(context, '), this._compileAggregate(P.args, O), this._emitLine(", " + this._makeCallback(x)), this._addScopeLevel();
              }, C.compileKeywordArgs = function(P, O) {
                this._emit("runtime.makeKeywordArgs("), this.compileDict(P, O), this._emit(")");
              }, C.compileSet = function(P, O) {
                var I = this, x = [];
                P.targets.forEach(function(M) {
                  var V = M.value, B = O.lookup(V);
                  B == null && (B = I._tmpid(), I._emitLine("var " + B + ";")), x.push(B);
                }), P.value ? (this._emit(x.join(" = ") + " = "), this._compileExpression(P.value, O), this._emitLine(";")) : (this._emit(x.join(" = ") + " = "), this.compile(P.body, O), this._emitLine(";")), P.targets.forEach(function(M, V) {
                  var B = x[V], F = M.value;
                  I._emitLine('frame.set("' + F + '", ' + B + ", true);"), I._emitLine("if(frame.topLevel) {"), I._emitLine('context.setVariable("' + F + '", ' + B + ");"), I._emitLine("}"), F.charAt(0) !== "_" && (I._emitLine("if(frame.topLevel) {"), I._emitLine('context.addExport("' + F + '", ' + B + ");"), I._emitLine("}"));
                });
              }, C.compileSwitch = function(P, O) {
                var I = this;
                this._emit("switch ("), this.compile(P.expr, O), this._emit(") {"), P.cases.forEach(function(x, M) {
                  I._emit("case "), I.compile(x.cond, O), I._emit(": "), I.compile(x.body, O), x.body.children.length && I._emitLine("break;");
                }), P.default && (this._emit("default:"), this.compile(P.default, O)), this._emit("}");
              }, C.compileIf = function(P, O, I) {
                var x = this;
                this._emit("if("), this._compileExpression(P.cond, O), this._emitLine(") {"), this._withScopedSyntax(function() {
                  x.compile(P.body, O), I && x._emit("cb()");
                }), P.else_ ? (this._emitLine(`}
else {`), this._withScopedSyntax(function() {
                  x.compile(P.else_, O), I && x._emit("cb()");
                })) : I && (this._emitLine(`}
else {`), this._emit("cb()")), this._emitLine("}");
              }, C.compileIfAsync = function(P, O) {
                this._emit("(function(cb) {"), this.compileIf(P, O, !0), this._emit("})(" + this._makeCallback()), this._addScopeLevel();
              }, C._emitLoopBindings = function(P, O, I, x) {
                var M = this, V = [{
                  name: "index",
                  val: I + " + 1"
                }, {
                  name: "index0",
                  val: I
                }, {
                  name: "revindex",
                  val: x + " - " + I
                }, {
                  name: "revindex0",
                  val: x + " - " + I + " - 1"
                }, {
                  name: "first",
                  val: I + " === 0"
                }, {
                  name: "last",
                  val: I + " === " + x + " - 1"
                }, {
                  name: "length",
                  val: x
                }];
                V.forEach(function(B) {
                  M._emitLine('frame.set("loop.' + B.name + '", ' + B.val + ");");
                });
              }, C.compileFor = function(P, O) {
                var I = this, x = this._tmpid(), M = this._tmpid(), V = this._tmpid();
                if (O = O.push(), this._emitLine("frame = frame.push();"), this._emit("var " + V + " = "), this._compileExpression(P.arr, O), this._emitLine(";"), this._emit("if(" + V + ") {"), this._emitLine(V + " = runtime.fromIterator(" + V + ");"), P.name instanceof u.Array) {
                  this._emitLine("var " + x + ";"), this._emitLine("if(runtime.isArray(" + V + ")) {"), this._emitLine("var " + M + " = " + V + ".length;"), this._emitLine("for(" + x + "=0; " + x + " < " + V + ".length; " + x + "++) {"), P.name.children.forEach(function(Y, U) {
                    var q = I._tmpid();
                    I._emitLine("var " + q + " = " + V + "[" + x + "][" + U + "];"), I._emitLine('frame.set("' + Y + '", ' + V + "[" + x + "][" + U + "]);"), O.set(P.name.children[U].value, q);
                  }), this._emitLoopBindings(P, V, x, M), this._withScopedSyntax(function() {
                    I.compile(P.body, O);
                  }), this._emitLine("}"), this._emitLine("} else {");
                  var B = P.name.children, F = B[0], H = B[1], K = this._tmpid(), Z = this._tmpid();
                  O.set(F.value, K), O.set(H.value, Z), this._emitLine(x + " = -1;"), this._emitLine("var " + M + " = runtime.keys(" + V + ").length;"), this._emitLine("for(var " + K + " in " + V + ") {"), this._emitLine(x + "++;"), this._emitLine("var " + Z + " = " + V + "[" + K + "];"), this._emitLine('frame.set("' + F.value + '", ' + K + ");"), this._emitLine('frame.set("' + H.value + '", ' + Z + ");"), this._emitLoopBindings(P, V, x, M), this._withScopedSyntax(function() {
                    I.compile(P.body, O);
                  }), this._emitLine("}"), this._emitLine("}");
                } else {
                  var ue = this._tmpid();
                  O.set(P.name.value, ue), this._emitLine("var " + M + " = " + V + ".length;"), this._emitLine("for(var " + x + "=0; " + x + " < " + V + ".length; " + x + "++) {"), this._emitLine("var " + ue + " = " + V + "[" + x + "];"), this._emitLine('frame.set("' + P.name.value + '", ' + ue + ");"), this._emitLoopBindings(P, V, x, M), this._withScopedSyntax(function() {
                    I.compile(P.body, O);
                  }), this._emitLine("}");
                }
                this._emitLine("}"), P.else_ && (this._emitLine("if (!" + M + ") {"), this.compile(P.else_, O), this._emitLine("}")), this._emitLine("frame = frame.pop();");
              }, C._compileAsyncLoop = function(P, O, I) {
                var x = this, M = this._tmpid(), V = this._tmpid(), B = this._tmpid(), F = I ? "asyncAll" : "asyncEach";
                if (O = O.push(), this._emitLine("frame = frame.push();"), this._emit("var " + B + " = runtime.fromIterator("), this._compileExpression(P.arr, O), this._emitLine(");"), P.name instanceof u.Array) {
                  var H = P.name.children.length;
                  this._emit("runtime." + F + "(" + B + ", " + H + ", function("), P.name.children.forEach(function(ue) {
                    x._emit(ue.value + ",");
                  }), this._emit(M + "," + V + ",next) {"), P.name.children.forEach(function(ue) {
                    var Y = ue.value;
                    O.set(Y, Y), x._emitLine('frame.set("' + Y + '", ' + Y + ");");
                  });
                } else {
                  var K = P.name.value;
                  this._emitLine("runtime." + F + "(" + B + ", 1, function(" + K + ", " + M + ", " + V + ",next) {"), this._emitLine('frame.set("' + K + '", ' + K + ");"), O.set(K, K);
                }
                this._emitLoopBindings(P, B, M, V), this._withScopedSyntax(function() {
                  var ue;
                  I && (ue = x._pushBuffer()), x.compile(P.body, O), x._emitLine("next(" + M + (ue ? "," + ue : "") + ");"), I && x._popBuffer();
                });
                var Z = this._tmpid();
                this._emitLine("}, " + this._makeCallback(Z)), this._addScopeLevel(), I && this._emitLine(this.buffer + " += " + Z + ";"), P.else_ && (this._emitLine("if (!" + B + ".length) {"), this.compile(P.else_, O), this._emitLine("}")), this._emitLine("frame = frame.pop();");
              }, C.compileAsyncEach = function(P, O) {
                this._compileAsyncLoop(P, O);
              }, C.compileAsyncAll = function(P, O) {
                this._compileAsyncLoop(P, O, !0);
              }, C._compileMacro = function(P, O) {
                var I = this, x = [], M = null, V = "macro_" + this._tmpid(), B = O !== void 0;
                P.args.children.forEach(function(Y, U) {
                  U === P.args.children.length - 1 && Y instanceof u.Dict ? M = Y : (I.assertType(Y, u.Symbol), x.push(Y));
                });
                var F = [].concat(x.map(function(Y) {
                  return "l_" + Y.value;
                }), ["kwargs"]), H = x.map(function(Y) {
                  return '"' + Y.value + '"';
                }), K = (M && M.children || []).map(function(Y) {
                  return '"' + Y.key.value + '"';
                }), Z;
                B ? Z = O.push(!0) : Z = new p(), this._emitLines("var " + V + " = runtime.makeMacro(", "[" + H.join(", ") + "], ", "[" + K.join(", ") + "], ", "function (" + F.join(", ") + ") {", "var callerFrame = frame;", "frame = " + (B ? "frame.push(true);" : "new runtime.Frame();"), "kwargs = kwargs || {};", 'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {', 'frame.set("caller", kwargs.caller); }'), x.forEach(function(Y) {
                  I._emitLine('frame.set("' + Y.value + '", l_' + Y.value + ");"), Z.set(Y.value, "l_" + Y.value);
                }), M && M.children.forEach(function(Y) {
                  var U = Y.key.value;
                  I._emit('frame.set("' + U + '", '), I._emit('Object.prototype.hasOwnProperty.call(kwargs, "' + U + '")'), I._emit(' ? kwargs["' + U + '"] : '), I._compileExpression(Y.value, Z), I._emit(");");
                });
                var ue = this._pushBuffer();
                return this._withScopedSyntax(function() {
                  I.compile(P.body, Z);
                }), this._emitLine("frame = " + (B ? "frame.pop();" : "callerFrame;")), this._emitLine("return new runtime.SafeString(" + ue + ");"), this._emitLine("});"), this._popBuffer(), V;
              }, C.compileMacro = function(P, O) {
                var I = this._compileMacro(P), x = P.name.value;
                O.set(x, I), O.parent ? this._emitLine('frame.set("' + x + '", ' + I + ");") : (P.name.value.charAt(0) !== "_" && this._emitLine('context.addExport("' + x + '");'), this._emitLine('context.setVariable("' + x + '", ' + I + ");"));
              }, C.compileCaller = function(P, O) {
                this._emit("(function (){");
                var I = this._compileMacro(P, O);
                this._emit("return " + I + ";})()");
              }, C._compileGetTemplate = function(P, O, I, x) {
                var M = this._tmpid(), V = this._templateName(), B = this._makeCallback(M), F = I ? "true" : "false", H = x ? "true" : "false";
                return this._emit("env.getTemplate("), this._compileExpression(P.template, O), this._emitLine(", " + F + ", " + V + ", " + H + ", " + B), M;
              }, C.compileImport = function(P, O) {
                var I = P.target.value, x = this._compileGetTemplate(P, O, !1, !1);
                this._addScopeLevel(), this._emitLine(x + ".getExported(" + (P.withContext ? "context.getVariables(), frame, " : "") + this._makeCallback(x)), this._addScopeLevel(), O.set(I, x), O.parent ? this._emitLine('frame.set("' + I + '", ' + x + ");") : this._emitLine('context.setVariable("' + I + '", ' + x + ");");
              }, C.compileFromImport = function(P, O) {
                var I = this, x = this._compileGetTemplate(P, O, !1, !1);
                this._addScopeLevel(), this._emitLine(x + ".getExported(" + (P.withContext ? "context.getVariables(), frame, " : "") + this._makeCallback(x)), this._addScopeLevel(), P.names.children.forEach(function(M) {
                  var V, B, F = I._tmpid();
                  M instanceof u.Pair ? (V = M.key.value, B = M.value.value) : (V = M.value, B = V), I._emitLine("if(Object.prototype.hasOwnProperty.call(" + x + ', "' + V + '")) {'), I._emitLine("var " + F + " = " + x + "." + V + ";"), I._emitLine("} else {"), I._emitLine(`cb(new Error("cannot import '` + V + `'")); return;`), I._emitLine("}"), O.set(B, F), O.parent ? I._emitLine('frame.set("' + B + '", ' + F + ");") : I._emitLine('context.setVariable("' + B + '", ' + F + ");");
                });
              }, C.compileBlock = function(P) {
                var O = this._tmpid();
                this.inBlock || this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '), this._emit('context.getBlock("' + P.name.value + '")'), this.inBlock || this._emit(")"), this._emitLine("(env, context, frame, runtime, " + this._makeCallback(O)), this._emitLine(this.buffer + " += " + O + ";"), this._addScopeLevel();
              }, C.compileSuper = function(P, O) {
                var I = P.blockName.value, x = P.symbol.value, M = this._makeCallback(x);
                this._emitLine('context.getSuper(env, "' + I + '", b_' + I + ", frame, runtime, " + M), this._emitLine(x + " = runtime.markSafe(" + x + ");"), this._addScopeLevel(), O.set(x, x);
              }, C.compileExtends = function(P, O) {
                var I = this._tmpid(), x = this._compileGetTemplate(P, O, !0, !1);
                this._emitLine("parentTemplate = " + x), this._emitLine("for(var " + I + " in parentTemplate.blocks) {"), this._emitLine("context.addBlock(" + I + ", parentTemplate.blocks[" + I + "]);"), this._emitLine("}"), this._addScopeLevel();
              }, C.compileInclude = function(P, O) {
                this._emitLine("var tasks = [];"), this._emitLine("tasks.push("), this._emitLine("function(callback) {");
                var I = this._compileGetTemplate(P, O, !1, P.ignoreMissing);
                this._emitLine("callback(null," + I + ");});"), this._emitLine("});");
                var x = this._tmpid();
                this._emitLine("tasks.push("), this._emitLine("function(template, callback){"), this._emitLine("template.render(context.getVariables(), frame, " + this._makeCallback(x)), this._emitLine("callback(null," + x + ");});"), this._emitLine("});"), this._emitLine("tasks.push("), this._emitLine("function(result, callback){"), this._emitLine(this.buffer + " += result;"), this._emitLine("callback(null);"), this._emitLine("});"), this._emitLine("env.waterfall(tasks, function(){"), this._addScopeLevel();
              }, C.compileTemplateData = function(P, O) {
                this.compileLiteral(P, O);
              }, C.compileCapture = function(P, O) {
                var I = this, x = this.buffer;
                this.buffer = "output", this._emitLine("(function() {"), this._emitLine('var output = "";'), this._withScopedSyntax(function() {
                  I.compile(P.body, O);
                }), this._emitLine("return output;"), this._emitLine("})()"), this.buffer = x;
              }, C.compileOutput = function(P, O) {
                var I = this, x = P.children;
                x.forEach(function(M) {
                  M instanceof u.TemplateData ? M.value && (I._emit(I.buffer + " += "), I.compileLiteral(M, O), I._emitLine(";")) : (I._emit(I.buffer + " += runtime.suppressValue("), I.throwOnUndefined && I._emit("runtime.ensureDefined("), I.compile(M, O), I.throwOnUndefined && I._emit("," + P.lineno + "," + P.colno + ")"), I._emit(`, env.opts.autoescape);
`));
                });
              }, C.compileRoot = function(P, O) {
                var I = this;
                O && this.fail("compileRoot: root node can't have frame"), O = new p(), this._emitFuncBegin(P, "root"), this._emitLine("var parentTemplate = null;"), this._compileChildren(P, O), this._emitLine("if(parentTemplate) {"), this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"), this._emitLine("} else {"), this._emitLine("cb(null, " + this.buffer + ");"), this._emitLine("}"), this._emitFuncEnd(!0), this.inBlock = !0;
                var x = [], M = P.findAll(u.Block);
                M.forEach(function(V, B) {
                  var F = V.name.value;
                  if (x.indexOf(F) !== -1)
                    throw new Error('Block "' + F + '" defined more than once.');
                  x.push(F), I._emitFuncBegin(V, "b_" + F);
                  var H = new p();
                  I._emitLine("var frame = frame.push(true);"), I.compile(V.body, H), I._emitFuncEnd();
                }), this._emitLine("return {"), M.forEach(function(V, B) {
                  var F = "b_" + V.name.value;
                  I._emitLine(F + ": " + F + ",");
                }), this._emitLine(`root: root
};`);
              }, C.compile = function(P, O) {
                var I = this["compile" + P.typename];
                I ? I.call(this, P, O) : this.fail("compile: Cannot compile node: " + P.typename, P.lineno, P.colno);
              }, C.getCode = function() {
                return this.codebuf.join("");
              }, A;
            })(b);
            a.exports = {
              compile: function(A, C, D, P, O) {
                O === void 0 && (O = {});
                var I = new g(P, O.throwOnUndefined), x = (D || []).map(function(V) {
                  return V.preprocess;
                }).filter(function(V) {
                  return !!V;
                }), M = x.reduce(function(V, B) {
                  return B(V);
                }, A);
                return I.compile(d.transform(s.parse(M, D, O), C, P)), I.getCode();
              },
              Compiler: g
            };
          }),
          /* 6 */
          /***/
          (function(a, r, i) {
            function o(f, h) {
              f.prototype = Object.create(h.prototype), f.prototype.constructor = f, l(f, h);
            }
            function l(f, h) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(p, w) {
                return p.__proto__ = w, p;
              }, l(f, h);
            }
            var s = i(4), d = i(1), u = d.EmitterObj;
            a.exports = /* @__PURE__ */ (function(f) {
              o(h, f);
              function h() {
                return f.apply(this, arguments) || this;
              }
              var y = h.prototype;
              return y.resolve = function(w, b) {
                return s.resolve(s.dirname(w), b);
              }, y.isRelative = function(w) {
                return w.indexOf("./") === 0 || w.indexOf("../") === 0;
              }, h;
            })(u);
          }),
          /* 7 */
          /***/
          (function(a, r, i) {
            function o(H, K) {
              H.prototype = Object.create(K.prototype), H.prototype.constructor = H, l(H, K);
            }
            function l(H, K) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(ue, Y) {
                return ue.__proto__ = Y, ue;
              }, l(H, K);
            }
            var s = i(12), d = i(15), u = i(0), f = i(5), h = i(18), y = i(10), p = y.FileSystemLoader, w = y.WebLoader, b = y.PrecompiledLoader, v = i(20), g = i(21), k = i(1), A = k.Obj, C = k.EmitterObj, D = i(2), P = D.handleError, O = D.Frame, I = i(22);
            function x(H, K, Z) {
              s(function() {
                H(K, Z);
              });
            }
            var M = {
              type: "code",
              obj: {
                root: function(K, Z, ue, Y, U) {
                  try {
                    U(null, "");
                  } catch (q) {
                    U(P(q, null, null));
                  }
                }
              }
            }, V = /* @__PURE__ */ (function(H) {
              o(K, H);
              function K() {
                return H.apply(this, arguments) || this;
              }
              var Z = K.prototype;
              return Z.init = function(Y, U) {
                var q = this;
                U = this.opts = U || {}, this.opts.dev = !!U.dev, this.opts.autoescape = U.autoescape != null ? U.autoescape : !0, this.opts.throwOnUndefined = !!U.throwOnUndefined, this.opts.trimBlocks = !!U.trimBlocks, this.opts.lstripBlocks = !!U.lstripBlocks, this.loaders = [], Y ? this.loaders = u.isArray(Y) ? Y : [Y] : p ? this.loaders = [new p("views")] : w && (this.loaders = [new w("/views")]), typeof window < "u" && window.nunjucksPrecompiled && this.loaders.unshift(new b(window.nunjucksPrecompiled)), this._initLoaders(), this.globals = g(), this.filters = {}, this.tests = {}, this.asyncFilters = [], this.extensions = {}, this.extensionsList = [], u._entries(h).forEach(function(oe) {
                  var ee = oe[0], he = oe[1];
                  return q.addFilter(ee, he);
                }), u._entries(v).forEach(function(oe) {
                  var ee = oe[0], he = oe[1];
                  return q.addTest(ee, he);
                });
              }, Z._initLoaders = function() {
                var Y = this;
                this.loaders.forEach(function(U) {
                  U.cache = {}, typeof U.on == "function" && (U.on("update", function(q, oe) {
                    U.cache[q] = null, Y.emit("update", q, oe, U);
                  }), U.on("load", function(q, oe) {
                    Y.emit("load", q, oe, U);
                  }));
                });
              }, Z.invalidateCache = function() {
                this.loaders.forEach(function(Y) {
                  Y.cache = {};
                });
              }, Z.addExtension = function(Y, U) {
                return U.__name = Y, this.extensions[Y] = U, this.extensionsList.push(U), this;
              }, Z.removeExtension = function(Y) {
                var U = this.getExtension(Y);
                U && (this.extensionsList = u.without(this.extensionsList, U), delete this.extensions[Y]);
              }, Z.getExtension = function(Y) {
                return this.extensions[Y];
              }, Z.hasExtension = function(Y) {
                return !!this.extensions[Y];
              }, Z.addGlobal = function(Y, U) {
                return this.globals[Y] = U, this;
              }, Z.getGlobal = function(Y) {
                if (typeof this.globals[Y] > "u")
                  throw new Error("global not found: " + Y);
                return this.globals[Y];
              }, Z.addFilter = function(Y, U, q) {
                var oe = U;
                return q && this.asyncFilters.push(Y), this.filters[Y] = oe, this;
              }, Z.getFilter = function(Y) {
                if (!this.filters[Y])
                  throw new Error("filter not found: " + Y);
                return this.filters[Y];
              }, Z.addTest = function(Y, U) {
                return this.tests[Y] = U, this;
              }, Z.getTest = function(Y) {
                if (!this.tests[Y])
                  throw new Error("test not found: " + Y);
                return this.tests[Y];
              }, Z.resolveTemplate = function(Y, U, q) {
                var oe = Y.isRelative && U ? Y.isRelative(q) : !1;
                return oe && Y.resolve ? Y.resolve(U, q) : q;
              }, Z.getTemplate = function(Y, U, q, oe, ee) {
                var he = this, ve = this, pe = null;
                if (Y && Y.raw && (Y = Y.raw), u.isFunction(q) && (ee = q, q = null, U = U || !1), u.isFunction(U) && (ee = U, U = !1), Y instanceof F)
                  pe = Y;
                else {
                  if (typeof Y != "string")
                    throw new Error("template names must be a string: " + Y);
                  for (var z = 0; z < this.loaders.length; z++) {
                    var ge = this.loaders[z];
                    if (pe = ge.cache[this.resolveTemplate(ge, q, Y)], pe)
                      break;
                  }
                }
                if (pe)
                  if (U && pe.compile(), ee) {
                    ee(null, pe);
                    return;
                  } else
                    return pe;
                var Ve, Ne = function(ne, Q) {
                  if (!Q && !ne && !oe && (ne = new Error("template not found: " + Y)), ne)
                    if (ee) {
                      ee(ne);
                      return;
                    } else
                      throw ne;
                  var le;
                  Q ? (le = new F(Q.src, he, Q.path, U), Q.noCache || (Q.loader.cache[Y] = le)) : le = new F(M, he, "", U), ee ? ee(null, le) : Ve = le;
                };
                return u.asyncIter(this.loaders, function(ce, ne, Q, le) {
                  function G(Ce, Ie) {
                    Ce ? le(Ce) : Ie ? (Ie.loader = ce, le(null, Ie)) : Q();
                  }
                  Y = ve.resolveTemplate(ce, q, Y), ce.async ? ce.getSource(Y, G) : G(null, ce.getSource(Y));
                }, Ne), Ve;
              }, Z.express = function(Y) {
                return I(this, Y);
              }, Z.render = function(Y, U, q) {
                u.isFunction(U) && (q = U, U = null);
                var oe = null;
                return this.getTemplate(Y, function(ee, he) {
                  if (ee && q)
                    x(q, ee);
                  else {
                    if (ee)
                      throw ee;
                    oe = he.render(U, q);
                  }
                }), oe;
              }, Z.renderString = function(Y, U, q, oe) {
                u.isFunction(q) && (oe = q, q = {}), q = q || {};
                var ee = new F(Y, this, q.path);
                return ee.render(U, oe);
              }, Z.waterfall = function(Y, U, q) {
                return d(Y, U, q);
              }, K;
            })(C), B = /* @__PURE__ */ (function(H) {
              o(K, H);
              function K() {
                return H.apply(this, arguments) || this;
              }
              var Z = K.prototype;
              return Z.init = function(Y, U, q) {
                var oe = this;
                this.env = q || new V(), this.ctx = u.extend({}, Y), this.blocks = {}, this.exported = [], u.keys(U).forEach(function(ee) {
                  oe.addBlock(ee, U[ee]);
                });
              }, Z.lookup = function(Y) {
                return Y in this.env.globals && !(Y in this.ctx) ? this.env.globals[Y] : this.ctx[Y];
              }, Z.setVariable = function(Y, U) {
                this.ctx[Y] = U;
              }, Z.getVariables = function() {
                return this.ctx;
              }, Z.addBlock = function(Y, U) {
                return this.blocks[Y] = this.blocks[Y] || [], this.blocks[Y].push(U), this;
              }, Z.getBlock = function(Y) {
                if (!this.blocks[Y])
                  throw new Error('unknown block "' + Y + '"');
                return this.blocks[Y][0];
              }, Z.getSuper = function(Y, U, q, oe, ee, he) {
                var ve = u.indexOf(this.blocks[U] || [], q), pe = this.blocks[U][ve + 1], z = this;
                if (ve === -1 || !pe)
                  throw new Error('no super block available for "' + U + '"');
                pe(Y, z, oe, ee, he);
              }, Z.addExport = function(Y) {
                this.exported.push(Y);
              }, Z.getExported = function() {
                var Y = this, U = {};
                return this.exported.forEach(function(q) {
                  U[q] = Y.ctx[q];
                }), U;
              }, K;
            })(A), F = /* @__PURE__ */ (function(H) {
              o(K, H);
              function K() {
                return H.apply(this, arguments) || this;
              }
              var Z = K.prototype;
              return Z.init = function(Y, U, q, oe) {
                if (this.env = U || new V(), u.isObject(Y))
                  switch (Y.type) {
                    case "code":
                      this.tmplProps = Y.obj;
                      break;
                    case "string":
                      this.tmplStr = Y.obj;
                      break;
                    default:
                      throw new Error("Unexpected template object type " + Y.type + "; expected 'code', or 'string'");
                  }
                else if (u.isString(Y))
                  this.tmplStr = Y;
                else
                  throw new Error("src must be a string or an object describing the source");
                if (this.path = q, oe)
                  try {
                    this._compile();
                  } catch (ee) {
                    throw u._prettifyError(this.path, this.env.opts.dev, ee);
                  }
                else
                  this.compiled = !1;
              }, Z.render = function(Y, U, q) {
                var oe = this;
                typeof Y == "function" ? (q = Y, Y = {}) : typeof U == "function" && (q = U, U = null);
                var ee = !U;
                try {
                  this.compile();
                } catch (Ve) {
                  var he = u._prettifyError(this.path, this.env.opts.dev, Ve);
                  if (q)
                    return x(q, he);
                  throw he;
                }
                var ve = new B(Y || {}, this.blocks, this.env), pe = U ? U.push(!0) : new O();
                pe.topLevel = !0;
                var z = null, ge = !1;
                return this.rootRenderFunc(this.env, ve, pe, D, function(Ve, Ne) {
                  if (!(ge && q && typeof Ne < "u"))
                    if (Ve && (Ve = u._prettifyError(oe.path, oe.env.opts.dev, Ve), ge = !0), q)
                      ee ? x(q, Ve, Ne) : q(Ve, Ne);
                    else {
                      if (Ve)
                        throw Ve;
                      z = Ne;
                    }
                }), z;
              }, Z.getExported = function(Y, U, q) {
                typeof Y == "function" && (q = Y, Y = {}), typeof U == "function" && (q = U, U = null);
                try {
                  this.compile();
                } catch (he) {
                  if (q)
                    return q(he);
                  throw he;
                }
                var oe = U ? U.push() : new O();
                oe.topLevel = !0;
                var ee = new B(Y || {}, this.blocks, this.env);
                this.rootRenderFunc(this.env, ee, oe, D, function(he) {
                  he ? q(he, null) : q(null, ee.getExported());
                });
              }, Z.compile = function() {
                this.compiled || this._compile();
              }, Z._compile = function() {
                var Y;
                if (this.tmplProps)
                  Y = this.tmplProps;
                else {
                  var U = f.compile(this.tmplStr, this.env.asyncFilters, this.env.extensionsList, this.path, this.env.opts), q = new Function(U);
                  Y = q();
                }
                this.blocks = this._getBlocks(Y), this.rootRenderFunc = Y.root, this.compiled = !0;
              }, Z._getBlocks = function(Y) {
                var U = {};
                return u.keys(Y).forEach(function(q) {
                  q.slice(0, 2) === "b_" && (U[q.slice(2)] = Y[q]);
                }), U;
              }, K;
            })(A);
            a.exports = {
              Environment: V,
              Template: F
            };
          }),
          /* 8 */
          /***/
          (function(a, r, i) {
            function o(y, p) {
              y.prototype = Object.create(p.prototype), y.prototype.constructor = y, l(y, p);
            }
            function l(y, p) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(b, v) {
                return b.__proto__ = v, b;
              }, l(y, p);
            }
            var s = i(9), d = i(3), u = i(1).Obj, f = i(0), h = /* @__PURE__ */ (function(y) {
              o(p, y);
              function p() {
                return y.apply(this, arguments) || this;
              }
              var w = p.prototype;
              return w.init = function(v) {
                this.tokens = v, this.peeked = null, this.breakOnBlocks = null, this.dropLeadingWhitespace = !1, this.extensions = [];
              }, w.nextToken = function(v) {
                var g;
                if (this.peeked)
                  if (!v && this.peeked.type === s.TOKEN_WHITESPACE)
                    this.peeked = null;
                  else
                    return g = this.peeked, this.peeked = null, g;
                if (g = this.tokens.nextToken(), !v)
                  for (; g && g.type === s.TOKEN_WHITESPACE; )
                    g = this.tokens.nextToken();
                return g;
              }, w.peekToken = function() {
                return this.peeked = this.peeked || this.nextToken(), this.peeked;
              }, w.pushToken = function(v) {
                if (this.peeked)
                  throw new Error("pushToken: can only push one token on between reads");
                this.peeked = v;
              }, w.error = function(v, g, k) {
                if (g === void 0 || k === void 0) {
                  var A = this.peekToken() || {};
                  g = A.lineno, k = A.colno;
                }
                return g !== void 0 && (g += 1), k !== void 0 && (k += 1), new f.TemplateError(v, g, k);
              }, w.fail = function(v, g, k) {
                throw this.error(v, g, k);
              }, w.skip = function(v) {
                var g = this.nextToken();
                return !g || g.type !== v ? (this.pushToken(g), !1) : !0;
              }, w.expect = function(v) {
                var g = this.nextToken();
                return g.type !== v && this.fail("expected " + v + ", got " + g.type, g.lineno, g.colno), g;
              }, w.skipValue = function(v, g) {
                var k = this.nextToken();
                return !k || k.type !== v || k.value !== g ? (this.pushToken(k), !1) : !0;
              }, w.skipSymbol = function(v) {
                return this.skipValue(s.TOKEN_SYMBOL, v);
              }, w.advanceAfterBlockEnd = function(v) {
                var g;
                return v || (g = this.peekToken(), g || this.fail("unexpected end of file"), g.type !== s.TOKEN_SYMBOL && this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"), v = this.nextToken().value), g = this.nextToken(), g && g.type === s.TOKEN_BLOCK_END ? g.value.charAt(0) === "-" && (this.dropLeadingWhitespace = !0) : this.fail("expected block end in " + v + " statement"), g;
              }, w.advanceAfterVariableEnd = function() {
                var v = this.nextToken();
                v && v.type === s.TOKEN_VARIABLE_END ? this.dropLeadingWhitespace = v.value.charAt(v.value.length - this.tokens.tags.VARIABLE_END.length - 1) === "-" : (this.pushToken(v), this.fail("expected variable end"));
              }, w.parseFor = function() {
                var v = this.peekToken(), g, k;
                this.skipSymbol("for") ? (g = new d.For(v.lineno, v.colno), k = "endfor") : this.skipSymbol("asyncEach") ? (g = new d.AsyncEach(v.lineno, v.colno), k = "endeach") : this.skipSymbol("asyncAll") ? (g = new d.AsyncAll(v.lineno, v.colno), k = "endall") : this.fail("parseFor: expected for{Async}", v.lineno, v.colno), g.name = this.parsePrimary(), g.name instanceof d.Symbol || this.fail("parseFor: variable name expected for loop");
                var A = this.peekToken().type;
                if (A === s.TOKEN_COMMA) {
                  var C = g.name;
                  for (g.name = new d.Array(C.lineno, C.colno), g.name.addChild(C); this.skip(s.TOKEN_COMMA); ) {
                    var D = this.parsePrimary();
                    g.name.addChild(D);
                  }
                }
                return this.skipSymbol("in") || this.fail('parseFor: expected "in" keyword for loop', v.lineno, v.colno), g.arr = this.parseExpression(), this.advanceAfterBlockEnd(v.value), g.body = this.parseUntilBlocks(k, "else"), this.skipSymbol("else") && (this.advanceAfterBlockEnd("else"), g.else_ = this.parseUntilBlocks(k)), this.advanceAfterBlockEnd(), g;
              }, w.parseMacro = function() {
                var v = this.peekToken();
                this.skipSymbol("macro") || this.fail("expected macro");
                var g = this.parsePrimary(!0), k = this.parseSignature(), A = new d.Macro(v.lineno, v.colno, g, k);
                return this.advanceAfterBlockEnd(v.value), A.body = this.parseUntilBlocks("endmacro"), this.advanceAfterBlockEnd(), A;
              }, w.parseCall = function() {
                var v = this.peekToken();
                this.skipSymbol("call") || this.fail("expected call");
                var g = this.parseSignature(!0) || new d.NodeList(), k = this.parsePrimary();
                this.advanceAfterBlockEnd(v.value);
                var A = this.parseUntilBlocks("endcall");
                this.advanceAfterBlockEnd();
                var C = new d.Symbol(v.lineno, v.colno, "caller"), D = new d.Caller(v.lineno, v.colno, C, g, A), P = k.args.children;
                P[P.length - 1] instanceof d.KeywordArgs || P.push(new d.KeywordArgs());
                var O = P[P.length - 1];
                return O.addChild(new d.Pair(v.lineno, v.colno, C, D)), new d.Output(v.lineno, v.colno, [k]);
              }, w.parseWithContext = function() {
                var v = this.peekToken(), g = null;
                return this.skipSymbol("with") ? g = !0 : this.skipSymbol("without") && (g = !1), g !== null && (this.skipSymbol("context") || this.fail("parseFrom: expected context after with/without", v.lineno, v.colno)), g;
              }, w.parseImport = function() {
                var v = this.peekToken();
                this.skipSymbol("import") || this.fail("parseImport: expected import", v.lineno, v.colno);
                var g = this.parseExpression();
                this.skipSymbol("as") || this.fail('parseImport: expected "as" keyword', v.lineno, v.colno);
                var k = this.parseExpression(), A = this.parseWithContext(), C = new d.Import(v.lineno, v.colno, g, k, A);
                return this.advanceAfterBlockEnd(v.value), C;
              }, w.parseFrom = function() {
                var v = this.peekToken();
                this.skipSymbol("from") || this.fail("parseFrom: expected from");
                var g = this.parseExpression();
                this.skipSymbol("import") || this.fail("parseFrom: expected import", v.lineno, v.colno);
                for (var k = new d.NodeList(), A; ; ) {
                  var C = this.peekToken();
                  if (C.type === s.TOKEN_BLOCK_END) {
                    k.children.length || this.fail("parseFrom: Expected at least one import name", v.lineno, v.colno), C.value.charAt(0) === "-" && (this.dropLeadingWhitespace = !0), this.nextToken();
                    break;
                  }
                  k.children.length > 0 && !this.skip(s.TOKEN_COMMA) && this.fail("parseFrom: expected comma", v.lineno, v.colno);
                  var D = this.parsePrimary();
                  if (D.value.charAt(0) === "_" && this.fail("parseFrom: names starting with an underscore cannot be imported", D.lineno, D.colno), this.skipSymbol("as")) {
                    var P = this.parsePrimary();
                    k.addChild(new d.Pair(D.lineno, D.colno, D, P));
                  } else
                    k.addChild(D);
                  A = this.parseWithContext();
                }
                return new d.FromImport(v.lineno, v.colno, g, k, A);
              }, w.parseBlock = function() {
                var v = this.peekToken();
                this.skipSymbol("block") || this.fail("parseBlock: expected block", v.lineno, v.colno);
                var g = new d.Block(v.lineno, v.colno);
                g.name = this.parsePrimary(), g.name instanceof d.Symbol || this.fail("parseBlock: variable name expected", v.lineno, v.colno), this.advanceAfterBlockEnd(v.value), g.body = this.parseUntilBlocks("endblock"), this.skipSymbol("endblock"), this.skipSymbol(g.name.value);
                var k = this.peekToken();
                return k || this.fail("parseBlock: expected endblock, got end of file"), this.advanceAfterBlockEnd(k.value), g;
              }, w.parseExtends = function() {
                var v = "extends", g = this.peekToken();
                this.skipSymbol(v) || this.fail("parseTemplateRef: expected " + v);
                var k = new d.Extends(g.lineno, g.colno);
                return k.template = this.parseExpression(), this.advanceAfterBlockEnd(g.value), k;
              }, w.parseInclude = function() {
                var v = "include", g = this.peekToken();
                this.skipSymbol(v) || this.fail("parseInclude: expected " + v);
                var k = new d.Include(g.lineno, g.colno);
                return k.template = this.parseExpression(), this.skipSymbol("ignore") && this.skipSymbol("missing") && (k.ignoreMissing = !0), this.advanceAfterBlockEnd(g.value), k;
              }, w.parseIf = function() {
                var v = this.peekToken(), g;
                this.skipSymbol("if") || this.skipSymbol("elif") || this.skipSymbol("elseif") ? g = new d.If(v.lineno, v.colno) : this.skipSymbol("ifAsync") ? g = new d.IfAsync(v.lineno, v.colno) : this.fail("parseIf: expected if, elif, or elseif", v.lineno, v.colno), g.cond = this.parseExpression(), this.advanceAfterBlockEnd(v.value), g.body = this.parseUntilBlocks("elif", "elseif", "else", "endif");
                var k = this.peekToken();
                switch (k && k.value) {
                  case "elseif":
                  case "elif":
                    g.else_ = this.parseIf();
                    break;
                  case "else":
                    this.advanceAfterBlockEnd(), g.else_ = this.parseUntilBlocks("endif"), this.advanceAfterBlockEnd();
                    break;
                  case "endif":
                    g.else_ = null, this.advanceAfterBlockEnd();
                    break;
                  default:
                    this.fail("parseIf: expected elif, else, or endif, got end of file");
                }
                return g;
              }, w.parseSet = function() {
                var v = this.peekToken();
                this.skipSymbol("set") || this.fail("parseSet: expected set", v.lineno, v.colno);
                for (var g = new d.Set(v.lineno, v.colno, []), k; (k = this.parsePrimary()) && (g.targets.push(k), !!this.skip(s.TOKEN_COMMA)); )
                  ;
                return this.skipValue(s.TOKEN_OPERATOR, "=") ? (g.value = this.parseExpression(), this.advanceAfterBlockEnd(v.value)) : this.skip(s.TOKEN_BLOCK_END) ? (g.body = new d.Capture(v.lineno, v.colno, this.parseUntilBlocks("endset")), g.value = null, this.advanceAfterBlockEnd()) : this.fail("parseSet: expected = or block end in set tag", v.lineno, v.colno), g;
              }, w.parseSwitch = function() {
                var v = "switch", g = "endswitch", k = "case", A = "default", C = this.peekToken();
                !this.skipSymbol(v) && !this.skipSymbol(k) && !this.skipSymbol(A) && this.fail('parseSwitch: expected "switch," "case" or "default"', C.lineno, C.colno);
                var D = this.parseExpression();
                this.advanceAfterBlockEnd(v), this.parseUntilBlocks(k, A, g);
                var P = this.peekToken(), O = [], I;
                do {
                  this.skipSymbol(k);
                  var x = this.parseExpression();
                  this.advanceAfterBlockEnd(v);
                  var M = this.parseUntilBlocks(k, A, g);
                  O.push(new d.Case(P.line, P.col, x, M)), P = this.peekToken();
                } while (P && P.value === k);
                switch (P.value) {
                  case A:
                    this.advanceAfterBlockEnd(), I = this.parseUntilBlocks(g), this.advanceAfterBlockEnd();
                    break;
                  case g:
                    this.advanceAfterBlockEnd();
                    break;
                  default:
                    this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.');
                }
                return new d.Switch(C.lineno, C.colno, D, O, I);
              }, w.parseStatement = function() {
                var v = this.peekToken(), g;
                if (v.type !== s.TOKEN_SYMBOL && this.fail("tag name expected", v.lineno, v.colno), this.breakOnBlocks && f.indexOf(this.breakOnBlocks, v.value) !== -1)
                  return null;
                switch (v.value) {
                  case "raw":
                    return this.parseRaw();
                  case "verbatim":
                    return this.parseRaw("verbatim");
                  case "if":
                  case "ifAsync":
                    return this.parseIf();
                  case "for":
                  case "asyncEach":
                  case "asyncAll":
                    return this.parseFor();
                  case "block":
                    return this.parseBlock();
                  case "extends":
                    return this.parseExtends();
                  case "include":
                    return this.parseInclude();
                  case "set":
                    return this.parseSet();
                  case "macro":
                    return this.parseMacro();
                  case "call":
                    return this.parseCall();
                  case "import":
                    return this.parseImport();
                  case "from":
                    return this.parseFrom();
                  case "filter":
                    return this.parseFilterStatement();
                  case "switch":
                    return this.parseSwitch();
                  default:
                    if (this.extensions.length)
                      for (var k = 0; k < this.extensions.length; k++) {
                        var A = this.extensions[k];
                        if (f.indexOf(A.tags || [], v.value) !== -1)
                          return A.parse(this, d, s);
                      }
                    this.fail("unknown block tag: " + v.value, v.lineno, v.colno);
                }
                return g;
              }, w.parseRaw = function(v) {
                v = v || "raw";
                for (var g = "end" + v, k = new RegExp("([\\s\\S]*?){%\\s*(" + v + "|" + g + ")\\s*(?=%})%}"), A = 1, C = "", D = null, P = this.advanceAfterBlockEnd(); (D = this.tokens._extractRegex(k)) && A > 0; ) {
                  var O = D[0], I = D[1], x = D[2];
                  x === v ? A += 1 : x === g && (A -= 1), A === 0 ? (C += I, this.tokens.backN(O.length - I.length)) : C += O;
                }
                return new d.Output(P.lineno, P.colno, [new d.TemplateData(P.lineno, P.colno, C)]);
              }, w.parsePostfix = function(v) {
                for (var g, k = this.peekToken(); k; ) {
                  if (k.type === s.TOKEN_LEFT_PAREN)
                    v = new d.FunCall(k.lineno, k.colno, v, this.parseSignature());
                  else if (k.type === s.TOKEN_LEFT_BRACKET)
                    g = this.parseAggregate(), g.children.length > 1 && this.fail("invalid index"), v = new d.LookupVal(k.lineno, k.colno, v, g.children[0]);
                  else if (k.type === s.TOKEN_OPERATOR && k.value === ".") {
                    this.nextToken();
                    var A = this.nextToken();
                    A.type !== s.TOKEN_SYMBOL && this.fail("expected name as lookup value, got " + A.value, A.lineno, A.colno), g = new d.Literal(A.lineno, A.colno, A.value), v = new d.LookupVal(k.lineno, k.colno, v, g);
                  } else
                    break;
                  k = this.peekToken();
                }
                return v;
              }, w.parseExpression = function() {
                var v = this.parseInlineIf();
                return v;
              }, w.parseInlineIf = function() {
                var v = this.parseOr();
                if (this.skipSymbol("if")) {
                  var g = this.parseOr(), k = v;
                  v = new d.InlineIf(v.lineno, v.colno), v.body = k, v.cond = g, this.skipSymbol("else") ? v.else_ = this.parseOr() : v.else_ = null;
                }
                return v;
              }, w.parseOr = function() {
                for (var v = this.parseAnd(); this.skipSymbol("or"); ) {
                  var g = this.parseAnd();
                  v = new d.Or(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseAnd = function() {
                for (var v = this.parseNot(); this.skipSymbol("and"); ) {
                  var g = this.parseNot();
                  v = new d.And(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseNot = function() {
                var v = this.peekToken();
                return this.skipSymbol("not") ? new d.Not(v.lineno, v.colno, this.parseNot()) : this.parseIn();
              }, w.parseIn = function() {
                for (var v = this.parseIs(); ; ) {
                  var g = this.nextToken();
                  if (!g)
                    break;
                  var k = g.type === s.TOKEN_SYMBOL && g.value === "not";
                  if (k || this.pushToken(g), this.skipSymbol("in")) {
                    var A = this.parseIs();
                    v = new d.In(v.lineno, v.colno, v, A), k && (v = new d.Not(v.lineno, v.colno, v));
                  } else {
                    k && this.pushToken(g);
                    break;
                  }
                }
                return v;
              }, w.parseIs = function() {
                var v = this.parseCompare();
                if (this.skipSymbol("is")) {
                  var g = this.skipSymbol("not"), k = this.parseCompare();
                  v = new d.Is(v.lineno, v.colno, v, k), g && (v = new d.Not(v.lineno, v.colno, v));
                }
                return v;
              }, w.parseCompare = function() {
                for (var v = ["==", "===", "!=", "!==", "<", ">", "<=", ">="], g = this.parseConcat(), k = []; ; ) {
                  var A = this.nextToken();
                  if (A)
                    if (v.indexOf(A.value) !== -1)
                      k.push(new d.CompareOperand(A.lineno, A.colno, this.parseConcat(), A.value));
                    else {
                      this.pushToken(A);
                      break;
                    }
                  else break;
                }
                return k.length ? new d.Compare(k[0].lineno, k[0].colno, g, k) : g;
              }, w.parseConcat = function() {
                for (var v = this.parseAdd(); this.skipValue(s.TOKEN_TILDE, "~"); ) {
                  var g = this.parseAdd();
                  v = new d.Concat(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseAdd = function() {
                for (var v = this.parseSub(); this.skipValue(s.TOKEN_OPERATOR, "+"); ) {
                  var g = this.parseSub();
                  v = new d.Add(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseSub = function() {
                for (var v = this.parseMul(); this.skipValue(s.TOKEN_OPERATOR, "-"); ) {
                  var g = this.parseMul();
                  v = new d.Sub(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseMul = function() {
                for (var v = this.parseDiv(); this.skipValue(s.TOKEN_OPERATOR, "*"); ) {
                  var g = this.parseDiv();
                  v = new d.Mul(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseDiv = function() {
                for (var v = this.parseFloorDiv(); this.skipValue(s.TOKEN_OPERATOR, "/"); ) {
                  var g = this.parseFloorDiv();
                  v = new d.Div(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseFloorDiv = function() {
                for (var v = this.parseMod(); this.skipValue(s.TOKEN_OPERATOR, "//"); ) {
                  var g = this.parseMod();
                  v = new d.FloorDiv(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseMod = function() {
                for (var v = this.parsePow(); this.skipValue(s.TOKEN_OPERATOR, "%"); ) {
                  var g = this.parsePow();
                  v = new d.Mod(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parsePow = function() {
                for (var v = this.parseUnary(); this.skipValue(s.TOKEN_OPERATOR, "**"); ) {
                  var g = this.parseUnary();
                  v = new d.Pow(v.lineno, v.colno, v, g);
                }
                return v;
              }, w.parseUnary = function(v) {
                var g = this.peekToken(), k;
                return this.skipValue(s.TOKEN_OPERATOR, "-") ? k = new d.Neg(g.lineno, g.colno, this.parseUnary(!0)) : this.skipValue(s.TOKEN_OPERATOR, "+") ? k = new d.Pos(g.lineno, g.colno, this.parseUnary(!0)) : k = this.parsePrimary(), v || (k = this.parseFilter(k)), k;
              }, w.parsePrimary = function(v) {
                var g = this.nextToken(), k, A = null;
                if (g ? g.type === s.TOKEN_STRING ? k = g.value : g.type === s.TOKEN_INT ? k = parseInt(g.value, 10) : g.type === s.TOKEN_FLOAT ? k = parseFloat(g.value) : g.type === s.TOKEN_BOOLEAN ? g.value === "true" ? k = !0 : g.value === "false" ? k = !1 : this.fail("invalid boolean: " + g.value, g.lineno, g.colno) : g.type === s.TOKEN_NONE ? k = null : g.type === s.TOKEN_REGEX && (k = new RegExp(g.value.body, g.value.flags)) : this.fail("expected expression, got end of file"), k !== void 0 ? A = new d.Literal(g.lineno, g.colno, k) : g.type === s.TOKEN_SYMBOL ? A = new d.Symbol(g.lineno, g.colno, g.value) : (this.pushToken(g), A = this.parseAggregate()), v || (A = this.parsePostfix(A)), A)
                  return A;
                throw this.error("unexpected token: " + g.value, g.lineno, g.colno);
              }, w.parseFilterName = function() {
                for (var v = this.expect(s.TOKEN_SYMBOL), g = v.value; this.skipValue(s.TOKEN_OPERATOR, "."); )
                  g += "." + this.expect(s.TOKEN_SYMBOL).value;
                return new d.Symbol(v.lineno, v.colno, g);
              }, w.parseFilterArgs = function(v) {
                if (this.peekToken().type === s.TOKEN_LEFT_PAREN) {
                  var g = this.parsePostfix(v);
                  return g.args.children;
                }
                return [];
              }, w.parseFilter = function(v) {
                for (; this.skip(s.TOKEN_PIPE); ) {
                  var g = this.parseFilterName();
                  v = new d.Filter(g.lineno, g.colno, g, new d.NodeList(g.lineno, g.colno, [v].concat(this.parseFilterArgs(v))));
                }
                return v;
              }, w.parseFilterStatement = function() {
                var v = this.peekToken();
                this.skipSymbol("filter") || this.fail("parseFilterStatement: expected filter");
                var g = this.parseFilterName(), k = this.parseFilterArgs(g);
                this.advanceAfterBlockEnd(v.value);
                var A = new d.Capture(g.lineno, g.colno, this.parseUntilBlocks("endfilter"));
                this.advanceAfterBlockEnd();
                var C = new d.Filter(g.lineno, g.colno, g, new d.NodeList(g.lineno, g.colno, [A].concat(k)));
                return new d.Output(g.lineno, g.colno, [C]);
              }, w.parseAggregate = function() {
                var v = this.nextToken(), g;
                switch (v.type) {
                  case s.TOKEN_LEFT_PAREN:
                    g = new d.Group(v.lineno, v.colno);
                    break;
                  case s.TOKEN_LEFT_BRACKET:
                    g = new d.Array(v.lineno, v.colno);
                    break;
                  case s.TOKEN_LEFT_CURLY:
                    g = new d.Dict(v.lineno, v.colno);
                    break;
                  default:
                    return null;
                }
                for (; ; ) {
                  var k = this.peekToken().type;
                  if (k === s.TOKEN_RIGHT_PAREN || k === s.TOKEN_RIGHT_BRACKET || k === s.TOKEN_RIGHT_CURLY) {
                    this.nextToken();
                    break;
                  }
                  if (g.children.length > 0 && (this.skip(s.TOKEN_COMMA) || this.fail("parseAggregate: expected comma after expression", v.lineno, v.colno)), g instanceof d.Dict) {
                    var A = this.parsePrimary();
                    this.skip(s.TOKEN_COLON) || this.fail("parseAggregate: expected colon after dict key", v.lineno, v.colno);
                    var C = this.parseExpression();
                    g.addChild(new d.Pair(A.lineno, A.colno, A, C));
                  } else {
                    var D = this.parseExpression();
                    g.addChild(D);
                  }
                }
                return g;
              }, w.parseSignature = function(v, g) {
                var k = this.peekToken();
                if (!g && k.type !== s.TOKEN_LEFT_PAREN) {
                  if (v)
                    return null;
                  this.fail("expected arguments", k.lineno, k.colno);
                }
                k.type === s.TOKEN_LEFT_PAREN && (k = this.nextToken());
                for (var A = new d.NodeList(k.lineno, k.colno), C = new d.KeywordArgs(k.lineno, k.colno), D = !1; ; ) {
                  if (k = this.peekToken(), !g && k.type === s.TOKEN_RIGHT_PAREN) {
                    this.nextToken();
                    break;
                  } else if (g && k.type === s.TOKEN_BLOCK_END)
                    break;
                  if (D && !this.skip(s.TOKEN_COMMA))
                    this.fail("parseSignature: expected comma after expression", k.lineno, k.colno);
                  else {
                    var P = this.parseExpression();
                    this.skipValue(s.TOKEN_OPERATOR, "=") ? C.addChild(new d.Pair(P.lineno, P.colno, P, this.parseExpression())) : A.addChild(P);
                  }
                  D = !0;
                }
                return C.children.length && A.addChild(C), A;
              }, w.parseUntilBlocks = function() {
                for (var v = this.breakOnBlocks, g = arguments.length, k = new Array(g), A = 0; A < g; A++)
                  k[A] = arguments[A];
                this.breakOnBlocks = k;
                var C = this.parse();
                return this.breakOnBlocks = v, C;
              }, w.parseNodes = function() {
                for (var v, g = []; v = this.nextToken(); )
                  if (v.type === s.TOKEN_DATA) {
                    var k = v.value, A = this.peekToken(), C = A && A.value;
                    this.dropLeadingWhitespace && (k = k.replace(/^\s*/, ""), this.dropLeadingWhitespace = !1), A && (A.type === s.TOKEN_BLOCK_START && C.charAt(C.length - 1) === "-" || A.type === s.TOKEN_VARIABLE_START && C.charAt(this.tokens.tags.VARIABLE_START.length) === "-" || A.type === s.TOKEN_COMMENT && C.charAt(this.tokens.tags.COMMENT_START.length) === "-") && (k = k.replace(/\s*$/, "")), g.push(new d.Output(v.lineno, v.colno, [new d.TemplateData(v.lineno, v.colno, k)]));
                  } else if (v.type === s.TOKEN_BLOCK_START) {
                    this.dropLeadingWhitespace = !1;
                    var D = this.parseStatement();
                    if (!D)
                      break;
                    g.push(D);
                  } else if (v.type === s.TOKEN_VARIABLE_START) {
                    var P = this.parseExpression();
                    this.dropLeadingWhitespace = !1, this.advanceAfterVariableEnd(), g.push(new d.Output(v.lineno, v.colno, [P]));
                  } else v.type === s.TOKEN_COMMENT ? this.dropLeadingWhitespace = v.value.charAt(v.value.length - this.tokens.tags.COMMENT_END.length - 1) === "-" : this.fail("Unexpected token at top-level: " + v.type, v.lineno, v.colno);
                return g;
              }, w.parse = function() {
                return new d.NodeList(0, 0, this.parseNodes());
              }, w.parseAsRoot = function() {
                return new d.Root(0, 0, this.parseNodes());
              }, p;
            })(u);
            a.exports = {
              parse: function(p, w, b) {
                var v = new h(s.lex(p, b));
                return w !== void 0 && (v.extensions = w), v.parseAsRoot();
              },
              Parser: h
            };
          }),
          /* 9 */
          /***/
          (function(a, r, i) {
            var o = i(0), l = ` 
	\r `, s = "()[]{}%*-+~/#,:|.<>=!", d = "0123456789", u = "{%", f = "%}", h = "{{", y = "}}", p = "{#", w = "#}", b = "string", v = "whitespace", g = "data", k = "block-start", A = "block-end", C = "variable-start", D = "variable-end", P = "comment", O = "left-paren", I = "right-paren", x = "left-bracket", M = "right-bracket", V = "left-curly", B = "right-curly", F = "operator", H = "comma", K = "colon", Z = "tilde", ue = "pipe", Y = "int", U = "float", q = "boolean", oe = "none", ee = "symbol", he = "special", ve = "regex";
            function pe(ge, Ve, Ne, ce) {
              return {
                type: ge,
                value: Ve,
                lineno: Ne,
                colno: ce
              };
            }
            var z = /* @__PURE__ */ (function() {
              function ge(Ne, ce) {
                this.str = Ne, this.index = 0, this.len = Ne.length, this.lineno = 0, this.colno = 0, this.in_code = !1, ce = ce || {};
                var ne = ce.tags || {};
                this.tags = {
                  BLOCK_START: ne.blockStart || u,
                  BLOCK_END: ne.blockEnd || f,
                  VARIABLE_START: ne.variableStart || h,
                  VARIABLE_END: ne.variableEnd || y,
                  COMMENT_START: ne.commentStart || p,
                  COMMENT_END: ne.commentEnd || w
                }, this.trimBlocks = !!ce.trimBlocks, this.lstripBlocks = !!ce.lstripBlocks;
              }
              var Ve = ge.prototype;
              return Ve.nextToken = function() {
                var ce = this.lineno, ne = this.colno, Q;
                if (this.in_code) {
                  var le = this.current();
                  if (this.isFinished())
                    return null;
                  if (le === '"' || le === "'")
                    return pe(b, this._parseString(le), ce, ne);
                  if (Q = this._extract(l))
                    return pe(v, Q, ce, ne);
                  if ((Q = this._extractString(this.tags.BLOCK_END)) || (Q = this._extractString("-" + this.tags.BLOCK_END)))
                    return this.in_code = !1, this.trimBlocks && (le = this.current(), le === `
` ? this.forward() : le === "\r" && (this.forward(), le = this.current(), le === `
` ? this.forward() : this.back())), pe(A, Q, ce, ne);
                  if ((Q = this._extractString(this.tags.VARIABLE_END)) || (Q = this._extractString("-" + this.tags.VARIABLE_END)))
                    return this.in_code = !1, pe(D, Q, ce, ne);
                  if (le === "r" && this.str.charAt(this.index + 1) === "/") {
                    this.forwardN(2);
                    for (var G = ""; !this.isFinished(); )
                      if (this.current() === "/" && this.previous() !== "\\") {
                        this.forward();
                        break;
                      } else
                        G += this.current(), this.forward();
                    for (var Ce = ["g", "i", "m", "y"], Ie = ""; !this.isFinished(); ) {
                      var ie = Ce.indexOf(this.current()) !== -1;
                      if (ie)
                        Ie += this.current(), this.forward();
                      else
                        break;
                    }
                    return pe(ve, {
                      body: G,
                      flags: Ie
                    }, ce, ne);
                  } else if (s.indexOf(le) !== -1) {
                    this.forward();
                    var we = ["==", "===", "!=", "!==", "<=", ">=", "//", "**"], Ee = le + this.current(), Pe;
                    switch (o.indexOf(we, Ee) !== -1 && (this.forward(), le = Ee, o.indexOf(we, Ee + this.current()) !== -1 && (le = Ee + this.current(), this.forward())), le) {
                      case "(":
                        Pe = O;
                        break;
                      case ")":
                        Pe = I;
                        break;
                      case "[":
                        Pe = x;
                        break;
                      case "]":
                        Pe = M;
                        break;
                      case "{":
                        Pe = V;
                        break;
                      case "}":
                        Pe = B;
                        break;
                      case ",":
                        Pe = H;
                        break;
                      case ":":
                        Pe = K;
                        break;
                      case "~":
                        Pe = Z;
                        break;
                      case "|":
                        Pe = ue;
                        break;
                      default:
                        Pe = F;
                    }
                    return pe(Pe, le, ce, ne);
                  } else if (Q = this._extractUntil(l + s), Q.match(/^[-+]?[0-9]+$/))
                    if (this.current() === ".") {
                      this.forward();
                      var Xe = this._extract(d);
                      return pe(U, Q + "." + Xe, ce, ne);
                    } else
                      return pe(Y, Q, ce, ne);
                  else {
                    if (Q.match(/^(true|false)$/))
                      return pe(q, Q, ce, ne);
                    if (Q === "none")
                      return pe(oe, Q, ce, ne);
                    if (Q === "null")
                      return pe(oe, Q, ce, ne);
                    if (Q)
                      return pe(ee, Q, ce, ne);
                    throw new Error("Unexpected value while parsing: " + Q);
                  }
                } else {
                  var _e = this.tags.BLOCK_START.charAt(0) + this.tags.VARIABLE_START.charAt(0) + this.tags.COMMENT_START.charAt(0) + this.tags.COMMENT_END.charAt(0);
                  if (this.isFinished())
                    return null;
                  if ((Q = this._extractString(this.tags.BLOCK_START + "-")) || (Q = this._extractString(this.tags.BLOCK_START)))
                    return this.in_code = !0, pe(k, Q, ce, ne);
                  if ((Q = this._extractString(this.tags.VARIABLE_START + "-")) || (Q = this._extractString(this.tags.VARIABLE_START)))
                    return this.in_code = !0, pe(C, Q, ce, ne);
                  Q = "";
                  var qe, Ze = !1;
                  for (this._matches(this.tags.COMMENT_START) && (Ze = !0, Q = this._extractString(this.tags.COMMENT_START)); (qe = this._extractUntil(_e)) !== null; )
                    if (Q += qe, (this._matches(this.tags.BLOCK_START) || this._matches(this.tags.VARIABLE_START) || this._matches(this.tags.COMMENT_START)) && !Ze) {
                      if (this.lstripBlocks && this._matches(this.tags.BLOCK_START) && this.colno > 0 && this.colno <= Q.length) {
                        var _t = Q.slice(-this.colno);
                        if (/^\s+$/.test(_t) && (Q = Q.slice(0, -this.colno), !Q.length))
                          return this.nextToken();
                      }
                      break;
                    } else if (this._matches(this.tags.COMMENT_END)) {
                      if (!Ze)
                        throw new Error("unexpected end of comment");
                      Q += this._extractString(this.tags.COMMENT_END);
                      break;
                    } else
                      Q += this.current(), this.forward();
                  if (qe === null && Ze)
                    throw new Error("expected end of comment, got end of file");
                  return pe(Ze ? P : g, Q, ce, ne);
                }
              }, Ve._parseString = function(ce) {
                this.forward();
                for (var ne = ""; !this.isFinished() && this.current() !== ce; ) {
                  var Q = this.current();
                  if (Q === "\\") {
                    switch (this.forward(), this.current()) {
                      case "n":
                        ne += `
`;
                        break;
                      case "t":
                        ne += "	";
                        break;
                      case "r":
                        ne += "\r";
                        break;
                      default:
                        ne += this.current();
                    }
                    this.forward();
                  } else
                    ne += Q, this.forward();
                }
                return this.forward(), ne;
              }, Ve._matches = function(ce) {
                if (this.index + ce.length > this.len)
                  return null;
                var ne = this.str.slice(this.index, this.index + ce.length);
                return ne === ce;
              }, Ve._extractString = function(ce) {
                return this._matches(ce) ? (this.forwardN(ce.length), ce) : null;
              }, Ve._extractUntil = function(ce) {
                return this._extractMatching(!0, ce || "");
              }, Ve._extract = function(ce) {
                return this._extractMatching(!1, ce);
              }, Ve._extractMatching = function(ce, ne) {
                if (this.isFinished())
                  return null;
                var Q = ne.indexOf(this.current());
                if (ce && Q === -1 || !ce && Q !== -1) {
                  var le = this.current();
                  this.forward();
                  for (var G = ne.indexOf(this.current()); (ce && G === -1 || !ce && G !== -1) && !this.isFinished(); )
                    le += this.current(), this.forward(), G = ne.indexOf(this.current());
                  return le;
                }
                return "";
              }, Ve._extractRegex = function(ce) {
                var ne = this.currentStr().match(ce);
                return ne ? (this.forwardN(ne[0].length), ne) : null;
              }, Ve.isFinished = function() {
                return this.index >= this.len;
              }, Ve.forwardN = function(ce) {
                for (var ne = 0; ne < ce; ne++)
                  this.forward();
              }, Ve.forward = function() {
                this.index++, this.previous() === `
` ? (this.lineno++, this.colno = 0) : this.colno++;
              }, Ve.backN = function(ce) {
                for (var ne = 0; ne < ce; ne++)
                  this.back();
              }, Ve.back = function() {
                if (this.index--, this.current() === `
`) {
                  this.lineno--;
                  var ce = this.src.lastIndexOf(`
`, this.index - 1);
                  ce === -1 ? this.colno = this.index : this.colno = this.index - ce;
                } else
                  this.colno--;
              }, Ve.current = function() {
                return this.isFinished() ? "" : this.str.charAt(this.index);
              }, Ve.currentStr = function() {
                return this.isFinished() ? "" : this.str.substr(this.index);
              }, Ve.previous = function() {
                return this.str.charAt(this.index - 1);
              }, ge;
            })();
            a.exports = {
              lex: function(Ve, Ne) {
                return new z(Ve, Ne);
              },
              TOKEN_STRING: b,
              TOKEN_WHITESPACE: v,
              TOKEN_DATA: g,
              TOKEN_BLOCK_START: k,
              TOKEN_BLOCK_END: A,
              TOKEN_VARIABLE_START: C,
              TOKEN_VARIABLE_END: D,
              TOKEN_COMMENT: P,
              TOKEN_LEFT_PAREN: O,
              TOKEN_RIGHT_PAREN: I,
              TOKEN_LEFT_BRACKET: x,
              TOKEN_RIGHT_BRACKET: M,
              TOKEN_LEFT_CURLY: V,
              TOKEN_RIGHT_CURLY: B,
              TOKEN_OPERATOR: F,
              TOKEN_COMMA: H,
              TOKEN_COLON: K,
              TOKEN_TILDE: Z,
              TOKEN_PIPE: ue,
              TOKEN_INT: Y,
              TOKEN_FLOAT: U,
              TOKEN_BOOLEAN: q,
              TOKEN_NONE: oe,
              TOKEN_SYMBOL: ee,
              TOKEN_SPECIAL: he,
              TOKEN_REGEX: ve
            };
          }),
          /* 10 */
          /***/
          (function(a, r, i) {
            function o(h, y) {
              h.prototype = Object.create(y.prototype), h.prototype.constructor = h, l(h, y);
            }
            function l(h, y) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(w, b) {
                return w.__proto__ = b, w;
              }, l(h, y);
            }
            var s = i(6), d = i(19), u = d.PrecompiledLoader, f = /* @__PURE__ */ (function(h) {
              o(y, h);
              function y(w, b) {
                var v;
                return v = h.call(this) || this, v.baseURL = w || ".", b = b || {}, v.useCache = !!b.useCache, v.async = !!b.async, v;
              }
              var p = y.prototype;
              return p.resolve = function(b, v) {
                throw new Error("relative templates not support in the browser yet");
              }, p.getSource = function(b, v) {
                var g = this, k = this.useCache, A;
                return this.fetch(this.baseURL + "/" + b, function(C, D) {
                  if (C)
                    if (v)
                      v(C.content);
                    else if (C.status === 404)
                      A = null;
                    else
                      throw C.content;
                  else
                    A = {
                      src: D,
                      path: b,
                      noCache: !k
                    }, g.emit("load", b, A), v && v(null, A);
                }), A;
              }, p.fetch = function(b, v) {
                if (typeof window > "u")
                  throw new Error("WebLoader can only by used in a browser");
                var g = new XMLHttpRequest(), k = !0;
                g.onreadystatechange = function() {
                  g.readyState === 4 && k && (k = !1, g.status === 0 || g.status === 200 ? v(null, g.responseText) : v({
                    status: g.status,
                    content: g.responseText
                  }));
                }, b += (b.indexOf("?") === -1 ? "?" : "&") + "s=" + (/* @__PURE__ */ new Date()).getTime(), g.open("GET", b, this.async), g.send();
              }, y;
            })(s);
            a.exports = {
              WebLoader: f,
              PrecompiledLoader: u
            };
          }),
          /* 11 */
          /***/
          (function(a, r, i) {
            var o = i(0), l = i(7), s = l.Environment, d = l.Template, u = i(6), f = i(10), h = i(23), y = i(5), p = i(8), w = i(9), b = i(2), v = i(3), g = i(25), k;
            function A(C, D) {
              D = D || {}, o.isObject(C) && (D = C, C = null);
              var P;
              return f.FileSystemLoader ? P = new f.FileSystemLoader(C, {
                watch: D.watch,
                noCache: D.noCache
              }) : f.WebLoader && (P = new f.WebLoader(C, {
                useCache: D.web && D.web.useCache,
                async: D.web && D.web.async
              })), k = new s(P, D), D && D.express && k.express(D.express), k;
            }
            a.exports = {
              Environment: s,
              Template: d,
              Loader: u,
              FileSystemLoader: f.FileSystemLoader,
              NodeResolveLoader: f.NodeResolveLoader,
              PrecompiledLoader: f.PrecompiledLoader,
              WebLoader: f.WebLoader,
              compiler: y,
              parser: p,
              lexer: w,
              runtime: b,
              lib: o,
              nodes: v,
              installJinjaCompat: g,
              configure: A,
              reset: function() {
                k = void 0;
              },
              compile: function(D, P, O, I) {
                return k || A(), new d(D, P, O, I);
              },
              render: function(D, P, O) {
                return k || A(), k.render(D, P, O);
              },
              renderString: function(D, P, O) {
                return k || A(), k.renderString(D, P, O);
              },
              precompile: h ? h.precompile : void 0,
              precompileString: h ? h.precompileString : void 0
            };
          }),
          /* 12 */
          /***/
          (function(a, r, i) {
            var o = i(13), l = [], s = [], d = o.makeRequestCallFromTimer(u);
            function u() {
              if (s.length)
                throw s.shift();
            }
            a.exports = f;
            function f(y) {
              var p;
              l.length ? p = l.pop() : p = new h(), p.task = y, o(p);
            }
            function h() {
              this.task = null;
            }
            h.prototype.call = function() {
              try {
                this.task.call();
              } catch (y) {
                f.onerror ? f.onerror(y) : (s.push(y), d());
              } finally {
                this.task = null, l[l.length] = this;
              }
            };
          }),
          /* 13 */
          /***/
          (function(a, r, i) {
            (function(o) {
              a.exports = l;
              function l(v) {
                s.length || d(), s[s.length] = v;
              }
              var s = [], d, u = 0, f = 1024;
              function h() {
                for (; u < s.length; ) {
                  var v = u;
                  if (u = u + 1, s[v].call(), u > f) {
                    for (var g = 0, k = s.length - u; g < k; g++)
                      s[g] = s[g + u];
                    s.length -= u, u = 0;
                  }
                }
                s.length = 0, u = 0;
              }
              var y = typeof o < "u" ? o : self, p = y.MutationObserver || y.WebKitMutationObserver;
              typeof p == "function" ? d = w(h) : d = b(h), l.requestFlush = d;
              function w(v) {
                var g = 1, k = new p(v), A = document.createTextNode("");
                return k.observe(A, { characterData: !0 }), function() {
                  g = -g, A.data = g;
                };
              }
              function b(v) {
                return function() {
                  var k = setTimeout(C, 0), A = setInterval(C, 50);
                  function C() {
                    clearTimeout(k), clearInterval(A), v();
                  }
                };
              }
              l.makeRequestCallFromTimer = b;
            }).call(r, i(14));
          }),
          /* 14 */
          /***/
          (function(a, r) {
            var i;
            i = /* @__PURE__ */ (function() {
              return this;
            })();
            try {
              i = i || Function("return this")() || (0, eval)("this");
            } catch {
              typeof window == "object" && (i = window);
            }
            a.exports = i;
          }),
          /* 15 */
          /***/
          (function(a, r, i) {
            var o, l;
            (function(s) {
              var d = function() {
                var p = Array.prototype.slice.call(arguments);
                typeof p[0] == "function" && p[0].apply(null, p.splice(1));
              }, u = function(p) {
                typeof setImmediate == "function" ? setImmediate(p) : typeof n < "u" && n.nextTick ? n.nextTick(p) : setTimeout(p, 0);
              }, f = function(p) {
                var w = function(b) {
                  var v = function() {
                    return p.length && p[b].apply(null, arguments), v.next();
                  };
                  return v.next = function() {
                    return b < p.length - 1 ? w(b + 1) : null;
                  }, v;
                };
                return w(0);
              }, h = Array.isArray || function(p) {
                return Object.prototype.toString.call(p) === "[object Array]";
              }, y = function(p, w, b) {
                var v = b ? u : d;
                if (w = w || function() {
                }, !h(p)) {
                  var g = new Error("First argument to waterfall must be an array of functions");
                  return w(g);
                }
                if (!p.length)
                  return w();
                var k = function(A) {
                  return function(C) {
                    if (C)
                      w.apply(null, arguments), w = function() {
                      };
                    else {
                      var D = Array.prototype.slice.call(arguments, 1), P = A.next();
                      P ? D.push(k(P)) : D.push(w), v(function() {
                        A.apply(null, D);
                      });
                    }
                  };
                };
                k(f(p))();
              };
              o = [], l = (function() {
                return y;
              }).apply(r, o), l !== void 0 && (a.exports = l);
            })();
          }),
          /* 16 */
          /***/
          (function(a, r, i) {
            var o = typeof Reflect == "object" ? Reflect : null, l = o && typeof o.apply == "function" ? o.apply : function(M, V, B) {
              return Function.prototype.apply.call(M, V, B);
            }, s;
            o && typeof o.ownKeys == "function" ? s = o.ownKeys : Object.getOwnPropertySymbols ? s = function(M) {
              return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M));
            } : s = function(M) {
              return Object.getOwnPropertyNames(M);
            };
            function d(x) {
              console && console.warn && console.warn(x);
            }
            var u = Number.isNaN || function(M) {
              return M !== M;
            };
            function f() {
              f.init.call(this);
            }
            a.exports = f, a.exports.once = P, f.EventEmitter = f, f.prototype._events = void 0, f.prototype._eventsCount = 0, f.prototype._maxListeners = void 0;
            var h = 10;
            function y(x) {
              if (typeof x != "function")
                throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof x);
            }
            Object.defineProperty(f, "defaultMaxListeners", {
              enumerable: !0,
              get: function() {
                return h;
              },
              set: function(x) {
                if (typeof x != "number" || x < 0 || u(x))
                  throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + x + ".");
                h = x;
              }
            }), f.init = function() {
              (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
            }, f.prototype.setMaxListeners = function(M) {
              if (typeof M != "number" || M < 0 || u(M))
                throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + M + ".");
              return this._maxListeners = M, this;
            };
            function p(x) {
              return x._maxListeners === void 0 ? f.defaultMaxListeners : x._maxListeners;
            }
            f.prototype.getMaxListeners = function() {
              return p(this);
            }, f.prototype.emit = function(M) {
              for (var V = [], B = 1; B < arguments.length; B++) V.push(arguments[B]);
              var F = M === "error", H = this._events;
              if (H !== void 0)
                F = F && H.error === void 0;
              else if (!F)
                return !1;
              if (F) {
                var K;
                if (V.length > 0 && (K = V[0]), K instanceof Error)
                  throw K;
                var Z = new Error("Unhandled error." + (K ? " (" + K.message + ")" : ""));
                throw Z.context = K, Z;
              }
              var ue = H[M];
              if (ue === void 0)
                return !1;
              if (typeof ue == "function")
                l(ue, this, V);
              else
                for (var Y = ue.length, U = A(ue, Y), B = 0; B < Y; ++B)
                  l(U[B], this, V);
              return !0;
            };
            function w(x, M, V, B) {
              var F, H, K;
              if (y(V), H = x._events, H === void 0 ? (H = x._events = /* @__PURE__ */ Object.create(null), x._eventsCount = 0) : (H.newListener !== void 0 && (x.emit(
                "newListener",
                M,
                V.listener ? V.listener : V
              ), H = x._events), K = H[M]), K === void 0)
                K = H[M] = V, ++x._eventsCount;
              else if (typeof K == "function" ? K = H[M] = B ? [V, K] : [K, V] : B ? K.unshift(V) : K.push(V), F = p(x), F > 0 && K.length > F && !K.warned) {
                K.warned = !0;
                var Z = new Error("Possible EventEmitter memory leak detected. " + K.length + " " + String(M) + " listeners added. Use emitter.setMaxListeners() to increase limit");
                Z.name = "MaxListenersExceededWarning", Z.emitter = x, Z.type = M, Z.count = K.length, d(Z);
              }
              return x;
            }
            f.prototype.addListener = function(M, V) {
              return w(this, M, V, !1);
            }, f.prototype.on = f.prototype.addListener, f.prototype.prependListener = function(M, V) {
              return w(this, M, V, !0);
            };
            function b() {
              if (!this.fired)
                return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
            }
            function v(x, M, V) {
              var B = { fired: !1, wrapFn: void 0, target: x, type: M, listener: V }, F = b.bind(B);
              return F.listener = V, B.wrapFn = F, F;
            }
            f.prototype.once = function(M, V) {
              return y(V), this.on(M, v(this, M, V)), this;
            }, f.prototype.prependOnceListener = function(M, V) {
              return y(V), this.prependListener(M, v(this, M, V)), this;
            }, f.prototype.removeListener = function(M, V) {
              var B, F, H, K, Z;
              if (y(V), F = this._events, F === void 0)
                return this;
              if (B = F[M], B === void 0)
                return this;
              if (B === V || B.listener === V)
                --this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete F[M], F.removeListener && this.emit("removeListener", M, B.listener || V));
              else if (typeof B != "function") {
                for (H = -1, K = B.length - 1; K >= 0; K--)
                  if (B[K] === V || B[K].listener === V) {
                    Z = B[K].listener, H = K;
                    break;
                  }
                if (H < 0)
                  return this;
                H === 0 ? B.shift() : C(B, H), B.length === 1 && (F[M] = B[0]), F.removeListener !== void 0 && this.emit("removeListener", M, Z || V);
              }
              return this;
            }, f.prototype.off = f.prototype.removeListener, f.prototype.removeAllListeners = function(M) {
              var V, B, F;
              if (B = this._events, B === void 0)
                return this;
              if (B.removeListener === void 0)
                return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : B[M] !== void 0 && (--this._eventsCount === 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete B[M]), this;
              if (arguments.length === 0) {
                var H = Object.keys(B), K;
                for (F = 0; F < H.length; ++F)
                  K = H[F], K !== "removeListener" && this.removeAllListeners(K);
                return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
              }
              if (V = B[M], typeof V == "function")
                this.removeListener(M, V);
              else if (V !== void 0)
                for (F = V.length - 1; F >= 0; F--)
                  this.removeListener(M, V[F]);
              return this;
            };
            function g(x, M, V) {
              var B = x._events;
              if (B === void 0)
                return [];
              var F = B[M];
              return F === void 0 ? [] : typeof F == "function" ? V ? [F.listener || F] : [F] : V ? D(F) : A(F, F.length);
            }
            f.prototype.listeners = function(M) {
              return g(this, M, !0);
            }, f.prototype.rawListeners = function(M) {
              return g(this, M, !1);
            }, f.listenerCount = function(x, M) {
              return typeof x.listenerCount == "function" ? x.listenerCount(M) : k.call(x, M);
            }, f.prototype.listenerCount = k;
            function k(x) {
              var M = this._events;
              if (M !== void 0) {
                var V = M[x];
                if (typeof V == "function")
                  return 1;
                if (V !== void 0)
                  return V.length;
              }
              return 0;
            }
            f.prototype.eventNames = function() {
              return this._eventsCount > 0 ? s(this._events) : [];
            };
            function A(x, M) {
              for (var V = new Array(M), B = 0; B < M; ++B)
                V[B] = x[B];
              return V;
            }
            function C(x, M) {
              for (; M + 1 < x.length; M++)
                x[M] = x[M + 1];
              x.pop();
            }
            function D(x) {
              for (var M = new Array(x.length), V = 0; V < M.length; ++V)
                M[V] = x[V].listener || x[V];
              return M;
            }
            function P(x, M) {
              return new Promise(function(V, B) {
                function F(K) {
                  x.removeListener(M, H), B(K);
                }
                function H() {
                  typeof x.removeListener == "function" && x.removeListener("error", F), V([].slice.call(arguments));
                }
                I(x, M, H, { once: !0 }), M !== "error" && O(x, F, { once: !0 });
              });
            }
            function O(x, M, V) {
              typeof x.on == "function" && I(x, "error", M, V);
            }
            function I(x, M, V, B) {
              if (typeof x.on == "function")
                B.once ? x.once(M, V) : x.on(M, V);
              else if (typeof x.addEventListener == "function")
                x.addEventListener(M, function F(H) {
                  B.once && x.removeEventListener(M, F), V(H);
                });
              else
                throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof x);
            }
          }),
          /* 17 */
          /***/
          (function(a, r, i) {
            var o = i(3), l = i(0), s = 0;
            function d() {
              return "hole_" + s++;
            }
            function u(k, A) {
              for (var C = null, D = 0; D < k.length; D++) {
                var P = A(k[D]);
                P !== k[D] && (C || (C = k.slice()), C[D] = P);
              }
              return C || k;
            }
            function f(k, A, C) {
              if (!(k instanceof o.Node))
                return k;
              if (!C) {
                var D = A(k);
                if (D && D !== k)
                  return D;
              }
              if (k instanceof o.NodeList) {
                var P = u(k.children, function(V) {
                  return f(V, A, C);
                });
                P !== k.children && (k = new o[k.typename](k.lineno, k.colno, P));
              } else if (k instanceof o.CallExtension) {
                var O = f(k.args, A, C), I = u(k.contentArgs, function(V) {
                  return f(V, A, C);
                });
                (O !== k.args || I !== k.contentArgs) && (k = new o[k.typename](k.extName, k.prop, O, I));
              } else {
                var x = k.fields.map(function(V) {
                  return k[V];
                }), M = u(x, function(V) {
                  return f(V, A, C);
                });
                M !== x && (k = new o[k.typename](k.lineno, k.colno), M.forEach(function(V, B) {
                  k[k.fields[B]] = V;
                }));
              }
              return C && A(k) || k;
            }
            function h(k, A) {
              return f(k, A, !0);
            }
            function y(k, A, C) {
              var D = [], P = h(C ? k[C] : k, function(O) {
                var I;
                return O instanceof o.Block ? O : ((O instanceof o.Filter && l.indexOf(A, O.name.value) !== -1 || O instanceof o.CallExtensionAsync) && (I = new o.Symbol(O.lineno, O.colno, d()), D.push(new o.FilterAsync(O.lineno, O.colno, O.name, O.args, I))), I);
              });
              return C ? k[C] = P : k = P, D.length ? (D.push(k), new o.NodeList(k.lineno, k.colno, D)) : k;
            }
            function p(k, A) {
              return h(k, function(C) {
                return C instanceof o.Output ? y(C, A) : C instanceof o.Set ? y(C, A, "value") : C instanceof o.For ? y(C, A, "arr") : C instanceof o.If ? y(C, A, "cond") : C instanceof o.CallExtension ? y(C, A, "args") : void 0;
              });
            }
            function w(k) {
              return f(k, function(A) {
                if (A instanceof o.Block) {
                  var C = !1, D = d();
                  A.body = f(A.body, function(P) {
                    if (P instanceof o.FunCall && P.name.value === "super")
                      return C = !0, new o.Symbol(P.lineno, P.colno, D);
                  }), C && A.body.children.unshift(new o.Super(0, 0, A.name, new o.Symbol(0, 0, D)));
                }
              });
            }
            function b(k) {
              return h(k, function(A) {
                if (!(!(A instanceof o.If) && !(A instanceof o.For))) {
                  var C = !1;
                  if (f(A, function(D) {
                    if (D instanceof o.FilterAsync || D instanceof o.IfAsync || D instanceof o.AsyncEach || D instanceof o.AsyncAll || D instanceof o.CallExtensionAsync)
                      return C = !0, D;
                  }), C) {
                    if (A instanceof o.If)
                      return new o.IfAsync(A.lineno, A.colno, A.cond, A.body, A.else_);
                    if (A instanceof o.For && !(A instanceof o.AsyncAll))
                      return new o.AsyncEach(A.lineno, A.colno, A.arr, A.name, A.body, A.else_);
                  }
                }
              });
            }
            function v(k, A) {
              return b(w(p(k, A)));
            }
            function g(k, A) {
              return v(k, A || []);
            }
            a.exports = {
              transform: g
            };
          }),
          /* 18 */
          /***/
          (function(a, s, i) {
            var o = i(0), l = i(2), s = a.exports = {};
            function d(ie, we) {
              return ie == null || ie === !1 ? we : ie;
            }
            s.abs = Math.abs;
            function u(ie) {
              return ie !== ie;
            }
            function f(ie, we, Ee) {
              var Pe, Xe = [], _e = [];
              for (Pe = 0; Pe < ie.length; Pe++)
                Pe % we === 0 && _e.length && (Xe.push(_e), _e = []), _e.push(ie[Pe]);
              if (_e.length) {
                if (Ee)
                  for (Pe = _e.length; Pe < we; Pe++)
                    _e.push(Ee);
                Xe.push(_e);
              }
              return Xe;
            }
            s.batch = f;
            function h(ie) {
              ie = d(ie, "");
              var we = ie.toLowerCase();
              return l.copySafeness(ie, we.charAt(0).toUpperCase() + we.slice(1));
            }
            s.capitalize = h;
            function y(ie, we) {
              if (ie = d(ie, ""), we = we || 80, ie.length >= we)
                return ie;
              var Ee = we - ie.length, Pe = o.repeat(" ", Ee / 2 - Ee % 2), Xe = o.repeat(" ", Ee / 2);
              return l.copySafeness(ie, Pe + ie + Xe);
            }
            s.center = y;
            function p(ie, we, Ee) {
              return Ee ? ie || we : ie !== void 0 ? ie : we;
            }
            s.default = p;
            function w(ie, we, Ee) {
              if (!o.isObject(ie))
                throw new o.TemplateError("dictsort filter: val must be an object");
              var Pe = [];
              for (var Xe in ie)
                Pe.push([Xe, ie[Xe]]);
              var _e;
              if (Ee === void 0 || Ee === "key")
                _e = 0;
              else if (Ee === "value")
                _e = 1;
              else
                throw new o.TemplateError("dictsort filter: You can only sort by either key or value");
              return Pe.sort(function(qe, Ze) {
                var _t = qe[_e], It = Ze[_e];
                return we || (o.isString(_t) && (_t = _t.toUpperCase()), o.isString(It) && (It = It.toUpperCase())), _t > It ? 1 : _t === It ? 0 : -1;
              }), Pe;
            }
            s.dictsort = w;
            function b(ie, we) {
              return JSON.stringify(ie, null, we);
            }
            s.dump = b;
            function v(ie) {
              return ie instanceof l.SafeString ? ie : (ie = ie ?? "", l.markSafe(o.escape(ie.toString())));
            }
            s.escape = v;
            function g(ie) {
              return ie instanceof l.SafeString ? ie : (ie = ie ?? "", l.markSafe(ie.toString()));
            }
            s.safe = g;
            function k(ie) {
              return ie[0];
            }
            s.first = k;
            function A(ie) {
              return ie = ie ?? "", l.markSafe(o.escape(ie.toString()));
            }
            s.forceescape = A;
            function C(ie, we) {
              return o.groupBy(ie, we, this.env.opts.throwOnUndefined);
            }
            s.groupby = C;
            function D(ie, we, Ee) {
              if (ie = d(ie, ""), ie === "")
                return "";
              we = we || 4;
              var Pe = ie.split(`
`), Xe = o.repeat(" ", we), _e = Pe.map(function(qe, Ze) {
                return Ze === 0 && !Ee ? qe : "" + Xe + qe;
              }).join(`
`);
              return l.copySafeness(ie, _e);
            }
            s.indent = D;
            function P(ie, we, Ee) {
              return we = we || "", Ee && (ie = o.map(ie, function(Pe) {
                return Pe[Ee];
              })), ie.join(we);
            }
            s.join = P;
            function O(ie) {
              return ie[ie.length - 1];
            }
            s.last = O;
            function I(ie) {
              var we = d(ie, "");
              return we !== void 0 ? typeof Map == "function" && we instanceof Map || typeof Set == "function" && we instanceof Set ? we.size : o.isObject(we) && !(we instanceof l.SafeString) ? o.keys(we).length : we.length : 0;
            }
            s.length = I;
            function x(ie) {
              if (o.isString(ie))
                return ie.split("");
              if (o.isObject(ie))
                return o._entries(ie || {}).map(function(we) {
                  var Ee = we[0], Pe = we[1];
                  return {
                    key: Ee,
                    value: Pe
                  };
                });
              if (o.isArray(ie))
                return ie;
              throw new o.TemplateError("list filter: type not iterable");
            }
            s.list = x;
            function M(ie) {
              return ie = d(ie, ""), ie.toLowerCase();
            }
            s.lower = M;
            function V(ie) {
              return ie == null ? "" : l.copySafeness(ie, ie.replace(/\r\n|\n/g, `<br />
`));
            }
            s.nl2br = V;
            function B(ie) {
              return ie[Math.floor(Math.random() * ie.length)];
            }
            s.random = B;
            function F(ie) {
              function we(Ee, Pe, Xe) {
                Pe === void 0 && (Pe = "truthy");
                var _e = this, qe = _e.env.getTest(Pe);
                return o.toArray(Ee).filter(function(_t) {
                  return qe.call(_e, _t, Xe) === ie;
                });
              }
              return we;
            }
            s.reject = F(!1);
            function H(ie, we) {
              return ie.filter(function(Ee) {
                return !Ee[we];
              });
            }
            s.rejectattr = H, s.select = F(!0);
            function K(ie, we) {
              return ie.filter(function(Ee) {
                return !!Ee[we];
              });
            }
            s.selectattr = K;
            function Z(ie, we, Ee, Pe) {
              var Xe = ie;
              if (we instanceof RegExp)
                return ie.replace(we, Ee);
              typeof Pe > "u" && (Pe = -1);
              var _e = "";
              if (typeof we == "number")
                we = "" + we;
              else if (typeof we != "string")
                return ie;
              if (typeof ie == "number" && (ie = "" + ie), typeof ie != "string" && !(ie instanceof l.SafeString))
                return ie;
              if (we === "")
                return _e = Ee + ie.split("").join(Ee) + Ee, l.copySafeness(ie, _e);
              var qe = ie.indexOf(we);
              if (Pe === 0 || qe === -1)
                return ie;
              for (var Ze = 0, _t = 0; qe > -1 && (Pe === -1 || _t < Pe); )
                _e += ie.substring(Ze, qe) + Ee, Ze = qe + we.length, _t++, qe = ie.indexOf(we, Ze);
              return Ze < ie.length && (_e += ie.substring(Ze)), l.copySafeness(Xe, _e);
            }
            s.replace = Z;
            function ue(ie) {
              var we;
              return o.isString(ie) ? we = x(ie) : we = o.map(ie, function(Ee) {
                return Ee;
              }), we.reverse(), o.isString(ie) ? l.copySafeness(ie, we.join("")) : we;
            }
            s.reverse = ue;
            function Y(ie, we, Ee) {
              we = we || 0;
              var Pe = Math.pow(10, we), Xe;
              return Ee === "ceil" ? Xe = Math.ceil : Ee === "floor" ? Xe = Math.floor : Xe = Math.round, Xe(ie * Pe) / Pe;
            }
            s.round = Y;
            function U(ie, we, Ee) {
              for (var Pe = Math.floor(ie.length / we), Xe = ie.length % we, _e = [], qe = 0, Ze = 0; Ze < we; Ze++) {
                var _t = qe + Ze * Pe;
                Ze < Xe && qe++;
                var It = qe + (Ze + 1) * Pe, it = ie.slice(_t, It);
                Ee && Ze >= Xe && it.push(Ee), _e.push(it);
              }
              return _e;
            }
            s.slice = U;
            function q(ie, we, Ee) {
              return Ee === void 0 && (Ee = 0), we && (ie = o.map(ie, function(Pe) {
                return Pe[we];
              })), Ee + ie.reduce(function(Pe, Xe) {
                return Pe + Xe;
              }, 0);
            }
            s.sum = q, s.sort = l.makeMacro(["value", "reverse", "case_sensitive", "attribute"], [], function(we, Ee, Pe, Xe) {
              var _e = this, qe = o.map(we, function(_t) {
                return _t;
              }), Ze = o.getAttrGetter(Xe);
              return qe.sort(function(_t, It) {
                var it = Xe ? Ze(_t) : _t, Bt = Xe ? Ze(It) : It;
                if (_e.env.opts.throwOnUndefined && Xe && (it === void 0 || Bt === void 0))
                  throw new TypeError('sort: attribute "' + Xe + '" resolved to undefined');
                return !Pe && o.isString(it) && o.isString(Bt) && (it = it.toLowerCase(), Bt = Bt.toLowerCase()), it < Bt ? Ee ? 1 : -1 : it > Bt ? Ee ? -1 : 1 : 0;
              }), qe;
            });
            function oe(ie) {
              return l.copySafeness(ie, ie);
            }
            s.string = oe;
            function ee(ie, we) {
              ie = d(ie, "");
              var Ee = /<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi, Pe = ve(ie.replace(Ee, "")), Xe = "";
              return we ? Xe = Pe.replace(/^ +| +$/gm, "").replace(/ +/g, " ").replace(/(\r\n)/g, `
`).replace(/\n\n\n+/g, `

`) : Xe = Pe.replace(/\s+/gi, " "), l.copySafeness(ie, Xe);
            }
            s.striptags = ee;
            function he(ie) {
              ie = d(ie, "");
              var we = ie.split(" ").map(function(Ee) {
                return h(Ee);
              });
              return l.copySafeness(ie, we.join(" "));
            }
            s.title = he;
            function ve(ie) {
              return l.copySafeness(ie, ie.replace(/^\s*|\s*$/g, ""));
            }
            s.trim = ve;
            function pe(ie, we, Ee, Pe) {
              var Xe = ie;
              if (ie = d(ie, ""), we = we || 255, ie.length <= we)
                return ie;
              if (Ee)
                ie = ie.substring(0, we);
              else {
                var _e = ie.lastIndexOf(" ", we);
                _e === -1 && (_e = we), ie = ie.substring(0, _e);
              }
              return ie += Pe ?? "...", l.copySafeness(Xe, ie);
            }
            s.truncate = pe;
            function z(ie) {
              return ie = d(ie, ""), ie.toUpperCase();
            }
            s.upper = z;
            function ge(ie) {
              var we = encodeURIComponent;
              if (o.isString(ie))
                return we(ie);
              var Ee = o.isArray(ie) ? ie : o._entries(ie);
              return Ee.map(function(Pe) {
                var Xe = Pe[0], _e = Pe[1];
                return we(Xe) + "=" + we(_e);
              }).join("&");
            }
            s.urlencode = ge;
            var Ve = /^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/, Ne = /^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i, ce = /^https?:\/\/.*$/, ne = /^www\./, Q = /\.(?:org|net|com)(?:\:|\/|$)/;
            function le(ie, we, Ee) {
              u(we) && (we = 1 / 0);
              var Pe = Ee === !0 ? ' rel="nofollow"' : "", Xe = ie.split(/(\s+)/).filter(function(_e) {
                return _e && _e.length;
              }).map(function(_e) {
                var qe = _e.match(Ve), Ze = qe ? qe[1] : _e, _t = Ze.substr(0, we);
                return ce.test(Ze) ? '<a href="' + Ze + '"' + Pe + ">" + _t + "</a>" : ne.test(Ze) ? '<a href="http://' + Ze + '"' + Pe + ">" + _t + "</a>" : Ne.test(Ze) ? '<a href="mailto:' + Ze + '">' + Ze + "</a>" : Q.test(Ze) ? '<a href="http://' + Ze + '"' + Pe + ">" + _t + "</a>" : _e;
              });
              return Xe.join("");
            }
            s.urlize = le;
            function G(ie) {
              ie = d(ie, "");
              var we = ie ? ie.match(/\w+/g) : null;
              return we ? we.length : null;
            }
            s.wordcount = G;
            function Ce(ie, we) {
              var Ee = parseFloat(ie);
              return u(Ee) ? we : Ee;
            }
            s.float = Ce;
            var Ie = l.makeMacro(["value", "default", "base"], [], function(we, Ee, Pe) {
              Pe === void 0 && (Pe = 10);
              var Xe = parseInt(we, Pe);
              return u(Xe) ? Ee : Xe;
            });
            s.int = Ie, s.d = s.default, s.e = s.escape;
          }),
          /* 19 */
          /***/
          (function(a, r, i) {
            function o(u, f) {
              u.prototype = Object.create(f.prototype), u.prototype.constructor = u, l(u, f);
            }
            function l(u, f) {
              return l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(y, p) {
                return y.__proto__ = p, y;
              }, l(u, f);
            }
            var s = i(6), d = /* @__PURE__ */ (function(u) {
              o(f, u);
              function f(y) {
                var p;
                return p = u.call(this) || this, p.precompiled = y || {}, p;
              }
              var h = f.prototype;
              return h.getSource = function(p) {
                return this.precompiled[p] ? {
                  src: {
                    type: "code",
                    obj: this.precompiled[p]
                  },
                  path: p
                } : null;
              }, f;
            })(s);
            a.exports = {
              PrecompiledLoader: d
            };
          }),
          /* 20 */
          /***/
          (function(a, r, i) {
            var o = i(2).SafeString;
            function l(B) {
              return typeof B == "function";
            }
            r.callable = l;
            function s(B) {
              return B !== void 0;
            }
            r.defined = s;
            function d(B, F) {
              return B % F === 0;
            }
            r.divisibleby = d;
            function u(B) {
              return B instanceof o;
            }
            r.escaped = u;
            function f(B, F) {
              return B === F;
            }
            r.equalto = f, r.eq = r.equalto, r.sameas = r.equalto;
            function h(B) {
              return B % 2 === 0;
            }
            r.even = h;
            function y(B) {
              return !B;
            }
            r.falsy = y;
            function p(B, F) {
              return B >= F;
            }
            r.ge = p;
            function w(B, F) {
              return B > F;
            }
            r.greaterthan = w, r.gt = r.greaterthan;
            function b(B, F) {
              return B <= F;
            }
            r.le = b;
            function v(B, F) {
              return B < F;
            }
            r.lessthan = v, r.lt = r.lessthan;
            function g(B) {
              return B.toLowerCase() === B;
            }
            r.lower = g;
            function k(B, F) {
              return B !== F;
            }
            r.ne = k;
            function A(B) {
              return B === null;
            }
            r.null = A;
            function C(B) {
              return typeof B == "number";
            }
            r.number = C;
            function D(B) {
              return B % 2 === 1;
            }
            r.odd = D;
            function P(B) {
              return typeof B == "string";
            }
            r.string = P;
            function O(B) {
              return !!B;
            }
            r.truthy = O;
            function I(B) {
              return B === void 0;
            }
            r.undefined = I;
            function x(B) {
              return B.toUpperCase() === B;
            }
            r.upper = x;
            function M(B) {
              return typeof Symbol < "u" ? !!B[Symbol.iterator] : Array.isArray(B) || typeof B == "string";
            }
            r.iterable = M;
            function V(B) {
              var F = B != null && typeof B == "object" && !Array.isArray(B);
              return Set ? F && !(B instanceof Set) : F;
            }
            r.mapping = V;
          }),
          /* 21 */
          /***/
          (function(a, r, i) {
            function o(d) {
              var u = -1;
              return {
                current: null,
                reset: function() {
                  u = -1, this.current = null;
                },
                next: function() {
                  return u++, u >= d.length && (u = 0), this.current = d[u], this.current;
                }
              };
            }
            function l(d) {
              d = d || ",";
              var u = !0;
              return function() {
                var f = u ? "" : d;
                return u = !1, f;
              };
            }
            function s() {
              return {
                range: function(u, f, h) {
                  typeof f > "u" ? (f = u, u = 0, h = 1) : h || (h = 1);
                  var y = [];
                  if (h > 0)
                    for (var p = u; p < f; p += h)
                      y.push(p);
                  else
                    for (var w = u; w > f; w += h)
                      y.push(w);
                  return y;
                },
                cycler: function() {
                  return o(Array.prototype.slice.call(arguments));
                },
                joiner: function(u) {
                  return l(u);
                }
              };
            }
            a.exports = s;
          }),
          /* 22 */
          /***/
          (function(a, r, i) {
            var o = i(4);
            a.exports = function(s, d) {
              function u(f, h) {
                if (this.name = f, this.path = f, this.defaultEngine = h.defaultEngine, this.ext = o.extname(f), !this.ext && !this.defaultEngine)
                  throw new Error("No default engine was specified and no extension was provided.");
                this.ext || (this.name += this.ext = (this.defaultEngine[0] !== "." ? "." : "") + this.defaultEngine);
              }
              return u.prototype.render = function(h, y) {
                s.render(this.name, h, y);
              }, d.set("view", u), d.set("nunjucksEnv", s), s;
            };
          }),
          /* 23 */
          /***/
          (function(a, r, i) {
            var o = i(4), l = i(4), s = i(0), d = s._prettifyError, u = i(5), f = i(7), h = f.Environment, y = i(24);
            function p(g, k) {
              return Array.isArray(k) ? k.some(function(A) {
                return g.match(A);
              }) : !1;
            }
            function w(g, k) {
              k = k || {}, k.isString = !0;
              var A = k.env || new h([]), C = k.wrapper || y;
              if (!k.name)
                throw new Error('the "name" option is required when compiling a string');
              return C([v(g, k.name, A)], k);
            }
            function b(g, k) {
              k = k || {};
              var A = k.env || new h([]), C = k.wrapper || y;
              if (k.isString)
                return w(g, k);
              var D = o.existsSync(g) && o.statSync(g), P = [], O = [];
              function I(V) {
                o.readdirSync(V).forEach(function(B) {
                  var F = l.join(V, B), H = F.substr(l.join(g, "/").length), K = o.statSync(F);
                  K && K.isDirectory() ? (H += "/", p(H, k.exclude) || I(F)) : p(H, k.include) && O.push(F);
                });
              }
              if (D.isFile())
                P.push(v(o.readFileSync(g, "utf-8"), k.name || g, A));
              else if (D.isDirectory()) {
                I(g);
                for (var x = 0; x < O.length; x++) {
                  var M = O[x].replace(l.join(g, "/"), "");
                  try {
                    P.push(v(o.readFileSync(O[x], "utf-8"), M, A));
                  } catch (V) {
                    if (k.force)
                      console.error(V);
                    else
                      throw V;
                  }
                }
              }
              return C(P, k);
            }
            function v(g, k, A) {
              A = A || new h([]);
              var C = A.asyncFilters, D = A.extensionsList, P;
              k = k.replace(/\\/g, "/");
              try {
                P = u.compile(g, C, D, k, A.opts);
              } catch (O) {
                throw d(k, !1, O);
              }
              return {
                name: k,
                template: P
              };
            }
            a.exports = {
              precompile: b,
              precompileString: w
            };
          }),
          /* 24 */
          /***/
          (function(a, r, i) {
            function o(l, s) {
              var d = "";
              s = s || {};
              for (var u = 0; u < l.length; u++) {
                var f = JSON.stringify(l[u].name), h = l[u].template;
                d += "(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})[" + f + `] = (function() {
` + h + `
})();
`, s.asFunction && (d += "return function(ctx, cb) { return nunjucks.render(" + f + `, ctx, cb); }
`), d += `})();
`;
              }
              return d;
            }
            a.exports = o;
          }),
          /* 25 */
          /***/
          (function(a, r, i) {
            function o() {
              var l = this.runtime, s = this.lib, d = this.compiler.Compiler, u = this.parser.Parser, f = this.nodes, h = this.lexer, y = l.contextOrFrameLookup, p = l.memberLookup, w, b;
              d && (w = d.prototype.assertType), u && (b = u.prototype.parseAggregate);
              function v() {
                l.contextOrFrameLookup = y, l.memberLookup = p, d && (d.prototype.assertType = w), u && (u.prototype.parseAggregate = b);
              }
              l.contextOrFrameLookup = function(I, x, M) {
                var V = y.apply(this, arguments);
                if (V !== void 0)
                  return V;
                switch (M) {
                  case "True":
                    return !0;
                  case "False":
                    return !1;
                  case "None":
                    return null;
                  default:
                    return;
                }
              };
              function g(O) {
                return {
                  index: O.index,
                  lineno: O.lineno,
                  colno: O.colno
                };
              }
              if (f && d && u) {
                var k = f.Node.extend("Slice", {
                  fields: ["start", "stop", "step"],
                  init: function(I, x, M, V, B) {
                    M = M || new f.Literal(I, x, null), V = V || new f.Literal(I, x, null), B = B || new f.Literal(I, x, 1), this.parent(I, x, M, V, B);
                  }
                });
                d.prototype.assertType = function(I) {
                  I instanceof k || w.apply(this, arguments);
                }, d.prototype.compileSlice = function(I, x) {
                  this._emit("("), this._compileExpression(I.start, x), this._emit("),("), this._compileExpression(I.stop, x), this._emit("),("), this._compileExpression(I.step, x), this._emit(")");
                }, u.prototype.parseAggregate = function() {
                  var I = this, x = g(this.tokens);
                  x.colno--, x.index--;
                  try {
                    return b.apply(this);
                  } catch (ue) {
                    var M = g(this.tokens), V = function() {
                      return s._assign(I.tokens, M), ue;
                    };
                    s._assign(this.tokens, x), this.peeked = !1;
                    var B = this.peekToken();
                    if (B.type !== h.TOKEN_LEFT_BRACKET)
                      throw V();
                    this.nextToken();
                    for (var F = new k(B.lineno, B.colno), H = !1, K = 0; K <= F.fields.length && !this.skip(h.TOKEN_RIGHT_BRACKET); K++) {
                      if (K === F.fields.length)
                        if (H)
                          this.fail("parseSlice: too many slice components", B.lineno, B.colno);
                        else
                          break;
                      if (this.skip(h.TOKEN_COLON))
                        H = !0;
                      else {
                        var Z = F.fields[K];
                        F[Z] = this.parseExpression(), H = this.skip(h.TOKEN_COLON) || H;
                      }
                    }
                    if (!H)
                      throw V();
                    return new f.Array(B.lineno, B.colno, [F]);
                  }
                };
              }
              function A(O, I, x, M) {
                O = O || [], I === null && (I = M < 0 ? O.length - 1 : 0), x === null ? x = M < 0 ? -1 : O.length : x < 0 && (x += O.length), I < 0 && (I += O.length);
                for (var V = [], B = I; !(B < 0 || B > O.length || M > 0 && B >= x || M < 0 && B <= x); B += M)
                  V.push(l.memberLookup(O, B));
                return V;
              }
              function C(O, I) {
                return Object.prototype.hasOwnProperty.call(O, I);
              }
              var D = {
                pop: function(I) {
                  if (I === void 0)
                    return this.pop();
                  if (I >= this.length || I < 0)
                    throw new Error("KeyError");
                  return this.splice(I, 1);
                },
                append: function(I) {
                  return this.push(I);
                },
                remove: function(I) {
                  for (var x = 0; x < this.length; x++)
                    if (this[x] === I)
                      return this.splice(x, 1);
                  throw new Error("ValueError");
                },
                count: function(I) {
                  for (var x = 0, M = 0; M < this.length; M++)
                    this[M] === I && x++;
                  return x;
                },
                index: function(I) {
                  var x;
                  if ((x = this.indexOf(I)) === -1)
                    throw new Error("ValueError");
                  return x;
                },
                find: function(I) {
                  return this.indexOf(I);
                },
                insert: function(I, x) {
                  return this.splice(I, 0, x);
                }
              }, P = {
                items: function() {
                  return s._entries(this);
                },
                values: function() {
                  return s._values(this);
                },
                keys: function() {
                  return s.keys(this);
                },
                get: function(I, x) {
                  var M = this[I];
                  return M === void 0 && (M = x), M;
                },
                has_key: function(I) {
                  return C(this, I);
                },
                pop: function(I, x) {
                  var M = this[I];
                  if (M === void 0 && x !== void 0)
                    M = x;
                  else {
                    if (M === void 0)
                      throw new Error("KeyError");
                    delete this[I];
                  }
                  return M;
                },
                popitem: function() {
                  var I = s.keys(this);
                  if (!I.length)
                    throw new Error("KeyError");
                  var x = I[0], M = this[x];
                  return delete this[x], [x, M];
                },
                setdefault: function(I, x) {
                  return x === void 0 && (x = null), I in this || (this[I] = x), this[I];
                },
                update: function(I) {
                  return s._assign(this, I), null;
                }
              };
              return P.iteritems = P.items, P.itervalues = P.values, P.iterkeys = P.keys, l.memberLookup = function(I, x, M) {
                return arguments.length === 4 ? A.apply(this, arguments) : (I = I || {}, s.isArray(I) && C(D, x) ? D[x].bind(I) : s.isObject(I) && C(P, x) ? P[x].bind(I) : p.apply(this, arguments));
              }, v;
            }
            a.exports = o;
          })
          /******/
        ])
      );
    });
  })(d_)), d_.exports;
}
var mae = fae();
const tx = /* @__PURE__ */ CD(mae);
function hae(e) {
  return e && e.replace(/"""([\s\S]*?)"""/g, (t, n) => `"${n.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\r?\n/g, "\\n")}"`);
}
function Ey(e) {
  !e || typeof e != "object" || e.get_formatted || (e.get_formatted = function(t) {
    return this?.[t];
  });
}
function nx(e, t = "") {
  if (!e) return "";
  const n = (e.items || []).map((l) => {
    const s = l.serial_no ? `<br><b>SR.No:</b><br>${l.serial_no.replace(/\n/g, ", ")}` : "", d = e.posa_show_custom_name_marker_on_print && l.name_overridden ? " (custom)" : "";
    return `<tr>
        <td>${l.item_code}${l.item_name && l.item_name !== l.item_code ? `<br>${l.item_name}${d}` : ""}${s}</td>
        <td style="text-align:right">${l.qty} ${l.uom || ""}<br>@ ${l.rate}</td>
        <td style="text-align:right">${l.amount}</td>
      </tr>`;
  }).join(""), a = (e.taxes || []).map(
    (l) => `<tr>
      <td class="text-right" style="width:70%">${l.description}@${l.rate}%</td>
      <td class="text-right">${l.tax_amount}</td>
    </tr>`
  ).join(""), r = e.discount_amount ? `<tr>
      <td class="text-right" style="width:75%">Discount</td>
      <td class="text-right">${e.discount_amount}</td>
    </tr>` : "", i = e.change_amount ? `<tr>
      <td class="text-right" style="width:75%">Change Amount</td>
      <td class="text-right">${e.change_amount}</td>
    </tr>` : "", o = t ? `<div style="margin-top:5px;">${t}</div>` : "";
  return `<!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>Invoice ${e.name || ""}</title>
    <style>
      table, tr, td, div, p { line-height:120%; vertical-align:middle; font-size:10px; }
      .print-format { width:3.5in; padding:0.1in; min-height:7in; }
      .text-right { text-align:right; }
    </style>
  </head>
  <body class="print-format">
    <div style="text-align:center; margin-bottom:0"><h5 style="margin:0; font-size:11px;">${e.is_duplicate ? "Duplicate" : "Original"}</h5></div>
    <p style="margin-top:0">
      <b>Invoice Status:</b> ${e.status || ""}<br>
      <b>Receipt No:</b> ${e.name || ""}<br>
      <b>Customer:</b> ${e.customer_name || e.customer || ""}<br>
      <b>Mobile:</b> ${e.contact_mobile || ""}<br>
      <b>Date:</b> ${e.posting_date || ""}
      <b>Time:</b> ${e.posting_time || ""}<br>
    </p>
    <p style="margin-top:3px;"><b>Additional Note:</b> <strong>${e.posa_notes || ""}</strong></p>
    <table cellpadding="0" cellspacing="0" style="width:100%">
      <thead>
        <tr><th width="50%"><b>Item</b></th><th width="25%" class="text-right"><b>Qty</b></th><th width="25%" class="text-right"><b>Amount</b></th></tr>
      </thead>
      <tbody>${n}</tbody>
    </table>
    <table cellpadding="0" cellspacing="0" style="width:100%">
      <tbody>
        <tr><td class="text-right" style="width:70%"><b>Total</b></td><td class="text-right">${e.total}</td></tr>
        ${a}
        ${r}
        <tr><td class="text-right" style="width:70%"><b>Grand Total</b></td><td class="text-right">${e.grand_total}</td></tr>
        <tr><td class="text-right" style="width:75%"><b>Paid Amount</b></td><td class="text-right">${e.paid_amount}</td></tr>
        ${i}
      </tbody>
    </table>
    ${o}
    <p class="text-center" style="margin-top:3px;">Thank you, please visit again.</p>
  </body>
  </html>`;
}
async function _ae(e) {
  if (!e) return "";
  await pu;
  const t = hae(IQ()), n = PQ(), a = {
    ...e,
    terms: e.terms || n,
    terms_and_conditions: e.terms_and_conditions || n
  };
  if (Ey(a), (a.items || []).forEach(Ey), (a.taxes || []).forEach(Ey), !t)
    return console.warn("No offline print template cached; using fallback template"), nx(a, a.terms_and_conditions);
  try {
    tx.configure({ autoescape: !1 });
    const r = {
      doc: a,
      terms: a.terms,
      terms_and_conditions: a.terms_and_conditions,
      _: frappe?._ ? frappe._ : (i) => i,
      frappe: {
        db: { get_value: () => "", sql: () => [] },
        get_list: () => []
      }
    };
    return tx.renderString(t, r);
  } catch (r) {
    return console.error("Failed to render offline invoice", r), nx(a, a.terms_and_conditions);
  }
}
const vae = {
  // Using format mixin for shared formatting methods
  mixins: [Bi],
  data() {
    return {
      loading: !1,
      // UI loading state
      pos_profile: "",
      // POS profile settings
      pos_settings: "",
      // POS settings
      invoice_doc: "",
      // Current invoice document
      stock_settings: "",
      // Stock settings
      invoiceType: "Invoice",
      // Type of invoice
      is_return: !1,
      // Is this a return invoice?
      loyalty_amount: 0,
      // Loyalty points to redeem
      redeemed_customer_credit: 0,
      // Customer credit to redeem
      credit_change: 0,
      // Change to be given as credit
      paid_change: 0,
      // Change to be given as paid
      is_credit_sale: !1,
      // Is this a credit sale?
      is_write_off_change: !1,
      // Write-off for change enabled
      is_cashback: !0,
      // Cashback enabled
      is_credit_return: !1,
      // Is this a credit return?
      redeem_customer_credit: !1,
      // Redeem customer credit?
      customer_credit_dict: [],
      // List of available customer credits
      paid_change_rules: [],
      // Validation rules for paid change
      phone_dialog: !1,
      // Show phone payment dialog
      custom_days_dialog: !1,
      // Show custom days dialog
      custom_days_value: null,
      // Custom days entry
      new_delivery_date: null,
      // New delivery date value
      new_po_date: null,
      // New PO date value
      new_credit_due_date: null,
      // New credit due date value
      credit_due_days: null,
      // Number of days until due
      credit_due_presets: [7, 14, 30],
      // Preset options for due days
      customer_info: "",
      // Customer info
      mpesa_modes: [],
      // List of available M-Pesa modes
      sales_persons: [],
      // List of sales persons
      sales_person: "",
      // Selected sales person
      addresses: [],
      // List of customer addresses
      is_user_editing_paid_change: !1,
      // User interaction flag
      highlightSubmit: !1,
      // Highlight state for submit button
      showDebugInfo: !1
      // Show debug information panel
    };
  },
  computed: {
    // Get currency symbol for given or current currency
    currencySymbol() {
      return (e) => get_currency_symbol(e || this.invoice_doc.currency);
    },
    // Display currency for invoice
    displayCurrency() {
      return this.invoice_doc ? this.invoice_doc.currency : "";
    },
    // Calculate total payments (all methods, loyalty, credit)
    total_payments() {
      let e = 0;
      return this.invoice_doc && this.invoice_doc.payments && this.invoice_doc.payments.forEach((t) => {
        e += parseFloat(Lt.fromArabicNumerals(String(t.amount))) || 0;
      }), this.loyalty_amount && (this.invoice_doc.currency !== this.pos_profile.currency ? e += this.flt(
        this.loyalty_amount / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ) : e += parseFloat(Lt.fromArabicNumerals(String(this.loyalty_amount))) || 0), this.redeemed_customer_credit && (this.invoice_doc.currency !== this.pos_profile.currency ? e += this.flt(
        this.redeemed_customer_credit / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ) : e += parseFloat(Lt.fromArabicNumerals(String(this.redeemed_customer_credit))) || 0), this.flt(e, this.currency_precision);
    },
    // Calculate difference between invoice total and payments
    diff_payment() {
      if (!this.invoice_doc) return 0;
      let e;
      this.pos_profile.posa_allow_multi_currency && this.invoice_doc.currency !== this.pos_profile.currency ? e = this.flt(this.invoice_doc.grand_total, this.currency_precision) : e = this.flt(
        this.invoice_doc.rounded_total || this.invoice_doc.grand_total,
        this.currency_precision
      );
      let t = this.flt(e - this.total_payments, this.currency_precision);
      return this.invoice_doc.is_return, t >= 0 ? t : 0;
    },
    // Calculate change to be given back to customer
    credit_change() {
      let e;
      this.pos_profile.posa_allow_multi_currency && this.invoice_doc.currency !== this.pos_profile.currency ? e = this.flt(this.invoice_doc.grand_total, this.currency_precision) : e = this.flt(
        this.invoice_doc.rounded_total || this.invoice_doc.grand_total,
        this.currency_precision
      );
      let t = this.flt(this.total_payments - e, this.currency_precision);
      return t > 0 ? t : 0;
    },
    // Label for the difference field (To Be Paid/Change)
    diff_label() {
      return this.diff_payment > 0 ? `To Be Paid (${this.displayCurrency})` : `Change (${this.displayCurrency})`;
    },
    // Should KOT print button be shown?
    showKOTPrintButton() {
      return this.pos_profile.posa_order_mode === "Direct Order + KOT" && this.invoice_doc.docstatus === 1 && this.invoice_doc.name;
    },
    // Display formatted total payments
    total_payments_display() {
      return this.formatCurrency(this.total_payments, this.displayCurrency);
    },
    // Display formatted difference payment
    diff_payment_display() {
      return this.formatCurrency(this.diff_payment, this.displayCurrency);
    },
    // Calculate available loyalty points amount in selected currency
    available_points_amount() {
      let e = 0;
      return this.customer_info.loyalty_points && (e = this.customer_info.loyalty_points * this.customer_info.conversion_factor, this.invoice_doc.currency !== this.pos_profile.currency && (e = this.flt(
        e / (this.invoice_doc.conversion_rate || 1),
        this.currency_precision
      ))), e;
    },
    // Calculate total available customer credit
    available_customer_credit() {
      return this.customer_credit_dict.reduce((e, t) => e + this.flt(t.total_credit), 0);
    },
    // Validate if payment can be submitted
    vaildatPayment() {
      return this.pos_profile.posa_enable_restaurant_mode ? !1 : !!(this.pos_profile.posa_allow_sales_order && this.invoiceType === "Order" && !this.invoice_doc.posa_delivery_date);
    },
    // Should request payment field be shown?
    request_payment_field() {
      return this.pos_settings?.invoice_fields?.some(
        (e) => e.fieldtype === "Button" && e.fieldname === "request_for_payment"
      ) || !1;
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {
    // Watch diff_payment to update paid_change
    diff_payment(e) {
      this.is_user_editing_paid_change || (this.paid_change = -e);
    },
    // Watch paid_change to validate and update credit_change
    paid_change(e) {
      const t = -this.diff_payment;
      e > t ? (this.paid_change = t, this.credit_change = 0, this.paid_change_rules = ["Paid change can not be greater than total change!"]) : (this.paid_change_rules = [], this.credit_change = this.flt(e - t, this.currency_precision));
    },
    // Watch loyalty_amount to handle loyalty points redemption
    loyalty_amount(e) {
      e > this.available_points_amount ? (this.invoice_doc.loyalty_amount = 0, this.invoice_doc.redeem_loyalty_points = 0, this.invoice_doc.loyalty_points = 0, this.loyalty_amount = 0, this.eventBus.emit("show_message", {
        title: `Loyalty Amount can not be more than ${this.available_points_amount}`,
        color: "error"
      })) : (this.invoice_doc.loyalty_amount = this.flt(this.loyalty_amount), this.invoice_doc.redeem_loyalty_points = 1, this.invoice_doc.loyalty_points = this.flt(this.loyalty_amount) / this.customer_info.conversion_factor);
    },
    // Watch redeemed_customer_credit to validate
    redeemed_customer_credit(e) {
      e > this.available_customer_credit && (this.redeemed_customer_credit = this.available_customer_credit, this.eventBus.emit("show_message", {
        title: `You can redeem customer credit up to ${this.available_customer_credit}`,
        color: "error"
      }));
    },
    // Recalculate total redeemed credit whenever credit entries change
    customer_credit_dict: {
      handler(e) {
        const t = e.reduce((n, a) => n + this.flt(a.credit_to_redeem || 0), 0);
        this.redeemed_customer_credit = this.flt(t, this.currency_precision);
      },
      deep: !0
    },
    // Watch sales_person to update sales_team
    sales_person(e) {
      e ? (this.invoice_doc.sales_team = [
        {
          sales_person: e,
          allocated_percentage: 100
        }
      ], console.log("Updated sales_team with sales_person:", e)) : (this.invoice_doc.sales_team = [], console.log("Cleared sales_team"));
    },
    // Watch is_credit_sale to reset cash payments
    is_credit_sale(e) {
      e ? this.invoice_doc.payments.forEach((t) => {
        t.mode_of_payment.toLowerCase() === "cash" && (t.amount = 0);
      }) : this.invoice_doc.payments.forEach((t) => {
        t.mode_of_payment.toLowerCase() === "cash" && (t.amount = this.invoice_doc.rounded_total || this.invoice_doc.grand_total);
      });
    },
    // Watch is_credit_return to toggle cashback payments
    is_credit_return(e) {
      e ? (this.is_cashback = !1, this.invoice_doc.payments.forEach((t) => {
        t.amount = 0, t.base_amount !== void 0 && (t.base_amount = 0);
      })) : (this.is_cashback = !0, this.ensureReturnPaymentsAreNegative());
    }
  },
  methods: {
    // Go back to invoice view and reset customer readonly
    back_to_invoice() {
      this.eventBus.emit("show_payment", "false"), this.eventBus.emit("set_customer_readonly", !1);
    },
    // Highlight and focus the submit button when payment screen opens
    handleShowPayment(e) {
      e === "true" ? this.$nextTick(() => {
        setTimeout(() => {
          const t = this.$refs.submitButton, n = t && t.$el ? t.$el : t;
          n && (n.scrollIntoView({ behavior: "smooth", block: "center" }), n.focus(), this.highlightSubmit = !0);
        }, 100);
      }) : this.highlightSubmit = !1;
    },
    // Reset all cash payments to zero
    reset_cash_payments() {
      this.invoice_doc.payments.forEach((e) => {
        e.mode_of_payment.toLowerCase() === "cash" && (e.amount = 0);
      });
    },
    // Get dynamic submit button text based on document type and status
    getSubmitButtonText() {
      if (this.invoice_doc.is_multi_order_edit)
        return this.__("Submit {0} Orders", [this.invoice_doc.multi_order_count || "Multiple"]);
      if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 && this.invoice_doc.custom_consolidated_invoice_reference) {
        const e = this.invoice_doc.custom_consolidated_invoice_reference.split(",").length;
        return this.__("Submit Consolidated Order ({0} Orders)", [e]);
      } else {
        if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0)
          return this.__("Submit Order");
        if (this.invoice_doc.doctype === "Sales Invoice")
          return this.__("Pay");
      }
      return this.__("Submit");
    },
    // Get dynamic submit and print button text based on document type and status
    getSubmitPrintButtonText() {
      if (this.invoice_doc.is_multi_order_edit)
        return this.__("Submit & Print {0} Orders", [this.invoice_doc.multi_order_count || "Multiple"]);
      if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 && this.invoice_doc.custom_consolidated_invoice_reference) {
        const e = this.invoice_doc.custom_consolidated_invoice_reference.split(",").length;
        return this.__("Submit & Print Consolidated Order ({0} Orders)", [e]);
      } else {
        if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0)
          return this.__("Submit & Print Order");
        if (this.invoice_doc.doctype === "Sales Invoice")
          return this.__("Pay & Print");
      }
      return this.__("Submit & Print");
    },
    // Ensure all payments are negative for return invoices
    ensureReturnPaymentsAreNegative() {
      if (!this.invoice_doc || !this.invoice_doc.is_return || !this.is_cashback)
        return;
      let e = !1;
      if (this.invoice_doc.payments.forEach((t) => {
        Math.abs(t.amount) > 0 && (e = !0);
      }), !e) {
        const t = this.invoice_doc.payments.find((n) => n.default === 1);
        if (t) {
          const n = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
          t.amount = -Math.abs(n), t.base_amount !== void 0 && (t.base_amount = -Math.abs(n));
        }
      }
      this.invoice_doc.payments.forEach((t) => {
        t.amount > 0 && (t.amount = -Math.abs(t.amount)), t.base_amount !== void 0 && t.base_amount > 0 && (t.base_amount = -Math.abs(t.base_amount));
      });
    },
    // Submit payment after validation
    async submit(e, t = !1, n = !1) {
      if (this.invoice_doc.is_multi_order_edit && this.invoice_doc.multi_order_names) {
        console.log("Submitting multiple draft restaurant orders:", this.invoice_doc.multi_order_names);
        try {
          const o = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
          console.log("Preserving payment amounts for multi-order submission:", o);
          const l = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_multiple_orders_and_create_invoice",
            args: {
              order_names: this.invoice_doc.multi_order_names,
              updated_order_data: this.invoice_doc,
              pos_profile_name: this.pos_profile.name
            }
          });
          if (l.message)
            console.log("Successfully submitted multiple orders and created consolidated invoice:", l.message.name), this.invoice_doc = l.message, o && o.length > 0 && (console.log("Restoring payment amounts to consolidated invoice..."), o.forEach((s) => {
              const d = this.invoice_doc.payments.find(
                (u) => u.mode_of_payment === s.mode_of_payment
              );
              d && s.amount > 0 && (d.amount = s.amount, d.base_amount = s.base_amount || s.amount, console.log(`Restored ${s.mode_of_payment}: ${s.amount}`));
            }), console.log("Payment amounts successfully restored to consolidated invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("show_message", {
              title: __("{0} orders submitted and consolidated into invoice for payment", [this.invoice_doc.multi_order_names.length]),
              color: "success"
            }), console.log("Multi-order consolidation complete, continuing with payment submission for consolidated invoice:", this.invoice_doc.name);
          else
            throw new Error("Failed to submit multiple orders and create invoice");
        } catch (o) {
          console.error("Error submitting multiple draft restaurant orders:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting multiple orders: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      } else if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0 && this.invoice_doc.custom_consolidated_invoice_reference) {
        console.log("Submitting consolidated draft restaurant order:", this.invoice_doc.name), console.log("Source orders:", this.invoice_doc.custom_consolidated_invoice_reference);
        try {
          const o = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
          console.log("Preserving payment amounts for consolidated order:", o);
          const l = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_restaurant_order",
            args: {
              order_data: this.invoice_doc
            }
          });
          if (l.message) {
            console.log("Successfully submitted consolidated Sales Order:", l.message.name);
            const s = await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
              args: {
                sales_order_name: l.message.name,
                pos_profile_name: this.pos_profile.name
              }
            });
            s.message && (this.invoice_doc = s.message, console.log("Successfully converted consolidated order to Sales Invoice:", this.invoice_doc.name), o && o.length > 0 && (console.log("Restoring payment amounts to consolidated invoice..."), o.forEach((d) => {
              const u = this.invoice_doc.payments.find(
                (f) => f.mode_of_payment === d.mode_of_payment
              );
              u && d.amount > 0 && (u.amount = d.amount, u.base_amount = d.base_amount || d.amount, console.log(`Restored ${d.mode_of_payment}: ${d.amount}`));
            }), console.log("Payment amounts successfully restored to consolidated invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), console.log("Finalizing consolidated order submission..."), await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.finalize_consolidated_order_submission",
              args: {
                consolidated_order_name: l.message.name
              }
            }), this.eventBus.emit("show_message", {
              title: __("Consolidated order submitted successfully. Source orders have been closed. Proceed with payment."),
              color: "success"
            }), console.log("Consolidated order workflow complete, continuing with payment submission for invoice:", this.invoice_doc.name));
          }
        } catch (o) {
          console.error("Error submitting consolidated restaurant order:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting consolidated order: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      } else if (this.invoice_doc.doctype === "Sales Order" && this.invoice_doc.docstatus === 0) {
        console.log("Submitting draft restaurant order:", this.invoice_doc.name);
        try {
          const o = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.submit_restaurant_order",
            args: {
              order_data: this.invoice_doc
            }
          });
          if (o.message) {
            console.log("Successfully submitted Sales Order:", o.message.name);
            const l = JSON.parse(JSON.stringify(this.invoice_doc.payments || []));
            console.log("Preserving original payment amounts:", l);
            const s = await frappe.call({
              method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
              args: {
                sales_order_name: o.message.name,
                pos_profile_name: this.pos_profile.name
              }
            });
            if (s.message)
              this.invoice_doc = s.message, console.log("Successfully converted to Sales Invoice for payment:", this.invoice_doc.name), l && l.length > 0 && (console.log("Restoring payment amounts to new Sales Invoice..."), l.forEach((d) => {
                const u = this.invoice_doc.payments.find(
                  (f) => f.mode_of_payment === d.mode_of_payment
                );
                u && d.amount > 0 && (u.amount = d.amount, u.base_amount = d.base_amount || d.amount, console.log(`Restored ${d.mode_of_payment}: ${d.amount}`));
              }), console.log("Payment amounts successfully restored to Sales Invoice")), this.invoiceType = "Invoice", this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("show_message", {
                title: __("Order submitted and converted to invoice for payment"),
                color: "success"
              });
            else
              throw new Error("Failed to convert submitted order to invoice");
          } else
            throw new Error("Failed to submit draft order");
        } catch (o) {
          console.error("Error submitting draft restaurant order:", o), this.eventBus.emit("show_message", {
            title: __("Error submitting order: {0}", [o.message || "Unknown error"]),
            color: "error"
          }), this.loading = !1;
          return;
        }
      }
      if (this.invoice_doc.is_return && this.ensureReturnPaymentsAreNegative(), !this.is_credit_sale && !this.invoice_doc.is_return && this.total_payments <= 0 && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
        this.eventBus.emit("show_message", {
          title: "Please enter payment amount",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!this.is_credit_sale && !this.invoice_doc.is_return) {
        let o = !1, l = 0;
        if (this.invoice_doc.payments.forEach((s) => {
          s.mode_of_payment.toLowerCase().includes("cash") && (o = !0, l = this.flt(s.amount));
        }), o && l > 0 && !this.pos_profile.posa_allow_partial_payment && l < (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
          this.eventBus.emit("show_message", {
            title: "Cash payment cannot be less than invoice total when partial payment is not allowed",
            color: "error"
          }), frappe.utils.play_sound("error");
          return;
        }
      }
      if (!this.is_credit_sale && !this.pos_profile.posa_allow_partial_payment && this.total_payments < (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) && (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) > 0) {
        this.eventBus.emit("show_message", {
          title: "The amount paid is not complete",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      let a = !0;
      if (!t && (this.invoice_doc.payments.forEach((o) => {
        o.type === "Phone" && ![0, "0", "", null, void 0].includes(o.amount) && (a = !1);
      }), !a)) {
        this.eventBus.emit("show_message", {
          title: __("Please request phone payment or use another payment method"),
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (this.paid_change > -this.diff_payment) {
        this.eventBus.emit("show_message", {
          title: "Paid change cannot be greater than total change!",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      let r = this.flt(this.flt(this.paid_change) + this.flt(-this.credit_change));
      if (this.is_cashback && r !== -this.diff_payment) {
        this.eventBus.emit("show_message", {
          title: "Error in change calculations!",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (this.customer_credit_dict.filter((o) => this.flt(o.credit_to_redeem) > this.flt(o.total_credit)).length > 0) {
        this.eventBus.emit("show_message", {
          title: "Redeemed credit cannot be greater than its total.",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!this.invoice_doc.is_return && this.redeemed_customer_credit > (this.invoice_doc.rounded_total || this.invoice_doc.grand_total)) {
        this.eventBus.emit("show_message", {
          title: "Cannot redeem customer credit more than invoice total",
          color: "error"
        }), frappe.utils.play_sound("error");
        return;
      }
      if (!un())
        try {
          const o = this.invoice_doc.items.filter((s) => !s.is_bundle), l = await frappe.call({
            method: "posawesome.posawesome.api.invoices.validate_cart_items",
            args: {
              items: JSON.stringify(o),
              pos_profile: this.pos_profile.name
            }
          });
          if (l.message && l.message.length) {
            const s = l.message.map(
              (u) => `${u.item_code} (${u.warehouse}) - ${this.formatFloat(u.available_qty)}`
            ).join(`
`), d = !this.stock_settings.allow_negative_stock || this.pos_profile.posa_block_sale_beyond_available_qty;
            if (this.eventBus.emit("show_message", {
              title: d ? __(`Insufficient stock:
{0}`, [s]) : __(`Stock is lower than requested:
{0}`, [s]),
              color: d ? "error" : "warning"
            }), d) {
              frappe.utils.play_sound("error"), this.loading = !1;
              return;
            }
          }
        } catch (o) {
          console.error("Stock validation failed", o);
        }
      this.loading = !0, this.submit_invoice(n);
    },
    // Submit invoice to backend after all validations
    submit_invoice(e) {
      this.invoice_doc.is_return && this.ensureReturnPaymentsAreNegative();
      let t = 0;
      this.invoice_doc.payments.forEach((i) => {
        i.amount = this.flt(i.amount), t += i.amount;
      }), this.invoice_doc.is_return && t === 0 && (this.invoice_doc.is_pos = 0), this.customer_credit_dict.length && this.customer_credit_dict.forEach((i) => {
        i.credit_to_redeem = this.flt(i.credit_to_redeem);
      });
      let n = {
        total_change: this.invoice_doc.is_return ? 0 : -this.diff_payment,
        paid_change: this.invoice_doc.is_return ? 0 : this.paid_change,
        credit_change: -this.credit_change,
        redeemed_customer_credit: this.redeemed_customer_credit,
        customer_credit_dict: this.customer_credit_dict,
        is_cashback: this.is_cashback
      };
      const a = this;
      if (un())
        try {
          HQ({ data: n, invoice: this.invoice_doc }), this.eventBus.emit("pending_invoices_changed", qs()), a.eventBus.emit("show_message", {
            title: __("Invoice saved offline"),
            color: "warning"
          }), e && this.print_offline_invoice(this.invoice_doc), a.eventBus.emit("clear_invoice"), a.eventBus.emit("reset_posting_date"), a.back_to_invoice(), a.loading = !1;
          return;
        } catch (i) {
          a.eventBus.emit("show_message", {
            title: __("Cannot Save Offline Invoice: ") + (i.message || __("Unknown error")),
            color: "error"
          }), a.loading = !1;
          return;
        }
      let r;
      this.invoice_doc.doctype === "Sales Order" || this.invoiceType === "Order" && this.pos_profile.posa_create_only_sales_order ? r = "posawesome.posawesome.api.sales_orders.submit_sales_order" : r = "posawesome.posawesome.api.invoices.submit_invoice", console.log("Submitting with method:", r, "for doctype:", this.invoice_doc.doctype), frappe.call({
        method: r,
        args: {
          data: n,
          invoice: this.invoice_doc,
          order: this.invoice_doc
        },
        callback: function(i) {
          if (i.exc) {
            console.error("Error submitting invoice:", i.exc);
            let o = i.exc.toString();
            o.includes("Amount must be negative") ? (a.eventBus.emit("show_message", {
              title: __("Fixing payment amounts for return invoice..."),
              color: "warning"
            }), a.invoice_doc.payments.forEach((l) => {
              l.amount > 0 && (l.amount = -Math.abs(l.amount)), l.base_amount > 0 && (l.base_amount = -Math.abs(l.base_amount));
            }), console.log("Retrying submission with fixed payment amounts"), setTimeout(() => {
              a.submit_invoice(e);
            }, 500)) : a.eventBus.emit("show_message", {
              title: __("Error submitting invoice: ") + o,
              color: "error"
            }), a.loading = !1;
            return;
          }
          if (!i.message) {
            a.eventBus.emit("show_message", {
              title: __("Error submitting invoice: No response from server"),
              color: "error"
            }), a.loading = !1;
            return;
          }
          if (e)
            if (a.pos_profile.posa_order_mode === "Direct Order + KOT") {
              const o = i.message;
              console.log("Using submitted invoice from response for dual print:", {
                response_name: o?.name,
                response_doctype: o?.doctype,
                current_invoice_name: a.invoice_doc?.name,
                response_exists: !!o
              }), o && o.name ? (console.log("Starting dual print for submitted invoice:", o.name), a.seamless_dual_print(o)) : (console.error("Submitted invoice not available in response for dual printing", {
                response: i,
                message: i.message,
                vm_invoice_doc: a.invoice_doc
              }), a.eventBus.emit("show_message", {
                title: __("Error: Submitted invoice not available for printing"),
                color: "error"
              }));
            } else
              a.load_print_page();
          a.customer_credit_dict = [], a.redeem_customer_credit = !1, a.is_cashback = !0, a.is_credit_return = !1, a.sales_person = "", a.eventBus.emit("set_last_invoice", a.invoice_doc.name), a.eventBus.emit("show_message", {
            title: a.invoice_doc.doctype === "Sales Order" ? __("Sales Order {0} is Submitted", [i.message.name]) : __("Invoice {0} is Submitted", [i.message.name]),
            color: "success"
          }), frappe.utils.play_sound("submit"), bD(a.invoice_doc.items || []), a.addresses = [], a.eventBus.emit("clear_invoice"), a.eventBus.emit("reset_posting_date"), a.back_to_invoice(), a.loading = !1;
        }
      });
    },
    // Set full amount for a payment method (or negative for returns)
    set_full_amount(e) {
      const t = this.invoice_doc.is_return || this.invoiceType === "Return";
      let n = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
      console.log("Setting full amount for payment method idx:", e), console.log("Current payments:", JSON.stringify(this.invoice_doc.payments)), this.invoice_doc.payments.forEach((i) => {
        i.amount = 0, i.base_amount !== void 0 && (i.base_amount = 0);
      });
      const a = event?.target?.textContent?.trim();
      console.log("Clicked button text:", a);
      const r = this.invoice_doc.payments.find(
        (i) => i.mode_of_payment === a
      );
      if (r) {
        console.log("Found clicked payment:", r.mode_of_payment);
        let i = t ? -Math.abs(n) : n;
        r.amount = i, r.base_amount !== void 0 && (r.base_amount = t ? -Math.abs(i) : i), console.log("Set amount for payment:", r.mode_of_payment, "amount:", i);
      } else
        console.log("No payment found for button text:", a);
      this.$forceUpdate();
    },
    // Set remaining amount for a payment method when focused
    set_rest_amount(e) {
      const t = this.invoice_doc.is_return || this.invoiceType === "Return";
      this.invoice_doc.payments.forEach((n) => {
        if (n.idx === e && n.amount === 0 && this.diff_payment > 0) {
          let a = this.diff_payment;
          t && (a = -Math.abs(a)), n.amount = a, n.base_amount !== void 0 && (n.base_amount = t ? -Math.abs(a) : a);
        }
      });
    },
    // Clear all payment amounts
    clear_all_amounts() {
      this.invoice_doc.payments.forEach((e) => {
        e.amount = 0;
      });
    },
    // Open print page for invoice
    load_print_page() {
      const e = this.pos_profile.print_format_for_online || this.pos_profile.print_format, t = this.pos_profile.letter_head || 0, n = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", a = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(n) + "&name=" + this.invoice_doc.name + "&trigger_print=1&format=" + e + "&no_letterhead=" + t;
      if (this.pos_profile.posa_silent_print)
        Wv(a);
      else {
        const r = window.open(a, "Print");
        r.addEventListener(
          "load",
          function() {
            r.print();
          },
          { once: !0 }
        );
      }
    },
    // Print invoice using a more detailed offline template
    async print_offline_invoice(e) {
      if (!e) return;
      const t = await _ae(e), n = window.open("", "_blank");
      n.document.write(t), n.document.close(), n.focus(), n.print();
    },
    // Print KOT for Direct Order + KOT mode
    async print_kot_for_invoice() {
      if (!this.invoice_doc || !this.invoice_doc.name) {
        this.eventBus.emit("show_message", {
          title: __("No invoice to print KOT for"),
          color: "error"
        });
        return;
      }
      this.loading = !0;
      try {
        console.log("Printing KOT for invoice:", this.invoice_doc.name), frappe.call({
          method: "posawesome.posawesome.api.direct_orders.generate_kot_html_for_latest_invoice",
          callback: (e) => {
            if (e.message && e.message.html) {
              const t = window.open("", "_blank");
              t.document.write(e.message.html), t.document.close(), t.focus(), t.print(), this.eventBus.emit("show_message", {
                title: __("KOT printed successfully"),
                color: "success"
              });
            } else
              this.eventBus.emit("show_message", {
                title: __("Failed to generate KOT HTML"),
                color: "error"
              });
            this.loading = !1;
          },
          error: (e) => {
            console.error("Error printing KOT:", e), this.eventBus.emit("show_message", {
              title: __("Error printing KOT: {0}", [e.message || "Unknown error"]),
              color: "error"
            }), this.loading = !1;
          }
        });
      } catch (e) {
        console.error("Error printing KOT:", e), this.eventBus.emit("show_message", {
          title: __("Error printing KOT: {0}", [e.message || "Unknown error"]),
          color: "error"
        }), this.loading = !1;
      }
    },
    // Seamless dual-printing for Direct Order + KOT mode
    async seamless_dual_print(e = null) {
      try {
        console.log("Starting seamless dual-print for Direct Order + KOT mode");
        const t = e || this.invoice_doc;
        if (!t || !t.name)
          throw new Error("Invoice document not available for printing");
        console.log("Using invoice for printing:", t.name), await this.browser_dual_print(t), this.eventBus.emit("show_message", {
          title: __("Invoice and KOT printed successfully"),
          color: "success"
        });
      } catch (t) {
        console.error("Error in seamless dual-print:", t), this.eventBus.emit("show_message", {
          title: __("Error in dual printing: {0}", [t.message || "Unknown error"]),
          color: "error"
        });
      }
    },
    // Browser-based dual printing (fallback)
    async browser_dual_print() {
      await this.silent_print_invoice(), await this.silent_print_kot();
    },
    // Get KOT HTML for printing
    async get_kot_html() {
      try {
        return (await frappe.call({
          method: "posawesome.posawesome.api.direct_orders.generate_kot_html_for_latest_invoice"
        })).message;
      } catch (e) {
        throw console.error("Error generating KOT HTML:", e), new Error("Failed to generate KOT HTML");
      }
    },
    // Silent print invoice (no popup window)
    async silent_print_invoice() {
      return new Promise((e, t) => {
        const n = this.pos_profile.print_format_for_online || this.pos_profile.print_format, a = this.pos_profile.letter_head || 0, r = this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", i = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(r) + "&name=" + this.invoice_doc.name + "&trigger_print=1&format=" + n + "&no_letterhead=" + a, o = document.createElement("iframe");
        o.style.display = "none", document.body.appendChild(o), o.onload = () => {
          try {
            o.contentWindow.print(), setTimeout(() => {
              document.body.removeChild(o), e();
            }, 1e3);
          } catch (l) {
            document.body.removeChild(o), t(l);
          }
        }, o.onerror = (l) => {
          document.body.removeChild(o), t(l);
        }, o.src = i;
      });
    },
    // Silent print KOT (no popup window)
    async silent_print_kot() {
      return new Promise((e, t) => {
        try {
          frappe.call({
            method: "posawesome.posawesome.api.direct_orders.generate_kot_html_for_latest_invoice",
            callback: (n) => {
              if (n.message && n.message.html) {
                const a = document.createElement("iframe");
                a.style.display = "none", document.body.appendChild(a), a.onload = () => {
                  try {
                    a.contentWindow.print(), setTimeout(() => {
                      document.body.removeChild(a), e();
                    }, 1e3);
                  } catch (r) {
                    document.body.removeChild(a), t(r);
                  }
                }, a.onerror = (r) => {
                  document.body.removeChild(a), t(r);
                }, a.srcdoc = n.message.html;
              } else
                t(new Error("Failed to generate KOT HTML"));
            },
            error: (n) => {
              t(n);
            }
          });
        } catch (n) {
          t(n);
        }
      });
    },
    // Validate due date (should not be in the past)
    validate_due_date() {
      const e = frappe.datetime.now_date(), t = Date.parse(this.invoice_doc.due_date), n = Date.parse(e);
      t < n && (this.invoice_doc.due_date = e);
    },
    // Keyboard shortcut for payment submit (Ctrl+X)
    shortPay(e) {
      e.key.toLowerCase() === "x" && (e.ctrlKey || e.metaKey) && (e.preventDefault(), e.stopPropagation(), this.invoice_doc && this.invoice_doc.payments && this.submit_invoice());
    },
    // Get available customer credit and auto-allocate
    get_available_credit(e) {
      this.clear_all_amounts(), e ? frappe.call("posawesome.posawesome.api.payments.get_available_credit", {
        customer: this.invoice_doc.customer,
        company: this.pos_profile.company
      }).then((t) => {
        const n = t.message;
        if (n.length) {
          let r = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
          n.forEach((i) => {
            r > 0 ? r >= i.total_credit ? (i.credit_to_redeem = i.total_credit, r -= i.total_credit) : (i.credit_to_redeem = r, r = 0) : i.credit_to_redeem = 0;
          }), this.customer_credit_dict = n;
        } else
          this.customer_credit_dict = [];
      }) : this.customer_credit_dict = [];
    },
    // Get customer addresses for shipping
    get_addresses() {
      const e = this;
      if (!e.invoice_doc || !e.invoice_doc.customer) {
        e.addresses = [];
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.customers.get_customer_addresses",
        args: { customer: e.invoice_doc.customer },
        async: !0,
        callback: function(t) {
          t.exc ? e.addresses = [] : e.addresses = t.message;
        }
      });
    },
    // Filter addresses for autocomplete
    addressFilter(e, t) {
      const n = t.toLowerCase();
      return e.address_title && e.address_title.toLowerCase().includes(n) || e.address_line1 && e.address_line1.toLowerCase().includes(n) || e.address_line2 && e.address_line2.toLowerCase().includes(n) || e.city && e.city.toLowerCase().includes(n) || e.name && e.name.toLowerCase().includes(n);
    },
    // Open dialog to add new address
    new_address() {
      if (!this.invoice_doc || !this.invoice_doc.customer) {
        this.eventBus.emit("show_message", {
          title: __("Please select a customer first"),
          color: "error"
        });
        return;
      }
      this.eventBus.emit("open_new_address", this.invoice_doc.customer);
    },
    // Get sales person names from API/localStorage
    get_sales_person_names() {
      const e = this;
      if (e.pos_profile.posa_local_storage && LA().length)
        try {
          e.sales_persons = LA();
        } catch (t) {
          console.error(t);
        }
      frappe.call({
        method: "posawesome.posawesome.api.utilities.get_sales_person_names",
        callback: function(t) {
          t.message && t.message.length > 0 ? (e.sales_persons = t.message.map((n) => ({
            value: n.name,
            title: n.sales_person_name,
            sales_person_name: n.sales_person_name,
            name: n.name
          })), e.pos_profile.posa_local_storage && kQ(e.sales_persons)) : e.sales_persons = [];
        }
      });
    },
    // Request payment for phone type
    request_payment() {
      this.phone_dialog = !1;
      const e = this;
      if (!this.invoice_doc.contact_mobile) {
        this.eventBus.emit("show_message", {
          title: __("Please set the customer's mobile number"),
          color: "error"
        }), this.eventBus.emit("open_edit_customer"), this.back_to_invoice();
        return;
      }
      this.eventBus.emit("freeze", { title: __("Waiting for payment...") }), this.invoice_doc.payments.forEach((n) => {
        n.amount = this.flt(n.amount);
      });
      let t = { ...this.invoice_doc };
      t.total_change = this.invoice_doc.is_return ? 0 : -this.diff_payment, t.paid_change = this.invoice_doc.is_return ? 0 : this.paid_change, t.credit_change = -this.credit_change, t.redeemed_customer_credit = this.redeemed_customer_credit, t.customer_credit_dict = this.customer_credit_dict, t.is_cashback = this.is_cashback, frappe.call({
        method: "posawesome.posawesome.api.invoices.update_invoice",
        args: { data: t },
        async: !1,
        callback: function(n) {
          n.message && (e.invoice_doc = n.message);
        }
      }).then(() => {
        frappe.call({
          method: "posawesome.posawesome.api.payments.create_payment_request",
          args: { doc: e.invoice_doc }
        }).fail(() => {
          e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
            title: __("Payment request failed"),
            color: "error"
          });
        }).then(({ message: n }) => {
          const a = n.name;
          setTimeout(() => {
            frappe.db.get_value("Payment Request", a, [
              "status",
              "grand_total"
            ]).then(({ message: r }) => {
              r.status !== "Paid" ? (e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
                title: __(
                  "Payment Request took too long to respond. Please try requesting for payment again"
                ),
                color: "error"
              })) : (e.eventBus.emit("unfreeze"), e.eventBus.emit("show_message", {
                title: __("Payment of {0} received successfully.", [
                  e.formatCurrency(
                    r.grand_total,
                    e.invoice_doc.currency,
                    0
                  )
                ]),
                color: "success"
              }), frappe.db.get_doc(e.invoice_doc.doctype, e.invoice_doc.name).then((i) => {
                e.invoice_doc = i, e.submit(null, !0);
              }));
            });
          }, 3e4);
        });
      });
    },
    // Get M-Pesa payment modes from backend
    get_mpesa_modes() {
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.m_pesa.get_mpesa_mode_of_payment",
        args: { company: e.pos_profile.company },
        async: !0,
        callback: function(t) {
          t.exc ? e.mpesa_modes = [] : e.mpesa_modes = t.message;
        }
      });
    },
    // Check if payment is M-Pesa C2B
    is_mpesa_c2b_payment(e) {
      return this.mpesa_modes.includes(e.mode_of_payment) && e.type === "Bank" ? (e.amount = 0, !0) : !1;
    },
    // Open M-Pesa payment dialog
    mpesa_c2b_dialog(e) {
      const t = {
        company: this.pos_profile.company,
        mode_of_payment: e.mode_of_payment,
        customer: this.invoice_doc.customer
      };
      this.eventBus.emit("open_mpesa_payments", t);
    },
    // Set M-Pesa payment as customer credit
    set_mpesa_payment(e) {
      this.pos_profile.use_customer_credit = !0, this.redeem_customer_credit = !0;
      const t = this.invoice_doc.rounded_total || this.invoice_doc.grand_total;
      let n = e.unallocated_amount > t ? t : e.unallocated_amount;
      n = n > 0 ? n : 0;
      const a = {
        type: "Advance",
        credit_origin: e.name,
        total_credit: this.flt(e.unallocated_amount),
        credit_to_redeem: this.flt(n)
      };
      this.clear_all_amounts(), this.customer_credit_dict.push(a);
    },
    // Update delivery date after selection
    update_delivery_date() {
      this.invoice_doc.posa_delivery_date = this.formatDate(this.new_delivery_date), this.invoice_doc.customer && (!this.addresses || this.addresses.length === 0) && this.get_addresses();
    },
    // Update purchase order date after selection
    update_po_date() {
      this.invoice_doc.po_date = this.formatDate(this.new_po_date);
    },
    // Update credit due date after selection
    update_credit_due_date() {
      this.invoice_doc.due_date = this.formatDate(this.new_credit_due_date);
    },
    // Apply preset or typed number of days to set due date
    applyDuePreset(e) {
      if (e === null || e === "")
        return;
      const t = Lt.fromArabicNumerals(String(e));
      if (isNaN(t))
        return;
      const n = parseInt(t, 10), a = /* @__PURE__ */ new Date();
      a.setDate(a.getDate() + n), this.new_credit_due_date = this.formatDateDisplay(a), this.credit_due_days = n, this.update_credit_due_date();
    },
    // Apply days entered in dialog
    applyCustomDays() {
      this.applyDuePreset(this.custom_days_value), this.custom_days_dialog = !1;
    },
    // Format date to YYYY-MM-DD
    formatDate(e) {
      if (!e) return null;
      if (typeof e == "string") {
        const n = Lt.fromArabicNumerals(e);
        if (/^\d{4}-\d{2}-\d{2}$/.test(n))
          return n;
        if (/^\d{1,2}-\d{1,2}-\d{4}$/.test(n)) {
          const [a, r, i] = n.split("-");
          return `${i}-${r.padStart(2, "0")}-${a.padStart(2, "0")}`;
        }
        e = n;
      }
      const t = new Date(Lt.fromArabicNumerals(String(e)));
      if (!isNaN(t.getTime())) {
        const n = t.getFullYear(), a = `0${t.getMonth() + 1}`.slice(-2), r = `0${t.getDate()}`.slice(-2);
        return `${n}-${a}-${r}`;
      }
      return Lt.fromArabicNumerals(String(e));
    },
    formatDateDisplay(e) {
      if (!e) return "";
      const t = Lt.fromArabicNumerals(String(e));
      if (typeof e == "string" && /^\d{4}-\d{2}-\d{2}$/.test(t)) {
        const [a, r, i] = t.split("-");
        return Lt.toArabicNumerals(`${i}-${r}-${a}`);
      }
      const n = new Date(t);
      if (!isNaN(n.getTime())) {
        const a = n.getFullYear(), r = `0${n.getMonth() + 1}`.slice(-2), i = `0${n.getDate()}`.slice(-2);
        return Lt.toArabicNumerals(`${i}-${r}-${a}`);
      }
      return Lt.toArabicNumerals(t);
    },
    // Show paid amount info message
    showPaidAmount() {
      this.eventBus.emit("show_message", {
        title: `Total Paid Amount: ${this.formatCurrency(this.total_payments)}`,
        color: "info"
      });
    },
    // Show diff payment info message
    showDiffPayment() {
      this.invoice_doc && this.eventBus.emit("show_message", {
        title: `To Be Paid: ${this.formatCurrency(this.diff_payment)}`,
        color: "info"
      });
    },
    // Show paid change info message
    showPaidChange() {
      this.eventBus.emit("show_message", {
        title: `Paid Change: ${this.formatCurrency(this.paid_change)}`,
        color: "info"
      });
    },
    // Show credit change info message
    showCreditChange(e) {
      e > 0 ? (this.credit_change = e, this.paid_change = -this.diff_payment) : this.credit_change = 0;
    },
    // Get reason why submit buttons are disabled (for debugging)
    getDisabledReason() {
      return this.loading ? "Loading in progress" : this.invoice_doc ? this.pos_profile.posa_enable_restaurant_mode ? "Restaurant mode - buttons should be enabled" : this.pos_profile.posa_allow_sales_order && this.invoiceType === "Order" && !this.invoice_doc.posa_delivery_date ? "Delivery date required for sales order" : "Unknown reason" : "No invoice document";
    },
    // Format currency value
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, this.currency_precision);
    },
    // Get change amount for display
    get_change_amount() {
      return Math.max(0, this.total_payments - this.invoice_doc.grand_total);
    },
    // Sync any invoices stored offline and show pending/synced counts
    async syncPendingInvoices() {
      const e = qs();
      if (e && (this.eventBus.emit("show_message", {
        title: `${e} invoice${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), this.eventBus.emit("pending_invoices_changed", e)), un())
        return;
      const t = await kD();
      t && (t.synced || t.drafted) && (t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline invoice${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      }), t.drafted && this.eventBus.emit("show_message", {
        title: `${t.drafted} offline invoice${t.drafted > 1 ? "s" : ""} saved as draft`,
        color: "warning"
      })), this.eventBus.emit("pending_invoices_changed", qs());
    },
    // Handle KOT printing after invoice submission for Direct Order + KOT mode
    async handle_kot_printing_after_invoice() {
      try {
        if (!(this.pos_profile.posa_enable_restaurant_mode && this.pos_profile.posa_order_mode === "Direct Order + KOT"))
          return;
        if (!this.invoice_doc || !this.invoice_doc.name) {
          console.log("No invoice document available for KOT printing");
          return;
        }
        console.log("Generating KOT for Direct Order + KOT mode, invoice:", this.invoice_doc.name);
        const t = await frappe.call({
          method: "posawesome.posawesome.api.direct_orders.generate_kot_for_invoice",
          args: {
            invoice_name: this.invoice_doc.name
          }
        });
        if (t.message) {
          const n = t.message;
          console.log("Generated KOT data:", n);
          const a = {
            kot_number: `KOT-${this.invoice_doc.name}`,
            order_type: n.order_type || "Direct Order",
            table_number: n.table_number || "",
            customer_name: n.customer_name || "Walk-in Customer",
            datetime: (/* @__PURE__ */ new Date()).toLocaleString(),
            items: n.items || [],
            special_notes: "Direct Order - Print after invoice",
            total_items: n.items ? n.items.length : 0,
            print_width: this.pos_profile.posa_kot_print_width || "58mm"
          }, { printKot: r } = await import("./kot_print-MHdNXsuH.js");
          await r(a, { autoPrint: !0 }), this.eventBus.emit("show_message", {
            title: __("KOT printed successfully for invoice {0}", [this.invoice_doc.name]),
            color: "success"
          });
        } else
          console.log("No KOT data generated for invoice");
      } catch (e) {
        console.error("Error printing KOT after invoice:", e), this.eventBus.emit("show_message", {
          title: __("Error printing KOT: {0}", [e.message || "Unknown error"]),
          color: "warning"
          // Use warning instead of error since invoice was successful
        });
      }
    }
  },
  // Lifecycle hook: created
  created() {
    document.addEventListener("keydown", this.shortPay.bind(this)), this.syncPendingInvoices(), this.eventBus.on("network-online", this.syncPendingInvoices), this.eventBus.on("server-online", this.syncPendingInvoices);
  },
  // Lifecycle hook: mounted
  mounted() {
    this.$nextTick(() => {
      this.eventBus.on("send_invoice_doc_payment", (e) => {
        console.log("Payments component received invoice doc:", {
          name: e.name,
          doctype: e.doctype,
          is_return: e.is_return,
          grand_total: e.grand_total,
          current_invoiceType: this.invoiceType
        }), this.invoice_doc = e, e.doctype === "Sales Invoice" || e.doctype === "POS Invoice" ? (this.invoiceType = "Invoice", console.log("Set invoice type to 'Invoice' based on doctype:", e.doctype)) : e.doctype === "Sales Order" && (this.invoiceType = "Order", console.log("Set invoice type to 'Order' based on doctype:", e.doctype));
        const t = this.invoice_doc.payments.find((n) => n.default === 1);
        if (this.is_credit_sale = !1, this.is_write_off_change = !1, e.is_return) {
          if (this.is_return = !0, this.is_credit_return = !1, e.payments.forEach((n) => {
            n.amount = 0, n.base_amount = 0;
          }), t) {
            const n = e.rounded_total || e.grand_total;
            t.amount = -Math.abs(n), t.base_amount !== void 0 && (t.base_amount = -Math.abs(n));
          }
        } else t && (t.amount = this.flt(
          e.rounded_total || e.grand_total,
          this.currency_precision
        ), this.is_credit_return = !1);
        this.loyalty_amount = 0, this.redeemed_customer_credit = 0, e.customer && this.get_addresses(), this.get_sales_person_names(), this.$forceUpdate(), console.log("Payments component setup complete, invoice type:", this.invoiceType);
      }), this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile, this.stock_settings = e.stock_settings || {}, this.get_mpesa_modes();
      }), this.eventBus.on("add_the_new_address", (e) => {
        this.addresses.push(e), this.$forceUpdate();
      }), this.eventBus.on("update_invoice_type", (e) => {
        console.log("Payments component received invoice type update:", e), this.invoiceType = e, this.invoice_doc && e !== "Order" ? (this.invoice_doc.posa_delivery_date = null, this.invoice_doc.posa_notes = null, this.invoice_doc.shipping_address_name = null) : this.invoice_doc && e === "Order" && (this.new_delivery_date = this.formatDateDisplay(frappe.datetime.now_date()), this.update_delivery_date()), this.invoice_doc && e === "Return" && (this.invoice_doc.is_return = 1, this.ensureReturnPaymentsAreNegative(), this.is_credit_return = !1), this.$forceUpdate(), console.log("Payments component updated invoice type to:", this.invoiceType);
      }), this.eventBus.on("change_invoice_type", (e) => {
        console.log("Payments component received change_invoice_type:", e), this.invoiceType = e, this.$forceUpdate(), console.log("Payments component changed invoice type to:", this.invoiceType);
      }), this.eventBus.on("update_customer", (e) => {
        this.customer !== e && (this.customer_credit_dict = [], this.redeem_customer_credit = !1, this.is_cashback = !0, this.is_credit_return = !1);
      }), this.eventBus.on("set_pos_settings", (e) => {
        this.pos_settings = e;
      }), this.eventBus.on("set_customer_info_to_edit", (e) => {
        this.customer_info = e;
      }), this.eventBus.on("set_mpesa_payment", (e) => {
        this.set_mpesa_payment(e);
      }), this.eventBus.on("clear_invoice", () => {
        this.invoice_doc = "", this.is_return = !1, this.is_credit_return = !1;
      }), this.eventBus.on("show_payment", this.handleShowPayment);
    });
  },
  // Lifecycle hook: beforeUnmount
  beforeUnmount() {
    this.eventBus.off("send_invoice_doc_payment"), this.eventBus.off("register_pos_profile"), this.eventBus.off("add_the_new_address"), this.eventBus.off("update_invoice_type"), this.eventBus.off("change_invoice_type"), this.eventBus.off("update_customer"), this.eventBus.off("set_pos_settings"), this.eventBus.off("set_customer_info_to_edit"), this.eventBus.off("set_mpesa_payment"), this.eventBus.off("clear_invoice"), this.eventBus.off("network-online", this.syncPendingInvoices), this.eventBus.off("server-online", this.syncPendingInvoices), this.eventBus.off("show_payment", this.handleShowPayment);
  },
  // Lifecycle hook: unmounted
  unmounted() {
    document.removeEventListener("keydown", this.shortPay);
  }
}, pae = { class: "pa-0" }, gae = {
  ref: "paymentContainer",
  class: "overflow-y-auto pa-2",
  style: { "max-height": "67vh" }
}, yae = { key: 1 }, bae = ["innerHTML"], wae = ["innerHTML"], kae = ["innerHTML"], Sae = ["innerHTML"], Cae = ["innerHTML"], Aae = ["innerHTML"], xae = ["innerHTML"], Tae = ["innerHTML"], Iae = { key: 4 }, Eae = { class: "mt-1" }, Pae = { key: 5 }, Oae = { class: "pa-2 py-3" }, Dae = {
  key: 0,
  class: "mt-1 mb-1 text-subtitle-2"
}, Bae = {
  key: 1,
  class: "mt-1 mb-1 text-subtitle-2 text-red"
}, Vae = { class: "text-h5 text-primary" };
function Mae(e, t, n, a, r, i) {
  const o = J("v-progress-linear"), l = J("v-text-field"), s = J("v-col"), d = J("v-row"), u = J("v-divider"), f = J("v-btn"), h = J("VueDatePicker"), y = J("v-list-item-title"), p = J("v-list-item-subtitle"), w = J("v-list-item"), b = J("v-autocomplete"), v = J("v-textarea"), g = J("v-switch"), k = J("v-chip"), A = J("v-select"), C = J("v-card"), D = J("v-tooltip"), P = J("v-card-title"), O = J("v-container"), I = J("v-card-text"), x = J("v-spacer"), M = J("v-card-actions"), V = J("v-dialog");
  return te(), Oe("div", pae, [
    _(C, {
      class: Ae(["selection mx-auto pa-1 my-0 mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Je([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "68vh", height: "68vh" }])
    }, {
      default: E(() => [
        _(o, {
          active: r.loading,
          indeterminate: r.loading,
          absolute: "",
          location: "top",
          color: "info"
        }, null, 8, ["active", "indeterminate"]),
        T("div", gae, [
          r.invoice_doc ? (te(), Le(d, {
            key: 0,
            class: "pa-1",
            dense: ""
          }, {
            default: E(() => [
              _(s, { cols: "7" }, {
                default: E(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Paid Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    modelValue: i.total_payments_display,
                    "onUpdate:modelValue": t[0] || (t[0] = (B) => i.total_payments_display = B),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    onClick: i.showPaidAmount
                  }, null, 8, ["label", "bg-color", "modelValue", "prefix", "onClick"])
                ]),
                _: 1
              }),
              _(s, { cols: "5" }, {
                default: E(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: "To Be Paid",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    modelValue: i.diff_payment_display,
                    "onUpdate:modelValue": t[1] || (t[1] = (B) => i.diff_payment_display = B),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    onFocus: i.showDiffPayment,
                    "persistent-placeholder": ""
                  }, null, 8, ["bg-color", "modelValue", "prefix", "onFocus"])
                ]),
                _: 1
              }),
              i.credit_change > 0 && !r.invoice_doc.is_return ? (te(), Le(s, {
                key: 0,
                cols: "7"
              }, {
                default: E(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Paid Change"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(r.paid_change),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    rules: r.paid_change_rules,
                    density: "compact",
                    readonly: "",
                    type: "text",
                    onClick: i.showPaidChange
                  }, null, 8, ["label", "bg-color", "model-value", "prefix", "rules", "onClick"])
                ]),
                _: 1
              })) : ke("", !0),
              i.credit_change > 0 && !r.invoice_doc.is_return ? (te(), Le(s, {
                key: 1,
                cols: "5"
              }, {
                default: E(() => [
                  _(l, {
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Credit Change"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(i.credit_change),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    density: "compact",
                    type: "text",
                    onChange: t[2] || (t[2] = (B) => {
                      e.setFormatedCurrency(this, "credit_change", null, !1, B), e.updateCreditChange(this.credit_change);
                    })
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          })) : ke("", !0),
          _(u),
          r.is_cashback ? (te(), Oe("div", yae, [
            (te(!0), Oe(Ge, null, ln(r.invoice_doc.payments, (B) => (te(), Le(d, {
              class: "payments pa-1",
              key: B.name
            }, {
              default: E(() => [
                i.is_mpesa_c2b_payment(B) ? ke("", !0) : (te(), Le(s, {
                  key: 0,
                  cols: "6"
                }, {
                  default: E(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._(B.mode_of_payment),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      "model-value": i.formatCurrency(B.amount),
                      onChange: (F) => e.setFormatedCurrency(B, "amount", null, !1, F),
                      rules: [
                        e.isNumber,
                        (F) => !B.mode_of_payment.toLowerCase().includes("cash") || this.is_credit_sale || F >= (this.invoice_doc.rounded_total || this.invoice_doc.grand_total) || "Cash payment cannot be less than invoice total when credit sale is off"
                      ],
                      prefix: i.currencySymbol(r.invoice_doc.currency),
                      onFocus: (F) => i.set_rest_amount(B.idx),
                      readonly: r.invoice_doc.is_return
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "rules", "prefix", "onFocus", "readonly"])
                  ]),
                  _: 2
                }, 1024)),
                i.is_mpesa_c2b_payment(B) ? ke("", !0) : (te(), Le(s, {
                  key: 1,
                  cols: "6"
                }, {
                  default: E(() => [
                    _(f, {
                      block: "",
                      color: "primary",
                      theme: "dark",
                      onClick: (F) => i.set_full_amount(B.idx)
                    }, {
                      default: E(() => [
                        ae(j(B.mode_of_payment), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ]),
                  _: 2
                }, 1024)),
                i.is_mpesa_c2b_payment(B) ? (te(), Le(s, {
                  key: 2,
                  cols: "12",
                  class: "pl-3"
                }, {
                  default: E(() => [
                    _(f, {
                      block: "",
                      color: "success",
                      theme: "dark",
                      onClick: (F) => i.mpesa_c2b_dialog(B)
                    }, {
                      default: E(() => [
                        ae(j(e.__("Get Payments")) + " " + j(B.mode_of_payment), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"])
                  ]),
                  _: 2
                }, 1024)) : ke("", !0),
                B.type === "Phone" && B.amount > 0 && i.request_payment_field ? (te(), Le(s, {
                  key: 3,
                  cols: "3",
                  class: "pl-1"
                }, {
                  default: E(() => [
                    _(f, {
                      block: "",
                      color: "success",
                      theme: "dark",
                      disabled: B.amount === 0,
                      onClick: (F) => i.request_payment(B)
                    }, {
                      default: E(() => [
                        ae(j(e.__("Request")), 1)
                      ]),
                      _: 2
                    }, 1032, ["disabled", "onClick"])
                  ]),
                  _: 2
                }, 1024)) : ke("", !0)
              ]),
              _: 2
            }, 1024))), 128))
          ])) : ke("", !0),
          r.invoice_doc && i.available_points_amount > 0 && !r.invoice_doc.is_return ? (te(), Le(d, {
            key: 2,
            class: "payments pa-1"
          }, {
            default: E(() => [
              _(s, { cols: "7" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Redeem Loyalty Points"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.loyalty_amount),
                    type: "text",
                    onChange: t[3] || (t[3] = (B) => e.setFormatedCurrency(this, "loyalty_amount", null, !1, B)),
                    prefix: i.currencySymbol(r.invoice_doc.currency)
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "5" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("You can redeem up to"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": e.formatFloat(i.available_points_amount),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })) : ke("", !0),
          r.invoice_doc && i.available_customer_credit > 0 && !r.invoice_doc.is_return && r.redeem_customer_credit ? (te(), Le(d, {
            key: 3,
            class: "payments pa-1"
          }, {
            default: E(() => [
              _(s, { cols: "7" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Redeemed Customer Credit"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.redeemed_customer_credit),
                    type: "text",
                    onChange: t[4] || (t[4] = (B) => e.setFormatedCurrency(this, "redeemed_customer_credit", null, !1, B)),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "5" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("You can redeem credit up to"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(i.available_customer_credit),
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    readonly: ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })) : ke("", !0),
          _(u),
          _(d, { class: "pa-1" }, {
            default: E(() => [
              _(s, { cols: "6" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Net Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "model-value": i.formatCurrency(r.invoice_doc.net_total, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Tax and Charges"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.total_taxes_and_charges, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Total Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.total, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: i.diff_label,
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(i.diff_payment, i.displayCurrency),
                    readonly: "",
                    prefix: i.currencySymbol(),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Discount Amount"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.discount_amount),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              _(s, { cols: "6" }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Grand Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.grand_total),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              }),
              r.invoice_doc.rounded_total ? (te(), Le(s, {
                key: 0,
                cols: "6"
              }, {
                default: E(() => [
                  _(l, {
                    density: "compact",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Rounded Total"),
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "hide-details": "",
                    "model-value": i.formatCurrency(r.invoice_doc.rounded_total),
                    readonly: "",
                    prefix: i.currencySymbol(r.invoice_doc.currency),
                    "persistent-placeholder": ""
                  }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                ]),
                _: 1
              })) : ke("", !0),
              r.pos_profile.posa_allow_sales_order && r.invoiceType === "Order" ? (te(), Le(s, {
                key: 1,
                cols: "6"
              }, {
                default: E(() => [
                  _(h, {
                    modelValue: r.new_delivery_date,
                    "onUpdate:modelValue": [
                      t[5] || (t[5] = (B) => r.new_delivery_date = B),
                      t[6] || (t[6] = (B) => i.update_delivery_date())
                    ],
                    "model-type": "format",
                    format: "dd-MM-yyyy",
                    "min-date": /* @__PURE__ */ new Date(),
                    "auto-apply": "",
                    dark: i.isDarkTheme,
                    class: "dark-field sleek-field"
                  }, null, 8, ["modelValue", "min-date", "dark"])
                ]),
                _: 1
              })) : ke("", !0),
              r.invoice_doc.posa_delivery_date ? (te(), Le(s, {
                key: 2,
                cols: "12"
              }, {
                default: E(() => [
                  _(b, {
                    density: "compact",
                    clearable: "",
                    "auto-select-first": "",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Address"),
                    modelValue: r.invoice_doc.shipping_address_name,
                    "onUpdate:modelValue": t[7] || (t[7] = (B) => r.invoice_doc.shipping_address_name = B),
                    items: r.addresses,
                    "item-title": "address_title",
                    "item-value": "name",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "no-data-text": e.__("Address not found"),
                    "hide-details": "",
                    customFilter: i.addressFilter,
                    "append-icon": "mdi-plus",
                    "onClick:append": i.new_address
                  }, {
                    item: E(({ item: B }) => [
                      _(w, null, {
                        default: E(() => [
                          _(y, { class: "text-primary text-subtitle-1" }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.address_title
                              }, null, 8, bae)
                            ]),
                            _: 2
                          }, 1024),
                          _(p, null, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.address_line1
                              }, null, 8, wae)
                            ]),
                            _: 2
                          }, 1024),
                          B.address_line2 ? (te(), Le(p, { key: 0 }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.address_line2
                              }, null, 8, kae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          B.city ? (te(), Le(p, { key: 1 }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.city
                              }, null, 8, Sae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          B.state ? (te(), Le(p, { key: 2 }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.state
                              }, null, 8, Cae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          B.country ? (te(), Le(p, { key: 3 }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.country
                              }, null, 8, Aae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          B.mobile_no ? (te(), Le(p, { key: 4 }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.mobile_no
                              }, null, 8, xae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0),
                          B.address_type ? (te(), Le(p, { key: 5 }, {
                            default: E(() => [
                              T("div", {
                                innerHTML: B.address_type
                              }, null, 8, Tae)
                            ]),
                            _: 2
                          }, 1024)) : ke("", !0)
                        ]),
                        _: 2
                      }, 1024)
                    ]),
                    _: 1
                  }, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "customFilter", "onClick:append"])
                ]),
                _: 1
              })) : ke("", !0),
              r.pos_profile.posa_display_additional_notes ? (te(), Le(s, {
                key: 3,
                cols: "12"
              }, {
                default: E(() => [
                  _(v, {
                    class: "pa-0 dark-field sleek-field",
                    variant: "solo",
                    density: "compact",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    clearable: "",
                    color: "primary",
                    "auto-grow": "",
                    rows: "2",
                    label: e.frappe._("Additional Notes"),
                    modelValue: r.invoice_doc.posa_notes,
                    "onUpdate:modelValue": t[8] || (t[8] = (B) => r.invoice_doc.posa_notes = B)
                  }, null, 8, ["bg-color", "label", "modelValue"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          }),
          r.pos_profile.posa_allow_customer_purchase_order ? (te(), Oe("div", Iae, [
            _(u),
            _(d, {
              class: "pa-1",
              justify: "center",
              align: "start"
            }, {
              default: E(() => [
                _(s, { cols: "6" }, {
                  default: E(() => [
                    _(l, {
                      modelValue: r.invoice_doc.po_no,
                      "onUpdate:modelValue": t[9] || (t[9] = (B) => r.invoice_doc.po_no = B),
                      label: e.frappe._("Purchase Order"),
                      variant: "solo",
                      density: "compact",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      clearable: "",
                      color: "primary",
                      "hide-details": ""
                    }, null, 8, ["modelValue", "label", "bg-color"])
                  ]),
                  _: 1
                }),
                _(s, { cols: "6" }, {
                  default: E(() => [
                    _(h, {
                      modelValue: r.new_po_date,
                      "onUpdate:modelValue": [
                        t[10] || (t[10] = (B) => r.new_po_date = B),
                        t[11] || (t[11] = (B) => i.update_po_date())
                      ],
                      "model-type": "format",
                      format: "dd-MM-yyyy",
                      "min-date": /* @__PURE__ */ new Date(),
                      "auto-apply": "",
                      dark: i.isDarkTheme,
                      class: "dark-field sleek-field"
                    }, null, 8, ["modelValue", "min-date", "dark"]),
                    _(l, {
                      modelValue: r.invoice_doc.po_date,
                      "onUpdate:modelValue": t[12] || (t[12] = (B) => r.invoice_doc.po_date = B),
                      label: e.frappe._("Purchase Order Date"),
                      readonly: "",
                      variant: "solo",
                      density: "compact",
                      "hide-details": "",
                      color: "primary"
                    }, null, 8, ["modelValue", "label"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ])) : ke("", !0),
          _(u),
          _(d, {
            class: "pa-1",
            align: "start",
            "no-gutters": ""
          }, {
            default: E(() => [
              r.pos_profile.posa_allow_write_off_change && i.credit_change > 0 && !r.invoice_doc.is_return ? (te(), Le(s, {
                key: 0,
                cols: "6"
              }, {
                default: E(() => [
                  _(g, {
                    modelValue: r.is_write_off_change,
                    "onUpdate:modelValue": t[13] || (t[13] = (B) => r.is_write_off_change = B),
                    flat: "",
                    label: e.frappe._("Write Off Difference Amount"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.pos_profile.posa_allow_credit_sale && !r.invoice_doc.is_return ? (te(), Le(s, {
                key: 1,
                cols: "6"
              }, {
                default: E(() => [
                  _(g, {
                    modelValue: r.is_credit_sale,
                    "onUpdate:modelValue": t[14] || (t[14] = (B) => r.is_credit_sale = B),
                    label: e.frappe._("Credit Sale?")
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.invoice_doc.is_return && r.pos_profile.use_cashback ? (te(), Le(s, {
                key: 2,
                cols: "6"
              }, {
                default: E(() => [
                  _(g, {
                    modelValue: r.is_cashback,
                    "onUpdate:modelValue": t[15] || (t[15] = (B) => r.is_cashback = B),
                    flat: "",
                    label: e.frappe._("Cashback?"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.invoice_doc.is_return ? (te(), Le(s, {
                key: 3,
                cols: "6"
              }, {
                default: E(() => [
                  _(g, {
                    modelValue: r.is_credit_return,
                    "onUpdate:modelValue": t[16] || (t[16] = (B) => r.is_credit_return = B),
                    flat: "",
                    label: e.frappe._("Credit Return?"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0),
              r.is_credit_sale ? (te(), Le(s, {
                key: 4,
                cols: "6"
              }, {
                default: E(() => [
                  _(h, {
                    modelValue: r.new_credit_due_date,
                    "onUpdate:modelValue": [
                      t[17] || (t[17] = (B) => r.new_credit_due_date = B),
                      t[18] || (t[18] = (B) => i.update_credit_due_date())
                    ],
                    "model-type": "format",
                    format: "dd-MM-yyyy",
                    "min-date": /* @__PURE__ */ new Date(),
                    "auto-apply": "",
                    dark: i.isDarkTheme,
                    class: "dark-field sleek-field"
                  }, null, 8, ["modelValue", "min-date", "dark"]),
                  _(l, {
                    class: "mt-2 dark-field sleek-field",
                    density: "compact",
                    variant: "solo",
                    type: "number",
                    min: "0",
                    max: "365",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    modelValue: r.credit_due_days,
                    "onUpdate:modelValue": t[19] || (t[19] = (B) => r.credit_due_days = B),
                    modelModifiers: { number: !0 },
                    label: e.frappe._("Days until due"),
                    "hide-details": "",
                    onChange: t[20] || (t[20] = (B) => i.applyDuePreset(r.credit_due_days))
                  }, null, 8, ["bg-color", "modelValue", "label"]),
                  T("div", Eae, [
                    (te(!0), Oe(Ge, null, ln(r.credit_due_presets, (B) => (te(), Le(k, {
                      key: B,
                      size: "small",
                      class: "ma-1",
                      variant: "solo",
                      color: "primary",
                      onClick: (F) => i.applyDuePreset(B)
                    }, {
                      default: E(() => [
                        ae(j(B) + " " + j(e.frappe._("days")), 1)
                      ]),
                      _: 2
                    }, 1032, ["onClick"]))), 128))
                  ])
                ]),
                _: 1
              })) : ke("", !0),
              !r.invoice_doc.is_return && r.pos_profile.use_customer_credit ? (te(), Le(s, {
                key: 5,
                cols: "6"
              }, {
                default: E(() => [
                  _(g, {
                    modelValue: r.redeem_customer_credit,
                    "onUpdate:modelValue": [
                      t[21] || (t[21] = (B) => r.redeem_customer_credit = B),
                      t[22] || (t[22] = (B) => i.get_available_credit(r.redeem_customer_credit))
                    ],
                    flat: "",
                    label: e.frappe._("Use Customer Credit"),
                    class: "my-0 pa-1"
                  }, null, 8, ["modelValue", "label"])
                ]),
                _: 1
              })) : ke("", !0)
            ]),
            _: 1
          }),
          r.invoice_doc && i.available_customer_credit > 0 && !r.invoice_doc.is_return && r.redeem_customer_credit ? (te(), Oe("div", Pae, [
            (te(!0), Oe(Ge, null, ln(r.customer_credit_dict, (B, F) => (te(), Le(d, { key: F }, {
              default: E(() => [
                _(s, { cols: "4" }, {
                  default: E(() => [
                    T("div", Oae, j(B.credit_origin), 1)
                  ]),
                  _: 2
                }, 1024),
                _(s, { cols: "4" }, {
                  default: E(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Available Credit"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      "model-value": i.formatCurrency(B.total_credit),
                      readonly: "",
                      prefix: i.currencySymbol(r.invoice_doc.currency)
                    }, null, 8, ["label", "bg-color", "model-value", "prefix"])
                  ]),
                  _: 2
                }, 1024),
                _(s, { cols: "4" }, {
                  default: E(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Redeem Credit"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      type: "text",
                      "model-value": i.formatCurrency(B.credit_to_redeem),
                      onChange: (H) => e.setFormatedCurrency(B, "credit_to_redeem", null, !1, H),
                      prefix: i.currencySymbol(r.invoice_doc.currency)
                    }, null, 8, ["label", "bg-color", "model-value", "onChange", "prefix"])
                  ]),
                  _: 2
                }, 1024)
              ]),
              _: 2
            }, 1024))), 128))
          ])) : ke("", !0),
          _(u),
          _(d, {
            class: "pb-0 mb-2",
            align: "start"
          }, {
            default: E(() => [
              _(s, { cols: "12" }, {
                default: E(() => [
                  r.sales_persons && r.sales_persons.length > 0 ? (te(), Oe("p", Dae, j(r.sales_persons.length) + " sales persons found ", 1)) : (te(), Oe("p", Bae, "No sales persons found")),
                  _(A, {
                    density: "compact",
                    clearable: "",
                    variant: "solo",
                    color: "primary",
                    label: e.frappe._("Sales Person"),
                    modelValue: r.sales_person,
                    "onUpdate:modelValue": t[23] || (t[23] = (B) => r.sales_person = B),
                    items: r.sales_persons,
                    "item-title": "title",
                    "item-value": "value",
                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                    class: "dark-field sleek-field",
                    "no-data-text": e.__("Sales Person not found"),
                    "hide-details": "",
                    disabled: e.readonly
                  }, null, 8, ["label", "modelValue", "items", "bg-color", "no-data-text", "disabled"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ], 512)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(C, {
      flat: "",
      class: "cards mb-0 mt-3 pa-0"
    }, {
      default: E(() => [
        _(d, {
          align: "start",
          "no-gutters": ""
        }, {
          default: E(() => [
            _(s, { cols: "6" }, {
              default: E(() => [
                _(f, {
                  ref: "submitButton",
                  block: "",
                  size: "large",
                  color: "primary",
                  theme: "dark",
                  onClick: i.submit,
                  loading: r.loading,
                  disabled: r.loading || i.vaildatPayment,
                  class: Ae({ "submit-highlight": r.highlightSubmit })
                }, {
                  default: E(() => [
                    ae(j(i.getSubmitButtonText()) + " ", 1),
                    i.vaildatPayment ? (te(), Le(D, {
                      key: 0,
                      activator: "parent",
                      location: "top"
                    }, {
                      default: E(() => [
                        T("span", null, "Button disabled: " + j(i.getDisabledReason()), 1)
                      ]),
                      _: 1
                    })) : ke("", !0)
                  ]),
                  _: 1
                }, 8, ["onClick", "loading", "disabled", "class"])
              ]),
              _: 1
            }),
            _(s, {
              cols: "6",
              class: "pl-1"
            }, {
              default: E(() => [
                _(f, {
                  block: "",
                  size: "large",
                  color: "success",
                  theme: "dark",
                  onClick: t[24] || (t[24] = (B) => i.submit(void 0, !1, !0)),
                  loading: r.loading,
                  disabled: r.loading || i.vaildatPayment
                }, {
                  default: E(() => [
                    ae(j(i.getSubmitPrintButtonText()) + " ", 1),
                    i.vaildatPayment ? (te(), Le(D, {
                      key: 0,
                      activator: "parent",
                      location: "top"
                    }, {
                      default: E(() => [
                        T("span", null, "Button disabled: " + j(i.getDisabledReason()), 1)
                      ]),
                      _: 1
                    })) : ke("", !0)
                  ]),
                  _: 1
                }, 8, ["loading", "disabled"])
              ]),
              _: 1
            }),
            i.showKOTPrintButton ? (te(), Le(s, {
              key: 0,
              cols: "12",
              class: "mt-2"
            }, {
              default: E(() => [
                _(f, {
                  block: "",
                  size: "large",
                  color: "orange",
                  theme: "dark",
                  onClick: i.print_kot_for_invoice,
                  loading: r.loading,
                  "prepend-icon": "mdi-printer"
                }, {
                  default: E(() => [
                    ae(j(e.__("Print KOT")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick", "loading"])
              ]),
              _: 1
            })) : ke("", !0),
            _(s, { cols: "12" }, {
              default: E(() => [
                _(f, {
                  block: "",
                  class: "mt-2 pa-1",
                  size: "large",
                  color: "error",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: E(() => [
                    ae(j(e.__("Cancel Payment")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }),
    r.showDebugInfo ? (te(), Le(C, {
      key: 0,
      flat: "",
      class: "cards mb-0 mt-2 pa-2",
      style: { "font-size": "12px" }
    }, {
      default: E(() => [
        _(d, { dense: "" }, {
          default: E(() => [
            _(s, { cols: "12" }, {
              default: E(() => [
                t[33] || (t[33] = T("strong", null, "Payment Debug Info:", -1)),
                t[34] || (t[34] = T("br", null, null, -1)),
                ae(" Invoice Type: " + j(r.invoiceType), 1),
                t[35] || (t[35] = T("br", null, null, -1)),
                ae(" Invoice Doc Type: " + j(r.invoice_doc?.doctype), 1),
                t[36] || (t[36] = T("br", null, null, -1)),
                ae(" Invoice Doc Name: " + j(r.invoice_doc?.name), 1),
                t[37] || (t[37] = T("br", null, null, -1)),
                ae(" Is Return: " + j(r.invoice_doc?.is_return), 1),
                t[38] || (t[38] = T("br", null, null, -1)),
                ae(" Restaurant Mode: " + j(r.pos_profile?.posa_enable_restaurant_mode), 1),
                t[39] || (t[39] = T("br", null, null, -1)),
                ae(" Validation Result: " + j(i.vaildatPayment), 1),
                t[40] || (t[40] = T("br", null, null, -1)),
                ae(" Loading: " + j(r.loading), 1),
                t[41] || (t[41] = T("br", null, null, -1)),
                ae(" Grand Total: " + j(r.invoice_doc?.grand_total), 1),
                t[42] || (t[42] = T("br", null, null, -1)),
                ae(" Rounded Total: " + j(r.invoice_doc?.rounded_total), 1),
                t[43] || (t[43] = T("br", null, null, -1)),
                ae(" Delivery Date: " + j(r.invoice_doc?.posa_delivery_date), 1),
                t[44] || (t[44] = T("br", null, null, -1)),
                ae(" Disabled Reason: " + j(i.getDisabledReason()), 1)
              ]),
              _: 1,
              __: [33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44]
            })
          ]),
          _: 1
        }),
        _(f, {
          size: "small",
          onClick: t[25] || (t[25] = (B) => r.showDebugInfo = !1),
          class: "mt-2"
        }, {
          default: E(() => t[45] || (t[45] = [
            ae("Hide Debug", -1)
          ])),
          _: 1,
          __: [45]
        })
      ]),
      _: 1
    })) : ke("", !0),
    r.showDebugInfo ? ke("", !0) : (te(), Le(f, {
      key: 1,
      size: "small",
      variant: "text",
      onClick: t[26] || (t[26] = (B) => r.showDebugInfo = !0),
      class: "mt-1"
    }, {
      default: E(() => t[46] || (t[46] = [
        ae(" Show Debug Info ", -1)
      ])),
      _: 1,
      __: [46]
    })),
    _(V, {
      modelValue: r.custom_days_dialog,
      "onUpdate:modelValue": t[29] || (t[29] = (B) => r.custom_days_dialog = B),
      "max-width": "300px"
    }, {
      default: E(() => [
        _(C, null, {
          default: E(() => [
            _(P, { class: "text-h6" }, {
              default: E(() => [
                ae(j(e.__("Custom Due Days")), 1)
              ]),
              _: 1
            }),
            _(I, { class: "pa-0" }, {
              default: E(() => [
                _(O, null, {
                  default: E(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      type: "number",
                      min: "0",
                      max: "365",
                      class: "dark-field sleek-field",
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      modelValue: r.custom_days_value,
                      "onUpdate:modelValue": t[27] || (t[27] = (B) => r.custom_days_value = B),
                      modelModifiers: { number: !0 },
                      label: e.frappe._("Days"),
                      "hide-details": ""
                    }, null, 8, ["bg-color", "modelValue", "label"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            _(M, null, {
              default: E(() => [
                _(x),
                _(f, {
                  color: "error",
                  theme: "dark",
                  onClick: t[28] || (t[28] = (B) => r.custom_days_dialog = !1)
                }, {
                  default: E(() => [
                    ae(j(e.__("Close")), 1)
                  ]),
                  _: 1
                }),
                _(f, {
                  color: "primary",
                  theme: "dark",
                  onClick: i.applyCustomDays
                }, {
                  default: E(() => [
                    ae(j(e.__("Apply")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"]),
    _(V, {
      modelValue: r.phone_dialog,
      "onUpdate:modelValue": t[32] || (t[32] = (B) => r.phone_dialog = B),
      "max-width": "400px"
    }, {
      default: E(() => [
        _(C, null, {
          default: E(() => [
            _(P, null, {
              default: E(() => [
                T("span", Vae, j(e.__("Confirm Mobile Number")), 1)
              ]),
              _: 1
            }),
            _(I, { class: "pa-0" }, {
              default: E(() => [
                _(O, null, {
                  default: E(() => [
                    _(l, {
                      density: "compact",
                      variant: "solo",
                      color: "primary",
                      label: e.frappe._("Mobile Number"),
                      "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                      class: "dark-field sleek-field",
                      "hide-details": "",
                      modelValue: r.invoice_doc.contact_mobile,
                      "onUpdate:modelValue": t[30] || (t[30] = (B) => r.invoice_doc.contact_mobile = B),
                      type: "number"
                    }, null, 8, ["label", "bg-color", "modelValue"])
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            _(M, null, {
              default: E(() => [
                _(x),
                _(f, {
                  color: "error",
                  theme: "dark",
                  onClick: t[31] || (t[31] = (B) => r.phone_dialog = !1)
                }, {
                  default: E(() => [
                    ae(j(e.__("Close")), 1)
                  ]),
                  _: 1
                }),
                _(f, {
                  color: "primary",
                  theme: "dark",
                  onClick: i.request_payment
                }, {
                  default: E(() => [
                    ae(j(e.__("Request")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 8, ["modelValue"])
  ]);
}
const Lae = /* @__PURE__ */ on(vae, [["render", Mae], ["__scopeId", "data-v-36456736"]]), Rae = {
  mixins: [Bi],
  data: () => ({
    loading: !1,
    pos_profile: "",
    pos_offers: [],
    allItems: [],
    groupItemCache: {},
    discount_percentage_offer_name: null,
    itemsPerPage: 1e3,
    expanded: [],
    singleExpand: !0,
    items_headers: [
      { title: __("Name"), value: "name", align: "start" },
      { title: __("Apply On"), value: "apply_on", align: "start" },
      { title: __("Offer"), value: "offer", align: "start" },
      { title: __("Applied"), value: "offer_applied", align: "start" }
    ]
  }),
  computed: {
    offersCount() {
      return this.pos_offers.length;
    },
    appliedOffersCount() {
      return this.pos_offers.filter((e) => !!e.offer_applied).length;
    },
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  methods: {
    back_to_invoice() {
      this.eventBus.emit("show_offers", "false");
    },
    async fetchGroupItems(e) {
      try {
        const { message: t } = await frappe.call({
          method: "posawesome.posawesome.api.items.get_items",
          args: {
            pos_profile: JSON.stringify(this.pos_profile),
            item_group: e
            // fetch complete inventory; backend paginates internally
          }
        }), n = t || [];
        this.groupItemCache[e] = n.map((i) => ({
          item_code: i.item_code,
          item_name: i.item_name || i.item_code,
          rate: i.price_list_rate
        }));
        const a = new Set(this.allItems.map((i) => i.item_code)), r = n.filter((i) => !a.has(i.item_code));
        r.length && (this.allItems.push(...r), this.eventBus.emit("set_all_items", this.allItems)), this.forceUpdateItem();
      } catch (t) {
        console.error("Failed to fetch group items", t);
      }
    },
    forceUpdateItem() {
      let e = [];
      e = [...this.pos_offers], this.pos_offers = e;
    },
    toggleOfferApplied() {
      this.forceUpdateItem();
    },
    makeid(e) {
      let t = "";
      const n = "abcdefghijklmnopqrstuvwxyz0123456789", a = n.length;
      for (var r = 0; r < e; r++)
        t += n.charAt(Math.floor(Math.random() * a));
      return t;
    },
    updatePosOffers(e) {
      const t = [];
      this.pos_offers.forEach((n) => {
        e.find((r) => r.name === n.name) || t.push(n.row_id);
      }), this.removeOffers(t), e.forEach((n) => {
        const a = this.pos_offers.find((r) => n.name === r.name);
        if (a)
          a.items = n.items, a.offer === "Grand Total" && !this.discount_percentage_offer_name && (a.offer_applied = !!a.auto), n.apply_on == "Item Group" && n.apply_type == "Item Group" && n.replace_cheapest_item && (a.give_item = n.give_item, a.apply_item_code = n.apply_item_code);
        else {
          const r = { ...n };
          if (n.row_id || (r.row_id = this.makeid(20)), n.apply_type == "Item Code" && (r.give_item = n.apply_item_code || "Nothing"), n.offer_applied ? r.offer_applied == !!n.offer_applied : n.apply_type == "Item Group" && n.offer == "Give Product" && !n.replace_cheapest_item && !n.replace_item || n.offer === "Grand Total" && this.discount_percentage_offer_name ? r.offer_applied = !1 : r.offer_applied = !!n.auto, r.offer == "Give Product" && !r.give_item) {
            const i = this.get_give_items(r);
            i.length && (r.give_item = i[0].item_code);
          }
          this.pos_offers.push(r), this.eventBus.emit("show_message", {
            title: __("New Offer Available"),
            color: "warning"
          });
        }
      });
    },
    removeOffers(e) {
      this.pos_offers = this.pos_offers.filter((t) => !e.includes(t.row_id));
    },
    handelOffers() {
      const e = this.pos_offers.filter((t) => t.offer_applied);
      this.eventBus.emit("update_invoice_offers", e);
    },
    handleNewLine(e) {
      return e ? e.replace(/(?:\r\n|\r|\n)/g, "<br />") : "";
    },
    get_give_items(e) {
      if (e.apply_type === "Item Code")
        return [
          {
            item_code: e.apply_item_code,
            item_name: e.apply_item_code
          }
        ];
      if (e.apply_type === "Item Group") {
        const t = e.apply_item_group;
        if (!this.groupItemCache[t])
          return this.fetchGroupItems(t), [];
        let n = this.groupItemCache[t];
        e.less_then > 0 && (n = n.filter(
          (i) => i.rate < e.less_then
        ));
        const a = [], r = /* @__PURE__ */ new Set();
        return n.forEach((i) => {
          r.has(i.item_code) || (r.add(i.item_code), a.push({
            item_code: i.item_code,
            item_name: i.item_name || i.item_code
          }));
        }), a;
      }
      return [];
    },
    updateCounters() {
      this.eventBus.emit("update_offers_counters", {
        offersCount: this.offersCount,
        appliedOffersCount: this.appliedOffersCount
      });
    },
    updatePosCoupuns() {
      const e = this.pos_offers.filter(
        (t) => t.offer_applied && t.coupon_based
      );
      this.eventBus.emit("update_pos_coupons", e);
    }
  },
  watch: {
    pos_offers: {
      deep: !0,
      handler() {
        this.handelOffers(), this.updateCounters(), this.updatePosCoupuns();
      }
    }
  },
  created: function() {
    this.$nextTick(function() {
      this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile;
      });
    }), this.eventBus.on("update_customer", (e) => {
      this.customer != e && (this.offers = []);
    }), this.eventBus.on("update_pos_offers", (e) => {
      this.updatePosOffers(e);
    }), this.eventBus.on("update_discount_percentage_offer_name", (e) => {
      this.discount_percentage_offer_name = e.value;
    }), this.eventBus.on("set_all_items", (e) => {
      this.allItems = e;
    });
  }
}, Fae = { class: "text-h6 text-primary" }, Nae = ["colspan"], Uae = ["innerHTML"];
function $ae(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-checkbox-btn"), s = J("v-col"), d = J("v-autocomplete"), u = J("v-row"), f = J("v-data-table"), h = J("v-card"), y = J("v-btn");
  return te(), Oe("div", null, [
    _(h, {
      class: Ae(["selection mx-auto mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Je([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "80vh", height: "80vh" }])
    }, {
      default: E(() => [
        _(o, null, {
          default: E(() => [
            T("span", Fae, j(e.__("Offers")), 1)
          ]),
          _: 1
        }),
        T("div", {
          class: "my-0 py-0 overflow-y-auto",
          style: { "max-height": "75vh" },
          onMouseover: t[1] || (t[1] = (p) => e.style = "cursor: pointer")
        }, [
          _(f, {
            headers: e.items_headers,
            items: e.pos_offers,
            "single-expand": e.singleExpand,
            expanded: e.expanded,
            "onUpdate:expanded": t[0] || (t[0] = (p) => e.expanded = p),
            "show-expand": "",
            "item-value": "row_id",
            class: "elevation-1",
            "items-per-page": e.itemsPerPage,
            "hide-default-footer": ""
          }, {
            "item.offer_applied": E(({ item: p }) => [
              _(l, {
                onClick: i.toggleOfferApplied,
                modelValue: p.offer_applied,
                "onUpdate:modelValue": (w) => p.offer_applied = w,
                disabled: p.offer == "Give Product" && !p.give_item && (!p.replace_cheapest_item || !p.replace_item) || p.offer == "Grand Total" && e.discount_percentage_offer_name && e.discount_percentage_offer_name != p.name
              }, null, 8, ["onClick", "modelValue", "onUpdate:modelValue", "disabled"])
            ]),
            "expanded-row": E(({ item: p }) => [
              T("td", {
                colspan: e.items_headers.length
              }, [
                _(u, { class: "mt-2" }, {
                  default: E(() => [
                    p.description ? (te(), Le(s, { key: 0 }, {
                      default: E(() => [
                        T("div", {
                          class: "text-primary",
                          innerHTML: i.handleNewLine(p.description)
                        }, null, 8, Uae)
                      ]),
                      _: 2
                    }, 1024)) : ke("", !0),
                    p.offer == "Give Product" ? (te(), Le(s, { key: 1 }, {
                      default: E(() => [
                        _(d, {
                          modelValue: p.give_item,
                          "onUpdate:modelValue": (w) => p.give_item = w,
                          items: i.get_give_items(p),
                          "item-title": "item_name",
                          "item-value": "item_code",
                          variant: "outlined",
                          density: "compact",
                          color: "primary",
                          label: e.frappe._("Give Item"),
                          disabled: p.apply_type != "Item Group" || p.replace_item || p.replace_cheapest_item
                        }, null, 8, ["modelValue", "onUpdate:modelValue", "items", "label", "disabled"])
                      ]),
                      _: 2
                    }, 1024)) : ke("", !0)
                  ]),
                  _: 2
                }, 1024)
              ], 8, Nae)
            ]),
            _: 1
          }, 8, ["headers", "items", "single-expand", "expanded", "items-per-page"])
        ], 32)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(h, {
      flat: "",
      style: { "max-height": "11vh", height: "11vh" },
      class: "cards mb-0 mt-3 py-0"
    }, {
      default: E(() => [
        _(u, {
          align: "start",
          "no-gutters": ""
        }, {
          default: E(() => [
            _(s, { cols: "12" }, {
              default: E(() => [
                _(y, {
                  block: "",
                  class: "pa-1",
                  size: "large",
                  color: "warning",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: E(() => [
                    ae(j(e.__("Back")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    })
  ]);
}
const qae = /* @__PURE__ */ on(Rae, [["render", $ae]]), Hae = {
  data: () => ({
    loading: !1,
    pos_profile: "",
    customer: "",
    posa_coupons: [],
    new_coupon: null,
    itemsPerPage: 1e3,
    singleExpand: !0,
    items_headers: [
      { title: __("Coupon"), value: "coupon_code", align: "start" },
      { title: __("Type"), value: "type", align: "start" },
      { title: __("Offer"), value: "pos_offer", align: "start" },
      { title: __("Applied"), value: "applied", align: "start" }
    ]
  }),
  computed: {
    couponsCount() {
      return this.posa_coupons.length;
    },
    appliedCouponsCount() {
      return this.posa_coupons.filter((e) => !!e.applied).length;
    },
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  methods: {
    back_to_invoice() {
      this.eventBus.emit("show_coupons", "false");
    },
    add_coupon(e) {
      if (!this.customer || !e) {
        this.eventBus.emit("show_message", {
          title: __("Select a customer to use coupon"),
          color: "error"
        });
        return;
      }
      if (this.posa_coupons.find((a) => a.coupon_code == e)) {
        this.eventBus.emit("show_message", {
          title: __("This coupon already used !"),
          color: "error"
        });
        return;
      }
      const n = this;
      frappe.call({
        method: "posawesome.posawesome.api.offers.get_pos_coupon",
        args: {
          coupon: e,
          customer: n.customer,
          company: n.pos_profile.company
        },
        callback: function(a) {
          if (a.message) {
            const r = a.message;
            if (r.msg != "Apply" || !r.coupon)
              n.eventBus.emit("show_message", {
                title: r.msg,
                color: "error"
              });
            else {
              n.new_coupon = null;
              const i = r.coupon;
              n.posa_coupons.push({
                coupon: i.name,
                coupon_code: i.coupon_code,
                type: i.coupon_type,
                applied: 0,
                pos_offer: i.pos_offer,
                customer: i.customer || n.customer
              });
            }
          }
        }
      });
    },
    setActiveGiftCoupons() {
      if (!this.customer) return;
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.offers.get_active_gift_coupons",
        args: {
          customer: e.customer,
          company: e.pos_profile.company
        },
        callback: function(t) {
          t.message && t.message.forEach((a) => {
            e.add_coupon(a);
          });
        }
      });
    },
    updatePosCoupons(e) {
      this.posa_coupons.forEach((t) => {
        e.find((a) => a.offer_applied && a.coupon == t.coupon) ? t.applied = 1 : t.applied = 0;
      });
    },
    removeCoupon(e) {
      this.posa_coupons = this.posa_coupons.filter((t) => !e.includes(t.coupon));
    },
    updateInvoice() {
      this.eventBus.emit("update_invoice_coupons", this.posa_coupons);
    },
    updateCounters() {
      this.eventBus.emit("update_coupons_counters", {
        couponsCount: this.couponsCount,
        appliedCouponsCount: this.appliedCouponsCount
      });
    }
  },
  watch: {
    posa_coupons: {
      deep: !0,
      handler() {
        this.updateInvoice(), this.updateCounters();
      }
    }
  },
  created: function() {
    this.$nextTick(function() {
      this.eventBus.on("register_pos_profile", (e) => {
        this.pos_profile = e.pos_profile;
      });
    }), this.eventBus.on("update_customer", (e) => {
      if (this.customer != e) {
        const t = [];
        this.posa_coupons.forEach((n) => {
          n.type == "Promotional" ? n.customer = e : t.push(n.coupon);
        }), this.customer = e, t.length && this.removeCoupon(t);
      }
      this.setActiveGiftCoupons();
    }), this.eventBus.on("update_pos_coupons", (e) => {
      this.updatePosCoupons(e);
    }), this.eventBus.on("set_pos_coupons", (e) => {
      this.posa_coupons = e;
    });
  }
}, zae = { class: "text-h6 text-primary" };
function Wae(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-col"), d = J("v-btn"), u = J("v-row"), f = J("v-checkbox-btn"), h = J("v-data-table"), y = J("v-card");
  return te(), Oe("div", null, [
    _(y, {
      class: Ae(["selection mx-auto mt-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
      style: Je([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "80vh", height: "80vh" }])
    }, {
      default: E(() => [
        _(o, null, {
          default: E(() => [
            T("span", zae, j(e.__("Coupons")), 1)
          ]),
          _: 1
        }),
        _(u, {
          class: "px-4 pb-2",
          "no-gutters": ""
        }, {
          default: E(() => [
            _(s, {
              cols: "8",
              class: "pr-2"
            }, {
              default: E(() => [
                _(l, {
                  density: "compact",
                  variant: "outlined",
                  color: "primary",
                  label: e.frappe._("Coupon"),
                  "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                  "hide-details": "",
                  modelValue: e.new_coupon,
                  "onUpdate:modelValue": t[0] || (t[0] = (p) => e.new_coupon = p),
                  class: "coupon-input",
                  onKeydown: t[1] || (t[1] = Ll((p) => i.add_coupon(e.new_coupon), ["enter"]))
                }, null, 8, ["label", "bg-color", "modelValue"])
              ]),
              _: 1
            }),
            _(s, { cols: "4" }, {
              default: E(() => [
                _(d, {
                  class: "add-coupon-btn",
                  color: "success",
                  theme: "dark",
                  block: "",
                  onClick: t[2] || (t[2] = (p) => i.add_coupon(e.new_coupon))
                }, {
                  default: E(() => [
                    ae(j(e.__("add")), 1)
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        }),
        T("div", {
          class: "my-0 py-0 overflow-y-auto",
          style: { "max-height": "75vh" },
          onMouseover: t[4] || (t[4] = (p) => e.style = "cursor: pointer")
        }, [
          _(h, {
            headers: e.items_headers,
            items: e.posa_coupons,
            "single-expand": e.singleExpand,
            expanded: e.expanded,
            "onUpdate:expanded": t[3] || (t[3] = (p) => e.expanded = p),
            "item-key": "coupon",
            class: "elevation-1",
            "items-per-page": e.itemsPerPage,
            "hide-default-footer": ""
          }, {
            "item.applied": E(({ item: p }) => [
              _(f, {
                modelValue: p.applied,
                "onUpdate:modelValue": (w) => p.applied = w,
                disabled: ""
              }, null, 8, ["modelValue", "onUpdate:modelValue"])
            ]),
            _: 1
          }, 8, ["headers", "items", "single-expand", "expanded", "items-per-page"])
        ], 32)
      ]),
      _: 1
    }, 8, ["class", "style"]),
    _(y, {
      flat: "",
      style: { "max-height": "11vh", height: "11vh" },
      class: "cards mb-0 mt-3 py-0"
    }, {
      default: E(() => [
        _(u, {
          align: "start",
          "no-gutters": ""
        }, {
          default: E(() => [
            _(s, { cols: "12" }, {
              default: E(() => [
                _(d, {
                  block: "",
                  class: "pa-1",
                  size: "large",
                  color: "warning",
                  theme: "dark",
                  onClick: i.back_to_invoice
                }, {
                  default: E(() => [
                    ae(j(e.__("Back")), 1)
                  ]),
                  _: 1
                }, 8, ["onClick"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ]),
      _: 1
    })
  ]);
}
const Kae = /* @__PURE__ */ on(Hae, [["render", Wae], ["__scopeId", "data-v-9520f66e"]]), jae = {
  // props: ["draftsDialog"],
  mixins: [Bi],
  data: () => ({
    draftsDialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: {},
    headers: [
      {
        title: __("Customer"),
        value: "customer_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      },
      {
        title: __("Time"),
        align: "start",
        sortable: !0,
        value: "posting_time"
      },
      {
        title: __("Invoice"),
        value: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.draftsDialog = !1;
    },
    submit_dialog() {
      this.selected.length > 0 ? (this.eventBus.emit("load_invoice", this.selected[0]), this.draftsDialog = !1) : this.eventBus.emit("show_message", {
        title: "Select an invoice to load",
        color: "error"
      });
    }
  },
  created: function() {
    this.eventBus.on("open_drafts", (e) => {
      this.draftsDialog = !0, this.dialog_data = e;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_drafts");
  }
}, Yae = { class: "text-h5 text-primary" }, Gae = { class: "text-primary" };
function Qae(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-card-subtitle"), s = J("v-data-table"), d = J("v-col"), u = J("v-row"), f = J("v-container"), h = J("v-card-text"), y = J("v-spacer"), p = J("v-btn"), w = J("v-card-actions"), b = J("v-card"), v = J("v-dialog");
  return te(), Le(u, { justify: "center" }, {
    default: E(() => [
      _(v, {
        modelValue: e.draftsDialog,
        "onUpdate:modelValue": t[1] || (t[1] = (g) => e.draftsDialog = g),
        "max-width": "900px"
      }, {
        default: E(() => [
          _(b, {
            variant: "flat",
            color: i.isDarkTheme ? e.$vuetify.theme.themes.dark.colors.surface : "white"
          }, {
            default: E(() => [
              _(o, null, {
                default: E(() => [
                  T("span", Yae, j(e.__("Load Sales Invoice")), 1)
                ]),
                _: 1
              }),
              _(l, null, {
                default: E(() => [
                  T("span", Gae, j(e.__("Load previously saved invoices")), 1)
                ]),
                _: 1
              }),
              _(h, { class: "pa-0" }, {
                default: E(() => [
                  _(f, null, {
                    default: E(() => [
                      _(u, { "no-gutters": "" }, {
                        default: E(() => [
                          _(d, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: E(() => [
                              _(s, {
                                headers: e.headers,
                                items: e.dialog_data,
                                "item-value": "name",
                                class: "elevation-1",
                                theme: i.isDarkTheme ? "dark" : "light",
                                "show-select": "",
                                modelValue: e.selected,
                                "onUpdate:modelValue": t[0] || (t[0] = (g) => e.selected = g),
                                "select-strategy": "single",
                                "return-object": ""
                              }, {
                                "item.posting_time": E(({ item: g }) => [
                                  ae(j(g.posting_time.split(".")[0]), 1)
                                ]),
                                "item.grand_total": E(({ item: g }) => [
                                  ae(j(e.currencySymbol(g.currency)) + " " + j(e.formatCurrency(g.grand_total)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "theme", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(w, null, {
                default: E(() => [
                  _(y),
                  _(p, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => t[2] || (t[2] = [
                      ae("Close", -1)
                    ])),
                    _: 1,
                    __: [2]
                  }, 8, ["onClick"]),
                  _(p, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: E(() => t[3] || (t[3] = [
                      ae("Load Sale", -1)
                    ])),
                    _: 1,
                    __: [3]
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 8, ["color"])
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Jae = /* @__PURE__ */ on(jae, [["render", Qae]]), Xae = {
  // props: ["draftsDialog"],
  mixins: [Bi],
  data: () => ({
    draftsDialog: !1,
    singleSelect: !0,
    pos_profile: {},
    selected: [],
    dialog_data: {},
    order_name: "",
    headers: [
      {
        title: __("Customer"),
        key: "customer_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        key: "transaction_date"
      },
      //   {
      //     title: __("Time"),
      //     align: "start",
      //     sortable: true,
      //     key: "posting_time",
      //   },
      {
        title: __("Order"),
        key: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        key: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.draftsDialog = !1;
    },
    clearSelected() {
      this.selected = [];
    },
    search_orders() {
      frappe.call({
        method: "posawesome.posawesome.api.sales_orders.search_orders",
        args: {
          order_name: vm.order_name,
          company: this.pos_profile.company,
          currency: this.pos_profile.currency
        },
        async: !1,
        callback: function(e) {
          e.message && (vm.dialog_data = e.message);
        }
      });
    },
    async submit_dialog() {
      if (this.selected.length > 0) {
        var e = {};
        if (await frappe.call({
          method: "posawesome.posawesome.api.invoices.create_sales_invoice_from_order",
          args: {
            sales_order: this.selected[0].name
          },
          callback: function(t) {
            t.message && (e = t.message);
          }
        }), e.items) {
          const t = this.selected[0].items, n = e.items, a = {};
          n.forEach((r) => {
            a[r.item_code] = r;
          });
          for (let r = 0; r < t.length; r++) {
            const i = t[r], o = a[i.item_code];
            o ? (i.qty = o.qty, i.amount = o.amount, i.uom = o.uom, i.rate = o.rate) : (t.splice(r, 1), r--);
          }
        }
        this.eventBus.emit("load_order", this.selected[0]), this.draftsDialog = !1, frappe.call({
          method: "posawesome.posawesome.api.invoices.delete_sales_invoice",
          args: {
            sales_invoice: e.name
          },
          callback: function(t) {
            t.message;
          }
        });
      }
    }
  },
  created: function() {
    this.eventBus.on("open_orders", (e) => {
      this.clearSelected(), this.draftsDialog = !0, this.dialog_data = e, this.order_name = "";
    });
  },
  mounted() {
    this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_orders"), this.eventBus.off("register_pos_profile");
  }
}, Zae = { class: "text-h5 text-primary" };
function ere(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-btn"), d = J("v-row"), u = J("v-data-table"), f = J("v-col"), h = J("v-container"), y = J("v-card-text"), p = J("v-spacer"), w = J("v-card-actions"), b = J("v-card"), v = J("v-dialog");
  return te(), Le(d, { justify: "center" }, {
    default: E(() => [
      _(v, {
        modelValue: e.draftsDialog,
        "onUpdate:modelValue": t[2] || (t[2] = (g) => e.draftsDialog = g),
        "max-width": "900px"
      }, {
        default: E(() => [
          _(b, null, {
            default: E(() => [
              _(o, null, {
                default: E(() => [
                  T("span", Zae, j(e.__("Select Sales Orders")), 1)
                ]),
                _: 1
              }),
              _(y, { class: "pa-0" }, {
                default: E(() => [
                  _(h, null, {
                    default: E(() => [
                      _(d, { class: "mb-4" }, {
                        default: E(() => [
                          _(l, {
                            color: "primary",
                            label: e.frappe._("Order ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            modelValue: e.order_name,
                            "onUpdate:modelValue": t[0] || (t[0] = (g) => e.order_name = g),
                            density: "compact",
                            clearable: "",
                            class: "mx-4"
                          }, null, 8, ["label", "bg-color", "modelValue"]),
                          _(s, {
                            variant: "text",
                            class: "ml-2",
                            color: "primary",
                            theme: "dark",
                            onClick: i.search_orders
                          }, {
                            default: E(() => [
                              ae(j(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      }),
                      _(d, { "no-gutters": "" }, {
                        default: E(() => [
                          _(f, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: E(() => [
                              _(u, {
                                headers: e.headers,
                                items: e.dialog_data,
                                "item-key": "name",
                                class: "elevation-1",
                                "show-select": "",
                                modelValue: e.selected,
                                "onUpdate:modelValue": t[1] || (t[1] = (g) => e.selected = g),
                                "return-object": "",
                                "select-strategy": "single"
                              }, {
                                "item.grand_total": E(({ item: g }) => [
                                  ae(j(e.currencySymbol(g.currency)) + " " + j(e.formatCurrency(g.grand_total)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(w, null, {
                default: E(() => [
                  _(p),
                  _(s, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => t[3] || (t[3] = [
                      ae("Close", -1)
                    ])),
                    _: 1,
                    __: [3]
                  }, 8, ["onClick"]),
                  e.selected.length ? (te(), Le(s, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: E(() => t[4] || (t[4] = [
                      ae("Select", -1)
                    ])),
                    _: 1,
                    __: [4]
                  }, 8, ["onClick"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const tre = /* @__PURE__ */ on(Xae, [["render", ere]]), nre = {
  mixins: [Bi],
  data() {
    return {
      ordersDialog: !1,
      pos_profile: {},
      pos_opening_shift: null,
      selected: [],
      orders_data: [],
      filtered_orders: [],
      loading: !1,
      converting: !1,
      multiSelectMode: !1,
      expanded: [],
      // Track expanded rows
      filter_pos_profile: null,
      // Default POS profile filter (will be set to current pos_profile)
      filter_order_type: null,
      filter_status: "Draft",
      // Default to Draft status
      filter_date: null,
      search_text: "",
      pos_profiles_data: [],
      // Store all available POS profiles
      headers: [
        {
          title: __("Order"),
          key: "name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Customer"),
          key: "customer_name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "transaction_date"
        },
        {
          title: __("Order Type"),
          key: "order_type_name",
          align: "start",
          sortable: !0
        },
        {
          title: __("Table"),
          key: "table_number",
          align: "center",
          sortable: !0
        },
        {
          title: __("Status"),
          key: "order_status",
          align: "center",
          sortable: !0
        },
        {
          title: __("Amount"),
          key: "grand_total",
          align: "end",
          sortable: !1
        },
        {
          title: __("Actions"),
          key: "actions",
          align: "center",
          sortable: !1
        }
      ],
      order_type_options: [],
      status_options: [
        { title: __("Draft"), value: "Draft" },
        { title: __("Submitted"), value: "Submitted" },
        { title: __("Billed"), value: "Billed" },
        { title: __("Cancelled"), value: "Cancelled" }
      ],
      // Void Items Dialog Data
      voidItemsDialog: !1,
      selectedOrderForVoid: null,
      selectedItemsToVoid: [],
      voidItemsData: [],
      // Enhanced void items data with selection and quantity controls
      voidLoading: !1
    };
  },
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    },
    pos_profile_options() {
      return this.pos_profiles_data.map((e) => ({
        name: e.name,
        display_name: e.name
      }));
    },
    order_type_options() {
      const e = /* @__PURE__ */ new Set();
      return this.orders_data.forEach((t) => {
        t.restaurant_order_type && e.add(t.restaurant_order_type);
      }), Array.from(e);
    },
    status_options() {
      return [
        { title: "Draft", value: "Draft" },
        { title: "Submitted", value: "Submitted" },
        { title: "Billed", value: "Billed" },
        { title: "Cancelled", value: "Cancelled" }
      ];
    }
  },
  watch: {
    filter_pos_profile() {
      this.ordersDialog && this.fetch_orders();
    },
    filter_status() {
      this.ordersDialog && this.fetch_orders();
    },
    filter_date() {
      this.ordersDialog && this.fetch_orders();
    }
  },
  methods: {
    async open_orders_dialog() {
      if (this.ordersDialog = !0, this.clearSelected(), !this.filter_pos_profile && this.pos_profile?.name && (this.filter_pos_profile = this.pos_profile.name), !this.filter_date) {
        const e = /* @__PURE__ */ new Date();
        this.filter_date = e.toISOString().split("T")[0];
      }
      await this.fetch_pos_profiles(), await this.fetch_orders();
    },
    close_dialog() {
      this.ordersDialog = !1, this.clearSelected();
    },
    clearSelected() {
      this.selected = [];
    },
    async fetch_pos_profiles() {
      try {
        const e = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.get_pos_profiles"
        });
        e.message && (this.pos_profiles_data = e.message);
      } catch (e) {
        console.error("Failed to fetch POS profiles:", e), this.pos_profiles_data = [];
      }
    },
    async fetch_orders() {
      this.loading = !0;
      try {
        console.log("Fetching orders with filters:", {
          pos_opening_shift: this.pos_opening_shift?.name || null,
          status: this.filter_status || null,
          date_filter: this.filter_date || null,
          pos_profile_name: this.filter_pos_profile || null
        });
        const e = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.get_restaurant_orders",
          args: {
            pos_opening_shift: this.pos_opening_shift?.name || null,
            status: this.filter_status || null,
            date_filter: this.filter_date || null,
            pos_profile_name: this.filter_pos_profile || null
          }
        });
        if (console.log("=== FETCH ORDERS DEBUG ==="), console.log("Raw API response:", e), console.log("Response message:", e.message), e.message && e.message.length > 0) {
          console.log("First few orders from API:"), e.message.slice(0, 5).forEach((n, a) => {
            console.log(`  Order ${a + 1}:`, {
              name: n.name,
              doctype: n.doctype || "not specified",
              customer: n.customer,
              docstatus: n.docstatus
            });
          });
          const t = e.message.filter((n) => !n.name || n.name.trim() === "");
          t.length > 0 && (console.error("CRITICAL: API returned orders with empty names:"), t.forEach((n) => {
            console.error("  INVALID ORDER:", n);
          }));
        }
        if (console.log("=== END FETCH ORDERS DEBUG ==="), console.log("API response:", e), e.message) {
          const t = e.message.filter((a) => {
            const r = a.name && a.name.trim() !== "";
            return r || console.warn("Filtering out invalid order entry:", a.name), r;
          });
          this.orders_data = t, console.log("Orders data (all naming series accepted):", this.orders_data), this.filter_orders();
          const n = [...new Set(t.map((a) => a.order_type_name).filter(Boolean))];
          this.order_type_options = n.map((a) => ({ title: a, value: a }));
        }
      } catch (e) {
        console.error("Failed to fetch restaurant orders", e), this.eventBus.emit("show_message", {
          title: __("Error fetching orders"),
          color: "error"
        });
      } finally {
        this.loading = !1;
      }
    },
    async refresh_orders() {
      await this.fetch_orders(), this.eventBus.emit("show_message", {
        title: __("Orders refreshed"),
        color: "success"
      });
    },
    filter_orders() {
      let e = [...this.orders_data];
      if (this.filter_pos_profile && console.log(`Counter filter selected: ${this.filter_pos_profile} (showing all orders until pos_profile field is added to Sales Order)`), this.filter_order_type && (e = e.filter((t) => t.order_type_name === this.filter_order_type)), this.filter_status && (e = e.filter((t) => this.getOrderStatus(t) === this.filter_status)), this.filter_date && (e = e.filter((t) => new Date(t.transaction_date).toISOString().split("T")[0] === this.filter_date)), this.search_text) {
        const t = this.search_text.toLowerCase();
        e = e.filter(
          (n) => n.name.toLowerCase().includes(t) || n.customer_name.toLowerCase().includes(t)
        );
      }
      this.filtered_orders = e;
    },
    getOrderStatus(e) {
      return e.docstatus === 0 ? "Draft" : e.docstatus === 1 && e.per_billed < 100 ? "Submitted" : e.per_billed >= 100 ? "Billed" : "Unknown";
    },
    getStatusColor(e) {
      const t = this.getOrderStatus(e);
      return {
        Draft: "orange",
        Submitted: "blue",
        Billed: "success"
      }[t] || "grey";
    },
    getStatusIcon(e) {
      const t = this.getOrderStatus(e);
      return {
        Draft: "mdi-file-document-outline",
        Submitted: "mdi-check-circle-outline",
        Billed: "mdi-receipt"
      }[t] || "mdi-information-outline";
    },
    getOrderTypeColor(e) {
      return {
        "Dine In": "purple",
        "Take Away": "orange",
        Delivery: "green"
      }[e] || "grey";
    },
    canConvertToPayment(e) {
      const t = (e.docstatus === 0 || e.docstatus === 1) && e.per_billed < 100;
      return console.log("Can convert to payment:", {
        order: e.name,
        docstatus: e.docstatus,
        per_billed: e.per_billed,
        canConvert: t
      }), t;
    },
    canEdit(e) {
      return e.docstatus === 0;
    },
    canCancel(e) {
      return e.docstatus === 1 && e.per_billed < 100;
    },
    canDelete(e) {
      return e.docstatus === 0;
    },
    canAddItems(e) {
      return (e.docstatus === 0 || e.docstatus === 1) && e.table_number && e.per_billed < 100;
    },
    canConvertMultipleToInvoice() {
      if (!this.selected || this.selected.length === 0)
        return console.log("No orders selected for multiple conversion"), !1;
      if (this.selected.length < 2)
        return console.log("Need at least 2 orders for multiple conversion"), !1;
      console.log("Checking multiple selection:", {
        selected_count: this.selected.length,
        multiSelectMode: this.multiSelectMode,
        selected_orders: this.selected.map((a) => ({
          name: a.name,
          customer: a.customer,
          customer_name: a.customer_name,
          docstatus: a.docstatus,
          per_billed: a.per_billed,
          status: this.getOrderStatus(a)
        }))
      });
      const e = this.selected[0].customer, t = this.selected.every((a) => a.customer === e);
      if (console.log("Same customer check:", {
        firstCustomer: e,
        sameCustomer: t,
        customers: this.selected.map((a) => a.customer)
      }), !t)
        return console.log("Orders are not from the same customer"), !1;
      const n = this.selected.every((a) => {
        const r = a.docstatus === 0;
        return console.log(`Order ${a.name} eligible for multi-edit:`, {
          docstatus: a.docstatus,
          status: this.getOrderStatus(a),
          eligible: r
        }), r;
      });
      return console.log("All draft orders check:", n), n || console.log("Some orders are not draft - multi-edit only supports draft orders"), n;
    },
    toggleMultiSelect() {
      this.multiSelectMode = !this.multiSelectMode, this.clearSelected();
    },
    async convert_to_payment() {
      if (!this.selected.length) return;
      const e = this.selected[0];
      console.log("=== CONVERT TO PAYMENT DEBUG ==="), console.log("Selected order object:", JSON.stringify(e, null, 2)), console.log("Order name:", e.name), console.log("Order doctype (if available):", e.doctype), console.log("All orders data:", JSON.stringify(this.orders_data.map((a) => ({ name: a.name, docstatus: a.docstatus })), null, 2)), console.log("=== END DEBUG ===");
      let t = e.name;
      if (!(e.name && this.orders_data.some((a) => a.name === e.name) && e.restaurant_order_type)) {
        console.error("CRITICAL: Selected order is invalid, attempting to find correct order...");
        const a = this.orders_data.find(
          (r) => r.customer === e.customer && Math.abs(r.grand_total - e.grand_total) < 0.01 && r.restaurant_order_type
          // Must be a restaurant order
        );
        if (a)
          console.log("RECOVERY: Found correct order:", a.name), t = a.name, Object.assign(e, a);
        else {
          console.error("RECOVERY FAILED: Could not find correct order"), this.eventBus.emit("show_message", {
            title: __("Invalid order format: {0}. Please refresh the orders list and try again.", [e.name || "undefined"]),
            color: "error"
          });
          return;
        }
      }
      this.converting = !0;
      try {
        if (console.log("Using validated order name:", t), e.docstatus === 0) {
          console.log("Loading draft order into cart for editing:", t);
          const a = await frappe.call({
            method: "frappe.client.get",
            args: {
              doctype: "Sales Order",
              name: t
            }
          });
          if (a.message) {
            const r = a.message;
            console.log("Fetched complete order data:", r), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_invoice", r), this.close_dialog(), this.eventBus.emit("show_message", {
              title: __("Draft Order {0} loaded for editing. Make changes and click SUBMIT when ready.", [t]),
              color: "success"
            });
          } else
            throw new Error("Failed to fetch order data");
        } else {
          console.log("Converting submitted order to invoice for payment:", t);
          const a = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.convert_order_to_invoice",
            args: {
              sales_order_name: t,
              pos_profile_name: this.pos_profile?.name || null
            }
          });
          a.message && (this.eventBus.emit("change_invoice_type", "Invoice"), this.eventBus.emit("load_invoice", a.message), this.close_dialog(), this.eventBus.emit("show_message", {
            title: __("Order {0} converted to invoice for payment. Review items and click PAY when ready.", [t]),
            color: "success"
          }));
        }
      } catch (a) {
        console.error("Failed to convert order to payment", a), this.eventBus.emit("show_message", {
          title: __("Error converting order to payment: {0}", [a.message || "Unknown error"]),
          color: "error"
        });
      } finally {
        this.converting = !1;
      }
    },
    async edit_order(e) {
      try {
        if (console.log("Loading order for editing:", e.name), !e.name || !e.restaurant_order_type) {
          this.eventBus.emit("show_message", {
            title: __("Invalid order format. Expected valid restaurant order."),
            color: "error"
          });
          return;
        }
        const t = await frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Order",
            name: e.name
          }
        });
        if (t.message) {
          if (t.message.doctype !== "Sales Order") {
            console.error("Loaded document has wrong doctype:", t.message.doctype), this.eventBus.emit("show_message", {
              title: __("Error: Loaded document is not a Sales Order. Expected Sales Order, got {0}", [t.message.doctype]),
              color: "error"
            });
            return;
          }
          console.log("Successfully loaded Sales Order:", t.message.name, "doctype:", t.message.doctype), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_order", t.message), this.close_dialog();
          const n = e.docstatus === 1 ? "editing (submitted)" : "editing";
          this.eventBus.emit("show_message", {
            title: __("Order {0} loaded for {1}", [e.name, n]),
            color: "success"
          });
        }
      } catch (t) {
        console.error("Failed to load Sales Order for editing", t), t.message && t.message.includes("not found") ? this.eventBus.emit("show_message", {
          title: __("Sales Order {0} not found. It may have been deleted or moved.", [e.name]),
          color: "error"
        }) : t.message && t.message.includes("Sales Invoice") ? this.eventBus.emit("show_message", {
          title: __("Error: Trying to load Sales Invoice instead of Sales Order. Order {0} should be a Sales Order.", [e.name]),
          color: "error"
        }) : this.eventBus.emit("show_message", {
          title: __("Error loading Sales Order: {0}", [t.message || "Unknown error"]),
          color: "error"
        });
      }
    },
    async convert_multiple_to_payment() {
      if (!this.selected.length) return;
      console.log(`Loading ${this.selected.length} draft orders for editing...`);
      const e = [];
      for (const a of this.selected) {
        if (a.docstatus !== 0) {
          this.eventBus.emit("show_message", {
            title: __("Order {0} is not in draft status. Only draft orders can be loaded for editing.", [a.name]),
            color: "error"
          });
          return;
        }
        e.push(a.name);
      }
      const t = this.selected[0]?.customer || "customer";
      if (this.selected[0]?.customer_name || this.selected[0]?.customer, !this.selected.every((a) => a.customer === t)) {
        this.eventBus.emit("show_message", {
          title: __("All selected orders must be from the same customer"),
          color: "error"
        });
        return;
      }
      this.converting = !0;
      try {
        console.log("Calling consolidation workflow with order names:", e), console.log("Selected orders data for debugging:", JSON.stringify(this.selected.map((r) => ({
          name: r.name,
          customer: r.customer,
          customer_name: r.customer_name,
          docstatus: r.docstatus
        })), null, 2));
        const a = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.submit_multiple_orders_and_create_invoice",
          args: {
            order_names: e,
            updated_order_data: {}
          }
        });
        if (console.log("Backend API response:", a), console.log("Response message properties:", a.message ? Object.keys(a.message) : "No message"), a && a.message)
          console.log("Successfully created consolidated order:", a.message.name), console.log("Loading consolidated order into POS cart for review..."), this.eventBus.emit("change_invoice_type", "Order"), this.eventBus.emit("load_invoice", a.message), await this.refresh_orders(), this.close_dialog(), this.eventBus.emit("show_message", {
            title: __("✅ Consolidated order {0} loaded into cart for review. You can add/remove items, then click PAY to submit and create invoice.", [a.message.name]),
            color: "success",
            timeout: 8e3
          }), console.log(`Successfully consolidated ${e.length} draft orders into ${a.message.name} and loaded into POS cart`);
        else
          throw console.error("Backend API returned empty response"), new Error("No data returned from backend");
      } catch (a) {
        console.error("Failed to consolidate orders", a), this.eventBus.emit("show_message", {
          title: __("Error consolidating orders: {0}", [a.message || "Unknown error"]),
          color: "error"
        });
      } finally {
        this.converting = !1;
      }
    },
    async add_items_to_table(e) {
      try {
        console.log("Adding items to table for order:", e.name), this.close_dialog(), this.eventBus.emit("set_restaurant_context", {
          order_type: e.order_type_name,
          table_number: e.table_number,
          customer: e.customer,
          customer_name: e.customer_name,
          original_order: e.name,
          order_status: e.docstatus,
          // Pass the order status for API selection
          is_updating_order: !0
          // Flag to indicate we're updating existing order
        }), this.eventBus.emit("show_message", {
          title: __("Ready to add items to {0}. Select items and click 'Update Order' to add items to existing order with KOT print.", [e.table_number]),
          color: "info",
          timeout: 6e3
        });
      } catch (t) {
        console.error("Failed to prepare additional items order", t), this.eventBus.emit("show_message", {
          title: __("Error preparing additional order"),
          color: "error"
        });
      }
    },
    async cancel_order(e) {
      if (await new Promise((n) => {
        frappe.confirm(
          __("Are you sure you want to cancel order {0}?", [e.name]),
          () => n(!0),
          () => n(!1)
        );
      }))
        try {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.cancel_restaurant_order",
            args: {
              sales_order_name: e.name
            }
          });
          n.message && n.message.success && (this.eventBus.emit("show_message", {
            title: n.message.message,
            color: "success"
          }), await this.fetch_orders());
        } catch (n) {
          console.error("Failed to cancel order", n), this.eventBus.emit("show_message", {
            title: __("Error cancelling order"),
            color: "error"
          });
        }
    },
    async delete_order(e) {
      if (await new Promise((n) => {
        frappe.confirm(
          __("Are you sure you want to delete order {0}?", [e.name]),
          () => n(!0),
          () => n(!1)
        );
      }))
        try {
          const n = await frappe.call({
            method: "posawesome.posawesome.api.restaurant_orders.delete_restaurant_order",
            args: {
              sales_order_name: e.name
            }
          });
          n.message && n.message.success && (this.eventBus.emit("show_message", {
            title: n.message.message,
            color: "success"
          }), await this.fetch_orders());
        } catch (n) {
          console.error("Failed to delete order", n), this.eventBus.emit("show_message", {
            title: __("Error deleting order"),
            color: "error"
          });
        }
    },
    formatDate(e) {
      return e ? frappe.datetime.str_to_user(e) : "";
    },
    // Void Items Methods
    canVoidItems(e) {
      return e.docstatus === 0 && e.items && e.items.length > 0;
    },
    // KOT Reprint Methods
    canReprintKot(e) {
      return e.items && e.items.length > 0;
    },
    async reprint_kot(e) {
      try {
        console.log("Reprinting KOT for order:", e.name);
        const t = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.reprint_kot",
          args: {
            order_name: e.name
          }
        });
        if (t.message) {
          const n = window.open("", "_blank");
          n.document.write(t.message), n.document.close(), n.focus(), n.print(), setTimeout(() => {
            n.close();
          }, 1e3), this.eventBus.emit("show_message", {
            title: __("KOT reprinted successfully for order {0}", [e.name]),
            color: "success"
          });
        }
      } catch (t) {
        console.error("Error reprinting KOT:", t), this.eventBus.emit("show_message", {
          title: __("Error reprinting KOT: {0}", [t.message || "Unknown error"]),
          color: "error"
        });
      }
    },
    async void_items(e) {
      console.log("Opening void items dialog for order:", e);
      try {
        const t = await frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Order",
            name: e.name
          }
        });
        t.message && (this.selectedOrderForVoid = t.message, this.selectedItemsToVoid = [], this.voidItemsData = this.prepareVoidItemsData(t.message.items || []), this.voidLoading = !1, this.voidItemsDialog = !0);
      } catch (t) {
        console.error("Error fetching order for voiding:", t), this.eventBus.emit("show_message", {
          title: __("Error fetching order details"),
          color: "error"
        });
      }
    },
    async confirmVoidItems(e, t) {
      this.voidLoading = !0;
      try {
        if (console.log("Voiding items from order:", e.name, t), !t || t.length === 0) {
          this.eventBus.emit("show_message", {
            title: __("Please select items to void"),
            color: "warning"
          });
          return;
        }
        const n = t.map((r) => ({
          idx: r.idx,
          item_code: r.item_code,
          qty: r.qty
          // This is now the void_qty from the selection
        })), a = await frappe.call({
          method: "posawesome.posawesome.api.restaurant_orders.void_order_items",
          args: {
            order_name: e.name,
            items_to_void: n
          }
        });
        if (a.message) {
          this.eventBus.emit("show_message", {
            title: __("Items voided successfully"),
            color: "success"
          }), a.message.print_void_kot && a.message.void_kot_data && (console.log("Void KOT data:", a.message.void_kot_data), await this.printVoidKot(a.message.void_kot_data)), this.expanded = [], this.selectedOrderForVoid = null, this.voidItemsData = [], this.voidItemsDialog = !1, await this.fetch_orders();
          const r = this.orders_data.findIndex((i) => i.name === e.name);
          if (r !== -1)
            try {
              const i = await frappe.call({
                method: "frappe.client.get",
                args: {
                  doctype: "Sales Order",
                  name: e.name
                }
              });
              i.message && (this.orders_data[r] = {
                ...this.orders_data[r],
                items: i.message.items,
                grand_total: i.message.grand_total,
                net_total: i.message.net_total
              }, this.filter_orders());
            } catch (i) {
              console.error("Error updating order in list:", i);
            }
          this.voidItemsDialog = !1, this.selectedOrderForVoid = null, this.selectedItemsToVoid = [];
        }
      } catch (n) {
        console.error("Error voiding items:", n), this.eventBus.emit("show_message", {
          title: __("Error voiding items: ") + (n.message || n),
          color: "error"
        });
      } finally {
        this.voidLoading = !1, this.selectedItemsToVoid = [], this.voidItemsData = [];
      }
    },
    // Enhanced Void Items Methods
    prepareVoidItemsData(e) {
      return e.map((t) => ({
        ...t,
        original_qty: t.qty,
        void_qty: 1,
        // Default void quantity
        selected: !1
      }));
    },
    updateVoidSelection(e) {
      e.selected ? e.void_qty = Math.min(1, e.original_qty) : e.void_qty = 1;
    },
    validateVoidQty(e) {
      e.void_qty < 1 ? e.void_qty = 1 : e.void_qty > e.original_qty && (e.void_qty = e.original_qty);
    },
    getSelectedVoidItems() {
      return this.voidItemsData.filter((e) => e.selected && e.void_qty > 0).map((e) => ({
        idx: e.idx,
        item_code: e.item_code,
        item_name: e.item_name,
        qty: e.void_qty,
        rate: e.rate,
        amount: e.void_qty * e.rate
      }));
    },
    getTotalVoidQty() {
      return this.getSelectedVoidItems().reduce((e, t) => e + t.qty, 0);
    },
    async printVoidKot(e) {
      try {
        const { printVoidKot: t } = await import("./kot_print-MHdNXsuH.js");
        t(e, { autoPrint: !0 });
      } catch (t) {
        console.error("Error printing void KOT:", t), this.eventBus.emit("show_message", {
          title: __("Error printing void KOT"),
          color: "error"
        });
      }
    }
  },
  created() {
    this.eventBus.on("open_restaurant_orders", () => {
      this.open_orders_dialog();
    });
  },
  mounted() {
    this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.pos_opening_shift = e.pos_opening_shift;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_restaurant_orders"), this.eventBus.off("register_pos_profile");
  }
}, are = { class: "text-h4 text-primary font-weight-bold" }, rre = {
  key: 1,
  class: "text-grey"
}, ire = { class: "d-flex flex-wrap gap-1" }, ore = ["colspan"], sre = { class: "text-subtitle-2 mb-2" }, lre = { class: "text-subtitle-2 mb-2" }, cre = { class: "text-left" }, ure = { class: "text-center" }, dre = { class: "text-right" }, fre = { class: "text-right" }, mre = { class: "text-left" }, hre = { class: "text-center" }, _re = { class: "text-right" }, vre = { class: "text-right" }, pre = {
  key: 1,
  class: "text-grey text-center py-4"
}, gre = { class: "text-right font-weight-medium" }, yre = { class: "text-right" }, bre = { key: 0 }, wre = { class: "text-right font-weight-medium" }, kre = { class: "text-right" }, Sre = { key: 1 }, Cre = { class: "text-right font-weight-medium" }, Are = { class: "text-right text-error" }, xre = { class: "font-weight-bold" }, Tre = { class: "text-right" }, Ire = { class: "text-right text-primary" }, Ere = { class: "text-h5 text-primary" }, Pre = { class: "mt-4" };
function Ore(e, t, n, a, r, i) {
  const o = J("v-spacer"), l = J("v-btn"), s = J("v-card-title"), d = J("v-select"), u = J("v-col"), f = J("v-text-field"), h = J("v-icon"), y = J("v-row"), p = J("v-chip"), w = J("v-list-item-title"), b = J("v-list-item"), v = J("v-list"), g = J("v-table"), k = J("v-divider"), A = J("v-card-text"), C = J("v-card"), D = J("v-data-table"), P = J("v-container"), O = J("v-card-actions"), I = J("v-dialog"), x = J("v-alert"), M = J("v-checkbox");
  return te(), Le(y, { justify: "center" }, {
    default: E(() => [
      _(I, {
        modelValue: r.ordersDialog,
        "onUpdate:modelValue": t[8] || (t[8] = (V) => r.ordersDialog = V),
        "max-width": "1400px",
        "max-height": "90vh"
      }, {
        default: E(() => [
          _(C, { style: { height: "85vh" } }, {
            default: E(() => [
              _(s, { class: "d-flex align-center pa-4" }, {
                default: E(() => [
                  T("span", are, j(e.__("Restaurant Orders")), 1),
                  _(o),
                  _(l, {
                    icon: "mdi-close",
                    variant: "text",
                    density: "compact",
                    size: "large",
                    onClick: i.close_dialog
                  }, null, 8, ["onClick"])
                ]),
                _: 1
              }),
              _(A, {
                class: "pa-0",
                style: { height: "calc(85vh - 80px)", "overflow-y": "auto" }
              }, {
                default: E(() => [
                  _(P, {
                    fluid: "",
                    class: "pa-4"
                  }, {
                    default: E(() => [
                      _(y, { class: "mb-4" }, {
                        default: E(() => [
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: E(() => [
                              _(d, {
                                color: "primary",
                                label: e.frappe._("Counter"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_pos_profile,
                                "onUpdate:modelValue": [
                                  t[0] || (t[0] = (V) => r.filter_pos_profile = V),
                                  i.filter_orders
                                ],
                                items: i.pos_profile_options,
                                "item-title": "display_name",
                                "item-value": "name",
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: E(() => [
                              _(d, {
                                color: "primary",
                                label: e.frappe._("Order Type"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_order_type,
                                "onUpdate:modelValue": [
                                  t[1] || (t[1] = (V) => r.filter_order_type = V),
                                  i.filter_orders
                                ],
                                items: i.order_type_options,
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: E(() => [
                              _(d, {
                                color: "primary",
                                label: e.frappe._("Status"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_status,
                                "onUpdate:modelValue": [
                                  t[2] || (t[2] = (V) => r.filter_status = V),
                                  i.filter_orders
                                ],
                                items: i.status_options,
                                density: "compact",
                                clearable: "",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "items", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "2"
                          }, {
                            default: E(() => [
                              _(f, {
                                color: "primary",
                                label: e.frappe._("Date"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.filter_date,
                                "onUpdate:modelValue": [
                                  t[3] || (t[3] = (V) => r.filter_date = V),
                                  i.filter_orders
                                ],
                                type: "date",
                                density: "compact",
                                class: "mx-2"
                              }, null, 8, ["label", "bg-color", "modelValue", "onUpdate:modelValue"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "3"
                          }, {
                            default: E(() => [
                              _(f, {
                                color: "primary",
                                label: e.frappe._("Search Order/Customer"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: r.search_text,
                                "onUpdate:modelValue": t[4] || (t[4] = (V) => r.search_text = V),
                                density: "compact",
                                clearable: "",
                                class: "mx-2",
                                "prepend-inner-icon": "mdi-magnify",
                                onInput: i.filter_orders
                              }, null, 8, ["label", "bg-color", "modelValue", "onInput"])
                            ]),
                            _: 1
                          }),
                          _(u, {
                            cols: "12",
                            md: "1"
                          }, {
                            default: E(() => [
                              _(l, {
                                variant: "text",
                                color: "primary",
                                theme: "dark",
                                onClick: i.refresh_orders,
                                class: "mx-2",
                                loading: r.loading
                              }, {
                                default: E(() => [
                                  _(h, null, {
                                    default: E(() => t[13] || (t[13] = [
                                      ae("mdi-refresh", -1)
                                    ])),
                                    _: 1,
                                    __: [13]
                                  }),
                                  ae(" " + j(e.__("Refresh")), 1)
                                ]),
                                _: 1
                              }, 8, ["onClick", "loading"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }),
                      _(y, { "no-gutters": "" }, {
                        default: E(() => [
                          _(u, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: E(() => [
                              _(D, {
                                headers: r.headers,
                                items: r.filtered_orders,
                                "item-key": "name",
                                class: "elevation-1",
                                "show-select": "",
                                modelValue: r.selected,
                                "onUpdate:modelValue": t[5] || (t[5] = (V) => r.selected = V),
                                "return-object": "",
                                "select-strategy": r.multiSelectMode ? "page" : "single",
                                loading: r.loading,
                                density: "compact",
                                "show-expand": "",
                                expanded: r.expanded,
                                "onUpdate:expanded": t[6] || (t[6] = (V) => r.expanded = V)
                              }, {
                                "item.transaction_date": E(({ item: V }) => [
                                  ae(j(i.formatDate(V.transaction_date)), 1)
                                ]),
                                "item.grand_total": E(({ item: V }) => [
                                  ae(j(e.currencySymbol(V.currency)) + " " + j(e.formatCurrency(V.grand_total)), 1)
                                ]),
                                "item.order_status": E(({ item: V }) => [
                                  _(p, {
                                    color: i.getStatusColor(V),
                                    size: "small",
                                    variant: "flat"
                                  }, {
                                    default: E(() => [
                                      _(h, {
                                        start: "",
                                        size: "small"
                                      }, {
                                        default: E(() => [
                                          ae(j(i.getStatusIcon(V)), 1)
                                        ]),
                                        _: 2
                                      }, 1024),
                                      ae(" " + j(i.getOrderStatus(V)), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["color"])
                                ]),
                                "item.table_number": E(({ item: V }) => [
                                  V.table_number ? (te(), Le(p, {
                                    key: 0,
                                    color: "info",
                                    size: "small",
                                    variant: "outlined"
                                  }, {
                                    default: E(() => [
                                      _(h, {
                                        start: "",
                                        size: "small"
                                      }, {
                                        default: E(() => t[14] || (t[14] = [
                                          ae("mdi-table-furniture", -1)
                                        ])),
                                        _: 1,
                                        __: [14]
                                      }),
                                      ae(" " + j(V.table_number), 1)
                                    ]),
                                    _: 2
                                  }, 1024)) : (te(), Oe("span", rre, "-"))
                                ]),
                                "item.order_type_name": E(({ item: V }) => [
                                  _(p, {
                                    color: i.getOrderTypeColor(V.order_type_name),
                                    size: "small",
                                    variant: "tonal"
                                  }, {
                                    default: E(() => [
                                      ae(j(V.order_type_name || "N/A"), 1)
                                    ]),
                                    _: 2
                                  }, 1032, ["color"])
                                ]),
                                "item.actions": E(({ item: V }) => [
                                  T("div", ire, [
                                    i.canEdit(V) ? (te(), Le(l, {
                                      key: 0,
                                      size: "default",
                                      color: "primary",
                                      variant: "flat",
                                      onClick: (B) => i.edit_order(V),
                                      class: "ma-1 text-caption",
                                      "min-width": "90"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: E(() => t[15] || (t[15] = [
                                            ae("mdi-pencil", -1)
                                          ])),
                                          _: 1,
                                          __: [15]
                                        }),
                                        ae(" " + j(e.__("Edit")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ke("", !0),
                                    i.canAddItems(V) ? (te(), Le(l, {
                                      key: 1,
                                      size: "default",
                                      color: "success",
                                      variant: "flat",
                                      onClick: (B) => i.add_items_to_table(V),
                                      class: "ma-1 text-caption",
                                      "min-width": "110"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: E(() => t[16] || (t[16] = [
                                            ae("mdi-plus-circle", -1)
                                          ])),
                                          _: 1,
                                          __: [16]
                                        }),
                                        ae(" " + j(e.__("Add Items")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ke("", !0),
                                    i.canReprintKot(V) ? (te(), Le(l, {
                                      key: 2,
                                      size: "default",
                                      color: "info",
                                      variant: "flat",
                                      onClick: (B) => i.reprint_kot(V),
                                      class: "ma-1 text-caption",
                                      "min-width": "100"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: E(() => t[17] || (t[17] = [
                                            ae("mdi-printer", -1)
                                          ])),
                                          _: 1,
                                          __: [17]
                                        }),
                                        ae(" " + j(e.__("Reprint KOT")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ke("", !0),
                                    i.canVoidItems(V) ? (te(), Le(l, {
                                      key: 3,
                                      size: "default",
                                      color: "orange",
                                      variant: "flat",
                                      onClick: (B) => i.void_items(V),
                                      class: "ma-1 text-caption",
                                      "min-width": "100"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: E(() => t[18] || (t[18] = [
                                            ae("mdi-close-circle", -1)
                                          ])),
                                          _: 1,
                                          __: [18]
                                        }),
                                        ae(" " + j(e.__("Void Items")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ke("", !0),
                                    i.canDelete(V) ? (te(), Le(l, {
                                      key: 4,
                                      size: "default",
                                      color: "error",
                                      variant: "flat",
                                      onClick: (B) => i.delete_order(V),
                                      class: "ma-1 text-caption",
                                      "min-width": "80"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: E(() => t[19] || (t[19] = [
                                            ae("mdi-delete", -1)
                                          ])),
                                          _: 1,
                                          __: [19]
                                        }),
                                        ae(" " + j(e.__("Delete")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : i.canCancel(V) ? (te(), Le(l, {
                                      key: 5,
                                      size: "default",
                                      color: "error",
                                      variant: "flat",
                                      onClick: (B) => i.cancel_order(V),
                                      class: "ma-1 text-caption",
                                      "min-width": "80"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          start: "",
                                          size: "small"
                                        }, {
                                          default: E(() => t[20] || (t[20] = [
                                            ae("mdi-cancel", -1)
                                          ])),
                                          _: 1,
                                          __: [20]
                                        }),
                                        ae(" " + j(e.__("Cancel")), 1)
                                      ]),
                                      _: 2
                                    }, 1032, ["onClick"])) : ke("", !0)
                                  ])
                                ]),
                                "expanded-row": E(({ item: V }) => [
                                  T("td", {
                                    colspan: r.headers.length + 2
                                  }, [
                                    _(C, {
                                      flat: "",
                                      class: "ma-2"
                                    }, {
                                      default: E(() => [
                                        _(s, { class: "text-h6 text-primary" }, {
                                          default: E(() => [
                                            _(h, { class: "mr-2" }, {
                                              default: E(() => t[21] || (t[21] = [
                                                ae("mdi-receipt", -1)
                                              ])),
                                              _: 1,
                                              __: [21]
                                            }),
                                            ae(" " + j(e.__("Order Details: {0}", [V.name])), 1)
                                          ]),
                                          _: 2
                                        }, 1024),
                                        _(A, null, {
                                          default: E(() => [
                                            _(y, null, {
                                              default: E(() => [
                                                _(u, {
                                                  cols: "12",
                                                  md: "6"
                                                }, {
                                                  default: E(() => [
                                                    T("div", sre, j(e.__("Order Information")), 1),
                                                    _(v, { density: "compact" }, {
                                                      default: E(() => [
                                                        _(b, null, {
                                                          prepend: E(() => [
                                                            _(h, null, {
                                                              default: E(() => t[22] || (t[22] = [
                                                                ae("mdi-calendar", -1)
                                                              ])),
                                                              _: 1,
                                                              __: [22]
                                                            })
                                                          ]),
                                                          default: E(() => [
                                                            _(w, null, {
                                                              default: E(() => [
                                                                ae(j(e.__("Date")) + ": " + j(i.formatDate(V.transaction_date)), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024),
                                                        _(b, null, {
                                                          prepend: E(() => [
                                                            _(h, null, {
                                                              default: E(() => t[23] || (t[23] = [
                                                                ae("mdi-account", -1)
                                                              ])),
                                                              _: 1,
                                                              __: [23]
                                                            })
                                                          ]),
                                                          default: E(() => [
                                                            _(w, null, {
                                                              default: E(() => [
                                                                ae(j(e.__("Customer")) + ": " + j(V.customer), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024),
                                                        V.table_number ? (te(), Le(b, { key: 0 }, {
                                                          prepend: E(() => [
                                                            _(h, null, {
                                                              default: E(() => t[24] || (t[24] = [
                                                                ae("mdi-table-furniture", -1)
                                                              ])),
                                                              _: 1,
                                                              __: [24]
                                                            })
                                                          ]),
                                                          default: E(() => [
                                                            _(w, null, {
                                                              default: E(() => [
                                                                ae(j(e.__("Table")) + ": " + j(V.table_number), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024)) : ke("", !0),
                                                        _(b, null, {
                                                          prepend: E(() => [
                                                            _(h, null, {
                                                              default: E(() => t[25] || (t[25] = [
                                                                ae("mdi-food", -1)
                                                              ])),
                                                              _: 1,
                                                              __: [25]
                                                            })
                                                          ]),
                                                          default: E(() => [
                                                            _(w, null, {
                                                              default: E(() => [
                                                                ae(j(e.__("Order Type")) + ": " + j(V.order_type_name || "N/A"), 1)
                                                              ]),
                                                              _: 2
                                                            }, 1024)
                                                          ]),
                                                          _: 2
                                                        }, 1024)
                                                      ]),
                                                      _: 2
                                                    }, 1024)
                                                  ]),
                                                  _: 2
                                                }, 1024),
                                                _(u, {
                                                  cols: "12",
                                                  md: "6"
                                                }, {
                                                  default: E(() => [
                                                    T("div", lre, j(e.__("Items")), 1),
                                                    V.items && V.items.length ? (te(), Le(g, {
                                                      key: 0,
                                                      density: "compact"
                                                    }, {
                                                      default: E(() => [
                                                        T("thead", null, [
                                                          T("tr", null, [
                                                            T("th", cre, j(e.__("Item")), 1),
                                                            T("th", ure, j(e.__("Qty")), 1),
                                                            T("th", dre, j(e.__("Rate")), 1),
                                                            T("th", fre, j(e.__("Amount")), 1)
                                                          ])
                                                        ]),
                                                        T("tbody", null, [
                                                          (te(!0), Oe(Ge, null, ln(V.items, (B) => (te(), Oe("tr", {
                                                            key: B.name
                                                          }, [
                                                            T("td", mre, j(B.item_name || B.item_code), 1),
                                                            T("td", hre, j(B.qty) + " " + j(B.uom || ""), 1),
                                                            T("td", _re, j(e.currencySymbol(V.currency)) + j(e.formatCurrency(B.rate)), 1),
                                                            T("td", vre, j(e.currencySymbol(V.currency)) + j(e.formatCurrency(B.amount)), 1)
                                                          ]))), 128))
                                                        ])
                                                      ]),
                                                      _: 2
                                                    }, 1024)) : (te(), Oe("div", pre, j(e.__("No items available")), 1))
                                                  ]),
                                                  _: 2
                                                }, 1024)
                                              ]),
                                              _: 2
                                            }, 1024),
                                            _(k, { class: "my-3" }),
                                            _(y, null, {
                                              default: E(() => [
                                                _(u, {
                                                  cols: "12",
                                                  md: "8"
                                                }),
                                                _(u, {
                                                  cols: "12",
                                                  md: "4"
                                                }, {
                                                  default: E(() => [
                                                    _(g, { density: "compact" }, {
                                                      default: E(() => [
                                                        T("tbody", null, [
                                                          T("tr", null, [
                                                            T("td", gre, j(e.__("Subtotal")) + ":", 1),
                                                            T("td", yre, j(e.currencySymbol(V.currency)) + j(e.formatCurrency(V.net_total || 0)), 1)
                                                          ]),
                                                          V.total_taxes_and_charges ? (te(), Oe("tr", bre, [
                                                            T("td", wre, j(e.__("Tax")) + ":", 1),
                                                            T("td", kre, j(e.currencySymbol(V.currency)) + j(e.formatCurrency(V.total_taxes_and_charges)), 1)
                                                          ])) : ke("", !0),
                                                          V.discount_amount ? (te(), Oe("tr", Sre, [
                                                            T("td", Cre, j(e.__("Discount")) + ":", 1),
                                                            T("td", Are, "-" + j(e.currencySymbol(V.currency)) + j(e.formatCurrency(V.discount_amount)), 1)
                                                          ])) : ke("", !0),
                                                          T("tr", xre, [
                                                            T("td", Tre, j(e.__("Total")) + ":", 1),
                                                            T("td", Ire, j(e.currencySymbol(V.currency)) + j(e.formatCurrency(V.grand_total)), 1)
                                                          ])
                                                        ])
                                                      ]),
                                                      _: 2
                                                    }, 1024)
                                                  ]),
                                                  _: 2
                                                }, 1024)
                                              ]),
                                              _: 2
                                            }, 1024)
                                          ]),
                                          _: 2
                                        }, 1024)
                                      ]),
                                      _: 2
                                    }, 1024)
                                  ], 8, ore)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "modelValue", "select-strategy", "loading", "expanded"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(O, null, {
                default: E(() => [
                  _(l, {
                    color: "secondary",
                    variant: "outlined",
                    onClick: i.toggleMultiSelect,
                    class: "mr-2"
                  }, {
                    default: E(() => [
                      _(h, { start: "" }, {
                        default: E(() => [
                          ae(j(r.multiSelectMode ? "mdi-checkbox-multiple-marked" : "mdi-checkbox-multiple-blank"), 1)
                        ]),
                        _: 1
                      }),
                      ae(" " + j(r.multiSelectMode ? e.__("Single Select") : e.__("Multi Select")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(o),
                  _(l, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  r.selected.length === 1 && i.canConvertToPayment(r.selected[0]) ? (te(), Le(l, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.convert_to_payment,
                    loading: r.converting
                  }, {
                    default: E(() => [
                      ae(j(e.__("Convert to Payment")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick", "loading"])) : ke("", !0),
                  r.selected.length > 1 && i.canConvertMultipleToInvoice() ? (te(), Le(l, {
                    key: 1,
                    color: "primary",
                    theme: "dark",
                    onClick: i.convert_multiple_to_payment,
                    loading: r.converting
                  }, {
                    default: E(() => [
                      ae(j(e.__("Convert to Payment ({0} Orders)", [r.selected.length])), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick", "loading"])) : ke("", !0),
                  r.selected.length === 1 && i.canEdit(r.selected[0]) ? (te(), Le(l, {
                    key: 2,
                    color: "warning",
                    theme: "dark",
                    onClick: t[7] || (t[7] = (V) => i.edit_order(r.selected[0])),
                    loading: r.converting,
                    class: "mr-2"
                  }, {
                    default: E(() => [
                      ae(j(e.__("Edit Order")), 1)
                    ]),
                    _: 1
                  }, 8, ["loading"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"]),
      _(I, {
        modelValue: r.voidItemsDialog,
        "onUpdate:modelValue": t[12] || (t[12] = (V) => r.voidItemsDialog = V),
        "max-width": "600px"
      }, {
        default: E(() => [
          _(C, null, {
            default: E(() => [
              _(s, { class: "d-flex align-center" }, {
                default: E(() => [
                  T("span", Ere, j(e.__("Void Items")), 1),
                  _(o),
                  _(l, {
                    icon: "mdi-close",
                    variant: "text",
                    density: "compact",
                    onClick: t[9] || (t[9] = (V) => r.voidItemsDialog = !1)
                  })
                ]),
                _: 1
              }),
              r.selectedOrderForVoid ? (te(), Le(A, { key: 0 }, {
                default: E(() => [
                  _(x, {
                    type: "warning",
                    variant: "tonal",
                    class: "mb-4"
                  }, {
                    default: E(() => [
                      _(h, { start: "" }, {
                        default: E(() => t[26] || (t[26] = [
                          ae("mdi-alert-triangle", -1)
                        ])),
                        _: 1,
                        __: [26]
                      }),
                      ae(" " + j(e.__("Select items and specify quantities to void from order {0}. Voided items will generate a KOT for kitchen notification.", [r.selectedOrderForVoid.name])), 1)
                    ]),
                    _: 1
                  }),
                  _(D, {
                    headers: [
                      { title: e.__("Select"), key: "select", align: "center", sortable: !1, width: "80px" },
                      { title: e.__("Item"), key: "item_name", sortable: !1 },
                      { title: e.__("Available Qty"), key: "qty", align: "center", sortable: !1, width: "120px" },
                      { title: e.__("Void Qty"), key: "void_qty", align: "center", sortable: !1, width: "120px" },
                      { title: e.__("Rate"), key: "rate", align: "end", sortable: !1, width: "100px" },
                      { title: e.__("Amount"), key: "amount", align: "end", sortable: !1, width: "100px" }
                    ],
                    items: r.voidItemsData,
                    density: "compact",
                    class: "elevation-1",
                    "hide-default-footer": ""
                  }, {
                    "item.select": E(({ item: V }) => [
                      _(M, {
                        modelValue: V.selected,
                        "onUpdate:modelValue": (B) => V.selected = B,
                        "hide-details": "",
                        density: "compact",
                        onChange: (B) => i.updateVoidSelection(V)
                      }, null, 8, ["modelValue", "onUpdate:modelValue", "onChange"])
                    ]),
                    "item.void_qty": E(({ item: V }) => [
                      _(f, {
                        modelValue: V.void_qty,
                        "onUpdate:modelValue": (B) => V.void_qty = B,
                        modelModifiers: { number: !0 },
                        type: "number",
                        min: 1,
                        max: V.original_qty,
                        density: "compact",
                        "hide-details": "",
                        style: { width: "80px" },
                        disabled: !V.selected,
                        onInput: (B) => i.validateVoidQty(V)
                      }, null, 8, ["modelValue", "onUpdate:modelValue", "max", "disabled", "onInput"])
                    ]),
                    "item.rate": E(({ item: V }) => [
                      ae(j(e.currencySymbol(r.selectedOrderForVoid.currency)) + j(e.formatCurrency(V.rate)), 1)
                    ]),
                    "item.amount": E(({ item: V }) => [
                      ae(j(e.currencySymbol(r.selectedOrderForVoid.currency)) + j(e.formatCurrency(V.amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items"]),
                  T("div", Pre, [
                    i.getSelectedVoidItems().length === 0 ? (te(), Le(x, {
                      key: 0,
                      type: "info",
                      variant: "tonal"
                    }, {
                      default: E(() => [
                        ae(j(e.__("Please select items and specify quantities to void")), 1)
                      ]),
                      _: 1
                    })) : (te(), Le(x, {
                      key: 1,
                      type: "success",
                      variant: "tonal"
                    }, {
                      default: E(() => [
                        ae(j(e.__("Selected {0} item(s) for voiding with total quantity: {1}", [i.getSelectedVoidItems().length, i.getTotalVoidQty()])), 1)
                      ]),
                      _: 1
                    }))
                  ])
                ]),
                _: 1
              })) : ke("", !0),
              _(O, null, {
                default: E(() => [
                  _(o),
                  _(l, {
                    color: "error",
                    onClick: t[10] || (t[10] = (V) => r.voidItemsDialog = !1)
                  }, {
                    default: E(() => [
                      ae(j(e.__("Cancel")), 1)
                    ]),
                    _: 1
                  }),
                  _(l, {
                    color: "warning",
                    loading: r.voidLoading,
                    disabled: i.getSelectedVoidItems().length === 0,
                    onClick: t[11] || (t[11] = (V) => i.confirmVoidItems(r.selectedOrderForVoid, i.getSelectedVoidItems()))
                  }, {
                    default: E(() => [
                      ae(j(e.__("Void Selected Items")), 1)
                    ]),
                    _: 1
                  }, 8, ["loading", "disabled"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Dre = /* @__PURE__ */ on(nre, [["render", Ore], ["__scopeId", "data-v-207401dc"]]), Bre = {
  mixins: [Bi],
  data: () => ({
    closingDialog: !1,
    itemsPerPage: 20,
    dialog_data: {},
    pos_profile: "",
    headers: [
      {
        title: __("Mode of Payment"),
        value: "mode_of_payment",
        align: "start",
        sortable: !0
      },
      {
        title: __("Opening Amount"),
        align: "end",
        sortable: !0,
        value: "opening_amount"
      },
      {
        title: __("Closing Amount"),
        value: "closing_amount",
        align: "end",
        sortable: !0
      }
    ],
    max25chars: (e) => e.length <= 20 || "Input too long!",
    // TODO : should validate as number
    pagination: {}
  }),
  watch: {},
  methods: {
    close_dialog() {
      this.closingDialog = !1;
    },
    submit_dialog() {
      if ((this.dialog_data.payments || []).some(
        (t) => isNaN(parseFloat(t.closing_amount))
      )) {
        alert(this.__("Invalid closing amount"));
        return;
      }
      this.eventBus.emit("submit_closing_pos", this.dialog_data), this.closingDialog = !1;
    }
  },
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  created: function() {
    this.eventBus.on("open_ClosingDialog", (e) => {
      this.closingDialog = !0, this.dialog_data = e;
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile, this.pos_profile.hide_expected_amount || (this.headers.push({
        title: __("Expected Amount"),
        value: "expected_amount",
        align: "end",
        sortable: !1
      }), this.headers.push({
        title: __("Difference"),
        value: "difference",
        align: "end",
        sortable: !1
      }));
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_ClosingDialog"), this.eventBus.off("register_pos_profile");
  }
}, Vre = { class: "header-content" }, Mre = { class: "header-icon-wrapper" }, Lre = { class: "header-text" }, Rre = { class: "header-title" }, Fre = { class: "header-subtitle" }, Nre = { class: "table-header mb-4" }, Ure = { class: "text-h6 text-grey-darken-2 mb-1" }, $re = { class: "text-body-2 text-grey" };
function qre(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-card-title"), s = J("v-divider"), d = J("v-text-field"), u = J("v-data-table"), f = J("v-col"), h = J("v-row"), y = J("v-container"), p = J("v-card-text"), w = J("v-btn"), b = J("v-spacer"), v = J("v-card-actions"), g = J("v-card"), k = J("v-dialog");
  return te(), Le(h, { justify: "center" }, {
    default: E(() => [
      _(k, {
        modelValue: e.closingDialog,
        "onUpdate:modelValue": t[0] || (t[0] = (A) => e.closingDialog = A),
        "max-width": "900px",
        persistent: ""
      }, {
        default: E(() => [
          _(g, {
            elevation: "8",
            class: "closing-dialog-card"
          }, {
            default: E(() => [
              _(l, { class: "closing-header pa-6" }, {
                default: E(() => [
                  T("div", Vre, [
                    T("div", Mre, [
                      _(o, {
                        class: "header-icon",
                        size: "40"
                      }, {
                        default: E(() => t[1] || (t[1] = [
                          ae("mdi-store-clock-outline", -1)
                        ])),
                        _: 1,
                        __: [1]
                      })
                    ]),
                    T("div", Lre, [
                      T("h3", Rre, j(e.__("Closing POS Shift")), 1),
                      T("p", Fre, j(e.__("Reconcile payment methods and close shift")), 1)
                    ])
                  ])
                ]),
                _: 1
              }),
              _(s, { class: "header-divider" }),
              _(p, { class: "pa-0 white-background" }, {
                default: E(() => [
                  _(y, { class: "pa-6" }, {
                    default: E(() => [
                      _(h, null, {
                        default: E(() => [
                          _(f, {
                            cols: "12",
                            class: "pa-1"
                          }, {
                            default: E(() => [
                              T("div", Nre, [
                                T("h4", Ure, j(e.__("Payment Reconciliation")), 1),
                                T("p", $re, j(e.__("Verify closing amounts for each payment method")), 1)
                              ]),
                              _(u, {
                                headers: e.headers,
                                items: e.dialog_data.payment_reconciliation,
                                "item-key": "mode_of_payment",
                                class: "elevation-0 rounded-lg white-table",
                                "items-per-page": e.itemsPerPage,
                                "hide-default-footer": "",
                                density: "compact"
                              }, {
                                "item.closing_amount": E((A) => [
                                  _(d, {
                                    modelValue: A.item.closing_amount,
                                    "onUpdate:modelValue": (C) => A.item.closing_amount = C,
                                    rules: [e.max25chars],
                                    label: e.frappe._("Edit"),
                                    "single-line": "",
                                    counter: "",
                                    type: "number",
                                    density: "compact",
                                    variant: "outlined",
                                    color: "primary",
                                    "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                    class: "dark-field",
                                    "hide-details": "",
                                    prefix: e.currencySymbol(e.pos_profile.currency)
                                  }, null, 8, ["modelValue", "onUpdate:modelValue", "rules", "label", "bg-color", "prefix"])
                                ]),
                                "item.difference": E(({ item: A }) => [
                                  ae(j(e.currencySymbol(e.pos_profile.currency)) + " " + j(A.difference = e.formatCurrency(
                                    A.expected_amount - A.closing_amount
                                  )), 1)
                                ]),
                                "item.opening_amount": E(({ item: A }) => [
                                  ae(j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(A.opening_amount)), 1)
                                ]),
                                "item.expected_amount": E(({ item: A }) => [
                                  ae(j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(A.expected_amount)), 1)
                                ]),
                                _: 1
                              }, 8, ["headers", "items", "items-per-page"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(s),
              _(v, { class: "dialog-actions-container" }, {
                default: E(() => [
                  _(w, {
                    theme: "dark",
                    onClick: i.submit_dialog,
                    class: "pos-action-btn submit-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: E(() => [
                      _(o, { start: "" }, {
                        default: E(() => t[2] || (t[2] = [
                          ae("mdi-check-circle-outline", -1)
                        ])),
                        _: 1,
                        __: [2]
                      }),
                      T("span", null, j(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(b),
                  _(w, {
                    theme: "dark",
                    onClick: i.close_dialog,
                    class: "pos-action-btn cancel-action-btn",
                    size: "large",
                    elevation: "2"
                  }, {
                    default: E(() => [
                      _(o, { start: "" }, {
                        default: E(() => t[3] || (t[3] = [
                          ae("mdi-close-circle-outline", -1)
                        ])),
                        _: 1,
                        __: [3]
                      }),
                      T("span", null, j(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Hre = /* @__PURE__ */ on(Bre, [["render", qre], ["__scopeId", "data-v-6e72da1a"]]), zre = {
  data: () => ({
    addressDialog: !1,
    address: {},
    customer: ""
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  methods: {
    close_dialog() {
      this.addressDialog = !1;
    },
    submit_dialog() {
      var e = this;
      this.address.customer = this.customer, this.address.doctype = "Customer", frappe.call({
        method: "posawesome.posawesome.api.customers.make_address",
        args: {
          args: this.address
        },
        callback: (t) => {
          t.exc || (e.eventBus.emit("add_the_new_address", t.message), e.eventBus.emit("show_message", {
            text: "Customer Address created successfully.",
            color: "success"
          }), e.addressDialog = !1, e.customer = "", e.address = {});
        }
      });
    }
  },
  created: function() {
    this.eventBus.on("open_new_address", (e) => {
      this.addressDialog = !0, this.customer = e;
    });
  }
}, Wre = { class: "text-h5 text-primary" };
function Kre(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-col"), d = J("v-row"), u = J("v-container"), f = J("v-card-text"), h = J("v-spacer"), y = J("v-btn"), p = J("v-card-actions"), w = J("v-card"), b = J("v-dialog");
  return te(), Le(d, { justify: "center" }, {
    default: E(() => [
      _(b, {
        modelValue: e.addressDialog,
        "onUpdate:modelValue": t[5] || (t[5] = (v) => e.addressDialog = v),
        "max-width": "600px"
      }, {
        default: E(() => [
          _(w, null, {
            default: E(() => [
              _(o, null, {
                default: E(() => [
                  T("span", Wre, j(e.__("Add New Address")), 1)
                ]),
                _: 1
              }),
              _(f, { class: "pa-0" }, {
                default: E(() => [
                  _(u, null, {
                    default: E(() => [
                      _(d, null, {
                        default: E(() => [
                          _(s, { cols: "12" }, {
                            default: E(() => [
                              _(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Name"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.name,
                                "onUpdate:modelValue": t[0] || (t[0] = (v) => e.address.name = v)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "12" }, {
                            default: E(() => [
                              _(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Line 1"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.address_line1,
                                "onUpdate:modelValue": t[1] || (t[1] = (v) => e.address.address_line1 = v)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "12" }, {
                            default: E(() => [
                              _(l, {
                                density: "compact",
                                color: "primary",
                                label: e.frappe._("Address Line 2"),
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.address_line2,
                                "onUpdate:modelValue": t[2] || (t[2] = (v) => e.address.address_line2 = v)
                              }, null, 8, ["label", "bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "6" }, {
                            default: E(() => [
                              _(l, {
                                label: "City",
                                density: "compact",
                                color: "primary",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.city,
                                "onUpdate:modelValue": t[3] || (t[3] = (v) => e.address.city = v)
                              }, null, 8, ["bg-color", "modelValue"])
                            ]),
                            _: 1
                          }),
                          _(s, { cols: "6" }, {
                            default: E(() => [
                              _(l, {
                                label: "State",
                                density: "compact",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                class: "dark-field",
                                "hide-details": "",
                                modelValue: e.address.state,
                                "onUpdate:modelValue": t[4] || (t[4] = (v) => e.address.state = v)
                              }, null, 8, ["bg-color", "modelValue"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(p, null, {
                default: E(() => [
                  _(h),
                  _(y, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  _(y, {
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const jre = /* @__PURE__ */ on(zre, [["render", Kre], ["__scopeId", "data-v-b00b18cc"]]), Yre = {
  data: () => ({
    varaintsDialog: !1,
    parentItem: null,
    items: null,
    filters: {},
    filterdItems: [],
    pos_profile: null,
    attributes_meta: {},
    displayCount: 100,
    placeholderImage: tB
  }),
  computed: {
    variantsItems() {
      return !this.parentItem || !Array.isArray(this.items) ? [] : this.items.filter((e) => e.variant_of == this.parentItem.item_code);
    },
    displayItems() {
      return this.filterdItems.slice(0, this.displayCount);
    }
  },
  watch: {
    items: {
      handler() {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      },
      deep: !0
    },
    parentItem() {
      this.filterdItems = this.variantsItems, this.displayCount = 100;
    },
    attributes_meta: {
      handler(e) {
        this.parentItem && e && Object.keys(e).length ? this.parentItem.attributes = Object.keys(e).map((t) => ({
          attribute: t,
          values: e[t].map((n) => ({ attribute_value: n, abbr: n }))
        })) : this.parentItem && (this.parentItem.attributes = []), this.$nextTick(() => {
          this.filterdItems = this.variantsItems, this.displayCount = 100;
        });
      },
      deep: !0
    },
    filters: {
      handler() {
        this.updateFiltredItems();
      },
      deep: !0
    }
  },
  methods: {
    close_dialog() {
      this.varaintsDialog = !1;
    },
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, 2);
    },
    formatCurrencySafe(e) {
      const t = this.$options.mixins && this.$options.mixins[0] && this.$options.mixins[0].methods && this.$options.mixins[0].methods.formatCurrency;
      return t ? t.call(this, e, 2) : new Intl.NumberFormat("en-PK", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 2
      }).format(e);
    },
    applyCurrencyConversionToItem(e) {
      e && (e.original_rate || (e.original_rate = e.price_list_rate || e.rate, e.original_currency = e.currency || this.pos_profile && this.pos_profile.currency), e.base_price_list_rate = e.price_list_rate || e.original_rate, e.base_rate = e.base_rate || e.base_price_list_rate, e.rate = e.price_list_rate || e.rate, e.currency = e.currency || this.pos_profile && this.pos_profile.currency, console.log("after currency conversion", {
        code: e.item_code,
        rate: e.rate,
        currency: e.currency
      }));
    },
    async fetchVariants(e, t) {
      console.log("fetchVariants called with", e, t);
      try {
        const n = await frappe.call({
          method: "posawesome.posawesome.api.items.get_item_variants",
          args: {
            pos_profile: JSON.stringify(t || this.pos_profile || {}),
            parent_item_code: e
          }
        });
        if (console.log("variants API result", n), n.message) {
          const a = n.message.variants || n.message;
          this.attributes_meta = n.message.attributes_meta || this.attributes_meta;
          const r = new Set((this.items || []).map((o) => o.item_code)), i = a.filter((o) => !r.has(o.item_code));
          console.log("new variant items", i), await Promise.all(i.map((o) => this.fetchVariantRate(o))), this.items = (this.items || []).concat(i);
        }
      } catch (n) {
        console.error("Failed to fetch variants", n);
      }
    },
    updateFiltredItems: $i.debounce(function() {
      this.$nextTick(() => {
        const e = [];
        if (Object.entries(this.filters).forEach(([, t]) => {
          t && e.push(t);
        }), !e.length)
          this.filterdItems = this.variantsItems;
        else {
          const t = [];
          this.filterdItems = [], this.variantsItems.forEach((n) => {
            let a = !0, r = [];
            if (Array.isArray(n.item_attributes))
              r = n.item_attributes;
            else if (typeof n.item_attributes == "string" && n.item_attributes.trim().startsWith("["))
              try {
                r = JSON.parse(n.item_attributes);
              } catch {
                r = [];
              }
            for (const [i, o] of Object.entries(this.filters)) {
              if (!o) continue;
              if (!r.find(
                (s) => s.attribute === i && String(s.attribute_value) === String(o)
              )) {
                a = !1;
                break;
              }
            }
            a && !t.includes(n.item_code) && (this.filterdItems.push(n), t.push(n.item_code));
          });
        }
        console.log(
          "filtered items",
          this.filterdItems.map((t) => t.item_code)
        ), this.displayCount = 100;
      });
    }, 200),
    clearFilter(e) {
      this.filters[e] = null, this.$nextTick(() => {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      });
    },
    loadMore() {
      this.displayCount < this.filterdItems.length && (this.displayCount += 100);
    },
    async fetchVariantRate(e) {
      if (this.pos_profile || (this.pos_profile = await iw()), !this.pos_profile.warehouse)
        try {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.utils.get_default_warehouse",
            args: { company: this.pos_profile.company }
          });
          t.message && (this.pos_profile.warehouse = t.message);
        } catch (t) {
          console.error("Failed to fetch default warehouse", t);
        }
      console.log("fetchVariantRate called for", e.item_code);
      try {
        const t = await frappe.call({
          method: "posawesome.posawesome.api.items.get_item_detail",
          args: {
            warehouse: e.warehouse || this.pos_profile.warehouse,
            price_list: this.pos_profile.selling_price_list,
            company: this.pos_profile.company,
            item: JSON.stringify({
              item_code: e.item_code,
              pos_profile: this.pos_profile.name,
              qty: e.qty || 1,
              uom: e.uom || e.stock_uom,
              doctype: this.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
            })
          }
        });
        if (console.log("variant rate result", t), t.message) {
          const n = t.message;
          e.rate = n.price_list_rate, e.price_list_rate = n.price_list_rate, e.base_rate = n.price_list_rate, e.base_price_list_rate = n.price_list_rate, e.currency = n.currency || n.price_list_currency || this.pos_profile.currency, this.applyCurrencyConversionToItem(e), console.log("rate applied", {
            code: e.item_code,
            rate: e.rate
          });
        }
      } catch (t) {
        console.error("Failed to fetch variant rate", t);
      }
    },
    async add_item(e) {
      console.log("add_item called", e.item_code), await this.fetchVariantRate(e);
      const t = { ...e, code: e.item_code };
      console.log("emitting add_item", {
        code: t.code,
        rate: t.rate
      }), this.eventBus.emit("add_item", t), this.close_dialog();
    }
  },
  created: function() {
    this.eventBus.on("open_variants_model", async (e, t, n, a) => {
      if (console.log("open_variants_model", { item: e, items: t, profile: n, attrsMeta: a }), this.varaintsDialog = !0, this.parentItem = e || null, this.items = Array.isArray(t) ? t : [], this.filters = {}, this.attributes_meta = a || this.attributes_meta, !this.parentItem.attributes && this.attributes_meta && Object.keys(this.attributes_meta).length && (this.parentItem.attributes = Object.keys(this.attributes_meta).map((r) => ({
        attribute: r,
        values: this.attributes_meta[r].map((i) => ({ attribute_value: i, abbr: i }))
      }))), n ? this.pos_profile = n : this.pos_profile = await iw(), !this.items || this.items.length === 0) {
        const r = e.item_code || e.code || e.name;
        await this.fetchVariants(r, this.pos_profile);
      }
      this.$nextTick(() => {
        this.filterdItems = this.variantsItems, this.displayCount = 100;
      });
    });
  },
  beforeUnmount() {
    console.log("variants dialog destroyed"), this.eventBus.off("open_variants_model");
  }
}, Gre = { class: "text-caption text-primary text-accent-3" };
function Qre(e, t, n, a, r, i) {
  const o = J("v-spacer"), l = J("v-btn"), s = J("v-card-title"), d = J("v-chip"), u = J("v-chip-group"), f = J("v-divider"), h = J("v-card-text"), y = J("v-img"), p = J("v-card"), w = J("v-col"), b = J("v-row"), v = J("v-container"), g = J("v-dialog"), k = oN("intersect");
  return te(), Le(b, { justify: "center" }, {
    default: E(() => [
      _(g, {
        modelValue: e.varaintsDialog,
        "onUpdate:modelValue": t[0] || (t[0] = (A) => e.varaintsDialog = A),
        "max-width": "600px"
      }, {
        default: E(() => [
          _(p, { "min-height": "500px" }, {
            default: E(() => [
              _(s, null, {
                default: E(() => [
                  t[2] || (t[2] = T("span", { class: "text-h5 text-primary" }, "Select Item", -1)),
                  _(o),
                  _(l, {
                    color: "error",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => t[1] || (t[1] = [
                      ae("Close", -1)
                    ])),
                    _: 1,
                    __: [1]
                  }, 8, ["onClick"])
                ]),
                _: 1,
                __: [2]
              }),
              _(h, { class: "pa-0" }, {
                default: E(() => [
                  e.parentItem ? (te(), Le(v, { key: 0 }, {
                    default: E(() => [
                      (te(!0), Oe(Ge, null, ln(e.parentItem.attributes, (A) => (te(), Oe("div", {
                        key: A.attribute
                      }, [
                        _(u, {
                          modelValue: e.filters[A.attribute],
                          "onUpdate:modelValue": [(C) => e.filters[A.attribute] = C, i.updateFiltredItems],
                          "selected-class": "green--text text--accent-4",
                          column: ""
                        }, {
                          default: E(() => [
                            (te(!0), Oe(Ge, null, ln(A.values, (C) => (te(), Le(d, {
                              key: C.abbr,
                              value: C.attribute_value,
                              variant: "outlined",
                              label: ""
                            }, {
                              default: E(() => [
                                ae(j(C.attribute_value), 1)
                              ]),
                              _: 2
                            }, 1032, ["value"]))), 128)),
                            e.filters[A.attribute] ? (te(), Le(d, {
                              key: 0,
                              value: null,
                              variant: "text",
                              color: "primary",
                              onClick: ua((C) => i.clearFilter(A.attribute), ["stop"])
                            }, {
                              default: E(() => [
                                ae(j(e.__("Clear")), 1)
                              ]),
                              _: 2
                            }, 1032, ["onClick"])) : ke("", !0)
                          ]),
                          _: 2
                        }, 1032, ["modelValue", "onUpdate:modelValue"]),
                        _(f, { class: "p-0 m-0" })
                      ]))), 128)),
                      T("div", null, [
                        _(b, {
                          density: "default",
                          class: "overflow-y-auto",
                          style: { "max-height": "500px" }
                        }, {
                          default: E(() => [
                            (te(!0), Oe(Ge, null, ln(i.displayItems, (A, C) => (te(), Le(w, {
                              key: C,
                              xl: "2",
                              lg: "3",
                              md: "4",
                              sm: "4",
                              cols: "6",
                              "min-height": "50"
                            }, {
                              default: E(() => [
                                _(p, {
                                  hover: "hover",
                                  onClick: (D) => i.add_item(A)
                                }, {
                                  default: E(() => [
                                    _(y, {
                                      src: A.image || e.placeholderImage,
                                      class: "text-white align-end",
                                      gradient: "to bottom, rgba(0,0,0,.2), rgba(0,0,0,.7)",
                                      height: "100px"
                                    }, {
                                      default: E(() => [
                                        _(h, {
                                          textContent: j(A.item_name),
                                          class: "text-subtitle-2 px-1 pb-2"
                                        }, null, 8, ["textContent"])
                                      ]),
                                      _: 2
                                    }, 1032, ["src"]),
                                    _(h, { class: "text--primary pa-1" }, {
                                      default: E(() => [
                                        T("div", Gre, j(i.formatCurrencySafe(A.price_list_rate || A.rate || 0)) + " " + j(A.currency || ""), 1)
                                      ]),
                                      _: 2
                                    }, 1024)
                                  ]),
                                  _: 2
                                }, 1032, ["onClick"])
                              ]),
                              _: 2
                            }, 1024))), 128)),
                            sn(T("div", null, null, 512), [
                              [k, i.loadMore]
                            ])
                          ]),
                          _: 1
                        })
                      ])
                    ]),
                    _: 1
                  })) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const Jre = /* @__PURE__ */ on(Yre, [["render", Qre]]), Xre = {
  mixins: [Bi],
  data: () => ({
    invoicesDialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: [],
    company: "",
    invoice_name: "",
    customer_name: "",
    customer_id: "",
    mobile_no: "",
    tax_id: "",
    from_date: null,
    to_date: null,
    from_date_formatted: null,
    to_date_formatted: null,
    min_amount: "",
    max_amount: "",
    pos_profile: "",
    page: 1,
    has_more_invoices: !1,
    loading_more: !1,
    searched_once: !1,
    current_search_params: null,
    headers: [
      {
        title: __("Customer"),
        value: "customer",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      },
      {
        title: __("Invoice"),
        value: "name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "grand_total",
        align: "end",
        sortable: !1
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme?.current === "dark";
    }
  },
  watch: {
    from_date() {
      this.formatFromDate();
    },
    to_date() {
      this.formatToDate();
    }
  },
  methods: {
    formatDateDisplay(e) {
      if (!e) return "";
      try {
        const n = Lt.fromArabicNumerals(String(e)).split("-");
        if (n.length === 3) {
          const a = `${n[2]}-${n[1]}-${n[0]}`;
          return Lt.toArabicNumerals(a);
        }
      } catch (t) {
        console.error("Error formatting date:", t);
      }
      return Lt.toArabicNumerals(String(e));
    },
    formatFromDate() {
      if (this.from_date)
        try {
          let e = "";
          if (typeof this.from_date == "object" && this.from_date instanceof Date) {
            const t = String(this.from_date.getDate()).padStart(2, "0"), n = String(this.from_date.getMonth() + 1).padStart(2, "0"), a = this.from_date.getFullYear();
            e = `${t}-${n}-${a}`;
          } else if (typeof this.from_date == "string" && this.from_date.includes("-")) {
            const t = Lt.fromArabicNumerals(this.from_date).split("-");
            t.length === 3 ? e = `${t[2]}-${t[1]}-${t[0]}` : e = Lt.fromArabicNumerals(this.from_date);
          } else
            e = Lt.fromArabicNumerals(String(this.from_date));
          this.from_date_formatted = Lt.toArabicNumerals(e);
        } catch (e) {
          console.error("Error formatting from_date:", e), this.from_date_formatted = Lt.toArabicNumerals(String(this.from_date));
        }
      else
        this.from_date_formatted = null;
    },
    formatToDate() {
      if (this.to_date)
        try {
          let e = "";
          if (typeof this.to_date == "object" && this.to_date instanceof Date) {
            const t = String(this.to_date.getDate()).padStart(2, "0"), n = String(this.to_date.getMonth() + 1).padStart(2, "0"), a = this.to_date.getFullYear();
            e = `${t}-${n}-${a}`;
          } else if (typeof this.to_date == "string" && this.to_date.includes("-")) {
            const t = Lt.fromArabicNumerals(this.to_date).split("-");
            t.length === 3 ? e = `${t[2]}-${t[1]}-${t[0]}` : e = Lt.fromArabicNumerals(this.to_date);
          } else
            e = Lt.fromArabicNumerals(String(this.to_date));
          this.to_date_formatted = Lt.toArabicNumerals(e);
        } catch (e) {
          console.error("Error formatting to_date:", e), this.to_date_formatted = Lt.toArabicNumerals(String(this.to_date));
        }
      else
        this.to_date_formatted = null;
    },
    clearFromDate() {
      this.from_date = null, this.from_date_formatted = null;
    },
    clearToDate() {
      this.to_date = null, this.to_date_formatted = null;
    },
    close_dialog() {
      this.invoicesDialog = !1;
    },
    clear_search() {
      this.invoice_name = "", this.customer_name = "", this.customer_id = "", this.mobile_no = "", this.tax_id = "", this.from_date = null, this.to_date = null, this.from_date_formatted = null, this.to_date_formatted = null, this.min_amount = "", this.max_amount = "", this.dialog_data = [], this.page = 1, this.has_more_invoices = !1, this.searched_once = !1;
    },
    search_invoices_by_enter(e) {
      e.keyCode === 13 && this.search_invoices();
    },
    search_invoices() {
      this.page = 1, this.dialog_data = [], this.perform_search();
    },
    perform_search() {
      const e = this;
      e.loading_more = !0;
      let t = null, n = null;
      if (e.from_date) {
        if (typeof e.from_date == "object" && e.from_date instanceof Date)
          t = [
            e.from_date.getFullYear(),
            String(e.from_date.getMonth() + 1).padStart(2, "0"),
            String(e.from_date.getDate()).padStart(2, "0")
          ].join("-");
        else if (typeof e.from_date == "string") {
          const i = Lt.fromArabicNumerals(e.from_date);
          if (i.includes("/")) {
            const o = i.split("/");
            o.length === 3 && (t = `${o[2]}-${o[1]}-${o[0]}`);
          } else if (i.includes("-")) {
            const o = i.split("-");
            o.length === 3 && (o[0].length === 4 ? t = i : t = `${o[2]}-${o[1]}-${o[0]}`);
          } else
            t = null;
        }
      }
      if (e.to_date) {
        if (typeof e.to_date == "object" && e.to_date instanceof Date)
          n = [
            e.to_date.getFullYear(),
            String(e.to_date.getMonth() + 1).padStart(2, "0"),
            String(e.to_date.getDate()).padStart(2, "0")
          ].join("-");
        else if (typeof e.to_date == "string") {
          const i = Lt.fromArabicNumerals(e.to_date);
          if (i.includes("/")) {
            const o = i.split("/");
            o.length === 3 && (n = `${o[2]}-${o[1]}-${o[0]}`);
          } else if (i.includes("-")) {
            const o = i.split("-");
            o.length === 3 && (o[0].length === 4 ? n = i : n = `${o[2]}-${o[1]}-${o[0]}`);
          } else
            n = null;
        }
      }
      let a = e.min_amount ? parseFloat(Lt.fromArabicNumerals(e.min_amount)) : null, r = e.max_amount ? parseFloat(Lt.fromArabicNumerals(e.max_amount)) : null;
      this.current_search_params = {
        invoice_name: e.invoice_name,
        customer_name: e.customer_name,
        customer_id: e.customer_id,
        mobile_no: e.mobile_no,
        tax_id: e.tax_id,
        from_date: t,
        to_date: n,
        min_amount: a,
        max_amount: r,
        company: e.company,
        page: e.page,
        doctype: e.pos_profile && e.pos_profile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice"
      }, frappe.call({
        method: "posawesome.posawesome.api.invoices.search_invoices_for_return",
        args: this.current_search_params,
        callback: function(i) {
          e.loading_more = !1, e.searched_once = !0, i.message ? (e.page === 1 ? e.dialog_data = i.message.invoices : e.dialog_data = [...e.dialog_data, ...i.message.invoices], e.has_more_invoices = i.message.has_more) : (e.dialog_data = [], e.has_more_invoices = !1, e.eventBus.emit("show_message", {
            title: __("No invoices found"),
            color: "warning"
          }));
        },
        error: function(i) {
          e.loading_more = !1, console.error("Error searching invoices:", i), e.eventBus.emit("show_message", {
            title: __("Error searching invoices"),
            color: "error"
          });
        }
      });
    },
    load_more_invoices() {
      this.page += 1, this.perform_search();
    },
    return_without_invoice() {
      console.log("Starting return without invoice flow");
      const e = {};
      e.items = [], e.is_return = 1;
      const t = { invoice_doc: e };
      console.log("Emitting load_return_invoice event with data:", t), this.eventBus.emit("load_return_invoice", t), this.invoicesDialog = !1;
    },
    submit_dialog() {
      if (this.selected.length > 0) {
        console.log("Starting return with invoice flow");
        const e = this.selected[0], t = {}, n = [];
        console.log("Original return doc:", e), e.items.forEach((r) => {
          const i = { ...r };
          e.doctype === "POS Invoice" ? i.pos_invoice_item = r.name : i.sales_invoice_item = r.name, delete i.name, i.rate = r.rate, i.price_list_rate = r.price_list_rate, i.discount_percentage = r.discount_percentage, i.discount_amount = r.discount_amount, i.is_free_item = r.is_free_item, i.net_rate = r.net_rate, i.net_amount = r.net_amount > 0 ? r.net_amount * -1 : r.net_amount, i.locked_price = !0, i.qty = r.qty > 0 ? r.qty * -1 : r.qty, i.stock_qty = r.stock_qty > 0 ? r.stock_qty * -1 : r.stock_qty, i.amount = r.amount > 0 ? r.amount * -1 : r.amount, n.push(i);
        }), t.items = n, t.is_return = 1, t.return_against = e.name, t.customer = e.customer, t.discount_amount = e.discount_amount, t.additional_discount_percentage = e.additional_discount_percentage, e.grand_total > 0 ? t.grand_total = e.grand_total * -1 : t.grand_total = e.grand_total, t.update_stock = 1, t.pos_profile = this.pos_profile.name, t.company = this.company;
        const a = { invoice_doc: t, return_doc: e };
        console.log("Emitting load_return_invoice event with data:", a), this.eventBus.emit("load_return_invoice", a), this.invoicesDialog = !1;
      }
    }
  },
  created: function() {
    this.eventBus.on("open_returns", (e) => {
      this.invoicesDialog = !0, this.company = e, this.invoice_name = "", this.customer_name = "", this.customer_id = "", this.mobile_no = "", this.tax_id = "", this.from_date = null, this.to_date = null, this.from_date_formatted = null, this.to_date_formatted = null, this.min_amount = "", this.max_amount = "", this.dialog_data = [], this.selected = [], this.page = 1, this.has_more_invoices = !1, this.searched_once = !1;
    }), this.eventBus.on("register_pos_profile", (e) => {
      this.pos_profile = e.pos_profile;
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_returns"), this.eventBus.off("register_pos_profile");
  }
}, Zre = { class: "text-h5 text-primary" }, eie = {
  key: 0,
  class: "text-center mt-3"
};
function tie(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-alert"), s = J("v-col"), d = J("v-row"), u = J("v-text-field"), f = J("VueDatePicker"), h = J("v-divider"), y = J("v-spacer"), p = J("v-icon"), w = J("v-btn"), b = J("v-data-table"), v = J("v-container"), g = J("v-card-actions"), k = J("v-card"), A = J("v-dialog");
  return te(), Le(d, { justify: "center" }, {
    default: E(() => [
      _(A, {
        modelValue: e.invoicesDialog,
        "onUpdate:modelValue": t[12] || (t[12] = (C) => e.invoicesDialog = C),
        "max-width": "800px",
        "min-width": "800px"
      }, {
        default: E(() => [
          _(k, null, {
            default: E(() => [
              _(o, null, {
                default: E(() => [
                  T("span", Zre, j(e.__("Select Return Invoice")), 1)
                ]),
                _: 1
              }),
              _(v, null, {
                default: E(() => [
                  _(d, { class: "mb-2" }, {
                    default: E(() => [
                      _(s, { cols: "12" }, {
                        default: E(() => [
                          !e.from_date && !e.to_date ? (te(), Le(l, {
                            key: 0,
                            density: "compact",
                            type: "info",
                            variant: "outlined"
                          }, {
                            default: E(() => [
                              T("small", null, j(e.__("Use date range to search for older invoices")), 1)
                            ]),
                            _: 1
                          })) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-3" }, {
                    default: E(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Invoice ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.invoice_name,
                            "onUpdate:modelValue": t[0] || (t[0] = (C) => e.invoice_name = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "3"
                      }, {
                        default: E(() => [
                          _(f, {
                            modelValue: e.from_date,
                            "onUpdate:modelValue": [
                              t[1] || (t[1] = (C) => e.from_date = C),
                              t[2] || (t[2] = (C) => i.formatFromDate())
                            ],
                            "model-type": "format",
                            format: "dd-MM-yyyy",
                            "enable-time-picker": !1,
                            "auto-apply": "",
                            dark: i.isDarkTheme
                          }, null, 8, ["modelValue", "dark"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "3"
                      }, {
                        default: E(() => [
                          _(f, {
                            modelValue: e.to_date,
                            "onUpdate:modelValue": [
                              t[3] || (t[3] = (C) => e.to_date = C),
                              t[4] || (t[4] = (C) => i.formatToDate())
                            ],
                            "model-type": "format",
                            format: "dd-MM-yyyy",
                            "enable-time-picker": !1,
                            "auto-apply": "",
                            dark: i.isDarkTheme
                          }, null, 8, ["modelValue", "dark"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-2" }, {
                    default: E(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Customer Name"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.customer_name,
                            "onUpdate:modelValue": t[5] || (t[5] = (C) => e.customer_name = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Customer ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.customer_id,
                            "onUpdate:modelValue": t[6] || (t[6] = (C) => e.customer_id = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-3" }, {
                    default: E(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Mobile Number"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.mobile_no,
                            "onUpdate:modelValue": t[7] || (t[7] = (C) => e.mobile_no = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Tax ID"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.tax_id,
                            "onUpdate:modelValue": t[8] || (t[8] = (C) => e.tax_id = C),
                            density: "compact",
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mb-3" }, {
                    default: E(() => [
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Minimum Amount"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.min_amount,
                            "onUpdate:modelValue": t[9] || (t[9] = (C) => e.min_amount = C),
                            density: "compact",
                            clearable: "",
                            type: "number",
                            min: "0",
                            placeholder: "0"
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "12",
                        sm: "6"
                      }, {
                        default: E(() => [
                          _(u, {
                            color: "primary",
                            label: e.frappe._("Maximum Amount"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            class: "dark-field",
                            "hide-details": "",
                            modelValue: e.max_amount,
                            "onUpdate:modelValue": t[10] || (t[10] = (C) => e.max_amount = C),
                            density: "compact",
                            clearable: "",
                            type: "number",
                            min: "0",
                            placeholder: "No limit"
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, null, {
                    default: E(() => [
                      _(s, {
                        cols: "12",
                        class: "pt-0 pb-0"
                      }, {
                        default: E(() => [
                          _(h)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, { class: "mt-2 mb-2" }, {
                    default: E(() => [
                      _(y),
                      _(w, {
                        variant: "text",
                        class: "ml-2",
                        color: "primary",
                        theme: "dark",
                        onClick: i.search_invoices
                      }, {
                        default: E(() => [
                          _(p, { start: "" }, {
                            default: E(() => t[13] || (t[13] = [
                              ae("mdi-magnify", -1)
                            ])),
                            _: 1,
                            __: [13]
                          }),
                          ae(" " + j(e.__("Search")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      _(w, {
                        variant: "text",
                        class: "ml-2",
                        color: "warning",
                        theme: "dark",
                        onClick: i.clear_search
                      }, {
                        default: E(() => [
                          _(p, { start: "" }, {
                            default: E(() => t[14] || (t[14] = [
                              ae("mdi-refresh", -1)
                            ])),
                            _: 1,
                            __: [14]
                          }),
                          ae(" " + j(e.__("Clear")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"]),
                      e.pos_profile.posa_allow_return_without_invoice == 1 ? (te(), Le(w, {
                        key: 0,
                        variant: "text",
                        class: "ml-2",
                        color: "secondary",
                        theme: "dark",
                        onClick: i.return_without_invoice
                      }, {
                        default: E(() => [
                          ae(j(e.__("Return without Invoice")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"])) : ke("", !0)
                    ]),
                    _: 1
                  }),
                  _(d, null, {
                    default: E(() => [
                      e.dialog_data && e.dialog_data.length > 0 ? (te(), Le(s, {
                        key: 0,
                        cols: "12",
                        class: "pa-0 mt-1"
                      }, {
                        default: E(() => [
                          _(b, {
                            headers: e.headers,
                            items: e.dialog_data,
                            "item-key": "name",
                            class: "elevation-1",
                            "show-select": "",
                            modelValue: e.selected,
                            "onUpdate:modelValue": t[11] || (t[11] = (C) => e.selected = C),
                            "select-strategy": "single",
                            "return-object": "",
                            "footer-props": {
                              "items-per-page-options": [10, 25, 50, 100],
                              "items-per-page-text": "Invoices per page"
                            },
                            "items-per-page": 25
                          }, {
                            "item.posting_date": E(({ item: C }) => [
                              ae(j(i.formatDateDisplay(C.posting_date)), 1)
                            ]),
                            "item.grand_total": E(({ item: C }) => [
                              ae(j(e.currencySymbol(C.currency)) + " " + j(e.formatCurrency(C.grand_total)), 1)
                            ]),
                            _: 1
                          }, 8, ["headers", "items", "modelValue"]),
                          e.has_more_invoices ? (te(), Oe("div", eie, [
                            _(w, {
                              color: "primary",
                              variant: "outlined",
                              loading: e.loading_more,
                              onClick: i.load_more_invoices
                            }, {
                              default: E(() => [
                                ae(j(e.__("Load More Invoices")), 1)
                              ]),
                              _: 1
                            }, 8, ["loading", "onClick"])
                          ])) : ke("", !0)
                        ]),
                        _: 1
                      })) : e.searched_once && (!e.dialog_data || e.dialog_data.length === 0) ? (te(), Le(s, {
                        key: 1,
                        cols: "12",
                        class: "text-center"
                      }, {
                        default: E(() => [
                          _(l, {
                            type: "warning",
                            text: ""
                          }, {
                            default: E(() => [
                              ae(j(e.__("No invoices found. Try different search criteria.")), 1)
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })) : ke("", !0)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(g, { class: "mt-1" }, {
                default: E(() => [
                  _(y),
                  _(w, {
                    color: "error mx-2",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Close")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"]),
                  e.selected.length ? (te(), Le(w, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Select")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const nie = /* @__PURE__ */ on(Xre, [["render", tie]]), aie = {
  data: () => ({
    dialog: !1,
    singleSelect: !0,
    selected: [],
    dialog_data: "",
    company: "",
    customer: "",
    mode_of_payment: "",
    full_name: "",
    mobile_no: "",
    headers: [
      {
        title: __("Full Name"),
        value: "full_name",
        align: "start",
        sortable: !0
      },
      {
        title: __("Mobile No"),
        value: "mobile_no",
        align: "start",
        sortable: !0
      },
      {
        title: __("Amount"),
        value: "amount",
        align: "start",
        sortable: !0
      },
      {
        title: __("Date"),
        align: "start",
        sortable: !0,
        value: "posting_date"
      }
    ]
  }),
  computed: {
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  watch: {},
  methods: {
    close_dialog() {
      this.dialog = !1;
    },
    search_by_enter(e) {
      e.keyCode === 13 && this.search();
    },
    search() {
      const e = this;
      frappe.call({
        method: "posawesome.posawesome.api.m_pesa.get_mpesa_draft_payments",
        args: {
          company: this.company,
          mode_of_payment: this.mode_of_payment,
          mobile_no: this.mobile_no,
          full_name: this.full_name
        },
        async: !1,
        callback: function(t) {
          t.exc || (e.dialog_data = t.message);
        }
      });
    },
    submit_dialog() {
      var e = this;
      if (this.selected.length > 0) {
        const t = this.selected[0].name;
        frappe.call({
          method: "posawesome.posawesome.api.m_pesa.submit_mpesa_payment",
          args: {
            mpesa_payment: t,
            customer: this.customer
          },
          async: !1,
          callback: function(n) {
            n.exc || (e.eventBus.emit("set_mpesa_payment", n.message), e.dialog = !1);
          }
        });
      }
    },
    formatCurrency(e) {
      return this.$options.mixins[0].methods.formatCurrency.call(this, e, 2);
    }
  },
  created: function() {
    this.eventBus.on("open_mpesa_payments", (e) => {
      this.dialog = !0, this.full_name = "", this.mobile_no = "", this.company = e.company, this.customer = e.customer, this.mode_of_payment = e.mode_of_payment, this.dialog_data = "", this.selected = [];
    });
  },
  beforeUnmount() {
    this.eventBus.off("open_mpesa_payments");
  }
}, rie = { class: "text-h5 text-primary" };
function iie(e, t, n, a, r, i) {
  const o = J("v-card-title"), l = J("v-text-field"), s = J("v-btn"), d = J("v-row"), u = J("v-data-table"), f = J("v-col"), h = J("v-container"), y = J("v-spacer"), p = J("v-card-actions"), w = J("v-card"), b = J("v-dialog");
  return te(), Le(d, { justify: "center" }, {
    default: E(() => [
      _(b, {
        modelValue: e.dialog,
        "onUpdate:modelValue": t[3] || (t[3] = (v) => e.dialog = v),
        "max-width": "800px",
        "min-width": "800px"
      }, {
        default: E(() => [
          _(w, null, {
            default: E(() => [
              _(o, null, {
                default: E(() => [
                  T("span", rie, j(e.__("Select Payment")), 1)
                ]),
                _: 1
              }),
              _(h, null, {
                default: E(() => [
                  _(d, { class: "mb-4" }, {
                    default: E(() => [
                      _(l, {
                        color: "primary",
                        label: e.frappe._("Full Name"),
                        "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                        "hide-details": "",
                        modelValue: e.full_name,
                        "onUpdate:modelValue": t[0] || (t[0] = (v) => e.full_name = v),
                        density: "compact",
                        clearable: "",
                        class: "mx-4"
                      }, null, 8, ["label", "bg-color", "modelValue"]),
                      _(l, {
                        color: "primary",
                        label: e.frappe._("Mobile No"),
                        "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                        "hide-details": "",
                        modelValue: e.mobile_no,
                        "onUpdate:modelValue": t[1] || (t[1] = (v) => e.mobile_no = v),
                        density: "compact",
                        clearable: "",
                        class: "mx-4"
                      }, null, 8, ["label", "bg-color", "modelValue"]),
                      _(s, {
                        variant: "text",
                        class: "ml-2",
                        color: "primary",
                        theme: "dark",
                        onClick: i.search
                      }, {
                        default: E(() => [
                          ae(j(e.__("Search")), 1)
                        ]),
                        _: 1
                      }, 8, ["onClick"])
                    ]),
                    _: 1
                  }),
                  _(d, null, {
                    default: E(() => [
                      e.dialog_data ? (te(), Le(f, {
                        key: 0,
                        cols: "12",
                        class: "pa-1"
                      }, {
                        default: E(() => [
                          _(u, {
                            headers: e.headers,
                            items: e.dialog_data,
                            "item-key": "name",
                            class: "elevation-1",
                            "show-select": "",
                            modelValue: e.selected,
                            "onUpdate:modelValue": t[2] || (t[2] = (v) => e.selected = v),
                            "return-object": "",
                            "select-strategy": "single"
                          }, {
                            "item.amount": E(({ item: v }) => [
                              ae(j(i.formatCurrency(v.amount)), 1)
                            ]),
                            "item.posting_date": E(({ item: v }) => [
                              ae(j(v.posting_date.slice(0, 16)), 1)
                            ]),
                            _: 1
                          }, 8, ["headers", "items", "modelValue"])
                        ]),
                        _: 1
                      })) : ke("", !0)
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              _(p, { class: "mt-4" }, {
                default: E(() => [
                  _(y),
                  _(s, {
                    color: "error mx-2",
                    theme: "dark",
                    onClick: i.close_dialog
                  }, {
                    default: E(() => t[4] || (t[4] = [
                      ae("Close", -1)
                    ])),
                    _: 1,
                    __: [4]
                  }, 8, ["onClick"]),
                  e.selected.length ? (te(), Le(s, {
                    key: 0,
                    color: "success",
                    theme: "dark",
                    onClick: i.submit_dialog
                  }, {
                    default: E(() => [
                      ae(j(e.__("Submit")), 1)
                    ]),
                    _: 1
                  }, 8, ["onClick"])) : ke("", !0)
                ]),
                _: 1
              })
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ]),
    _: 1
  });
}
const oie = /* @__PURE__ */ on(aie, [["render", iie]]), sie = {
  name: "CategorySidebar",
  props: {
    itemGroups: {
      type: Array,
      default: () => []
    },
    selectedGroup: {
      type: String,
      default: null
    },
    loading: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["group-selected", "sidebar-toggled", "search-changed", "filter-changed"],
  data() {
    return {
      isCollapsed: !1,
      searchTerm: "",
      selectedFilter: "all",
      recentGroups: [],
      // Store recently selected groups
      searchTimeout: null
    };
  },
  computed: {
    filteredGroups() {
      let e = [...this.itemGroups];
      if (this.searchTerm) {
        const t = this.searchTerm.toLowerCase();
        e = e.filter(
          (n) => n.name.toLowerCase().includes(t)
        );
      }
      switch (this.selectedFilter) {
        case "popular":
          e = e.sort((t, n) => (n.item_count || 0) - (t.item_count || 0));
          break;
        case "recent":
          e = e.sort((t, n) => {
            const a = this.recentGroups.indexOf(t.name), r = this.recentGroups.indexOf(n.name);
            return a === -1 && r === -1 ? 0 : a === -1 ? 1 : r === -1 ? -1 : a - r;
          });
          break;
        default:
          e = e.sort((t, n) => t.name.localeCompare(n.name));
      }
      return e;
    },
    totalCategories() {
      return this.itemGroups.length;
    },
    totalItems() {
      return this.itemGroups.reduce((e, t) => e + (t.item_count || 0), 0);
    }
  },
  methods: {
    toggleSidebar() {
      this.isCollapsed = !this.isCollapsed, this.$emit("sidebar-toggled", this.isCollapsed), localStorage.setItem("pos_category_sidebar_collapsed", this.isCollapsed);
    },
    selectGroup(e) {
      this.$emit("group-selected", e.name), this.addToRecent(e.name);
    },
    addToRecent(e) {
      this.recentGroups = this.recentGroups.filter((t) => t !== e), this.recentGroups.unshift(e), this.recentGroups = this.recentGroups.slice(0, 10), localStorage.setItem("pos_recent_categories", JSON.stringify(this.recentGroups));
    },
    onSearchInput: AD.debounce(function() {
      this.$emit("search-changed", this.searchTerm);
    }, 300),
    clearSearch() {
      this.searchTerm = "", this.$emit("search-changed", "");
    },
    setFilter(e) {
      this.selectedFilter = e, this.$emit("filter-changed", e);
    },
    getGroupIcon(e) {
      const t = {
        Consumable: "mdi-shopping",
        Products: "mdi-package-variant",
        "Raw Material": "mdi-factory",
        Services: "mdi-handshake",
        "Sub Assemblies": "mdi-cogs",
        Food: "mdi-food",
        Beverages: "mdi-coffee",
        Electronics: "mdi-laptop",
        Clothing: "mdi-tshirt-crew",
        Books: "mdi-book-open-page-variant",
        Health: "mdi-heart-pulse",
        Beauty: "mdi-face-woman-shimmer",
        Sports: "mdi-soccer",
        Automotive: "mdi-car",
        Home: "mdi-home",
        All: "mdi-view-grid",
        ALL: "mdi-view-grid",
        Default: "mdi-folder"
      };
      return t[e] || t.Default;
    },
    getCategoryColor(e) {
      const t = {
        Consumable: "#4CAF50",
        Products: "#2196F3",
        "Raw Material": "#9C27B0",
        Services: "#FF9800",
        "Sub Assemblies": "#00BCD4",
        Food: "#F44336",
        Beverages: "#795548",
        Electronics: "#3F51B5",
        Clothing: "#E91E63",
        Books: "#009688",
        Health: "#FF5722",
        Beauty: "#E91E63",
        Sports: "#8BC34A",
        Automotive: "#607D8B",
        Home: "#00BCD4",
        All: "#673AB7",
        ALL: "#673AB7",
        Default: "#9E9E9E"
      };
      return t[e] || t.Default;
    },
    formatCurrency(e) {
      return new Intl.NumberFormat("en-IN", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(e);
    },
    // Load saved preferences
    loadPreferences() {
      const e = localStorage.getItem("pos_category_sidebar_collapsed");
      e !== null && (this.isCollapsed = e === "true");
      const t = localStorage.getItem("pos_recent_categories");
      if (t)
        try {
          this.recentGroups = JSON.parse(t);
        } catch {
          this.recentGroups = [];
        }
    }
  },
  mounted() {
    this.loadPreferences();
  },
  beforeUnmount() {
    this.searchTimeout && clearTimeout(this.searchTimeout);
  }
}, lie = { class: "sidebar-header" }, cie = { class: "header-content" }, uie = {
  key: 0,
  class: "fas fa-layer-group header-icon"
}, die = { key: 1 }, fie = {
  key: 0,
  class: "search-section"
}, mie = {
  key: 1,
  class: "quick-filters"
}, hie = {
  class: "category-list",
  ref: "categoryList"
}, _ie = ["onClick", "title"], vie = {
  key: 0,
  class: "category-details"
}, pie = { class: "category-name" }, gie = { class: "category-meta" }, yie = {
  key: 0,
  class: "stock-value"
}, bie = {
  key: 1,
  class: "category-arrow"
}, wie = {
  key: 2,
  class: "item-badge"
}, kie = {
  key: 0,
  class: "empty-state"
}, Sie = { class: "empty-icon" }, Cie = {
  key: 0,
  class: "empty-text"
}, Aie = {
  key: 2,
  class: "sidebar-footer"
}, xie = { class: "stats" }, Tie = { class: "stat-item" }, Iie = { class: "stat-label" }, Eie = { class: "stat-item" }, Pie = { class: "stat-label" };
function Oie(e, t, n, a, r, i) {
  const o = J("v-icon"), l = J("v-btn"), s = J("v-text-field"), d = J("v-btn-toggle"), u = J("v-chip"), f = J("v-divider");
  return te(), Oe("div", {
    class: Ae(["category-sidebar", { collapsed: r.isCollapsed }])
  }, [
    T("div", lie, [
      T("div", cie, [
        r.isCollapsed ? ke("", !0) : (te(), Oe("i", uie)),
        r.isCollapsed ? ke("", !0) : (te(), Oe("h3", die, j(e.__("Categories")), 1))
      ]),
      _(l, {
        icon: "",
        size: "small",
        variant: "outlined",
        class: "collapse-btn",
        onClick: i.toggleSidebar,
        title: r.isCollapsed ? e.__("Expand Categories") : e.__("Collapse Categories")
      }, {
        default: E(() => [
          _(o, null, {
            default: E(() => [
              ae(j(r.isCollapsed ? "mdi-chevron-right" : "mdi-chevron-left"), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["onClick", "title"])
    ]),
    r.isCollapsed ? ke("", !0) : (te(), Oe("div", fie, [
      _(s, {
        modelValue: r.searchTerm,
        "onUpdate:modelValue": t[0] || (t[0] = (h) => r.searchTerm = h),
        placeholder: e.__("Search categories..."),
        density: "compact",
        variant: "outlined",
        clearable: "",
        "hide-details": "",
        "prepend-inner-icon": "mdi-magnify",
        onInput: i.onSearchInput,
        "onClick:clear": i.clearSearch,
        class: "category-search"
      }, null, 8, ["modelValue", "placeholder", "onInput", "onClick:clear"])
    ])),
    !r.isCollapsed && !r.searchTerm ? (te(), Oe("div", mie, [
      _(d, {
        modelValue: r.selectedFilter,
        "onUpdate:modelValue": t[4] || (t[4] = (h) => r.selectedFilter = h),
        color: "primary",
        density: "compact",
        variant: "outlined",
        divided: "",
        mandatory: ""
      }, {
        default: E(() => [
          _(l, {
            value: "all",
            size: "small",
            onClick: t[1] || (t[1] = (h) => i.setFilter("all"))
          }, {
            default: E(() => [
              _(o, {
                left: "",
                size: "small"
              }, {
                default: E(() => t[5] || (t[5] = [
                  ae("mdi-view-grid", -1)
                ])),
                _: 1,
                __: [5]
              }),
              ae(" " + j(e.__("All")), 1)
            ]),
            _: 1
          }),
          _(l, {
            value: "popular",
            size: "small",
            onClick: t[2] || (t[2] = (h) => i.setFilter("popular"))
          }, {
            default: E(() => [
              _(o, {
                left: "",
                size: "small"
              }, {
                default: E(() => t[6] || (t[6] = [
                  ae("mdi-star", -1)
                ])),
                _: 1,
                __: [6]
              }),
              ae(" " + j(e.__("Popular")), 1)
            ]),
            _: 1
          }),
          _(l, {
            value: "recent",
            size: "small",
            onClick: t[3] || (t[3] = (h) => i.setFilter("recent"))
          }, {
            default: E(() => [
              _(o, {
                left: "",
                size: "small"
              }, {
                default: E(() => t[7] || (t[7] = [
                  ae("mdi-clock-outline", -1)
                ])),
                _: 1,
                __: [7]
              }),
              ae(" " + j(e.__("Recent")), 1)
            ]),
            _: 1
          })
        ]),
        _: 1
      }, 8, ["modelValue"])
    ])) : ke("", !0),
    T("div", hie, [
      (te(!0), Oe(Ge, null, ln(i.filteredGroups, (h) => (te(), Oe("div", {
        key: h.name,
        class: Ae(["category-item", {
          active: n.selectedGroup === h.name,
          "has-items": h.item_count > 0,
          "no-stock": h.item_count === 0
        }]),
        onClick: (y) => i.selectGroup(h),
        title: r.isCollapsed ? h.name : `${h.name} (${h.item_count} items)`
      }, [
        T("div", {
          class: "category-icon",
          style: Je({ color: i.getCategoryColor(h.name) })
        }, [
          _(o, { size: "large" }, {
            default: E(() => [
              ae(j(i.getGroupIcon(h.name)), 1)
            ]),
            _: 2
          }, 1024)
        ], 4),
        r.isCollapsed ? ke("", !0) : (te(), Oe("div", vie, [
          T("span", pie, j(h.name), 1),
          T("div", gie, [
            _(u, {
              size: "x-small",
              color: h.item_count > 0 ? "primary" : "grey",
              variant: "flat"
            }, {
              default: E(() => [
                ae(j(h.item_count) + " " + j(e.__("items")), 1)
              ]),
              _: 2
            }, 1032, ["color"]),
            h.stock_value ? (te(), Oe("span", yie, " ₹" + j(i.formatCurrency(h.stock_value)), 1)) : ke("", !0)
          ])
        ])),
        !r.isCollapsed && h.item_count > 0 ? (te(), Oe("div", bie, [
          _(o, { size: "small" }, {
            default: E(() => t[8] || (t[8] = [
              ae("mdi-chevron-right", -1)
            ])),
            _: 1,
            __: [8]
          })
        ])) : ke("", !0),
        r.isCollapsed && h.item_count > 0 ? (te(), Oe("div", wie, j(h.item_count), 1)) : ke("", !0)
      ], 10, _ie))), 128)),
      i.filteredGroups.length === 0 ? (te(), Oe("div", kie, [
        T("div", Sie, [
          _(o, {
            size: "48",
            color: "grey"
          }, {
            default: E(() => t[9] || (t[9] = [
              ae("mdi-folder-search-outline", -1)
            ])),
            _: 1,
            __: [9]
          })
        ]),
        r.isCollapsed ? ke("", !0) : (te(), Oe("p", Cie, j(r.searchTerm ? e.__("No categories found") : e.__("No categories available")), 1))
      ])) : ke("", !0)
    ], 512),
    r.isCollapsed ? ke("", !0) : (te(), Oe("div", Aie, [
      _(f),
      T("div", xie, [
        T("div", Tie, [
          T("span", Iie, j(e.__("Total Categories")) + ":", 1),
          _(u, {
            size: "x-small",
            color: "primary"
          }, {
            default: E(() => [
              ae(j(i.totalCategories), 1)
            ]),
            _: 1
          })
        ]),
        T("div", Eie, [
          T("span", Pie, j(e.__("Total Items")) + ":", 1),
          _(u, {
            size: "x-small",
            color: "success"
          }, {
            default: E(() => [
              ae(j(i.totalItems), 1)
            ]),
            _: 1
          })
        ])
      ])
    ]))
  ], 2);
}
const Die = /* @__PURE__ */ on(sie, [["render", Oie], ["__scopeId", "data-v-3c1dad8a"]]);
function Bie(e) {
  const { proxy: t } = Io(), n = t?.eventBus, a = be(null), r = be(null);
  async function i() {
    return await fm, await ia(), frappe.call("posawesome.posawesome.api.shifts.check_opening_shift", {
      user: frappe.session.user
    }).then((s) => {
      if (s.message) {
        a.value = s.message.pos_profile, r.value = s.message.pos_opening_shift, a.value.taxes_and_charges && frappe.call({
          method: "frappe.client.get",
          args: {
            doctype: "Sales Taxes and Charges Template",
            name: a.value.taxes_and_charges
          },
          callback: (d) => {
            d.message && TQ(
              a.value.taxes_and_charges,
              d.message
            );
          }
        }), n?.emit("register_pos_profile", s.message), n?.emit("set_company", s.message.company);
        try {
          frappe.realtime.emit("pos_profile_registered");
        } catch (d) {
          console.warn("Realtime emit failed", d);
        }
        console.info("LoadPosProfile");
        try {
          _1(s.message);
        } catch (d) {
          console.error("Failed to cache opening data", d);
        }
      } else {
        const d = $u();
        if (d) {
          a.value = d.pos_profile, r.value = d.pos_opening_shift, n?.emit("register_pos_profile", d), n?.emit("set_company", d.company);
          try {
            frappe.realtime.emit("pos_profile_registered");
          } catch (u) {
            console.warn("Realtime emit failed", u);
          }
          console.info("LoadPosProfile (cached)");
          return;
        }
        e && e();
      }
    }).catch(() => {
      const s = $u();
      if (s) {
        a.value = s.pos_profile, r.value = s.pos_opening_shift, n?.emit("register_pos_profile", s), n?.emit("set_company", s.company);
        try {
          frappe.realtime.emit("pos_profile_registered");
        } catch (d) {
          console.warn("Realtime emit failed", d);
        }
        console.info("LoadPosProfile (cached)");
        return;
      }
      e && e();
    });
  }
  function o() {
    return frappe.call(
      "posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.make_closing_shift_from_opening",
      { opening_shift: r.value }
    ).then((s) => {
      s.message && n?.emit("open_ClosingDialog", s.message);
    });
  }
  function l(s) {
    frappe.call(
      "posawesome.posawesome.doctype.pos_closing_shift.pos_closing_shift.submit_closing_shift",
      { closing_shift: s }
    ).then((d) => {
      d.message && (r.value = null, a.value = null, SQ(), n?.emit("show_message", {
        title: "POS Shift Closed",
        color: "success"
      }), i());
    });
  }
  return { pos_profile: a, pos_opening_shift: r, check_opening_entry: i, get_closing_data: o, submit_closing_pos: l };
}
function Vie() {
  const { proxy: e } = Io(), t = e?.eventBus, n = be([]);
  function a(r, i) {
    if (i && i.posa_local_storage) {
      const o = PA();
      o.length && (n.value = o, t?.emit("set_offers", o));
    }
    return frappe.call("posawesome.posawesome.api.offers.get_offers", { profile: r }).then((o) => {
      o.message && (console.info("LoadOffers"), hQ(o.message), n.value = o.message, t?.emit("set_offers", o.message));
    }).catch((o) => {
      console.error("Failed to fetch offers:", o);
      const l = PA();
      l.length && (n.value = l, t?.emit("set_offers", l));
    });
  }
  return { offers: n, get_offers: a };
}
const Mie = {
  setup() {
    const e = Io(), t = eB(), n = kc(), a = Bie(() => {
      e && e.proxy && (e.proxy.dialog = !0);
    }), r = Vie();
    return { ...t, ...n, ...a, ...r };
  },
  data: function() {
    return {
      dialog: !1,
      payment: !1,
      showOffers: !1,
      coupons: !1,
      itemsLoaded: !1,
      customersLoaded: !1,
      // Category Sidebar Data
      itemGroups: [],
      selectedItemGroup: "ALL",
      sidebarCollapsed: !1,
      loadingCategories: !1,
      categorySearchTerm: "",
      activeFilter: "all"
    };
  },
  components: {
    ItemsSelector: Bee,
    Invoice: eae,
    OpeningDialog: uae,
    Payments: Lae,
    Drafts: Jae,
    ClosingDialog: Hre,
    Returns: nie,
    PosOffers: qae,
    PosCoupons: Kae,
    SalesOrders: tre,
    RestaurantOrders: Dre,
    NewAddress: jre,
    Variants: Jre,
    MpesaPayments: oie,
    CategorySidebar: Die
  },
  methods: {
    create_opening_voucher() {
      this.dialog = !0;
    },
    get_pos_setting() {
      frappe.db.get_doc("POS Settings", void 0).then((e) => {
        this.eventBus.emit("set_pos_settings", e);
      });
    },
    checkLoadingComplete() {
      this.itemsLoaded && this.customersLoaded && console.info("Loading completed");
    },
    // Category Sidebar Methods
    onGroupSelected(e) {
      this.selectedItemGroup = e, this.$refs.itemsSelector && (this.$refs.itemsSelector.item_group = e), this.eventBus.emit("item_group_changed", e);
    },
    onSidebarToggled(e) {
      this.sidebarCollapsed = e, this.$nextTick(() => {
        this.adjustLayout();
      });
    },
    onCategorySearch(e) {
      this.categorySearchTerm = e, this.filterCategories();
    },
    onFilterChanged(e) {
      this.activeFilter = e, this.applyFilter(e);
    },
    filterCategories() {
    },
    applyFilter(e) {
    },
    adjustLayout() {
      this.eventBus.emit("layout_adjusted", this.sidebarCollapsed);
    },
    loadItemGroups() {
      if (this.$refs.itemsSelector && this.$refs.itemsSelector.items_group) {
        const e = this.$refs.itemsSelector.items_group.map((t) => ({
          name: t,
          item_count: 0,
          // This should be calculated based on filtered items
          stock_value: 0
          // Optional: calculate stock value
        }));
        this.itemGroups = e;
      }
    }
  },
  mounted: function() {
    this.$nextTick(function() {
      this.check_opening_entry(), this.get_pos_setting(), this.eventBus.on("close_opening_dialog", () => {
        this.dialog = !1;
      }), this.eventBus.on("register_pos_data", (e) => {
        this.pos_profile = e.pos_profile, this.get_offers(this.pos_profile.name, this.pos_profile), this.pos_opening_shift = e.pos_opening_shift, this.eventBus.emit("register_pos_profile", e), console.info("LoadPosProfile");
      }), this.eventBus.on("register_pos_profile", (e) => {
        e && e.pos_profile && this.get_offers(e.pos_profile.name, e.pos_profile);
      }), this.eventBus.on("show_payment", (e) => {
        this.payment = e === "true", this.showOffers = !1, this.coupons = !1;
      }), this.eventBus.on("show_offers", (e) => {
        this.showOffers = e === "true", this.payment = !1, this.coupons = !1;
      }), this.eventBus.on("show_coupons", (e) => {
        this.coupons = e === "true", this.showOffers = !1, this.payment = !1;
      }), this.eventBus.on("open_closing_dialog", () => {
        this.get_closing_data();
      }), this.eventBus.on("submit_closing_pos", (e) => {
        this.submit_closing_pos(e);
      }), this.eventBus.on("items_loaded", () => {
        this.itemsLoaded = !0, this.checkLoadingComplete();
      }), this.eventBus.on("customers_loaded", () => {
        this.customersLoaded = !0, this.checkLoadingComplete();
      }), this.eventBus.on("item_groups_data", (e) => {
        this.itemGroups = e;
      });
    });
  },
  beforeUnmount() {
    this.eventBus.off("close_opening_dialog"), this.eventBus.off("register_pos_data"), this.eventBus.off("register_pos_profile"), this.eventBus.off("LoadPosProfile"), this.eventBus.off("show_offers"), this.eventBus.off("show_coupons"), this.eventBus.off("open_closing_dialog"), this.eventBus.off("submit_closing_pos"), this.eventBus.off("items_loaded"), this.eventBus.off("customers_loaded"), this.eventBus.off("item_groups_data");
  },
  // In the created() or mounted() lifecycle hook
  created() {
    tJ();
  }
}, Lie = { class: "pos-layout" };
function Rie(e, t, n, a, r, i) {
  const o = J("ClosingDialog"), l = J("Drafts"), s = J("SalesOrders"), d = J("RestaurantOrders"), u = J("Returns"), f = J("NewAddress"), h = J("MpesaPayments"), y = J("Variants"), p = J("OpeningDialog"), w = J("CategorySidebar"), b = J("ItemsSelector"), v = J("v-col"), g = J("PosOffers"), k = J("PosCoupons"), A = J("Payments"), C = J("Invoice"), D = J("v-row");
  return te(), Oe("div", {
    class: Ae(["pos-main-container dynamic-container", e.rtlClasses]),
    style: Je([e.responsiveStyles, e.rtlStyles])
  }, [
    _(o),
    _(l),
    _(s),
    _(d),
    _(u),
    _(f),
    _(h),
    _(y),
    e.dialog ? (te(), Le(p, {
      key: 0,
      dialog: e.dialog
    }, null, 8, ["dialog"])) : ke("", !0),
    sn(T("div", Lie, [
      sn(_(w, {
        "item-groups": e.itemGroups,
        "selected-group": e.selectedItemGroup,
        loading: e.loadingCategories,
        onGroupSelected: i.onGroupSelected,
        onSidebarToggled: i.onSidebarToggled,
        onSearchChanged: i.onCategorySearch,
        onFilterChanged: i.onFilterChanged
      }, null, 8, ["item-groups", "selected-group", "loading", "onGroupSelected", "onSidebarToggled", "onSearchChanged", "onFilterChanged"]), [
        [_a, !e.payment && !e.showOffers && !e.coupons]
      ]),
      T("div", {
        class: Ae(["pos-main-content", { "sidebar-collapsed": e.sidebarCollapsed }])
      }, [
        _(D, {
          dense: "",
          class: "ma-0 dynamic-main-row"
        }, {
          default: E(() => [
            sn(_(v, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: E(() => [
                _(b, { ref: "itemsSelector" }, null, 512)
              ]),
              _: 1
            }, 512), [
              [_a, !e.payment && !e.showOffers && !e.coupons]
            ]),
            sn(_(v, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: E(() => [
                _(g)
              ]),
              _: 1
            }, 512), [
              [_a, e.showOffers]
            ]),
            sn(_(v, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: E(() => [
                _(k)
              ]),
              _: 1
            }, 512), [
              [_a, e.coupons]
            ]),
            sn(_(v, {
              xl: "8",
              lg: "8",
              md: "7",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: E(() => [
                _(A)
              ]),
              _: 1
            }, 512), [
              [_a, e.payment]
            ]),
            _(v, {
              xl: "4",
              lg: "4",
              md: "5",
              sm: "6",
              cols: "12",
              class: "pos dynamic-col"
            }, {
              default: E(() => [
                _(C)
              ]),
              _: 1
            })
          ]),
          _: 1
        })
      ], 2)
    ], 512), [
      [_a, !e.dialog]
    ])
  ], 6);
}
const Fie = /* @__PURE__ */ on(Mie, [["render", Rie], ["__scopeId", "data-v-70b37679"]]), Nie = {
  mixins: [Bi],
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = kc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  data: function() {
    return {
      dialog: !1,
      pos_profile: "",
      pos_opening_shift: "",
      customer_name: "",
      customer_info: "",
      company: "",
      singleSelect: !0,
      invoices_loading: !1,
      unallocated_payments_loading: !1,
      mpesa_payments_loading: !1,
      payment_methods: [],
      outstanding_invoices: [],
      unallocated_payments: [],
      mpesa_payments: [],
      selected_invoices: [],
      selected_payments: [],
      selected_mpesa_payments: [],
      pos_profiles_list: [],
      pos_profile_search: "",
      payment_methods_list: [],
      mpesa_search_name: "",
      mpesa_search_mobile: "",
      invoices_headers: [
        {
          title: "",
          align: "start",
          sortable: !1,
          key: "actions",
          width: "50px"
        },
        {
          title: __("Invoice"),
          align: "start",
          sortable: !0,
          key: "voucher_no"
        },
        {
          title: __("Customer"),
          align: "start",
          sortable: !0,
          key: "customer_name"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Due Date"),
          align: "start",
          sortable: !0,
          key: "due_date"
        },
        {
          title: __("Total"),
          align: "end",
          sortable: !0,
          key: "invoice_amount"
        },
        {
          title: __("Outstanding"),
          align: "end",
          sortable: !0,
          key: "outstanding_amount"
        }
      ],
      unallocated_payments_headers: [
        {
          title: "",
          align: "center",
          sortable: !1,
          key: "select",
          width: "50px"
        },
        {
          title: __("Payment ID"),
          align: "start",
          sortable: !0,
          key: "name"
        },
        {
          title: __("Customer"),
          align: "start",
          sortable: !0,
          key: "customer_name"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Mode"),
          align: "start",
          sortable: !0,
          key: "mode_of_payment"
        },
        {
          title: __("Paid"),
          align: "end",
          sortable: !0,
          key: "paid_amount"
        },
        {
          title: __("Unallocated"),
          align: "end",
          sortable: !0,
          key: "unallocated_amount"
        }
      ],
      mpesa_payment_headers: [
        {
          title: __("Payment ID"),
          align: "start",
          sortable: !0,
          key: "transid"
        },
        {
          title: __("Full Name"),
          align: "start",
          sortable: !0,
          key: "full_name"
        },
        {
          title: __("Nobile Number"),
          align: "start",
          sortable: !0,
          key: "mobile_no"
        },
        {
          title: __("Date"),
          align: "start",
          sortable: !0,
          key: "posting_date"
        },
        {
          title: __("Amount"),
          align: "end",
          sortable: !0,
          key: "amount"
        }
      ],
      isSubmitting: !1
    };
  },
  components: {
    Customer: rB,
    UpdateCustomer: aB
  },
  methods: {
    async check_opening_entry() {
      var e = this;
      return await fm, await ia(), frappe.call("posawesome.posawesome.api.shifts.check_opening_shift", {
        user: frappe.session.user
      }).then((t) => {
        if (t.message) {
          this.pos_profile = t.message.pos_profile, this.pos_opening_shift = t.message.pos_opening_shift, this.company = t.message.company.name, e.eventBus.emit("payments_register_pos_profile", t.message), e.eventBus.emit("set_company", t.message.company), this.set_payment_methods();
          try {
            _1(t.message);
          } catch (n) {
            console.error("Failed to cache opening data", n);
          }
          this.pos_profile_search = "", this.pos_profiles_list = [], t.message.pos_profile && t.message.pos_profile.name && this.pos_profiles_list.push(t.message.pos_profile.name), this.payment_methods_list = [], this.pos_profile.payments.forEach((n) => {
            this.payment_methods_list.push(n.mode_of_payment);
          }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
        } else {
          const n = $u();
          if (n) {
            this.pos_profile = n.pos_profile, this.pos_opening_shift = n.pos_opening_shift, this.company = n.company.name, e.eventBus.emit("payments_register_pos_profile", n), e.eventBus.emit("set_company", n.company), this.set_payment_methods(), this.payment_methods_list = [], this.pos_profile.payments.forEach((a) => {
              this.payment_methods_list.push(a.mode_of_payment);
            }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
            return;
          }
          this.create_opening_voucher();
        }
      }).catch(() => {
        const t = $u();
        if (t) {
          this.pos_profile = t.pos_profile, this.pos_opening_shift = t.pos_opening_shift, this.company = t.company.name, e.eventBus.emit("payments_register_pos_profile", t), e.eventBus.emit("set_company", t.company), this.set_payment_methods(), this.payment_methods_list = [], this.pos_profile.payments.forEach((n) => {
            this.payment_methods_list.push(n.mode_of_payment);
          }), this.get_available_pos_profiles(), this.get_outstanding_invoices(), this.get_draft_mpesa_payments_register();
          return;
        }
        this.create_opening_voucher();
      });
    },
    get_available_pos_profiles() {
      if (this.pos_profile.posa_allow_mpesa_reconcile_payments)
        return frappe.call("posawesome.posawesome.api.payment_entry.get_available_pos_profiles", {
          company: this.company,
          currency: this.pos_profile.currency
        }).then((e) => {
          e.message && (this.pos_profiles_list = e.message);
        });
    },
    create_opening_voucher() {
      this.dialog = !0;
    },
    async fetch_customer_details() {
      var e = this;
      if (this.customer_name) {
        if (un()) {
          try {
            const n = (await yD() || []).find(
              (r) => r.name === e.customer_name || r.customer_name === e.customer_name
            );
            if (n) {
              e.customer_info = { ...n }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info);
              return;
            }
            const a = (v1() || []).map((r) => r.args).find((r) => r.customer_name === e.customer_name);
            a && (e.customer_info = { ...a, name: a.customer_name }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info));
          } catch (t) {
            console.error("Failed to fetch cached customer", t);
          }
          return;
        }
        try {
          const t = await frappe.call({
            method: "posawesome.posawesome.api.customers.get_customer_info",
            args: {
              customer: e.customer_name
            }
          }), n = t.message;
          t.exc || (e.customer_info = {
            ...n
          }, e.set_mpesa_search_params(), e.eventBus.emit("set_customer_info_to_edit", e.customer_info));
        } catch (t) {
          console.error("Failed to fetch customer details", t);
        }
      }
    },
    onInvoiceSelected(e) {
      e && e.item && e.item.customer && (this.eventBus.emit("set_customer", e.item.customer), this.$nextTick(() => {
        this.$forceUpdate();
      }));
    },
    get_outstanding_invoices() {
      if (this.invoices_loading = !0, this.selected_invoices = [], un()) {
        this.outstanding_invoices = [], this.invoices_loading = !1;
        return;
      }
      return frappe.call("posawesome.posawesome.api.payment_entry.get_outstanding_invoices", {
        customer: this.customer_name,
        company: this.company,
        currency: this.pos_profile.currency,
        pos_profile: this.pos_profile_search || null
      }).then((e) => {
        e.message && (this.outstanding_invoices = e.message, this.invoices_loading = !1, this.$nextTick(() => {
          this.$forceUpdate();
        }));
      });
    },
    get_unallocated_payments() {
      if (this.pos_profile.posa_allow_reconcile_payments) {
        if (this.unallocated_payments_loading = !0, !this.customer_name) {
          this.unallocated_payments = [], this.unallocated_payments_loading = !1;
          return;
        }
        if (un()) {
          this.unallocated_payments = [], this.unallocated_payments_loading = !1;
          return;
        }
        return frappe.call("posawesome.posawesome.api.payment_entry.get_unallocated_payments", {
          customer: this.customer_name,
          company: this.company,
          currency: this.pos_profile.currency
        }).then((e) => {
          e.message && (this.unallocated_payments = e.message, this.unallocated_payments_loading = !1);
        });
      }
    },
    set_mpesa_search_params() {
      this.pos_profile.posa_allow_mpesa_reconcile_payments && this.customer_name && (this.mpesa_search_name = this.customer_info.customer_name.split(" ")[0], this.customer_info.mobile_no && (this.mpesa_search_mobile = this.customer_info.mobile_no.substring(0, 4) + " ***** " + this.customer_info.mobile_no.substring(9)));
    },
    get_draft_mpesa_payments_register() {
      if (!this.pos_profile.posa_allow_mpesa_reconcile_payments) return;
      const e = this;
      if (this.mpesa_payments_loading = !0, un()) {
        this.mpesa_payments = [], this.mpesa_payments_loading = !1;
        return;
      }
      return frappe.call("posawesome.posawesome.api.m_pesa.get_mpesa_draft_payments", {
        company: e.company,
        mode_of_payment: null,
        full_name: e.mpesa_search_name || null,
        mobile_no: e.mpesa_search_mobile || null,
        payment_methods_list: e.payment_methods_list
      }).then((t) => {
        t.message ? e.mpesa_payments = t.message : e.mpesa_payments = [], e.mpesa_payments_loading = !1;
      });
    },
    set_payment_methods() {
      this.pos_profile.posa_allow_make_new_payments && (this.payment_methods = [], this.pos_profile.payments.forEach((e) => {
        this.payment_methods.push({
          mode_of_payment: e.mode_of_payment,
          amount: 0,
          row_id: e.name
        });
      }));
    },
    clear_all(e = !0) {
      this.customer_name = "", e && (this.customer_info = ""), this.mpesa_search_mobile = "", this.mpesa_search_name = "", this.mpesa_payments = [], this.selected_mpesa_payments = [], this.outstanding_invoices = [], this.unallocated_payments = [], this.selected_invoices = [], this.selected_payments = [], this.selected_mpesa_payments = [], this.set_payment_methods();
    },
    submit() {
      if (this.isSubmitting) return;
      this.isSubmitting = !0;
      const e = this.customer_name, t = this;
      if (!e) {
        this.isSubmitting = !1, frappe.throw(__("Please select a customer"));
        return;
      }
      if (this.selected_invoices.length == 0) {
        this.isSubmitting = !1, frappe.throw(__("Please select an invoice"));
        return;
      }
      if (this.total_selected_payments + this.total_selected_mpesa_payments + this.total_payment_methods <= 0) {
        this.isSubmitting = !1, frappe.throw(__("Please make a payment or select an payment"));
        return;
      }
      this.payment_methods.forEach((r) => {
        r.amount = flt(r.amount);
      });
      const a = {};
      if (a.customer = e, a.company = this.company, a.currency = this.pos_profile.currency, a.pos_opening_shift_name = this.pos_opening_shift.name, a.pos_profile_name = this.pos_profile.name, a.pos_profile = this.pos_profile, a.payment_methods = this.payment_methods, a.selected_invoices = this.selected_invoices, a.selected_payments = this.selected_payments, a.total_selected_invoices = flt(this.total_selected_invoices), a.selected_mpesa_payments = this.selected_mpesa_payments, a.total_selected_payments = flt(this.total_selected_payments), a.total_payment_methods = flt(this.total_payment_methods), a.total_selected_mpesa_payments = flt(this.total_selected_mpesa_payments), un()) {
        try {
          NA({ args: { payload: a } }), t.eventBus.emit("show_message", {
            title: __("Payment saved offline"),
            color: "warning"
          }), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
        } catch (r) {
          frappe.msgprint(
            __("Cannot Save Offline Payment: ") + (r.message || __("Unknown error"))
          );
        }
        t.isSubmitting = !1;
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: { payload: a },
        freeze: !0,
        freeze_message: __("Processing Payment"),
        callback: function(r) {
          t.isSubmitting = !1, r.message && (frappe.utils.play_sound("submit"), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register());
        },
        error: function() {
          t.isSubmitting = !1;
        }
      });
    },
    submit_and_print() {
      if (this.isSubmitting) return;
      this.isSubmitting = !0;
      const e = this.customer_name, t = this;
      if (!e) {
        this.isSubmitting = !1, frappe.throw(__("Please select a customer"));
        return;
      }
      if (this.selected_invoices.length == 0) {
        this.isSubmitting = !1, frappe.throw(__("Please select an invoice"));
        return;
      }
      if (this.total_selected_payments + this.total_selected_mpesa_payments + this.total_payment_methods <= 0) {
        this.isSubmitting = !1, frappe.throw(__("Please make a payment or select an payment"));
        return;
      }
      this.payment_methods.forEach((r) => {
        r.amount = flt(r.amount);
      });
      const a = {};
      if (a.customer = e, a.company = this.company, a.currency = this.pos_profile.currency, a.pos_opening_shift_name = this.pos_opening_shift.name, a.pos_profile_name = this.pos_profile.name, a.pos_profile = this.pos_profile, a.payment_methods = this.payment_methods, a.selected_invoices = this.selected_invoices, a.selected_payments = this.selected_payments, a.total_selected_invoices = flt(this.total_selected_invoices), a.selected_mpesa_payments = this.selected_mpesa_payments, a.total_selected_payments = flt(this.total_selected_payments), a.total_payment_methods = flt(this.total_payment_methods), a.total_selected_mpesa_payments = flt(this.total_selected_mpesa_payments), un()) {
        try {
          NA({ args: { payload: a } }), t.eventBus.emit("show_message", {
            title: __("Payment saved offline"),
            color: "warning"
          }), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
        } catch (r) {
          frappe.msgprint(
            __("Cannot Save Offline Payment: ") + (r.message || __("Unknown error"))
          );
        }
        t.isSubmitting = !1;
        return;
      }
      frappe.call({
        method: "posawesome.posawesome.api.payment_entry.process_pos_payment",
        args: { payload: a },
        freeze: !0,
        freeze_message: __("Processing Payment"),
        callback: function(r) {
          if (t.isSubmitting = !1, r.message) {
            console.log("Server response:", JSON.stringify(r.message)), frappe.utils.play_sound("submit");
            const i = r.message.new_payments_entry && r.message.new_payments_entry.length > 0 ? r.message.new_payments_entry[0].name : null;
            i ? (console.log("Opening print view with payment name:", i), t.load_print_page(i)) : (console.log("No payment_name found in response"), frappe.msgprint(
              __(
                "Payment submitted but print function could not be executed. Payment name not found."
              )
            )), t.clear_all(!1), t.customer_name = e, t.get_outstanding_invoices(), t.get_unallocated_payments(), t.set_mpesa_search_params(), t.get_draft_mpesa_payments_register();
          }
        },
        error: function() {
          t.isSubmitting = !1;
        }
      });
    },
    selectSingleInvoice(e) {
      console.log("Row clicked:", e), e && this.toggleInvoiceSelection(e);
    },
    isInvoiceSelected(e) {
      return this.selected_invoices.some((t) => t.voucher_no === e.voucher_no);
    },
    toggleInvoiceSelection(e) {
      this.isInvoiceSelected(e) ? this.selected_invoices = this.selected_invoices.filter(
        (t) => t.voucher_no !== e.voucher_no
      ) : (this.selected_invoices.push(e), e.customer && !this.customer_name && this.eventBus.emit("set_customer", e.customer)), this.$nextTick(() => {
        console.log("Selected invoices:", this.selected_invoices), console.log("Total selected amount:", this.total_selected_invoices), this.$forceUpdate();
      });
    },
    isSelected(e) {
      return this.isInvoiceSelected(e) ? "selected-row bg-primary bg-lighten-4" : "";
    },
    load_print_page(e) {
      if (!e) {
        frappe.msgprint(__("Payment name not found. Cannot open print view."));
        return;
      }
      const t = frappe.urllib.get_base_url() + "/printview?doctype=Payment%20Entry&name=" + e + "&trigger_print=1";
      console.log("Opening printing URL:", t), this.pos_profile?.posa_silent_print ? Wv(t) : window.open(t, "_blank");
    },
    async syncPendingPayments() {
      const e = YQ();
      if (e && this.eventBus.emit("show_message", {
        title: `${e} payment${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), un())
        return;
      const t = await XQ();
      t && t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline payment${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      });
    }
  },
  computed: {
    total_outstanding_amount() {
      return !this.outstanding_invoices || !this.outstanding_invoices.length ? 0 : this.outstanding_invoices.reduce((e, t) => e + flt(t?.outstanding_amount || 0), 0);
    },
    total_unallocated_amount() {
      return !this.unallocated_payments || !this.unallocated_payments.length ? 0 : this.unallocated_payments.reduce((e, t) => e + flt(t?.unallocated_amount || 0), 0);
    },
    total_selected_invoices() {
      if (!this.selected_invoices || !this.selected_invoices.length)
        return console.log("No selected invoices"), 0;
      const e = this.selected_invoices.reduce(
        (t, n) => t + flt(n?.outstanding_amount || 0),
        0
      );
      return console.log("Calculated total selected invoices:", e, "from", this.selected_invoices), e;
    },
    total_selected_payments() {
      return !this.selected_payments || !this.selected_payments.length ? 0 : this.selected_payments.reduce((e, t) => e + flt(t?.unallocated_amount || 0), 0);
    },
    total_selected_mpesa_payments() {
      return !this.selected_mpesa_payments || !this.selected_mpesa_payments.length ? 0 : this.selected_mpesa_payments.reduce((e, t) => e + flt(t?.amount || 0), 0);
    },
    total_payment_methods() {
      if (!this.payment_methods || !this.payment_methods.length) return 0;
      const e = this.payment_methods.reduce((t, n) => {
        const a = parseFloat(n?.amount || 0);
        return t + (isNaN(a) ? 0 : a);
      }, 0);
      return console.log("Payment methods total:", e, "from", this.payment_methods), e;
    },
    total_of_diff() {
      const e = this.total_selected_invoices || 0, t = (this.total_selected_payments || 0) + (this.total_selected_mpesa_payments || 0) + (this.total_payment_methods || 0);
      return console.log("Difference calculation:", {
        invoiceTotal: e,
        paymentTotal: t,
        selectedPayments: this.total_selected_payments,
        mpesaPayments: this.total_selected_mpesa_payments,
        methodPayments: this.total_payment_methods
      }), flt(e - t);
    },
    isDarkTheme() {
      return this.$theme.current === "dark";
    }
  },
  created() {
    this.syncPendingPayments(), this.eventBus.on("network-online", this.syncPendingPayments), this.eventBus.on("server-online", this.syncPendingPayments);
  },
  mounted: function() {
    this.$nextTick(function() {
      this.check_opening_entry(), this.eventBus.on("update_customer", (e) => {
        this.clear_all(!0), this.customer_name = e, this.fetch_customer_details(), this.get_outstanding_invoices(), this.get_unallocated_payments(), this.get_draft_mpesa_payments_register();
      }), this.eventBus.on("fetch_customer_details", () => {
        this.fetch_customer_details();
      });
    });
  },
  beforeUnmount() {
    this.eventBus.off("update_customer"), this.eventBus.off("fetch_customer_details"), this.eventBus.off("network-online", this.syncPendingPayments), this.eventBus.off("server-online", this.syncPendingPayments);
  }
}, Uie = {
  key: 0,
  class: "text-primary"
}, $ie = {
  key: 0,
  class: "golden--text text-end"
}, qie = { class: "text-primary" }, Hie = { key: 0 }, zie = {
  key: 0,
  class: "text-primary"
}, Wie = {
  key: 0,
  class: "golden--text text-end"
}, Kie = { class: "text-primary" }, jie = { key: 1 }, Yie = { class: "golden--text text-end" }, Gie = { class: "text-primary" }, Qie = {
  key: 0,
  class: "text-primary"
}, Jie = { key: 3 }, Xie = { class: "mt-1" }, Zie = { class: "d-flex align-center" }, eoe = { class: "mr-1 text-primary" }, toe = { class: "text-primary mt-1" }, noe = {
  class: "pb-6 pr-6",
  style: { position: "absolute", bottom: "0", width: "100%" }
};
function aoe(e, t, n, a, r, i) {
  const o = J("Customer"), l = J("v-divider"), s = J("v-col"), d = J("v-row"), u = J("v-select"), f = J("v-btn"), h = J("v-checkbox"), y = J("v-data-table"), p = J("v-text-field"), w = J("v-card");
  return te(), Oe("div", {
    fluid: "",
    class: Ae(a.rtlClasses)
  }, [
    sn(_(d, null, {
      default: E(() => [
        _(s, {
          md: "8",
          cols: "12",
          class: "pb-2 pr-0"
        }, {
          default: E(() => [
            _(w, {
              class: Ae([
                "main mx-auto mt-3 p-3 pb-16 overflow-y-auto",
                i.isDarkTheme ? "" : "bg-grey-lighten-5"
              ]),
              style: Je([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "94vh", height: "94vh" }])
            }, {
              default: E(() => [
                _(o),
                _(l),
                T("div", null, [
                  _(d, null, {
                    default: E(() => [
                      _(s, {
                        md: "7",
                        cols: "12"
                      }, {
                        default: E(() => [
                          T("p", null, [
                            T("strong", null, j(e.__("Invoices")), 1),
                            i.total_outstanding_amount ? (te(), Oe("span", Uie, j(e.__("- Total Outstanding")) + " : " + j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(i.total_outstanding_amount)), 1)) : ke("", !0)
                          ])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "5",
                        cols: "12"
                      }, {
                        default: E(() => [
                          i.total_selected_invoices ? (te(), Oe("p", $ie, [
                            T("span", null, j(e.__("Total Selected :")), 1),
                            T("span", null, j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(i.total_selected_invoices)), 1),
                            T("small", null, "(" + j(e.selected_invoices.length) + " invoice(s))", 1)
                          ])) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(d, {
                    align: "center",
                    "no-gutters": "",
                    class: "mb-1"
                  }, {
                    default: E(() => [
                      _(s, {
                        md: "4",
                        cols: "12"
                      }, {
                        default: E(() => [
                          _(u, {
                            density: "compact",
                            variant: "outlined",
                            "hide-details": "",
                            clearable: "",
                            class: "dark-field",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            modelValue: e.pos_profile_search,
                            "onUpdate:modelValue": t[0] || (t[0] = (b) => e.pos_profile_search = b),
                            items: e.pos_profiles_list,
                            "item-value": "name",
                            label: "Select POS Profile"
                          }, null, 8, ["bg-color", "modelValue", "items"])
                        ]),
                        _: 1
                      }),
                      _(s),
                      _(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: E(() => [
                          _(f, {
                            block: "",
                            color: "warning",
                            theme: "dark",
                            onClick: i.get_outstanding_invoices
                          }, {
                            default: E(() => [
                              ae(j(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: E(() => [
                          e.selected_invoices.length ? (te(), Le(f, {
                            key: 0,
                            block: "",
                            color: "error",
                            theme: "dark",
                            onClick: t[1] || (t[1] = (b) => {
                              e.selected_invoices = [], e.$forceUpdate();
                            })
                          }, {
                            default: E(() => [
                              ae(j(e.__("Clear")), 1)
                            ]),
                            _: 1
                          })) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(y, {
                    headers: e.invoices_headers,
                    items: e.outstanding_invoices,
                    "item-key": "voucher_no",
                    class: "elevation-1 mt-0",
                    loading: e.invoices_loading,
                    "onClick:row": i.selectSingleInvoice,
                    "item-class": i.isSelected
                  }, {
                    "item.actions": E(({ item: b }) => [
                      _(h, {
                        "model-value": i.isInvoiceSelected(b),
                        color: "primary",
                        onClick: ua((v) => i.toggleInvoiceSelection(b), ["stop"])
                      }, null, 8, ["model-value", "onClick"])
                    ]),
                    "item.invoice_amount": E(({ item: b }) => [
                      ae(j(e.currencySymbol(b.currency)) + " " + j(e.formatCurrency(b.invoice_amount)), 1)
                    ]),
                    "item.outstanding_amount": E(({ item: b }) => [
                      T("span", qie, j(e.currencySymbol(b?.currency || e.pos_profile.currency)) + " " + j(e.formatCurrency(b?.outstanding_amount || 0)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "loading", "onClick:row", "item-class"]),
                  _(l)
                ]),
                e.pos_profile.posa_allow_reconcile_payments && e.unallocated_payments.length ? (te(), Oe("div", Hie, [
                  _(d, null, {
                    default: E(() => [
                      _(s, {
                        md: "7",
                        cols: "12"
                      }, {
                        default: E(() => [
                          T("p", null, [
                            T("strong", null, j(e.__("Payments")), 1),
                            i.total_unallocated_amount ? (te(), Oe("span", zie, j(e.__("- Total Unallocated")) + " : " + j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(i.total_unallocated_amount)), 1)) : ke("", !0)
                          ])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "5",
                        cols: "12"
                      }, {
                        default: E(() => [
                          i.total_selected_payments ? (te(), Oe("p", Wie, [
                            T("span", null, j(e.__("Total Selected :")), 1),
                            T("span", null, j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(i.total_selected_payments)), 1)
                          ])) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(y, {
                    headers: e.unallocated_payments_headers,
                    items: e.unallocated_payments,
                    "item-key": "name",
                    class: "elevation-1 mt-0",
                    loading: e.unallocated_payments_loading
                  }, {
                    "item.select": E(({ item: b }) => [
                      _(h, {
                        modelValue: e.selected_payments,
                        "onUpdate:modelValue": t[2] || (t[2] = (v) => e.selected_payments = v),
                        value: b,
                        color: "primary",
                        "hide-details": "",
                        onClick: t[3] || (t[3] = ua(() => {
                        }, ["stop"]))
                      }, null, 8, ["modelValue", "value"])
                    ]),
                    "item.paid_amount": E(({ item: b }) => [
                      ae(j(e.currencySymbol(b.currency)) + " " + j(e.formatCurrency(b.paid_amount)), 1)
                    ]),
                    "item.unallocated_amount": E(({ item: b }) => [
                      T("span", Kie, j(e.currencySymbol(b.currency)) + " " + j(e.formatCurrency(b.unallocated_amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "loading"]),
                  _(l)
                ])) : ke("", !0),
                e.pos_profile.posa_allow_mpesa_reconcile_payments ? (te(), Oe("div", jie, [
                  _(d, null, {
                    default: E(() => [
                      _(s, {
                        md: "8",
                        cols: "12"
                      }, {
                        default: E(() => [
                          T("p", null, [
                            T("span", null, [
                              T("strong", null, j(e.__("Search Mpesa Payments")), 1)
                            ])
                          ])
                        ]),
                        _: 1
                      }),
                      i.total_selected_mpesa_payments ? (te(), Le(s, {
                        key: 0,
                        md: "4",
                        cols: "12"
                      }, {
                        default: E(() => [
                          T("p", Yie, [
                            T("span", null, j(e.__("Total Selected :")), 1),
                            T("span", null, j(e.currencySymbol(e.pos_profile.currency)) + " " + j(e.formatCurrency(i.total_selected_mpesa_payments)), 1)
                          ])
                        ]),
                        _: 1
                      })) : ke("", !0)
                    ]),
                    _: 1
                  }),
                  _(d, {
                    align: "center",
                    "no-gutters": "",
                    class: "mb-1"
                  }, {
                    default: E(() => [
                      _(s, {
                        md: "4",
                        cols: "12",
                        class: "mr-1"
                      }, {
                        default: E(() => [
                          _(p, {
                            density: "compact",
                            variant: "outlined",
                            color: "primary",
                            label: e.frappe._("Search by Name"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            class: "dark-field",
                            modelValue: e.mpesa_search_name,
                            "onUpdate:modelValue": t[4] || (t[4] = (b) => e.mpesa_search_name = b),
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        md: "4",
                        cols: "12",
                        class: "mr-1"
                      }, {
                        default: E(() => [
                          _(p, {
                            density: "compact",
                            variant: "outlined",
                            color: "primary",
                            label: e.frappe._("Search by Mobile"),
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            class: "dark-field",
                            modelValue: e.mpesa_search_mobile,
                            "onUpdate:modelValue": t[5] || (t[5] = (b) => e.mpesa_search_mobile = b),
                            clearable: ""
                          }, null, 8, ["label", "bg-color", "modelValue"])
                        ]),
                        _: 1
                      }),
                      _(s),
                      _(s, {
                        md: "3",
                        cols: "12"
                      }, {
                        default: E(() => [
                          _(f, {
                            block: "",
                            color: "warning",
                            theme: "dark",
                            onClick: i.get_draft_mpesa_payments_register
                          }, {
                            default: E(() => [
                              ae(j(e.__("Search")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  _(y, {
                    headers: e.mpesa_payment_headers,
                    items: e.mpesa_payments,
                    "item-key": "name",
                    class: "elevation-1 mt-0",
                    "single-select": e.singleSelect,
                    "show-select": "",
                    modelValue: e.selected_mpesa_payments,
                    "onUpdate:modelValue": t[6] || (t[6] = (b) => e.selected_mpesa_payments = b),
                    loading: e.mpesa_payments_loading,
                    "checkbox-color": "primary"
                  }, {
                    "item.amount": E(({ item: b }) => [
                      T("span", Gie, j(e.currencySymbol(b.currency)) + " " + j(e.formatCurrency(b.amount)), 1)
                    ]),
                    _: 1
                  }, 8, ["headers", "items", "single-select", "modelValue", "loading"])
                ])) : ke("", !0)
              ]),
              _: 1
            }, 8, ["class", "style"])
          ]),
          _: 1
        }),
        _(s, {
          md: "4",
          cols: "12",
          class: "pb-3"
        }, {
          default: E(() => [
            _(w, {
              class: Ae(["invoices mx-auto mt-3 p-3", i.isDarkTheme ? "" : "bg-grey-lighten-5"]),
              style: Je([i.isDarkTheme ? "background-color:#1E1E1E" : "", { "max-height": "94vh", height: "94vh" }])
            }, {
              default: E(() => [
                T("strong", null, [
                  t[10] || (t[10] = T("h4", { class: "text-primary" }, "Totals", -1)),
                  _(d, null, {
                    default: E(() => [
                      _(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: E(() => [
                          T("span", null, j(e.__("Total Invoices:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: E(() => [
                          _(p, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_invoices),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"]),
                          e.selected_invoices.length ? (te(), Oe("small", Qie, j(e.selected_invoices.length) + " invoice(s) selected", 1)) : ke("", !0)
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }),
                  i.total_selected_payments ? (te(), Le(d, { key: 0 }, {
                    default: E(() => [
                      _(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: E(() => [
                          T("span", null, j(e.__("Total Payments:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: E(() => [
                          _(p, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_payments),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : ke("", !0),
                  i.total_selected_mpesa_payments ? (te(), Le(d, { key: 1 }, {
                    default: E(() => [
                      _(s, {
                        md: "7",
                        class: "mt-1"
                      }, {
                        default: E(() => [
                          T("span", null, j(e.__("Total Mpesa:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: E(() => [
                          _(p, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_selected_mpesa_payments),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })) : ke("", !0),
                  e.payment_methods.length ? (te(), Le(l, { key: 2 })) : ke("", !0),
                  e.pos_profile.posa_allow_make_new_payments ? (te(), Oe("div", Jie, [
                    t[9] || (t[9] = T("h4", { class: "text-primary" }, "Make New Payment", -1)),
                    e.payment_methods.length ? (te(!0), Oe(Ge, { key: 0 }, ln(e.payment_methods, (b) => (te(), Le(d, {
                      key: b.row_id
                    }, {
                      default: E(() => [
                        _(s, { md: "7" }, {
                          default: E(() => [
                            T("span", Xie, j(e.__(b.mode_of_payment)) + ":", 1)
                          ]),
                          _: 2
                        }, 1024),
                        _(s, { md: "5" }, {
                          default: E(() => [
                            T("div", Zie, [
                              T("div", eoe, j(e.currencySymbol(e.pos_profile.currency)), 1),
                              _(p, {
                                class: "p-0 m-0 dark-field",
                                density: "compact",
                                color: "primary",
                                "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                                "hide-details": "",
                                modelValue: b.amount,
                                "onUpdate:modelValue": (v) => b.amount = v,
                                type: "number",
                                flat: "",
                                onInput: t[7] || (t[7] = (v) => e.$forceUpdate())
                              }, null, 8, ["bg-color", "modelValue", "onUpdate:modelValue"])
                            ])
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 2
                    }, 1024))), 128)) : ke("", !0)
                  ])) : ke("", !0),
                  _(l),
                  _(d, null, {
                    default: E(() => [
                      _(s, { md: "7" }, {
                        default: E(() => [
                          T("h4", toe, j(e.__("Difference:")), 1)
                        ]),
                        _: 1
                      }),
                      _(s, { md: "5" }, {
                        default: E(() => [
                          _(p, {
                            class: "p-0 m-0 dark-field",
                            density: "compact",
                            color: "primary",
                            "bg-color": i.isDarkTheme ? "#1E1E1E" : "white",
                            "hide-details": "",
                            "model-value": e.formatCurrency(i.total_of_diff),
                            readonly: "",
                            flat: "",
                            prefix: e.currencySymbol(e.pos_profile.currency)
                          }, null, 8, ["bg-color", "model-value", "prefix"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                T("div", noe, [
                  _(d, null, {
                    default: E(() => [
                      _(s, {
                        cols: "6",
                        class: "pr-1"
                      }, {
                        default: E(() => [
                          _(f, {
                            block: "",
                            size: "large",
                            color: "primary",
                            theme: "dark",
                            onClick: i.submit,
                            disabled: e.vaildatPayment || e.isSubmitting,
                            loading: e.isSubmitting
                          }, {
                            default: E(() => [
                              ae(j(e.__("Submit")), 1)
                            ]),
                            _: 1
                          }, 8, ["onClick", "disabled", "loading"])
                        ]),
                        _: 1
                      }),
                      _(s, {
                        cols: "6",
                        class: "pl-1"
                      }, {
                        default: E(() => [
                          _(f, {
                            block: "",
                            size: "large",
                            color: "success",
                            theme: "dark",
                            onClick: t[8] || (t[8] = (b) => i.submit_and_print()),
                            disabled: e.vaildatPayment || e.isSubmitting,
                            loading: e.isSubmitting
                          }, {
                            default: E(() => [
                              ae(j(e.__("Submit & Print")), 1)
                            ]),
                            _: 1
                          }, 8, ["disabled", "loading"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ])
              ]),
              _: 1
            }, 8, ["class", "style"])
          ]),
          _: 1
        })
      ]),
      _: 1
    }, 512), [
      [_a, !e.dialog]
    ])
  ], 2);
}
const roe = /* @__PURE__ */ on(Nie, [["render", aoe]]);
let Z_ = 0, ev = 0, bu = !1;
const Xn = Zn({
  active: !1,
  progress: 0,
  sources: {},
  message: __("Loading app data..."),
  sourceMessages: {
    init: __("Initializing application..."),
    items: __("Loading product catalog..."),
    customers: __("Loading customer database...")
  }
});
function ioe(e) {
  if (Xn.sources = {}, Z_ = e.length, ev = 0, bu = !1, !e || e.length === 0) {
    console.warn("No loading sources provided");
    return;
  }
  e.forEach((t) => {
    Xn.sources[t] = 0;
  }), Xn.progress = 0, Xn.active = !0, soe();
}
function iB(e, t) {
  if (!(e in Xn.sources) || bu || Z_ === 0) return;
  t = Math.max(0, Math.min(100, t));
  const n = Xn.sources[e];
  Xn.sources[e] = t;
  const a = Xn.sourceMessages[e] || __(`Loading ${e}...`);
  Xn.message !== a && (Xn.message = a), ev += t - n;
  const r = Math.round(ev / Z_);
  r !== Xn.progress && r <= 100 && ooe(Xn.progress, r), r >= 100 && !bu && oB();
}
function ooe(e, t) {
  if (e === t) return;
  const n = performance.now(), a = 300;
  function r(i) {
    const o = i - n, l = Math.min(o / a, 1), s = 1 - Math.pow(1 - l, 3);
    Xn.progress = Math.round(e + (t - e) * s), l < 1 ? requestAnimationFrame(r) : Xn.progress = t;
  }
  requestAnimationFrame(r);
}
function oB() {
  bu || (bu = !0, sB(), Xn.progress = 100, Xn.message = __("Setup complete!"), setTimeout(() => {
    Xn.active && (Xn.message = __("Ready!"), setTimeout(() => {
      Xn.active = !1, Xn.message = __("Loading app data..."), Z_ = 0, ev = 0, bu = !1;
    }, 600));
  }, 400));
}
let wu = null;
function soe() {
  wu && clearTimeout(wu), wu = setTimeout(() => {
    console.warn("Loading timeout reached, forcing loading state to complete"), Xn.message = __("Taking longer than expected..."), oB();
  }, 3e4);
}
function sB() {
  wu && (clearTimeout(wu), wu = null);
}
function jh(e) {
  console.log(`Loading source marked as loaded: ${e}`), iB(e, 100);
}
let jd = 0, Yh = 0;
const ax = 2, loe = 1, coe = 8e3, uoe = 8e3, doe = 8e3;
let Gh = 15e3;
const foe = 12e4, moe = 15e3;
function ff(e, t) {
  localStorage.setItem("networkOnline", JSON.stringify(e)), localStorage.setItem("serverOnline", JSON.stringify(t));
}
function hoe() {
  return {
    networkOnline: JSON.parse(localStorage.getItem("networkOnline") || "true"),
    serverOnline: JSON.parse(localStorage.getItem("serverOnline") || "true")
  };
}
function ow(e) {
  setTimeout(async () => {
    if (Jo()) {
      e.serverConnecting = !1, e.networkOnline = !1, e.serverOnline = !1, window.serverOnline = !1, ff(!1, !1), e.$forceUpdate(), ow(e);
      return;
    }
    e.serverConnecting = !0, e.$forceUpdate(), await e.checkNetworkConnectivity(), e.serverConnecting = !1, e.$forceUpdate(), e.serverOnline ? Gh = moe : Gh = Math.min(Gh * 2, foe), ow(e);
  }, Gh);
}
function _oe() {
  window.addEventListener("online", () => {
    Jo() || (this.networkOnline = !0, this.internetReachable = !0, console.log("Network: Online"), this.checkNetworkConnectivity());
  }), window.addEventListener("offline", () => {
    Jo() || (this.networkOnline = !1, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, console.log("Network: Offline"), this.$forceUpdate());
  });
  const e = hoe();
  this.networkOnline = e.networkOnline, this.serverOnline = e.serverOnline, this.internetReachable = !1, this.serverConnecting = !1, window.serverOnline = this.serverOnline, Jo() ? (this.networkOnline = !1, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, ff(!1, !1)) : (this.networkOnline = navigator.onLine, this.serverConnecting = !0, this.$forceUpdate(), this.checkNetworkConnectivity().then(() => {
    this.serverConnecting = !1, this.$forceUpdate();
  })), ow(this);
}
async function voe() {
  try {
    let e = !1, t = !1;
    const n = fetch("/app", {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(coe)
    }).then((d) => d.status < 500), a = fetch("/assets/frappe/images/frappe-logo.png", {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(uoe)
    }).then((d) => d.status < 500), r = fetch(window.location.origin, {
      method: "HEAD",
      cache: "no-cache",
      signal: AbortSignal.timeout(doe)
    }).then((d) => d.status < 500), i = Promise.any([n, a, r]).catch(() => !1), o = (async () => {
      try {
        const d = new AbortController(), u = setTimeout(() => d.abort(), 5e3);
        return await fetch("https://www.google.com/generate_204", {
          method: "GET",
          mode: "no-cors",
          cache: "no-cache",
          signal: d.signal
        }), clearTimeout(u), !0;
      } catch {
        return !1;
      }
    })(), [l, s] = await Promise.all([i, o]);
    e = l, t = s, e ? (Yh++, jd = 0, Yh >= loe && (!this.networkOnline || !this.serverOnline) && (this.networkOnline = e, this.internetReachable = t, this.serverOnline = !0, window.serverOnline = !0, ff(this.networkOnline, !0), console.log("Network: Connected"), this.$forceUpdate())) : (jd++, Yh = 0, jd >= ax && (this.networkOnline || this.serverOnline) && (this.networkOnline = e, this.internetReachable = t, this.serverOnline = !1, window.serverOnline = !1, ff(this.networkOnline, !1), console.log("Network: Disconnected"), this.$forceUpdate()));
  } catch (e) {
    console.warn("Network connectivity check failed:", e), jd++, Yh = 0, jd >= ax && (this.networkOnline = navigator.onLine, this.internetReachable = !1, this.serverOnline = !1, window.serverOnline = !1, ff(this.networkOnline, !1), this.$forceUpdate());
  }
}
function poe(e) {
  const t = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/, n = /^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::1$|^::/, a = ["localhost", "127.0.0.1", "::1", "0.0.0.0"];
  return t.test(e) || n.test(e) || a.includes(e.toLowerCase());
}
async function goe(e, t, n) {
  const a = [];
  a.push(this.checkFrappePing()), a.push(this.checkCurrentOrigin(t, e, n)), this.isIpHost || a.push(this.checkExternalConnectivity()), frappe.realtime && frappe.realtime.socket && a.push(this.checkWebSocketConnectivity());
  try {
    return (await Promise.allSettled(a)).some((i) => i.status === "fulfilled" && i.value === !0);
  } catch (r) {
    return console.warn("All connectivity checks failed:", r), !1;
  }
}
async function yoe() {
  try {
    const e = new AbortController(), t = setTimeout(() => e.abort(), 5e3), n = await fetch("/api/method/ping", {
      method: "HEAD",
      cache: "no-cache",
      signal: e.signal,
      headers: {
        "Cache-Control": "no-cache, no-store, must-revalidate",
        Pragma: "no-cache",
        Expires: "0"
      }
    });
    return clearTimeout(t), n.ok;
  } catch (e) {
    return e.name !== "AbortError" && console.warn("Frappe ping check failed:", e), !1;
  }
}
async function boe(e, t, n) {
  try {
    const a = new AbortController(), r = setTimeout(() => a.abort(), 5e3), i = `${e}//${t}${n ? ":" + n : ""}`, o = await fetch(`${i}/api/method/frappe.auth.get_logged_user`, {
      method: "HEAD",
      cache: "no-cache",
      signal: a.signal,
      headers: {
        "Cache-Control": "no-cache, no-store, must-revalidate"
      }
    });
    return clearTimeout(r), o.status < 500;
  } catch (a) {
    return a.name !== "AbortError" && console.warn("Current origin check failed:", a), !1;
  }
}
async function woe() {
  try {
    const e = new AbortController(), t = setTimeout(() => e.abort(), 3e3);
    return await fetch("https://httpbin.org/status/200", {
      method: "HEAD",
      mode: "no-cors",
      cache: "no-cache",
      signal: e.signal
    }), clearTimeout(t), !0;
  } catch (e) {
    return e.name !== "AbortError" && console.warn("External connectivity check failed:", e), !1;
  }
}
async function koe() {
  try {
    return frappe.realtime && frappe.realtime.socket ? frappe.realtime.socket.readyState === 1 : !1;
  } catch (e) {
    return console.warn("WebSocket connectivity check failed:", e), !1;
  }
}
const Soe = {
  setup() {
    const { isRtl: e, rtlStyles: t, rtlClasses: n } = kc();
    return {
      isRtl: e,
      rtlStyles: t,
      rtlClasses: n
    };
  },
  data: function() {
    return {
      page: "POS",
      // POS Profile data
      posProfile: {},
      pendingInvoices: 0,
      lastInvoiceId: "",
      // Network status
      networkOnline: navigator.onLine || !1,
      serverOnline: !1,
      serverConnecting: !1,
      internetReachable: !1,
      isIpHost: !1,
      // Sync data
      syncTotals: { pending: 0, synced: 0, drafted: 0 },
      manualOffline: !1,
      // Cache data
      cacheUsage: 0,
      cacheUsageLoading: !1,
      cacheUsageDetails: { total: 0, indexedDB: 0, localStorage: 0 },
      cacheReady: !1
      // Loading progress handled via utility
    };
  },
  computed: {
    isDark() {
      return this.$theme?.current === "dark";
    },
    loadingProgress() {
      return Xn.progress;
    },
    loadingActive() {
      return Xn.active;
    },
    loadingMessage() {
      return Xn.message;
    }
  },
  watch: {
    networkOnline(e, t) {
      e && !t && (this.refreshTaxInclusiveSetting(), this.eventBus.emit("network-online"), this.handleSyncInvoices());
    },
    serverOnline(e, t) {
      e && !t && (this.eventBus.emit("server-online"), this.handleSyncInvoices());
    }
  },
  components: {
    Navbar: qX,
    POS: Fie,
    Payments: roe
  },
  mounted() {
    console.log("POS App mounted - preserving Frappe navbar"), this.cacheReady = VQ(), ioe(["init", "items", "customers"]), this.initializeData(), this.setupNetworkListeners(), this.setupEventListeners(), this.handleRefreshCacheUsage();
  },
  methods: {
    setupNetworkListeners: _oe,
    checkNetworkConnectivity: voe,
    detectHostType: poe,
    performConnectivityChecks: goe,
    checkFrappePing: yoe,
    checkCurrentOrigin: boe,
    checkExternalConnectivity: woe,
    checkWebSocketConnectivity: koe,
    setPage(e) {
      this.page = e;
    },
    async initializeData() {
      await fm, await pu, this.cacheReady = !0, ia().catch(() => {
      });
      const e = $u();
      e && e.pos_profile && (this.posProfile = e.pos_profile, navigator.onLine && await this.refreshTaxInclusiveSetting()), RQ() && (alert("Offline queue is too large. Old entries will be purged."), FQ()), this.pendingInvoices = qs(), this.syncTotals = DQ(), RA().then((t) => {
        t.percentage > 90 && alert("Local cache nearing capacity. Consider going online to sync.");
      }).catch(() => {
      }), this.isIpHost = /^\d+\.\d+\.\d+\.\d+/.test(window.location.hostname), this.manualOffline = Jo(), this.manualOffline && (this.networkOnline = !1, this.serverOnline = !1, window.serverOnline = !1), jh("init"), setTimeout(() => {
        Xn.active && (console.warn("Forcing items/customers to complete due to delay"), jh("items"), jh("customers"));
      }, 1e4);
    },
    setupEventListeners() {
      this.eventBus && (this.eventBus.on("register_pos_profile", (e) => {
        this.posProfile = e.pos_profile || {}, navigator.onLine && this.refreshTaxInclusiveSetting();
      }), this.eventBus.on("set_last_invoice", (e) => {
        this.lastInvoiceId = e;
      }), this.eventBus.on("data-loaded", (e) => {
        jh(e);
      }), this.eventBus.on("data-load-progress", ({ name: e, progress: t }) => {
        iB(e, t);
      }), this.eventBus.on("print_last_invoice", () => {
        this.handlePrintLastInvoice();
      }), this.eventBus.on("sync_invoices", () => {
        this.handleSyncInvoices();
      }), this.eventBus.on("pending_invoices_changed", (e) => {
        this.pendingInvoices = e;
      })), frappe.realtime && (frappe.realtime.on("connect", () => {
        this.serverOnline = !0, window.serverOnline = !0, this.serverConnecting = !1, console.log("Server: Connected via WebSocket"), this.$forceUpdate();
      }), frappe.realtime.on("disconnect", () => {
        this.serverOnline = !1, window.serverOnline = !1, this.serverConnecting = !1, console.log("Server: Disconnected from WebSocket"), setTimeout(() => {
          Jo() || this.checkNetworkConnectivity();
        }, 1e3);
      }), frappe.realtime.on("connecting", () => {
        this.serverConnecting = !0, console.log("Server: Connecting to WebSocket..."), this.$forceUpdate();
      }), frappe.realtime.on("reconnect", () => {
        console.log("Server: Reconnected to WebSocket"), window.serverOnline = !0, Jo() || this.checkNetworkConnectivity();
      })), document.addEventListener("visibilitychange", () => {
        !document.hidden && navigator.onLine && !Jo() && this.checkNetworkConnectivity();
      });
    },
    // Event handlers for navbar events
    handleNavClick() {
    },
    handleCloseShift() {
      this.eventBus.emit("open_closing_dialog");
    },
    handlePrintLastInvoice() {
      if (!this.lastInvoiceId)
        return;
      const e = this.posProfile.print_format_for_online || this.posProfile.print_format, t = this.posProfile.letter_head || 0, n = this.posProfile.create_pos_invoice_instead_of_sales_invoice ? "POS Invoice" : "Sales Invoice", a = frappe.urllib.get_base_url() + "/printview?doctype=" + encodeURIComponent(n) + "&name=" + this.lastInvoiceId + "&trigger_print=1&format=" + e + "&no_letterhead=" + t;
      if (this.posProfile.posa_silent_print)
        Wv(a);
      else {
        const r = window.open(a, "Print");
        r.addEventListener(
          "load",
          function() {
            r.print();
          },
          { once: !0 }
        );
      }
    },
    async handleSyncInvoices() {
      const e = qs();
      if (e && this.eventBus.emit("show_message", {
        title: `${e} invoice${e > 1 ? "s" : ""} pending for sync`,
        color: "warning"
      }), un())
        return;
      const t = await kD();
      t && (t.synced || t.drafted) && (t.synced && this.eventBus.emit("show_message", {
        title: `${t.synced} offline invoice${t.synced > 1 ? "s" : ""} synced`,
        color: "success"
      }), t.drafted && this.eventBus.emit("show_message", {
        title: `${t.drafted} offline invoice${t.drafted > 1 ? "s" : ""} saved as draft`,
        color: "warning"
      })), this.pendingInvoices = qs(), this.syncTotals = t || this.syncTotals;
    },
    handleToggleOffline() {
      LQ(), this.manualOffline = Jo(), this.manualOffline ? (this.networkOnline = !1, this.serverOnline = !1, window.serverOnline = !1) : this.checkNetworkConnectivity();
    },
    handleToggleTheme() {
      this.$theme.toggle();
    },
    handleLogout() {
      frappe.call("logout").finally(() => {
        window.location.href = "/app";
      });
    },
    handleRefreshCacheUsage() {
      this.cacheUsageLoading = !0, RA().then((e) => {
        this.cacheUsage = e.percentage || 0, this.cacheUsageDetails = {
          total: e.total || 0,
          indexedDB: e.indexedDB || 0,
          localStorage: e.localStorage || 0
        };
      }).catch((e) => {
        console.error("Failed to refresh cache usage", e);
      }).finally(() => {
        this.cacheUsageLoading = !1;
      });
    },
    async refreshTaxInclusiveSetting() {
      if (!(!this.posProfile || !this.posProfile.name || !navigator.onLine))
        try {
          const e = await frappe.call({
            method: "posawesome.posawesome.api.utilities.get_pos_profile_tax_inclusive",
            args: {
              pos_profile: this.posProfile.name
            }
          });
          if (e.message !== void 0) {
            const t = e.message;
            try {
              localStorage.setItem("posa_tax_inclusive", JSON.stringify(t));
            } catch (n) {
              console.warn("Failed to cache tax inclusive setting", n);
            }
            import("./index-CPC-jP0v.js").then((n) => {
              n && n.setTaxInclusiveSetting && n.setTaxInclusiveSetting(t);
            }).catch(() => {
            });
          }
        } catch (e) {
          console.warn("Failed to refresh tax inclusive setting", e);
        }
    },
    handleUpdateAfterDelete() {
    },
    remove_frappe_nav() {
      console.log("remove_frappe_nav() called but disabled");
    },
    adjustForDualNavbars() {
      this.$nextTick(function() {
      });
    }
  },
  beforeUnmount() {
    this.eventBus && (this.eventBus.off("pending_invoices_changed"), this.eventBus.off("data-loaded")), sB();
  },
  created: function() {
    console.log("POS Awesome loaded - navbar handled by Frappe page");
  }
}, Coe = { class: "page-content" };
function Aoe(e, t, n, a, r, i) {
  const o = J("Navbar"), l = J("v-main"), s = J("v-app");
  return te(), Le(s, {
    class: Ae(["pos-app-content", a.rtlClasses])
  }, {
    default: E(() => [
      _(l, { class: "main-content" }, {
        default: E(() => [
          _(o, {
            "pos-profile": e.posProfile,
            "pending-invoices": e.pendingInvoices,
            "last-invoice-id": e.lastInvoiceId,
            "network-online": e.networkOnline,
            "server-online": e.serverOnline,
            "server-connecting": e.serverConnecting,
            "is-ip-host": e.isIpHost,
            "sync-totals": e.syncTotals,
            "manual-offline": e.manualOffline,
            "is-dark": i.isDark,
            "cache-usage": e.cacheUsage,
            "cache-usage-loading": e.cacheUsageLoading,
            "cache-usage-details": e.cacheUsageDetails,
            "cache-ready": e.cacheReady,
            "loading-progress": i.loadingProgress,
            "loading-active": i.loadingActive,
            "loading-message": i.loadingMessage,
            onChangePage: t[0] || (t[0] = (d) => i.setPage(d)),
            onNavClick: i.handleNavClick,
            onCloseShift: i.handleCloseShift,
            onPrintLastInvoice: i.handlePrintLastInvoice,
            onSyncInvoices: i.handleSyncInvoices,
            onToggleOffline: i.handleToggleOffline,
            onToggleTheme: i.handleToggleTheme,
            onLogout: i.handleLogout,
            onRefreshCacheUsage: i.handleRefreshCacheUsage,
            onUpdateAfterDelete: i.handleUpdateAfterDelete
          }, null, 8, ["pos-profile", "pending-invoices", "last-invoice-id", "network-online", "server-online", "server-connecting", "is-ip-host", "sync-totals", "manual-offline", "is-dark", "cache-usage", "cache-usage-loading", "cache-usage-details", "cache-ready", "loading-progress", "loading-active", "loading-message", "onNavClick", "onCloseShift", "onPrintLastInvoice", "onSyncInvoices", "onToggleOffline", "onToggleTheme", "onLogout", "onRefreshCacheUsage", "onUpdateAfterDelete"]),
          T("div", Coe, [
            (te(), Le(Ku(e.page), { class: "mx-4 md-4" }))
          ])
        ]),
        _: 1
      })
    ]),
    _: 1
  }, 8, ["class"]);
}
const xoe = /* @__PURE__ */ on(Soe, [["render", Aoe], ["__scopeId", "data-v-2c31a582"]]);
typeof window < "u" && !window.Dexie && (window.Dexie = Qi);
frappe.provide("frappe.PosApp");
frappe.PosApp.posapp = class {
  constructor({ parent: e }) {
    this.$parent = $(document), this.page = e.page, this.make_body();
  }
  make_body() {
    this.$el = this.$parent.find(".main-section");
    const e = uI({
      components: hG,
      directives: xG,
      locale: {
        rtl: frappe.utils.is_rtl()
      },
      theme: {
        defaultTheme: "light",
        themes: {
          light: {
            colors: {
              background: "#FFFFFF",
              primary: "#0097A7",
              secondary: "#00BCD4",
              accent: "#9575CD",
              success: "#66BB6A",
              info: "#2196F3",
              warning: "#FF9800",
              error: "#E86674",
              orange: "#E65100",
              golden: "#A68C59",
              badge: "#F5528C",
              customPrimary: "#085294"
            }
          },
          dark: {
            dark: !0,
            colors: {
              background: "#121212",
              surface: "#1E1E1E",
              primary: "#BB86FC",
              primaryVariant: "#985EFF",
              secondary: "#03DAC6",
              accent: "#9575CD",
              success: "#66BB6A",
              info: "#2196F3",
              warning: "#FF9800",
              error: "#CF6679",
              orange: "#FF6F00",
              golden: "#A68C59",
              badge: "#F5528C",
              customPrimary: "#4FC3F7",
              onBackground: "#FFFFFF",
              onSurface: "#FFFFFF",
              divider: "#373737"
            }
          }
        }
      }
    }), t = A3(xoe);
    if (t.component("VueDatePicker", P0), t.use(IH), t.use(e), t.use(EH, { vuetify: e }), t.mount(this.$el[0]), !document.querySelector('link[rel="manifest"]')) {
      const n = document.createElement("link");
      n.rel = "manifest", n.href = "/manifest.json", document.head.appendChild(n);
    }
    ("serviceWorker" in navigator && window.location.protocol === "https:" || window.location.hostname === "localhost" || window.location.hostname === "127.0.0.1") && navigator.serviceWorker.register("/sw.js").catch((n) => console.error("SW registration failed", n));
  }
  setup_header() {
  }
};
export {
  Moe as $,
  CQ as A,
  AQ as B,
  xQ as C,
  TQ as D,
  IQ as E,
  EQ as F,
  PQ as G,
  OQ as H,
  Cy as I,
  DQ as J,
  BQ as K,
  Doe as L,
  Jo as M,
  MQ as N,
  LQ as O,
  RQ as P,
  FQ as Q,
  Xs as R,
  pQ as S,
  gQ as T,
  Boe as U,
  J_ as V,
  RA as W,
  VQ as X,
  NQ as Y,
  UQ as Z,
  Voe as _,
  Toe as a,
  bD as a0,
  FA as a1,
  Ay as a2,
  Loe as a3,
  qQ as a4,
  Foe as a5,
  $Q as a6,
  Roe as a7,
  un as a8,
  HQ as a9,
  Ioe as aA,
  vQ as aB,
  UA as aC,
  ZQ as aD,
  Uoe as aE,
  eJ as aF,
  $A as aG,
  $oe as aH,
  tJ as aI,
  Poe as aJ,
  Ooe as aK,
  wD as aa,
  zQ as ab,
  WQ as ac,
  qs as ad,
  NA as ae,
  KQ as af,
  jQ as ag,
  Noe as ah,
  YQ as ai,
  GQ as aj,
  QQ as ak,
  v1 as al,
  JQ as am,
  kD as an,
  SD as ao,
  XQ as ap,
  Uh as aq,
  EA as ar,
  hQ as as,
  PA as at,
  _Q as au,
  gD as av,
  Uu as aw,
  OA as ax,
  DA as ay,
  Kd as az,
  h1 as b,
  ia as c,
  gt as d,
  pu as e,
  BA as f,
  Eoe as g,
  $h as h,
  fm as i,
  yD as j,
  qh as k,
  VA as l,
  xe as m,
  bQ as n,
  wQ as o,
  Tt as p,
  MA as q,
  Sy as r,
  yQ as s,
  pD as t,
  Hh as u,
  LA as v,
  kQ as w,
  $u as x,
  _1 as y,
  SQ as z
};
